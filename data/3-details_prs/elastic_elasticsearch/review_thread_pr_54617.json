{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk3MjYwNzgy", "number": 54617, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwODozNTo0M1rODt2gqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMjozNDoxNlrODt7opQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5NDA1NjExOnYy", "diffSide": "RIGHT", "path": "server/src/test/java/org/elasticsearch/usage/UsageServiceTests.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwODozNTo0M1rOF_g2nQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMjowODoyNlrOF_oJRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjE0Mjg3Nw==", "bodyText": "How do you feel about adding JavaDoc for these new test cases? We added something to the contribution guidelines about this, and I personally find it enormously useful to check that the stated purpose of the test matches the implementation.", "url": "https://github.com/elastic/elasticsearch/pull/54617#discussion_r402142877", "createdAt": "2020-04-02T08:35:43Z", "author": {"login": "pugnascotia"}, "path": "server/src/test/java/org/elasticsearch/usage/UsageServiceTests.java", "diffHunk": "@@ -41,6 +42,45 @@\n \n public class UsageServiceTests extends ESTestCase {\n \n+    public void testNullHandler() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62a0b79f7023c2ff900d190668146e2b83a72a96"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjE1MDU4Ng==", "bodyText": "Also, and maybe this is just a preference, but I like to name my tests so that they contain the expectation - so testHandlerCannotBeNull, or testHandlerMustHaveAName, etc. Otherwise the test name says what the test is doing, but not what the outcome should be. There's overlap with the JavaDoc, but it might be useful in e.g. the Gradle UI.", "url": "https://github.com/elastic/elasticsearch/pull/54617#discussion_r402150586", "createdAt": "2020-04-02T08:47:50Z", "author": {"login": "pugnascotia"}, "path": "server/src/test/java/org/elasticsearch/usage/UsageServiceTests.java", "diffHunk": "@@ -41,6 +42,45 @@\n \n public class UsageServiceTests extends ESTestCase {\n \n+    public void testNullHandler() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjE0Mjg3Nw=="}, "originalCommit": {"oid": "62a0b79f7023c2ff900d190668146e2b83a72a96"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjI2MjM0Mg==", "bodyText": "I added Javadocs, and I adjusted the name of testHandlerCannotBeNull, but testAHandlerWithNoName I'm keeping because it's a reference to a song, and it's fun.", "url": "https://github.com/elastic/elasticsearch/pull/54617#discussion_r402262342", "createdAt": "2020-04-02T12:08:26Z", "author": {"login": "jasontedor"}, "path": "server/src/test/java/org/elasticsearch/usage/UsageServiceTests.java", "diffHunk": "@@ -41,6 +42,45 @@\n \n public class UsageServiceTests extends ESTestCase {\n \n+    public void testNullHandler() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjE0Mjg3Nw=="}, "originalCommit": {"oid": "62a0b79f7023c2ff900d190668146e2b83a72a96"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5NDA1ODQ1OnYy", "diffSide": "RIGHT", "path": "server/src/test/java/org/elasticsearch/usage/UsageServiceTests.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwODozNjoyMlrOF_g4Iw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMjowOToyNlrOF_oLXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjE0MzI2Nw==", "bodyText": "Quality variable name! \ud83d\udc4d\ud83d\udc34", "url": "https://github.com/elastic/elasticsearch/pull/54617#discussion_r402143267", "createdAt": "2020-04-02T08:36:22Z", "author": {"login": "pugnascotia"}, "path": "server/src/test/java/org/elasticsearch/usage/UsageServiceTests.java", "diffHunk": "@@ -41,6 +42,45 @@\n \n public class UsageServiceTests extends ESTestCase {\n \n+    public void testNullHandler() {\n+        final UsageService service = new UsageService();\n+        expectThrows(NullPointerException.class, () -> service.addRestHandler(null));\n+    }\n+\n+    public void testAHandlerWithNoName() {\n+        final UsageService service = new UsageService();\n+        final BaseRestHandler horse = new MockRestHandler(null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62a0b79f7023c2ff900d190668146e2b83a72a96"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjI2Mjg3Ng==", "bodyText": "Little slice of American pie right there. \ud83d\ude09", "url": "https://github.com/elastic/elasticsearch/pull/54617#discussion_r402262876", "createdAt": "2020-04-02T12:09:26Z", "author": {"login": "jasontedor"}, "path": "server/src/test/java/org/elasticsearch/usage/UsageServiceTests.java", "diffHunk": "@@ -41,6 +42,45 @@\n \n public class UsageServiceTests extends ESTestCase {\n \n+    public void testNullHandler() {\n+        final UsageService service = new UsageService();\n+        expectThrows(NullPointerException.class, () -> service.addRestHandler(null));\n+    }\n+\n+    public void testAHandlerWithNoName() {\n+        final UsageService service = new UsageService();\n+        final BaseRestHandler horse = new MockRestHandler(null);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjE0MzI2Nw=="}, "originalCommit": {"oid": "62a0b79f7023c2ff900d190668146e2b83a72a96"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5NDg5NTczOnYy", "diffSide": "RIGHT", "path": "server/src/test/java/org/elasticsearch/usage/UsageServiceTests.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMjozNDoxNlrOF_pEZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMjozNDoxNlrOF_pEZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjI3NzQ3Nw==", "bodyText": "\ud83e\udd23", "url": "https://github.com/elastic/elasticsearch/pull/54617#discussion_r402277477", "createdAt": "2020-04-02T12:34:16Z", "author": {"login": "pugnascotia"}, "path": "server/src/test/java/org/elasticsearch/usage/UsageServiceTests.java", "diffHunk": "@@ -56,15 +62,22 @@ public void testAHandlerWithNoName() {\n             equalTo(\"handler of type [org.elasticsearch.usage.UsageServiceTests$MockRestHandler] does not have a name\"));\n     }\n \n+    /**\n+     * Test that we can add the same instance of a {@link org.elasticsearch.rest.RestHandler} to the {@link UsageService} multiple times.\n+     */\n     public void testHandlerWithConflictingNamesButSameInstance() {\n         final UsageService service = new UsageService();\n         final String name = randomAlphaOfLength(8);\n         final BaseRestHandler first = new MockRestHandler(name);\n         service.addRestHandler(first);\n-        // nothing bad should happen\n+        // nothing bad ever happens to me", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bcbf0015482023731a8d0b53a9c48962432767f9"}, "originalPosition": 32}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3946, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}