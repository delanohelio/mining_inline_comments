{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY2Njc3NzEw", "number": 61018, "title": "[7.9][DOCS] Replaces ml.node with node.roles: [ ml ] in ML settings", "bodyText": "Overview\nThis PR applies the changes of the following PR to the 7.9 branch:\n[DOCS] Replaces ml.node with node.roles: [ ml ] in ML settings #61017\nand adds a deprecation note to the text.\nPreview:\nMachine learning settings in Elasticsearch", "createdAt": "2020-08-12T10:35:33Z", "url": "https://github.com/elastic/elasticsearch/pull/61018", "merged": true, "mergeCommit": {"oid": "a58bcee31cde5bd244010bce070b81ac5a169c36"}, "closed": true, "closedAt": "2020-08-18T13:26:49Z", "author": {"login": "szabosteve"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-I5wpgH2gAyNDY2Njc3NzEwOjc2OTdhNWI5ZGFhNzJlZWYxYjQ4MmRmYjhmMjMyYjZkMjE3ZTQ4ZjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdADgYPgH2gAyNDY2Njc3NzEwOmQxYzhlYTEwY2FkOWNjOGMxOTBmNDAxYWZjOTM2ZTk2YjU0MWQwNzE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7697a5b9daa72eef1b482dfb8f232b6d217e48f3", "author": {"user": {"login": "szabosteve", "name": "Istv\u00e1n Zolt\u00e1n Szab\u00f3"}}, "url": "https://github.com/elastic/elasticsearch/commit/7697a5b9daa72eef1b482dfb8f232b6d217e48f3", "committedDate": "2020-08-12T10:31:43Z", "message": "[7.9][DOCS] Replaces ml.node with node.roles:ml in ML settings."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1ODAwNTY1", "url": "https://github.com/elastic/elasticsearch/pull/61018#pullrequestreview-465800565", "createdAt": "2020-08-12T10:50:47Z", "commit": {"oid": "7697a5b9daa72eef1b482dfb8f232b6d217e48f3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxMDo1MDo0N1rOG_cBlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxMDo1Mzo1OVrOG_cHyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTE3MjYzMA==", "bodyText": "suggest append ... to identify the node as an ML node that is capable of running jobs.\nAlso, can we explain..\nIf using the setting node.roles then all required roles must be explicitly set.\nThe absence of node.roles will have ml enabled by default. However setting node.roles:[] will configure a dedicated coordinating node.", "url": "https://github.com/elastic/elasticsearch/pull/61018#discussion_r469172630", "createdAt": "2020-08-12T10:50:47Z", "author": {"login": "sophiec20"}, "path": "docs/reference/settings/ml-settings.asciidoc", "diffHunk": "@@ -28,17 +28,19 @@ file.\n [[general-ml-settings]]\n ==== General machine learning settings\n \n-`node.ml`::\n-deprecated:[7.9.0,\"Use <<modules-node,node.roles>> instead.\"]\n-Set to `true` (default) to identify the node as a _machine learning node_. +\n+`node.roles: [ ml ]`::\n+Set `node.roles` to contain `ml` to identify the node as a _{ml} node_. +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7697a5b9daa72eef1b482dfb8f232b6d217e48f3"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTE3MzQ1Ng==", "bodyText": "Now explained in prev para. Suggest leaving as\nIf you want to run jobs, there must be at least one {ml} node in your cluster.", "url": "https://github.com/elastic/elasticsearch/pull/61018#discussion_r469173456", "createdAt": "2020-08-12T10:52:26Z", "author": {"login": "sophiec20"}, "path": "docs/reference/settings/ml-settings.asciidoc", "diffHunk": "@@ -28,17 +28,19 @@ file.\n [[general-ml-settings]]\n ==== General machine learning settings\n \n-`node.ml`::\n-deprecated:[7.9.0,\"Use <<modules-node,node.roles>> instead.\"]\n-Set to `true` (default) to identify the node as a _machine learning node_. +\n+`node.roles: [ ml ]`::\n+Set `node.roles` to contain `ml` to identify the node as a _{ml} node_. +\n +\n-If set to `false` in `elasticsearch.yml`, the node cannot run jobs. If set to\n-`true` but `xpack.ml.enabled` is set to `false`, the `node.ml` setting is\n-ignored and the node cannot run jobs. If you want to run jobs, there must be at\n-least one machine learning node in your cluster. +\n+If a node does not have the `ml` role in `elasticsearch.yml`, or it has the role \n+but `xpack.ml.enabled` is set to `false`, the node cannot run jobs. If you want \n+to run jobs, there must be at least one {ml} node in your cluster. +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7697a5b9daa72eef1b482dfb8f232b6d217e48f3"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTE3NDIxOA==", "bodyText": "Suggest append ... to enable ML APIs on the node.", "url": "https://github.com/elastic/elasticsearch/pull/61018#discussion_r469174218", "createdAt": "2020-08-12T10:53:59Z", "author": {"login": "sophiec20"}, "path": "docs/reference/settings/ml-settings.asciidoc", "diffHunk": "@@ -28,17 +28,19 @@ file.\n [[general-ml-settings]]\n ==== General machine learning settings\n \n-`node.ml`::\n-deprecated:[7.9.0,\"Use <<modules-node,node.roles>> instead.\"]\n-Set to `true` (default) to identify the node as a _machine learning node_. +\n+`node.roles: [ ml ]`::\n+Set `node.roles` to contain `ml` to identify the node as a _{ml} node_. +\n +\n-If set to `false` in `elasticsearch.yml`, the node cannot run jobs. If set to\n-`true` but `xpack.ml.enabled` is set to `false`, the `node.ml` setting is\n-ignored and the node cannot run jobs. If you want to run jobs, there must be at\n-least one machine learning node in your cluster. +\n+If a node does not have the `ml` role in `elasticsearch.yml`, or it has the role \n+but `xpack.ml.enabled` is set to `false`, the node cannot run jobs. If you want \n+to run jobs, there must be at least one {ml} node in your cluster. +\n +\n-IMPORTANT: On dedicated coordinating nodes or dedicated master nodes, disable\n-the `node.ml` role.\n+IMPORTANT: On dedicated coordinating nodes or dedicated master nodes, do not set\n+the `ml` role.\n++\n+The `ml.node` setting is deprecated in the 7.9.0 version, use this setting \n+instead.\n+\n \n `xpack.ml.enabled`::\n Set to `true` (default) to enable {ml} on the node.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7697a5b9daa72eef1b482dfb8f232b6d217e48f3"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9354db0fd88b7ad9c0e301d4d4e2c91ee5f596d1", "author": {"user": {"login": "szabosteve", "name": "Istv\u00e1n Zolt\u00e1n Szab\u00f3"}}, "url": "https://github.com/elastic/elasticsearch/commit/9354db0fd88b7ad9c0e301d4d4e2c91ee5f596d1", "committedDate": "2020-08-12T12:25:34Z", "message": "[DOCS] Adds more info."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6fff49ac704075f26e8ea5d01b35df7b0cb6e01", "author": {"user": {"login": "szabosteve", "name": "Istv\u00e1n Zolt\u00e1n Szab\u00f3"}}, "url": "https://github.com/elastic/elasticsearch/commit/d6fff49ac704075f26e8ea5d01b35df7b0cb6e01", "committedDate": "2020-08-17T14:28:08Z", "message": "[DOCS] Shortens explanatory text."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1c8ea10cad9cc8c190f401afc936e96b541d071", "author": {"user": {"login": "szabosteve", "name": "Istv\u00e1n Zolt\u00e1n Szab\u00f3"}}, "url": "https://github.com/elastic/elasticsearch/commit/d1c8ea10cad9cc8c190f401afc936e96b541d071", "committedDate": "2020-08-18T09:22:19Z", "message": "Merge branch '7.9' into 7.9.fix.ml.node"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3253, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}