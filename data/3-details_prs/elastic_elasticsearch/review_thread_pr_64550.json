{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0OTE1ODgw", "number": 64550, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxMzoxMDo0OVrOE2FIGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxMzoxMDo0OVrOE2FIGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI1MTQyNTUyOnYy", "diffSide": "RIGHT", "path": "docs/reference/migration/migrate_7_0/api.asciidoc", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxMzoxMDo0OVrOHutcEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxMzoxNToxMFrOHutk4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc0MTAxMQ==", "bodyText": "nit: I wonder if it was a bit clearer what to look for if the response stated that the index was created in a 5.x version?", "url": "https://github.com/elastic/elasticsearch/pull/64550#discussion_r518741011", "createdAt": "2020-11-06T13:10:49Z", "author": {"login": "henningandersen"}, "path": "docs/reference/migration/migrate_7_0/api.asciidoc", "diffHunk": "@@ -22,9 +22,76 @@ while handling a write operation, it may expose a version that will then be reus\n new primary.\n \n Due to that issue, internal versioning can no longer be used and is replaced by a new\n-method based on sequence numbers. See <<optimistic-concurrency-control>> for more details.\n-\n-Note that the `external` versioning type is still fully supported.\n+method based on <<optimistic-concurrency-control,sequence numbers>>. To switch\n+to the new method, follow these steps:\n+\n+. Perform a <<rolling-upgrades,rolling upgrade>> to 6.8.\n+\n+. <<reindex-upgrade,Reindex>> any indices created before 6.0. This ensures\n+documents in those indices have sequence numbers.\n++\n+To get the {es} version in which an index was created, use the\n+<<indices-get-index,get index API>> with the `human` parameter:\n++\n+--\n+.*API Example*\n+[%collapsible]\n+====\n+[source,console]\n+----\n+GET /*?human\n+----\n+// TEST[setup:my_index]\n+\n+The response returns a `settings.index.version.created_string` property for\n+each index:\n+\n+[source,console-response]\n+----\n+{\n+  \"my-index-000001\": {\n+    ...\n+    \"settings\": {\n+      \"index\": {\n+        \"creation_date_string\": \"2099-01-01T00:00:00.000Z\",\n+        \"routing\": {\n+          \"allocation\": {\n+            \"include\": {\n+              \"_tier_preference\": \"data_content\"\n+            }\n+          }\n+        },\n+        \"number_of_shards\": \"1\",\n+        \"provided_name\": \"my-index-000001\",\n+        \"creation_date\": \"4070908800\",\n+        \"number_of_replicas\": \"1\",\n+        \"uuid\": \"c89-MHh8RwKwS1r7Turg2g\",\n+        \"version\": {\n+          \"created_string\": \"6.0.0\",           <1>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb0d7bfd03090c73915108852c81d16730f02cd1"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc0MzI2NA==", "bodyText": ":doh: Yes. That would be much clearer. I'll get that fixed up. Thanks for catching that @henningandersen.", "url": "https://github.com/elastic/elasticsearch/pull/64550#discussion_r518743264", "createdAt": "2020-11-06T13:15:10Z", "author": {"login": "jrodewig"}, "path": "docs/reference/migration/migrate_7_0/api.asciidoc", "diffHunk": "@@ -22,9 +22,76 @@ while handling a write operation, it may expose a version that will then be reus\n new primary.\n \n Due to that issue, internal versioning can no longer be used and is replaced by a new\n-method based on sequence numbers. See <<optimistic-concurrency-control>> for more details.\n-\n-Note that the `external` versioning type is still fully supported.\n+method based on <<optimistic-concurrency-control,sequence numbers>>. To switch\n+to the new method, follow these steps:\n+\n+. Perform a <<rolling-upgrades,rolling upgrade>> to 6.8.\n+\n+. <<reindex-upgrade,Reindex>> any indices created before 6.0. This ensures\n+documents in those indices have sequence numbers.\n++\n+To get the {es} version in which an index was created, use the\n+<<indices-get-index,get index API>> with the `human` parameter:\n++\n+--\n+.*API Example*\n+[%collapsible]\n+====\n+[source,console]\n+----\n+GET /*?human\n+----\n+// TEST[setup:my_index]\n+\n+The response returns a `settings.index.version.created_string` property for\n+each index:\n+\n+[source,console-response]\n+----\n+{\n+  \"my-index-000001\": {\n+    ...\n+    \"settings\": {\n+      \"index\": {\n+        \"creation_date_string\": \"2099-01-01T00:00:00.000Z\",\n+        \"routing\": {\n+          \"allocation\": {\n+            \"include\": {\n+              \"_tier_preference\": \"data_content\"\n+            }\n+          }\n+        },\n+        \"number_of_shards\": \"1\",\n+        \"provided_name\": \"my-index-000001\",\n+        \"creation_date\": \"4070908800\",\n+        \"number_of_replicas\": \"1\",\n+        \"uuid\": \"c89-MHh8RwKwS1r7Turg2g\",\n+        \"version\": {\n+          \"created_string\": \"6.0.0\",           <1>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODc0MTAxMQ=="}, "originalCommit": {"oid": "bb0d7bfd03090c73915108852c81d16730f02cd1"}, "originalPosition": 52}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4057, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}