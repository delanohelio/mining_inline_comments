{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzNzc5MDkz", "number": 56253, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQyMzozMTo1NFrOD5ni_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwODozNTo0NFrOD5uFyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxNzQzMzU3OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/index/reindex/ReindexRequest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQyMzozMTo1NFrOGQ_VNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNjowNjoxNFrOGRaX4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDQ2ODAyMQ==", "bodyText": "I think this is going to have to be 8.0.0 until this gets backported", "url": "https://github.com/elastic/elasticsearch/pull/56253#discussion_r420468021", "createdAt": "2020-05-05T23:31:54Z", "author": {"login": "dakrone"}, "path": "server/src/main/java/org/elasticsearch/index/reindex/ReindexRequest.java", "diffHunk": "@@ -86,6 +91,9 @@ public ReindexRequest(StreamInput in) throws IOException {\n         super(in);\n         destination = new IndexRequest(in);\n         remoteInfo = in.readOptionalWriteable(RemoteInfo::new);\n+        if (in.getVersion().onOrAfter(Version.V_7_8_0)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44009a13cebc19618b8b6d2944d909a4b0f28158"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDkxMTA3NA==", "bodyText": "Yep, you're right, changed it and will follow up after backport", "url": "https://github.com/elastic/elasticsearch/pull/56253#discussion_r420911074", "createdAt": "2020-05-06T16:06:14Z", "author": {"login": "probakowski"}, "path": "server/src/main/java/org/elasticsearch/index/reindex/ReindexRequest.java", "diffHunk": "@@ -86,6 +91,9 @@ public ReindexRequest(StreamInput in) throws IOException {\n         super(in);\n         destination = new IndexRequest(in);\n         remoteInfo = in.readOptionalWriteable(RemoteInfo::new);\n+        if (in.getVersion().onOrAfter(Version.V_7_8_0)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDQ2ODAyMQ=="}, "originalCommit": {"oid": "44009a13cebc19618b8b6d2944d909a4b0f28158"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxNzQzNDY4OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/index/reindex/ReindexRequest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQyMzozMjoyNFrOGQ_V1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNjowNjoyNFrOGRaYYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDQ2ODE4Mg==", "bodyText": "Same comment here about this having to be 8.0.0 until backport (or else the BWC tests will likely fail)", "url": "https://github.com/elastic/elasticsearch/pull/56253#discussion_r420468182", "createdAt": "2020-05-05T23:32:24Z", "author": {"login": "dakrone"}, "path": "server/src/main/java/org/elasticsearch/index/reindex/ReindexRequest.java", "diffHunk": "@@ -262,6 +280,9 @@ public void writeTo(StreamOutput out) throws IOException {\n         super.writeTo(out);\n         destination.writeTo(out);\n         out.writeOptionalWriteable(remoteInfo);\n+        if (out.getVersion().onOrAfter(Version.V_7_8_0)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44009a13cebc19618b8b6d2944d909a4b0f28158"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDkxMTIwMQ==", "bodyText": "Yep, you're right, changed it and will follow up after backport", "url": "https://github.com/elastic/elasticsearch/pull/56253#discussion_r420911201", "createdAt": "2020-05-06T16:06:24Z", "author": {"login": "probakowski"}, "path": "server/src/main/java/org/elasticsearch/index/reindex/ReindexRequest.java", "diffHunk": "@@ -262,6 +280,9 @@ public void writeTo(StreamOutput out) throws IOException {\n         super.writeTo(out);\n         destination.writeTo(out);\n         out.writeOptionalWriteable(remoteInfo);\n+        if (out.getVersion().onOrAfter(Version.V_7_8_0)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDQ2ODE4Mg=="}, "originalCommit": {"oid": "44009a13cebc19618b8b6d2944d909a4b0f28158"}, "originalPosition": 54}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxODUwNTcxOnYy", "diffSide": "RIGHT", "path": "modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestReindexAction.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwODozNTo0NFrOGRJH6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNjowOToyMFrOGRagUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDYyODQ1Ng==", "bodyText": "for 8.0 we want this to default to true if it's not specified by the user (this is just a reminder to change this after backport)", "url": "https://github.com/elastic/elasticsearch/pull/56253#discussion_r420628456", "createdAt": "2020-05-06T08:35:44Z", "author": {"login": "andreidan"}, "path": "modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestReindexAction.java", "diffHunk": "@@ -68,6 +68,11 @@ protected ReindexRequest buildRequest(RestRequest request) throws IOException {\n         if (request.hasParam(\"scroll\")) {\n             internal.setScroll(parseTimeValue(request.param(\"scroll\"), \"scroll\"));\n         }\n+\n+        if (request.hasParam(\"prefer_v2_templates\")) {\n+            internal.preferV2Templates(Boolean.parseBoolean(request.param(\"prefer_v2_templates\")));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44009a13cebc19618b8b6d2944d909a4b0f28158"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDkxMzIzNQ==", "bodyText": "I wonder if we should change it here or simply pass null down the road and let create index request pick up correct default (for making it DRY and using only single place to set defaults)", "url": "https://github.com/elastic/elasticsearch/pull/56253#discussion_r420913235", "createdAt": "2020-05-06T16:09:20Z", "author": {"login": "probakowski"}, "path": "modules/reindex/src/main/java/org/elasticsearch/index/reindex/RestReindexAction.java", "diffHunk": "@@ -68,6 +68,11 @@ protected ReindexRequest buildRequest(RestRequest request) throws IOException {\n         if (request.hasParam(\"scroll\")) {\n             internal.setScroll(parseTimeValue(request.param(\"scroll\"), \"scroll\"));\n         }\n+\n+        if (request.hasParam(\"prefer_v2_templates\")) {\n+            internal.preferV2Templates(Boolean.parseBoolean(request.param(\"prefer_v2_templates\")));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDYyODQ1Ng=="}, "originalCommit": {"oid": "44009a13cebc19618b8b6d2944d909a4b0f28158"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2408, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}