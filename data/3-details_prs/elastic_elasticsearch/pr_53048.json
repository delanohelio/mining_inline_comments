{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgyOTAzMzQ5", "number": 53048, "title": "SQL: [Tests] Add tests for optimization of aliased expressions", "bodyText": "Add a unit test to verify that the optimization of expression\n(e.g. COALESCE) is applied to all instances of the expression:\nSELECT, WHERE, GROUP BY and HAVING.\nRelates to #35270", "createdAt": "2020-03-03T11:44:02Z", "url": "https://github.com/elastic/elasticsearch/pull/53048", "merged": true, "mergeCommit": {"oid": "2ceedc7f2019fad92cd86679af1a9c6fa594aa8d"}, "closed": true, "closedAt": "2020-03-04T10:47:24Z", "author": {"login": "matriv"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKAw-SgH2gAyMzgyOTAzMzQ5OjM4MzBjOGIxNmEzZWZjMDQyNWVhZGI5NzhmN2M3NzViZjliNmRiMDM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKEKXYAFqTM2ODA4MzM0NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3830c8b16a3efc0425eadb978f7c775bf9b6db03", "author": {"user": {"login": "matriv", "name": "Marios Trivyzas"}}, "url": "https://github.com/elastic/elasticsearch/commit/3830c8b16a3efc0425eadb978f7c775bf9b6db03", "committedDate": "2020-03-03T11:38:49Z", "message": "SQL: [Tests] Add tests for optimization of aliased expressions\n\nAdd a unit test to verify that the optimization of expression\n(e.g. COALESCE) is applied to all instances of the expression:\nSELECT, WHERE, GROUP BY.\n\nRelates to #35270"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "487cc23c5bcd2963847ced09b39a93787153872e", "author": {"user": {"login": "matriv", "name": "Marios Trivyzas"}}, "url": "https://github.com/elastic/elasticsearch/commit/487cc23c5bcd2963847ced09b39a93787153872e", "committedDate": "2020-03-03T12:50:26Z", "message": "test also having optimization"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3OTYyNDUz", "url": "https://github.com/elastic/elasticsearch/pull/53048#pullrequestreview-367962453", "createdAt": "2020-03-03T13:09:12Z", "commit": {"oid": "487cc23c5bcd2963847ced09b39a93787153872e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxMzowOToxMlrOFxFCog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxMzowOToxMlrOFxFCog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzAwNzEzOA==", "bodyText": "Aggs does not expose its internal state - I would use instead the asAggBuilder() and its string to do the test matching.", "url": "https://github.com/elastic/elasticsearch/pull/53048#discussion_r387007138", "createdAt": "2020-03-03T13:09:12Z", "author": {"login": "costin"}, "path": "x-pack/plugin/sql/src/main/java/org/elasticsearch/xpack/sql/querydsl/agg/Aggs.java", "diffHunk": "@@ -70,6 +70,11 @@ public Aggs(List<GroupByKey> groups, List<LeafAgg> simpleAggs, List<PipelineAgg>\n         return groups;\n     }\n \n+    // For testing\n+    public List<PipelineAgg> pipelineAggs() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "487cc23c5bcd2963847ced09b39a93787153872e"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "966b699c778d57b21b08335941348c3e08c5a22e", "author": {"user": {"login": "matriv", "name": "Marios Trivyzas"}}, "url": "https://github.com/elastic/elasticsearch/commit/966b699c778d57b21b08335941348c3e08c5a22e", "committedDate": "2020-03-03T14:12:33Z", "message": "Address comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4MDgzMzQ1", "url": "https://github.com/elastic/elasticsearch/pull/53048#pullrequestreview-368083345", "createdAt": "2020-03-03T15:36:16Z", "commit": {"oid": "966b699c778d57b21b08335941348c3e08c5a22e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1935, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}