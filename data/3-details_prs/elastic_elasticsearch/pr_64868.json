{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4NTE2NjEw", "number": 64868, "title": "Remove the deprecated local parameter for _cat/indices", "bodyText": "The cat indices API performs several actions including an IndicesStatsAction. Today it accepts the ?local parameter and passes it to the actions that support it but this parameter has no effect on the IndicesStatsAction. This can be surprising because GET _cat/indices?local looks like it might be a completely local call but in fact it still depends on every node in the cluster.\nThe local parameter was deprecated in 7.x (#62198) and this commit removes it for 8.x.", "createdAt": "2020-11-10T14:11:48Z", "url": "https://github.com/elastic/elasticsearch/pull/64868", "merged": true, "mergeCommit": {"oid": "923b2b90c5d06ae1a1e26211a1ded65750d2ee58"}, "closed": true, "closedAt": "2020-11-16T13:53:17Z", "author": {"login": "danhermann"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbJ8-MAH2gAyNTE4NTE2NjEwOmM1NmYyNDZlYjE0MTY0ZDI2MzBhNjY3MTMzNmMxMDMyNGQyZDE5MzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdcO4q0gH2gAyNTE4NTE2NjEwOjM5MTk0NmQ0N2Y0NWQ3ZWZiNzk3OTE4Nzk5NjJlMmYzNjBmYzExMjE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c56f246eb14164d2630a6671336c10324d2d1931", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/c56f246eb14164d2630a6671336c10324d2d1931", "committedDate": "2020-11-10T14:08:56Z", "message": "Remove the deprecated local parameter for _cat/indices"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3MzkyNjk2", "url": "https://github.com/elastic/elasticsearch/pull/64868#pullrequestreview-527392696", "createdAt": "2020-11-10T16:38:42Z", "commit": {"oid": "c56f246eb14164d2630a6671336c10324d2d1931"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxNjozODo0MlrOHwlV0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxNjozODo0MlrOHwlV0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDcwNTQ5MA==", "bodyText": "This is unnecessary, as mentioned in #64867 (comment)", "url": "https://github.com/elastic/elasticsearch/pull/64868#discussion_r520705490", "createdAt": "2020-11-10T16:38:42Z", "author": {"login": "dakrone"}, "path": "server/src/main/java/org/elasticsearch/rest/action/cat/RestIndicesAction.java", "diffHunk": "@@ -99,10 +97,10 @@ protected void documentation(StringBuilder sb) {\n     public RestChannelConsumer doCatRequest(final RestRequest request, final NodeClient client) {\n         final String[] indices = Strings.splitStringByCommaToArray(request.param(\"index\"));\n         final IndicesOptions indicesOptions = IndicesOptions.fromRequest(request, IndicesOptions.strictExpand());\n-        if (request.hasParam(\"local\")) {\n-            DEPRECATION_LOGGER.deprecate(\"local\", LOCAL_DEPRECATED_MESSAGE);\n+        // needed only in v8 to catch breaking usages and may be removed in v9\n+        if (request.hasParam(\"local\")  && Version.CURRENT.major == Version.V_7_0_0.major + 1) {\n+            throw new IllegalArgumentException(\"parameter [local] is not supported\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c56f246eb14164d2630a6671336c10324d2d1931"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac537b84b50df519f21bd121d361be61da994266", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/ac537b84b50df519f21bd121d361be61da994266", "committedDate": "2020-11-11T17:03:22Z", "message": "remove redundant check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c0ddb8af7fc0bd74dc60616946bc877012ac4f3", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/1c0ddb8af7fc0bd74dc60616946bc877012ac4f3", "committedDate": "2020-11-11T17:24:41Z", "message": "Merge branch 'master' into remove_local_for_cat_indices"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4NDI2MDMz", "url": "https://github.com/elastic/elasticsearch/pull/64868#pullrequestreview-528426033", "createdAt": "2020-11-11T18:21:37Z", "commit": {"oid": "1c0ddb8af7fc0bd74dc60616946bc877012ac4f3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6d40ad7e5b87f21770d55ca4d14366b1a817a6a", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/d6d40ad7e5b87f21770d55ca4d14366b1a817a6a", "committedDate": "2020-11-13T13:39:09Z", "message": "Merge branch 'master' into remove_local_for_cat_indices"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5ab892de9d87dbcc9b057dc9cbafb6f6c987499", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/b5ab892de9d87dbcc9b057dc9cbafb6f6c987499", "committedDate": "2020-11-13T13:40:45Z", "message": "Merge branch 'master' into remove_local_for_cat_indices"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "391946d47f45d7efb79791879962e2f360fc1121", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/391946d47f45d7efb79791879962e2f360fc1121", "committedDate": "2020-11-13T22:27:41Z", "message": "Merge branch 'master' into remove_local_for_cat_indices"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1145, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}