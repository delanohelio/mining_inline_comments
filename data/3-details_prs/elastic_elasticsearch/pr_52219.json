{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczNzM5MDY4", "number": 52219, "title": "Wire up Max & Min aggregations", "bodyText": "These two share a constructor signature, so they can share an aggregator supplier.  Given that, it made sense to do them both in one PR.", "createdAt": "2020-02-11T15:58:09Z", "url": "https://github.com/elastic/elasticsearch/pull/52219", "merged": true, "mergeCommit": {"oid": "8fbff7332b9070f68a79e8e879bf304237b36e4b"}, "closed": true, "closedAt": "2020-02-24T20:51:03Z", "author": {"login": "not-napoleon"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDThamgH2gAyMzczNzM5MDY4OjU3MGVmY2Q5YWNiMDhlZDdhMWI5ZWY5M2E1YWZkZWE1YjU0YTY0NDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcHhHqFgH2gAyMzczNzM5MDY4OmEzMzE5OTVlNDA3NjE5MmZjZGUwNDgyNmU0MGQ4MjU1ODI3YmRmZTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "570efcd9acb08ed7a1b9ef93a5afdea5b54a6449", "author": {"user": {"login": "not-napoleon", "name": "Mark Tozzi"}}, "url": "https://github.com/elastic/elasticsearch/commit/570efcd9acb08ed7a1b9ef93a5afdea5b54a6449", "committedDate": "2020-02-11T15:32:33Z", "message": "Wire up max aggregator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5ed20b913d01231ee3624383d9bda80a0f9112b", "author": {"user": {"login": "not-napoleon", "name": "Mark Tozzi"}}, "url": "https://github.com/elastic/elasticsearch/commit/b5ed20b913d01231ee3624383d9bda80a0f9112b", "committedDate": "2020-02-11T15:56:12Z", "message": "Wire up min aggregation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79c0439246829f45453a5a999dec2ed67f5e7bab", "author": {"user": {"login": "not-napoleon", "name": "Mark Tozzi"}}, "url": "https://github.com/elastic/elasticsearch/commit/79c0439246829f45453a5a999dec2ed67f5e7bab", "committedDate": "2020-02-11T15:59:20Z", "message": "Rename for clarity"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42d08e485d7beba46d25203a823135ce44eccc80", "author": {"user": {"login": "not-napoleon", "name": "Mark Tozzi"}}, "url": "https://github.com/elastic/elasticsearch/commit/42d08e485d7beba46d25203a823135ce44eccc80", "committedDate": "2020-02-12T14:39:05Z", "message": "Merge branch 'feature/extensible-values-source' into vs-refactor-wire-up-max"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxMzcwMTA4", "url": "https://github.com/elastic/elasticsearch/pull/52219#pullrequestreview-361370108", "createdAt": "2020-02-19T19:22:53Z", "commit": {"oid": "42d08e485d7beba46d25203a823135ce44eccc80"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxOToyMjo1M1rOFr0bGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxOToyNDoxOVrOFr0eYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ5MTk5NQ==", "bodyText": "Should we put these on the next line?  We should probably come up with an overall formatting for these anyhow, I think they are all over the place depending on the agg and the PR :)", "url": "https://github.com/elastic/elasticsearch/pull/52219#discussion_r381491995", "createdAt": "2020-02-19T19:22:53Z", "author": {"login": "polyfractal"}, "path": "server/src/main/java/org/elasticsearch/search/SearchModule.java", "diffHunk": "@@ -343,9 +343,9 @@ private void registerAggregations(List<SearchPlugin> plugins) {\n         registerAggregation(new AggregationSpec(SumAggregationBuilder.NAME, SumAggregationBuilder::new, SumAggregationBuilder::parse)\n                 .addResultReader(InternalSum::new));\n         registerAggregation(new AggregationSpec(MinAggregationBuilder.NAME, MinAggregationBuilder::new, MinAggregationBuilder::parse)\n-                .addResultReader(InternalMin::new));\n+                .addResultReader(InternalMin::new).setAggregatorRegistrar(MinAggregationBuilder::registerAggregators));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42d08e485d7beba46d25203a823135ce44eccc80"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ5MjU0NA==", "bodyText": "Hmm, I wonder if IP should be on this list?  I don't actually know if it works with IP or not, but since NUMERIC == IP in master I suspect it does", "url": "https://github.com/elastic/elasticsearch/pull/52219#discussion_r381492544", "createdAt": "2020-02-19T19:23:49Z", "author": {"login": "polyfractal"}, "path": "server/src/main/java/org/elasticsearch/search/aggregations/metrics/MaxAggregatorFactory.java", "diffHunk": "@@ -37,6 +40,23 @@\n \n class MaxAggregatorFactory extends ValuesSourceAggregatorFactory {\n \n+    static void registerAggregators(ValuesSourceRegistry valuesSourceRegistry) {\n+        valuesSourceRegistry.register(MaxAggregationBuilder.NAME,\n+            List.of(CoreValuesSourceType.NUMERIC, CoreValuesSourceType.DATE, CoreValuesSourceType.BOOLEAN),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42d08e485d7beba46d25203a823135ce44eccc80"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ5MjgzMw==", "bodyText": "Ditto question about IP", "url": "https://github.com/elastic/elasticsearch/pull/52219#discussion_r381492833", "createdAt": "2020-02-19T19:24:19Z", "author": {"login": "polyfractal"}, "path": "server/src/main/java/org/elasticsearch/search/aggregations/metrics/MinAggregatorFactory.java", "diffHunk": "@@ -37,6 +40,23 @@\n \n class MinAggregatorFactory extends ValuesSourceAggregatorFactory {\n \n+    static void registerAggregators(ValuesSourceRegistry valuesSourceRegistry) {\n+        valuesSourceRegistry.register(MinAggregationBuilder.NAME,\n+            List.of(CoreValuesSourceType.NUMERIC, CoreValuesSourceType.DATE, CoreValuesSourceType.BOOLEAN),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42d08e485d7beba46d25203a823135ce44eccc80"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "205a5653fd624e9d2a6a1aaded49107118a4af34", "author": {"user": {"login": "not-napoleon", "name": "Mark Tozzi"}}, "url": "https://github.com/elastic/elasticsearch/commit/205a5653fd624e9d2a6a1aaded49107118a4af34", "committedDate": "2020-02-19T21:08:05Z", "message": "added a test for min aggregation over IPs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ca64d2906c9735d0afa3492b3486cba28c0933f", "author": {"user": {"login": "not-napoleon", "name": "Mark Tozzi"}}, "url": "https://github.com/elastic/elasticsearch/commit/5ca64d2906c9735d0afa3492b3486cba28c0933f", "committedDate": "2020-02-19T21:08:15Z", "message": "Merge branch 'feature/extensible-values-source' into vs-refactor-wire-up-max"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c278bda9f8371a9ca1daa12b0735583601ee503", "author": {"user": {"login": "not-napoleon", "name": "Mark Tozzi"}}, "url": "https://github.com/elastic/elasticsearch/commit/2c278bda9f8371a9ca1daa12b0735583601ee503", "committedDate": "2020-02-19T21:12:24Z", "message": "clean up indentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e69444418a61826014802b461865d6e66e5f855", "author": {"user": {"login": "not-napoleon", "name": "Mark Tozzi"}}, "url": "https://github.com/elastic/elasticsearch/commit/4e69444418a61826014802b461865d6e66e5f855", "committedDate": "2020-02-24T17:14:53Z", "message": "Merge branch 'feature/extensible-values-source' into vs-refactor-wire-up-max\n\n Conflicts:\n\tserver/src/test/java/org/elasticsearch/search/aggregations/bucket/range/IpRangeAggregatorTests.java\n\ttest/framework/src/main/java/org/elasticsearch/search/aggregations/AggregatorTestCase.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a331995e4076192fcde04826e40d8255827bdfe9", "author": {"user": {"login": "not-napoleon", "name": "Mark Tozzi"}}, "url": "https://github.com/elastic/elasticsearch/commit/a331995e4076192fcde04826e40d8255827bdfe9", "committedDate": "2020-02-24T17:38:47Z", "message": "remove unused imports"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2572, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}