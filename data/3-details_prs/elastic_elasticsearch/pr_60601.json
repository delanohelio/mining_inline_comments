{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyMTkxNDU1", "number": 60601, "title": "Deprecate allow_no_jobs and allow_no_datafeeds in favor of allow_no_match", "bodyText": "This PR deprecates allow_no_jobs and allow_no_datafeeds API parameters in favor of allow_no_match.\nThe old parameters are still accepted by the APIs but the deprecation warning is emitted if the old parameter name is used in the request body or as a request param.\nHigh-level REST client classes will now send the new allow_no_match parameter to the backend.\nCloses #60642", "createdAt": "2020-08-03T13:52:50Z", "url": "https://github.com/elastic/elasticsearch/pull/60601", "merged": true, "mergeCommit": {"oid": "29ee3a05b6ac14f5c8dcbcd52a67acbf61130c24"}, "closed": true, "closedAt": "2020-08-05T10:29:08Z", "author": {"login": "przemekwitek"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc7jNd2ABqjM2MTkzODQxMTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc74AQvgBqjM2MjM4Nzg2NzU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3c68b7edeb61f4ca80a1882576e26f8f4b14d482", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/3c68b7edeb61f4ca80a1882576e26f8f4b14d482", "committedDate": "2020-08-03T13:50:38Z", "message": "Rename allow_no_jobs to allow_no_match and allow_no_datafeeds to allow_no_match"}, "afterCommit": {"oid": "37983fa5e23aba3216e777f70c6d203ce5a7c52d", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/37983fa5e23aba3216e777f70c6d203ce5a7c52d", "committedDate": "2020-08-04T09:28:36Z", "message": "Deprecate allow_no_jobs and allow_no_datafeeds in favor of allow_no_match"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "37983fa5e23aba3216e777f70c6d203ce5a7c52d", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/37983fa5e23aba3216e777f70c6d203ce5a7c52d", "committedDate": "2020-08-04T09:28:36Z", "message": "Deprecate allow_no_jobs and allow_no_datafeeds in favor of allow_no_match"}, "afterCommit": {"oid": "c3bd05bb631164fe6c48bb5baa6971567731e102", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/c3bd05bb631164fe6c48bb5baa6971567731e102", "committedDate": "2020-08-04T09:59:41Z", "message": "Deprecate allow_no_jobs and allow_no_datafeeds in favor of allow_no_match"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwNzM5MTE3", "url": "https://github.com/elastic/elasticsearch/pull/60601#pullrequestreview-460739117", "createdAt": "2020-08-04T11:50:05Z", "commit": {"oid": "c3bd05bb631164fe6c48bb5baa6971567731e102"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxMTo1MDowNVrOG7c6JA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxMTo1NTowMFrOG7dFXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk5MjgwNA==", "bodyText": "Is there a \"deprecation\" field or something for these parameters? Clients generate their code from these specs and we probably don't want them generating with this parameter as an option.", "url": "https://github.com/elastic/elasticsearch/pull/60601#discussion_r464992804", "createdAt": "2020-08-04T11:50:05Z", "author": {"login": "benwtrent"}, "path": "x-pack/plugin/src/test/resources/rest-api-spec/api/ml.stop_datafeed.json", "diffHunk": "@@ -22,6 +22,11 @@\n       ]\n     },\n     \"params\":{\n+      \"allow_no_match\":{\n+        \"type\":\"boolean\",\n+        \"required\":false,\n+        \"description\":\"Whether to ignore if a wildcard expression matches no datafeeds. (This includes `_all` string or when no datafeeds have been specified)\"\n+      },\n       \"allow_no_datafeeds\":{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3bd05bb631164fe6c48bb5baa6971567731e102"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk5Mjk4NQ==", "bodyText": "This comment goes for ALL the changed rest specs", "url": "https://github.com/elastic/elasticsearch/pull/60601#discussion_r464992985", "createdAt": "2020-08-04T11:50:26Z", "author": {"login": "benwtrent"}, "path": "x-pack/plugin/src/test/resources/rest-api-spec/api/ml.stop_datafeed.json", "diffHunk": "@@ -22,6 +22,11 @@\n       ]\n     },\n     \"params\":{\n+      \"allow_no_match\":{\n+        \"type\":\"boolean\",\n+        \"required\":false,\n+        \"description\":\"Whether to ignore if a wildcard expression matches no datafeeds. (This includes `_all` string or when no datafeeds have been specified)\"\n+      },\n       \"allow_no_datafeeds\":{", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk5MjgwNA=="}, "originalCommit": {"oid": "c3bd05bb631164fe6c48bb5baa6971567731e102"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk5NTY3OA==", "bodyText": "it seems to me that the default way to use these parameters via an API is through the request parameter (not in the body).\nDoes this add a deprecation warning if the user provides allow_no_jobs as a URL param?", "url": "https://github.com/elastic/elasticsearch/pull/60601#discussion_r464995678", "createdAt": "2020-08-04T11:55:00Z", "author": {"login": "benwtrent"}, "path": "x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/results/RestGetOverallBucketsAction.java", "diffHunk": "@@ -59,7 +59,10 @@ protected RestChannelConsumer prepareRequest(RestRequest restRequest, NodeClient\n             if (restRequest.hasParam(Request.END.getPreferredName())) {\n                 request.setEnd(restRequest.param(Request.END.getPreferredName()));\n             }\n-            request.setAllowNoJobs(restRequest.paramAsBoolean(Request.ALLOW_NO_JOBS.getPreferredName(), request.allowNoJobs()));\n+            request.setAllowNoMatch(\n+                restRequest.paramAsBoolean(\n+                    Request.ALLOW_NO_MATCH.getPreferredName(),\n+                    restRequest.paramAsBoolean(Request.ALLOW_NO_JOBS, request.allowNoMatch())));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3bd05bb631164fe6c48bb5baa6971567731e102"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwODMxNjg4", "url": "https://github.com/elastic/elasticsearch/pull/60601#pullrequestreview-460831688", "createdAt": "2020-08-04T13:51:46Z", "commit": {"oid": "010775ab09586d5a390a68e841a3053291a8de15"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxMjc5Njky", "url": "https://github.com/elastic/elasticsearch/pull/60601#pullrequestreview-461279692", "createdAt": "2020-08-05T01:28:35Z", "commit": {"oid": "010775ab09586d5a390a68e841a3053291a8de15"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0c7c5e096d56f172472ed982d826a5267b10ee6", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/e0c7c5e096d56f172472ed982d826a5267b10ee6", "committedDate": "2020-08-05T09:42:23Z", "message": "Deprecate allow_no_jobs and allow_no_datafeeds in favor of allow_no_match"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53dee5d2809227af4b8312eff234edcef8125b26", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/53dee5d2809227af4b8312eff234edcef8125b26", "committedDate": "2020-08-05T09:42:23Z", "message": "Apply review comment: remove deprecated parameters from json specs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b18fd61dd805edadc8450dcf7da7d2af7f5fc42", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/7b18fd61dd805edadc8450dcf7da7d2af7f5fc42", "committedDate": "2020-08-05T09:42:23Z", "message": "Apply review comment: Emit deprecation warnings for request params"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08aea5a28b684aa30f17f8ee736e84c421f2cb27", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/08aea5a28b684aa30f17f8ee736e84c421f2cb27", "committedDate": "2020-08-05T09:42:23Z", "message": "Restore deprecated params in .json files. Expect warnings in yml tests."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "441ca38d97030389927d7857b041bcb761bab064", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/441ca38d97030389927d7857b041bcb761bab064", "committedDate": "2020-08-05T08:59:55Z", "message": "Restore deprecated params in .json files. Expect warnings in yml tests."}, "afterCommit": {"oid": "08aea5a28b684aa30f17f8ee736e84c421f2cb27", "author": {"user": {"login": "przemekwitek", "name": "Przemys\u0142aw Witek"}}, "url": "https://github.com/elastic/elasticsearch/commit/08aea5a28b684aa30f17f8ee736e84c421f2cb27", "committedDate": "2020-08-05T09:42:23Z", "message": "Restore deprecated params in .json files. Expect warnings in yml tests."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3467, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}