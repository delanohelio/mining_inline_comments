{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyNDAyNzkw", "number": 52043, "title": "Allow _rollup_search with read privilege", "bodyText": "Currently _rollup_search requires manage privilege to access. It should really be a read only operation. This PR changes the requirement to be read indices privilege.\nResolves: #50245", "createdAt": "2020-02-07T13:06:51Z", "url": "https://github.com/elastic/elasticsearch/pull/52043", "merged": true, "mergeCommit": {"oid": "9a2a59b12c2156872ba909f72c3feea885d88a1d"}, "closed": true, "closedAt": "2020-03-03T10:02:19Z", "author": {"login": "ywangd"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcB-5ANgH2gAyMzcyNDAyNzkwOjI0YzJhOTFiYjNjZjI3ZjMyZmQ1ZDFjYTczZTc0NmQzYjBmY2U1ZmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcJ-P6rAH2gAyMzcyNDAyNzkwOjFiZGQzZjcyNTI1ZmU5Y2NjODQ0NWE2YzkyNTdlYWMyYjY2NzJkYzQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "24c2a91bb3cf27f32fd5d1ca73e746d3b0fce5fe", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/24c2a91bb3cf27f32fd5d1ca73e746d3b0fce5fe", "committedDate": "2020-02-07T12:56:23Z", "message": "Initial attempt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de3dc3bcda1d7861ec128bb91c39fd0ebd3156ec", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/de3dc3bcda1d7861ec128bb91c39fd0ebd3156ec", "committedDate": "2020-02-10T07:01:48Z", "message": "Fix broken IT tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73f77b69ddaa518f869662751ffcf4b09a5b8c03", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/73f77b69ddaa518f869662751ffcf4b09a5b8c03", "committedDate": "2020-02-10T10:06:43Z", "message": "Merge remote-tracking branch 'origin/master' into es-50245-rollup-search-permission"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64b2cab102b50101dd8ed6b66f7e4d6f34d36489", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/64b2cab102b50101dd8ed6b66f7e4d6f34d36489", "committedDate": "2020-02-11T01:24:39Z", "message": "Add unit test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2Mzc3MjEy", "url": "https://github.com/elastic/elasticsearch/pull/52043#pullrequestreview-356377212", "createdAt": "2020-02-11T01:26:37Z", "commit": {"oid": "64b2cab102b50101dd8ed6b66f7e4d6f34d36489"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQwMToyNjozN1rOFn7VOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQwMToyNjozN1rOFn7VOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQxMDg3NA==", "bodyText": "Please let me know if there is a better way for this unit test.", "url": "https://github.com/elastic/elasticsearch/pull/52043#discussion_r377410874", "createdAt": "2020-02-11T01:26:37Z", "author": {"login": "ywangd"}, "path": "x-pack/plugin/core/src/test/java/org/elasticsearch/xpack/core/rollup/action/RollupSearchActionTests.java", "diffHunk": "@@ -0,0 +1,20 @@\n+/*\n+ *\n+ *  * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n+ *  * or more contributor license agreements. Licensed under the Elastic License;\n+ *  * you may not use this file except in compliance with the Elastic License.\n+ *\n+ */\n+\n+package org.elasticsearch.xpack.core.rollup.action;\n+\n+import org.elasticsearch.test.ESTestCase;\n+import org.elasticsearch.xpack.core.security.authz.privilege.IndexPrivilege;\n+import org.elasticsearch.xpack.core.security.support.Automatons;\n+\n+public class RollupSearchActionTests extends ESTestCase {\n+\n+    public void testIndexReadPrivilegeCanPerformRollupSearchAction() {\n+        assertTrue(Automatons.predicate(IndexPrivilege.READ.getAutomaton()).test(RollupSearchAction.NAME));\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64b2cab102b50101dd8ed6b66f7e4d6f34d36489"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5eacbf7371a8691959766dc66a7d070b11adddc2", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/5eacbf7371a8691959766dc66a7d070b11adddc2", "committedDate": "2020-02-11T01:27:23Z", "message": "Revert accidental changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "794fdac50b5252c3cb73ab9c97c0466bb127ae72", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/794fdac50b5252c3cb73ab9c97c0466bb127ae72", "committedDate": "2020-02-11T02:14:30Z", "message": "Merge remote-tracking branch 'origin/master' into es-50245-rollup-search-permission"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3NzIyMDAy", "url": "https://github.com/elastic/elasticsearch/pull/52043#pullrequestreview-367722002", "createdAt": "2020-03-03T06:08:18Z", "commit": {"oid": "794fdac50b5252c3cb73ab9c97c0466bb127ae72"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1bdd3f72525fe9ccc8445a6c9257eac2b6672dc4", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/1bdd3f72525fe9ccc8445a6c9257eac2b6672dc4", "committedDate": "2020-03-03T08:42:54Z", "message": "Merge remote-tracking branch 'origin/master' into es-50245-rollup-search-permission"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2659, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}