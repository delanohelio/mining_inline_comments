{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQyMDg0ODIw", "number": 66554, "title": "Allow test-with-ssl-plugin to be used in FIPS", "bodyText": "Selectively use PEM files instead of keystores so that the plugin\ncan be applied to projects even if these would run in fips mode", "createdAt": "2020-12-17T19:42:49Z", "url": "https://github.com/elastic/elasticsearch/pull/66554", "merged": true, "mergeCommit": {"oid": "1c56c4049a721c5daf2f357d44d44e030869bc48"}, "closed": true, "closedAt": "2021-01-14T13:22:08Z", "author": {"login": "jkakavas"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdnI3fcAH2gAyNTQyMDg0ODIwOjY2NDFkMjNmNjA3YjI4MGVlZWRkNzMwNjFjZmU1ZWY3NWI2NmM5NmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdwBR1TgH2gAyNTQyMDg0ODIwOjU5OGEzYjNmZDU3MjM1NjA4YmMyNjg3N2E1M2U0YTRkYzllYWEwYWI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6641d23f607b280eeedd73061cfe5ef75b66c96d", "author": {"user": {"login": "jkakavas", "name": "Ioannis Kakavas"}}, "url": "https://github.com/elastic/elasticsearch/commit/6641d23f607b280eeedd73061cfe5ef75b66c96d", "committedDate": "2020-12-17T19:40:08Z", "message": "Allow test-with-ssl-plugin to be used in FIPS\n\nSelectively use PEM files instead of keystores so that the plugin\ncan be applied to projects even if these would run in fips mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8f8d54c9a39329fd3361e44258ee7990bc3bca8", "author": {"user": {"login": "jkakavas", "name": "Ioannis Kakavas"}}, "url": "https://github.com/elastic/elasticsearch/commit/c8f8d54c9a39329fd3361e44258ee7990bc3bca8", "committedDate": "2020-12-17T22:04:58Z", "message": "fix format"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51b1b3565354d49f9baacb8fac5347d3bb34145d", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/51b1b3565354d49f9baacb8fac5347d3bb34145d", "committedDate": "2020-12-18T07:33:13Z", "message": "Merge branch 'master' into test-with-ssl-plugin-fips"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3ODI4MDgw", "url": "https://github.com/elastic/elasticsearch/pull/66554#pullrequestreview-557828080", "createdAt": "2020-12-23T12:05:55Z", "commit": {"oid": "51b1b3565354d49f9baacb8fac5347d3bb34145d"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxMjowNTo1NlrOIKiyHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxMjoxNTozM1rOIKjAOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzkyNjU1Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            8. Export the client's private key\n          \n          \n            \n            8. Export the node's private key", "url": "https://github.com/elastic/elasticsearch/pull/66554#discussion_r547926557", "createdAt": "2020-12-23T12:05:56Z", "author": {"login": "ywangd"}, "path": "buildSrc/src/main/resources/test/ssl/README.md", "diffHunk": "@@ -18,3 +18,11 @@ The certificates are generated using catch-all SAN in the following procedure:\n    `keytool -export -alias test-client -keystore test-client.jks -storepass keypass -file test-client.crt`\n 6. Import the client certificate in the node's keystore:\n    `keytool -import -alias test-client -keystore test-node.jks -storepass keypass -file test-client.crt -noprompt`\n+7. Convert the node's keystore to PKCS#12 temporarily so that we can export the private key ( as keytool doesn't allow this)\n+   `keytool -importkeystore -srckeystore test-node.jks -srcstorepass keypass -destkeystore test-node.p12 -deststoretype PKCS12 -deststorepass keypass`\n+8. Export the client's private key", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51b1b3565354d49f9baacb8fac5347d3bb34145d"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzkyNjY3Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            9. Convert the node's keystore to PKCS#12 temporarily so that we can export the private key ( as keytool doesn't allow this)\n          \n          \n            \n            9. Convert the client's keystore to PKCS#12 temporarily so that we can export the private key ( as keytool doesn't allow this)", "url": "https://github.com/elastic/elasticsearch/pull/66554#discussion_r547926672", "createdAt": "2020-12-23T12:06:13Z", "author": {"login": "ywangd"}, "path": "buildSrc/src/main/resources/test/ssl/README.md", "diffHunk": "@@ -18,3 +18,11 @@ The certificates are generated using catch-all SAN in the following procedure:\n    `keytool -export -alias test-client -keystore test-client.jks -storepass keypass -file test-client.crt`\n 6. Import the client certificate in the node's keystore:\n    `keytool -import -alias test-client -keystore test-node.jks -storepass keypass -file test-client.crt -noprompt`\n+7. Convert the node's keystore to PKCS#12 temporarily so that we can export the private key ( as keytool doesn't allow this)\n+   `keytool -importkeystore -srckeystore test-node.jks -srcstorepass keypass -destkeystore test-node.p12 -deststoretype PKCS12 -deststorepass keypass`\n+8. Export the client's private key\n+   `openssl pkcs12 -in test-node.p12 -passin pass:keypass -nocerts -nodes -out test-node.key`\n+9. Convert the node's keystore to PKCS#12 temporarily so that we can export the private key ( as keytool doesn't allow this)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51b1b3565354d49f9baacb8fac5347d3bb34145d"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzkzMDE3MA==", "bodyText": "Is there any value to have encryption here? Since this file is mainly used for testing FIPS, so most likely the private key will be encrypted in the wild.", "url": "https://github.com/elastic/elasticsearch/pull/66554#discussion_r547930170", "createdAt": "2020-12-23T12:15:33Z", "author": {"login": "ywangd"}, "path": "buildSrc/src/main/resources/test/ssl/README.md", "diffHunk": "@@ -18,3 +18,11 @@ The certificates are generated using catch-all SAN in the following procedure:\n    `keytool -export -alias test-client -keystore test-client.jks -storepass keypass -file test-client.crt`\n 6. Import the client certificate in the node's keystore:\n    `keytool -import -alias test-client -keystore test-node.jks -storepass keypass -file test-client.crt -noprompt`\n+7. Convert the node's keystore to PKCS#12 temporarily so that we can export the private key ( as keytool doesn't allow this)\n+   `keytool -importkeystore -srckeystore test-node.jks -srcstorepass keypass -destkeystore test-node.p12 -deststoretype PKCS12 -deststorepass keypass`\n+8. Export the client's private key\n+   `openssl pkcs12 -in test-node.p12 -passin pass:keypass -nocerts -nodes -out test-node.key`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51b1b3565354d49f9baacb8fac5347d3bb34145d"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b09119ee3352f462ad86486db8990ef4ac10137c", "author": {"user": {"login": "jkakavas", "name": "Ioannis Kakavas"}}, "url": "https://github.com/elastic/elasticsearch/commit/b09119ee3352f462ad86486db8990ef4ac10137c", "committedDate": "2021-01-13T14:25:16Z", "message": "address feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47e4c59b593650f30065dd3eb86513701bfe0118", "author": {"user": {"login": "jkakavas", "name": "Ioannis Kakavas"}}, "url": "https://github.com/elastic/elasticsearch/commit/47e4c59b593650f30065dd3eb86513701bfe0118", "committedDate": "2021-01-13T14:25:20Z", "message": "Merge remote-tracking branch 'origin/master' into test-with-ssl-plugin-fips"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6750ed058770b4560a587cb94f4934da0c7ddc4", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/d6750ed058770b4560a587cb94f4934da0c7ddc4", "committedDate": "2021-01-13T15:58:47Z", "message": "Merge branch 'master' into test-with-ssl-plugin-fips"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "598a3b3fd57235608bc26877a53e4a4dc9eaa0ab", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/598a3b3fd57235608bc26877a53e4a4dc9eaa0ab", "committedDate": "2021-01-14T09:54:59Z", "message": "Merge branch 'master' into test-with-ssl-plugin-fips"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4337, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}