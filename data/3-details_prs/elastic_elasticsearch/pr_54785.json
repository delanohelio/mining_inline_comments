{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5NDUzNjYz", "number": 54785, "title": "Fix creating filtered alias using now in a date_nanos range query failed", "bodyText": "Closes #54315.\nModify the value of nowInMillis in queryShardContext to current timestamp, because the value will be used lately when validating the filtered alias which uses now in a date_nanos range query.", "createdAt": "2020-04-06T07:59:45Z", "url": "https://github.com/elastic/elasticsearch/pull/54785", "merged": true, "mergeCommit": {"oid": "338798a9db47e2d088abbdf781b170c059273db9"}, "closed": true, "closedAt": "2020-04-16T16:41:45Z", "author": {"login": "gaobinlong"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcUrgMbgH2gAyMzk5NDUzNjYzOmU4ZjY4OTBlMzM5NWQ2MmIzNGE5ODhlMjQ0YTdiNDZiNTBiMjU3MDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcYOaxvgH2gAyMzk5NDUzNjYzOjUwYjk2MDY0MDFiYjFhZTNhNWFjMDdkMzlmZmU2OWJlZjk1N2UwZWI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e8f6890e3395d62b34a988e244a7b46b50b25706", "author": {"user": {"login": "gaobinlong", "name": "bellengao"}}, "url": "https://github.com/elastic/elasticsearch/commit/e8f6890e3395d62b34a988e244a7b46b50b25706", "committedDate": "2020-04-05T15:05:39Z", "message": "Fix creating filtered alias using now in a date_nanos range query failed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4MTQzMTQz", "url": "https://github.com/elastic/elasticsearch/pull/54785#pullrequestreview-388143143", "createdAt": "2020-04-06T11:02:37Z", "commit": {"oid": "e8f6890e3395d62b34a988e244a7b46b50b25706"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e62ec6c8dc88add24608f2fc75e2f8f666dfeedf", "author": {"user": {"login": "gaobinlong", "name": "bellengao"}}, "url": "https://github.com/elastic/elasticsearch/commit/e62ec6c8dc88add24608f2fc75e2f8f666dfeedf", "committedDate": "2020-04-08T07:39:33Z", "message": "add a yaml test for the change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01411d4130cb65f7804c24e9d736c3bca5199151", "author": {"user": {"login": "gaobinlong", "name": "bellengao"}}, "url": "https://github.com/elastic/elasticsearch/commit/01411d4130cb65f7804c24e9d736c3bca5199151", "committedDate": "2020-04-08T07:40:46Z", "message": "Merge remote-tracking branch 'origin/master' into patch#54315"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "310ab1f6de61d62d7355ef13d00b547dd1bfb9e7", "author": {"user": {"login": "gaobinlong", "name": "bellengao"}}, "url": "https://github.com/elastic/elasticsearch/commit/310ab1f6de61d62d7355ef13d00b547dd1bfb9e7", "committedDate": "2020-04-10T08:43:54Z", "message": "Merge remote-tracking branch 'origin/master' into patch#54315"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzMDI5ODI0", "url": "https://github.com/elastic/elasticsearch/pull/54785#pullrequestreview-393029824", "createdAt": "2020-04-14T15:14:42Z", "commit": {"oid": "310ab1f6de61d62d7355ef13d00b547dd1bfb9e7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzMDMyNzg0", "url": "https://github.com/elastic/elasticsearch/pull/54785#pullrequestreview-393032784", "createdAt": "2020-04-14T15:17:52Z", "commit": {"oid": "310ab1f6de61d62d7355ef13d00b547dd1bfb9e7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxNToxNzo1MlrOGFTzUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxNToxNzo1MlrOGFTzUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODIyMDQ5Nw==", "bodyText": "I think this needs changing to \" - 7.99.99\" initially since the bugfix will land on the master branch first. We also run this tests in \"mixed\" cluster scenarios to simulate behaviours during a rolling upgrade, so this might hit a 7.latest/8.0 cluster and would then could fail if hitting a 7.x node without the fix first.\nThe way we usually handle this is disabeling the tests except for the version this is first checked in, then backport and adapt the versions accordingly. I can handle that if you want, probably faster than going through extra PRs...", "url": "https://github.com/elastic/elasticsearch/pull/54785#discussion_r408220497", "createdAt": "2020-04-14T15:17:52Z", "author": {"login": "cbuescher"}, "path": "rest-api-spec/src/main/resources/rest-api-spec/test/indices.put_alias/10_basic.yml", "diffHunk": "@@ -76,3 +76,30 @@\n         index: test_index\n         name: test_alias\n   - match: {test_index.aliases.test_alias: { 'is_write_index': true }}\n+\n+---\n+\"Can create filtered alias with a date_nanos range query\":\n+  - skip:\n+      version: \" - 6.8.99\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "310ab1f6de61d62d7355ef13d00b547dd1bfb9e7"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a67c2742d4884e6abf76df065c574d43ff951c56", "author": {"user": {"login": "cbuescher", "name": "Christoph B\u00fcscher"}}, "url": "https://github.com/elastic/elasticsearch/commit/a67c2742d4884e6abf76df065c574d43ff951c56", "committedDate": "2020-04-16T15:06:14Z", "message": "Adapt skip version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50b9606401bb1ae3a5ac07d39ffe69bef957e0eb", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/50b9606401bb1ae3a5ac07d39ffe69bef957e0eb", "committedDate": "2020-04-16T15:28:11Z", "message": "Merge branch 'master' into patch#54315"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3669, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}