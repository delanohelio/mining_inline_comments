{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYwOTEwNjE2", "number": 50788, "title": "Fix Snapshot Shard Status Request Deduplication", "bodyText": "The request deduplication didn't actually work for these requests\nsince they had no equals and hashCode so the deduplicator wouldn't\nactually recognize equal requests.", "createdAt": "2020-01-09T11:26:12Z", "url": "https://github.com/elastic/elasticsearch/pull/50788", "merged": true, "mergeCommit": {"oid": "a7f8409f1f75a2e930ab6e771bd63d6a6aca235c"}, "closed": true, "closedAt": "2020-01-10T08:32:49Z", "author": {"login": "original-brownbear"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4oMPwAH2gAyMzYwOTEwNjE2OjkxNzBiZDlmZmUyNTNlY2I1MmM4NmViMDZiNThkOTFlNmIyMTJiYjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb4s37cAFqTM0MDY2NzY1MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9170bd9ffe253ecb52c86eb06b58d91e6b212bb8", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/9170bd9ffe253ecb52c86eb06b58d91e6b212bb8", "committedDate": "2020-01-09T11:24:16Z", "message": "Fix Snapshot Shard Status Request Deduplication\n\nThe request deduplication didn't actually work for these requests\nsince they had no `equals` and `hashCode` so the deduplicator wouldn't\nactually recognize equal requests."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwNTM4MjE4", "url": "https://github.com/elastic/elasticsearch/pull/50788#pullrequestreview-340538218", "createdAt": "2020-01-09T14:00:31Z", "commit": {"oid": "9170bd9ffe253ecb52c86eb06b58d91e6b212bb8"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxNDowMDozMlrOFb2u9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQxNDowMDozMlrOFb2u9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDc1MjYzMA==", "bodyText": "nit: I think all fields of this class can be final now. Can we also add a test using EqualsHashCodeTestUtils?", "url": "https://github.com/elastic/elasticsearch/pull/50788#discussion_r364752630", "createdAt": "2020-01-09T14:00:32Z", "author": {"login": "dnhatn"}, "path": "server/src/main/java/org/elasticsearch/snapshots/SnapshotShardsService.java", "diffHunk": "@@ -440,6 +441,23 @@ public ShardSnapshotStatus status() {\n         public String toString() {\n             return snapshot + \", shardId [\" + shardId + \"], status [\" + status.state() + \"]\";\n         }\n+\n+        @Override\n+        public boolean equals(final Object o) {\n+            if (this == o) {\n+                return true;\n+            }\n+            if (o == null || getClass() != o.getClass()) {\n+                return false;\n+            }\n+            final UpdateIndexShardSnapshotStatusRequest that = (UpdateIndexShardSnapshotStatusRequest) o;\n+            return snapshot.equals(that.snapshot) && shardId.equals(that.shardId) && status.equals(that.status);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9170bd9ffe253ecb52c86eb06b58d91e6b212bb8"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9cef862905cd3e49c19a681465f42a1b23c52d1", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/a9cef862905cd3e49c19a681465f42a1b23c52d1", "committedDate": "2020-01-09T16:24:16Z", "message": "Merge remote-tracking branch 'elastic/master' into shard-status-request-dedup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e21440d4c5b7c404c828e07b1e2b00129cb37be7", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/e21440d4c5b7c404c828e07b1e2b00129cb37be7", "committedDate": "2020-01-09T16:42:25Z", "message": "CR: final fields + test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwNjY3NjUw", "url": "https://github.com/elastic/elasticsearch/pull/50788#pullrequestreview-340667650", "createdAt": "2020-01-09T16:51:36Z", "commit": {"oid": "e21440d4c5b7c404c828e07b1e2b00129cb37be7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3695, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}