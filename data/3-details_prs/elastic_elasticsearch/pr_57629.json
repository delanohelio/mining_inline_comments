{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3NDc3ODkz", "number": 57629, "title": "Add default composable templates for new indexing strategy", "bodyText": "This commit adds the component and composable templates, as well as ILM policies, for the new\ndefault indexing strategy. It installs:\n\nlogs-default-mappings (component)\nlogs-default-settings (component)\nlogs-default-policy (ilm policy)\nlogs-default-template (composable template)\nmetrics-default-mappings (component)\nmetrics-default-settings (component)\nmetrics-default-policy (ilm policy)\nmetrics-default-template (composable template)\n\nThese templates and policies are managed by a new x-pack module, stack, and can be disabled by\nsetting stack.templates.enabled to false.\nThese ensure that patterns for the logs-*-* and metrics-*-* indices are set up to create data\nstreams with the proper mappings and settings.\nThis also makes changes to the IndexTemplateRegistry to support installing component and\ncomposable templates (previously it supported only legacy templates).\nResolves #56709", "createdAt": "2020-06-03T21:59:46Z", "url": "https://github.com/elastic/elasticsearch/pull/57629", "merged": true, "mergeCommit": {"oid": "3b68df23559c19fa4823c9e661ed5b25c3281fab"}, "closed": true, "closedAt": "2020-06-30T15:19:38Z", "author": {"login": "dakrone"}, "timelineItems": {"totalCount": 33, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnwsQtgH2gAyNDI3NDc3ODkzOjlmM2FmMjFkMTdiYmNhZTcyMTZlOWQwMjc4OTczNGY0OGIyMDI4M2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABczYw_RgFqTQ0NjA1NjM5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9f3af21d17bbcae7216e9d02789734f48b20283d", "author": {"user": {"login": "dakrone", "name": "Lee Hinman"}}, "url": "https://github.com/elastic/elasticsearch/commit/9f3af21d17bbcae7216e9d02789734f48b20283d", "committedDate": "2020-06-03T21:52:55Z", "message": "Add default composable templates for new indexing strategy\n\nThis commit adds the component and composable templates, as well as ILM policies, for the new\ndefault indexing strategy. It installs:\n\n- logs-default-mappings (component)\n- logs-default-settings (component)\n- logs-default-policy (ilm policy)\n- logs-default-template (composable template)\n- metrics-default-mappings (component)\n- metrics-default-settings (component)\n- metrics-default-policy (ilm policy)\n- metrics-default-template (composable template)\n\nThese templates and policies are managed by a new x-pack module, `stack`, and can be disabled by\nsetting `stack.templates.enabled` to `false`.\n\nThese ensure that patterns for the `logs-*-*` and `metrics-*-*` indices are set up to create data\nstreams with the proper mappings and settings.\n\nThis also makes changes to the `IndexTemplateRegistry` to support installing component and\ncomposable templates (previously it supported only legacy templates).\n\nResolves #56709"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87b836fd3d229e8a087c602f6e7879cb8d990909", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/87b836fd3d229e8a087c602f6e7879cb8d990909", "committedDate": "2020-06-03T22:28:09Z", "message": "Merge branch 'master' into itv2-bundle-templates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc", "author": {"user": {"login": "dakrone", "name": "Lee Hinman"}}, "url": "https://github.com/elastic/elasticsearch/commit/099c782ced2c9619ffcc3a48f88b39c9ce1a8efc", "committedDate": "2020-06-03T22:43:06Z", "message": "Add logs and metrics policies to list of expected x-pack policies"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0MTMzNDUy", "url": "https://github.com/elastic/elasticsearch/pull/57629#pullrequestreview-424133452", "createdAt": "2020-06-04T06:23:25Z", "commit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "state": "COMMENTED", "comments": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjoyMzoyNVrOGe3Xuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjozNDo0MVrOGe3omg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxNzY1OQ==", "bodyText": "Could we add some metadata here? It would be nice to indicate in here that these are \"stack\" templates. The other thing that would be nice is to have the version of the stack that loaded it in here.\nWhat is the behaviour if the ES is upgraded, will these be overwritten?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435017659", "createdAt": "2020-06-04T06:23:25Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxNzgyOQ==", "bodyText": "We just renamed these to dataset.*: elastic/package-registry#491", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435017829", "createdAt": "2020-06-04T06:23:53Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {\n+        \"@timestamp\": {\n+          \"type\": \"date\"\n+        },\n+        \"stream\": {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxNzg3NQ==", "bodyText": "This is now name.", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435017875", "createdAt": "2020-06-04T06:24:01Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {\n+        \"@timestamp\": {\n+          \"type\": \"date\"\n+        },\n+        \"stream\": {\n+          \"properties\": {\n+            \"type\": {\n+              \"type\": \"constant_keyword\",\n+              \"value\": \"logs\"\n+            },\n+            \"dataset\": {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxNzk4MQ==", "bodyText": "I'm torn if we should add these or leave them out.", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435017981", "createdAt": "2020-06-04T06:24:16Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {\n+        \"@timestamp\": {\n+          \"type\": \"date\"\n+        },\n+        \"stream\": {\n+          \"properties\": {\n+            \"type\": {\n+              \"type\": \"constant_keyword\",\n+              \"value\": \"logs\"\n+            },\n+            \"dataset\": {\n+              \"type\": \"constant_keyword\"\n+            },\n+            \"namespace\": {\n+              \"type\": \"constant_keyword\"\n+            }\n+          }\n+        },\n+        \"agent\": {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxODIxNg==", "bodyText": "As ECS version is only max about 10 chars long, I wonder if there is a benefit of setting this much lower?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435018216", "createdAt": "2020-06-04T06:24:50Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {\n+        \"@timestamp\": {\n+          \"type\": \"date\"\n+        },\n+        \"stream\": {\n+          \"properties\": {\n+            \"type\": {\n+              \"type\": \"constant_keyword\",\n+              \"value\": \"logs\"\n+            },\n+            \"dataset\": {\n+              \"type\": \"constant_keyword\"\n+            },\n+            \"namespace\": {\n+              \"type\": \"constant_keyword\"\n+            }\n+          }\n+        },\n+        \"agent\": {\n+          \"properties\": {\n+            \"hostname\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"name\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"id\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"ephemeral_id\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"type\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"version\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            }\n+          }\n+        },\n+        \"ecs\": {\n+          \"properties\": {\n+            \"version\": {\n+              \"ignore_above\": 1024,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxODYyNw==", "bodyText": "For host.* I was thinking if we should only keep host.ip. This ensures that host is an object and it is one of the fields which is not a keyword. The other ones should be detected automatically.", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435018627", "createdAt": "2020-06-04T06:25:54Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {\n+        \"@timestamp\": {\n+          \"type\": \"date\"\n+        },\n+        \"stream\": {\n+          \"properties\": {\n+            \"type\": {\n+              \"type\": \"constant_keyword\",\n+              \"value\": \"logs\"\n+            },\n+            \"dataset\": {\n+              \"type\": \"constant_keyword\"\n+            },\n+            \"namespace\": {\n+              \"type\": \"constant_keyword\"\n+            }\n+          }\n+        },\n+        \"agent\": {\n+          \"properties\": {\n+            \"hostname\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"name\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"id\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"ephemeral_id\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"type\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"version\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            }\n+          }\n+        },\n+        \"ecs\": {\n+          \"properties\": {\n+            \"version\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            }\n+          }\n+        },\n+        \"host\": {\n+          \"properties\": {\n+            \"hostname\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"os\": {\n+              \"properties\": {\n+                \"build\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"kernel\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"codename\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"name\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"family\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"version\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"platform\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"full\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                }\n+              }\n+            },\n+            \"ip\": {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 114}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxODc4Mg==", "bodyText": "We have two _meta fields?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435018782", "createdAt": "2020-06-04T06:26:18Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {\n+        \"@timestamp\": {\n+          \"type\": \"date\"\n+        },\n+        \"stream\": {\n+          \"properties\": {\n+            \"type\": {\n+              \"type\": \"constant_keyword\",\n+              \"value\": \"logs\"\n+            },\n+            \"dataset\": {\n+              \"type\": \"constant_keyword\"\n+            },\n+            \"namespace\": {\n+              \"type\": \"constant_keyword\"\n+            }\n+          }\n+        },\n+        \"agent\": {\n+          \"properties\": {\n+            \"hostname\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"name\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"id\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"ephemeral_id\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"type\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"version\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            }\n+          }\n+        },\n+        \"ecs\": {\n+          \"properties\": {\n+            \"version\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            }\n+          }\n+        },\n+        \"host\": {\n+          \"properties\": {\n+            \"hostname\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"os\": {\n+              \"properties\": {\n+                \"build\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"kernel\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"codename\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"name\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"family\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"version\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"platform\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"full\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                }\n+              }\n+            },\n+            \"ip\": {\n+              \"type\": \"ip\"\n+            },\n+            \"containerized\": {\n+              \"type\": \"boolean\"\n+            },\n+            \"name\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"id\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"type\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"mac\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"architecture\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            }\n+          }\n+        },\n+        \"message\": {\n+          \"type\": \"text\"\n+        }\n+      }\n+    }\n+  },\n+  \"_meta\": {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 148}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxOTA5Mw==", "bodyText": "Should we have this as true? Could this cause problems if a date is a false positive?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435019093", "createdAt": "2020-06-04T06:27:14Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxOTQwNw==", "bodyText": "There haven't been any problem with 1024 historically so I'm good with keeping it. But I wonder if there is a value for ES which would preferrable?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435019407", "createdAt": "2020-06-04T06:28:06Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxOTgzMA==", "bodyText": "We should discuss more what our default ILM policy should be moving forward in the context of the new indexing strategy. @jpountz", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435019830", "createdAt": "2020-06-04T06:29:10Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-policy.json", "diffHunk": "@@ -0,0 +1,13 @@\n+{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAyMDA1NQ==", "bodyText": "Any recommendations here?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435020055", "createdAt": "2020-06-04T06:29:44Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-settings.json", "diffHunk": "@@ -0,0 +1,21 @@\n+{\n+  \"template\": {\n+    \"settings\": {\n+      \"index\": {\n+        \"lifecycle\": {\n+          \"name\": \"logs-default-policy\"\n+        },\n+        \"codec\": \"best_compression\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAyMDEzOQ==", "bodyText": "Also looking for recommendations here from the ES team on what to pick.", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435020139", "createdAt": "2020-06-04T06:29:56Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-settings.json", "diffHunk": "@@ -0,0 +1,21 @@\n+{\n+  \"template\": {\n+    \"settings\": {\n+      \"index\": {\n+        \"lifecycle\": {\n+          \"name\": \"logs-default-policy\"\n+        },\n+        \"codec\": \"best_compression\",\n+        \"refresh_interval\": \"5s\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAyMDczNw==", "bodyText": "We need to discuss, if dynamic mapping in here should be true or false. Historically I would have said true but seeing that in the future we will also have the possibility to query some fields which are not indexed, I wonder if false would be better here?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435020737", "createdAt": "2020-06-04T06:31:27Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAyMDc5OA==", "bodyText": "Nice!", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435020798", "createdAt": "2020-06-04T06:31:39Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {\n+        \"@timestamp\": {\n+          \"type\": \"date\"\n+        },\n+        \"stream\": {\n+          \"properties\": {\n+            \"type\": {\n+              \"type\": \"constant_keyword\",\n+              \"value\": \"logs\"\n+            },\n+            \"dataset\": {\n+              \"type\": \"constant_keyword\"\n+            },\n+            \"namespace\": {\n+              \"type\": \"constant_keyword\"\n+            }\n+          }\n+        },\n+        \"agent\": {\n+          \"properties\": {\n+            \"hostname\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"name\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"id\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"ephemeral_id\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"type\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"version\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            }\n+          }\n+        },\n+        \"ecs\": {\n+          \"properties\": {\n+            \"version\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            }\n+          }\n+        },\n+        \"host\": {\n+          \"properties\": {\n+            \"hostname\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"os\": {\n+              \"properties\": {\n+                \"build\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"kernel\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"codename\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"name\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"family\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"version\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"platform\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                },\n+                \"full\": {\n+                  \"ignore_above\": 1024,\n+                  \"type\": \"keyword\"\n+                }\n+              }\n+            },\n+            \"ip\": {\n+              \"type\": \"ip\"\n+            },\n+            \"containerized\": {\n+              \"type\": \"boolean\"\n+            },\n+            \"name\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"id\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"type\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"mac\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"architecture\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            }\n+          }\n+        },\n+        \"message\": {\n+          \"type\": \"text\"\n+        }\n+      }\n+    }\n+  },\n+  \"_meta\": {\n+    \"description\": \"default mappings for the logs index template installed by x-pack\"\n+  },\n+  \"version\": ${xpack.stack.template.version}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 151}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAyMTE4Mg==", "bodyText": "Do we still need this? What is the default if we don't set it?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435021182", "createdAt": "2020-06-04T06:32:39Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-settings.json", "diffHunk": "@@ -0,0 +1,21 @@\n+{\n+  \"template\": {\n+    \"settings\": {\n+      \"index\": {\n+        \"lifecycle\": {\n+          \"name\": \"logs-default-policy\"\n+        },\n+        \"codec\": \"best_compression\",\n+        \"refresh_interval\": \"5s\",\n+        \"query\": {\n+          \"default_field\": [\"message\"]\n+        },\n+        \"number_of_routing_shards\": \"30\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAyMTM4NQ==", "bodyText": "Is there a way to add metadata to the ILM policy so we also know which stack version initially loaded it?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435021385", "createdAt": "2020-06-04T06:33:06Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-policy.json", "diffHunk": "@@ -0,0 +1,13 @@\n+{\n+  \"phases\": {\n+    \"hot\": {\n+      \"min_age\": \"0ms\",\n+      \"actions\": {\n+        \"rollover\": {\n+          \"max_size\": \"50gb\",\n+          \"max_age\": \"30d\"\n+        }\n+      }\n+    }\n+  }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAyMTk3OA==", "bodyText": "Should we set priority to 1 or 10?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435021978", "createdAt": "2020-06-04T06:34:41Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-template.json", "diffHunk": "@@ -0,0 +1,15 @@\n+{\n+  \"index_patterns\": [\"logs-*-*\"],\n+  \"priority\": 100,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0MTQ3ODcy", "url": "https://github.com/elastic/elasticsearch/pull/57629#pullrequestreview-424147872", "createdAt": "2020-06-04T06:51:10Z", "commit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "state": "COMMENTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjo1MToxMVrOGe4D0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNzowNDoyMlrOGe4cCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAyODk0NA==", "bodyText": "I think we should stick to the default refresh interval, which refreshes either every 1s for actively searched shards, and otherwise refreshes on the next search request. This had been introduced for logs/metrics use-cases and helps speed up indexing on data that is not actively searched.", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435028944", "createdAt": "2020-06-04T06:51:11Z", "author": {"login": "jpountz"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-settings.json", "diffHunk": "@@ -0,0 +1,21 @@\n+{\n+  \"template\": {\n+    \"settings\": {\n+      \"index\": {\n+        \"lifecycle\": {\n+          \"name\": \"logs-default-policy\"\n+        },\n+        \"codec\": \"best_compression\",\n+        \"refresh_interval\": \"5s\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAyMDEzOQ=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAzMDk4Nw==", "bodyText": "Happy to. A sync conversation might help so that we can get aligned on the constraints.", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435030987", "createdAt": "2020-06-04T06:55:43Z", "author": {"login": "jpountz"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-policy.json", "diffHunk": "@@ -0,0 +1,13 @@\n+{", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxOTgzMA=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAzMTg2OA==", "bodyText": "I'd be careful here, we'll indeed be able to query fields that are not indexed, but the current plan still requires that fields be mapped.", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435031868", "createdAt": "2020-06-04T06:57:35Z", "author": {"login": "jpountz"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAyMDczNw=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAzMjU0Mg==", "bodyText": "should we now use wildcard as a default type cc @jimczi @markharwood\n(we don't need to make a decision for the first version, we can change our minds later)", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435032542", "createdAt": "2020-06-04T06:58:57Z", "author": {"login": "jpountz"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAzMzYxNg==", "bodyText": "I suspect that Lee's motivation is that a value that looks like a date could make dynamic mappings create a date field, which would then fail indexing any document that has a non-date value for this field.", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435033616", "createdAt": "2020-06-04T07:01:08Z", "author": {"login": "jpountz"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxOTA5Mw=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAzNDMwNw==", "bodyText": "should we disable numeric_detection too for the same reason?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435034307", "createdAt": "2020-06-04T07:02:43Z", "author": {"login": "jpountz"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"_meta\": {\n+      },\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxOTA5Mw=="}, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAzNTE0Nw==", "bodyText": "@ruflin would logs-generic-mappings be more aligned with Observability in terms of naming?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r435035147", "createdAt": "2020-06-04T07:04:22Z", "author": {"login": "jpountz"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-mappings.json", "diffHunk": "@@ -0,0 +1,152 @@\n+{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "099c782ced2c9619ffcc3a48f88b39c9ce1a8efc"}, "originalPosition": 1}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a74934a70f389a2de703307fa8bd1dd932ceb375", "author": {"user": {"login": "dakrone", "name": "Lee Hinman"}}, "url": "https://github.com/elastic/elasticsearch/commit/a74934a70f389a2de703307fa8bd1dd932ceb375", "committedDate": "2020-06-04T16:38:33Z", "message": "Fix docs check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "266acf5d29a6ec309c16cadd93d083fa6ef709ae", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/266acf5d29a6ec309c16cadd93d083fa6ef709ae", "committedDate": "2020-06-04T16:38:54Z", "message": "Merge branch 'master' into itv2-bundle-templates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73101067d2c89891100fbc8da043e1e959028f46", "author": {"user": {"login": "dakrone", "name": "Lee Hinman"}}, "url": "https://github.com/elastic/elasticsearch/commit/73101067d2c89891100fbc8da043e1e959028f46", "committedDate": "2020-06-04T17:13:25Z", "message": "Rename stream.* -> dataset.*"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e891126a5665a07cbe55a8b2adbd84cbf84451c", "author": {"user": {"login": "dakrone", "name": "Lee Hinman"}}, "url": "https://github.com/elastic/elasticsearch/commit/7e891126a5665a07cbe55a8b2adbd84cbf84451c", "committedDate": "2020-06-04T17:13:25Z", "message": "Rename dataset.dataset -> dataset.name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f249d7059d1fd5d47fbee3235f4b644cd6221345", "author": {"user": {"login": "dakrone", "name": "Lee Hinman"}}, "url": "https://github.com/elastic/elasticsearch/commit/f249d7059d1fd5d47fbee3235f4b644cd6221345", "committedDate": "2020-06-04T17:13:25Z", "message": "Remove non-\"ip\" fields under \"host\""}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dcdaa033752704e7942c7be56980cdce2ef5e127", "author": {"user": {"login": "dakrone", "name": "Lee Hinman"}}, "url": "https://github.com/elastic/elasticsearch/commit/dcdaa033752704e7942c7be56980cdce2ef5e127", "committedDate": "2020-06-04T17:13:25Z", "message": "Use default refresh interval for logs/metrics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42f9f8c8468f297dabbb5d825969b5fe207a6667", "author": {"user": {"login": "dakrone", "name": "Lee Hinman"}}, "url": "https://github.com/elastic/elasticsearch/commit/42f9f8c8468f297dabbb5d825969b5fe207a6667", "committedDate": "2020-06-04T17:13:25Z", "message": "Use default number_of_routing_shards"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a478d00e9ed1e4c390cfc98c5ae17f21edf5590", "author": {"user": {"login": "dakrone", "name": "Lee Hinman"}}, "url": "https://github.com/elastic/elasticsearch/commit/3a478d00e9ed1e4c390cfc98c5ae17f21edf5590", "committedDate": "2020-06-17T22:09:05Z", "message": "Merge remote-tracking branch 'origin/master' into itv2-bundle-templates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2f074134371471fcb92158fed5ff5d133316181", "author": {"user": {"login": "dakrone", "name": "Lee Hinman"}}, "url": "https://github.com/elastic/elasticsearch/commit/f2f074134371471fcb92158fed5ff5d133316181", "committedDate": "2020-06-17T22:11:34Z", "message": "Update mappings after discussion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6eeb48dc7e8512baae2b6a730a0f3bd3cf1a4fc", "author": {"user": {"login": "dakrone", "name": "Lee Hinman"}}, "url": "https://github.com/elastic/elasticsearch/commit/a6eeb48dc7e8512baae2b6a730a0f3bd3cf1a4fc", "committedDate": "2020-06-17T22:18:26Z", "message": "Update version constant and comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53feca5a6a186900d08ce826f616ab143793ece6", "author": {"user": {"login": "dakrone", "name": "Lee Hinman"}}, "url": "https://github.com/elastic/elasticsearch/commit/53feca5a6a186900d08ce826f616ab143793ece6", "committedDate": "2020-06-17T23:09:02Z", "message": "Fix index name in yaml test for master merge"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzMDk0NTY0", "url": "https://github.com/elastic/elasticsearch/pull/57629#pullrequestreview-433094564", "createdAt": "2020-06-18T09:16:22Z", "commit": {"oid": "53feca5a6a186900d08ce826f616ab143793ece6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQwOToxNjoyMlrOGlm2Kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQwOToxNjoyMlrOGlm2Kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjA4Njk1NQ==", "bodyText": "is this min_age required? What is the effect of it?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r442086955", "createdAt": "2020-06-18T09:16:22Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-default-policy.json", "diffHunk": "@@ -0,0 +1,13 @@\n+{\n+  \"phases\": {\n+    \"hot\": {\n+      \"min_age\": \"0ms\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53feca5a6a186900d08ce826f616ab143793ece6"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1ODczNDMy", "url": "https://github.com/elastic/elasticsearch/pull/57629#pullrequestreview-435873432", "createdAt": "2020-06-23T15:00:06Z", "commit": {"oid": "53feca5a6a186900d08ce826f616ab143793ece6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxNTowMDowNlrOGnteyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxNTowMDowNlrOGnteyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDI5MjgxMQ==", "bodyText": "@exekias @roncohen I was wondering if we should add anything related to detecting numbers to our default template?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r444292811", "createdAt": "2020-06-23T15:00:06Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/metrics-default-mappings.json", "diffHunk": "@@ -0,0 +1,57 @@\n+{\n+  \"template\": {\n+    \"mappings\": {\n+      \"dynamic_templates\": [\n+        {\n+          \"strings_as_keyword\": {\n+            \"mapping\": {\n+              \"ignore_above\": 1024,\n+              \"type\": \"keyword\"\n+            },\n+            \"match_mapping_type\": \"string\"\n+          }\n+        }\n+      ],\n+      \"date_detection\": false,\n+      \"properties\": {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53feca5a6a186900d08ce826f616ab143793ece6"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30e48a4930e3f4aa85967e3e4c249e1075f44ac7", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/30e48a4930e3f4aa85967e3e4c249e1075f44ac7", "committedDate": "2020-06-24T16:54:53Z", "message": "Merge branch 'master' into itv2-bundle-templates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b1b0186220c062d050afb9f107a02166137133c", "author": {"user": {"login": "dakrone", "name": "Lee Hinman"}}, "url": "https://github.com/elastic/elasticsearch/commit/2b1b0186220c062d050afb9f107a02166137133c", "committedDate": "2020-06-24T16:55:20Z", "message": "Remove unnecessary min_age from policies"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce81e39a5f6d20e452193a5cdfd21cbf7397df05", "author": {"user": {"login": "dakrone", "name": "Lee Hinman"}}, "url": "https://github.com/elastic/elasticsearch/commit/ce81e39a5f6d20e452193a5cdfd21cbf7397df05", "committedDate": "2020-06-24T17:14:03Z", "message": "Fix gradle for master merge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "455fdfb20853a913893d1c678ac650d082fc4ce6", "author": {"user": {"login": "dakrone", "name": "Lee Hinman"}}, "url": "https://github.com/elastic/elasticsearch/commit/455fdfb20853a913893d1c678ac650d082fc4ce6", "committedDate": "2020-06-24T18:26:21Z", "message": "Reference changed name in YML test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd0247646c45c325974f9276027e34ef0439d675", "author": {"user": {"login": "dakrone", "name": "Lee Hinman"}}, "url": "https://github.com/elastic/elasticsearch/commit/fd0247646c45c325974f9276027e34ef0439d675", "committedDate": "2020-06-24T19:10:48Z", "message": "Rename templates and files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "897c645a3d593a7939c872b249a9c8f8aaa5c8f0", "author": {"user": {"login": "dakrone", "name": "Lee Hinman"}}, "url": "https://github.com/elastic/elasticsearch/commit/897c645a3d593a7939c872b249a9c8f8aaa5c8f0", "committedDate": "2020-06-24T19:18:30Z", "message": "Ugh spotless :|"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68f7898c96927cb7fbec7758ed8ccac7d36102b0", "author": {"user": {"login": "dakrone", "name": "Lee Hinman"}}, "url": "https://github.com/elastic/elasticsearch/commit/68f7898c96927cb7fbec7758ed8ccac7d36102b0", "committedDate": "2020-06-24T21:10:58Z", "message": "Add managed: true to settings component templates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a555eaaaaf963135d0d3f8544a347baa8ce942c", "author": {"user": {"login": "dakrone", "name": "Lee Hinman"}}, "url": "https://github.com/elastic/elasticsearch/commit/7a555eaaaaf963135d0d3f8544a347baa8ce942c", "committedDate": "2020-06-24T21:24:48Z", "message": "Don't clean up stack-installed templates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3c884406e2e71ebe1fbd33dd3bec49980ea97b5", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/d3c884406e2e71ebe1fbd33dd3bec49980ea97b5", "committedDate": "2020-06-26T21:08:47Z", "message": "Merge branch 'master' into itv2-bundle-templates"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5ODM3MDgx", "url": "https://github.com/elastic/elasticsearch/pull/57629#pullrequestreview-439837081", "createdAt": "2020-06-30T09:28:05Z", "commit": {"oid": "d3c884406e2e71ebe1fbd33dd3bec49980ea97b5"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwOToyODowNVrOGqz8wA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwOTozMjowMFrOGq0GPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzU0NDUxMg==", "bodyText": "is this used anywhere?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r447544512", "createdAt": "2020-06-30T09:28:05Z", "author": {"login": "andreidan"}, "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/indices/PutComponentTemplateRequest.java", "diffHunk": "@@ -78,6 +78,10 @@ public PutComponentTemplateRequest componentTemplate(ComponentTemplate component\n         return this;\n     }\n \n+    public ComponentTemplate componentTemplate() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3c884406e2e71ebe1fbd33dd3bec49980ea97b5"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzU0NTAyOA==", "bodyText": "do we need to enable this before merging?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r447545028", "createdAt": "2020-06-30T09:28:57Z", "author": {"login": "andreidan"}, "path": "x-pack/plugin/stack/build.gradle", "diffHunk": "@@ -0,0 +1,29 @@\n+evaluationDependsOn(xpackModule('core'))\n+\n+apply plugin: 'elasticsearch.esplugin'\n+\n+esplugin {\n+  name 'x-pack-stack'\n+  description 'Elasticsearch Expanded Pack Plugin - Stack'\n+  classname 'org.elasticsearch.xpack.stack.StackPlugin'\n+  extendedPlugins = ['x-pack-core']\n+  hasNativeController false\n+  requiresKeystore true\n+}\n+archivesBaseName = 'x-pack-stack'\n+\n+dependencies {\n+  compileOnly project(path: xpackModule('core'), configuration: 'default')\n+  testImplementation project(path: xpackModule('core'), configuration: 'testArtifacts')\n+}\n+\n+// add all sub-projects of the qa sub-project\n+// gradle.projectsEvaluated {\n+//   project.subprojects\n+//     .find { it.path == project.path + \":qa\" }\n+//     .subprojects\n+//     .findAll { it.path.startsWith(project.path + \":qa\") }\n+//     .each { check.dependsOn it.check }\n+// }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3c884406e2e71ebe1fbd33dd3bec49980ea97b5"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzU0Njk0MQ==", "bodyText": "will these fail when missing? Should we match the status code?", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r447546941", "createdAt": "2020-06-30T09:32:00Z", "author": {"login": "andreidan"}, "path": "x-pack/plugin/stack/qa/rest/src/test/resources/rest-api-spec/test/stack/10_basic.yml", "diffHunk": "@@ -0,0 +1,105 @@\n+---\n+setup:\n+  - do:\n+      cluster.health:\n+        wait_for_status: yellow\n+\n+---\n+\"Test stack template installation\":\n+  - do:\n+      ilm.get_lifecycle:\n+        policy: \"logs\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3c884406e2e71ebe1fbd33dd3bec49980ea97b5"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e975700b84be417f4dfeddb3c7e5b862f14216a2", "author": {"user": {"login": "dakrone", "name": "Lee Hinman"}}, "url": "https://github.com/elastic/elasticsearch/commit/e975700b84be417f4dfeddb3c7e5b862f14216a2", "committedDate": "2020-06-30T14:08:33Z", "message": "Merge remote-tracking branch 'origin/master' into itv2-bundle-templates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9991bed6b418ea0e3a803dd8d0a7170c07370572", "author": {"user": {"login": "dakrone", "name": "Lee Hinman"}}, "url": "https://github.com/elastic/elasticsearch/commit/9991bed6b418ea0e3a803dd8d0a7170c07370572", "committedDate": "2020-06-30T14:10:29Z", "message": "Remove unused componentTemplate getter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36285abb957bf18848d7efb07257d4c110a73c10", "author": {"user": {"login": "dakrone", "name": "Lee Hinman"}}, "url": "https://github.com/elastic/elasticsearch/commit/36285abb957bf18848d7efb07257d4c110a73c10", "committedDate": "2020-06-30T14:12:26Z", "message": "Enable sub project in gradle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxOTM2MjA5", "url": "https://github.com/elastic/elasticsearch/pull/57629#pullrequestreview-441936209", "createdAt": "2020-07-02T18:36:33Z", "commit": {"oid": "36285abb957bf18848d7efb07257d4c110a73c10"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxODozNjozNFrOGsZF9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxODozNjozNFrOGsZF9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTIwMTY1Mw==", "bodyText": "@dakrone Why is this set to 100? Shouldn't we set it to 1? @jonathan-buttner FYI", "url": "https://github.com/elastic/elasticsearch/pull/57629#discussion_r449201653", "createdAt": "2020-07-02T18:36:34Z", "author": {"login": "ruflin"}, "path": "x-pack/plugin/core/src/main/resources/logs-template.json", "diffHunk": "@@ -0,0 +1,16 @@\n+{\n+  \"index_patterns\": [\"logs-*-*\"],\n+  \"priority\": 100,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "36285abb957bf18848d7efb07257d4c110a73c10"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2MDU2Mzk3", "url": "https://github.com/elastic/elasticsearch/pull/57629#pullrequestreview-446056397", "createdAt": "2020-07-10T00:47:28Z", "commit": {"oid": "36285abb957bf18848d7efb07257d4c110a73c10"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3873, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}