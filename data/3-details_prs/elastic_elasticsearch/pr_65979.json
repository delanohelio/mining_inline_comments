{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzOTA2MDE1", "number": 65979, "title": "[DOCS] Add index alias conversion to data stream setup docs", "bodyText": "Adds a brief section on converting an index alias to a data stream using the related migrate API.\nRelates to #65017 and #61046\nPreview\nhttps://elasticsearch_65979.docs-preview.app.elstc.co/guide/en/elasticsearch/reference/master/set-up-a-data-stream.html#convert-an-index-alias-to-a-data-stream", "createdAt": "2020-12-07T19:45:05Z", "url": "https://github.com/elastic/elasticsearch/pull/65979", "merged": true, "mergeCommit": {"oid": "866599a77b5564527c699b92288a6d169329d99e"}, "closed": true, "closedAt": "2020-12-08T18:28:35Z", "author": {"login": "jrodewig"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdj6_sdgH2gAyNTMzOTA2MDE1OjA5MjNhZTQ3MjA2YTA5NzUxZGExNTI5ZGNlMGY5ZjMzM2RjZDA5NGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkOLVzAH2gAyNTMzOTA2MDE1OjgwMGFlNjI3ZjZhMzEyYWQ3OTkyNjM1NzAxZWJkYzc3OTZhM2Q2OGQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0923ae47206a09751da1529dce0f9f333dcd094f", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/0923ae47206a09751da1529dce0f9f333dcd094f", "committedDate": "2020-12-07T19:48:39Z", "message": "[DOCS] Add migrate API to data stream setup"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5afc88eea7c70a982254164c204f004bb12ca5e1", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/5afc88eea7c70a982254164c204f004bb12ca5e1", "committedDate": "2020-12-07T19:44:11Z", "message": "[DOCS] Add migrate API to data stream setup"}, "afterCommit": {"oid": "0923ae47206a09751da1529dce0f9f333dcd094f", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/0923ae47206a09751da1529dce0f9f333dcd094f", "committedDate": "2020-12-07T19:48:39Z", "message": "[DOCS] Add migrate API to data stream setup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f74fc198f9015b2179b77a31d96ecc6f787d07d7", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/f74fc198f9015b2179b77a31d96ecc6f787d07d7", "committedDate": "2020-12-07T20:10:07Z", "message": "add word"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e220cdcf64f2aa5776c4b9b8fcb9eac69321cfa", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/8e220cdcf64f2aa5776c4b9b8fcb9eac69321cfa", "committedDate": "2020-12-08T15:19:54Z", "message": "Remove section from rollover"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3MzM3NjEw", "url": "https://github.com/elastic/elasticsearch/pull/65979#pullrequestreview-547337610", "createdAt": "2020-12-08T15:20:43Z", "commit": {"oid": "8e220cdcf64f2aa5776c4b9b8fcb9eac69321cfa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNToyMDo0M1rOIBi0iA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNToyMDo0M1rOIBi0iA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQ4OTk5Mg==", "bodyText": "With the migration API, this is no longer necessarily the case. A converted index alias does not create a new backing index or write index.\nI'm not sure the first two sentences were needed originally anyway.", "url": "https://github.com/elastic/elasticsearch/pull/65979#discussion_r538489992", "createdAt": "2020-12-08T15:20:43Z", "author": {"login": "jrodewig"}, "path": "docs/reference/data-streams/data-streams.asciidoc", "diffHunk": "@@ -74,10 +74,8 @@ such as:\n [[data-streams-rollover]]\n == Rollover\n \n-When you create a data stream, {es} automatically creates a backing index for\n-the stream. This index also acts as the stream's first write index. A\n-<<indices-rollover-index,rollover>> creates a new backing index that becomes the\n-stream's new write index.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e220cdcf64f2aa5776c4b9b8fcb9eac69321cfa"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27a7c03089ed7e3116741d2e33be65ffc45e2d69", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/27a7c03089ed7e3116741d2e33be65ffc45e2d69", "committedDate": "2020-12-08T15:22:13Z", "message": "Add note for write index"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3NDc2NzMy", "url": "https://github.com/elastic/elasticsearch/pull/65979#pullrequestreview-547476732", "createdAt": "2020-12-08T17:45:00Z", "commit": {"oid": "27a7c03089ed7e3116741d2e33be65ffc45e2d69"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNzo0NTowMFrOIBsu1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNzo1MTowMFrOIBtIJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODY1MjM3Mg==", "bodyText": "It is still true that a backing index is created automatically when you create a data stream with the Create Data Stream API. It's entirely up to you whether that needs to be mentioned here or not.", "url": "https://github.com/elastic/elasticsearch/pull/65979#discussion_r538652372", "createdAt": "2020-12-08T17:45:00Z", "author": {"login": "danhermann"}, "path": "docs/reference/data-streams/data-streams.asciidoc", "diffHunk": "@@ -74,10 +74,8 @@ such as:\n [[data-streams-rollover]]\n == Rollover\n \n-When you create a data stream, {es} automatically creates a backing index for\n-the stream. This index also acts as the stream's first write index. A\n-<<indices-rollover-index,rollover>> creates a new backing index that becomes the\n-stream's new write index.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQ4OTk5Mg=="}, "originalCommit": {"oid": "8e220cdcf64f2aa5776c4b9b8fcb9eac69321cfa"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODY1ODg1NA==", "bodyText": "There are limitations on the kinds of indices that can be migrated to data streams, but I don't know whether it's important to mention those here. Mentioning them would essentially duplicate the content of the docs for the migration API.", "url": "https://github.com/elastic/elasticsearch/pull/65979#discussion_r538658854", "createdAt": "2020-12-08T17:51:00Z", "author": {"login": "danhermann"}, "path": "docs/reference/data-streams/set-up-a-data-stream.asciidoc", "diffHunk": "@@ -154,6 +157,70 @@ PUT /_data_stream/my-data-stream\n // TEST[continued]\n // TEST[s/my-data-stream/my-data-stream-alt/]\n \n+[discrete]\n+[[convert-an-index-alias-to-a-data-stream]]\n+=== Convert an index alias to a data stream\n+\n+Prior to {es} 7.9, you would typically use an <<indices-aliases,index alias>>\n+with a write index to manage time series data. Data streams replace most of\n+this functionality and usually require less maintenance.\n+\n+To convert an index alias with a write index to a new data stream with the same\n+name, use the <<indices-migrate-to-data-stream,migrate to data stream API>>.\n+During conversion, the alias\u2019s indices become hidden backing indices for the\n+stream. The alias\u2019s write index becomes the stream\u2019s write index. Note the data\n+stream still requires a matching <<create-a-data-stream-template,index\n+template>>.\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "27a7c03089ed7e3116741d2e33be65ffc45e2d69"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "800ae627f6a312ad7992635701ebdc7796a3d68d", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/800ae627f6a312ad7992635701ebdc7796a3d68d", "committedDate": "2020-12-08T18:09:34Z", "message": "Relocate ds creation note"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4085, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}