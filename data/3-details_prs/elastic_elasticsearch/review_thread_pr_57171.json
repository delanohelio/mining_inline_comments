{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzMzkzODI5", "number": 57171, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxOTowNzoxOFrOD_zySA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxOTowNzoxOFrOD_zySA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4MjM1MzM2OnYy", "diffSide": "LEFT", "path": "x-pack/plugin/analytics/src/test/java/org/elasticsearch/xpack/analytics/normalize/NormalizeAggregatorTests.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxOTowNzoxOFrOGasV_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxOToyMDo0MFrOGasysQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDY0MjY4Ng==", "bodyText": "@polyfractal just pointed me to AggregatorTestCase#newIndexSearcher which seems to do that job. It has even less randomization, but it looks to be what we're moving the tests to.", "url": "https://github.com/elastic/elasticsearch/pull/57171#discussion_r430642686", "createdAt": "2020-05-26T19:07:18Z", "author": {"login": "nik9000"}, "path": "x-pack/plugin/analytics/src/test/java/org/elasticsearch/xpack/analytics/normalize/NormalizeAggregatorTests.java", "diffHunk": "@@ -160,7 +160,7 @@ private void testCase(ValuesSourceAggregationBuilder<?> aggBuilder, Consumer<Int\n             termFieldType.setHasDocValues(true);\n \n             try (IndexReader indexReader = DirectoryReader.open(directory)) {\n-                IndexSearcher indexSearcher = newSearcher(indexReader, true, true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f6384136812e1b5c34a5a96317b36d6b96ea70e"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDY0OTU1MA==", "bodyText": "what is the reasoning behind maybeWrapping? and why is it unsupported in some scenarios?", "url": "https://github.com/elastic/elasticsearch/pull/57171#discussion_r430649550", "createdAt": "2020-05-26T19:19:53Z", "author": {"login": "talevy"}, "path": "x-pack/plugin/analytics/src/test/java/org/elasticsearch/xpack/analytics/normalize/NormalizeAggregatorTests.java", "diffHunk": "@@ -160,7 +160,7 @@ private void testCase(ValuesSourceAggregationBuilder<?> aggBuilder, Consumer<Int\n             termFieldType.setHasDocValues(true);\n \n             try (IndexReader indexReader = DirectoryReader.open(directory)) {\n-                IndexSearcher indexSearcher = newSearcher(indexReader, true, true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDY0MjY4Ng=="}, "originalCommit": {"oid": "9f6384136812e1b5c34a5a96317b36d6b96ea70e"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDY1MDAzMw==", "bodyText": "and thank you for the heads up. I've updated to use the new method", "url": "https://github.com/elastic/elasticsearch/pull/57171#discussion_r430650033", "createdAt": "2020-05-26T19:20:40Z", "author": {"login": "talevy"}, "path": "x-pack/plugin/analytics/src/test/java/org/elasticsearch/xpack/analytics/normalize/NormalizeAggregatorTests.java", "diffHunk": "@@ -160,7 +160,7 @@ private void testCase(ValuesSourceAggregationBuilder<?> aggBuilder, Consumer<Int\n             termFieldType.setHasDocValues(true);\n \n             try (IndexReader indexReader = DirectoryReader.open(directory)) {\n-                IndexSearcher indexSearcher = newSearcher(indexReader, true, true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDY0MjY4Ng=="}, "originalCommit": {"oid": "9f6384136812e1b5c34a5a96317b36d6b96ea70e"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3906, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}