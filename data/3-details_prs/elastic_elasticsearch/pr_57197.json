{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzNzQyMDQ0", "number": 57197, "title": "Move classes from build scripts to buildSrc", "bodyText": "We should avoid having class declarations in build scripts.\n\nThey clutter the build scripts leaving them way less readable\nMoving class declarations into buildSrc allows us in addition\na) compile them as java;\nb) use build cache for their compilation\nProbably makes eventually porting build scripts to use the Kotlin DSL easier\n\n\nmoved Run task from root script\nmove duplicated SanEvaluator from x-pack/plugin/sql/qa/...\nmoved some task declarations along the way to use task avoidance api", "createdAt": "2020-05-27T10:00:06Z", "url": "https://github.com/elastic/elasticsearch/pull/57197", "merged": true, "mergeCommit": {"oid": "9e6b2a667d1de8331ce7877a789eb51d94c56c5e"}, "closed": true, "closedAt": "2020-06-02T08:33:15Z", "author": {"login": "breskeby"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclfbwJgFqTQxOTU4OTY1Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnPz0JABqjMzOTYyNzE2ODY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NTg5NjU2", "url": "https://github.com/elastic/elasticsearch/pull/57197#pullrequestreview-419589656", "createdAt": "2020-05-27T20:38:29Z", "commit": {"oid": "42c5b0b40c01299250a8f88e9b5ff6cf41196142"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMDozODoyOVrOGbcPrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMDozODoyOVrOGbcPrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQyNzUwMg==", "bodyText": "Man, this whole thing is a goofy hack. It's really just so we can alias :distribution:run as simply run and still pass along the CLI options.\n@rjernst since pretty much everyone just uses ./gradlew :run why don't we just move that task to the root project rather than creation it in the :distribution project and do this weird aliasing nonsense?", "url": "https://github.com/elastic/elasticsearch/pull/57197#discussion_r431427502", "createdAt": "2020-05-27T20:38:29Z", "author": {"login": "mark-vieira"}, "path": "buildSrc/src/main/java/org/elasticsearch/gradle/tasks/Run.java", "diffHunk": "@@ -0,0 +1,37 @@\n+package org.elasticsearch.gradle.tasks;\n+\n+import org.elasticsearch.gradle.testclusters.RunTask;\n+import org.gradle.api.DefaultTask;\n+import org.gradle.api.tasks.Internal;\n+import org.gradle.api.tasks.TaskProvider;\n+import org.gradle.api.tasks.options.Option;\n+\n+public class Run extends DefaultTask {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42c5b0b40c01299250a8f88e9b5ff6cf41196142"}, "originalPosition": 9}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "42c5b0b40c01299250a8f88e9b5ff6cf41196142", "author": {"user": {"login": "breskeby", "name": "Rene Groeschke"}}, "url": "https://github.com/elastic/elasticsearch/commit/42c5b0b40c01299250a8f88e9b5ff6cf41196142", "committedDate": "2020-05-27T09:58:15Z", "message": "Move classes from build scripts to buildSrc\n\n- move Run task\n- move duplicate SanEvaluator"}, "afterCommit": {"oid": "e495d3183deaab2e827f183a78b999a4ecd0a0be", "author": {"user": {"login": "breskeby", "name": "Rene Groeschke"}}, "url": "https://github.com/elastic/elasticsearch/commit/e495d3183deaab2e827f183a78b999a4ecd0a0be", "committedDate": "2020-05-28T14:56:53Z", "message": "Remove :run workaround"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMzI0ODM4", "url": "https://github.com/elastic/elasticsearch/pull/57197#pullrequestreview-421324838", "createdAt": "2020-05-29T22:10:27Z", "commit": {"oid": "366e8e2d6c00194b2471f4ff43ef929b8384870d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ea902ee7fd875cdaf678f6afcaeaa685320edd6", "author": {"user": {"login": "breskeby", "name": "Rene Groeschke"}}, "url": "https://github.com/elastic/elasticsearch/commit/4ea902ee7fd875cdaf678f6afcaeaa685320edd6", "committedDate": "2020-06-02T07:25:59Z", "message": "Move classes from build scripts to buildSrc\n\n- move Run task\n- move duplicate SanEvaluator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3a132e551c9673f3fc60aaaa742a2f3df311b29", "author": {"user": {"login": "breskeby", "name": "Rene Groeschke"}}, "url": "https://github.com/elastic/elasticsearch/commit/f3a132e551c9673f3fc60aaaa742a2f3df311b29", "committedDate": "2020-06-02T07:27:24Z", "message": "Remove :run workaround"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9d37d541d764df4055dae5028039d241e7c6c37", "author": {"user": {"login": "breskeby", "name": "Rene Groeschke"}}, "url": "https://github.com/elastic/elasticsearch/commit/c9d37d541d764df4055dae5028039d241e7c6c37", "committedDate": "2020-06-02T07:30:28Z", "message": "Some little cleanup on build scripts on the way"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "366e8e2d6c00194b2471f4ff43ef929b8384870d", "author": {"user": {"login": "breskeby", "name": "Rene Groeschke"}}, "url": "https://github.com/elastic/elasticsearch/commit/366e8e2d6c00194b2471f4ff43ef929b8384870d", "committedDate": "2020-05-28T15:10:18Z", "message": "Some little cleanup on build scripts on the way"}, "afterCommit": {"oid": "c9d37d541d764df4055dae5028039d241e7c6c37", "author": {"user": {"login": "breskeby", "name": "Rene Groeschke"}}, "url": "https://github.com/elastic/elasticsearch/commit/c9d37d541d764df4055dae5028039d241e7c6c37", "committedDate": "2020-06-02T07:30:28Z", "message": "Some little cleanup on build scripts on the way"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4218, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}