{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyMjAxNjA3", "number": 52027, "title": "Change privilege of enrich stats API to monitor", "bodyText": "The remote_monitoring_user user needs to access the enrich stats API.\nBut the request is denied because the API is categorized under admin.\nThe correct privilege should be monitor.\nresolves: #51677", "createdAt": "2020-02-07T02:15:56Z", "url": "https://github.com/elastic/elasticsearch/pull/52027", "merged": true, "mergeCommit": {"oid": "cb268859fc5c98944e1ab8a005d0653e995de910"}, "closed": true, "closedAt": "2020-05-28T13:04:53Z", "author": {"login": "ywangd"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcB1n4QAH2gAyMzcyMjAxNjA3OmE0YzJiYTgxMTA4MDFlMWM4NGUwZjE0ODUzYTZhZmMxMmZkODQ1MjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclsu7vAH2gAyMzcyMjAxNjA3OmI4Y2EzYjcyMTZkZTY5ZDA4Y2Y3MDQ5OTQ0YTRiODA3YjU3OTM3NDU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a4c2ba8110801e1c84e0f14853a6afc12fd84525", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/a4c2ba8110801e1c84e0f14853a6afc12fd84525", "committedDate": "2020-02-07T02:08:32Z", "message": "Initial attempt to get the API call to pass"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7cf90a23817062bdc87f832482fec44c5beacf8", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/a7cf90a23817062bdc87f832482fec44c5beacf8", "committedDate": "2020-02-07T03:37:05Z", "message": "Merge remote-tracking branch 'origin/master' into es-51677-enrich-stats-privilege"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d7d0de4140efe2edae4ebc62d3911ddb700f307", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/3d7d0de4140efe2edae4ebc62d3911ddb700f307", "committedDate": "2020-02-07T07:19:59Z", "message": "Add tests for changed action privileges"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6951f6be41ebd99360358b0dc8928036673633e", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/b6951f6be41ebd99360358b0dc8928036673633e", "committedDate": "2020-02-07T12:21:54Z", "message": "Update tests for better names"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9b4f37e633ef9e06d8dd5dbfbbeb625fb53dd65", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/e9b4f37e633ef9e06d8dd5dbfbbeb625fb53dd65", "committedDate": "2020-02-07T12:21:59Z", "message": "Merge remote-tracking branch 'origin/master' into es-51677-enrich-stats-privilege"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1NzQxMzYz", "url": "https://github.com/elastic/elasticsearch/pull/52027#pullrequestreview-355741363", "createdAt": "2020-02-10T07:59:44Z", "commit": {"oid": "e9b4f37e633ef9e06d8dd5dbfbbeb625fb53dd65"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1806d6312127edb4f47e6c0610dddae31b227e3", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/a1806d6312127edb4f47e6c0610dddae31b227e3", "committedDate": "2020-02-17T00:27:20Z", "message": "Merge remote-tracking branch 'origin/master' into es-51677-enrich-stats-privilege"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdf8a0a446064735cf818a33a49595a567e345f1", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/fdf8a0a446064735cf818a33a49595a567e345f1", "committedDate": "2020-02-17T01:47:08Z", "message": "Add smoke test for enrich stats API for mixed cluster"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5NDU4Mjk0", "url": "https://github.com/elastic/elasticsearch/pull/52027#pullrequestreview-359458294", "createdAt": "2020-02-17T02:15:04Z", "commit": {"oid": "fdf8a0a446064735cf818a33a49595a567e345f1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QwMjoxNTowNVrOFqW-GQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QwMjoxNTowNVrOFqW-GQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk2MDg1Nw==", "bodyText": "@tvernum This new test failed in a mixed cluster environment. Next steps are:\n\nMute this test\nMerge this PR once approved\nBackport and fix the bug in 7.x and merge\nAnother PR to unmute this test\n\nBut I feel it is a bit unwieldy just to stick to the backport workflow. Alternatively I could:\n\nFix this bug and merge to 7.x (so 7.x will be the shim)\nMerge this PR\n\nPlease let me know your thoughts on this. Thanks!", "url": "https://github.com/elastic/elasticsearch/pull/52027#discussion_r379960857", "createdAt": "2020-02-17T02:15:05Z", "author": {"login": "ywangd"}, "path": "x-pack/qa/rolling-upgrade/src/test/resources/rest-api-spec/test/mixed_cluster/100_enrich.yml", "diffHunk": "@@ -0,0 +1,7 @@\n+---\n+\"Enrich stats query smoke test for mixed cluster\":\n+\n+  - do:\n+      enrich.stats: {}\n+\n+  - length: { coordinator_stats: 3 }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fdf8a0a446064735cf818a33a49595a567e345f1"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "837aeedb36e3afff7b454217b601f236d6b4b081", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/837aeedb36e3afff7b454217b601f236d6b4b081", "committedDate": "2020-02-17T04:29:39Z", "message": "Mute test for enrich breaking change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00bdfa3ef8b5c5c75c3ee341c293c2bc71b0de80", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/00bdfa3ef8b5c5c75c3ee341c293c2bc71b0de80", "committedDate": "2020-02-17T07:40:45Z", "message": "Add node selector"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34c1ed26fa49c4c66db8f607929118409ca6da48", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/34c1ed26fa49c4c66db8f607929118409ca6da48", "committedDate": "2020-02-17T08:12:25Z", "message": "Temporarily disable one node_selector test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b24b17daa64d44c7f36a98bc2e3ec4020cadf9a8", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/b24b17daa64d44c7f36a98bc2e3ec4020cadf9a8", "committedDate": "2020-05-07T04:10:10Z", "message": "Merge remote-tracking branch 'origin/master' into es-51677-enrich-stats-privilege"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4709272109997542393bd5a9140fb295bb353e4b", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/4709272109997542393bd5a9140fb295bb353e4b", "committedDate": "2020-05-07T04:17:54Z", "message": "Update due to long hiatus"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44284851f06d0a49f110d4172ae41b75b147f549", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/44284851f06d0a49f110d4172ae41b75b147f549", "committedDate": "2020-05-07T04:37:14Z", "message": "Add bwc mount point to TransportNodesAction"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5ODA4MzE3", "url": "https://github.com/elastic/elasticsearch/pull/52027#pullrequestreview-419808317", "createdAt": "2020-05-28T06:23:51Z", "commit": {"oid": "44284851f06d0a49f110d4172ae41b75b147f549"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8ca3b7216de69d08cf7049944a4b807b5793745", "author": {"user": {"login": "ywangd", "name": "Yang Wang"}}, "url": "https://github.com/elastic/elasticsearch/commit/b8ca3b7216de69d08cf7049944a4b807b5793745", "committedDate": "2020-05-28T12:08:22Z", "message": "Merge remote-tracking branch 'origin/master' into es-51677-enrich-stats-privilege"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2644, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}