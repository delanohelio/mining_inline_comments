{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgzODA3Nzcz", "number": 53133, "title": "script_score query errors on negative scores", "bodyText": "7.5 and 7.6 had a regression that allowed for\nscript_score queries to have negative scores.\nWe have corrected this regression in #52478.\nThis is an addition to #52478 that adds\na test and release notes.", "createdAt": "2020-03-04T19:22:17Z", "url": "https://github.com/elastic/elasticsearch/pull/53133", "merged": true, "mergeCommit": {"oid": "7e2a9f58eed5bcc6afe702ba113a339700128383"}, "closed": true, "closedAt": "2020-03-05T19:23:40Z", "author": {"login": "mayya-sharipova"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKb9CjAH2gAyMzgzODA3NzczOjU1N2Y1YmU5MzBlZGYxYWE3ODA3ZGUyZDQzNzk4Y2MxNGEwMzQzY2Y=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKufLogFqTM2OTc0Mjc5NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "557f5be930edf1aa7807de2d43798cc14a0343cf", "author": {"user": {"login": "mayya-sharipova", "name": "Mayya Sharipova"}}, "url": "https://github.com/elastic/elasticsearch/commit/557f5be930edf1aa7807de2d43798cc14a0343cf", "committedDate": "2020-03-04T19:19:26Z", "message": "script_score query errors on negative scores\n\n7.5 and 7.6 had a regression that allowed for\nscript_score queries to have negative scores.\nWe have corrected this regression in #52478.\nThis is an addition to #52478 that adds\na test and release notes."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5MTM4MzM4", "url": "https://github.com/elastic/elasticsearch/pull/53133#pullrequestreview-369138338", "createdAt": "2020-03-04T21:32:15Z", "commit": {"oid": "557f5be930edf1aa7807de2d43798cc14a0343cf"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed6e118ddf249f7a92dc5b3820033d269cc6cf65", "author": {"user": {"login": "mayya-sharipova", "name": "Mayya Sharipova"}}, "url": "https://github.com/elastic/elasticsearch/commit/ed6e118ddf249f7a92dc5b3820033d269cc6cf65", "committedDate": "2020-03-05T16:31:57Z", "message": "Address feedback\n\nRemove yml test, add unit test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1263ec2a4ecdf73f1f72e3919a13503ecad6c298", "author": {"user": {"login": "mayya-sharipova", "name": "Mayya Sharipova"}}, "url": "https://github.com/elastic/elasticsearch/commit/1263ec2a4ecdf73f1f72e3919a13503ecad6c298", "committedDate": "2020-03-05T16:19:28Z", "message": "Address feedback\n\nRemove yml test, add unit test"}, "afterCommit": {"oid": "ed6e118ddf249f7a92dc5b3820033d269cc6cf65", "author": {"user": {"login": "mayya-sharipova", "name": "Mayya Sharipova"}}, "url": "https://github.com/elastic/elasticsearch/commit/ed6e118ddf249f7a92dc5b3820033d269cc6cf65", "committedDate": "2020-03-05T16:31:57Z", "message": "Address feedback\n\nRemove yml test, add unit test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NzQyNzk1", "url": "https://github.com/elastic/elasticsearch/pull/53133#pullrequestreview-369742795", "createdAt": "2020-03-05T16:54:56Z", "commit": {"oid": "ed6e118ddf249f7a92dc5b3820033d269cc6cf65"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNjo1NDo1NlrOFybsgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNjo1NDo1NlrOFybsgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQyNjg4Mw==", "bodyText": "For me this set of unit tests is quite straightforward + easy to understand. I think yml tests are slower to debug and are most helpful for testing the end-to-end integration. We recently added a set of testing guidelines that I think are really helpful: https://github.com/elastic/elasticsearch/blob/master/TESTING.asciidoc#what-kind-of-tests-should-i-write", "url": "https://github.com/elastic/elasticsearch/pull/53133#discussion_r388426883", "createdAt": "2020-03-05T16:54:56Z", "author": {"login": "jtibshirani"}, "path": "server/src/test/java/org/elasticsearch/search/query/ScriptScoreQueryTests.java", "diffHunk": "@@ -131,6 +131,14 @@ public void testExplainDefaultNoScore() throws IOException {\n         assertThat(explanation.getValue(), equalTo(2.0f));\n     }\n \n+    public void testScriptScoreErrorOnNegativeScore() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed6e118ddf249f7a92dc5b3820033d269cc6cf65"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1761, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}