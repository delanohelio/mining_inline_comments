{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzMjM1MDcw", "number": 63655, "title": "Simplify Snapshot ITs Further", "bodyText": "Removing some more duplication and redundant logic.\nAligning all timeouts to 30s (60s or even 10 minute timeouts should be unnecessary, if they aren't we should figure out why)\nRemove some usage of actionGet() in tests (it's just evil to suppress the stack-trace)", "createdAt": "2020-10-14T09:23:35Z", "url": "https://github.com/elastic/elasticsearch/pull/63655", "merged": true, "mergeCommit": {"oid": "a7a1c2445640bc40df463c96864c76f918a6fb35"}, "closed": true, "closedAt": "2020-10-14T16:05:10Z", "author": {"login": "original-brownbear"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSZowegH2gAyNTAzMjM1MDcwOjI4Njc3NDg5MTZjZjNkYzcwYWQzZThlMDYzZmNjNGUyZTYyZDljNDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSdPo2AFqTUwODM0OTEwMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2867748916cf3dc70ad3e8e063fcc4e2e62d9c49", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/2867748916cf3dc70ad3e8e063fcc4e2e62d9c49", "committedDate": "2020-10-14T09:20:01Z", "message": "Simplify Snapshot ITs Further\n\nRemoving some more duplication and redundant logic."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca166ae096d1b24d827e5f0a590a4235031791ee", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/ca166ae096d1b24d827e5f0a590a4235031791ee", "committedDate": "2020-10-14T10:42:59Z", "message": "Merge remote-tracking branch 'elastic/master' into simplify-snapshot-tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "039d4f6bd2c63de7eb86baa5cf0eff1225fd34d0", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/039d4f6bd2c63de7eb86baa5cf0eff1225fd34d0", "committedDate": "2020-10-14T10:58:56Z", "message": "fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4MjI5OTc3", "url": "https://github.com/elastic/elasticsearch/pull/63655#pullrequestreview-508229977", "createdAt": "2020-10-14T11:00:06Z", "commit": {"oid": "039d4f6bd2c63de7eb86baa5cf0eff1225fd34d0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMTowMDowNlrOHhNkfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMTowMDowNlrOHhNkfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDU4NzM5MQ==", "bodyText": "This actually fixes a bug, we just didn't see the bug in practice yet because we only used this method in tests with a single master node ...", "url": "https://github.com/elastic/elasticsearch/pull/63655#discussion_r504587391", "createdAt": "2020-10-14T11:00:06Z", "author": {"login": "original-brownbear"}, "path": "test/framework/src/main/java/org/elasticsearch/snapshots/AbstractSnapshotIntegTestCase.java", "diffHunk": "@@ -582,7 +538,7 @@ protected SnapshotInfo getSnapshot(String repository, String snapshot) {\n \n     protected void awaitMasterFinishRepoOperations() throws Exception {\n         logger.info(\"--> waiting for master to finish all repo operations on its SNAPSHOT pool\");\n-        final ThreadPool masterThreadPool = internalCluster().getMasterNodeInstance(ThreadPool.class);\n+        final ThreadPool masterThreadPool = internalCluster().getCurrentMasterNodeInstance(ThreadPool.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "039d4f6bd2c63de7eb86baa5cf0eff1225fd34d0"}, "originalPosition": 260}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4MzQ5MTAw", "url": "https://github.com/elastic/elasticsearch/pull/63655#pullrequestreview-508349100", "createdAt": "2020-10-14T13:32:12Z", "commit": {"oid": "039d4f6bd2c63de7eb86baa5cf0eff1225fd34d0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3942, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}