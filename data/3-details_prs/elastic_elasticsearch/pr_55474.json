{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2MTc2NjI5", "number": 55474, "title": "Allow Deleting Multiple Snapshots at Once", "bodyText": "Adds deleting multiple snapshots in one go without significantly changing the mechanics of snapshot deletes otherwise.\nThis change does not yet allow mixing snapshot delete and abort. Abort is still only allowed for a single snapshot delete by exact name.", "createdAt": "2020-04-20T16:44:25Z", "url": "https://github.com/elastic/elasticsearch/pull/55474", "merged": true, "mergeCommit": {"oid": "0da211f4356ba3e4a2137dfee9d02eefce5052f0"}, "closed": true, "closedAt": "2020-04-23T10:41:08Z", "author": {"login": "original-brownbear"}, "timelineItems": {"totalCount": 69, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABbrFF8_AH2gAyNDA2MTc2NjI5OjU0MGZmMWRlMzA2YTA3ZTA4ZTFkYWM0MWQ2OWE1NzBjYjFmMjgzOGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcaZuVcgH2gAyNDA2MTc2NjI5OjUzYmQ3YTdkMjc0NDUwMzYwZGIyMWNjYTM0OGIzOTVlNzBlMDJkNGI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "540ff1de306a07e08e1dac41d69a570cb1f2838f", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/540ff1de306a07e08e1dac41d69a570cb1f2838f", "committedDate": "2019-11-28T09:09:42Z", "message": "bck"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8bfdaa362fbfa82aeef426aeae88d66ee004c9c", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/e8bfdaa362fbfa82aeef426aeae88d66ee004c9c", "committedDate": "2019-11-28T20:05:11Z", "message": "Merge remote-tracking branch 'elastic/master' into multi-delete-snapshot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32fb757a953f91c53e746eee3e68ead299042270", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/32fb757a953f91c53e746eee3e68ead299042270", "committedDate": "2019-12-02T10:05:01Z", "message": "Merge remote-tracking branch 'elastic/master' into multi-delete-snapshot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3067bc5585e3e47866b8121605e4afbb7151845d", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/3067bc5585e3e47866b8121605e4afbb7151845d", "committedDate": "2019-12-02T12:25:02Z", "message": "works"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "add63fda3b00a7204239aa0c2d781c9b72fc149a", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/add63fda3b00a7204239aa0c2d781c9b72fc149a", "committedDate": "2019-12-02T12:25:18Z", "message": "Merge remote-tracking branch 'elastic/master' into multi-delete-snapshot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "703e727482fddea6c9a25d51f12719877e4750bd", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/703e727482fddea6c9a25d51f12719877e4750bd", "committedDate": "2019-12-03T11:01:15Z", "message": "Merge remote-tracking branch 'elastic/master' into multi-delete-snapshot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce320745ee5fbf2b16f240e9f3342242d5f4a6e0", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/ce320745ee5fbf2b16f240e9f3342242d5f4a6e0", "committedDate": "2019-12-03T12:53:36Z", "message": "bck"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ff185109d46d6937502e23ca2bb95f32858f384", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/7ff185109d46d6937502e23ca2bb95f32858f384", "committedDate": "2019-12-03T14:29:05Z", "message": "bck"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5cf930b549019ccf23a1f202c749e97af3002ba0", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/5cf930b549019ccf23a1f202c749e97af3002ba0", "committedDate": "2019-12-03T14:29:24Z", "message": "Merge remote-tracking branch 'elastic/master' into multi-delete-snapshot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7428e5f4ba630a9ec9df72f329f87184f958c20", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/e7428e5f4ba630a9ec9df72f329f87184f958c20", "committedDate": "2019-12-03T14:43:13Z", "message": "bck"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7588a93c2b18a1534fdf484e2d11eb682d2349b9", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/7588a93c2b18a1534fdf484e2d11eb682d2349b9", "committedDate": "2019-12-03T15:16:53Z", "message": "bck"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1984cc02c4bdd8ec0704b71411da8130bdbbf6a5", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/1984cc02c4bdd8ec0704b71411da8130bdbbf6a5", "committedDate": "2019-12-03T15:57:02Z", "message": "more multi"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e91a873b4a048718e972fbd243affa8b285cc001", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/e91a873b4a048718e972fbd243affa8b285cc001", "committedDate": "2019-12-03T16:37:45Z", "message": "works"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "116f95f2e363344b4d4d3d6ed3af5e2616fc586b", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/116f95f2e363344b4d4d3d6ed3af5e2616fc586b", "committedDate": "2019-12-03T16:38:28Z", "message": "Merge remote-tracking branch 'elastic/master' into multi-delete-snapshot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e88145918b480ab6c919e336cb81a975904b9521", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/e88145918b480ab6c919e336cb81a975904b9521", "committedDate": "2019-12-03T18:34:02Z", "message": "bck"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cc0c740d792d6e3453e23454434c4d31a119030", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/2cc0c740d792d6e3453e23454434c4d31a119030", "committedDate": "2019-12-10T08:05:49Z", "message": "Merge remote-tracking branch 'elastic/master' into multi-delete-snapshot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "609daad56efedb87fa283d552c2cec2cc522432e", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/609daad56efedb87fa283d552c2cec2cc522432e", "committedDate": "2019-12-10T12:03:00Z", "message": "Merge remote-tracking branch 'elastic/master' into multi-delete-snapshot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e72a50bfc6778bbf16b48c39be1c02b69a73877b", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/e72a50bfc6778bbf16b48c39be1c02b69a73877b", "committedDate": "2019-12-10T13:36:44Z", "message": "Merge remote-tracking branch 'elastic/master' into multi-delete-snapshot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffe5adb5f0ca70f6f03101fd23a82491ed8346fa", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/ffe5adb5f0ca70f6f03101fd23a82491ed8346fa", "committedDate": "2019-12-10T16:26:57Z", "message": "Merge remote-tracking branch 'elastic/master' into multi-delete-snapshot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "488f4e702631f6f03dde072b4a499fe40bbab0c1", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/488f4e702631f6f03dde072b4a499fe40bbab0c1", "committedDate": "2019-12-12T10:11:18Z", "message": "Merge remote-tracking branch 'elastic/master' into multi-delete-snapshot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92ab9d575ba06021e3afea6863305c84e64e7b03", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/92ab9d575ba06021e3afea6863305c84e64e7b03", "committedDate": "2019-12-12T11:09:46Z", "message": "bck"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f192cb5ea7cc60477cfb1b9b1518dbfdf4461e41", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/f192cb5ea7cc60477cfb1b9b1518dbfdf4461e41", "committedDate": "2019-12-12T14:55:26Z", "message": "Merge remote-tracking branch 'elastic/master' into multi-delete-snapshot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "821c36ae3b96f4c0b736b6c58dbc180029b97eb8", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/821c36ae3b96f4c0b736b6c58dbc180029b97eb8", "committedDate": "2019-12-12T15:21:34Z", "message": "bck"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "522b6fa1350e4768a5d14134916677e8ee733086", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/522b6fa1350e4768a5d14134916677e8ee733086", "committedDate": "2019-12-12T15:28:19Z", "message": "drop it for now"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9bd055a724f946948fabdd35997ca29f9410e73", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/d9bd055a724f946948fabdd35997ca29f9410e73", "committedDate": "2020-04-20T13:24:50Z", "message": "Merge branch 'multi-delete-snapshot' into multi-delete-snapshot-v2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e074040fb9cbda6cb9b0fff0096f4f92d897d67", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/0e074040fb9cbda6cb9b0fff0096f4f92d897d67", "committedDate": "2020-04-20T13:44:30Z", "message": "fixed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d1b3c8e4aa7eabf30e8c9de97ac6f2e8256586c", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/4d1b3c8e4aa7eabf30e8c9de97ac6f2e8256586c", "committedDate": "2020-04-20T14:33:57Z", "message": "Merge remote-tracking branch 'elastic/master' into multi-delete-snapshot-v2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4123baeabdb86934b2be2414b0e55963ea446ae", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/b4123baeabdb86934b2be2414b0e55963ea446ae", "committedDate": "2020-04-20T14:42:15Z", "message": "dead code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75d2eef25efc8702fb45a43c5cfe18241469c686", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/75d2eef25efc8702fb45a43c5cfe18241469c686", "committedDate": "2020-04-20T15:22:57Z", "message": "mroe stuff"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f5ff303c946d6e0e8a53bcc5d41f9da7ccf1695", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/4f5ff303c946d6e0e8a53bcc5d41f9da7ccf1695", "committedDate": "2020-04-20T15:46:50Z", "message": "fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf170bfb5836c4d33f68b1691c0eacd6f8385628", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/bf170bfb5836c4d33f68b1691c0eacd6f8385628", "committedDate": "2020-04-20T15:54:48Z", "message": "nicer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c0db754257782fc39aa5e7e240306a6c5b9b30a", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/8c0db754257782fc39aa5e7e240306a6c5b9b30a", "committedDate": "2020-04-20T16:14:30Z", "message": "nicer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21bc7564d53c50ec8784a7ba342722380f7d460f", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/21bc7564d53c50ec8784a7ba342722380f7d460f", "committedDate": "2020-04-20T16:43:34Z", "message": "works better"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "841e0160e21aff90bdbdfb2156aaf514ac8135ee", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/841e0160e21aff90bdbdfb2156aaf514ac8135ee", "committedDate": "2020-04-20T16:46:48Z", "message": "simpler"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5cd97062e2e0493bec2a08b901ec1b5d07e54834", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/5cd97062e2e0493bec2a08b901ec1b5d07e54834", "committedDate": "2020-04-20T16:51:46Z", "message": "nicer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36dd5d51811a7eabfe015e1fba7742f72747a4d0", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/36dd5d51811a7eabfe015e1fba7742f72747a4d0", "committedDate": "2020-04-20T18:48:28Z", "message": "fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3772426297448d64ea3258d03ecc7b5ca02beebf", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/3772426297448d64ea3258d03ecc7b5ca02beebf", "committedDate": "2020-04-20T18:50:04Z", "message": "Merge remote-tracking branch 'elastic/master' into multi-delete-snapshot-v2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b7f76b445519dbed96c10a53aeafd37a06c7dee", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/4b7f76b445519dbed96c10a53aeafd37a06c7dee", "committedDate": "2020-04-20T19:08:23Z", "message": "shorter diff"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a85f127bf38f41ee465406d81d092d75d88aea01", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/a85f127bf38f41ee465406d81d092d75d88aea01", "committedDate": "2020-04-20T19:13:17Z", "message": "revert naming stuff"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0775d489fd5fbaffd209c4b4ba2cea4cd117c7a", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/e0775d489fd5fbaffd209c4b4ba2cea4cd117c7a", "committedDate": "2020-04-20T19:16:59Z", "message": "assert"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b894d580e03f4bd64e08f4def68278212fa06e5e", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/b894d580e03f4bd64e08f4def68278212fa06e5e", "committedDate": "2020-04-20T19:51:35Z", "message": "shorter diff"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6d51899c4850616f52bbf10d30f55108c9f1f90", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/e6d51899c4850616f52bbf10d30f55108c9f1f90", "committedDate": "2020-04-20T19:59:57Z", "message": "shorter diff"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44cf43286aa2467256e24dcbae357b03559ee74c", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/44cf43286aa2467256e24dcbae357b03559ee74c", "committedDate": "2020-04-20T20:00:54Z", "message": "shorter diff"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7002a15c089bd080d4242fdb6d6ba8b17a2a2eb6", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/7002a15c089bd080d4242fdb6d6ba8b17a2a2eb6", "committedDate": "2020-04-20T20:02:12Z", "message": "shorter diff"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bda3e6e3a3d3da5aafcd7ff96359595d2970b149", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/bda3e6e3a3d3da5aafcd7ff96359595d2970b149", "committedDate": "2020-04-20T20:04:13Z", "message": "shorter diff"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b84152803fdec34a6c3f0f416beecee1a437d60e", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/b84152803fdec34a6c3f0f416beecee1a437d60e", "committedDate": "2020-04-20T20:06:07Z", "message": "shorter diff"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e02710e0e873232e162bb63b1236940dfacda132", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/e02710e0e873232e162bb63b1236940dfacda132", "committedDate": "2020-04-20T20:06:54Z", "message": "shorter diff"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d6bfb5f4cce77bc35e17573fbf6912843de5ab3", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/9d6bfb5f4cce77bc35e17573fbf6912843de5ab3", "committedDate": "2020-04-20T20:08:15Z", "message": "shorter diff"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4cb1dd52eeb017e212b587c1c055132fe96a2179", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/4cb1dd52eeb017e212b587c1c055132fe96a2179", "committedDate": "2020-04-20T20:11:23Z", "message": "shorter diff"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9171d599b46509c328961ea9cb169468e971631", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/b9171d599b46509c328961ea9cb169468e971631", "committedDate": "2020-04-20T20:12:30Z", "message": "shorter diff"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4ca634f2f3b678c3a3ceab1425b52d77c274424", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/f4ca634f2f3b678c3a3ceab1425b52d77c274424", "committedDate": "2020-04-21T06:28:07Z", "message": "Merge remote-tracking branch 'elastic/master' into multi-delete-snapshot-v2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf48d12fd6b1e36037e1a98d61e18d1ada85092f", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/bf48d12fd6b1e36037e1a98d61e18d1ada85092f", "committedDate": "2020-04-21T06:31:02Z", "message": "shorter diff"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eada6f28400a1062af859789eae4050a85c760de", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/eada6f28400a1062af859789eae4050a85c760de", "committedDate": "2020-04-21T06:32:24Z", "message": "shorter diff"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8440aef3c3c10e56a4290ed5abd1f30e5f10bd10", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/8440aef3c3c10e56a4290ed5abd1f30e5f10bd10", "committedDate": "2020-04-21T06:34:11Z", "message": "fix docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "151ae507f758c434ad731158542413bef4436800", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/151ae507f758c434ad731158542413bef4436800", "committedDate": "2020-04-21T06:40:52Z", "message": "docs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3MDMwNDAw", "url": "https://github.com/elastic/elasticsearch/pull/55474#pullrequestreview-397030400", "createdAt": "2020-04-21T06:44:45Z", "commit": {"oid": "151ae507f758c434ad731158542413bef4436800"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwNjo0NDo0NVrOGI1OLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwNjo0NDo0NVrOGI1OLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTkxMzc3Mw==", "bodyText": "String, String... is really dirty I know, but it's a massive change-set to adjust this API since we use it in so many places in tests so I figured I'd keep it this way for now.", "url": "https://github.com/elastic/elasticsearch/pull/55474#discussion_r411913773", "createdAt": "2020-04-21T06:44:45Z", "author": {"login": "original-brownbear"}, "path": "server/src/main/java/org/elasticsearch/client/ClusterAdminClient.java", "diffHunk": "@@ -529,7 +529,7 @@\n     /**\n      * Delete snapshot.\n      */\n-    DeleteSnapshotRequestBuilder prepareDeleteSnapshot(String repository, String snapshot);\n+    DeleteSnapshotRequestBuilder prepareDeleteSnapshot(String repository, String... snapshot);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "151ae507f758c434ad731158542413bef4436800"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8bfb7b2079dce60887cc75b8b455281aa5cdf52b", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/8bfb7b2079dce60887cc75b8b455281aa5cdf52b", "committedDate": "2020-04-21T06:56:01Z", "message": "rearrange stuff"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a12e52070e5c69db09a386192fcf93e876190b60", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/a12e52070e5c69db09a386192fcf93e876190b60", "committedDate": "2020-04-21T07:04:41Z", "message": "shorter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ebf708965e28045302904e1fd2f9a2880dce2f7", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/2ebf708965e28045302904e1fd2f9a2880dce2f7", "committedDate": "2020-04-21T07:24:49Z", "message": "some improvemnts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a392ec6366a25bb746820a87f0766b0d93a11da", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/0a392ec6366a25bb746820a87f0766b0d93a11da", "committedDate": "2020-04-21T07:34:16Z", "message": "some improvemnts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "704d984a21fc46d9163e6cab814d6e47b73542aa", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/704d984a21fc46d9163e6cab814d6e47b73542aa", "committedDate": "2020-04-21T08:25:30Z", "message": "lets keep it simple"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ebf4599efd97cead834988d6dc47a7e2e4202d0d", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/ebf4599efd97cead834988d6dc47a7e2e4202d0d", "committedDate": "2020-04-21T10:46:59Z", "message": "Merge remote-tracking branch 'elastic/master' into multi-delete-snapshot-v2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b41bab3838ecd231ca4a17d4466118210d88ded6", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/b41bab3838ecd231ca4a17d4466118210d88ded6", "committedDate": "2020-04-21T10:48:23Z", "message": "update javadoc wording"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c413dd983b5b316bdaf6daf0bc9cfb19714c90f1", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/c413dd983b5b316bdaf6daf0bc9cfb19714c90f1", "committedDate": "2020-04-21T14:26:07Z", "message": "Merge remote-tracking branch 'elastic/master' into multi-delete-snapshot-v2"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3OTQ3NzU0", "url": "https://github.com/elastic/elasticsearch/pull/55474#pullrequestreview-397947754", "createdAt": "2020-04-22T08:13:37Z", "commit": {"oid": "c413dd983b5b316bdaf6daf0bc9cfb19714c90f1"}, "state": "COMMENTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwODoxMzozN1rOGJpaqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwODo0MzozMVrOGJqvnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjc2ODkzNw==", "bodyText": "Can you make this use varargs instead?", "url": "https://github.com/elastic/elasticsearch/pull/55474#discussion_r412768937", "createdAt": "2020-04-22T08:13:37Z", "author": {"login": "ywelsch"}, "path": "server/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/delete/DeleteSnapshotRequest.java", "diffHunk": "@@ -54,8 +54,18 @@ public DeleteSnapshotRequest() {\n      * @param snapshot   snapshot name\n      */\n     public DeleteSnapshotRequest(String repository, String snapshot) {\n+        this(repository, new String[]{snapshot});\n+    }\n+\n+        /**\n+         * Constructs a new delete snapshots request with repository and snapshot name\n+         *\n+         * @param repository repository name\n+         * @param snapshots  snapshot names\n+         */\n+    public DeleteSnapshotRequest(String repository, String[] snapshots) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c413dd983b5b316bdaf6daf0bc9cfb19714c90f1"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjc3MTIxOQ==", "bodyText": "use varargs here as well in case clients are using this directly (transportt client in 7.x)", "url": "https://github.com/elastic/elasticsearch/pull/55474#discussion_r412771219", "createdAt": "2020-04-22T08:16:43Z", "author": {"login": "ywelsch"}, "path": "server/src/main/java/org/elasticsearch/action/admin/cluster/snapshots/delete/DeleteSnapshotRequestBuilder.java", "diffHunk": "@@ -39,8 +39,8 @@ public DeleteSnapshotRequestBuilder(ElasticsearchClient client, DeleteSnapshotAc\n     /**\n      * Constructs delete snapshot request builder with specified repository and snapshot names\n      */\n-    public DeleteSnapshotRequestBuilder(ElasticsearchClient client, DeleteSnapshotAction action, String repository, String snapshot) {\n-        super(client, action, new DeleteSnapshotRequest(repository, snapshot));\n+    public DeleteSnapshotRequestBuilder(ElasticsearchClient client, DeleteSnapshotAction action, String repository, String[] snapshots) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c413dd983b5b316bdaf6daf0bc9cfb19714c90f1"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjc3MzYyMA==", "bodyText": "varargs", "url": "https://github.com/elastic/elasticsearch/pull/55474#discussion_r412773620", "createdAt": "2020-04-22T08:20:07Z", "author": {"login": "ywelsch"}, "path": "server/src/main/java/org/elasticsearch/client/Requests.java", "diffHunk": "@@ -502,14 +502,14 @@ public static RestoreSnapshotRequest restoreSnapshotRequest(String repository, S\n     }\n \n     /**\n-     * Deletes a snapshot\n+     * Deletes snapshots\n      *\n-     * @param snapshot   snapshot name\n+     * @param snapshots  snapshot names\n      * @param repository repository name\n      * @return delete snapshot request\n      */\n-    public static DeleteSnapshotRequest deleteSnapshotRequest(String repository, String snapshot) {\n-        return new DeleteSnapshotRequest(repository, snapshot);\n+    public static DeleteSnapshotRequest deleteSnapshotRequest(String repository, String[] snapshots) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c413dd983b5b316bdaf6daf0bc9cfb19714c90f1"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjc3NjgwNw==", "bodyText": "why did you opt for having one entry for multiple snapshots? Should we rather have one entry per snapshot that is to be deleted?\nIf we build it that way, could it allow us to queue up multiple deletes in the future?", "url": "https://github.com/elastic/elasticsearch/pull/55474#discussion_r412776807", "createdAt": "2020-04-22T08:24:29Z", "author": {"login": "ywelsch"}, "path": "server/src/main/java/org/elasticsearch/cluster/SnapshotDeletionsInProgress.java", "diffHunk": "@@ -167,29 +173,35 @@ public String toString() {\n      * A class representing a snapshot deletion request entry in the cluster state.\n      */\n     public static final class Entry implements Writeable, RepositoryOperation {\n-        private final Snapshot snapshot;\n+        private final List<SnapshotId> snapshots;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c413dd983b5b316bdaf6daf0bc9cfb19714c90f1"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjc4ODE5NA==", "bodyText": "do we need to throw a Concurrent...Exception in case where there is SnapshotsInProgress.Entry but we did not look at aborting it?", "url": "https://github.com/elastic/elasticsearch/pull/55474#discussion_r412788194", "createdAt": "2020-04-22T08:40:02Z", "author": {"login": "ywelsch"}, "path": "server/src/main/java/org/elasticsearch/snapshots/SnapshotsService.java", "diffHunk": "@@ -993,8 +999,23 @@ public void deleteSnapshot(final String repositoryName, final String snapshotNam\n \n             @Override\n             public ClusterState execute(ClusterState currentState) {\n+                if (snapshotNames.size() > 1 && currentState.nodes().getMinNodeVersion().before(MULTI_DELETE_VERSION)) {\n+                    throw new IllegalArgumentException(\"Deleting multiple snapshots in a single request is only supported in version [ \"\n+                            + MULTI_DELETE_VERSION + \"] but cluster contained node of version [\" + currentState.nodes().getMinNodeVersion()\n+                            + \"]\");\n+                }\n                 final SnapshotsInProgress snapshots = currentState.custom(SnapshotsInProgress.TYPE);\n-                final SnapshotsInProgress.Entry snapshotEntry = findInProgressSnapshot(snapshots, snapshotName, repositoryName);\n+                final SnapshotsInProgress.Entry snapshotEntry;\n+                if (snapshotNames.size() == 1) {\n+                    final String snapshotName = snapshotNames.iterator().next();\n+                    if (Regex.isSimpleMatchPattern(snapshotName)) {\n+                        snapshotEntry = null;\n+                    } else {\n+                        snapshotEntry = findInProgressSnapshot(snapshots, snapshotName, repositoryName);\n+                    }\n+                } else {\n+                    snapshotEntry = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c413dd983b5b316bdaf6daf0bc9cfb19714c90f1"}, "originalPosition": 86}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjc4OTQzMQ==", "bodyText": "do we need a set? Isn't there a risk that we're adding the same item multiple times if there are overlapping wildcards?", "url": "https://github.com/elastic/elasticsearch/pull/55474#discussion_r412789431", "createdAt": "2020-04-22T08:41:45Z", "author": {"login": "ywelsch"}, "path": "server/src/main/java/org/elasticsearch/snapshots/SnapshotsService.java", "diffHunk": "@@ -1109,6 +1118,30 @@ public void clusterStateProcessed(String source, ClusterState oldState, ClusterS\n         });\n     }\n \n+    private static List<SnapshotId> matchingSnapshotIds(RepositoryData repositoryData, Collection<String> snapshotsOrPatterns,\n+                                                        String repositoryName) {\n+        final Map<String, SnapshotId> allSnapshotIds = repositoryData.getSnapshotIds().stream().collect(\n+                Collectors.toMap(SnapshotId::getName, Function.identity()));\n+        final List<SnapshotId> foundSnapshots = new ArrayList<>();\n+        for (String snapshotOrPattern : snapshotsOrPatterns) {\n+            if (Regex.isSimpleMatchPattern(snapshotOrPattern) == false) {\n+                final SnapshotId foundId = allSnapshotIds.get(snapshotOrPattern);\n+                if (foundId == null) {\n+                    throw new SnapshotMissingException(repositoryName, snapshotOrPattern);\n+                } else {\n+                    foundSnapshots.add(allSnapshotIds.get(snapshotOrPattern));\n+                }\n+            } else {\n+                for (Map.Entry<String, SnapshotId> entry : allSnapshotIds.entrySet()) {\n+                    if (Regex.simpleMatch(snapshotOrPattern, entry.getKey())) {\n+                        foundSnapshots.add(entry.getValue());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c413dd983b5b316bdaf6daf0bc9cfb19714c90f1"}, "originalPosition": 146}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjc5MDY4NQ==", "bodyText": "add a note that this should only be done once all nodes are on >= minVersion.", "url": "https://github.com/elastic/elasticsearch/pull/55474#discussion_r412790685", "createdAt": "2020-04-22T08:43:31Z", "author": {"login": "ywelsch"}, "path": "x-pack/plugin/ilm/src/main/java/org/elasticsearch/xpack/slm/SnapshotRetentionTask.java", "diffHunk": "@@ -362,6 +362,7 @@ void deleteSnapshots(Map<String, List<SnapshotInfo>> snapshotsToDelete,\n             for (SnapshotInfo info : snapshots) {\n                 final String policyId = getPolicyId(info);\n                 final long deleteStartTime = nowNanoSupplier.getAsLong();\n+                // TODO: Use snapshot multi-delete instead of this loop", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c413dd983b5b316bdaf6daf0bc9cfb19714c90f1"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2da9bc63b3ea2e985011dc4bd173fe18c3527f1", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/d2da9bc63b3ea2e985011dc4bd173fe18c3527f1", "committedDate": "2020-04-22T08:49:15Z", "message": "Merge remote-tracking branch 'elastic/master' into multi-delete-snapshot-v2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0efa76fadc5079cfa396290818b45f2d352ad9cb", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/0efa76fadc5079cfa396290818b45f2d352ad9cb", "committedDate": "2020-04-22T09:33:02Z", "message": "CR comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4OTE5NjQz", "url": "https://github.com/elastic/elasticsearch/pull/55474#pullrequestreview-398919643", "createdAt": "2020-04-23T09:26:02Z", "commit": {"oid": "0efa76fadc5079cfa396290818b45f2d352ad9cb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53bd7a7d274450360db21cca348b395e70e02d4b", "author": {"user": {"login": "original-brownbear", "name": "Armin Braun"}}, "url": "https://github.com/elastic/elasticsearch/commit/53bd7a7d274450360db21cca348b395e70e02d4b", "committedDate": "2020-04-23T09:46:21Z", "message": "Merge remote-tracking branch 'elastic/master' into multi-delete-snapshot-v2"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 734, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}