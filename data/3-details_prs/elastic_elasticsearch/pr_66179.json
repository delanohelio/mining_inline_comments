{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM2MDM2MjE0", "number": 66179, "title": "Show -Dlicense.key value in test repro info", "bodyText": "When a -Dlicense.key sys property is passed to the build we want to consider\nthis in the test reproduction info message\nabsolute Paths tried to be converted to relative paths relative to workspace\nroot to allow simply copy & paste\nAlso fixes a inconsistency for checking license existence in x-pack plugin core build", "createdAt": "2020-12-10T15:53:21Z", "url": "https://github.com/elastic/elasticsearch/pull/66179", "merged": true, "mergeCommit": {"oid": "2b2b8a35df935e2472f3a3a3f0bdd507434cc94e"}, "closed": true, "closedAt": "2020-12-12T18:42:41Z", "author": {"login": "breskeby"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdk7v-1gFqTU0OTY4NTA3OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdlN041AFqTU1MDU0ODc2NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5Njg1MDc5", "url": "https://github.com/elastic/elasticsearch/pull/66179#pullrequestreview-549685079", "createdAt": "2020-12-10T23:10:20Z", "commit": {"oid": "f72743165870a2eda2069e981242436baa0a9bb4"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQyMzoxMDoyMFrOIDhsDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQyMzoxNToxNFrOIDh0qA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDU2ODU4OA==", "bodyText": "This line seems to be duplicated?", "url": "https://github.com/elastic/elasticsearch/pull/66179#discussion_r540568588", "createdAt": "2020-12-10T23:10:20Z", "author": {"login": "rjernst"}, "path": "test/framework/src/main/java/org/elasticsearch/test/junit/listeners/ReproduceInfoPrinter.java", "diffHunk": "@@ -181,10 +182,32 @@ private ReproduceErrorMessageBuilder appendESProperties() {\n             appendOpt(\"tests.timezone\", TimeZone.getDefault().getID());\n             appendOpt(\"tests.distribution\", System.getProperty(\"tests.distribution\"));\n             appendOpt(\"runtime.java\", Integer.toString(JavaVersion.current().getVersion().get(0)));\n+            appendOpt(\"runtime.java\", Integer.toString(JavaVersion.current().getVersion().get(0)));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f72743165870a2eda2069e981242436baa0a9bb4"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDU3MDc5Mg==", "bodyText": "Is this necessary once the fix is made in xpack to use Gradle's file resolution to get the path relative to the root project? With that change, and using a relative path in CI, shouldn't the reproduction line should just work for devs copying it from CI to their machines?", "url": "https://github.com/elastic/elasticsearch/pull/66179#discussion_r540570792", "createdAt": "2020-12-10T23:15:14Z", "author": {"login": "rjernst"}, "path": "test/framework/src/main/java/org/elasticsearch/test/junit/listeners/ReproduceInfoPrinter.java", "diffHunk": "@@ -181,10 +182,32 @@ private ReproduceErrorMessageBuilder appendESProperties() {\n             appendOpt(\"tests.timezone\", TimeZone.getDefault().getID());\n             appendOpt(\"tests.distribution\", System.getProperty(\"tests.distribution\"));\n             appendOpt(\"runtime.java\", Integer.toString(JavaVersion.current().getVersion().get(0)));\n+            appendOpt(\"runtime.java\", Integer.toString(JavaVersion.current().getVersion().get(0)));\n+            appendOpt(\"license.key\", relativePath(System.getProperty(\"licence.key\")));\n             appendOpt(ESTestCase.FIPS_SYSPROP, System.getProperty(ESTestCase.FIPS_SYSPROP));\n             return this;\n         }\n \n+        private String relativePath(String pathProperty) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f72743165870a2eda2069e981242436baa0a9bb4"}, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8a3c266a134b71116158421b39b08d710af1b05", "author": {"user": {"login": "breskeby", "name": "Rene Groeschke"}}, "url": "https://github.com/elastic/elasticsearch/commit/a8a3c266a134b71116158421b39b08d710af1b05", "committedDate": "2020-12-11T19:13:03Z", "message": "Show -Dlicense.key value in test repro info\n\n- When a -Dlicense.key sys property is passed to the build we want to consider\nthis in the test reproduction info message\n- absolute Paths tried to be converted to relative paths relative to workspace\nroot to allow simply copy & paste\n- Also fixes a inconsistency for checking license existence in x-pack plugin core build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ad4e9451f3984a44a61d2a38824702e89583ccb", "author": {"user": {"login": "breskeby", "name": "Rene Groeschke"}}, "url": "https://github.com/elastic/elasticsearch/commit/7ad4e9451f3984a44a61d2a38824702e89583ccb", "committedDate": "2020-12-11T19:13:04Z", "message": "Remove unrequired path relativizer for licence repro info"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70a72aa8e354c0cfbf039c1e477e137e9b12ddf2", "author": {"user": {"login": "breskeby", "name": "Rene Groeschke"}}, "url": "https://github.com/elastic/elasticsearch/commit/70a72aa8e354c0cfbf039c1e477e137e9b12ddf2", "committedDate": "2020-12-11T19:13:04Z", "message": "Remove duplicate line in repro output"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "85ce4ce7da0122ba02de78f139face7e18cc0b9c", "author": {"user": {"login": "breskeby", "name": "Rene Groeschke"}}, "url": "https://github.com/elastic/elasticsearch/commit/85ce4ce7da0122ba02de78f139face7e18cc0b9c", "committedDate": "2020-12-11T18:57:53Z", "message": "Remove duplicate line in repro output"}, "afterCommit": {"oid": "70a72aa8e354c0cfbf039c1e477e137e9b12ddf2", "author": {"user": {"login": "breskeby", "name": "Rene Groeschke"}}, "url": "https://github.com/elastic/elasticsearch/commit/70a72aa8e354c0cfbf039c1e477e137e9b12ddf2", "committedDate": "2020-12-11T19:13:04Z", "message": "Remove duplicate line in repro output"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwNTQ4NzY0", "url": "https://github.com/elastic/elasticsearch/pull/66179#pullrequestreview-550548764", "createdAt": "2020-12-11T20:18:58Z", "commit": {"oid": "70a72aa8e354c0cfbf039c1e477e137e9b12ddf2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4564, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}