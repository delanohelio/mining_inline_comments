{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAxODU4NzA0", "number": 63580, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQyMjo0NDowMFrOEszXMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQyMjo0NDowMFrOEszXMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1NDE0MzIxOnYy", "diffSide": "RIGHT", "path": "server/src/internalClusterTest/java/org/elasticsearch/snapshots/CloneSnapshotIT.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQyMjo0NDowMFrOHgPeug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxMDo1NjowM1rOHgg-lw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzU3MDEwNg==", "bodyText": "It's mildly annoying that we have to do this kind of thing again (we had this issue in tests with the snapshot INIT step as well). There is a reasonable fix here I think (I'll try it when I can find some time but probably not too soon) but for now I opted to just fix the test.", "url": "https://github.com/elastic/elasticsearch/pull/63580#discussion_r503570106", "createdAt": "2020-10-12T22:44:00Z", "author": {"login": "original-brownbear"}, "path": "server/src/internalClusterTest/java/org/elasticsearch/snapshots/CloneSnapshotIT.java", "diffHunk": "@@ -377,6 +378,9 @@ public void testMasterFailoverDuringCloneStep1() throws Exception {\n \n         awaitNoMoreRunningOperations(internalCluster().getMasterName());\n \n+        // Check if the clone operation worked out by chance as a result of the clone request being retried because of the master failover\n+        cloneSucceeded = cloneSucceeded ||", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "02fdce6a3eee485f838d8ed451de7da7c9434cd5"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzczNDgzOQ==", "bodyText": "Maybe add a //TODO or a descriptive comment somewhere in the code?", "url": "https://github.com/elastic/elasticsearch/pull/63580#discussion_r503734839", "createdAt": "2020-10-13T07:43:42Z", "author": {"login": "tlrx"}, "path": "server/src/internalClusterTest/java/org/elasticsearch/snapshots/CloneSnapshotIT.java", "diffHunk": "@@ -377,6 +378,9 @@ public void testMasterFailoverDuringCloneStep1() throws Exception {\n \n         awaitNoMoreRunningOperations(internalCluster().getMasterName());\n \n+        // Check if the clone operation worked out by chance as a result of the clone request being retried because of the master failover\n+        cloneSucceeded = cloneSucceeded ||", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzU3MDEwNg=="}, "originalCommit": {"oid": "02fdce6a3eee485f838d8ed451de7da7c9434cd5"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzg1Njc5MQ==", "bodyText": "Added :) in the relevant spots in 060020a", "url": "https://github.com/elastic/elasticsearch/pull/63580#discussion_r503856791", "createdAt": "2020-10-13T10:56:03Z", "author": {"login": "original-brownbear"}, "path": "server/src/internalClusterTest/java/org/elasticsearch/snapshots/CloneSnapshotIT.java", "diffHunk": "@@ -377,6 +378,9 @@ public void testMasterFailoverDuringCloneStep1() throws Exception {\n \n         awaitNoMoreRunningOperations(internalCluster().getMasterName());\n \n+        // Check if the clone operation worked out by chance as a result of the clone request being retried because of the master failover\n+        cloneSucceeded = cloneSucceeded ||", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzU3MDEwNg=="}, "originalCommit": {"oid": "02fdce6a3eee485f838d8ed451de7da7c9434cd5"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2952, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}