{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE1MzkzNTIz", "number": 64590, "title": "Add configurable op_type for index watcher action", "bodyText": "This allows the index action to work with data streams which require an op_type of create.\nFixes #64535", "createdAt": "2020-11-04T13:42:04Z", "url": "https://github.com/elastic/elasticsearch/pull/64590", "merged": true, "mergeCommit": {"oid": "ad71547001fa407eeb01d41d5d15592ab7001d03"}, "closed": true, "closedAt": "2020-11-05T13:09:56Z", "author": {"login": "danhermann"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZN8LHAH2gAyNTE1MzkzNTIzOmU4OTQ4MjgyYzJiYTlkNzNlODcwM2JlNDdiNzRmNDMzYWIyMjdlOTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZSW9vgH2gAyNTE1MzkzNTIzOjExODczOWQ3Yjc3YzQ4NjEwYWFjZDE2ZTAyZmM4YTlkNGNjODUyNmE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e8948282c2ba9d73e8703be47b74f433ab227e96", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/e8948282c2ba9d73e8703be47b74f433ab227e96", "committedDate": "2020-11-04T13:39:50Z", "message": "add configurable op_type for index watcher action"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzNDQ1NjQw", "url": "https://github.com/elastic/elasticsearch/pull/64590#pullrequestreview-523445640", "createdAt": "2020-11-04T15:01:42Z", "commit": {"oid": "e8948282c2ba9d73e8703be47b74f433ab227e96"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxNTowMTo0MlrOHtcE5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxNTowMTo0MlrOHtcE5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzQwNzk3Mw==", "bodyText": "maybe validate that only create or index op type can be used?", "url": "https://github.com/elastic/elasticsearch/pull/64590#discussion_r517407973", "createdAt": "2020-11-04T15:01:42Z", "author": {"login": "martijnvg"}, "path": "x-pack/plugin/watcher/src/main/java/org/elasticsearch/xpack/watcher/actions/index/IndexAction.java", "diffHunk": "@@ -143,6 +156,13 @@ public static IndexAction parse(String watchId, String actionId, XContentParser\n             } else if (token == XContentParser.Token.VALUE_STRING) {\n                 if (Field.DOC_ID.match(currentFieldName, parser.getDeprecationHandler())) {\n                     docId = parser.text();\n+                } else if (Field.OP_TYPE.match(currentFieldName, parser.getDeprecationHandler())) {\n+                    try {\n+                        opType = DocWriteRequest.OpType.fromString(parser.text());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e8948282c2ba9d73e8703be47b74f433ab227e96"}, "originalPosition": 85}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe61aaa7be00b549bae3d862d8f9e87ff7889951", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/fe61aaa7be00b549bae3d862d8f9e87ff7889951", "committedDate": "2020-11-04T17:08:04Z", "message": "limit to index and create op_types"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0706985104f6a93699c887bb899e881a7ace7c16", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/0706985104f6a93699c887bb899e881a7ace7c16", "committedDate": "2020-11-04T17:26:26Z", "message": "fix test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "118739d7b77c48610aacd16e02fc8a9d4cc8526a", "author": {"user": {"login": "danhermann", "name": "Dan Hermann"}}, "url": "https://github.com/elastic/elasticsearch/commit/118739d7b77c48610aacd16e02fc8a9d4cc8526a", "committedDate": "2020-11-04T18:48:43Z", "message": "update docs"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 812, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}