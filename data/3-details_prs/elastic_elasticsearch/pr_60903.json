{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1NTI2NjIw", "number": 60903, "title": "[DOCS] Move post filter/rescore content to new page", "bodyText": "Moves post filter and rescored search content to a new Filter search results page from the deprecated request body search page.\nAdds related redirects and adjusts headings.", "createdAt": "2020-08-10T14:12:39Z", "url": "https://github.com/elastic/elasticsearch/pull/60903", "merged": true, "mergeCommit": {"oid": "00881d9f0d9204d104b8c72593a1ba6b875ae0e9"}, "closed": true, "closedAt": "2020-08-11T12:51:23Z", "author": {"login": "jrodewig"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc9jOAHAH2gAyNDY1NTI2NjIwOmI5NmMxMjBhMTI0MmIyYTQ4NzBiMzc0NjYxZGQwYTQ1OGExNDhhZTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc9poihgH2gAyNDY1NTI2NjIwOjk4YjkwOGI0OWJkY2I4OWIzNzY5NzlkYmNhMWFhMjZhMmM5YjQ4YWM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b96c120a1242b2a4870b374661dd0a458a148ae6", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/b96c120a1242b2a4870b374661dd0a458a148ae6", "committedDate": "2020-08-10T14:37:26Z", "message": "[DOCS] Move post filter/rescore content to new page\n\nMoves post filter and rescored search content to a new `Filter search\nresults` page from the deprecated request body search page.\n\nAdds related redirects and adjusts headings."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1f46c179769642b8987cf274b4c2c79363f6481b", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/1f46c179769642b8987cf274b4c2c79363f6481b", "committedDate": "2020-08-10T14:14:24Z", "message": "reword"}, "afterCommit": {"oid": "b96c120a1242b2a4870b374661dd0a458a148ae6", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/b96c120a1242b2a4870b374661dd0a458a148ae6", "committedDate": "2020-08-10T14:37:26Z", "message": "[DOCS] Move post filter/rescore content to new page\n\nMoves post filter and rescored search content to a new `Filter search\nresults` page from the deprecated request body search page.\n\nAdds related redirects and adjusts headings."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0MzY0NDY3", "url": "https://github.com/elastic/elasticsearch/pull/60903#pullrequestreview-464364467", "createdAt": "2020-08-10T15:58:13Z", "commit": {"oid": "b96c120a1242b2a4870b374661dd0a458a148ae6"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNTo1ODoxM1rOG-VITw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNjowMDoyMlrOG-VNgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAxMTA4Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            You can use two methods to filter search results:\n          \n          \n            \n            Use one of the following methods to filter search results:", "url": "https://github.com/elastic/elasticsearch/pull/60903#discussion_r468011087", "createdAt": "2020-08-10T15:58:13Z", "author": {"login": "lockewritesdocs"}, "path": "docs/reference/search/filter-search-results.asciidoc", "diffHunk": "@@ -0,0 +1,18 @@\n+[[filter-search-results]]\n+== Filter search results\n+\n+You can use two methods to filter search results:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b96c120a1242b2a4870b374661dd0a458a148ae6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAxMTQ4OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Use a boolean query with a `filter` query clause. Search requests apply\n          \n          \n            \n            boolean filters to both search hits and <<search-aggregations,aggregations>>.\n          \n          \n            \n            See <<query-dsl-bool-query,boolean query>>.\n          \n          \n            \n            * Use a boolean query with a `filter` query clause. Search requests apply\n          \n          \n            \n            <<query-dsl-bool-query,boolean filters>> to both search hits and <<search-aggregations,aggregations>>.", "url": "https://github.com/elastic/elasticsearch/pull/60903#discussion_r468011489", "createdAt": "2020-08-10T15:58:54Z", "author": {"login": "lockewritesdocs"}, "path": "docs/reference/search/filter-search-results.asciidoc", "diffHunk": "@@ -0,0 +1,18 @@\n+[[filter-search-results]]\n+== Filter search results\n+\n+You can use two methods to filter search results:\n+\n+* Use a boolean query with a `filter` query clause. Search requests apply\n+boolean filters to both search hits and <<search-aggregations,aggregations>>.\n+See <<query-dsl-bool-query,boolean query>>.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b96c120a1242b2a4870b374661dd0a458a148ae6"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAxMjE0MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Use the search API's `post_filter` parameter. Search requests apply post\n          \n          \n            \n            filters only to search hits, not aggregations. See <<post-filter>>.\n          \n          \n            \n            * Use the search API's `post_filter` parameter. Search requests apply \n          \n          \n            \n            <<post-filter,post filters>> only to search hits, not aggregations.", "url": "https://github.com/elastic/elasticsearch/pull/60903#discussion_r468012140", "createdAt": "2020-08-10T15:59:56Z", "author": {"login": "lockewritesdocs"}, "path": "docs/reference/search/filter-search-results.asciidoc", "diffHunk": "@@ -0,0 +1,18 @@\n+[[filter-search-results]]\n+== Filter search results\n+\n+You can use two methods to filter search results:\n+\n+* Use a boolean query with a `filter` query clause. Search requests apply\n+boolean filters to both search hits and <<search-aggregations,aggregations>>.\n+See <<query-dsl-bool-query,boolean query>>.\n+\n+* Use the search API's `post_filter` parameter. Search requests apply post\n+filters only to search hits, not aggregations. See <<post-filter>>.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b96c120a1242b2a4870b374661dd0a458a148ae6"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAxMjQxNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If wanted, you can also <<rescore,rescore>> hits after the post filter to\n          \n          \n            \n            improve relevance and reorder results. See <<rescore>>.\n          \n          \n            \n            You can also <<rescore,rescore>> hits after the post filter to\n          \n          \n            \n            improve relevance and reorder results.", "url": "https://github.com/elastic/elasticsearch/pull/60903#discussion_r468012416", "createdAt": "2020-08-10T16:00:22Z", "author": {"login": "lockewritesdocs"}, "path": "docs/reference/search/filter-search-results.asciidoc", "diffHunk": "@@ -0,0 +1,18 @@\n+[[filter-search-results]]\n+== Filter search results\n+\n+You can use two methods to filter search results:\n+\n+* Use a boolean query with a `filter` query clause. Search requests apply\n+boolean filters to both search hits and <<search-aggregations,aggregations>>.\n+See <<query-dsl-bool-query,boolean query>>.\n+\n+* Use the search API's `post_filter` parameter. Search requests apply post\n+filters only to search hits, not aggregations. See <<post-filter>>.\n++\n+If wanted, you can also <<rescore,rescore>> hits after the post filter to\n+improve relevance and reorder results. See <<rescore>>.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b96c120a1242b2a4870b374661dd0a458a148ae6"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03cd309f6bea950445965b7d1dab88fd1a18d471", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/03cd309f6bea950445965b7d1dab88fd1a18d471", "committedDate": "2020-08-10T16:23:34Z", "message": "Update docs/reference/search/filter-search-results.asciidoc\n\nCo-authored-by: Adam Locke <adam.locke@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5811372eeadca2b400968b59a413959e158327f", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/f5811372eeadca2b400968b59a413959e158327f", "committedDate": "2020-08-10T16:23:42Z", "message": "Update docs/reference/search/filter-search-results.asciidoc\n\nCo-authored-by: Adam Locke <adam.locke@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc7d2a8215006ae5f8fc5f58eb1688ba531b67a7", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/fc7d2a8215006ae5f8fc5f58eb1688ba531b67a7", "committedDate": "2020-08-10T16:24:12Z", "message": "Update docs/reference/search/filter-search-results.asciidoc\n\nCo-authored-by: Adam Locke <adam.locke@elastic.co>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0NTk0NzAw", "url": "https://github.com/elastic/elasticsearch/pull/60903#pullrequestreview-464594700", "createdAt": "2020-08-10T21:17:31Z", "commit": {"oid": "fc7d2a8215006ae5f8fc5f58eb1688ba531b67a7"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMToxNzozMlrOG-gHyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMToyODo0MVrOG-gb8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE5MTE3OQ==", "bodyText": "I'd put the emphasis more on what the user is trying to accomplish than the mechanics at this level. Something like:\nYou can filter search results by including a filter clause within the query itself, or by applying a post filter. When you include a filter clause in a Boolean query, the filter applies to both the search hits and aggregations. When you use a post filter, the filter only applies to the search hits. Using a post filter enables you calculate aggregations based on a broader result set, and then further narrow the results.", "url": "https://github.com/elastic/elasticsearch/pull/60903#discussion_r468191179", "createdAt": "2020-08-10T21:17:32Z", "author": {"login": "debadair"}, "path": "docs/reference/search/filter-search-results.asciidoc", "diffHunk": "@@ -0,0 +1,18 @@\n+[[filter-search-results]]\n+== Filter search results\n+\n+You can use two methods to filter search results:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fc7d2a8215006ae5f8fc5f58eb1688ba531b67a7"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE5NjMzNw==", "bodyText": "This is a bit awkward because the parameter isn't applied, the filter is. Maybe:\nWhen you use the post_filter parameter to filter search results, the search hits are filtered after the aggregations are calculated. A post filter has no impact on the aggregation results.", "url": "https://github.com/elastic/elasticsearch/pull/60903#discussion_r468196337", "createdAt": "2020-08-10T21:28:41Z", "author": {"login": "debadair"}, "path": "docs/reference/search/request/post-filter.asciidoc", "diffHunk": "@@ -1,8 +1,9 @@\n-[[request-body-search-post-filter]]\n-==== Post filter\n+[discrete]\n+[[post-filter]]\n+=== Post filter\n \n-The `post_filter` is applied to the search `hits` at the very end of a search\n-request,  after aggregations have already been calculated. Its purpose is\n+The `post_filter` parameter is applied to the search `hits` at the very end of a search", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fc7d2a8215006ae5f8fc5f58eb1688ba531b67a7"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98b908b49bdcb89b376979dbca1aa26a2c9b48ac", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/98b908b49bdcb89b376979dbca1aa26a2c9b48ac", "committedDate": "2020-08-10T22:05:51Z", "message": "Address feedback"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3343, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}