{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0NDYzMzI2", "number": 53184, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxOTo0Nzo1NFrODlj4QA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxOTo0Nzo1NFrODlj4QA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNzExNzQ0OnYy", "diffSide": "RIGHT", "path": "buildSrc/src/main/java/org/elasticsearch/gradle/test/rest/CopyRestApiTask.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxOTo0Nzo1NFrOFyhoPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQyMDoxMzo1NVrOFyidiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODUyNDA5NQ==", "bodyText": "The fact we are calling the path prefix for api specs COPY_TO I think makes this hard to follow. I'm thinking \"why are we referencing the copy destination when filtering sources?\". If we are going to use this constant for both purposes, we should rename it appropriately, something like API_SPEC_PREFIX.", "url": "https://github.com/elastic/elasticsearch/pull/53184#discussion_r388524095", "createdAt": "2020-03-05T19:47:54Z", "author": {"login": "mark-vieira"}, "path": "buildSrc/src/main/java/org/elasticsearch/gradle/test/rest/CopyRestApiTask.java", "diffHunk": "@@ -132,7 +132,11 @@ void copy() {\n             project.copy(c -> {\n                 c.from(project.zipTree(coreConfig.getSingleFile()));\n                 c.into(getTestSourceSet().getOutput().getResourcesDir()); // this ends up as the same dir as outputDir\n-                c.include(includeCore.get().stream().map(prefix -> COPY_TO + \"/\" + prefix + \"*/**\").collect(Collectors.toList()));\n+                if (includeCore.get().isEmpty()) {\n+                    c.include(COPY_TO + \"/**\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "66d5f324642eede0bdb3c26236f685eaff8b1a5d"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODUzNzczNg==", "bodyText": "Renamed COPY_TO to REST_API_PREFIX and REST_TEST_PREFIX on  f8459c9", "url": "https://github.com/elastic/elasticsearch/pull/53184#discussion_r388537736", "createdAt": "2020-03-05T20:13:55Z", "author": {"login": "jakelandis"}, "path": "buildSrc/src/main/java/org/elasticsearch/gradle/test/rest/CopyRestApiTask.java", "diffHunk": "@@ -132,7 +132,11 @@ void copy() {\n             project.copy(c -> {\n                 c.from(project.zipTree(coreConfig.getSingleFile()));\n                 c.into(getTestSourceSet().getOutput().getResourcesDir()); // this ends up as the same dir as outputDir\n-                c.include(includeCore.get().stream().map(prefix -> COPY_TO + \"/\" + prefix + \"*/**\").collect(Collectors.toList()));\n+                if (includeCore.get().isEmpty()) {\n+                    c.include(COPY_TO + \"/**\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODUyNDA5NQ=="}, "originalCommit": {"oid": "66d5f324642eede0bdb3c26236f685eaff8b1a5d"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3440, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}