{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc2NDcyNTg4", "number": 61755, "title": "Backport all Painless compiler extensibility changes", "bodyText": "This backport incorporates all the changes to improve compiler extensibility. The reason for this backport is the changes are now required to support runtime fields.", "createdAt": "2020-08-31T18:53:33Z", "url": "https://github.com/elastic/elasticsearch/pull/61755", "merged": true, "mergeCommit": {"oid": "6fac8478ef83e4e685009c12ae41ffdd41668f2f"}, "closed": true, "closedAt": "2020-09-16T16:32:01Z", "author": {"login": "jdconrad"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdFTVMSABqjM3MjU2MjYxMDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJeLm1gH2gAyNDc2NDcyNTg4OmU3NTJkYWQ2NzE3ZjE1NDYwMmY4MjFkNWQ4OTBhZWMzOTMzMzc4Mjg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "13cef513fa3eab91e8f0ec781c10ef0700812cc5", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/13cef513fa3eab91e8f0ec781c10ef0700812cc5", "committedDate": "2020-09-03T16:26:30Z", "message": "response to pr comments"}, "afterCommit": {"oid": "c07866879c3eac6a0e5bcd82fff22d65f52af057", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/c07866879c3eac6a0e5bcd82fff22d65f52af057", "committedDate": "2020-09-03T16:35:15Z", "message": "response to pr comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e601f5c9e2d21fcfb21d79f834d066c1f2c6860", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/4e601f5c9e2d21fcfb21d79f834d066c1f2c6860", "committedDate": "2020-09-14T15:48:16Z", "message": "backport all compiler extensibility changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9baf1d6483527d88e401712d9a9e3d44b8b4a67f", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/9baf1d6483527d88e401712d9a9e3d44b8b4a67f", "committedDate": "2020-09-14T15:48:16Z", "message": "fix node ordering for string concatenation in compound assignment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae614ddb40c90fb8cefd3c7a0a86c867bff66118", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/ae614ddb40c90fb8cefd3c7a0a86c867bff66118", "committedDate": "2020-09-14T15:48:17Z", "message": "fix string concatenation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9242a62d4eaed403af95851a1de12db5de531694", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/9242a62d4eaed403af95851a1de12db5de531694", "committedDate": "2020-09-14T15:48:17Z", "message": "response to pr comments"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c07866879c3eac6a0e5bcd82fff22d65f52af057", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/c07866879c3eac6a0e5bcd82fff22d65f52af057", "committedDate": "2020-09-03T16:35:15Z", "message": "response to pr comments"}, "afterCommit": {"oid": "9242a62d4eaed403af95851a1de12db5de531694", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/9242a62d4eaed403af95851a1de12db5de531694", "committedDate": "2020-09-14T15:48:17Z", "message": "response to pr comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4OTI5MzM2", "url": "https://github.com/elastic/elasticsearch/pull/61755#pullrequestreview-488929336", "createdAt": "2020-09-15T17:54:59Z", "commit": {"oid": "9242a62d4eaed403af95851a1de12db5de531694"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNzo1NDo1OVrOHSNj-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNzo1NDo1OVrOHSNj-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODg1ODYxOQ==", "bodyText": "This is line.isBlank() in master, should master be updated?", "url": "https://github.com/elastic/elasticsearch/pull/61755#discussion_r488858619", "createdAt": "2020-09-15T17:54:59Z", "author": {"login": "stu-elastic"}, "path": "modules/lang-painless/spi/src/main/java/org/elasticsearch/painless/spi/WhitelistLoader.java", "diffHunk": "@@ -460,11 +460,11 @@ public static Whitelist loadFromResourceFiles(Class<?> resource, Map<String, Whi\n \n         List<Object> annotations;\n \n-        line = line.trim();\n-\n-        if (line.isEmpty()) {\n+        if (\"\".equals(line.replaceAll(\"\\\\s+\",\"\"))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9242a62d4eaed403af95851a1de12db5de531694"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4OTM0OTIy", "url": "https://github.com/elastic/elasticsearch/pull/61755#pullrequestreview-488934922", "createdAt": "2020-09-15T18:02:53Z", "commit": {"oid": "9242a62d4eaed403af95851a1de12db5de531694"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxODowMjo1M1rOHSN1NQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxODowMjo1M1rOHSN1NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODg2MzAyOQ==", "bodyText": "Do we need to keep the 6.4 back compat code here?", "url": "https://github.com/elastic/elasticsearch/pull/61755#discussion_r488863029", "createdAt": "2020-09-15T18:02:53Z", "author": {"login": "stu-elastic"}, "path": "modules/lang-painless/src/main/java/org/elasticsearch/painless/action/PainlessExecuteAction.java", "diffHunk": "@@ -284,15 +284,8 @@ static Request parse(XContentParser parser) throws IOException {\n         Request(StreamInput in) throws IOException {\n             super(in);\n             script = new Script(in);\n-            if (in.getVersion().before(Version.V_6_4_0)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9242a62d4eaed403af95851a1de12db5de531694"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4OTM1NTY1", "url": "https://github.com/elastic/elasticsearch/pull/61755#pullrequestreview-488935565", "createdAt": "2020-09-15T18:03:50Z", "commit": {"oid": "9242a62d4eaed403af95851a1de12db5de531694"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxODowMzo1MFrOHSN3Bg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxODowMzo1MFrOHSN3Bg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODg2MzQ5NA==", "bodyText": "Do we need to keep the 6.4 back compat code here?", "url": "https://github.com/elastic/elasticsearch/pull/61755#discussion_r488863494", "createdAt": "2020-09-15T18:03:50Z", "author": {"login": "stu-elastic"}, "path": "modules/lang-painless/src/main/java/org/elasticsearch/painless/action/PainlessExecuteAction.java", "diffHunk": "@@ -328,12 +321,8 @@ public ActionRequestValidationException validate() {\n         public void writeTo(StreamOutput out) throws IOException {\n             super.writeTo(out);\n             script.writeTo(out);\n-            if (out.getVersion().before(Version.V_6_4_0)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9242a62d4eaed403af95851a1de12db5de531694"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4OTQ0MDAw", "url": "https://github.com/elastic/elasticsearch/pull/61755#pullrequestreview-488944000", "createdAt": "2020-09-15T18:15:45Z", "commit": {"oid": "9242a62d4eaed403af95851a1de12db5de531694"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxODoxNTo0NVrOHSOQeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxODoxNTo0NVrOHSOQeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODg3MDAwOQ==", "bodyText": "After we get this into 7.x, let's fix these up in master to cleanup future backport.", "url": "https://github.com/elastic/elasticsearch/pull/61755#discussion_r488870009", "createdAt": "2020-09-15T18:15:45Z", "author": {"login": "stu-elastic"}, "path": "modules/lang-painless/spi/src/main/java/org/elasticsearch/painless/spi/WhitelistLoader.java", "diffHunk": "@@ -502,20 +502,20 @@ public static Whitelist loadFromResourceFiles(Class<?> resource, Map<String, Whi\n                         if (argumentKeyValue.length != 2) {\n                             throw new IllegalArgumentException(\"invalid annotation: expected key=\\\"value\\\" [\" + line + \"]\");\n                         }\n-                        \n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9242a62d4eaed403af95851a1de12db5de531694"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4OTUxOTQw", "url": "https://github.com/elastic/elasticsearch/pull/61755#pullrequestreview-488951940", "createdAt": "2020-09-15T18:27:08Z", "commit": {"oid": "9242a62d4eaed403af95851a1de12db5de531694"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxODoyNzowOFrOHSOoSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxODoyNzowOFrOHSOoSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODg3NjEwNw==", "bodyText": "Take a pass on these yml changes.", "url": "https://github.com/elastic/elasticsearch/pull/61755#discussion_r488876107", "createdAt": "2020-09-15T18:27:08Z", "author": {"login": "stu-elastic"}, "path": "modules/lang-painless/src/yamlRestTest/resources/rest-api-spec/test/painless/110_script_score_boost.yml", "diffHunk": "@@ -1,8 +1,8 @@\n # Integration tests for ScriptScoreQuery using Painless\n setup:\n   - skip:\n-      version: \" - 7.6.99\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9242a62d4eaed403af95851a1de12db5de531694"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4OTUyMDAw", "url": "https://github.com/elastic/elasticsearch/pull/61755#pullrequestreview-488952000", "createdAt": "2020-09-15T18:27:13Z", "commit": {"oid": "9242a62d4eaed403af95851a1de12db5de531694"}, "state": "APPROVED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxODoyNzoxM1rOHSOoig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxODoyNzo0NFrOHSOpqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODg3NjE3MA==", "bodyText": "Take a pass on these yml changes.", "url": "https://github.com/elastic/elasticsearch/pull/61755#discussion_r488876170", "createdAt": "2020-09-15T18:27:13Z", "author": {"login": "stu-elastic"}, "path": "modules/lang-painless/src/yamlRestTest/resources/rest-api-spec/test/painless/15_update.yml", "diffHunk": "@@ -20,7 +20,6 @@\n               params: { bar: 'xxx' }\n \n   - match: { _index:   test_1 }\n-  - match: { _type:    _doc   }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9242a62d4eaed403af95851a1de12db5de531694"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODg3NjIzNA==", "bodyText": "Take a pass on these yml changes.", "url": "https://github.com/elastic/elasticsearch/pull/61755#discussion_r488876234", "createdAt": "2020-09-15T18:27:21Z", "author": {"login": "stu-elastic"}, "path": "modules/lang-painless/src/yamlRestTest/resources/rest-api-spec/test/painless/20_scriptfield.yml", "diffHunk": "@@ -151,6 +151,6 @@ setup:\n     - match: { error.type: \"search_phase_execution_exception\" }\n     - match: { error.reason: \"all shards failed\" }\n     - match: { error.failed_shards.0.reason.caused_by.type: \"illegal_argument_exception\" }\n-    - match: { error.failed_shards.0.reason.caused_by.reason: \"While loop has no escape.\" }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9242a62d4eaed403af95851a1de12db5de531694"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODg3NjI5NQ==", "bodyText": "Take a pass on these yml changes.", "url": "https://github.com/elastic/elasticsearch/pull/61755#discussion_r488876295", "createdAt": "2020-09-15T18:27:28Z", "author": {"login": "stu-elastic"}, "path": "modules/lang-painless/src/yamlRestTest/resources/rest-api-spec/test/painless/30_search.yml", "diffHunk": "@@ -452,10 +452,6 @@\n ---\n \n \"Exception on negative score\":\n-    - skip:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9242a62d4eaed403af95851a1de12db5de531694"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODg3NjM1Nw==", "bodyText": "Take a pass on these yml changes.", "url": "https://github.com/elastic/elasticsearch/pull/61755#discussion_r488876357", "createdAt": "2020-09-15T18:27:33Z", "author": {"login": "stu-elastic"}, "path": "modules/lang-painless/src/yamlRestTest/resources/rest-api-spec/test/painless/70_mov_fn_agg.yml", "diffHunk": "@@ -1,9 +1,6 @@\n # Sanity integration test to make sure the custom context and whitelist work for moving_fn pipeline agg\n #\n setup:\n-  - skip:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9242a62d4eaed403af95851a1de12db5de531694"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODg3NjQxMw==", "bodyText": "Take a pass on these yml changes.", "url": "https://github.com/elastic/elasticsearch/pull/61755#discussion_r488876413", "createdAt": "2020-09-15T18:27:39Z", "author": {"login": "stu-elastic"}, "path": "modules/lang-painless/src/yamlRestTest/resources/rest-api-spec/test/painless/80_script_score.yml", "diffHunk": "@@ -1,10 +1,5 @@\n # Integration tests for ScriptScoreQuery using Painless\n \n-setup:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9242a62d4eaed403af95851a1de12db5de531694"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODg3NjQ1OA==", "bodyText": "Take a pass on these yml changes.", "url": "https://github.com/elastic/elasticsearch/pull/61755#discussion_r488876458", "createdAt": "2020-09-15T18:27:44Z", "author": {"login": "stu-elastic"}, "path": "modules/lang-painless/src/yamlRestTest/resources/rest-api-spec/test/painless/90_interval_query_filter.yml", "diffHunk": "@@ -1,8 +1,4 @@\n setup:\n-  - skip:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9242a62d4eaed403af95851a1de12db5de531694"}, "originalPosition": 2}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e752dad6717f154602f821d5d890aec393337828", "author": {"user": {"login": "jdconrad", "name": "Jack Conradson"}}, "url": "https://github.com/elastic/elasticsearch/commit/e752dad6717f154602f821d5d890aec393337828", "committedDate": "2020-09-16T15:32:23Z", "message": "fix some changes"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 57, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}