{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyMDQ2NjI4", "number": 55085, "title": "Fix TranslogTests#testStats", "bodyText": "This test failed because it was executed too fast :D. If creating the first translog generation and checking the translog stats happen within the same second, then the earliestLastModifiedAge will be zero.\nCloses #55064", "createdAt": "2020-04-10T19:58:34Z", "url": "https://github.com/elastic/elasticsearch/pull/55085", "merged": true, "mergeCommit": {"oid": "521ba9b1c91a484fbe151845b269a52fe7ced794"}, "closed": true, "closedAt": "2020-04-11T13:26:57Z", "author": {"login": "dnhatn"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcWWlUCgH2gAyNDAyMDQ2NjI4OjliMmM1Y2VhMjkyNzI4OTZiMGM1MzYzZTMxZDg3ODI0MjU1ODBhZDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcWiEEdAFqTM5MTc1MDQyNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9b2c5cea29272896b0c5363e31d8782425580ad1", "author": {"user": {"login": "dnhatn", "name": "Nhat Nguyen"}}, "url": "https://github.com/elastic/elasticsearch/commit/9b2c5cea29272896b0c5363e31d8782425580ad1", "committedDate": "2020-04-10T19:51:05Z", "message": "Fix TranslogTests#testStats"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNzUwNDA0", "url": "https://github.com/elastic/elasticsearch/pull/55085#pullrequestreview-391750404", "createdAt": "2020-04-11T09:13:16Z", "commit": {"oid": "9b2c5cea29272896b0c5363e31d8782425580ad1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMVQwOToxMzoxN1rOGELu8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMVQwOToxMzoxN1rOGELu8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAzOTcyOA==", "bodyText": "I think we should eventually fix the time source used by the translog to not be System.currentTimeMillis() here and use the ThreadPool time suppliers we already use elsewhere. But for now this should be fine :)", "url": "https://github.com/elastic/elasticsearch/pull/55085#discussion_r407039728", "createdAt": "2020-04-11T09:13:17Z", "author": {"login": "original-brownbear"}, "path": "server/src/test/java/org/elasticsearch/index/translog/TranslogTests.java", "diffHunk": "@@ -419,6 +419,8 @@ public void testFindEarliestLastModifiedAge() throws IOException {\n     }\n \n     public void testStats() throws IOException {\n+        assertThat(translog.getCurrent().getLastModifiedTime(), lessThanOrEqualTo(System.currentTimeMillis()));\n+        long lastModifiedAge = System.currentTimeMillis() - translog.getCurrent().getLastModifiedTime();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b2c5cea29272896b0c5363e31d8782425580ad1"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNzUwNDI2", "url": "https://github.com/elastic/elasticsearch/pull/55085#pullrequestreview-391750426", "createdAt": "2020-04-11T09:13:38Z", "commit": {"oid": "9b2c5cea29272896b0c5363e31d8782425580ad1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3484, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}