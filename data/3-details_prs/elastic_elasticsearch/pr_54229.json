{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzODAwNjQ0", "number": 54229, "title": "Allow keystore add to handle multiple settings", "bodyText": "Today the keystore add command can only handle adding a single setting/value pair in a single invocation. This incurs the startup costs of the JVM many times, which in some environments can be expensive. This commit teaches the add keystore command to accept adding multiple settings in a single invocation.\nCloses #54191", "createdAt": "2020-03-25T20:05:35Z", "url": "https://github.com/elastic/elasticsearch/pull/54229", "merged": true, "mergeCommit": {"oid": "e8e8b163cc37bc8168a0fb2e10cf244c3669a43e"}, "closed": true, "closedAt": "2020-03-26T02:19:46Z", "author": {"login": "jasontedor"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRNJjsAH2gAyMzkzODAwNjQ0Ojk5YzZiMjIwMDM2NTNlYTYzYWI3Y2Y5YmY4YTk3NjI5NDA3ZGJkZTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRRkA1gH2gAyMzkzODAwNjQ0OmU4MjJmMTkyMzc5Y2FiMmY0NWIxMTVkNmNlOTEwMjRhYzBhY2Y1ZjM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "99c6b22003653ea63ab7cf9bf8a97629407dbde1", "author": {"user": {"login": "jasontedor", "name": "Jason Tedor"}}, "url": "https://github.com/elastic/elasticsearch/commit/99c6b22003653ea63ab7cf9bf8a97629407dbde1", "committedDate": "2020-03-25T20:02:00Z", "message": "Allow keystore add to handle multiple settings\n\nToday the keystore add command can only handle adding a single\nsetting/value pair in a single invocation. This incurs the startup costs\nof the JVM many times, which in some environments can be expensive. This\ncommit teaches the add keystore command to accept adding multiple\nsettings in a single invocation."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e08bca8eeeb3998ace9dd4b40eab9a7385b10ba1", "author": {"user": {"login": "jasontedor", "name": "Jason Tedor"}}, "url": "https://github.com/elastic/elasticsearch/commit/e08bca8eeeb3998ace9dd4b40eab9a7385b10ba1", "committedDate": "2020-03-25T20:15:31Z", "message": "Fix checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f66508d42bff2a4c0b462d6778f2d4b13e80902", "author": {"user": {"login": "jasontedor", "name": "Jason Tedor"}}, "url": "https://github.com/elastic/elasticsearch/commit/9f66508d42bff2a4c0b462d6778f2d4b13e80902", "committedDate": "2020-03-25T20:15:45Z", "message": "Merge remote-tracking branch 'elastic/master' into keystore-add-multiple-settings"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxNTM4Nzgx", "url": "https://github.com/elastic/elasticsearch/pull/54229#pullrequestreview-381538781", "createdAt": "2020-03-25T21:10:12Z", "commit": {"oid": "9f66508d42bff2a4c0b462d6778f2d4b13e80902"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQyMToxMDoxMlrOF7uc4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQyMToxMDoxMlrOF7uc4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE3MTM2MQ==", "bodyText": "Would it be worth updating the equivalent text in RemoveSettingKeyStoreCommand? It still talks about removing \"a setting\" from the keystore, but it already supports multiple settings.", "url": "https://github.com/elastic/elasticsearch/pull/54229#discussion_r398171361", "createdAt": "2020-03-25T21:10:12Z", "author": {"login": "pugnascotia"}, "path": "distribution/tools/keystore-cli/src/main/java/org/elasticsearch/common/settings/AddStringKeyStoreCommand.java", "diffHunk": "@@ -42,13 +46,13 @@\n     private final OptionSpec<String> arguments;\n \n     AddStringKeyStoreCommand() {\n-        super(\"Add a string setting to the keystore\", false);\n-        this.stdinOption = parser.acceptsAll(Arrays.asList(\"x\", \"stdin\"), \"Read setting value from stdin\");\n+        super(\"Add string settings to the keystore\", false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f66508d42bff2a4c0b462d6778f2d4b13e80902"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxNTM5NjAw", "url": "https://github.com/elastic/elasticsearch/pull/54229#pullrequestreview-381539600", "createdAt": "2020-03-25T21:11:30Z", "commit": {"oid": "9f66508d42bff2a4c0b462d6778f2d4b13e80902"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQyMToxMTozMFrOF7ufnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQyMToxMTozMFrOF7ufnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODE3MjA2MA==", "bodyText": "Should we document -x too?", "url": "https://github.com/elastic/elasticsearch/pull/54229#discussion_r398172060", "createdAt": "2020-03-25T21:11:30Z", "author": {"login": "pugnascotia"}, "path": "docs/reference/commands/keystore.asciidoc", "diffHunk": "@@ -70,12 +71,14 @@ protected, you are prompted to enter the current password and the new one. You\n can optionally use an empty string to remove the password. If the keystore is\n not password protected, you can use this command to set a password.\n \n-`remove <setting>`:: Removes a setting from the keystore.\n+`remove <settings>`:: Removes settings from the keystore. Multiple setting\n+names can be specified as arguments to the `add` command.\n \n `-s, --silent`:: Shows minimal output.\n \n-`--stdin`:: When used with the `add` parameter, you can pass the setting value\n-through standard input (stdin). See <<add-string-to-keystore>>.\n+`--stdin`:: When used with the `add` parameter, you can pass the settings values", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f66508d42bff2a4c0b462d6778f2d4b13e80902"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxNjQwMDgx", "url": "https://github.com/elastic/elasticsearch/pull/54229#pullrequestreview-381640081", "createdAt": "2020-03-26T01:07:34Z", "commit": {"oid": "9f66508d42bff2a4c0b462d6778f2d4b13e80902"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQwMTowNzozNFrOF7z6DQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQwMTowNzozNFrOF7z6DQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODI2MDc0OQ==", "bodyText": "the setting -> a setting", "url": "https://github.com/elastic/elasticsearch/pull/54229#discussion_r398260749", "createdAt": "2020-03-26T01:07:34Z", "author": {"login": "rjernst"}, "path": "docs/reference/commands/keystore.asciidoc", "diffHunk": "@@ -40,12 +40,13 @@ keystore, see the setting reference.\n [[elasticsearch-keystore-parameters]]\n === Parameters\n \n-`add <setting>`:: Adds settings to the keystore. By default, you are prompted\n-for the value of the setting. If the keystore is password protected, you are\n-also prompted to enter the password. If the setting already exists in the\n-keystore, you must confirm that you want to overwrite the current value. If the\n-keystore does not exist, you must confirm that you want to create a keystore. To\n-avoid these two confirmation prompts, use the `-f` parameter.\n+`add <settings>`:: Adds settings to the keystore. Multiple setting names can be\n+specified as arguments to the `add` command. By default, you are prompted for\n+the values of the settings. If the keystore is password protected, you are also\n+prompted to enter the password. If the setting already exists in the keystore,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f66508d42bff2a4c0b462d6778f2d4b13e80902"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e822f192379cab2f45b115d6ce91024ac0acf5f3", "author": {"user": {"login": "jasontedor", "name": "Jason Tedor"}}, "url": "https://github.com/elastic/elasticsearch/commit/e822f192379cab2f45b115d6ce91024ac0acf5f3", "committedDate": "2020-03-26T01:10:31Z", "message": "Fix docs"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1587, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}