{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzNjE4MTQ5", "number": 58035, "title": "[DOCS] Make ILM documentation data stream aware", "bodyText": "Relates to #53100\nRelates to #57905", "createdAt": "2020-06-12T11:09:59Z", "url": "https://github.com/elastic/elasticsearch/pull/58035", "merged": true, "mergeCommit": {"oid": "25cbbe56dd29fbee2efe8040e9c8b92d168cb670"}, "closed": true, "closedAt": "2020-06-15T13:14:08Z", "author": {"login": "andreidan"}, "timelineItems": {"totalCount": 43, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqQ7FTgH2gAyNDMzNjE4MTQ5OjJlNDY3NjE5OGY3ZGNlZjI0OWQwYjY5YmExOTIwM2M5ZmQ4MWQwNWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcrgPCogH2gAyNDMzNjE4MTQ5OjQzMTE2NGNkYmYxMzdjMjM1MTY5ZWNiZmI1YjI3ODc5MTRhNjBjMWE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2e4676198f7dcef249d0b69ba19203c9fd81d05b", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/2e4676198f7dcef249d0b69ba19203c9fd81d05b", "committedDate": "2020-06-11T16:33:55Z", "message": "[DOCS] Make ILM documentation data stream aware"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa37a176b0fc9b4198b4dd5700102326b5c4917d", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/fa37a176b0fc9b4198b4dd5700102326b5c4917d", "committedDate": "2020-06-12T11:07:21Z", "message": "[DOCS] ILM: Add managing indices using alias to tutorial"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ec540e870ab5e45c0e78e39ed7d3e19847bce7c", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/4ec540e870ab5e45c0e78e39ed7d3e19847bce7c", "committedDate": "2020-06-12T11:10:24Z", "message": "Merge branch 'master' into docs-ilm-data-stream"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ecd3773c6f127b6e4e88284dd03698b4fd07ffb3", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/ecd3773c6f127b6e4e88284dd03698b4fd07ffb3", "committedDate": "2020-06-12T11:41:16Z", "message": "Use delete composable template api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab1e2a70a8c579f2d982fb90ab28eac55f1d10df", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/ab1e2a70a8c579f2d982fb90ab28eac55f1d10df", "committedDate": "2020-06-12T13:19:04Z", "message": "Fix tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5ODQ3NDg4", "url": "https://github.com/elastic/elasticsearch/pull/58035#pullrequestreview-429847488", "createdAt": "2020-06-12T15:44:32Z", "commit": {"oid": "ab1e2a70a8c579f2d982fb90ab28eac55f1d10df"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxNTo0NDozMlrOGjIyaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxNTo0NDozMlrOGjIyaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTQ5NzMyMQ==", "bodyText": "This is breaking the docs CI test. I'll go ahead and merge this change in.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            [[ilm-gs-create-policy]]\n          \n          \n            \n            [[manage-time-series-data-without-data-streams]]", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439497321", "createdAt": "2020-06-12T15:44:32Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/ilm-tutorial.asciidoc", "diffHunk": "@@ -89,13 +91,207 @@ For the complete list of actions that {ilm} can perform, see <<ilm-actions>>.\n \n [discrete]\n [[ilm-gs-apply-policy]]\n-=== Create an index template to apply the lifecycle policy\n+=== Create a composable template to create the data stream and apply the lifecycle policy\n+\n+To create a data stream we'll create a composable template with a `data_stream` definition\n+that will specify the lifecycle policy.\n+\n+For example, you might create a `timeseries_template` that is will bootstrap a data stream\n+named `timeseries`.\n+\n+To enable the ILM to manage the data stream, the template configures one {ilm-init} setting:\n+\n+* `index.lifecycle.name` specifies the name of the lifecycle policy to apply to the data stream.\n+\n+You can use the {kib} Create template wizard to add the template.\n+This wizard invokes the put _index_template API to create the <<indices-templates,composable index template>>\n+with the options you specify.\n+\n+The underlying request looks like this:\n+\n+[source,console]\n+-----------------------\n+PUT _index_template/timeseries_template\n+{\n+  \"index_patterns\": [\"timeseries\"],                 <1>\n+  \"data_stream\": {\n+    \"timestamp_field\": \"@timestamp\"                  <2>\n+  },\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1,\n+      \"number_of_replicas\": 1,\n+      \"index.lifecycle.name\": \"timeseries_policy\"     <3>\n+    }\n+  }\n+}\n+-----------------------\n+// TEST[continued]\n+\n+<1> Apply the template when a document is indexed into the `timeseries` target.\n+<2> Identifies the timestamp field for the data source, a field that must be present\n+in all documents indexed into the `timeseries` data stream.\n+<3> The name of the ILM policy used to manage the data stream.\n+\n+You can also invoke this API directly to add templates.\n+\n+[discrete]\n+[[ilm-gs-bootstrap]]\n+=== Bootstrap the data stream\n+\n+To get things started, you simply index a document into the name or wildcard pattern defined\n+in the `index_patterns` of the <<indices-templates,composable index template>> that will\n+create the data stream.\n+{es} will automatically create the corresponding data stream and will index the document into\n+the first backing index.\n+\n+For example, the following request creates the `timeseries` data stream and the first generation\n+backing index called `.ds-timeseries-000001`.\n+\n+[source,console]\n+-----------------------\n+POST timeseries/_doc\n+{\n+  \"message\": \"logged the request\",\n+  \"@timestamp\": \"1591890611\"\n+}\n+\n+-----------------------\n+// TEST[continued]\n+\n+When the rollover conditions are met, the `rollover` action:\n+\n+* Creates the second generation backing index, name `.ds-timeseries-000002`.\n+As it is the backing index of the `timeseries` data stream which was created using the `timeseries_template`\n+the template configuration will be applied to the new index.\n+* As it is the latest generation index of the `timeseries` data stream, the newly created\n+backing index `.ds-timeseries-000002` becomes the data stream's write index.\n+\n+This process repeats each time rollover conditions are met.\n+You can search across all of the data stream's backing indices, managed by the `timeseries_policy`,\n+with the `timeseries` data stream name.\n+Write operations are routed to the current write index, whilst read operations will be handled by all\n+backing indices.\n+\n+[discrete]\n+[[ilm-gs-check-progress]]\n+=== Check lifecycle progress\n+\n+To get status information for managed indices, you use the {ilm-init} explain API.\n+This lets you find out things like:\n+\n+* What phase an index is in and when it entered that phase.\n+* The current action and what step is being performed.\n+* If any errors have occurred or progress is blocked.\n+\n+For example, the following request gets information about the `timeseries` indices:\n+\n+[source,console]\n+--------------------------------------------------\n+GET .ds-timeseries-*/_ilm/explain\n+--------------------------------------------------\n+// TEST[continued]\n+\n+The response below shows that the data stream's first generation backing index is waiting in the `hot`\n+phase's `rollover` action.\n+It remains in this state and {ilm-init} continues to call `attempt-rollover` until the rollover conditions\n+are met.\n+\n+// [[36818c6d9f434d387819c30bd9addb14]]\n+[source,console-result]\n+--------------------------------------------------\n+{\n+  \"indices\": {\n+    \".ds-timeseries-000001\": {\n+      \"index\": \".ds-timeseries-000001\",\n+      \"managed\": true,\n+      \"policy\": \"timeseries_policy\",             <1>\n+      \"lifecycle_date_millis\": 1538475653281,\n+      \"age\": \"30s\",                              <2>\n+      \"phase\": \"hot\",\n+      \"phase_time_millis\": 1538475653317,\n+      \"action\": \"rollover\",\n+      \"action_time_millis\": 1538475653317,\n+      \"step\": \"attempt-rollover\",                <3>\n+      \"step_time_millis\": 1538475653317,\n+      \"phase_execution\": {\n+        \"policy\": \"timeseries_policy\",\n+        \"phase_definition\": {                    <4>\n+          \"min_age\": \"0ms\",\n+          \"actions\": {\n+            \"rollover\": {\n+              \"max_size\": \"50gb\",\n+              \"max_age\": \"30d\"\n+            }\n+          }\n+        },\n+        \"version\": 1,\n+        \"modified_date_in_millis\": 1539609701576\n+      }\n+    }\n+  }\n+}\n+--------------------------------------------------\n+// TESTRESPONSE[skip:no way to know if we will get this response immediately]\n+\n+<1> The policy used to manage the index\n+<2> The age of the index\n+<3> The step {ilm-init} is performing on the index\n+<4> The definition of the current phase (the `hot` phase)\n+\n+//////////////////////////\n+\n+[source,console]\n+--------------------------------------------------\n+DELETE /_data_stream/timeseries\n+--------------------------------------------------\n+// TEST[continued]\n+\n+//////////////////////////\n+\n+\n+//////////////////////////\n+\n+[source,console]\n+--------------------------------------------------\n+DELETE /_index_template/timeseries_template\n+--------------------------------------------------\n+// TEST[continued]\n+\n+//////////////////////////\n+\n+[discrete]\n+[[ilm-gs-create-policy]]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ab1e2a70a8c579f2d982fb90ab28eac55f1d10df"}, "originalPosition": 213}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b", "author": {"user": {"login": "jrodewig", "name": "James Rodewig"}}, "url": "https://github.com/elastic/elasticsearch/commit/28b84909eacd98f8be2738dc0058068143dbc47b", "committedDate": "2020-06-12T15:44:37Z", "message": "Update docs/reference/ilm/ilm-tutorial.asciidoc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5ODUyMDcw", "url": "https://github.com/elastic/elasticsearch/pull/58035#pullrequestreview-429852070", "createdAt": "2020-06-12T15:50:44Z", "commit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "state": "COMMENTED", "comments": {"totalCount": 35, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxNTo1NTo0MVrOGjJKAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxNzo0MjozNFrOGjMg1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUwMzM2MA==", "bodyText": "Nit: Removes either.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            A rollover target can be either a <<data-streams, data stream>> or an <<indices-aliases, index alias>>.\n          \n          \n            \n            A rollover target can be a <<data-streams, data stream>> or an <<indices-aliases, index alias>>.", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439503360", "createdAt": "2020-06-12T15:55:41Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/actions/ilm-rollover.asciidoc", "diffHunk": "@@ -4,15 +4,21 @@\n \n Phases allowed: hot.\n \n-Rolls an alias over to a new index when the existing index meets one of the rollover conditions.\n+Rolls over a target to a new index when the existing index meets one of the rollover conditions.\n \n-IMPORTANT: If the rollover action is used on a <<ccr-put-follow,follower index>>, \n+IMPORTANT: If the rollover action is used on a <<ccr-put-follow,follower index>>,\n policy execution waits until the leader index rolls over (or is\n-<<skipping-rollover, otherwise marked complete>>), \n-then converts the follower index into a regular index with the \n+<<skipping-rollover, otherwise marked complete>>),\n+then converts the follower index into a regular index with the\n <<ilm-unfollow-action, Unfollow action>>.\n \n-For a managed index to be rolled over: \n+A rollover target can be either a <<data-streams, data stream>> or an <<indices-aliases, index alias>>.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUwNDI1OQ==", "bodyText": "I don't think we need a link after the first mention. However, I would link to write index\nas this is its first mention on this page.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            When targeting a <<data-streams, data stream>>, the new index becomes the data stream's write index\n          \n          \n            \n            When targeting a data stream, the new index becomes the data stream's\n          \n          \n            \n            <<data-stream-write-index,write index>>", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439504259", "createdAt": "2020-06-12T15:57:20Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/actions/ilm-rollover.asciidoc", "diffHunk": "@@ -4,15 +4,21 @@\n \n Phases allowed: hot.\n \n-Rolls an alias over to a new index when the existing index meets one of the rollover conditions.\n+Rolls over a target to a new index when the existing index meets one of the rollover conditions.\n \n-IMPORTANT: If the rollover action is used on a <<ccr-put-follow,follower index>>, \n+IMPORTANT: If the rollover action is used on a <<ccr-put-follow,follower index>>,\n policy execution waits until the leader index rolls over (or is\n-<<skipping-rollover, otherwise marked complete>>), \n-then converts the follower index into a regular index with the \n+<<skipping-rollover, otherwise marked complete>>),\n+then converts the follower index into a regular index with the\n <<ilm-unfollow-action, Unfollow action>>.\n \n-For a managed index to be rolled over: \n+A rollover target can be either a <<data-streams, data stream>> or an <<indices-aliases, index alias>>.\n+When targeting a <<data-streams, data stream>>, the new index becomes the data stream's write index", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUxMTgxNg==", "bodyText": "I got a little confused with this sentence:\n\nThe data stream out of the box makes sure the backing index has the correct name pattern, and the write index (ie. latest generation backing index) will be the target index to be rolled over.\n\nAre we trying to say one of the following?\nA. The new write index uses the data stream's naming convention?\nB. Rollover assumes the write index is the backing index with the latest generation?\nC. The rollover validates that the data stream's write index follows the naming convention and is\nthe backing index with the latest generation?\nIf it's any of those cases, I'd consider removing as it feels like an implementation detail. If you decide to keep it, I'd reword and remove the data stream xref.\nIf C, I'd maybe add some context on why this validation is needed (i.e. how a data stream could get into a state that fails the validation).", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439511816", "createdAt": "2020-06-12T16:11:13Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/actions/ilm-rollover.asciidoc", "diffHunk": "@@ -4,15 +4,21 @@\n \n Phases allowed: hot.\n \n-Rolls an alias over to a new index when the existing index meets one of the rollover conditions.\n+Rolls over a target to a new index when the existing index meets one of the rollover conditions.\n \n-IMPORTANT: If the rollover action is used on a <<ccr-put-follow,follower index>>, \n+IMPORTANT: If the rollover action is used on a <<ccr-put-follow,follower index>>,\n policy execution waits until the leader index rolls over (or is\n-<<skipping-rollover, otherwise marked complete>>), \n-then converts the follower index into a regular index with the \n+<<skipping-rollover, otherwise marked complete>>),\n+then converts the follower index into a regular index with the\n <<ilm-unfollow-action, Unfollow action>>.\n \n-For a managed index to be rolled over: \n+A rollover target can be either a <<data-streams, data stream>> or an <<indices-aliases, index alias>>.\n+When targeting a <<data-streams, data stream>>, the new index becomes the data stream's write index\n+and its generation is incremented. The <<data-streams, data stream>> out of the box makes sure\n+the backing index has the correct name pattern, and the write index (ie. latest generation\n+backing index) will be the target index to be rolled over.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUxMjU1Mw==", "bodyText": "Nit: reword for clarity.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            In order for an <<indices-aliases, index alias>> target to be rolled over:\n          \n          \n            \n            To roll over an <<indices-aliases, index alias>>, the alias and its write index\n          \n          \n            \n            must meet the following conditions:", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439512553", "createdAt": "2020-06-12T16:12:10Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/actions/ilm-rollover.asciidoc", "diffHunk": "@@ -4,15 +4,21 @@\n \n Phases allowed: hot.\n \n-Rolls an alias over to a new index when the existing index meets one of the rollover conditions.\n+Rolls over a target to a new index when the existing index meets one of the rollover conditions.\n \n-IMPORTANT: If the rollover action is used on a <<ccr-put-follow,follower index>>, \n+IMPORTANT: If the rollover action is used on a <<ccr-put-follow,follower index>>,\n policy execution waits until the leader index rolls over (or is\n-<<skipping-rollover, otherwise marked complete>>), \n-then converts the follower index into a regular index with the \n+<<skipping-rollover, otherwise marked complete>>),\n+then converts the follower index into a regular index with the\n <<ilm-unfollow-action, Unfollow action>>.\n \n-For a managed index to be rolled over: \n+A rollover target can be either a <<data-streams, data stream>> or an <<indices-aliases, index alias>>.\n+When targeting a <<data-streams, data stream>>, the new index becomes the data stream's write index\n+and its generation is incremented. The <<data-streams, data stream>> out of the box makes sure\n+the backing index has the correct name pattern, and the write index (ie. latest generation\n+backing index) will be the target index to be rolled over.\n+\n+In order for an <<indices-aliases, index alias>> target to be rolled over:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUxMzYzMA==", "bodyText": "Nit: Avoid future tense when able.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            the mounted index will replace the original index in the data stream.\n          \n          \n            \n            the mounted index replaces the original index in the data stream.", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439513630", "createdAt": "2020-06-12T16:13:28Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/actions/ilm-searchable-snapshot.asciidoc", "diffHunk": "@@ -6,6 +6,14 @@ Phases allowed: cold.\n \n Takes a snapshot of the managed index in the configured repository\n and mounts it as a searchable snapshot.\n+If the managed index is part of a <<data-streams, data stream>>,\n+the mounted index will replace the original index in the data stream.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUxNjc3NA==", "bodyText": "Nits: I reworded to make this a bit more direct.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            [NOTE]\n          \n          \n            \n            This action will fail if the managed index is a <<data-streams, data stream's>>\n          \n          \n            \n            write index. Manually rolling over the data stream will change the <<data-streams, data stream's>>\n          \n          \n            \n            write index and the action will be able to continue converting the managed\n          \n          \n            \n            index to a searchable snapshot.\n          \n          \n            \n            [NOTE]\n          \n          \n            \n            This action cannot be performed on a data stream's write index. Attempts to do\n          \n          \n            \n            so will fail. To convert the index to a searchable snapshot, first\n          \n          \n            \n            <<manually-roll-over-a-data-stream,manually roll over>> the data stream. This\n          \n          \n            \n            creates a new write index. Because the index is no longer the stream's write\n          \n          \n            \n            index, the action can then convert it to a searchable snapshot.", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439516774", "createdAt": "2020-06-12T16:17:29Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/actions/ilm-searchable-snapshot.asciidoc", "diffHunk": "@@ -6,6 +6,14 @@ Phases allowed: cold.\n \n Takes a snapshot of the managed index in the configured repository\n and mounts it as a searchable snapshot.\n+If the managed index is part of a <<data-streams, data stream>>,\n+the mounted index will replace the original index in the data stream.\n+\n+[NOTE]\n+This action will fail if the managed index is a <<data-streams, data stream's>>\n+write index. Manually rolling over the data stream will change the <<data-streams, data stream's>>\n+write index and the action will be able to continue converting the managed\n+index to a searchable snapshot.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUyNTM4NA==", "bodyText": "Nit: Reword to match the snapshot action note.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            This action will fail if the source index is a <<data-streams, data stream's>>\n          \n          \n            \n            write index. Manually rolling over the data stream will change the\n          \n          \n            \n            <<data-streams, data stream's>> write index and the action will be able to resume\n          \n          \n            \n            shrinking the source index.\n          \n          \n            \n            This action cannot be performed on a data stream's write index. Attempts to do\n          \n          \n            \n            so will fail. To shrink the index, first\n          \n          \n            \n            <<manually-roll-over-a-data-stream,manually roll over>> the data stream. This\n          \n          \n            \n            creates a new write index. Because the index is no longer the stream's write\n          \n          \n            \n            index, the action can resume shrinking it.", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439525384", "createdAt": "2020-06-12T16:34:19Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/actions/ilm-shrink.asciidoc", "diffHunk": "@@ -21,6 +21,15 @@ policy execution waits until the leader index rolls over (or is\n then converts the follower index into a regular index with the \n <<ilm-unfollow-action,the Unfollow action>> before performing the shrink operation.\n \n+If the managed index is part of a <<data-streams, data stream>>,\n+the shrunken index will replace the original index in the data stream.\n+\n+[NOTE]\n+This action will fail if the source index is a <<data-streams, data stream's>>\n+write index. Manually rolling over the data stream will change the\n+<<data-streams, data stream's>> write index and the action will be able to resume\n+shrinking the source index.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUyNTYwNA==", "bodyText": "Nit: avoids future tense.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            the shrunken index will replace the original index in the data stream.\n          \n          \n            \n            the shrunken index replaces the original index in the data stream.", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439525604", "createdAt": "2020-06-12T16:34:47Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/actions/ilm-shrink.asciidoc", "diffHunk": "@@ -21,6 +21,15 @@ policy execution waits until the leader index rolls over (or is\n then converts the follower index into a regular index with the \n <<ilm-unfollow-action,the Unfollow action>> before performing the shrink operation.\n \n+If the managed index is part of a <<data-streams, data stream>>,\n+the shrunken index will replace the original index in the data stream.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUyOTQ5OQ==", "bodyText": "I would add an admon here so index alias users can skip to the appropriate section.\nI choose to focus on non-append-only use cases, but feel free to add others.\nI also tweaked the sentence to say data stream in place of time-series indices.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \n          \n          \n            \n            To automate rollover and management of time-series indices with {ilm-init}, you:\n          \n          \n            \n            \n          \n          \n            \n            TIP: Data streams are best suited for\n          \n          \n            \n            <<data-streams-append-only,append-only>> use cases. If you need to frequently\n          \n          \n            \n            update or delete existing documents across multiple indices, we recommend\n          \n          \n            \n            using an index alias and index template instead. You can still use ILM to\n          \n          \n            \n            manage and rollover the alias's indices. Skip to\n          \n          \n            \n            <<manage-time-series-data-without-data-streams>>.\n          \n          \n            \n            \n          \n          \n            \n            To automate rollover and management of a data stream with {ilm-init}, you:", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439529499", "createdAt": "2020-06-12T16:43:05Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/ilm-tutorial.asciidoc", "diffHunk": "@@ -11,26 +11,28 @@ This tutorial demonstrates how to use {ilm}\n ({ilm-init}) to manage indices that contain time-series data.\n \n When you continuously index timestamped documents into {es},\n-you typically use an index alias so you can periodically roll over to a new index.\n+you typically use a <<data-streams, data stream>> so you can periodically roll over to a\n+new index.\n This enables you to implement a hot-warm-cold architecture to meet your performance\n requirements for your newest data, control costs over time, enforce retention policies,\n and still get the most out of your data.\n \n To automate rollover and management of time-series indices with {ilm-init}, you:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUzMjUzMQ==", "bodyText": "Fixes a typo.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            For example, you might create a `timeseries_template` that is will bootstrap a data stream\n          \n          \n            \n            For example, you might create a `timeseries_template` to use for a future data stream", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439532531", "createdAt": "2020-06-12T16:49:12Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/ilm-tutorial.asciidoc", "diffHunk": "@@ -89,13 +91,207 @@ For the complete list of actions that {ilm} can perform, see <<ilm-actions>>.\n \n [discrete]\n [[ilm-gs-apply-policy]]\n-=== Create an index template to apply the lifecycle policy\n+=== Create a composable template to create the data stream and apply the lifecycle policy\n+\n+To create a data stream we'll create a composable template with a `data_stream` definition\n+that will specify the lifecycle policy.\n+\n+For example, you might create a `timeseries_template` that is will bootstrap a data stream", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUzODIzMQ==", "bodyText": "Nit: Avoid \"we\" and future tense where possible.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            To create a data stream we'll create a composable template with a `data_stream` definition\n          \n          \n            \n            that will specify the lifecycle policy.\n          \n          \n            \n            To set up a data stream, first create a composable template to specify the lifecycle policy. Because\n          \n          \n            \n            the template is for a data stream, it must also include a `data_stream` definition.\n          \n      \n    \n    \n  \n\nI wonder if we should mention other requirements here, specifically a timestamp mapping.", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439538231", "createdAt": "2020-06-12T17:00:27Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/ilm-tutorial.asciidoc", "diffHunk": "@@ -89,13 +91,207 @@ For the complete list of actions that {ilm} can perform, see <<ilm-actions>>.\n \n [discrete]\n [[ilm-gs-apply-policy]]\n-=== Create an index template to apply the lifecycle policy\n+=== Create a composable template to create the data stream and apply the lifecycle policy\n+\n+To create a data stream we'll create a composable template with a `data_stream` definition\n+that will specify the lifecycle policy.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUzODQ4Nw==", "bodyText": "Replaces ILM with attribute.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            To enable the ILM to manage the data stream, the template configures one {ilm-init} setting:\n          \n          \n            \n            To enable the {ilm-init} to manage the data stream, the template configures one {ilm-init} setting:", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439538487", "createdAt": "2020-06-12T17:01:01Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/ilm-tutorial.asciidoc", "diffHunk": "@@ -89,13 +91,207 @@ For the complete list of actions that {ilm} can perform, see <<ilm-actions>>.\n \n [discrete]\n [[ilm-gs-apply-policy]]\n-=== Create an index template to apply the lifecycle policy\n+=== Create a composable template to create the data stream and apply the lifecycle policy\n+\n+To create a data stream we'll create a composable template with a `data_stream` definition\n+that will specify the lifecycle policy.\n+\n+For example, you might create a `timeseries_template` that is will bootstrap a data stream\n+named `timeseries`.\n+\n+To enable the ILM to manage the data stream, the template configures one {ilm-init} setting:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUzODg1OA==", "bodyText": "Nit: I'd align the callout numbers.", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439538858", "createdAt": "2020-06-12T17:01:50Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/ilm-tutorial.asciidoc", "diffHunk": "@@ -89,13 +91,207 @@ For the complete list of actions that {ilm} can perform, see <<ilm-actions>>.\n \n [discrete]\n [[ilm-gs-apply-policy]]\n-=== Create an index template to apply the lifecycle policy\n+=== Create a composable template to create the data stream and apply the lifecycle policy\n+\n+To create a data stream we'll create a composable template with a `data_stream` definition\n+that will specify the lifecycle policy.\n+\n+For example, you might create a `timeseries_template` that is will bootstrap a data stream\n+named `timeseries`.\n+\n+To enable the ILM to manage the data stream, the template configures one {ilm-init} setting:\n+\n+* `index.lifecycle.name` specifies the name of the lifecycle policy to apply to the data stream.\n+\n+You can use the {kib} Create template wizard to add the template.\n+This wizard invokes the put _index_template API to create the <<indices-templates,composable index template>>\n+with the options you specify.\n+\n+The underlying request looks like this:\n+\n+[source,console]\n+-----------------------\n+PUT _index_template/timeseries_template\n+{\n+  \"index_patterns\": [\"timeseries\"],                 <1>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUzOTA3Nw==", "bodyText": "Nit: Breaks this into two sentences for readability.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            <2> Identifies the timestamp field for the data source, a field that must be present\n          \n          \n            \n            <2> Identifies the timestamp field for the data source. This field must be present", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439539077", "createdAt": "2020-06-12T17:02:18Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/ilm-tutorial.asciidoc", "diffHunk": "@@ -89,13 +91,207 @@ For the complete list of actions that {ilm} can perform, see <<ilm-actions>>.\n \n [discrete]\n [[ilm-gs-apply-policy]]\n-=== Create an index template to apply the lifecycle policy\n+=== Create a composable template to create the data stream and apply the lifecycle policy\n+\n+To create a data stream we'll create a composable template with a `data_stream` definition\n+that will specify the lifecycle policy.\n+\n+For example, you might create a `timeseries_template` that is will bootstrap a data stream\n+named `timeseries`.\n+\n+To enable the ILM to manage the data stream, the template configures one {ilm-init} setting:\n+\n+* `index.lifecycle.name` specifies the name of the lifecycle policy to apply to the data stream.\n+\n+You can use the {kib} Create template wizard to add the template.\n+This wizard invokes the put _index_template API to create the <<indices-templates,composable index template>>\n+with the options you specify.\n+\n+The underlying request looks like this:\n+\n+[source,console]\n+-----------------------\n+PUT _index_template/timeseries_template\n+{\n+  \"index_patterns\": [\"timeseries\"],                 <1>\n+  \"data_stream\": {\n+    \"timestamp_field\": \"@timestamp\"                  <2>\n+  },\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1,\n+      \"number_of_replicas\": 1,\n+      \"index.lifecycle.name\": \"timeseries_policy\"     <3>\n+    }\n+  }\n+}\n+-----------------------\n+// TEST[continued]\n+\n+<1> Apply the template when a document is indexed into the `timeseries` target.\n+<2> Identifies the timestamp field for the data source, a field that must be present", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUzOTM5NQ==", "bodyText": "I think a date or date_nanos mapping for the timestamp field is now required. I'd included that here.", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439539395", "createdAt": "2020-06-12T17:02:56Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/ilm-tutorial.asciidoc", "diffHunk": "@@ -89,13 +91,207 @@ For the complete list of actions that {ilm} can perform, see <<ilm-actions>>.\n \n [discrete]\n [[ilm-gs-apply-policy]]\n-=== Create an index template to apply the lifecycle policy\n+=== Create a composable template to create the data stream and apply the lifecycle policy\n+\n+To create a data stream we'll create a composable template with a `data_stream` definition\n+that will specify the lifecycle policy.\n+\n+For example, you might create a `timeseries_template` that is will bootstrap a data stream\n+named `timeseries`.\n+\n+To enable the ILM to manage the data stream, the template configures one {ilm-init} setting:\n+\n+* `index.lifecycle.name` specifies the name of the lifecycle policy to apply to the data stream.\n+\n+You can use the {kib} Create template wizard to add the template.\n+This wizard invokes the put _index_template API to create the <<indices-templates,composable index template>>\n+with the options you specify.\n+\n+The underlying request looks like this:\n+\n+[source,console]\n+-----------------------\n+PUT _index_template/timeseries_template\n+{\n+  \"index_patterns\": [\"timeseries\"],                 <1>\n+  \"data_stream\": {\n+    \"timestamp_field\": \"@timestamp\"                  <2>\n+  },\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1,\n+      \"number_of_replicas\": 1,\n+      \"index.lifecycle.name\": \"timeseries_policy\"     <3>\n+    }\n+  }\n+}\n+-----------------------", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUzOTU3MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            <3> The name of the ILM policy used to manage the data stream.\n          \n          \n            \n            <3> The name of the {ilm-init} policy used to manage the data stream.", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439539571", "createdAt": "2020-06-12T17:03:19Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/ilm-tutorial.asciidoc", "diffHunk": "@@ -89,13 +91,207 @@ For the complete list of actions that {ilm} can perform, see <<ilm-actions>>.\n \n [discrete]\n [[ilm-gs-apply-policy]]\n-=== Create an index template to apply the lifecycle policy\n+=== Create a composable template to create the data stream and apply the lifecycle policy\n+\n+To create a data stream we'll create a composable template with a `data_stream` definition\n+that will specify the lifecycle policy.\n+\n+For example, you might create a `timeseries_template` that is will bootstrap a data stream\n+named `timeseries`.\n+\n+To enable the ILM to manage the data stream, the template configures one {ilm-init} setting:\n+\n+* `index.lifecycle.name` specifies the name of the lifecycle policy to apply to the data stream.\n+\n+You can use the {kib} Create template wizard to add the template.\n+This wizard invokes the put _index_template API to create the <<indices-templates,composable index template>>\n+with the options you specify.\n+\n+The underlying request looks like this:\n+\n+[source,console]\n+-----------------------\n+PUT _index_template/timeseries_template\n+{\n+  \"index_patterns\": [\"timeseries\"],                 <1>\n+  \"data_stream\": {\n+    \"timestamp_field\": \"@timestamp\"                  <2>\n+  },\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1,\n+      \"number_of_replicas\": 1,\n+      \"index.lifecycle.name\": \"timeseries_policy\"     <3>\n+    }\n+  }\n+}\n+-----------------------\n+// TEST[continued]\n+\n+<1> Apply the template when a document is indexed into the `timeseries` target.\n+<2> Identifies the timestamp field for the data source, a field that must be present\n+in all documents indexed into the `timeseries` data stream.\n+<3> The name of the ILM policy used to manage the data stream.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU0MDI5MQ==", "bodyText": "I'd say \"create\" rather than \"bootstrap\" here. Data streams kinda solve the original bootstrap problem so it'd be good to not use the same terminology.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            [[ilm-gs-bootstrap]]\n          \n          \n            \n            === Bootstrap the data stream\n          \n          \n            \n            [[ilm-gs-create-the-data-stream]]\n          \n          \n            \n            === Create the data stream", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439540291", "createdAt": "2020-06-12T17:04:46Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/ilm-tutorial.asciidoc", "diffHunk": "@@ -89,13 +91,207 @@ For the complete list of actions that {ilm} can perform, see <<ilm-actions>>.\n \n [discrete]\n [[ilm-gs-apply-policy]]\n-=== Create an index template to apply the lifecycle policy\n+=== Create a composable template to create the data stream and apply the lifecycle policy\n+\n+To create a data stream we'll create a composable template with a `data_stream` definition\n+that will specify the lifecycle policy.\n+\n+For example, you might create a `timeseries_template` that is will bootstrap a data stream\n+named `timeseries`.\n+\n+To enable the ILM to manage the data stream, the template configures one {ilm-init} setting:\n+\n+* `index.lifecycle.name` specifies the name of the lifecycle policy to apply to the data stream.\n+\n+You can use the {kib} Create template wizard to add the template.\n+This wizard invokes the put _index_template API to create the <<indices-templates,composable index template>>\n+with the options you specify.\n+\n+The underlying request looks like this:\n+\n+[source,console]\n+-----------------------\n+PUT _index_template/timeseries_template\n+{\n+  \"index_patterns\": [\"timeseries\"],                 <1>\n+  \"data_stream\": {\n+    \"timestamp_field\": \"@timestamp\"                  <2>\n+  },\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1,\n+      \"number_of_replicas\": 1,\n+      \"index.lifecycle.name\": \"timeseries_policy\"     <3>\n+    }\n+  }\n+}\n+-----------------------\n+// TEST[continued]\n+\n+<1> Apply the template when a document is indexed into the `timeseries` target.\n+<2> Identifies the timestamp field for the data source, a field that must be present\n+in all documents indexed into the `timeseries` data stream.\n+<3> The name of the ILM policy used to manage the data stream.\n+\n+You can also invoke this API directly to add templates.\n+\n+[discrete]\n+[[ilm-gs-bootstrap]]\n+=== Bootstrap the data stream", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 89}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU0MDYyMQ==", "bodyText": "Nit: Use direct imperative.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            To get things started, you simply index a document into the name or wildcard pattern defined\n          \n          \n            \n            To get things started, index a document into the name or wildcard pattern defined", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439540621", "createdAt": "2020-06-12T17:05:26Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/ilm-tutorial.asciidoc", "diffHunk": "@@ -89,13 +91,207 @@ For the complete list of actions that {ilm} can perform, see <<ilm-actions>>.\n \n [discrete]\n [[ilm-gs-apply-policy]]\n-=== Create an index template to apply the lifecycle policy\n+=== Create a composable template to create the data stream and apply the lifecycle policy\n+\n+To create a data stream we'll create a composable template with a `data_stream` definition\n+that will specify the lifecycle policy.\n+\n+For example, you might create a `timeseries_template` that is will bootstrap a data stream\n+named `timeseries`.\n+\n+To enable the ILM to manage the data stream, the template configures one {ilm-init} setting:\n+\n+* `index.lifecycle.name` specifies the name of the lifecycle policy to apply to the data stream.\n+\n+You can use the {kib} Create template wizard to add the template.\n+This wizard invokes the put _index_template API to create the <<indices-templates,composable index template>>\n+with the options you specify.\n+\n+The underlying request looks like this:\n+\n+[source,console]\n+-----------------------\n+PUT _index_template/timeseries_template\n+{\n+  \"index_patterns\": [\"timeseries\"],                 <1>\n+  \"data_stream\": {\n+    \"timestamp_field\": \"@timestamp\"                  <2>\n+  },\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1,\n+      \"number_of_replicas\": 1,\n+      \"index.lifecycle.name\": \"timeseries_policy\"     <3>\n+    }\n+  }\n+}\n+-----------------------\n+// TEST[continued]\n+\n+<1> Apply the template when a document is indexed into the `timeseries` target.\n+<2> Identifies the timestamp field for the data source, a field that must be present\n+in all documents indexed into the `timeseries` data stream.\n+<3> The name of the ILM policy used to manage the data stream.\n+\n+You can also invoke this API directly to add templates.\n+\n+[discrete]\n+[[ilm-gs-bootstrap]]\n+=== Bootstrap the data stream\n+\n+To get things started, you simply index a document into the name or wildcard pattern defined", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 91}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU0MTM0Nw==", "bodyText": "Adds some text to note that the target cannot already exist (e.g., I can't create the logs data stream if a logs index already exists).\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            in the `index_patterns` of the <<indices-templates,composable index template>> that will\n          \n          \n            \n            create the data stream.\n          \n          \n            \n            in the `index_patterns` of the <<indices-templates,composable index template>>. As long\n          \n          \n            \n            as an existing data stream, index, or index alias does not already use the name, the index\n          \n          \n            \n            request automatically creates a corresponding data stream with a single backing index.", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439541347", "createdAt": "2020-06-12T17:06:54Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/ilm-tutorial.asciidoc", "diffHunk": "@@ -89,13 +91,207 @@ For the complete list of actions that {ilm} can perform, see <<ilm-actions>>.\n \n [discrete]\n [[ilm-gs-apply-policy]]\n-=== Create an index template to apply the lifecycle policy\n+=== Create a composable template to create the data stream and apply the lifecycle policy\n+\n+To create a data stream we'll create a composable template with a `data_stream` definition\n+that will specify the lifecycle policy.\n+\n+For example, you might create a `timeseries_template` that is will bootstrap a data stream\n+named `timeseries`.\n+\n+To enable the ILM to manage the data stream, the template configures one {ilm-init} setting:\n+\n+* `index.lifecycle.name` specifies the name of the lifecycle policy to apply to the data stream.\n+\n+You can use the {kib} Create template wizard to add the template.\n+This wizard invokes the put _index_template API to create the <<indices-templates,composable index template>>\n+with the options you specify.\n+\n+The underlying request looks like this:\n+\n+[source,console]\n+-----------------------\n+PUT _index_template/timeseries_template\n+{\n+  \"index_patterns\": [\"timeseries\"],                 <1>\n+  \"data_stream\": {\n+    \"timestamp_field\": \"@timestamp\"                  <2>\n+  },\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1,\n+      \"number_of_replicas\": 1,\n+      \"index.lifecycle.name\": \"timeseries_policy\"     <3>\n+    }\n+  }\n+}\n+-----------------------\n+// TEST[continued]\n+\n+<1> Apply the template when a document is indexed into the `timeseries` target.\n+<2> Identifies the timestamp field for the data source, a field that must be present\n+in all documents indexed into the `timeseries` data stream.\n+<3> The name of the ILM policy used to manage the data stream.\n+\n+You can also invoke this API directly to add templates.\n+\n+[discrete]\n+[[ilm-gs-bootstrap]]\n+=== Bootstrap the data stream\n+\n+To get things started, you simply index a document into the name or wildcard pattern defined\n+in the `index_patterns` of the <<indices-templates,composable index template>> that will\n+create the data stream.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 93}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU0MjE2Mg==", "bodyText": "Nit: Avoid future tense.\nAlso notes that this new index is also the write index.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            {es} will automatically create the corresponding data stream and will index the document into\n          \n          \n            \n            the first backing index.\n          \n          \n            \n            {es} automatically indexes the request's documents into this backing index, which also\n          \n          \n            \n            acts as the stream's <<data-stream-write-index,write index>>.", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439542162", "createdAt": "2020-06-12T17:08:43Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/ilm-tutorial.asciidoc", "diffHunk": "@@ -89,13 +91,207 @@ For the complete list of actions that {ilm} can perform, see <<ilm-actions>>.\n \n [discrete]\n [[ilm-gs-apply-policy]]\n-=== Create an index template to apply the lifecycle policy\n+=== Create a composable template to create the data stream and apply the lifecycle policy\n+\n+To create a data stream we'll create a composable template with a `data_stream` definition\n+that will specify the lifecycle policy.\n+\n+For example, you might create a `timeseries_template` that is will bootstrap a data stream\n+named `timeseries`.\n+\n+To enable the ILM to manage the data stream, the template configures one {ilm-init} setting:\n+\n+* `index.lifecycle.name` specifies the name of the lifecycle policy to apply to the data stream.\n+\n+You can use the {kib} Create template wizard to add the template.\n+This wizard invokes the put _index_template API to create the <<indices-templates,composable index template>>\n+with the options you specify.\n+\n+The underlying request looks like this:\n+\n+[source,console]\n+-----------------------\n+PUT _index_template/timeseries_template\n+{\n+  \"index_patterns\": [\"timeseries\"],                 <1>\n+  \"data_stream\": {\n+    \"timestamp_field\": \"@timestamp\"                  <2>\n+  },\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1,\n+      \"number_of_replicas\": 1,\n+      \"index.lifecycle.name\": \"timeseries_policy\"     <3>\n+    }\n+  }\n+}\n+-----------------------\n+// TEST[continued]\n+\n+<1> Apply the template when a document is indexed into the `timeseries` target.\n+<2> Identifies the timestamp field for the data source, a field that must be present\n+in all documents indexed into the `timeseries` data stream.\n+<3> The name of the ILM policy used to manage the data stream.\n+\n+You can also invoke this API directly to add templates.\n+\n+[discrete]\n+[[ilm-gs-bootstrap]]\n+=== Bootstrap the data stream\n+\n+To get things started, you simply index a document into the name or wildcard pattern defined\n+in the `index_patterns` of the <<indices-templates,composable index template>> that will\n+create the data stream.\n+{es} will automatically create the corresponding data stream and will index the document into\n+the first backing index.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 95}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU0MjQ5OA==", "bodyText": "I think the conditions use an \"OR\" logic. This could be read as \"rollover happens when condition A and B is met\" not \"when A or B is met\"\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            When the rollover conditions are met, the `rollover` action:\n          \n          \n            \n            When a rollover condition in the data stream's lifecycle policy is met, the `rollover` action:", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439542498", "createdAt": "2020-06-12T17:09:30Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/ilm-tutorial.asciidoc", "diffHunk": "@@ -89,13 +91,207 @@ For the complete list of actions that {ilm} can perform, see <<ilm-actions>>.\n \n [discrete]\n [[ilm-gs-apply-policy]]\n-=== Create an index template to apply the lifecycle policy\n+=== Create a composable template to create the data stream and apply the lifecycle policy\n+\n+To create a data stream we'll create a composable template with a `data_stream` definition\n+that will specify the lifecycle policy.\n+\n+For example, you might create a `timeseries_template` that is will bootstrap a data stream\n+named `timeseries`.\n+\n+To enable the ILM to manage the data stream, the template configures one {ilm-init} setting:\n+\n+* `index.lifecycle.name` specifies the name of the lifecycle policy to apply to the data stream.\n+\n+You can use the {kib} Create template wizard to add the template.\n+This wizard invokes the put _index_template API to create the <<indices-templates,composable index template>>\n+with the options you specify.\n+\n+The underlying request looks like this:\n+\n+[source,console]\n+-----------------------\n+PUT _index_template/timeseries_template\n+{\n+  \"index_patterns\": [\"timeseries\"],                 <1>\n+  \"data_stream\": {\n+    \"timestamp_field\": \"@timestamp\"                  <2>\n+  },\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1,\n+      \"number_of_replicas\": 1,\n+      \"index.lifecycle.name\": \"timeseries_policy\"     <3>\n+    }\n+  }\n+}\n+-----------------------\n+// TEST[continued]\n+\n+<1> Apply the template when a document is indexed into the `timeseries` target.\n+<2> Identifies the timestamp field for the data source, a field that must be present\n+in all documents indexed into the `timeseries` data stream.\n+<3> The name of the ILM policy used to manage the data stream.\n+\n+You can also invoke this API directly to add templates.\n+\n+[discrete]\n+[[ilm-gs-bootstrap]]\n+=== Bootstrap the data stream\n+\n+To get things started, you simply index a document into the name or wildcard pattern defined\n+in the `index_patterns` of the <<indices-templates,composable index template>> that will\n+create the data stream.\n+{es} will automatically create the corresponding data stream and will index the document into\n+the first backing index.\n+\n+For example, the following request creates the `timeseries` data stream and the first generation\n+backing index called `.ds-timeseries-000001`.\n+\n+[source,console]\n+-----------------------\n+POST timeseries/_doc\n+{\n+  \"message\": \"logged the request\",\n+  \"@timestamp\": \"1591890611\"\n+}\n+\n+-----------------------\n+// TEST[continued]\n+\n+When the rollover conditions are met, the `rollover` action:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 111}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU0NDUyMw==", "bodyText": "Breaks this into two sentences for readability.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Write operations are routed to the current write index, whilst read operations will be handled by all\n          \n          \n            \n            backing indices.\n          \n          \n            \n            Write operations are routed to the current write index. Read operations will be handled by all\n          \n          \n            \n            backing indices.", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439544523", "createdAt": "2020-06-12T17:13:44Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/ilm-tutorial.asciidoc", "diffHunk": "@@ -89,13 +91,207 @@ For the complete list of actions that {ilm} can perform, see <<ilm-actions>>.\n \n [discrete]\n [[ilm-gs-apply-policy]]\n-=== Create an index template to apply the lifecycle policy\n+=== Create a composable template to create the data stream and apply the lifecycle policy\n+\n+To create a data stream we'll create a composable template with a `data_stream` definition\n+that will specify the lifecycle policy.\n+\n+For example, you might create a `timeseries_template` that is will bootstrap a data stream\n+named `timeseries`.\n+\n+To enable the ILM to manage the data stream, the template configures one {ilm-init} setting:\n+\n+* `index.lifecycle.name` specifies the name of the lifecycle policy to apply to the data stream.\n+\n+You can use the {kib} Create template wizard to add the template.\n+This wizard invokes the put _index_template API to create the <<indices-templates,composable index template>>\n+with the options you specify.\n+\n+The underlying request looks like this:\n+\n+[source,console]\n+-----------------------\n+PUT _index_template/timeseries_template\n+{\n+  \"index_patterns\": [\"timeseries\"],                 <1>\n+  \"data_stream\": {\n+    \"timestamp_field\": \"@timestamp\"                  <2>\n+  },\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1,\n+      \"number_of_replicas\": 1,\n+      \"index.lifecycle.name\": \"timeseries_policy\"     <3>\n+    }\n+  }\n+}\n+-----------------------\n+// TEST[continued]\n+\n+<1> Apply the template when a document is indexed into the `timeseries` target.\n+<2> Identifies the timestamp field for the data source, a field that must be present\n+in all documents indexed into the `timeseries` data stream.\n+<3> The name of the ILM policy used to manage the data stream.\n+\n+You can also invoke this API directly to add templates.\n+\n+[discrete]\n+[[ilm-gs-bootstrap]]\n+=== Bootstrap the data stream\n+\n+To get things started, you simply index a document into the name or wildcard pattern defined\n+in the `index_patterns` of the <<indices-templates,composable index template>> that will\n+create the data stream.\n+{es} will automatically create the corresponding data stream and will index the document into\n+the first backing index.\n+\n+For example, the following request creates the `timeseries` data stream and the first generation\n+backing index called `.ds-timeseries-000001`.\n+\n+[source,console]\n+-----------------------\n+POST timeseries/_doc\n+{\n+  \"message\": \"logged the request\",\n+  \"@timestamp\": \"1591890611\"\n+}\n+\n+-----------------------\n+// TEST[continued]\n+\n+When the rollover conditions are met, the `rollover` action:\n+\n+* Creates the second generation backing index, name `.ds-timeseries-000002`.\n+As it is the backing index of the `timeseries` data stream which was created using the `timeseries_template`\n+the template configuration will be applied to the new index.\n+* As it is the latest generation index of the `timeseries` data stream, the newly created\n+backing index `.ds-timeseries-000002` becomes the data stream's write index.\n+\n+This process repeats each time rollover conditions are met.\n+You can search across all of the data stream's backing indices, managed by the `timeseries_policy`,\n+with the `timeseries` data stream name.\n+Write operations are routed to the current write index, whilst read operations will be handled by all\n+backing indices.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 123}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU0NTAxMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            For example, the following request gets information about the `timeseries` indices:\n          \n          \n            \n            For example, the following request gets information about the `timeseries` data stream's\n          \n          \n            \n            backing indices:", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439545013", "createdAt": "2020-06-12T17:14:47Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/ilm-tutorial.asciidoc", "diffHunk": "@@ -89,13 +91,207 @@ For the complete list of actions that {ilm} can perform, see <<ilm-actions>>.\n \n [discrete]\n [[ilm-gs-apply-policy]]\n-=== Create an index template to apply the lifecycle policy\n+=== Create a composable template to create the data stream and apply the lifecycle policy\n+\n+To create a data stream we'll create a composable template with a `data_stream` definition\n+that will specify the lifecycle policy.\n+\n+For example, you might create a `timeseries_template` that is will bootstrap a data stream\n+named `timeseries`.\n+\n+To enable the ILM to manage the data stream, the template configures one {ilm-init} setting:\n+\n+* `index.lifecycle.name` specifies the name of the lifecycle policy to apply to the data stream.\n+\n+You can use the {kib} Create template wizard to add the template.\n+This wizard invokes the put _index_template API to create the <<indices-templates,composable index template>>\n+with the options you specify.\n+\n+The underlying request looks like this:\n+\n+[source,console]\n+-----------------------\n+PUT _index_template/timeseries_template\n+{\n+  \"index_patterns\": [\"timeseries\"],                 <1>\n+  \"data_stream\": {\n+    \"timestamp_field\": \"@timestamp\"                  <2>\n+  },\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1,\n+      \"number_of_replicas\": 1,\n+      \"index.lifecycle.name\": \"timeseries_policy\"     <3>\n+    }\n+  }\n+}\n+-----------------------\n+// TEST[continued]\n+\n+<1> Apply the template when a document is indexed into the `timeseries` target.\n+<2> Identifies the timestamp field for the data source, a field that must be present\n+in all documents indexed into the `timeseries` data stream.\n+<3> The name of the ILM policy used to manage the data stream.\n+\n+You can also invoke this API directly to add templates.\n+\n+[discrete]\n+[[ilm-gs-bootstrap]]\n+=== Bootstrap the data stream\n+\n+To get things started, you simply index a document into the name or wildcard pattern defined\n+in the `index_patterns` of the <<indices-templates,composable index template>> that will\n+create the data stream.\n+{es} will automatically create the corresponding data stream and will index the document into\n+the first backing index.\n+\n+For example, the following request creates the `timeseries` data stream and the first generation\n+backing index called `.ds-timeseries-000001`.\n+\n+[source,console]\n+-----------------------\n+POST timeseries/_doc\n+{\n+  \"message\": \"logged the request\",\n+  \"@timestamp\": \"1591890611\"\n+}\n+\n+-----------------------\n+// TEST[continued]\n+\n+When the rollover conditions are met, the `rollover` action:\n+\n+* Creates the second generation backing index, name `.ds-timeseries-000002`.\n+As it is the backing index of the `timeseries` data stream which was created using the `timeseries_template`\n+the template configuration will be applied to the new index.\n+* As it is the latest generation index of the `timeseries` data stream, the newly created\n+backing index `.ds-timeseries-000002` becomes the data stream's write index.\n+\n+This process repeats each time rollover conditions are met.\n+You can search across all of the data stream's backing indices, managed by the `timeseries_policy`,\n+with the `timeseries` data stream name.\n+Write operations are routed to the current write index, whilst read operations will be handled by all\n+backing indices.\n+\n+[discrete]\n+[[ilm-gs-check-progress]]\n+=== Check lifecycle progress\n+\n+To get status information for managed indices, you use the {ilm-init} explain API.\n+This lets you find out things like:\n+\n+* What phase an index is in and when it entered that phase.\n+* The current action and what step is being performed.\n+* If any errors have occurred or progress is blocked.\n+\n+For example, the following request gets information about the `timeseries` indices:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 136}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU0NTI1Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The response below shows that the data stream's first generation backing index is waiting in the `hot`\n          \n          \n            \n            The following response shows the data stream's first generation backing index is waiting for the `hot`", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439545252", "createdAt": "2020-06-12T17:15:16Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/ilm-tutorial.asciidoc", "diffHunk": "@@ -89,13 +91,207 @@ For the complete list of actions that {ilm} can perform, see <<ilm-actions>>.\n \n [discrete]\n [[ilm-gs-apply-policy]]\n-=== Create an index template to apply the lifecycle policy\n+=== Create a composable template to create the data stream and apply the lifecycle policy\n+\n+To create a data stream we'll create a composable template with a `data_stream` definition\n+that will specify the lifecycle policy.\n+\n+For example, you might create a `timeseries_template` that is will bootstrap a data stream\n+named `timeseries`.\n+\n+To enable the ILM to manage the data stream, the template configures one {ilm-init} setting:\n+\n+* `index.lifecycle.name` specifies the name of the lifecycle policy to apply to the data stream.\n+\n+You can use the {kib} Create template wizard to add the template.\n+This wizard invokes the put _index_template API to create the <<indices-templates,composable index template>>\n+with the options you specify.\n+\n+The underlying request looks like this:\n+\n+[source,console]\n+-----------------------\n+PUT _index_template/timeseries_template\n+{\n+  \"index_patterns\": [\"timeseries\"],                 <1>\n+  \"data_stream\": {\n+    \"timestamp_field\": \"@timestamp\"                  <2>\n+  },\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1,\n+      \"number_of_replicas\": 1,\n+      \"index.lifecycle.name\": \"timeseries_policy\"     <3>\n+    }\n+  }\n+}\n+-----------------------\n+// TEST[continued]\n+\n+<1> Apply the template when a document is indexed into the `timeseries` target.\n+<2> Identifies the timestamp field for the data source, a field that must be present\n+in all documents indexed into the `timeseries` data stream.\n+<3> The name of the ILM policy used to manage the data stream.\n+\n+You can also invoke this API directly to add templates.\n+\n+[discrete]\n+[[ilm-gs-bootstrap]]\n+=== Bootstrap the data stream\n+\n+To get things started, you simply index a document into the name or wildcard pattern defined\n+in the `index_patterns` of the <<indices-templates,composable index template>> that will\n+create the data stream.\n+{es} will automatically create the corresponding data stream and will index the document into\n+the first backing index.\n+\n+For example, the following request creates the `timeseries` data stream and the first generation\n+backing index called `.ds-timeseries-000001`.\n+\n+[source,console]\n+-----------------------\n+POST timeseries/_doc\n+{\n+  \"message\": \"logged the request\",\n+  \"@timestamp\": \"1591890611\"\n+}\n+\n+-----------------------\n+// TEST[continued]\n+\n+When the rollover conditions are met, the `rollover` action:\n+\n+* Creates the second generation backing index, name `.ds-timeseries-000002`.\n+As it is the backing index of the `timeseries` data stream which was created using the `timeseries_template`\n+the template configuration will be applied to the new index.\n+* As it is the latest generation index of the `timeseries` data stream, the newly created\n+backing index `.ds-timeseries-000002` becomes the data stream's write index.\n+\n+This process repeats each time rollover conditions are met.\n+You can search across all of the data stream's backing indices, managed by the `timeseries_policy`,\n+with the `timeseries` data stream name.\n+Write operations are routed to the current write index, whilst read operations will be handled by all\n+backing indices.\n+\n+[discrete]\n+[[ilm-gs-check-progress]]\n+=== Check lifecycle progress\n+\n+To get status information for managed indices, you use the {ilm-init} explain API.\n+This lets you find out things like:\n+\n+* What phase an index is in and when it entered that phase.\n+* The current action and what step is being performed.\n+* If any errors have occurred or progress is blocked.\n+\n+For example, the following request gets information about the `timeseries` indices:\n+\n+[source,console]\n+--------------------------------------------------\n+GET .ds-timeseries-*/_ilm/explain\n+--------------------------------------------------\n+// TEST[continued]\n+\n+The response below shows that the data stream's first generation backing index is waiting in the `hot`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 144}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU0NTk4NQ==", "bodyText": "Fix for OR logic\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            This process repeats each time rollover conditions are met.\n          \n          \n            \n            This process repeats each time a rollover condition is met.", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439545985", "createdAt": "2020-06-12T17:16:48Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/ilm-tutorial.asciidoc", "diffHunk": "@@ -89,13 +91,207 @@ For the complete list of actions that {ilm} can perform, see <<ilm-actions>>.\n \n [discrete]\n [[ilm-gs-apply-policy]]\n-=== Create an index template to apply the lifecycle policy\n+=== Create a composable template to create the data stream and apply the lifecycle policy\n+\n+To create a data stream we'll create a composable template with a `data_stream` definition\n+that will specify the lifecycle policy.\n+\n+For example, you might create a `timeseries_template` that is will bootstrap a data stream\n+named `timeseries`.\n+\n+To enable the ILM to manage the data stream, the template configures one {ilm-init} setting:\n+\n+* `index.lifecycle.name` specifies the name of the lifecycle policy to apply to the data stream.\n+\n+You can use the {kib} Create template wizard to add the template.\n+This wizard invokes the put _index_template API to create the <<indices-templates,composable index template>>\n+with the options you specify.\n+\n+The underlying request looks like this:\n+\n+[source,console]\n+-----------------------\n+PUT _index_template/timeseries_template\n+{\n+  \"index_patterns\": [\"timeseries\"],                 <1>\n+  \"data_stream\": {\n+    \"timestamp_field\": \"@timestamp\"                  <2>\n+  },\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1,\n+      \"number_of_replicas\": 1,\n+      \"index.lifecycle.name\": \"timeseries_policy\"     <3>\n+    }\n+  }\n+}\n+-----------------------\n+// TEST[continued]\n+\n+<1> Apply the template when a document is indexed into the `timeseries` target.\n+<2> Identifies the timestamp field for the data source, a field that must be present\n+in all documents indexed into the `timeseries` data stream.\n+<3> The name of the ILM policy used to manage the data stream.\n+\n+You can also invoke this API directly to add templates.\n+\n+[discrete]\n+[[ilm-gs-bootstrap]]\n+=== Bootstrap the data stream\n+\n+To get things started, you simply index a document into the name or wildcard pattern defined\n+in the `index_patterns` of the <<indices-templates,composable index template>> that will\n+create the data stream.\n+{es} will automatically create the corresponding data stream and will index the document into\n+the first backing index.\n+\n+For example, the following request creates the `timeseries` data stream and the first generation\n+backing index called `.ds-timeseries-000001`.\n+\n+[source,console]\n+-----------------------\n+POST timeseries/_doc\n+{\n+  \"message\": \"logged the request\",\n+  \"@timestamp\": \"1591890611\"\n+}\n+\n+-----------------------\n+// TEST[continued]\n+\n+When the rollover conditions are met, the `rollover` action:\n+\n+* Creates the second generation backing index, name `.ds-timeseries-000002`.\n+As it is the backing index of the `timeseries` data stream which was created using the `timeseries_template`\n+the template configuration will be applied to the new index.\n+* As it is the latest generation index of the `timeseries` data stream, the newly created\n+backing index `.ds-timeseries-000002` becomes the data stream's write index.\n+\n+This process repeats each time rollover conditions are met.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 119}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU0NjUyNw==", "bodyText": "OR logic.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            It remains in this state and {ilm-init} continues to call `attempt-rollover` until the rollover conditions\n          \n          \n            \n            are met.\n          \n          \n            \n            It remains in this state and {ilm-init} continues to call `attempt-rollover` until a rollover condition\n          \n          \n            \n            is met.", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439546527", "createdAt": "2020-06-12T17:17:52Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/ilm-tutorial.asciidoc", "diffHunk": "@@ -89,13 +91,207 @@ For the complete list of actions that {ilm} can perform, see <<ilm-actions>>.\n \n [discrete]\n [[ilm-gs-apply-policy]]\n-=== Create an index template to apply the lifecycle policy\n+=== Create a composable template to create the data stream and apply the lifecycle policy\n+\n+To create a data stream we'll create a composable template with a `data_stream` definition\n+that will specify the lifecycle policy.\n+\n+For example, you might create a `timeseries_template` that is will bootstrap a data stream\n+named `timeseries`.\n+\n+To enable the ILM to manage the data stream, the template configures one {ilm-init} setting:\n+\n+* `index.lifecycle.name` specifies the name of the lifecycle policy to apply to the data stream.\n+\n+You can use the {kib} Create template wizard to add the template.\n+This wizard invokes the put _index_template API to create the <<indices-templates,composable index template>>\n+with the options you specify.\n+\n+The underlying request looks like this:\n+\n+[source,console]\n+-----------------------\n+PUT _index_template/timeseries_template\n+{\n+  \"index_patterns\": [\"timeseries\"],                 <1>\n+  \"data_stream\": {\n+    \"timestamp_field\": \"@timestamp\"                  <2>\n+  },\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1,\n+      \"number_of_replicas\": 1,\n+      \"index.lifecycle.name\": \"timeseries_policy\"     <3>\n+    }\n+  }\n+}\n+-----------------------\n+// TEST[continued]\n+\n+<1> Apply the template when a document is indexed into the `timeseries` target.\n+<2> Identifies the timestamp field for the data source, a field that must be present\n+in all documents indexed into the `timeseries` data stream.\n+<3> The name of the ILM policy used to manage the data stream.\n+\n+You can also invoke this API directly to add templates.\n+\n+[discrete]\n+[[ilm-gs-bootstrap]]\n+=== Bootstrap the data stream\n+\n+To get things started, you simply index a document into the name or wildcard pattern defined\n+in the `index_patterns` of the <<indices-templates,composable index template>> that will\n+create the data stream.\n+{es} will automatically create the corresponding data stream and will index the document into\n+the first backing index.\n+\n+For example, the following request creates the `timeseries` data stream and the first generation\n+backing index called `.ds-timeseries-000001`.\n+\n+[source,console]\n+-----------------------\n+POST timeseries/_doc\n+{\n+  \"message\": \"logged the request\",\n+  \"@timestamp\": \"1591890611\"\n+}\n+\n+-----------------------\n+// TEST[continued]\n+\n+When the rollover conditions are met, the `rollover` action:\n+\n+* Creates the second generation backing index, name `.ds-timeseries-000002`.\n+As it is the backing index of the `timeseries` data stream which was created using the `timeseries_template`\n+the template configuration will be applied to the new index.\n+* As it is the latest generation index of the `timeseries` data stream, the newly created\n+backing index `.ds-timeseries-000002` becomes the data stream's write index.\n+\n+This process repeats each time rollover conditions are met.\n+You can search across all of the data stream's backing indices, managed by the `timeseries_policy`,\n+with the `timeseries` data stream name.\n+Write operations are routed to the current write index, whilst read operations will be handled by all\n+backing indices.\n+\n+[discrete]\n+[[ilm-gs-check-progress]]\n+=== Check lifecycle progress\n+\n+To get status information for managed indices, you use the {ilm-init} explain API.\n+This lets you find out things like:\n+\n+* What phase an index is in and when it entered that phase.\n+* The current action and what step is being performed.\n+* If any errors have occurred or progress is blocked.\n+\n+For example, the following request gets information about the `timeseries` indices:\n+\n+[source,console]\n+--------------------------------------------------\n+GET .ds-timeseries-*/_ilm/explain\n+--------------------------------------------------\n+// TEST[continued]\n+\n+The response below shows that the data stream's first generation backing index is waiting in the `hot`\n+phase's `rollover` action.\n+It remains in this state and {ilm-init} continues to call `attempt-rollover` until the rollover conditions\n+are met.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 147}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU0NzUyNA==", "bodyText": "This could be misread to state that you can't delete a data stream. Reword for clarity.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            <<data-streams, data streams>> APIs don't support the delete and update APIs directly,\n          \n          \n            \n            data streams don't support delete and update requests directly,", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439547524", "createdAt": "2020-06-12T17:20:04Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/ilm-tutorial.asciidoc", "diffHunk": "@@ -89,13 +91,207 @@ For the complete list of actions that {ilm} can perform, see <<ilm-actions>>.\n \n [discrete]\n [[ilm-gs-apply-policy]]\n-=== Create an index template to apply the lifecycle policy\n+=== Create a composable template to create the data stream and apply the lifecycle policy\n+\n+To create a data stream we'll create a composable template with a `data_stream` definition\n+that will specify the lifecycle policy.\n+\n+For example, you might create a `timeseries_template` that is will bootstrap a data stream\n+named `timeseries`.\n+\n+To enable the ILM to manage the data stream, the template configures one {ilm-init} setting:\n+\n+* `index.lifecycle.name` specifies the name of the lifecycle policy to apply to the data stream.\n+\n+You can use the {kib} Create template wizard to add the template.\n+This wizard invokes the put _index_template API to create the <<indices-templates,composable index template>>\n+with the options you specify.\n+\n+The underlying request looks like this:\n+\n+[source,console]\n+-----------------------\n+PUT _index_template/timeseries_template\n+{\n+  \"index_patterns\": [\"timeseries\"],                 <1>\n+  \"data_stream\": {\n+    \"timestamp_field\": \"@timestamp\"                  <2>\n+  },\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1,\n+      \"number_of_replicas\": 1,\n+      \"index.lifecycle.name\": \"timeseries_policy\"     <3>\n+    }\n+  }\n+}\n+-----------------------\n+// TEST[continued]\n+\n+<1> Apply the template when a document is indexed into the `timeseries` target.\n+<2> Identifies the timestamp field for the data source, a field that must be present\n+in all documents indexed into the `timeseries` data stream.\n+<3> The name of the ILM policy used to manage the data stream.\n+\n+You can also invoke this API directly to add templates.\n+\n+[discrete]\n+[[ilm-gs-bootstrap]]\n+=== Bootstrap the data stream\n+\n+To get things started, you simply index a document into the name or wildcard pattern defined\n+in the `index_patterns` of the <<indices-templates,composable index template>> that will\n+create the data stream.\n+{es} will automatically create the corresponding data stream and will index the document into\n+the first backing index.\n+\n+For example, the following request creates the `timeseries` data stream and the first generation\n+backing index called `.ds-timeseries-000001`.\n+\n+[source,console]\n+-----------------------\n+POST timeseries/_doc\n+{\n+  \"message\": \"logged the request\",\n+  \"@timestamp\": \"1591890611\"\n+}\n+\n+-----------------------\n+// TEST[continued]\n+\n+When the rollover conditions are met, the `rollover` action:\n+\n+* Creates the second generation backing index, name `.ds-timeseries-000002`.\n+As it is the backing index of the `timeseries` data stream which was created using the `timeseries_template`\n+the template configuration will be applied to the new index.\n+* As it is the latest generation index of the `timeseries` data stream, the newly created\n+backing index `.ds-timeseries-000002` becomes the data stream's write index.\n+\n+This process repeats each time rollover conditions are met.\n+You can search across all of the data stream's backing indices, managed by the `timeseries_policy`,\n+with the `timeseries` data stream name.\n+Write operations are routed to the current write index, whilst read operations will be handled by all\n+backing indices.\n+\n+[discrete]\n+[[ilm-gs-check-progress]]\n+=== Check lifecycle progress\n+\n+To get status information for managed indices, you use the {ilm-init} explain API.\n+This lets you find out things like:\n+\n+* What phase an index is in and when it entered that phase.\n+* The current action and what step is being performed.\n+* If any errors have occurred or progress is blocked.\n+\n+For example, the following request gets information about the `timeseries` indices:\n+\n+[source,console]\n+--------------------------------------------------\n+GET .ds-timeseries-*/_ilm/explain\n+--------------------------------------------------\n+// TEST[continued]\n+\n+The response below shows that the data stream's first generation backing index is waiting in the `hot`\n+phase's `rollover` action.\n+It remains in this state and {ilm-init} continues to call `attempt-rollover` until the rollover conditions\n+are met.\n+\n+// [[36818c6d9f434d387819c30bd9addb14]]\n+[source,console-result]\n+--------------------------------------------------\n+{\n+  \"indices\": {\n+    \".ds-timeseries-000001\": {\n+      \"index\": \".ds-timeseries-000001\",\n+      \"managed\": true,\n+      \"policy\": \"timeseries_policy\",             <1>\n+      \"lifecycle_date_millis\": 1538475653281,\n+      \"age\": \"30s\",                              <2>\n+      \"phase\": \"hot\",\n+      \"phase_time_millis\": 1538475653317,\n+      \"action\": \"rollover\",\n+      \"action_time_millis\": 1538475653317,\n+      \"step\": \"attempt-rollover\",                <3>\n+      \"step_time_millis\": 1538475653317,\n+      \"phase_execution\": {\n+        \"policy\": \"timeseries_policy\",\n+        \"phase_definition\": {                    <4>\n+          \"min_age\": \"0ms\",\n+          \"actions\": {\n+            \"rollover\": {\n+              \"max_size\": \"50gb\",\n+              \"max_age\": \"30d\"\n+            }\n+          }\n+        },\n+        \"version\": 1,\n+        \"modified_date_in_millis\": 1539609701576\n+      }\n+    }\n+  }\n+}\n+--------------------------------------------------\n+// TESTRESPONSE[skip:no way to know if we will get this response immediately]\n+\n+<1> The policy used to manage the index\n+<2> The age of the index\n+<3> The step {ilm-init} is performing on the index\n+<4> The definition of the current phase (the `hot` phase)\n+\n+//////////////////////////\n+\n+[source,console]\n+--------------------------------------------------\n+DELETE /_data_stream/timeseries\n+--------------------------------------------------\n+// TEST[continued]\n+\n+//////////////////////////\n+\n+\n+//////////////////////////\n+\n+[source,console]\n+--------------------------------------------------\n+DELETE /_index_template/timeseries_template\n+--------------------------------------------------\n+// TEST[continued]\n+\n+//////////////////////////\n+\n+[discrete]\n+[[manage-time-series-data-without-data-streams]]\n+=== Manage time-series data without data streams\n+\n+Even though <<data-streams, data streams>> are a convenient way to scale\n+and manage time-series data, they are designed to be append-only. We recognise there\n+might be use-cases where data needs to be updated or deleted in place and the\n+<<data-streams, data streams>> APIs don't support the delete and update APIs directly,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 219}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU0Nzk5MQ==", "bodyText": "Nit: Reword for clarity.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Another option to manage the time-series data in these cases is to use an index alias\n          \n          \n            \n            so you can periodically roll over to a new index.\n          \n          \n            \n            In these cases, you can use an index alias to manage indices containing the time-series data\n          \n          \n            \n            and periodically roll over to a new index.", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439547991", "createdAt": "2020-06-12T17:21:04Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/ilm-tutorial.asciidoc", "diffHunk": "@@ -89,13 +91,207 @@ For the complete list of actions that {ilm} can perform, see <<ilm-actions>>.\n \n [discrete]\n [[ilm-gs-apply-policy]]\n-=== Create an index template to apply the lifecycle policy\n+=== Create a composable template to create the data stream and apply the lifecycle policy\n+\n+To create a data stream we'll create a composable template with a `data_stream` definition\n+that will specify the lifecycle policy.\n+\n+For example, you might create a `timeseries_template` that is will bootstrap a data stream\n+named `timeseries`.\n+\n+To enable the ILM to manage the data stream, the template configures one {ilm-init} setting:\n+\n+* `index.lifecycle.name` specifies the name of the lifecycle policy to apply to the data stream.\n+\n+You can use the {kib} Create template wizard to add the template.\n+This wizard invokes the put _index_template API to create the <<indices-templates,composable index template>>\n+with the options you specify.\n+\n+The underlying request looks like this:\n+\n+[source,console]\n+-----------------------\n+PUT _index_template/timeseries_template\n+{\n+  \"index_patterns\": [\"timeseries\"],                 <1>\n+  \"data_stream\": {\n+    \"timestamp_field\": \"@timestamp\"                  <2>\n+  },\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1,\n+      \"number_of_replicas\": 1,\n+      \"index.lifecycle.name\": \"timeseries_policy\"     <3>\n+    }\n+  }\n+}\n+-----------------------\n+// TEST[continued]\n+\n+<1> Apply the template when a document is indexed into the `timeseries` target.\n+<2> Identifies the timestamp field for the data source, a field that must be present\n+in all documents indexed into the `timeseries` data stream.\n+<3> The name of the ILM policy used to manage the data stream.\n+\n+You can also invoke this API directly to add templates.\n+\n+[discrete]\n+[[ilm-gs-bootstrap]]\n+=== Bootstrap the data stream\n+\n+To get things started, you simply index a document into the name or wildcard pattern defined\n+in the `index_patterns` of the <<indices-templates,composable index template>> that will\n+create the data stream.\n+{es} will automatically create the corresponding data stream and will index the document into\n+the first backing index.\n+\n+For example, the following request creates the `timeseries` data stream and the first generation\n+backing index called `.ds-timeseries-000001`.\n+\n+[source,console]\n+-----------------------\n+POST timeseries/_doc\n+{\n+  \"message\": \"logged the request\",\n+  \"@timestamp\": \"1591890611\"\n+}\n+\n+-----------------------\n+// TEST[continued]\n+\n+When the rollover conditions are met, the `rollover` action:\n+\n+* Creates the second generation backing index, name `.ds-timeseries-000002`.\n+As it is the backing index of the `timeseries` data stream which was created using the `timeseries_template`\n+the template configuration will be applied to the new index.\n+* As it is the latest generation index of the `timeseries` data stream, the newly created\n+backing index `.ds-timeseries-000002` becomes the data stream's write index.\n+\n+This process repeats each time rollover conditions are met.\n+You can search across all of the data stream's backing indices, managed by the `timeseries_policy`,\n+with the `timeseries` data stream name.\n+Write operations are routed to the current write index, whilst read operations will be handled by all\n+backing indices.\n+\n+[discrete]\n+[[ilm-gs-check-progress]]\n+=== Check lifecycle progress\n+\n+To get status information for managed indices, you use the {ilm-init} explain API.\n+This lets you find out things like:\n+\n+* What phase an index is in and when it entered that phase.\n+* The current action and what step is being performed.\n+* If any errors have occurred or progress is blocked.\n+\n+For example, the following request gets information about the `timeseries` indices:\n+\n+[source,console]\n+--------------------------------------------------\n+GET .ds-timeseries-*/_ilm/explain\n+--------------------------------------------------\n+// TEST[continued]\n+\n+The response below shows that the data stream's first generation backing index is waiting in the `hot`\n+phase's `rollover` action.\n+It remains in this state and {ilm-init} continues to call `attempt-rollover` until the rollover conditions\n+are met.\n+\n+// [[36818c6d9f434d387819c30bd9addb14]]\n+[source,console-result]\n+--------------------------------------------------\n+{\n+  \"indices\": {\n+    \".ds-timeseries-000001\": {\n+      \"index\": \".ds-timeseries-000001\",\n+      \"managed\": true,\n+      \"policy\": \"timeseries_policy\",             <1>\n+      \"lifecycle_date_millis\": 1538475653281,\n+      \"age\": \"30s\",                              <2>\n+      \"phase\": \"hot\",\n+      \"phase_time_millis\": 1538475653317,\n+      \"action\": \"rollover\",\n+      \"action_time_millis\": 1538475653317,\n+      \"step\": \"attempt-rollover\",                <3>\n+      \"step_time_millis\": 1538475653317,\n+      \"phase_execution\": {\n+        \"policy\": \"timeseries_policy\",\n+        \"phase_definition\": {                    <4>\n+          \"min_age\": \"0ms\",\n+          \"actions\": {\n+            \"rollover\": {\n+              \"max_size\": \"50gb\",\n+              \"max_age\": \"30d\"\n+            }\n+          }\n+        },\n+        \"version\": 1,\n+        \"modified_date_in_millis\": 1539609701576\n+      }\n+    }\n+  }\n+}\n+--------------------------------------------------\n+// TESTRESPONSE[skip:no way to know if we will get this response immediately]\n+\n+<1> The policy used to manage the index\n+<2> The age of the index\n+<3> The step {ilm-init} is performing on the index\n+<4> The definition of the current phase (the `hot` phase)\n+\n+//////////////////////////\n+\n+[source,console]\n+--------------------------------------------------\n+DELETE /_data_stream/timeseries\n+--------------------------------------------------\n+// TEST[continued]\n+\n+//////////////////////////\n+\n+\n+//////////////////////////\n+\n+[source,console]\n+--------------------------------------------------\n+DELETE /_index_template/timeseries_template\n+--------------------------------------------------\n+// TEST[continued]\n+\n+//////////////////////////\n+\n+[discrete]\n+[[manage-time-series-data-without-data-streams]]\n+=== Manage time-series data without data streams\n+\n+Even though <<data-streams, data streams>> are a convenient way to scale\n+and manage time-series data, they are designed to be append-only. We recognise there\n+might be use-cases where data needs to be updated or deleted in place and the\n+<<data-streams, data streams>> APIs don't support the delete and update APIs directly,\n+so the index APIs would need to be used directly on the data stream's backing indices.\n+\n+Another option to manage the time-series data in these cases is to use an index alias\n+so you can periodically roll over to a new index.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 223}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU0ODA2OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            To automate rollover and management of time-series indices with {ilm-init} over an index\n          \n          \n            \n            To automate rollover and management of time-series indices with {ilm-init} using an index", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439548068", "createdAt": "2020-06-12T17:21:17Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/ilm-tutorial.asciidoc", "diffHunk": "@@ -89,13 +91,207 @@ For the complete list of actions that {ilm} can perform, see <<ilm-actions>>.\n \n [discrete]\n [[ilm-gs-apply-policy]]\n-=== Create an index template to apply the lifecycle policy\n+=== Create a composable template to create the data stream and apply the lifecycle policy\n+\n+To create a data stream we'll create a composable template with a `data_stream` definition\n+that will specify the lifecycle policy.\n+\n+For example, you might create a `timeseries_template` that is will bootstrap a data stream\n+named `timeseries`.\n+\n+To enable the ILM to manage the data stream, the template configures one {ilm-init} setting:\n+\n+* `index.lifecycle.name` specifies the name of the lifecycle policy to apply to the data stream.\n+\n+You can use the {kib} Create template wizard to add the template.\n+This wizard invokes the put _index_template API to create the <<indices-templates,composable index template>>\n+with the options you specify.\n+\n+The underlying request looks like this:\n+\n+[source,console]\n+-----------------------\n+PUT _index_template/timeseries_template\n+{\n+  \"index_patterns\": [\"timeseries\"],                 <1>\n+  \"data_stream\": {\n+    \"timestamp_field\": \"@timestamp\"                  <2>\n+  },\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1,\n+      \"number_of_replicas\": 1,\n+      \"index.lifecycle.name\": \"timeseries_policy\"     <3>\n+    }\n+  }\n+}\n+-----------------------\n+// TEST[continued]\n+\n+<1> Apply the template when a document is indexed into the `timeseries` target.\n+<2> Identifies the timestamp field for the data source, a field that must be present\n+in all documents indexed into the `timeseries` data stream.\n+<3> The name of the ILM policy used to manage the data stream.\n+\n+You can also invoke this API directly to add templates.\n+\n+[discrete]\n+[[ilm-gs-bootstrap]]\n+=== Bootstrap the data stream\n+\n+To get things started, you simply index a document into the name or wildcard pattern defined\n+in the `index_patterns` of the <<indices-templates,composable index template>> that will\n+create the data stream.\n+{es} will automatically create the corresponding data stream and will index the document into\n+the first backing index.\n+\n+For example, the following request creates the `timeseries` data stream and the first generation\n+backing index called `.ds-timeseries-000001`.\n+\n+[source,console]\n+-----------------------\n+POST timeseries/_doc\n+{\n+  \"message\": \"logged the request\",\n+  \"@timestamp\": \"1591890611\"\n+}\n+\n+-----------------------\n+// TEST[continued]\n+\n+When the rollover conditions are met, the `rollover` action:\n+\n+* Creates the second generation backing index, name `.ds-timeseries-000002`.\n+As it is the backing index of the `timeseries` data stream which was created using the `timeseries_template`\n+the template configuration will be applied to the new index.\n+* As it is the latest generation index of the `timeseries` data stream, the newly created\n+backing index `.ds-timeseries-000002` becomes the data stream's write index.\n+\n+This process repeats each time rollover conditions are met.\n+You can search across all of the data stream's backing indices, managed by the `timeseries_policy`,\n+with the `timeseries` data stream name.\n+Write operations are routed to the current write index, whilst read operations will be handled by all\n+backing indices.\n+\n+[discrete]\n+[[ilm-gs-check-progress]]\n+=== Check lifecycle progress\n+\n+To get status information for managed indices, you use the {ilm-init} explain API.\n+This lets you find out things like:\n+\n+* What phase an index is in and when it entered that phase.\n+* The current action and what step is being performed.\n+* If any errors have occurred or progress is blocked.\n+\n+For example, the following request gets information about the `timeseries` indices:\n+\n+[source,console]\n+--------------------------------------------------\n+GET .ds-timeseries-*/_ilm/explain\n+--------------------------------------------------\n+// TEST[continued]\n+\n+The response below shows that the data stream's first generation backing index is waiting in the `hot`\n+phase's `rollover` action.\n+It remains in this state and {ilm-init} continues to call `attempt-rollover` until the rollover conditions\n+are met.\n+\n+// [[36818c6d9f434d387819c30bd9addb14]]\n+[source,console-result]\n+--------------------------------------------------\n+{\n+  \"indices\": {\n+    \".ds-timeseries-000001\": {\n+      \"index\": \".ds-timeseries-000001\",\n+      \"managed\": true,\n+      \"policy\": \"timeseries_policy\",             <1>\n+      \"lifecycle_date_millis\": 1538475653281,\n+      \"age\": \"30s\",                              <2>\n+      \"phase\": \"hot\",\n+      \"phase_time_millis\": 1538475653317,\n+      \"action\": \"rollover\",\n+      \"action_time_millis\": 1538475653317,\n+      \"step\": \"attempt-rollover\",                <3>\n+      \"step_time_millis\": 1538475653317,\n+      \"phase_execution\": {\n+        \"policy\": \"timeseries_policy\",\n+        \"phase_definition\": {                    <4>\n+          \"min_age\": \"0ms\",\n+          \"actions\": {\n+            \"rollover\": {\n+              \"max_size\": \"50gb\",\n+              \"max_age\": \"30d\"\n+            }\n+          }\n+        },\n+        \"version\": 1,\n+        \"modified_date_in_millis\": 1539609701576\n+      }\n+    }\n+  }\n+}\n+--------------------------------------------------\n+// TESTRESPONSE[skip:no way to know if we will get this response immediately]\n+\n+<1> The policy used to manage the index\n+<2> The age of the index\n+<3> The step {ilm-init} is performing on the index\n+<4> The definition of the current phase (the `hot` phase)\n+\n+//////////////////////////\n+\n+[source,console]\n+--------------------------------------------------\n+DELETE /_data_stream/timeseries\n+--------------------------------------------------\n+// TEST[continued]\n+\n+//////////////////////////\n+\n+\n+//////////////////////////\n+\n+[source,console]\n+--------------------------------------------------\n+DELETE /_index_template/timeseries_template\n+--------------------------------------------------\n+// TEST[continued]\n+\n+//////////////////////////\n+\n+[discrete]\n+[[manage-time-series-data-without-data-streams]]\n+=== Manage time-series data without data streams\n+\n+Even though <<data-streams, data streams>> are a convenient way to scale\n+and manage time-series data, they are designed to be append-only. We recognise there\n+might be use-cases where data needs to be updated or deleted in place and the\n+<<data-streams, data streams>> APIs don't support the delete and update APIs directly,\n+so the index APIs would need to be used directly on the data stream's backing indices.\n+\n+Another option to manage the time-series data in these cases is to use an index alias\n+so you can periodically roll over to a new index.\n+\n+To automate rollover and management of time-series indices with {ilm-init} over an index", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 225}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU0ODk1Ng==", "bodyText": "Nit: Breaks this into two sentences for readability.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            <<indices-create-data-stream, Data streams>> are the recommended abstraction for managing time-series\n          \n          \n            \n            data as they automatically track the write index whilst also keeping the amount of configuration to a\n          \n          \n            \n            minimum.\n          \n          \n            \n            We recommend using <<indices-create-data-stream, data streams>> to manage time-series\n          \n          \n            \n            data. Data streams automatically track the write index while keeping configuration to a minimum.", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439548956", "createdAt": "2020-06-12T17:23:10Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/index-rollover.asciidoc", "diffHunk": "@@ -12,7 +12,20 @@ Using rolling indices enables you to:\n * Shift older, less frequently accessed data to less expensive _cold_ nodes,\n * Delete data according to your retention policies by removing entire indices.\n \n-Rollover relies on three things:\n+<<indices-create-data-stream, Data streams>> are the recommended abstraction for managing time-series\n+data as they automatically track the write index whilst also keeping the amount of configuration to a\n+minimum.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU1MDU1OA==", "bodyText": "I think these requirements are incomplete as a mapping is now required for the timestamp field.\nEither way, I think a bulleted list makes it more readable.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Rolling over using <<indices-create-data-stream, data streams>> only requires creating a\n          \n          \n            \n            <<indices-templates,composable index template>> containing a name or a wildcard pattern for the data stream\n          \n          \n            \n            in the `index_patterns` and a `data_stream` definiton that contains the `timestamp_field` property which\n          \n          \n            \n            will be present in the time-series documents that will be ingested.\n          \n          \n            \n            Each data stream requires a <<indices-templates,composable index template>> that contains:\n          \n          \n            \n            \n          \n          \n            \n            * A name or wildcard (`*`) pattern for the data stream.\n          \n          \n            \n            \n          \n          \n            \n            * The data stream's timestamp field. This field must be mapped as a\n          \n          \n            \n              <<date,`date`>> or <<date_nanos,`date_nanos`>> field datatype and must be\n          \n          \n            \n              included in every document indexed to the data stream.\n          \n          \n            \n              \n          \n          \n            \n              * The mappings and settings applied to each backing index when it's created.", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439550558", "createdAt": "2020-06-12T17:26:14Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/index-rollover.asciidoc", "diffHunk": "@@ -12,7 +12,20 @@ Using rolling indices enables you to:\n * Shift older, less frequently accessed data to less expensive _cold_ nodes,\n * Delete data according to your retention policies by removing entire indices.\n \n-Rollover relies on three things:\n+<<indices-create-data-stream, Data streams>> are the recommended abstraction for managing time-series\n+data as they automatically track the write index whilst also keeping the amount of configuration to a\n+minimum.\n+\n+Rolling over using <<indices-create-data-stream, data streams>> only requires creating a\n+<<indices-templates,composable index template>> containing a name or a wildcard pattern for the data stream\n+in the `index_patterns` and a `data_stream` definiton that contains the `timestamp_field` property which\n+will be present in the time-series documents that will be ingested.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU1MTYxMA==", "bodyText": "Nit: Breaks this into two sentences.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            For other use cases, where data needs to be updated in place, the management of time-series data can be\n          \n          \n            \n            done using <<indices-aliases, indices aliases>>, however there are a few more configuration steps and\n          \n          \n            \n            concepts:\n          \n          \n            \n            If your use case requires data to be updated in place, you can instead manage your time-series data using <<indices-aliases, indices aliases>>. However, there are a few more configuration steps and\n          \n          \n            \n            concepts:", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439551610", "createdAt": "2020-06-12T17:28:16Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/index-rollover.asciidoc", "diffHunk": "@@ -12,7 +12,20 @@ Using rolling indices enables you to:\n * Shift older, less frequently accessed data to less expensive _cold_ nodes,\n * Delete data according to your retention policies by removing entire indices.\n \n-Rollover relies on three things:\n+<<indices-create-data-stream, Data streams>> are the recommended abstraction for managing time-series\n+data as they automatically track the write index whilst also keeping the amount of configuration to a\n+minimum.\n+\n+Rolling over using <<indices-create-data-stream, data streams>> only requires creating a\n+<<indices-templates,composable index template>> containing a name or a wildcard pattern for the data stream\n+in the `index_patterns` and a `data_stream` definiton that contains the `timestamp_field` property which\n+will be present in the time-series documents that will be ingested.\n+\n+<<indices-create-data-stream, Data streams>> are designed for append-only data, where the data stream name\n+can be used as the operations (read, write, rollover, shrink etc.) target.\n+For other use cases, where data needs to be updated in place, the management of time-series data can be\n+done using <<indices-aliases, indices aliases>>, however there are a few more configuration steps and\n+concepts:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU1NjA3MQ==", "bodyText": "Typo\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Creates the second generation backing index, name `.ds-timeseries-000002`.\n          \n          \n            \n            * Creates the second generation backing index, named `.ds-timeseries-000002`.", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439556071", "createdAt": "2020-06-12T17:37:31Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/ilm-tutorial.asciidoc", "diffHunk": "@@ -89,13 +91,207 @@ For the complete list of actions that {ilm} can perform, see <<ilm-actions>>.\n \n [discrete]\n [[ilm-gs-apply-policy]]\n-=== Create an index template to apply the lifecycle policy\n+=== Create a composable template to create the data stream and apply the lifecycle policy\n+\n+To create a data stream we'll create a composable template with a `data_stream` definition\n+that will specify the lifecycle policy.\n+\n+For example, you might create a `timeseries_template` that is will bootstrap a data stream\n+named `timeseries`.\n+\n+To enable the ILM to manage the data stream, the template configures one {ilm-init} setting:\n+\n+* `index.lifecycle.name` specifies the name of the lifecycle policy to apply to the data stream.\n+\n+You can use the {kib} Create template wizard to add the template.\n+This wizard invokes the put _index_template API to create the <<indices-templates,composable index template>>\n+with the options you specify.\n+\n+The underlying request looks like this:\n+\n+[source,console]\n+-----------------------\n+PUT _index_template/timeseries_template\n+{\n+  \"index_patterns\": [\"timeseries\"],                 <1>\n+  \"data_stream\": {\n+    \"timestamp_field\": \"@timestamp\"                  <2>\n+  },\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1,\n+      \"number_of_replicas\": 1,\n+      \"index.lifecycle.name\": \"timeseries_policy\"     <3>\n+    }\n+  }\n+}\n+-----------------------\n+// TEST[continued]\n+\n+<1> Apply the template when a document is indexed into the `timeseries` target.\n+<2> Identifies the timestamp field for the data source, a field that must be present\n+in all documents indexed into the `timeseries` data stream.\n+<3> The name of the ILM policy used to manage the data stream.\n+\n+You can also invoke this API directly to add templates.\n+\n+[discrete]\n+[[ilm-gs-bootstrap]]\n+=== Bootstrap the data stream\n+\n+To get things started, you simply index a document into the name or wildcard pattern defined\n+in the `index_patterns` of the <<indices-templates,composable index template>> that will\n+create the data stream.\n+{es} will automatically create the corresponding data stream and will index the document into\n+the first backing index.\n+\n+For example, the following request creates the `timeseries` data stream and the first generation\n+backing index called `.ds-timeseries-000001`.\n+\n+[source,console]\n+-----------------------\n+POST timeseries/_doc\n+{\n+  \"message\": \"logged the request\",\n+  \"@timestamp\": \"1591890611\"\n+}\n+\n+-----------------------\n+// TEST[continued]\n+\n+When the rollover conditions are met, the `rollover` action:\n+\n+* Creates the second generation backing index, name `.ds-timeseries-000002`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 113}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU1NjgxNw==", "bodyText": "Nit: Reword for clarity\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            As it is the backing index of the `timeseries` data stream which was created using the `timeseries_template`\n          \n          \n            \n            the template configuration will be applied to the new index.\n          \n          \n            \n            Because it is a backing index of the `timeseries` data stream, the configuration from the `timeseries_template` composable template is applied to the new index.", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439556817", "createdAt": "2020-06-12T17:39:10Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/ilm-tutorial.asciidoc", "diffHunk": "@@ -89,13 +91,207 @@ For the complete list of actions that {ilm} can perform, see <<ilm-actions>>.\n \n [discrete]\n [[ilm-gs-apply-policy]]\n-=== Create an index template to apply the lifecycle policy\n+=== Create a composable template to create the data stream and apply the lifecycle policy\n+\n+To create a data stream we'll create a composable template with a `data_stream` definition\n+that will specify the lifecycle policy.\n+\n+For example, you might create a `timeseries_template` that is will bootstrap a data stream\n+named `timeseries`.\n+\n+To enable the ILM to manage the data stream, the template configures one {ilm-init} setting:\n+\n+* `index.lifecycle.name` specifies the name of the lifecycle policy to apply to the data stream.\n+\n+You can use the {kib} Create template wizard to add the template.\n+This wizard invokes the put _index_template API to create the <<indices-templates,composable index template>>\n+with the options you specify.\n+\n+The underlying request looks like this:\n+\n+[source,console]\n+-----------------------\n+PUT _index_template/timeseries_template\n+{\n+  \"index_patterns\": [\"timeseries\"],                 <1>\n+  \"data_stream\": {\n+    \"timestamp_field\": \"@timestamp\"                  <2>\n+  },\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1,\n+      \"number_of_replicas\": 1,\n+      \"index.lifecycle.name\": \"timeseries_policy\"     <3>\n+    }\n+  }\n+}\n+-----------------------\n+// TEST[continued]\n+\n+<1> Apply the template when a document is indexed into the `timeseries` target.\n+<2> Identifies the timestamp field for the data source, a field that must be present\n+in all documents indexed into the `timeseries` data stream.\n+<3> The name of the ILM policy used to manage the data stream.\n+\n+You can also invoke this API directly to add templates.\n+\n+[discrete]\n+[[ilm-gs-bootstrap]]\n+=== Bootstrap the data stream\n+\n+To get things started, you simply index a document into the name or wildcard pattern defined\n+in the `index_patterns` of the <<indices-templates,composable index template>> that will\n+create the data stream.\n+{es} will automatically create the corresponding data stream and will index the document into\n+the first backing index.\n+\n+For example, the following request creates the `timeseries` data stream and the first generation\n+backing index called `.ds-timeseries-000001`.\n+\n+[source,console]\n+-----------------------\n+POST timeseries/_doc\n+{\n+  \"message\": \"logged the request\",\n+  \"@timestamp\": \"1591890611\"\n+}\n+\n+-----------------------\n+// TEST[continued]\n+\n+When the rollover conditions are met, the `rollover` action:\n+\n+* Creates the second generation backing index, name `.ds-timeseries-000002`.\n+As it is the backing index of the `timeseries` data stream which was created using the `timeseries_template`\n+the template configuration will be applied to the new index.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 115}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU1ODM1Nw==", "bodyText": "Remove redundant link.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            <<indices-create-data-stream, Data streams>> are designed for append-only data, where the data stream name\n          \n          \n            \n            Data streams are designed for append-only data, where the data stream name", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439558357", "createdAt": "2020-06-12T17:42:34Z", "author": {"login": "jrodewig"}, "path": "docs/reference/ilm/index-rollover.asciidoc", "diffHunk": "@@ -12,7 +12,20 @@ Using rolling indices enables you to:\n * Shift older, less frequently accessed data to less expensive _cold_ nodes,\n * Delete data according to your retention policies by removing entire indices.\n \n-Rollover relies on three things:\n+<<indices-create-data-stream, Data streams>> are the recommended abstraction for managing time-series\n+data as they automatically track the write index whilst also keeping the amount of configuration to a\n+minimum.\n+\n+Rolling over using <<indices-create-data-stream, data streams>> only requires creating a\n+<<indices-templates,composable index template>> containing a name or a wildcard pattern for the data stream\n+in the `index_patterns` and a `data_stream` definiton that contains the `timestamp_field` property which\n+will be present in the time-series documents that will be ingested.\n+\n+<<indices-create-data-stream, Data streams>> are designed for append-only data, where the data stream name", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5OTc0MjI3", "url": "https://github.com/elastic/elasticsearch/pull/58035#pullrequestreview-429974227", "createdAt": "2020-06-12T19:02:15Z", "commit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "state": "APPROVED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxOTowMjoxNVrOGjOtfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxOToxNDozOFrOGjPBsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU5NDM2Ng==", "bodyText": "If we do keep it, I think removing the \"out of the box\" phrase might make it a little clearer.", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439594366", "createdAt": "2020-06-12T19:02:15Z", "author": {"login": "dakrone"}, "path": "docs/reference/ilm/actions/ilm-rollover.asciidoc", "diffHunk": "@@ -4,15 +4,21 @@\n \n Phases allowed: hot.\n \n-Rolls an alias over to a new index when the existing index meets one of the rollover conditions.\n+Rolls over a target to a new index when the existing index meets one of the rollover conditions.\n \n-IMPORTANT: If the rollover action is used on a <<ccr-put-follow,follower index>>, \n+IMPORTANT: If the rollover action is used on a <<ccr-put-follow,follower index>>,\n policy execution waits until the leader index rolls over (or is\n-<<skipping-rollover, otherwise marked complete>>), \n-then converts the follower index into a regular index with the \n+<<skipping-rollover, otherwise marked complete>>),\n+then converts the follower index into a regular index with the\n <<ilm-unfollow-action, Unfollow action>>.\n \n-For a managed index to be rolled over: \n+A rollover target can be either a <<data-streams, data stream>> or an <<indices-aliases, index alias>>.\n+When targeting a <<data-streams, data stream>>, the new index becomes the data stream's write index\n+and its generation is incremented. The <<data-streams, data stream>> out of the box makes sure\n+the backing index has the correct name pattern, and the write index (ie. latest generation\n+backing index) will be the target index to be rolled over.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUxMTgxNg=="}, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU5NTcwOQ==", "bodyText": "I think both of these (both the original and James' suggestion) need to mention that the user could also specify a rollover in their ILM policy, I'm concerned that users will think that in order to use shrink at all (even with an existing rollover in their policy) they will have to manually roll over their index.", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439595709", "createdAt": "2020-06-12T19:05:28Z", "author": {"login": "dakrone"}, "path": "docs/reference/ilm/actions/ilm-shrink.asciidoc", "diffHunk": "@@ -21,6 +21,15 @@ policy execution waits until the leader index rolls over (or is\n then converts the follower index into a regular index with the \n <<ilm-unfollow-action,the Unfollow action>> before performing the shrink operation.\n \n+If the managed index is part of a <<data-streams, data stream>>,\n+the shrunken index will replace the original index in the data stream.\n+\n+[NOTE]\n+This action will fail if the source index is a <<data-streams, data stream's>>\n+write index. Manually rolling over the data stream will change the\n+<<data-streams, data stream's>> write index and the action will be able to resume\n+shrinking the source index.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUyNTM4NA=="}, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU5NjgzNw==", "bodyText": "Starting the sentence with \"Because\" sounds awkward to me :D my suggestion:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            To create a data stream we'll create a composable template with a `data_stream` definition\n          \n          \n            \n            that will specify the lifecycle policy.\n          \n          \n            \n            To set up a data stream, first create a composable template to specify the lifecycle policy. A composable template for used a data stream must include a `data_stream` definition.", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439596837", "createdAt": "2020-06-12T19:08:11Z", "author": {"login": "dakrone"}, "path": "docs/reference/ilm/ilm-tutorial.asciidoc", "diffHunk": "@@ -89,13 +91,207 @@ For the complete list of actions that {ilm} can perform, see <<ilm-actions>>.\n \n [discrete]\n [[ilm-gs-apply-policy]]\n-=== Create an index template to apply the lifecycle policy\n+=== Create a composable template to create the data stream and apply the lifecycle policy\n+\n+To create a data stream we'll create a composable template with a `data_stream` definition\n+that will specify the lifecycle policy.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUzODIzMQ=="}, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU5ODQ5Mw==", "bodyText": "I don't like @jrodewig's suggestion, the lifecycle policy does not belong to a data stream (that is a confusing notion). I prefer:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            When the rollover conditions are met, the `rollover` action:\n          \n          \n            \n            When a rollover condition in the lifecycle policy is met, the `rollover` action:", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439598493", "createdAt": "2020-06-12T19:12:07Z", "author": {"login": "dakrone"}, "path": "docs/reference/ilm/ilm-tutorial.asciidoc", "diffHunk": "@@ -89,13 +91,207 @@ For the complete list of actions that {ilm} can perform, see <<ilm-actions>>.\n \n [discrete]\n [[ilm-gs-apply-policy]]\n-=== Create an index template to apply the lifecycle policy\n+=== Create a composable template to create the data stream and apply the lifecycle policy\n+\n+To create a data stream we'll create a composable template with a `data_stream` definition\n+that will specify the lifecycle policy.\n+\n+For example, you might create a `timeseries_template` that is will bootstrap a data stream\n+named `timeseries`.\n+\n+To enable the ILM to manage the data stream, the template configures one {ilm-init} setting:\n+\n+* `index.lifecycle.name` specifies the name of the lifecycle policy to apply to the data stream.\n+\n+You can use the {kib} Create template wizard to add the template.\n+This wizard invokes the put _index_template API to create the <<indices-templates,composable index template>>\n+with the options you specify.\n+\n+The underlying request looks like this:\n+\n+[source,console]\n+-----------------------\n+PUT _index_template/timeseries_template\n+{\n+  \"index_patterns\": [\"timeseries\"],                 <1>\n+  \"data_stream\": {\n+    \"timestamp_field\": \"@timestamp\"                  <2>\n+  },\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1,\n+      \"number_of_replicas\": 1,\n+      \"index.lifecycle.name\": \"timeseries_policy\"     <3>\n+    }\n+  }\n+}\n+-----------------------\n+// TEST[continued]\n+\n+<1> Apply the template when a document is indexed into the `timeseries` target.\n+<2> Identifies the timestamp field for the data source, a field that must be present\n+in all documents indexed into the `timeseries` data stream.\n+<3> The name of the ILM policy used to manage the data stream.\n+\n+You can also invoke this API directly to add templates.\n+\n+[discrete]\n+[[ilm-gs-bootstrap]]\n+=== Bootstrap the data stream\n+\n+To get things started, you simply index a document into the name or wildcard pattern defined\n+in the `index_patterns` of the <<indices-templates,composable index template>> that will\n+create the data stream.\n+{es} will automatically create the corresponding data stream and will index the document into\n+the first backing index.\n+\n+For example, the following request creates the `timeseries` data stream and the first generation\n+backing index called `.ds-timeseries-000001`.\n+\n+[source,console]\n+-----------------------\n+POST timeseries/_doc\n+{\n+  \"message\": \"logged the request\",\n+  \"@timestamp\": \"1591890611\"\n+}\n+\n+-----------------------\n+// TEST[continued]\n+\n+When the rollover conditions are met, the `rollover` action:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU0MjQ5OA=="}, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 111}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU5OTUzNg==", "bodyText": "Super minor, but more likely to be:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  \"step\": \"attempt-rollover\",                <3>\n          \n          \n            \n                  \"step\": \"check-rollover-ready\",                <3>", "url": "https://github.com/elastic/elasticsearch/pull/58035#discussion_r439599536", "createdAt": "2020-06-12T19:14:38Z", "author": {"login": "dakrone"}, "path": "docs/reference/ilm/ilm-tutorial.asciidoc", "diffHunk": "@@ -89,13 +91,207 @@ For the complete list of actions that {ilm} can perform, see <<ilm-actions>>.\n \n [discrete]\n [[ilm-gs-apply-policy]]\n-=== Create an index template to apply the lifecycle policy\n+=== Create a composable template to create the data stream and apply the lifecycle policy\n+\n+To create a data stream we'll create a composable template with a `data_stream` definition\n+that will specify the lifecycle policy.\n+\n+For example, you might create a `timeseries_template` that is will bootstrap a data stream\n+named `timeseries`.\n+\n+To enable the ILM to manage the data stream, the template configures one {ilm-init} setting:\n+\n+* `index.lifecycle.name` specifies the name of the lifecycle policy to apply to the data stream.\n+\n+You can use the {kib} Create template wizard to add the template.\n+This wizard invokes the put _index_template API to create the <<indices-templates,composable index template>>\n+with the options you specify.\n+\n+The underlying request looks like this:\n+\n+[source,console]\n+-----------------------\n+PUT _index_template/timeseries_template\n+{\n+  \"index_patterns\": [\"timeseries\"],                 <1>\n+  \"data_stream\": {\n+    \"timestamp_field\": \"@timestamp\"                  <2>\n+  },\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1,\n+      \"number_of_replicas\": 1,\n+      \"index.lifecycle.name\": \"timeseries_policy\"     <3>\n+    }\n+  }\n+}\n+-----------------------\n+// TEST[continued]\n+\n+<1> Apply the template when a document is indexed into the `timeseries` target.\n+<2> Identifies the timestamp field for the data source, a field that must be present\n+in all documents indexed into the `timeseries` data stream.\n+<3> The name of the ILM policy used to manage the data stream.\n+\n+You can also invoke this API directly to add templates.\n+\n+[discrete]\n+[[ilm-gs-bootstrap]]\n+=== Bootstrap the data stream\n+\n+To get things started, you simply index a document into the name or wildcard pattern defined\n+in the `index_patterns` of the <<indices-templates,composable index template>> that will\n+create the data stream.\n+{es} will automatically create the corresponding data stream and will index the document into\n+the first backing index.\n+\n+For example, the following request creates the `timeseries` data stream and the first generation\n+backing index called `.ds-timeseries-000001`.\n+\n+[source,console]\n+-----------------------\n+POST timeseries/_doc\n+{\n+  \"message\": \"logged the request\",\n+  \"@timestamp\": \"1591890611\"\n+}\n+\n+-----------------------\n+// TEST[continued]\n+\n+When the rollover conditions are met, the `rollover` action:\n+\n+* Creates the second generation backing index, name `.ds-timeseries-000002`.\n+As it is the backing index of the `timeseries` data stream which was created using the `timeseries_template`\n+the template configuration will be applied to the new index.\n+* As it is the latest generation index of the `timeseries` data stream, the newly created\n+backing index `.ds-timeseries-000002` becomes the data stream's write index.\n+\n+This process repeats each time rollover conditions are met.\n+You can search across all of the data stream's backing indices, managed by the `timeseries_policy`,\n+with the `timeseries` data stream name.\n+Write operations are routed to the current write index, whilst read operations will be handled by all\n+backing indices.\n+\n+[discrete]\n+[[ilm-gs-check-progress]]\n+=== Check lifecycle progress\n+\n+To get status information for managed indices, you use the {ilm-init} explain API.\n+This lets you find out things like:\n+\n+* What phase an index is in and when it entered that phase.\n+* The current action and what step is being performed.\n+* If any errors have occurred or progress is blocked.\n+\n+For example, the following request gets information about the `timeseries` indices:\n+\n+[source,console]\n+--------------------------------------------------\n+GET .ds-timeseries-*/_ilm/explain\n+--------------------------------------------------\n+// TEST[continued]\n+\n+The response below shows that the data stream's first generation backing index is waiting in the `hot`\n+phase's `rollover` action.\n+It remains in this state and {ilm-init} continues to call `attempt-rollover` until the rollover conditions\n+are met.\n+\n+// [[36818c6d9f434d387819c30bd9addb14]]\n+[source,console-result]\n+--------------------------------------------------\n+{\n+  \"indices\": {\n+    \".ds-timeseries-000001\": {\n+      \"index\": \".ds-timeseries-000001\",\n+      \"managed\": true,\n+      \"policy\": \"timeseries_policy\",             <1>\n+      \"lifecycle_date_millis\": 1538475653281,\n+      \"age\": \"30s\",                              <2>\n+      \"phase\": \"hot\",\n+      \"phase_time_millis\": 1538475653317,\n+      \"action\": \"rollover\",\n+      \"action_time_millis\": 1538475653317,\n+      \"step\": \"attempt-rollover\",                <3>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28b84909eacd98f8be2738dc0058068143dbc47b"}, "originalPosition": 164}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51c465f9cb9926e1c2a534fa21cd56efdd121c69", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/51c465f9cb9926e1c2a534fa21cd56efdd121c69", "committedDate": "2020-06-15T09:05:07Z", "message": "Update docs/reference/ilm/actions/ilm-rollover.asciidoc\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5059351ca5f404ff965f30d72d7d8f2fb7f09c1", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/e5059351ca5f404ff965f30d72d7d8f2fb7f09c1", "committedDate": "2020-06-15T09:05:29Z", "message": "Link to write index\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2fdf37834fa8fff77e3934cd06f830e80a89764c", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/2fdf37834fa8fff77e3934cd06f830e80a89764c", "committedDate": "2020-06-15T09:14:15Z", "message": "Drop write index naming sentence"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6316f949e4e427737b93c8f6c243b331bc91418", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/c6316f949e4e427737b93c8f6c243b331bc91418", "committedDate": "2020-06-15T09:15:31Z", "message": "Reword\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2f6aa45cb6f74083b4e166e5ada25fe0c77b105", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/e2f6aa45cb6f74083b4e166e5ada25fe0c77b105", "committedDate": "2020-06-15T09:15:46Z", "message": "Avoid future tense\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d9f0a46b25af6abfe126948405418e9cde9388e", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/1d9f0a46b25af6abfe126948405418e9cde9388e", "committedDate": "2020-06-15T09:17:00Z", "message": "Reword note\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52c93af74cae9f03dbde2f616442091594e629a2", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/52c93af74cae9f03dbde2f616442091594e629a2", "committedDate": "2020-06-15T09:23:52Z", "message": "Update shrink action note"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8fc070ff3bc1f24b295621a44060133aca651cf7", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/8fc070ff3bc1f24b295621a44060133aca651cf7", "committedDate": "2020-06-15T09:25:39Z", "message": "Avoid future\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78430c6f45a1649ded1f1a5a4f5bd63a5661ee2a", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/78430c6f45a1649ded1f1a5a4f5bd63a5661ee2a", "committedDate": "2020-06-15T09:27:24Z", "message": "Update shrink note\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef9f02f760b58888fee3187b89f99ed41cdc0836", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/ef9f02f760b58888fee3187b89f99ed41cdc0836", "committedDate": "2020-06-15T09:28:29Z", "message": "Update searchable snapshot note"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2afc9e4a798a1377018f5c3ef5b91233888b3d8", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/b2afc9e4a798a1377018f5c3ef5b91233888b3d8", "committedDate": "2020-06-15T09:30:22Z", "message": "Enhance navigation\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d12d8a8e3e08d24ec1d15834285e6112f200510", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/6d12d8a8e3e08d24ec1d15834285e6112f200510", "committedDate": "2020-06-15T09:30:42Z", "message": "Fix typo\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47f4ca64cdb0bc45189cf0fa49fac052f542a18e", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/47f4ca64cdb0bc45189cf0fa49fac052f542a18e", "committedDate": "2020-06-15T09:34:29Z", "message": "Use attribute\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d654b92b7d4753bacd0fd00fe51dd6610754b1b7", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/d654b92b7d4753bacd0fd00fe51dd6610754b1b7", "committedDate": "2020-06-15T09:35:06Z", "message": "Break sentence\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ccbc757171c3c6c8eedd29f2a96353286223e6f", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/3ccbc757171c3c6c8eedd29f2a96353286223e6f", "committedDate": "2020-06-15T09:35:35Z", "message": "Use attribute\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ab786fbcdd4b61bcfc0e1f4e828b2d9991782a0", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/2ab786fbcdd4b61bcfc0e1f4e828b2d9991782a0", "committedDate": "2020-06-15T09:36:07Z", "message": "Use create instead of bootstrap\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf537a45f526e6f86473309c1d8761255ae1e451", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/cf537a45f526e6f86473309c1d8761255ae1e451", "committedDate": "2020-06-15T09:36:30Z", "message": "Use imperative\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8fbd48e726a16237faf5134ac096b38fc7574889", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/8fbd48e726a16237faf5134ac096b38fc7574889", "committedDate": "2020-06-15T09:37:13Z", "message": "Target name cannot already exist note\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8de6119f71271a87e525bc7cc61a6120876c47e", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/f8de6119f71271a87e525bc7cc61a6120876c47e", "committedDate": "2020-06-15T09:37:35Z", "message": "Avoid future tense\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f976051800bbac4cde3e3f24b569a4329c1ea7e0", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/f976051800bbac4cde3e3f24b569a4329c1ea7e0", "committedDate": "2020-06-15T09:38:16Z", "message": "Update wording on rollover conditions\n\nCo-authored-by: Lee Hinman <dakrone@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "779e8dfc8a16a41581573944e2b9042c354be4df", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/779e8dfc8a16a41581573944e2b9042c354be4df", "committedDate": "2020-06-15T09:38:50Z", "message": "Break sentence\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5fbdc6e5f04ebe17f9075c7bf1f5f93c70299273", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/5fbdc6e5f04ebe17f9075c7bf1f5f93c70299273", "committedDate": "2020-06-15T12:38:03Z", "message": "Fix typo\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d10be072d1092ab2c4b872bee5910e30dfbc92f5", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/d10be072d1092ab2c4b872bee5910e30dfbc92f5", "committedDate": "2020-06-15T12:40:59Z", "message": "Better wording\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03fcdb4ed628d9884e98978733231e4e751666a0", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/03fcdb4ed628d9884e98978733231e4e751666a0", "committedDate": "2020-06-15T12:41:47Z", "message": "Better wording\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1751bd094047e3026f346af21017e5650cef772", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/d1751bd094047e3026f346af21017e5650cef772", "committedDate": "2020-06-15T12:42:14Z", "message": "Better wording\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwNjA0OTEy", "url": "https://github.com/elastic/elasticsearch/pull/58035#pullrequestreview-430604912", "createdAt": "2020-06-15T12:42:18Z", "commit": {"oid": "03fcdb4ed628d9884e98978733231e4e751666a0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13675d23b02e9120e0c3446bd3aad821247802e5", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/13675d23b02e9120e0c3446bd3aad821247802e5", "committedDate": "2020-06-15T12:42:37Z", "message": "Better wording\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6466fe9f350f0e8c0873da11a962d40f4fc54075", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/6466fe9f350f0e8c0873da11a962d40f4fc54075", "committedDate": "2020-06-15T12:43:53Z", "message": "Use check-rollover-ready step\n\nCo-authored-by: Lee Hinman <dakrone@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c52d9330d6ab061d4926a329e7b771d4209cf11a", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/c52d9330d6ab061d4926a329e7b771d4209cf11a", "committedDate": "2020-06-15T12:45:37Z", "message": "Reference the check-rollover-ready step"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20ef74fd4c4c636f858998fa44a435d9f102f8f2", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/20ef74fd4c4c636f858998fa44a435d9f102f8f2", "committedDate": "2020-06-15T12:50:25Z", "message": "Apply suggestions from code review\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d15d32a5b7bb435a17df76fa72d5d8c1bd47ed37", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/d15d32a5b7bb435a17df76fa72d5d8c1bd47ed37", "committedDate": "2020-06-15T12:51:54Z", "message": "OR logic and callout numbers arrangement"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c43ff2c0316605713fe34c89e2313ecf6ce16676", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/c43ff2c0316605713fe34c89e2313ecf6ce16676", "committedDate": "2020-06-15T12:52:42Z", "message": "Arrange callout numbers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae7b65eb1d79de27153c81dcb60504c977e2a3c0", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/ae7b65eb1d79de27153c81dcb60504c977e2a3c0", "committedDate": "2020-06-15T12:53:12Z", "message": "Merge branch 'master' into docs-ilm-data-stream"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "431164cdbf137c235169ecbfb5b2787914a60c1a", "author": {"user": {"login": "andreidan", "name": "Andrei Dan"}}, "url": "https://github.com/elastic/elasticsearch/commit/431164cdbf137c235169ecbfb5b2787914a60c1a", "committedDate": "2020-06-15T12:58:13Z", "message": "Add the timestamp mapping to the composable template"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 641, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}