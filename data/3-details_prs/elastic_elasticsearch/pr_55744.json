{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4NzE1MTcx", "number": 55744, "title": "[DOCS] Add UUID troubleshooting tip for stack monitoring", "bodyText": "This PR augments https://www.elastic.co/guide/en/elasticsearch/reference/master/monitoring-troubleshooting.html (\"Troubleshooting monitoring\") with a suggestion to check the UUID when monitoring data is missing for some nodes/instances/Beats in a cluster.\nPreview:\n\nhttp://elasticsearch_55744.docs-preview.app.elstc.co/diff", "createdAt": "2020-04-24T19:00:55Z", "url": "https://github.com/elastic/elasticsearch/pull/55744", "merged": true, "mergeCommit": {"oid": "f24c1138965bfae7479e2b27057b774a12eef810"}, "closed": true, "closedAt": "2020-05-11T14:47:10Z", "author": {"login": "lcawl"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABca2LwvAH2gAyNDA4NzE1MTcxOjVlOWZkYzVkMjE5MDY2OTAxNTI0Mzc5MmU5ZmRkZjFiYTdjOWQzNGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcfbjLsAFqTQwODU5MzI0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5e9fdc5d2190669015243792e9fddf1ba7c9d34e", "author": {"user": {"login": "lcawl", "name": "Lisa Cawley"}}, "url": "https://github.com/elastic/elasticsearch/commit/5e9fdc5d2190669015243792e9fddf1ba7c9d34e", "committedDate": "2020-04-24T18:55:50Z", "message": "[DOCS] Add UUID troubleshooting tip for stack monitoring"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMjIyMTMy", "url": "https://github.com/elastic/elasticsearch/pull/55744#pullrequestreview-400222132", "createdAt": "2020-04-24T19:40:21Z", "commit": {"oid": "5e9fdc5d2190669015243792e9fddf1ba7c9d34e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxOTo0MDoyMVrOGLmgGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxOTo0MDoyMVrOGLmgGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgxODMyOA==", "bodyText": "I wonder if this is too vague, as it could apply to other situations as well, e.g. monitoring data is missing for some period of time. How about something along the lines of, \"Monitoring data for some stack nodes or instances is missing from {kib}\"", "url": "https://github.com/elastic/elasticsearch/pull/55744#discussion_r414818328", "createdAt": "2020-04-24T19:40:21Z", "author": {"login": "ycombinator"}, "path": "docs/reference/monitoring/troubleshooting.asciidoc", "diffHunk": "@@ -27,3 +30,14 @@ monitoring data by using {metricbeat} the indices have `-mb` in their names. If\n the indices do not exist, review your configuration. For example, see\n <<monitoring-production>>.\n \n+[[monitoring-troubleshooting-uuid]]\n+=== Some monitoring data is missing from {kib}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e9fdc5d2190669015243792e9fddf1ba7c9d34e"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMjIyNzQw", "url": "https://github.com/elastic/elasticsearch/pull/55744#pullrequestreview-400222740", "createdAt": "2020-04-24T19:41:23Z", "commit": {"oid": "5e9fdc5d2190669015243792e9fddf1ba7c9d34e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxOTo0MToyM1rOGLmiiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxOTo0MToyM1rOGLmiiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgxODk1Mw==", "bodyText": "Perhaps @dedemorton can weigh in here: what term do we like to use for an individual running Beat process? An instance? A node? Something else?", "url": "https://github.com/elastic/elasticsearch/pull/55744#discussion_r414818953", "createdAt": "2020-04-24T19:41:23Z", "author": {"login": "ycombinator"}, "path": "docs/reference/monitoring/troubleshooting.asciidoc", "diffHunk": "@@ -27,3 +30,14 @@ monitoring data by using {metricbeat} the indices have `-mb` in their names. If\n the indices do not exist, review your configuration. For example, see\n <<monitoring-production>>.\n \n+[[monitoring-troubleshooting-uuid]]\n+=== Some monitoring data is missing from {kib}\n+\n+*Symptoms*:\n+The information about some nodes, instances, or Beats in your cluster are\n+missing from the *Stack Monitoring* page in {kib}.\n+\n+*Resolution*:\n+Verify that the missing items have unique UUIDs. Each {es} node, {ls} node,\n+{kib} instance, and Beat is considered unique based on its persistent UUID,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e9fdc5d2190669015243792e9fddf1ba7c9d34e"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMjI5ODA1", "url": "https://github.com/elastic/elasticsearch/pull/55744#pullrequestreview-400229805", "createdAt": "2020-04-24T19:53:32Z", "commit": {"oid": "5e9fdc5d2190669015243792e9fddf1ba7c9d34e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxOTo1MzozMlrOGLm78Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxOTo1MzozMlrOGLm78Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgyNTQ1Nw==", "bodyText": "For Beats and APM server, I'd say that the way to ensure that each Beat instance is seen as unique in the Stack Monitoring UI, the Beat's path.data folder must be non-existent or empty after installation.\n@jakelandis I imagine an ES node's UUID is stored somewhere in it's data folder? Is it sufficient to say (from a user's perspective) that for a node to be given a new UUID it's data folder would have to not exist or be empty - same as the statement I'm making above for Beats?\n@tylersmalley Same question as ES above, but for Kibana. I happen to know that the UUID is stored in data/uuid but, in general, we'd want a new Kibana instance to have an empty or non-existent data folder, right?\n@jsvd Same question as ES above, but for Logstash. I happen to know that the UUID is stored in data/uuid but, in general, we'd want a new Logstash node to have an empty or non-existent data folder, right?", "url": "https://github.com/elastic/elasticsearch/pull/55744#discussion_r414825457", "createdAt": "2020-04-24T19:53:32Z", "author": {"login": "ycombinator"}, "path": "docs/reference/monitoring/troubleshooting.asciidoc", "diffHunk": "@@ -27,3 +30,14 @@ monitoring data by using {metricbeat} the indices have `-mb` in their names. If\n the indices do not exist, review your configuration. For example, see\n <<monitoring-production>>.\n \n+[[monitoring-troubleshooting-uuid]]\n+=== Some monitoring data is missing from {kib}\n+\n+*Symptoms*:\n+The information about some nodes, instances, or Beats in your cluster are\n+missing from the *Stack Monitoring* page in {kib}.\n+\n+*Resolution*:\n+Verify that the missing items have unique UUIDs. Each {es} node, {ls} node,\n+{kib} instance, and Beat is considered unique based on its persistent UUID,\n+which is found in its `path.data` directory.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e9fdc5d2190669015243792e9fddf1ba7c9d34e"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMjM0MzYx", "url": "https://github.com/elastic/elasticsearch/pull/55744#pullrequestreview-400234361", "createdAt": "2020-04-24T20:01:11Z", "commit": {"oid": "5e9fdc5d2190669015243792e9fddf1ba7c9d34e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMDowMToxMVrOGLnMSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMDowMToxMVrOGLnMSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgyOTY0Mg==", "bodyText": "If you're talking about ES nodes, LS nodes, etc here, then you should spell out the list like you do below.\nFor American English, the verb here should be singular (information...is missing).", "url": "https://github.com/elastic/elasticsearch/pull/55744#discussion_r414829642", "createdAt": "2020-04-24T20:01:11Z", "author": {"login": "dedemorton"}, "path": "docs/reference/monitoring/troubleshooting.asciidoc", "diffHunk": "@@ -27,3 +30,14 @@ monitoring data by using {metricbeat} the indices have `-mb` in their names. If\n the indices do not exist, review your configuration. For example, see\n <<monitoring-production>>.\n \n+[[monitoring-troubleshooting-uuid]]\n+=== Some monitoring data is missing from {kib}\n+\n+*Symptoms*:\n+The information about some nodes, instances, or Beats in your cluster are", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e9fdc5d2190669015243792e9fddf1ba7c9d34e"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1919caf7821d20e5be4f31110ebd5d59f35828ca", "author": {"user": {"login": "lcawl", "name": "Lisa Cawley"}}, "url": "https://github.com/elastic/elasticsearch/commit/1919caf7821d20e5be4f31110ebd5d59f35828ca", "committedDate": "2020-04-24T20:25:28Z", "message": "[DOCS] Adds discrete attributes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93dfb34304d723a4c9fa5a46c905a49cc2f23ca2", "author": {"user": {"login": "lcawl", "name": "Lisa Cawley"}}, "url": "https://github.com/elastic/elasticsearch/commit/93dfb34304d723a4c9fa5a46c905a49cc2f23ca2", "committedDate": "2020-05-07T23:10:31Z", "message": "[DOCS] Augments UUID troubleshooting tips"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NTMyODEz", "url": "https://github.com/elastic/elasticsearch/pull/55744#pullrequestreview-408532813", "createdAt": "2020-05-08T21:16:28Z", "commit": {"oid": "93dfb34304d723a4c9fa5a46c905a49cc2f23ca2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQyMToxNjoyOVrOGSz_Ow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQyMToxNjoyOVrOGSz_Ow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjM3OTMyMw==", "bodyText": "I think this applies to all 5 monitorable stack products today: Kibana, any of the Beats, Logstash, Elasticsearch, and APM server. When they are installed, their path.data directories should either be empty or non-existent; they should not be copied over from other installs.", "url": "https://github.com/elastic/elasticsearch/pull/55744#discussion_r422379323", "createdAt": "2020-05-08T21:16:29Z", "author": {"login": "ycombinator"}, "path": "docs/reference/monitoring/troubleshooting.asciidoc", "diffHunk": "@@ -27,3 +31,26 @@ monitoring data by using {metricbeat} the indices have `-mb` in their names. If\n the indices do not exist, review your configuration. For example, see\n <<monitoring-production>>.\n \n+[discrete]\n+[[monitoring-troubleshooting-uuid]]\n+=== Monitoring data for some {stack} nodes or instances is missing from {kib}\n+\n+*Symptoms*:\n+The *Stack Monitoring* page in {kib} does not show information for some nodes or \n+instances in your cluster.\n+\n+*Resolution*:\n+Verify that the missing items have unique UUIDs. Each {es} node, {ls} node,\n+{kib} instance, and Beat instance is considered unique based on its persistent \n+UUID, which is found in its `path.data` directory. Alternatively, you can find\n+the UUIDs in the product logs at startup.\n+\n+For {ls} nodes, you can also determine the UUID from the `id` property returned\n+by the {logstash-ref}/monitoring-logstash.html[monitoring APIs root resource].\n+\n+\n+TIP: When you install {kib} or Beat instances, do not copy existing content into", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "93dfb34304d723a4c9fa5a46c905a49cc2f23ca2"}, "originalPosition": 33}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NTMzMzA5", "url": "https://github.com/elastic/elasticsearch/pull/55744#pullrequestreview-408533309", "createdAt": "2020-05-08T21:17:27Z", "commit": {"oid": "93dfb34304d723a4c9fa5a46c905a49cc2f23ca2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQyMToxNzoyN1rOGS0Asw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQyMToxNzoyN1rOGS0Asw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjM3OTY5OQ==", "bodyText": "Should we add APM server to this list?", "url": "https://github.com/elastic/elasticsearch/pull/55744#discussion_r422379699", "createdAt": "2020-05-08T21:17:27Z", "author": {"login": "ycombinator"}, "path": "docs/reference/monitoring/troubleshooting.asciidoc", "diffHunk": "@@ -27,3 +31,26 @@ monitoring data by using {metricbeat} the indices have `-mb` in their names. If\n the indices do not exist, review your configuration. For example, see\n <<monitoring-production>>.\n \n+[discrete]\n+[[monitoring-troubleshooting-uuid]]\n+=== Monitoring data for some {stack} nodes or instances is missing from {kib}\n+\n+*Symptoms*:\n+The *Stack Monitoring* page in {kib} does not show information for some nodes or \n+instances in your cluster.\n+\n+*Resolution*:\n+Verify that the missing items have unique UUIDs. Each {es} node, {ls} node,\n+{kib} instance, and Beat instance is considered unique based on its persistent ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "93dfb34304d723a4c9fa5a46c905a49cc2f23ca2"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NTM0Njkx", "url": "https://github.com/elastic/elasticsearch/pull/55744#pullrequestreview-408534691", "createdAt": "2020-05-08T21:20:15Z", "commit": {"oid": "93dfb34304d723a4c9fa5a46c905a49cc2f23ca2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQyMToyMDoxNVrOGS0FkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQyMToyMDoxNVrOGS0FkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjM4MDk0NQ==", "bodyText": "For Beats instances, you can also determine the UUID from the uuid property returned by the info API's root resource: https://www.elastic.co/guide/en/beats/filebeat/master/http-endpoint.html#_info. Note that, unlike Logstash, the Beat's HTTP server has to be enabled first via http.enabled: true.", "url": "https://github.com/elastic/elasticsearch/pull/55744#discussion_r422380945", "createdAt": "2020-05-08T21:20:15Z", "author": {"login": "ycombinator"}, "path": "docs/reference/monitoring/troubleshooting.asciidoc", "diffHunk": "@@ -27,3 +31,26 @@ monitoring data by using {metricbeat} the indices have `-mb` in their names. If\n the indices do not exist, review your configuration. For example, see\n <<monitoring-production>>.\n \n+[discrete]\n+[[monitoring-troubleshooting-uuid]]\n+=== Monitoring data for some {stack} nodes or instances is missing from {kib}\n+\n+*Symptoms*:\n+The *Stack Monitoring* page in {kib} does not show information for some nodes or \n+instances in your cluster.\n+\n+*Resolution*:\n+Verify that the missing items have unique UUIDs. Each {es} node, {ls} node,\n+{kib} instance, and Beat instance is considered unique based on its persistent \n+UUID, which is found in its `path.data` directory. Alternatively, you can find\n+the UUIDs in the product logs at startup.\n+\n+For {ls} nodes, you can also determine the UUID from the `id` property returned\n+by the {logstash-ref}/monitoring-logstash.html[monitoring APIs root resource].", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "93dfb34304d723a4c9fa5a46c905a49cc2f23ca2"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2e760ad5a311e266fe2faa625e38eb2e04f3c7d", "author": {"user": {"login": "lcawl", "name": "Lisa Cawley"}}, "url": "https://github.com/elastic/elasticsearch/commit/a2e760ad5a311e266fe2faa625e38eb2e04f3c7d", "committedDate": "2020-05-08T21:26:15Z", "message": "[DOCS] Add APM to monitoring tip"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f07dc48995ae9b1d5165c2fc6cbfe62dd1f5a75", "author": {"user": {"login": "lcawl", "name": "Lisa Cawley"}}, "url": "https://github.com/elastic/elasticsearch/commit/5f07dc48995ae9b1d5165c2fc6cbfe62dd1f5a75", "committedDate": "2020-05-08T21:37:10Z", "message": "[DOCS] Adds HTTP endpoint tip"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3065c21efdeda202f8edb07f7142c32793a0ad3", "author": {"user": {"login": "lcawl", "name": "Lisa Cawley"}}, "url": "https://github.com/elastic/elasticsearch/commit/f3065c21efdeda202f8edb07f7142c32793a0ad3", "committedDate": "2020-05-08T23:36:32Z", "message": "[DOCS] Add Kibana API tip"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NTkzMjQ0", "url": "https://github.com/elastic/elasticsearch/pull/55744#pullrequestreview-408593244", "createdAt": "2020-05-09T00:43:36Z", "commit": {"oid": "f3065c21efdeda202f8edb07f7142c32793a0ad3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 342, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}