{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1NDU5ODky", "number": 58200, "title": "Enable TTY password OS tests, plus refactoring (#57759)", "bodyText": "Two keystore tests were unintentionally ignored when the\npassword-protected keystore work was merged. I've re\u00ebnabled those tests\nhere.\nI've also refactored the test methods a little bit to reduce the API\nsurface: instead of having a \"startElasticsearchTtyPassword\" method and\na \"startElasticsearchStandardInputPassword\" method, I've made a single\n\"startElasticsearch\" method with a \"useTty\" boolean argument.", "createdAt": "2020-06-16T20:51:12Z", "url": "https://github.com/elastic/elasticsearch/pull/58200", "merged": true, "mergeCommit": {"oid": "958b21d7270f2f3abe8db144f761283d35ebb4b6"}, "closed": true, "closedAt": "2020-06-25T14:49:18Z", "author": {"login": "williamrandolph"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcr7cY7AH2gAyNDM1NDU5ODkyOmZjZDc5N2Y5ZTM2MTY3YjJhNDMxZGUwMDVjYjI5YjZlODFmZGZjMGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcuhNt_gFqTQzNzAzMDc1Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fcd797f9e36167b2a431de005cb29b6e81fdfc0b", "author": {"user": {"login": "williamrandolph", "name": "William Brafford"}}, "url": "https://github.com/elastic/elasticsearch/commit/fcd797f9e36167b2a431de005cb29b6e81fdfc0b", "committedDate": "2020-06-16T20:40:14Z", "message": "Enable TTY password OS tests, plus refactoring (#57759)\n\nTwo keystore tests were unintentionally ignored when the\r\npassword-protected keystore work was merged. I've re\u00ebnabled those tests\r\nhere.\r\n\r\nI've also refactored the test methods a little bit to reduce the API\r\nsurface: instead of having a \"startElasticsearchTtyPassword\" method and\r\na \"startElasticsearchStandardInputPassword\" method, I've made a single\r\n\"startElasticsearch\" method with a \"useTty\" boolean argument."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5faa81d9d754bfddbbda07f9d41abab917eb5261", "author": {"user": {"login": "williamrandolph", "name": "William Brafford"}}, "url": "https://github.com/elastic/elasticsearch/commit/5faa81d9d754bfddbbda07f9d41abab917eb5261", "committedDate": "2020-06-17T19:05:23Z", "message": "Merge branch '7.x' into backport/7.x/enable-tty-tests-and-refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f30abf1e08f56165b6c3067227c8e5d35e514ab", "author": {"user": {"login": "williamrandolph", "name": "William Brafford"}}, "url": "https://github.com/elastic/elasticsearch/commit/6f30abf1e08f56165b6c3067227c8e5d35e514ab", "committedDate": "2020-06-18T00:56:38Z", "message": "Remove -d option for tty startup\n\nCentos 6 uses a version of expect that kills the elasticsearch process\nwhen it tries to daemonize. I will fix this in future work but for now\nI'm replacing it with a todo."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyOTQzNzU2", "url": "https://github.com/elastic/elasticsearch/pull/58200#pullrequestreview-432943756", "createdAt": "2020-06-18T05:06:57Z", "commit": {"oid": "6f30abf1e08f56165b6c3067227c8e5d35e514ab"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQwNTowNjo1N1rOGlfwKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQwNTowNjo1N1rOGlfwKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTk3MDcyOA==", "bodyText": "I'm not sure we should be removing daemonize here, since the method still takes in the flag. Wouldn't this cause any tests using tty but not expecting failure to fail?", "url": "https://github.com/elastic/elasticsearch/pull/58200#discussion_r441970728", "createdAt": "2020-06-18T05:06:57Z", "author": {"login": "rjernst"}, "path": "qa/os/src/test/java/org/elasticsearch/packaging/util/Archives.java", "diffHunk": "@@ -244,9 +244,10 @@ private static void verifyDefaultInstallation(Installation es, Distribution dist\n         // requires the \"expect\" utility to be installed\n         List<String> command = new ArrayList<>();\n         command.add(\"sudo -E -u %s %s -p %s\");\n-        if (daemonize) {\n-            command.add(\"-d\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f30abf1e08f56165b6c3067227c8e5d35e514ab"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb856671cc324b3adf2f3d041a4fb8844d616739", "author": {"user": {"login": "williamrandolph", "name": "William Brafford"}}, "url": "https://github.com/elastic/elasticsearch/commit/bb856671cc324b3adf2f3d041a4fb8844d616739", "committedDate": "2020-06-24T20:34:43Z", "message": "Test daemonization and non-daemonization case for tty"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "700efba5c4758dce409808fbe548e867311a7c60", "author": {"user": {"login": "williamrandolph", "name": "William Brafford"}}, "url": "https://github.com/elastic/elasticsearch/commit/700efba5c4758dce409808fbe548e867311a7c60", "committedDate": "2020-06-24T20:42:19Z", "message": "Merge branch '7.x' into backport/7.x/enable-tty-tests-and-refactor"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3MDMwNzU3", "url": "https://github.com/elastic/elasticsearch/pull/58200#pullrequestreview-437030757", "createdAt": "2020-06-24T21:48:27Z", "commit": {"oid": "700efba5c4758dce409808fbe548e867311a7c60"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 553, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}