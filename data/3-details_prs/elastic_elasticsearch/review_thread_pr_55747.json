{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4NzQxMjU1", "number": 55747, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMDo1NTowOVrOD18-lg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxNDowNjozN1rOD2s7ZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3OTAwMTgyOnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/search/aggregations/support/CoreValuesSourceType.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMDo1NTowOVrOGLo47w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNlQxMjoxNzoxOVrOGMDtNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg1NzQ1NQ==", "bodyText": "I think ALL might be a bit confusing here. I wonder if renaming it into ALL_CORE or using Arrays.asList(CoreValuesSourceType.values()) instead of the constant will better demonstrate the actual scope here for future readers.", "url": "https://github.com/elastic/elasticsearch/pull/55747#discussion_r414857455", "createdAt": "2020-04-24T20:55:09Z", "author": {"login": "imotov"}, "path": "server/src/main/java/org/elasticsearch/search/aggregations/support/CoreValuesSourceType.java", "diffHunk": "@@ -288,4 +291,6 @@ public String value() {\n         return name().toLowerCase(Locale.ROOT);\n     }\n \n+    /** List containing all members of the enumeration. */\n+    public static List<ValuesSourceType> ALL = Arrays.asList(CoreValuesSourceType.values());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c41ae9d94d55af2d8c9fce4d3fa70a23cdb8b6f"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTI5NjgyMA==", "bodyText": "To me it seemed clear that CoreValuesSourceType.ALL is about all core VST. I renamed it to CoreValuesSourceType.ALL_CORE hoping that this can't be misunderstood.", "url": "https://github.com/elastic/elasticsearch/pull/55747#discussion_r415296820", "createdAt": "2020-04-26T12:17:19Z", "author": {"login": "csoulios"}, "path": "server/src/main/java/org/elasticsearch/search/aggregations/support/CoreValuesSourceType.java", "diffHunk": "@@ -288,4 +291,6 @@ public String value() {\n         return name().toLowerCase(Locale.ROOT);\n     }\n \n+    /** List containing all members of the enumeration. */\n+    public static List<ValuesSourceType> ALL = Arrays.asList(CoreValuesSourceType.values());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg1NzQ1NQ=="}, "originalCommit": {"oid": "1c41ae9d94d55af2d8c9fce4d3fa70a23cdb8b6f"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4Njg1Nzk3OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/search/aggregations/support/ValuesSourceRegistry.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxNDowNjozN1rOGMlA3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxNTo1NzoyN1rOGMq34A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTg0MjUyNA==", "bodyText": "This doesn't need to be a List now.  We can just make it Map<String, Map<ValuesSourceType, AggregatorSupplier>>. \u00a0The list was only necessary because lambdas make bad hash keys.", "url": "https://github.com/elastic/elasticsearch/pull/55747#discussion_r415842524", "createdAt": "2020-04-27T14:06:37Z", "author": {"login": "not-napoleon"}, "path": "server/src/main/java/org/elasticsearch/search/aggregations/support/ValuesSourceRegistry.java", "diffHunk": "@@ -42,99 +41,67 @@\n  */\n public class ValuesSourceRegistry {\n     public static class Builder {\n-        private Map<String, List<Map.Entry<Predicate<ValuesSourceType>, AggregatorSupplier>>> aggregatorRegistry = new HashMap<>();\n+        private Map<String, List<Map.Entry<ValuesSourceType, AggregatorSupplier>>> aggregatorRegistry = new HashMap<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3feb89965c0bd312715ca4bd515b0bfc4dd7fd15"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTg0OTg0OA==", "bodyText": "Can I do it later in a separate PR? This will really mess me up if it is done in this PR.", "url": "https://github.com/elastic/elasticsearch/pull/55747#discussion_r415849848", "createdAt": "2020-04-27T14:15:34Z", "author": {"login": "imotov"}, "path": "server/src/main/java/org/elasticsearch/search/aggregations/support/ValuesSourceRegistry.java", "diffHunk": "@@ -42,99 +41,67 @@\n  */\n public class ValuesSourceRegistry {\n     public static class Builder {\n-        private Map<String, List<Map.Entry<Predicate<ValuesSourceType>, AggregatorSupplier>>> aggregatorRegistry = new HashMap<>();\n+        private Map<String, List<Map.Entry<ValuesSourceType, AggregatorSupplier>>> aggregatorRegistry = new HashMap<>();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTg0MjUyNA=="}, "originalCommit": {"oid": "3feb89965c0bd312715ca4bd515b0bfc4dd7fd15"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTkzODUyOA==", "bodyText": "No problem @imotov if you are both ok with this, I will merge this PR and you can change this List to Map later.", "url": "https://github.com/elastic/elasticsearch/pull/55747#discussion_r415938528", "createdAt": "2020-04-27T15:57:27Z", "author": {"login": "csoulios"}, "path": "server/src/main/java/org/elasticsearch/search/aggregations/support/ValuesSourceRegistry.java", "diffHunk": "@@ -42,99 +41,67 @@\n  */\n public class ValuesSourceRegistry {\n     public static class Builder {\n-        private Map<String, List<Map.Entry<Predicate<ValuesSourceType>, AggregatorSupplier>>> aggregatorRegistry = new HashMap<>();\n+        private Map<String, List<Map.Entry<ValuesSourceType, AggregatorSupplier>>> aggregatorRegistry = new HashMap<>();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTg0MjUyNA=="}, "originalCommit": {"oid": "3feb89965c0bd312715ca4bd515b0bfc4dd7fd15"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2560, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}