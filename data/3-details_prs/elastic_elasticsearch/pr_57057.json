{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxNDk0NzQx", "number": 57057, "title": "Move common repository configuration to java plugin", "bodyText": "This commit moves the common maven repository configuration to the ES\njava plugin. All java projects need this common set of repos. Note that\nthe Elastic download and maven repos are removed, as they are not\nnecessary anymore since distribution download was split into the\nDistributionDownloadPlugin.", "createdAt": "2020-05-21T17:59:59Z", "url": "https://github.com/elastic/elasticsearch/pull/57057", "merged": true, "mergeCommit": {"oid": "deafcac34e07a4eb0d53368c67534c7e0d90ce95"}, "closed": true, "closedAt": "2020-05-26T21:10:08Z", "author": {"login": "rjernst"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjhh6-gH2gAyNDIxNDk0NzQxOjE3OGZjYjU4ZThlODRiYmY3NmZlNWU3YTU2NWU3OGZlODVkMmZiMjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclKmQZgH2gAyNDIxNDk0NzQxOjI0ZWE4ZmVjNWI3MTVmZWM2OTQ1MGUxOWFlNDg1MjkxYTA2N2QwYTc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "178fcb58e8e84bbf76fe5e7a565e78fe85d2fb27", "author": {"user": {"login": "rjernst", "name": "Ryan Ernst"}}, "url": "https://github.com/elastic/elasticsearch/commit/178fcb58e8e84bbf76fe5e7a565e78fe85d2fb27", "committedDate": "2020-05-21T17:57:21Z", "message": "Move common repository configuration to java plugin\n\nThis commit moves the common maven repository configuration to the ES\njava plugin. All java projects need this common set of repos. Note that\nthe Elastic download and maven repos are removed, as they are not\nnecessary anymore since distribution download was split into the\nDistributionDownloadPlugin."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be159ec6b0046b499d3b514fffa6549e0ccd023b", "author": {"user": {"login": "rjernst", "name": "Ryan Ernst"}}, "url": "https://github.com/elastic/elasticsearch/commit/be159ec6b0046b499d3b514fffa6549e0ccd023b", "committedDate": "2020-05-21T18:06:19Z", "message": "make public temporarily, and remove dead code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2NTIwNDcy", "url": "https://github.com/elastic/elasticsearch/pull/57057#pullrequestreview-416520472", "createdAt": "2020-05-21T21:55:05Z", "commit": {"oid": "be159ec6b0046b499d3b514fffa6549e0ccd023b"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQyMTo1NTowNVrOGZERAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQyMTo1NTowNVrOGZERAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzNzQ3Mw==", "bodyText": "I think we can now replace all of this with the following which was introduced in Gradle 6.0.\nif (repository instanceof UrlArtifactRepository) {\n    ((UrlArtifactRepository) repository).setAllowInsecureProtocol(false);\n}", "url": "https://github.com/elastic/elasticsearch/pull/57057#discussion_r428937473", "createdAt": "2020-05-21T21:55:05Z", "author": {"login": "mark-vieira"}, "path": "buildSrc/src/main/java/org/elasticsearch/gradle/ElasticsearchJavaPlugin.java", "diffHunk": "@@ -137,6 +148,73 @@ public static void configureConfigurations(Project project) {\n         disableTransitiveDeps.accept(JavaPlugin.RUNTIME_ONLY_CONFIGURATION_NAME);\n     }\n \n+    private static final Pattern LUCENE_SNAPSHOT_REGEX = Pattern.compile(\"\\\\w+-snapshot-([a-z0-9]+)\");\n+\n+    /** Adds repositories used by ES dependencies */\n+    public static void configureRepositories(Project project) {\n+        // ensure all repositories use secure urls\n+        project.getRepositories().all(repository -> {\n+            if (repository instanceof MavenArtifactRepository) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be159ec6b0046b499d3b514fffa6549e0ccd023b"}, "originalPosition": 48}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f0a45c8f2d87a237e1823f32b7eeae2c04068d7", "author": {"user": {"login": "rjernst", "name": "Ryan Ernst"}}, "url": "https://github.com/elastic/elasticsearch/commit/7f0a45c8f2d87a237e1823f32b7eeae2c04068d7", "committedDate": "2020-05-21T22:05:12Z", "message": "use gradle secure check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6aaaf5b08e1f6fcd2dda2ab9f0e9d85d4a1a5ce3", "author": {"user": {"login": "rjernst", "name": "Ryan Ernst"}}, "url": "https://github.com/elastic/elasticsearch/commit/6aaaf5b08e1f6fcd2dda2ab9f0e9d85d4a1a5ce3", "committedDate": "2020-05-21T22:26:16Z", "message": "iter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2341681cb019955e818d65559b704789e661437", "author": {"user": {"login": "rjernst", "name": "Ryan Ernst"}}, "url": "https://github.com/elastic/elasticsearch/commit/d2341681cb019955e818d65559b704789e661437", "committedDate": "2020-05-21T22:33:44Z", "message": "spotless"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6084a4d860b5983f333845ae24344dc85c7af48a", "author": {"user": {"login": "rjernst", "name": "Ryan Ernst"}}, "url": "https://github.com/elastic/elasticsearch/commit/6084a4d860b5983f333845ae24344dc85c7af48a", "committedDate": "2020-05-26T17:54:22Z", "message": "Merge branch 'master' into buildsplit10"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc839e292cf07722a5fbc7879123f0627a0ba122", "author": {"user": {"login": "rjernst", "name": "Ryan Ernst"}}, "url": "https://github.com/elastic/elasticsearch/commit/cc839e292cf07722a5fbc7879123f0627a0ba122", "committedDate": "2020-05-26T18:31:55Z", "message": "Revert \"use gradle secure check\"\n\nThis reverts commit 7f0a45c8"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "059255e4f1f761a48ac4437850ec5d7e08a2965e", "author": {"user": {"login": "rjernst", "name": "Ryan Ernst"}}, "url": "https://github.com/elastic/elasticsearch/commit/059255e4f1f761a48ac4437850ec5d7e08a2965e", "committedDate": "2020-05-26T18:32:40Z", "message": "add TODO"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f66abdf5424bde51db73f246850c361a8af6f25c", "author": {"user": {"login": "rjernst", "name": "Ryan Ernst"}}, "url": "https://github.com/elastic/elasticsearch/commit/f66abdf5424bde51db73f246850c361a8af6f25c", "committedDate": "2020-05-26T20:05:14Z", "message": "Merge branch 'master' into buildsplit10"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24ea8fec5b715fec69450e19ae485291a067d0a7", "author": {"user": {"login": "rjernst", "name": "Ryan Ernst"}}, "url": "https://github.com/elastic/elasticsearch/commit/24ea8fec5b715fec69450e19ae485291a067d0a7", "committedDate": "2020-05-26T20:22:07Z", "message": "spotless"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4784, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}