{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyNDYwMzc5", "number": 60635, "title": "Make `FetchPhase` logic more readable. ", "bodyText": "Factor out FieldsVisitor#postProcess call.\nSwap logical order for normal and nested documents.\nExtract the method createStoredFieldsVisitor.", "createdAt": "2020-08-04T00:25:44Z", "url": "https://github.com/elastic/elasticsearch/pull/60635", "merged": true, "mergeCommit": {"oid": "8811f442297011bae90ea11d05cbe84781bd7580"}, "closed": true, "closedAt": "2020-08-05T16:42:36Z", "author": {"login": "jtibshirani"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc7bMQJAH2gAyNDYyNDYwMzc5OjA3YWQxZmZkY2VlYWJkNDJjZWNjNzg5MDIxYzdiNDJlNWNlOGI5YjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc7s9NxAFqTQ2MTE2Mjc4OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "07ad1ffdceeabd42cecc789021c7b42e5ce8b9b6", "author": {"user": {"login": "jtibshirani", "name": "Julie Tibshirani"}}, "url": "https://github.com/elastic/elasticsearch/commit/07ad1ffdceeabd42cecc789021c7b42e5ce8b9b6", "committedDate": "2020-08-04T00:08:26Z", "message": "Factor out FieldsVisitor#postProcess call."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fba36c97c23b0c8f6869f2b10f28da80fc55f3dc", "author": {"user": {"login": "jtibshirani", "name": "Julie Tibshirani"}}, "url": "https://github.com/elastic/elasticsearch/commit/fba36c97c23b0c8f6869f2b10f28da80fc55f3dc", "committedDate": "2020-08-04T00:08:38Z", "message": "Swap logical order for normal and nested documents."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bfa57ff1a39ab4d7a4fa8dec59c58591102260d9", "author": {"user": {"login": "jtibshirani", "name": "Julie Tibshirani"}}, "url": "https://github.com/elastic/elasticsearch/commit/bfa57ff1a39ab4d7a4fa8dec59c58591102260d9", "committedDate": "2020-08-04T00:19:50Z", "message": "Extract the method createStoredFieldsVisitor."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxMTYyNzg4", "url": "https://github.com/elastic/elasticsearch/pull/60635#pullrequestreview-461162788", "createdAt": "2020-08-04T20:49:38Z", "commit": {"oid": "bfa57ff1a39ab4d7a4fa8dec59c58591102260d9"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQyMDo0OTozOFrOG7w_lw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQyMDo0OTo1NVrOG7xAMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTMyMTg3OQ==", "bodyText": "do we want to make this function static?", "url": "https://github.com/elastic/elasticsearch/pull/60635#discussion_r465321879", "createdAt": "2020-08-04T20:49:38Z", "author": {"login": "mayya-sharipova"}, "path": "server/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java", "diffHunk": "@@ -209,6 +163,54 @@ public int compareTo(DocIdToIndex o) {\n         }\n     }\n \n+    private FieldsVisitor createStoredFieldsVisitor(SearchContext context, Map<String, Set<String>> storedToRequestedFields) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bfa57ff1a39ab4d7a4fa8dec59c58591102260d9"}, "originalPosition": 79}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTMyMjAzNQ==", "bodyText": "do we want to make this function static?", "url": "https://github.com/elastic/elasticsearch/pull/60635#discussion_r465322035", "createdAt": "2020-08-04T20:49:55Z", "author": {"login": "mayya-sharipova"}, "path": "server/src/main/java/org/elasticsearch/search/fetch/FetchPhase.java", "diffHunk": "@@ -438,13 +437,17 @@ private void prepareNestedHitContext(FetchSubPhase.HitContext hitContext,\n         return nestedIdentity;\n     }\n \n-    private void loadStoredFields(SearchShardTarget shardTarget, LeafReaderContext readerContext, FieldsVisitor fieldVisitor, int docId) {\n+    private void loadStoredFields(SearchShardTarget shardTarget,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bfa57ff1a39ab4d7a4fa8dec59c58591102260d9"}, "originalPosition": 165}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3501, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}