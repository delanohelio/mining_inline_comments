{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwOTYwMTk2", "number": 55981, "title": "Fix input snapshotting for test tasks", "bodyText": "When converting some of our build logic from Groovy to Java in #55834, we inadvertently broke incremental build and cacheability because Gradle cannot reliably snapshot lambda task inputs. This PR replaces those lambdas with either a normal class or anonymous inner class implementation.", "createdAt": "2020-04-29T21:21:07Z", "url": "https://github.com/elastic/elasticsearch/pull/55981", "merged": true, "mergeCommit": {"oid": "3b7ae2d14fa755aa1e868acbd018941fdb8380a8"}, "closed": true, "closedAt": "2020-04-29T22:24:23Z", "author": {"login": "mark-vieira"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABccfOyLAH2gAyNDEwOTYwMTk2OjAxZTIxOTBlNGJjZWRkZTc1MGU3MDc3YzkwMDFjODUwOTM0MDE1NDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABccffN7gH2gAyNDEwOTYwMTk2OmM4YmUwNTAxYTlhZDZjOWEwYWFlMDFjOGNlN2I5Yzc4Yjc2NTBkMmQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "01e2190e4bcedde750e7077c9001c85093401546", "author": {"user": {"login": "mark-vieira", "name": "Mark Vieira"}}, "url": "https://github.com/elastic/elasticsearch/commit/01e2190e4bcedde750e7077c9001c85093401546", "committedDate": "2020-04-29T21:19:10Z", "message": "Fix input snapshotting for test tasks"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzMDU0MDc5", "url": "https://github.com/elastic/elasticsearch/pull/55981#pullrequestreview-403054079", "createdAt": "2020-04-29T21:30:01Z", "commit": {"oid": "01e2190e4bcedde750e7077c9001c85093401546"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzMDU3NTIz", "url": "https://github.com/elastic/elasticsearch/pull/55981#pullrequestreview-403057523", "createdAt": "2020-04-29T21:36:02Z", "commit": {"oid": "01e2190e4bcedde750e7077c9001c85093401546"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMTozNjowMlrOGOR68Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQyMTozNjowMlrOGOR68Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYyNjg2NQ==", "bodyText": "Oh, there is a bug here due to my previous PR, can you fix? heapdumpDir is a variable here that needs to be resolved, not a literal in the setting value.", "url": "https://github.com/elastic/elasticsearch/pull/55981#discussion_r417626865", "createdAt": "2020-04-29T21:36:02Z", "author": {"login": "rjernst"}, "path": "buildSrc/src/main/java/org/elasticsearch/gradle/ElasticsearchJavaPlugin.java", "diffHunk": "@@ -269,7 +276,7 @@ public static void configureTestTasks(Project project) {\n                 \"-XX:+HeapDumpOnOutOfMemoryError\"\n             );\n \n-            test.getJvmArgumentProviders().add(() -> List.of(\"-XX:HeapDumpPath=$heapdumpDir\"));\n+            test.getJvmArgumentProviders().add(new SimpleCommandLineArgumentProvider(\"-XX:HeapDumpPath=$heapdumpDir\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01e2190e4bcedde750e7077c9001c85093401546"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8be0501a9ad6c9a0aae01c8ce7b9c78b7650d2d", "author": {"user": {"login": "mark-vieira", "name": "Mark Vieira"}}, "url": "https://github.com/elastic/elasticsearch/commit/c8be0501a9ad6c9a0aae01c8ce7b9c78b7650d2d", "committedDate": "2020-04-29T21:37:07Z", "message": "Java doesn't do string interpolation"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 326, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}