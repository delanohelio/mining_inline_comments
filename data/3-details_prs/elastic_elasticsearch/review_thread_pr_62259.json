{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg0Mzc0NDky", "number": 62259, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwODoxNjo1NlrOEjA2Xw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwODoyMDoyOVrOEjA7tg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MTQ5NTM1OnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwODoxNjo1NlrOHRIyig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwODoxNjo1NlrOHRIyig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzczMTg1MA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Sets the stored fields to load from the docvalue and return.\n          \n          \n            \n                 * Sets the stored fields to load and return as part of the search request.", "url": "https://github.com/elastic/elasticsearch/pull/62259#discussion_r487731850", "createdAt": "2020-09-14T08:16:56Z", "author": {"login": "jimczi"}, "path": "server/src/main/java/org/elasticsearch/index/query/InnerHitBuilder.java", "diffHunk": "@@ -349,6 +367,41 @@ public InnerHitBuilder addDocValueField(String field) {\n         return addDocValueField(field, null);\n     }\n \n+    /**\n+     * Gets the fields to load and return as part of the search request.\n+     */\n+    public List<FieldAndFormat> getFetchFields() {\n+        return fetchFields;\n+    }\n+\n+    /**\n+     * Sets the stored fields to load from the docvalue and return.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53d6c58b52e439dcd017da61f9e15ba3bf734061"}, "originalPosition": 65}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MTUwOTAyOnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/search/aggregations/metrics/TopHitsAggregationBuilder.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwODoyMDoyOVrOHRI6ZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwODoyMDoyOVrOHRI6ZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzczMzg2MQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        throw new IllegalArgumentException(\"[docValueField] must not be null: [\" + name + \"]\");\n          \n          \n            \n                        throw new IllegalArgumentException(\"[fetch_field] must not be null: [\" + name + \"]\");", "url": "https://github.com/elastic/elasticsearch/pull/62259#discussion_r487733861", "createdAt": "2020-09-14T08:20:29Z", "author": {"login": "jimczi"}, "path": "server/src/main/java/org/elasticsearch/search/aggregations/metrics/TopHitsAggregationBuilder.java", "diffHunk": "@@ -425,10 +439,38 @@ public TopHitsAggregationBuilder docValueField(String docValueField) {\n     /**\n      * Gets the field-data fields.\n      */\n-    public List<FieldAndFormat> fieldDataFields() {\n+    public List<FieldAndFormat> docValueFields() {\n         return docValueFields;\n     }\n \n+    /**\n+     * Adds a field to load and return as part of the search request.\n+     */\n+    public TopHitsAggregationBuilder fetchField(String field, String format) {\n+        if (field == null) {\n+            throw new IllegalArgumentException(\"[docValueField] must not be null: [\" + name + \"]\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53d6c58b52e439dcd017da61f9e15ba3bf734061"}, "originalPosition": 63}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1636, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}