{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0NTI5NDQx", "number": 60858, "title": "[DOCS] [7.8] Clarify HTTPS usage for create key API", "bodyText": "Since API_key has to be enabled when TLS is also enabled on the HTTP interface, should that example be using https to be consistent? Better check with someone as well.", "createdAt": "2020-08-07T10:34:22Z", "url": "https://github.com/elastic/elasticsearch/pull/60858", "merged": true, "mergeCommit": {"oid": "06dc0d49b1f9756d24084b7ffd2e135f1aa19510"}, "closed": true, "closedAt": "2020-09-08T13:28:43Z", "author": {"login": "Leaf-Lin"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8h7eVAH2gAyNDY0NTI5NDQxOjQ5NDMzY2IxOTIyMTZhYTg2ZjA2OTEyNTZmZjllM2FiNjQ1ZTY0MzI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdGv7cjgFqTQ4Mzc4Nzc3Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "49433cb192216aa86f0691256ff9e3ab645e6432", "author": {"user": {"login": "Leaf-Lin", "name": null}}, "url": "https://github.com/elastic/elasticsearch/commit/49433cb192216aa86f0691256ff9e3ab645e6432", "committedDate": "2020-08-07T10:33:22Z", "message": "Update create-api-keys.asciidoc\n\nSince API_key has to be enabled when TLS is also enabled on the HTTP interface, should that example be using https to be consistent?"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0NjcyMDE0", "url": "https://github.com/elastic/elasticsearch/pull/60858#pullrequestreview-464672014", "createdAt": "2020-08-11T00:27:48Z", "commit": {"oid": "49433cb192216aa86f0691256ff9e3ab645e6432"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e665a8786cda0e2006d11e26852199d14d6ce922", "author": {"user": {"login": "lockewritesdocs", "name": "Adam Locke"}}, "url": "https://github.com/elastic/elasticsearch/commit/e665a8786cda0e2006d11e26852199d14d6ce922", "committedDate": "2020-08-18T16:26:01Z", "message": "Adding note to create API keys for https"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "919e667077aaaecc869f4c6a8a2c873e9ebe807b", "author": {"user": {"login": "lockewritesdocs", "name": "Adam Locke"}}, "url": "https://github.com/elastic/elasticsearch/commit/919e667077aaaecc869f4c6a8a2c873e9ebe807b", "committedDate": "2020-08-18T16:33:03Z", "message": "Adding note for enabling TLS"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyMjI1NTA2", "url": "https://github.com/elastic/elasticsearch/pull/60858#pullrequestreview-472225506", "createdAt": "2020-08-21T06:41:48Z", "commit": {"oid": "919e667077aaaecc869f4c6a8a2c873e9ebe807b"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQwNjo0MTo0OFrOHEdc8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQwNjo0NjozMlrOHEdjZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDQzODg5OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            NOTE: If your node is configured to use SSL in a production environment, then you must specify `https` when creating your API key.\n          \n          \n            \n            NOTE: If your node has `xpack.security.http.ssl.enabled` set to `true`, then you must specify `https` when creating your API key.\n          \n      \n    \n    \n  \n\nThe \"production environment\" wording is a bit misleading, since you can have SSL enabled in a non-production environment, in which case you would still need https.\nIt's also necessary (if we want to be perfectly accurate) to distinguish between SSL for the transport port and the HTTP port.\nI used the setting name because it read better to me than \"If you use SSL on the HTTP port ...\"", "url": "https://github.com/elastic/elasticsearch/pull/60858#discussion_r474438899", "createdAt": "2020-08-21T06:41:48Z", "author": {"login": "tvernum"}, "path": "x-pack/docs/en/rest-api/security/create-api-keys.asciidoc", "diffHunk": "@@ -123,6 +123,8 @@ The API key returned by this API can then be used by sending a request with a\n `Authorization` header with a value having the prefix `ApiKey` followed\n by the _credentials_, where _credentials_ is the base64 encoding of `id` and `api_key` joined by a colon.\n \n+NOTE: If your node is configured to use SSL in a production environment, then you must specify `https` when creating your API key.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "919e667077aaaecc869f4c6a8a2c873e9ebe807b"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDQ0MDU1MA==", "bodyText": "I think if I were reading this, I would be confused as to whether it's required on production environments or not.\nThe sentence before says you only need it for certain features, but then this sentence say it's not required on non-production environments, but doesn't link back to those features.\nPerhaps something more like\nNOTE: Enabling TLS on the HTTP layer is strongly recommended but is not required.\n\nIMPORTANT: In a production environment, some {es} features such as\ntokens and API keys, will be disabled unless you enable TLS on the HTTP layer.\n\nAlso, I think production environment should probably link to https://www.elastic.co/guide/en/elasticsearch/reference/current/bootstrap-checks.html#dev-vs-prod-mode", "url": "https://github.com/elastic/elasticsearch/pull/60858#discussion_r474440550", "createdAt": "2020-08-21T06:46:32Z", "author": {"login": "tvernum"}, "path": "x-pack/docs/en/security/securing-communications/tls-http.asciidoc", "diffHunk": "@@ -5,10 +5,29 @@\n When {security-features} are enabled, you can optionally use TLS to ensure that\n communication between HTTP clients and the cluster is encrypted.\n \n-NOTE: Enabling TLS on the HTTP layer is strongly recommended but is not required.\n-If you enable TLS on the HTTP layer in {es}, then you might need to make\n-configuration changes in other parts of the {stack} and in any {es} clients that\n-you use.\n+IMPORTANT: You must enable TLS on the HTTP layer to use certain {es} features\n+in a production environment, such as tokens and API keys.\n+\n+Enabling TLS on the HTTP layer is strongly recommended for non-production\n+deployments, but is not required.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "919e667077aaaecc869f4c6a8a2c873e9ebe807b"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21d8eda74870b947db639dd29f34fab40d831c78", "author": {"user": {"login": "elasticmachine", "name": "Elastic Machine"}}, "url": "https://github.com/elastic/elasticsearch/commit/21d8eda74870b947db639dd29f34fab40d831c78", "committedDate": "2020-08-21T06:49:19Z", "message": "Merge branch '7.8' into Leaf-Lin-patch-3"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d7997b4c059d2b8c6f36ffb8f31aa7be7b2bf7a", "author": {"user": {"login": "lockewritesdocs", "name": "Adam Locke"}}, "url": "https://github.com/elastic/elasticsearch/commit/7d7997b4c059d2b8c6f36ffb8f31aa7be7b2bf7a", "committedDate": "2020-08-24T15:18:38Z", "message": "Add specific setting for ssl.enabled\n\nCo-authored-by: Tim Vernum <tim.vernum@elastic.co>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f676f6990a7c91fef8fdb42f8ec3158b46d70745", "author": {"user": {"login": "lockewritesdocs", "name": "Adam Locke"}}, "url": "https://github.com/elastic/elasticsearch/commit/f676f6990a7c91fef8fdb42f8ec3158b46d70745", "committedDate": "2020-08-24T20:42:48Z", "message": "Incorporating review feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNzg3Nzcz", "url": "https://github.com/elastic/elasticsearch/pull/60858#pullrequestreview-483787773", "createdAt": "2020-09-08T04:31:15Z", "commit": {"oid": "f676f6990a7c91fef8fdb42f8ec3158b46d70745"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3314, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}