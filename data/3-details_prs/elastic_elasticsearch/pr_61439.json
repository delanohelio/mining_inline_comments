{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcxODA0MDU3", "number": 61439, "title": "Add base precommit task to all java projects", "bodyText": "This commit adds java compilation to the base precommit task, and adds\nthat to the java plugin. This further reduces dependence on the build\nplugin.", "createdAt": "2020-08-21T18:52:24Z", "url": "https://github.com/elastic/elasticsearch/pull/61439", "merged": true, "mergeCommit": {"oid": "f57044be794b4bfb4f2f8f043b881bf0b7a8e5ec"}, "closed": true, "closedAt": "2020-08-27T00:16:29Z", "author": {"login": "rjernst"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdBJbfeAH2gAyNDcxODA0MDU3OmM3YmFlNmEyZjNkNjQ3ZGQzNDg2NTI4ZTkzZjI2ZjlmMTI3MTY4OGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCHjOvAFqTQ3Mzc4Mzk4MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c7bae6a2f3d647dd3486528e93f26f9f1271688f", "author": {"user": {"login": "rjernst", "name": "Ryan Ernst"}}, "url": "https://github.com/elastic/elasticsearch/commit/c7bae6a2f3d647dd3486528e93f26f9f1271688f", "committedDate": "2020-08-21T18:50:20Z", "message": "Add base precommit task to all java projects\n\nThis commit adds java compilation to the base precommit task, and adds\nthat to the java plugin. This further reduces dependence on the build\nplugin."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa1aafc7d945f16a2de5e9837631eac3da952fd4", "author": {"user": {"login": "rjernst", "name": "Ryan Ernst"}}, "url": "https://github.com/elastic/elasticsearch/commit/aa1aafc7d945f16a2de5e9837631eac3da952fd4", "committedDate": "2020-08-21T21:50:37Z", "message": "spotless"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyODY0NjQx", "url": "https://github.com/elastic/elasticsearch/pull/61439#pullrequestreview-472864641", "createdAt": "2020-08-21T23:25:22Z", "commit": {"oid": "aa1aafc7d945f16a2de5e9837631eac3da952fd4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQyMzoyNToyM1rOHFAPWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMVQyMzoyNToyM1rOHFAPWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTAwODg1Nw==", "bodyText": "I'm confused why we are duplicating this logic. It seems to me that the PrecommitPlugin should be there only to create the task, the individual plugins like the java plugin, should add the java specific stuff there.", "url": "https://github.com/elastic/elasticsearch/pull/61439#discussion_r475008857", "createdAt": "2020-08-21T23:25:23Z", "author": {"login": "mark-vieira"}, "path": "buildSrc/src/main/java/org/elasticsearch/gradle/precommit/PrecommitPlugin.java", "diffHunk": "@@ -72,7 +72,18 @@ public void apply(Project project) {\n                     p -> project.getTasks().named(LifecycleBasePlugin.CHECK_TASK_NAME).configure(t -> t.dependsOn(precommit))\n                 );\n             project.getPluginManager()\n-                .withPlugin(\"java\", p -> project.getTasks().withType(Test.class).configureEach(t -> t.mustRunAfter(precommit)));\n+                .withPlugin(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa1aafc7d945f16a2de5e9837631eac3da952fd4"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06016fc526cfda3db87dc6c56cc62d3643a11479", "author": {"user": {"login": "rjernst", "name": "Ryan Ernst"}}, "url": "https://github.com/elastic/elasticsearch/commit/06016fc526cfda3db87dc6c56cc62d3643a11479", "committedDate": "2020-08-24T19:00:07Z", "message": "move task plugin out"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczNzgzOTgx", "url": "https://github.com/elastic/elasticsearch/pull/61439#pullrequestreview-473783981", "createdAt": "2020-08-24T19:12:54Z", "commit": {"oid": "06016fc526cfda3db87dc6c56cc62d3643a11479"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4653, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}