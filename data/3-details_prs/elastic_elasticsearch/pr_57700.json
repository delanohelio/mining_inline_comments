{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI4MDg0Nzg5", "number": 57700, "title": "Move async task maintenance service to core plugin", "bodyText": "The async task task maintenance service is used by both async search plugin\nas well as EQL plugin. So it needs to reside in the core.\nRelates to #49638", "createdAt": "2020-06-04T20:56:29Z", "url": "https://github.com/elastic/elasticsearch/pull/57700", "merged": true, "mergeCommit": {"oid": "509c6749a702790709407ed047af514995995732"}, "closed": true, "closedAt": "2020-06-11T15:12:35Z", "author": {"login": "imotov"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcoEc9JAH2gAyNDI4MDg0Nzg5OmNjMDVlMWI5OGNiNDE3ZGM1ZjYyMjA3YWQzYWRiYzllYWM0ZjE2NGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcqOdpIgH2gAyNDI4MDg0Nzg5OjVlMmVkOTJjZDg2ZDJhY2I2Y2E3NzNhMzFiZWRmMDNkMWYwYTNlMDY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cc05e1b98cb417dc5f62207ad3adbc9eac4f164e", "author": {"user": {"login": "imotov", "name": "Igor Motov"}}, "url": "https://github.com/elastic/elasticsearch/commit/cc05e1b98cb417dc5f62207ad3adbc9eac4f164e", "committedDate": "2020-06-04T20:54:18Z", "message": "Move async task maintenance service to core plugin\n\nThe async task task maintenance service is used by both async search plugin\nas well as EQL plugin. So it needs to reside in the core.\n\nRelates to #49638"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3NDAyMzEy", "url": "https://github.com/elastic/elasticsearch/pull/57700#pullrequestreview-427402312", "createdAt": "2020-06-09T17:49:39Z", "commit": {"oid": "cc05e1b98cb417dc5f62207ad3adbc9eac4f164e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNzo0OTo0MFrOGhVsCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxNzo0OTo0MFrOGhVsCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzYxMTUzMQ==", "bodyText": "This makes me wonder if we should make the index a system index first ? This way, we could start the maintenance service in the system index plugin. I don't think it will cause issue to move the index into a system index since we have all the protection in place with the async search user ?", "url": "https://github.com/elastic/elasticsearch/pull/57700#discussion_r437611531", "createdAt": "2020-06-09T17:49:40Z", "author": {"login": "jimczi"}, "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/XPackPlugin.java", "diffHunk": "@@ -248,6 +253,16 @@ public Settings additionalSettings() {\n         components.add(getLicenseService());\n         components.add(getLicenseState());\n \n+        if (DiscoveryNode.isDataNode(environment.settings())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cc05e1b98cb417dc5f62207ad3adbc9eac4f164e"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3NDgyNDk4", "url": "https://github.com/elastic/elasticsearch/pull/57700#pullrequestreview-427482498", "createdAt": "2020-06-09T19:39:49Z", "commit": {"oid": "cc05e1b98cb417dc5f62207ad3adbc9eac4f164e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e89efc071b1809e3aa244b1066ca83ddc00a0f9b", "author": {"user": {"login": "imotov", "name": "Igor Motov"}}, "url": "https://github.com/elastic/elasticsearch/commit/e89efc071b1809e3aa244b1066ca83ddc00a0f9b", "committedDate": "2020-06-09T22:43:21Z", "message": "Make async-search a system index"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "510fc6496af78b5637b8ae229dc1cf9056cd4123", "author": {"user": {"login": "imotov", "name": "Igor Motov"}}, "url": "https://github.com/elastic/elasticsearch/commit/510fc6496af78b5637b8ae229dc1cf9056cd4123", "committedDate": "2020-06-10T14:42:35Z", "message": "Merge remote-tracking branch 'elastic/feature/async-eql' into move-async-cleanup-service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef16b7555d7b7acb95e03c558adf98f7f300008e", "author": {"user": {"login": "imotov", "name": "Igor Motov"}}, "url": "https://github.com/elastic/elasticsearch/commit/ef16b7555d7b7acb95e03c558adf98f7f300008e", "committedDate": "2020-06-10T18:26:54Z", "message": "Move AsyncTaskMaintenanceService to AsyncPlugin"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4MzQ3NzU2", "url": "https://github.com/elastic/elasticsearch/pull/57700#pullrequestreview-428347756", "createdAt": "2020-06-10T19:04:34Z", "commit": {"oid": "ef16b7555d7b7acb95e03c558adf98f7f300008e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e2ed92cd86d2acb6ca773a31bedf03d1f0a3e06", "author": {"user": {"login": "imotov", "name": "Igor Motov"}}, "url": "https://github.com/elastic/elasticsearch/commit/5e2ed92cd86d2acb6ca773a31bedf03d1f0a3e06", "committedDate": "2020-06-11T13:41:57Z", "message": "Rename AsyncPlugin to AsyncResultsIndexPlugin"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3912, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}