{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3NDkzMzg1", "number": 52547, "title": "Implement hidden aliases", "bodyText": "This commit introduces hidden aliases. These are similar to hidden\nindices, in that they are not visible by default, unless explicitly\nspecified by name or by indicating that hidden indices/aliases are\ndesired.\nThe new alias property, is_hidden is implemented similarly to\nis_write_index, except that it must be consistent across all indices\nwith a given alias - that is, all indices with a given alias must\nspecify the alias as either hidden, or all specify it as non-hidden,\neither explicitly or by omitting the is_hidden property.\n\nThis just implements hidden indices and makes a few tweaks to alias resolution to compensate - there's still a few problems that need to be addressed with visible aliases on hidden indices such as elastic/kibana#58722 (comment) and #52304.", "createdAt": "2020-02-20T00:53:21Z", "url": "https://github.com/elastic/elasticsearch/pull/52547", "merged": true, "mergeCommit": {"oid": "351c2f9d40951703951e19f95d3c11ac2d12d29c"}, "closed": true, "closedAt": "2020-03-03T23:30:22Z", "author": {"login": "gwbrown"}, "timelineItems": {"totalCount": 23, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcGASDmgH2gAyMzc3NDkzMzg1OmM5MmIwY2ZhOGJlYjdlYjRjNTg3NDBlZjYwODRlNWQ5MTMwMzFiY2E=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKJ6kzgH2gAyMzc3NDkzMzg1OmZmZTQ0MGYxZTJhNDA3ZmFiODIyOTI0MDJiNjk5MzgyMTg2NWYzZjU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c92b0cfa8beb7eb4c58740ef6084e5d913031bca", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/c92b0cfa8beb7eb4c58740ef6084e5d913031bca", "committedDate": "2020-02-20T00:49:21Z", "message": "Implement hidden aliases\n\nThis commit introduces hidden aliases. These are similar to hidden\nindices, in that they are not visible by default, unless explicitly\nspecified by name or by indicating that hidden indices/aliases are\ndesired.\n\nThe new alias property, `is_hidden` is implemented similarly to\n`is_write_index`, except that it must be consistent across all indices\nwith a given alias - that is, all indices with a given alias must\nspecify the alias as either hidden, or all specify it as non-hidden,\neither explicitly or by omitting the `is_hidden` property."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyMDQxMzk4", "url": "https://github.com/elastic/elasticsearch/pull/52547#pullrequestreview-362041398", "createdAt": "2020-02-20T16:20:34Z", "commit": {"oid": "c92b0cfa8beb7eb4c58740ef6084e5d913031bca"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxNjoyMDozNFrOFsZ_CQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxNjoyMDozNFrOFsZ_CQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjEwNzQwMQ==", "bodyText": "If I understand this correctly, this means that every place the alias is stored must have the same hidden value? Should we be more strict regarding false and null since it seems like a combination of those values would be accepted?", "url": "https://github.com/elastic/elasticsearch/pull/52547#discussion_r382107401", "createdAt": "2020-02-20T16:20:34Z", "author": {"login": "jaymode"}, "path": "server/src/main/java/org/elasticsearch/cluster/metadata/AliasOrIndex.java", "diffHunk": "@@ -153,6 +175,24 @@ public void computeAndValidateWriteIndex() {\n                 throw new IllegalStateException(\"alias [\" + aliasName + \"] has more than one write index [\" +\n                     Strings.collectionToCommaDelimitedString(writeIndicesStrings) + \"]\");\n             }\n+\n+            // Validate hidden status\n+            final Map<Boolean, List<IndexMetaData>> groupedByHiddenStatus = referenceIndexMetaDatas.stream()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c92b0cfa8beb7eb4c58740ef6084e5d913031bca"}, "originalPosition": 79}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac83029f54be8e41ec25493a0534563c75c6dd75", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/ac83029f54be8e41ec25493a0534563c75c6dd75", "committedDate": "2020-02-21T23:45:26Z", "message": "Merge branch 'master' into hidden/aliases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "522bba68dcab4b657dea27eb615abc8c09862cd1", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/522bba68dcab4b657dea27eb615abc8c09862cd1", "committedDate": "2020-02-25T00:18:31Z", "message": "AliasOrIndex.isHidden -> boolean"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95e365ef165c7a67569ab5b6b252eb8a2e005d80", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/95e365ef165c7a67569ab5b6b252eb8a2e005d80", "committedDate": "2020-02-25T00:18:41Z", "message": "Merge branch 'master' into hidden/aliases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53a0dab35054b502e2f7ac7f514b1cd5dce7001a", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/53a0dab35054b502e2f7ac7f514b1cd5dce7001a", "committedDate": "2020-02-25T21:37:44Z", "message": "Merge branch 'master' into hidden/aliases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b36f53eeb045f427b339aa1c0d161cdf2975d9fd", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/b36f53eeb045f427b339aa1c0d161cdf2975d9fd", "committedDate": "2020-02-25T23:55:26Z", "message": "Only include isHidden in alias XContent if present"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf118884c6ea42a72964a1c52bd624e834699ea1", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/bf118884c6ea42a72964a1c52bd624e834699ea1", "committedDate": "2020-02-26T00:02:43Z", "message": "Update alias docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3985605fb6689a67a38fc3eced952b04525e8af", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/d3985605fb6689a67a38fc3eced952b04525e8af", "committedDate": "2020-02-26T00:37:02Z", "message": "Handle hidden indices in standard resolver"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7cceb0c09c24b0494a1a1be8b52e6d9a5947cfcb", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/7cceb0c09c24b0494a1a1be8b52e6d9a5947cfcb", "committedDate": "2020-02-26T00:43:21Z", "message": "Improve is_hidden consistency error message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82aef04b12c9a53cdf1e837b013d43af858e823a", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/82aef04b12c9a53cdf1e837b013d43af858e823a", "committedDate": "2020-02-26T18:36:25Z", "message": "Merge branch 'master' into hidden/aliases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8c7472a3ace39bd87d0c22c412fb08f91df7e60", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/c8c7472a3ace39bd87d0c22c412fb08f91df7e60", "committedDate": "2020-02-27T17:57:47Z", "message": "Add isHidden to AliasAction + unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7c1af77ca2f6d5954b2b6bcc2b866c7fd1b5670", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/e7c1af77ca2f6d5954b2b6bcc2b866c7fd1b5670", "committedDate": "2020-02-27T18:55:05Z", "message": "Yet more unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e77c224a4814c0f378d84beeb4938667474d77e", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/1e77c224a4814c0f378d84beeb4938667474d77e", "committedDate": "2020-02-27T22:31:56Z", "message": "Integration tests for hidden aliases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f02c484996eb45e6191da4da04f3baaddb6a371c", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/f02c484996eb45e6191da4da04f3baaddb6a371c", "committedDate": "2020-02-27T22:32:13Z", "message": "Merge branch 'master' into hidden/aliases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29a6a5d9e2adb03282d43b7d5c1ce6c7d0379d1f", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/29a6a5d9e2adb03282d43b7d5c1ce6c7d0379d1f", "committedDate": "2020-02-27T22:41:13Z", "message": "More unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0dad3570319ded9a4dc39ca7402ad7accca7922a", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/0dad3570319ded9a4dc39ca7402ad7accca7922a", "committedDate": "2020-02-27T22:57:45Z", "message": "Line lengths"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2faec6314d8c74ecf513549dc2ac65cc8f8a7e4b", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/2faec6314d8c74ecf513549dc2ac65cc8f8a7e4b", "committedDate": "2020-02-29T00:35:59Z", "message": "Plumb is_hidden into Security's resolver"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7240df7a44d3ea4d60e42a4749aeb39f622e803", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/c7240df7a44d3ea4d60e42a4749aeb39f622e803", "committedDate": "2020-02-29T00:38:56Z", "message": "Merge branch 'master' into hidden/aliases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88a3d75ecab45f7c93b87b7ef65d979e16189a07", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/88a3d75ecab45f7c93b87b7ef65d979e16189a07", "committedDate": "2020-02-29T01:10:50Z", "message": "Update streaming version TODOS"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3NDIxODk3", "url": "https://github.com/elastic/elasticsearch/pull/52547#pullrequestreview-367421897", "createdAt": "2020-03-02T18:22:52Z", "commit": {"oid": "88a3d75ecab45f7c93b87b7ef65d979e16189a07"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxODoyMjo1MlrOFwqIyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxODoyNDoyNFrOFwqLsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU2NjM0Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                               @Nullable Boolean writeIndex, Boolean isHidden) {\n          \n          \n            \n                               @Nullable Boolean writeIndex, @Nullable Boolean isHidden) {", "url": "https://github.com/elastic/elasticsearch/pull/52547#discussion_r386566346", "createdAt": "2020-03-02T18:22:52Z", "author": {"login": "jaymode"}, "path": "server/src/main/java/org/elasticsearch/cluster/metadata/AliasAction.java", "diffHunk": "@@ -85,11 +85,13 @@ public String getIndex() {\n         @Nullable\n         private final Boolean writeIndex;\n \n+        @Nullable final Boolean isHidden;\n+\n         /**\n          * Build the operation.\n          */\n-        public Add(String index, String alias, @Nullable String filter, @Nullable String indexRouting,\n-                   @Nullable String searchRouting, @Nullable Boolean writeIndex) {\n+        public Add(String index, String alias, @Nullable String filter, @Nullable String indexRouting, @Nullable String searchRouting,\n+                   @Nullable Boolean writeIndex, Boolean isHidden) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88a3d75ecab45f7c93b87b7ef65d979e16189a07"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU2NjY2Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    public Boolean isHidden() {\n          \n          \n            \n                    @Nullable\n          \n          \n            \n                    public Boolean isHidden() {", "url": "https://github.com/elastic/elasticsearch/pull/52547#discussion_r386566666", "createdAt": "2020-03-02T18:23:31Z", "author": {"login": "jaymode"}, "path": "server/src/main/java/org/elasticsearch/cluster/metadata/AliasAction.java", "diffHunk": "@@ -112,6 +115,10 @@ public Boolean writeIndex() {\n             return writeIndex;\n         }\n \n+        public Boolean isHidden() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88a3d75ecab45f7c93b87b7ef65d979e16189a07"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU2Njk2Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                      Boolean isHidden) {\n          \n          \n            \n                                      @Nullable Boolean isHidden) {", "url": "https://github.com/elastic/elasticsearch/pull/52547#discussion_r386566963", "createdAt": "2020-03-02T18:24:08Z", "author": {"login": "jaymode"}, "path": "server/src/main/java/org/elasticsearch/cluster/metadata/AliasMetaData.java", "diffHunk": "@@ -59,7 +61,11 @@\n     @Nullable\n     private final Boolean writeIndex;\n \n-    private AliasMetaData(String alias, CompressedXContent filter, String indexRouting, String searchRouting, Boolean writeIndex) {\n+    @Nullable\n+    private final Boolean isHidden;\n+\n+    private AliasMetaData(String alias, CompressedXContent filter, String indexRouting, String searchRouting, Boolean writeIndex,\n+                          Boolean isHidden) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88a3d75ecab45f7c93b87b7ef65d979e16189a07"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjU2NzA4OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public Boolean isHidden() {\n          \n          \n            \n                @Nullable\n          \n          \n            \n                public Boolean isHidden() {", "url": "https://github.com/elastic/elasticsearch/pull/52547#discussion_r386567088", "createdAt": "2020-03-02T18:24:24Z", "author": {"login": "jaymode"}, "path": "server/src/main/java/org/elasticsearch/cluster/metadata/AliasMetaData.java", "diffHunk": "@@ -120,6 +128,10 @@ public Boolean writeIndex() {\n         return writeIndex;\n     }\n \n+    public Boolean isHidden() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88a3d75ecab45f7c93b87b7ef65d979e16189a07"}, "originalPosition": 47}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9285a57e55b60975da635b7f4e9089bf1197748f", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/9285a57e55b60975da635b7f4e9089bf1197748f", "committedDate": "2020-03-03T22:18:10Z", "message": "@Nullable consistency"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffe440f1e2a407fab82292402b6993821865f3f5", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/ffe440f1e2a407fab82292402b6993821865f3f5", "committedDate": "2020-03-03T22:18:27Z", "message": "Merge branch 'master' into hidden/aliases"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2199, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}