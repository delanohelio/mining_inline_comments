{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4ODA2MzEy", "number": 64897, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMjozOTo1NFrOE3cPGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNDoxNDo0M1rOE3uNpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2NTY5NzU1OnYy", "diffSide": "LEFT", "path": "rest-api-spec/src/main/resources/rest-api-spec/test/search.aggregation/10_histogram.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMjozOTo1NFrOHwybGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMjozOTo1NFrOHwybGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkxOTgzNA==", "bodyText": "I've moved this into the profile integration test. I'm sad to make another integration test but I don't want to make thousands of docs in a yaml test.", "url": "https://github.com/elastic/elasticsearch/pull/64897#discussion_r520919834", "createdAt": "2020-11-10T22:39:54Z", "author": {"login": "nik9000"}, "path": "rest-api-spec/src/main/resources/rest-api-spec/test/search.aggregation/10_histogram.yml", "diffHunk": "@@ -529,61 +529,6 @@ setup:\n   - match: { profile.shards.0.aggregations.0.breakdown.collect_count: 4 }\n   - match: { profile.shards.0.aggregations.0.debug.total_buckets: 3 }\n \n----\n-\"date_histogram run as filters profiler\":", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "480fa284f504a2c31b581489ac6dc32ff28af70b"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2NTcwMDQzOnYy", "diffSide": "RIGHT", "path": "server/src/main/java/org/elasticsearch/search/aggregations/bucket/range/GeoDistanceRangeAggregatorFactory.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMjo0MDo1MlrOHwyc4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMjo0MDo1MlrOHwyc4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkyMDI4OQ==", "bodyText": "I calculate this universally now so we can always show it for debugging. In this particular location we don't use it for anything other than the debug message.", "url": "https://github.com/elastic/elasticsearch/pull/64897#discussion_r520920289", "createdAt": "2020-11-10T22:40:52Z", "author": {"login": "nik9000"}, "path": "server/src/main/java/org/elasticsearch/search/aggregations/bucket/range/GeoDistanceRangeAggregatorFactory.java", "diffHunk": "@@ -66,13 +66,15 @@ public static void registerAggregators(ValuesSourceRegistry.Builder builder) {\n                 cardinality,\n                 metadata) -> {\n                 DistanceSource distanceSource = new DistanceSource((ValuesSource.GeoPoint) valuesSource, distanceType, origin, units);\n+                double averageDocsPerRange = ((double) context.searcher().getIndexReader().maxDoc()) / ranges.length;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "480fa284f504a2c31b581489ac6dc32ff28af70b"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2ODY0MjkyOnYy", "diffSide": "RIGHT", "path": "server/src/internalClusterTest/java/org/elasticsearch/search/profile/aggregation/AggregationProfilerIT.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNDoxNDo0M1rOHxO5Nw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNDoxNDo0M1rOHxO5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTM4NjI5NQ==", "bodyText": "Comment on what this is intended to test would be nice.", "url": "https://github.com/elastic/elasticsearch/pull/64897#discussion_r521386295", "createdAt": "2020-11-11T14:14:43Z", "author": {"login": "not-napoleon"}, "path": "server/src/internalClusterTest/java/org/elasticsearch/search/profile/aggregation/AggregationProfilerIT.java", "diffHunk": "@@ -562,4 +567,59 @@ public void testNoProfile() {\n         assertThat(profileResults, notNullValue());\n         assertThat(profileResults.size(), equalTo(0));\n     }\n+\n+    public void testFilterByFilter() throws InterruptedException, IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4d90f95f5f0eb4508d6151891bb06f767b8e1f9"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3079, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}