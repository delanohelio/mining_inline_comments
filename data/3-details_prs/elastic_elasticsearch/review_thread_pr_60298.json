{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3ODM3NjY1", "number": 60298, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNzoyNzo1NVrOES6gIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMzo1NDozNVrOETCu_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MjY4MzIzOnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/deprecation/src/internalClusterTest/java/org/elasticsearch/http/DeprecationHttpIT.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNzoyNzo1NlrOG4W_6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxOTo1NzoyMVrOG4ce2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc1MDI0OQ==", "bodyText": "This should probably be moved to org.elasticsearch.xpack.deprecation?", "url": "https://github.com/elastic/elasticsearch/pull/60298#discussion_r461750249", "createdAt": "2020-07-28T17:27:56Z", "author": {"login": "rjernst"}, "path": "x-pack/plugin/deprecation/src/internalClusterTest/java/org/elasticsearch/http/DeprecationHttpIT.java", "diffHunk": "@@ -1,50 +1,55 @@\n /*\n- * Licensed to Elasticsearch under one or more contributor\n- * license agreements. See the NOTICE file distributed with\n- * this work for additional information regarding copyright\n- * ownership. Elasticsearch licenses this file to you under\n- * the Apache License, Version 2.0 (the \"License\"); you may\n- * not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- *\n- *    http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n+ * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n+ * or more contributor license agreements. Licensed under the Elastic License;\n+ * you may not use this file except in compliance with the Elastic License.\n  */\n package org.elasticsearch.http;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80218062fa4459dafc978c3266ce7e7b203d1360"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg0MDA5MA==", "bodyText": "Thanks Ryan, I've moved this class you suggest.", "url": "https://github.com/elastic/elasticsearch/pull/60298#discussion_r461840090", "createdAt": "2020-07-28T19:57:21Z", "author": {"login": "pugnascotia"}, "path": "x-pack/plugin/deprecation/src/internalClusterTest/java/org/elasticsearch/http/DeprecationHttpIT.java", "diffHunk": "@@ -1,50 +1,55 @@\n /*\n- * Licensed to Elasticsearch under one or more contributor\n- * license agreements. See the NOTICE file distributed with\n- * this work for additional information regarding copyright\n- * ownership. Elasticsearch licenses this file to you under\n- * the Apache License, Version 2.0 (the \"License\"); you may\n- * not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- *\n- *    http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n+ * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n+ * or more contributor license agreements. Licensed under the Elastic License;\n+ * you may not use this file except in compliance with the Elastic License.\n  */\n package org.elasticsearch.http;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc1MDI0OQ=="}, "originalCommit": {"oid": "80218062fa4459dafc978c3266ce7e7b203d1360"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MjY4NTYyOnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/deprecation/src/internalClusterTest/java/org/elasticsearch/http/plugin/TestDeprecationHeaderRestAction.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNzoyODozM1rOG4XBdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwODo1MTozNlrOG4u87Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc1MDY0Nw==", "bodyText": "This should probably be org.elasticsearch.xpack.deprecation?", "url": "https://github.com/elastic/elasticsearch/pull/60298#discussion_r461750647", "createdAt": "2020-07-28T17:28:33Z", "author": {"login": "rjernst"}, "path": "x-pack/plugin/deprecation/src/internalClusterTest/java/org/elasticsearch/http/plugin/TestDeprecationHeaderRestAction.java", "diffHunk": "@@ -1,22 +1,9 @@\n /*\n- * Licensed to Elasticsearch under one or more contributor\n- * license agreements. See the NOTICE file distributed with\n- * this work for additional information regarding copyright\n- * ownership. Elasticsearch licenses this file to you under\n- * the Apache License, Version 2.0 (the \"License\"); you may\n- * not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- *\n- *    http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n+ * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n+ * or more contributor license agreements. Licensed under the Elastic License;\n+ * you may not use this file except in compliance with the Elastic License.\n  */\n-package org.elasticsearch.http;\n+package org.elasticsearch.http.plugin;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80218062fa4459dafc978c3266ce7e7b203d1360"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg0MDg4NQ==", "bodyText": "I moved this to org.elasticsearch.xpack.deprecation.plugin. I felt that keeping the plugin part was ever so slightly nicer since those classes are indeed loaded as an ES plugin, and don't contain the test code itself. However I can change that again if you feel strongly about it.", "url": "https://github.com/elastic/elasticsearch/pull/60298#discussion_r461840885", "createdAt": "2020-07-28T19:58:51Z", "author": {"login": "pugnascotia"}, "path": "x-pack/plugin/deprecation/src/internalClusterTest/java/org/elasticsearch/http/plugin/TestDeprecationHeaderRestAction.java", "diffHunk": "@@ -1,22 +1,9 @@\n /*\n- * Licensed to Elasticsearch under one or more contributor\n- * license agreements. See the NOTICE file distributed with\n- * this work for additional information regarding copyright\n- * ownership. Elasticsearch licenses this file to you under\n- * the Apache License, Version 2.0 (the \"License\"); you may\n- * not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- *\n- *    http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n+ * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n+ * or more contributor license agreements. Licensed under the Elastic License;\n+ * you may not use this file except in compliance with the Elastic License.\n  */\n-package org.elasticsearch.http;\n+package org.elasticsearch.http.plugin;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc1MDY0Nw=="}, "originalCommit": {"oid": "80218062fa4459dafc978c3266ce7e7b203d1360"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTk1ODQ3OA==", "bodyText": "I don't feel strongly, but I think we have overused plugin as a package suffix. The o.e.x.deprecation is meaningful on its own, and tests living in the same package as the plugin they are testing seems valid.", "url": "https://github.com/elastic/elasticsearch/pull/60298#discussion_r461958478", "createdAt": "2020-07-28T23:52:52Z", "author": {"login": "rjernst"}, "path": "x-pack/plugin/deprecation/src/internalClusterTest/java/org/elasticsearch/http/plugin/TestDeprecationHeaderRestAction.java", "diffHunk": "@@ -1,22 +1,9 @@\n /*\n- * Licensed to Elasticsearch under one or more contributor\n- * license agreements. See the NOTICE file distributed with\n- * this work for additional information regarding copyright\n- * ownership. Elasticsearch licenses this file to you under\n- * the Apache License, Version 2.0 (the \"License\"); you may\n- * not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- *\n- *    http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n+ * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n+ * or more contributor license agreements. Licensed under the Elastic License;\n+ * you may not use this file except in compliance with the Elastic License.\n  */\n-package org.elasticsearch.http;\n+package org.elasticsearch.http.plugin;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc1MDY0Nw=="}, "originalCommit": {"oid": "80218062fa4459dafc978c3266ce7e7b203d1360"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE0MjcwMQ==", "bodyText": "On reflection I agree with you, so I've moved the classes. Having a proliferation of \"plugin\" packages doesn't seem useful.", "url": "https://github.com/elastic/elasticsearch/pull/60298#discussion_r462142701", "createdAt": "2020-07-29T08:51:36Z", "author": {"login": "pugnascotia"}, "path": "x-pack/plugin/deprecation/src/internalClusterTest/java/org/elasticsearch/http/plugin/TestDeprecationHeaderRestAction.java", "diffHunk": "@@ -1,22 +1,9 @@\n /*\n- * Licensed to Elasticsearch under one or more contributor\n- * license agreements. See the NOTICE file distributed with\n- * this work for additional information regarding copyright\n- * ownership. Elasticsearch licenses this file to you under\n- * the Apache License, Version 2.0 (the \"License\"); you may\n- * not use this file except in compliance with the License.\n- * You may obtain a copy of the License at\n- *\n- *    http://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing,\n- * software distributed under the License is distributed on an\n- * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n- * KIND, either express or implied.  See the License for the\n- * specific language governing permissions and limitations\n- * under the License.\n+ * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n+ * or more contributor license agreements. Licensed under the Elastic License;\n+ * you may not use this file except in compliance with the Elastic License.\n  */\n-package org.elasticsearch.http;\n+package org.elasticsearch.http.plugin;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc1MDY0Nw=="}, "originalCommit": {"oid": "80218062fa4459dafc978c3266ce7e7b203d1360"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NDAzMTk4OnYy", "diffSide": "RIGHT", "path": "x-pack/plugin/deprecation/src/internalClusterTest/resources/plugin-security.policy", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMzo1NDozNVrOG4jvUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQyMToxNjowMVrOG6XEeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTk1ODk5Mw==", "bodyText": "Why is this necessary? I don't see it in the qa/smoke-test-http project these tests lived in before?", "url": "https://github.com/elastic/elasticsearch/pull/60298#discussion_r461958993", "createdAt": "2020-07-28T23:54:35Z", "author": {"login": "rjernst"}, "path": "x-pack/plugin/deprecation/src/internalClusterTest/resources/plugin-security.policy", "diffHunk": "@@ -0,0 +1,9 @@\n+/*\n+ * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n+ * or more contributor license agreements. Licensed under the Elastic License;\n+ * you may not use this file except in compliance with the Elastic License.\n+ */\n+grant {\n+   permission java.lang.RuntimePermission \"*\", \"setContextClassLoader\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ed2c01427967c71049b1c35fd70b1893bc7a3ab"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE0MjQ4MA==", "bodyText": "I don't know - this came from a proof-of-concept that @jakelandis did. I removed it and the tests still work.", "url": "https://github.com/elastic/elasticsearch/pull/60298#discussion_r462142480", "createdAt": "2020-07-29T08:51:09Z", "author": {"login": "pugnascotia"}, "path": "x-pack/plugin/deprecation/src/internalClusterTest/resources/plugin-security.policy", "diffHunk": "@@ -0,0 +1,9 @@\n+/*\n+ * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n+ * or more contributor license agreements. Licensed under the Elastic License;\n+ * you may not use this file except in compliance with the Elastic License.\n+ */\n+grant {\n+   permission java.lang.RuntimePermission \"*\", \"setContextClassLoader\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTk1ODk5Mw=="}, "originalCommit": {"oid": "6ed2c01427967c71049b1c35fd70b1893bc7a3ab"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE0NDkxNQ==", "bodyText": "Ah - expect the tests don't appear to shut down correctly without it. Jake, can you comment?", "url": "https://github.com/elastic/elasticsearch/pull/60298#discussion_r462144915", "createdAt": "2020-07-29T08:55:04Z", "author": {"login": "pugnascotia"}, "path": "x-pack/plugin/deprecation/src/internalClusterTest/resources/plugin-security.policy", "diffHunk": "@@ -0,0 +1,9 @@\n+/*\n+ * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n+ * or more contributor license agreements. Licensed under the Elastic License;\n+ * you may not use this file except in compliance with the Elastic License.\n+ */\n+grant {\n+   permission java.lang.RuntimePermission \"*\", \"setContextClassLoader\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTk1ODk5Mw=="}, "originalCommit": {"oid": "6ed2c01427967c71049b1c35fd70b1893bc7a3ab"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzg0ODU2OA==", "bodyText": "sorry, missed this comment.\nThis something during the shutdown of Netty. I can remember the exact details, but without this security manager throws an exception that does not have this permission.", "url": "https://github.com/elastic/elasticsearch/pull/60298#discussion_r463848568", "createdAt": "2020-07-31T21:16:01Z", "author": {"login": "jakelandis"}, "path": "x-pack/plugin/deprecation/src/internalClusterTest/resources/plugin-security.policy", "diffHunk": "@@ -0,0 +1,9 @@\n+/*\n+ * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n+ * or more contributor license agreements. Licensed under the Elastic License;\n+ * you may not use this file except in compliance with the Elastic License.\n+ */\n+grant {\n+   permission java.lang.RuntimePermission \"*\", \"setContextClassLoader\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTk1ODk5Mw=="}, "originalCommit": {"oid": "6ed2c01427967c71049b1c35fd70b1893bc7a3ab"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2768, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}