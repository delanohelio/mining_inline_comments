{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxMDM2OTAw", "number": 52916, "title": "Document known features on rest-api-spec tests", "bodyText": "Features dictate whether a rest-api-spec test runner can execute a\ntest. This PR documents all the know features in the java implementation\nof the runner.\ncc @elastic/es-clients", "createdAt": "2020-02-27T19:43:08Z", "url": "https://github.com/elastic/elasticsearch/pull/52916", "merged": true, "mergeCommit": {"oid": "fbe173723d0ad7ebb920cda855bce3fb758b04a6"}, "closed": true, "closedAt": "2020-03-25T15:27:45Z", "author": {"login": "Mpdreamz"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIgpLcgH2gAyMzgxMDM2OTAwOjNjMjZhN2E0MDE4ZWM4ZTc2MzAzZTNmMmE5ZTkyNjFlYTdhNTRhMzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRJN1VgH2gAyMzgxMDM2OTAwOjk5MTkzMDcyYWEwNTMxODEzNGU2OTU2OTNhYzkwY2M0NGEwMDFlMTI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3c26a7a4018ec8e76303e3f2a9e9261ea7a54a37", "author": {"user": {"login": "Mpdreamz", "name": "Martijn Laarman"}}, "url": "https://github.com/elastic/elasticsearch/commit/3c26a7a4018ec8e76303e3f2a9e9261ea7a54a37", "committedDate": "2020-02-27T19:39:25Z", "message": "Document known features on rest-api-spec tests\n\nFeatures dictate wheter a `rest-api-spec` test runner can execute a\ntest. This PR documents all the know features in the java implementation\nof the runner."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2NzQyNTU0", "url": "https://github.com/elastic/elasticsearch/pull/52916#pullrequestreview-376742554", "createdAt": "2020-03-18T10:38:31Z", "commit": {"oid": "3c26a7a4018ec8e76303e3f2a9e9261ea7a54a37"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxMDozODozMlrOF3_IYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxMDo0MDo0NlrOF3_NlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDI1MDMzNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Allows you use a stashed value in the any key of an object during a `match` operation\n          \n          \n            \n            Allows you to use a stashed value in any key of an object during a `match` assertion", "url": "https://github.com/elastic/elasticsearch/pull/52916#discussion_r394250336", "createdAt": "2020-03-18T10:38:32Z", "author": {"login": "javanna"}, "path": "rest-api-spec/src/main/resources/rest-api-spec/test/README.asciidoc", "diffHunk": "@@ -133,6 +133,109 @@ by default, thus the related skip sections can be removed from the tests.\n The `features` field can either be a string or an array of strings.\n The skip section requires to specify either a `version` or a `features` list.\n \n+=== Available Features\n+\n+=== `xpack`\n+Requires x-pack to be enabled on the `Elasticsearch` instance the rest test is running against\n+\n+=== `no_xpack`\n+Requires the test to run against an oss distribution of `Elasticsearch`\n+\n+=== `catch_unauthorized`\n+\n+Runner supports `catch: unauthorized` on a `do` operator.\n+\n+=== `default_shards`\n+\n+This test can only run if the cluster is running with the distributions default number of shards.\n+\n+The Java test runner introduces randomness and sometimes overrides the default number of shards to `2`.\n+If the default number of shards is changed, test marked with this feature should *not* run\n+\n+=== `headers`\n+\n+The runner is able to set per request headers on the `do` operation\n+\n+=== `node_selector`\n+\n+Indicates the runner can parse `node_selector` under the `do` operator and use its metadata to select the node to\n+perform the `do` operation on.\n+\n+=== `stash_in_key`\n+\n+Allows you use a stashed value in the any key of an object during a `match` operation", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c26a7a4018ec8e76303e3f2a9e9261ea7a54a37"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDI1MDc0NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Used only in the doc snippet tests. Allow you to do easie replacements using a special `$_path` marker.\n          \n          \n            \n            Used only in the doc snippet tests. Allow you to do ease replacements using a special `$_path` marker.", "url": "https://github.com/elastic/elasticsearch/pull/52916#discussion_r394250745", "createdAt": "2020-03-18T10:39:16Z", "author": {"login": "javanna"}, "path": "rest-api-spec/src/main/resources/rest-api-spec/test/README.asciidoc", "diffHunk": "@@ -133,6 +133,109 @@ by default, thus the related skip sections can be removed from the tests.\n The `features` field can either be a string or an array of strings.\n The skip section requires to specify either a `version` or a `features` list.\n \n+=== Available Features\n+\n+=== `xpack`\n+Requires x-pack to be enabled on the `Elasticsearch` instance the rest test is running against\n+\n+=== `no_xpack`\n+Requires the test to run against an oss distribution of `Elasticsearch`\n+\n+=== `catch_unauthorized`\n+\n+Runner supports `catch: unauthorized` on a `do` operator.\n+\n+=== `default_shards`\n+\n+This test can only run if the cluster is running with the distributions default number of shards.\n+\n+The Java test runner introduces randomness and sometimes overrides the default number of shards to `2`.\n+If the default number of shards is changed, test marked with this feature should *not* run\n+\n+=== `headers`\n+\n+The runner is able to set per request headers on the `do` operation\n+\n+=== `node_selector`\n+\n+Indicates the runner can parse `node_selector` under the `do` operator and use its metadata to select the node to\n+perform the `do` operation on.\n+\n+=== `stash_in_key`\n+\n+Allows you use a stashed value in the any key of an object during a `match` operation\n+\n+....\n+- set: {nodes.$master.http.publish_address: host}\n+- match:\n+    $body:\n+      {\n+        \"nodes\": {\n+          $host: {\n+            ... stuff in here ...\n+          }\n+        }\n+     }\n+....\n+\n+=== `stash_in_path`\n+\n+Allows a stashed value to be referenced in path lookups as a single token. E.g:\n+\n+....\n+path.$stash.value\n+....\n+\n+=== `embedded_stash_key`\n+\n+Allows a stashed key to appear anywhere in the path:\n+\n+....\n+field1.e${placeholder}ments.element1\n+....\n+\n+=== `stash_path_replace`\n+Used only in the doc snippet tests. Allow you to do easie replacements using a special `$_path` marker.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c26a7a4018ec8e76303e3f2a9e9261ea7a54a37"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDI1MTY2OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Allows a stashed key to appear anywhere in the path:\n          \n          \n            \n            Allows a stashed key to appear anywhere in the path (note the placeholder needs to be within curly brackets too in this case):", "url": "https://github.com/elastic/elasticsearch/pull/52916#discussion_r394251668", "createdAt": "2020-03-18T10:40:46Z", "author": {"login": "javanna"}, "path": "rest-api-spec/src/main/resources/rest-api-spec/test/README.asciidoc", "diffHunk": "@@ -133,6 +133,109 @@ by default, thus the related skip sections can be removed from the tests.\n The `features` field can either be a string or an array of strings.\n The skip section requires to specify either a `version` or a `features` list.\n \n+=== Available Features\n+\n+=== `xpack`\n+Requires x-pack to be enabled on the `Elasticsearch` instance the rest test is running against\n+\n+=== `no_xpack`\n+Requires the test to run against an oss distribution of `Elasticsearch`\n+\n+=== `catch_unauthorized`\n+\n+Runner supports `catch: unauthorized` on a `do` operator.\n+\n+=== `default_shards`\n+\n+This test can only run if the cluster is running with the distributions default number of shards.\n+\n+The Java test runner introduces randomness and sometimes overrides the default number of shards to `2`.\n+If the default number of shards is changed, test marked with this feature should *not* run\n+\n+=== `headers`\n+\n+The runner is able to set per request headers on the `do` operation\n+\n+=== `node_selector`\n+\n+Indicates the runner can parse `node_selector` under the `do` operator and use its metadata to select the node to\n+perform the `do` operation on.\n+\n+=== `stash_in_key`\n+\n+Allows you use a stashed value in the any key of an object during a `match` operation\n+\n+....\n+- set: {nodes.$master.http.publish_address: host}\n+- match:\n+    $body:\n+      {\n+        \"nodes\": {\n+          $host: {\n+            ... stuff in here ...\n+          }\n+        }\n+     }\n+....\n+\n+=== `stash_in_path`\n+\n+Allows a stashed value to be referenced in path lookups as a single token. E.g:\n+\n+....\n+path.$stash.value\n+....\n+\n+=== `embedded_stash_key`\n+\n+Allows a stashed key to appear anywhere in the path:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c26a7a4018ec8e76303e3f2a9e9261ea7a54a37"}, "originalPosition": 59}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99193072aa05318134e695693ac90cc44a001e12", "author": {"user": {"login": "Mpdreamz", "name": "Martijn Laarman"}}, "url": "https://github.com/elastic/elasticsearch/commit/99193072aa05318134e695693ac90cc44a001e12", "committedDate": "2020-03-25T15:27:03Z", "message": "Apply suggestions from code review\n\nCo-Authored-By: Luca Cavanna <javanna@users.noreply.github.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2052, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}