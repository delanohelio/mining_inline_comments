{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4MzQxOTY5", "number": 51586, "title": "Use exclusions list instead of fake system indices", "bodyText": "This commit switches the strategy for managing dot-prefixed indices that\nshould be hidden indices from using \"fake\" system indices to an explicit\nexclusions list that must be updated when those indices are converted to\nhidden indices.\nAlso cleans up some of the system index descriptions.", "createdAt": "2020-01-29T02:33:33Z", "url": "https://github.com/elastic/elasticsearch/pull/51586", "merged": true, "mergeCommit": {"oid": "588361fe4cd59a1e8bc16095ddac6eca89c6705a"}, "closed": true, "closedAt": "2020-01-29T17:06:28Z", "author": {"login": "gwbrown"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-40CCgH2gAyMzY4MzQxOTY5OjNmYjQyOTk1NjE3NzU3OGQ2OTQ5OTBmYzZlNTcyMTUxNDkwZmUwMmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb_HljtgFqTM1MDE5MDU5NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3fb429956177578d694990fc6e572151490fe02c", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/3fb429956177578d694990fc6e572151490fe02c", "committedDate": "2020-01-28T22:09:45Z", "message": "Use exclusions list instead of fake system indices\n\nThis commit switches the strategy for managing dot-prefixed indices that\nshould be hidden indices from using \"fake\" system indices to an explicit\nexclusions list that must be updated when those indices are converted to\nhidden indices."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "181b5b1ceb3d38a86e430e15bc6d9cf88a9d0a97", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/181b5b1ceb3d38a86e430e15bc6d9cf88a9d0a97", "committedDate": "2020-01-29T02:08:40Z", "message": "Merge branch 'master' into sys-ind/excl-list"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92d71b6074d1d45ae6fcd5180040b4cd3be43855", "author": {"user": {"login": "gwbrown", "name": "Gordon Brown"}}, "url": "https://github.com/elastic/elasticsearch/commit/92d71b6074d1d45ae6fcd5180040b4cd3be43855", "committedDate": "2020-01-29T02:33:13Z", "message": "Add unit test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5ODMxNDkz", "url": "https://github.com/elastic/elasticsearch/pull/51586#pullrequestreview-349831493", "createdAt": "2020-01-29T02:34:03Z", "commit": {"oid": "92d71b6074d1d45ae6fcd5180040b4cd3be43855"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQwMjozNDowNFrOFi6_1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQwMjozNDowNFrOFi6_1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjE2MjUxNg==", "bodyText": "Not sure this is the best place for this, but it's easy to find and easy to move if we come up with a better location.", "url": "https://github.com/elastic/elasticsearch/pull/51586#discussion_r372162516", "createdAt": "2020-01-29T02:34:04Z", "author": {"login": "gwbrown"}, "path": "server/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java", "diffHunk": "@@ -111,6 +114,19 @@\n \n     public static final int MAX_INDEX_NAME_BYTES = 255;\n \n+    /**\n+     * These index patterns will be converted to hidden indices, at which point they should be removed from this list.\n+     */\n+    private static final CharacterRunAutomaton DOT_INDICES_EXCLUSIONS = new CharacterRunAutomaton(Regex.simpleMatchToAutomaton(\n+        \".slm-history-*\",\n+        \".watch-history-*\",\n+        \".ml-anomalies-*\",\n+        \".ml-notifications-*\",\n+        \".ml-annotations*\",\n+        \".data-frame-notifications-*\",\n+        \".transform-notifications-*\"\n+    ));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92d71b6074d1d45ae6fcd5180040b4cd3be43855"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwMTkwNTk0", "url": "https://github.com/elastic/elasticsearch/pull/51586#pullrequestreview-350190594", "createdAt": "2020-01-29T15:22:31Z", "commit": {"oid": "92d71b6074d1d45ae6fcd5180040b4cd3be43855"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3214, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}