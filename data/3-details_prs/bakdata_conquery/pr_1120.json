{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzMDA0Mjky", "number": 1120, "title": "Typescript", "bodyText": "I've realised that before I can start building bigger features, typescript would make that process way safer and faster.\nSo this moves the frontend from flow types to typescript and create-react-app.\n\ud83c\udf89 Why - the advantages\nYou could say this upgrades the project from 2017 to 2020.\nTypescript brings heavy advantages:\n\nWay better maintainability, especially as the codebase grows and grows nowadays. Less worries about breaking code when adding new features.\nGreat tooling helps developing faster and safer, reducing the small bugs we have had to fix later.\nWay easier and faster onboarding experience for anyone who would join this project at a later point in time.\n\nCreate-react-app also brings great advantages:\n\nWe don't have to maintain our own webpack config anymore, including quirks and tweaks to make this work with localization. You can say we just moved one abstraction layer higher.\nWe got rid of ~20 lower-level direct dependencies.\nSince create-react-app is actively maintained, when there are any performance upgrades to the build process in the future, we get them for free.\n\n\ud83d\udd25 Breaking changes\n@thoniTUB @awildturtok\n\nThe compiled files now reside in frontend/build, not in frontend/dist anymore.\nRight now the build contains no separate index.de.html and index.en.html anymore, but only a single index.html, depending on the REACT_APP_LANG env value it was built with.\nThe environment parameters have been renamed (due to create-react-app standards), the following are supported now:\n\n    NODE_ENV: \"development\" | \"production\";\n    REACT_APP_API_URL: string;\n    REACT_APP_DISABLE_LOGIN: boolean;\n    REACT_APP_LANG: \"de\" | \"en\";\n    PORT: number;\n\n\ud83d\udcd6 How to move forward\n\nI've set up yarn typecheck and yarn lint commands now which we can use in the CI, to finally get feedback on the frontend code as well.\nRight now we've got 2460 typecheck errors, which we'll have to resolve step by step. They're not there because the code isn't working, but because it's not sufficiently well typed yet. I've set TSC_COMPILE_ON_ERROR=true so the code still compiles to Javascript, and everything works like expected. The plan is now to reduce these errors down to 0 and then to remove this flag. But the good thing is: This can be done bit by bit now.\n\n\ud83d\udccc TODO before this can be merged\n\n Fix the jest test setup\n Fix the maven build setup according to the breaking changes", "createdAt": "2020-03-24T13:52:56Z", "url": "https://github.com/bakdata/conquery/pull/1120", "merged": true, "mergeCommit": {"oid": "d05605d376a565a583a37de29c9f7302bb9bf3b4"}, "closed": true, "closedAt": "2020-03-27T11:54:06Z", "author": {"login": "Kadrian"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQhi4LAH2gAyMzkzMDA0MjkyOjFjYmU5MmRlN2Q4OWZjMmFjMjM1ODIyNDM2M2I5MjA0ZmQzMDQ2Y2I=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRbULIAH2gAyMzkzMDA0MjkyOjZlYzU1MTNmZGVkZDMyOTgwOGYzNWE0YTc3ODZkYzQ2YWRlOGI3ZDQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1cbe92de7d89fc2ac2358224363b9204fd3046cb", "author": {"user": {"login": "Kadrian", "name": "Kai Rollmann"}}, "url": "https://github.com/bakdata/conquery/commit/1cbe92de7d89fc2ac2358224363b9204fd3046cb", "committedDate": "2020-03-23T17:13:50Z", "message": "Remove everything related to flow typing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e555075541e3379bd32328bac7e69017c4a6d9d8", "author": {"user": {"login": "Kadrian", "name": "Kai Rollmann"}}, "url": "https://github.com/bakdata/conquery/commit/e555075541e3379bd32328bac7e69017c4a6d9d8", "committedDate": "2020-03-24T12:05:41Z", "message": "Install typescript and fix syntax errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8017b8635c0cec4442095d7e2e0ff47c904b7682", "author": {"user": {"login": "Kadrian", "name": "Kai Rollmann"}}, "url": "https://github.com/bakdata/conquery/commit/8017b8635c0cec4442095d7e2e0ff47c904b7682", "committedDate": "2020-03-24T12:46:28Z", "message": "Extract mock-api, remove app folder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04ba16abc25224cf572f10f0f5bef0b1e84a21e2", "author": {"user": {"login": "Kadrian", "name": "Kai Rollmann"}}, "url": "https://github.com/bakdata/conquery/commit/04ba16abc25224cf572f10f0f5bef0b1e84a21e2", "committedDate": "2020-03-24T12:49:01Z", "message": "Prettierify tsconfig.json"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "709c905a8430ad436825b857ae0a6426a4fafdaa", "author": {"user": {"login": "Kadrian", "name": "Kai Rollmann"}}, "url": "https://github.com/bakdata/conquery/commit/709c905a8430ad436825b857ae0a6426a4fafdaa", "committedDate": "2020-03-24T13:16:57Z", "message": "Remove //@flow everywhere, fix linting issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6862ba024bc94a1308116fa98c2437438a792b04", "author": {"user": {"login": "Kadrian", "name": "Kai Rollmann"}}, "url": "https://github.com/bakdata/conquery/commit/6862ba024bc94a1308116fa98c2437438a792b04", "committedDate": "2020-03-24T14:01:42Z", "message": "Remove unnecessary dependencies"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c7001e44dd703f7c0392ae601af0a2582192aff", "author": {"user": {"login": "Kadrian", "name": "Kai Rollmann"}}, "url": "https://github.com/bakdata/conquery/commit/7c7001e44dd703f7c0392ae601af0a2582192aff", "committedDate": "2020-03-24T16:09:45Z", "message": "Make the test setup work again"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "161bd99986b23922531ad31c99a767e6648186f6", "author": {"user": {"login": "Kadrian", "name": "Kai Rollmann"}}, "url": "https://github.com/bakdata/conquery/commit/161bd99986b23922531ad31c99a767e6648186f6", "committedDate": "2020-03-24T16:27:37Z", "message": "Use regular build on ci"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f937e811d61c577895a6cb2fa321982ea7aa7fae", "author": {"user": {"login": "Kadrian", "name": "Kai Rollmann"}}, "url": "https://github.com/bakdata/conquery/commit/f937e811d61c577895a6cb2fa321982ea7aa7fae", "committedDate": "2020-03-24T17:32:05Z", "message": "Dont start test in watch mode"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3c88b065ddded3844d3f9de8ebb760eb2103ec3b", "author": {"user": {"login": "Kadrian", "name": "Kai Rollmann"}}, "url": "https://github.com/bakdata/conquery/commit/3c88b065ddded3844d3f9de8ebb760eb2103ec3b", "committedDate": "2020-03-24T17:24:32Z", "message": "Dont start test in watch mode"}, "afterCommit": {"oid": "f937e811d61c577895a6cb2fa321982ea7aa7fae", "author": {"user": {"login": "Kadrian", "name": "Kai Rollmann"}}, "url": "https://github.com/bakdata/conquery/commit/f937e811d61c577895a6cb2fa321982ea7aa7fae", "committedDate": "2020-03-24T17:32:05Z", "message": "Dont start test in watch mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ae0f56b5067cabf9bcdfd06d9e04f5580ca1276", "author": {"user": {"login": "Kadrian", "name": "Kai Rollmann"}}, "url": "https://github.com/bakdata/conquery/commit/5ae0f56b5067cabf9bcdfd06d9e04f5580ca1276", "committedDate": "2020-03-24T17:53:03Z", "message": "Ignore .factorypath files, they were generated for me while using vscode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "364d25ce7603b6349e3ae30fb4e8568699bc0547", "author": {"user": {"login": "Kadrian", "name": "Kai Rollmann"}}, "url": "https://github.com/bakdata/conquery/commit/364d25ce7603b6349e3ae30fb4e8568699bc0547", "committedDate": "2020-03-24T17:54:11Z", "message": "Try to adjust Conquery setup to fit new frontend paths and build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1360ff57ec16ed32824e7a8f9c8c00860501bf4c", "author": {"user": {"login": "Kadrian", "name": "Kai Rollmann"}}, "url": "https://github.com/bakdata/conquery/commit/1360ff57ec16ed32824e7a8f9c8c00860501bf4c", "committedDate": "2020-03-24T20:17:11Z", "message": "Merge branch 'develop' into feature/typescript"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwOTI4NTgx", "url": "https://github.com/bakdata/conquery/pull/1120#pullrequestreview-380928581", "createdAt": "2020-03-25T08:13:42Z", "commit": {"oid": "364d25ce7603b6349e3ae30fb4e8568699bc0547"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQwODoxMzo0MlrOF7P52g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQwODoxMzo0MlrOF7P52g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzY3MDg3NA==", "bodyText": "In #1120  you mentioned  a change of the compile output directory. The change here does not exactly mirror this. Is that correct anyways?", "url": "https://github.com/bakdata/conquery/pull/1120#discussion_r397670874", "createdAt": "2020-03-25T08:13:42Z", "author": {"login": "thoniTUB"}, "path": "frontend-resources/pom.xml", "diffHunk": "@@ -23,7 +23,7 @@\n \t<build>\n \t\t<resources>\n \t\t\t<resource>\n-\t\t\t\t<directory>${workingDirectory}/app/dist/</directory>\n+\t\t\t\t<directory>${workingDirectory}/build/</directory>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "364d25ce7603b6349e3ae30fb4e8568699bc0547"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1784de8f767b12f552ae49e59e57e8bc670e62d9", "author": {"user": {"login": "Kadrian", "name": "Kai Rollmann"}}, "url": "https://github.com/bakdata/conquery/commit/1784de8f767b12f552ae49e59e57e8bc670e62d9", "committedDate": "2020-03-25T15:27:31Z", "message": "Cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2008b864aeb211589f58da8a2e3e4eb6262873b7", "author": {"user": {"login": "Kadrian", "name": "Kai Rollmann"}}, "url": "https://github.com/bakdata/conquery/commit/2008b864aeb211589f58da8a2e3e4eb6262873b7", "committedDate": "2020-03-26T11:01:29Z", "message": "Merge branch 'develop' into feature/typescript"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ec5513fdedd329808f35a4a7786dc46ade8b7d4", "author": {"user": {"login": "Kadrian", "name": "Kai Rollmann"}}, "url": "https://github.com/bakdata/conquery/commit/6ec5513fdedd329808f35a4a7786dc46ade8b7d4", "committedDate": "2020-03-26T12:32:16Z", "message": "Fix production api url"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4655, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}