{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgyNTg5ODkz", "number": 1063, "title": "adds download button for auth overview", "bodyText": "", "createdAt": "2020-03-02T20:24:48Z", "url": "https://github.com/bakdata/conquery/pull/1063", "merged": true, "mergeCommit": {"oid": "f3f2b43ef1ce6aa458659265725d0a0b9ef4b2dc"}, "closed": true, "closedAt": "2020-03-16T15:37:04Z", "author": {"login": "thoniTUB"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcJzrsWgH2gAyMzgyNTg5ODkzOjBjZjhhMjVmNjAzYjE5YmIwMjQ3NjI0ZmVmNzY1YjZjMjg1NTVhOWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOPlM_AH2gAyMzgyNTg5ODkzOmFmMTcwMjVjM2M1ZjEzMmE0ZTI0ZGI5YWRlZDQ2MzA2NTNlMjg0YjI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0cf8a25f603b19bb0247624fef765b6c28555a9b", "author": {"user": {"login": "thoniTUB", "name": "MT"}}, "url": "https://github.com/bakdata/conquery/commit/0cf8a25f603b19bb0247624fef765b6c28555a9b", "committedDate": "2020-03-02T20:24:17Z", "message": "adds download button for auth overview"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "667dc3e1d3c8c6031ba7ab65d548b04b3c6fb8f2", "author": {"user": {"login": "thoniTUB", "name": "MT"}}, "url": "https://github.com/bakdata/conquery/commit/667dc3e1d3c8c6031ba7ab65d548b04b3c6fb8f2", "committedDate": "2020-03-04T13:38:18Z", "message": "fixes admin endpoint test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1MTIxODky", "url": "https://github.com/bakdata/conquery/pull/1063#pullrequestreview-375121892", "createdAt": "2020-03-16T11:27:40Z", "commit": {"oid": "667dc3e1d3c8c6031ba7ab65d548b04b3c6fb8f2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxMToyNzo0MFrOF2vxRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxMTozNzozNlrOF2wFVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjk1MDA4Nw==", "bodyText": "Der Univocity parser kann ein WriteHeader o\u00e4", "url": "https://github.com/bakdata/conquery/pull/1063#discussion_r392950087", "createdAt": "2020-03-16T11:27:40Z", "author": {"login": "awildturtok"}, "path": "backend/src/main/java/com/bakdata/conquery/resources/admin/rest/AdminProcessor.java", "diffHunk": "@@ -479,29 +479,64 @@ public FEAuthOverview getAuthOverview() {\n \t\treturn FEAuthOverview.builder().overview(overview).build();\n \t}\n \n+\t/**\n+\t * Renders the permission overview for all users in form of a CSV.\n+\t */\n \tpublic String getPermissionOverviewAsCSV() {\n+\t\treturn getPermissionOverviewAsCSV(storage.getAllUsers());\n+\t}\n+\n+\n+\t/**\n+\t * Renders the permission overview for all users in a certain {@link Group} in form of a CSV.\n+\t */\n+\tpublic String getPermissionOverviewAsCSV(GroupId groupId) {\n+\t\tGroup group = Objects.requireNonNull(storage.getGroup(groupId), \"The group was not found\");\n+\t\treturn getPermissionOverviewAsCSV(group.getMembers());\n+\t}\n+\t\n+\t/**\n+\t * Renders the permission overview for certian {@link User} in form of a CSV.\n+\t */\n+\tpublic String getPermissionOverviewAsCSV(Collection<User> users) {\n \t\tStringWriter sWriter = new StringWriter();\n \t\tCsvWriter writer = CsvIo.createWriter(sWriter);\n \t\tList<String> scope = ConqueryConfig.getInstance()\n \t\t\t.getAuthorization()\n \t\t\t.getOverviewScope();\n \t\t// Header\n+\t\twriteAuthOverviewHeader(writer, scope);\n+\t\t// Body\n+\t\tfor (User user : users) {\n+\t\t\twriteAuthOverviewUser(writer, scope, user, storage);\n+\t\t}\n+\t\treturn sWriter.toString();\n+\t}\n+\t\n+\t/**\n+\t * Writes the header of the CSV auth overview to the specified writer.\n+\t */\n+\tprivate static void writeAuthOverviewHeader(CsvWriter writer, List<String> scope) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "667dc3e1d3c8c6031ba7ab65d548b04b3c6fb8f2"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjk1MDg4MQ==", "bodyText": "Ich w\u00fcrde das dann versuchen direkt als OutputStream zu l\u00f6sen, dass gar nicht gebuffert wird.", "url": "https://github.com/bakdata/conquery/pull/1063#discussion_r392950881", "createdAt": "2020-03-16T11:29:16Z", "author": {"login": "awildturtok"}, "path": "backend/src/main/java/com/bakdata/conquery/resources/admin/rest/AdminProcessor.java", "diffHunk": "@@ -479,29 +479,64 @@ public FEAuthOverview getAuthOverview() {\n \t\treturn FEAuthOverview.builder().overview(overview).build();\n \t}\n \n+\t/**\n+\t * Renders the permission overview for all users in form of a CSV.\n+\t */\n \tpublic String getPermissionOverviewAsCSV() {\n+\t\treturn getPermissionOverviewAsCSV(storage.getAllUsers());\n+\t}\n+\n+\n+\t/**\n+\t * Renders the permission overview for all users in a certain {@link Group} in form of a CSV.\n+\t */\n+\tpublic String getPermissionOverviewAsCSV(GroupId groupId) {\n+\t\tGroup group = Objects.requireNonNull(storage.getGroup(groupId), \"The group was not found\");\n+\t\treturn getPermissionOverviewAsCSV(group.getMembers());\n+\t}\n+\t\n+\t/**\n+\t * Renders the permission overview for certian {@link User} in form of a CSV.\n+\t */\n+\tpublic String getPermissionOverviewAsCSV(Collection<User> users) {\n \t\tStringWriter sWriter = new StringWriter();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "667dc3e1d3c8c6031ba7ab65d548b04b3c6fb8f2"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjk1MTAwMw==", "bodyText": "Also dass du als parameter nen Stream bekommst", "url": "https://github.com/bakdata/conquery/pull/1063#discussion_r392951003", "createdAt": "2020-03-16T11:29:32Z", "author": {"login": "awildturtok"}, "path": "backend/src/main/java/com/bakdata/conquery/resources/admin/rest/AdminProcessor.java", "diffHunk": "@@ -479,29 +479,64 @@ public FEAuthOverview getAuthOverview() {\n \t\treturn FEAuthOverview.builder().overview(overview).build();\n \t}\n \n+\t/**\n+\t * Renders the permission overview for all users in form of a CSV.\n+\t */\n \tpublic String getPermissionOverviewAsCSV() {\n+\t\treturn getPermissionOverviewAsCSV(storage.getAllUsers());\n+\t}\n+\n+\n+\t/**\n+\t * Renders the permission overview for all users in a certain {@link Group} in form of a CSV.\n+\t */\n+\tpublic String getPermissionOverviewAsCSV(GroupId groupId) {\n+\t\tGroup group = Objects.requireNonNull(storage.getGroup(groupId), \"The group was not found\");\n+\t\treturn getPermissionOverviewAsCSV(group.getMembers());\n+\t}\n+\t\n+\t/**\n+\t * Renders the permission overview for certian {@link User} in form of a CSV.\n+\t */\n+\tpublic String getPermissionOverviewAsCSV(Collection<User> users) {\n \t\tStringWriter sWriter = new StringWriter();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjk1MDg4MQ=="}, "originalCommit": {"oid": "667dc3e1d3c8c6031ba7ab65d548b04b3c6fb8f2"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjk1NTE4OQ==", "bodyText": "formular drum herum bauen anstatt das ganze selber mit json zu machen", "url": "https://github.com/bakdata/conquery/pull/1063#discussion_r392955189", "createdAt": "2020-03-16T11:37:32Z", "author": {"login": "awildturtok"}, "path": "backend/src/main/resources/com/bakdata/conquery/resources/admin/ui/authOverview.html.ftl", "diffHunk": "@@ -4,6 +4,9 @@\n \t<div class=\"row\">\n \t\t<div class=\"col\">\n \t\t<h2>Auth Overview</h2>\n+        <div>\n+        <button type=\"button\" class=\"btn btn-primary\" id=\"btn-download-csv\">Download as CSV</button>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "667dc3e1d3c8c6031ba7ab65d548b04b3c6fb8f2"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjk1NTIyMQ==", "bodyText": "<form action=\"/action_page.php\" target=\"_blank\">", "url": "https://github.com/bakdata/conquery/pull/1063#discussion_r392955221", "createdAt": "2020-03-16T11:37:36Z", "author": {"login": "awildturtok"}, "path": "backend/src/main/resources/com/bakdata/conquery/resources/admin/ui/authOverview.html.ftl", "diffHunk": "@@ -4,6 +4,9 @@\n \t<div class=\"row\">\n \t\t<div class=\"col\">\n \t\t<h2>Auth Overview</h2>\n+        <div>\n+        <button type=\"button\" class=\"btn btn-primary\" id=\"btn-download-csv\">Download as CSV</button>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjk1NTE4OQ=="}, "originalCommit": {"oid": "667dc3e1d3c8c6031ba7ab65d548b04b3c6fb8f2"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1da7a5abcfaa5644c362034ea6c3d519a6c5e1b", "author": {"user": {"login": "thoniTUB", "name": "MT"}}, "url": "https://github.com/bakdata/conquery/commit/e1da7a5abcfaa5644c362034ea6c3d519a6c5e1b", "committedDate": "2020-03-16T14:49:05Z", "message": "simplifies download button"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ac0b986e9050cd486f3b7c2f9af63cc7f73f132", "author": {"user": {"login": "thoniTUB", "name": "MT"}}, "url": "https://github.com/bakdata/conquery/commit/9ac0b986e9050cd486f3b7c2f9af63cc7f73f132", "committedDate": "2020-03-16T15:09:11Z", "message": "writes header using lib methods"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af17025c3c5f132a4e24db9aded4630653e284b2", "author": {"user": {"login": "thoniTUB", "name": "MT"}}, "url": "https://github.com/bakdata/conquery/commit/af17025c3c5f132a4e24db9aded4630653e284b2", "committedDate": "2020-03-16T15:10:14Z", "message": "Merge branch 'develop' into feature/auth-overview-donload-button"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4636, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}