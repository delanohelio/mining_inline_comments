{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc5NDkyNjk5", "number": 1335, "title": "Feature/fix exists aggregator logic", "bodyText": "", "createdAt": "2020-09-04T09:19:17Z", "url": "https://github.com/bakdata/conquery/pull/1335", "merged": true, "mergeCommit": {"oid": "a30cc365bf7fea895ca92353e6a69863799b8bba"}, "closed": true, "closedAt": "2020-09-07T11:43:48Z", "author": {"login": "awildturtok"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdFhmYngH2gAyNDc5NDkyNjk5OmRiN2U0NWQ4NTk5NTkyMTkwODVjNGZjYjg3ZWIxMmU3OThlMzk1YzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdGhgu2AFqTQ4MzMxODgwOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "db7e45d859959219085c4fcb87eb12e798e395c6", "author": {"user": {"login": "awildturtok", "name": null}}, "url": "https://github.com/bakdata/conquery/commit/db7e45d859959219085c4fcb87eb12e798e395c6", "committedDate": "2020-09-04T09:15:39Z", "message": "fix references of ExistsAggregator to their respective levels (ConceptLevel = created OrNode, ConnectorLevel = created FiltersNode)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6886eab7c38f200fc3f6620344201ffaad7dc3c", "author": {"user": {"login": "bakdata-bot", "name": null}}, "url": "https://github.com/bakdata/conquery/commit/c6886eab7c38f200fc3f6620344201ffaad7dc3c", "committedDate": "2020-09-04T09:21:20Z", "message": "automatic update to docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a1250b34f990995ff7c460c03bcb22c95ebfbfc", "author": {"user": {"login": "awildturtok", "name": null}}, "url": "https://github.com/bakdata/conquery/commit/4a1250b34f990995ff7c460c03bcb22c95ebfbfc", "committedDate": "2020-09-04T13:40:18Z", "message": "fix infinite loop in cloning of FiltersNode/ExistsAggregator by removing them from FiltersNode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6518ddf4ac84ad6568b529e2d6b1ddfed9d7350b", "author": {"user": {"login": "bakdata-bot", "name": null}}, "url": "https://github.com/bakdata/conquery/commit/6518ddf4ac84ad6568b529e2d6b1ddfed9d7350b", "committedDate": "2020-09-04T13:42:32Z", "message": "automatic update to docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa2958be1478a81ce72577bc566e2fa47a52fac6", "author": {"user": {"login": "thoniTUB", "name": "MT"}}, "url": "https://github.com/bakdata/conquery/commit/fa2958be1478a81ce72577bc566e2fa47a52fac6", "committedDate": "2020-09-07T11:27:49Z", "message": "add leaf node instead of filternode if no filters of aggregartors are set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5076afbe43dac9fbe12915a54415fa1722b611dd", "author": {"user": {"login": "thoniTUB", "name": "MT"}}, "url": "https://github.com/bakdata/conquery/commit/5076afbe43dac9fbe12915a54415fa1722b611dd", "committedDate": "2020-09-07T11:28:09Z", "message": "git namespace a to string method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2c3ec178fbc6d79efef633dff9daab9da42247b", "author": {"user": {"login": "bakdata-bot", "name": null}}, "url": "https://github.com/bakdata/conquery/commit/f2c3ec178fbc6d79efef633dff9daab9da42247b", "committedDate": "2020-09-07T11:30:07Z", "message": "automatic update to docs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzMzE4ODA4", "url": "https://github.com/bakdata/conquery/pull/1335#pullrequestreview-483318808", "createdAt": "2020-09-07T07:40:14Z", "commit": {"oid": "6518ddf4ac84ad6568b529e2d6b1ddfed9d7350b"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QwNzo0MDoxNFrOHNznNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QwNzo1MzoyM1rOHN0VJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDIzOTE1OA==", "bodyText": "Ich denke es ist falsch, Dass die Concept-Aggregatoren f\u00fcr jede Table hinzugef\u00fcgt werden. Das sollte nur einmal passieren.", "url": "https://github.com/bakdata/conquery/pull/1335#discussion_r484239158", "createdAt": "2020-09-07T07:40:14Z", "author": {"login": "thoniTUB"}, "path": "backend/src/main/java/com/bakdata/conquery/models/query/concept/specific/CQConcept.java", "diffHunk": "@@ -99,14 +102,27 @@ public QPNode createQueryPlan(QueryPlanContext context, ConceptQueryPlan plan) {\n \t\t\t//add aggregators\n \n \t\t\taggregators.addAll(conceptAggregators);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6518ddf4ac84ad6568b529e2d6b1ddfed9d7350b"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDI0Mjk2OA==", "bodyText": "Bzw. ich verstehe nicht weshalb eine Filternode die Concept-Aggregatoren haben sollte.", "url": "https://github.com/bakdata/conquery/pull/1335#discussion_r484242968", "createdAt": "2020-09-07T07:45:16Z", "author": {"login": "thoniTUB"}, "path": "backend/src/main/java/com/bakdata/conquery/models/query/concept/specific/CQConcept.java", "diffHunk": "@@ -99,14 +102,27 @@ public QPNode createQueryPlan(QueryPlanContext context, ConceptQueryPlan plan) {\n \t\t\t//add aggregators\n \n \t\t\taggregators.addAll(conceptAggregators);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDIzOTE1OA=="}, "originalCommit": {"oid": "6518ddf4ac84ad6568b529e2d6b1ddfed9d7350b"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDI0NDU2OQ==", "bodyText": "Kann es dann nicht vorkommen, dass ein Concept-Aggregator ein Event mehrere Male bekommt, da es durch verschiedene FilterNodes zu dem Aggregator gelangt?", "url": "https://github.com/bakdata/conquery/pull/1335#discussion_r484244569", "createdAt": "2020-09-07T07:46:49Z", "author": {"login": "thoniTUB"}, "path": "backend/src/main/java/com/bakdata/conquery/models/query/concept/specific/CQConcept.java", "diffHunk": "@@ -99,14 +102,27 @@ public QPNode createQueryPlan(QueryPlanContext context, ConceptQueryPlan plan) {\n \t\t\t//add aggregators\n \n \t\t\taggregators.addAll(conceptAggregators);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDIzOTE1OA=="}, "originalCommit": {"oid": "6518ddf4ac84ad6568b529e2d6b1ddfed9d7350b"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDI1MDkxNg==", "bodyText": "Das sollte doch f\u00fcr alle Concept-Aggregatoren gelten, oder nicht?", "url": "https://github.com/bakdata/conquery/pull/1335#discussion_r484250916", "createdAt": "2020-09-07T07:53:23Z", "author": {"login": "thoniTUB"}, "path": "backend/src/main/java/com/bakdata/conquery/models/query/concept/specific/CQConcept.java", "diffHunk": "@@ -124,7 +140,17 @@ public QPNode createQueryPlan(QueryPlanContext context, ConceptQueryPlan plan) {\n \t\t\tthrow new IllegalStateException(String.format(\"Unable to resolve any connector for query `%s`\", label));\n \t\t}\n \n-\t\treturn OrNode.of(tableNodes);\n+\t\tfinal QPNode outNode = OrNode.of(tableNodes);\n+\n+\t\tfor (Iterator<Aggregator<?>> iterator = conceptAggregators.iterator(); iterator.hasNext(); ) {\n+\t\t\tAggregator<?> aggregator = iterator.next();\n+\t\t\tif (aggregator instanceof ExistsAggregator) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6518ddf4ac84ad6568b529e2d6b1ddfed9d7350b"}, "originalPosition": 67}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4571, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}