{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3MzczOTg1", "number": 1004, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQwODoyMToyNVrODbIdlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQwODoyMToyNVrODbIdlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5Nzc2Nzg4OnYy", "diffSide": "RIGHT", "path": "backend/src/main/java/com/bakdata/conquery/models/jobs/ImportJob.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQwODoyMToyNVrOFicQJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQwODoyMToyNVrOFicQJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY1ODc4OQ==", "bodyText": "Hast du hiermit noch etwas vor?", "url": "https://github.com/bakdata/conquery/pull/1004#discussion_r371658789", "createdAt": "2020-01-28T08:21:25Z", "author": {"login": "thoniTUB"}, "path": "backend/src/main/java/com/bakdata/conquery/models/jobs/ImportJob.java", "diffHunk": "@@ -95,13 +95,24 @@ public void execute() throws JSONException {\n \n \t\t\t//partition the new IDs between the slaves\n \t\t\tlog.debug(\"\\tpartition new IDs\");\n-\t\t\tfor (int bucket : primaryMapping.getNewBuckets()) {\n-\t\t\t\tnamespace.addResponsibility(bucket);\n+\n+\t\t\t// Allocate a responsibility for all yet unassigned buckets.\n+\t\t\tsynchronized (namespace) {\n+\t\t\t\tfor (int bucket : primaryMapping.getUsedBuckets()) {\n+\t\t\t\t\tif (namespace.getResponsibleWorkerForBucket(bucket) != null) {\n+\t\t\t\t\t\tcontinue;\n+\t\t\t\t\t}\n+\n+\t\t\t\t\tnamespace.addResponsibility(bucket);\n+\t\t\t\t}\n \t\t\t}\n+\n \t\t\tfor (WorkerInformation w : namespace.getWorkers()) {\n \t\t\t\tw.send(new UpdateWorkerBucket(w));\n \t\t\t}\n-\t\t\tnamespace.updateWorkerMap();\n+\n+\t\t\tsynchronized (namespace) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "136fbe68491f68ddabeca06a4aefd82502fcd3a4"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1488, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}