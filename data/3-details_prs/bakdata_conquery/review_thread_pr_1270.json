{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4NzA5MzU5", "number": 1270, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwNzo0MToyOVrOERVoMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQwNjo1NDo1N1rOERt0xA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NjE1NjAxOnYy", "diffSide": "RIGHT", "path": "backend/src/main/java/com/bakdata/conquery/models/jobs/ImportJob.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwNzo0MToyOVrOG1_dig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwNzo0MToyOVrOG1_dig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI2NzQ2Ng==", "bodyText": "Ich glaube dieser Log braucht jetzt keinen ProgressReport mehr :D", "url": "https://github.com/bakdata/conquery/pull/1270#discussion_r459267466", "createdAt": "2020-07-23T07:41:29Z", "author": {"login": "thoniTUB"}, "path": "backend/src/main/java/com/bakdata/conquery/models/jobs/ImportJob.java", "diffHunk": "@@ -115,14 +111,7 @@ public void execute() throws JSONException {\n \n \t\t\t//update the allIdsTable\n \t\t\tlog.info(\"\\tupdating id information\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "efe35e02dfd2c5bd61999be141c7cbc719997992"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NjE1OTc1OnYy", "diffSide": "RIGHT", "path": "backend/src/main/java/com/bakdata/conquery/models/jobs/ImportJob.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwNzo0Mjo0NVrOG1_fwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwNzo0Mjo0NVrOG1_fwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI2ODAzMw==", "bodyText": "Das w\u00e4re f\u00fcr mich eine Info, aber keine warning", "url": "https://github.com/bakdata/conquery/pull/1270#discussion_r459268033", "createdAt": "2020-07-23T07:42:45Z", "author": {"login": "thoniTUB"}, "path": "backend/src/main/java/com/bakdata/conquery/models/jobs/ImportJob.java", "diffHunk": "@@ -138,38 +127,11 @@ public void execute() throws JSONException {\n \t\t\tthis.progressReporter.report(1);\n \t\t\tint bucketSize = ConqueryConfig.getInstance().getCluster().getEntityBucketSize();\n \n-\t\t\t//import the new ids into the ALL_IDS_TABLE\n \t\t\tif (primaryMapping.getNewIds() != null) {\n-\n-\t\t\t\tBlockFactory factory = allIdsImp.getBlockFactory();\n-\n-\t\t\t\tInt2ObjectMap<ImportBucket> allIdsBuckets = new Int2ObjectOpenHashMap<>(primaryMapping.getUsedBuckets().size());\n-\t\t\t\tInt2ObjectMap<List<byte[]>> allIdsBytes = new Int2ObjectOpenHashMap<>(primaryMapping.getUsedBuckets().size());\n-\n-\t\t\t\ttry (Output buffer = new Output(2048)) {\n-\t\t\t\t\tProgressReporter child = this.progressReporter.subJob(5);\n-\t\t\t\t\tchild.setMax(primaryMapping.getNumberOfNewIds());\n-\n-\t\t\t\t\tfor (int entityId : RangeUtil.iterate(primaryMapping.getNewIds())) {\n-\t\t\t\t\t\tbuffer.reset();\n-\t\t\t\t\t\tBucket bucket = factory.create(allIdsImp, Collections.singletonList(new Object[0]));\n-\t\t\t\t\t\tbucket.writeContent(buffer);\n-\n-\t\t\t\t\t\t//copy content into ImportBucket\n-\t\t\t\t\t\tint bucketNumber = Entity.getBucket(entityId, bucketSize);\n-\n-\t\t\t\t\t\tImportBucket impBucket = allIdsBuckets\n-\t\t\t\t\t\t\t\t\t\t\t\t\t\t .computeIfAbsent(bucketNumber, b -> new ImportBucket(new BucketId(allIdsImp.getId(), b)));\n-\n-\t\t\t\t\t\timpBucket.getIncludedEntities().add(entityId);\n-\n-\t\t\t\t\t\tallIdsBytes.computeIfAbsent(bucketNumber, i -> new ArrayList<>())\n-\t\t\t\t\t\t\t\t   .add(buffer.toBytes());\n-\n-\t\t\t\t\t\tchild.report(1);\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t\tsendBuckets(primaryMapping, allIdsBuckets, allIdsBytes);\n+\t\t\t\tlog.info(\"Primary mapping contained {} new Ids\", primaryMapping.getNumberOfNewIds());\n+\t\t\t}\n+\t\t\telse {\n+\t\t\t\tlog.warn(\"Primary mapping contained no new Ids.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "efe35e02dfd2c5bd61999be141c7cbc719997992"}, "originalPosition": 83}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2NjE2OTY3OnYy", "diffSide": "RIGHT", "path": "backend/src/main/java/com/bakdata/conquery/models/query/filter/AggregationResultFilterNode.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwNzo0NjowMlrOG1_lsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwNzo0NjowMlrOG1_lsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI2OTU1Mw==", "bodyText": "eigentlich w\u00fcrde ich gerne von TableIds auf den Workern weg kommen", "url": "https://github.com/bakdata/conquery/pull/1270#discussion_r459269553", "createdAt": "2020-07-23T07:46:02Z", "author": {"login": "thoniTUB"}, "path": "backend/src/main/java/com/bakdata/conquery/models/query/filter/AggregationResultFilterNode.java", "diffHunk": "@@ -32,7 +30,7 @@ public void collectRequiredTables(Set<TableId> out) {\n \t}\n \n \t@Override\n-\tpublic void nextTable(QueryExecutionContext ctx, Table currentTable) {\n+\tpublic void nextTable(QueryExecutionContext ctx, TableId currentTable) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "efe35e02dfd2c5bd61999be141c7cbc719997992"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3MDEyMDM2OnYy", "diffSide": "RIGHT", "path": "backend/src/main/java/com/bakdata/conquery/util/progressreporter/ProgressReporterImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQwNjo1NDo1N1rOG2k6RQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQwNjo1NDo1N1rOG2k6RQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTg4MTAyOQ==", "bodyText": "Jetzt passt die Fehlermeldung nicht mehr", "url": "https://github.com/bakdata/conquery/pull/1270#discussion_r459881029", "createdAt": "2020-07-24T06:54:57Z", "author": {"login": "thoniTUB"}, "path": "backend/src/main/java/com/bakdata/conquery/util/progressreporter/ProgressReporterImpl.java", "diffHunk": "@@ -84,12 +84,14 @@ public void report(double steps) {\n \n \t@Override\n \tpublic void setMax(double max) {\n-\t\tif(getProgress() != 0) {\n+\t\tif(getProgress() > max) {\n \t\t\tthrow new IllegalStateException(\"No modification of Limits allowed after progress has been made\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1f8854c528c066760878a3a8442fa87518d0a3d"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1293, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}