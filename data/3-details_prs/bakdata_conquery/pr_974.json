{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5MDYzMjM2", "number": 974, "title": "SlaveCommand polls for master instead of trying once then stopping wh\u2026", "bodyText": "\u2026en no connection is available.", "createdAt": "2020-01-03T17:27:16Z", "url": "https://github.com/bakdata/conquery/pull/974", "merged": true, "mergeCommit": {"oid": "4cf942c8c8ae54fb796475e8003d8d19c05acff4"}, "closed": true, "closedAt": "2020-01-08T09:53:00Z", "author": {"login": "awildturtok"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb2wu6-AH2gAyMzU5MDYzMjM2OmVlMmIxOTgxYTE3MDA4N2U4M2YwOGI0YTIyNTI5ODE3OGExYmYxMDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb4RS8dAFqTMzOTcwNzc5Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ee2b1981a170087e83f08b4a225298178a1bf100", "author": {"user": {"login": "awildturtok", "name": null}}, "url": "https://github.com/bakdata/conquery/commit/ee2b1981a170087e83f08b4a225298178a1bf100", "committedDate": "2020-01-03T16:13:32Z", "message": "SlaveCommand polls for master instead of trying once then stopping when no connection is available."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d3b9ba2d4b815a0afd57bfe56e727ed620f4b0f", "author": {"user": {"login": "awildturtok", "name": null}}, "url": "https://github.com/bakdata/conquery/commit/2d3b9ba2d4b815a0afd57bfe56e727ed620f4b0f", "committedDate": "2020-01-07T14:32:42Z", "message": "braces and formatting fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cb6d3c7e759d70649d6e606a3c88d4c77ae42f5", "author": {"user": {"login": "awildturtok", "name": null}}, "url": "https://github.com/bakdata/conquery/commit/2cb6d3c7e759d70649d6e606a3c88d4c77ae42f5", "committedDate": "2020-01-07T16:05:07Z", "message": "Update SlaveCommand.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5f798025184bd99fd00f99cac4b4acd2f829075", "author": {"user": {"login": "awildturtok", "name": null}}, "url": "https://github.com/bakdata/conquery/commit/d5f798025184bd99fd00f99cac4b4acd2f829075", "committedDate": "2020-01-08T08:43:35Z", "message": "Merge branch 'develop' into feature/slaves-poll-for-connection"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5NzA3Nzky", "url": "https://github.com/bakdata/conquery/pull/974#pullrequestreview-339707792", "createdAt": "2020-01-08T08:31:59Z", "commit": {"oid": "2cb6d3c7e759d70649d6e606a3c88d4c77ae42f5"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwODozMjowMFrOFbPouQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwODozMjowMFrOFbPouQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDExMjA1Nw==", "bodyText": "Bitte noch ein Log schreiben, dass die verbindung erfolgreich war.", "url": "https://github.com/bakdata/conquery/pull/974#discussion_r364112057", "createdAt": "2020-01-08T08:32:00Z", "author": {"login": "thoniTUB"}, "path": "backend/src/main/java/com/bakdata/conquery/commands/SlaveCommand.java", "diffHunk": "@@ -188,11 +188,22 @@ public void start() throws Exception {\n \t\twhile(true) {\n \t\t\ttry {\n \t\t\t\tlog.info(\"Trying to connect to {}\", address);\n+\n+\t\t\t\t// Try opening a connection (Note: This fails immediately instead of waiting a minute to try and connect)\n \t\t\t\tConnectFuture future = connector.connect(address);\n-\t\t\t\tfuture.awaitUninterruptibly(1, TimeUnit.MINUTES);\n \n-\t\t\t\tbreak;\n-\t\t\t} catch(RuntimeIoException e) {\n+\t\t\t\tfuture.awaitUninterruptibly();\n+\n+\t\t\t\tif(future.isConnected()){\n+\t\t\t\t\tbreak;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2cb6d3c7e759d70649d6e606a3c88d4c77ae42f5"}, "originalPosition": 84}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4678, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}