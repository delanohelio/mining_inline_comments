{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4Mjg5ODU1", "number": 1010, "title": "Feature/login page", "bodyText": "This adds a login page that posts the following to POST /api/login\n{\n  user: string,\n  password: string\n}\n\nexpects to receive\n{\n  access_token: string \n}\n\nand a 4xx status in case of an error.\nIf there's an access token coming back, the user is redirected to the main page, the token is stored in the localStorage and reused.\nThe ?access_token in the url overrides this token.\nThe environment parameter:\nDISABLE_LOGIN=1 yarn start \n\ndisables the login page, in case we want to test an instance without url parameter and without login page.\nLooks like:", "createdAt": "2020-01-28T23:03:35Z", "url": "https://github.com/bakdata/conquery/pull/1010", "merged": true, "mergeCommit": {"oid": "5069bf6e15c95229661b99828bbab56c7be45647"}, "closed": true, "closedAt": "2020-02-17T12:42:26Z", "author": {"login": "Kadrian"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-5JiBAH2gAyMzY4Mjg5ODU1Ojg3Nzk4MTJiNDM0ZTMxODY4OTI0MzJlZGEyYjZlZjZmNjNkZTlmYjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFMbMYAH2gAyMzY4Mjg5ODU1OmEwZmNiYzcxOGY2Y2NlYTAyYmMxODg1OTUzNDYzOTZjZmY1YTRiZWE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8779812b434e3186892432eda2b6ef6f63de9fb3", "author": {"user": {"login": "Kadrian", "name": "Kai Rollmann"}}, "url": "https://github.com/bakdata/conquery/commit/8779812b434e3186892432eda2b6ef6f63de9fb3", "committedDate": "2020-01-28T22:33:14Z", "message": "Build a first login page"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c8a360899bfa0f023e8680cc1826581b5ab8a7e", "author": {"user": {"login": "Kadrian", "name": "Kai Rollmann"}}, "url": "https://github.com/bakdata/conquery/commit/4c8a360899bfa0f023e8680cc1826581b5ab8a7e", "committedDate": "2020-01-28T22:58:01Z", "message": "Add mock api, test error message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a25daefd63e7eff0543743ba9ed44037301fb165", "author": {"user": {"login": "thoniTUB", "name": "MT"}}, "url": "https://github.com/bakdata/conquery/commit/a25daefd63e7eff0543743ba9ed44037301fb165", "committedDate": "2020-01-30T09:43:56Z", "message": "Merge branch 'develop' into feature/login-page"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwNzUwNjI0", "url": "https://github.com/bakdata/conquery/pull/1010#pullrequestreview-350750624", "createdAt": "2020-01-30T11:21:32Z", "commit": {"oid": "a25daefd63e7eff0543743ba9ed44037301fb165"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "faf8f5000697e86fac2057d547486dd45795e269", "author": {"user": {"login": "Kadrian", "name": "Kai Rollmann"}}, "url": "https://github.com/bakdata/conquery/commit/faf8f5000697e86fac2057d547486dd45795e269", "committedDate": "2020-01-30T21:19:08Z", "message": "Use /auth instead of /api/login"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d1f5df0981f592e570fb1df08f48a5739f20f8a", "author": {"user": {"login": "thoniTUB", "name": "MT"}}, "url": "https://github.com/bakdata/conquery/commit/8d1f5df0981f592e570fb1df08f48a5739f20f8a", "committedDate": "2020-02-04T13:19:55Z", "message": "Merge branch 'develop' into feature/login-page"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f92ee7a17ff565190145304ac8bfa81ca2c6760", "author": {"user": {"login": "Kadrian", "name": "Kai Rollmann"}}, "url": "https://github.com/bakdata/conquery/commit/6f92ee7a17ff565190145304ac8bfa81ca2c6760", "committedDate": "2020-02-10T22:11:19Z", "message": "Use API URL"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0MzI1NDgx", "url": "https://github.com/bakdata/conquery/pull/1010#pullrequestreview-354325481", "createdAt": "2020-02-06T10:00:16Z", "commit": {"oid": "8d1f5df0981f592e570fb1df08f48a5739f20f8a"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQxMDowMDoxNlrOFmVVJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxMjoyNDoyN1rOFoHBGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTczOTY4NA==", "bodyText": "@Kadrian this rootes the POST to the host:port, where the frontend is hosted.\nIn development this might not be the same as the backend.", "url": "https://github.com/bakdata/conquery/pull/1010#discussion_r375739684", "createdAt": "2020-02-06T10:00:16Z", "author": {"login": "thoniTUB"}, "path": "frontend/lib/js/api/api.js", "diffHunk": "@@ -211,3 +212,16 @@ export function postFilterValuesResolve(\n export function getMe(): Promise<GetMeResponseT> {\n   return fetchJson(apiUrl() + `/me`);\n }\n+\n+export function postLogin(\n+  user: string,\n+  password: string\n+): Promise<PostLoginResponseT> {\n+  return fetchJsonUnauthorized(\"/auth\", {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d1f5df0981f592e570fb1df08f48a5739f20f8a"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzYwMjMyOQ==", "bodyText": "Is it now /api/auth ? We want that everything under api is protected", "url": "https://github.com/bakdata/conquery/pull/1010#discussion_r377602329", "createdAt": "2020-02-11T12:24:27Z", "author": {"login": "thoniTUB"}, "path": "frontend/lib/js/api/api.js", "diffHunk": "@@ -211,3 +212,16 @@ export function postFilterValuesResolve(\n export function getMe(): Promise<GetMeResponseT> {\n   return fetchJson(apiUrl() + `/me`);\n }\n+\n+export function postLogin(\n+  user: string,\n+  password: string\n+): Promise<PostLoginResponseT> {\n+  return fetchJsonUnauthorized(apiUrl() + \"/auth\", {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f92ee7a17ff565190145304ac8bfa81ca2c6760"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ce46d91e0cf5e40523eda7bf3d2775b2835b1ea", "author": {"user": {"login": "Kadrian", "name": "Kai Rollmann"}}, "url": "https://github.com/bakdata/conquery/commit/7ce46d91e0cf5e40523eda7bf3d2775b2835b1ea", "committedDate": "2020-02-13T09:00:04Z", "message": "Differentiate between protected and non-protected api url"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26cb37b548a4030da8fb23fdb7d0bac113a09865", "author": {"user": {"login": "Kadrian", "name": "Kai Rollmann"}}, "url": "https://github.com/bakdata/conquery/commit/26cb37b548a4030da8fb23fdb7d0bac113a09865", "committedDate": "2020-02-15T11:56:34Z", "message": "Prevent calling startup network calls before logged in"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e07a196eb6b8a588bc6ea17428c00110056ce0a", "author": {"user": {"login": "Kadrian", "name": "Kai Rollmann"}}, "url": "https://github.com/bakdata/conquery/commit/3e07a196eb6b8a588bc6ea17428c00110056ce0a", "committedDate": "2020-02-15T12:02:18Z", "message": "Merge branch 'develop' into feature/login-page"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca18d5f260a654533a1d15e02e23c48c8630be88", "author": {"user": {"login": "thoniTUB", "name": "MT"}}, "url": "https://github.com/bakdata/conquery/commit/ca18d5f260a654533a1d15e02e23c48c8630be88", "committedDate": "2020-02-17T11:00:31Z", "message": "small change to trigger CI"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95e488d834a17eaf2251afdd5bde88dbd6e9b159", "author": {"user": {"login": "thoniTUB", "name": "MT"}}, "url": "https://github.com/bakdata/conquery/commit/95e488d834a17eaf2251afdd5bde88dbd6e9b159", "committedDate": "2020-02-17T11:05:54Z", "message": "Merge branch 'develop' into feature/login-page"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8921c733ba38b678b46fe67b064c2204e442fce2", "author": {"user": {"login": "Kadrian", "name": "Kai Rollmann"}}, "url": "https://github.com/bakdata/conquery/commit/8921c733ba38b678b46fe67b064c2204e442fce2", "committedDate": "2020-02-17T12:22:16Z", "message": "Fix outdated test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0fcbc718f6ccea02bc188595346396cff5a4bea", "author": {"user": {"login": "thoniTUB", "name": "MT"}}, "url": "https://github.com/bakdata/conquery/commit/a0fcbc718f6ccea02bc188595346396cff5a4bea", "committedDate": "2020-02-17T12:24:16Z", "message": "Merge branch 'develop' into feature/login-page"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4696, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}