{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc5NDkyNjk5", "number": 1335, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QwNzo0MDoxNFrOEg0Omw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QwNzo1MzoyM1rOEg0tAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyODQ1NTk1OnYy", "diffSide": "RIGHT", "path": "backend/src/main/java/com/bakdata/conquery/models/query/concept/specific/CQConcept.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QwNzo0MDoxNFrOHNznNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QwNzo0Njo0OVrOHNz8WQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDIzOTE1OA==", "bodyText": "Ich denke es ist falsch, Dass die Concept-Aggregatoren f\u00fcr jede Table hinzugef\u00fcgt werden. Das sollte nur einmal passieren.", "url": "https://github.com/bakdata/conquery/pull/1335#discussion_r484239158", "createdAt": "2020-09-07T07:40:14Z", "author": {"login": "thoniTUB"}, "path": "backend/src/main/java/com/bakdata/conquery/models/query/concept/specific/CQConcept.java", "diffHunk": "@@ -99,14 +102,27 @@ public QPNode createQueryPlan(QueryPlanContext context, ConceptQueryPlan plan) {\n \t\t\t//add aggregators\n \n \t\t\taggregators.addAll(conceptAggregators);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6518ddf4ac84ad6568b529e2d6b1ddfed9d7350b"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDI0Mjk2OA==", "bodyText": "Bzw. ich verstehe nicht weshalb eine Filternode die Concept-Aggregatoren haben sollte.", "url": "https://github.com/bakdata/conquery/pull/1335#discussion_r484242968", "createdAt": "2020-09-07T07:45:16Z", "author": {"login": "thoniTUB"}, "path": "backend/src/main/java/com/bakdata/conquery/models/query/concept/specific/CQConcept.java", "diffHunk": "@@ -99,14 +102,27 @@ public QPNode createQueryPlan(QueryPlanContext context, ConceptQueryPlan plan) {\n \t\t\t//add aggregators\n \n \t\t\taggregators.addAll(conceptAggregators);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDIzOTE1OA=="}, "originalCommit": {"oid": "6518ddf4ac84ad6568b529e2d6b1ddfed9d7350b"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDI0NDU2OQ==", "bodyText": "Kann es dann nicht vorkommen, dass ein Concept-Aggregator ein Event mehrere Male bekommt, da es durch verschiedene FilterNodes zu dem Aggregator gelangt?", "url": "https://github.com/bakdata/conquery/pull/1335#discussion_r484244569", "createdAt": "2020-09-07T07:46:49Z", "author": {"login": "thoniTUB"}, "path": "backend/src/main/java/com/bakdata/conquery/models/query/concept/specific/CQConcept.java", "diffHunk": "@@ -99,14 +102,27 @@ public QPNode createQueryPlan(QueryPlanContext context, ConceptQueryPlan plan) {\n \t\t\t//add aggregators\n \n \t\t\taggregators.addAll(conceptAggregators);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDIzOTE1OA=="}, "originalCommit": {"oid": "6518ddf4ac84ad6568b529e2d6b1ddfed9d7350b"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyODUzMzc3OnYy", "diffSide": "RIGHT", "path": "backend/src/main/java/com/bakdata/conquery/models/query/concept/specific/CQConcept.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QwNzo1MzoyM1rOHN0VJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QwNzo1MzoyM1rOHN0VJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDI1MDkxNg==", "bodyText": "Das sollte doch f\u00fcr alle Concept-Aggregatoren gelten, oder nicht?", "url": "https://github.com/bakdata/conquery/pull/1335#discussion_r484250916", "createdAt": "2020-09-07T07:53:23Z", "author": {"login": "thoniTUB"}, "path": "backend/src/main/java/com/bakdata/conquery/models/query/concept/specific/CQConcept.java", "diffHunk": "@@ -124,7 +140,17 @@ public QPNode createQueryPlan(QueryPlanContext context, ConceptQueryPlan plan) {\n \t\t\tthrow new IllegalStateException(String.format(\"Unable to resolve any connector for query `%s`\", label));\n \t\t}\n \n-\t\treturn OrNode.of(tableNodes);\n+\t\tfinal QPNode outNode = OrNode.of(tableNodes);\n+\n+\t\tfor (Iterator<Aggregator<?>> iterator = conceptAggregators.iterator(); iterator.hasNext(); ) {\n+\t\t\tAggregator<?> aggregator = iterator.next();\n+\t\t\tif (aggregator instanceof ExistsAggregator) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6518ddf4ac84ad6568b529e2d6b1ddfed9d7350b"}, "originalPosition": 67}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1372, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}