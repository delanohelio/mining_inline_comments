{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2MzAyODQ4", "number": 7064, "title": "7054 payara bom", "bodyText": "What this PR does / why we need it:\nA lot of libraries used by us (and again by those libs) are provided by the Payara application server.\nThere is no need to bundle those in our WAR (making it smaller) and it's always a good idea to keep things inline with each other, to avoid conflicts between libraries. The newly released Payara BOM is making this significantly easier for basic libraries as Jackson, Jakarta, etc.\nAlso, our application server maintains a few patched versions of libraries. A good example is the JSF patch recently removed (see #7036), now being bundled with the upstream installation. This change to pom.xml includes the repository of these patched versions, so we use them locally and during tests, too.\nWhich issue(s) this PR closes:\nCloses #7054\nSpecial notes for your reviewer:\nThe Jackson BOM has been removed due to the fact that the Payara BOM already provides that one.\nSuggestions on how to test this:\nNada. Usual things. I didn't move much (the deps cleanup is still to come), so this should not have a bigger impact.\nDoes this PR introduce a user interface change? If mockups are available, please link/include them here:\nNada.\nIs there a release notes update needed for this change?:\nNada.\nAdditional documentation:\nhttps://blog.payara.fish/align-dependencies-with-payara-bom", "createdAt": "2020-07-08T15:01:30Z", "url": "https://github.com/IQSS/dataverse/pull/7064", "merged": true, "mergeCommit": {"oid": "4f8038aaf2e3985a1f3bd3778d16f2d065dff8ce"}, "closed": true, "closedAt": "2020-07-13T14:55:19Z", "author": {"login": "poikilotherm"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcy3bF8AH2gAyNDQ2MzAyODQ4OjMzNDg3MjNiNTc5NDE0ODM0NTAwZjFkYTg2NjYyZDhmMjdmNjUzZjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABczTKwhAFqTQ0NTg1ODA0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3348723b579414834500f1da86662d8f27f653f1", "author": {"user": {"login": "poikilotherm", "name": "Oliver Bertuch"}}, "url": "https://github.com/IQSS/dataverse/commit/3348723b579414834500f1da86662d8f27f653f1", "committedDate": "2020-07-08T09:56:40Z", "message": "Make pom.xml use Payara BOM to keep dependencies inline with provided app server versions (no need to package those). #7054"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b584a06444774f5dd5578948ca07f9e4488f529b", "author": {"user": {"login": "poikilotherm", "name": "Oliver Bertuch"}}, "url": "https://github.com/IQSS/dataverse/commit/b584a06444774f5dd5578948ca07f9e4488f529b", "committedDate": "2020-07-08T12:58:49Z", "message": "Move Payara patches repo to top of the repo list, being used first. #7054"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1Nzg0MDY4", "url": "https://github.com/IQSS/dataverse/pull/7064#pullrequestreview-445784068", "createdAt": "2020-07-09T16:33:35Z", "commit": {"oid": "b584a06444774f5dd5578948ca07f9e4488f529b"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxNjozMzozNVrOGvY-yA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxNjo1NDo0M1rOGvZwDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM0NTU0NA==", "bodyText": "Does this mean that this new \"payara.version\" property needs to be bumped every time we want to move to a new version of Payara?", "url": "https://github.com/IQSS/dataverse/pull/7064#discussion_r452345544", "createdAt": "2020-07-09T16:33:35Z", "author": {"login": "pdurbin"}, "path": "pom.xml", "diffHunk": "@@ -26,11 +26,8 @@\n         <skipUnitTests>false</skipUnitTests>\n     \n         <jakartaee-api.version>8.0.0</jakartaee-api.version>\n-        <!-- Make this correspond to the version used in Payara: 5.201 uses (patched) 2.3.14 -->\n-        <mojarra.version>2.3.14</mojarra.version>\n+        <payara.version>5.2020.2</payara.version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b584a06444774f5dd5578948ca07f9e4488f529b"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM1NTY5MA==", "bodyText": "Does this further tie us to Payara? Will it be harder to move to Liberty or Wildfly?", "url": "https://github.com/IQSS/dataverse/pull/7064#discussion_r452355690", "createdAt": "2020-07-09T16:50:24Z", "author": {"login": "pdurbin"}, "path": "pom.xml", "diffHunk": "@@ -90,24 +87,35 @@\n             <name>Local repository for hosting jars not available from network repositories.</name>\n             <url>file://${project.basedir}/local_lib</url>\n         </repository>\n+        <repository>\n+            <id>payara-patched-externals</id>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3348723b579414834500f1da86662d8f27f653f1"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM1NzYzNQ==", "bodyText": "Does this further tie us to Payara? Would it be harder to switch to Liberty or Wildfly, for example?", "url": "https://github.com/IQSS/dataverse/pull/7064#discussion_r452357635", "createdAt": "2020-07-09T16:53:49Z", "author": {"login": "pdurbin"}, "path": "pom.xml", "diffHunk": "@@ -63,6 +60,17 @@\n     <!--Maven checks for dependendies from these repos in the order shown in the pom.xml\n         This isn't well documented and seems to change between maven versions -MAD 4.9.4 -->\n     <repositories>\n+        <repository>\n+            <id>payara-patched-externals</id>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b584a06444774f5dd5578948ca07f9e4488f529b"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM1ODE1Ng==", "bodyText": "Does the version of Mojarra no longer matter?", "url": "https://github.com/IQSS/dataverse/pull/7064#discussion_r452358156", "createdAt": "2020-07-09T16:54:43Z", "author": {"login": "pdurbin"}, "path": "pom.xml", "diffHunk": "@@ -26,11 +26,8 @@\n         <skipUnitTests>false</skipUnitTests>\n     \n         <jakartaee-api.version>8.0.0</jakartaee-api.version>\n-        <!-- Make this correspond to the version used in Payara: 5.201 uses (patched) 2.3.14 -->\n-        <mojarra.version>2.3.14</mojarra.version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b584a06444774f5dd5578948ca07f9e4488f529b"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1ODU4MDQw", "url": "https://github.com/IQSS/dataverse/pull/7064#pullrequestreview-445858040", "createdAt": "2020-07-09T18:16:10Z", "commit": {"oid": "b584a06444774f5dd5578948ca07f9e4488f529b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 885, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}