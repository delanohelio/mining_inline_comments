{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4NzI1Mjg2", "number": 6856, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxOToyNzozN1rOD17DMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxNTozNjoxNFrOD2wCig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3ODY4NTkzOnYy", "diffSide": "RIGHT", "path": "src/main/webapp/dataverse_header.xhtml", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxOToyNzozN1rOGLmFtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxOTozOToyM1rOGLmeJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgxMTU3NQ==", "bodyText": "Is this code just for debugging?", "url": "https://github.com/IQSS/dataverse/pull/6856#discussion_r414811575", "createdAt": "2020-04-24T19:27:37Z", "author": {"login": "pdurbin"}, "path": "src/main/webapp/dataverse_header.xhtml", "diffHunk": "@@ -189,6 +211,11 @@\n                 </div>\n             </div>\n         </noscript>\n+        <script>\n+function a () {\n+var contact = prompt(\"Add the contact.\");\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e8d2bf2edb875d1e695f08c230c421f7518cde9d"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgxMzY5Nw==", "bodyText": "Yes. I have removed it", "url": "https://github.com/IQSS/dataverse/pull/6856#discussion_r414813697", "createdAt": "2020-04-24T19:31:49Z", "author": {"login": "sekmiller"}, "path": "src/main/webapp/dataverse_header.xhtml", "diffHunk": "@@ -189,6 +211,11 @@\n                 </div>\n             </div>\n         </noscript>\n+        <script>\n+function a () {\n+var contact = prompt(\"Add the contact.\");\n+}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgxMTU3NQ=="}, "originalCommit": {"oid": "e8d2bf2edb875d1e695f08c230c421f7518cde9d"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgxNzgzMQ==", "bodyText": "Whoops. Sorry. I didn't mean to include that in my review. I saw you had already deleted it. I forgot to go back and delete the comment.", "url": "https://github.com/IQSS/dataverse/pull/6856#discussion_r414817831", "createdAt": "2020-04-24T19:39:23Z", "author": {"login": "pdurbin"}, "path": "src/main/webapp/dataverse_header.xhtml", "diffHunk": "@@ -189,6 +211,11 @@\n                 </div>\n             </div>\n         </noscript>\n+        <script>\n+function a () {\n+var contact = prompt(\"Add the contact.\");\n+}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDgxMTU3NQ=="}, "originalCommit": {"oid": "e8d2bf2edb875d1e695f08c230c421f7518cde9d"}, "originalPosition": 72}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4NjYwMjU0OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/dataverse_header.xhtml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxMzoxNzozNVrOGMiqcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxNToxMDowM1rOGMoUYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTgwNDAxOQ==", "bodyText": "The render logic in these duplicate ui:fragment components should consolidated and moved directly into the li components like other navbar features on this page <li jsf:rendered=\"#{...}\"> (line 88).", "url": "https://github.com/IQSS/dataverse/pull/6856#discussion_r415804019", "createdAt": "2020-04-27T13:17:35Z", "author": {"login": "mheppler"}, "path": "src/main/webapp/dataverse_header.xhtml", "diffHunk": "@@ -31,21 +39,35 @@\n                 </div>\n                 <div class=\"collapse navbar-collapse\" id=\"topNavBar\">\n                     <ul class=\"nav navbar-nav navbar-right\">\n-                        <li class=\"dropdown\">\n-                            <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">#{bundle['dataverse.results.btn.addData']} <b class=\"caret\"></b></a>\n-                            <ul class=\"dropdown-menu\">\n-                                <li>\n-                                    <h:outputLink value=\"/dataverse.xhtml?ownerId=#{dataverseServiceBean.findRootDataverse().id}\">\n-                                        <h:outputText value=\"#{bundle['dataverse.results.btn.addData.newDataverse']}\"/>\n-                                    </h:outputLink>\n-                                </li>\n-                                <li>\n-                                    <h:outputLink value=\"/dataset.xhtml?ownerId=#{dataverseServiceBean.findRootDataverse().id}\">\n-                                        <h:outputText value=\"#{bundle['dataverse.results.btn.addData.newDataset']}\"/>\n-                                    </h:outputLink>\n+                        <ui:fragment rendered=\"#{showAddDataGroup}\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a460b80a319b7c21ced6ca56840f89ed978d5db6"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTg5NjY3NA==", "bodyText": "as requested I removed the ui:fragments and moved the render logic to jsf:rendered.", "url": "https://github.com/IQSS/dataverse/pull/6856#discussion_r415896674", "createdAt": "2020-04-27T15:10:03Z", "author": {"login": "sekmiller"}, "path": "src/main/webapp/dataverse_header.xhtml", "diffHunk": "@@ -31,21 +39,35 @@\n                 </div>\n                 <div class=\"collapse navbar-collapse\" id=\"topNavBar\">\n                     <ul class=\"nav navbar-nav navbar-right\">\n-                        <li class=\"dropdown\">\n-                            <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">#{bundle['dataverse.results.btn.addData']} <b class=\"caret\"></b></a>\n-                            <ul class=\"dropdown-menu\">\n-                                <li>\n-                                    <h:outputLink value=\"/dataverse.xhtml?ownerId=#{dataverseServiceBean.findRootDataverse().id}\">\n-                                        <h:outputText value=\"#{bundle['dataverse.results.btn.addData.newDataverse']}\"/>\n-                                    </h:outputLink>\n-                                </li>\n-                                <li>\n-                                    <h:outputLink value=\"/dataset.xhtml?ownerId=#{dataverseServiceBean.findRootDataverse().id}\">\n-                                        <h:outputText value=\"#{bundle['dataverse.results.btn.addData.newDataset']}\"/>\n-                                    </h:outputLink>\n+                        <ui:fragment rendered=\"#{showAddDataGroup}\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTgwNDAxOQ=="}, "originalCommit": {"oid": "a460b80a319b7c21ced6ca56840f89ed978d5db6"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4NjYxMDQ1OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/dataverse_header.xhtml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxMzoxODo1OVrOGMiuzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxMzoxODo1OVrOGMiuzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTgwNTEzMw==", "bodyText": "Same render logic moved into the li here as suggested above.", "url": "https://github.com/IQSS/dataverse/pull/6856#discussion_r415805133", "createdAt": "2020-04-27T13:18:59Z", "author": {"login": "mheppler"}, "path": "src/main/webapp/dataverse_header.xhtml", "diffHunk": "@@ -31,21 +39,35 @@\n                 </div>\n                 <div class=\"collapse navbar-collapse\" id=\"topNavBar\">\n                     <ul class=\"nav navbar-nav navbar-right\">\n-                        <li class=\"dropdown\">\n-                            <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">#{bundle['dataverse.results.btn.addData']} <b class=\"caret\"></b></a>\n-                            <ul class=\"dropdown-menu\">\n-                                <li>\n-                                    <h:outputLink value=\"/dataverse.xhtml?ownerId=#{dataverseServiceBean.findRootDataverse().id}\">\n-                                        <h:outputText value=\"#{bundle['dataverse.results.btn.addData.newDataverse']}\"/>\n-                                    </h:outputLink>\n-                                </li>\n-                                <li>\n-                                    <h:outputLink value=\"/dataset.xhtml?ownerId=#{dataverseServiceBean.findRootDataverse().id}\">\n-                                        <h:outputText value=\"#{bundle['dataverse.results.btn.addData.newDataset']}\"/>\n-                                    </h:outputLink>\n+                        <ui:fragment rendered=\"#{showAddDataGroup}\">\n+                        <ui:fragment rendered=\"#{!authUserSession}\">\n+                            <li>\n+                                <a href=\"#\" onClick=\"PF('addData_popup').show()\">#{bundle['dataverse.results.btn.addData']} </a>\n+                            </li> \n+                        </ui:fragment>\n+\n+                            <ui:fragment rendered=\"#{authUserSession}\">\n+                                <li class=\"dropdown\">\n+                                    <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">#{bundle['dataverse.results.btn.addData']} <b class=\"caret\"></b></a>\n+                                    <ul class=\"dropdown-menu\">\n+                                        <ui:fragment rendered=\"#{showAddDataverseLink}\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a460b80a319b7c21ced6ca56840f89ed978d5db6"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4NjYzNDIxOnYy", "diffSide": "RIGHT", "path": "src/main/webapp/dataverse_header.xhtml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxMzoyMzozN1rOGMi8ZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxNTowNzoxN1rOGMoLUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTgwODYxMg==", "bodyText": "This addData_popup reference that was copied over from search-include-fragment will now look for that dialog on every page, but the dataverse pg is the only page that will have the dialog included on it.", "url": "https://github.com/IQSS/dataverse/pull/6856#discussion_r415808612", "createdAt": "2020-04-27T13:23:37Z", "author": {"login": "mheppler"}, "path": "src/main/webapp/dataverse_header.xhtml", "diffHunk": "@@ -31,21 +39,35 @@\n                 </div>\n                 <div class=\"collapse navbar-collapse\" id=\"topNavBar\">\n                     <ul class=\"nav navbar-nav navbar-right\">\n-                        <li class=\"dropdown\">\n-                            <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">#{bundle['dataverse.results.btn.addData']} <b class=\"caret\"></b></a>\n-                            <ul class=\"dropdown-menu\">\n-                                <li>\n-                                    <h:outputLink value=\"/dataverse.xhtml?ownerId=#{dataverseServiceBean.findRootDataverse().id}\">\n-                                        <h:outputText value=\"#{bundle['dataverse.results.btn.addData.newDataverse']}\"/>\n-                                    </h:outputLink>\n-                                </li>\n-                                <li>\n-                                    <h:outputLink value=\"/dataset.xhtml?ownerId=#{dataverseServiceBean.findRootDataverse().id}\">\n-                                        <h:outputText value=\"#{bundle['dataverse.results.btn.addData.newDataset']}\"/>\n-                                    </h:outputLink>\n+                        <ui:fragment rendered=\"#{showAddDataGroup}\">\n+                        <ui:fragment rendered=\"#{!authUserSession}\">\n+                            <li>\n+                                <a href=\"#\" onClick=\"PF('addData_popup').show()\">#{bundle['dataverse.results.btn.addData']} </a>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a460b80a319b7c21ced6ca56840f89ed978d5db6"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTg5NDM1Mw==", "bodyText": "I made the add data popup into a fragment and included it in the dataverse template.", "url": "https://github.com/IQSS/dataverse/pull/6856#discussion_r415894353", "createdAt": "2020-04-27T15:07:17Z", "author": {"login": "sekmiller"}, "path": "src/main/webapp/dataverse_header.xhtml", "diffHunk": "@@ -31,21 +39,35 @@\n                 </div>\n                 <div class=\"collapse navbar-collapse\" id=\"topNavBar\">\n                     <ul class=\"nav navbar-nav navbar-right\">\n-                        <li class=\"dropdown\">\n-                            <a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\">#{bundle['dataverse.results.btn.addData']} <b class=\"caret\"></b></a>\n-                            <ul class=\"dropdown-menu\">\n-                                <li>\n-                                    <h:outputLink value=\"/dataverse.xhtml?ownerId=#{dataverseServiceBean.findRootDataverse().id}\">\n-                                        <h:outputText value=\"#{bundle['dataverse.results.btn.addData.newDataverse']}\"/>\n-                                    </h:outputLink>\n-                                </li>\n-                                <li>\n-                                    <h:outputLink value=\"/dataset.xhtml?ownerId=#{dataverseServiceBean.findRootDataverse().id}\">\n-                                        <h:outputText value=\"#{bundle['dataverse.results.btn.addData.newDataset']}\"/>\n-                                    </h:outputLink>\n+                        <ui:fragment rendered=\"#{showAddDataGroup}\">\n+                        <ui:fragment rendered=\"#{!authUserSession}\">\n+                            <li>\n+                                <a href=\"#\" onClick=\"PF('addData_popup').show()\">#{bundle['dataverse.results.btn.addData']} </a>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTgwODYxMg=="}, "originalCommit": {"oid": "a460b80a319b7c21ced6ca56840f89ed978d5db6"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4NzM2Nzc4OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/dataverse_template.xhtml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxNTozNjoxNFrOGMprmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxNTozNjoxNFrOGMprmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTkxOTAwMA==", "bodyText": "I was wondering what the best way to handle this popup is, and I think this a great solution. \ud83d\udc4d", "url": "https://github.com/IQSS/dataverse/pull/6856#discussion_r415919000", "createdAt": "2020-04-27T15:36:14Z", "author": {"login": "mheppler"}, "path": "src/main/webapp/dataverse_template.xhtml", "diffHunk": "@@ -79,6 +79,7 @@\n             </f:facet>\n         </p:ajaxStatus>\n         <ui:include src=\"contactFormFragment.xhtml\"></ui:include>\n+        <ui:include src=\"addDataFormFragment.xhtml\"></ui:include>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b9c999c3449f71d9e3e67d9310ea3c5bd12a035"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3352, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}