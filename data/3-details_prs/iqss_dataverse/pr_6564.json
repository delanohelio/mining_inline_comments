{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2NDYyMDg4", "number": 6564, "title": "6262 show proper number of ds inlinking dv", "bodyText": "What this PR does / why we need it:\nThis PR will display the datasets owned by a linked dataverse in the linking dataverse\nWhich issue(s) this PR closes:\nCloses #6262\nSpecial notes for your reviewer:\nNone\nSuggestions on how to test this:\nLink a DV containing datasets and see that the datasets are displayed in the linking DV.\nDoes this PR introduce a user interface change?:\nno\nIs there a release notes update needed for this change?:\nadded as 6262-release-notes.md\nAdditional documentation:\nNA", "createdAt": "2020-01-23T16:49:36Z", "url": "https://github.com/IQSS/dataverse/pull/6564", "merged": true, "mergeCommit": {"oid": "9146cecd98004d70f4a6ab3a822991e87dab2064"}, "closed": true, "closedAt": "2020-01-30T20:50:33Z", "author": {"login": "sekmiller"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb7ULV2gH2gAyMzY2NDYyMDg4OjA5MjQzODdiNGQ2OGQ3OWZlMGEwMDZkOTIxNjAzM2Q5Y2RjNGEyODE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb_e8ffgH2gAyMzY2NDYyMDg4OjY4NzJmOThlYzMyYWJiNDBhNDcxZTg2ZTZkODA4MzhmZTg0YzMxNTg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0924387b4d68d79fe0a006d9216033d9cdc4a281", "author": {"user": {"login": "sekmiller", "name": "Stephen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/0924387b4d68d79fe0a006d9216033d9cdc4a281", "committedDate": "2020-01-17T19:46:57Z", "message": "Merge branch 'develop' into 6262-show-proper-number-of-DS-inlinking-DV"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db039d0599e9731e182c74a0c4dbb3946a877cfd", "author": {"user": {"login": "sekmiller", "name": "Stephen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/db039d0599e9731e182c74a0c4dbb3946a877cfd", "committedDate": "2020-01-17T20:08:14Z", "message": "Merge branch 'develop' into 6262-show-proper-number-of-DS-inlinking-DV"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a458e5fb1378f46151222fed42005bb63c63624", "author": {"user": {"login": "sekmiller", "name": "Stephen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/4a458e5fb1378f46151222fed42005bb63c63624", "committedDate": "2020-01-22T21:47:59Z", "message": "#6262 reindex datasets if their owner is linked"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83f1048ff7d656216954af2987d7d8748a00e027", "author": {"user": {"login": "sekmiller", "name": "Stephen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/83f1048ff7d656216954af2987d7d8748a00e027", "committedDate": "2020-01-22T21:48:24Z", "message": "Merge branch 'develop' into 6262-show-proper-number-of-DS-inlinking-DV"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dec3bd9d0572f371780f0c10d1fb55c5b88b64e4", "author": {"user": {"login": "sekmiller", "name": "Stephen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/dec3bd9d0572f371780f0c10d1fb55c5b88b64e4", "committedDate": "2020-01-23T14:23:52Z", "message": "#6262 remove debug code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74881ba53bb807e1d341b996fb587dafc6436136", "author": {"user": {"login": "sekmiller", "name": "Stephen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/74881ba53bb807e1d341b996fb587dafc6436136", "committedDate": "2020-01-23T14:24:06Z", "message": "Merge branch 'develop' into 6262-show-proper-number-of-DS-inlinking-DV"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49dbe301b1b3c9123813778371b9214444fe78ce", "author": {"user": {"login": "sekmiller", "name": "Stephen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/49dbe301b1b3c9123813778371b9214444fe78ce", "committedDate": "2020-01-23T15:01:10Z", "message": "#6262 code cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29493285603b45c06a694237be13900538598a04", "author": {"user": {"login": "sekmiller", "name": "Stephen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/29493285603b45c06a694237be13900538598a04", "committedDate": "2020-01-23T16:44:00Z", "message": "#6262 add release notes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3NDY3MDE0", "url": "https://github.com/IQSS/dataverse/pull/6564#pullrequestreview-347467014", "createdAt": "2020-01-23T17:11:12Z", "commit": {"oid": "29493285603b45c06a694237be13900538598a04"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5cf41d5cc61b79974855965c292d2305ee4880bc", "author": {"user": {"login": "sekmiller", "name": "Stephen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/5cf41d5cc61b79974855965c292d2305ee4880bc", "committedDate": "2020-01-27T21:12:55Z", "message": "#6262 get all child DVs DSs to be linked"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7996067f4bfb703d21a85b0a0bb69e37b32c8f3b", "author": {"user": {"login": "sekmiller", "name": "Stephen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/7996067f4bfb703d21a85b0a0bb69e37b32c8f3b", "committedDate": "2020-01-27T21:13:17Z", "message": "Merge branch 'develop' into 6262-show-proper-number-of-DS-inlinking-DV"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cfb24e717ab6f7b7fa3eee01b4d15cacec305f7", "author": {"user": {"login": "sekmiller", "name": "Stephen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/8cfb24e717ab6f7b7fa3eee01b4d15cacec305f7", "committedDate": "2020-01-28T14:37:01Z", "message": "#6262 clarify linking comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe39d0284b7b55b1f1f2c122a23f77021c5e7146", "author": {"user": {"login": "sekmiller", "name": "Stephen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/fe39d0284b7b55b1f1f2c122a23f77021c5e7146", "committedDate": "2020-01-29T15:52:37Z", "message": "#6262 add full path for linked DV DS"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e215c922b153ae37add448a149ef37f571dd1dc2", "author": {"user": {"login": "sekmiller", "name": "Stephen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/e215c922b153ae37add448a149ef37f571dd1dc2", "committedDate": "2020-01-29T15:53:21Z", "message": "Merge branch 'develop' into 6262-show-proper-number-of-DS-inlinking-DV"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwNDM1ODkw", "url": "https://github.com/IQSS/dataverse/pull/6564#pullrequestreview-350435890", "createdAt": "2020-01-29T21:27:11Z", "commit": {"oid": "e215c922b153ae37add448a149ef37f571dd1dc2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMToyNzoxMVrOFjYE3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMToyNzoxMVrOFjYE3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjYzODk0MQ==", "bodyText": "why is this an object and not a primitive boolean?", "url": "https://github.com/IQSS/dataverse/pull/6564#discussion_r372638941", "createdAt": "2020-01-29T21:27:11Z", "author": {"login": "scolapasta"}, "path": "src/main/java/edu/harvard/iq/dataverse/search/IndexServiceBean.java", "diffHunk": "@@ -1280,8 +1320,53 @@ private String getTopicClassificationTermOrTermAndVocabulary(DatasetField topicC\n             return segments;\n         }\n     }\n+        \n+    private boolean hasAnyLinkingDataverses(Dataverse dataverse) {\n+        Dataverse rootDataverse = findRootDataverseCached();\n+        List<Dataverse> ancestorList = dataverse.getOwners();\n+        for (Dataverse prior : ancestorList) {\n+            if (!dataverse.equals(rootDataverse)) {\n+                List<Dataverse> linkingDVs = dvLinkingService.findLinkingDataverses(prior.getId());\n+                if (!linkingDVs.isEmpty()){\n+                    return true;\n+                }\n+            }\n+        }       \n+        return false;\n+    }\n+    \n+    private List<String> findLinkingDataversePaths(Dataverse dataverse, Boolean self) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e215c922b153ae37add448a149ef37f571dd1dc2"}, "originalPosition": 121}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "369edacd0e687a0c32467223ac9833d393d8c09a", "author": {"user": {"login": "sekmiller", "name": "Stephen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/369edacd0e687a0c32467223ac9833d393d8c09a", "committedDate": "2020-01-29T21:59:34Z", "message": "#6262 consolidate code/logic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eac42ea91911d3a3abc9fd2bf037fe7cb9ced7ee", "author": {"user": {"login": "sekmiller", "name": "Stephen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/eac42ea91911d3a3abc9fd2bf037fe7cb9ced7ee", "committedDate": "2020-01-29T21:59:51Z", "message": "Merge branch 'develop' into 6262-show-proper-number-of-DS-inlinking-DV"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f13d41b28a408746658619956439e141f647bd2", "author": {"user": {"login": "sekmiller", "name": "Stephen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/9f13d41b28a408746658619956439e141f647bd2", "committedDate": "2020-01-29T22:12:10Z", "message": "#6262 remove unused method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52dddbce09314a25336661bb5b79cecd91c6812f", "author": {"user": {"login": "sekmiller", "name": "Stephen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/52dddbce09314a25336661bb5b79cecd91c6812f", "committedDate": "2020-01-29T22:17:30Z", "message": "#6262 add clarifying comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f41cfaeaef431c2ed2d0a444262585541f2ea49", "author": {"user": {"login": "sekmiller", "name": "Stephen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/1f41cfaeaef431c2ed2d0a444262585541f2ea49", "committedDate": "2020-01-30T18:35:10Z", "message": "#6262 simplify \"am I linked?\" logic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6872f98ec32abb40a471e86e6d80838fe84c3158", "author": {"user": {"login": "sekmiller", "name": "Stephen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/6872f98ec32abb40a471e86e6d80838fe84c3158", "committedDate": "2020-01-30T18:35:23Z", "message": "Merge branch 'develop' into 6262-show-proper-number-of-DS-inlinking-DV"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1013, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}