{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxNTQ4MTQ5", "number": 6802, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxODoyNjowN1rODwhHEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxODoyNjowN1rODwhHEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMjAwNzIyOnYy", "diffSide": "RIGHT", "path": "src/main/java/edu/harvard/iq/dataverse/search/SolrSearchResult.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxODoyNjowN1rOGDkXQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxOTo1NDoyNVrOGDnNsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM5NDY4OQ==", "bodyText": "This is good, but let's move this logic onto a method on Dataset (in case we need to use it elsewhere some time, and then it makes this fewer lines, ie.\nDatasetVersion dv = ds.getVersion(this.datasetVersionId);", "url": "https://github.com/IQSS/dataverse/pull/6802#discussion_r406394689", "createdAt": "2020-04-09T18:26:07Z", "author": {"login": "scolapasta"}, "path": "src/main/java/edu/harvard/iq/dataverse/search/SolrSearchResult.java", "diffHunk": "@@ -560,16 +560,18 @@ public JsonObjectBuilder json(boolean showRelevance, boolean showEntityIds, bool\n         }\n         \n         if (this.entity == null) {\n-            \n+\n         } else {\n             if (this.entity.isInstanceofDataset()) {\n                 nullSafeJsonBuilder.add(\"storageIdentifier\", this.entity.getStorageIdentifier());\n                 Dataset ds = (Dataset) this.entity;\n-                DatasetVersion dv;\n-                if (this.isDraftState()) {\n-                    dv = ds.getLatestVersion();\n-                } else {\n-                    dv = ds.getReleasedVersion();\n+                DatasetVersion dv = null;\n+\n+                for (DatasetVersion v : ds.getVersions()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5e586dfdde2731e319f0846e110f2ac084d7203"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQ0MTM5NA==", "bodyText": "added the suggested method to Dataset", "url": "https://github.com/IQSS/dataverse/pull/6802#discussion_r406441394", "createdAt": "2020-04-09T19:54:25Z", "author": {"login": "sekmiller"}, "path": "src/main/java/edu/harvard/iq/dataverse/search/SolrSearchResult.java", "diffHunk": "@@ -560,16 +560,18 @@ public JsonObjectBuilder json(boolean showRelevance, boolean showEntityIds, bool\n         }\n         \n         if (this.entity == null) {\n-            \n+\n         } else {\n             if (this.entity.isInstanceofDataset()) {\n                 nullSafeJsonBuilder.add(\"storageIdentifier\", this.entity.getStorageIdentifier());\n                 Dataset ds = (Dataset) this.entity;\n-                DatasetVersion dv;\n-                if (this.isDraftState()) {\n-                    dv = ds.getLatestVersion();\n-                } else {\n-                    dv = ds.getReleasedVersion();\n+                DatasetVersion dv = null;\n+\n+                for (DatasetVersion v : ds.getVersions()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM5NDY4OQ=="}, "originalCommit": {"oid": "f5e586dfdde2731e319f0846e110f2ac084d7203"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3341, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}