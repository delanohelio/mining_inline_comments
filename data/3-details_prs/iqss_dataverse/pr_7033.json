{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQxNTI1NjQ5", "number": 7033, "title": "6915-feature-builtin-users-sendEmailNotification-new-optionalParameter", "bodyText": "What this PR does / why we need it:\nAllow to disable sending an email for confirmation after creating a user.\nWhich issue(s) this PR closes:\nCloses none, but solves part of #6915\nSpecial notes for your reviewer:\nWe don't have a dev server, so there was no local testing yet.\nSuggestions on how to test this:\nCreate and edit users with the builtin-users API with and without explicitly submitting PathParam with\n@post\n@path(\"{password}/{key}/{sendEmailNotification}\")\nand as QueryParam with\n@post\n...and &sendEmailNotification=...\nDoes this PR introduce a user interface change? If mockups are available, please link/include them here:\nNO\nIs there a release notes update needed for this change?:\ncould be a new small feature to mention\nAdditional documentation:\nsee doc/sphinx-guides/source/api/native-api.rst", "createdAt": "2020-06-29T16:32:27Z", "url": "https://github.com/IQSS/dataverse/pull/7033", "merged": true, "mergeCommit": {"oid": "c1a38343cb887255a48140d57343f72b589e9815"}, "closed": true, "closedAt": "2020-07-14T15:56:54Z", "author": {"login": "RightInTwo"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwDpN9gH2gAyNDQxNTI1NjQ5Ojg1ZTA1ZjJhZWI0ZTA5Y2RlMTc4NTJkNDcxNGI2MWQ5NmY4YmU1YzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABczoGQDgFqTQ0NjYyMDUyOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "85e05f2aeb4e09cde17852d4714b61d96f8be5c5", "author": {"user": {"login": "RightInTwo", "name": "Jonas"}}, "url": "https://github.com/IQSS/dataverse/commit/85e05f2aeb4e09cde17852d4714b61d96f8be5c5", "committedDate": "2020-06-29T16:29:11Z", "message": " api/BuiltinUsers.java: add new overloading \"sendEmailNotification\" parameter to create(...) and internalSave(...)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5MzY4Mzk3", "url": "https://github.com/IQSS/dataverse/pull/7033#pullrequestreview-439368397", "createdAt": "2020-06-29T17:46:57Z", "commit": {"oid": "85e05f2aeb4e09cde17852d4714b61d96f8be5c5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxNzo0Njo1N1rOGqbmKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxNzo0Njo1N1rOGqbmKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzE0NTUxMg==", "bodyText": "This new endpoint should be documented. Here's a link to the current docs in this area: http://guides.dataverse.org/en/4.20/api/native-api.html#create-a-builtin-user\nThe file to edit is doc/sphinx-guides/source/api/native-api.rst", "url": "https://github.com/IQSS/dataverse/pull/7033#discussion_r447145512", "createdAt": "2020-06-29T17:46:57Z", "author": {"login": "pdurbin"}, "path": "src/main/java/edu/harvard/iq/dataverse/api/BuiltinUsers.java", "diffHunk": "@@ -105,7 +105,28 @@ public Response create(BuiltinUser user, @PathParam(\"password\") String password,\n         return internalSave(user, password, key);\n     }\n     \n+    //TODO: detailed description \n+    /**\n+     * Created this for #6915...\n+     *\n+     * @param user\n+     * @param password\n+     * @param key\n+     * @param sendEmailNotification\n+     * @return\n+     */\n+    @POST\n+    @Path(\"{password}/{key}/{sendEmailNotification}\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85e05f2aeb4e09cde17852d4714b61d96f8be5c5"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e7b123a7e0ec355abc50d8f7c87ae40755be53c", "author": {"user": {"login": "AACGSR", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/7e7b123a7e0ec355abc50d8f7c87ae40755be53c", "committedDate": "2020-07-02T12:53:33Z", "message": "kick Travis"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee926c044fbdb84b5cf9ef6a7789a9417240e4ca", "author": {"user": {"login": "AACGSR", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/ee926c044fbdb84b5cf9ef6a7789a9417240e4ca", "committedDate": "2020-07-10T13:33:48Z", "message": "Added documentation on the sendEmailNotification parameter in BuiltinUsers.java and native-api.rst"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5204a7758901e47d19ceefce178e3ccb22263f8", "author": {"user": {"login": "RightInTwo", "name": "Jonas"}}, "url": "https://github.com/IQSS/dataverse/commit/b5204a7758901e47d19ceefce178e3ccb22263f8", "committedDate": "2020-07-10T14:17:10Z", "message": "sendEmailNotification: default to true"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2NTQxMzkw", "url": "https://github.com/IQSS/dataverse/pull/7033#pullrequestreview-446541390", "createdAt": "2020-07-10T16:35:39Z", "commit": {"oid": "b5204a7758901e47d19ceefce178e3ccb22263f8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxNjozNTo0MFrOGv99aQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxNjozNTo0MFrOGv99aQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjk1MTQwMQ==", "bodyText": "sendEmailNotification appears to be a path parameter rather than a query parameter, as documented above. @RightInTwo can you provide a full curl example?", "url": "https://github.com/IQSS/dataverse/pull/7033#discussion_r452951401", "createdAt": "2020-07-10T16:35:40Z", "author": {"login": "pdurbin"}, "path": "src/main/java/edu/harvard/iq/dataverse/api/BuiltinUsers.java", "diffHunk": "@@ -105,7 +108,29 @@ public Response create(BuiltinUser user, @PathParam(\"password\") String password,\n         return internalSave(user, password, key);\n     }\n     \n+    /**\n+     * Created this new endpoint to resolve issue #6915, optionally preventing \n+     * the email notification to the new user on account creation by adding \n+     * \"false\" as the third path parameter.\n+     *\n+     * @param user\n+     * @param password\n+     * @param key\n+     * @param sendEmailNotification\n+     * @return\n+     */\n+    @POST\n+    @Path(\"{password}/{key}/{sendEmailNotification}\")\n+    public Response create(BuiltinUser user, @PathParam(\"password\") String password, @PathParam(\"key\") String key, @PathParam(\"sendEmailNotification\") Boolean sendEmailNotification) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b5204a7758901e47d19ceefce178e3ccb22263f8"}, "originalPosition": 31}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2NjIwNTI4", "url": "https://github.com/IQSS/dataverse/pull/7033#pullrequestreview-446620528", "createdAt": "2020-07-10T18:35:48Z", "commit": {"oid": "b5204a7758901e47d19ceefce178e3ccb22263f8"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxODozNTo0OFrOGwBdug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxODozNTo0OFrOGwBdug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzAwODgyNg==", "bodyText": "Oh, I get it. The query parameter version is called \"save\". Thanks.", "url": "https://github.com/IQSS/dataverse/pull/7033#discussion_r453008826", "createdAt": "2020-07-10T18:35:48Z", "author": {"login": "pdurbin"}, "path": "src/main/java/edu/harvard/iq/dataverse/api/BuiltinUsers.java", "diffHunk": "@@ -105,7 +108,29 @@ public Response create(BuiltinUser user, @PathParam(\"password\") String password,\n         return internalSave(user, password, key);\n     }\n     \n+    /**\n+     * Created this new endpoint to resolve issue #6915, optionally preventing \n+     * the email notification to the new user on account creation by adding \n+     * \"false\" as the third path parameter.\n+     *\n+     * @param user\n+     * @param password\n+     * @param key\n+     * @param sendEmailNotification\n+     * @return\n+     */\n+    @POST\n+    @Path(\"{password}/{key}/{sendEmailNotification}\")\n+    public Response create(BuiltinUser user, @PathParam(\"password\") String password, @PathParam(\"key\") String key, @PathParam(\"sendEmailNotification\") Boolean sendEmailNotification) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjk1MTQwMQ=="}, "originalCommit": {"oid": "b5204a7758901e47d19ceefce178e3ccb22263f8"}, "originalPosition": 31}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 869, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}