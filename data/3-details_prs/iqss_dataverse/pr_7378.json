{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0MjkyNzMy", "number": 7378, "title": "Handle non-ascii chars in search", "bodyText": "What this PR does / why we need it: adds the ASCIIFoldingFilterFactory which should allow for matches when accented characters are used - in the text (the index side) or when a search term is added (the filter itself means an unaccented char in a search query works while the preserveOriginal == true means that search for the accented char also works).\nWhich issue(s) this PR closes:\nCloses #820\nSpecial notes for your reviewer: This doesn't handle all the cases in the title of #820, but there's a comment suggesting that things like & and negative numbers are/were addressed in other issues. So - guessing this closes #820 but not sure.\nAlso note the concern in the issue that this approach can cause false positives: e.g. \"ca\u00f1on\" will be found searching for \"canon\" which isn't right if you intended to search only for the English word canon.\nSuggestions on how to test this:\nThere are 2 new search cases that should work with this change:\nan accented char in some text field should be matched by an ascii search .e.g. \"ca\u00f1on\" will be found searching for \"canon\"\nan accented search will match an ascii field.,e.g.  \"canon\" will be found searching for \"ca\u00f1on\"\nShould work for words with all such chars, eg. the list in the issue: (\u00e1, \u00e0, \u00e2, \u00e7, \u00e9, \u00e8, \u00ea, \u00eb, \u00ed, \u00f3, \u00f6, \u00fa, \u00f9, \u00fb, \u00fc\u2026).\nDoes this PR introduce a user interface change? If mockups are available, please link/include them here:\nIs there a release notes update needed for this change?:\nAdditional documentation:", "createdAt": "2020-11-02T20:15:45Z", "url": "https://github.com/IQSS/dataverse/pull/7378", "merged": true, "mergeCommit": {"oid": "bae37ca1ca086602a643a1493f86ad3a3b8c920d"}, "closed": true, "closedAt": "2021-03-11T20:29:10Z", "author": {"login": "qqmyers"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdYqIq3AH2gAyNTE0MjkyNzMyOjM2ZWRlODdkMTI4NTlhMzEwZDk4ZTBhZmRmYzU3ZjYxNTg4OTk3Zjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABeBjQBAgH2gAyNTE0MjkyNzMyOjc2OGVkM2M3YjVkODc5ZjZkYzg3OTJiZjRkNTZiODg3ZDZhMGExZWI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "36ede87d12859a310d98e0afdfc57f61588997f7", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/36ede87d12859a310d98e0afdfc57f61588997f7", "committedDate": "2020-11-02T19:56:54Z", "message": "Add ASCIIFoldingFilterFactory to handle non-ascii chars in search"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2be556b43e19ff379bc3686c9c20d704970fb8e", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/e2be556b43e19ff379bc3686c9c20d704970fb8e", "committedDate": "2020-11-03T20:28:59Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/820"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyODkxNzk4", "url": "https://github.com/IQSS/dataverse/pull/7378#pullrequestreview-522891798", "createdAt": "2020-11-03T21:36:32Z", "commit": {"oid": "e2be556b43e19ff379bc3686c9c20d704970fb8e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fde40b59ec3327c0caba8b5310ed5858f2a199f2", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/fde40b59ec3327c0caba8b5310ed5858f2a199f2", "committedDate": "2021-01-08T20:05:14Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/820"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5efe3f0b14d61453ce649d5a1958a000aee162b7", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/5efe3f0b14d61453ce649d5a1958a000aee162b7", "committedDate": "2021-01-08T20:49:51Z", "message": "placeholder release notes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdc529ebfdbaf4a47adf38f5d840da15dad45390", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/fdc529ebfdbaf4a47adf38f5d840da15dad45390", "committedDate": "2021-01-29T18:53:41Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/820"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "308294616b48791fd91a300bfff12344b544415f", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/308294616b48791fd91a300bfff12344b544415f", "committedDate": "2021-02-23T18:05:30Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/820"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjA1NDI1ODYz", "url": "https://github.com/IQSS/dataverse/pull/7378#pullrequestreview-605425863", "createdAt": "2021-03-05T17:03:58Z", "commit": {"oid": "308294616b48791fd91a300bfff12344b544415f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0wNVQxNzowMzo1OFrOIxN0Qg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0wNVQxNzowMzo1OFrOIxN0Qg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4ODQ3NzUwNg==", "bodyText": "When PR #7645 gets merged (in QA), this PR will need to be updated, as this edit is made to the soon-to-be older 7.7.2 schema.", "url": "https://github.com/IQSS/dataverse/pull/7378#discussion_r588477506", "createdAt": "2021-03-05T17:03:58Z", "author": {"login": "mheppler"}, "path": "conf/solr/7.7.2/schema.xml", "diffHunk": "@@ -38,7 +38,7 @@\n     catchall \"text\" field, and use that for searching.\n -->\n \n-<schema name=\"default-config\" version=\"1.6\">\n+<schema name=\"default-config\" version=\"1.7\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "308294616b48791fd91a300bfff12344b544415f"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjA1NDI2NjE3", "url": "https://github.com/IQSS/dataverse/pull/7378#pullrequestreview-605426617", "createdAt": "2021-03-05T17:04:48Z", "commit": {"oid": "308294616b48791fd91a300bfff12344b544415f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0wNVQxNzowNDo0OFrOIxN3Kg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0wNVQxNzowNDo0OFrOIxN3Kg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4ODQ3ODI1MA==", "bodyText": "When PR #7645 gets merged (in QA), this PR will need to be updated, as these release notes should be merged with the release notes included in that Solr update PR.", "url": "https://github.com/IQSS/dataverse/pull/7378#discussion_r588478250", "createdAt": "2021-03-05T17:04:48Z", "author": {"login": "mheppler"}, "path": "doc/release-notes/820-non-ascii-chars-in-search.md", "diffHunk": "@@ -0,0 +1,8 @@\n+### Search with non-ascii characters\n+\n+Many languages include characters that have close analogs in ascii, e.g. (\u00e1, \u00e0, \u00e2, \u00e7, \u00e9, \u00e8, \u00ea, \u00eb, \u00ed, \u00f3, \u00f6, \u00fa, \u00f9, \u00fb, \u00fc\u2026). This release changes the default Solr configuration to allow search to match words based on these associations, e.g. a search for Merc\u00e8 would match the word Merce in a Dataset, and vice versa. This should generally be helpful, but can result in false positives.,e.g. \"canon\" will be found searching for \"ca\u00f1on\". \n+\n+## Upgrade Instructions\n+\n+1. You will need to replace or modify your `schema.xml` and restart solr. Re-indexing is required to get full-functionality from this change - the standard instructions for an incremental reindex could be added here.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "308294616b48791fd91a300bfff12344b544415f"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1267b91bc93fdd2bcc3c8e382a5ae434ec4eb1ce", "author": {"user": {"login": "mheppler", "name": "Michael Heppler"}}, "url": "https://github.com/IQSS/dataverse/commit/1267b91bc93fdd2bcc3c8e382a5ae434ec4eb1ce", "committedDate": "2021-03-05T20:47:18Z", "message": "Merge remote-tracking branch 'origin/develop' into IQSS/820"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9779b8bce4224e1ce6e0ef4d3b5b229db4945103", "author": {"user": {"login": "mheppler", "name": "Michael Heppler"}}, "url": "https://github.com/IQSS/dataverse/commit/9779b8bce4224e1ce6e0ef4d3b5b229db4945103", "committedDate": "2021-03-05T21:10:36Z", "message": "Merge remote-tracking branch 'origin/develop' into IQSS/820"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjA3OTYzNTU0", "url": "https://github.com/IQSS/dataverse/pull/7378#pullrequestreview-607963554", "createdAt": "2021-03-09T20:39:10Z", "commit": {"oid": "9779b8bce4224e1ce6e0ef4d3b5b229db4945103"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "768ed3c7b5d879f6dc8792bf4d56b887d6a0a1eb", "author": {"user": {"login": "djbrooke", "name": "Danny Brooke"}}, "url": "https://github.com/IQSS/dataverse/commit/768ed3c7b5d879f6dc8792bf4d56b887d6a0a1eb", "committedDate": "2021-03-09T21:06:29Z", "message": "flagging release note"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 817, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}