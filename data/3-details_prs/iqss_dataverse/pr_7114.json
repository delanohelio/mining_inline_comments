{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1Mjg2MTQ5", "number": 7114, "title": "7112 payara5 aio", "bodyText": "What this PR does / why we need it:\nswitch docker-aio from glassfish to payara\nWhich issue(s) this PR closes:\nCloses #7112\nSpecial notes for your reviewer:\nDeferred testing of / changes related to new install script (despite describing it as analogous to an issues that explicitly included testing the new installer); focused on API test suite.\nSuggestions on how to test this:\nExisting instructions for docker-aio should work unchanged; Server header from curl -i http://localhost:8083/api/info/version should report payara\nDoes this PR introduce a user interface change? If mockups are available, please link/include them here:\nnope\nIs there a release notes update needed for this change?:\nnope\nAdditional documentation:\nshould be none necessary", "createdAt": "2020-07-22T18:35:19Z", "url": "https://github.com/IQSS/dataverse/pull/7114", "merged": true, "mergeCommit": {"oid": "c6e140646372341c7ce43d5ae586dc63a92caf3a"}, "closed": true, "closedAt": "2020-08-04T13:53:47Z", "author": {"login": "pameyer"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3dvHzAH2gAyNDU1Mjg2MTQ5Ojk3ODgxYTY0ZjI5OTFiMmI0ZTQxYzRkNTkzZGM1NDNlYjdmZGI0Mjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc7XuZ5gFqTQ2MDMwNjIzMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "97881a64f2991b2b4e41c4d593dc543eb7fdb428", "author": {"user": {"login": "pameyer", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/97881a64f2991b2b4e41c4d593dc543eb7fdb428", "committedDate": "2020-07-22T16:50:38Z", "message": "dependency switch to payara download"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "016f520cc338ae82156d6177f9f9958b791cbf53", "author": {"user": {"login": "pameyer", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/016f520cc338ae82156d6177f9f9958b791cbf53", "committedDate": "2020-07-22T16:50:57Z", "message": "first pass switch to payara"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66206b941fc040f462d3141dd18c7572e5ad7293", "author": {"user": {"login": "pameyer", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/66206b941fc040f462d3141dd18c7572e5ad7293", "committedDate": "2020-07-22T18:16:40Z", "message": "dockerfile cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55a081632cad25f64bbfe51e99dc46626b9f677c", "author": {"user": {"login": "pameyer", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/55a081632cad25f64bbfe51e99dc46626b9f677c", "committedDate": "2020-07-22T18:16:54Z", "message": "more cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5688b6fd959bab16f2b7cfbcec78ecf5676703c", "author": {"user": {"login": "pameyer", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/d5688b6fd959bab16f2b7cfbcec78ecf5676703c", "committedDate": "2020-07-22T18:34:31Z", "message": "readme updates"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzNTg1ODAy", "url": "https://github.com/IQSS/dataverse/pull/7114#pullrequestreview-453585802", "createdAt": "2020-07-22T18:39:53Z", "commit": {"oid": "d5688b6fd959bab16f2b7cfbcec78ecf5676703c"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxODozOTo1M1rOG1vYug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxODo0MjoxM1rOG1veAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTAwNDA5MA==", "bodyText": "Hooray! \ud83c\udf89", "url": "https://github.com/IQSS/dataverse/pull/7114#discussion_r459004090", "createdAt": "2020-07-22T18:39:53Z", "author": {"login": "pdurbin"}, "path": "conf/docker-aio/0prep_deps.sh", "diffHunk": "@@ -3,18 +3,11 @@ if [ ! -d dv/deps ]; then\n \tmkdir -p dv/deps\n fi\n wdir=`pwd`\n-if [ ! -e dv/deps/glassfish4dv.tgz ]; then\n-\techo \"glassfish dependency prep\"\n-\tmkdir -p /tmp/dv-prep/gf\n-\tcd /tmp/dv-prep/gf\n-\twget http://download.java.net/glassfish/4.1/release/glassfish-4.1.zip\n-\twget https://search.maven.org/remotecontent?filepath=org/jboss/weld/weld-osgi-bundle/2.2.10.Final/weld-osgi-bundle-2.2.10.Final-glassfish4.jar -O weld-osgi-bundle-2.2.10.Final-glassfish4.jar\n-\tunzip glassfish-4.1.zip\n-\trm glassfish4/glassfish/modules/weld-osgi-bundle.jar\n-\tmv weld-osgi-bundle-2.2.10.Final-glassfish4.jar glassfish4/glassfish/modules\n-\ttar zcf $wdir/dv/deps/glassfish4dv.tgz glassfish4\n-\tcd $wdir\n-\t# assuming that folks usually have /tmp auto-clean as needed\n+\n+if [ ! -e dv/deps/payara-5.2020.2.zip ]; then\n+\techo \"payara dependency prep\"\n+\t# no more fiddly patching :)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5688b6fd959bab16f2b7cfbcec78ecf5676703c"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTAwNTQ0MA==", "bodyText": "I assume it's safe to not create this symlink. But it doesn't hurt to leave it in. I'm glad the comment was updated to described what's going on.", "url": "https://github.com/IQSS/dataverse/pull/7114#discussion_r459005440", "createdAt": "2020-07-22T18:42:13Z", "author": {"login": "pdurbin"}, "path": "conf/docker-aio/c7.dockerfile", "diffHunk": "@@ -52,8 +51,8 @@ EXPOSE 9009\n \n RUN mkdir /opt/dv\n \n-# yeah - still not happy if glassfish isn't in /usr/local :<\n-RUN ln -s /opt/glassfish4 /usr/local/glassfish4\n+# keeping the symlink on the off chance that something else is still assuming /usr/local/glassfish4\n+RUN ln -s /opt/payara5 /usr/local/glassfish4", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5688b6fd959bab16f2b7cfbcec78ecf5676703c"}, "originalPosition": 51}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a234963b0314d9253469e710df6825e0117b71e", "author": {"user": {"login": "pameyer", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/6a234963b0314d9253469e710df6825e0117b71e", "committedDate": "2020-07-30T18:56:18Z", "message": "Merge branch 'develop' into 7112-payara5_aio"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a77f49f78eb72addd6225bd2cf8c13549216550", "author": {"user": {"login": "pameyer", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/5a77f49f78eb72addd6225bd2cf8c13549216550", "committedDate": "2020-08-03T19:52:52Z", "message": "switch to as-setup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMzA2MjMy", "url": "https://github.com/IQSS/dataverse/pull/7114#pullrequestreview-460306232", "createdAt": "2020-08-03T20:06:07Z", "commit": {"oid": "5a77f49f78eb72addd6225bd2cf8c13549216550"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 901, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}