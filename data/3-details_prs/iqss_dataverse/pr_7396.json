{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE2MTc0MTU0", "number": 7396, "title": "recommend RHEL/CentOS 8, update docker-aio", "bodyText": "What this PR does / why we need it: The guides recommend RHEL/CentOS 7, but 8 has been out for a while now.\nWhich issue(s) this PR closes:\nCloses #7394\nSpecial notes for your reviewer: none\nSuggestions on how to test this: verify commands\nDoes this PR introduce a user interface change? If mockups are available, please link/include them here: no\nIs there a release notes update needed for this change?: no\nAdditional documentation: none", "createdAt": "2020-11-05T16:10:57Z", "url": "https://github.com/IQSS/dataverse/pull/7396", "merged": true, "mergeCommit": {"oid": "922b0cd858a1bbd1b95f097d22cdbec0059d338a"}, "closed": true, "closedAt": "2020-11-10T16:18:43Z", "author": {"login": "donsizemore"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZkqPqAH2gAyNTE2MTc0MTU0OjExOWMwYmMwZjg5ZjQyY2QyYjRjNjBkMzA5MjMxOTZjYjUwODkzOWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdbKqBAAFqTUyNzI4ODU2MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "119c0bc0f89f42cd2b4c60d30923196cb508939e", "author": {"user": null}, "url": "https://github.com/IQSS/dataverse/commit/119c0bc0f89f42cd2b4c60d30923196cb508939e", "committedDate": "2020-11-05T16:08:04Z", "message": "#7394 recommend RHEL/CentOS 8"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c0fb2feb680c502109d79bdf8b53eb5d94ac0e2", "author": {"user": null}, "url": "https://github.com/IQSS/dataverse/commit/5c0fb2feb680c502109d79bdf8b53eb5d94ac0e2", "committedDate": "2020-11-05T20:19:27Z", "message": "#7384 point docker-aio, docker-dcm, openshift, and vagrant at CentOS 8"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0NjUyOTkx", "url": "https://github.com/IQSS/dataverse/pull/7396#pullrequestreview-524652991", "createdAt": "2020-11-05T20:46:49Z", "commit": {"oid": "5c0fb2feb680c502109d79bdf8b53eb5d94ac0e2"}, "state": "COMMENTED", "comments": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQyMDo0Njo0OVrOHuV1fQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQyMTo0NjoxOVrOHuX7Og==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM1NDMwMQ==", "bodyText": "Whoops! I thought I had removed this openshift.json file back when I deleted OpenShift stuff in e72ba3c. I say we remove this file too, either in this pull request or in a future one. We aren't using it. We aren't maintaining it.", "url": "https://github.com/IQSS/dataverse/pull/7396#discussion_r518354301", "createdAt": "2020-11-05T20:46:49Z", "author": {"login": "pdurbin"}, "path": "conf/openshift/openshift.json", "diffHunk": "@@ -150,10 +150,10 @@\n       \"kind\": \"ImageStream\",\n       \"apiVersion\": \"v1\",\n       \"metadata\": {\n-        \"name\": \"centos-postgresql-94-centos7\"\n+        \"name\": \"centos-postgresql-10-centos8\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c0fb2feb680c502109d79bdf8b53eb5d94ac0e2"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM1Njc3MQ==", "bodyText": "I asked for a review from @pameyer because I remember him talking about how he's still on CentOS 6. But this was a while back. https://github.com/sbgrid/data-capture-module/blob/0.6/doc/installation.md mentions CentOS 6 and 7, not 8.", "url": "https://github.com/IQSS/dataverse/pull/7396#discussion_r518356771", "createdAt": "2020-11-05T20:51:28Z", "author": {"login": "pdurbin"}, "path": "conf/docker-dcm/dcmsrv.dockerfile", "diffHunk": "@@ -1,5 +1,5 @@\n # build from repo root\n-FROM centos:6\n+FROM centos:8", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c0fb2feb680c502109d79bdf8b53eb5d94ac0e2"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM1ODc3OA==", "bodyText": "We don't use this anymore? I assume it's being deleted on purpose. \ud83d\ude04", "url": "https://github.com/IQSS/dataverse/pull/7396#discussion_r518358778", "createdAt": "2020-11-05T20:55:14Z", "author": {"login": "pdurbin"}, "path": "tests/jenkins/groupvars.yml", "diffHunk": "@@ -1,163 +0,0 @@\n----\n-# dataverse/defaults/main.yml", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c0fb2feb680c502109d79bdf8b53eb5d94ac0e2"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM2MDExOA==", "bodyText": "Mental note: Vagrant was already upgraded to CentOS 8 in pull request #7153 (also by @donsizemore , thank you!).", "url": "https://github.com/IQSS/dataverse/pull/7396#discussion_r518360118", "createdAt": "2020-11-05T20:57:54Z", "author": {"login": "pdurbin"}, "path": "conf/vagrant/etc/yum.repos.d/shibboleth.repo", "diffHunk": "@@ -1,7 +1,7 @@\n [security_shibboleth]\n-name=Shibboleth (CentOS_CentOS-6)\n+name=Shibboleth (CentOS_8)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c0fb2feb680c502109d79bdf8b53eb5d94ac0e2"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM3NTU5NA==", "bodyText": "Since we're creating this new c8.dockerfile, should we go ahead and delete the c7.dockerfile in this directory?", "url": "https://github.com/IQSS/dataverse/pull/7396#discussion_r518375594", "createdAt": "2020-11-05T21:21:13Z", "author": {"login": "pdurbin"}, "path": "conf/docker-aio/c8.dockerfile", "diffHunk": "@@ -0,0 +1,82 @@\n+FROM centos:8", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c0fb2feb680c502109d79bdf8b53eb5d94ac0e2"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM3NjUxNA==", "bodyText": "Should we delete c6client.dockerfile since we're adding c8client.dockerfile?", "url": "https://github.com/IQSS/dataverse/pull/7396#discussion_r518376514", "createdAt": "2020-11-05T21:23:05Z", "author": {"login": "pdurbin"}, "path": "conf/docker-dcm/c8client.dockerfile", "diffHunk": "@@ -0,0 +1,7 @@\n+# build from repo root", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c0fb2feb680c502109d79bdf8b53eb5d94ac0e2"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM4MTcyNw==", "bodyText": "Just a comment that it's sad to see \"the steps below were orginally[sic] written for el6\" in here. I'm not sure if the steps need to be rewritten or not. People would probably complain if they don't work. Maybe we should rewrite this line.", "url": "https://github.com/IQSS/dataverse/pull/7396#discussion_r518381727", "createdAt": "2020-11-05T21:33:44Z", "author": {"login": "pdurbin"}, "path": "doc/sphinx-guides/source/installation/prerequisites.rst", "diffHunk": "@@ -14,7 +14,7 @@ After following all the steps below, you can proceed to the :doc:`installation-m\n Linux\n -----\n \n-We assume you plan to run Dataverse on Linux and we recommend RHEL/CentOS, which is the Linux distribution tested by the Dataverse development team. Please be aware that while el7 (RHEL/CentOS 7) is the recommended platform, the steps below were orginally written for el6 and may need to be updated (please feel free to make a pull request!).\n+We assume you plan to run Dataverse on Linux and we recommend RHEL/CentOS, which is the Linux distribution tested by the Dataverse development team. Please be aware that while el8 (RHEL/CentOS 8) is the recommended platform, the steps below were orginally written for el6 and may need to be updated (please feel free to make a pull request!).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c0fb2feb680c502109d79bdf8b53eb5d94ac0e2"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM4NjAzMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            For RHEL/CentOS, the EPEL distribution is strongly recommended::\n          \n          \n            \n            For RHEL/CentOS, the EPEL distribution is strongly recommended:\n          \n      \n    \n    \n  \n\nTo avoid this error:\n/Users/pdurbin/github/iqss/guides.dataverse.org/doc/sphinx-guides/source/installation/prerequisites.rst:331: WARNING: Literal block expected; none found.\nIt's the double :: that's causing trouble. Removing one fixes it. You could change the remaining colon to a period. Probably looks better.", "url": "https://github.com/IQSS/dataverse/pull/7396#discussion_r518386033", "createdAt": "2020-11-05T21:41:37Z", "author": {"login": "pdurbin"}, "path": "doc/sphinx-guides/source/installation/prerequisites.rst", "diffHunk": "@@ -322,27 +322,35 @@ components and libraries. Please consult the instructions in the\n Installing R\n ============\n \n-Can be installed with :fixedwidthplain:`yum`::\n+For RHEL/CentOS, the EPEL distribution is strongly recommended::", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c0fb2feb680c502109d79bdf8b53eb5d94ac0e2"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM4NzQyNQ==", "bodyText": "I'm new to CodeReady-Builder. Is it an alternative to EPEL?", "url": "https://github.com/IQSS/dataverse/pull/7396#discussion_r518387425", "createdAt": "2020-11-05T21:44:22Z", "author": {"login": "pdurbin"}, "path": "doc/sphinx-guides/source/installation/prerequisites.rst", "diffHunk": "@@ -322,27 +322,35 @@ components and libraries. Please consult the instructions in the\n Installing R\n ============\n \n-Can be installed with :fixedwidthplain:`yum`::\n+For RHEL/CentOS, the EPEL distribution is strongly recommended::\n \n-       yum install R-core R-core-devel\n+If :fixedwidthplain:`yum` isn't configured to use EPEL repositories ( https://fedoraproject.org/wiki/EPEL ):\n \n-EPEL distribution is strongly recommended. The version of R currently available from epel6 and epel7 is 3.5; it has been tested and is known to work on RedHat and CentOS versions 6 and 7.\n+RHEL/CentOS 8 users can install the epel-release RPM::\n \n-If :fixedwidthplain:`yum` isn't configured to use EPEL repositories ( https://fedoraproject.org/wiki/EPEL ):\n+       yum install https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm\n \n-RHEL/CentOS users can install the RPM :fixedwidthplain:`epel-release`. For RHEL/CentOS 7::\n+RHEL/CentOS 7 users can install the epel-release RPM::\n \n        yum install https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm\n \n-RHEL/CentOS users can install the RPM :fixedwidthplain:`epel-release`. For RHEL/CentOS 6::\n+RHEL 8 users will need to enable the CodeReady-Builder repository::\n+\n+       subscription-manager repos --enable codeready-builder-for-rhel-8-x86_64-rpms", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c0fb2feb680c502109d79bdf8b53eb5d94ac0e2"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM4ODUzOA==", "bodyText": "I'm new to PowerTools as well. I'm starting to worry that there are a lot of steps here. Is it possible to simplify it, at least in how it's described at the top as \"You're going to enable EPEL and then install a package called R-core-devel.\" Or the extra things, PowerTools and CodeReady-Builder really necessary?", "url": "https://github.com/IQSS/dataverse/pull/7396#discussion_r518388538", "createdAt": "2020-11-05T21:46:19Z", "author": {"login": "pdurbin"}, "path": "doc/sphinx-guides/source/installation/prerequisites.rst", "diffHunk": "@@ -322,27 +322,35 @@ components and libraries. Please consult the instructions in the\n Installing R\n ============\n \n-Can be installed with :fixedwidthplain:`yum`::\n+For RHEL/CentOS, the EPEL distribution is strongly recommended::\n \n-       yum install R-core R-core-devel\n+If :fixedwidthplain:`yum` isn't configured to use EPEL repositories ( https://fedoraproject.org/wiki/EPEL ):\n \n-EPEL distribution is strongly recommended. The version of R currently available from epel6 and epel7 is 3.5; it has been tested and is known to work on RedHat and CentOS versions 6 and 7.\n+RHEL/CentOS 8 users can install the epel-release RPM::\n \n-If :fixedwidthplain:`yum` isn't configured to use EPEL repositories ( https://fedoraproject.org/wiki/EPEL ):\n+       yum install https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm\n \n-RHEL/CentOS users can install the RPM :fixedwidthplain:`epel-release`. For RHEL/CentOS 7::\n+RHEL/CentOS 7 users can install the epel-release RPM::\n \n        yum install https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm\n \n-RHEL/CentOS users can install the RPM :fixedwidthplain:`epel-release`. For RHEL/CentOS 6::\n+RHEL 8 users will need to enable the CodeReady-Builder repository::\n+\n+       subscription-manager repos --enable codeready-builder-for-rhel-8-x86_64-rpms\n \n-       yum install https://dl.fedoraproject.org/pub/epel/epel-release-latest-6.noarch.rpm\n+CentOS 8 users will need to enable the PowerTools repository::\n \n-RHEL users will want to log in to their organization's respective RHN interface, find the particular machine in question and:\n+       dnf config-manager --enable PowerTools", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c0fb2feb680c502109d79bdf8b53eb5d94ac0e2"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1NTA3NDEz", "url": "https://github.com/IQSS/dataverse/pull/7396#pullrequestreview-525507413", "createdAt": "2020-11-06T21:31:49Z", "commit": {"oid": "5c0fb2feb680c502109d79bdf8b53eb5d94ac0e2"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQyMTozMTo0OVrOHu-LmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQyMTo1MDoxNFrOHu-pNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTAxNTMyMQ==", "bodyText": "Probably - seems like it's less confusing to have two copies.", "url": "https://github.com/IQSS/dataverse/pull/7396#discussion_r519015321", "createdAt": "2020-11-06T21:31:49Z", "author": {"login": "pameyer"}, "path": "conf/docker-dcm/c8client.dockerfile", "diffHunk": "@@ -0,0 +1,7 @@\n+# build from repo root", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM3NjUxNA=="}, "originalCommit": {"oid": "5c0fb2feb680c502109d79bdf8b53eb5d94ac0e2"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTAxNTY4Mg==", "bodyText": "It might make more sense to leave use centos:7 here - the DCM server side stuff is tested on that OS, but I haven't tested with Cent8 yet.  I don't expect any issues, but that's different from knowing that it works.", "url": "https://github.com/IQSS/dataverse/pull/7396#discussion_r519015682", "createdAt": "2020-11-06T21:32:38Z", "author": {"login": "pameyer"}, "path": "conf/docker-dcm/dcmsrv.dockerfile", "diffHunk": "@@ -1,5 +1,5 @@\n # build from repo root\n-FROM centos:6\n+FROM centos:8", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM1Njc3MQ=="}, "originalCommit": {"oid": "5c0fb2feb680c502109d79bdf8b53eb5d94ac0e2"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTAxODExNg==", "bodyText": "This might also be better left at centos:7 (server-side component hasn't been tested on cent8).", "url": "https://github.com/IQSS/dataverse/pull/7396#discussion_r519018116", "createdAt": "2020-11-06T21:38:40Z", "author": {"login": "pameyer"}, "path": "conf/docker-dcm/rsalsrv.dockerfile", "diffHunk": "@@ -1,4 +1,4 @@\n-FROM centos:7\n+FROM centos:8", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c0fb2feb680c502109d79bdf8b53eb5d94ac0e2"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTAyMjA2Mg==", "bodyText": "It might be useful for testing on cent7 and cent8; but that's probably better handled through dataverse-ansible.", "url": "https://github.com/IQSS/dataverse/pull/7396#discussion_r519022062", "createdAt": "2020-11-06T21:48:11Z", "author": {"login": "pameyer"}, "path": "conf/docker-aio/c8.dockerfile", "diffHunk": "@@ -0,0 +1,82 @@\n+FROM centos:8", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM3NTU5NA=="}, "originalCommit": {"oid": "5c0fb2feb680c502109d79bdf8b53eb5d94ac0e2"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTAyMjkwMg==", "bodyText": "updating prep_it.bash with the corresponding change is probably also helpful.", "url": "https://github.com/IQSS/dataverse/pull/7396#discussion_r519022902", "createdAt": "2020-11-06T21:50:14Z", "author": {"login": "pameyer"}, "path": "conf/docker-aio/readme.md", "diffHunk": "@@ -27,7 +27,7 @@ Also usable for normal development and system evaluation; not intended for produ\n #### Setup\n \n - `cd conf/docker-aio`, and run `./1prep.sh` to copy files for integration test data into docker build context; `1prep.sh` will also build the war file and installation zip file\n-- build the docker image: `docker build -t dv0 -f c7.dockerfile .`\n+- build the docker image: `docker build -t dv0 -f c8.dockerfile .`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c0fb2feb680c502109d79bdf8b53eb5d94ac0e2"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28d38c3a11ef41f738369100c9dc34afc69e77b9", "author": {"user": null}, "url": "https://github.com/IQSS/dataverse/commit/28d38c3a11ef41f738369100c9dc34afc69e77b9", "committedDate": "2020-11-09T18:44:32Z", "message": "#7394 remove conf/openshift/openshift.json per @pdurbin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f90961db7a1c16fb3562c97552b94463ce9c57d", "author": {"user": {"login": "pdurbin", "name": "Philip Durbin"}}, "url": "https://github.com/IQSS/dataverse/commit/7f90961db7a1c16fb3562c97552b94463ce9c57d", "committedDate": "2020-11-09T20:45:13Z", "message": "use centos 8 image #7394"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7fc7c29fae8f9370769fbd2b9c1b598d21f3800", "author": {"user": {"login": "pdurbin", "name": "Philip Durbin"}}, "url": "https://github.com/IQSS/dataverse/commit/c7fc7c29fae8f9370769fbd2b9c1b598d21f3800", "committedDate": "2020-11-09T20:47:22Z", "message": "remove old centos 7 docker-aio file #7394\n\nWe upgraded to centos 8"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5814985cc250097e041cf7dfa9154f926ad9b89e", "author": {"user": {"login": "pdurbin", "name": "Philip Durbin"}}, "url": "https://github.com/IQSS/dataverse/commit/5814985cc250097e041cf7dfa9154f926ad9b89e", "committedDate": "2020-11-09T20:49:40Z", "message": "revert docker-dcm stuff to pre centos 8 #7394\n\nWe don't want to test all this stuff at this time. Just put it back to\nhow it was."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "444bff044a51f1eefee037285f25fd5a1e21a224", "author": {"user": {"login": "donsizemore", "name": "Don Sizemore"}}, "url": "https://github.com/IQSS/dataverse/commit/444bff044a51f1eefee037285f25fd5a1e21a224", "committedDate": "2020-11-10T00:20:02Z", "message": "Merge pull request #58 from IQSS/7394-centos8\n\n7394 centos8"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3Mjg4NTYx", "url": "https://github.com/IQSS/dataverse/pull/7396#pullrequestreview-527288561", "createdAt": "2020-11-10T14:58:08Z", "commit": {"oid": "444bff044a51f1eefee037285f25fd5a1e21a224"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 674, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}