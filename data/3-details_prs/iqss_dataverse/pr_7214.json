{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcxNjAwMjUw", "number": 7214, "title": "5050 Parse all dc identifier elements and allow identifiers that don'\u2026", "bodyText": "\u2026t have \"doi\" or \"hdl\" in them.\nWhat this PR does / why we need it: Allows dataverse to harvest more datasets\nWhich issue(s) this PR closes: 5050\nCloses #5050\nSpecial notes for your reviewer: Small change, big impact!\nSuggestions on how to test this: Harvest the server https://api.figshare.com/v2/oai with prefix oai_dc and set portal_895. Without the fix they would all fail but now they're all harvested.\nDoes this PR introduce a user interface change? If mockups are available, please link/include them here: No\nIs there a release notes update needed for this change?: Yes\nAdditional documentation:", "createdAt": "2020-08-21T12:20:16Z", "url": "https://github.com/IQSS/dataverse/pull/7214", "merged": true, "mergeCommit": {"oid": "4a56ab0b1bf1ec4d945cb6340cd801b663be5563"}, "closed": true, "closedAt": "2020-09-30T15:35:11Z", "author": {"login": "JingMa87"}, "timelineItems": {"totalCount": 81, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcWqfBngH2gAyNDcxNjAwMjUwOmEwMTgwNTVmMmVkOTgxYjYzNDE3NWExMzVmNjc2ZjBkM2VjNWNjMGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNweboAFqTQ5ODk4NTUyNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a018055f2ed981b634175a135f676f0d3ec5cc0e", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/a018055f2ed981b634175a135f676f0d3ec5cc0e", "committedDate": "2020-04-11T19:02:19Z", "message": "cleanup - add explicit type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d31443171b37d72976a1dcf2b7263c319aca1815", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/d31443171b37d72976a1dcf2b7263c319aca1815", "committedDate": "2020-04-11T19:03:47Z", "message": "add multipart upload api calls and add to S3StorageIO class\n\nalso refactor S3StorageIO to re-use single client per store, use more\nstatic methods"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dbbd56984c613db967b837936766dae15a811a17", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/dbbd56984c613db967b837936766dae15a811a17", "committedDate": "2020-04-17T15:58:24Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6763"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61448a8d6a04a3a017a67fa19d2861c9b0d394fa", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/61448a8d6a04a3a017a67fa19d2861c9b0d394fa", "committedDate": "2020-04-17T16:04:16Z", "message": "update error msgs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd7e34544cfbaeb1204ca65d5f01a34ecb85517c", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/cd7e34544cfbaeb1204ca65d5f01a34ecb85517c", "committedDate": "2020-04-17T20:52:47Z", "message": "try test update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b88b393bdedfc24f81e0925895f5fa36a01e33d", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/8b88b393bdedfc24f81e0925895f5fa36a01e33d", "committedDate": "2020-04-17T22:10:54Z", "message": "Restore driverId check in getMainKey to pass tests\n\nNominally useful if code ever changes the storageIdentifier of the\ndvObject after the S3AccessIO instance is created, but real code\nshouldn't do that :-)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b91c07c692f8ced2fd99320edb8b0ff16a9519c", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/7b91c07c692f8ced2fd99320edb8b0ff16a9519c", "committedDate": "2020-04-24T15:46:49Z", "message": "remove unused imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b0388490bc7b265c00b0243e19c0d80bf10afe6", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/6b0388490bc7b265c00b0243e19c0d80bf10afe6", "committedDate": "2020-04-24T15:46:55Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6763"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e707519a1362707c6337de8c8f0859f41f4a1c0b", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/e707519a1362707c6337de8c8f0859f41f4a1c0b", "committedDate": "2020-04-24T18:47:09Z", "message": "report the exception message when can't access bucket"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dab4af6a255699171de67628ba95b91115426971", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/dab4af6a255699171de67628ba95b91115426971", "committedDate": "2020-04-24T19:40:34Z", "message": "typo on comparison"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d322809485777d92dd3fbbbab0e284bfe97bf996", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/d322809485777d92dd3fbbbab0e284bfe97bf996", "committedDate": "2020-04-24T21:22:20Z", "message": "IQSS/6829 - account for file failures"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ca407ceffd6ba3e2829515b79d6a6d812975ca4", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/6ca407ceffd6ba3e2829515b79d6a6d812975ca4", "committedDate": "2020-04-24T21:42:35Z", "message": "remove ~duplicate code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0557aa374c2ec20fc68c521c6641f821685811a", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/b0557aa374c2ec20fc68c521c6641f821685811a", "committedDate": "2020-04-27T14:18:10Z", "message": "IQSS-6829 - avoid race with 2+ files uploading\n\nand the dataset pid being set multiple times."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "beb419ee143bc974ba2008c013e55b859c2d4535", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/beb419ee143bc974ba2008c013e55b859c2d4535", "committedDate": "2020-04-27T15:47:38Z", "message": "IQSS/6829 - create mode uses DatasetPage - initialize identifier there\n\nfor directUpload case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8400c2071ab9f4f6f2a273d037b0c90752483ea8", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/8400c2071ab9f4f6f2a273d037b0c90752483ea8", "committedDate": "2020-04-27T16:21:13Z", "message": "move directUploadEnabled to systemconfig\n\nused in DatasetPage and editFilesFragment.xhtml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f9baede0017b15ce5dd3d0ae153b8d69c6b3722", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/6f9baede0017b15ce5dd3d0ae153b8d69c6b3722", "committedDate": "2020-04-27T17:02:34Z", "message": "typo/fix method calls"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f841d592cdcf8ee7e6593c117ac7266c51615772", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/f841d592cdcf8ee7e6593c117ac7266c51615772", "committedDate": "2020-04-27T19:31:17Z", "message": "set minimum part size"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f844914884da53c4aeeebcae0611a8a4c47e2b2f", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/f844914884da53c4aeeebcae0611a8a4c47e2b2f", "committedDate": "2020-04-27T19:49:46Z", "message": "add convenience urls"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db00c6f0371b5f2abd7cadb54f2c64380e2be786", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/db00c6f0371b5f2abd7cadb54f2c64380e2be786", "committedDate": "2020-04-29T19:22:58Z", "message": "add dv_status=temp tag in multipart uploads"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f473fabc0653faab89688df0bccad8aa87761d3f", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/f473fabc0653faab89688df0bccad8aa87761d3f", "committedDate": "2020-04-30T21:23:53Z", "message": "return no content for delete call"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "088efb0b022d21cf347c38fe6529426121995226", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/088efb0b022d21cf347c38fe6529426121995226", "committedDate": "2020-04-30T21:24:53Z", "message": "add request for upload in parts method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be27169948b1738e76f8ba436eb2130f862eb59d", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/be27169948b1738e76f8ba436eb2130f862eb59d", "committedDate": "2020-05-01T18:43:06Z", "message": "handle net:ERR_NETWORK_CHANGED errors w/o 'undefined' error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef6ef134b2d93ab6d25e1bf9d67da4fe40d3b100", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/ef6ef134b2d93ab6d25e1bf9d67da4fe40d3b100", "committedDate": "2020-05-01T18:43:24Z", "message": "remove draft code from other branch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a666a7b98af3961a299249c306fb5bb565a2b574", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/a666a7b98af3961a299249c306fb5bb565a2b574", "committedDate": "2020-05-01T18:43:30Z", "message": "handle dataverse change - keep GlobalId in direct upload case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4bb1b660141f28353994146342b636b496b3e53f", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/4bb1b660141f28353994146342b636b496b3e53f", "committedDate": "2020-05-01T21:09:25Z", "message": "IQSS/6881 delete temp files when cancelling dataset create"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45245b3ba7ed918a0d252266337136e55c3ece08", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/45245b3ba7ed918a0d252266337136e55c3ece08", "committedDate": "2020-05-04T15:28:00Z", "message": "IQSS 6881 cleanup temp files on cancel when creating dataset"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2d7207919d1ff48c5e671c400cd635e47c3ac62", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/e2d7207919d1ff48c5e671c400cd635e47c3ac62", "committedDate": "2020-05-04T21:21:29Z", "message": "get/set for uploadInProgress"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56bd6a7f391d2b798f3452e15024299625403b13", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/56bd6a7f391d2b798f3452e15024299625403b13", "committedDate": "2020-05-04T21:33:34Z", "message": "actually initialize uploadInProgress"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40f2cd123fdbc557da08b51eb66584dbad496355", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/40f2cd123fdbc557da08b51eb66584dbad496355", "committedDate": "2020-05-05T20:50:58Z", "message": "limit processing on cancelCreate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc3f13072bf89790d8194a186d886294c131c104", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/dc3f13072bf89790d8194a186d886294c131c104", "committedDate": "2020-05-06T19:13:04Z", "message": "catch all files in direct upload cancel + debug statements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d515116e2c4084a1fe9b88f2312ab1895736ca9", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/7d515116e2c4084a1fe9b88f2312ab1895736ca9", "committedDate": "2020-05-06T20:46:47Z", "message": "split cancel into two parts, allow stopping reports in edit mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ee39a958d0b186f72692bcfb95361b14c9fbcbf", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/0ee39a958d0b186f72692bcfb95361b14c9fbcbf", "committedDate": "2020-05-06T21:25:37Z", "message": "use redirect"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ccd4b920bd7ea7dd85d923f1bf2752ef065b234", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/7ccd4b920bd7ea7dd85d923f1bf2752ef065b234", "committedDate": "2020-05-06T22:16:07Z", "message": "fix remotecommand and disable buttons if waiting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4974cdfe51fbbd6ad1eb6ca8a7b2787dcdb3b31c", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/4974cdfe51fbbd6ad1eb6ca8a7b2787dcdb3b31c", "committedDate": "2020-05-11T18:41:49Z", "message": "don't bubble click by returning false\n\notherwise page refreshes before the remoteCommand finishes and returns\nto the dataverse page"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2737f43def4459d6762c52aeba7521df1b0bb0bb", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/2737f43def4459d6762c52aeba7521df1b0bb0bb", "committedDate": "2020-05-11T18:42:17Z", "message": "one handleExternalUpload call at a time"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2b47ec53deaf9f536249c718ca8e2976f2ddb59", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/a2b47ec53deaf9f536249c718ca8e2976f2ddb59", "committedDate": "2020-05-11T18:55:53Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6763\n\nConflicts:\n\tsrc/main/webapp/resources/js/fileupload.js"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1963f09f7e8a7924fc58b6d76cc2d0c0761aa741", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/1963f09f7e8a7924fc58b6d76cc2d0c0761aa741", "committedDate": "2020-05-22T19:57:55Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6763\n\nConflicts:\n\tsrc/main/java/edu/harvard/iq/dataverse/DatasetPage.java\n\tsrc/main/webapp/resources/js/fileupload.js"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dbecab9e3713258461a30ae4d0641515c21189b7", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/dbecab9e3713258461a30ae4d0641515c21189b7", "committedDate": "2020-05-22T22:20:13Z", "message": "add a delay for tiny files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1993b288bd83ea140aa3c7d3abdc10e1f2394ab", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/e1993b288bd83ea140aa3c7d3abdc10e1f2394ab", "committedDate": "2020-06-05T16:17:07Z", "message": "more changes to fix concurrency issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1c2c92cf7c316caad311b079d99a6bc28d28aa0", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/a1c2c92cf7c316caad311b079d99a6bc28d28aa0", "committedDate": "2020-06-05T17:41:14Z", "message": "bug - requests for URL weren't queued after initial 4"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3b775b84dd11b7632921ba9ca9958bb3bce5a13", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/a3b775b84dd11b7632921ba9ca9958bb3bce5a13", "committedDate": "2020-06-05T19:17:40Z", "message": "update version console entry"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4f71783bc81a2d83e1b012bf502a33a742be80e", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/b4f71783bc81a2d83e1b012bf502a33a742be80e", "committedDate": "2020-06-05T20:01:47Z", "message": "make it easier to adjust delay"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a546d9471f54420393936126d91a5cc5e45864a", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/0a546d9471f54420393936126d91a5cc5e45864a", "committedDate": "2020-06-05T20:49:34Z", "message": "decrease to 100 ms delay\n\nkeeping the cancel delay at 1 second - any queued uploads need to\nfinish."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c438219df0c7b679d42ecfb05069c150783c0374", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/c438219df0c7b679d42ecfb05069c150783c0374", "committedDate": "2020-06-05T20:49:40Z", "message": "correct save button selector for disbale during cancel"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6bae2645f5f78436ab9140a44e28db3db966ede0", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/6bae2645f5f78436ab9140a44e28db3db966ede0", "committedDate": "2020-06-05T20:49:59Z", "message": "fix selector"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37ab57a9b8e5a6055d2d9724ba4731849d9f03c0", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/37ab57a9b8e5a6055d2d9724ba4731849d9f03c0", "committedDate": "2020-06-05T20:50:53Z", "message": "update console version info"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d6d2b04a041836064c961e8a54357f9661a43ca", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/6d6d2b04a041836064c961e8a54357f9661a43ca", "committedDate": "2020-06-15T20:50:17Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6763\n\nConflicts:\n\tsrc/main/java/edu/harvard/iq/dataverse/api/Datasets.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4ae32254979ffab2ae6f7ffd657cca1a872219c", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/d4ae32254979ffab2ae6f7ffd657cca1a872219c", "committedDate": "2020-06-17T19:17:59Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6763"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "050b59d677d4b1da6a77f0989f5cf48104b0ce9c", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/050b59d677d4b1da6a77f0989f5cf48104b0ce9c", "committedDate": "2020-06-17T19:20:07Z", "message": "removing whitespace changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66d84c12537fc207cdc3cd7bacabc519bdb53933", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/66d84c12537fc207cdc3cd7bacabc519bdb53933", "committedDate": "2020-06-17T19:45:56Z", "message": "removing mp-upload-specific changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a792363b75982543e6d80a8fabc949f2d4277230", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/a792363b75982543e6d80a8fabc949f2d4277230", "committedDate": "2020-08-10T18:46:56Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6993"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "319b3940b4da0026e0d6f4b55437b7582491365f", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/319b3940b4da0026e0d6f4b55437b7582491365f", "committedDate": "2020-08-11T21:52:17Z", "message": "fix for #7184 spaces changed in s3 direct download"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76c0b3c00e211e83f7c0e2d035fc1eb52066c4c3", "author": {"user": {"login": "rtreacy", "name": "Bob Treacy"}}, "url": "https://github.com/IQSS/dataverse/commit/76c0b3c00e211e83f7c0e2d035fc1eb52066c4c3", "committedDate": "2020-08-20T16:48:16Z", "message": "The version pf hibernate-validator that we were using, 5.0.3.Final was reported to allow an attacker to escalate permissions and access private values and create invalid instances - see CVE-2017-7536. It is reported to be fixed in versions 5.2.5.Final and greater.\n\nThe upgraded library had changes to the api for constructing ConstaintValidatorContextImpl, used in URLValidatorTest.java. In investigating the changes, it was found that there were further changes to the api in recent versions and it was decided to adapt the code to the latest changes and use the latest available stable hibernate-validator library - 6.1.5.Final.\n\nIt was also necessary to add a dependency to javax.el due to changes in the library starting with version 5.3.1.Final and later."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "438a7d0b4a317abae32d0116beed5d377c8b1b6d", "author": {"user": {"login": "rtreacy", "name": "Bob Treacy"}}, "url": "https://github.com/IQSS/dataverse/commit/438a7d0b4a317abae32d0116beed5d377c8b1b6d", "committedDate": "2020-08-20T17:49:41Z", "message": "code cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab33496e6bc3b62c0de83e94a011dbd6a48142c1", "author": {"user": {"login": "rtreacy", "name": "Bob Treacy"}}, "url": "https://github.com/IQSS/dataverse/commit/ab33496e6bc3b62c0de83e94a011dbd6a48142c1", "committedDate": "2020-08-20T17:53:40Z", "message": "sorry, one more line of commented code removed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0caf09ef7a970547cfc826209f755936ef5411c9", "author": {"user": {"login": "djbrooke", "name": "Danny Brooke"}}, "url": "https://github.com/IQSS/dataverse/commit/0caf09ef7a970547cfc826209f755936ef5411c9", "committedDate": "2020-08-20T17:56:20Z", "message": "+ note"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7638c19cab491216227f667fca3a872fdf54af5", "author": {"user": {"login": "djbrooke", "name": "Danny Brooke"}}, "url": "https://github.com/IQSS/dataverse/commit/e7638c19cab491216227f667fca3a872fdf54af5", "committedDate": "2020-08-20T17:56:44Z", "message": "adding character"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10c2fb7c23442bd4ad368602f3e13ff3dedc6186", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/10c2fb7c23442bd4ad368602f3e13ff3dedc6186", "committedDate": "2020-08-20T19:12:42Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6993"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df442c5c4ccd84a02169adda11f0ebda52833833", "author": {"user": {"login": "rtreacy", "name": "Bob Treacy"}}, "url": "https://github.com/IQSS/dataverse/commit/df442c5c4ccd84a02169adda11f0ebda52833833", "committedDate": "2020-08-20T20:31:45Z", "message": "Change ek dependency to jakarta.el provided by Payara"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7fcdfa9a1891fb73c58467c5aaa6d09a369dd24", "author": {"user": {"login": "rtreacy", "name": "Bob Treacy"}}, "url": "https://github.com/IQSS/dataverse/commit/a7fcdfa9a1891fb73c58467c5aaa6d09a369dd24", "committedDate": "2020-08-20T21:50:13Z", "message": "Use hibernate-validator provided with Payara (still a 6.1.x -6.1.2 specifically at this point)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2caf3021d0cacd22e495df56acdef510ca420512", "author": {"user": {"login": "JingMa87", "name": "Jing Ma"}}, "url": "https://github.com/IQSS/dataverse/commit/2caf3021d0cacd22e495df56acdef510ca420512", "committedDate": "2020-08-21T12:14:12Z", "message": "5050 Parse all dc identifier elements and allow identifiers that don't have \"doi\" or \"hdl\" in them."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a547a690bdb1f3cd2ea6beee56778d482aeae89", "author": {"user": null}, "url": "https://github.com/IQSS/dataverse/commit/5a547a690bdb1f3cd2ea6beee56778d482aeae89", "committedDate": "2020-08-21T15:05:53Z", "message": "#7215 correct dataciterestapiurlstrings, add mdcbaseurlstring deletion example"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cdbb7f2343296197f5609623586cebbdaa918f72", "author": {"user": {"login": "kcondon", "name": "Kevin Condon"}}, "url": "https://github.com/IQSS/dataverse/commit/cdbb7f2343296197f5609623586cebbdaa918f72", "committedDate": "2020-08-24T18:39:46Z", "message": "Merge pull request #6994 from GlobalDataverseCommunityConsortium/IQSS/6993\n\nIQSS/6993-use-single-AWS-client-per-store"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37433c8a31aa712b82d68de53801d4f959ce4d92", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/37433c8a31aa712b82d68de53801d4f959ce4d92", "committedDate": "2020-08-24T19:20:40Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/7184-encode_space_in_filename-correctly"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb38e66b0d8dda921b7f79b3e0446a373be6f3d3", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/fb38e66b0d8dda921b7f79b3e0446a373be6f3d3", "committedDate": "2020-08-24T19:24:21Z", "message": "Merge remote-tracking branch 'origin/IQSS/7184-encode_space_in_filename-correctly' into IQSS/7184-encode_space_in_filename-correctly"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e1fe74bf273e736be8c6b0650d2b95acbca1f2d", "author": {"user": {"login": "kcondon", "name": "Kevin Condon"}}, "url": "https://github.com/IQSS/dataverse/commit/6e1fe74bf273e736be8c6b0650d2b95acbca1f2d", "committedDate": "2020-08-24T20:13:35Z", "message": "Merge pull request #7186 from QualitativeDataRepository/IQSS/7184-encode_space_in_filename-correctly\n\nfix for #7184 spaces changed in s3 direct download"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d1388081f57f7fafa67ac50eef8b3ba1088e9db", "author": {"user": {"login": "kcondon", "name": "Kevin Condon"}}, "url": "https://github.com/IQSS/dataverse/commit/1d1388081f57f7fafa67ac50eef8b3ba1088e9db", "committedDate": "2020-08-25T13:32:48Z", "message": "Merge pull request #7216 from OdumInstitute/develop\n\ncorrect dataciterestapiurlstrings, add mdcbaseurlstring deletion example"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1dd243115af5e04eba4d3a4751fa42d20bcc7064", "author": {"user": {"login": "rtreacy", "name": "Bob Treacy"}}, "url": "https://github.com/IQSS/dataverse/commit/1dd243115af5e04eba4d3a4751fa42d20bcc7064", "committedDate": "2020-08-25T21:52:16Z", "message": "changed hibernat-validator scope from provided to compile, because we were getting NoClassDefFoundError: org/hibernate/validator/internal/util/CollectionHelper at runtime while creating an account"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f3051a93715a1780ea9c7a2e0a6ffcf3381ae6b", "author": {"user": {"login": "rtreacy", "name": "Bob Treacy"}}, "url": "https://github.com/IQSS/dataverse/commit/7f3051a93715a1780ea9c7a2e0a6ffcf3381ae6b", "committedDate": "2020-08-26T13:44:35Z", "message": "Remove compile scope as unneccessary because it is the default scope"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e3b6acb5b13ce7a11d863125eb6228f0f2c99e6", "author": {"user": {"login": "rtreacy", "name": "Bob Treacy"}}, "url": "https://github.com/IQSS/dataverse/commit/5e3b6acb5b13ce7a11d863125eb6228f0f2c99e6", "committedDate": "2020-08-26T14:01:04Z", "message": "Last commit included experimental removal of jakarta.el, which does not work"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "796e612577f9cfeb05f6a6aeab03346b6b788394", "author": {"user": {"login": "kcondon", "name": "Kevin Condon"}}, "url": "https://github.com/IQSS/dataverse/commit/796e612577f9cfeb05f6a6aeab03346b6b788394", "committedDate": "2020-08-26T14:18:20Z", "message": "Merge pull request #7222 from IQSS/security18-hibernate-validator-vulnerability\n\nSecurity18 hibernate validator vulnerability"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89cb145d90aba6509a11686d99fed6ef1b8bee83", "author": {"user": {"login": "JingMa87", "name": "Jing Ma"}}, "url": "https://github.com/IQSS/dataverse/commit/89cb145d90aba6509a11686d99fed6ef1b8bee83", "committedDate": "2020-08-26T21:14:47Z", "message": "Use handle library to resolve handle."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c84ca49543fec04ca8e7958b6d4eb2f63aef071e", "author": {"user": {"login": "JingMa87", "name": "Jing Ma"}}, "url": "https://github.com/IQSS/dataverse/commit/c84ca49543fec04ca8e7958b6d4eb2f63aef071e", "committedDate": "2020-08-30T14:15:27Z", "message": "5050 Parse all dc identifier elements and allow identifiers that don't have \"doi\" or \"hdl\" in them."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab1375b5e7e943480f51abe4e53937786d0f546d", "author": {"user": {"login": "JingMa87", "name": "Jing Ma"}}, "url": "https://github.com/IQSS/dataverse/commit/ab1375b5e7e943480f51abe4e53937786d0f546d", "committedDate": "2020-08-30T14:15:27Z", "message": "Use handle library to resolve handle."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3ODU3Njc5", "url": "https://github.com/IQSS/dataverse/pull/7214#pullrequestreview-497857679", "createdAt": "2020-09-28T20:07:34Z", "commit": {"oid": "89cb145d90aba6509a11686d99fed6ef1b8bee83"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQyMDowNzozNFrOHZNzYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQyMDowNzozNFrOHZNzYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjIwMjU5Mw==", "bodyText": "Should this be if (otherId.startsWith(GlobalId.DOI_PROTOCOL) ... instead?\nOr maybe even if (otherId.toLowerCase().startsWith(GlobalId.DOI_PROTOCOL) ...?", "url": "https://github.com/IQSS/dataverse/pull/7214#discussion_r496202593", "createdAt": "2020-09-28T20:07:34Z", "author": {"login": "landreev"}, "path": "src/main/java/edu/harvard/iq/dataverse/api/imports/ImportGenericServiceBean.java", "diffHunk": "@@ -366,27 +368,42 @@ private FieldDTO makeDTO(DatasetFieldType dataverseFieldType, FieldDTO value, St\n     }\n     \n     private String getOtherIdFromDTO(DatasetVersionDTO datasetVersionDTO) {\n+        List<String> otherIds = new ArrayList<>();\n         for (Map.Entry<String, MetadataBlockDTO> entry : datasetVersionDTO.getMetadataBlocks().entrySet()) {\n             String key = entry.getKey();\n             MetadataBlockDTO value = entry.getValue();\n             if (\"citation\".equals(key)) {\n                 for (FieldDTO fieldDTO : value.getFields()) {\n                     if (DatasetFieldConstant.otherId.equals(fieldDTO.getTypeName())) {\n-                        String otherId = \"\";\n                         for (HashSet<FieldDTO> foo : fieldDTO.getMultipleCompound()) {\n                             for (FieldDTO next : foo) {\n                                 if (DatasetFieldConstant.otherIdValue.equals(next.getTypeName())) {\n-                                    otherId =  next.getSinglePrimitive();\n+                                    otherIds.add(next.getSinglePrimitive());\n                                 }\n                             }\n-                            if (!otherId.isEmpty()){\n-                                return otherId;\n-                            }\n                         }\n                     }\n                 }\n             }\n         }\n+        if (!otherIds.isEmpty()) {\n+            // We prefer doi or hdl identifiers like \"doi:10.7910/DVN/1HE30F\"\n+            for (String otherId : otherIds) {\n+                if (otherId.contains(GlobalId.DOI_PROTOCOL) || otherId.contains(GlobalId.HDL_PROTOCOL)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89cb145d90aba6509a11686d99fed6ef1b8bee83"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06554b0e3cfcdddc3d7f7f151cd4f6ab32335174", "author": {"user": {"login": "JingMa87", "name": "Jing Ma"}}, "url": "https://github.com/IQSS/dataverse/commit/06554b0e3cfcdddc3d7f7f151cd4f6ab32335174", "committedDate": "2020-09-28T20:37:00Z", "message": "Make identifier lower case."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d5fd096248ba550fcfccf20bdc796a9cfef3874", "author": {"user": {"login": "JingMa87", "name": "Jing Ma"}}, "url": "https://github.com/IQSS/dataverse/commit/6d5fd096248ba550fcfccf20bdc796a9cfef3874", "committedDate": "2020-09-28T20:41:43Z", "message": "Make identifier lower case."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d0524bac4f7fb44f0cc41c84b1fa3990e4ac331", "author": {"user": {"login": "JingMa87", "name": "Jing Ma"}}, "url": "https://github.com/IQSS/dataverse/commit/3d0524bac4f7fb44f0cc41c84b1fa3990e4ac331", "committedDate": "2020-09-28T20:44:27Z", "message": "Remove unused variable."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20a1a08dc4259c20685fc952d76601754290ab3f", "author": {"user": {"login": "JingMa87", "name": "Jing Ma"}}, "url": "https://github.com/IQSS/dataverse/commit/20a1a08dc4259c20685fc952d76601754290ab3f", "committedDate": "2020-09-29T00:19:51Z", "message": "Change to startsWith() and check for doi and hdl URLs."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23a02521685d1575fd7291030e84e86ee88fd8be", "author": {"user": {"login": "JingMa87", "name": "Jing Ma"}}, "url": "https://github.com/IQSS/dataverse/commit/23a02521685d1575fd7291030e84e86ee88fd8be", "committedDate": "2020-09-29T17:10:57Z", "message": "Remove toLowerCase()."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4OTg1NTI2", "url": "https://github.com/IQSS/dataverse/pull/7214#pullrequestreview-498985526", "createdAt": "2020-09-29T23:06:56Z", "commit": {"oid": "23a02521685d1575fd7291030e84e86ee88fd8be"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 753, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}