{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAwMDcwMzU1", "number": 7319, "title": "5.1.1 Release Notes", "bodyText": "What this PR does / why we need it:\nRelease notes for 5.1.1!\nWhich issue(s) this PR closes:\nCloses #7318\nSpecial notes for your reviewer:\nPlease give special attention to my use of connections/connection pool/threads/streams as I am not an expert in these matters. :)\nSuggestions on how to test this:\nN/A\nDoes this PR introduce a user interface change? If mockups are available, please link/include them here:\nN/A\nIs there a release notes update needed for this change?:\n\ud83d\udc40\nAdditional documentation:", "createdAt": "2020-10-08T17:14:43Z", "url": "https://github.com/IQSS/dataverse/pull/7319", "merged": true, "mergeCommit": {"oid": "8564ff61b5baf47d2a98fe0cc6e827a247b9c8a4"}, "closed": true, "closedAt": "2020-10-08T18:02:02Z", "author": {"login": "djbrooke"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQky9YAH2gAyNTAwMDcwMzU1OjAxYTU5ZmM1MmUyZWZlZGFiNmJlMDYzNzI1MDgyOTU3ZDg0MDA3OGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQlUKYAH2gAyNTAwMDcwMzU1OjQ5YWYxOTczNzg4YjQ3YWE1M2I2OGQwZmU3YzU3NDFkYTQyMDJjNmM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "01a59fc52e2efedab6be063725082957d840078f", "author": {"user": {"login": "djbrooke", "name": "Danny Brooke"}}, "url": "https://github.com/IQSS/dataverse/commit/01a59fc52e2efedab6be063725082957d840078f", "committedDate": "2020-10-08T17:12:16Z", "message": "Adding Release Notes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1MDAyODY5", "url": "https://github.com/IQSS/dataverse/pull/7319#pullrequestreview-505002869", "createdAt": "2020-10-08T17:21:57Z", "commit": {"oid": "01a59fc52e2efedab6be063725082957d840078f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNzoyMTo1N1rOHeotsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNzoyMTo1N1rOHeotsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTg4NjM4Ng==", "bodyText": "Might want to say 'Dataverse 5.1 improved the efficiency of making S3 connections through use of an http connection pool.'\nAnd also add to the last sentence - 'In parallel, this release increases the default pool size from 50 to 256 and adds the ability...;", "url": "https://github.com/IQSS/dataverse/pull/7319#discussion_r501886386", "createdAt": "2020-10-08T17:21:57Z", "author": {"login": "qqmyers"}, "path": "doc/release-notes/5.1.1-release-notes.md", "diffHunk": "@@ -0,0 +1,59 @@\n+# Dataverse 5.1.1\n+\n+This minor release adds important optimizations to installations running on AWS S3. It is recommended that 5.1.1 be used in production instead of 5.1.\n+\n+## Release Highlights\n+\n+### Connection Pool Size Configuration Option, Connection Optimizations\n+\n+This release adds optimizations around closing streams and channels that may hold S3 http connections open and exhaust the connection pool. In parallel, this release adds the ability to increase the size of the connection pool, so a larger pool can be configured if needed.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01a59fc52e2efedab6be063725082957d840078f"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1MDAyOTUx", "url": "https://github.com/IQSS/dataverse/pull/7319#pullrequestreview-505002951", "createdAt": "2020-10-08T17:22:04Z", "commit": {"oid": "01a59fc52e2efedab6be063725082957d840078f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNzoyMjowNFrOHeot5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNzoyMjowNFrOHeot5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTg4NjQzNw==", "bodyText": "This sort of implies that you can skip 5.1 (going straight from 5.0 to 5.1.1) but it looks like there's a metadata block change (and subsequent Solr change and reexport step) in 5.1. I guess we have a couple options:\n\nTell people to upgrade to 5.1 first (more straightforward, I think).\nCopy to the 5.1.1 upgrade instructions information about biomedical.tsv and Solr change and reexport step. (more confusing, I think).", "url": "https://github.com/IQSS/dataverse/pull/7319#discussion_r501886437", "createdAt": "2020-10-08T17:22:04Z", "author": {"login": "pdurbin"}, "path": "doc/release-notes/5.1.1-release-notes.md", "diffHunk": "@@ -0,0 +1,59 @@\n+# Dataverse 5.1.1\n+\n+This minor release adds important optimizations to installations running on AWS S3. It is recommended that 5.1.1 be used in production instead of 5.1.\n+\n+## Release Highlights\n+\n+### Connection Pool Size Configuration Option, Connection Optimizations\n+\n+This release adds optimizations around closing streams and channels that may hold S3 http connections open and exhaust the connection pool. In parallel, this release adds the ability to increase the size of the connection pool, so a larger pool can be configured if needed.\n+\n+## Major Use Cases\n+\n+Newly-supported use cases in this release include:\n+\n+- Administrators of installations using S3 will be able to define the connection pool size, allowing better resource scaling for larger installations (Issue #7309, PR #7313)\n+\n+## Notes for Dataverse Installation Administrators\n+\n+### 5.1.1 vs. 5.1 for Production Use\n+\n+As mentioned above, we encourage 5.1.1 instead of 5.1 for production use.\n+\n+### New JVM Option for Connection Pool Size\n+\n+Larger installations may want to increase the number of open S3 connections allowed (default is 256). For example, to set the value to 4096:\n+\n+``./asadmin create-jvm-options \"-Ddataverse.files.<id>.connection-pool-size=4096\"`\n+\n+The JVM Options section of the [Configuration Guide](http://guides.dataverse.org/en/5.1.1/installation/config/) has more information.\n+\n+## Complete List of Changes\n+\n+For the complete list of code changes in this release, see the [5.1.1 Milestone](https://github.com/IQSS/dataverse/milestone/91?closed=1) in Github.\n+\n+For help with upgrading, installing, or general questions please post to the [Dataverse Google Group](https://groups.google.com/forum/#!forum/dataverse-community) or email support@dataverse.org.\n+\n+## Installation\n+\n+If this is a new installation, please see our [Installation Guide](http://guides.dataverse.org/en/5.1.1/installation/)\n+\n+## Upgrade Instructions\n+\n+0. These instructions assume that you've already successfully upgraded from Dataverse 4.x to  Dataverse 5 following the instructions in the [Dataverse 5 Release Notes](https://github.com/IQSS/dataverse/releases/tag/v5.0).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01a59fc52e2efedab6be063725082957d840078f"}, "originalPosition": 43}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1MDAzNDMy", "url": "https://github.com/IQSS/dataverse/pull/7319#pullrequestreview-505003432", "createdAt": "2020-10-08T17:22:41Z", "commit": {"oid": "01a59fc52e2efedab6be063725082957d840078f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNzoyMjo0MlrOHeovTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNzoyMjo0MlrOHeovTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTg4Njc5OQ==", "bodyText": "'scaling improvements' instead of 'optimizations'?", "url": "https://github.com/IQSS/dataverse/pull/7319#discussion_r501886799", "createdAt": "2020-10-08T17:22:42Z", "author": {"login": "qqmyers"}, "path": "doc/release-notes/5.1.1-release-notes.md", "diffHunk": "@@ -0,0 +1,59 @@\n+# Dataverse 5.1.1\n+\n+This minor release adds important optimizations to installations running on AWS S3. It is recommended that 5.1.1 be used in production instead of 5.1.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01a59fc52e2efedab6be063725082957d840078f"}, "originalPosition": 3}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d61b5933a2a8206695e72668d132a0a36c2f7a3e", "author": {"user": {"login": "djbrooke", "name": "Danny Brooke"}}, "url": "https://github.com/IQSS/dataverse/commit/d61b5933a2a8206695e72668d132a0a36c2f7a3e", "committedDate": "2020-10-08T17:45:01Z", "message": "code review suggestions part 1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "155dfb6030f4b8bd85ea17e9c8b98cc303038968", "author": {"user": {"login": "djbrooke", "name": "Danny Brooke"}}, "url": "https://github.com/IQSS/dataverse/commit/155dfb6030f4b8bd85ea17e9c8b98cc303038968", "committedDate": "2020-10-08T17:47:31Z", "message": "code review feedback part 2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49af1973788b47aa53b68d0fe7c5741da4202c6c", "author": {"user": {"login": "djbrooke", "name": "Danny Brooke"}}, "url": "https://github.com/IQSS/dataverse/commit/49af1973788b47aa53b68d0fe7c5741da4202c6c", "committedDate": "2020-10-08T17:48:32Z", "message": "code review feedback part 3"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 787, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}