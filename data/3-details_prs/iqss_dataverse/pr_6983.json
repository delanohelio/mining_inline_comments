{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0NTQ0NTcx", "number": 6983, "title": "allow newer java versions (LTS and current), correct interactive logic", "bodyText": "What this PR does / why we need it:\nIn testing/using dataverse-ansible, @pallinger correctly pointed out that 1) install.py requires openjdk 1.8, and 2) somehow when openjdk-1.8.0 is specified install.py carries on in ansible without complaint, but when openjdk-11 is specified it hangs waiting for a password, when --noninteractive is passed.\nThis PR modifies install.py to allow OpenJDK 1.8 (long-term RedHat support), 11 (OpenJDK LTS) and 14 (current OpenJDK, not recommended), and corrects the noninteractive password logic per @landreev\nWhich issue(s) this PR closes:\nCloses #6982\nSpecial notes for your reviewer: none come to mind\nSuggestions on how to test this: re-run install.py with and without --noninteractive, while openjdks 1.8.0, 11 and maybe 14 are set as default\nDoes this PR introduce a user interface change? If mockups are available, please link/include them here: no\nIs there a release notes update needed for this change?: no\nAdditional documentation: none.\nThis can definitely wait until after the DCM.", "createdAt": "2020-06-15T13:34:22Z", "url": "https://github.com/IQSS/dataverse/pull/6983", "merged": true, "mergeCommit": {"oid": "95510a388fe08b75bc187e86c376693ad525bb0b"}, "closed": true, "closedAt": "2020-07-01T18:37:17Z", "author": {"login": "donsizemore"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqpXG9gH2gAyNDM0NTQ0NTcxOjllMmM2OTdhMmQ4MzliYjIzZmJjZGQ3ZDU0NTI4NDcwZTA2YmFhOTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwtT66AH2gAyNDM0NTQ0NTcxOjc5YzVkZmE0OTBkN2YxN2MxMTc4M2UzNTcyMTIzZGNlMDM4YjNlNDM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9e2c697a2d839bb23fbcdd7d54528470e06baa92", "author": {"user": null}, "url": "https://github.com/IQSS/dataverse/commit/9e2c697a2d839bb23fbcdd7d54528470e06baa92", "committedDate": "2020-06-12T21:02:15Z", "message": "#6982 allow newer java versions (LTS and current), correct login condition per Leonid"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwODgyODcw", "url": "https://github.com/IQSS/dataverse/pull/6983#pullrequestreview-430882870", "createdAt": "2020-06-15T18:16:17Z", "commit": {"oid": "9e2c697a2d839bb23fbcdd7d54528470e06baa92"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxODoxNjoxOFrOGj9ZKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxODoxNjoxOFrOGj9ZKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM1OTIwOQ==", "bodyText": "Supporting Java 14 feels a little arbitrary. It's not an LTS release. It just happens to be the current release. My concern is that if we really want to support the latest release of Java, we're going to have to edit this line every six months. I'd be happier with just putting the next LTS release in there, Java 17, which is due out September 2021. Or we could remove Java 14.\nHere's a table from Wikipedia that shows all the recent Java releases:", "url": "https://github.com/IQSS/dataverse/pull/6983#discussion_r440359209", "createdAt": "2020-06-15T18:16:18Z", "author": {"login": "pdurbin"}, "path": "scripts/installer/install.py", "diffHunk": "@@ -269,8 +269,8 @@\n    # 1d. check java version\n    java_version = subprocess.check_output([\"java\", \"-version\"], stderr=subprocess.STDOUT).decode()\n    print(\"Found java version \"+java_version)\n-   if not re.search(\"1.8\", java_version):\n-      sys.exit(\"Dataverse requires Java 1.8. Please install it, or make sure it's in your PATH, and try again\")\n+   if not re.search('(1.8|11|14)', java_version):\n+      sys.exit(\"Dataverse requires Java 1.8, 11 or 14. Please make sure it's in your PATH, and try again.\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e2c697a2d839bb23fbcdd7d54528470e06baa92"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwOTI4MDUz", "url": "https://github.com/IQSS/dataverse/pull/6983#pullrequestreview-430928053", "createdAt": "2020-06-15T19:23:29Z", "commit": {"oid": "9e2c697a2d839bb23fbcdd7d54528470e06baa92"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxOToyMzoyOVrOGj_lkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxOToyMzoyOVrOGj_lkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM5NTE1NQ==", "bodyText": "@donsizemore we talked about this a bit in Slack. Can you please remove Java 14 and only support 8 and 11? Thanks!", "url": "https://github.com/IQSS/dataverse/pull/6983#discussion_r440395155", "createdAt": "2020-06-15T19:23:29Z", "author": {"login": "pdurbin"}, "path": "scripts/installer/install.py", "diffHunk": "@@ -269,8 +269,8 @@\n    # 1d. check java version\n    java_version = subprocess.check_output([\"java\", \"-version\"], stderr=subprocess.STDOUT).decode()\n    print(\"Found java version \"+java_version)\n-   if not re.search(\"1.8\", java_version):\n-      sys.exit(\"Dataverse requires Java 1.8. Please install it, or make sure it's in your PATH, and try again\")\n+   if not re.search('(1.8|11|14)', java_version):\n+      sys.exit(\"Dataverse requires Java 1.8, 11 or 14. Please make sure it's in your PATH, and try again.\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM1OTIwOQ=="}, "originalCommit": {"oid": "9e2c697a2d839bb23fbcdd7d54528470e06baa92"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8208692081be69bd0438ea50545d78c9f50abb5", "author": {"user": null}, "url": "https://github.com/IQSS/dataverse/commit/a8208692081be69bd0438ea50545d78c9f50abb5", "committedDate": "2020-06-15T19:44:36Z", "message": "#6982 stick to LTS OpenJDK releases. next one will be 17."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwOTcwNzAx", "url": "https://github.com/IQSS/dataverse/pull/6983#pullrequestreview-430970701", "createdAt": "2020-06-15T20:30:42Z", "commit": {"oid": "a8208692081be69bd0438ea50545d78c9f50abb5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79c5dfa490d7f17c11783e3572123dce038b3e43", "author": {"user": null}, "url": "https://github.com/IQSS/dataverse/commit/79c5dfa490d7f17c11783e3572123dce038b3e43", "committedDate": "2020-07-01T17:01:56Z", "message": "Merge remote-tracking branch 'upstream/develop' into 6982_install_py_java_check"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 853, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}