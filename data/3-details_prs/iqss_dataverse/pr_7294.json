{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk3OTkwMzYw", "number": 7294, "title": "Update \"change dataset citation date\" curl examples", "bodyText": "Changes the curl examples for \"Set Citation Date Field Type for a Dataset\" and \"Revert Citation Date Field Type to Default for Dataset\" endpoints to use the dataset's persistentId instead of its database ID.\nWhat this PR does / why we need it: A dataset's database ID can be a pain to get for users who just want to use an API endpoint to do something once, like change the year shown in their dataset's citation. This PR changes the curl examples in the API guide for the \"Set Citation Date Field Type for a Dataset\" and \"Revert Citation Date Field Type to Default for Dataset\" endpoints, so that they show how to use the dataset PID instead.\nWhich issue(s) this PR closes:\nCloses #7293\nSpecial notes for your reviewer:\nSuggestions on how to test this: Check out the diff\nDoes this PR introduce a user interface change? If mockups are available, please link/include them here: No\nIs there a release notes update needed for this change?: I don't think so\nAdditional documentation:", "createdAt": "2020-10-05T16:59:02Z", "url": "https://github.com/IQSS/dataverse/pull/7294", "merged": true, "mergeCommit": {"oid": "fb772d1dfbe78c7b96c88dbafa6218f8511f3a15"}, "closed": true, "closedAt": "2020-10-06T14:12:40Z", "author": {"login": "jggautier"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdPmxgdAH2gAyNDk3OTkwMzYwOmVmYjQyMDZiYTQzMDM3NmQ4YmNjYjIwZTU3ZGZmODgyNWYyMDk2NmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdPpqF7gFqTUwMjM4OTA4Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "efb4206ba430376d8bccb20e57dff8825f20966f", "author": {"user": {"login": "jggautier", "name": "Julian Gautier"}}, "url": "https://github.com/IQSS/dataverse/commit/efb4206ba430376d8bccb20e57dff8825f20966f", "committedDate": "2020-10-05T16:56:34Z", "message": "Update \"change dataset citation date\" curl examples\n\nChanges the curl examples for \"Set Citation Date Field Type for a Dataset\" and \"Revert Citation Date Field Type to Default for Dataset\" endpoints to use the dataset's persistentId instead of its database ID."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyMjkzODc1", "url": "https://github.com/IQSS/dataverse/pull/7294#pullrequestreview-502293875", "createdAt": "2020-10-05T18:01:05Z", "commit": {"oid": "efb4206ba430376d8bccb20e57dff8825f20966f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxODowMTowNVrOHcn7Rw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxODowMTowNVrOHcn7Rw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc3NjMyNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              curl -H \"X-Dataverse-key: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\" -X PUT https://demo.dataverse.org/api/datasets/:persistentId/citationdate?persistentId=doi:10.5072/FK2/J8SJZB\n          \n          \n            \n              curl -H \"X-Dataverse-key: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\" -X PUT https://demo.dataverse.org/api/datasets/:persistentId/citationdate?persistentId=doi:10.5072/FK2/J8SJZB --data \":dateOfDeposit\"", "url": "https://github.com/IQSS/dataverse/pull/7294#discussion_r499776327", "createdAt": "2020-10-05T18:01:05Z", "author": {"login": "pdurbin"}, "path": "doc/sphinx-guides/source/api/native-api.rst", "diffHunk": "@@ -989,16 +989,16 @@ Note that the dataset citation date field type must be a date field.\n \n   export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n   export SERVER_URL=https://demo.dataverse.org\n-  export ID=24\n+  export PERSISTENT_IDENTIFIER=doi:10.5072/FK2/J8SJZB\n   export DATASET_FIELD_TYPE_NAME=:dateOfDeposit\n \n-  curl -H \"X-Dataverse-key: $API_TOKEN\" -X PUT $SERVER_URL/api/datasets/$ID/citationdate --data \"$DATASET_FIELD_TYPE_NAME\"\n+  curl -H \"X-Dataverse-key: $API_TOKEN\" -X PUT $SERVER_URL/api/datasets/:persistentId/citationdate?persistentId=$PERSISTENT_IDENTIFIER --data \"$DATASET_FIELD_TYPE_NAME\"\n \n The fully expanded example above (without environment variables) looks like this:\n \n .. code-block:: bash\n \n-  curl -H \"X-Dataverse-key: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\" -X PUT https://demo.dataverse.org/api/datasets/24/citationdate --data \":dateOfDeposit\"\n+  curl -H \"X-Dataverse-key: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\" -X PUT https://demo.dataverse.org/api/datasets/:persistentId/citationdate?persistentId=doi:10.5072/FK2/J8SJZB", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "efb4206ba430376d8bccb20e57dff8825f20966f"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72b1ef1de1b2268626c452fab165b3592ff9a309", "author": {"user": {"login": "jggautier", "name": "Julian Gautier"}}, "url": "https://github.com/IQSS/dataverse/commit/72b1ef1de1b2268626c452fab165b3592ff9a309", "committedDate": "2020-10-05T19:13:18Z", "message": "Removed colon, corrected curl examples\n\nRemoved colon from field name \"dateOfDeposit\", and completed the curl examples."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyMzg5MDgy", "url": "https://github.com/IQSS/dataverse/pull/7294#pullrequestreview-502389082", "createdAt": "2020-10-05T20:18:11Z", "commit": {"oid": "72b1ef1de1b2268626c452fab165b3592ff9a309"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 770, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}