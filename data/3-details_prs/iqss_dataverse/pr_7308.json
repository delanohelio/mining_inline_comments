{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5Mjc1MTEy", "number": 7308, "title": "Increase s3 scaling", "bodyText": "What this PR does / why we need it: To fix issues with exhausting the aws client http pool, this increases the pool size and eliminates some redundant checks on the bucket\nWhich issue(s) this PR closes:\nCloses #\nSpecial notes for your reviewer:\nSuggestions on how to test this:\nDoes this PR introduce a user interface change? If mockups are available, please link/include them here:\nIs there a release notes update needed for this change?:\nAdditional documentation:", "createdAt": "2020-10-07T14:02:18Z", "url": "https://github.com/IQSS/dataverse/pull/7308", "merged": true, "mergeCommit": {"oid": "bf1937fc9661bdc2ac03f8b6e5ba1a54c281f44f"}, "closed": true, "closedAt": "2020-10-07T19:24:57Z", "author": {"login": "qqmyers"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQNdVlAH2gAyNDk5Mjc1MTEyOmM3NzM4ZWMzZjYwODBiNWMzMWIyYjkyZjc4OTZiYTlhM2RkZThlNDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQP5AeAH2gAyNDk5Mjc1MTEyOmZkNTE3MmUxYjE4NjIyY2M2MmRlYjRiY2VhYzE4MzcxOGI5YWFhMjk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c7738ec3f6080b5c31b2b92f7896ba9a3dde8e47", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/c7738ec3f6080b5c31b2b92f7896ba9a3dde8e47", "committedDate": "2020-10-07T14:00:50Z", "message": "up the pool size, don't repeatedly check that bucket exists"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1fda2b5441cb46dfe0ec4872b80591b0efa878d9", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/1fda2b5441cb46dfe0ec4872b80591b0efa878d9", "committedDate": "2020-10-07T15:38:10Z", "message": "configurable pool size with 256 default"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0cbf2371885b2ba4e4db40adbd003d8ab5d57124", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/0cbf2371885b2ba4e4db40adbd003d8ab5d57124", "committedDate": "2020-10-07T16:15:17Z", "message": "doc update"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6c39c49a025b787bd72a1680c7b5122acf39d7a", "author": {"user": {"login": "djbrooke", "name": "Danny Brooke"}}, "url": "https://github.com/IQSS/dataverse/commit/d6c39c49a025b787bd72a1680c7b5122acf39d7a", "committedDate": "2020-10-07T16:22:20Z", "message": "add release note for new JVM option"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0MDY2NDA0", "url": "https://github.com/IQSS/dataverse/pull/7308#pullrequestreview-504066404", "createdAt": "2020-10-07T16:35:11Z", "commit": {"oid": "d6c39c49a025b787bd72a1680c7b5122acf39d7a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0MDcxMTc5", "url": "https://github.com/IQSS/dataverse/pull/7308#pullrequestreview-504071179", "createdAt": "2020-10-07T16:41:01Z", "commit": {"oid": "d6c39c49a025b787bd72a1680c7b5122acf39d7a"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNjo0MTowMVrOHd8NaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNjo0MTowMVrOHd8NaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTE1NzIyNA==", "bodyText": "this can be simplified a little:\npublic static Integer getInteger(String nm, int val) where val is the default (so no null check needed)", "url": "https://github.com/IQSS/dataverse/pull/7308#discussion_r501157224", "createdAt": "2020-10-07T16:41:01Z", "author": {"login": "scolapasta"}, "path": "src/main/java/edu/harvard/iq/dataverse/dataaccess/S3AccessIO.java", "diffHunk": "@@ -1043,6 +1043,14 @@ private static AmazonS3 getClient(String driverId) {\n     \t\t// get a standard client, using the standard way of configuration the credentials, etc.\n     \t\tAmazonS3ClientBuilder s3CB = AmazonS3ClientBuilder.standard();\n \n+    \t\tClientConfiguration cc = new ClientConfiguration();\n+    \t\tInteger poolSize = Integer.getInteger(\"dataverse.files.\" + driverId + \".connection-pool-size\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d6c39c49a025b787bd72a1680c7b5122acf39d7a"}, "originalPosition": 44}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd5172e1b18622cc62deb4bceac183718b9aaa29", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/fd5172e1b18622cc62deb4bceac183718b9aaa29", "committedDate": "2020-10-07T16:50:52Z", "message": "simplify per review"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 772, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}