{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAwODQzODA4", "number": 6800, "title": "6799 - Adding support for Testcontainers", "bodyText": "What this PR does / why we need it:\nThis PR introduces basic support for Testcontainers usage in integration tests using JUnit 5, which was mentioned in a few places like #6783 and talked about with @scolapasta and @qqmyers in a VC about #6694.\nFor now this is basically a docs change and a new Maven profile. Very basic, very \"stay.out.of.my.way\". Would be happy to rely on it for any PR on #6694 et al. Actually, integration testing some of authentication providers might be possible that way for the first time.\nWhich issue(s) this PR closes:\nCloses #6799\nSpecial notes for your reviewer:\nNada.\nSuggestions on how to test this:\n\nCompiling and running tests should not fail when the profile isn't active. (Stay out of way)\nRunning the profile via mvn -P tc verify should show 0 tests. (Obviously)\nResulting WAR shall not have anything of these deps included.\n\nDoes this PR introduce a user interface change?:\nNada.\nIs there a release notes update needed for this change?:\nDepends. Maybe. Testcontainers is a huge and great thing, it might be neat to give @bsideup @kiview and @rnorth a shoutout when we really start to use this.\nAdditional documentation:\nProvided in the PR.", "createdAt": "2020-04-08T13:20:07Z", "url": "https://github.com/IQSS/dataverse/pull/6800", "merged": true, "mergeCommit": {"oid": "e5413e25b3616c6b5763a7f924dc9c5ae12154fb"}, "closed": true, "closedAt": "2020-04-09T17:23:13Z", "author": {"login": "poikilotherm"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVkf5jgH2gAyNDAwODQzODA4OmM1NTVjM2VhNjE1MmNhN2NlYzIzNmM0NWQ0ODRhZjFiMGU2ZjQyZmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVtmJOgFqTM5MDI5MTkyNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c555c3ea6152ca7cec236c45d484af1b0e6f42fd", "author": {"user": {"login": "poikilotherm", "name": "Oliver Bertuch"}}, "url": "https://github.com/IQSS/dataverse/commit/c555c3ea6152ca7cec236c45d484af1b0e6f42fd", "committedDate": "2020-04-08T09:29:55Z", "message": "Add initial Testcontainers support in Maven profile 'tc'. #6679"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8fa5776c1aec6e69d6b3f4be7a3dcf21f9b009f9", "author": {"user": {"login": "poikilotherm", "name": "Oliver Bertuch"}}, "url": "https://github.com/IQSS/dataverse/commit/8fa5776c1aec6e69d6b3f4be7a3dcf21f9b009f9", "committedDate": "2020-04-08T13:09:55Z", "message": "Adding a description for Testcontainers to the dev docs, including some minor refactoring to extend the definition of integration tests. #6799"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwMTA5Nzg2", "url": "https://github.com/IQSS/dataverse/pull/6800#pullrequestreview-390109786", "createdAt": "2020-04-08T15:55:43Z", "commit": {"oid": "8fa5776c1aec6e69d6b3f4be7a3dcf21f9b009f9"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNTo1NTo0M1rOGC12AQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNjowMjo0OVrOGC2JZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTYzMjUxMw==", "bodyText": "What's going on here? It's <skip> instead of the <skipUnitTests> seen elsewhere? I think I'd rather see a smaller diff with this line removed. I would also suggest removing the <skipUnitTests>false</skipUnitTests> property above. I'm happy to talk this out in IRC.", "url": "https://github.com/IQSS/dataverse/pull/6800#discussion_r405632513", "createdAt": "2020-04-08T15:55:43Z", "author": {"login": "pdurbin"}, "path": "pom.xml", "diffHunk": "@@ -765,6 +784,7 @@\n                 <configuration>\n                     <!-- testsToExclude come from the profile-->\n                     <excludedGroups>${testsToExclude}</excludedGroups>\n+                    <skip>${skipUnitTests}</skip>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8fa5776c1aec6e69d6b3f4be7a3dcf21f9b009f9"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTYzNzQ3OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Writing and using a Testcontainers Test\n          \n          \n            \n            Writing and Using a Testcontainers Test", "url": "https://github.com/IQSS/dataverse/pull/6800#discussion_r405637479", "createdAt": "2020-04-08T16:02:49Z", "author": {"login": "pdurbin"}, "path": "doc/sphinx-guides/source/developers/testing.rst", "diffHunk": "@@ -226,6 +253,46 @@ Once installed, you may run commands with ``mvn [options] [<goal(s)>] [<phase(s)\n \n To see the full list of tests used by the Docker option mentioned above, see :download:`run-test-suite.sh <../../../../conf/docker-aio/run-test-suite.sh>`.\n \n+\n+Writing and using a Testcontainers Test", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8fa5776c1aec6e69d6b3f4be7a3dcf21f9b009f9"}, "originalPosition": 138}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "249be36e98ffee87346b75b0bf95c1a13db23721", "author": {"user": {"login": "pdurbin", "name": "Philip Durbin"}}, "url": "https://github.com/IQSS/dataverse/commit/249be36e98ffee87346b75b0bf95c1a13db23721", "committedDate": "2020-04-08T19:58:34Z", "message": "Update doc/sphinx-guides/source/developers/testing.rst\r\n\r\ncapitalize a word to match our style"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwMjkxOTI1", "url": "https://github.com/IQSS/dataverse/pull/6800#pullrequestreview-390291925", "createdAt": "2020-04-08T20:05:54Z", "commit": {"oid": "249be36e98ffee87346b75b0bf95c1a13db23721"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 963, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}