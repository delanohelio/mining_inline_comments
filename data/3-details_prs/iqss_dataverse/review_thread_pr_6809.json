{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxOTAzMzU0", "number": 6809, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNjowMjo0MFrODwyajQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNzozMTo0NFrODz11_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyNDg0MjM3OnYy", "diffSide": "RIGHT", "path": "scripts/installer/install.py", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNjowMjo0MFrOGD-jDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMFQxNjowMjo0MFrOGD-jDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjgyMzY5NQ==", "bodyText": "I'm just noting the conversation about this change at #6812 (comment)", "url": "https://github.com/IQSS/dataverse/pull/6809#discussion_r406823695", "createdAt": "2020-04-10T16:02:40Z", "author": {"login": "pdurbin"}, "path": "scripts/installer/install.py", "diffHunk": "@@ -229,12 +230,12 @@\n    print(\"Checking for required components...\")\n    # 1a. check to see if warfile is available\n    warfile = \"dataverse.war\"\n-   warfileVersion = None\n+   warfileVersion = \"\"\n    if not os.path.isfile(warfile):\n       # get dataverse version from pom.xml\n       tree = ET.ElementTree(file='../../pom.xml')\n       for elem in tree.iter(\"*\"):\n-         if elem.tag == '{http://maven.apache.org/POM/4.0.0}version':\n+         if elem.tag == '{https://maven.apache.org/POM/4.0.0}version':", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74d002855c1c13f0bcf2edb935b0dd8619988724"}, "originalPosition": 60}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyOTU5MTU0OnYy", "diffSide": "RIGHT", "path": "conf/jhove/jhove.conf", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QxMzoyNDoyNFrOGEmXVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QxMzozODo0MFrOGEmvcA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQ3NjA1Mw==", "bodyText": "This has been fine under Glassfish4 and is fine under Payara5, but installation-main sez\n\nThe installer places files called jhove.conf and jhoveConfig.xsd into the directory /usr/local/glassfish4/glassfish/domains/domain1/config by default and makes adjustments to the jhove.conf file based on the directory into which you chose to install Glassfish.\n\nWe might a) update that to payara5 and b) I don't see logic in the script to adjust the path in jhove.conf; we might note in the docs that the file would need to be edited?", "url": "https://github.com/IQSS/dataverse/pull/6809#discussion_r407476053", "createdAt": "2020-04-13T13:24:24Z", "author": {"login": "donsizemore"}, "path": "conf/jhove/jhove.conf", "diffHunk": "@@ -3,7 +3,7 @@\n  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xmlns=\"http://hul.harvard.edu/ois/xml/ns/jhove/jhoveConfig\"\n  xsi:schemaLocation=\"http://hul.harvard.edu/ois/xml/ns/jhove/jhoveConfig\n-                     file:///usr/local/glassfish4/glassfish/domains/domain1/config/jhoveConfig.xsd\">\n+                     file:///usr/local/payara5/glassfish/domains/domain1/config/jhoveConfig.xsd\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74d002855c1c13f0bcf2edb935b0dd8619988724"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQ4MjIyNA==", "bodyText": "There's no code in the script that adjusts that path, no. But there's the next best thing in there, a comment:\n# @todo: The JHOVE conf file has an absolute PATH of the JHOVE config schema file (uh, yeah...)\n# - so it may need to be readjusted, if glassfish lives somewhere other than /usr/local/glassfish4\n# (replicate from the old installer)\n\n(it looks like it just slipped through the cracks. will add.)", "url": "https://github.com/IQSS/dataverse/pull/6809#discussion_r407482224", "createdAt": "2020-04-13T13:38:40Z", "author": {"login": "landreev"}, "path": "conf/jhove/jhove.conf", "diffHunk": "@@ -3,7 +3,7 @@\n  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xmlns=\"http://hul.harvard.edu/ois/xml/ns/jhove/jhoveConfig\"\n  xsi:schemaLocation=\"http://hul.harvard.edu/ois/xml/ns/jhove/jhoveConfig\n-                     file:///usr/local/glassfish4/glassfish/domains/domain1/config/jhoveConfig.xsd\">\n+                     file:///usr/local/payara5/glassfish/domains/domain1/config/jhoveConfig.xsd\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzQ3NjA1Mw=="}, "originalCommit": {"oid": "74d002855c1c13f0bcf2edb935b0dd8619988724"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzMDY1MjA1OnYy", "diffSide": "RIGHT", "path": "scripts/installer/default.config", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QxODozOToyNFrOGEwkVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QxOTo0NzowNVrOGEyxnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY0MzIyMA==", "bodyText": "I almost touched doc/sphinx-guides/source/_static/util/default.config as part of the doc issue I'm working on but stopped after seeing the edit above. There are many copies of default.config (screenshot below) and we should figure out where/when to update them.", "url": "https://github.com/IQSS/dataverse/pull/6809#discussion_r407643220", "createdAt": "2020-04-13T18:39:24Z", "author": {"login": "pdurbin"}, "path": "scripts/installer/default.config", "diffHunk": "@@ -1,7 +1,7 @@\n [glassfish]\n HOST_DNS_ADDRESS = localhost\n-GLASSFISH_USER = glassfish\n-GLASSFISH_DIRECTORY = /usr/local/glassfish4\n+GLASSFISH_USER = dataverse\n+GLASSFISH_DIRECTORY = /usr/local/payara5", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74d002855c1c13f0bcf2edb935b0dd8619988724"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY3OTM4OQ==", "bodyText": "Note that these other copies are a different config file. Must be an older style docker config? - the format is different/incompatible with what the python installer is using.\nI should probably rename the new, configparser-style file.", "url": "https://github.com/IQSS/dataverse/pull/6809#discussion_r407679389", "createdAt": "2020-04-13T19:47:05Z", "author": {"login": "landreev"}, "path": "scripts/installer/default.config", "diffHunk": "@@ -1,7 +1,7 @@\n [glassfish]\n HOST_DNS_ADDRESS = localhost\n-GLASSFISH_USER = glassfish\n-GLASSFISH_DIRECTORY = /usr/local/glassfish4\n+GLASSFISH_USER = dataverse\n+GLASSFISH_DIRECTORY = /usr/local/payara5", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY0MzIyMA=="}, "originalCommit": {"oid": "74d002855c1c13f0bcf2edb935b0dd8619988724"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NjE4MDY2OnYy", "diffSide": "RIGHT", "path": "scripts/installer/README_python.txt", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTowODozNVrOGIZSmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNTowODozNVrOGIZSmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ1NjE1Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            In order to link with the PostgresQL libraries, pip will need to\n          \n          \n            \n            In order to link with the PostgreSQL libraries, pip will need to", "url": "https://github.com/IQSS/dataverse/pull/6809#discussion_r411456152", "createdAt": "2020-04-20T15:08:35Z", "author": {"login": "pdurbin"}, "path": "scripts/installer/README_python.txt", "diffHunk": "@@ -16,20 +16,28 @@ backward compatibility, for now, but please use version 2.7 or newer.\n \n \n The extra module psycopg2 (PostgreSQL client) is required. The\n-installer has been tested with psycopg2 version 2.8.4.\n+installer has been tested with psycopg2 version 2.8.4. \n \n-Install the module with \n+We recommend that you try installing the \"binary\", pre-built version of the package:\n \n-pip install psycopg2 \n+pip install psycopg2-binary\n \n-(or \"pip3 install psycopg2\" if you intend to use python3 and it's\n+(or \"pip3 install psycopg2-binary\" if you intend to use python3 and it's\n installed separately on your system)\n \n-In order to build the module, pip will need to execute pg_config,\n-PostgreSQL configuration utility. Make sure it is in your PATH. If you\n-have multiple versions of PostgresQL installed, make sure the version\n-that you will be using with Dataverse is the first on your PATH. For\n-example,\n+If for whatever reason the binary psycopg2 package doesn't run\n+properly on your system, you can try the more complex process of\n+making pip build it from sources:\n+\n+pip3 install psycopg2\n+\n+This will require compilers to be properly installed on your system.\n+(On MacOS, you'll need XCode installed). \n+In order to link with the PostgresQL libraries, pip will need to", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6662d4c1c5c3fe06c7b73dec1ee6947d4a798e09"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NjE4Nzc3OnYy", "diffSide": "RIGHT", "path": "scripts/installer/README_python.txt", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNToxMDowMVrOGIZW9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNToxMDowMVrOGIZW9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQ1NzI2OA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            in your PATH. If you have multiple versions of PostgresQL installed,\n          \n          \n            \n            in your PATH. If you have multiple versions of PostgreSQL installed,", "url": "https://github.com/IQSS/dataverse/pull/6809#discussion_r411457268", "createdAt": "2020-04-20T15:10:01Z", "author": {"login": "pdurbin"}, "path": "scripts/installer/README_python.txt", "diffHunk": "@@ -16,20 +16,28 @@ backward compatibility, for now, but please use version 2.7 or newer.\n \n \n The extra module psycopg2 (PostgreSQL client) is required. The\n-installer has been tested with psycopg2 version 2.8.4.\n+installer has been tested with psycopg2 version 2.8.4. \n \n-Install the module with \n+We recommend that you try installing the \"binary\", pre-built version of the package:\n \n-pip install psycopg2 \n+pip install psycopg2-binary\n \n-(or \"pip3 install psycopg2\" if you intend to use python3 and it's\n+(or \"pip3 install psycopg2-binary\" if you intend to use python3 and it's\n installed separately on your system)\n \n-In order to build the module, pip will need to execute pg_config,\n-PostgreSQL configuration utility. Make sure it is in your PATH. If you\n-have multiple versions of PostgresQL installed, make sure the version\n-that you will be using with Dataverse is the first on your PATH. For\n-example,\n+If for whatever reason the binary psycopg2 package doesn't run\n+properly on your system, you can try the more complex process of\n+making pip build it from sources:\n+\n+pip3 install psycopg2\n+\n+This will require compilers to be properly installed on your system.\n+(On MacOS, you'll need XCode installed). \n+In order to link with the PostgresQL libraries, pip will need to\n+execute pg_config, PostgreSQL configuration utility. Make sure it is\n+in your PATH. If you have multiple versions of PostgresQL installed,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6662d4c1c5c3fe06c7b73dec1ee6947d4a798e09"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1Njg2MTQwOnYy", "diffSide": "RIGHT", "path": "scripts/installer/install.py", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNzozMTo0NFrOGIft_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNzozMTo0NFrOGIft_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTU2MTQ2OQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            print(\"section of the Installataion guide, on how to configure your Dataverse with the proper registration\")\n          \n          \n            \n            print(\"section of the Installation guide, on how to configure your Dataverse with the proper registration\")", "url": "https://github.com/IQSS/dataverse/pull/6809#discussion_r411561469", "createdAt": "2020-04-20T17:31:44Z", "author": {"login": "pdurbin"}, "path": "scripts/installer/install.py", "diffHunk": "@@ -616,7 +631,7 @@\n print(\"as the following two JVM options:\")\n print(\"\\t<jvm-options>-Ddoi.username=...</jvm-options>\")\n print(\"\\t<jvm-options>-Ddoi.password=...</jvm-options>\")\n-print(\"and restart glassfish\")\n+print(\"and restart payara\")\n print(\"If this is a production Dataverse and you are planning to register datasets as \")\n print(\"\\\"real\\\", non-test DOIs or Handles, consult the \\\"Persistent Identifiers and Publishing Datasets\\\"\")\n print(\"section of the Installataion guide, on how to configure your Dataverse with the proper registration\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6662d4c1c5c3fe06c7b73dec1ee6947d4a798e09"}, "originalPosition": 231}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3345, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}