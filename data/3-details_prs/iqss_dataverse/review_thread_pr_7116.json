{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1MzE4MzIz", "number": 7116, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNzo0NDoyM1rOEW5TGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNzo1NTo0N1rOEW5jZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNDQyOTA2OnYy", "diffSide": "RIGHT", "path": "src/main/java/edu/harvard/iq/dataverse/api/Pids.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNzo0NDoyM1rOG-Y3mA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxOTowNjozOVrOG-bmrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODA3MjM0NA==", "bodyText": "So this API endpoint only supports DataCite?", "url": "https://github.com/IQSS/dataverse/pull/7116#discussion_r468072344", "createdAt": "2020-08-10T17:44:23Z", "author": {"login": "sekmiller"}, "path": "src/main/java/edu/harvard/iq/dataverse/api/Pids.java", "diffHunk": "@@ -45,7 +45,7 @@ public Response getPid(@QueryParam(\"persistentId\") String persistentId) {\n         } catch (WrappedResponse ex) {\n             return error(Response.Status.FORBIDDEN, BundleUtil.getStringFromBundle(\"api.errors.invalidApiToken\"));\n         }\n-        String baseUrl = System.getProperty(\"doi.baseurlstringnext\");\n+        String baseUrl = systemConfig.getDataCiteRestApiUrlString();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "946080f3e22f700cb9e71d2df5e1a25d23afc275"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODA5ODM0Mg==", "bodyText": "Good catch. Yes, and I think the docs say that. However, the other places that were DataCite-specific had been resolved in earlier PRs that were merged into dev. I just resolved the conflicts in this PR and you can see DoiDataCiteServiceBean now gets the new URL via the SystemConfig method and the DeletePIDCommand is no longer DataCite specific.", "url": "https://github.com/IQSS/dataverse/pull/7116#discussion_r468098342", "createdAt": "2020-08-10T18:31:24Z", "author": {"login": "qqmyers"}, "path": "src/main/java/edu/harvard/iq/dataverse/api/Pids.java", "diffHunk": "@@ -45,7 +45,7 @@ public Response getPid(@QueryParam(\"persistentId\") String persistentId) {\n         } catch (WrappedResponse ex) {\n             return error(Response.Status.FORBIDDEN, BundleUtil.getStringFromBundle(\"api.errors.invalidApiToken\"));\n         }\n-        String baseUrl = System.getProperty(\"doi.baseurlstringnext\");\n+        String baseUrl = systemConfig.getDataCiteRestApiUrlString();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODA3MjM0NA=="}, "originalCommit": {"oid": "946080f3e22f700cb9e71d2df5e1a25d23afc275"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODExNzE2Ng==", "bodyText": "Great. Will pass to QA.", "url": "https://github.com/IQSS/dataverse/pull/7116#discussion_r468117166", "createdAt": "2020-08-10T19:06:39Z", "author": {"login": "sekmiller"}, "path": "src/main/java/edu/harvard/iq/dataverse/api/Pids.java", "diffHunk": "@@ -45,7 +45,7 @@ public Response getPid(@QueryParam(\"persistentId\") String persistentId) {\n         } catch (WrappedResponse ex) {\n             return error(Response.Status.FORBIDDEN, BundleUtil.getStringFromBundle(\"api.errors.invalidApiToken\"));\n         }\n-        String baseUrl = System.getProperty(\"doi.baseurlstringnext\");\n+        String baseUrl = systemConfig.getDataCiteRestApiUrlString();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODA3MjM0NA=="}, "originalCommit": {"oid": "946080f3e22f700cb9e71d2df5e1a25d23afc275"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNDQ3MDc3OnYy", "diffSide": "RIGHT", "path": "src/main/java/edu/harvard/iq/dataverse/engine/command/impl/DeletePidCommand.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNzo1NTo0OFrOG-ZRjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNzo1NTo0OFrOG-ZRjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODA3ODk4OQ==", "bodyText": "Again, surprised that this command only supports DataCite, but it was like this previously.", "url": "https://github.com/IQSS/dataverse/pull/7116#discussion_r468078989", "createdAt": "2020-08-10T17:55:48Z", "author": {"login": "sekmiller"}, "path": "src/main/java/edu/harvard/iq/dataverse/engine/command/impl/DeletePidCommand.java", "diffHunk": "@@ -47,7 +47,7 @@ protected void executeImpl(CommandContext ctxt) throws CommandException {\n         GlobalIdServiceBean idServiceBean = GlobalIdServiceBean.getBean(protocol, ctxt);\n         try {\n             // idServiceBean.deleteIdentifier(dataset); // didn't work\n-            String baseUrl = System.getProperty(\"doi.baseurlstringnext\");\n+            String baseUrl = ctxt.systemConfig().getDataCiteRestApiUrlString();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "946080f3e22f700cb9e71d2df5e1a25d23afc275"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3275, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}