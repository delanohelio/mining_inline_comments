{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIzMTY1NDU2", "number": 7422, "title": "7418 datasourcedefinition", "bodyText": "What this PR does / why we need it:\nThis will move the database connection configuration from the application server down to the application.\nThis greatly simplifies how to configure the connection details by using MicroProfile Config API.\nWhich issue(s) this PR closes:\nCloses #7418\nRequires #7416\nRequires #7419\nRequires #7420\nSpecial notes for your reviewer:\nNone.\nSuggestions on how to test this:\nBe sure to apply the PRs mentioned above first. Follow release notes instructions. Do usual testing.\nDoes this PR introduce a user interface change? If mockups are available, please link/include them here:\nNope.\nIs there a release notes update needed for this change?:\n\ud83d\udd0b included\nAdditional documentation:\nNone.", "createdAt": "2020-11-18T12:55:09Z", "url": "https://github.com/IQSS/dataverse/pull/7422", "merged": true, "mergeCommit": {"oid": "ee3b4f4a1fe62599c2c7fc44eeb03fb97f9f3bf1"}, "closed": true, "closedAt": "2020-12-04T20:32:26Z", "author": {"login": "poikilotherm"}, "timelineItems": {"totalCount": 27, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddtBNIgH2gAyNTIzMTY1NDU2OjlkZmU3YjgyZjE2YzAwNmFiZTZiMTJlOTRkNTVlNjY3ZmRlYzQ4Y2E=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdipNC4gH2gAyNTIzMTY1NDU2OjdlMzQ5OGU3MjM1MzM3OGEwZTE0NzMwZmE3YTdmZjZiOGEzNjRlYzY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9dfe7b82f16c006abe6b12e94d55e667fdec48ca", "author": {"user": {"login": "poikilotherm", "name": "Oliver Bertuch"}}, "url": "https://github.com/IQSS/dataverse/commit/9dfe7b82f16c006abe6b12e94d55e667fdec48ca", "committedDate": "2020-11-18T12:08:05Z", "message": "Provide @DataSourceDefinition for app-level DB config. #7418\n\nThe JNDI names have been changed to be conform with Java EE 7.\nSee https://github.com/javaee-samples/javaee7-samples/tree/master/jpa/datasourcedefinition-applicationxml-pu\nand others for working examples. (Staying with the old name was not successfull.)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b92e465d3e1c1f63f631d4337c5ba19f4c864037", "author": {"user": {"login": "poikilotherm", "name": "Oliver Bertuch"}}, "url": "https://github.com/IQSS/dataverse/commit/b92e465d3e1c1f63f631d4337c5ba19f4c864037", "committedDate": "2020-11-18T12:08:35Z", "message": "Make the DataSourceDefinition configureable using MicroProfile Config variables in annotation options. #7418 #7000"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c92120a37f2f54a6b484aa12072b13d9c3a23a9", "author": {"user": {"login": "poikilotherm", "name": "Oliver Bertuch"}}, "url": "https://github.com/IQSS/dataverse/commit/3c92120a37f2f54a6b484aa12072b13d9c3a23a9", "committedDate": "2020-11-18T12:08:35Z", "message": "Add defaults for the database connection using a MicroProfile Config file on classpath. #7418 #7000"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d05cbaf578cfddaeacc2a84b76f012ea20c06266", "author": {"user": {"login": "poikilotherm", "name": "Oliver Bertuch"}}, "url": "https://github.com/IQSS/dataverse/commit/d05cbaf578cfddaeacc2a84b76f012ea20c06266", "committedDate": "2020-11-18T12:08:35Z", "message": "Remove stale persistence unit from persistence.xml. #7418"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19c5e98324fd468faa26000ecec8b036fa449490", "author": {"user": {"login": "poikilotherm", "name": "Oliver Bertuch"}}, "url": "https://github.com/IQSS/dataverse/commit/19c5e98324fd468faa26000ecec8b036fa449490", "committedDate": "2020-11-18T12:16:43Z", "message": "Refactor as-setup.sh installer to use the MPCONFIG based database connection configuration. #7418"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6468313e6971792eae8a02520ed9acaec78557a", "author": {"user": {"login": "poikilotherm", "name": "Oliver Bertuch"}}, "url": "https://github.com/IQSS/dataverse/commit/b6468313e6971792eae8a02520ed9acaec78557a", "committedDate": "2020-11-18T12:22:49Z", "message": "Add docs about the new MPCONFIG based database properties to config doc. #7418"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0a1194d2155e5c06e70386ee2b3f5e6596959b0", "author": {"user": {"login": "poikilotherm", "name": "Oliver Bertuch"}}, "url": "https://github.com/IQSS/dataverse/commit/d0a1194d2155e5c06e70386ee2b3f5e6596959b0", "committedDate": "2020-11-18T12:49:10Z", "message": "Add release notes docs, including references to #7417 and #5345"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "813e0fba6ea9d331d18ef1adf74c39f2d446dc52", "author": {"user": {"login": "pdurbin", "name": "Philip Durbin"}}, "url": "https://github.com/IQSS/dataverse/commit/813e0fba6ea9d331d18ef1adf74c39f2d446dc52", "committedDate": "2020-11-24T21:09:48Z", "message": "Merge branch 'develop' into 7418-datasourcedefinition #7418"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa1cc0feb4b18f10e5e014085ea662c925ee4b99", "author": {"user": {"login": "pdurbin", "name": "Philip Durbin"}}, "url": "https://github.com/IQSS/dataverse/commit/aa1cc0feb4b18f10e5e014085ea662c925ee4b99", "committedDate": "2020-11-25T16:07:04Z", "message": "fix 'Error in \"code-block\" directive' #7418"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb4d308beb0209cd758ef43c0633b50cc9d751f5", "author": {"user": {"login": "pdurbin", "name": "Philip Durbin"}}, "url": "https://github.com/IQSS/dataverse/commit/cb4d308beb0209cd758ef43c0633b50cc9d751f5", "committedDate": "2020-11-25T20:55:18Z", "message": "tweaks, remove mention of microprofile-config.properties #7418\n\nsrc/main/resources/META-INF/microprofile-config.properties is important\nfor developers to know about but sysadmins following the installation\nguide need not concern themselves with it.\n\nOther tweaks in this commit are cosmetic. I de-emphasized the\nenvironment variables by putting them in the bottom."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4Nzg1NzQz", "url": "https://github.com/IQSS/dataverse/pull/7422#pullrequestreview-538785743", "createdAt": "2020-11-25T19:15:30Z", "commit": {"oid": "aa1cc0feb4b18f10e5e014085ea662c925ee4b99"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxOToxNTozMFrOH6A13A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxOTo1MzoxOVrOH6B6bQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDU5MzI0NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Using MicroProfile Config API (#7000, #7418), you can much more easily deposit configuration\n          \n          \n            \n            Using MicroProfile Config API (#7000, #7418), you can much more easily specify configuration", "url": "https://github.com/IQSS/dataverse/pull/7422#discussion_r530593244", "createdAt": "2020-11-25T19:15:30Z", "author": {"login": "pdurbin"}, "path": "doc/release-notes/7418-datasourcedefinition.md", "diffHunk": "@@ -0,0 +1,75 @@\n+## Easier Configuration of Database Connections\n+\n+Dataverse now being able to use up-to-date Java technologies, transforms\n+the way how to configure the connection to your PostgreSQL database.\n+\n+In the past, the configuration of the connection has been quite static\n+and not very easy to update. This has been an issue especially for cloud\n+and container usage.\n+\n+Using MicroProfile Config API (#7000, #7418), you can much more easily deposit configuration", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa1cc0feb4b18f10e5e014085ea662c925ee4b99"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDYxMDE0Mg==", "bodyText": "In 9dfe7b8 it is explained why this changed:\n\nThe JNDI names have been changed to be conform with Java EE 7.\nSee https://github.com/javaee-samples/javaee7-samples/tree/master/jpa/datasourcedefinition-applicationxml-pu\nand others for working examples. (Staying with the old name was not successfull.)", "url": "https://github.com/IQSS/dataverse/pull/7422#discussion_r530610142", "createdAt": "2020-11-25T19:51:51Z", "author": {"login": "pdurbin"}, "path": "src/main/java/edu/harvard/iq/dataverse/flyway/StartupFlywayMigrator.java", "diffHunk": "@@ -15,7 +15,7 @@\n @TransactionManagement(value = TransactionManagementType.BEAN)\n public class StartupFlywayMigrator {\n \n-    @Resource(lookup = \"jdbc/VDCNetDS\")\n+    @Resource(lookup = \"java:app/jdbc/dataverse\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa1cc0feb4b18f10e5e014085ea662c925ee4b99"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDYxMDc5Nw==", "bodyText": "This was added so the following file would be included:\nsrc/main/resources/META-INF/microprofile-config.properties", "url": "https://github.com/IQSS/dataverse/pull/7422#discussion_r530610797", "createdAt": "2020-11-25T19:53:19Z", "author": {"login": "pdurbin"}, "path": "pom.xml", "diffHunk": "@@ -685,6 +685,7 @@\n                     <include>**/*.xml</include>\n                     <include>**/firstNames/*.*</include>\n                     <include>**/*.xsl</include>\n+                    <include>**/*.properties</include>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa1cc0feb4b18f10e5e014085ea662c925ee4b99"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9155c0704c2d3dbc75c1976f69d29dd96dd77d75", "author": {"user": {"login": "poikilotherm", "name": "Oliver Bertuch"}}, "url": "https://github.com/IQSS/dataverse/commit/9155c0704c2d3dbc75c1976f69d29dd96dd77d75", "committedDate": "2020-11-25T21:03:00Z", "message": "Update doc/release-notes/7418-datasourcedefinition.md\n\nCo-authored-by: Philip Durbin <philip_durbin@harvard.edu>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06dbef10ac65a8b07d25c3b7506b0362d04030c9", "author": {"user": {"login": "pdurbin", "name": "Philip Durbin"}}, "url": "https://github.com/IQSS/dataverse/commit/06dbef10ac65a8b07d25c3b7506b0362d04030c9", "committedDate": "2020-12-01T17:27:39Z", "message": "PGXADataSource breaks ingest, use PGPoolingDataSource #7418"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyMjMxNTc3", "url": "https://github.com/IQSS/dataverse/pull/7422#pullrequestreview-542231577", "createdAt": "2020-12-01T19:35:36Z", "commit": {"oid": "06dbef10ac65a8b07d25c3b7506b0362d04030c9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxOTozNTozNlrOH88sAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxOTozNTozNlrOH88sAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzY3MDkxMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // Note that PGPoolingDataSource is deprecated. PGXADataSource breaks ingest.\n          \n          \n            \n                className = \"org.postgresql.ds.PGPoolingDataSource\",\n          \n          \n            \n                // App server provides its own pooling, so go with simple data source class.\n          \n          \n            \n                // PGXADataSource is unnecessary (no distributed transactions) and breaks ingest.\n          \n          \n            \n                className = \"org.postgresql.ds.PGSimpleDataSource\",", "url": "https://github.com/IQSS/dataverse/pull/7422#discussion_r533670913", "createdAt": "2020-12-01T19:35:36Z", "author": {"login": "poikilotherm"}, "path": "src/main/java/edu/harvard/iq/dataverse/util/DataSourceProducer.java", "diffHunk": "@@ -0,0 +1,29 @@\n+package edu.harvard.iq.dataverse.util;\n+\n+import javax.annotation.Resource;\n+import javax.annotation.sql.DataSourceDefinition;\n+import javax.enterprise.inject.Produces;\n+import javax.inject.Singleton;\n+import javax.sql.DataSource;\n+\n+@Singleton\n+@DataSourceDefinition(\n+    name = \"java:app/jdbc/dataverse\",\n+    // Note that PGPoolingDataSource is deprecated. PGXADataSource breaks ingest.\n+    className = \"org.postgresql.ds.PGPoolingDataSource\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06dbef10ac65a8b07d25c3b7506b0362d04030c9"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1865087ad27a500be18a7a1f89c7d43b5fd3722", "author": {"user": {"login": "poikilotherm", "name": "Oliver Bertuch"}}, "url": "https://github.com/IQSS/dataverse/commit/b1865087ad27a500be18a7a1f89c7d43b5fd3722", "committedDate": "2020-12-01T19:37:02Z", "message": "Update src/main/java/edu/harvard/iq/dataverse/util/DataSourceProducer.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d0dc6e4d0baedc14671830f4e5fe1d0201f7e4b", "author": {"user": {"login": "poikilotherm", "name": "Oliver Bertuch"}}, "url": "https://github.com/IQSS/dataverse/commit/2d0dc6e4d0baedc14671830f4e5fe1d0201f7e4b", "committedDate": "2020-12-02T10:11:16Z", "message": "Remove doubled property usage on DataSourceDefinition following Java EE spec on it. #7418"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c0959b29da894d058814624b7ea9e53baebf400", "author": {"user": {"login": "poikilotherm", "name": "Oliver Bertuch"}}, "url": "https://github.com/IQSS/dataverse/commit/1c0959b29da894d058814624b7ea9e53baebf400", "committedDate": "2020-12-02T10:25:03Z", "message": "Switch to a javax.sql.ConnectionPoolDataSource class for DataSourceDefinition plus add some more inline docs. #7418"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea0cf29e0e63945ed22de0d4faf26dc574bd9bec", "author": {"user": {"login": "poikilotherm", "name": "Oliver Bertuch"}}, "url": "https://github.com/IQSS/dataverse/commit/ea0cf29e0e63945ed22de0d4faf26dc574bd9bec", "committedDate": "2020-12-02T11:51:24Z", "message": "Add more comments about pool sizing and reduce JDBC pool to max 100 connections. #7418"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a41e177977e70706179eec2f723fff34b2ba3134", "author": {"user": {"login": "poikilotherm", "name": "Oliver Bertuch"}}, "url": "https://github.com/IQSS/dataverse/commit/a41e177977e70706179eec2f723fff34b2ba3134", "committedDate": "2020-12-02T11:59:00Z", "message": "Enable special JDBC connection pooling properties for debugging and monitoring via MPCONFIG. #7418"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a921f6b1b0f1a80a34d5651ad3e883a3c30a69e", "author": {"user": {"login": "poikilotherm", "name": "Oliver Bertuch"}}, "url": "https://github.com/IQSS/dataverse/commit/1a921f6b1b0f1a80a34d5651ad3e883a3c30a69e", "committedDate": "2020-12-02T13:23:49Z", "message": "Make pool resize configurable. #7418"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83ea82f2d292d88aad3d73aa075eb14692a854ac", "author": {"user": {"login": "poikilotherm", "name": "Oliver Bertuch"}}, "url": "https://github.com/IQSS/dataverse/commit/83ea82f2d292d88aad3d73aa075eb14692a854ac", "committedDate": "2020-12-02T13:49:03Z", "message": "Reverting the addition of JDBC pooling settings, configurable via MPCONFIG. #7418\n\nDue to payara/Payara#5024 this is currently not possible. Needs to be addressed\nin a later enhancement when Payara provides a solution."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQzMDI2MTg5", "url": "https://github.com/IQSS/dataverse/pull/7422#pullrequestreview-543026189", "createdAt": "2020-12-02T16:39:46Z", "commit": {"oid": "83ea82f2d292d88aad3d73aa075eb14692a854ac"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNjozOTo0NlrOH9j9MA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQxNjo1ODozM1rOH9k0RQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDMxNDI4OA==", "bodyText": "My understanding is that all these commented out entries are for after a pull request for payara/Payara#5024 is created and merged. They're a little confusing to see now if they don't work yet so I'd suggest removing them. Otherwise, Dataverse admins might waste time trying to get them to work.", "url": "https://github.com/IQSS/dataverse/pull/7422#discussion_r534314288", "createdAt": "2020-12-02T16:39:46Z", "author": {"login": "pdurbin"}, "path": "src/main/resources/META-INF/microprofile-config.properties", "diffHunk": "@@ -0,0 +1,16 @@\n+dataverse.db.host=localhost\n+dataverse.db.port=5432\n+dataverse.db.user=dataverse\n+dataverse.db.name=dataverse\n+#dataverse.db.pool-resize-quantity=2\n+#dataverse.db.is-connection-validation-required=false\n+#dataverse.db.connection-validation-method=table\n+#dataverse.db.validation-table-name=setting\n+#dataverse.db.validation-classname=org.glassfish.api.jdbc.validation.PostgresConnectionValidation\n+#dataverse.db.connection-leak-timeout-in-seconds=0\n+#dataverse.db.connection-leak-reclaim=false\n+#dataverse.db.statement-timeout-in-seconds=-1\n+#dataverse.db.statement-leak-timeout-in-seconds=0\n+#dataverse.db.statement-leak-reclaim=false\n+#dataverse.db.slow-query-threshold-in-seconds=-1\n+#dataverse.db.log-jdbc-calls=false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "83ea82f2d292d88aad3d73aa075eb14692a854ac"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDMyODM4OQ==", "bodyText": "I find it confusing to see all the MPCONFIG values here when they don't work yet. (Thanks for opening payara/Payara#5024 to address this.)\nIn practice, I'm not sure how many of these we (Harvard Dataverse) use but perhaps this list could be simplified down to the two mentioned in #7048 (comment) which are:\nproperties = {\n    \"fish.payara.is-connection-validation-required=true\",\n    \"fish.payara.validation-table-name=setting\"\n}\n\nOnce there is a list with hard coded values like this, it's more obvious that uncommenting them will (presumably) have an effect.", "url": "https://github.com/IQSS/dataverse/pull/7422#discussion_r534328389", "createdAt": "2020-12-02T16:58:33Z", "author": {"login": "pdurbin"}, "path": "src/main/java/edu/harvard/iq/dataverse/util/DataSourceProducer.java", "diffHunk": "@@ -0,0 +1,70 @@\n+package edu.harvard.iq.dataverse.util;\n+\n+import javax.annotation.Resource;\n+import javax.annotation.sql.DataSourceDefinition;\n+import javax.enterprise.inject.Produces;\n+import javax.inject.Singleton;\n+import javax.sql.DataSource;\n+\n+@Singleton\n+@DataSourceDefinition(\n+    // Find docs here: https://javaee.github.io/javaee-spec/javadocs/javax/annotation/sql/DataSourceDefinition.html\n+    \n+    name = \"java:app/jdbc/dataverse\",\n+    \n+    // The app server (Payara) deploys a managed pool for this data source for us.\n+    // We don't need to deal with this on our own.\n+    //\n+    // HINT: PGSimpleDataSource would work too, but as we use a connection pool, go with a javax.sql.ConnectionPoolDataSource\n+    // HINT: PGXADataSource is unnecessary (no distributed transactions used) and breaks ingest.\n+    className = \"org.postgresql.ds.PGConnectionPoolDataSource\",\n+    \n+    user = \"${MPCONFIG=dataverse.db.user}\",\n+    password = \"${MPCONFIG=dataverse.db.password}\",\n+    url = \"jdbc:postgresql://${MPCONFIG=dataverse.db.host}:${MPCONFIG=dataverse.db.port}/${MPCONFIG=dataverse.db.name}\",\n+    \n+    // If we ever need to change these pool settings, we need to remove this class and create the resource\n+    // from web.xml. We can use MicroProfile Config in there for these values, impossible to do in the annotation.\n+    //\n+    // See also https://blog.payara.fish/an-intro-to-connection-pools-in-payara-server-5\n+    // Payara DataSourceDefinitionDeployer default value = 8\n+    minPoolSize = 10,\n+    \n+    // HINT: Payara DataSourceDefinitionDeployer default value = 32\n+    // HINT: Harvard Dataverse is fine for a while with 64\n+    maxPoolSize = 100,\n+    \n+    // \"The number of seconds that a physical connection should remain unused in the pool before the connection is closed for a connection pool. \"\n+    // Payara DataSourceDefinitionDeployer default value = 300 (seconds)\n+    maxIdleTime = 300)\n+    \n+    // These are documented at https://docs.payara.fish/community/docs/5.2020.6/documentation/payara-server/jdbc/advanced-connection-pool-properties.html#full-list-of-properties\n+    //\n+    // All these vars cannot be configured via MPCONFIG as Payara doesn't support this (yet). To be enhanced.\n+    // See also https://github.com/payara/Payara/issues/5024\n+    /*\n+    properties = {\n+        \"fish.payara.pool-resize-quantity=${MPCONFIG=dataverse.db.pool-resize-quantity}\",\n+        \"fish.payara.is-connection-validation-required=${MPCONFIG=dataverse.db.is-connection-validation-required}\",\n+        \"fish.payara.connection-validation-method=${MPCONFIG=dataverse.db.connection-validation-method}\",\n+        \"fish.payara.validation-table-name=${MPCONFIG=dataverse.db.validation-table-name}\",\n+        \"fish.payara.validation-classname=${MPCONFIG=dataverse.db.validation-classname}\",\n+        \"fish.payara.connection-leak-timeout-in-seconds=${MPCONFIG=dataverse.db.connection-leak-timeout-in-seconds}\",\n+        \"fish.payara.connection-leak-reclaim=${MPCONFIG=dataverse.db.connection-leak-reclaim}\",\n+        \"fish.payara.statement-timeout-in-seconds=${MPCONFIG=dataverse.db.statement-timeout-in-seconds}\",\n+        \"fish.payara.statement-leak-timeout-in-seconds=${MPCONFIG=dataverse.db.statement-leak-timeout-in-seconds}\",\n+        \"fish.payara.statement-leak-reclaim=${MPCONFIG=dataverse.db.statement-leak-reclaim}\",\n+        \"fish.payara.slow-query-threshold-in-seconds=${MPCONFIG=dataverse.db.slow-query-threshold-in-seconds}\",\n+        \"fish.payara.log-jdbc-calls=${MPCONFIG=dataverse.db.log-jdbc-calls}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "83ea82f2d292d88aad3d73aa075eb14692a854ac"}, "originalPosition": 58}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c583909d21daa63b03f82f6aba02965451ef7467", "author": {"user": {"login": "pdurbin", "name": "Philip Durbin"}}, "url": "https://github.com/IQSS/dataverse/commit/c583909d21daa63b03f82f6aba02965451ef7467", "committedDate": "2020-12-03T19:45:01Z", "message": "tweak javadoc, default MP config properties #7418\n\n- Show a simple properties example that's easily verifiable by inspecting\nserver.log (JDBC call debugging).\n- Remove MPCONFIG examples that don't work yet (depends on work in\nPayara)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f98c1642f50a1b815251da78b42ea848df4b535b", "author": {"user": {"login": "pdurbin", "name": "Philip Durbin"}}, "url": "https://github.com/IQSS/dataverse/commit/f98c1642f50a1b815251da78b42ea848df4b535b", "committedDate": "2020-12-03T19:55:47Z", "message": "format with Netbeans #7418"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9168ad124a1cbea4e3bccb66ab7f44388acb2e4e", "author": {"user": {"login": "pdurbin", "name": "Philip Durbin"}}, "url": "https://github.com/IQSS/dataverse/commit/9168ad124a1cbea4e3bccb66ab7f44388acb2e4e", "committedDate": "2020-12-03T19:56:41Z", "message": "Merge branch 'develop' into 7418-datasourcedefinition #7418"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7f3da1f1a13e1b4e3b45a7ecad30a56c70f3c83", "author": {"user": {"login": "pdurbin", "name": "Philip Durbin"}}, "url": "https://github.com/IQSS/dataverse/commit/d7f3da1f1a13e1b4e3b45a7ecad30a56c70f3c83", "committedDate": "2020-12-03T20:21:44Z", "message": "mention new JVM options in release notes #7418"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e3498e72353378a0e14730fa7a7ff6b8a364ec6", "author": {"user": {"login": "pdurbin", "name": "Philip Durbin"}}, "url": "https://github.com/IQSS/dataverse/commit/7e3498e72353378a0e14730fa7a7ff6b8a364ec6", "committedDate": "2020-12-03T20:31:01Z", "message": "note that some settings have moved to code #7418"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 695, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}