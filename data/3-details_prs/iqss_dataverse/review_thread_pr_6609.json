{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcwOTk4NzUw", "number": 6609, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNzowNzoxM1rODdaSmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxODoyNDozMVrODdbzvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyMTY2MDQzOnYy", "diffSide": "RIGHT", "path": "doc/sphinx-guides/source/api/native-api.rst", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNzowNzoxM1rOFl_3ig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNzowNzoxM1rOFl_3ig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTM4ODA0Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              export ID=xxxxxx\n          \n          \n            \n            export ID=42", "url": "https://github.com/IQSS/dataverse/pull/6609#discussion_r375388042", "createdAt": "2020-02-05T17:07:13Z", "author": {"login": "pdurbin"}, "path": "doc/sphinx-guides/source/api/native-api.rst", "diffHunk": "@@ -898,6 +898,52 @@ In practice, you only need one the ``dataset_id`` or the ``persistentId``. The e\n     print '-' * 40\n     print r.json()\n     print r.status_code\n+    \n+Report the data (file) size of a Dataset\n+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+Shows the combined size in bytes of all the files uploaded into the dataset ``id``. ::\n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export SERVER_URL=https://demo.dataverse.org\n+  export ID=xxxxxx", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9dc2fdafbc387fb848e1c3b7edb5c95dc5993d0e"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyMTY2MjM2OnYy", "diffSide": "RIGHT", "path": "doc/sphinx-guides/source/api/native-api.rst", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNzowNzo0NFrOFl_4sA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNzowNzo0NFrOFl_4sA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTM4ODMzNg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              curl -H X-Dataverse-key:xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx https://demo.dataverse.org/api/datasets/xxxxxx/storagesize\n          \n          \n            \n              curl -H X-Dataverse-key:xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx https://demo.dataverse.org/api/datasets/42/storagesize", "url": "https://github.com/IQSS/dataverse/pull/6609#discussion_r375388336", "createdAt": "2020-02-05T17:07:44Z", "author": {"login": "pdurbin"}, "path": "doc/sphinx-guides/source/api/native-api.rst", "diffHunk": "@@ -898,6 +898,52 @@ In practice, you only need one the ``dataset_id`` or the ``persistentId``. The e\n     print '-' * 40\n     print r.json()\n     print r.status_code\n+    \n+Report the data (file) size of a Dataset\n+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+Shows the combined size in bytes of all the files uploaded into the dataset ``id``. ::\n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export SERVER_URL=https://demo.dataverse.org\n+  export ID=xxxxxx\n+\n+  curl -H X-Dataverse-key:$API_TOKEN $SERVER_URL/api/datasets/$ID/storagesize\n+\n+The fully expanded example above (without environment variables) looks like this:\n+\n+.. code-block:: bash\n+\n+  curl -H X-Dataverse-key:xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx https://demo.dataverse.org/api/datasets/xxxxxx/storagesize", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9dc2fdafbc387fb848e1c3b7edb5c95dc5993d0e"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyMTY2NjE0OnYy", "diffSide": "RIGHT", "path": "doc/sphinx-guides/source/api/native-api.rst", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNzowODo0N1rOFl_7CA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNzowODo0N1rOFl_7CA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTM4ODkzNg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              export ID=xxxxxx\n          \n          \n            \n              export ID=42", "url": "https://github.com/IQSS/dataverse/pull/6609#discussion_r375388936", "createdAt": "2020-02-05T17:08:47Z", "author": {"login": "pdurbin"}, "path": "doc/sphinx-guides/source/api/native-api.rst", "diffHunk": "@@ -898,6 +898,52 @@ In practice, you only need one the ``dataset_id`` or the ``persistentId``. The e\n     print '-' * 40\n     print r.json()\n     print r.status_code\n+    \n+Report the data (file) size of a Dataset\n+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+Shows the combined size in bytes of all the files uploaded into the dataset ``id``. ::\n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export SERVER_URL=https://demo.dataverse.org\n+  export ID=xxxxxx\n+\n+  curl -H X-Dataverse-key:$API_TOKEN $SERVER_URL/api/datasets/$ID/storagesize\n+\n+The fully expanded example above (without environment variables) looks like this:\n+\n+.. code-block:: bash\n+\n+  curl -H X-Dataverse-key:xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx https://demo.dataverse.org/api/datasets/xxxxxx/storagesize\n+\n+The size of published and unpublished files will be summed in the dataset specified. \n+By default, only the archival files are counted - i.e., the files uploaded by users (plus the tab-delimited versions generated for tabular data files on ingest). If the optional argument ``includeCached=true`` is specified, the API will also add the sizes of all the extra files generated and cached by Dataverse - the resized thumbnail versions for image files, the metadata exports for published datasets, etc. Because this deals with unpublished files the token supplied must have permission to view unpublished drafts. \n+\n+\n+Get the size of Downloading all the files of a Dataset Version\n+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+Shows the combined size in bytes of all the files available for download from version ``versionId`` of dataset ``id``. ::\n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export SERVER_URL=https://demo.dataverse.org\n+  export ID=xxxxxx", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9dc2fdafbc387fb848e1c3b7edb5c95dc5993d0e"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyMTY2ODE0OnYy", "diffSide": "RIGHT", "path": "doc/sphinx-guides/source/api/native-api.rst", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNzowOToxOVrOFl_8Sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNzowOToxOVrOFl_8Sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTM4OTI1OQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              export VERSIONID=x.x\n          \n          \n            \n              export VERSIONID=1.0", "url": "https://github.com/IQSS/dataverse/pull/6609#discussion_r375389259", "createdAt": "2020-02-05T17:09:19Z", "author": {"login": "pdurbin"}, "path": "doc/sphinx-guides/source/api/native-api.rst", "diffHunk": "@@ -898,6 +898,52 @@ In practice, you only need one the ``dataset_id`` or the ``persistentId``. The e\n     print '-' * 40\n     print r.json()\n     print r.status_code\n+    \n+Report the data (file) size of a Dataset\n+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+Shows the combined size in bytes of all the files uploaded into the dataset ``id``. ::\n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export SERVER_URL=https://demo.dataverse.org\n+  export ID=xxxxxx\n+\n+  curl -H X-Dataverse-key:$API_TOKEN $SERVER_URL/api/datasets/$ID/storagesize\n+\n+The fully expanded example above (without environment variables) looks like this:\n+\n+.. code-block:: bash\n+\n+  curl -H X-Dataverse-key:xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx https://demo.dataverse.org/api/datasets/xxxxxx/storagesize\n+\n+The size of published and unpublished files will be summed in the dataset specified. \n+By default, only the archival files are counted - i.e., the files uploaded by users (plus the tab-delimited versions generated for tabular data files on ingest). If the optional argument ``includeCached=true`` is specified, the API will also add the sizes of all the extra files generated and cached by Dataverse - the resized thumbnail versions for image files, the metadata exports for published datasets, etc. Because this deals with unpublished files the token supplied must have permission to view unpublished drafts. \n+\n+\n+Get the size of Downloading all the files of a Dataset Version\n+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+Shows the combined size in bytes of all the files available for download from version ``versionId`` of dataset ``id``. ::\n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export SERVER_URL=https://demo.dataverse.org\n+  export ID=xxxxxx\n+  export VERSIONID=x.x", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9dc2fdafbc387fb848e1c3b7edb5c95dc5993d0e"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyMTY2OTY5OnYy", "diffSide": "RIGHT", "path": "doc/sphinx-guides/source/api/native-api.rst", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNzowOTo0OFrOFl_9Ug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNzowOTo0OFrOFl_9Ug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTM4OTUyMg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              curl -H X-Dataverse-key:xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx https://demo.dataverse.org/api/datasets/xxxxxx/versions/x.x/downloadsize\n          \n          \n            \n              curl -H X-Dataverse-key:xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx https://demo.dataverse.org/api/datasets/42/versions/1.0/downloadsize", "url": "https://github.com/IQSS/dataverse/pull/6609#discussion_r375389522", "createdAt": "2020-02-05T17:09:48Z", "author": {"login": "pdurbin"}, "path": "doc/sphinx-guides/source/api/native-api.rst", "diffHunk": "@@ -898,6 +898,52 @@ In practice, you only need one the ``dataset_id`` or the ``persistentId``. The e\n     print '-' * 40\n     print r.json()\n     print r.status_code\n+    \n+Report the data (file) size of a Dataset\n+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+Shows the combined size in bytes of all the files uploaded into the dataset ``id``. ::\n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export SERVER_URL=https://demo.dataverse.org\n+  export ID=xxxxxx\n+\n+  curl -H X-Dataverse-key:$API_TOKEN $SERVER_URL/api/datasets/$ID/storagesize\n+\n+The fully expanded example above (without environment variables) looks like this:\n+\n+.. code-block:: bash\n+\n+  curl -H X-Dataverse-key:xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx https://demo.dataverse.org/api/datasets/xxxxxx/storagesize\n+\n+The size of published and unpublished files will be summed in the dataset specified. \n+By default, only the archival files are counted - i.e., the files uploaded by users (plus the tab-delimited versions generated for tabular data files on ingest). If the optional argument ``includeCached=true`` is specified, the API will also add the sizes of all the extra files generated and cached by Dataverse - the resized thumbnail versions for image files, the metadata exports for published datasets, etc. Because this deals with unpublished files the token supplied must have permission to view unpublished drafts. \n+\n+\n+Get the size of Downloading all the files of a Dataset Version\n+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+Shows the combined size in bytes of all the files available for download from version ``versionId`` of dataset ``id``. ::\n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export SERVER_URL=https://demo.dataverse.org\n+  export ID=xxxxxx\n+  export VERSIONID=x.x\n+\n+  curl -H X-Dataverse-key:$API_TOKEN $SERVER_URL/api/datasets/$ID/versions/$VERSIONID/downloadsize\n+\n+The fully expanded example above (without environment variables) looks like this:\n+\n+.. code-block:: bash\n+\n+  curl -H X-Dataverse-key:xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx https://demo.dataverse.org/api/datasets/xxxxxx/versions/x.x/downloadsize", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9dc2fdafbc387fb848e1c3b7edb5c95dc5993d0e"}, "originalPosition": 46}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyMTY3OTUzOnYy", "diffSide": "RIGHT", "path": "src/main/java/edu/harvard/iq/dataverse/DatasetServiceBean.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNzoxMjozM1rOFmADfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNzoxMjozM1rOFmADfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTM5MTEwMA==", "bodyText": "Sorry to nitpick but it's \"tally\" without an \"e\".", "url": "https://github.com/IQSS/dataverse/pull/6609#discussion_r375391100", "createdAt": "2020-02-05T17:12:33Z", "author": {"login": "pdurbin"}, "path": "src/main/java/edu/harvard/iq/dataverse/DatasetServiceBean.java", "diffHunk": "@@ -866,45 +866,67 @@ public void obtainPersistentIdentifiersForDatafiles(Dataset dataset) {\n     }\n     \n     public long findStorageSize(Dataset dataset) throws IOException {\n-        return findStorageSize(dataset, false);\n+        return findStorageSize(dataset, false, \"storage\", null);\n     }\n     \n+    \n+    public long findStorageSize(Dataset dataset, boolean countCachedExtras) throws IOException {\n+        return findStorageSize(dataset, countCachedExtras, \"storage\", null);\n+    }\n+  \n     /**\n      * Returns the total byte size of the files in this dataset \n      * \n      * @param dataset\n      * @param countCachedExtras boolean indicating if the cached disposable extras should also be counted\n+     * @param mode String indicating whether we are getting the result for storage (entire dataset) or download version based\n+     * @param version optional param for dataset version\n      * @return total size \n      * @throws IOException if it can't access the objects via StorageIO \n      * (in practice, this can only happen when called with countCachedExtras=true; when run in the \n      * default mode, the method doesn't need to access the storage system, as the \n      * sizes of the main files are recorded in the database)\n      */\n-    public long findStorageSize(Dataset dataset, boolean countCachedExtras) throws IOException {\n+    public long findStorageSize(Dataset dataset, boolean countCachedExtras, String mode, DatasetVersion version) throws IOException {\n         long total = 0L; \n         \n         if (dataset.isHarvested()) {\n             return 0L;\n         }\n+\n+        List<DataFile> filesToTalley = new ArrayList();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9dc2fdafbc387fb848e1c3b7edb5c95dc5993d0e"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyMTkwNjE1OnYy", "diffSide": "RIGHT", "path": "src/main/java/edu/harvard/iq/dataverse/DatasetServiceBean.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxODoyMzoyOFrOFmCS7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxODoyMzoyOFrOFmCS7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQyNzgyMg==", "bodyText": "It would be nice to document the accepted values for \"mode\".", "url": "https://github.com/IQSS/dataverse/pull/6609#discussion_r375427822", "createdAt": "2020-02-05T18:23:28Z", "author": {"login": "pdurbin"}, "path": "src/main/java/edu/harvard/iq/dataverse/DatasetServiceBean.java", "diffHunk": "@@ -866,45 +866,67 @@ public void obtainPersistentIdentifiersForDatafiles(Dataset dataset) {\n     }\n     \n     public long findStorageSize(Dataset dataset) throws IOException {\n-        return findStorageSize(dataset, false);\n+        return findStorageSize(dataset, false, \"storage\", null);\n     }\n     \n+    \n+    public long findStorageSize(Dataset dataset, boolean countCachedExtras) throws IOException {\n+        return findStorageSize(dataset, countCachedExtras, \"storage\", null);\n+    }\n+  \n     /**\n      * Returns the total byte size of the files in this dataset \n      * \n      * @param dataset\n      * @param countCachedExtras boolean indicating if the cached disposable extras should also be counted\n+     * @param mode String indicating whether we are getting the result for storage (entire dataset) or download version based", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9dc2fdafbc387fb848e1c3b7edb5c95dc5993d0e"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyMTkwOTEwOnYy", "diffSide": "RIGHT", "path": "src/main/java/edu/harvard/iq/dataverse/engine/command/impl/GetDatasetStorageSizeCommand.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxODoyNDozMVrOFmCU7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxODoyNDozMVrOFmCU7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQyODMzNA==", "bodyText": "Instead of a String for \"mode\" and enum would be nice. More type safe that way. And auto documenting.", "url": "https://github.com/IQSS/dataverse/pull/6609#discussion_r375428334", "createdAt": "2020-02-05T18:24:31Z", "author": {"login": "pdurbin"}, "path": "src/main/java/edu/harvard/iq/dataverse/engine/command/impl/GetDatasetStorageSizeCommand.java", "diffHunk": "@@ -0,0 +1,79 @@\n+/*\n+ * To change this license header, choose License Headers in Project Properties.\n+ * To change this template file, choose Tools | Templates\n+ * and open the template in the editor.\n+ */\n+package edu.harvard.iq.dataverse.engine.command.impl;\n+\n+import edu.harvard.iq.dataverse.Dataset;\n+import edu.harvard.iq.dataverse.DatasetVersion;\n+import edu.harvard.iq.dataverse.Dataverse;\n+import edu.harvard.iq.dataverse.authorization.Permission;\n+import edu.harvard.iq.dataverse.engine.command.AbstractCommand;\n+import edu.harvard.iq.dataverse.engine.command.CommandContext;\n+import edu.harvard.iq.dataverse.engine.command.DataverseRequest;\n+import edu.harvard.iq.dataverse.engine.command.RequiredPermissions;\n+import edu.harvard.iq.dataverse.engine.command.exception.CommandException;\n+import edu.harvard.iq.dataverse.util.BundleUtil;\n+import java.io.IOException;\n+import java.util.Collections;\n+import java.util.Map;\n+import java.util.Set;\n+import java.util.logging.Logger;\n+\n+/**\n+ *\n+ * @author skraffmi\n+ */\n+@RequiredPermissions({})\n+public class GetDatasetStorageSizeCommand extends AbstractCommand<Long> {\n+\n+    private static final Logger logger = Logger.getLogger(GetDataverseStorageSizeCommand.class.getCanonicalName());\n+\n+    private final Dataset dataset;\n+    private final Boolean countCachedFiles;\n+    private final String mode;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9dc2fdafbc387fb848e1c3b7edb5c95dc5993d0e"}, "originalPosition": 35}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3386, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}