{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIxOTUyNTAx", "number": 7414, "title": "Iqss/6497 semantic api", "bodyText": "What this PR does / why we need it: This adds an API call that allows metadata to be added using json-ld - in the same format as the OAI-ORE export, and without having to retrieve the existing metadata and having to understand the way Dataverse is storing things internally. It's one step in supporting dataset migration via RDA Bags (see #6497) that might be useful independent of additional api calls to migrate a dataset. For example, it allows submission of new terms and conditions.\nWhich issue(s) this PR closes:\nCloses #\nSpecial notes for your reviewer:\nSuggestions on how to test this: see examples in comments below\nDoes this PR introduce a user interface change? If mockups are available, please link/include them here:\nIs there a release notes update needed for this change?:\nAdditional documentation:", "createdAt": "2020-11-16T20:54:52Z", "url": "https://github.com/IQSS/dataverse/pull/7414", "merged": true, "mergeCommit": {"oid": "15e7b7c5420eb37f268623cf6ddcf35ef7dedef7"}, "closed": true, "closedAt": "2021-07-13T20:50:12Z", "author": {"login": "qqmyers"}, "timelineItems": {"totalCount": 117, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABemPUAGAFqTY5NzU4OTE5OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABeqGVnhgH2gAyNTIxOTUyNTAxOjhlOWYyZjcyMjIzNDUzZjg1ZGQ4MWZmNDI1Yzk1OTU4MmExMjdiOWU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Njk3NTg5MTk4", "url": "https://github.com/IQSS/dataverse/pull/7414#pullrequestreview-697589198", "createdAt": "2021-07-01T19:32:28Z", "commit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "state": "COMMENTED", "comments": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNy0wMVQxOTozMjoyOVrOJ32bfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNy0wMVQyMDo0MzowN1rOJ34sCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU0MzIyOA==", "bodyText": "Jenkins is showing an error (400, BAD REQUEST) instead of a 200 here: https://jenkins.dataverse.org/blue/organizations/jenkins/IQSS-Dataverse-Develop-PR/detail/PR-7414/64/tests", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r662543228", "createdAt": "2021-07-01T19:32:29Z", "author": {"login": "pdurbin"}, "path": "src/test/java/edu/harvard/iq/dataverse/api/DatasetsIT.java", "diffHunk": "@@ -2164,4 +2157,111 @@ public void testRestrictFileExportDdi() throws IOException {\n                 .body(\"message\", equalTo(\"You do not have permission to download this file.\"));\n     }\n \n+    @Test\n+    public void testSemanticMetadataAPIs() {\n+        Response createUser = UtilIT.createRandomUser();\n+        createUser.prettyPrint();\n+        String username = UtilIT.getUsernameFromResponse(createUser);\n+        String apiToken = UtilIT.getApiTokenFromResponse(createUser);\n+\n+        Response createDataverseResponse = UtilIT.createRandomDataverse(apiToken);\n+        createDataverseResponse.prettyPrint();\n+        String dataverseAlias = UtilIT.getAliasFromResponse(createDataverseResponse);\n+\n+        // Create a dataset using native api\n+        Response createDatasetResponse = UtilIT.createRandomDatasetViaNativeApi(dataverseAlias, apiToken);\n+        createDatasetResponse.prettyPrint();\n+        Integer datasetId = UtilIT.getDatasetIdFromResponse(createDatasetResponse);\n+\n+        // Get the metadata with the semantic api\n+        Response response = UtilIT.getDatasetJsonLDMetadata(datasetId, apiToken);\n+        response.then().assertThat().statusCode(OK.getStatusCode());\n+        // Compare the metadata with an expected value - the metadatablock entries\n+        // should be the same but there will be additional fields with values related to\n+        // the dataset's creation (e.g. new id)\n+        String jsonLDString = getData(response.getBody().asString());\n+        JsonObject jo = null;\n+        try {\n+            jo = JSONLDUtil.decontextualizeJsonLD(jsonLDString);\n+        } catch (NoSuchMethodError e) {\n+            logger.info(ExceptionUtils.getStackTrace(e));\n+        }\n+        \n+\n+        String expectedJsonLD = UtilIT.getDatasetJson(\"scripts/search/tests/data/dataset-finch1.jsonld\");\n+        jo = Json.createObjectBuilder(jo).remove(\"@id\").remove(\"http://schema.org/dateModified\").build();\n+        String jsonLD = jo.toString();\n+\n+        // ToDo: Are the static pars as expected\n+        JSONAssert.assertEquals(expectedJsonLD, jsonLD, false);\n+        // Now change the title\n+        response = UtilIT.updateDatasetJsonLDMetadata(datasetId, apiToken,\n+                \"{\\\"Title\\\": \\\"New Title\\\", \\\"@context\\\":{\\\"Title\\\": \\\"http://purl.org/dc/terms/title\\\"}}\", true);\n+        response.then().assertThat().statusCode(OK.getStatusCode());\n+\n+        response = UtilIT.getDatasetJsonLDMetadata(datasetId, apiToken);\n+        response.then().assertThat().statusCode(OK.getStatusCode());\n+\n+        // Check that the semantic api returns the new title\n+        jsonLDString = getData(response.getBody().asString());\n+        JsonObject jsonLDObject = JSONLDUtil.decontextualizeJsonLD(jsonLDString);\n+        assertEquals(\"New Title\", jsonLDObject.getString(\"http://purl.org/dc/terms/title\"));\n+\n+        // Add an additional description (which is multi-valued and compound)\n+        // Also add new terms of use (single value so would fail with replace false if a\n+        // value existed)\n+        String newDescription = \"{\\\"citation:Description\\\": {\\\"dsDescription:Text\\\": \\\"New description\\\", \\\"https://dataverse.org/schema/core#termsOfUse\\\": \\\"New terms\\\"} \\\"@context\\\":{\\\"citation\\\": \\\"https://dataverse.org/schema/citation/\\\",\\\"dsDescription\\\": \\\"https://dataverse.org/schema/citation/dsDescription#\\\"}}\";\n+        response = UtilIT.updateDatasetJsonLDMetadata(datasetId, apiToken, newDescription, false);\n+        response.then().assertThat().statusCode(OK.getStatusCode());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 118}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU0NDg2OA==", "bodyText": "I though we removed conf/solr/8.8.1/schema_dv_mdb_copies.xml in pull request #7865. Why is it back?", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r662544868", "createdAt": "2021-07-01T19:35:47Z", "author": {"login": "pdurbin"}, "path": "conf/solr/8.8.1/schema_dv_mdb_copies.xml", "diffHunk": "@@ -0,0 +1,162 @@\n+<schema>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU0NTY5NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Dataset metadata can be retrieved/set/updated using a new, flatter JSONLD format - following the format of an OAI-ORE export (RDA-conformant Bags), allowing for easier transfer of metadata to/from other systems (i.e. without needing to know Dataverse's metadata block and field storage architecture). This new API also allows for the update of terms metadata (#5899).\n          \n          \n            \n            Dataset metadata can be retrieved/set/updated using a new, flatter JSON-LD format - following the format of an OAI-ORE export (RDA-conformant Bags), allowing for easier transfer of metadata to/from other systems (i.e. without needing to know Dataverse's metadata block and field storage architecture). This new API also allows for the update of terms metadata (#5899).", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r662545694", "createdAt": "2021-07-01T19:37:22Z", "author": {"login": "pdurbin"}, "path": "doc/release-notes/6497-semantic-api.md", "diffHunk": "@@ -0,0 +1,7 @@\n+# Release Highlights\n+\n+### Dataset Semantic API (Experimental)\n+\n+Dataset metadata can be retrieved/set/updated using a new, flatter JSONLD format - following the format of an OAI-ORE export (RDA-conformant Bags), allowing for easier transfer of metadata to/from other systems (i.e. without needing to know Dataverse's metadata block and field storage architecture). This new API also allows for the update of terms metadata (#5899).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU0NjUzNg==", "bodyText": "This sort of makes it sound like RDA is supporting the development of this import code.", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r662546536", "createdAt": "2021-07-01T19:39:02Z", "author": {"login": "pdurbin"}, "path": "doc/sphinx-guides/source/developers/dataset-semantic-metadata-api.rst", "diffHunk": "@@ -0,0 +1,91 @@\n+Dataset Semantic Metadata API\n+=============================\n+\n+The OAI_ORE metadata export format represents Dataset metadata using json-ld (see the :doc:`/admin/metadataexport` section). As part of an RDA-supported effort to allow import of Datasets exported as Bags with an included OAI_ORE metadata file, ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU0NzMyMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            an experimental API has been created that provides a json-ld alternative the the v1.0 API calls to get/set/delete Dataset metadata in the :doc:`/api/native-api`.\n          \n          \n            \n            an experimental API has been created that provides a json-ld alternative to the v1.0 API calls to get/set/delete Dataset metadata in the :doc:`/api/native-api`.", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r662547323", "createdAt": "2021-07-01T19:40:42Z", "author": {"login": "pdurbin"}, "path": "doc/sphinx-guides/source/developers/dataset-semantic-metadata-api.rst", "diffHunk": "@@ -0,0 +1,91 @@\n+Dataset Semantic Metadata API\n+=============================\n+\n+The OAI_ORE metadata export format represents Dataset metadata using json-ld (see the :doc:`/admin/metadataexport` section). As part of an RDA-supported effort to allow import of Datasets exported as Bags with an included OAI_ORE metadata file, \n+an experimental API has been created that provides a json-ld alternative the the v1.0 API calls to get/set/delete Dataset metadata in the :doc:`/api/native-api`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU0NzcyNw==", "bodyText": "Are we bumping the API? Once this is merged, it's part of v1.0, right?", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r662547727", "createdAt": "2021-07-01T19:41:34Z", "author": {"login": "pdurbin"}, "path": "doc/sphinx-guides/source/developers/dataset-semantic-metadata-api.rst", "diffHunk": "@@ -0,0 +1,91 @@\n+Dataset Semantic Metadata API\n+=============================\n+\n+The OAI_ORE metadata export format represents Dataset metadata using json-ld (see the :doc:`/admin/metadataexport` section). As part of an RDA-supported effort to allow import of Datasets exported as Bags with an included OAI_ORE metadata file, \n+an experimental API has been created that provides a json-ld alternative the the v1.0 API calls to get/set/delete Dataset metadata in the :doc:`/api/native-api`.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU0NzMyMw=="}, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU1OTYzNg==", "bodyText": "What's the story or history on \"application/ld+json\" vs. \"application/json-ld\"? Why support both?", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r662559636", "createdAt": "2021-07-01T20:05:22Z", "author": {"login": "pdurbin"}, "path": "doc/sphinx-guides/source/developers/dataset-semantic-metadata-api.rst", "diffHunk": "@@ -0,0 +1,91 @@\n+Dataset Semantic Metadata API\n+=============================\n+\n+The OAI_ORE metadata export format represents Dataset metadata using json-ld (see the :doc:`/admin/metadataexport` section). As part of an RDA-supported effort to allow import of Datasets exported as Bags with an included OAI_ORE metadata file, \n+an experimental API has been created that provides a json-ld alternative the the v1.0 API calls to get/set/delete Dataset metadata in the :doc:`/api/native-api`.\n+\n+You may prefer to work with this API if you are building a tool to import from a Bag/OAI-ORE source or already work with json-ld representations of metadata, or if you prefer the flatter json-ld representation to Dataverse software's json representation (which includes structure related to the metadata blocks involved and the type/multiplicity of the metadata fields.) \n+You may not want to use this API if you need stability and backward compatibility (the 'experimental' designation for this API implies that community feedback is desired and that, in future Dataverse software versions, the API may be modified based on that feedback).\n+\n+Note: The examples use the 'application/ld+json' mimetype. For compatibility reasons, the APIs also be used with mimetype \"application/json-ld\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU2MDYyNQ==", "bodyText": "Should we have URLs like https://dataverse.org/schema/citation/dsDescription actually work?", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r662560625", "createdAt": "2021-07-01T20:07:30Z", "author": {"login": "pdurbin"}, "path": "doc/sphinx-guides/source/developers/dataset-semantic-metadata-api.rst", "diffHunk": "@@ -0,0 +1,91 @@\n+Dataset Semantic Metadata API\n+=============================\n+\n+The OAI_ORE metadata export format represents Dataset metadata using json-ld (see the :doc:`/admin/metadataexport` section). As part of an RDA-supported effort to allow import of Datasets exported as Bags with an included OAI_ORE metadata file, \n+an experimental API has been created that provides a json-ld alternative the the v1.0 API calls to get/set/delete Dataset metadata in the :doc:`/api/native-api`.\n+\n+You may prefer to work with this API if you are building a tool to import from a Bag/OAI-ORE source or already work with json-ld representations of metadata, or if you prefer the flatter json-ld representation to Dataverse software's json representation (which includes structure related to the metadata blocks involved and the type/multiplicity of the metadata fields.) \n+You may not want to use this API if you need stability and backward compatibility (the 'experimental' designation for this API implies that community feedback is desired and that, in future Dataverse software versions, the API may be modified based on that feedback).\n+\n+Note: The examples use the 'application/ld+json' mimetype. For compatibility reasons, the APIs also be used with mimetype \"application/json-ld\"\n+  \n+Get Dataset Metadata\n+--------------------\n+\n+To get the json-ld formatted metadata for a Dataset, specify the Dataset ID (DATASET_ID) or Persistent identifier (DATASET_PID), and, for specific versions, the version number.\n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export DATASET_ID='12345'\n+  export DATASET_PID='doi:10.5072/FK2A1B2C3'\n+  export VERSION='1.0'\n+  export SERVER_URL=https://demo.dataverse.org\n+ \n+  Example 1: Get metadata for version '1.0'\n+ \n+    curl -H X-Dataverse-key:$API_TOKEN -H 'Accept: application/ld+json' \"$SERVER_URL/api/datasets/$DATASET_ID/versions/$VERSION/metadata\"\n+\n+  Example 2: Get metadata for the latest version using the DATASET PID\n+\n+    curl -H X-Dataverse-key:$API_TOKEN -H 'Accept: application/ld+json' \"$SERVER_URL/api/datasets/:persistentId/metadata?persistentId=$DATASET_PID\"\n+\n+You should expect a 200 (\"OK\") response and JSON-LD mirroring the OAI-ORE representation in the returned 'data' object.\n+\n+\n+Add Dataset Metadata\n+--------------------\n+\n+To add json-ld formatted metadata for a Dataset, specify the Dataset ID (DATASET_ID) or Persistent identifier (DATASET_PID). Adding '?replace=true' will overwrite an existing metadata value. The default (replace=false) will only add new metadata or add a new value to a multi-valued field. \n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export DATASET_ID='12345'\n+  export DATASET_PID='doi:10.5072/FK2A1B2C3'\n+  export VERSION='1.0'\n+  export SERVER_URL=https://demo.dataverse.org\n+ \n+  Example: Change the Dataset title \n+ \n+    curl -X PUT -H X-Dataverse-key:$API_TOKEN -H 'Content-Type: application/ld+json' -d '{\"Title\": \"Submit menu test\", \"@context\":{\"Title\": \"http://purl.org/dc/terms/title\"}}' \"$SERVER_URL/api/datasets/$DATASET_ID/metadata?replace=true\"\n+\n+  Example 2: Add a description using the DATASET PID\n+\n+    curl -X PUT -H X-Dataverse-key:$API_TOKEN -H 'Content-Type: application/ld+json' -d '{\"citation:Description\": {\"dsDescription:Text\": \"New description\"}, \"@context\":{\"citation\": \"https://dataverse.org/schema/citation/\",\"dsDescription\": \"https://dataverse.org/schema/citation/dsDescription#\"}}' \"$SERVER_URL/api/datasets/:persistentId/metadata?persistentId=$DATASET_PID\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU2Mjg3OA==", "bodyText": "This sounds like a fix for this issue:\n\nAllow terms metadata to be changed with Native API #5899", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r662562878", "createdAt": "2021-07-01T20:11:51Z", "author": {"login": "pdurbin"}, "path": "doc/sphinx-guides/source/developers/dataset-semantic-metadata-api.rst", "diffHunk": "@@ -0,0 +1,91 @@\n+Dataset Semantic Metadata API\n+=============================\n+\n+The OAI_ORE metadata export format represents Dataset metadata using json-ld (see the :doc:`/admin/metadataexport` section). As part of an RDA-supported effort to allow import of Datasets exported as Bags with an included OAI_ORE metadata file, \n+an experimental API has been created that provides a json-ld alternative the the v1.0 API calls to get/set/delete Dataset metadata in the :doc:`/api/native-api`.\n+\n+You may prefer to work with this API if you are building a tool to import from a Bag/OAI-ORE source or already work with json-ld representations of metadata, or if you prefer the flatter json-ld representation to Dataverse software's json representation (which includes structure related to the metadata blocks involved and the type/multiplicity of the metadata fields.) \n+You may not want to use this API if you need stability and backward compatibility (the 'experimental' designation for this API implies that community feedback is desired and that, in future Dataverse software versions, the API may be modified based on that feedback).\n+\n+Note: The examples use the 'application/ld+json' mimetype. For compatibility reasons, the APIs also be used with mimetype \"application/json-ld\"\n+  \n+Get Dataset Metadata\n+--------------------\n+\n+To get the json-ld formatted metadata for a Dataset, specify the Dataset ID (DATASET_ID) or Persistent identifier (DATASET_PID), and, for specific versions, the version number.\n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export DATASET_ID='12345'\n+  export DATASET_PID='doi:10.5072/FK2A1B2C3'\n+  export VERSION='1.0'\n+  export SERVER_URL=https://demo.dataverse.org\n+ \n+  Example 1: Get metadata for version '1.0'\n+ \n+    curl -H X-Dataverse-key:$API_TOKEN -H 'Accept: application/ld+json' \"$SERVER_URL/api/datasets/$DATASET_ID/versions/$VERSION/metadata\"\n+\n+  Example 2: Get metadata for the latest version using the DATASET PID\n+\n+    curl -H X-Dataverse-key:$API_TOKEN -H 'Accept: application/ld+json' \"$SERVER_URL/api/datasets/:persistentId/metadata?persistentId=$DATASET_PID\"\n+\n+You should expect a 200 (\"OK\") response and JSON-LD mirroring the OAI-ORE representation in the returned 'data' object.\n+\n+\n+Add Dataset Metadata\n+--------------------\n+\n+To add json-ld formatted metadata for a Dataset, specify the Dataset ID (DATASET_ID) or Persistent identifier (DATASET_PID). Adding '?replace=true' will overwrite an existing metadata value. The default (replace=false) will only add new metadata or add a new value to a multi-valued field. \n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export DATASET_ID='12345'\n+  export DATASET_PID='doi:10.5072/FK2A1B2C3'\n+  export VERSION='1.0'\n+  export SERVER_URL=https://demo.dataverse.org\n+ \n+  Example: Change the Dataset title \n+ \n+    curl -X PUT -H X-Dataverse-key:$API_TOKEN -H 'Content-Type: application/ld+json' -d '{\"Title\": \"Submit menu test\", \"@context\":{\"Title\": \"http://purl.org/dc/terms/title\"}}' \"$SERVER_URL/api/datasets/$DATASET_ID/metadata?replace=true\"\n+\n+  Example 2: Add a description using the DATASET PID\n+\n+    curl -X PUT -H X-Dataverse-key:$API_TOKEN -H 'Content-Type: application/ld+json' -d '{\"citation:Description\": {\"dsDescription:Text\": \"New description\"}, \"@context\":{\"citation\": \"https://dataverse.org/schema/citation/\",\"dsDescription\": \"https://dataverse.org/schema/citation/dsDescription#\"}}' \"$SERVER_URL/api/datasets/:persistentId/metadata?persistentId=$DATASET_PID\"\n+\n+You should expect a 200 (\"OK\") response indicating whether a draft Dataset version was created or an existing draft was updated.\n+\n+\n+Delete Dataset Metadata\n+-----------------------\n+\n+To delete metadata for a Dataset, send a json-ld representation of the fields to delete and specify the Dataset ID (DATASET_ID) or Persistent identifier (DATASET_PID).\n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export DATASET_ID='12345'\n+  export DATASET_PID='doi:10.5072/FK2A1B2C3'\n+  export VERSION='1.0'\n+  export SERVER_URL=https://demo.dataverse.org\n+ \n+  Example: Delete the TermsOfUseAndAccess 'restrictions' value 'No restrictions' for the latest version using the DATASET PID", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU2MzcwMg==", "bodyText": "It's good to mention this \"either form\" factoid here but we should also mention it above somewhere in the main intro.", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r662563702", "createdAt": "2021-07-01T20:13:34Z", "author": {"login": "pdurbin"}, "path": "doc/sphinx-guides/source/developers/dataset-semantic-metadata-api.rst", "diffHunk": "@@ -0,0 +1,91 @@\n+Dataset Semantic Metadata API\n+=============================\n+\n+The OAI_ORE metadata export format represents Dataset metadata using json-ld (see the :doc:`/admin/metadataexport` section). As part of an RDA-supported effort to allow import of Datasets exported as Bags with an included OAI_ORE metadata file, \n+an experimental API has been created that provides a json-ld alternative the the v1.0 API calls to get/set/delete Dataset metadata in the :doc:`/api/native-api`.\n+\n+You may prefer to work with this API if you are building a tool to import from a Bag/OAI-ORE source or already work with json-ld representations of metadata, or if you prefer the flatter json-ld representation to Dataverse software's json representation (which includes structure related to the metadata blocks involved and the type/multiplicity of the metadata fields.) \n+You may not want to use this API if you need stability and backward compatibility (the 'experimental' designation for this API implies that community feedback is desired and that, in future Dataverse software versions, the API may be modified based on that feedback).\n+\n+Note: The examples use the 'application/ld+json' mimetype. For compatibility reasons, the APIs also be used with mimetype \"application/json-ld\"\n+  \n+Get Dataset Metadata\n+--------------------\n+\n+To get the json-ld formatted metadata for a Dataset, specify the Dataset ID (DATASET_ID) or Persistent identifier (DATASET_PID), and, for specific versions, the version number.\n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export DATASET_ID='12345'\n+  export DATASET_PID='doi:10.5072/FK2A1B2C3'\n+  export VERSION='1.0'\n+  export SERVER_URL=https://demo.dataverse.org\n+ \n+  Example 1: Get metadata for version '1.0'\n+ \n+    curl -H X-Dataverse-key:$API_TOKEN -H 'Accept: application/ld+json' \"$SERVER_URL/api/datasets/$DATASET_ID/versions/$VERSION/metadata\"\n+\n+  Example 2: Get metadata for the latest version using the DATASET PID\n+\n+    curl -H X-Dataverse-key:$API_TOKEN -H 'Accept: application/ld+json' \"$SERVER_URL/api/datasets/:persistentId/metadata?persistentId=$DATASET_PID\"\n+\n+You should expect a 200 (\"OK\") response and JSON-LD mirroring the OAI-ORE representation in the returned 'data' object.\n+\n+\n+Add Dataset Metadata\n+--------------------\n+\n+To add json-ld formatted metadata for a Dataset, specify the Dataset ID (DATASET_ID) or Persistent identifier (DATASET_PID). Adding '?replace=true' will overwrite an existing metadata value. The default (replace=false) will only add new metadata or add a new value to a multi-valued field. \n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export DATASET_ID='12345'\n+  export DATASET_PID='doi:10.5072/FK2A1B2C3'\n+  export VERSION='1.0'\n+  export SERVER_URL=https://demo.dataverse.org\n+ \n+  Example: Change the Dataset title \n+ \n+    curl -X PUT -H X-Dataverse-key:$API_TOKEN -H 'Content-Type: application/ld+json' -d '{\"Title\": \"Submit menu test\", \"@context\":{\"Title\": \"http://purl.org/dc/terms/title\"}}' \"$SERVER_URL/api/datasets/$DATASET_ID/metadata?replace=true\"\n+\n+  Example 2: Add a description using the DATASET PID\n+\n+    curl -X PUT -H X-Dataverse-key:$API_TOKEN -H 'Content-Type: application/ld+json' -d '{\"citation:Description\": {\"dsDescription:Text\": \"New description\"}, \"@context\":{\"citation\": \"https://dataverse.org/schema/citation/\",\"dsDescription\": \"https://dataverse.org/schema/citation/dsDescription#\"}}' \"$SERVER_URL/api/datasets/:persistentId/metadata?persistentId=$DATASET_PID\"\n+\n+You should expect a 200 (\"OK\") response indicating whether a draft Dataset version was created or an existing draft was updated.\n+\n+\n+Delete Dataset Metadata\n+-----------------------\n+\n+To delete metadata for a Dataset, send a json-ld representation of the fields to delete and specify the Dataset ID (DATASET_ID) or Persistent identifier (DATASET_PID).\n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export DATASET_ID='12345'\n+  export DATASET_PID='doi:10.5072/FK2A1B2C3'\n+  export VERSION='1.0'\n+  export SERVER_URL=https://demo.dataverse.org\n+ \n+  Example: Delete the TermsOfUseAndAccess 'restrictions' value 'No restrictions' for the latest version using the DATASET PID\n+\n+    curl -X PUT -H X-Dataverse-key:$API_TOKEN -H 'Content-Type: application/ld+json' -d '{\"https://dataverse.org/schema/core#restrictions\":\"No restrictions\"}' \"$SERVER_URL/api/datasets/:persistentId/metadata/delete?persistentId=$DATASET_PID\"\n+\n+Note, this example uses the term URI directly rather than adding an '@context' element. You can use either form in any of these API calls. ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU2NDY4MQ==", "bodyText": "I'm confused about how this just sort of ends. Can we have a downloadable JSON-LD file to use as an example when creating a dataset?", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r662564681", "createdAt": "2021-07-01T20:15:34Z", "author": {"login": "pdurbin"}, "path": "doc/sphinx-guides/source/developers/dataset-semantic-metadata-api.rst", "diffHunk": "@@ -0,0 +1,91 @@\n+Dataset Semantic Metadata API\n+=============================\n+\n+The OAI_ORE metadata export format represents Dataset metadata using json-ld (see the :doc:`/admin/metadataexport` section). As part of an RDA-supported effort to allow import of Datasets exported as Bags with an included OAI_ORE metadata file, \n+an experimental API has been created that provides a json-ld alternative the the v1.0 API calls to get/set/delete Dataset metadata in the :doc:`/api/native-api`.\n+\n+You may prefer to work with this API if you are building a tool to import from a Bag/OAI-ORE source or already work with json-ld representations of metadata, or if you prefer the flatter json-ld representation to Dataverse software's json representation (which includes structure related to the metadata blocks involved and the type/multiplicity of the metadata fields.) \n+You may not want to use this API if you need stability and backward compatibility (the 'experimental' designation for this API implies that community feedback is desired and that, in future Dataverse software versions, the API may be modified based on that feedback).\n+\n+Note: The examples use the 'application/ld+json' mimetype. For compatibility reasons, the APIs also be used with mimetype \"application/json-ld\"\n+  \n+Get Dataset Metadata\n+--------------------\n+\n+To get the json-ld formatted metadata for a Dataset, specify the Dataset ID (DATASET_ID) or Persistent identifier (DATASET_PID), and, for specific versions, the version number.\n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export DATASET_ID='12345'\n+  export DATASET_PID='doi:10.5072/FK2A1B2C3'\n+  export VERSION='1.0'\n+  export SERVER_URL=https://demo.dataverse.org\n+ \n+  Example 1: Get metadata for version '1.0'\n+ \n+    curl -H X-Dataverse-key:$API_TOKEN -H 'Accept: application/ld+json' \"$SERVER_URL/api/datasets/$DATASET_ID/versions/$VERSION/metadata\"\n+\n+  Example 2: Get metadata for the latest version using the DATASET PID\n+\n+    curl -H X-Dataverse-key:$API_TOKEN -H 'Accept: application/ld+json' \"$SERVER_URL/api/datasets/:persistentId/metadata?persistentId=$DATASET_PID\"\n+\n+You should expect a 200 (\"OK\") response and JSON-LD mirroring the OAI-ORE representation in the returned 'data' object.\n+\n+\n+Add Dataset Metadata\n+--------------------\n+\n+To add json-ld formatted metadata for a Dataset, specify the Dataset ID (DATASET_ID) or Persistent identifier (DATASET_PID). Adding '?replace=true' will overwrite an existing metadata value. The default (replace=false) will only add new metadata or add a new value to a multi-valued field. \n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export DATASET_ID='12345'\n+  export DATASET_PID='doi:10.5072/FK2A1B2C3'\n+  export VERSION='1.0'\n+  export SERVER_URL=https://demo.dataverse.org\n+ \n+  Example: Change the Dataset title \n+ \n+    curl -X PUT -H X-Dataverse-key:$API_TOKEN -H 'Content-Type: application/ld+json' -d '{\"Title\": \"Submit menu test\", \"@context\":{\"Title\": \"http://purl.org/dc/terms/title\"}}' \"$SERVER_URL/api/datasets/$DATASET_ID/metadata?replace=true\"\n+\n+  Example 2: Add a description using the DATASET PID\n+\n+    curl -X PUT -H X-Dataverse-key:$API_TOKEN -H 'Content-Type: application/ld+json' -d '{\"citation:Description\": {\"dsDescription:Text\": \"New description\"}, \"@context\":{\"citation\": \"https://dataverse.org/schema/citation/\",\"dsDescription\": \"https://dataverse.org/schema/citation/dsDescription#\"}}' \"$SERVER_URL/api/datasets/:persistentId/metadata?persistentId=$DATASET_PID\"\n+\n+You should expect a 200 (\"OK\") response indicating whether a draft Dataset version was created or an existing draft was updated.\n+\n+\n+Delete Dataset Metadata\n+-----------------------\n+\n+To delete metadata for a Dataset, send a json-ld representation of the fields to delete and specify the Dataset ID (DATASET_ID) or Persistent identifier (DATASET_PID).\n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export DATASET_ID='12345'\n+  export DATASET_PID='doi:10.5072/FK2A1B2C3'\n+  export VERSION='1.0'\n+  export SERVER_URL=https://demo.dataverse.org\n+ \n+  Example: Delete the TermsOfUseAndAccess 'restrictions' value 'No restrictions' for the latest version using the DATASET PID\n+\n+    curl -X PUT -H X-Dataverse-key:$API_TOKEN -H 'Content-Type: application/ld+json' -d '{\"https://dataverse.org/schema/core#restrictions\":\"No restrictions\"}' \"$SERVER_URL/api/datasets/:persistentId/metadata/delete?persistentId=$DATASET_PID\"\n+\n+Note, this example uses the term URI directly rather than adding an '@context' element. You can use either form in any of these API calls. \n+\n+You should expect a 200 (\"OK\") response indicating whether a draft Dataset version was created or an existing draft was updated.\n+\n+\n+Create a Dataset\n+----------------\n+\n+Specifying the Content-Type as application/ld+json with the existing /api/dataverses/{id}/datasets API call (see :ref:`create-dataset-command`) supports using the same metadata format when creating a Dataset.\n+\n+With curl, this is done by adding the following header:\n+\n+.. code-block:: bash\n+\n+  -H 'Content-Type: application/ld+json' ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 91}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU2NTQwNw==", "bodyText": "Do we need this migration.tsv? It isn't loaded by default on new installations?", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r662565407", "createdAt": "2021-07-01T20:16:55Z", "author": {"login": "pdurbin"}, "path": "scripts/api/data/metadatablocks/migration.tsv", "diffHunk": "@@ -0,0 +1,5 @@\n+#metadataBlock\tname\tdataverseAlias\tdisplayName\tblockURI\t\t\t\t\t\t\t\t\t\t\t\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU2NTkxOQ==", "bodyText": "How do I specify multiple authors?", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r662565919", "createdAt": "2021-07-01T20:17:58Z", "author": {"login": "pdurbin"}, "path": "scripts/search/tests/data/dataset-finch1.jsonld", "diffHunk": "@@ -0,0 +1,26 @@\n+\n+{\n+  \"http://purl.org/dc/terms/title\": \"Darwin's Finches\",\n+  \"http://purl.org/dc/terms/subject\": \"Medicine, Health and Life Sciences\",\n+  \"http://purl.org/dc/terms/creator\": {\n+      \"https://dataverse.org/schema/citation/author#Name\": \"Finch, Fiona\",\n+      \"https://dataverse.org/schema/citation/author#Affiliation\": \"Birds Inc.\"\n+  },", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU2NjY5Ng==", "bodyText": "I'm happy to see someone updating this old API. \ud83d\ude04", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r662566696", "createdAt": "2021-07-01T20:19:39Z", "author": {"login": "pdurbin"}, "path": "src/main/java/edu/harvard/iq/dataverse/api/DatasetFieldServiceApi.java", "diffHunk": "@@ -168,7 +169,8 @@ public Response getByName(@PathParam(\"name\") String name) {\n                     .add(\"parentAllowsMultiples\", parentAllowsMultiplesDisplay)\n                     .add(\"solrFieldSearchable\", solrFieldSearchable)\n                     .add(\"solrFieldFacetable\", solrFieldFacetable)\n-                    .add(\"isRequired\", isRequired));\n+                    .add(\"isRequired\", isRequired)\n+                    .add(\"uri\", uri));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU3NDE4Mg==", "bodyText": "This should be deleted or set to fine.", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r662574182", "createdAt": "2021-07-01T20:31:23Z", "author": {"login": "pdurbin"}, "path": "src/main/java/edu/harvard/iq/dataverse/api/Datasets.java", "diffHunk": "@@ -651,6 +651,96 @@ public Response updateDraftVersion( String jsonBody, @PathParam(\"id\") String id,\n             \n         }\n     }\n+  \n+    @GET\n+    @Path(\"{id}/versions/{versionId}/metadata\")\n+    @Produces(\"application/ld+json, application/json-ld\")\n+    public Response getVersionJsonLDMetadata(@PathParam(\"id\") String id, @PathParam(\"versionId\") String versionId, @Context UriInfo uriInfo, @Context HttpHeaders headers) {\n+        try {\n+            DataverseRequest req = createDataverseRequest(findUserOrDie());\n+            DatasetVersion dsv = getDatasetVersionOrDie(req, versionId, findDatasetOrDie(id), uriInfo, headers);\n+            OREMap ore = new OREMap(dsv,\n+                    settingsService.isTrueForKey(SettingsServiceBean.Key.ExcludeEmailFromExport, false));\n+            return ok(ore.getOREMapBuilder(true));\n+\n+        } catch (WrappedResponse ex) {\n+            ex.printStackTrace();\n+            return ex.getResponse();\n+        } catch (Exception jpe) {\n+            logger.log(Level.SEVERE, \"Error getting jsonld metadata for dsv: \", jpe.getLocalizedMessage());\n+            jpe.printStackTrace();\n+            return error(Response.Status.INTERNAL_SERVER_ERROR, jpe.getLocalizedMessage());\n+        }\n+    }\n+\n+    @GET\n+    @Path(\"{id}/metadata\")\n+    @Produces(\"application/ld+json, application/json-ld\")\n+    public Response getVersionJsonLDMetadata(@PathParam(\"id\") String id, @Context UriInfo uriInfo, @Context HttpHeaders headers) {\n+        return getVersionJsonLDMetadata(id, \":draft\", uriInfo, headers);\n+    }\n+            \n+    @PUT\n+    @Path(\"{id}/metadata\")\n+    @Consumes(\"application/ld+json, application/json-ld\")\n+    public Response updateVersionMetadata(String jsonLDBody, @PathParam(\"id\") String id, @DefaultValue(\"false\") @QueryParam(\"replace\") boolean replaceTerms) {\n+\n+        try {\n+            Dataset ds = findDatasetOrDie(id);\n+            DataverseRequest req = createDataverseRequest(findUserOrDie());\n+            DatasetVersion dsv = ds.getEditVersion();\n+            boolean updateDraft = ds.getLatestVersion().isDraft();\n+            dsv = JSONLDUtil.updateDatasetVersionMDFromJsonLD(dsv, jsonLDBody, metadataBlockService, datasetFieldSvc, !replaceTerms, false);\n+            \n+            DatasetVersion managedVersion;\n+            if (updateDraft) {\n+                Dataset managedDataset = execCommand(new UpdateDatasetVersionCommand(ds, req));\n+                managedVersion = managedDataset.getEditVersion();\n+            } else {\n+                managedVersion = execCommand(new CreateDatasetVersionCommand(req, ds, dsv));\n+            }\n+            String info = updateDraft ? \"Version Updated\" : \"Version Created\";\n+            return ok(Json.createObjectBuilder().add(info, managedVersion.getVersionDate()));\n+\n+        } catch (WrappedResponse ex) {\n+            return ex.getResponse();\n+        } catch (JsonParsingException jpe) {\n+            logger.log(Level.SEVERE, \"Error parsing dataset json. Json: {0}\", jsonLDBody);\n+            return error(Status.BAD_REQUEST, \"Error parsing Json: \" + jpe.getMessage());\n+        }\n+    }\n+    \n+    @PUT\n+    @Path(\"{id}/metadata/delete\")\n+    @Consumes(\"application/ld+json, application/json-ld\")\n+    public Response deleteMetadata(String jsonLDBody, @PathParam(\"id\") String id) {\n+        logger.info(\"In delteMetadata\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 135}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU3NDMyNw==", "bodyText": "Same. Delete or set to fine.", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r662574327", "createdAt": "2021-07-01T20:31:41Z", "author": {"login": "pdurbin"}, "path": "src/main/java/edu/harvard/iq/dataverse/api/Datasets.java", "diffHunk": "@@ -651,6 +651,96 @@ public Response updateDraftVersion( String jsonBody, @PathParam(\"id\") String id,\n             \n         }\n     }\n+  \n+    @GET\n+    @Path(\"{id}/versions/{versionId}/metadata\")\n+    @Produces(\"application/ld+json, application/json-ld\")\n+    public Response getVersionJsonLDMetadata(@PathParam(\"id\") String id, @PathParam(\"versionId\") String versionId, @Context UriInfo uriInfo, @Context HttpHeaders headers) {\n+        try {\n+            DataverseRequest req = createDataverseRequest(findUserOrDie());\n+            DatasetVersion dsv = getDatasetVersionOrDie(req, versionId, findDatasetOrDie(id), uriInfo, headers);\n+            OREMap ore = new OREMap(dsv,\n+                    settingsService.isTrueForKey(SettingsServiceBean.Key.ExcludeEmailFromExport, false));\n+            return ok(ore.getOREMapBuilder(true));\n+\n+        } catch (WrappedResponse ex) {\n+            ex.printStackTrace();\n+            return ex.getResponse();\n+        } catch (Exception jpe) {\n+            logger.log(Level.SEVERE, \"Error getting jsonld metadata for dsv: \", jpe.getLocalizedMessage());\n+            jpe.printStackTrace();\n+            return error(Response.Status.INTERNAL_SERVER_ERROR, jpe.getLocalizedMessage());\n+        }\n+    }\n+\n+    @GET\n+    @Path(\"{id}/metadata\")\n+    @Produces(\"application/ld+json, application/json-ld\")\n+    public Response getVersionJsonLDMetadata(@PathParam(\"id\") String id, @Context UriInfo uriInfo, @Context HttpHeaders headers) {\n+        return getVersionJsonLDMetadata(id, \":draft\", uriInfo, headers);\n+    }\n+            \n+    @PUT\n+    @Path(\"{id}/metadata\")\n+    @Consumes(\"application/ld+json, application/json-ld\")\n+    public Response updateVersionMetadata(String jsonLDBody, @PathParam(\"id\") String id, @DefaultValue(\"false\") @QueryParam(\"replace\") boolean replaceTerms) {\n+\n+        try {\n+            Dataset ds = findDatasetOrDie(id);\n+            DataverseRequest req = createDataverseRequest(findUserOrDie());\n+            DatasetVersion dsv = ds.getEditVersion();\n+            boolean updateDraft = ds.getLatestVersion().isDraft();\n+            dsv = JSONLDUtil.updateDatasetVersionMDFromJsonLD(dsv, jsonLDBody, metadataBlockService, datasetFieldSvc, !replaceTerms, false);\n+            \n+            DatasetVersion managedVersion;\n+            if (updateDraft) {\n+                Dataset managedDataset = execCommand(new UpdateDatasetVersionCommand(ds, req));\n+                managedVersion = managedDataset.getEditVersion();\n+            } else {\n+                managedVersion = execCommand(new CreateDatasetVersionCommand(req, ds, dsv));\n+            }\n+            String info = updateDraft ? \"Version Updated\" : \"Version Created\";\n+            return ok(Json.createObjectBuilder().add(info, managedVersion.getVersionDate()));\n+\n+        } catch (WrappedResponse ex) {\n+            return ex.getResponse();\n+        } catch (JsonParsingException jpe) {\n+            logger.log(Level.SEVERE, \"Error parsing dataset json. Json: {0}\", jsonLDBody);\n+            return error(Status.BAD_REQUEST, \"Error parsing Json: \" + jpe.getMessage());\n+        }\n+    }\n+    \n+    @PUT\n+    @Path(\"{id}/metadata/delete\")\n+    @Consumes(\"application/ld+json, application/json-ld\")\n+    public Response deleteMetadata(String jsonLDBody, @PathParam(\"id\") String id) {\n+        logger.info(\"In delteMetadata\");\n+        try {\n+            Dataset ds = findDatasetOrDie(id);\n+            DataverseRequest req = createDataverseRequest(findUserOrDie());\n+            DatasetVersion dsv = ds.getEditVersion();\n+            boolean updateDraft = ds.getLatestVersion().isDraft();\n+            dsv = JSONLDUtil.deleteDatasetVersionMDFromJsonLD(dsv, jsonLDBody, metadataBlockService, datasetFieldSvc);\n+            logger.info(\"Updating ver\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 142}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU3NjU1Ng==", "bodyText": "Should this be getAsString?", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r662576556", "createdAt": "2021-07-01T20:36:00Z", "author": {"login": "pdurbin"}, "path": "src/main/java/edu/harvard/iq/dataverse/util/bagit/BagGenerator.java", "diffHunk": "@@ -816,7 +824,7 @@ private String generateInfoFile() {\n         } else {\r\n             info.append(\r\n                     // FixMe - handle description having subfields better\r\n-                    WordUtils.wrap(getSingleValue(aggregation.getAsJsonObject(descriptionTerm.getLabel()),\r\n+                    WordUtils.wrap(getSingleValue(aggregation.get(descriptionTerm.getLabel()),\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU4MDIzNQ==", "bodyText": "Ah, it seems like maybe all installations do need the new .tsv file. If so, it should be added to the script that adds them all during installation.", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r662580235", "createdAt": "2021-07-01T20:43:07Z", "author": {"login": "pdurbin"}, "path": "src/main/java/edu/harvard/iq/dataverse/util/json/JsonLDTerm.java", "diffHunk": "@@ -48,6 +45,8 @@\n     public static JsonLDTerm totalSize = JsonLDTerm.DVCore(\"totalSize\");\r\n     public static JsonLDTerm fileCount = JsonLDTerm.DVCore(\"fileCount\");\r\n     public static JsonLDTerm maxFileSize = JsonLDTerm.DVCore(\"maxFileSize\");\r\n+    \r\n+    public static JsonLDTerm metadataOnOrig = JsonLDTerm.DVCore(\"metadataOnOrig\");\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e159003877928889aa5f3293b4ae64b99dfbf8d2", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/e159003877928889aa5f3293b4ae64b99dfbf8d2", "committedDate": "2021-07-02T16:20:55Z", "message": "fix test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf8b2b52f4f795c9717cef2702e53be377651a92", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/cf8b2b52f4f795c9717cef2702e53be377651a92", "committedDate": "2021-07-02T16:24:48Z", "message": "Update doc/release-notes/6497-semantic-api.md\n\nCo-authored-by: Philip Durbin <philipdurbin@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5ff95563970fb5aac3622bea613fcae70a1d86c", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/d5ff95563970fb5aac3622bea613fcae70a1d86c", "committedDate": "2021-07-02T16:30:10Z", "message": "Update doc/sphinx-guides/source/developers/dataset-semantic-metadata-api.rst\n\nCo-authored-by: Philip Durbin <philipdurbin@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61627d161911424e3d586e2f4ffea498c02f7a80", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/61627d161911424e3d586e2f4ffea498c02f7a80", "committedDate": "2021-07-02T17:23:48Z", "message": "add create example, remove solr schema copies file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d54c68fe4b515e56fee490a302cd8464d278d2d", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/1d54c68fe4b515e56fee490a302cd8464d278d2d", "committedDate": "2021-07-02T17:55:19Z", "message": "removed debug logging"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc821808c71334ecb180deff1bbc8e467a77db8b", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/bc821808c71334ecb180deff1bbc8e467a77db8b", "committedDate": "2021-07-02T18:06:16Z", "message": "Merge branch 'IQSS/6497-semantic_api' of https://github.com/GlobalDataverseCommunityConsortium/dataverse.git into IQSS/6497-semantic_api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c1d31a59aa4b0be7de74a95efc8d1c08f693a36", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/4c1d31a59aa4b0be7de74a95efc8d1c08f693a36", "committedDate": "2021-07-02T18:20:29Z", "message": "missing header"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzAwMjYzOTcw", "url": "https://github.com/IQSS/dataverse/pull/7414#pullrequestreview-700263970", "createdAt": "2021-07-06T18:32:53Z", "commit": {"oid": "d5ff95563970fb5aac3622bea613fcae70a1d86c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNy0wNlQxODozMjo1M1rOJ5_hIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNy0wNlQxOToxNDowOVrOJ6BFiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NDc4OTI4MA==", "bodyText": "Oh! Great!", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r664789280", "createdAt": "2021-07-06T18:32:53Z", "author": {"login": "pdurbin"}, "path": "doc/sphinx-guides/source/developers/dataset-semantic-metadata-api.rst", "diffHunk": "@@ -0,0 +1,91 @@\n+Dataset Semantic Metadata API\n+=============================\n+\n+The OAI_ORE metadata export format represents Dataset metadata using json-ld (see the :doc:`/admin/metadataexport` section). As part of an RDA-supported effort to allow import of Datasets exported as Bags with an included OAI_ORE metadata file, ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU0NjUzNg=="}, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NDc5MDA0OQ==", "bodyText": "Great. Thanks.", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r664790049", "createdAt": "2021-07-06T18:34:12Z", "author": {"login": "pdurbin"}, "path": "doc/sphinx-guides/source/developers/dataset-semantic-metadata-api.rst", "diffHunk": "@@ -0,0 +1,91 @@\n+Dataset Semantic Metadata API\n+=============================\n+\n+The OAI_ORE metadata export format represents Dataset metadata using json-ld (see the :doc:`/admin/metadataexport` section). As part of an RDA-supported effort to allow import of Datasets exported as Bags with an included OAI_ORE metadata file, \n+an experimental API has been created that provides a json-ld alternative the the v1.0 API calls to get/set/delete Dataset metadata in the :doc:`/api/native-api`.\n+\n+You may prefer to work with this API if you are building a tool to import from a Bag/OAI-ORE source or already work with json-ld representations of metadata, or if you prefer the flatter json-ld representation to Dataverse software's json representation (which includes structure related to the metadata blocks involved and the type/multiplicity of the metadata fields.) \n+You may not want to use this API if you need stability and backward compatibility (the 'experimental' designation for this API implies that community feedback is desired and that, in future Dataverse software versions, the API may be modified based on that feedback).\n+\n+Note: The examples use the 'application/ld+json' mimetype. For compatibility reasons, the APIs also be used with mimetype \"application/json-ld\"\n+  \n+Get Dataset Metadata\n+--------------------\n+\n+To get the json-ld formatted metadata for a Dataset, specify the Dataset ID (DATASET_ID) or Persistent identifier (DATASET_PID), and, for specific versions, the version number.\n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export DATASET_ID='12345'\n+  export DATASET_PID='doi:10.5072/FK2A1B2C3'\n+  export VERSION='1.0'\n+  export SERVER_URL=https://demo.dataverse.org\n+ \n+  Example 1: Get metadata for version '1.0'\n+ \n+    curl -H X-Dataverse-key:$API_TOKEN -H 'Accept: application/ld+json' \"$SERVER_URL/api/datasets/$DATASET_ID/versions/$VERSION/metadata\"\n+\n+  Example 2: Get metadata for the latest version using the DATASET PID\n+\n+    curl -H X-Dataverse-key:$API_TOKEN -H 'Accept: application/ld+json' \"$SERVER_URL/api/datasets/:persistentId/metadata?persistentId=$DATASET_PID\"\n+\n+You should expect a 200 (\"OK\") response and JSON-LD mirroring the OAI-ORE representation in the returned 'data' object.\n+\n+\n+Add Dataset Metadata\n+--------------------\n+\n+To add json-ld formatted metadata for a Dataset, specify the Dataset ID (DATASET_ID) or Persistent identifier (DATASET_PID). Adding '?replace=true' will overwrite an existing metadata value. The default (replace=false) will only add new metadata or add a new value to a multi-valued field. \n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export DATASET_ID='12345'\n+  export DATASET_PID='doi:10.5072/FK2A1B2C3'\n+  export VERSION='1.0'\n+  export SERVER_URL=https://demo.dataverse.org\n+ \n+  Example: Change the Dataset title \n+ \n+    curl -X PUT -H X-Dataverse-key:$API_TOKEN -H 'Content-Type: application/ld+json' -d '{\"Title\": \"Submit menu test\", \"@context\":{\"Title\": \"http://purl.org/dc/terms/title\"}}' \"$SERVER_URL/api/datasets/$DATASET_ID/metadata?replace=true\"\n+\n+  Example 2: Add a description using the DATASET PID\n+\n+    curl -X PUT -H X-Dataverse-key:$API_TOKEN -H 'Content-Type: application/ld+json' -d '{\"citation:Description\": {\"dsDescription:Text\": \"New description\"}, \"@context\":{\"citation\": \"https://dataverse.org/schema/citation/\",\"dsDescription\": \"https://dataverse.org/schema/citation/dsDescription#\"}}' \"$SERVER_URL/api/datasets/:persistentId/metadata?persistentId=$DATASET_PID\"\n+\n+You should expect a 200 (\"OK\") response indicating whether a draft Dataset version was created or an existing draft was updated.\n+\n+\n+Delete Dataset Metadata\n+-----------------------\n+\n+To delete metadata for a Dataset, send a json-ld representation of the fields to delete and specify the Dataset ID (DATASET_ID) or Persistent identifier (DATASET_PID).\n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export DATASET_ID='12345'\n+  export DATASET_PID='doi:10.5072/FK2A1B2C3'\n+  export VERSION='1.0'\n+  export SERVER_URL=https://demo.dataverse.org\n+ \n+  Example: Delete the TermsOfUseAndAccess 'restrictions' value 'No restrictions' for the latest version using the DATASET PID\n+\n+    curl -X PUT -H X-Dataverse-key:$API_TOKEN -H 'Content-Type: application/ld+json' -d '{\"https://dataverse.org/schema/core#restrictions\":\"No restrictions\"}' \"$SERVER_URL/api/datasets/:persistentId/metadata/delete?persistentId=$DATASET_PID\"\n+\n+Note, this example uses the term URI directly rather than adding an '@context' element. You can use either form in any of these API calls. \n+\n+You should expect a 200 (\"OK\") response indicating whether a draft Dataset version was created or an existing draft was updated.\n+\n+\n+Create a Dataset\n+----------------\n+\n+Specifying the Content-Type as application/ld+json with the existing /api/dataverses/{id}/datasets API call (see :ref:`create-dataset-command`) supports using the same metadata format when creating a Dataset.\n+\n+With curl, this is done by adding the following header:\n+\n+.. code-block:: bash\n+\n+  -H 'Content-Type: application/ld+json' ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU2NDY4MQ=="}, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 91}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NDc5MTQ3Mg==", "bodyText": "Ok, let's keep discussing, I guess. \ud83d\ude04", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r664791472", "createdAt": "2021-07-06T18:36:47Z", "author": {"login": "pdurbin"}, "path": "doc/sphinx-guides/source/developers/dataset-semantic-metadata-api.rst", "diffHunk": "@@ -0,0 +1,91 @@\n+Dataset Semantic Metadata API\n+=============================\n+\n+The OAI_ORE metadata export format represents Dataset metadata using json-ld (see the :doc:`/admin/metadataexport` section). As part of an RDA-supported effort to allow import of Datasets exported as Bags with an included OAI_ORE metadata file, \n+an experimental API has been created that provides a json-ld alternative the the v1.0 API calls to get/set/delete Dataset metadata in the :doc:`/api/native-api`.\n+\n+You may prefer to work with this API if you are building a tool to import from a Bag/OAI-ORE source or already work with json-ld representations of metadata, or if you prefer the flatter json-ld representation to Dataverse software's json representation (which includes structure related to the metadata blocks involved and the type/multiplicity of the metadata fields.) \n+You may not want to use this API if you need stability and backward compatibility (the 'experimental' designation for this API implies that community feedback is desired and that, in future Dataverse software versions, the API may be modified based on that feedback).\n+\n+Note: The examples use the 'application/ld+json' mimetype. For compatibility reasons, the APIs also be used with mimetype \"application/json-ld\"\n+  \n+Get Dataset Metadata\n+--------------------\n+\n+To get the json-ld formatted metadata for a Dataset, specify the Dataset ID (DATASET_ID) or Persistent identifier (DATASET_PID), and, for specific versions, the version number.\n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export DATASET_ID='12345'\n+  export DATASET_PID='doi:10.5072/FK2A1B2C3'\n+  export VERSION='1.0'\n+  export SERVER_URL=https://demo.dataverse.org\n+ \n+  Example 1: Get metadata for version '1.0'\n+ \n+    curl -H X-Dataverse-key:$API_TOKEN -H 'Accept: application/ld+json' \"$SERVER_URL/api/datasets/$DATASET_ID/versions/$VERSION/metadata\"\n+\n+  Example 2: Get metadata for the latest version using the DATASET PID\n+\n+    curl -H X-Dataverse-key:$API_TOKEN -H 'Accept: application/ld+json' \"$SERVER_URL/api/datasets/:persistentId/metadata?persistentId=$DATASET_PID\"\n+\n+You should expect a 200 (\"OK\") response and JSON-LD mirroring the OAI-ORE representation in the returned 'data' object.\n+\n+\n+Add Dataset Metadata\n+--------------------\n+\n+To add json-ld formatted metadata for a Dataset, specify the Dataset ID (DATASET_ID) or Persistent identifier (DATASET_PID). Adding '?replace=true' will overwrite an existing metadata value. The default (replace=false) will only add new metadata or add a new value to a multi-valued field. \n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export DATASET_ID='12345'\n+  export DATASET_PID='doi:10.5072/FK2A1B2C3'\n+  export VERSION='1.0'\n+  export SERVER_URL=https://demo.dataverse.org\n+ \n+  Example: Change the Dataset title \n+ \n+    curl -X PUT -H X-Dataverse-key:$API_TOKEN -H 'Content-Type: application/ld+json' -d '{\"Title\": \"Submit menu test\", \"@context\":{\"Title\": \"http://purl.org/dc/terms/title\"}}' \"$SERVER_URL/api/datasets/$DATASET_ID/metadata?replace=true\"\n+\n+  Example 2: Add a description using the DATASET PID\n+\n+    curl -X PUT -H X-Dataverse-key:$API_TOKEN -H 'Content-Type: application/ld+json' -d '{\"citation:Description\": {\"dsDescription:Text\": \"New description\"}, \"@context\":{\"citation\": \"https://dataverse.org/schema/citation/\",\"dsDescription\": \"https://dataverse.org/schema/citation/dsDescription#\"}}' \"$SERVER_URL/api/datasets/:persistentId/metadata?persistentId=$DATASET_PID\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU2MDYyNQ=="}, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NDc5MTc4OA==", "bodyText": "Interesting. Thanks.", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r664791788", "createdAt": "2021-07-06T18:37:19Z", "author": {"login": "pdurbin"}, "path": "doc/sphinx-guides/source/developers/dataset-semantic-metadata-api.rst", "diffHunk": "@@ -0,0 +1,91 @@\n+Dataset Semantic Metadata API\n+=============================\n+\n+The OAI_ORE metadata export format represents Dataset metadata using json-ld (see the :doc:`/admin/metadataexport` section). As part of an RDA-supported effort to allow import of Datasets exported as Bags with an included OAI_ORE metadata file, \n+an experimental API has been created that provides a json-ld alternative the the v1.0 API calls to get/set/delete Dataset metadata in the :doc:`/api/native-api`.\n+\n+You may prefer to work with this API if you are building a tool to import from a Bag/OAI-ORE source or already work with json-ld representations of metadata, or if you prefer the flatter json-ld representation to Dataverse software's json representation (which includes structure related to the metadata blocks involved and the type/multiplicity of the metadata fields.) \n+You may not want to use this API if you need stability and backward compatibility (the 'experimental' designation for this API implies that community feedback is desired and that, in future Dataverse software versions, the API may be modified based on that feedback).\n+\n+Note: The examples use the 'application/ld+json' mimetype. For compatibility reasons, the APIs also be used with mimetype \"application/json-ld\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU1OTYzNg=="}, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NDc5MzU4Nw==", "bodyText": "Ok. For now I left a comment on that issue that this pull request my close it.", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r664793587", "createdAt": "2021-07-06T18:40:17Z", "author": {"login": "pdurbin"}, "path": "doc/sphinx-guides/source/developers/dataset-semantic-metadata-api.rst", "diffHunk": "@@ -0,0 +1,91 @@\n+Dataset Semantic Metadata API\n+=============================\n+\n+The OAI_ORE metadata export format represents Dataset metadata using json-ld (see the :doc:`/admin/metadataexport` section). As part of an RDA-supported effort to allow import of Datasets exported as Bags with an included OAI_ORE metadata file, \n+an experimental API has been created that provides a json-ld alternative the the v1.0 API calls to get/set/delete Dataset metadata in the :doc:`/api/native-api`.\n+\n+You may prefer to work with this API if you are building a tool to import from a Bag/OAI-ORE source or already work with json-ld representations of metadata, or if you prefer the flatter json-ld representation to Dataverse software's json representation (which includes structure related to the metadata blocks involved and the type/multiplicity of the metadata fields.) \n+You may not want to use this API if you need stability and backward compatibility (the 'experimental' designation for this API implies that community feedback is desired and that, in future Dataverse software versions, the API may be modified based on that feedback).\n+\n+Note: The examples use the 'application/ld+json' mimetype. For compatibility reasons, the APIs also be used with mimetype \"application/json-ld\"\n+  \n+Get Dataset Metadata\n+--------------------\n+\n+To get the json-ld formatted metadata for a Dataset, specify the Dataset ID (DATASET_ID) or Persistent identifier (DATASET_PID), and, for specific versions, the version number.\n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export DATASET_ID='12345'\n+  export DATASET_PID='doi:10.5072/FK2A1B2C3'\n+  export VERSION='1.0'\n+  export SERVER_URL=https://demo.dataverse.org\n+ \n+  Example 1: Get metadata for version '1.0'\n+ \n+    curl -H X-Dataverse-key:$API_TOKEN -H 'Accept: application/ld+json' \"$SERVER_URL/api/datasets/$DATASET_ID/versions/$VERSION/metadata\"\n+\n+  Example 2: Get metadata for the latest version using the DATASET PID\n+\n+    curl -H X-Dataverse-key:$API_TOKEN -H 'Accept: application/ld+json' \"$SERVER_URL/api/datasets/:persistentId/metadata?persistentId=$DATASET_PID\"\n+\n+You should expect a 200 (\"OK\") response and JSON-LD mirroring the OAI-ORE representation in the returned 'data' object.\n+\n+\n+Add Dataset Metadata\n+--------------------\n+\n+To add json-ld formatted metadata for a Dataset, specify the Dataset ID (DATASET_ID) or Persistent identifier (DATASET_PID). Adding '?replace=true' will overwrite an existing metadata value. The default (replace=false) will only add new metadata or add a new value to a multi-valued field. \n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export DATASET_ID='12345'\n+  export DATASET_PID='doi:10.5072/FK2A1B2C3'\n+  export VERSION='1.0'\n+  export SERVER_URL=https://demo.dataverse.org\n+ \n+  Example: Change the Dataset title \n+ \n+    curl -X PUT -H X-Dataverse-key:$API_TOKEN -H 'Content-Type: application/ld+json' -d '{\"Title\": \"Submit menu test\", \"@context\":{\"Title\": \"http://purl.org/dc/terms/title\"}}' \"$SERVER_URL/api/datasets/$DATASET_ID/metadata?replace=true\"\n+\n+  Example 2: Add a description using the DATASET PID\n+\n+    curl -X PUT -H X-Dataverse-key:$API_TOKEN -H 'Content-Type: application/ld+json' -d '{\"citation:Description\": {\"dsDescription:Text\": \"New description\"}, \"@context\":{\"citation\": \"https://dataverse.org/schema/citation/\",\"dsDescription\": \"https://dataverse.org/schema/citation/dsDescription#\"}}' \"$SERVER_URL/api/datasets/:persistentId/metadata?persistentId=$DATASET_PID\"\n+\n+You should expect a 200 (\"OK\") response indicating whether a draft Dataset version was created or an existing draft was updated.\n+\n+\n+Delete Dataset Metadata\n+-----------------------\n+\n+To delete metadata for a Dataset, send a json-ld representation of the fields to delete and specify the Dataset ID (DATASET_ID) or Persistent identifier (DATASET_PID).\n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export DATASET_ID='12345'\n+  export DATASET_PID='doi:10.5072/FK2A1B2C3'\n+  export VERSION='1.0'\n+  export SERVER_URL=https://demo.dataverse.org\n+ \n+  Example: Delete the TermsOfUseAndAccess 'restrictions' value 'No restrictions' for the latest version using the DATASET PID", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU2Mjg3OA=="}, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NDc5NDk2MA==", "bodyText": "Ok, I'm still learning JSON-LD myself so I guess we'll all learn together.", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r664794960", "createdAt": "2021-07-06T18:42:36Z", "author": {"login": "pdurbin"}, "path": "doc/sphinx-guides/source/developers/dataset-semantic-metadata-api.rst", "diffHunk": "@@ -0,0 +1,91 @@\n+Dataset Semantic Metadata API\n+=============================\n+\n+The OAI_ORE metadata export format represents Dataset metadata using json-ld (see the :doc:`/admin/metadataexport` section). As part of an RDA-supported effort to allow import of Datasets exported as Bags with an included OAI_ORE metadata file, \n+an experimental API has been created that provides a json-ld alternative the the v1.0 API calls to get/set/delete Dataset metadata in the :doc:`/api/native-api`.\n+\n+You may prefer to work with this API if you are building a tool to import from a Bag/OAI-ORE source or already work with json-ld representations of metadata, or if you prefer the flatter json-ld representation to Dataverse software's json representation (which includes structure related to the metadata blocks involved and the type/multiplicity of the metadata fields.) \n+You may not want to use this API if you need stability and backward compatibility (the 'experimental' designation for this API implies that community feedback is desired and that, in future Dataverse software versions, the API may be modified based on that feedback).\n+\n+Note: The examples use the 'application/ld+json' mimetype. For compatibility reasons, the APIs also be used with mimetype \"application/json-ld\"\n+  \n+Get Dataset Metadata\n+--------------------\n+\n+To get the json-ld formatted metadata for a Dataset, specify the Dataset ID (DATASET_ID) or Persistent identifier (DATASET_PID), and, for specific versions, the version number.\n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export DATASET_ID='12345'\n+  export DATASET_PID='doi:10.5072/FK2A1B2C3'\n+  export VERSION='1.0'\n+  export SERVER_URL=https://demo.dataverse.org\n+ \n+  Example 1: Get metadata for version '1.0'\n+ \n+    curl -H X-Dataverse-key:$API_TOKEN -H 'Accept: application/ld+json' \"$SERVER_URL/api/datasets/$DATASET_ID/versions/$VERSION/metadata\"\n+\n+  Example 2: Get metadata for the latest version using the DATASET PID\n+\n+    curl -H X-Dataverse-key:$API_TOKEN -H 'Accept: application/ld+json' \"$SERVER_URL/api/datasets/:persistentId/metadata?persistentId=$DATASET_PID\"\n+\n+You should expect a 200 (\"OK\") response and JSON-LD mirroring the OAI-ORE representation in the returned 'data' object.\n+\n+\n+Add Dataset Metadata\n+--------------------\n+\n+To add json-ld formatted metadata for a Dataset, specify the Dataset ID (DATASET_ID) or Persistent identifier (DATASET_PID). Adding '?replace=true' will overwrite an existing metadata value. The default (replace=false) will only add new metadata or add a new value to a multi-valued field. \n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export DATASET_ID='12345'\n+  export DATASET_PID='doi:10.5072/FK2A1B2C3'\n+  export VERSION='1.0'\n+  export SERVER_URL=https://demo.dataverse.org\n+ \n+  Example: Change the Dataset title \n+ \n+    curl -X PUT -H X-Dataverse-key:$API_TOKEN -H 'Content-Type: application/ld+json' -d '{\"Title\": \"Submit menu test\", \"@context\":{\"Title\": \"http://purl.org/dc/terms/title\"}}' \"$SERVER_URL/api/datasets/$DATASET_ID/metadata?replace=true\"\n+\n+  Example 2: Add a description using the DATASET PID\n+\n+    curl -X PUT -H X-Dataverse-key:$API_TOKEN -H 'Content-Type: application/ld+json' -d '{\"citation:Description\": {\"dsDescription:Text\": \"New description\"}, \"@context\":{\"citation\": \"https://dataverse.org/schema/citation/\",\"dsDescription\": \"https://dataverse.org/schema/citation/dsDescription#\"}}' \"$SERVER_URL/api/datasets/:persistentId/metadata?persistentId=$DATASET_PID\"\n+\n+You should expect a 200 (\"OK\") response indicating whether a draft Dataset version was created or an existing draft was updated.\n+\n+\n+Delete Dataset Metadata\n+-----------------------\n+\n+To delete metadata for a Dataset, send a json-ld representation of the fields to delete and specify the Dataset ID (DATASET_ID) or Persistent identifier (DATASET_PID).\n+\n+.. code-block:: bash\n+\n+  export API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\n+  export DATASET_ID='12345'\n+  export DATASET_PID='doi:10.5072/FK2A1B2C3'\n+  export VERSION='1.0'\n+  export SERVER_URL=https://demo.dataverse.org\n+ \n+  Example: Delete the TermsOfUseAndAccess 'restrictions' value 'No restrictions' for the latest version using the DATASET PID\n+\n+    curl -X PUT -H X-Dataverse-key:$API_TOKEN -H 'Content-Type: application/ld+json' -d '{\"https://dataverse.org/schema/core#restrictions\":\"No restrictions\"}' \"$SERVER_URL/api/datasets/:persistentId/metadata/delete?persistentId=$DATASET_PID\"\n+\n+Note, this example uses the term URI directly rather than adding an '@context' element. You can use either form in any of these API calls. ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU2MzcwMg=="}, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NDgwMTMwMQ==", "bodyText": "This was all non-obvious to me from a quick look at the code. If it's on the table to remove the metadataOnOrig functionality, I think we should. If you get other opinions that we should keep it, please document how it works.", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r664801301", "createdAt": "2021-07-06T18:50:52Z", "author": {"login": "pdurbin"}, "path": "scripts/api/data/metadatablocks/migration.tsv", "diffHunk": "@@ -0,0 +1,5 @@\n+#metadataBlock\tname\tdataverseAlias\tdisplayName\tblockURI\t\t\t\t\t\t\t\t\t\t\t\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU2NTQwNw=="}, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NDgwMzE4Nw==", "bodyText": "That's what I figured. When I was working on the Schema.org JSON-LD output I was shocked by how loosey goosey JSON-LD is.\nAt some point it might behoove us to add a little crash course on JSON-LD to the guides, or at least plenty of examples so that users get the hang of it. Otherwise, I think we can anticipate questions like \"How do I specify multiple authors?\"", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r664803187", "createdAt": "2021-07-06T18:54:03Z", "author": {"login": "pdurbin"}, "path": "scripts/search/tests/data/dataset-finch1.jsonld", "diffHunk": "@@ -0,0 +1,26 @@\n+\n+{\n+  \"http://purl.org/dc/terms/title\": \"Darwin's Finches\",\n+  \"http://purl.org/dc/terms/subject\": \"Medicine, Health and Life Sciences\",\n+  \"http://purl.org/dc/terms/creator\": {\n+      \"https://dataverse.org/schema/citation/author#Name\": \"Finch, Fiona\",\n+      \"https://dataverse.org/schema/citation/author#Affiliation\": \"Birds Inc.\"\n+  },", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU2NTkxOQ=="}, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NDgwMzQ1Ng==", "bodyText": "Cool. Why not.", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r664803456", "createdAt": "2021-07-06T18:54:27Z", "author": {"login": "pdurbin"}, "path": "src/main/java/edu/harvard/iq/dataverse/api/DatasetFieldServiceApi.java", "diffHunk": "@@ -168,7 +169,8 @@ public Response getByName(@PathParam(\"name\") String name) {\n                     .add(\"parentAllowsMultiples\", parentAllowsMultiplesDisplay)\n                     .add(\"solrFieldSearchable\", solrFieldSearchable)\n                     .add(\"solrFieldFacetable\", solrFieldFacetable)\n-                    .add(\"isRequired\", isRequired));\n+                    .add(\"isRequired\", isRequired)\n+                    .add(\"uri\", uri));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU2NjY5Ng=="}, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NDgwNDUwOA==", "bodyText": "Oh, I see the added logic now. Thanks.", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r664804508", "createdAt": "2021-07-06T18:56:09Z", "author": {"login": "pdurbin"}, "path": "src/main/java/edu/harvard/iq/dataverse/util/bagit/BagGenerator.java", "diffHunk": "@@ -816,7 +824,7 @@ private String generateInfoFile() {\n         } else {\r\n             info.append(\r\n                     // FixMe - handle description having subfields better\r\n-                    WordUtils.wrap(getSingleValue(aggregation.getAsJsonObject(descriptionTerm.getLabel()),\r\n+                    WordUtils.wrap(getSingleValue(aggregation.get(descriptionTerm.getLabel()),\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU3NjU1Ng=="}, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NDgxNDk4Nw==", "bodyText": "The capitalization seems inconsistent.\nContact and Description (title case) but also author, datasetContact and dsDescription (camel case)?\nWhat are the rules?", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r664814987", "createdAt": "2021-07-06T19:14:09Z", "author": {"login": "pdurbin"}, "path": "doc/sphinx-guides/source/_static/api/dataset-create.jsonld", "diffHunk": "@@ -0,0 +1,15 @@\n+{\n+  \"http://purl.org/dc/terms/title\": \"Darwin's Finches\",\n+  \"http://purl.org/dc/terms/subject\": \"Medicine, Health and Life Sciences\",\n+  \"http://purl.org/dc/terms/creator\": {\n+      \"https://dataverse.org/schema/citation/author#Name\": \"Finch, Fiona\",\n+      \"https://dataverse.org/schema/citation/author#Affiliation\": \"Birds Inc.\"\n+  },\n+  \"https://dataverse.org/schema/citation/Contact\": {\n+    \"https://dataverse.org/schema/citation/datasetContact#E-mail\": \"finch@mailinator.com\",\n+    \"https://dataverse.org/schema/citation/datasetContact#Name\": \"Finch, Fiona\"\n+  },\n+  \"https://dataverse.org/schema/citation/Description\": {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c1d31a59aa4b0be7de74a95efc8d1c08f693a36"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5a745d157036972194ddd790d3320c140219e6e", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/a5a745d157036972194ddd790d3320c140219e6e", "committedDate": "2021-07-08T16:32:14Z", "message": "remove metadataOnOrig per review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd37e3023489aa903393fee0f4283ee166a80900", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/bd37e3023489aa903393fee0f4283ee166a80900", "committedDate": "2021-07-08T16:32:33Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6497-semantic_api"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NzAyNDA0NjY3", "url": "https://github.com/IQSS/dataverse/pull/7414#pullrequestreview-702404667", "createdAt": "2021-07-08T18:59:58Z", "commit": {"oid": "bd37e3023489aa903393fee0f4283ee166a80900"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNy0wOFQxODo1OTo1OFrOJ7krOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNy0wOFQxODo1OTo1OFrOJ7krOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2NjQ0NjY1MQ==", "bodyText": "\ud83d\udc4d for more docs over time. I think we can live with what we have now, especially since it's experimental.", "url": "https://github.com/IQSS/dataverse/pull/7414#discussion_r666446651", "createdAt": "2021-07-08T18:59:58Z", "author": {"login": "pdurbin"}, "path": "scripts/search/tests/data/dataset-finch1.jsonld", "diffHunk": "@@ -0,0 +1,26 @@\n+\n+{\n+  \"http://purl.org/dc/terms/title\": \"Darwin's Finches\",\n+  \"http://purl.org/dc/terms/subject\": \"Medicine, Health and Life Sciences\",\n+  \"http://purl.org/dc/terms/creator\": {\n+      \"https://dataverse.org/schema/citation/author#Name\": \"Finch, Fiona\",\n+      \"https://dataverse.org/schema/citation/author#Affiliation\": \"Birds Inc.\"\n+  },", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY2MjU2NTkxOQ=="}, "originalCommit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0138ebb8a8909ed4943c00c2345278258992d2cf", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/0138ebb8a8909ed4943c00c2345278258992d2cf", "committedDate": "2021-07-13T16:54:35Z", "message": "add missing create method (in migrate PR)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13a7841b3e08e84460fbdf1a8a0405adc53bb4a4", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/13a7841b3e08e84460fbdf1a8a0405adc53bb4a4", "committedDate": "2021-07-13T18:41:24Z", "message": "No \"@id\" npe fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86a08e3362e84de51226f26cae258b52dab107af", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/86a08e3362e84de51226f26cae258b52dab107af", "committedDate": "2021-07-13T18:52:21Z", "message": "avoid npe in logging"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c64c68dff6be42299f1d0d27a9da3431167632b", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/0c64c68dff6be42299f1d0d27a9da3431167632b", "committedDate": "2021-07-13T19:39:11Z", "message": "only require \"@id\" when migrating"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e9f2f72223453f85dd81ff425c959582a127b9e", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/8e9f2f72223453f85dd81ff425c959582a127b9e", "committedDate": "2021-07-13T20:36:15Z", "message": "fix logging in create case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d7097170d7e1399f751846e3dd6de07c853fc2f", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/4d7097170d7e1399f751846e3dd6de07c853fc2f", "committedDate": "2020-03-23T17:37:31Z", "message": "initial semantic API endpoint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2befca1c389f2d170cde88083e434d923e84147", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/b2befca1c389f2d170cde88083e434d923e84147", "committedDate": "2020-03-23T17:50:08Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6497"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb6421bbd1573f2eb012f1ab49f4e9daed704372", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/fb6421bbd1573f2eb012f1ab49f4e9daed704372", "committedDate": "2020-03-24T20:29:29Z", "message": "merge new fields with existing ones"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8bc3df6a800e53530b41887de3b2f46ff449a876", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/8bc3df6a800e53530b41887de3b2f46ff449a876", "committedDate": "2020-03-27T14:27:50Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6497"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b828aa78acf217858fd4de645151213613afe48", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/5b828aa78acf217858fd4de645151213613afe48", "committedDate": "2020-04-17T18:28:04Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6497"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f472b6c17f6419380447d8fde1095f0598318086", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/f472b6c17f6419380447d8fde1095f0598318086", "committedDate": "2020-04-17T18:31:00Z", "message": "differences from IQSS/develop that break compilation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bab11f0927cb0660baddb5b49fd1bd40bed4b645", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/bab11f0927cb0660baddb5b49fd1bd40bed4b645", "committedDate": "2020-08-31T16:26:42Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6497-semantic_api\n\nConflicts:\n\tsrc/main/java/edu/harvard/iq/dataverse/api/Datasets.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d30586709792d3383d77d380521549022a3f729b", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/d30586709792d3383d77d380521549022a3f729b", "committedDate": "2020-09-08T20:01:50Z", "message": "Add jsonld lib to compact to local context"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98d978e45faa9e436eff53559174e6a7f2dd52e3", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/98d978e45faa9e436eff53559174e6a7f2dd52e3", "committedDate": "2020-09-11T19:37:24Z", "message": "use expand/compact, refactor, add :startmigration endpoint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "244370246eba5e3e02681a478a59b2373ce21f17", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/244370246eba5e3e02681a478a59b2373ce21f17", "committedDate": "2020-09-16T20:53:57Z", "message": "try fix for parse error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d44264321edc00e2744a20b6b16bd199b3dda6ba", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/d44264321edc00e2744a20b6b16bd199b3dda6ba", "committedDate": "2020-09-16T20:55:01Z", "message": "log value"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdeac97e24b9740ca7ea95759e20d6aece254f4b", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/fdeac97e24b9740ca7ea95759e20d6aece254f4b", "committedDate": "2020-09-16T21:30:39Z", "message": "return dataset"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "554e62091b8b31d79b3c65882311b6dbe3db69a8", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/554e62091b8b31d79b3c65882311b6dbe3db69a8", "committedDate": "2020-09-17T14:04:16Z", "message": "manage versionState, add debug output"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bee7731fe34153ba1f89dc00b6e474d9c5b33a01", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/bee7731fe34153ba1f89dc00b6e474d9c5b33a01", "committedDate": "2020-09-17T14:25:44Z", "message": "move debug ore generation after configuring dataset"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4cecd3f39992c895a73bbdf5bd2396518b0ce2c", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/f4cecd3f39992c895a73bbdf5bd2396518b0ce2c", "committedDate": "2020-09-17T16:16:56Z", "message": "set versionstate, simplify, move terms init outside loop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4189de0f3332ec75216c57374562a50cc4f5944", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/a4189de0f3332ec75216c57374562a50cc4f5944", "committedDate": "2020-09-17T17:30:32Z", "message": "parse version number"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0de1dba2dc6f1959c03580acdbffa465332f40a", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/e0de1dba2dc6f1959c03580acdbffa465332f40a", "committedDate": "2020-09-17T17:51:48Z", "message": "fix toStrings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "928a88e1df05300b45d7d03e0bb0f5dda73cd642", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/928a88e1df05300b45d7d03e0bb0f5dda73cd642", "committedDate": "2020-09-17T20:13:12Z", "message": "debug null pointer in DataverseFieldTypeInputLevel"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b78aed1886d4f9f52e418731e1119826f1b08c77", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/b78aed1886d4f9f52e418731e1119826f1b08c77", "committedDate": "2020-09-17T22:06:12Z", "message": "add support for fields with their own formal URI"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a47630f339d9eada23cbb12f65cd382b2c7f2d1", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/3a47630f339d9eada23cbb12f65cd382b2c7f2d1", "committedDate": "2020-09-17T22:06:32Z", "message": "allow non-published to support debugging and future use"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f8534bd690c28b1203a1979130183c573dfff2f", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/3f8534bd690c28b1203a1979130183c573dfff2f", "committedDate": "2020-09-18T15:18:21Z", "message": "refactor, use expanded version directly"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64af0e8384ecb94dcf337bc8a2b66fe83c216c30", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/64af0e8384ecb94dcf337bc8a2b66fe83c216c30", "committedDate": "2020-09-18T15:28:17Z", "message": "add modification time"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04ee08ae2a47edf72a760bfebbea8312d61be5e2", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/04ee08ae2a47edf72a760bfebbea8312d61be5e2", "committedDate": "2020-09-18T16:08:41Z", "message": "expanded has array with 1 val - handle it"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7c257382fefac53bd7374f258f9dd5a4792f5a9", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/c7c257382fefac53bd7374f258f9dd5a4792f5a9", "committedDate": "2020-09-18T16:13:10Z", "message": "log compound values to start"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc77f924b113936a4c438ca4f889f1164af16540", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/fc77f924b113936a4c438ca4f889f1164af16540", "committedDate": "2020-09-18T17:54:30Z", "message": "compact with no context for decontextualize"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2876449654628b4ef51907909eb0ceda77d0093", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/e2876449654628b4ef51907909eb0ceda77d0093", "committedDate": "2020-09-18T21:49:16Z", "message": "handle appending and compound fields"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8596ac80ef206f9141cfc9815c0e98ccf718b327", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/8596ac80ef206f9141cfc9815c0e98ccf718b327", "committedDate": "2020-09-20T14:57:53Z", "message": "sort compound field children by display order"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffbc05ad7422cbf5080c0f576986dd494946d935", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/ffbc05ad7422cbf5080c0f576986dd494946d935", "committedDate": "2020-09-22T16:15:03Z", "message": "parse date/time correctly"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0226b0d3c6cb15f3b7700eb1c259db90a9c75fa4", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/0226b0d3c6cb15f3b7700eb1c259db90a9c75fa4", "committedDate": "2020-09-22T19:41:53Z", "message": "Revert \"sort compound field children by display order\"\n\nThis reverts commit 8596ac80ef206f9141cfc9815c0e98ccf718b327."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fad62f44203210117b968ba84e4c6428aaa2fdd8", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/fad62f44203210117b968ba84e4c6428aaa2fdd8", "committedDate": "2020-09-22T19:47:29Z", "message": "typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6b19a9da2d4c54367021db830309cac445ad335", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/c6b19a9da2d4c54367021db830309cac445ad335", "committedDate": "2020-09-22T20:10:46Z", "message": "now use Uri instead of label when matching terms"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a014fc43aa41a58c856eca3c185d55959f097585", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/a014fc43aa41a58c856eca3c185d55959f097585", "committedDate": "2020-09-22T21:22:22Z", "message": "set dsfield of dsfvalue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bb5e68e3e4ceb90054d1bd085ac4c4909854813", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/5bb5e68e3e4ceb90054d1bd085ac4c4909854813", "committedDate": "2020-09-23T13:21:01Z", "message": "additional debug, always set display order"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a47fad40f9afcc3f98ef9acfe2bceb119ff4ffe", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/6a47fad40f9afcc3f98ef9acfe2bceb119ff4ffe", "committedDate": "2020-09-23T14:10:13Z", "message": "generate URIs for child types to match current ore maps"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f34da09948bd726ea92c525d861ee6ec8b3d0fb4", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/f34da09948bd726ea92c525d861ee6ec8b3d0fb4", "committedDate": "2020-09-23T14:12:51Z", "message": "allow oremap to work w/o modified date for debug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b8bbc77a75bfb37e97acd6b4d1b057bc2f0ae88", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/6b8bbc77a75bfb37e97acd6b4d1b057bc2f0ae88", "committedDate": "2020-09-23T14:49:57Z", "message": "null check on date itself"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8af09380bd21fe112e95af6a213f7f39eaf21970", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/8af09380bd21fe112e95af6a213f7f39eaf21970", "committedDate": "2020-09-23T15:01:19Z", "message": "fix compound value iteration\n\ndon't replace existing value - always add a new value, but, if not\nappending, clear the list of values to start"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79048442a4b3421769c3d6c4c913d212ec1c6133", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/79048442a4b3421769c3d6c4c913d212ec1c6133", "committedDate": "2020-09-23T15:12:31Z", "message": "fix ttype map for terms with no uri - use title not name\n\nas is done currently in generating the ORE map"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4ceee3d7dc91d2f913cfc713502656faa459c1d", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/e4ceee3d7dc91d2f913cfc713502656faa459c1d", "committedDate": "2020-09-23T20:27:00Z", "message": "handle date format variations, including DV internal ones\n\nsee note in Dataverses - using Date() versus Timestamp() causes a\ndifference in precision and, perhaps surprisingly, a difference in the\nresponse from version.getLastUpdateTime().toString() in creating the\nOREmap."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f176387c627a06dc89f67f4b266da56e4d7cb979", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/f176387c627a06dc89f67f4b266da56e4d7cb979", "committedDate": "2020-09-23T21:09:28Z", "message": "and the format in current published bags"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2724d9ebb8c543ab26eb1991d8eeeae33d13f025", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/2724d9ebb8c543ab26eb1991d8eeeae33d13f025", "committedDate": "2020-09-24T13:55:26Z", "message": "initial endpoint to release a migrated dataset"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d5006d93941a6a5f89d08ed235b10d28dfc8c80", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/7d5006d93941a6a5f89d08ed235b10d28dfc8c80", "committedDate": "2020-09-24T16:40:08Z", "message": "create metadataOnOrig field"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "925070b4bbc856127dadc238d163d3fbe563ebba", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/925070b4bbc856127dadc238d163d3fbe563ebba", "committedDate": "2020-09-24T17:43:27Z", "message": "add metadataOnOrig to solr"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "005db9753c633562987a0fe5f863d1c03a99bb6d", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/005db9753c633562987a0fe5f863d1c03a99bb6d", "committedDate": "2020-09-24T20:04:12Z", "message": "use Finalize Publication command\n\nCurate is for cases with an existing published version and migrated\ndatasets only have 1 version\n\nAlso - don't want to go through Publish command since it creates new\nversion numbers, etc."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f336cfda5bcd6ad591b22b987508abaa7e370a34", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/f336cfda5bcd6ad591b22b987508abaa7e370a34", "committedDate": "2020-09-24T21:05:50Z", "message": "add debug, allow more details in 400 responses"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0de70dd4f8a81fcaa74af63090436e6fbb46a85b", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/0de70dd4f8a81fcaa74af63090436e6fbb46a85b", "committedDate": "2020-09-24T22:03:22Z", "message": "fix date-time issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "395bb71ee512fc3e969ebd48a0e2b0f631617d80", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/395bb71ee512fc3e969ebd48a0e2b0f631617d80", "committedDate": "2020-09-25T13:26:39Z", "message": "typos"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61c0349061e54548d877cd37403d0aeebf1d19f7", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/61c0349061e54548d877cd37403d0aeebf1d19f7", "committedDate": "2020-09-25T17:00:54Z", "message": "create transfer bag type with orig files\n\nhandle no checksums on orig files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1753257836e34ccb0017a0b8a3b58f39d4aaa18d", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/1753257836e34ccb0017a0b8a3b58f39d4aaa18d", "committedDate": "2020-09-30T20:39:04Z", "message": "missing tab"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e642c65c3490c1bfd22058c9a3321a6f115426fc", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/e642c65c3490c1bfd22058c9a3321a6f115426fc", "committedDate": "2020-09-30T21:20:20Z", "message": "add type param"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df66f224d0e9fe4446f946f3a8af9ee8e258cf92", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/df66f224d0e9fe4446f946f3a8af9ee8e258cf92", "committedDate": "2020-10-06T15:25:02Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6497-semantic_api\n\nConflicts:\n\tsrc/main/java/edu/harvard/iq/dataverse/api/Datasets.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3445daac3136cfc5b9d87daafb8ac139f5a80ed6", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/3445daac3136cfc5b9d87daafb8ac139f5a80ed6", "committedDate": "2020-11-16T16:43:15Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6497-semantic_api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e1d914cc7e344b31f3b4169e9d799f3a5340b84", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/2e1d914cc7e344b31f3b4169e9d799f3a5340b84", "committedDate": "2020-11-16T19:19:27Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6497-semantic_api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ad779a2d0c7b74b5c4957d93bc1e2f3f7dab23f", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/9ad779a2d0c7b74b5c4957d93bc1e2f3f7dab23f", "committedDate": "2020-11-16T19:55:12Z", "message": "add semantic metadata api call only"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8abd55e9e6a0031e60cf701790aaced3e2a4cbd0", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/8abd55e9e6a0031e60cf701790aaced3e2a4cbd0", "committedDate": "2020-12-01T17:43:56Z", "message": "remove OREMap parameter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a35ed24a1c2721f66bec1c91ad17a38571abc43", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/1a35ed24a1c2721f66bec1c91ad17a38571abc43", "committedDate": "2020-12-01T20:34:07Z", "message": "fix error handling\n\nFWIW: We have an error handler for the\nedu.harvard.iq.dataverse.util.json.JsonParseException class but not for\njavax.json.stream.JsonParsingException which was getting caught by the\nThrowable handler and returned as a 500 error with json message {}"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b1512e71ecb7c0482f41e62a5b5b7a3eb459259", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/7b1512e71ecb7c0482f41e62a5b5b7a3eb459259", "committedDate": "2020-12-01T21:29:36Z", "message": "append to current terms"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5b54dfc6739c06bccb447103633d4dcd1f930f5", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/e5b54dfc6739c06bccb447103633d4dcd1f930f5", "committedDate": "2020-12-01T22:01:24Z", "message": "add replace param"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "578790f0b2558721f98defab8b384681246856f3", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/578790f0b2558721f98defab8b384681246856f3", "committedDate": "2020-12-02T15:34:22Z", "message": "handle append on terms - fix cut/paste errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "acee4df8ce31d9d910766560caa459b2c15374a2", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/acee4df8ce31d9d910766560caa459b2c15374a2", "committedDate": "2020-12-02T16:58:50Z", "message": "fix logic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9185126fb88970b1b3e3a448070745f232261a11", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/9185126fb88970b1b3e3a448070745f232261a11", "committedDate": "2020-12-02T16:59:09Z", "message": "specify default"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8698dc41095d03442ebb156d5b4de03c3cec1ca", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/e8698dc41095d03442ebb156d5b4de03c3cec1ca", "committedDate": "2020-12-02T17:21:56Z", "message": "make replace still append for multiple val fields"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "901efe863fb13d31dfdd8751373657f469090e2b", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/901efe863fb13d31dfdd8751373657f469090e2b", "committedDate": "2020-12-02T19:38:17Z", "message": "add migrating switch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34a28a37180c3c1a698ad359c88ff945a5ed0f53", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/34a28a37180c3c1a698ad359c88ff945a5ed0f53", "committedDate": "2020-12-03T18:13:28Z", "message": "expose uri in datasetField api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b98b2c959b2f8ad92c020e2ffb05efc5a645551", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/1b98b2c959b2f8ad92c020e2ffb05efc5a645551", "committedDate": "2020-12-03T19:27:14Z", "message": "track defined namespaces\n\nand avoid having contexts with specific entries for terms that are in a\nnamespace already"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55a8b303b124b1d9982c1aba620c443a499628c0", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/55a8b303b124b1d9982c1aba620c443a499628c0", "committedDate": "2020-12-03T20:22:37Z", "message": "define equals, avoid duplicates in list"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "966394ad33ded6939f9d606d0ca4682cb32f25a8", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/966394ad33ded6939f9d606d0ca4682cb32f25a8", "committedDate": "2020-12-04T20:27:43Z", "message": "replace string with const"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b83f7b2f134ce87e5cf2b1d7af8182b756f1faf0", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/b83f7b2f134ce87e5cf2b1d7af8182b756f1faf0", "committedDate": "2020-12-04T20:28:14Z", "message": "constant for CC0_URI"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e08f102e617fcfcdeea7482d03e5aeae8270c11", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/1e08f102e617fcfcdeea7482d03e5aeae8270c11", "committedDate": "2020-12-04T20:28:32Z", "message": "GET/DELETE endpoints"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "780630f3a953c736a7a6278db98e64c04371c5f9", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/780630f3a953c736a7a6278db98e64c04371c5f9", "committedDate": "2020-12-08T17:58:16Z", "message": "7130-handle missing contact name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc7e69cf143a62df201d8a1fe30ae0ab017b7328", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/cc7e69cf143a62df201d8a1fe30ae0ab017b7328", "committedDate": "2020-12-08T18:01:11Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6497-semantic_api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0ea36ea18d121229ed10620f4030f27017d1775", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/e0ea36ea18d121229ed10620f4030f27017d1775", "committedDate": "2020-12-11T18:16:08Z", "message": "Fix multiple description logic for info file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d0c6153f2215815b6d9be201e66fe191ed447e0", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/6d0c6153f2215815b6d9be201e66fe191ed447e0", "committedDate": "2020-12-11T18:44:51Z", "message": "put is always for :draft version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51f8f78cbf6c30a142c481587d1bb93ed1f797a1", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/51f8f78cbf6c30a142c481587d1bb93ed1f797a1", "committedDate": "2020-12-11T20:17:22Z", "message": "don't cast to String[]"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "353644a0e0bf560839841ba29bb3911ae0c03e70", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/353644a0e0bf560839841ba29bb3911ae0c03e70", "committedDate": "2020-12-11T20:17:52Z", "message": "add more logging"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2382fef9211623ba35f56c0f59accfb06c4bafa0", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/2382fef9211623ba35f56c0f59accfb06c4bafa0", "committedDate": "2020-12-11T20:34:10Z", "message": "handle unpublished versions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "243769aee31fe5c49ca93a1f168aa8ac083d493d", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/243769aee31fe5c49ca93a1f168aa8ac083d493d", "committedDate": "2020-12-11T22:27:05Z", "message": "add method that can return JsonObjectBuilder\n\nwhich can be used with existing AbstractApiBean.ok()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9bfa7c3d2f6c492b361fccd13f0bbc109d325353", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/9bfa7c3d2f6c492b361fccd13f0bbc109d325353", "committedDate": "2020-12-11T22:27:24Z", "message": "log details on failure"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60f8a99676e1b9e2c35e7f624fc4f3da58d6675d", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/60f8a99676e1b9e2c35e7f624fc4f3da58d6675d", "committedDate": "2020-12-11T22:27:55Z", "message": "multiple updates/fixes, added logging"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "464832a4c47e9234f62e92d04a960333d68a7e1e", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/464832a4c47e9234f62e92d04a960333d68a7e1e", "committedDate": "2020-12-22T19:17:51Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6497-semantic_api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e93114940d5ed79cbfa138fcf5262b90d36b83ef", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/e93114940d5ed79cbfa138fcf5262b90d36b83ef", "committedDate": "2020-12-22T20:02:12Z", "message": "fix terms retrieval"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b8189afc433e5e4d0367d7391fe707fead036fa", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/2b8189afc433e5e4d0367d7391fe707fead036fa", "committedDate": "2021-01-08T14:56:23Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6497-semantic_api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8f737c7ce334643b75139770248780611de54bf", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/e8f737c7ce334643b75139770248780611de54bf", "committedDate": "2021-01-13T22:29:12Z", "message": "date test fixes for locale"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c93260df74dee477162dc24318412974dad8329", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/1c93260df74dee477162dc24318412974dad8329", "committedDate": "2021-01-13T22:29:49Z", "message": "Java 11 update and test fixes inc. for different exception mesg"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a85c1d68b3873ef00a96ecc5681d301d77190760", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/a85c1d68b3873ef00a96ecc5681d301d77190760", "committedDate": "2021-01-14T18:36:03Z", "message": "update pom for v11 and running tests under 11"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1476a613cb2eb455e7045712d61cc4dcfd02e473", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/1476a613cb2eb455e7045712d61cc4dcfd02e473", "committedDate": "2021-01-14T18:53:37Z", "message": "Merge branch 'iqssdevelop' into IQSS/6497-semantic_api\n\nConflicts:\n\tpom.xml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a52353b8461d4d191f7e92561b3771411e895ff3", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/a52353b8461d4d191f7e92561b3771411e895ff3", "committedDate": "2021-01-14T20:36:48Z", "message": "fix for edu.harvard.iq.dataverse.api.AdminIT test fail in Java 11\n\nThe DV code tested in testLoadMetadataBlock_ErrorHandling assumed it\ncould parse the message of an ArrayOutOfBounds exception as an it to\ndetermine the column that fails. This message is now a String. Rather\nthan parse it (and fail if it changes), I modified the code so that the\nlength of the values array is visible in the catch and can be sent\ndirectly (the first out of bounds index is if/when the index is\nvalues.length)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f405abadb1bfe54eda29225624b975ff298e4a8", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/6f405abadb1bfe54eda29225624b975ff298e4a8", "committedDate": "2021-01-29T16:07:44Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6497-semantic_api\n\nConflicts:\n\tpom.xml\n\tsrc/main/java/edu/harvard/iq/dataverse/api/DatasetFieldServiceApi.java\n\tsrc/test/java/edu/harvard/iq/dataverse/dataaccess/StorageIOTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e866ae0f9bf89df5afca790d6c0893074abb73d9", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/e866ae0f9bf89df5afca790d6c0893074abb73d9", "committedDate": "2021-02-08T19:55:38Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6497-semantic_api\n\nConflicts:\n\tsrc/test/java/edu/harvard/iq/dataverse/FileMetadataTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5b8b45b5d37cfc292c8025b3ca8e09adf93a763", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/d5b8b45b5d37cfc292c8025b3ca8e09adf93a763", "committedDate": "2021-02-23T18:09:57Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6497-semantic_api\n\nConflicts:\n\tsrc/main/java/edu/harvard/iq/dataverse/api/Datasets.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56acda8945bdb88ae3b21b9bac11ddef05101b4e", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/56acda8945bdb88ae3b21b9bac11ddef05101b4e", "committedDate": "2021-04-07T21:28:27Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6497-semantic_api\n\nConflicts:\n\tconf/solr/7.7.2/schema_dv_mdb_copies.xml\n\tconf/solr/7.7.2/schema_dv_mdb_fields.xml\n\tsrc/main/java/edu/harvard/iq/dataverse/util/bagit/OREMap.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f19a1997e89ea1f6c4b66daf4070ac64619329a4", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/f19a1997e89ea1f6c4b66daf4070ac64619329a4", "committedDate": "2021-04-13T18:35:32Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6497-semantic_api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7c6b3f427e647b2d8ae69fd666fdecbd94b4b59", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/a7c6b3f427e647b2d8ae69fd666fdecbd94b4b59", "committedDate": "2021-04-26T18:32:08Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6497-semantic_api\n\nConflicts:\n\tsrc/main/java/edu/harvard/iq/dataverse/api/util/JsonResponseBuilder.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33fb8de59683747eb488fa8795241eddb0f49ae4", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/33fb8de59683747eb488fa8795241eddb0f49ae4", "committedDate": "2021-05-20T17:05:39Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6497-semantic_api\n\nConflicts:\n\tconf/solr/8.8.1/schema_dv_mdb_copies.xml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87c581f0dfc89b5c457f9c45ea985a4d552034d2", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/87c581f0dfc89b5c457f9c45ea985a4d552034d2", "committedDate": "2021-06-03T16:18:24Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6497-semantic_api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f47b268fb83f81b09ef99514ec26c6806a70c47a", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/f47b268fb83f81b09ef99514ec26c6806a70c47a", "committedDate": "2021-06-03T16:47:38Z", "message": "update StringUtils package"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d73b61d45352deb79a1064ea159a0e1cbf59586", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/6d73b61d45352deb79a1064ea159a0e1cbf59586", "committedDate": "2021-06-23T17:24:29Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6497-semantic_api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4714ea628651cd0653f98ed31f7f07de75be9472", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/4714ea628651cd0653f98ed31f7f07de75be9472", "committedDate": "2021-06-23T17:36:43Z", "message": "move metadataOnOrig out of citation block\n\nwhich makes it optional"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82a5b23842a46009c98f5da4ef671e30c9e05c37", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/82a5b23842a46009c98f5da4ef671e30c9e05c37", "committedDate": "2021-06-30T15:58:49Z", "message": "sync with migration api branch (tests, docs, bug fixes)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10ef9ff27eb38668bd06234f9bb79545782d36e7", "author": {"user": {"login": "qqmyers", "name": null}}, "url": "https://github.com/IQSS/dataverse/commit/10ef9ff27eb38668bd06234f9bb79545782d36e7", "committedDate": "2021-06-30T15:59:22Z", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/6497-semantic_api"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 681, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}