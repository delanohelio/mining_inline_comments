{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzMDAwNjIx", "number": 6893, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxMzoxODoxOVrOD5z72w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxMzoxODoxOVrOD5z72w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxOTQ2MzMxOnYy", "diffSide": "RIGHT", "path": "src/main/java/edu/harvard/iq/dataverse/ingest/IngestUtil.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxMzoxODoxOVrOGRSg2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNToxMTozNVrOGRX4xQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDc4MjI5Nw==", "bodyText": "would it be possible to combine this with findDuplicateFilenames so that the UI and api are using the same method? You're passing in the filemetadata list from the dataset version which is the param for findDuplicateFilenames", "url": "https://github.com/IQSS/dataverse/pull/6893#discussion_r420782297", "createdAt": "2020-05-06T13:18:19Z", "author": {"login": "sekmiller"}, "path": "src/main/java/edu/harvard/iq/dataverse/ingest/IngestUtil.java", "diffHunk": "@@ -100,6 +101,80 @@ public static String duplicateFilenameCheck(FileMetadata fileMetadata, Set<Strin\n         return fileName;\n     }\n \n+    /**\n+     * Given a new proposed label or directoryLabel for a file, check against\n+     * existing files if a duplicate directoryLabel/label combination would be\n+     * created.\n+     *\n+     * @param label The new label (filename) that is being proposed. Can be\n+     * null.\n+     * @param directoryLabel The new directoryLabel (file path) that is being\n+     * proposed. Can be null.\n+     * @param fileMetadatas The list fileMetadatas to be compared against,\n+     * probably from a draft.\n+     * @param dataFile The file that is being updated with a new name or path.\n+     * @return true if there is a conflict, false otherwise.\n+     */\n+    public static boolean conflictsWithExistingFilenames(String label, String directoryLabel, List<FileMetadata> fileMetadatas, DataFile dataFile) {\n+        List<String> filePathsAndNames = new ArrayList<>();\n+        for (FileMetadata fileMetadata : fileMetadatas) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ef84f80e65ecc6ab0fac51ad8a4eba45804a2d4"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDg3MDM0MQ==", "bodyText": "@sekmiller good idea. Fixed in 8d6a5c8.", "url": "https://github.com/IQSS/dataverse/pull/6893#discussion_r420870341", "createdAt": "2020-05-06T15:11:35Z", "author": {"login": "pdurbin"}, "path": "src/main/java/edu/harvard/iq/dataverse/ingest/IngestUtil.java", "diffHunk": "@@ -100,6 +101,80 @@ public static String duplicateFilenameCheck(FileMetadata fileMetadata, Set<Strin\n         return fileName;\n     }\n \n+    /**\n+     * Given a new proposed label or directoryLabel for a file, check against\n+     * existing files if a duplicate directoryLabel/label combination would be\n+     * created.\n+     *\n+     * @param label The new label (filename) that is being proposed. Can be\n+     * null.\n+     * @param directoryLabel The new directoryLabel (file path) that is being\n+     * proposed. Can be null.\n+     * @param fileMetadatas The list fileMetadatas to be compared against,\n+     * probably from a draft.\n+     * @param dataFile The file that is being updated with a new name or path.\n+     * @return true if there is a conflict, false otherwise.\n+     */\n+    public static boolean conflictsWithExistingFilenames(String label, String directoryLabel, List<FileMetadata> fileMetadatas, DataFile dataFile) {\n+        List<String> filePathsAndNames = new ArrayList<>();\n+        for (FileMetadata fileMetadata : fileMetadatas) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDc4MjI5Nw=="}, "originalCommit": {"oid": "6ef84f80e65ecc6ab0fac51ad8a4eba45804a2d4"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3358, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}