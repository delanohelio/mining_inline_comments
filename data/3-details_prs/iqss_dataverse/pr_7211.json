{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwMTk5NzAx", "number": 7211, "title": "Add API methods for reporting and cleaning up inconsistencies between the database and Solr Index", "bodyText": "Updated existing API method for detecting orphan objects in the database, and in Solr. Added a new API method for clearing all orphans.\n(#4225)\nThere was an existing Index API method, called status, which reported all the inconsistencies between the database and Solr Index. I updated this method to report the object ids, rather than the count of objects, and also implemented the \"exist in Solr but not in the database\" type of orphan.\nUpdated the code to use a Solr query cursor, to improve performance & memory management.\nCloses #4225\nI tested this in my local environment by creating a dataverse and dataset, shutting down solr, then deleting the data when solr was shutdown.", "createdAt": "2020-08-19T14:22:31Z", "url": "https://github.com/IQSS/dataverse/pull/7211", "merged": true, "mergeCommit": {"oid": "ae57981be59aaf32dc4f9bcf07ce563187e23f86"}, "closed": true, "closedAt": "2020-09-23T14:35:52Z", "author": {"login": "ekraffmiller"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAcRXsgH2gAyNDcwMTk5NzAxOjc3ZDEyZGE4Nzg5NjI5ZTJiNTljNzJlNTE1OWY3OWRhMjYxMzQyN2Y=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLZw4MgFqTQ5MzU5MDc4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "77d12da8789629e2b59c72e5159f79da2613427f", "author": {"user": {"login": "ekraffmiller", "name": "Ellen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/77d12da8789629e2b59c72e5159f79da2613427f", "committedDate": "2020-08-19T14:13:33Z", "message": "Updating existing API method for detecting orphan objects in the \ndatabase, and in Solr. Added a new API method for clearing all orphans. \n(#4225)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcwNTM1Nzc0", "url": "https://github.com/IQSS/dataverse/pull/7211#pullrequestreview-470535774", "createdAt": "2020-08-19T14:48:44Z", "commit": {"oid": "77d12da8789629e2b59c72e5159f79da2613427f"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4d8cf710731d7263c5f773a7aa77c4590edd505", "author": {"user": {"login": "ekraffmiller", "name": "Ellen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/c4d8cf710731d7263c5f773a7aa77c4590edd505", "committedDate": "2020-08-20T14:03:51Z", "message": "Add documentation for new API methods. \n(#4225)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "533aef3af7fb7b5e2318a375ffbf0523e25f2e87", "author": {"user": {"login": "ekraffmiller", "name": "Ellen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/533aef3af7fb7b5e2318a375ffbf0523e25f2e87", "committedDate": "2020-09-08T14:06:17Z", "message": "skip datafiles when checking for missing solr permissions\n(#4225)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a42d2dde32d8d9b7f97e0022a3c357b91830c94", "author": {"user": {"login": "ekraffmiller", "name": "Ellen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/4a42d2dde32d8d9b7f97e0022a3c357b91830c94", "committedDate": "2020-09-08T14:07:10Z", "message": "report on number of missing objects, rather than ids, to be consistent\nwith rest of the status message\n(#4225)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "125ea6fc1d83b14611eac3a7824412270d9ef1dc", "author": {"user": {"login": "ekraffmiller", "name": "Ellen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/125ea6fc1d83b14611eac3a7824412270d9ef1dc", "committedDate": "2020-09-08T14:07:46Z", "message": "add integration test for Index status api call\n(#4225)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e91b2ea56de4df22a1d84174b780a10a6262238", "author": {"user": {"login": "sekmiller", "name": "Stephen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/1e91b2ea56de4df22a1d84174b780a10a6262238", "committedDate": "2020-09-08T14:40:50Z", "message": "Merge branch 'develop' into 4225-stale-solr-record"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fbdac70e25f59b83e54a76a2a6f55b7436af71d7", "author": {"user": {"login": "djbrooke", "name": "Danny Brooke"}}, "url": "https://github.com/IQSS/dataverse/commit/fbdac70e25f59b83e54a76a2a6f55b7436af71d7", "committedDate": "2020-09-08T14:49:46Z", "message": "adding release notes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1MzM5MzI2", "url": "https://github.com/IQSS/dataverse/pull/7211#pullrequestreview-485339326", "createdAt": "2020-09-09T19:27:01Z", "commit": {"oid": "fbdac70e25f59b83e54a76a2a6f55b7436af71d7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxOToyNzowMVrOHPWg5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxOTo1NDozMFrOHPX5gA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTg1OTU1OQ==", "bodyText": "These docs look fine but I would prefer seeing them on this page: http://guides.dataverse.org/en/latest/admin/solr-search-index.html\nIt's nice having a single \"clear-orphans\" endpoint but is it fast enough? Will there be demand for a \"clear dataset orphan\"? I'm fine with putting \"clear-orphans\" out into the world and getting feedback about if more granularity is needed.", "url": "https://github.com/IQSS/dataverse/pull/7211#discussion_r485859559", "createdAt": "2020-09-09T19:27:01Z", "author": {"login": "pdurbin"}, "path": "doc/sphinx-guides/source/api/native-api.rst", "diffHunk": "@@ -3061,6 +3061,20 @@ Note that if you are attempting to validate a very large number of datasets in y\n  \n      asadmin set server-config.network-config.protocols.protocol.http-listener-1.http.request-timeout-seconds=3600\n \n+\n+\n+Index and Database Consistency\n+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n+\n+Get a list of all database objects that are missing in Solr, and Solr documents that are missing in the database::\n+\n+  curl $SERVER_URL/api/admin/index/status\n+\n+Remove all Solr documents that are orphaned (ie not associated with objects in the database)::\n+\n+  curl $SERVER_URL/api/admin/index/clear-orphans\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fbdac70e25f59b83e54a76a2a6f55b7436af71d7"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTg2MDA4Nw==", "bodyText": "We should fill this in before it goes to QA. If my suggestion below is followed, we would point to http://guides.dataverse.org/en/latest/admin/solr-search-index.html", "url": "https://github.com/IQSS/dataverse/pull/7211#discussion_r485860087", "createdAt": "2020-09-09T19:27:50Z", "author": {"login": "pdurbin"}, "path": "doc/release-notes/4225-stale-solr-records.md", "diffHunk": "@@ -0,0 +1,7 @@\n+## Major Use Cases\n+\n+- Administrators will be able to use new APIs to keep the Solr index and the DB in sync, allowing easier resolution of an issue that would occasionally cause search results to not load. \n+\n+## Notes for Dataverse Installation Administrators\n+\n+New API endpoints... point to Guides", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fbdac70e25f59b83e54a76a2a6f55b7436af71d7"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTg2MzU5Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             } catch (SearchException ex) {\n          \n          \n            \n                    } catch (SearchException ex) {", "url": "https://github.com/IQSS/dataverse/pull/7211#discussion_r485863596", "createdAt": "2020-09-09T19:32:28Z", "author": {"login": "pdurbin"}, "path": "src/main/java/edu/harvard/iq/dataverse/api/Index.java", "diffHunk": "@@ -384,15 +384,16 @@ public Response indexStatus() {\n         JsonObjectBuilder contentInDatabaseButStaleInOrMissingFromSolr = getContentInDatabaseButStaleInOrMissingFromSolr();\n \n         JsonObjectBuilder contentInSolrButNotDatabase;\n+        JsonObjectBuilder permissionsInSolrButNotDatabase;\n         try {\n             contentInSolrButNotDatabase = getContentInSolrButNotDatabase();\n-        } catch (SearchException ex) {\n+            permissionsInSolrButNotDatabase = getPermissionsInSolrButNotDatabase();\n+ } catch (SearchException ex) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fbdac70e25f59b83e54a76a2a6f55b7436af71d7"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTg3MzM2NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * re-indexed Solr was down when a permission was added. The permission\n          \n          \n            \n                 * re-indexed because Solr was down when a permission was added. The permission", "url": "https://github.com/IQSS/dataverse/pull/7211#discussion_r485873365", "createdAt": "2020-09-09T19:44:25Z", "author": {"login": "pdurbin"}, "path": "src/main/java/edu/harvard/iq/dataverse/search/SolrIndexServiceBean.java", "diffHunk": "@@ -532,12 +528,15 @@ public JsonObjectBuilder deleteAllFromSolrAndResetIndexTimes() throws SolrServer\n     }\n \n     /**\n-     * @todo Do we want to report the root dataverse (id 1, often) in\n-     * permissionsInDatabaseButMissingFromSolr?\n+     * \n      *\n      * @return A list of dvobject ids that should have their permissions\n      * re-indexed Solr was down when a permission was added. The permission", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fbdac70e25f59b83e54a76a2a6f55b7436af71d7"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTg3ODQ1OQ==", "bodyText": "As a possible performance optimization, since we're skipping data files anyway, perhaps instead of the dvObjectService.findAll() above we could get just a list of dataverses and datasets. I don't know if it would help with performance or not, or if performance is even a problem.", "url": "https://github.com/IQSS/dataverse/pull/7211#discussion_r485878459", "createdAt": "2020-09-09T19:50:16Z", "author": {"login": "pdurbin"}, "path": "src/main/java/edu/harvard/iq/dataverse/search/SolrIndexServiceBean.java", "diffHunk": "@@ -547,7 +546,7 @@ public JsonObjectBuilder deleteAllFromSolrAndResetIndexTimes() throws SolrServer\n             Timestamp permissionModificationTime = dvObject.getPermissionModificationTime();\n             Timestamp permissionIndexTime = dvObject.getPermissionIndexTime();\n             if (permissionIndexTime == null) {\n-                if (dvObject.getId() != rootDvId) {\n+                if (dvObject.getId() != rootDvId && !dvObject.isInstanceofDataFile()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fbdac70e25f59b83e54a76a2a6f55b7436af71d7"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTg4MjI0MA==", "bodyText": "I go back and forth on cleanup like this. One one hand it's nice not to junk up your dev environment with test data. On the other hand, if the delete fails and the whole test suite fails as a result, it's frustrating. One thing I sometimes do is put the delete calls in but don't assert that they succeed. No need to changes anything here. It's just something that popped in my head.", "url": "https://github.com/IQSS/dataverse/pull/7211#discussion_r485882240", "createdAt": "2020-09-09T19:54:30Z", "author": {"login": "pdurbin"}, "path": "src/test/java/edu/harvard/iq/dataverse/api/IndexIT.java", "diffHunk": "@@ -0,0 +1,122 @@\n+package edu.harvard.iq.dataverse.api;\n+\n+import com.jayway.restassured.RestAssured;\n+import static com.jayway.restassured.RestAssured.given;\n+import com.jayway.restassured.path.json.JsonPath;\n+import com.jayway.restassured.response.Response;\n+import static edu.harvard.iq.dataverse.api.UtilIT.API_TOKEN_HTTP_HEADER;\n+import edu.harvard.iq.dataverse.settings.SettingsServiceBean;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.logging.Logger;\n+import static javax.ws.rs.core.Response.Status.CREATED;\n+import static javax.ws.rs.core.Response.Status.NO_CONTENT;\n+import org.junit.AfterClass;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import static javax.ws.rs.core.Response.Status.OK;\n+import static junit.framework.Assert.assertEquals;\n+import org.hamcrest.CoreMatchers;\n+import static org.hamcrest.CoreMatchers.equalTo;\n+import org.junit.After;\n+\n+public class IndexIT {\n+\n+    private static final Logger logger = Logger.getLogger(IndexIT.class.getCanonicalName());\n+\n+    @BeforeClass\n+    public static void setUpClass() {\n+\n+        RestAssured.baseURI = UtilIT.getRestAssuredBaseUri();\n+\n+        Response makeSureTokenlessSearchIsEnabled = UtilIT.deleteSetting(SettingsServiceBean.Key.SearchApiRequiresToken);\n+        makeSureTokenlessSearchIsEnabled.then().assertThat()\n+                .statusCode(OK.getStatusCode());\n+\n+        Response remove = UtilIT.deleteSetting(SettingsServiceBean.Key.ThumbnailSizeLimitImage);\n+        remove.then().assertThat()\n+                .statusCode(200);\n+\n+    }\n+\n+  \n+    @Test\n+    public void testIndexStatus() {\n+\n+        Response createUser = UtilIT.createRandomUser();\n+        createUser.prettyPrint();\n+        String username = UtilIT.getUsernameFromResponse(createUser);\n+        String apiToken = UtilIT.getApiTokenFromResponse(createUser);\n+\n+        Response createDataverseResponse = UtilIT.createRandomDataverse(apiToken);\n+        createDataverseResponse.prettyPrint();\n+        String dataverseAlias = UtilIT.getAliasFromResponse(createDataverseResponse);\n+\n+        Response createDatasetResponse = UtilIT.createRandomDatasetViaNativeApi(dataverseAlias, apiToken);\n+        createDatasetResponse.prettyPrint();\n+        Integer datasetId = UtilIT.getDatasetIdFromResponse(createDatasetResponse);\n+        Response getDatasetJsonNoFiles = UtilIT.nativeGet(datasetId, apiToken);\n+        getDatasetJsonNoFiles.prettyPrint();\n+        String protocol1 = JsonPath.from(getDatasetJsonNoFiles.getBody().asString()).getString(\"data.protocol\");\n+        String authority1 = JsonPath.from(getDatasetJsonNoFiles.getBody().asString()).getString(\"data.authority\");\n+        String identifier1 = JsonPath.from(getDatasetJsonNoFiles.getBody().asString()).getString(\"data.identifier\");\n+        String dataset1PersistentId = protocol1 + \":\" + authority1 + \"/\" + identifier1;\n+\n+        Response uploadMd5File = UtilIT.uploadRandomFile(dataset1PersistentId, apiToken);\n+        uploadMd5File.prettyPrint();\n+        assertEquals(CREATED.getStatusCode(), uploadMd5File.getStatusCode());\n+   \n+        Response response = given()\n+                .header(API_TOKEN_HTTP_HEADER, apiToken)\n+                .get(\"/api/admin/index/status\");\n+        response.prettyPrint();\n+        ArrayList emptyList = new ArrayList<>();\n+        HashMap data = response.getBody().jsonPath().get(\"data.contentInDatabaseButStaleInOrMissingFromIndex\");\n+        System.out.println(data + \" \" + data.getClass());\n+        response.then().assertThat().statusCode(OK.getStatusCode())\n+                .body(\"data.contentInDatabaseButStaleInOrMissingFromIndex.dataverses\", CoreMatchers.equalTo(emptyList))\n+                .body(\"data.contentInDatabaseButStaleInOrMissingFromIndex.datasets\", CoreMatchers.equalTo(emptyList))\n+                .body(\"data.contentInIndexButNotDatabase.dataverses\", CoreMatchers.equalTo(emptyList))\n+                .body(\"data.contentInIndexButNotDatabase.datasets\", CoreMatchers.equalTo(emptyList))\n+                .body(\"data.contentInIndexButNotDatabase.files\", CoreMatchers.equalTo(emptyList))\n+                .body(\"data.permissionsInDatabaseButStaleInOrMissingFromIndex.dvobjects\", CoreMatchers.equalTo(emptyList))\n+                .body(\"data.permissionsInIndexButNotDatabase.permissions\", CoreMatchers.equalTo(emptyList));\n+        \n+        Response getDatasetJsonAfterMd5File = UtilIT.nativeGet(datasetId, apiToken);\n+        getDatasetJsonAfterMd5File.prettyPrint();\n+        getDatasetJsonAfterMd5File.then().assertThat()\n+                .body(\"data.latestVersion.files[0].dataFile.md5\", equalTo(\"0386269a5acb2c57b4eade587ff4db64\"))\n+                .body(\"data.latestVersion.files[0].dataFile.checksum.type\", equalTo(\"MD5\"))\n+                .body(\"data.latestVersion.files[0].dataFile.checksum.value\", equalTo(\"0386269a5acb2c57b4eade587ff4db64\"));\n+\n+        int fileId = JsonPath.from(getDatasetJsonAfterMd5File.getBody().asString()).getInt(\"data.latestVersion.files[0].dataFile.id\");\n+        Response deleteFile = UtilIT.deleteFile(fileId, apiToken);\n+        deleteFile.prettyPrint();\n+        deleteFile.then().assertThat()\n+                .statusCode(NO_CONTENT.getStatusCode());\n+\n+        Response deleteDatasetResponse = UtilIT.deleteDatasetViaNativeApi(datasetId, apiToken);\n+        deleteDatasetResponse.prettyPrint();\n+        deleteDatasetResponse.then().assertThat()\n+                .statusCode(OK.getStatusCode());\n+\n+        Response deleteDataverseResponse = UtilIT.deleteDataverse(dataverseAlias, apiToken);\n+        deleteDataverseResponse.prettyPrint();\n+        deleteDataverseResponse.then().assertThat()\n+                .statusCode(OK.getStatusCode());\n+\n+        Response deleteUserResponse = UtilIT.deleteUser(username);\n+        deleteUserResponse.prettyPrint();\n+        assertEquals(200, deleteUserResponse.getStatusCode());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fbdac70e25f59b83e54a76a2a6f55b7436af71d7"}, "originalPosition": 110}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1adbf71db532ef0d4e4108e90a229195cffb42b1", "author": {"user": {"login": "ekraffmiller", "name": "Ellen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/1adbf71db532ef0d4e4108e90a229195cffb42b1", "committedDate": "2020-09-10T15:45:58Z", "message": "changes based on code review for #4225"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "96e6be6af2c25a803e8b9d247dcfead5975969e0", "author": {"user": {"login": "ekraffmiller", "name": "Ellen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/96e6be6af2c25a803e8b9d247dcfead5975969e0", "committedDate": "2020-09-10T15:51:51Z", "message": "changes based on code review for #4225 - removed asserts for delete calls"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abcc9d844d50391d8a6682932fb965086c41ee14", "author": {"user": {"login": "ekraffmiller", "name": "Ellen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/abcc9d844d50391d8a6682932fb965086c41ee14", "committedDate": "2020-09-10T16:10:58Z", "message": "Merge branch '4225-stale-solr-record' of github.com:IQSS/dataverse into 4225-stale-solr-record\n\n# Conflicts:\n#\tdoc/release-notes/4225-stale-solr-records.md"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2ODQ4MTYx", "url": "https://github.com/IQSS/dataverse/pull/7211#pullrequestreview-486848161", "createdAt": "2020-09-11T14:18:23Z", "commit": {"oid": "abcc9d844d50391d8a6682932fb965086c41ee14"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75146fb862e14c4da66c474f52a644614566d2bb", "author": {"user": {"login": "sekmiller", "name": "Stephen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/75146fb862e14c4da66c474f52a644614566d2bb", "committedDate": "2020-09-11T15:15:46Z", "message": "Merge branch 'develop' into 4225-stale-solr-record"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68adf561b3fc90197c25e5726ac89b945e198442", "author": {"user": {"login": "ekraffmiller", "name": "Ellen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/68adf561b3fc90197c25e5726ac89b945e198442", "committedDate": "2020-09-17T20:45:58Z", "message": "Improved performance of API methods by making the SQL queries more \nefficient. Have the API methods return immediately, and report progress\nand method result in server.log."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5e35ad1b20c2079b6a4c8ab6ff03237bd0e7c68", "author": {"user": {"login": "ekraffmiller", "name": "Ellen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/d5e35ad1b20c2079b6a4c8ab6ff03237bd0e7c68", "committedDate": "2020-09-17T20:49:51Z", "message": "Merge branch '4225-stale-solr-record' of github.com:IQSS/dataverse into 4225-stale-solr-record"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3fee1b8bd8d27880aa1e747780964173eb483e07", "author": {"user": {"login": "ekraffmiller", "name": "Ellen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/3fee1b8bd8d27880aa1e747780964173eb483e07", "committedDate": "2020-09-21T15:11:28Z", "message": "make the indexStatus and clearOrphans optionally synchronous"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f1cc68f8bc0272d3a2ec53b363267eb506a769b", "author": {"user": {"login": "ekraffmiller", "name": "Ellen Kraffmiller"}}, "url": "https://github.com/IQSS/dataverse/commit/5f1cc68f8bc0272d3a2ec53b363267eb506a769b", "committedDate": "2020-09-21T16:19:39Z", "message": "fix compile error in compareOrphans()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d01ca830dc4e3df7719c3f1e85a95e374ed18e47", "author": {"user": {"login": "pdurbin", "name": "Philip Durbin"}}, "url": "https://github.com/IQSS/dataverse/commit/d01ca830dc4e3df7719c3f1e85a95e374ed18e47", "committedDate": "2020-09-22T15:29:02Z", "message": "match style of other curl commands #4225"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzNTkwNzg1", "url": "https://github.com/IQSS/dataverse/pull/7211#pullrequestreview-493590785", "createdAt": "2020-09-22T15:31:25Z", "commit": {"oid": "d01ca830dc4e3df7719c3f1e85a95e374ed18e47"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 750, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}