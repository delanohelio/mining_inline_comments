{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE1NjYxNjE0", "number": 7392, "title": "get dialog to close on Save Changes for groups #6792", "bodyText": "What this PR does / why we need it:\nWhen you click \"Save Changes\" on the groups page, the dialog doesn't close.\nWhich issue(s) this PR closes:\nCloses #6792\nSpecial notes for your reviewer:\nThis reverts pull request #6023 (f40d653 specifically) so I'm concerned #5967 will resurface. Mostly I'm just putting this pull request out there for discussion, so see if others have ideas about how to fix this.\nSuggestions on how to test this:\nEdit a group and click Save Changes. The dialog should close.\nDoes this PR introduce a user interface change? If mockups are available, please link/include them here:\nNo, apart from a dialog closing properly. It looks like this:\n\nIs there a release notes update needed for this change?:\nYes but I haven't added one yet because I'm not sure this is the fix we want.\nAdditional documentation:\nNone.", "createdAt": "2020-11-04T21:56:15Z", "url": "https://github.com/IQSS/dataverse/pull/7392", "merged": true, "mergeCommit": {"oid": "9f45e89bb8feba7f453320f2af3a5fe59126e78f"}, "closed": true, "closedAt": "2020-11-16T17:19:50Z", "author": {"login": "pdurbin"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZU8WtAH2gAyNTE1NjYxNjE0OmUwZmMxZjgyOTRhNDk1YjQwNTNkZmFiZjFkZTZhMjVjNDAyOTIxYzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdcNOh2gFqTUzMDM5MDI1OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e0fc1f8294a495b4053dfabf1de6a25c402921c8", "author": {"user": {"login": "pdurbin", "name": "Philip Durbin"}}, "url": "https://github.com/IQSS/dataverse/commit/e0fc1f8294a495b4053dfabf1de6a25c402921c8", "committedDate": "2020-11-04T21:49:22Z", "message": "get dialog to close on Save Changes for groups #6792"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b41d428cfe5ee1c6a62c56ec5f9820c84f10c11d", "author": {"user": {"login": "pdurbin", "name": "Philip Durbin"}}, "url": "https://github.com/IQSS/dataverse/commit/b41d428cfe5ee1c6a62c56ec5f9820c84f10c11d", "committedDate": "2020-11-12T18:25:54Z", "message": "Revert \"get dialog to close on Save Changes for groups #6792\"\n\nThis reverts commit e0fc1f8294a495b4053dfabf1de6a25c402921c8.\n\nWe're going to change @all instead."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b141161286151a1114a6ec723ae35e3cd3e3d86", "author": {"user": {"login": "pdurbin", "name": "Philip Durbin"}}, "url": "https://github.com/IQSS/dataverse/commit/8b141161286151a1114a6ec723ae35e3cd3e3d86", "committedDate": "2020-11-12T18:26:46Z", "message": "for groups, get Save Changes dialog to close #6792"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2e37b5590490a1dc45dec47385f0a620cc2f3ff", "author": {"user": {"login": "pdurbin", "name": "Philip Durbin"}}, "url": "https://github.com/IQSS/dataverse/commit/a2e37b5590490a1dc45dec47385f0a620cc2f3ff", "committedDate": "2020-11-12T18:28:23Z", "message": "Merge branch 'develop' into 6792-manage-groups #6792"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5Mzc3Mzcw", "url": "https://github.com/IQSS/dataverse/pull/7392#pullrequestreview-529377370", "createdAt": "2020-11-12T18:35:12Z", "commit": {"oid": "a2e37b5590490a1dc45dec47385f0a620cc2f3ff"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxODozNToxMlrOHyIYwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxODozNzo0NlrOHyIeyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjMyODI1OA==", "bodyText": "I think this will also need the messagePanel.", "url": "https://github.com/IQSS/dataverse/pull/7392#discussion_r522328258", "createdAt": "2020-11-12T18:35:12Z", "author": {"login": "scolapasta"}, "path": "src/main/webapp/manage-groups.xhtml", "diffHunk": "@@ -92,8 +92,8 @@\n                             <span class=\"glyphicon glyphicon-warning-sign text-warning\"/> <span class=\"text-warning\">#{bundle['dataverse.manageGroups.tab.action.btn.delete.dialog.tip']}</span>\n                         </p>\n                         <div class=\"button-block\">\n-                            <p:commandButton styleClass=\"btn btn-default\" value=\"#{bundle.continue}\" onclick=\"PF('deleteConfirmation').hide()\" action=\"#{manageGroupsPage.deleteGroup()}\" update=\"@all\"/>\n-                            <p:commandButton styleClass=\"btn btn-link\" value=\"#{bundle.cancel}\" onclick=\"PF('deleteConfirmation').hide()\" action=\"#{manageGroupsPage.unrenderDeletePopup()}\" update=\"@all\"/>\n+                            <p:commandButton styleClass=\"btn btn-default\" value=\"#{bundle.continue}\" onclick=\"PF('deleteConfirmation').hide()\" action=\"#{manageGroupsPage.deleteGroup()}\" update=\"manageGroupsForm\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2e37b5590490a1dc45dec47385f0a620cc2f3ff"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjMyODM4MQ==", "bodyText": "I think this will also need the messagePanel.", "url": "https://github.com/IQSS/dataverse/pull/7392#discussion_r522328381", "createdAt": "2020-11-12T18:35:20Z", "author": {"login": "scolapasta"}, "path": "src/main/webapp/manage-groups.xhtml", "diffHunk": "@@ -92,8 +92,8 @@\n                             <span class=\"glyphicon glyphicon-warning-sign text-warning\"/> <span class=\"text-warning\">#{bundle['dataverse.manageGroups.tab.action.btn.delete.dialog.tip']}</span>\n                         </p>\n                         <div class=\"button-block\">\n-                            <p:commandButton styleClass=\"btn btn-default\" value=\"#{bundle.continue}\" onclick=\"PF('deleteConfirmation').hide()\" action=\"#{manageGroupsPage.deleteGroup()}\" update=\"@all\"/>\n-                            <p:commandButton styleClass=\"btn btn-link\" value=\"#{bundle.cancel}\" onclick=\"PF('deleteConfirmation').hide()\" action=\"#{manageGroupsPage.unrenderDeletePopup()}\" update=\"@all\"/>\n+                            <p:commandButton styleClass=\"btn btn-default\" value=\"#{bundle.continue}\" onclick=\"PF('deleteConfirmation').hide()\" action=\"#{manageGroupsPage.deleteGroup()}\" update=\"manageGroupsForm\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2e37b5590490a1dc45dec47385f0a620cc2f3ff"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjMyODQ2OA==", "bodyText": "I think this will also need the messagePanel.", "url": "https://github.com/IQSS/dataverse/pull/7392#discussion_r522328468", "createdAt": "2020-11-12T18:35:29Z", "author": {"login": "scolapasta"}, "path": "src/main/webapp/manage-groups.xhtml", "diffHunk": "@@ -171,7 +171,7 @@\n                             <p:commandButton id=\"saveGroup\" styleClass=\"btn btn-default\"\n                                            actionListener=\"#{manageGroupsPage.saveExplicitGroup}\"\n                                            value=\"#{bundle.saveChanges}\"\n-                                           update=\"@all\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2e37b5590490a1dc45dec47385f0a620cc2f3ff"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjMyOTgwMA==", "bodyText": "this is not directly related but a good time for cleanup, I think - other cancel buttons, just hide popups instead of calling the backing bean. In this case, there seems to be a rendered that is set and unset and feels like it could go away. See for example how the view group dialog on this very same page does not have a rendered attribute.", "url": "https://github.com/IQSS/dataverse/pull/7392#discussion_r522329800", "createdAt": "2020-11-12T18:37:46Z", "author": {"login": "scolapasta"}, "path": "src/main/webapp/manage-groups.xhtml", "diffHunk": "@@ -92,8 +92,8 @@\n                             <span class=\"glyphicon glyphicon-warning-sign text-warning\"/> <span class=\"text-warning\">#{bundle['dataverse.manageGroups.tab.action.btn.delete.dialog.tip']}</span>\n                         </p>\n                         <div class=\"button-block\">\n-                            <p:commandButton styleClass=\"btn btn-default\" value=\"#{bundle.continue}\" onclick=\"PF('deleteConfirmation').hide()\" action=\"#{manageGroupsPage.deleteGroup()}\" update=\"@all\"/>\n-                            <p:commandButton styleClass=\"btn btn-link\" value=\"#{bundle.cancel}\" onclick=\"PF('deleteConfirmation').hide()\" action=\"#{manageGroupsPage.unrenderDeletePopup()}\" update=\"@all\"/>\n+                            <p:commandButton styleClass=\"btn btn-default\" value=\"#{bundle.continue}\" onclick=\"PF('deleteConfirmation').hide()\" action=\"#{manageGroupsPage.deleteGroup()}\" update=\"manageGroupsForm\"/>\n+                            <p:commandButton styleClass=\"btn btn-link\" value=\"#{bundle.cancel}\" onclick=\"PF('deleteConfirmation').hide()\" action=\"#{manageGroupsPage.unrenderDeletePopup()}\" update=\"manageGroupsForm\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2e37b5590490a1dc45dec47385f0a620cc2f3ff"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79301e6998377b7951282545f0a5fdb4a696d0c7", "author": {"user": {"login": "pdurbin", "name": "Philip Durbin"}}, "url": "https://github.com/IQSS/dataverse/commit/79301e6998377b7951282545f0a5fdb4a696d0c7", "committedDate": "2020-11-13T20:20:46Z", "message": "update message panel, remove showDeletePopup cruft #6792"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwMzkwMjU4", "url": "https://github.com/IQSS/dataverse/pull/7392#pullrequestreview-530390258", "createdAt": "2020-11-13T20:31:45Z", "commit": {"oid": "79301e6998377b7951282545f0a5fdb4a696d0c7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 670, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}