{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ0NDgwNjM1", "number": 7057, "title": "7056 Skip unknown types in a dataset which cause the whole dataset to\u2026", "bodyText": "\u2026 fail from being harvested\nWhat this PR does / why we need it: Makes datasets with unknown types harvestable using dataverse_json\nWhich issue(s) this PR closes: 7056\nCloses #7056\nSpecial notes for your reviewer: Good fix\nSuggestions on how to test this: Harvest the Princeton_Authored_Datasets OAI set from the harvard repo using dataverse_json. Without this fix you will get 267 successful harvest and 2 fails. With the fix you will harvest all 269 datasets. The controversial datasets are https://dataverse.harvard.edu/api/datasets/export?exporter=dataverse_json&persistentId=doi:10.7910/DVN/B6OJKG and https://dataverse.harvard.edu/api/datasets/export?exporter=dataverse_json&persistentId=doi:10.7910/DVN/I5O6OS.\nDoes this PR introduce a user interface change? If mockups are available, please link/include them here: No\nIs there a release notes update needed for this change?: I think it's an important change for harvesting from another dataverse.\nAdditional documentation: N/A", "createdAt": "2020-07-06T00:12:36Z", "url": "https://github.com/IQSS/dataverse/pull/7057", "merged": true, "mergeCommit": {"oid": "865c57b0820793ef9c18625b0308eced6ef3e361"}, "closed": true, "closedAt": "2020-07-13T19:18:48Z", "author": {"login": "JingMa87"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcyFxtZgH2gAyNDQ0NDgwNjM1OmU0ZmVmMWRhYjBjMzM5ZDViZjVmNzVkNGJlZWRkYWZkZjViYTA5NDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABczceiZgH2gAyNDQ0NDgwNjM1OjA1N2E4YWY0OTM1ODE3YzU1MWIzYzA1NzM5ZmYzYTc2OTcwNGU1NTI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e4fef1dab0c339d5bf5f75d4beeddafdf5ba0947", "author": {"user": {"login": "JingMa87", "name": "Jing Ma"}}, "url": "https://github.com/IQSS/dataverse/commit/e4fef1dab0c339d5bf5f75d4beeddafdf5ba0947", "committedDate": "2020-07-06T00:06:07Z", "message": "7056 Skip unknown types in a dataset which cause the whole dataset to fail from being harvested"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NzMxNzU2", "url": "https://github.com/IQSS/dataverse/pull/7057#pullrequestreview-445731756", "createdAt": "2020-07-09T15:31:30Z", "commit": {"oid": "e4fef1dab0c339d5bf5f75d4beeddafdf5ba0947"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxNTozMTozMFrOGvWjWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxNTozNzo1OFrOGvW0ig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjMwNTc1Mw==", "bodyText": "I mentioned this in a review on another pull request but we favor using the full import statement instead of wildcards.", "url": "https://github.com/IQSS/dataverse/pull/7057#discussion_r452305753", "createdAt": "2020-07-09T15:31:30Z", "author": {"login": "pdurbin"}, "path": "src/main/java/edu/harvard/iq/dataverse/util/json/JsonParser.java", "diffHunk": "@@ -1,23 +1,7 @@\n package edu.harvard.iq.dataverse.util.json;\n \n import com.google.gson.Gson;\n-import edu.harvard.iq.dataverse.ControlledVocabularyValue;\n-import edu.harvard.iq.dataverse.DataFile;\n-import edu.harvard.iq.dataverse.DataFileCategory;\n-import edu.harvard.iq.dataverse.Dataset;\n-import edu.harvard.iq.dataverse.DatasetField;\n-import edu.harvard.iq.dataverse.DatasetFieldConstant;\n-import edu.harvard.iq.dataverse.DatasetFieldCompoundValue;\n-import edu.harvard.iq.dataverse.DatasetFieldServiceBean;\n-import edu.harvard.iq.dataverse.DatasetFieldType;\n-import edu.harvard.iq.dataverse.DatasetFieldValue;\n-import edu.harvard.iq.dataverse.DatasetVersion;\n-import edu.harvard.iq.dataverse.Dataverse;\n-import edu.harvard.iq.dataverse.DataverseContact;\n-import edu.harvard.iq.dataverse.DataverseTheme;\n-import edu.harvard.iq.dataverse.FileMetadata;\n-import edu.harvard.iq.dataverse.MetadataBlockServiceBean;\n-import edu.harvard.iq.dataverse.TermsOfUseAndAccess;\n+import edu.harvard.iq.dataverse.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4fef1dab0c339d5bf5f75d4beeddafdf5ba0947"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjMxMDE1NA==", "bodyText": "Is this going to happen a lot? If so, should it be reduced from \"info\" to \"fine\" so it doesn't clutter the logs?", "url": "https://github.com/IQSS/dataverse/pull/7057#discussion_r452310154", "createdAt": "2020-07-09T15:37:58Z", "author": {"login": "pdurbin"}, "path": "src/main/java/edu/harvard/iq/dataverse/util/json/JsonParser.java", "diffHunk": "@@ -566,7 +553,8 @@ public DatasetField parseField(JsonObject json, Boolean testType) throws JsonPar\n     \n \n         if (type == null) {\n-            throw new JsonParseException(\"Can't find type '\" + json.getString(\"typeName\", \"\") + \"'\");\n+            logger.info(\"Can't find type '\" + json.getString(\"typeName\", \"\") + \"'\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4fef1dab0c339d5bf5f75d4beeddafdf5ba0947"}, "originalPosition": 59}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e0ea12d77393cfc765d8b2233cc49b844ab9819", "author": {"user": {"login": "JingMa87", "name": "Jing Ma"}}, "url": "https://github.com/IQSS/dataverse/commit/1e0ea12d77393cfc765d8b2233cc49b844ab9819", "committedDate": "2020-07-10T05:00:19Z", "message": "4597 Change log level to fine."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "057a8af4935817c551b3c05739ff3a769704e552", "author": {"user": {"login": "JingMa87", "name": "Jing Ma"}}, "url": "https://github.com/IQSS/dataverse/commit/057a8af4935817c551b3c05739ff3a769704e552", "committedDate": "2020-07-10T05:06:55Z", "message": "4597 Change back to full import statements."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 881, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}