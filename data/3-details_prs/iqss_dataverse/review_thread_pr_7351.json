{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA4ODczNTg5", "number": 7351, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxODo1Nzo0M1rOExVAEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxODo1Nzo0M1rOExVAEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwMTU5NzYzOnYy", "diffSide": "RIGHT", "path": "doc/sphinx-guides/source/admin/mail-groups.rst", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxODo1Nzo0M1rOHnaJ-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QyMToyNjowNFrOHne4Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTA4NTA0OA==", "bodyText": "Can you explain a little more what you mean by this? what is cached and when?", "url": "https://github.com/IQSS/dataverse/pull/7351#discussion_r511085048", "createdAt": "2020-10-23T18:57:43Z", "author": {"login": "scolapasta"}, "path": "doc/sphinx-guides/source/admin/mail-groups.rst", "diffHunk": "@@ -55,6 +55,36 @@ To load it into your Dataverse installation, either use a ``POST`` or ``PUT`` re\n \n ``curl -X POST -H 'Content-type: application/json' http://localhost:8080/api/admin/groups/domain --upload-file domainGroup1.json``\n \n+Matching with domains or regular expressions\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+Adding simple domain names requires exact matches of user email domains and the configured domains of a group.\n+Although you could add multiple domains to a group, those still require exact matches.\n+\n+In addition, you can use one or multiple regular expressions instead of simple domains for a group. Those\n+should not be mixed, although it would work. Regular expressions still require exact matches, but are way more flexible.\n+\n+Some hints:\n+\n+- Due to their excessive CPU usage, regular expressions should be used rarely.\n+- Also due to their CPU usage, all domain groups are cached. Cache updates when groups change via API.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c10e11b3db51e9f712828c49834ad55fbea63e62"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTEyNzU2Nw==", "bodyText": "The singleton has a copy of the groups in memory (instance variables).\nEverytime authorization happens, the regular expressions aren't recompiled, which would be a huge waste of CPU resources. In other words: the singleton is a facade for the rarely changing group data.\nThis \"cache\" is updated (compiling the regex) on startup and when domain groups are changed via CRUD API actions (not during read, obviously).\nThis might not be necessary to mention in the guides, as an admin should never notice anything of it. I left it there for FWIW.", "url": "https://github.com/IQSS/dataverse/pull/7351#discussion_r511127567", "createdAt": "2020-10-23T19:57:22Z", "author": {"login": "poikilotherm"}, "path": "doc/sphinx-guides/source/admin/mail-groups.rst", "diffHunk": "@@ -55,6 +55,36 @@ To load it into your Dataverse installation, either use a ``POST`` or ``PUT`` re\n \n ``curl -X POST -H 'Content-type: application/json' http://localhost:8080/api/admin/groups/domain --upload-file domainGroup1.json``\n \n+Matching with domains or regular expressions\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+Adding simple domain names requires exact matches of user email domains and the configured domains of a group.\n+Although you could add multiple domains to a group, those still require exact matches.\n+\n+In addition, you can use one or multiple regular expressions instead of simple domains for a group. Those\n+should not be mixed, although it would work. Regular expressions still require exact matches, but are way more flexible.\n+\n+Some hints:\n+\n+- Due to their excessive CPU usage, regular expressions should be used rarely.\n+- Also due to their CPU usage, all domain groups are cached. Cache updates when groups change via API.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTA4NTA0OA=="}, "originalCommit": {"oid": "c10e11b3db51e9f712828c49834ad55fbea63e62"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE2MjQyMg==", "bodyText": "Ah, yeah, I think Admins won't care about that detail - I think it's safe to remove.", "url": "https://github.com/IQSS/dataverse/pull/7351#discussion_r511162422", "createdAt": "2020-10-23T21:26:04Z", "author": {"login": "scolapasta"}, "path": "doc/sphinx-guides/source/admin/mail-groups.rst", "diffHunk": "@@ -55,6 +55,36 @@ To load it into your Dataverse installation, either use a ``POST`` or ``PUT`` re\n \n ``curl -X POST -H 'Content-type: application/json' http://localhost:8080/api/admin/groups/domain --upload-file domainGroup1.json``\n \n+Matching with domains or regular expressions\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+Adding simple domain names requires exact matches of user email domains and the configured domains of a group.\n+Although you could add multiple domains to a group, those still require exact matches.\n+\n+In addition, you can use one or multiple regular expressions instead of simple domains for a group. Those\n+should not be mixed, although it would work. Regular expressions still require exact matches, but are way more flexible.\n+\n+Some hints:\n+\n+- Due to their excessive CPU usage, regular expressions should be used rarely.\n+- Also due to their CPU usage, all domain groups are cached. Cache updates when groups change via API.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTA4NTA0OA=="}, "originalCommit": {"oid": "c10e11b3db51e9f712828c49834ad55fbea63e62"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3181, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}