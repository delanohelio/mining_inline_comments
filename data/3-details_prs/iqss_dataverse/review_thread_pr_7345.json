{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3ODMzMjQ1", "number": 7345, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxOTo0NDo0MFrOExWh9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxOTo0NDo0MFrOExWh9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIwMTg0ODIzOnYy", "diffSide": "RIGHT", "path": "doc/sphinx-guides/source/api/native-api.rst", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxOTo0NDo0MFrOHncNjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxMzoyNjowMVrOHo8BxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTExODczNQ==", "bodyText": "Unless I'm missing something, he admin api is blocked off (rightly so), so external tools would not be able to call this. Do we have other user APIs, if so this should go there. (if not, we should create something like \"/api/users/\"*)\n\nI've never been a fan of the plural, but we should be consistent with \"datasets\", \"dataverses\", etc.\n\nAlso, we should be getting the token from the header, like we do from other APIs.", "url": "https://github.com/IQSS/dataverse/pull/7345#discussion_r511118735", "createdAt": "2020-10-23T19:44:40Z", "author": {"login": "scolapasta"}, "path": "doc/sphinx-guides/source/api/native-api.rst", "diffHunk": "@@ -2875,8 +2875,15 @@ Sample output using \"dataverseAdmin\" as the ``identifier``::\n       \"superuser\": true,\n       \"affiliation\": \"Dataverse.org\"\n     }\n+    \n+Alternatively you may pass a user's api ``token`` to retrieve the same output::\n+   \n+    GET http://$SERVER/api/admin/authenticatedUsers/token/$token", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "977188f635095b340663888cfc3ad97502f91f25"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTEyNzQzMw==", "bodyText": "My bad, I assumed that since it was getting the same info it should have the same permissions required. I will change/fix.", "url": "https://github.com/IQSS/dataverse/pull/7345#discussion_r511127433", "createdAt": "2020-10-23T19:57:02Z", "author": {"login": "sekmiller"}, "path": "doc/sphinx-guides/source/api/native-api.rst", "diffHunk": "@@ -2875,8 +2875,15 @@ Sample output using \"dataverseAdmin\" as the ``identifier``::\n       \"superuser\": true,\n       \"affiliation\": \"Dataverse.org\"\n     }\n+    \n+Alternatively you may pass a user's api ``token`` to retrieve the same output::\n+   \n+    GET http://$SERVER/api/admin/authenticatedUsers/token/$token", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTExODczNQ=="}, "originalCommit": {"oid": "977188f635095b340663888cfc3ad97502f91f25"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE0NjA4OA==", "bodyText": "I think as it is, the only token you can get info about is the one you already have, and it really functions like a /api/users/me call. Does anyone need to use one apitoken to check other ones? If not, and if this call should allow a header, then perhaps it shouldn't also have a token path parameter (just the header or &key= query param) to avoid scanners.", "url": "https://github.com/IQSS/dataverse/pull/7345#discussion_r511146088", "createdAt": "2020-10-23T20:42:37Z", "author": {"login": "qqmyers"}, "path": "doc/sphinx-guides/source/api/native-api.rst", "diffHunk": "@@ -2875,8 +2875,15 @@ Sample output using \"dataverseAdmin\" as the ``identifier``::\n       \"superuser\": true,\n       \"affiliation\": \"Dataverse.org\"\n     }\n+    \n+Alternatively you may pass a user's api ``token`` to retrieve the same output::\n+   \n+    GET http://$SERVER/api/admin/authenticatedUsers/token/$token", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTExODczNQ=="}, "originalCommit": {"oid": "977188f635095b340663888cfc3ad97502f91f25"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE2MTMzNA==", "bodyText": "Yes, I left that part out, but by getting the token from the header, it doesn't need to have a token path parameter.", "url": "https://github.com/IQSS/dataverse/pull/7345#discussion_r511161334", "createdAt": "2020-10-23T21:22:46Z", "author": {"login": "scolapasta"}, "path": "doc/sphinx-guides/source/api/native-api.rst", "diffHunk": "@@ -2875,8 +2875,15 @@ Sample output using \"dataverseAdmin\" as the ``identifier``::\n       \"superuser\": true,\n       \"affiliation\": \"Dataverse.org\"\n     }\n+    \n+Alternatively you may pass a user's api ``token`` to retrieve the same output::\n+   \n+    GET http://$SERVER/api/admin/authenticatedUsers/token/$token", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTExODczNQ=="}, "originalCommit": {"oid": "977188f635095b340663888cfc3ad97502f91f25"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjA1ODIxNw==", "bodyText": "For documentation purposes, we already have a \"Get All Notifications by User\" endpoint and it probably makes sense to put the new docs about getting your user info near these older docs, or vice versa: https://guides.dataverse.org/en/5.1.1/api/native-api.html#get-all-notifications-by-user", "url": "https://github.com/IQSS/dataverse/pull/7345#discussion_r512058217", "createdAt": "2020-10-26T15:38:16Z", "author": {"login": "pdurbin"}, "path": "doc/sphinx-guides/source/api/native-api.rst", "diffHunk": "@@ -2875,8 +2875,15 @@ Sample output using \"dataverseAdmin\" as the ``identifier``::\n       \"superuser\": true,\n       \"affiliation\": \"Dataverse.org\"\n     }\n+    \n+Alternatively you may pass a user's api ``token`` to retrieve the same output::\n+   \n+    GET http://$SERVER/api/admin/authenticatedUsers/token/$token", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTExODczNQ=="}, "originalCommit": {"oid": "977188f635095b340663888cfc3ad97502f91f25"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjY4ODU4MQ==", "bodyText": "As discussed, I moved the endpoint to the api/users path. I also moved the doc as suggested by Phil. that whole native api doc needs some reorganization work especially with respect to user related end points.", "url": "https://github.com/IQSS/dataverse/pull/7345#discussion_r512688581", "createdAt": "2020-10-27T13:26:01Z", "author": {"login": "sekmiller"}, "path": "doc/sphinx-guides/source/api/native-api.rst", "diffHunk": "@@ -2875,8 +2875,15 @@ Sample output using \"dataverseAdmin\" as the ``identifier``::\n       \"superuser\": true,\n       \"affiliation\": \"Dataverse.org\"\n     }\n+    \n+Alternatively you may pass a user's api ``token`` to retrieve the same output::\n+   \n+    GET http://$SERVER/api/admin/authenticatedUsers/token/$token", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTExODczNQ=="}, "originalCommit": {"oid": "977188f635095b340663888cfc3ad97502f91f25"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3175, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}