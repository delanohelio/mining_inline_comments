{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2Nzg5NzM3", "number": 6659, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQyMTowOTo0NlrODg2oAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQyMToyNToyMlrODg27Tw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1Nzc2MDAwOnYy", "diffSide": "RIGHT", "path": "src/main/webapp/permissions-manage-files.xhtml", "isResolved": true, "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQyMTowOTo0NlrOFrSfyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxOTowMDoxN1rOFrzrqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDkzNjEzOQ==", "bodyText": "This checkbox for \"Include Deleted Files\" displays at the top of page, rather than at the top of the table it relates to. I suggest moving it down, next to the file count, above the file table in the Restricted Files panel.", "url": "https://github.com/IQSS/dataverse/pull/6659#discussion_r380936139", "createdAt": "2020-02-18T21:09:46Z", "author": {"login": "mheppler"}, "path": "src/main/webapp/permissions-manage-files.xhtml", "diffHunk": "@@ -25,6 +25,11 @@\n             <ui:param name=\"showMessagePanel\" value=\"false\"/>\n             <ui:define name=\"body\">\n                 <h:form id=\"rolesPermissionsForm\" styleClass=\"margin-top\">\n+                    <div class=\"panel-group\">\n+                    <p:selectBooleanCheckbox value=\"#{manageFilePermissionsPage.showDeleted}\" itemLabel=\"#{bundle['dataverse.permissionsFiles.files.includeDeleted']}\" onchange=\"#{manageFilePermissionsPage.init()}\" >", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8fbc2b41ce741014e6db1c4a655f64b3c94e76ea"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTM1NTQyMw==", "bodyText": "I think we need to leave it where it ism because including deleted files also effects the role assignments table and if the check box is hidden in the restricted files panel it will be cumbersome to update the role assignments table.", "url": "https://github.com/IQSS/dataverse/pull/6659#discussion_r381355423", "createdAt": "2020-02-19T15:11:10Z", "author": {"login": "sekmiller"}, "path": "src/main/webapp/permissions-manage-files.xhtml", "diffHunk": "@@ -25,6 +25,11 @@\n             <ui:param name=\"showMessagePanel\" value=\"false\"/>\n             <ui:define name=\"body\">\n                 <h:form id=\"rolesPermissionsForm\" styleClass=\"margin-top\">\n+                    <div class=\"panel-group\">\n+                    <p:selectBooleanCheckbox value=\"#{manageFilePermissionsPage.showDeleted}\" itemLabel=\"#{bundle['dataverse.permissionsFiles.files.includeDeleted']}\" onchange=\"#{manageFilePermissionsPage.init()}\" >", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDkzNjEzOQ=="}, "originalCommit": {"oid": "8fbc2b41ce741014e6db1c4a655f64b3c94e76ea"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ3MzU2Ng==", "bodyText": "In that case I would suggest that each table gets its own checkbox, rather than one checkbox, which I would say is just as hidden away at the top of the page. If we did mockups before development, the checkboxes would be directly above each of the restricted file tables, next to the file count.", "url": "https://github.com/IQSS/dataverse/pull/6659#discussion_r381473566", "createdAt": "2020-02-19T18:48:56Z", "author": {"login": "mheppler"}, "path": "src/main/webapp/permissions-manage-files.xhtml", "diffHunk": "@@ -25,6 +25,11 @@\n             <ui:param name=\"showMessagePanel\" value=\"false\"/>\n             <ui:define name=\"body\">\n                 <h:form id=\"rolesPermissionsForm\" styleClass=\"margin-top\">\n+                    <div class=\"panel-group\">\n+                    <p:selectBooleanCheckbox value=\"#{manageFilePermissionsPage.showDeleted}\" itemLabel=\"#{bundle['dataverse.permissionsFiles.files.includeDeleted']}\" onchange=\"#{manageFilePermissionsPage.init()}\" >", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDkzNjEzOQ=="}, "originalCommit": {"oid": "8fbc2b41ce741014e6db1c4a655f64b3c94e76ea"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ3Nzg2Mg==", "bodyText": "@mheppler To reiterate what I said in Slack, it would be good if the two of you sat down together to discuss this and other feedback regarding this issue.", "url": "https://github.com/IQSS/dataverse/pull/6659#discussion_r381477862", "createdAt": "2020-02-19T18:56:36Z", "author": {"login": "djbrooke"}, "path": "src/main/webapp/permissions-manage-files.xhtml", "diffHunk": "@@ -25,6 +25,11 @@\n             <ui:param name=\"showMessagePanel\" value=\"false\"/>\n             <ui:define name=\"body\">\n                 <h:form id=\"rolesPermissionsForm\" styleClass=\"margin-top\">\n+                    <div class=\"panel-group\">\n+                    <p:selectBooleanCheckbox value=\"#{manageFilePermissionsPage.showDeleted}\" itemLabel=\"#{bundle['dataverse.permissionsFiles.files.includeDeleted']}\" onchange=\"#{manageFilePermissionsPage.init()}\" >", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDkzNjEzOQ=="}, "originalCommit": {"oid": "8fbc2b41ce741014e6db1c4a655f64b3c94e76ea"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ3ODc3Ng==", "bodyText": "@djbrooke Right. I sent him a Slack msg offering to discuss.", "url": "https://github.com/IQSS/dataverse/pull/6659#discussion_r381478776", "createdAt": "2020-02-19T18:58:18Z", "author": {"login": "mheppler"}, "path": "src/main/webapp/permissions-manage-files.xhtml", "diffHunk": "@@ -25,6 +25,11 @@\n             <ui:param name=\"showMessagePanel\" value=\"false\"/>\n             <ui:define name=\"body\">\n                 <h:form id=\"rolesPermissionsForm\" styleClass=\"margin-top\">\n+                    <div class=\"panel-group\">\n+                    <p:selectBooleanCheckbox value=\"#{manageFilePermissionsPage.showDeleted}\" itemLabel=\"#{bundle['dataverse.permissionsFiles.files.includeDeleted']}\" onchange=\"#{manageFilePermissionsPage.init()}\" >", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDkzNjEzOQ=="}, "originalCommit": {"oid": "8fbc2b41ce741014e6db1c4a655f64b3c94e76ea"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ3OTMxOQ==", "bodyText": "@mheppler perfect, thanks", "url": "https://github.com/IQSS/dataverse/pull/6659#discussion_r381479319", "createdAt": "2020-02-19T18:59:21Z", "author": {"login": "djbrooke"}, "path": "src/main/webapp/permissions-manage-files.xhtml", "diffHunk": "@@ -25,6 +25,11 @@\n             <ui:param name=\"showMessagePanel\" value=\"false\"/>\n             <ui:define name=\"body\">\n                 <h:form id=\"rolesPermissionsForm\" styleClass=\"margin-top\">\n+                    <div class=\"panel-group\">\n+                    <p:selectBooleanCheckbox value=\"#{manageFilePermissionsPage.showDeleted}\" itemLabel=\"#{bundle['dataverse.permissionsFiles.files.includeDeleted']}\" onchange=\"#{manageFilePermissionsPage.init()}\" >", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDkzNjEzOQ=="}, "originalCommit": {"oid": "8fbc2b41ce741014e6db1c4a655f64b3c94e76ea"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ3OTg1MQ==", "bodyText": "Thank you.", "url": "https://github.com/IQSS/dataverse/pull/6659#discussion_r381479851", "createdAt": "2020-02-19T19:00:17Z", "author": {"login": "mheppler"}, "path": "src/main/webapp/permissions-manage-files.xhtml", "diffHunk": "@@ -25,6 +25,11 @@\n             <ui:param name=\"showMessagePanel\" value=\"false\"/>\n             <ui:define name=\"body\">\n                 <h:form id=\"rolesPermissionsForm\" styleClass=\"margin-top\">\n+                    <div class=\"panel-group\">\n+                    <p:selectBooleanCheckbox value=\"#{manageFilePermissionsPage.showDeleted}\" itemLabel=\"#{bundle['dataverse.permissionsFiles.files.includeDeleted']}\" onchange=\"#{manageFilePermissionsPage.init()}\" >", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDkzNjEzOQ=="}, "originalCommit": {"oid": "8fbc2b41ce741014e6db1c4a655f64b3c94e76ea"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1Nzc4NjYwOnYy", "diffSide": "RIGHT", "path": "src/main/webapp/permissions-manage-files.xhtml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQyMToxNzoyMFrOFrSvFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxNTo1ODoxOVrOFrs06g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk0MDA1Mw==", "bodyText": "Not sure about the UX of the second column here for \"Draft\", while it may help when file has been deleted, it appears to be visual noise for all other use cases, by just have \"Restricted\" in two columns.", "url": "https://github.com/IQSS/dataverse/pull/6659#discussion_r380940053", "createdAt": "2020-02-18T21:17:20Z", "author": {"login": "mheppler"}, "path": "src/main/webapp/permissions-manage-files.xhtml", "diffHunk": "@@ -314,7 +321,9 @@\n                                     <p:ajax event=\"toggleSelect\"  update=\":rolesPermissionsForm:selectionCounter\" />\n \n                                     <p:column selectionMode=\"multiple\" style=\"width:2%;text-align:center\"/>\n-                                    <p:column headerText=\"#{bundle['dataverse.permissionsFiles.assignDialog.fileName']}\">\n+                                    <p:column width=\"98%\"  headerText=\"#{bundle['dataverse.permissionsFiles.assignDialog.fileName']}\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8fbc2b41ce741014e6db1c4a655f64b3c94e76ea"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTM2NzUzMA==", "bodyText": "The second column for Draft was not something I introduced here. I think it was done previously for the \"same file name\" issue that we talked about last week", "url": "https://github.com/IQSS/dataverse/pull/6659#discussion_r381367530", "createdAt": "2020-02-19T15:58:19Z", "author": {"login": "sekmiller"}, "path": "src/main/webapp/permissions-manage-files.xhtml", "diffHunk": "@@ -314,7 +321,9 @@\n                                     <p:ajax event=\"toggleSelect\"  update=\":rolesPermissionsForm:selectionCounter\" />\n \n                                     <p:column selectionMode=\"multiple\" style=\"width:2%;text-align:center\"/>\n-                                    <p:column headerText=\"#{bundle['dataverse.permissionsFiles.assignDialog.fileName']}\">\n+                                    <p:column width=\"98%\"  headerText=\"#{bundle['dataverse.permissionsFiles.assignDialog.fileName']}\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk0MDA1Mw=="}, "originalCommit": {"oid": "8fbc2b41ce741014e6db1c4a655f64b3c94e76ea"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1NzgwMjk2OnYy", "diffSide": "RIGHT", "path": "src/main/webapp/permissions-manage-files.xhtml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQyMToyMzowMVrOFrS5sA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxNTo1NjoxNFrOFrsubA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk0Mjc2OA==", "bodyText": "I think the \"(Deleted)\" text should be after the file name, not before, so you can easily scan the file names, since that is the value the table rows are sorted on. The same could be said about the file directory path that is added to this column (e.g \"one/001.txt\", \"two/002.txt\" \"three/003.txt\" shouldn't be the order in the table, if sorting by file path).", "url": "https://github.com/IQSS/dataverse/pull/6659#discussion_r380942768", "createdAt": "2020-02-18T21:23:01Z", "author": {"login": "mheppler"}, "path": "src/main/webapp/permissions-manage-files.xhtml", "diffHunk": "@@ -227,7 +233,8 @@\n                                     <h:outputText value=\"#{roleAssignment.assigneeDisplayInfo.title}\"/> <h:outputText value=\" (#{roleAssignment.assigneeDisplayInfo.affiliation})\" rendered=\"#{!empty roleAssignment.assigneeDisplayInfo.affiliation}\"/>\n                                 </p:column>\n                                 <p:column width=\"98%\" headerText=\"#{bundle['dataverse.permissionsFiles.files.tabHeader.fileName']}\" rendered=\"#{!empty manageFilePermissionsPage.selectedRoleAssignee}\">\n-                                    <h:outputText value=\"#{roleAssignment.definitionPoint.displayName}\"/>\n+                                    <h:outputText value=\" (#{bundle['dataverse.permissionsFiles.files.deleted']}) \" rendered=\"#{roleAssignment.deleted}\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8fbc2b41ce741014e6db1c4a655f64b3c94e76ea"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTM2NTg2OA==", "bodyText": "Yup. moved Deleted to after File Name", "url": "https://github.com/IQSS/dataverse/pull/6659#discussion_r381365868", "createdAt": "2020-02-19T15:56:14Z", "author": {"login": "sekmiller"}, "path": "src/main/webapp/permissions-manage-files.xhtml", "diffHunk": "@@ -227,7 +233,8 @@\n                                     <h:outputText value=\"#{roleAssignment.assigneeDisplayInfo.title}\"/> <h:outputText value=\" (#{roleAssignment.assigneeDisplayInfo.affiliation})\" rendered=\"#{!empty roleAssignment.assigneeDisplayInfo.affiliation}\"/>\n                                 </p:column>\n                                 <p:column width=\"98%\" headerText=\"#{bundle['dataverse.permissionsFiles.files.tabHeader.fileName']}\" rendered=\"#{!empty manageFilePermissionsPage.selectedRoleAssignee}\">\n-                                    <h:outputText value=\"#{roleAssignment.definitionPoint.displayName}\"/>\n+                                    <h:outputText value=\" (#{bundle['dataverse.permissionsFiles.files.deleted']}) \" rendered=\"#{roleAssignment.deleted}\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk0Mjc2OA=="}, "originalCommit": {"oid": "8fbc2b41ce741014e6db1c4a655f64b3c94e76ea"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1NzgwOTQzOnYy", "diffSide": "RIGHT", "path": "src/main/webapp/permissions-manage-files.xhtml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQyMToyNToyMlrOFrS92A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQyMToyNToyMlrOFrS92A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk0MzgzMg==", "bodyText": "See comment above at line 236 about the file.directoryLabel, in the Grant File Access popup, looking out of order because the table rows are sorted by File Name. Same applies here to the Restricted Files table.", "url": "https://github.com/IQSS/dataverse/pull/6659#discussion_r380943832", "createdAt": "2020-02-18T21:25:22Z", "author": {"login": "mheppler"}, "path": "src/main/webapp/permissions-manage-files.xhtml", "diffHunk": "@@ -314,7 +321,9 @@\n                                     <p:ajax event=\"toggleSelect\"  update=\":rolesPermissionsForm:selectionCounter\" />\n \n                                     <p:column selectionMode=\"multiple\" style=\"width:2%;text-align:center\"/>\n-                                    <p:column headerText=\"#{bundle['dataverse.permissionsFiles.assignDialog.fileName']}\">\n+                                    <p:column width=\"98%\"  headerText=\"#{bundle['dataverse.permissionsFiles.assignDialog.fileName']}\">\n+                                        <h:outputText value=\" (#{bundle['dataverse.permissionsFiles.files.deleted']}) \" rendered=\"#{file.deleted}\"/>\n+                                        <h:outputText rendered=\"#{!empty file.directoryLabel}\"  value=\"#{file.directoryLabel}/\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8fbc2b41ce741014e6db1c4a655f64b3c94e76ea"}, "originalPosition": 37}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3307, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}