{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYwNTA3ODQ1", "number": 7155, "title": "get memory tests running on Payara, 5.0 RC #7089", "bodyText": "What this PR does / why we need it:\nUpdates the memory test script so they run on Payara\nWhich issue(s) this PR closes:\nCloses #7089\nSpecial notes for your reviewer:\nBecause dataverse-ansible changes so quickly, I don't think it's wise to continue maintaining a fork of the config file in the sample data repo. To get it working, I downloaded the latest main.yml and edited to enable sample data, as explained in the readme. There is a new dedicated Ansible config file in the dataverse-ansible repo.\nThe other changes are related to switching from Glassfish to Payara and should be pretty straightforward.\nThe actual results are interesting but probably out of scope for this pull request, where I'm simply getting the scripts to work. As of 78527a2 in 5.0 (release candidate), the dataset page does not show the sawtooth pattern of garbage collection that we want. Here's a visual comparison:\n\nSuggestions on how to test this:\nFollow the README, which I made a slight edit to.\nDoes this PR introduce a user interface change? If mockups are available, please link/include them here:\nNo.\nIs there a release notes update needed for this change?:\nNo.\nAdditional documentation:", "createdAt": "2020-07-31T20:55:28Z", "url": "https://github.com/IQSS/dataverse/pull/7155", "merged": true, "mergeCommit": {"oid": "8223e2739cf42a3f59a76bf6580c1c9b5de280d3"}, "closed": true, "closedAt": "2020-08-05T17:12:48Z", "author": {"login": "pdurbin"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc6ahZbAH2gAyNDYwNTA3ODQ1OjkxMmJmYzExZDhmNTNjYjk1ZmRhMDI2ZDg3MTQwNjA5NWI1Mjk2NGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc78dzKAH2gAyNDYwNTA3ODQ1OjRkMDQyMTIzYWY1MDI4MDE2ODAzZDg3ZjJiZDUxYzNjZDljOTRmMTg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "912bfc11d8f53cb95fda026d871406095b52964e", "author": {"user": {"login": "pdurbin", "name": "Philip Durbin"}}, "url": "https://github.com/IQSS/dataverse/commit/912bfc11d8f53cb95fda026d871406095b52964e", "committedDate": "2020-07-31T20:47:42Z", "message": "get memory tests running on Payara, 5.0 RC #7089"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMzM0NDI1", "url": "https://github.com/IQSS/dataverse/pull/7155#pullrequestreview-460334425", "createdAt": "2020-08-03T20:55:13Z", "commit": {"oid": "912bfc11d8f53cb95fda026d871406095b52964e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QyMDo1NToxM1rOG7IawQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QyMDo1NToxM1rOG7IawQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDY1NzA4OQ==", "bodyText": "My only question would be if there's a way to handle this without the copy, i.e. we have a version upstream with sample data turned on, or we allow a parameter for sample data so that it can be turned on without having to change the yaml file.", "url": "https://github.com/IQSS/dataverse/pull/7155#discussion_r464657089", "createdAt": "2020-08-03T20:55:13Z", "author": {"login": "scolapasta"}, "path": "scripts/tests/ec2-memory-benchmark/README.md", "diffHunk": "@@ -13,6 +13,10 @@ All the other pieces will be downloaded automatically (from the\n either locally, where you're running the script, or on the newly\n created instance.\n \n+The script downloads an Ansible config file called `main.yml` which you\n+should copy to `main2.yml` and edit to enable \"sampledata\". This config", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "912bfc11d8f53cb95fda026d871406095b52964e"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d042123af5028016803d87f2bd51c3cd9c94f18", "author": {"user": {"login": "pdurbin", "name": "Philip Durbin"}}, "url": "https://github.com/IQSS/dataverse/commit/4d042123af5028016803d87f2bd51c3cd9c94f18", "committedDate": "2020-08-05T14:54:28Z", "message": "use dedicated Ansible config #7089"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 729, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}