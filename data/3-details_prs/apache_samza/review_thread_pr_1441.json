{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIxODQ0NTA2", "number": 1441, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQwMDowNjoxMlrOE7wFsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQwMDowNjoxMlrOE7wFsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxMDg5MzMxOnYy", "diffSide": "RIGHT", "path": "samza-core/src/main/java/org/apache/samza/clustermanager/ContainerAllocator.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQwMDowNjoxMlrOH3kkNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQwMDowNjoxMlrOH3kkNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODAzMjgyMQ==", "bodyText": "Replace it with something like this:\nLOG.info(\"Waiting for resources to get allocated for request {}, no retries will be issued since host affinity is disabled\", request);", "url": "https://github.com/apache/samza/pull/1441#discussion_r528032821", "createdAt": "2020-11-21T00:06:12Z", "author": {"login": "Sanil15"}, "path": "samza-core/src/main/java/org/apache/samza/clustermanager/ContainerAllocator.java", "diffHunk": "@@ -234,6 +234,12 @@ void assignResourceRequests() {\n         if (isRequestExpired(request)) {\n           updateExpiryMetrics(request);\n           containerManager.handleExpiredRequest(processorId, preferredHost, request, this, resourceRequestState);\n+          // SAMZA-2601: to prevent infinite looping and logs filling up the disk, when host affinity is disabled,\n+          // we explicitly break the loop here and the whole process gets retried in run() after allocatorSleepIntervalMs\n+          if (!hostAffinityEnabled) {\n+            LOG.info(\"Host affinity is disabled on expired request.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6665098b25bad4061083e549ca57d556eb51788c"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1531, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}