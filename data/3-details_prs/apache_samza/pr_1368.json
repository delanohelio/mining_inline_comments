{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzNjMxMTM0", "number": 1368, "title": "SAMZA-2532: Refactor MetricsSnapshotReporter and MetricsSnapshotReporterFactory", "bodyText": "Changes:\nThe refactoring is done to make the reporter stable when\nexceptions are encountered. The patch also breaks down\nMetricsSnapshotReporterFactory#getMetricsReporter into\nsmaller overridable pieces to make it more extendable/re-usable.\nTests: Unit test\nAPI Changes: None\nUpgrade Instructions: None\nUsage Instructions: None", "createdAt": "2020-05-27T06:12:19Z", "url": "https://github.com/apache/samza/pull/1368", "merged": true, "mergeCommit": {"oid": "9e281345441b79994822f1383f06d39b9e74ba67"}, "closed": true, "closedAt": "2020-06-03T19:22:18Z", "author": {"login": "abhishekshivanna"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclSqtIgH2gAyNDIzNjMxMTM0OjRiYmYyNzZjNjExOGU2YWQ5ZDQ4MDEwMjNhYzJjOTA0NzJjMDg5OGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcntAWFAFqTQyMzc4MTU0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4bbf276c6118e6ad9d4801023ac2c90472c0898a", "author": {"user": null}, "url": "https://github.com/apache/samza/commit/4bbf276c6118e6ad9d4801023ac2c90472c0898a", "committedDate": "2020-05-27T05:46:13Z", "message": "SAMZA-2532: Refactor MetricsSnapshotReporter and MetricsSnapshotReporterFactory\n\nChanges:\nThe refactoring done to make the reporter stable when\nexceptions are encountered. The patch also breaks down the\nrun() method in the MetricsSnapshotReporter into smaller\noverridable pieces to make it more extendable/re-usable.\n\nTests: None\nAPI Changes: None\nUpgrade Instructions: None\nUsage Instructions: None"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c712ae0122c4bfb12ba81adee3e0ed5e7adf386", "author": {"user": null}, "url": "https://github.com/apache/samza/commit/0c712ae0122c4bfb12ba81adee3e0ed5e7adf386", "committedDate": "2020-05-27T06:49:19Z", "message": "Simplify changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NDQxMDc3", "url": "https://github.com/apache/samza/pull/1368#pullrequestreview-419441077", "createdAt": "2020-05-27T17:13:19Z", "commit": {"oid": "0c712ae0122c4bfb12ba81adee3e0ed5e7adf386"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNzoxMzoxOVrOGbU-jA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNzoxMzoxOVrOGbU-jA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTMwODQyOA==", "bodyText": "Unrelated to PR but useful: Can you change the info log below \"Blacklisted metric %s because it matched ...\" to either only be logged once with all metrics or logged at debug?", "url": "https://github.com/apache/samza/pull/1368#discussion_r431308428", "createdAt": "2020-05-27T17:13:19Z", "author": {"login": "prateekm"}, "path": "samza-core/src/main/scala/org/apache/samza/metrics/reporter/MetricsSnapshotReporter.scala", "diffHunk": "@@ -160,12 +171,9 @@ class MetricsSnapshotReporter(\n         }\n       }\n     }\n-\n-\n     debug(\"Finished flushing metrics.\")\n   }\n \n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c712ae0122c4bfb12ba81adee3e0ed5e7adf386"}, "originalPosition": 68}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7fa9bd204b75f78d20ac19d9c7d6ddc6c25d46be", "author": {"user": null}, "url": "https://github.com/apache/samza/commit/7fa9bd204b75f78d20ac19d9c7d6ddc6c25d46be", "committedDate": "2020-05-27T18:33:51Z", "message": "Change blacklist log level to debug"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5ae87bb7c2e8d52128583b9f390ce9062c738ee", "author": {"user": null}, "url": "https://github.com/apache/samza/commit/b5ae87bb7c2e8d52128583b9f390ce9062c738ee", "committedDate": "2020-05-27T19:33:51Z", "message": "Exposing system producer from reporter"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NjA2MTc4", "url": "https://github.com/apache/samza/pull/1368#pullrequestreview-419606178", "createdAt": "2020-05-27T21:02:51Z", "commit": {"oid": "b5ae87bb7c2e8d52128583b9f390ce9062c738ee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMTowMjo1MVrOGbdCCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMTowMjo1MVrOGbdCCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ0MDM5Mg==", "bodyText": "why is this pollingInterval instead of reportingInterval? makes me think we poll for metrics at this interval but then the error statement above which says \"Error reporting ... pollingInterval\" is confusing.", "url": "https://github.com/apache/samza/pull/1368#discussion_r431440392", "createdAt": "2020-05-27T21:02:51Z", "author": {"login": "mynameborat"}, "path": "samza-core/src/main/scala/org/apache/samza/metrics/reporter/MetricsSnapshotReporterFactory.scala", "diffHunk": "@@ -77,15 +71,48 @@ class MetricsSnapshotReporterFactory extends MetricsReporterFactory with Logging\n     } else {\n       new MetricsSnapshotSerdeV2\n     }\n-\n     info(\"Got serde %s.\" format serde)\n+    serde\n+  }\n+\n \n-    val pollingInterval: Int = metricsConfig.getMetricsSnapshotReporterInterval(name)\n+  def getBlacklist(reporterName: String, config: Config): Option[String] = {\n+    val metricsConfig = new MetricsConfig(config)\n+    val blacklist = JavaOptionals.toRichOptional(metricsConfig.getMetricsSnapshotReporterBlacklist(reporterName)).toOption\n+    info(\"Got blacklist as: %s\" format blacklist)\n+    blacklist\n+  }\n \n-    info(\"Setting polling interval to %d\" format pollingInterval)\n+  def getPollingInterval(reporterName: String, config: Config): Int = {\n+    val metricsConfig = new MetricsConfig(config)\n+    val pollingInterval = metricsConfig.getMetricsSnapshotReporterInterval(reporterName)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b5ae87bb7c2e8d52128583b9f390ce9062c738ee"}, "originalPosition": 99}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "071b0456a53f1ebdc6e729d7d89e45ef158e33d4", "author": {"user": null}, "url": "https://github.com/apache/samza/commit/071b0456a53f1ebdc6e729d7d89e45ef158e33d4", "committedDate": "2020-05-28T00:34:10Z", "message": "Change pollingInterval to reportingInterval"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NzI5NzA1", "url": "https://github.com/apache/samza/pull/1368#pullrequestreview-419729705", "createdAt": "2020-05-28T02:08:31Z", "commit": {"oid": "071b0456a53f1ebdc6e729d7d89e45ef158e33d4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMDg1Nzg2", "url": "https://github.com/apache/samza/pull/1368#pullrequestreview-421085786", "createdAt": "2020-05-29T16:00:07Z", "commit": {"oid": "071b0456a53f1ebdc6e729d7d89e45ef158e33d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxNjowMDowOFrOGcizNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxNjowMDowOFrOGcizNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjU4MzQ3OQ==", "bodyText": "private ?", "url": "https://github.com/apache/samza/pull/1368#discussion_r432583479", "createdAt": "2020-05-29T16:00:08Z", "author": {"login": "rmatharu"}, "path": "samza-core/src/main/scala/org/apache/samza/metrics/reporter/MetricsSnapshotReporterFactory.scala", "diffHunk": "@@ -19,53 +19,47 @@\n \n package org.apache.samza.metrics.reporter\n \n-import org.apache.samza.util.{Logging, ReflectionUtil, StreamUtil, Util}\n import org.apache.samza.SamzaException\n-import org.apache.samza.config.{Config, JobConfig, MetricsConfig, SerializerConfig, StreamConfig, SystemConfig}\n-import org.apache.samza.metrics.MetricsReporter\n-import org.apache.samza.metrics.MetricsReporterFactory\n-import org.apache.samza.metrics.MetricsRegistryMap\n-import org.apache.samza.serializers.{MetricsSnapshotSerdeV2, SerdeFactory}\n-import org.apache.samza.system.SystemFactory\n+import org.apache.samza.config._\n+import org.apache.samza.metrics.{MetricsRegistryMap, MetricsReporter, MetricsReporterFactory}\n+import org.apache.samza.serializers.{MetricsSnapshotSerdeV2, Serde, SerdeFactory}\n+import org.apache.samza.system.{SystemFactory, SystemProducer, SystemStream}\n import org.apache.samza.util.ScalaJavaUtil.JavaOptionals\n+import org.apache.samza.util.{Logging, ReflectionUtil, StreamUtil, Util}\n \n class MetricsSnapshotReporterFactory extends MetricsReporterFactory with Logging {\n-  def getMetricsReporter(name: String, containerName: String, config: Config): MetricsReporter = {\n-    info(\"Creating new metrics snapshot reporter.\")\n-\n-    val jobConfig = new JobConfig(config)\n-    val jobName = JavaOptionals.toRichOptional(jobConfig.getName).toOption\n-      .getOrElse(throw new SamzaException(\"Job name must be defined in config.\"))\n-    val jobId = jobConfig.getJobId\n-\n-    val metricsConfig = new MetricsConfig(config)\n-    val metricsSystemStreamName = JavaOptionals.toRichOptional(metricsConfig.getMetricsSnapshotReporterStream(name))\n-      .toOption\n-      .getOrElse(throw new SamzaException(\"No metrics stream defined in config.\"))\n-\n-    val systemStream = StreamUtil.getSystemStreamFromNames(metricsSystemStreamName)\n-\n-    info(\"Got system stream %s.\" format systemStream)\n-\n-    val systemName = systemStream.getSystem\n \n+  def getProducer(reporterName: String, config: Config, registry: MetricsRegistryMap): SystemProducer = {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "071b0456a53f1ebdc6e729d7d89e45ef158e33d4"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMDg1OTE2", "url": "https://github.com/apache/samza/pull/1368#pullrequestreview-421085916", "createdAt": "2020-05-29T16:00:17Z", "commit": {"oid": "071b0456a53f1ebdc6e729d7d89e45ef158e33d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxNjowMDoxN1rOGcizog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxNjowMDoxN1rOGcizog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjU4MzU4Ng==", "bodyText": "private ?\nsame for all the other helper methods below that are invoked only from within this class.", "url": "https://github.com/apache/samza/pull/1368#discussion_r432583586", "createdAt": "2020-05-29T16:00:17Z", "author": {"login": "rmatharu"}, "path": "samza-core/src/main/scala/org/apache/samza/metrics/reporter/MetricsSnapshotReporterFactory.scala", "diffHunk": "@@ -19,53 +19,47 @@\n \n package org.apache.samza.metrics.reporter\n \n-import org.apache.samza.util.{Logging, ReflectionUtil, StreamUtil, Util}\n import org.apache.samza.SamzaException\n-import org.apache.samza.config.{Config, JobConfig, MetricsConfig, SerializerConfig, StreamConfig, SystemConfig}\n-import org.apache.samza.metrics.MetricsReporter\n-import org.apache.samza.metrics.MetricsReporterFactory\n-import org.apache.samza.metrics.MetricsRegistryMap\n-import org.apache.samza.serializers.{MetricsSnapshotSerdeV2, SerdeFactory}\n-import org.apache.samza.system.SystemFactory\n+import org.apache.samza.config._\n+import org.apache.samza.metrics.{MetricsRegistryMap, MetricsReporter, MetricsReporterFactory}\n+import org.apache.samza.serializers.{MetricsSnapshotSerdeV2, Serde, SerdeFactory}\n+import org.apache.samza.system.{SystemFactory, SystemProducer, SystemStream}\n import org.apache.samza.util.ScalaJavaUtil.JavaOptionals\n+import org.apache.samza.util.{Logging, ReflectionUtil, StreamUtil, Util}\n \n class MetricsSnapshotReporterFactory extends MetricsReporterFactory with Logging {\n-  def getMetricsReporter(name: String, containerName: String, config: Config): MetricsReporter = {\n-    info(\"Creating new metrics snapshot reporter.\")\n-\n-    val jobConfig = new JobConfig(config)\n-    val jobName = JavaOptionals.toRichOptional(jobConfig.getName).toOption\n-      .getOrElse(throw new SamzaException(\"Job name must be defined in config.\"))\n-    val jobId = jobConfig.getJobId\n-\n-    val metricsConfig = new MetricsConfig(config)\n-    val metricsSystemStreamName = JavaOptionals.toRichOptional(metricsConfig.getMetricsSnapshotReporterStream(name))\n-      .toOption\n-      .getOrElse(throw new SamzaException(\"No metrics stream defined in config.\"))\n-\n-    val systemStream = StreamUtil.getSystemStreamFromNames(metricsSystemStreamName)\n-\n-    info(\"Got system stream %s.\" format systemStream)\n-\n-    val systemName = systemStream.getSystem\n \n+  def getProducer(reporterName: String, config: Config, registry: MetricsRegistryMap): SystemProducer = {\n     val systemConfig = new SystemConfig(config)\n+    val systemName = getSystemStream(reporterName, config).getSystem\n     val systemFactoryClassName = JavaOptionals.toRichOptional(systemConfig.getSystemFactory(systemName)).toOption\n       .getOrElse(throw new SamzaException(\"Trying to fetch system factory for system %s, which isn't defined in config.\" format systemName))\n-\n     val systemFactory = ReflectionUtil.getObj(systemFactoryClassName, classOf[SystemFactory])\n \n     info(\"Got system factory %s.\" format systemFactory)\n+    val producer = systemFactory.getProducer(systemName, config, registry)\n+    info(\"Got producer %s.\" format producer)\n \n-    val registry = new MetricsRegistryMap\n+    producer\n+  }\n \n-    val producer = systemFactory.getProducer(systemName, config, registry)\n+  def getSystemStream(reporterName: String, config: Config): SystemStream = {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "071b0456a53f1ebdc6e729d7d89e45ef158e33d4"}, "originalPosition": 56}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMDg2OTQw", "url": "https://github.com/apache/samza/pull/1368#pullrequestreview-421086940", "createdAt": "2020-05-29T16:01:39Z", "commit": {"oid": "071b0456a53f1ebdc6e729d7d89e45ef158e33d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxNjowMTozOVrOGci2wQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxNjowMTozOVrOGci2wQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjU4NDM4NQ==", "bodyText": "nit: For the things are just methods in jobConfig perhaps separate helper-methods are an overkill?", "url": "https://github.com/apache/samza/pull/1368#discussion_r432584385", "createdAt": "2020-05-29T16:01:39Z", "author": {"login": "rmatharu"}, "path": "samza-core/src/main/scala/org/apache/samza/metrics/reporter/MetricsSnapshotReporterFactory.scala", "diffHunk": "@@ -77,29 +71,62 @@ class MetricsSnapshotReporterFactory extends MetricsReporterFactory with Logging\n     } else {\n       new MetricsSnapshotSerdeV2\n     }\n-\n     info(\"Got serde %s.\" format serde)\n+    serde\n+  }\n+\n \n-    val pollingInterval: Int = metricsConfig.getMetricsSnapshotReporterInterval(name)\n+  def getBlacklist(reporterName: String, config: Config): Option[String] = {\n+    val metricsConfig = new MetricsConfig(config)\n+    val blacklist = JavaOptionals.toRichOptional(metricsConfig.getMetricsSnapshotReporterBlacklist(reporterName)).toOption\n+    info(\"Got blacklist as: %s\" format blacklist)\n+    blacklist\n+  }\n \n-    info(\"Setting polling interval to %d\" format pollingInterval)\n+  def getReportingInterval(reporterName: String, config: Config): Int = {\n+    val metricsConfig = new MetricsConfig(config)\n+    val reportingInterval = metricsConfig.getMetricsSnapshotReporterInterval(reporterName)\n+    info(\"Got reporting interval: %d\" format reportingInterval)\n+    reportingInterval\n+  }\n+\n+  def getJobId(config: Config): String = {\n+    val jobConfig = new JobConfig(config)\n+    jobConfig.getJobId\n+  }\n+\n+  def getJobName(config: Config): String = {\n+    val jobConfig = new JobConfig(config)\n+    JavaOptionals.toRichOptional(jobConfig.getName).toOption\n+      .getOrElse(throw new SamzaException(\"Job name must be defined in config.\"))\n+  }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "071b0456a53f1ebdc6e729d7d89e45ef158e33d4"}, "originalPosition": 113}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMDkwNjAw", "url": "https://github.com/apache/samza/pull/1368#pullrequestreview-421090600", "createdAt": "2020-05-29T16:06:40Z", "commit": {"oid": "071b0456a53f1ebdc6e729d7d89e45ef158e33d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxNjowNjo0MFrOGcjCLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxNjowNjo0MFrOGcjCLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjU4NzMwOQ==", "bodyText": "Do you think it'd be possible to add a test to test the emission logic in TestMetricsSnapshotReporter?\nSomehow it was overlooked before.", "url": "https://github.com/apache/samza/pull/1368#discussion_r432587309", "createdAt": "2020-05-29T16:06:40Z", "author": {"login": "rmatharu"}, "path": "samza-core/src/main/scala/org/apache/samza/metrics/reporter/MetricsSnapshotReporter.scala", "diffHunk": "@@ -106,9 +106,20 @@ class MetricsSnapshotReporter(\n     }\n   }\n \n-  def run {\n-    debug(\"Begin flushing metrics.\")\n+  def run() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "071b0456a53f1ebdc6e729d7d89e45ef158e33d4"}, "originalPosition": 50}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMDkwOTAy", "url": "https://github.com/apache/samza/pull/1368#pullrequestreview-421090902", "createdAt": "2020-05-29T16:07:04Z", "commit": {"oid": "071b0456a53f1ebdc6e729d7d89e45ef158e33d4"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "940d2aa595305445f45ccfb9a5b1d225fdce8134", "author": {"user": null}, "url": "https://github.com/apache/samza/commit/940d2aa595305445f45ccfb9a5b1d225fdce8134", "committedDate": "2020-05-29T17:30:42Z", "message": "made helper functions protected"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30f2eb5ab768e87e702b48663b857ecb98e3e2bf", "author": {"user": null}, "url": "https://github.com/apache/samza/commit/30f2eb5ab768e87e702b48663b857ecb98e3e2bf", "committedDate": "2020-05-29T20:08:58Z", "message": "added test for metrics emit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f064194aa060690499cef7f9bbee328e8fb7cc3", "author": {"user": null}, "url": "https://github.com/apache/samza/commit/9f064194aa060690499cef7f9bbee328e8fb7cc3", "committedDate": "2020-05-31T01:57:18Z", "message": "Fix checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5e68853b934cee9aac461734d4bf26e34e5bc54", "author": {"user": null}, "url": "https://github.com/apache/samza/commit/a5e68853b934cee9aac461734d4bf26e34e5bc54", "committedDate": "2020-06-03T17:18:31Z", "message": "remove getProducer in MSR"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzNzczNzgz", "url": "https://github.com/apache/samza/pull/1368#pullrequestreview-423773783", "createdAt": "2020-06-03T17:24:53Z", "commit": {"oid": "a5e68853b934cee9aac461734d4bf26e34e5bc54"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxNzoyNDo1M1rOGemCeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxNzoyNDo1M1rOGemCeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDczMzY4OQ==", "bodyText": "can we use explicit exports instead of wildcards?", "url": "https://github.com/apache/samza/pull/1368#discussion_r434733689", "createdAt": "2020-06-03T17:24:53Z", "author": {"login": "mynameborat"}, "path": "samza-core/src/test/java/org/apache/samza/metrics/TestMetricsSnapshotReporter.java", "diffHunk": "@@ -19,23 +19,51 @@\n \n package org.apache.samza.metrics;\n \n+import java.util.List;\n+import java.util.Map;\n+import org.apache.samza.metrics.reporter.MetricsSnapshot;\n import org.apache.samza.metrics.reporter.MetricsSnapshotReporter;\n import org.apache.samza.serializers.MetricsSnapshotSerdeV2;\n+import org.apache.samza.serializers.Serializer;\n+import org.apache.samza.system.OutgoingMessageEnvelope;\n+import org.apache.samza.system.SystemProducer;\n import org.apache.samza.system.SystemStream;\n-import org.apache.samza.system.inmemory.InMemorySystemProducer;\n import org.junit.Assert;\n+import org.junit.Before;\n import org.junit.Test;\n+import org.mockito.ArgumentCaptor;\n import scala.Some;\n import scala.runtime.AbstractFunction0;\n \n+import static org.mockito.Mockito.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5e68853b934cee9aac461734d4bf26e34e5bc54"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a17b2bb0a686ee5dacba1455073088747c54ced", "author": {"user": null}, "url": "https://github.com/apache/samza/commit/7a17b2bb0a686ee5dacba1455073088747c54ced", "committedDate": "2020-06-03T17:32:44Z", "message": "remove static import"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzNzgxNTQw", "url": "https://github.com/apache/samza/pull/1368#pullrequestreview-423781540", "createdAt": "2020-06-03T17:35:14Z", "commit": {"oid": "7a17b2bb0a686ee5dacba1455073088747c54ced"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4610, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}