{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc0OTYwOTA3", "number": 1424, "title": "SAMZA-2584: Refactor ClusterBasedJobCoordinator", "bodyText": "Issues: In the deployment flow of a beam job, we will have a complicate flow: ClusterBasedJobCoordinator#main -> Beam main class -> JobCoordinatorLaunchUtil -> ClusterBasedJobCoordinator.\nChanges:\n\nMove ClusterBasedJobCoordinator#main to ClusterBasedJobCoordinatorRunner#main\nUpdate run-jc.sh to invoke ClusterBasedJobCoordinatorRunner\nTests:\nunit tests\nDeployed hello samza job successfully with the change following instructions on http://samza.apache.org/startup/hello-samza/latest/\nAPI Changes: None\nUpgrade Instructions: None\nUsage Instructions: None", "createdAt": "2020-08-27T21:27:15Z", "url": "https://github.com/apache/samza/pull/1424", "merged": true, "mergeCommit": {"oid": "d689fd2568ea9dd457ed1c7c9cb193f4ae6fa631"}, "closed": true, "closedAt": "2020-09-02T22:10:43Z", "author": {"login": "kw2542"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdDHP-2AH2gAyNDc0OTYwOTA3OmJjZWM0NzMxYmQxYzg0NjBlYzIzNGQwMDM5MjZlZjc5MjdmM2MxMzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdFDe7MgFqTQ4MTMzNTgyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bcec4731bd1c8460ec234d003926ef7927f3c135", "author": {"user": {"login": "kw2542", "name": "Ke Wu"}}, "url": "https://github.com/apache/samza/commit/bcec4731bd1c8460ec234d003926ef7927f3c135", "committedDate": "2020-08-27T21:25:48Z", "message": "SAMZA-2584: Refactor ClusterBasedJobCoordinator\n\nIssues: In the deployment flow of a beam job, we will have a complicate flow: ClusterBasedJobCoordinator#main -> Beam main class -> JobCoordinatorLaunchUtil -> ClusterBasedJobCoordinator.\nChanges:\n  1. Move ClusterBasedJobCoordinator#main to ClusterBasedJobCoordinatorRunner#main\n  2. Update run-jc.sh to invoke ClusterBasedJobCoordinatorRunner\nTests:\n  1. unit tests\n  2. Deployed hello samza job successfully with the change following instructions on http://samza.apache.org/startup/hello-samza/latest/\nAPI Changes: None\nUpgrade Instructions: None\nUsage Instructions: None"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e6b07b4c37a2e8fddfe1410c77bf29c65b04754", "author": {"user": {"login": "kw2542", "name": "Ke Wu"}}, "url": "https://github.com/apache/samza/commit/0e6b07b4c37a2e8fddfe1410c77bf29c65b04754", "committedDate": "2020-08-27T21:27:28Z", "message": "Add a new line"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0eddc43ce8a3fb88fcead602bb61d3a8b7d6e3e8", "author": {"user": {"login": "kw2542", "name": "Ke Wu"}}, "url": "https://github.com/apache/samza/commit/0eddc43ce8a3fb88fcead602bb61d3a8b7d6e3e8", "committedDate": "2020-08-31T17:09:36Z", "message": "Remove unused import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3fc3b15c374249a1f2c501881a4f71da2e9c323e", "author": {"user": {"login": "kw2542", "name": "Ke Wu"}}, "url": "https://github.com/apache/samza/commit/3fc3b15c374249a1f2c501881a4f71da2e9c323e", "committedDate": "2020-09-02T16:27:07Z", "message": "Update run-jc.sh to use ClusterBasedJobCoordinatorRunner"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxMDE4Nzgy", "url": "https://github.com/apache/samza/pull/1424#pullrequestreview-481018782", "createdAt": "2020-09-02T16:57:20Z", "commit": {"oid": "3fc3b15c374249a1f2c501881a4f71da2e9c323e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxNjo1NzoyMFrOHL4eRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxNjo1NzoyMFrOHL4eRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjIyMTYzOQ==", "bodyText": "I'd suggest to keep the old name as is since it is indeed testing the functionality of ClusterBasedJobCoordinator like startpoint fanout, partition monitor.\nIf you can create a new test class for ClusterBasedJobCoordinatorRunner and then add test for runClusterBasedJobCoordinator (rest of the methods are mostly helpers to construct dependencies) that will be great.", "url": "https://github.com/apache/samza/pull/1424#discussion_r482221639", "createdAt": "2020-09-02T16:57:20Z", "author": {"login": "mynameborat"}, "path": "samza-core/src/test/java/org/apache/samza/clustermanager/TestClusterBasedJobCoordinatorRunner.java", "diffHunk": "@@ -64,15 +64,15 @@\n \n \n /**\n- * Tests for {@link ClusterBasedJobCoordinator}\n+ * Tests for {@link TestClusterBasedJobCoordinatorRunner}\n  */\n @RunWith(PowerMockRunner.class)\n @PrepareForTest({\n     CoordinatorStreamUtil.class,\n-    ClusterBasedJobCoordinator.class,\n+    ClusterBasedJobCoordinatorRunner.class,\n     CoordinatorStreamStore.class,\n     RemoteJobPlanner.class})\n-public class TestClusterBasedJobCoordinator {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3fc3b15c374249a1f2c501881a4f71da2e9c323e"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cd70450fe305f8bbc706df2f04fef17e12183bd", "author": {"user": {"login": "kw2542", "name": "Ke Wu"}}, "url": "https://github.com/apache/samza/commit/8cd70450fe305f8bbc706df2f04fef17e12183bd", "committedDate": "2020-09-02T18:47:37Z", "message": "Rename TestClusterBasedJobCoordinatorRunner back to TestClusterBasedJobCoordinator\nAdd TestClusterBasedJobCoordinatorRunner to test runClusterBasedJobCoordinator() in ClusterBasedJobCoordinatorRunner"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a7ce75786b3f9d48a511ec7807e6557b82cecad", "author": {"user": {"login": "kw2542", "name": "Ke Wu"}}, "url": "https://github.com/apache/samza/commit/4a7ce75786b3f9d48a511ec7807e6557b82cecad", "committedDate": "2020-09-02T19:46:57Z", "message": "Add license info"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c409a0c9bcfc81411c40163d05b2a58e03039aff", "author": {"user": {"login": "kw2542", "name": "Ke Wu"}}, "url": "https://github.com/apache/samza/commit/c409a0c9bcfc81411c40163d05b2a58e03039aff", "committedDate": "2020-09-02T21:05:56Z", "message": "Fix checkstyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxMzM1ODIz", "url": "https://github.com/apache/samza/pull/1424#pullrequestreview-481335823", "createdAt": "2020-09-02T22:10:21Z", "commit": {"oid": "c409a0c9bcfc81411c40163d05b2a58e03039aff"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4706, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}