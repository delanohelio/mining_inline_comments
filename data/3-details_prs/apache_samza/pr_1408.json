{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyNDc3MTU3", "number": 1408, "title": "SAMZA-2574: improve flexibility of SystemFactory interface", "bodyText": "improve SystemFactory interface by providing user-defined clientId prefix so that we can access more information of the clients created: with changes, user can add specific clientId prefix for clients to help monitor clients.\nAPI Changes: Added three default functions in SystemFactory. Since they are default functions, they won't make any impact to current users.\nUpgrade Instructions: N/A\nUsage Instructions: To use the new default functions, user will need to redefine them in their implementation class. And then user can set specific clientId.", "createdAt": "2020-08-04T01:37:41Z", "url": "https://github.com/apache/samza/pull/1408", "merged": true, "mergeCommit": {"oid": "b736af9af9bcdbb2bbff3a572beef93863349eac"}, "closed": true, "closedAt": "2020-08-12T18:41:22Z", "author": {"login": "MabelYC"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc7bhbnAH2gAyNDYyNDc3MTU3OmU3ZDMwNjc2ZDI0ZjE1OWMxZjUxYzhiYmRjN2M2MzQzMzA1MTNiNGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-PgG7AFqTQ2NjE1Nzk0NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e7d30676d24f159c1f51c8bbdc7c634330513b4e", "author": {"user": {"login": "MabelYC", "name": "Yuhong Cheng"}}, "url": "https://github.com/apache/samza/commit/e7d30676d24f159c1f51c8bbdc7c634330513b4e", "committedDate": "2020-08-04T00:31:34Z", "message": "Merge pull request #1 from apache/master\n\nMerge from origin branch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "984978ba9127dee4d5a1ccbbf12e269111253661", "author": {"user": {"login": "MabelYC", "name": "Yuhong Cheng"}}, "url": "https://github.com/apache/samza/commit/984978ba9127dee4d5a1ccbbf12e269111253661", "committedDate": "2020-08-04T01:30:14Z", "message": "SAMZA-2574:improve flexibility of SystemFactory interface"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxOTIwMzAz", "url": "https://github.com/apache/samza/pull/1408#pullrequestreview-461920303", "createdAt": "2020-08-05T18:30:15Z", "commit": {"oid": "984978ba9127dee4d5a1ccbbf12e269111253661"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxODozMDoxNlrOG8VpfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxODozMTo1NFrOG8VtPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkyMjQyOQ==", "bodyText": "please rename callClass to 'consumerIdPrefix'", "url": "https://github.com/apache/samza/pull/1408#discussion_r465922429", "createdAt": "2020-08-05T18:30:16Z", "author": {"login": "sborya"}, "path": "samza-api/src/main/java/org/apache/samza/system/SystemFactory.java", "diffHunk": "@@ -32,4 +32,16 @@\n   SystemProducer getProducer(String systemName, Config config, MetricsRegistry registry);\n \n   SystemAdmin getAdmin(String systemName, Config config);\n+\n+  default SystemConsumer getConsumer(String systemName, Config config, MetricsRegistry registry, String callerClass) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "984978ba9127dee4d5a1ccbbf12e269111253661"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkyMjcxNw==", "bodyText": "please rename callClass to 'producerIdPrefix'", "url": "https://github.com/apache/samza/pull/1408#discussion_r465922717", "createdAt": "2020-08-05T18:30:44Z", "author": {"login": "sborya"}, "path": "samza-api/src/main/java/org/apache/samza/system/SystemFactory.java", "diffHunk": "@@ -32,4 +32,16 @@\n   SystemProducer getProducer(String systemName, Config config, MetricsRegistry registry);\n \n   SystemAdmin getAdmin(String systemName, Config config);\n+\n+  default SystemConsumer getConsumer(String systemName, Config config, MetricsRegistry registry, String callerClass) {\n+    return getConsumer(systemName, config, registry);\n+  }\n+\n+  default SystemProducer getProducer(String systemName, Config config, MetricsRegistry registry, String callerClass) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "984978ba9127dee4d5a1ccbbf12e269111253661"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkyMzM5MQ==", "bodyText": "please rename callClass to 'adminIdPrefix'", "url": "https://github.com/apache/samza/pull/1408#discussion_r465923391", "createdAt": "2020-08-05T18:31:54Z", "author": {"login": "sborya"}, "path": "samza-api/src/main/java/org/apache/samza/system/SystemFactory.java", "diffHunk": "@@ -32,4 +32,16 @@\n   SystemProducer getProducer(String systemName, Config config, MetricsRegistry registry);\n \n   SystemAdmin getAdmin(String systemName, Config config);\n+\n+  default SystemConsumer getConsumer(String systemName, Config config, MetricsRegistry registry, String callerClass) {\n+    return getConsumer(systemName, config, registry);\n+  }\n+\n+  default SystemProducer getProducer(String systemName, Config config, MetricsRegistry registry, String callerClass) {\n+    return getProducer(systemName, config, registry);\n+  }\n+\n+  default SystemAdmin getAdmin(String systemName, Config config, String callerClass) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "984978ba9127dee4d5a1ccbbf12e269111253661"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2092530b4a58a31914f0ce28ca9b19506902151b", "author": {"user": {"login": "MabelYC", "name": "Yuhong Cheng"}}, "url": "https://github.com/apache/samza/commit/2092530b4a58a31914f0ce28ca9b19506902151b", "committedDate": "2020-08-05T18:53:24Z", "message": "rename the input parameter"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNzIyNzYw", "url": "https://github.com/apache/samza/pull/1408#pullrequestreview-462722760", "createdAt": "2020-08-06T17:16:58Z", "commit": {"oid": "2092530b4a58a31914f0ce28ca9b19506902151b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNzoxNjo1OVrOG88yCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNzoxNjo1OVrOG88yCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjU2MzU5NQ==", "bodyText": "i think it is ok to hardcode the prefix to \"DiagnosticsUtil\" too.", "url": "https://github.com/apache/samza/pull/1408#discussion_r466563595", "createdAt": "2020-08-06T17:16:59Z", "author": {"login": "sborya"}, "path": "samza-core/src/main/java/org/apache/samza/util/DiagnosticsUtil.java", "diffHunk": "@@ -144,7 +145,8 @@ public MetadataFileContents(String version, String metricsSnapshot) {\n       }\n       SystemFactory systemFactory = ReflectionUtil.getObj(diagnosticsSystemFactoryName.get(), SystemFactory.class);\n       SystemProducer systemProducer =\n-          systemFactory.getProducer(diagnosticsSystemStream.getSystem(), config, new MetricsRegistryMap());\n+          systemFactory.getProducer(diagnosticsSystemStream.getSystem(), config, new MetricsRegistryMap(),\n+              MethodHandles.lookup().lookupClass().getSimpleName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2092530b4a58a31914f0ce28ca9b19506902151b"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyODU1NTc1", "url": "https://github.com/apache/samza/pull/1408#pullrequestreview-462855575", "createdAt": "2020-08-06T20:32:28Z", "commit": {"oid": "2092530b4a58a31914f0ce28ca9b19506902151b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQyMDozMjoyOFrOG9DQjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQyMDozMjoyOFrOG9DQjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY2OTcxMA==", "bodyText": "Why assume that it's used as prefix in the API? Maybe just call this consumerName/consumerId and let the actual implementation figure out how to use it?", "url": "https://github.com/apache/samza/pull/1408#discussion_r466669710", "createdAt": "2020-08-06T20:32:28Z", "author": {"login": "prateekm"}, "path": "samza-api/src/main/java/org/apache/samza/system/SystemFactory.java", "diffHunk": "@@ -32,4 +32,16 @@\n   SystemProducer getProducer(String systemName, Config config, MetricsRegistry registry);\n \n   SystemAdmin getAdmin(String systemName, Config config);\n+\n+  default SystemConsumer getConsumer(String systemName, Config config, MetricsRegistry registry, String consumerIdPrefix) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2092530b4a58a31914f0ce28ca9b19506902151b"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyODU2MDg5", "url": "https://github.com/apache/samza/pull/1408#pullrequestreview-462856089", "createdAt": "2020-08-06T20:33:17Z", "commit": {"oid": "2092530b4a58a31914f0ce28ca9b19506902151b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQyMDozMzoxOFrOG9DSIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQyMDozMzoxOFrOG9DSIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY3MDExMg==", "bodyText": "Please add method Javadocs clarifying what the parameters are, and how these methods are different than the ones above.", "url": "https://github.com/apache/samza/pull/1408#discussion_r466670112", "createdAt": "2020-08-06T20:33:18Z", "author": {"login": "prateekm"}, "path": "samza-api/src/main/java/org/apache/samza/system/SystemFactory.java", "diffHunk": "@@ -32,4 +32,16 @@\n   SystemProducer getProducer(String systemName, Config config, MetricsRegistry registry);\n \n   SystemAdmin getAdmin(String systemName, Config config);\n+\n+  default SystemConsumer getConsumer(String systemName, Config config, MetricsRegistry registry, String consumerIdPrefix) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2092530b4a58a31914f0ce28ca9b19506902151b"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyOTA3NTgw", "url": "https://github.com/apache/samza/pull/1408#pullrequestreview-462907580", "createdAt": "2020-08-06T22:04:39Z", "commit": {"oid": "2092530b4a58a31914f0ce28ca9b19506902151b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQyMjowNDozOVrOG9Fxvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQyMjowNDozOVrOG9Fxvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjcxMDk3NQ==", "bodyText": "Should we mark the other methods as @deprecated to encourage use of the new methods and identify other call sites that need to be updated?", "url": "https://github.com/apache/samza/pull/1408#discussion_r466710975", "createdAt": "2020-08-06T22:04:39Z", "author": {"login": "prateekm"}, "path": "samza-api/src/main/java/org/apache/samza/system/SystemFactory.java", "diffHunk": "@@ -32,4 +32,16 @@\n   SystemProducer getProducer(String systemName, Config config, MetricsRegistry registry);\n \n   SystemAdmin getAdmin(String systemName, Config config);\n+\n+  default SystemConsumer getConsumer(String systemName, Config config, MetricsRegistry registry, String consumerIdPrefix) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2092530b4a58a31914f0ce28ca9b19506902151b"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a05c6e456b265380b1d0363d3de58177f03f65d5", "author": {"user": {"login": "MabelYC", "name": "Yuhong Cheng"}}, "url": "https://github.com/apache/samza/commit/a05c6e456b265380b1d0363d3de58177f03f65d5", "committedDate": "2020-08-07T00:24:30Z", "message": "address comment: adding javadoc and change to a more reasonable name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dcbdf8929cf462c869a49e85f760d5ebb55bb570", "author": {"user": {"login": "MabelYC", "name": "Yuhong Cheng"}}, "url": "https://github.com/apache/samza/commit/dcbdf8929cf462c869a49e85f760d5ebb55bb570", "committedDate": "2020-08-07T01:30:08Z", "message": "clean up comments and code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzNDQxNTY0", "url": "https://github.com/apache/samza/pull/1408#pullrequestreview-463441564", "createdAt": "2020-08-07T16:22:06Z", "commit": {"oid": "dcbdf8929cf462c869a49e85f760d5ebb55bb570"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxNjoyMjowNlrOG9gBoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxNjozMzo0MlrOG9gYuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE0MTAyNQ==", "bodyText": "nit. add '.' at the end.", "url": "https://github.com/apache/samza/pull/1408#discussion_r467141025", "createdAt": "2020-08-07T16:22:06Z", "author": {"login": "sborya"}, "path": "samza-api/src/main/java/org/apache/samza/system/SystemFactory.java", "diffHunk": "@@ -27,9 +27,56 @@\n  * a particular system, as well as the accompanying {@link org.apache.samza.system.SystemAdmin}.\n  */\n public interface SystemFactory {\n+  @Deprecated\n   SystemConsumer getConsumer(String systemName, Config config, MetricsRegistry registry);\n \n+  @Deprecated\n   SystemProducer getProducer(String systemName, Config config, MetricsRegistry registry);\n \n+  @Deprecated\n   SystemAdmin getAdmin(String systemName, Config config);\n+\n+  /**\n+   * This function provides an extra input parameter than {@link #getConsumer}, which can be used to provide extra\n+   * information e.g. ownership of client instance, to helper better identify consumers in logs,\n+   * threads and client instances etc., along with other relevant information like systemName", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcbdf8929cf462c869a49e85f760d5ebb55bb570"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE0NjUxNg==", "bodyText": "\" a string to provide extra info for the consumer instance.\"", "url": "https://github.com/apache/samza/pull/1408#discussion_r467146516", "createdAt": "2020-08-07T16:32:49Z", "author": {"login": "sborya"}, "path": "samza-api/src/main/java/org/apache/samza/system/SystemFactory.java", "diffHunk": "@@ -27,9 +27,56 @@\n  * a particular system, as well as the accompanying {@link org.apache.samza.system.SystemAdmin}.\n  */\n public interface SystemFactory {\n+  @Deprecated\n   SystemConsumer getConsumer(String systemName, Config config, MetricsRegistry registry);\n \n+  @Deprecated\n   SystemProducer getProducer(String systemName, Config config, MetricsRegistry registry);\n \n+  @Deprecated\n   SystemAdmin getAdmin(String systemName, Config config);\n+\n+  /**\n+   * This function provides an extra input parameter than {@link #getConsumer}, which can be used to provide extra\n+   * information e.g. ownership of client instance, to helper better identify consumers in logs,\n+   * threads and client instances etc., along with other relevant information like systemName\n+   *\n+   * @param systemName The name of the system to create consumer for.\n+   * @param config The config to create consumer with.\n+   * @param registry MetricsRegistry to which to publish consumer specific metrics.\n+   * @param consumerLabel a string used to provide info the consumer instance.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcbdf8929cf462c869a49e85f760d5ebb55bb570"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE0Njc0MA==", "bodyText": "see above.", "url": "https://github.com/apache/samza/pull/1408#discussion_r467146740", "createdAt": "2020-08-07T16:33:18Z", "author": {"login": "sborya"}, "path": "samza-api/src/main/java/org/apache/samza/system/SystemFactory.java", "diffHunk": "@@ -27,9 +27,56 @@\n  * a particular system, as well as the accompanying {@link org.apache.samza.system.SystemAdmin}.\n  */\n public interface SystemFactory {\n+  @Deprecated\n   SystemConsumer getConsumer(String systemName, Config config, MetricsRegistry registry);\n \n+  @Deprecated\n   SystemProducer getProducer(String systemName, Config config, MetricsRegistry registry);\n \n+  @Deprecated\n   SystemAdmin getAdmin(String systemName, Config config);\n+\n+  /**\n+   * This function provides an extra input parameter than {@link #getConsumer}, which can be used to provide extra\n+   * information e.g. ownership of client instance, to helper better identify consumers in logs,\n+   * threads and client instances etc., along with other relevant information like systemName\n+   *\n+   * @param systemName The name of the system to create consumer for.\n+   * @param config The config to create consumer with.\n+   * @param registry MetricsRegistry to which to publish consumer specific metrics.\n+   * @param consumerLabel a string used to provide info the consumer instance.\n+   * @return A SystemConsumer\n+   */\n+  default SystemConsumer getConsumer(String systemName, Config config, MetricsRegistry registry, String consumerLabel) {\n+    return getConsumer(systemName, config, registry);\n+  }\n+\n+  /**\n+   * This function provides an extra input parameter than {@link #getProducer}, which can be used to provide extra\n+   * information e.g. ownership of client instance, to helper better identify producers in logs,\n+   * threads and client instances etc., along with other relevant information like systemName\n+   *\n+   * @param systemName The name of the system to create producer for.\n+   * @param config The config to create producer with.\n+   * @param registry MetricsRegistry to which to publish producer specific metrics.\n+   * @param producerLabel a string used to provide info the producer instance.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcbdf8929cf462c869a49e85f760d5ebb55bb570"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE0NjkzNg==", "bodyText": "^^^", "url": "https://github.com/apache/samza/pull/1408#discussion_r467146936", "createdAt": "2020-08-07T16:33:42Z", "author": {"login": "sborya"}, "path": "samza-api/src/main/java/org/apache/samza/system/SystemFactory.java", "diffHunk": "@@ -27,9 +27,56 @@\n  * a particular system, as well as the accompanying {@link org.apache.samza.system.SystemAdmin}.\n  */\n public interface SystemFactory {\n+  @Deprecated\n   SystemConsumer getConsumer(String systemName, Config config, MetricsRegistry registry);\n \n+  @Deprecated\n   SystemProducer getProducer(String systemName, Config config, MetricsRegistry registry);\n \n+  @Deprecated\n   SystemAdmin getAdmin(String systemName, Config config);\n+\n+  /**\n+   * This function provides an extra input parameter than {@link #getConsumer}, which can be used to provide extra\n+   * information e.g. ownership of client instance, to helper better identify consumers in logs,\n+   * threads and client instances etc., along with other relevant information like systemName\n+   *\n+   * @param systemName The name of the system to create consumer for.\n+   * @param config The config to create consumer with.\n+   * @param registry MetricsRegistry to which to publish consumer specific metrics.\n+   * @param consumerLabel a string used to provide info the consumer instance.\n+   * @return A SystemConsumer\n+   */\n+  default SystemConsumer getConsumer(String systemName, Config config, MetricsRegistry registry, String consumerLabel) {\n+    return getConsumer(systemName, config, registry);\n+  }\n+\n+  /**\n+   * This function provides an extra input parameter than {@link #getProducer}, which can be used to provide extra\n+   * information e.g. ownership of client instance, to helper better identify producers in logs,\n+   * threads and client instances etc., along with other relevant information like systemName\n+   *\n+   * @param systemName The name of the system to create producer for.\n+   * @param config The config to create producer with.\n+   * @param registry MetricsRegistry to which to publish producer specific metrics.\n+   * @param producerLabel a string used to provide info the producer instance.\n+   * @return A SystemProducer\n+   */\n+  default SystemProducer getProducer(String systemName, Config config, MetricsRegistry registry, String producerLabel) {\n+    return getProducer(systemName, config, registry);\n+  }\n+\n+  /**\n+   * This function provides an extra input parameter than {@link #getAdmin}, which can be used to provide extra\n+   * information e.g. ownership of client instance, to helper better identify admins in logs,\n+   * threads and client instances etc., along with other relevant information like systemName", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcbdf8929cf462c869a49e85f760d5ebb55bb570"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7aa658008fc511783109ce6932fa5dd91b8ae545", "author": {"user": {"login": "MabelYC", "name": "Yuhong Cheng"}}, "url": "https://github.com/apache/samza/commit/7aa658008fc511783109ce6932fa5dd91b8ae545", "committedDate": "2020-08-07T17:10:21Z", "message": "clean up comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10d5d2fa325039260bdefa24cc12aa5334a6ab9c", "author": {"user": {"login": "MabelYC", "name": "Yuhong Cheng"}}, "url": "https://github.com/apache/samza/commit/10d5d2fa325039260bdefa24cc12aa5334a6ab9c", "committedDate": "2020-08-11T16:59:00Z", "message": "address comments and provide better comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2MTE3OTE1", "url": "https://github.com/apache/samza/pull/1408#pullrequestreview-466117915", "createdAt": "2020-08-12T17:17:44Z", "commit": {"oid": "10d5d2fa325039260bdefa24cc12aa5334a6ab9c"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxNzoxNzo0NFrOG_q8yA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQxNzoxOTowM1rOG_q_3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTQxNzE2MA==", "bodyText": "s/helper/help", "url": "https://github.com/apache/samza/pull/1408#discussion_r469417160", "createdAt": "2020-08-12T17:17:44Z", "author": {"login": "sborya"}, "path": "samza-api/src/main/java/org/apache/samza/system/SystemFactory.java", "diffHunk": "@@ -27,9 +27,56 @@\n  * a particular system, as well as the accompanying {@link org.apache.samza.system.SystemAdmin}.\n  */\n public interface SystemFactory {\n+  @Deprecated\n   SystemConsumer getConsumer(String systemName, Config config, MetricsRegistry registry);\n \n+  @Deprecated\n   SystemProducer getProducer(String systemName, Config config, MetricsRegistry registry);\n \n+  @Deprecated\n   SystemAdmin getAdmin(String systemName, Config config);\n+\n+  /**\n+   * This function provides an extra input parameter to {@link #getConsumer}, which can be used to provide extra\n+   * information for the consumer instance, e.g. ownership of client instance, to helper better identify consumers in logs,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10d5d2fa325039260bdefa24cc12aa5334a6ab9c"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTQxNzQyNQ==", "bodyText": "see above.", "url": "https://github.com/apache/samza/pull/1408#discussion_r469417425", "createdAt": "2020-08-12T17:18:13Z", "author": {"login": "sborya"}, "path": "samza-api/src/main/java/org/apache/samza/system/SystemFactory.java", "diffHunk": "@@ -27,9 +27,56 @@\n  * a particular system, as well as the accompanying {@link org.apache.samza.system.SystemAdmin}.\n  */\n public interface SystemFactory {\n+  @Deprecated\n   SystemConsumer getConsumer(String systemName, Config config, MetricsRegistry registry);\n \n+  @Deprecated\n   SystemProducer getProducer(String systemName, Config config, MetricsRegistry registry);\n \n+  @Deprecated\n   SystemAdmin getAdmin(String systemName, Config config);\n+\n+  /**\n+   * This function provides an extra input parameter to {@link #getConsumer}, which can be used to provide extra\n+   * information for the consumer instance, e.g. ownership of client instance, to helper better identify consumers in logs,\n+   * threads and client instances etc., along with other relevant information like systemName.\n+   *\n+   * @param systemName The name of the system to create consumer for.\n+   * @param config The config to create consumer with.\n+   * @param registry MetricsRegistry to which to publish consumer specific metrics.\n+   * @param consumerLabel a string to provide info the consumer instance.\n+   * @return A SystemConsumer\n+   */\n+  default SystemConsumer getConsumer(String systemName, Config config, MetricsRegistry registry, String consumerLabel) {\n+    return getConsumer(systemName, config, registry);\n+  }\n+\n+  /**\n+   * This function provides an extra input parameter to {@link #getProducer}, which can be used to provide extra\n+   * information for the producer instance, e.g. ownership of client instance, to helper better identify producers in logs,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10d5d2fa325039260bdefa24cc12aa5334a6ab9c"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTQxNzk1MA==", "bodyText": "see above.", "url": "https://github.com/apache/samza/pull/1408#discussion_r469417950", "createdAt": "2020-08-12T17:19:03Z", "author": {"login": "sborya"}, "path": "samza-api/src/main/java/org/apache/samza/system/SystemFactory.java", "diffHunk": "@@ -27,9 +27,56 @@\n  * a particular system, as well as the accompanying {@link org.apache.samza.system.SystemAdmin}.\n  */\n public interface SystemFactory {\n+  @Deprecated\n   SystemConsumer getConsumer(String systemName, Config config, MetricsRegistry registry);\n \n+  @Deprecated\n   SystemProducer getProducer(String systemName, Config config, MetricsRegistry registry);\n \n+  @Deprecated\n   SystemAdmin getAdmin(String systemName, Config config);\n+\n+  /**\n+   * This function provides an extra input parameter to {@link #getConsumer}, which can be used to provide extra\n+   * information for the consumer instance, e.g. ownership of client instance, to helper better identify consumers in logs,\n+   * threads and client instances etc., along with other relevant information like systemName.\n+   *\n+   * @param systemName The name of the system to create consumer for.\n+   * @param config The config to create consumer with.\n+   * @param registry MetricsRegistry to which to publish consumer specific metrics.\n+   * @param consumerLabel a string to provide info the consumer instance.\n+   * @return A SystemConsumer\n+   */\n+  default SystemConsumer getConsumer(String systemName, Config config, MetricsRegistry registry, String consumerLabel) {\n+    return getConsumer(systemName, config, registry);\n+  }\n+\n+  /**\n+   * This function provides an extra input parameter to {@link #getProducer}, which can be used to provide extra\n+   * information for the producer instance, e.g. ownership of client instance, to helper better identify producers in logs,\n+   * threads and client instances etc., along with other relevant information like systemName.\n+   *\n+   * @param systemName The name of the system to create producer for.\n+   * @param config The config to create producer with.\n+   * @param registry MetricsRegistry to which to publish producer specific metrics.\n+   * @param producerLabel a string to provide info the producer instance.\n+   * @return A SystemProducer\n+   */\n+  default SystemProducer getProducer(String systemName, Config config, MetricsRegistry registry, String producerLabel) {\n+    return getProducer(systemName, config, registry);\n+  }\n+\n+  /**\n+   * This function provides an extra input parameter to {@link #getAdmin}, which can be used to provide extra\n+   * information for the admin instance, e.g. ownership of client instance, to helper better identify admins in logs,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10d5d2fa325039260bdefa24cc12aa5334a6ab9c"}, "originalPosition": 45}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "926c758269ce372aa20a02d0d11a25b19db8c405", "author": {"user": {"login": "MabelYC", "name": "Yuhong Cheng"}}, "url": "https://github.com/apache/samza/commit/926c758269ce372aa20a02d0d11a25b19db8c405", "committedDate": "2020-08-12T18:05:41Z", "message": "address comment: clean typo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2MTU3OTQ1", "url": "https://github.com/apache/samza/pull/1408#pullrequestreview-466157945", "createdAt": "2020-08-12T18:13:02Z", "commit": {"oid": "926c758269ce372aa20a02d0d11a25b19db8c405"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4677, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}