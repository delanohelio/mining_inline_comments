{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxNTQ1Mzc3", "number": 1298, "title": "SAMZA-2476:Fix flaky tests in TestAzureBlobOutputStream", "bodyText": "Symptom:\nTravis builds occasionally fail with org.mockito.exceptions.misusing.UnfinishedStubbingException for org.apache.samza.system.azureblob.avro.TestAzureBlobOutputStream.testCloseMultipleBlocks.\nCause:\nSeems to be due to using PowerMockito.doAnswer for mocking com.azure.storage.blob.specialized.BlockBlobAsyncClient.commitBlockListWithResponse\nChanges:\npull call to commitBlockListWithResponse into a package private method of AzureBlobOutputStream and verify that method.\nTests:\nRerun of TestAzureBlobOutputStream in original code cause 240 failures in 10K runs\nRerun of TestAzureBlobOutputStream with this fix causes 0 failures in 10K runs", "createdAt": "2020-02-28T19:03:25Z", "url": "https://github.com/apache/samza/pull/1298", "merged": true, "mergeCommit": {"oid": "851fc481d0c12f6bb3330677cc61a7626323423c"}, "closed": true, "closedAt": "2020-03-02T19:23:35Z", "author": {"login": "lakshmi-manasa-g"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcI0oRwAH2gAyMzgxNTQ1Mzc3OjQxZWJhNTUwYTBlNGFjODg3ZTcyYTg0ZDU3M2U2NjM3Y2U0YmExNmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcI5MTNAH2gAyMzgxNTQ1Mzc3OjcxZGZkYzJjMGEwNjA1NjUyNjg1YWVlMjFkMzZiNTA2N2E3OWZjZWI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "41eba550a0e4ac887e72a84d573e6637ce4ba16f", "author": {"user": {"login": "lakshmi-manasa-g", "name": null}}, "url": "https://github.com/apache/samza/commit/41eba550a0e4ac887e72a84d573e6637ce4ba16f", "committedDate": "2020-02-28T18:56:32Z", "message": "SAMZA-2476:Fix flaky tests in TestAzureBlobOutputStream"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2NzUyODUx", "url": "https://github.com/apache/samza/pull/1298#pullrequestreview-366752851", "createdAt": "2020-02-29T00:11:23Z", "commit": {"oid": "41eba550a0e4ac887e72a84d573e6637ce4ba16f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQwMDoxMToyNFrOFwGKgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQwMDoxMToyNFrOFwGKgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTk3Njk2Mg==", "bodyText": "maybe simple javadoc?", "url": "https://github.com/apache/samza/pull/1298#discussion_r385976962", "createdAt": "2020-02-29T00:11:24Z", "author": {"login": "rmatharu"}, "path": "samza-azure/src/main/java/org/apache/samza/system/azureblob/avro/AzureBlobOutputStream.java", "diffHunk": "@@ -227,6 +227,11 @@ public synchronized void releaseBuffer() throws IOException {\n     this.compression = compression;\n   }\n \n+  @VisibleForTesting", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41eba550a0e4ac887e72a84d573e6637ce4ba16f"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2NzUyOTAy", "url": "https://github.com/apache/samza/pull/1298#pullrequestreview-366752902", "createdAt": "2020-02-29T00:11:35Z", "commit": {"oid": "41eba550a0e4ac887e72a84d573e6637ce4ba16f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71dfdc2c0a0605652685aee21d36b5067a79fceb", "author": {"user": {"login": "lakshmi-manasa-g", "name": null}}, "url": "https://github.com/apache/samza/commit/71dfdc2c0a0605652685aee21d36b5067a79fceb", "committedDate": "2020-02-29T00:15:30Z", "message": "simple java doc for new method"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4802, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}