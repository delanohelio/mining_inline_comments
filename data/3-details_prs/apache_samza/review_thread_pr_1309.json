{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg1ODgzOTY3", "number": 1309, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNjozNjoxNVrODmwuOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNjozNjo0NFrODmwvCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxOTcwNzQ3OnYy", "diffSide": "RIGHT", "path": "samza-core/src/main/java/org/apache/samza/clustermanager/ClusterBasedJobCoordinator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNjozNjoxNVrOF0XPzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNjo1NDozOFrOF0YBAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQ1MTE0OQ==", "bodyText": "Please add some comments about the use cases here for Beam. what's the expected main/args being passed in and what are we going to do with them.", "url": "https://github.com/apache/samza/pull/1309#discussion_r390451149", "createdAt": "2020-03-10T16:36:15Z", "author": {"login": "xinyuiscool"}, "path": "samza-core/src/main/java/org/apache/samza/clustermanager/ClusterBasedJobCoordinator.java", "diffHunk": "@@ -551,8 +553,23 @@ private static void runClusterBasedJobCoordinator(String[] args) {\n         throw new SamzaException(e);\n       }\n \n-      ClusterBasedJobCoordinator jc = createFromConfigLoader(submissionConfig);\n-      jc.run();\n+      ApplicationConfig appConfig = new ApplicationConfig(submissionConfig);\n+\n+      if (appConfig.getAppMainClass().isPresent()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b3cb4f1dbc6c158742806878386fdc62a1b8213"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQ2Mzc0Nw==", "bodyText": "Added", "url": "https://github.com/apache/samza/pull/1309#discussion_r390463747", "createdAt": "2020-03-10T16:54:38Z", "author": {"login": "kw2542"}, "path": "samza-core/src/main/java/org/apache/samza/clustermanager/ClusterBasedJobCoordinator.java", "diffHunk": "@@ -551,8 +553,23 @@ private static void runClusterBasedJobCoordinator(String[] args) {\n         throw new SamzaException(e);\n       }\n \n-      ClusterBasedJobCoordinator jc = createFromConfigLoader(submissionConfig);\n-      jc.run();\n+      ApplicationConfig appConfig = new ApplicationConfig(submissionConfig);\n+\n+      if (appConfig.getAppMainClass().isPresent()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQ1MTE0OQ=="}, "originalCommit": {"oid": "3b3cb4f1dbc6c158742806878386fdc62a1b8213"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxOTcwOTU0OnYy", "diffSide": "RIGHT", "path": "samza-core/src/main/java/org/apache/samza/clustermanager/ClusterBasedJobCoordinator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNjozNjo0NFrOF0XRMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNjo1NDozMVrOF0YAsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQ1MTUwNQ==", "bodyText": "is there else part being used right now?", "url": "https://github.com/apache/samza/pull/1309#discussion_r390451505", "createdAt": "2020-03-10T16:36:44Z", "author": {"login": "xinyuiscool"}, "path": "samza-core/src/main/java/org/apache/samza/clustermanager/ClusterBasedJobCoordinator.java", "diffHunk": "@@ -634,4 +651,20 @@ static ClusterBasedJobCoordinator createFromConfigLoader(Config submissionConfig\n         metadataStore,\n         config);\n   }\n+\n+  @VisibleForTesting\n+  static String[] toArgs(ApplicationConfig config) {\n+    List<String> args = new ArrayList<>(config.size() * 2);\n+\n+    config.forEach((key, value) -> {\n+      if (key.equals(ApplicationConfig.APP_MAIN_ARGS)) {\n+        args.addAll(Arrays.asList(value.split(\"\\\\s\")));\n+      } else {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b3cb4f1dbc6c158742806878386fdc62a1b8213"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQ2MzY2NQ==", "bodyText": "Yes,\nif block is to pass native Beam pipeline options such as\n--runner=SamzaRunner --maxSourceParallelism=1024\nelse block is to change other native samza configs with --config key=value, such as\n--config job.name=beam-test", "url": "https://github.com/apache/samza/pull/1309#discussion_r390463665", "createdAt": "2020-03-10T16:54:31Z", "author": {"login": "kw2542"}, "path": "samza-core/src/main/java/org/apache/samza/clustermanager/ClusterBasedJobCoordinator.java", "diffHunk": "@@ -634,4 +651,20 @@ static ClusterBasedJobCoordinator createFromConfigLoader(Config submissionConfig\n         metadataStore,\n         config);\n   }\n+\n+  @VisibleForTesting\n+  static String[] toArgs(ApplicationConfig config) {\n+    List<String> args = new ArrayList<>(config.size() * 2);\n+\n+    config.forEach((key, value) -> {\n+      if (key.equals(ApplicationConfig.APP_MAIN_ARGS)) {\n+        args.addAll(Arrays.asList(value.split(\"\\\\s\")));\n+      } else {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQ1MTUwNQ=="}, "originalCommit": {"oid": "3b3cb4f1dbc6c158742806878386fdc62a1b8213"}, "originalPosition": 56}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1602, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}