{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1NTA1NDU5", "number": 1278, "title": "SAMZA-2458: Update ProcessJobFactory and ThreadJobFactory to load full job config", "bodyText": "Design:\nhttps://cwiki.apache.org/confluence/display/SAMZA/SEP-23%3A+Simplify+Job+Runner\nChanges:\n\nUpdate ProcessJobFactory to load full job config, execute planning and write full job config back to coordiantor stream, which was done by RemoteApplicationRunner\nUpdate ThreadJobFactory to load full job config, execute planning and write full job config back to coordiantor stream, which was done by RemoteApplicationRunner\n\nThese are needed as RemoteApplicationRunner no longer get full job config, no longer execute planning and no longer persist full job config in coordinator stream anymore.\nAPI Changes:\nNone.\nUpgrade Instructions:\nSee #1256 for more detailed instructions.\nUsage Instructions:\nSee #1256 for more detailed instructions.\nTests\n\nLocal deploy a yarn job and verified it is working properly.", "createdAt": "2020-02-14T17:57:45Z", "url": "https://github.com/apache/samza/pull/1278", "merged": true, "mergeCommit": {"oid": "93c1dd5d460113df66800e61642b7f34da2bae59"}, "closed": true, "closedAt": "2020-02-18T22:06:01Z", "author": {"login": "kw2542"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcETU8TgH2gAyMzc1NTA1NDU5OjcxZTI1NzM0MjlhOTQzNzg4NGViNzc0ODY5M2FmMDkyZWIwM2FkMmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFpHY-gH2gAyMzc1NTA1NDU5OjliZDQ0OGM1Nzg1YWQ0NjNmYTkxZDA0MThhZGZlYjUxYTA3Mzk5MTQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "71e2573429a9437884eb7748693af092eb03ad2a", "author": {"user": null}, "url": "https://github.com/apache/samza/commit/71e2573429a9437884eb7748693af092eb03ad2a", "committedDate": "2020-02-14T17:52:51Z", "message": "SAMZA-2458: Update ProcessJobFactory and ThreadJobFactory to load full job config\n\nDesign:\nhttps://cwiki.apache.org/confluence/display/SAMZA/SEP-23%3A+Simplify+Job+Runner\n\nChanges:\n1. Update ProcessJobFactory to load full job config, execute planning and write full job config back to coordiantor stream, which was done by RemoteApplicationRunner\n2. Update ThreadJobFactory to load full job config, execute planning and write full job config back to coordiantor stream, which was done by RemoteApplicationRunner\n\nAPI Changes:\nNone\n\nUpgrade Instructions:\nNone\n\nUsage Instructions:\nNone\n\nTests\n1. Local deploy a yarn job and verified it is working properly."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4db667203d2f164bd2eb57ddbb8830f5b36705e3", "author": {"user": null}, "url": "https://github.com/apache/samza/commit/4db667203d2f164bd2eb57ddbb8830f5b36705e3", "committedDate": "2020-02-14T17:56:53Z", "message": "Update error message"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5MTIzODAy", "url": "https://github.com/apache/samza/pull/1278#pullrequestreview-359123802", "createdAt": "2020-02-14T18:07:40Z", "commit": {"oid": "4db667203d2f164bd2eb57ddbb8830f5b36705e3"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxODowNzo0MFrOFp_LIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxODoxMToyNlrOFp_RaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTU3MDk3Nw==", "bodyText": "Let's just call this jobModelManager", "url": "https://github.com/apache/samza/pull/1278#discussion_r379570977", "createdAt": "2020-02-14T18:07:40Z", "author": {"login": "prateekm"}, "path": "samza-core/src/main/scala/org/apache/samza/job/local/ProcessJobFactory.scala", "diffHunk": "@@ -51,15 +70,11 @@ class ProcessJobFactory extends StreamJobFactory with Logging {\n     val coordinatorStreamStore: CoordinatorStreamStore = new CoordinatorStreamStore(config, new MetricsRegistryMap())\n     coordinatorStreamStore.init()\n \n-    val configFromCoordinatorStream: Config = CoordinatorStreamUtil.readConfigFromCoordinatorStream(coordinatorStreamStore)\n-\n     val changelogStreamManager = new ChangelogStreamManager(new NamespaceAwareCoordinatorStreamStore(coordinatorStreamStore, SetChangelogMapping.TYPE))\n-\n-    val coordinator = JobModelManager(configFromCoordinatorStream, changelogStreamManager.readPartitionMapping(),\n-      coordinatorStreamStore, metricsRegistry)\n+    val coordinator = JobModelManager(config, changelogStreamManager.readPartitionMapping(), coordinatorStreamStore, metricsRegistry)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4db667203d2f164bd2eb57ddbb8830f5b36705e3"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTU3MTE0Nw==", "bodyText": "Minor: Let's remove \"stand alone\"", "url": "https://github.com/apache/samza/pull/1278#discussion_r379571147", "createdAt": "2020-02-14T18:08:01Z", "author": {"login": "prateekm"}, "path": "samza-core/src/main/scala/org/apache/samza/job/local/ProcessJobFactory.scala", "diffHunk": "@@ -22,25 +22,44 @@ package org.apache.samza.job.local\n import java.util\n \n import org.apache.samza.SamzaException\n+import org.apache.samza.application.ApplicationUtil\n+import org.apache.samza.application.descriptors.ApplicationDescriptorUtil\n import org.apache.samza.config.{Config, JobConfig, TaskConfig}\n import org.apache.samza.container.TaskName\n import org.apache.samza.coordinator.metadatastore.{CoordinatorStreamStore, NamespaceAwareCoordinatorStreamStore}\n import org.apache.samza.coordinator.stream.messages.SetChangelogMapping\n import org.apache.samza.coordinator.{JobModelManager, MetadataResourceUtil}\n+import org.apache.samza.execution.RemoteJobPlanner\n import org.apache.samza.job.model.JobModelUtil\n import org.apache.samza.job.{CommandBuilder, ShellCommandBuilder, StreamJob, StreamJobFactory}\n import org.apache.samza.metrics.MetricsRegistryMap\n import org.apache.samza.startpoint.StartpointManager\n import org.apache.samza.storage.ChangelogStreamManager\n-import org.apache.samza.util.{CoordinatorStreamUtil, Logging, ReflectionUtil}\n+import org.apache.samza.util.{ConfigUtil, CoordinatorStreamUtil, DiagnosticsUtil, Logging, ReflectionUtil}\n \n import scala.collection.JavaConversions._\n \n /**\n  * Creates a stand alone ProcessJob with the specified config.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4db667203d2f164bd2eb57ddbb8830f5b36705e3"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTU3MjA4Mw==", "bodyText": "It'll be useful to explain in the PR description why this change is necessary (under Changes), and what has changed from a user perspective (in the API changes section).", "url": "https://github.com/apache/samza/pull/1278#discussion_r379572083", "createdAt": "2020-02-14T18:10:16Z", "author": {"login": "prateekm"}, "path": "samza-core/src/main/scala/org/apache/samza/job/local/ProcessJobFactory.scala", "diffHunk": "@@ -22,25 +22,44 @@ package org.apache.samza.job.local\n import java.util\n \n import org.apache.samza.SamzaException\n+import org.apache.samza.application.ApplicationUtil\n+import org.apache.samza.application.descriptors.ApplicationDescriptorUtil\n import org.apache.samza.config.{Config, JobConfig, TaskConfig}\n import org.apache.samza.container.TaskName\n import org.apache.samza.coordinator.metadatastore.{CoordinatorStreamStore, NamespaceAwareCoordinatorStreamStore}\n import org.apache.samza.coordinator.stream.messages.SetChangelogMapping\n import org.apache.samza.coordinator.{JobModelManager, MetadataResourceUtil}\n+import org.apache.samza.execution.RemoteJobPlanner\n import org.apache.samza.job.model.JobModelUtil\n import org.apache.samza.job.{CommandBuilder, ShellCommandBuilder, StreamJob, StreamJobFactory}\n import org.apache.samza.metrics.MetricsRegistryMap\n import org.apache.samza.startpoint.StartpointManager\n import org.apache.samza.storage.ChangelogStreamManager\n-import org.apache.samza.util.{CoordinatorStreamUtil, Logging, ReflectionUtil}\n+import org.apache.samza.util.{ConfigUtil, CoordinatorStreamUtil, DiagnosticsUtil, Logging, ReflectionUtil}\n \n import scala.collection.JavaConversions._\n \n /**\n  * Creates a stand alone ProcessJob with the specified config.\n  */\n class ProcessJobFactory extends StreamJobFactory with Logging {\n-  def getJob(config: Config): StreamJob = {\n+  def getJob(submissionConfig: Config): StreamJob = {\n+    val originalConfig = ConfigUtil.loadConfig(submissionConfig)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4db667203d2f164bd2eb57ddbb8830f5b36705e3"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTU3MjU4NQ==", "bodyText": "\"Only single stage jobs are supported with ProcessJobFactory.\"", "url": "https://github.com/apache/samza/pull/1278#discussion_r379572585", "createdAt": "2020-02-14T18:11:26Z", "author": {"login": "prateekm"}, "path": "samza-core/src/main/scala/org/apache/samza/job/local/ProcessJobFactory.scala", "diffHunk": "@@ -22,25 +22,44 @@ package org.apache.samza.job.local\n import java.util\n \n import org.apache.samza.SamzaException\n+import org.apache.samza.application.ApplicationUtil\n+import org.apache.samza.application.descriptors.ApplicationDescriptorUtil\n import org.apache.samza.config.{Config, JobConfig, TaskConfig}\n import org.apache.samza.container.TaskName\n import org.apache.samza.coordinator.metadatastore.{CoordinatorStreamStore, NamespaceAwareCoordinatorStreamStore}\n import org.apache.samza.coordinator.stream.messages.SetChangelogMapping\n import org.apache.samza.coordinator.{JobModelManager, MetadataResourceUtil}\n+import org.apache.samza.execution.RemoteJobPlanner\n import org.apache.samza.job.model.JobModelUtil\n import org.apache.samza.job.{CommandBuilder, ShellCommandBuilder, StreamJob, StreamJobFactory}\n import org.apache.samza.metrics.MetricsRegistryMap\n import org.apache.samza.startpoint.StartpointManager\n import org.apache.samza.storage.ChangelogStreamManager\n-import org.apache.samza.util.{CoordinatorStreamUtil, Logging, ReflectionUtil}\n+import org.apache.samza.util.{ConfigUtil, CoordinatorStreamUtil, DiagnosticsUtil, Logging, ReflectionUtil}\n \n import scala.collection.JavaConversions._\n \n /**\n  * Creates a stand alone ProcessJob with the specified config.\n  */\n class ProcessJobFactory extends StreamJobFactory with Logging {\n-  def getJob(config: Config): StreamJob = {\n+  def getJob(submissionConfig: Config): StreamJob = {\n+    val originalConfig = ConfigUtil.loadConfig(submissionConfig)\n+\n+    // Execute planning\n+    val planner = new RemoteJobPlanner(ApplicationDescriptorUtil.getAppDescriptor(ApplicationUtil.fromConfig(originalConfig), originalConfig))\n+    val jobConfigs = planner.prepareJobs\n+\n+    if (jobConfigs.size != 1) {\n+      throw new SamzaException(\"Only single process job is supported.\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4db667203d2f164bd2eb57ddbb8830f5b36705e3"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf4fbc96f6e905ced180b815eb73c2f90388edf0", "author": {"user": null}, "url": "https://github.com/apache/samza/commit/bf4fbc96f6e905ced180b815eb73c2f90388edf0", "committedDate": "2020-02-14T18:29:20Z", "message": "Address prateekm's feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ab2aa8fae906918a04ea132dfb7426b15563bd1", "author": {"user": null}, "url": "https://github.com/apache/samza/commit/0ab2aa8fae906918a04ea132dfb7426b15563bd1", "committedDate": "2020-02-14T19:43:13Z", "message": "Update"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5Mjc4OTgw", "url": "https://github.com/apache/samza/pull/1278#pullrequestreview-359278980", "createdAt": "2020-02-14T23:52:46Z", "commit": {"oid": "0ab2aa8fae906918a04ea132dfb7426b15563bd1"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQyMzo1Mjo0NlrOFqGrUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQyMzo1Njo0NVrOFqGucw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY5MzkwNQ==", "bodyText": "From the naming of RemoteJobPlanner, this seems out of place. I believe RemoteJobPlanner was intended for use in RemoteApplicationRunner, but theoretically, any ApplicationRunner can be used with any StreamJobFactory.\nI guess the layers of abstraction are changing with the simplification of the job runners, but maybe we should rename some classes/interfaces and make sure the logic is in the right place as well.", "url": "https://github.com/apache/samza/pull/1278#discussion_r379693905", "createdAt": "2020-02-14T23:52:46Z", "author": {"login": "cameronlee314"}, "path": "samza-core/src/main/scala/org/apache/samza/job/local/ProcessJobFactory.scala", "diffHunk": "@@ -22,25 +22,48 @@ package org.apache.samza.job.local\n import java.util\n \n import org.apache.samza.SamzaException\n+import org.apache.samza.application.ApplicationUtil\n+import org.apache.samza.application.descriptors.ApplicationDescriptorUtil\n import org.apache.samza.config.{Config, JobConfig, TaskConfig}\n import org.apache.samza.container.TaskName\n import org.apache.samza.coordinator.metadatastore.{CoordinatorStreamStore, NamespaceAwareCoordinatorStreamStore}\n import org.apache.samza.coordinator.stream.messages.SetChangelogMapping\n import org.apache.samza.coordinator.{JobModelManager, MetadataResourceUtil}\n+import org.apache.samza.execution.RemoteJobPlanner\n import org.apache.samza.job.model.JobModelUtil\n import org.apache.samza.job.{CommandBuilder, ShellCommandBuilder, StreamJob, StreamJobFactory}\n import org.apache.samza.metrics.MetricsRegistryMap\n import org.apache.samza.startpoint.StartpointManager\n import org.apache.samza.storage.ChangelogStreamManager\n-import org.apache.samza.util.{CoordinatorStreamUtil, Logging, ReflectionUtil}\n+import org.apache.samza.util.{ConfigUtil, CoordinatorStreamUtil, DiagnosticsUtil, Logging, ReflectionUtil}\n \n import scala.collection.JavaConversions._\n \n /**\n- * Creates a stand alone ProcessJob with the specified config.\n+ * Creates a ProcessJob with the specified config.\n  */\n class ProcessJobFactory extends StreamJobFactory with Logging {\n-  def getJob(config: Config): StreamJob = {\n+  def getJob(submissionConfig: Config): StreamJob = {\n+    var config = submissionConfig\n+\n+    if (new JobConfig(submissionConfig).getConfigLoaderFactory.isPresent) {\n+      val originalConfig = ConfigUtil.loadConfig(submissionConfig)\n+\n+      // Execute planning\n+      val planner = new RemoteJobPlanner(ApplicationDescriptorUtil.getAppDescriptor(ApplicationUtil.fromConfig(originalConfig), originalConfig))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ab2aa8fae906918a04ea132dfb7426b15563bd1"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY5NDA4Nw==", "bodyText": "Similar to above: does this only need to be consistent with RemoteApplicationRunner?", "url": "https://github.com/apache/samza/pull/1278#discussion_r379694087", "createdAt": "2020-02-14T23:53:48Z", "author": {"login": "cameronlee314"}, "path": "samza-core/src/main/scala/org/apache/samza/job/local/ProcessJobFactory.scala", "diffHunk": "@@ -22,25 +22,48 @@ package org.apache.samza.job.local\n import java.util\n \n import org.apache.samza.SamzaException\n+import org.apache.samza.application.ApplicationUtil\n+import org.apache.samza.application.descriptors.ApplicationDescriptorUtil\n import org.apache.samza.config.{Config, JobConfig, TaskConfig}\n import org.apache.samza.container.TaskName\n import org.apache.samza.coordinator.metadatastore.{CoordinatorStreamStore, NamespaceAwareCoordinatorStreamStore}\n import org.apache.samza.coordinator.stream.messages.SetChangelogMapping\n import org.apache.samza.coordinator.{JobModelManager, MetadataResourceUtil}\n+import org.apache.samza.execution.RemoteJobPlanner\n import org.apache.samza.job.model.JobModelUtil\n import org.apache.samza.job.{CommandBuilder, ShellCommandBuilder, StreamJob, StreamJobFactory}\n import org.apache.samza.metrics.MetricsRegistryMap\n import org.apache.samza.startpoint.StartpointManager\n import org.apache.samza.storage.ChangelogStreamManager\n-import org.apache.samza.util.{CoordinatorStreamUtil, Logging, ReflectionUtil}\n+import org.apache.samza.util.{ConfigUtil, CoordinatorStreamUtil, DiagnosticsUtil, Logging, ReflectionUtil}\n \n import scala.collection.JavaConversions._\n \n /**\n- * Creates a stand alone ProcessJob with the specified config.\n+ * Creates a ProcessJob with the specified config.\n  */\n class ProcessJobFactory extends StreamJobFactory with Logging {\n-  def getJob(config: Config): StreamJob = {\n+  def getJob(submissionConfig: Config): StreamJob = {\n+    var config = submissionConfig\n+\n+    if (new JobConfig(submissionConfig).getConfigLoaderFactory.isPresent) {\n+      val originalConfig = ConfigUtil.loadConfig(submissionConfig)\n+\n+      // Execute planning\n+      val planner = new RemoteJobPlanner(ApplicationDescriptorUtil.getAppDescriptor(ApplicationUtil.fromConfig(originalConfig), originalConfig))\n+      val jobConfigs = planner.prepareJobs\n+\n+      if (jobConfigs.size != 1) {\n+        throw new SamzaException(\"Only single process job is supported.\")\n+      }\n+\n+      // This is the full job config\n+      config = jobConfigs.get(0)\n+      // This needs to be consistent with RemoteApplicationRunner#run where JobRunner#submit to be called instead of JobRunner#run\n+      CoordinatorStreamUtil.writeConfigToCoordinatorStream(config)\n+      DiagnosticsUtil.createDiagnosticsStream(config)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ab2aa8fae906918a04ea132dfb7426b15563bd1"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY5NDUxOA==", "bodyText": "Could you please update this comment? It looks like it was out-of-date before you made your changes, but would be nice to clarify it now.", "url": "https://github.com/apache/samza/pull/1278#discussion_r379694518", "createdAt": "2020-02-14T23:55:52Z", "author": {"login": "cameronlee314"}, "path": "samza-core/src/main/scala/org/apache/samza/job/local/ProcessJobFactory.scala", "diffHunk": "@@ -87,13 +106,13 @@ class ProcessJobFactory extends StreamJobFactory with Logging {\n     val commandBuilder = ReflectionUtil.getObj(commandBuilderClass, classOf[CommandBuilder])\n \n     // JobCoordinator is stopped by ProcessJob when it exits", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ab2aa8fae906918a04ea132dfb7426b15563bd1"}, "originalPosition": 74}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY5NDU5Nw==", "bodyText": "Similar to above about RemoteJobPlanner", "url": "https://github.com/apache/samza/pull/1278#discussion_r379694597", "createdAt": "2020-02-14T23:56:12Z", "author": {"login": "cameronlee314"}, "path": "samza-core/src/main/scala/org/apache/samza/job/local/ThreadJobFactory.scala", "diffHunk": "@@ -45,20 +47,36 @@ import scala.collection.mutable\n   * Creates a new Thread job with the given config\n   */\n class ThreadJobFactory extends StreamJobFactory with Logging {\n-  def getJob(config: Config): StreamJob = {\n+  def getJob(submissionConfig: Config): StreamJob = {\n     info(\"Creating a ThreadJob, which is only meant for debugging.\")\n+    var config = submissionConfig\n+    if (new JobConfig(submissionConfig).getConfigLoaderFactory.isPresent) {\n+      val originalConfig = ConfigUtil.loadConfig(submissionConfig)\n+\n+      // Execute planning\n+      val planner = new RemoteJobPlanner(ApplicationDescriptorUtil.getAppDescriptor(ApplicationUtil.fromConfig(originalConfig), originalConfig))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ab2aa8fae906918a04ea132dfb7426b15563bd1"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY5NDcwNw==", "bodyText": "This block seems duplicated with ProcessJobFactory. Any benefit in sharing code?", "url": "https://github.com/apache/samza/pull/1278#discussion_r379694707", "createdAt": "2020-02-14T23:56:45Z", "author": {"login": "cameronlee314"}, "path": "samza-core/src/main/scala/org/apache/samza/job/local/ThreadJobFactory.scala", "diffHunk": "@@ -45,20 +47,36 @@ import scala.collection.mutable\n   * Creates a new Thread job with the given config\n   */\n class ThreadJobFactory extends StreamJobFactory with Logging {\n-  def getJob(config: Config): StreamJob = {\n+  def getJob(submissionConfig: Config): StreamJob = {\n     info(\"Creating a ThreadJob, which is only meant for debugging.\")\n+    var config = submissionConfig\n+    if (new JobConfig(submissionConfig).getConfigLoaderFactory.isPresent) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ab2aa8fae906918a04ea132dfb7426b15563bd1"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNjk1Njkx", "url": "https://github.com/apache/samza/pull/1278#pullrequestreview-360695691", "createdAt": "2020-02-18T21:45:06Z", "commit": {"oid": "0ab2aa8fae906918a04ea132dfb7426b15563bd1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9bd448c5785ad463fa91d0418adfeb51a0739914", "author": {"user": null}, "url": "https://github.com/apache/samza/commit/9bd448c5785ad463fa91d0418adfeb51a0739914", "committedDate": "2020-02-18T21:49:53Z", "message": "Fix comment"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4780, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}