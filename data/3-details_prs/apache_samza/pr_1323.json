{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxNzA1ODcx", "number": 1323, "title": "Add docs for configs of Azure Blob SystemProducer ", "bodyText": "", "createdAt": "2020-03-20T19:30:17Z", "url": "https://github.com/apache/samza/pull/1323", "merged": true, "mergeCommit": {"oid": "b0fdb826fbff75922ad22392b1521d8f611c7621"}, "closed": true, "closedAt": "2020-03-25T17:00:55Z", "author": {"login": "lakshmi-manasa-g"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPlq4IAH2gAyMzkxNzA1ODcxOmFlMGRkM2ZhZjJjZjMyZWVjYWZiMDQzNTgyNDFiOTVmOTIwOTI3Nzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRKjMOgFqTM4MTM1MDc2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ae0dd3faf2cf32eecafb04358241b95f92092777", "author": {"user": {"login": "lakshmi-manasa-g", "name": null}}, "url": "https://github.com/apache/samza/commit/ae0dd3faf2cf32eecafb04358241b95f92092777", "committedDate": "2020-03-20T19:28:16Z", "message": "Add docs for Azure Blob SystemProducer"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5OTEyODE2", "url": "https://github.com/apache/samza/pull/1323#pullrequestreview-379912816", "createdAt": "2020-03-23T23:56:58Z", "commit": {"oid": "ae0dd3faf2cf32eecafb04358241b95f92092777"}, "state": "COMMENTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QyMzo1Njo1OFrOF6cgSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwMDoxNDo0NVrOF6c0Fg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjgyODc0Nw==", "bodyText": "Minor: The **__system-name__** part looks a little inconsistent with the other sections (which use systems.*.samza.factory).", "url": "https://github.com/apache/samza/pull/1323#discussion_r396828747", "createdAt": "2020-03-23T23:56:58Z", "author": {"login": "cameronlee314"}, "path": "docs/learn/documentation/versioned/jobs/samza-configurations.md", "diffHunk": "@@ -245,6 +246,34 @@ Configs for producing to [ElasticSearch](https://www.elastic.co/products/elastic\n |systems.**_system-name_**.<br>bulk.flush.max.size.mb|5|The maximum aggregate size of messages in the buffered before flushing.|\n |systems.**_system-name_**.<br>bulk.flush.interval.ms|never|How often buffered messages should be flushed.|\n \n+#### <a name=\"azure-blob-storage\"></a>[3.7 Azure Blob Storage](#azure-blob-storage)\n+Configs for producing to [Azure Blob Storage](https://azure.microsoft.com/en-us/services/storage/blobs/). This section applies if you have set systems.**__system-name__**.samza.factory = `org.apache.samza.system.azureblob.AzureBlobSystemFactory`.<br>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae0dd3faf2cf32eecafb04358241b95f92092777"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjgyOTM1NA==", "bodyText": "Minor: It looks like other parts of this documentation use false instead of \"false\".", "url": "https://github.com/apache/samza/pull/1323#discussion_r396829354", "createdAt": "2020-03-23T23:59:00Z", "author": {"login": "cameronlee314"}, "path": "docs/learn/documentation/versioned/jobs/samza-configurations.md", "diffHunk": "@@ -245,6 +246,34 @@ Configs for producing to [ElasticSearch](https://www.elastic.co/products/elastic\n |systems.**_system-name_**.<br>bulk.flush.max.size.mb|5|The maximum aggregate size of messages in the buffered before flushing.|\n |systems.**_system-name_**.<br>bulk.flush.interval.ms|never|How often buffered messages should be flushed.|\n \n+#### <a name=\"azure-blob-storage\"></a>[3.7 Azure Blob Storage](#azure-blob-storage)\n+Configs for producing to [Azure Blob Storage](https://azure.microsoft.com/en-us/services/storage/blobs/). This section applies if you have set systems.**__system-name__**.samza.factory = `org.apache.samza.system.azureblob.AzureBlobSystemFactory`.<br>\n+**_system-name_** is the Azure container name you want to produce blobs to. If such a container does not exist then it is created.<br> \n+\n+|Name|Default|Description|\n+|--- |--- |--- |\n+|sensitive.systems.**_system-name_**.azureblob.account.name| |__Required:__ The Azure account name to which the Azure container belongs to. |\n+|sensitive.systems.**_system-name_**.azureblob.account.key| |__Required:__ Key for the Azure account specified above.|\n+\n+#### <a name=\"advanced-azure-blob-storage\"></a>[Advanced Azure Blob Storage Configurations](#advanced-azure-blob-storage)\n+|Name|Default|Description|\n+|--- |--- |--- |\n+|systems.**_system-name_**.azureblob.proxy.use |\"false\"|if true, proxy will be used to connect to Azure.|", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae0dd3faf2cf32eecafb04358241b95f92092777"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjgzMDAxMw==", "bodyText": "Minor: For consistency, maybe put the actual milliseconds number. You can put 30s in parentheses or as a note in the Description part.", "url": "https://github.com/apache/samza/pull/1323#discussion_r396830013", "createdAt": "2020-03-24T00:01:21Z", "author": {"login": "cameronlee314"}, "path": "docs/learn/documentation/versioned/jobs/samza-configurations.md", "diffHunk": "@@ -245,6 +246,34 @@ Configs for producing to [ElasticSearch](https://www.elastic.co/products/elastic\n |systems.**_system-name_**.<br>bulk.flush.max.size.mb|5|The maximum aggregate size of messages in the buffered before flushing.|\n |systems.**_system-name_**.<br>bulk.flush.interval.ms|never|How often buffered messages should be flushed.|\n \n+#### <a name=\"azure-blob-storage\"></a>[3.7 Azure Blob Storage](#azure-blob-storage)\n+Configs for producing to [Azure Blob Storage](https://azure.microsoft.com/en-us/services/storage/blobs/). This section applies if you have set systems.**__system-name__**.samza.factory = `org.apache.samza.system.azureblob.AzureBlobSystemFactory`.<br>\n+**_system-name_** is the Azure container name you want to produce blobs to. If such a container does not exist then it is created.<br> \n+\n+|Name|Default|Description|\n+|--- |--- |--- |\n+|sensitive.systems.**_system-name_**.azureblob.account.name| |__Required:__ The Azure account name to which the Azure container belongs to. |\n+|sensitive.systems.**_system-name_**.azureblob.account.key| |__Required:__ Key for the Azure account specified above.|\n+\n+#### <a name=\"advanced-azure-blob-storage\"></a>[Advanced Azure Blob Storage Configurations](#advanced-azure-blob-storage)\n+|Name|Default|Description|\n+|--- |--- |--- |\n+|systems.**_system-name_**.azureblob.proxy.use |\"false\"|if true, proxy will be used to connect to Azure.|\n+|systems.**_system-name_**.azureblob.proxy.hostname| |if proxy.use is true then host name of proxy.|\n+|systems.**_system-name_**.azureblob.proxy.port| |if proxy.use is true then port of proxy.|\n+|samza.azureblob.log.slowRequestMs|30 secs|The duration after which an Azure request will be logged as a warning.|", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae0dd3faf2cf32eecafb04358241b95f92092777"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjgzMDgyNg==", "bodyText": "Minor: extra space before 4.75TB", "url": "https://github.com/apache/samza/pull/1323#discussion_r396830826", "createdAt": "2020-03-24T00:04:26Z", "author": {"login": "cameronlee314"}, "path": "docs/learn/documentation/versioned/jobs/samza-configurations.md", "diffHunk": "@@ -245,6 +246,34 @@ Configs for producing to [ElasticSearch](https://www.elastic.co/products/elastic\n |systems.**_system-name_**.<br>bulk.flush.max.size.mb|5|The maximum aggregate size of messages in the buffered before flushing.|\n |systems.**_system-name_**.<br>bulk.flush.interval.ms|never|How often buffered messages should be flushed.|\n \n+#### <a name=\"azure-blob-storage\"></a>[3.7 Azure Blob Storage](#azure-blob-storage)\n+Configs for producing to [Azure Blob Storage](https://azure.microsoft.com/en-us/services/storage/blobs/). This section applies if you have set systems.**__system-name__**.samza.factory = `org.apache.samza.system.azureblob.AzureBlobSystemFactory`.<br>\n+**_system-name_** is the Azure container name you want to produce blobs to. If such a container does not exist then it is created.<br> \n+\n+|Name|Default|Description|\n+|--- |--- |--- |\n+|sensitive.systems.**_system-name_**.azureblob.account.name| |__Required:__ The Azure account name to which the Azure container belongs to. |\n+|sensitive.systems.**_system-name_**.azureblob.account.key| |__Required:__ Key for the Azure account specified above.|\n+\n+#### <a name=\"advanced-azure-blob-storage\"></a>[Advanced Azure Blob Storage Configurations](#advanced-azure-blob-storage)\n+|Name|Default|Description|\n+|--- |--- |--- |\n+|systems.**_system-name_**.azureblob.proxy.use |\"false\"|if true, proxy will be used to connect to Azure.|\n+|systems.**_system-name_**.azureblob.proxy.hostname| |if proxy.use is true then host name of proxy.|\n+|systems.**_system-name_**.azureblob.proxy.port| |if proxy.use is true then port of proxy.|\n+|samza.azureblob.log.slowRequestMs|30 secs|The duration after which an Azure request will be logged as a warning.|\n+|systems.**_system-name_**.azureblob.writer.factory.class|`org.apache.samza.system.`<br>`azureblob.avro.`<br>`AzureBlobAvroWriterFactory`|Fully qualified class name of the `org.apache.samza.system.azureblob.producer.AzureBlobWriter` impl for the system producer.<br><br>The default writer creates blobs that are of type AVRO and require the messages sent to a blob to be AVRO records. The blobs created by the default writer are of type [Block Blobs](https://docs.microsoft.com/en-us/rest/api/storageservices/understanding-block-blobs--append-blobs--and-page-blobs#about-block-blobs).<br>All the following configs are relevant to this default writer.|\n+|systems.**_system-name_**.azureblob.compression.type|\"none\"|type of compression to be used before uploading blocks. Can be \"none\" or \"gzip\".|\n+|systems.**_system-name_**.azureblob.maxFlushThresholdSize|10485760 (10 MB)|max size of the uncompressed block to be uploaded in bytes. Maximum size allowed by Azure is 100MB.|\n+|systems.**_system-name_**.azureblob.maxBlobSize|Long.MAX_VALUE (unlimited)|max size of the uncompressed blob in bytes.<br>If default value then size is unlimited capped only by Azure BlockBlob size of  4.75 TB (100 MB per block X 50,000 blocks).|", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae0dd3faf2cf32eecafb04358241b95f92092777"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjgzMTA3Ng==", "bodyText": "Minor: same as above regarding using the actual milliseconds value", "url": "https://github.com/apache/samza/pull/1323#discussion_r396831076", "createdAt": "2020-03-24T00:05:25Z", "author": {"login": "cameronlee314"}, "path": "docs/learn/documentation/versioned/jobs/samza-configurations.md", "diffHunk": "@@ -245,6 +246,34 @@ Configs for producing to [ElasticSearch](https://www.elastic.co/products/elastic\n |systems.**_system-name_**.<br>bulk.flush.max.size.mb|5|The maximum aggregate size of messages in the buffered before flushing.|\n |systems.**_system-name_**.<br>bulk.flush.interval.ms|never|How often buffered messages should be flushed.|\n \n+#### <a name=\"azure-blob-storage\"></a>[3.7 Azure Blob Storage](#azure-blob-storage)\n+Configs for producing to [Azure Blob Storage](https://azure.microsoft.com/en-us/services/storage/blobs/). This section applies if you have set systems.**__system-name__**.samza.factory = `org.apache.samza.system.azureblob.AzureBlobSystemFactory`.<br>\n+**_system-name_** is the Azure container name you want to produce blobs to. If such a container does not exist then it is created.<br> \n+\n+|Name|Default|Description|\n+|--- |--- |--- |\n+|sensitive.systems.**_system-name_**.azureblob.account.name| |__Required:__ The Azure account name to which the Azure container belongs to. |\n+|sensitive.systems.**_system-name_**.azureblob.account.key| |__Required:__ Key for the Azure account specified above.|\n+\n+#### <a name=\"advanced-azure-blob-storage\"></a>[Advanced Azure Blob Storage Configurations](#advanced-azure-blob-storage)\n+|Name|Default|Description|\n+|--- |--- |--- |\n+|systems.**_system-name_**.azureblob.proxy.use |\"false\"|if true, proxy will be used to connect to Azure.|\n+|systems.**_system-name_**.azureblob.proxy.hostname| |if proxy.use is true then host name of proxy.|\n+|systems.**_system-name_**.azureblob.proxy.port| |if proxy.use is true then port of proxy.|\n+|samza.azureblob.log.slowRequestMs|30 secs|The duration after which an Azure request will be logged as a warning.|\n+|systems.**_system-name_**.azureblob.writer.factory.class|`org.apache.samza.system.`<br>`azureblob.avro.`<br>`AzureBlobAvroWriterFactory`|Fully qualified class name of the `org.apache.samza.system.azureblob.producer.AzureBlobWriter` impl for the system producer.<br><br>The default writer creates blobs that are of type AVRO and require the messages sent to a blob to be AVRO records. The blobs created by the default writer are of type [Block Blobs](https://docs.microsoft.com/en-us/rest/api/storageservices/understanding-block-blobs--append-blobs--and-page-blobs#about-block-blobs).<br>All the following configs are relevant to this default writer.|\n+|systems.**_system-name_**.azureblob.compression.type|\"none\"|type of compression to be used before uploading blocks. Can be \"none\" or \"gzip\".|\n+|systems.**_system-name_**.azureblob.maxFlushThresholdSize|10485760 (10 MB)|max size of the uncompressed block to be uploaded in bytes. Maximum size allowed by Azure is 100MB.|\n+|systems.**_system-name_**.azureblob.maxBlobSize|Long.MAX_VALUE (unlimited)|max size of the uncompressed blob in bytes.<br>If default value then size is unlimited capped only by Azure BlockBlob size of  4.75 TB (100 MB per block X 50,000 blocks).|\n+|systems.**_system-name_**.azureblob.maxMessagesPerBlob|Long.MAX_VALUE (unlimited)|max number of messages per blob.|\n+|systems.**_system-name_**.azureblob.threadPoolCount|2|number of threads for the asynchronous uploading of blocks.|\n+|systems.**_system-name_**.azureblob.blockingQueueSize|Thread Pool Count * 2|size of the queue to hold blocks ready to be uploaded by asynchronous threads.<br>If all threads are busy uploading then blocks are queued and if queue is full then main thread will start uploading which will block processing of incoming messages.|\n+|systems.**_system-name_**.azureblob.flushTimeoutMs|3 mins|timeout to finish uploading all blocks before committing a blob.|\n+|systems.**_system-name_**.azureblob.closeTimeoutMs|5 mins|timeout to finish committing all the blobs currently being written to. This does not include the flush timeout per blob.|", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae0dd3faf2cf32eecafb04358241b95f92092777"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjgzMjYxMA==", "bodyText": "Can you please clarify the description? I think the usage of the term \"duration\" might be overloaded. Do you mean that if the Azure request takes 30s to complete, then it will be logged?", "url": "https://github.com/apache/samza/pull/1323#discussion_r396832610", "createdAt": "2020-03-24T00:10:30Z", "author": {"login": "cameronlee314"}, "path": "docs/learn/documentation/versioned/jobs/samza-configurations.md", "diffHunk": "@@ -245,6 +246,34 @@ Configs for producing to [ElasticSearch](https://www.elastic.co/products/elastic\n |systems.**_system-name_**.<br>bulk.flush.max.size.mb|5|The maximum aggregate size of messages in the buffered before flushing.|\n |systems.**_system-name_**.<br>bulk.flush.interval.ms|never|How often buffered messages should be flushed.|\n \n+#### <a name=\"azure-blob-storage\"></a>[3.7 Azure Blob Storage](#azure-blob-storage)\n+Configs for producing to [Azure Blob Storage](https://azure.microsoft.com/en-us/services/storage/blobs/). This section applies if you have set systems.**__system-name__**.samza.factory = `org.apache.samza.system.azureblob.AzureBlobSystemFactory`.<br>\n+**_system-name_** is the Azure container name you want to produce blobs to. If such a container does not exist then it is created.<br> \n+\n+|Name|Default|Description|\n+|--- |--- |--- |\n+|sensitive.systems.**_system-name_**.azureblob.account.name| |__Required:__ The Azure account name to which the Azure container belongs to. |\n+|sensitive.systems.**_system-name_**.azureblob.account.key| |__Required:__ Key for the Azure account specified above.|\n+\n+#### <a name=\"advanced-azure-blob-storage\"></a>[Advanced Azure Blob Storage Configurations](#advanced-azure-blob-storage)\n+|Name|Default|Description|\n+|--- |--- |--- |\n+|systems.**_system-name_**.azureblob.proxy.use |\"false\"|if true, proxy will be used to connect to Azure.|\n+|systems.**_system-name_**.azureblob.proxy.hostname| |if proxy.use is true then host name of proxy.|\n+|systems.**_system-name_**.azureblob.proxy.port| |if proxy.use is true then port of proxy.|\n+|samza.azureblob.log.slowRequestMs|30 secs|The duration after which an Azure request will be logged as a warning.|", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae0dd3faf2cf32eecafb04358241b95f92092777"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjgzMzgxNA==", "bodyText": "Regarding \"All the following configs are relevant to this default writer.\": The following configs apply to other writers too, right? The wording kind of makes it sound like the following configs won't apply to a non-default writer. Can you please clarify that a little bit (or maybe you can just remove that sentence)?", "url": "https://github.com/apache/samza/pull/1323#discussion_r396833814", "createdAt": "2020-03-24T00:14:45Z", "author": {"login": "cameronlee314"}, "path": "docs/learn/documentation/versioned/jobs/samza-configurations.md", "diffHunk": "@@ -245,6 +246,34 @@ Configs for producing to [ElasticSearch](https://www.elastic.co/products/elastic\n |systems.**_system-name_**.<br>bulk.flush.max.size.mb|5|The maximum aggregate size of messages in the buffered before flushing.|\n |systems.**_system-name_**.<br>bulk.flush.interval.ms|never|How often buffered messages should be flushed.|\n \n+#### <a name=\"azure-blob-storage\"></a>[3.7 Azure Blob Storage](#azure-blob-storage)\n+Configs for producing to [Azure Blob Storage](https://azure.microsoft.com/en-us/services/storage/blobs/). This section applies if you have set systems.**__system-name__**.samza.factory = `org.apache.samza.system.azureblob.AzureBlobSystemFactory`.<br>\n+**_system-name_** is the Azure container name you want to produce blobs to. If such a container does not exist then it is created.<br> \n+\n+|Name|Default|Description|\n+|--- |--- |--- |\n+|sensitive.systems.**_system-name_**.azureblob.account.name| |__Required:__ The Azure account name to which the Azure container belongs to. |\n+|sensitive.systems.**_system-name_**.azureblob.account.key| |__Required:__ Key for the Azure account specified above.|\n+\n+#### <a name=\"advanced-azure-blob-storage\"></a>[Advanced Azure Blob Storage Configurations](#advanced-azure-blob-storage)\n+|Name|Default|Description|\n+|--- |--- |--- |\n+|systems.**_system-name_**.azureblob.proxy.use |\"false\"|if true, proxy will be used to connect to Azure.|\n+|systems.**_system-name_**.azureblob.proxy.hostname| |if proxy.use is true then host name of proxy.|\n+|systems.**_system-name_**.azureblob.proxy.port| |if proxy.use is true then port of proxy.|\n+|samza.azureblob.log.slowRequestMs|30 secs|The duration after which an Azure request will be logged as a warning.|\n+|systems.**_system-name_**.azureblob.writer.factory.class|`org.apache.samza.system.`<br>`azureblob.avro.`<br>`AzureBlobAvroWriterFactory`|Fully qualified class name of the `org.apache.samza.system.azureblob.producer.AzureBlobWriter` impl for the system producer.<br><br>The default writer creates blobs that are of type AVRO and require the messages sent to a blob to be AVRO records. The blobs created by the default writer are of type [Block Blobs](https://docs.microsoft.com/en-us/rest/api/storageservices/understanding-block-blobs--append-blobs--and-page-blobs#about-block-blobs).<br>All the following configs are relevant to this default writer.|", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae0dd3faf2cf32eecafb04358241b95f92092777"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7df38edef0620e974e5cfac34a6f1d560a63b7c4", "author": {"user": {"login": "lakshmi-manasa-g", "name": null}}, "url": "https://github.com/apache/samza/commit/7df38edef0620e974e5cfac34a6f1d560a63b7c4", "committedDate": "2020-03-25T04:29:09Z", "message": "address comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMzUwNzYw", "url": "https://github.com/apache/samza/pull/1323#pullrequestreview-381350760", "createdAt": "2020-03-25T17:00:17Z", "commit": {"oid": "7df38edef0620e974e5cfac34a6f1d560a63b7c4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4826, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}