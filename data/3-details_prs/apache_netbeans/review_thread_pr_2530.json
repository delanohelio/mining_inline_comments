{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4MDcyOTMw", "number": 2530, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwNToyMDoxMlrOE4AF2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwNTo0NDozMlrOFFaENA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI3MTU3MjA5OnYy", "diffSide": "RIGHT", "path": "java/java.lsp.server/test/unit/src/org/netbeans/modules/java/lsp/server/protocol/ServerTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwNToyMDoxMlrOHxq8jQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwNToyMDoxMlrOHxq8jQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTg0NTkwMQ==", "bodyText": "Great, there is a test!", "url": "https://github.com/apache/netbeans/pull/2530#discussion_r521845901", "createdAt": "2020-11-12T05:20:12Z", "author": {"login": "JaroslavTulach"}, "path": "java/java.lsp.server/test/unit/src/org/netbeans/modules/java/lsp/server/protocol/ServerTest.java", "diffHunk": "@@ -1134,6 +1140,93 @@ public void logMessage(MessageParams arg0) {\n         }\n     }\n \n+    public void testCodeActionGetterSetting() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c64eb1a17d33899c890f1e0d8dc27444f8b2405d"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxMjE0MjYwOnYy", "diffSide": "RIGHT", "path": "java/java.lsp.server/src/org/netbeans/modules/java/lsp/server/protocol/TextDocumentServiceImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwNTo0NDozMlrOIF57gA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwNTo0NDozMlrOIF57gA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzA2MjkxMg==", "bodyText": "I've noticed this code during #2587 and asked why we aren't using URLMapper.findURL(EXTERNAL)?", "url": "https://github.com/apache/netbeans/pull/2530#discussion_r543062912", "createdAt": "2020-12-15T05:44:32Z", "author": {"login": "JaroslavTulach"}, "path": "java/java.lsp.server/src/org/netbeans/modules/java/lsp/server/protocol/TextDocumentServiceImpl.java", "diffHunk": "@@ -1129,7 +1171,115 @@ private JavaSource getSource(String fileUri) {\n         }\n     }\n \n-    private static List<TextEdit> modify2TextEdits(JavaSource js, Task<WorkingCopy> task) throws IOException {\n+    public static Position createPosition(CompilationUnitTree cut, int offset) {\n+        return createPosition(cut.getLineMap(), offset);\n+    }\n+\n+    public static Position createPosition(LineMap lm, int offset) {\n+        return new Position((int) lm.getLineNumber(offset) - 1,\n+                            (int) lm.getColumnNumber(offset) - 1);\n+    }\n+\n+    public static Position createPosition(FileObject file, int offset) {\n+        try {\n+            EditorCookie ec = file.getLookup().lookup(EditorCookie.class);\n+            StyledDocument doc = ec.openDocument();\n+            int line = NbDocument.findLineNumber(doc, offset);\n+            int column = NbDocument.findLineColumn(doc, offset);\n+\n+            return new Position(line, column);\n+        } catch (IOException ex) {\n+            throw new IllegalStateException(ex);\n+        }\n+    }\n+\n+    public static int getOffset(Document doc, Position pos) {\n+        return LineDocumentUtils.getLineStartFromIndex((LineDocument) doc, pos.getLine()) + pos.getCharacter();\n+    }\n+\n+    private static String toUri(FileObject file) {\n+        if (FileUtil.isArchiveArtifact(file)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7cccad540e67da6cd9e927e65dca129135ca9353"}, "originalPosition": 113}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 233, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}