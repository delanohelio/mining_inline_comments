{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk2MTA0Nzk1", "number": 2055, "title": "NETBEANS-3580] : Fixed Debug Expression Lambda ", "bodyText": "https://issues.apache.org/jira/browse/NETBEANS-3580", "createdAt": "2020-03-31T06:28:29Z", "url": "https://github.com/apache/netbeans/pull/2055", "merged": true, "mergeCommit": {"oid": "794f30a8f89fee92cc597f2dfae17a5f04e89219"}, "closed": true, "closedAt": "2020-04-29T04:24:59Z", "author": {"login": "singh-akhilesh"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcZbTARgFqTM5NjI2NzUxNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABccDd0lgBqjMyODAxOTE3NTg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MjY3NTE0", "url": "https://github.com/apache/netbeans/pull/2055#pullrequestreview-396267514", "createdAt": "2020-04-20T09:02:23Z", "commit": {"oid": "4004978c79eb78532ea14d5923f4796a1e31a47b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwOTowMjoyM1rOGIKdWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwOTowMjoyM1rOGIKdWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTIxMzE0NA==", "bodyText": "It's better to use Comparator.comparingLong", "url": "https://github.com/apache/netbeans/pull/2055#discussion_r411213144", "createdAt": "2020-04-20T09:02:23Z", "author": {"login": "entlicher"}, "path": "java/debugger.jpda/src/org/netbeans/modules/debugger/jpda/breakpoints/LineBreakpointImpl.java", "diffHunk": "@@ -337,32 +343,35 @@ protected void classLoaded (List<ReferenceType> referenceTypes) {\n                     continue;\n                 }\n                 // Submit the breakpoint for the lowest location on the line only:\n-                Location location = locations.get(0);\n-                com.sun.jdi.Method m0 = location.method();\n-                for (int li = 1; li < locations.size(); li++) {\n-                    Location l = locations.get(li);\n-                    if (l.codeIndex() < location.codeIndex()) {\n-                        if (l.method().equals(m0)) {\n-                            // Assure that we're still in the same method\n-                            location = l;\n-                        }\n-                    }\n-                }\n+                /* If location contains multiple event breakpoint for the same line \n+                (e.g lambda expression along with any function calling \n+                map(n -> foo(\n+                        boo(n)))) \n+                then take the lowest location from each type of event*/\n+                Collection<Location> lowestLocationList = locations\n+                        .stream()\n+                        .collect(groupingBy(loc->loc.method().toString(),\n+                                LinkedHashMap::new,\n+                                collectingAndThen(minBy(Comparator.comparingDouble(Location::codeIndex)), ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4004978c79eb78532ea14d5923f4796a1e31a47b"}, "originalPosition": 54}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2Mjc2NzYy", "url": "https://github.com/apache/netbeans/pull/2055#pullrequestreview-396276762", "createdAt": "2020-04-20T09:14:56Z", "commit": {"oid": "4004978c79eb78532ea14d5923f4796a1e31a47b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61e57e8961e45d4ee49d1019677e839827745f07", "author": {"user": {"login": "singh-akhilesh", "name": "Akhilesh Singh"}}, "url": "https://github.com/apache/netbeans/commit/61e57e8961e45d4ee49d1019677e839827745f07", "committedDate": "2020-04-28T12:55:06Z", "message": "[NETBEANS-3580] : Fixed lambda debug breakpoint issue by processing all location event coming from vm"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3748327195088eb3803616bca97ffe9cb223ca11", "author": {"user": {"login": "singh-akhilesh", "name": "Akhilesh Singh"}}, "url": "https://github.com/apache/netbeans/commit/3748327195088eb3803616bca97ffe9cb223ca11", "committedDate": "2020-04-20T12:04:20Z", "message": "[NETBEANS-3580] : comments addressed"}, "afterCommit": {"oid": "61e57e8961e45d4ee49d1019677e839827745f07", "author": {"user": {"login": "singh-akhilesh", "name": "Akhilesh Singh"}}, "url": "https://github.com/apache/netbeans/commit/61e57e8961e45d4ee49d1019677e839827745f07", "committedDate": "2020-04-28T12:55:06Z", "message": "[NETBEANS-3580] : Fixed lambda debug breakpoint issue by processing all location event coming from vm"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 101, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}