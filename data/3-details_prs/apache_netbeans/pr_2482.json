{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA5NDg5OTU4", "number": 2482, "title": "[NETBEANS-4940] Workaround for caret-on-TAB drawing issue", "bodyText": "In ide/editor/lib/BaseCaret there's\nnewCaretBounds = c.getUI().modelToView(\n        c, offset, Position.Bias.Forward);\n// [TODO] Temporary fix - impl should remember real bounds computed by paintCustomCaret()\nif (newCaretBounds != null) {\n    newCaretBounds.width = Math.max(newCaretBounds.width, 2);\n}\n\nWhen offset is sitting on a TAB character,\neditor.lib2's TabView's modelToViewChecked(int offset, Shape alloc,... does\n        mutableBounds.width = 1;\n        return mutableBounds;\n\nSo the min of 2 applies and the caret drawing code gets a graphics context with clip width of 2.\nThis causes a drawing problem for the caret which can be ovserved in NetBeans. The problem may be exacerbated for plugins that provide their own caret. This fix provides a workaround that can be used by plugins until (if) the problem is addressed.", "createdAt": "2020-10-24T20:26:41Z", "url": "https://github.com/apache/netbeans/pull/2482", "merged": true, "mergeCommit": {"oid": "0f57b25c049fbda17f7fbdb678d93552d65d44af"}, "closed": true, "closedAt": "2020-11-04T16:17:45Z", "author": {"login": "errael"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWErongBqjM5MTgxMzEzNTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZftXYgFqTUyNDExNzA0NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b944df2e1c80b8ee236b50c1795fb0389721611c", "author": {"user": {"login": "errael", "name": "errael"}}, "url": "https://github.com/apache/netbeans/commit/b944df2e1c80b8ee236b50c1795fb0389721611c", "committedDate": "2020-10-24T19:30:40Z", "message": "[NETBEANS-4940] Workaround for caret-on-TAB drawing issue"}, "afterCommit": {"oid": "d81d06a94c19b83ad778b319c7999a52a97a7bdd", "author": {"user": {"login": "errael", "name": "errael"}}, "url": "https://github.com/apache/netbeans/commit/d81d06a94c19b83ad778b319c7999a52a97a7bdd", "committedDate": "2020-10-24T19:30:40Z", "message": "[NETBEANS-4940] Workaround for caret-on-TAB drawing issue"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2Mzg5MTcy", "url": "https://github.com/apache/netbeans/pull/2482#pullrequestreview-516389172", "createdAt": "2020-10-25T19:18:05Z", "commit": {"oid": "d81d06a94c19b83ad778b319c7999a52a97a7bdd"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMzU1ODYy", "url": "https://github.com/apache/netbeans/pull/2482#pullrequestreview-521355862", "createdAt": "2020-11-02T06:24:07Z", "commit": {"oid": "d81d06a94c19b83ad778b319c7999a52a97a7bdd"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwNjoyNDowN1rOHr3h0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQwNjoyNTowNFrOHr3ixQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTc2MDU5Mg==", "bodyText": "Technically it is editor.lib that exports the API and jVi that imports it.", "url": "https://github.com/apache/netbeans/pull/2482#discussion_r515760592", "createdAt": "2020-11-02T06:24:07Z", "author": {"login": "JaroslavTulach"}, "path": "ide/editor.lib/arch.xml", "diffHunk": "@@ -468,6 +468,12 @@ Description of public packages:\n         Document property that determines the number of characters in the longest line\n         determined during the document loading from a reader by the editor kit. \n     </api>\n+    <br/>\n+    <api type=\"import\" name=\"CARET_MIN_WIDTH\" category=\"devel\" group=\"property\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d81d06a94c19b83ad778b319c7999a52a97a7bdd"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTc2MDgzNw==", "bodyText": "The module version shall increase in its manifest and this element shall refer to the increased version.", "url": "https://github.com/apache/netbeans/pull/2482#discussion_r515760837", "createdAt": "2020-11-02T06:25:04Z", "author": {"login": "JaroslavTulach"}, "path": "ide/editor.lib/apichanges.xml", "diffHunk": "@@ -83,6 +83,21 @@ is the proper place.\n     <!-- ACTUAL CHANGES BEGIN HERE: -->\n \n     <changes>\n+        <change id=\"caret-min-width\">\n+            <summary>Allow to specify minimum caret width</summary>\n+            <version major=\"4\" minor=\"18\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d81d06a94c19b83ad778b319c7999a52a97a7bdd"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70cd0b49f92c5acc5a5c4d2a4a40b327aed3ad47", "author": {"user": {"login": "errael", "name": "errael"}}, "url": "https://github.com/apache/netbeans/commit/70cd0b49f92c5acc5a5c4d2a4a40b327aed3ad47", "committedDate": "2020-11-02T16:38:47Z", "message": "[NETBEANS-4940] Workaround for caret-on-TAB drawing issue"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d81d06a94c19b83ad778b319c7999a52a97a7bdd", "author": {"user": {"login": "errael", "name": "errael"}}, "url": "https://github.com/apache/netbeans/commit/d81d06a94c19b83ad778b319c7999a52a97a7bdd", "committedDate": "2020-10-24T19:30:40Z", "message": "[NETBEANS-4940] Workaround for caret-on-TAB drawing issue"}, "afterCommit": {"oid": "b54c5a9fbcbd41b3502fd57bef35405e69c7e729", "author": {"user": {"login": "errael", "name": "errael"}}, "url": "https://github.com/apache/netbeans/commit/b54c5a9fbcbd41b3502fd57bef35405e69c7e729", "committedDate": "2020-11-02T16:38:47Z", "message": "[NETBEANS-4940] Workaround for caret-on-TAB drawing issue"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyMjEyNzA2", "url": "https://github.com/apache/netbeans/pull/2482#pullrequestreview-522212706", "createdAt": "2020-11-03T06:26:34Z", "commit": {"oid": "b54c5a9fbcbd41b3502fd57bef35405e69c7e729"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b54c5a9fbcbd41b3502fd57bef35405e69c7e729", "author": {"user": {"login": "errael", "name": "errael"}}, "url": "https://github.com/apache/netbeans/commit/b54c5a9fbcbd41b3502fd57bef35405e69c7e729", "committedDate": "2020-11-02T16:38:47Z", "message": "[NETBEANS-4940] Workaround for caret-on-TAB drawing issue"}, "afterCommit": {"oid": "753ee51c3c98fe16b9a1360014b5898aa8b3f7d2", "author": {"user": {"login": "errael", "name": "errael"}}, "url": "https://github.com/apache/netbeans/commit/753ee51c3c98fe16b9a1360014b5898aa8b3f7d2", "committedDate": "2020-11-02T16:38:47Z", "message": "[NETBEANS-4940] Workaround for caret-on-TAB drawing issue"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "753ee51c3c98fe16b9a1360014b5898aa8b3f7d2", "author": {"user": {"login": "errael", "name": "errael"}}, "url": "https://github.com/apache/netbeans/commit/753ee51c3c98fe16b9a1360014b5898aa8b3f7d2", "committedDate": "2020-11-02T16:38:47Z", "message": "[NETBEANS-4940] Workaround for caret-on-TAB drawing issue"}, "afterCommit": {"oid": "70cd0b49f92c5acc5a5c4d2a4a40b327aed3ad47", "author": {"user": {"login": "errael", "name": "errael"}}, "url": "https://github.com/apache/netbeans/commit/70cd0b49f92c5acc5a5c4d2a4a40b327aed3ad47", "committedDate": "2020-11-02T16:38:47Z", "message": "[NETBEANS-4940] Workaround for caret-on-TAB drawing issue"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0MTE3MDQ1", "url": "https://github.com/apache/netbeans/pull/2482#pullrequestreview-524117045", "createdAt": "2020-11-05T10:21:57Z", "commit": {"oid": "70cd0b49f92c5acc5a5c4d2a4a40b327aed3ad47"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxMDoyMTo1N1rOHt8n7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQxMDoyMTo1N1rOHt8n7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzk0MTIzMQ==", "bodyText": "Category devel means: \"Under development is a name for a contract that is expected to become a stable API, but that has not yet been finished. The current state serves as a proof of concept, and others are encourage to try it and comment on a dedicated mailing list. Incompatible changes may be done between releases, but should be rare, not radical and properly announced on the mailing list. \"", "url": "https://github.com/apache/netbeans/pull/2482#discussion_r517941231", "createdAt": "2020-11-05T10:21:57Z", "author": {"login": "JaroslavTulach"}, "path": "ide/editor.lib/arch.xml", "diffHunk": "@@ -468,6 +468,12 @@ Description of public packages:\n         Document property that determines the number of characters in the longest line\n         determined during the document loading from a reader by the editor kit. \n     </api>\n+    <br/>\n+    <api type=\"export\" name=\"CARET_MIN_WIDTH\" category=\"devel\" group=\"property\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70cd0b49f92c5acc5a5c4d2a4a40b327aed3ad47"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 499, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}