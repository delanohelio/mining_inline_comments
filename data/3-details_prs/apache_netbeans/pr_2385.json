{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkwMDMyNjI2", "number": 2385, "title": "Improving the behavior of cpplite project - building should have prop\u2026", "bodyText": "\u2026er output; ergonomics should not disable the modules while the project is being used.\nThe output improvements are probably not controversial, but the ergonomics tweak probably is.\nThe issue is that feature-off-demand will disable \"unused\" features after 5 sessions. But, it detects used projects based on a file pattern inside the project. For the cpplite project, we have no specific file pattern inside the project, which is fine per Projects API. Please note the cpplite project does not even require \"Makefile\" or anything like that to work.\nSo, the workaround used here is that the cpplite project marks itself as \"used\" on the filesystem.", "createdAt": "2020-09-21T04:54:45Z", "url": "https://github.com/apache/netbeans/pull/2385", "merged": true, "mergeCommit": {"oid": "775ad09515cdb9a4315cdb9aea8cc085568d36f5"}, "closed": true, "closedAt": "2020-10-13T18:32:08Z", "author": {"login": "jlahoda"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdKUebggH2gAyNDkwMDMyNjI2OjE0NTg4NWNmMDM3ZDQ5OWRhYzFjYTMwZTAyZTc1ZTlkNzExZTM5YWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLR3zAAFqTQ5MzE1MTk4Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "145885cf037d499dac1ca30e02e75e9d711e39ab", "author": {"user": {"login": "jlahoda", "name": "Jan Lahoda"}}, "url": "https://github.com/apache/netbeans/commit/145885cf037d499dac1ca30e02e75e9d711e39ab", "committedDate": "2020-09-19T06:47:49Z", "message": "Improving the behavior of cpplite project - building should have proper output; ergonomics should not disable the modules while the project is being used."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMjg4Mjg5", "url": "https://github.com/apache/netbeans/pull/2385#pullrequestreview-492288289", "createdAt": "2020-09-21T05:37:36Z", "commit": {"oid": "145885cf037d499dac1ca30e02e75e9d711e39ab"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQwNTozNzozNlrOHVBMGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQwNTozNzozNlrOHVBMGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTgwMTYyNg==", "bodyText": "It is not reasonable to rely on a private API.", "url": "https://github.com/apache/netbeans/pull/2385#discussion_r491801626", "createdAt": "2020-09-21T05:37:36Z", "author": {"login": "JaroslavTulach"}, "path": "cpplite/cpplite.project/src/org/netbeans/modules/cpplite/project/CPPLiteProject.java", "diffHunk": "@@ -187,4 +196,34 @@ public void saveProject(Project project) throws IOException, ClassCastException\n             return TEMPLATES;\n         }\n     }\n+    private static class ProjectOpenedHookImpl extends ProjectOpenedHook {\n+\n+        @Override\n+        protected void projectOpened() {\n+            WORKER.post(() -> {\n+                //ensure cpplite is not disabled:\n+                FileObject modules = FileUtil.getConfigFile(\"Modules\"); // NOI18N\n+                if (modules == null) {\n+                    return;\n+                }\n+                for (FileObject cpplite : modules.getChildren()) {\n+                    if (!cpplite.getNameExt().contains(\"cpplite\")) {\n+                        continue;\n+                    }\n+                    try {\n+                        if (cpplite.getAttribute(\"ergonomicsUnused\") != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "145885cf037d499dac1ca30e02e75e9d711e39ab"}, "originalPosition": 61}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f445052e3e77af72c52196bdda7e6afe25f206c", "author": {"user": {"login": "jlahoda", "name": "Jan Lahoda"}}, "url": "https://github.com/apache/netbeans/commit/2f445052e3e77af72c52196bdda7e6afe25f206c", "committedDate": "2020-09-22T04:27:28Z", "message": "Using a marker class to detect used features as suggested"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMTUxOTgy", "url": "https://github.com/apache/netbeans/pull/2385#pullrequestreview-493151982", "createdAt": "2020-09-22T06:19:44Z", "commit": {"oid": "2f445052e3e77af72c52196bdda7e6afe25f206c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4814, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}