{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5MzI2NDU4", "number": 1848, "title": "[NETBEANS-3666] improve performance of multitabs on startup if many files are open", "bodyText": "This is an attempt to fix/workaround the startup performance problem if many files are open and multitabs are used (which is not the default).\nThere are actually two problems:\n\ngetPreferredWidth() is invoked very often from the multitabs table listener (~60000 times for 200 open files)\nthe text (usually a filename) is always HTML (but does not contain other HTML tags), which involves slow HTML parsing\n\nThis PR addresses only 2.", "createdAt": "2020-01-05T18:51:49Z", "url": "https://github.com/apache/netbeans/pull/1848", "merged": true, "mergeCommit": {"oid": "75284d515c0e38442741bb901a5c425c1afbe0c8"}, "closed": true, "closedAt": "2020-01-05T21:13:39Z", "author": {"login": "DevCharly"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb3cE2OAH2gAyMzU5MzI2NDU4OmQ3MmJkMjc5Yjg4ODcwZWI3NjFhZGUxZjAyNDNiOThlMmFlMTczZWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb3d5YOgH2gAyMzU5MzI2NDU4OmUxZGZlM2ZiNGFjY2U1ZmZhMDBmM2VmZDRkZTBmNTY0MmJlN2VlMGI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d72bd279b88870eb761ade1f0243b98e2ae173ee", "author": {"user": {"login": "DevCharly", "name": "Karl T"}}, "url": "https://github.com/apache/netbeans/commit/d72bd279b88870eb761ade1f0243b98e2ae173ee", "committedDate": "2020-01-05T18:43:24Z", "message": "[NETBEANS-3666] improve performance of multitabs on startup if many files are open"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4NDE1Njg3", "url": "https://github.com/apache/netbeans/pull/1848#pullrequestreview-338415687", "createdAt": "2020-01-05T18:57:50Z", "commit": {"oid": "d72bd279b88870eb761ade1f0243b98e2ae173ee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNVQxODo1Nzo1MVrOFaSg9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNVQxODo1Nzo1MVrOFaSg9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzExMDY0Ng==", "bodyText": "//NOI18N at the end of the line please.", "url": "https://github.com/apache/netbeans/pull/1848#discussion_r363110646", "createdAt": "2020-01-05T18:57:51Z", "author": {"login": "lkishalmi"}, "path": "platform/core.multitabs/src/org/netbeans/core/multitabs/impl/TabDataRenderer.java", "diffHunk": "@@ -141,6 +141,21 @@ int getPreferredWidth( Object value ) {\n                     icon = i;\n                 }\n             }\n+\n+            // On startup, this method is invoked very often if many files are open\n+            // (~60000 times for 200 open files).\n+            // The text (usually a filename) always starts with \"<html>\",\n+            // but does not contain other HTML tags.\n+            // The HTML rendering makes startup slow (and CPU load high).\n+            // To workaround this, remove the leading \"<html>\" if text does not\n+            // contain HTML tags or entities.\n+            String prefix = \"<html>\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d72bd279b88870eb761ade1f0243b98e2ae173ee"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1dfe3fb4acce5ffa00f3efd4de0f5642be7ee0b", "author": {"user": {"login": "DevCharly", "name": "Karl T"}}, "url": "https://github.com/apache/netbeans/commit/e1dfe3fb4acce5ffa00f3efd4de0f5642be7ee0b", "committedDate": "2020-01-05T20:50:41Z", "message": "added missing NOI18N"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 242, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}