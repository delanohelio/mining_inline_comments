{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg4MDQxMDYx", "number": 2372, "title": "Update dependencies to GraalVM 20.2.0", "bodyText": "This PR updates truffle-api, graalsdk and graaljs to their latest version (20.2.0). This brings numerous bugfixes and new features as described in GraalVM Release Notes.\n(Specifically, some of the bugfixes are needed to successfully integrate graal-based language libraries such as Heap Language, which can replace old Nashorn-based OQL scripting)\nAdditionally, GraalVM tests running on Travis have been split into two variants: MTS (Medium-Term Support) version and latest version to ensure compatibility with both.\nEdit(1): Small test update was also need. Since the new GraalVM versions support automatic Long \u21d2 String conversion, there was a method resolution ambiguity problem. Test was fixed by using String argument directly instead of Long.\nEdit(2): Seems that the OutOfMemory error was legitimate. For now, memory limit for graal-sdk tests has been slightly increased (480 \u21d2 700mb), but I will try to submit this as a performance problem to graalvm r/python.", "createdAt": "2020-09-16T14:44:04Z", "url": "https://github.com/apache/netbeans/pull/2372", "merged": true, "mergeCommit": {"oid": "d4d229062ae8cff574944b1d297a020d8d1cc868"}, "closed": true, "closedAt": "2020-09-19T08:03:18Z", "author": {"login": "daemontus"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJ0BAbgFqTQ5MDgwNjg1Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdKHxyuAFqTQ5MTU1MzIzNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwODA2ODUy", "url": "https://github.com/apache/netbeans/pull/2372#pullrequestreview-490806852", "createdAt": "2020-09-17T16:58:32Z", "commit": {"oid": "6f1f59abbbc6f67568fcd6babf2c6a1712d317e9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxNjo1ODozMlrOHTsrvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxNjo1ODozMlrOHTsrvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQxNzA4NA==", "bodyText": "Ok for the Travis changes \ud83d\udc4d", "url": "https://github.com/apache/netbeans/pull/2372#discussion_r490417084", "createdAt": "2020-09-17T16:58:32Z", "author": {"login": "hectorespert"}, "path": ".travis.yml", "diffHunk": "@@ -752,9 +752,21 @@ matrix:\n           script:\n             - (cd java/java.lsp.server; ant build-vscode-ext)\n \n-        - name: GRAALVM Tests\n+        - name: \"GraalVM Tests (latest)\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f1f59abbbc6f67568fcd6babf2c6a1712d317e9"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwODMxMDk3", "url": "https://github.com/apache/netbeans/pull/2372#pullrequestreview-490831097", "createdAt": "2020-09-17T17:28:42Z", "commit": {"oid": "6f1f59abbbc6f67568fcd6babf2c6a1712d317e9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxNzoyODo0MlrOHTtxXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxNzoyODo0MlrOHTtxXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQzNDkwOQ==", "bodyText": "Is this change really necessary? It does work in the GraalVM 20.2.0 console (CCing @woess):\n./graalvm-ce-java8-20.2.0/bin/js --jvm\n> let Long = Java.type(\"java.lang.Long\");\n> new Long(33)\n33\n> new Long(\"33\")\n33\nIt would be surprising that the interop behaves differently in the console and in our ScriptEngine...", "url": "https://github.com/apache/netbeans/pull/2372#discussion_r490434909", "createdAt": "2020-09-17T17:28:42Z", "author": {"login": "JaroslavTulach"}, "path": "platform/api.scripting/test/unit/src/org/netbeans/api/scripting/JavaScriptEnginesTest.java", "diffHunk": "@@ -256,7 +256,7 @@ public void allowLoadAClassInJS() throws Exception {\n         // BEGIN: org.netbeans.api.scripting.JavaScriptEnginesTest#allowLoadAClassInJS\n         Object fn = engine.eval(\"(function(obj) {\\n\"\n                 + \"  var Long = Java.type('java.lang.Long');\\n\"\n-                + \"  return new Long(33);\\n\"\n+                + \"  return new Long(\\\"33\\\");\\n\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6f1f59abbbc6f67568fcd6babf2c6a1712d317e9"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwOTIxODQx", "url": "https://github.com/apache/netbeans/pull/2372#pullrequestreview-490921841", "createdAt": "2020-09-17T19:28:35Z", "commit": {"oid": "6f1f59abbbc6f67568fcd6babf2c6a1712d317e9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxMTY4OTkz", "url": "https://github.com/apache/netbeans/pull/2372#pullrequestreview-491168993", "createdAt": "2020-09-18T05:53:25Z", "commit": {"oid": "aa768095e61e8764fb87fbb6e6e87093e223e5d1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e15a48fe1f6006091b538d5dc7b80485e2e3c0aa", "author": {"user": {"login": "daemontus", "name": "Samuel Pastva"}}, "url": "https://github.com/apache/netbeans/commit/e15a48fe1f6006091b538d5dc7b80485e2e3c0aa", "committedDate": "2020-09-18T09:18:41Z", "message": "Update truffle-api dependency to 20.2.0"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8521d90a3c407a134a935ad80921e9791e87223", "author": {"user": {"login": "daemontus", "name": "Samuel Pastva"}}, "url": "https://github.com/apache/netbeans/commit/b8521d90a3c407a134a935ad80921e9791e87223", "committedDate": "2020-09-18T09:18:41Z", "message": "Update graalsdk dependency to 20.2.0"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc752407a26bde151cacba008260d90a103cb037", "author": {"user": {"login": "daemontus", "name": "Samuel Pastva"}}, "url": "https://github.com/apache/netbeans/commit/bc752407a26bde151cacba008260d90a103cb037", "committedDate": "2020-09-18T09:18:41Z", "message": "Update graaljs dependency to 20.2.0"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bcbc5b9de523ba805037fd05cb9f183727113c0e", "author": {"user": {"login": "daemontus", "name": "Samuel Pastva"}}, "url": "https://github.com/apache/netbeans/commit/bcbc5b9de523ba805037fd05cb9f183727113c0e", "committedDate": "2020-09-18T09:18:42Z", "message": "CI: Run GraalVM tests on both latest and LTS version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4357fa94ed93ebff9262bd7b0d11c44851b4feff", "author": {"user": {"login": "daemontus", "name": "Samuel Pastva"}}, "url": "https://github.com/apache/netbeans/commit/4357fa94ed93ebff9262bd7b0d11c44851b4feff", "committedDate": "2020-09-18T09:18:42Z", "message": "Resolve method resolution ambiguity."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "686f9824340f27368145a2da541550f53ea4ca49", "author": {"user": {"login": "daemontus", "name": "Samuel Pastva"}}, "url": "https://github.com/apache/netbeans/commit/686f9824340f27368145a2da541550f53ea4ca49", "committedDate": "2020-09-18T09:18:42Z", "message": "Increase test memory limit for graal-sdk tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df53a865a0b539670065a168a07b70a2c0b334d3", "author": {"user": {"login": "JaroslavTulach", "name": "Jaroslav Tulach"}}, "url": "https://github.com/apache/netbeans/commit/df53a865a0b539670065a168a07b70a2c0b334d3", "committedDate": "2020-09-18T09:18:42Z", "message": "Workaround for GR-26188. Calling polyglot.js.allowHostAccess replaces NASHORN_HOST_ACCESS with ALL."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "414a83802f8fd873cef6a698bcdf32b24c92d7c8", "author": {"user": {"login": "daemontus", "name": "Samuel Pastva"}}, "url": "https://github.com/apache/netbeans/commit/414a83802f8fd873cef6a698bcdf32b24c92d7c8", "committedDate": "2020-09-18T09:18:42Z", "message": "Update graalsdk public packages."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "aa768095e61e8764fb87fbb6e6e87093e223e5d1", "author": {"user": {"login": "JaroslavTulach", "name": "Jaroslav Tulach"}}, "url": "https://github.com/apache/netbeans/commit/aa768095e61e8764fb87fbb6e6e87093e223e5d1", "committedDate": "2020-09-18T05:42:24Z", "message": "Workaround for GR-26188. Calling polyglot.js.allowHostAccess replaces NASHORN_HOST_ACCESS with ALL."}, "afterCommit": {"oid": "414a83802f8fd873cef6a698bcdf32b24c92d7c8", "author": {"user": {"login": "daemontus", "name": "Samuel Pastva"}}, "url": "https://github.com/apache/netbeans/commit/414a83802f8fd873cef6a698bcdf32b24c92d7c8", "committedDate": "2020-09-18T09:18:42Z", "message": "Update graalsdk public packages."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxMzEzMzY3", "url": "https://github.com/apache/netbeans/pull/2372#pullrequestreview-491313367", "createdAt": "2020-09-18T09:45:39Z", "commit": {"oid": "414a83802f8fd873cef6a698bcdf32b24c92d7c8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "afc3259c158be1bcaaf922597e38a6943d0e510f", "author": {"user": {"login": "JaroslavTulach", "name": "Jaroslav Tulach"}}, "url": "https://github.com/apache/netbeans/commit/afc3259c158be1bcaaf922597e38a6943d0e510f", "committedDate": "2020-09-18T13:39:46Z", "message": "Compare the signatures against previous release"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d80c3785866383fdf519855366aba08d5035fd8c", "author": {"user": {"login": "JaroslavTulach", "name": "Jaroslav Tulach"}}, "url": "https://github.com/apache/netbeans/commit/d80c3785866383fdf519855366aba08d5035fd8c", "committedDate": "2020-09-18T14:33:06Z", "message": "Regenerating GraalSDK and Truffle API signature to match 20.2.0 version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "714f3403e75266a104084f1a209b8e63d0b876dc", "author": {"user": {"login": "JaroslavTulach", "name": "Jaroslav Tulach"}}, "url": "https://github.com/apache/netbeans/commit/714f3403e75266a104084f1a209b8e63d0b876dc", "committedDate": "2020-09-18T14:33:44Z", "message": "Adjusting other .sig files to now enabled 'ant check-sigtests-release' test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eed81f5d058b652683884a9a11a17cf6cc55adb7", "author": {"user": {"login": "JaroslavTulach", "name": "Jaroslav Tulach"}}, "url": "https://github.com/apache/netbeans/commit/eed81f5d058b652683884a9a11a17cf6cc55adb7", "committedDate": "2020-09-18T15:17:46Z", "message": "Increasing spec versions of all three Graal.js related modules as they depend on each other"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxNTUzMjM3", "url": "https://github.com/apache/netbeans/pull/2372#pullrequestreview-491553237", "createdAt": "2020-09-18T15:09:14Z", "commit": {"oid": "714f3403e75266a104084f1a209b8e63d0b876dc"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxNTowOToxNFrOHURLDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxNTowOToxNFrOHURLDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTAxNDkyNg==", "bodyText": "We have to run ant check-sigtest-release otherwise we are checking against non-existing files and the check trivially passes.", "url": "https://github.com/apache/netbeans/pull/2372#discussion_r491014926", "createdAt": "2020-09-18T15:09:14Z", "author": {"login": "JaroslavTulach"}, "path": ".travis.yml", "diffHunk": "@@ -57,7 +57,7 @@ matrix:\n             - ant $OPTS clean\n             - ant $OPTS build\n           script:\n-            - ant $OPTS check-sigtests -Dfail.on.error=true\n+            - ant $OPTS check-sigtests-release -Dfail.on.error=true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "714f3403e75266a104084f1a209b8e63d0b876dc"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4803, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}