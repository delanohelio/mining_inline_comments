{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgzODA0NDc5", "number": 2359, "title": "commit-validation fixes: code improvements", "bodyText": "This PR collects several code improvements for both tests and the implementation itself. The goal is to make commit-validation work again. For easier review separated from 'simple' order change / label fixes which are coming in a subsequent PR.\nSee explanation comments inline.", "createdAt": "2020-09-10T12:46:44Z", "url": "https://github.com/apache/netbeans/pull/2359", "merged": true, "mergeCommit": {"oid": "dd427e8f7f9c58a9ce56dbb015750ac29b319d41"}, "closed": true, "closedAt": "2020-09-22T13:55:38Z", "author": {"login": "sdedic"}, "timelineItems": {"totalCount": 34, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHgO2KgFqTQ4NTg5MjE0NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLXXRJAFqTQ5MzQxNzQ5Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1ODkyMTQ1", "url": "https://github.com/apache/netbeans/pull/2359#pullrequestreview-485892145", "createdAt": "2020-09-10T12:47:53Z", "commit": {"oid": "e2b55e525aa4a10c7e974f50e0fff6d9bf9dd011"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMjo0Nzo1M1rOHPx3MA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMjo0Nzo1M1rOHPx3MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjMwNzYzMg==", "bodyText": "Compatible, Services Lookup is recursive.", "url": "https://github.com/apache/netbeans/pull/2359#discussion_r486307632", "createdAt": "2020-09-10T12:47:53Z", "author": {"login": "sdedic"}, "path": "ide/gsf.testrunner/src/org/netbeans/modules/gsf/testrunner/TestCreatorProviderProcessor.java", "diffHunk": "@@ -47,11 +47,11 @@ protected boolean handleProcess(Set<? extends TypeElement> annotations, RoundEnv\n             if(registration == null) {\n                 continue;\n             }\n-            File f = layer(e).instanceFile(\"Services\", null);\n+            File f = layer(e).instanceFile(\"Services/TestCreatorProviders\", null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2b55e525aa4a10c7e974f50e0fff6d9bf9dd011"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1ODk0NzMy", "url": "https://github.com/apache/netbeans/pull/2359#pullrequestreview-485894732", "createdAt": "2020-09-10T12:50:49Z", "commit": {"oid": "e2b55e525aa4a10c7e974f50e0fff6d9bf9dd011"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMjo1MDo0OVrOHPx-zA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMjo1MDo0OVrOHPx-zA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjMwOTU4MA==", "bodyText": "The Processor generates same position for all position-less registrations, which fails commit-validationtest.", "url": "https://github.com/apache/netbeans/pull/2359#discussion_r486309580", "createdAt": "2020-09-10T12:50:49Z", "author": {"login": "sdedic"}, "path": "ide/gsf.testrunner/src/org/netbeans/modules/gsf/testrunner/TestCreatorProviderProcessor.java", "diffHunk": "@@ -47,11 +47,11 @@ protected boolean handleProcess(Set<? extends TypeElement> annotations, RoundEnv\n             if(registration == null) {\n                 continue;\n             }\n-            File f = layer(e).instanceFile(\"Services\", null);\n+            File f = layer(e).instanceFile(\"Services/TestCreatorProviders\", null);\n             f.stringvalue(\"instanceOf\", TestCreatorProvider.class.getName());\n             f.bundlevalue(\"displayName\", registration.displayName());\n             f.bundlevalue(\"identifier\", registration.identifier());\n-            if (registration.position() != -1) {\n+            if (registration.position() != -1 && registration.position() != Integer.MAX_VALUE) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2b55e525aa4a10c7e974f50e0fff6d9bf9dd011"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1ODk0ODY2", "url": "https://github.com/apache/netbeans/pull/2359#pullrequestreview-485894866", "createdAt": "2020-09-10T12:50:58Z", "commit": {"oid": "e2b55e525aa4a10c7e974f50e0fff6d9bf9dd011"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMjo1MDo1OFrOHPx_Ow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMjo1MDo1OFrOHPx_Ow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjMwOTY5MQ==", "bodyText": "Surprisingly this Lambda caused the test to fail on CNFE when instantiating the Iterator (test checks if the instanceCreate works), as nbjavac's *Element were not available at test time. Moving to a subclass delayed linkage (the task actually never runs during test)", "url": "https://github.com/apache/netbeans/pull/2359#discussion_r486309691", "createdAt": "2020-09-10T12:50:58Z", "author": {"login": "sdedic"}, "path": "java/java.project.ui/src/org/netbeans/modules/java/project/ui/NewJavaFileWizardIterator.java", "diffHunk": "@@ -241,17 +242,28 @@ private void addRequires(FileObject createdFile, Set<String> requiredModuleNames\n             final JavaSource src = JavaSource.forFileObject(createdFile);\n             if (src != null) {\n                 final Set<String> mNames = requiredModuleNames;\n-                src.runModificationTask((WorkingCopy copy) -> {\n-                    copy.toPhase(JavaSource.Phase.RESOLVED);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2b55e525aa4a10c7e974f50e0fff6d9bf9dd011"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1ODk5NDcw", "url": "https://github.com/apache/netbeans/pull/2359#pullrequestreview-485899470", "createdAt": "2020-09-10T12:56:12Z", "commit": {"oid": "e2b55e525aa4a10c7e974f50e0fff6d9bf9dd011"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMjo1NjoxMlrOHPyNmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMjo1NjoxMlrOHPyNmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjMxMzM3MQ==", "bodyText": "The problem is that with MIME being hierarchical, a single position defined in text/x-java means, that if anyone registers a general service (in /):\n\nif position is not specified, that service faisl commit-validation as the sequence text/x-java/* + /* contains both defined and undefined positions\nif general service does define position, then all MIMEs other than java must start to provide positions.\n\nSo as discussed with @JaroslavTulach, it's far more safer to generate some positions always.\nThe goal is to:\n\ngenerate position\nprefer more specific (lower in the folder hierarchy) registrations\ndefine some stable order\ngenerate different numbers :-)\n\nNote the exclusion of the \"\" (none) subfolder: various services are registered in Editors/ (or relevant MIME) directly which do NOT have position at the moment, and are registerd manually (entries in layers.xml, ...). Tons of changes would happen if positions would be generated by the annotation processor there. So this change only affect \"named\" service subfolders.", "url": "https://github.com/apache/netbeans/pull/2359#discussion_r486313371", "createdAt": "2020-09-10T12:56:12Z", "author": {"login": "sdedic"}, "path": "platform/editor.mimelookup/src/org/netbeans/modules/editor/mimelookup/CreateRegistrationProcessor.java", "diffHunk": "@@ -145,7 +147,17 @@ private void process(Element toRegister, AnnotationMirror mimeRegistration) thro\n             }\n \n             instantiableClassOrMethod(toRegister, apiTE);\n-            layer(toRegister).instanceFile(\"Editors\" + mimeType + folder, null, null).position(position).stringvalue(\"instanceOf\", processingEnv.getElementUtils().getBinaryName(apiTE).toString()).write();    //NOI18N\n+            File f = layer(toRegister).instanceFile(\"Editors\" + mimeType + folder, null, null);\n+            if (position == Integer.MAX_VALUE && !\"\".equals(folder)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2b55e525aa4a10c7e974f50e0fff6d9bf9dd011"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1OTAwMDQw", "url": "https://github.com/apache/netbeans/pull/2359#pullrequestreview-485900040", "createdAt": "2020-09-10T12:56:50Z", "commit": {"oid": "e2b55e525aa4a10c7e974f50e0fff6d9bf9dd011"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMjo1Njo1MFrOHPyPOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMjo1Njo1MFrOHPyPOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjMxMzc4NQ==", "bodyText": "Turned out to be a problem when commit-validation was run on clustrer.config=platform (no keymaps there)", "url": "https://github.com/apache/netbeans/pull/2359#discussion_r486313785", "createdAt": "2020-09-10T12:56:50Z", "author": {"login": "sdedic"}, "path": "platform/o.n.core/test/qa-functional/src/org/netbeans/core/validation/ValidateLayerConsistencyTest.java", "diffHunk": "@@ -905,7 +905,11 @@ private boolean skipFile(FileObject fo) {\n \n     public void testKeymapOverrides() throws Exception { // #170677\n         List<String> warnings = new ArrayList<String>();\n-        FileObject[] keymaps = FileUtil.getConfigFile(\"Keymaps\").getChildren();\n+        FileObject keymapRoot = FileUtil.getConfigFile(\"Keymaps\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2b55e525aa4a10c7e974f50e0fff6d9bf9dd011"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e2b55e525aa4a10c7e974f50e0fff6d9bf9dd011", "author": {"user": {"login": "sdedic", "name": "Svatopluk Dedic"}}, "url": "https://github.com/apache/netbeans/commit/e2b55e525aa4a10c7e974f50e0fff6d9bf9dd011", "committedDate": "2020-09-10T12:36:04Z", "message": "Do not fail on smaller cluster.configs"}, "afterCommit": {"oid": "56a2b4b08974f588191bd5c23a0d118525465f20", "author": {"user": {"login": "sdedic", "name": "Svatopluk Dedic"}}, "url": "https://github.com/apache/netbeans/commit/56a2b4b08974f588191bd5c23a0d118525465f20", "committedDate": "2020-09-10T14:14:18Z", "message": "Do not fail on smaller cluster.configs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MDcyNzk3", "url": "https://github.com/apache/netbeans/pull/2359#pullrequestreview-486072797", "createdAt": "2020-09-10T15:45:48Z", "commit": {"oid": "56a2b4b08974f588191bd5c23a0d118525465f20"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5MzM3NTUz", "url": "https://github.com/apache/netbeans/pull/2359#pullrequestreview-489337553", "createdAt": "2020-09-16T07:15:37Z", "commit": {"oid": "56a2b4b08974f588191bd5c23a0d118525465f20"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQwNzoxNTozN1rOHSjTFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQwNzoxODoyNFrOHSjYqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTIxNDc0Mw==", "bodyText": "Right. It is.", "url": "https://github.com/apache/netbeans/pull/2359#discussion_r489214743", "createdAt": "2020-09-16T07:15:37Z", "author": {"login": "JaroslavTulach"}, "path": "ide/gsf.testrunner/src/org/netbeans/modules/gsf/testrunner/TestCreatorProviderProcessor.java", "diffHunk": "@@ -47,11 +47,11 @@ protected boolean handleProcess(Set<? extends TypeElement> annotations, RoundEnv\n             if(registration == null) {\n                 continue;\n             }\n-            File f = layer(e).instanceFile(\"Services\", null);\n+            File f = layer(e).instanceFile(\"Services/TestCreatorProviders\", null);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjMwNzYzMg=="}, "originalCommit": {"oid": "e2b55e525aa4a10c7e974f50e0fff6d9bf9dd011"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTIxNTA0Mw==", "bodyText": "Fine.", "url": "https://github.com/apache/netbeans/pull/2359#discussion_r489215043", "createdAt": "2020-09-16T07:16:11Z", "author": {"login": "JaroslavTulach"}, "path": "java/java.project.ui/src/org/netbeans/modules/java/project/ui/NewJavaFileWizardIterator.java", "diffHunk": "@@ -241,17 +242,28 @@ private void addRequires(FileObject createdFile, Set<String> requiredModuleNames\n             final JavaSource src = JavaSource.forFileObject(createdFile);\n             if (src != null) {\n                 final Set<String> mNames = requiredModuleNames;\n-                src.runModificationTask((WorkingCopy copy) -> {\n-                    copy.toPhase(JavaSource.Phase.RESOLVED);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjMwOTY5MQ=="}, "originalCommit": {"oid": "e2b55e525aa4a10c7e974f50e0fff6d9bf9dd011"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTIxNTUzMA==", "bodyText": "Right, generate some positions always.", "url": "https://github.com/apache/netbeans/pull/2359#discussion_r489215530", "createdAt": "2020-09-16T07:17:06Z", "author": {"login": "JaroslavTulach"}, "path": "platform/editor.mimelookup/src/org/netbeans/modules/editor/mimelookup/CreateRegistrationProcessor.java", "diffHunk": "@@ -145,7 +147,17 @@ private void process(Element toRegister, AnnotationMirror mimeRegistration) thro\n             }\n \n             instantiableClassOrMethod(toRegister, apiTE);\n-            layer(toRegister).instanceFile(\"Editors\" + mimeType + folder, null, null).position(position).stringvalue(\"instanceOf\", processingEnv.getElementUtils().getBinaryName(apiTE).toString()).write();    //NOI18N\n+            File f = layer(toRegister).instanceFile(\"Editors\" + mimeType + folder, null, null);\n+            if (position == Integer.MAX_VALUE && !\"\".equals(folder)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjMxMzM3MQ=="}, "originalCommit": {"oid": "e2b55e525aa4a10c7e974f50e0fff6d9bf9dd011"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTIxNjE2OA==", "bodyText": "Couldn't, by a chance, the check for Projects/.+/Lookup be removed by using the same trick with autogenerating the position? No need to solve it in this PR however.", "url": "https://github.com/apache/netbeans/pull/2359#discussion_r489216168", "createdAt": "2020-09-16T07:18:24Z", "author": {"login": "JaroslavTulach"}, "path": "platform/openide.filesystems/src/org/openide/filesystems/Ordering.java", "diffHunk": "@@ -158,7 +164,8 @@ public int compareTo(ChildAndPosition o) {\n                 previousChild = subsequentChild;\n             }\n         }\n-        if (logWarnings && /* #201893*/ !parent.getPath().matches(\"Projects/.+/Lookup\") && !childrenByPosition.isEmpty() && childrenByPosition.size() < children.size()) {\n+        if (logWarnings && /* #201893*/ !parent.getPath().matches(\"Projects/.+/Lookup\") && !childrenByPosition.isEmpty() && childrenByPosition.size() < children.size() && ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56a2b4b08974f588191bd5c23a0d118525465f20"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMTgzNzc4", "url": "https://github.com/apache/netbeans/pull/2359#pullrequestreview-492183778", "createdAt": "2020-09-20T09:33:30Z", "commit": {"oid": "5c6f453d566c064e9d44f4f348b72af937dab69f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQwOTozMzozMFrOHU5WRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQwOTozMzozMFrOHU5WRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY3MzE1Ng==", "bodyText": "The more specific type caused reflection errors when instantiated from OpenIDE's MimeFactory.", "url": "https://github.com/apache/netbeans/pull/2359#discussion_r491673156", "createdAt": "2020-09-20T09:33:30Z", "author": {"login": "sdedic"}, "path": "enterprise/j2ee.sun.ddui/src/org/netbeans/modules/j2ee/sun/ddloaders/SunDescriptorDataObject.java", "diffHunk": "@@ -107,7 +108,7 @@ protected int getXMLMultiViewIndex() {\n     private DDType descriptorType;\n     private final int xmlIndex;\n     \n-    public SunDescriptorDataObject(FileObject pf, SunDescriptorDataLoader loader) throws DataObjectExistsException {\n+    public SunDescriptorDataObject(FileObject pf, MultiFileLoader loader) throws DataObjectExistsException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c6f453d566c064e9d44f4f348b72af937dab69f"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMTgzODA3", "url": "https://github.com/apache/netbeans/pull/2359#pullrequestreview-492183807", "createdAt": "2020-09-20T09:34:11Z", "commit": {"oid": "5c6f453d566c064e9d44f4f348b72af937dab69f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQwOTozNDoxMVrOHU5Wcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQwOTozNDoxMVrOHU5Wcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY3MzIwMg==", "bodyText": "Validation was failing on the dtd ... and there's a new version of the declaration anyway, so I've updated. @jGauravGupta to review.", "url": "https://github.com/apache/netbeans/pull/2359#discussion_r491673202", "createdAt": "2020-09-20T09:34:11Z", "author": {"login": "sdedic"}, "path": "enterprise/javaee.api/src/org/netbeans/modules/javaee/api/javaee-endorsed-api-6.0.xml", "diffHunk": "@@ -20,8 +20,7 @@\n     under the License.\n \n -->\n-<!DOCTYPE library PUBLIC \"-//NetBeans//DTD Library Declaration 1.0//EN\" \"http://www.netbeans.org/dtds/library-declaration-1_0.dtd\">\n-<library version=\"1.0\">\n+<library version=\"3.0\" xmlns=\"http://www.netbeans.org/ns/library-declaration/3\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c6f453d566c064e9d44f4f348b72af937dab69f"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMTgzODQ5", "url": "https://github.com/apache/netbeans/pull/2359#pullrequestreview-492183849", "createdAt": "2020-09-20T09:34:59Z", "commit": {"oid": "5c6f453d566c064e9d44f4f348b72af937dab69f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQwOTozNDo1OVrOHU5WxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQwOTozNDo1OVrOHU5WxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY3MzI4NA==", "bodyText": "Apparently a typo, but please review, @jGauravGupta", "url": "https://github.com/apache/netbeans/pull/2359#discussion_r491673284", "createdAt": "2020-09-20T09:34:59Z", "author": {"login": "sdedic"}, "path": "enterprise/payara.eecommon/src/org/netbeans/modules/payara/eecommon/dd/loader/PayaraDescriptorDataObject.java", "diffHunk": "@@ -113,7 +114,7 @@\n     ),\n     @ActionReference(\n             path = DD_ACTION_PATH,\n-            id = @ActionID(category = \"Edit\", id = \"org.openide.actions.RenameAction\"),\n+            id = @ActionID(category = \"System\", id = \"org.openide.actions.RenameAction\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c6f453d566c064e9d44f4f348b72af937dab69f"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMTgzODk1", "url": "https://github.com/apache/netbeans/pull/2359#pullrequestreview-492183895", "createdAt": "2020-09-20T09:36:15Z", "commit": {"oid": "5c6f453d566c064e9d44f4f348b72af937dab69f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQwOTozNjoxNVrOHU5XJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQwOTozNjoxNVrOHU5XJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY3MzM4MA==", "bodyText": "Srpingmvc module actually delivers 5.2.9 version; I've updated. @hectorespert to review.", "url": "https://github.com/apache/netbeans/pull/2359#discussion_r491673380", "createdAt": "2020-09-20T09:36:15Z", "author": {"login": "sdedic"}, "path": "enterprise/spring.webmvc/src/org/netbeans/modules/spring/webmvc/resources/spring-webmvc-5.0.xml", "diffHunk": "@@ -25,7 +25,7 @@\n     <localizing-bundle>org.netbeans.modules.spring.webmvc.resources.Bundle</localizing-bundle>\n     <volume>\n         <type>classpath</type>\n-        <resource>jar:nbinst://org.netbeans.libs.springframework/modules/ext/spring-5/spring-webmvc-5.2.2.RELEASE.jar!/</resource>\n+        <resource>jar:nbinst://org.netbeans.libs.springframework/modules/ext/spring-5/spring-webmvc-5.2.9.RELEASE.jar!/</resource>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c6f453d566c064e9d44f4f348b72af937dab69f"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMTgzOTc1", "url": "https://github.com/apache/netbeans/pull/2359#pullrequestreview-492183975", "createdAt": "2020-09-20T09:38:13Z", "commit": {"oid": "5c6f453d566c064e9d44f4f348b72af937dab69f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQwOTozODoxM1rOHU5XoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQwOTozODoxM1rOHU5XoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY3MzUwNA==", "bodyText": "The original shadow pointed to nowhere. @lkishalmi to review.", "url": "https://github.com/apache/netbeans/pull/2359#discussion_r491673504", "createdAt": "2020-09-20T09:38:13Z", "author": {"login": "sdedic"}, "path": "groovy/groovy.editor/src/org/netbeans/modules/groovy/editor/resources/layer.xml", "diffHunk": "@@ -120,13 +120,13 @@\n                 </folder>\n \n                 <file name=\"JavaIndexer.shadow\">\n-                    <attr name=\"originalFile\" stringvalue=\"Editors/text/x-java/JavaIndexer.instance\"/>\n+                    <!-- Ugly hack to make commit-validation work. Must change when NETBEANS-4795 is implemented -->\n+                    <attr name=\"originalFile\" stringvalue=\"Editors/text/x-java/org-netbeans-modules-java-source-indexing-JavaCustomIndexer$Factory-register.instance\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c6f453d566c064e9d44f4f348b72af937dab69f"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMTg0MDUx", "url": "https://github.com/apache/netbeans/pull/2359#pullrequestreview-492184051", "createdAt": "2020-09-20T09:39:44Z", "commit": {"oid": "5c6f453d566c064e9d44f4f348b72af937dab69f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQwOTozOTo0NVrOHU5YDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQwOTozOTo0NVrOHU5YDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY3MzYxNA==", "bodyText": "Even junit has positional info, let's generate automatically.", "url": "https://github.com/apache/netbeans/pull/2359#discussion_r491673614", "createdAt": "2020-09-20T09:39:45Z", "author": {"login": "sdedic"}, "path": "ide/gsf.testrunner/src/org/netbeans/modules/gsf/testrunner/TestCreatorProviderProcessor.java", "diffHunk": "@@ -47,12 +47,19 @@ protected boolean handleProcess(Set<? extends TypeElement> annotations, RoundEnv\n             if(registration == null) {\n                 continue;\n             }\n-            File f = layer(e).instanceFile(\"Services\", null);\n+            File f = layer(e).instanceFile(\"Services/TestCreatorProviders\", null);\n             f.stringvalue(\"instanceOf\", TestCreatorProvider.class.getName());\n             f.bundlevalue(\"displayName\", registration.displayName());\n             f.bundlevalue(\"identifier\", registration.identifier());\n-            if (registration.position() != -1) {\n-                f.intvalue(\"position\", registration.position());\n+            int pos = registration.position();\n+            if (pos != -1) {\n+                if (pos == Integer.MAX_VALUE) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c6f453d566c064e9d44f4f348b72af937dab69f"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMTg0MTA0", "url": "https://github.com/apache/netbeans/pull/2359#pullrequestreview-492184104", "createdAt": "2020-09-20T09:41:00Z", "commit": {"oid": "5c6f453d566c064e9d44f4f348b72af937dab69f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQwOTo0MTowMFrOHU5YdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQwOTo0MTowMFrOHU5YdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY3MzcxNw==", "bodyText": "This is somewhat controversial; @jlahoda or @jtulach to review: performance tests are not really used now, and the performance* modules contain just testing code, yet they appear in the release distribution. And fail commit-validation tests.", "url": "https://github.com/apache/netbeans/pull/2359#discussion_r491673717", "createdAt": "2020-09-20T09:41:00Z", "author": {"login": "sdedic"}, "path": "nbbuild/cluster.properties", "diffHunk": "@@ -717,8 +717,6 @@ nb.cluster.java=\\\n         maven.search,\\\n         maven.spring,\\\n         nashorn.execution,\\\n-        performance,\\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c6f453d566c064e9d44f4f348b72af937dab69f"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMTg0MTYx", "url": "https://github.com/apache/netbeans/pull/2359#pullrequestreview-492184161", "createdAt": "2020-09-20T09:42:12Z", "commit": {"oid": "5c6f453d566c064e9d44f4f348b72af937dab69f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQwOTo0MjoxMlrOHU5Yzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQwOTo0MjoxMlrOHU5Yzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY3MzgwNg==", "bodyText": "Ignnores unsatisfied Java dependencies for both eager and autoload modules: when tests run on JDK8 dependencies on JDK9/11 makes the module to fail. If it is eager, it's OK to ignore, it's just enhancing something.", "url": "https://github.com/apache/netbeans/pull/2359#discussion_r491673806", "createdAt": "2020-09-20T09:42:12Z", "author": {"login": "sdedic"}, "path": "platform/core.startup/src/org/netbeans/core/startup/ConsistencyVerifier.java", "diffHunk": "@@ -152,7 +152,7 @@ private ConsistencyVerifier() {}\n             for (Object prob : probs) {\n                 if (prob instanceof Dependency) {\n                     Dependency d = (Dependency) prob;\n-                    if (Dependency.TYPE_JAVA == d.getType() && m.isAutoload()) {\n+                    if (Dependency.TYPE_JAVA == d.getType() && (m.isEager() || m.isAutoload())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c6f453d566c064e9d44f4f348b72af937dab69f"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMTg0MjQ4", "url": "https://github.com/apache/netbeans/pull/2359#pullrequestreview-492184248", "createdAt": "2020-09-20T09:44:15Z", "commit": {"oid": "5c6f453d566c064e9d44f4f348b72af937dab69f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQwOTo0NDoxNlrOHU5ZTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQwOTo0NDoxNlrOHU5ZTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY3MzkzNA==", "bodyText": "both ordered and undordered bits have to be set for a category (folder OR file) to log the warning.", "url": "https://github.com/apache/netbeans/pull/2359#discussion_r491673934", "createdAt": "2020-09-20T09:44:16Z", "author": {"login": "sdedic"}, "path": "platform/openide.filesystems/src/org/openide/filesystems/Ordering.java", "diffHunk": "@@ -158,7 +164,18 @@ public int compareTo(ChildAndPosition o) {\n                 previousChild = subsequentChild;\n             }\n         }\n-        if (logWarnings && /* #201893*/ !parent.getPath().matches(\"Projects/.+/Lookup\") && !childrenByPosition.isEmpty() && childrenByPosition.size() < children.size()) {\n+        boolean shouldLog = logWarnings && !childrenByPosition.isEmpty() && childrenByPosition.size() < children.size();\n+        if (shouldLog) {\n+            // exceptions:  See Bugzilla#201893 \n+            if (parent.getPath().matches(\"Projects/.+/Lookup\")) {\n+                // do not report any order issues for Projects/Lookup, even between files, or between folders.\n+                shouldLog = false;\n+            } else if (FileUtil.isParentOf(FileUtil.getConfigRoot(), parent) && ((ordered & unordered) == 0)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c6f453d566c064e9d44f4f348b72af937dab69f"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMTk3MzIx", "url": "https://github.com/apache/netbeans/pull/2359#pullrequestreview-492197321", "createdAt": "2020-09-20T14:07:28Z", "commit": {"oid": "5c6f453d566c064e9d44f4f348b72af937dab69f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b54371e7df39f603d86856a9dd6cc6352f7df41b", "author": {"user": {"login": "sdedic", "name": "Svatopluk Dedic"}}, "url": "https://github.com/apache/netbeans/commit/b54371e7df39f603d86856a9dd6cc6352f7df41b", "committedDate": "2020-09-20T18:31:13Z", "message": "Positions always generated for MIME services; Ordering does not warn if all files or all dirs are unordered."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b75cef340f0e5753ed851e7f6422d7228fa97215", "author": {"user": {"login": "sdedic", "name": "Svatopluk Dedic"}}, "url": "https://github.com/apache/netbeans/commit/b75cef340f0e5753ed851e7f6422d7228fa97215", "committedDate": "2020-09-20T18:31:13Z", "message": "Do not generate spurious MAXINT positions."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a191af559fcc5b6a1fd4175e3973e3c39d24211", "author": {"user": {"login": "sdedic", "name": "Svatopluk Dedic"}}, "url": "https://github.com/apache/netbeans/commit/3a191af559fcc5b6a1fd4175e3973e3c39d24211", "committedDate": "2020-09-20T18:31:13Z", "message": "Lambda causes linkage error during tests (nbjavac not present on cp)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c008c90bd565e9aac9889b104bd63fb59b01f82f", "author": {"user": {"login": "sdedic", "name": "Svatopluk Dedic"}}, "url": "https://github.com/apache/netbeans/commit/c008c90bd565e9aac9889b104bd63fb59b01f82f", "committedDate": "2020-09-20T18:31:14Z", "message": "Do not fail on smaller cluster.configs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3dad0684ba632392f9db32fb6aecbe832bf48313", "author": {"user": {"login": "sdedic", "name": "Svatopluk Dedic"}}, "url": "https://github.com/apache/netbeans/commit/3dad0684ba632392f9db32fb6aecbe832bf48313", "committedDate": "2020-09-20T18:31:14Z", "message": "Fixed checking in Ordering, relaxed only for configfs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15447f6bb22e37db445ea6b79d7e0ad9b270430d", "author": {"user": {"login": "sdedic", "name": "Svatopluk Dedic"}}, "url": "https://github.com/apache/netbeans/commit/15447f6bb22e37db445ea6b79d7e0ad9b270430d", "committedDate": "2020-09-20T18:31:14Z", "message": "Add webcommon for testing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e5d5d115f88f4569f88600ac22f68503afd302a", "author": {"user": {"login": "sdedic", "name": "Svatopluk Dedic"}}, "url": "https://github.com/apache/netbeans/commit/8e5d5d115f88f4569f88600ac22f68503afd302a", "committedDate": "2020-09-20T18:31:14Z", "message": "Collect more errors in one run."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMjc2OTI5", "url": "https://github.com/apache/netbeans/pull/2359#pullrequestreview-492276929", "createdAt": "2020-09-21T04:46:40Z", "commit": {"oid": "5ce48f88ff61b4f68459cf0fb92308525bf2a199"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69bdff9b6700b3b3491a635172ae7946b51f273f", "author": {"user": {"login": "sdedic", "name": "Svatopluk Dedic"}}, "url": "https://github.com/apache/netbeans/commit/69bdff9b6700b3b3491a635172ae7946b51f273f", "committedDate": "2020-09-21T12:36:09Z", "message": "Various fixes that may affect code. Pending review: NETBEANS-4826, NETBEANS-4828"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b7f33611db77d2f66e97ceb354aef209df90b2d", "author": {"user": {"login": "sdedic", "name": "Svatopluk Dedic"}}, "url": "https://github.com/apache/netbeans/commit/5b7f33611db77d2f66e97ceb354aef209df90b2d", "committedDate": "2020-09-21T12:36:09Z", "message": "Ignore java failures for eager modules as well."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c86f659fd22c1ec3dd6f41c1450166aa19a8ce6", "author": {"user": {"login": "sdedic", "name": "Svatopluk Dedic"}}, "url": "https://github.com/apache/netbeans/commit/4c86f659fd22c1ec3dd6f41c1450166aa19a8ce6", "committedDate": "2020-09-21T12:36:10Z", "message": "Removed unused performance.* modules."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "166f1d17b6ccbdb823599471265809b27cf0bd77", "author": {"user": {"login": "sdedic", "name": "Svatopluk Dedic"}}, "url": "https://github.com/apache/netbeans/commit/166f1d17b6ccbdb823599471265809b27cf0bd77", "committedDate": "2020-09-21T12:36:10Z", "message": "Added release to cpplite"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3bbf3ced43422ee1aa7a0bb2f2a89e1d37cfbe9", "author": {"user": {"login": "sdedic", "name": "Svatopluk Dedic"}}, "url": "https://github.com/apache/netbeans/commit/b3bbf3ced43422ee1aa7a0bb2f2a89e1d37cfbe9", "committedDate": "2020-09-22T10:45:22Z", "message": "Wait for Updater to finish before testing."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5ce48f88ff61b4f68459cf0fb92308525bf2a199", "author": {"user": {"login": "sdedic", "name": "Svatopluk Dedic"}}, "url": "https://github.com/apache/netbeans/commit/5ce48f88ff61b4f68459cf0fb92308525bf2a199", "committedDate": "2020-09-20T18:25:49Z", "message": "Added release to cpplite"}, "afterCommit": {"oid": "b3bbf3ced43422ee1aa7a0bb2f2a89e1d37cfbe9", "author": {"user": {"login": "sdedic", "name": "Svatopluk Dedic"}}, "url": "https://github.com/apache/netbeans/commit/b3bbf3ced43422ee1aa7a0bb2f2a89e1d37cfbe9", "committedDate": "2020-09-22T10:45:22Z", "message": "Wait for Updater to finish before testing."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMzY5MjAx", "url": "https://github.com/apache/netbeans/pull/2359#pullrequestreview-493369201", "createdAt": "2020-09-22T11:38:18Z", "commit": {"oid": "b3bbf3ced43422ee1aa7a0bb2f2a89e1d37cfbe9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxMTozODoxOVrOHV14qA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxMTozODoxOVrOHV14qA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjY2NTAwMA==", "bodyText": "checkCompletion waits for Updater to finish, this check's variant did not. Caused spurious errors / race conditions locally.", "url": "https://github.com/apache/netbeans/pull/2359#discussion_r492665000", "createdAt": "2020-09-22T11:38:19Z", "author": {"login": "sdedic"}, "path": "webcommon/javascript2.jquery/test/unit/src/org/netbeans/modules/javascript2/jquery/JQueryCodeCompletionSelectorsTest.java", "diffHunk": "@@ -190,6 +191,7 @@ public void testAttributeName_05() throws Exception {\n     }\n \n     public void checkAppliedCompletion(final String file, final String caretLine, final String expectedLine, final String itemToComplete, final boolean includeModifiers) throws Exception {\n+        RepositoryUpdater.getDefault().waitUntilFinished(10000);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3bbf3ced43422ee1aa7a0bb2f2a89e1d37cfbe9"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzNDE3NDky", "url": "https://github.com/apache/netbeans/pull/2359#pullrequestreview-493417492", "createdAt": "2020-09-22T12:43:38Z", "commit": {"oid": "b3bbf3ced43422ee1aa7a0bb2f2a89e1d37cfbe9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4798, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}