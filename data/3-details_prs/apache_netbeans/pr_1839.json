{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU4OTc1ODQy", "number": 1839, "title": "[NETBEANS-3428] FlatLaf: new close, left, right, drop-down and maximi\u2026", "bodyText": "\u2026ze buttons for multi-tabs, breadcrumb bar, search bar, etc\nOld:\n\nNew:", "createdAt": "2020-01-03T12:39:48Z", "url": "https://github.com/apache/netbeans/pull/1839", "merged": true, "mergeCommit": {"oid": "b4d235f940760838c0ce65d1c83b5d23194ec613"}, "closed": true, "closedAt": "2020-01-05T03:29:11Z", "author": {"login": "DevCharly"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb2tm4PAH2gAyMzU4OTc1ODQyOjU0YzI5OWNkOTczZDVlMjMyNTU4MjJjZmE4NWFmNDQ5NWM5OTY0NzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb3O_iVAFqTMzODM3OTMzMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "54c299cd973d5e23255822cfa85af4495c996471", "author": {"user": {"login": "DevCharly", "name": "Karl T"}}, "url": "https://github.com/apache/netbeans/commit/54c299cd973d5e23255822cfa85af4495c996471", "committedDate": "2020-01-03T12:35:02Z", "message": "[NETBEANS-3428] FlatLaf: new close, left, right, drop-down and maximize buttons for multi-tabs, breadcrumb bar, search bar, etc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d13d55302742b55f5c44058e9b6e8df1dcbb9a0", "author": {"user": {"login": "DevCharly", "name": "Karl T"}}, "url": "https://github.com/apache/netbeans/commit/8d13d55302742b55f5c44058e9b6e8df1dcbb9a0", "committedDate": "2020-01-03T13:05:02Z", "message": "removed println"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4MDkwMTc5", "url": "https://github.com/apache/netbeans/pull/1839#pullrequestreview-338090179", "createdAt": "2020-01-03T13:58:04Z", "commit": {"oid": "8d13d55302742b55f5c44058e9b6e8df1dcbb9a0"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxMzo1ODowNFrOFaAl5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxNDoxMDo0OVrOFaA1Fw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjgxNjk5Ng==", "bodyText": "What's the \"-1\" magic number here? Does it mean \"not applicable?\"", "url": "https://github.com/apache/netbeans/pull/1839#discussion_r362816996", "createdAt": "2020-01-03T13:58:04Z", "author": {"login": "eirikbakke"}, "path": "platform/o.n.swing.laf.flatlaf/src/org/netbeans/swing/laf/flatlaf/FlatLFCustoms.java", "diffHunk": "@@ -45,6 +47,21 @@\n             // scale on Java 8 and Linux\n             SPLIT_PANE_DIVIDER_SIZE_VERTICAL, UIScale.scale(4),\n             SPLIT_PANE_DIVIDER_SIZE_HORIZONTAL, UIScale.scale(4),\n+\n+            // for org.openide.awt.CloseButtonFactory\n+            \"nb.close.tab.icon.enabled.icon\", FlatTabControlIcon.get(TabControlButton.ID_CLOSE_BUTTON, TabControlButton.STATE_DEFAULT), // NOI18N\n+            \"nb.close.tab.icon.pressed.icon\", FlatTabControlIcon.get(TabControlButton.ID_CLOSE_BUTTON, TabControlButton.STATE_PRESSED), // NOI18N\n+            \"nb.close.tab.icon.rollover.icon\", FlatTabControlIcon.get(TabControlButton.ID_CLOSE_BUTTON, TabControlButton.STATE_ROLLOVER), // NOI18N\n+            \"nb.bigclose.tab.icon.enabled.icon\", FlatTabControlIcon.get(TabControlButton.ID_CLOSE_BUTTON, TabControlButton.STATE_DEFAULT), // NOI18N\n+            \"nb.bigclose.tab.icon.pressed.icon\", FlatTabControlIcon.get(TabControlButton.ID_CLOSE_BUTTON, TabControlButton.STATE_PRESSED), // NOI18N\n+            \"nb.bigclose.tab.icon.rollover.icon\", FlatTabControlIcon.get(TabControlButton.ID_CLOSE_BUTTON, TabControlButton.STATE_ROLLOVER), // NOI18N\n+\n+            // for org.netbeans.core.multitabs.ButtonFactory\n+            \"nb.multitabs.button.dropdown.icon\", FlatTabControlIcon.get(TabControlButton.ID_DROP_DOWN_BUTTON, -1), // NOI18N", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d13d55302742b55f5c44058e9b6e8df1dcbb9a0"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjgxNzQwMg==", "bodyText": "Ah. Perhaps make buttonState an Integer object and allow it to be null for this case, rather than introducing a magic number.", "url": "https://github.com/apache/netbeans/pull/1839#discussion_r362817402", "createdAt": "2020-01-03T13:59:14Z", "author": {"login": "eirikbakke"}, "path": "platform/o.n.swing.laf.flatlaf/src/org/netbeans/swing/laf/flatlaf/ui/FlatTabControlIcon.java", "diffHunk": "@@ -130,6 +131,21 @@ protected void paintIcon(Component c, Graphics2D g, int width, int height, doubl\n         Color bgColor = new Color(0, 0, 0, 0); // Alpha zero means no background.\n         Color fgColor = foreground;\n         {\n+            int buttonState = this.buttonState;\n+            if (buttonState == -1) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d13d55302742b55f5c44058e9b6e8df1dcbb9a0"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjgxNzc2OA==", "bodyText": "Have you tested that this state ends up being used? Are you sure the button does not end up trying to make its own disabled version using an ImageFilter? (In the latter case the disabled version would not look good on HiDPI screens.)", "url": "https://github.com/apache/netbeans/pull/1839#discussion_r362817768", "createdAt": "2020-01-03T14:00:25Z", "author": {"login": "eirikbakke"}, "path": "platform/o.n.swing.laf.flatlaf/src/org/netbeans/swing/laf/flatlaf/ui/FlatTabControlIcon.java", "diffHunk": "@@ -130,6 +131,21 @@ protected void paintIcon(Component c, Graphics2D g, int width, int height, doubl\n         Color bgColor = new Color(0, 0, 0, 0); // Alpha zero means no background.\n         Color fgColor = foreground;\n         {\n+            int buttonState = this.buttonState;\n+            if (buttonState == -1) {\n+                // get button state from component\n+                if (!c.isEnabled()) {\n+                    buttonState = TabControlButton.STATE_DISABLED;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d13d55302742b55f5c44058e9b6e8df1dcbb9a0"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjgxOTEwNA==", "bodyText": "Adding new keys to UIManager.getDefaults() constitutes an API change; should probably update apichanges.xml. And perhaps go over the names of the new keys one more time to make sure they follow the convention of the existing keys.", "url": "https://github.com/apache/netbeans/pull/1839#discussion_r362819104", "createdAt": "2020-01-03T14:05:03Z", "author": {"login": "eirikbakke"}, "path": "platform/openide.awt/src/org/openide/awt/CloseButtonFactory.java", "diffHunk": "@@ -141,6 +141,9 @@ private static boolean isGTKLaF () {\n     }\n \n     private static Icon getCloseTabImage() {\n+        if( null == closeTabImage ) {\n+            closeTabImage = UIManager.getIcon(\"nb.close.tab.icon.enabled.icon\"); //NOI18N", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d13d55302742b55f5c44058e9b6e8df1dcbb9a0"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjgyMDMyNQ==", "bodyText": "I remember from https://github.com/apache/netbeans/pull/859/files that the close-button drawing code had to be duplicated between and org.openide.awt.AquaVectorCloseButton and o.n.swing.tabcontrol.plaf.AquaVectorTabControlIcon. Are both of the corresponding locations for FlatLAF updated in this PR? Do the new UIManager keys prevent the need for this duplication?", "url": "https://github.com/apache/netbeans/pull/1839#discussion_r362820325", "createdAt": "2020-01-03T14:09:09Z", "author": {"login": "eirikbakke"}, "path": "platform/o.n.swing.laf.flatlaf/src/org/netbeans/swing/laf/flatlaf/FlatLFCustoms.java", "diffHunk": "@@ -45,6 +47,21 @@\n             // scale on Java 8 and Linux\n             SPLIT_PANE_DIVIDER_SIZE_VERTICAL, UIScale.scale(4),\n             SPLIT_PANE_DIVIDER_SIZE_HORIZONTAL, UIScale.scale(4),\n+\n+            // for org.openide.awt.CloseButtonFactory", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d13d55302742b55f5c44058e9b6e8df1dcbb9a0"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjgyMDg4Nw==", "bodyText": "This is just a fallback, right? I assume all of these icons are vector-drawn to work with HiDPI screens?", "url": "https://github.com/apache/netbeans/pull/1839#discussion_r362820887", "createdAt": "2020-01-03T14:10:49Z", "author": {"login": "eirikbakke"}, "path": "platform/core.multitabs/src/org/netbeans/core/multitabs/ButtonFactory.java", "diffHunk": "@@ -47,7 +48,11 @@\n      */\n     public static JButton createDropDownButton( Controller controller ) {\n         final JButton btn = new JButton( new TabListPopupAction(controller) );\n-        btn.setIcon( ImageUtilities.loadImageIcon( \"org/netbeans/core/multitabs/resources/down.png\", true) ); //NOI18N\n+        Icon icon = UIManager.getIcon(\"nb.multitabs.button.dropdown.icon\");\n+        if (icon == null) {\n+            icon = ImageUtilities.loadImageIcon( \"org/netbeans/core/multitabs/resources/down.png\", true ); //NOI18N", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d13d55302742b55f5c44058e9b6e8df1dcbb9a0"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2afd00c7ca1efff89dcdfe3185060d72a06aea7b", "author": {"user": {"login": "DevCharly", "name": "Karl T"}}, "url": "https://github.com/apache/netbeans/commit/2afd00c7ca1efff89dcdfe3185060d72a06aea7b", "committedDate": "2020-01-03T15:51:22Z", "message": "replaced buttonState magic number in FlatTabControlIcon"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4Mzc2MTU5", "url": "https://github.com/apache/netbeans/pull/1839#pullrequestreview-338376159", "createdAt": "2020-01-05T00:58:46Z", "commit": {"oid": "2afd00c7ca1efff89dcdfe3185060d72a06aea7b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4Mzc5MzMz", "url": "https://github.com/apache/netbeans/pull/1839#pullrequestreview-338379333", "createdAt": "2020-01-05T03:28:50Z", "commit": {"oid": "2afd00c7ca1efff89dcdfe3185060d72a06aea7b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 231, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}