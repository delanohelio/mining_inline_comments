{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4ODQ2OTQ0", "number": 2254, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwNjo0MDoxN1rOEOjBVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwNjo0MDoxN1rOEOjBVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgzNjg5MzAyOnYy", "diffSide": "RIGHT", "path": "php/php.code.analysis/src/org/netbeans/modules/php/analysis/commands/CodingStandardsFixer.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwNjo0MDoxN1rOGxwVrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMToyODozOVrOGx54Rg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDgyNTM4OA==", "bodyText": "Just to be sure - isn't a problem that before it was file but now it can be a directory?", "url": "https://github.com/apache/netbeans/pull/2254#discussion_r454825388", "createdAt": "2020-07-15T06:40:17Z", "author": {"login": "tmysik"}, "path": "php/php.code.analysis/src/org/netbeans/modules/php/analysis/commands/CodingStandardsFixer.java", "diffHunk": "@@ -172,15 +172,17 @@ public void startAnalyzeGroup() {\n     public List<Result> analyze(CodingStandardsFixerParams params, FileObject file) {\n         assert file.isValid() : \"Invalid file given: \" + file;\n         try {\n-            \n-            Integer result = getExecutable(Bundle.CodingStandardsFixer_analyze(analyzeGroupCounter++), findWorkDir(file))\n+            File workDir = findWorkDir(file);\n+            Integer result = getExecutable(Bundle.CodingStandardsFixer_analyze(analyzeGroupCounter++), workDir)\n                     .additionalParameters(getParameters(params, file))\n                     .runAndWait(getDescriptor(), \"Running coding standards fixer...\"); // NOI18N\n             if (result == null) {\n                 return null;\n             }\n-\n-            return CodingStandardsFixerReportParser.parse(XML_LOG, file);\n+            // if the project for the file is not found(i.e. if the workDir is not found),\n+            // the results are not shown in the inspector window\n+            FileObject root = workDir != null ? FileUtil.toFileObject(workDir) : file;\n+            return CodingStandardsFixerReportParser.parse(XML_LOG, root);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3491862d28562c0b3e95e7bd4f9a088e197071c"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk4MDQ0MA==", "bodyText": "I think it's OK. It just worked with the project directory (i.e. when the working directory is the project directory) before I fixed this.\nThe case where the project directory(i.e. working directory) cannot be found: a user inspects a file or a directory from a Favorite pane. In such case, the API side doesn't show the result in the inspector window. But the XML result is shown in the Output window. I confirmed that.", "url": "https://github.com/apache/netbeans/pull/2254#discussion_r454980440", "createdAt": "2020-07-15T11:25:57Z", "author": {"login": "junichi11"}, "path": "php/php.code.analysis/src/org/netbeans/modules/php/analysis/commands/CodingStandardsFixer.java", "diffHunk": "@@ -172,15 +172,17 @@ public void startAnalyzeGroup() {\n     public List<Result> analyze(CodingStandardsFixerParams params, FileObject file) {\n         assert file.isValid() : \"Invalid file given: \" + file;\n         try {\n-            \n-            Integer result = getExecutable(Bundle.CodingStandardsFixer_analyze(analyzeGroupCounter++), findWorkDir(file))\n+            File workDir = findWorkDir(file);\n+            Integer result = getExecutable(Bundle.CodingStandardsFixer_analyze(analyzeGroupCounter++), workDir)\n                     .additionalParameters(getParameters(params, file))\n                     .runAndWait(getDescriptor(), \"Running coding standards fixer...\"); // NOI18N\n             if (result == null) {\n                 return null;\n             }\n-\n-            return CodingStandardsFixerReportParser.parse(XML_LOG, file);\n+            // if the project for the file is not found(i.e. if the workDir is not found),\n+            // the results are not shown in the inspector window\n+            FileObject root = workDir != null ? FileUtil.toFileObject(workDir) : file;\n+            return CodingStandardsFixerReportParser.parse(XML_LOG, root);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDgyNTM4OA=="}, "originalCommit": {"oid": "d3491862d28562c0b3e95e7bd4f9a088e197071c"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk4MTcwMg==", "bodyText": "OK then. Thanks!", "url": "https://github.com/apache/netbeans/pull/2254#discussion_r454981702", "createdAt": "2020-07-15T11:28:39Z", "author": {"login": "tmysik"}, "path": "php/php.code.analysis/src/org/netbeans/modules/php/analysis/commands/CodingStandardsFixer.java", "diffHunk": "@@ -172,15 +172,17 @@ public void startAnalyzeGroup() {\n     public List<Result> analyze(CodingStandardsFixerParams params, FileObject file) {\n         assert file.isValid() : \"Invalid file given: \" + file;\n         try {\n-            \n-            Integer result = getExecutable(Bundle.CodingStandardsFixer_analyze(analyzeGroupCounter++), findWorkDir(file))\n+            File workDir = findWorkDir(file);\n+            Integer result = getExecutable(Bundle.CodingStandardsFixer_analyze(analyzeGroupCounter++), workDir)\n                     .additionalParameters(getParameters(params, file))\n                     .runAndWait(getDescriptor(), \"Running coding standards fixer...\"); // NOI18N\n             if (result == null) {\n                 return null;\n             }\n-\n-            return CodingStandardsFixerReportParser.parse(XML_LOG, file);\n+            // if the project for the file is not found(i.e. if the workDir is not found),\n+            // the results are not shown in the inspector window\n+            FileObject root = workDir != null ? FileUtil.toFileObject(workDir) : file;\n+            return CodingStandardsFixerReportParser.parse(XML_LOG, root);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDgyNTM4OA=="}, "originalCommit": {"oid": "d3491862d28562c0b3e95e7bd4f9a088e197071c"}, "originalPosition": 18}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 472, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}