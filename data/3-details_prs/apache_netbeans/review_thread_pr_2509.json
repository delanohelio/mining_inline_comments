{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEzNTA3NTY0", "number": 2509, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxMDowMToyMlrOE0TuUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxMDowMToyMlrOE0TuUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzMjg0NTYwOnYy", "diffSide": "RIGHT", "path": "ide/lib.terminalemulator/src/org/netbeans/lib/terminalemulator/MyFontMetrics.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxMDowMToyMlrOHr9kzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxNzoyNTowNlrOIGW_SQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTg1OTY2Mg==", "bodyText": "Is it necessary to store cmp in order to obtain getFont - couldn't be the font obtained / stored rather than the Component ? Not a big deal, but FontMetrics > Component seem as a backward dependency.", "url": "https://github.com/apache/netbeans/pull/2509#discussion_r515859662", "createdAt": "2020-11-02T10:01:22Z", "author": {"login": "sdedic"}, "path": "ide/lib.terminalemulator/src/org/netbeans/lib/terminalemulator/MyFontMetrics.java", "diffHunk": "@@ -142,18 +142,22 @@ public MyFontMetrics(Component component, Font font) {\n         height -= leading;\n         leading = 0;\n \n-        cwidth_cache = CacheFactory.cacheForFontMetrics(fm);\n+        cwidth_cache = CacheFactory.cacheForFontMetrics(getFm());\n+    }\n+\n+    public FontMetrics getFm() {\n+        return this.cmp.getFontMetrics(cmp.getFont());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c79d4fae9b501005e90c8d59869388bad0252e9"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzQ2Mjg4MQ==", "bodyText": "@hlavki anything on this?", "url": "https://github.com/apache/netbeans/pull/2509#discussion_r517462881", "createdAt": "2020-11-04T16:16:42Z", "author": {"login": "lkishalmi"}, "path": "ide/lib.terminalemulator/src/org/netbeans/lib/terminalemulator/MyFontMetrics.java", "diffHunk": "@@ -142,18 +142,22 @@ public MyFontMetrics(Component component, Font font) {\n         height -= leading;\n         leading = 0;\n \n-        cwidth_cache = CacheFactory.cacheForFontMetrics(fm);\n+        cwidth_cache = CacheFactory.cacheForFontMetrics(getFm());\n+    }\n+\n+    public FontMetrics getFm() {\n+        return this.cmp.getFontMetrics(cmp.getFont());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTg1OTY2Mg=="}, "originalCommit": {"oid": "7c79d4fae9b501005e90c8d59869388bad0252e9"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTgzOTU4Mg==", "bodyText": "@lkishalmi, sorry for delay. I didn't have time to fix @sdedic's suggestion. Maybe in next round. thanks", "url": "https://github.com/apache/netbeans/pull/2509#discussion_r525839582", "createdAt": "2020-11-18T06:21:04Z", "author": {"login": "hlavki"}, "path": "ide/lib.terminalemulator/src/org/netbeans/lib/terminalemulator/MyFontMetrics.java", "diffHunk": "@@ -142,18 +142,22 @@ public MyFontMetrics(Component component, Font font) {\n         height -= leading;\n         leading = 0;\n \n-        cwidth_cache = CacheFactory.cacheForFontMetrics(fm);\n+        cwidth_cache = CacheFactory.cacheForFontMetrics(getFm());\n+    }\n+\n+    public FontMetrics getFm() {\n+        return this.cmp.getFontMetrics(cmp.getFont());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTg1OTY2Mg=="}, "originalCommit": {"oid": "7c79d4fae9b501005e90c8d59869388bad0252e9"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzUzOTAxNw==", "bodyText": "@sdedic this is very interesting think, because in previous implementation FontMetrics was created in MyFontMetrics constructor, but it didn't work. Cursor was shifted. Would be great if somebody with strong swing knowledge could explain this behaviour.", "url": "https://github.com/apache/netbeans/pull/2509#discussion_r543539017", "createdAt": "2020-12-15T17:25:06Z", "author": {"login": "hlavki"}, "path": "ide/lib.terminalemulator/src/org/netbeans/lib/terminalemulator/MyFontMetrics.java", "diffHunk": "@@ -142,18 +142,22 @@ public MyFontMetrics(Component component, Font font) {\n         height -= leading;\n         leading = 0;\n \n-        cwidth_cache = CacheFactory.cacheForFontMetrics(fm);\n+        cwidth_cache = CacheFactory.cacheForFontMetrics(getFm());\n+    }\n+\n+    public FontMetrics getFm() {\n+        return this.cmp.getFontMetrics(cmp.getFont());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTg1OTY2Mg=="}, "originalCommit": {"oid": "7c79d4fae9b501005e90c8d59869388bad0252e9"}, "originalPosition": 46}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 216, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}