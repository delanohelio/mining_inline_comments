{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5MDQ5NTQy", "number": 2424, "title": "Modularizing Javascript/HTML", "bodyText": "Adjustments that lead to better reuse of javascript / HTML support. Javascript modules are quite tangled with HTML (and vice versa) since they have been always developed in parallel. With nodejs and similar technologies, javascript can be used independently without embedding into HTML (PHP) web pages. This PR partially loosens the dependencies, but many of them still remain. Some minor issues / warnings were fixed during the course.\nOutline of main changes:\n\nHtmlIndex API separated from the HTML Editor module. Many modules have dependencies on the Index, querying files, but not necessarily on HTML editing features. Becomes more important in headless modes.\nJavaScript HTML support separated from basic Javascript editing (just completion at the moment). This is a beginning of the effort that could de-entagle JS/HTML supports\n\nThese changes allowed to reduce module dependencies, especially non-visual modules to *.editor modules (which are more or less UI-oriented). IMHO it's good to separate infrastructure/evaluators from presentation layer - if not for better architecture, then for better testing.\nI've tried to consolidate the work into several topic-oriented commits for easier review.", "createdAt": "2020-10-07T07:40:38Z", "url": "https://github.com/apache/netbeans/pull/2424", "merged": true, "mergeCommit": {"oid": "5b96857351f62c971e43f788dcc99ba58f20a0d2"}, "closed": true, "closedAt": "2020-10-08T06:17:12Z", "author": {"login": "sdedic"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQH1RogH2gAyNDk5MDQ5NTQyOmYxNjE2ZWIzZDZhYWI5ODRjYzljNTM4ZmUyNmZjZjg4NzNjNzI2ZjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmskwuAFqTU1MzU2MDc4Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f1616eb3d6aab984cc9c538fe26fcf8873c726f3", "author": {"user": {"login": "sdedic", "name": "Svatopluk Dedic"}}, "url": "https://github.com/apache/netbeans/commit/f1616eb3d6aab984cc9c538fe26fcf8873c726f3", "committedDate": "2020-10-07T07:27:33Z", "message": "Removed dependencies to pre65 formatting from Java, java.editor.lib remains for older code."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3fadff623a920d854a415d334c056eb819cc9fe2", "author": {"user": {"login": "sdedic", "name": "Svatopluk Dedic"}}, "url": "https://github.com/apache/netbeans/commit/3fadff623a920d854a415d334c056eb819cc9fe2", "committedDate": "2020-10-07T07:27:33Z", "message": "Deprecated unused java folding; package depends on pre-6.5 APIs."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b25953072db9cb7bae779f178dae29227db38cc", "author": {"user": {"login": "sdedic", "name": "Svatopluk Dedic"}}, "url": "https://github.com/apache/netbeans/commit/0b25953072db9cb7bae779f178dae29227db38cc", "committedDate": "2020-10-07T07:27:33Z", "message": "Cleaned references to BaseDocument from APIs, old methods deprecated."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "580d925e0608690eb3462aad37de15cdf0259853", "author": {"user": {"login": "sdedic", "name": "Svatopluk Dedic"}}, "url": "https://github.com/apache/netbeans/commit/580d925e0608690eb3462aad37de15cdf0259853", "committedDate": "2020-10-07T07:27:33Z", "message": "Webpage content MIME type query moved to web.common."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dce05447815f645e668cec289ee7daa21816c01c", "author": {"user": {"login": "sdedic", "name": "Svatopluk Dedic"}}, "url": "https://github.com/apache/netbeans/commit/dce05447815f645e668cec289ee7daa21816c01c", "committedDate": "2020-10-07T09:06:55Z", "message": "HtmlIndex API separated, release mods updated not to use auto-deps."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bab0acea55a924b12ddc7d91dae41ee927e6272d", "author": {"user": {"login": "sdedic", "name": "Svatopluk Dedic"}}, "url": "https://github.com/apache/netbeans/commit/bab0acea55a924b12ddc7d91dae41ee927e6272d", "committedDate": "2020-10-07T09:06:56Z", "message": "Javascript HTML support separated."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "adf33acd8defce451929495942916c1234e52c8f", "author": {"user": {"login": "JaroslavTulach", "name": "Jaroslav Tulach"}}, "url": "https://github.com/apache/netbeans/commit/adf33acd8defce451929495942916c1234e52c8f", "committedDate": "2020-10-07T09:06:56Z", "message": "Headless mode fixes."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a273209a2063f8e025e491b6543b02fe8e5b17ea", "author": {"user": {"login": "JaroslavTulach", "name": "Jaroslav Tulach"}}, "url": "https://github.com/apache/netbeans/commit/a273209a2063f8e025e491b6543b02fe8e5b17ea", "committedDate": "2020-10-07T09:06:56Z", "message": "Always call LoadOpenProjects.waitFinished to ensure the loading of project is started"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d8108be90833200dbd76dedd80813440018c0d3", "author": {"user": {"login": "JaroslavTulach", "name": "Jaroslav Tulach"}}, "url": "https://github.com/apache/netbeans/commit/6d8108be90833200dbd76dedd80813440018c0d3", "committedDate": "2020-10-07T09:06:57Z", "message": "Missing parameter means stdio; cleanup"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "76b960ad4ed4b72916c604dd17d05768b268b05a", "author": {"user": {"login": "JaroslavTulach", "name": "Jaroslav Tulach"}}, "url": "https://github.com/apache/netbeans/commit/76b960ad4ed4b72916c604dd17d05768b268b05a", "committedDate": "2020-10-07T07:27:35Z", "message": "Print out PROXY related environment keys"}, "afterCommit": {"oid": "6d8108be90833200dbd76dedd80813440018c0d3", "author": {"user": {"login": "JaroslavTulach", "name": "Jaroslav Tulach"}}, "url": "https://github.com/apache/netbeans/commit/6d8108be90833200dbd76dedd80813440018c0d3", "committedDate": "2020-10-07T09:06:57Z", "message": "Missing parameter means stdio; cleanup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzNjQ0NzM5", "url": "https://github.com/apache/netbeans/pull/2424#pullrequestreview-503644739", "createdAt": "2020-10-07T08:33:06Z", "commit": {"oid": "f1616eb3d6aab984cc9c538fe26fcf8873c726f3"}, "state": "APPROVED", "comments": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QwODozMzowNlrOHdocuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QwOTowOTo1NFrOHdp5RA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDgzMzQ2NQ==", "bodyText": "One deprecated module less, in a compatible way! Thanks, Sv\u00e1\u0165o, I always knew you are the best when it comes to module dependencies cleanup!", "url": "https://github.com/apache/netbeans/pull/2424#discussion_r500833465", "createdAt": "2020-10-07T08:33:06Z", "author": {"login": "JaroslavTulach"}, "path": "java/java.editor/module-auto-deps.xml", "diffHunk": "@@ -0,0 +1,39 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+\n+    Licensed to the Apache Software Foundation (ASF) under one\n+    or more contributor license agreements.  See the NOTICE file\n+    distributed with this work for additional information\n+    regarding copyright ownership.  The ASF licenses this file\n+    to you under the Apache License, Version 2.0 (the\n+    \"License\"); you may not use this file except in compliance\n+    with the License.  You may obtain a copy of the License at\n+\n+      http://www.apache.org/licenses/LICENSE-2.0\n+\n+    Unless required by applicable law or agreed to in writing,\n+    software distributed under the License is distributed on an\n+    \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+    KIND, either express or implied.  See the License for the\n+    specific language governing permissions and limitations\n+    under the License.\n+\n+-->\n+\n+<!DOCTYPE transformations PUBLIC \"-//NetBeans//DTD Module Automatic Dependencies 1.0//EN\" \"http://www.netbeans.org/dtds/module-auto-deps-1_0.dtd\">\n+\n+<transformations version=\"1.0\">\n+    <transformationgroup>\n+        <description>Removed dependencies on pre-6.5 formatting</description>\n+        <transformation>\n+            <trigger-dependency type=\"older\">\n+                <module-dependency codenamebase=\"org.netbeans.modules.java.editor\" major=\"1\" spec=\"2.78.0\"/>\n+            </trigger-dependency>\n+            <implies>\n+                <result>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1616eb3d6aab984cc9c538fe26fcf8873c726f3"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDgzNTIyNg==", "bodyText": "Great!", "url": "https://github.com/apache/netbeans/pull/2424#discussion_r500835226", "createdAt": "2020-10-07T08:35:53Z", "author": {"login": "JaroslavTulach"}, "path": "java/java.editor.lib/src/org/netbeans/editor/ext/java/JavaFoldManager.java", "diffHunk": "@@ -22,35 +22,29 @@\n import org.netbeans.api.editor.fold.FoldType;\n import org.netbeans.spi.editor.fold.FoldManager;\n \n-import static org.netbeans.editor.ext.java.Bundle.*;\n-import org.openide.util.NbBundle;\n+import org.netbeans.modules.java.editor.fold.JavaElementFoldManager;\n \n /**\n  * Java fold maintainer creates and updates folds for java sources.\n  *\n  * @author Miloslav Metelka\n  * @version 1.00\n+ * @deprecated This package introduces a dependency on an obsoleted pre-NetBeans 6.5 features.\n+ * It is possible to use generic {@link FoldType} categories and use {@link FoldType#isKindOf(org.netbeans.api.editor.fold.FoldType)}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3fadff623a920d854a415d334c056eb819cc9fe2"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDgzNjAyMg==", "bodyText": "This could use <a href=\"@TOP@/org/netbeans/modules/csl/api/test/TestBase.html\"> hyperlink.", "url": "https://github.com/apache/netbeans/pull/2424#discussion_r500836022", "createdAt": "2020-10-07T08:37:11Z", "author": {"login": "JaroslavTulach"}, "path": "ide/csl.api/apichanges.xml", "diffHunk": "@@ -25,6 +25,31 @@\n <apidef name=\"csl.api\">Common Scripting Language API</apidef>\n </apidefs>\n <changes>\n+    <change id=\"ExtraMockServices\">\n+        <summary>Allow subclasses to inject instances to MockLookup</summary>\n+        <version major=\"2\" minor=\"65\"/>\n+        <date day=\"30\" month=\"9\" year=\"2020\"/>\n+        <author login=\"sdedic\"/>\n+        <compatibility addition=\"yes\"/>\n+        <description>\n+            Subclasses of <code>o.n.m.csl.api.test.TestBase</code> may subclass <code>createExtraMockLookupContent</code> to", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b25953072db9cb7bae779f178dae29227db38cc"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDgzNjUxMw==", "bodyText": "Replacing BaseDocument with JDK's Document decreases coupling and increases flexibility.", "url": "https://github.com/apache/netbeans/pull/2424#discussion_r500836513", "createdAt": "2020-10-07T08:38:02Z", "author": {"login": "JaroslavTulach"}, "path": "ide/csl.api/apichanges.xml", "diffHunk": "@@ -25,6 +25,31 @@\n <apidef name=\"csl.api\">Common Scripting Language API</apidef>\n </apidefs>\n <changes>\n+    <change id=\"ExtraMockServices\">\n+        <summary>Allow subclasses to inject instances to MockLookup</summary>\n+        <version major=\"2\" minor=\"65\"/>\n+        <date day=\"30\" month=\"9\" year=\"2020\"/>\n+        <author login=\"sdedic\"/>\n+        <compatibility addition=\"yes\"/>\n+        <description>\n+            Subclasses of <code>o.n.m.csl.api.test.TestBase</code> may subclass <code>createExtraMockLookupContent</code> to\n+            add extra services into the <code>MockLookup</code> during test setup.\n+        </description>\n+        <class package=\"org.netbeans.modules.csl.api.test\" name=\"TestBase\" link=\"no\"/>\n+    </change>\n+    <change id=\"Remove-BaseDocument\">\n+        <summary>BaseDocument references reduced</summary>\n+        <version major=\"2\" minor=\"65\"/>\n+        <date day=\"30\" month=\"9\" year=\"2020\"/>\n+        <author login=\"sdedic\"/>\n+        <compatibility addition=\"yes\" deprecation=\"yes\"/>\n+        <description>\n+            Decprecated API dependency on BaseDocument that introduces (unnecessary) dependency on <code>editor.lib</code> module", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b25953072db9cb7bae779f178dae29227db38cc"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDg0MDE3MQ==", "bodyText": "We tried, with Miloslav Metelka, to make sure all the functionality of BaseDocument commonly needed by users of editor is also available via standard javax.swing.text.Document or via NbDocument abstractions.\nIt is great to see that such replacements work!", "url": "https://github.com/apache/netbeans/pull/2424#discussion_r500840171", "createdAt": "2020-10-07T08:43:30Z", "author": {"login": "JaroslavTulach"}, "path": "ide/csl.api/src/org/netbeans/modules/csl/core/LanguageRegistry.java", "diffHunk": "@@ -146,32 +146,31 @@ public Language getLanguageByMimeType(@NonNull String mimeType) {\n         return result;\n     }\n \n-    public List<Language> getEmbeddedLanguages(BaseDocument doc, int offset) {\n+    public List<Language> getEmbeddedLanguages(Document doc, int offset) {\n         List<Language> result = new ArrayList<Language>();\n \n-        doc.readLock(); // Read-lock due to Token hierarchy use\n-        try {\n-            // TODO - I should only do this for languages which CAN have it\n-            /*\n-     at org.netbeans.lib.lexer.inc.IncTokenList.reinit(IncTokenList.java:113)\n-        at org.netbeans.lib.lexer.TokenHierarchyOperation.setActiveImpl(TokenHierarchyOperation.java:257)\n-        at org.netbeans.lib.lexer.TokenHierarchyOperation.isActiveImpl(TokenHierarchyOperation.java:308)\n-        at org.netbeans.lib.lexer.TokenHierarchyOperation.tokenSequence(TokenHierarchyOperation.java:344)\n-        at org.netbeans.lib.lexer.TokenHierarchyOperation.tokenSequence(TokenHierarchyOperation.java:338)\n-        at org.netbeans.api.lexer.TokenHierarchy.tokenSequence(TokenHierarchy.java:183)\n-        at org.netbeans.modules.csl.LanguageRegistry.getEmbeddedLanguages(LanguageRegistry.java:336)\n-        at org.netbeans.modules.gsfret.hints.infrastructure.SuggestionsTask.getHintsProviderLanguage(SuggestionsTask.java:70)\n-        at org.netbeans.modules.gsfret.hints.infrastructure.SuggestionsTask.run(SuggestionsTask.java:94)\n-        at org.netbeans.modules.gsfret.hints.infrastructure.SuggestionsTask.run(SuggestionsTask.java:63)\n-[catch] at org.netbeans.napi.gsfret.source.Source$CompilationJob.run(Source.java:1272)             * \n-             */\n-            TokenSequence ts = TokenHierarchy.get(doc).tokenSequence();\n-            if (ts != null) {\n-                addLanguages(result, ts, offset);\n+        doc.render(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b25953072db9cb7bae779f178dae29227db38cc"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDg0MjAxNw==", "bodyText": "Separating the indexing functionality out of HTML editor module seems reasonable. Thanks Sv\u00e1\u0165o for making it a compatible change!", "url": "https://github.com/apache/netbeans/pull/2424#discussion_r500842017", "createdAt": "2020-10-07T08:46:15Z", "author": {"login": "JaroslavTulach"}, "path": "ide/html.editor/module-auto-deps.xml", "diffHunk": "@@ -0,0 +1,39 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+\n+    Licensed to the Apache Software Foundation (ASF) under one\n+    or more contributor license agreements.  See the NOTICE file\n+    distributed with this work for additional information\n+    regarding copyright ownership.  The ASF licenses this file\n+    to you under the Apache License, Version 2.0 (the\n+    \"License\"); you may not use this file except in compliance\n+    with the License.  You may obtain a copy of the License at\n+\n+      http://www.apache.org/licenses/LICENSE-2.0\n+\n+    Unless required by applicable law or agreed to in writing,\n+    software distributed under the License is distributed on an\n+    \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+    KIND, either express or implied.  See the License for the\n+    specific language governing permissions and limitations\n+    under the License.\n+\n+-->\n+\n+<!DOCTYPE transformations PUBLIC \"-//NetBeans//DTD Module Automatic Dependencies 1.0//EN\" \"http://www.netbeans.org/dtds/module-auto-deps-1_0.dtd\">\n+\n+<transformations version=\"1.0\">\n+    <transformationgroup>\n+        <description>HtmlIndex API separated</description>\n+        <transformation>\n+            <trigger-dependency type=\"older\">\n+                <module-dependency codenamebase=\"org.netbeans.modules.html.editor\" spec=\"2.66\"/>\n+            </trigger-dependency>\n+            <implies>\n+                <result>\n+                    <module-dependency codenamebase=\"org.netbeans.modules.html.indexing\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97edaff1212968620a3ddbdcc72ddef5eeb2581f"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDg0MzAxMw==", "bodyText": "javascript2.nodejs module made more \"lightweight\", great!", "url": "https://github.com/apache/netbeans/pull/2424#discussion_r500843013", "createdAt": "2020-10-07T08:47:48Z", "author": {"login": "JaroslavTulach"}, "path": "webcommon/javascript2.nodejs/nbproject/project.xml", "diffHunk": "@@ -78,15 +78,6 @@\n                         <specification-version>1.0</specification-version>\n                     </run-dependency>\n                 </dependency>\n-                <dependency>\n-                    <code-name-base>org.netbeans.modules.html.editor</code-name-base>\n-                    <build-prerequisite/>\n-                    <compile-dependency/>\n-                    <run-dependency>\n-                        <release-version>2</release-version>\n-                        <specification-version>2.50</specification-version>\n-                    </run-dependency>\n-                </dependency>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97edaff1212968620a3ddbdcc72ddef5eeb2581f"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDg0MzI5Ng==", "bodyText": "web.clientproject and associated API module made more \"lightweight\", super!", "url": "https://github.com/apache/netbeans/pull/2424#discussion_r500843296", "createdAt": "2020-10-07T08:48:16Z", "author": {"login": "JaroslavTulach"}, "path": "webcommon/web.clientproject.api/nbproject/project.xml", "diffHunk": "@@ -96,12 +96,11 @@\n                     </run-dependency>\n                 </dependency>\n                 <dependency>\n-                    <code-name-base>org.netbeans.modules.html.editor</code-name-base>\n+                    <code-name-base>org.netbeans.modules.html.indexing</code-name-base>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97edaff1212968620a3ddbdcc72ddef5eeb2581f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDg1MDI3Nw==", "bodyText": "Good catch. There is no point in wrapping CommandException into another CommandException. Thanks.", "url": "https://github.com/apache/netbeans/pull/2424#discussion_r500850277", "createdAt": "2020-10-07T08:59:05Z", "author": {"login": "JaroslavTulach"}, "path": "platform/sendopts/src/org/netbeans/modules/sendopts/DefaultProcessor.java", "diffHunk": "@@ -191,6 +191,8 @@ protected void process(Env env, Map<Option, String[]> optionValues) throws Comma\n             if (inst instanceof ArgsProcessor) {\n                 ((ArgsProcessor)inst).process(env);\n             }\n+        } catch (CommandException exception) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4d70cfd1a74b7206311e55805452d12bddaf95b"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDg1NDgzNQ==", "bodyText": "These are typical UI updating actions and it makes no sense to call them when the system is running in headless mode. Thanks for introducing the updateUILater (if ever) utility!", "url": "https://github.com/apache/netbeans/pull/2424#discussion_r500854835", "createdAt": "2020-10-07T09:06:05Z", "author": {"login": "JaroslavTulach"}, "path": "java/maven/src/org/netbeans/modules/maven/execute/AbstractMavenExecutor.java", "diffHunk": "@@ -141,15 +142,13 @@ protected final void processInitialMessage() {\n     }\n \n     protected final void actionStatesAtStart() {\n-        SwingUtilities.invokeLater(new Runnable() {\n-            @Override public void run() {\n-                createNewTabActions();\n-                tabContext.rerun.setEnabled(false);\n-                tabContext.rerunDebug.setEnabled(false);\n-                tabContext.overview.setRoot(null);\n-                tabContext.resume.setFinder(null);\n-                tabContext.stop.setEnabled(true);\n-            }\n+        updateUILater(false, () -> {\n+            createNewTabActions();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "21f75f218be7ed7aa28a9809325d1df4533bb943"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDg1NTQxOA==", "bodyText": "Showing dialog would yield an exception in headless mode. Returning CLOSED_OPTION is the best this default, dummy implementation can do, in my opinion.", "url": "https://github.com/apache/netbeans/pull/2424#discussion_r500855418", "createdAt": "2020-10-07T09:07:05Z", "author": {"login": "JaroslavTulach"}, "path": "platform/openide.dialogs/src/org/openide/DialogDisplayer.java", "diffHunk": "@@ -133,13 +133,19 @@ public Dialog createDialog(DialogDescriptor descriptor, Frame parent) {\n      * @see \"#30031\"\n      */\n     private static final class Trivial extends DialogDisplayer {\n+        @Override\n         public Object notify(NotifyDescriptor nd) {\n+            if (GraphicsEnvironment.isHeadless()) {\n+                return NotifyDescriptor.CLOSED_OPTION;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "21f75f218be7ed7aa28a9809325d1df4533bb943"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDg1NzE1Ng==", "bodyText": "This is the important change. Unit tests that call OpenProjectList.getDefault().get() could wait indefinitely long. Now they trigger the actual loading mechanism by calling waitFinished and not TASK.waitFinished. As a result it is more comfortable to write tests that invoke code relying on the list of open projects being loaded.", "url": "https://github.com/apache/netbeans/pull/2424#discussion_r500857156", "createdAt": "2020-10-07T09:09:54Z", "author": {"login": "JaroslavTulach"}, "path": "ide/projectui/src/org/netbeans/modules/project/ui/OpenProjectList.java", "diffHunk": "@@ -595,7 +606,7 @@ public boolean isDone() {\n         @Override\n         public Project[] get(long timeout, TimeUnit unit) throws InterruptedException, ExecutionException, TimeoutException {\n             long ms = unit.convert(timeout, TimeUnit.MILLISECONDS);\n-            if (!TASK.waitFinished(timeout)) {\n+            if (!waitFinished(timeout)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "908859d502f9c8505a47255cc86bb185ff106fca"}, "originalPosition": 51}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzODAwNTQ0", "url": "https://github.com/apache/netbeans/pull/2424#pullrequestreview-503800544", "createdAt": "2020-10-07T11:58:00Z", "commit": {"oid": "6d8108be90833200dbd76dedd80813440018c0d3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxMTo1ODowMFrOHdvuiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxMTo1ODowMFrOHdvuiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDk1MjcxMg==", "bodyText": "For @junichi11 to review, but likely OK.", "url": "https://github.com/apache/netbeans/pull/2424#discussion_r500952712", "createdAt": "2020-10-07T11:58:00Z", "author": {"login": "JaroslavTulach"}, "path": "php/php.latte/nbproject/project.xml", "diffHunk": "@@ -147,7 +147,7 @@\n                     <compile-dependency/>\n                     <run-dependency>\n                         <release-version>2</release-version>\n-                        <specification-version>2.19</specification-version>\n+                        <specification-version>2.66</specification-version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d8108be90833200dbd76dedd80813440018c0d3"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzNTYwNzg2", "url": "https://github.com/apache/netbeans/pull/2424#pullrequestreview-553560786", "createdAt": "2020-12-16T10:42:20Z", "commit": {"oid": "6d8108be90833200dbd76dedd80813440018c0d3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxMDo0MjoyMFrOIG-7Zg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxMDo0MjoyMFrOIG-7Zg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDE5MzM4Mg==", "bodyText": "@sdedic Could you please have a look at https://issues.apache.org/jira/browse/NETBEANS-5155 ?", "url": "https://github.com/apache/netbeans/pull/2424#discussion_r544193382", "createdAt": "2020-12-16T10:42:20Z", "author": {"login": "junichi11"}, "path": "webcommon/javascript2.editor/src/org/netbeans/modules/javascript2/editor/hints/ErrorCheckingSupport.java", "diffHunk": "@@ -86,42 +84,27 @@ public static void setErrorCheckingEnabledForMimetype(String mimeType, boolean e\n         }\n     }\n \n-    public static String getMimeType(Parser.Result result) {\n-        SyntaxAnalyzerResult syntax = getSyntaxAnalyzerResult(result);\n-        if (syntax != null) {\n-            return Utils.getWebPageMimeType(syntax);\n+    public static String getMimeType(Parser.Result info) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d8108be90833200dbd76dedd80813440018c0d3"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 436, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}