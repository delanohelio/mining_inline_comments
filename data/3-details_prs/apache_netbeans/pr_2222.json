{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQxNDU2NjE1", "number": 2222, "title": "[NETBEANS-4311]: Added support for auto-completion of Java Record", "bodyText": "", "createdAt": "2020-06-29T14:33:41Z", "url": "https://github.com/apache/netbeans/pull/2222", "merged": true, "mergeCommit": {"oid": "277ab58183eea36683792f6d5a7380bec0e68f85"}, "closed": true, "closedAt": "2020-07-30T09:10:47Z", "author": {"login": "arusinha"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3XFZtAFqTQ1MzEyMTE0NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc578yxAFqTQ1ODIyNDE1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzMTIxMTQ1", "url": "https://github.com/apache/netbeans/pull/2222#pullrequestreview-453121145", "createdAt": "2020-07-22T08:51:36Z", "commit": {"oid": "95b95096c1c3bc4f7b2d0d6e887498c661f4a266"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwODo1MTozN1rOG1ZFDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwOTowNToxM1rOG1ZlRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODYzODYwNg==", "bodyText": "Sorry, but I am not sure we should filter out j.l.Record here. We are not filtering any other element AFAIK, so why Record?", "url": "https://github.com/apache/netbeans/pull/2222#discussion_r458638606", "createdAt": "2020-07-22T08:51:37Z", "author": {"login": "lahodaj"}, "path": "java/java.completion/src/org/netbeans/modules/java/completion/JavaCompletionTask.java", "diffHunk": "@@ -3930,6 +4136,8 @@ public boolean accept(Element e, TypeMirror t) {\n             }\n         };\n         for (TypeElement e : controller.getElementUtilities().getGlobalTypes(acceptor)) {\n+            if (e.getQualifiedName().toString().equals(JAVA_LANG_RECORD) && env.getController().getSourceVersion().compareTo(SOURCE_VERSION_RELEASE_14) < 0) ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95b95096c1c3bc4f7b2d0d6e887498c661f4a266"}, "originalPosition": 473}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODYzOTgxMQ==", "bodyText": "I am unsure about the \"Record\" here. This should be the golden file when the runtime platform is JDK 8. JDK 8 does not have j.l.Record, right?\n(I would also suggest to minimize the number of golden outputs, if/as feasible.)", "url": "https://github.com/apache/netbeans/pull/2222#discussion_r458639811", "createdAt": "2020-07-22T08:53:40Z", "author": {"login": "lahodaj"}, "path": "java/java.completion/test/unit/data/goldenfiles/org/netbeans/modules/java/completion/JavaCompletionTaskTest/1.8/typesRecordLocalMembersAndVars.pass", "diffHunk": "@@ -0,0 +1,111 @@\n+boolean\n+byte\n+char\n+double\n+final\n+float\n+int\n+long\n+short\n+X\n+Y\n+AbstractMethodError\n+Appendable\n+ArithmeticException\n+ArrayIndexOutOfBoundsException\n+ArrayStoreException\n+AssertionError\n+AutoCloseable\n+Boolean\n+BootstrapMethodError\n+Byte\n+CharSequence\n+Character\n+Class\n+ClassCastException\n+ClassCircularityError\n+ClassFormatError\n+ClassLoader\n+ClassNotFoundException\n+ClassValue\n+CloneNotSupportedException\n+Cloneable\n+Comparable\n+Compiler\n+Deprecated\n+Double\n+Enum\n+EnumConstantNotPresentException\n+Error\n+Exception\n+ExceptionInInitializerError\n+Float\n+FunctionalInterface\n+IllegalAccessError\n+IllegalAccessException\n+IllegalArgumentException\n+IllegalMonitorStateException\n+IllegalStateException\n+IllegalThreadStateException\n+IncompatibleClassChangeError\n+IndexOutOfBoundsException\n+InheritableThreadLocal\n+InstantiationError\n+InstantiationException\n+Integer\n+InternalError\n+InterruptedException\n+Iterable\n+LinkageError\n+Long\n+Math\n+NegativeArraySizeException\n+NoClassDefFoundError\n+NoSuchFieldError\n+NoSuchFieldException\n+NoSuchMethodError\n+NoSuchMethodException\n+NullPointerException\n+Number\n+NumberFormatException\n+Object\n+OutOfMemoryError\n+Override\n+Package\n+Process\n+ProcessBuilder\n+Readable\n+Record", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95b95096c1c3bc4f7b2d0d6e887498c661f4a266"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODY0NjMzNQ==", "bodyText": "I think this method's name and content do not really match - it is not only \"isRecordSupported\", but also \"and is the prefix a prefix of 'record''. I would suggest to drop the second concern from this method. Many callers don't need the prefix check. I counted just two callers that really need to check the prefix (for many, the prefix check happens automatically later), and I think it would be cleaner for them to call the prefix check explicitly.\nAlso, for discussion - should there be a preview enablement test here as well?", "url": "https://github.com/apache/netbeans/pull/2222#discussion_r458646335", "createdAt": "2020-07-22T09:04:26Z", "author": {"login": "lahodaj"}, "path": "java/java.completion/src/org/netbeans/modules/java/completion/JavaCompletionTask.java", "diffHunk": "@@ -3008,10 +3027,194 @@ private void insideBreakOrContinue(Env env) throws IOException {\n             }\n         }\n     }\n+    \n+    private void addClassTypes(final Env env, DeclaredType baseType) throws IOException{\n+        EnumSet<ElementKind> classKinds = EnumSet.of(CLASS, INTERFACE, ENUM, ANNOTATION_TYPE, TYPE_PARAMETER);\n+        if (isRecordSupported(env, null)) {\n+            classKinds.add(TreeShims.getRecordKind());\n+        }\n+        addTypes(env, classKinds, null);\n+    }\n+\n+    private boolean isRecordSupported(final Env env, String prefix) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95b95096c1c3bc4f7b2d0d6e887498c661f4a266"}, "originalPosition": 267}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODY0Njg1NQ==", "bodyText": "The baseType parameter is unused. Suggest to either pass it to addTypes, or drop it.", "url": "https://github.com/apache/netbeans/pull/2222#discussion_r458646855", "createdAt": "2020-07-22T09:05:13Z", "author": {"login": "lahodaj"}, "path": "java/java.completion/src/org/netbeans/modules/java/completion/JavaCompletionTask.java", "diffHunk": "@@ -3008,10 +3027,194 @@ private void insideBreakOrContinue(Env env) throws IOException {\n             }\n         }\n     }\n+    \n+    private void addClassTypes(final Env env, DeclaredType baseType) throws IOException{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95b95096c1c3bc4f7b2d0d6e887498c661f4a266"}, "originalPosition": 259}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NTc3ODA3", "url": "https://github.com/apache/netbeans/pull/2222#pullrequestreview-455577807", "createdAt": "2020-07-27T08:29:43Z", "commit": {"oid": "c3d0eb871dba30bbf365dd10b949ff95f517b4c6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwODoyOTo0M1rOG3Yozw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwODoyOTo0M1rOG3Yozw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcyODUyNw==", "bodyText": "I don't think we need the golden files that are the same for 1.8 and 10 and other versions, right? If the tests don't find the golden output for e.g. version 10, they should look for the golden output of older versions. I.e. it should be enough to specify a golden output for 1.8, and only re-specify it if it changes in a newer version.", "url": "https://github.com/apache/netbeans/pull/2222#discussion_r460728527", "createdAt": "2020-07-27T08:29:43Z", "author": {"login": "lahodaj"}, "path": "java/java.completion/test/unit/data/goldenfiles/org/netbeans/modules/java/completion/JavaCompletionTaskTest/10/override.pass", "diffHunk": "@@ -0,0 +1 @@\n+Override", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3d0eb871dba30bbf365dd10b949ff95f517b4c6"}, "originalPosition": 1}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84ed378465d5ece29d5ff47b6f716a1209cedb5f", "author": {"user": null}, "url": "https://github.com/apache/netbeans/commit/84ed378465d5ece29d5ff47b6f716a1209cedb5f", "committedDate": "2020-07-30T02:12:51Z", "message": "[NETBEANS-4311]: Added support for auto-completion of Java Record"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1e06e285555a7d5f8d078795db0c898ecade7104", "author": {"user": null}, "url": "https://github.com/apache/netbeans/commit/1e06e285555a7d5f8d078795db0c898ecade7104", "committedDate": "2020-07-29T16:06:11Z", "message": "[NETBEANS-4311]: Removed unnecessary golden files"}, "afterCommit": {"oid": "84ed378465d5ece29d5ff47b6f716a1209cedb5f", "author": {"user": null}, "url": "https://github.com/apache/netbeans/commit/84ed378465d5ece29d5ff47b6f716a1209cedb5f", "committedDate": "2020-07-30T02:12:51Z", "message": "[NETBEANS-4311]: Added support for auto-completion of Java Record"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4MjA3MzE4", "url": "https://github.com/apache/netbeans/pull/2222#pullrequestreview-458207318", "createdAt": "2020-07-30T08:49:18Z", "commit": {"oid": "84ed378465d5ece29d5ff47b6f716a1209cedb5f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4MjI0MTUx", "url": "https://github.com/apache/netbeans/pull/2222#pullrequestreview-458224151", "createdAt": "2020-07-30T09:10:34Z", "commit": {"oid": "84ed378465d5ece29d5ff47b6f716a1209cedb5f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4853, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}