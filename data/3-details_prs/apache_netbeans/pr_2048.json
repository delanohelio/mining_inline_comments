{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0NDY0NjA3", "number": 2048, "title": "[NETBEANS-3787] FlatLaf: fixed active tab painting if project tab colors enabled", "bodyText": "Fix for https://issues.apache.org/jira/browse/NETBEANS-3787\nWhen project tab colors are enabled in Options dialog (Appearance > Document tabs), then it is painted over the blue \"underline\" that FlatLaf uses for active tabs. To avoid this I've moved the project color bar to the top of the tab.\nBefore:\n\nAfter:\n\nOther LaFs are not affected. E.g Windows:", "createdAt": "2020-03-26T22:59:27Z", "url": "https://github.com/apache/netbeans/pull/2048", "merged": true, "mergeCommit": {"oid": "4d31fa07f6961a7a981a4c78f8e0ae3dc4e42edb"}, "closed": true, "closedAt": "2020-04-30T15:37:18Z", "author": {"login": "DevCharly"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRkEZngH2gAyMzk0NDY0NjA3OmJkYWUzNmY4NWIzZjY5YzQ5NGNmY2Q4NjBiMGU0MDJiMzJkMmQzMmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABca2ktagFqTQwMDIxMjE3NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bdae36f85b3f69c494cfcd860b0e402b32d2d32c", "author": {"user": {"login": "DevCharly", "name": "Karl T"}}, "url": "https://github.com/apache/netbeans/commit/bdae36f85b3f69c494cfcd860b0e402b32d2d32c", "committedDate": "2020-03-26T22:44:11Z", "message": "[NETBEANS-3787] FlatLaf: fixed active tab painting if project tab colors enabled"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMzIyMTQ3", "url": "https://github.com/apache/netbeans/pull/2048#pullrequestreview-383322147", "createdAt": "2020-03-28T15:26:52Z", "commit": {"oid": "bdae36f85b3f69c494cfcd860b0e402b32d2d32c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzNDYyNDY0", "url": "https://github.com/apache/netbeans/pull/2048#pullrequestreview-383462464", "createdAt": "2020-03-29T22:24:22Z", "commit": {"oid": "bdae36f85b3f69c494cfcd860b0e402b32d2d32c"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQyMjoyNDoyMlrOF9VrmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQyMjozMTozMFrOF9Vu3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg2MjY4MQ==", "bodyText": "Looking at FlatLaf.properties ( https://github.com/apache/netbeans/blob/3139141059141caab4a6af1158cce7131e1b40f9/platform/o.n.swing.laf.flatlaf/src/org/netbeans/swing/laf/flatlaf/FlatLaf.properties ), the definition is \"nb.multitabs.underlineHeight={scaledInteger}3\". What does \"scaledInteger\" mean? How does that get parsed here?", "url": "https://github.com/apache/netbeans/pull/2048#discussion_r399862681", "createdAt": "2020-03-29T22:24:22Z", "author": {"login": "eirikbakke"}, "path": "platform/core.multitabs/src/org/netbeans/core/multitabs/impl/ProjectColorTabDecorator.java", "diffHunk": "@@ -161,8 +161,16 @@ public void paintAfter( TabData tab, Graphics g, Rectangle tabRect, boolean isSe\n         }\n         g.setColor( c );\n         Rectangle rect = new Rectangle( tabRect );\n-        rect.y += rect.height - 3;\n-        rect.grow( -1, -1 );\n+        int underlineHeight = UIManager.getInt(\"nb.multitabs.underlineHeight\"); // NOI18N", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bdae36f85b3f69c494cfcd860b0e402b32d2d32c"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg2MjgzNw==", "bodyText": "Realizing this code was already there... what's going on here? Is tabRect the entire tab to start with?", "url": "https://github.com/apache/netbeans/pull/2048#discussion_r399862837", "createdAt": "2020-03-29T22:25:56Z", "author": {"login": "eirikbakke"}, "path": "platform/core.multitabs/src/org/netbeans/core/multitabs/impl/ProjectColorTabDecorator.java", "diffHunk": "@@ -161,8 +161,16 @@ public void paintAfter( TabData tab, Graphics g, Rectangle tabRect, boolean isSe\n         }\n         g.setColor( c );\n         Rectangle rect = new Rectangle( tabRect );\n-        rect.y += rect.height - 3;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bdae36f85b3f69c494cfcd860b0e402b32d2d32c"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg2MzUxOA==", "bodyText": "If an underline is used to indicate the active tab, why not just keep the whole tab colored, like the other tabs, with the underline added? E.g.\nrect.height - =underlineHeight?", "url": "https://github.com/apache/netbeans/pull/2048#discussion_r399863518", "createdAt": "2020-03-29T22:31:30Z", "author": {"login": "eirikbakke"}, "path": "platform/core.multitabs/src/org/netbeans/core/multitabs/impl/ProjectColorTabDecorator.java", "diffHunk": "@@ -161,8 +161,16 @@ public void paintAfter( TabData tab, Graphics g, Rectangle tabRect, boolean isSe\n         }\n         g.setColor( c );\n         Rectangle rect = new Rectangle( tabRect );\n-        rect.y += rect.height - 3;\n-        rect.grow( -1, -1 );\n+        int underlineHeight = UIManager.getInt(\"nb.multitabs.underlineHeight\"); // NOI18N\n+        if( underlineHeight > 0 ) {\n+            // if the selected tab is highlighted with an \"underline\" (e.g. in FlatLaf)\n+            // then paint the project color bar at the top of the tab\n+            rect.height = underlineHeight;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bdae36f85b3f69c494cfcd860b0e402b32d2d32c"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMjEyMTc0", "url": "https://github.com/apache/netbeans/pull/2048#pullrequestreview-400212174", "createdAt": "2020-04-24T19:23:05Z", "commit": {"oid": "bdae36f85b3f69c494cfcd860b0e402b32d2d32c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 93, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}