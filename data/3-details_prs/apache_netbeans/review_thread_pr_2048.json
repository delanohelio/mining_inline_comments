{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0NDY0NjA3", "number": 2048, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQyMjoyNDoyMlrODsd6nA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQyMjozMTozMFrODsd9GA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3OTU0MDc2OnYy", "diffSide": "RIGHT", "path": "platform/core.multitabs/src/org/netbeans/core/multitabs/impl/ProjectColorTabDecorator.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQyMjoyNDoyMlrOF9VrmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxODo1MTowOVrOGDlOJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg2MjY4MQ==", "bodyText": "Looking at FlatLaf.properties ( https://github.com/apache/netbeans/blob/3139141059141caab4a6af1158cce7131e1b40f9/platform/o.n.swing.laf.flatlaf/src/org/netbeans/swing/laf/flatlaf/FlatLaf.properties ), the definition is \"nb.multitabs.underlineHeight={scaledInteger}3\". What does \"scaledInteger\" mean? How does that get parsed here?", "url": "https://github.com/apache/netbeans/pull/2048#discussion_r399862681", "createdAt": "2020-03-29T22:24:22Z", "author": {"login": "eirikbakke"}, "path": "platform/core.multitabs/src/org/netbeans/core/multitabs/impl/ProjectColorTabDecorator.java", "diffHunk": "@@ -161,8 +161,16 @@ public void paintAfter( TabData tab, Graphics g, Rectangle tabRect, boolean isSe\n         }\n         g.setColor( c );\n         Rectangle rect = new Rectangle( tabRect );\n-        rect.y += rect.height - 3;\n-        rect.grow( -1, -1 );\n+        int underlineHeight = UIManager.getInt(\"nb.multitabs.underlineHeight\"); // NOI18N", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bdae36f85b3f69c494cfcd860b0e402b32d2d32c"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDM4MjQ0Mg==", "bodyText": "{scaledInteger} means that FlatLaf scales this value (when initializing the Laf) using the FlatLaf user scale factor, which is used for Java 8 but also on Linux. When running in Java 9 the FlatLaf user scale factor is usually 1.\nIn other places I usually invoke method UIScale.scale( intValue ), but in this case it would require that Multi-tabs project depends on FlatLaf library project, which I wanted to avoid.\nThe downside of using {scaledInteger} is that it is not updated when the user changes scaling in Windows Settings.", "url": "https://github.com/apache/netbeans/pull/2048#discussion_r400382442", "createdAt": "2020-03-30T17:52:44Z", "author": {"login": "DevCharly"}, "path": "platform/core.multitabs/src/org/netbeans/core/multitabs/impl/ProjectColorTabDecorator.java", "diffHunk": "@@ -161,8 +161,16 @@ public void paintAfter( TabData tab, Graphics g, Rectangle tabRect, boolean isSe\n         }\n         g.setColor( c );\n         Rectangle rect = new Rectangle( tabRect );\n-        rect.y += rect.height - 3;\n-        rect.grow( -1, -1 );\n+        int underlineHeight = UIManager.getInt(\"nb.multitabs.underlineHeight\"); // NOI18N", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg2MjY4MQ=="}, "originalCommit": {"oid": "bdae36f85b3f69c494cfcd860b0e402b32d2d32c"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjQwODc0MQ==", "bodyText": "Ah, so I get it's FlatLAF that reads the property file and puts the scaled value into UIManager. Sounds good.\n\nThe downside of using {scaledInteger} is that it is not updated when the user changes scaling in Windows Settings.\nPresumably it's scaled via the default Graphics2D transform in that case. Sounds correct in any case.", "url": "https://github.com/apache/netbeans/pull/2048#discussion_r406408741", "createdAt": "2020-04-09T18:51:09Z", "author": {"login": "eirikbakke"}, "path": "platform/core.multitabs/src/org/netbeans/core/multitabs/impl/ProjectColorTabDecorator.java", "diffHunk": "@@ -161,8 +161,16 @@ public void paintAfter( TabData tab, Graphics g, Rectangle tabRect, boolean isSe\n         }\n         g.setColor( c );\n         Rectangle rect = new Rectangle( tabRect );\n-        rect.y += rect.height - 3;\n-        rect.grow( -1, -1 );\n+        int underlineHeight = UIManager.getInt(\"nb.multitabs.underlineHeight\"); // NOI18N", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg2MjY4MQ=="}, "originalCommit": {"oid": "bdae36f85b3f69c494cfcd860b0e402b32d2d32c"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3OTU0MTk3OnYy", "diffSide": "LEFT", "path": "platform/core.multitabs/src/org/netbeans/core/multitabs/impl/ProjectColorTabDecorator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQyMjoyNTo1NlrOF9VsNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQyMjozMjozNFrOF9VvUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg2MjgzNw==", "bodyText": "Realizing this code was already there... what's going on here? Is tabRect the entire tab to start with?", "url": "https://github.com/apache/netbeans/pull/2048#discussion_r399862837", "createdAt": "2020-03-29T22:25:56Z", "author": {"login": "eirikbakke"}, "path": "platform/core.multitabs/src/org/netbeans/core/multitabs/impl/ProjectColorTabDecorator.java", "diffHunk": "@@ -161,8 +161,16 @@ public void paintAfter( TabData tab, Graphics g, Rectangle tabRect, boolean isSe\n         }\n         g.setColor( c );\n         Rectangle rect = new Rectangle( tabRect );\n-        rect.y += rect.height - 3;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bdae36f85b3f69c494cfcd860b0e402b32d2d32c"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg2MzYzMg==", "bodyText": "Sorry, stray comment... I got it.", "url": "https://github.com/apache/netbeans/pull/2048#discussion_r399863632", "createdAt": "2020-03-29T22:32:34Z", "author": {"login": "eirikbakke"}, "path": "platform/core.multitabs/src/org/netbeans/core/multitabs/impl/ProjectColorTabDecorator.java", "diffHunk": "@@ -161,8 +161,16 @@ public void paintAfter( TabData tab, Graphics g, Rectangle tabRect, boolean isSe\n         }\n         g.setColor( c );\n         Rectangle rect = new Rectangle( tabRect );\n-        rect.y += rect.height - 3;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg2MjgzNw=="}, "originalCommit": {"oid": "bdae36f85b3f69c494cfcd860b0e402b32d2d32c"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3OTU0NzEyOnYy", "diffSide": "RIGHT", "path": "platform/core.multitabs/src/org/netbeans/core/multitabs/impl/ProjectColorTabDecorator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQyMjozMTozMFrOF9Vu3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxODowNzo1MlrOF91-mA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg2MzUxOA==", "bodyText": "If an underline is used to indicate the active tab, why not just keep the whole tab colored, like the other tabs, with the underline added? E.g.\nrect.height - =underlineHeight?", "url": "https://github.com/apache/netbeans/pull/2048#discussion_r399863518", "createdAt": "2020-03-29T22:31:30Z", "author": {"login": "eirikbakke"}, "path": "platform/core.multitabs/src/org/netbeans/core/multitabs/impl/ProjectColorTabDecorator.java", "diffHunk": "@@ -161,8 +161,16 @@ public void paintAfter( TabData tab, Graphics g, Rectangle tabRect, boolean isSe\n         }\n         g.setColor( c );\n         Rectangle rect = new Rectangle( tabRect );\n-        rect.y += rect.height - 3;\n-        rect.grow( -1, -1 );\n+        int underlineHeight = UIManager.getInt(\"nb.multitabs.underlineHeight\"); // NOI18N\n+        if( underlineHeight > 0 ) {\n+            // if the selected tab is highlighted with an \"underline\" (e.g. in FlatLaf)\n+            // then paint the project color bar at the top of the tab\n+            rect.height = underlineHeight;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bdae36f85b3f69c494cfcd860b0e402b32d2d32c"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDM5MTgzMg==", "bodyText": "@eirikbakke That would look better. Thanks Eirik!", "url": "https://github.com/apache/netbeans/pull/2048#discussion_r400391832", "createdAt": "2020-03-30T18:07:52Z", "author": {"login": "lkishalmi"}, "path": "platform/core.multitabs/src/org/netbeans/core/multitabs/impl/ProjectColorTabDecorator.java", "diffHunk": "@@ -161,8 +161,16 @@ public void paintAfter( TabData tab, Graphics g, Rectangle tabRect, boolean isSe\n         }\n         g.setColor( c );\n         Rectangle rect = new Rectangle( tabRect );\n-        rect.y += rect.height - 3;\n-        rect.grow( -1, -1 );\n+        int underlineHeight = UIManager.getInt(\"nb.multitabs.underlineHeight\"); // NOI18N\n+        if( underlineHeight > 0 ) {\n+            // if the selected tab is highlighted with an \"underline\" (e.g. in FlatLaf)\n+            // then paint the project color bar at the top of the tab\n+            rect.height = underlineHeight;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg2MzUxOA=="}, "originalCommit": {"oid": "bdae36f85b3f69c494cfcd860b0e402b32d2d32c"}, "originalPosition": 10}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 611, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}