{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5MjkyNzU4", "number": 1846, "title": "[NETBEANS-3428] FlatLaf: fixes for form designer", "bodyText": "Before:\n\nAfter:\n\nBefore:\n\nAfter:\n\nThe reason for the too small icons in the above images is that I took the screenshots running NB in Java 8 on a150% HiDPI screen.", "createdAt": "2020-01-05T11:30:05Z", "url": "https://github.com/apache/netbeans/pull/1846", "merged": true, "mergeCommit": {"oid": "1a8da0e96069d17573e36dda2f02abb4688a9780"}, "closed": true, "closedAt": "2020-01-08T01:31:52Z", "author": {"login": "DevCharly"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb3VxPKgH2gAyMzU5MjkyNzU4OmJkZWQxZDkxYTMzMGNkZTdhOTI1YTJlOWFmYzhlN2JkYzlhYzNhNTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb4KmNAAFqTMzOTU5NjY2NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bded1d91a330cde7a925a2e9afc8e7bdc9ac3a51", "author": {"user": {"login": "DevCharly", "name": "Karl T"}}, "url": "https://github.com/apache/netbeans/commit/bded1d91a330cde7a925a2e9afc8e7bdc9ac3a51", "committedDate": "2020-01-05T11:22:33Z", "message": "[NETBEANS-3428] FlatLaf: fixes for form designer"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4NDA4NDY3", "url": "https://github.com/apache/netbeans/pull/1846#pullrequestreview-338408467", "createdAt": "2020-01-05T16:02:57Z", "commit": {"oid": "bded1d91a330cde7a925a2e9afc8e7bdc9ac3a51"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNVQxNjowMjo1N1rOFaR-6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNVQxNjoxMDo0MVrOFaSAlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzEwMTkyOQ==", "bodyText": "Which LAF is used in the form designer? Is it the same as the IDE? In that case, should the background color not be taken from the LAF rather than from a special constant? (Also, I wonder why \"Tree.background\" was used previously instead of the default JPanel background.)", "url": "https://github.com/apache/netbeans/pull/1846#discussion_r363101929", "createdAt": "2020-01-05T16:02:57Z", "author": {"login": "eirikbakke"}, "path": "java/form/src/org/netbeans/modules/form/FormLoaderSettings.java", "diffHunk": "@@ -472,12 +472,13 @@ public void setPaletteInToolBar(boolean value) {\n      * @return background color of the designer.\n      */\n     public java.awt.Color getFormDesignerBackgroundColor() {\n-        Color defaultBackground = UIManager.getColor( \"Tree.background\" ); //NOI18N\n-        if( null == defaultBackground )\n+        Color defaultBackground = UIManager.getColor(\"nb.formdesigner.designer.background\"); //NOI18N\n+        if (defaultBackground == null)\n+            defaultBackground = UIManager.getColor(\"Tree.background\"); //NOI18N\n+        if (defaultBackground == null)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bded1d91a330cde7a925a2e9afc8e7bdc9ac3a51"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzEwMjAzMg==", "bodyText": "Isn't this what the PROP_FORMDESIGNER_BORDER_COLOR property is for? Or does that have some other purpose?\nAlso, shouldn't this come from whichever LAF is being used to display form designer components? (As in my previous comment.)\nAlso, why is the new property using the word \"designer\" twice?", "url": "https://github.com/apache/netbeans/pull/1846#discussion_r363102032", "createdAt": "2020-01-05T16:04:57Z", "author": {"login": "eirikbakke"}, "path": "java/form/src/org/netbeans/modules/form/FormLoaderSettings.java", "diffHunk": "@@ -497,9 +498,11 @@ public void setFormDesignerBackgroundColor(java.awt.Color value) {\n      * @return color of the border of the designer.\n      */\n     public java.awt.Color getFormDesignerBorderColor() {\n-        int rgb = getPreferences().getInt(PROP_FORMDESIGNER_BORDER_COLOR , new Color(224, 224, 255).getRGB());\n+        Color defaultBackground = UIManager.getColor(\"nb.formdesigner.designer.borderColor\"); //NOI18N", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bded1d91a330cde7a925a2e9afc8e7bdc9ac3a51"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzEwMjM1Nw==", "bodyText": "Am I right that these changes (in FlatLFCustoms) are related to the LAF's appearance as a whole, i.e. not specifically related to the form designer?", "url": "https://github.com/apache/netbeans/pull/1846#discussion_r363102357", "createdAt": "2020-01-05T16:10:41Z", "author": {"login": "eirikbakke"}, "path": "platform/o.n.swing.laf.flatlaf/src/org/netbeans/swing/laf/flatlaf/FlatLFCustoms.java", "diffHunk": "@@ -63,6 +67,12 @@\n             \"nb.multitabs.button.left.icon\", FlatTabControlIcon.get(TabControlButton.ID_SCROLL_LEFT_BUTTON), // NOI18N\n             \"nb.multitabs.button.right.icon\", FlatTabControlIcon.get(TabControlButton.ID_SCROLL_RIGHT_BUTTON), // NOI18N\n             \"nb.multitabs.button.rollover\", true, // NOI18N\n+\n+            // Change some colors from ColorUIResource to Color because they are used as\n+            // background colors for checkboxes (e.g. in org.netbeans.modules.palette.ui.CategoryButton),\n+            // which in FlatLaf paint background only if background color is not a UIResource.\n+            \"PropSheet.setBackground\", new Color(UIManager.getColor(\"PropSheet.setBackground\").getRGB()),\n+            \"PropSheet.selectedSetBackground\", new Color(UIManager.getColor(\"PropSheet.selectedSetBackground\").getRGB()),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bded1d91a330cde7a925a2e9afc8e7bdc9ac3a51"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "941f1b1355ef08b0bd5b4455d695488c82673c38", "author": {"user": {"login": "DevCharly", "name": "Karl T"}}, "url": "https://github.com/apache/netbeans/commit/941f1b1355ef08b0bd5b4455d695488c82673c38", "committedDate": "2020-01-05T17:40:53Z", "message": "changed `nb.formdesigner.designer.`to `nb.formdesigner.`"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5NTk2NjY0", "url": "https://github.com/apache/netbeans/pull/1846#pullrequestreview-339596664", "createdAt": "2020-01-08T00:55:28Z", "commit": {"oid": "941f1b1355ef08b0bd5b4455d695488c82673c38"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 239, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}