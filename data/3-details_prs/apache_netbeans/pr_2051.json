{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk1MDkzMDcw", "number": 2051, "title": "[NETBEANS-3428] FlatLaf: hover in multi-tabs", "bodyText": "Addition to PR #1865.\nAdds the missing hover effect to multi-tabs for FlatLaf.\nOther LaFs are not changed. Tested with Metal, Nimbus and Windows LaF.", "createdAt": "2020-03-28T13:02:00Z", "url": "https://github.com/apache/netbeans/pull/2051", "merged": true, "mergeCommit": {"oid": "38731d150b29075c6a91290763025aa7838f2a88"}, "closed": true, "closedAt": "2020-04-09T13:08:06Z", "author": {"login": "DevCharly"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcSDMuaAH2gAyMzk1MDkzMDcwOmJhNDMzZjY1MjhjNTBjNjVkZTI5MmQ1MzNhNzM4YTg0ZTY2MjM2MjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcTgOCIAH2gAyMzk1MDkzMDcwOmIxZTdmZWYyYzkzNTlkMDVjNTZiNGRkOGFiZTFhYzcwZmRmNDc4NjU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ba433f6528c50c65de292d533a738a84e6623622", "author": {"user": {"login": "DevCharly", "name": "Karl T"}}, "url": "https://github.com/apache/netbeans/commit/ba433f6528c50c65de292d533a738a84e6623622", "committedDate": "2020-03-28T11:00:20Z", "message": "[NETBEANS-3428] FlatLaf: hover in multi-tabs\n\nother LaFs are not changed\ntested with Metal, Nimbus and Windows LaF"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzNDYzNzcz", "url": "https://github.com/apache/netbeans/pull/2051#pullrequestreview-383463773", "createdAt": "2020-03-29T22:36:46Z", "commit": {"oid": "ba433f6528c50c65de292d533a738a84e6623622"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQyMjozNjo0N1rOF9Vxdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQyMjo1MjoyOFrOF9V4YA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg2NDE4Mw==", "bodyText": "Other LAFs, e.g. Windows, have a hover color as well. Why does FlatLAF need a new property here?\nIf the new property is needed, should the other LAFs be updated to use it as well?", "url": "https://github.com/apache/netbeans/pull/2051#discussion_r399864183", "createdAt": "2020-03-29T22:36:47Z", "author": {"login": "eirikbakke"}, "path": "platform/core.multitabs/src/org/netbeans/core/multitabs/impl/TabDataRenderer.java", "diffHunk": "@@ -58,6 +58,7 @@\n     private static final Color underlineColor = UIManager.getColor(\"nb.multitabs.underlineColor\"); // NOI18N\n     private static final Color inactiveUnderlineColor = UIManager.getColor(\"nb.multitabs.inactiveUnderlineColor\"); // NOI18N\n     private static final Color activeBackground = UIManager.getColor(\"nb.multitabs.activeBackground\"); // NOI18N\n+    private static final Color hoverBackground = UIManager.getColor(\"nb.multitabs.hoverBackground\"); // NOI18N", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba433f6528c50c65de292d533a738a84e6623622"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg2NDQ4OA==", "bodyText": "Why are tab decorators not invoked in the isHover case? TabDecorator is a public API, so imagine having to describe this behavior in its Javadoc: \"if the UIManager property nb.multitabs.hoverBackground is defined, then paintAfter is only called when the tab is not hovered over\". That would be a really weird caveat.", "url": "https://github.com/apache/netbeans/pull/2051#discussion_r399864488", "createdAt": "2020-03-29T22:39:11Z", "author": {"login": "eirikbakke"}, "path": "platform/core.multitabs/src/org/netbeans/core/multitabs/impl/TabDataRenderer.java", "diffHunk": "@@ -248,8 +255,10 @@ public void paint( Graphics g ) {\n             }\n \n             // paint tab decorators\n-            for( TabDecorator td : decorators ) {\n-                td.paintAfter( tabData, g, rect, isSelected );\n+            if (!isHover) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba433f6528c50c65de292d533a738a84e6623622"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg2NTk1Mg==", "bodyText": "Don't you need to set these before calling repaint? The repaint typically ends up being scheduled for later, but it's cleaner to not assume this.", "url": "https://github.com/apache/netbeans/pull/2051#discussion_r399865952", "createdAt": "2020-03-29T22:52:28Z", "author": {"login": "eirikbakke"}, "path": "platform/core.multitabs/src/org/netbeans/core/multitabs/impl/TabTableUI.java", "diffHunk": "@@ -173,6 +193,28 @@ public void mouseDragged( MouseEvent e ) {\n             @Override\n             public void mouseMoved( MouseEvent e ) {\n                 orig.mouseMoved( e );\n+\n+                if (hoverSupport) {\n+                    Point p = e.getPoint();\n+                    int row = table.rowAtPoint( p );\n+                    int column = table.columnAtPoint( p );\n+                    setHover(row, column);\n+                }\n+            }\n+\n+            private void setHover( int row, int column ) {\n+                if (row == hoverRow && column == hoverColumn) {\n+                    return;\n+                }\n+\n+                if (hoverRow != -1 && hoverColumn != -1) {\n+                    table.repaint(table.getCellRect(hoverRow, hoverColumn, true));\n+                }\n+                if (row != -1 && column != -1) {\n+                    table.repaint(table.getCellRect(row, column, true));\n+                }\n+                hoverRow = row;\n+                hoverColumn = column;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba433f6528c50c65de292d533a738a84e6623622"}, "originalPosition": 82}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9702e81c8ac9f15f59075356693b1d32535f5964", "author": {"user": {"login": "DevCharly", "name": "Karl T"}}, "url": "https://github.com/apache/netbeans/commit/9702e81c8ac9f15f59075356693b1d32535f5964", "committedDate": "2020-03-30T21:17:00Z", "message": "TabDataRenderer: invoke TabDecorator.paintAfter() also on hover"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "46cbe760eb404cb26271d28c596d22a936bcacec", "author": {"user": {"login": "DevCharly", "name": "Karl T"}}, "url": "https://github.com/apache/netbeans/commit/46cbe760eb404cb26271d28c596d22a936bcacec", "committedDate": "2020-03-30T21:12:18Z", "message": "TabDataRenderer: invoke TabDecorator.paintAfter() also on hover"}, "afterCommit": {"oid": "9702e81c8ac9f15f59075356693b1d32535f5964", "author": {"user": {"login": "DevCharly", "name": "Karl T"}}, "url": "https://github.com/apache/netbeans/commit/9702e81c8ac9f15f59075356693b1d32535f5964", "committedDate": "2020-03-30T21:17:00Z", "message": "TabDataRenderer: invoke TabDecorator.paintAfter() also on hover"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1e7fef2c9359d05c56b4dd8abe1ac70fdf47865", "author": {"user": {"login": "DevCharly", "name": "Karl T"}}, "url": "https://github.com/apache/netbeans/commit/b1e7fef2c9359d05c56b4dd8abe1ac70fdf47865", "committedDate": "2020-04-01T23:22:56Z", "message": "TabTableUI: set fields with current hover row/column before repainting"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 97, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}