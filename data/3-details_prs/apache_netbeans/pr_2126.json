{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyNTE5MjUy", "number": 2126, "title": "[NETBEANS-4299] find endPos for synthetic annotation attribute", "bodyText": "Fixes 12.0 regression from 11.3. (might be nb-javac to jdk14 issue)\nThis fixes \"Use @NbBundle.messages\" adding a message to\n@Messages(\"OptionsCategory_Name_OptionsPlayHack=any old\")\n\nand also adding a message to\n@Messages({\"OptionsCategory_Name_OptionsPlayHack=any old\", \"OptionsCategory_Keywords_OptionsPlayHack=keyw1\"})\n\nNot sure it's the best fix, it seems safe; needs review.\nQuestions about the fix:\n\nI don't understand getKind() vs instanceof (if/when it matters)\nNot sure if this check fully qualifies \"assignment as annotation\", but don't think that matters.", "createdAt": "2020-05-02T22:55:06Z", "url": "https://github.com/apache/netbeans/pull/2126", "merged": true, "mergeCommit": {"oid": "a3725378f2d9d71b7825370bc8ba93f2a9745d37"}, "closed": true, "closedAt": "2020-05-07T10:55:26Z", "author": {"login": "errael"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcdeBqLgH2gAyNDEyNTE5MjUyOmMxMGEwZWU3ZGQzNjJlOGIxNzQwZDJjNWU4YWI3NWY3Yzg5ZDdjYWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcdjqLbAFqTQwNDU4MTkwMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c10a0ee7dd362e8b1740d2c5e8ab75f7c89d7caa", "author": {"user": {"login": "errael", "name": "errael"}}, "url": "https://github.com/apache/netbeans/commit/c10a0ee7dd362e8b1740d2c5e8ab75f7c89d7caa", "committedDate": "2020-05-02T22:28:51Z", "message": "[NETBEANS-4299] find endPos for synthetic annotation attribute"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NTgxOTAy", "url": "https://github.com/apache/netbeans/pull/2126#pullrequestreview-404581902", "createdAt": "2020-05-03T05:01:28Z", "commit": {"oid": "1c05253fa6c7c68d274627aee93a8d21d998316e"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QwNTowMToyOFrOGPoqCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wM1QwNTowMToyOFrOGPoqCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTA0Nzk0Ng==", "bodyText": "I think the \"&& ... instanceof MethodSymbol\" is probably unnecessary.", "url": "https://github.com/apache/netbeans/pull/2126#discussion_r419047946", "createdAt": "2020-05-03T05:01:28Z", "author": {"login": "jlahoda"}, "path": "java/java.source.base/src/org/netbeans/modules/java/source/save/CasualDiff.java", "diffHunk": "@@ -535,8 +535,18 @@ public int endPos(JCTree t) {\n             VariableTree vt = fgt.getVariables().get(fgt.getVariables().size() - 1);\n             return TreeInfo.getEndPos((JCTree)vt, oldTopLevel.endPositions);\n         }\n-        return TreeInfo.getEndPos(t, oldTopLevel.endPositions);\n+        int endPos = TreeInfo.getEndPos(t, oldTopLevel.endPositions);\n+\n+        // [NETBEANS-4299], catch a synthetic annotation attribute and try rhs\n+        if (endPos == Position.NOPOS && t instanceof JCAssign) {\n+            JCAssign assign = (JCAssign)t;\n+            if (assign.lhs instanceof JCIdent\n+                    && ((JCIdent)assign.lhs).sym instanceof Symbol.MethodSymbol) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c05253fa6c7c68d274627aee93a8d21d998316e"}, "originalPosition": 11}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4969, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}