{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkwMTgxNDA5", "number": 1513, "title": "Enable customization of gRPC channel from Axon Framework application", "bodyText": "Resolves #1504", "createdAt": "2020-09-21T10:04:22Z", "url": "https://github.com/AxonFramework/AxonFramework/pull/1513", "merged": true, "mergeCommit": {"oid": "48e79d79e75d5a1a8f182b28c37b26c1af592fd5"}, "closed": true, "closedAt": "2020-09-22T13:20:51Z", "author": {"login": "MGathier"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLAbtUAH2gAyNDkwMTgxNDA5OjY1NjkzMjJjMmU0YzE1M2VjZmQ0YzI3Yjc4YWE3MTRkY2RiYjNiOTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLXl7ngH2gAyNDkwMTgxNDA5OjAyNjljMzIwZjhiYjUzMmE2NDRkYjM5NTAyMjVkYzUyMjE2OWI3Zjk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6569322c2e4c153ecfd4c27b78aa714dcdbb3b92", "author": {"user": {"login": "MGathier", "name": "Marc Gathier"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/6569322c2e4c153ecfd4c27b78aa714dcdbb3b92", "committedDate": "2020-09-21T10:00:40Z", "message": "Allow further customization of managed channel to Axon Server through configuration of a ManagedChannelCustomizer."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9054a421fe24fd33ef4a75fea4702fceeeb0429f", "author": {"user": {"login": "MGathier", "name": "Marc Gathier"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/9054a421fe24fd33ef4a75fea4702fceeeb0429f", "committedDate": "2020-09-21T10:02:46Z", "message": "renamed operation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyNDQ4OTI0", "url": "https://github.com/AxonFramework/AxonFramework/pull/1513#pullrequestreview-492448924", "createdAt": "2020-09-21T10:08:44Z", "commit": {"oid": "9054a421fe24fd33ef4a75fea4702fceeeb0429f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMDowODo0NVrOHVI5uw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxMDoxMDoxMFrOHVI8wA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTkyNzk5NQ==", "bodyText": "Can we add a test that such a channelCustomization is actually invoked upon creation of the AxonServerConnectionManager?", "url": "https://github.com/AxonFramework/AxonFramework/pull/1513#discussion_r491927995", "createdAt": "2020-09-21T10:08:45Z", "author": {"login": "smcvb"}, "path": "axon-server-connector/src/main/java/org/axonframework/axonserver/connector/AxonServerConnectionManager.java", "diffHunk": "@@ -186,6 +189,21 @@ public Builder tagsConfiguration(TagsConfiguration tagsConfiguration) {\n             return this;\n         }\n \n+        /**\n+         * Registers the given {@code channelCustomization}, which configures the underling {@link ManagedChannelBuilder} used\n+         * to set up connections to AxonServer.\n+         * <p>\n+         * This method may be used in case none of the operations on this Builder provide support for the required\n+         * feature.\n+         *\n+         * @param channelCustomization A function defining the customization to make on the ManagedChannelBuilder\n+         * @return this builder for further configuration\n+         */\n+        public Builder channelCustomizer(UnaryOperator<ManagedChannelBuilder<?>> channelCustomization) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9054a421fe24fd33ef4a75fea4702fceeeb0429f"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTkyODI2Nw==", "bodyText": "Curious: would you need to add @FunctionalInterface on this level too or is that taken over from the UnaryOperator automatically?", "url": "https://github.com/AxonFramework/AxonFramework/pull/1513#discussion_r491928267", "createdAt": "2020-09-21T10:09:17Z", "author": {"login": "smcvb"}, "path": "axon-server-connector/src/main/java/org/axonframework/axonserver/connector/ManagedChannelCustomizer.java", "diffHunk": "@@ -0,0 +1,21 @@\n+package org.axonframework.axonserver.connector;\n+\n+import io.grpc.ManagedChannelBuilder;\n+import java.util.function.UnaryOperator;\n+\n+/**\n+ * Customizer to add more customizations to a managed channel to Axon Server.\n+ *\n+ * @author Marc Gathier\n+ * @since 4.4.3\n+ */\n+public interface ManagedChannelCustomizer extends UnaryOperator<ManagedChannelBuilder<?>> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9054a421fe24fd33ef4a75fea4702fceeeb0429f"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTkyODc2OA==", "bodyText": "This addition serves a simple additional verification in the AxonServerAutoConfigurationTest I think.", "url": "https://github.com/AxonFramework/AxonFramework/pull/1513#discussion_r491928768", "createdAt": "2020-09-21T10:10:10Z", "author": {"login": "smcvb"}, "path": "spring-boot-autoconfigure/src/main/java/org/axonframework/springboot/autoconfig/AxonServerAutoConfiguration.java", "diffHunk": "@@ -90,12 +91,20 @@ private String clientName(String id) {\n         return id;\n     }\n \n+    @Bean\n+    @ConditionalOnMissingBean\n+    public ManagedChannelCustomizer managedChannelCustomizer() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9054a421fe24fd33ef4a75fea4702fceeeb0429f"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ce25ec617b38456b8e22f916caabcd7afb4698f", "author": {"user": {"login": "MGathier", "name": "Marc Gathier"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/0ce25ec617b38456b8e22f916caabcd7afb4698f", "committedDate": "2020-09-21T11:07:22Z", "message": "added testcases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "550f7a1839aaa6a509ea292e620b5d1f902b1d9d", "author": {"user": {"login": "MGathier", "name": "Marc Gathier"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/550f7a1839aaa6a509ea292e620b5d1f902b1d9d", "committedDate": "2020-09-21T11:18:11Z", "message": "added testcases"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyNDk4NjE5", "url": "https://github.com/AxonFramework/AxonFramework/pull/1513#pullrequestreview-492498619", "createdAt": "2020-09-21T11:23:58Z", "commit": {"oid": "550f7a1839aaa6a509ea292e620b5d1f902b1d9d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9abfc52947c881edfa8624c06791a4876d83daf7", "author": {"user": {"login": "smcvb", "name": "Steven van Beelen"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/9abfc52947c881edfa8624c06791a4876d83daf7", "committedDate": "2020-09-22T12:57:34Z", "message": "Merge remote-tracking branch 'origin/axon-4.4.x' into feature/1504\n\n# Conflicts:\n#\taxon-server-connector/src/test/java/org/axonframework/axonserver/connector/AxonServerConnectionManagerTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0269c320f8bb532a644db3950225dc522169b7f9", "author": {"user": {"login": "smcvb", "name": "Steven van Beelen"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/0269c320f8bb532a644db3950225dc522169b7f9", "committedDate": "2020-09-22T12:59:39Z", "message": "Fix merge issues\n\nFix merge issues with 4.4.x\n\n#1504"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1790, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}