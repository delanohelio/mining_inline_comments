{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxNzIxMTcy", "number": 1624, "title": "Migrate to 3.4.0 Reactor version", "bodyText": "-Migrate to 3.4.0 Reactor version\n-Replace deprecated Emitter Processor usage with new Sinks.Many API\n-Mark Backpressure strategy deprecated and all methods that used this class\nBraking changes:  As the behavior or of the now deprecated Emitter Processor has changed, there is no way to avoid possible breaking change for anyone that is using SubscriptionQueryBackpressure.ERROR.\nDefault strategy now is onBackpressureLatest()\nWhoever relied on to get an error on buffer overflow can set on backpressure strategy directly on updates method\nresult.updates().onBackpressureBuffer(100)\nas demonstrated in AbstractSubscriptionQueryTestSuite:testOnBackpressureError", "createdAt": "2020-12-03T11:48:51Z", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624", "merged": true, "mergeCommit": {"oid": "e79f068aa6ae5a1903154ac633cfddff104ea009"}, "closed": true, "closedAt": "2021-01-19T19:12:57Z", "author": {"login": "stefanvozd"}, "timelineItems": {"totalCount": 31, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdihrO8gH2gAyNTMxNzIxMTcyOjNhNmZlMGViMmUyZDEzYTc2MmFkOTI1MDdlMWFlMDg5YjU5MGM2ZTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdxuKfcgH2gAyNTMxNzIxMTcyOmI4YWI2Zjg4N2RhMzA1MmQxMDg4ZTNkYjdiNjk2N2YyNGYwZDRlMGY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3a6fe0eb2e2d13a762ad92507e1ae089b590c6e0", "author": {"user": {"login": "stefanvozd", "name": "Stefan Dragisic"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/3a6fe0eb2e2d13a762ad92507e1ae089b590c6e0", "committedDate": "2020-12-03T11:44:45Z", "message": "-Migrate to 3.4.0 Reactor version\n-Replace deprecated Emitter Processor usage with new Sinks API\n-Mark Backpressure strategy deprecated and all methods that used this class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "518045b4e111431143759eed4a23b668a503107e", "author": {"user": {"login": "stefanvozd", "name": "Stefan Dragisic"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/518045b4e111431143759eed4a23b668a503107e", "committedDate": "2020-12-03T12:26:25Z", "message": "Improve test to prove that default strategy is onBackpressureLatest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "722f92c26f65bd21eb779cda1e5b9562a2e3d017", "author": {"user": {"login": "stefanvozd", "name": "Stefan Dragisic"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/722f92c26f65bd21eb779cda1e5b9562a2e3d017", "committedDate": "2020-12-03T14:58:55Z", "message": "Fix falling test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0NzM1OTQx", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#pullrequestreview-544735941", "createdAt": "2020-12-04T08:13:08Z", "commit": {"oid": "722f92c26f65bd21eb779cda1e5b9562a2e3d017"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwODoxMzowOFrOH_FdJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQwODo0MToyNlrOH_GaaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkxMTcxNw==", "bodyText": "The JavaDoc should reference why it's deprecated. In that line of documentation, it should refer to the method/approach which should be used instead of this function.", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r535911717", "createdAt": "2020-12-04T08:13:08Z", "author": {"login": "smcvb"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/QueryBus.java", "diffHunk": "@@ -147,8 +146,39 @@\n      * @param <U>              the incremental response types of the query\n      * @return query result containing initial result and incremental updates\n      */\n+    @Deprecated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "722f92c26f65bd21eb779cda1e5b9562a2e3d017"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkxMjM3Nw==", "bodyText": "The JavaDoc should reference why it's deprecated. In that line of documentation, it should refer to the method/approach which should be used instead of this function.", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r535912377", "createdAt": "2020-12-04T08:14:13Z", "author": {"login": "smcvb"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/QueryGateway.java", "diffHunk": "@@ -240,6 +238,7 @@\n      * @see QueryBus#subscriptionQuery(SubscriptionQueryMessage)\n      * @see QueryBus#subscriptionQuery(SubscriptionQueryMessage, SubscriptionQueryBackpressure, int)\n      */\n+    @Deprecated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "722f92c26f65bd21eb779cda1e5b9562a2e3d017"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkxMjU5OQ==", "bodyText": "The JavaDoc should reference why it's deprecated. In that line of documentation, it should refer to the method/approach which should be used instead of this function.", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r535912599", "createdAt": "2020-12-04T08:14:35Z", "author": {"login": "smcvb"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/QueryGateway.java", "diffHunk": "@@ -275,9 +303,37 @@\n      * @see QueryBus#subscriptionQuery(SubscriptionQueryMessage)\n      * @see QueryBus#subscriptionQuery(SubscriptionQueryMessage, SubscriptionQueryBackpressure, int)\n      */\n+    @Deprecated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "722f92c26f65bd21eb779cda1e5b9562a2e3d017"}, "originalPosition": 99}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkxMjcyMQ==", "bodyText": "The JavaDoc should reference why it's deprecated. In that line of documentation, it should refer to the method/approach which should be used instead of this function.", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r535912721", "createdAt": "2020-12-04T08:14:52Z", "author": {"login": "smcvb"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/QueryUpdateEmitter.java", "diffHunk": "@@ -162,10 +162,24 @@\n      * @param <U>              the incremental response types of the query\n      * @return the object which contains updates and a registration which can be used to cancel them\n      */\n+    @Deprecated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "722f92c26f65bd21eb779cda1e5b9562a2e3d017"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkxMzA3NA==", "bodyText": "backpressure is no longer present in this method, so should be removed from the Javadoc too.", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r535913074", "createdAt": "2020-12-04T08:15:36Z", "author": {"login": "smcvb"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/QueryUpdateEmitter.java", "diffHunk": "@@ -162,10 +162,24 @@\n      * @param <U>              the incremental response types of the query\n      * @return the object which contains updates and a registration which can be used to cancel them\n      */\n+    @Deprecated\n     <U> UpdateHandlerRegistration<U> registerUpdateHandler(SubscriptionQueryMessage<?, ?, ?> query,\n                                                            SubscriptionQueryBackpressure backpressure,\n                                                            int updateBufferSize);\n \n+    /**\n+     * Registers an Update Handler for given {@code query} with given {@code backpressure} and {@code", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "722f92c26f65bd21eb779cda1e5b9562a2e3d017"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkxMzQzOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * <b>Note</b>: Any {@code null} results, on the initial result or the updates, wil lbe filtered out by the\n          \n          \n            \n                 * <b>Note</b>: Any {@code null} results, on the initial result or the updates, will be filtered out by the", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r535913439", "createdAt": "2020-12-04T08:16:20Z", "author": {"login": "smcvb"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/QueryGateway.java", "diffHunk": "@@ -248,10 +247,39 @@\n                                  query,\n                                  initialResponseType,\n                                  updateResponseType,\n-                                 backpressure,\n                                  Queues.SMALL_BUFFER_SIZE);\n     }\n \n+    /**\n+     * Sends given {@code query} over the {@link QueryBus} and returns result containing initial response and\n+     * incremental updates (received at the moment the query is sent, until it is cancelled by the caller or closed by\n+     * the emitting side).\n+     * <p>\n+     * <b>Note</b>: Any {@code null} results, on the initial result or the updates, wil lbe filtered out by the", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "722f92c26f65bd21eb779cda1e5b9562a2e3d017"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkxMzgwMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @param updateBufferSize    The size of buffer which accumulates updates before subscription to the {@code} flux\n          \n          \n            \n                 * @param updateBufferSize    The size of buffer which accumulates updates before subscription to the flux", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r535913801", "createdAt": "2020-12-04T08:16:59Z", "author": {"login": "smcvb"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/QueryGateway.java", "diffHunk": "@@ -275,9 +303,37 @@\n      * @see QueryBus#subscriptionQuery(SubscriptionQueryMessage)\n      * @see QueryBus#subscriptionQuery(SubscriptionQueryMessage, SubscriptionQueryBackpressure, int)\n      */\n+    @Deprecated\n     <Q, I, U> SubscriptionQueryResult<I, U> subscriptionQuery(String queryName, Q query,\n                                                               ResponseType<I> initialResponseType,\n                                                               ResponseType<U> updateResponseType,\n                                                               SubscriptionQueryBackpressure backpressure,\n                                                               int updateBufferSize);\n+\n+    /**\n+     * Sends given {@code query} over the {@link QueryBus} and returns result containing initial response and\n+     * incremental updates (received at the moment the query is sent, until it is cancelled by the caller or closed by\n+     * the emitting side).\n+     * <p>\n+     * <b>Note</b>: Any {@code null} results, on the initial result or the updates, wil lbe filtered out by the\n+     * QueryGateway. If you require the {@code null} to be returned for the initial and update results, we suggest using\n+     * the {@link QueryBus} instead.\n+     *\n+     * @param queryName           A {@link String} describing query to be executed\n+     * @param query               The {@code query} to be sent\n+     * @param initialResponseType The initial response type used for this query\n+     * @param updateResponseType  The update response type used for this query\n+     * @param updateBufferSize    The size of buffer which accumulates updates before subscription to the {@code} flux", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "722f92c26f65bd21eb779cda1e5b9562a2e3d017"}, "originalPosition": 119}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkxNDU1MA==", "bodyText": "Think we can remove some of the paragraph markers here.", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r535914550", "createdAt": "2020-12-04T08:18:25Z", "author": {"login": "smcvb"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/QueryBus.java", "diffHunk": "@@ -147,8 +146,39 @@\n      * @param <U>              the incremental response types of the query\n      * @return query result containing initial result and incremental updates\n      */\n+    @Deprecated\n     default <Q, I, U> SubscriptionQueryResult<QueryResponseMessage<I>, SubscriptionQueryUpdateMessage<U>> subscriptionQuery(\n             SubscriptionQueryMessage<Q, I, U> query, SubscriptionQueryBackpressure backpressure, int updateBufferSize) {\n+        return subscriptionQuery(query,updateBufferSize);\n+    }\n+\n+    /**\n+     * Dispatch the given {@code query} to a single QueryHandler subscribed to the given {@code query}'s\n+     * queryName/initialResponseType/updateResponseType. The result is lazily created and there will be no execution of\n+     * the query handler before there is a subscription to the initial result. In order not to miss updates, the query\n+     * bus will queue all updates which happen after the subscription query is done and once the subscription to the\n+     * flux is made, these updates will be emitted.\n+     * <p>\n+     * If there is an error during retrieving or consuming initial result, stream for incremental updates is NOT\n+     * interrupted.\n+     * </p>\n+     * <p>\n+     * If there is an error during emitting an update, subscription is cancelled causing further emits not reaching the\n+     * destination.\n+     * </p>\n+     * <p>\n+     * </p>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "722f92c26f65bd21eb779cda1e5b9562a2e3d017"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkxNTM5Nw==", "bodyText": "From these changes, I am guessing you might not have set the style guide present in this project. Would you mind using the axon_code_style.xml file and set it as the style for this project?", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r535915397", "createdAt": "2020-12-04T08:19:56Z", "author": {"login": "smcvb"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/SimpleQueryBus.java", "diffHunk": "@@ -229,17 +236,17 @@ private boolean unsubscribe(String queryName,\n                 .thenAccept(monoSink::success)\n                 .exceptionally(t -> {\n                     logger.error(format(\"An error happened while trying to report an initial result. Query: %s\", query),\n-                                 t);\n+                            t);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "722f92c26f65bd21eb779cda1e5b9562a2e3d017"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkxNTYxNQ==", "bodyText": "Similarly assuming that this indentation will be changed back if the style guide is being used.", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r535915615", "createdAt": "2020-12-04T08:20:21Z", "author": {"login": "smcvb"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/SimpleQueryBus.java", "diffHunk": "@@ -229,17 +236,17 @@ private boolean unsubscribe(String queryName,\n                 .thenAccept(monoSink::success)\n                 .exceptionally(t -> {\n                     logger.error(format(\"An error happened while trying to report an initial result. Query: %s\", query),\n-                                 t);\n+                            t);\n                     monoSink.error(t.getCause());\n                     return null;\n                 }));\n \n         UpdateHandlerRegistration<U> updateHandlerRegistration = queryUpdateEmitter\n-                .registerUpdateHandler(query, backpressure, updateBufferSize);\n+                .registerUpdateHandler(query, updateBufferSize);\n \n         return new DefaultSubscriptionQueryResult<>(initialResult.getMono(),\n-                                                    updateHandlerRegistration.getUpdates(),\n-                                                    updateHandlerRegistration.getRegistration());\n+                updateHandlerRegistration.getUpdates(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "722f92c26f65bd21eb779cda1e5b9562a2e3d017"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkxNjUwNg==", "bodyText": "The JavaDoc should describe why something is deprecated and what it has been replaced for, if by any. Please add that to the class level here.", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r535916506", "createdAt": "2020-12-04T08:21:56Z", "author": {"login": "smcvb"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/SubscriptionQueryBackpressure.java", "diffHunk": "@@ -25,6 +25,7 @@\n  * @author Milan Savic\n  * @since 3.3\n  */\n+@Deprecated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "722f92c26f65bd21eb779cda1e5b9562a2e3d017"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkxNzIyMA==", "bodyText": "Guessing that after setting the axon_code_style.xml, these changes would be reverted.", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r535917220", "createdAt": "2020-12-04T08:23:21Z", "author": {"login": "smcvb"}, "path": "axon-server-connector/src/main/java/org/axonframework/axonserver/connector/query/AxonServerQueryBus.java", "diffHunk": "@@ -326,13 +333,13 @@ public void handle(QueryRequest query,\n \n         io.axoniq.axonserver.connector.query.SubscriptionQueryResult result =\n                 axonServerConnectionManager.getConnection(targetContext)\n-                                           .queryChannel()\n-                                           .subscriptionQuery(\n-                                                   subscriptionSerializer.serializeQuery(interceptedQuery),\n-                                                   subscriptionSerializer.serializeUpdateType(interceptedQuery),\n-                                                   configuration.getQueryFlowControl().getInitialNrOfPermits(),\n-                                                   configuration.getQueryFlowControl().getNrOfNewPermits()\n-                                           );\n+                        .queryChannel()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "722f92c26f65bd21eb779cda1e5b9562a2e3d017"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkxNzI5OA==", "bodyText": "Guessing that after setting the axon_code_style.xml, these changes would be reverted.", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r535917298", "createdAt": "2020-12-04T08:23:32Z", "author": {"login": "smcvb"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/DefaultQueryGateway.java", "diffHunk": "@@ -104,27 +104,37 @@ public static Builder builder() {\n                        .map(QueryResponseMessage::getPayload);\n     }\n \n+    @Deprecated\n     @Override\n     public <Q, I, U> SubscriptionQueryResult<I, U> subscriptionQuery(String queryName,\n                                                                      Q query,\n                                                                      ResponseType<I> initialResponseType,\n                                                                      ResponseType<U> updateResponseType,\n                                                                      SubscriptionQueryBackpressure backpressure,\n                                                                      int updateBufferSize) {\n+       return subscriptionQuery(queryName,query,initialResponseType,updateResponseType,updateBufferSize);\n+    }\n+\n+    @Override\n+    public <Q, I, U> SubscriptionQueryResult<I, U> subscriptionQuery(String queryName,\n+                                                                     Q query,\n+                                                                     ResponseType<I> initialResponseType,\n+                                                                     ResponseType<U> updateResponseType,\n+                                                                     int updateBufferSize) {\n         SubscriptionQueryMessage<?, I, U> subscriptionQueryMessage = new GenericSubscriptionQueryMessage<>(\n                 asMessage(query), queryName, initialResponseType, updateResponseType\n         );\n         SubscriptionQueryMessage<?, I, U> interceptedQuery = processInterceptors(subscriptionQueryMessage);\n         SubscriptionQueryResult<QueryResponseMessage<I>, SubscriptionQueryUpdateMessage<U>> result =\n-                queryBus.subscriptionQuery(interceptedQuery, backpressure, updateBufferSize);\n+                queryBus.subscriptionQuery(interceptedQuery, updateBufferSize);\n         return new DefaultSubscriptionQueryResult<>(\n                 result.initialResult()\n-                      .filter(initialResult -> Objects.nonNull(initialResult.getPayload()))\n-                      .map(Message::getPayload)\n-                      .onErrorMap(e -> e instanceof IllegalPayloadAccessException ? e.getCause() : e),\n+                        .filter(initialResult -> Objects.nonNull(initialResult.getPayload()))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "722f92c26f65bd21eb779cda1e5b9562a2e3d017"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkxODYzNg==", "bodyText": "Guessing that after setting the axon_code_style.xml, these changes would be reverted.", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r535918636", "createdAt": "2020-12-04T08:25:58Z", "author": {"login": "smcvb"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/SimpleQueryUpdateEmitter.java", "diffHunk": "@@ -105,7 +118,7 @@ public boolean queryUpdateHandlerRegistered(SubscriptionQueryMessage<?, ?, ?> qu\n         };\n \n         return new UpdateHandlerRegistration<>(registration,\n-                                               processor.replay(updateBufferSize).autoConnect());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "722f92c26f65bd21eb779cda1e5b9562a2e3d017"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkyNTUyMA==", "bodyText": "Nit: I would even rename the class and parameter here. It's all package-private, so free game to more closely resemble what's being wrapped.", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r535925520", "createdAt": "2020-12-04T08:38:11Z", "author": {"login": "smcvb"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/FluxSinkWrapper.java", "diffHunk": "@@ -18,59 +18,53 @@\n \n import reactor.core.Disposable;\n import reactor.core.publisher.FluxSink;\n+import reactor.core.publisher.Sinks;\n \n /**\n- * Wrapper around {@link FluxSink}. Since project-reactor is not a required dependency in this Axon version, we need\n+ * Wrapper around {@link Sinks.Many}. Since project-reactor is not a required dependency in this Axon version, we need\n  * wrappers for backwards compatibility. As soon as dependency is no longer optional, this wrapper should be removed.\n  *\n  * @param <T> The value type\n  * @author Milan Savic\n+ * @author Stefan Dragisic\n  * @since 3.3\n  */\n class FluxSinkWrapper<T> {\n \n-    private final FluxSink<T> fluxSink;\n+    private final Sinks.Many<T> fluxSink;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "722f92c26f65bd21eb779cda1e5b9562a2e3d017"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTkyNzQwMA==", "bodyText": "Did the documentation of Project Reactor state that FluxSink#next should be replaced by Sinks.Many#tryEmitNext()#orThrow()? Specifically, the orThrow() invocation should be validated, as we'd otherwise be changing behaviour.", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r535927400", "createdAt": "2020-12-04T08:41:26Z", "author": {"login": "smcvb"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/FluxSinkWrapper.java", "diffHunk": "@@ -18,59 +18,53 @@\n \n import reactor.core.Disposable;\n import reactor.core.publisher.FluxSink;\n+import reactor.core.publisher.Sinks;\n \n /**\n- * Wrapper around {@link FluxSink}. Since project-reactor is not a required dependency in this Axon version, we need\n+ * Wrapper around {@link Sinks.Many}. Since project-reactor is not a required dependency in this Axon version, we need\n  * wrappers for backwards compatibility. As soon as dependency is no longer optional, this wrapper should be removed.\n  *\n  * @param <T> The value type\n  * @author Milan Savic\n+ * @author Stefan Dragisic\n  * @since 3.3\n  */\n class FluxSinkWrapper<T> {\n \n-    private final FluxSink<T> fluxSink;\n+    private final Sinks.Many<T> fluxSink;\n \n     /**\n      * Initializes this wrapper with delegate sink.\n      *\n      * @param fluxSink Delegate sink\n      */\n-    FluxSinkWrapper(FluxSink<T> fluxSink) {\n+    FluxSinkWrapper(Sinks.Many<T> fluxSink) {\n         this.fluxSink = fluxSink;\n     }\n \n     /**\n      * Wrapper around {@link FluxSink#complete()}.\n      */\n     public void complete() {\n-        fluxSink.complete();\n+        fluxSink.tryEmitComplete();\n     }\n \n     /**\n-     * Wrapper around {@link FluxSink#next(Object)}.\n+     * Wrapper around {@link Sinks.Many#tryEmitNext(Object)}\n      *\n      * @param value to be passed to the delegate sink\n      */\n     public void next(T value) {\n-        fluxSink.next(value);\n+        fluxSink.tryEmitNext(value).orThrow();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "722f92c26f65bd21eb779cda1e5b9562a2e3d017"}, "originalPosition": 47}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4f648207e57aa72af368145aacd09367fce6bd5", "author": {"user": {"login": "stefanvozd", "name": "Stefan Dragisic"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/a4f648207e57aa72af368145aacd09367fce6bd5", "committedDate": "2020-12-07T15:09:45Z", "message": "Update messaging/src/main/java/org/axonframework/queryhandling/QueryGateway.java\n\nCo-authored-by: Steven van Beelen <steven.vanbeelen@axoniq.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d04d58f14231f60a27d16950b91280f3e21d316d", "author": {"user": {"login": "stefanvozd", "name": "Stefan Dragisic"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/d04d58f14231f60a27d16950b91280f3e21d316d", "committedDate": "2020-12-07T15:55:27Z", "message": "Update messaging/src/main/java/org/axonframework/queryhandling/QueryGateway.java\n\nCo-authored-by: Steven van Beelen <steven.vanbeelen@axoniq.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "30ddd14440422ca8dd4827f85c46fc952cf6c45e", "author": {"user": {"login": "stefanvozd", "name": "Stefan Dragisic"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/30ddd14440422ca8dd4827f85c46fc952cf6c45e", "committedDate": "2020-12-07T17:48:44Z", "message": "Address PR comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9c088d9db1bfdcc80fe788d8ba975ef9cbe1352", "author": {"user": {"login": "stefanvozd", "name": "Stefan Dragisic"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/f9c088d9db1bfdcc80fe788d8ba975ef9cbe1352", "committedDate": "2020-12-07T17:49:09Z", "message": "Merge branch 'feature/upgrade-reactor-version' of github.com:AxonFramework/AxonFramework into feature/upgrade-reactor-version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "679e00762928d45c26fe0cbdc10b679632cf733b", "author": {"user": {"login": "stefanvozd", "name": "Stefan Dragisic"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/679e00762928d45c26fe0cbdc10b679632cf733b", "committedDate": "2020-12-08T15:34:44Z", "message": "Update Reactor to 3.4.1"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4OTY3ODI5", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#pullrequestreview-548967829", "createdAt": "2020-12-10T08:49:16Z", "commit": {"oid": "679e00762928d45c26fe0cbdc10b679632cf733b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwODo0OToxNlrOIC95SQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwODo0OToxNlrOIC95SQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk4MjE1Mw==", "bodyText": "This change is not backwards compatible. With deprecated method an error was expected. Right now, execution is successful. We should support new and old version of API fully.", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r539982153", "createdAt": "2020-12-10T08:49:16Z", "author": {"login": "m1l4n54v1c"}, "path": "integrationtests/src/test/java/org/axonframework/integrationtests/queryhandling/AbstractSubscriptionQueryTestSuite.java", "diffHunk": "@@ -532,21 +517,61 @@ void testBufferOverflow() {\n \n         SubscriptionQueryResult<QueryResponseMessage<List<String>>, SubscriptionQueryUpdateMessage<String>> result =\n                 queryBus.subscriptionQuery(queryMessage,\n-                                           new SubscriptionQueryBackpressure(FluxSink.OverflowStrategy.ERROR),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "679e00762928d45c26fe0cbdc10b679632cf733b"}, "originalPosition": 70}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd0ddde6e858927aa9e0ab1e4f88315976b827b2", "author": {"user": {"login": "stefanvozd", "name": "Stefan Dragisic"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/fd0ddde6e858927aa9e0ab1e4f88315976b827b2", "committedDate": "2020-12-15T10:01:54Z", "message": "Revert braking changes, leave previous backpressure code and fix errors"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyMzgyNTY3", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#pullrequestreview-552382567", "createdAt": "2020-12-15T12:05:01Z", "commit": {"oid": "fd0ddde6e858927aa9e0ab1e4f88315976b827b2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxMjoxNjo0M1rOIGIAZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxMjoyNjozN1rOIGIYEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzI5MzU0MQ==", "bodyText": "This recursive invocation never ends.", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r543293541", "createdAt": "2020-12-15T12:16:43Z", "author": {"login": "m1l4n54v1c"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/DefaultQueryGateway.java", "diffHunk": "@@ -104,19 +104,32 @@ public static Builder builder() {\n                        .map(QueryResponseMessage::getPayload);\n     }\n \n+    /**\n+     * @deprecated in through use of the {{@link #subscriptionQuery(String, Object, ResponseType, ResponseType, int)}}\n+     */\n+    @Deprecated\n     @Override\n     public <Q, I, U> SubscriptionQueryResult<I, U> subscriptionQuery(String queryName,\n                                                                      Q query,\n                                                                      ResponseType<I> initialResponseType,\n                                                                      ResponseType<U> updateResponseType,\n                                                                      SubscriptionQueryBackpressure backpressure,\n                                                                      int updateBufferSize) {\n+        return subscriptionQuery(queryName, query, initialResponseType, updateResponseType, backpressure, updateBufferSize);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd0ddde6e858927aa9e0ab1e4f88315976b827b2"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzI5MzkwNw==", "bodyText": "This recursive invocation never ends.", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r543293907", "createdAt": "2020-12-15T12:17:17Z", "author": {"login": "m1l4n54v1c"}, "path": "axon-server-connector/src/main/java/org/axonframework/axonserver/connector/query/AxonServerQueryBus.java", "diffHunk": "@@ -308,11 +306,23 @@ public void handle(QueryRequest query,\n         }\n     }\n \n+    /**\n+     * @deprecated in through use of {{@link #subscriptionQuery(SubscriptionQueryMessage,int)}}\n+     */\n+    @Deprecated\n     @Override\n     public <Q, I, U> SubscriptionQueryResult<QueryResponseMessage<I>, SubscriptionQueryUpdateMessage<U>> subscriptionQuery(\n             SubscriptionQueryMessage<Q, I, U> query,\n             SubscriptionQueryBackpressure backPressure,\n             int updateBufferSize\n+    ) {\n+        return subscriptionQuery(query, backPressure, updateBufferSize);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd0ddde6e858927aa9e0ab1e4f88315976b827b2"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzI5NDI1Mw==", "bodyText": "Copy paste error?", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r543294253", "createdAt": "2020-12-15T12:17:48Z", "author": {"login": "m1l4n54v1c"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/SinksManyWrapper.java", "diffHunk": "@@ -0,0 +1,72 @@\n+/*\n+ * Copyright (c) 2010-2018. Axon Framework\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.axonframework.queryhandling;\n+\n+import reactor.core.Disposable;\n+import reactor.core.publisher.FluxSink;\n+import reactor.core.publisher.Sinks;\n+\n+/**\n+ * Wrapper around {@link Sinks.Many}. Since project-reactor is not a required dependency in this Axon version, we need\n+ * wrappers for backwards compatibility. As soon as dependency is no longer optional, this wrapper should be removed.\n+ *\n+ * @param <T> The value type\n+ * @author Stefan Dragisic\n+ * @since 3.3", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd0ddde6e858927aa9e0ab1e4f88315976b827b2"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzI5NTk2MQ==", "bodyText": "The underlying Sinks.Many.complete returns completion results. We should check on those and decide when cancelling the registration succeeds and when not.", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r543295961", "createdAt": "2020-12-15T12:20:38Z", "author": {"login": "m1l4n54v1c"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/SimpleQueryUpdateEmitter.java", "diffHunk": "@@ -108,6 +115,30 @@ public boolean queryUpdateHandlerRegistered(SubscriptionQueryMessage<?, ?, ?> qu\n                                                processor.replay(updateBufferSize).autoConnect());\n     }\n \n+    @Override\n+    public <U> UpdateHandlerRegistration<U> registerUpdateHandler(\n+            SubscriptionQueryMessage<?, ?, ?> query,\n+            int updateBufferSize) {\n+        Sinks.Many<SubscriptionQueryUpdateMessage<U>> sink = Sinks.many().replay().limit(updateBufferSize);\n+\n+        Runnable removeHandler = () -> updateHandlers.remove(query);\n+        Flux<SubscriptionQueryUpdateMessage<U>> updateMessageFlux = sink.asFlux()\n+                                                                        .doOnCancel(removeHandler)\n+                                                                        .doOnTerminate(removeHandler);\n+\n+        SinksManyWrapper<SubscriptionQueryUpdateMessage<U>> sinksManyWrapper = new SinksManyWrapper<>(sink);\n+\n+        updateHandlers.put(query, sinksManyWrapper);\n+\n+        Registration registration = () -> {\n+            sinksManyWrapper.complete();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd0ddde6e858927aa9e0ab1e4f88315976b827b2"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzI5ODA1OQ==", "bodyText": "Since the only difference between this and deprecated method is invocation on queryUpdateEmitter we could extract common parts into a private method and parameterize it with this specific invocation...", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r543298059", "createdAt": "2020-12-15T12:24:01Z", "author": {"login": "m1l4n54v1c"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/SimpleQueryBus.java", "diffHunk": "@@ -242,6 +246,31 @@ private boolean unsubscribe(String queryName,\n                                                     updateHandlerRegistration.getRegistration());\n     }\n \n+    public <Q, I, U> SubscriptionQueryResult<QueryResponseMessage<I>, SubscriptionQueryUpdateMessage<U>> subscriptionQuery(\n+            SubscriptionQueryMessage<Q, I, U> query,\n+            int updateBufferSize) {\n+\n+        if (queryUpdateEmitter.queryUpdateHandlerRegistered(query)) {\n+            throw new IllegalArgumentException(\"There is already a subscription with the given message identifier\");\n+        }\n+\n+        MonoWrapper<QueryResponseMessage<I>> initialResult = MonoWrapper.create(monoSink -> query(query)\n+                .thenAccept(monoSink::success)\n+                .exceptionally(t -> {\n+                    logger.error(format(\"An error happened while trying to report an initial result. Query: %s\", query),\n+                                 t);\n+                    monoSink.error(t.getCause());\n+                    return null;\n+                }));\n+\n+        UpdateHandlerRegistration<U> updateHandlerRegistration = queryUpdateEmitter\n+                .registerUpdateHandler(query, updateBufferSize);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd0ddde6e858927aa9e0ab1e4f88315976b827b2"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzI5ODQ2OQ==", "bodyText": "Missing actual purpose of this class and @since.", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r543298469", "createdAt": "2020-12-15T12:24:39Z", "author": {"login": "m1l4n54v1c"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/SinkWrapper.java", "diffHunk": "@@ -0,0 +1,28 @@\n+package org.axonframework.queryhandling;\n+\n+/**\n+ * @author Stefan Dragisic", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd0ddde6e858927aa9e0ab1e4f88315976b827b2"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzI5OTYwMA==", "bodyText": "We should add new tests for leave tests for deprecated methods until those methods are removed.", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r543299600", "createdAt": "2020-12-15T12:26:37Z", "author": {"login": "m1l4n54v1c"}, "path": "integrationtests/src/test/java/org/axonframework/integrationtests/queryhandling/AbstractSubscriptionQueryTestSuite.java", "diffHunk": "@@ -227,7 +215,6 @@ void testCompletingSubscriptionQueryExceptionally() {\n         // when\n         SubscriptionQueryResult<QueryResponseMessage<List<String>>, SubscriptionQueryUpdateMessage<String>> result =\n                 queryBus.subscriptionQuery(queryMessage,\n-                                           new SubscriptionQueryBackpressure(FluxSink.OverflowStrategy.IGNORE),\n                                            Queues.SMALL_BUFFER_SIZE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd0ddde6e858927aa9e0ab1e4f88315976b827b2"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4795b3bbb42cf68eab85cdf0e325fff90b7e146", "author": {"user": {"login": "stefanvozd", "name": "Stefan Dragisic"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/d4795b3bbb42cf68eab85cdf0e325fff90b7e146", "committedDate": "2020-12-15T15:08:32Z", "message": "Address PR comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "074e8118eb250912de86cd2722fa247d0e20769d", "author": {"user": {"login": "stefanvozd", "name": "Stefan Dragisic"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/074e8118eb250912de86cd2722fa247d0e20769d", "committedDate": "2020-12-15T15:32:05Z", "message": "Address PR comments - Add more tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwODkyMzAx", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#pullrequestreview-560892301", "createdAt": "2021-01-04T09:41:44Z", "commit": {"oid": "074e8118eb250912de86cd2722fa247d0e20769d"}, "state": "COMMENTED", "comments": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNFQwOTo0MTo0NFrOINrD-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNFQxMDoyNzozMlrOINshYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTIwNzkzMA==", "bodyText": "Right now the JavaDoc which is normally attached through the @Override annotation is completely replaced in favor of the deprecated line. Although not entirely wrong, I'd favour the addition of {@inheritDoc}, so that you append the deprecation line instead of making it a replacement.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @deprecated in through use of {{@link #subscriptionQuery(SubscriptionQueryMessage,int)}}\n          \n          \n            \n                 * {@inheritDoc}\n          \n          \n            \n                 * <p>\n          \n          \n            \n                 * @deprecated in through use of {{@link #subscriptionQuery(SubscriptionQueryMessage,int)}}", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r551207930", "createdAt": "2021-01-04T09:41:44Z", "author": {"login": "smcvb"}, "path": "axon-server-connector/src/main/java/org/axonframework/axonserver/connector/query/AxonServerQueryBus.java", "diffHunk": "@@ -308,11 +306,23 @@ public void handle(QueryRequest query,\n         }\n     }\n \n+    /**\n+     * @deprecated in through use of {{@link #subscriptionQuery(SubscriptionQueryMessage,int)}}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "074e8118eb250912de86cd2722fa247d0e20769d"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTIwOTYyNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * @deprecated in through use of the {{@link SinksManyWrapper}}\n          \n          \n            \n             * @deprecated in favour of using the {{@link SinksManyWrapper}}", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r551209627", "createdAt": "2021-01-04T09:45:06Z", "author": {"login": "smcvb"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/FluxSinkWrapper.java", "diffHunk": "@@ -26,8 +26,10 @@\n  * @param <T> The value type\n  * @author Milan Savic\n  * @since 3.3\n+ * @deprecated in through use of the {{@link SinksManyWrapper}}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "074e8118eb250912de86cd2722fa247d0e20769d"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTIxMDE1NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @deprecated in through use of {{@link #subscriptionQuery(SubscriptionQueryMessage,int)}}\n          \n          \n            \n                 * @deprecated in favour of using {{@link #subscriptionQuery(SubscriptionQueryMessage,int)}}", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r551210155", "createdAt": "2021-01-04T09:46:02Z", "author": {"login": "smcvb"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/QueryBus.java", "diffHunk": "@@ -145,10 +144,40 @@\n      * @param <Q>              the payload type of the query\n      * @param <I>              the response type of the query\n      * @param <U>              the incremental response types of the query\n+     * @deprecated in through use of {{@link #subscriptionQuery(SubscriptionQueryMessage,int)}}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "074e8118eb250912de86cd2722fa247d0e20769d"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTIxMTE2OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @deprecated in through use of {{@link #subscriptionQuery(String, Object, ResponseType, ResponseType)}}\n          \n          \n            \n                 * To set backpressure strategy, use some of {@code onBackpressure..} operators directly on updates flux\n          \n          \n            \n                 * @deprecated in favour of using {{@link #subscriptionQuery(String, Object, ResponseType, ResponseType)}}.\n          \n          \n            \n                 * To set a backpressure strategy, use one of the {@code onBackpressure..} operators on the updates flux directly.", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r551211169", "createdAt": "2021-01-04T09:48:05Z", "author": {"login": "smcvb"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/QueryGateway.java", "diffHunk": "@@ -239,7 +237,11 @@\n      * @return registration which can be used to cancel receiving updates\n      * @see QueryBus#subscriptionQuery(SubscriptionQueryMessage)\n      * @see QueryBus#subscriptionQuery(SubscriptionQueryMessage, SubscriptionQueryBackpressure, int)\n+     * @deprecated in through use of {{@link #subscriptionQuery(String, Object, ResponseType, ResponseType)}}\n+     * To set backpressure strategy, use some of {@code onBackpressure..} operators directly on updates flux", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "074e8118eb250912de86cd2722fa247d0e20769d"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTIxMjUyMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @deprecated in through use of {{@link #subscriptionQuery(String, Object, ResponseType, ResponseType, int)}}\n          \n          \n            \n                 * To set backpressure strategy, use some of {@code onBackpressure..} operators directly on updates flux\n          \n          \n            \n                 * @deprecated in favour of using {{@link #subscriptionQuery(String, Object, ResponseType, ResponseType, int)}}.\n          \n          \n            \n                 * To set a backpressure strategy, use one of the {@code onBackpressure..} operators on the updates flux directly.", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r551212523", "createdAt": "2021-01-04T09:50:31Z", "author": {"login": "smcvb"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/QueryGateway.java", "diffHunk": "@@ -274,10 +306,41 @@\n      * @return registration which can be used to cancel receiving updates\n      * @see QueryBus#subscriptionQuery(SubscriptionQueryMessage)\n      * @see QueryBus#subscriptionQuery(SubscriptionQueryMessage, SubscriptionQueryBackpressure, int)\n+     * @deprecated in through use of {{@link #subscriptionQuery(String, Object, ResponseType, ResponseType, int)}}\n+     * To set backpressure strategy, use some of {@code onBackpressure..} operators directly on updates flux", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "074e8118eb250912de86cd2722fa247d0e20769d"}, "originalPosition": 100}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTIxMjk2MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @deprecated deprecated in through use of {{@link #registerUpdateHandler(SubscriptionQueryMessage, int)}}\n          \n          \n            \n                 * @deprecated in favour of using {{@link #registerUpdateHandler(SubscriptionQueryMessage, int)}}", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r551212961", "createdAt": "2021-01-04T09:51:28Z", "author": {"login": "smcvb"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/QueryUpdateEmitter.java", "diffHunk": "@@ -161,11 +161,26 @@\n      *                         made\n      * @param <U>              the incremental response types of the query\n      * @return the object which contains updates and a registration which can be used to cancel them\n+     * @deprecated deprecated in through use of {{@link #registerUpdateHandler(SubscriptionQueryMessage, int)}}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "074e8118eb250912de86cd2722fa247d0e20769d"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTIxMzQ0MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                /***\n          \n          \n            \n                 * @deprecated in through use of {{@link #subscriptionQuery(SubscriptionQueryMessage, int)}\n          \n          \n            \n                 */\n          \n          \n            \n                /**\n          \n          \n            \n                 * {@inheritDoc}\n          \n          \n            \n                 * <p>\n          \n          \n            \n                 * @deprecated in through use of {{@link #subscriptionQuery(SubscriptionQueryMessage, int)}\n          \n          \n            \n                 */", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r551213440", "createdAt": "2021-01-04T09:52:27Z", "author": {"login": "smcvb"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/SimpleQueryBus.java", "diffHunk": "@@ -214,7 +214,11 @@ private boolean unsubscribe(String queryName,\n                        }).filter(Objects::nonNull);\n     }\n \n+    /***\n+     * @deprecated in through use of {{@link #subscriptionQuery(SubscriptionQueryMessage, int)}\n+     */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "074e8118eb250912de86cd2722fa247d0e20769d"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTIxMzY1MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \n          \n          \n            \n                @Override", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r551213651", "createdAt": "2021-01-04T09:52:53Z", "author": {"login": "smcvb"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/SimpleQueryBus.java", "diffHunk": "@@ -225,18 +229,46 @@ private boolean unsubscribe(String queryName,\n             throw new IllegalArgumentException(\"There is already a subscription with the given message identifier\");\n         }\n \n-        MonoWrapper<QueryResponseMessage<I>> initialResult = MonoWrapper.create(monoSink -> query(query)\n+        MonoWrapper<QueryResponseMessage<I>> initialResult = getInitialResultMono(query);\n+\n+        UpdateHandlerRegistration<U> updateHandlerRegistration = queryUpdateEmitter\n+                .registerUpdateHandler(query, backpressure, updateBufferSize);\n+\n+        return getSubscriptionQueryResult(initialResult, updateHandlerRegistration);\n+    }\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "074e8118eb250912de86cd2722fa247d0e20769d"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTIyNTM2MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                /**\n          \n          \n            \n                 * @deprecated in through use of the {{@link #registerUpdateHandler(SubscriptionQueryMessage, int)}}\n          \n          \n            \n                 */\n          \n          \n            \n                /**\n          \n          \n            \n                 * {@inheritDoc}\n          \n          \n            \n                 * <p>\n          \n          \n            \n                 * @deprecated in favour of using {{@link #registerUpdateHandler(SubscriptionQueryMessage, int)}}\n          \n          \n            \n                 */", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r551225360", "createdAt": "2021-01-04T10:15:33Z", "author": {"login": "smcvb"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/SimpleQueryUpdateEmitter.java", "diffHunk": "@@ -88,6 +91,10 @@ public boolean queryUpdateHandlerRegistered(SubscriptionQueryMessage<?, ?, ?> qu\n                              .anyMatch(m -> m.getIdentifier().equals(query.getIdentifier()));\n     }\n \n+    /**\n+     * @deprecated in through use of the {{@link #registerUpdateHandler(SubscriptionQueryMessage, int)}}\n+     */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "074e8118eb250912de86cd2722fa247d0e20769d"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTIyODg0OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * Abstraction interface to bridge old FluxSink and SinksMany API\n          \n          \n            \n             * with common API..\n          \n          \n            \n             * Abstraction interface to bridge old {@code FluxSink} and {@link SinksMany} API\n          \n          \n            \n             * with a common API.", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r551228849", "createdAt": "2021-01-04T10:21:58Z", "author": {"login": "smcvb"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/SinkWrapper.java", "diffHunk": "@@ -0,0 +1,32 @@\n+package org.axonframework.queryhandling;\n+\n+/**\n+ * Abstraction interface to bridge old FluxSink and SinksMany API\n+ * with common API..", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "074e8118eb250912de86cd2722fa247d0e20769d"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTIzMDQxOA==", "bodyText": "Unsure whether the second link actually works, but I do think it gets my point across.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Wrapper around {@link Sinks.Many#tryEmitComplete()} ()}.\n          \n          \n            \n                 * Wrapper around {@link Sinks.Many#tryEmitComplete()}, followed by {@link Sinks.Many#orThrow()}.", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r551230418", "createdAt": "2021-01-04T10:25:00Z", "author": {"login": "smcvb"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/SinksManyWrapper.java", "diffHunk": "@@ -0,0 +1,70 @@\n+/*\n+ * Copyright (c) 2010-2018. Axon Framework\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.axonframework.queryhandling;\n+\n+import reactor.core.publisher.Sinks;\n+\n+/**\n+ * Wrapper around {@link Sinks.Many}. Since project-reactor is not a required dependency in this Axon version, we need\n+ * wrappers for backwards compatibility. As soon as dependency is no longer optional, this wrapper should be removed.\n+ *\n+ * @param <T> The value type\n+ * @author Stefan Dragisic\n+ * @since 4.5\n+ */\n+class SinksManyWrapper<T> implements SinkWrapper<T> {\n+\n+    private final Sinks.Many<T> fluxSink;\n+\n+    /**\n+     * Initializes this wrapper with delegate sink.\n+     *\n+     * @param fluxSink Delegate sink\n+     */\n+    SinksManyWrapper(Sinks.Many<T> fluxSink) {\n+        this.fluxSink = fluxSink;\n+    }\n+\n+    /**\n+     * Wrapper around {@link Sinks.Many#tryEmitComplete()} ()}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "074e8118eb250912de86cd2722fa247d0e20769d"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTIzMDg4OQ==", "bodyText": "Would this piece of JavaDoc also benefit from noting the orThrow invocation? Or is that a regular thing to do?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Wrapper around {@link Sinks.Many#tryEmitNext(Object)}\n          \n          \n            \n                 * Wrapper around {@link Sinks.Many#tryEmitNext(Object)}.", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r551230889", "createdAt": "2021-01-04T10:25:48Z", "author": {"login": "smcvb"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/SinksManyWrapper.java", "diffHunk": "@@ -0,0 +1,70 @@\n+/*\n+ * Copyright (c) 2010-2018. Axon Framework\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.axonframework.queryhandling;\n+\n+import reactor.core.publisher.Sinks;\n+\n+/**\n+ * Wrapper around {@link Sinks.Many}. Since project-reactor is not a required dependency in this Axon version, we need\n+ * wrappers for backwards compatibility. As soon as dependency is no longer optional, this wrapper should be removed.\n+ *\n+ * @param <T> The value type\n+ * @author Stefan Dragisic\n+ * @since 4.5\n+ */\n+class SinksManyWrapper<T> implements SinkWrapper<T> {\n+\n+    private final Sinks.Many<T> fluxSink;\n+\n+    /**\n+     * Initializes this wrapper with delegate sink.\n+     *\n+     * @param fluxSink Delegate sink\n+     */\n+    SinksManyWrapper(Sinks.Many<T> fluxSink) {\n+        this.fluxSink = fluxSink;\n+    }\n+\n+    /**\n+     * Wrapper around {@link Sinks.Many#tryEmitComplete()} ()}.\n+     */\n+    @Override\n+    public void complete() {\n+        fluxSink.tryEmitComplete().orThrow();\n+    }\n+\n+    /**\n+     * Wrapper around {@link Sinks.Many#tryEmitNext(Object)}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "074e8118eb250912de86cd2722fa247d0e20769d"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTIzMTEzOQ==", "bodyText": "Some orThrow note as with the previous two methods: should it be described in the JavaDoc yes/no?", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r551231139", "createdAt": "2021-01-04T10:26:15Z", "author": {"login": "smcvb"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/SinksManyWrapper.java", "diffHunk": "@@ -0,0 +1,70 @@\n+/*\n+ * Copyright (c) 2010-2018. Axon Framework\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.axonframework.queryhandling;\n+\n+import reactor.core.publisher.Sinks;\n+\n+/**\n+ * Wrapper around {@link Sinks.Many}. Since project-reactor is not a required dependency in this Axon version, we need\n+ * wrappers for backwards compatibility. As soon as dependency is no longer optional, this wrapper should be removed.\n+ *\n+ * @param <T> The value type\n+ * @author Stefan Dragisic\n+ * @since 4.5\n+ */\n+class SinksManyWrapper<T> implements SinkWrapper<T> {\n+\n+    private final Sinks.Many<T> fluxSink;\n+\n+    /**\n+     * Initializes this wrapper with delegate sink.\n+     *\n+     * @param fluxSink Delegate sink\n+     */\n+    SinksManyWrapper(Sinks.Many<T> fluxSink) {\n+        this.fluxSink = fluxSink;\n+    }\n+\n+    /**\n+     * Wrapper around {@link Sinks.Many#tryEmitComplete()} ()}.\n+     */\n+    @Override\n+    public void complete() {\n+        fluxSink.tryEmitComplete().orThrow();\n+    }\n+\n+    /**\n+     * Wrapper around {@link Sinks.Many#tryEmitNext(Object)}\n+     *\n+     * @param value to be passed to the delegate sink\n+     */\n+    @Override\n+    public void next(T value) {\n+        fluxSink.tryEmitNext(value).orThrow();\n+    }\n+\n+    /**\n+     * Wrapper around {@link Sinks.Many#tryEmitError(Throwable)}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "074e8118eb250912de86cd2722fa247d0e20769d"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTIzMTg0MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @deprecated in through use of the {{@link #subscriptionQuery(String, Object, ResponseType, ResponseType, int)}}\n          \n          \n            \n                 * @deprecated in favour of using {{@link #subscriptionQuery(String, Object, ResponseType, ResponseType, int)}}", "url": "https://github.com/AxonFramework/AxonFramework/pull/1624#discussion_r551231840", "createdAt": "2021-01-04T10:27:32Z", "author": {"login": "smcvb"}, "path": "messaging/src/main/java/org/axonframework/queryhandling/DefaultQueryGateway.java", "diffHunk": "@@ -104,19 +104,53 @@ public static Builder builder() {\n                        .map(QueryResponseMessage::getPayload);\n     }\n \n+    /**\n+     * @deprecated in through use of the {{@link #subscriptionQuery(String, Object, ResponseType, ResponseType, int)}}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "074e8118eb250912de86cd2722fa247d0e20769d"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eddc425a49418312544d2b464d731f433e552fcd", "author": {"user": {"login": "stefanvozd", "name": "Stefan Dragisic"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/eddc425a49418312544d2b464d731f433e552fcd", "committedDate": "2021-01-19T16:24:25Z", "message": "Update messaging/src/main/java/org/axonframework/queryhandling/DefaultQueryGateway.java\n\nCo-authored-by: Steven van Beelen <steven.vanbeelen@axoniq.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56327efff52d9ed245a5e6c0f838af1f324b6ad9", "author": {"user": {"login": "stefanvozd", "name": "Stefan Dragisic"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/56327efff52d9ed245a5e6c0f838af1f324b6ad9", "committedDate": "2021-01-19T16:26:53Z", "message": "Update axon-server-connector/src/main/java/org/axonframework/axonserver/connector/query/AxonServerQueryBus.java\n\nCo-authored-by: Steven van Beelen <steven.vanbeelen@axoniq.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "139d1d6d898a752a27907a27704ba9035511478e", "author": {"user": {"login": "stefanvozd", "name": "Stefan Dragisic"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/139d1d6d898a752a27907a27704ba9035511478e", "committedDate": "2021-01-19T16:27:07Z", "message": "Update messaging/src/main/java/org/axonframework/queryhandling/QueryBus.java\n\nCo-authored-by: Steven van Beelen <steven.vanbeelen@axoniq.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71179347f2e42278b638ef242735378ae8ad6a34", "author": {"user": {"login": "stefanvozd", "name": "Stefan Dragisic"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/71179347f2e42278b638ef242735378ae8ad6a34", "committedDate": "2021-01-19T16:28:27Z", "message": "Update pom.xml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14c32feec9ef6a61f4ec478a8d9aafc1eebbef84", "author": {"user": {"login": "stefanvozd", "name": "Stefan Dragisic"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/14c32feec9ef6a61f4ec478a8d9aafc1eebbef84", "committedDate": "2021-01-19T16:29:37Z", "message": "Update messaging/src/main/java/org/axonframework/queryhandling/SinksManyWrapper.java\n\nCo-authored-by: Steven van Beelen <steven.vanbeelen@axoniq.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7ed7233ca270f28d722f4ceaa6d13adaeb4419c", "author": {"user": {"login": "stefanvozd", "name": "Stefan Dragisic"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/f7ed7233ca270f28d722f4ceaa6d13adaeb4419c", "committedDate": "2021-01-19T16:29:45Z", "message": "Update messaging/src/main/java/org/axonframework/queryhandling/SinksManyWrapper.java\n\nCo-authored-by: Steven van Beelen <steven.vanbeelen@axoniq.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6c77ef4a0347b329245320f0452d35cc5746554", "author": {"user": {"login": "stefanvozd", "name": "Stefan Dragisic"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/d6c77ef4a0347b329245320f0452d35cc5746554", "committedDate": "2021-01-19T16:30:10Z", "message": "Update messaging/src/main/java/org/axonframework/queryhandling/SinkWrapper.java\n\nCo-authored-by: Steven van Beelen <steven.vanbeelen@axoniq.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57988cae5c5d091a452bae4168d2104f33161fbc", "author": {"user": {"login": "stefanvozd", "name": "Stefan Dragisic"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/57988cae5c5d091a452bae4168d2104f33161fbc", "committedDate": "2021-01-19T16:30:22Z", "message": "Update messaging/src/main/java/org/axonframework/queryhandling/QueryUpdateEmitter.java\n\nCo-authored-by: Steven van Beelen <steven.vanbeelen@axoniq.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73828d0185518c266419388e2371f1b48f1c3bf2", "author": {"user": {"login": "stefanvozd", "name": "Stefan Dragisic"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/73828d0185518c266419388e2371f1b48f1c3bf2", "committedDate": "2021-01-19T16:30:53Z", "message": "Update messaging/src/main/java/org/axonframework/queryhandling/FluxSinkWrapper.java\n\nCo-authored-by: Steven van Beelen <steven.vanbeelen@axoniq.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce6c0d0936dad4bebd7496c9ec2fa9e8b30f6b9d", "author": {"user": {"login": "stefanvozd", "name": "Stefan Dragisic"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/ce6c0d0936dad4bebd7496c9ec2fa9e8b30f6b9d", "committedDate": "2021-01-19T16:31:01Z", "message": "Update messaging/src/main/java/org/axonframework/queryhandling/QueryGateway.java\n\nCo-authored-by: Steven van Beelen <steven.vanbeelen@axoniq.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75ed31a26ba3e086d5d36052794e5fd9d3b07aac", "author": {"user": {"login": "stefanvozd", "name": "Stefan Dragisic"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/75ed31a26ba3e086d5d36052794e5fd9d3b07aac", "committedDate": "2021-01-19T16:31:10Z", "message": "Update messaging/src/main/java/org/axonframework/queryhandling/QueryGateway.java\n\nCo-authored-by: Steven van Beelen <steven.vanbeelen@axoniq.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab1819d3a3535147d195764fc3f52267223597a8", "author": {"user": {"login": "stefanvozd", "name": "Stefan Dragisic"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/ab1819d3a3535147d195764fc3f52267223597a8", "committedDate": "2021-01-19T16:34:54Z", "message": "Update messaging/src/main/java/org/axonframework/queryhandling/SimpleQueryBus.java\n\nCo-authored-by: Steven van Beelen <steven.vanbeelen@axoniq.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c093ad9f7b0923816656c4a79707e4eb58d3d836", "author": {"user": {"login": "stefanvozd", "name": "Stefan Dragisic"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/c093ad9f7b0923816656c4a79707e4eb58d3d836", "committedDate": "2021-01-19T16:35:05Z", "message": "Update messaging/src/main/java/org/axonframework/queryhandling/SimpleQueryBus.java\n\nCo-authored-by: Steven van Beelen <steven.vanbeelen@axoniq.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ec04e0e65b2b2130eafa95e1f01fe1b1f1e3be7", "author": {"user": {"login": "stefanvozd", "name": "Stefan Dragisic"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/1ec04e0e65b2b2130eafa95e1f01fe1b1f1e3be7", "committedDate": "2021-01-19T16:35:22Z", "message": "Update messaging/src/main/java/org/axonframework/queryhandling/SimpleQueryUpdateEmitter.java\n\nCo-authored-by: Steven van Beelen <steven.vanbeelen@axoniq.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a969a87279600608844166714235492a35134824", "author": {"user": {"login": "stefanvozd", "name": "Stefan Dragisic"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/a969a87279600608844166714235492a35134824", "committedDate": "2021-01-19T16:40:10Z", "message": "Update javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8ab6f887da3052d1088e3db7b6967f24f0d4e0f", "author": {"user": {"login": "stefanvozd", "name": "Stefan Dragisic"}}, "url": "https://github.com/AxonFramework/AxonFramework/commit/b8ab6f887da3052d1088e3db7b6967f24f0d4e0f", "committedDate": "2021-01-19T16:46:37Z", "message": "Merge branch 'master' into feature/upgrade-reactor-version\n\n# Conflicts:\n#\tmessaging/src/main/java/org/axonframework/queryhandling/SimpleQueryBus.java\n#\tpom.xml"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2041, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}