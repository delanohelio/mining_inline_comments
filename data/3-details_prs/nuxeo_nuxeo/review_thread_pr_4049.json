{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5NTU0NDU3", "number": 4049, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQwODo1NDozMVrOD9s7bw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQwODo1NjoyNlrOD9s-0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2MDI1ODM5OnYy", "diffSide": "RIGHT", "path": "modules/platform/nuxeo-apidoc-server/nuxeo-apidoc-webengine/src/main/resources/skin/resources/script/jquery.toc.js", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQwODo1NDozMVrOGXWhGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQwODo1NDozMVrOGXWhGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzEzOTM1NQ==", "bodyText": "you can now use proper variable scoping with let or const", "url": "https://github.com/nuxeo/nuxeo/pull/4049#discussion_r427139355", "createdAt": "2020-05-19T08:54:31Z", "author": {"login": "akervern"}, "path": "modules/platform/nuxeo-apidoc-server/nuxeo-apidoc-webengine/src/main/resources/skin/resources/script/jquery.toc.js", "diffHunk": "@@ -0,0 +1,25 @@\n+(function ($) {\n+\n+  $.fn.toc = function (tocListContainer, tocList) {\n+    $(tocList).empty();\n+\n+    var index = 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b07f9377b07e9ba8de45fcbea33bb446dcdb74c2"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2MDI2MDIxOnYy", "diffSide": "RIGHT", "path": "modules/platform/nuxeo-apidoc-server/nuxeo-apidoc-webengine/src/main/resources/skin/resources/script/jquery.toc.js", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQwODo1NDo1NlrOGXWiOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQwOTo0MjoxNVrOGXYXwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzEzOTY0MA==", "bodyText": "Use String templating for that: https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/template_strings", "url": "https://github.com/nuxeo/nuxeo/pull/4049#discussion_r427139640", "createdAt": "2020-05-19T08:54:56Z", "author": {"login": "akervern"}, "path": "modules/platform/nuxeo-apidoc-server/nuxeo-apidoc-webengine/src/main/resources/skin/resources/script/jquery.toc.js", "diffHunk": "@@ -0,0 +1,25 @@\n+(function ($) {\n+\n+  $.fn.toc = function (tocListContainer, tocList) {\n+    $(tocList).empty();\n+\n+    var index = 0;\n+    $(\"h2\").each(function () {\n+      var name = \"toc\" + index;\n+      var anchor = \"<a name='\" + name + \"' class='anchor'></a>\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b07f9377b07e9ba8de45fcbea33bb446dcdb74c2"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzE2OTczMA==", "bodyText": "i changed the logics, you'll tell me if you prefer or not", "url": "https://github.com/nuxeo/nuxeo/pull/4049#discussion_r427169730", "createdAt": "2020-05-19T09:42:15Z", "author": {"login": "atchertchian"}, "path": "modules/platform/nuxeo-apidoc-server/nuxeo-apidoc-webengine/src/main/resources/skin/resources/script/jquery.toc.js", "diffHunk": "@@ -0,0 +1,25 @@\n+(function ($) {\n+\n+  $.fn.toc = function (tocListContainer, tocList) {\n+    $(tocList).empty();\n+\n+    var index = 0;\n+    $(\"h2\").each(function () {\n+      var name = \"toc\" + index;\n+      var anchor = \"<a name='\" + name + \"' class='anchor'></a>\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzEzOTY0MA=="}, "originalCommit": {"oid": "b07f9377b07e9ba8de45fcbea33bb446dcdb74c2"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2MDI2NDc3OnYy", "diffSide": "RIGHT", "path": "modules/platform/nuxeo-apidoc-server/nuxeo-apidoc-webengine/src/main/resources/skin/resources/script/jquery.toc.js", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQwODo1NTo1NVrOGXWk6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxNTowMTozNFrOGXkzxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzE0MDMyOA==", "bodyText": "Apparently jquery#each callback already contains index and obj ref: https://api.jquery.com/jQuery.each/#jQuery-each-object-callback", "url": "https://github.com/nuxeo/nuxeo/pull/4049#discussion_r427140328", "createdAt": "2020-05-19T08:55:55Z", "author": {"login": "akervern"}, "path": "modules/platform/nuxeo-apidoc-server/nuxeo-apidoc-webengine/src/main/resources/skin/resources/script/jquery.toc.js", "diffHunk": "@@ -0,0 +1,25 @@\n+(function ($) {\n+\n+  $.fn.toc = function (tocListContainer, tocList) {\n+    $(tocList).empty();\n+\n+    var index = 0;\n+    $(\"h2\").each(function () {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b07f9377b07e9ba8de45fcbea33bb446dcdb74c2"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzE2Mzc2MQ==", "bodyText": "even if i need the index outside of the iteration?", "url": "https://github.com/nuxeo/nuxeo/pull/4049#discussion_r427163761", "createdAt": "2020-05-19T09:32:34Z", "author": {"login": "atchertchian"}, "path": "modules/platform/nuxeo-apidoc-server/nuxeo-apidoc-webengine/src/main/resources/skin/resources/script/jquery.toc.js", "diffHunk": "@@ -0,0 +1,25 @@\n+(function ($) {\n+\n+  $.fn.toc = function (tocListContainer, tocList) {\n+    $(tocList).empty();\n+\n+    var index = 0;\n+    $(\"h2\").each(function () {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzE0MDMyOA=="}, "originalCommit": {"oid": "b07f9377b07e9ba8de45fcbea33bb446dcdb74c2"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzE4MzQ1OQ==", "bodyText": "you mean the list size?", "url": "https://github.com/nuxeo/nuxeo/pull/4049#discussion_r427183459", "createdAt": "2020-05-19T10:05:07Z", "author": {"login": "akervern"}, "path": "modules/platform/nuxeo-apidoc-server/nuxeo-apidoc-webengine/src/main/resources/skin/resources/script/jquery.toc.js", "diffHunk": "@@ -0,0 +1,25 @@\n+(function ($) {\n+\n+  $.fn.toc = function (tocListContainer, tocList) {\n+    $(tocList).empty();\n+\n+    var index = 0;\n+    $(\"h2\").each(function () {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzE0MDMyOA=="}, "originalCommit": {"oid": "b07f9377b07e9ba8de45fcbea33bb446dcdb74c2"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzE4NTk2NQ==", "bodyText": "i mean the number of toc items that were processed", "url": "https://github.com/nuxeo/nuxeo/pull/4049#discussion_r427185965", "createdAt": "2020-05-19T10:09:10Z", "author": {"login": "atchertchian"}, "path": "modules/platform/nuxeo-apidoc-server/nuxeo-apidoc-webengine/src/main/resources/skin/resources/script/jquery.toc.js", "diffHunk": "@@ -0,0 +1,25 @@\n+(function ($) {\n+\n+  $.fn.toc = function (tocListContainer, tocList) {\n+    $(tocList).empty();\n+\n+    var index = 0;\n+    $(\"h2\").each(function () {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzE0MDMyOA=="}, "originalCommit": {"oid": "b07f9377b07e9ba8de45fcbea33bb446dcdb74c2"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzE4NzQ3MQ==", "bodyText": "i admit i originally copy/pasted the whole code from http://tutorials.jenkov.com/jquery/generating-table-of-contents.html, so i can rename the variable if it makes things clearer", "url": "https://github.com/nuxeo/nuxeo/pull/4049#discussion_r427187471", "createdAt": "2020-05-19T10:11:30Z", "author": {"login": "atchertchian"}, "path": "modules/platform/nuxeo-apidoc-server/nuxeo-apidoc-webengine/src/main/resources/skin/resources/script/jquery.toc.js", "diffHunk": "@@ -0,0 +1,25 @@\n+(function ($) {\n+\n+  $.fn.toc = function (tocListContainer, tocList) {\n+    $(tocList).empty();\n+\n+    var index = 0;\n+    $(\"h2\").each(function () {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzE0MDMyOA=="}, "originalCommit": {"oid": "b07f9377b07e9ba8de45fcbea33bb446dcdb74c2"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzM3MzUxMA==", "bodyText": "Removed the use case after all (always show the TOC even if empty)", "url": "https://github.com/nuxeo/nuxeo/pull/4049#discussion_r427373510", "createdAt": "2020-05-19T15:01:34Z", "author": {"login": "atchertchian"}, "path": "modules/platform/nuxeo-apidoc-server/nuxeo-apidoc-webengine/src/main/resources/skin/resources/script/jquery.toc.js", "diffHunk": "@@ -0,0 +1,25 @@\n+(function ($) {\n+\n+  $.fn.toc = function (tocListContainer, tocList) {\n+    $(tocList).empty();\n+\n+    var index = 0;\n+    $(\"h2\").each(function () {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzE0MDMyOA=="}, "originalCommit": {"oid": "b07f9377b07e9ba8de45fcbea33bb446dcdb74c2"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2MDI2NzA1OnYy", "diffSide": "RIGHT", "path": "modules/platform/nuxeo-apidoc-server/nuxeo-apidoc-webengine/src/main/resources/skin/resources/script/jquery.toc.js", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQwODo1NjoyNlrOGXWmTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQwODo1NjoyNlrOGXWmTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzE0MDY4NA==", "bodyText": "It looks like you miss parenthesis here.", "url": "https://github.com/nuxeo/nuxeo/pull/4049#discussion_r427140684", "createdAt": "2020-05-19T08:56:26Z", "author": {"login": "akervern"}, "path": "modules/platform/nuxeo-apidoc-server/nuxeo-apidoc-webengine/src/main/resources/skin/resources/script/jquery.toc.js", "diffHunk": "@@ -0,0 +1,25 @@\n+(function ($) {\n+\n+  $.fn.toc = function (tocListContainer, tocList) {\n+    $(tocList).empty();\n+\n+    var index = 0;\n+    $(\"h2\").each(function () {\n+      var name = \"toc\" + index;\n+      var anchor = \"<a name='\" + name + \"' class='anchor'></a>\";\n+      $(this).before(anchor);\n+\n+      var li = \"<li><a href='#\" + name + \"'>\" + $(this).text() + \"</a></li>\";\n+      $(tocList).append(li);\n+      index++;\n+    });\n+\n+    if (index < 2) {\n+      // only one item ==> remove TOC\n+      console.log(\"removing\");\n+      $(tocListContainer).remove;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b07f9377b07e9ba8de45fcbea33bb446dcdb74c2"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4127, "cost": 1, "resetAt": "2021-11-03T18:41:40Z"}}}