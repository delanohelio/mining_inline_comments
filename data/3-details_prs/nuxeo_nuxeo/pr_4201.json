{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ0NzMwNDY1", "number": 4201, "title": "10.10-HF/fix-NXP-29246-import-MHTLM-in-chrome", "bodyText": "PR created from https://qa2.nuxeo.org/jenkins/job/TestAndPush/job/ondemand-testandpush-nalkotob-10.10/179/", "createdAt": "2020-07-06T12:03:28Z", "url": "https://github.com/nuxeo/nuxeo/pull/4201", "merged": true, "mergeCommit": {"oid": "4f444b0e34a457d4a07b4edd0b2cebb3de395916"}, "closed": true, "closedAt": "2020-07-22T16:13:04Z", "author": {"login": "nuxeojenkins"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcypk7GABqjM1MjE1ODE0OTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3bre_gFqTQ1MzM3MTgyNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1af9e42720ca4a30ff940dcf501975dd885bd741", "author": {"user": {"login": "NourNuxeo", "name": "Nour AL KOTOB"}}, "url": "https://github.com/nuxeo/nuxeo/commit/1af9e42720ca4a30ff940dcf501975dd885bd741", "committedDate": "2020-07-06T08:43:42Z", "message": "NXP-29246: add MHTML mime-type support"}, "afterCommit": {"oid": "7e090ad507a83d7630c58fadef54fd7d79cbaf82", "author": {"user": {"login": "NourNuxeo", "name": "Nour AL KOTOB"}}, "url": "https://github.com/nuxeo/nuxeo/commit/7e090ad507a83d7630c58fadef54fd7d79cbaf82", "committedDate": "2020-07-07T17:48:34Z", "message": "NXP-29246: add MHTML mime-type support"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0MTI4OTky", "url": "https://github.com/nuxeo/nuxeo/pull/4201#pullrequestreview-444128992", "createdAt": "2020-07-07T18:02:39Z", "commit": {"oid": "7e090ad507a83d7630c58fadef54fd7d79cbaf82"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxODowMjo0MFrOGuJy8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxODowMjo0MFrOGuJy8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTA0ODE3OA==", "bodyText": "new lines removed in next push", "url": "https://github.com/nuxeo/nuxeo/pull/4201#discussion_r451048178", "createdAt": "2020-07-07T18:02:40Z", "author": {"login": "NourNuxeo"}, "path": "nuxeo-features/rest-api/nuxeo-rest-api-server/src/main/java/org/nuxeo/ecm/restapi/server/jaxrs/BatchUploadObject.java", "diffHunk": "@@ -130,6 +137,8 @@\n \n     public static final String MD5 = \"md5\";\n \n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e090ad507a83d7630c58fadef54fd7d79cbaf82"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0MTY5NDcw", "url": "https://github.com/nuxeo/nuxeo/pull/4201#pullrequestreview-444169470", "createdAt": "2020-07-07T19:02:14Z", "commit": {"oid": "7e090ad507a83d7630c58fadef54fd7d79cbaf82"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxOTowMjoxNFrOGuLuKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxOTowMjoxNFrOGuLuKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTA3OTcyMw==", "bodyText": "comment removed in next push", "url": "https://github.com/nuxeo/nuxeo/pull/4201#discussion_r451079723", "createdAt": "2020-07-07T19:02:14Z", "author": {"login": "NourNuxeo"}, "path": "nuxeo-features/rest-api/nuxeo-rest-api-test/src/test/java/org/nuxeo/ecm/restapi/test/BatchUploadFixture.java", "diffHunk": "@@ -1045,6 +1046,33 @@ public void testErrorOnRefreshedTokenError() throws Exception {\n         }\n     }\n \n+    @Test\n+    public void testUploadMHTML() throws Exception {\n+        try (CloseableClientResponse response = getResponse(RequestType.POST, \"upload/\" + initializeNewBatch() + \"/0\",\n+                \"dummy\", Collections.singletonMap(\"Content-Type\", \"multipart/related\"))) {\n+            assertEquals(Status.INTERNAL_SERVER_ERROR.getStatusCode(), response.getStatus());\n+        }\n+    }\n+\n+    @Test\n+    @Deploy(\"org.nuxeo.ecm.platform.restapi.server:batch-upload-contrib-test.xml\")\n+    public void testUploadMHTMLMultipartDisabled() throws Exception {\n+        String batchId = initializeNewBatch();\n+        Map<String, String> headers = new HashMap<>();\n+        headers.put(\"Content-Type\", \"multipart/related\");\n+        headers.put(\"X-File-Name\", \"dummy.mhtml\");\n+        // typed via mime-type", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e090ad507a83d7630c58fadef54fd7d79cbaf82"}, "originalPosition": 27}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7e090ad507a83d7630c58fadef54fd7d79cbaf82", "author": {"user": {"login": "NourNuxeo", "name": "Nour AL KOTOB"}}, "url": "https://github.com/nuxeo/nuxeo/commit/7e090ad507a83d7630c58fadef54fd7d79cbaf82", "committedDate": "2020-07-07T17:48:34Z", "message": "NXP-29246: add MHTML mime-type support"}, "afterCommit": {"oid": "e1f9695141e3da596b4b504a9b9c9ef8a2101138", "author": {"user": {"login": "NourNuxeo", "name": "Nour AL KOTOB"}}, "url": "https://github.com/nuxeo/nuxeo/commit/e1f9695141e3da596b4b504a9b9c9ef8a2101138", "committedDate": "2020-07-08T09:40:44Z", "message": "NXP-29246: add MHTML mime-type support"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e1f9695141e3da596b4b504a9b9c9ef8a2101138", "author": {"user": {"login": "NourNuxeo", "name": "Nour AL KOTOB"}}, "url": "https://github.com/nuxeo/nuxeo/commit/e1f9695141e3da596b4b504a9b9c9ef8a2101138", "committedDate": "2020-07-08T09:40:44Z", "message": "NXP-29246: add MHTML mime-type support"}, "afterCommit": {"oid": "f99385045a8d9652e6a4854cc5f984da3490196b", "author": {"user": {"login": "NourNuxeo", "name": "Nour AL KOTOB"}}, "url": "https://github.com/nuxeo/nuxeo/commit/f99385045a8d9652e6a4854cc5f984da3490196b", "committedDate": "2020-07-08T13:42:57Z", "message": "NXP-29246: add MHTML mime-type support"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NjExOTIx", "url": "https://github.com/nuxeo/nuxeo/pull/4201#pullrequestreview-445611921", "createdAt": "2020-07-09T13:25:21Z", "commit": {"oid": "f99385045a8d9652e6a4854cc5f984da3490196b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMzoyNToyMVrOGvRATw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMzoyNToyMVrOGvRATw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjIxNDg2Mw==", "bodyText": "add nxp ticket in jdoc", "url": "https://github.com/nuxeo/nuxeo/pull/4201#discussion_r452214863", "createdAt": "2020-07-09T13:25:21Z", "author": {"login": "NourNuxeo"}, "path": "nuxeo-features/rest-api/nuxeo-rest-api-test/src/test/java/org/nuxeo/ecm/restapi/test/BatchUploadFixture.java", "diffHunk": "@@ -1045,6 +1046,32 @@ public void testErrorOnRefreshedTokenError() throws Exception {\n         }\n     }\n \n+    @Test", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f99385045a8d9652e6a4854cc5f984da3490196b"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NjEyOTY1", "url": "https://github.com/nuxeo/nuxeo/pull/4201#pullrequestreview-445612965", "createdAt": "2020-07-09T13:26:27Z", "commit": {"oid": "f99385045a8d9652e6a4854cc5f984da3490196b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMzoyNjoyN1rOGvRDSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMzoyNjoyN1rOGvRDSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjIxNTYyNA==", "bodyText": "properties.batch.upload.test\nfileName test-batch-upload-properties.xml", "url": "https://github.com/nuxeo/nuxeo/pull/4201#discussion_r452215624", "createdAt": "2020-07-09T13:26:27Z", "author": {"login": "NourNuxeo"}, "path": "nuxeo-features/rest-api/nuxeo-rest-api-test/src/test/resources/batch-upload-contrib-test.xml", "diffHunk": "@@ -0,0 +1,8 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<component name=\"org.nuxeo.ecm.platform.restapi.server.test\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f99385045a8d9652e6a4854cc5f984da3490196b"}, "originalPosition": 2}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NjEzMTI1", "url": "https://github.com/nuxeo/nuxeo/pull/4201#pullrequestreview-445613125", "createdAt": "2020-07-09T13:26:37Z", "commit": {"oid": "f99385045a8d9652e6a4854cc5f984da3490196b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMzoyNjozOFrOGvRDvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMzoyNjozOFrOGvRDvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjIxNTc0MQ==", "bodyText": "remove test from component name\norg.nuxeo.ecm.platform.restapi.server.properties", "url": "https://github.com/nuxeo/nuxeo/pull/4201#discussion_r452215741", "createdAt": "2020-07-09T13:26:38Z", "author": {"login": "NourNuxeo"}, "path": "nuxeo-features/rest-api/nuxeo-rest-api-server/src/main/resources/OSGI-INF/batch-upload-contrib.xml", "diffHunk": "@@ -0,0 +1,14 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<component name=\"org.nuxeo.ecm.platform.restapi.server.batch.upload.test\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f99385045a8d9652e6a4854cc5f984da3490196b"}, "originalPosition": 2}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NjE0NzI3", "url": "https://github.com/nuxeo/nuxeo/pull/4201#pullrequestreview-445614727", "createdAt": "2020-07-09T13:28:18Z", "commit": {"oid": "f99385045a8d9652e6a4854cc5f984da3490196b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMzoyODoxOFrOGvRIJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMzoyODoxOFrOGvRIJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjIxNjg2OQ==", "bodyText": "properties-contrib.xml", "url": "https://github.com/nuxeo/nuxeo/pull/4201#discussion_r452216869", "createdAt": "2020-07-09T13:28:18Z", "author": {"login": "NourNuxeo"}, "path": "nuxeo-features/rest-api/nuxeo-rest-api-server/src/main/resources/META-INF/MANIFEST.MF", "diffHunk": "@@ -8,5 +8,6 @@ Nuxeo-WebModule: org.nuxeo.ecm.restapi.server.jaxrs.APIModule;name=api;extends=a\n Nuxeo-Component: OSGI-INF/docviewurl-service-contrib.xml,\n  OSGI-INF/auth-contrib.xml,\n  OSGI-INF/searchadapter-pp-contrib.xml,\n- OSGI-INF/json-enrichers-contrib.xml\n+ OSGI-INF/json-enrichers-contrib.xml,\n+ OSGI-INF/batch-upload-contrib.xml", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f99385045a8d9652e6a4854cc5f984da3490196b"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NjE2MjEx", "url": "https://github.com/nuxeo/nuxeo/pull/4201#pullrequestreview-445616211", "createdAt": "2020-07-09T13:29:54Z", "commit": {"oid": "f99385045a8d9652e6a4854cc5f984da3490196b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMzoyOTo1NFrOGvRMXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMzoyOTo1NFrOGvRMXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjIxNzk0OQ==", "bodyText": "set inside <ext...>", "url": "https://github.com/nuxeo/nuxeo/pull/4201#discussion_r452217949", "createdAt": "2020-07-09T13:29:54Z", "author": {"login": "NourNuxeo"}, "path": "nuxeo-features/rest-api/nuxeo-rest-api-server/src/main/resources/OSGI-INF/batch-upload-contrib.xml", "diffHunk": "@@ -0,0 +1,14 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<component name=\"org.nuxeo.ecm.platform.restapi.server.batch.upload.test\">\n+\n+  <documentation>\n+    This parameter allows enabling multipart file upload. Since Streaming is now the way to go. You can\n+    disable multipart handling here.\n+\n+    @author Nour AL KOTOB (nalkotob@nuxeo.com)\n+  </documentation>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f99385045a8d9652e6a4854cc5f984da3490196b"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NjE2OTA1", "url": "https://github.com/nuxeo/nuxeo/pull/4201#pullrequestreview-445616905", "createdAt": "2020-07-09T13:30:34Z", "commit": {"oid": "f99385045a8d9652e6a4854cc5f984da3490196b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMzozMDozNFrOGvROXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMzozMDozNFrOGvROXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjIxODQ2MQ==", "bodyText": "allows disabling multipart....default is false.", "url": "https://github.com/nuxeo/nuxeo/pull/4201#discussion_r452218461", "createdAt": "2020-07-09T13:30:34Z", "author": {"login": "NourNuxeo"}, "path": "nuxeo-features/rest-api/nuxeo-rest-api-server/src/main/resources/OSGI-INF/batch-upload-contrib.xml", "diffHunk": "@@ -0,0 +1,14 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<component name=\"org.nuxeo.ecm.platform.restapi.server.batch.upload.test\">\n+\n+  <documentation>\n+    This parameter allows enabling multipart file upload. Since Streaming is now the way to go. You can", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f99385045a8d9652e6a4854cc5f984da3490196b"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NjE3NDM1", "url": "https://github.com/nuxeo/nuxeo/pull/4201#pullrequestreview-445617435", "createdAt": "2020-07-09T13:31:05Z", "commit": {"oid": "f99385045a8d9652e6a4854cc5f984da3490196b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMzozMTowNVrOGvRP7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMzozMTowNVrOGvRP7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjIxODg2MQ==", "bodyText": "check isMultipartDisabled first to short-circuit", "url": "https://github.com/nuxeo/nuxeo/pull/4201#discussion_r452218861", "createdAt": "2020-07-09T13:31:05Z", "author": {"login": "NourNuxeo"}, "path": "nuxeo-features/rest-api/nuxeo-rest-api-server/src/main/java/org/nuxeo/ecm/restapi/server/jaxrs/BatchUploadObject.java", "diffHunk": "@@ -232,7 +239,7 @@ protected Response uploadNoTransaction(@Context HttpServletRequest request,\n         // TODO NXP-18247: should be set to the actual number of bytes uploaded instead of relying on the Content-Length\n         // header which is not necessarily set\n         long uploadedSize = getUploadedSize(request);\n-        boolean isMultipart = contentType != null && contentType.contains(\"multipart\");\n+        boolean isMultipart = contentType != null && contentType.contains(\"multipart\") && !isMultipartDisabled();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f99385045a8d9652e6a4854cc5f984da3490196b"}, "originalPosition": 26}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f99385045a8d9652e6a4854cc5f984da3490196b", "author": {"user": {"login": "NourNuxeo", "name": "Nour AL KOTOB"}}, "url": "https://github.com/nuxeo/nuxeo/commit/f99385045a8d9652e6a4854cc5f984da3490196b", "committedDate": "2020-07-08T13:42:57Z", "message": "NXP-29246: add MHTML mime-type support"}, "afterCommit": {"oid": "6603f4fae2ca110843679c0ea839fa94121f1706", "author": {"user": {"login": "NourNuxeo", "name": "Nour AL KOTOB"}}, "url": "https://github.com/nuxeo/nuxeo/commit/6603f4fae2ca110843679c0ea839fa94121f1706", "committedDate": "2020-07-15T11:09:52Z", "message": "NXP-29246: add MHTML mime-type support"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6603f4fae2ca110843679c0ea839fa94121f1706", "author": {"user": {"login": "NourNuxeo", "name": "Nour AL KOTOB"}}, "url": "https://github.com/nuxeo/nuxeo/commit/6603f4fae2ca110843679c0ea839fa94121f1706", "committedDate": "2020-07-15T11:09:52Z", "message": "NXP-29246: add MHTML mime-type support"}, "afterCommit": {"oid": "ee04e2f516f9e7f6300044755b1e196e2ccedac5", "author": {"user": {"login": "NourNuxeo", "name": "Nour AL KOTOB"}}, "url": "https://github.com/nuxeo/nuxeo/commit/ee04e2f516f9e7f6300044755b1e196e2ccedac5", "committedDate": "2020-07-15T17:06:52Z", "message": "NXP-29246: add MHTML mime-type support"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNjIzNDI2", "url": "https://github.com/nuxeo/nuxeo/pull/4201#pullrequestreview-451623426", "createdAt": "2020-07-20T13:49:41Z", "commit": {"oid": "ee04e2f516f9e7f6300044755b1e196e2ccedac5"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMzo0OTo0MVrOG0Nl3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMzo1MzoyM1rOG0NzeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzQwMTgyMw==", "bodyText": "As this property does not exist in 11.2, I would update the since for the next HF.", "url": "https://github.com/nuxeo/nuxeo/pull/4201#discussion_r457401823", "createdAt": "2020-07-20T13:49:41Z", "author": {"login": "troger"}, "path": "nuxeo-features/rest-api/nuxeo-rest-api-server/src/main/java/org/nuxeo/ecm/restapi/server/jaxrs/BatchUploadObject.java", "diffHunk": "@@ -116,6 +117,9 @@\n \n     protected static final String REQUEST_HANDLER_NAME = \"handlerName\";\n \n+    /** @since 11.2 */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee04e2f516f9e7f6300044755b1e196e2ccedac5"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzQwMjg3MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                protected static final String MULTIPART_CONFIG_KEY = \"nuxeo.batch.upload.multipart.disabled\";\n          \n          \n            \n                protected static final String MULTIPART_DISABLED_CONFIG_KEY = \"nuxeo.batch.upload.multipart.disabled\";", "url": "https://github.com/nuxeo/nuxeo/pull/4201#discussion_r457402870", "createdAt": "2020-07-20T13:50:48Z", "author": {"login": "troger"}, "path": "nuxeo-features/rest-api/nuxeo-rest-api-server/src/main/java/org/nuxeo/ecm/restapi/server/jaxrs/BatchUploadObject.java", "diffHunk": "@@ -116,6 +117,9 @@\n \n     protected static final String REQUEST_HANDLER_NAME = \"handlerName\";\n \n+    /** @since 11.2 */\n+    protected static final String MULTIPART_CONFIG_KEY = \"nuxeo.batch.upload.multipart.disabled\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee04e2f516f9e7f6300044755b1e196e2ccedac5"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzQwMzkzMQ==", "bodyText": "What about:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    boolean isMultipart = !isMultipartDisabled() && contentType != null && contentType.contains(\"multipart\");\n          \n          \n            \n                    boolean isMultipart = isMultipartEnabled() && contentType != null && contentType.contains(\"multipart\");\n          \n      \n    \n    \n  \n\n?", "url": "https://github.com/nuxeo/nuxeo/pull/4201#discussion_r457403931", "createdAt": "2020-07-20T13:51:55Z", "author": {"login": "troger"}, "path": "nuxeo-features/rest-api/nuxeo-rest-api-server/src/main/java/org/nuxeo/ecm/restapi/server/jaxrs/BatchUploadObject.java", "diffHunk": "@@ -232,7 +236,7 @@ protected Response uploadNoTransaction(@Context HttpServletRequest request,\n         // TODO NXP-18247: should be set to the actual number of bytes uploaded instead of relying on the Content-Length\n         // header which is not necessarily set\n         long uploadedSize = getUploadedSize(request);\n-        boolean isMultipart = contentType != null && contentType.contains(\"multipart\");\n+        boolean isMultipart = !isMultipartDisabled() && contentType != null && contentType.contains(\"multipart\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee04e2f516f9e7f6300044755b1e196e2ccedac5"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzQwNTMwNA==", "bodyText": "Keep it simple:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  This parameter allows enabling multipart file upload. Since Streaming is now the way to go. You can\n          \n          \n            \n                  disable multipart handling here.\n          \n          \n            \n                  This parameter allows disabling multipart file upload.", "url": "https://github.com/nuxeo/nuxeo/pull/4201#discussion_r457405304", "createdAt": "2020-07-20T13:53:23Z", "author": {"login": "troger"}, "path": "nuxeo-features/rest-api/nuxeo-rest-api-server/src/main/resources/OSGI-INF/properties-contrib.xml", "diffHunk": "@@ -0,0 +1,14 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<component name=\"org.nuxeo.ecm.platform.restapi.server.properties\">\n+\n+  <extension target=\"org.nuxeo.runtime.ConfigurationService\" point=\"configuration\">\n+    <documentation>\n+      This parameter allows enabling multipart file upload. Since Streaming is now the way to go. You can\n+      disable multipart handling here.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee04e2f516f9e7f6300044755b1e196e2ccedac5"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d88feb7f464b7b88b4965984a8889999876723be", "author": {"user": {"login": "NourNuxeo", "name": "Nour AL KOTOB"}}, "url": "https://github.com/nuxeo/nuxeo/commit/d88feb7f464b7b88b4965984a8889999876723be", "committedDate": "2020-07-20T21:41:46Z", "message": "NXP-29246: add MHTML mime-type support"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ee04e2f516f9e7f6300044755b1e196e2ccedac5", "author": {"user": {"login": "NourNuxeo", "name": "Nour AL KOTOB"}}, "url": "https://github.com/nuxeo/nuxeo/commit/ee04e2f516f9e7f6300044755b1e196e2ccedac5", "committedDate": "2020-07-15T17:06:52Z", "message": "NXP-29246: add MHTML mime-type support"}, "afterCommit": {"oid": "d88feb7f464b7b88b4965984a8889999876723be", "author": {"user": {"login": "NourNuxeo", "name": "Nour AL KOTOB"}}, "url": "https://github.com/nuxeo/nuxeo/commit/d88feb7f464b7b88b4965984a8889999876723be", "committedDate": "2020-07-20T21:41:46Z", "message": "NXP-29246: add MHTML mime-type support"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyNDAyOTA3", "url": "https://github.com/nuxeo/nuxeo/pull/4201#pullrequestreview-452402907", "createdAt": "2020-07-21T12:27:51Z", "commit": {"oid": "d88feb7f464b7b88b4965984a8889999876723be"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzMzcxODI2", "url": "https://github.com/nuxeo/nuxeo/pull/4201#pullrequestreview-453371826", "createdAt": "2020-07-22T14:26:51Z", "commit": {"oid": "d88feb7f464b7b88b4965984a8889999876723be"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4726, "cost": 1, "resetAt": "2021-11-03T18:41:40Z"}}}