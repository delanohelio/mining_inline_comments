{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIzOTQ0Mzky", "number": 4480, "title": "NXP-29833: check ACL name is not null on creation", "bodyText": "", "createdAt": "2020-11-19T13:16:49Z", "url": "https://github.com/nuxeo/nuxeo/pull/4480", "merged": true, "mergeCommit": {"oid": "05098275074ec3dd16d68aaa5f48a2a2742709cd"}, "closed": true, "closedAt": "2020-11-23T10:45:37Z", "author": {"login": "charlesboidot"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdeDT_lgH2gAyNTIzOTQ0MzkyOjQyNTlkMmMzODk0ZjQxZjliOTgxMzIyMjJhMzI3OGVjNzJmZTQwNWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdeY0y0gFqTUzNTUxMTE1NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4259d2c3894f41f9b98132222a3278ec72fe405a", "author": {"user": {"login": "charlesboidot", "name": "Charles Boidot"}}, "url": "https://github.com/nuxeo/nuxeo/commit/4259d2c3894f41f9b98132222a3278ec72fe405a", "committedDate": "2020-11-19T14:06:31Z", "message": "NXP-29833: format"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "78386255bd67e982d60388e9f320f4c8c3871983", "author": {"user": {"login": "charlesboidot", "name": "Charles Boidot"}}, "url": "https://github.com/nuxeo/nuxeo/commit/78386255bd67e982d60388e9f320f4c8c3871983", "committedDate": "2020-11-19T10:41:30Z", "message": "NXP-29833: throw a NuxeoException on creating ACLs with null name"}, "afterCommit": {"oid": "188f31afb512a8a42ecb49d8ff70ba175c55f973", "author": {"user": {"login": "charlesboidot", "name": "Charles Boidot"}}, "url": "https://github.com/nuxeo/nuxeo/commit/188f31afb512a8a42ecb49d8ff70ba175c55f973", "committedDate": "2020-11-19T14:06:31Z", "message": "NXP-29833: throw a NuxeoException on creating ACLs with null name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0NjgwMTA5", "url": "https://github.com/nuxeo/nuxeo/pull/4480#pullrequestreview-534680109", "createdAt": "2020-11-19T17:24:31Z", "commit": {"oid": "188f31afb512a8a42ecb49d8ff70ba175c55f973"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxNzoyNDozMVrOH2ph7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxNzoyNjowNlrOH2pmXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA2NTU4MQ==", "bodyText": "There should be a space before ( and around ==.\nBut instead of these 3 lines please use Objects.requireNonNull(name, \"ACL name can't be null\"). It won't throw a NuxeoException but that's not a problem for this kind of check. Unit test will need to be updated of course.", "url": "https://github.com/nuxeo/nuxeo/pull/4480#discussion_r527065581", "createdAt": "2020-11-19T17:24:31Z", "author": {"login": "efge"}, "path": "modules/core/nuxeo-core-api/src/main/java/org/nuxeo/ecm/core/api/security/impl/ACLImpl.java", "diffHunk": "@@ -56,6 +57,9 @@\n     private final boolean isReadOnly;\n \n     public ACLImpl(String name, boolean isReadOnly) {\n+        if(name==null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "188f31afb512a8a42ecb49d8ff70ba175c55f973"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA2NjcxNg==", "bodyText": "Please assert on the message of the exception too:\nassertEquals(\"ACL name can't be null\", e.getMessage());", "url": "https://github.com/nuxeo/nuxeo/pull/4480#discussion_r527066716", "createdAt": "2020-11-19T17:26:06Z", "author": {"login": "efge"}, "path": "modules/core/nuxeo-core-api/src/test/java/org/nuxeo/ecm/core/api/security/TestACL.java", "diffHunk": "@@ -46,6 +48,16 @@ public void testGetName() {\n         assertEquals(\"test acl\", acl.getName());\n     }\n \n+    @Test\n+    public void testExceptionOnNullName() {\n+        try {\n+            acl = new ACLImpl(null, false);\n+            fail(\"ACL is not supposed to be created.\");\n+        } catch (NuxeoException e) {\n+            // Test ok", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "188f31afb512a8a42ecb49d8ff70ba175c55f973"}, "originalPosition": 20}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "188f31afb512a8a42ecb49d8ff70ba175c55f973", "author": {"user": {"login": "charlesboidot", "name": "Charles Boidot"}}, "url": "https://github.com/nuxeo/nuxeo/commit/188f31afb512a8a42ecb49d8ff70ba175c55f973", "committedDate": "2020-11-19T14:06:31Z", "message": "NXP-29833: throw a NuxeoException on creating ACLs with null name"}, "afterCommit": {"oid": "44aae12aee04fea5aa1b8e7858a897646bddf1b7", "author": {"user": {"login": "charlesboidot", "name": "Charles Boidot"}}, "url": "https://github.com/nuxeo/nuxeo/commit/44aae12aee04fea5aa1b8e7858a897646bddf1b7", "committedDate": "2020-11-19T17:44:08Z", "message": "NXP-29833: throw an exception on creating ACLs with null name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0NzE0OTIy", "url": "https://github.com/nuxeo/nuxeo/pull/4480#pullrequestreview-534714922", "createdAt": "2020-11-19T18:05:24Z", "commit": {"oid": "44aae12aee04fea5aa1b8e7858a897646bddf1b7"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1NDg2NDgw", "url": "https://github.com/nuxeo/nuxeo/pull/4480#pullrequestreview-535486480", "createdAt": "2020-11-20T14:42:39Z", "commit": {"oid": "44aae12aee04fea5aa1b8e7858a897646bddf1b7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQxNDo0MjozOVrOH3SjMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQxNDo0MjozOVrOH3SjMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzczNzY0OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    Objects.requireNonNull(name, \"ACL name can't be null\");\n          \n          \n            \n                    this.name = name;\n          \n          \n            \n                    this.name = Objects.requireNonNull(name, \"ACL name can't be null\");", "url": "https://github.com/nuxeo/nuxeo/pull/4480#discussion_r527737649", "createdAt": "2020-11-20T14:42:39Z", "author": {"login": "kevinleturc"}, "path": "modules/core/nuxeo-core-api/src/main/java/org/nuxeo/ecm/core/api/security/impl/ACLImpl.java", "diffHunk": "@@ -56,6 +56,7 @@\n     private final boolean isReadOnly;\n \n     public ACLImpl(String name, boolean isReadOnly) {\n+        Objects.requireNonNull(name, \"ACL name can't be null\");\n         this.name = name;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44aae12aee04fea5aa1b8e7858a897646bddf1b7"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ad5f969d17ab446f133b7d77b62e008d3ff85fc", "author": {"user": {"login": "charlesboidot", "name": "Charles Boidot"}}, "url": "https://github.com/nuxeo/nuxeo/commit/2ad5f969d17ab446f133b7d77b62e008d3ff85fc", "committedDate": "2020-11-20T14:53:25Z", "message": "NXP-29833: throw an exception on creating ACLs with null name"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "44aae12aee04fea5aa1b8e7858a897646bddf1b7", "author": {"user": {"login": "charlesboidot", "name": "Charles Boidot"}}, "url": "https://github.com/nuxeo/nuxeo/commit/44aae12aee04fea5aa1b8e7858a897646bddf1b7", "committedDate": "2020-11-19T17:44:08Z", "message": "NXP-29833: throw an exception on creating ACLs with null name"}, "afterCommit": {"oid": "2ad5f969d17ab446f133b7d77b62e008d3ff85fc", "author": {"user": {"login": "charlesboidot", "name": "Charles Boidot"}}, "url": "https://github.com/nuxeo/nuxeo/commit/2ad5f969d17ab446f133b7d77b62e008d3ff85fc", "committedDate": "2020-11-20T14:53:25Z", "message": "NXP-29833: throw an exception on creating ACLs with null name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1NTAwOTQ5", "url": "https://github.com/nuxeo/nuxeo/pull/4480#pullrequestreview-535500949", "createdAt": "2020-11-20T14:58:59Z", "commit": {"oid": "2ad5f969d17ab446f133b7d77b62e008d3ff85fc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1NTExMTU0", "url": "https://github.com/nuxeo/nuxeo/pull/4480#pullrequestreview-535511154", "createdAt": "2020-11-20T15:10:21Z", "commit": {"oid": "2ad5f969d17ab446f133b7d77b62e008d3ff85fc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4899, "cost": 1, "resetAt": "2021-11-03T18:41:40Z"}}}