{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAxNzU2Mzky", "number": 4378, "title": "improvement NXP 29686 shell scripts docker runtime", "bodyText": "Allow to run shell scripts when starting the Nuxeo Docker image (ENTRYPOINT).\nAlso, document utility scripts to install packages in a Docker image built from the Nuxeo image.", "createdAt": "2020-10-12T19:03:45Z", "url": "https://github.com/nuxeo/nuxeo/pull/4378", "merged": true, "mergeCommit": {"oid": "ff5bffe28b59d2091c82cd6a096120714c988e52"}, "closed": true, "closedAt": "2020-10-14T20:32:39Z", "author": {"login": "ataillefer"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdR4v5igH2gAyNTAxNzU2MzkyOjY1MmVjY2E1NDNlNTIzNjdiMWE4OGI4NGM3MzY2NTJkNjhiODcyNTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSfn4_AFqTUwODUxNzA1OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "652ecca543e52367b1a88b84c736652d68b87252", "author": {"user": {"login": "ataillefer", "name": "Antoine Taillefer"}}, "url": "https://github.com/nuxeo/nuxeo/commit/652ecca543e52367b1a88b84c736652d68b87252", "committedDate": "2020-10-12T19:00:57Z", "message": "NXP-29686: Cleanup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2ODU1MDk3", "url": "https://github.com/nuxeo/nuxeo/pull/4378#pullrequestreview-506855097", "createdAt": "2020-10-12T19:09:46Z", "commit": {"oid": "02054c88e0845d97ce085e01320234de6d99f648"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxOTowOTo0NlrOHgKKag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxOTowOTo0NlrOHgKKag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQ4Mjk4Ng==", "bodyText": ". does a \"source\" of the shell script in the same context as the current script. Meaning it can impact execution of the current script if it redefines environment variables for instance.\nAnother more common option outside of Docker is to just execute the script, but I don't know what's common in the Docker world.", "url": "https://github.com/nuxeo/nuxeo/pull/4378#discussion_r503482986", "createdAt": "2020-10-12T19:09:46Z", "author": {"login": "efge"}, "path": "docker/docker-entrypoint.sh", "diffHunk": "@@ -53,6 +56,15 @@ if [[ ! -f $NUXEO_HOME/configured && ! -f $NUXEO_CONF ]]; then\n   touch $NUXEO_HOME/configured\n fi\n \n+# Handle shell scripts\n+echo \"ENTRYPOINT: Looking for shell scripts in /docker-entrypoint-initnuxeo.d\"\n+for f in /docker-entrypoint-initnuxeo.d/*; do\n+  case \"$f\" in\n+    *.sh)  echo \"Running $f\"; . \"$f\" ;;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "02054c88e0845d97ce085e01320234de6d99f648"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9882d4f4d13daa3af315e8e199254d33522d8515", "author": {"user": {"login": "ataillefer", "name": "Antoine Taillefer"}}, "url": "https://github.com/nuxeo/nuxeo/commit/9882d4f4d13daa3af315e8e199254d33522d8515", "committedDate": "2020-10-13T13:14:13Z", "message": "NXP-29686: Allow to run shell scripts when starting Docker image"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2f015ef2a6a20b12bb8044ef025cda8b9cddf82", "author": {"user": {"login": "ataillefer", "name": "Antoine Taillefer"}}, "url": "https://github.com/nuxeo/nuxeo/commit/c2f015ef2a6a20b12bb8044ef025cda8b9cddf82", "committedDate": "2020-10-13T13:14:13Z", "message": "NXP-29686: Document scripts to install packages in a Docker image from Nuxeo"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "02054c88e0845d97ce085e01320234de6d99f648", "author": {"user": {"login": "ataillefer", "name": "Antoine Taillefer"}}, "url": "https://github.com/nuxeo/nuxeo/commit/02054c88e0845d97ce085e01320234de6d99f648", "committedDate": "2020-10-12T19:01:22Z", "message": "NXP-29686: Document scripts to install packages in a Docker image from Nuxeo"}, "afterCommit": {"oid": "c2f015ef2a6a20b12bb8044ef025cda8b9cddf82", "author": {"user": {"login": "ataillefer", "name": "Antoine Taillefer"}}, "url": "https://github.com/nuxeo/nuxeo/commit/c2f015ef2a6a20b12bb8044ef025cda8b9cddf82", "committedDate": "2020-10-13T13:14:13Z", "message": "NXP-29686: Document scripts to install packages in a Docker image from Nuxeo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NDM5MjU1", "url": "https://github.com/nuxeo/nuxeo/pull/4378#pullrequestreview-507439255", "createdAt": "2020-10-13T13:33:00Z", "commit": {"oid": "c2f015ef2a6a20b12bb8044ef025cda8b9cddf82"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4MzAwMDg2", "url": "https://github.com/nuxeo/nuxeo/pull/4378#pullrequestreview-508300086", "createdAt": "2020-10-14T12:39:22Z", "commit": {"oid": "c2f015ef2a6a20b12bb8044ef025cda8b9cddf82"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NTE3MDU5", "url": "https://github.com/nuxeo/nuxeo/pull/4378#pullrequestreview-508517059", "createdAt": "2020-10-14T16:18:30Z", "commit": {"oid": "c2f015ef2a6a20b12bb8044ef025cda8b9cddf82"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4934, "cost": 1, "resetAt": "2021-11-03T18:41:40Z"}}}