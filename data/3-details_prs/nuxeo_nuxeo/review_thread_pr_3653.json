{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYwMTMzMTI1", "number": 3653, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwOTozOTozN1rODWfEDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwOTozOTozN1rODWfEDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0OTA0MjA2OnYy", "diffSide": "LEFT", "path": "addons/nuxeo-wopi/nuxeo-wopi/src/main/java/org/nuxeo/wopi/Helpers.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwOTozOTozN1rOFbRVEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxNzozNDo0MlrOFbeb-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDEzOTc5NA==", "bodyText": "Isn't it better to keep it as deprecated in a HF?\nI know it's probably not used by any customer, but well, let's be safe.", "url": "https://github.com/nuxeo/nuxeo/pull/3653#discussion_r364139794", "createdAt": "2020-01-08T09:39:37Z", "author": {"login": "troger"}, "path": "addons/nuxeo-wopi/nuxeo-wopi/src/main/java/org/nuxeo/wopi/Helpers.java", "diffHunk": "@@ -100,20 +100,20 @@ public static Blob getEditableBlob(DocumentModel doc, String xpath) {\n                     () -> xpath);\n             return null;\n         }\n-        // ignore external blob providers\n-        if (isExternalBlobProvider(blob)) {\n+        // ignore blob providers that don't support sync\n+        if (!supportsSync(blob)) {\n             log.debug(\n-                    \"Blobs: repository={} docId={} xpath={} Ignoring blob as it is backed by a BlobProvider preventing updates\",\n+                    \"Blobs: repository={} docId={} xpath={} Ignoring blob as it is backed by a BlobProvider preventing sync\",\n                     doc::getRepositoryName, doc::getId, () -> xpath);\n             return null;\n         }\n         return blob;\n     }\n \n-    protected static boolean isExternalBlobProvider(Blob blob) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b409d413fd9f0ea214df5f303e04078f39102482"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDIzMzExNg==", "bodyText": "It's protected so a customer would really have to go through contortions to be able to use it... I'm willing to take the risk here.", "url": "https://github.com/nuxeo/nuxeo/pull/3653#discussion_r364233116", "createdAt": "2020-01-08T13:36:01Z", "author": {"login": "efge"}, "path": "addons/nuxeo-wopi/nuxeo-wopi/src/main/java/org/nuxeo/wopi/Helpers.java", "diffHunk": "@@ -100,20 +100,20 @@ public static Blob getEditableBlob(DocumentModel doc, String xpath) {\n                     () -> xpath);\n             return null;\n         }\n-        // ignore external blob providers\n-        if (isExternalBlobProvider(blob)) {\n+        // ignore blob providers that don't support sync\n+        if (!supportsSync(blob)) {\n             log.debug(\n-                    \"Blobs: repository={} docId={} xpath={} Ignoring blob as it is backed by a BlobProvider preventing updates\",\n+                    \"Blobs: repository={} docId={} xpath={} Ignoring blob as it is backed by a BlobProvider preventing sync\",\n                     doc::getRepositoryName, doc::getId, () -> xpath);\n             return null;\n         }\n         return blob;\n     }\n \n-    protected static boolean isExternalBlobProvider(Blob blob) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDEzOTc5NA=="}, "originalCommit": {"oid": "b409d413fd9f0ea214df5f303e04078f39102482"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDMzNjU5MA==", "bodyText": "Well, I do not agree. We should always keep and deprecate public/protected stuff on the maintenance branches, that's the \"rule\".\nDo as you wish.", "url": "https://github.com/nuxeo/nuxeo/pull/3653#discussion_r364336590", "createdAt": "2020-01-08T16:54:59Z", "author": {"login": "troger"}, "path": "addons/nuxeo-wopi/nuxeo-wopi/src/main/java/org/nuxeo/wopi/Helpers.java", "diffHunk": "@@ -100,20 +100,20 @@ public static Blob getEditableBlob(DocumentModel doc, String xpath) {\n                     () -> xpath);\n             return null;\n         }\n-        // ignore external blob providers\n-        if (isExternalBlobProvider(blob)) {\n+        // ignore blob providers that don't support sync\n+        if (!supportsSync(blob)) {\n             log.debug(\n-                    \"Blobs: repository={} docId={} xpath={} Ignoring blob as it is backed by a BlobProvider preventing updates\",\n+                    \"Blobs: repository={} docId={} xpath={} Ignoring blob as it is backed by a BlobProvider preventing sync\",\n                     doc::getRepositoryName, doc::getId, () -> xpath);\n             return null;\n         }\n         return blob;\n     }\n \n-    protected static boolean isExternalBlobProvider(Blob blob) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDEzOTc5NA=="}, "originalCommit": {"oid": "b409d413fd9f0ea214df5f303e04078f39102482"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDM1NDU1Mw==", "bodyText": "Ok you're right, updated.", "url": "https://github.com/nuxeo/nuxeo/pull/3653#discussion_r364354553", "createdAt": "2020-01-08T17:34:42Z", "author": {"login": "efge"}, "path": "addons/nuxeo-wopi/nuxeo-wopi/src/main/java/org/nuxeo/wopi/Helpers.java", "diffHunk": "@@ -100,20 +100,20 @@ public static Blob getEditableBlob(DocumentModel doc, String xpath) {\n                     () -> xpath);\n             return null;\n         }\n-        // ignore external blob providers\n-        if (isExternalBlobProvider(blob)) {\n+        // ignore blob providers that don't support sync\n+        if (!supportsSync(blob)) {\n             log.debug(\n-                    \"Blobs: repository={} docId={} xpath={} Ignoring blob as it is backed by a BlobProvider preventing updates\",\n+                    \"Blobs: repository={} docId={} xpath={} Ignoring blob as it is backed by a BlobProvider preventing sync\",\n                     doc::getRepositoryName, doc::getId, () -> xpath);\n             return null;\n         }\n         return blob;\n     }\n \n-    protected static boolean isExternalBlobProvider(Blob blob) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDEzOTc5NA=="}, "originalCommit": {"oid": "b409d413fd9f0ea214df5f303e04078f39102482"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4315, "cost": 1, "resetAt": "2021-11-03T18:41:40Z"}}}