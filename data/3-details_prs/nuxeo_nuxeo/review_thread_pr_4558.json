{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ1NDEzODkz", "number": 4558, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMlQxMDoxMDo1MFrOFNnG4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMlQxMDoxMDo1MFrOFNnG4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ5ODE2NTQ3OnYy", "diffSide": "RIGHT", "path": "modules/platform/nuxeo-preview-core/src/main/java/org/nuxeo/ecm/platform/preview/adapter/ZipPreviewer.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMlQxMDoxMDo1MFrOIR6g1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMlQxMDoxMDo1MFrOIR6g1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTY1NTM4MA==", "bodyText": "List<Blob> blobs = result.getBlobs();\nif (Framework.getService(ConfigurationService.class).isBooleanTrue(SANITIZE_ZIP_PREVIEW)) {\n    blobs.replaceAll(this::sanitize);\n}\nreturn blobs;", "url": "https://github.com/nuxeo/nuxeo/pull/4558#discussion_r555655380", "createdAt": "2021-01-12T10:10:50Z", "author": {"login": "efge"}, "path": "modules/platform/nuxeo-preview-core/src/main/java/org/nuxeo/ecm/platform/preview/adapter/ZipPreviewer.java", "diffHunk": "@@ -69,7 +72,11 @@\n \n         try {\n             BlobHolder result = conversionService.convert(converterName, new SimpleBlobHolder(blob), null);\n-            return result.getBlobs().stream().map(this::sanitize).collect(Collectors.toList());\n+            if (Framework.getService(ConfigurationService.class).isBooleanTrue(SANITIZE_ZIP_PREVIEW)) {\n+                return result.getBlobs().stream().map(this::sanitize).collect(Collectors.toList());\n+            } else {\n+                return result.getBlobs();\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14404ee6b143bba5bf261cb49fa467e59fa82064"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4300, "cost": 1, "resetAt": "2021-11-03T18:41:40Z"}}}