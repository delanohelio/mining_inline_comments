{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzMTQwMjg1", "number": 3999, "title": "improvement-NXP-28849-Make-ColdStorage-an-addon", "bodyText": "PR created from https://qa.nuxeo.org/jenkins/job/TestAndPush/job/ondemand-testandpush-saouana/237/\nT&P OK for MongoDB: https://qa.nuxeo.org/jenkins/job/TestAndPush/job/ondemand-testandpush-saouana-2/11/", "createdAt": "2020-05-04T19:28:46Z", "url": "https://github.com/nuxeo/nuxeo/pull/3999", "merged": true, "mergeCommit": {"oid": "7f83cf71359fe52eb160a377dcf594eca6d11573"}, "closed": true, "closedAt": "2020-05-11T09:33:23Z", "author": {"login": "nuxeojenkins"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABceVplJAFqTQwNTg3MzMwNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABce5PG3AFqTQwNzI2ODEzNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1ODczMzA3", "url": "https://github.com/nuxeo/nuxeo/pull/3999#pullrequestreview-405873307", "createdAt": "2020-05-05T14:57:30Z", "commit": {"oid": "87df1d3cc43a6e3276b870aae4a523bba2ac9009"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNDo1NzozMFrOGQtgGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNToxNjowOVrOGQuWYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDE3NTg5Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              <description>Nuxo cold storage allows the cold storage of document content. This can be needed for archiving,\n          \n          \n            \n              <description>Nuxeo cold storage allows the cold storage of document content. This can be needed for archiving,", "url": "https://github.com/nuxeo/nuxeo/pull/3999#discussion_r420175896", "createdAt": "2020-05-05T14:57:30Z", "author": {"login": "troger"}, "path": "modules/platform/nuxeo-coldstorage/pom.xml", "diffHunk": "@@ -0,0 +1,51 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <groupId>org.nuxeo.ecm.platform</groupId>\n+    <artifactId>nuxeo-platform-parent</artifactId>\n+    <version>11.1-SNAPSHOT</version>\n+  </parent>\n+\n+  <groupId>org.nuxeo</groupId>\n+  <artifactId>nuxeo-coldstorage</artifactId>\n+  <name>Nuxeo cold storage</name>\n+  <description>Nuxo cold storage allows the cold storage of document content. This can be needed for archiving,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87df1d3cc43a6e3276b870aae4a523bba2ac9009"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDE4MDc3Mg==", "bodyText": "Is he aware? :p", "url": "https://github.com/nuxeo/nuxeo/pull/3999#discussion_r420180772", "createdAt": "2020-05-05T15:04:02Z", "author": {"login": "troger"}, "path": "modules/platform/nuxeo-coldstorage/src/main/java/org/nuxeo/coldstorage/helpers/ColdStorageHelper.java", "diffHunk": "@@ -15,10 +15,9 @@\n  *\n  * Contributors:\n  *     Salem Aouana\n- *     Nuno Cunha <ncunha@nuxeo.com>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87df1d3cc43a6e3276b870aae4a523bba2ac9009"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDE4MjgwNw==", "bodyText": "Not needed.", "url": "https://github.com/nuxeo/nuxeo/pull/3999#discussion_r420182807", "createdAt": "2020-05-05T15:06:47Z", "author": {"login": "troger"}, "path": "modules/platform/nuxeo-coldstorage/src/main/java/org/nuxeo/coldstorage/events/CheckColdStorageContentAvailabilityListener.java", "diffHunk": "@@ -12,20 +12,20 @@\n  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n  * See the License for the specific language governing permissions and\n  * limitations under the License.\n- *\n+ *  ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87df1d3cc43a6e3276b870aae4a523bba2ac9009"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDE4Mzk3MA==", "bodyText": "You probably don't need that.", "url": "https://github.com/nuxeo/nuxeo/pull/3999#discussion_r420183970", "createdAt": "2020-05-05T15:08:17Z", "author": {"login": "troger"}, "path": "modules/platform/nuxeo-coldstorage/src/main/resources/OSGI-INF/coldstorage-core-types-contrib.xml", "diffHunk": "@@ -0,0 +1,17 @@\n+<?xml version=\"1.0\"?>\n+<component name=\"org.nuxeo.retention.types\">\n+\n+  <require>org.nuxeo.ecm.core.CoreExtensions</require>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87df1d3cc43a6e3276b870aae4a523bba2ac9009"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDE4NDU1Nw==", "bodyText": "Not needed, it should be implicit when contributing to the component.", "url": "https://github.com/nuxeo/nuxeo/pull/3999#discussion_r420184557", "createdAt": "2020-05-05T15:09:04Z", "author": {"login": "troger"}, "path": "modules/platform/nuxeo-coldstorage/src/main/resources/OSGI-INF/coldstorage-events-contrib.xml", "diffHunk": "@@ -1,6 +1,7 @@\n <?xml version=\"1.0\"?>\n-<component name=\"org.nuxeo.ecm.core.coldstorage.contrib\">\n+<component name=\"org.nuxeo.coldstorage.events.contrib\">\n \n+  <require>org.nuxeo.ecm.core.scheduler.SchedulerService</require>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87df1d3cc43a6e3276b870aae4a523bba2ac9009"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDE4NDY1NQ==", "bodyText": "Same as above.", "url": "https://github.com/nuxeo/nuxeo/pull/3999#discussion_r420184655", "createdAt": "2020-05-05T15:09:11Z", "author": {"login": "troger"}, "path": "modules/platform/nuxeo-coldstorage/src/main/resources/OSGI-INF/coldstorage-events-contrib.xml", "diffHunk": "@@ -9,17 +10,19 @@\n     </schedule>\n   </extension>\n \n+  <require>org.nuxeo.ecm.core.event.EventServiceComponent</require>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87df1d3cc43a6e3276b870aae4a523bba2ac9009"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDE4NDc4NQ==", "bodyText": "Same as above.", "url": "https://github.com/nuxeo/nuxeo/pull/3999#discussion_r420184785", "createdAt": "2020-05-05T15:09:20Z", "author": {"login": "troger"}, "path": "modules/platform/nuxeo-coldstorage/src/main/resources/OSGI-INF/coldstorage-events-contrib.xml", "diffHunk": "@@ -9,17 +10,19 @@\n     </schedule>\n   </extension>\n \n+  <require>org.nuxeo.ecm.core.event.EventServiceComponent</require>\n   <extension target=\"org.nuxeo.ecm.core.event.EventServiceComponent\" point=\"listener\">\n     <listener name=\"checkColdStorageContentAvailability\"\n-              class=\"org.nuxeo.ecm.core.coldstorage.CheckColdStorageContentAvailabilityListener\">\n+              class=\"org.nuxeo.coldstorage.events.CheckColdStorageContentAvailabilityListener\">\n       <event>checkColdStorageContentAvailability</event>\n     </listener>\n     <listener name=\"checkUpdateMainContentInColdStorage\"\n-              class=\"org.nuxeo.ecm.core.coldstorage.CheckUpdateMainContentInColdStorage\">\n+              class=\"org.nuxeo.coldstorage.events.CheckUpdateMainContentInColdStorage\">\n       <event>beforeDocumentModification</event>\n     </listener>\n   </extension>\n \n+  <require>org.nuxeo.ecm.platform.ec.notification.service.NotificationService</require>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87df1d3cc43a6e3276b870aae4a523bba2ac9009"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDE4NDkxNQ==", "bodyText": "Not needed.", "url": "https://github.com/nuxeo/nuxeo/pull/3999#discussion_r420184915", "createdAt": "2020-05-05T15:09:30Z", "author": {"login": "troger"}, "path": "modules/platform/nuxeo-coldstorage/src/main/resources/OSGI-INF/coldstorage-operations-contrib.xml", "diffHunk": "@@ -0,0 +1,11 @@\n+<?xml version=\"1.0\"?>\n+<component name=\"org.nuxeo.coldstorage.operations.contrib\" version=\"1.0\">\n+\n+  <require>org.nuxeo.ecm.core.operation.OperationServiceComponent</require>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87df1d3cc43a6e3276b870aae4a523bba2ac9009"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDE4NjMwMw==", "bodyText": "\ud83d\ude04", "url": "https://github.com/nuxeo/nuxeo/pull/3999#discussion_r420186303", "createdAt": "2020-05-05T15:11:21Z", "author": {"login": "troger"}, "path": "modules/platform/nuxeo-coldstorage/src/test/java/org/nuxeo/coldstorage/operations/MoveToColdStorageTest.java", "diffHunk": "@@ -15,10 +15,9 @@\n  *\n  * Contributors:\n  *     Salem Aouana\n- *     Nuno Cunha <ncunha@nuxeo.com>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87df1d3cc43a6e3276b870aae4a523bba2ac9009"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDE4NjU1Mw==", "bodyText": "Not needed.", "url": "https://github.com/nuxeo/nuxeo/pull/3999#discussion_r420186553", "createdAt": "2020-05-05T15:11:42Z", "author": {"login": "troger"}, "path": "modules/platform/nuxeo-coldstorage/src/test/resources/META-INF/MANIFEST.MF", "diffHunk": "@@ -0,0 +1,11 @@\n+Manifest-Version: 1.0\n+Bundle-ManifestVersion: 2\n+Bundle-Name: Nuxeo Cold Storage Test\n+Bundle-SymbolicName: org.nuxeo.coldstorage.test;singleton:=true\n+Bundle-Vendor: Nuxeo\n+Bundle-Localization: bundle\n+Eclipse-LazyStart: true\n+Nuxeo-Component: OSGI-INF/test-coldstorage-contrib.xml,\n+ OSGI-INF/test-dummy-thumbnail-factory-contrib.xml\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87df1d3cc43a6e3276b870aae4a523bba2ac9009"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDE4NjkxNQ==", "bodyText": "Not sure you need this file at all.", "url": "https://github.com/nuxeo/nuxeo/pull/3999#discussion_r420186915", "createdAt": "2020-05-05T15:12:09Z", "author": {"login": "troger"}, "path": "modules/platform/nuxeo-coldstorage/src/test/resources/META-INF/MANIFEST.MF", "diffHunk": "@@ -0,0 +1,11 @@\n+Manifest-Version: 1.0", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87df1d3cc43a6e3276b870aae4a523bba2ac9009"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDE4NzU0Nw==", "bodyText": "Could you sort it alphabetically as other modules?", "url": "https://github.com/nuxeo/nuxeo/pull/3999#discussion_r420187547", "createdAt": "2020-05-05T15:13:00Z", "author": {"login": "troger"}, "path": "modules/platform/pom.xml", "diffHunk": "@@ -116,6 +116,7 @@\n     <module>nuxeo-webengine</module>\n     <module>nuxeo-wopi</module>\n     <module>rest-api</module>\n+    <module>nuxeo-coldstorage</module>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87df1d3cc43a6e3276b870aae4a523bba2ac9009"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDE4ODEyNw==", "bodyText": "What is this file for?", "url": "https://github.com/nuxeo/nuxeo/pull/3999#discussion_r420188127", "createdAt": "2020-05-05T15:13:48Z", "author": {"login": "troger"}, "path": "packages/nuxeo-coldstorage-package/src/main/resources/install.templates.coldstorage/nuxeo.defaults", "diffHunk": "@@ -0,0 +1,3 @@\n+## DO NOT EDIT THIS FILE, USE nuxeo.conf  ##", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87df1d3cc43a6e3276b870aae4a523bba2ac9009"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDE4OTI2NQ==", "bodyText": "Sort it.", "url": "https://github.com/nuxeo/nuxeo/pull/3999#discussion_r420189265", "createdAt": "2020-05-05T15:15:24Z", "author": {"login": "troger"}, "path": "packages/pom.xml", "diffHunk": "@@ -43,6 +43,7 @@\n     <module>nuxeo-template-rendering-package</module>\n     <module>nuxeo-tree-snapshot-package</module>\n     <module>nuxeo-wopi-package</module>\n+    <module>nuxeo-coldstorage-package</module>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87df1d3cc43a6e3276b870aae4a523bba2ac9009"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDE4OTc5NA==", "bodyText": "Sort it alphabetically, and missing type zip.", "url": "https://github.com/nuxeo/nuxeo/pull/3999#discussion_r420189794", "createdAt": "2020-05-05T15:16:09Z", "author": {"login": "troger"}, "path": "pom.xml", "diffHunk": "@@ -2151,6 +2158,11 @@\n         <version>${nuxeo.platform.version}</version>\n         <type>zip</type>\n       </dependency>\n+      <dependency>\n+        <groupId>org.nuxeo.packages</groupId>\n+        <artifactId>nuxeo-coldstorage-package</artifactId>\n+        <version>${nuxeo.platform.version}</version>\n+      </dependency>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87df1d3cc43a6e3276b870aae4a523bba2ac9009"}, "originalPosition": 22}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "87df1d3cc43a6e3276b870aae4a523bba2ac9009", "author": {"user": {"login": "RSalem07", "name": "Salem Aouana"}}, "url": "https://github.com/nuxeo/nuxeo/commit/87df1d3cc43a6e3276b870aae4a523bba2ac9009", "committedDate": "2020-05-04T08:47:23Z", "message": "NXP-28849: Make ColdStorage an addon"}, "afterCommit": {"oid": "d8afca9a888c6b28357f67630b83bcb24c1dec88", "author": {"user": {"login": "RSalem07", "name": "Salem Aouana"}}, "url": "https://github.com/nuxeo/nuxeo/commit/d8afca9a888c6b28357f67630b83bcb24c1dec88", "committedDate": "2020-05-06T13:00:34Z", "message": "NXP-28849: Make ColdStorage an addon"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "013714853c3b88423ac934289627d6b1a5729c88", "author": {"user": {"login": "RSalem07", "name": "Salem Aouana"}}, "url": "https://github.com/nuxeo/nuxeo/commit/013714853c3b88423ac934289627d6b1a5729c88", "committedDate": "2020-05-06T13:05:24Z", "message": "NXP-28849: Make ColdStorage an addon"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d8afca9a888c6b28357f67630b83bcb24c1dec88", "author": {"user": {"login": "RSalem07", "name": "Salem Aouana"}}, "url": "https://github.com/nuxeo/nuxeo/commit/d8afca9a888c6b28357f67630b83bcb24c1dec88", "committedDate": "2020-05-06T13:00:34Z", "message": "NXP-28849: Make ColdStorage an addon"}, "afterCommit": {"oid": "013714853c3b88423ac934289627d6b1a5729c88", "author": {"user": {"login": "RSalem07", "name": "Salem Aouana"}}, "url": "https://github.com/nuxeo/nuxeo/commit/013714853c3b88423ac934289627d6b1a5729c88", "committedDate": "2020-05-06T13:05:24Z", "message": "NXP-28849: Make ColdStorage an addon"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2Nzg3MTI1", "url": "https://github.com/nuxeo/nuxeo/pull/3999#pullrequestreview-406787125", "createdAt": "2020-05-06T16:31:58Z", "commit": {"oid": "013714853c3b88423ac934289627d6b1a5729c88"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3MjY4MTM3", "url": "https://github.com/nuxeo/nuxeo/pull/3999#pullrequestreview-407268137", "createdAt": "2020-05-07T08:44:54Z", "commit": {"oid": "013714853c3b88423ac934289627d6b1a5729c88"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4794, "cost": 1, "resetAt": "2021-11-03T18:41:40Z"}}}