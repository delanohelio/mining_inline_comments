{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk3OTc3ODUy", "number": 4357, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwODoxMToxOFrOEqnUjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNDo0OTowMVrOEwSsxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzMTE5ODg1OnYy", "diffSide": "RIGHT", "path": "modules/runtime/nuxeo-connect-standalone/src/main/java/org/nuxeo/connect/update/xml/PackageDefinitionImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwODoxMToxOFrOHc6ztw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwODo1MDozNVrOHc8XEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDA4NTY4Nw==", "bodyText": "Could you add a deprecated tag since 11.3 in the javadoc?", "url": "https://github.com/nuxeo/nuxeo/pull/4357#discussion_r500085687", "createdAt": "2020-10-06T08:11:18Z", "author": {"login": "kevinleturc"}, "path": "modules/runtime/nuxeo-connect-standalone/src/main/java/org/nuxeo/connect/update/xml/PackageDefinitionImpl.java", "diffHunk": "@@ -82,8 +82,15 @@\n     /**\n      * The target platforms where this package may be installed.\n      */\n+    @Deprecated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a28fcaad402cc61694c4d0e674a507439d88f3d"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDExMTEyMA==", "bodyText": "Forgot to remove it, it should not be deprecated as it will still be used by LTS packages, good catch", "url": "https://github.com/nuxeo/nuxeo/pull/4357#discussion_r500111120", "createdAt": "2020-10-06T08:50:35Z", "author": {"login": "yjulienne-nuxeo"}, "path": "modules/runtime/nuxeo-connect-standalone/src/main/java/org/nuxeo/connect/update/xml/PackageDefinitionImpl.java", "diffHunk": "@@ -82,8 +82,15 @@\n     /**\n      * The target platforms where this package may be installed.\n      */\n+    @Deprecated", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDA4NTY4Nw=="}, "originalCommit": {"oid": "1a28fcaad402cc61694c4d0e674a507439d88f3d"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzMTIwNTAxOnYy", "diffSide": "RIGHT", "path": "modules/runtime/nuxeo-connect-standalone/src/main/java/org/nuxeo/connect/update/xml/PackageDefinitionImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwODoxMjo0MlrOHc63Xg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwODoxMjo0MlrOHc63Xg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDA4NjYyMg==", "bodyText": "Could you add the @since 11.3 tag to methods/fields you add?", "url": "https://github.com/nuxeo/nuxeo/pull/4357#discussion_r500086622", "createdAt": "2020-10-06T08:12:42Z", "author": {"login": "kevinleturc"}, "path": "modules/runtime/nuxeo-connect-standalone/src/main/java/org/nuxeo/connect/update/xml/PackageDefinitionImpl.java", "diffHunk": "@@ -82,8 +82,15 @@\n     /**\n      * The target platforms where this package may be installed.\n      */\n+    @Deprecated\n     protected String[] platforms;\n \n+    /**\n+     * The target platform range where this package may be installed.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a28fcaad402cc61694c4d0e674a507439d88f3d"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5MDUyMzE0OnYy", "diffSide": "RIGHT", "path": "modules/runtime/nuxeo-connect-standalone/src/test/java/org/nuxeo/launcher/connect/TestConnectBroker.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNDowOTo0NFrOHlubxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNDowOTo0NFrOHlubxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTMyMDEzNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // GIVEN current target platform is server-11.2\n          \n          \n            \n                    // GIVEN current target platform is server-11.2.3\n          \n      \n    \n    \n  \n\n?", "url": "https://github.com/nuxeo/nuxeo/pull/4357#discussion_r509320134", "createdAt": "2020-10-21T14:09:44Z", "author": {"login": "troger"}, "path": "modules/runtime/nuxeo-connect-standalone/src/test/java/org/nuxeo/launcher/connect/TestConnectBroker.java", "diffHunk": "@@ -897,6 +991,85 @@ public void testInstallLocalPackageRequest() {\n         assertThat(logOf(logCaptureResult)).isEqualTo(expectedLogs);\n     }\n \n+    @Test\n+    @LogCaptureFeature.FilterWith(PkgRequestLogFilter.class)\n+    public void testInstallLocalPackageRequestWithRange() throws Exception {\n+        // GIVEN current target platform is server-11.2", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d55e0ac9a2b103592ec32f955c7d3fccc1438a2c"}, "originalPosition": 117}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5MDczNDc5OnYy", "diffSide": "RIGHT", "path": "modules/runtime/nuxeo-connect-standalone/src/main/java/org/nuxeo/launcher/connect/ConnectBroker.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNDo0OTowMVrOHlwgQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNDo0OTowMVrOHlwgQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTM1NDA0OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                            () -> actualTargetPlatform.asString(), () -> String.join(\", \", nonCompliantPkg));\n          \n          \n            \n                                            actualTargetPlatform::asString, () -> String.join(\", \", nonCompliantPkg));", "url": "https://github.com/nuxeo/nuxeo/pull/4357#discussion_r509354048", "createdAt": "2020-10-21T14:49:01Z", "author": {"login": "kevinleturc"}, "path": "modules/runtime/nuxeo-connect-standalone/src/main/java/org/nuxeo/launcher/connect/ConnectBroker.java", "diffHunk": "@@ -1181,12 +1182,12 @@ public boolean pkgRequest(List<String> pkgsToAdd, List<String> pkgsToInstall, Li\n                         relax = readConsole(\n                                 \"Package(s) %s not available on platform version %s.\\n\"\n                                         + \"Do you want to relax the constraint (yes/no)? [no] \",\n-                                \"no\", StringUtils.join(nonCompliantPkg, \", \"), actualTargetPlatform);\n+                                \"no\", StringUtils.join(nonCompliantPkg, \", \"), actualTargetPlatform.asString());\n                     }\n \n                     if (Boolean.parseBoolean(relax)) {\n                         log.warn(\"Relax restriction to target platform {} because of package(s) {}\",\n-                                () -> actualTargetPlatform, () -> String.join(\", \", nonCompliantPkg));\n+                                () -> actualTargetPlatform.asString(), () -> String.join(\", \", nonCompliantPkg));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d55e0ac9a2b103592ec32f955c7d3fccc1438a2c"}, "originalPosition": 75}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4322, "cost": 1, "resetAt": "2021-11-03T18:41:40Z"}}}