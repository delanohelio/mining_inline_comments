{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYzNjEzMjYy", "number": 4240, "title": "impr-NXP-29495-add-saml-postAuthenticationProcessChecks-10.10", "bodyText": "PR created from https://qa2.nuxeo.org/jenkins/job/TestAndPush/job/ondemand-testandpush-hbrown-10.10/1/", "createdAt": "2020-08-05T20:02:11Z", "url": "https://github.com/nuxeo/nuxeo/pull/4240", "merged": true, "mergeCommit": {"oid": "278368eef19940189e1a0b3f3acd3b0f3833419a"}, "closed": true, "closedAt": "2020-08-07T13:01:35Z", "author": {"login": "nuxeojenkins"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8CtyxAFqTQ2MjA1ODY0OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8RdIygFqTQ2MjYyNDE0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyMDU4NjQ4", "url": "https://github.com/nuxeo/nuxeo/pull/4240#pullrequestreview-462058648", "createdAt": "2020-08-05T22:09:49Z", "commit": {"oid": "5aeb69c55f2e0cae2d4f6cc2bb14f6b00d05c72c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQyMjowOTo0OVrOG8cXFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQyMjoxMToxN1rOG8cZSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjAzMjQwNA==", "bodyText": "Please add a newline at end of file", "url": "https://github.com/nuxeo/nuxeo/pull/4240#discussion_r466032404", "createdAt": "2020-08-05T22:09:49Z", "author": {"login": "efge"}, "path": "nuxeo-services/login/nuxeo-platform-login-saml2/src/main/java/org/nuxeo/ecm/platform/auth/saml/SAMLAuthenticationProvider.java", "diffHunk": "@@ -645,4 +647,8 @@ private void removeCookie(HttpServletResponse httpResponse, Cookie cookie) {\n         cookie.setValue(\"\");\n         httpResponse.addCookie(cookie);\n     }\n-}\n+\n+    protected Optional<String> postAuthenticationProcessChecks(UserResolver userResolver, SAMLCredential credential) {\n+       return Optional.ofNullable(Framework.doPrivileged(() -> userResolver.findOrCreateNuxeoUser(credential)));\n+    }\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5aeb69c55f2e0cae2d4f6cc2bb14f6b00d05c72c"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjAzMjk3MQ==", "bodyText": "This method should be renamed. findOrCreateNuxeoUser is a better name.", "url": "https://github.com/nuxeo/nuxeo/pull/4240#discussion_r466032971", "createdAt": "2020-08-05T22:11:17Z", "author": {"login": "efge"}, "path": "nuxeo-services/login/nuxeo-platform-login-saml2/src/main/java/org/nuxeo/ecm/platform/auth/saml/SAMLAuthenticationProvider.java", "diffHunk": "@@ -645,4 +647,8 @@ private void removeCookie(HttpServletResponse httpResponse, Cookie cookie) {\n         cookie.setValue(\"\");\n         httpResponse.addCookie(cookie);\n     }\n-}\n+\n+    protected Optional<String> postAuthenticationProcessChecks(UserResolver userResolver, SAMLCredential credential) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5aeb69c55f2e0cae2d4f6cc2bb14f6b00d05c72c"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3c33d81f9baf78eafb030d63c6c2265393fa2ee", "author": {"user": {"login": "harlanbrown", "name": null}}, "url": "https://github.com/nuxeo/nuxeo/commit/e3c33d81f9baf78eafb030d63c6c2265393fa2ee", "committedDate": "2020-08-06T13:23:33Z", "message": "NXP-29495: Add postAuthenticationProcessChecks to SAMLAuthenticationProvider"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5aeb69c55f2e0cae2d4f6cc2bb14f6b00d05c72c", "author": {"user": {"login": "harlanbrown", "name": null}}, "url": "https://github.com/nuxeo/nuxeo/commit/5aeb69c55f2e0cae2d4f6cc2bb14f6b00d05c72c", "committedDate": "2020-08-05T16:31:40Z", "message": "NXP-29495: Add postAuthenticationProcessChecks to SAMLAuthenticationProvider"}, "afterCommit": {"oid": "e3c33d81f9baf78eafb030d63c6c2265393fa2ee", "author": {"user": {"login": "harlanbrown", "name": null}}, "url": "https://github.com/nuxeo/nuxeo/commit/e3c33d81f9baf78eafb030d63c6c2265393fa2ee", "committedDate": "2020-08-06T13:23:33Z", "message": "NXP-29495: Add postAuthenticationProcessChecks to SAMLAuthenticationProvider"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNTUxNDI0", "url": "https://github.com/nuxeo/nuxeo/pull/4240#pullrequestreview-462551424", "createdAt": "2020-08-06T14:04:44Z", "commit": {"oid": "e3c33d81f9baf78eafb030d63c6c2265393fa2ee"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNjI0MTQw", "url": "https://github.com/nuxeo/nuxeo/pull/4240#pullrequestreview-462624140", "createdAt": "2020-08-06T15:21:45Z", "commit": {"oid": "e3c33d81f9baf78eafb030d63c6c2265393fa2ee"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4993, "cost": 1, "resetAt": "2021-11-03T18:41:40Z"}}}