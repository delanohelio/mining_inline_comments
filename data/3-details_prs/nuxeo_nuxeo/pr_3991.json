{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyMTY0ODQ1", "number": 3991, "title": "NXP-29057: don't save toplevel properties that aren't dirty", "bodyText": "T&P ok https://qa.nuxeo.org/jenkins/job/TestAndPush/job/ondemand-testandpush-fguillaume/813/", "createdAt": "2020-05-01T15:01:07Z", "url": "https://github.com/nuxeo/nuxeo/pull/3991", "merged": true, "mergeCommit": {"oid": "e263972e9373f139191de6a336d2ca7cf5c19120"}, "closed": true, "closedAt": "2020-05-04T10:40:10Z", "author": {"login": "efge"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcdDC5fABqjMyOTM0NDY1MDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcd9EStgBqjMyOTkyNzIxNTY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eed1a34ee2a84cb3e0ba5a8d4de72c3e04ba25a5", "author": {"user": {"login": "efge", "name": "Florent Guillaume"}}, "url": "https://github.com/nuxeo/nuxeo/commit/eed1a34ee2a84cb3e0ba5a8d4de72c3e04ba25a5", "committedDate": "2020-05-01T14:59:37Z", "message": "NXP-29057: don't save toplevel properties that aren't dirty"}, "afterCommit": {"oid": "303eb944d61c5cb6eb317756282ec3cfdf91c1f5", "author": {"user": {"login": "efge", "name": "Florent Guillaume"}}, "url": "https://github.com/nuxeo/nuxeo/commit/303eb944d61c5cb6eb317756282ec3cfdf91c1f5", "committedDate": "2020-05-01T15:02:38Z", "message": "NXP-29057: don't save toplevel properties that aren't dirty"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "303eb944d61c5cb6eb317756282ec3cfdf91c1f5", "author": {"user": {"login": "efge", "name": "Florent Guillaume"}}, "url": "https://github.com/nuxeo/nuxeo/commit/303eb944d61c5cb6eb317756282ec3cfdf91c1f5", "committedDate": "2020-05-01T15:02:38Z", "message": "NXP-29057: don't save toplevel properties that aren't dirty"}, "afterCommit": {"oid": "190d483350aee5a3308f0aca73882e49a85b1dd5", "author": {"user": {"login": "efge", "name": "Florent Guillaume"}}, "url": "https://github.com/nuxeo/nuxeo/commit/190d483350aee5a3308f0aca73882e49a85b1dd5", "committedDate": "2020-05-02T16:59:58Z", "message": "NXP-29057: don't save toplevel properties that aren't dirty (except on creation)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NzU4OTEy", "url": "https://github.com/nuxeo/nuxeo/pull/3991#pullrequestreview-404758912", "createdAt": "2020-05-04T07:30:22Z", "commit": {"oid": "190d483350aee5a3308f0aca73882e49a85b1dd5"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NzczOTA1", "url": "https://github.com/nuxeo/nuxeo/pull/3991#pullrequestreview-404773905", "createdAt": "2020-05-04T07:57:38Z", "commit": {"oid": "190d483350aee5a3308f0aca73882e49a85b1dd5"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwNzo1NzozOFrOGP2Cdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwODozNTo0MVrOGP3K3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTI2NzE5MQ==", "bodyText": "Worth adding @since 11.1", "url": "https://github.com/nuxeo/nuxeo/pull/3991#discussion_r419267191", "createdAt": "2020-05-04T07:57:38Z", "author": {"login": "troger"}, "path": "modules/core/nuxeo-core-api/src/main/java/org/nuxeo/ecm/core/model/Document.java", "diffHunk": "@@ -443,9 +443,25 @@\n      * <p>\n      * Writing data is done by {@link DocumentPart} because of per-proxy schemas.\n      *\n+     * @param dp the document part\n+     * @param writeContext the write context\n+     * @param create whether this is for a document creation", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "190d483350aee5a3308f0aca73882e49a85b1dd5"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTI4NTcyNA==", "bodyText": "Since 11.1.", "url": "https://github.com/nuxeo/nuxeo/pull/3991#discussion_r419285724", "createdAt": "2020-05-04T08:35:41Z", "author": {"login": "troger"}, "path": "modules/core/nuxeo-core/src/main/java/org/nuxeo/ecm/core/api/DocumentModelFactory.java", "diffHunk": "@@ -192,6 +192,14 @@ public static DataModel createDataModel(Document doc, Schema schema) {\n      */\n     @SuppressWarnings(\"deprecation\")\n     public static DocumentModel writeDocumentModel(DocumentModel docModel, Document doc) {\n+        return writeDocumentModel(docModel, doc, false);\n+    }\n+\n+    /**\n+     * Writes a document model to a document. Returns the re-read document model.\n+     */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "190d483350aee5a3308f0aca73882e49a85b1dd5"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d49b66686bd3e198544a86912f471ce947b9f4e", "author": {"user": {"login": "efge", "name": "Florent Guillaume"}}, "url": "https://github.com/nuxeo/nuxeo/commit/2d49b66686bd3e198544a86912f471ce947b9f4e", "committedDate": "2020-05-04T10:38:37Z", "message": "NXP-29057: don't save toplevel properties that aren't dirty (except on creation)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "190d483350aee5a3308f0aca73882e49a85b1dd5", "author": {"user": {"login": "efge", "name": "Florent Guillaume"}}, "url": "https://github.com/nuxeo/nuxeo/commit/190d483350aee5a3308f0aca73882e49a85b1dd5", "committedDate": "2020-05-02T16:59:58Z", "message": "NXP-29057: don't save toplevel properties that aren't dirty (except on creation)"}, "afterCommit": {"oid": "2d49b66686bd3e198544a86912f471ce947b9f4e", "author": {"user": {"login": "efge", "name": "Florent Guillaume"}}, "url": "https://github.com/nuxeo/nuxeo/commit/2d49b66686bd3e198544a86912f471ce947b9f4e", "committedDate": "2020-05-04T10:38:37Z", "message": "NXP-29057: don't save toplevel properties that aren't dirty (except on creation)"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4790, "cost": 1, "resetAt": "2021-11-03T18:41:40Z"}}}