{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI4NTYzNTA2", "number": 4120, "title": "task-NXP-28937-release-pipeline", "bodyText": "", "createdAt": "2020-06-05T16:28:48Z", "url": "https://github.com/nuxeo/nuxeo/pull/4120", "merged": true, "mergeCommit": {"oid": "2f8345d592a4719988fd3967d59b49e54f974f21"}, "closed": true, "closedAt": "2020-06-08T09:59:44Z", "author": {"login": "ataillefer"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcoVTjagBqjM0MTIxNTc0OTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcpNGO2gFqTQyNjA2MTQxMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bb45af7c09e06f859657b7ec85282ebf993d0591", "author": {"user": {"login": "ataillefer", "name": "Antoine Taillefer"}}, "url": "https://github.com/nuxeo/nuxeo/commit/bb45af7c09e06f859657b7ec85282ebf993d0591", "committedDate": "2020-06-05T16:27:24Z", "message": "NXP-28937: Add Jenkinsfile to promote a build as a release"}, "afterCommit": {"oid": "61a746ca6819fe64f0832cf612697ee78ca85821", "author": {"user": {"login": "ataillefer", "name": "Antoine Taillefer"}}, "url": "https://github.com/nuxeo/nuxeo/commit/61a746ca6819fe64f0832cf612697ee78ca85821", "committedDate": "2020-06-05T16:32:11Z", "message": "NXP-28937: Add Jenkinsfile to promote a build as a release"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "44e9da06564e5ce8c075bd0e2d5b4a74bda29a64", "author": {"user": {"login": "ataillefer", "name": "Antoine Taillefer"}}, "url": "https://github.com/nuxeo/nuxeo/commit/44e9da06564e5ce8c075bd0e2d5b4a74bda29a64", "committedDate": "2020-06-05T16:46:33Z", "message": "NXP-28937: Improve git calls"}, "afterCommit": {"oid": "667de37ab8ad07f691b84176ea187f97bfcc7073", "author": {"user": {"login": "ataillefer", "name": "Antoine Taillefer"}}, "url": "https://github.com/nuxeo/nuxeo/commit/667de37ab8ad07f691b84176ea187f97bfcc7073", "committedDate": "2020-06-08T08:17:41Z", "message": "NXP-28937: Improve git calls"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2MDA3MTYx", "url": "https://github.com/nuxeo/nuxeo/pull/4120#pullrequestreview-426007161", "createdAt": "2020-06-08T08:19:46Z", "commit": {"oid": "667de37ab8ad07f691b84176ea187f97bfcc7073"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2MDE0MzU4", "url": "https://github.com/nuxeo/nuxeo/pull/4120#pullrequestreview-426014358", "createdAt": "2020-06-08T08:29:44Z", "commit": {"oid": "667de37ab8ad07f691b84176ea187f97bfcc7073"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ede758e5351f9ef7fd106e3e95ddcf4ecee0eba8", "author": {"user": {"login": "ataillefer", "name": "Antoine Taillefer"}}, "url": "https://github.com/nuxeo/nuxeo/commit/ede758e5351f9ef7fd106e3e95ddcf4ecee0eba8", "committedDate": "2020-06-08T09:17:03Z", "message": "NXP-28937: Add Jenkinsfile to promote a build as a release"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a41e309276122533dad82caca132b09379119119", "author": {"user": {"login": "ataillefer", "name": "Antoine Taillefer"}}, "url": "https://github.com/nuxeo/nuxeo/commit/a41e309276122533dad82caca132b09379119119", "committedDate": "2020-06-08T09:17:03Z", "message": "NXP-28937: Improve git calls"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "667de37ab8ad07f691b84176ea187f97bfcc7073", "author": {"user": {"login": "ataillefer", "name": "Antoine Taillefer"}}, "url": "https://github.com/nuxeo/nuxeo/commit/667de37ab8ad07f691b84176ea187f97bfcc7073", "committedDate": "2020-06-08T08:17:41Z", "message": "NXP-28937: Improve git calls"}, "afterCommit": {"oid": "a41e309276122533dad82caca132b09379119119", "author": {"user": {"login": "ataillefer", "name": "Antoine Taillefer"}}, "url": "https://github.com/nuxeo/nuxeo/commit/a41e309276122533dad82caca132b09379119119", "committedDate": "2020-06-08T09:17:03Z", "message": "NXP-28937: Improve git calls"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2MDUzNTY1", "url": "https://github.com/nuxeo/nuxeo/pull/4120#pullrequestreview-426053565", "createdAt": "2020-06-08T09:21:35Z", "commit": {"oid": "a41e309276122533dad82caca132b09379119119"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2MDU2NTMx", "url": "https://github.com/nuxeo/nuxeo/pull/4120#pullrequestreview-426056531", "createdAt": "2020-06-08T09:25:38Z", "commit": {"oid": "a41e309276122533dad82caca132b09379119119"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQwOToyNTozOFrOGgV3KQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQwOToyNTozOFrOGgV3KQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjU2NTgwMQ==", "bodyText": "is this because since there is no new untracked file to be added any way at this point that you privilledge -a over . (and to have a one-liner ?)", "url": "https://github.com/nuxeo/nuxeo/pull/4120#discussion_r436565801", "createdAt": "2020-06-08T09:25:38Z", "author": {"login": "NourNuxeo"}, "path": "ci/Jenkinsfiles/build.groovy", "diffHunk": "@@ -396,8 +396,7 @@ pipeline {\n           ----------------------------------------\n           \"\"\"\n           sh \"\"\"\n-            git add .\n-            git commit -m \"Release ${VERSION}\"\n+            git commit -a -m \"Release ${VERSION}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a41e309276122533dad82caca132b09379119119"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2MDU2NTg1", "url": "https://github.com/nuxeo/nuxeo/pull/4120#pullrequestreview-426056585", "createdAt": "2020-06-08T09:25:44Z", "commit": {"oid": "a41e309276122533dad82caca132b09379119119"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2MDYxNDEy", "url": "https://github.com/nuxeo/nuxeo/pull/4120#pullrequestreview-426061412", "createdAt": "2020-06-08T09:32:33Z", "commit": {"oid": "a41e309276122533dad82caca132b09379119119"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQwOTozMjozM1rOGgWFXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQwOTozMjozM1rOGgWFXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjU2OTQzOQ==", "bodyText": "The original jx step tag adds a --force (-f) to the git tag call. I guess it's unecessary ?\nAnd calling the git command manually spares you commiting again uselessly ?", "url": "https://github.com/nuxeo/nuxeo/pull/4120#discussion_r436569439", "createdAt": "2020-06-08T09:32:33Z", "author": {"login": "NourNuxeo"}, "path": "ci/Jenkinsfiles/build.groovy", "diffHunk": "@@ -643,7 +642,8 @@ pipeline {\n             git config credential.helper store\n \n             # Git tag\n-            jx step tag -v ${VERSION}\n+            git tag -a v${VERSION} -m \"Release ${VERSION}\"\n+            git push origin v${VERSION}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a41e309276122533dad82caca132b09379119119"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4702, "cost": 1, "resetAt": "2021-11-03T18:41:40Z"}}}