{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ1MDQ1MDY3", "number": 4555, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQxMzozMzo1NlrOFI7wpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQxMzozMzo1NlrOFI7wpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ0OTEyMDM2OnYy", "diffSide": "RIGHT", "path": "ci/Jenkinsfiles/build.groovy", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQxMzozMzo1NlrOILHu-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQxNDoxOTowOVrOILIY1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODUzMTk2Mw==", "bodyText": "Shouldn't we put every time the NUXEO_VERSION? This will avoid potential issues regarding the alias and imagePullPolicy.", "url": "https://github.com/nuxeo/nuxeo/pull/4555#discussion_r548531963", "createdAt": "2020-12-24T13:33:56Z", "author": {"login": "kevinleturc"}, "path": "ci/Jenkinsfiles/build.groovy", "diffHunk": "@@ -760,6 +760,30 @@ pipeline {\n       }\n     }\n \n+    stage('Trigger REST API tests') {\n+      steps {\n+        echo \"\"\"\n+        ----------------------------------------\n+        Trigger REST API tests\n+        ----------------------------------------\n+        \"\"\"\n+        script {\n+          def parameters = [\n+            string(name: 'NUXEO_REPOSITORY', value: \"${repositoryUrl}\"),\n+            string(name: 'NUXEO_SHA', value: \"${GIT_COMMIT}\"),\n+          ]\n+          if (isPullRequest()) {\n+            parameters.add(string(name: 'NUXEO_VERSION', value: \"${VERSION}\"))\n+          }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "78a5908136549e0f8bf979e4a0dc46b28d9b1347"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODU0MjY3Nw==", "bodyText": "Actually, I'm relying on the fact of passing this parameter or not to detect if the upstream (nuxeo/nuxeo) is a PR or master. Could parse the upstream job full name but I thought the current approach was simpler.\nIn any case, you're right about the imagePullPolicy needing to be Always in the nuxeo chart used by the REST API tests pipeline, since the default image is 11.x which is a rolling tag.", "url": "https://github.com/nuxeo/nuxeo/pull/4555#discussion_r548542677", "createdAt": "2020-12-24T14:19:09Z", "author": {"login": "ataillefer"}, "path": "ci/Jenkinsfiles/build.groovy", "diffHunk": "@@ -760,6 +760,30 @@ pipeline {\n       }\n     }\n \n+    stage('Trigger REST API tests') {\n+      steps {\n+        echo \"\"\"\n+        ----------------------------------------\n+        Trigger REST API tests\n+        ----------------------------------------\n+        \"\"\"\n+        script {\n+          def parameters = [\n+            string(name: 'NUXEO_REPOSITORY', value: \"${repositoryUrl}\"),\n+            string(name: 'NUXEO_SHA', value: \"${GIT_COMMIT}\"),\n+          ]\n+          if (isPullRequest()) {\n+            parameters.add(string(name: 'NUXEO_VERSION', value: \"${VERSION}\"))\n+          }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODUzMTk2Mw=="}, "originalCommit": {"oid": "78a5908136549e0f8bf979e4a0dc46b28d9b1347"}, "originalPosition": 18}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4298, "cost": 1, "resetAt": "2021-11-03T18:41:40Z"}}}