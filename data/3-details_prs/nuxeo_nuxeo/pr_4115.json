{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3OTA2MzU4", "number": 4115, "title": "NXP-29154 Improve feedback on explorer actions", "bodyText": "T&P in progress at https://qa.nuxeo.org/jenkins/job/TestAndPush/job/ondemand-testandpush-atchertchian-master-2/98/, passed ok \u2714\ufe0f", "createdAt": "2020-06-04T15:11:48Z", "url": "https://github.com/nuxeo/nuxeo/pull/4115", "merged": true, "mergeCommit": {"oid": "7ee2f785aef7566f8c58cda837f2b1c0d66bcf40"}, "closed": true, "closedAt": "2020-06-05T16:20:57Z", "author": {"login": "atchertchian"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcn7s1fAH2gAyNDI3OTA2MzU4OjIzZTY0MDIwMDQzYmRiOWY0ZjlmODg3NzQ1MDM0MjIyMDM0ZjAxMDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcoUBXpgFqTQyNTM4MTY2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "23e64020043bdb9f4f9f887745034222034f0104", "author": {"user": {"login": "atchertchian", "name": "Anahide Tchertchian"}}, "url": "https://github.com/nuxeo/nuxeo/commit/23e64020043bdb9f4f9f887745034222034f0104", "committedDate": "2020-06-04T10:42:30Z", "message": "NXP-29154: highlight explorer buttons when active or clicked (for long actions)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9806d81eb5e307e1e9213f03a95b1255b0d8635", "author": {"user": {"login": "atchertchian", "name": "Anahide Tchertchian"}}, "url": "https://github.com/nuxeo/nuxeo/commit/a9806d81eb5e307e1e9213f03a95b1255b0d8635", "committedDate": "2020-06-04T10:42:30Z", "message": "NXP-29154: add cancel button on save forms"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "021a8b9c53b849933b04a51bf2747b1446bb6881", "author": {"user": {"login": "atchertchian", "name": "Anahide Tchertchian"}}, "url": "https://github.com/nuxeo/nuxeo/commit/021a8b9c53b849933b04a51bf2747b1446bb6881", "committedDate": "2020-06-04T14:54:30Z", "message": "NXP-29154: better exception management when uploading distributions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85d7ea9fee20abfb1f8e23b816e41751f344b3e3", "author": {"user": {"login": "atchertchian", "name": "Anahide Tchertchian"}}, "url": "https://github.com/nuxeo/nuxeo/commit/85d7ea9fee20abfb1f8e23b816e41751f344b3e3", "committedDate": "2020-06-04T14:58:08Z", "message": "NXP-29154: factor out distribution save logics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac472c7c00b953c6fbaa79ab0208e5fe84b9e571", "author": {"user": {"login": "atchertchian", "name": "Anahide Tchertchian"}}, "url": "https://github.com/nuxeo/nuxeo/commit/ac472c7c00b953c6fbaa79ab0208e5fe84b9e571", "committedDate": "2020-06-04T15:01:23Z", "message": "NXP-29154: better redirection after save and upload actions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0NTYxNDky", "url": "https://github.com/nuxeo/nuxeo/pull/4115#pullrequestreview-424561492", "createdAt": "2020-06-04T15:21:26Z", "commit": {"oid": "ac472c7c00b953c6fbaa79ab0208e5fe84b9e571"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0NTY2NDYz", "url": "https://github.com/nuxeo/nuxeo/pull/4115#pullrequestreview-424566463", "createdAt": "2020-06-04T15:26:29Z", "commit": {"oid": "ac472c7c00b953c6fbaa79ab0208e5fe84b9e571"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNToyNjoyOVrOGfLbVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNTozMDowN1rOGfLlmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTM0NjI2Mg==", "bodyText": "You can use log4j2 format feature to save some resources.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    log.debug(\"Path => \" + redirectUrl);\n          \n          \n            \n                    log.debug(\"Path => {}\",  redirectUrl);\n          \n      \n    \n    \n  \n\nOtherwise, we tend to use a colon follow by a space and directly is value, for example The document: {docId} has been removed. I don't know if we want to follow such pattern here?", "url": "https://github.com/nuxeo/nuxeo/pull/4115#discussion_r435346262", "createdAt": "2020-06-04T15:26:29Z", "author": {"login": "kevinleturc"}, "path": "modules/platform/nuxeo-apidoc-server/nuxeo-apidoc-webengine/src/main/java/org/nuxeo/apidoc/browse/Distribution.java", "diffHunk": "@@ -358,21 +335,27 @@ public Object doSaveExtended() throws NamingException, NotSupportedException, Sy\n             tx.begin();\n             startedTx = true;\n         }\n+\n+        FormData formData = getContext().getForm();\n+        String source = formData.getString(\"source\");\n         try {\n-            getSnapshotManager().persistRuntimeSnapshot(getContext().getCoreSession(), distribLabel, otherProperties,\n-                    filter);\n+            getSnapshotManager().persistRuntimeSnapshot(getContext().getCoreSession(), formData.getString(\"name\"),\n+                    readFormData(formData), filter);\n         } catch (NuxeoException e) {\n             log.error(\"Error during storage\", e);\n             if (tx != null) {\n                 tx.rollback();\n             }\n-            return getView(\"savedKO\").arg(\"message\", e.getMessage());\n+            return getView(\"savedKO\").arg(\"message\", e.getMessage()).arg(\"source\", source);\n         }\n         log.info(\"Snapshot saved.\");\n+\n         if (tx != null && startedTx) {\n             tx.commit();\n         }\n-        return getView(\"saved\");\n+        String redirectUrl = getContext().getBaseURL() + getPath();\n+        log.debug(\"Path => \" + redirectUrl);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac472c7c00b953c6fbaa79ab0208e5fe84b9e571"}, "originalPosition": 150}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTM0ODg4OQ==", "bodyText": "It misses a new line at the end of this file.", "url": "https://github.com/nuxeo/nuxeo/pull/4115#discussion_r435348889", "createdAt": "2020-06-04T15:30:07Z", "author": {"login": "kevinleturc"}, "path": "modules/platform/nuxeo-apidoc-server/nuxeo-apidoc-webengine/src/main/resources/skin/resources/script/jquery.utils.js", "diffHunk": "@@ -0,0 +1,7 @@\n+(function ($) {\n+\n+  $.fn.clickButton = function (element) {\n+    element.classList.add('clicked');\n+  }\n+\n+})(jQuery);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac472c7c00b953c6fbaa79ab0208e5fe84b9e571"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4c154687d58cef600cec187886239f88d0e6ed2", "author": {"user": {"login": "atchertchian", "name": "Anahide Tchertchian"}}, "url": "https://github.com/nuxeo/nuxeo/commit/d4c154687d58cef600cec187886239f88d0e6ed2", "committedDate": "2020-06-04T16:11:03Z", "message": "NXP-29154: add new line at end of files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93ff29d26960804c02fc7bdf2ba6edaa30b3bc70", "author": {"user": {"login": "atchertchian", "name": "Anahide Tchertchian"}}, "url": "https://github.com/nuxeo/nuxeo/commit/93ff29d26960804c02fc7bdf2ba6edaa30b3bc70", "committedDate": "2020-06-04T16:12:58Z", "message": "NXP-29154: remove useless logs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1MzgxNjYw", "url": "https://github.com/nuxeo/nuxeo/pull/4115#pullrequestreview-425381660", "createdAt": "2020-06-05T15:02:39Z", "commit": {"oid": "93ff29d26960804c02fc7bdf2ba6edaa30b3bc70"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4700, "cost": 1, "resetAt": "2021-11-03T18:41:40Z"}}}