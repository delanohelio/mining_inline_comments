{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYzOTgyMTEy", "number": 4241, "title": "NXP-29499: fix error management on invalid operation/chain/codec (lazy check on chains)", "bodyText": "T&P check at https://qa.nuxeo.org/jenkins/job/TestAndPush/job/ondemand-testandpush-atchertchian-master-3/13/", "createdAt": "2020-08-06T12:02:18Z", "url": "https://github.com/nuxeo/nuxeo/pull/4241", "merged": true, "mergeCommit": {"oid": "6cbc57e67086211081aec84aa5c6384d392965d8"}, "closed": true, "closedAt": "2020-08-11T06:28:53Z", "author": {"login": "atchertchian"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8P5OQgFqTQ2MjUxNjgzMw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc9wz66gBqjM2NDE2MzcyMTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNTE2ODMz", "url": "https://github.com/nuxeo/nuxeo/pull/4241#pullrequestreview-462516833", "createdAt": "2020-08-06T13:27:37Z", "commit": {"oid": "b1da43408bff7ec1ecfe1524a542a5d3c57e126a"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMzoyNzozOFrOG8zemA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMzoyNzozOFrOG8zemA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjQxMTE2MA==", "bodyText": "What do you think about merging the two try/catch? Something like below:\n            try {\n                Class<?> type = Class.forName(opc.type);\n                service.putOperation(type, opc.replace, contributor.getName().toString(), widgetDefinitionList);\n            } catch (ClassNotFoundException e) {\n                throw new IllegalArgumentException(\"Invalid operation class '\" + opc.type + \"': class not found.\");\n            } catch (OperationException e) {\n                throw new RuntimeException(e);\n            }", "url": "https://github.com/nuxeo/nuxeo/pull/4241#discussion_r466411160", "createdAt": "2020-08-06T13:27:38Z", "author": {"login": "kevinleturc"}, "path": "modules/platform/nuxeo-automation/nuxeo-automation-core/src/main/java/org/nuxeo/ecm/automation/core/AutomationComponent.java", "diffHunk": "@@ -135,21 +136,25 @@ public void registerContribution(Object contribution, String extensionPoint, Com\n                     widgetDefinitionList.add(widgetDescriptor.getWidgetDefinition());\n                 }\n             }\n+            Class<?> type;\n             try {\n-                service.putOperation(opc.type, opc.replace, contributor.getName().toString(), widgetDefinitionList);\n+                type = Class.forName(opc.type);\n+            } catch (ClassNotFoundException e) {\n+                throw new IllegalArgumentException(\"Invalid operation class '\" + opc.type + \"': class not found.\");\n+            }\n+            try {\n+                service.putOperation(type, opc.replace, contributor.getName().toString(), widgetDefinitionList);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1da43408bff7ec1ecfe1524a542a5d3c57e126a"}, "originalPosition": 23}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b1da43408bff7ec1ecfe1524a542a5d3c57e126a", "author": {"user": {"login": "atchertchian", "name": "Anahide Tchertchian"}}, "url": "https://github.com/nuxeo/nuxeo/commit/b1da43408bff7ec1ecfe1524a542a5d3c57e126a", "committedDate": "2020-08-06T11:59:52Z", "message": "NXP-29499: check operation references in chains after startup to avoid enforcing requirements at registration (compat)"}, "afterCommit": {"oid": "b32609afd602099902c028adda6aac7eb889a6d5", "author": {"user": {"login": "atchertchian", "name": "Anahide Tchertchian"}}, "url": "https://github.com/nuxeo/nuxeo/commit/b32609afd602099902c028adda6aac7eb889a6d5", "committedDate": "2020-08-07T07:24:07Z", "message": "NXP-29499: check operation references in chains after startup to avoid enforcing requirements at registration\n\nThis is needed to handle the scripting operations use case, and provides a better behaviour regarding compatibility."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzMzU2NTU5", "url": "https://github.com/nuxeo/nuxeo/pull/4241#pullrequestreview-463356559", "createdAt": "2020-08-07T14:25:56Z", "commit": {"oid": "b32609afd602099902c028adda6aac7eb889a6d5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxNDoyNTo1NlrOG9b-cg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxNDoyNTo1NlrOG9b-cg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzA3NDY3NA==", "bodyText": "Not sure you need this declaration outside the try/catch?", "url": "https://github.com/nuxeo/nuxeo/pull/4241#discussion_r467074674", "createdAt": "2020-08-07T14:25:56Z", "author": {"login": "kevinleturc"}, "path": "modules/platform/nuxeo-automation/nuxeo-automation-core/src/main/java/org/nuxeo/ecm/automation/core/AutomationComponent.java", "diffHunk": "@@ -135,21 +136,23 @@ public void registerContribution(Object contribution, String extensionPoint, Com\n                     widgetDefinitionList.add(widgetDescriptor.getWidgetDefinition());\n                 }\n             }\n+            Class<?> type;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b32609afd602099902c028adda6aac7eb889a6d5"}, "originalPosition": 15}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b32609afd602099902c028adda6aac7eb889a6d5", "author": {"user": {"login": "atchertchian", "name": "Anahide Tchertchian"}}, "url": "https://github.com/nuxeo/nuxeo/commit/b32609afd602099902c028adda6aac7eb889a6d5", "committedDate": "2020-08-07T07:24:07Z", "message": "NXP-29499: check operation references in chains after startup to avoid enforcing requirements at registration\n\nThis is needed to handle the scripting operations use case, and provides a better behaviour regarding compatibility."}, "afterCommit": {"oid": "4c60e0c9573480d5615662fe92cd16a170e9d9a9", "author": {"user": {"login": "atchertchian", "name": "Anahide Tchertchian"}}, "url": "https://github.com/nuxeo/nuxeo/commit/4c60e0c9573480d5615662fe92cd16a170e9d9a9", "committedDate": "2020-08-07T15:18:32Z", "message": "NXP-29499: check operation references in chains after startup to avoid enforcing requirements at registration\n\nThis is needed to handle the scripting operations use case, and provides a better behaviour regarding compatibility."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "706ae15b7107300c694e86b8f170af8cdb0da98e", "author": {"user": {"login": "atchertchian", "name": "Anahide Tchertchian"}}, "url": "https://github.com/nuxeo/nuxeo/commit/706ae15b7107300c694e86b8f170af8cdb0da98e", "committedDate": "2020-08-07T15:44:39Z", "message": "NXP-29499: cleanup easyshare runtime contributions (and remove JSF dependencies)"}, "afterCommit": {"oid": "391a70f916793e8b7ec38983a36e2f436246625b", "author": {"user": {"login": "atchertchian", "name": "Anahide Tchertchian"}}, "url": "https://github.com/nuxeo/nuxeo/commit/391a70f916793e8b7ec38983a36e2f436246625b", "committedDate": "2020-08-07T16:01:19Z", "message": "NXP-29499: cleanup easyshare runtime contributions (and remove JSF dependencies)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "391a70f916793e8b7ec38983a36e2f436246625b", "author": {"user": {"login": "atchertchian", "name": "Anahide Tchertchian"}}, "url": "https://github.com/nuxeo/nuxeo/commit/391a70f916793e8b7ec38983a36e2f436246625b", "committedDate": "2020-08-07T16:01:19Z", "message": "NXP-29499: cleanup easyshare runtime contributions (and remove JSF dependencies)"}, "afterCommit": {"oid": "b447c139ea1c31463b7aeee0bf3fee2423f35b52", "author": {"user": {"login": "atchertchian", "name": "Anahide Tchertchian"}}, "url": "https://github.com/nuxeo/nuxeo/commit/b447c139ea1c31463b7aeee0bf3fee2423f35b52", "committedDate": "2020-08-08T07:24:43Z", "message": "NXP-29499: cleanup easyshare runtime contributions (and remove JSF dependencies)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0MzYxMDc4", "url": "https://github.com/nuxeo/nuxeo/pull/4241#pullrequestreview-464361078", "createdAt": "2020-08-10T15:54:07Z", "commit": {"oid": "b447c139ea1c31463b7aeee0bf3fee2423f35b52"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aeb066ad95b1f64684f9d181ade854f22dca60b6", "author": {"user": {"login": "atchertchian", "name": "Anahide Tchertchian"}}, "url": "https://github.com/nuxeo/nuxeo/commit/aeb066ad95b1f64684f9d181ade854f22dca60b6", "committedDate": "2020-08-11T06:26:35Z", "message": "NXP-29499: fix error management on invalid operation/chain/codec registration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b28ca1348fc51da401729df7a0fddf78977f3946", "author": {"user": {"login": "atchertchian", "name": "Anahide Tchertchian"}}, "url": "https://github.com/nuxeo/nuxeo/commit/b28ca1348fc51da401729df7a0fddf78977f3946", "committedDate": "2020-08-11T06:26:44Z", "message": "NXP-29499: make sure chain declarations are registered after operations that they reference"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0a30ac9e473ea27fccbbe9a079703ebb116d99a", "author": {"user": {"login": "atchertchian", "name": "Anahide Tchertchian"}}, "url": "https://github.com/nuxeo/nuxeo/commit/a0a30ac9e473ea27fccbbe9a079703ebb116d99a", "committedDate": "2020-08-11T06:26:44Z", "message": "NXP-29499: adapt test contribs to registration changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d81c7028630bd1701e26889a3bf0f5a378c27e0b", "author": {"user": {"login": "atchertchian", "name": "Anahide Tchertchian"}}, "url": "https://github.com/nuxeo/nuxeo/commit/d81c7028630bd1701e26889a3bf0f5a378c27e0b", "committedDate": "2020-08-11T06:27:17Z", "message": "NXP-29499: check operation references in chains after startup to avoid enforcing requirements at registration\n\nThis is needed to handle the scripting operations use case, and provides a better behaviour regarding compatibility."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1989eff00540726db5af4f7a32da6c9f7f0a03b8", "author": {"user": {"login": "atchertchian", "name": "Anahide Tchertchian"}}, "url": "https://github.com/nuxeo/nuxeo/commit/1989eff00540726db5af4f7a32da6c9f7f0a03b8", "committedDate": "2020-08-11T06:27:24Z", "message": "NXP-29499: cleanup easyshare runtime contributions (and remove JSF dependencies)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b447c139ea1c31463b7aeee0bf3fee2423f35b52", "author": {"user": {"login": "atchertchian", "name": "Anahide Tchertchian"}}, "url": "https://github.com/nuxeo/nuxeo/commit/b447c139ea1c31463b7aeee0bf3fee2423f35b52", "committedDate": "2020-08-08T07:24:43Z", "message": "NXP-29499: cleanup easyshare runtime contributions (and remove JSF dependencies)"}, "afterCommit": {"oid": "1989eff00540726db5af4f7a32da6c9f7f0a03b8", "author": {"user": {"login": "atchertchian", "name": "Anahide Tchertchian"}}, "url": "https://github.com/nuxeo/nuxeo/commit/1989eff00540726db5af4f7a32da6c9f7f0a03b8", "committedDate": "2020-08-11T06:27:24Z", "message": "NXP-29499: cleanup easyshare runtime contributions (and remove JSF dependencies)"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4994, "cost": 1, "resetAt": "2021-11-03T18:41:40Z"}}}