{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5MDA2NzM0", "number": 3644, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQxMToxOToxMlrODV8qwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQxMTozMDoxMFrODV8zMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0MzQwNjcyOnYy", "diffSide": "RIGHT", "path": "nuxeo-core/nuxeo-core-api/src/main/java/org/nuxeo/ecm/core/api/model/impl/ListProperty.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQxMToxOToxMlrOFabQfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwOTozOTo1NVrOFa0SIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzI1Mzg4NA==", "bodyText": "Why not making it a facade that would call the specific setValue implementation rather than doing nothing ?", "url": "https://github.com/nuxeo/nuxeo/pull/3644#discussion_r363253884", "createdAt": "2020-01-06T11:19:12Z", "author": {"login": "NourNuxeo"}, "path": "nuxeo-core/nuxeo-core-api/src/main/java/org/nuxeo/ecm/core/api/model/impl/ListProperty.java", "diffHunk": "@@ -48,22 +48,21 @@\n      */\n     protected final Field field;\n \n-    protected final List<Property> children;\n+    protected final List<Property> children = new ArrayList<>();\n \n     public ListProperty(Property parent, Field field) {\n         super(parent);\n         this.field = field;\n-        children = new ArrayList<>();\n     }\n \n     public ListProperty(Property parent, Field field, int flags) {\n         super(parent, flags);\n         this.field = field;\n-        children = new ArrayList<>();\n     }\n \n     @Override\n     public void internalSetValue(Serializable value) throws PropertyException {\n+        // ListProperty uses a specific setValue implementation", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7d9aa434b8728d7b6ef6a064621d0e1262b9e333"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzY2MzkwNw==", "bodyText": "I'm not changing the way it works here, I'm just adding a comment explaining why this method is empty.\nFurthermore, on the generic implementation, setValue calls internalSetValue so the opposite is not expected.", "url": "https://github.com/nuxeo/nuxeo/pull/3644#discussion_r363663907", "createdAt": "2020-01-07T09:39:55Z", "author": {"login": "kevinleturc"}, "path": "nuxeo-core/nuxeo-core-api/src/main/java/org/nuxeo/ecm/core/api/model/impl/ListProperty.java", "diffHunk": "@@ -48,22 +48,21 @@\n      */\n     protected final Field field;\n \n-    protected final List<Property> children;\n+    protected final List<Property> children = new ArrayList<>();\n \n     public ListProperty(Property parent, Field field) {\n         super(parent);\n         this.field = field;\n-        children = new ArrayList<>();\n     }\n \n     public ListProperty(Property parent, Field field, int flags) {\n         super(parent, flags);\n         this.field = field;\n-        children = new ArrayList<>();\n     }\n \n     @Override\n     public void internalSetValue(Serializable value) throws PropertyException {\n+        // ListProperty uses a specific setValue implementation", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzI1Mzg4NA=="}, "originalCommit": {"oid": "7d9aa434b8728d7b6ef6a064621d0e1262b9e333"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI0MzQyODMyOnYy", "diffSide": "RIGHT", "path": "nuxeo-core/nuxeo-core-api/src/main/java/org/nuxeo/ecm/core/api/model/impl/ListProperty.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQxMTozMDoxMFrOFabdNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwOTo0Njo0N1rOFa0dMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzI1NzE0MA==", "bodyText": "Since you are cleaning here, why not typing with   since it's used as such next line ?", "url": "https://github.com/nuxeo/nuxeo/pull/3644#discussion_r363257140", "createdAt": "2020-01-06T11:30:10Z", "author": {"login": "NourNuxeo"}, "path": "nuxeo-core/nuxeo-core-api/src/main/java/org/nuxeo/ecm/core/api/model/impl/ListProperty.java", "diffHunk": "@@ -201,8 +198,7 @@ public Serializable getValueForWrite() throws PropertyException {\n         if (children.isEmpty()) {\n             return new ArrayList<String>();\n         }\n-        // noinspection CollectionDeclaredAsConcreteClass\n-        ArrayList<Object> list = new ArrayList<>(children.size());\n+        var list = new ArrayList<>(children.size());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7d9aa434b8728d7b6ef6a064621d0e1262b9e333"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzY2NjczOA==", "bodyText": "Because it's not needed, we never read this list again, we are only interested on its Serializable aspect.", "url": "https://github.com/nuxeo/nuxeo/pull/3644#discussion_r363666738", "createdAt": "2020-01-07T09:46:47Z", "author": {"login": "kevinleturc"}, "path": "nuxeo-core/nuxeo-core-api/src/main/java/org/nuxeo/ecm/core/api/model/impl/ListProperty.java", "diffHunk": "@@ -201,8 +198,7 @@ public Serializable getValueForWrite() throws PropertyException {\n         if (children.isEmpty()) {\n             return new ArrayList<String>();\n         }\n-        // noinspection CollectionDeclaredAsConcreteClass\n-        ArrayList<Object> list = new ArrayList<>(children.size());\n+        var list = new ArrayList<>(children.size());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzI1NzE0MA=="}, "originalCommit": {"oid": "7d9aa434b8728d7b6ef6a064621d0e1262b9e333"}, "originalPosition": 63}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4307, "cost": 1, "resetAt": "2021-11-03T18:41:40Z"}}}