{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxMTYyODIy", "number": 3902, "title": "NXP-28802: Make fixed part of document history pp configurable (10.10)", "bodyText": "", "createdAt": "2020-04-09T01:45:20Z", "url": "https://github.com/nuxeo/nuxeo/pull/3902", "merged": true, "mergeCommit": {"oid": "aa7bfdb02de8f3371b834388c4b241b0268f9343"}, "closed": true, "closedAt": "2020-04-10T10:09:49Z", "author": {"login": "michaelva"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVxqTngH2gAyNDAxMTYyODIyOjJkMWIyNjM2NjU5Mzk4OWFjZDg5MjA5OTY2MWUyZmIwZjU1OWM5ZWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcWNmIhAFqTM5MTM1MjQxMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2d1b26366593989acd892099661e2fb0f559c9ef", "author": {"user": {"login": "michaelva", "name": "Micha\u00ebl Vachette"}}, "url": "https://github.com/nuxeo/nuxeo/commit/2d1b26366593989acd892099661e2fb0f559c9ef", "committedDate": "2020-04-09T00:50:03Z", "message": "NXP-28802: Make fixed part of document history pp configurable"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwODQ0OTY3", "url": "https://github.com/nuxeo/nuxeo/pull/3902#pullrequestreview-390844967", "createdAt": "2020-04-09T14:28:51Z", "commit": {"oid": "2d1b26366593989acd892099661e2fb0f559c9ef"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNDoyODo1MVrOGDbRKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNDoyODo1MVrOGDbRKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjI0NTY3Mw==", "bodyText": "This comment and the one above has the correct space after // on master.", "url": "https://github.com/nuxeo/nuxeo/pull/3902#discussion_r406245673", "createdAt": "2020-04-09T14:28:51Z", "author": {"login": "efge"}, "path": "nuxeo-features/nuxeo-elasticsearch/nuxeo-elasticsearch-audit/src/test/java/org/nuxeo/elasticsearch/TestESHistoryProvider.java", "diffHunk": "@@ -429,6 +435,29 @@ public void testCustomDocumentHistoryPageProvider() {\n         assertEquals(5, entries.size());\n     }\n \n+    @Test\n+    public void testCustomFixedPartDocumentHistoryPageProvider() {\n+        assertNotNull(pageProviderService.getPageProviderDefinition(\"FIXED_PART_DOCUMENT_HISTORY_PROVIDER\"));\n+        DocumentModel searchDoc = session.createDocumentModel(\"BasicAuditSearch\");\n+        searchDoc.setPathInfo(\"/\", \"auditsearch\");\n+        searchDoc = session.createDocument(searchDoc);\n+\n+        searchDoc.setPropertyValue(\"basicauditsearch:eventIds\", null);\n+        searchDoc.setPropertyValue(\"basicauditsearch:eventCategories\", null);\n+        searchDoc.setPropertyValue(\"basicauditsearch:startDate\", null);\n+        searchDoc.setPropertyValue(\"basicauditsearch:endDate\", null);\n+\n+        //test with doc\n+        PageProvider<LogEntry> pageProvider = getPageProvider(\"FIXED_PART_DOCUMENT_HISTORY_PROVIDER\", 30, 0, doc);\n+        pageProvider.setSearchDocumentModel(searchDoc);\n+        assertEquals(1, pageProvider.getCurrentPage().size());\n+\n+        //test with proxy to check that the doc uuid is correctly set in the fixed part", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d1b26366593989acd892099661e2fb0f559c9ef"}, "originalPosition": 49}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "654298f5e408f187cdacd18d8631ee99b2a04cae", "author": {"user": {"login": "michaelva", "name": "Micha\u00ebl Vachette"}}, "url": "https://github.com/nuxeo/nuxeo/commit/654298f5e408f187cdacd18d8631ee99b2a04cae", "committedDate": "2020-04-09T23:48:54Z", "message": "NXP-28802: Formatting"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxMzE2MzY5", "url": "https://github.com/nuxeo/nuxeo/pull/3902#pullrequestreview-391316369", "createdAt": "2020-04-10T07:54:02Z", "commit": {"oid": "654298f5e408f187cdacd18d8631ee99b2a04cae"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxMzUyNDEw", "url": "https://github.com/nuxeo/nuxeo/pull/3902#pullrequestreview-391352410", "createdAt": "2020-04-10T09:22:50Z", "commit": {"oid": "654298f5e408f187cdacd18d8631ee99b2a04cae"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4828, "cost": 1, "resetAt": "2021-11-03T18:41:40Z"}}}