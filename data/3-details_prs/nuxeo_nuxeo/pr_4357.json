{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk3OTc3ODUy", "number": 4357, "title": "Feature nxp 29659 pkg tp version range", "bodyText": "", "createdAt": "2020-10-05T16:35:35Z", "url": "https://github.com/nuxeo/nuxeo/pull/4357", "merged": true, "mergeCommit": {"oid": "4743df731af9272aa5f4746e74e35a49a289a830"}, "closed": true, "closedAt": "2020-10-23T08:46:49Z", "author": {"login": "yjulienne-nuxeo"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdPz59hAFqTUwMjY4NjUzMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdVShCGgFqTUxNTQ2MjkxNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNjg2NTMx", "url": "https://github.com/nuxeo/nuxeo/pull/4357#pullrequestreview-502686531", "createdAt": "2020-10-06T08:11:18Z", "commit": {"oid": "1a28fcaad402cc61694c4d0e674a507439d88f3d"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwODoxMToxOFrOHc6ztw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwODoxMjo0MlrOHc63Xg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDA4NTY4Nw==", "bodyText": "Could you add a deprecated tag since 11.3 in the javadoc?", "url": "https://github.com/nuxeo/nuxeo/pull/4357#discussion_r500085687", "createdAt": "2020-10-06T08:11:18Z", "author": {"login": "kevinleturc"}, "path": "modules/runtime/nuxeo-connect-standalone/src/main/java/org/nuxeo/connect/update/xml/PackageDefinitionImpl.java", "diffHunk": "@@ -82,8 +82,15 @@\n     /**\n      * The target platforms where this package may be installed.\n      */\n+    @Deprecated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a28fcaad402cc61694c4d0e674a507439d88f3d"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDA4NjYyMg==", "bodyText": "Could you add the @since 11.3 tag to methods/fields you add?", "url": "https://github.com/nuxeo/nuxeo/pull/4357#discussion_r500086622", "createdAt": "2020-10-06T08:12:42Z", "author": {"login": "kevinleturc"}, "path": "modules/runtime/nuxeo-connect-standalone/src/main/java/org/nuxeo/connect/update/xml/PackageDefinitionImpl.java", "diffHunk": "@@ -82,8 +82,15 @@\n     /**\n      * The target platforms where this package may be installed.\n      */\n+    @Deprecated\n     protected String[] platforms;\n \n+    /**\n+     * The target platform range where this package may be installed.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a28fcaad402cc61694c4d0e674a507439d88f3d"}, "originalPosition": 8}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d655cdd25ba658d650f0000d46d7005c8cdba4a7", "author": {"user": {"login": "yjulienne-nuxeo", "name": "Yannis JULIENNE"}}, "url": "https://github.com/nuxeo/nuxeo/commit/d655cdd25ba658d650f0000d46d7005c8cdba4a7", "committedDate": "2020-10-06T08:46:15Z", "message": "NXP-29659: Fix nuxeo-connect-client-wrapper"}, "afterCommit": {"oid": "581abac7362457ee0abc218addf676c8d88bec17", "author": {"user": {"login": "yjulienne-nuxeo", "name": "Yannis JULIENNE"}}, "url": "https://github.com/nuxeo/nuxeo/commit/581abac7362457ee0abc218addf676c8d88bec17", "committedDate": "2020-10-06T08:56:12Z", "message": "NXP-29659: Integrate new version range field for packages allowed TP"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1NDU1MTU2", "url": "https://github.com/nuxeo/nuxeo/pull/4357#pullrequestreview-505455156", "createdAt": "2020-10-09T08:13:06Z", "commit": {"oid": "b23fe8a5813db5d14dfd19a8186cc74e4f30b6ec"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b23fe8a5813db5d14dfd19a8186cc74e4f30b6ec", "author": {"user": {"login": "yjulienne-nuxeo", "name": "Yannis JULIENNE"}}, "url": "https://github.com/nuxeo/nuxeo/commit/b23fe8a5813db5d14dfd19a8186cc74e4f30b6ec", "committedDate": "2020-10-07T09:24:57Z", "message": "NXP-29659: Also integrate in nuxeo-admin-center-core"}, "afterCommit": {"oid": "9cfef84aadaf829e6ad46fc3f489b31ada6e64eb", "author": {"user": {"login": "yjulienne-nuxeo", "name": "Yannis JULIENNE"}}, "url": "https://github.com/nuxeo/nuxeo/commit/9cfef84aadaf829e6ad46fc3f489b31ada6e64eb", "committedDate": "2020-10-13T15:39:03Z", "message": "NXP-29659: Use PlatformId param instead of Strings in connect-client APIs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9cfef84aadaf829e6ad46fc3f489b31ada6e64eb", "author": {"user": {"login": "yjulienne-nuxeo", "name": "Yannis JULIENNE"}}, "url": "https://github.com/nuxeo/nuxeo/commit/9cfef84aadaf829e6ad46fc3f489b31ada6e64eb", "committedDate": "2020-10-13T15:39:03Z", "message": "NXP-29659: Use PlatformId param instead of Strings in connect-client APIs"}, "afterCommit": {"oid": "cea4c6145c9a2ad70337677f5e2103a563709b0a", "author": {"user": {"login": "yjulienne-nuxeo", "name": "Yannis JULIENNE"}}, "url": "https://github.com/nuxeo/nuxeo/commit/cea4c6145c9a2ad70337677f5e2103a563709b0a", "committedDate": "2020-10-16T13:20:57Z", "message": "NXP-29659: Use PlatformId param instead of Strings in connect-client APIs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cea4c6145c9a2ad70337677f5e2103a563709b0a", "author": {"user": {"login": "yjulienne-nuxeo", "name": "Yannis JULIENNE"}}, "url": "https://github.com/nuxeo/nuxeo/commit/cea4c6145c9a2ad70337677f5e2103a563709b0a", "committedDate": "2020-10-16T13:20:57Z", "message": "NXP-29659: Use PlatformId param instead of Strings in connect-client APIs"}, "afterCommit": {"oid": "7d00c9dcdfa782ab0f507c5c271cb99b07fa7793", "author": {"user": {"login": "yjulienne-nuxeo", "name": "Yannis JULIENNE"}}, "url": "https://github.com/nuxeo/nuxeo/commit/7d00c9dcdfa782ab0f507c5c271cb99b07fa7793", "committedDate": "2020-10-20T09:46:05Z", "message": "NXP-29659: Use PlatformId param instead of Strings in connect-client APIs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7d00c9dcdfa782ab0f507c5c271cb99b07fa7793", "author": {"user": {"login": "yjulienne-nuxeo", "name": "Yannis JULIENNE"}}, "url": "https://github.com/nuxeo/nuxeo/commit/7d00c9dcdfa782ab0f507c5c271cb99b07fa7793", "committedDate": "2020-10-20T09:46:05Z", "message": "NXP-29659: Use PlatformId param instead of Strings in connect-client APIs"}, "afterCommit": {"oid": "d55e0ac9a2b103592ec32f955c7d3fccc1438a2c", "author": {"user": {"login": "yjulienne-nuxeo", "name": "Yannis JULIENNE"}}, "url": "https://github.com/nuxeo/nuxeo/commit/d55e0ac9a2b103592ec32f955c7d3fccc1438a2c", "committedDate": "2020-10-21T13:55:07Z", "message": "NXP-29659: Use PlatformId param instead of Strings in connect-client APIs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzNzI5ODQz", "url": "https://github.com/nuxeo/nuxeo/pull/4357#pullrequestreview-513729843", "createdAt": "2020-10-21T14:09:44Z", "commit": {"oid": "d55e0ac9a2b103592ec32f955c7d3fccc1438a2c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNDowOTo0NFrOHlubxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNDowOTo0NFrOHlubxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTMyMDEzNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // GIVEN current target platform is server-11.2\n          \n          \n            \n                    // GIVEN current target platform is server-11.2.3\n          \n      \n    \n    \n  \n\n?", "url": "https://github.com/nuxeo/nuxeo/pull/4357#discussion_r509320134", "createdAt": "2020-10-21T14:09:44Z", "author": {"login": "troger"}, "path": "modules/runtime/nuxeo-connect-standalone/src/test/java/org/nuxeo/launcher/connect/TestConnectBroker.java", "diffHunk": "@@ -897,6 +991,85 @@ public void testInstallLocalPackageRequest() {\n         assertThat(logOf(logCaptureResult)).isEqualTo(expectedLogs);\n     }\n \n+    @Test\n+    @LogCaptureFeature.FilterWith(PkgRequestLogFilter.class)\n+    public void testInstallLocalPackageRequestWithRange() throws Exception {\n+        // GIVEN current target platform is server-11.2", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d55e0ac9a2b103592ec32f955c7d3fccc1438a2c"}, "originalPosition": 117}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzNzQ0NTc3", "url": "https://github.com/nuxeo/nuxeo/pull/4357#pullrequestreview-513744577", "createdAt": "2020-10-21T14:22:41Z", "commit": {"oid": "d55e0ac9a2b103592ec32f955c7d3fccc1438a2c"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzNzczODk3", "url": "https://github.com/nuxeo/nuxeo/pull/4357#pullrequestreview-513773897", "createdAt": "2020-10-21T14:49:01Z", "commit": {"oid": "d55e0ac9a2b103592ec32f955c7d3fccc1438a2c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNDo0OTowMVrOHlwgQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNDo0OTowMVrOHlwgQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTM1NDA0OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                            () -> actualTargetPlatform.asString(), () -> String.join(\", \", nonCompliantPkg));\n          \n          \n            \n                                            actualTargetPlatform::asString, () -> String.join(\", \", nonCompliantPkg));", "url": "https://github.com/nuxeo/nuxeo/pull/4357#discussion_r509354048", "createdAt": "2020-10-21T14:49:01Z", "author": {"login": "kevinleturc"}, "path": "modules/runtime/nuxeo-connect-standalone/src/main/java/org/nuxeo/launcher/connect/ConnectBroker.java", "diffHunk": "@@ -1181,12 +1182,12 @@ public boolean pkgRequest(List<String> pkgsToAdd, List<String> pkgsToInstall, Li\n                         relax = readConsole(\n                                 \"Package(s) %s not available on platform version %s.\\n\"\n                                         + \"Do you want to relax the constraint (yes/no)? [no] \",\n-                                \"no\", StringUtils.join(nonCompliantPkg, \", \"), actualTargetPlatform);\n+                                \"no\", StringUtils.join(nonCompliantPkg, \", \"), actualTargetPlatform.asString());\n                     }\n \n                     if (Boolean.parseBoolean(relax)) {\n                         log.warn(\"Relax restriction to target platform {} because of package(s) {}\",\n-                                () -> actualTargetPlatform, () -> String.join(\", \", nonCompliantPkg));\n+                                () -> actualTargetPlatform.asString(), () -> String.join(\", \", nonCompliantPkg));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d55e0ac9a2b103592ec32f955c7d3fccc1438a2c"}, "originalPosition": 75}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3e79e597288ad9ccbcb4aa0ff793c90ac54dbbf3", "author": {"user": {"login": "yjulienne-nuxeo", "name": "Yannis JULIENNE"}}, "url": "https://github.com/nuxeo/nuxeo/commit/3e79e597288ad9ccbcb4aa0ff793c90ac54dbbf3", "committedDate": "2020-10-21T15:46:05Z", "message": "29659: Add tests with single version as range in TestConnectBroker"}, "afterCommit": {"oid": "688541da45cc12fd146eae484e91c48ccb67b3e5", "author": {"user": {"login": "yjulienne-nuxeo", "name": "Yannis JULIENNE"}}, "url": "https://github.com/nuxeo/nuxeo/commit/688541da45cc12fd146eae484e91c48ccb67b3e5", "committedDate": "2020-10-21T16:06:16Z", "message": "29659: Add tests with single version as range in TestConnectBroker + cleanup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0NTAwODI2", "url": "https://github.com/nuxeo/nuxeo/pull/4357#pullrequestreview-514500826", "createdAt": "2020-10-22T08:52:23Z", "commit": {"oid": "688541da45cc12fd146eae484e91c48ccb67b3e5"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0702004aebcb5f98242a33f8d8a9985d8d86cce4", "author": {"user": {"login": "yjulienne-nuxeo", "name": "Yannis JULIENNE"}}, "url": "https://github.com/nuxeo/nuxeo/commit/0702004aebcb5f98242a33f8d8a9985d8d86cce4", "committedDate": "2020-10-22T08:58:08Z", "message": "NXP-29659: Upgrade nuxeo-connect-client to 1.7.10"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66194196e3627ebccd2a696f4266f81c33106841", "author": {"user": {"login": "yjulienne-nuxeo", "name": "Yannis JULIENNE"}}, "url": "https://github.com/nuxeo/nuxeo/commit/66194196e3627ebccd2a696f4266f81c33106841", "committedDate": "2020-10-22T08:58:08Z", "message": "NXP-29659: Integrate new version range field for packages allowed TP"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6c361b32e5560c563c98a243c541d7352ec2878", "author": {"user": {"login": "yjulienne-nuxeo", "name": "Yannis JULIENNE"}}, "url": "https://github.com/nuxeo/nuxeo/commit/b6c361b32e5560c563c98a243c541d7352ec2878", "committedDate": "2020-10-22T08:58:08Z", "message": "NXP-29659: Also integrate in nuxeo-admin-center-core"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7c24caedef9d45158b12a0c218d8e667d81f1f5", "author": {"user": {"login": "yjulienne-nuxeo", "name": "Yannis JULIENNE"}}, "url": "https://github.com/nuxeo/nuxeo/commit/d7c24caedef9d45158b12a0c218d8e667d81f1f5", "committedDate": "2020-10-22T08:58:08Z", "message": "NXP-29659: Upgrade nuxeo-connect-client to 1.8.0"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b8a57316ef158f140cc7707746636331bec03e5", "author": {"user": {"login": "yjulienne-nuxeo", "name": "Yannis JULIENNE"}}, "url": "https://github.com/nuxeo/nuxeo/commit/9b8a57316ef158f140cc7707746636331bec03e5", "committedDate": "2020-10-22T08:58:08Z", "message": "NXP-29659: Use PlatformId param instead of Strings in connect-client APIs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "138cb6674845f476f528132751ee67c88f34152e", "author": {"user": {"login": "yjulienne-nuxeo", "name": "Yannis JULIENNE"}}, "url": "https://github.com/nuxeo/nuxeo/commit/138cb6674845f476f528132751ee67c88f34152e", "committedDate": "2020-10-22T08:58:08Z", "message": "29659: Add tests with single version as range in TestConnectBroker + cleanup"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "688541da45cc12fd146eae484e91c48ccb67b3e5", "author": {"user": {"login": "yjulienne-nuxeo", "name": "Yannis JULIENNE"}}, "url": "https://github.com/nuxeo/nuxeo/commit/688541da45cc12fd146eae484e91c48ccb67b3e5", "committedDate": "2020-10-21T16:06:16Z", "message": "29659: Add tests with single version as range in TestConnectBroker + cleanup"}, "afterCommit": {"oid": "138cb6674845f476f528132751ee67c88f34152e", "author": {"user": {"login": "yjulienne-nuxeo", "name": "Yannis JULIENNE"}}, "url": "https://github.com/nuxeo/nuxeo/commit/138cb6674845f476f528132751ee67c88f34152e", "committedDate": "2020-10-22T08:58:08Z", "message": "29659: Add tests with single version as range in TestConnectBroker + cleanup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1NDYyNjM2", "url": "https://github.com/nuxeo/nuxeo/pull/4357#pullrequestreview-515462636", "createdAt": "2020-10-23T08:43:42Z", "commit": {"oid": "138cb6674845f476f528132751ee67c88f34152e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1NDYyOTE3", "url": "https://github.com/nuxeo/nuxeo/pull/4357#pullrequestreview-515462917", "createdAt": "2020-10-23T08:44:01Z", "commit": {"oid": "138cb6674845f476f528132751ee67c88f34152e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4926, "cost": 1, "resetAt": "2021-11-03T18:41:40Z"}}}