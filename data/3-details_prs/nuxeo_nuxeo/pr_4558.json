{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ1NDEzODkz", "number": 4558, "title": "NXP-29991: Add configuration flag", "bodyText": "", "createdAt": "2020-12-24T15:57:24Z", "url": "https://github.com/nuxeo/nuxeo/pull/4558", "merged": true, "mergeCommit": {"oid": "f94b58bc326ec9ce99254910249837f0fc4ea3f2"}, "closed": true, "closedAt": "2021-01-13T16:39:42Z", "author": {"login": "kevinleturc"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdpV93xgFqTU1ODY3NDQ1OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdvydWLgFqTU2NzQxMjExOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4Njc0NDU4", "url": "https://github.com/nuxeo/nuxeo/pull/4558#pullrequestreview-558674458", "createdAt": "2020-12-24T16:03:43Z", "commit": {"oid": "82e797d805a9a1bdfd19877b6358530da1f88ec0"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4Njc1MDM5", "url": "https://github.com/nuxeo/nuxeo/pull/4558#pullrequestreview-558675039", "createdAt": "2020-12-24T16:06:19Z", "commit": {"oid": "82e797d805a9a1bdfd19877b6358530da1f88ec0"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwODk2NTA2", "url": "https://github.com/nuxeo/nuxeo/pull/4558#pullrequestreview-560896506", "createdAt": "2021-01-04T09:48:22Z", "commit": {"oid": "82e797d805a9a1bdfd19877b6358530da1f88ec0"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "82e797d805a9a1bdfd19877b6358530da1f88ec0", "author": {"user": {"login": "kevinleturc", "name": "Kevin Leturc"}}, "url": "https://github.com/nuxeo/nuxeo/commit/82e797d805a9a1bdfd19877b6358530da1f88ec0", "committedDate": "2020-12-24T15:55:02Z", "message": "NXP-29991: Add configuration flag"}, "afterCommit": {"oid": "71bc233e90d32bd3de9955eccc572e868f650499", "author": {"user": {"login": "kevinleturc", "name": "Kevin Leturc"}}, "url": "https://github.com/nuxeo/nuxeo/commit/71bc233e90d32bd3de9955eccc572e868f650499", "committedDate": "2021-01-12T09:04:08Z", "message": "NXP-29991: Add configuration flag"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "71bc233e90d32bd3de9955eccc572e868f650499", "author": {"user": {"login": "kevinleturc", "name": "Kevin Leturc"}}, "url": "https://github.com/nuxeo/nuxeo/commit/71bc233e90d32bd3de9955eccc572e868f650499", "committedDate": "2021-01-12T09:04:08Z", "message": "NXP-29991: Add configuration flag"}, "afterCommit": {"oid": "14404ee6b143bba5bf261cb49fa467e59fa82064", "author": {"user": {"login": "kevinleturc", "name": "Kevin Leturc"}}, "url": "https://github.com/nuxeo/nuxeo/commit/14404ee6b143bba5bf261cb49fa467e59fa82064", "committedDate": "2021-01-12T09:24:38Z", "message": "NXP-29991: Add configuration flag"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY2MDg2MTM3", "url": "https://github.com/nuxeo/nuxeo/pull/4558#pullrequestreview-566086137", "createdAt": "2021-01-12T09:34:31Z", "commit": {"oid": "14404ee6b143bba5bf261cb49fa467e59fa82064"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY2MTE3MzY0", "url": "https://github.com/nuxeo/nuxeo/pull/4558#pullrequestreview-566117364", "createdAt": "2021-01-12T10:10:50Z", "commit": {"oid": "14404ee6b143bba5bf261cb49fa467e59fa82064"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMlQxMDoxMDo1MFrOIR6g1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMlQxMDoxMDo1MFrOIR6g1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTY1NTM4MA==", "bodyText": "List<Blob> blobs = result.getBlobs();\nif (Framework.getService(ConfigurationService.class).isBooleanTrue(SANITIZE_ZIP_PREVIEW)) {\n    blobs.replaceAll(this::sanitize);\n}\nreturn blobs;", "url": "https://github.com/nuxeo/nuxeo/pull/4558#discussion_r555655380", "createdAt": "2021-01-12T10:10:50Z", "author": {"login": "efge"}, "path": "modules/platform/nuxeo-preview-core/src/main/java/org/nuxeo/ecm/platform/preview/adapter/ZipPreviewer.java", "diffHunk": "@@ -69,7 +72,11 @@\n \n         try {\n             BlobHolder result = conversionService.convert(converterName, new SimpleBlobHolder(blob), null);\n-            return result.getBlobs().stream().map(this::sanitize).collect(Collectors.toList());\n+            if (Framework.getService(ConfigurationService.class).isBooleanTrue(SANITIZE_ZIP_PREVIEW)) {\n+                return result.getBlobs().stream().map(this::sanitize).collect(Collectors.toList());\n+            } else {\n+                return result.getBlobs();\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14404ee6b143bba5bf261cb49fa467e59fa82064"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fba955ef8696927ad0d7a2a7bd6cd52e0423e843", "author": {"user": {"login": "kevinleturc", "name": "Kevin Leturc"}}, "url": "https://github.com/nuxeo/nuxeo/commit/fba955ef8696927ad0d7a2a7bd6cd52e0423e843", "committedDate": "2021-01-12T15:03:28Z", "message": "NXP-29991: Add configuration flag"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "14404ee6b143bba5bf261cb49fa467e59fa82064", "author": {"user": {"login": "kevinleturc", "name": "Kevin Leturc"}}, "url": "https://github.com/nuxeo/nuxeo/commit/14404ee6b143bba5bf261cb49fa467e59fa82064", "committedDate": "2021-01-12T09:24:38Z", "message": "NXP-29991: Add configuration flag"}, "afterCommit": {"oid": "fba955ef8696927ad0d7a2a7bd6cd52e0423e843", "author": {"user": {"login": "kevinleturc", "name": "Kevin Leturc"}}, "url": "https://github.com/nuxeo/nuxeo/commit/fba955ef8696927ad0d7a2a7bd6cd52e0423e843", "committedDate": "2021-01-12T15:03:28Z", "message": "NXP-29991: Add configuration flag"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY2OTE0OTA3", "url": "https://github.com/nuxeo/nuxeo/pull/4558#pullrequestreview-566914907", "createdAt": "2021-01-13T06:04:56Z", "commit": {"oid": "fba955ef8696927ad0d7a2a7bd6cd52e0423e843"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3NDEyMTE4", "url": "https://github.com/nuxeo/nuxeo/pull/4558#pullrequestreview-567412118", "createdAt": "2021-01-13T16:38:59Z", "commit": {"oid": "fba955ef8696927ad0d7a2a7bd6cd52e0423e843"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4893, "cost": 1, "resetAt": "2021-11-03T18:41:40Z"}}}