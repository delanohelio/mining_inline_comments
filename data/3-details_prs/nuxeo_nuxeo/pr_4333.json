{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkwOTcxMjUz", "number": 4333, "title": "NXP-29578: correctly initialize the workflow with the given variables", "bodyText": "", "createdAt": "2020-09-22T14:13:26Z", "url": "https://github.com/nuxeo/nuxeo/pull/4333", "merged": true, "mergeCommit": {"oid": "8c409515e587c8c66db3b3ff4bc313eee525e8e0"}, "closed": true, "closedAt": "2020-09-28T15:15:30Z", "author": {"login": "troger"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLYwZPgFqTQ5MzUxMzQwOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdMCLzrAFqTQ5NTY0Mjc4NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzNTEzNDA4", "url": "https://github.com/nuxeo/nuxeo/pull/4333#pullrequestreview-493513408", "createdAt": "2020-09-22T14:20:58Z", "commit": {"oid": "2871a4bc36b7011d33879206403fde90cdccf15d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNDoyMDo1OVrOHV8jGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxNDoyMDo1OVrOHV8jGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc3NDE3MQ==", "bodyText": "This seems brittle, what if there's a \" in the value?", "url": "https://github.com/nuxeo/nuxeo/pull/4333#discussion_r492774171", "createdAt": "2020-09-22T14:20:59Z", "author": {"login": "efge"}, "path": "modules/platform/nuxeo-platform-document-routing/nuxeo-routing-rest-api/src/test/java/org/nuxeo/ecm/restapi/server/RoutingRestBaseTest.java", "diffHunk": "@@ -119,6 +126,15 @@ protected String getCreateAndStartWorkflowBodyContent(String workflowName, List<\n             result.append(\"]\");\n         }\n \n+        if (variables != null && !variables.isEmpty()) {\n+            result.append(\", \\\"variables\\\": {\");\n+            result.append(variables.entrySet()\n+                                   .stream()\n+                                   .map(e -> \"\\\"\" + e.getKey() + \"\\\": \\\"\" + e.getValue() + \"\\\"\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2871a4bc36b7011d33879206403fde90cdccf15d"}, "originalPosition": 34}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2871a4bc36b7011d33879206403fde90cdccf15d", "author": {"user": {"login": "troger", "name": "Thomas Roger"}}, "url": "https://github.com/nuxeo/nuxeo/commit/2871a4bc36b7011d33879206403fde90cdccf15d", "committedDate": "2020-09-22T14:10:45Z", "message": "NXP-29578: correctly initialize the workflow with the given variables"}, "afterCommit": {"oid": "959e0841db82af606f459e1f8da252c32c4cd7b5", "author": {"user": {"login": "troger", "name": "Thomas Roger"}}, "url": "https://github.com/nuxeo/nuxeo/commit/959e0841db82af606f459e1f8da252c32c4cd7b5", "committedDate": "2020-09-22T14:37:00Z", "message": "NXP-29578: correctly initialize the workflow with the given variables"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "959e0841db82af606f459e1f8da252c32c4cd7b5", "author": {"user": {"login": "troger", "name": "Thomas Roger"}}, "url": "https://github.com/nuxeo/nuxeo/commit/959e0841db82af606f459e1f8da252c32c4cd7b5", "committedDate": "2020-09-22T14:37:00Z", "message": "NXP-29578: correctly initialize the workflow with the given variables"}, "afterCommit": {"oid": "10e8120baecda646f9534f69b06ac5d8153016a4", "author": {"user": {"login": "troger", "name": "Thomas Roger"}}, "url": "https://github.com/nuxeo/nuxeo/commit/10e8120baecda646f9534f69b06ac5d8153016a4", "committedDate": "2020-09-22T14:39:27Z", "message": "NXP-29578: correctly initialize the workflow with the given variables"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzNTM0OTg4", "url": "https://github.com/nuxeo/nuxeo/pull/4333#pullrequestreview-493534988", "createdAt": "2020-09-22T14:40:20Z", "commit": {"oid": "10e8120baecda646f9534f69b06ac5d8153016a4"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzNTUxNjkw", "url": "https://github.com/nuxeo/nuxeo/pull/4333#pullrequestreview-493551690", "createdAt": "2020-09-22T14:55:36Z", "commit": {"oid": "10e8120baecda646f9534f69b06ac5d8153016a4"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f7afbdd1b98a1e9d4ef2fcf13719d0a99c2c56f", "author": {"user": {"login": "troger", "name": "Thomas Roger"}}, "url": "https://github.com/nuxeo/nuxeo/commit/3f7afbdd1b98a1e9d4ef2fcf13719d0a99c2c56f", "committedDate": "2020-09-23T09:44:24Z", "message": "NXP-29578: cleanup/format"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b536eaa82986274ca36933b67f91f6f2680c3d3a", "author": {"user": {"login": "troger", "name": "Thomas Roger"}}, "url": "https://github.com/nuxeo/nuxeo/commit/b536eaa82986274ca36933b67f91f6f2680c3d3a", "committedDate": "2020-09-23T09:44:56Z", "message": "NXP-29578: correctly initialize the workflow with the given variables"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "10e8120baecda646f9534f69b06ac5d8153016a4", "author": {"user": {"login": "troger", "name": "Thomas Roger"}}, "url": "https://github.com/nuxeo/nuxeo/commit/10e8120baecda646f9534f69b06ac5d8153016a4", "committedDate": "2020-09-22T14:39:27Z", "message": "NXP-29578: correctly initialize the workflow with the given variables"}, "afterCommit": {"oid": "b536eaa82986274ca36933b67f91f6f2680c3d3a", "author": {"user": {"login": "troger", "name": "Thomas Roger"}}, "url": "https://github.com/nuxeo/nuxeo/commit/b536eaa82986274ca36933b67f91f6f2680c3d3a", "committedDate": "2020-09-23T09:44:56Z", "message": "NXP-29578: correctly initialize the workflow with the given variables"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0NDg1NzIw", "url": "https://github.com/nuxeo/nuxeo/pull/4333#pullrequestreview-494485720", "createdAt": "2020-09-23T09:46:59Z", "commit": {"oid": "b536eaa82986274ca36933b67f91f6f2680c3d3a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1NjQyNzg0", "url": "https://github.com/nuxeo/nuxeo/pull/4333#pullrequestreview-495642784", "createdAt": "2020-09-24T14:37:03Z", "commit": {"oid": "b536eaa82986274ca36933b67f91f6f2680c3d3a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4976, "cost": 1, "resetAt": "2021-11-03T18:41:40Z"}}}