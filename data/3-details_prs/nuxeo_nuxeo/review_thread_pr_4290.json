{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc3MDQxODIw", "number": 4290, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxMzoxMzozMFrOEfcsDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QyMDozNzo1NVrOEgJd1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxNDExMzQzOnYy", "diffSide": "RIGHT", "path": "ci/Jenkinsfiles/build.groovy", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxMzoxMzozMFrOHLueaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxMzoyNToyN1rOHLu-sQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjA1NzgzMw==", "bodyText": "Could color be added?", "url": "https://github.com/nuxeo/nuxeo/pull/4290#discussion_r482057833", "createdAt": "2020-09-02T13:13:30Z", "author": {"login": "kevinleturc"}, "path": "ci/Jenkinsfiles/build.groovy", "diffHunk": "@@ -885,6 +886,16 @@ pipeline {\n       script {\n         if (!isPullRequest() && env.DRY_RUN != \"true\") {\n           currentBuild.description = \"Build ${VERSION}\"\n+          if(!hudson.model.Result.FAILURE.equals(currentBuild.getPreviousBuild()?.getResult())) {\n+            slackSend(channel: \"${SLACK_CHANNEL}\", message: \"Successfully built ${BRANCH_NAME}/${BUILD_NUMBER}: ${BUILD_URL}\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bcc372a81c271c24c4a5a631e5d6a6b5fb55c37d"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjA2NjA5Nw==", "bodyText": "Added color to all messages\ngood for success\ndanger for failure\nand #0167FF for promotion start notice", "url": "https://github.com/nuxeo/nuxeo/pull/4290#discussion_r482066097", "createdAt": "2020-09-02T13:25:27Z", "author": {"login": "NourNuxeo"}, "path": "ci/Jenkinsfiles/build.groovy", "diffHunk": "@@ -885,6 +886,16 @@ pipeline {\n       script {\n         if (!isPullRequest() && env.DRY_RUN != \"true\") {\n           currentBuild.description = \"Build ${VERSION}\"\n+          if(!hudson.model.Result.FAILURE.equals(currentBuild.getPreviousBuild()?.getResult())) {\n+            slackSend(channel: \"${SLACK_CHANNEL}\", message: \"Successfully built ${BRANCH_NAME}/${BUILD_NUMBER}: ${BUILD_URL}\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjA1NzgzMw=="}, "originalCommit": {"oid": "bcc372a81c271c24c4a5a631e5d6a6b5fb55c37d"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyMDMyODE4OnYy", "diffSide": "RIGHT", "path": "ci/Jenkinsfiles/build.groovy", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxNToyMToxMVrOHMrt7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxNjoyNjozOVrOHMuc3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzA2MTIyOQ==", "bodyText": "Don't we want unsuccessful here, as we handle it for each step?", "url": "https://github.com/nuxeo/nuxeo/pull/4290#discussion_r483061229", "createdAt": "2020-09-03T15:21:11Z", "author": {"login": "ataillefer"}, "path": "ci/Jenkinsfiles/build.groovy", "diffHunk": "@@ -885,6 +886,16 @@ pipeline {\n       script {\n         if (!isPullRequest() && env.DRY_RUN != \"true\") {\n           currentBuild.description = \"Build ${VERSION}\"\n+          if(!hudson.model.Result.FAILURE.equals(currentBuild.getPreviousBuild()?.getResult())) {\n+            slackSend(channel: \"${SLACK_CHANNEL}\", color: \"good\", message: \"Successfully built ${BRANCH_NAME}/${BUILD_NUMBER}: ${BUILD_URL}\")\n+          }\n+        }\n+      }\n+    }\n+    failure {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c054e6049d7c60a5ac3cb22db1bb88591abb429"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzEwMzU2Mg==", "bodyText": "Didn't know about the nuance. \ud83d\udc4c", "url": "https://github.com/nuxeo/nuxeo/pull/4290#discussion_r483103562", "createdAt": "2020-09-03T16:22:46Z", "author": {"login": "NourNuxeo"}, "path": "ci/Jenkinsfiles/build.groovy", "diffHunk": "@@ -885,6 +886,16 @@ pipeline {\n       script {\n         if (!isPullRequest() && env.DRY_RUN != \"true\") {\n           currentBuild.description = \"Build ${VERSION}\"\n+          if(!hudson.model.Result.FAILURE.equals(currentBuild.getPreviousBuild()?.getResult())) {\n+            slackSend(channel: \"${SLACK_CHANNEL}\", color: \"good\", message: \"Successfully built ${BRANCH_NAME}/${BUILD_NUMBER}: ${BUILD_URL}\")\n+          }\n+        }\n+      }\n+    }\n+    failure {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzA2MTIyOQ=="}, "originalCommit": {"oid": "5c054e6049d7c60a5ac3cb22db1bb88591abb429"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzEwNjAxNQ==", "bodyText": "also replaced the previous build check\nif(!hudson.model.Result.SUCCESS.equals(currentBuild.getPreviousBuild()?.getResult())) {", "url": "https://github.com/nuxeo/nuxeo/pull/4290#discussion_r483106015", "createdAt": "2020-09-03T16:26:39Z", "author": {"login": "NourNuxeo"}, "path": "ci/Jenkinsfiles/build.groovy", "diffHunk": "@@ -885,6 +886,16 @@ pipeline {\n       script {\n         if (!isPullRequest() && env.DRY_RUN != \"true\") {\n           currentBuild.description = \"Build ${VERSION}\"\n+          if(!hudson.model.Result.FAILURE.equals(currentBuild.getPreviousBuild()?.getResult())) {\n+            slackSend(channel: \"${SLACK_CHANNEL}\", color: \"good\", message: \"Successfully built ${BRANCH_NAME}/${BUILD_NUMBER}: ${BUILD_URL}\")\n+          }\n+        }\n+      }\n+    }\n+    failure {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzA2MTIyOQ=="}, "originalCommit": {"oid": "5c054e6049d7c60a5ac3cb22db1bb88591abb429"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyMDM1MDgwOnYy", "diffSide": "RIGHT", "path": "ci/Jenkinsfiles/build.groovy", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxNToyNjoxNFrOHMr78A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QyMTowMzo0NFrOHM3apA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzA2NDgxNg==", "bodyText": "WDYT of \"Successfully built nuxeo/nuxeo ${BRANCH_NAME} #${BUILD_NUMBER}\"?", "url": "https://github.com/nuxeo/nuxeo/pull/4290#discussion_r483064816", "createdAt": "2020-09-03T15:26:14Z", "author": {"login": "ataillefer"}, "path": "ci/Jenkinsfiles/build.groovy", "diffHunk": "@@ -885,6 +886,16 @@ pipeline {\n       script {\n         if (!isPullRequest() && env.DRY_RUN != \"true\") {\n           currentBuild.description = \"Build ${VERSION}\"\n+          if(!hudson.model.Result.FAILURE.equals(currentBuild.getPreviousBuild()?.getResult())) {\n+            slackSend(channel: \"${SLACK_CHANNEL}\", color: \"good\", message: \"Successfully built ${BRANCH_NAME}/${BUILD_NUMBER}: ${BUILD_URL}\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c054e6049d7c60a5ac3cb22db1bb88591abb429"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzEwMTY3Mg==", "bodyText": "True we don't need to check it in success case", "url": "https://github.com/nuxeo/nuxeo/pull/4290#discussion_r483101672", "createdAt": "2020-09-03T16:19:53Z", "author": {"login": "NourNuxeo"}, "path": "ci/Jenkinsfiles/build.groovy", "diffHunk": "@@ -885,6 +886,16 @@ pipeline {\n       script {\n         if (!isPullRequest() && env.DRY_RUN != \"true\") {\n           currentBuild.description = \"Build ${VERSION}\"\n+          if(!hudson.model.Result.FAILURE.equals(currentBuild.getPreviousBuild()?.getResult())) {\n+            slackSend(channel: \"${SLACK_CHANNEL}\", color: \"good\", message: \"Successfully built ${BRANCH_NAME}/${BUILD_NUMBER}: ${BUILD_URL}\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzA2NDgxNg=="}, "originalCommit": {"oid": "5c054e6049d7c60a5ac3cb22db1bb88591abb429"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzI1MjkwMA==", "bodyText": "went for #4290 (comment)", "url": "https://github.com/nuxeo/nuxeo/pull/4290#discussion_r483252900", "createdAt": "2020-09-03T21:03:44Z", "author": {"login": "NourNuxeo"}, "path": "ci/Jenkinsfiles/build.groovy", "diffHunk": "@@ -885,6 +886,16 @@ pipeline {\n       script {\n         if (!isPullRequest() && env.DRY_RUN != \"true\") {\n           currentBuild.description = \"Build ${VERSION}\"\n+          if(!hudson.model.Result.FAILURE.equals(currentBuild.getPreviousBuild()?.getResult())) {\n+            slackSend(channel: \"${SLACK_CHANNEL}\", color: \"good\", message: \"Successfully built ${BRANCH_NAME}/${BUILD_NUMBER}: ${BUILD_URL}\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzA2NDgxNg=="}, "originalCommit": {"oid": "5c054e6049d7c60a5ac3cb22db1bb88591abb429"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyMDM1ODc0OnYy", "diffSide": "RIGHT", "path": "ci/Jenkinsfiles/release.groovy", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxNToyNzo0MVrOHMsBIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxNToyNzo0MVrOHMsBIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzA2NjE0NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                failure {\n          \n          \n            \n                unsuccessful {", "url": "https://github.com/nuxeo/nuxeo/pull/4290#discussion_r483066144", "createdAt": "2020-09-03T15:27:41Z", "author": {"login": "ataillefer"}, "path": "ci/Jenkinsfiles/release.groovy", "diffHunk": "@@ -273,6 +284,10 @@ pipeline {\n           currentBuild.description = \"Release ${RELEASE_VERSION} from build ${params.BUILD_VERSION}\"\n         }\n       }\n+      slackSend(channel: \"${SLACK_CHANNEL}\", color: \"good\", message: \"Successfully promoted ${BRANCH_NAME} from ${CURRENT_VERSION} to ${RELEASE_VERSION}: ${BUILD_URL}\")\n+    }\n+    failure {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c054e6049d7c60a5ac3cb22db1bb88591abb429"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyMDM4NjQzOnYy", "diffSide": "RIGHT", "path": "ci/Jenkinsfiles/release.groovy", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxNTozNDoxNFrOHMsSvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QyMDozNjozOVrOHM2pFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzA3MDY1NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                stage('Notify Promotion start on slack') {\n          \n          \n            \n                stage('Notify promotion start to Slack') {\n          \n      \n    \n    \n  \n\nmaybe?", "url": "https://github.com/nuxeo/nuxeo/pull/4290#discussion_r483070654", "createdAt": "2020-09-03T15:34:14Z", "author": {"login": "ataillefer"}, "path": "ci/Jenkinsfiles/release.groovy", "diffHunk": "@@ -79,10 +79,21 @@ pipeline {\n     DOCKER_NAMESPACE = 'nuxeo'\n     NUXEO_IMAGE_NAME = 'nuxeo'\n     SLIM_IMAGE_NAME = 'slim'\n+    SLACK_CHANNEL = 'platform-notifs'\n   }\n \n   stages {\n \n+    stage('Notify Promotion start on slack') {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c054e6049d7c60a5ac3cb22db1bb88591abb429"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzEwNjcxMw==", "bodyText": "ok for no caps but it think on is more fitted as I would say on the forum ?", "url": "https://github.com/nuxeo/nuxeo/pull/4290#discussion_r483106713", "createdAt": "2020-09-03T16:27:43Z", "author": {"login": "NourNuxeo"}, "path": "ci/Jenkinsfiles/release.groovy", "diffHunk": "@@ -79,10 +79,21 @@ pipeline {\n     DOCKER_NAMESPACE = 'nuxeo'\n     NUXEO_IMAGE_NAME = 'nuxeo'\n     SLIM_IMAGE_NAME = 'slim'\n+    SLACK_CHANNEL = 'platform-notifs'\n   }\n \n   stages {\n \n+    stage('Notify Promotion start on slack') {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzA3MDY1NA=="}, "originalCommit": {"oid": "5c054e6049d7c60a5ac3cb22db1bb88591abb429"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzI0MDIxNQ==", "bodyText": "Sure!", "url": "https://github.com/nuxeo/nuxeo/pull/4290#discussion_r483240215", "createdAt": "2020-09-03T20:36:39Z", "author": {"login": "ataillefer"}, "path": "ci/Jenkinsfiles/release.groovy", "diffHunk": "@@ -79,10 +79,21 @@ pipeline {\n     DOCKER_NAMESPACE = 'nuxeo'\n     NUXEO_IMAGE_NAME = 'nuxeo'\n     SLIM_IMAGE_NAME = 'slim'\n+    SLACK_CHANNEL = 'platform-notifs'\n   }\n \n   stages {\n \n+    stage('Notify Promotion start on slack') {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzA3MDY1NA=="}, "originalCommit": {"oid": "5c054e6049d7c60a5ac3cb22db1bb88591abb429"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyMDQxNjA3OnYy", "diffSide": "RIGHT", "path": "ci/Jenkinsfiles/release.groovy", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxNTo0MToxN1rOHMslow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxNjozMDoyN1rOHMul9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzA3NTQ5MQ==", "bodyText": "I'd go with a message similar to the build description we set at the end in case of success:  \"Starting release ${RELEASE_VERSION} from build ${params.BUILD_VERSION}: ${BUILD_URL}\", which will translate to \"Starting release 11.3 from build 11.3.47: https://xxx\" for instance.", "url": "https://github.com/nuxeo/nuxeo/pull/4290#discussion_r483075491", "createdAt": "2020-09-03T15:41:17Z", "author": {"login": "ataillefer"}, "path": "ci/Jenkinsfiles/release.groovy", "diffHunk": "@@ -79,10 +79,21 @@ pipeline {\n     DOCKER_NAMESPACE = 'nuxeo'\n     NUXEO_IMAGE_NAME = 'nuxeo'\n     SLIM_IMAGE_NAME = 'slim'\n+    SLACK_CHANNEL = 'platform-notifs'\n   }\n \n   stages {\n \n+    stage('Notify Promotion start on slack') {\n+      steps {\n+        script {\n+          if (env.DRY_RUN != \"true\") {\n+            slackSend(channel: \"${SLACK_CHANNEL}\", color: \"#0167FF\", message: \"Promoting ${BRANCH_NAME} from ${CURRENT_VERSION} to ${RELEASE_VERSION}: ${BUILD_URL}\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c054e6049d7c60a5ac3cb22db1bb88591abb429"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzEwODM0MA==", "bodyText": "fine for me \ud83d\udc4d", "url": "https://github.com/nuxeo/nuxeo/pull/4290#discussion_r483108340", "createdAt": "2020-09-03T16:30:27Z", "author": {"login": "NourNuxeo"}, "path": "ci/Jenkinsfiles/release.groovy", "diffHunk": "@@ -79,10 +79,21 @@ pipeline {\n     DOCKER_NAMESPACE = 'nuxeo'\n     NUXEO_IMAGE_NAME = 'nuxeo'\n     SLIM_IMAGE_NAME = 'slim'\n+    SLACK_CHANNEL = 'platform-notifs'\n   }\n \n   stages {\n \n+    stage('Notify Promotion start on slack') {\n+      steps {\n+        script {\n+          if (env.DRY_RUN != \"true\") {\n+            slackSend(channel: \"${SLACK_CHANNEL}\", color: \"#0167FF\", message: \"Promoting ${BRANCH_NAME} from ${CURRENT_VERSION} to ${RELEASE_VERSION}: ${BUILD_URL}\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzA3NTQ5MQ=="}, "originalCommit": {"oid": "5c054e6049d7c60a5ac3cb22db1bb88591abb429"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyMDQyMDI2OnYy", "diffSide": "RIGHT", "path": "ci/Jenkinsfiles/release.groovy", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxNTo0MjoxNVrOHMsoSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QyMDozODo1OVrOHM2tLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzA3NjE3MA==", "bodyText": "Should be it in the !DRY_RRUN block, no?", "url": "https://github.com/nuxeo/nuxeo/pull/4290#discussion_r483076170", "createdAt": "2020-09-03T15:42:15Z", "author": {"login": "ataillefer"}, "path": "ci/Jenkinsfiles/release.groovy", "diffHunk": "@@ -273,6 +284,10 @@ pipeline {\n           currentBuild.description = \"Release ${RELEASE_VERSION} from build ${params.BUILD_VERSION}\"\n         }\n       }\n+      slackSend(channel: \"${SLACK_CHANNEL}\", color: \"good\", message: \"Successfully promoted ${BRANCH_NAME} from ${CURRENT_VERSION} to ${RELEASE_VERSION}: ${BUILD_URL}\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c054e6049d7c60a5ac3cb22db1bb88591abb429"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzA3NjQ3Nw==", "bodyText": "Same thing I would go for \"Successfully released ${RELEASE_VERSION} from build ${params.BUILD_VERSION}: ${BUILD_URL}\"", "url": "https://github.com/nuxeo/nuxeo/pull/4290#discussion_r483076477", "createdAt": "2020-09-03T15:42:43Z", "author": {"login": "ataillefer"}, "path": "ci/Jenkinsfiles/release.groovy", "diffHunk": "@@ -273,6 +284,10 @@ pipeline {\n           currentBuild.description = \"Release ${RELEASE_VERSION} from build ${params.BUILD_VERSION}\"\n         }\n       }\n+      slackSend(channel: \"${SLACK_CHANNEL}\", color: \"good\", message: \"Successfully promoted ${BRANCH_NAME} from ${CURRENT_VERSION} to ${RELEASE_VERSION}: ${BUILD_URL}\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzA3NjE3MA=="}, "originalCommit": {"oid": "5c054e6049d7c60a5ac3cb22db1bb88591abb429"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzEwOTQzMg==", "bodyText": "since it's successfull why not considering the dev won't want to go and check the url as we did for build.groovy ?", "url": "https://github.com/nuxeo/nuxeo/pull/4290#discussion_r483109432", "createdAt": "2020-09-03T16:32:11Z", "author": {"login": "NourNuxeo"}, "path": "ci/Jenkinsfiles/release.groovy", "diffHunk": "@@ -273,6 +284,10 @@ pipeline {\n           currentBuild.description = \"Release ${RELEASE_VERSION} from build ${params.BUILD_VERSION}\"\n         }\n       }\n+      slackSend(channel: \"${SLACK_CHANNEL}\", color: \"good\", message: \"Successfully promoted ${BRANCH_NAME} from ${CURRENT_VERSION} to ${RELEASE_VERSION}: ${BUILD_URL}\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzA3NjE3MA=="}, "originalCommit": {"oid": "5c054e6049d7c60a5ac3cb22db1bb88591abb429"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzI0MTI2MA==", "bodyText": "In fact I didn't want to remove it from the suggestion for the build.\nLet's always display the build link: success/unsuccessful/build/release.", "url": "https://github.com/nuxeo/nuxeo/pull/4290#discussion_r483241260", "createdAt": "2020-09-03T20:38:59Z", "author": {"login": "ataillefer"}, "path": "ci/Jenkinsfiles/release.groovy", "diffHunk": "@@ -273,6 +284,10 @@ pipeline {\n           currentBuild.description = \"Release ${RELEASE_VERSION} from build ${params.BUILD_VERSION}\"\n         }\n       }\n+      slackSend(channel: \"${SLACK_CHANNEL}\", color: \"good\", message: \"Successfully promoted ${BRANCH_NAME} from ${CURRENT_VERSION} to ${RELEASE_VERSION}: ${BUILD_URL}\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzA3NjE3MA=="}, "originalCommit": {"oid": "5c054e6049d7c60a5ac3cb22db1bb88591abb429"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyMDQyNTAxOnYy", "diffSide": "RIGHT", "path": "ci/Jenkinsfiles/release.groovy", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxNTo0MzoyMVrOHMsrKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxNzowMTozN1rOHMvvPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzA3NjkwNg==", "bodyText": "Condtioned by DRY_RUN?\nAnd align message if updated.", "url": "https://github.com/nuxeo/nuxeo/pull/4290#discussion_r483076906", "createdAt": "2020-09-03T15:43:21Z", "author": {"login": "ataillefer"}, "path": "ci/Jenkinsfiles/release.groovy", "diffHunk": "@@ -273,6 +284,10 @@ pipeline {\n           currentBuild.description = \"Release ${RELEASE_VERSION} from build ${params.BUILD_VERSION}\"\n         }\n       }\n+      slackSend(channel: \"${SLACK_CHANNEL}\", color: \"good\", message: \"Successfully promoted ${BRANCH_NAME} from ${CURRENT_VERSION} to ${RELEASE_VERSION}: ${BUILD_URL}\")\n+    }\n+    failure {\n+      slackSend(channel: \"${SLACK_CHANNEL}\", colo: \"danger\", message: \"Failed to promote ${BRANCH_NAME} from ${CURRENT_VERSION} to ${RELEASE_VERSION}: ${BUILD_URL}\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c054e6049d7c60a5ac3cb22db1bb88591abb429"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzEyNzEwMg==", "bodyText": "Done!", "url": "https://github.com/nuxeo/nuxeo/pull/4290#discussion_r483127102", "createdAt": "2020-09-03T17:01:37Z", "author": {"login": "NourNuxeo"}, "path": "ci/Jenkinsfiles/release.groovy", "diffHunk": "@@ -273,6 +284,10 @@ pipeline {\n           currentBuild.description = \"Release ${RELEASE_VERSION} from build ${params.BUILD_VERSION}\"\n         }\n       }\n+      slackSend(channel: \"${SLACK_CHANNEL}\", color: \"good\", message: \"Successfully promoted ${BRANCH_NAME} from ${CURRENT_VERSION} to ${RELEASE_VERSION}: ${BUILD_URL}\")\n+    }\n+    failure {\n+      slackSend(channel: \"${SLACK_CHANNEL}\", colo: \"danger\", message: \"Failed to promote ${BRANCH_NAME} from ${CURRENT_VERSION} to ${RELEASE_VERSION}: ${BUILD_URL}\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzA3NjkwNg=="}, "originalCommit": {"oid": "5c054e6049d7c60a5ac3cb22db1bb88591abb429"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAyMTQ0OTgzOnYy", "diffSide": "RIGHT", "path": "ci/Jenkinsfiles/release.groovy", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QyMDozNzo1NVrOHM2rNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QyMTowNDozM1rOHM3cKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzI0MDc1Nw==", "bodyText": "Stick with \"release\" instead of \"promote\"?", "url": "https://github.com/nuxeo/nuxeo/pull/4290#discussion_r483240757", "createdAt": "2020-09-03T20:37:55Z", "author": {"login": "ataillefer"}, "path": "ci/Jenkinsfiles/release.groovy", "diffHunk": "@@ -271,6 +282,14 @@ pipeline {\n       script {\n         if (env.DRY_RUN != \"true\") {\n           currentBuild.description = \"Release ${RELEASE_VERSION} from build ${params.BUILD_VERSION}\"\n+          slackSend(channel: \"${SLACK_CHANNEL}\", color: \"good\", message: \"Successfully released ${RELEASE_VERSION} from build ${params.BUILD_VERSION}\")\n+        }\n+      }\n+    }\n+    unsuccessful {\n+      script {\n+        if (env.DRY_RUN != \"true\") {\n+          slackSend(channel: \"${SLACK_CHANNEL}\", color: \"danger\", message: \"Failed to promote ${RELEASE_VERSION} from build ${params.BUILD_VERSION}: ${BUILD_URL}\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79f9062f74209530e8a88ffca2e72630aa0f8ee5"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzI1MzI5MA==", "bodyText": "ah sorry \ud83e\udd26", "url": "https://github.com/nuxeo/nuxeo/pull/4290#discussion_r483253290", "createdAt": "2020-09-03T21:04:33Z", "author": {"login": "NourNuxeo"}, "path": "ci/Jenkinsfiles/release.groovy", "diffHunk": "@@ -271,6 +282,14 @@ pipeline {\n       script {\n         if (env.DRY_RUN != \"true\") {\n           currentBuild.description = \"Release ${RELEASE_VERSION} from build ${params.BUILD_VERSION}\"\n+          slackSend(channel: \"${SLACK_CHANNEL}\", color: \"good\", message: \"Successfully released ${RELEASE_VERSION} from build ${params.BUILD_VERSION}\")\n+        }\n+      }\n+    }\n+    unsuccessful {\n+      script {\n+        if (env.DRY_RUN != \"true\") {\n+          slackSend(channel: \"${SLACK_CHANNEL}\", color: \"danger\", message: \"Failed to promote ${RELEASE_VERSION} from build ${params.BUILD_VERSION}: ${BUILD_URL}\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzI0MDc1Nw=="}, "originalCommit": {"oid": "79f9062f74209530e8a88ffca2e72630aa0f8ee5"}, "originalPosition": 33}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4371, "cost": 1, "resetAt": "2021-11-03T18:41:40Z"}}}