{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzMDE1ODAx", "number": 3857, "title": "NXP-28790: retention management configs", "bodyText": "", "createdAt": "2020-03-24T14:13:14Z", "url": "https://github.com/nuxeo/nuxeo/pull/3857", "merged": true, "mergeCommit": {"oid": "c79a8d15687062ffbe52b296561e14a0e71f7f2f"}, "closed": true, "closedAt": "2020-03-26T09:35:15Z", "author": {"login": "nmpcunha"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQysIyAH2gAyMzkzMDE1ODAxOjkxMjNiMjU0OTFmNTYzM2IwZjViMGI4NGZlNTRlM2I1NDc1MmE2ODA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRLTWQgFqTM4MTM5NjAxMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9123b25491f5633b0f5b0b84fe54e3b54752a680", "author": {"user": null}, "url": "https://github.com/nuxeo/nuxeo/commit/9123b25491f5633b0f5b0b84fe54e3b54752a680", "committedDate": "2020-03-24T13:12:20Z", "message": "NXP-28790: set relaxed mode as standard for retention management"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b34658f8faa7590bbbc4a1354166108daa8afecd", "author": {"user": null}, "url": "https://github.com/nuxeo/nuxeo/commit/b34658f8faa7590bbbc4a1354166108daa8afecd", "committedDate": "2020-03-24T13:27:22Z", "message": "NXP-28790: provide compliance config as a package"}, "afterCommit": {"oid": "a213dfcebc7e32c15f1da0c3aa821b6e55565309", "author": {"user": null}, "url": "https://github.com/nuxeo/nuxeo/commit/a213dfcebc7e32c15f1da0c3aa821b6e55565309", "committedDate": "2020-03-25T12:50:21Z", "message": "NXP-28790: provide compliance config as a template"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMTMzMDcy", "url": "https://github.com/nuxeo/nuxeo/pull/3857#pullrequestreview-381133072", "createdAt": "2020-03-25T13:14:21Z", "commit": {"oid": "a213dfcebc7e32c15f1da0c3aa821b6e55565309"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMzoxNDoyMlrOF7aYew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMzoxNTowMFrOF7aaFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzg0MjU1NQ==", "bodyText": "Why not in the if? If the mode is not compliance, there is no need for this component to require something as it will be empty.", "url": "https://github.com/nuxeo/nuxeo/pull/3857#discussion_r397842555", "createdAt": "2020-03-25T13:14:22Z", "author": {"login": "troger"}, "path": "packages/nuxeo-retention-package/src/main/resources/install/templates/retention/nxserver/config/retention-compliance-config.xml.nxftl", "diffHunk": "@@ -0,0 +1,23 @@\n+<?xml version=\"1.0\"?>\n+\n+<component name=\"org.nuxeo.retention.compliance.types\">\n+\n+    <require>org.nuxeo.retention.types</require>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a213dfcebc7e32c15f1da0c3aa821b6e55565309"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzg0Mjk2Nw==", "bodyText": "Empty line to be removed.", "url": "https://github.com/nuxeo/nuxeo/pull/3857#discussion_r397842967", "createdAt": "2020-03-25T13:15:00Z", "author": {"login": "troger"}, "path": "packages/nuxeo-retention-package/src/main/resources/install/templates/retention/nxserver/config/retention-compliance-config.xml.nxftl", "diffHunk": "@@ -0,0 +1,23 @@\n+<?xml version=\"1.0\"?>\n+\n+<component name=\"org.nuxeo.retention.compliance.types\">\n+\n+    <require>org.nuxeo.retention.types</require>\n+\n+<#if \"${nuxeo.retention.mode}\" == \"compliance\">\n+    <require>org.nuxeo.ecm.core.schema.TypeService</require>\n+\n+    <extension target=\"org.nuxeo.ecm.core.schema.TypeService\" point=\"schema\">\n+        <schema name=\"files\" enabled=\"false\" />\n+    </extension>\n+\n+    <extension target=\"org.nuxeo.ecm.core.schema.TypeService\" point=\"doctype\">\n+        <facet name=\"Commentable\" enabled=\"false\" />\n+        <facet name=\"Publishable\" enabled=\"false\" />\n+        <facet name=\"Versionable\" enabled=\"false\" />\n+    </extension>\n+\n+</#if>\n+\n+</component>\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a213dfcebc7e32c15f1da0c3aa821b6e55565309"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMTQxMTg4", "url": "https://github.com/nuxeo/nuxeo/pull/3857#pullrequestreview-381141188", "createdAt": "2020-03-25T13:24:05Z", "commit": {"oid": "a213dfcebc7e32c15f1da0c3aa821b6e55565309"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMzoyNDowNlrOF7ax0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMzoyNDowNlrOF7ax0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzg0OTA0Mw==", "bodyText": "Will we have more than 2 modes? If no, I would probably go for a \"boolean\".", "url": "https://github.com/nuxeo/nuxeo/pull/3857#discussion_r397849043", "createdAt": "2020-03-25T13:24:06Z", "author": {"login": "troger"}, "path": "packages/nuxeo-retention-package/src/main/resources/install/templates/retention/nuxeo.defaults", "diffHunk": "@@ -0,0 +1,5 @@\n+## DO NOT EDIT THIS FILE, USE nuxeo.conf  ##\n+nuxeo.template.includes=\n+retention.target=.\n+\n+nuxeo.retention.mode=standard", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a213dfcebc7e32c15f1da0c3aa821b6e55565309"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMTYzMDU3", "url": "https://github.com/nuxeo/nuxeo/pull/3857#pullrequestreview-381163057", "createdAt": "2020-03-25T13:48:52Z", "commit": {"oid": "a213dfcebc7e32c15f1da0c3aa821b6e55565309"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMzo0ODo1MlrOF7b3rw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMzo0ODo1MlrOF7b3rw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzg2NjkyNw==", "bodyText": "needs a break line at the end of the file.", "url": "https://github.com/nuxeo/nuxeo/pull/3857#discussion_r397866927", "createdAt": "2020-03-25T13:48:52Z", "author": {"login": "RSalem07"}, "path": "packages/nuxeo-retention-package/src/main/resources/install/templates/retention/nuxeo.defaults", "diffHunk": "@@ -0,0 +1,5 @@\n+## DO NOT EDIT THIS FILE, USE nuxeo.conf  ##\n+nuxeo.template.includes=\n+retention.target=.\n+\n+nuxeo.retention.mode=standard", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a213dfcebc7e32c15f1da0c3aa821b6e55565309"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a213dfcebc7e32c15f1da0c3aa821b6e55565309", "author": {"user": null}, "url": "https://github.com/nuxeo/nuxeo/commit/a213dfcebc7e32c15f1da0c3aa821b6e55565309", "committedDate": "2020-03-25T12:50:21Z", "message": "NXP-28790: provide compliance config as a template"}, "afterCommit": {"oid": "88485d18b4e460c62d17064807aa5b7efb1e1a30", "author": {"user": null}, "url": "https://github.com/nuxeo/nuxeo/commit/88485d18b4e460c62d17064807aa5b7efb1e1a30", "committedDate": "2020-03-25T16:38:56Z", "message": "NXP-28790: provide compliance config as a template"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMzUwMzU1", "url": "https://github.com/nuxeo/nuxeo/pull/3857#pullrequestreview-381350355", "createdAt": "2020-03-25T16:59:49Z", "commit": {"oid": "88485d18b4e460c62d17064807aa5b7efb1e1a30"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMzUyMzIy", "url": "https://github.com/nuxeo/nuxeo/pull/3857#pullrequestreview-381352322", "createdAt": "2020-03-25T17:02:01Z", "commit": {"oid": "88485d18b4e460c62d17064807aa5b7efb1e1a30"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMzU2MjM0", "url": "https://github.com/nuxeo/nuxeo/pull/3857#pullrequestreview-381356234", "createdAt": "2020-03-25T17:06:19Z", "commit": {"oid": "88485d18b4e460c62d17064807aa5b7efb1e1a30"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMzYxMjM0", "url": "https://github.com/nuxeo/nuxeo/pull/3857#pullrequestreview-381361234", "createdAt": "2020-03-25T17:11:55Z", "commit": {"oid": "88485d18b4e460c62d17064807aa5b7efb1e1a30"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNzoxMTo1NVrOF7llgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNzoxMTo1NVrOF7llgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODAyNjExNA==", "bodyText": "Please remove the blank line before <component as well.", "url": "https://github.com/nuxeo/nuxeo/pull/3857#discussion_r398026114", "createdAt": "2020-03-25T17:11:55Z", "author": {"login": "efge"}, "path": "packages/nuxeo-retention-package/src/main/resources/install/templates/retention/nxserver/config/retention-compliance-config.xml.nxftl", "diffHunk": "@@ -0,0 +1,19 @@\n+<?xml version=\"1.0\"?>\n+\n+<component name=\"org.nuxeo.retention.compliance.types\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88485d18b4e460c62d17064807aa5b7efb1e1a30"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMzYyMjAy", "url": "https://github.com/nuxeo/nuxeo/pull/3857#pullrequestreview-381362202", "createdAt": "2020-03-25T17:12:58Z", "commit": {"oid": "88485d18b4e460c62d17064807aa5b7efb1e1a30"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNzoxMjo1OVrOF7lokA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNzoxMjo1OVrOF7lokA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODAyNjg5Ng==", "bodyText": "This <require> is useless, it's implicit in the fact that we use extension points from this component.", "url": "https://github.com/nuxeo/nuxeo/pull/3857#discussion_r398026896", "createdAt": "2020-03-25T17:12:59Z", "author": {"login": "efge"}, "path": "packages/nuxeo-retention-package/src/main/resources/install/templates/retention/nxserver/config/retention-compliance-config.xml.nxftl", "diffHunk": "@@ -0,0 +1,19 @@\n+<?xml version=\"1.0\"?>\n+\n+<component name=\"org.nuxeo.retention.compliance.types\">\n+<#if \"${nuxeo.retention.compliance.enabled}\" == \"true\">\n+    <require>org.nuxeo.retention.types</require>\n+    <require>org.nuxeo.ecm.core.schema.TypeService</require>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88485d18b4e460c62d17064807aa5b7efb1e1a30"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e19b0b7ba3b60ce3d9c35ab1c5318fe8c4863dd0", "author": {"user": null}, "url": "https://github.com/nuxeo/nuxeo/commit/e19b0b7ba3b60ce3d9c35ab1c5318fe8c4863dd0", "committedDate": "2020-03-25T17:28:05Z", "message": "NXP-28790: provide compliance config as a template"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "88485d18b4e460c62d17064807aa5b7efb1e1a30", "author": {"user": null}, "url": "https://github.com/nuxeo/nuxeo/commit/88485d18b4e460c62d17064807aa5b7efb1e1a30", "committedDate": "2020-03-25T16:38:56Z", "message": "NXP-28790: provide compliance config as a template"}, "afterCommit": {"oid": "e19b0b7ba3b60ce3d9c35ab1c5318fe8c4863dd0", "author": {"user": null}, "url": "https://github.com/nuxeo/nuxeo/commit/e19b0b7ba3b60ce3d9c35ab1c5318fe8c4863dd0", "committedDate": "2020-03-25T17:28:05Z", "message": "NXP-28790: provide compliance config as a template"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMzgwNDIy", "url": "https://github.com/nuxeo/nuxeo/pull/3857#pullrequestreview-381380422", "createdAt": "2020-03-25T17:33:55Z", "commit": {"oid": "e19b0b7ba3b60ce3d9c35ab1c5318fe8c4863dd0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMzkxNzUz", "url": "https://github.com/nuxeo/nuxeo/pull/3857#pullrequestreview-381391753", "createdAt": "2020-03-25T17:47:40Z", "commit": {"oid": "e19b0b7ba3b60ce3d9c35ab1c5318fe8c4863dd0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMzk2MDEz", "url": "https://github.com/nuxeo/nuxeo/pull/3857#pullrequestreview-381396013", "createdAt": "2020-03-25T17:52:53Z", "commit": {"oid": "e19b0b7ba3b60ce3d9c35ab1c5318fe8c4863dd0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4812, "cost": 1, "resetAt": "2021-11-03T18:41:40Z"}}}