{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0MjM1NDk4", "number": 2284, "title": "Secret manager template with project (#2283)", "bodyText": "In relation with the issue #2283\nThis first step is focused on the Secret Manager Template bean. If it's on the right way, I will add the bootstrap part to load secret from another projects", "createdAt": "2020-03-26T15:17:49Z", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2284", "merged": true, "mergeCommit": {"oid": "57f63865b5d66a1297f88eacabf112b04ba37364"}, "closed": true, "closedAt": "2020-03-30T14:40:09Z", "author": {"login": "guillaumeblaquiere"}, "timelineItems": {"totalCount": 31, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRdFdIAH2gAyMzk0MjM1NDk4OmQzOGM0N2JhNGU3YWI4ZDgyMDYwYzI4MWZmNzA0Yjc5OTVjYWExMjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcSu_E_gFqTM4Mzg4NDU0OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d38c47ba4e7ab8d82060c281ff704b7995caa120", "author": {"user": null}, "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/d38c47ba4e7ab8d82060c281ff704b7995caa120", "committedDate": "2020-03-26T14:36:00Z", "message": "Add projectId selection capability to SecretManagerTemplate class. The default project is still use by default, but can be overridden by a parameter for the creation and the access to the secrets."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8943344de4ac0ecf72ea6c1e9aa0460302263cc0", "author": {"user": null}, "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/8943344de4ac0ecf72ea6c1e9aa0460302263cc0", "committedDate": "2020-03-26T14:36:29Z", "message": "Doc improvement: add the directory for the eclipse formatter."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyMjAyMDM5", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2284#pullrequestreview-382202039", "createdAt": "2020-03-26T16:45:37Z", "commit": {"oid": "8943344de4ac0ecf72ea6c1e9aa0460302263cc0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxNjo0NTozN1rOF8QQvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxNjo0Njo0MVrOF8QTyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODcyNTMwOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Select the `eclipse-code-formatter.xml` file for the field `Eclipse Java Formatter config file` and the file `eclipse.importorder` for the field `Import order` in the `src/eclipse` directory\n          \n          \n            \n            Select the `eclipse-code-formatter.xml` file for the field `Eclipse Java Formatter config file` and the file `eclipse.importorder` for the field `Import order` in the `src/eclipse` directory.", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2284#discussion_r398725308", "createdAt": "2020-03-26T16:45:37Z", "author": {"login": "meltsufin"}, "path": "CONTRIBUTING.adoc", "diffHunk": "@@ -47,7 +47,7 @@ Install the plugin `Eclipse Code Formatter`.\n You can find it by searching in \"Browse Repositories\", under `Settings > Plugins` within IDEA (Once installed, you will need to reboot IDEA for it to take effect).\n \n Then navigate to `Settings > Other Settings` (this might be under `Preferences` on Mac) and select the Eclipse Code Formatter.\n-Select the `eclipse-code-formatter.xml` file for the field `Eclipse Java Formatter config file` and the file `eclipse.importorder` for the field `Import order`.\n+Select the `eclipse-code-formatter.xml` file for the field `Eclipse Java Formatter config file` and the file `eclipse.importorder` for the field `Import order` in the `src/eclipse` directory", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8943344de4ac0ecf72ea6c1e9aa0460302263cc0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODcyNjA4OA==", "bodyText": "I would just create an overloaded method createSecret(secretId, payload, projectId)", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2284#discussion_r398726088", "createdAt": "2020-03-26T16:46:41Z", "author": {"login": "meltsufin"}, "path": "spring-cloud-gcp-secretmanager/src/main/java/org/springframework/cloud/gcp/secretmanager/SecretManagerOperations.java", "diffHunk": "@@ -40,6 +40,21 @@\n \t */\n \tvoid createSecret(String secretId, String payload);\n \n+\t/**\n+\t * Creates a new secret or a new version of existing secret with the provided\n+\t * {@code payload} for a specific {@code projectId}.\n+\t *\n+\t * <p>\n+\t * If there is already a secret saved in SecretManager with the specified\n+\t * {@code secretId}, then it simply creates a new version under the secret with the secret\n+\t * {@code payload}.\n+\t *\n+\t * @param secretId the secret ID of the secret to create.\n+\t * @param payload the secret payload string.\n+\t * @param projectId unique identifier of your project.\n+\t */\n+\tvoid createSecretWithProject(String secretId, String payload, String projectId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8943344de4ac0ecf72ea6c1e9aa0460302263cc0"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyMjI3NjI3", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2284#pullrequestreview-382227627", "createdAt": "2020-03-26T17:13:25Z", "commit": {"oid": "8943344de4ac0ecf72ea6c1e9aa0460302263cc0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxNzoxMzoyNVrOF8Rg-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxNzoxMzoyNVrOF8Rg-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODc0NTg1MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tpublic void testCreateSecretIfMissingWithProject() {\n          \n          \n            \n            \tpublic void testCreateSecretIfMissing_withProject() {\n          \n      \n    \n    \n  \n\nMinor style - if you could make modify the test name to be _withProject I think it is more clear that it refers to using the project parameter", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2284#discussion_r398745851", "createdAt": "2020-03-26T17:13:25Z", "author": {"login": "dzou"}, "path": "spring-cloud-gcp-secretmanager/src/test/java/org/springframework/cloud/gcp/secretmanager/SecretManagerTemplateTests.java", "diffHunk": "@@ -90,6 +90,35 @@ public void testCreateSecretIfMissing() {\n \t\tverify(this.client).addSecretVersion(addSecretVersionRequest);\n \t}\n \n+\t@Test\n+\tpublic void testCreateSecretIfMissingWithProject() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8943344de4ac0ecf72ea6c1e9aa0460302263cc0"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdff00468033caa3c8096b1a2c33a1bb17640a21", "author": {"user": null}, "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/fdff00468033caa3c8096b1a2c33a1bb17640a21", "committedDate": "2020-03-26T20:40:26Z", "message": "Fix typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e03bf7a76aba8e365132f78d78e67866071db16", "author": {"user": null}, "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/7e03bf7a76aba8e365132f78d78e67866071db16", "committedDate": "2020-03-26T21:26:15Z", "message": "Update overload method definition.\nAdd public static field for latest value."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94e11f017e07cfd1c56efaed92408a2214371c0d", "author": {"user": null}, "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/94e11f017e07cfd1c56efaed92408a2214371c0d", "committedDate": "2020-03-26T22:04:03Z", "message": "Add bootstap with projectId selection. Same logic as versions."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea6633054da63aa75c8524edb7019dbb7d5a73c6", "author": {"user": null}, "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/ea6633054da63aa75c8524edb7019dbb7d5a73c6", "committedDate": "2020-03-26T22:05:50Z", "message": "Update example with command, other project use, bootstrap configuration for versions and projectId."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a28aff22f4fcf781a23e1e2a2b4713f0ec204f12", "author": {"user": null}, "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/a28aff22f4fcf781a23e1e2a2b4713f0ec204f12", "committedDate": "2020-03-26T22:22:30Z", "message": "Fix typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5190f2591a055590a5977df143c7b18a6b3b0eb", "author": {"user": null}, "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/e5190f2591a055590a5977df143c7b18a6b3b0eb", "committedDate": "2020-03-26T22:23:08Z", "message": "Prevent test error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e871b87335400e8b6d075c447d2c17a748c6138d", "author": {"user": null}, "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/e871b87335400e8b6d075c447d2c17a748c6138d", "committedDate": "2020-03-26T22:43:51Z", "message": "Fix Style"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyNDcyMTM5", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2284#pullrequestreview-382472139", "createdAt": "2020-03-26T22:45:24Z", "commit": {"oid": "e5190f2591a055590a5977df143c7b18a6b3b0eb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMjo0NToyNFrOF8dK4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMjo0NToyNFrOF8dK4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkzNjgwMQ==", "bodyText": "Oh yup, I see. We would prefer all uppercase name here: LATEST_VERSION.", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2284#discussion_r398936801", "createdAt": "2020-03-26T22:45:24Z", "author": {"login": "dzou"}, "path": "spring-cloud-gcp-secretmanager/src/main/java/org/springframework/cloud/gcp/secretmanager/SecretManagerTemplate.java", "diffHunk": "@@ -40,6 +40,11 @@\n  */\n public class SecretManagerTemplate implements SecretManagerOperations {\n \n+\t/**\n+\t * Default value for the latest version of the secret.\n+\t */\n+\tpublic static final String latestVersion = \"latest\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e5190f2591a055590a5977df143c7b18a6b3b0eb"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26e0334cecb44cb7ea76532d6904a7292c584bc0", "author": {"user": null}, "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/26e0334cecb44cb7ea76532d6904a7292c584bc0", "committedDate": "2020-03-26T22:52:42Z", "message": "Refactor Public static variable to UPPER"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9d0a5b9ec5f4bbea0b8ef387af9f283420e81ff", "author": {"user": {"login": "s13o", "name": "Roman Solodovnichenko"}}, "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/e9d0a5b9ec5f4bbea0b8ef387af9f283420e81ff", "committedDate": "2020-03-27T08:23:37Z", "message": "Fix @Where with ORDER BY query generation (#2267)\n\nFixes: #2266."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e08484c021e3fd2ed206ceda3e097dc39c52eb1e", "author": {"user": {"login": "dzou", "name": "Daniel Zou"}}, "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/e08484c021e3fd2ed206ceda3e097dc39c52eb1e", "committedDate": "2020-03-27T08:23:56Z", "message": "Remove the version property in secret manager (#2270)\n\nRemoves the version property for secret manager"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8a9538a7f660eaa31ae4204f9d14fd57bb4b284", "author": {"user": null}, "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/e8a9538a7f660eaa31ae4204f9d14fd57bb4b284", "committedDate": "2020-03-27T08:23:57Z", "message": "Roolback for having only template update in this PR"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a6f81866a0087f46d47ca2045ca88c44deff0f9", "author": {"user": null}, "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/5a6f81866a0087f46d47ca2045ca88c44deff0f9", "committedDate": "2020-03-27T08:23:57Z", "message": "Keep new line for readability"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "39e94e3483a6a47e6ad5aebd13312c781c702161", "author": {"user": {"login": "dzou", "name": "Daniel Zou"}}, "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/39e94e3483a6a47e6ad5aebd13312c781c702161", "committedDate": "2020-03-27T08:31:38Z", "message": "Remove the version property in secret manager (#2270)\n\nRemoves the version property for secret manager"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d2600893816b2d677f708cabb15488637761950", "author": {"user": null}, "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/2d2600893816b2d677f708cabb15488637761950", "committedDate": "2020-03-27T08:31:38Z", "message": "Add bootstap with projectId selection. Same logic as versions."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00f1c94103efe39a6918d1ab96d3e16bc3eb6d6e", "author": {"user": null}, "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/00f1c94103efe39a6918d1ab96d3e16bc3eb6d6e", "committedDate": "2020-03-27T08:35:45Z", "message": "Fix wrong commit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b4210932a5734dbe28011c4b0dd906c5fbf50f8", "author": {"user": {"login": "dzou", "name": "Daniel Zou"}}, "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/6b4210932a5734dbe28011c4b0dd906c5fbf50f8", "committedDate": "2020-03-27T15:07:26Z", "message": "Merge branch 'master' into guillaume"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4296e740fdfeff1f773fba21151d48f8402dbcc", "author": {"user": {"login": "dzou", "name": "Daniel Zou"}}, "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/d4296e740fdfeff1f773fba21151d48f8402dbcc", "committedDate": "2020-03-27T15:46:10Z", "message": "fix sample tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd866834820b7cf978eed80dfabfe37725c662b6", "author": {"user": {"login": "dzou", "name": "Daniel Zou"}}, "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/cd866834820b7cf978eed80dfabfe37725c662b6", "committedDate": "2020-03-27T15:57:16Z", "message": "refactor unit tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyOTkwNDQ2", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2284#pullrequestreview-382990446", "createdAt": "2020-03-27T15:59:34Z", "commit": {"oid": "cd866834820b7cf978eed80dfabfe37725c662b6"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0519b8ae416ad6673076776bbb1a93256e08342", "author": {"user": {"login": "dzou", "name": "Daniel Zou"}}, "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/b0519b8ae416ad6673076776bbb1a93256e08342", "committedDate": "2020-03-27T16:52:01Z", "message": "fix checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "baae0dd94d1756b8c26f5a5e22a705b42ca9f8d3", "author": {"user": {"login": "dzou", "name": "Daniel Zou"}}, "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/baae0dd94d1756b8c26f5a5e22a705b42ca9f8d3", "committedDate": "2020-03-27T17:31:22Z", "message": "checkstyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMDk4ODQz", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2284#pullrequestreview-383098843", "createdAt": "2020-03-27T18:18:46Z", "commit": {"oid": "baae0dd94d1756b8c26f5a5e22a705b42ca9f8d3"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMjAyMTQ0", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2284#pullrequestreview-383202144", "createdAt": "2020-03-27T21:11:22Z", "commit": {"oid": "baae0dd94d1756b8c26f5a5e22a705b42ca9f8d3"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QyMToxMToyMlrOF9B-eg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QyMToxMzo1MlrOF9CCiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTUzOTgzNA==", "bodyText": "Are we missing String getSecretString(String secretId, String projectId) variation or would this be too much?", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2284#discussion_r399539834", "createdAt": "2020-03-27T21:11:22Z", "author": {"login": "meltsufin"}, "path": "spring-cloud-gcp-secretmanager/src/main/java/org/springframework/cloud/gcp/secretmanager/SecretManagerOperations.java", "diffHunk": "@@ -73,6 +103,18 @@\n \t */\n \tString getSecretString(String secretId, String versionName);\n \n+\t/**\n+\t * Gets the secret payload of the specified {@code secretId} at version\n+\t * {@code versionName} for a specific {@code projectId}.\n+\t *\n+\t * @param secretId unique identifier of your secret in Secret Manager.\n+\t * @param versionName which version of the secret to load. The version can be a version\n+\t *     number as a string (e.g. \"5\") or an alias (e.g. \"latest\").\n+\t * @param projectId unique identifier of your project.\n+\t * @return The secret payload as String\n+\t */\n+\tString getSecretString(String secretId, String versionName, String projectId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "baae0dd94d1756b8c26f5a5e22a705b42ca9f8d3"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTU0MDg3NQ==", "bodyText": "Does it make sense to have secretExists(String secretId, String versionName, String projectId)?\nThis would check if a specific version of the secret exists.", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2284#discussion_r399540875", "createdAt": "2020-03-27T21:13:52Z", "author": {"login": "meltsufin"}, "path": "spring-cloud-gcp-secretmanager/src/main/java/org/springframework/cloud/gcp/secretmanager/SecretManagerOperations.java", "diffHunk": "@@ -111,4 +177,14 @@\n \t * @return true if the secret exists in Secret Manager; false otherwise\n \t */\n \tboolean secretExists(String secretId);\n+\n+\t/**\n+\t * Returns true if there already exists a secret under the GCP {@code projectId} with the\n+\t * {@code secretId}.\n+\t *\n+\t * @param secretId unique identifier of your secret in Secret Manager.\n+\t * @param projectId unique identifier of your project.\n+\t * @return true if the secret exists in Secret Manager; false otherwise\n+\t */\n+\tboolean secretExists(String secretId, String projectId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "baae0dd94d1756b8c26f5a5e22a705b42ca9f8d3"}, "originalPosition": 114}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bea11dc8f01f819d2d2c15fd8dd63bd9381eb02c", "author": {"user": {"login": "dzou", "name": "Daniel Zou"}}, "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/bea11dc8f01f819d2d2c15fd8dd63bd9381eb02c", "committedDate": "2020-03-28T17:39:48Z", "message": "Reduce number of overloaded methods"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMzQ3NjU1", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2284#pullrequestreview-383347655", "createdAt": "2020-03-28T20:38:59Z", "commit": {"oid": "bea11dc8f01f819d2d2c15fd8dd63bd9381eb02c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQyMDozOTowMFrOF9MLTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQyMDozOTowMFrOF9MLTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcwNjk1OA==", "bodyText": "Should we remove this variant of getSecretString as well? Same goes for getSecretBytes.", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2284#discussion_r399706958", "createdAt": "2020-03-28T20:39:00Z", "author": {"login": "meltsufin"}, "path": "spring-cloud-gcp-samples/spring-cloud-gcp-secretmanager-sample/src/main/java/com/example/SecretManagerWebController.java", "diffHunk": "@@ -46,25 +48,58 @@\n \t@Value(\"${secrets.application-secret}\")\n \tprivate String applicationSecretValue;\n \n+\t// Application secret is set into the properties file and get here using @Value\n+\t@Value(\"${my-application-secret}\")\n+\tprivate String myApplicationSecretValue;\n+\n \t@GetMapping(\"/\")\n \tpublic ModelAndView renderIndex(ModelMap map) {\n \t\tmap.put(\"applicationSecret\", this.applicationSecretValue);\n+\t\tmap.put(\"myApplicationSecret\", this.myApplicationSecretValue);\n \t\treturn new ModelAndView(\"index.html\", map);\n \t}\n \n \t@GetMapping(\"/getSecret\")\n \t@ResponseBody\n-\tpublic String getSecret(@RequestParam String secretId, ModelMap map) {\n-\t\tString secretPayload = this.secretManagerTemplate.getSecretString(secretId);\n+\tpublic String getSecret(\n+\t\t\t@RequestParam String secretId,\n+\t\t\t@RequestParam(required = false) String version,\n+\t\t\t@RequestParam(required = false) String projectId,\n+\t\t\tModelMap map) {\n+\n+\t\tif (StringUtils.isEmpty(version)) {\n+\t\t\tversion = SecretManagerTemplate.LATEST_VERSION;\n+\t\t}\n+\n+\t\tString secretPayload;\n+\t\tif (StringUtils.isEmpty(projectId)) {\n+\t\t\tsecretPayload = this.secretManagerTemplate.getSecretString(secretId, version);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bea11dc8f01f819d2d2c15fd8dd63bd9381eb02c"}, "originalPosition": 40}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzODg0NTQ5", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2284#pullrequestreview-383884549", "createdAt": "2020-03-30T14:01:15Z", "commit": {"oid": "bea11dc8f01f819d2d2c15fd8dd63bd9381eb02c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 584, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}