{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1NTYxNzEz", "number": 2437, "title": "Replaced DatastoreTemplate with DatastoreOperations", "bodyText": "Fixes #2436\nReplaced ocurrences of DatastoreTemplate to use interface DatastoreOperations. Had to pull up 3 methods into interface, but all of them are using the same types as any other method in the interface.\nNote: Master build is failing, therefore I could not validate all tests, for what I can tell the data-datastore tests passes along with checkstyle and so does the autoconfigure tests and integration with emulator. But master is failing as of now.", "createdAt": "2020-06-17T02:19:32Z", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2437", "merged": true, "mergeCommit": {"oid": "9f5956d243ec4a26a1cc57658bf3aa9a119acedb"}, "closed": true, "closedAt": "2020-06-29T13:38:06Z", "author": {"login": "viniciusccarvalho"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcsAMVEgH2gAyNDM1NTYxNzEzOjU3ODFhMjVlMzRlNGZlNjQ1ZmQzYmM5ZWVlNzVmNjI0MjYyMjI1OTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwBMIQAFqTQzOTE1MDk3MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5781a25e34e4fe645fd3bc9eee75f62426222595", "author": {"user": {"login": "viniciusccarvalho", "name": "Vinicius Carvalho"}}, "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/5781a25e34e4fe645fd3bc9eee75f62426222595", "committedDate": "2020-06-17T02:12:13Z", "message": "Replaced DatastoreTemplate with DatastoreOperations"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyMDQzMzg5", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2437#pullrequestreview-432043389", "createdAt": "2020-06-17T04:05:07Z", "commit": {"oid": "5781a25e34e4fe645fd3bc9eee75f62426222595"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QwNDowNTowN1rOGk03vQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QwNDowNzoxNVrOGk05oA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI2ODE1Nw==", "bodyText": "We should javadoc here, since it's the interface.", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2437#discussion_r441268157", "createdAt": "2020-06-17T04:05:07Z", "author": {"login": "meltsufin"}, "path": "spring-cloud-gcp-data-datastore/src/main/java/org/springframework/cloud/gcp/data/datastore/core/DatastoreOperations.java", "diffHunk": "@@ -260,4 +262,23 @@\n \t * @return result keys\n \t */\n \t<T> Iterable<Key> keyQueryByExample(Example<T> example, DatastoreQueryOptions queryOptions);\n+\n+\t/**\n+\t * Get the {@link DatastoreEntityConverter} used by this template.\n+\t * @return the converter.\n+\t */\n+\tDatastoreEntityConverter getDatastoreEntityConverter();\n+\n+\t/**\n+\t * Finds objects by using a Cloud Datastore query. If the query is a key-query, then keys are\n+\t * returned.\n+\t * @param query the query to execute.\n+\t * @param entityClass the type of object to retrieve.\n+\t * @param <T> the type of object to retrieve.\n+\t * @return a list of the objects found. If no keys could be found the list will be\n+\t * empty.\n+\t */\n+\t<T> DatastoreResultsIterable<?> queryKeysOrEntities(Query query, Class<T> entityClass);\n+\n+\t<A, T> DatastoreResultsIterable<T> queryIterable(Query<A> query, Function<A, T> entityFunc);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5781a25e34e4fe645fd3bc9eee75f62426222595"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI2ODI3Ng==", "bodyText": "Unintentional spacing change?", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2437#discussion_r441268276", "createdAt": "2020-06-17T04:05:42Z", "author": {"login": "meltsufin"}, "path": "spring-cloud-gcp-data-datastore/src/main/java/org/springframework/cloud/gcp/data/datastore/repository/query/AbstractDatastoreQuery.java", "diffHunk": "@@ -40,12 +40,12 @@\n \n \tfinal DatastoreQueryMethod queryMethod;\n \n-\tfinal DatastoreTemplate datastoreTemplate;\n+\tfinal DatastoreOperations datastoreTemplate;\n \n \tfinal Class<T> entityType;\n \n \tpublic AbstractDatastoreQuery(DatastoreQueryMethod queryMethod,\n-\t\t\tDatastoreTemplate datastoreTemplate,\n+\t\t\t\t\t\t\tDatastoreOperations datastoreTemplate,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5781a25e34e4fe645fd3bc9eee75f62426222595"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI2ODU1MA==", "bodyText": "Shouldn't it be getDatastoreOperations then?", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2437#discussion_r441268550", "createdAt": "2020-06-17T04:06:50Z", "author": {"login": "meltsufin"}, "path": "spring-cloud-gcp-data-datastore/src/main/java/org/springframework/cloud/gcp/data/datastore/repository/query/AbstractDatastoreQuery.java", "diffHunk": "@@ -79,7 +79,7 @@ Object processRawObjectForProjection(Object object) {\n \t\treturn this.queryMethod.getResultProcessor().processResult(object);\n \t}\n \n-\tpublic DatastoreTemplate getDatastoreTemplate() {\n+\tpublic DatastoreOperations getDatastoreTemplate() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5781a25e34e4fe645fd3bc9eee75f62426222595"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI2ODY0MA==", "bodyText": "Unintentional spacing change?", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2437#discussion_r441268640", "createdAt": "2020-06-17T04:07:15Z", "author": {"login": "meltsufin"}, "path": "spring-cloud-gcp-data-datastore/src/main/java/org/springframework/cloud/gcp/data/datastore/repository/support/DatastoreRepositoryFactory.java", "diffHunk": "@@ -66,7 +66,7 @@\n \t * repositories.\n \t */\n \tDatastoreRepositoryFactory(DatastoreMappingContext datastoreMappingContext,\n-\t\t\tDatastoreTemplate datastoreTemplate) {\n+\t\t\t\t\t\t\tDatastoreOperations datastoreTemplate) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5781a25e34e4fe645fd3bc9eee75f62426222595"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyNzg1Mjg0", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2437#pullrequestreview-432785284", "createdAt": "2020-06-17T21:20:53Z", "commit": {"oid": "5781a25e34e4fe645fd3bc9eee75f62426222595"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c905b84eb9a3c578d03f8251396f94ae2b18edd", "author": {"user": {"login": "viniciusccarvalho", "name": "Vinicius Carvalho"}}, "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/2c905b84eb9a3c578d03f8251396f94ae2b18edd", "committedDate": "2020-06-18T14:41:19Z", "message": "fixed PR comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5MTUwOTcw", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2437#pullrequestreview-439150970", "createdAt": "2020-06-29T13:37:36Z", "commit": {"oid": "2c905b84eb9a3c578d03f8251396f94ae2b18edd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 478, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}