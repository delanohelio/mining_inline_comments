{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzOTc2NzEz", "number": 3454, "title": "redirect after massimport", "bodyText": "redirects to the process page after a successfull massimport", "createdAt": "2020-04-15T20:37:09Z", "url": "https://github.com/kitodo/kitodo-production/pull/3454", "merged": true, "mergeCommit": {"oid": "e433096353f1bd97251c167c502dede55d55d1ee"}, "closed": true, "closedAt": "2020-04-17T08:47:22Z", "author": {"login": "Kathrin-Huber"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcX-OzAgH2gAyNDAzOTc2NzEzOjc0NmJjNzA4ZjhiNDM5ZjQwMjNjMGYwYjI1OTQ0ZjY3MzhlM2IxYzI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcYKYTwAH2gAyNDAzOTc2NzEzOjEyZGExOGVlNzkwNDZiMDMwNTdhNzg0NWNjZjZjMGJlMDQwMjcwMTc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "746bc708f8b439f4023c0f0b25944f6738e3b1c2", "author": {"user": {"login": "Kathrin-Huber", "name": "Kathrin Huber"}}, "url": "https://github.com/kitodo/kitodo-production/commit/746bc708f8b439f4023c0f0b25944f6738e3b1c2", "committedDate": "2020-04-15T20:36:37Z", "message": "redirect after massimport"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0MzY3MjMw", "url": "https://github.com/kitodo/kitodo-production/pull/3454#pullrequestreview-394367230", "createdAt": "2020-04-16T07:31:34Z", "commit": {"oid": "746bc708f8b439f4023c0f0b25944f6738e3b1c2"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQwNzozMTozNFrOGGYLEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQwNzozOToxMFrOGGYbxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTM0MDY4OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private final String processListPath = \"/pages/processes.jsf?faces-redirect=true\";\n          \n          \n            \n                private static final String PROCESS_LIST_PATH = \"/pages/processes.jsf?faces-redirect=true\";", "url": "https://github.com/kitodo/kitodo-production/pull/3454#discussion_r409340689", "createdAt": "2020-04-16T07:31:34Z", "author": {"login": "oliver-stoehr"}, "path": "Kitodo/src/main/java/org/kitodo/production/forms/MassImportForm.java", "diffHunk": "@@ -39,6 +40,8 @@\n     private String ppnString;\n     private MassImportService massImportService = ServiceManager.getMassImportService();\n \n+    private final String processListPath = \"/pages/processes.jsf?faces-redirect=true\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "746bc708f8b439f4023c0f0b25944f6738e3b1c2"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTM0NDczMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        String path = context.getExternalContext().getRequestContextPath() + processListPath;\n          \n          \n            \n                        String path = context.getExternalContext().getRequestContextPath() + PROCESS_LIST_PATH;", "url": "https://github.com/kitodo/kitodo-production/pull/3454#discussion_r409344732", "createdAt": "2020-04-16T07:38:48Z", "author": {"login": "oliver-stoehr"}, "path": "Kitodo/src/main/java/org/kitodo/production/forms/MassImportForm.java", "diffHunk": "@@ -54,6 +57,9 @@ public void handleFileUpload(FileUploadEvent event) {\n         UploadedFile file = event.getFile();\n         try {\n             massImportService.importFromCSV(selectedCatalog, file, projectId, templateId);\n+            FacesContext context = FacesContext.getCurrentInstance();\n+            String path = context.getExternalContext().getRequestContextPath() + processListPath;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "746bc708f8b439f4023c0f0b25944f6738e3b1c2"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTM0NDk2NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        return processListPath;\n          \n          \n            \n                        return PROCESS_LIST_PATH;", "url": "https://github.com/kitodo/kitodo-production/pull/3454#discussion_r409344965", "createdAt": "2020-04-16T07:39:10Z", "author": {"login": "oliver-stoehr"}, "path": "Kitodo/src/main/java/org/kitodo/production/forms/MassImportForm.java", "diffHunk": "@@ -64,12 +70,14 @@ public void handleFileUpload(FileUploadEvent event) {\n     /**\n      * Import processes from textField.\n      */\n-    public void importFromText() {\n+    public String importFromText() {\n         try {\n             massImportService.importFromText(selectedCatalog, ppnString, projectId, templateId);\n+            return processListPath;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "746bc708f8b439f4023c0f0b25944f6738e3b1c2"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12da18ee79046b03057a7845ccf6c0be04027017", "author": {"user": {"login": "Kathrin-Huber", "name": "Kathrin Huber"}}, "url": "https://github.com/kitodo/kitodo-production/commit/12da18ee79046b03057a7845ccf6c0be04027017", "committedDate": "2020-04-16T10:45:52Z", "message": "Apply suggestions from code review\n\nCo-Authored-By: Oliver St\u00f6hr <32509444+oliver-stoehr@users.noreply.github.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2633, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}