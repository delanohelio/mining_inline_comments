{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIxNTE5ODYy", "number": 4098, "title": "Process property search", "bodyText": "This PR restores the option to search for tasks by process property via the extended search and filters. It also restores the pulldown menu for process properties in the extended search and allows wildcard searches for process property names or values, resultung in filter strings\n\n\"property:[Property-Name]:*\" for wildcard searches of all processes with any value of process property with name Property-Name and\n\"property:*:[Property-Value]\" for wildcard searches of all processes with any properties that have the value Property-Value.", "createdAt": "2020-11-16T09:05:40Z", "url": "https://github.com/kitodo/kitodo-production/pull/4098", "merged": true, "mergeCommit": {"oid": "5028bb2741a6b418c6dbde510280267336fe03b8"}, "closed": true, "closedAt": "2020-12-21T08:50:33Z", "author": {"login": "solth"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddBBeGgH2gAyNTIxNTE5ODYyOjJmZTRjYmIyZmM2Y2QxNmY3ZTI2ZjA3OWM3YTcyZTAyYzhkMTk0YzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdnC6dsgH2gAyNTIxNTE5ODYyOjcyYjY0ZWNlOWU1YzA4MTQwZTZmN2ViYjg3MDEwY2QyMGI5MzBlNmE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2fe4cbb2fc6cd16f7e26f079c7a72e02c8d194c3", "author": {"user": {"login": "solth", "name": "Arved Solth"}}, "url": "https://github.com/kitodo/kitodo-production/commit/2fe4cbb2fc6cd16f7e26f079c7a72e02c8d194c3", "committedDate": "2020-11-16T08:52:33Z", "message": "Render pulldown menu for process properties in extended search"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83e1a91257ef663500479f32f92b0596c1d9b816", "author": {"user": {"login": "solth", "name": "Arved Solth"}}, "url": "https://github.com/kitodo/kitodo-production/commit/83e1a91257ef663500479f32f92b0596c1d9b816", "committedDate": "2020-11-16T08:52:45Z", "message": "Add wildcard search for process property titles and values"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee6c48b2befc3a56791c35467908a6b2d975244e", "author": {"user": {"login": "solth", "name": "Arved Solth"}}, "url": "https://github.com/kitodo/kitodo-production/commit/ee6c48b2befc3a56791c35467908a6b2d975244e", "committedDate": "2020-11-16T09:15:05Z", "message": "Resolce Codacy issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e88a65e798a9d80de6c120f1fcdda88e9f9f6dc3", "author": {"user": {"login": "solth", "name": "Arved Solth"}}, "url": "https://github.com/kitodo/kitodo-production/commit/e88a65e798a9d80de6c120f1fcdda88e9f9f6dc3", "committedDate": "2020-11-17T10:25:11Z", "message": "Restore filtering task list by process property"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5cb503db6b94ac114605009624b3ae8f9a70ebb5", "author": {"user": {"login": "solth", "name": "Arved Solth"}}, "url": "https://github.com/kitodo/kitodo-production/commit/5cb503db6b94ac114605009624b3ae8f9a70ebb5", "committedDate": "2020-11-23T12:45:18Z", "message": "Fix SQL statement"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc7c07605d9f53ea5e1568305c4e2519825f4068", "author": {"user": {"login": "solth", "name": "Arved Solth"}}, "url": "https://github.com/kitodo/kitodo-production/commit/dc7c07605d9f53ea5e1568305c4e2519825f4068", "committedDate": "2020-12-04T13:42:20Z", "message": "Fix German process property FilterString"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzNTQ4OTg4", "url": "https://github.com/kitodo/kitodo-production/pull/4098#pullrequestreview-553548988", "createdAt": "2020-12-16T10:27:18Z", "commit": {"oid": "dc7c07605d9f53ea5e1568305c4e2519825f4068"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxMDoyNzoxOFrOIG-VJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxMDoyNzoxOFrOIG-VJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDE4MzU5MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    List<Property> byQuery = getByQuery(\"SELECT DISTINCT property FROM Property AS property GROUP BY property.id\");\n          \n          \n            \n                    List<Property> byQuery = getByQuery(\"SELECT DISTINCT property FROM Property AS property GROUP BY property.title\");\n          \n      \n    \n    \n  \n\nshould be a better choice", "url": "https://github.com/kitodo/kitodo-production/pull/4098#discussion_r544183590", "createdAt": "2020-12-16T10:27:18Z", "author": {"login": "Kathrin-Huber"}, "path": "Kitodo/src/main/java/org/kitodo/production/services/data/PropertyService.java", "diffHunk": "@@ -97,12 +99,12 @@ public Long countResults(Map filters) throws DAOException {\n     }\n \n     private List<String> findDistinctTitles(String type) {\n-        List<Property> byQuery = getByQuery(\"SELECT DISTINCT property.title from Property as property\");\n-        List<String> titles = new ArrayList<>();\n+        List<Property> byQuery = getByQuery(\"SELECT DISTINCT property FROM Property AS property GROUP BY property.id\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc7c07605d9f53ea5e1568305c4e2519825f4068"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzNTQ5MjMy", "url": "https://github.com/kitodo/kitodo-production/pull/4098#pullrequestreview-553549232", "createdAt": "2020-12-16T10:27:36Z", "commit": {"oid": "dc7c07605d9f53ea5e1568305c4e2519825f4068"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxMDoyNzozNlrOIG-WBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxMDoyNzozNlrOIG-WBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDE4MzgxMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                        <p:outputLabel for=\"processproperty\" value=\"#{msgs.processProperties}\"/>\n          \n          \n            \n                                        <p:outputLabel for=\"processProperty\" value=\"#{msgs.processProperties}\"/>", "url": "https://github.com/kitodo/kitodo-production/pull/4098#discussion_r544183813", "createdAt": "2020-12-16T10:27:36Z", "author": {"login": "Kathrin-Huber"}, "path": "Kitodo/src/main/webapp/pages/extendedSearch.xhtml", "diffHunk": "@@ -76,14 +76,24 @@\n                     <!--properties -->\n                     <p:row>\n                         <p:column>\n-                            <p:outputLabel for=\"propertyTitle\" value=\"#{msgs.properties}\"/>\n+                            <p:outputLabel for=\"processproperty\" value=\"#{msgs.processProperties}\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc7c07605d9f53ea5e1568305c4e2519825f4068"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzNTQ5NDEy", "url": "https://github.com/kitodo/kitodo-production/pull/4098#pullrequestreview-553549412", "createdAt": "2020-12-16T10:27:48Z", "commit": {"oid": "dc7c07605d9f53ea5e1568305c4e2519825f4068"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxMDoyNzo0OFrOIG-Wdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxMDoyNzo0OFrOIG-Wdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDE4MzkyNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                        <p:inputText id=\"processproperty\"\n          \n          \n            \n                                        <p:inputText id=\"processProperty\"", "url": "https://github.com/kitodo/kitodo-production/pull/4098#discussion_r544183926", "createdAt": "2020-12-16T10:27:48Z", "author": {"login": "Kathrin-Huber"}, "path": "Kitodo/src/main/webapp/pages/extendedSearch.xhtml", "diffHunk": "@@ -76,14 +76,24 @@\n                     <!--properties -->\n                     <p:row>\n                         <p:column>\n-                            <p:outputLabel for=\"propertyTitle\" value=\"#{msgs.properties}\"/>\n+                            <p:outputLabel for=\"processproperty\" value=\"#{msgs.processProperties}\"/>\n                         </p:column>\n                         <p:column>\n-                            <p:inputText id=\"propertyTitle\" placeholder=\"#{msgs.title}\" value=\"#{SearchForm.processPropertyTitle}\"\n-                                         styleClass=\"extended-search-input-field\"/>\n+                            <p:selectOneMenu value=\"#{SearchForm.processPropertyOperand}\">\n+                                <f:selectItems value=\"#{SearchForm.operands}\"/>\n+                            </p:selectOneMenu>\n+                        </p:column>\n+                        <p:column>\n+                            <p:selectOneMenu value=\"#{SearchForm.processPropertyTitle}\">\n+                                <f:selectItem itemValue=\"#{null}\" itemLabel=\"#{msgs.notSelected}\" noSelectionOption=\"true\"/>\n+                                <f:selectItems value=\"#{SearchForm.processPropertyTitles}\"\n+                                               var=\"proc\" itemLabel=\"#{proc}\"\n+                                               itemValue=\"#{proc}\"/>\n+                            </p:selectOneMenu>\n                         </p:column>\n                         <p:column>\n-                            <p:inputText id=\"propertyValue\" placeholder=\"#{msgs.value}\" value=\"#{SearchForm.processPropertyValue}\"\n+                            <p:inputText id=\"processproperty\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc7c07605d9f53ea5e1568305c4e2519825f4068"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e70348d9a384fb526dd2f63a4f9aa77b87f38475", "author": {"user": {"login": "solth", "name": "Arved Solth"}}, "url": "https://github.com/kitodo/kitodo-production/commit/e70348d9a384fb526dd2f63a4f9aa77b87f38475", "committedDate": "2020-12-16T12:03:21Z", "message": "Apply suggestions from code review\n\nCo-authored-by: Kathrin Huber <kathrin.huber@slub-dresden.de>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a808bb214cbaf09018f8fc52fb8f60096b9011f", "author": {"user": {"login": "solth", "name": "Arved Solth"}}, "url": "https://github.com/kitodo/kitodo-production/commit/7a808bb214cbaf09018f8fc52fb8f60096b9011f", "committedDate": "2020-12-16T12:05:13Z", "message": "Cleanup PropertyService"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72b64ece9e5c08140e6f7ebb87010cd20b930e6a", "author": {"user": {"login": "solth", "name": "Arved Solth"}}, "url": "https://github.com/kitodo/kitodo-production/commit/72b64ece9e5c08140e6f7ebb87010cd20b930e6a", "committedDate": "2020-12-17T12:43:57Z", "message": "Fix SQL query to retrieve distinct property titles"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2791, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}