{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4MTU3MTE1", "number": 3109, "title": "fix search result page", "bodyText": "", "createdAt": "2020-01-28T18:14:10Z", "url": "https://github.com/kitodo/kitodo-production/pull/3109", "merged": true, "mergeCommit": {"oid": "aff5990b4e0cf8d21bca1aabe58510ebdcbd7326"}, "closed": true, "closedAt": "2020-01-30T08:07:05Z", "author": {"login": "Kathrin-Huber"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-1sKDAFqTM0OTYwMzQzMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb_L9SDgBqjI5OTA5NzI1MDQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NjAzNDMy", "url": "https://github.com/kitodo/kitodo-production/pull/3109#pullrequestreview-349603432", "createdAt": "2020-01-28T18:28:45Z", "commit": {"oid": "044c4a494f535a213e80d657e156e72da5df567f"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxODoyODo0NlrOFiv01A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxODozMDo1N1rOFiv5EQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk3OTQ3Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    <p:commandLink id=\"deleteProcess\" action=\"#{SearchResultForm.deleteProcess(process)}\" title=\"#{msgs.delete}\"\n          \n          \n            \n                                    <p:commandLink id=\"deleteProcess\"\n          \n          \n            \n                                                   action=\"#{SearchResultForm.deleteProcess(process)}\"\n          \n          \n            \n                                                   title=\"#{msgs.delete}\"", "url": "https://github.com/kitodo/kitodo-production/pull/3109#discussion_r371979476", "createdAt": "2020-01-28T18:28:46Z", "author": {"login": "oliver-stoehr"}, "path": "Kitodo/src/main/webapp/pages/searchResult.xhtml", "diffHunk": "@@ -111,14 +111,21 @@\n                             <h:outputText><i class=\"fa fa-list-alt\"/></h:outputText>\n                         </h:link>\n \n-                        <p:commandLink id=\"download\" action=\"#{ProcessForm.downloadToHome}\" title=\"#{msgs.linkHomeDirectory}\"\n+                        <p:commandLink id=\"download\"\n+                                       action=\"#{SearchResultForm.downloadToHome(process.id)}\"\n+                                       title=\"#{msgs.linkHomeDirectory}\"\n                                        rendered=\"#{SecurityAccessController.hasAuthorityToEditProcessImages()}\">\n                             <h:outputText><i class=\"fa fa-download\"/></h:outputText>\n-                            <f:setPropertyActionListener value=\"#{process.id}\" target=\"#{ProcessForm.processByID}\"/>\n                             <!-- TODO: add separate message in case it already exists and alert -->\n                         </p:commandLink>\n \n-                        <p:commandLink id=\"deleteProcess\" action=\"#{SearchResultForm.delete(process)}\" title=\"#{msgs.delete}\"\n+                        <h:commandLink action=\"#{SearchResultForm.exportMets(process.id)}\"\n+                                       id=\"exportMets\"\n+                                       title=\"#{msgs.exportMets}\"\n+                                       rendered=\"#{SecurityAccessController.hasAuthorityToExportProcess()}\">\n+                            <h:outputText><i class=\"fa fa-file-code-o\"/></h:outputText>\n+                        </h:commandLink>\n+                        <p:commandLink id=\"deleteProcess\" action=\"#{SearchResultForm.deleteProcess(process)}\" title=\"#{msgs.delete}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "044c4a494f535a213e80d657e156e72da5df567f"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk4MDU2MQ==", "bodyText": "Suggested change", "url": "https://github.com/kitodo/kitodo-production/pull/3109#discussion_r371980561", "createdAt": "2020-01-28T18:30:57Z", "author": {"login": "oliver-stoehr"}, "path": "Kitodo/src/main/java/org/kitodo/production/forms/SearchResultForm.java", "diffHunk": "@@ -158,19 +164,44 @@ private void refreshFilteredList() {\n     }\n \n     /**\n-     * delete process.\n-     * \n-     * @param processDTO\n-     *            to delete\n+     * Delete given Process 'process'.\n+     *\n+     * @param processDTO Process to delete\n      */\n-    public void delete(ProcessDTO processDTO) {\n+    public void deleteProcess(ProcessDTO processDTO) {\n         try {\n-            ProcessForm processForm = new ProcessForm();\n-            processForm.setProcess(ServiceManager.getProcessService().getById(processDTO.getId()));\n-            processForm.delete();\n+            ProcessService.deleteProcess(processDTO.getId());\n             filteredList.remove(processDTO);\n+        } catch (DataException | DAOException e) {\n+            Helper.setErrorMessage(ERROR_DELETING, new Object[] {ObjectType.PROCESS.getTranslationSingular() },\n+                    logger, e);\n+        }\n+    }\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "044c4a494f535a213e80d657e156e72da5df567f"}, "originalPosition": 59}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa433a78949495eb8c834407b9607ae52e7be8f0", "author": {"user": {"login": "Kathrin-Huber", "name": "Kathrin Huber"}}, "url": "https://github.com/kitodo/kitodo-production/commit/fa433a78949495eb8c834407b9607ae52e7be8f0", "committedDate": "2020-01-29T20:27:51Z", "message": "fix search result page"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "173987112ea7048171360b8285cd9dc90cd53941", "author": {"user": {"login": "Kathrin-Huber", "name": "Kathrin Huber"}}, "url": "https://github.com/kitodo/kitodo-production/commit/173987112ea7048171360b8285cd9dc90cd53941", "committedDate": "2020-01-28T18:33:28Z", "message": "Update Kitodo/src/main/java/org/kitodo/production/forms/SearchResultForm.java\n\nCo-Authored-By: Oliver St\u00f6hr <32509444+oliver-stoehr@users.noreply.github.com>"}, "afterCommit": {"oid": "fa433a78949495eb8c834407b9607ae52e7be8f0", "author": {"user": {"login": "Kathrin-Huber", "name": "Kathrin Huber"}}, "url": "https://github.com/kitodo/kitodo-production/commit/fa433a78949495eb8c834407b9607ae52e7be8f0", "committedDate": "2020-01-29T20:27:51Z", "message": "fix search result page"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2734, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}