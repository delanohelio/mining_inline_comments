{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0NzE3NjE4", "number": 3596, "title": "Fix a possible NPE", "bodyText": "Presumably fixes #3595", "createdAt": "2020-05-07T14:19:15Z", "url": "https://github.com/kitodo/kitodo-production/pull/3596", "merged": true, "mergeCommit": {"oid": "d693d9bf6145b9919ab69bf6498811d5e69fc79c"}, "closed": true, "closedAt": "2020-05-08T08:29:41Z", "author": {"login": "matthias-ronge"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABce-A1RAH2gAyNDE0NzE3NjE4OjhhNTM3MzlkNDBiYWNlNTdhZDM0NmVmMDE4N2NiZWI0NjQ2MjdkY2I=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcfNnmKgFqTQwODA4NjIyNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8a53739d40bace57ad346ef0187cbeb464627dcb", "author": {"user": null}, "url": "https://github.com/kitodo/kitodo-production/commit/8a53739d40bace57ad346ef0187cbeb464627dcb", "committedDate": "2020-05-07T14:18:50Z", "message": "Fix a possible NPE"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3NjQzMzI0", "url": "https://github.com/kitodo/kitodo-production/pull/3596#pullrequestreview-407643324", "createdAt": "2020-05-07T16:33:06Z", "commit": {"oid": "8a53739d40bace57ad346ef0187cbeb464627dcb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNjozMzowNlrOGSGxgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxNjozMzowNlrOGSGxgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYzODUzMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            .parse(Objects.nonNull(metadataLanguage) && !metadataLanguage.isEmpty() ? metadataLanguage : \"en\");\n          \n          \n            \n                            .parse(StringUtils.isBlank(metadataLanguage) ? metadataLanguage : \"en\");", "url": "https://github.com/kitodo/kitodo-production/pull/3596#discussion_r421638530", "createdAt": "2020-05-07T16:33:06Z", "author": {"login": "Kathrin-Huber"}, "path": "Kitodo/src/main/java/org/kitodo/production/services/validation/MetadataValidationService.java", "diffHunk": "@@ -227,7 +227,8 @@ private ValidationResult checkTheIdentifier(Workpiece workpiece) throws DAOExcep\n         User user = ServiceManager.getUserService().getAuthenticatedUser();\n         String metadataLanguage = user != null ? user.getMetadataLanguage()\n                 : Helper.getRequestParameter(\"Accept-Language\");\n-        return LanguageRange.parse(! metadataLanguage.isEmpty() ? metadataLanguage : \"en\");\n+        return LanguageRange\n+                .parse(Objects.nonNull(metadataLanguage) && !metadataLanguage.isEmpty() ? metadataLanguage : \"en\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a53739d40bace57ad346ef0187cbeb464627dcb"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8e2c16e558f84757b5e6df95c042ef6238c16b7", "author": {"user": null}, "url": "https://github.com/kitodo/kitodo-production/commit/c8e2c16e558f84757b5e6df95c042ef6238c16b7", "committedDate": "2020-05-08T08:25:45Z", "message": "Update Kitodo/src/main/java/org/kitodo/production/services/validation/MetadataValidationService.java\n\nCo-authored-by: Kathrin Huber <kathrin.huber@slub-dresden.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4MDg2MjI3", "url": "https://github.com/kitodo/kitodo-production/pull/3596#pullrequestreview-408086227", "createdAt": "2020-05-08T08:29:45Z", "commit": {"oid": "c8e2c16e558f84757b5e6df95c042ef6238c16b7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQwODoyOTo0NVrOGSd4RA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQwODoyOTo0NVrOGSd4RA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjAxNzA5Mg==", "bodyText": "Should `StringUtils.isBlank\" call not inverted or the values switched?", "url": "https://github.com/kitodo/kitodo-production/pull/3596#discussion_r422017092", "createdAt": "2020-05-08T08:29:45Z", "author": {"login": "henning-gerhardt"}, "path": "Kitodo/src/main/java/org/kitodo/production/services/validation/MetadataValidationService.java", "diffHunk": "@@ -228,7 +228,7 @@ private ValidationResult checkTheIdentifier(Workpiece workpiece) throws DAOExcep\n         String metadataLanguage = user != null ? user.getMetadataLanguage()\n                 : Helper.getRequestParameter(\"Accept-Language\");\n         return LanguageRange\n-                .parse(Objects.nonNull(metadataLanguage) && !metadataLanguage.isEmpty() ? metadataLanguage : \"en\");\n+                .parse(StringUtils.isBlank(metadataLanguage) ? metadataLanguage : \"en\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8e2c16e558f84757b5e6df95c042ef6238c16b7"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2657, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}