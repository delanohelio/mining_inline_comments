{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYzOTcxMjk3", "number": 3907, "title": "change comparators", "bodyText": "fixes #3825", "createdAt": "2020-08-06T11:38:34Z", "url": "https://github.com/kitodo/kitodo-production/pull/3907", "merged": true, "mergeCommit": {"oid": "5e407487f785c8cffe237b51c7fec3b605706bf1"}, "closed": true, "closedAt": "2020-08-17T07:34:50Z", "author": {"login": "Kathrin-Huber"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8OMjLgH2gAyNDYzOTcxMjk3OjdhMDY0ODkzM2E0Y2NmZjExNTI2YThlODFjMzgwNDc4ZjI1M2FjOTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc_tXZuABqjM2NjA1NzQwODk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7a0648933a4ccff11526a8e81c380478f253ac99", "author": {"user": {"login": "Kathrin-Huber", "name": "Kathrin Huber"}}, "url": "https://github.com/kitodo/kitodo-production/commit/7a0648933a4ccff11526a8e81c380478f253ac99", "committedDate": "2020-08-06T11:33:55Z", "message": "change comparators"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "70b63bfe16e47a6197e6023f2ef99513c42a51c6", "author": {"user": {"login": "Kathrin-Huber", "name": "Kathrin Huber"}}, "url": "https://github.com/kitodo/kitodo-production/commit/70b63bfe16e47a6197e6023f2ef99513c42a51c6", "committedDate": "2020-08-06T11:53:25Z", "message": "add javadoc"}, "afterCommit": {"oid": "b981c9e3b63a5ed7aba1050fe4bd41c38ccc1b1a", "author": {"user": {"login": "Kathrin-Huber", "name": "Kathrin Huber"}}, "url": "https://github.com/kitodo/kitodo-production/commit/b981c9e3b63a5ed7aba1050fe4bd41c38ccc1b1a", "committedDate": "2020-08-06T13:17:08Z", "message": "add javadoc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3NDg1Mzk3", "url": "https://github.com/kitodo/kitodo-production/pull/3907#pullrequestreview-467485397", "createdAt": "2020-08-14T10:52:23Z", "commit": {"oid": "b981c9e3b63a5ed7aba1050fe4bd41c38ccc1b1a"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQxMDo1NDoyOVrOHAwZ6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQxMDo1NDoyOVrOHAwZ6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDU1NTExMw==", "bodyText": "The last if condition and the return true; at the end can be simplified to\nreturn firstTask.isBatchStep() == secondTask.isBatchStep();", "url": "https://github.com/kitodo/kitodo-production/pull/3907#discussion_r470555113", "createdAt": "2020-08-14T10:54:29Z", "author": {"login": "solth"}, "path": "Kitodo/src/main/java/org/kitodo/production/migration/TaskComparer.java", "diffHunk": "@@ -11,55 +11,57 @@\n \n package org.kitodo.production.migration;\n \n-import java.util.Comparator;\n import java.util.Objects;\n \n import org.kitodo.data.database.beans.Task;\n \n-public class TaskComparator implements Comparator<Task> {\n+public class TaskComparer {\n \n-    @Override\n-    public int compare(Task firstTask, Task secondTask) {\n+    /**\n+     * Compares two tasks, if they are equal for migration purposes.\n+     * @return true, if they are equal, false if not\n+     */\n+    public boolean isEqual(Task firstTask, Task secondTask) {\n         if (Objects.isNull(firstTask) || Objects.isNull(secondTask)) {\n-            return 1;\n+            return false;\n         }\n         if (Objects.isNull(firstTask.getTitle()) ? Objects.nonNull(secondTask.getTitle())\n                 : !firstTask.getTitle().equals(secondTask.getTitle())) {\n-            return 1;\n+            return false;\n         }\n         if (Objects.isNull(firstTask.getOrdering()) ? Objects.nonNull(secondTask.getOrdering())\n                 : !firstTask.getOrdering().equals(secondTask.getOrdering())) {\n-            return 1;\n+            return false;\n         }\n         if (firstTask.isTypeAutomatic() != secondTask.isTypeAutomatic()) {\n-            return 1;\n+            return false;\n         }\n         if (firstTask.isTypeMetadata() != secondTask.isTypeMetadata()) {\n-            return 1;\n+            return false;\n         }\n         if (firstTask.isTypeImagesRead() != secondTask.isTypeImagesRead()) {\n-            return 1;\n+            return false;\n         }\n         if (firstTask.isTypeImagesWrite() != secondTask.isTypeImagesWrite()) {\n-            return 1;\n+            return false;\n         }\n         if (firstTask.isTypeExportDMS() != secondTask.isTypeExportDMS()) {\n-            return 1;\n+            return false;\n         }\n         if (firstTask.isTypeAcceptClose() != secondTask.isTypeAcceptClose()) {\n-            return 1;\n+            return false;\n         }\n         if (firstTask.isTypeCloseVerify() != secondTask.isTypeCloseVerify()) {\n-            return 1;\n+            return false;\n         }\n         if (Objects.isNull(firstTask.getScriptPath()) ? Objects.nonNull(secondTask.getScriptPath())\n                 : !firstTask.getScriptPath().equals(secondTask.getScriptPath())) {\n-            return 1;\n+            return false;\n         }\n         if (firstTask.isBatchStep() != secondTask.isBatchStep()) {\n-            return 1;\n+            return false;\n         }\n-        return 0;\n+        return true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b981c9e3b63a5ed7aba1050fe4bd41c38ccc1b1a"}, "originalPosition": 71}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f7563279802e50e94dcd67e51bd1dcb9bf1a28d", "author": {"user": {"login": "Kathrin-Huber", "name": "Kathrin Huber"}}, "url": "https://github.com/kitodo/kitodo-production/commit/4f7563279802e50e94dcd67e51bd1dcb9bf1a28d", "committedDate": "2020-08-17T07:34:15Z", "message": "add javadoc"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b981c9e3b63a5ed7aba1050fe4bd41c38ccc1b1a", "author": {"user": {"login": "Kathrin-Huber", "name": "Kathrin Huber"}}, "url": "https://github.com/kitodo/kitodo-production/commit/b981c9e3b63a5ed7aba1050fe4bd41c38ccc1b1a", "committedDate": "2020-08-06T13:17:08Z", "message": "add javadoc"}, "afterCommit": {"oid": "4f7563279802e50e94dcd67e51bd1dcb9bf1a28d", "author": {"user": {"login": "Kathrin-Huber", "name": "Kathrin Huber"}}, "url": "https://github.com/kitodo/kitodo-production/commit/4f7563279802e50e94dcd67e51bd1dcb9bf1a28d", "committedDate": "2020-08-17T07:34:15Z", "message": "add javadoc"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2820, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}