{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2NjE3ODU5", "number": 1612, "title": "implemented hashcode, equals, toString methods for TypeToken in decoders", "bodyText": "", "createdAt": "2020-06-02T14:19:48Z", "url": "https://github.com/firebase/firebase-android-sdk/pull/1612", "merged": true, "mergeCommit": {"oid": "64c90da668fafec2f317d94f43515373cddbadc3"}, "closed": true, "closedAt": "2020-06-02T21:01:27Z", "author": {"login": "James201311"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnVk4QgH2gAyNDI2NjE3ODU5OjA2YTRkNDBiOTQ5NGMzMGViNzZkYTdmODQwODMwNTkyOGViOGYyZGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcna2EVgFqTQyMzAzMTIwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "06a4d40b9494c30eb76da7f8408305928eb8f2de", "author": {"user": null}, "url": "https://github.com/firebase/firebase-android-sdk/commit/06a4d40b9494c30eb76da7f8408305928eb8f2de", "committedDate": "2020-06-02T14:17:25Z", "message": "implemented hashcode equals toString for typeToken in decoders"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyODg1MDMw", "url": "https://github.com/firebase/firebase-android-sdk/pull/1612#pullrequestreview-422885030", "createdAt": "2020-06-02T17:07:40Z", "commit": {"oid": "06a4d40b9494c30eb76da7f8408305928eb8f2de"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxNzowODozN1rOGd7isQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxNzoxMzo1OFrOGd7uSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDAzNzQyNQ==", "bodyText": "I think this whole method could be just one line:\nreturn Arrays.hashCode(typeTokens);\nwdyt?", "url": "https://github.com/firebase/firebase-android-sdk/pull/1612#discussion_r434037425", "createdAt": "2020-06-02T17:08:37Z", "author": {"login": "vkryachko"}, "path": "encoders/firebase-decoders-json/src/main/java/com/google/firebase/decoders/TypeTokenContainer.java", "diffHunk": "@@ -41,4 +42,48 @@ public TypeTokenContainer(@NonNull TypeToken[] typeTokens) {\n     TypeToken<T> typeToken = (TypeToken<T>) typeTokens[index];\n     return typeToken;\n   }\n+\n+  @Override\n+  public int hashCode() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06a4d40b9494c30eb76da7f8408305928eb8f2de"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDAzODAzNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                TypeTokenContainer that = (TypeTokenContainer) o;\n          \n          \n            \n                if (this.typeTokens.length != that.typeTokens.length) {\n          \n          \n            \n                  return false;\n          \n          \n            \n                } else {\n          \n          \n            \n                  for (int i = 0; i < typeTokens.length; i++) {\n          \n          \n            \n                    if (!this.typeTokens[i].equals(that.typeTokens[i])) return false;\n          \n          \n            \n                  }\n          \n          \n            \n                  return true;\n          \n          \n            \n                return Arrays.equals(typeTokens, that.typeTokens);", "url": "https://github.com/firebase/firebase-android-sdk/pull/1612#discussion_r434038034", "createdAt": "2020-06-02T17:09:41Z", "author": {"login": "vkryachko"}, "path": "encoders/firebase-decoders-json/src/main/java/com/google/firebase/decoders/TypeTokenContainer.java", "diffHunk": "@@ -41,4 +42,48 @@ public TypeTokenContainer(@NonNull TypeToken[] typeTokens) {\n     TypeToken<T> typeToken = (TypeToken<T>) typeTokens[index];\n     return typeToken;\n   }\n+\n+  @Override\n+  public int hashCode() {\n+    int result = 11;\n+    for (int i = 0; i < typeTokens.length; i++) {\n+      result += (i * i + i + 41) * typeTokens[i].hashCode();\n+    }\n+    return result;\n+  }\n+\n+  @Override\n+  public boolean equals(@Nullable Object o) {\n+    if (this == o) {\n+      return true;\n+    }\n+    if (!(o instanceof TypeTokenContainer)) {\n+      return false;\n+    }\n+    TypeTokenContainer that = (TypeTokenContainer) o;\n+    if (this.typeTokens.length != that.typeTokens.length) {\n+      return false;\n+    } else {\n+      for (int i = 0; i < typeTokens.length; i++) {\n+        if (!this.typeTokens[i].equals(that.typeTokens[i])) return false;\n+      }\n+      return true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06a4d40b9494c30eb76da7f8408305928eb8f2de"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDAzODczNw==", "bodyText": "I don't think this one needs a toString()", "url": "https://github.com/firebase/firebase-android-sdk/pull/1612#discussion_r434038737", "createdAt": "2020-06-02T17:10:56Z", "author": {"login": "vkryachko"}, "path": "encoders/firebase-decoders-json/src/main/java/com/google/firebase/decoders/TypeTokenContainer.java", "diffHunk": "@@ -41,4 +42,48 @@ public TypeTokenContainer(@NonNull TypeToken[] typeTokens) {\n     TypeToken<T> typeToken = (TypeToken<T>) typeTokens[index];\n     return typeToken;\n   }\n+\n+  @Override\n+  public int hashCode() {\n+    int result = 11;\n+    for (int i = 0; i < typeTokens.length; i++) {\n+      result += (i * i + i + 41) * typeTokens[i].hashCode();\n+    }\n+    return result;\n+  }\n+\n+  @Override\n+  public boolean equals(@Nullable Object o) {\n+    if (this == o) {\n+      return true;\n+    }\n+    if (!(o instanceof TypeTokenContainer)) {\n+      return false;\n+    }\n+    TypeTokenContainer that = (TypeTokenContainer) o;\n+    if (this.typeTokens.length != that.typeTokens.length) {\n+      return false;\n+    } else {\n+      for (int i = 0; i < typeTokens.length; i++) {\n+        if (!this.typeTokens[i].equals(that.typeTokens[i])) return false;\n+      }\n+      return true;\n+    }\n+  }\n+\n+  @NonNull\n+  @Override\n+  public String toString() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06a4d40b9494c30eb76da7f8408305928eb8f2de"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDAzOTkwMQ==", "bodyText": "I wonder if we could just have a toString() that outputs something like ${rawType}<$typeArgs> e.g. Map<String, Foo>?\nthat way it would be consistent with Class and easy on the eye.", "url": "https://github.com/firebase/firebase-android-sdk/pull/1612#discussion_r434039901", "createdAt": "2020-06-02T17:13:02Z", "author": {"login": "vkryachko"}, "path": "encoders/firebase-decoders-json/src/main/java/com/google/firebase/decoders/TypeToken.java", "diffHunk": "@@ -140,6 +141,34 @@ private ClassToken(Class<T> rawType, TypeTokenContainer typeArguments) {\n     public TypeTokenContainer getTypeArguments() {\n       return typeArguments;\n     }\n+\n+    @Override\n+    public int hashCode() {\n+      return 11 * rawType.hashCode() + typeArguments.hashCode();\n+    }\n+\n+    @Override\n+    public boolean equals(@Nullable Object o) {\n+      if (this == o) {\n+        return true;\n+      }\n+      if (!(o instanceof ClassToken)) {\n+        return false;\n+      }\n+      ClassToken<?> that = (ClassToken<?>) o;\n+      return this.rawType.equals(that.rawType) && this.typeArguments.equals(that.typeArguments);\n+    }\n+\n+    @NonNull\n+    @Override\n+    public String toString() {\n+      StringBuilder sb = new StringBuilder();\n+      sb.append(\"ClassToken{ \");\n+      sb.append(\"RawType: \").append(rawType).append(\", \");\n+      sb.append(\"TypeArguments: \").append(typeArguments).append(\"\");\n+      sb.append(\" }\");\n+      return sb.toString();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06a4d40b9494c30eb76da7f8408305928eb8f2de"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDA0MDM5NQ==", "bodyText": "Then this one could be ${componentType}[], wdyt?", "url": "https://github.com/firebase/firebase-android-sdk/pull/1612#discussion_r434040395", "createdAt": "2020-06-02T17:13:58Z", "author": {"login": "vkryachko"}, "path": "encoders/firebase-decoders-json/src/main/java/com/google/firebase/decoders/TypeToken.java", "diffHunk": "@@ -157,5 +186,34 @@ private ArrayToken(TypeToken<?> componentType) {\n     public TypeToken<?> getComponentType() {\n       return componentType;\n     }\n+\n+    @Override\n+    public int hashCode() {\n+      int result = 41;\n+      result += componentType.hashCode();\n+      return result;\n+    }\n+\n+    @Override\n+    public boolean equals(@Nullable Object o) {\n+      if (this == o) {\n+        return true;\n+      }\n+      if (!(o instanceof ArrayToken)) {\n+        return false;\n+      }\n+      ArrayToken<?> that = (ArrayToken<?>) o;\n+      return this.componentType.equals(that.componentType);\n+    }\n+\n+    @NonNull\n+    @Override\n+    public String toString() {\n+      StringBuilder sb = new StringBuilder();\n+      sb.append(\"ArrayToken{ \");\n+      sb.append(\"ComponentType: \").append(componentType);\n+      sb.append(\" }\");\n+      return sb.toString();\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06a4d40b9494c30eb76da7f8408305928eb8f2de"}, "originalPosition": 75}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "20c0e9ff18bc23905181992d02e4fea024b115cf", "author": {"user": null}, "url": "https://github.com/firebase/firebase-android-sdk/commit/20c0e9ff18bc23905181992d02e4fea024b115cf", "committedDate": "2020-06-02T18:36:05Z", "message": "addressed comments"}, "afterCommit": {"oid": "9d3f053c7431c897433617b3c3d0773b5df82917", "author": {"user": null}, "url": "https://github.com/firebase/firebase-android-sdk/commit/9d3f053c7431c897433617b3c3d0773b5df82917", "committedDate": "2020-06-02T18:40:46Z", "message": "addressed comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMDIwNDQ3", "url": "https://github.com/firebase/firebase-android-sdk/pull/1612#pullrequestreview-423020447", "createdAt": "2020-06-02T20:09:20Z", "commit": {"oid": "9d3f053c7431c897433617b3c3d0773b5df82917"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMDowOToyMFrOGeCOJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMDowOTo1NlrOGeCPjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE0Njg1Mg==", "bodyText": "nit\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                return \"TypeToken:{\" + getTypeTokenLiteral() + \"}\";\n          \n          \n            \n                return \"TypeToken{\" + getTypeTokenLiteral() + \"}\";", "url": "https://github.com/firebase/firebase-android-sdk/pull/1612#discussion_r434146852", "createdAt": "2020-06-02T20:09:20Z", "author": {"login": "vkryachko"}, "path": "encoders/firebase-decoders-json/src/main/java/com/google/firebase/decoders/TypeToken.java", "diffHunk": "@@ -113,6 +112,15 @@\n \n   private TypeToken() {}\n \n+  @NonNull\n+  abstract String getTypeTokenLiteral();\n+\n+  @NonNull\n+  @Override\n+  public String toString() {\n+    return \"TypeToken:{\" + getTypeTokenLiteral() + \"}\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d3f053c7431c897433617b3c3d0773b5df82917"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE0NzIxMw==", "bodyText": "I think this one still applies", "url": "https://github.com/firebase/firebase-android-sdk/pull/1612#discussion_r434147213", "createdAt": "2020-06-02T20:09:56Z", "author": {"login": "vkryachko"}, "path": "encoders/firebase-decoders-json/src/main/java/com/google/firebase/decoders/TypeTokenContainer.java", "diffHunk": "@@ -41,4 +42,48 @@ public TypeTokenContainer(@NonNull TypeToken[] typeTokens) {\n     TypeToken<T> typeToken = (TypeToken<T>) typeTokens[index];\n     return typeToken;\n   }\n+\n+  @Override\n+  public int hashCode() {\n+    int result = 11;\n+    for (int i = 0; i < typeTokens.length; i++) {\n+      result += (i * i + i + 41) * typeTokens[i].hashCode();\n+    }\n+    return result;\n+  }\n+\n+  @Override\n+  public boolean equals(@Nullable Object o) {\n+    if (this == o) {\n+      return true;\n+    }\n+    if (!(o instanceof TypeTokenContainer)) {\n+      return false;\n+    }\n+    TypeTokenContainer that = (TypeTokenContainer) o;\n+    if (this.typeTokens.length != that.typeTokens.length) {\n+      return false;\n+    } else {\n+      for (int i = 0; i < typeTokens.length; i++) {\n+        if (!this.typeTokens[i].equals(that.typeTokens[i])) return false;\n+      }\n+      return true;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDAzODAzNA=="}, "originalCommit": {"oid": "06a4d40b9494c30eb76da7f8408305928eb8f2de"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b31c9617df485067263ae92a89f006dfbdc1f17f", "author": {"user": null}, "url": "https://github.com/firebase/firebase-android-sdk/commit/b31c9617df485067263ae92a89f006dfbdc1f17f", "committedDate": "2020-06-02T20:17:30Z", "message": "addressed comments"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9d3f053c7431c897433617b3c3d0773b5df82917", "author": {"user": null}, "url": "https://github.com/firebase/firebase-android-sdk/commit/9d3f053c7431c897433617b3c3d0773b5df82917", "committedDate": "2020-06-02T18:40:46Z", "message": "addressed comments"}, "afterCommit": {"oid": "b31c9617df485067263ae92a89f006dfbdc1f17f", "author": {"user": null}, "url": "https://github.com/firebase/firebase-android-sdk/commit/b31c9617df485067263ae92a89f006dfbdc1f17f", "committedDate": "2020-06-02T20:17:30Z", "message": "addressed comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMDMxMjA5", "url": "https://github.com/firebase/firebase-android-sdk/pull/1612#pullrequestreview-423031209", "createdAt": "2020-06-02T20:25:43Z", "commit": {"oid": "b31c9617df485067263ae92a89f006dfbdc1f17f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2699, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}