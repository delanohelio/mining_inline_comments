{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzOTY2NDMy", "number": 1470, "title": "Added precondition format checks for App-Id and Api-Key", "bodyText": "", "createdAt": "2020-04-15T20:13:37Z", "url": "https://github.com/firebase/firebase-android-sdk/pull/1470", "merged": true, "mergeCommit": {"oid": "1807529ac02c265244db779fe66914eed28e0762"}, "closed": true, "closedAt": "2020-04-22T00:27:20Z", "author": {"login": "ChaoqunCHEN"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcX-V--AFqTM5NDEyMDk5MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZ7vJUgBqjMyNTgxODA3ODQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0MTIwOTkw", "url": "https://github.com/firebase/firebase-android-sdk/pull/1470#pullrequestreview-394120990", "createdAt": "2020-04-15T20:44:28Z", "commit": {"oid": "def143e44c6359102aa43b8715de59bed9a387ec"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2OTMzODUx", "url": "https://github.com/firebase/firebase-android-sdk/pull/1470#pullrequestreview-396933851", "createdAt": "2020-04-21T01:51:41Z", "commit": {"oid": "c1ab3aa95bbb135b1bef8f127817a85db665096a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2OTM0MTQy", "url": "https://github.com/firebase/firebase-android-sdk/pull/1470#pullrequestreview-396934142", "createdAt": "2020-04-21T01:52:41Z", "commit": {"oid": "c1ab3aa95bbb135b1bef8f127817a85db665096a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwMTo1Mjo0MVrOGIu50A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwMTo1Mjo0MVrOGIu50A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTgxMDI1Ng==", "bodyText": "Is there no test that you have to modify?\n(I mean a test that created FirebaseApp without projectId but with gcmSenderId.)", "url": "https://github.com/firebase/firebase-android-sdk/pull/1470#discussion_r411810256", "createdAt": "2020-04-21T01:52:41Z", "author": {"login": "andirayo"}, "path": "firebase-installations/src/main/java/com/google/firebase/installations/FirebaseInstallations.java", "diffHunk": "@@ -146,14 +146,22 @@ private void preConditionChecks() {\n     Preconditions.checkNotEmpty(getApplicationId());\n     Preconditions.checkNotEmpty(getProjectIdentifier());\n     Preconditions.checkNotEmpty(getApiKey());\n+    Preconditions.checkArgument(\n+            Utils.isValidAppIdFormat(getApplicationId()),\n+            \"Please set your Application ID. A valid Firebase App ID is required to communicate \"\n+                    + \"with Firebase server APIs: It identifies your application with Firebase.\"\n+                    + \"Please refer to https://firebase.google.com/support/privacy/init-options.\");\n+    Preconditions.checkArgument(\n+            Utils.isValidApiKeyFormat(getApiKey()),\n+            \"Please set a valid API key. A Firebase API key is required to communicate with \"\n+                    + \"Firebase server APIs: It authenticates your project with Google.\"\n+                    + \"Please refer to https://firebase.google.com/support/privacy/init-options.\");\n   }\n \n   /** Returns the Project Id or Project Number for the Firebase Project. */\n   @Nullable\n   String getProjectIdentifier() {\n-    return TextUtils.isEmpty(firebaseApp.getOptions().getProjectId())\n-        ? firebaseApp.getOptions().getGcmSenderId()\n-        : firebaseApp.getOptions().getProjectId();\n+    return firebaseApp.getOptions().getProjectId();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1ab3aa95bbb135b1bef8f127817a85db665096a"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a340e5e8b19f7e3c96a96db9cb5da1cd4939275a", "author": {"user": {"login": "ChaoqunCHEN", "name": null}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/a340e5e8b19f7e3c96a96db9cb5da1cd4939275a", "committedDate": "2020-04-21T21:50:29Z", "message": "Added precondition format checks for App-Id and Api-Key"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3893853852059eeef11c93c207961298f69768c2", "author": {"user": {"login": "ChaoqunCHEN", "name": null}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/3893853852059eeef11c93c207961298f69768c2", "committedDate": "2020-04-21T21:50:29Z", "message": "Make Firebase Project id/mumber mandatory. GCM sender ID can no longer replace it."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e0d421a03d6f16584111e3d3db10dd447086113", "author": {"user": {"login": "ChaoqunCHEN", "name": null}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/0e0d421a03d6f16584111e3d3db10dd447086113", "committedDate": "2020-04-21T21:50:29Z", "message": "code formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b207397892782d77d4cc863ceb6c14c7f98a4f1", "author": {"user": {"login": "ChaoqunCHEN", "name": null}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/1b207397892782d77d4cc863ceb6c14c7f98a4f1", "committedDate": "2020-04-21T22:48:58Z", "message": "Added precondition format checks for App-Id and Api-Key"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "843413b6368ab0a0fae6115b9204606abfbd93bf", "author": {"user": {"login": "ChaoqunCHEN", "name": null}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/843413b6368ab0a0fae6115b9204606abfbd93bf", "committedDate": "2020-04-21T22:02:42Z", "message": "merge from remote"}, "afterCommit": {"oid": "1b207397892782d77d4cc863ceb6c14c7f98a4f1", "author": {"user": {"login": "ChaoqunCHEN", "name": null}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/1b207397892782d77d4cc863ceb6c14c7f98a4f1", "committedDate": "2020-04-21T22:48:58Z", "message": "Added precondition format checks for App-Id and Api-Key"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2625, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}