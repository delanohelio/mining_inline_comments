{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcyODIyNzE2", "number": 1916, "title": "Handling AssertionError thrown by JsonReader causing Play Games app-crashes.", "bodyText": "Fix for internal b/162496596.", "createdAt": "2020-08-24T22:37:11Z", "url": "https://github.com/firebase/firebase-android-sdk/pull/1916", "merged": true, "mergeCommit": {"oid": "1162c4a7d3e1d27e22838e050583a8182dffa9a5"}, "closed": true, "closedAt": "2020-08-25T00:43:14Z", "author": {"login": "ankitaj224"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCKbsZgH2gAyNDcyODIyNzE2OmJlMGRiNGZiYWI0ZmQ2OGQ3NTczZDJlMDBlZDA2MDAwOTgxNDlkMzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCKyw9gH2gAyNDcyODIyNzE2OmI3Yjc0NTJhZWVjZDIwZWExNGNkZjM1NjNkM2ZmM2MxYTY3YTVhYWY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "be0db4fbab4fd68d7573d2e00ed0600098149d31", "author": {"user": {"login": "ankitaj224", "name": "Ankita"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/be0db4fbab4fd68d7573d2e00ed0600098149d31", "committedDate": "2020-08-24T22:34:23Z", "message": "Handling AssertionError thrown by JsonReader causing Play Games app\ncrashes."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczOTUxODg0", "url": "https://github.com/firebase/firebase-android-sdk/pull/1916#pullrequestreview-473951884", "createdAt": "2020-08-24T22:46:31Z", "commit": {"oid": "be0db4fbab4fd68d7573d2e00ed0600098149d31"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQyMjo0NjozMlrOHF4zig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQyMjo0Njo1N1rOHF40EQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTkzNTYyNg==", "bodyText": "Can we add a TODO to remove this code duplication (from above)?", "url": "https://github.com/firebase/firebase-android-sdk/pull/1916#discussion_r475935626", "createdAt": "2020-08-24T22:46:32Z", "author": {"login": "andirayo"}, "path": "firebase-installations/src/main/java/com/google/firebase/installations/remote/FirebaseInstallationServiceClient.java", "diffHunk": "@@ -394,7 +394,7 @@ public TokenResult generateAuthToken(\n         logBadConfigError();\n \n         return TokenResult.builder().setResponseCode(TokenResult.ResponseCode.BAD_CONFIG).build();\n-      } catch (IOException ignored) {\n+      } catch (AssertionError | IOException ignored) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be0db4fbab4fd68d7573d2e00ed0600098149d31"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTkzNTc2MQ==", "bodyText": "Same as above. Seems like we still have sections of code duplications.", "url": "https://github.com/firebase/firebase-android-sdk/pull/1916#discussion_r475935761", "createdAt": "2020-08-24T22:46:57Z", "author": {"login": "andirayo"}, "path": "firebase-installations/src/main/java/com/google/firebase/installations/remote/FirebaseInstallationServiceClient.java", "diffHunk": "@@ -486,10 +489,13 @@ private InstallationResponse readCreateResponse(HttpURLConnection conn) throws I\n   }\n \n   // Read the response from the generateAuthToken FirebaseInstallation API.\n-  private TokenResult readGenerateAuthTokenResponse(HttpURLConnection conn) throws IOException {\n+  private TokenResult readGenerateAuthTokenResponse(HttpURLConnection conn)\n+      throws AssertionError, IOException {\n     InputStream inputStream = conn.getInputStream();\n     JsonReader reader = new JsonReader(new InputStreamReader(inputStream, UTF_8));\n     TokenResult.Builder builder = TokenResult.builder();\n+    // JsonReader.peek will sometimes throw AssertionErrors in Android 8.0 and above. See\n+    // https://b.corp.google.com/issues/79920590 for details.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be0db4fbab4fd68d7573d2e00ed0600098149d31"}, "originalPosition": 45}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7b7452aeecd20ea14cdf3563d3ff3c1a67a5aaf", "author": {"user": {"login": "ankitaj224", "name": "Ankita"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/b7b7452aeecd20ea14cdf3563d3ff3c1a67a5aaf", "committedDate": "2020-08-24T22:59:35Z", "message": "Addressing rayo's comments"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2492, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}