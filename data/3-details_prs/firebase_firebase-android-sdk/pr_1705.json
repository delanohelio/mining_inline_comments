{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM4NzI4MjQ1", "number": 1705, "title": "Retry GoogleDataTransport Connection Errors", "bodyText": "In cases where there is bad connection, the current behavior deletes the cached reports because they are caught as an IOException. They appear to be encoding errors, when in reality it's an error opening the OutputStream that is the connection.\n\n\nThis changes it so that when the IOException is due to connection problems, we retry the upload instead of deleting it.\n\n\nThis is where we transform status numbers into success, fatal, and transient errors: CctTransportBackend.java\n\n400-level errors (except 404) are treated as fatal errors, which are deleted\n500-level errors are treated as transient errors, which are retried\n\nThis is where we decide to delete fatal errors, and retry transient errors: Uploader.java", "createdAt": "2020-06-23T17:53:00Z", "url": "https://github.com/firebase/firebase-android-sdk/pull/1705", "merged": true, "mergeCommit": {"oid": "08507fa42324d6964197171b0797ce3f998e508f"}, "closed": true, "closedAt": "2020-06-23T20:22:43Z", "author": {"login": "samedson"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcuJNzKgH2gAyNDM4NzI4MjQ1OmUyYWY1NDI2MTY3Y2ZkZDBkN2Q4MjVmYTNhZTI2NDVlNTY5NjFhOTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcuKrG2AFqTQzNjA5MjY1NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e2af5426167cfdd0d7d825fa3ae2645e56961a98", "author": {"user": {"login": "samedson", "name": "Sam Edson"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/e2af5426167cfdd0d7d825fa3ae2645e56961a98", "committedDate": "2020-06-23T17:50:49Z", "message": "Retry GoogleDataTransport Connection Errors"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MDcwODg1", "url": "https://github.com/firebase/firebase-android-sdk/pull/1705#pullrequestreview-436070885", "createdAt": "2020-06-23T19:01:23Z", "commit": {"oid": "e2af5426167cfdd0d7d825fa3ae2645e56961a98"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxOTowMToyM1rOGn2nMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxOTowMToyM1rOGn2nMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ0MjQxOA==", "bodyText": "Thinking out loud: This seems like a pretty conservative approach, as opposed to treating all IO Exceptions as retry-able.", "url": "https://github.com/firebase/firebase-android-sdk/pull/1705#discussion_r444442418", "createdAt": "2020-06-23T19:01:23Z", "author": {"login": "ashwinraghav"}, "path": "transport/transport-backend-cct/src/main/java/com/google/android/datatransport/cct/CctTransportBackend.java", "diffHunk": "@@ -268,6 +270,9 @@ private HttpResponse doSend(HttpRequest request) throws IOException {\n       // JsonWriter often writes one character at a time.\n       dataEncoder.encode(\n           request.requestBody, new BufferedWriter(new OutputStreamWriter(outputStream)));\n+    } catch (ConnectException | UnknownHostException e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2af5426167cfdd0d7d825fa3ae2645e56961a98"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MDkyNjU1", "url": "https://github.com/firebase/firebase-android-sdk/pull/1705#pullrequestreview-436092655", "createdAt": "2020-06-23T19:32:44Z", "commit": {"oid": "e2af5426167cfdd0d7d825fa3ae2645e56961a98"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2563, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}