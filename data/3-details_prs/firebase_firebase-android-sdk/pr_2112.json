{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwOTYzOTI4", "number": 2112, "title": "Add additional platform signals to UserAgent.", "bodyText": "", "createdAt": "2020-10-27T18:22:41Z", "url": "https://github.com/firebase/firebase-android-sdk/pull/2112", "merged": true, "mergeCommit": {"oid": "39329516eaa8b29440c10e81b9a017603fa77422"}, "closed": true, "closedAt": "2020-10-29T17:47:11Z", "author": {"login": "vkryachko"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWtKusgH2gAyNTEwOTYzOTI4OjQxZTY0NGUyM2YxNDI0MjlmY2E4M2ViNTYyNWEzMjlkZWEwOTRhNDM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXVTGrAFqTUxOTg4OTQ1Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "41e644e23f142429fca83eb5625a329dea094a43", "author": {"user": {"login": "vkryachko", "name": "Vladimir Kryachko"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/41e644e23f142429fca83eb5625a329dea094a43", "committedDate": "2020-10-27T18:21:01Z", "message": "Add additional platform signals to UserAgent."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4MDMwNDg0", "url": "https://github.com/firebase/firebase-android-sdk/pull/2112#pullrequestreview-518030484", "createdAt": "2020-10-27T18:43:08Z", "commit": {"oid": "41e644e23f142429fca83eb5625a329dea094a43"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxODo0MzowOFrOHpLePw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxODo0MzowOFrOHpLePw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjk0MTYzMQ==", "bodyText": "nit: are we making sure we substitute spaces in the value anywhere?", "url": "https://github.com/firebase/firebase-android-sdk/pull/2112#discussion_r512941631", "createdAt": "2020-10-27T18:43:08Z", "author": {"login": "maksymmalyhin"}, "path": "firebase-common/src/main/java/com/google/firebase/FirebaseCommonRegistrar.java", "diffHunk": "@@ -0,0 +1,97 @@\n+// Copyright 2020 Google LLC\n+//\n+// Licensed under the Apache License, Version 2.0 (the \"License\");\n+// you may not use this file except in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+//      http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+\n+package com.google.firebase;\n+\n+import android.content.pm.ApplicationInfo;\n+import android.content.pm.PackageManager;\n+import android.os.Build;\n+import com.google.firebase.components.Component;\n+import com.google.firebase.components.ComponentRegistrar;\n+import com.google.firebase.heartbeatinfo.DefaultHeartBeatInfo;\n+import com.google.firebase.platforminfo.DefaultUserAgentPublisher;\n+import com.google.firebase.platforminfo.LibraryVersionComponent;\n+import java.util.Arrays;\n+import java.util.List;\n+\n+/** @hide */\n+public class FirebaseCommonRegistrar implements ComponentRegistrar {\n+  private static final String FIREBASE_ANDROID = \"fire-android\";\n+  private static final String FIREBASE_COMMON = \"fire-core\";\n+  private static final String DEVICE_NAME = \"device-name\";\n+  private static final String DEVICE_MODEL = \"device-model\";\n+  private static final String DEVICE_BRAND = \"device-brand\";\n+  private static final String TARGET_SDK = \"android-target-sdk\";\n+  private static final String MIN_SDK = \"android-min-sdk\";\n+  private static final String ANDROID_PLATFORM = \"android-platform\";\n+  private static final String ANDROID_INSTALLER = \"android-installer\";\n+\n+  @Override\n+  public List<Component<?>> getComponents() {\n+    return Arrays.asList(\n+        LibraryVersionComponent.create(FIREBASE_ANDROID, String.valueOf(Build.VERSION.SDK_INT)),\n+        LibraryVersionComponent.create(FIREBASE_COMMON, BuildConfig.VERSION_NAME),\n+        LibraryVersionComponent.create(DEVICE_NAME, Build.PRODUCT),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41e644e23f142429fca83eb5625a329dea094a43"}, "originalPosition": 45}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5MDg0OTM0", "url": "https://github.com/firebase/firebase-android-sdk/pull/2112#pullrequestreview-519084934", "createdAt": "2020-10-28T21:08:02Z", "commit": {"oid": "41e644e23f142429fca83eb5625a329dea094a43"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQyMTowODowMlrOHp9f7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQyMTowODowMlrOHp9f7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzc2MTI2MA==", "bodyText": "possible to make these constants? Here and throughout", "url": "https://github.com/firebase/firebase-android-sdk/pull/2112#discussion_r513761260", "createdAt": "2020-10-28T21:08:02Z", "author": {"login": "VinayGuthal"}, "path": "firebase-common/src/main/java/com/google/firebase/FirebaseCommonRegistrar.java", "diffHunk": "@@ -0,0 +1,97 @@\n+// Copyright 2020 Google LLC\n+//\n+// Licensed under the Apache License, Version 2.0 (the \"License\");\n+// you may not use this file except in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+//      http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing, software\n+// distributed under the License is distributed on an \"AS IS\" BASIS,\n+// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+// See the License for the specific language governing permissions and\n+// limitations under the License.\n+\n+package com.google.firebase;\n+\n+import android.content.pm.ApplicationInfo;\n+import android.content.pm.PackageManager;\n+import android.os.Build;\n+import com.google.firebase.components.Component;\n+import com.google.firebase.components.ComponentRegistrar;\n+import com.google.firebase.heartbeatinfo.DefaultHeartBeatInfo;\n+import com.google.firebase.platforminfo.DefaultUserAgentPublisher;\n+import com.google.firebase.platforminfo.LibraryVersionComponent;\n+import java.util.Arrays;\n+import java.util.List;\n+\n+/** @hide */\n+public class FirebaseCommonRegistrar implements ComponentRegistrar {\n+  private static final String FIREBASE_ANDROID = \"fire-android\";\n+  private static final String FIREBASE_COMMON = \"fire-core\";\n+  private static final String DEVICE_NAME = \"device-name\";\n+  private static final String DEVICE_MODEL = \"device-model\";\n+  private static final String DEVICE_BRAND = \"device-brand\";\n+  private static final String TARGET_SDK = \"android-target-sdk\";\n+  private static final String MIN_SDK = \"android-min-sdk\";\n+  private static final String ANDROID_PLATFORM = \"android-platform\";\n+  private static final String ANDROID_INSTALLER = \"android-installer\";\n+\n+  @Override\n+  public List<Component<?>> getComponents() {\n+    return Arrays.asList(\n+        LibraryVersionComponent.create(FIREBASE_ANDROID, String.valueOf(Build.VERSION.SDK_INT)),\n+        LibraryVersionComponent.create(FIREBASE_COMMON, BuildConfig.VERSION_NAME),\n+        LibraryVersionComponent.create(DEVICE_NAME, Build.PRODUCT),\n+        LibraryVersionComponent.create(DEVICE_MODEL, Build.DEVICE),\n+        LibraryVersionComponent.create(DEVICE_BRAND, Build.BRAND),\n+        LibraryVersionComponent.fromContext(\n+            TARGET_SDK,\n+            ctx -> {\n+              ApplicationInfo info = ctx.getApplicationInfo();\n+              if (info != null) {\n+                return String.valueOf(info.targetSdkVersion);\n+              }\n+              return \"\";\n+            }),\n+        LibraryVersionComponent.fromContext(\n+            MIN_SDK,\n+            ctx -> {\n+              ApplicationInfo info = ctx.getApplicationInfo();\n+              if (info != null && Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {\n+                return String.valueOf(info.minSdkVersion);\n+              }\n+              return \"\";\n+            }),\n+        LibraryVersionComponent.fromContext(\n+            ANDROID_PLATFORM,\n+            ctx -> {\n+              if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN\n+                  && ctx.getPackageManager().hasSystemFeature(PackageManager.FEATURE_TELEVISION)) {\n+                return \"tv\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41e644e23f142429fca83eb5625a329dea094a43"}, "originalPosition": 71}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5MDg1NjM3", "url": "https://github.com/firebase/firebase-android-sdk/pull/2112#pullrequestreview-519085637", "createdAt": "2020-10-28T21:08:59Z", "commit": {"oid": "41e644e23f142429fca83eb5625a329dea094a43"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQyMTowODo1OVrOHp9ifQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQyMTowODo1OVrOHp9ifQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzc2MTkxNw==", "bodyText": "This cannot be moved inside the new FirebaseCommonRegistrar? Since I am assuming the useragentstring will also get this value right?", "url": "https://github.com/firebase/firebase-android-sdk/pull/2112#discussion_r513761917", "createdAt": "2020-10-28T21:08:59Z", "author": {"login": "VinayGuthal"}, "path": "firebase-common/src/main/java/com/google/firebase/FirebaseApp.java", "diffHunk": "@@ -428,11 +427,7 @@ protected FirebaseApp(Context applicationContext, String name, FirebaseOptions o\n             Component.of(applicationContext, Context.class),\n             Component.of(this, FirebaseApp.class),\n             Component.of(options, FirebaseOptions.class),\n-            LibraryVersionComponent.create(FIREBASE_ANDROID, \"\"),\n-            LibraryVersionComponent.create(FIREBASE_COMMON, BuildConfig.VERSION_NAME),\n-            kotlinVersion != null ? LibraryVersionComponent.create(KOTLIN, kotlinVersion) : null,\n-            DefaultUserAgentPublisher.component(),\n-            DefaultHeartBeatInfo.component());\n+            kotlinVersion != null ? LibraryVersionComponent.create(KOTLIN, kotlinVersion) : null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41e644e23f142429fca83eb5625a329dea094a43"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7cdcdd3017242fb71dd50e6d2a2ecc30e5e13bf", "author": {"user": {"login": "vkryachko", "name": "Vladimir Kryachko"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/e7cdcdd3017242fb71dd50e6d2a2ecc30e5e13bf", "committedDate": "2020-10-29T14:53:11Z", "message": "Address review comments."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f5849023863b7a0731961c76f02a79ea8ea9930", "author": {"user": {"login": "vkryachko", "name": "Vladimir Kryachko"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/2f5849023863b7a0731961c76f02a79ea8ea9930", "committedDate": "2020-10-29T14:58:17Z", "message": "Replace spaces in user agent values."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8ae8117ab3ac45ce274173f4718dced4b9561fe", "author": {"user": {"login": "vkryachko", "name": "Vladimir Kryachko"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/f8ae8117ab3ac45ce274173f4718dced4b9561fe", "committedDate": "2020-10-29T16:52:20Z", "message": "Address review comment."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5ODg5NDU3", "url": "https://github.com/firebase/firebase-android-sdk/pull/2112#pullrequestreview-519889457", "createdAt": "2020-10-29T17:06:22Z", "commit": {"oid": "f8ae8117ab3ac45ce274173f4718dced4b9561fe"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2420, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}