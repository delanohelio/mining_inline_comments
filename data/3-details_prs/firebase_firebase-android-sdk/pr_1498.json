{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4Mjk1Nzk1", "number": 1498, "title": "Port ComponentProvider", "bodyText": "Ports the component provider from Web: https://github.com/firebase/firebase-js-sdk/blob/master/packages/firestore/src/core/component_provider.ts\nIt also updates FirestoreClient and SpecTestRunner to use the new component provider. Note that the initialization in FirestoreClient is slightly different as there is no memory-only build, so we can decide much later which component provider to use.", "createdAt": "2020-04-24T02:36:46Z", "url": "https://github.com/firebase/firebase-android-sdk/pull/1498", "merged": true, "mergeCommit": {"oid": "859892107d21b5780857921ba65f109b76d247dd"}, "closed": true, "closedAt": "2020-04-24T21:16:49Z", "author": {"login": "schmidt-sebastian"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABca1J-xgBqjMyNzA0MTk2Nzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABca3rzOAH2gAyNDA4Mjk1Nzk1OjJkMGRmNDQ4ZWJlZjM5MDcwM2UwOWJhNDU5MmMxNzU5OWFiNDBlNGQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "560094869e4a3df22299b342a135c8ff03152a66", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/560094869e4a3df22299b342a135c8ff03152a66", "committedDate": "2020-04-24T04:50:48Z", "message": "fix tests"}, "afterCommit": {"oid": "3367574e7c0847dea3d4b1dc73294fdeebaabdcc", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/3367574e7c0847dea3d4b1dc73294fdeebaabdcc", "committedDate": "2020-04-24T17:43:46Z", "message": "Port ComponentProvider"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3367574e7c0847dea3d4b1dc73294fdeebaabdcc", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/3367574e7c0847dea3d4b1dc73294fdeebaabdcc", "committedDate": "2020-04-24T17:43:46Z", "message": "Port ComponentProvider"}, "afterCommit": {"oid": "bfb64a2b80d0446921a8d425589ed37bf9c0235f", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/bfb64a2b80d0446921a8d425589ed37bf9c0235f", "committedDate": "2020-04-24T18:04:02Z", "message": "Port ComponentProvider"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bfb64a2b80d0446921a8d425589ed37bf9c0235f", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/bfb64a2b80d0446921a8d425589ed37bf9c0235f", "committedDate": "2020-04-24T18:04:02Z", "message": "Port ComponentProvider"}, "afterCommit": {"oid": "ad70387bf051c72f0060538fa7f56d9364ae7d4f", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/ad70387bf051c72f0060538fa7f56d9364ae7d4f", "committedDate": "2020-04-24T18:06:04Z", "message": "Port ComponentProvider"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ad70387bf051c72f0060538fa7f56d9364ae7d4f", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/ad70387bf051c72f0060538fa7f56d9364ae7d4f", "committedDate": "2020-04-24T18:06:04Z", "message": "Port ComponentProvider"}, "afterCommit": {"oid": "be064a905f62c7a2ed0913a0709a7cc250d92c54", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/be064a905f62c7a2ed0913a0709a7cc250d92c54", "committedDate": "2020-04-24T18:19:53Z", "message": "Port ComponentProvider"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "be064a905f62c7a2ed0913a0709a7cc250d92c54", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/be064a905f62c7a2ed0913a0709a7cc250d92c54", "committedDate": "2020-04-24T18:19:53Z", "message": "Port ComponentProvider"}, "afterCommit": {"oid": "58c571d072639164fea9ace57da85d2ad89e3607", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/58c571d072639164fea9ace57da85d2ad89e3607", "committedDate": "2020-04-24T18:34:34Z", "message": "Port ComponentProvider"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df22128d51955e6ae506d298b1ad1cc1a5f14462", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/df22128d51955e6ae506d298b1ad1cc1a5f14462", "committedDate": "2020-04-24T19:16:33Z", "message": "Port ComponentProvider"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "58c571d072639164fea9ace57da85d2ad89e3607", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/58c571d072639164fea9ace57da85d2ad89e3607", "committedDate": "2020-04-24T18:34:34Z", "message": "Port ComponentProvider"}, "afterCommit": {"oid": "df22128d51955e6ae506d298b1ad1cc1a5f14462", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/df22128d51955e6ae506d298b1ad1cc1a5f14462", "committedDate": "2020-04-24T19:16:33Z", "message": "Port ComponentProvider"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMjQ2MzAz", "url": "https://github.com/firebase/firebase-android-sdk/pull/1498#pullrequestreview-400246303", "createdAt": "2020-04-24T20:22:25Z", "commit": {"oid": "df22128d51955e6ae506d298b1ad1cc1a5f14462"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMDoyMjoyNVrOGLn25A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQyMDoyMjo0NFrOGLn3Ww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg0MDU0OA==", "bodyText": "Nit: I think Java recommendations discourage final on parameters and local variables.", "url": "https://github.com/firebase/firebase-android-sdk/pull/1498#discussion_r414840548", "createdAt": "2020-04-24T20:22:25Z", "author": {"login": "var-const"}, "path": "firebase-firestore/src/test/java/com/google/firebase/firestore/spec/SpecTestCase.java", "diffHunk": "@@ -241,7 +241,8 @@ public static void log(String line) {\n   // Methods for tracking state of writes.\n   //\n \n-  abstract Persistence getPersistence(boolean garbageCollectionEnabled);\n+  protected abstract ComponentProvider initializeComponentProvider(\n+      ComponentProvider.Configuration configuration, final boolean garbageCollectionEnabled);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df22128d51955e6ae506d298b1ad1cc1a5f14462"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg0MDY2Nw==", "bodyText": "Same nit re. final.", "url": "https://github.com/firebase/firebase-android-sdk/pull/1498#discussion_r414840667", "createdAt": "2020-04-24T20:22:44Z", "author": {"login": "var-const"}, "path": "firebase-firestore/src/test/java/com/google/firebase/firestore/spec/MemorySpecTest.java", "diffHunk": "@@ -33,11 +39,23 @@ protected boolean isExcluded(Set<String> tags) {\n   }\n \n   @Override\n-  Persistence getPersistence(boolean garbageCollectionEnabled) {\n-    if (garbageCollectionEnabled) {\n-      return PersistenceTestHelpers.createEagerGCMemoryPersistence();\n-    } else {\n-      return PersistenceTestHelpers.createLRUMemoryPersistence();\n-    }\n+  protected MemoryComponentProvider initializeComponentProvider(\n+      ComponentProvider.Configuration configuration, final boolean garbageCollectionEnabled) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df22128d51955e6ae506d298b1ad1cc1a5f14462"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d0df448ebef390703e09ba4592c17599ab40e4d", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/2d0df448ebef390703e09ba4592c17599ab40e4d", "committedDate": "2020-04-24T20:40:44Z", "message": "Remove final"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2641, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}