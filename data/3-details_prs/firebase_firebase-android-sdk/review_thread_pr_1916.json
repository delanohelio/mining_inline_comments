{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcyODIyNzE2", "number": 1916, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQyMjo0NjozMlrOEbxHCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQyMjo0Njo1N1rOEbxHZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3NTUxNjI3OnYy", "diffSide": "RIGHT", "path": "firebase-installations/src/main/java/com/google/firebase/installations/remote/FirebaseInstallationServiceClient.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQyMjo0NjozMlrOHF4zig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQyMzowMDozM1rOHF5GNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTkzNTYyNg==", "bodyText": "Can we add a TODO to remove this code duplication (from above)?", "url": "https://github.com/firebase/firebase-android-sdk/pull/1916#discussion_r475935626", "createdAt": "2020-08-24T22:46:32Z", "author": {"login": "andirayo"}, "path": "firebase-installations/src/main/java/com/google/firebase/installations/remote/FirebaseInstallationServiceClient.java", "diffHunk": "@@ -394,7 +394,7 @@ public TokenResult generateAuthToken(\n         logBadConfigError();\n \n         return TokenResult.builder().setResponseCode(TokenResult.ResponseCode.BAD_CONFIG).build();\n-      } catch (IOException ignored) {\n+      } catch (AssertionError | IOException ignored) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be0db4fbab4fd68d7573d2e00ed0600098149d31"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTk0MDQwNg==", "bodyText": "Added a TODO and created a tracker https://b.corp.google.com/issues/166168291 for removing code duplication. Thanks.", "url": "https://github.com/firebase/firebase-android-sdk/pull/1916#discussion_r475940406", "createdAt": "2020-08-24T23:00:33Z", "author": {"login": "ankitaj224"}, "path": "firebase-installations/src/main/java/com/google/firebase/installations/remote/FirebaseInstallationServiceClient.java", "diffHunk": "@@ -394,7 +394,7 @@ public TokenResult generateAuthToken(\n         logBadConfigError();\n \n         return TokenResult.builder().setResponseCode(TokenResult.ResponseCode.BAD_CONFIG).build();\n-      } catch (IOException ignored) {\n+      } catch (AssertionError | IOException ignored) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTkzNTYyNg=="}, "originalCommit": {"oid": "be0db4fbab4fd68d7573d2e00ed0600098149d31"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3NTUxNzE2OnYy", "diffSide": "RIGHT", "path": "firebase-installations/src/main/java/com/google/firebase/installations/remote/FirebaseInstallationServiceClient.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQyMjo0Njo1N1rOHF40EQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQyMjo0Njo1N1rOHF40EQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTkzNTc2MQ==", "bodyText": "Same as above. Seems like we still have sections of code duplications.", "url": "https://github.com/firebase/firebase-android-sdk/pull/1916#discussion_r475935761", "createdAt": "2020-08-24T22:46:57Z", "author": {"login": "andirayo"}, "path": "firebase-installations/src/main/java/com/google/firebase/installations/remote/FirebaseInstallationServiceClient.java", "diffHunk": "@@ -486,10 +489,13 @@ private InstallationResponse readCreateResponse(HttpURLConnection conn) throws I\n   }\n \n   // Read the response from the generateAuthToken FirebaseInstallation API.\n-  private TokenResult readGenerateAuthTokenResponse(HttpURLConnection conn) throws IOException {\n+  private TokenResult readGenerateAuthTokenResponse(HttpURLConnection conn)\n+      throws AssertionError, IOException {\n     InputStream inputStream = conn.getInputStream();\n     JsonReader reader = new JsonReader(new InputStreamReader(inputStream, UTF_8));\n     TokenResult.Builder builder = TokenResult.builder();\n+    // JsonReader.peek will sometimes throw AssertionErrors in Android 8.0 and above. See\n+    // https://b.corp.google.com/issues/79920590 for details.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be0db4fbab4fd68d7573d2e00ed0600098149d31"}, "originalPosition": 45}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1155, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}