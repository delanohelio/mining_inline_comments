{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk3MDQ3MjAx", "number": 2034, "title": "Remove protobuf dependency from RC SDK.", "bodyText": "", "createdAt": "2020-10-02T17:43:19Z", "url": "https://github.com/firebase/firebase-android-sdk/pull/2034", "merged": true, "mergeCommit": {"oid": "17506e464d90a2797307c81635c7f93c7af726a9"}, "closed": true, "closedAt": "2020-10-12T22:26:44Z", "author": {"login": "danasilver"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdOnWUXgH2gAyNDk3MDQ3MjAxOjJmNDUyZTMzZjczMDI5ZTBhNzk3MGNmZWY1NzU4OWRmNzE1YTk4YzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdR7a62gFqTUwNjk0NjExMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2f452e33f73029e0a7970cfef57589df715a98c4", "author": {"user": {"login": "danasilver", "name": "Dana Silver"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/2f452e33f73029e0a7970cfef57589df715a98c4", "committedDate": "2020-10-02T15:02:51Z", "message": "Remove protobuf dependency from RC SDK."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80a11f37561d7358f9cd3661983f62126e609405", "author": {"user": {"login": "danasilver", "name": "Dana Silver"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/80a11f37561d7358f9cd3661983f62126e609405", "committedDate": "2020-10-02T20:12:13Z", "message": "Specify proto as compileOnly."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0ee992c438025e92350b00b6101db762a63ad06", "author": {"user": {"login": "danasilver", "name": "Dana Silver"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/b0ee992c438025e92350b00b6101db762a63ad06", "committedDate": "2020-10-02T20:29:07Z", "message": "googleJavaFormat"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50db692700869cfb28dfb7c40fb708b161715a82", "author": {"user": {"login": "danasilver", "name": "Dana Silver"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/50db692700869cfb28dfb7c40fb708b161715a82", "committedDate": "2020-10-05T17:53:40Z", "message": "Merge master."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzMDY0NTA2", "url": "https://github.com/firebase/firebase-android-sdk/pull/2034#pullrequestreview-503064506", "createdAt": "2020-10-06T15:02:19Z", "commit": {"oid": "50db692700869cfb28dfb7c40fb708b161715a82"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxNTowMjoyMFrOHdL6OQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxNTowMzozMFrOHdL-Vw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDM2NTg4MQ==", "bodyText": "afaict I don't think that is accurate, instead ABT has protos used by fiam and RC, can you please double check that?", "url": "https://github.com/firebase/firebase-android-sdk/pull/2034#discussion_r500365881", "createdAt": "2020-10-06T15:02:20Z", "author": {"login": "vkryachko"}, "path": "firebase-config/firebase-config.gradle", "diffHunk": "@@ -24,6 +24,8 @@ firebaseLibrary {\n     publishSources = true\n }\n \n+// Compile Protobuf definition files. Remote Config does not depend on Protobuf but includes\n+// definitions used by the ABT and FIAM SDKs.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "50db692700869cfb28dfb7c40fb708b161715a82"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDM2NjQxNA==", "bodyText": "I think this one is needed as implementation, otherwise it will cause build failures if firebase-abt is used alone in an app", "url": "https://github.com/firebase/firebase-android-sdk/pull/2034#discussion_r500366414", "createdAt": "2020-10-06T15:02:53Z", "author": {"login": "vkryachko"}, "path": "firebase-abt/firebase-abt.gradle", "diffHunk": "@@ -87,4 +86,5 @@ dependencies {\n     testImplementation 'io.grpc:grpc-testing:1.12.0'\n     testImplementation 'androidx.test.espresso:espresso-core:3.2.0'\n \n+    compileOnly \"com.google.protobuf:protobuf-javalite:$javaliteVersion\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "50db692700869cfb28dfb7c40fb708b161715a82"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDM2NjkzNQ==", "bodyText": "This file also contains the following todo comment:\nTODO(issue/568): Remove this once legacy logic is removed from Remote Config.\n\nShould this be done with this change?", "url": "https://github.com/firebase/firebase-android-sdk/pull/2034#discussion_r500366935", "createdAt": "2020-10-06T15:03:30Z", "author": {"login": "vkryachko"}, "path": "firebase-abt/firebase-abt.gradle", "diffHunk": "@@ -87,4 +86,5 @@ dependencies {\n     testImplementation 'io.grpc:grpc-testing:1.12.0'\n     testImplementation 'androidx.test.espresso:espresso-core:3.2.0'\n \n+    compileOnly \"com.google.protobuf:protobuf-javalite:$javaliteVersion\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDM2NjQxNA=="}, "originalCommit": {"oid": "50db692700869cfb28dfb7c40fb708b161715a82"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0MTkzMjI5", "url": "https://github.com/firebase/firebase-android-sdk/pull/2034#pullrequestreview-504193229", "createdAt": "2020-10-07T19:18:33Z", "commit": {"oid": "50db692700869cfb28dfb7c40fb708b161715a82"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxOToxODozM1rOHeCBoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxOToyMzoxMlrOHeCLiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTI1MjUxMg==", "bodyText": "ABT only exposes experiment_payload proto, which is only used in RC in the class removed in this PR. There are other mentions in the configs proto, but it's as bytes\nhttps://osscs.corp.google.com/firebase-sdk/firebase-android-sdk/+/master:firebase-config/src/proto/com/google/android/gms/config/proto/config_persistence.proto;l=42?q=experiment%20payload&ss=firebase-sdk%2Ffirebase-android-sdk:firebase-config%2F\nFIAM does depend on the class\nhttps://osscs.corp.google.com/firebase-sdk/firebase-android-sdk/+/master:firebase-inappmessaging/src/main/java/com/google/firebase/inappmessaging/internal/AbtIntegrationHelper.java;l=57?q=experimentpayload&ss=firebase-sdk%2Ffirebase-android-sdk:firebase-inappmessaging%2F from ABT", "url": "https://github.com/firebase/firebase-android-sdk/pull/2034#discussion_r501252512", "createdAt": "2020-10-07T19:18:33Z", "author": {"login": "rlazo"}, "path": "firebase-config/firebase-config.gradle", "diffHunk": "@@ -24,6 +24,8 @@ firebaseLibrary {\n     publishSources = true\n }\n \n+// Compile Protobuf definition files. Remote Config does not depend on Protobuf but includes\n+// definitions used by the ABT and FIAM SDKs.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDM2NTg4MQ=="}, "originalCommit": {"oid": "50db692700869cfb28dfb7c40fb708b161715a82"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTI1Mjc4Ng==", "bodyText": "AFAIK firebase-abt cannot be used stand alone. Can it?", "url": "https://github.com/firebase/firebase-android-sdk/pull/2034#discussion_r501252786", "createdAt": "2020-10-07T19:19:07Z", "author": {"login": "rlazo"}, "path": "firebase-abt/firebase-abt.gradle", "diffHunk": "@@ -87,4 +86,5 @@ dependencies {\n     testImplementation 'io.grpc:grpc-testing:1.12.0'\n     testImplementation 'androidx.test.espresso:espresso-core:3.2.0'\n \n+    compileOnly \"com.google.protobuf:protobuf-javalite:$javaliteVersion\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDM2NjQxNA=="}, "originalCommit": {"oid": "50db692700869cfb28dfb7c40fb708b161715a82"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTI1NTA0OA==", "bodyText": "from the javadoc seems like the only usefulness of the method was for use with the LegacyConfigsHandler, is it still needed?", "url": "https://github.com/firebase/firebase-android-sdk/pull/2034#discussion_r501255048", "createdAt": "2020-10-07T19:23:12Z", "author": {"login": "rlazo"}, "path": "firebase-config/src/main/java/com/google/firebase/remoteconfig/RemoteConfigComponent.java", "diffHunk": "@@ -209,11 +205,7 @@ private ConfigCacheClient getCacheClient(String namespace, String configStoreTyp\n     return getCacheClient(context, appId, namespace, configStoreType);\n   }\n \n-  /**\n-   * The {@link LegacyConfigsHandler} needs access to multiple cache clients, and the simplest way\n-   * to provide it access is to keep this method public and static.\n-   */\n-  public static ConfigCacheClient getCacheClient(\n+  private ConfigCacheClient getCacheClient(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "50db692700869cfb28dfb7c40fb708b161715a82"}, "originalPosition": 41}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80a95f48506ac8178e0788c79cd9a157ac0a3fc1", "author": {"user": {"login": "danasilver", "name": "Dana Silver"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/80a95f48506ac8178e0788c79cd9a157ac0a3fc1", "committedDate": "2020-10-07T20:16:57Z", "message": "Remove unused getCacheClient method."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14625500292eefbf03710c1ff1299ad383c2c47d", "author": {"user": {"login": "danasilver", "name": "Dana Silver"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/14625500292eefbf03710c1ff1299ad383c2c47d", "committedDate": "2020-10-07T23:38:03Z", "message": "Move RC and ABT protos to FIAM."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a14110e45b85edbcd3ec0241176f1b67c17f7c83", "author": {"user": {"login": "danasilver", "name": "Dana Silver"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/a14110e45b85edbcd3ec0241176f1b67c17f7c83", "committedDate": "2020-10-08T23:06:08Z", "message": "Move ExperimentPayload proto to FIAM package."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1Mjk2MDA1", "url": "https://github.com/firebase/firebase-android-sdk/pull/2034#pullrequestreview-505296005", "createdAt": "2020-10-09T01:42:23Z", "commit": {"oid": "a14110e45b85edbcd3ec0241176f1b67c17f7c83"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1NzYwNzUz", "url": "https://github.com/firebase/firebase-android-sdk/pull/2034#pullrequestreview-505760753", "createdAt": "2020-10-09T15:06:30Z", "commit": {"oid": "a14110e45b85edbcd3ec0241176f1b67c17f7c83"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1ODk3Mjkz", "url": "https://github.com/firebase/firebase-android-sdk/pull/2034#pullrequestreview-505897293", "createdAt": "2020-10-09T18:20:07Z", "commit": {"oid": "a14110e45b85edbcd3ec0241176f1b67c17f7c83"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxODoyMDowOFrOHfURwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxODoyMDowOFrOHfURwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjYwMDEyOA==", "bodyText": "Will there be any issues with serialization if we change the package name as I assume there could be a similar proto used at server side?", "url": "https://github.com/firebase/firebase-android-sdk/pull/2034#discussion_r502600128", "createdAt": "2020-10-09T18:20:08Z", "author": {"login": "eldhosembabu"}, "path": "firebase-inappmessaging/src/proto/firebase/inappmessaging/proto/experiment_payload.proto", "diffHunk": "@@ -13,9 +13,11 @@\n // limitations under the License.\n \n syntax = \"proto3\";\n-package developers.mobile.abt;\n \n-option java_outer_classname = \"FirebaseAbt\";\n+package firebase.inappmessaging;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a14110e45b85edbcd3ec0241176f1b67c17f7c83"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2OTQ2MTEy", "url": "https://github.com/firebase/firebase-android-sdk/pull/2034#pullrequestreview-506946112", "createdAt": "2020-10-12T22:07:45Z", "commit": {"oid": "a14110e45b85edbcd3ec0241176f1b67c17f7c83"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2368, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}