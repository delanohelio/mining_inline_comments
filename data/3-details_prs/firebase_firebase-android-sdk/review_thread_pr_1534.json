{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0OTAyODg1", "number": 1534, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QyMDozMDowNFrOD6aJrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMTo1NDozOVrOEIJesQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyNTcyNDYyOnYy", "diffSide": "RIGHT", "path": "protolite-well-known-types/protolite-well-known-types.gradle", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QyMDozMDowNFrOGSPFMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QyMDozMDowNFrOGSPFMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc3NDY0MQ==", "bodyText": "The protobuf declaration is different from a implementation.\nIIRC, this will simply make the proto files in the artifact available to all consumers of this dep. It should not vendor the protos itself. It should simply make it available to the proto compiler", "url": "https://github.com/firebase/firebase-android-sdk/pull/1534#discussion_r421774641", "createdAt": "2020-05-07T20:30:04Z", "author": {"login": "ashwinraghav"}, "path": "protolite-well-known-types/protolite-well-known-types.gradle", "diffHunk": "@@ -50,13 +50,9 @@ android {\n     sourceSets.main.resources.includes = ['**/*.proto']\n }\n \n-configurations.all {\n-    exclude group: \"com.google.protobuf\", module: \"protobuf-java\"\n-}\n-\n dependencies {\n     implementation 'com.google.protobuf:protobuf-javalite:3.11.0'\n-    protobuf 'com.google.protobuf:protobuf-javalite:3.11.0'\n+    protobuf 'com.google.protobuf:protobuf-java:3.11.4'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b328f5b2243a70e010f123738dae95cc326b3355"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzOTE3MjE3OnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxNDo1NjoyOFrOGUKywg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxNDo1NjoyOFrOGUKywg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzgwMTUzOA==", "bodyText": "1.29.0 depends on guava 28.2\nhttps://github.com/grpc/grpc-java/blob/master/build.gradle#L53\nbut we have a hard dependency on 27\nhttps://github.com/firebase/firebase-android-sdk/blob/master/firebase-inappmessaging/firebase-inappmessaging.gradle#L107\nI'm curious on how does the tests worked with this issue.", "url": "https://github.com/firebase/firebase-android-sdk/pull/1534#discussion_r423801538", "createdAt": "2020-05-12T14:56:28Z", "author": {"login": "rlazo"}, "path": "build.gradle", "diffHunk": "@@ -49,6 +49,7 @@ ext {\n     playServicesVersion = '16.0.1'\n     supportAnnotationsVersion = '28.0.0'\n     googleTruthVersion = '0.45'\n+    grpcVersion = '1.29.0'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d976df0a390886aa5719877344853c86425414af"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2ODQ2MjkzOnYy", "diffSide": "LEFT", "path": "firebase-firestore/src/main/java/com/google/firebase/firestore/remote/GrpcCallProvider.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxNToyNzoyNFrOGnur_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxNjoxOTo0MVrOGnw3VA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDMxMjU3Mg==", "bodyText": "Intentional?", "url": "https://github.com/firebase/firebase-android-sdk/pull/1534#discussion_r444312572", "createdAt": "2020-06-23T15:27:24Z", "author": {"login": "ashwinraghav"}, "path": "firebase-firestore/src/main/java/com/google/firebase/firestore/remote/GrpcCallProvider.java", "diffHunk": "@@ -125,7 +125,7 @@ private ManagedChannel initChannel(Context context, DatabaseInfo databaseInfo) {\n     // Wrap the ManagedChannelBuilder in an AndroidChannelBuilder. This allows the channel to\n     // respond more gracefully to network change events (such as switching from cell to wifi).\n     AndroidChannelBuilder androidChannelBuilder =\n-        AndroidChannelBuilder.fromBuilder(channelBuilder).context(context);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae49bfcb1064d0a6e32d3221264d597cd984659f"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDM0ODI0NA==", "bodyText": "Yes, fromBuilder is deprecated\nhttps://github.com/grpc/grpc-java/blob/master/android/src/main/java/io/grpc/android/AndroidChannelBuilder.java#L90", "url": "https://github.com/firebase/firebase-android-sdk/pull/1534#discussion_r444348244", "createdAt": "2020-06-23T16:19:41Z", "author": {"login": "rlazo"}, "path": "firebase-firestore/src/main/java/com/google/firebase/firestore/remote/GrpcCallProvider.java", "diffHunk": "@@ -125,7 +125,7 @@ private ManagedChannel initChannel(Context context, DatabaseInfo databaseInfo) {\n     // Wrap the ManagedChannelBuilder in an AndroidChannelBuilder. This allows the channel to\n     // respond more gracefully to network change events (such as switching from cell to wifi).\n     AndroidChannelBuilder androidChannelBuilder =\n-        AndroidChannelBuilder.fromBuilder(channelBuilder).context(context);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDMxMjU3Mg=="}, "originalCommit": {"oid": "ae49bfcb1064d0a6e32d3221264d597cd984659f"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2ODQ2Njc5OnYy", "diffSide": "RIGHT", "path": "protolite-well-known-types/README.md", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxNToyODoxN1rOGnuukQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxNToyODoxN1rOGnuukQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDMxMzIzMw==", "bodyText": "I think the readme files in well known types need to change in a follow up PR", "url": "https://github.com/firebase/firebase-android-sdk/pull/1534#discussion_r444313233", "createdAt": "2020-06-23T15:28:17Z", "author": {"login": "ashwinraghav"}, "path": "protolite-well-known-types/README.md", "diffHunk": "@@ -29,26 +29,22 @@ A typical grpc and protobuf-lite configuration should look like\n ```groovy", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae49bfcb1064d0a6e32d3221264d597cd984659f"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2ODQ3NDUzOnYy", "diffSide": "RIGHT", "path": "protolite-well-known-types/proguard-rules.pro", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxNTozMDowMFrOGnuzgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxNjoyNTowMVrOGnxEeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDMxNDQ5Nw==", "bodyText": "Can you add a comment on why this is needed? It seems like we did not previously had to preserve these classes", "url": "https://github.com/firebase/firebase-android-sdk/pull/1534#discussion_r444314497", "createdAt": "2020-06-23T15:30:00Z", "author": {"login": "ashwinraghav"}, "path": "protolite-well-known-types/proguard-rules.pro", "diffHunk": "@@ -19,3 +19,7 @@\n # If you keep the line number information, uncomment this to\n # hide the original source file name.\n #-renamesourcefileattribute SourceFile\n+\n+-keepclassmembers class * extends com.google.protobuf.GeneratedMessageLite {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae49bfcb1064d0a6e32d3221264d597cd984659f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDM1MTYwOA==", "bodyText": "Done.", "url": "https://github.com/firebase/firebase-android-sdk/pull/1534#discussion_r444351608", "createdAt": "2020-06-23T16:25:01Z", "author": {"login": "rlazo"}, "path": "protolite-well-known-types/proguard-rules.pro", "diffHunk": "@@ -19,3 +19,7 @@\n # If you keep the line number information, uncomment this to\n # hide the original source file name.\n #-renamesourcefileattribute SourceFile\n+\n+-keepclassmembers class * extends com.google.protobuf.GeneratedMessageLite {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDMxNDQ5Nw=="}, "originalCommit": {"oid": "ae49bfcb1064d0a6e32d3221264d597cd984659f"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2ODQ3OTQ4OnYy", "diffSide": "RIGHT", "path": "protolite-well-known-types/protolite-well-known-types.gradle", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxNTozMToxNFrOGnu20Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxNTozMjo1NVrOGnu7HQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDMxNTM0NQ==", "bodyText": "Fix indentation.", "url": "https://github.com/firebase/firebase-android-sdk/pull/1534#discussion_r444315345", "createdAt": "2020-06-23T15:31:14Z", "author": {"login": "ashwinraghav"}, "path": "protolite-well-known-types/protolite-well-known-types.gradle", "diffHunk": "@@ -45,6 +45,7 @@ android {\n         minSdkVersion project.minSdkVersion\n         versionCode 1\n         versionName '1.0'\n+\tconsumerProguardFiles 'proguard-rules.pro'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae49bfcb1064d0a6e32d3221264d597cd984659f"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDMxNjQ0NQ==", "bodyText": "I think all other SDKs have the file named proguard.txt. I think that file name may automagically be picked up. Worth confirming and removing this config", "url": "https://github.com/firebase/firebase-android-sdk/pull/1534#discussion_r444316445", "createdAt": "2020-06-23T15:32:55Z", "author": {"login": "ashwinraghav"}, "path": "protolite-well-known-types/protolite-well-known-types.gradle", "diffHunk": "@@ -45,6 +45,7 @@ android {\n         minSdkVersion project.minSdkVersion\n         versionCode 1\n         versionName '1.0'\n+\tconsumerProguardFiles 'proguard-rules.pro'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDMxNTM0NQ=="}, "originalCommit": {"oid": "ae49bfcb1064d0a6e32d3221264d597cd984659f"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2OTc5MjY2OnYy", "diffSide": "RIGHT", "path": "firebase-firestore/firebase-firestore.gradle", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMTo1NDoxMVrOGn7_1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMTo1NDoxMVrOGn7_1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUzMDY0NA==", "bodyText": "still using protobuf-lite", "url": "https://github.com/firebase/firebase-android-sdk/pull/1534#discussion_r444530644", "createdAt": "2020-06-23T21:54:11Z", "author": {"login": "thatfiredev"}, "path": "firebase-firestore/firebase-firestore.gradle", "diffHunk": "@@ -124,10 +118,10 @@ dependencies {\n     compileOnly 'javax.annotation:jsr250-api:1.0'\n \n     implementation 'androidx.annotation:annotation:1.1.0'\n-    implementation 'io.grpc:grpc-stub:1.21.0'\n-    implementation 'io.grpc:grpc-protobuf-lite:1.21.0'\n-    implementation 'io.grpc:grpc-okhttp:1.21.0'\n-    implementation 'io.grpc:grpc-android:1.21.0'\n+    implementation \"io.grpc:grpc-stub:$grpcVersion\"\n+    implementation \"io.grpc:grpc-protobuf-lite:$grpcVersion\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a7ff1bd30a046d8196e9676ef8d4b968e15bf340"}, "originalPosition": 54}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2OTc5Mzc3OnYy", "diffSide": "RIGHT", "path": "firebase-inappmessaging/firebase-inappmessaging.gradle", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMTo1NDozOVrOGn8Aig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMTo1NDozOVrOGn8Aig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUzMDgyNg==", "bodyText": "still using protobuf-lite", "url": "https://github.com/firebase/firebase-android-sdk/pull/1534#discussion_r444530826", "createdAt": "2020-06-23T21:54:39Z", "author": {"login": "thatfiredev"}, "path": "firebase-inappmessaging/firebase-inappmessaging.gradle", "diffHunk": "@@ -123,10 +116,10 @@ dependencies {\n     compileOnly 'javax.annotation:jsr250-api:1.0'\n \n     implementation 'com.google.android.gms:play-services-tasks:17.0.2'\n-    implementation 'io.grpc:grpc-stub:1.21.0'\n-    implementation 'io.grpc:grpc-protobuf-lite:1.21.0'\n-    implementation 'io.grpc:grpc-okhttp:1.21.0'\n-    implementation 'com.google.dagger:dagger:2.27'\n+    implementation \"io.grpc:grpc-stub:$grpcVersion\"\n+    implementation \"io.grpc:grpc-protobuf-lite:$grpcVersion\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a7ff1bd30a046d8196e9676ef8d4b968e15bf340"}, "originalPosition": 51}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1348, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}