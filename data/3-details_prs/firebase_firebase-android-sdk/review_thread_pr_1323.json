{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0OTcyMzAz", "number": 1323, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxOTowNzoyNVrODl6GMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxOTowOTozMFrODl6IYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMDc1NzYyOnYy", "diffSide": "RIGHT", "path": "firebase-crashlytics/src/main/java/com/google/firebase/crashlytics/core/CrashlyticsController.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxOTowNzoyNVrOFzECFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQyMjoyMDo1NFrOFzJMYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTA4Nzc2NQ==", "bodyText": "can you add some justification for why this is an else if? why do we only do native stuff if includeCurrent = false? Why do we not do it if includeCurrent = false?", "url": "https://github.com/firebase/firebase-android-sdk/pull/1323#discussion_r389087765", "createdAt": "2020-03-06T19:07:25Z", "author": {"login": "jakeouellette"}, "path": "firebase-crashlytics/src/main/java/com/google/firebase/crashlytics/core/CrashlyticsController.java", "diffHunk": "@@ -858,6 +858,9 @@ private void doCloseSessions(int maxCustomExceptionEvents, boolean includeCurren\n \n     if (includeCurrent) {\n       reportingCoordinator.onEndSession();\n+    } else if (nativeComponent.hasCrashDataForSession(mostRecentSessionIdToClose)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d7cce192defdc89417e49dc5b6c7d419832fde3"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE1MjAwMg==", "bodyText": "Yeah, this is one of those \"the code needs more cleaning\" issues. includeCurrent implies this is being run at Java crash time. We only want to run this code for the startup-time initialize.", "url": "https://github.com/firebase/firebase-android-sdk/pull/1323#discussion_r389152002", "createdAt": "2020-03-06T21:26:14Z", "author": {"login": "mrwillis21"}, "path": "firebase-crashlytics/src/main/java/com/google/firebase/crashlytics/core/CrashlyticsController.java", "diffHunk": "@@ -858,6 +858,9 @@ private void doCloseSessions(int maxCustomExceptionEvents, boolean includeCurren\n \n     if (includeCurrent) {\n       reportingCoordinator.onEndSession();\n+    } else if (nativeComponent.hasCrashDataForSession(mostRecentSessionIdToClose)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTA4Nzc2NQ=="}, "originalCommit": {"oid": "3d7cce192defdc89417e49dc5b6c7d419832fde3"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE3MjMyMA==", "bodyText": "Added a comment.", "url": "https://github.com/firebase/firebase-android-sdk/pull/1323#discussion_r389172320", "createdAt": "2020-03-06T22:20:54Z", "author": {"login": "mrwillis21"}, "path": "firebase-crashlytics/src/main/java/com/google/firebase/crashlytics/core/CrashlyticsController.java", "diffHunk": "@@ -858,6 +858,9 @@ private void doCloseSessions(int maxCustomExceptionEvents, boolean includeCurren\n \n     if (includeCurrent) {\n       reportingCoordinator.onEndSession();\n+    } else if (nativeComponent.hasCrashDataForSession(mostRecentSessionIdToClose)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTA4Nzc2NQ=="}, "originalCommit": {"oid": "3d7cce192defdc89417e49dc5b6c7d419832fde3"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMDc2MzIxOnYy", "diffSide": "RIGHT", "path": "firebase-crashlytics/src/main/java/com/google/firebase/crashlytics/core/CrashlyticsController.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQxOTowOTozMFrOFzEF2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQyMToyNzozMFrOFzH-_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTA4ODcyOQ==", "bodyText": "before we were returning a boolean and logging based on it, do we need to do an equivalent?", "url": "https://github.com/firebase/firebase-android-sdk/pull/1323#discussion_r389088729", "createdAt": "2020-03-06T19:09:30Z", "author": {"login": "jakeouellette"}, "path": "firebase-crashlytics/src/main/java/com/google/firebase/crashlytics/core/CrashlyticsController.java", "diffHunk": "@@ -858,6 +858,9 @@ private void doCloseSessions(int maxCustomExceptionEvents, boolean includeCurren\n \n     if (includeCurrent) {\n       reportingCoordinator.onEndSession();\n+    } else if (nativeComponent.hasCrashDataForSession(mostRecentSessionIdToClose)) {\n+      finalizePreviousNativeSession(mostRecentSessionIdToClose);\n+      nativeComponent.finalizeSession(mostRecentSessionIdToClose);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d7cce192defdc89417e49dc5b6c7d419832fde3"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE1MjUxMQ==", "bodyText": "Yeah, no harm in that.", "url": "https://github.com/firebase/firebase-android-sdk/pull/1323#discussion_r389152511", "createdAt": "2020-03-06T21:27:30Z", "author": {"login": "mrwillis21"}, "path": "firebase-crashlytics/src/main/java/com/google/firebase/crashlytics/core/CrashlyticsController.java", "diffHunk": "@@ -858,6 +858,9 @@ private void doCloseSessions(int maxCustomExceptionEvents, boolean includeCurren\n \n     if (includeCurrent) {\n       reportingCoordinator.onEndSession();\n+    } else if (nativeComponent.hasCrashDataForSession(mostRecentSessionIdToClose)) {\n+      finalizePreviousNativeSession(mostRecentSessionIdToClose);\n+      nativeComponent.finalizeSession(mostRecentSessionIdToClose);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTA4ODcyOQ=="}, "originalCommit": {"oid": "3d7cce192defdc89417e49dc5b6c7d419832fde3"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 845, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}