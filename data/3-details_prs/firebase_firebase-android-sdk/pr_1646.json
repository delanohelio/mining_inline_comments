{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzNDE5MjUx", "number": 1646, "title": "Send the FIS auth token in the RC fetch headers.", "bodyText": "", "createdAt": "2020-06-12T01:49:40Z", "url": "https://github.com/firebase/firebase-android-sdk/pull/1646", "merged": true, "mergeCommit": {"oid": "71a474013d38c29cd41a03fe5bd0ddb9d4ff5409"}, "closed": true, "closedAt": "2020-06-23T23:14:13Z", "author": {"login": "danasilver"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqZB0hgBqjM0MzY2MDkwMzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABct7XcmgH2gAyNDMzNDE5MjUxOmRhZmRhNTNhMzk3Y2Y1YTJlYTY1YzZiYjU4MTE5Mzk5ZDFmNDQ4OTQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7cacea586ee410ca9f9dfc902acdccd4f95843e7", "author": {"user": {"login": "danasilver", "name": "Dana Silver"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/7cacea586ee410ca9f9dfc902acdccd4f95843e7", "committedDate": "2020-06-12T01:48:49Z", "message": "Send the FIS auth token in the RC fetch headers."}, "afterCommit": {"oid": "a3735b80fd060f61c6dadf28ad98121bd8abf2fb", "author": {"user": {"login": "danasilver", "name": "Dana Silver"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/a3735b80fd060f61c6dadf28ad98121bd8abf2fb", "committedDate": "2020-06-12T02:00:05Z", "message": "Send the FIS auth token in the RC fetch headers."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a3735b80fd060f61c6dadf28ad98121bd8abf2fb", "author": {"user": {"login": "danasilver", "name": "Dana Silver"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/a3735b80fd060f61c6dadf28ad98121bd8abf2fb", "committedDate": "2020-06-12T02:00:05Z", "message": "Send the FIS auth token in the RC fetch headers."}, "afterCommit": {"oid": "4ce3c6a366bc95a618878919fc4fde200a83e540", "author": {"user": {"login": "danasilver", "name": "Dana Silver"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/4ce3c6a366bc95a618878919fc4fde200a83e540", "committedDate": "2020-06-17T23:56:05Z", "message": "Send the FIS auth token in the RC fetch headers."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "666d6367636ae93a3a90af596362e73e2d87cf9c", "author": {"user": {"login": "danasilver", "name": "Dana Silver"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/666d6367636ae93a3a90af596362e73e2d87cf9c", "committedDate": "2020-06-18T20:14:14Z", "message": "Migrate RC Bandwagoner app to direct FIS dependency."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f8959fcb619f27167b52f189f16a0c000fd80cd", "author": {"user": {"login": "danasilver", "name": "Dana Silver"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/3f8959fcb619f27167b52f189f16a0c000fd80cd", "committedDate": "2020-06-18T20:14:14Z", "message": "Remove google-services plugin from checked in bandwagoner app."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5092a9587b3598b95e5f20bfe1974e75379db6f", "author": {"user": {"login": "danasilver", "name": "Dana Silver"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/e5092a9587b3598b95e5f20bfe1974e75379db6f", "committedDate": "2020-06-18T20:14:14Z", "message": "Update docs to reference Installations SDK."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a470ea5694e0ba5114cfe8278c69a19cbc63e0a0", "author": {"user": {"login": "danasilver", "name": "Dana Silver"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/a470ea5694e0ba5114cfe8278c69a19cbc63e0a0", "committedDate": "2020-06-18T20:14:14Z", "message": "Send the FIS auth token in the RC fetch headers."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4ce3c6a366bc95a618878919fc4fde200a83e540", "author": {"user": {"login": "danasilver", "name": "Dana Silver"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/4ce3c6a366bc95a618878919fc4fde200a83e540", "committedDate": "2020-06-17T23:56:05Z", "message": "Send the FIS auth token in the RC fetch headers."}, "afterCommit": {"oid": "a470ea5694e0ba5114cfe8278c69a19cbc63e0a0", "author": {"user": {"login": "danasilver", "name": "Dana Silver"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/a470ea5694e0ba5114cfe8278c69a19cbc63e0a0", "committedDate": "2020-06-18T20:14:14Z", "message": "Send the FIS auth token in the RC fetch headers."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNzI5NDE4", "url": "https://github.com/firebase/firebase-android-sdk/pull/1646#pullrequestreview-433729418", "createdAt": "2020-06-19T00:27:05Z", "commit": {"oid": "a470ea5694e0ba5114cfe8278c69a19cbc63e0a0"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwMDoyNzowNVrOGmES8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwMDozMzowMlrOGmEYhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjU2OTQ1Nw==", "bodyText": "Thinking (no action required): this is comparable to usage of the same header in RC's iOS SDK: https://github.com/firebase/firebase-ios-sdk/blob/c07c89ee7582e84da1c5aafaa94b38a53bcfbdc2/FirebaseRemoteConfig/Sources/RCNFetch.m#L49", "url": "https://github.com/firebase/firebase-android-sdk/pull/1646#discussion_r442569457", "createdAt": "2020-06-19T00:27:05Z", "author": {"login": "erikeldridge"}, "path": "firebase-config/src/main/java/com/google/firebase/remoteconfig/internal/ConfigFetchHttpClient.java", "diffHunk": "@@ -78,6 +78,8 @@\n   private static final String X_ANDROID_PACKAGE_HEADER = \"X-Android-Package\";\n   private static final String X_ANDROID_CERT_HEADER = \"X-Android-Cert\";\n   private static final String X_GOOGLE_GFE_CAN_RETRY = \"X-Google-GFE-Can-Retry\";\n+  private static final String INSTALLATIONS_AUTH_TOKEN_HEADER =\n+      \"X-Goog-Firebase-Installations-Auth\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a470ea5694e0ba5114cfe8278c69a19cbc63e0a0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjU3MDg4Nw==", "bodyText": "Thinking (no action required): this is a public error message, so the phrasing should match the public docs. The FirebaseInstallations.getToken docs describe \"authentication token for the Firebase installation\", which matches the phrasing here.", "url": "https://github.com/firebase/firebase-android-sdk/pull/1646#discussion_r442570887", "createdAt": "2020-06-19T00:33:02Z", "author": {"login": "erikeldridge"}, "path": "firebase-config/src/test/java/com/google/firebase/remoteconfig/internal/ConfigFetchHttpClientTest.java", "diffHunk": "@@ -240,22 +242,22 @@ public void fetch_localeUsesToStringBelowLollipop() throws Exception {\n   }\n \n   @Test\n-  public void fetch_instanceIdIsNull_throwsFRCClientException() throws Exception {\n+  public void fetch_installationIdIsNull_throwsFRCClientException() throws Exception {\n     setServerResponseTo(noChangeResponseBody, SECOND_ETAG);\n \n     FirebaseRemoteConfigClientException frcException =\n-        assertThrows(FirebaseRemoteConfigClientException.class, () -> fetchWithoutIid());\n+        assertThrows(FirebaseRemoteConfigClientException.class, () -> fetchWithoutInstallationId());\n \n-    assertThat(frcException).hasMessageThat().contains(\"instance id is null\");\n+    assertThat(frcException).hasMessageThat().contains(\"installation id is null\");\n   }\n \n   @Test\n-  public void fetch_instanceIdTokenIsNull_doesNotThrowException() throws Exception {\n+  public void fetch_installationAuthTokenIsNull_doesNotThrowException() throws Exception {\n     setServerResponseTo(noChangeResponseBody, SECOND_ETAG);\n \n-    FetchResponse fetchResponse = fetchWithoutIidToken();\n+    FetchResponse fetchResponse = fetchWithoutInstallationAuthToken();\n \n-    assertWithMessage(\"Fetch() failed with null instance id token!\")\n+    assertWithMessage(\"Fetch() failed with null installation auth token!\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a470ea5694e0ba5114cfe8278c69a19cbc63e0a0"}, "originalPosition": 56}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9736d01eb796a0a251967a5bcfd4712c4dfd9596", "author": {"user": {"login": "danasilver", "name": "Dana Silver"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/9736d01eb796a0a251967a5bcfd4712c4dfd9596", "committedDate": "2020-06-19T17:07:29Z", "message": "Merge branch 'master' into rc-fis-token-header"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffcbb9dbd2c9fc0af70b1418962f774f497df956", "author": {"user": {"login": "danasilver", "name": "Dana Silver"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/ffcbb9dbd2c9fc0af70b1418962f774f497df956", "committedDate": "2020-06-19T17:18:25Z", "message": "Merge branch 'master' into rc-fis-token-header"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1MTYzMTM5", "url": "https://github.com/firebase/firebase-android-sdk/pull/1646#pullrequestreview-435163139", "createdAt": "2020-06-22T18:12:05Z", "commit": {"oid": "ffcbb9dbd2c9fc0af70b1418962f774f497df956"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxODoxMjowNVrOGnLwNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxODoxMjowNVrOGnLwNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzc0MDIxNQ==", "bodyText": "We might need some clarity here. The javadoc gives the impression that INSTANCE_ID_TOKEN can be fetched from FIS SDK, which is incorrect. We can explicitly call out INSTANCE_ID_TOKEN is replaced by  installation auth token fetched from FIS SDK.", "url": "https://github.com/firebase/firebase-android-sdk/pull/1646#discussion_r443740215", "createdAt": "2020-06-22T18:12:05Z", "author": {"login": "ankitaj224"}, "path": "firebase-config/src/main/java/com/google/firebase/remoteconfig/RemoteConfigConstants.java", "diffHunk": "@@ -31,6 +31,10 @@\n   /**\n    * Keys of fields in the Fetch request body that the client sends to the Firebase Remote Config\n    * server.\n+   *\n+   * <p>{@code INSTANCE_ID} and {@code INSTANCE_ID_TOKEN} are legacy names for the fields that used", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffcbb9dbd2c9fc0af70b1418962f774f497df956"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "937f3f8261920d5880cb6090bd56c983ed00e510", "author": {"user": {"login": "danasilver", "name": "Dana Silver"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/937f3f8261920d5880cb6090bd56c983ed00e510", "committedDate": "2020-06-23T00:35:17Z", "message": "Update javadoc about installation auth token coming from FIS."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "892e7505bffd8a9c85861d3b4747ba1fae6de9dc", "author": {"user": {"login": "danasilver", "name": "Dana Silver"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/892e7505bffd8a9c85861d3b4747ba1fae6de9dc", "committedDate": "2020-06-23T00:47:16Z", "message": "Merge branch 'master' into rc-fis-token-header"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4221b46bbf8ea096bb6b58c86a83a9243357074e", "author": {"user": {"login": "danasilver", "name": "Dana Silver"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/4221b46bbf8ea096bb6b58c86a83a9243357074e", "committedDate": "2020-06-23T01:17:02Z", "message": "Fix FIS precondition tests with API key."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1080fa7e56d2ebe2ac4a465e09c3421d00ef16e3", "author": {"user": {"login": "danasilver", "name": "Dana Silver"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/1080fa7e56d2ebe2ac4a465e09c3421d00ef16e3", "committedDate": "2020-06-23T01:29:10Z", "message": "Use properly formatted API Key and App ID in ktx tests."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dafda53a397cf5a2ea65c6bb58119399d1f44894", "author": {"user": {"login": "danasilver", "name": "Dana Silver"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/dafda53a397cf5a2ea65c6bb58119399d1f44894", "committedDate": "2020-06-23T01:42:41Z", "message": "Use valid key and project id in integ test."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2539, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}