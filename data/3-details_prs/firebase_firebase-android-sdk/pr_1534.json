{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0OTAyODg1", "number": 1534, "title": "Migrating to new protolite runtime", "bodyText": "Required reading : Protos in dependencies \n\n\n\nconfiguration\nprotobuf\nimplementation\n\n\n\n\n.proto files available to proto compiler\n\u2705\n\u2705\n\n\nGenerated classes compiled into artifact\n\u2705\n\u274c\n\n\n\nProblem 1 - Choice of runtime\nThe protobuf-lite runtime has been renamed to protobuf-javalite. These libraries are incompatible since generated code has not been repackaged as part of the migration. Libraries that use protobuf-lite have one of three choices\n\nNever migrate to javalite and sacrifice any fixes made upstream.\nMigrate to javalite and potentially break downstream consumers using older versions of the runtime.\nRepackage the new runtime and ship a vendored version.\n\nWe are going with 2, until we move away from protos all together. cc @vkryachko\nCurrently some customers resort to fatjaring. Even with our solution, this may not go away for customers who are stuck on older runtimes.\nProblem 2  - com.google.firebase:protolite-well-known-types\nOur well known types library comprises of the set of .proto and files and the corresponding .class files that firebase libraries depend on. These were scoped to 2 conceptual sets\n\nProto's well known types, brought in as  protobuf 'com.google.protobuf:protobuf-java:3.6.1'\n2 . Cloud's backend protos, brought in as protobuf 'com.google.api.grpc:proto-google-common-protos:1.12.0'\n\nOur well knon types library helps firestore and inappmessaging import protos, as well as take run time dependencies on them.\nIn addition to renaming the runtime artifact, the javalite runtime now includes well known types class files and .proto files i.e 1. above.\n\n\n\nLibrary\nprotobuf-lite\nprotobuf-javalite\n\n\n\n\nContain the .class files for well known types\n\u274c\n\u2705\n\n\nContain the .proto files for well known types\n\u274c\n\u2705**\n\n\n\n**javalite has the classfiles for Duration, but not the .proto file. This seems like a bug\nAs a result, we are going to have to figure out a way to have the \"Duration.proto\" be available to firebase projects and the protoc compiler, but never shipping its class files, since that would conflict with the javalite runtime.\nProblem 3 Descriptor.proto\nIn addition to the well known types, firebase libraries depend on descriptor.proto, which is not a well known type and we need to have this be available at compile (and runtime) to firebase libraries.\nSolution\nWe change the well known types libraries in the following ways.\n\n\nWe remove protobuf 'com.google.protobuf:protobuf-java:3.6.1' (previously used to vendor the well known types), since we now use implementation 'com.google.protobuf:protobuf-javalite:3.11.0' that contains these proto and class files.\n\n\nTo solve Problem 3, we manually delete the Duration files in a post compile phase.\n\n\nWe continue vendoring in the  cloud protos protobuf(\"com.google.api.grpc:proto-google-common-protos:1.17.0\")\n\n\nAction items\n\nWrite some firehorn tests for fiam and remote config. These tests for firestore were the only tests that caught the incompatibilities. See commit history.\nInvestigate why we need to continue vendoring cloud protos. Ideally, we should be able to just to take a dep on it.\n\nimplementation(\"com.google.api.grpc:proto-google-common-protos:1.17.0\"){\n        exclude group: \"com.google.protobuf\", module: \"protobuf-java\"\n}\n\n\nIs there a cleaner approach than having to delete these class files ? These are the options that failed\nprotobuf files('lib/')\ncompile files('lib/')\nIt seems like the compile dep on \"files\" will bring in the class files into the aar.", "createdAt": "2020-05-07T20:28:03Z", "url": "https://github.com/firebase/firebase-android-sdk/pull/1534", "merged": true, "mergeCommit": {"oid": "037282ff152b85e54b6e993357523e214a5e4665"}, "closed": true, "closedAt": "2020-06-23T17:16:32Z", "author": {"login": "ashwinraghav"}, "timelineItems": {"totalCount": 96, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb6viieAH2gAyNDE0OTAyODg1OmUxNTZmNGUxYzE1MzM0MzM2OTU2ODZlNDZhZGJhZjVjYmNhZDhlYmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcuMtsRAFqTQzNjE4NjAwMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e156f4e1c1533433695686e46adbaf5cbcad8ebb", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/e156f4e1c1533433695686e46adbaf5cbcad8ebb", "committedDate": "2020-01-16T01:05:48Z", "message": "Upgrade Firestore's GRPC to 1.26"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6540f8a7423be5ebae6fcd9ab9dc76ef00cc1c5f", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/6540f8a7423be5ebae6fcd9ab9dc76ef00cc1c5f", "committedDate": "2020-01-16T01:53:12Z", "message": "Bump prolite GRPC version"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a0565599ed2cd4285e38256c55db860d24b7e0a", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/4a0565599ed2cd4285e38256c55db860d24b7e0a", "committedDate": "2020-01-16T18:23:48Z", "message": "fix other callers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c053271eaa9d41e8d311fd7c2843a3fd5d028498", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/c053271eaa9d41e8d311fd7c2843a3fd5d028498", "committedDate": "2020-01-16T18:25:57Z", "message": "remove javalite"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf1af57892da0c6c5b7149f79e332243802d5191", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/bf1af57892da0c6c5b7149f79e332243802d5191", "committedDate": "2020-01-16T18:43:22Z", "message": "Use the same Guava"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70e43a474b697c8f6d3502bec413a77580497c7a", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/70e43a474b697c8f6d3502bec413a77580497c7a", "committedDate": "2020-01-16T18:57:05Z", "message": "Google truth"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a8c0e72436e1c4082f6cb59798a00e8b447e7b9", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/5a8c0e72436e1c4082f6cb59798a00e8b447e7b9", "committedDate": "2020-01-16T19:12:12Z", "message": "GRPC testing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c928b5a20e47dadb9e7a2492729cdc99f0f466fe", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/c928b5a20e47dadb9e7a2492729cdc99f0f466fe", "committedDate": "2020-01-16T19:26:19Z", "message": "Fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eef2065ca2acbd2554df69383a5648e6f5ee6daa", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/eef2065ca2acbd2554df69383a5648e6f5ee6daa", "committedDate": "2020-01-16T19:41:13Z", "message": "..."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7c720774c7818f1bdc6e508f2aac3af0ae58112", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/f7c720774c7818f1bdc6e508f2aac3af0ae58112", "committedDate": "2020-01-16T19:49:18Z", "message": "fix iam"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0eb67c0b08e1293edd1b763d8a57c02d4eb73230", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/0eb67c0b08e1293edd1b763d8a57c02d4eb73230", "committedDate": "2020-01-16T19:50:01Z", "message": "fix firestore"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0e76a76fb8e3857a58fd4453060243ac4b3b84e", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/f0e76a76fb8e3857a58fd4453060243ac4b3b84e", "committedDate": "2020-01-17T19:00:07Z", "message": "More attempts that failed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9381fc89ddb56d083b086a5b7ad927d1be56f247", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/9381fc89ddb56d083b086a5b7ad927d1be56f247", "committedDate": "2020-03-31T21:05:48Z", "message": "Merge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8154681709a659a191add78183ca979488705323", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/8154681709a659a191add78183ca979488705323", "committedDate": "2020-04-01T16:26:00Z", "message": "WIP"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "362c82e320f6f439d2e7d814e71d8eff87551e4f", "author": {"user": {"login": "schmidt-sebastian", "name": "Sebastian Schmidt"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/362c82e320f6f439d2e7d814e71d8eff87551e4f", "committedDate": "2020-04-15T04:06:40Z", "message": "merge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9bb13622a5af381f08bf9044c84420b6398e014", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/a9bb13622a5af381f08bf9044c84420b6398e014", "committedDate": "2020-05-06T15:35:37Z", "message": "Merge branch 'master' into mrschmidt/upgradegrpc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4bd01cd65176d681ba8ca26aae93025a3c08abf0", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/4bd01cd65176d681ba8ca26aae93025a3c08abf0", "committedDate": "2020-05-07T19:32:31Z", "message": "Merge branch 'master' into mrschmidt/upgradegrpc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be21f38d2db611cfb14b65225829437cdb47c639", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/be21f38d2db611cfb14b65225829437cdb47c639", "committedDate": "2020-05-07T19:37:38Z", "message": "grpc & protobuf-javalite"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bf7a7c7cce8654ac855fa034e067cb113d7aa48", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/5bf7a7c7cce8654ac855fa034e067cb113d7aa48", "committedDate": "2020-05-07T19:44:20Z", "message": "Fix components & installations gradle error in fiamui-app."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b328f5b2243a70e010f123738dae95cc326b3355", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/b328f5b2243a70e010f123738dae95cc326b3355", "committedDate": "2020-05-07T20:26:05Z", "message": "Moving back to proto"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3ODEyODEw", "url": "https://github.com/firebase/firebase-android-sdk/pull/1534#pullrequestreview-407812810", "createdAt": "2020-05-07T20:30:04Z", "commit": {"oid": "b328f5b2243a70e010f123738dae95cc326b3355"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QyMDozMDowNFrOGSPFMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QyMDozMDowNFrOGSPFMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc3NDY0MQ==", "bodyText": "The protobuf declaration is different from a implementation.\nIIRC, this will simply make the proto files in the artifact available to all consumers of this dep. It should not vendor the protos itself. It should simply make it available to the proto compiler", "url": "https://github.com/firebase/firebase-android-sdk/pull/1534#discussion_r421774641", "createdAt": "2020-05-07T20:30:04Z", "author": {"login": "ashwinraghav"}, "path": "protolite-well-known-types/protolite-well-known-types.gradle", "diffHunk": "@@ -50,13 +50,9 @@ android {\n     sourceSets.main.resources.includes = ['**/*.proto']\n }\n \n-configurations.all {\n-    exclude group: \"com.google.protobuf\", module: \"protobuf-java\"\n-}\n-\n dependencies {\n     implementation 'com.google.protobuf:protobuf-javalite:3.11.0'\n-    protobuf 'com.google.protobuf:protobuf-javalite:3.11.0'\n+    protobuf 'com.google.protobuf:protobuf-java:3.11.4'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b328f5b2243a70e010f123738dae95cc326b3355"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "712f3d9e4b86e0f77bfcbc3e6f69619890a28eb5", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/712f3d9e4b86e0f77bfcbc3e6f69619890a28eb5", "committedDate": "2020-05-07T23:27:46Z", "message": "Removing grpc protos"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97e0a381781103e062cb0a616a555065750718e4", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/97e0a381781103e062cb0a616a555065750718e4", "committedDate": "2020-05-07T23:34:59Z", "message": "1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ca3f27a46ff54086a0fefa66e571b4ddd84e400", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/4ca3f27a46ff54086a0fefa66e571b4ddd84e400", "committedDate": "2020-05-08T02:46:48Z", "message": "Fixing smoke tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02d996bfc68f1c4c9137ae83954ce04c59cd7e1e", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/02d996bfc68f1c4c9137ae83954ce04c59cd7e1e", "committedDate": "2020-05-08T02:54:56Z", "message": "Fixing smoke tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ccc2e3fe3be4ad22d89c9422211f0018abf0f3b", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/4ccc2e3fe3be4ad22d89c9422211f0018abf0f3b", "committedDate": "2020-05-08T03:50:29Z", "message": "Test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f31ba757ca4d4c3de92d31d64629803d367e7d1d", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/f31ba757ca4d4c3de92d31d64629803d367e7d1d", "committedDate": "2020-05-08T04:04:12Z", "message": "test2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d248cddd69792e120a616f1e11181365dd0f3e7f", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/d248cddd69792e120a616f1e11181365dd0f3e7f", "committedDate": "2020-05-08T05:45:03Z", "message": "Cherry picking cloud protos"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9def45c548bd91e1331958042a63e12e5b4a805", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/a9def45c548bd91e1331958042a63e12e5b4a805", "committedDate": "2020-05-08T05:46:34Z", "message": "Merge branch 'rl.my_grpc' into ashwinraghav.grpc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "acc25458c2209aee9cedc87720cd686dbbef0a88", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/acc25458c2209aee9cedc87720cd686dbbef0a88", "committedDate": "2020-05-08T06:09:28Z", "message": "Descriptor"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e17d26e6a541dbfaa53a3021e121dea20a831b5a", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/e17d26e6a541dbfaa53a3021e121dea20a831b5a", "committedDate": "2020-05-08T16:29:51Z", "message": "Adding only cloud protos"}, "afterCommit": {"oid": "ef0184b586c3eda9da5e92e178b7879f6630f0b3", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/ef0184b586c3eda9da5e92e178b7879f6630f0b3", "committedDate": "2020-05-08T16:46:51Z", "message": "2. Adding only cloud protos"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ef0184b586c3eda9da5e92e178b7879f6630f0b3", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/ef0184b586c3eda9da5e92e178b7879f6630f0b3", "committedDate": "2020-05-08T16:46:51Z", "message": "2. Adding only cloud protos"}, "afterCommit": {"oid": "fdc2d67e20a8b19e571293ac3431b38ec07067a0", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/fdc2d67e20a8b19e571293ac3431b38ec07067a0", "committedDate": "2020-05-08T16:51:06Z", "message": "1. No proto deps\n\nFailure\ngoogle/firestore/v1/document.proto:20:1: Import \"google/api/annotations.proto\" was not found or had errors.\ngoogle/firestore/v1/document.proto:23:1: Import \"google/type/latlng.proto\" was not found or had errors.\ngoogle/firestore/v1/document.proto:123:5: \"google.type.LatLng\" is not defined.\ngoogle/firebase/firestore/proto/maybe_document.proto:24:1: Import \"google/firestore/v1/document.proto\" was not found or had errors.\ngoogle/firebase/firestore/proto/maybe_document.proto:57:5: \"google.firestore.v1.Document\" is not defined."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fdc2d67e20a8b19e571293ac3431b38ec07067a0", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/fdc2d67e20a8b19e571293ac3431b38ec07067a0", "committedDate": "2020-05-08T16:51:06Z", "message": "1. No proto deps\n\nFailure\ngoogle/firestore/v1/document.proto:20:1: Import \"google/api/annotations.proto\" was not found or had errors.\ngoogle/firestore/v1/document.proto:23:1: Import \"google/type/latlng.proto\" was not found or had errors.\ngoogle/firestore/v1/document.proto:123:5: \"google.type.LatLng\" is not defined.\ngoogle/firebase/firestore/proto/maybe_document.proto:24:1: Import \"google/firestore/v1/document.proto\" was not found or had errors.\ngoogle/firebase/firestore/proto/maybe_document.proto:57:5: \"google.firestore.v1.Document\" is not defined."}, "afterCommit": {"oid": "e6191f2c2e0b21cd89992960e3e24ea76f9ae054", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/e6191f2c2e0b21cd89992960e3e24ea76f9ae054", "committedDate": "2020-05-08T17:36:36Z", "message": "2. Adding only cloud protos\n\nSmoke test failures\nhttps://android-ci.firebaseopensource.com/view/gcs/android-ci/pr-logs/pull/firebase_firebase-android-sdk/1534/smoke-tests/1258800815649329152/"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e6191f2c2e0b21cd89992960e3e24ea76f9ae054", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/e6191f2c2e0b21cd89992960e3e24ea76f9ae054", "committedDate": "2020-05-08T17:36:36Z", "message": "2. Adding only cloud protos\n\nSmoke test failures\nhttps://android-ci.firebaseopensource.com/view/gcs/android-ci/pr-logs/pull/firebase_firebase-android-sdk/1534/smoke-tests/1258800815649329152/"}, "afterCommit": {"oid": "a4d9c253b292620053e31d247520622e3a89b99c", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/a4d9c253b292620053e31d247520622e3a89b99c", "committedDate": "2020-05-08T18:01:10Z", "message": "1. No proto deps\n\nFailure\nhttps://android-ci.firebaseopensource.com/view/gcs/android-ci/pr-logs/pull/firebase_firebase-android-sdk/1534/smoke-tests/1258804715634823168/\n\ngoogle/firestore/v1/document.proto:20:1: Import \"google/api/annotations.proto\" was not found or had errors.\ngoogle/firestore/v1/document.proto:23:1: Import \"google/type/latlng.proto\" was not found or had errors.\ngoogle/firestore/v1/document.proto:123:5: \"google.type.LatLng\" is not defined.\ngoogle/firebase/firestore/proto/maybe_document.proto:24:1: Import \"google/firestore/v1/document.proto\" was not found or had errors.\ngoogle/firebase/firestore/proto/maybe_document.proto:57:5: \"google.firestore.v1.Document\" is not defined."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6054adb84fb3a0dd8b69d948ed97609b56660375", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/6054adb84fb3a0dd8b69d948ed97609b56660375", "committedDate": "2020-05-08T19:17:00Z", "message": "Cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dad7e6b191b9b5d2d5cbfccffaa2485d55dec75d", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/dad7e6b191b9b5d2d5cbfccffaa2485d55dec75d", "committedDate": "2020-05-08T19:17:49Z", "message": "1. No proto deps\n\nFailure\nhttps://android-ci.firebaseopensource.com/view/gcs/android-ci/pr-logs/pull/firebase_firebase-android-sdk/1534/smoke-tests/1258819568042774532/\ngoogle/firestore/v1/document.proto:20:1: Import \"google/api/annotations.proto\" was not found or had errors.\ngoogle/firestore/v1/document.proto:23:1: Import \"google/type/latlng.proto\" was not found or had errors.\ngoogle/firestore/v1/document.proto:123:5: \"google.type.LatLng\" is not defined.\ngoogle/firebase/firestore/proto/maybe_document.proto:24:1: Import \"google/firestore/v1/document.proto\" was not found or had errors.\ngoogle/firebase/firestore/proto/maybe_document.proto:57:5: \"google.firestore.v1.Document\" is not defined."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa922bc3aadcaf8b0b21f667ac8ff195c439c4d7", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/fa922bc3aadcaf8b0b21f667ac8ff195c439c4d7", "committedDate": "2020-05-08T19:17:59Z", "message": "2. Adding only cloud protos\n\nSmoke test failures\nhttps://android-ci.firebaseopensource.com/view/gcs/android-ci/pr-logs/pull/firebase_firebase-android-sdk/1534/smoke-tests/1258800815649329152/"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a4d9c253b292620053e31d247520622e3a89b99c", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/a4d9c253b292620053e31d247520622e3a89b99c", "committedDate": "2020-05-08T18:01:10Z", "message": "1. No proto deps\n\nFailure\nhttps://android-ci.firebaseopensource.com/view/gcs/android-ci/pr-logs/pull/firebase_firebase-android-sdk/1534/smoke-tests/1258804715634823168/\n\ngoogle/firestore/v1/document.proto:20:1: Import \"google/api/annotations.proto\" was not found or had errors.\ngoogle/firestore/v1/document.proto:23:1: Import \"google/type/latlng.proto\" was not found or had errors.\ngoogle/firestore/v1/document.proto:123:5: \"google.type.LatLng\" is not defined.\ngoogle/firebase/firestore/proto/maybe_document.proto:24:1: Import \"google/firestore/v1/document.proto\" was not found or had errors.\ngoogle/firebase/firestore/proto/maybe_document.proto:57:5: \"google.firestore.v1.Document\" is not defined."}, "afterCommit": {"oid": "fa922bc3aadcaf8b0b21f667ac8ff195c439c4d7", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/fa922bc3aadcaf8b0b21f667ac8ff195c439c4d7", "committedDate": "2020-05-08T19:17:59Z", "message": "2. Adding only cloud protos\n\nSmoke test failures\nhttps://android-ci.firebaseopensource.com/view/gcs/android-ci/pr-logs/pull/firebase_firebase-android-sdk/1534/smoke-tests/1258800815649329152/"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3804e948d6eb3141d481933be54a15436fce5a75", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/3804e948d6eb3141d481933be54a15436fce5a75", "committedDate": "2020-05-08T20:39:21Z", "message": "3. Upgrading proto toolchain"}, "afterCommit": {"oid": "e70e3110952675456f790fdee292cf02d6ce5991", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/e70e3110952675456f790fdee292cf02d6ce5991", "committedDate": "2020-05-08T20:43:23Z", "message": "3. Upgrading proto toolchain"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "90308506548973a7353a6827916a4cbca9e74ec1", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/90308506548973a7353a6827916a4cbca9e74ec1", "committedDate": "2020-05-08T20:51:23Z", "message": "3. Upgrading proto toolchain\n\nSince the cloud protos brings in the proto dep, the resulting well known types has conflicting classes\nFailures\nhttps://android-ci.firebaseopensource.com/view/gcs/android-ci/pr-logs/pull/firebase_firebase-android-sdk/1534/smoke-tests/1258860209397305345/\n java.lang.RuntimeException: Duplicate class com.google.protobuf.Any found in modules classes.jar (com.google.firebase:protolite-well-known-types:17.0.1-SNAPSHOT:20200508.204735-1) and protobuf-javalite-3.11.0.jar (com.google.protobuf:protobuf-javalite:3.11.0)\n  Duplicate class com.google.protobuf.Any$1 found in modules classes.jar (com.google.firebase:protolite-well-known-types:17.0.1-SNAPSHOT:20200508.204735-1) and protobuf-javalite-3.11.0.jar (com.google.protobuf:protobuf-javalite:3.11.0)\n  Duplicate class com.google.protobuf.Any$Builder found in modules classes.jar (com.google.firebase:protolite-well-known-types:17.0.1-SNAPSHOT:20200508.204735-1) and protobuf-javalite-3.11.0.jar (com.google.protobuf:protobuf-javalite:3.11.0)\n  Duplicate class com.google.protobuf.AnyOrBuilder found in modules classes.jar (com.google.firebase:protolite-well-known-types:17.0.1-SNAPSHOT:20200508.204735-1) and protobuf-javalite-3.11.0.jar (com.google.protobuf:protobuf-javalite:3.11.0)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e70e3110952675456f790fdee292cf02d6ce5991", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/e70e3110952675456f790fdee292cf02d6ce5991", "committedDate": "2020-05-08T20:43:23Z", "message": "3. Upgrading proto toolchain"}, "afterCommit": {"oid": "14cb9e4cb59b04c678d6f964e3de071581f8dd83", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/14cb9e4cb59b04c678d6f964e3de071581f8dd83", "committedDate": "2020-05-08T20:53:00Z", "message": "4. Excluded proto dependencies"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1f5315bd30c5358ed47ae8d7627dd84ba94b1bb", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/d1f5315bd30c5358ed47ae8d7627dd84ba94b1bb", "committedDate": "2020-05-08T20:59:56Z", "message": "4. Excluded proto dependencies\n\nDescriptor not found\nSmoke test failures\nhttps://android-ci.firebaseopensource.com/view/gcs/android-ci/pr-logs/pull/firebase_firebase-android-sdk/1534/smoke-tests/1258862867042537472/"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "14cb9e4cb59b04c678d6f964e3de071581f8dd83", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/14cb9e4cb59b04c678d6f964e3de071581f8dd83", "committedDate": "2020-05-08T20:53:00Z", "message": "4. Excluded proto dependencies"}, "afterCommit": {"oid": "92b014f2aae0bbbdfa9e80e76194662baceeb8ff", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/92b014f2aae0bbbdfa9e80e76194662baceeb8ff", "committedDate": "2020-05-08T21:11:48Z", "message": "Added compile(only?) dep on proto"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f92561c3db1e94939b58fd40ce6b59ae5c11e7cf", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/f92561c3db1e94939b58fd40ce6b59ae5c11e7cf", "committedDate": "2020-05-08T21:30:36Z", "message": "Added compile(only?) dep on proto\n\nSmoke test failures\nhttps://android-ci.firebaseopensource.com/view/gcs/android-ci/pr-logs/pull/firebase_firebase-android-sdk/1534/smoke-tests/1258867395951333376/"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "92b014f2aae0bbbdfa9e80e76194662baceeb8ff", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/92b014f2aae0bbbdfa9e80e76194662baceeb8ff", "committedDate": "2020-05-08T21:11:48Z", "message": "Added compile(only?) dep on proto"}, "afterCommit": {"oid": "31281ca83dcf071dc01e4cf3dbe22dfe94dbdf08", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/31281ca83dcf071dc01e4cf3dbe22dfe94dbdf08", "committedDate": "2020-05-08T21:30:54Z", "message": "Vendored descriptor proto"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e60568e914f0933864c6fdcb4c1a54cd8057bbbe", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/e60568e914f0933864c6fdcb4c1a54cd8057bbbe", "committedDate": "2020-05-08T21:36:16Z", "message": "Vendored descriptor proto\n\nDuplicate classes\nhttps://android-ci.firebaseopensource.com/view/gcs/android-ci/pr-logs/pull/firebase_firebase-android-sdk/1534/smoke-tests/1258872300619436032/"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "31281ca83dcf071dc01e4cf3dbe22dfe94dbdf08", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/31281ca83dcf071dc01e4cf3dbe22dfe94dbdf08", "committedDate": "2020-05-08T21:30:54Z", "message": "Vendored descriptor proto"}, "afterCommit": {"oid": "5b59745d6e64e876b383cf3fda152288dd0eccf1", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/5b59745d6e64e876b383cf3fda152288dd0eccf1", "committedDate": "2020-05-08T21:36:52Z", "message": "Removed proto compile dep"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c71a26171e861b771948f2faff5aee6c3580b30", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/4c71a26171e861b771948f2faff5aee6c3580b30", "committedDate": "2020-05-08T22:10:43Z", "message": "Removed proto compile dep\nhttps://android-ci.firebaseopensource.com/view/gcs/android-ci/pr-logs/pull/firebase_firebase-android-sdk/1534/smoke-tests/1258873811042832387/"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f32b5c818e47da7a2da76bc6123519b3240f43ca", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/f32b5c818e47da7a2da76bc6123519b3240f43ca", "committedDate": "2020-05-08T22:11:23Z", "message": "Removed duration\n\nhttps://android-ci.firebaseopensource.com/view/gcs/android-ci/pr-logs/pull/firebase_firebase-android-sdk/1534/smoke-tests/1258877965266063361/"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21af57f7069e4c167061fd19f9ee0ae78014f195", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/21af57f7069e4c167061fd19f9ee0ae78014f195", "committedDate": "2020-05-08T22:25:40Z", "message": "Added duration as a `protobuf` config"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c2826c73cfd8f41b003962aa194b4df6fd44e7ab", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/c2826c73cfd8f41b003962aa194b4df6fd44e7ab", "committedDate": "2020-05-08T21:53:35Z", "message": "Removed duration"}, "afterCommit": {"oid": "21af57f7069e4c167061fd19f9ee0ae78014f195", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/21af57f7069e4c167061fd19f9ee0ae78014f195", "committedDate": "2020-05-08T22:25:40Z", "message": "Added duration as a `protobuf` config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a565f9075dd0d12a72aa5f0afd20e526ad439e30", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/a565f9075dd0d12a72aa5f0afd20e526ad439e30", "committedDate": "2020-05-10T06:12:35Z", "message": "Removing duration class files"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "764d4d782756556959c4aaf7b585d2da482c8ed3", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/764d4d782756556959c4aaf7b585d2da482c8ed3", "committedDate": "2020-05-10T05:52:05Z", "message": "Merge branch 'master' into ashwinraghav.grpc"}, "afterCommit": {"oid": "a565f9075dd0d12a72aa5f0afd20e526ad439e30", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/a565f9075dd0d12a72aa5f0afd20e526ad439e30", "committedDate": "2020-05-10T06:12:35Z", "message": "Removing duration class files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4733ff029ffa807535c4d430e34ceb5a5c590c95", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/4733ff029ffa807535c4d430e34ceb5a5c590c95", "committedDate": "2020-05-10T06:18:00Z", "message": "Merge branch 'master' into ashwinraghav.grpc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0643f3c7a6d8978c5232cd2bf82534d8c83d1c5b", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/0643f3c7a6d8978c5232cd2bf82534d8c83d1c5b", "committedDate": "2020-05-10T06:30:39Z", "message": "Changing case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b2f515416238fc027d0259f5acb60b97a54c288", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/9b2f515416238fc027d0259f5acb60b97a54c288", "committedDate": "2020-05-10T06:30:44Z", "message": "Merge branch 'ashwinraghav.grpc' of github.com:firebase/firebase-android-sdk into ashwinraghav.grpc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d976df0a390886aa5719877344853c86425414af", "author": {"user": {"login": "ashwinraghav", "name": "Ashwin Raghav"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/d976df0a390886aa5719877344853c86425414af", "committedDate": "2020-05-10T20:05:18Z", "message": "Bumped version of well known types"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwMTI5MjU4", "url": "https://github.com/firebase/firebase-android-sdk/pull/1534#pullrequestreview-410129258", "createdAt": "2020-05-12T14:56:28Z", "commit": {"oid": "d976df0a390886aa5719877344853c86425414af"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxNDo1NjoyOFrOGUKywg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxNDo1NjoyOFrOGUKywg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzgwMTUzOA==", "bodyText": "1.29.0 depends on guava 28.2\nhttps://github.com/grpc/grpc-java/blob/master/build.gradle#L53\nbut we have a hard dependency on 27\nhttps://github.com/firebase/firebase-android-sdk/blob/master/firebase-inappmessaging/firebase-inappmessaging.gradle#L107\nI'm curious on how does the tests worked with this issue.", "url": "https://github.com/firebase/firebase-android-sdk/pull/1534#discussion_r423801538", "createdAt": "2020-05-12T14:56:28Z", "author": {"login": "rlazo"}, "path": "build.gradle", "diffHunk": "@@ -49,6 +49,7 @@ ext {\n     playServicesVersion = '16.0.1'\n     supportAnnotationsVersion = '28.0.0'\n     googleTruthVersion = '0.45'\n+    grpcVersion = '1.29.0'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d976df0a390886aa5719877344853c86425414af"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a8c67b43081522d78c2c9fa6e9435ae216c277a", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/3a8c67b43081522d78c2c9fa6e9435ae216c277a", "committedDate": "2020-05-12T15:00:28Z", "message": "Use previous version of GRPC because of guava dep."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e806e600bbdc11f5ffdf7d31bd1b866c2ded397f", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/e806e600bbdc11f5ffdf7d31bd1b866c2ded397f", "committedDate": "2020-05-12T21:00:09Z", "message": "Changes to transport-backend-cct proto configuration."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f519a33aa4782921e1c8c9e5d4f381b82241532", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/8f519a33aa4782921e1c8c9e5d4f381b82241532", "committedDate": "2020-05-12T21:01:03Z", "message": "Merge branch 'master' into ashwinraghav.grpc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ade7170f9ff5872a10c7a3977586d9e4e0b8935", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/0ade7170f9ff5872a10c7a3977586d9e4e0b8935", "committedDate": "2020-05-12T21:37:56Z", "message": "remove fiamui-app"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9182660ee981b4e2ef15f8216bb5a1c4e3c3800", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/e9182660ee981b4e2ef15f8216bb5a1c4e3c3800", "committedDate": "2020-05-12T21:38:27Z", "message": "remove fiamu-app entry in subprojects.cfg"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "467621d7cc041eece80caf60d20bb70c25f897f1", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/467621d7cc041eece80caf60d20bb70c25f897f1", "committedDate": "2020-05-12T22:49:59Z", "message": "Merge branch 'master' into ashwinraghav.grpc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6082e47f7af00499b7f66a026bdaf39791cf24f8", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/6082e47f7af00499b7f66a026bdaf39791cf24f8", "committedDate": "2020-05-12T22:50:11Z", "message": "testapp fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2023a431713519d01ce25b919f4a4bdf5b57252", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/c2023a431713519d01ce25b919f4a4bdf5b57252", "committedDate": "2020-05-12T23:24:16Z", "message": "Use full proto runtime for tests."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d01b75205e3c16a47d403b9d29bc6469695ebea8", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/d01b75205e3c16a47d403b9d29bc6469695ebea8", "committedDate": "2020-05-14T16:25:51Z", "message": "Use same protoc version for all entries."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6cf943af458721c110e086472c9b3fe883c2705", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/f6cf943af458721c110e086472c9b3fe883c2705", "committedDate": "2020-05-14T16:26:34Z", "message": "Merge branch 'master' into ashwinraghav.grpc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5f25ccf289b9498ba38486dc06fb0dc9cc10766", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/f5f25ccf289b9498ba38486dc06fb0dc9cc10766", "committedDate": "2020-05-14T17:47:21Z", "message": "Don't upgrade version for crashlytics tests."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c4097d1ad40ad0054874c8a6f7d19beee266be5", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/3c4097d1ad40ad0054874c8a6f7d19beee266be5", "committedDate": "2020-05-25T20:48:11Z", "message": "Merge branch 'master' into ashwinraghav.grpc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8265a26d7b0609b2357a21bc6a5017309e4d7cf6", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/8265a26d7b0609b2357a21bc6a5017309e4d7cf6", "committedDate": "2020-05-26T00:18:31Z", "message": "Proguard rule for inappmessaging."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5ca26c49a6c56a7da08ae7ad6e2be2caeebddcc", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/a5ca26c49a6c56a7da08ae7ad6e2be2caeebddcc", "committedDate": "2020-05-27T19:58:42Z", "message": "Test using protobuf only"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e02ff762ac0ebac1c48d3cb2b952b6f84fe5a1a9", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/e02ff762ac0ebac1c48d3cb2b952b6f84fe5a1a9", "committedDate": "2020-05-27T22:42:07Z", "message": "Rollback previous test."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdbbd5af044d9d35a502fa20b1ea77fa5a5ef6b0", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/fdbbd5af044d9d35a502fa20b1ea77fa5a5ef6b0", "committedDate": "2020-05-28T17:26:11Z", "message": "Merge branch 'master' into ashwinraghav.grpc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "886d5d33bcc5af62b31eeec9f6b36b615c4fb404", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/886d5d33bcc5af62b31eeec9f6b36b615c4fb404", "committedDate": "2020-06-05T15:18:03Z", "message": "Merge branch 'master' into ashwinraghav.grpc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a80ef1d7ab50642e0ec3356821c4b969c1ca0500", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/a80ef1d7ab50642e0ec3356821c4b969c1ca0500", "committedDate": "2020-06-05T22:11:32Z", "message": "Move proguard to well-known-types."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17feb6dd3a04ac972163dc24a5a4d34d446173c8", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/17feb6dd3a04ac972163dc24a5a4d34d446173c8", "committedDate": "2020-06-06T00:19:05Z", "message": "Use javalite fix referred in protobuf repo\n\nhttps://github.com/protocolbuffers/protobuf/issues/7094#issuecomment-637044968"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "90d5d2469f680237986d073b0bd297d18ab0ac6d", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/90d5d2469f680237986d073b0bd297d18ab0ac6d", "committedDate": "2020-06-06T01:12:42Z", "message": "Propagate proguart configuration from protolite-well-known-types"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b406658dfb35101910fcaa2a96ceae374bdd1df4", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/b406658dfb35101910fcaa2a96ceae374bdd1df4", "committedDate": "2020-06-07T11:48:36Z", "message": "Nit, fixes, and clean ups."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "560541388c92a2541ef0036887b871d8c4a22492", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/560541388c92a2541ef0036887b871d8c4a22492", "committedDate": "2020-06-07T11:59:26Z", "message": "Use double quotes for variable substitution."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "635d8143b3281e6820a8586f98f21b863b37b29f", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/635d8143b3281e6820a8586f98f21b863b37b29f", "committedDate": "2020-06-07T12:08:31Z", "message": "Missing 'c'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2a77fecb6ca097918fb861d1a8fe0a58421c360", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/a2a77fecb6ca097918fb861d1a8fe0a58421c360", "committedDate": "2020-06-07T12:22:59Z", "message": "Remove unwanted change."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "beb00106d82ecd108b4fe4ea44bfbbce9d2bb978", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/beb00106d82ecd108b4fe4ea44bfbbce9d2bb978", "committedDate": "2020-06-08T12:27:05Z", "message": "Additional lints."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72ea7f3ce677a4e67aebafb4e640ef5aa6077825", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/72ea7f3ce677a4e67aebafb4e640ef5aa6077825", "committedDate": "2020-06-10T15:46:17Z", "message": "No javadoc for protolite-well-known-types."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4457d65a6021851c0f18a66ed05c2bb308929d5", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/f4457d65a6021851c0f18a66ed05c2bb308929d5", "committedDate": "2020-06-10T16:18:14Z", "message": "Undo changes to protolite-well-known-types"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "310d3adb002eb39284af4afc5501ade64cb569e6", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/310d3adb002eb39284af4afc5501ade64cb569e6", "committedDate": "2020-06-10T17:44:15Z", "message": "Add empty api.txt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb64e77db4ed0d3afc420c613fbfa94db240be76", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/fb64e77db4ed0d3afc420c613fbfa94db240be76", "committedDate": "2020-06-10T18:47:55Z", "message": "Don't publish javadoc for proto-well-known-types."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45ea7ff4d7901720060ab80dedd02e229e3a8cf5", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/45ea7ff4d7901720060ab80dedd02e229e3a8cf5", "committedDate": "2020-06-11T18:58:23Z", "message": "Merge branch 'master' into ashwinraghav.grpc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5e8fc6038cf878429cc3921bbb87b6443ab9049", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/f5e8fc6038cf878429cc3921bbb87b6443ab9049", "committedDate": "2020-06-12T00:16:54Z", "message": "Merge branch 'master' into ashwinraghav.grpc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2811ca9b39f1878eaf9d2df86964c3f221352e4", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/a2811ca9b39f1878eaf9d2df86964c3f221352e4", "committedDate": "2020-06-18T11:30:04Z", "message": "Merge branch 'master' into ashwinraghav.grpc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "207feb7895baad2f49a208bd125d00521567ceb7", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/207feb7895baad2f49a208bd125d00521567ceb7", "committedDate": "2020-06-19T19:41:19Z", "message": "Merge branch 'master' into ashwinraghav.grpc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae49bfcb1064d0a6e32d3221264d597cd984659f", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/ae49bfcb1064d0a6e32d3221264d597cd984659f", "committedDate": "2020-06-23T00:03:55Z", "message": "Merge branch 'master' into ashwinraghav.grpc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1Mzc0MTcx", "url": "https://github.com/firebase/firebase-android-sdk/pull/1534#pullrequestreview-435374171", "createdAt": "2020-06-23T01:14:26Z", "commit": {"oid": "ae49bfcb1064d0a6e32d3221264d597cd984659f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1ODk5NjUz", "url": "https://github.com/firebase/firebase-android-sdk/pull/1534#pullrequestreview-435899653", "createdAt": "2020-06-23T15:27:24Z", "commit": {"oid": "ae49bfcb1064d0a6e32d3221264d597cd984659f"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxNToyNzoyNFrOGnur_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxNTozMjo1NVrOGnu7HQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDMxMjU3Mg==", "bodyText": "Intentional?", "url": "https://github.com/firebase/firebase-android-sdk/pull/1534#discussion_r444312572", "createdAt": "2020-06-23T15:27:24Z", "author": {"login": "ashwinraghav"}, "path": "firebase-firestore/src/main/java/com/google/firebase/firestore/remote/GrpcCallProvider.java", "diffHunk": "@@ -125,7 +125,7 @@ private ManagedChannel initChannel(Context context, DatabaseInfo databaseInfo) {\n     // Wrap the ManagedChannelBuilder in an AndroidChannelBuilder. This allows the channel to\n     // respond more gracefully to network change events (such as switching from cell to wifi).\n     AndroidChannelBuilder androidChannelBuilder =\n-        AndroidChannelBuilder.fromBuilder(channelBuilder).context(context);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae49bfcb1064d0a6e32d3221264d597cd984659f"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDMxMzIzMw==", "bodyText": "I think the readme files in well known types need to change in a follow up PR", "url": "https://github.com/firebase/firebase-android-sdk/pull/1534#discussion_r444313233", "createdAt": "2020-06-23T15:28:17Z", "author": {"login": "ashwinraghav"}, "path": "protolite-well-known-types/README.md", "diffHunk": "@@ -29,26 +29,22 @@ A typical grpc and protobuf-lite configuration should look like\n ```groovy", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae49bfcb1064d0a6e32d3221264d597cd984659f"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDMxNDQ5Nw==", "bodyText": "Can you add a comment on why this is needed? It seems like we did not previously had to preserve these classes", "url": "https://github.com/firebase/firebase-android-sdk/pull/1534#discussion_r444314497", "createdAt": "2020-06-23T15:30:00Z", "author": {"login": "ashwinraghav"}, "path": "protolite-well-known-types/proguard-rules.pro", "diffHunk": "@@ -19,3 +19,7 @@\n # If you keep the line number information, uncomment this to\n # hide the original source file name.\n #-renamesourcefileattribute SourceFile\n+\n+-keepclassmembers class * extends com.google.protobuf.GeneratedMessageLite {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae49bfcb1064d0a6e32d3221264d597cd984659f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDMxNTM0NQ==", "bodyText": "Fix indentation.", "url": "https://github.com/firebase/firebase-android-sdk/pull/1534#discussion_r444315345", "createdAt": "2020-06-23T15:31:14Z", "author": {"login": "ashwinraghav"}, "path": "protolite-well-known-types/protolite-well-known-types.gradle", "diffHunk": "@@ -45,6 +45,7 @@ android {\n         minSdkVersion project.minSdkVersion\n         versionCode 1\n         versionName '1.0'\n+\tconsumerProguardFiles 'proguard-rules.pro'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae49bfcb1064d0a6e32d3221264d597cd984659f"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDMxNjQ0NQ==", "bodyText": "I think all other SDKs have the file named proguard.txt. I think that file name may automagically be picked up. Worth confirming and removing this config", "url": "https://github.com/firebase/firebase-android-sdk/pull/1534#discussion_r444316445", "createdAt": "2020-06-23T15:32:55Z", "author": {"login": "ashwinraghav"}, "path": "protolite-well-known-types/protolite-well-known-types.gradle", "diffHunk": "@@ -45,6 +45,7 @@ android {\n         minSdkVersion project.minSdkVersion\n         versionCode 1\n         versionName '1.0'\n+\tconsumerProguardFiles 'proguard-rules.pro'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDMxNTM0NQ=="}, "originalCommit": {"oid": "ae49bfcb1064d0a6e32d3221264d597cd984659f"}, "originalPosition": 38}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7ff1bd30a046d8196e9676ef8d4b968e15bf340", "author": {"user": {"login": "rlazo", "name": "Rodrigo Lazo"}}, "url": "https://github.com/firebase/firebase-android-sdk/commit/a7ff1bd30a046d8196e9676ef8d4b968e15bf340", "committedDate": "2020-06-23T16:47:49Z", "message": "Address comments."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MTg2MDAz", "url": "https://github.com/firebase/firebase-android-sdk/pull/1534#pullrequestreview-436186003", "createdAt": "2020-06-23T21:54:11Z", "commit": {"oid": "a7ff1bd30a046d8196e9676ef8d4b968e15bf340"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMTo1NDoxMVrOGn7_1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMTo1NDozOVrOGn8Aig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUzMDY0NA==", "bodyText": "still using protobuf-lite", "url": "https://github.com/firebase/firebase-android-sdk/pull/1534#discussion_r444530644", "createdAt": "2020-06-23T21:54:11Z", "author": {"login": "rosariopfernandes"}, "path": "firebase-firestore/firebase-firestore.gradle", "diffHunk": "@@ -124,10 +118,10 @@ dependencies {\n     compileOnly 'javax.annotation:jsr250-api:1.0'\n \n     implementation 'androidx.annotation:annotation:1.1.0'\n-    implementation 'io.grpc:grpc-stub:1.21.0'\n-    implementation 'io.grpc:grpc-protobuf-lite:1.21.0'\n-    implementation 'io.grpc:grpc-okhttp:1.21.0'\n-    implementation 'io.grpc:grpc-android:1.21.0'\n+    implementation \"io.grpc:grpc-stub:$grpcVersion\"\n+    implementation \"io.grpc:grpc-protobuf-lite:$grpcVersion\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a7ff1bd30a046d8196e9676ef8d4b968e15bf340"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUzMDgyNg==", "bodyText": "still using protobuf-lite", "url": "https://github.com/firebase/firebase-android-sdk/pull/1534#discussion_r444530826", "createdAt": "2020-06-23T21:54:39Z", "author": {"login": "rosariopfernandes"}, "path": "firebase-inappmessaging/firebase-inappmessaging.gradle", "diffHunk": "@@ -123,10 +116,10 @@ dependencies {\n     compileOnly 'javax.annotation:jsr250-api:1.0'\n \n     implementation 'com.google.android.gms:play-services-tasks:17.0.2'\n-    implementation 'io.grpc:grpc-stub:1.21.0'\n-    implementation 'io.grpc:grpc-protobuf-lite:1.21.0'\n-    implementation 'io.grpc:grpc-okhttp:1.21.0'\n-    implementation 'com.google.dagger:dagger:2.27'\n+    implementation \"io.grpc:grpc-stub:$grpcVersion\"\n+    implementation \"io.grpc:grpc-protobuf-lite:$grpcVersion\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a7ff1bd30a046d8196e9676ef8d4b968e15bf340"}, "originalPosition": 51}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2659, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}