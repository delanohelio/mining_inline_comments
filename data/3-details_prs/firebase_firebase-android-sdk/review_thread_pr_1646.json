{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzNDE5MjUx", "number": 1646, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwMDoyNzowNVrOEG9AEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxODoxMjowNVrOEHrdyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1NzI2MzU0OnYy", "diffSide": "RIGHT", "path": "firebase-config/src/main/java/com/google/firebase/remoteconfig/internal/ConfigFetchHttpClient.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwMDoyNzowNVrOGmES8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwMDozODoxM1rOGmEdFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjU2OTQ1Nw==", "bodyText": "Thinking (no action required): this is comparable to usage of the same header in RC's iOS SDK: https://github.com/firebase/firebase-ios-sdk/blob/c07c89ee7582e84da1c5aafaa94b38a53bcfbdc2/FirebaseRemoteConfig/Sources/RCNFetch.m#L49", "url": "https://github.com/firebase/firebase-android-sdk/pull/1646#discussion_r442569457", "createdAt": "2020-06-19T00:27:05Z", "author": {"login": "erikeldridge"}, "path": "firebase-config/src/main/java/com/google/firebase/remoteconfig/internal/ConfigFetchHttpClient.java", "diffHunk": "@@ -78,6 +78,8 @@\n   private static final String X_ANDROID_PACKAGE_HEADER = \"X-Android-Package\";\n   private static final String X_ANDROID_CERT_HEADER = \"X-Android-Cert\";\n   private static final String X_GOOGLE_GFE_CAN_RETRY = \"X-Google-GFE-Can-Retry\";\n+  private static final String INSTALLATIONS_AUTH_TOKEN_HEADER =\n+      \"X-Goog-Firebase-Installations-Auth\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a470ea5694e0ba5114cfe8278c69a19cbc63e0a0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjU3MjA1NQ==", "bodyText": "... also FIAM and FIS SDKs:\nhttps://github.com/firebase/firebase-ios-sdk/search?q=x-goog-firebase-installations-auth&unscoped_q=x-goog-firebase-installations-auth", "url": "https://github.com/firebase/firebase-android-sdk/pull/1646#discussion_r442572055", "createdAt": "2020-06-19T00:38:13Z", "author": {"login": "erikeldridge"}, "path": "firebase-config/src/main/java/com/google/firebase/remoteconfig/internal/ConfigFetchHttpClient.java", "diffHunk": "@@ -78,6 +78,8 @@\n   private static final String X_ANDROID_PACKAGE_HEADER = \"X-Android-Package\";\n   private static final String X_ANDROID_CERT_HEADER = \"X-Android-Cert\";\n   private static final String X_GOOGLE_GFE_CAN_RETRY = \"X-Google-GFE-Can-Retry\";\n+  private static final String INSTALLATIONS_AUTH_TOKEN_HEADER =\n+      \"X-Goog-Firebase-Installations-Auth\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjU2OTQ1Nw=="}, "originalCommit": {"oid": "a470ea5694e0ba5114cfe8278c69a19cbc63e0a0"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1NzI3Mjk2OnYy", "diffSide": "RIGHT", "path": "firebase-config/src/test/java/com/google/firebase/remoteconfig/internal/ConfigFetchHttpClientTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwMDozMzowMlrOGmEYhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxOTozMjoyMVrOGn3n0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjU3MDg4Nw==", "bodyText": "Thinking (no action required): this is a public error message, so the phrasing should match the public docs. The FirebaseInstallations.getToken docs describe \"authentication token for the Firebase installation\", which matches the phrasing here.", "url": "https://github.com/firebase/firebase-android-sdk/pull/1646#discussion_r442570887", "createdAt": "2020-06-19T00:33:02Z", "author": {"login": "erikeldridge"}, "path": "firebase-config/src/test/java/com/google/firebase/remoteconfig/internal/ConfigFetchHttpClientTest.java", "diffHunk": "@@ -240,22 +242,22 @@ public void fetch_localeUsesToStringBelowLollipop() throws Exception {\n   }\n \n   @Test\n-  public void fetch_instanceIdIsNull_throwsFRCClientException() throws Exception {\n+  public void fetch_installationIdIsNull_throwsFRCClientException() throws Exception {\n     setServerResponseTo(noChangeResponseBody, SECOND_ETAG);\n \n     FirebaseRemoteConfigClientException frcException =\n-        assertThrows(FirebaseRemoteConfigClientException.class, () -> fetchWithoutIid());\n+        assertThrows(FirebaseRemoteConfigClientException.class, () -> fetchWithoutInstallationId());\n \n-    assertThat(frcException).hasMessageThat().contains(\"instance id is null\");\n+    assertThat(frcException).hasMessageThat().contains(\"installation id is null\");\n   }\n \n   @Test\n-  public void fetch_instanceIdTokenIsNull_doesNotThrowException() throws Exception {\n+  public void fetch_installationAuthTokenIsNull_doesNotThrowException() throws Exception {\n     setServerResponseTo(noChangeResponseBody, SECOND_ETAG);\n \n-    FetchResponse fetchResponse = fetchWithoutIidToken();\n+    FetchResponse fetchResponse = fetchWithoutInstallationAuthToken();\n \n-    assertWithMessage(\"Fetch() failed with null instance id token!\")\n+    assertWithMessage(\"Fetch() failed with null installation auth token!\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a470ea5694e0ba5114cfe8278c69a19cbc63e0a0"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQ1ODk2Mw==", "bodyText": "Great callout, thank you!\nWe had a meeting recently with DevRel and Tech Writers and decided to name the authentication tokens for Firebase installations: \"installation auth tokens\".\nSo, the action item is probably on us in the FIS team.", "url": "https://github.com/firebase/firebase-android-sdk/pull/1646#discussion_r444458963", "createdAt": "2020-06-23T19:32:21Z", "author": {"login": "andirayo"}, "path": "firebase-config/src/test/java/com/google/firebase/remoteconfig/internal/ConfigFetchHttpClientTest.java", "diffHunk": "@@ -240,22 +242,22 @@ public void fetch_localeUsesToStringBelowLollipop() throws Exception {\n   }\n \n   @Test\n-  public void fetch_instanceIdIsNull_throwsFRCClientException() throws Exception {\n+  public void fetch_installationIdIsNull_throwsFRCClientException() throws Exception {\n     setServerResponseTo(noChangeResponseBody, SECOND_ETAG);\n \n     FirebaseRemoteConfigClientException frcException =\n-        assertThrows(FirebaseRemoteConfigClientException.class, () -> fetchWithoutIid());\n+        assertThrows(FirebaseRemoteConfigClientException.class, () -> fetchWithoutInstallationId());\n \n-    assertThat(frcException).hasMessageThat().contains(\"instance id is null\");\n+    assertThat(frcException).hasMessageThat().contains(\"installation id is null\");\n   }\n \n   @Test\n-  public void fetch_instanceIdTokenIsNull_doesNotThrowException() throws Exception {\n+  public void fetch_installationAuthTokenIsNull_doesNotThrowException() throws Exception {\n     setServerResponseTo(noChangeResponseBody, SECOND_ETAG);\n \n-    FetchResponse fetchResponse = fetchWithoutIidToken();\n+    FetchResponse fetchResponse = fetchWithoutInstallationAuthToken();\n \n-    assertWithMessage(\"Fetch() failed with null instance id token!\")\n+    assertWithMessage(\"Fetch() failed with null installation auth token!\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjU3MDg4Nw=="}, "originalCommit": {"oid": "a470ea5694e0ba5114cfe8278c69a19cbc63e0a0"}, "originalPosition": 56}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2NDg3NjI2OnYy", "diffSide": "RIGHT", "path": "firebase-config/src/main/java/com/google/firebase/remoteconfig/RemoteConfigConstants.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxODoxMjowNVrOGnLwNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QwMDozNTozNVrOGnVV1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzc0MDIxNQ==", "bodyText": "We might need some clarity here. The javadoc gives the impression that INSTANCE_ID_TOKEN can be fetched from FIS SDK, which is incorrect. We can explicitly call out INSTANCE_ID_TOKEN is replaced by  installation auth token fetched from FIS SDK.", "url": "https://github.com/firebase/firebase-android-sdk/pull/1646#discussion_r443740215", "createdAt": "2020-06-22T18:12:05Z", "author": {"login": "ankitaj224"}, "path": "firebase-config/src/main/java/com/google/firebase/remoteconfig/RemoteConfigConstants.java", "diffHunk": "@@ -31,6 +31,10 @@\n   /**\n    * Keys of fields in the Fetch request body that the client sends to the Firebase Remote Config\n    * server.\n+   *\n+   * <p>{@code INSTANCE_ID} and {@code INSTANCE_ID_TOKEN} are legacy names for the fields that used", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffcbb9dbd2c9fc0af70b1418962f774f497df956"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzg5NzMwMQ==", "bodyText": "Good call. Updated.", "url": "https://github.com/firebase/firebase-android-sdk/pull/1646#discussion_r443897301", "createdAt": "2020-06-23T00:35:35Z", "author": {"login": "danasilver"}, "path": "firebase-config/src/main/java/com/google/firebase/remoteconfig/RemoteConfigConstants.java", "diffHunk": "@@ -31,6 +31,10 @@\n   /**\n    * Keys of fields in the Fetch request body that the client sends to the Firebase Remote Config\n    * server.\n+   *\n+   * <p>{@code INSTANCE_ID} and {@code INSTANCE_ID_TOKEN} are legacy names for the fields that used", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mzc0MDIxNQ=="}, "originalCommit": {"oid": "ffcbb9dbd2c9fc0af70b1418962f774f497df956"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1217, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}