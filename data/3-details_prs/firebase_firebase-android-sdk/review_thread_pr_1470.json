{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzOTY2NDMy", "number": 1470, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwMTo1Mjo0MVrOD0AJIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwMTo1Mjo0MVrOD0AJIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1ODU0ODgyOnYy", "diffSide": "RIGHT", "path": "firebase-installations/src/main/java/com/google/firebase/installations/FirebaseInstallations.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwMTo1Mjo0MVrOGIu50A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQyMjoxMzoyNVrOGJas5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTgxMDI1Ng==", "bodyText": "Is there no test that you have to modify?\n(I mean a test that created FirebaseApp without projectId but with gcmSenderId.)", "url": "https://github.com/firebase/firebase-android-sdk/pull/1470#discussion_r411810256", "createdAt": "2020-04-21T01:52:41Z", "author": {"login": "andirayo"}, "path": "firebase-installations/src/main/java/com/google/firebase/installations/FirebaseInstallations.java", "diffHunk": "@@ -146,14 +146,22 @@ private void preConditionChecks() {\n     Preconditions.checkNotEmpty(getApplicationId());\n     Preconditions.checkNotEmpty(getProjectIdentifier());\n     Preconditions.checkNotEmpty(getApiKey());\n+    Preconditions.checkArgument(\n+            Utils.isValidAppIdFormat(getApplicationId()),\n+            \"Please set your Application ID. A valid Firebase App ID is required to communicate \"\n+                    + \"with Firebase server APIs: It identifies your application with Firebase.\"\n+                    + \"Please refer to https://firebase.google.com/support/privacy/init-options.\");\n+    Preconditions.checkArgument(\n+            Utils.isValidApiKeyFormat(getApiKey()),\n+            \"Please set a valid API key. A Firebase API key is required to communicate with \"\n+                    + \"Firebase server APIs: It authenticates your project with Google.\"\n+                    + \"Please refer to https://firebase.google.com/support/privacy/init-options.\");\n   }\n \n   /** Returns the Project Id or Project Number for the Firebase Project. */\n   @Nullable\n   String getProjectIdentifier() {\n-    return TextUtils.isEmpty(firebaseApp.getOptions().getProjectId())\n-        ? firebaseApp.getOptions().getGcmSenderId()\n-        : firebaseApp.getOptions().getProjectId();\n+    return firebaseApp.getOptions().getProjectId();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1ab3aa95bbb135b1bef8f127817a85db665096a"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjUyNzg0NQ==", "bodyText": "No, we don't have", "url": "https://github.com/firebase/firebase-android-sdk/pull/1470#discussion_r412527845", "createdAt": "2020-04-21T22:13:25Z", "author": {"login": "ChaoqunCHEN"}, "path": "firebase-installations/src/main/java/com/google/firebase/installations/FirebaseInstallations.java", "diffHunk": "@@ -146,14 +146,22 @@ private void preConditionChecks() {\n     Preconditions.checkNotEmpty(getApplicationId());\n     Preconditions.checkNotEmpty(getProjectIdentifier());\n     Preconditions.checkNotEmpty(getApiKey());\n+    Preconditions.checkArgument(\n+            Utils.isValidAppIdFormat(getApplicationId()),\n+            \"Please set your Application ID. A valid Firebase App ID is required to communicate \"\n+                    + \"with Firebase server APIs: It identifies your application with Firebase.\"\n+                    + \"Please refer to https://firebase.google.com/support/privacy/init-options.\");\n+    Preconditions.checkArgument(\n+            Utils.isValidApiKeyFormat(getApiKey()),\n+            \"Please set a valid API key. A Firebase API key is required to communicate with \"\n+                    + \"Firebase server APIs: It authenticates your project with Google.\"\n+                    + \"Please refer to https://firebase.google.com/support/privacy/init-options.\");\n   }\n \n   /** Returns the Project Id or Project Number for the Firebase Project. */\n   @Nullable\n   String getProjectIdentifier() {\n-    return TextUtils.isEmpty(firebaseApp.getOptions().getProjectId())\n-        ? firebaseApp.getOptions().getGcmSenderId()\n-        : firebaseApp.getOptions().getProjectId();\n+    return firebaseApp.getOptions().getProjectId();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTgxMDI1Ng=="}, "originalCommit": {"oid": "c1ab3aa95bbb135b1bef8f127817a85db665096a"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1310, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}