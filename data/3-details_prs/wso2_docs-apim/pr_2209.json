{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE2NTg3OTMz", "number": 2209, "title": "[3.1.0] Add a documentation for APIM Analytics Encryption with Secure Vault", "bodyText": "Purpose\nFixes #1531", "createdAt": "2020-11-06T08:27:15Z", "url": "https://github.com/wso2/docs-apim/pull/2209", "merged": true, "mergeCommit": {"oid": "b657df3b335b5d246aedb1445748973de52f0a19"}, "closed": true, "closedAt": "2020-11-11T08:42:48Z", "author": {"login": "Sarangan0219"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZyk-fgH2gAyNTE2NTg3OTMzOjkwMTBiYzY2ZDkwZDRiM2IzNmFjMWEzYmY2OGJlZTdkNDY1YzBiYTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdbZ4nBgFqTUyNzk2Nzk4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9010bc66d90d4b3b36ac1a3bf68bee7d465c0ba8", "author": {"user": {"login": "Sarangan0219", "name": "Sarangan"}}, "url": "https://github.com/wso2/docs-apim/commit/9010bc66d90d4b3b36ac1a3bf68bee7d465c0ba8", "committedDate": "2020-11-06T08:20:59Z", "message": "Adding Docs for analytics encryption with Secure Vault"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "924b8f8fa9297a15c93e395a92fd40dbf1085df5", "author": {"user": {"login": "Sarangan0219", "name": "Sarangan"}}, "url": "https://github.com/wso2/docs-apim/commit/924b8f8fa9297a15c93e395a92fd40dbf1085df5", "committedDate": "2020-11-06T08:25:37Z", "message": "remove files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38554d88f8a613d42e6d9d92944a1bd54ebed282", "author": {"user": {"login": "Sarangan0219", "name": "Sarangan"}}, "url": "https://github.com/wso2/docs-apim/commit/38554d88f8a613d42e6d9d92944a1bd54ebed282", "committedDate": "2020-11-06T09:02:55Z", "message": "Refine doc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3MTkyMzMz", "url": "https://github.com/wso2/docs-apim/pull/2209#pullrequestreview-527192333", "createdAt": "2020-11-10T13:19:52Z", "commit": {"oid": "c46dcbbce5c3992f58c7925e454f796a44360c1b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxMzoxOTo1MlrOHwcLBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxMzoxOTo1MlrOHwcLBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDU1NTI2OQ==", "bodyText": "as maneesha mentioned in the issue, this value is already a base64 encoded value. Let's add the info on top to avoid confusions.", "url": "https://github.com/wso2/docs-apim/pull/2209#discussion_r520555269", "createdAt": "2020-11-10T13:19:52Z", "author": {"login": "shaniR"}, "path": "en/docs/learn/analytics/securing-sensitive-data-via-the-secure-vault.md", "diffHunk": "@@ -0,0 +1,42 @@\n+# Encrypting Sensitive Data in the API-M Analytics Server\n+\n+The WSO2 API Manager comes wth an inbuilt Cipher tool to encrypt sensitive data (e.g., access tokens, passwords, etc.) in  the deployment configuration file. This tool works in conjunction with [WSO2 Secure Vault](https://github.com/wso2/carbon-secvault/blob/master/README.md) to replace sensitive data that is in plain text with an alias. \n+You can use the aliases instead of the actual passwords in your configuration files for better security.The actual value is then encrypted and securely stored in the SecureVault. At runtime, the actual value is retrieved from SecureVault using the alias and then used. \n+\n+Follow the steps below to encrypt sensitive data in the deployment configuration file. \n+\n+1. Navigate to `<API-M_ANALYTICS_HOME>/conf/worker/secrets.properties`. Enter the required sensitive data element with the value in plain text as a key value pair as shown in the example below. \n+You need to **enter the password after a space to `plainText`** . If not error will be thrown when running the cipher tool.\n+\n+    ```\n+    auth.configs.password=plainText ABC@123\n+    ```\n+              \n+2. Navigate to `<API-M_ANALYTICS_HOME>/conf/worker/deployment.toml`. Enter the alias to be used in the required configuration file instead of the actual value of sensitive data you specified in the previous step. \n+For example if you need to secure the password in Authentication configuration you need to add the configuration as below : \n+    ```\n+    # Authentication configuration\n+    auth.configs:\n+      type: 'local'        # Type of the IdP client used\n+      userManager:\n+        adminRole: admin   # Admin role which is granted all permissions\n+        userStore:         # User store\n+          users:\n+           -\n+             user:\n+               username: admin\n+               password: ${sec:auth.configs.password}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c46dcbbce5c3992f58c7925e454f796a44360c1b"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0c1b4f7b53679cc7b4396d02fb5818f1eacc20c", "author": {"user": {"login": "Sarangan0219", "name": "Sarangan"}}, "url": "https://github.com/wso2/docs-apim/commit/e0c1b4f7b53679cc7b4396d02fb5818f1eacc20c", "committedDate": "2020-11-10T15:10:48Z", "message": "Adding a note for authentication config"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c46dcbbce5c3992f58c7925e454f796a44360c1b", "author": {"user": {"login": "shaniR", "name": "Shani Ranasinghe"}}, "url": "https://github.com/wso2/docs-apim/commit/c46dcbbce5c3992f58c7925e454f796a44360c1b", "committedDate": "2020-11-10T13:15:48Z", "message": "Change file title."}, "afterCommit": {"oid": "e0c1b4f7b53679cc7b4396d02fb5818f1eacc20c", "author": {"user": {"login": "Sarangan0219", "name": "Sarangan"}}, "url": "https://github.com/wso2/docs-apim/commit/e0c1b4f7b53679cc7b4396d02fb5818f1eacc20c", "committedDate": "2020-11-10T15:10:48Z", "message": "Adding a note for authentication config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73b6e76bf0e53574eb5be5d6287c865247501db5", "author": {"user": {"login": "shaniR", "name": "Shani Ranasinghe"}}, "url": "https://github.com/wso2/docs-apim/commit/73b6e76bf0e53574eb5be5d6287c865247501db5", "committedDate": "2020-11-10T17:54:57Z", "message": "Update mkdocs.yml"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NDYxOTc1", "url": "https://github.com/wso2/docs-apim/pull/2209#pullrequestreview-527461975", "createdAt": "2020-11-10T17:55:09Z", "commit": {"oid": "73b6e76bf0e53574eb5be5d6287c865247501db5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3OTY3OTg5", "url": "https://github.com/wso2/docs-apim/pull/2209#pullrequestreview-527967989", "createdAt": "2020-11-11T08:42:39Z", "commit": {"oid": "73b6e76bf0e53574eb5be5d6287c865247501db5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1571, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}