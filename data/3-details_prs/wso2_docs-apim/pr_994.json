{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAwNjYxNjc5", "number": 994, "title": "Add documentation to describe permissions and scopes required to perform API Controller operations", "bodyText": "Purpose\nThe usage of permissions and scopes to carry out the operations using API Controller should be discussed so that the user will get a clear idea of how to tackle the errors which may arise due to non-assigned permissions and scope validation failures.\nFixes: wso2/product-apim-tooling#264\nGoals\nRestructure the description on creating the custom user to import/export APIs by describing the required permissions and scopes to perform operations in API Controller.\nApproach\n\nCreated a new topic under API Controller as Advanced Topics and under that topic, new documentation was added titled Creating Custom Users to Perform API Controller Operations\n\nReplaced the repetitive Warning statements with shorter Tips by pointing to Creating Custom Users to Perform API Controller Operations page under Advanced Topics as shown below.\n\nReplaced the lengthy Warning in Importing APIs Via Dev First Approach page with the below Tip.\n\nReplaced the lengthy Warning in Migrating APIs to Different Environments page with the below Tip.\n\nReplaced two lengthy Warnings in CI/CD with WSO2 API Manager page with the below Tips.\n\n\n\n\nReplaces the Warning in Migrating Apps to Different Environments with a Tip as below.\n\n\nUser stories\nUsers can refer to the newly added page to decide the minimal permissions and scopes to perform operations using API Controller.", "createdAt": "2020-04-08T06:50:10Z", "url": "https://github.com/wso2/docs-apim/pull/994", "merged": true, "mergeCommit": {"oid": "ed23cd2889b759b8fc1ca4a5a2fe7ed8837a26e2"}, "closed": true, "closedAt": "2020-04-08T13:21:09Z", "author": {"login": "wasuradananjith"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVkfo9AH2gAyNDAwNjYxNjc5OmM5MDQwNDEwOWYwYWQ1MWRhNGRlMjYyMTFkZjhiMDc4NmU0NzAwYmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdvA64BgFqTU2NTA5OTI0MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c90404109f0ad51da4de26211df8b0786e4700bc", "author": {"user": {"login": "wasuradananjith", "name": "Wasura Wattearachchi"}}, "url": "https://github.com/wso2/docs-apim/commit/c90404109f0ad51da4de26211df8b0786e4700bc", "committedDate": "2020-04-08T09:29:38Z", "message": "Add apictl custom user permissions/scopes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bf3592c0cb6eeb5b9540ed952860f1c7a97a8738", "author": {"user": {"login": "wasuradananjith", "name": "Wasura Wattearachchi"}}, "url": "https://github.com/wso2/docs-apim/commit/bf3592c0cb6eeb5b9540ed952860f1c7a97a8738", "committedDate": "2020-04-08T06:02:47Z", "message": "Modify warnings on import/export APIs"}, "afterCommit": {"oid": "c90404109f0ad51da4de26211df8b0786e4700bc", "author": {"user": {"login": "wasuradananjith", "name": "Wasura Wattearachchi"}}, "url": "https://github.com/wso2/docs-apim/commit/c90404109f0ad51da4de26211df8b0786e4700bc", "committedDate": "2020-04-08T09:29:38Z", "message": "Add apictl custom user permissions/scopes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69b97fc01044683d794e865c403534250c53333e", "author": {"user": {"login": "wasuradananjith", "name": "Wasura Wattearachchi"}}, "url": "https://github.com/wso2/docs-apim/commit/69b97fc01044683d794e865c403534250c53333e", "committedDate": "2020-04-08T13:08:48Z", "message": "Replace Warnings with Tips"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5OTYyMjY5", "url": "https://github.com/wso2/docs-apim/pull/994#pullrequestreview-389962269", "createdAt": "2020-04-08T13:15:46Z", "commit": {"oid": "69b97fc01044683d794e865c403534250c53333e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY1MDk5MjQx", "url": "https://github.com/wso2/docs-apim/pull/994#pullrequestreview-565099241", "createdAt": "2021-01-11T06:55:58Z", "commit": {"oid": "69b97fc01044683d794e865c403534250c53333e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMVQwNjo1NTo1OFrOIRG6Og==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMVQwNjo1NTo1OFrOIRG6Og==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDgwOTkxNA==", "bodyText": "The heading should be corrected as \"Using API-M Admin Portal\". Please correct this.", "url": "https://github.com/wso2/docs-apim/pull/994#discussion_r554809914", "createdAt": "2021-01-11T06:55:58Z", "author": {"login": "npamudika"}, "path": "en/docs/learn/api-controller/advanced-topics/creating-custom-users-to-perform-api-controller-operations.md", "diffHunk": "@@ -0,0 +1,148 @@\n+#  Creating Custom Users to Perform API Controller Operations\n+\n+To perform tasks using the API Controller, a particular user must have required permissions and scopes. By default, a user with `admin` role is allowed perform all the tasks. \n+\n+## Steps to Create a Custom User who can Perform API Controller Operations\n+\n+1. Create a role named `custom_role` with `API Create`, `API Publish` and `API Subscribe` permissions (along with `Login` permission) and assign it to a user.\n+\n+    !!! tip\n+        Refer [Managing Users and Roles]({{base_path}}/administer/product-administration/managing-users-and-roles/introduction-to-user-management/) to learn how to create a user role with permissions and assign it to a user.\n+\n+2.  Assigning the required scopes for the `custom_role` can be done using 2 methods.\n+\n+    1.  Using API-M management console.\n+\n+        1. Sign in to the API-M management console (`https://<APIM_Host>:<APIM_Port>/carbon`) as a tenant admin user.\n+\n+        2. Navigate to **Main > Resources > Browse** \n+\n+        3.  Enter `/_system/config/apimgt/applicationdata/tenant-conf.json` as the location and click **Go** to browse the registry and locate the required resource.\n+\n+        4.  Update the `RESTAPIScopes` JSON field by adding `custom_role` to the `Roles` field under the corresponding scope `Name` fields as shown below.\n+            ```bash\n+            {\n+                \"Name\": \"apim:api_view\",\n+                \"Roles\": \"admin,Internal/publisher,Internal/creator,Internal/analytics,custom_role\"\n+            },\n+            {\n+                \"Name\": \"apim:subscribe\",\n+                \"Roles\": \"admin,Internal/subscriber,custom_role\"\n+            },\n+            {\n+                \"Name\": \"apim:app_owner_change\",\n+                \"Roles\": \"admin,custom_role\"\n+            },\n+                \"Name\": \"apim:app_import_export\",\n+                \"Roles\": \"admin,custom_role\"\n+            },\n+            {\n+                \"Name\": \"apim:api_import_export\",\n+                \"Roles\": \"admin,custom_role\"\n+            },\n+            ``` \n+\n+    2.  Using API-M management console.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69b97fc01044683d794e865c403534250c53333e"}, "originalPosition": 45}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1929, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}