{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQxNTM3NTY4", "number": 1450, "title": "Add instructions and Queries to alter Analytics Database prior to migrations.", "bodyText": "Purpose\n\nThe PR contains instruction and sql queries to update the analytics DB, if the customer is migrating from 2.6 and does not contain the latest WUM update. This is because of a schema change introduces in one of the WUM update wso2am-analytics-2.6.0 and it is important that the customers do add the above change to the DB prior to migration.", "createdAt": "2020-06-29T16:58:01Z", "url": "https://github.com/wso2/docs-apim/pull/1450", "merged": true, "mergeCommit": {"oid": "b021e3a10f0fb20bb9b7eb228df4eb6bddcfc2d3"}, "closed": true, "closedAt": "2020-07-10T09:59:42Z", "author": {"login": "shilmyhasan"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwA5uhAH2gAyNDQxNTM3NTY4OmY3M2ZlZGM2MWYwMmI4ZmQzNGIzNDBhNTVhNGZmODFkMmY0MmY1OTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABczgp-nAFqTQ0NjI3Nzk4MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f73fedc61f02b8fd34b340a55a4ff81d2f42f599", "author": {"user": {"login": "shilmyhasan", "name": "Silmy Hasan"}}, "url": "https://github.com/wso2/docs-apim/commit/f73fedc61f02b8fd34b340a55a4ff81d2f42f599", "committedDate": "2020-06-29T13:17:30Z", "message": "adding alter queries for analytics"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5NjM1MDQy", "url": "https://github.com/wso2/docs-apim/pull/1450#pullrequestreview-439635042", "createdAt": "2020-06-30T02:58:04Z", "commit": {"oid": "f73fedc61f02b8fd34b340a55a4ff81d2f42f599"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwMjo1ODowNFrOGqp0uA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwMjo1ODowNFrOGqp0uA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzM3ODYxNg==", "bodyText": "Isn't it better to check whether the column name is already updated or not and ALTER table only if it was not updated yet?\nThen we can add these queries to the above set of queries too, without running separately.", "url": "https://github.com/wso2/docs-apim/pull/1450#discussion_r447378616", "createdAt": "2020-06-30T02:58:04Z", "author": {"login": "rmsamitha"}, "path": "en/docs/install-and-setup/upgrading-wso2-api-manager/upgrading-from-260-to-310.md", "diffHunk": "@@ -2116,7 +2116,95 @@ Upgrade the WSO2 API Manager Analytics database from version 3.0.0 to version 3.\n     ALTER TABLE APILASTACCESSSUMMARY DROP CONSTRAINT APILASTACCESSSUMMARY_pkey;\n     ALTER TABLE APILASTACCESSSUMMARY ADD PRIMARY KEY (APINAME,APICREATOR,APIVERSION,APICREATORTENANTDOMAIN);\n     ```\n-\n+!!! note\n+    Type and name of a column of few tables were changed through WUM in version 2.6. It is important to add the above\n+    change into your database prior to migration. So execute the below query to \n+    confirm whether the above change is already available in your system.\n+    ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f73fedc61f02b8fd34b340a55a4ff81d2f42f599"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2Mjc3OTgw", "url": "https://github.com/wso2/docs-apim/pull/1450#pullrequestreview-446277980", "createdAt": "2020-07-10T09:59:02Z", "commit": {"oid": "f73fedc61f02b8fd34b340a55a4ff81d2f42f599"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1759, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}