{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0MzY5NzE3", "number": 1350, "title": "[Docs]Docs Changes fix for apim-tooling #267", "bodyText": "Purpose\nDocument changes related to https://github.com/wso2/product-apim-tooling/issues267 issue in apictl.\nCurrently , --environment, --token flags are mandatory and a user has to provide either --apim or the other 4 flags (--publisher, --admin, --devportal, --registration) when adding an environment. As an improvement, it is possible to make --token flag optional by using https:localhost:9443/oauth2/token endpoint as same as we do in the UI (without using the gateway endpoint - 8243/token).\nWhen doing this, it needs to inform the user, that when generating keys, we are going to use the https:localhost:9443/oauth2/token endpoint by default and if he/she is using a third party key manager, they need to provide that endpoint as --token endpoint, to be used in the get-keys operation.\nGoals\nFixes wso2/product-apim-tooling#333\nApproach\n/learn/api-controller/getting-started-with-wso2-api-controller/\n\n/learn/api-controller/ci-cd-with-wso2-api-management/\n\n\nUser stories\n\nAdding a new environment.\nGenerating Keys for an environment.\n\nRelated PRs\nTest environment\nMacOs 10.15.5", "createdAt": "2020-06-15T08:20:27Z", "url": "https://github.com/wso2/docs-apim/pull/1350", "merged": true, "mergeCommit": {"oid": "312f2a6a2cce06ee740c723c31017de506d5a62c"}, "closed": true, "closedAt": "2020-06-17T16:19:59Z", "author": {"login": "Chamindu36"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqdHhjAH2gAyNDM0MzY5NzE3OjBlNzU3YmMwMmEyOGFiODdjOWI3NDkyN2ZhYWJkYjczODAyYTE5MDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcsMUXFgFqTQzMjU2NDQ2Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0e757bc02a28ab87c9b74927faabdb73802a1907", "author": {"user": {"login": "Chamindu36", "name": "Chamindu Udakara"}}, "url": "https://github.com/wso2/docs-apim/commit/0e757bc02a28ab87c9b74927faabdb73802a1907", "committedDate": "2020-06-12T06:46:22Z", "message": "Doc fix for apim-tooling #267"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwNTM2Nzcy", "url": "https://github.com/wso2/docs-apim/pull/1350#pullrequestreview-430536772", "createdAt": "2020-06-15T11:00:12Z", "commit": {"oid": "0e757bc02a28ab87c9b74927faabdb73802a1907"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMTowMDoxMlrOGjtVDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMTowMDoxMlrOGjtVDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA5NjAxNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        `--token` or `-t` : New token endpoint URL of Environment (Which overrides previously provided token endpoint with add-env command)       \n          \n          \n            \n                        `--token` or `-t` : New token endpoint of the environment (which overrides previously provided token endpoint with add-env command)", "url": "https://github.com/wso2/docs-apim/pull/1350#discussion_r440096014", "createdAt": "2020-06-15T11:00:12Z", "author": {"login": "npamudika"}, "path": "en/docs/learn/api-controller/ci-cd-with-wso2-api-management.md", "diffHunk": "@@ -279,9 +281,14 @@ Run any of the following CTL commands to get keys for the API/API Product.\n             `--environment` or `-e` : Key generation environment  \n             `--name` or `-n` : API or API Product to enerate keys for   \n         -   Optional :  \n+            `--token` or `-t` : New token endpoint URL of Environment (Which overrides previously provided token endpoint with add-env command)       ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e757bc02a28ab87c9b74927faabdb73802a1907"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwNTM3MjMy", "url": "https://github.com/wso2/docs-apim/pull/1350#pullrequestreview-430537232", "createdAt": "2020-06-15T11:00:54Z", "commit": {"oid": "0e757bc02a28ab87c9b74927faabdb73802a1907"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMTowMDo1NFrOGjtWjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMTowMDo1NFrOGjtWjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA5NjM5OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    You can override the given token endpoint or default token endpoint using `--token` (`-t`) optional flag and providing the new token endpoint\n          \n          \n            \n                    You can override the given token endpoint or the default token endpoint using `--token` (`-t`) optional flag providing a new token endpoint", "url": "https://github.com/wso2/docs-apim/pull/1350#discussion_r440096398", "createdAt": "2020-06-15T11:00:54Z", "author": {"login": "npamudika"}, "path": "en/docs/learn/api-controller/ci-cd-with-wso2-api-management.md", "diffHunk": "@@ -279,9 +281,14 @@ Run any of the following CTL commands to get keys for the API/API Product.\n             `--environment` or `-e` : Key generation environment  \n             `--name` or `-n` : API or API Product to enerate keys for   \n         -   Optional :  \n+            `--token` or `-t` : New token endpoint URL of Environment (Which overrides previously provided token endpoint with add-env command)       \n             `--provider` or `-r` : Provider of the API or API Product  \n             `--version` or `-v` : Version of the API or API Product (Currently API Products do not have versions)\n \n+    !!! note\n+        NOTE: Both the flags (`--name` (`-n`) and `--environment` (`-e`)) are mandatory.\n+        You can override the given token endpoint or default token endpoint using `--token` (`-t`) optional flag and providing the new token endpoint", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e757bc02a28ab87c9b74927faabdb73802a1907"}, "originalPosition": 47}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwNTM3NjQw", "url": "https://github.com/wso2/docs-apim/pull/1350#pullrequestreview-430537640", "createdAt": "2020-06-15T11:01:36Z", "commit": {"oid": "0e757bc02a28ab87c9b74927faabdb73802a1907"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMTowMTozNlrOGjtXxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMTowMTozNlrOGjtXxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA5NjcwOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        You can either provide only the 1 flags `--apim` , or all the other 5 flags (`--registration`, `--publisher`, `--devportal`, `--admin`, `--token`) without providing `--apim` flag.\n          \n          \n            \n                        You can either provide only the flag `--apim` , or all the other 5 flags (`--registration`, `--publisher`, `--devportal`, `--admin`, `--token`) without providing `--apim` flag.", "url": "https://github.com/wso2/docs-apim/pull/1350#discussion_r440096709", "createdAt": "2020-06-15T11:01:36Z", "author": {"login": "npamudika"}, "path": "en/docs/learn/api-controller/getting-started-with-wso2-api-controller.md", "diffHunk": "@@ -111,48 +111,50 @@ For more information, see [Download and Initialize the CTL Tool](#download-and-i\n             -    Required :  \n \n                 `--environment` or `-e` : Name of the environment to be added   \n-                `--token` : Token endpoint for the environment\n                 AND (either)\n                 `--apim` : API Manager endpoint for the environments\n                 OR (the following 4)\n                 `--registration` : Registration endpoint for the environment \n                 `--admin` : Admin endpoint for the environment  \n                 `--publisher` : Publisher endpoint for the environment  \n                 `--devportal` : DevPortal endpoint for the environment \n+            -   Optional :\n+\n+                `--token` : Token endpoint for the environment\n             \n         !!! tip\n             When adding an environment, when the optional flags are not given, CTL will automatically derive those from `--apim` flag value.\n \n         !!! note\n-            The flags `--environment (-e)` and `--token` are mandatory.\n-            You can either provide only the 2 flags `--apim` and `--token`, or all the other 5 flags (`--registration`, `--publisher`, `--devportal`, `--admin`, `--token`) without providing `--apim` flag.\n+            The `--environment (-e)` flag is mandatory.\n+            You can either provide only the 1 flags `--apim` , or all the other 5 flags (`--registration`, `--publisher`, `--devportal`, `--admin`, `--token`) without providing `--apim` flag.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e757bc02a28ab87c9b74927faabdb73802a1907"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwNTM4MDA5", "url": "https://github.com/wso2/docs-apim/pull/1350#pullrequestreview-430538009", "createdAt": "2020-06-15T11:02:09Z", "commit": {"oid": "0e757bc02a28ab87c9b74927faabdb73802a1907"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMTowMjowOVrOGjtY6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMTowMjowOVrOGjtY6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDA5NzAwMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        In both these  cases `--token`  flag is optional and can be used to provide user preferred token endpoint.\n          \n          \n            \n                        In both of the above cases `--token`  flag is optional and can be used to provide an user preferred token endpoint.", "url": "https://github.com/wso2/docs-apim/pull/1350#discussion_r440097002", "createdAt": "2020-06-15T11:02:09Z", "author": {"login": "npamudika"}, "path": "en/docs/learn/api-controller/getting-started-with-wso2-api-controller.md", "diffHunk": "@@ -111,48 +111,50 @@ For more information, see [Download and Initialize the CTL Tool](#download-and-i\n             -    Required :  \n \n                 `--environment` or `-e` : Name of the environment to be added   \n-                `--token` : Token endpoint for the environment\n                 AND (either)\n                 `--apim` : API Manager endpoint for the environments\n                 OR (the following 4)\n                 `--registration` : Registration endpoint for the environment \n                 `--admin` : Admin endpoint for the environment  \n                 `--publisher` : Publisher endpoint for the environment  \n                 `--devportal` : DevPortal endpoint for the environment \n+            -   Optional :\n+\n+                `--token` : Token endpoint for the environment\n             \n         !!! tip\n             When adding an environment, when the optional flags are not given, CTL will automatically derive those from `--apim` flag value.\n \n         !!! note\n-            The flags `--environment (-e)` and `--token` are mandatory.\n-            You can either provide only the 2 flags `--apim` and `--token`, or all the other 5 flags (`--registration`, `--publisher`, `--devportal`, `--admin`, `--token`) without providing `--apim` flag.\n+            The `--environment (-e)` flag is mandatory.\n+            You can either provide only the 1 flags `--apim` , or all the other 5 flags (`--registration`, `--publisher`, `--devportal`, `--admin`, `--token`) without providing `--apim` flag.\n             If you are omitting any of `--registration`, `--publisher`, `--devportal`, `--admin` flags, you need to specify `--apim` flag with the API Manager endpoint.\n+            In both these  cases `--token`  flag is optional and can be used to provide user preferred token endpoint.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0e757bc02a28ab87c9b74927faabdb73802a1907"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03df8e92cdcc3cd7ab61b7770f096b864b513009", "author": {"user": {"login": "Chamindu36", "name": "Chamindu Udakara"}}, "url": "https://github.com/wso2/docs-apim/commit/03df8e92cdcc3cd7ab61b7770f096b864b513009", "committedDate": "2020-06-15T12:18:57Z", "message": "Fixing requested changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2aaa0ca41bc564f80eb76ef4e54d7e0ec615faa0", "author": {"user": {"login": "Mariangela", "name": "Mariangela Hills"}}, "url": "https://github.com/wso2/docs-apim/commit/2aaa0ca41bc564f80eb76ef4e54d7e0ec615faa0", "committedDate": "2020-06-17T16:19:40Z", "message": "Updated grammar"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyNTY0NDYz", "url": "https://github.com/wso2/docs-apim/pull/1350#pullrequestreview-432564463", "createdAt": "2020-06-17T16:19:51Z", "commit": {"oid": "2aaa0ca41bc564f80eb76ef4e54d7e0ec615faa0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1831, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}