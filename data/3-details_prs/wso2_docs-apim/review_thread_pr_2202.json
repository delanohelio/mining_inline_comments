{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE1ODQwMjg1", "number": 2202, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwNTo0MzoxMVrOE189gA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwNTo0MzoxMVrOE189gA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI1MDA4NzY4OnYy", "diffSide": "RIGHT", "path": "en/docs/administer/managing-users-and-roles/managing-users-for-admin-portal.md", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwNTo0MzoxMVrOHug2pg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwNjo0Mzo0NVrOHuh4dw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODUzNDgyMg==", "bodyText": "Regarding assigning scopes to handle other tasks, I don't think we handle these from the UI. AFAIK we handle role validation only for workflow tasks. So lets remove the To perform other functions........ section.", "url": "https://github.com/wso2/docs-apim/pull/2202#discussion_r518534822", "createdAt": "2020-11-06T05:43:11Z", "author": {"login": "chamilaadhi"}, "path": "en/docs/administer/managing-users-and-roles/managing-users-for-admin-portal.md", "diffHunk": "@@ -0,0 +1,145 @@\n+# Managing Users for Admin Portal\n+\n+A user with an admin role is the API management controller who hosts and manages the gateway, responsible for creating users in the system, assigning roles to them, managing databases and security, etc. That user can access  WSO2 Admin Portal (`https://<APIM_Host>:<APIM_Port>/admin`) and perform the operations of defining workflow tasks and throttling policies, managing analytics configurations, adding gateway labels, etc.\n+\n+But there are situations where we need to limit a user to access the admin portal only and restrict that user to perform other tasks that require admin permissions. Thus admin role which has all the admin-related permissions cannot be assigned to a user who needs admin portal access.\n+\n+In these situations, we need to create a new role permission mapping for a created role and assign it to a user and access the admin portal by that user. Follow the instructions below to configure this:\n+\n+\n+### Step-1- Create a user role\n+\n+1. Sign in to the management console (`https://<APIM_Host>:<APIM_Port>/carbon`) as the admin (default credentials are `admin`/`admin`).\n+\n+2.  Click **Main**, and then click **Add** under **Users and Roles**.\n+    \n+    ![Add users and roles]({{base_path}}/assets/img/administer/add-users-and-roles.png)\n+\n+3.  Click **Add New Role**.\n+\n+    ![Add new role]({{base_path}}/assets/img/administer/add-new-role.png)\n+\n+4. Enter the name of the user role which we are going to assign admin portal access (e.g : `adminPortalManager`) and click **Next**\n+\n+    ![Add admin portal role]({{base_path}}/assets/img/administer/add-admin-portal-role.png)\n+\n+5.  The permissions page opens. click **Finish** without selecting any permissions.\n+\n+Now a new user role `adminPortalManager` has been created without any associated permissions.\n+\n+### Step-2- Create role permissions\n+\n+1. Sign in to Admin Portal (`https://<APIM_Host>:<APIM_Port>/admin`) using `admin`/`admin` and navigate to Settings > Role Permissions in the Admin Portal. \n+\n+2. Click **Add role permission**.\n+\n+    ![Add Role Permission]({{base_path}}/assets/img/administer/add-role-permission.png) \n+\n+3. Provide the  role name which is created in step-1. Then click **Next** to proceed.\n+\n+    ![Add Role Mapping]({{base_path}}/assets/img/administer/add-new-role-mapping.png)\n+    \n+4. In **Select permissions** select **Custom Permissions** and  navigate to  **Permissions** --> **admin**. \n+Assign the scopes listed in the table below according to the role of the user.\n+\n+    !!! note\n+            You need to assign `apim:api_workflow_view`, `apim:api_workflow_approve`, `apim:admin_settings`, `apim:tenantInfo` to any user to login and access a minimum version of admin portal.\n+             ![Minimum Version of Admin Portal]({{base_path}}/assets/img/administer/minimum-version-admin-portal.png)\n+             \n+            A user with these scopes will get access to manage workflow tasks.  To perform other functions, relevant scopes need to be assigned on top of these 4 scopes. For example, if you want to restrict an Admin Portal user to manage **deny policies** then assign `apim:bl_view` and `apim:bl_manage` scopes with the above scopes mentioned.\n+    ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1255666a5ab352c7d1f34e2a868b0815f73fc0e7"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODU1MTY3MQ==", "bodyText": "As per our offline discussion removed that section. 6c27a35", "url": "https://github.com/wso2/docs-apim/pull/2202#discussion_r518551671", "createdAt": "2020-11-06T06:43:45Z", "author": {"login": "Sarangan0219"}, "path": "en/docs/administer/managing-users-and-roles/managing-users-for-admin-portal.md", "diffHunk": "@@ -0,0 +1,145 @@\n+# Managing Users for Admin Portal\n+\n+A user with an admin role is the API management controller who hosts and manages the gateway, responsible for creating users in the system, assigning roles to them, managing databases and security, etc. That user can access  WSO2 Admin Portal (`https://<APIM_Host>:<APIM_Port>/admin`) and perform the operations of defining workflow tasks and throttling policies, managing analytics configurations, adding gateway labels, etc.\n+\n+But there are situations where we need to limit a user to access the admin portal only and restrict that user to perform other tasks that require admin permissions. Thus admin role which has all the admin-related permissions cannot be assigned to a user who needs admin portal access.\n+\n+In these situations, we need to create a new role permission mapping for a created role and assign it to a user and access the admin portal by that user. Follow the instructions below to configure this:\n+\n+\n+### Step-1- Create a user role\n+\n+1. Sign in to the management console (`https://<APIM_Host>:<APIM_Port>/carbon`) as the admin (default credentials are `admin`/`admin`).\n+\n+2.  Click **Main**, and then click **Add** under **Users and Roles**.\n+    \n+    ![Add users and roles]({{base_path}}/assets/img/administer/add-users-and-roles.png)\n+\n+3.  Click **Add New Role**.\n+\n+    ![Add new role]({{base_path}}/assets/img/administer/add-new-role.png)\n+\n+4. Enter the name of the user role which we are going to assign admin portal access (e.g : `adminPortalManager`) and click **Next**\n+\n+    ![Add admin portal role]({{base_path}}/assets/img/administer/add-admin-portal-role.png)\n+\n+5.  The permissions page opens. click **Finish** without selecting any permissions.\n+\n+Now a new user role `adminPortalManager` has been created without any associated permissions.\n+\n+### Step-2- Create role permissions\n+\n+1. Sign in to Admin Portal (`https://<APIM_Host>:<APIM_Port>/admin`) using `admin`/`admin` and navigate to Settings > Role Permissions in the Admin Portal. \n+\n+2. Click **Add role permission**.\n+\n+    ![Add Role Permission]({{base_path}}/assets/img/administer/add-role-permission.png) \n+\n+3. Provide the  role name which is created in step-1. Then click **Next** to proceed.\n+\n+    ![Add Role Mapping]({{base_path}}/assets/img/administer/add-new-role-mapping.png)\n+    \n+4. In **Select permissions** select **Custom Permissions** and  navigate to  **Permissions** --> **admin**. \n+Assign the scopes listed in the table below according to the role of the user.\n+\n+    !!! note\n+            You need to assign `apim:api_workflow_view`, `apim:api_workflow_approve`, `apim:admin_settings`, `apim:tenantInfo` to any user to login and access a minimum version of admin portal.\n+             ![Minimum Version of Admin Portal]({{base_path}}/assets/img/administer/minimum-version-admin-portal.png)\n+             \n+            A user with these scopes will get access to manage workflow tasks.  To perform other functions, relevant scopes need to be assigned on top of these 4 scopes. For example, if you want to restrict an Admin Portal user to manage **deny policies** then assign `apim:bl_view` and `apim:bl_manage` scopes with the above scopes mentioned.\n+    ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODUzNDgyMg=="}, "originalCommit": {"oid": "1255666a5ab352c7d1f34e2a868b0815f73fc0e7"}, "originalPosition": 50}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1824, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}