{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIyNzg5Njc4", "number": 1231, "title": "fix for https://github.com/wso2/docs-apim/issues/1129 - master", "bodyText": "Purpose\nFix for #1129", "createdAt": "2020-05-25T14:53:15Z", "url": "https://github.com/wso2/docs-apim/pull/1231", "merged": true, "mergeCommit": {"oid": "a68cfc696eb2c7e1aafa89354f14899f6cd2ba5d"}, "closed": true, "closedAt": "2020-05-26T12:53:45Z", "author": {"login": "Mariangela"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABckxRc9AH2gAyNDIyNzg5Njc4OjlhY2EzNTk5YWY4NTI5YjFmOTYxNmM4NmNjM2I4MjJiNGE4Yzc5YTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclELiRAFqTQxODI2NjM0Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9aca3599af8529b1f9616c86cc3b822b4a8c79a6", "author": {"user": {"login": "Mariangela", "name": "Mariangela Hills"}}, "url": "https://github.com/wso2/docs-apim/commit/9aca3599af8529b1f9616c86cc3b822b4a8c79a6", "committedDate": "2020-05-25T14:51:46Z", "message": "fix for https://github.com/wso2/docs-apim/issues/1129"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3NzgyMDA3", "url": "https://github.com/wso2/docs-apim/pull/1231#pullrequestreview-417782007", "createdAt": "2020-05-25T15:35:00Z", "commit": {"oid": "9aca3599af8529b1f9616c86cc3b822b4a8c79a6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxNTozNTowMFrOGaEsiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQxNTozNTowMFrOGaEsiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTk5MzA5Nw==", "bodyText": "Let's add the configuration of the Keystore path in here as well.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            4. Set the correct keystore password.\n          \n          \n            \n            4. Set the correct Keystore path.\n          \n          \n            \n                If you have created a new Keystore, then define the correct path for the new Keystore in the `-Djavax.net.ssl.keyStore` system property in the `<ANALYTICS_HOME>/wso2/dashboard/bin/carbon.sh` file when you change the Keystore.\n          \n      \n    \n    \n  \n\nAfter this, we can add the changing password step. Please do the same for the worker instructions(in this file) as well. Also please do the same change for the 3.1.0 version and 3.0.0 versions as well.", "url": "https://github.com/wso2/docs-apim/pull/1231#discussion_r429993097", "createdAt": "2020-05-25T15:35:00Z", "author": {"login": "RAVEENSR"}, "path": "en/docs/learn/analytics/configuring-keystores-in-apim-analytics.md", "diffHunk": "@@ -1,175 +1,205 @@\n-# Configuring Keystores in APIM Analytics\n+# Configuring Keystores in API-M Analytics\n \n-WSO2 products use asymmetric cryptography by default for the purposes of authentication and data encryption.\u00a0In asymmetric cryptography, keystores (with key pairs and certificates) are created and stored for the product. Keystore is a repository where private keys and certificates can be stored. It is possible to have multiple keystores so that the keys used for different use cases are kept unique. For more information about keystores and its concepts, see [About Asymmetric Cryptography](../../administer/product-security/configuring-keystores/keystore-basics/about-asymetric-cryptography.md) .\n+WSO2 products use asymmetric cryptography by default for authentication and data encryption.\u00a0In asymmetric cryptography, keystores (with key pairs and certificates) are created and stored for the product. Keystore is a repository where private keys and certificates can be stored. It is possible to have multiple keystores so that the keys used for different use cases are kept unique. For more information about keystores and its concepts, see [About Asymmetric Cryptography]({{base_path}}/install-and-setup/setup/security/configuring-keystores/keystore-basics/about-asymetric-cryptography).\n \n-In WSO2 APIM Analytics a set of keystores can be configured and used for different use cases in both dashboard and worker profiles.\n+In WSO2 API-M Analytics a set of keystores can be configured and used for different use cases in both dashboard and worker profiles.\n \n-The `wso2carbon.jks` keystore file, which is shipped with all WSO2 products, is used as the default keystore for all functions. However, in a production environment, it is recommended to\u00a0[create new keystores](../../administer/product-security/configuring-keystores/keystore-basics/creating-new-keystores.md)\u00a0with new keys and certificates. If you have created a new keystore and updated the `client-truststore.jks` file resides in `<API-M_ANALYTICS_HOME>/resources/security` directory, you must update the `deployment.yaml` file of the corresponding profile in order to make the keystore work.\n+The `wso2carbon.jks` keystore file, which is shipped with all WSO2 products, is used as the default keystore for all functions. However, in a production environment, it is recommended to\u00a0[create new keystores]({{base_path}}/install-and-setup/setup/security/configuring-keystores/keystore-basics/creating-new-keystores)\u00a0with new keys and certificates. If you have created a new keystore and updated the `client-truststore.jks` file, which resides in the `<API-M_ANALYTICS_HOME>/resources/security` directory, you must update the `deployment.yaml` file of the corresponding profile in order to make the keystore work.\n \n-## Configuring Keystores in Dashboard Profile\n+## Configuring keystores in dashboard profile\n \n-For the dashboard profile the required updates need to be done to the `<API-M_ANALYTICS_HOME>/conf/dashboard/deployment.yaml` file for the following use cases.\n+!!! note\n+    Other than explicitly mentioned, you need to do all the following configuration updates related to the dashboard profile in the `<API-M_ANALYTICS_HOME>/conf/dashboard/deployment.yaml` file.\n \n-1. **Databridge configurations**\n+1. Update the Databridge configurations.\n+\n+    This is used for authenticating communication over SSL/TLS between API Manager and API-M Analytics. Handles thrift and binary transports.  \n \n-    This is used for authenticating communication over SSL/TLS between API Manager and APIM Analytics. Handles thrift and binary transports.  \n     ```yaml\n-      databridge.config:\n-        ... \n-        keyStoreLocation : ${sys:carbon.home}/resources/security/wso2carbon.jks\n-        keyStorePassword : wso2carbon\n-        ... \n+    databridge.config:\n+      ... \n+      keyStoreLocation : ${sys:carbon.home}/resources/security/wso2carbon.jks\n+      keyStorePassword : wso2carbon\n+      ... \n     ```\n     The elements in the above configuration are described below:\n        \n     | Element                | Description                                                      |\n     |------------------------|------------------------------------------------------------------|\n-    | **keyStoreLocation**   | Name of the keystore file. **The file must be located in `<API-M_ANALYTICS_HOME>/resources/security`** |\n+    | **keyStoreLocation**   | Name of the keystore file. **The file must be located in the `<API-M_ANALYTICS_HOME>/resources/security` directory.** |\n     | **keyStorePassword**   | Keystore password                                                |\n \n-2. **HTTP transport configuration**\n+2. Update the HTTP transport configurations.\n    \n-    This is used for authentication, encryption and signing for the analytics dashboard web application.\n+    This is used for authentication, encryption, and signing with regard to the analytics dashboard web application.\n     ```yaml\n-       wso2.transport.http:\n-         ...\n-         listenerConfigurations:\n-           - id: \"default-https\"\n-             ...\n-             keyStoreFile: \"${carbon.home}/resources/security/wso2carbon.jks\"\n-             keyStorePassword: wso2carbon\n-             certPass: wso2carbon \n+    wso2.transport.http:\n+      ...\n+      listenerConfigurations:\n+        - id: \"default-https\"\n+          ...\n+          keyStoreFile: \"${carbon.home}/resources/security/wso2carbon.jks\"\n+          keyStorePassword: wso2carbon\n+          certPass: wso2carbon \n     ```\n     The elements in the above configuration are described below:\n       \n     | Element                | Description                                                      |\n     |------------------------|------------------------------------------------------------------|\n-    | **keyStoreFile**       | Name of the keystore file. **The file must be located in `<API-M_ANALYTICS_HOME>/resources/security`** |\n+    | **keyStoreFile**       | Name of the keystore file. **The file must be located in the `<API-M_ANALYTICS_HOME>/resources/security` directory.** |\n     | **keyStorePassword**   | Keystore password                                                |\n     | **certPass**           | Private key password                                             |\n    \n-3. **Securevault configuration**\n-   \n-    This is used to store encrypted passwords that are mapped to aliases.\n-    ```yaml\n-       wso2.securevault:\n-         secretRepository:\n-           ...\n-           parameters:\n-             privateKeyAlias: wso2carbon\n-             keystoreLocation: ${sys:carbon.home}/resources/security/securevault.jks\n-             ... \n-    ```\n-    The elements in the above configuration are described below:\n-      \n-    | Element                | Description                                                      |\n-    |------------------------|------------------------------------------------------------------|\n-    | **privateKeyAlias**    | Private key password                                                |\n-    | **keyStoreLocation**   | Name of the keystore file. **The file must be located in `<API-M_ANALYTICS_HOME>/resources/security`** |\n+3. Update the Secure Vault configurations.\n    \n+     1. Update the configurations in the `deployment.yaml` file.\n+    \n+         The Secure Vault configurations are used to store encrypted passwords that are mapped to aliases.\n \n-## Configuring Keystores in Worker Profile\n+         ```yaml\n+         wso2.securevault:\n+           secretRepository:\n+             ...\n+             parameters:\n+               privateKeyAlias: wso2carbon\n+                keystoreLocation: ${sys:carbon.home}/resources/security/securevault.jks\n+               ... \n+         ```\n+        The elements in the above configuration are described below:\n+          \n+        | Element                | Description                                                      |\n+        |------------------------|------------------------------------------------------------------|\n+        | **privateKeyAlias**    | Private key alias                                                |\n+        | **keyStoreLocation**   | Name of the keystore file. **The file must be located in the `<API-M_ANALYTICS_HOME>/resources/security` directory.** |\n+\n+    2. Provide the keystore and private key password in the Base64 encoded format in the `<ANALYTICS_HOME>/conf/dashboard/master-keys.yaml` file.\n+\n+        ??? info \"Click here for more info on the `master-keys.yaml` file\"\n+            The base64 encoded plaintext keystore password and the base64 encoded plaintext private password of the keystore used for Secure Vault is defined in the master-keys.yaml file. WSO2 Carbon Server reads this file to obtain these two passwords, so that it can decrypt the passwords in the `secrets.properties` file in order to start the server.\n+\n+4. Set the correct keystore password.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9aca3599af8529b1f9616c86cc3b822b4a8c79a6"}, "originalPosition": 124}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f872500a49ef0c6223fab16659a66f2e133faa22", "author": {"user": {"login": "Mariangela", "name": "Mariangela Hills"}}, "url": "https://github.com/wso2/docs-apim/commit/f872500a49ef0c6223fab16659a66f2e133faa22", "committedDate": "2020-05-26T09:51:56Z", "message": "Updated based on review comment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MTY2MDM1", "url": "https://github.com/wso2/docs-apim/pull/1231#pullrequestreview-418166035", "createdAt": "2020-05-26T10:25:31Z", "commit": {"oid": "f872500a49ef0c6223fab16659a66f2e133faa22"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMDoyNTozMVrOGaYFyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMDoyNjowNFrOGaYG-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDMxMDg1OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                This is used for authentication, encryption, and signing for the analytics dashboard web application.\n          \n          \n            \n                This is used for authentication, encryption, and signing for the analytics worker.", "url": "https://github.com/wso2/docs-apim/pull/1231#discussion_r430310859", "createdAt": "2020-05-26T10:25:31Z", "author": {"login": "RAVEENSR"}, "path": "en/docs/learn/analytics/configuring-keystores-in-apim-analytics.md", "diffHunk": "@@ -1,175 +1,213 @@\n-# Configuring Keystores in APIM Analytics\n+# Configuring Keystores in API-M Analytics\n \n-WSO2 products use asymmetric cryptography by default for the purposes of authentication and data encryption.\u00a0In asymmetric cryptography, keystores (with key pairs and certificates) are created and stored for the product. Keystore is a repository where private keys and certificates can be stored. It is possible to have multiple keystores so that the keys used for different use cases are kept unique. For more information about keystores and its concepts, see [About Asymmetric Cryptography](../../administer/product-security/configuring-keystores/keystore-basics/about-asymetric-cryptography.md) .\n+WSO2 products use asymmetric cryptography by default for authentication and data encryption.\u00a0In asymmetric cryptography, keystores (with key pairs and certificates) are created and stored for the product. Keystore is a repository where private keys and certificates can be stored. It is possible to have multiple keystores so that the keys used for different use cases are kept unique. For more information about keystores and its concepts, see [About Asymmetric Cryptography]({{base_path}}/install-and-setup/setup/security/configuring-keystores/keystore-basics/about-asymetric-cryptography).\n \n-In WSO2 APIM Analytics a set of keystores can be configured and used for different use cases in both dashboard and worker profiles.\n+In WSO2 API-M Analytics a set of keystores can be configured and used for different use cases in both dashboard and worker profiles.\n \n-The `wso2carbon.jks` keystore file, which is shipped with all WSO2 products, is used as the default keystore for all functions. However, in a production environment, it is recommended to\u00a0[create new keystores](../../administer/product-security/configuring-keystores/keystore-basics/creating-new-keystores.md)\u00a0with new keys and certificates. If you have created a new keystore and updated the `client-truststore.jks` file resides in `<API-M_ANALYTICS_HOME>/resources/security` directory, you must update the `deployment.yaml` file of the corresponding profile in order to make the keystore work.\n+The `wso2carbon.jks` keystore file, which is shipped with all WSO2 products, is used as the default keystore for all functions. However, in a production environment, it is recommended to\u00a0[create new keystores]({{base_path}}/install-and-setup/setup/security/configuring-keystores/keystore-basics/creating-new-keystores)\u00a0with new keys and certificates. If you have created a new keystore and updated the `client-truststore.jks` file, which resides in the `<API-M_ANALYTICS_HOME>/resources/security` directory, you must update the `deployment.yaml` file of the corresponding profile in order to make the keystore work.\n \n-## Configuring Keystores in Dashboard Profile\n+## Configuring keystores in dashboard profile\n \n-For the dashboard profile the required updates need to be done to the `<API-M_ANALYTICS_HOME>/conf/dashboard/deployment.yaml` file for the following use cases.\n+!!! note\n+    Other than explicitly mentioned, you need to do all the following configuration updates related to the dashboard profile in the `<API-M_ANALYTICS_HOME>/conf/dashboard/deployment.yaml` file.\n \n-1. **Databridge configurations**\n+1. Update the Databridge configurations.\n+\n+    This is used for authenticating communication over SSL/TLS between API Manager and API-M Analytics. Handles thrift and binary transports.  \n \n-    This is used for authenticating communication over SSL/TLS between API Manager and APIM Analytics. Handles thrift and binary transports.  \n     ```yaml\n-      databridge.config:\n-        ... \n-        keyStoreLocation : ${sys:carbon.home}/resources/security/wso2carbon.jks\n-        keyStorePassword : wso2carbon\n-        ... \n+    databridge.config:\n+      ... \n+      keyStoreLocation : ${sys:carbon.home}/resources/security/wso2carbon.jks\n+      keyStorePassword : wso2carbon\n+      ... \n     ```\n     The elements in the above configuration are described below:\n        \n     | Element                | Description                                                      |\n     |------------------------|------------------------------------------------------------------|\n-    | **keyStoreLocation**   | Name of the keystore file. **The file must be located in `<API-M_ANALYTICS_HOME>/resources/security`** |\n+    | **keyStoreLocation**   | Name of the keystore file. **The file must be located in the `<API-M_ANALYTICS_HOME>/resources/security` directory.** |\n     | **keyStorePassword**   | Keystore password                                                |\n \n-2. **HTTP transport configuration**\n+2. Update the HTTP transport configurations.\n    \n-    This is used for authentication, encryption and signing for the analytics dashboard web application.\n+    This is used for authentication, encryption, and signing with regard to the analytics dashboard web application.\n     ```yaml\n-       wso2.transport.http:\n-         ...\n-         listenerConfigurations:\n-           - id: \"default-https\"\n-             ...\n-             keyStoreFile: \"${carbon.home}/resources/security/wso2carbon.jks\"\n-             keyStorePassword: wso2carbon\n-             certPass: wso2carbon \n+    wso2.transport.http:\n+      ...\n+      listenerConfigurations:\n+        - id: \"default-https\"\n+          ...\n+          keyStoreFile: \"${carbon.home}/resources/security/wso2carbon.jks\"\n+          keyStorePassword: wso2carbon\n+          certPass: wso2carbon \n     ```\n     The elements in the above configuration are described below:\n       \n     | Element                | Description                                                      |\n     |------------------------|------------------------------------------------------------------|\n-    | **keyStoreFile**       | Name of the keystore file. **The file must be located in `<API-M_ANALYTICS_HOME>/resources/security`** |\n+    | **keyStoreFile**       | Name of the keystore file. **The file must be located in the `<API-M_ANALYTICS_HOME>/resources/security` directory.** |\n     | **keyStorePassword**   | Keystore password                                                |\n     | **certPass**           | Private key password                                             |\n    \n-3. **Securevault configuration**\n+3. Update the Secure Vault configurations.\n    \n-    This is used to store encrypted passwords that are mapped to aliases.\n-    ```yaml\n-       wso2.securevault:\n-         secretRepository:\n-           ...\n-           parameters:\n-             privateKeyAlias: wso2carbon\n-             keystoreLocation: ${sys:carbon.home}/resources/security/securevault.jks\n-             ... \n-    ```\n-    The elements in the above configuration are described below:\n+     1. Update the configurations in the `deployment.yaml` file.\n+    \n+         The Secure Vault configurations are used to store encrypted passwords that are mapped to aliases.\n+\n+         ```yaml\n+         wso2.securevault:\n+           secretRepository:\n+             ...\n+             parameters:\n+               privateKeyAlias: wso2carbon\n+                keystoreLocation: ${sys:carbon.home}/resources/security/securevault.jks\n+               ... \n+         ```\n+        The elements in the above configuration are described below:\n+          \n+        | Element                | Description                                                      |\n+        |------------------------|------------------------------------------------------------------|\n+        | **privateKeyAlias**    | Private key alias                                                |\n+        | **keyStoreLocation**   | Name of the keystore file. **The file must be located in the `<API-M_ANALYTICS_HOME>/resources/security` directory.** |\n+\n+    2. Provide the keystore and private key password in the Base64 encoded format in the `<ANALYTICS_HOME>/conf/dashboard/master-keys.yaml` file.\n+\n+        ??? info \"Click here for more info on the `master-keys.yaml` file\"\n+            The base64 encoded plaintext keystore password and the base64 encoded plaintext private password of the keystore used for Secure Vault is defined in the master-keys.yaml file. WSO2 Carbon Server reads this file to obtain these two passwords, so that it can decrypt the passwords in the `secrets.properties` file in order to start the server.\n+\n+4. Set the new keystore details when you change the keystore.\n+\n+      1. Navigate to the <ANALYTICS_HOME>/wso2/dashboard/bin/carbon.sh` file.\n       \n-    | Element                | Description                                                      |\n-    |------------------------|------------------------------------------------------------------|\n-    | **privateKeyAlias**    | Private key password                                                |\n-    | **keyStoreLocation**   | Name of the keystore file. **The file must be located in `<API-M_ANALYTICS_HOME>/resources/security`** |\n-   \n+      2. Define the correct keystore path for the `Djavax.net.ssl.keyStore` system property.\n+      \n+      3. Define the correct keystore password for the `Djavax.net.ssl.keyStorePassword` system property.\n+\n+## Configuring keystores in worker profile\n \n-## Configuring Keystores in Worker Profile\n+!!! note\n+    Other than explicitly mentioned, you need to do all the following configuration updates related to the worker profile in the `<API-M_ANALYTICS_HOME>/conf/worker/deployment.yaml` file.\n \n-For the dashboard profile the required updates need to be done to the `<API-M_ANALYTICS_HOME>/conf/worker/deployment.yaml` file for following use cases.\n+1. Update the databridge configurations.\n \n-1. **Databridge configurations**\n+    This is used for authenticating communication over SSL/TLS between API Manager and API-M Analytics. Handles thrift and binary transports.\n \n-    This is used for authenticating communication over SSL/TLS between API Manager and APIM Analytics. Handles thrift and binary transports.\n     ```yaml\n-       databridge.config:\n-         ... \n-         keyStoreLocation : ${sys:carbon.home}/resources/security/wso2carbon.jks\n-         keyStorePassword : wso2carbon\n-         ... \n+    databridge.config:\n+      ... \n+      keyStoreLocation : ${sys:carbon.home}/resources/security/wso2carbon.jks\n+      keyStorePassword : wso2carbon\n+      ... \n     ```\n     The elements in the above configuration are described below:\n    \n     | Element                | Description                                                      |\n     |------------------------|------------------------------------------------------------------|\n-    | **keyStoreLocation**   | Name of the keystore file. **The file must be located in `<API-M_ANALYTICS_HOME>/resources/security`** |\n+    | **keyStoreLocation**   | Name of the keystore file. **The file must be located in the `<API-M_ANALYTICS_HOME>/resources/security` directory.** |\n     | **keyStorePassword**   | Keystore password                                                |\n \n-2. **HTTP transport configuration**\n+2. Update the HTTP transport configurations.\n \n-    This is used for authentication, encryption and signing for the analytics dashboard web application.\n+    This is used for authentication, encryption, and signing for the analytics dashboard web application.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f872500a49ef0c6223fab16659a66f2e133faa22"}, "originalPosition": 167}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDMxMTE2MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  1. Navigate to the <ANALYTICS_HOME>/wso2/dashboard/bin/carbon.sh` file.\n          \n          \n            \n                  1. Navigate to the <ANALYTICS_HOME>/wso2/worker/bin/carbon.sh` file.", "url": "https://github.com/wso2/docs-apim/pull/1231#discussion_r430311161", "createdAt": "2020-05-26T10:26:04Z", "author": {"login": "RAVEENSR"}, "path": "en/docs/learn/analytics/configuring-keystores-in-apim-analytics.md", "diffHunk": "@@ -1,175 +1,213 @@\n-# Configuring Keystores in APIM Analytics\n+# Configuring Keystores in API-M Analytics\n \n-WSO2 products use asymmetric cryptography by default for the purposes of authentication and data encryption.\u00a0In asymmetric cryptography, keystores (with key pairs and certificates) are created and stored for the product. Keystore is a repository where private keys and certificates can be stored. It is possible to have multiple keystores so that the keys used for different use cases are kept unique. For more information about keystores and its concepts, see [About Asymmetric Cryptography](../../administer/product-security/configuring-keystores/keystore-basics/about-asymetric-cryptography.md) .\n+WSO2 products use asymmetric cryptography by default for authentication and data encryption.\u00a0In asymmetric cryptography, keystores (with key pairs and certificates) are created and stored for the product. Keystore is a repository where private keys and certificates can be stored. It is possible to have multiple keystores so that the keys used for different use cases are kept unique. For more information about keystores and its concepts, see [About Asymmetric Cryptography]({{base_path}}/install-and-setup/setup/security/configuring-keystores/keystore-basics/about-asymetric-cryptography).\n \n-In WSO2 APIM Analytics a set of keystores can be configured and used for different use cases in both dashboard and worker profiles.\n+In WSO2 API-M Analytics a set of keystores can be configured and used for different use cases in both dashboard and worker profiles.\n \n-The `wso2carbon.jks` keystore file, which is shipped with all WSO2 products, is used as the default keystore for all functions. However, in a production environment, it is recommended to\u00a0[create new keystores](../../administer/product-security/configuring-keystores/keystore-basics/creating-new-keystores.md)\u00a0with new keys and certificates. If you have created a new keystore and updated the `client-truststore.jks` file resides in `<API-M_ANALYTICS_HOME>/resources/security` directory, you must update the `deployment.yaml` file of the corresponding profile in order to make the keystore work.\n+The `wso2carbon.jks` keystore file, which is shipped with all WSO2 products, is used as the default keystore for all functions. However, in a production environment, it is recommended to\u00a0[create new keystores]({{base_path}}/install-and-setup/setup/security/configuring-keystores/keystore-basics/creating-new-keystores)\u00a0with new keys and certificates. If you have created a new keystore and updated the `client-truststore.jks` file, which resides in the `<API-M_ANALYTICS_HOME>/resources/security` directory, you must update the `deployment.yaml` file of the corresponding profile in order to make the keystore work.\n \n-## Configuring Keystores in Dashboard Profile\n+## Configuring keystores in dashboard profile\n \n-For the dashboard profile the required updates need to be done to the `<API-M_ANALYTICS_HOME>/conf/dashboard/deployment.yaml` file for the following use cases.\n+!!! note\n+    Other than explicitly mentioned, you need to do all the following configuration updates related to the dashboard profile in the `<API-M_ANALYTICS_HOME>/conf/dashboard/deployment.yaml` file.\n \n-1. **Databridge configurations**\n+1. Update the Databridge configurations.\n+\n+    This is used for authenticating communication over SSL/TLS between API Manager and API-M Analytics. Handles thrift and binary transports.  \n \n-    This is used for authenticating communication over SSL/TLS between API Manager and APIM Analytics. Handles thrift and binary transports.  \n     ```yaml\n-      databridge.config:\n-        ... \n-        keyStoreLocation : ${sys:carbon.home}/resources/security/wso2carbon.jks\n-        keyStorePassword : wso2carbon\n-        ... \n+    databridge.config:\n+      ... \n+      keyStoreLocation : ${sys:carbon.home}/resources/security/wso2carbon.jks\n+      keyStorePassword : wso2carbon\n+      ... \n     ```\n     The elements in the above configuration are described below:\n        \n     | Element                | Description                                                      |\n     |------------------------|------------------------------------------------------------------|\n-    | **keyStoreLocation**   | Name of the keystore file. **The file must be located in `<API-M_ANALYTICS_HOME>/resources/security`** |\n+    | **keyStoreLocation**   | Name of the keystore file. **The file must be located in the `<API-M_ANALYTICS_HOME>/resources/security` directory.** |\n     | **keyStorePassword**   | Keystore password                                                |\n \n-2. **HTTP transport configuration**\n+2. Update the HTTP transport configurations.\n    \n-    This is used for authentication, encryption and signing for the analytics dashboard web application.\n+    This is used for authentication, encryption, and signing with regard to the analytics dashboard web application.\n     ```yaml\n-       wso2.transport.http:\n-         ...\n-         listenerConfigurations:\n-           - id: \"default-https\"\n-             ...\n-             keyStoreFile: \"${carbon.home}/resources/security/wso2carbon.jks\"\n-             keyStorePassword: wso2carbon\n-             certPass: wso2carbon \n+    wso2.transport.http:\n+      ...\n+      listenerConfigurations:\n+        - id: \"default-https\"\n+          ...\n+          keyStoreFile: \"${carbon.home}/resources/security/wso2carbon.jks\"\n+          keyStorePassword: wso2carbon\n+          certPass: wso2carbon \n     ```\n     The elements in the above configuration are described below:\n       \n     | Element                | Description                                                      |\n     |------------------------|------------------------------------------------------------------|\n-    | **keyStoreFile**       | Name of the keystore file. **The file must be located in `<API-M_ANALYTICS_HOME>/resources/security`** |\n+    | **keyStoreFile**       | Name of the keystore file. **The file must be located in the `<API-M_ANALYTICS_HOME>/resources/security` directory.** |\n     | **keyStorePassword**   | Keystore password                                                |\n     | **certPass**           | Private key password                                             |\n    \n-3. **Securevault configuration**\n+3. Update the Secure Vault configurations.\n    \n-    This is used to store encrypted passwords that are mapped to aliases.\n-    ```yaml\n-       wso2.securevault:\n-         secretRepository:\n-           ...\n-           parameters:\n-             privateKeyAlias: wso2carbon\n-             keystoreLocation: ${sys:carbon.home}/resources/security/securevault.jks\n-             ... \n-    ```\n-    The elements in the above configuration are described below:\n+     1. Update the configurations in the `deployment.yaml` file.\n+    \n+         The Secure Vault configurations are used to store encrypted passwords that are mapped to aliases.\n+\n+         ```yaml\n+         wso2.securevault:\n+           secretRepository:\n+             ...\n+             parameters:\n+               privateKeyAlias: wso2carbon\n+                keystoreLocation: ${sys:carbon.home}/resources/security/securevault.jks\n+               ... \n+         ```\n+        The elements in the above configuration are described below:\n+          \n+        | Element                | Description                                                      |\n+        |------------------------|------------------------------------------------------------------|\n+        | **privateKeyAlias**    | Private key alias                                                |\n+        | **keyStoreLocation**   | Name of the keystore file. **The file must be located in the `<API-M_ANALYTICS_HOME>/resources/security` directory.** |\n+\n+    2. Provide the keystore and private key password in the Base64 encoded format in the `<ANALYTICS_HOME>/conf/dashboard/master-keys.yaml` file.\n+\n+        ??? info \"Click here for more info on the `master-keys.yaml` file\"\n+            The base64 encoded plaintext keystore password and the base64 encoded plaintext private password of the keystore used for Secure Vault is defined in the master-keys.yaml file. WSO2 Carbon Server reads this file to obtain these two passwords, so that it can decrypt the passwords in the `secrets.properties` file in order to start the server.\n+\n+4. Set the new keystore details when you change the keystore.\n+\n+      1. Navigate to the <ANALYTICS_HOME>/wso2/dashboard/bin/carbon.sh` file.\n       \n-    | Element                | Description                                                      |\n-    |------------------------|------------------------------------------------------------------|\n-    | **privateKeyAlias**    | Private key password                                                |\n-    | **keyStoreLocation**   | Name of the keystore file. **The file must be located in `<API-M_ANALYTICS_HOME>/resources/security`** |\n-   \n+      2. Define the correct keystore path for the `Djavax.net.ssl.keyStore` system property.\n+      \n+      3. Define the correct keystore password for the `Djavax.net.ssl.keyStorePassword` system property.\n+\n+## Configuring keystores in worker profile\n \n-## Configuring Keystores in Worker Profile\n+!!! note\n+    Other than explicitly mentioned, you need to do all the following configuration updates related to the worker profile in the `<API-M_ANALYTICS_HOME>/conf/worker/deployment.yaml` file.\n \n-For the dashboard profile the required updates need to be done to the `<API-M_ANALYTICS_HOME>/conf/worker/deployment.yaml` file for following use cases.\n+1. Update the databridge configurations.\n \n-1. **Databridge configurations**\n+    This is used for authenticating communication over SSL/TLS between API Manager and API-M Analytics. Handles thrift and binary transports.\n \n-    This is used for authenticating communication over SSL/TLS between API Manager and APIM Analytics. Handles thrift and binary transports.\n     ```yaml\n-       databridge.config:\n-         ... \n-         keyStoreLocation : ${sys:carbon.home}/resources/security/wso2carbon.jks\n-         keyStorePassword : wso2carbon\n-         ... \n+    databridge.config:\n+      ... \n+      keyStoreLocation : ${sys:carbon.home}/resources/security/wso2carbon.jks\n+      keyStorePassword : wso2carbon\n+      ... \n     ```\n     The elements in the above configuration are described below:\n    \n     | Element                | Description                                                      |\n     |------------------------|------------------------------------------------------------------|\n-    | **keyStoreLocation**   | Name of the keystore file. **The file must be located in `<API-M_ANALYTICS_HOME>/resources/security`** |\n+    | **keyStoreLocation**   | Name of the keystore file. **The file must be located in the `<API-M_ANALYTICS_HOME>/resources/security` directory.** |\n     | **keyStorePassword**   | Keystore password                                                |\n \n-2. **HTTP transport configuration**\n+2. Update the HTTP transport configurations.\n \n-    This is used for authentication, encryption and signing for the analytics dashboard web application.\n+    This is used for authentication, encryption, and signing for the analytics dashboard web application.\n     ```yaml\n-       wso2.transport.http:\n-         ...\n-         listenerConfigurations:\n-           - id: \"default-https\"\n-             ...\n-             keyStoreFile: \"${carbon.home}/resources/security/wso2carbon.jks\"\n-             keyStorePassword: wso2carbon\n-             certPass: wso2carbon \n+    wso2.transport.http:\n+      ...\n+      listenerConfigurations:\n+        - id: \"default-https\"\n+          ...\n+          keyStoreFile: \"${carbon.home}/resources/security/wso2carbon.jks\"\n+          keyStorePassword: wso2carbon\n+          certPass: wso2carbon \n     ```\n     The elements in the above configuration are described below:\n       \n     | Element                | Description                                                      |\n     |------------------------|------------------------------------------------------------------|\n-    | **keyStoreFile**       | Name of the keystore file. **The file must be located in `<API-M_ANALYTICS_HOME>/resources/security`** |\n+    | **keyStoreFile**       | Name of the keystore file. **The file must be located in the `<API-M_ANALYTICS_HOME>/resources/security` directory.** |\n     | **keyStorePassword**   | Keystore password                                                |\n     | **certPass**           | Private key password                                             |\n    \n-3. **Securevault configuration**\n+3. Update the Secure Vault configurations.\n+   \n+     1. Update the configurations in the `deployment.yaml` file.\n+    \n+         The Secure Vault configurations are used to store encrypted passwords that are mapped to aliases.\n+\n+          ```yaml\n+          wso2.securevault:\n+            secretRepository:\n+              ...\n+              parameters:\n+                privateKeyAlias: wso2carbon\n+                keystoreLocation: ${sys:carbon.home}/resources/security/securevault.jks\n+                ... \n+          ```\n+          The elements in the above configuration are described below:\n+            \n+          | Element                | Description                                                      |\n+          |------------------------|------------------------------------------------------------------|\n+          | **privateKeyAlias**    | Private key alias                                                |\n+          | **keyStoreLocation**   | Name of the keystore file. **The file must be located in the `<API-M_ANALYTICS_HOME>/resources/security` directory.** |\n \n-    This is used to store encrypted passwords that are mapped to aliases.\n-    ```yaml\n-       wso2.securevault:\n-         secretRepository:\n-           ...\n-           parameters:\n-             privateKeyAlias: wso2carbon\n-             keystoreLocation: ${sys:carbon.home}/resources/security/securevault.jks\n-             ... \n-    ```\n-    The elements in the above configuration are described below:\n+     2. Provide the keystore and private key password in the Base64 encoded format in the `<ANALYTICS_HOME>/conf/worker/master-keys.yaml` file.\n+\n+        ??? info \"Click here for more info on the `master-keys.yaml` file\"\n+            The base64 encoded plaintext keystore password and the base64 encoded plaintext private password of the keystore used for Secure Vault is defined in the master-keys.yaml file. WSO2 Carbon Server reads this file to obtain these two passwords, so that it can decrypt the passwords in the `secrets.properties` file in order to start the server.\n+\n+4. Set the new keystore details when you change the keystore.\n+\n+      1. Navigate to the <ANALYTICS_HOME>/wso2/dashboard/bin/carbon.sh` file.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f872500a49ef0c6223fab16659a66f2e133faa22"}, "originalPosition": 236}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e76d66ead1dc8c4f5ec74a68f8c3c80c6d061914", "author": {"user": {"login": "Mariangela", "name": "Mariangela Hills"}}, "url": "https://github.com/wso2/docs-apim/commit/e76d66ead1dc8c4f5ec74a68f8c3c80c6d061914", "committedDate": "2020-05-26T10:58:31Z", "message": "fix for review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MjM3Mzg1", "url": "https://github.com/wso2/docs-apim/pull/1231#pullrequestreview-418237385", "createdAt": "2020-05-26T12:14:52Z", "commit": {"oid": "f872500a49ef0c6223fab16659a66f2e133faa22"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMjoxNDo1M1rOGabe1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMjoxNDo1M1rOGabe1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDM2NjQyMQ==", "bodyText": "Still, this change is not fixed.", "url": "https://github.com/wso2/docs-apim/pull/1231#discussion_r430366421", "createdAt": "2020-05-26T12:14:53Z", "author": {"login": "RAVEENSR"}, "path": "en/docs/learn/analytics/configuring-keystores-in-apim-analytics.md", "diffHunk": "@@ -1,175 +1,213 @@\n-# Configuring Keystores in APIM Analytics\n+# Configuring Keystores in API-M Analytics\n \n-WSO2 products use asymmetric cryptography by default for the purposes of authentication and data encryption.\u00a0In asymmetric cryptography, keystores (with key pairs and certificates) are created and stored for the product. Keystore is a repository where private keys and certificates can be stored. It is possible to have multiple keystores so that the keys used for different use cases are kept unique. For more information about keystores and its concepts, see [About Asymmetric Cryptography](../../administer/product-security/configuring-keystores/keystore-basics/about-asymetric-cryptography.md) .\n+WSO2 products use asymmetric cryptography by default for authentication and data encryption.\u00a0In asymmetric cryptography, keystores (with key pairs and certificates) are created and stored for the product. Keystore is a repository where private keys and certificates can be stored. It is possible to have multiple keystores so that the keys used for different use cases are kept unique. For more information about keystores and its concepts, see [About Asymmetric Cryptography]({{base_path}}/install-and-setup/setup/security/configuring-keystores/keystore-basics/about-asymetric-cryptography).\n \n-In WSO2 APIM Analytics a set of keystores can be configured and used for different use cases in both dashboard and worker profiles.\n+In WSO2 API-M Analytics a set of keystores can be configured and used for different use cases in both dashboard and worker profiles.\n \n-The `wso2carbon.jks` keystore file, which is shipped with all WSO2 products, is used as the default keystore for all functions. However, in a production environment, it is recommended to\u00a0[create new keystores](../../administer/product-security/configuring-keystores/keystore-basics/creating-new-keystores.md)\u00a0with new keys and certificates. If you have created a new keystore and updated the `client-truststore.jks` file resides in `<API-M_ANALYTICS_HOME>/resources/security` directory, you must update the `deployment.yaml` file of the corresponding profile in order to make the keystore work.\n+The `wso2carbon.jks` keystore file, which is shipped with all WSO2 products, is used as the default keystore for all functions. However, in a production environment, it is recommended to\u00a0[create new keystores]({{base_path}}/install-and-setup/setup/security/configuring-keystores/keystore-basics/creating-new-keystores)\u00a0with new keys and certificates. If you have created a new keystore and updated the `client-truststore.jks` file, which resides in the `<API-M_ANALYTICS_HOME>/resources/security` directory, you must update the `deployment.yaml` file of the corresponding profile in order to make the keystore work.\n \n-## Configuring Keystores in Dashboard Profile\n+## Configuring keystores in dashboard profile\n \n-For the dashboard profile the required updates need to be done to the `<API-M_ANALYTICS_HOME>/conf/dashboard/deployment.yaml` file for the following use cases.\n+!!! note\n+    Other than explicitly mentioned, you need to do all the following configuration updates related to the dashboard profile in the `<API-M_ANALYTICS_HOME>/conf/dashboard/deployment.yaml` file.\n \n-1. **Databridge configurations**\n+1. Update the Databridge configurations.\n+\n+    This is used for authenticating communication over SSL/TLS between API Manager and API-M Analytics. Handles thrift and binary transports.  \n \n-    This is used for authenticating communication over SSL/TLS between API Manager and APIM Analytics. Handles thrift and binary transports.  \n     ```yaml\n-      databridge.config:\n-        ... \n-        keyStoreLocation : ${sys:carbon.home}/resources/security/wso2carbon.jks\n-        keyStorePassword : wso2carbon\n-        ... \n+    databridge.config:\n+      ... \n+      keyStoreLocation : ${sys:carbon.home}/resources/security/wso2carbon.jks\n+      keyStorePassword : wso2carbon\n+      ... \n     ```\n     The elements in the above configuration are described below:\n        \n     | Element                | Description                                                      |\n     |------------------------|------------------------------------------------------------------|\n-    | **keyStoreLocation**   | Name of the keystore file. **The file must be located in `<API-M_ANALYTICS_HOME>/resources/security`** |\n+    | **keyStoreLocation**   | Name of the keystore file. **The file must be located in the `<API-M_ANALYTICS_HOME>/resources/security` directory.** |\n     | **keyStorePassword**   | Keystore password                                                |\n \n-2. **HTTP transport configuration**\n+2. Update the HTTP transport configurations.\n    \n-    This is used for authentication, encryption and signing for the analytics dashboard web application.\n+    This is used for authentication, encryption, and signing with regard to the analytics dashboard web application.\n     ```yaml\n-       wso2.transport.http:\n-         ...\n-         listenerConfigurations:\n-           - id: \"default-https\"\n-             ...\n-             keyStoreFile: \"${carbon.home}/resources/security/wso2carbon.jks\"\n-             keyStorePassword: wso2carbon\n-             certPass: wso2carbon \n+    wso2.transport.http:\n+      ...\n+      listenerConfigurations:\n+        - id: \"default-https\"\n+          ...\n+          keyStoreFile: \"${carbon.home}/resources/security/wso2carbon.jks\"\n+          keyStorePassword: wso2carbon\n+          certPass: wso2carbon \n     ```\n     The elements in the above configuration are described below:\n       \n     | Element                | Description                                                      |\n     |------------------------|------------------------------------------------------------------|\n-    | **keyStoreFile**       | Name of the keystore file. **The file must be located in `<API-M_ANALYTICS_HOME>/resources/security`** |\n+    | **keyStoreFile**       | Name of the keystore file. **The file must be located in the `<API-M_ANALYTICS_HOME>/resources/security` directory.** |\n     | **keyStorePassword**   | Keystore password                                                |\n     | **certPass**           | Private key password                                             |\n    \n-3. **Securevault configuration**\n+3. Update the Secure Vault configurations.\n    \n-    This is used to store encrypted passwords that are mapped to aliases.\n-    ```yaml\n-       wso2.securevault:\n-         secretRepository:\n-           ...\n-           parameters:\n-             privateKeyAlias: wso2carbon\n-             keystoreLocation: ${sys:carbon.home}/resources/security/securevault.jks\n-             ... \n-    ```\n-    The elements in the above configuration are described below:\n+     1. Update the configurations in the `deployment.yaml` file.\n+    \n+         The Secure Vault configurations are used to store encrypted passwords that are mapped to aliases.\n+\n+         ```yaml\n+         wso2.securevault:\n+           secretRepository:\n+             ...\n+             parameters:\n+               privateKeyAlias: wso2carbon\n+                keystoreLocation: ${sys:carbon.home}/resources/security/securevault.jks\n+               ... \n+         ```\n+        The elements in the above configuration are described below:\n+          \n+        | Element                | Description                                                      |\n+        |------------------------|------------------------------------------------------------------|\n+        | **privateKeyAlias**    | Private key alias                                                |\n+        | **keyStoreLocation**   | Name of the keystore file. **The file must be located in the `<API-M_ANALYTICS_HOME>/resources/security` directory.** |\n+\n+    2. Provide the keystore and private key password in the Base64 encoded format in the `<ANALYTICS_HOME>/conf/dashboard/master-keys.yaml` file.\n+\n+        ??? info \"Click here for more info on the `master-keys.yaml` file\"\n+            The base64 encoded plaintext keystore password and the base64 encoded plaintext private password of the keystore used for Secure Vault is defined in the master-keys.yaml file. WSO2 Carbon Server reads this file to obtain these two passwords, so that it can decrypt the passwords in the `secrets.properties` file in order to start the server.\n+\n+4. Set the new keystore details when you change the keystore.\n+\n+      1. Navigate to the <ANALYTICS_HOME>/wso2/dashboard/bin/carbon.sh` file.\n       \n-    | Element                | Description                                                      |\n-    |------------------------|------------------------------------------------------------------|\n-    | **privateKeyAlias**    | Private key password                                                |\n-    | **keyStoreLocation**   | Name of the keystore file. **The file must be located in `<API-M_ANALYTICS_HOME>/resources/security`** |\n-   \n+      2. Define the correct keystore path for the `Djavax.net.ssl.keyStore` system property.\n+      \n+      3. Define the correct keystore password for the `Djavax.net.ssl.keyStorePassword` system property.\n+\n+## Configuring keystores in worker profile\n \n-## Configuring Keystores in Worker Profile\n+!!! note\n+    Other than explicitly mentioned, you need to do all the following configuration updates related to the worker profile in the `<API-M_ANALYTICS_HOME>/conf/worker/deployment.yaml` file.\n \n-For the dashboard profile the required updates need to be done to the `<API-M_ANALYTICS_HOME>/conf/worker/deployment.yaml` file for following use cases.\n+1. Update the databridge configurations.\n \n-1. **Databridge configurations**\n+    This is used for authenticating communication over SSL/TLS between API Manager and API-M Analytics. Handles thrift and binary transports.\n \n-    This is used for authenticating communication over SSL/TLS between API Manager and APIM Analytics. Handles thrift and binary transports.\n     ```yaml\n-       databridge.config:\n-         ... \n-         keyStoreLocation : ${sys:carbon.home}/resources/security/wso2carbon.jks\n-         keyStorePassword : wso2carbon\n-         ... \n+    databridge.config:\n+      ... \n+      keyStoreLocation : ${sys:carbon.home}/resources/security/wso2carbon.jks\n+      keyStorePassword : wso2carbon\n+      ... \n     ```\n     The elements in the above configuration are described below:\n    \n     | Element                | Description                                                      |\n     |------------------------|------------------------------------------------------------------|\n-    | **keyStoreLocation**   | Name of the keystore file. **The file must be located in `<API-M_ANALYTICS_HOME>/resources/security`** |\n+    | **keyStoreLocation**   | Name of the keystore file. **The file must be located in the `<API-M_ANALYTICS_HOME>/resources/security` directory.** |\n     | **keyStorePassword**   | Keystore password                                                |\n \n-2. **HTTP transport configuration**\n+2. Update the HTTP transport configurations.\n \n-    This is used for authentication, encryption and signing for the analytics dashboard web application.\n+    This is used for authentication, encryption, and signing for the analytics dashboard web application.\n     ```yaml\n-       wso2.transport.http:\n-         ...\n-         listenerConfigurations:\n-           - id: \"default-https\"\n-             ...\n-             keyStoreFile: \"${carbon.home}/resources/security/wso2carbon.jks\"\n-             keyStorePassword: wso2carbon\n-             certPass: wso2carbon \n+    wso2.transport.http:\n+      ...\n+      listenerConfigurations:\n+        - id: \"default-https\"\n+          ...\n+          keyStoreFile: \"${carbon.home}/resources/security/wso2carbon.jks\"\n+          keyStorePassword: wso2carbon\n+          certPass: wso2carbon \n     ```\n     The elements in the above configuration are described below:\n       \n     | Element                | Description                                                      |\n     |------------------------|------------------------------------------------------------------|\n-    | **keyStoreFile**       | Name of the keystore file. **The file must be located in `<API-M_ANALYTICS_HOME>/resources/security`** |\n+    | **keyStoreFile**       | Name of the keystore file. **The file must be located in the `<API-M_ANALYTICS_HOME>/resources/security` directory.** |\n     | **keyStorePassword**   | Keystore password                                                |\n     | **certPass**           | Private key password                                             |\n    \n-3. **Securevault configuration**\n+3. Update the Secure Vault configurations.\n+   \n+     1. Update the configurations in the `deployment.yaml` file.\n+    \n+         The Secure Vault configurations are used to store encrypted passwords that are mapped to aliases.\n+\n+          ```yaml\n+          wso2.securevault:\n+            secretRepository:\n+              ...\n+              parameters:\n+                privateKeyAlias: wso2carbon\n+                keystoreLocation: ${sys:carbon.home}/resources/security/securevault.jks\n+                ... \n+          ```\n+          The elements in the above configuration are described below:\n+            \n+          | Element                | Description                                                      |\n+          |------------------------|------------------------------------------------------------------|\n+          | **privateKeyAlias**    | Private key alias                                                |\n+          | **keyStoreLocation**   | Name of the keystore file. **The file must be located in the `<API-M_ANALYTICS_HOME>/resources/security` directory.** |\n \n-    This is used to store encrypted passwords that are mapped to aliases.\n-    ```yaml\n-       wso2.securevault:\n-         secretRepository:\n-           ...\n-           parameters:\n-             privateKeyAlias: wso2carbon\n-             keystoreLocation: ${sys:carbon.home}/resources/security/securevault.jks\n-             ... \n-    ```\n-    The elements in the above configuration are described below:\n+     2. Provide the keystore and private key password in the Base64 encoded format in the `<ANALYTICS_HOME>/conf/worker/master-keys.yaml` file.\n+\n+        ??? info \"Click here for more info on the `master-keys.yaml` file\"\n+            The base64 encoded plaintext keystore password and the base64 encoded plaintext private password of the keystore used for Secure Vault is defined in the master-keys.yaml file. WSO2 Carbon Server reads this file to obtain these two passwords, so that it can decrypt the passwords in the `secrets.properties` file in order to start the server.\n+\n+4. Set the new keystore details when you change the keystore.\n+\n+      1. Navigate to the <ANALYTICS_HOME>/wso2/dashboard/bin/carbon.sh` file.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDMxMTE2MQ=="}, "originalCommit": {"oid": "f872500a49ef0c6223fab16659a66f2e133faa22"}, "originalPosition": 236}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MjU2OTY0", "url": "https://github.com/wso2/docs-apim/pull/1231#pullrequestreview-418256964", "createdAt": "2020-05-26T12:41:32Z", "commit": {"oid": "e76d66ead1dc8c4f5ec74a68f8c3c80c6d061914"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MjU4MzAw", "url": "https://github.com/wso2/docs-apim/pull/1231#pullrequestreview-418258300", "createdAt": "2020-05-26T12:43:16Z", "commit": {"oid": "e76d66ead1dc8c4f5ec74a68f8c3c80c6d061914"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MjY2MzQ2", "url": "https://github.com/wso2/docs-apim/pull/1231#pullrequestreview-418266346", "createdAt": "2020-05-26T12:53:30Z", "commit": {"oid": "e76d66ead1dc8c4f5ec74a68f8c3c80c6d061914"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1848, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}