{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1NTk0NDQy", "number": 1563, "title": "Adding document visibility feature to the docs", "bodyText": "Purpose\nAdding documentation for the Document Visibility selection feature\nRelated to wso2/product-apim#7852\nApproach\nFront-ported from APIM 2.6.0\nSecurity checks\n\nFollowed secure coding standards in http://wso2.com/technical-reports/wso2-secure-engineering-guidelines? yes/\nRan FindSecurityBugs plugin and verified report? yes/\nConfirmed that this PR doesn't commit any keys, passwords, tokens, usernames, or other secrets? yes\n\nRelated PRs\nwso2/carbon-apimgt#8668", "createdAt": "2020-07-23T09:50:00Z", "url": "https://github.com/wso2/docs-apim/pull/1563", "merged": true, "mergeCommit": {"oid": "862b27e56688608f0f9a39d11676c8431547cc89"}, "closed": true, "closedAt": "2020-08-11T01:51:53Z", "author": {"login": "isuruh15"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3sLSSAH2gAyNDU1NTk0NDQyOjk5ZmIzMDViNmRjZjc1NTZkYzg3NzQ5ZTM0OTFjZTM2MTJjMjgyZTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc9s3W2gFqTQ2MTg4ODQ2Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "99fb305b6dcf7556dc87749e3491ce3612c282e9", "author": {"user": {"login": "isuruh15", "name": "Isuru Samaranayake"}}, "url": "https://github.com/wso2/docs-apim/commit/99fb305b6dcf7556dc87749e3491ce3612c282e9", "committedDate": "2020-07-23T09:40:04Z", "message": "adding document visibility feature to the docs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MjU5MDc0", "url": "https://github.com/wso2/docs-apim/pull/1563#pullrequestreview-455259074", "createdAt": "2020-07-25T04:04:47Z", "commit": {"oid": "99fb305b6dcf7556dc87749e3491ce3612c282e9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQwNDowNDo0OFrOG3COKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQwNDowOTo1NlrOG3CPxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM2MTI1OQ==", "bodyText": "This doc can be moved under the API documentation section?", "url": "https://github.com/wso2/docs-apim/pull/1563#discussion_r460361259", "createdAt": "2020-07-25T04:04:48Z", "author": {"login": "shaniR"}, "path": "en/docs/learn/design-api/advanced-topics/control-api-visibility-and-subscription-availability-in-developer-portal.md", "diffHunk": "@@ -1,4 +1,4 @@\n-# Control API Visibility and Subscription Availability in the Developer Portal\n+# Control API Visibility, Subscription Availability and API documentation visibility in the Developer Portal", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99fb305b6dcf7556dc87749e3491ce3612c282e9"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM2MTM3MQ==", "bodyText": "unnecessary spaces before this line. Please check the same in the entire document.", "url": "https://github.com/wso2/docs-apim/pull/1563#discussion_r460361371", "createdAt": "2020-07-25T04:05:41Z", "author": {"login": "shaniR"}, "path": "en/docs/learn/design-api/advanced-topics/control-api-visibility-and-subscription-availability-in-developer-portal.md", "diffHunk": "@@ -123,6 +123,48 @@ When using the REST API directly, the subscription availability options are avai\n     </tr>\n     </tbody>\n     </table>\n+    \n+    \n+## Control API Document Visibility in Developer Portal\n+\n+By default, any document associated with an API has the same visibility level of the API. That is, if the API is public, \n+its documentation is also visible to all users (registered and anonymous).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99fb305b6dcf7556dc87749e3491ce3612c282e9"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM2MTQzMA==", "bodyText": "There should be a section \"Enabling document visibility in Developer Portal\", and the instructions should come under that.", "url": "https://github.com/wso2/docs-apim/pull/1563#discussion_r460361430", "createdAt": "2020-07-25T04:06:43Z", "author": {"login": "shaniR"}, "path": "en/docs/learn/design-api/advanced-topics/control-api-visibility-and-subscription-availability-in-developer-portal.md", "diffHunk": "@@ -123,6 +123,48 @@ When using the REST API directly, the subscription availability options are avai\n     </tr>\n     </tbody>\n     </table>\n+    \n+    \n+## Control API Document Visibility in Developer Portal\n+\n+By default, any document associated with an API has the same visibility level of the API. That is, if the API is public, \n+its documentation is also visible to all users (registered and anonymous).\n+\n+!!! note", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99fb305b6dcf7556dc87749e3491ce3612c282e9"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM2MTU1MQ==", "bodyText": "these visibility level names do not give the idea of the explained.", "url": "https://github.com/wso2/docs-apim/pull/1563#discussion_r460361551", "createdAt": "2020-07-25T04:08:39Z", "author": {"login": "shaniR"}, "path": "en/docs/learn/design-api/advanced-topics/control-api-visibility-and-subscription-availability-in-developer-portal.md", "diffHunk": "@@ -123,6 +123,48 @@ When using the REST API directly, the subscription availability options are avai\n     </tr>\n     </tbody>\n     </table>\n+    \n+    \n+## Control API Document Visibility in Developer Portal\n+\n+By default, any document associated with an API has the same visibility level of the API. That is, if the API is public, \n+its documentation is also visible to all users (registered and anonymous).\n+\n+!!! note\n+    This feature has been disabled in the default setup.\n+     \n+To enable other visibility levels to the documentation, go to the  \n+`<API-M_HOME>/repository/conf/deployment.toml`, \n+add the following configuration.\n+\n+``` toml\n+[apim.publisher]\n+enable_api_doc_visibility = \"true\"\n+```\n+\n+Document visibility levels can be one of the following options:\n+\n+- **Same as API visibility:** visible to the same user roles who can see the API. For example, if the API's visibility is public, its documentation is visible to all users.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99fb305b6dcf7556dc87749e3491ce3612c282e9"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM2MTYzNA==", "bodyText": "This should be the next step.", "url": "https://github.com/wso2/docs-apim/pull/1563#discussion_r460361634", "createdAt": "2020-07-25T04:09:32Z", "author": {"login": "shaniR"}, "path": "en/docs/learn/design-api/advanced-topics/control-api-visibility-and-subscription-availability-in-developer-portal.md", "diffHunk": "@@ -123,6 +123,48 @@ When using the REST API directly, the subscription availability options are avai\n     </tr>\n     </tbody>\n     </table>\n+    \n+    \n+## Control API Document Visibility in Developer Portal\n+\n+By default, any document associated with an API has the same visibility level of the API. That is, if the API is public, \n+its documentation is also visible to all users (registered and anonymous).\n+\n+!!! note\n+    This feature has been disabled in the default setup.\n+     \n+To enable other visibility levels to the documentation, go to the  \n+`<API-M_HOME>/repository/conf/deployment.toml`, \n+add the following configuration.\n+\n+``` toml\n+[apim.publisher]\n+enable_api_doc_visibility = \"true\"\n+```\n+\n+Document visibility levels can be one of the following options:\n+\n+- **Same as API visibility:** visible to the same user roles who can see the API. For example, if the API's visibility is public, its documentation is visible to all users.\n+- **Owner Only:** visible to all registered users in the API's tenant domain.\n+- **Private:** visible only to the users who have permission to log in to the API Publisher web interface and create and/or publish APIs to the Developer Portal.\n+\n+\n+### Control API document visibility using the API Publisher\n+\n+1.  Sign in to the API Publisher as an API creator using the following URL: \n+\n+     `https://<localhost>:9443/publisher`\n+\n+2.  [Create a new API]({{base_path}}/learn/design-api/create-api/create-a-rest-api/) or edit an existing API.\n+\n+3.  In the **Documents** tab, Click **Add New Document**, to see a new drop-down list added to select visibility from. \n+Select the desired visibility level for the document.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99fb305b6dcf7556dc87749e3491ce3612c282e9"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM2MTY3MA==", "bodyText": "What are the visibility levels for the publisher?", "url": "https://github.com/wso2/docs-apim/pull/1563#discussion_r460361670", "createdAt": "2020-07-25T04:09:56Z", "author": {"login": "shaniR"}, "path": "en/docs/learn/design-api/advanced-topics/control-api-visibility-and-subscription-availability-in-developer-portal.md", "diffHunk": "@@ -123,6 +123,48 @@ When using the REST API directly, the subscription availability options are avai\n     </tr>\n     </tbody>\n     </table>\n+    \n+    \n+## Control API Document Visibility in Developer Portal\n+\n+By default, any document associated with an API has the same visibility level of the API. That is, if the API is public, \n+its documentation is also visible to all users (registered and anonymous).\n+\n+!!! note\n+    This feature has been disabled in the default setup.\n+     \n+To enable other visibility levels to the documentation, go to the  \n+`<API-M_HOME>/repository/conf/deployment.toml`, \n+add the following configuration.\n+\n+``` toml\n+[apim.publisher]\n+enable_api_doc_visibility = \"true\"\n+```\n+\n+Document visibility levels can be one of the following options:\n+\n+- **Same as API visibility:** visible to the same user roles who can see the API. For example, if the API's visibility is public, its documentation is visible to all users.\n+- **Owner Only:** visible to all registered users in the API's tenant domain.\n+- **Private:** visible only to the users who have permission to log in to the API Publisher web interface and create and/or publish APIs to the Developer Portal.\n+\n+\n+### Control API document visibility using the API Publisher\n+\n+1.  Sign in to the API Publisher as an API creator using the following URL: \n+\n+     `https://<localhost>:9443/publisher`\n+\n+2.  [Create a new API]({{base_path}}/learn/design-api/create-api/create-a-rest-api/) or edit an existing API.\n+\n+3.  In the **Documents** tab, Click **Add New Document**, to see a new drop-down list added to select visibility from. \n+Select the desired visibility level for the document.\n+     \n+     [ ![API document visibility selector]({{base_path}}/assets/img/learn/api-doc-visibility-selector.png) ](/{{base_path}}/assets/img/learn/api-doc-visibility-selector.png)\n+     [ ![API document visibility selector dropdown]({{base_path}}/assets/img/learn/api-doc-visibility-dropdown.png) ](/{{base_path}}/assets/img/learn/api-doc-visibility-dropdown.png)\n+\n+4.  Add the Document.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99fb305b6dcf7556dc87749e3491ce3612c282e9"}, "originalPosition": 50}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9234c7c349891cd3ca55581818e1bfe43ba75e9d", "author": {"user": {"login": "isuruh15", "name": "Isuru Samaranayake"}}, "url": "https://github.com/wso2/docs-apim/commit/9234c7c349891cd3ca55581818e1bfe43ba75e9d", "committedDate": "2020-08-06T19:52:04Z", "message": "Moved the content under API Documentation section"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ac01b7fe6cc11dec1eede0a795854d602c79e4a", "author": {"user": {"login": "isuruh15", "name": "Isuru Samaranayake"}}, "url": "https://github.com/wso2/docs-apim/commit/5ac01b7fe6cc11dec1eede0a795854d602c79e4a", "committedDate": "2020-08-06T20:12:33Z", "message": "removing unnecessary spaces."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxODg4NDY2", "url": "https://github.com/wso2/docs-apim/pull/1563#pullrequestreview-461888466", "createdAt": "2020-08-05T17:45:25Z", "commit": {"oid": "99fb305b6dcf7556dc87749e3491ce3612c282e9"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxNzo0NToyNlrOG8UJCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxNzo0NToyNlrOG8UJCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTg5NzczNg==", "bodyText": "yes please.", "url": "https://github.com/wso2/docs-apim/pull/1563#discussion_r465897736", "createdAt": "2020-08-05T17:45:26Z", "author": {"login": "shaniR"}, "path": "en/docs/learn/design-api/advanced-topics/control-api-visibility-and-subscription-availability-in-developer-portal.md", "diffHunk": "@@ -1,4 +1,4 @@\n-# Control API Visibility and Subscription Availability in the Developer Portal\n+# Control API Visibility, Subscription Availability and API documentation visibility in the Developer Portal", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM2MTI1OQ=="}, "originalCommit": {"oid": "99fb305b6dcf7556dc87749e3491ce3612c282e9"}, "originalPosition": 2}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1803, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}