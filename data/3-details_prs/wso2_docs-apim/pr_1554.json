{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU0NjYxMTIw", "number": 1554, "title": "Adding stored procedures to update analytics db.", "bodyText": "Purpose\nReplacing the normal queries available for updating the analytics DB with stored procedures so that the procedure can check whether the change is already available in the DB and if not it will update the DB accordingly.", "createdAt": "2020-07-21T18:02:02Z", "url": "https://github.com/wso2/docs-apim/pull/1554", "merged": true, "mergeCommit": {"oid": "d9edfcca1c4d8a37cb0e1a1a210db7a75ae4c4a7"}, "closed": true, "closedAt": "2020-07-22T04:02:08Z", "author": {"login": "shilmyhasan"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3GUtXAH2gAyNDU0NjYxMTIwOjFhMjFmOWE1Y2NmNDE0MTM0ZTdiMGZmOWQyNDZkZTc0ZTFlMjQ3YmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3SvYvAFqTQ1Mjk3ODY3NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1a21f9a5ccf414134e7b0ff9d246de74e1e247ba", "author": {"user": {"login": "shilmyhasan", "name": "Silmy Hasan"}}, "url": "https://github.com/wso2/docs-apim/commit/1a21f9a5ccf414134e7b0ff9d246de74e1e247ba", "committedDate": "2020-07-21T13:33:58Z", "message": "adding stored procedures for update scripts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyOTcwNjA1", "url": "https://github.com/wso2/docs-apim/pull/1554#pullrequestreview-452970605", "createdAt": "2020-07-22T03:31:58Z", "commit": {"oid": "1a21f9a5ccf414134e7b0ff9d246de74e1e247ba"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwMzozMTo1OFrOG1Ra6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwMzozMTo1OFrOG1Ra6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODUxMzEzMQ==", "bodyText": "Additional period (.)", "url": "https://github.com/wso2/docs-apim/pull/1554#discussion_r458513131", "createdAt": "2020-07-22T03:31:58Z", "author": {"login": "rmsamitha"}, "path": "en/docs/install-and-setup/upgrading-wso2-api-manager/upgrading-from-260-to-310.md", "diffHunk": "@@ -2138,92 +2138,147 @@ Upgrade the WSO2 API Manager Analytics database from version 3.0.0 to version 3.\n     ALTER TABLE APILASTACCESSSUMMARY ADD PRIMARY KEY (APINAME,APICREATOR,APIVERSION,APICREATORTENANTDOMAIN);\n     ```\n !!! note\n-    Type and name of a column of few tables were changed through WUM in version 2.6. It is important to add the above\n-    change into your database prior to migration. So execute the below query to \n-    confirm whether the above change is already available in your system.\n-    \n-    ```\n-    select AGG_COUNT from GEOLOCATIONAGG_SECONDS;\n-    ```\n-    If the above query returns an error indicating that the intended column can not be found, then please execute the \n-    below queries according to your db type to add the above change.\n-    \n-    ```tab=\"H2\"\n-    ALTER TABLE GeoLocationAgg_DAYS CHANGE totalCount AGG_COUNT bigint(20);\n-    ALTER TABLE GeoLocationAgg_HOURS CHANGE totalCount AGG_COUNT bigint(20);\n-    ALTER TABLE GeoLocationAgg_MINUTES CHANGE totalCount AGG_COUNT bigint(20);\n-    ALTER TABLE GeoLocationAgg_MONTHS CHANGE totalCount AGG_COUNT bigint(20);\n-    ALTER TABLE GeoLocationAgg_SECONDS CHANGE totalCount AGG_COUNT bigint(20);\n-    ALTER TABLE GeoLocationAgg_YEARS CHANGE totalCount AGG_COUNT bigint(20);           \n-    ```\n+    Type and name of a column of few tables were changed through WUM in analytics version 2.6. It is important to \n+    add the above change into your database prior to migration. So execute the below queries which checks whether \n+    the above change is already available in your DB and if not it will add the relevant change. Ensure to replace \n+    \"<Enter Analytics DB name here>\" with the correct DB name in the scripts.   .", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a21f9a5ccf414134e7b0ff9d246de74e1e247ba"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyOTcwODk1", "url": "https://github.com/wso2/docs-apim/pull/1554#pullrequestreview-452970895", "createdAt": "2020-07-22T03:33:02Z", "commit": {"oid": "1a21f9a5ccf414134e7b0ff9d246de74e1e247ba"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwMzozMzowMlrOG1Rb7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQwMzozMzowMlrOG1Rb7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODUxMzM4OA==", "bodyText": "Add a comma inn between as this. DB and if not, it will", "url": "https://github.com/wso2/docs-apim/pull/1554#discussion_r458513388", "createdAt": "2020-07-22T03:33:02Z", "author": {"login": "rmsamitha"}, "path": "en/docs/install-and-setup/upgrading-wso2-api-manager/upgrading-from-260-to-310.md", "diffHunk": "@@ -2138,92 +2138,147 @@ Upgrade the WSO2 API Manager Analytics database from version 3.0.0 to version 3.\n     ALTER TABLE APILASTACCESSSUMMARY ADD PRIMARY KEY (APINAME,APICREATOR,APIVERSION,APICREATORTENANTDOMAIN);\n     ```\n !!! note\n-    Type and name of a column of few tables were changed through WUM in version 2.6. It is important to add the above\n-    change into your database prior to migration. So execute the below query to \n-    confirm whether the above change is already available in your system.\n-    \n-    ```\n-    select AGG_COUNT from GEOLOCATIONAGG_SECONDS;\n-    ```\n-    If the above query returns an error indicating that the intended column can not be found, then please execute the \n-    below queries according to your db type to add the above change.\n-    \n-    ```tab=\"H2\"\n-    ALTER TABLE GeoLocationAgg_DAYS CHANGE totalCount AGG_COUNT bigint(20);\n-    ALTER TABLE GeoLocationAgg_HOURS CHANGE totalCount AGG_COUNT bigint(20);\n-    ALTER TABLE GeoLocationAgg_MINUTES CHANGE totalCount AGG_COUNT bigint(20);\n-    ALTER TABLE GeoLocationAgg_MONTHS CHANGE totalCount AGG_COUNT bigint(20);\n-    ALTER TABLE GeoLocationAgg_SECONDS CHANGE totalCount AGG_COUNT bigint(20);\n-    ALTER TABLE GeoLocationAgg_YEARS CHANGE totalCount AGG_COUNT bigint(20);           \n-    ```\n+    Type and name of a column of few tables were changed through WUM in analytics version 2.6. It is important to \n+    add the above change into your database prior to migration. So execute the below queries which checks whether \n+    the above change is already available in your DB and if not it will add the relevant change. Ensure to replace ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a21f9a5ccf414134e7b0ff9d246de74e1e247ba"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c0e947628bae33a8b1003079b26d3949a0094a8", "author": {"user": {"login": "shilmyhasan", "name": "Silmy Hasan"}}, "url": "https://github.com/wso2/docs-apim/commit/1c0e947628bae33a8b1003079b26d3949a0094a8", "committedDate": "2020-07-22T03:49:47Z", "message": "Refactor description"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyOTc4Njc1", "url": "https://github.com/wso2/docs-apim/pull/1554#pullrequestreview-452978675", "createdAt": "2020-07-22T04:01:58Z", "commit": {"oid": "1c0e947628bae33a8b1003079b26d3949a0094a8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1794, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}