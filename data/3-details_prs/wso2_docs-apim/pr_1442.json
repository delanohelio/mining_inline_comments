{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQxMjU1NTg1", "number": 1442, "title": "Adding the content on the \"Intenal/devops\" role and simplified scope requirements to perform API Controller operations", "bodyText": "Purpose\nFixes: wso2/product-apim-tooling#372\nGoals\nIntroduce the new role Internal/devops added in APIM 3.2.0 and describe the simplified scope requirements to perform API Controller operations.\nApproach\n\nRemoved the section Steps to Create a Custom User who can Perform API Controller Operations n the page API Controller/Advance Topics/Creating Custom Users to Perform API Controller Operations.\nModified the table under the topic ** Minimal Permissions and Scopes Required to Perform API Controller Operations** in the page API Controller/Advance Topics/Creating Custom Users to Perform API Controller Operations.\n\n\nUser stories\nThe users can refer about the new role Internal/devops and the simplified scope requirements for the API Controller operations.\nRelated PRs\nwso2/carbon-apimgt#8849", "createdAt": "2020-06-29T07:32:35Z", "url": "https://github.com/wso2/docs-apim/pull/1442", "merged": true, "mergeCommit": {"oid": "9a3f39c4e2014ab18856f579ce64c2fae5e8a243"}, "closed": true, "closedAt": "2020-06-29T11:50:12Z", "author": {"login": "wasuradananjith"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcv7vJSgH2gAyNDQxMjU1NTg1Ojk4MDI0NzEwN2QyODc0ZTAzN2YzN2UyOGIxYWVhY2E2YzU3OGVmOTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABd0w3sDAFqTU3ODkxODYzNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "980247107d2874e037f37e28b1aeaca6c578ef94", "author": {"user": {"login": "wasuradananjith", "name": "Wasura Wattearachchi"}}, "url": "https://github.com/wso2/docs-apim/commit/980247107d2874e037f37e28b1aeaca6c578ef94", "committedDate": "2020-06-29T07:16:25Z", "message": "Add content on Internal/devops and scope simplifications"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf0491e4ed4f998e660e5e6a65406f6c6f4f9b6c", "author": {"user": {"login": "wasuradananjith", "name": "Wasura Wattearachchi"}}, "url": "https://github.com/wso2/docs-apim/commit/bf0491e4ed4f998e660e5e6a65406f6c6f4f9b6c", "committedDate": "2020-06-29T07:19:51Z", "message": "Remove admin-portal-scope-mapping.png"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4OTc2NDYy", "url": "https://github.com/wso2/docs-apim/pull/1442#pullrequestreview-438976462", "createdAt": "2020-06-29T08:10:51Z", "commit": {"oid": "bf0491e4ed4f998e660e5e6a65406f6c6f4f9b6c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQwODoxMDo1MVrOGqJYTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQwODoxMDo1MVrOGqJYTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njg0NzA1Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            To perform tasks using the API Controller, a particular user must have required permissions and scopes. From API Manager 3.2.0 onwards, a new role named `Internal/devops` has been introduced who has the ability to perform all the API Controller related operations. You just need to create a user (Refer [Adding a new User]({{base_path}}/administer/managing-users-and-roles/managing-users/#adding-a-new-user) to learn about adding new users), assign the role `Internal/devops` and use that user to perform the API Controller operations.\n          \n          \n            \n            To perform tasks using the API Controller, a particular user must have required permissions and scopes. From API Manager 3.2.0 onwards, a new role named `Internal/devops` has been introduced who has the ability to perform all the API Controller related operations. You just need to create a new user (Refer [Adding a new User]({{base_path}}/administer/managing-users-and-roles/managing-users/#adding-a-new-user) to learn about adding new users), assign the role `Internal/devops` and use that user to perform the API Controller operations.", "url": "https://github.com/wso2/docs-apim/pull/1442#discussion_r446847053", "createdAt": "2020-06-29T08:10:51Z", "author": {"login": "npamudika"}, "path": "en/docs/learn/api-controller/advanced-topics/creating-custom-users-to-perform-api-controller-operations.md", "diffHunk": "@@ -1,80 +1,17 @@\n #  Creating Custom Users to Perform API Controller Operations\n \n-To perform tasks using the API Controller, a particular user must have required permissions and scopes. By default, a user with `admin` role is allowed perform all the tasks. \n+To perform tasks using the API Controller, a particular user must have required permissions and scopes. From API Manager 3.2.0 onwards, a new role named `Internal/devops` has been introduced who has the ability to perform all the API Controller related operations. You just need to create a user (Refer [Adding a new User]({{base_path}}/administer/managing-users-and-roles/managing-users/#adding-a-new-user) to learn about adding new users), assign the role `Internal/devops` and use that user to perform the API Controller operations.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bf0491e4ed4f998e660e5e6a65406f6c6f4f9b6c"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57cbdefa382cefd41c06235caa95f45ef9538bc6", "author": {"user": {"login": "wasuradananjith", "name": "Wasura Wattearachchi"}}, "url": "https://github.com/wso2/docs-apim/commit/57cbdefa382cefd41c06235caa95f45ef9538bc6", "committedDate": "2020-06-29T11:48:27Z", "message": "Improve the paragraph on introducing the new role"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "087b64be764b195995a2ad2c39e2e7691783634e", "author": {"user": {"login": "wasuradananjith", "name": "Wasura Wattearachchi"}}, "url": "https://github.com/wso2/docs-apim/commit/087b64be764b195995a2ad2c39e2e7691783634e", "committedDate": "2020-06-29T09:32:39Z", "message": "Improve the paragraph on introducing the new role"}, "afterCommit": {"oid": "57cbdefa382cefd41c06235caa95f45ef9538bc6", "author": {"user": {"login": "wasuradananjith", "name": "Wasura Wattearachchi"}}, "url": "https://github.com/wso2/docs-apim/commit/57cbdefa382cefd41c06235caa95f45ef9538bc6", "committedDate": "2020-06-29T11:48:27Z", "message": "Improve the paragraph on introducing the new role"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5MDYxMjUz", "url": "https://github.com/wso2/docs-apim/pull/1442#pullrequestreview-439061253", "createdAt": "2020-06-29T11:50:04Z", "commit": {"oid": "57cbdefa382cefd41c06235caa95f45ef9538bc6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTc4OTE4NjM3", "url": "https://github.com/wso2/docs-apim/pull/1442#pullrequestreview-578918637", "createdAt": "2021-01-29T03:37:34Z", "commit": {"oid": "57cbdefa382cefd41c06235caa95f45ef9538bc6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yOVQwMzozNzozNFrOIcUAVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yOVQwMzozNzozNFrOIcUAVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NjU1ODgwNA==", "bodyText": "At the end of the second line, shall we make it \"referring\"?", "url": "https://github.com/wso2/docs-apim/pull/1442#discussion_r566558804", "createdAt": "2021-01-29T03:37:34Z", "author": {"login": "hisanhunais"}, "path": "en/docs/learn/api-controller/advanced-topics/creating-custom-users-to-perform-api-controller-operations.md", "diffHunk": "@@ -1,80 +1,17 @@\n #  Creating Custom Users to Perform API Controller Operations\n \n-To perform tasks using the API Controller, a particular user must have required permissions and scopes. By default, a user with `admin` role is allowed perform all the tasks. \n+To perform tasks using the API Controller, a particular user must have required permissions and scopes. From API Manager 3.2.0 onwards, a new role named `Internal/devops` has been introduced who has the ability to perform all the API Controller related operations. You just need to create a new user (Refer [Adding a new User]({{base_path}}/administer/managing-users-and-roles/managing-users/#adding-a-new-user) to learn about adding new users), assign the role `Internal/devops` and use that user to perform the API Controller operations.\n \n-## Steps to Create a Custom User who can Perform API Controller Operations\n-\n-1. Create a role named `custom_role` with `API Create`, `API Publish` and `API Subscribe` permissions (along with `Login` permission) and assign it to a user.\n-\n-    !!! tip\n-        Refer [Managing Users and Roles]({{base_path}}/administer/product-administration/managing-users-and-roles/introduction-to-user-management/) to learn how to create a user role with permissions and assign it to a user.\n-\n-2.  Assigning the required scopes for the `custom_role` can be done using 2 methods.\n-\n-    1.  Using API-M management console.\n-\n-        1. Sign in to the API-M management console (`https://<APIM_Host>:<APIM_Port>/carbon`) as a tenant admin user.\n-\n-        2. Navigate to **Main > Resources > Browse** \n-\n-        3.  Enter `/_system/config/apimgt/applicationdata/tenant-conf.json` as the location and click **Go** to browse the registry and locate the required resource.\n-\n-        4.  Update the `RESTAPIScopes` JSON field by adding `custom_role` to the `Roles` field under the corresponding scope `Name` fields as shown below.\n-            ```bash\n-            {\n-                \"Name\": \"apim:api_publish\",\n-                \"Roles\": \"admin,Internal/publisher,custom_role\"\n-            },\n-            {\n-                \"Name\": \"apim:api_view\",\n-                \"Roles\": \"admin,Internal/publisher,Internal/creator,Internal/analytics,custom_role\"\n-            },\n-            {\n-                \"Name\": \"apim:api_delete\",\n-                \"Roles\": \"admin,Internal/creator,custom_role\"\n-            },\n-            {\n-                \"Name\": \"apim:subscribe\",\n-                \"Roles\": \"admin,Internal/subscriber,custom_role\"\n-            },\n-            {\n-                \"Name\": \"apim:app_owner_change\",\n-                \"Roles\": \"admin,custom_role\"\n-            },\n-                \"Name\": \"apim:app_import_export\",\n-                \"Roles\": \"admin,custom_role\"\n-            },\n-            {\n-                \"Name\": \"apim:api_import_export\",\n-                \"Roles\": \"admin,custom_role\"\n-            },\n-            },\n-                \"Name\": \"apim:app_manage\",\n-                \"Roles\": \"admin,Internal/subscriber,custom_role\"\n-            },\n-            {\n-                \"Name\": \"apim:api_product_import_export\",\n-                \"Roles\": \"admin,custom_role\"\n-            },\n-            ``` \n-\n-    2.  Using API-M management console.\n-        \n-        1. Log in to the Admin portal (`https://<APIM_Host>:<APIM_Port>/admin`).\n-\n-        2. Navigate to **Settings > Scope Mapping** in Admin portal.\n-\n-        3.  Add `custom_role` to the `Roles` field under the corresponding scope `Name` fields as shown below.\n-\n-            [![Admin portal scope mapping]({{base_path}}/assets/img/learn/api-controller/admin-portal-scope-mapping.png)]({{base_path}}/assets/img/learn/api-controller/admin-portal-scope-mapping.png)\n-\n-            The above screenshot only shows adding the `custom_role` to the scopes `apim:api_publish`, `api_view` and `apim:subscribe`. But similarly, you should add `custom_role` to the scopes `apim:app_owner_change`, `apim:app_import_export`, `apim:api_import_export`, `apim:app_manage` and `apim:api_product_import_export` as well.\n+## Minimal Permissions and Scopes Required to Perform API Controller Operations\n \n-3.  Restart the server or wait for 15 mins until the registry cache expires.\n+Further, you can create your own custom user with a custom role to perform specific set of API Controller operations. Refer the below table to learn about the required permissions and scopes that are needed for each of the API Controller operation.\n \n-## Minimal Permissions and Scopes Required to Perform API Controller Operations\n+!!! info\n+    **Steps to create a custom user with a custom role for your need** \n \n-As explained in the above section, you can create any user with a custom role to perform operations using the API Controller. But if you want that user to perform some of the API Controller operations (not all) you can refer the below table and assign the permissions/scopes accordingly for that role.\n+    - As shown in [Create user roles]({{base_path}}/administer/managing-users-and-roles/managing-user-roles/#create-user-roles) section, you can create your own custom user role by assigning permissions and scopes that are required to perform a particular set of API Controller operations by reffering the table below.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "57cbdefa382cefd41c06235caa95f45ef9538bc6"}, "originalPosition": 83}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1751, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}