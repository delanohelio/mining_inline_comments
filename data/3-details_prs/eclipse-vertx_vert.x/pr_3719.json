{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQzMTQ1NDgx", "number": 3719, "title": "Support for generic Key and Trust material", "bodyText": "Describe the feature\nWhile using the webclient of vertx from the following project: https://github.com/vert-x3/vertx-web I discovered that vertx core has couple of options to enable ssl. It should be of the type KeyCertOptions and TrustOptions. The core library already provides utilities to help the end-user by providing JksOptions, KeyStoreOptions, PemTrustOptions and PfxOptions.\nIt is providing a-lot ways for the end-user, but I had the feeling that it was missing one option. What if someone wanted to supply a KeyManagerFactory or KeyManager as KeyCertOptions? Or if someone wanted to supply a TrustManagerFactory or TrustManager? That would not be possible out of the box. The end-user needs to implement KeyCertOptions and TrustOptions and provide a custom logic to enable it.\nUse cases\nThis will enable the end-user to supply their own custom constructed key and trust material, for example a trust manager which is able to use multiple different keystore files, for example: Stackoverflow - Registering multiple keystores in JVM\nIn an existing environment where someone wants to migrate to vertx and has already a keymanager/trustmanager, by just supplying it it doesn't need to use JksOptions, KeyStoreOptions, KeyStoreOptons, PemTrustOptions or PfxOptions to configure vertx. They would be able to supply just only KeyManager, KeyManagerFactory, TrustManager or TrustManagerFactory and adapt much easier.\nWith this PR the following will be possible:\nTrustManager trustManager = ...; //initialised trustManager\nKeyManager keyManager = ...; //initialised keyManager\n\nWebClientOptions webClientOptions = new WebClientOptions();\nwebClientOptions.setTrustOptions(new TrustManagerOptions(trustManager);\nwebClientOptions.setKeyCertOptions(new KeyManagerOptions(keyManager);\nwebClientOptions.setSsl(true);\n\nWebClient client = WebClient.create(Vertx.vertx(), webClientOptions);\nor with the following snippet:\nTrustManagerFactory tmf = ...; //initialised trustManagerFactory\nKeyManagerFactory kmf = ...; //initialised keyManagerFactory\n\nWebClientOptions webClientOptions = new WebClientOptions();\nwebClientOptions.setTrustOptions(new TrustManagerOptions(tmf);\nwebClientOptions.setKeyCertOptions(new KeyManagerOptions(kmf);\nwebClientOptions.setSsl(true);\n\nWebClient client = WebClient.create(Vertx.vertx(), webClientOptions);\nI have discovered that back in 2013 someone requested this feature, see here: #703\nDo you guys think this option has additional value to the library? And if so do you think something needs to be adjusted?\nI was not very creative about the class names, so love to get feedback.", "createdAt": "2020-12-20T23:03:29Z", "url": "https://github.com/eclipse-vertx/vert.x/pull/3719", "merged": true, "mergeCommit": {"oid": "b43d355ce4876e35f8450eb8803161fe46dd8fe0"}, "closed": true, "closedAt": "2021-01-13T12:35:10Z", "author": {"login": "Hakky54"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdoJIzZAH2gAyNTQzMTQ1NDgxOjRjMjg4NjY2NDgzMDNlNjA5MDY4MmJlZDRhYjgyNDk5MzJmMjJkM2Y=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdvs-QdAH2gAyNTQzMTQ1NDgxOjgxN2U0M2E1NTJhNTY3YzNlYWJhY2RmOTM3ZGIxYTAwNWRjM2M4Njc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4c28866648303e6090682bed4ab8249932f22d3f", "author": {"user": {"login": "Hakky54", "name": "Hakan Alt\u0131nda\u011f"}}, "url": "https://github.com/eclipse-vertx/vert.x/commit/4c28866648303e6090682bed4ab8249932f22d3f", "committedDate": "2020-12-20T22:32:58Z", "message": "Added option to create key and trust material from KeyManager, KeyManagerFactory, TrustManager, TrustManagerFactory\n\nSigned-off-by: Hakan Altindag <hakangoudberg@hotmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ddfe755da76332edbc681c562cbcc8b73a77a8b3", "author": {"user": {"login": "Hakky54", "name": "Hakan Alt\u0131nda\u011f"}}, "url": "https://github.com/eclipse-vertx/vert.x/commit/ddfe755da76332edbc681c562cbcc8b73a77a8b3", "committedDate": "2020-12-20T23:10:22Z", "message": "Used different constructor for backwards compatibility\n\nSigned-off-by: Hakan Altindag <hakangoudberg@hotmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4761740f817f60a235e69f25adde9c2a762d492", "author": {"user": {"login": "Hakky54", "name": "Hakan Alt\u0131nda\u011f"}}, "url": "https://github.com/eclipse-vertx/vert.x/commit/c4761740f817f60a235e69f25adde9c2a762d492", "committedDate": "2020-12-22T14:15:42Z", "message": "Renamed key and trust materials\n\nSigned-off-by: Hakan Altindag <hakangoudberg@hotmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70f397eba37535bf335a053d839f541551d06873", "author": {"user": {"login": "Hakky54", "name": "Hakan Alt\u0131nda\u011f"}}, "url": "https://github.com/eclipse-vertx/vert.x/commit/70f397eba37535bf335a053d839f541551d06873", "committedDate": "2020-12-23T16:53:46Z", "message": "Extracted options for KeyManager, KeyManagerFactory, TrustManager, TrustManagerFactory\n\nSigned-off-by: Hakan Altindag <hakangoudberg@hotmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af2e1d45cfcb43554807a1cecd6c1c0d195dca60", "author": {"user": {"login": "Hakky54", "name": "Hakan Alt\u0131nda\u011f"}}, "url": "https://github.com/eclipse-vertx/vert.x/commit/af2e1d45cfcb43554807a1cecd6c1c0d195dca60", "committedDate": "2020-12-23T17:34:53Z", "message": "Trigger build\n\nSigned-off-by: Hakan Altindag <hakangoudberg@hotmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2fa318ecf118ae8712aed190b765acbc9524cb05", "author": {"user": {"login": "Hakky54", "name": "Hakan Alt\u0131nda\u011f"}}, "url": "https://github.com/eclipse-vertx/vert.x/commit/2fa318ecf118ae8712aed190b765acbc9524cb05", "committedDate": "2020-12-23T18:41:12Z", "message": "Trigger build\n\nSigned-off-by: Hakan Altindag <hakangoudberg@hotmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e40af895b563aed2af03adf3c997c3e92002dda1", "author": {"user": {"login": "Hakky54", "name": "Hakan Alt\u0131nda\u011f"}}, "url": "https://github.com/eclipse-vertx/vert.x/commit/e40af895b563aed2af03adf3c997c3e92002dda1", "committedDate": "2021-01-04T09:57:15Z", "message": "Applied PR feedback\n\nSigned-off-by: Hakan Altindag <hakangoudberg@hotmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42c45de31c25d29dc454373fba3710d88d2b20ed", "author": {"user": {"login": "Hakky54", "name": "Hakan Alt\u0131nda\u011f"}}, "url": "https://github.com/eclipse-vertx/vert.x/commit/42c45de31c25d29dc454373fba3710d88d2b20ed", "committedDate": "2021-01-04T10:11:35Z", "message": "Corrected methods to be able to access in a static context\n\nSigned-off-by: Hakan Altindag <hakangoudberg@hotmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY2MjY1NDM0", "url": "https://github.com/eclipse-vertx/vert.x/pull/3719#pullrequestreview-566265434", "createdAt": "2021-01-12T13:28:07Z", "commit": {"oid": "42c45de31c25d29dc454373fba3710d88d2b20ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMlQxMzoyODowN1rOISBbKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMlQxMzoyODowN1rOISBbKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTc2ODYxOA==", "bodyText": "why is this class necessary ?", "url": "https://github.com/eclipse-vertx/vert.x/pull/3719#discussion_r555768618", "createdAt": "2021-01-12T13:28:07Z", "author": {"login": "vietj"}, "path": "src/main/java/io/vertx/core/net/KeyManagerOptions.java", "diffHunk": "@@ -0,0 +1,25 @@\n+/*\n+ * Copyright (c) 2011-2020 Contributors to the Eclipse Foundation\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0, or the Apache License, Version 2.0\n+ * which is available at https://www.apache.org/licenses/LICENSE-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0 OR Apache-2.0\n+ */\n+\n+package io.vertx.core.net;\n+\n+import javax.net.ssl.KeyManager;\n+\n+/**\n+ * @author Hakan Altindag\n+ */\n+class KeyManagerOptions extends KeyManagerFactoryOptions {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42c45de31c25d29dc454373fba3710d88d2b20ed"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY2MjY1OTk2", "url": "https://github.com/eclipse-vertx/vert.x/pull/3719#pullrequestreview-566265996", "createdAt": "2021-01-12T13:28:47Z", "commit": {"oid": "42c45de31c25d29dc454373fba3710d88d2b20ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMlQxMzoyODo0N1rOISBc9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMlQxMzoyODo0N1rOISBc9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTc2OTA3OQ==", "bodyText": "why is this class necessary ?", "url": "https://github.com/eclipse-vertx/vert.x/pull/3719#discussion_r555769079", "createdAt": "2021-01-12T13:28:47Z", "author": {"login": "vietj"}, "path": "src/main/java/io/vertx/core/net/TrustManagerOptions.java", "diffHunk": "@@ -0,0 +1,25 @@\n+/*\n+ * Copyright (c) 2011-2020 Contributors to the Eclipse Foundation\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0, or the Apache License, Version 2.0\n+ * which is available at https://www.apache.org/licenses/LICENSE-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0 OR Apache-2.0\n+ */\n+\n+package io.vertx.core.net;\n+\n+import javax.net.ssl.TrustManager;\n+\n+/**\n+ * @author Hakan Altindag\n+ */\n+class TrustManagerOptions extends TrustManagerFactoryOptions {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42c45de31c25d29dc454373fba3710d88d2b20ed"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c78aeb92f6e67e2c2fd45aa6051211ea2b3a75e", "author": {"user": {"login": "Hakky54", "name": "Hakan Alt\u0131nda\u011f"}}, "url": "https://github.com/eclipse-vertx/vert.x/commit/6c78aeb92f6e67e2c2fd45aa6051211ea2b3a75e", "committedDate": "2021-01-12T16:07:44Z", "message": "applied pr feedback\n\nSigned-off-by: Hakan Altindag <hakangoudberg@hotmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0feb596de2d324946988a947c35eb95169149b7", "author": {"user": {"login": "Hakky54", "name": "Hakan Alt\u0131nda\u011f"}}, "url": "https://github.com/eclipse-vertx/vert.x/commit/d0feb596de2d324946988a947c35eb95169149b7", "committedDate": "2021-01-12T19:11:30Z", "message": "Merge branch 'master' of git://github.com/eclipse-vertx/vert.x into support-for-generic-key-and-trust-options"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3MDA1NTA3", "url": "https://github.com/eclipse-vertx/vert.x/pull/3719#pullrequestreview-567005507", "createdAt": "2021-01-13T08:53:10Z", "commit": {"oid": "d0feb596de2d324946988a947c35eb95169149b7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QwODo1MzoxMFrOISlRBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QwODo1MzoxMFrOISlRBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjM1NTg0NQ==", "bodyText": "Missing doc", "url": "https://github.com/eclipse-vertx/vert.x/pull/3719#discussion_r556355845", "createdAt": "2021-01-13T08:53:10Z", "author": {"login": "vietj"}, "path": "src/main/java/io/vertx/core/net/KeyManagerFactoryOptions.java", "diffHunk": "@@ -0,0 +1,59 @@\n+/*\n+ * Copyright (c) 2011-2020 Contributors to the Eclipse Foundation\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0, or the Apache License, Version 2.0\n+ * which is available at https://www.apache.org/licenses/LICENSE-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0 OR Apache-2.0\n+ */\n+\n+package io.vertx.core.net;\n+\n+import io.vertx.core.Vertx;\n+\n+import javax.net.ssl.KeyManagerFactory;\n+import javax.net.ssl.X509KeyManager;\n+import java.util.function.Function;\n+\n+/**\n+ * @author Hakan Altindag", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d0feb596de2d324946988a947c35eb95169149b7"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY3MDA1NjQ5", "url": "https://github.com/eclipse-vertx/vert.x/pull/3719#pullrequestreview-567005649", "createdAt": "2021-01-13T08:53:20Z", "commit": {"oid": "d0feb596de2d324946988a947c35eb95169149b7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QwODo1MzoyMFrOISlRdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xM1QwODo1MzoyMFrOISlRdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjM1NTk1Nw==", "bodyText": "Missing decription.", "url": "https://github.com/eclipse-vertx/vert.x/pull/3719#discussion_r556355957", "createdAt": "2021-01-13T08:53:20Z", "author": {"login": "vietj"}, "path": "src/main/java/io/vertx/core/net/KeyManagerFactoryWrapper.java", "diffHunk": "@@ -0,0 +1,65 @@\n+/*\n+ * Copyright (c) 2011-2020 Contributors to the Eclipse Foundation\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0, or the Apache License, Version 2.0\n+ * which is available at https://www.apache.org/licenses/LICENSE-2.0.\n+ *\n+ * SPDX-License-Identifier: EPL-2.0 OR Apache-2.0\n+ */\n+\n+package io.vertx.core.net;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import javax.net.ssl.KeyManager;\n+import javax.net.ssl.KeyManagerFactory;\n+import javax.net.ssl.KeyManagerFactorySpi;\n+import javax.net.ssl.ManagerFactoryParameters;\n+import java.security.KeyStore;\n+import java.security.Provider;\n+import java.util.Objects;\n+\n+/**\n+ * @author Hakan Altindag", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d0feb596de2d324946988a947c35eb95169149b7"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e451a269a5cd8d0474a1c7b08b85b4e8df736ae5", "author": {"user": {"login": "Hakky54", "name": "Hakan Alt\u0131nda\u011f"}}, "url": "https://github.com/eclipse-vertx/vert.x/commit/e451a269a5cd8d0474a1c7b08b85b4e8df736ae5", "committedDate": "2021-01-13T10:13:17Z", "message": "Added java doc\n\nSigned-off-by: Hakan Altindag <hakangoudberg@hotmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "817e43a552a567c3eabacdf937db1a005dc3c867", "author": {"user": {"login": "Hakky54", "name": "Hakan Alt\u0131nda\u011f"}}, "url": "https://github.com/eclipse-vertx/vert.x/commit/817e43a552a567c3eabacdf937db1a005dc3c867", "committedDate": "2021-01-13T10:15:30Z", "message": "Removed additional line\n\nSigned-off-by: Hakan Altindag <hakangoudberg@hotmail.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1655, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}