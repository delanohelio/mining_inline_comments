{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc0MzU1MTA0", "number": 3283, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNToyMzo0NVrODfOFCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxODowNTowNlrODhKmiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0MDYzMTE1OnYy", "diffSide": "RIGHT", "path": "src/test/java/io/vertx/core/net/NetTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNToyMzo0NVrOFoy4LQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxNToyMzo0NVrOFoy4LQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODMyMDk0MQ==", "bodyText": "can you use the onSuccess / onFailure lambdas to improve the test ?", "url": "https://github.com/eclipse-vertx/vert.x/pull/3283#discussion_r378320941", "createdAt": "2020-02-12T15:23:45Z", "author": {"login": "vietj"}, "path": "src/test/java/io/vertx/core/net/NetTest.java", "diffHunk": "@@ -903,16 +903,21 @@ public void testConnectInvalidConnectHandler() throws Exception {\n \n   @Test\n   public void testListenInvalidPort() {\n-    /* Port 80 is free to use by any application on Windows, so this test fails. */\n-    Assume.assumeFalse(System.getProperty(\"os.name\").startsWith(\"Windows\"));\n-    server.close();\n-    server = vertx.createNetServer(new NetServerOptions().setPort(80));\n-    server.connectHandler((netSocket) -> {\n-    }).listen(ar -> {\n-      assertTrue(ar.failed());\n-      assertFalse(ar.succeeded());\n-      assertNotNull(ar.cause());\n-      testComplete();\n+    final int port = 9090;\n+    final HttpServer httpServer = vertx.createHttpServer();\n+    httpServer.requestHandler(r -> {}).listen(port, httpResult -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a74f7170ee6622d923b45d56eee2c78ee3cb8deb"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0Njk0NzgzOnYy", "diffSide": "RIGHT", "path": "src/test/java/io/vertx/core/net/NetTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQwOToxMzozN1rOFpv6Ew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQwOToxMzozN1rOFpv6Ew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTMyMDg1MQ==", "bodyText": "I think here we need an onSuccess(...) block", "url": "https://github.com/eclipse-vertx/vert.x/pull/3283#discussion_r379320851", "createdAt": "2020-02-14T09:13:37Z", "author": {"login": "vietj"}, "path": "src/test/java/io/vertx/core/net/NetTest.java", "diffHunk": "@@ -903,18 +903,18 @@ public void testConnectInvalidConnectHandler() throws Exception {\n \n   @Test\n   public void testListenInvalidPort() {\n-    /* Port 80 is free to use by any application on Windows, so this test fails. */\n-    Assume.assumeFalse(System.getProperty(\"os.name\").startsWith(\"Windows\"));\n-    server.close();\n-    server = vertx.createNetServer(new NetServerOptions().setPort(80));\n-    server.connectHandler((netSocket) -> {\n-    }).listen(ar -> {\n-      assertTrue(ar.failed());\n-      assertFalse(ar.succeeded());\n-      assertNotNull(ar.cause());\n-      testComplete();\n-    });\n+    final int port = 9090;\n+    final HttpServer httpServer = vertx.createHttpServer()\n+      .requestHandler(ignore -> {})\n+      .listen(port, httpResult ->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1da4245ddf4fe052086ffba8bbd81e0be89f8717"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2MTAzMzA3OnYy", "diffSide": "RIGHT", "path": "src/test/java/io/vertx/core/net/NetTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxODowNTowNlrOFrxz8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxODowNTowNlrOFrxz8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ0OTIwMg==", "bodyText": "we need this close to be in a finally block", "url": "https://github.com/eclipse-vertx/vert.x/pull/3283#discussion_r381449202", "createdAt": "2020-02-19T18:05:06Z", "author": {"login": "vietj"}, "path": "src/test/java/io/vertx/core/net/NetTest.java", "diffHunk": "@@ -903,18 +903,18 @@ public void testConnectInvalidConnectHandler() throws Exception {\n \n   @Test\n   public void testListenInvalidPort() {\n-    /* Port 80 is free to use by any application on Windows, so this test fails. */\n-    Assume.assumeFalse(System.getProperty(\"os.name\").startsWith(\"Windows\"));\n-    server.close();\n-    server = vertx.createNetServer(new NetServerOptions().setPort(80));\n-    server.connectHandler((netSocket) -> {\n-    }).listen(ar -> {\n-      assertTrue(ar.failed());\n-      assertFalse(ar.succeeded());\n-      assertNotNull(ar.cause());\n-      testComplete();\n-    });\n+    final int port = 9090;\n+    final HttpServer httpServer = vertx.createHttpServer()\n+      .requestHandler(ignore -> {})\n+      .listen(port, onSuccess(s ->\n+        vertx.createNetServer()\n+          .connectHandler(ignore -> {})\n+          .listen(port, onFailure(error -> {\n+            assertNotNull(error);\n+            testComplete();\n+          }))));\n     await();\n+    httpServer.close();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ed9f538c6b482701143939d99f7ba60a91d2484"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4545, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}