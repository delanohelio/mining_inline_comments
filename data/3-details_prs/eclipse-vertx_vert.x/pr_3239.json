{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU4NDg2NDA1", "number": 3239, "title": "Added default value for query parameters.", "bodyText": "Return default value instead of null if query param is not present.\n\nremoved unused imports\n\nImprovement based on: vertx-web#1473", "createdAt": "2020-01-01T13:08:09Z", "url": "https://github.com/eclipse-vertx/vert.x/pull/3239", "merged": true, "mergeCommit": {"oid": "53f15094f251717bbbcf47b0b16b64472b66ca49"}, "closed": true, "closedAt": "2021-07-02T07:31:22Z", "author": {"login": "hradecek"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb38dS8AFqTMzOTA4OTI0Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABemXp2HABqjQ5Njk2Mjc0NjI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5MDg5MjQz", "url": "https://github.com/eclipse-vertx/vert.x/pull/3239#pullrequestreview-339089243", "createdAt": "2020-01-07T08:27:03Z", "commit": {"oid": "0def904ddcffbcd813602956ecf8583d81c3ce5f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwODoyNzowNFrOFaymUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwODoyNzowNFrOFaymUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzYzNjMwNw==", "bodyText": "\"Return the first param value with the specified name or @code{defaultValue} when the query param is not present.\"", "url": "https://github.com/eclipse-vertx/vert.x/pull/3239#discussion_r363636307", "createdAt": "2020-01-07T08:27:04Z", "author": {"login": "vietj"}, "path": "src/main/java/io/vertx/core/http/HttpServerRequest.java", "diffHunk": "@@ -170,6 +169,18 @@ default String getParam(String paramName) {\n     return params().get(paramName);\n   }\n \n+  /**\n+   * Return the first param value or defaultValue if the query param is not provided.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0def904ddcffbcd813602956ecf8583d81c3ce5f"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5MDg5NDcz", "url": "https://github.com/eclipse-vertx/vert.x/pull/3239#pullrequestreview-339089473", "createdAt": "2020-01-07T08:27:41Z", "commit": {"oid": "0def904ddcffbcd813602956ecf8583d81c3ce5f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwODoyNzo0MVrOFaynNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwODoyNzo0MVrOFaynNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzYzNjUzMw==", "bodyText": "\"the param value or @code{defaultValue} when not present\"", "url": "https://github.com/eclipse-vertx/vert.x/pull/3239#discussion_r363636533", "createdAt": "2020-01-07T08:27:41Z", "author": {"login": "vietj"}, "path": "src/main/java/io/vertx/core/http/HttpServerRequest.java", "diffHunk": "@@ -170,6 +169,18 @@ default String getParam(String paramName) {\n     return params().get(paramName);\n   }\n \n+  /**\n+   * Return the first param value or defaultValue if the query param is not provided.\n+   *\n+   * @param paramName    the param name\n+   * @param defaultValue the default value, must be non-null\n+   * @return the param value or default value", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0def904ddcffbcd813602956ecf8583d81c3ce5f"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5NDkzNzg3", "url": "https://github.com/eclipse-vertx/vert.x/pull/3239#pullrequestreview-339493787", "createdAt": "2020-01-07T20:40:28Z", "commit": {"oid": "0def904ddcffbcd813602956ecf8583d81c3ce5f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QyMDo0MDoyOFrOFbFLrQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QyMDo0MDoyOFrOFbFLrQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzk0MDc4MQ==", "bodyText": "This method is a good idea! \ud83d\ude0e  I know I'm nitpicking, but may I suggest to skip the contains() call and just do a get() and if nul\ufffdl, then return defaultValue?  This will skip at least one MultiMap call.", "url": "https://github.com/eclipse-vertx/vert.x/pull/3239#discussion_r363940781", "createdAt": "2020-01-07T20:40:28Z", "author": {"login": "petarov"}, "path": "src/main/java/io/vertx/core/http/HttpServerRequest.java", "diffHunk": "@@ -170,6 +169,18 @@ default String getParam(String paramName) {\n     return params().get(paramName);\n   }\n \n+  /**\n+   * Return the first param value or defaultValue if the query param is not provided.\n+   *\n+   * @param paramName    the param name\n+   * @param defaultValue the default value, must be non-null\n+   * @return the param value or default value\n+   */\n+  default String getParam(String paramName, String defaultValue) {\n+    Objects.requireNonNull(defaultValue, \"defaultValue\");\n+    return params().contains(paramName) ? params().get(paramName) : defaultValue;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0def904ddcffbcd813602956ecf8583d81c3ce5f"}, "originalPosition": 30}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0def904ddcffbcd813602956ecf8583d81c3ce5f", "author": {"user": {"login": "hradecek", "name": "Ivo Hr\u00e1dek"}}, "url": "https://github.com/eclipse-vertx/vert.x/commit/0def904ddcffbcd813602956ecf8583d81c3ce5f", "committedDate": "2020-01-01T12:23:22Z", "message": "Added default value for query parameters.\n\nSigned-off-by: Ivo Hr\u00e1dek <ivohradek@gmail.com>"}, "afterCommit": {"oid": "70d9d24e20b84ab7b6b272ff8facb72f1753d5b0", "author": {"user": {"login": "hradecek", "name": "Ivo Hr\u00e1dek"}}, "url": "https://github.com/eclipse-vertx/vert.x/commit/70d9d24e20b84ab7b6b272ff8facb72f1753d5b0", "committedDate": "2020-01-08T08:05:56Z", "message": "Added default value for query parameters.\n\nSigned-off-by: Ivo Hr\u00e1dek <ivohradek@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5ODUwNTk1", "url": "https://github.com/eclipse-vertx/vert.x/pull/3239#pullrequestreview-339850595", "createdAt": "2020-01-08T13:08:09Z", "commit": {"oid": "70d9d24e20b84ab7b6b272ff8facb72f1753d5b0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxMzowODowOVrOFbWTEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxMzowODowOVrOFbWTEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDIyMTIwMg==", "bodyText": "please start server like in other tests (using testAddress) so the test can run with other config such as native transport.", "url": "https://github.com/eclipse-vertx/vert.x/pull/3239#discussion_r364221202", "createdAt": "2020-01-08T13:08:09Z", "author": {"login": "vietj"}, "path": "src/test/java/io/vertx/core/http/HttpTest.java", "diffHunk": "@@ -782,6 +782,29 @@ public void testNoParams() {\n     await();\n   }\n \n+  @Test\n+  public void testGetParamDefaultValue() {\n+    String paramName1 = \"foo\";\n+    String paramName1Value = \"bar\";\n+    String paramName2 = \"notPresentParam\";\n+    String defaultValue = \"defaultValue\";\n+    String reqUri = String.format(\"%s/?%s=%s\", DEFAULT_TEST_URI, paramName1, paramName1Value);\n+\n+    server.requestHandler(req -> {\n+      assertTrue(req.params().contains(paramName1));\n+      assertEquals(paramName1Value, req.getParam(paramName1, defaultValue));\n+      assertFalse(req.params().contains(paramName2));\n+      assertEquals(defaultValue, req.getParam(paramName2, defaultValue));\n+      req.response().end();\n+    });\n+\n+    server.listen(onSuccess(server -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70d9d24e20b84ab7b6b272ff8facb72f1753d5b0"}, "originalPosition": 20}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "70d9d24e20b84ab7b6b272ff8facb72f1753d5b0", "author": {"user": {"login": "hradecek", "name": "Ivo Hr\u00e1dek"}}, "url": "https://github.com/eclipse-vertx/vert.x/commit/70d9d24e20b84ab7b6b272ff8facb72f1753d5b0", "committedDate": "2020-01-08T08:05:56Z", "message": "Added default value for query parameters.\n\nSigned-off-by: Ivo Hr\u00e1dek <ivohradek@gmail.com>"}, "afterCommit": {"oid": "10a2b6c4cf6acffa5990f1c78fcbb40c2dc324af", "author": {"user": {"login": "hradecek", "name": "Ivo Hr\u00e1dek"}}, "url": "https://github.com/eclipse-vertx/vert.x/commit/10a2b6c4cf6acffa5990f1c78fcbb40c2dc324af", "committedDate": "2020-11-19T13:47:53Z", "message": "Added default value for query parameters.\n\nSigned-off-by: Ivo Hradek <ivohradek@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0db7922631d000ea61ee9b2409198be193e3fd4", "author": {"user": {"login": "hradecek", "name": "Ivo Hr\u00e1dek"}}, "url": "https://github.com/eclipse-vertx/vert.x/commit/e0db7922631d000ea61ee9b2409198be193e3fd4", "committedDate": "2021-07-02T06:30:22Z", "message": "Added default value for query parameters.\n\nSigned-off-by: Ivo Hradek <ivohradek@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "10a2b6c4cf6acffa5990f1c78fcbb40c2dc324af", "author": {"user": {"login": "hradecek", "name": "Ivo Hr\u00e1dek"}}, "url": "https://github.com/eclipse-vertx/vert.x/commit/10a2b6c4cf6acffa5990f1c78fcbb40c2dc324af", "committedDate": "2020-11-19T13:47:53Z", "message": "Added default value for query parameters.\n\nSigned-off-by: Ivo Hradek <ivohradek@gmail.com>"}, "afterCommit": {"oid": "e0db7922631d000ea61ee9b2409198be193e3fd4", "author": {"user": {"login": "hradecek", "name": "Ivo Hr\u00e1dek"}}, "url": "https://github.com/eclipse-vertx/vert.x/commit/e0db7922631d000ea61ee9b2409198be193e3fd4", "committedDate": "2021-07-02T06:30:22Z", "message": "Added default value for query parameters.\n\nSigned-off-by: Ivo Hradek <ivohradek@gmail.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1726, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}