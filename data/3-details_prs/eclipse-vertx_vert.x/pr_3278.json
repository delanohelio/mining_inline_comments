{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyMDE4MzAz", "number": 3278, "title": "Completed futures should operate on provided context", "bodyText": "SucceededFuture and FailedFuture, like other futures, take a context as constructor param.\nIf not null, this context should be used to dispatch the execution of future handlers.", "createdAt": "2020-02-06T17:20:16Z", "url": "https://github.com/eclipse-vertx/vert.x/pull/3278", "merged": true, "mergeCommit": {"oid": "f8f44b1d6730420068f0b682775538a83f521b8e"}, "closed": true, "closedAt": "2020-02-10T08:49:42Z", "author": {"login": "tsegismont"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcBuD4qgH2gAyMzcyMDE4MzAzOjUyY2IyODVkNDZjNDRlMDI5MGRiODI1ZDEyMjFiNmIwNWY0OTk4ZGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcCUv6fAFqTM1NTU1MDA2OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "52cb285d46c44e0290db825d1221b6b05f4998df", "author": {"user": {"login": "tsegismont", "name": "Thomas Segismont"}}, "url": "https://github.com/eclipse-vertx/vert.x/commit/52cb285d46c44e0290db825d1221b6b05f4998df", "committedDate": "2020-02-06T17:19:53Z", "message": "Completed futures should operate on provided context\n\nSucceededFuture and FailedFuture, like other futures, take a context as constructor param.\nIf not null, this context should be used to dispatch the execution of future handlers.\n\nSigned-off-by: Thomas Segismont <tsegismont@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1MDgyMDUz", "url": "https://github.com/eclipse-vertx/vert.x/pull/3278#pullrequestreview-355082053", "createdAt": "2020-02-07T11:01:59Z", "commit": {"oid": "52cb285d46c44e0290db825d1221b6b05f4998df"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxMTowMTo1OVrOFm5oqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxMTowMTo1OVrOFm5oqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjMzNDUwNA==", "bodyText": "can you replace this check with event-loop thread instead of not being the junit thread ?", "url": "https://github.com/eclipse-vertx/vert.x/pull/3278#discussion_r376334504", "createdAt": "2020-02-07T11:01:59Z", "author": {"login": "vietj"}, "path": "src/test/java/io/vertx/core/FutureTest.java", "diffHunk": "@@ -1570,4 +1573,38 @@ public void testFromCompletionStageWithContext() {\n \n     await();\n   }\n+\n+  @Test\n+  public void testCompletedFuturesContext() {\n+    waitFor(4);\n+\n+    Thread testThread = Thread.currentThread();\n+    ContextInternal context = (ContextInternal) vertx.getOrCreateContext();\n+\n+    Future.succeededFuture().onSuccess(v -> {\n+      assertSame(testThread, Thread.currentThread());\n+      assertNull(Vertx.currentContext());\n+      complete();\n+    });\n+\n+    context.succeededFuture().onSuccess(v -> {\n+      assertNotSame(testThread, Thread.currentThread());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52cb285d46c44e0290db825d1221b6b05f4998df"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b9c1647307dfa34f8ce0c5b477796299aeaf2fc", "author": {"user": {"login": "tsegismont", "name": "Thomas Segismont"}}, "url": "https://github.com/eclipse-vertx/vert.x/commit/1b9c1647307dfa34f8ce0c5b477796299aeaf2fc", "committedDate": "2020-02-08T06:21:41Z", "message": "Added context thread checks\n\nSigned-off-by: Thomas Segismont <tsegismont@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1NTUwMDY5", "url": "https://github.com/eclipse-vertx/vert.x/pull/3278#pullrequestreview-355550069", "createdAt": "2020-02-08T14:24:22Z", "commit": {"oid": "1b9c1647307dfa34f8ce0c5b477796299aeaf2fc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1737, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}