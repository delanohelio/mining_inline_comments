{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA0MjA2MjI1", "number": 516, "title": "fix: AsyncTransactionManager did not propagate statement errors", "bodyText": "Invalid statements or other statements that would cause an error would not cause the returned ApiFuture to fail.\nFixes #514", "createdAt": "2020-10-15T15:51:32Z", "url": "https://github.com/googleapis/java-spanner/pull/516", "merged": true, "mergeCommit": {"oid": "4b8b8452589d63f6768b971a880a19bde80a9671"}, "closed": true, "closedAt": "2020-10-16T13:55:27Z", "author": {"login": "olavloite"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSzx6ggH2gAyNTA0MjA2MjI1OjI5MGUxYzI0MTY4YjdmZGRhYWQ2NzM5ZDQ4MTljMWU3ZWFlMDM3OWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdTGWf2AFqTUxMDQ2NzE1MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "290e1c24168b7fddaad6739d4819c1e7eae0379f", "author": {"user": {"login": "olavloite", "name": "Knut Olav L\u00f8ite"}}, "url": "https://github.com/googleapis/java-spanner/commit/290e1c24168b7fddaad6739d4819c1e7eae0379f", "committedDate": "2020-10-15T15:47:33Z", "message": "fix: AsyncTransactionManager did not propagate statement errors\n\nInvalid statements or other statements that would cause an error would not cause the\nreturned ApiFuture to fail.\n\nFixes #514"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5NjE1MTY3", "url": "https://github.com/googleapis/java-spanner/pull/516#pullrequestreview-509615167", "createdAt": "2020-10-15T17:34:20Z", "commit": {"oid": "290e1c24168b7fddaad6739d4819c1e7eae0379f"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxNzozNDoyMFrOHiSs1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxNzozNDoyMFrOHiSs1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTcyMDAyMQ==", "bodyText": "Optional: use a table more commonly found in client library integration test, so future readers won't have to wonder where BOOKS came from.", "url": "https://github.com/googleapis/java-spanner/pull/516#discussion_r505720021", "createdAt": "2020-10-15T17:34:20Z", "author": {"login": "elefeint"}, "path": "google-cloud-spanner/src/test/java/com/google/cloud/spanner/AsyncTransactionManagerTest.java", "diffHunk": "@@ -1112,4 +1113,56 @@ public void asyncTransactionManagerQuery() throws Exception {\n       }\n     }\n   }\n+\n+  @Test\n+  public void asyncTransactionManager_shouldPropagateStatementFailure()\n+      throws ExecutionException, InterruptedException, TimeoutException {\n+    final Statement garbledStatement =\n+        Statement.newBuilder(\"INSERT INTO BOOKS (UUID, TITLE) VALUES ('123', 'Test book')jljlk\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "290e1c24168b7fddaad6739d4819c1e7eae0379f"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1790cd192c2585aafc3e686e5917650284d4e7aa", "author": {"user": {"login": "olavloite", "name": "Knut Olav L\u00f8ite"}}, "url": "https://github.com/googleapis/java-spanner/commit/1790cd192c2585aafc3e686e5917650284d4e7aa", "committedDate": "2020-10-16T09:54:33Z", "message": "test: use existing invalid statement in test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNDY3MTUw", "url": "https://github.com/googleapis/java-spanner/pull/516#pullrequestreview-510467150", "createdAt": "2020-10-16T13:25:48Z", "commit": {"oid": "1790cd192c2585aafc3e686e5917650284d4e7aa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 961, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}