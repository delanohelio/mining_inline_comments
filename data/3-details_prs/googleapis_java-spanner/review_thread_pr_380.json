{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY2NTM3MzE2", "number": 380, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNjowMjo1NFrOEXe4FA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNjozODowNFrOEXfZvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkzMDU4NTgwOnYy", "diffSide": "RIGHT", "path": "google-cloud-spanner/src/test/java/com/google/cloud/spanner/IntegrationTestEnv.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNjowMjo1NFrOG_S65w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNjowMjo1NFrOG_S65w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTAyMzQ2Mw==", "bodyText": "This needed to be updated so that the tests run properly with the emulator. This enables a new spanner instance to be created when running with the emulator.", "url": "https://github.com/googleapis/java-spanner/pull/380#discussion_r469023463", "createdAt": "2020-08-12T06:02:54Z", "author": {"login": "thiagotnunes"}, "path": "google-cloud-spanner/src/test/java/com/google/cloud/spanner/IntegrationTestEnv.java", "diffHunk": "@@ -79,7 +80,7 @@ protected void before() throws Throwable {\n     SpannerOptions options = config.spannerOptions();\n     String instanceProperty = System.getProperty(TEST_INSTANCE_PROPERTY, \"\");\n     InstanceId instanceId;\n-    if (!instanceProperty.isEmpty()) {\n+    if (!instanceProperty.isEmpty() && !isUsingEmulator()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff377ce6c5aef90307bc6704745e30d136c166c5"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkzMDU4NjUwOnYy", "diffSide": "LEFT", "path": "google-cloud-spanner/src/test/java/com/google/cloud/spanner/it/ITAsyncAPITest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNjowMzoyMVrOG_S7YA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNjowMzoyMVrOG_S7YA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTAyMzU4NA==", "bodyText": "Enables this test to use the emulator.", "url": "https://github.com/googleapis/java-spanner/pull/380#discussion_r469023584", "createdAt": "2020-08-12T06:03:21Z", "author": {"login": "thiagotnunes"}, "path": "google-cloud-spanner/src/test/java/com/google/cloud/spanner/it/ITAsyncAPITest.java", "diffHunk": "@@ -279,9 +278,6 @@ public void columnNotFound() throws Exception {\n \n   @Test\n   public void asyncRunnerFireAndForgetInvalidUpdate() throws Exception {\n-    assumeFalse(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff377ce6c5aef90307bc6704745e30d136c166c5"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkzMDU4NjgxOnYy", "diffSide": "LEFT", "path": "google-cloud-spanner/src/test/java/com/google/cloud/spanner/it/ITClosedSessionTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNjowMzoyOFrOG_S7kA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNjowMzoyOFrOG_S7kA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTAyMzYzMg==", "bodyText": "Enables this test to use the emulator.", "url": "https://github.com/googleapis/java-spanner/pull/380#discussion_r469023632", "createdAt": "2020-08-12T06:03:28Z", "author": {"login": "thiagotnunes"}, "path": "google-cloud-spanner/src/test/java/com/google/cloud/spanner/it/ITClosedSessionTest.java", "diffHunk": "@@ -61,10 +60,6 @@\n \n   @BeforeClass\n   public static void setUpDatabase() {\n-    // TODO: Enable when the emulator returns ResourceInfo for Session not found errors.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff377ce6c5aef90307bc6704745e30d136c166c5"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkzMDU4ODI1OnYy", "diffSide": "LEFT", "path": "google-cloud-spanner/src/test/java/com/google/cloud/spanner/it/ITCommitTimestampTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNjowNDowOFrOG_S8Xw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNjowNDowOFrOG_S8Xw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTAyMzgzOQ==", "bodyText": "Enables this test to use the emulator.", "url": "https://github.com/googleapis/java-spanner/pull/380#discussion_r469023839", "createdAt": "2020-08-12T06:04:08Z", "author": {"login": "thiagotnunes"}, "path": "google-cloud-spanner/src/test/java/com/google/cloud/spanner/it/ITCommitTimestampTest.java", "diffHunk": "@@ -336,8 +336,6 @@ public void interleavedTableHierarchy1() {\n   // allowed if child tables are not allow_commmit_timestamp=true\n   @Test\n   public void interleavedTableHierarchy2() {\n-    // TODO: Remove the following line once the emulator is as strict as Cloud Spanner.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff377ce6c5aef90307bc6704745e30d136c166c5"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkzMDU5NTgxOnYy", "diffSide": "LEFT", "path": "google-cloud-spanner/src/test/java/com/google/cloud/spanner/it/ITCommitTimestampTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNjowNzoxMVrOG_TA1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNjowNzoxMVrOG_TA1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTAyNDk4MA==", "bodyText": "Enables this test to use the emulator.", "url": "https://github.com/googleapis/java-spanner/pull/380#discussion_r469024980", "createdAt": "2020-08-12T06:07:11Z", "author": {"login": "thiagotnunes"}, "path": "google-cloud-spanner/src/test/java/com/google/cloud/spanner/it/ITCommitTimestampTest.java", "diffHunk": "@@ -325,19 +324,14 @@ public void interleavedTableHierarchy1() {\n                   .build()));\n       fail(\"missing expected exception\");\n     } catch (SpannerException e) {\n-      // TODO: Remove when the emulator returns the same error code as Cloud Spanner.\n-      if (!env.getTestHelper().isEmulator()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e6e4424cfb2140e9191842e3653161a81668f85d"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkzMDY3MTk3OnYy", "diffSide": "RIGHT", "path": "google-cloud-spanner/src/main/java/com/google/cloud/spanner/testing/RemoteSpannerHelper.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNjozODowNFrOG_TtYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNjozODowNFrOG_TtYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTAzNjM4Ng==", "bodyText": "Refactors: deprecate this method and use the newly created method.", "url": "https://github.com/googleapis/java-spanner/pull/380#discussion_r469036386", "createdAt": "2020-08-12T06:38:04Z", "author": {"login": "thiagotnunes"}, "path": "google-cloud-spanner/src/main/java/com/google/cloud/spanner/testing/RemoteSpannerHelper.java", "diffHunk": "@@ -58,8 +57,15 @@ public SpannerOptions getOptions() {\n     return options;\n   }\n \n+  /**\n+   * Checks whether the emulator is being used.\n+   *\n+   * @deprecated use {@link EmulatorSpannerHelper#isUsingEmulator()} instead.\n+   * @return true if the emulator is being used. Returns false otherwise.\n+   */\n+  @Deprecated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11dc86f2f3c472dcccd2da00e7bb19b453be0069"}, "originalPosition": 18}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3162, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}