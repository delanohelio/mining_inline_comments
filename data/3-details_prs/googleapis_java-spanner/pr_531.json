{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3MTcxMTE3", "number": 531, "title": "feat: adds options to the write operations", "bodyText": "Adds the possibility of adding options to the write operations and encapsulates the write response into its own class so that we can augment the response with more fields than the commit timestamp.\nAt the moment, the new methods just delegate to the existing write methods. Once we add write option implementations we should change the definition of the added methods.", "createdAt": "2020-10-21T00:27:12Z", "url": "https://github.com/googleapis/java-spanner/pull/531", "merged": true, "mergeCommit": {"oid": "659719deb5a18a87859bc174f5bde1e1147834d8"}, "closed": true, "closedAt": "2020-10-22T23:17:48Z", "author": {"login": "thiagotnunes"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdUjEw0AH2gAyNTA3MTcxMTE3OjQ4ZGE1YTQ0Njg2N2E5ZDBjZTA4ZTc2NjI1N2Y5OTdkMjEyMmRlMTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdU3LM2AH2gAyNTA3MTcxMTE3OjkwMjkxNWY2ZjJhMGUwMWQzOWVjZjE0OTJhYWU4YmRkNmJiNTFhNTQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "48da5a446867a9d0ce08e766257f997d2122de14", "author": {"user": {"login": "thiagotnunes", "name": "Thiago Nunes"}}, "url": "https://github.com/googleapis/java-spanner/commit/48da5a446867a9d0ce08e766257f997d2122de14", "committedDate": "2020-10-21T01:27:36Z", "message": "feat: adds options to the write operations\n\nAdds the possibility of adding options to the write operations and\nencapsulates the write response into it's own class so that we can\naugment the response with more fields than the commit timestamp."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "67a2379883ffcd7103403eda8e5a989cd5e8b3ae", "author": {"user": {"login": "thiagotnunes", "name": "Thiago Nunes"}}, "url": "https://github.com/googleapis/java-spanner/commit/67a2379883ffcd7103403eda8e5a989cd5e8b3ae", "committedDate": "2020-10-21T00:23:45Z", "message": "feat!: adds options to the write operations\n\nAdds the possibility of adding options to the write operations and\nencapsulates the write response into it's own class so that we can\naugment the response with more fields than the commit timestamp."}, "afterCommit": {"oid": "48da5a446867a9d0ce08e766257f997d2122de14", "author": {"user": {"login": "thiagotnunes", "name": "Thiago Nunes"}}, "url": "https://github.com/googleapis/java-spanner/commit/48da5a446867a9d0ce08e766257f997d2122de14", "committedDate": "2020-10-21T01:27:36Z", "message": "feat: adds options to the write operations\n\nAdds the possibility of adding options to the write operations and\nencapsulates the write response into it's own class so that we can\naugment the response with more fields than the commit timestamp."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5dd32d1096da8ae47af4b03aaf0a9c706ebddfea", "author": {"user": {"login": "thiagotnunes", "name": "Thiago Nunes"}}, "url": "https://github.com/googleapis/java-spanner/commit/5dd32d1096da8ae47af4b03aaf0a9c706ebddfea", "committedDate": "2020-10-21T06:17:32Z", "message": "refactor: changes write to transaction option\n\nUpdates WriteOption to TransactionOption and changes the WriteResponse\nto CommitResponse."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzMzQ0Njky", "url": "https://github.com/googleapis/java-spanner/pull/531#pullrequestreview-513344692", "createdAt": "2020-10-21T06:32:27Z", "commit": {"oid": "5dd32d1096da8ae47af4b03aaf0a9c706ebddfea"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzMzk1MzM0", "url": "https://github.com/googleapis/java-spanner/pull/531#pullrequestreview-513395334", "createdAt": "2020-10-21T07:48:39Z", "commit": {"oid": "5dd32d1096da8ae47af4b03aaf0a9c706ebddfea"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwNzo0ODo0MFrOHleo4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwNzo0ODo0MFrOHleo4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTA2MTM0Nw==", "bodyText": "What do you think about WriteOption in place of TransactionOption?", "url": "https://github.com/googleapis/java-spanner/pull/531#discussion_r509061347", "createdAt": "2020-10-21T07:48:40Z", "author": {"login": "mayurkale22"}, "path": "google-cloud-spanner/src/main/java/com/google/cloud/spanner/DatabaseClient.java", "diffHunk": "@@ -52,6 +53,35 @@\n    */\n   Timestamp write(Iterable<Mutation> mutations) throws SpannerException;\n \n+  /**\n+   * Writes the given mutations atomically to the database with the given options.\n+   *\n+   * <p>This method uses retries and replay protection internally, which means that the mutations\n+   * are applied exactly once on success, or not at all if an error is returned, regardless of any\n+   * failures in the underlying network. Note that if the call is cancelled or reaches deadline, it\n+   * is not possible to know whether the mutations were applied without performing a subsequent\n+   * database operation, but the mutations will have been applied at most once.\n+   *\n+   * <p>Example of blind write.\n+   *\n+   * <pre>{@code\n+   * long singerId = my_singer_id;\n+   * Mutation mutation = Mutation.newInsertBuilder(\"Singer\")\n+   *         .set(\"SingerId\")\n+   *         .to(singerId)\n+   *         .set(\"FirstName\")\n+   *         .to(\"Billy\")\n+   *         .set(\"LastName\")\n+   *         .to(\"Joel\")\n+   *         .build();\n+   * dbClient.writeWithOptions(Collections.singletonList(mutation));\n+   * }</pre>\n+   *\n+   * @return a response with the timestamp at which the write was committed\n+   */\n+  CommitResponse writeWithOptions(Iterable<Mutation> mutations, TransactionOption... options)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5dd32d1096da8ae47af4b03aaf0a9c706ebddfea"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzOTEwNjky", "url": "https://github.com/googleapis/java-spanner/pull/531#pullrequestreview-513910692", "createdAt": "2020-10-21T16:34:11Z", "commit": {"oid": "5dd32d1096da8ae47af4b03aaf0a9c706ebddfea"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "902915f6f2a0e01d39ecf1492aae8bdd6bb51a54", "author": {"user": {"login": "thiagotnunes", "name": "Thiago Nunes"}}, "url": "https://github.com/googleapis/java-spanner/commit/902915f6f2a0e01d39ecf1492aae8bdd6bb51a54", "committedDate": "2020-10-22T00:52:44Z", "message": "Merge branch 'master' into write-with-options"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 968, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}