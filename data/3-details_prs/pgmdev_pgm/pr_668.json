{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2MDAwMTIy", "number": 668, "title": "Improve freeze alert broadcast", "bodyText": "Improve Freeze Broadcast\nThis is just a small feature I found would be useful for staff members. Now when a freeze message is sent to the admin chat, clicking the broadcast will allow a staff member to reverse the action done.\nSigned-off-by: applenick applenick@users.noreply.github.com", "createdAt": "2020-10-01T06:32:45Z", "url": "https://github.com/PGMDev/PGM/pull/668", "merged": true, "mergeCommit": {"oid": "2229716e6a9afaf396d59070f73b7464facb14d7"}, "closed": true, "closedAt": "2020-10-20T23:53:13Z", "author": {"login": "applenick"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdOK4jmAH2gAyNDk2MDAwMTIyOmEzZmQ2ODRjNjdjNzRkZjU5MWE0MjZjOWRhODY0ODQ1MzJlNTc5ZDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUhtyaAFqTUxMzIxNDA3Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a3fd684c67c74df591a426c9da86484532e579d9", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/a3fd684c67c74df591a426c9da86484532e579d9", "committedDate": "2020-10-01T05:53:00Z", "message": "Improve freeze alert broadcast\n* Adds an interactive click to reverse freeze action\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwNDEyMDM4", "url": "https://github.com/PGMDev/PGM/pull/668#pullrequestreview-500412038", "createdAt": "2020-10-01T14:32:43Z", "commit": {"oid": "a3fd684c67c74df591a426c9da86484532e579d9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxNDozMjo0M1rOHbNURg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxNDozMjo0M1rOHbNURg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODI5MTc4Mg==", "bodyText": "Is this mixed up?\nConstuctor calls for senderName, targetName. Seems like you are sending targetName and then senderName rn\nAlso considered just having a constructor MatchPlayer sender, MatchPlayer target, boolean frozen ?\nso a method Component createInteractiveFreezeBroadcast could be something like\n return TextComponent.builder()\n.append(\n              TranslatableComponent.of(\n                  String.format(\"moderation.freeze.broadcast.%s\", frozen ? \"frozen\" : \"thaw\"),\n                  TextColor.GRAY,\n                  sender.getName(NameStyle.CONCISE),\n                  target.getName(NameStyle.CONCISE))\n          .hoverEvent(\n              HoverEvent.showText(\n                  TranslatableComponent.of(\"moderation.freeze.broadcast.hover\", TextColor.GRAY)))\n          .clickEvent(ClickEvent.runCommand(\"/f \" + target.getBukkit().getName())\n          .build();\nThe thing i think is weird is passing a targetName and a username", "url": "https://github.com/PGMDev/PGM/pull/668#discussion_r498291782", "createdAt": "2020-10-01T14:32:43Z", "author": {"login": "KingOfSquares"}, "path": "core/src/main/java/tc/oc/pgm/community/modules/FreezeMatchModule.java", "diffHunk": "@@ -369,14 +368,27 @@ private void thaw(MatchPlayer freezee, Component senderName, boolean silent) {\n       freezee.sendMessage(thawedTitle.color(TextColor.GREEN).build());\n \n       ChatDispatcher.broadcastAdminChatMessage(\n-          TranslatableComponent.of(\n-              \"moderation.freeze.broadcast.thaw\",\n-              TextColor.GRAY,\n-              senderName,\n-              freezee.getName(NameStyle.CONCISE)),\n+          createInteractiveBroadcast(\n+              freezee.getName(NameStyle.CONCISE), senderName, freezee.getBukkit().getName(), false),\n           match);\n     }\n \n+    private Component createInteractiveBroadcast(\n+        Component senderName, Component targetName, String username, boolean frozen) {\n+      return TextComponent.builder()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a3fd684c67c74df591a426c9da86484532e579d9"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c18f54a20b4272334abce029d5d4686fd430469f", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/c18f54a20b4272334abce029d5d4686fd430469f", "committedDate": "2020-10-02T22:47:47Z", "message": "Clean up interactive broadcast method\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxNTQwNzEy", "url": "https://github.com/PGMDev/PGM/pull/668#pullrequestreview-501540712", "createdAt": "2020-10-03T11:49:59Z", "commit": {"oid": "c18f54a20b4272334abce029d5d4686fd430469f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxNTY0MTY5", "url": "https://github.com/PGMDev/PGM/pull/668#pullrequestreview-501564169", "createdAt": "2020-10-03T18:10:59Z", "commit": {"oid": "c18f54a20b4272334abce029d5d4686fd430469f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzMjE0MDc3", "url": "https://github.com/PGMDev/PGM/pull/668#pullrequestreview-513214077", "createdAt": "2020-10-20T23:52:36Z", "commit": {"oid": "c18f54a20b4272334abce029d5d4686fd430469f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 328, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}