{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIyOTM2NzU2", "number": 505, "title": "Add map author prefix/permission", "bodyText": "Adds a special permission for map authors!\nRequires any users of the current version of PGM to add the section in the config manually\nThanks to: @Pablete1234\nPair programming partners: @BGMP and @Pugzy\nCloses #152\nSigned-off-by: SimonIMac simonmorland@gmail.com", "createdAt": "2020-05-26T00:52:59Z", "url": "https://github.com/PGMDev/PGM/pull/505", "merged": true, "mergeCommit": {"oid": "b0e8108d84234461e98baa13337731aae8f6b30c"}, "closed": true, "closedAt": "2020-06-05T14:50:17Z", "author": {"login": "KingOfSquares"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclB916ABqjMzNzI4NzM3NzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcoT1lvgFqTQyNTM3MDY0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6627d7a51739161c7614c7c0b97980c50a4fecc9", "author": {"user": {"login": "KingOfSquares", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/6627d7a51739161c7614c7c0b97980c50a4fecc9", "committedDate": "2020-05-26T00:47:03Z", "message": "Add mapmaker permission\n\nSigned-off-by: SimonIMac <simonmorland@gmail.com>\nUpdate map.xml\nSigned-off-by: SimonIMac <simonmorland@gmail.com>"}, "afterCommit": {"oid": "6b4540158c6d4d586c1669329dc136d0f316c9e7", "author": {"user": {"login": "KingOfSquares", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/6b4540158c6d4d586c1669329dc136d0f316c9e7", "committedDate": "2020-05-26T10:18:28Z", "message": "format and rebase\n\nSigned-off-by: KingOfSquares <simonmorland@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6b4540158c6d4d586c1669329dc136d0f316c9e7", "author": {"user": {"login": "KingOfSquares", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/6b4540158c6d4d586c1669329dc136d0f316c9e7", "committedDate": "2020-05-26T10:18:28Z", "message": "format and rebase\n\nSigned-off-by: KingOfSquares <simonmorland@gmail.com>"}, "afterCommit": {"oid": "c7d1b849300c0bdba50cc467b46ed6f1da930152", "author": {"user": {"login": "KingOfSquares", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/c7d1b849300c0bdba50cc467b46ed6f1da930152", "committedDate": "2020-05-27T19:37:25Z", "message": "format and rebase\n\nSigned-off-by: KingOfSquares <simonmorland@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5Nzg4NTcy", "url": "https://github.com/PGMDev/PGM/pull/505#pullrequestreview-419788572", "createdAt": "2020-05-28T05:33:31Z", "commit": {"oid": "c7d1b849300c0bdba50cc467b46ed6f1da930152"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwNTozMzozMVrOGbmN0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwNTozMzozMVrOGbmN0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTU5MDg2NQ==", "bodyText": "Should define this in Permissions", "url": "https://github.com/PGMDev/PGM/pull/505#discussion_r431590865", "createdAt": "2020-05-28T05:33:31Z", "author": {"login": "Electroid"}, "path": "core/src/main/java/tc/oc/pgm/modules/MapmakerMatchModule.java", "diffHunk": "@@ -0,0 +1,34 @@\n+package tc.oc.pgm.modules;\n+\n+import java.util.Collection;\n+import org.bukkit.event.EventHandler;\n+import org.bukkit.event.Listener;\n+import tc.oc.pgm.api.PGM;\n+import tc.oc.pgm.api.map.Contributor;\n+import tc.oc.pgm.api.match.Match;\n+import tc.oc.pgm.api.match.MatchModule;\n+import tc.oc.pgm.api.match.MatchScope;\n+import tc.oc.pgm.api.player.MatchPlayer;\n+import tc.oc.pgm.api.player.event.MatchPlayerAddEvent;\n+import tc.oc.pgm.events.ListenerScope;\n+\n+@ListenerScope(MatchScope.LOADED)\n+public class MapmakerMatchModule implements MatchModule, Listener {\n+  private final Collection<Contributor> authors;\n+\n+  public MapmakerMatchModule(Match match) {\n+    this.authors = match.getMap().getAuthors();\n+  }\n+\n+  @EventHandler(ignoreCancelled = true)\n+  public void onPlayerAddEvent(final MatchPlayerAddEvent event) {\n+    MatchPlayer player = event.getPlayer();\n+    player\n+        .getBukkit()\n+        .addAttachment(\n+            PGM.get(),\n+            \"pgm.group.mapmaker\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c7d1b849300c0bdba50cc467b46ed6f1da930152"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0MDIwNzQw", "url": "https://github.com/PGMDev/PGM/pull/505#pullrequestreview-424020740", "createdAt": "2020-06-04T00:20:05Z", "commit": {"oid": "c7d1b849300c0bdba50cc467b46ed6f1da930152"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwMDoyMDowNVrOGexukA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwMDoyMDowNVrOGexukA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDkyNTIwMA==", "bodyText": "Also add a + before, so its consistent with the rest of the config.", "url": "https://github.com/PGMDev/PGM/pull/505#discussion_r434925200", "createdAt": "2020-06-04T00:20:05Z", "author": {"login": "Electroid"}, "path": "core/src/main/resources/config.yml", "diffHunk": "@@ -136,6 +136,12 @@ groups:\n       - \"-worldedit.navigation.jumpto.tool\"\n       - \"-commandbook.teleport\"\n \n+  # A special group for authors of the playing map\n+  mapmaker:\n+    prefix: \"&9*\"\n+    permissions:\n+      - \"pgm.premium\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c7d1b849300c0bdba50cc467b46ed6f1da930152"}, "originalPosition": 8}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c7d1b849300c0bdba50cc467b46ed6f1da930152", "author": {"user": {"login": "KingOfSquares", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/c7d1b849300c0bdba50cc467b46ed6f1da930152", "committedDate": "2020-05-27T19:37:25Z", "message": "format and rebase\n\nSigned-off-by: KingOfSquares <simonmorland@gmail.com>"}, "afterCommit": {"oid": "b066466bbd01d6ffd6af6c6a8e3122059faeeeba", "author": {"user": {"login": "KingOfSquares", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/b066466bbd01d6ffd6af6c6a8e3122059faeeeba", "committedDate": "2020-06-04T10:13:52Z", "message": "format and rebase\n\nSigned-off-by: KingOfSquares <simonmorland@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef6e2b959c6a62acdd434eb0667d530a5e19e85e", "author": {"user": {"login": "KingOfSquares", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/ef6e2b959c6a62acdd434eb0667d530a5e19e85e", "committedDate": "2020-06-04T10:20:27Z", "message": "Add mapmaker permission\n\nSigned-off-by: SimonIMac <simonmorland@gmail.com>\nUpdate map.xml\nSigned-off-by: SimonIMac <simonmorland@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2992a4f792ee5db5a45173574b851977ed9ae43b", "author": {"user": {"login": "KingOfSquares", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/2992a4f792ee5db5a45173574b851977ed9ae43b", "committedDate": "2020-06-04T10:20:27Z", "message": "format and rebase\n\nSigned-off-by: KingOfSquares <simonmorland@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "080ca1e06e1e3c224a8cf11b4322c263f4668798", "author": {"user": {"login": "KingOfSquares", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/080ca1e06e1e3c224a8cf11b4322c263f4668798", "committedDate": "2020-06-04T10:20:27Z", "message": "Make implementation consistent\n\nSigned-off-by: KingOfSquares <simonmorland@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3613f717f513a92f65df8af9c52755bffff615de", "author": {"user": {"login": "KingOfSquares", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/3613f717f513a92f65df8af9c52755bffff615de", "committedDate": "2020-06-04T10:19:23Z", "message": "Make implementation consistent\n\nSigned-off-by: KingOfSquares <simonmorland@gmail.com>"}, "afterCommit": {"oid": "080ca1e06e1e3c224a8cf11b4322c263f4668798", "author": {"user": {"login": "KingOfSquares", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/080ca1e06e1e3c224a8cf11b4322c263f4668798", "committedDate": "2020-06-04T10:20:27Z", "message": "Make implementation consistent\n\nSigned-off-by: KingOfSquares <simonmorland@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1MzcwNjQ0", "url": "https://github.com/PGMDev/PGM/pull/505#pullrequestreview-425370644", "createdAt": "2020-06-05T14:49:47Z", "commit": {"oid": "080ca1e06e1e3c224a8cf11b4322c263f4668798"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 398, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}