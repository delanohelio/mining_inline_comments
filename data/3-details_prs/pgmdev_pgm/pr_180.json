{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU4ODA5NjMz", "number": 180, "title": "Add basic report command with alert and event", "bodyText": "Adds a basic report command which takes a player and a reason. This triggers a PlayerReportEvent and sends a formatted message to all players with the permission Permissions.ADMINCHAT.\ne.g. image below (both player names are clickable, ignore my messed up flairs)\n\nSigned-off-by: Pugzy pugzy@mail.com", "createdAt": "2020-01-02T22:03:38Z", "url": "https://github.com/PGMDev/PGM/pull/180", "merged": true, "mergeCommit": {"oid": "ecbdd4b897e51b821f335b634f3894db00f10840"}, "closed": true, "closedAt": "2020-01-05T11:53:37Z", "author": {"login": "Pugzy"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb2hP1SAFqTMzNzg4Mjk2MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb3WKDDgH2gAyMzU4ODA5NjMzOmRlNWIzM2NhYjg5MWFkMDcyODdmYzY0OTdkNGViODFhZWNlZGE1MTc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM3ODgyOTYx", "url": "https://github.com/PGMDev/PGM/pull/180#pullrequestreview-337882961", "createdAt": "2020-01-02T22:11:00Z", "commit": {"oid": "9b4f4a3aed98bee19290cc539b8aff1445191421"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQyMjoxMTowMFrOFZ2Wvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQyMjoxMTowMFrOFZ2Wvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjY0OTI3OA==", "bodyText": "I think this should be defined in a constant?", "url": "https://github.com/PGMDev/PGM/pull/180#discussion_r362649278", "createdAt": "2020-01-02T22:11:00Z", "author": {"login": "TheMolkaPL"}, "path": "src/main/java/tc/oc/pgm/commands/ReportCommands.java", "diffHunk": "@@ -0,0 +1,51 @@\n+package tc.oc.pgm.commands;\n+\n+import app.ashcon.intake.Command;\n+import app.ashcon.intake.parametric.annotation.Text;\n+import net.md_5.bungee.api.ChatColor;\n+import org.bukkit.entity.Player;\n+import tc.oc.component.Component;\n+import tc.oc.component.types.PersonalizedText;\n+import tc.oc.named.NameStyle;\n+import tc.oc.pgm.api.Permissions;\n+import tc.oc.pgm.api.match.Match;\n+import tc.oc.pgm.api.player.MatchPlayer;\n+import tc.oc.pgm.events.PlayerReportEvent;\n+import tc.oc.util.components.Components;\n+\n+public class ReportCommands {\n+\n+  @Command(\n+      aliases = {\"report\"},\n+      usage = \"<player> <reason>\",\n+      desc = \"Report a player who is breaking the rules\")\n+  public static void report(MatchPlayer sender, Match match, Player player, @Text String reason) {\n+    MatchPlayer accused = match.getPlayer(player);\n+    match.callEvent(new PlayerReportEvent(sender, accused, reason));\n+\n+    final Component component =\n+        new PersonalizedText(\n+            Components.format(\n+                \"[\"\n+                    + ChatColor.GOLD\n+                    + \"R\"\n+                    + ChatColor.WHITE\n+                    + \"] \"\n+                    + ChatColor.DARK_AQUA\n+                    + \"{0}\"\n+                    + ChatColor.YELLOW\n+                    + \" \\u2794 \"\n+                    + ChatColor.DARK_AQUA\n+                    + \"{1}\"\n+                    + ChatColor.YELLOW\n+                    + \": \"\n+                    + \"{2}\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b4f4a3aed98bee19290cc539b8aff1445191421"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM3ODgzMjg3", "url": "https://github.com/PGMDev/PGM/pull/180#pullrequestreview-337883287", "createdAt": "2020-01-02T22:11:57Z", "commit": {"oid": "9b4f4a3aed98bee19290cc539b8aff1445191421"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQyMjoxMTo1N1rOFZ2X0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQyMjoxMTo1N1rOFZ2X0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjY0OTU1NQ==", "bodyText": "Should be cancelable.", "url": "https://github.com/PGMDev/PGM/pull/180#discussion_r362649555", "createdAt": "2020-01-02T22:11:57Z", "author": {"login": "TheMolkaPL"}, "path": "src/main/java/tc/oc/pgm/events/PlayerReportEvent.java", "diffHunk": "@@ -0,0 +1,37 @@\n+package tc.oc.pgm.events;\n+\n+import org.bukkit.event.HandlerList;\n+import tc.oc.pgm.api.player.MatchPlayer;\n+import tc.oc.pgm.api.player.event.MatchPlayerEvent;\n+\n+/** Called immediately AFTER a player runs the report command. */\n+public class PlayerReportEvent extends MatchPlayerEvent {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b4f4a3aed98bee19290cc539b8aff1445191421"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM3ODgzNTcw", "url": "https://github.com/PGMDev/PGM/pull/180#pullrequestreview-337883570", "createdAt": "2020-01-02T22:12:49Z", "commit": {"oid": "9b4f4a3aed98bee19290cc539b8aff1445191421"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQyMjoxMjo0OVrOFZ2Yvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQyMjoxMjo0OVrOFZ2Yvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjY0OTc5MQ==", "bodyText": "this.sender = checkNotNull(sender);\nthis.reason = checkNotNull(reason);", "url": "https://github.com/PGMDev/PGM/pull/180#discussion_r362649791", "createdAt": "2020-01-02T22:12:49Z", "author": {"login": "TheMolkaPL"}, "path": "src/main/java/tc/oc/pgm/events/PlayerReportEvent.java", "diffHunk": "@@ -0,0 +1,37 @@\n+package tc.oc.pgm.events;\n+\n+import org.bukkit.event.HandlerList;\n+import tc.oc.pgm.api.player.MatchPlayer;\n+import tc.oc.pgm.api.player.event.MatchPlayerEvent;\n+\n+/** Called immediately AFTER a player runs the report command. */\n+public class PlayerReportEvent extends MatchPlayerEvent {\n+\n+  private final MatchPlayer sender;\n+  private final String reason;\n+\n+  public PlayerReportEvent(MatchPlayer sender, MatchPlayer player, String reason) {\n+    super(player);\n+    this.sender = sender;\n+    this.reason = reason;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b4f4a3aed98bee19290cc539b8aff1445191421"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM3ODgzODc4", "url": "https://github.com/PGMDev/PGM/pull/180#pullrequestreview-337883878", "createdAt": "2020-01-02T22:13:38Z", "commit": {"oid": "9b4f4a3aed98bee19290cc539b8aff1445191421"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQyMjoxMzozOFrOFZ2Zxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQyMjoxMzozOFrOFZ2Zxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjY1MDA1NA==", "bodyText": "Before sending to players please log this in a logger.", "url": "https://github.com/PGMDev/PGM/pull/180#discussion_r362650054", "createdAt": "2020-01-02T22:13:38Z", "author": {"login": "TheMolkaPL"}, "path": "src/main/java/tc/oc/pgm/commands/ReportCommands.java", "diffHunk": "@@ -0,0 +1,51 @@\n+package tc.oc.pgm.commands;\n+\n+import app.ashcon.intake.Command;\n+import app.ashcon.intake.parametric.annotation.Text;\n+import net.md_5.bungee.api.ChatColor;\n+import org.bukkit.entity.Player;\n+import tc.oc.component.Component;\n+import tc.oc.component.types.PersonalizedText;\n+import tc.oc.named.NameStyle;\n+import tc.oc.pgm.api.Permissions;\n+import tc.oc.pgm.api.match.Match;\n+import tc.oc.pgm.api.player.MatchPlayer;\n+import tc.oc.pgm.events.PlayerReportEvent;\n+import tc.oc.util.components.Components;\n+\n+public class ReportCommands {\n+\n+  @Command(\n+      aliases = {\"report\"},\n+      usage = \"<player> <reason>\",\n+      desc = \"Report a player who is breaking the rules\")\n+  public static void report(MatchPlayer sender, Match match, Player player, @Text String reason) {\n+    MatchPlayer accused = match.getPlayer(player);\n+    match.callEvent(new PlayerReportEvent(sender, accused, reason));\n+\n+    final Component component =\n+        new PersonalizedText(\n+            Components.format(\n+                \"[\"\n+                    + ChatColor.GOLD\n+                    + \"R\"\n+                    + ChatColor.WHITE\n+                    + \"] \"\n+                    + ChatColor.DARK_AQUA\n+                    + \"{0}\"\n+                    + ChatColor.YELLOW\n+                    + \" \\u2794 \"\n+                    + ChatColor.DARK_AQUA\n+                    + \"{1}\"\n+                    + ChatColor.YELLOW\n+                    + \": \"\n+                    + \"{2}\",\n+                sender.getStyledName(NameStyle.FANCY),\n+                accused.getStyledName(NameStyle.FANCY),\n+                new PersonalizedText(reason.trim())));\n+\n+    match.getPlayers().stream()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b4f4a3aed98bee19290cc539b8aff1445191421"}, "originalPosition": 47}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4MTU1NTQ0", "url": "https://github.com/PGMDev/PGM/pull/180#pullrequestreview-338155544", "createdAt": "2020-01-03T16:17:20Z", "commit": {"oid": "9b4f4a3aed98bee19290cc539b8aff1445191421"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxNjoxNzoyMFrOFaDsjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxNjoyNToxOFrOFaD3kQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjg2Nzg1Mg==", "bodyText": "I think this would fit better as just ModerationCommands, for when other commands are added", "url": "https://github.com/PGMDev/PGM/pull/180#discussion_r362867852", "createdAt": "2020-01-03T16:17:20Z", "author": {"login": "Pablete1234"}, "path": "src/main/java/tc/oc/pgm/commands/ReportCommands.java", "diffHunk": "@@ -0,0 +1,51 @@\n+package tc.oc.pgm.commands;\n+\n+import app.ashcon.intake.Command;\n+import app.ashcon.intake.parametric.annotation.Text;\n+import net.md_5.bungee.api.ChatColor;\n+import org.bukkit.entity.Player;\n+import tc.oc.component.Component;\n+import tc.oc.component.types.PersonalizedText;\n+import tc.oc.named.NameStyle;\n+import tc.oc.pgm.api.Permissions;\n+import tc.oc.pgm.api.match.Match;\n+import tc.oc.pgm.api.player.MatchPlayer;\n+import tc.oc.pgm.events.PlayerReportEvent;\n+import tc.oc.util.components.Components;\n+\n+public class ReportCommands {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b4f4a3aed98bee19290cc539b8aff1445191421"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjg3MDY3Mw==", "bodyText": "I'm pretty sure this would be shorter if you used the text component stuff instead of string concat:\nnew PersonalizedComponent(\n  new PersonalizedComponent(\"[\"),\n  new PersonalizedComponent(\"A\", ChatColor.GOLD),\n  new PersonalizedComponent(\"] \"),\n  sender.getStyledName(NameStyle.FANCY),\n  new PersonalizedComponent(\" \\u2794 \", ChatColor.YELLOW),\n...", "url": "https://github.com/PGMDev/PGM/pull/180#discussion_r362870673", "createdAt": "2020-01-03T16:25:18Z", "author": {"login": "Pablete1234"}, "path": "src/main/java/tc/oc/pgm/commands/ReportCommands.java", "diffHunk": "@@ -0,0 +1,51 @@\n+package tc.oc.pgm.commands;\n+\n+import app.ashcon.intake.Command;\n+import app.ashcon.intake.parametric.annotation.Text;\n+import net.md_5.bungee.api.ChatColor;\n+import org.bukkit.entity.Player;\n+import tc.oc.component.Component;\n+import tc.oc.component.types.PersonalizedText;\n+import tc.oc.named.NameStyle;\n+import tc.oc.pgm.api.Permissions;\n+import tc.oc.pgm.api.match.Match;\n+import tc.oc.pgm.api.player.MatchPlayer;\n+import tc.oc.pgm.events.PlayerReportEvent;\n+import tc.oc.util.components.Components;\n+\n+public class ReportCommands {\n+\n+  @Command(\n+      aliases = {\"report\"},\n+      usage = \"<player> <reason>\",\n+      desc = \"Report a player who is breaking the rules\")\n+  public static void report(MatchPlayer sender, Match match, Player player, @Text String reason) {\n+    MatchPlayer accused = match.getPlayer(player);\n+    match.callEvent(new PlayerReportEvent(sender, accused, reason));\n+\n+    final Component component =\n+        new PersonalizedText(\n+            Components.format(\n+                \"[\"\n+                    + ChatColor.GOLD\n+                    + \"R\"\n+                    + ChatColor.WHITE\n+                    + \"] \"\n+                    + ChatColor.DARK_AQUA\n+                    + \"{0}\"\n+                    + ChatColor.YELLOW\n+                    + \" \\u2794 \"\n+                    + ChatColor.DARK_AQUA\n+                    + \"{1}\"\n+                    + ChatColor.YELLOW\n+                    + \": \"\n+                    + \"{2}\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b4f4a3aed98bee19290cc539b8aff1445191421"}, "originalPosition": 42}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9b4f4a3aed98bee19290cc539b8aff1445191421", "author": {"user": {"login": "Pugzy", "name": "Andrew"}}, "url": "https://github.com/PGMDev/PGM/commit/9b4f4a3aed98bee19290cc539b8aff1445191421", "committedDate": "2020-01-02T21:59:38Z", "message": "Add basic report command with alert and event\n\nSigned-off-by: Pugzy <pugzy@mail.com>"}, "afterCommit": {"oid": "492452deb0ec464714b77600147038f416448b3a", "author": {"user": {"login": "Pugzy", "name": "Andrew"}}, "url": "https://github.com/PGMDev/PGM/commit/492452deb0ec464714b77600147038f416448b3a", "committedDate": "2020-01-04T20:03:24Z", "message": "Add basic report command with alert and event\n\nSigned-off-by: Pugzy <pugzy@mail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4MzY4Njk4", "url": "https://github.com/PGMDev/PGM/pull/180#pullrequestreview-338368698", "createdAt": "2020-01-04T20:23:03Z", "commit": {"oid": "492452deb0ec464714b77600147038f416448b3a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNFQyMDoyMzowM1rOFaPBXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNFQyMDoyMzowM1rOFaPBXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzA1MzQwNQ==", "bodyText": "It would be cleaner with\nif (event.isCancelled()) return;", "url": "https://github.com/PGMDev/PGM/pull/180#discussion_r363053405", "createdAt": "2020-01-04T20:23:03Z", "author": {"login": "TheMolkaPL"}, "path": "src/main/java/tc/oc/pgm/commands/ModerationCommands.java", "diffHunk": "@@ -0,0 +1,55 @@\n+package tc.oc.pgm.commands;\n+\n+import app.ashcon.intake.Command;\n+import app.ashcon.intake.parametric.annotation.Text;\n+import net.md_5.bungee.api.ChatColor;\n+import org.bukkit.Bukkit;\n+import org.bukkit.entity.Player;\n+import tc.oc.component.Component;\n+import tc.oc.component.types.PersonalizedText;\n+import tc.oc.component.types.PersonalizedTranslatable;\n+import tc.oc.named.NameStyle;\n+import tc.oc.pgm.api.Permissions;\n+import tc.oc.pgm.api.chat.Audience;\n+import tc.oc.pgm.api.match.Match;\n+import tc.oc.pgm.api.player.MatchPlayer;\n+import tc.oc.pgm.events.PlayerReportEvent;\n+\n+public class ModerationCommands {\n+\n+  @Command(\n+      aliases = {\"report\"},\n+      usage = \"<player> <reason>\",\n+      desc = \"Report a player who is breaking the rules\")\n+  public static void report(MatchPlayer sender, Match match, Player player, @Text String reason) {\n+    MatchPlayer accused = match.getPlayer(player);\n+    PlayerReportEvent event = new PlayerReportEvent(sender, accused, reason);\n+    match.callEvent(event);\n+\n+    if (!event.isCancelled()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "492452deb0ec464714b77600147038f416448b3a"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3db0124601ee75285f5ea55966065745a14d844", "author": {"user": {"login": "Pugzy", "name": "Andrew"}}, "url": "https://github.com/PGMDev/PGM/commit/a3db0124601ee75285f5ea55966065745a14d844", "committedDate": "2020-01-04T21:50:33Z", "message": "Add basic report command with alert and event\n\nSigned-off-by: Pugzy <pugzy@mail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "492452deb0ec464714b77600147038f416448b3a", "author": {"user": {"login": "Pugzy", "name": "Andrew"}}, "url": "https://github.com/PGMDev/PGM/commit/492452deb0ec464714b77600147038f416448b3a", "committedDate": "2020-01-04T20:03:24Z", "message": "Add basic report command with alert and event\n\nSigned-off-by: Pugzy <pugzy@mail.com>"}, "afterCommit": {"oid": "a3db0124601ee75285f5ea55966065745a14d844", "author": {"user": {"login": "Pugzy", "name": "Andrew"}}, "url": "https://github.com/PGMDev/PGM/commit/a3db0124601ee75285f5ea55966065745a14d844", "committedDate": "2020-01-04T21:50:33Z", "message": "Add basic report command with alert and event\n\nSigned-off-by: Pugzy <pugzy@mail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4MzcxNjE4", "url": "https://github.com/PGMDev/PGM/pull/180#pullrequestreview-338371618", "createdAt": "2020-01-04T21:52:29Z", "commit": {"oid": "a3db0124601ee75285f5ea55966065745a14d844"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4MzcxOTM5", "url": "https://github.com/PGMDev/PGM/pull/180#pullrequestreview-338371939", "createdAt": "2020-01-04T22:03:43Z", "commit": {"oid": "a3db0124601ee75285f5ea55966065745a14d844"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNFQyMjowMzo0M1rOFaPRYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNFQyMjowMzo0M1rOFaPRYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzA1NzUwNQ==", "bodyText": "What will happen if the player is in another match? i don't think the Match should be a parameter for this command, you should make use of the MatchManager to get the MatchPlayer", "url": "https://github.com/PGMDev/PGM/pull/180#discussion_r363057505", "createdAt": "2020-01-04T22:03:43Z", "author": {"login": "Pablete1234"}, "path": "src/main/java/tc/oc/pgm/commands/ModerationCommands.java", "diffHunk": "@@ -0,0 +1,70 @@\n+package tc.oc.pgm.commands;\n+\n+import app.ashcon.intake.Command;\n+import app.ashcon.intake.parametric.annotation.Text;\n+import net.md_5.bungee.api.ChatColor;\n+import org.bukkit.Bukkit;\n+import org.bukkit.command.CommandSender;\n+import org.bukkit.entity.Player;\n+import tc.oc.component.Component;\n+import tc.oc.component.types.PersonalizedText;\n+import tc.oc.component.types.PersonalizedTranslatable;\n+import tc.oc.named.NameStyle;\n+import tc.oc.pgm.api.Permissions;\n+import tc.oc.pgm.api.chat.Audience;\n+import tc.oc.pgm.api.match.Match;\n+import tc.oc.pgm.api.player.MatchPlayer;\n+import tc.oc.pgm.events.PlayerReportEvent;\n+\n+public class ModerationCommands {\n+\n+  @Command(\n+      aliases = {\"report\"},\n+      usage = \"<player> <reason>\",\n+      desc = \"Report a player who is breaking the rules\")\n+  public static void report(\n+      CommandSender commandSender,\n+      MatchPlayer matchPlayer,\n+      Match match,\n+      Player player,\n+      @Text String reason) {\n+    MatchPlayer accused = match.getPlayer(player);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a3db0124601ee75285f5ea55966065745a14d844"}, "originalPosition": 31}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4MzcyMjkx", "url": "https://github.com/PGMDev/PGM/pull/180#pullrequestreview-338372291", "createdAt": "2020-01-04T22:15:24Z", "commit": {"oid": "a3db0124601ee75285f5ea55966065745a14d844"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNFQyMjoxNToyNFrOFaPTIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNFQyMjoxNjoyNVrOFaPTSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzA1Nzk1NQ==", "bodyText": "I think the report should be scoped to the Match. The issue here is you need to check that accused != null", "url": "https://github.com/PGMDev/PGM/pull/180#discussion_r363057955", "createdAt": "2020-01-04T22:15:24Z", "author": {"login": "Electroid"}, "path": "src/main/java/tc/oc/pgm/commands/ModerationCommands.java", "diffHunk": "@@ -0,0 +1,70 @@\n+package tc.oc.pgm.commands;\n+\n+import app.ashcon.intake.Command;\n+import app.ashcon.intake.parametric.annotation.Text;\n+import net.md_5.bungee.api.ChatColor;\n+import org.bukkit.Bukkit;\n+import org.bukkit.command.CommandSender;\n+import org.bukkit.entity.Player;\n+import tc.oc.component.Component;\n+import tc.oc.component.types.PersonalizedText;\n+import tc.oc.component.types.PersonalizedTranslatable;\n+import tc.oc.named.NameStyle;\n+import tc.oc.pgm.api.Permissions;\n+import tc.oc.pgm.api.chat.Audience;\n+import tc.oc.pgm.api.match.Match;\n+import tc.oc.pgm.api.player.MatchPlayer;\n+import tc.oc.pgm.events.PlayerReportEvent;\n+\n+public class ModerationCommands {\n+\n+  @Command(\n+      aliases = {\"report\"},\n+      usage = \"<player> <reason>\",\n+      desc = \"Report a player who is breaking the rules\")\n+  public static void report(\n+      CommandSender commandSender,\n+      MatchPlayer matchPlayer,\n+      Match match,\n+      Player player,\n+      @Text String reason) {\n+    MatchPlayer accused = match.getPlayer(player);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzA1NzUwNQ=="}, "originalCommit": {"oid": "a3db0124601ee75285f5ea55966065745a14d844"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzA1Nzk3OQ==", "bodyText": "matchPlayer.sendMessage", "url": "https://github.com/PGMDev/PGM/pull/180#discussion_r363057979", "createdAt": "2020-01-04T22:16:10Z", "author": {"login": "Electroid"}, "path": "src/main/java/tc/oc/pgm/commands/ModerationCommands.java", "diffHunk": "@@ -0,0 +1,70 @@\n+package tc.oc.pgm.commands;\n+\n+import app.ashcon.intake.Command;\n+import app.ashcon.intake.parametric.annotation.Text;\n+import net.md_5.bungee.api.ChatColor;\n+import org.bukkit.Bukkit;\n+import org.bukkit.command.CommandSender;\n+import org.bukkit.entity.Player;\n+import tc.oc.component.Component;\n+import tc.oc.component.types.PersonalizedText;\n+import tc.oc.component.types.PersonalizedTranslatable;\n+import tc.oc.named.NameStyle;\n+import tc.oc.pgm.api.Permissions;\n+import tc.oc.pgm.api.chat.Audience;\n+import tc.oc.pgm.api.match.Match;\n+import tc.oc.pgm.api.player.MatchPlayer;\n+import tc.oc.pgm.events.PlayerReportEvent;\n+\n+public class ModerationCommands {\n+\n+  @Command(\n+      aliases = {\"report\"},\n+      usage = \"<player> <reason>\",\n+      desc = \"Report a player who is breaking the rules\")\n+  public static void report(\n+      CommandSender commandSender,\n+      MatchPlayer matchPlayer,\n+      Match match,\n+      Player player,\n+      @Text String reason) {\n+    MatchPlayer accused = match.getPlayer(player);\n+    PlayerReportEvent event = new PlayerReportEvent(commandSender, accused, reason);\n+    match.callEvent(event);\n+\n+    if (event.isCancelled()) {\n+      if (event.getCancelMessage() != null) {\n+        commandSender.sendMessage(event.getCancelMessage());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a3db0124601ee75285f5ea55966065745a14d844"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzA1Nzk5Mg==", "bodyText": "matchPlayer.sendMessage", "url": "https://github.com/PGMDev/PGM/pull/180#discussion_r363057992", "createdAt": "2020-01-04T22:16:25Z", "author": {"login": "Electroid"}, "path": "src/main/java/tc/oc/pgm/commands/ModerationCommands.java", "diffHunk": "@@ -0,0 +1,70 @@\n+package tc.oc.pgm.commands;\n+\n+import app.ashcon.intake.Command;\n+import app.ashcon.intake.parametric.annotation.Text;\n+import net.md_5.bungee.api.ChatColor;\n+import org.bukkit.Bukkit;\n+import org.bukkit.command.CommandSender;\n+import org.bukkit.entity.Player;\n+import tc.oc.component.Component;\n+import tc.oc.component.types.PersonalizedText;\n+import tc.oc.component.types.PersonalizedTranslatable;\n+import tc.oc.named.NameStyle;\n+import tc.oc.pgm.api.Permissions;\n+import tc.oc.pgm.api.chat.Audience;\n+import tc.oc.pgm.api.match.Match;\n+import tc.oc.pgm.api.player.MatchPlayer;\n+import tc.oc.pgm.events.PlayerReportEvent;\n+\n+public class ModerationCommands {\n+\n+  @Command(\n+      aliases = {\"report\"},\n+      usage = \"<player> <reason>\",\n+      desc = \"Report a player who is breaking the rules\")\n+  public static void report(\n+      CommandSender commandSender,\n+      MatchPlayer matchPlayer,\n+      Match match,\n+      Player player,\n+      @Text String reason) {\n+    MatchPlayer accused = match.getPlayer(player);\n+    PlayerReportEvent event = new PlayerReportEvent(commandSender, accused, reason);\n+    match.callEvent(event);\n+\n+    if (event.isCancelled()) {\n+      if (event.getCancelMessage() != null) {\n+        commandSender.sendMessage(event.getCancelMessage());\n+      }\n+      return;\n+    }\n+\n+    commandSender.sendMessage(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a3db0124601ee75285f5ea55966065745a14d844"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4Mzk1NzMx", "url": "https://github.com/PGMDev/PGM/pull/180#pullrequestreview-338395731", "createdAt": "2020-01-05T11:49:25Z", "commit": {"oid": "a3db0124601ee75285f5ea55966065745a14d844"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de5b33cab891ad07287fc6497d4eb81aeceda517", "author": {"user": {"login": "Electroid", "name": "Ashcon Partovi"}}, "url": "https://github.com/PGMDev/PGM/commit/de5b33cab891ad07287fc6497d4eb81aeceda517", "committedDate": "2020-01-05T11:49:39Z", "message": "Merge branch 'master' into report-command"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 605, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}