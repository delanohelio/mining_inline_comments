{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0MTExOTI5", "number": 536, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQxNjoyMzozMVrOEFVRoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNTo0NjozNVrOEFl_cA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MDI2OTEzOnYy", "diffSide": "LEFT", "path": "core/src/main/java/tc/oc/pgm/teams/Team.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQxNjoyMzozMVrOGjeDzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQxNjoyMzozMVrOGjeDzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTg0NTgzOA==", "bodyText": "We should be caching the Componet name. Instead, listen to the team rename event and change it.", "url": "https://github.com/PGMDev/PGM/pull/536#discussion_r439845838", "createdAt": "2020-06-14T16:23:31Z", "author": {"login": "Electroid"}, "path": "core/src/main/java/tc/oc/pgm/teams/Team.java", "diffHunk": "@@ -37,8 +37,6 @@\n   private TeamMatchModule tmm;\n   private JoinMatchModule jmm;\n   protected @Nullable String name = null;\n-  protected @Nullable Component componentName;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ef9d118e2f18b2b064cfc6447da770ea28844eb"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MDMzMTM3OnYy", "diffSide": "RIGHT", "path": "util/src/main/java/tc/oc/pgm/util/text/types/PlayerComponent.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQxODowMzo0OFrOGjejig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQxODowNzoxM1rOGjeknQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTg1Mzk2Mg==", "bodyText": "I think we need to clean up this code. Maybe separate methods for each NameStyle?", "url": "https://github.com/PGMDev/PGM/pull/536#discussion_r439853962", "createdAt": "2020-06-14T18:03:48Z", "author": {"login": "Electroid"}, "path": "util/src/main/java/tc/oc/pgm/util/text/types/PlayerComponent.java", "diffHunk": "@@ -38,32 +38,49 @@ static Component of(@Nullable Player player, String defName, NameStyle style) {\n       return component.build();\n     }\n \n-    Component usernameComponent;\n+    // For name styles that don't allow vanished, make vanished appear offline\n+    if (!style.showVanish && isVanished(player)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ef9d118e2f18b2b064cfc6447da770ea28844eb"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTg1NDIzNw==", "bodyText": "I agree, with the previous refactor I tried to keep it similar to the old PersonalizedPlayer class, but imo would be better to separate into different methods as you suggested \ud83d\udc4d\nI\u2019ll take care of this in a bit.", "url": "https://github.com/PGMDev/PGM/pull/536#discussion_r439854237", "createdAt": "2020-06-14T18:07:13Z", "author": {"login": "applenick"}, "path": "util/src/main/java/tc/oc/pgm/util/text/types/PlayerComponent.java", "diffHunk": "@@ -38,32 +38,49 @@ static Component of(@Nullable Player player, String defName, NameStyle style) {\n       return component.build();\n     }\n \n-    Component usernameComponent;\n+    // For name styles that don't allow vanished, make vanished appear offline\n+    if (!style.showVanish && isVanished(player)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTg1Mzk2Mg=="}, "originalCommit": {"oid": "1ef9d118e2f18b2b064cfc6447da770ea28844eb"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MjI5MTk0OnYy", "diffSide": "RIGHT", "path": "util/src/main/java/tc/oc/pgm/util/text/types/PlayerComponent.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMjo1OToxNFrOGjxDdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQyMjoxMzo1NFrOGkEizA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDE1NzA0Ng==", "bodyText": "Make all of these functions return Component.Builder to avoid copying Components among the methods. In PlayerComponent.of you can build it before returning it.", "url": "https://github.com/PGMDev/PGM/pull/536#discussion_r440157046", "createdAt": "2020-06-15T12:59:14Z", "author": {"login": "Electroid"}, "path": "util/src/main/java/tc/oc/pgm/util/text/types/PlayerComponent.java", "diffHunk": "@@ -81,6 +68,109 @@ static Component of(CommandSender sender, NameStyle style) {\n         : TranslatableComponent.of(\"misc.console\", TextColor.DARK_AQUA);\n   }\n \n+  // What an offline or vanished username renders as\n+  static Component formatOffline(String name, boolean plain) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ca682c2f2cc629d2149daf25515e42f97173c48"}, "originalPosition": 82}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM4NzEyMg==", "bodyText": "Ah better idea! I\u2019ll fix this up \ud83d\udc4d", "url": "https://github.com/PGMDev/PGM/pull/536#discussion_r440387122", "createdAt": "2020-06-15T19:07:53Z", "author": {"login": "applenick"}, "path": "util/src/main/java/tc/oc/pgm/util/text/types/PlayerComponent.java", "diffHunk": "@@ -81,6 +68,109 @@ static Component of(CommandSender sender, NameStyle style) {\n         : TranslatableComponent.of(\"misc.console\", TextColor.DARK_AQUA);\n   }\n \n+  // What an offline or vanished username renders as\n+  static Component formatOffline(String name, boolean plain) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDE1NzA0Ng=="}, "originalCommit": {"oid": "0ca682c2f2cc629d2149daf25515e42f97173c48"}, "originalPosition": 82}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ3NjM2NA==", "bodyText": "I believe you meant TextComponent.Builder, but it\u2019s all cleaned up now \ud83d\udc4d", "url": "https://github.com/PGMDev/PGM/pull/536#discussion_r440476364", "createdAt": "2020-06-15T22:13:54Z", "author": {"login": "applenick"}, "path": "util/src/main/java/tc/oc/pgm/util/text/types/PlayerComponent.java", "diffHunk": "@@ -81,6 +68,109 @@ static Component of(CommandSender sender, NameStyle style) {\n         : TranslatableComponent.of(\"misc.console\", TextColor.DARK_AQUA);\n   }\n \n+  // What an offline or vanished username renders as\n+  static Component formatOffline(String name, boolean plain) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDE1NzA0Ng=="}, "originalCommit": {"oid": "0ca682c2f2cc629d2149daf25515e42f97173c48"}, "originalPosition": 82}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MzAwNzg0OnYy", "diffSide": "LEFT", "path": "util/src/main/java/tc/oc/pgm/util/named/NameStyle.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNTo0NjozNVrOGj4F-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNTo0NjozNVrOGj4F-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDI3MjM3Nw==", "bodyText": "Why remove this?", "url": "https://github.com/PGMDev/PGM/pull/536#discussion_r440272377", "createdAt": "2020-06-15T15:46:35Z", "author": {"login": "KingOfSquares"}, "path": "util/src/main/java/tc/oc/pgm/util/named/NameStyle.java", "diffHunk": "@@ -5,43 +5,27 @@\n  * only by context, and is independent of the viewer.\n  */\n public enum NameStyle {\n-  PLAIN(false, false, false, false, false, false, false, false, false), // No formatting\n-  COLOR(true, false, false, false, false, false, false, true, false), // Color only\n-  FANCY(\n-      true, true, true, true, true, false, false, true,\n-      false), // Color, flair, friend status, nick status, vanish status\n-  TAB(\n-      true, true, true, true, true, false, true, true,\n-      true), // Color, flair, friend status, nick status, death status, and vanish status\n-  VERBOSE(true, true, true, true, true, true, false, true, true), // Fancy plus nickname\n-  CONCISE(true, true, true, true, true, true, false, false, true); // Verbose, but removes teleport\n+  PLAIN(false, false, false, false, false), // No formatting\n+  COLOR(true, false, false, true, false), // Color and teleport\n+  FANCY(true, true, false, true, false), // Color, flair, and teleport\n+  TAB(true, true, true, false, true), // Color, flair, death status, and vanish\n+  VERBOSE(true, true, false, true, true), // Color, flair, teleport, and vanish\n+  CONCISE(true, true, false, false, true); // Color, flair, and vanish\n \n   public final boolean isColor;\n   public final boolean showPrefix;\n-  public final boolean showSelf; // Bold if self", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ca682c2f2cc629d2149daf25515e42f97173c48"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 999, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}