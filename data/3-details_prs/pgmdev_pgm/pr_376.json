{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzODMxNDY0", "number": 376, "title": "Small fixes for match stats", "bodyText": "Fix list as of last commit:\n-Fix formatting so KD includes up to two decimals.\n-Change \"stats.best\" into \"Top stats this match\"\n-Fix an issue with offline players having the best results resulting in an error for invalid UUIDs\n-Cover for NPE when match is ended without any playerstats\nSigned-off-by: KingOfSquares simonmorland@gmail.com", "createdAt": "2020-03-25T21:14:47Z", "url": "https://github.com/PGMDev/PGM/pull/376", "merged": true, "mergeCommit": {"oid": "50a064d655a8d2762fad25faf9d06104611f881a"}, "closed": true, "closedAt": "2020-04-10T14:36:33Z", "author": {"login": "KingOfSquares"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRaF7UABqjMxNjc3NDgxNzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcWSEnegFqTM5MTQ3NTM3NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8834071438a9894f49edc9433414adf4bac17b7a", "author": {"user": {"login": "KingOfSquares", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/8834071438a9894f49edc9433414adf4bac17b7a", "committedDate": "2020-03-26T11:04:34Z", "message": "Fixes bug with displaying offline players.\n\nSigned-off-by: KingOfSquares <simonmorland@gmail.com>"}, "afterCommit": {"oid": "1258a79e7efa0a10a67f1e5ca32399ff1de7c873", "author": {"user": {"login": "KingOfSquares", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/1258a79e7efa0a10a67f1e5ca32399ff1de7c873", "committedDate": "2020-03-26T11:06:34Z", "message": "Fixes bug with displaying offline players.\n\nSigned-off-by: KingOfSquares <simonmorland@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1258a79e7efa0a10a67f1e5ca32399ff1de7c873", "author": {"user": {"login": "KingOfSquares", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/1258a79e7efa0a10a67f1e5ca32399ff1de7c873", "committedDate": "2020-03-26T11:06:34Z", "message": "Fixes bug with displaying offline players.\n\nSigned-off-by: KingOfSquares <simonmorland@gmail.com>"}, "afterCommit": {"oid": "f0085cfea6a7c48f3fac4b88e9d3a5b55a6e9b8e", "author": {"user": {"login": "KingOfSquares", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/f0085cfea6a7c48f3fac4b88e9d3a5b55a6e9b8e", "committedDate": "2020-03-26T19:28:43Z", "message": "Fixes bug with displaying offline players.\n\nSigned-off-by: KingOfSquares <simonmorland@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyOTMzMjA2", "url": "https://github.com/PGMDev/PGM/pull/376#pullrequestreview-382933206", "createdAt": "2020-03-27T14:55:52Z", "commit": {"oid": "f0085cfea6a7c48f3fac4b88e9d3a5b55a6e9b8e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNDo1NTo1MlrOF8016A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNDo1NTo1MlrOF8016A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTMyNDY0OA==", "bodyText": "Do you have these two methods mixed up? You're adding to cached on leave and removing on join?", "url": "https://github.com/PGMDev/PGM/pull/376#discussion_r399324648", "createdAt": "2020-03-27T14:55:52Z", "author": {"login": "Electroid"}, "path": "core/src/main/java/tc/oc/pgm/modules/StatsMatchModule.java", "diffHunk": "@@ -167,6 +173,19 @@ public void onMatchEnd(MatchFinishEvent event) {\n     }\n   }\n \n+  @EventHandler\n+  public void onPlayerLeave(PlayerQuitEvent event) {\n+    Player player = event.getPlayer();\n+    if (allPlayerStats.containsKey(player.getUniqueId()))\n+      cachedPlayers.put(player.getUniqueId(), player);\n+  }\n+\n+  @EventHandler\n+  public void onPlayerJoin(PlayerJoinEvent event) {\n+    UUID playerUUID = event.getPlayer().getUniqueId();\n+    cachedPlayers.remove(playerUUID);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f0085cfea6a7c48f3fac4b88e9d3a5b55a6e9b8e"}, "originalPosition": 45}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "077ba8ecb1a9f78041f9c623465d5090fac8518c", "author": {"user": {"login": "KingOfSquares", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/077ba8ecb1a9f78041f9c623465d5090fac8518c", "committedDate": "2020-03-28T00:00:37Z", "message": "Delay EOM message, bolden numbers.\n\nSigned-off-by: KingOfSquares <simonmorland@gmail.com>"}, "afterCommit": {"oid": "dfa11347743d75e4d769a6ae244fa2d041b086a5", "author": {"user": {"login": "KingOfSquares", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/dfa11347743d75e4d769a6ae244fa2d041b086a5", "committedDate": "2020-03-28T00:01:39Z", "message": "Delay EOM message, bolden numbers.\n\nSigned-off-by: KingOfSquares <simonmorland@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a1288d07b5296203a0e8a0760dd5a840e1924a68", "author": {"user": {"login": "KingOfSquares", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/a1288d07b5296203a0e8a0760dd5a840e1924a68", "committedDate": "2020-04-01T07:45:22Z", "message": "Merge branch 'master' into smallStatFix"}, "afterCommit": {"oid": "a6dad53d642b42570212da5f86791671db8df52e", "author": {"user": {"login": "KingOfSquares", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/a6dad53d642b42570212da5f86791671db8df52e", "committedDate": "2020-04-01T13:42:20Z", "message": "Persist usernames instead of UUID, fix a NPE.\n\nSigned-off-by: KingOfSquares <simonmorland@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a6dad53d642b42570212da5f86791671db8df52e", "author": {"user": {"login": "KingOfSquares", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/a6dad53d642b42570212da5f86791671db8df52e", "committedDate": "2020-04-01T13:42:20Z", "message": "Persist usernames instead of UUID, fix a NPE.\n\nSigned-off-by: KingOfSquares <simonmorland@gmail.com>"}, "afterCommit": {"oid": "f3cc63bccf81cfd7ecc36baf27f14eabbf2ca59f", "author": {"user": {"login": "KingOfSquares", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/f3cc63bccf81cfd7ecc36baf27f14eabbf2ca59f", "committedDate": "2020-04-07T19:01:49Z", "message": "Persist usernames instead of UUID, fix a NPE.\n\nSigned-off-by: KingOfSquares <simonmorland@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b73476fa95cd143b15b3b25a476759dce5f0b53", "author": {"user": {"login": "KingOfSquares", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/4b73476fa95cd143b15b3b25a476759dce5f0b53", "committedDate": "2020-04-08T18:09:08Z", "message": "Display KD correctly, changed phrasing for \"stats.best\".\n\nSigned-off-by: KingOfSquares <simonmorland@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e39edfa0a4160218d463ba5dc4efd80804284c4a", "author": {"user": {"login": "KingOfSquares", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/e39edfa0a4160218d463ba5dc4efd80804284c4a", "committedDate": "2020-04-08T18:09:08Z", "message": "Fixes bug with displaying offline players.\n\nSigned-off-by: KingOfSquares <simonmorland@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce0bfdb0fe38ed4ab536c7a213745cd7d4e2efa0", "author": {"user": {"login": "KingOfSquares", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/ce0bfdb0fe38ed4ab536c7a213745cd7d4e2efa0", "committedDate": "2020-04-08T18:09:08Z", "message": "Delay EOM message, bolden numbers.\n\nSigned-off-by: KingOfSquares <simonmorland@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b427f276d5badf68a004a5ba9da60a613a45cbf3", "author": {"user": {"login": "KingOfSquares", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/b427f276d5badf68a004a5ba9da60a613a45cbf3", "committedDate": "2020-04-08T18:09:08Z", "message": "Persist usernames instead of UUID, fix a NPE.\n\nSigned-off-by: KingOfSquares <simonmorland@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8139d64058921f371277f0976a8e032ac31e611", "author": {"user": {"login": "KingOfSquares", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/d8139d64058921f371277f0976a8e032ac31e611", "committedDate": "2020-04-08T18:09:08Z", "message": "fix KD bug when deaths were 0\n\nSigned-off-by: KingOfSquares <simonmorland@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "834a89626bf456872445a7b2df7e12a9af51cb4c", "author": {"user": {"login": "KingOfSquares", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/834a89626bf456872445a7b2df7e12a9af51cb4c", "committedDate": "2020-04-08T18:07:01Z", "message": "fix KD bug when deaths were 0\n\nSigned-off-by: KingOfSquares <simonmorland@gmail.com>"}, "afterCommit": {"oid": "d8139d64058921f371277f0976a8e032ac31e611", "author": {"user": {"login": "KingOfSquares", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/d8139d64058921f371277f0976a8e032ac31e611", "committedDate": "2020-04-08T18:09:08Z", "message": "fix KD bug when deaths were 0\n\nSigned-off-by: KingOfSquares <simonmorland@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNDc1Mzc0", "url": "https://github.com/PGMDev/PGM/pull/376#pullrequestreview-391475374", "createdAt": "2020-04-10T14:35:45Z", "commit": {"oid": "d8139d64058921f371277f0976a8e032ac31e611"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 466, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}