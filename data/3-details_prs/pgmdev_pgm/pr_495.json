{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5MTk4NzI4", "number": 495, "title": "Hide vanished players from server ping and other fixes", "bodyText": "Hide vanished players from server ping\nThis is just a quick PR to address a few minor bugs \ud83d\udc1b\nFixes:\n\nHide vanished players from server ping\nDisallow /report being used on vanished players\nPossibly fix issue with vanished players being seen by observers\nFix a NPE with AntiGriefListener\nAdjust /setnext staff broadcast (Resolves #493)\n\nScreenshot:\n\nLet me know if there are any issues, but I did test all the changes and everything should be fine \ud83d\udc4d\nSigned-off-by: applenick applenick@users.noreply.github.com", "createdAt": "2020-05-18T00:21:11Z", "url": "https://github.com/PGMDev/PGM/pull/495", "merged": true, "mergeCommit": {"oid": "4abf30ef3238c56fa1a89ebe5d4ad2eb819aa1e2"}, "closed": true, "closedAt": "2020-05-19T05:55:58Z", "author": {"login": "applenick"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABciUeMHgH2gAyNDE5MTk4NzI4OjdjMTA2ZTliM2JlMTQ3YWFiZjkwOTA1YmY5MjU0NzQzOTZiODQ0ZGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABciuATIAFqTQxNDEyMTM0Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7c106e9b3be147aabf90905bf925474396b844dd", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/7c106e9b3be147aabf90905bf925474396b844dd", "committedDate": "2020-05-18T00:10:35Z", "message": "Hide vanished players from server ping\nAlong with:\n* Disallow /report being used on vanished players\n* Fix a NPE with AntiGriefListener\n* Adjust /setnext staff broadcast\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMjE1NTYy", "url": "https://github.com/PGMDev/PGM/pull/495#pullrequestreview-413215562", "createdAt": "2020-05-18T00:23:34Z", "commit": {"oid": "7c106e9b3be147aabf90905bf925474396b844dd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQwMDoyMzozNFrOGWkqsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQwMDoyMzozNFrOGWkqsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjMyMjYwOQ==", "bodyText": "Let me know if you want this translated. I was unsure since the matching text error comes from Intake, I did not believe it would matter since other languages most likely see the English warning no matter what.\nMaybe I should add a note in case we ever switch command frameworks?\nSee here for details.", "url": "https://github.com/PGMDev/PGM/pull/495#discussion_r426322609", "createdAt": "2020-05-18T00:23:34Z", "author": {"login": "applenick"}, "path": "core/src/main/java/tc/oc/pgm/community/commands/ReportCommands.java", "diffHunk": "@@ -84,6 +84,15 @@ public void report(MatchPlayer sender, Match match, Player player, @Text String\n     }\n \n     MatchPlayer accused = match.getPlayer(player);\n+\n+    // Don't allow reports of vanished players\n+    if (accused.isVanished()) {\n+      sender.sendWarning(\n+          TextComponent.of(\n+              \"Could not find player named '\" + player.getName() + \"'\", TextColor.RED));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c106e9b3be147aabf90905bf925474396b844dd"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a790d8bb259775e8e1080247374349b51cfa051", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/4a790d8bb259775e8e1080247374349b51cfa051", "committedDate": "2020-05-18T05:59:39Z", "message": "Add notice regarding intake message\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0MTIxMzQz", "url": "https://github.com/PGMDev/PGM/pull/495#pullrequestreview-414121343", "createdAt": "2020-05-19T05:55:28Z", "commit": {"oid": "4a790d8bb259775e8e1080247374349b51cfa051"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 508, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}