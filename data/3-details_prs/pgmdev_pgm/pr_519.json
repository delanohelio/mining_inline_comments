{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1NzkyOTAz", "number": 519, "title": "Custom map gamemode & text refactor", "bodyText": "Reintroduce custom map gamemode name\nIt was requested by @CrazyisCreeps to reintroduce the custom gamemode in the sidebar element. So maps can define <map game=\u201csomething\u201d> and the gamemode will display in the scoreboard sidebar.  However since I was already working on migrating a large portion of PGM to use the new text library, I decided it would be best to merge them together and put it out as a draft PR so I can start receiving feedback if any.\nIt\u2019s a larger PR, so may take a bit longer to review but to point out a few areas of interest. I\u2019m wondering if I made the right changes to PersonalizedPlayer. If that could be given some feedback, I\u2019d like to know how to improve upon that. Also I removed Named from the Party interface, I felt that there were a few areas where having the name style provided were redundant since no styling was taking place.\nI started this the other day before @KingOfSquares\u2019s PR was submitted, so some changes to the WoolMatchModule and similar in #511 may conflict Would probably be best to wait for his to be merged first, then I can go in and make adjustments accordingly.\nAnyway, I\u2019ll be working on this for a bit for the next few days or so. Feel free to leave any feedback as it\u2019s always appreciated \ud83d\ude04\nSigned-off-by: applenick applenick@users.noreply.github.com", "createdAt": "2020-06-01T06:57:08Z", "url": "https://github.com/PGMDev/PGM/pull/519", "merged": true, "mergeCommit": {"oid": "59235666b58a835bb3234d5ddc253550b092b563"}, "closed": true, "closedAt": "2020-06-06T19:33:41Z", "author": {"login": "applenick"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnBSQ7gFqTQyMTg5MjEyNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcosfUWgFqTQyNTc2MzUyOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxODkyMTI0", "url": "https://github.com/PGMDev/PGM/pull/519#pullrequestreview-421892124", "createdAt": "2020-06-01T14:31:02Z", "commit": {"oid": "c583211427b5b2473d55b79bcdd1f47e0c45fa0b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNDozMTowMlrOGdMpEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxNDozODoyNFrOGdM6bQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzI2OTAwOQ==", "bodyText": "getGamemode", "url": "https://github.com/PGMDev/PGM/pull/519#discussion_r433269009", "createdAt": "2020-06-01T14:31:02Z", "author": {"login": "Electroid"}, "path": "core/src/main/java/tc/oc/pgm/api/map/MapInfo.java", "diffHunk": "@@ -100,6 +100,13 @@ default String getStyledNameLegacy(MapNameStyle style, @Nullable CommandSender s\n    */\n   Collection<MapTag> getTags();\n \n+  /**\n+   * Get a {@link Component} that represents this map's gamemode name.\n+   *\n+   * @return A component of the gamemode name if defined or null.\n+   */\n+  Component getGamemodeName();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c583211427b5b2473d55b79bcdd1f47e0c45fa0b"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzI2OTQ1NA==", "bodyText": "It makes sense for Party to extend Named.\nMaybe Named needs a simple getName() method.", "url": "https://github.com/PGMDev/PGM/pull/519#discussion_r433269454", "createdAt": "2020-06-01T14:31:52Z", "author": {"login": "Electroid"}, "path": "core/src/main/java/tc/oc/pgm/api/party/Party.java", "diffHunk": "@@ -14,16 +15,14 @@\n import tc.oc.pgm.filters.query.Query;\n import tc.oc.pgm.match.ObservingParty;\n import tc.oc.pgm.util.chat.Audience;\n-import tc.oc.pgm.util.component.Component;\n-import tc.oc.pgm.util.named.Named;\n \n /**\n  * A group of related {@link MatchPlayer}s in a {@link Match}.\n  *\n  * @see Competitor for participating {@link MatchPlayer}s.\n  * @see ObservingParty for observing {@link MatchPlayer}s.\n  */\n-public interface Party extends Audience, Named {\n+public interface Party extends Audience {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c583211427b5b2473d55b79bcdd1f47e0c45fa0b"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzI2OTk4OA==", "bodyText": "Any args calls are unnescary, you can inline them all inside the of(...)", "url": "https://github.com/PGMDev/PGM/pull/519#discussion_r433269988", "createdAt": "2020-06-01T14:32:41Z", "author": {"login": "Electroid"}, "path": "core/src/main/java/tc/oc/pgm/command/ListCommand.java", "diffHunk": "@@ -5,96 +5,106 @@\n import java.util.List;\n import java.util.UUID;\n import java.util.stream.Collectors;\n-import net.md_5.bungee.api.ChatColor;\n+import net.kyori.text.Component;\n+import net.kyori.text.TextComponent;\n+import net.kyori.text.TranslatableComponent;\n+import net.kyori.text.format.TextColor;\n import org.bukkit.command.CommandSender;\n import tc.oc.pgm.api.PGM;\n import tc.oc.pgm.api.Permissions;\n import tc.oc.pgm.api.match.Match;\n import tc.oc.pgm.api.player.MatchPlayer;\n import tc.oc.pgm.teams.TeamMatchModule;\n-import tc.oc.pgm.util.component.Component;\n-import tc.oc.pgm.util.component.Components;\n-import tc.oc.pgm.util.component.types.PersonalizedText;\n-import tc.oc.pgm.util.component.types.PersonalizedTranslatable;\n+import tc.oc.pgm.util.chat.Audience;\n import tc.oc.pgm.util.named.NameStyle;\n+import tc.oc.pgm.util.text.TextFormatter;\n \n // TODO: clean up format and use new components\n public final class ListCommand {\n \n   @Command(\n       aliases = {\"list\", \"who\", \"online\", \"ls\"},\n       desc = \"View a list of online players\")\n-  public void list(CommandSender sender, Match match) {\n+  public void list(CommandSender sender, Audience viewer, Match match) {\n     TeamMatchModule tmm = match.getModule(TeamMatchModule.class);\n     if (tmm != null) {\n-      sender.sendMessage(\n-          new PersonalizedTranslatable(\"command.list.teams\")\n-              .getPersonalizedText()\n-              .color(ChatColor.GRAY));\n+      viewer.sendMessage(TranslatableComponent.of(\"command.list.teams\", TextColor.GRAY));\n       tmm.getTeams()\n           .forEach(\n               team ->\n                   sendTeamInfo(\n-                      sender, team.getComponentName(), team.getPlayers(), team.getMaxPlayers()));\n+                      viewer,\n+                      sender,\n+                      team.getComponentName(),\n+                      team.getPlayers(),\n+                      team.getMaxPlayers()));\n     } else {\n       sendTeamInfo(\n+          viewer,\n           sender,\n-          new PersonalizedTranslatable(\"command.list.participants\"),\n+          TranslatableComponent.of(\"command.list.participants\"),\n           match.getParticipants(),\n           match.getMaxPlayers());\n     }\n     // Observers\n     sendTeamInfo(\n+        viewer,\n         sender,\n         match.getDefaultParty().getComponentName(),\n         match.getDefaultParty().getPlayers(),\n         -1);\n \n     // Total count\n-    sender.sendMessage(\n-        new PersonalizedTranslatable(\n-                \"command.list.online\",\n-                new PersonalizedText(\n-                    Integer.toString(getSize(match.getPlayers(), false)), ChatColor.GREEN))\n-            .getPersonalizedText()\n-            .color(ChatColor.GRAY));\n+    viewer.sendMessage(\n+        TranslatableComponent.of(\"command.list.online\", TextColor.GRAY)\n+            .args(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c583211427b5b2473d55b79bcdd1f47e0c45fa0b"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzI3MDQ4NQ==", "bodyText": "Not sure where we define Party#getComponentName, but it should just be Party#getName", "url": "https://github.com/PGMDev/PGM/pull/519#discussion_r433270485", "createdAt": "2020-06-01T14:33:32Z", "author": {"login": "Electroid"}, "path": "core/src/main/java/tc/oc/pgm/command/TeamCommand.java", "diffHunk": "@@ -48,8 +48,8 @@ public void force(\n             \"join.ok.force\",\n             TextColor.GRAY,\n             joiner.getName(NameStyle.FANCY),\n-            joiner.getParty().getName(NameStyle.FANCY),\n-            oldParty.getName(NameStyle.FANCY)));\n+            joiner.getParty().getComponentName(),\n+            oldParty.getComponentName()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c583211427b5b2473d55b79bcdd1f47e0c45fa0b"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzI3MjQ4NQ==", "bodyText": "I think we should define a PlayerComponent interface, which contains static methods for building a player TextComponent.\nSo something like this:\ninterface PlayerComponent {\n  static TextComponent of(Player player);\n  static TextComponent of(UUID playerId); // could show \"Unknown\"\n  static TextComponent of(CommandSender sender);  // could show \"Console\" when null or console sender\n}", "url": "https://github.com/PGMDev/PGM/pull/519#discussion_r433272485", "createdAt": "2020-06-01T14:36:49Z", "author": {"login": "Electroid"}, "path": "core/src/main/java/tc/oc/pgm/db/UsernameImpl.java", "diffHunk": "@@ -36,11 +36,10 @@ public String getName() {\n   }\n \n   @Override\n-  public Component getStyledName(NameStyle style) {\n+  public Component getName(NameStyle style) {\n     return name == null\n-        ? new PersonalizedText(\n-            new PersonalizedTranslatable(\"misc.unknown\"), ChatColor.DARK_AQUA, ChatColor.ITALIC)\n-        : new PersonalizedPlayer(Bukkit.getPlayer(id), name, style);\n+        ? TranslatableComponent.of(\"misc.unknown\", TextColor.DARK_AQUA, TextDecoration.ITALIC)\n+        : new PersonalizedPlayer(Bukkit.getPlayer(id), name, style).render();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c583211427b5b2473d55b79bcdd1f47e0c45fa0b"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzI3MjgyOQ==", "bodyText": "gamemode", "url": "https://github.com/PGMDev/PGM/pull/519#discussion_r433272829", "createdAt": "2020-06-01T14:37:24Z", "author": {"login": "Electroid"}, "path": "core/src/main/java/tc/oc/pgm/map/MapInfoImpl.java", "diffHunk": "@@ -70,6 +72,7 @@ public MapInfoImpl(\n     this.tags = tags == null ? new TreeSet<>() : tags;\n     this.players = players == null ? new LinkedList<>() : players;\n     this.world = world == null ? new WorldInfoImpl() : world;\n+    this.gamemodeName = gamemodeName == null ? TextComponent.empty() : gamemodeName;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c583211427b5b2473d55b79bcdd1f47e0c45fa0b"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzI3MzQ1Mw==", "bodyText": "Do we need to use TextTranslations here? This won't translate the gamemodes, as-is.", "url": "https://github.com/PGMDev/PGM/pull/519#discussion_r433273453", "createdAt": "2020-06-01T14:38:24Z", "author": {"login": "Electroid"}, "path": "core/src/main/java/tc/oc/pgm/scoreboard/SidebarMatchModule.java", "diffHunk": "@@ -90,9 +90,15 @@ public SidebarMatchModule createMatchModule(Match match) throws ModuleLoadExcept\n \n   protected @Nullable Future<?> renderTask;\n \n-  private static String renderSidebarTitle(Collection<MapTag> tags) {\n+  private static String renderSidebarTitle(\n+      Collection<MapTag> tags, @Nullable Component gamemodeName) {\n     final Component configTitle = PGM.get().getConfiguration().getMatchHeader();\n-    if (configTitle != null) return LegacyComponentSerializer.legacy().serialize(configTitle);\n+    if (configTitle != null)\n+      return LegacyComponentSerializer.legacy().serialize(configTitle.color(TextColor.AQUA));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c583211427b5b2473d55b79bcdd1f47e0c45fa0b"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMTUyNjAz", "url": "https://github.com/PGMDev/PGM/pull/519#pullrequestreview-423152603", "createdAt": "2020-06-03T01:02:19Z", "commit": {"oid": "383d385a991d0f87375c0284415c31fe13d9a645"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwMTowMjoxOVrOGeIwVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwMTowMzoyMVrOGeIxTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI1MzkxMA==", "bodyText": "Do we need these methods? Can we just use getName ?", "url": "https://github.com/PGMDev/PGM/pull/519#discussion_r434253910", "createdAt": "2020-06-03T01:02:19Z", "author": {"login": "Electroid"}, "path": "core/src/main/java/tc/oc/pgm/api/party/Party.java", "diffHunk": "@@ -68,20 +69,20 @@\n    * @see PartyRenameEvent\n    * @return The current name of the {@link Party}.\n    */\n-  String getName();\n+  String getDisplayName();\n \n   /**\n    * Get the current name of the {@link Party} from the perspective of a {@link CommandSender}.\n    *\n    * @param viewer The viewer.\n    * @return The name of the {@link Party}, relative to the viewer.\n    */\n-  String getName(@Nullable CommandSender viewer);\n+  String getDisplayName(@Nullable CommandSender viewer);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "383d385a991d0f87375c0284415c31fe13d9a645"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI1NDA3Ng==", "bodyText": "Don't need to refine these, maybe the default should be in Named?", "url": "https://github.com/PGMDev/PGM/pull/519#discussion_r434254076", "createdAt": "2020-06-03T01:03:02Z", "author": {"login": "Electroid"}, "path": "core/src/main/java/tc/oc/pgm/api/party/Party.java", "diffHunk": "@@ -116,15 +117,21 @@ default String getColoredName() {\n    * @return The colored {@link Party} name.\n    */\n   default String getColoredName(@Nullable CommandSender viewer) {\n-    return getColor() + getName(viewer);\n+    return getColor() + getDisplayName(viewer);\n   }\n \n   /**\n    * Get the current name of the {@link Party} as a {@link Component} with colors.\n    *\n    * @return The current {@link Party} name.\n    */\n-  Component getComponentName();\n+  @Override\n+  Component getName();\n+\n+  @Override\n+  default Component getName(NameStyle style) {\n+    return getName();\n+  }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "383d385a991d0f87375c0284415c31fe13d9a645"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI1NDE1Nw==", "bodyText": "Why change this and Contributor?", "url": "https://github.com/PGMDev/PGM/pull/519#discussion_r434254157", "createdAt": "2020-06-03T01:03:21Z", "author": {"login": "Electroid"}, "path": "core/src/main/java/tc/oc/pgm/api/player/Username.java", "diffHunk": "@@ -20,7 +20,7 @@\n    * @return The username.\n    */\n   @Nullable\n-  String getName();\n+  String getUsername();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "383d385a991d0f87375c0284415c31fe13d9a645"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzOTMyMDIz", "url": "https://github.com/PGMDev/PGM/pull/519#pullrequestreview-423932023", "createdAt": "2020-06-03T20:59:12Z", "commit": {"oid": "7519c73e0b61bacf442f4014421b24356a1ecc76"}, "state": "DISMISSED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QyMDo1OToxMlrOGetJHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QyMTowMzozNFrOGetXEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDg1MDA3OQ==", "bodyText": "This method doesn't belong here.", "url": "https://github.com/PGMDev/PGM/pull/519#discussion_r434850079", "createdAt": "2020-06-03T20:59:12Z", "author": {"login": "Electroid"}, "path": "util/src/main/java/tc/oc/pgm/util/text/TextParser.java", "diffHunk": "@@ -476,4 +477,8 @@ public static Connection parseSqlConnection(String text) throws TextException {\n       throw unknown(e); // TODO: wrap common database errors with more friendly messages\n     }\n   }\n+\n+  public static TextColor parseTextColor(Enum<?> color) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7519c73e0b61bacf442f4014421b24356a1ecc76"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDg1MTQ2MA==", "bodyText": "If this is the only reason we keep getDisplayName, then just remove it from toString.", "url": "https://github.com/PGMDev/PGM/pull/519#discussion_r434851460", "createdAt": "2020-06-03T21:00:53Z", "author": {"login": "Electroid"}, "path": "core/src/main/java/tc/oc/pgm/wool/MonumentWool.java", "diffHunk": "@@ -50,7 +50,7 @@ public MonumentWool(MonumentWoolFactory definition, Match match) {\n   public String toString() {\n     StringBuilder sb = new StringBuilder(\"MonumentWool{\");\n     sb.append(\"id=\").append(this.getId());\n-    sb.append(\",owner=\").append(this.owner.getName());\n+    sb.append(\",owner=\").append(this.owner.getDisplayName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7519c73e0b61bacf442f4014421b24356a1ecc76"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDg1MjQ4MA==", "bodyText": "If this is the only reason we have getDisplayName, just remove the logging statements. TBH, we don't need them here.", "url": "https://github.com/PGMDev/PGM/pull/519#discussion_r434852480", "createdAt": "2020-06-03T21:02:11Z", "author": {"login": "Electroid"}, "path": "core/src/main/java/tc/oc/pgm/teams/TeamMatchModule.java", "diffHunk": "@@ -538,7 +533,7 @@ public void balanceTeams() {\n           .getLogger()\n           .info(\n               \"Bumping a player from stacked team \"\n-                  + team.getColoredName()\n+                  + team.getDisplayName()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7519c73e0b61bacf442f4014421b24356a1ecc76"}, "originalPosition": 119}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDg1MzY0OA==", "bodyText": "I have an idea to solve the getDisplayName shenanigans. Add getId(): String to Named", "url": "https://github.com/PGMDev/PGM/pull/519#discussion_r434853648", "createdAt": "2020-06-03T21:03:34Z", "author": {"login": "Electroid"}, "path": "core/src/main/java/tc/oc/pgm/tablist/TeamOrder.java", "diffHunk": "@@ -33,6 +33,6 @@ public int compare(Team a, Team b) {\n     if (team == b) return 1;\n \n     // Rest of the teams are ordered by name\n-    return a.getName().compareTo(b.getName());\n+    return a.getDisplayName().compareTo(b.getDisplayName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7519c73e0b61bacf442f4014421b24356a1ecc76"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1MzY2Mjk1", "url": "https://github.com/PGMDev/PGM/pull/519#pullrequestreview-425366295", "createdAt": "2020-06-05T14:44:38Z", "commit": {"oid": "49c36779d11b7124955fb1edee0ef79f174a4493"}, "state": "DISMISSED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNDo0NDozOVrOGfxf6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNDo0ODoyM1rOGfxpGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTk3MDAyNA==", "bodyText": "Use SpigotTextAdapter to convert to a BaseComponent. This should fix the empty translations.", "url": "https://github.com/PGMDev/PGM/pull/519#discussion_r435970024", "createdAt": "2020-06-05T14:44:39Z", "author": {"login": "Electroid"}, "path": "util/src/main/java/tc/oc/pgm/util/text/TextFormatter.java", "diffHunk": "@@ -120,6 +121,22 @@ public static Component horizontalLineHeading(\n \n   public static Component horizontalLineHeading(\n       CommandSender sender, Component text, TextColor lineColor) {\n-    return horizontalLineHeading(sender, text, lineColor, ComponentUtils.MAX_CHAT_WIDTH);\n+    return horizontalLineHeading(sender, text, lineColor, LegacyFormatUtils.MAX_CHAT_WIDTH);\n+  }\n+\n+  /*\n+   * Convert ChatColor -> TextColor\n+   */\n+  public static TextColor convert(Enum<?> color) {\n+    return TextColor.valueOf(color.name());\n+  }\n+\n+  /**\n+   * Support kept for custom tab-list/nms usage (TODO: if tab-list system ever changes,\n+   * upgrade/remove this)\n+   */\n+  public static BaseComponent renderBaseComponent(CommandSender viewer, Component component) {\n+    return new net.md_5.bungee.api.chat.TextComponent(\n+        TextTranslations.translateLegacy(component, viewer));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49c36779d11b7124955fb1edee0ef79f174a4493"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTk3MDk4MA==", "bodyText": "Also, I think this can be in TextTranslations.", "url": "https://github.com/PGMDev/PGM/pull/519#discussion_r435970980", "createdAt": "2020-06-05T14:46:06Z", "author": {"login": "Electroid"}, "path": "util/src/main/java/tc/oc/pgm/util/text/TextFormatter.java", "diffHunk": "@@ -120,6 +121,22 @@ public static Component horizontalLineHeading(\n \n   public static Component horizontalLineHeading(\n       CommandSender sender, Component text, TextColor lineColor) {\n-    return horizontalLineHeading(sender, text, lineColor, ComponentUtils.MAX_CHAT_WIDTH);\n+    return horizontalLineHeading(sender, text, lineColor, LegacyFormatUtils.MAX_CHAT_WIDTH);\n+  }\n+\n+  /*\n+   * Convert ChatColor -> TextColor\n+   */\n+  public static TextColor convert(Enum<?> color) {\n+    return TextColor.valueOf(color.name());\n+  }\n+\n+  /**\n+   * Support kept for custom tab-list/nms usage (TODO: if tab-list system ever changes,\n+   * upgrade/remove this)\n+   */\n+  public static BaseComponent renderBaseComponent(CommandSender viewer, Component component) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49c36779d11b7124955fb1edee0ef79f174a4493"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTk3MTcyOA==", "bodyText": "I think using error.unknown instead of this is fine.", "url": "https://github.com/PGMDev/PGM/pull/519#discussion_r435971728", "createdAt": "2020-06-05T14:47:20Z", "author": {"login": "Electroid"}, "path": "util/src/main/i18n/templates/error.properties", "diffHunk": "@@ -10,3 +10,5 @@ error.outOfRange = Invalid value: {0} is not between {1}\n error.suggestionSuffix = (did you mean '{0}'?)\n \n error.unknown = An unknown error occurred, please see console for details\n+\n+error.player.participationState = Internal error changing player participation state", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49c36779d11b7124955fb1edee0ef79f174a4493"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTk3MjA1MA==", "bodyText": "Would rather have victoryCondition.X", "url": "https://github.com/PGMDev/PGM/pull/519#discussion_r435972050", "createdAt": "2020-06-05T14:47:53Z", "author": {"login": "Electroid"}, "path": "util/src/main/i18n/templates/gamemode.properties", "diffHunk": "@@ -238,3 +238,11 @@ blitz.livesRemaining = You have {0} remaining.\n \n # {0} = \"Blitz\"\n blitz.joinDenied = You may not join during a {0} match.\n+\n+blitz.victoryCondition = most survivors", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49c36779d11b7124955fb1edee0ef79f174a4493"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTk3MjM3OQ==", "bodyText": "These text boxes can probably be removed.", "url": "https://github.com/PGMDev/PGM/pull/519#discussion_r435972379", "createdAt": "2020-06-05T14:48:23Z", "author": {"login": "Electroid"}, "path": "util/src/main/java/tc/oc/pgm/util/chat/MultiAudience.java", "diffHunk": "@@ -41,47 +40,14 @@ default void playSound(Sound sound) {\n \n   @Override\n   default void showTitle(\n-      @Nullable net.kyori.text.Component title,\n-      @Nullable net.kyori.text.Component subTitle,\n-      int inTicks,\n-      int stayTicks,\n-      int outTicks) {\n+      Component title, Component subTitle, int inTicks, int stayTicks, int outTicks) {\n     for (Audience a : getAudiences()) a.showTitle(title, subTitle, inTicks, stayTicks, outTicks);\n   }\n \n   ///////////////////////////////////////////////////////////////", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49c36779d11b7124955fb1edee0ef79f174a4493"}, "originalPosition": 49}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62e0b1cbc3ce35f27d4ee628d3f93efc9eb48ccc", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/62e0b1cbc3ce35f27d4ee628d3f93efc9eb48ccc", "committedDate": "2020-06-06T07:04:26Z", "message": "Reintroduce support for map gamemode name\n* XML can now define <map game = \"name\"> for custom gamemode names to be displayed in the sidebar.\n* Also migrated a large majority of PGM to new text library\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7022d4e113b14577f99796a8faa47a01042fd307", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/7022d4e113b14577f99796a8faa47a01042fd307", "committedDate": "2020-06-06T07:04:27Z", "message": "Make Party extend Named again\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "efda1e4e3657e6bef9a38ad948c2903576f27920", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/efda1e4e3657e6bef9a38ad948c2903576f27920", "committedDate": "2020-06-06T07:04:28Z", "message": "Replace PersonalizedPlayer with PlayerComponent\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88d2f371fc0779378e5ffd8e8743368502af4e5f", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/88d2f371fc0779378e5ffd8e8743368502af4e5f", "committedDate": "2020-06-06T07:04:28Z", "message": "Switch TranslatableComponent to inline instead of args()\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0d9ece1f0b4171ee3e58b330d99a51bc8991c45", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/f0d9ece1f0b4171ee3e58b330d99a51bc8991c45", "committedDate": "2020-06-06T07:04:28Z", "message": "Clean up Party name methods\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85851f35cf681c196e0ee164fb0d5bd87064f6bd", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/85851f35cf681c196e0ee164fb0d5bd87064f6bd", "committedDate": "2020-06-06T07:04:29Z", "message": "Utilize Named properly for Contributor\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bab0442f49afd509cba1f9b15d7a883a69d8348d", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/bab0442f49afd509cba1f9b15d7a883a69d8348d", "committedDate": "2020-06-06T07:04:30Z", "message": "Move TextColor conversion method to TextFormatter\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14c9304a3be49fbb14873d6144cc89dfab6a532b", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/14c9304a3be49fbb14873d6144cc89dfab6a532b", "committedDate": "2020-06-06T07:04:30Z", "message": "Resolve getDisplayName() issue\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8f3c9782b6310d4966aefe798f51afaba87403a", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/f8f3c9782b6310d4966aefe798f51afaba87403a", "committedDate": "2020-06-06T07:10:43Z", "message": "Complete migration to new text library\nA few bugs remain including:\n* Vote book clicking issue\n* Minecraft key translation bug\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5bd16bb4a10bb157adba7198ff8672c32460fae", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/b5bd16bb4a10bb157adba7198ff8672c32460fae", "committedDate": "2020-06-06T07:10:43Z", "message": "Fix translation issues for non-legacy messages\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "80d21223c27812648145923e6a277a699421bc5c", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/80d21223c27812648145923e6a277a699421bc5c", "committedDate": "2020-06-06T06:26:10Z", "message": "Fix translation issues for non-legacy messages\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}, "afterCommit": {"oid": "b5bd16bb4a10bb157adba7198ff8672c32460fae", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/b5bd16bb4a10bb157adba7198ff8672c32460fae", "committedDate": "2020-06-06T07:10:43Z", "message": "Fix translation issues for non-legacy messages\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03ee4b8fe89ecb3564e35a8206eddae794ff820f", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/03ee4b8fe89ecb3564e35a8206eddae794ff820f", "committedDate": "2020-06-06T18:44:42Z", "message": "Bump text-adapter to 3.0.5\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NzYzNTI4", "url": "https://github.com/PGMDev/PGM/pull/519#pullrequestreview-425763528", "createdAt": "2020-06-06T19:33:05Z", "commit": {"oid": "03ee4b8fe89ecb3564e35a8206eddae794ff820f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 406, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}