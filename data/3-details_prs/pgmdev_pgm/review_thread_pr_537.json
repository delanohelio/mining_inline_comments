{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0MTUyOTY3", "number": 537, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQxNDo0MDowNFrOEFU2sg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQxNDo0MDo1MlrOEFU26g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MDIwMDE4OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/tc/oc/pgm/command/MapPoolCommand.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQxNDo0MDowNFrOGjdfjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQxNToyMjo0NFrOGjdunA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgzNjU1Ng==", "bodyText": "I don't think this needs to be a parameter for the command\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  @Switch('f') boolean force,", "url": "https://github.com/PGMDev/PGM/pull/537#discussion_r439836556", "createdAt": "2020-06-14T14:40:04Z", "author": {"login": "Pablete1234"}, "path": "core/src/main/java/tc/oc/pgm/command/MapPoolCommand.java", "diffHunk": "@@ -275,7 +275,11 @@ public static void skip(\n \n   @Command(aliases = \"votenext\", desc = \"Vote for the next map\", usage = \"map\")\n   public static void voteNext(\n-      MatchPlayer player, CommandSender sender, MapOrder mapOrder, @Text MapInfo map)\n+      MatchPlayer player,\n+      CommandSender sender,\n+      MapOrder mapOrder,\n+      @Switch('f') boolean force,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a978c61c502990487162eda2b21b2e9788e2047"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgzODE5OA==", "bodyText": "If I do votenext The Nile I don't want the book to popup.", "url": "https://github.com/PGMDev/PGM/pull/537#discussion_r439838198", "createdAt": "2020-06-14T14:58:18Z", "author": {"login": "Pugzy"}, "path": "core/src/main/java/tc/oc/pgm/command/MapPoolCommand.java", "diffHunk": "@@ -275,7 +275,11 @@ public static void skip(\n \n   @Command(aliases = \"votenext\", desc = \"Vote for the next map\", usage = \"map\")\n   public static void voteNext(\n-      MatchPlayer player, CommandSender sender, MapOrder mapOrder, @Text MapInfo map)\n+      MatchPlayer player,\n+      CommandSender sender,\n+      MapOrder mapOrder,\n+      @Switch('f') boolean force,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgzNjU1Ng=="}, "originalCommit": {"oid": "6a978c61c502990487162eda2b21b2e9788e2047"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTg0MDQxMg==", "bodyText": "Without seeing the book, you can't even know The Nile is an option, neither will you know if it's been voted for or against. The command is an implementation detail for how the book works, never intended to be used standalone. If you wish to make it a command make it so that skipping the -f flag will display voting messages in chat that can replace the functionality of the book.", "url": "https://github.com/PGMDev/PGM/pull/537#discussion_r439840412", "createdAt": "2020-06-14T15:22:44Z", "author": {"login": "Pablete1234"}, "path": "core/src/main/java/tc/oc/pgm/command/MapPoolCommand.java", "diffHunk": "@@ -275,7 +275,11 @@ public static void skip(\n \n   @Command(aliases = \"votenext\", desc = \"Vote for the next map\", usage = \"map\")\n   public static void voteNext(\n-      MatchPlayer player, CommandSender sender, MapOrder mapOrder, @Text MapInfo map)\n+      MatchPlayer player,\n+      CommandSender sender,\n+      MapOrder mapOrder,\n+      @Switch('f') boolean force,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgzNjU1Ng=="}, "originalCommit": {"oid": "6a978c61c502990487162eda2b21b2e9788e2047"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MDIwMDMzOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/tc/oc/pgm/command/MapPoolCommand.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQxNDo0MDoyMFrOGjdfog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQxNDo0MDoyMFrOGjdfog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgzNjU3OA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                poll.sendBook(player, force);\n          \n          \n            \n                poll.sendBook(player, true);", "url": "https://github.com/PGMDev/PGM/pull/537#discussion_r439836578", "createdAt": "2020-06-14T14:40:20Z", "author": {"login": "Pablete1234"}, "path": "core/src/main/java/tc/oc/pgm/command/MapPoolCommand.java", "diffHunk": "@@ -291,7 +295,7 @@ public static void voteNext(\n             voteResult ? TextColor.GREEN : TextColor.RED,\n             map.getStyledName(MapNameStyle.COLOR));\n     player.sendMessage(voteAction);\n-    poll.sendBook(player);\n+    poll.sendBook(player, force);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a978c61c502990487162eda2b21b2e9788e2047"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MDIwMDUwOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/tc/oc/pgm/rotation/MapPoll.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQxNDo0MDozOVrOGjdftQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQxODowNjowMVrOGjekSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgzNjU5Nw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    .clickEvent(ClickEvent.runCommand(\"/votenext -f \" + map.getName()))\n          \n          \n            \n                    .clickEvent(ClickEvent.runCommand(\"/votenext \" + map.getName()))", "url": "https://github.com/PGMDev/PGM/pull/537#discussion_r439836597", "createdAt": "2020-06-14T14:40:39Z", "author": {"login": "Pablete1234"}, "path": "core/src/main/java/tc/oc/pgm/rotation/MapPoll.java", "diffHunk": "@@ -180,7 +180,7 @@ private Component getMapBookComponent(MatchPlayer viewer, MapInfo map) {\n                 TextComponent.of(\n                     map.getTags().stream().map(MapTag::toString).collect(Collectors.joining(\" \")),\n                     TextColor.YELLOW)))\n-        .clickEvent(ClickEvent.runCommand(\"/votenext \" + map.getName()))\n+        .clickEvent(ClickEvent.runCommand(\"/votenext -f \" + map.getName()))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a978c61c502990487162eda2b21b2e9788e2047"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTg1NDE1NA==", "bodyText": "How about -o for open. I think we may want to keep the flag, to allow running the command without opening the book.", "url": "https://github.com/PGMDev/PGM/pull/537#discussion_r439854154", "createdAt": "2020-06-14T18:06:01Z", "author": {"login": "Electroid"}, "path": "core/src/main/java/tc/oc/pgm/rotation/MapPoll.java", "diffHunk": "@@ -180,7 +180,7 @@ private Component getMapBookComponent(MatchPlayer viewer, MapInfo map) {\n                 TextComponent.of(\n                     map.getTags().stream().map(MapTag::toString).collect(Collectors.joining(\" \")),\n                     TextColor.YELLOW)))\n-        .clickEvent(ClickEvent.runCommand(\"/votenext \" + map.getName()))\n+        .clickEvent(ClickEvent.runCommand(\"/votenext -f \" + map.getName()))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgzNjU5Nw=="}, "originalCommit": {"oid": "6a978c61c502990487162eda2b21b2e9788e2047"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MDIwMDc0OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/tc/oc/pgm/rotation/MapPoll.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQxNDo0MDo1MlrOGjdfzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQxNDo0MDo1MlrOGjdfzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgzNjYyMw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              public void sendBook(MatchPlayer viewer, boolean force) {\n          \n          \n            \n              public void sendBook(MatchPlayer viewer, boolean forceOpen) {\n          \n      \n    \n    \n  \n\nforce in this context could mean if the book is forced, i think making it more explicit can help", "url": "https://github.com/PGMDev/PGM/pull/537#discussion_r439836623", "createdAt": "2020-06-14T14:40:52Z", "author": {"login": "Pablete1234"}, "path": "core/src/main/java/tc/oc/pgm/rotation/MapPoll.java", "diffHunk": "@@ -136,7 +136,7 @@ private Component getMapChatComponent(MatchPlayer viewer, MapInfo map, boolean w\n         .build();\n   }\n \n-  public void sendBook(MatchPlayer viewer) {\n+  public void sendBook(MatchPlayer viewer, boolean force) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a978c61c502990487162eda2b21b2e9788e2047"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1004, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}