{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY5MTYyODMw", "number": 618, "title": "Send TNT alert in admin chat", "bodyText": "Signed-off-by: Jacob Bearden jacob@bearden.io\nCloses #557", "createdAt": "2020-08-18T02:33:23Z", "url": "https://github.com/PGMDev/PGM/pull/618", "merged": true, "mergeCommit": {"oid": "e99066836a60572330c3d35c76d3f9f918b1aa40"}, "closed": true, "closedAt": "2020-08-19T15:29:24Z", "author": {"login": "jacobbearden"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc_9neLAH2gAyNDY5MTYyODMwOjE0NzcwNGYyMjRiMGE0YTljODYxMjQ1NTRmNjg5YmNlMWQ5NzBkMTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAdWQ4AFqTQ3MDU3NDg4MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "147704f224b0a4a9c86124554f689bce1d970d14", "author": {"user": {"login": "jacobbearden", "name": "Jacob Bearden"}}, "url": "https://github.com/PGMDev/PGM/commit/147704f224b0a4a9c86124554f689bce1d970d14", "committedDate": "2020-08-18T02:30:38Z", "message": "send tnt alert in admin chat\n\nSigned-off-by: Jacob Bearden <jacob@bearden.io>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5MTIxMjY4", "url": "https://github.com/PGMDev/PGM/pull/618#pullrequestreview-469121268", "createdAt": "2020-08-18T08:49:17Z", "commit": {"oid": "147704f224b0a4a9c86124554f689bce1d970d14"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwODo0OToxN1rOHCJ1Jw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwODo1MDo0MFrOHCJ4gQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjAyMDI2Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            moderation.defuse.alert.player = {0} defused {1}'s TNT.\n          \n          \n            \n            moderation.defuse.alert.player = {0} defused {1}'s {2}.\n          \n      \n    \n    \n  \n\nTNT should be localized aswell, using minecraft's name", "url": "https://github.com/PGMDev/PGM/pull/618#discussion_r472020263", "createdAt": "2020-08-18T08:49:17Z", "author": {"login": "Pablete1234"}, "path": "util/src/main/i18n/templates/moderation.properties", "diffHunk": "@@ -157,6 +157,13 @@ moderation.defuse.world = You defused world TNT.\n # {0} = player name\n moderation.defuse.player = You defused {0}'s TNT.\n \n+# {0} = defuser player name\n+# {1} = griefer player name\n+moderation.defuse.alert.player = {0} defused {1}'s TNT.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "147704f224b0a4a9c86124554f689bce1d970d14"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjAyMDMzMg==", "bodyText": "same as above", "url": "https://github.com/PGMDev/PGM/pull/618#discussion_r472020332", "createdAt": "2020-08-18T08:49:23Z", "author": {"login": "Pablete1234"}, "path": "util/src/main/i18n/templates/moderation.properties", "diffHunk": "@@ -157,6 +157,13 @@ moderation.defuse.world = You defused world TNT.\n # {0} = player name\n moderation.defuse.player = You defused {0}'s TNT.\n \n+# {0} = defuser player name\n+# {1} = griefer player name\n+moderation.defuse.alert.player = {0} defused {1}'s TNT.\n+\n+# {0} = defuser player name\n+moderation.defuse.alert.world = {0} defused world TNT.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "147704f224b0a4a9c86124554f689bce1d970d14"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjAyMDk5Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            owner.getName(NameStyle.FANCY)),\n          \n          \n            \n                            owner.getName(NameStyle.FANCY),\n          \n          \n            \n                            MinecraftTranslations.getEntity(entity.getType()).color(TextColor.DARK_RED)),\n          \n      \n    \n    \n  \n\nAdd the translatable component for the TNT name", "url": "https://github.com/PGMDev/PGM/pull/618#discussion_r472020993", "createdAt": "2020-08-18T08:50:28Z", "author": {"login": "Pablete1234"}, "path": "core/src/main/java/tc/oc/pgm/listeners/AntiGriefListener.java", "diffHunk": "@@ -90,12 +90,25 @@ private void participantDefuse(Player player, Entity entity) {\n                     \"moderation.defuse.player\",\n                     clicker.getBukkit(),\n                     owner.getBukkit().getDisplayName(clicker.getBukkit()) + ChatColor.RED));\n+\n+        ChatDispatcher.broadcastAdminChatMessage(\n+            TranslatableComponent.of(\n+                \"moderation.defuse.alert.player\",\n+                TextColor.WHITE,\n+                clicker.getName(NameStyle.FANCY),\n+                owner.getName(NameStyle.FANCY)),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "147704f224b0a4a9c86124554f689bce1d970d14"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjAyMTEyMQ==", "bodyText": "same as above", "url": "https://github.com/PGMDev/PGM/pull/618#discussion_r472021121", "createdAt": "2020-08-18T08:50:40Z", "author": {"login": "Pablete1234"}, "path": "core/src/main/java/tc/oc/pgm/listeners/AntiGriefListener.java", "diffHunk": "@@ -90,12 +90,25 @@ private void participantDefuse(Player player, Entity entity) {\n                     \"moderation.defuse.player\",\n                     clicker.getBukkit(),\n                     owner.getBukkit().getDisplayName(clicker.getBukkit()) + ChatColor.RED));\n+\n+        ChatDispatcher.broadcastAdminChatMessage(\n+            TranslatableComponent.of(\n+                \"moderation.defuse.alert.player\",\n+                TextColor.WHITE,\n+                clicker.getName(NameStyle.FANCY),\n+                owner.getName(NameStyle.FANCY)),\n+            clicker.getMatch());\n       } else {\n         this.notifyDefuse(\n             clicker,\n             entity,\n             ChatColor.RED\n                 + TextTranslations.translate(\"moderation.defuse.world\", clicker.getBukkit()));\n+\n+        ChatDispatcher.broadcastAdminChatMessage(\n+            TranslatableComponent.of(\n+                \"moderation.defuse.alert.world\", TextColor.WHITE, clicker.getName(NameStyle.FANCY)),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "147704f224b0a4a9c86124554f689bce1d970d14"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5ODAwMDg1", "url": "https://github.com/PGMDev/PGM/pull/618#pullrequestreview-469800085", "createdAt": "2020-08-18T20:18:03Z", "commit": {"oid": "147704f224b0a4a9c86124554f689bce1d970d14"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQyMDoxODowM1rOHCkvVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQyMDoxODowM1rOHCkvVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjQ2MTE0Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            TextColor.WHITE,\n          \n          \n            \n                            TextColor.GRAY,\n          \n      \n    \n    \n  \n\nConsider the gray chat color so formatting is more aligned with other admin broadcasts (e.g /sn) \ud83d\ude42", "url": "https://github.com/PGMDev/PGM/pull/618#discussion_r472461142", "createdAt": "2020-08-18T20:18:03Z", "author": {"login": "applenick"}, "path": "core/src/main/java/tc/oc/pgm/listeners/AntiGriefListener.java", "diffHunk": "@@ -90,12 +90,25 @@ private void participantDefuse(Player player, Entity entity) {\n                     \"moderation.defuse.player\",\n                     clicker.getBukkit(),\n                     owner.getBukkit().getDisplayName(clicker.getBukkit()) + ChatColor.RED));\n+\n+        ChatDispatcher.broadcastAdminChatMessage(\n+            TranslatableComponent.of(\n+                \"moderation.defuse.alert.player\",\n+                TextColor.WHITE,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "147704f224b0a4a9c86124554f689bce1d970d14"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5ODAxNTMx", "url": "https://github.com/PGMDev/PGM/pull/618#pullrequestreview-469801531", "createdAt": "2020-08-18T20:20:18Z", "commit": {"oid": "147704f224b0a4a9c86124554f689bce1d970d14"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQyMDoyMDoxOFrOHCk3mA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQyMDoyMDoxOFrOHCk3mA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjQ2MzI1Ng==", "bodyText": "See other comment about color", "url": "https://github.com/PGMDev/PGM/pull/618#discussion_r472463256", "createdAt": "2020-08-18T20:20:18Z", "author": {"login": "applenick"}, "path": "core/src/main/java/tc/oc/pgm/listeners/AntiGriefListener.java", "diffHunk": "@@ -90,12 +90,25 @@ private void participantDefuse(Player player, Entity entity) {\n                     \"moderation.defuse.player\",\n                     clicker.getBukkit(),\n                     owner.getBukkit().getDisplayName(clicker.getBukkit()) + ChatColor.RED));\n+\n+        ChatDispatcher.broadcastAdminChatMessage(\n+            TranslatableComponent.of(\n+                \"moderation.defuse.alert.player\",\n+                TextColor.WHITE,\n+                clicker.getName(NameStyle.FANCY),\n+                owner.getName(NameStyle.FANCY)),\n+            clicker.getMatch());\n       } else {\n         this.notifyDefuse(\n             clicker,\n             entity,\n             ChatColor.RED\n                 + TextTranslations.translate(\"moderation.defuse.world\", clicker.getBukkit()));\n+\n+        ChatDispatcher.broadcastAdminChatMessage(\n+            TranslatableComponent.of(\n+                \"moderation.defuse.alert.world\", TextColor.WHITE, clicker.getName(NameStyle.FANCY)),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "147704f224b0a4a9c86124554f689bce1d970d14"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0010b8cdee1b2e1a7961ad68de418e19dd526677", "author": {"user": {"login": "jacobbearden", "name": "Jacob Bearden"}}, "url": "https://github.com/PGMDev/PGM/commit/0010b8cdee1b2e1a7961ad68de418e19dd526677", "committedDate": "2020-08-18T22:17:34Z", "message": "change color to gray\n\nSigned-off-by: Jacob Bearden <jacob@bearden.io>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9486dfdfbb5ae590648e3ffd01ea41ca8edb511c", "author": {"user": {"login": "jacobbearden", "name": "Jacob Bearden"}}, "url": "https://github.com/PGMDev/PGM/commit/9486dfdfbb5ae590648e3ffd01ea41ca8edb511c", "committedDate": "2020-08-18T22:17:48Z", "message": "make 'TNT' translated\n\nSigned-off-by: Jacob Bearden <jacob@bearden.io>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5ODcxMzYy", "url": "https://github.com/PGMDev/PGM/pull/618#pullrequestreview-469871362", "createdAt": "2020-08-18T22:23:24Z", "commit": {"oid": "9486dfdfbb5ae590648e3ffd01ea41ca8edb511c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcwMDA4NjU2", "url": "https://github.com/PGMDev/PGM/pull/618#pullrequestreview-470008656", "createdAt": "2020-08-19T01:32:58Z", "commit": {"oid": "9486dfdfbb5ae590648e3ffd01ea41ca8edb511c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcwNTc0ODgw", "url": "https://github.com/PGMDev/PGM/pull/618#pullrequestreview-470574880", "createdAt": "2020-08-19T15:28:48Z", "commit": {"oid": "9486dfdfbb5ae590648e3ffd01ea41ca8edb511c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 456, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}