{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY3MjE5Njcw", "number": 608, "title": "Add group hover info to chat", "bodyText": "Add group hover info to chat\nThis PR resolves #603 and resolves #615\nA brief overview, now when a user hovers over a flair (if defined) information explaining what the rank is will be shown.\nTo add this feature I did a few things. First created a new Flair class in the config to hold info related to prefix/suffix including the attributes for the hover message. Then the main change was made in ChatDispatcher, where now instead of sending a formatted string, a component message is created and sent to players. Allowing for the hover/click events to work as intended.\nConfig\nNew configurations values added:\ngroups:\n  # A special group for server operators.\n  op:\n    prefix: \"&6\u2756\"\n    suffix: \"\"\n    # Display name of the group - Displayed when hovering over prefix/suffix              \n    display-name: \"&6Server Operator\"\n    # Description of group - Displayed when hovering over prefix/suffix\n    description: \"&7Administrator of the server\"\n    # URL shown below description when hovering over prefix/suffix\n    click-link: \"&bhttps://pgm.dev/\"\n\n    # If you want to further customize prefix/suffix flairs, provide components here to override format\n    # Only use if you know what you're doing\n    prefix-component: \"\"\n    suffix-component: \u201c\"\nScreenshots\nExample of defining just a display-name\n\nExample of defining a display-name and description\n\nExample using all hover attributes including click-link\n\nSuggestions\nI applied the feedback given in #603 regarding the config layout, if there are any other suggestions just let me know here and I\u2019ll be glad to adjust this.\nAs always this PR was tested and all features work as intended \ud83d\udc4d\nSigned-off-by: applenick applenick@users.noreply.github.com", "createdAt": "2020-08-13T08:04:13Z", "url": "https://github.com/PGMDev/PGM/pull/608", "merged": true, "mergeCommit": {"oid": "f24f40f0b3b3d21bc6d5375fe340d4121b44e87b"}, "closed": true, "closedAt": "2020-08-19T15:33:09Z", "author": {"login": "applenick"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-dFIHAFqTQ2NjYxNjM4Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAdZprAFqTQ3MDU3ODE5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2NjE2Mzgz", "url": "https://github.com/PGMDev/PGM/pull/608#pullrequestreview-466616383", "createdAt": "2020-08-13T09:57:49Z", "commit": {"oid": "a1bb7046237748d631ab4c0014c2b6fbbc1072d4"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QwOTo1Nzo0OVrOHAEoZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxMDowMTowNVrOHAEv0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTgzNzkyNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              Component getPrefixComponent(UUID uuid);\n          \n          \n            \n            \n          \n          \n            \n              Component getSuffixComponent(UUID uuid);\n          \n          \n            \n              default Component getPrefixComponent(UUID uuid) {\n          \n          \n            \n                  return TextComponent.of(getPrefix(uuid));\n          \n          \n            \n              }\n          \n          \n            \n            \n          \n          \n            \n              default Component getSuffixComponent(UUID uuid) {\n          \n          \n            \n                  return TextComponent.of(getSuffix(uuid));\n          \n          \n            \n              }\n          \n      \n    \n    \n  \n\nKeeping this interface simple to implement for 3rd parties is relevant IMO, and it's an easy enough default. (Maybe do a component parsing from legacy text instead of just a plain text with the text)", "url": "https://github.com/PGMDev/PGM/pull/608#discussion_r469837924", "createdAt": "2020-08-13T09:57:49Z", "author": {"login": "Pablete1234"}, "path": "core/src/main/java/tc/oc/pgm/namedecorations/NameDecorationProvider.java", "diffHunk": "@@ -1,11 +1,16 @@\n package tc.oc.pgm.namedecorations;\n \n import java.util.UUID;\n+import net.kyori.text.Component;\n \n /** This interface is intended to return what prefix and suffix a player should have */\n public interface NameDecorationProvider {\n \n   String getPrefix(UUID uuid);\n \n   String getSuffix(UUID uuid);\n+\n+  Component getPrefixComponent(UUID uuid);\n+\n+  Component getSuffixComponent(UUID uuid);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1bb7046237748d631ab4c0014c2b6fbbc1072d4"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTgzOTgyNg==", "bodyText": "I'd do the same as above, provide a fallback default, even if the registry isn't really something that should be reimplemented by 3rd parties often", "url": "https://github.com/PGMDev/PGM/pull/608#discussion_r469839826", "createdAt": "2020-08-13T10:01:05Z", "author": {"login": "Pablete1234"}, "path": "core/src/main/java/tc/oc/pgm/namedecorations/NameDecorationRegistry.java", "diffHunk": "@@ -15,6 +16,17 @@\n    */\n   String getDecoratedName(Player player, Party party);\n \n+  /**\n+   * Get the fully decorated name as a Component\n+   *\n+   * <p>Note: Allows for prefix/suffix hover events\n+   *\n+   * @param player The player to decorate\n+   * @param party The party this player is currently in\n+   * @return The name, decorated, in component form\n+   */\n+  Component getDecoratedNameComponent(Player player, Party party);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1bb7046237748d631ab4c0014c2b6fbbc1072d4"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cca38638fdf502fd1920bad6bd75d9a9978a5a26", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/cca38638fdf502fd1920bad6bd75d9a9978a5a26", "committedDate": "2020-08-14T08:42:13Z", "message": "Add group hover info to chat\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c344c07aeb101bbc4f26012765287e3ed39ce7c", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/2c344c07aeb101bbc4f26012765287e3ed39ce7c", "committedDate": "2020-08-14T08:42:14Z", "message": "Add flair component overrides\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a7337fbaf8fbc53c57bbe26462aaf1515643f7c9", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/a7337fbaf8fbc53c57bbe26462aaf1515643f7c9", "committedDate": "2020-08-14T07:59:13Z", "message": "Add flair component overrides\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}, "afterCommit": {"oid": "2c344c07aeb101bbc4f26012765287e3ed39ce7c", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/2c344c07aeb101bbc4f26012765287e3ed39ce7c", "committedDate": "2020-08-14T08:42:14Z", "message": "Add flair component overrides\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad95e7b39b6c96134fe891d9d65019f355d623e6", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/ad95e7b39b6c96134fe891d9d65019f355d623e6", "committedDate": "2020-08-17T07:39:38Z", "message": "Fix rendering of TextDecorations in usernames\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcwNTc4MTk2", "url": "https://github.com/PGMDev/PGM/pull/608#pullrequestreview-470578196", "createdAt": "2020-08-19T15:32:30Z", "commit": {"oid": "ad95e7b39b6c96134fe891d9d65019f355d623e6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 450, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}