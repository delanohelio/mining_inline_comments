{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyNzUzMzkz", "number": 301, "title": "Fire more transform events", "bodyText": "Event called by structure grows (Sapling -> Tree), (Mushroom -> Huge Mushroom), naturally or using bonemeal.\nhttps://hub.spigotmc.org/javadocs/spigot/org/bukkit/event/world/StructureGrowEvent.html\nAlso fires transform events for two-high blocka", "createdAt": "2020-02-08T20:08:49Z", "url": "https://github.com/PGMDev/PGM/pull/301", "merged": true, "mergeCommit": {"oid": "ba6e2fac891def0e9676d2f4b135e43d19b1f049"}, "closed": true, "closedAt": "2020-02-09T15:45:22Z", "author": {"login": "AustinLMayes"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcCZpZ9gH2gAyMzcyNzUzMzkzOjFjYTY4MmEwN2QzZmEzNjk4MTFlZjUyNGY5OWI3M2JjZWM1YWQ5Nzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcCqcrWAH2gAyMzcyNzUzMzkzOjhkZTMxN2I3Nzc5Y2E0NzJlYWIyOGNiOGFjOGVhMTBjNmFkZGI5NjY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1ca682a07d3fa369811ef524f99b73bcec5ad979", "author": {"user": {"login": "AustinLMayes", "name": "Austin Mayes"}}, "url": "https://github.com/PGMDev/PGM/commit/1ca682a07d3fa369811ef524f99b73bcec5ad979", "committedDate": "2020-02-08T20:06:47Z", "message": "Create transform events for structure grows\n\nSigned-off-by: Austin Mayes <austin@avicus.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7765ceea8b55e831a3a5cfcb94e1c4c4e145f7bf", "author": {"user": {"login": "AustinLMayes", "name": "Austin Mayes"}}, "url": "https://github.com/PGMDev/PGM/commit/7765ceea8b55e831a3a5cfcb94e1c4c4e145f7bf", "committedDate": "2020-02-08T20:23:52Z", "message": "Take into account block height when doing calculations\n\nSigned-off-by: Austin Mayes <austin@avicus.net>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e8f7825a2b569c0a3930e40d3ec0abf7c60e0ee", "author": {"user": {"login": "AustinLMayes", "name": "Austin Mayes"}}, "url": "https://github.com/PGMDev/PGM/commit/2e8f7825a2b569c0a3930e40d3ec0abf7c60e0ee", "committedDate": "2020-02-08T20:33:12Z", "message": "Use a less garbage height check\n\nSigned-off-by: Austin Mayes <austin@avicus.net>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1NTY4NDky", "url": "https://github.com/PGMDev/PGM/pull/301#pullrequestreview-355568492", "createdAt": "2020-02-08T20:54:22Z", "commit": {"oid": "2e8f7825a2b569c0a3930e40d3ec0abf7c60e0ee"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wOFQyMDo1NDoyMlrOFnSAQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wOFQyMDo1NDoyMlrOFnSAQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjczMzc2MQ==", "bodyText": "Can we put this in a util? Also, BlockTransformEvent is a very, very hot part of the code: Can we optimize this with enums and switches?\nI would even check have two checks, so this will be short-circuited.\nif (event.getNewState().getY() < this.buildHeight - 1) return;\nif (event.getNewState().getY()\n    + getExtraHeight(event.getNewState().getMaterial()) < this.buildHeight) return;\n// setCancelled", "url": "https://github.com/PGMDev/PGM/pull/301#discussion_r376733761", "createdAt": "2020-02-08T20:54:22Z", "author": {"login": "Electroid"}, "path": "src/main/java/tc/oc/pgm/modules/MaxBuildHeightMatchModule.java", "diffHunk": "@@ -33,4 +34,10 @@ public void checkBuildHeight(BlockTransformEvent event) {\n       }\n     }\n   }\n+\n+  private int getExtraHeight(Material material) {\n+    if (material.name().contains(\"DOOR\") && !material.name().contains(\"TRAP\")) return 1;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2e8f7825a2b569c0a3930e40d3ec0abf7c60e0ee"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06ffd2e37acc7c0676dcb39b8ac2a19eb48afa71", "author": {"user": {"login": "AustinLMayes", "name": "Austin Mayes"}}, "url": "https://github.com/PGMDev/PGM/commit/06ffd2e37acc7c0676dcb39b8ac2a19eb48afa71", "committedDate": "2020-02-08T21:44:38Z", "message": "Fire two transform events for 2-high blocks\n\nSigned-off-by: Austin Mayes <austin@avicus.net>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1NTc5NDY0", "url": "https://github.com/PGMDev/PGM/pull/301#pullrequestreview-355579464", "createdAt": "2020-02-09T02:18:50Z", "commit": {"oid": "06ffd2e37acc7c0676dcb39b8ac2a19eb48afa71"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1NTgwMjcw", "url": "https://github.com/PGMDev/PGM/pull/301#pullrequestreview-355580270", "createdAt": "2020-02-09T02:48:30Z", "commit": {"oid": "7765ceea8b55e831a3a5cfcb94e1c4c4e145f7bf"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wOVQwMjo0ODozMFrOFnTAHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wOVQwMjo0ODozMFrOFnTAHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc1MDExMA==", "bodyText": "getMaterialHeight maybe? Should return 1 or 2.", "url": "https://github.com/PGMDev/PGM/pull/301#discussion_r376750110", "createdAt": "2020-02-09T02:48:30Z", "author": {"login": "TheMolkaPL"}, "path": "src/main/java/tc/oc/pgm/modules/MaxBuildHeightMatchModule.java", "diffHunk": "@@ -33,4 +34,23 @@ public void checkBuildHeight(BlockTransformEvent event) {\n       }\n     }\n   }\n+\n+  private int getExtraHeight(Material material) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7765ceea8b55e831a3a5cfcb94e1c4c4e145f7bf"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1NjE1MjQ3", "url": "https://github.com/PGMDev/PGM/pull/301#pullrequestreview-355615247", "createdAt": "2020-02-09T15:41:11Z", "commit": {"oid": "06ffd2e37acc7c0676dcb39b8ac2a19eb48afa71"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8de317b7779ca472eab28cb8ac8ea10c6addb966", "author": {"user": {"login": "Electroid", "name": "Ashcon Partovi"}}, "url": "https://github.com/PGMDev/PGM/commit/8de317b7779ca472eab28cb8ac8ea10c6addb966", "committedDate": "2020-02-09T15:41:16Z", "message": "Merge branch 'master' into fix/handle-trees"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 576, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}