{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3OTI5NTcz", "number": 524, "title": "Add names to posts. Add support for multiple posts for one flag.", "bodyText": "Fix for #359\nI added a name attribute to posts. When the flag is respawning, if a name is specified, it will say which post the flag will respawn to.\nAlso, I added support for a flag to have multiple posts. Each post can still have multiple blocks, so all previous xmls should still work. Also, the flag element now has an attribute called sequential. If sequential=\"true\", when the flag respawns, it will cycle through the posts; if false, it will randomly choose a post to respawn to. When a flag is respawning, it will first choose a post, and then choose one of the post's points.\nSigned-off-by: mrcookie_13 batbmrcookie@gmail.com", "createdAt": "2020-06-04T15:45:14Z", "url": "https://github.com/PGMDev/PGM/pull/524", "merged": true, "mergeCommit": {"oid": "63b166d4014a2c7737610a2b09d3f0ee08c4a51f"}, "closed": true, "closedAt": "2020-06-07T20:51:01Z", "author": {"login": "mrcookieunderscore13"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcoAF9rABqjM0MDc1MzU2MDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcpCMO-gFqTQyNTg1MjE2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "144c6eec027fdd76cb62cc4ad1075ed507cfea5e", "author": {"user": {"login": "mrcookieunderscore13", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/144c6eec027fdd76cb62cc4ad1075ed507cfea5e", "committedDate": "2020-06-04T15:04:21Z", "message": "Fixed issue that broke maps with more than one flag."}, "afterCommit": {"oid": "5fc3950e1cd25a61495ac1ea1185fcd9507b168f", "author": {"user": {"login": "mrcookieunderscore13", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/5fc3950e1cd25a61495ac1ea1185fcd9507b168f", "committedDate": "2020-06-04T15:46:41Z", "message": "Fixed issue that broke maps with more than one flag.\n\nSigned-off-by: mrcookie <athertonmook@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0NjAyODkz", "url": "https://github.com/PGMDev/PGM/pull/524#pullrequestreview-424602893", "createdAt": "2020-06-04T16:02:18Z", "commit": {"oid": "5fc3950e1cd25a61495ac1ea1185fcd9507b168f"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNjowMjoxOFrOGfNFWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxNjowNjo1NlrOGfNRpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTM3MzQwMg==", "bodyText": "@Nullable?", "url": "https://github.com/PGMDev/PGM/pull/524#discussion_r435373402", "createdAt": "2020-06-04T16:02:18Z", "author": {"login": "KingOfSquares"}, "path": "core/src/main/java/tc/oc/pgm/flag/FlagParser.java", "diffHunk": "@@ -85,6 +86,7 @@ public Post parsePost(Element el) throws InvalidXMLException {\n     Post post =\n         new Post(\n             id,\n+            name,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5fc3950e1cd25a61495ac1ea1185fcd9507b168f"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTM3MzQ5MA==", "bodyText": "No reason to leave this in", "url": "https://github.com/PGMDev/PGM/pull/524#discussion_r435373490", "createdAt": "2020-06-04T16:02:27Z", "author": {"login": "KingOfSquares"}, "path": "core/src/main/java/tc/oc/pgm/flag/FlagParser.java", "diffHunk": "@@ -214,15 +219,20 @@ public FlagDefinition parseFlag(Element el) throws InvalidXMLException {\n     ProximityMetric netProximityMetric =\n         ProximityMetric.parse(\n             el, \"net\", new ProximityMetric(ProximityMetric.Type.CLOSEST_PLAYER, false));\n-\n     Post defaultPost;\n-    Element elPost = XMLUtils.getUniqueChild(el, \"post\");\n-    if (elPost != null) {\n+    List<Post> flagPosts = new ArrayList<>();\n+    for (Element elPost : el.getChildren(\"post\")) {\n+      flagPosts.add(this.parsePost(elPost));\n+    }\n+    // Element elPost = XMLUtils.getUniqueChild(el, \"post\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5fc3950e1cd25a61495ac1ea1185fcd9507b168f"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTM3NjU0OQ==", "bodyText": "What about Post returnPost? temp sounds weird imo", "url": "https://github.com/PGMDev/PGM/pull/524#discussion_r435376549", "createdAt": "2020-06-04T16:06:56Z", "author": {"login": "KingOfSquares"}, "path": "core/src/main/java/tc/oc/pgm/flag/Flag.java", "diffHunk": "@@ -231,8 +232,32 @@ public boolean canDropAt(Location location) {\n     }\n   }\n \n+  private int sequentialPostCounter = 0;\n+  private Post returnPost;\n+\n+  public Post getReturnPost(Post post) {\n+    if (post.isSpecifiedPost()) {\n+      return post;\n+    }\n+    if (definition.isSequential()) {\n+      Post tempPost = definition.getPosts().get(sequentialPostCounter);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5fc3950e1cd25a61495ac1ea1185fcd9507b168f"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0ODM3MDE0", "url": "https://github.com/PGMDev/PGM/pull/524#pullrequestreview-424837014", "createdAt": "2020-06-04T21:09:32Z", "commit": {"oid": "5fc3950e1cd25a61495ac1ea1185fcd9507b168f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQyMTowOTozMlrOGfX4Tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQyMTowOTozMlrOGfX4Tw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTU1MDI4Nw==", "bodyText": "The \"to\" will need to be translated as well, so I would separate this into 2 translation strings. One where post name is null and another where it is not.", "url": "https://github.com/PGMDev/PGM/pull/524#discussion_r435550287", "createdAt": "2020-06-04T21:09:32Z", "author": {"login": "EricZeiberg"}, "path": "util/src/main/i18n/templates/gamemode.properties", "diffHunk": "@@ -208,8 +208,9 @@ flag.captureDenied = {0} will be captured when allowed\n flag.return = {0} has been returned\n \n # {0} = flag name\n-# {1} = duration (e.g. \"5 seconds\")\n-flag.willRespawn = {0} will respawn in {1}\n+# {1} = \" to \" + flag post name. If post name is null, {1} = \"\"\n+# {2} = duration (e.g. \"5 seconds\")\n+flag.willRespawn = {0} will respawn{1} in {2}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5fc3950e1cd25a61495ac1ea1185fcd9507b168f"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0OTI1MTA0", "url": "https://github.com/PGMDev/PGM/pull/524#pullrequestreview-424925104", "createdAt": "2020-06-05T00:37:04Z", "commit": {"oid": "8c101eeb47c8c834f89a2e60a8de617563af924a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwMDozNzowNVrOGfcvrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwMDozNzowNVrOGfcvrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTYyOTk5Ng==", "bodyText": "Use TranslatableComponent.of() instead of PersonalizedTranslatable (Should've told you that earlier sorry)", "url": "https://github.com/PGMDev/PGM/pull/524#discussion_r435629996", "createdAt": "2020-06-05T00:37:05Z", "author": {"login": "KingOfSquares"}, "path": "core/src/main/java/tc/oc/pgm/flag/state/Respawning.java", "diffHunk": "@@ -55,22 +55,31 @@ public void enterState() {\n     if (!Duration.ZERO.equals(respawnTime)) {\n       // Respawn is delayed\n \n-      String displayPostName = \"\";\n+      // String displayPostName = \"\";\n       String postName = this.respawnToPost.getPostName();\n       if (postName != null) {\n-        displayPostName = \" to \" + net.md_5.bungee.api.ChatColor.AQUA + postName;\n+        // displayPostName = \" to \" + net.md_5.bungee.api.ChatColor.AQUA + postName;\n+        this.flag\n+            .getMatch()\n+            .sendMessage(\n+                new PersonalizedTranslatable(\n+                    \"flag.willRespawnNamed\",\n+                    this.flag.getComponentName(),\n+                    net.md_5.bungee.api.ChatColor.AQUA + postName,\n+                    new PersonalizedText(\n+                        PeriodFormats.briefNaturalApproximate(respawnTime),\n+                        net.md_5.bungee.api.ChatColor.AQUA)));\n+      } else {\n+        this.flag\n+            .getMatch()\n+            .sendMessage(\n+                new PersonalizedTranslatable(\n+                    \"flag.willRespawn\",\n+                    this.flag.getComponentName(),\n+                    new PersonalizedText(\n+                        PeriodFormats.briefNaturalApproximate(respawnTime),\n+                        net.md_5.bungee.api.ChatColor.AQUA)));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c101eeb47c8c834f89a2e60a8de617563af924a"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0OTI1Nzc3", "url": "https://github.com/PGMDev/PGM/pull/524#pullrequestreview-424925777", "createdAt": "2020-06-05T00:39:30Z", "commit": {"oid": "8c101eeb47c8c834f89a2e60a8de617563af924a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwMDozOTozMVrOGfcx7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwMDozOTozMVrOGfcx7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTYzMDU3NA==", "bodyText": "The comments should be removed", "url": "https://github.com/PGMDev/PGM/pull/524#discussion_r435630574", "createdAt": "2020-06-05T00:39:31Z", "author": {"login": "KingOfSquares"}, "path": "core/src/main/java/tc/oc/pgm/flag/state/Respawning.java", "diffHunk": "@@ -52,15 +54,32 @@ public void enterState() {\n \n     if (!Duration.ZERO.equals(respawnTime)) {\n       // Respawn is delayed\n-      this.flag\n-          .getMatch()\n-          .sendMessage(\n-              new PersonalizedTranslatable(\n-                  \"flag.willRespawn\",\n-                  this.flag.getComponentName(),\n-                  new PersonalizedText(\n-                      PeriodFormats.briefNaturalApproximate(respawnTime),\n-                      net.md_5.bungee.api.ChatColor.AQUA)));\n+\n+      // String displayPostName = \"\";\n+      String postName = this.respawnToPost.getPostName();\n+      if (postName != null) {\n+        // displayPostName = \" to \" + net.md_5.bungee.api.ChatColor.AQUA + postName;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c101eeb47c8c834f89a2e60a8de617563af924a"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0OTI2NjIx", "url": "https://github.com/PGMDev/PGM/pull/524#pullrequestreview-424926621", "createdAt": "2020-06-05T00:42:39Z", "commit": {"oid": "8c101eeb47c8c834f89a2e60a8de617563af924a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwMDo0MjozOVrOGfc01w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwMDo0MjozOVrOGfc01w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTYzMTMxOQ==", "bodyText": "I think this comment is missing some words \ud83e\udd14", "url": "https://github.com/PGMDev/PGM/pull/524#discussion_r435631319", "createdAt": "2020-06-05T00:42:39Z", "author": {"login": "KingOfSquares"}, "path": "core/src/main/java/tc/oc/pgm/flag/Post.java", "diffHunk": "@@ -38,9 +38,13 @@\n   private final boolean permanent; // Flag enters Completed state when at this post\n   private final double pointsPerSecond; // Points awarded while any flag is at this post\n   private final Filter pickupFilter; // Filter players who can pickup a flag at this post\n+  private final @Nullable String postName; // The name of the post to displayed.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c101eeb47c8c834f89a2e60a8de617563af924a"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1MzczMTc3", "url": "https://github.com/PGMDev/PGM/pull/524#pullrequestreview-425373177", "createdAt": "2020-06-05T14:52:45Z", "commit": {"oid": "e16c6f3a1874d163755dd732d024764a2131281e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNDo1Mjo0NVrOGfxzug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNDo1NDoxNlrOGfx3yQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTk3NTA5OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            flag.willRespawnNamed = {0} will respawn to {1} in {2}\n          \n          \n            \n            flag.willRespawn.named = {0} will respawn to {1} in {2}", "url": "https://github.com/PGMDev/PGM/pull/524#discussion_r435975098", "createdAt": "2020-06-05T14:52:45Z", "author": {"login": "Electroid"}, "path": "util/src/main/i18n/templates/gamemode.properties", "diffHunk": "@@ -211,6 +211,11 @@ flag.return = {0} has been returned\n # {1} = duration (e.g. \"5 seconds\")\n flag.willRespawn = {0} will respawn in {1}\n \n+# {0} = flag name\n+# {1} = post name\n+# {2} = duration\n+flag.willRespawnNamed = {0} will respawn to {1} in {2}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e16c6f3a1874d163755dd732d024764a2131281e"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTk3NTQ1Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                if (flagPosts.size() != 0) {\n          \n          \n            \n                if (!flagPosts.isEmpty()) {", "url": "https://github.com/PGMDev/PGM/pull/524#discussion_r435975452", "createdAt": "2020-06-05T14:53:15Z", "author": {"login": "Electroid"}, "path": "core/src/main/java/tc/oc/pgm/flag/FlagParser.java", "diffHunk": "@@ -214,15 +219,19 @@ public FlagDefinition parseFlag(Element el) throws InvalidXMLException {\n     ProximityMetric netProximityMetric =\n         ProximityMetric.parse(\n             el, \"net\", new ProximityMetric(ProximityMetric.Type.CLOSEST_PLAYER, false));\n-\n     Post defaultPost;\n-    Element elPost = XMLUtils.getUniqueChild(el, \"post\");\n-    if (elPost != null) {\n+    List<Post> flagPosts = new ArrayList<>();\n+    for (Element elPost : el.getChildren(\"post\")) {\n+      flagPosts.add(this.parsePost(elPost));\n+    }\n+\n+    if (flagPosts.size() != 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e16c6f3a1874d163755dd732d024764a2131281e"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTk3NTc1OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  Post returnPost = definition.getPosts().get(sequentialPostCounter);\n          \n          \n            \n                  sequentialPostCounter++;\n          \n          \n            \n                  Post returnPost = definition.getPosts().get(sequentialPostCounter++);", "url": "https://github.com/PGMDev/PGM/pull/524#discussion_r435975758", "createdAt": "2020-06-05T14:53:43Z", "author": {"login": "Electroid"}, "path": "core/src/main/java/tc/oc/pgm/flag/Flag.java", "diffHunk": "@@ -231,8 +232,32 @@ public boolean canDropAt(Location location) {\n     }\n   }\n \n+  private int sequentialPostCounter = 0;\n+  private Post returnPost;\n+\n+  public Post getReturnPost(Post post) {\n+    if (post.isSpecifiedPost()) {\n+      return post;\n+    }\n+    if (definition.isSequential()) {\n+      Post returnPost = definition.getPosts().get(sequentialPostCounter);\n+      sequentialPostCounter++;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e16c6f3a1874d163755dd732d024764a2131281e"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTk3NjEzNw==", "bodyText": "Use match.getRandom() instead", "url": "https://github.com/PGMDev/PGM/pull/524#discussion_r435976137", "createdAt": "2020-06-05T14:54:16Z", "author": {"login": "Electroid"}, "path": "core/src/main/java/tc/oc/pgm/flag/Flag.java", "diffHunk": "@@ -231,8 +232,32 @@ public boolean canDropAt(Location location) {\n     }\n   }\n \n+  private int sequentialPostCounter = 0;\n+  private Post returnPost;\n+\n+  public Post getReturnPost(Post post) {\n+    if (post.isSpecifiedPost()) {\n+      return post;\n+    }\n+    if (definition.isSequential()) {\n+      Post returnPost = definition.getPosts().get(sequentialPostCounter);\n+      sequentialPostCounter++;\n+      if (sequentialPostCounter == definition.getPosts().size()) {\n+        sequentialPostCounter = 0;\n+      }\n+      return returnPost;\n+    }\n+    Random random = new Random();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e16c6f3a1874d163755dd732d024764a2131281e"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NDM4ODQy", "url": "https://github.com/PGMDev/PGM/pull/524#pullrequestreview-425438842", "createdAt": "2020-06-05T16:12:59Z", "commit": {"oid": "367b275c5b698d2c3208a3a0de28e1c0ae7f20a2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNjoxMjo1OVrOGf0wGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNjoxMjo1OVrOGf0wGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjAyMzMyMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    TextComponent.of(net.md_5.bungee.api.ChatColor.AQUA + postName),\n          \n          \n            \n                                    TextComponent.of(postName, TextColor.AQUA),", "url": "https://github.com/PGMDev/PGM/pull/524#discussion_r436023322", "createdAt": "2020-06-05T16:12:59Z", "author": {"login": "Electroid"}, "path": "core/src/main/java/tc/oc/pgm/flag/state/Respawning.java", "diffHunk": "@@ -52,15 +56,30 @@ public void enterState() {\n \n     if (!Duration.ZERO.equals(respawnTime)) {\n       // Respawn is delayed\n-      this.flag\n-          .getMatch()\n-          .sendMessage(\n-              new PersonalizedTranslatable(\n-                  \"flag.willRespawn\",\n-                  this.flag.getComponentName(),\n-                  new PersonalizedText(\n-                      PeriodFormats.briefNaturalApproximate(respawnTime),\n-                      net.md_5.bungee.api.ChatColor.AQUA)));\n+\n+      String postName = this.respawnToPost.getPostName();\n+      Component timeComponent =\n+          new PersonalizedText(\n+              PeriodFormats.briefNaturalApproximate(respawnTime),\n+              net.md_5.bungee.api.ChatColor.AQUA);\n+      String timeStr = timeComponent.render().toLegacyText();\n+\n+      if (postName != null) {\n+        this.flag\n+            .getMatch()\n+            .sendMessage(\n+                TranslatableComponent.of(\"flag.willRespawn.named\")\n+                    .args(\n+                        this.flag.getTextName(),\n+                        TextComponent.of(net.md_5.bungee.api.ChatColor.AQUA + postName),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "367b275c5b698d2c3208a3a0de28e1c0ae7f20a2"}, "originalPosition": 55}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NDQwNDcx", "url": "https://github.com/PGMDev/PGM/pull/524#pullrequestreview-425440471", "createdAt": "2020-06-05T16:15:22Z", "commit": {"oid": "367b275c5b698d2c3208a3a0de28e1c0ae7f20a2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNjoxNToyMlrOGf01AQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNjoxNToyMlrOGf01AQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjAyNDU3Nw==", "bodyText": "Also, should this be {0} will respawn at {1} in {2} ?", "url": "https://github.com/PGMDev/PGM/pull/524#discussion_r436024577", "createdAt": "2020-06-05T16:15:22Z", "author": {"login": "Electroid"}, "path": "util/src/main/i18n/templates/gamemode.properties", "diffHunk": "@@ -211,6 +211,11 @@ flag.return = {0} has been returned\n # {1} = duration (e.g. \"5 seconds\")\n flag.willRespawn = {0} will respawn in {1}\n \n+# {0} = flag name\n+# {1} = post name\n+# {2} = duration\n+flag.willRespawn.named = {0} will respawn to {1} in {2}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "367b275c5b698d2c3208a3a0de28e1c0ae7f20a2"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NjM5NTc4", "url": "https://github.com/PGMDev/PGM/pull/524#pullrequestreview-425639578", "createdAt": "2020-06-05T21:37:38Z", "commit": {"oid": "fd88acfd83ef44d9e145f879ffa58ddbdae7cca1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQyMTozNzozOFrOGf-CAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQyMTozNzozOFrOGf-CAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjE3NTM2MA==", "bodyText": "You can just do TranslatableComponent.of(\"key\", arg1, arg2, arg3) instead of TranslatableComponent.of(\"key\").args(arg1, arg2, arg3)", "url": "https://github.com/PGMDev/PGM/pull/524#discussion_r436175360", "createdAt": "2020-06-05T21:37:38Z", "author": {"login": "KingOfSquares"}, "path": "core/src/main/java/tc/oc/pgm/flag/state/Respawning.java", "diffHunk": "@@ -52,15 +57,30 @@ public void enterState() {\n \n     if (!Duration.ZERO.equals(respawnTime)) {\n       // Respawn is delayed\n-      this.flag\n-          .getMatch()\n-          .sendMessage(\n-              new PersonalizedTranslatable(\n-                  \"flag.willRespawn\",\n-                  this.flag.getComponentName(),\n-                  new PersonalizedText(\n-                      PeriodFormats.briefNaturalApproximate(respawnTime),\n-                      net.md_5.bungee.api.ChatColor.AQUA)));\n+\n+      String postName = this.respawnToPost.getPostName();\n+      Component timeComponent =\n+          new PersonalizedText(\n+              PeriodFormats.briefNaturalApproximate(respawnTime),\n+              net.md_5.bungee.api.ChatColor.AQUA);\n+      String timeStr = timeComponent.render().toLegacyText();\n+\n+      if (postName != null) {\n+        this.flag\n+            .getMatch()\n+            .sendMessage(\n+                TranslatableComponent.of(\"flag.willRespawn.named\")\n+                    .args(\n+                        this.flag.getTextName(),\n+                        TextComponent.of(postName, TextColor.AQUA),\n+                        TextComponent.of(timeStr)));\n+      } else {\n+        this.flag\n+            .getMatch()\n+            .sendMessage(\n+                TranslatableComponent.of(\"flag.willRespawn\")\n+                    .args(this.flag.getTextName(), TextComponent.of(timeStr)));\n+      }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd88acfd83ef44d9e145f879ffa58ddbdae7cca1"}, "originalPosition": 64}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7e52a8f511d4e6ad630e9d6d7770026f99efe86", "author": {"user": {"login": "mrcookieunderscore13", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/f7e52a8f511d4e6ad630e9d6d7770026f99efe86", "committedDate": "2020-06-07T01:10:25Z", "message": "Say the name of the post that the flag is respawning to. Added a name attribute to post.\n\nAdded supprot for multiple posts.\nAdded a sequential attribute to <flag> that determines if the respawning flag randomly chooses a post to respawn to or if it cycles through posts.\nAdded the boolean of a specified post, which is when a net sets a new post for the flag to spawn to. If it is a specified post, it doesn't care if the original flag decleration has multiple flags. That means, if the flag respawns at a post with specifiedPost = true, respawning will remain at this post until a net changes it to a new post.\n\nSigned-off-by: mrcookie <athertonmook@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "114c24d84887d45f3b9b2a5f5c896614b0c75628", "author": {"user": {"login": "mrcookieunderscore13", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/114c24d84887d45f3b9b2a5f5c896614b0c75628", "committedDate": "2020-06-05T22:24:54Z", "message": "cleanups\n\nSigned-off-by: mrcookie <athertonmook@gmail.com>"}, "afterCommit": {"oid": "f7e52a8f511d4e6ad630e9d6d7770026f99efe86", "author": {"user": {"login": "mrcookieunderscore13", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/f7e52a8f511d4e6ad630e9d6d7770026f99efe86", "committedDate": "2020-06-07T01:10:25Z", "message": "Say the name of the post that the flag is respawning to. Added a name attribute to post.\n\nAdded supprot for multiple posts.\nAdded a sequential attribute to <flag> that determines if the respawning flag randomly chooses a post to respawn to or if it cycles through posts.\nAdded the boolean of a specified post, which is when a net sets a new post for the flag to spawn to. If it is a specified post, it doesn't care if the original flag decleration has multiple flags. That means, if the flag respawns at a post with specifiedPost = true, respawning will remain at this post until a net changes it to a new post.\n\nSigned-off-by: mrcookie <athertonmook@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1ODUyMTY1", "url": "https://github.com/PGMDev/PGM/pull/524#pullrequestreview-425852165", "createdAt": "2020-06-07T20:50:09Z", "commit": {"oid": "f7e52a8f511d4e6ad630e9d6d7770026f99efe86"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 409, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}