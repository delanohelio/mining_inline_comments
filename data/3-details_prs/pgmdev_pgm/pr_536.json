{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0MTExOTI5", "number": 536, "title": "Fix a few text related issues", "bodyText": "Fix a few text related issues\nMost of these issues come from the recent text refactor, all of which are resolved by this PR \ud83c\udf89\n\nVanished mapmakers are no longer exposed via various map info locations\nFixed issue related to names not rendering decorations (death message bug)\nResolve team chat prefix not using proper aliased name (resolves #534)\n\nScreenshot\n\n\nSigned-off-by: applenick applenick@users.noreply.github.com", "createdAt": "2020-06-14T08:20:30Z", "url": "https://github.com/PGMDev/PGM/pull/536", "merged": true, "mergeCommit": {"oid": "6fe5878d53a56150dea3885b16b029413a6363dc"}, "closed": true, "closedAt": "2020-06-16T15:02:05Z", "author": {"login": "applenick"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcrOkp6AFqTQzMDIzMjk5Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcr2mYGgFqTQzMTU5ODY4OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMjMyOTk3", "url": "https://github.com/PGMDev/PGM/pull/536#pullrequestreview-430232997", "createdAt": "2020-06-14T16:23:31Z", "commit": {"oid": "1ef9d118e2f18b2b064cfc6447da770ea28844eb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQxNjoyMzozMVrOGjeDzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQxNjoyMzozMVrOGjeDzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTg0NTgzOA==", "bodyText": "We should be caching the Componet name. Instead, listen to the team rename event and change it.", "url": "https://github.com/PGMDev/PGM/pull/536#discussion_r439845838", "createdAt": "2020-06-14T16:23:31Z", "author": {"login": "Electroid"}, "path": "core/src/main/java/tc/oc/pgm/teams/Team.java", "diffHunk": "@@ -37,8 +37,6 @@\n   private TeamMatchModule tmm;\n   private JoinMatchModule jmm;\n   protected @Nullable String name = null;\n-  protected @Nullable Component componentName;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ef9d118e2f18b2b064cfc6447da770ea28844eb"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMjM5NjYy", "url": "https://github.com/PGMDev/PGM/pull/536#pullrequestreview-430239662", "createdAt": "2020-06-14T18:03:48Z", "commit": {"oid": "1ef9d118e2f18b2b064cfc6447da770ea28844eb"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQxODowMzo0OFrOGjejig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNFQxODowMzo0OFrOGjejig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTg1Mzk2Mg==", "bodyText": "I think we need to clean up this code. Maybe separate methods for each NameStyle?", "url": "https://github.com/PGMDev/PGM/pull/536#discussion_r439853962", "createdAt": "2020-06-14T18:03:48Z", "author": {"login": "Electroid"}, "path": "util/src/main/java/tc/oc/pgm/util/text/types/PlayerComponent.java", "diffHunk": "@@ -38,32 +38,49 @@ static Component of(@Nullable Player player, String defName, NameStyle style) {\n       return component.build();\n     }\n \n-    Component usernameComponent;\n+    // For name styles that don't allow vanished, make vanished appear offline\n+    if (!style.showVanish && isVanished(player)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ef9d118e2f18b2b064cfc6447da770ea28844eb"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8c46a2513789080b3c174b99651c4c56aa1eed5", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/c8c46a2513789080b3c174b99651c4c56aa1eed5", "committedDate": "2020-06-15T05:45:55Z", "message": "Fix a few text related issues\nIncludes:\n* Vanished mapmakers are no longer exposed via various map info locations\n* Fixes issue related to names not rendering decorations (death message bug)\n* Resolve team chat prefix not using proper aliased name\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1416dd88611a66872841345e0fe9d26762ee8aa2", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/1416dd88611a66872841345e0fe9d26762ee8aa2", "committedDate": "2020-06-15T05:45:56Z", "message": "Add back caching of team name component & prefix\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ca682c2f2cc629d2149daf25515e42f97173c48", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/0ca682c2f2cc629d2149daf25515e42f97173c48", "committedDate": "2020-06-15T05:45:56Z", "message": "Clean up NameStyle and PlayerComponent\n* Removed unused style attributes from NameStyle\n* Split up logic for PlayerComponent formatting\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "26c3c1eab76f24d938f405031416c4e35f9e7b04", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/26c3c1eab76f24d938f405031416c4e35f9e7b04", "committedDate": "2020-06-15T05:42:23Z", "message": "Clean up NameStyle and PlayerComponent\n* Removed unused style attributes from NameStyle\n* Split up logic for PlayerComponent formatting\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}, "afterCommit": {"oid": "0ca682c2f2cc629d2149daf25515e42f97173c48", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/0ca682c2f2cc629d2149daf25515e42f97173c48", "committedDate": "2020-06-15T05:45:56Z", "message": "Clean up NameStyle and PlayerComponent\n* Removed unused style attributes from NameStyle\n* Split up logic for PlayerComponent formatting\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwNjE4MDc4", "url": "https://github.com/PGMDev/PGM/pull/536#pullrequestreview-430618078", "createdAt": "2020-06-15T12:59:13Z", "commit": {"oid": "0ca682c2f2cc629d2149daf25515e42f97173c48"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMjo1OToxNFrOGjxDdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMjo1OToxNFrOGjxDdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDE1NzA0Ng==", "bodyText": "Make all of these functions return Component.Builder to avoid copying Components among the methods. In PlayerComponent.of you can build it before returning it.", "url": "https://github.com/PGMDev/PGM/pull/536#discussion_r440157046", "createdAt": "2020-06-15T12:59:14Z", "author": {"login": "Electroid"}, "path": "util/src/main/java/tc/oc/pgm/util/text/types/PlayerComponent.java", "diffHunk": "@@ -81,6 +68,109 @@ static Component of(CommandSender sender, NameStyle style) {\n         : TranslatableComponent.of(\"misc.console\", TextColor.DARK_AQUA);\n   }\n \n+  // What an offline or vanished username renders as\n+  static Component formatOffline(String name, boolean plain) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ca682c2f2cc629d2149daf25515e42f97173c48"}, "originalPosition": 82}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f27532ce48ae3d6f7a8c6c368eb57b41b4a00af", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/0f27532ce48ae3d6f7a8c6c368eb57b41b4a00af", "committedDate": "2020-06-15T22:10:34Z", "message": "Use component builders in PlayerComponent\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b2e5c2e03275859e01dcb1ebe4d2880f11e1d5a", "author": {"user": {"login": "applenick", "name": "applenick"}}, "url": "https://github.com/PGMDev/PGM/commit/7b2e5c2e03275859e01dcb1ebe4d2880f11e1d5a", "committedDate": "2020-06-15T23:10:43Z", "message": "Remove lombok\n\nSigned-off-by: applenick <applenick@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwNzcxMjY3", "url": "https://github.com/PGMDev/PGM/pull/536#pullrequestreview-430771267", "createdAt": "2020-06-15T15:46:34Z", "commit": {"oid": "0ca682c2f2cc629d2149daf25515e42f97173c48"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNTo0NjozNVrOGj4F-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNTo0NjozNVrOGj4F-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDI3MjM3Nw==", "bodyText": "Why remove this?", "url": "https://github.com/PGMDev/PGM/pull/536#discussion_r440272377", "createdAt": "2020-06-15T15:46:35Z", "author": {"login": "KingOfSquares"}, "path": "util/src/main/java/tc/oc/pgm/util/named/NameStyle.java", "diffHunk": "@@ -5,43 +5,27 @@\n  * only by context, and is independent of the viewer.\n  */\n public enum NameStyle {\n-  PLAIN(false, false, false, false, false, false, false, false, false), // No formatting\n-  COLOR(true, false, false, false, false, false, false, true, false), // Color only\n-  FANCY(\n-      true, true, true, true, true, false, false, true,\n-      false), // Color, flair, friend status, nick status, vanish status\n-  TAB(\n-      true, true, true, true, true, false, true, true,\n-      true), // Color, flair, friend status, nick status, death status, and vanish status\n-  VERBOSE(true, true, true, true, true, true, false, true, true), // Fancy plus nickname\n-  CONCISE(true, true, true, true, true, true, false, false, true); // Verbose, but removes teleport\n+  PLAIN(false, false, false, false, false), // No formatting\n+  COLOR(true, false, false, true, false), // Color and teleport\n+  FANCY(true, true, false, true, false), // Color, flair, and teleport\n+  TAB(true, true, true, false, true), // Color, flair, death status, and vanish\n+  VERBOSE(true, true, false, true, true), // Color, flair, teleport, and vanish\n+  CONCISE(true, true, false, false, true); // Color, flair, and vanish\n \n   public final boolean isColor;\n   public final boolean showPrefix;\n-  public final boolean showSelf; // Bold if self", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ca682c2f2cc629d2149daf25515e42f97173c48"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxNTk4Njg4", "url": "https://github.com/PGMDev/PGM/pull/536#pullrequestreview-431598688", "createdAt": "2020-06-16T15:01:37Z", "commit": {"oid": "7b2e5c2e03275859e01dcb1ebe4d2880f11e1d5a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 415, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}