{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIxMTI2MDQ4", "number": 713, "title": "Re-introduce filtered respawn options", "bodyText": "Might eventually bump proto to get rid of the legacy stuff.", "createdAt": "2020-11-15T01:03:59Z", "url": "https://github.com/PGMDev/PGM/pull/713", "merged": true, "mergeCommit": {"oid": "222d2e5b598272c9a689d7609f295166fdc6e179"}, "closed": true, "closedAt": "2020-11-16T04:12:13Z", "author": {"login": "AustinLMayes"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdcjdVbAH2gAyNTIxMTI2MDQ4OmY2ZmM3ZTk3ZTk3ZWE0NDhhMzEzYTJkMjllNDc1ODI0MDVjOTEzOGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABddh_1lAFqTUzMjg5MjQ4Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f6fc7e97e97ea448a313a2d29e47582405c9138b", "author": {"user": {"login": "AustinLMayes", "name": "Austin Mayes"}}, "url": "https://github.com/PGMDev/PGM/commit/f6fc7e97e97ea448a313a2d29e47582405c9138b", "committedDate": "2020-11-14T22:25:50Z", "message": "Re-introduce filtered respawn options\n\nSigned-off-by: Austin L Mayes <me@austinlm.me>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwOTA4OTc2", "url": "https://github.com/PGMDev/PGM/pull/713#pullrequestreview-530908976", "createdAt": "2020-11-16T04:11:56Z", "commit": {"oid": "f6fc7e97e97ea448a313a2d29e47582405c9138b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyODkyNDgy", "url": "https://github.com/PGMDev/PGM/pull/713#pullrequestreview-532892482", "createdAt": "2020-11-17T23:17:37Z", "commit": {"oid": "f6fc7e97e97ea448a313a2d29e47582405c9138b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMzoxNzozOFrOH1PbQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QyMzoxNzozOFrOH1PbQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTU4OTMxMw==", "bodyText": "This is incorrect, there is not a single respawn child, there's N several respawn children that all generate a default respawn option.\nConsider this code the correct one:\nhttps://github.com/OvercastNetwork/ProjectAres/blob/master/PGM/src/main/java/tc/oc/pgm/spawns/SpawnModule.java#L106", "url": "https://github.com/PGMDev/PGM/pull/713#discussion_r525589313", "createdAt": "2020-11-17T23:17:38Z", "author": {"login": "Pablete1234"}, "path": "core/src/main/java/tc/oc/pgm/spawns/SpawnModule.java", "diffHunk": "@@ -68,29 +74,46 @@ public SpawnModule parse(MapFactory factory, Logger logger, Document doc)\n         throw new InvalidXMLException(\"map must have a single default spawn\", doc);\n       }\n \n-      return new SpawnModule(parser.getDefaultSpawn(), spawns, parseRespawnOptions(doc));\n-    }\n-  }\n+      List<RespawnOptions> respawnOptions = Lists.newArrayList();\n+\n+      for (Element elRespawn :\n+          XMLUtils.flattenElements(doc.getRootElement(), \"respawns\", \"respawn\")) {\n+        respawnOptions.add(parseOptions(elRespawn, true, false));\n+      }\n+\n+      respawnOptions.add(\n+          parseOptions(\n+              doc.getRootElement().getChild(\"respawn\"),\n+              false,\n+              doc.getRootElement().getChild(\"autorespawn\") == null));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6fc7e97e97ea448a313a2d29e47582405c9138b"}, "originalPosition": 62}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 366, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}