{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3NjUzOTA4", "number": 270, "title": "Fix tab list for players on 1.7.10, resolves #16", "bodyText": "", "createdAt": "2020-01-27T19:06:25Z", "url": "https://github.com/PGMDev/PGM/pull/270", "merged": true, "mergeCommit": {"oid": "6c9ff0d649fb9c241fd4d40e0ac9518b94204fea"}, "closed": true, "closedAt": "2020-01-29T18:27:57Z", "author": {"login": "Meeples10"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-gxaXAH2gAyMzY3NjUzOTA4OmY4MGU5ZDY3Y2M3MGVmMThhMjNiODIzNWJmMzA0Yzc5YjliYTc4ZTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb_KPAcAFqTM1MDMyODI0MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f80e9d67cc70ef18a23b8235bf304c79b9ba78e3", "author": {"user": {"login": "Meeples10", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/f80e9d67cc70ef18a23b8235bf304c79b9ba78e3", "committedDate": "2020-01-27T18:09:10Z", "message": "Minor refactoring to be more abstract\n\nSigned-off-by: Meeples10 <8867705+Meeples10@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9202ceb83305db3ef156d19faf1588d00126e9d6", "author": {"user": {"login": "Meeples10", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/9202ceb83305db3ef156d19faf1588d00126e9d6", "committedDate": "2020-01-27T18:58:03Z", "message": "Do not send fake players or custom tab list to 1.7.10 players\n\nSigned-off-by: Meeples10 <8867705+Meeples10@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4OTQ0NzA2", "url": "https://github.com/PGMDev/PGM/pull/270#pullrequestreview-348944706", "createdAt": "2020-01-27T20:13:47Z", "commit": {"oid": "9202ceb83305db3ef156d19faf1588d00126e9d6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMDoxMzo0N1rOFiQDPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMDoxNjozMVrOFiQH3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ1ODg3Ng==", "bodyText": "Create a util for protocol versions, 47 means nothing but Protocol.VERSION_1_7 (or something along those lines) is easy to read", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371458876", "createdAt": "2020-01-27T20:13:47Z", "author": {"login": "Pablete1234"}, "path": "src/main/java/tc/oc/pgm/listeners/LongRangeTNTListener.java", "diffHunk": "@@ -271,7 +272,9 @@ private void removeTNT(Entity entity, boolean explode) {\n \n   @EventHandler(priority = EventPriority.MONITOR, ignoreCancelled = true)\n   public void onPlayerJoin(final PlayerJoinEvent event) {\n-    this.viewsByPlayer.put(event.getPlayer(), new View(event.getPlayer()));\n+    if (ViaUtils.getProtocolVersion(event.getPlayer()) >= 47) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9202ceb83305db3ef156d19faf1588d00126e9d6"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ1OTYzMQ==", "bodyText": "This is a complete and absolute hack. Don't change the current tab view to avoid sending packets to 1.7 players, give them a new no-op view", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371459631", "createdAt": "2020-01-27T20:15:32Z", "author": {"login": "Pablete1234"}, "path": "src/main/java/tc/oc/tablist/TabRender.java", "diffHunk": "@@ -53,6 +54,9 @@ private BaseComponent getContent(TabEntry entry, int index) {\n   }\n \n   private void appendAddition(TabEntry entry, int index) {\n+    if (ViaUtils.getProtocolVersion(this.view.getViewer()) < 47) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9202ceb83305db3ef156d19faf1588d00126e9d6"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ1OTczNg==", "bodyText": "See previous comment", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371459736", "createdAt": "2020-01-27T20:15:45Z", "author": {"login": "Pablete1234"}, "path": "src/main/java/tc/oc/tablist/TabRender.java", "diffHunk": "@@ -154,6 +158,9 @@ public void setHeaderFooter(TabEntry header, TabEntry footer) {\n   }\n \n   public void updateFakeEntity(TabEntry entry, boolean create) {\n+    if (ViaUtils.getProtocolVersion(this.view.getViewer()) < 47) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9202ceb83305db3ef156d19faf1588d00126e9d6"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ2MDA2MA==", "bodyText": "I don't get why this was changed (and the subsequent changes) if you aren't even changing the MatchTabManager for 1.7/1.8+ players.", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371460060", "createdAt": "2020-01-27T20:16:31Z", "author": {"login": "Pablete1234"}, "path": "src/main/java/tc/oc/pgm/PGMImpl.java", "diffHunk": "@@ -143,12 +160,13 @@\n import tc.oc.pgm.tracker.TrackerMatchModule;\n import tc.oc.pgm.wool.WoolModule;\n import tc.oc.pgm.worldborder.WorldBorderModule;\n+import tc.oc.tablist.TabManager;\n import tc.oc.util.SemanticVersion;\n \n public final class PGMImpl extends JavaPlugin implements PGM {\n \n   private MatchManager matchManager;\n-  private MatchTabManager matchTabManager;\n+  private TabManager tabManager;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9202ceb83305db3ef156d19faf1588d00126e9d6"}, "originalPosition": 37}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6dc4d0289d52fe761607bab80c688aeee0d512a0", "author": {"user": {"login": "Meeples10", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/6dc4d0289d52fe761607bab80c688aeee0d512a0", "committedDate": "2020-01-27T21:18:46Z", "message": "Revert \"Minor refactoring to be more abstract\"\n\nThis reverts commit f80e9d67cc70ef18a23b8235bf304c79b9ba78e3.\n\nSigned-off-by: Meeples10 <8867705+Meeples10@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d684dee5c1c24ebfcca282c08622564a03de4cc8", "author": {"user": {"login": "Meeples10", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/d684dee5c1c24ebfcca282c08622564a03de4cc8", "committedDate": "2020-01-27T21:28:34Z", "message": "Add static variables for 1.7.10 and 1.8.x protocol numbers\n\nSigned-off-by: Meeples10 <8867705+Meeples10@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5f607bb719c1ff034d36a10b548fa27cd90267a", "author": {"user": {"login": "Meeples10", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/a5f607bb719c1ff034d36a10b548fa27cd90267a", "committedDate": "2020-01-28T03:54:53Z", "message": "Proper fix for the 1.7.10 tab list\n\nSigned-off-by: Meeples10 <8867705+Meeples10@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NDgzNjIz", "url": "https://github.com/PGMDev/PGM/pull/270#pullrequestreview-349483623", "createdAt": "2020-01-28T15:48:11Z", "commit": {"oid": "a5f607bb719c1ff034d36a10b548fa27cd90267a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNTo0ODoxMVrOFiqI4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNTo0ODoxMVrOFiqI4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTg4NjMwNA==", "bodyText": "This check shouldn't be here, instead, this renderer shouldn't be called for 1.7 clients", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371886304", "createdAt": "2020-01-28T15:48:11Z", "author": {"login": "Pablete1234"}, "path": "src/main/java/tc/oc/tablist/TabRender.java", "diffHunk": "@@ -53,6 +54,9 @@ private BaseComponent getContent(TabEntry entry, int index) {\n   }\n \n   private void appendAddition(TabEntry entry, int index) {\n+    if (ViaUtils.getProtocolVersion(this.view.getViewer()) < ViaUtils.VERSION_1_8) {\n+      return;\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5f607bb719c1ff034d36a10b548fa27cd90267a"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NDkxNDU0", "url": "https://github.com/PGMDev/PGM/pull/270#pullrequestreview-349491454", "createdAt": "2020-01-28T15:57:08Z", "commit": {"oid": "a5f607bb719c1ff034d36a10b548fa27cd90267a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNTo1NzowOVrOFiqgYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNTo1NzowOVrOFiqgYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTg5MjMyMw==", "bodyText": "Same here", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371892323", "createdAt": "2020-01-28T15:57:09Z", "author": {"login": "Pablete1234"}, "path": "src/main/java/tc/oc/tablist/TabRender.java", "diffHunk": "@@ -154,6 +158,9 @@ public void setHeaderFooter(TabEntry header, TabEntry footer) {\n   }\n \n   public void updateFakeEntity(TabEntry entry, boolean create) {\n+    if (ViaUtils.getProtocolVersion(this.view.getViewer()) < ViaUtils.VERSION_1_8) {\n+      return;\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5f607bb719c1ff034d36a10b548fa27cd90267a"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NTAwNDQ0", "url": "https://github.com/PGMDev/PGM/pull/270#pullrequestreview-349500444", "createdAt": "2020-01-28T16:07:30Z", "commit": {"oid": "a5f607bb719c1ff034d36a10b548fa27cd90267a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNjowNzozMFrOFiq6qg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNjowNzozMFrOFiq6qg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTg5OTA1MA==", "bodyText": "May i ask why this is now necessary?", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371899050", "createdAt": "2020-01-28T16:07:30Z", "author": {"login": "Pablete1234"}, "path": "src/main/java/tc/oc/tablist/TabView.java", "diffHunk": "@@ -365,4 +367,10 @@ protected void onRespawn(PlayerRespawnEvent event) {\n   protected void onWorldChange(PlayerChangedWorldEvent event) {\n     if (this.viewer == event.getPlayer()) this.respawnFakeEntities();\n   }\n+\n+  public void onViewerJoinMatch(PlayerJoinMatchEvent event) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5f607bb719c1ff034d36a10b548fa27cd90267a"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NTAxMDg1", "url": "https://github.com/PGMDev/PGM/pull/270#pullrequestreview-349501085", "createdAt": "2020-01-28T16:08:15Z", "commit": {"oid": "a5f607bb719c1ff034d36a10b548fa27cd90267a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNjowODoxNVrOFiq8fA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNjowODoxNVrOFiq8fA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTg5OTUxNg==", "bodyText": "I do not think this is nor should be a listener", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371899516", "createdAt": "2020-01-28T16:08:15Z", "author": {"login": "Pablete1234"}, "path": "src/main/java/tc/oc/tablist/TabView.java", "diffHunk": "@@ -16,7 +18,7 @@\n  * bottom and cannot be seen. The fake team names all start with a '\\u0001' character, so they will\n  * always come before any real teams.\n  */\n-public class TabView {\n+public class TabView implements Listener {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5f607bb719c1ff034d36a10b548fa27cd90267a"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae2bb20f339e79ab71c0e7934d70aa33c9869d82", "author": {"user": {"login": "Meeples10", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/ae2bb20f339e79ab71c0e7934d70aa33c9869d82", "committedDate": "2020-01-28T16:49:23Z", "message": "Revert unneeded changes\n\nSigned-off-by: Meeples10 <8867705+Meeples10@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "652d4e6b3cd8cfa1e83e44e672a08e117886777f", "author": {"user": {"login": "Meeples10", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/652d4e6b3cd8cfa1e83e44e672a08e117886777f", "committedDate": "2020-01-28T18:49:21Z", "message": "Remove unneeded logic from LegacyMatchTabView\n\nSigned-off-by: Meeples10 <8867705+Meeples10@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NjE4MTQ3", "url": "https://github.com/PGMDev/PGM/pull/270#pullrequestreview-349618147", "createdAt": "2020-01-28T18:51:51Z", "commit": {"oid": "652d4e6b3cd8cfa1e83e44e672a08e117886777f"}, "state": "COMMENTED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxODo1MTo1MVrOFiwilg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxOTowMDo0OVrOFiw01Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk5MTE5MA==", "bodyText": "Add a comment explaining this is a no-op tab list intended for legacy players", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371991190", "createdAt": "2020-01-28T18:51:51Z", "author": {"login": "Pablete1234"}, "path": "src/main/java/tc/oc/pgm/tablist/LegacyMatchTabView.java", "diffHunk": "@@ -0,0 +1,27 @@\n+package tc.oc.pgm.tablist;\n+\n+import org.bukkit.entity.Player;\n+import tc.oc.pgm.events.PlayerJoinMatchEvent;\n+import tc.oc.tablist.LegacyTabView;\n+import tc.oc.util.collection.DefaultProvider;\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "652d4e6b3cd8cfa1e83e44e672a08e117886777f"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk5MTgxNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                if (view != null && !(view instanceof LegacyMatchTabView)) {\n          \n          \n            \n                if (view != null && !(view instanceof Listener)) {\n          \n      \n    \n    \n  \n\nWould be more future-proof and need a less specific cast", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371991816", "createdAt": "2020-01-28T18:53:04Z", "author": {"login": "Pablete1234"}, "path": "src/main/java/tc/oc/pgm/tablist/MatchTabManager.java", "diffHunk": "@@ -86,15 +87,15 @@ public void run() {\n   }\n \n   @Override\n-  public @Nullable MatchTabView getViewOrNull(Player viewer) {\n-    return (MatchTabView) super.getViewOrNull(viewer);\n+  public @Nullable TabView getViewOrNull(Player viewer) {\n+    return (TabView) super.getViewOrNull(viewer);\n   }\n \n   @Override\n-  public @Nullable MatchTabView getView(Player viewer) {\n-    MatchTabView view = (MatchTabView) super.getView(viewer);\n-    if (view != null) {\n-      this.registerEvents(view);\n+  public @Nullable TabView getView(Player viewer) {\n+    TabView view = super.getView(viewer);\n+    if (view != null && !(view instanceof LegacyMatchTabView)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "652d4e6b3cd8cfa1e83e44e672a08e117886777f"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk5MTkwMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  this.registerEvents((MatchTabView) view);\n          \n          \n            \n                  this.registerEvents((Listener) view);", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371991901", "createdAt": "2020-01-28T18:53:13Z", "author": {"login": "Pablete1234"}, "path": "src/main/java/tc/oc/pgm/tablist/MatchTabManager.java", "diffHunk": "@@ -86,15 +87,15 @@ public void run() {\n   }\n \n   @Override\n-  public @Nullable MatchTabView getViewOrNull(Player viewer) {\n-    return (MatchTabView) super.getViewOrNull(viewer);\n+  public @Nullable TabView getViewOrNull(Player viewer) {\n+    return (TabView) super.getViewOrNull(viewer);\n   }\n \n   @Override\n-  public @Nullable MatchTabView getView(Player viewer) {\n-    MatchTabView view = (MatchTabView) super.getView(viewer);\n-    if (view != null) {\n-      this.registerEvents(view);\n+  public @Nullable TabView getView(Player viewer) {\n+    TabView view = super.getView(viewer);\n+    if (view != null && !(view instanceof LegacyMatchTabView)) {\n+      this.registerEvents((MatchTabView) view);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "652d4e6b3cd8cfa1e83e44e672a08e117886777f"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk5MzU5OA==", "bodyText": "If it's not a LegacyMatchTabView, it must be MatchTabView? Bad assumption to make.\nConsider adding a generic ListeningTabView interface or something along those lines that both legacy and match can implement, since the onViewerJoinMatch method is actually present on both.", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371993598", "createdAt": "2020-01-28T18:56:39Z", "author": {"login": "Pablete1234"}, "path": "src/main/java/tc/oc/pgm/tablist/MatchTabManager.java", "diffHunk": "@@ -149,8 +150,10 @@ public void onMatchUnload(MatchUnloadEvent event) {\n   /** Delegated events */\n   @EventHandler(priority = EventPriority.MONITOR, ignoreCancelled = true)\n   public void onJoinMatch(PlayerJoinMatchEvent event) {\n-    MatchTabView view = this.getView(event.getPlayer().getBukkit());\n-    if (view != null) view.onViewerJoinMatch(event);\n+    TabView view = this.getView(event.getPlayer().getBukkit());\n+    if (view != null && !(view instanceof LegacyMatchTabView)) {\n+      ((MatchTabView) view).onViewerJoinMatch(event);\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "652d4e6b3cd8cfa1e83e44e672a08e117886777f"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk5Mzc1MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                return 0;\n          \n          \n            \n                return 3;", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371993751", "createdAt": "2020-01-28T18:56:56Z", "author": {"login": "Pablete1234"}, "path": "src/main/java/tc/oc/tablist/LegacyTabView.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package tc.oc.tablist;\n+\n+import javax.annotation.Nullable;\n+import org.bukkit.entity.Player;\n+import org.bukkit.event.Listener;\n+import tc.oc.pgm.events.PlayerJoinMatchEvent;\n+import tc.oc.util.collection.DefaultProvider;\n+\n+/**\n+ * The pre-1.8 tab list is severely limited. This is essentially a no-op {@link TabView} for pre-1.8\n+ * clients.\n+ */\n+public class LegacyTabView extends TabView implements Listener {\n+\n+  public static class Factory implements DefaultProvider<Player, LegacyTabView> {\n+    @Override\n+    public LegacyTabView get(Player key) {\n+      return new LegacyTabView(key);\n+    }\n+  }\n+\n+  // The single player seeing this view\n+  private final Player viewer;\n+\n+  protected @Nullable TabManager manager;\n+\n+  public LegacyTabView(Player viewer) {\n+    super(viewer);\n+    this.viewer = viewer;\n+  }\n+\n+  private void assertEnabled() {\n+    if (manager == null)\n+      throw new IllegalStateException(getClass().getSimpleName() + \" is not enabled\");\n+  }\n+\n+  public Player getViewer() {\n+    return viewer;\n+  }\n+\n+  public int getWidth() {\n+    return 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "652d4e6b3cd8cfa1e83e44e672a08e117886777f"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk5Mzk0Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                return 0;\n          \n          \n            \n                return 20;\n          \n      \n    \n    \n  \n\nNot sure on this one, may be 30?", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371993947", "createdAt": "2020-01-28T18:57:17Z", "author": {"login": "Pablete1234"}, "path": "src/main/java/tc/oc/tablist/LegacyTabView.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package tc.oc.tablist;\n+\n+import javax.annotation.Nullable;\n+import org.bukkit.entity.Player;\n+import org.bukkit.event.Listener;\n+import tc.oc.pgm.events.PlayerJoinMatchEvent;\n+import tc.oc.util.collection.DefaultProvider;\n+\n+/**\n+ * The pre-1.8 tab list is severely limited. This is essentially a no-op {@link TabView} for pre-1.8\n+ * clients.\n+ */\n+public class LegacyTabView extends TabView implements Listener {\n+\n+  public static class Factory implements DefaultProvider<Player, LegacyTabView> {\n+    @Override\n+    public LegacyTabView get(Player key) {\n+      return new LegacyTabView(key);\n+    }\n+  }\n+\n+  // The single player seeing this view\n+  private final Player viewer;\n+\n+  protected @Nullable TabManager manager;\n+\n+  public LegacyTabView(Player viewer) {\n+    super(viewer);\n+    this.viewer = viewer;\n+  }\n+\n+  private void assertEnabled() {\n+    if (manager == null)\n+      throw new IllegalStateException(getClass().getSimpleName() + \" is not enabled\");\n+  }\n+\n+  public Player getViewer() {\n+    return viewer;\n+  }\n+\n+  public int getWidth() {\n+    return 0;\n+  }\n+\n+  public int getHeight() {\n+    return 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "652d4e6b3cd8cfa1e83e44e672a08e117886777f"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk5NDAyNA==", "bodyText": "width * height", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371994024", "createdAt": "2020-01-28T18:57:24Z", "author": {"login": "Pablete1234"}, "path": "src/main/java/tc/oc/tablist/LegacyTabView.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package tc.oc.tablist;\n+\n+import javax.annotation.Nullable;\n+import org.bukkit.entity.Player;\n+import org.bukkit.event.Listener;\n+import tc.oc.pgm.events.PlayerJoinMatchEvent;\n+import tc.oc.util.collection.DefaultProvider;\n+\n+/**\n+ * The pre-1.8 tab list is severely limited. This is essentially a no-op {@link TabView} for pre-1.8\n+ * clients.\n+ */\n+public class LegacyTabView extends TabView implements Listener {\n+\n+  public static class Factory implements DefaultProvider<Player, LegacyTabView> {\n+    @Override\n+    public LegacyTabView get(Player key) {\n+      return new LegacyTabView(key);\n+    }\n+  }\n+\n+  // The single player seeing this view\n+  private final Player viewer;\n+\n+  protected @Nullable TabManager manager;\n+\n+  public LegacyTabView(Player viewer) {\n+    super(viewer);\n+    this.viewer = viewer;\n+  }\n+\n+  private void assertEnabled() {\n+    if (manager == null)\n+      throw new IllegalStateException(getClass().getSimpleName() + \" is not enabled\");\n+  }\n+\n+  public Player getViewer() {\n+    return viewer;\n+  }\n+\n+  public int getWidth() {\n+    return 0;\n+  }\n+\n+  public int getHeight() {\n+    return 0;\n+  }\n+\n+  public int getSize() {\n+    return 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "652d4e6b3cd8cfa1e83e44e672a08e117886777f"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk5NTg2MQ==", "bodyText": "I think you only need to override the render() method to no-op here, everything else either isn't even used nor overriding (like onViewerJoinMatch) or you shouldn't be overriding anyways", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r371995861", "createdAt": "2020-01-28T19:00:49Z", "author": {"login": "Pablete1234"}, "path": "src/main/java/tc/oc/tablist/LegacyTabView.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package tc.oc.tablist;\n+\n+import javax.annotation.Nullable;\n+import org.bukkit.entity.Player;\n+import org.bukkit.event.Listener;\n+import tc.oc.pgm.events.PlayerJoinMatchEvent;\n+import tc.oc.util.collection.DefaultProvider;\n+\n+/**\n+ * The pre-1.8 tab list is severely limited. This is essentially a no-op {@link TabView} for pre-1.8\n+ * clients.\n+ */\n+public class LegacyTabView extends TabView implements Listener {\n+\n+  public static class Factory implements DefaultProvider<Player, LegacyTabView> {\n+    @Override\n+    public LegacyTabView get(Player key) {\n+      return new LegacyTabView(key);\n+    }\n+  }\n+\n+  // The single player seeing this view\n+  private final Player viewer;\n+\n+  protected @Nullable TabManager manager;\n+\n+  public LegacyTabView(Player viewer) {\n+    super(viewer);\n+    this.viewer = viewer;\n+  }\n+\n+  private void assertEnabled() {\n+    if (manager == null)\n+      throw new IllegalStateException(getClass().getSimpleName() + \" is not enabled\");\n+  }\n+\n+  public Player getViewer() {\n+    return viewer;\n+  }\n+\n+  public int getWidth() {\n+    return 0;\n+  }\n+\n+  public int getHeight() {\n+    return 0;\n+  }\n+\n+  public int getSize() {\n+    return 0;\n+  }\n+\n+  /** Take control of the viewer's player list */\n+  public void enable(TabManager manager) {\n+    if (this.manager != null) disable();\n+    this.manager = manager;\n+    this.assertEnabled();\n+  }\n+\n+  /** Tear down the display and return control the the viewer's player list to settings */\n+  public void disable() {\n+    if (this.manager != null) {\n+      this.manager.removeView(this);\n+      this.manager = null;\n+    }\n+  }\n+\n+  public void setSlot(int x, int y, @Nullable TabEntry entry) {}\n+\n+  public void setHeader(@Nullable TabEntry entry) {}\n+\n+  public void setFooter(@Nullable TabEntry entry) {}\n+\n+  public void render() {}\n+\n+  public void renderLayout(TabRender render) {}\n+\n+  public void renderContent(TabRender render) {}\n+\n+  public void markSlotsClean() {}\n+\n+  public void renderHeaderFooter(TabRender render, boolean force) {}\n+\n+  public void onViewerJoinMatch(PlayerJoinMatchEvent event) {}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "652d4e6b3cd8cfa1e83e44e672a08e117886777f"}, "originalPosition": 84}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6de1d2bc0bff0cbc6673c3b6a4691390fbb64998", "author": {"user": {"login": "Meeples10", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/6de1d2bc0bff0cbc6673c3b6a4691390fbb64998", "committedDate": "2020-01-28T20:27:31Z", "message": "Make changes suggested by Pablo\n\nSigned-off-by: Meeples10 <8867705+Meeples10@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5NzkxMTMx", "url": "https://github.com/PGMDev/PGM/pull/270#pullrequestreview-349791131", "createdAt": "2020-01-29T00:09:12Z", "commit": {"oid": "6de1d2bc0bff0cbc6673c3b6a4691390fbb64998"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQwMDowOToxMlrOFi463A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQwMDowOTozNFrOFi47Kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjEyODQ3Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                if (view instanceof ListeningTabView) {\n          \n          \n            \n                if (view != null && view instanceof ListeningTabView) {", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r372128476", "createdAt": "2020-01-29T00:09:12Z", "author": {"login": "Pablete1234"}, "path": "src/main/java/tc/oc/pgm/tablist/MatchTabManager.java", "diffHunk": "@@ -94,8 +95,8 @@ public void run() {\n   @Override\n   public @Nullable TabView getView(Player viewer) {\n     TabView view = super.getView(viewer);\n-    if (view != null && !(view instanceof LegacyMatchTabView)) {\n-      this.registerEvents((MatchTabView) view);\n+    if (view instanceof ListeningTabView) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6de1d2bc0bff0cbc6673c3b6a4691390fbb64998"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjEyODU1NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                if (view instanceof ListeningTabView) {\n          \n          \n            \n                if (view != null && view instanceof ListeningTabView) {", "url": "https://github.com/PGMDev/PGM/pull/270#discussion_r372128555", "createdAt": "2020-01-29T00:09:34Z", "author": {"login": "Pablete1234"}, "path": "src/main/java/tc/oc/pgm/tablist/MatchTabManager.java", "diffHunk": "@@ -151,8 +152,8 @@ public void onMatchUnload(MatchUnloadEvent event) {\n   @EventHandler(priority = EventPriority.MONITOR, ignoreCancelled = true)\n   public void onJoinMatch(PlayerJoinMatchEvent event) {\n     TabView view = this.getView(event.getPlayer().getBukkit());\n-    if (view != null && !(view instanceof LegacyMatchTabView)) {\n-      ((MatchTabView) view).onViewerJoinMatch(event);\n+    if (view instanceof ListeningTabView) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6de1d2bc0bff0cbc6673c3b6a4691390fbb64998"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5ODA2ODYx", "url": "https://github.com/PGMDev/PGM/pull/270#pullrequestreview-349806861", "createdAt": "2020-01-29T01:01:08Z", "commit": {"oid": "6de1d2bc0bff0cbc6673c3b6a4691390fbb64998"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e35be5814b1d5047127ee727f332cca1972b3b3", "author": {"user": {"login": "Pablete1234", "name": "Pablo Herrera"}}, "url": "https://github.com/PGMDev/PGM/commit/9e35be5814b1d5047127ee727f332cca1972b3b3", "committedDate": "2020-01-29T01:23:12Z", "message": "Merge branch 'master' into fix-tab-list"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00f3ab243524310a5915d145fbe4d0a98143cec5", "author": {"user": {"login": "Meeples10", "name": null}}, "url": "https://github.com/PGMDev/PGM/commit/00f3ab243524310a5915d145fbe4d0a98143cec5", "committedDate": "2020-01-29T17:36:08Z", "message": "Merge branch 'master' into fix-tab-list"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwMzI4MjQx", "url": "https://github.com/PGMDev/PGM/pull/270#pullrequestreview-350328241", "createdAt": "2020-01-29T18:27:36Z", "commit": {"oid": "00f3ab243524310a5915d145fbe4d0a98143cec5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 554, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}