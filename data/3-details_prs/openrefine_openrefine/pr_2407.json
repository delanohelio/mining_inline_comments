{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3OTM3Nzk2", "number": 2407, "title": "Fixes no selected record element error", "bodyText": "Closes #2402", "createdAt": "2020-03-13T19:20:37Z", "url": "https://github.com/OpenRefine/OpenRefine/pull/2407", "merged": true, "mergeCommit": {"oid": "fd2460914c0ea5aae6cd79bb27257e364d8d7e06"}, "closed": true, "closedAt": "2020-03-14T14:36:55Z", "author": {"login": "lisa761"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNVUx2AH2gAyMzg3OTM3Nzk2OmQwMTMwOWY0MGY2M2Y1ZmIzZWQ4ZjVjZWY4YmI5OGMwOTc2YjZhNzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcNl54AAFqTM3NDczMDk5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d01309f40f63f5fb3ed8f5cef8bb98c0976b6a77", "author": {"user": {"login": "lisa761", "name": "Lisa Chandra"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/d01309f40f63f5fb3ed8f5cef8bb98c0976b6a77", "committedDate": "2020-03-13T19:17:48Z", "message": "fixes no record element error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0NzA5OTY5", "url": "https://github.com/OpenRefine/OpenRefine/pull/2407#pullrequestreview-374709969", "createdAt": "2020-03-14T09:25:16Z", "commit": {"oid": "d01309f40f63f5fb3ed8f5cef8bb98c0976b6a77"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQwOToyNToxNlrOF2Yo-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQwOToyNToxNlrOF2Yo-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU3MTEzMQ==", "bodyText": "I think it'd be cleaner if this was not a global variable, I would store it as an attribute of the importer.", "url": "https://github.com/OpenRefine/OpenRefine/pull/2407#discussion_r392571131", "createdAt": "2020-03-14T09:25:16Z", "author": {"login": "wetneb"}, "path": "main/webapp/modules/core/scripts/index/parser-interfaces/xml-parser-ui.js", "diffHunk": "@@ -31,6 +31,8 @@ OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n \n  */\n \n+var recordElementSelected = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d01309f40f63f5fb3ed8f5cef8bb98c0976b6a77"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45a4d1a2fc9fcd8d953e4ba8985f31478d995ab9", "author": {"user": {"login": "lisa761", "name": "Lisa Chandra"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/45a4d1a2fc9fcd8d953e4ba8985f31478d995ab9", "committedDate": "2020-03-14T09:35:33Z", "message": "made relevant changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0NzEwODg1", "url": "https://github.com/OpenRefine/OpenRefine/pull/2407#pullrequestreview-374710885", "createdAt": "2020-03-14T09:43:48Z", "commit": {"oid": "45a4d1a2fc9fcd8d953e4ba8985f31478d995ab9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQwOTo0Mzo0OFrOF2YtIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQwOTo0Mzo0OFrOF2YtIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU3MjE5NA==", "bodyText": "Oh, and that's clearly something we want to localize using i18n. And perhaps avoid the exclamation mark in the message.", "url": "https://github.com/OpenRefine/OpenRefine/pull/2407#discussion_r392572194", "createdAt": "2020-03-14T09:43:48Z", "author": {"login": "wetneb"}, "path": "main/webapp/modules/core/scripts/index/parser-interfaces/xml-parser-ui.js", "diffHunk": "@@ -257,6 +260,11 @@ Refine.XmlParserUI.prototype._setRecordPath = function(path) {\n \n Refine.XmlParserUI.prototype._updatePreview = function() {\n   var self = this;\n+  \n+  if(!self._recordElementSelected) {\n+    alert(\"No record element selected! Please select one first.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45a4d1a2fc9fcd8d953e4ba8985f31478d995ab9"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47f9968af4e7b314e7715493aa9d8526301ca20e", "author": {"user": {"login": "lisa761", "name": "Lisa Chandra"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/47f9968af4e7b314e7715493aa9d8526301ca20e", "committedDate": "2020-03-14T10:26:23Z", "message": "alert message from i18n instead"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0NzEzMTE0", "url": "https://github.com/OpenRefine/OpenRefine/pull/2407#pullrequestreview-374713114", "createdAt": "2020-03-14T10:30:56Z", "commit": {"oid": "47f9968af4e7b314e7715493aa9d8526301ca20e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxMDozMDo1NlrOF2Y3qg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxMDozMDo1NlrOF2Y3qg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU3NDg5MA==", "bodyText": "It's still not clear to me why we have to duplicate the existing check, where the same message is used?", "url": "https://github.com/OpenRefine/OpenRefine/pull/2407#discussion_r392574890", "createdAt": "2020-03-14T10:30:56Z", "author": {"login": "wetneb"}, "path": "main/webapp/modules/core/scripts/index/parser-interfaces/xml-parser-ui.js", "diffHunk": "@@ -262,7 +262,7 @@ Refine.XmlParserUI.prototype._updatePreview = function() {\n   var self = this;\n   \n   if(!self._recordElementSelected) {\n-    alert(\"No record element selected! Please select one first.\");\n+    window.alert($.i18n('core-index-import/warning-record-path'));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "47f9968af4e7b314e7715493aa9d8526301ca20e"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18277ef4e692257b4c3eb0b126540853350fe815", "author": {"user": {"login": "lisa761", "name": "Lisa Chandra"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/18277ef4e692257b4c3eb0b126540853350fe815", "committedDate": "2020-03-14T14:05:46Z", "message": "removed the boolean variable"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0NzI5NjU2", "url": "https://github.com/OpenRefine/OpenRefine/pull/2407#pullrequestreview-374729656", "createdAt": "2020-03-14T14:11:46Z", "commit": {"oid": "18277ef4e692257b4c3eb0b126540853350fe815"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNDoxMTo0NlrOF2Z3uA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQxNDoxMTo0NlrOF2Z3uA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5MTI4OA==", "bodyText": "I did this because if I did setRecordPath, the flow reaches updatePreview first and then the same thing happened. Also I let the check in confirmCreateProject be beacuse that would be required when someone directly clicks that button.", "url": "https://github.com/OpenRefine/OpenRefine/pull/2407#discussion_r392591288", "createdAt": "2020-03-14T14:11:46Z", "author": {"login": "lisa761"}, "path": "main/webapp/modules/core/scripts/index/parser-interfaces/xml-parser-ui.js", "diffHunk": "@@ -131,6 +131,7 @@ Refine.XmlParserUI.prototype._initialize = function() {\n     this._optionContainerElmts.includeFileSourcesCheckbox.prop(\"checked\", true);\n   }\n   this._optionContainerElmts.pickRecordElementsButton.click(function() {\n+    self._config.recordPath = undefined;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18277ef4e692257b4c3eb0b126540853350fe815"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0NzMwOTk3", "url": "https://github.com/OpenRefine/OpenRefine/pull/2407#pullrequestreview-374730997", "createdAt": "2020-03-14T14:36:48Z", "commit": {"oid": "18277ef4e692257b4c3eb0b126540853350fe815"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3314, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}