{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY0ODYxMDAz", "number": 2296, "title": "[#2280] Add fill down and blank down operations for all columns", "bodyText": "Resolves #2280\nThere are use cases where users would want to apply\nfill down/blank down operations for all columns. Users\nwould have to toggle the fill down/blank down operation\nfor each column in order to achieve that.\n\nLet's add a fill down/blank down operation under the \n'All' > 'Edit Columns' drop down that applies the operation \nfor all columns at once which will save the users' effort.", "createdAt": "2020-01-20T14:26:06Z", "url": "https://github.com/OpenRefine/OpenRefine/pull/2296", "merged": true, "mergeCommit": {"oid": "5894041943ded044feda91691889d821c0c9700c"}, "closed": true, "closedAt": "2020-01-27T09:24:09Z", "author": {"login": "jamessspanggg"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb8NUkWgH2gAyMzY0ODYxMDAzOjkwNjI4ZTZhYjBkM2NhNGMxYzRlYjZjZmY0YTMyYzcwM2FkYTQ3MDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-ZQXQAFqTM0ODUyMjc2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "90628e6ab0d3ca4c1c4eb6cff4a32c703ada4704", "author": {"user": {"login": "jamessspanggg", "name": "James Pang"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/90628e6ab0d3ca4c1c4eb6cff4a32c703ada4704", "committedDate": "2020-01-20T14:21:37Z", "message": "Add fill down and blank down operations for all columns"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73936183bb88c446c512f8161307a3912b52d5e9", "author": {"user": {"login": "jamessspanggg", "name": "James Pang"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/73936183bb88c446c512f8161307a3912b52d5e9", "committedDate": "2020-01-20T15:20:14Z", "message": "Refactor to individual functions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1NDQwNjIy", "url": "https://github.com/OpenRefine/OpenRefine/pull/2296#pullrequestreview-345440622", "createdAt": "2020-01-20T17:00:24Z", "commit": {"oid": "73936183bb88c446c512f8161307a3912b52d5e9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQxNzowMDoyNFrOFfkpHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQxNzowMDoyNFrOFfkpHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODY1MDUyNw==", "bodyText": "I think it is fine to use the existing operations to implement this (so, resulting in multiple steps in the history).\nHowever, doing a for loop like this will fire up HTTP queries to the backend in no particular order: the first column could well end up being filled down after the first one! That is a problem since the final state of the table can depend on the order of execution of these operations, if we are in records mode (simply because filling down the first column will change records, and filling down on another column in records mode respects the records boundaries).\nSo, the code should be adapted to use callbacks instead: the second column should only be filled down once the first one has. The postCoreProcess method accepts callbacks which can be used for that. Unfortunately that is going to lead to less readable code but I don't see how to avoid that to ensure correctness.", "url": "https://github.com/OpenRefine/OpenRefine/pull/2296#discussion_r368650527", "createdAt": "2020-01-20T17:00:24Z", "author": {"login": "wetneb"}, "path": "main/webapp/modules/core/scripts/views/data-table/data-table-view.js", "diffHunk": "@@ -863,6 +874,32 @@ DataTableView.prototype._createSortingMenu = function(elmt) {\n   MenuSystem.createAndShowStandardMenu(items, elmt, { horizontal: false });\n };\n \n+var doAllFillDown = function() {\n+  for (var i = 0; i < theProject.columnModel.columns.length; i++) {\n+    Refine.postCoreProcess(\n+        \"fill-down\",\n+        {\n+          columnName: theProject.columnModel.columns[i].name\n+        },\n+        null,\n+        { modelsChanged: true }\n+    );\n+  }\n+};", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73936183bb88c446c512f8161307a3912b52d5e9"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7d4731f80c7a25de4bd8a4af8a4b7c634cbe957", "author": {"user": {"login": "jamessspanggg", "name": "James Pang"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/d7d4731f80c7a25de4bd8a4af8a4b7c634cbe957", "committedDate": "2020-01-20T17:56:03Z", "message": "Utilise callbacks to chain fill/blank down operations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a19f859d2e94eb7d337d15e2cfcf34999f2cb521", "author": {"user": {"login": "jamessspanggg", "name": "James Pang"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/a19f859d2e94eb7d337d15e2cfcf34999f2cb521", "committedDate": "2020-01-27T09:14:57Z", "message": "Reverse order of fill down operation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4NTIyNzYw", "url": "https://github.com/OpenRefine/OpenRefine/pull/2296#pullrequestreview-348522760", "createdAt": "2020-01-27T09:23:44Z", "commit": {"oid": "a19f859d2e94eb7d337d15e2cfcf34999f2cb521"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3275, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}