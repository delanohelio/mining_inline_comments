{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyNzg2NjU3", "number": 2469, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwNzoxNToxMlrODqqq9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwNzoxNjoxOFrODqqr9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2MDY1OTExOnYy", "diffSide": "RIGHT", "path": "extensions/wikidata/src/org/openrefine/wikidata/editing/EditBatchProcessor.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwNzoxNToxMlrOF6jXaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxNzoyNzoyNlrOF67Udg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njk0MTE2MQ==", "bodyText": "I would replace \"maxLag\" by something a bit more specific, to make sure there is no collision with anything else: for instance \"wikibase:upload:maxLag\".", "url": "https://github.com/OpenRefine/OpenRefine/pull/2469#discussion_r396941161", "createdAt": "2020-03-24T07:15:12Z", "author": {"login": "wetneb"}, "path": "extensions/wikidata/src/org/openrefine/wikidata/editing/EditBatchProcessor.java", "diffHunk": "@@ -67,6 +70,14 @@\n     private int globalCursor;\n     private Map<String, EntityDocument> currentDocs;\n     private int batchSize;\n+    private static final String MAX_LAG_KEY = \"maxLag\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af09b05d502157d9b4314ec71adec79e1d7e550a"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzMzMzYyMg==", "bodyText": "will improve the naming.", "url": "https://github.com/OpenRefine/OpenRefine/pull/2469#discussion_r397333622", "createdAt": "2020-03-24T17:27:26Z", "author": {"login": "james-cui"}, "path": "extensions/wikidata/src/org/openrefine/wikidata/editing/EditBatchProcessor.java", "diffHunk": "@@ -67,6 +70,14 @@\n     private int globalCursor;\n     private Map<String, EntityDocument> currentDocs;\n     private int batchSize;\n+    private static final String MAX_LAG_KEY = \"maxLag\";", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njk0MTE2MQ=="}, "originalCommit": {"oid": "af09b05d502157d9b4314ec71adec79e1d7e550a"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2MDY2MTY3OnYy", "diffSide": "RIGHT", "path": "extensions/wikidata/src/org/openrefine/wikidata/editing/EditBatchProcessor.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwNzoxNjoxOFrOF6jY_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxNzoyODozMFrOF67Xdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njk0MTU2NA==", "bodyText": "What happens if parseInt fails?\u00a0 Should it fall back to the default?", "url": "https://github.com/OpenRefine/OpenRefine/pull/2469#discussion_r396941564", "createdAt": "2020-03-24T07:16:18Z", "author": {"login": "wetneb"}, "path": "extensions/wikidata/src/org/openrefine/wikidata/editing/EditBatchProcessor.java", "diffHunk": "@@ -67,6 +70,14 @@\n     private int globalCursor;\n     private Map<String, EntityDocument> currentDocs;\n     private int batchSize;\n+    private static final String MAX_LAG_KEY = \"maxLag\";\n+    private static final int MAX_LAG_DEFAULT = 5000;      // 5 second default maxLag\n+    private PreferenceStore prefStore = ProjectManager.singleton.getPreferenceStore();\n+\n+    private int getMaxLag() {\n+        return prefStore.get(MAX_LAG_KEY) == null ? MAX_LAG_DEFAULT :\n+                Integer.parseInt((String) prefStore.get(MAX_LAG_KEY));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af09b05d502157d9b4314ec71adec79e1d7e550a"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzMzNDM5MQ==", "bodyText": "good catch, I should wrap the code in a try catch and use default if user put something invalid.", "url": "https://github.com/OpenRefine/OpenRefine/pull/2469#discussion_r397334391", "createdAt": "2020-03-24T17:28:30Z", "author": {"login": "james-cui"}, "path": "extensions/wikidata/src/org/openrefine/wikidata/editing/EditBatchProcessor.java", "diffHunk": "@@ -67,6 +70,14 @@\n     private int globalCursor;\n     private Map<String, EntityDocument> currentDocs;\n     private int batchSize;\n+    private static final String MAX_LAG_KEY = \"maxLag\";\n+    private static final int MAX_LAG_DEFAULT = 5000;      // 5 second default maxLag\n+    private PreferenceStore prefStore = ProjectManager.singleton.getPreferenceStore();\n+\n+    private int getMaxLag() {\n+        return prefStore.get(MAX_LAG_KEY) == null ? MAX_LAG_DEFAULT :\n+                Integer.parseInt((String) prefStore.get(MAX_LAG_KEY));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njk0MTU2NA=="}, "originalCommit": {"oid": "af09b05d502157d9b4314ec71adec79e1d7e550a"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2807, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}