{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwNDQzMzUy", "number": 2818, "title": "Implemented SingleValue Scrutinizer tests using mocks", "bodyText": "Updated test class & added inner class to the scrutinizer", "createdAt": "2020-06-26T08:06:24Z", "url": "https://github.com/OpenRefine/OpenRefine/pull/2818", "merged": true, "mergeCommit": {"oid": "46c510b5e24b181f1d7fb057be5751bdd2c14332"}, "closed": true, "closedAt": "2020-06-29T13:59:54Z", "author": {"login": "darecoder"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcu-z6ggFqTQzODEwMTM1NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwBgdCAFqTQzOTE3MjU4Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MTAxMzU0", "url": "https://github.com/OpenRefine/OpenRefine/pull/2818#pullrequestreview-438101354", "createdAt": "2020-06-26T08:17:19Z", "commit": {"oid": "17654afe3271aa4418cf7969180e715bcafc20aa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwODoxNzoxOVrOGpX-nA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwODoxNzoxOVrOGpX-nA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjAzNzY2MA==", "bodyText": "I think all exceptions can accept constraints, so how about we pull the parsing code in this class to a common superclass of all the inner classes you have been introducing?", "url": "https://github.com/OpenRefine/OpenRefine/pull/2818#discussion_r446037660", "createdAt": "2020-06-26T08:17:19Z", "author": {"login": "wetneb"}, "path": "extensions/wikidata/src/org/openrefine/wikidata/qa/scrutinizers/SingleValueScrutinizer.java", "diffHunk": "@@ -44,6 +49,24 @@\n public class SingleValueScrutinizer extends EditScrutinizer {\n \n     public static final String type = \"single-valued-property-added-more-than-once\";\n+    public static String SINGLE_VALUE_CONSTRAINT_QID = \"Q19474404\";\n+    public static String SINGLE_VALUE_CONSTRAINT_EXCEPTION = \"P2303\";\n+\n+    class SingleValueConstraint {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17654afe3271aa4418cf7969180e715bcafc20aa"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4ODA1MzA1", "url": "https://github.com/OpenRefine/OpenRefine/pull/2818#pullrequestreview-438805305", "createdAt": "2020-06-28T19:05:06Z", "commit": {"oid": "8f8f4b565d0a5022ab5fefd6d539ef73834f7834"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQxOTowNTowN1rOGp_kCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQxOTowNTowN1rOGp_kCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjY4NjIxOA==", "bodyText": "You should not need to declare a new field for constraint exceptions again:\u00a0you can just reuse the one from the super class. So, for all constraints which do not take any parameters, you should not need to declare any inner class: the Constraint class itself can be used in the scrutinizer.", "url": "https://github.com/OpenRefine/OpenRefine/pull/2818#discussion_r446686218", "createdAt": "2020-06-28T19:05:07Z", "author": {"login": "wetneb"}, "path": "extensions/wikidata/src/org/openrefine/wikidata/qa/scrutinizers/SingleValueScrutinizer.java", "diffHunk": "@@ -44,6 +46,17 @@\n public class SingleValueScrutinizer extends EditScrutinizer {\n \n     public static final String type = \"single-valued-property-added-more-than-once\";\n+    public static String SINGLE_VALUE_CONSTRAINT_QID = \"Q19474404\";\n+    public static String SINGLE_BEST_VALUE_CONSTRAINT_QID = \"Q52060874\";\n+\n+    class SingleValueConstraint extends Constraint {\n+        Set<EntityIdValue> constraintExceptions;\n+\n+        SingleValueConstraint(Statement statement) {\n+            super(statement);\n+            constraintExceptions = getConstraintExceptions();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f8f4b565d0a5022ab5fefd6d539ef73834f7834"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "547d0a5d35fda02ffed4b307770ead767301d497", "author": {"user": {"login": "darecoder", "name": "Ekta Mishra"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/547d0a5d35fda02ffed4b307770ead767301d497", "committedDate": "2020-06-29T06:50:11Z", "message": "Implemented SingleValue Scrutinizer tests using mocks\n\nUpdated test class & added inner class to the scrutinizer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2d0dce8fe643769f759e83063943ec3764af9ed", "author": {"user": {"login": "darecoder", "name": "Ekta Mishra"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/f2d0dce8fe643769f759e83063943ec3764af9ed", "committedDate": "2020-06-29T06:50:11Z", "message": "tests updated"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "041a8c3bb000a2c9201c8776eaddb350af29a4d4", "author": {"user": {"login": "darecoder", "name": "Ekta Mishra"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/041a8c3bb000a2c9201c8776eaddb350af29a4d4", "committedDate": "2020-06-29T06:54:56Z", "message": "Updated SingleValueConstraint class"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5MTcyNTg2", "url": "https://github.com/OpenRefine/OpenRefine/pull/2818#pullrequestreview-439172586", "createdAt": "2020-06-29T13:59:48Z", "commit": {"oid": "041a8c3bb000a2c9201c8776eaddb350af29a4d4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3115, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}