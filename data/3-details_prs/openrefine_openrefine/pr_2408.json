{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3OTY1NjIw", "number": 2408, "title": "Adds trim whitespace option to separator based files", "bodyText": "Closes #791", "createdAt": "2020-03-13T20:26:36Z", "url": "https://github.com/OpenRefine/OpenRefine/pull/2408", "merged": true, "mergeCommit": {"oid": "ef8ad85c3cefbe196e18b3cfb6a06d1c76feed7b"}, "closed": true, "closedAt": "2020-03-21T10:38:45Z", "author": {"login": "lisa761"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcM5X3nAH2gAyMzg3OTY1NjIwOjNjZDc0ZTQ4NThlY2I5NTVlMjdiZjZiM2MyZTcxYTk1YTc3OTdmZTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPysRCgFqTM3ODkwOTA1Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3cd74e4858ecb955e27bf6b3c2e71a95a7797fe1", "author": {"user": {"login": "lisa761", "name": "Lisa Chandra"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/3cd74e4858ecb955e27bf6b3c2e71a95a7797fe1", "committedDate": "2020-03-12T10:43:50Z", "message": "added trim ui to csv importer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "263431481859a050ecad7d9e8b3d1f73d3652267", "author": {"user": {"login": "lisa761", "name": "Lisa Chandra"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/263431481859a050ecad7d9e8b3d1f73d3652267", "committedDate": "2020-03-13T20:24:12Z", "message": "added trim functionality"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0NzEwMTc5", "url": "https://github.com/OpenRefine/OpenRefine/pull/2408#pullrequestreview-374710179", "createdAt": "2020-03-14T09:29:23Z", "commit": {"oid": "263431481859a050ecad7d9e8b3d1f73d3652267"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQwOToyOToyM1rOF2Yp8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQwOToyOToyM1rOF2Yp8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU3MTM3Ng==", "bodyText": "If value is an instance of Cell, then you should not replace it by a String. This will cause runtime type errors.", "url": "https://github.com/OpenRefine/OpenRefine/pull/2408#discussion_r392571376", "createdAt": "2020-03-14T09:29:23Z", "author": {"login": "wetneb"}, "path": "main/src/com/google/refine/importers/TabularImportingParserBase.java", "diffHunk": "@@ -161,6 +163,9 @@ static public void readTable(\n                             \n                             Object value = cells.get(c);\n                             if (value instanceof Cell) {\n+                                if(trimStrings) {\n+                                    value = ((Cell) value).value.toString().trim();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "263431481859a050ecad7d9e8b3d1f73d3652267"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ceb956c197dc47b5e3bde8d7c032df41cdf0c5a6", "author": {"user": {"login": "lisa761", "name": "Lisa Chandra"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/ceb956c197dc47b5e3bde8d7c032df41cdf0c5a6", "committedDate": "2020-03-14T20:11:44Z", "message": "trimStrings handler only for strings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9eb6f5d1edf8479d34eb39dcd05b4ac9504d2ee0", "author": {"user": {"login": "lisa761", "name": "Lisa Chandra"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/9eb6f5d1edf8479d34eb39dcd05b4ac9504d2ee0", "committedDate": "2020-03-14T20:17:14Z", "message": "added test for trimStrings option in csv/tsv files"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0NzUyMjgx", "url": "https://github.com/OpenRefine/OpenRefine/pull/2408#pullrequestreview-374752281", "createdAt": "2020-03-14T20:33:45Z", "commit": {"oid": "9eb6f5d1edf8479d34eb39dcd05b4ac9504d2ee0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQyMDozMzo0NVrOF2bdNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNFQyMDozMzo0NVrOF2bdNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjYxNzI2OA==", "bodyText": "We could potentially set this to true instead - this would enable the option by default in the UI. The importer would still behave in the same way if using an importer configuration generated by a previous version, since you use false as default value in getBoolean in readTable.\nI don't have strong feelings about whether this should be enabled by default in the UI. It would perhaps make it more consistent with the other importers which already support trimming strings. And I would expect that workflows where preserving whitespace around strings are quite rare for TSV/CSV. So leaning towards enabling\u2026 @ostephens what do you think?", "url": "https://github.com/OpenRefine/OpenRefine/pull/2408#discussion_r392617268", "createdAt": "2020-03-14T20:33:45Z", "author": {"login": "wetneb"}, "path": "main/src/com/google/refine/importers/SeparatorBasedImporter.java", "diffHunk": "@@ -76,6 +76,7 @@ public ObjectNode createParserUIInitializationData(ImportingJob job,\n         JSONUtilities.safePut(options, \"guessCellValueTypes\", false);\n         JSONUtilities.safePut(options, \"processQuotes\", true);\n         JSONUtilities.safePut(options, \"quoteCharacter\", String.valueOf(CSVParser.DEFAULT_QUOTE_CHARACTER));\n+        JSONUtilities.safePut(options, \"trimStrings\", false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9eb6f5d1edf8479d34eb39dcd05b4ac9504d2ee0"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f441dc18a294e72376a711266b39a4ce506dc3b4", "author": {"user": {"login": "lisa761", "name": "Lisa Chandra"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/f441dc18a294e72376a711266b39a4ce506dc3b4", "committedDate": "2020-03-15T04:51:22Z", "message": "made trim option enabled by default"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4OTA5MDUy", "url": "https://github.com/OpenRefine/OpenRefine/pull/2408#pullrequestreview-378909052", "createdAt": "2020-03-21T10:38:33Z", "commit": {"oid": "f441dc18a294e72376a711266b39a4ce506dc3b4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3317, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}