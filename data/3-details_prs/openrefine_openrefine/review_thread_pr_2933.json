{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4NjE1NjA3", "number": 2933, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwNjo1NDowMlrOETHnQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwNjo1NTo0NlrOETHpRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NDgzMTM2OnYy", "diffSide": "LEFT", "path": "main/webapp/modules/core/externals/suggest/suggest-4_3a.js", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwNjo1NDowMlrOG4q_bw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxNToyMDo1NlrOG49nmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA3NzgwNw==", "bodyText": "This removes support for descriptions in suggested items.", "url": "https://github.com/OpenRefine/OpenRefine/pull/2933#discussion_r462077807", "createdAt": "2020-07-29T06:54:02Z", "author": {"login": "wetneb"}, "path": "main/webapp/modules/core/externals/suggest/suggest-4_3a.js", "diffHunk": "@@ -724,11 +727,7 @@\n       var css = this.options.css;\n       var li = $(\"<li>\").addClass(css.item);\n       var label = $(\"<label>\").text(data.name);\n-      var div = $(\"<div>\").addClass(css.item_name).append(label);\n-      if(data.description) {\n-          div.append($('<span></span>').text(data.description));\n-      }\n-      li.append(div);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a39845ab871f543fea9ec7dba43caa8b85e4a72f"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMzMzQwNg==", "bodyText": "Isn't the description rendered in the preview pane (aka flyout)? Does this change cause it to show up twice?", "url": "https://github.com/OpenRefine/OpenRefine/pull/2933#discussion_r462333406", "createdAt": "2020-07-29T14:16:19Z", "author": {"login": "tfmorris"}, "path": "main/webapp/modules/core/externals/suggest/suggest-4_3a.js", "diffHunk": "@@ -724,11 +727,7 @@\n       var css = this.options.css;\n       var li = $(\"<li>\").addClass(css.item);\n       var label = $(\"<label>\").text(data.name);\n-      var div = $(\"<div>\").addClass(css.item_name).append(label);\n-      if(data.description) {\n-          div.append($('<span></span>').text(data.description));\n-      }\n-      li.append(div);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA3NzgwNw=="}, "originalCommit": {"oid": "a39845ab871f543fea9ec7dba43caa8b85e4a72f"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjM1NDM3Nw==", "bodyText": "This is a description that is rendered in suggest items by default, without needing to hover the item. You are correct that it is redundant with the flyout service - I have introduced it a while ago as a replacement for flyouts because it gives a better user experience (having to hover one item at a time to find the right one is not really workable). Services can decide not to return descriptions and use flyouts, or the converse. (The Wikidata service currently uses both, but the flyouts should just be removed wetneb/openrefine-wikibase#77)", "url": "https://github.com/OpenRefine/OpenRefine/pull/2933#discussion_r462354377", "createdAt": "2020-07-29T14:42:52Z", "author": {"login": "wetneb"}, "path": "main/webapp/modules/core/externals/suggest/suggest-4_3a.js", "diffHunk": "@@ -724,11 +727,7 @@\n       var css = this.options.css;\n       var li = $(\"<li>\").addClass(css.item);\n       var label = $(\"<label>\").text(data.name);\n-      var div = $(\"<div>\").addClass(css.item_name).append(label);\n-      if(data.description) {\n-          div.append($('<span></span>').text(data.description));\n-      }\n-      li.append(div);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA3NzgwNw=="}, "originalCommit": {"oid": "a39845ab871f543fea9ec7dba43caa8b85e4a72f"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjM4MzAwMA==", "bodyText": "I don't think I agree, but my intent was not remove local changes. It turns out that there were only a couple of changes in SVN, one of which was the one needed for jQuery compatibility, so I just integrated those by diffing against the base version before we applied our local changes.", "url": "https://github.com/OpenRefine/OpenRefine/pull/2933#discussion_r462383000", "createdAt": "2020-07-29T15:20:56Z", "author": {"login": "tfmorris"}, "path": "main/webapp/modules/core/externals/suggest/suggest-4_3a.js", "diffHunk": "@@ -724,11 +727,7 @@\n       var css = this.options.css;\n       var li = $(\"<li>\").addClass(css.item);\n       var label = $(\"<label>\").text(data.name);\n-      var div = $(\"<div>\").addClass(css.item_name).append(label);\n-      if(data.description) {\n-          div.append($('<span></span>').text(data.description));\n-      }\n-      li.append(div);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA3NzgwNw=="}, "originalCommit": {"oid": "a39845ab871f543fea9ec7dba43caa8b85e4a72f"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NDgzMjU4OnYy", "diffSide": "LEFT", "path": "main/webapp/modules/core/externals/suggest/suggest-4_3a.js", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwNjo1NDozMlrOG4rARg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwNjo1NDozMlrOG4rARg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA3ODAyMg==", "bodyText": "Those are also changes we made locally that I would keep.", "url": "https://github.com/OpenRefine/OpenRefine/pull/2933#discussion_r462078022", "createdAt": "2020-07-29T06:54:32Z", "author": {"login": "wetneb"}, "path": "main/webapp/modules/core/externals/suggest/suggest-4_3a.js", "diffHunk": "@@ -1294,23 +1293,6 @@\n           type.text(data.id);\n       }\n       name.prepend(type);\n-      if(data.description) {\n-          name.append($(\"<span></span>\").text(data.description));\n-      }\n-\n-      // If we know of a view URL for this suggest service,\n-      // clicking with the middle button sends the user to\n-      // the view page.\n-      if('view_url' in this.options && data.id) {\n-        var view_url = this.options.view_url.replace('{{id}}', data.id).replace('${id}', data.id);\n-        li.on('mousedown', function(e) {\n-           if (e.which == 2) {\n-              var win = window.open(view_url, '_blank');\n-              win.focus();\n-              e.preventDefault();\n-           }\n-        });\n-      }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a39845ab871f543fea9ec7dba43caa8b85e4a72f"}, "originalPosition": 74}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NDgzNDgyOnYy", "diffSide": "LEFT", "path": "main/webapp/modules/core/externals/suggest/suggest-4_3a.js", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwNjo1NToxMVrOG4rBgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwNjo1NToxMVrOG4rBgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA3ODMzNw==", "bodyText": "This is also necessary for CORS support.", "url": "https://github.com/OpenRefine/OpenRefine/pull/2933#discussion_r462078337", "createdAt": "2020-07-29T06:55:11Z", "author": {"login": "wetneb"}, "path": "main/webapp/modules/core/externals/suggest/suggest-4_3a.js", "diffHunk": "@@ -1508,7 +1490,7 @@\n             xhr.getResponseHeader(\"X-Metaweb-TID\"));\n           }\n         },\n-        dataType: o.access === undefined ? \"jsonp\" : o.access,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a39845ab871f543fea9ec7dba43caa8b85e4a72f"}, "originalPosition": 100}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NDgzNjUyOnYy", "diffSide": "LEFT", "path": "main/webapp/modules/core/externals/suggest/suggest-4_3a.js", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwNjo1NTo0NlrOG4rCgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwNjo1NTo0NlrOG4rCgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA3ODU5NQ==", "bodyText": "That looks like something worth keeping.", "url": "https://github.com/OpenRefine/OpenRefine/pull/2933#discussion_r462078595", "createdAt": "2020-07-29T06:55:46Z", "author": {"login": "wetneb"}, "path": "main/webapp/modules/core/externals/suggest/suggest-4_3a.js", "diffHunk": "@@ -1475,7 +1457,7 @@\n \n       //this.flyoutpane.hide();\n       var flyout_id = data.id;\n-      var url = this.flyout_url.replace(/\\$\\{id\\}/g, encodeURIComponent(data.id));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a39845ab871f543fea9ec7dba43caa8b85e4a72f"}, "originalPosition": 91}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2574, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}