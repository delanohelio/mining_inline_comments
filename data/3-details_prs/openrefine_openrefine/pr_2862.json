{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQzNjI4ODk2", "number": 2862, "title": "Implemented QuantityScrutinizer tests using Mocks", "bodyText": "Updated test cases and added AllowedUnitsConstraint class.", "createdAt": "2020-07-02T16:35:54Z", "url": "https://github.com/OpenRefine/OpenRefine/pull/2862", "merged": true, "mergeCommit": {"oid": "c68047a61423561d4b5d5d2bc47b63364b4718ae"}, "closed": true, "closedAt": "2020-07-03T12:14:33Z", "author": {"login": "darecoder"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcxADsEAH2gAyNDQzNjI4ODk2OjM0MzgzMWNjYjIxOTA1ZjM4YmNmNDUzM2E5MjBhMzY4OGEyYjVlOTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcxSZaOgFqTQ0MjM3MjE0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "343831ccb21905f38bcf4533a920a3688a2b5e90", "author": {"user": {"login": "darecoder", "name": "Ekta Mishra"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/343831ccb21905f38bcf4533a920a3688a2b5e90", "committedDate": "2020-07-02T14:52:24Z", "message": "Implemented QunatityScrutinizer tests using Mockito\n\nUpdated test cases and added AllowedUnitsConstraint class"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxOTYyMDgx", "url": "https://github.com/OpenRefine/OpenRefine/pull/2862#pullrequestreview-441962081", "createdAt": "2020-07-02T19:20:16Z", "commit": {"oid": "c9ed61efdaf64adf66248f439debae5882b4eb94"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxOToyMDoxNlrOGsaU1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxOToyMToxNVrOGsaWZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTIyMTg0NA==", "bodyText": "Why did you need to change this value? Isn't this changing the meaning of the tests below?", "url": "https://github.com/OpenRefine/OpenRefine/pull/2862#discussion_r449221844", "createdAt": "2020-07-02T19:20:16Z", "author": {"login": "wetneb"}, "path": "extensions/wikidata/tests/src/org/openrefine/wikidata/qa/scrutinizers/QuantityScrutinizerTest.java", "diffHunk": "@@ -24,10 +42,17 @@\n             new BigDecimal(\"1.545\"));\n     \n     private QuantityValue wrongUnitValue = Datamodel.makeQuantityValue(\n-            new BigDecimal(\"1.234\"), \"Q346721\");\n+            new BigDecimal(\"2\"), \"Q346721\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9ed61efdaf64adf66248f439debae5882b4eb94"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTIyMjI0Ng==", "bodyText": "It would be better to reuse the constant declared in the scrutinizer, NO_BOUNDS_CONSTRAINT_QID (and same for all other tests).", "url": "https://github.com/OpenRefine/OpenRefine/pull/2862#discussion_r449222246", "createdAt": "2020-07-02T19:21:15Z", "author": {"login": "wetneb"}, "path": "extensions/wikidata/tests/src/org/openrefine/wikidata/qa/scrutinizers/QuantityScrutinizerTest.java", "diffHunk": "@@ -36,67 +61,190 @@ public EditScrutinizer getScrutinizer() {\n     \n     @Test\n     public void testBoundsAllowed() {\n-        scrutinize(valueWithBounds);\n+        ItemIdValue idA = TestingData.existingId;\n+        Snak mainSnak = Datamodel.makeSomeValueSnak(propertyIdValue);\n+        Statement statement = new StatementImpl(\"P1083\", mainSnak, idA);\n+        ItemUpdate update = new ItemUpdateBuilder(idA).addStatement(statement).build();\n+\n+        ConstraintFetcher fetcher = mock(ConstraintFetcher.class);\n+        when(fetcher.getConstraintsByType(propertyIdValue, \"Q51723761\")).thenReturn(new ArrayList<>());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9ed61efdaf64adf66248f439debae5882b4eb94"}, "originalPosition": 64}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMTYzMzUy", "url": "https://github.com/OpenRefine/OpenRefine/pull/2862#pullrequestreview-442163352", "createdAt": "2020-07-03T05:59:58Z", "commit": {"oid": "93d3ffc12cd2f2ee85d64535d75a8e00941d70bc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNTo1OTo1OVrOGsknRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNTo1OTo1OVrOGsknRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTM5MDQwNA==", "bodyText": "This could be simply imported from the QuantityScrutinizer itself.", "url": "https://github.com/OpenRefine/OpenRefine/pull/2862#discussion_r449390404", "createdAt": "2020-07-03T05:59:59Z", "author": {"login": "wetneb"}, "path": "extensions/wikidata/tests/src/org/openrefine/wikidata/qa/scrutinizers/QuantityScrutinizerTest.java", "diffHunk": "@@ -27,7 +45,18 @@\n             new BigDecimal(\"1.234\"), \"Q346721\");\n     \n     private QuantityValue goodUnitValue = Datamodel.makeQuantityValue(\n-            new BigDecimal(\"1.234\"), MockConstraintFetcher.allowedUnit.getIri());\n+            new BigDecimal(\"1.234\"), (ItemIdValue) allowedUnit);\n+\n+    public static String NO_BOUNDS_CONSTRAINT_QID = \"Q51723761\";\n+    public static String INTEGER_VALUED_CONSTRAINT_QID = \"Q52848401\";\n+    public static String ALLOWED_UNITS_CONSTRAINT_QID = \"Q21514353\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "93d3ffc12cd2f2ee85d64535d75a8e00941d70bc"}, "originalPosition": 42}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5fea98d96af7766239a17aafb322fed61a4cc322", "author": {"user": {"login": "darecoder", "name": "Ekta Mishra"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/5fea98d96af7766239a17aafb322fed61a4cc322", "committedDate": "2020-07-03T11:15:04Z", "message": "Test cases updated"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMzcyMTQ0", "url": "https://github.com/OpenRefine/OpenRefine/pull/2862#pullrequestreview-442372144", "createdAt": "2020-07-03T12:14:25Z", "commit": {"oid": "5fea98d96af7766239a17aafb322fed61a4cc322"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3134, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}