{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwNDQzMzUy", "number": 2818, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwODoxNzoxOVrOEJC6gA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQxOTowNTowNlrOEJeWNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3OTIwMzg0OnYy", "diffSide": "RIGHT", "path": "extensions/wikidata/src/org/openrefine/wikidata/qa/scrutinizers/SingleValueScrutinizer.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwODoxNzoxOVrOGpX-nA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwOToxNzozN1rOGpZ2FQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjAzNzY2MA==", "bodyText": "I think all exceptions can accept constraints, so how about we pull the parsing code in this class to a common superclass of all the inner classes you have been introducing?", "url": "https://github.com/OpenRefine/OpenRefine/pull/2818#discussion_r446037660", "createdAt": "2020-06-26T08:17:19Z", "author": {"login": "wetneb"}, "path": "extensions/wikidata/src/org/openrefine/wikidata/qa/scrutinizers/SingleValueScrutinizer.java", "diffHunk": "@@ -44,6 +49,24 @@\n public class SingleValueScrutinizer extends EditScrutinizer {\n \n     public static final String type = \"single-valued-property-added-more-than-once\";\n+    public static String SINGLE_VALUE_CONSTRAINT_QID = \"Q19474404\";\n+    public static String SINGLE_VALUE_CONSTRAINT_EXCEPTION = \"P2303\";\n+\n+    class SingleValueConstraint {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17654afe3271aa4418cf7969180e715bcafc20aa"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA2NTk4OQ==", "bodyText": "Sure, we can make a constraint class that will be extended by these inner classes. And check what all parameters can be added over there other than exceptions that are generally common to all property constraints.", "url": "https://github.com/OpenRefine/OpenRefine/pull/2818#discussion_r446065989", "createdAt": "2020-06-26T09:13:11Z", "author": {"login": "darecoder"}, "path": "extensions/wikidata/src/org/openrefine/wikidata/qa/scrutinizers/SingleValueScrutinizer.java", "diffHunk": "@@ -44,6 +49,24 @@\n public class SingleValueScrutinizer extends EditScrutinizer {\n \n     public static final String type = \"single-valued-property-added-more-than-once\";\n+    public static String SINGLE_VALUE_CONSTRAINT_QID = \"Q19474404\";\n+    public static String SINGLE_VALUE_CONSTRAINT_EXCEPTION = \"P2303\";\n+\n+    class SingleValueConstraint {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjAzNzY2MA=="}, "originalCommit": {"oid": "17654afe3271aa4418cf7969180e715bcafc20aa"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA2ODI0NQ==", "bodyText": "Great! Constraint status is another one.", "url": "https://github.com/OpenRefine/OpenRefine/pull/2818#discussion_r446068245", "createdAt": "2020-06-26T09:17:37Z", "author": {"login": "wetneb"}, "path": "extensions/wikidata/src/org/openrefine/wikidata/qa/scrutinizers/SingleValueScrutinizer.java", "diffHunk": "@@ -44,6 +49,24 @@\n public class SingleValueScrutinizer extends EditScrutinizer {\n \n     public static final String type = \"single-valued-property-added-more-than-once\";\n+    public static String SINGLE_VALUE_CONSTRAINT_QID = \"Q19474404\";\n+    public static String SINGLE_VALUE_CONSTRAINT_EXCEPTION = \"P2303\";\n+\n+    class SingleValueConstraint {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjAzNzY2MA=="}, "originalCommit": {"oid": "17654afe3271aa4418cf7969180e715bcafc20aa"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4MzY5ODQ2OnYy", "diffSide": "RIGHT", "path": "extensions/wikidata/src/org/openrefine/wikidata/qa/scrutinizers/SingleValueScrutinizer.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQxOTowNTowN1rOGp_kCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQxOTowNTowN1rOGp_kCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjY4NjIxOA==", "bodyText": "You should not need to declare a new field for constraint exceptions again:\u00a0you can just reuse the one from the super class. So, for all constraints which do not take any parameters, you should not need to declare any inner class: the Constraint class itself can be used in the scrutinizer.", "url": "https://github.com/OpenRefine/OpenRefine/pull/2818#discussion_r446686218", "createdAt": "2020-06-28T19:05:07Z", "author": {"login": "wetneb"}, "path": "extensions/wikidata/src/org/openrefine/wikidata/qa/scrutinizers/SingleValueScrutinizer.java", "diffHunk": "@@ -44,6 +46,17 @@\n public class SingleValueScrutinizer extends EditScrutinizer {\n \n     public static final String type = \"single-valued-property-added-more-than-once\";\n+    public static String SINGLE_VALUE_CONSTRAINT_QID = \"Q19474404\";\n+    public static String SINGLE_BEST_VALUE_CONSTRAINT_QID = \"Q52060874\";\n+\n+    class SingleValueConstraint extends Constraint {\n+        Set<EntityIdValue> constraintExceptions;\n+\n+        SingleValueConstraint(Statement statement) {\n+            super(statement);\n+            constraintExceptions = getConstraintExceptions();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f8f4b565d0a5022ab5fefd6d539ef73834f7834"}, "originalPosition": 32}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2627, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}