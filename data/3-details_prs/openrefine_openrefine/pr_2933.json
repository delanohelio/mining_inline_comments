{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4NjE1NjA3", "number": 2933, "title": "Update to jQuery 1.12.4 and jQuery Migrate 1.4.1 - fixes 2932", "bodyText": "Fixes #2932.\n\nRefactors module wirings to remove redundancy so I only have one place to udpate\nUpdates jQuery to the latest 1.x and jQuery Migrate 1 to the latest.\nUpdates Suggest widget to a slightly later version which doesn't use browser.msie\nUpdates property getting/setting code for checked, disabled, value, selected properties to not use .attr(), .removeAttr() and other obsolete methods.\n\nA cursory check of the various dialogs seems to indicate that that covers the bulk of the issues for this version of jQuery, but we should keep an eye on the Javascript console for a while to see if there are other migration issues to be addressed.", "createdAt": "2020-07-14T03:11:26Z", "url": "https://github.com/OpenRefine/OpenRefine/pull/2933", "merged": true, "mergeCommit": {"oid": "6095c44cb714f7b1ea6a1eac961b0394ac138a8b"}, "closed": true, "closedAt": "2020-08-06T11:47:32Z", "author": {"login": "tfmorris"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5azp1gBqjM1OTU2NjczNTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8OY5OAFqTQ2MjQ0MzE3Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b7c668b4d704291ad2ba858c23497d3f2962c182", "author": {"user": {"login": "tfmorris", "name": "Tom Morris"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/b7c668b4d704291ad2ba858c23497d3f2962c182", "committedDate": "2020-07-14T02:58:36Z", "message": "Update jQuery 'value' property setting code to use val()"}, "afterCommit": {"oid": "a39845ab871f543fea9ec7dba43caa8b85e4a72f", "author": {"user": {"login": "tfmorris", "name": "Tom Morris"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/a39845ab871f543fea9ec7dba43caa8b85e4a72f", "committedDate": "2020-07-28T18:29:40Z", "message": "Use prop() instead of attr() to set 'selected'"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3MjQwODA5", "url": "https://github.com/OpenRefine/OpenRefine/pull/2933#pullrequestreview-457240809", "createdAt": "2020-07-29T06:54:02Z", "commit": {"oid": "a39845ab871f543fea9ec7dba43caa8b85e4a72f"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwNjo1NDowMlrOG4q_bw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwNjo1NTo0NlrOG4rCgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA3NzgwNw==", "bodyText": "This removes support for descriptions in suggested items.", "url": "https://github.com/OpenRefine/OpenRefine/pull/2933#discussion_r462077807", "createdAt": "2020-07-29T06:54:02Z", "author": {"login": "wetneb"}, "path": "main/webapp/modules/core/externals/suggest/suggest-4_3a.js", "diffHunk": "@@ -724,11 +727,7 @@\n       var css = this.options.css;\n       var li = $(\"<li>\").addClass(css.item);\n       var label = $(\"<label>\").text(data.name);\n-      var div = $(\"<div>\").addClass(css.item_name).append(label);\n-      if(data.description) {\n-          div.append($('<span></span>').text(data.description));\n-      }\n-      li.append(div);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a39845ab871f543fea9ec7dba43caa8b85e4a72f"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA3ODAyMg==", "bodyText": "Those are also changes we made locally that I would keep.", "url": "https://github.com/OpenRefine/OpenRefine/pull/2933#discussion_r462078022", "createdAt": "2020-07-29T06:54:32Z", "author": {"login": "wetneb"}, "path": "main/webapp/modules/core/externals/suggest/suggest-4_3a.js", "diffHunk": "@@ -1294,23 +1293,6 @@\n           type.text(data.id);\n       }\n       name.prepend(type);\n-      if(data.description) {\n-          name.append($(\"<span></span>\").text(data.description));\n-      }\n-\n-      // If we know of a view URL for this suggest service,\n-      // clicking with the middle button sends the user to\n-      // the view page.\n-      if('view_url' in this.options && data.id) {\n-        var view_url = this.options.view_url.replace('{{id}}', data.id).replace('${id}', data.id);\n-        li.on('mousedown', function(e) {\n-           if (e.which == 2) {\n-              var win = window.open(view_url, '_blank');\n-              win.focus();\n-              e.preventDefault();\n-           }\n-        });\n-      }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a39845ab871f543fea9ec7dba43caa8b85e4a72f"}, "originalPosition": 74}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA3ODMzNw==", "bodyText": "This is also necessary for CORS support.", "url": "https://github.com/OpenRefine/OpenRefine/pull/2933#discussion_r462078337", "createdAt": "2020-07-29T06:55:11Z", "author": {"login": "wetneb"}, "path": "main/webapp/modules/core/externals/suggest/suggest-4_3a.js", "diffHunk": "@@ -1508,7 +1490,7 @@\n             xhr.getResponseHeader(\"X-Metaweb-TID\"));\n           }\n         },\n-        dataType: o.access === undefined ? \"jsonp\" : o.access,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a39845ab871f543fea9ec7dba43caa8b85e4a72f"}, "originalPosition": 100}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA3ODU5NQ==", "bodyText": "That looks like something worth keeping.", "url": "https://github.com/OpenRefine/OpenRefine/pull/2933#discussion_r462078595", "createdAt": "2020-07-29T06:55:46Z", "author": {"login": "wetneb"}, "path": "main/webapp/modules/core/externals/suggest/suggest-4_3a.js", "diffHunk": "@@ -1475,7 +1457,7 @@\n \n       //this.flyoutpane.hide();\n       var flyout_id = data.id;\n-      var url = this.flyout_url.replace(/\\$\\{id\\}/g, encodeURIComponent(data.id));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a39845ab871f543fea9ec7dba43caa8b85e4a72f"}, "originalPosition": 91}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a39845ab871f543fea9ec7dba43caa8b85e4a72f", "author": {"user": {"login": "tfmorris", "name": "Tom Morris"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/a39845ab871f543fea9ec7dba43caa8b85e4a72f", "committedDate": "2020-07-28T18:29:40Z", "message": "Use prop() instead of attr() to set 'selected'"}, "afterCommit": {"oid": "723a4bdc80442305b50146a4f0e3bdeb7694c9d8", "author": {"user": {"login": "tfmorris", "name": "Tom Morris"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/723a4bdc80442305b50146a4f0e3bdeb7694c9d8", "committedDate": "2020-07-29T14:52:27Z", "message": "Use prop() instead of attr() to set 'selected'"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4Nzg5MjY0", "url": "https://github.com/OpenRefine/OpenRefine/pull/2933#pullrequestreview-458789264", "createdAt": "2020-07-30T22:06:50Z", "commit": {"oid": "723a4bdc80442305b50146a4f0e3bdeb7694c9d8"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b933b001b11c532083a4d2788cf544100263d679", "author": {"user": {"login": "tfmorris", "name": "Tom Morris"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/b933b001b11c532083a4d2788cf544100263d679", "committedDate": "2020-08-01T19:46:37Z", "message": "Refactor module wiring to reduce redundancy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17d5df9258154afc9f3b055d60209c8c55c7f28f", "author": {"user": {"login": "tfmorris", "name": "Tom Morris"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/17d5df9258154afc9f3b055d60209c8c55c7f28f", "committedDate": "2020-08-01T19:47:59Z", "message": "Update to jQuery 1.12.4 & jQuery Migrate 1.4.1 - fixes #2932\n\nThis updates to the latest jQuery 1.x and jQuery Migrate 1.x,\nthe first step in upgrading to a modern jQuery."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f5f682e6fb082c54aae0d8a90050efcaa00a86a", "author": {"user": {"login": "tfmorris", "name": "Tom Morris"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/2f5f682e6fb082c54aae0d8a90050efcaa00a86a", "committedDate": "2020-08-01T19:47:59Z", "message": "Add a couple of bug fixes from Google Code SVN\n\nThis is an unrelease version from the Google Code freebase-site\nrepo which only has a few changes from the v4.3 release, but\none of them is removing the `browser.msie` reference that\njQuery Migrate is complaining about."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82c32dc97e0444615b19d9f869c61447f350c3f1", "author": {"user": {"login": "tfmorris", "name": "Tom Morris"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/82c32dc97e0444615b19d9f869c61447f350c3f1", "committedDate": "2020-08-01T19:48:00Z", "message": "Use prop() for 'checked' and 'disabled'"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cd621a0fc2075941e22f2d316ef6870e6480b00f", "author": {"user": {"login": "tfmorris", "name": "Tom Morris"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/cd621a0fc2075941e22f2d316ef6870e6480b00f", "committedDate": "2020-07-31T03:20:37Z", "message": "Patch for jQuery >1.9"}, "afterCommit": {"oid": "aff7acb3b2bd9c629e12553e7fba9bef4a30fe82", "author": {"user": {"login": "tfmorris", "name": "Tom Morris"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/aff7acb3b2bd9c629e12553e7fba9bef4a30fe82", "committedDate": "2020-08-01T19:48:52Z", "message": "Patch for jQuery >1.9"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c7119ba853e13f24c50de273003d6eb43db82187", "author": {"user": {"login": "tfmorris", "name": "Tom Morris"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/c7119ba853e13f24c50de273003d6eb43db82187", "committedDate": "2020-08-01T23:49:45Z", "message": "Update jQuery 'value' property setting code to use val()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b9184eab296d07ee4e6c1b159678855addc9f43", "author": {"user": {"login": "tfmorris", "name": "Tom Morris"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/4b9184eab296d07ee4e6c1b159678855addc9f43", "committedDate": "2020-08-01T23:49:45Z", "message": "Use prop() instead of attr() to set 'selected'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "970be4a40f4b62ac54ad7921f40140c82b1ed504", "author": {"user": {"login": "tfmorris", "name": "Tom Morris"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/970be4a40f4b62ac54ad7921f40140c82b1ed504", "committedDate": "2020-08-01T23:49:45Z", "message": "Patch for jQuery >1.9"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "aff7acb3b2bd9c629e12553e7fba9bef4a30fe82", "author": {"user": {"login": "tfmorris", "name": "Tom Morris"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/aff7acb3b2bd9c629e12553e7fba9bef4a30fe82", "committedDate": "2020-08-01T19:48:52Z", "message": "Patch for jQuery >1.9"}, "afterCommit": {"oid": "970be4a40f4b62ac54ad7921f40140c82b1ed504", "author": {"user": {"login": "tfmorris", "name": "Tom Morris"}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/970be4a40f4b62ac54ad7921f40140c82b1ed504", "committedDate": "2020-08-01T23:49:45Z", "message": "Patch for jQuery >1.9"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNDQzMTc2", "url": "https://github.com/OpenRefine/OpenRefine/pull/2933#pullrequestreview-462443176", "createdAt": "2020-08-06T11:47:24Z", "commit": {"oid": "970be4a40f4b62ac54ad7921f40140c82b1ed504"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3060, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}