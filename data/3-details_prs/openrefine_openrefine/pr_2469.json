{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyNzg2NjU3", "number": 2469, "title": "make maxlag configurable", "bodyText": "./refine build", "createdAt": "2020-03-24T05:34:14Z", "url": "https://github.com/OpenRefine/OpenRefine/pull/2469", "merged": true, "mergeCommit": {"oid": "7311581df0327e6662ed818997f11f12e7c454c1"}, "closed": true, "closedAt": "2020-03-26T07:46:50Z", "author": {"login": "james-cui"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQtmg8AFqTM4MDA0NjUyNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRXOFsAFqTM4MTc2MjU1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwMDQ2NTI3", "url": "https://github.com/OpenRefine/OpenRefine/pull/2469#pullrequestreview-380046527", "createdAt": "2020-03-24T07:15:11Z", "commit": {"oid": "af09b05d502157d9b4314ec71adec79e1d7e550a"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwNzoxNToxMlrOF6jXaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQwNzoxNjoxOFrOF6jY_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njk0MTE2MQ==", "bodyText": "I would replace \"maxLag\" by something a bit more specific, to make sure there is no collision with anything else: for instance \"wikibase:upload:maxLag\".", "url": "https://github.com/OpenRefine/OpenRefine/pull/2469#discussion_r396941161", "createdAt": "2020-03-24T07:15:12Z", "author": {"login": "wetneb"}, "path": "extensions/wikidata/src/org/openrefine/wikidata/editing/EditBatchProcessor.java", "diffHunk": "@@ -67,6 +70,14 @@\n     private int globalCursor;\n     private Map<String, EntityDocument> currentDocs;\n     private int batchSize;\n+    private static final String MAX_LAG_KEY = \"maxLag\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af09b05d502157d9b4314ec71adec79e1d7e550a"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njk0MTU2NA==", "bodyText": "What happens if parseInt fails?\u00a0 Should it fall back to the default?", "url": "https://github.com/OpenRefine/OpenRefine/pull/2469#discussion_r396941564", "createdAt": "2020-03-24T07:16:18Z", "author": {"login": "wetneb"}, "path": "extensions/wikidata/src/org/openrefine/wikidata/editing/EditBatchProcessor.java", "diffHunk": "@@ -67,6 +70,14 @@\n     private int globalCursor;\n     private Map<String, EntityDocument> currentDocs;\n     private int batchSize;\n+    private static final String MAX_LAG_KEY = \"maxLag\";\n+    private static final int MAX_LAG_DEFAULT = 5000;      // 5 second default maxLag\n+    private PreferenceStore prefStore = ProjectManager.singleton.getPreferenceStore();\n+\n+    private int getMaxLag() {\n+        return prefStore.get(MAX_LAG_KEY) == null ? MAX_LAG_DEFAULT :\n+                Integer.parseInt((String) prefStore.get(MAX_LAG_KEY));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af09b05d502157d9b4314ec71adec79e1d7e550a"}, "originalPosition": 20}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "af09b05d502157d9b4314ec71adec79e1d7e550a", "author": {"user": {"login": "james-cui", "name": null}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/af09b05d502157d9b4314ec71adec79e1d7e550a", "committedDate": "2020-03-24T05:31:48Z", "message": "make maxlag configurable"}, "afterCommit": {"oid": "fce458f9f889ea1b47f95eb6e225b26827e5ec07", "author": {"user": {"login": "james-cui", "name": null}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/fce458f9f889ea1b47f95eb6e225b26827e5ec07", "committedDate": "2020-03-25T00:09:53Z", "message": "make maxlag configurable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4fd35ecaaa952eff68428167703ff900a33f7b1e", "author": {"user": {"login": "james-cui", "name": null}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/4fd35ecaaa952eff68428167703ff900a33f7b1e", "committedDate": "2020-03-26T04:36:22Z", "message": "make maxlag configurable"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fce458f9f889ea1b47f95eb6e225b26827e5ec07", "author": {"user": {"login": "james-cui", "name": null}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/fce458f9f889ea1b47f95eb6e225b26827e5ec07", "committedDate": "2020-03-25T00:09:53Z", "message": "make maxlag configurable"}, "afterCommit": {"oid": "4fd35ecaaa952eff68428167703ff900a33f7b1e", "author": {"user": {"login": "james-cui", "name": null}}, "url": "https://github.com/OpenRefine/OpenRefine/commit/4fd35ecaaa952eff68428167703ff900a33f7b1e", "committedDate": "2020-03-26T04:36:22Z", "message": "make maxlag configurable"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxNzYyNTUx", "url": "https://github.com/OpenRefine/OpenRefine/pull/2469#pullrequestreview-381762551", "createdAt": "2020-03-26T07:46:00Z", "commit": {"oid": "4fd35ecaaa952eff68428167703ff900a33f7b1e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3345, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}