{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk3Mjc2NzY0", "number": 463, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwMTowMjo1OVrODtwlkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxNDoyNTo0NlrODt-lxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5MzA4NTYzOnYy", "diffSide": "RIGHT", "path": "tools/Dockerfiles/pki_build", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwMTowMjo1OVrOF_X3qw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwMTowMjo1OVrOF_X3qw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTk5NTY5MQ==", "bodyText": "I think it should be pki-core instead of pki.", "url": "https://github.com/dogtagpki/jss/pull/463#discussion_r401995691", "createdAt": "2020-04-02T01:02:59Z", "author": {"login": "edewata"}, "path": "tools/Dockerfiles/pki_build", "diffHunk": "@@ -0,0 +1,33 @@\n+FROM fedora:latest\n+\n+# Install generic dependencies to build jss and pki\n+RUN true \\\n+        && dnf update -y --refresh \\\n+        && dnf install -y dnf-plugins-core gcc make rpm-build \\\n+        && dnf copr -y enable ${JSS_4_6_REPO:-@pki/master} \\\n+        && dnf build-dep -y jss pki \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5764edbed397867aad5678b78d473e2527ecbbb"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5NTM3OTkwOnYy", "diffSide": "RIGHT", "path": "tools/Dockerfiles/pki_build", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxNDoyNTo0NlrOF_ty1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxNDozNDowMFrOF_uMaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjM1NDkwMQ==", "bodyText": "builddep is covered again in line 21 and 22, which will install any missing/updated deps. Do we want to remove this line?", "url": "https://github.com/dogtagpki/jss/pull/463#discussion_r402354901", "createdAt": "2020-04-02T14:25:46Z", "author": {"login": "SilleBille"}, "path": "tools/Dockerfiles/pki_build", "diffHunk": "@@ -0,0 +1,33 @@\n+FROM fedora:latest\n+\n+# Install generic dependencies to build jss and pki\n+RUN true \\\n+        && dnf update -y --refresh \\\n+        && dnf install -y dnf-plugins-core gcc make rpm-build \\\n+        && dnf copr -y enable ${JSS_4_6_REPO:-@pki/master} \\\n+        && dnf build-dep -y jss pki-core \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b32efafc7289f588597e432922e393094743a58d"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjM2MTQ1MQ==", "bodyText": "This pulls in 99% of the deps in the first layer. The layer is cleaned (see dnf clean -y all -- though I had to keep tzinfo and the other directories unlike the other / container / images because PKI build fails without it for some reason).\nThis results in a smaller first layer with all the deps, and then only what is new (in these two versions of JSS/PKI) is pulled in during a separate layer.", "url": "https://github.com/dogtagpki/jss/pull/463#discussion_r402361451", "createdAt": "2020-04-02T14:34:00Z", "author": {"login": "cipherboy"}, "path": "tools/Dockerfiles/pki_build", "diffHunk": "@@ -0,0 +1,33 @@\n+FROM fedora:latest\n+\n+# Install generic dependencies to build jss and pki\n+RUN true \\\n+        && dnf update -y --refresh \\\n+        && dnf install -y dnf-plugins-core gcc make rpm-build \\\n+        && dnf copr -y enable ${JSS_4_6_REPO:-@pki/master} \\\n+        && dnf build-dep -y jss pki-core \\", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjM1NDkwMQ=="}, "originalCommit": {"oid": "b32efafc7289f588597e432922e393094743a58d"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2694, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}