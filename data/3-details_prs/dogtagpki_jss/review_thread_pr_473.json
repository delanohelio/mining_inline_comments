{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5OTM1NjIy", "number": 473, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQyMjoyNTo1OVrODvU-Rw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxMjoxMzoxM1rODwYQ4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwOTUzMjg3OnYy", "diffSide": "RIGHT", "path": "org/mozilla/jss/util/NativeProxy.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQyMjoyNTo1OVrOGBsLpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQyMjoyNTo1OVrOGBsLpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDQyNTYzNw==", "bodyText": "Duplicate line.", "url": "https://github.com/dogtagpki/jss/pull/473#discussion_r404425637", "createdAt": "2020-04-06T22:25:59Z", "author": {"login": "cipherboy"}, "path": "org/mozilla/jss/util/NativeProxy.java", "diffHunk": "@@ -125,11 +140,13 @@ protected void finalize() throws Throwable {\n      *\n      * See comment in finalize.\n      */\n-    public final void close() throws Exception {\n+    public synchronized final void close() throws Exception {\n         try {\n-            if (registry.remove(this)) {\n+            registry.remove(this);\n+            if (mPointer != null) {\n                 releaseNativeResources();\n             }\n+            registry.remove(this);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bf5f7252435f0fdcff8c14e25b3e8779391b13d6"}, "originalPosition": 66}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwOTUzMzc3OnYy", "diffSide": "RIGHT", "path": "org/mozilla/jss/util/NativeProxy.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQyMjoyNjoyM1rOGBsMNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQyMjoyNjoyM1rOGBsMNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDQyNTc4Mw==", "bodyText": "Noisy diff.", "url": "https://github.com/dogtagpki/jss/pull/473#discussion_r404425783", "createdAt": "2020-04-06T22:26:23Z", "author": {"login": "cipherboy"}, "path": "org/mozilla/jss/util/NativeProxy.java", "diffHunk": "@@ -144,15 +161,16 @@ public final void close() throws Exception {\n      *\n      * See also: JSS_clearPtrFromProxy(...) in jssutil.h\n      */\n-    public final void clear() {\n-        this.mPointer = null;\n+    public synchronized final void clear() {\n         registry.remove(this);\n+        this.mPointer = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bf5f7252435f0fdcff8c14e25b3e8779391b13d6"}, "originalPosition": 78}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwOTYzNTA1OnYy", "diffSide": "RIGHT", "path": "org/mozilla/jss/nss/PR.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQyMzowODowNlrOGBtJoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQwMDowNToyMlrOGCadEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDQ0MTUwNA==", "bodyText": "How about we convert this method into SSLFDProxy.close()?\nclass PRFDProxy extends NativeProxy {\n    public void close() {\n        PR.Close(this); // don't call JSS_clearPtrFromProxy()\n        super.close(); // release native resources\n    }\n}\n\nclass SSLFDProxy extends PRFDProxy {\n    public void close() {\n        if (!fd.isNull()) {\n            SSL.RemoveCallbacks(fd); \n        }\n        super.close();\n    }\n}", "url": "https://github.com/dogtagpki/jss/pull/473#discussion_r404441504", "createdAt": "2020-04-06T23:08:06Z", "author": {"login": "edewata"}, "path": "org/mozilla/jss/nss/PR.java", "diffHunk": "@@ -66,20 +66,38 @@ public static native PRFDProxy NewBufferPRFD(BufferProxy read_buf,\n                                                  BufferProxy write_buf,\n                                                  byte[] peer_info);\n     /**\n-     * Close an existing PRFDProxy.\n+     * Close an existing PRFDProxy, clearing the pointer if successful.\n      *\n      * See also: PR_Close in /usr/include/nspr4/prio.h\n      */\n-    public static native int Close(PRFDProxy fd);\n+    public static int Close(PRFDProxy fd) {\n+        return Close(fd, true);\n+    }\n+\n+    /**\n+     * Close an existing PRFDProxy with an option to clear the pointer.\n+     *\n+     * See also: PR_Close in /usr/include/nspr4/prio.h\n+     */\n+    public static native int Close(PRFDProxy fd, boolean clear);\n \n     /**\n      * Close an existing SSLFDProxy.\n      *\n      * See also: org.mozilla.jss.nss.PR.Close\n-     *           org.mozilla.jss.nss.SSLFD.releaseNativeResources\n+     *           org.mozilla.jss.nss.SSLFDProxy.releaseNativeResources\n      */\n-    public static int Close(SSLFDProxy fd) throws Exception {\n-        int ret = PR.Close((PRFDProxy) fd);\n+    public synchronized static int Close(SSLFDProxy fd) throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8369e97dcf566172bfe42444f7e0eaf80de670bb"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDQ1MDA4OQ==", "bodyText": "PR is static class and contains wrappers for NSPR functions beginning with the prefix PR_, of which PR_Close() is one. Since SSLFDProxy has the same native pointer type as PRFDProxy (a PRFileDesc * -- the difference is the former has been wrapped by a call to SSL.ImportFD(...)) there is no difference. All PR_ functions work, because NSS creates another PRFileDesc layer for SSL, on top of the existing one. We need to do a little more work in PR_Close on a SSLFDProxy instance, because we need to invoke the SSLFDProxy.close(...) method as well, which we don't necessarily want to do if it is NULL.\nOn the other hand PRProxy.close() and SSLFDProxy.close() take no arguments and are part of the NativeProxy+AutoCloseable interface, which free the proxy and clear the mPointer instance.\n\nOur use of PR_Close(PRFileDesc *) is limited mostly to SSLFDProxy instances, but we do test it on files as well, in the test suite.", "url": "https://github.com/dogtagpki/jss/pull/473#discussion_r404450089", "createdAt": "2020-04-06T23:33:28Z", "author": {"login": "cipherboy"}, "path": "org/mozilla/jss/nss/PR.java", "diffHunk": "@@ -66,20 +66,38 @@ public static native PRFDProxy NewBufferPRFD(BufferProxy read_buf,\n                                                  BufferProxy write_buf,\n                                                  byte[] peer_info);\n     /**\n-     * Close an existing PRFDProxy.\n+     * Close an existing PRFDProxy, clearing the pointer if successful.\n      *\n      * See also: PR_Close in /usr/include/nspr4/prio.h\n      */\n-    public static native int Close(PRFDProxy fd);\n+    public static int Close(PRFDProxy fd) {\n+        return Close(fd, true);\n+    }\n+\n+    /**\n+     * Close an existing PRFDProxy with an option to clear the pointer.\n+     *\n+     * See also: PR_Close in /usr/include/nspr4/prio.h\n+     */\n+    public static native int Close(PRFDProxy fd, boolean clear);\n \n     /**\n      * Close an existing SSLFDProxy.\n      *\n      * See also: org.mozilla.jss.nss.PR.Close\n-     *           org.mozilla.jss.nss.SSLFD.releaseNativeResources\n+     *           org.mozilla.jss.nss.SSLFDProxy.releaseNativeResources\n      */\n-    public static int Close(SSLFDProxy fd) throws Exception {\n-        int ret = PR.Close((PRFDProxy) fd);\n+    public synchronized static int Close(SSLFDProxy fd) throws Exception {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDQ0MTUwNA=="}, "originalCommit": {"oid": "8369e97dcf566172bfe42444f7e0eaf80de670bb"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDQ1MTEyMg==", "bodyText": "Namely, PRFDProxy.close() doesn't invoke anything actually -- but we explicitly call PR.Close(...) in SSLEngine's cleanup() handler. The issue is we can't call this strictly a \"free\" method -- closing a PRFDProxy via PR_Close(...) might send data over the network if the TLS connection hasn't properly terminated. This violates the contract for NativeProxy.releaseNativeResources(). We don't necessarily want to do that (nor do we necessary have space in our buffers, ... &c), hence why PRFDProxy.close() doesn't do anything and why SSLFDProxy.close() only (tries to) free the GlobalRefProxy self-pointer.\nEdit: Accidentally left out a few words.", "url": "https://github.com/dogtagpki/jss/pull/473#discussion_r404451122", "createdAt": "2020-04-06T23:36:44Z", "author": {"login": "cipherboy"}, "path": "org/mozilla/jss/nss/PR.java", "diffHunk": "@@ -66,20 +66,38 @@ public static native PRFDProxy NewBufferPRFD(BufferProxy read_buf,\n                                                  BufferProxy write_buf,\n                                                  byte[] peer_info);\n     /**\n-     * Close an existing PRFDProxy.\n+     * Close an existing PRFDProxy, clearing the pointer if successful.\n      *\n      * See also: PR_Close in /usr/include/nspr4/prio.h\n      */\n-    public static native int Close(PRFDProxy fd);\n+    public static int Close(PRFDProxy fd) {\n+        return Close(fd, true);\n+    }\n+\n+    /**\n+     * Close an existing PRFDProxy with an option to clear the pointer.\n+     *\n+     * See also: PR_Close in /usr/include/nspr4/prio.h\n+     */\n+    public static native int Close(PRFDProxy fd, boolean clear);\n \n     /**\n      * Close an existing SSLFDProxy.\n      *\n      * See also: org.mozilla.jss.nss.PR.Close\n-     *           org.mozilla.jss.nss.SSLFD.releaseNativeResources\n+     *           org.mozilla.jss.nss.SSLFDProxy.releaseNativeResources\n      */\n-    public static int Close(SSLFDProxy fd) throws Exception {\n-        int ret = PR.Close((PRFDProxy) fd);\n+    public synchronized static int Close(SSLFDProxy fd) throws Exception {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDQ0MTUwNA=="}, "originalCommit": {"oid": "8369e97dcf566172bfe42444f7e0eaf80de670bb"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDgxNTI0OQ==", "bodyText": "Keep in mind, nss.PR is meant to be a thin wrapper over NSPR functions. Just like nss.SSL is a thin wrapper over SSL_ functions. We're likely going to move as much of this behind a single, large JNI call in an optimized SSLEngine implementation. Some of these details will thus go away.", "url": "https://github.com/dogtagpki/jss/pull/473#discussion_r404815249", "createdAt": "2020-04-07T13:38:03Z", "author": {"login": "cipherboy"}, "path": "org/mozilla/jss/nss/PR.java", "diffHunk": "@@ -66,20 +66,38 @@ public static native PRFDProxy NewBufferPRFD(BufferProxy read_buf,\n                                                  BufferProxy write_buf,\n                                                  byte[] peer_info);\n     /**\n-     * Close an existing PRFDProxy.\n+     * Close an existing PRFDProxy, clearing the pointer if successful.\n      *\n      * See also: PR_Close in /usr/include/nspr4/prio.h\n      */\n-    public static native int Close(PRFDProxy fd);\n+    public static int Close(PRFDProxy fd) {\n+        return Close(fd, true);\n+    }\n+\n+    /**\n+     * Close an existing PRFDProxy with an option to clear the pointer.\n+     *\n+     * See also: PR_Close in /usr/include/nspr4/prio.h\n+     */\n+    public static native int Close(PRFDProxy fd, boolean clear);\n \n     /**\n      * Close an existing SSLFDProxy.\n      *\n      * See also: org.mozilla.jss.nss.PR.Close\n-     *           org.mozilla.jss.nss.SSLFD.releaseNativeResources\n+     *           org.mozilla.jss.nss.SSLFDProxy.releaseNativeResources\n      */\n-    public static int Close(SSLFDProxy fd) throws Exception {\n-        int ret = PR.Close((PRFDProxy) fd);\n+    public synchronized static int Close(SSLFDProxy fd) throws Exception {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDQ0MTUwNA=="}, "originalCommit": {"oid": "8369e97dcf566172bfe42444f7e0eaf80de670bb"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTE4Mzc2MQ==", "bodyText": "I'm not really familiar with all the details, so I'll let you decide :) And feel free to merge as is since it's already approved. Anything we discussed here is for a possible future enhancement.\nTo my understanding NSPR only has a PR_Close(PRFileDesc*) function which is already wrapped by PR.Close(PRFDProxy). The PR.Close(SSLFDProxy) on the other hand does not have a corresponding native code in NSPR. Also, that method has a dependency on SSL class which is a wrapper for NSS. From design perspective I don't think a wrapper for NSPR should depend on a wrapper for NSS.\nI think if we want to do something similar to PR.Close(PRFDProxy), we probably should add an SSL.Close(SSLFDProxy) instead. Or we can just add an SSLFDProxy.close() like I described earlier. If we don't want to add PRFDProxy.close(), we probably can do something like this:\nclass SSLFDProxy extends PRFDProxy {\n    public void close() {\n        if (fd.isNull()) {\n            return;\n        }\n        SSL.RemoveCallbacks(fd); \n        PR.Close(this, false);\n        releaseNativeResources();\n    }\n}\n\nIt should be functionally identical to your code without creating an NSPR -> NSS dependency issue.", "url": "https://github.com/dogtagpki/jss/pull/473#discussion_r405183761", "createdAt": "2020-04-08T00:05:22Z", "author": {"login": "edewata"}, "path": "org/mozilla/jss/nss/PR.java", "diffHunk": "@@ -66,20 +66,38 @@ public static native PRFDProxy NewBufferPRFD(BufferProxy read_buf,\n                                                  BufferProxy write_buf,\n                                                  byte[] peer_info);\n     /**\n-     * Close an existing PRFDProxy.\n+     * Close an existing PRFDProxy, clearing the pointer if successful.\n      *\n      * See also: PR_Close in /usr/include/nspr4/prio.h\n      */\n-    public static native int Close(PRFDProxy fd);\n+    public static int Close(PRFDProxy fd) {\n+        return Close(fd, true);\n+    }\n+\n+    /**\n+     * Close an existing PRFDProxy with an option to clear the pointer.\n+     *\n+     * See also: PR_Close in /usr/include/nspr4/prio.h\n+     */\n+    public static native int Close(PRFDProxy fd, boolean clear);\n \n     /**\n      * Close an existing SSLFDProxy.\n      *\n      * See also: org.mozilla.jss.nss.PR.Close\n-     *           org.mozilla.jss.nss.SSLFD.releaseNativeResources\n+     *           org.mozilla.jss.nss.SSLFDProxy.releaseNativeResources\n      */\n-    public static int Close(SSLFDProxy fd) throws Exception {\n-        int ret = PR.Close((PRFDProxy) fd);\n+    public synchronized static int Close(SSLFDProxy fd) throws Exception {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDQ0MTUwNA=="}, "originalCommit": {"oid": "8369e97dcf566172bfe42444f7e0eaf80de670bb"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwOTY0OTMwOnYy", "diffSide": "RIGHT", "path": "org/mozilla/jss/nss/PR.c", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQyMzoxNDoxN1rOGBtSCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxNTo1MjoxOVrOGDe3Cg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDQ0MzY1OA==", "bodyText": "It looks like this condition only happens in JSS tests. If there is no real usage where clear == JNI_TRUE we might as well simplify the code to no longer call JSS_clearPtrFromProxy(). See also my other comment about not calling JSS_clearPtrFromProxy().", "url": "https://github.com/dogtagpki/jss/pull/473#discussion_r404443658", "createdAt": "2020-04-06T23:14:17Z", "author": {"login": "edewata"}, "path": "org/mozilla/jss/nss/PR.c", "diffHunk": "@@ -106,7 +106,7 @@ Java_org_mozilla_jss_nss_PR_Close(JNIEnv *env, jclass clazz, jobject fd)\n     }\n \n     PRStatus ret = PR_Close(real_fd);\n-    if (ret == PR_SUCCESS) {\n+    if (ret == PR_SUCCESS && clear == JNI_TRUE) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8369e97dcf566172bfe42444f7e0eaf80de670bb"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjMwNDUyMg==", "bodyText": "Yeah I think we could update this in a separate PR and simplify how these are handled.", "url": "https://github.com/dogtagpki/jss/pull/473#discussion_r406304522", "createdAt": "2020-04-09T15:52:19Z", "author": {"login": "cipherboy"}, "path": "org/mozilla/jss/nss/PR.c", "diffHunk": "@@ -106,7 +106,7 @@ Java_org_mozilla_jss_nss_PR_Close(JNIEnv *env, jclass clazz, jobject fd)\n     }\n \n     PRStatus ret = PR_Close(real_fd);\n-    if (ret == PR_SUCCESS) {\n+    if (ret == PR_SUCCESS && clear == JNI_TRUE) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDQ0MzY1OA=="}, "originalCommit": {"oid": "8369e97dcf566172bfe42444f7e0eaf80de670bb"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUwOTY3NTcyOnYy", "diffSide": "RIGHT", "path": "org/mozilla/jss/util/NativeProxy.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQyMzoyNjowNVrOGBth8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQyMzozOToxN1rOGBtypg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDQ0NzczMQ==", "bodyText": "We probably can use AtomicInteger:\nstatic AtomicInteger counter = new AtomicInteger();\nint index;\n\nprotected NativeProxy(byte[] pointer, boolean track) {\n    index = counter.getAndIncrement();\n}\npublic int hashCode() {\n    return index;\n}", "url": "https://github.com/dogtagpki/jss/pull/473#discussion_r404447731", "createdAt": "2020-04-06T23:26:05Z", "author": {"login": "edewata"}, "path": "org/mozilla/jss/util/NativeProxy.java", "diffHunk": "@@ -173,6 +197,21 @@ public final void clear() {\n      * releaseNativeResources() gets called.\n      */\n     static HashSet<NativeProxy> registry = new HashSet<NativeProxy>();\n+    static int registryIndex;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8369e97dcf566172bfe42444f7e0eaf80de670bb"}, "originalPosition": 105}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDQ1MjAwNg==", "bodyText": "Yeah, AtomicInteger is probably the best bet. The old NativeProxy used a random integer. \ud83e\udd84", "url": "https://github.com/dogtagpki/jss/pull/473#discussion_r404452006", "createdAt": "2020-04-06T23:39:17Z", "author": {"login": "cipherboy"}, "path": "org/mozilla/jss/util/NativeProxy.java", "diffHunk": "@@ -173,6 +197,21 @@ public final void clear() {\n      * releaseNativeResources() gets called.\n      */\n     static HashSet<NativeProxy> registry = new HashSet<NativeProxy>();\n+    static int registryIndex;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDQ0NzczMQ=="}, "originalCommit": {"oid": "8369e97dcf566172bfe42444f7e0eaf80de670bb"}, "originalPosition": 105}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyMDU1Nzc4OnYy", "diffSide": "RIGHT", "path": "org/mozilla/jss/util/NativeProxy.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxMjoxMzoxM1rOGDWELQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxMjoxMzoxM1rOGDWELQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE2MDQyOQ==", "bodyText": "@edewata  -- I think this might be better and provide more random distribution of mHashCode.", "url": "https://github.com/dogtagpki/jss/pull/473#discussion_r406160429", "createdAt": "2020-04-09T12:13:13Z", "author": {"login": "cipherboy"}, "path": "org/mozilla/jss/util/NativeProxy.java", "diffHunk": "@@ -51,10 +53,13 @@ public NativeProxy(byte[] pointer) {\n      */\n     protected NativeProxy(byte[] pointer, boolean track) {\n         mPointer = pointer;\n+        mHashCode = registryIndex.getAndIncrement();\n+        if (mPointer != null) {\n+            mHashCode = Objects.hash(mHashCode, Arrays.hashCode(mPointer));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1c5598c93dd38139609e1bf3760a957757935621"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2707, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}