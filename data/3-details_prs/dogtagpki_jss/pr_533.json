{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDExODQzMDM5", "number": 533, "title": "Hack: provide SSLContext's SSLSocket via SunJSSE", "bodyText": "Use the default SunJSSE provider to implement getSocketFactory and\ngetServerSocketFactory rather than returning null. This should appease\nimplementations expecting a SocketFactory instance.\nSigned-off-by: Alexander Scheel <ascheel@redhat.com>", "createdAt": "2020-04-30T21:21:20Z", "url": "https://github.com/dogtagpki/jss/pull/533", "merged": true, "mergeCommit": {"oid": "c0d054b8f8118a45db59bf3f994ff6414439d9ea"}, "closed": true, "closedAt": "2020-04-30T22:27:33Z", "author": {"login": "cipherboy"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABccz4UTABqjMyOTEzOTgyMDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcc0NWAABqjMyOTE0Njg1MDE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6085a9fe441e24e91fef6050d433dbffd0112c2f", "author": {"user": {"login": "cipherboy", "name": "Alexander Scheel"}}, "url": "https://github.com/dogtagpki/jss/commit/6085a9fe441e24e91fef6050d433dbffd0112c2f", "committedDate": "2020-04-30T21:19:34Z", "message": "Hack: provide SSLContext's SSLSocket via SunJSSE\n\nUse the default SunJSSE provider to implement getSocketFactory and\ngetServerSocketFactory rather than returning null. This should appease\nimplementations expecting a SocketFactory instance.\n\nSigned-off-by: Alexander Scheel <ascheel@redhat.com>"}, "afterCommit": {"oid": "15861dcedd37284f0483ad2ebefb2ef7fa26d13c", "author": {"user": {"login": "cipherboy", "name": "Alexander Scheel"}}, "url": "https://github.com/dogtagpki/jss/commit/15861dcedd37284f0483ad2ebefb2ef7fa26d13c", "committedDate": "2020-04-30T21:22:32Z", "message": "Hack: provide SSLContext's SSLSocket via SunJSSE\n\nUse the default SunJSSE provider to implement getSocketFactory and\ngetServerSocketFactory rather than returning null. This should appease\nimplementations expecting a SocketFactory instance.\n\nSigned-off-by: Alexander Scheel <ascheel@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzODkzNjAw", "url": "https://github.com/dogtagpki/jss/pull/533#pullrequestreview-403893600", "createdAt": "2020-04-30T21:33:54Z", "commit": {"oid": "15861dcedd37284f0483ad2ebefb2ef7fa26d13c"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQyMTozMzo1NVrOGO7IfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQyMTozNDowMlrOGO7Itw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODMwMjA3Ng==", "bodyText": "Let's rethrow the exception to help troubleshooting:\nthrow new RuntimeException(e);", "url": "https://github.com/dogtagpki/jss/pull/533#discussion_r418302076", "createdAt": "2020-04-30T21:33:55Z", "author": {"login": "edewata"}, "path": "org/mozilla/jss/provider/javax/net/JSSContextSpi.java", "diffHunk": "@@ -88,13 +88,23 @@ public SSLSessionContext engineGetServerSessionContext() {\n     }\n \n     public SSLServerSocketFactory engineGetServerSocketFactory() {\n-        logger.debug(\"JSSContextSpi.engineGetServerSocketFactory() - not implemented\");\n-        return null;\n+        logger.warn(\"JSSContextSpi.engineGetServerSocketFactory() - not implemented - stubbing with SunJSSE\");\n+        try {\n+            SSLContext jsse = SSLContext.getInstance(\"TLS\", \"SunJSSE\");\n+            return jsse.getServerSocketFactory();\n+        } catch (Exception e) {\n+            return null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15861dcedd37284f0483ad2ebefb2ef7fa26d13c"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODMwMjEzNQ==", "bodyText": "Same thing.", "url": "https://github.com/dogtagpki/jss/pull/533#discussion_r418302135", "createdAt": "2020-04-30T21:34:02Z", "author": {"login": "edewata"}, "path": "org/mozilla/jss/provider/javax/net/JSSContextSpi.java", "diffHunk": "@@ -88,13 +88,23 @@ public SSLSessionContext engineGetServerSessionContext() {\n     }\n \n     public SSLServerSocketFactory engineGetServerSocketFactory() {\n-        logger.debug(\"JSSContextSpi.engineGetServerSocketFactory() - not implemented\");\n-        return null;\n+        logger.warn(\"JSSContextSpi.engineGetServerSocketFactory() - not implemented - stubbing with SunJSSE\");\n+        try {\n+            SSLContext jsse = SSLContext.getInstance(\"TLS\", \"SunJSSE\");\n+            return jsse.getServerSocketFactory();\n+        } catch (Exception e) {\n+            return null;\n+        }\n     }\n \n     public SSLSocketFactory engineGetSocketFactory() {\n-        logger.debug(\"JSSContextSpi.engineGetSocketFactory() - not implemented\");\n-        return null;\n+        logger.warn(\"JSSContextSpi.engineGetSocketFactory() - not implemented - stubbing with SunJSSE\");\n+        try {\n+            SSLContext jsse = SSLContext.getInstance(\"TLS\", \"SunJSSE\");\n+            return jsse.getSocketFactory();\n+        } catch (Exception e) {\n+            return null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15861dcedd37284f0483ad2ebefb2ef7fa26d13c"}, "originalPosition": 23}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "15861dcedd37284f0483ad2ebefb2ef7fa26d13c", "author": {"user": {"login": "cipherboy", "name": "Alexander Scheel"}}, "url": "https://github.com/dogtagpki/jss/commit/15861dcedd37284f0483ad2ebefb2ef7fa26d13c", "committedDate": "2020-04-30T21:22:32Z", "message": "Hack: provide SSLContext's SSLSocket via SunJSSE\n\nUse the default SunJSSE provider to implement getSocketFactory and\ngetServerSocketFactory rather than returning null. This should appease\nimplementations expecting a SocketFactory instance.\n\nSigned-off-by: Alexander Scheel <ascheel@redhat.com>"}, "afterCommit": {"oid": "2e91d42dcb34ef721fecde283a00ac8fc26bea43", "author": {"user": {"login": "cipherboy", "name": "Alexander Scheel"}}, "url": "https://github.com/dogtagpki/jss/commit/2e91d42dcb34ef721fecde283a00ac8fc26bea43", "committedDate": "2020-04-30T21:38:57Z", "message": "Hack: provide JSSContext's SSLSocket via SunJSSE\n\nUse the default SunJSSE provider to implement getSocketFactory and\ngetServerSocketFactory rather than returning null. This should appease\nimplementations expecting a SocketFactory instance.\n\nSigned-off-by: Alexander Scheel <ascheel@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c05528a8c5fe982e32dadb2439c28d850a419b0", "author": {"user": {"login": "cipherboy", "name": "Alexander Scheel"}}, "url": "https://github.com/dogtagpki/jss/commit/3c05528a8c5fe982e32dadb2439c28d850a419b0", "committedDate": "2020-04-30T21:45:28Z", "message": "Hack: provide JSSContext's SSLSocket via SunJSSE\n\nUse the default SunJSSE provider to implement getSocketFactory and\ngetServerSocketFactory rather than returning null. This should appease\nimplementations expecting a SocketFactory instance.\n\nSigned-off-by: Alexander Scheel <ascheel@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2e91d42dcb34ef721fecde283a00ac8fc26bea43", "author": {"user": {"login": "cipherboy", "name": "Alexander Scheel"}}, "url": "https://github.com/dogtagpki/jss/commit/2e91d42dcb34ef721fecde283a00ac8fc26bea43", "committedDate": "2020-04-30T21:38:57Z", "message": "Hack: provide JSSContext's SSLSocket via SunJSSE\n\nUse the default SunJSSE provider to implement getSocketFactory and\ngetServerSocketFactory rather than returning null. This should appease\nimplementations expecting a SocketFactory instance.\n\nSigned-off-by: Alexander Scheel <ascheel@redhat.com>"}, "afterCommit": {"oid": "3c05528a8c5fe982e32dadb2439c28d850a419b0", "author": {"user": {"login": "cipherboy", "name": "Alexander Scheel"}}, "url": "https://github.com/dogtagpki/jss/commit/3c05528a8c5fe982e32dadb2439c28d850a419b0", "committedDate": "2020-04-30T21:45:28Z", "message": "Hack: provide JSSContext's SSLSocket via SunJSSE\n\nUse the default SunJSSE provider to implement getSocketFactory and\ngetServerSocketFactory rather than returning null. This should appease\nimplementations expecting a SocketFactory instance.\n\nSigned-off-by: Alexander Scheel <ascheel@redhat.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1499, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}