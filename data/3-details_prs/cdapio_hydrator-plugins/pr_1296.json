{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ0NzY1NDgz", "number": 1296, "title": "Handle CDAP Decimal for DBSink", "bodyText": "JIRA Ticket: https://cdap.atlassian.net/browse/PLUGIN-180", "createdAt": "2020-12-23T13:01:57Z", "url": "https://github.com/cdapio/hydrator-plugins/pull/1296", "merged": true, "mergeCommit": {"oid": "d4c0aa79f8097649ef4259b19314db39cdd13981"}, "closed": true, "closedAt": "2021-01-20T20:45:54Z", "author": {"login": "vjosadika"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdqp-UjAFqTU1OTI0MjQ5Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdyEzwYAFqTU3MjU0MzAyNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5MjQyNDkz", "url": "https://github.com/cdapio/hydrator-plugins/pull/1296#pullrequestreview-559242493", "createdAt": "2020-12-28T17:54:43Z", "commit": {"oid": "9073013b7d41aee8fbe57df9d70e10efc6bf4209"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOFQxNzo1NDo0M1rOIL-s_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOFQxNzo1NTo1OFrOIL-uVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTQzMjU3NA==", "bodyText": "writeToDataOut this method should also be modified", "url": "https://github.com/cdapio/hydrator-plugins/pull/1296#discussion_r549432574", "createdAt": "2020-12-28T17:54:43Z", "author": {"login": "CuriousVini"}, "path": "database-plugins/src/main/java/io/cdap/plugin/DBRecord.java", "diffHunk": "@@ -285,6 +285,11 @@ private void writeToDB(PreparedStatement stmt, Schema.Field field, int fieldInde\n           stmt.setTimestamp(sqlIndex, Timestamp.from(record.getTimestamp(fieldName).toInstant()));\n           bytesWritten += Long.BYTES;\n           break;\n+        case DECIMAL:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9073013b7d41aee8fbe57df9d70e10efc6bf4209"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTQzMjkxOA==", "bodyText": "what is the existing behavior when database sink writes to DB? Is this change backwards compatible?", "url": "https://github.com/cdapio/hydrator-plugins/pull/1296#discussion_r549432918", "createdAt": "2020-12-28T17:55:58Z", "author": {"login": "CuriousVini"}, "path": "database-plugins/src/main/java/io/cdap/plugin/DBRecord.java", "diffHunk": "@@ -285,6 +285,11 @@ private void writeToDB(PreparedStatement stmt, Schema.Field field, int fieldInde\n           stmt.setTimestamp(sqlIndex, Timestamp.from(record.getTimestamp(fieldName).toInstant()));\n           bytesWritten += Long.BYTES;\n           break;\n+        case DECIMAL:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTQzMjU3NA=="}, "originalCommit": {"oid": "9073013b7d41aee8fbe57df9d70e10efc6bf4209"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwMjAxOTY2", "url": "https://github.com/cdapio/hydrator-plugins/pull/1296#pullrequestreview-560201966", "createdAt": "2020-12-30T21:12:14Z", "commit": {"oid": "9073013b7d41aee8fbe57df9d70e10efc6bf4209"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMFQyMToxMjoxNFrOIM1YkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMFQyMToxMjoxNFrOIM1YkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDMyODQ2NQ==", "bodyText": "Should we also add the size of the scale (int)?", "url": "https://github.com/cdapio/hydrator-plugins/pull/1296#discussion_r550328465", "createdAt": "2020-12-30T21:12:14Z", "author": {"login": "rmstar"}, "path": "database-plugins/src/main/java/io/cdap/plugin/DBRecord.java", "diffHunk": "@@ -285,6 +285,11 @@ private void writeToDB(PreparedStatement stmt, Schema.Field field, int fieldInde\n           stmt.setTimestamp(sqlIndex, Timestamp.from(record.getTimestamp(fieldName).toInstant()));\n           bytesWritten += Long.BYTES;\n           break;\n+        case DECIMAL:\n+          BigDecimal value = record.getDecimal(fieldName);\n+          stmt.setBigDecimal(sqlIndex, value);\n+          bytesWritten += value.unscaledValue().bitLength() / Byte.SIZE;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9073013b7d41aee8fbe57df9d70e10efc6bf4209"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY4NzkwNzQx", "url": "https://github.com/cdapio/hydrator-plugins/pull/1296#pullrequestreview-568790741", "createdAt": "2021-01-15T03:21:05Z", "commit": {"oid": "035ca453c1d9bd0d32b1d6e9c1ad655fbf8857ef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcyNDgxNjc3", "url": "https://github.com/cdapio/hydrator-plugins/pull/1296#pullrequestreview-572481677", "createdAt": "2021-01-20T17:52:31Z", "commit": {"oid": "035ca453c1d9bd0d32b1d6e9c1ad655fbf8857ef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21f23235c179a24aaf6e3bcfa536cc59efa67436", "author": {"user": {"login": "vjosadika", "name": null}}, "url": "https://github.com/cdapio/hydrator-plugins/commit/21f23235c179a24aaf6e3bcfa536cc59efa67436", "committedDate": "2021-01-20T19:04:23Z", "message": "PLUGIN-180 handle CDAP Decimal for DBSink"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "035ca453c1d9bd0d32b1d6e9c1ad655fbf8857ef", "author": {"user": {"login": "ardian4", "name": null}}, "url": "https://github.com/cdapio/hydrator-plugins/commit/035ca453c1d9bd0d32b1d6e9c1ad655fbf8857ef", "committedDate": "2020-12-31T10:27:43Z", "message": "Fix the size of bytes for BigDecimal"}, "afterCommit": {"oid": "21f23235c179a24aaf6e3bcfa536cc59efa67436", "author": {"user": {"login": "vjosadika", "name": null}}, "url": "https://github.com/cdapio/hydrator-plugins/commit/21f23235c179a24aaf6e3bcfa536cc59efa67436", "committedDate": "2021-01-20T19:04:23Z", "message": "PLUGIN-180 handle CDAP Decimal for DBSink"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcyNTQzMDI2", "url": "https://github.com/cdapio/hydrator-plugins/pull/1296#pullrequestreview-572543026", "createdAt": "2021-01-20T19:09:36Z", "commit": {"oid": "21f23235c179a24aaf6e3bcfa536cc59efa67436"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1538, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}