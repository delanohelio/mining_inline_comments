{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY3NzIzOTI5", "number": 1176, "title": "[PLUGIN-370] Improved Cassandra Validations", "bodyText": "See PLUGIN-370. Moved some validations to validate function, ensure validations on username+password is done in both configurePipeline and prepareRun.", "createdAt": "2020-08-14T02:00:33Z", "url": "https://github.com/cdapio/hydrator-plugins/pull/1176", "merged": true, "mergeCommit": {"oid": "355bdbca60b5cb61e8d8f7f52ca55e679440c958"}, "closed": true, "closedAt": "2020-08-14T10:04:24Z", "author": {"login": "dli357"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-rRd5gFqTQ2NzI3MDY3NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-sSUSgBqjM2NTQ2NDAxMDU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3MjcwNjc1", "url": "https://github.com/cdapio/hydrator-plugins/pull/1176#pullrequestreview-467270675", "createdAt": "2020-08-14T02:34:22Z", "commit": {"oid": "e1838b518da6a4465270a68eef133429b2f625f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQwMjozNDoyM1rOHAliwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQwMjozNDoyM1rOHAliwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDM3NzE1NA==", "bodyText": "more clear to put in this way:\n!containsMacro(Cassandra.USERNAME) && !containsMacro(Cassandra.PASSWORD) && (Strings.isNullOrEmpty(username) ^ Strings.isNullOrEmpty(password))", "url": "https://github.com/cdapio/hydrator-plugins/pull/1176#discussion_r470377154", "createdAt": "2020-08-14T02:34:23Z", "author": {"login": "shifuxu0301"}, "path": "cassandra-plugins/src/main/java/io/cdap/plugin/batch/source/BatchCassandraSource.java", "diffHunk": "@@ -273,6 +272,22 @@ private Schema getSchema() {\n         throw new IllegalArgumentException(\"Invalid schema: \" + e.getMessage());\n       }\n     }\n+\n+    public void validate(FailureCollector collector) {\n+      if (Strings.isNullOrEmpty(schema)) {\n+        collector.addFailure(\"Schema must be specified.\", null).withConfigProperty(Cassandra.SCHEMA);\n+      }\n+      if (port != null && (port < 1 || port > 65535)) {\n+        collector.addFailure(\"Invalid port.\", \"Port number must be an integer from 1 to 65535.\")\n+          .withConfigProperty(BatchCassandraSink.Cassandra.PORT);\n+      }\n+      if ((!containsMacro(Cassandra.USERNAME) && !containsMacro(Cassandra.PASSWORD)) &&", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1838b518da6a4465270a68eef133429b2f625f6"}, "originalPosition": 61}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3MjcwOTQy", "url": "https://github.com/cdapio/hydrator-plugins/pull/1176#pullrequestreview-467270942", "createdAt": "2020-08-14T02:35:17Z", "commit": {"oid": "e1838b518da6a4465270a68eef133429b2f625f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQwMjozNToxN1rOHAljsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xNFQwMjozNToxN1rOHAljsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDM3NzM5Mg==", "bodyText": "\"Invalid port number.\" Same thing below.", "url": "https://github.com/cdapio/hydrator-plugins/pull/1176#discussion_r470377392", "createdAt": "2020-08-14T02:35:17Z", "author": {"login": "shifuxu0301"}, "path": "cassandra-plugins/src/main/java/io/cdap/plugin/batch/sink/BatchCassandraSink.java", "diffHunk": "@@ -178,6 +189,13 @@ public CassandraBatchConfig(String referenceName, String partitioner, @Nullable\n       this.columns = columns;\n       this.primaryKey = primaryKey;\n     }\n+\n+    public void validate(FailureCollector collector) {\n+      if (port != null && (port < 1 || port > 65535)) {\n+        collector.addFailure(\"Invalid port.\", \"Port number must be an integer from 1 to 65535.\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1838b518da6a4465270a68eef133429b2f625f6"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3MjcxMDU2", "url": "https://github.com/cdapio/hydrator-plugins/pull/1176#pullrequestreview-467271056", "createdAt": "2020-08-14T02:35:42Z", "commit": {"oid": "e1838b518da6a4465270a68eef133429b2f625f6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5889119595e33103f65148d8cf269af7cc15a9db", "author": {"user": {"login": "dli357", "name": "Dennis Li"}}, "url": "https://github.com/cdapio/hydrator-plugins/commit/5889119595e33103f65148d8cf269af7cc15a9db", "committedDate": "2020-08-14T03:44:51Z", "message": "[PLUGIN-370] Moved validations to helper, added port validation, validate username password combo in deployment\n\n[PLUGIN-370] Shorten username password conditional, improve error messages for ports"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e117883d46b6b9643617b1bae92c76045601d1ce", "author": {"user": {"login": "dli357", "name": "Dennis Li"}}, "url": "https://github.com/cdapio/hydrator-plugins/commit/e117883d46b6b9643617b1bae92c76045601d1ce", "committedDate": "2020-08-14T03:42:29Z", "message": "[PLUGIN-370] Shorten username password conditional, improve error messages for ports"}, "afterCommit": {"oid": "5889119595e33103f65148d8cf269af7cc15a9db", "author": {"user": {"login": "dli357", "name": "Dennis Li"}}, "url": "https://github.com/cdapio/hydrator-plugins/commit/5889119595e33103f65148d8cf269af7cc15a9db", "committedDate": "2020-08-14T03:44:51Z", "message": "[PLUGIN-370] Moved validations to helper, added port validation, validate username password combo in deployment\n\n[PLUGIN-370] Shorten username password conditional, improve error messages for ports"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1572, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}