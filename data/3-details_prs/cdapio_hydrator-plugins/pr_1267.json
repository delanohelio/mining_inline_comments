{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM2NTYxNTc5", "number": 1267, "title": "[CDAP-17447] Emit bytes written metric for database sinks", "bodyText": "", "createdAt": "2020-12-11T06:51:32Z", "url": "https://github.com/cdapio/hydrator-plugins/pull/1267", "merged": true, "mergeCommit": {"oid": "c07aa337247fcc0dfa603b63ec3cf3978ba81624"}, "closed": true, "closedAt": "2020-12-12T02:26:42Z", "author": {"login": "rmstar"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdlM1cSABqjQxMDE5MTM1NTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdlO56zABqjQxMDI0Nzk4Mzk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a8a0fc0eaee7af28f9d6a74eb294a16307526d55", "author": {"user": {"login": "rmstar", "name": "Prashant Jaikumar"}}, "url": "https://github.com/cdapio/hydrator-plugins/commit/a8a0fc0eaee7af28f9d6a74eb294a16307526d55", "committedDate": "2020-12-11T06:32:21Z", "message": "[CDAP-17447] Emit bytes written metric for database sinks"}, "afterCommit": {"oid": "603cfa28bb52df752a2bbfccae605b3b392741ae", "author": {"user": {"login": "rmstar", "name": "Prashant Jaikumar"}}, "url": "https://github.com/cdapio/hydrator-plugins/commit/603cfa28bb52df752a2bbfccae605b3b392741ae", "committedDate": "2020-12-11T19:09:28Z", "message": "[CDAP-17447] Emit bytes written metric for database sinks"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwNTE0MzEy", "url": "https://github.com/cdapio/hydrator-plugins/pull/1267#pullrequestreview-550514312", "createdAt": "2020-12-11T19:23:45Z", "commit": {"oid": "603cfa28bb52df752a2bbfccae605b3b392741ae"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxOToyNTozMVrOIEHz2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxOToyNjoxNlrOIEH2oQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE5MzE3OQ==", "bodyText": "No need. Default value of long field is already 0L.", "url": "https://github.com/cdapio/hydrator-plugins/pull/1267#discussion_r541193179", "createdAt": "2020-12-11T19:25:31Z", "author": {"login": "chtyim"}, "path": "database-plugins/src/main/java/io/cdap/plugin/DBRecord.java", "diffHunk": "@@ -72,6 +73,7 @@\n   public DBRecord(StructuredRecord record, int [] columnTypes) {\n     this.record = record;\n     this.columnTypes = columnTypes;\n+    this.bytesWritten = 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "603cfa28bb52df752a2bbfccae605b3b392741ae"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE5Mzg4OQ==", "bodyText": "Long.BYTES is a static constant, shouldn't be accessing it via instance.", "url": "https://github.com/cdapio/hydrator-plugins/pull/1267#discussion_r541193889", "createdAt": "2020-12-11T19:26:16Z", "author": {"login": "chtyim"}, "path": "database-plugins/src/main/java/io/cdap/plugin/DBRecord.java", "diffHunk": "@@ -240,14 +249,20 @@ private void writeToDB(PreparedStatement stmt, Schema.Field field, int fieldInde\n       switch (fieldLogicalType) {\n         case DATE:\n           stmt.setDate(sqlIndex, Date.valueOf(record.getDate(fieldName)));\n+          bytesWritten += ((Long) record.get(fieldName)).BYTES;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "603cfa28bb52df752a2bbfccae605b3b392741ae"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwNTkwMzYx", "url": "https://github.com/cdapio/hydrator-plugins/pull/1267#pullrequestreview-550590361", "createdAt": "2020-12-11T21:30:10Z", "commit": {"oid": "5decc3fca5ddac2bbcc769e13cef6a7c01e7fd64"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5ad881273bb2c35bbb44ee5ff44f7f7944ea8cf", "author": {"user": {"login": "rmstar", "name": "Prashant Jaikumar"}}, "url": "https://github.com/cdapio/hydrator-plugins/commit/a5ad881273bb2c35bbb44ee5ff44f7f7944ea8cf", "committedDate": "2020-12-11T21:34:08Z", "message": "[CDAP-17447] Emit bytes written metric for database sinks"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5decc3fca5ddac2bbcc769e13cef6a7c01e7fd64", "author": {"user": {"login": "rmstar", "name": "Prashant Jaikumar"}}, "url": "https://github.com/cdapio/hydrator-plugins/commit/5decc3fca5ddac2bbcc769e13cef6a7c01e7fd64", "committedDate": "2020-12-11T21:25:31Z", "message": "updated test"}, "afterCommit": {"oid": "a5ad881273bb2c35bbb44ee5ff44f7f7944ea8cf", "author": {"user": {"login": "rmstar", "name": "Prashant Jaikumar"}}, "url": "https://github.com/cdapio/hydrator-plugins/commit/a5ad881273bb2c35bbb44ee5ff44f7f7944ea8cf", "committedDate": "2020-12-11T21:34:08Z", "message": "[CDAP-17447] Emit bytes written metric for database sinks"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1528, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}