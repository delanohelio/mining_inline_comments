{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxOTc4MDAx", "number": 2743, "title": "[GEOT-6494] MBStyle extension", "bodyText": "Reviewing mbstyle codebase, cleaning up reports and checking code coverage.\n\nhttps://osgeo-org.atlassian.net/browse/GEOT-6493\n\nRelated:\n\n#2775 background color\n#2782 opacity fix\n\nWorking on:\n\n Update pom.xml and move to extension\n Documentation\n Test coverage\n Include BSD license for documentation\n\nChecklist\nFor all pull requests:\n\n Confirm you have read the contribution guidelines\n You have sent a Contribution Licence Agreement (CLA) as necessary (not required for small changes, e.g., fixing typos in documentation)\n Make sure the first PR targets the master branch, eventual backports will be managed later. This can be ignored if the PR is fixing an issue that only happens in a specific branch, but not in newer ones.\n The changes are not breaking the build in downstream projects using SNAPSHOT dependencies, GeoWebCache and GeoServer.\n\nThe following are required only for core and extension modules (they are welcomed, but not required, for unsupported modules):\n\n There is a ticket in Jira describing the issue/improvement/feature (a notable exemptions is, changes not visible to end users)\n PR for bug fixes and small new features are presented as a single commit\n Commit message must be in the form \"[GEOT-XYZW] Title of the Jira ticket\"\n New unit tests have been added covering the changes\n This PR passes all existing unit tests (test results will be reported by travis-ci after opening this PR)\n This PR passes the QA checks (QA checks results will be reported by travis-ci after opening this PR)\n Documentation has been updated accordingly.\n\nSubmitting the PR does not require you to check all items, but by the time it gets merged, they should be either satisfied or inapplicable.", "createdAt": "2020-01-13T07:49:55Z", "url": "https://github.com/geotools/geotools/pull/2743", "merged": true, "mergeCommit": {"oid": "b709df9a8f6c40d043cfc3d2a01a4f64709a5e03"}, "closed": true, "closedAt": "2020-02-13T11:19:15Z", "author": {"login": "jodygarnett"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb544z-gFqTM0MTcxMzI2Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDWviAgH2gAyMzYxOTc4MDAxOmQ0NjhmYzQ5OTNhZmQ4MDlkZTM1MTJmYjZhNDU3Y2ViZjMzNGVkMjE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNzEzMjYy", "url": "https://github.com/geotools/geotools/pull/2743#pullrequestreview-341713262", "createdAt": "2020-01-13T09:25:21Z", "commit": {"oid": "094ce93c9dbb02c2fed36e4edd8883a274f9ccb1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QwOToyNToyMVrOFcwybA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QwOToyNToyMVrOFcwybA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTcwMzc4OA==", "bodyText": "\"does not\" I suppose?", "url": "https://github.com/geotools/geotools/pull/2743#discussion_r365703788", "createdAt": "2020-01-13T09:25:21Z", "author": {"login": "aaime"}, "path": "modules/unsupported/mbstyle/src/main/java/org/geotools/mbstyle/layer/CircleMBLayer.java", "diffHunk": "@@ -285,7 +285,7 @@ public Color getCircleStrokeColor() throws MBFormatException {\n      * Access circle-stroke-color as literal or function expression, defaults to black.\n      *\n      * @return The color of the circle stroke.\n-     * @throws MBFormatException\n+     * @throws MBFormatException JSON provided does conform to specification", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "094ce93c9dbb02c2fed36e4edd8883a274f9ccb1"}, "originalPosition": 122}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c381faedee31df0854fe47aa0013f00ceb0baad9", "author": {"user": {"login": "jodygarnett", "name": "Jody Garnett"}}, "url": "https://github.com/geotools/geotools/commit/c381faedee31df0854fe47aa0013f00ceb0baad9", "committedDate": "2020-01-14T16:15:09Z", "message": "[GEOT-6494]  addressing javadoc warnings\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>"}, "afterCommit": {"oid": "fcf2ea7d3170ca0e0af578c6befabf6fafa5e7bc", "author": {"user": {"login": "jodygarnett", "name": "Jody Garnett"}}, "url": "https://github.com/geotools/geotools/commit/fcf2ea7d3170ca0e0af578c6befabf6fafa5e7bc", "committedDate": "2020-01-31T21:31:09Z", "message": "[GEOT-6494]  addressing javadoc warnings\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fcf2ea7d3170ca0e0af578c6befabf6fafa5e7bc", "author": {"user": {"login": "jodygarnett", "name": "Jody Garnett"}}, "url": "https://github.com/geotools/geotools/commit/fcf2ea7d3170ca0e0af578c6befabf6fafa5e7bc", "committedDate": "2020-01-31T21:31:09Z", "message": "[GEOT-6494]  addressing javadoc warnings\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>"}, "afterCommit": {"oid": "bd649fb1d79b177c94e9559cb08a9e51f34f1f4d", "author": {"user": {"login": "jodygarnett", "name": "Jody Garnett"}}, "url": "https://github.com/geotools/geotools/commit/bd649fb1d79b177c94e9559cb08a9e51f34f1f4d", "committedDate": "2020-01-31T21:51:40Z", "message": "Formatting clean up\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc46d3d4db6818d0d9aa32979eebb94feb0935a3", "author": {"user": {"login": "jodygarnett", "name": "Jody Garnett"}}, "url": "https://github.com/geotools/geotools/commit/dc46d3d4db6818d0d9aa32979eebb94feb0935a3", "committedDate": "2020-02-08T16:15:46Z", "message": "cleaning up javadoc warnings\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb5eb11a582a90c32de2e7785acd16cd0874b338", "author": {"user": {"login": "jodygarnett", "name": "Jody Garnett"}}, "url": "https://github.com/geotools/geotools/commit/cb5eb11a582a90c32de2e7785acd16cd0874b338", "committedDate": "2020-02-08T16:15:46Z", "message": "[GEOT-6494] updated test coverage instructions\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b871343b6ad8f3952ae96fb9c8d832836c7cc229", "author": {"user": {"login": "jodygarnett", "name": "Jody Garnett"}}, "url": "https://github.com/geotools/geotools/commit/b871343b6ad8f3952ae96fb9c8d832836c7cc229", "committedDate": "2020-02-08T16:15:46Z", "message": "[GEOT-6494]  addressing javadoc warnings\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "edfa57a6c55bc7f0266e5312c43549cfe47adbb8", "author": {"user": {"login": "jodygarnett", "name": "Jody Garnett"}}, "url": "https://github.com/geotools/geotools/commit/edfa57a6c55bc7f0266e5312c43549cfe47adbb8", "committedDate": "2020-02-08T16:15:46Z", "message": "Formatting clean up\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6b1fc89573635f4966667b477346de289286b65", "author": {"user": {"login": "jodygarnett", "name": "Jody Garnett"}}, "url": "https://github.com/geotools/geotools/commit/a6b1fc89573635f4966667b477346de289286b65", "committedDate": "2020-02-08T16:15:46Z", "message": "javadoc warnings\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b7b6eaa17f67b97a823c3005da87c71161d9aa23", "author": {"user": {"login": "jodygarnett", "name": "Jody Garnett"}}, "url": "https://github.com/geotools/geotools/commit/b7b6eaa17f67b97a823c3005da87c71161d9aa23", "committedDate": "2020-02-01T05:12:17Z", "message": "javadoc warnings\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>"}, "afterCommit": {"oid": "a6b1fc89573635f4966667b477346de289286b65", "author": {"user": {"login": "jodygarnett", "name": "Jody Garnett"}}, "url": "https://github.com/geotools/geotools/commit/a6b1fc89573635f4966667b477346de289286b65", "committedDate": "2020-02-08T16:15:46Z", "message": "javadoc warnings\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "874d4a013a7aa896f0c87a273187231159a7b49f", "author": {"user": {"login": "jodygarnett", "name": "Jody Garnett"}}, "url": "https://github.com/geotools/geotools/commit/874d4a013a7aa896f0c87a273187231159a7b49f", "committedDate": "2020-02-09T17:09:48Z", "message": "initial move of mbstyle extension and documentation\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7cdbcef444fd6b7e6bca9b8368366cbe7c5f1b0d", "author": {"user": {"login": "jodygarnett", "name": "Jody Garnett"}}, "url": "https://github.com/geotools/geotools/commit/7cdbcef444fd6b7e6bca9b8368366cbe7c5f1b0d", "committedDate": "2020-02-09T17:28:45Z", "message": "fix build\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd6541da0a696c10912131a197e22db8b049d939", "author": {"user": {"login": "jodygarnett", "name": "Jody Garnett"}}, "url": "https://github.com/geotools/geotools/commit/fd6541da0a696c10912131a197e22db8b049d939", "committedDate": "2020-02-09T17:28:54Z", "message": "break spec into pages\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1NjIxMjk0", "url": "https://github.com/geotools/geotools/pull/2743#pullrequestreview-355621294", "createdAt": "2020-02-09T17:31:43Z", "commit": {"oid": "fd6541da0a696c10912131a197e22db8b049d939"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wOVQxNzozMTo0M1rOFnWFfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wOVQxNzozMTo0M1rOFnWFfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjgwMDYzOA==", "bodyText": "@tbarsballe this section has some duplication with spec/types.rst, do you know any background to untangle?\nReading the content, it looks like this was an earlier summary of the specification", "url": "https://github.com/geotools/geotools/pull/2743#discussion_r376800638", "createdAt": "2020-02-09T17:31:43Z", "author": {"login": "jodygarnett"}, "path": "docs/user/extension/mbstyle/index.rst", "diffHunk": "@@ -43,18 +43,19 @@ Zoom level tuning\n \n The mapping between zoom levels and scale denominators is performed assuming, by default, a 512 pixels\n root tile at zoom level zero. This matches the usage of vector tiles client side.\n-If a different value is to be used, it's possible to set a system variable to change the default.\n+If a different value is to be used, it's possible to set a system property to change the default.\n E.g., the following would match \"x4\" tiles:\n \n .. code-block:: java\n \n-    System.setSystemProperty(\"MBSTYLE_ROOT_TILE_PIXELS\", \"1024\") \n+   System.setSystemProperty(\"MBSTYLE_ROOT_TILE_PIXELS\", \"1024\") \n \n MapBox Types\n ^^^^^^^^^^^^\n-  copied from the `MapBox Style Specification <https://www.mapbox.com/mapbox-gl-js/style-spec/>`_\n \n-  Color\n+Quoting `MapBox Style Specification <https://www.mapbox.com/mapbox-gl-js/style-spec/>`__ :\n+\n+  ``Color``", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd6541da0a696c10912131a197e22db8b049d939"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52e0f6fc9cc56ac06057ac1f76e9b5171cfdf4f4", "author": {"user": {"login": "jodygarnett", "name": "Jody Garnett"}}, "url": "https://github.com/geotools/geotools/commit/52e0f6fc9cc56ac06057ac1f76e9b5171cfdf4f4", "committedDate": "2020-02-09T21:13:47Z", "message": "Clean up license references in documentation\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1NjM0NjU2", "url": "https://github.com/geotools/geotools/pull/2743#pullrequestreview-355634656", "createdAt": "2020-02-09T21:24:54Z", "commit": {"oid": "52e0f6fc9cc56ac06057ac1f76e9b5171cfdf4f4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wOVQyMToyNDo1NVrOFnXEXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wOVQyMToyNDo1NVrOFnXEXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjgxNjczMw==", "bodyText": "Moved this to the respective headings.", "url": "https://github.com/geotools/geotools/pull/2743#discussion_r376816733", "createdAt": "2020-02-09T21:24:55Z", "author": {"login": "jodygarnett"}, "path": "docs/user/welcome/license.rst", "diffHunk": "@@ -5,12 +5,6 @@ The GeoTools project is a member of the Open Source Geospatial Foundation; the f\n \n As an open source project GeoTools is made available to you using an open source (LGPL) license as described below.\n \n-A few select files have additional license:\n-\n-* Code contributed by government members is often contributed as public domain\n-* To facilitate adopting of the GeoTools library the example code used in the\n-  user guide is also public domain\n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52e0f6fc9cc56ac06057ac1f76e9b5171cfdf4f4"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1ODE4ODkz", "url": "https://github.com/geotools/geotools/pull/2743#pullrequestreview-355818893", "createdAt": "2020-02-10T10:14:00Z", "commit": {"oid": "52e0f6fc9cc56ac06057ac1f76e9b5171cfdf4f4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxMDoxNDowMFrOFngedw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxMDoxNDowMFrOFngedw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njk3MDg3MQ==", "bodyText": "So this change kicked geopkg out of the build? Ideally a module promotion should just do that, promote the module, all the other improvements should be in a different commit (if not different PR), because they are not related, and are easy to get lost in the movement of so many files (github reports 200+ files changed in this PR). Thankfully I spotted this one at the source...", "url": "https://github.com/geotools/geotools/pull/2743#discussion_r376970871", "createdAt": "2020-02-10T10:14:00Z", "author": {"login": "aaime"}, "path": "modules/plugin/pom.xml", "diffHunk": "@@ -59,14 +62,10 @@\n     <module>imagemosaic-jdbc</module>\n     <module>jdbc</module>\n     <module>jp2k</module>\n+    <module>mongodb</module>\n     <module>property</module>\n     <module>shapefile</module>\n     <module>svg</module>\n-    <module>coverage-multidim</module>\n-    <module>geopkg</module>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52e0f6fc9cc56ac06057ac1f76e9b5171cfdf4f4"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1ODIwMjg3", "url": "https://github.com/geotools/geotools/pull/2743#pullrequestreview-355820287", "createdAt": "2020-02-10T10:16:13Z", "commit": {"oid": "52e0f6fc9cc56ac06057ac1f76e9b5171cfdf4f4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxMDoxNjoxM1rOFngi2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxMDoxNjoxM1rOFngi2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njk3MTk5Mw==", "bodyText": "Ah, so mbstyle is using json-simple to parse JSON? The library is completely dead, has not seen releases since 2012.\nNot holding it as a blocker for the module, but wondering, is there any plan to switch to something supported? (it would not be the first dependency having this issue mind, I'm really just asking).", "url": "https://github.com/geotools/geotools/pull/2743#discussion_r376971993", "createdAt": "2020-02-10T10:16:13Z", "author": {"login": "aaime"}, "path": "pom.xml", "diffHunk": "@@ -1577,6 +1577,13 @@\n         <artifactId>jt-shadedrelief</artifactId>\n         <version>${jaiext.version}</version>\n       </dependency>\n+      \n+      <!-- Third-party -->\n+      <dependency>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52e0f6fc9cc56ac06057ac1f76e9b5171cfdf4f4"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fea6a40dbb98c76f615d1235de30d2289eef8f2", "author": {"user": {"login": "jodygarnett", "name": "Jody Garnett"}}, "url": "https://github.com/geotools/geotools/commit/9fea6a40dbb98c76f615d1235de30d2289eef8f2", "committedDate": "2020-02-11T14:25:52Z", "message": "revise based on feedback\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d468fc4993afd809de3512fb6a457cebf334ed21", "author": {"user": {"login": "jodygarnett", "name": "Jody Garnett"}}, "url": "https://github.com/geotools/geotools/commit/d468fc4993afd809de3512fb6a457cebf334ed21", "committedDate": "2020-02-11T19:17:41Z", "message": "remove toctree caption\n\nSigned-off-by: Jody Garnett <jody.garnett@gmail.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2977, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}