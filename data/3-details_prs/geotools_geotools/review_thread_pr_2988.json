{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1MDUyNTM0", "number": 2988, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxMjoyMzo1OFrOEF6btg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxMjoyNToyNlrOEF6dng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0NjM1NzAyOnYy", "diffSide": "RIGHT", "path": "modules/library/coverage/src/main/java/org/geotools/image/ImageWorker.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxMjoyMzo1OFrOGkYyKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNDoyMjoyMlrOGkdzsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDgwNzk3Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        // 16bits color-palette but the forceComponentColorModel\n          \n          \n            \n                        // 16bits color-palette but the forceComponentColorModel call above", "url": "https://github.com/geotools/geotools/pull/2988#discussion_r440807976", "createdAt": "2020-06-16T12:23:58Z", "author": {"login": "aaime"}, "path": "modules/library/coverage/src/main/java/org/geotools/image/ImageWorker.java", "diffHunk": "@@ -1446,7 +1446,13 @@ public final ImageWorker rescaleToBytes() {\n \n         // this is to support 16 bits IndexColorModel\n         forceComponentColorModel(true, true);\n-\n+        if (isBytes()) {\n+            // there might be the case that we entered rescaleToBytes with a\n+            // 16bits color-palette but the forceComponentColorModel", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1e1fe777f2728261bed3a2ef8040466f04464bb0"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDg5MDI5MQ==", "bodyText": "updated", "url": "https://github.com/geotools/geotools/pull/2988#discussion_r440890291", "createdAt": "2020-06-16T14:22:22Z", "author": {"login": "dromagnoli"}, "path": "modules/library/coverage/src/main/java/org/geotools/image/ImageWorker.java", "diffHunk": "@@ -1446,7 +1446,13 @@ public final ImageWorker rescaleToBytes() {\n \n         // this is to support 16 bits IndexColorModel\n         forceComponentColorModel(true, true);\n-\n+        if (isBytes()) {\n+            // there might be the case that we entered rescaleToBytes with a\n+            // 16bits color-palette but the forceComponentColorModel", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDgwNzk3Ng=="}, "originalCommit": {"oid": "1e1fe777f2728261bed3a2ef8040466f04464bb0"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0NjM1NzkwOnYy", "diffSide": "RIGHT", "path": "modules/library/coverage/src/main/java/org/geotools/image/ImageWorker.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxMjoyNDoxNVrOGkYyxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNDoyMjozMFrOGkd0EA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDgwODEzMg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        // already transformed it to RGB bytes.\n          \n          \n            \n                        // already transformed it to RGB bytes,", "url": "https://github.com/geotools/geotools/pull/2988#discussion_r440808132", "createdAt": "2020-06-16T12:24:15Z", "author": {"login": "aaime"}, "path": "modules/library/coverage/src/main/java/org/geotools/image/ImageWorker.java", "diffHunk": "@@ -1446,7 +1446,13 @@ public final ImageWorker rescaleToBytes() {\n \n         // this is to support 16 bits IndexColorModel\n         forceComponentColorModel(true, true);\n-\n+        if (isBytes()) {\n+            // there might be the case that we entered rescaleToBytes with a\n+            // 16bits color-palette but the forceComponentColorModel\n+            // already transformed it to RGB bytes.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1e1fe777f2728261bed3a2ef8040466f04464bb0"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDg5MDM4NA==", "bodyText": "fixed", "url": "https://github.com/geotools/geotools/pull/2988#discussion_r440890384", "createdAt": "2020-06-16T14:22:30Z", "author": {"login": "dromagnoli"}, "path": "modules/library/coverage/src/main/java/org/geotools/image/ImageWorker.java", "diffHunk": "@@ -1446,7 +1446,13 @@ public final ImageWorker rescaleToBytes() {\n \n         // this is to support 16 bits IndexColorModel\n         forceComponentColorModel(true, true);\n-\n+        if (isBytes()) {\n+            // there might be the case that we entered rescaleToBytes with a\n+            // 16bits color-palette but the forceComponentColorModel\n+            // already transformed it to RGB bytes.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDgwODEzMg=="}, "originalCommit": {"oid": "1e1fe777f2728261bed3a2ef8040466f04464bb0"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0NjM2MTkwOnYy", "diffSide": "RIGHT", "path": "modules/library/coverage/src/main/java/org/geotools/image/ImageWorker.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxMjoyNToyNlrOGkY1SQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxNDoyMjowNVrOGkdy5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDgwODc3Nw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            // When RGB(A), go to 8 bits\n          \n          \n            \n                            // When RGB(A), go to 8 bits, otherwise copy the sample size (might be 16 bits)", "url": "https://github.com/geotools/geotools/pull/2988#discussion_r440808777", "createdAt": "2020-06-16T12:25:26Z", "author": {"login": "aaime"}, "path": "modules/library/coverage/src/main/java/org/geotools/image/ImageWorker.java", "diffHunk": "@@ -1958,7 +1953,10 @@ public final ImageWorker forceComponentColorModel(\n \n             int[] bits = new int[numDestinationBands];\n             // bits per component\n-            for (int i = 0; i < numDestinationBands; i++) bits[i] = sm.getSampleSize(i);\n+            for (int i = 0; i < numDestinationBands; i++) {\n+                // When RGB(A), go to 8 bits", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1e1fe777f2728261bed3a2ef8040466f04464bb0"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDg5MDA4NA==", "bodyText": "Comments updated", "url": "https://github.com/geotools/geotools/pull/2988#discussion_r440890084", "createdAt": "2020-06-16T14:22:05Z", "author": {"login": "dromagnoli"}, "path": "modules/library/coverage/src/main/java/org/geotools/image/ImageWorker.java", "diffHunk": "@@ -1958,7 +1953,10 @@ public final ImageWorker forceComponentColorModel(\n \n             int[] bits = new int[numDestinationBands];\n             // bits per component\n-            for (int i = 0; i < numDestinationBands; i++) bits[i] = sm.getSampleSize(i);\n+            for (int i = 0; i < numDestinationBands; i++) {\n+                // When RGB(A), go to 8 bits", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDgwODc3Nw=="}, "originalCommit": {"oid": "1e1fe777f2728261bed3a2ef8040466f04464bb0"}, "originalPosition": 60}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3554, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}