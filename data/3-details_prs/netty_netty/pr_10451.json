{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyMDkzMDEw", "number": 10451, "title": "Enable TLS1.3 by default of JDK SSLEngine implementation does by default", "bodyText": "Motiviation:\nWhen TLSv1.3 was introduced almost 2 years ago, it was decided to disable it by default, even when it's supported by the underlying TLS implementation.\nTLSv13 is pretty stable now in Java (out of the box in Java 11, OpenJSSE for Java 8, BoringSSL and OpenSSL) and may be enabled by default.\nModifications:\nEnsure TLSv13 is enabled by default when the underyling JDK SSLEngine implementation enables it as well\nResult:\nTLSv1.3 is now enabled by default, so users don't have to explicitly enable it.", "createdAt": "2020-08-03T10:28:02Z", "url": "https://github.com/netty/netty/pull/10451", "merged": true, "mergeCommit": {"oid": "b1d3aad404a39143da7a86c121d60f35c0d21108"}, "closed": true, "closedAt": "2020-08-10T12:04:04Z", "author": {"login": "normanmaurer"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc7QbZOgFqTQ1OTk1NTU0OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc9emYMABqjM2Mzc4OTU5NDY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5OTU1NTQ5", "url": "https://github.com/netty/netty/pull/10451#pullrequestreview-459955549", "createdAt": "2020-08-03T11:36:01Z", "commit": {"oid": "2352cf204537eb158627026d7e1da8fcd55b4edd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxMTozNjowMVrOG62JDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxMTozNjowMVrOG62JDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDM1NzY0Ng==", "bodyText": "Sorry, could you please elaborate? Why enable only TLSv3 by default on the OpenSSL/BoringSSL side when the JDK one supports it? How are those 2 sides related?", "url": "https://github.com/netty/netty/pull/10451#discussion_r464357646", "createdAt": "2020-08-03T11:36:01Z", "author": {"login": "slandelle"}, "path": "handler/src/main/java/io/netty/handler/ssl/ReferenceCountedOpenSslContext.java", "diffHunk": "@@ -260,9 +260,10 @@ protected void deallocate() {\n             int options = SSLContext.getOptions(ctx) |\n                           SSL.SSL_OP_NO_SSLv2 |\n                           SSL.SSL_OP_NO_SSLv3 |\n-                          // Disable TLSv1.3 by default for now. Even if TLSv1.3 is not supported this will\n-                          // work fine as in this case SSL_OP_NO_TLSv1_3 will be 0.\n-                          SSL.SSL_OP_NO_TLSv1_3 |\n+                          // Disable TLSv1.3 by default if the JDK does not support TLSv13 as well.\n+                          // Even if TLSv1.3 is not supported this will work fine as in this case SSL_OP_NO_TLSv1_3\n+                          // will be 0.\n+                          (SslUtils.isTLSv13EnabledByJDK() ? 0 : SSL.SSL_OP_NO_TLSv1_3) |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2352cf204537eb158627026d7e1da8fcd55b4edd"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxNDE3MTcx", "url": "https://github.com/netty/netty/pull/10451#pullrequestreview-461417171", "createdAt": "2020-08-05T07:43:35Z", "commit": {"oid": "6b600b42c62db02220dbd834783c2029693f75a7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwNzo0MzozNVrOG7-DLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwNzo0MzozNVrOG7-DLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTUzNTc4OQ==", "bodyText": "Shouldn't those properties named in a way that it's explicit they are specific to the JDK, eg TLSV1_3_JDK_SUPPORTED and TLSV1_3_JDK_SUPPORTED?", "url": "https://github.com/netty/netty/pull/10451#discussion_r465535789", "createdAt": "2020-08-05T07:43:35Z", "author": {"login": "slandelle"}, "path": "handler/src/main/java/io/netty/handler/ssl/SslUtils.java", "diffHunk": "@@ -107,9 +107,12 @@\n     static final String[] TLSV13_CIPHER_SUITES = { \"TLS_AES_128_GCM_SHA256\", \"TLS_AES_256_GCM_SHA384\" };\n \n     private static final boolean TLSV1_3_SUPPORTED;\n+    private static final boolean TLSV1_3_ENABLED;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6b600b42c62db02220dbd834783c2029693f75a7"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxNDQ3MDgz", "url": "https://github.com/netty/netty/pull/10451#pullrequestreview-461447083", "createdAt": "2020-08-05T08:25:05Z", "commit": {"oid": "c086f7fd557199dcd35e0b259511f2ed7deedee9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6beef50a62b76367815b4e0e63aa583e1ca6870c", "author": {"user": {"login": "normanmaurer", "name": "Norman Maurer"}}, "url": "https://github.com/netty/netty/commit/6beef50a62b76367815b4e0e63aa583e1ca6870c", "committedDate": "2020-08-10T09:14:17Z", "message": "Enable TLS1.3 by default of JDK SSLEngine implementation does by default\n\nMotiviation:\n\nWhen TLSv1.3 was introduced almost 2 years ago, it was decided to disable it by default, even when it's supported by the underlying TLS implementation.\n\nTLSv13 is pretty stable now in Java (out of the box in Java 11, OpenJSSE for Java 8, BoringSSL and OpenSSL) and may be enabled by default.\n\nModifications:\n\nEnsure TLSv13 is enabled by default when the underyling JDK SSLEngine implementation enables it as well\n\nResult:\n\nTLSv1.3 is now enabled by default, so users don't have to explicitly enable it.\n\nCo-authored-by: Stephane Landelle <slandelle@gatling.io>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c086f7fd557199dcd35e0b259511f2ed7deedee9", "author": {"user": {"login": "normanmaurer", "name": "Norman Maurer"}}, "url": "https://github.com/netty/netty/commit/c086f7fd557199dcd35e0b259511f2ed7deedee9", "committedDate": "2020-08-05T08:05:00Z", "message": "More comments"}, "afterCommit": {"oid": "6beef50a62b76367815b4e0e63aa583e1ca6870c", "author": {"user": {"login": "normanmaurer", "name": "Norman Maurer"}}, "url": "https://github.com/netty/netty/commit/6beef50a62b76367815b4e0e63aa583e1ca6870c", "committedDate": "2020-08-10T09:14:17Z", "message": "Enable TLS1.3 by default of JDK SSLEngine implementation does by default\n\nMotiviation:\n\nWhen TLSv1.3 was introduced almost 2 years ago, it was decided to disable it by default, even when it's supported by the underlying TLS implementation.\n\nTLSv13 is pretty stable now in Java (out of the box in Java 11, OpenJSSE for Java 8, BoringSSL and OpenSSL) and may be enabled by default.\n\nModifications:\n\nEnsure TLSv13 is enabled by default when the underyling JDK SSLEngine implementation enables it as well\n\nResult:\n\nTLSv1.3 is now enabled by default, so users don't have to explicitly enable it.\n\nCo-authored-by: Stephane Landelle <slandelle@gatling.io>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 179, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}