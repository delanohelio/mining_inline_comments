{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4MzI2NTAw", "number": 10640, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwNzozOToyOFrOEsgk7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwNzo0MTozNlrOEsgoNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1MTA2NTQxOnYy", "diffSide": "RIGHT", "path": "codec-http2/src/main/java/io/netty/handler/codec/http2/DefaultHttp2Headers.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwNzozOToyOFrOHfyhhA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwNzozOToyOFrOHfyhhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA5NTY4NA==", "bodyText": "nit: revert... this is not needed", "url": "https://github.com/netty/netty/pull/10640#discussion_r503095684", "createdAt": "2020-10-12T07:39:28Z", "author": {"login": "normanmaurer"}, "path": "codec-http2/src/main/java/io/netty/handler/codec/http2/DefaultHttp2Headers.java", "diffHunk": "@@ -43,6 +43,7 @@ public void validateName(CharSequence name) {\n             if (name == null || name.length() == 0) {\n                 PlatformDependent.throwException(connectionError(PROTOCOL_ERROR,\n                         \"empty headers are not allowed [%s]\", name));\n+                return;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75447260c2e262798c85e49f7a7eca63856684db"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1MTA2NjYxOnYy", "diffSide": "RIGHT", "path": "codec-http2/src/main/java/io/netty/handler/codec/http2/DefaultHttp2Headers.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwNzozOTo1NFrOHfyiQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwNzozOTo1NFrOHfyiQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA5NTg3NA==", "bodyText": "nit revert formatting changes", "url": "https://github.com/netty/netty/pull/10640#discussion_r503095874", "createdAt": "2020-10-12T07:39:54Z", "author": {"login": "normanmaurer"}, "path": "codec-http2/src/main/java/io/netty/handler/codec/http2/DefaultHttp2Headers.java", "diffHunk": "@@ -58,14 +59,14 @@ public void validateName(CharSequence name) {\n                 }\n \n                 if (index != -1) {\n-                    PlatformDependent.throwException(connectionError(PROTOCOL_ERROR,\n-                            \"invalid header name [%s]\", name));\n+                    PlatformDependent.throwException(connectionError(PROTOCOL_ERROR, \"invalid header name [%s]\",\n+                            name));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75447260c2e262798c85e49f7a7eca63856684db"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1MTA2NzUzOnYy", "diffSide": "RIGHT", "path": "codec-http2/src/main/java/io/netty/handler/codec/http2/DefaultHttp2Headers.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwNzo0MDowN1rOHfyizg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwNzo0MDowN1rOHfyizg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA5NjAxNA==", "bodyText": "nit revert formatting changes", "url": "https://github.com/netty/netty/pull/10640#discussion_r503096014", "createdAt": "2020-10-12T07:40:07Z", "author": {"login": "normanmaurer"}, "path": "codec-http2/src/main/java/io/netty/handler/codec/http2/DefaultHttp2Headers.java", "diffHunk": "@@ -58,14 +59,14 @@ public void validateName(CharSequence name) {\n                 }\n \n                 if (index != -1) {\n-                    PlatformDependent.throwException(connectionError(PROTOCOL_ERROR,\n-                            \"invalid header name [%s]\", name));\n+                    PlatformDependent.throwException(connectionError(PROTOCOL_ERROR, \"invalid header name [%s]\",\n+                            name));\n                 }\n             } else {\n                 for (int i = 0; i < name.length(); ++i) {\n                     if (isUpperCase(name.charAt(i))) {\n-                        PlatformDependent.throwException(connectionError(PROTOCOL_ERROR,\n-                                \"invalid header name [%s]\", name));\n+                        PlatformDependent.throwException(connectionError(PROTOCOL_ERROR, \"invalid header name [%s]\",\n+                                name));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75447260c2e262798c85e49f7a7eca63856684db"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1MTA3MzgxOnYy", "diffSide": "RIGHT", "path": "codec-http2/src/main/java/io/netty/handler/codec/http2/ReadOnlyHttp2Headers.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwNzo0MTozNlrOHfymWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwNzo1MjoxNFrOHfy9Xw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA5NjkyMw==", "bodyText": "revert... I think this still needs to remain here.", "url": "https://github.com/netty/netty/pull/10640#discussion_r503096923", "createdAt": "2020-10-12T07:41:36Z", "author": {"login": "normanmaurer"}, "path": "codec-http2/src/main/java/io/netty/handler/codec/http2/ReadOnlyHttp2Headers.java", "diffHunk": "@@ -823,12 +823,14 @@ private void calculateNext() {\n             for (; i < current.length; i += 2) {\n                 AsciiString roName = current[i];\n                 if (roName.hashCode() == nameHash && roName.contentEqualsIgnoreCase(name)) {\n-                    next = current[i + 1];\n-                    i += 2;\n+                    if (i + 1 < current.length) {\n+                        next = current[i + 1];\n+                        i += 2;\n+                    }\n                     return;\n                 }\n             }\n-            if (i >= current.length && current == pseudoHeaders) {\n+            if (current == pseudoHeaders) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75447260c2e262798c85e49f7a7eca63856684db"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA5NzUyNw==", "bodyText": "LGTM and IDE both give warnings for always true.", "url": "https://github.com/netty/netty/pull/10640#discussion_r503097527", "createdAt": "2020-10-12T07:42:41Z", "author": {"login": "hyperxpro"}, "path": "codec-http2/src/main/java/io/netty/handler/codec/http2/ReadOnlyHttp2Headers.java", "diffHunk": "@@ -823,12 +823,14 @@ private void calculateNext() {\n             for (; i < current.length; i += 2) {\n                 AsciiString roName = current[i];\n                 if (roName.hashCode() == nameHash && roName.contentEqualsIgnoreCase(name)) {\n-                    next = current[i + 1];\n-                    i += 2;\n+                    if (i + 1 < current.length) {\n+                        next = current[i + 1];\n+                        i += 2;\n+                    }\n                     return;\n                 }\n             }\n-            if (i >= current.length && current == pseudoHeaders) {\n+            if (current == pseudoHeaders) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA5NjkyMw=="}, "originalCommit": {"oid": "75447260c2e262798c85e49f7a7eca63856684db"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzEwMDI1Mw==", "bodyText": "https://lgtm.com/projects/g/netty/netty/snapshot/a2994f5265f7bd7c4bf206d95b643a3c68d4f3c3/files/codec-http2/src/main/java/io/netty/handler/codec/http2/ReadOnlyHttp2Headers.java?sort=name&dir=ASC&mode=heatmap#xe38ef04bb58e4:1\n\nWhat to do?", "url": "https://github.com/netty/netty/pull/10640#discussion_r503100253", "createdAt": "2020-10-12T07:47:42Z", "author": {"login": "hyperxpro"}, "path": "codec-http2/src/main/java/io/netty/handler/codec/http2/ReadOnlyHttp2Headers.java", "diffHunk": "@@ -823,12 +823,14 @@ private void calculateNext() {\n             for (; i < current.length; i += 2) {\n                 AsciiString roName = current[i];\n                 if (roName.hashCode() == nameHash && roName.contentEqualsIgnoreCase(name)) {\n-                    next = current[i + 1];\n-                    i += 2;\n+                    if (i + 1 < current.length) {\n+                        next = current[i + 1];\n+                        i += 2;\n+                    }\n                     return;\n                 }\n             }\n-            if (i >= current.length && current == pseudoHeaders) {\n+            if (current == pseudoHeaders) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA5NjkyMw=="}, "originalCommit": {"oid": "75447260c2e262798c85e49f7a7eca63856684db"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzEwMjgxNQ==", "bodyText": "fine then...", "url": "https://github.com/netty/netty/pull/10640#discussion_r503102815", "createdAt": "2020-10-12T07:52:14Z", "author": {"login": "normanmaurer"}, "path": "codec-http2/src/main/java/io/netty/handler/codec/http2/ReadOnlyHttp2Headers.java", "diffHunk": "@@ -823,12 +823,14 @@ private void calculateNext() {\n             for (; i < current.length; i += 2) {\n                 AsciiString roName = current[i];\n                 if (roName.hashCode() == nameHash && roName.contentEqualsIgnoreCase(name)) {\n-                    next = current[i + 1];\n-                    i += 2;\n+                    if (i + 1 < current.length) {\n+                        next = current[i + 1];\n+                        i += 2;\n+                    }\n                     return;\n                 }\n             }\n-            if (i >= current.length && current == pseudoHeaders) {\n+            if (current == pseudoHeaders) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA5NjkyMw=="}, "originalCommit": {"oid": "75447260c2e262798c85e49f7a7eca63856684db"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3586, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}