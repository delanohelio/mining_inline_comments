{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA5ODI0ODk1", "number": 10223, "title": "Self-Signed Certificate: Specify algorithm for key pair", "bodyText": "Specify algorithm for key pair in self signed certificate to generate EC or RSA based certificate.\nMotivation:\nEC is better than RSA because of the small key size, efficient and secure which makes it perfect for testing purposes.\nModification:\nAdded support to specify an algorithm (EC or RSA) in constructors for key pair generation.\nResult:\nAble to generate a self-signed certificate of EC or RSA.", "createdAt": "2020-04-28T01:05:40Z", "url": "https://github.com/netty/netty/pull/10223", "merged": true, "mergeCommit": {"oid": "9427255ffb112f5cf3d736fa71eae06fd447373e"}, "closed": true, "closedAt": "2020-04-29T14:52:08Z", "author": {"login": "hyperxpro"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcb4_u2AH2gAyNDA5ODI0ODk1OjU0MzJjNGU3MjNkYzU3OTRiMGZjMDdkYmVmMzU3MDI3NWY4MjI4NGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABccZlZRAFqTQwMjczOTkxNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5432c4e723dc5794b0fc07dbef3570275f82284c", "author": {"user": {"login": "hyperxpro", "name": "Aayush Atharva"}}, "url": "https://github.com/netty/netty/commit/5432c4e723dc5794b0fc07dbef3570275f82284c", "committedDate": "2020-04-28T00:46:20Z", "message": "Add support for specifying key pair algorithm. Default key pair algorithm is set to EC with 256-bits key size."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3fdeaea18bd619181aafe6bae00649b94772f139", "author": {"user": {"login": "hyperxpro", "name": "Aayush Atharva"}}, "url": "https://github.com/netty/netty/commit/3fdeaea18bd619181aafe6bae00649b94772f139", "committedDate": "2020-04-28T01:09:12Z", "message": "Update SelfSignedCertificate.java\n\nFix comment for key pair generation."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1d9a29a8634294b4fe73b12a0afd67ab3b2efe2", "author": {"user": {"login": "hyperxpro", "name": "Aayush Atharva"}}, "url": "https://github.com/netty/netty/commit/a1d9a29a8634294b4fe73b12a0afd67ab3b2efe2", "committedDate": "2020-04-28T01:55:27Z", "message": "Undo code formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d1c60703ad2b773fc0af9496f830b416cccbd6b", "author": {"user": {"login": "hyperxpro", "name": "Aayush Atharva"}}, "url": "https://github.com/netty/netty/commit/7d1c60703ad2b773fc0af9496f830b416cccbd6b", "committedDate": "2020-04-28T14:23:59Z", "message": "Set RSA as default algorithm because test suites have RSA ciphers hard-coded"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00137cc9654f7ed0c37d0d8fc8cc6b4c0a91c39f", "author": {"user": {"login": "hyperxpro", "name": "Aayush Atharva"}}, "url": "https://github.com/netty/netty/commit/00137cc9654f7ed0c37d0d8fc8cc6b4c0a91c39f", "committedDate": "2020-04-28T16:02:40Z", "message": "Restore old constructors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1466a863277817377d3a3f2e92b90755fae5aa77", "author": {"user": {"login": "hyperxpro", "name": "Aayush Atharva"}}, "url": "https://github.com/netty/netty/commit/1466a863277817377d3a3f2e92b90755fae5aa77", "committedDate": "2020-04-28T16:08:16Z", "message": "Remove Key Size comment because key size can also be set using System Properties"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyNTA0ODE2", "url": "https://github.com/netty/netty/pull/10223#pullrequestreview-402504816", "createdAt": "2020-04-29T09:32:29Z", "commit": {"oid": "1466a863277817377d3a3f2e92b90755fae5aa77"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwOTozMjozMFrOGN29xA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwOTozMzoyNFrOGN2_oQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzE4NTIyMA==", "bodyText": "the , should be on the previous line", "url": "https://github.com/netty/netty/pull/10223#discussion_r417185220", "createdAt": "2020-04-29T09:32:30Z", "author": {"login": "normanmaurer"}, "path": "handler/src/main/java/io/netty/handler/ssl/util/OpenJdkSelfSignedCertGenerator.java", "diffHunk": "@@ -44,8 +44,8 @@\n final class OpenJdkSelfSignedCertGenerator {\n \n     @SuppressJava6Requirement(reason = \"Usage guarded by dependency check\")\n-    static String[] generate(String fqdn, KeyPair keypair, SecureRandom random, Date notBefore, Date notAfter)\n-            throws Exception {\n+    static String[] generate(String fqdn, KeyPair keypair, SecureRandom random, Date notBefore, Date notAfter\n+            , String algorithm) throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1466a863277817377d3a3f2e92b90755fae5aa77"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzE4NTU5MQ==", "bodyText": "should we verify that only valid algorithm names are used ? (Like either EC or RSA)", "url": "https://github.com/netty/netty/pull/10223#discussion_r417185591", "createdAt": "2020-04-29T09:33:13Z", "author": {"login": "normanmaurer"}, "path": "handler/src/main/java/io/netty/handler/ssl/util/OpenJdkSelfSignedCertGenerator.java", "diffHunk": "@@ -70,12 +70,12 @@\n \n         // Sign the cert to identify the algorithm that's used.\n         X509CertImpl cert = new X509CertImpl(info);\n-        cert.sign(key, \"SHA256withRSA\");\n+        cert.sign(key, algorithm.equalsIgnoreCase(\"EC\") ? \"SHA256withECDSA\" : \"SHA256withRSA\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1466a863277817377d3a3f2e92b90755fae5aa77"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzE4NTY5Nw==", "bodyText": "see comment above", "url": "https://github.com/netty/netty/pull/10223#discussion_r417185697", "createdAt": "2020-04-29T09:33:24Z", "author": {"login": "normanmaurer"}, "path": "handler/src/main/java/io/netty/handler/ssl/util/OpenJdkSelfSignedCertGenerator.java", "diffHunk": "@@ -70,12 +70,12 @@\n \n         // Sign the cert to identify the algorithm that's used.\n         X509CertImpl cert = new X509CertImpl(info);\n-        cert.sign(key, \"SHA256withRSA\");\n+        cert.sign(key, algorithm.equalsIgnoreCase(\"EC\") ? \"SHA256withECDSA\" : \"SHA256withRSA\");\n \n         // Update the algorithm and sign again.\n         info.set(CertificateAlgorithmId.NAME + '.' + CertificateAlgorithmId.ALGORITHM, cert.get(X509CertImpl.SIG_ALG));\n         cert = new X509CertImpl(info);\n-        cert.sign(key, \"SHA256withRSA\");\n+        cert.sign(key, algorithm.equalsIgnoreCase(\"EC\") ? \"SHA256withECDSA\" : \"SHA256withRSA\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1466a863277817377d3a3f2e92b90755fae5aa77"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac39b8a36b46742666a9cc85128825a4296c87e6", "author": {"user": {"login": "hyperxpro", "name": "Aayush Atharva"}}, "url": "https://github.com/netty/netty/commit/ac39b8a36b46742666a9cc85128825a4296c87e6", "committedDate": "2020-04-29T10:29:22Z", "message": "Check if Algorithm is EC or RSA"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2111096d705435bc8e49cb43fb9fc1d8196175e0", "author": {"user": {"login": "hyperxpro", "name": "Aayush Atharva"}}, "url": "https://github.com/netty/netty/commit/2111096d705435bc8e49cb43fb9fc1d8196175e0", "committedDate": "2020-04-29T10:33:57Z", "message": "Remove unused imports"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyNTk1OTU4", "url": "https://github.com/netty/netty/pull/10223#pullrequestreview-402595958", "createdAt": "2020-04-29T11:56:59Z", "commit": {"oid": "ac39b8a36b46742666a9cc85128825a4296c87e6"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMTo1Njo1OVrOGN7eWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxMTo1Njo1OVrOGN7eWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzI1OTA5OQ==", "bodyText": "imho this would be more readable:\nif (!algorithm.equalsIgnoreCase(\"EC\") && !algorithm.equalsIgnoreCase(\"RSA\")) {\n...\n}", "url": "https://github.com/netty/netty/pull/10223#discussion_r417259099", "createdAt": "2020-04-29T11:56:59Z", "author": {"login": "normanmaurer"}, "path": "handler/src/main/java/io/netty/handler/ssl/util/SelfSignedCertificate.java", "diffHunk": "@@ -218,7 +220,11 @@ public SelfSignedCertificate(String fqdn, SecureRandom random, int bits, Date no\n      */\n     public SelfSignedCertificate(String fqdn, SecureRandom random, int bits, Date notBefore, Date notAfter,\n                                  String algorithm) throws CertificateException {\n-        // Generate key pair from specified algorithm.\n+\n+        if (!(algorithm.equalsIgnoreCase(\"EC\") || algorithm.equalsIgnoreCase(\"RSA\"))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac39b8a36b46742666a9cc85128825a4296c87e6"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "007c07ee5ad95b51990054c538f2f94e2069cc72", "author": {"user": {"login": "hyperxpro", "name": "Aayush Atharva"}}, "url": "https://github.com/netty/netty/commit/007c07ee5ad95b51990054c538f2f94e2069cc72", "committedDate": "2020-04-29T11:59:29Z", "message": "Simplify algorithm check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e71f1fe412e184fb19c4e1e9ed4879d7f585cdc", "author": {"user": {"login": "hyperxpro", "name": "Aayush Atharva"}}, "url": "https://github.com/netty/netty/commit/9e71f1fe412e184fb19c4e1e9ed4879d7f585cdc", "committedDate": "2020-04-29T12:00:32Z", "message": "Fix RSA algorithm check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e691abfbff0a03af7ca71092888289e3c12e37e6", "author": {"user": {"login": "hyperxpro", "name": "Aayush Atharva"}}, "url": "https://github.com/netty/netty/commit/e691abfbff0a03af7ca71092888289e3c12e37e6", "committedDate": "2020-04-29T13:12:18Z", "message": "Replace `example.com` with `localhost`"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyNzM5OTE0", "url": "https://github.com/netty/netty/pull/10223#pullrequestreview-402739914", "createdAt": "2020-04-29T14:44:26Z", "commit": {"oid": "e691abfbff0a03af7ca71092888289e3c12e37e6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 268, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}