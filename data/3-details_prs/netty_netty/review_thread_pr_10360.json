{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM3NzQzNDg0", "number": 10360, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxMToyNzoyOFrOERaHrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxMToyNzoyOFrOERaHrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg2Njg5MTk4OnYy", "diffSide": "RIGHT", "path": "codec-http/src/main/java/io/netty/handler/codec/http/multipart/AbstractDiskHttpData.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxMToyNzoyOFrOG2GbPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxMToyNzoyOFrOG2GbPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTM4MTU2Nw==", "bodyText": "@normanmaurer The javadocs for ByteBuf#getBytes state that the fileChannel position is not being modified. Does this not imply that all calls to this method start writing from the beginning of the file (and thus overwrite each other)?\nwritten is now also effectively unused; shouldn't this line be written = buffer.getBytes(...);?.\nsee #10425.", "url": "https://github.com/netty/netty/pull/10360#discussion_r459381567", "createdAt": "2020-07-23T11:27:28Z", "author": {"login": "zentol"}, "path": "codec-http/src/main/java/io/netty/handler/codec/http/multipart/AbstractDiskHttpData.java", "diffHunk": "@@ -165,9 +164,7 @@ public void addContent(ByteBuf buffer, boolean last)\n                     RandomAccessFile accessFile = new RandomAccessFile(file, \"rw\");\n                     fileChannel = accessFile.getChannel();\n                 }\n-                while (written < localsize) {\n-                    written += fileChannel.write(byteBuffer);\n-                }\n+                buffer.getBytes(buffer.readerIndex(), fileChannel, fileChannel.position(), localsize);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a97aaeb9548039924c55ea51893f0d11704fcf60"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3818, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}