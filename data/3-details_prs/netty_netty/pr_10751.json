{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEyNDY3NDYy", "number": 10751, "title": "Allow and skip null handlers when adding a vararg list of handlers", "bodyText": "Motivation\nAllowing null handlers allows for more convenient idioms in\nconditionally adding handlers, e.g.,\nch.pipeline().addLast(\n        new FooHandler(),\n        condition ? new BarHandler() : null,\n        new BazHandler()\n);\n\nModifications\n\nChange addFirst(..) and addLast(..) to skip null handlers, rather than\nbreak or short-circuit.\nAdd new unit tests.\n\nResult\n\nMakes addFirst(..) and addLast(..) behavior more consistent\nResolves #10728", "createdAt": "2020-10-29T18:13:16Z", "url": "https://github.com/netty/netty/pull/10751", "merged": true, "mergeCommit": {"oid": "3b90b536bb26b6b7e1123e3237807b8c3ff49b6e"}, "closed": true, "closedAt": "2020-11-03T20:11:36Z", "author": {"login": "Bennett-Lynch"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdXWNm0AH2gAyNTEyNDY3NDYyOjgwZmEwY2YyOGRhODk5ZTgxMjA0OTU0M2MyNjEwOTc5NzhkNTI0YWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXsY9rgH2gAyNTEyNDY3NDYyOmYxZjQyNzhkYzE3NzE2ZmQ0NjQ3OTZlNGViZmJjOTQwNGQyNTIzM2Y=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "80fa0cf28da899e812049543c261097978d524ac", "author": {"user": {"login": "Bennett-Lynch", "name": "Bennett Lynch"}}, "url": "https://github.com/netty/netty/commit/80fa0cf28da899e812049543c261097978d524ac", "committedDate": "2020-10-29T18:10:16Z", "message": "Allow and skip null handlers when adding a vararg list of handlers\n\nMotivation\n\nAllowing null handlers allows for more convenient idioms in\nconditionally adding handlers, e.g.,\n\nch.pipeline().addLast(\n        new FooHandler(),\n        condition ? new BarHandler() : null,\n        new BazHandler()\n);\n\nModifications\n\n* Change addFirst(..) and addLast(..) to skip null handlers, rather than\nbreak or short-circuit.\n* Add new unit tests.\n\nResult\n\n* Makes addFirst(..) and addLast(..) behavior more consistent\n* Resolves https://github.com/netty/netty/issues/10728"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwNTI4MzI1", "url": "https://github.com/netty/netty/pull/10751#pullrequestreview-520528325", "createdAt": "2020-10-30T10:09:59Z", "commit": {"oid": "80fa0cf28da899e812049543c261097978d524ac"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwNTMyMjQx", "url": "https://github.com/netty/netty/pull/10751#pullrequestreview-520532241", "createdAt": "2020-10-30T10:15:26Z", "commit": {"oid": "80fa0cf28da899e812049543c261097978d524ac"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxMDoxNToyN1rOHrIvqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxMDoxNjoxOVrOHrIxaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDk5NDA4OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        if (h == null) {\n          \n          \n            \n                            continue;\n          \n          \n            \n                        }\n          \n          \n            \n                        addFirst(executor, null, h);\n          \n          \n            \n                        if (h != null) {\n          \n          \n            \n                            addFirst(executor, null, h);\n          \n          \n            \n                        }", "url": "https://github.com/netty/netty/pull/10751#discussion_r514994089", "createdAt": "2020-10-30T10:15:27Z", "author": {"login": "chrisvest"}, "path": "transport/src/main/java/io/netty/channel/DefaultChannelPipeline.java", "diffHunk": "@@ -342,19 +342,12 @@ public final ChannelPipeline addFirst(ChannelHandler... handlers) {\n     @Override\n     public final ChannelPipeline addFirst(EventExecutorGroup executor, ChannelHandler... handlers) {\n         ObjectUtil.checkNotNull(handlers, \"handlers\");\n-        if (handlers.length == 0 || handlers[0] == null) {\n-            return this;\n-        }\n \n-        int size;\n-        for (size = 1; size < handlers.length; size ++) {\n-            if (handlers[size] == null) {\n-                break;\n-            }\n-        }\n-\n-        for (int i = size - 1; i >= 0; i --) {\n+        for (int i = handlers.length - 1; i >= 0; i --) {\n             ChannelHandler h = handlers[i];\n+            if (h == null) {\n+                continue;\n+            }\n             addFirst(executor, null, h);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80fa0cf28da899e812049543c261097978d524ac"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDk5NDUzOQ==", "bodyText": "Same here.", "url": "https://github.com/netty/netty/pull/10751#discussion_r514994539", "createdAt": "2020-10-30T10:16:19Z", "author": {"login": "chrisvest"}, "path": "transport/src/main/java/io/netty/channel/DefaultChannelPipeline.java", "diffHunk": "@@ -376,7 +369,7 @@ public final ChannelPipeline addLast(EventExecutorGroup executor, ChannelHandler\n \n         for (ChannelHandler h: handlers) {\n             if (h == null) {\n-                break;\n+                continue;\n             }\n             addLast(executor, null, h);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80fa0cf28da899e812049543c261097978d524ac"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1f4278dc17716fd464796e4ebfbc9404d25233f", "author": {"user": {"login": "Bennett-Lynch", "name": "Bennett Lynch"}}, "url": "https://github.com/netty/netty/commit/f1f4278dc17716fd464796e4ebfbc9404d25233f", "committedDate": "2020-10-30T20:00:35Z", "message": "Allow and skip null handlers when adding a vararg list of handlers\n\nMotivation\n\nAllowing null handlers allows for more convenient idioms in\nconditionally adding handlers, e.g.,\n\nch.pipeline().addLast(\n        new FooHandler(),\n        condition ? new BarHandler() : null,\n        new BazHandler()\n);\n\nModifications\n\n* Change addFirst(..) and addLast(..) to skip null handlers, rather than\nbreak or short-circuit.\n* Add new unit tests.\n\nResult\n\n* Makes addFirst(..) and addLast(..) behavior more consistent\n* Resolves https://github.com/netty/netty/issues/10728"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4960, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}