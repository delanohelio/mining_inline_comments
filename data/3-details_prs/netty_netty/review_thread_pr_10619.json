{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0MzU4MzI0", "number": 10619, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwMzoyOToxMlrOEoViaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwMzozMzozMFrOEoVlCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwNzMxMzY5OnYy", "diffSide": "RIGHT", "path": "transport-native-io_uring/src/main/c/io_uring.h", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwMzoyOToxMlrOHZXNqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwNzoxMTo1MVrOHZd6-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjM1Njc3OQ==", "bodyText": "interesting I thought it would even be present on old kernel version like 4.x", "url": "https://github.com/netty/netty/pull/10619#discussion_r496356779", "createdAt": "2020-09-29T03:29:12Z", "author": {"login": "1Jo1"}, "path": "transport-native-io_uring/src/main/c/io_uring.h", "diffHunk": "@@ -48,7 +48,10 @@ struct io_uring_sqe {\n \t};\n \t__u32\tlen;\t\t/* buffer size or number of iovecs */\n \tunion {\n-\t\t__kernel_rwf_t\trw_flags;\n+\t\t// IMPORTANT:\n+\t\t// We explicit use 'int __bitwise' here and not ' __kernel_rwf_t' as this may not be present in the\n+\t\t// kernel headers that are used on the system.\n+\t\tint __bitwise\trw_flags;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22952bd4007acb9ebdc55997bc22d32222f00981"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjQ1MDczMg==", "bodyText": "we compile our linux based releases on centos 6 for max compatibility. As far as I know these not ship 4.x kernels. So this makes sense I guess :)", "url": "https://github.com/netty/netty/pull/10619#discussion_r496450732", "createdAt": "2020-09-29T06:38:56Z", "author": {"login": "normanmaurer"}, "path": "transport-native-io_uring/src/main/c/io_uring.h", "diffHunk": "@@ -48,7 +48,10 @@ struct io_uring_sqe {\n \t};\n \t__u32\tlen;\t\t/* buffer size or number of iovecs */\n \tunion {\n-\t\t__kernel_rwf_t\trw_flags;\n+\t\t// IMPORTANT:\n+\t\t// We explicit use 'int __bitwise' here and not ' __kernel_rwf_t' as this may not be present in the\n+\t\t// kernel headers that are used on the system.\n+\t\tint __bitwise\trw_flags;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjM1Njc3OQ=="}, "originalCommit": {"oid": "22952bd4007acb9ebdc55997bc22d32222f00981"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjQ2NjY4Mw==", "bodyText": "Also I checked and this only exists in 5.x kernels.", "url": "https://github.com/netty/netty/pull/10619#discussion_r496466683", "createdAt": "2020-09-29T07:11:51Z", "author": {"login": "normanmaurer"}, "path": "transport-native-io_uring/src/main/c/io_uring.h", "diffHunk": "@@ -48,7 +48,10 @@ struct io_uring_sqe {\n \t};\n \t__u32\tlen;\t\t/* buffer size or number of iovecs */\n \tunion {\n-\t\t__kernel_rwf_t\trw_flags;\n+\t\t// IMPORTANT:\n+\t\t// We explicit use 'int __bitwise' here and not ' __kernel_rwf_t' as this may not be present in the\n+\t\t// kernel headers that are used on the system.\n+\t\tint __bitwise\trw_flags;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjM1Njc3OQ=="}, "originalCommit": {"oid": "22952bd4007acb9ebdc55997bc22d32222f00981"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwNzMyMDQzOnYy", "diffSide": "RIGHT", "path": "transport-native-io_uring/src/main/c/netty_io_uring_native.c", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwMzozMzozMFrOHZXRiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwNjozOToyNVrOHZc9mA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjM1Nzc2OA==", "bodyText": "why is the int declaration outside?", "url": "https://github.com/netty/netty/pull/10619#discussion_r496357768", "createdAt": "2020-09-29T03:33:30Z", "author": {"login": "1Jo1"}, "path": "transport-native-io_uring/src/main/c/netty_io_uring_native.c", "diffHunk": "@@ -201,7 +201,8 @@ static jboolean netty_io_uring_probe(JNIEnv *env, jclass clazz, jint ring_fd, ji\n \n     jsize opsLen = (*env)->GetArrayLength(env, ops);\n     jint *opsElements = (*env)->GetIntArrayElements(env, ops, 0);\n-    for (int i = 0; i < opsLen; i++) {\n+    int i;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22952bd4007acb9ebdc55997bc22d32222f00981"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjQ1MDk2OA==", "bodyText": "because the gcc we use on our docker image will fail otherwise as it uses an other c standard as default which not supports this.", "url": "https://github.com/netty/netty/pull/10619#discussion_r496450968", "createdAt": "2020-09-29T06:39:25Z", "author": {"login": "normanmaurer"}, "path": "transport-native-io_uring/src/main/c/netty_io_uring_native.c", "diffHunk": "@@ -201,7 +201,8 @@ static jboolean netty_io_uring_probe(JNIEnv *env, jclass clazz, jint ring_fd, ji\n \n     jsize opsLen = (*env)->GetArrayLength(env, ops);\n     jint *opsElements = (*env)->GetIntArrayElements(env, ops, 0);\n-    for (int i = 0; i < opsLen; i++) {\n+    int i;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjM1Nzc2OA=="}, "originalCommit": {"oid": "22952bd4007acb9ebdc55997bc22d32222f00981"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3777, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}