{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgyNTkzNDQ4", "number": 10075, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMDozMjo1OVrODkadfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QwNzo1MToxMVrODki2dw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5NTA4ODYxOnYy", "diffSide": "RIGHT", "path": "codec-http2/src/test/java/io/netty/handler/codec/http2/Http2TestUtil.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMDozMjo1OVrOFwuQ3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QwNzo0OToxMFrOFw7MVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjYzMzk1MA==", "bodyText": "This feels like something that almost certainly exists somewhere else.", "url": "https://github.com/netty/netty/pull/10075#discussion_r386633950", "createdAt": "2020-03-02T20:32:59Z", "author": {"login": "bryce-anderson"}, "path": "codec-http2/src/test/java/io/netty/handler/codec/http2/Http2TestUtil.java", "diffHunk": "@@ -687,6 +687,14 @@ static ByteBuf bb(String s) {\n         return ByteBufUtil.writeUtf8(UnpooledByteBufAllocator.DEFAULT, s);\n     }\n \n+    static ByteBuf bb(int size) {\n+        ByteBuf buf = UnpooledByteBufAllocator.DEFAULT.buffer();\n+        for (int i = 0; i < size; i++) {\n+            buf.writeByte('a');\n+        }\n+        return buf;\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9232b9a499ac6ccf6b571c7143e1a00a83950a91"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY1MjI2OQ==", "bodyText": "Just use bytebuf.writeZero(size); ?", "url": "https://github.com/netty/netty/pull/10075#discussion_r386652269", "createdAt": "2020-03-02T21:11:22Z", "author": {"login": "normanmaurer"}, "path": "codec-http2/src/test/java/io/netty/handler/codec/http2/Http2TestUtil.java", "diffHunk": "@@ -687,6 +687,14 @@ static ByteBuf bb(String s) {\n         return ByteBufUtil.writeUtf8(UnpooledByteBufAllocator.DEFAULT, s);\n     }\n \n+    static ByteBuf bb(int size) {\n+        ByteBuf buf = UnpooledByteBufAllocator.DEFAULT.buffer();\n+        for (int i = 0; i < size; i++) {\n+            buf.writeByte('a');\n+        }\n+        return buf;\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjYzMzk1MA=="}, "originalCommit": {"oid": "9232b9a499ac6ccf6b571c7143e1a00a83950a91"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjY2NDIxMw==", "bodyText": "Would you prefer I replace the body of this method with\nUnpooledByteBufAllocator.DEFAULT.buffer().writeZero(size) or inline it in the best?", "url": "https://github.com/netty/netty/pull/10075#discussion_r386664213", "createdAt": "2020-03-02T21:35:13Z", "author": {"login": "bryce-anderson"}, "path": "codec-http2/src/test/java/io/netty/handler/codec/http2/Http2TestUtil.java", "diffHunk": "@@ -687,6 +687,14 @@ static ByteBuf bb(String s) {\n         return ByteBufUtil.writeUtf8(UnpooledByteBufAllocator.DEFAULT, s);\n     }\n \n+    static ByteBuf bb(int size) {\n+        ByteBuf buf = UnpooledByteBufAllocator.DEFAULT.buffer();\n+        for (int i = 0; i < size; i++) {\n+            buf.writeByte('a');\n+        }\n+        return buf;\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjYzMzk1MA=="}, "originalCommit": {"oid": "9232b9a499ac6ccf6b571c7143e1a00a83950a91"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njg0NTc4MQ==", "bodyText": "I dont care... I was just mention it as you said there is most likely something like this already :)", "url": "https://github.com/netty/netty/pull/10075#discussion_r386845781", "createdAt": "2020-03-03T07:49:10Z", "author": {"login": "normanmaurer"}, "path": "codec-http2/src/test/java/io/netty/handler/codec/http2/Http2TestUtil.java", "diffHunk": "@@ -687,6 +687,14 @@ static ByteBuf bb(String s) {\n         return ByteBufUtil.writeUtf8(UnpooledByteBufAllocator.DEFAULT, s);\n     }\n \n+    static ByteBuf bb(int size) {\n+        ByteBuf buf = UnpooledByteBufAllocator.DEFAULT.buffer();\n+        for (int i = 0; i < size; i++) {\n+            buf.writeByte('a');\n+        }\n+        return buf;\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjYzMzk1MA=="}, "originalCommit": {"oid": "9232b9a499ac6ccf6b571c7143e1a00a83950a91"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5NTA5MjgzOnYy", "diffSide": "LEFT", "path": "codec-http2/src/main/java/io/netty/handler/codec/http2/AbstractHttp2StreamChannel.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMDozNDoxNVrOFwuTSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMDozNDoxNVrOFwuTSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjYzNDU3MA==", "bodyText": "This change isn't strictly necessary for this patch but I spent a fair amount of time trying to read through this for the nth time and decided to clean it up so the control flow (when the method returns etc, not H2 flow control) is more readable. If desired, we can move it to a different patch.", "url": "https://github.com/netty/netty/pull/10075#discussion_r386634570", "createdAt": "2020-03-02T20:34:15Z", "author": {"login": "bryce-anderson"}, "path": "codec-http2/src/main/java/io/netty/handler/codec/http2/AbstractHttp2StreamChannel.java", "diffHunk": "@@ -920,58 +920,57 @@ public void write(Object msg, final ChannelPromise promise) {\n             try {\n                 if (msg instanceof Http2StreamFrame) {\n                     Http2StreamFrame frame = validateStreamFrame((Http2StreamFrame) msg).stream(stream());\n-                    if (!firstFrameWritten && !isStreamIdValid(stream().id())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9232b9a499ac6ccf6b571c7143e1a00a83950a91"}, "originalPosition": 57}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5NTA5NDI3OnYy", "diffSide": "LEFT", "path": "codec-http2/src/main/java/io/netty/handler/codec/http2/AbstractHttp2StreamChannel.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMDozNDo0NFrOFwuUIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQyMDozNDo0NFrOFwuUIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjYzNDc4NQ==", "bodyText": "These are also not strictly necessary but part of the general cleanup I was attempting to do so this is more readable in the future.", "url": "https://github.com/netty/netty/pull/10075#discussion_r386634785", "createdAt": "2020-03-02T20:34:44Z", "author": {"login": "bryce-anderson"}, "path": "codec-http2/src/main/java/io/netty/handler/codec/http2/AbstractHttp2StreamChannel.java", "diffHunk": "@@ -558,10 +558,7 @@ void fireChildRead(Http2Frame frame) {\n             // read (unknown, reset) and the trade off is less conditionals for the hot path (headers/data) at the\n             // cost of additional readComplete notifications on the rare path.\n             if (allocHandle.continueReading()) {\n-                if (!readCompletePending) {\n-                    readCompletePending = true;\n-                    addChannelToReadCompletePendingQueue();\n-                }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9232b9a499ac6ccf6b571c7143e1a00a83950a91"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5NjQ2MzI3OnYy", "diffSide": "RIGHT", "path": "codec-http2/src/test/java/io/netty/handler/codec/http2/Http2MultiplexTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QwNzo1MToxMVrOFw7PJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QwNzo1MToxMVrOFw7PJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njg0NjUwMw==", "bodyText": "nit: private final static", "url": "https://github.com/netty/netty/pull/10075#discussion_r386846503", "createdAt": "2020-03-03T07:51:11Z", "author": {"login": "normanmaurer"}, "path": "codec-http2/src/test/java/io/netty/handler/codec/http2/Http2MultiplexTest.java", "diffHunk": "@@ -1152,6 +1152,66 @@ public void channelRead(ChannelHandlerContext ctx, Object msg) {\n         verifyFramesMultiplexedToCorrectChannel(childChannel, inboundHandler, 3);\n     }\n \n+    class FlushSniffer extends ChannelOutboundHandlerAdapter {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9232b9a499ac6ccf6b571c7143e1a00a83950a91"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3499, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}