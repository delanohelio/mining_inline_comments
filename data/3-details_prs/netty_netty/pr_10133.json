{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzMDgyODMx", "number": 10133, "title": "Release the ByteBuf when IOException occurs in AbstractMemoryHttpData.", "bodyText": "Motivation:\nAn IOException may be thrown from InputStream.read or checkSize method, and cause the ByteBuf  leak.\nModification:\nRelease the ByteBuf when IOException occurs.\nResult:\nAvoid ByteBuf leak.", "createdAt": "2020-03-24T15:58:10Z", "url": "https://github.com/netty/netty/pull/10133", "merged": true, "mergeCommit": {"oid": "aed5a74e098c3a82777007c5bf509b1359b9c487"}, "closed": true, "closedAt": "2020-03-30T09:26:04Z", "author": {"login": "seedeed"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQ03Y5AH2gAyMzkzMDgyODMxOmYxNGQ1N2RmYzViYmIyNWEyMmJjZTllYzc0Yzc4OGMyNjUwODU0Y2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcSrCaGAFqTM4MzY3NTY4Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f14d57dfc5bbb25a22bce9ec74c788c2650854cd", "author": {"user": {"login": "seedeed", "name": "feijermu"}}, "url": "https://github.com/netty/netty/commit/f14d57dfc5bbb25a22bce9ec74c788c2650854cd", "committedDate": "2020-03-24T15:44:26Z", "message": "Release the ByteBuf when IOException occurs in AbstractMemoryHttpData."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwNDY3MTg4", "url": "https://github.com/netty/netty/pull/10133#pullrequestreview-380467188", "createdAt": "2020-03-24T16:10:45Z", "commit": {"oid": "f14d57dfc5bbb25a22bce9ec74c788c2650854cd"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "973025324e8b1dbcc5406df8d2382db97c8b0027", "author": {"user": {"login": "seedeed", "name": "feijermu"}}, "url": "https://github.com/netty/netty/commit/973025324e8b1dbcc5406df8d2382db97c8b0027", "committedDate": "2020-03-25T14:02:29Z", "message": "Add a test case."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxNzc2NDE4", "url": "https://github.com/netty/netty/pull/10133#pullrequestreview-381776418", "createdAt": "2020-03-26T08:10:57Z", "commit": {"oid": "973025324e8b1dbcc5406df8d2382db97c8b0027"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQwODoxMDo1N1rOF77UOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQwODoxMDo1N1rOF77UOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM4MjEzOQ==", "bodyText": "Create a new instance of UnpooledByteBufAllocator as otherwise this may break if tests are executed concurrently.", "url": "https://github.com/netty/netty/pull/10133#discussion_r398382139", "createdAt": "2020-03-26T08:10:57Z", "author": {"login": "normanmaurer"}, "path": "codec-http/src/test/java/io/netty/handler/codec/http/multipart/AbstractMemoryHttpDataTest.java", "diffHunk": "@@ -59,6 +62,36 @@ public void testSetContentFromStream() throws Exception {\n         }\n     }\n \n+    @Test\n+    public void testSetContentFromStreamExceptionally() throws Exception {\n+        TestHttpData data = new TestHttpData(\"test\", UTF_8, 0); //definedSize=0\n+        data.setMaxSize(10);\n+        byte[] bytes = new byte[16];\n+        UnpooledByteBufAllocator alloc = UnpooledByteBufAllocator.DEFAULT;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "973025324e8b1dbcc5406df8d2382db97c8b0027"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2aae55bce7e704bdc0cca3ad13feb3d656c57f01", "author": {"user": {"login": "seedeed", "name": "feijermu"}}, "url": "https://github.com/netty/netty/commit/2aae55bce7e704bdc0cca3ad13feb3d656c57f01", "committedDate": "2020-03-27T12:56:25Z", "message": "Remove testSetContentFromStreamExceptionally and add another test case."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e557f45888ce67c47b41b085f482845d6a3b8928", "author": {"user": {"login": "seedeed", "name": "feijermu"}}, "url": "https://github.com/netty/netty/commit/e557f45888ce67c47b41b085f482845d6a3b8928", "committedDate": "2020-03-27T13:32:33Z", "message": "Remove try-with-resources."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzNjc1Njgy", "url": "https://github.com/netty/netty/pull/10133#pullrequestreview-383675682", "createdAt": "2020-03-30T09:25:16Z", "commit": {"oid": "e557f45888ce67c47b41b085f482845d6a3b8928"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 210, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}