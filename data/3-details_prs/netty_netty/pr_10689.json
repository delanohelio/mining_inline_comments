{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzOTIzNDM3", "number": 10689, "title": "Fix or suppress LGTM findings", "bodyText": "Motivation:\nLGTM reports multiple issues. They need to be triaged,\nand real ones should be fixed.\nModifications:\n\nFixed multiple issues reported by LGTM, such as redundant conditions, resource leaks, typos, possible integer overflows.\nSuppressed false-positives.\nAdded a few testcases.\n\nResult:\nFixed several possible issues, get rid of false alarms in the LGTM report.\nhttps://lgtm.com/projects/g/netty/netty/?mode=list&tag=\nThe suppressed warnings don't look like real issues after you have a closed look at the code around. However, they may still be fixed if we don't want to have many suppression comments, of if we'd like to be paranoids. Please let me know.", "createdAt": "2020-10-15T08:27:46Z", "url": "https://github.com/netty/netty/pull/10689", "merged": true, "mergeCommit": {"oid": "1ca7d5db8167f904395d879b8851eb35d6f596f3"}, "closed": true, "closedAt": "2020-10-17T07:49:44Z", "author": {"login": "artem-smotrakov"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdStzMXgFqTUwOTE1NTkyNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdTA7DhAFqTUxMDIwNDUwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5MTU1OTI3", "url": "https://github.com/netty/netty/pull/10689#pullrequestreview-509155927", "createdAt": "2020-10-15T08:49:31Z", "commit": {"oid": "809427182ac8cefcbb5133e310e453a97850258b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwODo0OTozMVrOHh8wzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwODo0OTozMVrOHh8wzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTM2MDU5MA==", "bodyText": "why was this changed ?", "url": "https://github.com/netty/netty/pull/10689#discussion_r505360590", "createdAt": "2020-10-15T08:49:31Z", "author": {"login": "normanmaurer"}, "path": "transport-native-epoll/src/main/java/io/netty/channel/epoll/EpollEventArray.java", "diffHunk": "@@ -109,7 +109,8 @@ int fd(int index) {\n \n     private int getInt(int index, int offset) {\n         if (PlatformDependent.hasUnsafe()) {\n-            return PlatformDependent.getInt(memoryAddress + index * EPOLL_EVENT_SIZE + offset);\n+            long n = index * EPOLL_EVENT_SIZE;\n+            return PlatformDependent.getInt(memoryAddress + n + offset);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "809427182ac8cefcbb5133e310e453a97850258b"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "809427182ac8cefcbb5133e310e453a97850258b", "author": {"user": {"login": "artem-smotrakov", "name": "Artem Smotrakov"}}, "url": "https://github.com/netty/netty/commit/809427182ac8cefcbb5133e310e453a97850258b", "committedDate": "2020-10-15T08:14:13Z", "message": "Fix or suppress LGTM findings\n\nMotivation:\n\nLGTM reports multiple issues. They need to be triaged,\nand real ones should be fixed.\n\nModifications:\n- Fixed multiple issues reported by LGTM, such as redundant conditions,\n  resource leaks, typos, possible integer overflows.\n- Suppressed false-positives.\n- Added a few testcases.\n\nResult:\n\nFixed several possible issues, get rid of false alarms in the LGTM report."}, "afterCommit": {"oid": "018fb936d906997d5323b7171f23ed0f2885c142", "author": {"user": {"login": "artem-smotrakov", "name": "Artem Smotrakov"}}, "url": "https://github.com/netty/netty/commit/018fb936d906997d5323b7171f23ed0f2885c142", "committedDate": "2020-10-15T10:07:33Z", "message": "Fix or suppress LGTM findings\n\nMotivation:\n\nLGTM reports multiple issues. They need to be triaged,\nand real ones should be fixed.\n\nModifications:\n- Fixed multiple issues reported by LGTM, such as redundant conditions,\n  resource leaks, typos, possible integer overflows.\n- Suppressed false-positives.\n- Added a few testcases.\n\nResult:\n\nFixed several possible issues, get rid of false alarms in the LGTM report."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5MzE0MTYz", "url": "https://github.com/netty/netty/pull/10689#pullrequestreview-509314163", "createdAt": "2020-10-15T12:17:08Z", "commit": {"oid": "018fb936d906997d5323b7171f23ed0f2885c142"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxMjoxNzowOFrOHiE3rg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxMjoxNzozN1rOHiE4vw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ5MzQyMg==", "bodyText": "I think we should throw if closed is true as otherwise we may create a new instance that is never closed again .", "url": "https://github.com/netty/netty/pull/10689#discussion_r505493422", "createdAt": "2020-10-15T12:17:08Z", "author": {"login": "normanmaurer"}, "path": "buffer/src/main/java/io/netty/buffer/ByteBufOutputStream.java", "diffHunk": "@@ -133,7 +134,8 @@ public void writeShort(int v) throws IOException {\n     public void writeUTF(String s) throws IOException {\n         DataOutputStream out = utf8out;\n         if (out == null) {\n-            utf8out = out = new DataOutputStream(this);\n+            // Suppress a warning since the stream is closed in the close() method\n+            utf8out = out = new DataOutputStream(this); // lgtm[java/output-resource-leak]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "018fb936d906997d5323b7171f23ed0f2885c142"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ5MzY5NQ==", "bodyText": "move this in a finally block ?", "url": "https://github.com/netty/netty/pull/10689#discussion_r505493695", "createdAt": "2020-10-15T12:17:37Z", "author": {"login": "normanmaurer"}, "path": "buffer/src/main/java/io/netty/buffer/ByteBufOutputStream.java", "diffHunk": "@@ -144,4 +146,17 @@ public void writeUTF(String s) throws IOException {\n     public ByteBuf buffer() {\n         return buffer;\n     }\n+\n+    @Override\n+    public void close() throws IOException {\n+        if (closed) {\n+            return;\n+        }\n+        closed = true;\n+\n+        super.close();\n+        if (utf8out != null) {\n+            utf8out.close();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "018fb936d906997d5323b7171f23ed0f2885c142"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "157ee2a8029c70cc9cc26356c3abeb913724fca6", "author": {"user": {"login": "artem-smotrakov", "name": "Artem Smotrakov"}}, "url": "https://github.com/netty/netty/commit/157ee2a8029c70cc9cc26356c3abeb913724fca6", "committedDate": "2020-10-15T12:37:21Z", "message": "Fix or suppress LGTM findings\n\nMotivation:\n\nLGTM reports multiple issues. They need to be triaged,\nand real ones should be fixed.\n\nModifications:\n- Fixed multiple issues reported by LGTM, such as redundant conditions,\n  resource leaks, typos, possible integer overflows.\n- Suppressed false-positives.\n- Added a few testcases.\n\nResult:\n\nFixed several possible issues, get rid of false alarms in the LGTM report."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "018fb936d906997d5323b7171f23ed0f2885c142", "author": {"user": {"login": "artem-smotrakov", "name": "Artem Smotrakov"}}, "url": "https://github.com/netty/netty/commit/018fb936d906997d5323b7171f23ed0f2885c142", "committedDate": "2020-10-15T10:07:33Z", "message": "Fix or suppress LGTM findings\n\nMotivation:\n\nLGTM reports multiple issues. They need to be triaged,\nand real ones should be fixed.\n\nModifications:\n- Fixed multiple issues reported by LGTM, such as redundant conditions,\n  resource leaks, typos, possible integer overflows.\n- Suppressed false-positives.\n- Added a few testcases.\n\nResult:\n\nFixed several possible issues, get rid of false alarms in the LGTM report."}, "afterCommit": {"oid": "157ee2a8029c70cc9cc26356c3abeb913724fca6", "author": {"user": {"login": "artem-smotrakov", "name": "Artem Smotrakov"}}, "url": "https://github.com/netty/netty/commit/157ee2a8029c70cc9cc26356c3abeb913724fca6", "committedDate": "2020-10-15T12:37:21Z", "message": "Fix or suppress LGTM findings\n\nMotivation:\n\nLGTM reports multiple issues. They need to be triaged,\nand real ones should be fixed.\n\nModifications:\n- Fixed multiple issues reported by LGTM, such as redundant conditions,\n  resource leaks, typos, possible integer overflows.\n- Suppressed false-positives.\n- Added a few testcases.\n\nResult:\n\nFixed several possible issues, get rid of false alarms in the LGTM report."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwMjA0NTAx", "url": "https://github.com/netty/netty/pull/10689#pullrequestreview-510204501", "createdAt": "2020-10-16T07:06:18Z", "commit": {"oid": "157ee2a8029c70cc9cc26356c3abeb913724fca6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4923, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}