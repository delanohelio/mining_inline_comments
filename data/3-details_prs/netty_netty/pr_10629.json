{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2MjY3MjIx", "number": 10629, "title": "Replace UNSAFE.throwException with alternatives supported on Java 8", "bodyText": "Motivation:\nWe wish to use Unsafe as little as possible, and Java 8 allows us\nto take some short-cuts or play some tricks with generics,\nfor the purpose of working around having to declare all checked\nexceptions. Ideally all checked exceptions would be declared, but\nthe code base is not ready for that yet.\nModification:\nThe call to UNSAFE.throwException has been removed, so when we need\nthat feature, we instead use the generic exception trick.\nIn may cases, Java 8 allows us to throw Throwable directly. This\nhappens in cases where no exception is declared to be thrown in a\nscope.\nFinally, some warnings have also been fixed, and some imports have\nbeen reorganised and cleaned up while I was modifying the files\nanyway.\nResult:\nWe no longer use Unsafe for throwing any exceptions.", "createdAt": "2020-10-01T13:37:44Z", "url": "https://github.com/netty/netty/pull/10629", "merged": true, "mergeCommit": {"oid": "86c8f24d9a40612de224d2e3d4279a4e7e3c8b09"}, "closed": true, "closedAt": "2020-10-02T06:29:08Z", "author": {"login": "chrisvest"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdORfPWgH2gAyNDk2MjY3MjIxOjM5ZjZhYmNiMTQxZjllNWI4NDQ2ZDk0ZTNlM2UyZTE1YjY5MDdmZjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdORyTFAFqTUwMDM3MjgwNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "39f6abcb141f9e5b8446d94e3e3e2e15b6907ff3", "author": {"user": {"login": "chrisvest", "name": "Chris Vest"}}, "url": "https://github.com/netty/netty/commit/39f6abcb141f9e5b8446d94e3e3e2e15b6907ff3", "committedDate": "2020-10-01T13:34:41Z", "message": "Replace UNSAFE.throwException with alternatives supported on Java 8\n\nMotivation:\n We wish to use Unsafe as little as possible, and Java 8 allows us\n to take some short-cuts or play some tricks with generics,\n for the purpose of working around having to declare all checked\n exceptions. Ideally all checked exceptions would be declared, but\n the code base is not ready for that yet.\n\nModification:\n The call to UNSAFE.throwException has been removed, so when we need\n that feature, we instead use the generic exception trick.\n In may cases, Java 8 allows us to throw Throwable directly. This\n happens in cases where no exception is declared to be thrown in a\n scope.\n Finally, some warnings have also been fixed, and some imports have\n been reorganised and cleaned up while I was modifying the files\n anyway.\n\nResult:\n We no longer use Unsafe for throwing any exceptions."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMzcyODA0", "url": "https://github.com/netty/netty/pull/10629#pullrequestreview-500372804", "createdAt": "2020-10-01T13:55:29Z", "commit": {"oid": "39f6abcb141f9e5b8446d94e3e3e2e15b6907ff3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxMzo1NTozMFrOHbLlOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxMzo1NTozMFrOHbLlOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODI2MzM1NQ==", "bodyText": "good call", "url": "https://github.com/netty/netty/pull/10629#discussion_r498263355", "createdAt": "2020-10-01T13:55:30Z", "author": {"login": "normanmaurer"}, "path": "common/src/main/java/io/netty/util/NetUtil.java", "diffHunk": "@@ -143,22 +143,22 @@\n         byte[] LOCALHOST6_BYTES = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1};\n \n         // Create IPv4 loopback address.\n-        Inet4Address localhost4 = null;\n+        Inet4Address localhost4;\n         try {\n             localhost4 = (Inet4Address) InetAddress.getByAddress(\"localhost\", LOCALHOST4_BYTES);\n-        } catch (Exception e) {\n+        } catch (UnknownHostException e) {\n             // We should not get here as long as the length of the address is correct.\n-            PlatformDependent.throwException(e);\n+            throw new ExceptionInInitializerError(e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "39f6abcb141f9e5b8446d94e3e3e2e15b6907ff3"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 89, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}