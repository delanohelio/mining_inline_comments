{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg4NjMzNzgz", "number": 10110, "title": "Close SocketChannel upon exceptions to avoid leaking", "bodyText": "This fixes #10109\nby correctly closing the channel upon exceptions.\nFixes #10109", "createdAt": "2020-03-15T09:00:38Z", "url": "https://github.com/netty/netty/pull/10110", "merged": true, "mergeCommit": {"oid": "286f14f04a0c21de7954a2f30f48e9a93fbfa9d4"}, "closed": true, "closedAt": "2020-03-16T12:37:30Z", "author": {"login": "blindpirate"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcN1sxRAH2gAyMzg4NjMzNzgzOjgwMzNlNmExZGI1MDE1Zjg4MTIxNzU2MDhhMTNmYjk5MzVjMDU0OTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOMKCngFqTM3NTExMjYyOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8033e6a1db5015f8812175608a13fb9935c05494", "author": {"user": {"login": "blindpirate", "name": "Bo Zhang"}}, "url": "https://github.com/netty/netty/commit/8033e6a1db5015f8812175608a13fb9935c05494", "committedDate": "2020-03-15T09:00:58Z", "message": "Close SocketChannel upon exceptions to avoid leaking\n\nThis fixes https://github.com/netty/netty/issues/10109\nby correctly closing the channel upon exceptions."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "36d6f428780dc5e0e0826df84cf364421384aa6e", "author": {"user": {"login": "blindpirate", "name": "Bo Zhang"}}, "url": "https://github.com/netty/netty/commit/36d6f428780dc5e0e0826df84cf364421384aa6e", "committedDate": "2020-03-15T08:47:34Z", "message": "Close SocketChannel upon exceptions to avoid leaking\n\nThis fixes https://github.com/netty/netty/issues/10109\nby correctly closing the channel upon exceptions."}, "afterCommit": {"oid": "8033e6a1db5015f8812175608a13fb9935c05494", "author": {"user": {"login": "blindpirate", "name": "Bo Zhang"}}, "url": "https://github.com/netty/netty/commit/8033e6a1db5015f8812175608a13fb9935c05494", "committedDate": "2020-03-15T09:00:58Z", "message": "Close SocketChannel upon exceptions to avoid leaking\n\nThis fixes https://github.com/netty/netty/issues/10109\nby correctly closing the channel upon exceptions."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1MDAxMTAy", "url": "https://github.com/netty/netty/pull/10110#pullrequestreview-375001102", "createdAt": "2020-03-16T08:35:11Z", "commit": {"oid": "8033e6a1db5015f8812175608a13fb9935c05494"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwODozNToxMVrOF2p7-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwODozNToxMVrOF2p7-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg1NDUyMg==", "bodyText": "@blindpirate I think this should be changed to:\ntry {\n    ...\n} catch (Throwable cause) {\n    channel.close();\n    promise.setFailure(e);\n    return;\n}", "url": "https://github.com/netty/netty/pull/10110#discussion_r392854522", "createdAt": "2020-03-16T08:35:11Z", "author": {"login": "normanmaurer"}, "path": "transport/src/main/java/io/netty/bootstrap/Bootstrap.java", "diffHunk": "@@ -189,7 +189,13 @@ private ChannelFuture doResolveAndConnect0(final Channel channel, SocketAddress\n                                                final SocketAddress localAddress, final ChannelPromise promise) {\n         try {\n             final EventLoop eventLoop = channel.eventLoop();\n-            final AddressResolver<SocketAddress> resolver = this.resolver.getResolver(eventLoop);\n+            AddressResolver<SocketAddress> resolver;\n+            try {\n+                resolver = this.resolver.getResolver(eventLoop);\n+            } catch (Throwable e) {\n+                channel.close();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8033e6a1db5015f8812175608a13fb9935c05494"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d9f86e9bddbba3370c8b5f07443adb082632611", "author": {"user": {"login": "normanmaurer", "name": "Norman Maurer"}}, "url": "https://github.com/netty/netty/commit/4d9f86e9bddbba3370c8b5f07443adb082632611", "committedDate": "2020-03-16T11:03:25Z", "message": "Add testcase and cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d38688d842717fec695b7183c60cb55a45299aa", "author": {"user": {"login": "normanmaurer", "name": "Norman Maurer"}}, "url": "https://github.com/netty/netty/commit/1d38688d842717fec695b7183c60cb55a45299aa", "committedDate": "2020-03-16T11:05:22Z", "message": "cleanup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1MTEyNjI4", "url": "https://github.com/netty/netty/pull/10110#pullrequestreview-375112628", "createdAt": "2020-03-16T11:10:51Z", "commit": {"oid": "1d38688d842717fec695b7183c60cb55a45299aa"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 403, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}