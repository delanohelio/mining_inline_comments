{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYwNzIzMjY5", "number": 10444, "title": "Create a new h2 stream only if the parent channel is still active", "bodyText": "Motivation:\nIf a request to open a new h2 stream was made from outside of the\nEventLoop it will be scheduled for future execution on the EventLoop.\nHowever, during the time before the open0 task will be executed the\nparent channel may already be closed. As a result,\nHttp2MultiplexHandler#newOutboundStream() will throw an\nIllegalStateException with the message that is hard to\ninterpret correctly for this use-case: \"Http2FrameCodec not found. Has\nthe handler been added to a pipeline?\".\nModifications:\n\nCheck that the parent h2 Channel is still active before creating a\nnew stream when open0 task is picked up by EventLoop;\n\nResult:\nUsers see a correct ClosedChannelException in case the parent h2\nChannel was closed concurrently with a request for a new stream.", "createdAt": "2020-08-01T02:56:00Z", "url": "https://github.com/netty/netty/pull/10444", "merged": true, "mergeCommit": {"oid": "5aea78950f6ee0b02169c9fec15901e8bc0c3888"}, "closed": true, "closedAt": "2020-08-06T11:54:47Z", "author": {"login": "idelpivnitskiy"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc6fx6iAH2gAyNDYwNzIzMjY5OmJiOWU1NDA0MTliNzQ1MzRiNDA4YzZiN2NjZDgwOTQ5M2UwNDkzNTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8L-L2gH2gAyNDYwNzIzMjY5OmQxYjE5MjA4MjVjYzEwYTVjOTE4MGQwMjIyNzNjMTQxZjQ5ZmFjNmU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bb9e540419b74534b408c6b7ccd809493e049351", "author": {"user": {"login": "idelpivnitskiy", "name": "Idel Pivnitskiy"}}, "url": "https://github.com/netty/netty/commit/bb9e540419b74534b408c6b7ccd809493e049351", "committedDate": "2020-08-01T02:55:16Z", "message": "Create a new h2 stream only if the parent channel is still active\n\nMotivation:\n\nIf a request to open a new h2 stream was made from outside of the\nEventLoop it will be scheduled for future execution on the EventLoop.\nHowever, during the time before the `open0` task will be executed the\nparent channel may already be closed. As the result,\n`Http2MultiplexHandler#newOutboundStream()` will throw an\n`IllegalStateException` with the message that is hard to\ninterpret correctly for this use-case: \"Http2FrameCodec not found. Has\nthe handler been added to a pipeline?\".\n\nModifications:\n\n- Check that the parent h2 `Channel` is still active before creating a\nnew stream when `open0` task is picked up by EventLoop;\n\nResult:\n\nUsers see a correct `ClosedChannelException` in case the parent h2\n`Channel` was closed concurrently with a request for a new stream."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72425906d5668d44ba2095d1efdf276e8f1a42ee", "author": {"user": {"login": "idelpivnitskiy", "name": "Idel Pivnitskiy"}}, "url": "https://github.com/netty/netty/commit/72425906d5668d44ba2095d1efdf276e8f1a42ee", "committedDate": "2020-08-05T02:17:28Z", "message": "Add unit-test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxMzg2MTE5", "url": "https://github.com/netty/netty/pull/10444#pullrequestreview-461386119", "createdAt": "2020-08-05T06:52:42Z", "commit": {"oid": "72425906d5668d44ba2095d1efdf276e8f1a42ee"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwNjo1Mjo0MlrOG78jyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwNjo1Mjo0MlrOG78jyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTUxMTM3MA==", "bodyText": "nit: add license header", "url": "https://github.com/netty/netty/pull/10444#discussion_r465511370", "createdAt": "2020-08-05T06:52:42Z", "author": {"login": "normanmaurer"}, "path": "codec-http2/src/test/java/io/netty/handler/codec/http2/Http2StreamChannelBootstrapTest.java", "diffHunk": "@@ -0,0 +1,126 @@\n+package io.netty.handler.codec.http2;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72425906d5668d44ba2095d1efdf276e8f1a42ee"}, "originalPosition": 1}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d7f366c6838073be957053656e7cde6c17785c0", "author": {"user": {"login": "idelpivnitskiy", "name": "Idel Pivnitskiy"}}, "url": "https://github.com/netty/netty/commit/6d7f366c6838073be957053656e7cde6c17785c0", "committedDate": "2020-08-05T16:20:05Z", "message": "add license header"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cdeeac764c5766261432d0d0835c90d6a4e2d3fe", "author": {"user": {"login": "normanmaurer", "name": "Norman Maurer"}}, "url": "https://github.com/netty/netty/commit/cdeeac764c5766261432d0d0835c90d6a4e2d3fe", "committedDate": "2020-08-06T06:36:14Z", "message": "Merge branch '4.1' into stream-channel-is-active"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6898ae2ec11037e07d6c7f5950b7c87e8143b7b4", "author": {"user": {"login": "normanmaurer", "name": "Norman Maurer"}}, "url": "https://github.com/netty/netty/commit/6898ae2ec11037e07d6c7f5950b7c87e8143b7b4", "committedDate": "2020-08-06T07:25:01Z", "message": "Fix compile error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1b1920825cc10a5c9180d022273c141f49fac6e", "author": {"user": {"login": "normanmaurer", "name": "Norman Maurer"}}, "url": "https://github.com/netty/netty/commit/d1b1920825cc10a5c9180d022273c141f49fac6e", "committedDate": "2020-08-06T08:58:25Z", "message": "Fix check style"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 175, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}