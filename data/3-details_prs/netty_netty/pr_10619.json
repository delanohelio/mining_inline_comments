{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0MzU4MzI0", "number": 10619, "title": "Ensure we can compile io_uring transport on systems that have linux k\u2026", "bodyText": "\u2026ernel < 5.1\nMotivation:\nWhile we need to have a very recent kernel to run the io_uring transport itself we should allow to compile it with earlier versions to help with our build story.\nModifications:\n\nEnsure we can compile on \"older systems\"\nJust enable the profile when we build on linux\n\nResult:\nLess complicated to build io_uring transport", "createdAt": "2020-09-28T19:36:54Z", "url": "https://github.com/netty/netty/pull/10619", "merged": true, "mergeCommit": {"oid": "ca8c4538c16aac911664226d78abfa82648baf85"}, "closed": true, "closedAt": "2020-09-29T11:09:05Z", "author": {"login": "normanmaurer"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdNY4rmgBqjM4MTYxNjI0MDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNlnCvgFqTQ5ODMyNzM5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bb582309f705d91aebc1883efd364d00a209c91f", "author": {"user": {"login": "normanmaurer", "name": "Norman Maurer"}}, "url": "https://github.com/netty/netty/commit/bb582309f705d91aebc1883efd364d00a209c91f", "committedDate": "2020-09-28T19:36:06Z", "message": "Ensure we can compule io_uring transport on systems that have linux kernel < 5.1\n\nMotivation:\n\nWhile we need to have a very recent kernel to run the io_uring transport itself we should allow to compile it with earlier versions to help with our build story.\n\nModifications:\n\n- Ensure we can compile on \"older systems\"\n- Just enable the profile when we build on linux\n\nResult:\n\nLess complicated to build io_uring transport"}, "afterCommit": {"oid": "4faa637ccd1d997358f1e039162baf2e730b8d11", "author": {"user": {"login": "normanmaurer", "name": "Norman Maurer"}}, "url": "https://github.com/netty/netty/commit/4faa637ccd1d997358f1e039162baf2e730b8d11", "committedDate": "2020-09-28T19:37:45Z", "message": "Ensure we can compule io_uring transport on systems that have linux kernel < 5.1\n\nMotivation:\n\nWhile we need to have a very recent kernel to run the io_uring transport itself we should allow to compile it with earlier versions to help with our build story.\n\nModifications:\n\n- Ensure we can compile on \"older systems\"\n- Just enable the profile when we build on linux\n\nResult:\n\nLess complicated to build io_uring transport"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4faa637ccd1d997358f1e039162baf2e730b8d11", "author": {"user": {"login": "normanmaurer", "name": "Norman Maurer"}}, "url": "https://github.com/netty/netty/commit/4faa637ccd1d997358f1e039162baf2e730b8d11", "committedDate": "2020-09-28T19:37:45Z", "message": "Ensure we can compule io_uring transport on systems that have linux kernel < 5.1\n\nMotivation:\n\nWhile we need to have a very recent kernel to run the io_uring transport itself we should allow to compile it with earlier versions to help with our build story.\n\nModifications:\n\n- Ensure we can compile on \"older systems\"\n- Just enable the profile when we build on linux\n\nResult:\n\nLess complicated to build io_uring transport"}, "afterCommit": {"oid": "22952bd4007acb9ebdc55997bc22d32222f00981", "author": {"user": {"login": "normanmaurer", "name": "Norman Maurer"}}, "url": "https://github.com/netty/netty/commit/22952bd4007acb9ebdc55997bc22d32222f00981", "committedDate": "2020-09-28T19:40:19Z", "message": "Ensure we can compule io_uring transport on systems that have linux kernel < 5.1\n\nMotivation:\n\nWhile we need to have a very recent kernel to run the io_uring transport itself we should allow to compile it with earlier versions to help with our build story.\n\nModifications:\n\n- Ensure we can compile on \"older systems\"\n- Just enable the profile when we build on linux\n\nResult:\n\nLess complicated to build io_uring transport"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4MDM5MDkz", "url": "https://github.com/netty/netty/pull/10619#pullrequestreview-498039093", "createdAt": "2020-09-29T03:29:12Z", "commit": {"oid": "22952bd4007acb9ebdc55997bc22d32222f00981"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwMzoyOToxMlrOHZXNqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwMzozMzozMFrOHZXRiA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjM1Njc3OQ==", "bodyText": "interesting I thought it would even be present on old kernel version like 4.x", "url": "https://github.com/netty/netty/pull/10619#discussion_r496356779", "createdAt": "2020-09-29T03:29:12Z", "author": {"login": "1Jo1"}, "path": "transport-native-io_uring/src/main/c/io_uring.h", "diffHunk": "@@ -48,7 +48,10 @@ struct io_uring_sqe {\n \t};\n \t__u32\tlen;\t\t/* buffer size or number of iovecs */\n \tunion {\n-\t\t__kernel_rwf_t\trw_flags;\n+\t\t// IMPORTANT:\n+\t\t// We explicit use 'int __bitwise' here and not ' __kernel_rwf_t' as this may not be present in the\n+\t\t// kernel headers that are used on the system.\n+\t\tint __bitwise\trw_flags;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22952bd4007acb9ebdc55997bc22d32222f00981"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjM1Nzc2OA==", "bodyText": "why is the int declaration outside?", "url": "https://github.com/netty/netty/pull/10619#discussion_r496357768", "createdAt": "2020-09-29T03:33:30Z", "author": {"login": "1Jo1"}, "path": "transport-native-io_uring/src/main/c/netty_io_uring_native.c", "diffHunk": "@@ -201,7 +201,8 @@ static jboolean netty_io_uring_probe(JNIEnv *env, jclass clazz, jint ring_fd, ji\n \n     jsize opsLen = (*env)->GetArrayLength(env, ops);\n     jint *opsElements = (*env)->GetIntArrayElements(env, ops, 0);\n-    for (int i = 0; i < opsLen; i++) {\n+    int i;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22952bd4007acb9ebdc55997bc22d32222f00981"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d741d892b0b93943663183d6701c1ac68f6c191", "author": {"user": {"login": "normanmaurer", "name": "Norman Maurer"}}, "url": "https://github.com/netty/netty/commit/4d741d892b0b93943663183d6701c1ac68f6c191", "committedDate": "2020-09-29T07:13:27Z", "message": "Ensure we can compule io_uring transport on systems that have linux kernel < 5.1\n\nMotivation:\n\nWhile we need to have a very recent kernel to run the io_uring transport itself we should allow to compile it with earlier versions to help with our build story.\n\nModifications:\n\n- Ensure we can compile on \"older systems\"\n- Just enable the profile when we build on linux\n\nResult:\n\nLess complicated to build io_uring transport"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "22952bd4007acb9ebdc55997bc22d32222f00981", "author": {"user": {"login": "normanmaurer", "name": "Norman Maurer"}}, "url": "https://github.com/netty/netty/commit/22952bd4007acb9ebdc55997bc22d32222f00981", "committedDate": "2020-09-28T19:40:19Z", "message": "Ensure we can compule io_uring transport on systems that have linux kernel < 5.1\n\nMotivation:\n\nWhile we need to have a very recent kernel to run the io_uring transport itself we should allow to compile it with earlier versions to help with our build story.\n\nModifications:\n\n- Ensure we can compile on \"older systems\"\n- Just enable the profile when we build on linux\n\nResult:\n\nLess complicated to build io_uring transport"}, "afterCommit": {"oid": "4d741d892b0b93943663183d6701c1ac68f6c191", "author": {"user": {"login": "normanmaurer", "name": "Norman Maurer"}}, "url": "https://github.com/netty/netty/commit/4d741d892b0b93943663183d6701c1ac68f6c191", "committedDate": "2020-09-29T07:13:27Z", "message": "Ensure we can compule io_uring transport on systems that have linux kernel < 5.1\n\nMotivation:\n\nWhile we need to have a very recent kernel to run the io_uring transport itself we should allow to compile it with earlier versions to help with our build story.\n\nModifications:\n\n- Ensure we can compile on \"older systems\"\n- Just enable the profile when we build on linux\n\nResult:\n\nLess complicated to build io_uring transport"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4MzI3Mzk3", "url": "https://github.com/netty/netty/pull/10619#pullrequestreview-498327397", "createdAt": "2020-09-29T10:27:23Z", "commit": {"oid": "4d741d892b0b93943663183d6701c1ac68f6c191"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 76, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}