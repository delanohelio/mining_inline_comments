{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEzNjgxMTU0", "number": 452, "title": "Implement youtube subscription import from Google takeout", "bodyText": "I carefully read the contribution guidelines and agree to them.\n I have tested the API against NewPipe.\n I agree to create a pull request for NewPipe as soon as possible to make it compatible with the changed API.\n\nThis PR replaces the current approach of importing subscriptions (since it has been removed by YouTube) with Google takeout. Fixes TeamNewPipe/NewPipe#4720\nI implemented a test with a real-world Google takeout file and it worked flawlessy.\nDepends on TeamNewPipe/NewPipe#4759", "createdAt": "2020-11-01T19:49:13Z", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/452", "merged": true, "mergeCommit": {"oid": "b13c7e1c1ea9424e4684320f6efbf3bdc0a2cd70"}, "closed": true, "closedAt": "2020-11-03T19:32:18Z", "author": {"login": "Stypox"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdYYZffgFqTUyMTI2NjQ1Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdYiXwIAFqTUyMTUyMzk4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMjY2NDUy", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/452#pullrequestreview-521266452", "createdAt": "2020-11-01T22:08:56Z", "commit": {"oid": "bfdb1d1661724d59d93bebd877e994469857bf16"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMVQyMjowODo1N1rOHryhWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMVQyMjowODo1N1rOHryhWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTY3ODU1NQ==", "bodyText": "Is it intended to set the content language to en_GB?", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/452#discussion_r515678555", "createdAt": "2020-11-01T22:08:57Z", "author": {"login": "TobiGr"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/youtube/extractors/YoutubeSubscriptionExtractor.java", "diffHunk": "@@ -1,126 +1,71 @@\n package org.schabi.newpipe.extractor.services.youtube.extractors;\n \n-import org.jsoup.Jsoup;\n-import org.jsoup.nodes.Document;\n-import org.jsoup.nodes.Element;\n+import com.grack.nanojson.JsonArray;\n+import com.grack.nanojson.JsonObject;\n+import com.grack.nanojson.JsonParser;\n+import com.grack.nanojson.JsonParserException;\n+\n import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n import org.schabi.newpipe.extractor.services.youtube.YoutubeService;\n import org.schabi.newpipe.extractor.subscription.SubscriptionExtractor;\n import org.schabi.newpipe.extractor.subscription.SubscriptionItem;\n-import org.schabi.newpipe.extractor.utils.Parser;\n \n-import java.io.IOException;\n import java.io.InputStream;\n import java.util.ArrayList;\n import java.util.Collections;\n import java.util.List;\n \n+import javax.annotation.Nonnull;\n+\n import static org.schabi.newpipe.extractor.subscription.SubscriptionExtractor.ContentSource.INPUT_STREAM;\n \n /**\n- * Extract subscriptions from a YouTube export (OPML format supported)\n+ * Extract subscriptions from a Google takout export (the user has to get the JSON out of the zip)\n  */\n public class YoutubeSubscriptionExtractor extends SubscriptionExtractor {\n+    private static final String BASE_CHANNEL_URL = \"https://www.youtube.com/channel/\";\n \n-    public YoutubeSubscriptionExtractor(YoutubeService service) {\n-        super(service, Collections.singletonList(INPUT_STREAM));\n+    public YoutubeSubscriptionExtractor(final YoutubeService youtubeService) {\n+        super(youtubeService, Collections.singletonList(INPUT_STREAM));\n     }\n \n     @Override\n     public String getRelatedUrl() {\n-        return \"https://www.youtube.com/subscription_manager?action_takeout=1\";\n+        return \"https://takeout.google.com/takeout/custom/youtube?continue=https%3A%2F%2Fmyaccount.google.com%2Fyourdata%2Fyoutube%3Fhl%3Den_GB%26authuser%3D0\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bfdb1d1661724d59d93bebd877e994469857bf16"}, "originalPosition": 43}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bfdb1d1661724d59d93bebd877e994469857bf16", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/bfdb1d1661724d59d93bebd877e994469857bf16", "committedDate": "2020-11-01T18:11:08Z", "message": "Implement youtube subscription import from Google takeout"}, "afterCommit": {"oid": "1355f458f8de5cffffd06f100b651784ab7d95ce", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/1355f458f8de5cffffd06f100b651784ab7d95ce", "committedDate": "2020-11-02T10:02:00Z", "message": "Implement youtube subscription import from Google takeout"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "501ec30152642ad49ce0a1825410d200942d174c", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/501ec30152642ad49ce0a1825410d200942d174c", "committedDate": "2020-11-02T10:04:48Z", "message": "Implement youtube subscription import from Google takeout"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1355f458f8de5cffffd06f100b651784ab7d95ce", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/1355f458f8de5cffffd06f100b651784ab7d95ce", "committedDate": "2020-11-02T10:02:00Z", "message": "Implement youtube subscription import from Google takeout"}, "afterCommit": {"oid": "501ec30152642ad49ce0a1825410d200942d174c", "author": {"user": {"login": "Stypox", "name": "Stypox"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/501ec30152642ad49ce0a1825410d200942d174c", "committedDate": "2020-11-02T10:04:48Z", "message": "Implement youtube subscription import from Google takeout"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxNTIzOTg5", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/452#pullrequestreview-521523989", "createdAt": "2020-11-02T10:54:08Z", "commit": {"oid": "501ec30152642ad49ce0a1825410d200942d174c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3958, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}