{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxOTkzMzgy", "number": 267, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQwODozMTo1N1rODkEY0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQxMTowNDozOVrODkE34Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5MTQ3MjE2OnYy", "diffSide": "RIGHT", "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/youtube/extractors/YoutubeStreamInfoItemExtractor.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQwODozMTo1N1rOFwM8Tg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQxMDo0OToxMFrOFwNgcA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA4ODAxNA==", "bodyText": "Are you sure this works? I had issues with using has() for JsonObjects, so I've been doing getObject() != null. Otherwise this PR looks fine to me.", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/267#discussion_r386088014", "createdAt": "2020-03-01T08:31:57Z", "author": {"login": "wb9688"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/youtube/extractors/YoutubeStreamInfoItemExtractor.java", "diffHunk": "@@ -225,7 +255,26 @@ private boolean isPremium() {\n                     return true;\n                 }\n             }\n-        } catch (Exception ignored) {}\n+        } catch (Exception ignored) {\n+        }\n         return false;\n     }\n+\n+    private boolean isPremiere() {\n+        return videoInfo.has(\"upcomingEventData\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7d3bb8a6f01ef08ce6d1c2dfd12d90b658ea7838"}, "originalPosition": 106}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA5Njg3MQ==", "bodyText": "What issues did you have with has(String key)? I've looked at the source code of that method and it returns hashmap.contains(key); So there should not be issues with that.\nBtw. we use an outdated version of nanojson. We might want to update it as the new version promises to be faster.", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/267#discussion_r386096871", "createdAt": "2020-03-01T10:43:07Z", "author": {"login": "TobiGr"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/youtube/extractors/YoutubeStreamInfoItemExtractor.java", "diffHunk": "@@ -225,7 +255,26 @@ private boolean isPremium() {\n                     return true;\n                 }\n             }\n-        } catch (Exception ignored) {}\n+        } catch (Exception ignored) {\n+        }\n         return false;\n     }\n+\n+    private boolean isPremiere() {\n+        return videoInfo.has(\"upcomingEventData\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA4ODAxNA=="}, "originalCommit": {"oid": "7d3bb8a6f01ef08ce6d1c2dfd12d90b658ea7838"}, "originalPosition": 106}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA5NzI2NA==", "bodyText": "It returning false when the object exists, but from a quick local test, that doesn't seem to happen, strange\u2026\nJsonObject o = JsonParser.object().from(\"{\\\"apple\\\": {}}\");\nSystem.out.println(o.has(\"apple\")); // prints true\nSystem.out.println(o.has(\"pear\")); // prints false", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/267#discussion_r386097264", "createdAt": "2020-03-01T10:49:10Z", "author": {"login": "wb9688"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/youtube/extractors/YoutubeStreamInfoItemExtractor.java", "diffHunk": "@@ -225,7 +255,26 @@ private boolean isPremium() {\n                     return true;\n                 }\n             }\n-        } catch (Exception ignored) {}\n+        } catch (Exception ignored) {\n+        }\n         return false;\n     }\n+\n+    private boolean isPremiere() {\n+        return videoInfo.has(\"upcomingEventData\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA4ODAxNA=="}, "originalCommit": {"oid": "7d3bb8a6f01ef08ce6d1c2dfd12d90b658ea7838"}, "originalPosition": 106}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM5MTU1MTY5OnYy", "diffSide": "RIGHT", "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/youtube/extractors/YoutubeStreamInfoItemExtractor.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQxMTowNDo0MFrOFwNkjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMVQxMToyNzowNVrOFwNqMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA5ODMxOA==", "bodyText": "Are there no other ways than relying on English?", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/267#discussion_r386098318", "createdAt": "2020-03-01T11:04:40Z", "author": {"login": "B0pol"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/youtube/extractors/YoutubeStreamInfoItemExtractor.java", "diffHunk": "@@ -194,11 +213,22 @@ public long getViewCount() throws ParsingException {\n             if (videoInfo.getObject(\"topStandaloneBadge\") != null || isPremium()) {\n                 return -1;\n             }\n-            String viewCount = getTextFromObject(videoInfo.getObject(\"viewCountText\"));\n+\n+            final JsonObject viewCountObject = videoInfo.getObject(\"viewCountText\");\n+            if (viewCountObject == null) {\n+                // This object is null when a video has its views hidden.\n+                return -1;\n+            }\n+\n+            final String viewCount = getTextFromObject(viewCountObject);\n+\n+            if (viewCount.toLowerCase().contains(\"no views\")) {\n+                return 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7d3bb8a6f01ef08ce6d1c2dfd12d90b658ea7838"}, "originalPosition": 84}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA5OTc2MA==", "bodyText": "At the moment there is no other way. We might need to check whether the value contains specific words like \"no\" or \"you\", which should be quite similar in most languages. In that way, we do not need to make a list for all translations later, but can reduce that to a minimum of items to check. But that ca wait for a later PR.", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/267#discussion_r386099760", "createdAt": "2020-03-01T11:27:05Z", "author": {"login": "TobiGr"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/youtube/extractors/YoutubeStreamInfoItemExtractor.java", "diffHunk": "@@ -194,11 +213,22 @@ public long getViewCount() throws ParsingException {\n             if (videoInfo.getObject(\"topStandaloneBadge\") != null || isPremium()) {\n                 return -1;\n             }\n-            String viewCount = getTextFromObject(videoInfo.getObject(\"viewCountText\"));\n+\n+            final JsonObject viewCountObject = videoInfo.getObject(\"viewCountText\");\n+            if (viewCountObject == null) {\n+                // This object is null when a video has its views hidden.\n+                return -1;\n+            }\n+\n+            final String viewCount = getTextFromObject(viewCountObject);\n+\n+            if (viewCount.toLowerCase().contains(\"no views\")) {\n+                return 0;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjA5ODMxOA=="}, "originalCommit": {"oid": "7d3bb8a6f01ef08ce6d1c2dfd12d90b658ea7838"}, "originalPosition": 84}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2853, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}