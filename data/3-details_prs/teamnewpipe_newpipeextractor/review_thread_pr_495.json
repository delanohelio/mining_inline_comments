{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ0ODM2Mjkz", "number": 495, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wMVQxMjowOTo1NlrOFKeBeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wMVQxMjoyMDo0MlrOFKeESQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ2NTIxOTc3OnYy", "diffSide": "RIGHT", "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/peertube/PeertubeParsingHelper.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wMVQxMjowOTo1NlrOINP4WQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wMVQxMjowOTo1NlrOINP4WQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDc2MjU4NQ==", "bodyText": "JDoc please", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/495#discussion_r550762585", "createdAt": "2021-01-01T12:09:56Z", "author": {"login": "TobiGr"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/peertube/PeertubeParsingHelper.java", "diffHunk": "@@ -63,6 +64,11 @@ public static Page getNextPage(final String prevPageUrl, final long total) {\n     }\n \n     public static void collectStreamsFrom(final InfoItemsCollector collector, final JsonObject json, final String baseUrl) throws ParsingException {\n+        collectStreamsFrom(collector, json, baseUrl, false);\n+    }\n+\n+    // sepia: if we should use PeertubeSepiaStreamInfoItemExtractor\n+    public static void collectStreamsFrom(final InfoItemsCollector collector, final JsonObject json, final String baseUrl, boolean sepia) throws ParsingException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ae924a7f18d5ee5b4aa0bd13d7179922cc094fa"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ2NTIyMTYwOnYy", "diffSide": "RIGHT", "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/peertube/extractors/PeertubeStreamInfoItemExtractor.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wMVQxMjoxMzoxN1rOINP5Jw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wMVQxMjoxMzoxN1rOINP5Jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDc2Mjc5MQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public void setBaseUrl(final String baseUrl) {\n          \n          \n            \n                protected void setBaseUrl(final String baseUrl) {", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/495#discussion_r550762791", "createdAt": "2021-01-01T12:13:17Z", "author": {"login": "TobiGr"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/peertube/extractors/PeertubeStreamInfoItemExtractor.java", "diffHunk": "@@ -84,4 +84,8 @@ public StreamType getStreamType() {\n     public long getDuration() {\n         return item.getLong(\"duration\");\n     }\n+\n+    public void setBaseUrl(final String baseUrl) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ae924a7f18d5ee5b4aa0bd13d7179922cc094fa"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ2NTIyNjc1OnYy", "diffSide": "RIGHT", "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/peertube/PeertubeService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wMVQxMjoyMDoxMVrOINP7Vg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wMVQxMzo0Njo0MVrOINQVeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDc2MzM1MA==", "bodyText": "Why only startsWith(\"sepia_\") and not equals(SEPIA_VIDEOS)?", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/495#discussion_r550763350", "createdAt": "2021-01-01T12:20:11Z", "author": {"login": "TobiGr"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/peertube/PeertubeService.java", "diffHunk": "@@ -59,7 +61,12 @@ public ListLinkHandlerFactory getCommentsLHFactory() {\n \n     @Override\n     public SearchExtractor getSearchExtractor(SearchQueryHandler queryHandler) {\n-        return new PeertubeSearchExtractor(this, queryHandler);\n+        final List<String> contentFilters = queryHandler.getContentFilters();\n+        boolean external = false;\n+        if (contentFilters.size() > 0 && contentFilters.get(0).startsWith(\"sepia_\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ae924a7f18d5ee5b4aa0bd13d7179922cc094fa"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDc3MDA0MA==", "bodyText": "I used the same convention as YoutubeMusicSearchExtractor, i.e. filters start with music_ when using MusicSearchExtractor", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/495#discussion_r550770040", "createdAt": "2021-01-01T13:46:41Z", "author": {"login": "B0pol"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/peertube/PeertubeService.java", "diffHunk": "@@ -59,7 +61,12 @@ public ListLinkHandlerFactory getCommentsLHFactory() {\n \n     @Override\n     public SearchExtractor getSearchExtractor(SearchQueryHandler queryHandler) {\n-        return new PeertubeSearchExtractor(this, queryHandler);\n+        final List<String> contentFilters = queryHandler.getContentFilters();\n+        boolean external = false;\n+        if (contentFilters.size() > 0 && contentFilters.get(0).startsWith(\"sepia_\")) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDc2MzM1MA=="}, "originalCommit": {"oid": "3ae924a7f18d5ee5b4aa0bd13d7179922cc094fa"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ2NTIyNjk3OnYy", "diffSide": "RIGHT", "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/peertube/linkHandler/PeertubeSearchQueryHandlerFactory.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wMVQxMjoyMDo0MlrOINP7cA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wMVQxMzo0NTozNlrOINQU_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDc2MzM3Ng==", "bodyText": "same question as above", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/495#discussion_r550763376", "createdAt": "2021-01-01T12:20:42Z", "author": {"login": "TobiGr"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/peertube/linkHandler/PeertubeSearchQueryHandlerFactory.java", "diffHunk": "@@ -20,7 +22,12 @@ public static PeertubeSearchQueryHandlerFactory getInstance() {\n \n     @Override\n     public String getUrl(String searchString, List<String> contentFilters, String sortFilter) throws ParsingException {\n-        String baseUrl = ServiceList.PeerTube.getBaseUrl();\n+        String baseUrl;\n+        if (contentFilters.size() > 0 && contentFilters.get(0).startsWith(\"sepia_\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ae924a7f18d5ee5b4aa0bd13d7179922cc094fa"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDc2OTkxOQ==", "bodyText": "because if we implement other search filters (e.g. channels), it will not change, the baseUrl with sepia filters will still be sepiasearch.org (by default, unless another baseUrl for another index is provided)", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/495#discussion_r550769919", "createdAt": "2021-01-01T13:45:36Z", "author": {"login": "B0pol"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/peertube/linkHandler/PeertubeSearchQueryHandlerFactory.java", "diffHunk": "@@ -20,7 +22,12 @@ public static PeertubeSearchQueryHandlerFactory getInstance() {\n \n     @Override\n     public String getUrl(String searchString, List<String> contentFilters, String sortFilter) throws ParsingException {\n-        String baseUrl = ServiceList.PeerTube.getBaseUrl();\n+        String baseUrl;\n+        if (contentFilters.size() > 0 && contentFilters.get(0).startsWith(\"sepia_\")) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDc2MzM3Ng=="}, "originalCommit": {"oid": "3ae924a7f18d5ee5b4aa0bd13d7179922cc094fa"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2799, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}