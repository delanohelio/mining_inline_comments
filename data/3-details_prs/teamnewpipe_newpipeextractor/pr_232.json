{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU4OTIwNDQz", "number": 232, "title": "Bandcamp support", "bodyText": "I carefully read the contribution guidelines and agree to them.\n I did test the API against NewPipe.\n Icons need to be added to NewPipe for Featured and Radio and for Bandcamp itself. TeamNewPipe/NewPipe#3741\n\n\nFixes #138\nFixes TeamNewPipe/NewPipe#1284\nI had to add the org.json library because the website contains some JSON that has unquoted keys.\n\n Search\n Multiple search pages\n Search suggestions\n Streams\nDescriptions are suboptimal because their newlines get eaten and then lyrics are really difficult to read Not anymore for some reason.\n Channels\nActually implemented, but depends on #227\n Playlists work\nPlaylists with a lot of streams take ages to load, because for every playlist info item, a separate request needs to be made to find out the URL of its cover. I'll see whether I can add a workaround just for playlists with more than a number (e.g. 10) of streams Workaround ba967f1 only loads cover art of each track individually for playlists <= 10 streams\nKiosks\n\n Featured kiosk\nCurrently only loads nine items currently can't load further \"pages\"; can contain preorder albums whose cover is not always displayed correctly and which shows errors but works once opened\n Bandcamp weekly (Radio) kiosk\nClicking uploader's (primary host's) name causes the crash reporter to open as it is a link to a fan page\n\n\n Fan pages\nAre extra work because they look different and don't really provide a lot of value I think\n Comments\n(fanthanks / writings)\n Unit tests\nBut I'm not sure of their quality", "createdAt": "2020-01-03T09:15:46Z", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232", "merged": true, "mergeCommit": {"oid": "021da75f245fd36be86ef270bfc68de338aed480"}, "closed": true, "closedAt": "2021-03-05T20:37:57Z", "author": {"login": "fynngodau"}, "timelineItems": {"totalCount": 125, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdovVL0gH2gAyMzU4OTIwNDQzOmM5ZTk5NTNiYjA4NWExMjMxODE3YjlkMjk2NzU1ODdkMTBkOTI0NzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABeAP_R8gFqTYwNTU2MTE1NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c9e9953bb085a1231817b9d29675587d10d92470", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/c9e9953bb085a1231817b9d29675587d10d92470", "committedDate": "2020-12-22T19:02:53Z", "message": "[Bandcamp] Fix channel link handler factory"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY5MzIzNTcz", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#pullrequestreview-569323573", "createdAt": "2021-01-15T14:48:23Z", "commit": {"oid": "c9e9953bb085a1231817b9d29675587d10d92470"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78c2113094527dfcf806bbcc76b8d16ae30b0eba", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/78c2113094527dfcf806bbcc76b8d16ae30b0eba", "committedDate": "2021-01-15T20:49:58Z", "message": "Merge remote-tracking branch 'origin/dev' into bandcamp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07570554b6a6ecdfc395901a9c827a583a00d1d5", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/07570554b6a6ecdfc395901a9c827a583a00d1d5", "committedDate": "2021-01-15T20:55:40Z", "message": "Fix build and optimize imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e062c8cb0d5136c10b156ec91bf428599b3024bf", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/e062c8cb0d5136c10b156ec91bf428599b3024bf", "committedDate": "2021-02-15T21:09:41Z", "message": "Merge branch 'dev' into bandcamp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bf9fddba930fb0555b5ec77221bf6faa00d79e6", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/5bf9fddba930fb0555b5ec77221bf6faa00d79e6", "committedDate": "2021-02-15T21:45:17Z", "message": "Code improvements"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "49c7284798c007ddfd8a002409a726839c637269", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/49c7284798c007ddfd8a002409a726839c637269", "committedDate": "2021-02-15T21:30:34Z", "message": "Code improvements"}, "afterCommit": {"oid": "5bf9fddba930fb0555b5ec77221bf6faa00d79e6", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/5bf9fddba930fb0555b5ec77221bf6faa00d79e6", "committedDate": "2021-02-15T21:45:17Z", "message": "Code improvements"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTkwOTYyOTcx", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#pullrequestreview-590962971", "createdAt": "2021-02-16T08:03:08Z", "commit": {"oid": "5bf9fddba930fb0555b5ec77221bf6faa00d79e6"}, "state": "COMMENTED", "comments": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0xNlQwODowMzowOVrOIl55ZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0xNlQwODoyNjozNFrOIl6usw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NjYxNjgwNQ==", "bodyText": "@TobiGr @Stypox Do we really want this license line in every file?", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r576616805", "createdAt": "2021-02-16T08:03:09Z", "author": {"login": "XiangRongLin"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/BandcampService.java", "diffHunk": "@@ -0,0 +1,126 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bf9fddba930fb0555b5ec77221bf6faa00d79e6"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NjYxOTk2NA==", "bodyText": "This is not specific to bandcamp is it? Meaning other services could theoretically use it and it should go to ExtractorHelper", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r576619964", "createdAt": "2021-02-16T08:08:54Z", "author": {"login": "XiangRongLin"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampExtractorHelper.java", "diffHunk": "@@ -0,0 +1,161 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import com.grack.nanojson.JsonObject;\n+import com.grack.nanojson.JsonParser;\n+import com.grack.nanojson.JsonParserException;\n+import com.grack.nanojson.JsonWriter;\n+import org.jsoup.Jsoup;\n+import org.jsoup.nodes.Document;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.exceptions.ReCaptchaException;\n+import org.schabi.newpipe.extractor.localization.DateWrapper;\n+import org.schabi.newpipe.extractor.utils.Utils;\n+\n+import java.io.IOException;\n+import java.time.DateTimeException;\n+import java.time.ZonedDateTime;\n+import java.time.format.DateTimeFormatter;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Locale;\n+\n+public class BandcampExtractorHelper {\n+\n+    /**\n+     * <p>Get an attribute of a web page as JSON\n+     *\n+     * <p>Originally a part of bandcampDirect.</p>\n+     *\n+     * @param html     The HTML where the JSON we're looking for is stored inside a\n+     *                 variable inside some JavaScript block\n+     * @param variable Name of the variable\n+     * @return The JsonObject stored in the variable with this name\n+     */\n+    public static JsonObject getJsonData(final String html, final String variable)\n+            throws JsonParserException, ArrayIndexOutOfBoundsException {\n+        final Document document = Jsoup.parse(html);\n+        final String json = document.getElementsByAttribute(variable).attr(variable);\n+        return JsonParser.object().from(json);\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bf9fddba930fb0555b5ec77221bf6faa00d79e6"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NjYyMTA2MQ==", "bodyText": "Same here, it should go to Utils. Maybe you can even adjust the join method there", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r576621061", "createdAt": "2021-02-16T08:10:55Z", "author": {"login": "XiangRongLin"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampExtractorHelper.java", "diffHunk": "@@ -0,0 +1,161 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import com.grack.nanojson.JsonObject;\n+import com.grack.nanojson.JsonParser;\n+import com.grack.nanojson.JsonParserException;\n+import com.grack.nanojson.JsonWriter;\n+import org.jsoup.Jsoup;\n+import org.jsoup.nodes.Document;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.exceptions.ReCaptchaException;\n+import org.schabi.newpipe.extractor.localization.DateWrapper;\n+import org.schabi.newpipe.extractor.utils.Utils;\n+\n+import java.io.IOException;\n+import java.time.DateTimeException;\n+import java.time.ZonedDateTime;\n+import java.time.format.DateTimeFormatter;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Locale;\n+\n+public class BandcampExtractorHelper {\n+\n+    /**\n+     * <p>Get an attribute of a web page as JSON\n+     *\n+     * <p>Originally a part of bandcampDirect.</p>\n+     *\n+     * @param html     The HTML where the JSON we're looking for is stored inside a\n+     *                 variable inside some JavaScript block\n+     * @param variable Name of the variable\n+     * @return The JsonObject stored in the variable with this name\n+     */\n+    public static JsonObject getJsonData(final String html, final String variable)\n+            throws JsonParserException, ArrayIndexOutOfBoundsException {\n+        final Document document = Jsoup.parse(html);\n+        final String json = document.getElementsByAttribute(variable).attr(variable);\n+        return JsonParser.object().from(json);\n+    }\n+\n+    /**\n+     * Translate all these parameters together to the URL of the corresponding album or track\n+     * using the mobile api\n+     */\n+    public static String getStreamUrlFromIds(final long bandId, final long itemId, final String itemType)\n+            throws ParsingException {\n+\n+        try {\n+            final String jsonString = NewPipe.getDownloader().get(\n+                    \"https://bandcamp.com/api/mobile/22/tralbum_details?band_id=\" + bandId\n+                            + \"&tralbum_id=\" + itemId + \"&tralbum_type=\" + itemType.substring(0, 1))\n+                    .responseBody();\n+\n+            return JsonParser.object().from(jsonString).getString(\"bandcamp_url\").replace(\"http://\", \"https://\");\n+\n+        } catch (final JsonParserException | ReCaptchaException | IOException e) {\n+            throw new ParsingException(\"Ids could not be translated to URL\", e);\n+        }\n+\n+    }\n+\n+    /**\n+     * Concatenate all non-null and non-empty strings together while separating them using\n+     * the comma parameter\n+     */\n+    public static String smartConcatenate(final String[] strings, final String comma) {\n+        final StringBuilder result = new StringBuilder();\n+\n+        // Remove empty strings\n+        final ArrayList<String> list = new ArrayList<>(Arrays.asList(strings));\n+        for (int i = list.size() - 1; i >= 0; i--) {\n+            if (Utils.isNullOrEmpty(list.get(i)) || list.get(i).equals(\"null\")) {\n+                list.remove(i);\n+            }\n+        }\n+\n+        // Append remaining strings to result\n+        for (int i = 0; i < list.size(); i++) {\n+            result.append(list.get(i));\n+\n+            if (i != list.size() - 1) {\n+                // This is not the last iteration yet\n+                result.append(comma);\n+            }\n+\n+        }\n+\n+        return String.valueOf(result);\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bf9fddba930fb0555b5ec77221bf6faa00d79e6"}, "originalPosition": 92}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NjYyMzA2OQ==", "bodyText": "why is this empty", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r576623069", "createdAt": "2021-02-16T08:14:45Z", "author": {"login": "XiangRongLin"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampFeaturedExtractor.java", "diffHunk": "@@ -0,0 +1,84 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import com.grack.nanojson.JsonArray;\n+import com.grack.nanojson.JsonObject;\n+import com.grack.nanojson.JsonParser;\n+import com.grack.nanojson.JsonParserException;\n+import org.schabi.newpipe.extractor.Page;\n+import org.schabi.newpipe.extractor.StreamingService;\n+import org.schabi.newpipe.extractor.downloader.Downloader;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.kiosk.KioskExtractor;\n+import org.schabi.newpipe.extractor.linkhandler.ListLinkHandler;\n+import org.schabi.newpipe.extractor.playlist.PlaylistInfoItem;\n+import org.schabi.newpipe.extractor.playlist.PlaylistInfoItemsCollector;\n+\n+import javax.annotation.Nonnull;\n+import java.io.IOException;\n+\n+public class BandcampFeaturedExtractor extends KioskExtractor<PlaylistInfoItem> {\n+\n+    public static final String KIOSK_FEATURED = \"Featured\";\n+    public static final String FEATURED_API_URL = \"https://bandcamp.com/api/mobile/24/bootstrap_data\";\n+\n+    public BandcampFeaturedExtractor(final StreamingService streamingService, final ListLinkHandler listLinkHandler,\n+                                     final String kioskId) {\n+        super(streamingService, listLinkHandler, kioskId);\n+    }\n+\n+    @Override\n+    public void onFetchPage(@Nonnull Downloader downloader) throws IOException, ExtractionException {\n+\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bf9fddba930fb0555b5ec77221bf6faa00d79e6"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NjYyMzI5Nw==", "bodyText": "no printing stacktrace", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r576623297", "createdAt": "2021-02-16T08:15:11Z", "author": {"login": "XiangRongLin"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampFeaturedExtractor.java", "diffHunk": "@@ -0,0 +1,84 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import com.grack.nanojson.JsonArray;\n+import com.grack.nanojson.JsonObject;\n+import com.grack.nanojson.JsonParser;\n+import com.grack.nanojson.JsonParserException;\n+import org.schabi.newpipe.extractor.Page;\n+import org.schabi.newpipe.extractor.StreamingService;\n+import org.schabi.newpipe.extractor.downloader.Downloader;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.kiosk.KioskExtractor;\n+import org.schabi.newpipe.extractor.linkhandler.ListLinkHandler;\n+import org.schabi.newpipe.extractor.playlist.PlaylistInfoItem;\n+import org.schabi.newpipe.extractor.playlist.PlaylistInfoItemsCollector;\n+\n+import javax.annotation.Nonnull;\n+import java.io.IOException;\n+\n+public class BandcampFeaturedExtractor extends KioskExtractor<PlaylistInfoItem> {\n+\n+    public static final String KIOSK_FEATURED = \"Featured\";\n+    public static final String FEATURED_API_URL = \"https://bandcamp.com/api/mobile/24/bootstrap_data\";\n+\n+    public BandcampFeaturedExtractor(final StreamingService streamingService, final ListLinkHandler listLinkHandler,\n+                                     final String kioskId) {\n+        super(streamingService, listLinkHandler, kioskId);\n+    }\n+\n+    @Override\n+    public void onFetchPage(@Nonnull Downloader downloader) throws IOException, ExtractionException {\n+\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getName() throws ParsingException {\n+        return KIOSK_FEATURED;\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public InfoItemsPage<PlaylistInfoItem> getInitialPage() throws IOException, ExtractionException {\n+\n+        final PlaylistInfoItemsCollector c = new PlaylistInfoItemsCollector(getServiceId());\n+\n+        try {\n+\n+\n+            final JsonObject json = JsonParser.object().from(\n+                    getDownloader().post(\n+                            FEATURED_API_URL, null, \"{\\\"platform\\\":\\\"\\\",\\\"version\\\":0}\".getBytes()\n+                    ).responseBody()\n+            );\n+\n+            final JsonArray featuredStories = json.getObject(\"feed_content\")\n+                    .getObject(\"stories\")\n+                    .getArray(\"featured\");\n+\n+            for (int i = 0; i < featuredStories.size(); i++) {\n+                final JsonObject featuredStory = featuredStories.getObject(i);\n+\n+                if (featuredStory.isNull(\"album_title\")) {\n+                    // Is not an album, ignore\n+                    continue;\n+                }\n+\n+                c.commit(new BandcampPlaylistInfoItemFeaturedExtractor(featuredStory));\n+            }\n+\n+            return new InfoItemsPage<>(c, null);\n+        } catch (final JsonParserException e) {\n+            e.printStackTrace();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bf9fddba930fb0555b5ec77221bf6faa00d79e6"}, "originalPosition": 75}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NjYyNDA3Mg==", "bodyText": "same here, why empty", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r576624072", "createdAt": "2021-02-16T08:16:28Z", "author": {"login": "XiangRongLin"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampRadioExtractor.java", "diffHunk": "@@ -0,0 +1,78 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import com.grack.nanojson.JsonArray;\n+import com.grack.nanojson.JsonObject;\n+import com.grack.nanojson.JsonParser;\n+import com.grack.nanojson.JsonParserException;\n+import org.schabi.newpipe.extractor.InfoItem;\n+import org.schabi.newpipe.extractor.InfoItemsCollector;\n+import org.schabi.newpipe.extractor.Page;\n+import org.schabi.newpipe.extractor.StreamingService;\n+import org.schabi.newpipe.extractor.downloader.Downloader;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.kiosk.KioskExtractor;\n+import org.schabi.newpipe.extractor.linkhandler.ListLinkHandler;\n+import org.schabi.newpipe.extractor.stream.StreamInfoItemsCollector;\n+\n+import javax.annotation.Nonnull;\n+import java.io.IOException;\n+\n+public class BandcampRadioExtractor extends KioskExtractor<InfoItem> {\n+\n+    public static final String KIOSK_RADIO = \"Radio\";\n+    public static final String RADIO_API_URL = \"https://bandcamp.com/api/bcweekly/1/list\";\n+\n+    public BandcampRadioExtractor(final StreamingService streamingService, final ListLinkHandler linkHandler,\n+                                  final String kioskId) {\n+        super(streamingService, linkHandler, kioskId);\n+    }\n+\n+    @Override\n+    public void onFetchPage(@Nonnull final Downloader downloader) throws IOException, ExtractionException {\n+\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bf9fddba930fb0555b5ec77221bf6faa00d79e6"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NjYyNDE1Mw==", "bodyText": "same here", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r576624153", "createdAt": "2021-02-16T08:16:38Z", "author": {"login": "XiangRongLin"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampRadioExtractor.java", "diffHunk": "@@ -0,0 +1,78 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import com.grack.nanojson.JsonArray;\n+import com.grack.nanojson.JsonObject;\n+import com.grack.nanojson.JsonParser;\n+import com.grack.nanojson.JsonParserException;\n+import org.schabi.newpipe.extractor.InfoItem;\n+import org.schabi.newpipe.extractor.InfoItemsCollector;\n+import org.schabi.newpipe.extractor.Page;\n+import org.schabi.newpipe.extractor.StreamingService;\n+import org.schabi.newpipe.extractor.downloader.Downloader;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.kiosk.KioskExtractor;\n+import org.schabi.newpipe.extractor.linkhandler.ListLinkHandler;\n+import org.schabi.newpipe.extractor.stream.StreamInfoItemsCollector;\n+\n+import javax.annotation.Nonnull;\n+import java.io.IOException;\n+\n+public class BandcampRadioExtractor extends KioskExtractor<InfoItem> {\n+\n+    public static final String KIOSK_RADIO = \"Radio\";\n+    public static final String RADIO_API_URL = \"https://bandcamp.com/api/bcweekly/1/list\";\n+\n+    public BandcampRadioExtractor(final StreamingService streamingService, final ListLinkHandler linkHandler,\n+                                  final String kioskId) {\n+        super(streamingService, linkHandler, kioskId);\n+    }\n+\n+    @Override\n+    public void onFetchPage(@Nonnull final Downloader downloader) throws IOException, ExtractionException {\n+\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getName() throws ParsingException {\n+        return KIOSK_RADIO;\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public InfoItemsPage<InfoItem> getInitialPage() throws IOException, ExtractionException {\n+        final InfoItemsCollector c = new StreamInfoItemsCollector(getServiceId());\n+\n+        try {\n+\n+            final JsonObject json = JsonParser.object().from(\n+                    getDownloader().get(\n+                            RADIO_API_URL\n+                    ).responseBody()\n+            );\n+\n+            final JsonArray radioShows = json.getArray(\"results\");\n+\n+            for (int i = 0; i < radioShows.size(); i++) {\n+                final JsonObject radioShow = radioShows.getObject(i);\n+\n+                c.commit(\n+                        new BandcampRadioInfoItemExtractor(radioShow)\n+                );\n+            }\n+\n+        } catch (final JsonParserException e) {\n+            e.printStackTrace();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bf9fddba930fb0555b5ec77221bf6faa00d79e6"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NjYyNTgzMQ==", "bodyText": "final List<String> tags = new ArrayList<>();\nWork with interface not implementation", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r576625831", "createdAt": "2021-02-16T08:19:23Z", "author": {"login": "XiangRongLin"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampStreamExtractor.java", "diffHunk": "@@ -0,0 +1,335 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import com.grack.nanojson.JsonObject;\n+import com.grack.nanojson.JsonParserException;\n+import org.jsoup.Jsoup;\n+import org.jsoup.nodes.Document;\n+import org.jsoup.nodes.Element;\n+import org.jsoup.select.Elements;\n+import org.schabi.newpipe.extractor.MediaFormat;\n+import org.schabi.newpipe.extractor.MetaInfo;\n+import org.schabi.newpipe.extractor.StreamingService;\n+import org.schabi.newpipe.extractor.downloader.Downloader;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.linkhandler.LinkHandler;\n+import org.schabi.newpipe.extractor.localization.DateWrapper;\n+import org.schabi.newpipe.extractor.stream.*;\n+\n+import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.Locale;\n+\n+import static org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampExtractorHelper.getImageUrl;\n+\n+public class BandcampStreamExtractor extends StreamExtractor {\n+\n+    private JsonObject albumJson;\n+    private JsonObject current;\n+    private Document document;\n+\n+    public BandcampStreamExtractor(final StreamingService service, final LinkHandler linkHandler) {\n+        super(service, linkHandler);\n+    }\n+\n+\n+    @Override\n+    public void onFetchPage(@Nonnull final Downloader downloader) throws IOException, ExtractionException {\n+        final String html = downloader.get(getLinkHandler().getUrl()).responseBody();\n+        document = Jsoup.parse(html);\n+        albumJson = getAlbumInfoJson(html);\n+        current = albumJson.getObject(\"current\");\n+\n+        if (albumJson.getArray(\"trackinfo\").size() > 1) {\n+            // In this case, we are actually viewing an album page!\n+            throw new ExtractionException(\"Page is actually an album, not a track\");\n+        }\n+    }\n+\n+    /**\n+     * Get the JSON that contains album's metadata from page\n+     *\n+     * @param html Website\n+     * @return Album metadata JSON\n+     * @throws ParsingException In case of a faulty website\n+     */\n+    public static JsonObject getAlbumInfoJson(final String html) throws ParsingException {\n+        try {\n+            return BandcampExtractorHelper.getJsonData(html, \"data-tralbum\");\n+        } catch (final JsonParserException e) {\n+            throw new ParsingException(\"Faulty JSON; page likely does not contain album data\", e);\n+        } catch (final ArrayIndexOutOfBoundsException e) {\n+            throw new ParsingException(\"JSON does not exist\", e);\n+        }\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getName() throws ParsingException {\n+        return current.getString(\"title\");\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUploaderUrl() throws ParsingException {\n+        final String[] parts = getUrl().split(\"/\");\n+        // https: (/) (/) * .bandcamp.com (/) and leave out the rest\n+        return \"https://\" + parts[2] + \"/\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUrl() throws ParsingException {\n+        return albumJson.getString(\"url\").replace(\"http://\", \"https://\");\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUploaderName() {\n+        return albumJson.getString(\"artist\");\n+    }\n+\n+    @Nullable\n+    @Override\n+    public String getTextualUploadDate() {\n+        return current.getString(\"publish_date\");\n+    }\n+\n+    @Nullable\n+    @Override\n+    public DateWrapper getUploadDate() throws ParsingException {\n+        return BandcampExtractorHelper.parseDate(getTextualUploadDate());\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getThumbnailUrl() throws ParsingException {\n+        if (albumJson.isNull(\"art_id\")) return \"\";\n+        else return getImageUrl(albumJson.getLong(\"art_id\"), true);\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUploaderAvatarUrl() {\n+        try {\n+            return document.getElementsByClass(\"band-photo\").first().attr(\"src\");\n+        } catch (final NullPointerException e) {\n+            return \"\";\n+        }\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getSubChannelUrl() {\n+        return \"\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getSubChannelName() {\n+        return \"\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getSubChannelAvatarUrl() {\n+        return \"\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public Description getDescription() {\n+        final String s = BandcampExtractorHelper.smartConcatenate(\n+                new String[]{\n+                        current.getString(\"about\"),\n+                        current.getString(\"lyrics\"),\n+                        current.getString(\"credits\")\n+                }, \"\\n\\n\"\n+        );\n+        return new Description(s, Description.PLAIN_TEXT);\n+    }\n+\n+    @Override\n+    public int getAgeLimit() {\n+        return NO_AGE_LIMIT;\n+    }\n+\n+    @Override\n+    public long getLength() {\n+        return 0;\n+    }\n+\n+    @Override\n+    public long getTimeStamp() {\n+        return 0;\n+    }\n+\n+    @Override\n+    public long getViewCount() {\n+        return -1;\n+    }\n+\n+    @Override\n+    public long getLikeCount() {\n+        return -1;\n+    }\n+\n+    @Override\n+    public long getDislikeCount() {\n+        return -1;\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getDashMpdUrl() {\n+        return \"\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getHlsUrl() {\n+        return null;\n+    }\n+\n+    @Override\n+    public List<AudioStream> getAudioStreams() {\n+        final List<AudioStream> audioStreams = new ArrayList<>();\n+\n+        audioStreams.add(new AudioStream(\n+                albumJson.getArray(\"trackinfo\").getObject(0)\n+                        .getObject(\"file\").getString(\"mp3-128\"),\n+                MediaFormat.MP3, 128\n+        ));\n+        return audioStreams;\n+    }\n+\n+    @Override\n+    public List<VideoStream> getVideoStreams() {\n+        return Collections.EMPTY_LIST;\n+    }\n+\n+    @Override\n+    public List<VideoStream> getVideoOnlyStreams() {\n+        return Collections.EMPTY_LIST;\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public List<SubtitlesStream> getSubtitlesDefault() {\n+        return new ArrayList<>();\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public List<SubtitlesStream> getSubtitles(MediaFormat format) {\n+        return new ArrayList<>();\n+    }\n+\n+    @Override\n+    public StreamType getStreamType() {\n+        return StreamType.AUDIO_STREAM;\n+    }\n+\n+    @Override\n+    public StreamInfoItemsCollector getRelatedStreams() {\n+        return null;\n+    }\n+\n+    @Override\n+    public String getErrorMessage() {\n+        return null;\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getHost() {\n+        return \"\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getPrivacy() {\n+        return \"\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getCategory() {\n+        // Get first tag from html, which is the artist's Genre\n+        return document\n+                .getElementsByClass(\"tralbum-tags\").first()\n+                .getElementsByClass(\"tag\").first().text();\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getLicence() {\n+\n+        int license = current.getInt(\"license_type\");\n+\n+        // Tests resulted in this mapping of ints to licence: https://cloud.disroot.org/s/ZTWBxbQ9fKRmRWJ/preview\n+\n+        switch (license) {\n+            case 1:\n+                return \"All rights reserved \u00a9\";\n+            case 2:\n+                return \"CC BY-NC-ND 3.0\";\n+            case 3:\n+                return \"CC BY-NC-SA 3.0\";\n+            case 4:\n+                return \"CC BY-NC 3.0\";\n+            case 5:\n+                return \"CC BY-ND 3.0\";\n+            case 6:\n+                return \"CC BY 3.0\";\n+            case 8:\n+                return \"CC BY-SA 3.0\";\n+            default:\n+                return \"Unknown\";\n+        }\n+    }\n+\n+    @Nullable\n+    @Override\n+    public Locale getLanguageInfo() {\n+        return null;\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public List<String> getTags() {\n+        final Elements tagElements = document.getElementsByAttributeValue(\"itemprop\", \"keywords\");\n+\n+        final ArrayList<String> tags = new ArrayList<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bf9fddba930fb0555b5ec77221bf6faa00d79e6"}, "originalPosition": 309}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NjYyNzY4Nw==", "bodyText": "I found 3 ways with which you return an empty list. chose number 1 or 3\n\nCollections.emptyList()\nnew ArrayList<>()\nCollections.EMPTY_LIST", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r576627687", "createdAt": "2021-02-16T08:22:26Z", "author": {"login": "XiangRongLin"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampRadioStreamExtractor.java", "diffHunk": "@@ -0,0 +1,142 @@\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import com.grack.nanojson.JsonObject;\n+import com.grack.nanojson.JsonParser;\n+import com.grack.nanojson.JsonParserException;\n+import org.jsoup.Jsoup;\n+import org.schabi.newpipe.extractor.MediaFormat;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.StreamingService;\n+import org.schabi.newpipe.extractor.downloader.Downloader;\n+import org.schabi.newpipe.extractor.exceptions.ContentNotSupportedException;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.exceptions.ReCaptchaException;\n+import org.schabi.newpipe.extractor.linkhandler.LinkHandler;\n+import org.schabi.newpipe.extractor.stream.AudioStream;\n+import org.schabi.newpipe.extractor.stream.Description;\n+\n+import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+import static org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampExtractorHelper.getImageUrl;\n+\n+public class BandcampRadioStreamExtractor extends BandcampStreamExtractor {\n+\n+    private JsonObject showInfo;\n+\n+    public BandcampRadioStreamExtractor(final StreamingService service, final LinkHandler linkHandler) {\n+        super(service, linkHandler);\n+    }\n+\n+    static JsonObject query(final int id) throws ParsingException {\n+        try {\n+            return JsonParser.object().from(\n+                    NewPipe.getDownloader().get(\"https://bandcamp.com/api/bcweekly/1/get?id=\" + id).responseBody()\n+            );\n+        } catch (final IOException | ReCaptchaException | JsonParserException e) {\n+            throw new ParsingException(\"could not get show data\", e);\n+        }\n+    }\n+\n+    @Override\n+    public void onFetchPage(@Nonnull final Downloader downloader) throws IOException, ExtractionException {\n+        showInfo = query(Integer.parseInt(getId()));\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getName() throws ParsingException {\n+        return showInfo.getString(\"subtitle\"); // \"audio_title\" is a boring title\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUploaderUrl() throws ContentNotSupportedException {\n+        throw new ContentNotSupportedException(\"Fan pages are not supported\");\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUrl() throws ParsingException {\n+        return getLinkHandler().getUrl();\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUploaderName() {\n+        return Jsoup.parse(showInfo.getString(\"image_caption\"))\n+                .getElementsByTag(\"a\").first().text();\n+    }\n+\n+    @Nullable\n+    @Override\n+    public String getTextualUploadDate() {\n+        return showInfo.getString(\"published_date\");\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getThumbnailUrl() throws ParsingException {\n+        return getImageUrl(showInfo.getLong(\"show_image_id\"), false);\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUploaderAvatarUrl() {\n+        return \"https://bandcamp.com/img/buttons/bandcamp-button-circle-whitecolor-512.png\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public Description getDescription() {\n+        return new Description(showInfo.getString(\"desc\"), Description.PLAIN_TEXT);\n+    }\n+\n+    @Override\n+    public long getLength() {\n+        return showInfo.getLong(\"audio_duration\");\n+    }\n+\n+    @Override\n+    public List<AudioStream> getAudioStreams() {\n+        final ArrayList<AudioStream> list = new ArrayList<>();\n+        final JsonObject streams = showInfo.getObject(\"audio_stream\");\n+\n+        if (streams.has(\"opus-lo\")) {\n+            list.add(new AudioStream(\n+                    streams.getString(\"opus-lo\"),\n+                    MediaFormat.OPUS, 100\n+            ));\n+        }\n+        if (streams.has(\"mp3-128\")) {\n+            list.add(new AudioStream(\n+                    streams.getString(\"mp3-128\"),\n+                    MediaFormat.MP3, 128\n+            ));\n+        }\n+\n+        return list;\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getLicence() {\n+        return \"\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getCategory() {\n+        return \"\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public List<String> getTags() {\n+        return new ArrayList<>();\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bf9fddba930fb0555b5ec77221bf6faa00d79e6"}, "originalPosition": 141}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NjYyOTE2NA==", "bodyText": "https://bandcamp.com This appears very often in the code. Can you create a single constant for it, so that one if they ever change their name, we only have to change one field and not every file", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r576629164", "createdAt": "2021-02-16T08:24:28Z", "author": {"login": "XiangRongLin"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampSuggestionExtractor.java", "diffHunk": "@@ -0,0 +1,56 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import com.grack.nanojson.JsonArray;\n+import com.grack.nanojson.JsonObject;\n+import com.grack.nanojson.JsonParser;\n+import com.grack.nanojson.JsonParserException;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.StreamingService;\n+import org.schabi.newpipe.extractor.downloader.Downloader;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.suggestion.SuggestionExtractor;\n+\n+import java.io.IOException;\n+import java.net.URLEncoder;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+public class BandcampSuggestionExtractor extends SuggestionExtractor {\n+\n+    private static final String AUTOCOMPLETE_URL = \"https://bandcamp.com/api/fuzzysearch/1/autocomplete?q=\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bf9fddba930fb0555b5ec77221bf6faa00d79e6"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NjYyOTM4OA==", "bodyText": "same here", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r576629388", "createdAt": "2021-02-16T08:24:51Z", "author": {"login": "XiangRongLin"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampSuggestionExtractor.java", "diffHunk": "@@ -0,0 +1,56 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import com.grack.nanojson.JsonArray;\n+import com.grack.nanojson.JsonObject;\n+import com.grack.nanojson.JsonParser;\n+import com.grack.nanojson.JsonParserException;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.StreamingService;\n+import org.schabi.newpipe.extractor.downloader.Downloader;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.suggestion.SuggestionExtractor;\n+\n+import java.io.IOException;\n+import java.net.URLEncoder;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+public class BandcampSuggestionExtractor extends SuggestionExtractor {\n+\n+    private static final String AUTOCOMPLETE_URL = \"https://bandcamp.com/api/fuzzysearch/1/autocomplete?q=\";\n+    public BandcampSuggestionExtractor(final StreamingService service) {\n+        super(service);\n+    }\n+\n+    @Override\n+    public List<String> suggestionList(final String query) throws IOException, ExtractionException {\n+        final Downloader downloader = NewPipe.getDownloader();\n+\n+        try {\n+            final JsonObject fuzzyResults = JsonParser.object().from(\n+                    downloader.get(AUTOCOMPLETE_URL + URLEncoder.encode(query, \"UTF-8\")).responseBody()\n+            );\n+\n+            final JsonArray jsonArray = fuzzyResults.getObject(\"auto\")\n+                    .getArray(\"results\");\n+\n+            final ArrayList<String> suggestions = new ArrayList<>();\n+\n+            for (final Object fuzzyResult : jsonArray) {\n+                final String res = ((JsonObject) fuzzyResult).getString(\"name\");\n+\n+                if (!suggestions.contains(res)) suggestions.add(res);\n+            }\n+\n+            return suggestions;\n+        } catch (final JsonParserException e) {\n+            e.printStackTrace();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bf9fddba930fb0555b5ec77221bf6faa00d79e6"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NjYyOTQyNQ==", "bodyText": "same here, list instead of arraylist", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r576629425", "createdAt": "2021-02-16T08:24:55Z", "author": {"login": "XiangRongLin"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampSuggestionExtractor.java", "diffHunk": "@@ -0,0 +1,56 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import com.grack.nanojson.JsonArray;\n+import com.grack.nanojson.JsonObject;\n+import com.grack.nanojson.JsonParser;\n+import com.grack.nanojson.JsonParserException;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.StreamingService;\n+import org.schabi.newpipe.extractor.downloader.Downloader;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.suggestion.SuggestionExtractor;\n+\n+import java.io.IOException;\n+import java.net.URLEncoder;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+public class BandcampSuggestionExtractor extends SuggestionExtractor {\n+\n+    private static final String AUTOCOMPLETE_URL = \"https://bandcamp.com/api/fuzzysearch/1/autocomplete?q=\";\n+    public BandcampSuggestionExtractor(final StreamingService service) {\n+        super(service);\n+    }\n+\n+    @Override\n+    public List<String> suggestionList(final String query) throws IOException, ExtractionException {\n+        final Downloader downloader = NewPipe.getDownloader();\n+\n+        try {\n+            final JsonObject fuzzyResults = JsonParser.object().from(\n+                    downloader.get(AUTOCOMPLETE_URL + URLEncoder.encode(query, \"UTF-8\")).responseBody()\n+            );\n+\n+            final JsonArray jsonArray = fuzzyResults.getObject(\"auto\")\n+                    .getArray(\"results\");\n+\n+            final ArrayList<String> suggestions = new ArrayList<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bf9fddba930fb0555b5ec77221bf6faa00d79e6"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NjYzMDQ1MQ==", "bodyText": "write comments more objectivly and not like you are talking to someone", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r576630451", "createdAt": "2021-02-16T08:26:34Z", "author": {"login": "XiangRongLin"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/streaminfoitem/BandcampStreamInfoItemExtractor.java", "diffHunk": "@@ -0,0 +1,54 @@\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors.streaminfoitem;\n+\n+import org.schabi.newpipe.extractor.localization.DateWrapper;\n+import org.schabi.newpipe.extractor.stream.StreamInfoItemExtractor;\n+import org.schabi.newpipe.extractor.stream.StreamType;\n+\n+import javax.annotation.Nullable;\n+\n+/**\n+ * Implements methods that return a constant value for better readability in\n+ * subclasses.\n+ */\n+public abstract class BandcampStreamInfoItemExtractor implements StreamInfoItemExtractor {\n+    private final String uploaderUrl;\n+\n+    public BandcampStreamInfoItemExtractor(final String uploaderUrl) {\n+        this.uploaderUrl = uploaderUrl;\n+    }\n+\n+    @Override\n+    public StreamType getStreamType() {\n+        return StreamType.AUDIO_STREAM;\n+    }\n+\n+    @Override\n+    public long getViewCount() {\n+        return -1;\n+    }\n+\n+    @Override\n+    public String getUploaderUrl() {\n+        return uploaderUrl;\n+    }\n+\n+    @Nullable\n+    @Override\n+    public String getTextualUploadDate() {\n+        return null;\n+    }\n+\n+    @Nullable\n+    @Override\n+    public DateWrapper getUploadDate() {\n+        return null;\n+    }\n+\n+    /**\n+     * There are no ads just like that, duh\n+     */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5bf9fddba930fb0555b5ec77221bf6faa00d79e6"}, "originalPosition": 49}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16973126a0b2c68f5cfbfad2618f8248ff11e654", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/16973126a0b2c68f5cfbfad2618f8248ff11e654", "committedDate": "2021-02-16T19:25:48Z", "message": "Use Collections.emptyList() instead of Collections.EMPTY_LIST or new ArrayList()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54b8e54f8007df6e6820a5f9d42f4bd6e141c9c2", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/54b8e54f8007df6e6820a5f9d42f4bd6e141c9c2", "committedDate": "2021-02-16T19:59:13Z", "message": "Fix potential NPE"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54aa5b3042b1f4cc53a06d78ef9aac4be6996a4a", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/54aa5b3042b1f4cc53a06d78ef9aac4be6996a4a", "committedDate": "2021-02-16T20:09:42Z", "message": "Use propper structure in KioskExtractors\n\nMade BandCampRadioExtractor a Kiosk which holds StreamInfoItems and not InfoItems."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98268e351c06d30009965bd2698246cff6a2a405", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/98268e351c06d30009965bd2698246cff6a2a405", "committedDate": "2021-02-19T12:35:44Z", "message": "Move radio URL check into a function"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa61b864f20e756156be96a4b073f871b3b1c785", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/fa61b864f20e756156be96a4b073f871b3b1c785", "committedDate": "2021-02-19T12:37:24Z", "message": "Code improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91e9309486dfd52276306ff8034edae790cdfbd3", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/91e9309486dfd52276306ff8034edae790cdfbd3", "committedDate": "2021-02-19T12:37:45Z", "message": "Merge remote-tracking branch 'origin/dev' into bandcamp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02920fafa88b3cdba4f4f94ca11c4ebdee52554b", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/02920fafa88b3cdba4f4f94ca11c4ebdee52554b", "committedDate": "2021-02-19T14:51:23Z", "message": "Add isUploaderVerified()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea120a463725bdddf22577888f85dd42c7d82db2", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/ea120a463725bdddf22577888f85dd42c7d82db2", "committedDate": "2021-02-19T23:23:45Z", "message": "remove print stacktrace\n\nuse interface"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "970569d745e6d95b936fc12ec4ffa61b0daba482", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/970569d745e6d95b936fc12ec4ffa61b0daba482", "committedDate": "2021-02-19T23:20:32Z", "message": "remove print stacktrace"}, "afterCommit": {"oid": "ea120a463725bdddf22577888f85dd42c7d82db2", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/ea120a463725bdddf22577888f85dd42c7d82db2", "committedDate": "2021-02-19T23:23:45Z", "message": "remove print stacktrace\n\nuse interface"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "adde4332d1f21220f18d5b0079210a733324f203", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/adde4332d1f21220f18d5b0079210a733324f203", "committedDate": "2021-02-20T22:58:54Z", "message": "Code improvements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c07db80ef068f885ca10709551e4591bd385cdac", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/c07db80ef068f885ca10709551e4591bd385cdac", "committedDate": "2021-02-21T11:15:45Z", "message": "Add BASE_URL and BASE_API_URL to BandcampExtractorHelper"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9e8ee8450c5222c80d42af59d1e9f197766be87", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/b9e8ee8450c5222c80d42af59d1e9f197766be87", "committedDate": "2021-02-21T11:35:14Z", "message": "Rename BandcampExtractorHelper.smartConcatenate(String[], String) to Utils.nonEmptyAndNullJoin(String, String[])"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70814dcfefbc6eaae9aa88a9190d3fa582b0376b", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/70814dcfefbc6eaae9aa88a9190d3fa582b0376b", "committedDate": "2021-02-21T11:51:47Z", "message": "Fix Utils.nonEmptyAndNullJoin\n\nWhen using the index here, it the index needs to be decremented once an element is removed. To cirecumvent this, the native Collections.removeIf() method is used."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1688fe9534983b27899bbdf685f99ff6f25d4c9", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/a1688fe9534983b27899bbdf685f99ff6f25d4c9", "committedDate": "2021-02-21T12:51:12Z", "message": "Move BandcampExtractorHelper.getJsonData(String, String) to JsonUtils"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjA1NDY2MDAy", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#pullrequestreview-605466002", "createdAt": "2021-03-05T17:53:32Z", "commit": {"oid": "5bf9fddba930fb0555b5ec77221bf6faa00d79e6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0wNVQxNzo1MzozMlrOIxQz-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0wNVQxNzo1MzozMlrOIxQz-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4ODUyNjU4Nw==", "bodyText": "Can the reason for why its empty be added here", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r588526587", "createdAt": "2021-03-05T17:53:32Z", "author": {"login": "XiangRongLin"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampFeaturedExtractor.java", "diffHunk": "@@ -0,0 +1,84 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import com.grack.nanojson.JsonArray;\n+import com.grack.nanojson.JsonObject;\n+import com.grack.nanojson.JsonParser;\n+import com.grack.nanojson.JsonParserException;\n+import org.schabi.newpipe.extractor.Page;\n+import org.schabi.newpipe.extractor.StreamingService;\n+import org.schabi.newpipe.extractor.downloader.Downloader;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.kiosk.KioskExtractor;\n+import org.schabi.newpipe.extractor.linkhandler.ListLinkHandler;\n+import org.schabi.newpipe.extractor.playlist.PlaylistInfoItem;\n+import org.schabi.newpipe.extractor.playlist.PlaylistInfoItemsCollector;\n+\n+import javax.annotation.Nonnull;\n+import java.io.IOException;\n+\n+public class BandcampFeaturedExtractor extends KioskExtractor<PlaylistInfoItem> {\n+\n+    public static final String KIOSK_FEATURED = \"Featured\";\n+    public static final String FEATURED_API_URL = \"https://bandcamp.com/api/mobile/24/bootstrap_data\";\n+\n+    public BandcampFeaturedExtractor(final StreamingService streamingService, final ListLinkHandler listLinkHandler,\n+                                     final String kioskId) {\n+        super(streamingService, listLinkHandler, kioskId);\n+    }\n+\n+    @Override\n+    public void onFetchPage(@Nonnull Downloader downloader) throws IOException, ExtractionException {\n+\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NjYyMzA2OQ=="}, "originalCommit": {"oid": "5bf9fddba930fb0555b5ec77221bf6faa00d79e6"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22fa131922a4de9f99e29c099e4fcd2c1054a8fa", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/22fa131922a4de9f99e29c099e4fcd2c1054a8fa", "committedDate": "2021-03-05T18:45:37Z", "message": "Merge branch 'dev' into bandcamp"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjA1NTYxMTU1", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#pullrequestreview-605561155", "createdAt": "2021-03-05T20:06:05Z", "commit": {"oid": "22fa131922a4de9f99e29c099e4fcd2c1054a8fa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a579337c9a4d317f2c8f247201a57de11c9e196e", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/a579337c9a4d317f2c8f247201a57de11c9e196e", "committedDate": "2020-01-03T11:28:49Z", "message": "Bandcamp service with support for streams and searches"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43dc3c3d4c44de432ed0adb1483f284bd1055449", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/43dc3c3d4c44de432ed0adb1483f284bd1055449", "committedDate": "2020-01-03T11:28:49Z", "message": "Return empty kiosk list instead of null"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80d67e22b7185596968e907b942b1f0f5acbc502", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/80d67e22b7185596968e907b942b1f0f5acbc502", "committedDate": "2020-01-03T11:28:49Z", "message": "Return mp3-128 audio stream [experimental]"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3d127ccd934c2cd6e8baedd9bce08e200aabe2e", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/c3d127ccd934c2cd6e8baedd9bce08e200aabe2e", "committedDate": "2020-01-03T11:28:49Z", "message": "Bandcamp audio stream test and fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5281456899db32ffff9362202a72bad430d1f70c", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/5281456899db32ffff9362202a72bad430d1f70c", "committedDate": "2020-01-03T11:28:49Z", "message": "Bandcamp channel link handler factory"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a42c77425dfc5165a75546a1b9822789d3623de2", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/a42c77425dfc5165a75546a1b9822789d3623de2", "committedDate": "2020-01-03T11:28:49Z", "message": "Bandcamp channel extractor (ignoring everything but tracks)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7730eb2ea13011b275296d24469623709c08f1f8", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/7730eb2ea13011b275296d24469623709c08f1f8", "committedDate": "2020-01-03T11:28:49Z", "message": "Bandcamp channel extractor: enforce https when getting banner url"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5cdc20be16e966fe3f3b5c60f26499bca046be3", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/d5cdc20be16e966fe3f3b5c60f26499bca046be3", "committedDate": "2020-01-03T11:28:49Z", "message": "Bandcmap channel extractor: fix getting banner url"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91c0ec7ceabf643f67234c23d4a70b76f9e6ed82", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/91c0ec7ceabf643f67234c23d4a70b76f9e6ed82", "committedDate": "2020-01-03T11:28:49Z", "message": "Bandcamp stream extractor: catch NullPointerException"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "794ca5eeaea99e3152278e562de5bca5851611c0", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/794ca5eeaea99e3152278e562de5bca5851611c0", "committedDate": "2020-01-03T11:28:49Z", "message": "Bandcamp channel extractor: handel nonexistent images better"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d05b14ae48e3c82e8cbe671d5a7cd7133f4c9fd4", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/d05b14ae48e3c82e8cbe671d5a7cd7133f4c9fd4", "committedDate": "2020-01-03T11:28:49Z", "message": "Add channels (artists) to search results"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba700bfb3e05752ea2e55ed57ce6973d0258a0e7", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/ba700bfb3e05752ea2e55ed57ce6973d0258a0e7", "committedDate": "2020-01-03T11:28:49Z", "message": "Add bandcamp playlists (albums)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "655df356a2b7c407211e3f1d05974ce5f5dd3d2d", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/655df356a2b7c407211e3f1d05974ce5f5dd3d2d", "committedDate": "2020-01-03T11:28:49Z", "message": "Various improvements concerning bandcamp playlists"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e12ddaef7f7ab8c447df2310490e5a37d23bd84a", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/e12ddaef7f7ab8c447df2310490e5a37d23bd84a", "committedDate": "2020-01-03T11:28:49Z", "message": "Bandcamp playlist and search extractors: better and more tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce2a88e56ff2e7c819429b8fff55f20775a5706d", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/ce2a88e56ff2e7c819429b8fff55f20775a5706d", "committedDate": "2020-01-03T11:28:49Z", "message": "Add bandcamp search suggestion extractor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b16baffb7438af1f3b79f365cdc01a2a32dadbc", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/9b16baffb7438af1f3b79f365cdc01a2a32dadbc", "committedDate": "2020-01-03T11:28:49Z", "message": "Bandcamp search: multiple pages"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13e4908b832e042141c3d8577b3cec4e69ee27d0", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/13e4908b832e042141c3d8577b3cec4e69ee27d0", "committedDate": "2020-01-03T11:28:49Z", "message": "Bandcamp search extractor: read track count from result page"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db02850d4f899e2226e2fcc99dd39bbcb70b0091", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/db02850d4f899e2226e2fcc99dd39bbcb70b0091", "committedDate": "2020-01-03T11:28:49Z", "message": "Bandcamp playlist extractor: support playlists with just one stream"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13ef11e9c8a1c60aaf8e68b63ad2fb88723569f9", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/13ef11e9c8a1c60aaf8e68b63ad2fb88723569f9", "committedDate": "2020-01-03T11:28:49Z", "message": "Bandcamp featured kiosk"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "808c8aa0872ef0bee4d8d042dc5d772babfde154", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/808c8aa0872ef0bee4d8d042dc5d772babfde154", "committedDate": "2020-01-03T11:28:49Z", "message": "Add bandcamp weekly kiosk\n\nUnfortunately a little messy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0d36dfa7eb1b35b99c6c593d4e6e247868e09fe", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/f0d36dfa7eb1b35b99c6c593d4e6e247868e09fe", "committedDate": "2020-01-03T11:28:49Z", "message": "Bandcamp radio: proper name, date shortened"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46e1f3922c8869db7bef79573c5f86dde3ab9b4f", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/46e1f3922c8869db7bef79573c5f86dde3ab9b4f", "committedDate": "2020-01-03T11:32:22Z", "message": "Refuse to load bandcamp playlists without content"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dc99b24414990a4b03972509060d2b457a89e8d1", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/dc99b24414990a4b03972509060d2b457a89e8d1", "committedDate": "2020-01-03T09:16:19Z", "message": "Merge branch 'dev' into dev"}, "afterCommit": {"oid": "46e1f3922c8869db7bef79573c5f86dde3ab9b4f", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/46e1f3922c8869db7bef79573c5f86dde3ab9b4f", "committedDate": "2020-01-03T11:32:22Z", "message": "Refuse to load bandcamp playlists without content"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba967f1a1520f7fadded3b6bfd67c4da0f188c2b", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/ba967f1a1520f7fadded3b6bfd67c4da0f188c2b", "committedDate": "2020-01-03T12:17:04Z", "message": "Workaround enourmous load times for long bandcamp playlists\n\nAdditionally, get cover art from json instead of html"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b5702bdc2a84a37f158b41bbfe7f708507ea10d", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/7b5702bdc2a84a37f158b41bbfe7f708507ea10d", "committedDate": "2020-01-11T15:32:45Z", "message": "Add bandcamp to list of supported services in README"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "623e6a8c63147ede1dabad7272049ec973ee1848", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/623e6a8c63147ede1dabad7272049ec973ee1848", "committedDate": "2020-01-17T21:37:42Z", "message": "Merge branch 'dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36a316eea52d0c93a07cbcf1ea86d91cef53b5d5", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/36a316eea52d0c93a07cbcf1ea86d91cef53b5d5", "committedDate": "2020-02-08T08:43:13Z", "message": "Merge branch 'dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b78f78801778e16ae8809ccb9b9c0ca1cb4c98e6", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/b78f78801778e16ae8809ccb9b9c0ca1cb4c98e6", "committedDate": "2020-03-17T17:03:14Z", "message": "Merge branch 'dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1523eb293acbf074b51972b272b901f7bc9144f", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/a1523eb293acbf074b51972b272b901f7bc9144f", "committedDate": "2020-03-17T19:40:25Z", "message": "Update Bandcamp service to latest interface changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c0a03328a0901ea4f551d1d602753aa4893c977", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/5c0a03328a0901ea4f551d1d602753aa4893c977", "committedDate": "2020-04-19T12:26:51Z", "message": "Merge 'origin/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c239371f4cb8b781827a06eaa827e0b328f89b4", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/9c239371f4cb8b781827a06eaa827e0b328f89b4", "committedDate": "2020-04-19T12:29:39Z", "message": "Change nanojson dependency to @wb9688's fork"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dace7a217c67750491748e412cc0fa6ec248fbf9", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/dace7a217c67750491748e412cc0fa6ec248fbf9", "committedDate": "2020-04-19T12:35:00Z", "message": "Update bandcamp search extractor to latest changes"}, "afterCommit": {"oid": "9c239371f4cb8b781827a06eaa827e0b328f89b4", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/9c239371f4cb8b781827a06eaa827e0b328f89b4", "committedDate": "2020-04-19T12:29:39Z", "message": "Change nanojson dependency to @wb9688's fork"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2NDgxMDI4", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#pullrequestreview-396481028", "createdAt": "2020-04-20T14:00:35Z", "commit": {"oid": "9c239371f4cb8b781827a06eaa827e0b328f89b4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 24, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNDowMDozNlrOGIV-RA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNDo0Mzo0NVrOGIYEaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQwMTc5Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - bandcamp\n          \n          \n            \n            - Bandcamp", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r411401796", "createdAt": "2020-04-20T14:00:36Z", "author": {"login": "wb9688"}, "path": "README.md", "diffHunk": "@@ -42,6 +42,7 @@ The following sites are currently supported:\n - SoundCloud\n - MediaCCC\n - PeerTube (no P2P)\n+- bandcamp", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c239371f4cb8b781827a06eaa827e0b328f89b4"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQwMjY1Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                implementation 'com.github.wb9688:nanojson:1d9e1aea9049fc9f85e68b43ba39fe7be1c1f751'\n          \n          \n            \n                implementation 'org.jsoup:jsoup:1.9.2'\n          \n          \n            \n                implementation 'org.mozilla:rhino:1.7.7.1'\n          \n          \n            \n                implementation 'com.github.spotbugs:spotbugs-annotations:3.1.0'\n          \n          \n            \n                implementation 'org.nibor.autolink:autolink:0.8.0'\n          \n          \n            \n                implementation 'org.json:json:20190722'\n          \n          \n            \n                implementation 'com.github.TeamNewPipe:nanojson:1d9e1aea9049fc9f85e68b43ba39fe7be1c1f751'\n          \n          \n            \n                implementation 'org.jsoup:jsoup:1.9.2'\n          \n          \n            \n                implementation 'org.mozilla:rhino:1.7.7.1'\n          \n          \n            \n                implementation 'com.github.spotbugs:spotbugs-annotations:3.1.0'\n          \n          \n            \n                implementation 'org.nibor.autolink:autolink:0.8.0'\n          \n      \n    \n    \n  \n\nAlso, don't forget to change it in timeago-parser/build.gradle as well, plus move the remaining code from org.json to nanojson.", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r411402657", "createdAt": "2020-04-20T14:01:41Z", "author": {"login": "wb9688"}, "path": "extractor/build.gradle", "diffHunk": "@@ -1,11 +1,14 @@\n+\n+\n dependencies {\n     implementation project(':timeago-parser')\n \n-    implementation 'com.grack:nanojson:1.1'\n+    implementation 'com.github.wb9688:nanojson:1d9e1aea9049fc9f85e68b43ba39fe7be1c1f751'\n     implementation 'org.jsoup:jsoup:1.9.2'\n     implementation 'org.mozilla:rhino:1.7.7.1'\n     implementation 'com.github.spotbugs:spotbugs-annotations:3.1.0'\n     implementation 'org.nibor.autolink:autolink:0.8.0'\n+    implementation 'org.json:json:20190722'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c239371f4cb8b781827a06eaa827e0b328f89b4"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQwMjk2Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public static final BandcampService bandcamp;\n          \n          \n            \n                public static final BandcampService Bandcamp;", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r411402962", "createdAt": "2020-04-20T14:02:02Z", "author": {"login": "wb9688"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/ServiceList.java", "diffHunk": "@@ -39,6 +40,7 @@ private ServiceList() {\n     public static final SoundcloudService SoundCloud;\n     public static final MediaCCCService MediaCCC;\n     public static final PeertubeService PeerTube;\n+    public static final BandcampService bandcamp;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c239371f4cb8b781827a06eaa827e0b328f89b4"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQwNjA3Nw==", "bodyText": "Generate that JSON in a proper way, i.e. using JsonWriter.", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r411406077", "createdAt": "2020-04-20T14:05:54Z", "author": {"login": "wb9688"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampChannelExtractor.java", "diffHunk": "@@ -0,0 +1,167 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import org.json.JSONArray;\n+import org.json.JSONException;\n+import org.json.JSONObject;\n+import org.jsoup.Jsoup;\n+import org.schabi.newpipe.extractor.InfoItemsCollector;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.StreamingService;\n+import org.schabi.newpipe.extractor.channel.ChannelExtractor;\n+import org.schabi.newpipe.extractor.downloader.Downloader;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.exceptions.ReCaptchaException;\n+import org.schabi.newpipe.extractor.linkhandler.ListLinkHandler;\n+import org.schabi.newpipe.extractor.stream.StreamInfoItem;\n+import org.schabi.newpipe.extractor.stream.StreamInfoItemsCollector;\n+\n+import javax.annotation.Nonnull;\n+import java.io.IOException;\n+\n+public class BandcampChannelExtractor extends ChannelExtractor {\n+\n+    private JSONObject channelInfo;\n+\n+    public BandcampChannelExtractor(StreamingService service, ListLinkHandler linkHandler) throws ParsingException {\n+        super(service, linkHandler);\n+\n+        channelInfo = getArtistDetails(getId());\n+    }\n+\n+    /**\n+     * Fetch artist details from mobile endpoint.\n+     * <a href=https://notabug.org/fynngodau/bandcampDirect/wiki/rewindBandcamp+%E2%80%93+Fetching+artist+details>\n+     * I once took a moment to note down how it works.</a>\n+     */\n+    public static JSONObject getArtistDetails(String id) throws ParsingException {\n+        try {\n+            return\n+                    new JSONObject(\n+                            NewPipe.getDownloader().post(\n+                                    \"https://bandcamp.com/api/mobile/22/band_details\",\n+                                    null,\n+                                    (\"{\\\"band_id\\\":\\\"\" + id + \"\\\"}\").getBytes()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c239371f4cb8b781827a06eaa827e0b328f89b4"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQwNzQzNQ==", "bodyText": "Don't fetch anything in the constructor. Do that in onFetchPage().", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r411407435", "createdAt": "2020-04-20T14:07:41Z", "author": {"login": "wb9688"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampChannelExtractor.java", "diffHunk": "@@ -0,0 +1,167 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import org.json.JSONArray;\n+import org.json.JSONException;\n+import org.json.JSONObject;\n+import org.jsoup.Jsoup;\n+import org.schabi.newpipe.extractor.InfoItemsCollector;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.StreamingService;\n+import org.schabi.newpipe.extractor.channel.ChannelExtractor;\n+import org.schabi.newpipe.extractor.downloader.Downloader;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.exceptions.ReCaptchaException;\n+import org.schabi.newpipe.extractor.linkhandler.ListLinkHandler;\n+import org.schabi.newpipe.extractor.stream.StreamInfoItem;\n+import org.schabi.newpipe.extractor.stream.StreamInfoItemsCollector;\n+\n+import javax.annotation.Nonnull;\n+import java.io.IOException;\n+\n+public class BandcampChannelExtractor extends ChannelExtractor {\n+\n+    private JSONObject channelInfo;\n+\n+    public BandcampChannelExtractor(StreamingService service, ListLinkHandler linkHandler) throws ParsingException {\n+        super(service, linkHandler);\n+\n+        channelInfo = getArtistDetails(getId());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c239371f4cb8b781827a06eaa827e0b328f89b4"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQxMTAyNQ==", "bodyText": "You shouldn't do a lot of stuff here, but in the appropriate InfoItemExtractors as far as that's possible. This code here should be reduced to something like:\n            final Element resultInfo = searchResult.getElementsByClass(\"result-info\").first();\n\n            final String type = resultInfo.getElementsByClass(\"itemtype\").first().text();\n            \n            switch (type) {\n                default:\n                    continue;\n                case \"FAN\":\n                    //collector.commit Channel (?) with heading, url, image\n                    break;\n                case \"ARTIST\":\n                    collector.commit(new BandcampChannelInfoItemExtractor(resultInfo));\n                    break;\n                case \"ALBUM\":\n                    collector.commit(new BandcampPlaylistInfoItemExtractor(resultInfo));\n                    break;\n                case \"TRACK\":\n                    collector.commit(new BandcampStreamInfoItemExtractor(resultInfo));\n                    break;\n            }", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r411411025", "createdAt": "2020-04-20T14:12:13Z", "author": {"login": "wb9688"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampSearchExtractor.java", "diffHunk": "@@ -0,0 +1,139 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import org.jsoup.Jsoup;\n+import org.jsoup.nodes.Document;\n+import org.jsoup.nodes.Element;\n+import org.jsoup.select.Elements;\n+import org.schabi.newpipe.extractor.InfoItem;\n+import org.schabi.newpipe.extractor.StreamingService;\n+import org.schabi.newpipe.extractor.downloader.Downloader;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.linkhandler.SearchQueryHandler;\n+import org.schabi.newpipe.extractor.search.InfoItemsSearchCollector;\n+import org.schabi.newpipe.extractor.search.SearchExtractor;\n+\n+import javax.annotation.Nonnull;\n+import java.io.IOException;\n+\n+public class BandcampSearchExtractor extends SearchExtractor {\n+\n+    public BandcampSearchExtractor(StreamingService service, SearchQueryHandler linkHandler) {\n+        super(service, linkHandler);\n+    }\n+\n+    @Override\n+    public String getSearchSuggestion() {\n+        return null;\n+    }\n+\n+    @Override\n+    public InfoItemsPage<InfoItem> getPage(String pageUrl) throws IOException, ExtractionException {\n+        // okay apparently this is where we DOWNLOAD the page and then COMMIT its ENTRIES to an INFOITEMPAGE\n+        String html = getDownloader().get(pageUrl).responseBody();\n+\n+        InfoItemsSearchCollector collector = new InfoItemsSearchCollector(getServiceId());\n+\n+\n+        Document d = Jsoup.parse(html);\n+\n+        Elements searchResultsElements = d.getElementsByClass(\"searchresult\");\n+\n+        for (Element searchResult :\n+                searchResultsElements) {\n+\n+            Element resultInfo = searchResult.getElementsByClass(\"result-info\").first();\n+\n+            String type = resultInfo\n+                    .getElementsByClass(\"itemtype\").first().text();\n+\n+            String image = null;\n+            Element img = searchResult.getElementsByClass(\"art\").first()\n+                    .getElementsByTag(\"img\").first();\n+            if (img != null) {\n+                image = img.attr(\"src\");\n+            }\n+\n+            String heading = resultInfo.getElementsByClass(\"heading\").text();\n+\n+            String subhead = resultInfo.getElementsByClass(\"subhead\").text();\n+\n+            String url = resultInfo.getElementsByClass(\"itemurl\").text();\n+\n+            switch (type) {\n+                default:\n+                    continue;\n+                case \"FAN\":\n+                    //collector.commit Channel (?) with heading, url, image\n+                    break;\n+\n+                case \"ARTIST\":\n+                    collector.commit(new BandcampChannelInfoItemExtractor(heading, url, image, subhead));\n+                    break;\n+\n+                case \"ALBUM\":\n+                    String artist = subhead.split(\" by\")[0];\n+                    String length = resultInfo.getElementsByClass(\"length\").text();\n+                    int tracks = Integer.parseInt(length.split(\" track\")[0]);\n+                    collector.commit(new BandcampPlaylistInfoItemExtractor(heading, artist, url, image, tracks));\n+                    break;\n+\n+                case \"TRACK\":\n+                    String[] splitBy = subhead.split(\" by\");\n+                    String artist1 = null;\n+                    if (splitBy.length > 1) {\n+                        artist1 = subhead.split(\" by\")[1];\n+                    }\n+                    collector.commit(new BandcampStreamInfoItemExtractor(heading, url, image, artist1));\n+                    break;\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c239371f4cb8b781827a06eaa827e0b328f89b4"}, "originalPosition": 90}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQxNDI0MA==", "bodyText": "Not needed with our nanojson fork", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r411414240", "createdAt": "2020-04-20T14:16:09Z", "author": {"login": "wb9688"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampStreamExtractor.java", "diffHunk": "@@ -0,0 +1,318 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import org.json.JSONException;\n+import org.json.JSONObject;\n+import org.jsoup.Jsoup;\n+import org.jsoup.nodes.Document;\n+import org.jsoup.nodes.Element;\n+import org.jsoup.select.Elements;\n+import org.schabi.newpipe.extractor.MediaFormat;\n+import org.schabi.newpipe.extractor.StreamingService;\n+import org.schabi.newpipe.extractor.downloader.Downloader;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.linkhandler.LinkHandler;\n+import org.schabi.newpipe.extractor.localization.DateWrapper;\n+import org.schabi.newpipe.extractor.stream.*;\n+\n+import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Locale;\n+\n+import static org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampChannelExtractor.getImageUrl;\n+\n+public class BandcampStreamExtractor extends StreamExtractor {\n+\n+    private JSONObject albumJson;\n+    private JSONObject current;\n+    private Document document;\n+\n+    public BandcampStreamExtractor(StreamingService service, LinkHandler linkHandler) {\n+        super(service, linkHandler);\n+    }\n+\n+\n+    @Override\n+    public void onFetchPage(@Nonnull Downloader downloader) throws IOException, ExtractionException {\n+        String html = downloader.get(getLinkHandler().getUrl()).responseBody();\n+        document = Jsoup.parse(html);\n+        albumJson = getAlbumInfoJson(html);\n+        current = albumJson.getJSONObject(\"current\");\n+\n+        if (albumJson.getJSONArray(\"trackinfo\").length() > 1) {\n+            // In this case, we are actually viewing an album page!\n+            throw new ExtractionException(\"Page is actually an album, not a track\");\n+        }\n+    }\n+\n+    /**\n+     * Get the JSON that contains album's metadata from page\n+     *\n+     * @param html Website\n+     * @return Album metadata JSON\n+     * @throws ParsingException In case of a faulty website\n+     */\n+    public static JSONObject getAlbumInfoJson(String html) throws ParsingException {\n+        try {\n+            return BandcampExtractorHelper.getJSONFromJavaScriptVariables(html, \"TralbumData\");\n+        } catch (JSONException e) {\n+            throw new ParsingException(\"Faulty JSON; page likely does not contain album data\", e);\n+        } catch (ArrayIndexOutOfBoundsException e) {\n+            throw new ParsingException(\"JSON does not exist\", e);\n+        }\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getName() throws ParsingException {\n+        return current.getString(\"title\");\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUploaderUrl() throws ParsingException {\n+        String[] parts = getUrl().split(\"/\");\n+        // https: (/) (/) * .bandcamp.com (/) and leave out the rest\n+        return \"https://\" + parts[2] + \"/\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUrl() throws ParsingException {\n+        return albumJson.getString(\"url\").replace(\"http://\", \"https://\");\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUploaderName() throws ParsingException {\n+        return albumJson.getString(\"artist\");\n+    }\n+\n+    @Nullable\n+    @Override\n+    public String getTextualUploadDate() throws ParsingException {\n+        return current.getString(\"release_date\");\n+    }\n+\n+    @Nullable\n+    @Override\n+    public DateWrapper getUploadDate() {\n+        return null;\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getThumbnailUrl() throws ParsingException {\n+        if (albumJson.isNull(\"art_id\")) return \"\";\n+        else return getImageUrl(albumJson.getLong(\"art_id\"), true);\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUploaderAvatarUrl() {\n+        try {\n+            return document.getElementsByClass(\"band-photo\").first().attr(\"src\");\n+        } catch (NullPointerException e) {\n+            return \"\";\n+        }\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public Description getDescription() {\n+        String s = BandcampExtractorHelper.smartConcatenate(\n+                new String[]{\n+                        getStringOrNull(current, \"about\"),\n+                        getStringOrNull(current, \"lyrics\"),\n+                        getStringOrNull(current, \"credits\")\n+                }, \"\\n\\n\"\n+        );\n+        return new Description(s, Description.PLAIN_TEXT);\n+    }\n+\n+    /**\n+     * Avoid exceptions like \"<code>JSONObject[\"about\"] not a string.</code>\" and instead just return null.\n+     * This is for the case that the actual JSON has something like <code>\"about\": null</code>.\n+     */\n+    private String getStringOrNull(JSONObject jsonObject, String value) {\n+        try {\n+            return jsonObject.getString(value);\n+        } catch (JSONException e) {\n+            return null;\n+        }\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c239371f4cb8b781827a06eaa827e0b328f89b4"}, "originalPosition": 148}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQxNDcyMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return 0;\n          \n          \n            \n                    return NO_AGE_LIMIT;", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r411414723", "createdAt": "2020-04-20T14:16:45Z", "author": {"login": "wb9688"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampStreamExtractor.java", "diffHunk": "@@ -0,0 +1,318 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import org.json.JSONException;\n+import org.json.JSONObject;\n+import org.jsoup.Jsoup;\n+import org.jsoup.nodes.Document;\n+import org.jsoup.nodes.Element;\n+import org.jsoup.select.Elements;\n+import org.schabi.newpipe.extractor.MediaFormat;\n+import org.schabi.newpipe.extractor.StreamingService;\n+import org.schabi.newpipe.extractor.downloader.Downloader;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.linkhandler.LinkHandler;\n+import org.schabi.newpipe.extractor.localization.DateWrapper;\n+import org.schabi.newpipe.extractor.stream.*;\n+\n+import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Locale;\n+\n+import static org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampChannelExtractor.getImageUrl;\n+\n+public class BandcampStreamExtractor extends StreamExtractor {\n+\n+    private JSONObject albumJson;\n+    private JSONObject current;\n+    private Document document;\n+\n+    public BandcampStreamExtractor(StreamingService service, LinkHandler linkHandler) {\n+        super(service, linkHandler);\n+    }\n+\n+\n+    @Override\n+    public void onFetchPage(@Nonnull Downloader downloader) throws IOException, ExtractionException {\n+        String html = downloader.get(getLinkHandler().getUrl()).responseBody();\n+        document = Jsoup.parse(html);\n+        albumJson = getAlbumInfoJson(html);\n+        current = albumJson.getJSONObject(\"current\");\n+\n+        if (albumJson.getJSONArray(\"trackinfo\").length() > 1) {\n+            // In this case, we are actually viewing an album page!\n+            throw new ExtractionException(\"Page is actually an album, not a track\");\n+        }\n+    }\n+\n+    /**\n+     * Get the JSON that contains album's metadata from page\n+     *\n+     * @param html Website\n+     * @return Album metadata JSON\n+     * @throws ParsingException In case of a faulty website\n+     */\n+    public static JSONObject getAlbumInfoJson(String html) throws ParsingException {\n+        try {\n+            return BandcampExtractorHelper.getJSONFromJavaScriptVariables(html, \"TralbumData\");\n+        } catch (JSONException e) {\n+            throw new ParsingException(\"Faulty JSON; page likely does not contain album data\", e);\n+        } catch (ArrayIndexOutOfBoundsException e) {\n+            throw new ParsingException(\"JSON does not exist\", e);\n+        }\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getName() throws ParsingException {\n+        return current.getString(\"title\");\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUploaderUrl() throws ParsingException {\n+        String[] parts = getUrl().split(\"/\");\n+        // https: (/) (/) * .bandcamp.com (/) and leave out the rest\n+        return \"https://\" + parts[2] + \"/\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUrl() throws ParsingException {\n+        return albumJson.getString(\"url\").replace(\"http://\", \"https://\");\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUploaderName() throws ParsingException {\n+        return albumJson.getString(\"artist\");\n+    }\n+\n+    @Nullable\n+    @Override\n+    public String getTextualUploadDate() throws ParsingException {\n+        return current.getString(\"release_date\");\n+    }\n+\n+    @Nullable\n+    @Override\n+    public DateWrapper getUploadDate() {\n+        return null;\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getThumbnailUrl() throws ParsingException {\n+        if (albumJson.isNull(\"art_id\")) return \"\";\n+        else return getImageUrl(albumJson.getLong(\"art_id\"), true);\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUploaderAvatarUrl() {\n+        try {\n+            return document.getElementsByClass(\"band-photo\").first().attr(\"src\");\n+        } catch (NullPointerException e) {\n+            return \"\";\n+        }\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public Description getDescription() {\n+        String s = BandcampExtractorHelper.smartConcatenate(\n+                new String[]{\n+                        getStringOrNull(current, \"about\"),\n+                        getStringOrNull(current, \"lyrics\"),\n+                        getStringOrNull(current, \"credits\")\n+                }, \"\\n\\n\"\n+        );\n+        return new Description(s, Description.PLAIN_TEXT);\n+    }\n+\n+    /**\n+     * Avoid exceptions like \"<code>JSONObject[\"about\"] not a string.</code>\" and instead just return null.\n+     * This is for the case that the actual JSON has something like <code>\"about\": null</code>.\n+     */\n+    private String getStringOrNull(JSONObject jsonObject, String value) {\n+        try {\n+            return jsonObject.getString(value);\n+        } catch (JSONException e) {\n+            return null;\n+        }\n+    }\n+\n+    @Override\n+    public int getAgeLimit() throws ParsingException {\n+        return 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c239371f4cb8b781827a06eaa827e0b328f89b4"}, "originalPosition": 152}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQxNzIxOQ==", "bodyText": "No need for the throws ParsingException then", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r411417219", "createdAt": "2020-04-20T14:19:52Z", "author": {"login": "wb9688"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampStreamInfoItemExtractor.java", "diffHunk": "@@ -0,0 +1,114 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import org.schabi.newpipe.extractor.StreamingService;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.localization.DateWrapper;\n+import org.schabi.newpipe.extractor.stream.StreamExtractor;\n+import org.schabi.newpipe.extractor.stream.StreamInfoItemExtractor;\n+import org.schabi.newpipe.extractor.stream.StreamType;\n+\n+import javax.annotation.Nullable;\n+import java.io.IOException;\n+\n+public class BandcampStreamInfoItemExtractor implements StreamInfoItemExtractor {\n+\n+    private String title;\n+    private String url;\n+    private String cover;\n+    private String artist;\n+    private long duration;\n+    private StreamingService service;\n+\n+    public BandcampStreamInfoItemExtractor(String title, String url, String artist, long duration, StreamingService service) {\n+        this(title, url, null, artist, duration);\n+        this.service = service;\n+    }\n+\n+    public BandcampStreamInfoItemExtractor(String title, String url, String cover, String artist) {\n+        this(title, url, cover, artist, -1);\n+    }\n+\n+    public BandcampStreamInfoItemExtractor(String title, String url, String cover, String artist, long duration) {\n+        this.title = title;\n+        this.url = url;\n+        this.cover = cover;\n+        this.artist = artist;\n+        this.duration = duration;\n+    }\n+\n+    @Override\n+    public StreamType getStreamType() {\n+        return StreamType.AUDIO_STREAM;\n+    }\n+\n+    @Override\n+    public long getDuration() {\n+        return duration;\n+    }\n+\n+    @Override\n+    public long getViewCount() {\n+        return -1;\n+    }\n+\n+    @Override\n+    public String getUploaderName() {\n+        return artist;\n+    }\n+\n+    @Override\n+    public String getUploaderUrl() {\n+        return null;\n+    }\n+\n+    @Nullable\n+    @Override\n+    public String getTextualUploadDate() {\n+        return null; // TODO\n+    }\n+\n+    @Nullable\n+    @Override\n+    public DateWrapper getUploadDate() {\n+        return null;\n+    }\n+\n+    @Override\n+    public String getName() throws ParsingException {\n+        return title;\n+    }\n+\n+    @Override\n+    public String getUrl() throws ParsingException {\n+        return url;\n+    }\n+\n+    /**\n+     * There is no guarantee that every track of an album has the same cover art, so it needs to be fetched\n+     * per-track if in playlist view\n+     */\n+    @Override\n+    public String getThumbnailUrl() throws ParsingException {\n+        if (cover != null) return cover;\n+        else {\n+            try {\n+                StreamExtractor extractor = service.getStreamExtractor(getUrl());\n+                extractor.fetchPage();\n+                return extractor.getThumbnailUrl();\n+            } catch (ExtractionException | IOException e) {\n+                throw new ParsingException(\"could not download cover art location\", e);\n+            }\n+        }\n+    }\n+\n+    /**\n+     * There are no ads just like that, duh\n+     */\n+    @Override\n+    public boolean isAd() throws ParsingException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c239371f4cb8b781827a06eaa827e0b328f89b4"}, "originalPosition": 111}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQxNzkyNw==", "bodyText": "Can't you use for (Object item : jsonArray)?", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r411417927", "createdAt": "2020-04-20T14:20:49Z", "author": {"login": "wb9688"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampSuggestionExtractor.java", "diffHunk": "@@ -0,0 +1,51 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import org.json.JSONArray;\n+import org.json.JSONObject;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.StreamingService;\n+import org.schabi.newpipe.extractor.downloader.Downloader;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.suggestion.SuggestionExtractor;\n+\n+import java.io.IOException;\n+import java.net.URLEncoder;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+import static org.schabi.newpipe.extractor.services.bandcamp.linkHandler.BandcampSearchQueryHandlerFactory.CHARSET_UTF_8;\n+\n+public class BandcampSuggestionExtractor extends SuggestionExtractor {\n+\n+    private static final String AUTOCOMPLETE_URL = \"https://bandcamp.com/api/fuzzysearch/1/autocomplete?q=\";\n+    public BandcampSuggestionExtractor(StreamingService service) {\n+        super(service);\n+    }\n+\n+    @Override\n+    public List<String> suggestionList(String query) throws IOException, ExtractionException {\n+        Downloader downloader = NewPipe.getDownloader();\n+\n+        JSONObject fuzzyResults = new JSONObject(\n+                downloader.get(AUTOCOMPLETE_URL + URLEncoder.encode(query, CHARSET_UTF_8)).responseBody()\n+        );\n+\n+        JSONArray jsonArray = fuzzyResults.getJSONObject(\"auto\")\n+                .getJSONArray(\"results\");\n+\n+        ArrayList<String> suggestions = new ArrayList<>();\n+\n+        for (int i = 0; i < jsonArray.length(); i++) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c239371f4cb8b781827a06eaa827e0b328f89b4"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQyMDc1Ng==", "bodyText": "I think you should still just return the actual ID in getId()", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r411420756", "createdAt": "2020-04-20T14:24:15Z", "author": {"login": "wb9688"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/linkHandler/BandcampPlaylistLinkHandlerFactory.java", "diffHunk": "@@ -0,0 +1,31 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.linkHandler;\n+\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.linkhandler.ListLinkHandlerFactory;\n+\n+import java.util.List;\n+\n+/**\n+ * Just as with streams, the album ids are essentially useless for us.\n+ */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c239371f4cb8b781827a06eaa827e0b328f89b4"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQyMTMyOQ==", "bodyText": "There's no need to do this stuff\u2026", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r411421329", "createdAt": "2020-04-20T14:24:59Z", "author": {"login": "wb9688"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/linkHandler/BandcampPlaylistLinkHandlerFactory.java", "diffHunk": "@@ -0,0 +1,31 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.linkHandler;\n+\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.linkhandler.ListLinkHandlerFactory;\n+\n+import java.util.List;\n+\n+/**\n+ * Just as with streams, the album ids are essentially useless for us.\n+ */\n+public class BandcampPlaylistLinkHandlerFactory extends ListLinkHandlerFactory {\n+    @Override\n+    public String getId(String url) throws ParsingException {\n+        return getUrl(url);\n+    }\n+\n+    @Override\n+    public String getUrl(String url, List<String> contentFilter, String sortFilter) throws ParsingException {\n+        if (url.endsWith(\"/\"))\n+            url = url.substring(0, url.length() - 1);\n+        url = url.replace(\"http://\", \"https://\").toLowerCase();\n+        return url;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c239371f4cb8b781827a06eaa827e0b328f89b4"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQyMzA0NQ==", "bodyText": "No need for these variables", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r411423045", "createdAt": "2020-04-20T14:27:06Z", "author": {"login": "wb9688"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/linkHandler/BandcampSearchQueryHandlerFactory.java", "diffHunk": "@@ -0,0 +1,31 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.linkHandler;\n+\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.linkhandler.SearchQueryHandlerFactory;\n+\n+import java.io.UnsupportedEncodingException;\n+import java.net.URLEncoder;\n+import java.util.List;\n+\n+public class BandcampSearchQueryHandlerFactory extends SearchQueryHandlerFactory {\n+\n+    private static final String SEARCH_URL = \"https://bandcamp.com/search?q=\";\n+\n+    public static final String CHARSET_UTF_8 = \"UTF-8\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c239371f4cb8b781827a06eaa827e0b328f89b4"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQyMzMzNg==", "bodyText": "Use a <p>", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r411423336", "createdAt": "2020-04-20T14:27:30Z", "author": {"login": "wb9688"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/linkHandler/BandcampStreamLinkHandlerFactory.java", "diffHunk": "@@ -0,0 +1,54 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.linkHandler;\n+\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.linkhandler.LinkHandlerFactory;\n+\n+/**\n+ * Tracks don't have standalone ids, they are always in combination with the band id.\n+ * That's why id = url. Instead, URLs are cleaned up so that they always look the same.\n+ * <br/><br/>\n+ * Radio (bandcamp weekly) shows do have ids.\n+ */\n+public class BandcampStreamLinkHandlerFactory extends LinkHandlerFactory {\n+\n+\n+    /**\n+     * @see BandcampStreamLinkHandlerFactory\n+     */\n+    @Override\n+    public String getId(String url) throws ParsingException {\n+        if (url.matches(\"https?://bandcamp\\\\.com/\\\\?show=\\\\d+\")) {\n+            return url.split(\"bandcamp.com/\\\\?show=\")[1];\n+        } else\n+            return getUrl(url);\n+    }\n+\n+    /**\n+     * Clean up url\n+     * @see BandcampStreamLinkHandlerFactory\n+     */\n+    @Override\n+    public String getUrl(String input) {\n+        if (input.matches(\"\\\\d+\"))\n+            return \"https://bandcamp.com/?show=\" + input;\n+        if (input.endsWith(\"/\"))\n+            input = input.substring(0, input.length() - 1);\n+        input = input.replace(\"http://\", \"https://\").toLowerCase();\n+        return input;\n+    }\n+\n+    /**\n+     * Sometimes, the root page of an artist is also an album or track\n+     * page. In that case, it is assumed that one actually wants to open\n+     * the profile and not the track it has set as the default one.\n+     * <br/><br/>Urls are expected to be in this format to account for", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c239371f4cb8b781827a06eaa827e0b328f89b4"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQyNTU0Mg==", "bodyText": "You should test all the public methods of a ChannelExtractor, and not call BandcampChannelExtractor directly.", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r411425542", "createdAt": "2020-04-20T14:30:16Z", "author": {"login": "wb9688"}, "path": "extractor/src/test/java/org/schabi/newpipe/extractor/services/bandcamp/BandcampChannelExtractorTest.java", "diffHunk": "@@ -0,0 +1,61 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.schabi.newpipe.DownloaderTestImpl;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampChannelExtractor;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampExtractorHelper;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n+import static org.schabi.newpipe.extractor.ServiceList.bandcamp;\n+\n+public class BandcampChannelExtractorTest {\n+\n+    private static BandcampChannelExtractor extractor;\n+\n+    @BeforeClass\n+    public static void setUp() throws Exception {\n+        NewPipe.init(DownloaderTestImpl.getInstance());\n+        extractor = (BandcampChannelExtractor) bandcamp\n+                .getChannelExtractor(\"https://zachbenson.bandcamp.com/\");\n+    }\n+\n+    @Test\n+    public void testImageUrl() {\n+        assertEquals(\"https://f4.bcbits.com/img/a2405652335_10.jpg\", BandcampChannelExtractor.getImageUrl(2405652335L, true));\n+        assertEquals(\"https://f4.bcbits.com/img/17433693_10.jpg\", BandcampChannelExtractor.getImageUrl(17433693L, false));\n+    }\n+\n+    @Test\n+    public void testTranslateIdsToUrl() throws ParsingException {\n+        assertEquals(\"https://zachbenson.bandcamp.com/album/covers\", BandcampExtractorHelper.getStreamUrlFromIds(2862267535L, 2063639444L, \"album\"));\n+        // TODO write more test cases\n+    }\n+\n+    @Test\n+    public void testLength() throws ParsingException {\n+        assertTrue(extractor.getInitialPage().getItems().size() > 2);\n+    }\n+\n+    @Test\n+    public void testGetBannerUrl() throws ParsingException {\n+        // Why is this picture in png format when all other pictures are jpg?\n+        assertTrue(extractor.getBannerUrl().endsWith(\".png\"));\n+    }\n+\n+    @Test\n+    public void testGetNoAvatar() throws ExtractionException {\n+        assertEquals(\"\", bandcamp.getChannelExtractor(\"https://powertothequeerkids.bandcamp.com/\").getAvatarUrl());\n+    }\n+\n+    @Test\n+    public void testGetNoBanner() throws ExtractionException {\n+        assertEquals(\"\", bandcamp.getChannelExtractor(\"https://powertothequeerkids.bandcamp.com/\").getBannerUrl());\n+    }\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c239371f4cb8b781827a06eaa827e0b328f89b4"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQyNTgzMg==", "bodyText": "Shouldn't be public", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r411425832", "createdAt": "2020-04-20T14:30:39Z", "author": {"login": "wb9688"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampChannelExtractor.java", "diffHunk": "@@ -0,0 +1,167 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import org.json.JSONArray;\n+import org.json.JSONException;\n+import org.json.JSONObject;\n+import org.jsoup.Jsoup;\n+import org.schabi.newpipe.extractor.InfoItemsCollector;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.StreamingService;\n+import org.schabi.newpipe.extractor.channel.ChannelExtractor;\n+import org.schabi.newpipe.extractor.downloader.Downloader;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.exceptions.ReCaptchaException;\n+import org.schabi.newpipe.extractor.linkhandler.ListLinkHandler;\n+import org.schabi.newpipe.extractor.stream.StreamInfoItem;\n+import org.schabi.newpipe.extractor.stream.StreamInfoItemsCollector;\n+\n+import javax.annotation.Nonnull;\n+import java.io.IOException;\n+\n+public class BandcampChannelExtractor extends ChannelExtractor {\n+\n+    private JSONObject channelInfo;\n+\n+    public BandcampChannelExtractor(StreamingService service, ListLinkHandler linkHandler) throws ParsingException {\n+        super(service, linkHandler);\n+\n+        channelInfo = getArtistDetails(getId());\n+    }\n+\n+    /**\n+     * Fetch artist details from mobile endpoint.\n+     * <a href=https://notabug.org/fynngodau/bandcampDirect/wiki/rewindBandcamp+%E2%80%93+Fetching+artist+details>\n+     * I once took a moment to note down how it works.</a>\n+     */\n+    public static JSONObject getArtistDetails(String id) throws ParsingException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c239371f4cb8b781827a06eaa827e0b328f89b4"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQyNTg5Ng==", "bodyText": "Shouldn't be public", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r411425896", "createdAt": "2020-04-20T14:30:44Z", "author": {"login": "wb9688"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampChannelExtractor.java", "diffHunk": "@@ -0,0 +1,167 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import org.json.JSONArray;\n+import org.json.JSONException;\n+import org.json.JSONObject;\n+import org.jsoup.Jsoup;\n+import org.schabi.newpipe.extractor.InfoItemsCollector;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.StreamingService;\n+import org.schabi.newpipe.extractor.channel.ChannelExtractor;\n+import org.schabi.newpipe.extractor.downloader.Downloader;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.exceptions.ReCaptchaException;\n+import org.schabi.newpipe.extractor.linkhandler.ListLinkHandler;\n+import org.schabi.newpipe.extractor.stream.StreamInfoItem;\n+import org.schabi.newpipe.extractor.stream.StreamInfoItemsCollector;\n+\n+import javax.annotation.Nonnull;\n+import java.io.IOException;\n+\n+public class BandcampChannelExtractor extends ChannelExtractor {\n+\n+    private JSONObject channelInfo;\n+\n+    public BandcampChannelExtractor(StreamingService service, ListLinkHandler linkHandler) throws ParsingException {\n+        super(service, linkHandler);\n+\n+        channelInfo = getArtistDetails(getId());\n+    }\n+\n+    /**\n+     * Fetch artist details from mobile endpoint.\n+     * <a href=https://notabug.org/fynngodau/bandcampDirect/wiki/rewindBandcamp+%E2%80%93+Fetching+artist+details>\n+     * I once took a moment to note down how it works.</a>\n+     */\n+    public static JSONObject getArtistDetails(String id) throws ParsingException {\n+        try {\n+            return\n+                    new JSONObject(\n+                            NewPipe.getDownloader().post(\n+                                    \"https://bandcamp.com/api/mobile/22/band_details\",\n+                                    null,\n+                                    (\"{\\\"band_id\\\":\\\"\" + id + \"\\\"}\").getBytes()\n+                            ).responseBody()\n+                    );\n+        } catch (IOException | ReCaptchaException e) {\n+            throw new ParsingException(\"Could not download band details\", e);\n+        }\n+    }\n+\n+    /**\n+     * @param id    The image ID\n+     * @param album Whether this is the cover of an album\n+     * @return Url of image with this ID in size 10 which is 1200x1200 (we could also choose size 0\n+     * but we don't want something as large as 3460x3460 here, do we?)\n+     */\n+    public static String getImageUrl(long id, boolean album) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c239371f4cb8b781827a06eaa827e0b328f89b4"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQyNzM5MA==", "bodyText": "You should test all public methods of a KioskExtractor", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r411427390", "createdAt": "2020-04-20T14:32:36Z", "author": {"login": "wb9688"}, "path": "extractor/src/test/java/org/schabi/newpipe/extractor/services/bandcamp/BandcampFeaturedExtractorTest.java", "diffHunk": "@@ -0,0 +1,39 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.schabi.newpipe.DownloaderTestImpl;\n+import org.schabi.newpipe.extractor.InfoItem;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampFeaturedExtractor;\n+\n+import java.io.IOException;\n+import java.util.List;\n+\n+import static org.junit.Assert.assertTrue;\n+import static org.schabi.newpipe.extractor.ServiceList.bandcamp;\n+\n+/**\n+ * Tests for {@link BandcampFeaturedExtractor}\n+ */\n+public class BandcampFeaturedExtractorTest {\n+\n+    private static BandcampFeaturedExtractor extractor;\n+\n+    @BeforeClass\n+    public static void setUp() throws ExtractionException, IOException {\n+        NewPipe.init(DownloaderTestImpl.getInstance());\n+        extractor = (BandcampFeaturedExtractor) bandcamp\n+                .getKioskList().getDefaultKioskExtractor();\n+    }\n+\n+    @Test\n+    public void testFeaturedCount() throws ExtractionException, IOException {\n+        List<InfoItem> list = extractor.getInitialPage().getItems();\n+        assertTrue(list.size() > 1);\n+    }\n+\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c239371f4cb8b781827a06eaa827e0b328f89b4"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQyODg5Mg==", "bodyText": "You should test all public methods of a PlaylistExtractor, and test only one channel per (sub)class.", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r411428892", "createdAt": "2020-04-20T14:34:31Z", "author": {"login": "wb9688"}, "path": "extractor/src/test/java/org/schabi/newpipe/extractor/services/bandcamp/BandcampPlaylistExtractorTest.java", "diffHunk": "@@ -0,0 +1,91 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.schabi.newpipe.DownloaderTestImpl;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ContentNotAvailableException;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.playlist.PlaylistExtractor;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampPlaylistExtractor;\n+import org.schabi.newpipe.extractor.stream.StreamInfoItem;\n+\n+import java.io.IOException;\n+import java.util.List;\n+\n+import static org.junit.Assert.*;\n+import static org.schabi.newpipe.extractor.ServiceList.bandcamp;\n+\n+/**\n+ * Tests for {@link BandcampPlaylistExtractor}\n+ */\n+public class BandcampPlaylistExtractorTest {\n+\n+    @BeforeClass\n+    public static void setUp() {\n+        NewPipe.init(DownloaderTestImpl.getInstance());\n+    }\n+\n+    /**\n+     * Test whether playlists contain the correct amount of items\n+     */\n+    @Test\n+    public void testCount() throws ExtractionException, IOException {\n+        PlaylistExtractor extractor = bandcamp.getPlaylistExtractor(\"https://macbenson.bandcamp.com/album/coming-of-age\");\n+        extractor.fetchPage();\n+\n+        assertEquals(5, extractor.getStreamCount());\n+    }\n+\n+    /**\n+     * Tests whether different stream thumbnails (track covers) get loaded correctly\n+     */\n+    @Test\n+    public void testDifferentTrackCovers() throws ExtractionException, IOException {\n+        PlaylistExtractor extractor = bandcamp.getPlaylistExtractor(\"https://zachbensonarchive.bandcamp.com/album/results-of-boredom\");\n+        extractor.fetchPage();\n+\n+        List<StreamInfoItem> l = extractor.getInitialPage().getItems();\n+        assertEquals(extractor.getThumbnailUrl(), l.get(0).getThumbnailUrl());\n+        assertNotEquals(extractor.getThumbnailUrl(), l.get(5).getThumbnailUrl());\n+    }\n+\n+    /**\n+     * Tests that no attempt to load every track's cover individually is made\n+     */\n+    @Test(timeout = 10000L)\n+    public void testDifferentTrackCoversDuration() throws ExtractionException, IOException {\n+        PlaylistExtractor extractor = bandcamp.getPlaylistExtractor(\"https://infiniteammo.bandcamp.com/album/night-in-the-woods-vol-1-at-the-end-of-everything\");\n+        extractor.fetchPage();\n+\n+        /* All tracks in this album have the same cover art, but I don't know any albums with more than 10 tracks\n+         * that has at least one track with a cover art different from the rest.\n+         */\n+        List<StreamInfoItem> l = extractor.getInitialPage().getItems();\n+        assertEquals(extractor.getThumbnailUrl(), l.get(0).getThumbnailUrl());\n+        assertEquals(extractor.getThumbnailUrl(), l.get(5).getThumbnailUrl());\n+    }\n+\n+    /**\n+     * Test playlists with locked content\n+     */\n+    @Test(expected = ContentNotAvailableException.class)\n+    public void testLockedContent() throws ExtractionException, IOException {\n+        PlaylistExtractor extractor = bandcamp.getPlaylistExtractor(\"https://billwurtz.bandcamp.com/album/high-enough\");\n+        extractor.fetchPage();\n+    }\n+\n+    /**\n+     * Test playlist with just one track\n+     */\n+    @Test\n+    public void testSingleStreamPlaylist() throws ExtractionException, IOException {\n+        PlaylistExtractor extractor = bandcamp.getPlaylistExtractor(\"https://zachjohnson1.bandcamp.com/album/endless\");\n+        extractor.fetchPage();\n+\n+        assertEquals(1, extractor.getStreamCount());\n+\n+    }\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c239371f4cb8b781827a06eaa827e0b328f89b4"}, "originalPosition": 91}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQyOTMzNw==", "bodyText": "You should test all public methods of a KioskExtractor", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r411429337", "createdAt": "2020-04-20T14:35:07Z", "author": {"login": "wb9688"}, "path": "extractor/src/test/java/org/schabi/newpipe/extractor/services/bandcamp/BandcampRadioExtractorTest.java", "diffHunk": "@@ -0,0 +1,39 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.schabi.newpipe.DownloaderTestImpl;\n+import org.schabi.newpipe.extractor.InfoItem;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampRadioExtractor;\n+\n+import java.io.IOException;\n+import java.util.List;\n+\n+import static org.junit.Assert.assertTrue;\n+import static org.schabi.newpipe.extractor.ServiceList.bandcamp;\n+\n+/**\n+ * Tests for {@link BandcampRadioExtractor}\n+ */\n+public class BandcampRadioExtractorTest {\n+\n+    private static BandcampRadioExtractor extractor;\n+\n+    @BeforeClass\n+    public static void setUp() throws ExtractionException, IOException {\n+        NewPipe.init(DownloaderTestImpl.getInstance());\n+        extractor = (BandcampRadioExtractor) bandcamp\n+                .getKioskList()\n+                .getExtractorById(\"Radio\", null);\n+    }\n+\n+    @Test\n+    public void testRadioCount() throws ExtractionException, IOException {\n+        List<InfoItem> list = bandcamp.getKioskList().getExtractorById(\"Radio\", null).getInitialPage().getItems();\n+        assertTrue(list.size() > 300);\n+    }\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c239371f4cb8b781827a06eaa827e0b328f89b4"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQzMzExMA==", "bodyText": "You should test all public methods of a StreamExtractor", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r411433110", "createdAt": "2020-04-20T14:39:57Z", "author": {"login": "wb9688"}, "path": "extractor/src/test/java/org/schabi/newpipe/extractor/services/bandcamp/BandcampRadioStreamExtractorTest.java", "diffHunk": "@@ -0,0 +1,37 @@\n+package org.schabi.newpipe.extractor.services.bandcamp;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.schabi.newpipe.DownloaderTestImpl;\n+import org.schabi.newpipe.extractor.Extractor;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampRadioStreamExtractor;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampStreamExtractor;\n+\n+import java.io.IOException;\n+\n+import static org.junit.Assert.*;\n+import static org.schabi.newpipe.extractor.ServiceList.bandcamp;\n+\n+public class BandcampRadioStreamExtractorTest {\n+\n+    @BeforeClass\n+    public static void setUp() {\n+        NewPipe.init(DownloaderTestImpl.getInstance());\n+    }\n+\n+    @Test\n+    public void testGettingCorrectStreamExtractor() throws ExtractionException {\n+        assertTrue(bandcamp.getStreamExtractor(\"https://bandcamp.com/?show=3\") instanceof BandcampRadioStreamExtractor);\n+        assertFalse(bandcamp.getStreamExtractor(\"https://zachbenson.bandcamp.com/track/deflated\") instanceof BandcampRadioStreamExtractor);\n+    }\n+\n+    @Test\n+    public void testExtracting() throws ExtractionException, IOException {\n+        BandcampRadioStreamExtractor e = (BandcampRadioStreamExtractor) bandcamp.getStreamExtractor(\"https://bandcamp.com/?show=230\");\n+        e.fetchPage();\n+        assertEquals(\"Sound Movements\", e.getName());\n+        assertEquals(\"Andrew Jervis\", e.getUploaderName());\n+    }\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c239371f4cb8b781827a06eaa827e0b328f89b4"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQzNDI5Nw==", "bodyText": "Remove this test. It should be handled by returning false in onAcceptUrl() in the appropriate LinkHandler", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r411434297", "createdAt": "2020-04-20T14:41:22Z", "author": {"login": "wb9688"}, "path": "extractor/src/test/java/org/schabi/newpipe/extractor/services/bandcamp/BandcampStreamExtractorTest.java", "diffHunk": "@@ -0,0 +1,98 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.schabi.newpipe.DownloaderTestImpl;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampStreamExtractor;\n+import org.schabi.newpipe.extractor.stream.StreamExtractor;\n+\n+import java.io.IOException;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n+import static org.schabi.newpipe.extractor.ServiceList.bandcamp;\n+\n+public class BandcampStreamExtractorTest {\n+\n+    private static BandcampStreamExtractor extractor;\n+\n+    @BeforeClass\n+    public static void setUp() throws Exception {\n+        NewPipe.init(DownloaderTestImpl.getInstance());\n+        extractor = (BandcampStreamExtractor) bandcamp\n+                .getStreamExtractor(\"https://zachbenson.bandcamp.com/track/kitchen\");\n+        extractor.fetchPage();\n+    }\n+\n+    @Test(expected = ExtractionException.class)\n+    public void testAlbum() throws ExtractionException {\n+        bandcamp.getStreamExtractor(\"https://zachbenson.bandcamp.com/album/prom\");\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c239371f4cb8b781827a06eaa827e0b328f89b4"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQzNTE4MQ==", "bodyText": "See above", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r411435181", "createdAt": "2020-04-20T14:42:32Z", "author": {"login": "wb9688"}, "path": "extractor/src/test/java/org/schabi/newpipe/extractor/services/bandcamp/BandcampStreamExtractorTest.java", "diffHunk": "@@ -0,0 +1,98 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.schabi.newpipe.DownloaderTestImpl;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampStreamExtractor;\n+import org.schabi.newpipe.extractor.stream.StreamExtractor;\n+\n+import java.io.IOException;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n+import static org.schabi.newpipe.extractor.ServiceList.bandcamp;\n+\n+public class BandcampStreamExtractorTest {\n+\n+    private static BandcampStreamExtractor extractor;\n+\n+    @BeforeClass\n+    public static void setUp() throws Exception {\n+        NewPipe.init(DownloaderTestImpl.getInstance());\n+        extractor = (BandcampStreamExtractor) bandcamp\n+                .getStreamExtractor(\"https://zachbenson.bandcamp.com/track/kitchen\");\n+        extractor.fetchPage();\n+    }\n+\n+    @Test(expected = ExtractionException.class)\n+    public void testAlbum() throws ExtractionException {\n+        bandcamp.getStreamExtractor(\"https://zachbenson.bandcamp.com/album/prom\");\n+    }\n+\n+    @Test\n+    public void testServiceId() {\n+    }\n+\n+    @Test\n+    public void testName() throws ParsingException {\n+        assertEquals(\"kitchen\", extractor.getName());\n+    }\n+\n+    @Test\n+    public void testUrl() throws ParsingException {\n+        assertEquals(\"https://zachbenson.bandcamp.com/track/kitchen\", extractor.getUrl());\n+    }\n+\n+    @Test\n+    public void testArtistUrl() throws ParsingException {\n+        assertEquals(\"https://zachbenson.bandcamp.com/\", extractor.getUploaderUrl());\n+    }\n+\n+    @Test\n+    public void testDescription() {\n+        assertEquals(831, extractor.getDescription().getContent().length());\n+    }\n+\n+    @Test\n+    public void testArtistProfilePicture() {\n+        String url = extractor.getUploaderAvatarUrl();\n+        assertTrue(url.contains(\"://f4.bcbits.com/img/\") && url.endsWith(\".jpg\"));\n+    }\n+\n+    @Test\n+    public void testNoArtistProfilePicture() throws ExtractionException {\n+        assertEquals(\"\", bandcamp.getStreamExtractor(\"https://powertothequeerkids.bandcamp.com/track/human-nature\").getUploaderAvatarUrl());\n+    }\n+\n+    @Test\n+    public void testAudioStream() {\n+        assertTrue(extractor.getAudioStreams().get(0).getUrl().contains(\"bcbits.com/stream\"));\n+        assertEquals(1, extractor.getAudioStreams().size());\n+    }\n+\n+    @Test(expected = ParsingException.class)\n+    public void testInvalidUrl() throws ExtractionException {\n+        bandcamp.getStreamExtractor(\"https://bandcamp.com\");\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c239371f4cb8b781827a06eaa827e0b328f89b4"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTQzNjEzNg==", "bodyText": "Please implement this test in a similar way as YoutubeSearchExtractorTest currently does", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r411436136", "createdAt": "2020-04-20T14:43:45Z", "author": {"login": "wb9688"}, "path": "extractor/src/test/java/org/schabi/newpipe/extractor/services/bandcamp/BandcampSearchExtractorTest.java", "diffHunk": "@@ -0,0 +1,105 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.schabi.newpipe.DownloaderTestImpl;\n+import org.schabi.newpipe.extractor.Extractor;\n+import org.schabi.newpipe.extractor.InfoItem;\n+import org.schabi.newpipe.extractor.ListExtractor;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.playlist.PlaylistInfoItem;\n+import org.schabi.newpipe.extractor.search.SearchExtractor;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampChannelInfoItemExtractor;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampPlaylistInfoItemExtractor;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampSearchExtractor;\n+\n+import java.io.IOException;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n+import static org.schabi.newpipe.extractor.ServiceList.bandcamp;\n+\n+/**\n+ * Test for {@link BandcampSearchExtractor}\n+ */\n+public class BandcampSearchExtractorTest {\n+\n+    private static BandcampSearchExtractor extractor;\n+\n+    @BeforeClass\n+    public static void setUp() {\n+        NewPipe.init(DownloaderTestImpl.getInstance());\n+\n+    }\n+\n+    /**\n+     * Tests whether searching bandcamp for \"best friend's basement\" returns\n+     * the accordingly named song by Zach Benson\n+     */\n+    @Test\n+    public void testStreamSearch() throws ExtractionException, IOException {\n+        SearchExtractor extractor = bandcamp.getSearchExtractor(\"best friend's basement\");\n+\n+        ListExtractor.InfoItemsPage<InfoItem> page = extractor.getInitialPage();\n+        InfoItem bestFriendsBasement = page.getItems().get(0);\n+\n+        // The track by Zach Benson should be the first result, no?\n+        assertEquals(\"Best Friend's Basement\", bestFriendsBasement.getName());\n+        assertTrue(bestFriendsBasement.getThumbnailUrl().endsWith(\".jpg\"));\n+        assertTrue(bestFriendsBasement.getThumbnailUrl().contains(\"f4.bcbits.com/img/\"));\n+        assertEquals(InfoItem.InfoType.STREAM, bestFriendsBasement.getInfoType());\n+    }\n+\n+    /**\n+     * Tests whether searching bandcamp for \"C418\" returns the artist's profile\n+     */\n+    @Test\n+    public void testChannelSearch() throws ExtractionException, IOException {\n+        SearchExtractor extractor = bandcamp.getSearchExtractor(\"C418\");\n+        InfoItem c418 = extractor.getInitialPage()\n+                .getItems().get(0);\n+\n+        // C418's artist profile should be the first result, no?\n+        assertEquals(\"C418\", c418.getName());\n+        assertTrue(c418.getThumbnailUrl().endsWith(\".jpg\"));\n+        assertTrue(c418.getThumbnailUrl().contains(\"f4.bcbits.com/img/\"));\n+        assertEquals(\"https://c418.bandcamp.com\", c418.getUrl());\n+\n+    }\n+\n+    /**\n+     * Tests whether searching bandcamp for \"minecraft volume alpha\" returns the corresponding album\n+     */\n+    @Test\n+    public void testAlbumSearch() throws ExtractionException, IOException {\n+        SearchExtractor extractor = bandcamp.getSearchExtractor(\"minecraft volume alpha\");\n+        InfoItem minecraft = extractor.getInitialPage()\n+                .getItems().get(0);\n+\n+        // Minecraft volume alpha should be the first result, no?\n+        assertEquals(\"Minecraft - Volume Alpha\", minecraft.getName());\n+        assertTrue(minecraft.getThumbnailUrl().endsWith(\".jpg\"));\n+        assertTrue(minecraft.getThumbnailUrl().contains(\"f4.bcbits.com/img/\"));\n+        assertEquals(\"https://c418.bandcamp.com/album/minecraft-volume-alpha\", minecraft.getUrl());\n+\n+        // Verify that playlist tracks counts get extracted correctly\n+        assertEquals(24, ((PlaylistInfoItem) minecraft).getStreamCount());\n+\n+    }\n+\n+    /**\n+     * Tests searches with multiple pages\n+     */\n+    @Test\n+    public void testMultiplePages() throws ExtractionException, IOException {\n+        // A query practically guaranteed to have the maximum amount of pages\n+        SearchExtractor extractor = bandcamp.getSearchExtractor(\"e\");\n+\n+        assertEquals(\"https://bandcamp.com/search?q=e&page=2\", extractor.getInitialPage().getNextPageUrl());\n+\n+        assertEquals(\"https://bandcamp.com/search?q=e&page=3\", extractor.getPage(extractor.getNextPageUrl()).getNextPageUrl());\n+    }\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c239371f4cb8b781827a06eaa827e0b328f89b4"}, "originalPosition": 105}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ac7cd50d1a49e4a2e8eda13094bc40c46231d787", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/ac7cd50d1a49e4a2e8eda13094bc40c46231d787", "committedDate": "2020-04-20T19:40:12Z", "message": "Bandcamp capitalization\n\nCo-Authored-By: wb9688 <46277131+wb9688@users.noreply.github.com>"}, "afterCommit": {"oid": "51eeff6638934bae36158596b53d82782cc2b394", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/51eeff6638934bae36158596b53d82782cc2b394", "committedDate": "2020-04-20T19:40:54Z", "message": "Bandcamp capitalization\n\nCo-Authored-By: wb9688 <46277131+wb9688@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b100b9873ff1e6177ad53510ad4b39dd92a78ff7", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/b100b9873ff1e6177ad53510ad4b39dd92a78ff7", "committedDate": "2020-04-20T19:53:04Z", "message": "Bandcmap: Use nanojson fork instead of org.json"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "51eeff6638934bae36158596b53d82782cc2b394", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/51eeff6638934bae36158596b53d82782cc2b394", "committedDate": "2020-04-20T19:40:54Z", "message": "Bandcamp capitalization\n\nCo-Authored-By: wb9688 <46277131+wb9688@users.noreply.github.com>"}, "afterCommit": {"oid": "b100b9873ff1e6177ad53510ad4b39dd92a78ff7", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/b100b9873ff1e6177ad53510ad4b39dd92a78ff7", "committedDate": "2020-04-20T19:53:04Z", "message": "Bandcmap: Use nanojson fork instead of org.json"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c133190c53ab9df70d3a809fd94c6e59dbba73fc", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/c133190c53ab9df70d3a809fd94c6e59dbba73fc", "committedDate": "2020-04-20T19:55:35Z", "message": "Bandcamp capitalization"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67de0285e155f41c6810305b8dfe135da20086df", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/67de0285e155f41c6810305b8dfe135da20086df", "committedDate": "2020-04-20T20:03:29Z", "message": "Bandcamp: Generate query JSON in a proper way"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "433d72c26a9b96527ab02bc7827bb8534f53ae0b", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/433d72c26a9b96527ab02bc7827bb8534f53ae0b", "committedDate": "2020-04-20T20:04:10Z", "message": "Depend on nanojson fork in timeago-parser"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00c03330596b00b2c6246cc29b5dccd84df1d7d5", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/00c03330596b00b2c6246cc29b5dccd84df1d7d5", "committedDate": "2020-04-20T20:41:44Z", "message": "Bandcamp: Fetch channelInfo in onFetchPage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82099592c72fff0f5aac77e0cd8d5b67269ff70c", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/82099592c72fff0f5aac77e0cd8d5b67269ff70c", "committedDate": "2020-04-20T20:44:35Z", "message": "Bandcamp: Move code from SearchExtractor to InfoItemExtractors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "965bce00cf61fb06513b6bbbc79e352dde828956", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/965bce00cf61fb06513b6bbbc79e352dde828956", "committedDate": "2020-04-20T20:44:45Z", "message": "Bandcamp stream extractor: return NO_AGE_LIMIT"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c39dfc8e77667ee0cb30e8a998cf4688bae65494", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/c39dfc8e77667ee0cb30e8a998cf4688bae65494", "committedDate": "2020-04-20T20:32:55Z", "message": "Bandcamp stream extractor: return NO_AGE_LIMIT"}, "afterCommit": {"oid": "965bce00cf61fb06513b6bbbc79e352dde828956", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/965bce00cf61fb06513b6bbbc79e352dde828956", "committedDate": "2020-04-20T20:44:45Z", "message": "Bandcamp stream extractor: return NO_AGE_LIMIT"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9201e0d3ea40dbbe0ae5e9e3d713365125e823c6", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/9201e0d3ea40dbbe0ae5e9e3d713365125e823c6", "committedDate": "2020-04-20T20:46:54Z", "message": "Don't declare exceptions that can't actually be thrown"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10ae3db1184036e79c311583a3a0f2a6af5df6ad", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/10ae3db1184036e79c311583a3a0f2a6af5df6ad", "committedDate": "2020-04-20T21:03:12Z", "message": "Bandcamp javadoc: Replace br tags with p tags"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5fdabb88ebbbae889f1247719cda568e6c1aa872", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/5fdabb88ebbbae889f1247719cda568e6c1aa872", "committedDate": "2020-04-20T21:06:41Z", "message": "Bandcamp channel extractor: package-private access for getImageUrl(\u2026)"}, "afterCommit": {"oid": "f18451fb32f448d74041c56a125d658a5c81b11a", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/f18451fb32f448d74041c56a125d658a5c81b11a", "committedDate": "2020-04-20T21:07:40Z", "message": "Bandcamp channel extractor: package-private access for internal methods"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c70dab8c5fe978d74b381bdc92915222bd928ea", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/8c70dab8c5fe978d74b381bdc92915222bd928ea", "committedDate": "2020-04-20T21:11:16Z", "message": "Bandcamp search query handler factory: inline variable"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f18451fb32f448d74041c56a125d658a5c81b11a", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/f18451fb32f448d74041c56a125d658a5c81b11a", "committedDate": "2020-04-20T21:07:40Z", "message": "Bandcamp channel extractor: package-private access for internal methods"}, "afterCommit": {"oid": "648198ffa19298b423599cc4429139a1df336ea5", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/648198ffa19298b423599cc4429139a1df336ea5", "committedDate": "2020-04-20T21:11:21Z", "message": "Bandcamp channel extractor: package-private access for internal methods"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5e251c82fdd61ba1187d5615364065f55212a75", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/b5e251c82fdd61ba1187d5615364065f55212a75", "committedDate": "2020-04-20T21:12:43Z", "message": "Bandcamp channel extractor: package-private access for getImageUrl(\u2026)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "648198ffa19298b423599cc4429139a1df336ea5", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/648198ffa19298b423599cc4429139a1df336ea5", "committedDate": "2020-04-20T21:11:21Z", "message": "Bandcamp channel extractor: package-private access for internal methods"}, "afterCommit": {"oid": "b5e251c82fdd61ba1187d5615364065f55212a75", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/b5e251c82fdd61ba1187d5615364065f55212a75", "committedDate": "2020-04-20T21:12:43Z", "message": "Bandcamp channel extractor: package-private access for getImageUrl(\u2026)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5009d9f53b762af578b5b0cd4b932869e62c6c7a", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/5009d9f53b762af578b5b0cd4b932869e62c6c7a", "committedDate": "2020-04-20T21:25:00Z", "message": "Bandcamp tests: remove certain tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f71bd29d58be131bb3783607a3395251fdb4cd29", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/f71bd29d58be131bb3783607a3395251fdb4cd29", "committedDate": "2020-04-20T21:52:12Z", "message": "Bandcamp playlist extractor: add more tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9bc7a470abb3189b45d147b6f09ceb54338bf1d5", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/9bc7a470abb3189b45d147b6f09ceb54338bf1d5", "committedDate": "2020-04-26T21:02:14Z", "message": "Replace fori with foreach loop"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3e8e1c70ed60d3b2e622d4b50eb461d289e9601", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/a3e8e1c70ed60d3b2e622d4b50eb461d289e9601", "committedDate": "2020-04-26T21:05:56Z", "message": "Bandcamp: move own methods to helper class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7b046db9d441e7bbd2ae49336cd623817ade212", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/e7b046db9d441e7bbd2ae49336cd623817ade212", "committedDate": "2020-04-26T21:12:43Z", "message": "Merge remote-tracking branch 'origin/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fff21caa87dfe6fcac5edee14a222d18e5d68618", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/fff21caa87dfe6fcac5edee14a222d18e5d68618", "committedDate": "2020-05-25T16:53:10Z", "message": "Fix Bandcamp no avatar test\n\nI own the bandcamp artist account called \"NewPipeExtractorTest\", so it\nshouldn't break again."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "692b2d06f48d469f965b74093c14060a77f6c555", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/692b2d06f48d469f965b74093c14060a77f6c555", "committedDate": "2020-05-25T16:53:15Z", "message": "Bandcamp: read info item data in place and not in advance"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e08256ebc6ac71f3d1b3d94db1f81359e3e69cb9", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/e08256ebc6ac71f3d1b3d94db1f81359e3e69cb9", "committedDate": "2020-05-25T17:17:27Z", "message": "Remove \"url cleanup\" in Bandcamp link handlers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89b0639faa9948befa7f8c651a21e3d2e415b826", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/89b0639faa9948befa7f8c651a21e3d2e415b826", "committedDate": "2020-05-25T18:22:23Z", "message": "New Bandcamp tests for channel extractor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd955c7f0c6920c47ee6d732c75463aaaa28aab8", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/dd955c7f0c6920c47ee6d732c75463aaaa28aab8", "committedDate": "2020-06-03T19:13:40Z", "message": "Merge branch 'origin/dev' into dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fa9d920a9e17b7703bed8fde5cd4db4be8705aa", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/9fa9d920a9e17b7703bed8fde5cd4db4be8705aa", "committedDate": "2020-06-03T19:35:11Z", "message": "Bandcamp: Implement new methods required due to interface changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3940138fc51306c9ad9010e5776f313bf5d919e8", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/3940138fc51306c9ad9010e5776f313bf5d919e8", "committedDate": "2020-06-03T20:41:27Z", "message": "Fix Bandcamp capitalization in one more spot"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de776561b0eeff079f614a97a2ecf1f46c6a1581", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/de776561b0eeff079f614a97a2ecf1f46c6a1581", "committedDate": "2020-06-04T10:02:18Z", "message": "Bandcamp: fix loading uploader from streams in search"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f6c00f8d81d16de1b2f08a72452ebc5ad03c88c", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/8f6c00f8d81d16de1b2f08a72452ebc5ad03c88c", "committedDate": "2020-06-04T10:12:20Z", "message": "Use default test in BandcampSearchExtractorTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e98bff8ae96f498987add5fbd182385f0d9899a2", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/e98bff8ae96f498987add5fbd182385f0d9899a2", "committedDate": "2020-06-04T10:30:53Z", "message": "Improved Bandcamp radio stream extractor tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6822fe3dc8c1502c7dd83d0a0dcd6154ce505cfd", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/6822fe3dc8c1502c7dd83d0a0dcd6154ce505cfd", "committedDate": "2020-06-04T11:03:16Z", "message": "Bandcamp: Get Stream upload date"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1be20ceeec6a06aa1030f3912545428e2137397c", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/1be20ceeec6a06aa1030f3912545428e2137397c", "committedDate": "2020-06-04T12:09:21Z", "message": "Bandcamp: parse date"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34b6928124bd0860061deea2e38cbd24dd40085c", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/34b6928124bd0860061deea2e38cbd24dd40085c", "committedDate": "2020-06-04T12:25:38Z", "message": "Don't print stacktrace before throwing new exception"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0NDEyMzY4", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#pullrequestreview-424412368", "createdAt": "2020-06-04T12:57:21Z", "commit": {"oid": "34b6928124bd0860061deea2e38cbd24dd40085c"}, "state": "DISMISSED", "comments": {"totalCount": 25, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxMjo1NzoyMVrOGfEbgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxMzozMzo1MlrOGfF9DQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIzMTYxOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        if (list.get(i) == null || list.get(i).isEmpty() || list.get(i).equals(\"null\")) {\n          \n          \n            \n                        if (Utils.isNullOrEmpty(list.get(i)) || list.get(i).equals(\"null\")) {", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r435231619", "createdAt": "2020-06-04T12:57:21Z", "author": {"login": "B0pol"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampExtractorHelper.java", "diffHunk": "@@ -0,0 +1,144 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import com.grack.nanojson.JsonObject;\n+import com.grack.nanojson.JsonParser;\n+import com.grack.nanojson.JsonParserException;\n+import com.grack.nanojson.JsonWriter;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.exceptions.ReCaptchaException;\n+\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+\n+public class BandcampExtractorHelper {\n+\n+    /**\n+     * <p>Get JSON behind <code>var $variable = </code> out of web page</p>\n+     *\n+     * <p>Originally a part of bandcampDirect.</p>\n+     *\n+     * @param html     The HTML where the JSON we're looking for is stored inside a\n+     *                 variable inside some JavaScript block\n+     * @param variable Name of the variable\n+     * @return The JsonObject stored in the variable with this name\n+     */\n+    public static JsonObject getJSONFromJavaScriptVariables(String html, String variable) throws JsonParserException, ArrayIndexOutOfBoundsException, ParsingException {\n+\n+        String[] part = html.split(\"var \" + variable + \" = \");\n+\n+        String firstHalfGone = part[1];\n+\n+        firstHalfGone = firstHalfGone.replaceAll(\"\\\" \\\\+ \\\"\", \"\");\n+\n+        int position = -1;\n+        int level = 0;\n+        for (char character : firstHalfGone.toCharArray()) {\n+            position++;\n+\n+            switch (character) {\n+                case '{':\n+                    level++;\n+                    continue;\n+                case '}':\n+                    level--;\n+                    if (level == 0) {\n+                        return JsonParser.object().from(firstHalfGone.substring(0, position + 1)\n+                                .replaceAll(\" {4}//.+\", \"\") // Remove \"for the curious\" in JSON\n+                                .replaceAll(\"// xxx: note - don't internationalize this variable\", \"\") // Remove this comment\n+                        );\n+                    }\n+            }\n+        }\n+\n+        throw new ParsingException(\"Unexpected HTML: JSON never ends\");\n+    }\n+\n+    /**\n+     * Translate all these parameters together to the URL of the corresponding album or track\n+     * using the mobile api\n+     */\n+    public static String getStreamUrlFromIds(long bandId, long itemId, String itemType) throws ParsingException {\n+\n+        try {\n+            String jsonString = NewPipe.getDownloader().get(\n+                    \"https://bandcamp.com/api/mobile/22/tralbum_details?band_id=\" + bandId\n+                            + \"&tralbum_id=\" + itemId + \"&tralbum_type=\" + itemType.substring(0, 1))\n+                    .responseBody();\n+\n+            return JsonParser.object().from(jsonString).getString(\"bandcamp_url\").replace(\"http://\", \"https://\");\n+\n+        } catch (JsonParserException | ReCaptchaException | IOException e) {\n+            throw new ParsingException(\"Ids could not be translated to URL\", e);\n+        }\n+\n+    }\n+\n+    /**\n+     * Concatenate all non-null and non-empty strings together while separating them using\n+     * the comma parameter\n+     */\n+    public static String smartConcatenate(String[] strings, String comma) {\n+        StringBuilder result = new StringBuilder();\n+\n+        // Remove empty strings\n+        ArrayList<String> list = new ArrayList<>(Arrays.asList(strings));\n+        for (int i = list.size() - 1; i >= 0; i--) {\n+            if (list.get(i) == null || list.get(i).isEmpty() || list.get(i).equals(\"null\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34b6928124bd0860061deea2e38cbd24dd40085c"}, "originalPosition": 90}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIzMjg4NQ==", "bodyText": "Use the real date and compare if they are equal, not only the day\nSee the same youtube test", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r435232885", "createdAt": "2020-06-04T12:59:23Z", "author": {"login": "B0pol"}, "path": "extractor/src/test/java/org/schabi/newpipe/extractor/services/bandcamp/BandcampStreamExtractorTest.java", "diffHunk": "@@ -0,0 +1,100 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.schabi.newpipe.DownloaderTestImpl;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampExtractorHelper;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampStreamExtractor;\n+import org.schabi.newpipe.extractor.stream.StreamExtractor;\n+\n+import java.io.IOException;\n+import java.util.Calendar;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n+import static org.schabi.newpipe.extractor.ServiceList.Bandcamp;\n+\n+public class BandcampStreamExtractorTest {\n+\n+    private static BandcampStreamExtractor extractor;\n+\n+    @BeforeClass\n+    public static void setUp() throws Exception {\n+        NewPipe.init(DownloaderTestImpl.getInstance());\n+        extractor = (BandcampStreamExtractor) Bandcamp\n+                .getStreamExtractor(\"https://zachbenson.bandcamp.com/track/kitchen\");\n+        extractor.fetchPage();\n+    }\n+\n+    @Test\n+    public void testServiceId() {\n+    }\n+\n+    @Test\n+    public void testName() throws ParsingException {\n+        assertEquals(\"kitchen\", extractor.getName());\n+    }\n+\n+    @Test\n+    public void testUrl() throws ParsingException {\n+        assertEquals(\"https://zachbenson.bandcamp.com/track/kitchen\", extractor.getUrl());\n+    }\n+\n+    @Test\n+    public void testArtistUrl() throws ParsingException {\n+        assertEquals(\"https://zachbenson.bandcamp.com/\", extractor.getUploaderUrl());\n+    }\n+\n+    @Test\n+    public void testDescription() {\n+        assertEquals(831, extractor.getDescription().getContent().length());\n+    }\n+\n+    @Test\n+    public void testArtistProfilePicture() {\n+        String url = extractor.getUploaderAvatarUrl();\n+        assertTrue(url.contains(\"://f4.bcbits.com/img/\") && url.endsWith(\".jpg\"));\n+    }\n+\n+    @Test\n+    public void testUploadDate() throws ParsingException {\n+        assertEquals(270, extractor.getUploadDate().date().get(Calendar.DAY_OF_YEAR));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34b6928124bd0860061deea2e38cbd24dd40085c"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIzMzczMg==", "bodyText": "you should not do this, the content can change and 1 character less or more will break the change. You should test with Description.getContent().contains(\"Something that will probably never be edited\");", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r435233732", "createdAt": "2020-06-04T13:00:25Z", "author": {"login": "B0pol"}, "path": "extractor/src/test/java/org/schabi/newpipe/extractor/services/bandcamp/BandcampStreamExtractorTest.java", "diffHunk": "@@ -0,0 +1,100 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.schabi.newpipe.DownloaderTestImpl;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampExtractorHelper;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampStreamExtractor;\n+import org.schabi.newpipe.extractor.stream.StreamExtractor;\n+\n+import java.io.IOException;\n+import java.util.Calendar;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n+import static org.schabi.newpipe.extractor.ServiceList.Bandcamp;\n+\n+public class BandcampStreamExtractorTest {\n+\n+    private static BandcampStreamExtractor extractor;\n+\n+    @BeforeClass\n+    public static void setUp() throws Exception {\n+        NewPipe.init(DownloaderTestImpl.getInstance());\n+        extractor = (BandcampStreamExtractor) Bandcamp\n+                .getStreamExtractor(\"https://zachbenson.bandcamp.com/track/kitchen\");\n+        extractor.fetchPage();\n+    }\n+\n+    @Test\n+    public void testServiceId() {\n+    }\n+\n+    @Test\n+    public void testName() throws ParsingException {\n+        assertEquals(\"kitchen\", extractor.getName());\n+    }\n+\n+    @Test\n+    public void testUrl() throws ParsingException {\n+        assertEquals(\"https://zachbenson.bandcamp.com/track/kitchen\", extractor.getUrl());\n+    }\n+\n+    @Test\n+    public void testArtistUrl() throws ParsingException {\n+        assertEquals(\"https://zachbenson.bandcamp.com/\", extractor.getUploaderUrl());\n+    }\n+\n+    @Test\n+    public void testDescription() {\n+        assertEquals(831, extractor.getDescription().getContent().length());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34b6928124bd0860061deea2e38cbd24dd40085c"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIzNDM2OA==", "bodyText": "useless comment imo", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r435234368", "createdAt": "2020-06-04T13:01:23Z", "author": {"login": "B0pol"}, "path": "extractor/src/test/java/org/schabi/newpipe/extractor/services/bandcamp/BandcampSuggestionExtractorTest.java", "diffHunk": "@@ -0,0 +1,41 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.schabi.newpipe.DownloaderTestImpl;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampSuggestionExtractor;\n+\n+import java.io.IOException;\n+import java.util.List;\n+\n+import static org.junit.Assert.assertTrue;\n+import static org.schabi.newpipe.extractor.ServiceList.Bandcamp;\n+\n+/**\n+ * Tests for {@link BandcampSuggestionExtractor}\n+ */\n+public class BandcampSuggestionExtractorTest {\n+\n+    private static BandcampSuggestionExtractor extractor;\n+\n+    @BeforeClass\n+    public static void setUp() {\n+        NewPipe.init(DownloaderTestImpl.getInstance());\n+        extractor = (BandcampSuggestionExtractor) Bandcamp.getSuggestionExtractor();\n+    }\n+\n+    @Test\n+    public void testSearchExample() throws IOException, ExtractionException {\n+        List<String> c418 = extractor.suggestionList(\"c418\");\n+\n+        // When looking for c418, one should find C418", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34b6928124bd0860061deea2e38cbd24dd40085c"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIzNDYxNg==", "bodyText": "definitely useless comment", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r435234616", "createdAt": "2020-06-04T13:01:42Z", "author": {"login": "B0pol"}, "path": "extractor/src/test/java/org/schabi/newpipe/extractor/services/bandcamp/BandcampStreamLinkHandlerFactoryTest.java", "diffHunk": "@@ -0,0 +1,54 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.schabi.newpipe.DownloaderTestImpl;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.services.bandcamp.linkHandler.BandcampStreamLinkHandlerFactory;\n+\n+import static org.junit.Assert.*;\n+import static org.junit.Assert.assertFalse;\n+\n+/**\n+ * Test for {@link BandcampStreamLinkHandlerFactory}\n+ */\n+public class BandcampStreamLinkHandlerFactoryTest {\n+\n+    private static BandcampStreamLinkHandlerFactory linkHandler;\n+\n+    @BeforeClass\n+    public static void setUp() {\n+        linkHandler = new BandcampStreamLinkHandlerFactory();\n+        NewPipe.init(DownloaderTestImpl.getInstance());\n+    }\n+\n+    @Test\n+    public void testGetRadioUrl() {\n+        assertEquals(\"https://bandcamp.com/?show=1\", linkHandler.getUrl(\"1\"));\n+    }\n+\n+    @Test\n+    public void testGetRadioId() throws ParsingException {\n+        assertEquals(\"2\", linkHandler.getId(\"https://bandcamp.com/?show=2\"));\n+    }\n+\n+    @Test\n+    public void testAcceptUrl() throws ParsingException {\n+        // Tests expecting false\n+        assertFalse(linkHandler.acceptUrl(\"http://interovgm.com/releases/\"));\n+        assertFalse(linkHandler.acceptUrl(\"https://interovgm.com/releases\"));\n+        assertFalse(linkHandler.acceptUrl(\"http://zachbenson.bandcamp.com\"));\n+        assertFalse(linkHandler.acceptUrl(\"https://bandcamp.com\"));\n+        assertFalse(linkHandler.acceptUrl(\"https://zachbenson.bandcamp.com/\"));\n+        assertFalse(linkHandler.acceptUrl(\"https://powertothequeerkids.bandcamp.com/album/power-to-the-queer-kids\"));\n+\n+        // Tests expecting true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34b6928124bd0860061deea2e38cbd24dd40085c"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIzNDY5Mw==", "bodyText": "definitely useless comment", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r435234693", "createdAt": "2020-06-04T13:01:48Z", "author": {"login": "B0pol"}, "path": "extractor/src/test/java/org/schabi/newpipe/extractor/services/bandcamp/BandcampStreamLinkHandlerFactoryTest.java", "diffHunk": "@@ -0,0 +1,54 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.schabi.newpipe.DownloaderTestImpl;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.services.bandcamp.linkHandler.BandcampStreamLinkHandlerFactory;\n+\n+import static org.junit.Assert.*;\n+import static org.junit.Assert.assertFalse;\n+\n+/**\n+ * Test for {@link BandcampStreamLinkHandlerFactory}\n+ */\n+public class BandcampStreamLinkHandlerFactoryTest {\n+\n+    private static BandcampStreamLinkHandlerFactory linkHandler;\n+\n+    @BeforeClass\n+    public static void setUp() {\n+        linkHandler = new BandcampStreamLinkHandlerFactory();\n+        NewPipe.init(DownloaderTestImpl.getInstance());\n+    }\n+\n+    @Test\n+    public void testGetRadioUrl() {\n+        assertEquals(\"https://bandcamp.com/?show=1\", linkHandler.getUrl(\"1\"));\n+    }\n+\n+    @Test\n+    public void testGetRadioId() throws ParsingException {\n+        assertEquals(\"2\", linkHandler.getId(\"https://bandcamp.com/?show=2\"));\n+    }\n+\n+    @Test\n+    public void testAcceptUrl() throws ParsingException {\n+        // Tests expecting false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34b6928124bd0860061deea2e38cbd24dd40085c"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIzNTE3NQ==", "bodyText": "add test for this", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r435235175", "createdAt": "2020-06-04T13:02:31Z", "author": {"login": "B0pol"}, "path": "extractor/src/test/java/org/schabi/newpipe/extractor/services/bandcamp/BandcampStreamExtractorTest.java", "diffHunk": "@@ -0,0 +1,100 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.schabi.newpipe.DownloaderTestImpl;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampExtractorHelper;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampStreamExtractor;\n+import org.schabi.newpipe.extractor.stream.StreamExtractor;\n+\n+import java.io.IOException;\n+import java.util.Calendar;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n+import static org.schabi.newpipe.extractor.ServiceList.Bandcamp;\n+\n+public class BandcampStreamExtractorTest {\n+\n+    private static BandcampStreamExtractor extractor;\n+\n+    @BeforeClass\n+    public static void setUp() throws Exception {\n+        NewPipe.init(DownloaderTestImpl.getInstance());\n+        extractor = (BandcampStreamExtractor) Bandcamp\n+                .getStreamExtractor(\"https://zachbenson.bandcamp.com/track/kitchen\");\n+        extractor.fetchPage();\n+    }\n+\n+    @Test\n+    public void testServiceId() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34b6928124bd0860061deea2e38cbd24dd40085c"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIzNjg3MA==", "bodyText": "remove it as you are testing nothing here. Especially when you are not using inheritance that would make it mandatory.", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r435236870", "createdAt": "2020-06-04T13:05:13Z", "author": {"login": "B0pol"}, "path": "extractor/src/test/java/org/schabi/newpipe/extractor/services/bandcamp/BandcampRadioStreamExtractorTest.java", "diffHunk": "@@ -0,0 +1,109 @@\n+package org.schabi.newpipe.extractor.services.bandcamp;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.schabi.newpipe.DownloaderTestImpl;\n+import org.schabi.newpipe.extractor.Extractor;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampRadioStreamExtractor;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampStreamExtractor;\n+import org.schabi.newpipe.extractor.stream.StreamExtractor;\n+\n+import java.io.IOException;\n+import java.util.Calendar;\n+\n+import static org.junit.Assert.*;\n+import static org.schabi.newpipe.extractor.ServiceList.Bandcamp;\n+\n+public class BandcampRadioStreamExtractorTest {\n+\n+    private static StreamExtractor e;\n+\n+    private static final String SHOW_URL = \"https://bandcamp.com/?show=230\";\n+\n+    @BeforeClass\n+    public static void setUp() throws IOException, ExtractionException {\n+        NewPipe.init(DownloaderTestImpl.getInstance());\n+        e = Bandcamp.getStreamExtractor(SHOW_URL);\n+        e.fetchPage();\n+    }\n+\n+    @Test\n+    public void testGettingCorrectStreamExtractor() throws ExtractionException {\n+        assertTrue(Bandcamp.getStreamExtractor(\"https://bandcamp.com/?show=3\") instanceof BandcampRadioStreamExtractor);\n+        assertFalse(Bandcamp.getStreamExtractor(\"https://zachbenson.bandcamp.com/track/deflated\") instanceof BandcampRadioStreamExtractor);\n+    }\n+\n+    @Test\n+    public void testGetName() throws ParsingException {\n+        assertEquals(\"Sound Movements\", e.getName());\n+    }\n+\n+    @Test\n+    public void testGetUploaderUrl() {\n+    }\n+\n+    @Test\n+    public void testGetUrl() throws ParsingException {\n+        assertEquals(SHOW_URL, e.getUrl());\n+    }\n+\n+    @Test\n+    public void testGetUploaderName() throws ParsingException {\n+        assertEquals(\"Andrew Jervis\", e.getUploaderName());\n+    }\n+\n+    @Test\n+    public void testGetTextualUploadDate() throws ParsingException {\n+        assertEquals(\"16 May 2017\", e.getTextualUploadDate());\n+    }\n+\n+    @Test\n+    public void testUploadDate() throws ParsingException {\n+        assertEquals(136, e.getUploadDate().date().get(Calendar.DAY_OF_YEAR));\n+    }\n+\n+    @Test\n+    public void testGetThumbnailUrl() throws ParsingException {\n+        assertTrue(e.getThumbnailUrl().contains(\"bcbits.com/img\"));\n+    }\n+\n+    @Test\n+    public void testGetUploaderAvatarUrl() throws ParsingException {\n+        assertTrue(e.getUploaderAvatarUrl().contains(\"bandcamp-button\"));\n+\n+    }\n+\n+    @Test\n+    public void testGetDescription() throws ParsingException {\n+        assertEquals(\"Featuring special guests Nick Hakim and Elbows, plus fresh cuts from Eddie Palmieri, KRS One, Ladi6, and Moonchild.\", e.getDescription().getContent());\n+\n+    }\n+\n+    @Test\n+    public void testGetLength() throws ParsingException {\n+        assertEquals(5619, e.getLength());\n+    }\n+\n+    @Test\n+    public void testGetAudioStreams() throws ExtractionException, IOException {\n+        assertEquals(2, e.getAudioStreams().size());\n+    }\n+\n+    @Test\n+    public void testGetLicence() throws ParsingException {\n+        assertEquals(\"\", e.getLicence());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34b6928124bd0860061deea2e38cbd24dd40085c"}, "originalPosition": 97}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIzNjk2OQ==", "bodyText": "same, remove this useless test", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r435236969", "createdAt": "2020-06-04T13:05:23Z", "author": {"login": "B0pol"}, "path": "extractor/src/test/java/org/schabi/newpipe/extractor/services/bandcamp/BandcampRadioStreamExtractorTest.java", "diffHunk": "@@ -0,0 +1,109 @@\n+package org.schabi.newpipe.extractor.services.bandcamp;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.schabi.newpipe.DownloaderTestImpl;\n+import org.schabi.newpipe.extractor.Extractor;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampRadioStreamExtractor;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampStreamExtractor;\n+import org.schabi.newpipe.extractor.stream.StreamExtractor;\n+\n+import java.io.IOException;\n+import java.util.Calendar;\n+\n+import static org.junit.Assert.*;\n+import static org.schabi.newpipe.extractor.ServiceList.Bandcamp;\n+\n+public class BandcampRadioStreamExtractorTest {\n+\n+    private static StreamExtractor e;\n+\n+    private static final String SHOW_URL = \"https://bandcamp.com/?show=230\";\n+\n+    @BeforeClass\n+    public static void setUp() throws IOException, ExtractionException {\n+        NewPipe.init(DownloaderTestImpl.getInstance());\n+        e = Bandcamp.getStreamExtractor(SHOW_URL);\n+        e.fetchPage();\n+    }\n+\n+    @Test\n+    public void testGettingCorrectStreamExtractor() throws ExtractionException {\n+        assertTrue(Bandcamp.getStreamExtractor(\"https://bandcamp.com/?show=3\") instanceof BandcampRadioStreamExtractor);\n+        assertFalse(Bandcamp.getStreamExtractor(\"https://zachbenson.bandcamp.com/track/deflated\") instanceof BandcampRadioStreamExtractor);\n+    }\n+\n+    @Test\n+    public void testGetName() throws ParsingException {\n+        assertEquals(\"Sound Movements\", e.getName());\n+    }\n+\n+    @Test\n+    public void testGetUploaderUrl() {\n+    }\n+\n+    @Test\n+    public void testGetUrl() throws ParsingException {\n+        assertEquals(SHOW_URL, e.getUrl());\n+    }\n+\n+    @Test\n+    public void testGetUploaderName() throws ParsingException {\n+        assertEquals(\"Andrew Jervis\", e.getUploaderName());\n+    }\n+\n+    @Test\n+    public void testGetTextualUploadDate() throws ParsingException {\n+        assertEquals(\"16 May 2017\", e.getTextualUploadDate());\n+    }\n+\n+    @Test\n+    public void testUploadDate() throws ParsingException {\n+        assertEquals(136, e.getUploadDate().date().get(Calendar.DAY_OF_YEAR));\n+    }\n+\n+    @Test\n+    public void testGetThumbnailUrl() throws ParsingException {\n+        assertTrue(e.getThumbnailUrl().contains(\"bcbits.com/img\"));\n+    }\n+\n+    @Test\n+    public void testGetUploaderAvatarUrl() throws ParsingException {\n+        assertTrue(e.getUploaderAvatarUrl().contains(\"bandcamp-button\"));\n+\n+    }\n+\n+    @Test\n+    public void testGetDescription() throws ParsingException {\n+        assertEquals(\"Featuring special guests Nick Hakim and Elbows, plus fresh cuts from Eddie Palmieri, KRS One, Ladi6, and Moonchild.\", e.getDescription().getContent());\n+\n+    }\n+\n+    @Test\n+    public void testGetLength() throws ParsingException {\n+        assertEquals(5619, e.getLength());\n+    }\n+\n+    @Test\n+    public void testGetAudioStreams() throws ExtractionException, IOException {\n+        assertEquals(2, e.getAudioStreams().size());\n+    }\n+\n+    @Test\n+    public void testGetLicence() throws ParsingException {\n+        assertEquals(\"\", e.getLicence());\n+    }\n+\n+    @Test\n+    public void testGetCategory() throws ParsingException {\n+        assertEquals(\"\", e.getCategory());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34b6928124bd0860061deea2e38cbd24dd40085c"}, "originalPosition": 102}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIzNzA3NA==", "bodyText": "same, remove this useless test", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r435237074", "createdAt": "2020-06-04T13:05:33Z", "author": {"login": "B0pol"}, "path": "extractor/src/test/java/org/schabi/newpipe/extractor/services/bandcamp/BandcampRadioStreamExtractorTest.java", "diffHunk": "@@ -0,0 +1,109 @@\n+package org.schabi.newpipe.extractor.services.bandcamp;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.schabi.newpipe.DownloaderTestImpl;\n+import org.schabi.newpipe.extractor.Extractor;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampRadioStreamExtractor;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampStreamExtractor;\n+import org.schabi.newpipe.extractor.stream.StreamExtractor;\n+\n+import java.io.IOException;\n+import java.util.Calendar;\n+\n+import static org.junit.Assert.*;\n+import static org.schabi.newpipe.extractor.ServiceList.Bandcamp;\n+\n+public class BandcampRadioStreamExtractorTest {\n+\n+    private static StreamExtractor e;\n+\n+    private static final String SHOW_URL = \"https://bandcamp.com/?show=230\";\n+\n+    @BeforeClass\n+    public static void setUp() throws IOException, ExtractionException {\n+        NewPipe.init(DownloaderTestImpl.getInstance());\n+        e = Bandcamp.getStreamExtractor(SHOW_URL);\n+        e.fetchPage();\n+    }\n+\n+    @Test\n+    public void testGettingCorrectStreamExtractor() throws ExtractionException {\n+        assertTrue(Bandcamp.getStreamExtractor(\"https://bandcamp.com/?show=3\") instanceof BandcampRadioStreamExtractor);\n+        assertFalse(Bandcamp.getStreamExtractor(\"https://zachbenson.bandcamp.com/track/deflated\") instanceof BandcampRadioStreamExtractor);\n+    }\n+\n+    @Test\n+    public void testGetName() throws ParsingException {\n+        assertEquals(\"Sound Movements\", e.getName());\n+    }\n+\n+    @Test\n+    public void testGetUploaderUrl() {\n+    }\n+\n+    @Test\n+    public void testGetUrl() throws ParsingException {\n+        assertEquals(SHOW_URL, e.getUrl());\n+    }\n+\n+    @Test\n+    public void testGetUploaderName() throws ParsingException {\n+        assertEquals(\"Andrew Jervis\", e.getUploaderName());\n+    }\n+\n+    @Test\n+    public void testGetTextualUploadDate() throws ParsingException {\n+        assertEquals(\"16 May 2017\", e.getTextualUploadDate());\n+    }\n+\n+    @Test\n+    public void testUploadDate() throws ParsingException {\n+        assertEquals(136, e.getUploadDate().date().get(Calendar.DAY_OF_YEAR));\n+    }\n+\n+    @Test\n+    public void testGetThumbnailUrl() throws ParsingException {\n+        assertTrue(e.getThumbnailUrl().contains(\"bcbits.com/img\"));\n+    }\n+\n+    @Test\n+    public void testGetUploaderAvatarUrl() throws ParsingException {\n+        assertTrue(e.getUploaderAvatarUrl().contains(\"bandcamp-button\"));\n+\n+    }\n+\n+    @Test\n+    public void testGetDescription() throws ParsingException {\n+        assertEquals(\"Featuring special guests Nick Hakim and Elbows, plus fresh cuts from Eddie Palmieri, KRS One, Ladi6, and Moonchild.\", e.getDescription().getContent());\n+\n+    }\n+\n+    @Test\n+    public void testGetLength() throws ParsingException {\n+        assertEquals(5619, e.getLength());\n+    }\n+\n+    @Test\n+    public void testGetAudioStreams() throws ExtractionException, IOException {\n+        assertEquals(2, e.getAudioStreams().size());\n+    }\n+\n+    @Test\n+    public void testGetLicence() throws ParsingException {\n+        assertEquals(\"\", e.getLicence());\n+    }\n+\n+    @Test\n+    public void testGetCategory() throws ParsingException {\n+        assertEquals(\"\", e.getCategory());\n+    }\n+\n+    @Test\n+    public void testGetTags() throws ParsingException {\n+        assertEquals(0, e.getTags().size());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34b6928124bd0860061deea2e38cbd24dd40085c"}, "originalPosition": 107}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIzNzIwNg==", "bodyText": "test this", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r435237206", "createdAt": "2020-06-04T13:05:45Z", "author": {"login": "B0pol"}, "path": "extractor/src/test/java/org/schabi/newpipe/extractor/services/bandcamp/BandcampRadioStreamExtractorTest.java", "diffHunk": "@@ -0,0 +1,109 @@\n+package org.schabi.newpipe.extractor.services.bandcamp;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.schabi.newpipe.DownloaderTestImpl;\n+import org.schabi.newpipe.extractor.Extractor;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampRadioStreamExtractor;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampStreamExtractor;\n+import org.schabi.newpipe.extractor.stream.StreamExtractor;\n+\n+import java.io.IOException;\n+import java.util.Calendar;\n+\n+import static org.junit.Assert.*;\n+import static org.schabi.newpipe.extractor.ServiceList.Bandcamp;\n+\n+public class BandcampRadioStreamExtractorTest {\n+\n+    private static StreamExtractor e;\n+\n+    private static final String SHOW_URL = \"https://bandcamp.com/?show=230\";\n+\n+    @BeforeClass\n+    public static void setUp() throws IOException, ExtractionException {\n+        NewPipe.init(DownloaderTestImpl.getInstance());\n+        e = Bandcamp.getStreamExtractor(SHOW_URL);\n+        e.fetchPage();\n+    }\n+\n+    @Test\n+    public void testGettingCorrectStreamExtractor() throws ExtractionException {\n+        assertTrue(Bandcamp.getStreamExtractor(\"https://bandcamp.com/?show=3\") instanceof BandcampRadioStreamExtractor);\n+        assertFalse(Bandcamp.getStreamExtractor(\"https://zachbenson.bandcamp.com/track/deflated\") instanceof BandcampRadioStreamExtractor);\n+    }\n+\n+    @Test\n+    public void testGetName() throws ParsingException {\n+        assertEquals(\"Sound Movements\", e.getName());\n+    }\n+\n+    @Test\n+    public void testGetUploaderUrl() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34b6928124bd0860061deea2e38cbd24dd40085c"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIzNzM5Nw==", "bodyText": "remove this useless comment", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r435237397", "createdAt": "2020-06-04T13:06:03Z", "author": {"login": "B0pol"}, "path": "extractor/src/test/java/org/schabi/newpipe/extractor/services/bandcamp/BandcampPlaylistLinkHandlerFactoryTest.java", "diffHunk": "@@ -0,0 +1,46 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.schabi.newpipe.DownloaderTestImpl;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.services.bandcamp.linkHandler.BandcampPlaylistLinkHandlerFactory;\n+import org.schabi.newpipe.extractor.services.bandcamp.linkHandler.BandcampStreamLinkHandlerFactory;\n+\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertTrue;\n+\n+/**\n+ * Test for {@link BandcampPlaylistLinkHandlerFactory}\n+ */\n+public class BandcampPlaylistLinkHandlerFactoryTest {\n+\n+    private static BandcampPlaylistLinkHandlerFactory linkHandler;\n+\n+    @BeforeClass\n+    public static void setUp() {\n+        linkHandler = new BandcampPlaylistLinkHandlerFactory();\n+        NewPipe.init(DownloaderTestImpl.getInstance());\n+    }\n+\n+    @Test\n+    public void testAcceptUrl() throws ParsingException {\n+        // Tests expecting false\n+        assertFalse(linkHandler.acceptUrl(\"http://interovgm.com/releases/\"));\n+        assertFalse(linkHandler.acceptUrl(\"https://interovgm.com/releases\"));\n+        assertFalse(linkHandler.acceptUrl(\"http://zachbenson.bandcamp.com\"));\n+        assertFalse(linkHandler.acceptUrl(\"https://bandcamp.com\"));\n+        assertFalse(linkHandler.acceptUrl(\"https://zachbenson.bandcamp.com/\"));\n+        assertFalse(linkHandler.acceptUrl(\"https://zachbenson.bandcamp.com/track/kitchen\"));\n+        assertFalse(linkHandler.acceptUrl(\"https://interovgm.com/track/title\"));\n+\n+        // Tests expecting true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34b6928124bd0860061deea2e38cbd24dd40085c"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIzNzQyOQ==", "bodyText": "remove this useless comment", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r435237429", "createdAt": "2020-06-04T13:06:07Z", "author": {"login": "B0pol"}, "path": "extractor/src/test/java/org/schabi/newpipe/extractor/services/bandcamp/BandcampPlaylistLinkHandlerFactoryTest.java", "diffHunk": "@@ -0,0 +1,46 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.schabi.newpipe.DownloaderTestImpl;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.services.bandcamp.linkHandler.BandcampPlaylistLinkHandlerFactory;\n+import org.schabi.newpipe.extractor.services.bandcamp.linkHandler.BandcampStreamLinkHandlerFactory;\n+\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertTrue;\n+\n+/**\n+ * Test for {@link BandcampPlaylistLinkHandlerFactory}\n+ */\n+public class BandcampPlaylistLinkHandlerFactoryTest {\n+\n+    private static BandcampPlaylistLinkHandlerFactory linkHandler;\n+\n+    @BeforeClass\n+    public static void setUp() {\n+        linkHandler = new BandcampPlaylistLinkHandlerFactory();\n+        NewPipe.init(DownloaderTestImpl.getInstance());\n+    }\n+\n+    @Test\n+    public void testAcceptUrl() throws ParsingException {\n+        // Tests expecting false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34b6928124bd0860061deea2e38cbd24dd40085c"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIzNzg2OA==", "bodyText": "remove this useless comment", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r435237868", "createdAt": "2020-06-04T13:06:50Z", "author": {"login": "B0pol"}, "path": "extractor/src/test/java/org/schabi/newpipe/extractor/services/bandcamp/BandcampFeaturedLinkHandlerFactoryTest.java", "diffHunk": "@@ -0,0 +1,52 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.services.bandcamp.linkHandler.BandcampFeaturedLinkHandlerFactory;\n+\n+import static org.junit.Assert.*;\n+\n+/**\n+ * Tests for {@link BandcampFeaturedLinkHandlerFactory}\n+ */\n+public class BandcampFeaturedLinkHandlerFactoryTest {\n+\n+    private static BandcampFeaturedLinkHandlerFactory linkHandler;\n+\n+    @BeforeClass\n+    public static void setUp() {\n+        linkHandler = new BandcampFeaturedLinkHandlerFactory();\n+    }\n+\n+\n+    @Test\n+    public void testAcceptUrl() throws ParsingException {\n+        // Tests expecting true\n+        assertTrue(linkHandler.acceptUrl(\"https://bandcamp.com/?show=1\"));\n+        assertTrue(linkHandler.acceptUrl(\"http://bandcamp.com/?show=2\"));\n+        assertTrue(linkHandler.acceptUrl(\"https://bandcamp.com/api/mobile/24/bootstrap_data\"));\n+        assertTrue(linkHandler.acceptUrl(\"https://bandcamp.com/api/bcweekly/1/list\"));\n+\n+        // Tests expecting false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34b6928124bd0860061deea2e38cbd24dd40085c"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIzNzkwMw==", "bodyText": "remove this useless comment", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r435237903", "createdAt": "2020-06-04T13:06:53Z", "author": {"login": "B0pol"}, "path": "extractor/src/test/java/org/schabi/newpipe/extractor/services/bandcamp/BandcampFeaturedLinkHandlerFactoryTest.java", "diffHunk": "@@ -0,0 +1,52 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.services.bandcamp.linkHandler.BandcampFeaturedLinkHandlerFactory;\n+\n+import static org.junit.Assert.*;\n+\n+/**\n+ * Tests for {@link BandcampFeaturedLinkHandlerFactory}\n+ */\n+public class BandcampFeaturedLinkHandlerFactoryTest {\n+\n+    private static BandcampFeaturedLinkHandlerFactory linkHandler;\n+\n+    @BeforeClass\n+    public static void setUp() {\n+        linkHandler = new BandcampFeaturedLinkHandlerFactory();\n+    }\n+\n+\n+    @Test\n+    public void testAcceptUrl() throws ParsingException {\n+        // Tests expecting true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34b6928124bd0860061deea2e38cbd24dd40085c"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIzOTQyOA==", "bodyText": "remove this useless comment", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r435239428", "createdAt": "2020-06-04T13:09:20Z", "author": {"login": "B0pol"}, "path": "extractor/src/test/java/org/schabi/newpipe/extractor/services/bandcamp/BandcampChannelLinkHandlerFactoryTest.java", "diffHunk": "@@ -0,0 +1,64 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.schabi.newpipe.DownloaderTestImpl;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.services.bandcamp.linkHandler.BandcampChannelLinkHandlerFactory;\n+\n+import static org.junit.Assert.*;\n+import static org.junit.Assert.assertTrue;\n+\n+/**\n+ * Test for {@link BandcampChannelLinkHandlerFactory}\n+ */\n+public class BandcampChannelLinkHandlerFactoryTest {\n+    private static BandcampChannelLinkHandlerFactory linkHandler;\n+\n+    @BeforeClass\n+    public static void setUp() {\n+        linkHandler = new BandcampChannelLinkHandlerFactory();\n+        NewPipe.init(DownloaderTestImpl.getInstance());\n+    }\n+\n+    @Test\n+    public void testAcceptUrl() throws ParsingException {\n+        // Tests expecting true\n+        assertTrue(linkHandler.acceptUrl(\"http://interovgm.com/releases/\"));\n+        assertTrue(linkHandler.acceptUrl(\"https://interovgm.com/releases\"));\n+        assertTrue(linkHandler.acceptUrl(\"http://zachbenson.bandcamp.com\"));\n+        assertTrue(linkHandler.acceptUrl(\"https://zachbenson.bandcamp.com/\"));\n+\n+        // Tests expecting false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34b6928124bd0860061deea2e38cbd24dd40085c"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTIzOTQ4Mw==", "bodyText": "remove this useless comment", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r435239483", "createdAt": "2020-06-04T13:09:25Z", "author": {"login": "B0pol"}, "path": "extractor/src/test/java/org/schabi/newpipe/extractor/services/bandcamp/BandcampChannelLinkHandlerFactoryTest.java", "diffHunk": "@@ -0,0 +1,64 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.schabi.newpipe.DownloaderTestImpl;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.services.bandcamp.linkHandler.BandcampChannelLinkHandlerFactory;\n+\n+import static org.junit.Assert.*;\n+import static org.junit.Assert.assertTrue;\n+\n+/**\n+ * Test for {@link BandcampChannelLinkHandlerFactory}\n+ */\n+public class BandcampChannelLinkHandlerFactoryTest {\n+    private static BandcampChannelLinkHandlerFactory linkHandler;\n+\n+    @BeforeClass\n+    public static void setUp() {\n+        linkHandler = new BandcampChannelLinkHandlerFactory();\n+        NewPipe.init(DownloaderTestImpl.getInstance());\n+    }\n+\n+    @Test\n+    public void testAcceptUrl() throws ParsingException {\n+        // Tests expecting true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34b6928124bd0860061deea2e38cbd24dd40085c"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTI0MTY1Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            return \"Unknown license (internal ID \" + license + \")\";\n          \n          \n            \n                            return \"Unknown\";", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r435241657", "createdAt": "2020-06-04T13:12:45Z", "author": {"login": "B0pol"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampStreamExtractor.java", "diffHunk": "@@ -0,0 +1,335 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import com.grack.nanojson.JsonObject;\n+import com.grack.nanojson.JsonParserException;\n+import org.jsoup.Jsoup;\n+import org.jsoup.nodes.Document;\n+import org.jsoup.nodes.Element;\n+import org.jsoup.select.Elements;\n+import org.schabi.newpipe.extractor.MediaFormat;\n+import org.schabi.newpipe.extractor.StreamingService;\n+import org.schabi.newpipe.extractor.downloader.Downloader;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.linkhandler.LinkHandler;\n+import org.schabi.newpipe.extractor.localization.DateWrapper;\n+import org.schabi.newpipe.extractor.stream.*;\n+\n+import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n+import java.io.IOException;\n+import java.text.ParseException;\n+import java.text.SimpleDateFormat;\n+import java.util.ArrayList;\n+import java.util.Calendar;\n+import java.util.Date;\n+import java.util.List;\n+import java.util.Locale;\n+\n+import static org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampExtractorHelper.getImageUrl;\n+\n+public class BandcampStreamExtractor extends StreamExtractor {\n+\n+    private JsonObject albumJson;\n+    private JsonObject current;\n+    private Document document;\n+\n+    public BandcampStreamExtractor(StreamingService service, LinkHandler linkHandler) {\n+        super(service, linkHandler);\n+    }\n+\n+\n+    @Override\n+    public void onFetchPage(@Nonnull Downloader downloader) throws IOException, ExtractionException {\n+        String html = downloader.get(getLinkHandler().getUrl()).responseBody();\n+        document = Jsoup.parse(html);\n+        albumJson = getAlbumInfoJson(html);\n+        current = albumJson.getObject(\"current\");\n+\n+        if (albumJson.getArray(\"trackinfo\").size() > 1) {\n+            // In this case, we are actually viewing an album page!\n+            throw new ExtractionException(\"Page is actually an album, not a track\");\n+        }\n+    }\n+\n+    /**\n+     * Get the JSON that contains album's metadata from page\n+     *\n+     * @param html Website\n+     * @return Album metadata JSON\n+     * @throws ParsingException In case of a faulty website\n+     */\n+    public static JsonObject getAlbumInfoJson(String html) throws ParsingException {\n+        try {\n+            return BandcampExtractorHelper.getJSONFromJavaScriptVariables(html, \"TralbumData\");\n+        } catch (JsonParserException e) {\n+            throw new ParsingException(\"Faulty JSON; page likely does not contain album data\", e);\n+        } catch (ArrayIndexOutOfBoundsException e) {\n+            throw new ParsingException(\"JSON does not exist\", e);\n+        }\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getName() throws ParsingException {\n+        return current.getString(\"title\");\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUploaderUrl() throws ParsingException {\n+        String[] parts = getUrl().split(\"/\");\n+        // https: (/) (/) * .bandcamp.com (/) and leave out the rest\n+        return \"https://\" + parts[2] + \"/\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUrl() throws ParsingException {\n+        return albumJson.getString(\"url\").replace(\"http://\", \"https://\");\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUploaderName() {\n+        return albumJson.getString(\"artist\");\n+    }\n+\n+    @Nullable\n+    @Override\n+    public String getTextualUploadDate() {\n+        return current.getString(\"publish_date\");\n+    }\n+\n+    @Nullable\n+    @Override\n+    public DateWrapper getUploadDate() throws ParsingException {\n+        try {\n+            Date date = new SimpleDateFormat(\"dd MMM yyyy HH:mm:ss zzz\", Locale.ENGLISH).parse(getTextualUploadDate());\n+            Calendar calendar = Calendar.getInstance();\n+            calendar.setTime(date);\n+            return new DateWrapper(calendar, false);\n+        } catch (ParseException e) {\n+            throw new ParsingException(\"Could not extract date\", e);\n+        }\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getThumbnailUrl() throws ParsingException {\n+        if (albumJson.isNull(\"art_id\")) return \"\";\n+        else return getImageUrl(albumJson.getLong(\"art_id\"), true);\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUploaderAvatarUrl() {\n+        try {\n+            return document.getElementsByClass(\"band-photo\").first().attr(\"src\");\n+        } catch (NullPointerException e) {\n+            return \"\";\n+        }\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getSubChannelUrl() {\n+        return \"\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getSubChannelName() {\n+        return \"\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getSubChannelAvatarUrl() {\n+        return \"\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public Description getDescription() {\n+        String s = BandcampExtractorHelper.smartConcatenate(\n+                new String[]{\n+                        current.getString(\"about\"),\n+                        current.getString(\"lyrics\"),\n+                        current.getString(\"credits\")\n+                }, \"\\n\\n\"\n+        );\n+        return new Description(s, Description.PLAIN_TEXT);\n+    }\n+\n+    @Override\n+    public int getAgeLimit() {\n+        return NO_AGE_LIMIT;\n+    }\n+\n+    @Override\n+    public long getLength() {\n+        return 0;\n+    }\n+\n+    @Override\n+    public long getTimeStamp() {\n+        return 0;\n+    }\n+\n+    @Override\n+    public long getViewCount() {\n+        return -1;\n+    }\n+\n+    @Override\n+    public long getLikeCount() {\n+        return -1;\n+    }\n+\n+    @Override\n+    public long getDislikeCount() {\n+        return -1;\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getDashMpdUrl() {\n+        return \"\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getHlsUrl() {\n+        return null;\n+    }\n+\n+    @Override\n+    public List<AudioStream> getAudioStreams() {\n+        List<AudioStream> audioStreams = new ArrayList<>();\n+\n+        audioStreams.add(new AudioStream(\n+                albumJson.getArray(\"trackinfo\").getObject(0)\n+                        .getObject(\"file\").getString(\"mp3-128\"),\n+                MediaFormat.MP3, 128\n+        ));\n+        return audioStreams;\n+    }\n+\n+    @Override\n+    public List<VideoStream> getVideoStreams() {\n+        return null;\n+    }\n+\n+    @Override\n+    public List<VideoStream> getVideoOnlyStreams() {\n+        return null;\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public List<SubtitlesStream> getSubtitlesDefault() {\n+        return new ArrayList<>();\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public List<SubtitlesStream> getSubtitles(MediaFormat format) {\n+        return new ArrayList<>();\n+    }\n+\n+    @Override\n+    public StreamType getStreamType() {\n+        return StreamType.AUDIO_STREAM;\n+    }\n+\n+    @Override\n+    public StreamInfoItem getNextStream() {\n+        return null;\n+    }\n+\n+    @Override\n+    public StreamInfoItemsCollector getRelatedStreams() {\n+        return null;\n+    }\n+\n+    @Override\n+    public String getErrorMessage() {\n+        return null;\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getHost() {\n+        return \"\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getPrivacy() {\n+        return \"\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getCategory() {\n+        // Get first tag from html, which is the artist's Genre\n+        return document.getElementsByAttributeValue(\"itemprop\", \"keywords\").first().text();\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getLicence() {\n+\n+        int license = current.getInt(\"license_type\");\n+\n+        // Tests resulted in this mapping of ints to licence: https://cloud.disroot.org/s/ZTWBxbQ9fKRmRWJ/preview\n+\n+        switch (license) {\n+            case 1:\n+                return \"All rights reserved \u00a9\";\n+            case 2:\n+                return \"CC BY-NC-ND 3.0\";\n+            case 3:\n+                return \"CC BY-NC-SA 3.0\";\n+            case 4:\n+                return \"CC BY-NC 3.0\";\n+            case 5:\n+                return \"CC BY-ND 3.0\";\n+            case 8:\n+                return \"CC BY-SA 3.0\";\n+            case 6:\n+                return \"CC BY 3.0\";\n+            default:\n+                return \"Unknown license (internal ID \" + license + \")\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34b6928124bd0860061deea2e38cbd24dd40085c"}, "originalPosition": 306}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTI0NDM4NQ==", "bodyText": "where did you find this screenshot (I don't mean with the numbers at the left, but the original one).\nYou don't know about 7? it's weird they have jumped it", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r435244385", "createdAt": "2020-06-04T13:16:46Z", "author": {"login": "B0pol"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampStreamExtractor.java", "diffHunk": "@@ -0,0 +1,335 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import com.grack.nanojson.JsonObject;\n+import com.grack.nanojson.JsonParserException;\n+import org.jsoup.Jsoup;\n+import org.jsoup.nodes.Document;\n+import org.jsoup.nodes.Element;\n+import org.jsoup.select.Elements;\n+import org.schabi.newpipe.extractor.MediaFormat;\n+import org.schabi.newpipe.extractor.StreamingService;\n+import org.schabi.newpipe.extractor.downloader.Downloader;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.linkhandler.LinkHandler;\n+import org.schabi.newpipe.extractor.localization.DateWrapper;\n+import org.schabi.newpipe.extractor.stream.*;\n+\n+import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n+import java.io.IOException;\n+import java.text.ParseException;\n+import java.text.SimpleDateFormat;\n+import java.util.ArrayList;\n+import java.util.Calendar;\n+import java.util.Date;\n+import java.util.List;\n+import java.util.Locale;\n+\n+import static org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampExtractorHelper.getImageUrl;\n+\n+public class BandcampStreamExtractor extends StreamExtractor {\n+\n+    private JsonObject albumJson;\n+    private JsonObject current;\n+    private Document document;\n+\n+    public BandcampStreamExtractor(StreamingService service, LinkHandler linkHandler) {\n+        super(service, linkHandler);\n+    }\n+\n+\n+    @Override\n+    public void onFetchPage(@Nonnull Downloader downloader) throws IOException, ExtractionException {\n+        String html = downloader.get(getLinkHandler().getUrl()).responseBody();\n+        document = Jsoup.parse(html);\n+        albumJson = getAlbumInfoJson(html);\n+        current = albumJson.getObject(\"current\");\n+\n+        if (albumJson.getArray(\"trackinfo\").size() > 1) {\n+            // In this case, we are actually viewing an album page!\n+            throw new ExtractionException(\"Page is actually an album, not a track\");\n+        }\n+    }\n+\n+    /**\n+     * Get the JSON that contains album's metadata from page\n+     *\n+     * @param html Website\n+     * @return Album metadata JSON\n+     * @throws ParsingException In case of a faulty website\n+     */\n+    public static JsonObject getAlbumInfoJson(String html) throws ParsingException {\n+        try {\n+            return BandcampExtractorHelper.getJSONFromJavaScriptVariables(html, \"TralbumData\");\n+        } catch (JsonParserException e) {\n+            throw new ParsingException(\"Faulty JSON; page likely does not contain album data\", e);\n+        } catch (ArrayIndexOutOfBoundsException e) {\n+            throw new ParsingException(\"JSON does not exist\", e);\n+        }\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getName() throws ParsingException {\n+        return current.getString(\"title\");\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUploaderUrl() throws ParsingException {\n+        String[] parts = getUrl().split(\"/\");\n+        // https: (/) (/) * .bandcamp.com (/) and leave out the rest\n+        return \"https://\" + parts[2] + \"/\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUrl() throws ParsingException {\n+        return albumJson.getString(\"url\").replace(\"http://\", \"https://\");\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUploaderName() {\n+        return albumJson.getString(\"artist\");\n+    }\n+\n+    @Nullable\n+    @Override\n+    public String getTextualUploadDate() {\n+        return current.getString(\"publish_date\");\n+    }\n+\n+    @Nullable\n+    @Override\n+    public DateWrapper getUploadDate() throws ParsingException {\n+        try {\n+            Date date = new SimpleDateFormat(\"dd MMM yyyy HH:mm:ss zzz\", Locale.ENGLISH).parse(getTextualUploadDate());\n+            Calendar calendar = Calendar.getInstance();\n+            calendar.setTime(date);\n+            return new DateWrapper(calendar, false);\n+        } catch (ParseException e) {\n+            throw new ParsingException(\"Could not extract date\", e);\n+        }\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getThumbnailUrl() throws ParsingException {\n+        if (albumJson.isNull(\"art_id\")) return \"\";\n+        else return getImageUrl(albumJson.getLong(\"art_id\"), true);\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUploaderAvatarUrl() {\n+        try {\n+            return document.getElementsByClass(\"band-photo\").first().attr(\"src\");\n+        } catch (NullPointerException e) {\n+            return \"\";\n+        }\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getSubChannelUrl() {\n+        return \"\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getSubChannelName() {\n+        return \"\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getSubChannelAvatarUrl() {\n+        return \"\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public Description getDescription() {\n+        String s = BandcampExtractorHelper.smartConcatenate(\n+                new String[]{\n+                        current.getString(\"about\"),\n+                        current.getString(\"lyrics\"),\n+                        current.getString(\"credits\")\n+                }, \"\\n\\n\"\n+        );\n+        return new Description(s, Description.PLAIN_TEXT);\n+    }\n+\n+    @Override\n+    public int getAgeLimit() {\n+        return NO_AGE_LIMIT;\n+    }\n+\n+    @Override\n+    public long getLength() {\n+        return 0;\n+    }\n+\n+    @Override\n+    public long getTimeStamp() {\n+        return 0;\n+    }\n+\n+    @Override\n+    public long getViewCount() {\n+        return -1;\n+    }\n+\n+    @Override\n+    public long getLikeCount() {\n+        return -1;\n+    }\n+\n+    @Override\n+    public long getDislikeCount() {\n+        return -1;\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getDashMpdUrl() {\n+        return \"\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getHlsUrl() {\n+        return null;\n+    }\n+\n+    @Override\n+    public List<AudioStream> getAudioStreams() {\n+        List<AudioStream> audioStreams = new ArrayList<>();\n+\n+        audioStreams.add(new AudioStream(\n+                albumJson.getArray(\"trackinfo\").getObject(0)\n+                        .getObject(\"file\").getString(\"mp3-128\"),\n+                MediaFormat.MP3, 128\n+        ));\n+        return audioStreams;\n+    }\n+\n+    @Override\n+    public List<VideoStream> getVideoStreams() {\n+        return null;\n+    }\n+\n+    @Override\n+    public List<VideoStream> getVideoOnlyStreams() {\n+        return null;\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public List<SubtitlesStream> getSubtitlesDefault() {\n+        return new ArrayList<>();\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public List<SubtitlesStream> getSubtitles(MediaFormat format) {\n+        return new ArrayList<>();\n+    }\n+\n+    @Override\n+    public StreamType getStreamType() {\n+        return StreamType.AUDIO_STREAM;\n+    }\n+\n+    @Override\n+    public StreamInfoItem getNextStream() {\n+        return null;\n+    }\n+\n+    @Override\n+    public StreamInfoItemsCollector getRelatedStreams() {\n+        return null;\n+    }\n+\n+    @Override\n+    public String getErrorMessage() {\n+        return null;\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getHost() {\n+        return \"\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getPrivacy() {\n+        return \"\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getCategory() {\n+        // Get first tag from html, which is the artist's Genre\n+        return document.getElementsByAttributeValue(\"itemprop\", \"keywords\").first().text();\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getLicence() {\n+\n+        int license = current.getInt(\"license_type\");\n+\n+        // Tests resulted in this mapping of ints to licence: https://cloud.disroot.org/s/ZTWBxbQ9fKRmRWJ/preview", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34b6928124bd0860061deea2e38cbd24dd40085c"}, "originalPosition": 288}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTI0NDY0Nw==", "bodyText": "use lexographical order please", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r435244647", "createdAt": "2020-06-04T13:17:06Z", "author": {"login": "B0pol"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampStreamExtractor.java", "diffHunk": "@@ -0,0 +1,335 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import com.grack.nanojson.JsonObject;\n+import com.grack.nanojson.JsonParserException;\n+import org.jsoup.Jsoup;\n+import org.jsoup.nodes.Document;\n+import org.jsoup.nodes.Element;\n+import org.jsoup.select.Elements;\n+import org.schabi.newpipe.extractor.MediaFormat;\n+import org.schabi.newpipe.extractor.StreamingService;\n+import org.schabi.newpipe.extractor.downloader.Downloader;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.linkhandler.LinkHandler;\n+import org.schabi.newpipe.extractor.localization.DateWrapper;\n+import org.schabi.newpipe.extractor.stream.*;\n+\n+import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n+import java.io.IOException;\n+import java.text.ParseException;\n+import java.text.SimpleDateFormat;\n+import java.util.ArrayList;\n+import java.util.Calendar;\n+import java.util.Date;\n+import java.util.List;\n+import java.util.Locale;\n+\n+import static org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampExtractorHelper.getImageUrl;\n+\n+public class BandcampStreamExtractor extends StreamExtractor {\n+\n+    private JsonObject albumJson;\n+    private JsonObject current;\n+    private Document document;\n+\n+    public BandcampStreamExtractor(StreamingService service, LinkHandler linkHandler) {\n+        super(service, linkHandler);\n+    }\n+\n+\n+    @Override\n+    public void onFetchPage(@Nonnull Downloader downloader) throws IOException, ExtractionException {\n+        String html = downloader.get(getLinkHandler().getUrl()).responseBody();\n+        document = Jsoup.parse(html);\n+        albumJson = getAlbumInfoJson(html);\n+        current = albumJson.getObject(\"current\");\n+\n+        if (albumJson.getArray(\"trackinfo\").size() > 1) {\n+            // In this case, we are actually viewing an album page!\n+            throw new ExtractionException(\"Page is actually an album, not a track\");\n+        }\n+    }\n+\n+    /**\n+     * Get the JSON that contains album's metadata from page\n+     *\n+     * @param html Website\n+     * @return Album metadata JSON\n+     * @throws ParsingException In case of a faulty website\n+     */\n+    public static JsonObject getAlbumInfoJson(String html) throws ParsingException {\n+        try {\n+            return BandcampExtractorHelper.getJSONFromJavaScriptVariables(html, \"TralbumData\");\n+        } catch (JsonParserException e) {\n+            throw new ParsingException(\"Faulty JSON; page likely does not contain album data\", e);\n+        } catch (ArrayIndexOutOfBoundsException e) {\n+            throw new ParsingException(\"JSON does not exist\", e);\n+        }\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getName() throws ParsingException {\n+        return current.getString(\"title\");\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUploaderUrl() throws ParsingException {\n+        String[] parts = getUrl().split(\"/\");\n+        // https: (/) (/) * .bandcamp.com (/) and leave out the rest\n+        return \"https://\" + parts[2] + \"/\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUrl() throws ParsingException {\n+        return albumJson.getString(\"url\").replace(\"http://\", \"https://\");\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUploaderName() {\n+        return albumJson.getString(\"artist\");\n+    }\n+\n+    @Nullable\n+    @Override\n+    public String getTextualUploadDate() {\n+        return current.getString(\"publish_date\");\n+    }\n+\n+    @Nullable\n+    @Override\n+    public DateWrapper getUploadDate() throws ParsingException {\n+        try {\n+            Date date = new SimpleDateFormat(\"dd MMM yyyy HH:mm:ss zzz\", Locale.ENGLISH).parse(getTextualUploadDate());\n+            Calendar calendar = Calendar.getInstance();\n+            calendar.setTime(date);\n+            return new DateWrapper(calendar, false);\n+        } catch (ParseException e) {\n+            throw new ParsingException(\"Could not extract date\", e);\n+        }\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getThumbnailUrl() throws ParsingException {\n+        if (albumJson.isNull(\"art_id\")) return \"\";\n+        else return getImageUrl(albumJson.getLong(\"art_id\"), true);\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUploaderAvatarUrl() {\n+        try {\n+            return document.getElementsByClass(\"band-photo\").first().attr(\"src\");\n+        } catch (NullPointerException e) {\n+            return \"\";\n+        }\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getSubChannelUrl() {\n+        return \"\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getSubChannelName() {\n+        return \"\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getSubChannelAvatarUrl() {\n+        return \"\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public Description getDescription() {\n+        String s = BandcampExtractorHelper.smartConcatenate(\n+                new String[]{\n+                        current.getString(\"about\"),\n+                        current.getString(\"lyrics\"),\n+                        current.getString(\"credits\")\n+                }, \"\\n\\n\"\n+        );\n+        return new Description(s, Description.PLAIN_TEXT);\n+    }\n+\n+    @Override\n+    public int getAgeLimit() {\n+        return NO_AGE_LIMIT;\n+    }\n+\n+    @Override\n+    public long getLength() {\n+        return 0;\n+    }\n+\n+    @Override\n+    public long getTimeStamp() {\n+        return 0;\n+    }\n+\n+    @Override\n+    public long getViewCount() {\n+        return -1;\n+    }\n+\n+    @Override\n+    public long getLikeCount() {\n+        return -1;\n+    }\n+\n+    @Override\n+    public long getDislikeCount() {\n+        return -1;\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getDashMpdUrl() {\n+        return \"\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getHlsUrl() {\n+        return null;\n+    }\n+\n+    @Override\n+    public List<AudioStream> getAudioStreams() {\n+        List<AudioStream> audioStreams = new ArrayList<>();\n+\n+        audioStreams.add(new AudioStream(\n+                albumJson.getArray(\"trackinfo\").getObject(0)\n+                        .getObject(\"file\").getString(\"mp3-128\"),\n+                MediaFormat.MP3, 128\n+        ));\n+        return audioStreams;\n+    }\n+\n+    @Override\n+    public List<VideoStream> getVideoStreams() {\n+        return null;\n+    }\n+\n+    @Override\n+    public List<VideoStream> getVideoOnlyStreams() {\n+        return null;\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public List<SubtitlesStream> getSubtitlesDefault() {\n+        return new ArrayList<>();\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public List<SubtitlesStream> getSubtitles(MediaFormat format) {\n+        return new ArrayList<>();\n+    }\n+\n+    @Override\n+    public StreamType getStreamType() {\n+        return StreamType.AUDIO_STREAM;\n+    }\n+\n+    @Override\n+    public StreamInfoItem getNextStream() {\n+        return null;\n+    }\n+\n+    @Override\n+    public StreamInfoItemsCollector getRelatedStreams() {\n+        return null;\n+    }\n+\n+    @Override\n+    public String getErrorMessage() {\n+        return null;\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getHost() {\n+        return \"\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getPrivacy() {\n+        return \"\";\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getCategory() {\n+        // Get first tag from html, which is the artist's Genre\n+        return document.getElementsByAttributeValue(\"itemprop\", \"keywords\").first().text();\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getLicence() {\n+\n+        int license = current.getInt(\"license_type\");\n+\n+        // Tests resulted in this mapping of ints to licence: https://cloud.disroot.org/s/ZTWBxbQ9fKRmRWJ/preview\n+\n+        switch (license) {\n+            case 1:\n+                return \"All rights reserved \u00a9\";\n+            case 2:\n+                return \"CC BY-NC-ND 3.0\";\n+            case 3:\n+                return \"CC BY-NC-SA 3.0\";\n+            case 4:\n+                return \"CC BY-NC 3.0\";\n+            case 5:\n+                return \"CC BY-ND 3.0\";\n+            case 8:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34b6928124bd0860061deea2e38cbd24dd40085c"}, "originalPosition": 301}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTI0NjUxMw==", "bodyText": "why? isn't it because #279 is not yet implemented?", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r435246513", "createdAt": "2020-06-04T13:19:50Z", "author": {"login": "B0pol"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampSearchExtractor.java", "diffHunk": "@@ -0,0 +1,123 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import org.jsoup.Jsoup;\n+import org.jsoup.nodes.Document;\n+import org.jsoup.nodes.Element;\n+import org.jsoup.select.Elements;\n+import org.schabi.newpipe.extractor.InfoItem;\n+import org.schabi.newpipe.extractor.StreamingService;\n+import org.schabi.newpipe.extractor.downloader.Downloader;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.linkhandler.SearchQueryHandler;\n+import org.schabi.newpipe.extractor.search.InfoItemsSearchCollector;\n+import org.schabi.newpipe.extractor.search.SearchExtractor;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.streaminfoitem.BandcampPlaylistStreamInfoItemExtractor;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.streaminfoitem.BandcampSearchStreamInfoItemExtractor;\n+\n+import javax.annotation.Nonnull;\n+import java.io.IOException;\n+\n+public class BandcampSearchExtractor extends SearchExtractor {\n+\n+    public BandcampSearchExtractor(StreamingService service, SearchQueryHandler linkHandler) {\n+        super(service, linkHandler);\n+    }\n+\n+    @Override\n+    public String getSearchSuggestion() {\n+        return null;\n+    }\n+\n+    @Override\n+    public boolean isCorrectedSearch() {\n+        return false;\n+    }\n+\n+    @Override\n+    public InfoItemsPage<InfoItem> getPage(String pageUrl) throws IOException, ExtractionException {\n+        // okay apparently this is where we DOWNLOAD the page and then COMMIT its ENTRIES to an INFOITEMPAGE\n+        String html = getDownloader().get(pageUrl).responseBody();\n+\n+        InfoItemsSearchCollector collector = new InfoItemsSearchCollector(getServiceId());\n+\n+\n+        Document d = Jsoup.parse(html);\n+\n+        Elements searchResultsElements = d.getElementsByClass(\"searchresult\");\n+\n+        for (Element searchResult :\n+                searchResultsElements) {\n+\n+            String type = searchResult.getElementsByClass(\"result-info\").first()\n+                    .getElementsByClass(\"itemtype\").first().text();\n+\n+            switch (type) {\n+                default:\n+                    continue;\n+                case \"FAN\":\n+                    // don't display fan results", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34b6928124bd0860061deea2e38cbd24dd40085c"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTI0NzI0NA==", "bodyText": "implement it", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r435247244", "createdAt": "2020-06-04T13:20:51Z", "author": {"login": "B0pol"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampRadioInfoItemExtractor.java", "diffHunk": "@@ -0,0 +1,84 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import com.grack.nanojson.JsonObject;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.localization.DateWrapper;\n+import org.schabi.newpipe.extractor.stream.StreamInfoItemExtractor;\n+import org.schabi.newpipe.extractor.stream.StreamType;\n+\n+import javax.annotation.Nullable;\n+\n+import static org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampExtractorHelper.getImageUrl;\n+\n+public class BandcampRadioInfoItemExtractor implements StreamInfoItemExtractor {\n+\n+    private JsonObject show;\n+\n+    public BandcampRadioInfoItemExtractor(JsonObject radioShow) {\n+        show = radioShow;\n+    }\n+\n+    @Override\n+    public long getDuration() {\n+        /* Duration is only present in the more detailed information that has to be queried separately.\n+         * Because the servers would probably not like over 300 queries every time someone opens the kiosk,\n+         * we're just providing 0 here.\n+         */\n+        //return query(show.getInt(\"id\")).getLong(\"audio_duration\");\n+        return 0;\n+    }\n+\n+    @Nullable\n+    @Override\n+    public String getTextualUploadDate() {\n+        return show.getString(\"date\").replace(\" 00:00:00 GMT\", \"\");\n+    }\n+\n+    @Nullable\n+    @Override\n+    public DateWrapper getUploadDate() {\n+        return null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34b6928124bd0860061deea2e38cbd24dd40085c"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTI0NzM4MA==", "bodyText": "where is getUploadDate() ?", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r435247380", "createdAt": "2020-06-04T13:21:05Z", "author": {"login": "B0pol"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampRadioStreamExtractor.java", "diffHunk": "@@ -0,0 +1,144 @@\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import com.grack.nanojson.JsonObject;\n+import com.grack.nanojson.JsonParser;\n+import com.grack.nanojson.JsonParserException;\n+import org.jsoup.Jsoup;\n+import org.schabi.newpipe.extractor.MediaFormat;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.StreamingService;\n+import org.schabi.newpipe.extractor.downloader.Downloader;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.exceptions.ReCaptchaException;\n+import org.schabi.newpipe.extractor.linkhandler.LinkHandler;\n+import org.schabi.newpipe.extractor.stream.AudioStream;\n+import org.schabi.newpipe.extractor.stream.Description;\n+\n+import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+import static org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampExtractorHelper.getImageUrl;\n+\n+public class BandcampRadioStreamExtractor extends BandcampStreamExtractor {\n+\n+    private JsonObject showInfo;\n+    private LinkHandler linkHandler;\n+\n+    public BandcampRadioStreamExtractor(StreamingService service, LinkHandler linkHandler) {\n+        super(service, linkHandler);\n+        this.linkHandler = linkHandler;\n+    }\n+\n+    static JsonObject query(int id) throws ParsingException {\n+        try {\n+            return JsonParser.object().from(\n+                    NewPipe.getDownloader().get(\"https://bandcamp.com/api/bcweekly/1/get?id=\" + id).responseBody()\n+            );\n+        } catch (IOException | ReCaptchaException | JsonParserException e) {\n+            throw new ParsingException(\"could not get show data\", e);\n+        }\n+    }\n+\n+    @Override\n+    public void onFetchPage(@Nonnull Downloader downloader) throws IOException, ExtractionException {\n+        showInfo = query(Integer.parseInt(getId()));\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getName() throws ParsingException {\n+        return showInfo.getString(\"subtitle\"); // \"audio_title\" is a boring title\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUploaderUrl() {\n+        return Jsoup.parse(showInfo.getString(\"image_caption\"))\n+                .getElementsByTag(\"a\").first().attr(\"href\");\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUrl() throws ParsingException {\n+        return linkHandler.getUrl();\n+    }\n+\n+    @Nonnull\n+    @Override\n+    public String getUploaderName() {\n+        return Jsoup.parse(showInfo.getString(\"image_caption\"))\n+                .getElementsByTag(\"a\").first().text();\n+    }\n+\n+    @Nullable\n+    @Override\n+    public String getTextualUploadDate() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34b6928124bd0860061deea2e38cbd24dd40085c"}, "originalPosition": 79}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTI1MjEzNg==", "bodyText": "remove this line", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r435252136", "createdAt": "2020-06-04T13:27:37Z", "author": {"login": "B0pol"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampExtractorHelper.java", "diffHunk": "@@ -0,0 +1,144 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import com.grack.nanojson.JsonObject;\n+import com.grack.nanojson.JsonParser;\n+import com.grack.nanojson.JsonParserException;\n+import com.grack.nanojson.JsonWriter;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.exceptions.ReCaptchaException;\n+\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+\n+public class BandcampExtractorHelper {\n+\n+    /**\n+     * <p>Get JSON behind <code>var $variable = </code> out of web page</p>\n+     *\n+     * <p>Originally a part of bandcampDirect.</p>\n+     *\n+     * @param html     The HTML where the JSON we're looking for is stored inside a\n+     *                 variable inside some JavaScript block\n+     * @param variable Name of the variable\n+     * @return The JsonObject stored in the variable with this name\n+     */\n+    public static JsonObject getJSONFromJavaScriptVariables(String html, String variable) throws JsonParserException, ArrayIndexOutOfBoundsException, ParsingException {\n+\n+        String[] part = html.split(\"var \" + variable + \" = \");\n+\n+        String firstHalfGone = part[1];\n+\n+        firstHalfGone = firstHalfGone.replaceAll(\"\\\" \\\\+ \\\"\", \"\");\n+\n+        int position = -1;\n+        int level = 0;\n+        for (char character : firstHalfGone.toCharArray()) {\n+            position++;\n+\n+            switch (character) {\n+                case '{':\n+                    level++;\n+                    continue;\n+                case '}':\n+                    level--;\n+                    if (level == 0) {\n+                        return JsonParser.object().from(firstHalfGone.substring(0, position + 1)\n+                                .replaceAll(\" {4}//.+\", \"\") // Remove \"for the curious\" in JSON\n+                                .replaceAll(\"// xxx: note - don't internationalize this variable\", \"\") // Remove this comment\n+                        );\n+                    }\n+            }\n+        }\n+\n+        throw new ParsingException(\"Unexpected HTML: JSON never ends\");\n+    }\n+\n+    /**\n+     * Translate all these parameters together to the URL of the corresponding album or track\n+     * using the mobile api\n+     */\n+    public static String getStreamUrlFromIds(long bandId, long itemId, String itemType) throws ParsingException {\n+\n+        try {\n+            String jsonString = NewPipe.getDownloader().get(\n+                    \"https://bandcamp.com/api/mobile/22/tralbum_details?band_id=\" + bandId\n+                            + \"&tralbum_id=\" + itemId + \"&tralbum_type=\" + itemType.substring(0, 1))\n+                    .responseBody();\n+\n+            return JsonParser.object().from(jsonString).getString(\"bandcamp_url\").replace(\"http://\", \"https://\");\n+\n+        } catch (JsonParserException | ReCaptchaException | IOException e) {\n+            throw new ParsingException(\"Ids could not be translated to URL\", e);\n+        }\n+\n+    }\n+\n+    /**\n+     * Concatenate all non-null and non-empty strings together while separating them using\n+     * the comma parameter\n+     */\n+    public static String smartConcatenate(String[] strings, String comma) {\n+        StringBuilder result = new StringBuilder();\n+\n+        // Remove empty strings\n+        ArrayList<String> list = new ArrayList<>(Arrays.asList(strings));\n+        for (int i = list.size() - 1; i >= 0; i--) {\n+            if (list.get(i) == null || list.get(i).isEmpty() || list.get(i).equals(\"null\")) {\n+                list.remove(i);\n+            }\n+        }\n+\n+        // Append remaining strings to result\n+        for (int i = 0; i < list.size(); i++) {\n+            String string = list.get(i);\n+            result.append(string);\n+\n+            if (i != list.size() - 1) {\n+                // This is not the last iteration yet\n+                result.append(comma);\n+            }\n+\n+        }\n+\n+        return String.valueOf(result);\n+    }\n+\n+    /**\n+     * Fetch artist details from mobile endpoint.\n+     * <a href=https://notabug.org/fynngodau/bandcampDirect/wiki/rewindBandcamp+%E2%80%93+Fetching+artist+details>\n+     * I once took a moment to note down how it works.</a>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34b6928124bd0860061deea2e38cbd24dd40085c"}, "originalPosition": 113}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTI1NjU4OQ==", "bodyText": "getSupportedCountries() is not overriden. For featured tracks, is there no personnalization based on countries?", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r435256589", "createdAt": "2020-06-04T13:33:52Z", "author": {"login": "B0pol"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/BandcampService.java", "diffHunk": "@@ -0,0 +1,132 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp;\n+\n+import org.schabi.newpipe.extractor.StreamingService;\n+import org.schabi.newpipe.extractor.channel.ChannelExtractor;\n+import org.schabi.newpipe.extractor.comments.CommentsExtractor;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.kiosk.KioskExtractor;\n+import org.schabi.newpipe.extractor.kiosk.KioskList;\n+import org.schabi.newpipe.extractor.linkhandler.*;\n+import org.schabi.newpipe.extractor.playlist.PlaylistExtractor;\n+import org.schabi.newpipe.extractor.search.SearchExtractor;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.*;\n+import org.schabi.newpipe.extractor.services.bandcamp.linkHandler.*;\n+import org.schabi.newpipe.extractor.stream.StreamExtractor;\n+import org.schabi.newpipe.extractor.subscription.SubscriptionExtractor;\n+import org.schabi.newpipe.extractor.suggestion.SuggestionExtractor;\n+\n+import java.io.IOException;\n+import java.util.Collections;\n+\n+import static org.schabi.newpipe.extractor.StreamingService.ServiceInfo.MediaCapability.AUDIO;\n+import static org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampFeaturedExtractor.FEATURED_API_URL;\n+import static org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampFeaturedExtractor.KIOSK_FEATURED;\n+import static org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampRadioExtractor.KIOSK_RADIO;\n+import static org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampRadioExtractor.RADIO_API_URL;\n+\n+public class BandcampService extends StreamingService {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "34b6928124bd0860061deea2e38cbd24dd40085c"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea49202f64e11198a959a51c396b4bbd68370acb", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/ea49202f64e11198a959a51c396b4bbd68370acb", "committedDate": "2020-06-04T16:26:58Z", "message": "Don't display internal license id\n\nCo-authored-by: bopol <bopol@e.email>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27e7aad159c9081b6af2b84430a6f50bc01ab987", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/27e7aad159c9081b6af2b84430a6f50bc01ab987", "committedDate": "2020-06-04T17:04:25Z", "message": "Bandcamp: Improve code style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6ecd919297ef9f75a67834c5b9a519113c0c7bb", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/e6ecd919297ef9f75a67834c5b9a519113c0c7bb", "committedDate": "2020-06-04T17:12:10Z", "message": "Bandcamp: Test full date"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0950a955775aca216099f0bc9cba6d38b27fac5a", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/0950a955775aca216099f0bc9cba6d38b27fac5a", "committedDate": "2020-06-04T17:16:08Z", "message": "Fix for testing wrong object for null or empty"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8fa81537c0befa7664a69114b80b989716578fd3", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/8fa81537c0befa7664a69114b80b989716578fd3", "committedDate": "2020-06-04T17:17:51Z", "message": "Better bandcamp stream extractor description test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52103ac61fb84a6fe7bfade499baebd3e360303a", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/52103ac61fb84a6fe7bfade499baebd3e360303a", "committedDate": "2020-06-04T17:27:13Z", "message": "Remove \"useless\" comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4dd9540782a3c3bb831a87a12aa3d7cb25e16e0e", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/4dd9540782a3c3bb831a87a12aa3d7cb25e16e0e", "committedDate": "2020-06-04T17:27:39Z", "message": "Bandcamp license switch order"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e13f341a458f7bc8b6a7d54026a415f8758eff07", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/e13f341a458f7bc8b6a7d54026a415f8758eff07", "committedDate": "2020-06-04T17:29:37Z", "message": "Bandcamp stream extractor: test service id"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a555d97e5fcd4c0a74a77014ab53f7a82ef6b3a", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/9a555d97e5fcd4c0a74a77014ab53f7a82ef6b3a", "committedDate": "2020-06-04T17:31:01Z", "message": "Remove useless bandcamp tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "39b55b5b42d39dabf0f2cedc463e002bbc254ca8", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/39b55b5b42d39dabf0f2cedc463e002bbc254ca8", "committedDate": "2020-06-04T17:32:19Z", "message": "Bandcamp radio stream extractor: test uploader url"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "96de834b676e26d0813ff4816f88fbbce78e5f49", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/96de834b676e26d0813ff4816f88fbbce78e5f49", "committedDate": "2020-06-04T17:36:58Z", "message": "Bandcamp: parse date from radio info item"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c12ef3a02d4d607e93dfe82737ddd7890380c422", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/c12ef3a02d4d607e93dfe82737ddd7890380c422", "committedDate": "2020-08-02T14:43:04Z", "message": "Merge TNP/dev into fynngodau/dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "932d094d6ab85ab4c439e1df07c53a312fe35c2e", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/932d094d6ab85ab4c439e1df07c53a312fe35c2e", "committedDate": "2020-08-02T14:55:18Z", "message": "Upgrade featured playlist urls to https"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cfe88a74c1a9eb692ba4f5c1281a47dd04755f5b", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/cfe88a74c1a9eb692ba4f5c1281a47dd04755f5b", "committedDate": "2020-08-09T08:07:49Z", "message": "Throw ContentNotSupportedException when opening radio uploader channel"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81b5e7cf3d22015d58ef4817ec687048473dcebe", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/81b5e7cf3d22015d58ef4817ec687048473dcebe", "committedDate": "2020-10-08T15:56:03Z", "message": "Fix extractor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6bc7e3420ea0b75be8c15d4a77da4cf9406958fe", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/6bc7e3420ea0b75be8c15d4a77da4cf9406958fe", "committedDate": "2020-11-19T20:32:08Z", "message": "Merge TNP/dev into fynngodau/dev"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "186936d04151d5d8030a46acbc0376560149f387", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/186936d04151d5d8030a46acbc0376560149f387", "committedDate": "2020-11-19T21:33:52Z", "message": "Various changes regarding tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c369b0f79d3ea01bf97a7d8f71f49d9c31b056d", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/8c369b0f79d3ea01bf97a7d8f71f49d9c31b056d", "committedDate": "2020-11-24T13:01:31Z", "message": "Rephrase link in javadoc\n\nCo-authored-by: Tobias Groza <TobiGr@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99e7ef013efa6b1da489262cba6f7d7e141e2d4e", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/99e7ef013efa6b1da489262cba6f7d7e141e2d4e", "committedDate": "2020-11-24T13:13:31Z", "message": "[Bandcamp] Apply small changes to code formatting and style\n\nMake variables final when possible\nRemove unused imports\nImprove code formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c91e21b37c9e17e0fc7f01d0aab45074a677df86", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/c91e21b37c9e17e0fc7f01d0aab45074a677df86", "committedDate": "2020-11-24T13:13:31Z", "message": "[Bandcamp] Tests - Add finals and improve code formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be562b84365a9b74ce0708cae53972aade36bfaf", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/be562b84365a9b74ce0708cae53972aade36bfaf", "committedDate": "2020-11-27T15:48:40Z", "message": "Change tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04dd3d4d3266d3b2cf2d8afca8518209431c17aa", "author": {"user": {"login": "fynngodau", "name": null}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/04dd3d4d3266d3b2cf2d8afca8518209431c17aa", "committedDate": "2020-12-05T14:08:26Z", "message": "Rework link handlers to correctly accept external websites"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwNjEwMzYw", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#pullrequestreview-550610360", "createdAt": "2020-12-11T22:09:20Z", "commit": {"oid": "04dd3d4d3266d3b2cf2d8afca8518209431c17aa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxOTc1Nzcw", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#pullrequestreview-551975770", "createdAt": "2020-12-14T23:21:08Z", "commit": {"oid": "04dd3d4d3266d3b2cf2d8afca8518209431c17aa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMzoyMTowOFrOIFxGeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMzoyMTowOFrOIFxGeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjkxODI2NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        final Date date = new SimpleDateFormat(\"dd MMM yyyy HH:mm:ss zzz\", Locale.ENGLISH).parse(textDate);\n          \n          \n            \n                        final Calendar calendar = Calendar.getInstance();\n          \n          \n            \n                        calendar.setTime(date);\n          \n          \n            \n                        return new DateWrapper(calendar, false);\n          \n          \n            \n                        final OffsetDateTime offsetDateTime = OffsetDateTime.parse(textDate, DateTimeFormatter.ofPattern(\"dd MMM yyyy HH:mm:ss zzz\"));\n          \n          \n            \n                        return new DateWrapper(offsetDateTime, false);", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r542918265", "createdAt": "2020-12-14T23:21:08Z", "author": {"login": "Isira-Seneviratne"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/extractors/BandcampExtractorHelper.java", "diffHunk": "@@ -0,0 +1,158 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.extractors;\n+\n+import com.grack.nanojson.JsonObject;\n+import com.grack.nanojson.JsonParser;\n+import com.grack.nanojson.JsonParserException;\n+import com.grack.nanojson.JsonWriter;\n+import org.jsoup.Jsoup;\n+import org.jsoup.nodes.Document;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.exceptions.ReCaptchaException;\n+import org.schabi.newpipe.extractor.localization.DateWrapper;\n+import org.schabi.newpipe.extractor.utils.Utils;\n+\n+import java.io.IOException;\n+import java.text.ParseException;\n+import java.text.SimpleDateFormat;\n+import java.util.*;\n+\n+public class BandcampExtractorHelper {\n+\n+    /**\n+     * <p>Get an attribute of a web page as JSON\n+     *\n+     * <p>Originally a part of bandcampDirect.</p>\n+     *\n+     * @param html     The HTML where the JSON we're looking for is stored inside a\n+     *                 variable inside some JavaScript block\n+     * @param variable Name of the variable\n+     * @return The JsonObject stored in the variable with this name\n+     */\n+    public static JsonObject getJsonData(final String html, final String variable)\n+            throws JsonParserException, ArrayIndexOutOfBoundsException {\n+        final Document document = Jsoup.parse(html);\n+        final String json = document.getElementsByAttribute(variable).attr(variable);\n+        return JsonParser.object().from(json);\n+    }\n+\n+    /**\n+     * Translate all these parameters together to the URL of the corresponding album or track\n+     * using the mobile api\n+     */\n+    public static String getStreamUrlFromIds(final long bandId, final long itemId, final String itemType)\n+            throws ParsingException {\n+\n+        try {\n+            final String jsonString = NewPipe.getDownloader().get(\n+                    \"https://bandcamp.com/api/mobile/22/tralbum_details?band_id=\" + bandId\n+                            + \"&tralbum_id=\" + itemId + \"&tralbum_type=\" + itemType.substring(0, 1))\n+                    .responseBody();\n+\n+            return JsonParser.object().from(jsonString).getString(\"bandcamp_url\").replace(\"http://\", \"https://\");\n+\n+        } catch (final JsonParserException | ReCaptchaException | IOException e) {\n+            throw new ParsingException(\"Ids could not be translated to URL\", e);\n+        }\n+\n+    }\n+\n+    /**\n+     * Concatenate all non-null and non-empty strings together while separating them using\n+     * the comma parameter\n+     */\n+    public static String smartConcatenate(final String[] strings, final String comma) {\n+        final StringBuilder result = new StringBuilder();\n+\n+        // Remove empty strings\n+        final ArrayList<String> list = new ArrayList<>(Arrays.asList(strings));\n+        for (int i = list.size() - 1; i >= 0; i--) {\n+            if (Utils.isNullOrEmpty(list.get(i)) || list.get(i).equals(\"null\")) {\n+                list.remove(i);\n+            }\n+        }\n+\n+        // Append remaining strings to result\n+        for (int i = 0; i < list.size(); i++) {\n+            result.append(list.get(i));\n+\n+            if (i != list.size() - 1) {\n+                // This is not the last iteration yet\n+                result.append(comma);\n+            }\n+\n+        }\n+\n+        return String.valueOf(result);\n+    }\n+\n+    /**\n+     * Fetch artist details from mobile endpoint.\n+     * <a href=https://notabug.org/fynngodau/bandcampDirect/wiki/rewindBandcamp+%E2%80%93+Fetching+artist+details>\n+     * More technical info.</a>\n+     */\n+    public static JsonObject getArtistDetails(String id) throws ParsingException {\n+        try {\n+            return\n+                    JsonParser.object().from(\n+                            NewPipe.getDownloader().post(\n+                                    \"https://bandcamp.com/api/mobile/22/band_details\",\n+                                    null,\n+                                    JsonWriter.string()\n+                                            .object()\n+                                            .value(\"band_id\", id)\n+                                            .end()\n+                                            .done()\n+                                            .getBytes()\n+                            ).responseBody()\n+                    );\n+        } catch (final IOException | ReCaptchaException | JsonParserException e) {\n+            throw new ParsingException(\"Could not download band details\", e);\n+        }\n+    }\n+\n+    /**\n+     * @param id    The image ID\n+     * @param album Whether this is the cover of an album\n+     * @return Url of image with this ID in size 10 which is 1200x1200 (we could also choose size 0\n+     * but we don't want something as large as 3460x3460 here, do we?)\n+     */\n+    public static String getImageUrl(final long id, final boolean album) {\n+        return \"https://f4.bcbits.com/img/\" + (album ? 'a' : \"\") + id + \"_10.jpg\";\n+    }\n+\n+    /**\n+     * @return <code>true</code> if the given url looks like it comes from a bandcamp custom domain\n+     * or if it comes from bandcamp.com itself\n+     */\n+    public static boolean isSupportedDomain(final String url) throws ParsingException {\n+\n+        // Accept all bandcamp.com URLs\n+        if (url.toLowerCase().matches(\"https?://.+\\\\.bandcamp\\\\.com(/.*)?\")) return true;\n+\n+        try {\n+            // Accept all other URLs if they contain a <meta> tag that says they are generated by bandcamp\n+            return Jsoup.parse(\n+                    NewPipe.getDownloader().get(url).responseBody()\n+            )\n+                    .getElementsByAttributeValue(\"name\", \"generator\")\n+                    .attr(\"content\").equals(\"Bandcamp\");\n+        } catch (IOException | ReCaptchaException e) {\n+            throw new ParsingException(\"Could not determine whether URL is custom domain \" +\n+                    \"(not available? network error?)\");\n+        }\n+    }\n+\n+    static DateWrapper parseDate(final String textDate) throws ParsingException {\n+        try {\n+            final Date date = new SimpleDateFormat(\"dd MMM yyyy HH:mm:ss zzz\", Locale.ENGLISH).parse(textDate);\n+            final Calendar calendar = Calendar.getInstance();\n+            calendar.setTime(date);\n+            return new DateWrapper(calendar, false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04dd3d4d3266d3b2cf2d8afca8518209431c17aa"}, "originalPosition": 153}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyOTY0ODY0", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#pullrequestreview-552964864", "createdAt": "2020-12-15T22:06:28Z", "commit": {"oid": "04dd3d4d3266d3b2cf2d8afca8518209431c17aa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQyMjowNjoyOFrOIGiHbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQyMjowNjoyOFrOIGiHbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzcyMTMyNA==", "bodyText": "date() is deprecated", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r543721324", "createdAt": "2020-12-15T22:06:28Z", "author": {"login": "TobiGr"}, "path": "extractor/src/test/java/org/schabi/newpipe/extractor/services/bandcamp/BandcampRadioStreamExtractorTest.java", "diffHunk": "@@ -0,0 +1,104 @@\n+package org.schabi.newpipe.extractor.services.bandcamp;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.schabi.newpipe.DownloaderTestImpl;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ContentNotSupportedException;\n+import org.schabi.newpipe.extractor.exceptions.ExtractionException;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampRadioStreamExtractor;\n+import org.schabi.newpipe.extractor.stream.StreamExtractor;\n+\n+import java.io.IOException;\n+import java.util.Calendar;\n+import java.util.TimeZone;\n+\n+import static org.junit.Assert.*;\n+import static org.schabi.newpipe.extractor.ServiceList.Bandcamp;\n+\n+public class BandcampRadioStreamExtractorTest {\n+\n+    private static StreamExtractor e;\n+\n+    private static final String SHOW_URL = \"https://bandcamp.com/?show=230\";\n+\n+    @BeforeClass\n+    public static void setUp() throws IOException, ExtractionException {\n+        NewPipe.init(DownloaderTestImpl.getInstance());\n+        e = Bandcamp.getStreamExtractor(SHOW_URL);\n+        e.fetchPage();\n+    }\n+\n+    @Test\n+    public void testGettingCorrectStreamExtractor() throws ExtractionException {\n+        assertTrue(Bandcamp.getStreamExtractor(\"https://bandcamp.com/?show=3\") instanceof BandcampRadioStreamExtractor);\n+        assertFalse(Bandcamp.getStreamExtractor(\"https://zachbenson.bandcamp.com/track/deflated\")\n+                instanceof BandcampRadioStreamExtractor);\n+    }\n+\n+    @Test\n+    public void testGetName() throws ParsingException {\n+        assertEquals(\"Sound Movements\", e.getName());\n+    }\n+\n+    @Test(expected = ContentNotSupportedException.class)\n+    public void testGetUploaderUrl() throws ParsingException {\n+        e.getUploaderUrl();\n+    }\n+\n+    @Test\n+    public void testGetUrl() throws ParsingException {\n+        assertEquals(SHOW_URL, e.getUrl());\n+    }\n+\n+    @Test\n+    public void testGetUploaderName() throws ParsingException {\n+        assertEquals(\"Andrew Jervis\", e.getUploaderName());\n+    }\n+\n+    @Test\n+    public void testGetTextualUploadDate() throws ParsingException {\n+        assertEquals(\"16 May 2017 00:00:00 GMT\", e.getTextualUploadDate());\n+    }\n+\n+    @Test\n+    public void testUploadDate() throws ParsingException {\n+        final Calendar expectedCalendar = Calendar.getInstance();\n+\n+        // 16 May 2017 00:00:00 GMT\n+        expectedCalendar.setTimeZone(TimeZone.getTimeZone(\"GMT\"));\n+        expectedCalendar.setTimeInMillis(0);\n+        expectedCalendar.set(2017, Calendar.MAY, 16);\n+\n+        assertEquals(expectedCalendar.getTimeInMillis(), e.getUploadDate().date().getTimeInMillis());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04dd3d4d3266d3b2cf2d8afca8518209431c17aa"}, "originalPosition": 74}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df16a8646fb971242a6cbc8b2aaae3baba36b415", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/df16a8646fb971242a6cbc8b2aaae3baba36b415", "committedDate": "2020-12-18T22:15:59Z", "message": "[Bandcamp] Improve radio stream extractor test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "84cd5d8b8e5f995a32decd8787e7479cd123f96a", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/84cd5d8b8e5f995a32decd8787e7479cd123f96a", "committedDate": "2020-12-18T22:09:34Z", "message": "[Bandcamp] Improve radio stream extractor test"}, "afterCommit": {"oid": "df16a8646fb971242a6cbc8b2aaae3baba36b415", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/df16a8646fb971242a6cbc8b2aaae3baba36b415", "committedDate": "2020-12-18T22:15:59Z", "message": "[Bandcamp] Improve radio stream extractor test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "116e921d6cc25b70416337634df4a6da1b3e2817", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/116e921d6cc25b70416337634df4a6da1b3e2817", "committedDate": "2020-12-18T23:26:11Z", "message": "Merge remote-tracking branch 'origin/dev' into bandcamp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74b46fed2d36da002b612fb8952cdd22f19ba8aa", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/74b46fed2d36da002b612fb8952cdd22f19ba8aa", "committedDate": "2020-12-19T09:40:21Z", "message": "[Bandcamp] Fix deprecation in parseDate helper function"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50903730b13e1b60e297f11047cfbd3dc13fd9c7", "author": {"user": {"login": "TobiGr", "name": "Tobi"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/50903730b13e1b60e297f11047cfbd3dc13fd9c7", "committedDate": "2020-12-22T07:53:10Z", "message": "[Bandcamp] Fix accepting HTTP URLs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2ODgyODY5", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#pullrequestreview-556882869", "createdAt": "2020-12-22T07:54:18Z", "commit": {"oid": "50903730b13e1b60e297f11047cfbd3dc13fd9c7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQwNzo1NDoxOFrOIJxt5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQwNzo1NDoxOFrOIJxt5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzEyMjY2MQ==", "bodyText": "This accepts links like https://daily.bandcamp.com/best-of-2020/bandcamp-daily-staffers-on-their-favorite-albums-of-2020", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/232#discussion_r547122661", "createdAt": "2020-12-22T07:54:18Z", "author": {"login": "TobiGr"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/bandcamp/linkHandler/BandcampChannelLinkHandlerFactory.java", "diffHunk": "@@ -0,0 +1,65 @@\n+// Created by Fynn Godau 2019, licensed GNU GPL version 3 or later\n+\n+package org.schabi.newpipe.extractor.services.bandcamp.linkHandler;\n+\n+import com.grack.nanojson.JsonObject;\n+import com.grack.nanojson.JsonParserException;\n+import org.schabi.newpipe.extractor.NewPipe;\n+import org.schabi.newpipe.extractor.exceptions.ParsingException;\n+import org.schabi.newpipe.extractor.exceptions.ReCaptchaException;\n+import org.schabi.newpipe.extractor.linkhandler.ListLinkHandlerFactory;\n+import org.schabi.newpipe.extractor.services.bandcamp.extractors.BandcampExtractorHelper;\n+\n+import java.io.IOException;\n+import java.util.List;\n+\n+/**\n+ * Artist do have IDs that are useful\n+ */\n+public class BandcampChannelLinkHandlerFactory extends ListLinkHandlerFactory {\n+\n+\n+    @Override\n+    public String getId(final String url) throws ParsingException {\n+        try {\n+            final String response = NewPipe.getDownloader().get(url).responseBody();\n+\n+            // Use band data embedded in website to extract ID\n+            final JsonObject bandData = BandcampExtractorHelper.getJsonData(response, \"data-band\");\n+\n+            return String.valueOf(bandData.getLong(\"id\"));\n+\n+        } catch (final IOException | ReCaptchaException | ArrayIndexOutOfBoundsException | JsonParserException e) {\n+            throw new ParsingException(\"Download failed\", e);\n+        }\n+    }\n+\n+    /**\n+     * Uses the mobile endpoint as a \"translator\" from id to url\n+     */\n+    @Override\n+    public String getUrl(final String id, final List<String> contentFilter, final String sortFilter)\n+            throws ParsingException {\n+        try {\n+            return BandcampExtractorHelper.getArtistDetails(id)\n+                    .getString(\"bandcamp_url\")\n+                    .replace(\"http://\", \"https://\");\n+        } catch (final NullPointerException e) {\n+            throw new ParsingException(\"JSON does not contain URL (invalid id?) or is otherwise invalid\", e);\n+        }\n+\n+    }\n+\n+    /**\n+     * Accepts only pages that do not lead to an album or track. Supports external pages.\n+     */\n+    @Override\n+    public boolean onAcceptUrl(final String url) throws ParsingException {\n+\n+        // Exclude URLs that lead to a track or album\n+        if (url.matches(\".*/(album|track)/.*\")) return false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "50903730b13e1b60e297f11047cfbd3dc13fd9c7"}, "originalPosition": 60}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3968, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}