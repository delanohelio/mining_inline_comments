{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ0ODM2Mjkz", "number": 495, "title": "[PeerTube] Implement sepia search", "bodyText": "I carefully read the contribution guidelines and agree to them.\n I have tested the API against NewPipe.\n I agree to create a pull request for NewPipe as soon as possible to make it compatible with the changed API.", "createdAt": "2020-12-23T14:10:12Z", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/495", "merged": true, "mergeCommit": {"oid": "ab62464e86954a8c084985bb0ed1674df7af6735"}, "closed": true, "closedAt": "2021-01-06T10:06:38Z", "author": {"login": "B0pol"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdo_tfngH2gAyNTQ0ODM2MjkzOjNhZTkyNGE3ZjE4ZDVlZTViNGFhMGJkMTNkNzE3OTkyMmNjMDk0ZmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdr5bqdgFqTU2MDU4OTgwMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3ae924a7f18d5ee5b4aa0bd13d7179922cc094fa", "author": {"user": {"login": "B0pol", "name": "bopol"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/3ae924a7f18d5ee5b4aa0bd13d7179922cc094fa", "committedDate": "2020-12-23T14:07:55Z", "message": "Implement sepia search"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwNTg0NTYy", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/495#pullrequestreview-560584562", "createdAt": "2021-01-01T12:09:55Z", "commit": {"oid": "3ae924a7f18d5ee5b4aa0bd13d7179922cc094fa"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wMVQxMjowOTo1NlrOINP4WQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wMVQxMjoyMDo0MlrOINP7cA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDc2MjU4NQ==", "bodyText": "JDoc please", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/495#discussion_r550762585", "createdAt": "2021-01-01T12:09:56Z", "author": {"login": "TobiGr"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/peertube/PeertubeParsingHelper.java", "diffHunk": "@@ -63,6 +64,11 @@ public static Page getNextPage(final String prevPageUrl, final long total) {\n     }\n \n     public static void collectStreamsFrom(final InfoItemsCollector collector, final JsonObject json, final String baseUrl) throws ParsingException {\n+        collectStreamsFrom(collector, json, baseUrl, false);\n+    }\n+\n+    // sepia: if we should use PeertubeSepiaStreamInfoItemExtractor\n+    public static void collectStreamsFrom(final InfoItemsCollector collector, final JsonObject json, final String baseUrl, boolean sepia) throws ParsingException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ae924a7f18d5ee5b4aa0bd13d7179922cc094fa"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDc2Mjc5MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public void setBaseUrl(final String baseUrl) {\n          \n          \n            \n                protected void setBaseUrl(final String baseUrl) {", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/495#discussion_r550762791", "createdAt": "2021-01-01T12:13:17Z", "author": {"login": "TobiGr"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/peertube/extractors/PeertubeStreamInfoItemExtractor.java", "diffHunk": "@@ -84,4 +84,8 @@ public StreamType getStreamType() {\n     public long getDuration() {\n         return item.getLong(\"duration\");\n     }\n+\n+    public void setBaseUrl(final String baseUrl) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ae924a7f18d5ee5b4aa0bd13d7179922cc094fa"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDc2MzM1MA==", "bodyText": "Why only startsWith(\"sepia_\") and not equals(SEPIA_VIDEOS)?", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/495#discussion_r550763350", "createdAt": "2021-01-01T12:20:11Z", "author": {"login": "TobiGr"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/peertube/PeertubeService.java", "diffHunk": "@@ -59,7 +61,12 @@ public ListLinkHandlerFactory getCommentsLHFactory() {\n \n     @Override\n     public SearchExtractor getSearchExtractor(SearchQueryHandler queryHandler) {\n-        return new PeertubeSearchExtractor(this, queryHandler);\n+        final List<String> contentFilters = queryHandler.getContentFilters();\n+        boolean external = false;\n+        if (contentFilters.size() > 0 && contentFilters.get(0).startsWith(\"sepia_\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ae924a7f18d5ee5b4aa0bd13d7179922cc094fa"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDc2MzM3Ng==", "bodyText": "same question as above", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/495#discussion_r550763376", "createdAt": "2021-01-01T12:20:42Z", "author": {"login": "TobiGr"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/peertube/linkHandler/PeertubeSearchQueryHandlerFactory.java", "diffHunk": "@@ -20,7 +22,12 @@ public static PeertubeSearchQueryHandlerFactory getInstance() {\n \n     @Override\n     public String getUrl(String searchString, List<String> contentFilters, String sortFilter) throws ParsingException {\n-        String baseUrl = ServiceList.PeerTube.getBaseUrl();\n+        String baseUrl;\n+        if (contentFilters.size() > 0 && contentFilters.get(0).startsWith(\"sepia_\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ae924a7f18d5ee5b4aa0bd13d7179922cc094fa"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e45c25ea93101b86dc5cbc2b3fd46bf37d690a8", "author": {"user": {"login": "B0pol", "name": "bopol"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/0e45c25ea93101b86dc5cbc2b3fd46bf37d690a8", "committedDate": "2021-01-01T13:20:47Z", "message": "Update extractor/src/main/java/org/schabi/newpipe/extractor/services/peertube/extractors/PeertubeStreamInfoItemExtractor.java\n\nCo-authored-by: Tobias Groza <TobiGr@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0bcea9c2cd49889f1a748c6e2a0328af0b083756", "author": {"user": {"login": "B0pol", "name": "bopol"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/0bcea9c2cd49889f1a748c6e2a0328af0b083756", "committedDate": "2021-01-01T13:37:32Z", "message": "add JDoc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwNTg5ODAw", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/495#pullrequestreview-560589800", "createdAt": "2021-01-01T14:30:47Z", "commit": {"oid": "0bcea9c2cd49889f1a748c6e2a0328af0b083756"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3964, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}