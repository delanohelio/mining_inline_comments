{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc4MjYzNzU4", "number": 394, "title": "Fix issue #4213:  trim the last char of the URL if it is a closing parenthesis", "bodyText": "Fix #4213 issue\ntrim the last char of the URL if it is a closing parenthesis\n\n I carefully read the contribution guidelines and agree to them.\n I have tested the API against NewPipe.\n I agree to create a pull request for NewPipe as soon as possible to make it compatible with the changed API.", "createdAt": "2020-09-03T00:31:56Z", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/394", "merged": true, "mergeCommit": {"oid": "df26f61cfc48587e40c5b406f407bbbd05567aeb"}, "closed": true, "closedAt": "2020-10-25T13:39:04Z", "author": {"login": "kirisakow"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdGOqT6AFqTQ4MzE0NDI3Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdV_6jOgFqTUxNjM1OTkzNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzMTQ0Mjc3", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/394#pullrequestreview-483144277", "createdAt": "2020-09-06T13:40:33Z", "commit": {"oid": "31129682af923705b99f4c173114b8d5d72a9e54"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNlQxMzo0MDozM1rOHNpYdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNlQxMzo0NTozNlrOHNpasQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDA3MTU0MA==", "bodyText": "Return null instead of an empty string, if you found nothing (also remember to add @Nullable to the function)", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/394#discussion_r484071540", "createdAt": "2020-09-06T13:40:33Z", "author": {"login": "Stypox"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/youtube/linkHandler/YoutubeStreamLinkHandlerFactory.java", "diffHunk": "@@ -46,13 +48,25 @@ public static YoutubeStreamLinkHandlerFactory getInstance() {\n         return instance;\n     }\n \n+    private static String extractId(@Nullable String id) {\n+        if (id != null) {\n+            Matcher m = Pattern.compile(\"([a-zA-Z0-9_-]{11})\").matcher(id);\n+            return m.find() ? m.group(1) : \"\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "31129682af923705b99f4c173114b8d5d72a9e54"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDA3MTk1Nw==", "bodyText": "We might consider removing isId() altogether and replacing\nif (isId()) {\n    return extractId()\n}\nwith\nfinal String extractedId = extractId(id);\nif (extractedId != null) {\n    return extractedId;\n}\nwhich does one regex comparison less, and is even clearer imo", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/394#discussion_r484071957", "createdAt": "2020-09-06T13:44:16Z", "author": {"login": "Stypox"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/youtube/linkHandler/YoutubeStreamLinkHandlerFactory.java", "diffHunk": "@@ -46,13 +48,25 @@ public static YoutubeStreamLinkHandlerFactory getInstance() {\n         return instance;\n     }\n \n+    private static String extractId(@Nullable String id) {\n+        if (id != null) {\n+            Matcher m = Pattern.compile(\"([a-zA-Z0-9_-]{11})\").matcher(id);\n+            return m.find() ? m.group(1) : \"\";\n+        }\n+        return \"\";\n+    }\n+\n     private static boolean isId(@Nullable String id) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "31129682af923705b99f4c173114b8d5d72a9e54"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDA3MjExMw==", "bodyText": "Move Pattern.compile(\"([a-zA-Z0-9_-]{11})\") to a public static final class field, to prevent compiling it every time.", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/394#discussion_r484072113", "createdAt": "2020-09-06T13:45:36Z", "author": {"login": "Stypox"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/youtube/linkHandler/YoutubeStreamLinkHandlerFactory.java", "diffHunk": "@@ -46,13 +48,25 @@ public static YoutubeStreamLinkHandlerFactory getInstance() {\n         return instance;\n     }\n \n+    private static String extractId(@Nullable String id) {\n+        if (id != null) {\n+            Matcher m = Pattern.compile(\"([a-zA-Z0-9_-]{11})\").matcher(id);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "31129682af923705b99f4c173114b8d5d72a9e54"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0MzY3NzYx", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/394#pullrequestreview-484367761", "createdAt": "2020-09-08T17:52:03Z", "commit": {"oid": "29cd72a749bb11bac31ceeeb9a05792175347960"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNzo1MjowM1rOHOn73g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxNzo1MjowM1rOHOn73g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTA5NjQxNA==", "bodyText": "Merge this and the above line into\nfinal String possiblyId = extractId(schemeSpecificPart.substring(2));", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/394#discussion_r485096414", "createdAt": "2020-09-08T17:52:03Z", "author": {"login": "Stypox"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/youtube/linkHandler/YoutubeStreamLinkHandlerFactory.java", "diffHunk": "@@ -82,8 +91,9 @@ public String getId(String urlString) throws ParsingException, IllegalArgumentEx\n                 String schemeSpecificPart = uri.getSchemeSpecificPart();\n                 if (schemeSpecificPart.startsWith(\"//\")) {\n                     final String possiblyId = schemeSpecificPart.substring(2);\n-                    if (isId(possiblyId)) {\n-                        return possiblyId;\n+                    final String extractedId = extractId(possiblyId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "29cd72a749bb11bac31ceeeb9a05792175347960"}, "originalPosition": 48}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1NDM5NDg2", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/394#pullrequestreview-515439486", "createdAt": "2020-10-23T08:13:20Z", "commit": {"oid": "995c167fcbca185a86a34d7ed74c9fdb1c0be91e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwODoxMzoyMFrOHnDYBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwODoxMzoyMFrOHnDYBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDcxMTgxMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        Matcher m = YOUTUBE_VIDEO_ID_REGEX_PATTERN.matcher(id);\n          \n          \n            \n                        final Matcher m = YOUTUBE_VIDEO_ID_REGEX_PATTERN.matcher(id);", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/394#discussion_r510711812", "createdAt": "2020-10-23T08:13:20Z", "author": {"login": "TobiGr"}, "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/youtube/linkHandler/YoutubeStreamLinkHandlerFactory.java", "diffHunk": "@@ -46,13 +49,19 @@ public static YoutubeStreamLinkHandlerFactory getInstance() {\n         return instance;\n     }\n \n-    private static boolean isId(@Nullable String id) {\n-        return id != null && id.matches(\"[a-zA-Z0-9_-]{11}\");\n+    @Nullable\n+    private static String extractId(@Nullable final String id) {\n+        if (id != null) {\n+            Matcher m = YOUTUBE_VIDEO_ID_REGEX_PATTERN.matcher(id);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "995c167fcbca185a86a34d7ed74c9fdb1c0be91e"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1NzA5NTc3", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/394#pullrequestreview-515709577", "createdAt": "2020-10-23T14:17:09Z", "commit": {"oid": "d6616ca389f20db6e831c3ebb867322d1024e9fb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1NzEyMDEy", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/394#pullrequestreview-515712012", "createdAt": "2020-10-23T14:19:51Z", "commit": {"oid": "d6616ca389f20db6e831c3ebb867322d1024e9fb"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "366ed7152346ab3e514f3fc71f9e656f7f722a88", "author": {"user": {"login": "kirisakow", "name": "Kiril Isakov"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/366ed7152346ab3e514f3fc71f9e656f7f722a88", "committedDate": "2020-10-25T13:34:20Z", "message": "[YouTube] Ignore leading characters in video id"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d6616ca389f20db6e831c3ebb867322d1024e9fb", "author": {"user": {"login": "kirisakow", "name": "Kiril Isakov"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/d6616ca389f20db6e831c3ebb867322d1024e9fb", "committedDate": "2020-10-23T09:37:10Z", "message": "Merge branch 'dev' into dev"}, "afterCommit": {"oid": "366ed7152346ab3e514f3fc71f9e656f7f722a88", "author": {"user": {"login": "kirisakow", "name": "Kiril Isakov"}}, "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/366ed7152346ab3e514f3fc71f9e656f7f722a88", "committedDate": "2020-10-25T13:34:20Z", "message": "[YouTube] Ignore leading characters in video id"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2MzU5OTM1", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/394#pullrequestreview-516359935", "createdAt": "2020-10-25T13:37:37Z", "commit": {"oid": "366ed7152346ab3e514f3fc71f9e656f7f722a88"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3948, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}