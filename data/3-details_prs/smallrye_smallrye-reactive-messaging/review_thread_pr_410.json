{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczMjQzNzQ2", "number": 410, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QwOToxMjowOFrODgUJdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QwOToxMjowOFrODgUJdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MjExMTI1OnYy", "diffSide": "RIGHT", "path": "smallrye-reactive-messaging-amqp/src/main/java/io/smallrye/reactive/messaging/amqp/AmqpConnector.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QwOToxMjowOFrOFqc-Pw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QwOToxMjowOFrOFqc-Pw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDA1OTE5OQ==", "bodyText": "Wondering about the case of amqp? But you know better than me on this.", "url": "https://github.com/smallrye/smallrye-reactive-messaging/pull/410#discussion_r380059199", "createdAt": "2020-02-17T09:12:08Z", "author": {"login": "cescoffier"}, "path": "smallrye-reactive-messaging-amqp/src/main/java/io/smallrye/reactive/messaging/amqp/AmqpConnector.java", "diffHunk": "@@ -114,21 +118,26 @@ private AmqpClient createClient(Config config) {\n         AmqpClient client;\n         Optional<String> clientOptionsName = config.getOptionalValue(\"client-options-name\", String.class);\n         if (clientOptionsName.isPresent()) {\n-            String optionsName = clientOptionsName.get();\n-            Instance<AmqpClientOptions> options = clientOptions.select(NamedLiteral.of(optionsName));\n-            if (options.isUnsatisfied()) {\n-                throw new IllegalStateException(\n-                        \"Cannot find a \" + AmqpClientOptions.class.getName() + \" bean named \" + optionsName);\n-            }\n-            LOGGER.debug(\"Creating amqp client from bean named '{}'\", optionsName);\n-            client = AmqpClient.create(new io.vertx.axle.core.Vertx(vertx.getDelegate()), options.get());\n+            client = createClientFromClientOptionsBean(clientOptionsName.get());\n+        } else if (this.defaultClientOptionsName != null && this.defaultClientOptionsName.isPresent()) {\n+            client = createClientFromClientOptionsBean(this.defaultClientOptionsName.get());\n         } else {\n             client = getClient(config);\n         }\n         clients.add(client);\n         return client;\n     }\n \n+    private AmqpClient createClientFromClientOptionsBean(String optionsBeanName) {\n+        Instance<AmqpClientOptions> options = clientOptions.select(NamedLiteral.of(optionsBeanName));\n+        if (options.isUnsatisfied()) {\n+            throw new IllegalStateException(\n+                    \"Cannot find a \" + AmqpClientOptions.class.getName() + \" bean named \" + optionsBeanName);\n+        }\n+        LOGGER.debug(\"Creating amqp client from bean named '{}'\", optionsBeanName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6541b3bc1a58ff383040a8bc3380445ac2fa5dbc"}, "originalPosition": 39}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 123, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}