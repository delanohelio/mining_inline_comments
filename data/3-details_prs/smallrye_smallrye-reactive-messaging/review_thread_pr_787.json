{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2OTQ5MTY3", "number": 787, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNzowNjo1MVrOEp4tzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNzoxMDoyOVrOEp4yAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMzU2MzAwOnYy", "diffSide": "RIGHT", "path": "documentation/src/main/doc/modules/amqp/pages/outbound.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNzowNjo1MVrOHb1H9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNzowNjo1MVrOHb1H9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk0Mzk5MA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Sometimes it is desirable to dynamically select the destination of a message, in this case you should not configure the name of the topic inside your application configuration file,\n          \n          \n            \n            Sometimes it is desirable to select the destination of a message dynamically.\n          \n          \n            \n            In this case, you should not configure the address inside your application configuration file, but instead, use the outbound metadata to set the address.```", "url": "https://github.com/smallrye/smallrye-reactive-messaging/pull/787#discussion_r498943990", "createdAt": "2020-10-02T17:06:51Z", "author": {"login": "cescoffier"}, "path": "documentation/src/main/doc/modules/amqp/pages/outbound.adoc", "diffHunk": "@@ -65,7 +65,19 @@ For example, you can configure the address, subjects, properties:\n include::example$outbound/AmqpOutboundMetadataExample.java[tag=code]\n ----\n \n-NOTE: To be able to override the address per message, the connector is using an _anonymous sender_.\n+=== Dynamic topic names\n+\n+Sometimes it is desirable to dynamically select the destination of a message, in this case you should not configure the name of the topic inside your application configuration file,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d96dd846593ebbca076f8c6a54f93150317c8d24"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMzU2NDI4OnYy", "diffSide": "RIGHT", "path": "documentation/src/main/doc/modules/amqp/pages/outbound.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNzowNzoxOVrOHb1I1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNzowNzoxOVrOHb1I1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk0NDIxNA==", "bodyText": "To be removed, part of my suggestion above.", "url": "https://github.com/smallrye/smallrye-reactive-messaging/pull/787#discussion_r498944214", "createdAt": "2020-10-02T17:07:19Z", "author": {"login": "cescoffier"}, "path": "documentation/src/main/doc/modules/amqp/pages/outbound.adoc", "diffHunk": "@@ -65,7 +65,19 @@ For example, you can configure the address, subjects, properties:\n include::example$outbound/AmqpOutboundMetadataExample.java[tag=code]\n ----\n \n-NOTE: To be able to override the address per message, the connector is using an _anonymous sender_.\n+=== Dynamic topic names\n+\n+Sometimes it is desirable to dynamically select the destination of a message, in this case you should not configure the name of the topic inside your application configuration file,\n+but instead use the outbound metadata to set the name of the topic.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d96dd846593ebbca076f8c6a54f93150317c8d24"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMzU2NjE1OnYy", "diffSide": "RIGHT", "path": "documentation/src/main/doc/modules/amqp/pages/outbound.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNzowNzo1NVrOHb1J-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNzowNzo1NVrOHb1J-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk0NDUwNg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            For example, you can route to a dynamic topic based on the incoming message:\n          \n          \n            \n            For example, you can send to a dynamic address based on the incoming message:", "url": "https://github.com/smallrye/smallrye-reactive-messaging/pull/787#discussion_r498944506", "createdAt": "2020-10-02T17:07:55Z", "author": {"login": "cescoffier"}, "path": "documentation/src/main/doc/modules/amqp/pages/outbound.adoc", "diffHunk": "@@ -65,7 +65,19 @@ For example, you can configure the address, subjects, properties:\n include::example$outbound/AmqpOutboundMetadataExample.java[tag=code]\n ----\n \n-NOTE: To be able to override the address per message, the connector is using an _anonymous sender_.\n+=== Dynamic topic names\n+\n+Sometimes it is desirable to dynamically select the destination of a message, in this case you should not configure the name of the topic inside your application configuration file,\n+but instead use the outbound metadata to set the name of the topic.\n+\n+For example, you can route to a dynamic topic based on the incoming message:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d96dd846593ebbca076f8c6a54f93150317c8d24"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMzU2NzQyOnYy", "diffSide": "RIGHT", "path": "documentation/src/main/doc/modules/amqp/examples/outbound/AmqpOutboundDynamicTopicExample.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNzowODoyM1rOHb1KxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNzowODoyM1rOHb1KxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk0NDcwOQ==", "bodyText": "don't use topic for AMQP. Use address instead.", "url": "https://github.com/smallrye/smallrye-reactive-messaging/pull/787#discussion_r498944709", "createdAt": "2020-10-02T17:08:23Z", "author": {"login": "cescoffier"}, "path": "documentation/src/main/doc/modules/amqp/examples/outbound/AmqpOutboundDynamicTopicExample.java", "diffHunk": "@@ -0,0 +1,25 @@\n+package outbound;\n+\n+import io.smallrye.reactive.messaging.amqp.OutgoingAmqpMetadata;\n+import org.eclipse.microprofile.reactive.messaging.Message;\n+\n+public class AmqpOutboundDynamicTopicExample {\n+    public Message<Double> metadata(Message<Double> incoming) {\n+\n+        // tag::code[]\n+        String topicName = selectTopicFromIncommingMessage(incoming);\n+        OutgoingAmqpMetadata metadata = OutgoingAmqpMetadata.builder()\n+            .withAddress(topicName)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d96dd846593ebbca076f8c6a54f93150317c8d24"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMzU3MTg1OnYy", "diffSide": "RIGHT", "path": "documentation/src/main/doc/modules/kafka/pages/outbound.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNzowOTo0N1rOHb1Nig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNzowOTo0N1rOHb1Nig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk0NTQxOA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Sometimes it is desirable to dynamically select the destination of a message, in this case you should not configure the name of the topic inside your application configuration file,\n          \n          \n            \n            Sometimes it is desirable to select the destination of a message dynamically. In this case, you should not configure the topic inside your application configuration file, but instead, use the outbound metadata to set the name of the topic.```", "url": "https://github.com/smallrye/smallrye-reactive-messaging/pull/787#discussion_r498945418", "createdAt": "2020-10-02T17:09:47Z", "author": {"login": "cescoffier"}, "path": "documentation/src/main/doc/modules/kafka/pages/outbound.adoc", "diffHunk": "@@ -79,6 +79,19 @@ For example, you can configure the topic directly in the message, or add Kafka h\n include::example$outbound/KafkaOutboundMetadataExample.java[tag=code]\n ----\n \n+=== Dynamic topic names\n+\n+Sometimes it is desirable to dynamically select the destination of a message, in this case you should not configure the name of the topic inside your application configuration file,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d96dd846593ebbca076f8c6a54f93150317c8d24"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMzU3MjYwOnYy", "diffSide": "RIGHT", "path": "documentation/src/main/doc/modules/kafka/pages/outbound.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNzowOTo1OVrOHb1N_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNzowOTo1OVrOHb1N_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk0NTUzNQ==", "bodyText": "to be removed, part of my suggestion above.", "url": "https://github.com/smallrye/smallrye-reactive-messaging/pull/787#discussion_r498945535", "createdAt": "2020-10-02T17:09:59Z", "author": {"login": "cescoffier"}, "path": "documentation/src/main/doc/modules/kafka/pages/outbound.adoc", "diffHunk": "@@ -79,6 +79,19 @@ For example, you can configure the topic directly in the message, or add Kafka h\n include::example$outbound/KafkaOutboundMetadataExample.java[tag=code]\n ----\n \n+=== Dynamic topic names\n+\n+Sometimes it is desirable to dynamically select the destination of a message, in this case you should not configure the name of the topic inside your application configuration file,\n+but instead use the outbound metadata to set the name of the topic.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d96dd846593ebbca076f8c6a54f93150317c8d24"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMzU3Mzc5OnYy", "diffSide": "RIGHT", "path": "documentation/src/main/doc/modules/kafka/pages/outbound.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNzoxMDoyOVrOHb1O5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNzoxMDoyOVrOHb1O5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk0NTc2NQ==", "bodyText": "Hum... there is no such a thing in the Kafka world :-) ... yet", "url": "https://github.com/smallrye/smallrye-reactive-messaging/pull/787#discussion_r498945765", "createdAt": "2020-10-02T17:10:29Z", "author": {"login": "cescoffier"}, "path": "documentation/src/main/doc/modules/kafka/pages/outbound.adoc", "diffHunk": "@@ -79,6 +79,19 @@ For example, you can configure the topic directly in the message, or add Kafka h\n include::example$outbound/KafkaOutboundMetadataExample.java[tag=code]\n ----\n \n+=== Dynamic topic names\n+\n+Sometimes it is desirable to dynamically select the destination of a message, in this case you should not configure the name of the topic inside your application configuration file,\n+but instead use the outbound metadata to set the name of the topic.\n+\n+For example, you can route to a dynamic topic based on the incoming message:\n+\n+[source, java]\n+----\n+include::example$outbound/AmqpOutboundDynamicTopicExample.java[tag=code]\n+----\n+\n+NOTE: To be able to set the address per message, the connector is using an _anonymous sender_.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d96dd846593ebbca076f8c6a54f93150317c8d24"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 56, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}