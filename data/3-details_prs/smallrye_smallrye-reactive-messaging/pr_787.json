{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2OTQ5MTY3", "number": 787, "title": "Document dynamic topic names", "bodyText": "Fixes #780", "createdAt": "2020-10-02T14:37:46Z", "url": "https://github.com/smallrye/smallrye-reactive-messaging/pull/787", "merged": true, "mergeCommit": {"oid": "7bae4ba2c945f18e3e8e924d4498affdf6c0eb6a"}, "closed": true, "closedAt": "2020-10-05T13:05:41Z", "author": {"login": "loicmathieu"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdOpLPxAFqTUwMTMwNDk3OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdPjeDQAFqTUwMjAzNDI4Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxMzA0OTc5", "url": "https://github.com/smallrye/smallrye-reactive-messaging/pull/787#pullrequestreview-501304979", "createdAt": "2020-10-02T17:06:51Z", "commit": {"oid": "d96dd846593ebbca076f8c6a54f93150317c8d24"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNzowNjo1MVrOHb1H9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMlQxNzoxMDoyOVrOHb1O5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk0Mzk5MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Sometimes it is desirable to dynamically select the destination of a message, in this case you should not configure the name of the topic inside your application configuration file,\n          \n          \n            \n            Sometimes it is desirable to select the destination of a message dynamically.\n          \n          \n            \n            In this case, you should not configure the address inside your application configuration file, but instead, use the outbound metadata to set the address.```", "url": "https://github.com/smallrye/smallrye-reactive-messaging/pull/787#discussion_r498943990", "createdAt": "2020-10-02T17:06:51Z", "author": {"login": "cescoffier"}, "path": "documentation/src/main/doc/modules/amqp/pages/outbound.adoc", "diffHunk": "@@ -65,7 +65,19 @@ For example, you can configure the address, subjects, properties:\n include::example$outbound/AmqpOutboundMetadataExample.java[tag=code]\n ----\n \n-NOTE: To be able to override the address per message, the connector is using an _anonymous sender_.\n+=== Dynamic topic names\n+\n+Sometimes it is desirable to dynamically select the destination of a message, in this case you should not configure the name of the topic inside your application configuration file,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d96dd846593ebbca076f8c6a54f93150317c8d24"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk0NDIxNA==", "bodyText": "To be removed, part of my suggestion above.", "url": "https://github.com/smallrye/smallrye-reactive-messaging/pull/787#discussion_r498944214", "createdAt": "2020-10-02T17:07:19Z", "author": {"login": "cescoffier"}, "path": "documentation/src/main/doc/modules/amqp/pages/outbound.adoc", "diffHunk": "@@ -65,7 +65,19 @@ For example, you can configure the address, subjects, properties:\n include::example$outbound/AmqpOutboundMetadataExample.java[tag=code]\n ----\n \n-NOTE: To be able to override the address per message, the connector is using an _anonymous sender_.\n+=== Dynamic topic names\n+\n+Sometimes it is desirable to dynamically select the destination of a message, in this case you should not configure the name of the topic inside your application configuration file,\n+but instead use the outbound metadata to set the name of the topic.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d96dd846593ebbca076f8c6a54f93150317c8d24"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk0NDUwNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            For example, you can route to a dynamic topic based on the incoming message:\n          \n          \n            \n            For example, you can send to a dynamic address based on the incoming message:", "url": "https://github.com/smallrye/smallrye-reactive-messaging/pull/787#discussion_r498944506", "createdAt": "2020-10-02T17:07:55Z", "author": {"login": "cescoffier"}, "path": "documentation/src/main/doc/modules/amqp/pages/outbound.adoc", "diffHunk": "@@ -65,7 +65,19 @@ For example, you can configure the address, subjects, properties:\n include::example$outbound/AmqpOutboundMetadataExample.java[tag=code]\n ----\n \n-NOTE: To be able to override the address per message, the connector is using an _anonymous sender_.\n+=== Dynamic topic names\n+\n+Sometimes it is desirable to dynamically select the destination of a message, in this case you should not configure the name of the topic inside your application configuration file,\n+but instead use the outbound metadata to set the name of the topic.\n+\n+For example, you can route to a dynamic topic based on the incoming message:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d96dd846593ebbca076f8c6a54f93150317c8d24"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk0NDcwOQ==", "bodyText": "don't use topic for AMQP. Use address instead.", "url": "https://github.com/smallrye/smallrye-reactive-messaging/pull/787#discussion_r498944709", "createdAt": "2020-10-02T17:08:23Z", "author": {"login": "cescoffier"}, "path": "documentation/src/main/doc/modules/amqp/examples/outbound/AmqpOutboundDynamicTopicExample.java", "diffHunk": "@@ -0,0 +1,25 @@\n+package outbound;\n+\n+import io.smallrye.reactive.messaging.amqp.OutgoingAmqpMetadata;\n+import org.eclipse.microprofile.reactive.messaging.Message;\n+\n+public class AmqpOutboundDynamicTopicExample {\n+    public Message<Double> metadata(Message<Double> incoming) {\n+\n+        // tag::code[]\n+        String topicName = selectTopicFromIncommingMessage(incoming);\n+        OutgoingAmqpMetadata metadata = OutgoingAmqpMetadata.builder()\n+            .withAddress(topicName)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d96dd846593ebbca076f8c6a54f93150317c8d24"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk0NTQxOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Sometimes it is desirable to dynamically select the destination of a message, in this case you should not configure the name of the topic inside your application configuration file,\n          \n          \n            \n            Sometimes it is desirable to select the destination of a message dynamically. In this case, you should not configure the topic inside your application configuration file, but instead, use the outbound metadata to set the name of the topic.```", "url": "https://github.com/smallrye/smallrye-reactive-messaging/pull/787#discussion_r498945418", "createdAt": "2020-10-02T17:09:47Z", "author": {"login": "cescoffier"}, "path": "documentation/src/main/doc/modules/kafka/pages/outbound.adoc", "diffHunk": "@@ -79,6 +79,19 @@ For example, you can configure the topic directly in the message, or add Kafka h\n include::example$outbound/KafkaOutboundMetadataExample.java[tag=code]\n ----\n \n+=== Dynamic topic names\n+\n+Sometimes it is desirable to dynamically select the destination of a message, in this case you should not configure the name of the topic inside your application configuration file,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d96dd846593ebbca076f8c6a54f93150317c8d24"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk0NTUzNQ==", "bodyText": "to be removed, part of my suggestion above.", "url": "https://github.com/smallrye/smallrye-reactive-messaging/pull/787#discussion_r498945535", "createdAt": "2020-10-02T17:09:59Z", "author": {"login": "cescoffier"}, "path": "documentation/src/main/doc/modules/kafka/pages/outbound.adoc", "diffHunk": "@@ -79,6 +79,19 @@ For example, you can configure the topic directly in the message, or add Kafka h\n include::example$outbound/KafkaOutboundMetadataExample.java[tag=code]\n ----\n \n+=== Dynamic topic names\n+\n+Sometimes it is desirable to dynamically select the destination of a message, in this case you should not configure the name of the topic inside your application configuration file,\n+but instead use the outbound metadata to set the name of the topic.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d96dd846593ebbca076f8c6a54f93150317c8d24"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODk0NTc2NQ==", "bodyText": "Hum... there is no such a thing in the Kafka world :-) ... yet", "url": "https://github.com/smallrye/smallrye-reactive-messaging/pull/787#discussion_r498945765", "createdAt": "2020-10-02T17:10:29Z", "author": {"login": "cescoffier"}, "path": "documentation/src/main/doc/modules/kafka/pages/outbound.adoc", "diffHunk": "@@ -79,6 +79,19 @@ For example, you can configure the topic directly in the message, or add Kafka h\n include::example$outbound/KafkaOutboundMetadataExample.java[tag=code]\n ----\n \n+=== Dynamic topic names\n+\n+Sometimes it is desirable to dynamically select the destination of a message, in this case you should not configure the name of the topic inside your application configuration file,\n+but instead use the outbound metadata to set the name of the topic.\n+\n+For example, you can route to a dynamic topic based on the incoming message:\n+\n+[source, java]\n+----\n+include::example$outbound/AmqpOutboundDynamicTopicExample.java[tag=code]\n+----\n+\n+NOTE: To be able to set the address per message, the connector is using an _anonymous sender_.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d96dd846593ebbca076f8c6a54f93150317c8d24"}, "originalPosition": 16}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "caf55d4340b4815282f7f6efa64799d4ca1aeb26", "author": {"user": {"login": "loicmathieu", "name": "Lo\u00efc Mathieu"}}, "url": "https://github.com/smallrye/smallrye-reactive-messaging/commit/caf55d4340b4815282f7f6efa64799d4ca1aeb26", "committedDate": "2020-10-05T07:12:37Z", "message": "WIP Apply suggestions from code review\n\nCo-authored-by: Clement Escoffier <clement.escoffier@gmail.com>"}, "afterCommit": {"oid": "15effe831c3abd728fcc9d82d9ab5a2840267f2a", "author": {"user": {"login": "loicmathieu", "name": "Lo\u00efc Mathieu"}}, "url": "https://github.com/smallrye/smallrye-reactive-messaging/commit/15effe831c3abd728fcc9d82d9ab5a2840267f2a", "committedDate": "2020-10-05T07:22:47Z", "message": "Document AMQP dynamic topic names"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e7b71ea14676bbadcd94c94a7fc855a6775737c", "author": {"user": {"login": "loicmathieu", "name": "Lo\u00efc Mathieu"}}, "url": "https://github.com/smallrye/smallrye-reactive-messaging/commit/2e7b71ea14676bbadcd94c94a7fc855a6775737c", "committedDate": "2020-10-05T08:41:35Z", "message": "Document Kafka dynamic topic names"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16ac22c120b14831a39aa6d658dbec85f666c1db", "author": {"user": {"login": "loicmathieu", "name": "Lo\u00efc Mathieu"}}, "url": "https://github.com/smallrye/smallrye-reactive-messaging/commit/16ac22c120b14831a39aa6d658dbec85f666c1db", "committedDate": "2020-10-05T08:41:35Z", "message": "Document AMQP dynamic topic names"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "15effe831c3abd728fcc9d82d9ab5a2840267f2a", "author": {"user": {"login": "loicmathieu", "name": "Lo\u00efc Mathieu"}}, "url": "https://github.com/smallrye/smallrye-reactive-messaging/commit/15effe831c3abd728fcc9d82d9ab5a2840267f2a", "committedDate": "2020-10-05T07:22:47Z", "message": "Document AMQP dynamic topic names"}, "afterCommit": {"oid": "16ac22c120b14831a39aa6d658dbec85f666c1db", "author": {"user": {"login": "loicmathieu", "name": "Lo\u00efc Mathieu"}}, "url": "https://github.com/smallrye/smallrye-reactive-messaging/commit/16ac22c120b14831a39aa6d658dbec85f666c1db", "committedDate": "2020-10-05T08:41:35Z", "message": "Document AMQP dynamic topic names"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxODM5NTIw", "url": "https://github.com/smallrye/smallrye-reactive-messaging/pull/787#pullrequestreview-501839520", "createdAt": "2020-10-05T08:44:34Z", "commit": {"oid": "16ac22c120b14831a39aa6d658dbec85f666c1db"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyMDM0Mjgy", "url": "https://github.com/smallrye/smallrye-reactive-messaging/pull/787#pullrequestreview-502034282", "createdAt": "2020-10-05T13:05:36Z", "commit": {"oid": "16ac22c120b14831a39aa6d658dbec85f666c1db"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2277, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}