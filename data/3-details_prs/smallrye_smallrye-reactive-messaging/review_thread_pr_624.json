{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM5NDk5MDgz", "number": 624, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwNTo0NTozN1rOEInnBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwNTo0NTozN1rOEInnBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3NDczMDMwOnYy", "diffSide": "RIGHT", "path": "smallrye-reactive-messaging-kafka/src/main/java/io/smallrye/reactive/messaging/kafka/OutgoingKafkaRecord.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwNTo0NTozN1rOGosJkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxMTo0NzoyOFrOGo3FOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTMxOTU2OA==", "bodyText": "That needs to be changed too. You can't expect to have OutgoingKafkaRecordMetadata, also you need to be sure you keep the existing set. To do that, the OutgoingKafkaRecord  constructor should receive the original Metadata.", "url": "https://github.com/smallrye/smallrye-reactive-messaging/pull/624#discussion_r445319568", "createdAt": "2020-06-25T05:45:37Z", "author": {"login": "cescoffier"}, "path": "smallrye-reactive-messaging-kafka/src/main/java/io/smallrye/reactive/messaging/kafka/OutgoingKafkaRecord.java", "diffHunk": "@@ -37,7 +40,8 @@ public OutgoingKafkaRecord(String topic, K key, T value, Instant timestamp, int\n                 .orElseThrow(() -> ex.illegalArgumentNoMetadata(OutgoingKafkaRecordMetadata.class));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10affd87d05c6e02dd0400bac58e46b6009b7c6e"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQ5ODY4MQ==", "bodyText": "I tried retaining the incoming metadata, but managed to break other tests! I can try again though.\nWhat would be a good way to test that the current approach is losing metadata?", "url": "https://github.com/smallrye/smallrye-reactive-messaging/pull/624#discussion_r445498681", "createdAt": "2020-06-25T11:47:28Z", "author": {"login": "kenfinnigan"}, "path": "smallrye-reactive-messaging-kafka/src/main/java/io/smallrye/reactive/messaging/kafka/OutgoingKafkaRecord.java", "diffHunk": "@@ -37,7 +40,8 @@ public OutgoingKafkaRecord(String topic, K key, T value, Instant timestamp, int\n                 .orElseThrow(() -> ex.illegalArgumentNoMetadata(OutgoingKafkaRecordMetadata.class));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTMxOTU2OA=="}, "originalCommit": {"oid": "10affd87d05c6e02dd0400bac58e46b6009b7c6e"}, "originalPosition": 29}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 82, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}