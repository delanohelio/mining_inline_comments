{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2MDg2ODY0", "number": 4633, "title": "Recognize \\r as newlines from flutter", "bodyText": "Verify that opening workbench, opening project(s), quitting, then re-opening workbench consistently results in re-opened projects having device options.\nFixes #3892", "createdAt": "2020-06-17T20:45:27Z", "url": "https://github.com/flutter/flutter-intellij/pull/4633", "merged": true, "mergeCommit": {"oid": "3830d4dbf29ee2cea9c6468d2cdc2130d25959eb"}, "closed": true, "closedAt": "2020-06-18T15:57:34Z", "author": {"login": "helin24"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcsQFuWgH2gAyNDM2MDg2ODY0OmUxYTA2MjRlNjA3OWMyYjJhM2VlNWNmZmRiODAwMDEyZjEzMmFiOTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcsS_ruAH2gAyNDM2MDg2ODY0OmQ3MmZkZWEwNDhmZTY3ZGYzZWVmNGRhMDQ4MzJkNDNhNTQ2MjY1YzU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e1a0624e6079c2b2a3ee5cffdb800012f132ab92", "author": {"user": {"login": "helin24", "name": "Helin Shiah"}}, "url": "https://github.com/flutter/flutter-intellij/commit/e1a0624e6079c2b2a3ee5cffdb800012f132ab92", "committedDate": "2020-06-17T20:43:29Z", "message": "Recognize \\r as newlines from flutter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "441592452e7671bb9e8d2288835801d1ab8ea16e", "author": {"user": {"login": "helin24", "name": "Helin Shiah"}}, "url": "https://github.com/flutter/flutter-intellij/commit/441592452e7671bb9e8d2288835801d1ab8ea16e", "committedDate": "2020-06-17T21:56:08Z", "message": "Check for windows return and modify tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyODI3MTIz", "url": "https://github.com/flutter/flutter-intellij/pull/4633#pullrequestreview-432827123", "createdAt": "2020-06-17T22:45:20Z", "commit": {"oid": "441592452e7671bb9e8d2288835801d1ab8ea16e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QyMjo0NToyMFrOGlZ2VQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QyMjo0NToyMFrOGlZ2VQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg3NDAwNQ==", "bodyText": "a little odd that we don't flush when the c is a '\\n'\nis this really\nassert(c!= '\\n');\n?", "url": "https://github.com/flutter/flutter-intellij/pull/4633#discussion_r441874005", "createdAt": "2020-06-17T22:45:20Z", "author": {"login": "jacob314"}, "path": "src/io/flutter/utils/StdoutJsonParser.java", "diffHunk": "@@ -32,11 +33,25 @@ public void appendOutput(String string) {\n       if (eatNextEol) {\n         eatNextEol = false;\n \n-        if (c == '\\n' || c == '\\r') {\n+        if (c == '\\n') {\n+          continue;\n+        }\n+\n+        if (c == '\\r' && !isPotentialWindowsReturn) {\n+          eatNextEol = true;\n+          isPotentialWindowsReturn = true;\n           continue;\n         }\n       }\n \n+      if (isPotentialWindowsReturn) {\n+        isPotentialWindowsReturn = false;\n+\n+        if (c != '\\n') {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "441592452e7671bb9e8d2288835801d1ab8ea16e"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyODI4MTQ4", "url": "https://github.com/flutter/flutter-intellij/pull/4633#pullrequestreview-432828148", "createdAt": "2020-06-17T22:48:07Z", "commit": {"oid": "441592452e7671bb9e8d2288835801d1ab8ea16e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QyMjo0ODowN1rOGlZ5oA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QyMjo0ODowN1rOGlZ5oA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg3NDg0OA==", "bodyText": "somewhat minor: do we have to worry about \\r or \\n in the middle of a json block? I don't know off the top of my head how the dart json encoder deals with them.", "url": "https://github.com/flutter/flutter-intellij/pull/4633#discussion_r441874848", "createdAt": "2020-06-17T22:48:07Z", "author": {"login": "jacob314"}, "path": "testSrc/unit/io/flutter/utils/StdoutJsonParserTest.java", "diffHunk": "@@ -49,6 +51,21 @@ public void appendsWithoutLineBreaks() {\n     );\n   }\n \n+  @Test\n+  public void jsonWithLineBreaks() {\n+    final StdoutJsonParser parser = new StdoutJsonParser();\n+    parser.appendOutput(\"[{'foo':'bar'}]\\ntest\\n\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "441592452e7671bb9e8d2288835801d1ab8ea16e"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyODI4MTgz", "url": "https://github.com/flutter/flutter-intellij/pull/4633#pullrequestreview-432828183", "createdAt": "2020-06-17T22:48:11Z", "commit": {"oid": "441592452e7671bb9e8d2288835801d1ab8ea16e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d72fdea048fe67df3eef4da04832d43a546265c5", "author": {"user": {"login": "helin24", "name": "Helin Shiah"}}, "url": "https://github.com/flutter/flutter-intellij/commit/d72fdea048fe67df3eef4da04832d43a546265c5", "committedDate": "2020-06-18T00:06:36Z", "message": "Add test for removing next newline char"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3123, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}