{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI4ODM5OTU1", "number": 4603, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQyMTowMToxMVrOEDoC1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQyMTowMToxMVrOEDoC1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyMjM3MjY4OnYy", "diffSide": "RIGHT", "path": "src/io/flutter/bazel/WorkspaceCache.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQyMTowMToxMVrOGgwQtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQyMTo1MDozN1rOGgxq2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjk5ODMyNg==", "bodyText": "should we instead return early here after setting\ndisconnected = true;\n?\nsetting cache=null in this case seems a bit odd.", "url": "https://github.com/flutter/flutter-intellij/pull/4603#discussion_r436998326", "createdAt": "2020-06-08T21:01:11Z", "author": {"login": "jacob314"}, "path": "src/io/flutter/bazel/WorkspaceCache.java", "diffHunk": "@@ -129,7 +132,12 @@ public void unsubscribe(Runnable callback) {\n    */\n   private void refresh() {\n     final Workspace workspace = Workspace.loadUncached(project);\n-    if (workspace == cache) return;\n+    if (workspace == cache && !disconnected) return;\n+    if (cache != null && workspace == null) {\n+      disconnected = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a38e23024b6efe759a378e3fea71b05e47ecef13"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzAyMTQwMg==", "bodyText": "I thought it would be better for cache to be null when going on to notify listeners, because the only listener we want to behave differently is the workspace itself so that it keeps watching the previous file. For devices I think we still want the menu to disappear and for developers to not be able to run a project if they're disconnected.", "url": "https://github.com/flutter/flutter-intellij/pull/4603#discussion_r437021402", "createdAt": "2020-06-08T21:50:37Z", "author": {"login": "helin24"}, "path": "src/io/flutter/bazel/WorkspaceCache.java", "diffHunk": "@@ -129,7 +132,12 @@ public void unsubscribe(Runnable callback) {\n    */\n   private void refresh() {\n     final Workspace workspace = Workspace.loadUncached(project);\n-    if (workspace == cache) return;\n+    if (workspace == cache && !disconnected) return;\n+    if (cache != null && workspace == null) {\n+      disconnected = true;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjk5ODMyNg=="}, "originalCommit": {"oid": "a38e23024b6efe759a378e3fea71b05e47ecef13"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 331, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}