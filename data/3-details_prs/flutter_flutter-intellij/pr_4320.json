{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2MDc4NTA5", "number": 4320, "title": "Refactor build script", "bodyText": "@devoncarew This is ready for review. It isn't finished, but a number of technical issues have been solved.", "createdAt": "2020-01-22T21:44:29Z", "url": "https://github.com/flutter/flutter-intellij/pull/4320", "merged": true, "mergeCommit": {"oid": "53304d8d8b547cdebdb6029674bb3f4571db5df1"}, "closed": true, "closedAt": "2020-01-22T22:47:28Z", "author": {"login": "stevemessick"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb88zVzAH2gAyMzY2MDc4NTA5OjI0NGI4NTRlMDgxNTE4ODk5ZDU3OWVlMzAzNjNkZWY3Y2ZhMzEzMmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb892qZAFqTM0Njk1OTI0Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "244b854e081518899d579ee30363def7cfa3132a", "author": {"user": {"login": "stevemessick", "name": null}}, "url": "https://github.com/flutter/flutter-intellij/commit/244b854e081518899d579ee30363def7cfa3132a", "committedDate": "2020-01-22T21:40:46Z", "message": "Refactor build script"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2OTU5MjQ2", "url": "https://github.com/flutter/flutter-intellij/pull/4320#pullrequestreview-346959246", "createdAt": "2020-01-22T22:49:17Z", "commit": {"oid": "244b854e081518899d579ee30363def7cfa3132a"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMjo0OToxOFrOFgtwjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMjo1Mzo1MlrOFgt2vw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTg0ODQ2MQ==", "bodyText": "Add a TODO: here is this is temporary?", "url": "https://github.com/flutter/flutter-intellij/pull/4320#discussion_r369848461", "createdAt": "2020-01-22T22:49:18Z", "author": {"login": "devoncarew"}, "path": "tool/kokoro/test.sh", "diffHunk": "@@ -1,36 +1,15 @@\n #!/bin/bash\n \n-# Fail on any error.\n-set -e\n \n-# Display commands being run. Only do this while debugging and be careful\n-# that no confidential information is displayed.\n-# set -x\n-\n-git clone --depth 1 https://github.com/flutter/flutter.git ../flutter\n-export PATH=\"$PATH\":`pwd`/../flutter/bin:`pwd`/../flutter/bin/cache/dart-sdk/bin\n-flutter config --no-analytics\n-flutter doctor\n-export FLUTTER_SDK=`pwd`/../flutter\n-\n-java -version\n-echo \"JAVA_HOME=$JAVA_HOME\"\n-\n-echo \"install ant\"\n-curl https://www-us.apache.org/dist//ant/binaries/apache-ant-1.10.7-bin.tar.gz > ../ant.tar.gz\n-(cd ..; tar fx ant.tar.gz)\n-export PATH=$PATH:`pwd`/../apache-ant-1.10.7/bin\n-\n-echo \"pub get `pwd`\"; pub get --no-precompile\n-(cd testData/sample_tests; echo \"pub get `pwd`\"; pub get --no-precompile)\n-(cd tool/plugin; echo \"pub get `pwd`\"; pub get --no-precompile)\n+source ./setup.sh\n+setup\n \n echo \"kokoro test start\"\n ./bin/plugin test\n \n echo \"kokoro test finished\"\n \n-\n+# This is temporary, duplicating build.sh", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "244b854e081518899d579ee30363def7cfa3132a"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTg0ODk5OA==", "bodyText": "This shallow clone is faster, but this checkout of flutter won't have accurate access to things like its version info (which is stored in git metadata). I assume this won't be a problem for our use of Flutter here, but FYI if we run into issues down the road.", "url": "https://github.com/flutter/flutter-intellij/pull/4320#discussion_r369848998", "createdAt": "2020-01-22T22:50:51Z", "author": {"login": "devoncarew"}, "path": "tool/kokoro/setup.sh", "diffHunk": "@@ -0,0 +1,29 @@\n+#!/bin/bash\n+\n+# Initialize everything required by the plugin tool.\n+setup() {\n+  # Fail on any error.\n+  set -e\n+\n+  # Display commands being run. Only do this while debugging and be careful\n+  # that no confidential information is displayed.\n+  # set -x\n+\n+  git clone --depth 1 https://github.com/flutter/flutter.git ../flutter", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "244b854e081518899d579ee30363def7cfa3132a"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTg1MDA0Nw==", "bodyText": "www-us.apache.org/dist//ant/binaries... ==> www-us.apache.org/dist/ant/binaries (remove a double //)", "url": "https://github.com/flutter/flutter-intellij/pull/4320#discussion_r369850047", "createdAt": "2020-01-22T22:53:52Z", "author": {"login": "devoncarew"}, "path": "tool/kokoro/setup.sh", "diffHunk": "@@ -0,0 +1,29 @@\n+#!/bin/bash\n+\n+# Initialize everything required by the plugin tool.\n+setup() {\n+  # Fail on any error.\n+  set -e\n+\n+  # Display commands being run. Only do this while debugging and be careful\n+  # that no confidential information is displayed.\n+  # set -x\n+\n+  git clone --depth 1 https://github.com/flutter/flutter.git ../flutter\n+  export PATH=\"$PATH\":`pwd`/../flutter/bin:`pwd`/../flutter/bin/cache/dart-sdk/bin\n+  flutter config --no-analytics\n+  flutter doctor\n+  export FLUTTER_SDK=`pwd`/../flutter\n+\n+  java -version\n+  echo \"JAVA_HOME=$JAVA_HOME\"\n+\n+  echo \"install ant\"\n+  curl https://www-us.apache.org/dist//ant/binaries/apache-ant-1.10.7-bin.tar.gz > ../ant.tar.gz", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "244b854e081518899d579ee30363def7cfa3132a"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1640, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}