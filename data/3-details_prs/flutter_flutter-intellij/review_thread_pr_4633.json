{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2MDg2ODY0", "number": 4633, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QyMjo0NToyMFrOEGipQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QyMjo0ODowN1rOEGirSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1Mjk0NTMxOnYy", "diffSide": "RIGHT", "path": "src/io/flutter/utils/StdoutJsonParser.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QyMjo0NToyMFrOGlZ2VQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QyMjo0NToyMFrOGlZ2VQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg3NDAwNQ==", "bodyText": "a little odd that we don't flush when the c is a '\\n'\nis this really\nassert(c!= '\\n');\n?", "url": "https://github.com/flutter/flutter-intellij/pull/4633#discussion_r441874005", "createdAt": "2020-06-17T22:45:20Z", "author": {"login": "jacob314"}, "path": "src/io/flutter/utils/StdoutJsonParser.java", "diffHunk": "@@ -32,11 +33,25 @@ public void appendOutput(String string) {\n       if (eatNextEol) {\n         eatNextEol = false;\n \n-        if (c == '\\n' || c == '\\r') {\n+        if (c == '\\n') {\n+          continue;\n+        }\n+\n+        if (c == '\\r' && !isPotentialWindowsReturn) {\n+          eatNextEol = true;\n+          isPotentialWindowsReturn = true;\n           continue;\n         }\n       }\n \n+      if (isPotentialWindowsReturn) {\n+        isPotentialWindowsReturn = false;\n+\n+        if (c != '\\n') {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "441592452e7671bb9e8d2288835801d1ab8ea16e"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1Mjk1MDQ5OnYy", "diffSide": "RIGHT", "path": "testSrc/unit/io/flutter/utils/StdoutJsonParserTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QyMjo0ODowN1rOGlZ5oA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQwMDoyNDoxMlrOGlbl5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg3NDg0OA==", "bodyText": "somewhat minor: do we have to worry about \\r or \\n in the middle of a json block? I don't know off the top of my head how the dart json encoder deals with them.", "url": "https://github.com/flutter/flutter-intellij/pull/4633#discussion_r441874848", "createdAt": "2020-06-17T22:48:07Z", "author": {"login": "jacob314"}, "path": "testSrc/unit/io/flutter/utils/StdoutJsonParserTest.java", "diffHunk": "@@ -49,6 +51,21 @@ public void appendsWithoutLineBreaks() {\n     );\n   }\n \n+  @Test\n+  public void jsonWithLineBreaks() {\n+    final StdoutJsonParser parser = new StdoutJsonParser();\n+    parser.appendOutput(\"[{'foo':'bar'}]\\ntest\\n\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "441592452e7671bb9e8d2288835801d1ab8ea16e"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTkwMjU2NQ==", "bodyText": "It seems this is dealt with fine, I tried putting \\r, \\n and \\r\\n in the middle of flutter tools output and it's recognized correctly.", "url": "https://github.com/flutter/flutter-intellij/pull/4633#discussion_r441902565", "createdAt": "2020-06-18T00:24:12Z", "author": {"login": "helin24"}, "path": "testSrc/unit/io/flutter/utils/StdoutJsonParserTest.java", "diffHunk": "@@ -49,6 +51,21 @@ public void appendsWithoutLineBreaks() {\n     );\n   }\n \n+  @Test\n+  public void jsonWithLineBreaks() {\n+    final StdoutJsonParser parser = new StdoutJsonParser();\n+    parser.appendOutput(\"[{'foo':'bar'}]\\ntest\\n\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg3NDg0OA=="}, "originalCommit": {"oid": "441592452e7671bb9e8d2288835801d1ab8ea16e"}, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 473, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}