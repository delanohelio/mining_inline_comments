{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2MzkzOTIz", "number": 4423, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMzowNToyNlrODm4vFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMzowNjowNVrODm4viQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMTAyMDM2OnYy", "diffSide": "RIGHT", "path": "flutter-studio/src/io/flutter/project/FlutterProjectSystem.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMzowNToyNlrOF0kDoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxNDo1NjozNFrOF06tvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY2MTAyNA==", "bodyText": "does this need \"// for 4.0\"", "url": "https://github.com/flutter/flutter-intellij/pull/4423#discussion_r390661024", "createdAt": "2020-03-10T23:05:26Z", "author": {"login": "kenzieschmoll"}, "path": "flutter-studio/src/io/flutter/project/FlutterProjectSystem.java", "diffHunk": "@@ -102,27 +102,19 @@ public ProjectSystemSyncManager getSyncManager() {\n     }\n   }\n \n-  @SuppressWarnings(\"override\")\n-  public boolean getAugmentRClasses() {\n-    // TODO(messick) Remove when 3.5 is stable\n-    return false;\n-  }\n-\n   @NotNull\n   @SuppressWarnings(\"override\")\n   public LightResourceClassService getLightResourceClassService() {\n     return gradleProjectSystem.getLightResourceClassService();\n   }\n \n-  @NotNull\n-  @SuppressWarnings(\"override\")\n-  public SourceProvidersFactory getSourceProvidersFactory() {\n-    return gradleProjectSystem.getSourceProvidersFactory();\n-  }\n+  //@NotNull\n+  //public SourceProvidersFactory getSourceProvidersFactory() {\n+  //  return gradleProjectSystem.getSourceProvidersFactory();\n+  //} // for 4.0\n \n-  @NotNull\n-  @SuppressWarnings(\"override\")\n-  public Collection<Module> getSubmodules() {\n-    return gradleProjectSystem.getSubmodules();\n-  }\n+  //@NotNull\n+  //public Collection<Module> getSubmodules() {\n+  //  return gradleProjectSystem.getSubmodules();\n+  //}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "286e57dbce775699c8ae8048abfb5ce860254f23"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTAzMjI1NQ==", "bodyText": "It is not used. I didn't delete it because I think it will be needed in a later version.", "url": "https://github.com/flutter/flutter-intellij/pull/4423#discussion_r391032255", "createdAt": "2020-03-11T14:56:34Z", "author": {"login": "stevemessick"}, "path": "flutter-studio/src/io/flutter/project/FlutterProjectSystem.java", "diffHunk": "@@ -102,27 +102,19 @@ public ProjectSystemSyncManager getSyncManager() {\n     }\n   }\n \n-  @SuppressWarnings(\"override\")\n-  public boolean getAugmentRClasses() {\n-    // TODO(messick) Remove when 3.5 is stable\n-    return false;\n-  }\n-\n   @NotNull\n   @SuppressWarnings(\"override\")\n   public LightResourceClassService getLightResourceClassService() {\n     return gradleProjectSystem.getLightResourceClassService();\n   }\n \n-  @NotNull\n-  @SuppressWarnings(\"override\")\n-  public SourceProvidersFactory getSourceProvidersFactory() {\n-    return gradleProjectSystem.getSourceProvidersFactory();\n-  }\n+  //@NotNull\n+  //public SourceProvidersFactory getSourceProvidersFactory() {\n+  //  return gradleProjectSystem.getSourceProvidersFactory();\n+  //} // for 4.0\n \n-  @NotNull\n-  @SuppressWarnings(\"override\")\n-  public Collection<Module> getSubmodules() {\n-    return gradleProjectSystem.getSubmodules();\n-  }\n+  //@NotNull\n+  //public Collection<Module> getSubmodules() {\n+  //  return gradleProjectSystem.getSubmodules();\n+  //}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY2MTAyNA=="}, "originalCommit": {"oid": "286e57dbce775699c8ae8048abfb5ce860254f23"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMTAyMTUzOnYy", "diffSide": "RIGHT", "path": "tool/plugin/lib/plugin.dart", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQyMzowNjowNVrOF0kEYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxNDo1Nzo1NlrOF06xtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY2MTIxNg==", "bodyText": "do we need to uncomment the @NotNull  annotations too?", "url": "https://github.com/flutter/flutter-intellij/pull/4423#discussion_r390661216", "createdAt": "2020-03-10T23:06:05Z", "author": {"login": "kenzieschmoll"}, "path": "tool/plugin/lib/plugin.dart", "diffHunk": "@@ -715,26 +715,60 @@ class BuildCommand extends ProductCommand {\n           'baseDir.getPath()',\n         );\n         processedFile.writeAsStringSync(source);\n+      }\n \n+      if (spec.version.startsWith('4.')) {\n         processedFile = File(\n             'flutter-studio/src/io/flutter/module/FlutterDescriptionProvider.java');\n         source = processedFile.readAsStringSync();\n         files[processedFile] = source;\n         source = source.replaceAll(\n-          'import com.android.tools.idea.npw.model.ProjectSyncInvoker',\n-          'import com.android.tools.idea.npw.model.NewModuleModel',\n+          'public SkippableWizardStep createStep(@NotNull NewModuleModel model) {',\n+          'public SkippableWizardStep createStep(@NotNull Project project, @NotNull ProjectSyncInvoker invoker, String parent) {',\n+        );\n+        source = source.replaceAll(\n+          'model(model.getProject().getValue()',\n+          'model(project',\n+        );\n+        source = source.replaceAll(\n+          'NewModuleModel',\n+          'NewAndroidModuleModel',\n+        );\n+        processedFile.writeAsStringSync(source);\n+\n+        processedFile = File(\n+            'flutter-studio/src/io/flutter/android/AndroidModuleLibraryManager.java');\n+        source = processedFile.readAsStringSync();\n+        files[processedFile] = source;\n+        source = source.replaceAll(\n+          'super(filePath.toString()',\n+          'super(filePath',\n+        );\n+        source = source.replaceAll(\n+          'getStateStore().setPath(path.toString()',\n+          'getStateStore().setPath(path',\n+        );\n+        processedFile.writeAsStringSync(source);\n+\n+        processedFile = File(\n+            'flutter-studio/src/io/flutter/project/FlutterProjectSystem.java');\n+        source = processedFile.readAsStringSync();\n+        files[processedFile] = source;\n+        source = source.replaceAll(\n+          '//import com.android.tools.idea.projectsystem.SourceProvidersFactory;',\n+          'import com.android.tools.idea.projectsystem.SourceProvidersFactory;',\n         );\n         source = source.replaceAll(\n-          'createStep(@NotNull Project model, @NotNull ProjectSyncInvoker invoker, String parent)',\n-          'createStep(@NotNull NewModuleModel model)',\n+          '//public SourceProvidersFactory getSourceProvidersFactory() {',\n+          'public SourceProvidersFactory getSourceProvidersFactory() {',\n         );\n         source = source.replaceAll(\n-          'FlutterProjectModel model(@NotNull Project project,',\n-          'FlutterProjectModel model(@NotNull NewModuleModel project,',\n+          '//  return gradleProjectSystem.getSourceProvidersFactory();',\n+          '  return gradleProjectSystem.getSourceProvidersFactory();',\n         );\n         source = source.replaceAll(\n-          'mySharedModel.getValue().project().setValue(project);',\n-          'mySharedModel.getValue().project().setValue(project.getProject().getValue());',\n+          '//} // for 4.0',\n+          '} // for 4.0',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "286e57dbce775699c8ae8048abfb5ce860254f23"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTAzMzI2OA==", "bodyText": "Those are only used by IntelliJ, and the editing is only temporary during a build, so I don't think there's a need.", "url": "https://github.com/flutter/flutter-intellij/pull/4423#discussion_r391033268", "createdAt": "2020-03-11T14:57:56Z", "author": {"login": "stevemessick"}, "path": "tool/plugin/lib/plugin.dart", "diffHunk": "@@ -715,26 +715,60 @@ class BuildCommand extends ProductCommand {\n           'baseDir.getPath()',\n         );\n         processedFile.writeAsStringSync(source);\n+      }\n \n+      if (spec.version.startsWith('4.')) {\n         processedFile = File(\n             'flutter-studio/src/io/flutter/module/FlutterDescriptionProvider.java');\n         source = processedFile.readAsStringSync();\n         files[processedFile] = source;\n         source = source.replaceAll(\n-          'import com.android.tools.idea.npw.model.ProjectSyncInvoker',\n-          'import com.android.tools.idea.npw.model.NewModuleModel',\n+          'public SkippableWizardStep createStep(@NotNull NewModuleModel model) {',\n+          'public SkippableWizardStep createStep(@NotNull Project project, @NotNull ProjectSyncInvoker invoker, String parent) {',\n+        );\n+        source = source.replaceAll(\n+          'model(model.getProject().getValue()',\n+          'model(project',\n+        );\n+        source = source.replaceAll(\n+          'NewModuleModel',\n+          'NewAndroidModuleModel',\n+        );\n+        processedFile.writeAsStringSync(source);\n+\n+        processedFile = File(\n+            'flutter-studio/src/io/flutter/android/AndroidModuleLibraryManager.java');\n+        source = processedFile.readAsStringSync();\n+        files[processedFile] = source;\n+        source = source.replaceAll(\n+          'super(filePath.toString()',\n+          'super(filePath',\n+        );\n+        source = source.replaceAll(\n+          'getStateStore().setPath(path.toString()',\n+          'getStateStore().setPath(path',\n+        );\n+        processedFile.writeAsStringSync(source);\n+\n+        processedFile = File(\n+            'flutter-studio/src/io/flutter/project/FlutterProjectSystem.java');\n+        source = processedFile.readAsStringSync();\n+        files[processedFile] = source;\n+        source = source.replaceAll(\n+          '//import com.android.tools.idea.projectsystem.SourceProvidersFactory;',\n+          'import com.android.tools.idea.projectsystem.SourceProvidersFactory;',\n         );\n         source = source.replaceAll(\n-          'createStep(@NotNull Project model, @NotNull ProjectSyncInvoker invoker, String parent)',\n-          'createStep(@NotNull NewModuleModel model)',\n+          '//public SourceProvidersFactory getSourceProvidersFactory() {',\n+          'public SourceProvidersFactory getSourceProvidersFactory() {',\n         );\n         source = source.replaceAll(\n-          'FlutterProjectModel model(@NotNull Project project,',\n-          'FlutterProjectModel model(@NotNull NewModuleModel project,',\n+          '//  return gradleProjectSystem.getSourceProvidersFactory();',\n+          '  return gradleProjectSystem.getSourceProvidersFactory();',\n         );\n         source = source.replaceAll(\n-          'mySharedModel.getValue().project().setValue(project);',\n-          'mySharedModel.getValue().project().setValue(project.getProject().getValue());',\n+          '//} // for 4.0',\n+          '} // for 4.0',", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDY2MTIxNg=="}, "originalCommit": {"oid": "286e57dbce775699c8ae8048abfb5ce860254f23"}, "originalPosition": 65}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 289, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}