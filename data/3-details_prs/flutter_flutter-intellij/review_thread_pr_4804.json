{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc5MDc4MDg4", "number": 4804, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxNTo1NToyOVrOEhvUtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxNTo1ODowN1rOEhvZNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzODEzODE1OnYy", "diffSide": "RIGHT", "path": "src/io/flutter/jxbrowser/EmbeddedBrowser.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxNTo1NToyOVrOHPOIpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMTowMzozN1rOHPaPhQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTcyMjI3Ng==", "bodyText": "does HARDWARE_ACCELERATED without the transparent background work on windows? Perhaps add a comment as the placement of the try-catch makes it look like that is the problem not the HARDWARE_ACCELERATED option. I'll put it this way, if I had to pick, HARDWARE_ACCELERATED over enableTransparentBackground as one impacts performance and the other just causes a UI flicker.", "url": "https://github.com/flutter/flutter-intellij/pull/4804#discussion_r485722276", "createdAt": "2020-09-09T15:55:29Z", "author": {"login": "jacob314"}, "path": "src/io/flutter/jxbrowser/EmbeddedBrowser.java", "diffHunk": "@@ -20,19 +21,30 @@\n import java.util.concurrent.atomic.AtomicBoolean;\n \n import static com.teamdev.jxbrowser.engine.RenderingMode.HARDWARE_ACCELERATED;\n+import static com.teamdev.jxbrowser.engine.RenderingMode.OFF_SCREEN;\n \n public class EmbeddedBrowser {\n   public void openPanel(ContentManager contentManager, String tabName, String url) {\n-    final EngineOptions options =\n+    EngineOptions options =\n       EngineOptions.newBuilder(HARDWARE_ACCELERATED).build();\n-    final Engine engine = Engine.newInstance(options);\n-    final Browser browser = engine.newBrowser();\n-    browser.settings().enableTransparentBackground();\n+    Engine engine = Engine.newInstance(options);\n+    Browser browser = engine.newBrowser();\n+\n+    try {\n+      browser.settings().enableTransparentBackground();\n+    } catch (UnsupportedRenderingModeException ex) {\n+      options =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e59e29c09ce87f595d94d5c2a6eab8a435a24f43"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkxNTkzNw==", "bodyText": "I can skip enabling transparent background, but HARDWARE_ACCELERATED mode also causes the window to appear to the left of the panel. Looking into if I can fix this.. maybe a swing issue?", "url": "https://github.com/flutter/flutter-intellij/pull/4804#discussion_r485915937", "createdAt": "2020-09-09T20:54:07Z", "author": {"login": "helin24"}, "path": "src/io/flutter/jxbrowser/EmbeddedBrowser.java", "diffHunk": "@@ -20,19 +21,30 @@\n import java.util.concurrent.atomic.AtomicBoolean;\n \n import static com.teamdev.jxbrowser.engine.RenderingMode.HARDWARE_ACCELERATED;\n+import static com.teamdev.jxbrowser.engine.RenderingMode.OFF_SCREEN;\n \n public class EmbeddedBrowser {\n   public void openPanel(ContentManager contentManager, String tabName, String url) {\n-    final EngineOptions options =\n+    EngineOptions options =\n       EngineOptions.newBuilder(HARDWARE_ACCELERATED).build();\n-    final Engine engine = Engine.newInstance(options);\n-    final Browser browser = engine.newBrowser();\n-    browser.settings().enableTransparentBackground();\n+    Engine engine = Engine.newInstance(options);\n+    Browser browser = engine.newBrowser();\n+\n+    try {\n+      browser.settings().enableTransparentBackground();\n+    } catch (UnsupportedRenderingModeException ex) {\n+      options =", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTcyMjI3Ng=="}, "originalCommit": {"oid": "e59e29c09ce87f595d94d5c2a6eab8a435a24f43"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkxNjgxMg==", "bodyText": "That seems like it is a jxbrowser bug on windows. Swing shouldn't have many windows specific issues.", "url": "https://github.com/flutter/flutter-intellij/pull/4804#discussion_r485916812", "createdAt": "2020-09-09T20:55:49Z", "author": {"login": "jacob314"}, "path": "src/io/flutter/jxbrowser/EmbeddedBrowser.java", "diffHunk": "@@ -20,19 +21,30 @@\n import java.util.concurrent.atomic.AtomicBoolean;\n \n import static com.teamdev.jxbrowser.engine.RenderingMode.HARDWARE_ACCELERATED;\n+import static com.teamdev.jxbrowser.engine.RenderingMode.OFF_SCREEN;\n \n public class EmbeddedBrowser {\n   public void openPanel(ContentManager contentManager, String tabName, String url) {\n-    final EngineOptions options =\n+    EngineOptions options =\n       EngineOptions.newBuilder(HARDWARE_ACCELERATED).build();\n-    final Engine engine = Engine.newInstance(options);\n-    final Browser browser = engine.newBrowser();\n-    browser.settings().enableTransparentBackground();\n+    Engine engine = Engine.newInstance(options);\n+    Browser browser = engine.newBrowser();\n+\n+    try {\n+      browser.settings().enableTransparentBackground();\n+    } catch (UnsupportedRenderingModeException ex) {\n+      options =", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTcyMjI3Ng=="}, "originalCommit": {"oid": "e59e29c09ce87f595d94d5c2a6eab8a435a24f43"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkyMDY0NQ==", "bodyText": "Hmm.. I'll post an issue and see if they have any advice.", "url": "https://github.com/flutter/flutter-intellij/pull/4804#discussion_r485920645", "createdAt": "2020-09-09T21:03:37Z", "author": {"login": "helin24"}, "path": "src/io/flutter/jxbrowser/EmbeddedBrowser.java", "diffHunk": "@@ -20,19 +21,30 @@\n import java.util.concurrent.atomic.AtomicBoolean;\n \n import static com.teamdev.jxbrowser.engine.RenderingMode.HARDWARE_ACCELERATED;\n+import static com.teamdev.jxbrowser.engine.RenderingMode.OFF_SCREEN;\n \n public class EmbeddedBrowser {\n   public void openPanel(ContentManager contentManager, String tabName, String url) {\n-    final EngineOptions options =\n+    EngineOptions options =\n       EngineOptions.newBuilder(HARDWARE_ACCELERATED).build();\n-    final Engine engine = Engine.newInstance(options);\n-    final Browser browser = engine.newBrowser();\n-    browser.settings().enableTransparentBackground();\n+    Engine engine = Engine.newInstance(options);\n+    Browser browser = engine.newBrowser();\n+\n+    try {\n+      browser.settings().enableTransparentBackground();\n+    } catch (UnsupportedRenderingModeException ex) {\n+      options =", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTcyMjI3Ng=="}, "originalCommit": {"oid": "e59e29c09ce87f595d94d5c2a6eab8a435a24f43"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzODE0OTY0OnYy", "diffSide": "RIGHT", "path": "src/io/flutter/jxbrowser/EmbeddedBrowser.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxNTo1ODowN1rOHPOP0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQyMjo0ODowMFrOHPc2Sg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTcyNDExNQ==", "bodyText": "nit: having a variable named finalBrowser is a bit ugly.  A slightly cleaner option would be to have a createBrowser()helper method.\nfinal Browser browser= createBrowser(..)", "url": "https://github.com/flutter/flutter-intellij/pull/4804#discussion_r485724115", "createdAt": "2020-09-09T15:58:07Z", "author": {"login": "jacob314"}, "path": "src/io/flutter/jxbrowser/EmbeddedBrowser.java", "diffHunk": "@@ -20,19 +21,30 @@\n import java.util.concurrent.atomic.AtomicBoolean;\n \n import static com.teamdev.jxbrowser.engine.RenderingMode.HARDWARE_ACCELERATED;\n+import static com.teamdev.jxbrowser.engine.RenderingMode.OFF_SCREEN;\n \n public class EmbeddedBrowser {\n   public void openPanel(ContentManager contentManager, String tabName, String url) {\n-    final EngineOptions options =\n+    EngineOptions options =\n       EngineOptions.newBuilder(HARDWARE_ACCELERATED).build();\n-    final Engine engine = Engine.newInstance(options);\n-    final Browser browser = engine.newBrowser();\n-    browser.settings().enableTransparentBackground();\n+    Engine engine = Engine.newInstance(options);\n+    Browser browser = engine.newBrowser();\n+\n+    try {\n+      browser.settings().enableTransparentBackground();\n+    } catch (UnsupportedRenderingModeException ex) {\n+      options =\n+        EngineOptions.newBuilder(OFF_SCREEN).build();\n+      engine = Engine.newInstance(options);\n+      browser = engine.newBrowser();\n+      browser.settings().enableTransparentBackground();\n+    }\n \n     // Multiple LoadFinished events can occur, but we only need to add content the first time.\n     final AtomicBoolean contentLoaded = new AtomicBoolean(false);\n \n     browser.navigation().loadUrl(url);\n+    final Browser finalBrowser = browser;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e59e29c09ce87f595d94d5c2a6eab8a435a24f43"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTk2MzMzOA==", "bodyText": "If I just skip the transparent browser step, then we don't really need a separate function here.", "url": "https://github.com/flutter/flutter-intellij/pull/4804#discussion_r485963338", "createdAt": "2020-09-09T22:48:00Z", "author": {"login": "helin24"}, "path": "src/io/flutter/jxbrowser/EmbeddedBrowser.java", "diffHunk": "@@ -20,19 +21,30 @@\n import java.util.concurrent.atomic.AtomicBoolean;\n \n import static com.teamdev.jxbrowser.engine.RenderingMode.HARDWARE_ACCELERATED;\n+import static com.teamdev.jxbrowser.engine.RenderingMode.OFF_SCREEN;\n \n public class EmbeddedBrowser {\n   public void openPanel(ContentManager contentManager, String tabName, String url) {\n-    final EngineOptions options =\n+    EngineOptions options =\n       EngineOptions.newBuilder(HARDWARE_ACCELERATED).build();\n-    final Engine engine = Engine.newInstance(options);\n-    final Browser browser = engine.newBrowser();\n-    browser.settings().enableTransparentBackground();\n+    Engine engine = Engine.newInstance(options);\n+    Browser browser = engine.newBrowser();\n+\n+    try {\n+      browser.settings().enableTransparentBackground();\n+    } catch (UnsupportedRenderingModeException ex) {\n+      options =\n+        EngineOptions.newBuilder(OFF_SCREEN).build();\n+      engine = Engine.newInstance(options);\n+      browser = engine.newBrowser();\n+      browser.settings().enableTransparentBackground();\n+    }\n \n     // Multiple LoadFinished events can occur, but we only need to add content the first time.\n     final AtomicBoolean contentLoaded = new AtomicBoolean(false);\n \n     browser.navigation().loadUrl(url);\n+    final Browser finalBrowser = browser;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTcyNDExNQ=="}, "originalCommit": {"oid": "e59e29c09ce87f595d94d5c2a6eab8a435a24f43"}, "originalPosition": 39}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 531, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}