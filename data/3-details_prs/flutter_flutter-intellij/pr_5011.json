{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEyNjM3NTgw", "number": 5011, "title": "Decouple navigation to inspector selection location from IntelliJ.", "bodyText": "", "createdAt": "2020-10-29T23:35:32Z", "url": "https://github.com/flutter/flutter-intellij/pull/5011", "merged": true, "mergeCommit": {"oid": "97c537ce423c24ba518bf44d0e992b92d336e654"}, "closed": true, "closedAt": "2020-10-30T00:09:37Z", "author": {"login": "jacob314"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdXa2rggH2gAyNTEyNjM3NTgwOjgzMDhlMDJiNTI3ZjUzNmFiNTljMWE0YTA1Y2Y3Y2U2ODkzNzQ1YjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXbV_agFqTUyMDE4Nzk5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8308e02b527f536ab59c1a4a05cf7ce6893745b2", "author": {"user": {"login": "jacob314", "name": "Jacob Richman"}}, "url": "https://github.com/flutter/flutter-intellij/commit/8308e02b527f536ab59c1a4a05cf7ce6893745b2", "committedDate": "2020-10-29T23:34:45Z", "message": "Decouple navigation to inspector selection location from IntelliJ."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwMTYwODk3", "url": "https://github.com/flutter/flutter-intellij/pull/5011#pullrequestreview-520160897", "createdAt": "2020-10-29T23:37:36Z", "commit": {"oid": "8308e02b527f536ab59c1a4a05cf7ce6893745b2"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMzozNzozNlrOHqyXNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMzo1NDoyM1rOHqyqrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYyNzM4Mw==", "bodyText": "typo - and", "url": "https://github.com/flutter/flutter-intellij/pull/5011#discussion_r514627383", "createdAt": "2020-10-29T23:37:36Z", "author": {"login": "helin24"}, "path": "src/io/flutter/inspector/InspectorService.java", "diffHunk": "@@ -398,12 +398,11 @@ private void onVmServiceReceived(String streamId, Event event) {\n     switch (streamId) {\n       case VmService.DEBUG_STREAM_ID: {\n         if (event.getKind() == EventKind.Inspect) {\n-          // Make sure the WidgetInspector on the device switches to show the inspected object\n-          // if the inspected object is a Widget or RenderObject.\n+          // Assume the inspector in Flutter DevTools or the on device\n+          // has already set the selection on the device so we don't have to.\n+          // Having multiple clients set the selection risks race conditions\n+          // where the selection ping-pongs back an forth.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8308e02b527f536ab59c1a4a05cf7ce6893745b2"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYyNzUyNg==", "bodyText": "typo - on the", "url": "https://github.com/flutter/flutter-intellij/pull/5011#discussion_r514627526", "createdAt": "2020-10-29T23:38:05Z", "author": {"login": "helin24"}, "path": "src/io/flutter/inspector/InspectorService.java", "diffHunk": "@@ -398,12 +398,11 @@ private void onVmServiceReceived(String streamId, Event event) {\n     switch (streamId) {\n       case VmService.DEBUG_STREAM_ID: {\n         if (event.getKind() == EventKind.Inspect) {\n-          // Make sure the WidgetInspector on the device switches to show the inspected object\n-          // if the inspected object is a Widget or RenderObject.\n+          // Assume the inspector in Flutter DevTools or the on device", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8308e02b527f536ab59c1a4a05cf7ce6893745b2"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYzMjM2Ng==", "bodyText": "Is this for debugging?", "url": "https://github.com/flutter/flutter-intellij/pull/5011#discussion_r514632366", "createdAt": "2020-10-29T23:54:23Z", "author": {"login": "helin24"}, "path": "src/io/flutter/view/FlutterView.java", "diffHunk": "@@ -115,6 +119,29 @@ public FlutterView(@NotNull Project project) {\n \n     shouldAutoHorizontalScroll.listen(state::setShouldAutoScroll);\n     highlightNodesShownInBothTrees.listen(state::setHighlightNodesShownInBothTrees);\n+\n+    InspectorGroupManagerService.getInstance(project).addListener(new InspectorGroupManagerService.Listener() {\n+      @Override\n+      public void onInspectorAvailable(InspectorService service) { }\n+\n+      @Override\n+      public void onSelectionChanged(DiagnosticsNode selection) {\n+        if (selection != null) {\n+          final InspectorSourceLocation location = selection.getCreationLocation();\n+          if (location != null) {\n+            final XSourcePosition sourcePosition = location.getXSourcePosition();\n+            sourcePosition.createNavigatable(project).navigate(true);\n+          }\n+          if (selection.isCreatedByLocalProject()) {\n+            final XSourcePosition position = selection.getCreationLocation().getXSourcePosition();\n+            if (position != null) {\n+              position.createNavigatable(project).navigate(false);\n+            }\n+          }\n+        }\n+        System.out.println(\"XXX selection changed to :\" + selection);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8308e02b527f536ab59c1a4a05cf7ce6893745b2"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b1778e89790eb611b2f0b9c8d6a6940864ffa09", "author": {"user": {"login": "jacob314", "name": "Jacob Richman"}}, "url": "https://github.com/flutter/flutter-intellij/commit/7b1778e89790eb611b2f0b9c8d6a6940864ffa09", "committedDate": "2020-10-29T23:57:53Z", "message": "Code review comment fixes."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwMTc2ODY1", "url": "https://github.com/flutter/flutter-intellij/pull/5011#pullrequestreview-520176865", "createdAt": "2020-10-30T00:01:04Z", "commit": {"oid": "7b1778e89790eb611b2f0b9c8d6a6940864ffa09"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMDowMTowNVrOHqyyQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMDowMToyNlrOHqyysA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYzNDMwNw==", "bodyText": "Assume the inspector in Flutter DevTools or on the device widget", "url": "https://github.com/flutter/flutter-intellij/pull/5011#discussion_r514634307", "createdAt": "2020-10-30T00:01:05Z", "author": {"login": "helin24"}, "path": "src/io/flutter/inspector/InspectorService.java", "diffHunk": "@@ -398,12 +398,11 @@ private void onVmServiceReceived(String streamId, Event event) {\n     switch (streamId) {\n       case VmService.DEBUG_STREAM_ID: {\n         if (event.getKind() == EventKind.Inspect) {\n-          // Make sure the WidgetInspector on the device switches to show the inspected object\n-          // if the inspected object is a Widget or RenderObject.\n+          // Assume the inspector in Flutter DevTools or the on device widget", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b1778e89790eb611b2f0b9c8d6a6940864ffa09"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYzNDQxNg==", "bodyText": "add the period back after \"have to.\"", "url": "https://github.com/flutter/flutter-intellij/pull/5011#discussion_r514634416", "createdAt": "2020-10-30T00:01:26Z", "author": {"login": "helin24"}, "path": "src/io/flutter/inspector/InspectorService.java", "diffHunk": "@@ -398,12 +398,11 @@ private void onVmServiceReceived(String streamId, Event event) {\n     switch (streamId) {\n       case VmService.DEBUG_STREAM_ID: {\n         if (event.getKind() == EventKind.Inspect) {\n-          // Make sure the WidgetInspector on the device switches to show the inspected object\n-          // if the inspected object is a Widget or RenderObject.\n+          // Assume the inspector in Flutter DevTools or the on device widget\n+          // inspector has already set the selection on the device so we don't\n+          // have to Having multiple clients set the selection risks race", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b1778e89790eb611b2f0b9c8d6a6940864ffa09"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75d5e6e220c106e2a8f399a90814958e0aeb04f6", "author": {"user": {"login": "jacob314", "name": "Jacob Richman"}}, "url": "https://github.com/flutter/flutter-intellij/commit/75d5e6e220c106e2a8f399a90814958e0aeb04f6", "committedDate": "2020-10-30T00:06:37Z", "message": "Comment fixes."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwMTg3OTk2", "url": "https://github.com/flutter/flutter-intellij/pull/5011#pullrequestreview-520187996", "createdAt": "2020-10-30T00:08:57Z", "commit": {"oid": "75d5e6e220c106e2a8f399a90814958e0aeb04f6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3000, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}