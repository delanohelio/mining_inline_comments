{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA0NDQ5NTQ4", "number": 4969, "title": "Show option to open browser DevTools on general download failure", "bodyText": "We are currently only offering an option to retry the JxBrowser download if it failed; we should offer the option to open DevTools in the normal browser as well.", "createdAt": "2020-10-15T23:19:51Z", "url": "https://github.com/flutter/flutter-intellij/pull/4969", "merged": true, "mergeCommit": {"oid": "b04c49c4e5508cf12a9204063aaec2fcf971a16c"}, "closed": true, "closedAt": "2020-10-16T18:21:56Z", "author": {"login": "helin24"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdS6Ij5gH2gAyNTA0NDQ5NTQ4OjZjMTM4NWE1NDI1OTkzNzAwNGEwYTllMWJkYzdjMDZmZWE3MDcxMzI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdTKdybgH2gAyNTA0NDQ5NTQ4OjM5MTZhN2M0MzkwNWVjYTczYmViYjFmMzdhYTk3MzAyMTcwOTJjNzc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6c1385a54259937004a0a9e1bdc7c06fea707132", "author": {"user": {"login": "helin24", "name": "Helin Shiah"}}, "url": "https://github.com/flutter/flutter-intellij/commit/6c1385a54259937004a0a9e1bdc7c06fea707132", "committedDate": "2020-10-15T23:11:43Z", "message": "Show option to open browser DevTools on general download failure"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNjc5NjUz", "url": "https://github.com/flutter/flutter-intellij/pull/4969#pullrequestreview-510679653", "createdAt": "2020-10-16T17:42:32Z", "commit": {"oid": "6c1385a54259937004a0a9e1bdc7c06fea707132"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxNzo0MjozMlrOHjKJeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQxNzo0Mjo1MFrOHjKKJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjYyODQ3Mg==", "bodyText": "Retry installation ?", "url": "https://github.com/flutter/flutter-intellij/pull/4969#discussion_r506628472", "createdAt": "2020-10-16T17:42:32Z", "author": {"login": "devoncarew"}, "path": "src/io/flutter/view/FlutterView.java", "diffHunk": "@@ -462,27 +463,33 @@ else if (newStatus.equals(JxBrowserStatus.INSTALLATION_FAILED)) {\n     catch (TimeoutException e) {\n       // TODO(helin24): Are there better options for this case? e.g. stop installation and retry, link to open in browser?\n       presentLabel(toolWindow, INSTALLATION_TIMED_OUT_LABEL);\n-      FlutterInitializer.getAnalytics().sendEvent(\"jxbrowser\", \"timedOut\");\n+      FlutterInitializer.getAnalytics().sendEvent(JxBrowserManager.ANALYTICS_CATEGORY, \"timedOut\");\n     }\n   }\n \n   protected void handleJxBrowserInstallationFailed(FlutterApp app, InspectorService inspectorService, ToolWindow toolWindow) {\n+    final List<LabelInput> inputs = new ArrayList<>();\n+\n     if (!JxBrowserUtils.licenseIsSet()) {\n       // If the license isn't available, allow the user to open the equivalent page in a non-embedded browser window.\n-      presentClickableLabel(\n-        toolWindow, \"The JxBrowser license could not be found.\", \"Open DevTools in the browser?\",\n-        (linkLabel, data) -> {\n-          presentDevTools(app, inspectorService, toolWindow, false);\n-        });\n+      inputs.add(new LabelInput(\"The JxBrowser license could not be found.\"));\n+      inputs.add(new LabelInput(\"Open DevTools in the browser?\", (linkLabel, data) -> {\n+        presentDevTools(app, inspectorService, toolWindow, false);\n+      }));\n     }\n     else {\n-      // Allow the user to manually restart.\n-      presentClickableLabel(\n-        toolWindow, \"JxBrowser installation failed.\", \"Retry?\", (linkLabel, data) -> {\n-          JxBrowserManager.getInstance().retryFromFailed(app.getProject());\n-          handleJxBrowserInstallationInProgress(app, inspectorService, toolWindow);\n-        });\n+      // Allow the user to manually restart or open the equivalent page in a non-embedded browser window.\n+      inputs.add(new LabelInput(\"JxBrowser installation failed.\"));\n+      inputs.add(new LabelInput(\"Retry?\", (linkLabel, data) -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c1385a54259937004a0a9e1bdc7c06fea707132"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjYyODY0Ng==", "bodyText": "Open DevTools in a browser  ?", "url": "https://github.com/flutter/flutter-intellij/pull/4969#discussion_r506628646", "createdAt": "2020-10-16T17:42:50Z", "author": {"login": "devoncarew"}, "path": "src/io/flutter/view/FlutterView.java", "diffHunk": "@@ -462,27 +463,33 @@ else if (newStatus.equals(JxBrowserStatus.INSTALLATION_FAILED)) {\n     catch (TimeoutException e) {\n       // TODO(helin24): Are there better options for this case? e.g. stop installation and retry, link to open in browser?\n       presentLabel(toolWindow, INSTALLATION_TIMED_OUT_LABEL);\n-      FlutterInitializer.getAnalytics().sendEvent(\"jxbrowser\", \"timedOut\");\n+      FlutterInitializer.getAnalytics().sendEvent(JxBrowserManager.ANALYTICS_CATEGORY, \"timedOut\");\n     }\n   }\n \n   protected void handleJxBrowserInstallationFailed(FlutterApp app, InspectorService inspectorService, ToolWindow toolWindow) {\n+    final List<LabelInput> inputs = new ArrayList<>();\n+\n     if (!JxBrowserUtils.licenseIsSet()) {\n       // If the license isn't available, allow the user to open the equivalent page in a non-embedded browser window.\n-      presentClickableLabel(\n-        toolWindow, \"The JxBrowser license could not be found.\", \"Open DevTools in the browser?\",\n-        (linkLabel, data) -> {\n-          presentDevTools(app, inspectorService, toolWindow, false);\n-        });\n+      inputs.add(new LabelInput(\"The JxBrowser license could not be found.\"));\n+      inputs.add(new LabelInput(\"Open DevTools in the browser?\", (linkLabel, data) -> {\n+        presentDevTools(app, inspectorService, toolWindow, false);\n+      }));\n     }\n     else {\n-      // Allow the user to manually restart.\n-      presentClickableLabel(\n-        toolWindow, \"JxBrowser installation failed.\", \"Retry?\", (linkLabel, data) -> {\n-          JxBrowserManager.getInstance().retryFromFailed(app.getProject());\n-          handleJxBrowserInstallationInProgress(app, inspectorService, toolWindow);\n-        });\n+      // Allow the user to manually restart or open the equivalent page in a non-embedded browser window.\n+      inputs.add(new LabelInput(\"JxBrowser installation failed.\"));\n+      inputs.add(new LabelInput(\"Retry?\", (linkLabel, data) -> {\n+        JxBrowserManager.getInstance().retryFromFailed(app.getProject());\n+        handleJxBrowserInstallationInProgress(app, inspectorService, toolWindow);\n+      }));\n+      inputs.add(new LabelInput(\"Alternatively, open Devtools in the browser.\", (linkLabel, data) -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c1385a54259937004a0a9e1bdc7c06fea707132"}, "originalPosition": 45}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3916a7c43905eca73bebb1f37aa9730217092c77", "author": {"user": {"login": "helin24", "name": "Helin Shiah"}}, "url": "https://github.com/flutter/flutter-intellij/commit/3916a7c43905eca73bebb1f37aa9730217092c77", "committedDate": "2020-10-16T18:13:23Z", "message": "Edit wording"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3106, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}