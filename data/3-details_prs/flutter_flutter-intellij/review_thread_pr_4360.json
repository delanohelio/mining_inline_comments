{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcxNTk0NTg4", "number": 4360, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxODo0MDoyMVrODekCVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxODo0NDoyNFrODekHYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzMzc0Mjk0OnYy", "diffSide": "RIGHT", "path": "tool/plugin/lib/plugin.dart", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxODo0MDoyMVrOFnxKJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxOTowODoxMVrOFnyEBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI0NDE5Nw==", "bodyText": "Do we need to fail the build here?", "url": "https://github.com/flutter/flutter-intellij/pull/4360#discussion_r377244197", "createdAt": "2020-02-10T18:40:21Z", "author": {"login": "devoncarew"}, "path": "tool/plugin/lib/plugin.dart", "diffHunk": "@@ -241,7 +253,7 @@ Future<bool> performReleaseChecks(ProductCommand cmd) async {\n           log('the .travis.yml file needs updating: plugin generate');\n         }\n       } else {\n-        log('the current git branch must be named \"release_${cmd.releaseMajor}\"');\n+        log('the current git branch must be named \"$expectedName\"');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46234ef2e9b29f676ab53edae9f654589851d1b3"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI1OTAxNQ==", "bodyText": "It does fail. The function returns false, which causes failure.", "url": "https://github.com/flutter/flutter-intellij/pull/4360#discussion_r377259015", "createdAt": "2020-02-10T19:08:11Z", "author": {"login": "stevemessick"}, "path": "tool/plugin/lib/plugin.dart", "diffHunk": "@@ -241,7 +253,7 @@ Future<bool> performReleaseChecks(ProductCommand cmd) async {\n           log('the .travis.yml file needs updating: plugin generate');\n         }\n       } else {\n-        log('the current git branch must be named \"release_${cmd.releaseMajor}\"');\n+        log('the current git branch must be named \"$expectedName\"');", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI0NDE5Nw=="}, "originalCommit": {"oid": "46234ef2e9b29f676ab53edae9f654589851d1b3"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzMzc0NjU2OnYy", "diffSide": "RIGHT", "path": "tool/plugin/lib/plugin.dart", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxODo0MTozMFrOFnxMbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxOTowODoyNFrOFnyEWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI0NDc4Mg==", "bodyText": "Do we have the ability to publish a rev to a weekly dev build? What if we find a P0 in the dev channel and what to patch it in order to help validate a fix? a dev channel .1", "url": "https://github.com/flutter/flutter-intellij/pull/4360#discussion_r377244782", "createdAt": "2020-02-10T18:41:30Z", "author": {"login": "devoncarew"}, "path": "tool/plugin/lib/plugin.dart", "diffHunk": "@@ -271,6 +283,15 @@ void separator(String name) {\n   log('${ansi.red}${ansi.bold}$name${ansi.none}', indent: false);\n }\n \n+int get devBuildNumber {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46234ef2e9b29f676ab53edae9f654589851d1b3"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI1OTA5OQ==", "bodyText": "We don't have that currently. We can add it if needed. We'd probably have to add a --patch option or similar, and it should work for stable, master, and dev builds.", "url": "https://github.com/flutter/flutter-intellij/pull/4360#discussion_r377259099", "createdAt": "2020-02-10T19:08:24Z", "author": {"login": "stevemessick"}, "path": "tool/plugin/lib/plugin.dart", "diffHunk": "@@ -271,6 +283,15 @@ void separator(String name) {\n   log('${ansi.red}${ansi.bold}$name${ansi.none}', indent: false);\n }\n \n+int get devBuildNumber {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI0NDc4Mg=="}, "originalCommit": {"oid": "46234ef2e9b29f676ab53edae9f654589851d1b3"}, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzMzc1MjgxOnYy", "diffSide": "RIGHT", "path": "tool/plugin/lib/plugin.dart", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxODo0MzoyOVrOFnxQew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxOTowODozM1rOFnyEmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI0NTgxOQ==", "bodyText": "num is a type; I assume this is valid Dart (as it analyzes correctly), but perhaps name the variable something else?", "url": "https://github.com/flutter/flutter-intellij/pull/4360#discussion_r377245819", "createdAt": "2020-02-10T18:43:29Z", "author": {"login": "devoncarew"}, "path": "tool/plugin/lib/plugin.dart", "diffHunk": "@@ -316,6 +348,12 @@ Future<int> zip(String directory, String outFile) async {\n   return await exec('zip', args, cwd: p.dirname(directory));\n }\n \n+String _nextRelease() {\n+  var num = RegExp(r'release_(\\d+)').matchAsPrefix(lastReleaseName).group(1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46234ef2e9b29f676ab53edae9f654589851d1b3"}, "originalPosition": 105}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI1OTE2MA==", "bodyText": "Good point. Fixed.", "url": "https://github.com/flutter/flutter-intellij/pull/4360#discussion_r377259160", "createdAt": "2020-02-10T19:08:33Z", "author": {"login": "stevemessick"}, "path": "tool/plugin/lib/plugin.dart", "diffHunk": "@@ -316,6 +348,12 @@ Future<int> zip(String directory, String outFile) async {\n   return await exec('zip', args, cwd: p.dirname(directory));\n }\n \n+String _nextRelease() {\n+  var num = RegExp(r'release_(\\d+)').matchAsPrefix(lastReleaseName).group(1);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI0NTgxOQ=="}, "originalCommit": {"oid": "46234ef2e9b29f676ab53edae9f654589851d1b3"}, "originalPosition": 105}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzMzc1NTg1OnYy", "diffSide": "RIGHT", "path": "tool/plugin/lib/plugin.dart", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxODo0NDoyNFrOFnxSZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxOTowODo0M1rOFnyE_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI0NjMwOA==", "bodyText": "Why check against a specific number? If we need to check against 4. perhaps document in-line for other readers.", "url": "https://github.com/flutter/flutter-intellij/pull/4360#discussion_r377246308", "createdAt": "2020-02-10T18:44:24Z", "author": {"login": "devoncarew"}, "path": "tool/plugin/lib/plugin.dart", "diffHunk": "@@ -632,7 +672,7 @@ class BuildCommand extends ProductCommand {\n         processedFile.writeAsStringSync(source);\n       }\n \n-      if (spec.channel == 'stable') {\n+      if (!spec.version.startsWith('4.')) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46234ef2e9b29f676ab53edae9f654589851d1b3"}, "originalPosition": 151}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI1OTI2MA==", "bodyText": "That's standard practice; checking stable was a mistake. The edits need to be made regardless of which channel we are building.\nThere is a TODO upstream. Someday we should refactor the editing code into a separate object.", "url": "https://github.com/flutter/flutter-intellij/pull/4360#discussion_r377259260", "createdAt": "2020-02-10T19:08:43Z", "author": {"login": "stevemessick"}, "path": "tool/plugin/lib/plugin.dart", "diffHunk": "@@ -632,7 +672,7 @@ class BuildCommand extends ProductCommand {\n         processedFile.writeAsStringSync(source);\n       }\n \n-      if (spec.channel == 'stable') {\n+      if (!spec.version.startsWith('4.')) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI0NjMwOA=="}, "originalCommit": {"oid": "46234ef2e9b29f676ab53edae9f654589851d1b3"}, "originalPosition": 151}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 270, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}