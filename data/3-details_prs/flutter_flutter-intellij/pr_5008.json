{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEyNTUwODEz", "number": 5008, "title": "Fix lifecycle bugs for indent guides and bug where guides would sometimes show for other languages", "bodyText": "This fixes #4792", "createdAt": "2020-10-29T20:35:40Z", "url": "https://github.com/flutter/flutter-intellij/pull/5008", "merged": true, "mergeCommit": {"oid": "20d30721ab720b57a0d0a7b6545b86ffe58021e3"}, "closed": true, "closedAt": "2020-10-29T22:29:12Z", "author": {"login": "jacob314"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdXYCF5AH2gAyNTEyNTUwODEzOmFlYmIwMTI0OTViNjg5ZWNkNTg5OTZmMGZhYzM2ZGM1OTExZTc3ODM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXYcEAAFqTUyMDA2NzE5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "aebb012495b689ecd58996f0fac36dc5911e7783", "author": {"user": {"login": "jacob314", "name": "Jacob Richman"}}, "url": "https://github.com/flutter/flutter-intellij/commit/aebb012495b689ecd58996f0fac36dc5911e7783", "committedDate": "2020-10-29T20:17:30Z", "message": "Fix bugs where widget indent behavior sometimes impacted non-dart files, stale indent guides were sometimes displayed, and filtered indent guides were unpredictably displayed."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwMDYwNTU5", "url": "https://github.com/flutter/flutter-intellij/pull/5008#pullrequestreview-520060559", "createdAt": "2020-10-29T20:36:28Z", "commit": {"oid": "aebb012495b689ecd58996f0fac36dc5911e7783"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMDozNjoyOVrOHqtrkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMDozNjoyOVrOHqtrkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDU1MDY3NA==", "bodyText": "We were returning a list of \"dart editors\" that could contain non Dart files.", "url": "https://github.com/flutter/flutter-intellij/pull/5008#discussion_r514550674", "createdAt": "2020-10-29T20:36:29Z", "author": {"login": "jacob314"}, "path": "src/io/flutter/editor/ActiveEditorsOutlineService.java", "diffHunk": "@@ -87,13 +87,19 @@ public void selectionChanged(@NotNull FileEditorManagerEvent event) {\n     if (project.isDisposed()) {\n       return Collections.emptyList();\n     }\n-    final FileEditor[] editors = FileEditorManager.getInstance(project).getSelectedEditors();\n+    final FileEditorManager fileEditorManager = FileEditorManager.getInstance(project);\n+    if (fileEditorManager == null) {\n+      // TODO(jacobr): why do we sometimes hit this edge case?\n+      return Collections.emptyList();\n+    }\n+\n+    final FileEditor[] editors = fileEditorManager.getSelectedEditors();\n     final List<EditorEx> dartEditors = new ArrayList<>();\n     for (FileEditor fileEditor : editors) {\n       if (!(fileEditor instanceof TextEditor)) continue;\n       final TextEditor textEditor = (TextEditor)fileEditor;\n       final Editor editor = textEditor.getEditor();\n-      if (editor instanceof EditorEx && !editor.isDisposed()) {\n+      if (editor instanceof EditorEx && !editor.isDisposed() && FlutterUtils.isDartFile(((EditorEx)editor).getVirtualFile())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aebb012495b689ecd58996f0fac36dc5911e7783"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwMDYxMDQx", "url": "https://github.com/flutter/flutter-intellij/pull/5008#pullrequestreview-520061041", "createdAt": "2020-10-29T20:37:11Z", "commit": {"oid": "aebb012495b689ecd58996f0fac36dc5911e7783"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMDozNzoxMVrOHqttEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMDozNzoxMVrOHqttEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDU1MTA1OA==", "bodyText": "handles edge case when regular indent guides are disabled but a source file hasn't been closed and reopened yet.", "url": "https://github.com/flutter/flutter-intellij/pull/5008#discussion_r514551058", "createdAt": "2020-10-29T20:37:11Z", "author": {"login": "jacob314"}, "path": "src/io/flutter/editor/FilteredIndentsHighlightingPass.java", "diffHunk": "@@ -302,6 +302,17 @@ private long nowStamp() {\n     return myDocument.getModificationStamp();\n   }\n \n+  public static void cleanupHighlighters(Editor editor) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aebb012495b689ecd58996f0fac36dc5911e7783"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwMDY3MTk3", "url": "https://github.com/flutter/flutter-intellij/pull/5008#pullrequestreview-520067197", "createdAt": "2020-10-29T20:45:52Z", "commit": {"oid": "aebb012495b689ecd58996f0fac36dc5911e7783"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2994, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}