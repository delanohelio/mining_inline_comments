{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ3MzcwNDQz", "number": 4695, "title": "[ISSUE-3347]", "bodyText": "Goal\nThe goal of this pull request is to resolve the issue displaying color icons in IntelliJ Idea and Android studio for Colors.fromARGB and Colors.fromRGBO functions.\nChanges\nAdded annotation support for const Color.fromARGB, Color.fromARGB, const Color.fromRGBO, Color.fromRBGO\nAdded helper functions to ExpressionParsingUtils.java to parse color components and create corresponding Color\nAdded unit tests\nFixes\n#3347", "createdAt": "2020-07-10T10:51:04Z", "url": "https://github.com/flutter/flutter-intellij/pull/4695", "merged": true, "mergeCommit": {"oid": "9956c5db88d9570640ec5b024aa7afc395d0be2b"}, "closed": true, "closedAt": "2020-07-27T12:32:46Z", "author": {"login": "dratushnyy"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczhWZYgH2gAyNDQ3MzcwNDQzOjUxNGNjNjVjMDg2ZmJkNTAyYzc2NDQ1YjI3ZDEyN2U1NzBhYzU1YWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5BB61AFqTQ1NTczNTUwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "514cc65c086fbd502c76445b27d127e570ac55ad", "author": {"user": {"login": "dratushnyy", "name": "Dmitry Ratushnyy"}}, "url": "https://github.com/flutter/flutter-intellij/commit/514cc65c086fbd502c76445b27d127e570ac55ad", "committedDate": "2020-07-10T10:47:33Z", "message": "[ISSUE-3347]\nIntelliJ Idea: Display color icons for `Colors.fromARGB` and\n`Colors.fromRGBO` functions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f1fa6c2c33583107e7d58a301541b3b744eebce", "author": {"user": {"login": "dratushnyy", "name": "Dmitry Ratushnyy"}}, "url": "https://github.com/flutter/flutter-intellij/commit/9f1fa6c2c33583107e7d58a301541b3b744eebce", "committedDate": "2020-07-10T10:57:09Z", "message": "[ISSUE-3347]\nFix test name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2NTA4NTc0", "url": "https://github.com/flutter/flutter-intellij/pull/4695#pullrequestreview-446508574", "createdAt": "2020-07-10T15:47:02Z", "commit": {"oid": "9f1fa6c2c33583107e7d58a301541b3b744eebce"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxNTo0NzowMlrOGv8Yvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxNTo0NzowMlrOGv8Yvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjkyNTYzMA==", "bodyText": "We're assuming here that the numbers are in decimal; from spot checking fromARGB call sites, is that a reasonable assumption?", "url": "https://github.com/flutter/flutter-intellij/pull/4695#discussion_r452925630", "createdAt": "2020-07-10T15:47:02Z", "author": {"login": "devoncarew"}, "path": "src/io/flutter/editor/ExpressionParsingUtils.java", "diffHunk": "@@ -40,4 +40,58 @@ public static Color parseColor(String text, String colorText) {\n     //noinspection UseJBColor\n     return new Color((int)(value >> 16) & 0xFF, (int)(value >> 8) & 0xFF, (int)value & 0xFF, (int)(value >> 24) & 0xFF);\n   }\n+\n+  public static Color parseColorComponents(String callText, String prefix, boolean isARGB) {\n+    if (callText.startsWith(prefix) && callText.endsWith(\")\")) {\n+      final String colorString = callText.substring(prefix.length(), callText.length() - 1).trim();\n+      final String[] maybeNumbers = colorString.split(\",\");\n+      if (maybeNumbers.length < 4) {\n+        return null;\n+      }\n+      return isARGB ? parseARGBColorComponents(maybeNumbers) : parseRGBOColorComponents(maybeNumbers);\n+    }\n+    return null;\n+  }\n+\n+  private static Color parseARGBColorComponents(String[] maybeNumbers) {\n+    if (maybeNumbers.length < 4) {\n+      return null;\n+    }\n+    final int[] argb = new int[4];\n+    for (int i = 0; i < 4; ++i) {\n+      try {\n+        argb[i] = Integer.parseUnsignedInt(maybeNumbers[i].trim());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f1fa6c2c33583107e7d58a301541b3b744eebce"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67801d02b5a7f3cd3b48e097a302691ca0f35566", "author": {"user": {"login": "dratushnyy", "name": "Dmitry Ratushnyy"}}, "url": "https://github.com/flutter/flutter-intellij/commit/67801d02b5a7f3cd3b48e097a302691ca0f35566", "committedDate": "2020-07-14T07:05:22Z", "message": " [ISSUE-3347]\n Allow hex digits in `fromARGB` and `fromRBGO`"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69cb10421c2650f23bcf35a1103abfcb9356c04a", "author": {"user": {"login": "dratushnyy", "name": "Dmitry Ratushnyy"}}, "url": "https://github.com/flutter/flutter-intellij/commit/69cb10421c2650f23bcf35a1103abfcb9356c04a", "committedDate": "2020-07-14T08:29:55Z", "message": "[ISSUE-3347]\nAttempt to fix text"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2b3de9863f62b1983da4eb27567972e5ce94794", "author": {"user": {"login": "dratushnyy", "name": "Dmitry Ratushnyy"}}, "url": "https://github.com/flutter/flutter-intellij/commit/e2b3de9863f62b1983da4eb27567972e5ce94794", "committedDate": "2020-07-27T05:48:34Z", "message": "[ISSUE-3347] Fix tests for `Color.fromARGB` and `Color.fromRBGO`"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NzM1NTAx", "url": "https://github.com/flutter/flutter-intellij/pull/4695#pullrequestreview-455735501", "createdAt": "2020-07-27T12:31:46Z", "commit": {"oid": "e2b3de9863f62b1983da4eb27567972e5ce94794"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3146, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}