{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEyNjM3NTgw", "number": 5011, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMzozNzozNlrOEzhSqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMDowMToyNlrOEzhliA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNDU4MjgzOnYy", "diffSide": "RIGHT", "path": "src/io/flutter/inspector/InspectorService.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMzozNzozNlrOHqyXNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMzo1NjowNVrOHqys2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYyNzM4Mw==", "bodyText": "typo - and", "url": "https://github.com/flutter/flutter-intellij/pull/5011#discussion_r514627383", "createdAt": "2020-10-29T23:37:36Z", "author": {"login": "helin24"}, "path": "src/io/flutter/inspector/InspectorService.java", "diffHunk": "@@ -398,12 +398,11 @@ private void onVmServiceReceived(String streamId, Event event) {\n     switch (streamId) {\n       case VmService.DEBUG_STREAM_ID: {\n         if (event.getKind() == EventKind.Inspect) {\n-          // Make sure the WidgetInspector on the device switches to show the inspected object\n-          // if the inspected object is a Widget or RenderObject.\n+          // Assume the inspector in Flutter DevTools or the on device\n+          // has already set the selection on the device so we don't have to.\n+          // Having multiple clients set the selection risks race conditions\n+          // where the selection ping-pongs back an forth.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8308e02b527f536ab59c1a4a05cf7ce6893745b2"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYzMjkyMg==", "bodyText": "done", "url": "https://github.com/flutter/flutter-intellij/pull/5011#discussion_r514632922", "createdAt": "2020-10-29T23:56:05Z", "author": {"login": "jacob314"}, "path": "src/io/flutter/inspector/InspectorService.java", "diffHunk": "@@ -398,12 +398,11 @@ private void onVmServiceReceived(String streamId, Event event) {\n     switch (streamId) {\n       case VmService.DEBUG_STREAM_ID: {\n         if (event.getKind() == EventKind.Inspect) {\n-          // Make sure the WidgetInspector on the device switches to show the inspected object\n-          // if the inspected object is a Widget or RenderObject.\n+          // Assume the inspector in Flutter DevTools or the on device\n+          // has already set the selection on the device so we don't have to.\n+          // Having multiple clients set the selection risks race conditions\n+          // where the selection ping-pongs back an forth.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYyNzM4Mw=="}, "originalCommit": {"oid": "8308e02b527f536ab59c1a4a05cf7ce6893745b2"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNDU4MzczOnYy", "diffSide": "RIGHT", "path": "src/io/flutter/inspector/InspectorService.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMzozODowNVrOHqyXxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMzo1NzoxM1rOHqyuMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYyNzUyNg==", "bodyText": "typo - on the", "url": "https://github.com/flutter/flutter-intellij/pull/5011#discussion_r514627526", "createdAt": "2020-10-29T23:38:05Z", "author": {"login": "helin24"}, "path": "src/io/flutter/inspector/InspectorService.java", "diffHunk": "@@ -398,12 +398,11 @@ private void onVmServiceReceived(String streamId, Event event) {\n     switch (streamId) {\n       case VmService.DEBUG_STREAM_ID: {\n         if (event.getKind() == EventKind.Inspect) {\n-          // Make sure the WidgetInspector on the device switches to show the inspected object\n-          // if the inspected object is a Widget or RenderObject.\n+          // Assume the inspector in Flutter DevTools or the on device", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8308e02b527f536ab59c1a4a05cf7ce6893745b2"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYzMzI2Ng==", "bodyText": "done", "url": "https://github.com/flutter/flutter-intellij/pull/5011#discussion_r514633266", "createdAt": "2020-10-29T23:57:13Z", "author": {"login": "jacob314"}, "path": "src/io/flutter/inspector/InspectorService.java", "diffHunk": "@@ -398,12 +398,11 @@ private void onVmServiceReceived(String streamId, Event event) {\n     switch (streamId) {\n       case VmService.DEBUG_STREAM_ID: {\n         if (event.getKind() == EventKind.Inspect) {\n-          // Make sure the WidgetInspector on the device switches to show the inspected object\n-          // if the inspected object is a Widget or RenderObject.\n+          // Assume the inspector in Flutter DevTools or the on device", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYyNzUyNg=="}, "originalCommit": {"oid": "8308e02b527f536ab59c1a4a05cf7ce6893745b2"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNDYxNjk4OnYy", "diffSide": "RIGHT", "path": "src/io/flutter/view/FlutterView.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMzo1NDoyM1rOHqyqrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQyMzo1NzozOFrOHqyukg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYzMjM2Ng==", "bodyText": "Is this for debugging?", "url": "https://github.com/flutter/flutter-intellij/pull/5011#discussion_r514632366", "createdAt": "2020-10-29T23:54:23Z", "author": {"login": "helin24"}, "path": "src/io/flutter/view/FlutterView.java", "diffHunk": "@@ -115,6 +119,29 @@ public FlutterView(@NotNull Project project) {\n \n     shouldAutoHorizontalScroll.listen(state::setShouldAutoScroll);\n     highlightNodesShownInBothTrees.listen(state::setHighlightNodesShownInBothTrees);\n+\n+    InspectorGroupManagerService.getInstance(project).addListener(new InspectorGroupManagerService.Listener() {\n+      @Override\n+      public void onInspectorAvailable(InspectorService service) { }\n+\n+      @Override\n+      public void onSelectionChanged(DiagnosticsNode selection) {\n+        if (selection != null) {\n+          final InspectorSourceLocation location = selection.getCreationLocation();\n+          if (location != null) {\n+            final XSourcePosition sourcePosition = location.getXSourcePosition();\n+            sourcePosition.createNavigatable(project).navigate(true);\n+          }\n+          if (selection.isCreatedByLocalProject()) {\n+            final XSourcePosition position = selection.getCreationLocation().getXSourcePosition();\n+            if (position != null) {\n+              position.createNavigatable(project).navigate(false);\n+            }\n+          }\n+        }\n+        System.out.println(\"XXX selection changed to :\" + selection);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8308e02b527f536ab59c1a4a05cf7ce6893745b2"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYzMzM2Mg==", "bodyText": "removed", "url": "https://github.com/flutter/flutter-intellij/pull/5011#discussion_r514633362", "createdAt": "2020-10-29T23:57:38Z", "author": {"login": "jacob314"}, "path": "src/io/flutter/view/FlutterView.java", "diffHunk": "@@ -115,6 +119,29 @@ public FlutterView(@NotNull Project project) {\n \n     shouldAutoHorizontalScroll.listen(state::setShouldAutoScroll);\n     highlightNodesShownInBothTrees.listen(state::setHighlightNodesShownInBothTrees);\n+\n+    InspectorGroupManagerService.getInstance(project).addListener(new InspectorGroupManagerService.Listener() {\n+      @Override\n+      public void onInspectorAvailable(InspectorService service) { }\n+\n+      @Override\n+      public void onSelectionChanged(DiagnosticsNode selection) {\n+        if (selection != null) {\n+          final InspectorSourceLocation location = selection.getCreationLocation();\n+          if (location != null) {\n+            final XSourcePosition sourcePosition = location.getXSourcePosition();\n+            sourcePosition.createNavigatable(project).navigate(true);\n+          }\n+          if (selection.isCreatedByLocalProject()) {\n+            final XSourcePosition position = selection.getCreationLocation().getXSourcePosition();\n+            if (position != null) {\n+              position.createNavigatable(project).navigate(false);\n+            }\n+          }\n+        }\n+        System.out.println(\"XXX selection changed to :\" + selection);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYzMjM2Ng=="}, "originalCommit": {"oid": "8308e02b527f536ab59c1a4a05cf7ce6893745b2"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNDYzMDQyOnYy", "diffSide": "RIGHT", "path": "src/io/flutter/inspector/InspectorService.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMDowMTowNVrOHqyyQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMDowNTo0NFrOHqy3dw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYzNDMwNw==", "bodyText": "Assume the inspector in Flutter DevTools or on the device widget", "url": "https://github.com/flutter/flutter-intellij/pull/5011#discussion_r514634307", "createdAt": "2020-10-30T00:01:05Z", "author": {"login": "helin24"}, "path": "src/io/flutter/inspector/InspectorService.java", "diffHunk": "@@ -398,12 +398,11 @@ private void onVmServiceReceived(String streamId, Event event) {\n     switch (streamId) {\n       case VmService.DEBUG_STREAM_ID: {\n         if (event.getKind() == EventKind.Inspect) {\n-          // Make sure the WidgetInspector on the device switches to show the inspected object\n-          // if the inspected object is a Widget or RenderObject.\n+          // Assume the inspector in Flutter DevTools or the on device widget", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b1778e89790eb611b2f0b9c8d6a6940864ffa09"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYzNTYzOQ==", "bodyText": "done", "url": "https://github.com/flutter/flutter-intellij/pull/5011#discussion_r514635639", "createdAt": "2020-10-30T00:05:44Z", "author": {"login": "jacob314"}, "path": "src/io/flutter/inspector/InspectorService.java", "diffHunk": "@@ -398,12 +398,11 @@ private void onVmServiceReceived(String streamId, Event event) {\n     switch (streamId) {\n       case VmService.DEBUG_STREAM_ID: {\n         if (event.getKind() == EventKind.Inspect) {\n-          // Make sure the WidgetInspector on the device switches to show the inspected object\n-          // if the inspected object is a Widget or RenderObject.\n+          // Assume the inspector in Flutter DevTools or the on device widget", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYzNDMwNw=="}, "originalCommit": {"oid": "7b1778e89790eb611b2f0b9c8d6a6940864ffa09"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNDYzMTEyOnYy", "diffSide": "RIGHT", "path": "src/io/flutter/inspector/InspectorService.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMDowMToyNlrOHqyysA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMDowNjoxMlrOHqy36g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYzNDQxNg==", "bodyText": "add the period back after \"have to.\"", "url": "https://github.com/flutter/flutter-intellij/pull/5011#discussion_r514634416", "createdAt": "2020-10-30T00:01:26Z", "author": {"login": "helin24"}, "path": "src/io/flutter/inspector/InspectorService.java", "diffHunk": "@@ -398,12 +398,11 @@ private void onVmServiceReceived(String streamId, Event event) {\n     switch (streamId) {\n       case VmService.DEBUG_STREAM_ID: {\n         if (event.getKind() == EventKind.Inspect) {\n-          // Make sure the WidgetInspector on the device switches to show the inspected object\n-          // if the inspected object is a Widget or RenderObject.\n+          // Assume the inspector in Flutter DevTools or the on device widget\n+          // inspector has already set the selection on the device so we don't\n+          // have to Having multiple clients set the selection risks race", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b1778e89790eb611b2f0b9c8d6a6940864ffa09"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYzNTc1NA==", "bodyText": "done", "url": "https://github.com/flutter/flutter-intellij/pull/5011#discussion_r514635754", "createdAt": "2020-10-30T00:06:12Z", "author": {"login": "jacob314"}, "path": "src/io/flutter/inspector/InspectorService.java", "diffHunk": "@@ -398,12 +398,11 @@ private void onVmServiceReceived(String streamId, Event event) {\n     switch (streamId) {\n       case VmService.DEBUG_STREAM_ID: {\n         if (event.getKind() == EventKind.Inspect) {\n-          // Make sure the WidgetInspector on the device switches to show the inspected object\n-          // if the inspected object is a Widget or RenderObject.\n+          // Assume the inspector in Flutter DevTools or the on device widget\n+          // inspector has already set the selection on the device so we don't\n+          // have to Having multiple clients set the selection risks race", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDYzNDQxNg=="}, "originalCommit": {"oid": "7b1778e89790eb611b2f0b9c8d6a6940864ffa09"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 371, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}