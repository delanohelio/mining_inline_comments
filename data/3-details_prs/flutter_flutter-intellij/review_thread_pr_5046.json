{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIwMjUxMTUx", "number": 5046, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QyMTozMzoxOVrOE418jg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QyMTozMzozNVrOE4181w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4MDM5NTY2OnYy", "diffSide": "RIGHT", "path": "src/io/flutter/run/bazel/BazelFields.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QyMTozMzoxOVrOHzARTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QyMTozMzoxOVrOHzARTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI0Mzg1Mg==", "bodyText": "Add a TODO to remove these defines and let the run script handle this part.", "url": "https://github.com/flutter/flutter-intellij/pull/5046#discussion_r523243852", "createdAt": "2020-11-13T21:33:19Z", "author": {"login": "jacob314"}, "path": "src/io/flutter/run/bazel/BazelFields.java", "diffHunk": "@@ -201,75 +201,38 @@ GeneralCommandLine getLaunchCommand(@NotNull Project project,\n     commandLine.setCharset(CharsetToolkit.UTF8_CHARSET);\n     commandLine.setExePath(FileUtil.toSystemDependentName(launchingScript));\n \n+    // Potentially add build mode to user-specified bazel arguments.\n+    final String inputBazelArgs = StringUtil.notNullize(bazelArgs);\n+    final StringBuilder fullBazelArgs = new StringBuilder(inputBazelArgs);\n+\n     // If the user hasn't overridden the flutter_build_mode, then\n     if (!StringUtil.notNullize(bazelArgs).matches(\".*--define[ =]flutter_build_mode.*\")) {\n+      if (!inputBazelArgs.isEmpty()) {\n+        fullBazelArgs.append(\" \");\n+      }\n \n       // Set the mode. This section needs to match the bazel versions of the flutter_build_mode parameters.\n       if (enableReleaseMode) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "db2423b9f9224fc17b8379cb940fbda416b79265"}, "originalPosition": 63}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4MDM5NjM5OnYy", "diffSide": "LEFT", "path": "src/io/flutter/run/bazel/BazelFields.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QyMTozMzozNVrOHzARtA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QyMTozMzozNVrOHzARtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI0Mzk1Ng==", "bodyText": "great to see this go away!", "url": "https://github.com/flutter/flutter-intellij/pull/5046#discussion_r523243956", "createdAt": "2020-11-13T21:33:35Z", "author": {"login": "jacob314"}, "path": "src/io/flutter/run/bazel/BazelFields.java", "diffHunk": "@@ -201,75 +201,38 @@ GeneralCommandLine getLaunchCommand(@NotNull Project project,\n     commandLine.setCharset(CharsetToolkit.UTF8_CHARSET);\n     commandLine.setExePath(FileUtil.toSystemDependentName(launchingScript));\n \n+    // Potentially add build mode to user-specified bazel arguments.\n+    final String inputBazelArgs = StringUtil.notNullize(bazelArgs);\n+    final StringBuilder fullBazelArgs = new StringBuilder(inputBazelArgs);\n+\n     // If the user hasn't overridden the flutter_build_mode, then\n     if (!StringUtil.notNullize(bazelArgs).matches(\".*--define[ =]flutter_build_mode.*\")) {\n+      if (!inputBazelArgs.isEmpty()) {\n+        fullBazelArgs.append(\" \");\n+      }\n \n       // Set the mode. This section needs to match the bazel versions of the flutter_build_mode parameters.\n       if (enableReleaseMode) {\n-        commandLine.addParameters(\"--define\", \"flutter_build_mode=release\");\n+        fullBazelArgs.append(\"--define=flutter_build_mode=release\");\n       }\n       else {\n         switch (mode) {\n           case PROFILE:\n-            commandLine.addParameters(\"--define\", \"flutter_build_mode=profile\");\n+            fullBazelArgs.append(\"--define=flutter_build_mode=profile\");\n             break;\n           case RUN:\n           case DEBUG:\n           default:\n             // The default mode of a flutter app is debug mode. This is the mode that supports hot reloading.\n             // So far as flutter is concerned, there is no difference between debug mode and run mode;\n             // the only difference is that a debug mode app will --start-paused.\n-            commandLine.addParameters(\"--define\", \"flutter_build_mode=debug\");\n+            fullBazelArgs.append(\"--define=flutter_build_mode=debug\");\n             break;\n         }\n       }\n     }\n \n-    // User specified additional bazel arguments.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "db2423b9f9224fc17b8379cb940fbda416b79265"}, "originalPosition": 86}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 379, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}