{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQxMTA4OTg3", "number": 4671, "title": "Split icon generation into two scripts + use single set of downloaded files", "bodyText": "This splits the update_colors.dart script into two scripts so it no longer calls itself (which simplifies debugging, and avoids getting into the situation where a broken generated file prevents running the script to regenerate it) and also consolidates the downloaded files so there's just one set.\nRunning grind colors works properly this time, and generates the same files that were in the repo - with the exception of the downloaded files being unformatted (I didn't commit the format changes because it would make this PR harder to review - I can add them once this is reviewed, or just send another PR with just the (un)formatting changes).\n@devoncarew the rebase was messy, so I manually applied your changes to my existing change. If you think I've missed anything, let me know!", "createdAt": "2020-06-28T20:21:20Z", "url": "https://github.com/flutter/flutter-intellij/pull/4671", "merged": true, "mergeCommit": {"oid": "6b122295cd0decd12ae99d35085b7931e4b78cb4"}, "closed": true, "closedAt": "2020-07-01T15:32:50Z", "author": {"login": "DanTup"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcvyRJHAH2gAyNDQxMTA4OTg3OjJhNzA3Yzg3Yzc5ZWJhNGQxYWY5YzQwNmZlYzMzODgyODA5NmM2OTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwQ9YDAH2gAyNDQxMTA4OTg3OjE0YjUxZjA0ZTBiNmVjZWYwZDhmOWQ2OTY4NjdhMTEyMzliYjA4MTA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2a707c87c79eba4d1af9c406fec338828096c693", "author": {"user": {"login": "DanTup", "name": "Danny Tuppeny"}}, "url": "https://github.com/flutter/flutter-intellij/commit/2a707c87c79eba4d1af9c406fec338828096c693", "committedDate": "2020-06-28T20:14:30Z", "message": "Split icon generation into two scripts + use single set of downloaded files"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5NTgxODgz", "url": "https://github.com/flutter/flutter-intellij/pull/4671#pullrequestreview-439581883", "createdAt": "2020-06-30T00:06:43Z", "commit": {"oid": "2a707c87c79eba4d1af9c406fec338828096c693"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwMDowNjo0M1rOGqmxbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwMDowODozMFrOGqmzUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzMyODYyMQ==", "bodyText": "nit: //, not ///", "url": "https://github.com/flutter/flutter-intellij/pull/4671#discussion_r447328621", "createdAt": "2020-06-30T00:06:43Z", "author": {"login": "devoncarew"}, "path": "tool/colors/flutter/colors_cupertino.dart", "diffHunk": "@@ -1,15 +1,17 @@\n+/// This file was downloaded by update_colors.dart.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2a707c87c79eba4d1af9c406fec338828096c693"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzMyODcxOQ==", "bodyText": "should probably use a double slash comment", "url": "https://github.com/flutter/flutter-intellij/pull/4671#discussion_r447328719", "createdAt": "2020-06-30T00:07:05Z", "author": {"login": "devoncarew"}, "path": "tool/colors/flutter/colors_material.dart", "diffHunk": "@@ -1,3 +1,5 @@\n+/// This file was downloaded by update_colors.dart.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2a707c87c79eba4d1af9c406fec338828096c693"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzMyOTEwNQ==", "bodyText": "This todo is likely worth retaining - I think we're better off avoiding downloads when re-generating these files if we can avoid them.", "url": "https://github.com/flutter/flutter-intellij/pull/4671#discussion_r447329105", "createdAt": "2020-06-30T00:08:30Z", "author": {"login": "devoncarew"}, "path": "tool/colors/update_colors.dart", "diffHunk": "@@ -20,62 +23,40 @@ void main(List<String> args) async {\n     exit(1);\n   }\n \n-  // TODO(dantup): Split into two scripts instead of using a flag? It's to allow\n-  // easier debugging of the second step.\n-  if (args.contains('--generate-properties')) {\n-    print('Generating property files:');\n-    generatePropertiesFiles();\n-\n-    exit(0);\n-  } else {\n-    print('Generating dart files:');\n-    await generateDartFiles();\n-\n-    // Re-run the script with `--generate-properties` so it can load the files\n-    // we generated.\n-    final results = Process.runSync(Platform.resolvedExecutable,\n-        [Platform.script.toFilePath(), '--generate-propertes']);\n-    stdout.write(results.stdout);\n-    stderr.write(results.stderr);\n-\n-    exit(0);\n-  }\n+  print('Generating dart files:');\n+  await generateDartFiles();\n }\n \n-Future generateDartFiles() async {\n-  // TODO: Use the files from the local flutter checkout instead of a download", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2a707c87c79eba4d1af9c406fec338828096c693"}, "originalPosition": 49}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26f4465404d6ee55bbaa8811fae33b74dee506d1", "author": {"user": {"login": "DanTup", "name": "Danny Tuppeny"}}, "url": "https://github.com/flutter/flutter-intellij/commit/26f4465404d6ee55bbaa8811fae33b74dee506d1", "committedDate": "2020-06-30T07:59:27Z", "message": "Review tweaks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14b51f04e0b6ecef0d8f9d696867a11239bb0810", "author": {"user": {"login": "DanTup", "name": "Danny Tuppeny"}}, "url": "https://github.com/flutter/flutter-intellij/commit/14b51f04e0b6ecef0d8f9d696867a11239bb0810", "committedDate": "2020-06-30T07:59:58Z", "message": "Commit unformatted files (as downloaded)"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3133, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}