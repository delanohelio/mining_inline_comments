{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM5ODExNjUz", "number": 2612, "title": "Generate correct debug info for deoptimization target methods", "bodyText": "This is a proposed fix for issue #2587. It handles the case where deopt target methods are included in a native image. Compiled code for these methods is generated after the compiled code for normal compiled methods . In consequence, a class which contains deopt targets has code occupying two distinct code cache address ranges and code form different classes may be interleaved.\nThis is a problem because DWARF debug data (info, ranges, frame) must be generated as a sequence of entries associated with non-overlapping address ranges ordered low to high. So, a class containing deopt target methods must be processed twice, generating DWARF entries first for the normal methods and then for the deopt targets.", "createdAt": "2020-06-25T08:20:39Z", "url": "https://github.com/oracle/graal/pull/2612", "merged": true, "mergeCommit": {"oid": "a3ab575c75d2e47eca7f2b11da91b4534a2f4de8"}, "closed": true, "closedAt": "2020-06-26T21:03:19Z", "author": {"login": "adinn"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcuqAgjAH2gAyNDM5ODExNjUzOmNhM2RlNWVhZmVkZGZiNTlkYzdjOGJmMmNhMmViODI4ZDZjOGI0NTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcvFrw5gFqTQzODQyNjMxNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ca3de5eafeddfb59dc7c8bf2ca2eb828d6c8b457", "author": {"user": {"login": "adinn", "name": "Andrew Dinn"}}, "url": "https://github.com/oracle/graal/commit/ca3de5eafeddfb59dc7c8bf2ca2eb828d6c8b457", "committedDate": "2020-06-25T08:03:10Z", "message": "Generate correct debug info for deoptimization target methods"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3MzEwMTg5", "url": "https://github.com/oracle/graal/pull/2612#pullrequestreview-437310189", "createdAt": "2020-06-25T09:11:14Z", "commit": {"oid": "ca3de5eafeddfb59dc7c8bf2ca2eb828d6c8b457"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwOToxMToxNFrOGoyKqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwOToxMToxNFrOGoyKqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQxODE1NQ==", "bodyText": "Might be a good idea to define a public static field METHOD_NAME_DEOPT_SUFFIX for \"**\" in src/com.oracle.svm.hosted/src/com/oracle/svm/hosted/meta/HostedMethod.java:247 and use that field also here.", "url": "https://github.com/oracle/graal/pull/2612#discussion_r445418155", "createdAt": "2020-06-25T09:11:14Z", "author": {"login": "olpaw"}, "path": "substratevm/src/com.oracle.objectfile/src/com/oracle/objectfile/debugentry/Range.java", "diffHunk": "@@ -133,6 +133,10 @@ public String getFullMethodName() {\n         return fullMethodName;\n     }\n \n+    public boolean isDeoptTarget() {\n+        return methodName.endsWith(\"**\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca3de5eafeddfb59dc7c8bf2ca2eb828d6c8b457"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3MzE0Njg5", "url": "https://github.com/oracle/graal/pull/2612#pullrequestreview-437314689", "createdAt": "2020-06-25T09:17:16Z", "commit": {"oid": "ca3de5eafeddfb59dc7c8bf2ca2eb828d6c8b457"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ca6d6d61ef93b6c846e59b3e5cde7ea6ca967f8", "author": {"user": {"login": "adinn", "name": "Andrew Dinn"}}, "url": "https://github.com/oracle/graal/commit/9ca6d6d61ef93b6c846e59b3e5cde7ea6ca967f8", "committedDate": "2020-06-25T14:27:56Z", "message": "correct error in setting CU index for deopt targets"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "866605d71e3cc625c19cf37e097e7a3e5ce6a985", "author": {"user": {"login": "adinn", "name": "Andrew Dinn"}}, "url": "https://github.com/oracle/graal/commit/866605d71e3cc625c19cf37e097e7a3e5ce6a985", "committedDate": "2020-06-25T14:28:37Z", "message": "use static field to identify deopt target method suffix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MTIwNjEy", "url": "https://github.com/oracle/graal/pull/2612#pullrequestreview-438120612", "createdAt": "2020-06-26T08:45:12Z", "commit": {"oid": "866605d71e3cc625c19cf37e097e7a3e5ce6a985"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c5420a33a06c782d709e48165bf6b89cc442981", "author": {"user": {"login": "adinn", "name": "Andrew Dinn"}}, "url": "https://github.com/oracle/graal/commit/6c5420a33a06c782d709e48165bf6b89cc442981", "committedDate": "2020-06-26T10:34:05Z", "message": "style fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33049a0761ca6f1de1f6b2bcf867b8ff59d9c4bf", "author": {"user": {"login": "adinn", "name": "Andrew Dinn"}}, "url": "https://github.com/oracle/graal/commit/33049a0761ca6f1de1f6b2bcf867b8ff59d9c4bf", "committedDate": "2020-06-26T14:11:36Z", "message": "eclipse style fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4NDI2MzE2", "url": "https://github.com/oracle/graal/pull/2612#pullrequestreview-438426316", "createdAt": "2020-06-26T16:17:51Z", "commit": {"oid": "33049a0761ca6f1de1f6b2bcf867b8ff59d9c4bf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1035, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}