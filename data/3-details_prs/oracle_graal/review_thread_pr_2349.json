{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA0MjgzMDg3", "number": 2349, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxNDozOToyMVrODyiM_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMjo1NzoxNVrOEZCLoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0MzE1Nzc0OnYy", "diffSide": "RIGHT", "path": ".github/workflows/quarkus.yml", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxNDozOToyMVrOGGonsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxNDozOToxNVrOGJJYUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYxMDE2MQ==", "bodyText": "Could we rather use the labsjdk-ce-11 that we download or the GraalVM that we build?", "url": "https://github.com/oracle/graal/pull/2349#discussion_r409610161", "createdAt": "2020-04-16T14:39:21Z", "author": {"login": "ansalond"}, "path": ".github/workflows/quarkus.yml", "diffHunk": "@@ -0,0 +1,335 @@\n+name: Nightly quarkus tests\n+\n+on: [push]\n+\n+env:\n+  # Workaround testsuite locale issue\n+  LANG: en_US.UTF-8\n+  JVMCI_VERSION: jvmci-20.1-b01\n+  JDK_VERSION: 11.0.6\n+  JDK_VERSION_SUFFIX: \"+9\"\n+  DB_USER: hibernate_orm_test\n+  DB_PASSWORD: hibernate_orm_test\n+  DB_NAME: hibernate_orm_test\n+  NATIVE_TEST_MAVEN_OPTS: \"-B -Dtest-postgresql -Dtest-elasticsearch -Dtest-keycloak -Dtest-dynamodb -Dtest-mysql -Dtest-mariadb -Dmariadb.url='jdbc:mariadb://localhost:3308/hibernate_orm_test'  -Dtest-mssql -Dtest-vault -Dtest-neo4j -Dnative-image.xmx=5g -Dnative -Dformat.skip install\"\n+  MX_GIT_CACHE: refcache\n+\n+jobs:\n+  build-quarkus-and-graalvm:\n+    name: Nightly quarkus and GraalVM build\n+    runs-on: ubuntu-18.04\n+    steps:\n+    - uses: actions/checkout@v1\n+      with:\n+        fetch-depth: 1\n+        path: graal\n+    - uses: actions/checkout@v1\n+      with:\n+        repository: graalvm/mx.git\n+        ref: master\n+        path: mx\n+    - uses: actions/checkout@v1\n+      with:\n+        repository: quarkusio/quarkus.git\n+        ref: master\n+        path: quarkus\n+    # actions/setup-java setups a zulu community distibution of OpenJDK\n+    # apt-get install openjdk-11-jdk installs the same zulu distribuion on github runners\n+    # so we use joschi/setup-jdk instead with an sha for added security since tags can be updated\n+    - uses: joschi/setup-jdk@9dc354d4a8f5781ba8880dc9e6a7bdcc7845e3e7\n+      with:\n+        java-version: 11", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aad4e98c179badaab2ffa5de42241cfe25955311"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDM4NjM0Nw==", "bodyText": "AFAIK we prefer using the latest OpenJDK release for anything that is not directly related to GraalVM (e.g. native images and polyglot support).\n@adinn @maxandersen your thoughts?", "url": "https://github.com/oracle/graal/pull/2349#discussion_r410386347", "createdAt": "2020-04-17T18:05:15Z", "author": {"login": "zakkak"}, "path": ".github/workflows/quarkus.yml", "diffHunk": "@@ -0,0 +1,335 @@\n+name: Nightly quarkus tests\n+\n+on: [push]\n+\n+env:\n+  # Workaround testsuite locale issue\n+  LANG: en_US.UTF-8\n+  JVMCI_VERSION: jvmci-20.1-b01\n+  JDK_VERSION: 11.0.6\n+  JDK_VERSION_SUFFIX: \"+9\"\n+  DB_USER: hibernate_orm_test\n+  DB_PASSWORD: hibernate_orm_test\n+  DB_NAME: hibernate_orm_test\n+  NATIVE_TEST_MAVEN_OPTS: \"-B -Dtest-postgresql -Dtest-elasticsearch -Dtest-keycloak -Dtest-dynamodb -Dtest-mysql -Dtest-mariadb -Dmariadb.url='jdbc:mariadb://localhost:3308/hibernate_orm_test'  -Dtest-mssql -Dtest-vault -Dtest-neo4j -Dnative-image.xmx=5g -Dnative -Dformat.skip install\"\n+  MX_GIT_CACHE: refcache\n+\n+jobs:\n+  build-quarkus-and-graalvm:\n+    name: Nightly quarkus and GraalVM build\n+    runs-on: ubuntu-18.04\n+    steps:\n+    - uses: actions/checkout@v1\n+      with:\n+        fetch-depth: 1\n+        path: graal\n+    - uses: actions/checkout@v1\n+      with:\n+        repository: graalvm/mx.git\n+        ref: master\n+        path: mx\n+    - uses: actions/checkout@v1\n+      with:\n+        repository: quarkusio/quarkus.git\n+        ref: master\n+        path: quarkus\n+    # actions/setup-java setups a zulu community distibution of OpenJDK\n+    # apt-get install openjdk-11-jdk installs the same zulu distribuion on github runners\n+    # so we use joschi/setup-jdk instead with an sha for added security since tags can be updated\n+    - uses: joschi/setup-jdk@9dc354d4a8f5781ba8880dc9e6a7bdcc7845e3e7\n+      with:\n+        java-version: 11", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYxMDE2MQ=="}, "originalCommit": {"oid": "aad4e98c179badaab2ffa5de42241cfe25955311"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDU4MjY1MQ==", "bodyText": "@zakkak You are right from a Quarkus perspective we would be validating Quarkus on top of OpenJDK, but from GraalVM project it would make sense they test Quarkus on a labsjdk/graalvm - ultimately we would want both test runs but to start I would let graalvm team pick their priority.\njust be warned we (Quarkus) doesn't target labsjdk; but happy to get PR's if for someone reason Quarkus does something bad that affects it :)", "url": "https://github.com/oracle/graal/pull/2349#discussion_r410582651", "createdAt": "2020-04-18T03:13:22Z", "author": {"login": "maxandersen"}, "path": ".github/workflows/quarkus.yml", "diffHunk": "@@ -0,0 +1,335 @@\n+name: Nightly quarkus tests\n+\n+on: [push]\n+\n+env:\n+  # Workaround testsuite locale issue\n+  LANG: en_US.UTF-8\n+  JVMCI_VERSION: jvmci-20.1-b01\n+  JDK_VERSION: 11.0.6\n+  JDK_VERSION_SUFFIX: \"+9\"\n+  DB_USER: hibernate_orm_test\n+  DB_PASSWORD: hibernate_orm_test\n+  DB_NAME: hibernate_orm_test\n+  NATIVE_TEST_MAVEN_OPTS: \"-B -Dtest-postgresql -Dtest-elasticsearch -Dtest-keycloak -Dtest-dynamodb -Dtest-mysql -Dtest-mariadb -Dmariadb.url='jdbc:mariadb://localhost:3308/hibernate_orm_test'  -Dtest-mssql -Dtest-vault -Dtest-neo4j -Dnative-image.xmx=5g -Dnative -Dformat.skip install\"\n+  MX_GIT_CACHE: refcache\n+\n+jobs:\n+  build-quarkus-and-graalvm:\n+    name: Nightly quarkus and GraalVM build\n+    runs-on: ubuntu-18.04\n+    steps:\n+    - uses: actions/checkout@v1\n+      with:\n+        fetch-depth: 1\n+        path: graal\n+    - uses: actions/checkout@v1\n+      with:\n+        repository: graalvm/mx.git\n+        ref: master\n+        path: mx\n+    - uses: actions/checkout@v1\n+      with:\n+        repository: quarkusio/quarkus.git\n+        ref: master\n+        path: quarkus\n+    # actions/setup-java setups a zulu community distibution of OpenJDK\n+    # apt-get install openjdk-11-jdk installs the same zulu distribuion on github runners\n+    # so we use joschi/setup-jdk instead with an sha for added security since tags can be updated\n+    - uses: joschi/setup-jdk@9dc354d4a8f5781ba8880dc9e6a7bdcc7845e3e7\n+      with:\n+        java-version: 11", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYxMDE2MQ=="}, "originalCommit": {"oid": "aad4e98c179badaab2ffa5de42241cfe25955311"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjI0NDA0OQ==", "bodyText": "Resolved in c07a305", "url": "https://github.com/oracle/graal/pull/2349#discussion_r412244049", "createdAt": "2020-04-21T14:39:15Z", "author": {"login": "zakkak"}, "path": ".github/workflows/quarkus.yml", "diffHunk": "@@ -0,0 +1,335 @@\n+name: Nightly quarkus tests\n+\n+on: [push]\n+\n+env:\n+  # Workaround testsuite locale issue\n+  LANG: en_US.UTF-8\n+  JVMCI_VERSION: jvmci-20.1-b01\n+  JDK_VERSION: 11.0.6\n+  JDK_VERSION_SUFFIX: \"+9\"\n+  DB_USER: hibernate_orm_test\n+  DB_PASSWORD: hibernate_orm_test\n+  DB_NAME: hibernate_orm_test\n+  NATIVE_TEST_MAVEN_OPTS: \"-B -Dtest-postgresql -Dtest-elasticsearch -Dtest-keycloak -Dtest-dynamodb -Dtest-mysql -Dtest-mariadb -Dmariadb.url='jdbc:mariadb://localhost:3308/hibernate_orm_test'  -Dtest-mssql -Dtest-vault -Dtest-neo4j -Dnative-image.xmx=5g -Dnative -Dformat.skip install\"\n+  MX_GIT_CACHE: refcache\n+\n+jobs:\n+  build-quarkus-and-graalvm:\n+    name: Nightly quarkus and GraalVM build\n+    runs-on: ubuntu-18.04\n+    steps:\n+    - uses: actions/checkout@v1\n+      with:\n+        fetch-depth: 1\n+        path: graal\n+    - uses: actions/checkout@v1\n+      with:\n+        repository: graalvm/mx.git\n+        ref: master\n+        path: mx\n+    - uses: actions/checkout@v1\n+      with:\n+        repository: quarkusio/quarkus.git\n+        ref: master\n+        path: quarkus\n+    # actions/setup-java setups a zulu community distibution of OpenJDK\n+    # apt-get install openjdk-11-jdk installs the same zulu distribuion on github runners\n+    # so we use joschi/setup-jdk instead with an sha for added security since tags can be updated\n+    - uses: joschi/setup-jdk@9dc354d4a8f5781ba8880dc9e6a7bdcc7845e3e7\n+      with:\n+        java-version: 11", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYxMDE2MQ=="}, "originalCommit": {"oid": "aad4e98c179badaab2ffa5de42241cfe25955311"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0MzE4MjAxOnYy", "diffSide": "RIGHT", "path": ".github/workflows/quarkus.yml", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxNDo0NDoyM1rOGGo3bw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxODoxNDowM1rOGJR3cA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYxNDE5MQ==", "bodyText": "The common.json file at the root of the graal repository lists the required JDKs:\n{\n  \"jdks\": {\n...\n    \"labsjdk-ce-11\":   {\"name\": \"labsjdk\",   \"version\": \"ce-11.0.6+9-jvmci-20.1-b01\", \"platformspecific\": true },\n...\n  },\n...\n}\n\nwrong URL\nhttps://github.com/oracle/graal/blob/master/common.json#L8\nIt would be great if we could parse this file and avoid hardcoding the JDK/JVMCI versions.", "url": "https://github.com/oracle/graal/pull/2349#discussion_r409614191", "createdAt": "2020-04-16T14:44:23Z", "author": {"login": "ansalond"}, "path": ".github/workflows/quarkus.yml", "diffHunk": "@@ -0,0 +1,335 @@\n+name: Nightly quarkus tests\n+\n+on: [push]\n+\n+env:\n+  # Workaround testsuite locale issue\n+  LANG: en_US.UTF-8\n+  JVMCI_VERSION: jvmci-20.1-b01\n+  JDK_VERSION: 11.0.6\n+  JDK_VERSION_SUFFIX: \"+9\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aad4e98c179badaab2ffa5de42241cfe25955311"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDM4NTg2OQ==", "bodyText": "Yes that sounds like a good idea :)\nI guess the above link points to Oracle's internal repository and is the same as:\nhttps://github.com/oracle/graal/blob/master/common.json#L8\nSo I will set it up to parse the common.json from the checked out repository.", "url": "https://github.com/oracle/graal/pull/2349#discussion_r410385869", "createdAt": "2020-04-17T18:04:25Z", "author": {"login": "zakkak"}, "path": ".github/workflows/quarkus.yml", "diffHunk": "@@ -0,0 +1,335 @@\n+name: Nightly quarkus tests\n+\n+on: [push]\n+\n+env:\n+  # Workaround testsuite locale issue\n+  LANG: en_US.UTF-8\n+  JVMCI_VERSION: jvmci-20.1-b01\n+  JDK_VERSION: 11.0.6\n+  JDK_VERSION_SUFFIX: \"+9\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYxNDE5MQ=="}, "originalCommit": {"oid": "aad4e98c179badaab2ffa5de42241cfe25955311"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTE5MjMwOA==", "bodyText": "Yes, sorry, you are right. I updated my previous message.", "url": "https://github.com/oracle/graal/pull/2349#discussion_r411192308", "createdAt": "2020-04-20T08:30:40Z", "author": {"login": "ansalond"}, "path": ".github/workflows/quarkus.yml", "diffHunk": "@@ -0,0 +1,335 @@\n+name: Nightly quarkus tests\n+\n+on: [push]\n+\n+env:\n+  # Workaround testsuite locale issue\n+  LANG: en_US.UTF-8\n+  JVMCI_VERSION: jvmci-20.1-b01\n+  JDK_VERSION: 11.0.6\n+  JDK_VERSION_SUFFIX: \"+9\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYxNDE5MQ=="}, "originalCommit": {"oid": "aad4e98c179badaab2ffa5de42241cfe25955311"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjM4MzA4OA==", "bodyText": "Fixed in fa2e0a9", "url": "https://github.com/oracle/graal/pull/2349#discussion_r412383088", "createdAt": "2020-04-21T18:14:03Z", "author": {"login": "zakkak"}, "path": ".github/workflows/quarkus.yml", "diffHunk": "@@ -0,0 +1,335 @@\n+name: Nightly quarkus tests\n+\n+on: [push]\n+\n+env:\n+  # Workaround testsuite locale issue\n+  LANG: en_US.UTF-8\n+  JVMCI_VERSION: jvmci-20.1-b01\n+  JDK_VERSION: 11.0.6\n+  JDK_VERSION_SUFFIX: \"+9\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYxNDE5MQ=="}, "originalCommit": {"oid": "aad4e98c179badaab2ffa5de42241cfe25955311"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0NjM4NjE3OnYy", "diffSide": "RIGHT", "path": ".github/workflows/quarkus.yml", "isResolved": true, "comments": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxMDowMToyMFrOGHH5Tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QyMDo0NzozNlrOHB6VJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDEyMjU3NQ==", "bodyText": "when done on push this isn't really nightly ;)", "url": "https://github.com/oracle/graal/pull/2349#discussion_r410122575", "createdAt": "2020-04-17T10:01:20Z", "author": {"login": "maxandersen"}, "path": ".github/workflows/quarkus.yml", "diffHunk": "@@ -0,0 +1,335 @@\n+name: Nightly quarkus tests\n+\n+on: [push]\n+\n+env:\n+  # Workaround testsuite locale issue\n+  LANG: en_US.UTF-8\n+  JVMCI_VERSION: jvmci-20.1-b01\n+  JDK_VERSION: 11.0.6\n+  JDK_VERSION_SUFFIX: \"+9\"\n+  DB_USER: hibernate_orm_test\n+  DB_PASSWORD: hibernate_orm_test\n+  DB_NAME: hibernate_orm_test\n+  NATIVE_TEST_MAVEN_OPTS: \"-B -Dtest-postgresql -Dtest-elasticsearch -Dtest-keycloak -Dtest-dynamodb -Dtest-mysql -Dtest-mariadb -Dmariadb.url='jdbc:mariadb://localhost:3308/hibernate_orm_test'  -Dtest-mssql -Dtest-vault -Dtest-neo4j -Dnative-image.xmx=5g -Dnative -Dformat.skip install\"\n+  MX_GIT_CACHE: refcache\n+\n+jobs:\n+  build-quarkus-and-graalvm:\n+    name: Nightly quarkus and GraalVM build", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aad4e98c179badaab2ffa5de42241cfe25955311"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDIwNjUzMw==", "bodyText": "I believe Foivos commented on that earlier: \"This github action will be ultimately set to run nightly. It is currently set to run on push for testing purposes till it gets reviewed.\"", "url": "https://github.com/oracle/graal/pull/2349#discussion_r410206533", "createdAt": "2020-04-17T13:01:56Z", "author": {"login": "adinn"}, "path": ".github/workflows/quarkus.yml", "diffHunk": "@@ -0,0 +1,335 @@\n+name: Nightly quarkus tests\n+\n+on: [push]\n+\n+env:\n+  # Workaround testsuite locale issue\n+  LANG: en_US.UTF-8\n+  JVMCI_VERSION: jvmci-20.1-b01\n+  JDK_VERSION: 11.0.6\n+  JDK_VERSION_SUFFIX: \"+9\"\n+  DB_USER: hibernate_orm_test\n+  DB_PASSWORD: hibernate_orm_test\n+  DB_NAME: hibernate_orm_test\n+  NATIVE_TEST_MAVEN_OPTS: \"-B -Dtest-postgresql -Dtest-elasticsearch -Dtest-keycloak -Dtest-dynamodb -Dtest-mysql -Dtest-mariadb -Dmariadb.url='jdbc:mariadb://localhost:3308/hibernate_orm_test'  -Dtest-mssql -Dtest-vault -Dtest-neo4j -Dnative-image.xmx=5g -Dnative -Dformat.skip install\"\n+  MX_GIT_CACHE: refcache\n+\n+jobs:\n+  build-quarkus-and-graalvm:\n+    name: Nightly quarkus and GraalVM build", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDEyMjU3NQ=="}, "originalCommit": {"oid": "aad4e98c179badaab2ffa5de42241cfe25955311"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDIzNjE3Mg==", "bodyText": "sorry I missed that.\nReason for the nightly is that it takes too long to verify ? I would assume run on pull-requests would be useful or ?", "url": "https://github.com/oracle/graal/pull/2349#discussion_r410236172", "createdAt": "2020-04-17T13:51:07Z", "author": {"login": "maxandersen"}, "path": ".github/workflows/quarkus.yml", "diffHunk": "@@ -0,0 +1,335 @@\n+name: Nightly quarkus tests\n+\n+on: [push]\n+\n+env:\n+  # Workaround testsuite locale issue\n+  LANG: en_US.UTF-8\n+  JVMCI_VERSION: jvmci-20.1-b01\n+  JDK_VERSION: 11.0.6\n+  JDK_VERSION_SUFFIX: \"+9\"\n+  DB_USER: hibernate_orm_test\n+  DB_PASSWORD: hibernate_orm_test\n+  DB_NAME: hibernate_orm_test\n+  NATIVE_TEST_MAVEN_OPTS: \"-B -Dtest-postgresql -Dtest-elasticsearch -Dtest-keycloak -Dtest-dynamodb -Dtest-mysql -Dtest-mariadb -Dmariadb.url='jdbc:mariadb://localhost:3308/hibernate_orm_test'  -Dtest-mssql -Dtest-vault -Dtest-neo4j -Dnative-image.xmx=5g -Dnative -Dformat.skip install\"\n+  MX_GIT_CACHE: refcache\n+\n+jobs:\n+  build-quarkus-and-graalvm:\n+    name: Nightly quarkus and GraalVM build", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDEyMjU3NQ=="}, "originalCommit": {"oid": "aad4e98c179badaab2ffa5de42241cfe25955311"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDM4MTU1MA==", "bodyText": "I just assumed we wanted it Nightly because our initial discussion was about nightly builds.\nRunning on pull-requests would certainly prevent breaking changes from making it to master.\nThe whole workflow needs something less than 1h and 30m at the moment.", "url": "https://github.com/oracle/graal/pull/2349#discussion_r410381550", "createdAt": "2020-04-17T17:56:14Z", "author": {"login": "zakkak"}, "path": ".github/workflows/quarkus.yml", "diffHunk": "@@ -0,0 +1,335 @@\n+name: Nightly quarkus tests\n+\n+on: [push]\n+\n+env:\n+  # Workaround testsuite locale issue\n+  LANG: en_US.UTF-8\n+  JVMCI_VERSION: jvmci-20.1-b01\n+  JDK_VERSION: 11.0.6\n+  JDK_VERSION_SUFFIX: \"+9\"\n+  DB_USER: hibernate_orm_test\n+  DB_PASSWORD: hibernate_orm_test\n+  DB_NAME: hibernate_orm_test\n+  NATIVE_TEST_MAVEN_OPTS: \"-B -Dtest-postgresql -Dtest-elasticsearch -Dtest-keycloak -Dtest-dynamodb -Dtest-mysql -Dtest-mariadb -Dmariadb.url='jdbc:mariadb://localhost:3308/hibernate_orm_test'  -Dtest-mssql -Dtest-vault -Dtest-neo4j -Dnative-image.xmx=5g -Dnative -Dformat.skip install\"\n+  MX_GIT_CACHE: refcache\n+\n+jobs:\n+  build-quarkus-and-graalvm:\n+    name: Nightly quarkus and GraalVM build", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDEyMjU3NQ=="}, "originalCommit": {"oid": "aad4e98c179badaab2ffa5de42241cfe25955311"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDU4NDU4MQ==", "bodyText": "sorry if I made it sound initially as a nightly build - that was not my intention.\nIntention was to have something on graalvm side that can be used as early warning signs if some change in graalvm master affects quarkus (and vice versa) - preferably that would be on push but if deemed too long/too flakey nightly builds would do.\nMy preference is to have it at least on pull-requests coming in and on push to master (or nightly) would at least catch those things that are not coming in via pull-requests too.", "url": "https://github.com/oracle/graal/pull/2349#discussion_r410584581", "createdAt": "2020-04-18T03:18:05Z", "author": {"login": "maxandersen"}, "path": ".github/workflows/quarkus.yml", "diffHunk": "@@ -0,0 +1,335 @@\n+name: Nightly quarkus tests\n+\n+on: [push]\n+\n+env:\n+  # Workaround testsuite locale issue\n+  LANG: en_US.UTF-8\n+  JVMCI_VERSION: jvmci-20.1-b01\n+  JDK_VERSION: 11.0.6\n+  JDK_VERSION_SUFFIX: \"+9\"\n+  DB_USER: hibernate_orm_test\n+  DB_PASSWORD: hibernate_orm_test\n+  DB_NAME: hibernate_orm_test\n+  NATIVE_TEST_MAVEN_OPTS: \"-B -Dtest-postgresql -Dtest-elasticsearch -Dtest-keycloak -Dtest-dynamodb -Dtest-mysql -Dtest-mariadb -Dmariadb.url='jdbc:mariadb://localhost:3308/hibernate_orm_test'  -Dtest-mssql -Dtest-vault -Dtest-neo4j -Dnative-image.xmx=5g -Dnative -Dformat.skip install\"\n+  MX_GIT_CACHE: refcache\n+\n+jobs:\n+  build-quarkus-and-graalvm:\n+    name: Nightly quarkus and GraalVM build", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDEyMjU3NQ=="}, "originalCommit": {"oid": "aad4e98c179badaab2ffa5de42241cfe25955311"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTM3OTM5OA==", "bodyText": "I propose to start with a nightly task that tests the tip of graal with the latest stable release of Quarkus.\nThis would make our tests more stable and reproducible.\nIf we see that this is not enough, we can easily change policy.", "url": "https://github.com/oracle/graal/pull/2349#discussion_r411379398", "createdAt": "2020-04-20T13:32:18Z", "author": {"login": "ansalond"}, "path": ".github/workflows/quarkus.yml", "diffHunk": "@@ -0,0 +1,335 @@\n+name: Nightly quarkus tests\n+\n+on: [push]\n+\n+env:\n+  # Workaround testsuite locale issue\n+  LANG: en_US.UTF-8\n+  JVMCI_VERSION: jvmci-20.1-b01\n+  JDK_VERSION: 11.0.6\n+  JDK_VERSION_SUFFIX: \"+9\"\n+  DB_USER: hibernate_orm_test\n+  DB_PASSWORD: hibernate_orm_test\n+  DB_NAME: hibernate_orm_test\n+  NATIVE_TEST_MAVEN_OPTS: \"-B -Dtest-postgresql -Dtest-elasticsearch -Dtest-keycloak -Dtest-dynamodb -Dtest-mysql -Dtest-mariadb -Dmariadb.url='jdbc:mariadb://localhost:3308/hibernate_orm_test'  -Dtest-mssql -Dtest-vault -Dtest-neo4j -Dnative-image.xmx=5g -Dnative -Dformat.skip install\"\n+  MX_GIT_CACHE: refcache\n+\n+jobs:\n+  build-quarkus-and-graalvm:\n+    name: Nightly quarkus and GraalVM build", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDEyMjU3NQ=="}, "originalCommit": {"oid": "aad4e98c179badaab2ffa5de42241cfe25955311"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQyNTM1NA==", "bodyText": "5599011 makes it build using the latest github release of quarkus instead of the tip (this includes candidate releases, but I think this is OK, please let me know if you disagree).\nI am letting it run on push till we finalize this PR.", "url": "https://github.com/oracle/graal/pull/2349#discussion_r412425354", "createdAt": "2020-04-21T19:17:59Z", "author": {"login": "zakkak"}, "path": ".github/workflows/quarkus.yml", "diffHunk": "@@ -0,0 +1,335 @@\n+name: Nightly quarkus tests\n+\n+on: [push]\n+\n+env:\n+  # Workaround testsuite locale issue\n+  LANG: en_US.UTF-8\n+  JVMCI_VERSION: jvmci-20.1-b01\n+  JDK_VERSION: 11.0.6\n+  JDK_VERSION_SUFFIX: \"+9\"\n+  DB_USER: hibernate_orm_test\n+  DB_PASSWORD: hibernate_orm_test\n+  DB_NAME: hibernate_orm_test\n+  NATIVE_TEST_MAVEN_OPTS: \"-B -Dtest-postgresql -Dtest-elasticsearch -Dtest-keycloak -Dtest-dynamodb -Dtest-mysql -Dtest-mariadb -Dmariadb.url='jdbc:mariadb://localhost:3308/hibernate_orm_test'  -Dtest-mssql -Dtest-vault -Dtest-neo4j -Dnative-image.xmx=5g -Dnative -Dformat.skip install\"\n+  MX_GIT_CACHE: refcache\n+\n+jobs:\n+  build-quarkus-and-graalvm:\n+    name: Nightly quarkus and GraalVM build", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDEyMjU3NQ=="}, "originalCommit": {"oid": "aad4e98c179badaab2ffa5de42241cfe25955311"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjk2ODMxNQ==", "bodyText": "Thanks!", "url": "https://github.com/oracle/graal/pull/2349#discussion_r412968315", "createdAt": "2020-04-22T13:11:10Z", "author": {"login": "ansalond"}, "path": ".github/workflows/quarkus.yml", "diffHunk": "@@ -0,0 +1,335 @@\n+name: Nightly quarkus tests\n+\n+on: [push]\n+\n+env:\n+  # Workaround testsuite locale issue\n+  LANG: en_US.UTF-8\n+  JVMCI_VERSION: jvmci-20.1-b01\n+  JDK_VERSION: 11.0.6\n+  JDK_VERSION_SUFFIX: \"+9\"\n+  DB_USER: hibernate_orm_test\n+  DB_PASSWORD: hibernate_orm_test\n+  DB_NAME: hibernate_orm_test\n+  NATIVE_TEST_MAVEN_OPTS: \"-B -Dtest-postgresql -Dtest-elasticsearch -Dtest-keycloak -Dtest-dynamodb -Dtest-mysql -Dtest-mariadb -Dmariadb.url='jdbc:mariadb://localhost:3308/hibernate_orm_test'  -Dtest-mssql -Dtest-vault -Dtest-neo4j -Dnative-image.xmx=5g -Dnative -Dformat.skip install\"\n+  MX_GIT_CACHE: refcache\n+\n+jobs:\n+  build-quarkus-and-graalvm:\n+    name: Nightly quarkus and GraalVM build", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDEyMjU3NQ=="}, "originalCommit": {"oid": "aad4e98c179badaab2ffa5de42241cfe25955311"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTM5NTMzOA==", "bodyText": "@ansalond Just a reminder that before merging I need to resolve the above ^^", "url": "https://github.com/oracle/graal/pull/2349#discussion_r471395338", "createdAt": "2020-08-17T10:44:34Z", "author": {"login": "zakkak"}, "path": ".github/workflows/quarkus.yml", "diffHunk": "@@ -0,0 +1,335 @@\n+name: Nightly quarkus tests\n+\n+on: [push]\n+\n+env:\n+  # Workaround testsuite locale issue\n+  LANG: en_US.UTF-8\n+  JVMCI_VERSION: jvmci-20.1-b01\n+  JDK_VERSION: 11.0.6\n+  JDK_VERSION_SUFFIX: \"+9\"\n+  DB_USER: hibernate_orm_test\n+  DB_PASSWORD: hibernate_orm_test\n+  DB_NAME: hibernate_orm_test\n+  NATIVE_TEST_MAVEN_OPTS: \"-B -Dtest-postgresql -Dtest-elasticsearch -Dtest-keycloak -Dtest-dynamodb -Dtest-mysql -Dtest-mariadb -Dmariadb.url='jdbc:mariadb://localhost:3308/hibernate_orm_test'  -Dtest-mssql -Dtest-vault -Dtest-neo4j -Dnative-image.xmx=5g -Dnative -Dformat.skip install\"\n+  MX_GIT_CACHE: refcache\n+\n+jobs:\n+  build-quarkus-and-graalvm:\n+    name: Nightly quarkus and GraalVM build", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDEyMjU3NQ=="}, "originalCommit": {"oid": "aad4e98c179badaab2ffa5de42241cfe25955311"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTc2NjMwOQ==", "bodyText": "@ansalond I have now configured it to run nightly at 3am and when changes affecting the workflow are pushed.\nNote that this workflow tests latest graal with the latest quarkus release from https://github.com/quarkusio/quarkus/releases (no longer testing pre-releases)", "url": "https://github.com/oracle/graal/pull/2349#discussion_r471766309", "createdAt": "2020-08-17T20:47:36Z", "author": {"login": "zakkak"}, "path": ".github/workflows/quarkus.yml", "diffHunk": "@@ -0,0 +1,335 @@\n+name: Nightly quarkus tests\n+\n+on: [push]\n+\n+env:\n+  # Workaround testsuite locale issue\n+  LANG: en_US.UTF-8\n+  JVMCI_VERSION: jvmci-20.1-b01\n+  JDK_VERSION: 11.0.6\n+  JDK_VERSION_SUFFIX: \"+9\"\n+  DB_USER: hibernate_orm_test\n+  DB_PASSWORD: hibernate_orm_test\n+  DB_NAME: hibernate_orm_test\n+  NATIVE_TEST_MAVEN_OPTS: \"-B -Dtest-postgresql -Dtest-elasticsearch -Dtest-keycloak -Dtest-dynamodb -Dtest-mysql -Dtest-mariadb -Dmariadb.url='jdbc:mariadb://localhost:3308/hibernate_orm_test'  -Dtest-mssql -Dtest-vault -Dtest-neo4j -Dnative-image.xmx=5g -Dnative -Dformat.skip install\"\n+  MX_GIT_CACHE: refcache\n+\n+jobs:\n+  build-quarkus-and-graalvm:\n+    name: Nightly quarkus and GraalVM build", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDEyMjU3NQ=="}, "originalCommit": {"oid": "aad4e98c179badaab2ffa5de42241cfe25955311"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0OTM5MjQ0OnYy", "diffSide": "RIGHT", "path": ".github/workflows/quarkus.yml", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOFQwMzoyMToyOFrOGHkLPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxOTo0MDowN1rOGJVSzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDU4NTkxNg==", "bodyText": "worth noting that these matrix tests are a current snapshot from quarkus own native tests and they will change over time - we'll want to try and find a more stable way of defining the tests but for now this should do.", "url": "https://github.com/oracle/graal/pull/2349#discussion_r410585916", "createdAt": "2020-04-18T03:21:28Z", "author": {"login": "maxandersen"}, "path": ".github/workflows/quarkus.yml", "diffHunk": "@@ -0,0 +1,335 @@\n+name: Nightly quarkus tests\n+\n+on: [push]\n+\n+env:\n+  # Workaround testsuite locale issue\n+  LANG: en_US.UTF-8\n+  JVMCI_VERSION: jvmci-20.1-b01\n+  JDK_VERSION: 11.0.6\n+  JDK_VERSION_SUFFIX: \"+9\"\n+  DB_USER: hibernate_orm_test\n+  DB_PASSWORD: hibernate_orm_test\n+  DB_NAME: hibernate_orm_test\n+  NATIVE_TEST_MAVEN_OPTS: \"-B -Dtest-postgresql -Dtest-elasticsearch -Dtest-keycloak -Dtest-dynamodb -Dtest-mysql -Dtest-mariadb -Dmariadb.url='jdbc:mariadb://localhost:3308/hibernate_orm_test'  -Dtest-mssql -Dtest-vault -Dtest-neo4j -Dnative-image.xmx=5g -Dnative -Dformat.skip install\"\n+  MX_GIT_CACHE: refcache\n+\n+jobs:\n+  build-quarkus-and-graalvm:\n+    name: Nightly quarkus and GraalVM build\n+    runs-on: ubuntu-18.04\n+    steps:\n+    - uses: actions/checkout@v1\n+      with:\n+        fetch-depth: 1\n+        path: graal\n+    - uses: actions/checkout@v1\n+      with:\n+        repository: graalvm/mx.git\n+        ref: master\n+        path: mx\n+    - uses: actions/checkout@v1\n+      with:\n+        repository: quarkusio/quarkus.git\n+        ref: master\n+        path: quarkus\n+    # actions/setup-java setups a zulu community distibution of OpenJDK\n+    # apt-get install openjdk-11-jdk installs the same zulu distribuion on github runners\n+    # so we use joschi/setup-jdk instead with an sha for added security since tags can be updated\n+    - uses: joschi/setup-jdk@9dc354d4a8f5781ba8880dc9e6a7bdcc7845e3e7\n+      with:\n+        java-version: 11\n+    - uses: actions/cache@v1\n+      with:\n+        path: ~/.m2/repository\n+        key: ${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}\n+        restore-keys: |\n+          ${{ runner.os }}-maven-\n+    - uses: actions/cache@v1\n+      with:\n+        path: ~/.mx\n+        key: ${{ runner.os }}-mx-${{ hashFiles('**/suite.py') }}\n+        restore-keys: |\n+          ${{ runner.os }}-mx-\n+    - name: Get labsJDK11\n+      run: |\n+        java --version\n+        wget --no-verbose \"https://github.com/graalvm/labs-openjdk-11/releases/download/${JVMCI_VERSION}/labsjdk-ce-${JDK_VERSION}${JDK_VERSION_SUFFIX}-${JVMCI_VERSION}-linux-amd64.tar.gz\"\n+        tar xf labsjdk-ce-${JDK_VERSION}${JDK_VERSION_SUFFIX}-${JVMCI_VERSION}-linux-amd64.tar.gz\n+        labsjdk-ce-${JDK_VERSION}-${JVMCI_VERSION}/bin/java --version\n+    - name: Build graalvm native-image\n+      run: |\n+        export JAVA_HOME=${GITHUB_WORKSPACE}/labsjdk-ce-${JDK_VERSION}-${JVMCI_VERSION}\n+        cd substratevm\n+        ../../mx/mx build\n+        mv $(../../mx/mx graalvm-home) ~/graaljdk\n+        ~/graaljdk/bin/native-image --version\n+    - name: Tar GraalVM\n+      shell: bash\n+      run: tar -czvf graaljdk.tgz -C ~ graaljdk\n+    - name: Persist GraalVM build\n+      uses: actions/upload-artifact@v1\n+      with:\n+        name: graaljdk\n+        path: graaljdk.tgz\n+    - name: Build quarkus\n+      run: |\n+        java --version\n+        export JAVA_HOME=$(realpath $(dirname $(which java | xargs realpath))/../)\n+        cd ../quarkus\n+        eval ./mvnw -e -B -DskipTests -DskipDocs clean install\n+    - name: Tar Quarkus\n+      shell: bash\n+      run: tar -czvf quarkus.tgz -C ../ quarkus\n+    - name: Persist Quarkus\n+      uses: actions/upload-artifact@v1\n+      with:\n+        name: quarkus\n+        path: quarkus.tgz\n+    - name: Tar Maven Repo\n+      shell: bash\n+      run: tar -czvf maven-repo.tgz -C ~ .m2/repository\n+    - name: Persist Maven Repo\n+      uses: actions/upload-artifact@v1\n+      with:\n+        name: maven-repo\n+        path: maven-repo.tgz\n+\n+  native-tests:\n+    name: Native Tests - ${{matrix.category}}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aad4e98c179badaab2ffa5de42241cfe25955311"}, "originalPosition": 99}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTM0NTUxNA==", "bodyText": "+100\nHow would be achieve this though? Seems to me Quarkus should list/define these groups. However, don't know how Quarkus could maintain that list in a way that it doesn't break the moment a new integration test is added or removed.", "url": "https://github.com/oracle/graal/pull/2349#discussion_r411345514", "createdAt": "2020-04-20T12:42:37Z", "author": {"login": "galderz"}, "path": ".github/workflows/quarkus.yml", "diffHunk": "@@ -0,0 +1,335 @@\n+name: Nightly quarkus tests\n+\n+on: [push]\n+\n+env:\n+  # Workaround testsuite locale issue\n+  LANG: en_US.UTF-8\n+  JVMCI_VERSION: jvmci-20.1-b01\n+  JDK_VERSION: 11.0.6\n+  JDK_VERSION_SUFFIX: \"+9\"\n+  DB_USER: hibernate_orm_test\n+  DB_PASSWORD: hibernate_orm_test\n+  DB_NAME: hibernate_orm_test\n+  NATIVE_TEST_MAVEN_OPTS: \"-B -Dtest-postgresql -Dtest-elasticsearch -Dtest-keycloak -Dtest-dynamodb -Dtest-mysql -Dtest-mariadb -Dmariadb.url='jdbc:mariadb://localhost:3308/hibernate_orm_test'  -Dtest-mssql -Dtest-vault -Dtest-neo4j -Dnative-image.xmx=5g -Dnative -Dformat.skip install\"\n+  MX_GIT_CACHE: refcache\n+\n+jobs:\n+  build-quarkus-and-graalvm:\n+    name: Nightly quarkus and GraalVM build\n+    runs-on: ubuntu-18.04\n+    steps:\n+    - uses: actions/checkout@v1\n+      with:\n+        fetch-depth: 1\n+        path: graal\n+    - uses: actions/checkout@v1\n+      with:\n+        repository: graalvm/mx.git\n+        ref: master\n+        path: mx\n+    - uses: actions/checkout@v1\n+      with:\n+        repository: quarkusio/quarkus.git\n+        ref: master\n+        path: quarkus\n+    # actions/setup-java setups a zulu community distibution of OpenJDK\n+    # apt-get install openjdk-11-jdk installs the same zulu distribuion on github runners\n+    # so we use joschi/setup-jdk instead with an sha for added security since tags can be updated\n+    - uses: joschi/setup-jdk@9dc354d4a8f5781ba8880dc9e6a7bdcc7845e3e7\n+      with:\n+        java-version: 11\n+    - uses: actions/cache@v1\n+      with:\n+        path: ~/.m2/repository\n+        key: ${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}\n+        restore-keys: |\n+          ${{ runner.os }}-maven-\n+    - uses: actions/cache@v1\n+      with:\n+        path: ~/.mx\n+        key: ${{ runner.os }}-mx-${{ hashFiles('**/suite.py') }}\n+        restore-keys: |\n+          ${{ runner.os }}-mx-\n+    - name: Get labsJDK11\n+      run: |\n+        java --version\n+        wget --no-verbose \"https://github.com/graalvm/labs-openjdk-11/releases/download/${JVMCI_VERSION}/labsjdk-ce-${JDK_VERSION}${JDK_VERSION_SUFFIX}-${JVMCI_VERSION}-linux-amd64.tar.gz\"\n+        tar xf labsjdk-ce-${JDK_VERSION}${JDK_VERSION_SUFFIX}-${JVMCI_VERSION}-linux-amd64.tar.gz\n+        labsjdk-ce-${JDK_VERSION}-${JVMCI_VERSION}/bin/java --version\n+    - name: Build graalvm native-image\n+      run: |\n+        export JAVA_HOME=${GITHUB_WORKSPACE}/labsjdk-ce-${JDK_VERSION}-${JVMCI_VERSION}\n+        cd substratevm\n+        ../../mx/mx build\n+        mv $(../../mx/mx graalvm-home) ~/graaljdk\n+        ~/graaljdk/bin/native-image --version\n+    - name: Tar GraalVM\n+      shell: bash\n+      run: tar -czvf graaljdk.tgz -C ~ graaljdk\n+    - name: Persist GraalVM build\n+      uses: actions/upload-artifact@v1\n+      with:\n+        name: graaljdk\n+        path: graaljdk.tgz\n+    - name: Build quarkus\n+      run: |\n+        java --version\n+        export JAVA_HOME=$(realpath $(dirname $(which java | xargs realpath))/../)\n+        cd ../quarkus\n+        eval ./mvnw -e -B -DskipTests -DskipDocs clean install\n+    - name: Tar Quarkus\n+      shell: bash\n+      run: tar -czvf quarkus.tgz -C ../ quarkus\n+    - name: Persist Quarkus\n+      uses: actions/upload-artifact@v1\n+      with:\n+        name: quarkus\n+        path: quarkus.tgz\n+    - name: Tar Maven Repo\n+      shell: bash\n+      run: tar -czvf maven-repo.tgz -C ~ .m2/repository\n+    - name: Persist Maven Repo\n+      uses: actions/upload-artifact@v1\n+      with:\n+        name: maven-repo\n+        path: maven-repo.tgz\n+\n+  native-tests:\n+    name: Native Tests - ${{matrix.category}}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDU4NTkxNg=="}, "originalCommit": {"oid": "aad4e98c179badaab2ffa5de42241cfe25955311"}, "originalPosition": 99}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQzOTI0NA==", "bodyText": "Started discussion on the quarkus-dev mailing list.\nI suggest we proceed with merging this PR and when we find a better way of doing this we can create a new PR.", "url": "https://github.com/oracle/graal/pull/2349#discussion_r412439244", "createdAt": "2020-04-21T19:40:07Z", "author": {"login": "zakkak"}, "path": ".github/workflows/quarkus.yml", "diffHunk": "@@ -0,0 +1,335 @@\n+name: Nightly quarkus tests\n+\n+on: [push]\n+\n+env:\n+  # Workaround testsuite locale issue\n+  LANG: en_US.UTF-8\n+  JVMCI_VERSION: jvmci-20.1-b01\n+  JDK_VERSION: 11.0.6\n+  JDK_VERSION_SUFFIX: \"+9\"\n+  DB_USER: hibernate_orm_test\n+  DB_PASSWORD: hibernate_orm_test\n+  DB_NAME: hibernate_orm_test\n+  NATIVE_TEST_MAVEN_OPTS: \"-B -Dtest-postgresql -Dtest-elasticsearch -Dtest-keycloak -Dtest-dynamodb -Dtest-mysql -Dtest-mariadb -Dmariadb.url='jdbc:mariadb://localhost:3308/hibernate_orm_test'  -Dtest-mssql -Dtest-vault -Dtest-neo4j -Dnative-image.xmx=5g -Dnative -Dformat.skip install\"\n+  MX_GIT_CACHE: refcache\n+\n+jobs:\n+  build-quarkus-and-graalvm:\n+    name: Nightly quarkus and GraalVM build\n+    runs-on: ubuntu-18.04\n+    steps:\n+    - uses: actions/checkout@v1\n+      with:\n+        fetch-depth: 1\n+        path: graal\n+    - uses: actions/checkout@v1\n+      with:\n+        repository: graalvm/mx.git\n+        ref: master\n+        path: mx\n+    - uses: actions/checkout@v1\n+      with:\n+        repository: quarkusio/quarkus.git\n+        ref: master\n+        path: quarkus\n+    # actions/setup-java setups a zulu community distibution of OpenJDK\n+    # apt-get install openjdk-11-jdk installs the same zulu distribuion on github runners\n+    # so we use joschi/setup-jdk instead with an sha for added security since tags can be updated\n+    - uses: joschi/setup-jdk@9dc354d4a8f5781ba8880dc9e6a7bdcc7845e3e7\n+      with:\n+        java-version: 11\n+    - uses: actions/cache@v1\n+      with:\n+        path: ~/.m2/repository\n+        key: ${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}\n+        restore-keys: |\n+          ${{ runner.os }}-maven-\n+    - uses: actions/cache@v1\n+      with:\n+        path: ~/.mx\n+        key: ${{ runner.os }}-mx-${{ hashFiles('**/suite.py') }}\n+        restore-keys: |\n+          ${{ runner.os }}-mx-\n+    - name: Get labsJDK11\n+      run: |\n+        java --version\n+        wget --no-verbose \"https://github.com/graalvm/labs-openjdk-11/releases/download/${JVMCI_VERSION}/labsjdk-ce-${JDK_VERSION}${JDK_VERSION_SUFFIX}-${JVMCI_VERSION}-linux-amd64.tar.gz\"\n+        tar xf labsjdk-ce-${JDK_VERSION}${JDK_VERSION_SUFFIX}-${JVMCI_VERSION}-linux-amd64.tar.gz\n+        labsjdk-ce-${JDK_VERSION}-${JVMCI_VERSION}/bin/java --version\n+    - name: Build graalvm native-image\n+      run: |\n+        export JAVA_HOME=${GITHUB_WORKSPACE}/labsjdk-ce-${JDK_VERSION}-${JVMCI_VERSION}\n+        cd substratevm\n+        ../../mx/mx build\n+        mv $(../../mx/mx graalvm-home) ~/graaljdk\n+        ~/graaljdk/bin/native-image --version\n+    - name: Tar GraalVM\n+      shell: bash\n+      run: tar -czvf graaljdk.tgz -C ~ graaljdk\n+    - name: Persist GraalVM build\n+      uses: actions/upload-artifact@v1\n+      with:\n+        name: graaljdk\n+        path: graaljdk.tgz\n+    - name: Build quarkus\n+      run: |\n+        java --version\n+        export JAVA_HOME=$(realpath $(dirname $(which java | xargs realpath))/../)\n+        cd ../quarkus\n+        eval ./mvnw -e -B -DskipTests -DskipDocs clean install\n+    - name: Tar Quarkus\n+      shell: bash\n+      run: tar -czvf quarkus.tgz -C ../ quarkus\n+    - name: Persist Quarkus\n+      uses: actions/upload-artifact@v1\n+      with:\n+        name: quarkus\n+        path: quarkus.tgz\n+    - name: Tar Maven Repo\n+      shell: bash\n+      run: tar -czvf maven-repo.tgz -C ~ .m2/repository\n+    - name: Persist Maven Repo\n+      uses: actions/upload-artifact@v1\n+      with:\n+        name: maven-repo\n+        path: maven-repo.tgz\n+\n+  native-tests:\n+    name: Native Tests - ${{matrix.category}}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDU4NTkxNg=="}, "originalCommit": {"oid": "aad4e98c179badaab2ffa5de42241cfe25955311"}, "originalPosition": 99}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0Njg1NjAwOnYy", "diffSide": "RIGHT", "path": ".github/workflows/quarkus.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMjo1NzoxNVrOHBnnZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxMjo1NzoxNVrOHBnnZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ1OTY4NA==", "bodyText": "@zakkak, please add .github/ci-prerequisites.sh or remove this step.\nRun .github/ci-prerequisites.sh\n/home/runner/work/_temp/cfae83e8-7803-4c08-9ef8-59de516c2f55.sh: line 1: .github/ci-prerequisites.sh: No such file or directory\n##[error]Process completed with exit code 127.\n\nhttps://github.com/zakkak/mandrel/runs/993279323?check_suite_focus=true", "url": "https://github.com/oracle/graal/pull/2349#discussion_r471459684", "createdAt": "2020-08-17T12:57:15Z", "author": {"login": "ansalond"}, "path": ".github/workflows/quarkus.yml", "diffHunk": "@@ -0,0 +1,371 @@\n+name: Nightly quarkus tests\n+\n+on: [push]\n+\n+env:\n+  # Workaround testsuite locale issue\n+  LANG: en_US.UTF-8\n+  DB_USER: hibernate_orm_test\n+  DB_PASSWORD: hibernate_orm_test\n+  DB_NAME: hibernate_orm_test\n+  NATIVE_TEST_MAVEN_OPTS: \"-B --settings .github/mvn-settings.xml --fail-at-end -Dquarkus.native.container-build=true -Dtest-postgresql -Dtest-elasticsearch -Dtest-keycloak -Dtest-amazon-services -Dtest-db2 -Dtest-mysql -Dtest-mariadb -Dmariadb.base_url='jdbc:mariadb://localhost:3308' -Dmariadb.url='jdbc:mariadb://localhost:3308/hibernate_orm_test'  -Dtest-mssql -Dtest-vault -Dtest-neo4j -Dtest-kafka -Dtest-redis -Dnative-image.xmx=5g -Dnative -Dnative.surefire.skip -Dformat.skip -Dno-descriptor-tests install\"\n+  MX_GIT_CACHE: refcache\n+\n+jobs:\n+  build-quarkus-and-graalvm:\n+    name: Nightly quarkus and GraalVM build\n+    runs-on: ubuntu-18.04\n+    steps:\n+    - uses: actions/checkout@v1\n+      with:\n+        fetch-depth: 1\n+        path: graal\n+    - uses: actions/checkout@v1\n+      with:\n+        repository: graalvm/mx.git\n+        ref: master\n+        path: mx\n+    - name: Get latest quarkus release\n+      run: |\n+        curl --output quarkus.tgz -sL $(curl -sL https://api.github.com/repos/quarkusio/quarkus/releases/latest | jq -r .tarball_url)\n+        mkdir ${GITHUB_WORKSPACE}/quarkus\n+        tar xf quarkus.tgz -C ${GITHUB_WORKSPACE}/quarkus --strip-components=1\n+    - uses: actions/cache@v1\n+      with:\n+        path: ~/.m2/repository\n+        key: ${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}\n+        restore-keys: |\n+          ${{ runner.os }}-maven-\n+    - uses: actions/cache@v1\n+      with:\n+        path: ~/.mx\n+        key: ${{ runner.os }}-mx-${{ hashFiles('**/suite.py') }}\n+        restore-keys: |\n+          ${{ runner.os }}-mx-\n+    - name: Get labsJDK11 version\n+      run: |\n+        export LABSJDK_VERSION=$(jq -r '.jdks.\"labsjdk-ce-11\".version' common.json)\n+        echo \"::set-env name=JDK_VERSION::$(echo $LABSJDK_VERSION | cut -d- -f 2 | cut -d+ -f 1)\"\n+        echo \"::set-env name=JDK_VERSION_SUFFIX::+$(echo $LABSJDK_VERSION | cut -d- -f 2 | cut -d+ -f 2)\"\n+        echo \"::set-env name=JVMCI_VERSION::$(echo $LABSJDK_VERSION | cut -d- -f 3,4,5)\"\n+    - name: Get labsJDK11\n+      run: |\n+        export JDK_VERSION=${{ env.JDK_VERSION }}\n+        export JDK_VERSION_SUFFIX=${{ env.JDK_VERSION_SUFFIX }}\n+        export JVMCI_VERSION=${{ env.JVMCI_VERSION }}\n+        wget --no-verbose \"https://github.com/graalvm/labs-openjdk-11/releases/download/${JVMCI_VERSION}/labsjdk-ce-${JDK_VERSION}${JDK_VERSION_SUFFIX}-${JVMCI_VERSION}-linux-amd64.tar.gz\"\n+        tar xf labsjdk-ce-${JDK_VERSION}${JDK_VERSION_SUFFIX}-${JVMCI_VERSION}-linux-amd64.tar.gz\n+        labsjdk-ce-${JDK_VERSION}-${JVMCI_VERSION}/bin/java --version\n+    - name: Build graalvm native-image\n+      run: |\n+        export JAVA_HOME=${GITHUB_WORKSPACE}/labsjdk-ce-${{ env.JDK_VERSION }}-${{ env.JVMCI_VERSION }}\n+        cd substratevm\n+        ../../mx/mx --components=\"Native Image\" build\n+        mv $(../../mx/mx --components=\"Native Image\" graalvm-home) ~/graaljdk\n+        ~/graaljdk/bin/native-image --version\n+    - name: Tar GraalVM\n+      shell: bash\n+      run: tar -czvf graaljdk.tgz -C ~ graaljdk\n+    - name: Persist GraalVM build\n+      uses: actions/upload-artifact@v1\n+      with:\n+        name: graaljdk\n+        path: graaljdk.tgz\n+    - name: Build quarkus\n+      run: |\n+        export JAVA_HOME=${GITHUB_WORKSPACE}/labsjdk-ce-${{ env.JDK_VERSION }}-${{ env.JVMCI_VERSION }}\n+        cd ${GITHUB_WORKSPACE}/quarkus\n+        eval ./mvnw -e -B -DskipTests -DskipDocs clean install\n+    - name: Tar Quarkus\n+      shell: bash\n+      run: tar -czvf quarkus.tgz -C ${GITHUB_WORKSPACE}/ quarkus\n+    - name: Persist Quarkus\n+      uses: actions/upload-artifact@v1\n+      with:\n+        name: quarkus\n+        path: quarkus.tgz\n+    - name: Tar Maven Repo\n+      shell: bash\n+      run: tar -czvf maven-repo.tgz -C ~ .m2/repository\n+    - name: Persist Maven Repo\n+      uses: actions/upload-artifact@v1\n+      with:\n+        name: maven-repo\n+        path: maven-repo.tgz\n+\n+  native-tests:\n+    name: Native Tests - ${{matrix.category}}\n+    needs: build-quarkus-and-graalvm\n+    runs-on: ubuntu-latest\n+    # Ignore the following YAML Schema error\n+    timeout-minutes: ${{matrix.timeout}}\n+    strategy:\n+      max-parallel: 8\n+      fail-fast: false\n+      matrix:\n+        category: [Main, Data1, Data2, Data3, Data4, Data5, Data6, Security1, Security2, Security3, Amazon, Messaging, Cache, HTTP, Misc1, Misc2, Misc3, Misc4, Spring, gRPC]\n+        include:\n+          - category: Main\n+            postgres: \"true\"\n+            timeout: 40\n+            test-modules: main\n+          - category: Data1\n+            mariadb: \"true\"\n+            mssql: \"true\"\n+            timeout: 65\n+            test-modules: >\n+              jpa-h2\n+              jpa-mariadb\n+              jpa-mssql\n+              jpa-derby\n+              jpa-without-entity\n+              hibernate-tenancy\n+          - category: Data2\n+            db2: \"true\"\n+            mysql: \"true\"\n+            mariadb: \"true\"\n+            timeout: 65\n+            test-modules: >\n+              jpa\n+              jpa-mysql\n+              jpa-db2\n+              reactive-mysql-client\n+              reactive-db2-client\n+              hibernate-reactive-db2\n+              hibernate-reactive-mysql\n+          - category: Data3\n+            postgres: \"true\"\n+            timeout: 70\n+            test-modules: >\n+              flyway\n+              hibernate-orm-panache\n+              hibernate-orm-panache-kotlin\n+              hibernate-orm-envers\n+              liquibase\n+          - category: Data4\n+            neo4j: \"true\"\n+            redis: \"true\"\n+            timeout: 55\n+            test-modules: >\n+              mongodb-client\n+              mongodb-panache\n+              redis-client\n+              neo4j\n+              hibernate-orm-rest-data-panache\n+          - category: Data5\n+            postgres: \"true\"\n+            timeout: 65\n+            test-modules: >\n+              jpa-postgresql\n+              narayana-stm\n+              narayana-jta\n+              reactive-pg-client\n+              hibernate-reactive-postgresql\n+          - category: Data6\n+            postgres: \"true\"\n+            timeout: 40\n+            test-modules: >\n+              elasticsearch-rest-client\n+              elasticsearch-rest-high-level-client\n+              hibernate-search-elasticsearch\n+          - category: Amazon\n+            amazonServices: \"true\"\n+            timeout: 45\n+            test-modules: >\n+              amazon-services\n+              amazon-lambda\n+              amazon-lambda-http\n+          - category: Messaging\n+            timeout: 75\n+            test-modules: >\n+              artemis-core\n+              artemis-jms\n+              kafka\n+              kafka-streams\n+              reactive-messaging-amqp\n+          - category: Security1\n+            timeout: 50\n+            keycloak: \"true\"\n+            test-modules: >\n+              elytron-security-oauth2\n+              elytron-security\n+              elytron-security-jdbc\n+              elytron-undertow\n+              elytron-security-ldap\n+          - category: Security2\n+            timeout: 70\n+            keycloak: \"true\"\n+            test-modules: >\n+              elytron-resteasy\n+              oidc\n+              oidc-code-flow\n+              oidc-tenancy\n+              keycloak-authorization\n+          - category: Security3\n+            timeout: 50\n+            test-modules: >\n+              vault\n+              vault-app\n+              vault-agroal\n+          - category: Cache\n+            timeout: 55\n+            test-modules: >\n+              infinispan-cache-jpa\n+              infinispan-client\n+              cache\n+          - category: HTTP\n+            timeout: 60\n+            test-modules: >\n+              resteasy-jackson\n+              resteasy-mutiny\n+              vertx\n+              vertx-http\n+              vertx-web\n+              vertx-graphql\n+              virtual-http\n+              rest-client\n+          - category: Misc1\n+            timeout: 60\n+            test-modules: >\n+              maven\n+              jackson\n+              jsonb\n+              jsch\n+              jgit\n+              quartz\n+              qute\n+              consul-config\n+          - category: Misc2\n+            timeout: 55\n+            test-modules: >\n+              tika\n+              hibernate-validator\n+              test-extension\n+              logging-gelf\n+              bootstrap-config\n+          # kubernetes-client alone takes 30mn+\n+          - category: Misc3\n+            timeout: 60\n+            test-modules: >\n+              kubernetes-client\n+          - category: Misc4\n+            timeout: 30\n+            test-modules: >\n+              smallrye-graphql\n+              picocli-native\n+              gradle\n+          - category: Spring\n+            timeout: 50\n+            test-modules: >\n+              spring-di\n+              spring-web\n+              spring-data-jpa\n+              spring-boot-properties\n+              spring-cloud-config-client\n+          - category: gRPC\n+            timeout: 65\n+            test-modules: >\n+              grpc-health\n+              grpc-interceptors\n+              grpc-mutual-auth\n+              grpc-plain-text\n+              grpc-proto-v2\n+              grpc-streaming\n+              grpc-tls\n+    steps:\n+      # These should be services, but services do not (yet) allow conditional execution\n+      - name: Postgres Service\n+        run: |\n+          docker run --rm --publish 5432:5432 --name build-postgres \\\n+          -e POSTGRES_USER=$DB_USER -e POSTGRES_PASSWORD=$DB_PASSWORD -e POSTGRES_DB=$DB_NAME \\\n+          -d postgres:10.5\n+        if: matrix.postgres\n+      - name: MySQL Service\n+        run: |\n+          sudo service mysql stop || true\n+          docker run --rm --publish 3306:3306 --name build-mysql  \\\n+            -e MYSQL_USER=$DB_USER -e MYSQL_PASSWORD=$DB_PASSWORD -e MYSQL_DATABASE=$DB_NAME -e MYSQL_RANDOM_ROOT_PASSWORD=true \\\n+            -d mysql:5 --skip-ssl\n+        if: matrix.mysql\n+      - name: DB2 Service\n+        run: |\n+          docker run --rm --publish 50000:50000 --name build-db2 --privileged=true \\\n+            -e DB2INSTANCE=hreact -e DB2INST1_PASSWORD=hreact -e DBNAME=hreact -e LICENSE=accept -e AUTOCONFIG=false -e ARCHIVE_LOGS=false \\\n+            -d ibmcom/db2:11.5.0.0a\n+        if: matrix.db2\n+      - name: Maria DB Service\n+        run: |\n+          docker run --rm --publish 3308:3306 --name build-mariadb \\\n+            -e MYSQL_USER=$DB_USER -e MYSQL_PASSWORD=$DB_PASSWORD -e MYSQL_DATABASE=$DB_NAME -e MYSQL_ROOT_PASSWORD=secret \\\n+            -d mariadb:10.4\n+        if: matrix.mariadb\n+      - name: MS-SQL Service\n+        run: |\n+          docker run --rm --publish 1433:1433 --name build-mssql \\\n+            -e ACCEPT_EULA=Y -e SA_PASSWORD=ActuallyRequired11Complexity \\\n+            -d microsoft/mssql-server-linux:2017-CU13\n+        if: matrix.mssql\n+      - name: Amazon Services\n+        run: |\n+          docker run --rm --publish 8000:4569 --publish 8008:4572 --publish 8009:4575 --publish 8010:4576 --publish 8011:4599 --publish 8012:4566 --name build-amazon-service-clients -e SERVICES=s3,dynamodb,sns,sqs,kms,ses -e START_WEB=0 \\\n+            -d localstack/localstack:0.11.1\n+        if: matrix.amazonServices\n+      - name: Neo4j Service\n+        run: |\n+          docker run --rm --publish 7687:7687 --name build-neo4j \\\n+            -e NEO4J_AUTH=neo4j/secret -e NEO4J_dbms_memory_pagecache_size=10M -e NEO4J_dbms_memory_heap_initial__size=10M \\\n+            -d neo4j/neo4j-experimental:4.0.0-rc01\n+        if: matrix.neo4j\n+      - name: Redis Service\n+        run: docker run --rm --publish 6379:6379 --name build-redis -d redis:5.0.8-alpine\n+        if: matrix.redis\n+      - name: Keycloak Service\n+        run: |\n+          docker run --rm --publish 8180:8080 --publish 8543:8443 --name build-keycloak \\\n+            -e KEYCLOAK_USER=admin -e KEYCLOAK_PASSWORD=admin -e JAVA_OPTS=\" \\\n+              -server -Xms64m -Xmx512m -XX:MetaspaceSize=96M \\\n+              -XX:MaxMetaspaceSize=256m -Djava.net.preferIPv4Stack=true -Djava.awt.headless=true \\\n+              -Dkeycloak.profile.feature.upload_scripts=enabled\" \\\n+            -d quay.io/keycloak/keycloak:11.0.0\n+        if: matrix.keycloak\n+      - uses: actions/checkout@v2\n+      - name: Set up JDK 11\n+        # Uses sha for added security since tags can be updated\n+        uses: joschi/setup-jdk@b9cc6eabf7e7e3889766b5cee486f874c9e1bd2d\n+        with:\n+          java-version: 11\n+      - name: Reclaim Disk Space\n+        run: .github/ci-prerequisites.sh", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3826faaae169e108b5f637d004f9e9d810cf729a"}, "originalPosition": 338}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 856, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}