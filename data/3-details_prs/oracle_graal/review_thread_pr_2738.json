{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0NTYxNzA3", "number": 2738, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNjo1NzozMFrOEW4TLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNjo1NzozMFrOEW4TLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNDI2NTQyOnYy", "diffSide": "RIGHT", "path": ".travis.yml", "isResolved": true, "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNjo1NzozMFrOG-XTMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQxNjo0ODoyNlrOG_AiHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODA0NjY0MQ==", "bodyText": "Why not run the same testing as in the else branch?\nAlso, I would rename RM_GIT to WITHOUT_VCS as it better documents the intention of this change.", "url": "https://github.com/oracle/graal/pull/2738#discussion_r468046641", "createdAt": "2020-08-10T16:57:30Z", "author": {"login": "dougxc"}, "path": ".travis.yml", "diffHunk": "@@ -135,7 +137,14 @@ install:\n script:\n   - echo ${JAVA_HOME}\n   - ${JAVA_HOME}/bin/java -version\n-  - mx --primary-suite-path ${TRAVIS_BUILD_DIR}/${PRIMARY} --J @\"-Xmx2g\" --java-home=${JAVA_HOME} gate --strict-mode --tags ${GATE}\n+  - |\n+      if [[ ${RM_GIT} ]]\n+      then\n+        rm -rf .git\n+        mx --primary-suite-path ${TRAVIS_BUILD_DIR}/substratevm native-image --version", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9615754550a382061af490068257fa0453137bd"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODEwOTQzMw==", "bodyText": "Why not run the same testing as in the else branch?\n\nThat's a good question and kind of show why this kind of tests might not be that future proof.\nLooking at the changes in 05d53b0 one sees that only 3 suites are affected (sdk, compiler, substratevm).\nNow in these suites only a subset of the commands are affected. For instance in substratevm the only affected commmands are native-image and native-image-configure (the ones invoking _ensure_vm_built. As a result,\nmx --primary-suite-path substratevm gate --tags build works fine even without this PR.\nIn order to test all the changes of this PR one needs to run:\n\nmx --primary-suite-path substratevm native-image -version\nmx --primary-suite-path compiler makegraaljdk /tmp/graaljdk\nmx --primary-suite-path sdk javadoc\n\nbut this still allows people to perform changes that could break mx commands performed outside a vcs repository.\nE.g.  mx --primary-suite-path substratevm build\nUnfortunately we cannot (it would take too long) test every mx command of graal, so I just settled with mx native-image.\nWDYT?\n\nAlso, I would rename RM_GIT to WITHOUT_VCS as it better documents the intention of this change.\n\n\ud83d\udc4d I'll take care of that.", "url": "https://github.com/oracle/graal/pull/2738#discussion_r468109433", "createdAt": "2020-08-10T18:52:10Z", "author": {"login": "zakkak"}, "path": ".travis.yml", "diffHunk": "@@ -135,7 +137,14 @@ install:\n script:\n   - echo ${JAVA_HOME}\n   - ${JAVA_HOME}/bin/java -version\n-  - mx --primary-suite-path ${TRAVIS_BUILD_DIR}/${PRIMARY} --J @\"-Xmx2g\" --java-home=${JAVA_HOME} gate --strict-mode --tags ${GATE}\n+  - |\n+      if [[ ${RM_GIT} ]]\n+      then\n+        rm -rf .git\n+        mx --primary-suite-path ${TRAVIS_BUILD_DIR}/substratevm native-image --version", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODA0NjY0MQ=="}, "originalCommit": {"oid": "e9615754550a382061af490068257fa0453137bd"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE0NjQzMQ==", "bodyText": "Ok, then we'll start with the testing you've added and expand as necessary (i.e. when we find other commands that need to be fixed to work without VCS).", "url": "https://github.com/oracle/graal/pull/2738#discussion_r468146431", "createdAt": "2020-08-10T19:56:24Z", "author": {"login": "dougxc"}, "path": ".travis.yml", "diffHunk": "@@ -135,7 +137,14 @@ install:\n script:\n   - echo ${JAVA_HOME}\n   - ${JAVA_HOME}/bin/java -version\n-  - mx --primary-suite-path ${TRAVIS_BUILD_DIR}/${PRIMARY} --J @\"-Xmx2g\" --java-home=${JAVA_HOME} gate --strict-mode --tags ${GATE}\n+  - |\n+      if [[ ${RM_GIT} ]]\n+      then\n+        rm -rf .git\n+        mx --primary-suite-path ${TRAVIS_BUILD_DIR}/substratevm native-image --version", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODA0NjY0MQ=="}, "originalCommit": {"oid": "e9615754550a382061af490068257fa0453137bd"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODIxOTU1MA==", "bodyText": "Thank u", "url": "https://github.com/oracle/graal/pull/2738#discussion_r468219550", "createdAt": "2020-08-10T22:24:48Z", "author": {"login": "pjkendall982"}, "path": ".travis.yml", "diffHunk": "@@ -135,7 +137,14 @@ install:\n script:\n   - echo ${JAVA_HOME}\n   - ${JAVA_HOME}/bin/java -version\n-  - mx --primary-suite-path ${TRAVIS_BUILD_DIR}/${PRIMARY} --J @\"-Xmx2g\" --java-home=${JAVA_HOME} gate --strict-mode --tags ${GATE}\n+  - |\n+      if [[ ${RM_GIT} ]]\n+      then\n+        rm -rf .git\n+        mx --primary-suite-path ${TRAVIS_BUILD_DIR}/substratevm native-image --version", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODA0NjY0MQ=="}, "originalCommit": {"oid": "e9615754550a382061af490068257fa0453137bd"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODUxMjcwNA==", "bodyText": "Thanks @dougxc!", "url": "https://github.com/oracle/graal/pull/2738#discussion_r468512704", "createdAt": "2020-08-11T11:33:18Z", "author": {"login": "zakkak"}, "path": ".travis.yml", "diffHunk": "@@ -135,7 +137,14 @@ install:\n script:\n   - echo ${JAVA_HOME}\n   - ${JAVA_HOME}/bin/java -version\n-  - mx --primary-suite-path ${TRAVIS_BUILD_DIR}/${PRIMARY} --J @\"-Xmx2g\" --java-home=${JAVA_HOME} gate --strict-mode --tags ${GATE}\n+  - |\n+      if [[ ${RM_GIT} ]]\n+      then\n+        rm -rf .git\n+        mx --primary-suite-path ${TRAVIS_BUILD_DIR}/substratevm native-image --version", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODA0NjY0MQ=="}, "originalCommit": {"oid": "e9615754550a382061af490068257fa0453137bd"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODUyMTI1Nw==", "bodyText": "Have you looked into the Travis failures on this PR?", "url": "https://github.com/oracle/graal/pull/2738#discussion_r468521257", "createdAt": "2020-08-11T11:50:19Z", "author": {"login": "dougxc"}, "path": ".travis.yml", "diffHunk": "@@ -135,7 +137,14 @@ install:\n script:\n   - echo ${JAVA_HOME}\n   - ${JAVA_HOME}/bin/java -version\n-  - mx --primary-suite-path ${TRAVIS_BUILD_DIR}/${PRIMARY} --J @\"-Xmx2g\" --java-home=${JAVA_HOME} gate --strict-mode --tags ${GATE}\n+  - |\n+      if [[ ${RM_GIT} ]]\n+      then\n+        rm -rf .git\n+        mx --primary-suite-path ${TRAVIS_BUILD_DIR}/substratevm native-image --version", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODA0NjY0MQ=="}, "originalCommit": {"oid": "e9615754550a382061af490068257fa0453137bd"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODcyMjIwNw==", "bodyText": "Travis looks happy now :)", "url": "https://github.com/oracle/graal/pull/2738#discussion_r468722207", "createdAt": "2020-08-11T16:48:26Z", "author": {"login": "zakkak"}, "path": ".travis.yml", "diffHunk": "@@ -135,7 +137,14 @@ install:\n script:\n   - echo ${JAVA_HOME}\n   - ${JAVA_HOME}/bin/java -version\n-  - mx --primary-suite-path ${TRAVIS_BUILD_DIR}/${PRIMARY} --J @\"-Xmx2g\" --java-home=${JAVA_HOME} gate --strict-mode --tags ${GATE}\n+  - |\n+      if [[ ${RM_GIT} ]]\n+      then\n+        rm -rf .git\n+        mx --primary-suite-path ${TRAVIS_BUILD_DIR}/substratevm native-image --version", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODA0NjY0MQ=="}, "originalCommit": {"oid": "e9615754550a382061af490068257fa0453137bd"}, "originalPosition": 18}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 816, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}