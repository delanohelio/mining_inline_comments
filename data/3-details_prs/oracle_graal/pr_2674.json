{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ5MDYzMTE0", "number": 2674, "title": "CAP cache improvements", "bodyText": "Added ExitAfterQueryCodeGeneration native-image argument (output query code for target platform without executing it)\nAdded QueryCodeDir native-image argument (directory where query code for target platform should be output)\nSplit query code function and main\nOutput which value is missing from CAP cache if CAP cache is corrupted or isn't up to date.", "createdAt": "2020-07-14T19:12:40Z", "url": "https://github.com/oracle/graal/pull/2674", "merged": true, "mergeCommit": {"oid": "d77d41e182520cca871b0fdcc74aa37d29c37b83"}, "closed": true, "closedAt": "2020-08-06T16:51:14Z", "author": {"login": "lazar-mitrovic"}, "timelineItems": {"totalCount": 38, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc08-ScgBqjM1NDYwMTExNTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc76CcxgFqTQ2MTU5OTIxNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "020dff13c98ab509a3a55fc8f6d312ccae35da46", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/020dff13c98ab509a3a55fc8f6d312ccae35da46", "committedDate": "2020-07-14T17:15:11Z", "message": "Add `DontRunCAPQueryCode` native-image argument\n\n\nAdd `CAPQueryCodeDir` native-image argument\n\n\nSplit query code function and main\n\n\n.\n\n\n."}, "afterCommit": {"oid": "a9ee525f1ecbe793d3139122059dd9a1bd7ea04d", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/a9ee525f1ecbe793d3139122059dd9a1bd7ea04d", "committedDate": "2020-07-14T21:31:20Z", "message": "Add `DontRunCAPQueryCode` native-image argument\n\n\nAdd `CAPQueryCodeDir` native-image argument\n\n\nSplit query code function and main\n\n\n.\n\n\n."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a9ee525f1ecbe793d3139122059dd9a1bd7ea04d", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/a9ee525f1ecbe793d3139122059dd9a1bd7ea04d", "committedDate": "2020-07-14T21:31:20Z", "message": "Add `DontRunCAPQueryCode` native-image argument\n\n\nAdd `CAPQueryCodeDir` native-image argument\n\n\nSplit query code function and main\n\n\n.\n\n\n."}, "afterCommit": {"oid": "b69bf25fcb069a561be36b0266841b086915ae40", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/b69bf25fcb069a561be36b0266841b086915ae40", "committedDate": "2020-07-15T12:26:02Z", "message": "Add `DontRunCAPQueryCode` native-image argument\n\n\nAdd `CAPQueryCodeDir` native-image argument\n\n\nSplit query code function and main\n\n\n.\n\n\n."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3b8e0e25caf07fb899ccf2a0b68a76c2aec7f563", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/3b8e0e25caf07fb899ccf2a0b68a76c2aec7f563", "committedDate": "2020-07-15T12:43:41Z", "message": "jdk8 fix"}, "afterCommit": {"oid": "84477a2bf18845c0952c33d28f77508c5db83bad", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/84477a2bf18845c0952c33d28f77508c5db83bad", "committedDate": "2020-07-15T14:54:56Z", "message": "Add `DontRunCAPQueryCode` native-image argument\n\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\njdk8 fix"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "866826b6fcb77a43a10c77272a27562c09fcc5bd", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/866826b6fcb77a43a10c77272a27562c09fcc5bd", "committedDate": "2020-07-15T16:51:20Z", "message": "Add `DontRunCAPQueryCode` native-image argument\n\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\njdk8 fix\nStyle gate"}, "afterCommit": {"oid": "5bca02906d6e12e736ab816420158ab672430939", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/5bca02906d6e12e736ab816420158ab672430939", "committedDate": "2020-07-15T16:51:43Z", "message": "Add `DontRunCAPQueryCode` native-image argument\n\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\njdk8 fix\nStyle gate"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5bca02906d6e12e736ab816420158ab672430939", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/5bca02906d6e12e736ab816420158ab672430939", "committedDate": "2020-07-15T16:51:43Z", "message": "Add `DontRunCAPQueryCode` native-image argument\n\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\njdk8 fix\nStyle gate"}, "afterCommit": {"oid": "4047b6bde20846004541b091678f63e96bc77836", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/4047b6bde20846004541b091678f63e96bc77836", "committedDate": "2020-07-15T16:57:39Z", "message": "Add `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\njdk8 fix\nStyle gate"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "84477a2bf18845c0952c33d28f77508c5db83bad", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/84477a2bf18845c0952c33d28f77508c5db83bad", "committedDate": "2020-07-15T14:54:56Z", "message": "Add `DontRunCAPQueryCode` native-image argument\n\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\njdk8 fix"}, "afterCommit": {"oid": "866826b6fcb77a43a10c77272a27562c09fcc5bd", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/866826b6fcb77a43a10c77272a27562c09fcc5bd", "committedDate": "2020-07-15T16:51:20Z", "message": "Add `DontRunCAPQueryCode` native-image argument\n\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\njdk8 fix\nStyle gate"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4047b6bde20846004541b091678f63e96bc77836", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/4047b6bde20846004541b091678f63e96bc77836", "committedDate": "2020-07-15T16:57:39Z", "message": "Add `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\njdk8 fix\nStyle gate"}, "afterCommit": {"oid": "adbb09d0ccaaf134df01948d47c08ed74083f59d", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/adbb09d0ccaaf134df01948d47c08ed74083f59d", "committedDate": "2020-07-15T16:58:17Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\njdk8 fix\nStyle gate"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "adbb09d0ccaaf134df01948d47c08ed74083f59d", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/adbb09d0ccaaf134df01948d47c08ed74083f59d", "committedDate": "2020-07-15T16:58:17Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\njdk8 fix\nStyle gate"}, "afterCommit": {"oid": "7e5bb82c72bf15c8be5646afe2a34ed97f499ed0", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/7e5bb82c72bf15c8be5646afe2a34ed97f499ed0", "committedDate": "2020-07-15T17:43:57Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\njdk8 fix\nStyle gate\nstylegate"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7e5bb82c72bf15c8be5646afe2a34ed97f499ed0", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/7e5bb82c72bf15c8be5646afe2a34ed97f499ed0", "committedDate": "2020-07-15T17:43:57Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\njdk8 fix\nStyle gate\nstylegate"}, "afterCommit": {"oid": "55baad590d34cbd969efc1689ca227272ee61cc1", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/55baad590d34cbd969efc1689ca227272ee61cc1", "committedDate": "2020-07-16T15:17:23Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\njdk8 fix\nStyle gate\nstylegate"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "55baad590d34cbd969efc1689ca227272ee61cc1", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/55baad590d34cbd969efc1689ca227272ee61cc1", "committedDate": "2020-07-16T15:17:23Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\njdk8 fix\nStyle gate\nstylegate"}, "afterCommit": {"oid": "a064f3f10da5be1a5fd2268400c59362e5efc586", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/a064f3f10da5be1a5fd2268400c59362e5efc586", "committedDate": "2020-07-17T14:15:48Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\njdk8 fix\nStyle gate\nstylegate"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a064f3f10da5be1a5fd2268400c59362e5efc586", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/a064f3f10da5be1a5fd2268400c59362e5efc586", "committedDate": "2020-07-17T14:15:48Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\njdk8 fix\nStyle gate\nstylegate"}, "afterCommit": {"oid": "b17b809b6993b8f28b5bceb06c8c6b70c55f043b", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/b17b809b6993b8f28b5bceb06c8c6b70c55f043b", "committedDate": "2020-07-20T12:55:54Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\njdk8 fix\nStyle gate\nstylegate"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b17b809b6993b8f28b5bceb06c8c6b70c55f043b", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/b17b809b6993b8f28b5bceb06c8c6b70c55f043b", "committedDate": "2020-07-20T12:55:54Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\njdk8 fix\nStyle gate\nstylegate"}, "afterCommit": {"oid": "a97cf1f4ae35dba6e91f75821a3dfe33f9f36034", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/a97cf1f4ae35dba6e91f75821a3dfe33f9f36034", "committedDate": "2020-07-21T10:50:34Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\njdk8 fix\nStyle gate\nstylegate"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyMzY3Mzc2", "url": "https://github.com/oracle/graal/pull/2674#pullrequestreview-452367376", "createdAt": "2020-07-21T11:34:12Z", "commit": {"oid": "a97cf1f4ae35dba6e91f75821a3dfe33f9f36034"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxMTozNDoxMlrOG0z4Iw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxMTozNDoxMlrOG0z4Iw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODAyOTA5MQ==", "bodyText": "can queryCodeDir be null ?\nBetter to use isEmpty()", "url": "https://github.com/oracle/graal/pull/2674#discussion_r458029091", "createdAt": "2020-07-21T11:34:12Z", "author": {"login": "johanvos"}, "path": "substratevm/src/com.oracle.svm.hosted/src/com/oracle/svm/hosted/c/CAnnotationProcessor.java", "diffHunk": "@@ -71,6 +73,12 @@ public CAnnotationProcessor(NativeLibraries nativeLibs, NativeCodeContext codeCt\n         }\n         this.compilerInvoker = ImageSingletons.lookup(CCompilerInvoker.class);\n         this.tempDirectory = compilerInvoker.tempDirectory;\n+        this.queryCodeDirectory = compilerInvoker.tempDirectory;\n+\n+        String queryCodeDir = CAnnotationProcessorCache.Options.CAPQueryCodeDir.getValue();\n+        if (!queryCodeDir.equals(\"\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a97cf1f4ae35dba6e91f75821a3dfe33f9f36034"}, "originalPosition": 23}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a97cf1f4ae35dba6e91f75821a3dfe33f9f36034", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/a97cf1f4ae35dba6e91f75821a3dfe33f9f36034", "committedDate": "2020-07-21T10:50:34Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\njdk8 fix\nStyle gate\nstylegate"}, "afterCommit": {"oid": "9c2ba0c3f890d2171cb4eb03f1d2e5b6bb6c5db9", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/9c2ba0c3f890d2171cb4eb03f1d2e5b6bb6c5db9", "committedDate": "2020-07-21T14:17:31Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\nBetter check for QueryCodeDir parameter"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyNTM4MTA3", "url": "https://github.com/oracle/graal/pull/2674#pullrequestreview-452538107", "createdAt": "2020-07-21T14:50:54Z", "commit": {"oid": "9c2ba0c3f890d2171cb4eb03f1d2e5b6bb6c5db9"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNDo1MDo1NFrOG07xnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxNjozNzoxM1rOG1AeZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODE1ODQ5Mg==", "bodyText": "We could check if it has been set and fail if the user specified a bad path:\nif (CAnnotationProcessorCache.Options.CAPQueryCodeDir.hasBeenSet()) {\n    String queryCodeDir = CAnnotationProcessorCache.Options.CAPQueryCodeDir.getValue();\n    if (!File.exists(queryCodeDir)) {\n        // create the directory\n    } else if (!File.isDirectory(queryCodeDir)) {\n        // we can throw UserError.abort here\n    }\n    this.queryCodeDirectory = queryCodeDir;\n}", "url": "https://github.com/oracle/graal/pull/2674#discussion_r458158492", "createdAt": "2020-07-21T14:50:54Z", "author": {"login": "gradinac"}, "path": "substratevm/src/com.oracle.svm.hosted/src/com/oracle/svm/hosted/c/CAnnotationProcessor.java", "diffHunk": "@@ -71,6 +73,12 @@ public CAnnotationProcessor(NativeLibraries nativeLibs, NativeCodeContext codeCt\n         }\n         this.compilerInvoker = ImageSingletons.lookup(CCompilerInvoker.class);\n         this.tempDirectory = compilerInvoker.tempDirectory;\n+        this.queryCodeDirectory = compilerInvoker.tempDirectory;\n+\n+        String queryCodeDir = CAnnotationProcessorCache.Options.CAPQueryCodeDir.getValue();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c2ba0c3f890d2171cb4eb03f1d2e5b6bb6c5db9"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIzNDM0OQ==", "bodyText": "mx eclipseformat can sometimes bug up :) Put the comment above this line between /* and */ - I think that wouldn't cause it to break into 3 lines", "url": "https://github.com/oracle/graal/pull/2674#discussion_r458234349", "createdAt": "2020-07-21T16:35:22Z", "author": {"login": "gradinac"}, "path": "substratevm/src/com.oracle.svm.hosted/src/com/oracle/svm/hosted/c/CAnnotationProcessor.java", "diffHunk": "@@ -87,13 +95,19 @@ public NativeCodeInfo process(CAnnotationProcessorCache cache) {\n              * Generate C source file (the \"Query\") that will produce the information needed (e.g.,\n              * size of struct/union and offsets to their fields, value of enum/macros etc.).\n              */\n-            writer = new QueryCodeWriter(tempDirectory);\n+            writer = new QueryCodeWriter(queryCodeDirectory);\n             Path queryFile = writer.write(codeInfo);\n             if (nativeLibs.getErrors().size() > 0) {\n                 return codeInfo;\n             }\n             assert Files.exists(queryFile);\n \n+            if (CAnnotationProcessorCache.Options.DontRunCAPQueryCode.getValue()) { // Only output", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c2ba0c3f890d2171cb4eb03f1d2e5b6bb6c5db9"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIzNTEwNA==", "bodyText": "We can also check if CAPQueryCodeDir is set here with Options.CAPQueryCodeDir.hasBeenSet()", "url": "https://github.com/oracle/graal/pull/2674#discussion_r458235104", "createdAt": "2020-07-21T16:36:37Z", "author": {"login": "gradinac"}, "path": "substratevm/src/com.oracle.svm.hosted/src/com/oracle/svm/hosted/c/CAnnotationProcessorCache.java", "diffHunk": "@@ -102,6 +109,20 @@ public CAnnotationProcessorCache() {\n                 clearCache();\n             }\n         }\n+\n+        if (Options.CAPQueryCodeDir.getValue() != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c2ba0c3f890d2171cb4eb03f1d2e5b6bb6c5db9"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODIzNTQ5Mg==", "bodyText": "Neat!", "url": "https://github.com/oracle/graal/pull/2674#discussion_r458235492", "createdAt": "2020-07-21T16:37:13Z", "author": {"login": "gradinac"}, "path": "substratevm/src/com.oracle.svm.hosted/src/com/oracle/svm/hosted/c/codegen/QueryCodeWriter.java", "diffHunk": "@@ -123,13 +123,21 @@ protected void visitNativeCodeInfo(NativeCodeInfo nativeCodeInfo) {\n         writer.appendln(\"#define IS_CONST_UNSIGNED(a) (a>=0 ? 1 : 0)\");\n \n         /* Write the main function with all the outputs for the children. */\n+        String functionName = nativeCodeInfo.getName().replaceAll(\"\\\\W\", \"_\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c2ba0c3f890d2171cb4eb03f1d2e5b6bb6c5db9"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9c2ba0c3f890d2171cb4eb03f1d2e5b6bb6c5db9", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/9c2ba0c3f890d2171cb4eb03f1d2e5b6bb6c5db9", "committedDate": "2020-07-21T14:17:31Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\nBetter check for QueryCodeDir parameter"}, "afterCommit": {"oid": "30dbbd74ae55506cd9d220f1017ffaaafc4b3bc8", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/30dbbd74ae55506cd9d220f1017ffaaafc4b3bc8", "committedDate": "2020-07-21T20:14:33Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\nBetter check for QueryCodeDir parameter\nFixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyODEwNjQ3", "url": "https://github.com/oracle/graal/pull/2674#pullrequestreview-452810647", "createdAt": "2020-07-21T20:38:08Z", "commit": {"oid": "30dbbd74ae55506cd9d220f1017ffaaafc4b3bc8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "30dbbd74ae55506cd9d220f1017ffaaafc4b3bc8", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/30dbbd74ae55506cd9d220f1017ffaaafc4b3bc8", "committedDate": "2020-07-21T20:14:33Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\nBetter check for QueryCodeDir parameter\nFixes"}, "afterCommit": {"oid": "3640040e54f40377d00c4281e191ce009302619a", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/3640040e54f40377d00c4281e191ce009302619a", "committedDate": "2020-07-22T11:30:45Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\nBetter check for QueryCodeDir parameter\nFixes\n\n\n."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3640040e54f40377d00c4281e191ce009302619a", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/3640040e54f40377d00c4281e191ce009302619a", "committedDate": "2020-07-22T11:30:45Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\nBetter check for QueryCodeDir parameter\nFixes\n\n\n."}, "afterCommit": {"oid": "9d91dc9807db38eff0c635e55c4185acb547a104", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/9d91dc9807db38eff0c635e55c4185acb547a104", "committedDate": "2020-07-22T15:43:18Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\nBetter check for QueryCodeDir parameter\nFixes\n\n\n.\n\n\nTrailing tab"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9d91dc9807db38eff0c635e55c4185acb547a104", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/9d91dc9807db38eff0c635e55c4185acb547a104", "committedDate": "2020-07-22T15:43:18Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\nBetter check for QueryCodeDir parameter\nFixes\n\n\n.\n\n\nTrailing tab"}, "afterCommit": {"oid": "18ad364bd3f00d3217ccb33e6e8229118db71016", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/18ad364bd3f00d3217ccb33e6e8229118db71016", "committedDate": "2020-07-22T17:42:43Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\nBetter check for QueryCodeDir parameter\nFixes\n\n\n.\n\n\nTrailing tab"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "18ad364bd3f00d3217ccb33e6e8229118db71016", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/18ad364bd3f00d3217ccb33e6e8229118db71016", "committedDate": "2020-07-22T17:42:43Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\nBetter check for QueryCodeDir parameter\nFixes\n\n\n.\n\n\nTrailing tab"}, "afterCommit": {"oid": "b8c83dfe8a10a2af8d48347c2d2f8b54663aefdf", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/b8c83dfe8a10a2af8d48347c2d2f8b54663aefdf", "committedDate": "2020-07-22T23:33:47Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\nBetter check for QueryCodeDir parameter\nFixes\n\n\n.\n\n\nTrailing tab"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b8c83dfe8a10a2af8d48347c2d2f8b54663aefdf", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/b8c83dfe8a10a2af8d48347c2d2f8b54663aefdf", "committedDate": "2020-07-22T23:33:47Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\nBetter check for QueryCodeDir parameter\nFixes\n\n\n.\n\n\nTrailing tab"}, "afterCommit": {"oid": "b28895abd24825f272a54a79fd0506a5094cc407", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/b28895abd24825f272a54a79fd0506a5094cc407", "committedDate": "2020-07-22T23:59:53Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\nBetter check for QueryCodeDir parameter\nFixes\n\n\n.\n\n\nTrailing tab"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b28895abd24825f272a54a79fd0506a5094cc407", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/b28895abd24825f272a54a79fd0506a5094cc407", "committedDate": "2020-07-22T23:59:53Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\nBetter check for QueryCodeDir parameter\nFixes\n\n\n.\n\n\nTrailing tab"}, "afterCommit": {"oid": "f0877ca2a719fabecad1eca6f4e257716027c3e8", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/f0877ca2a719fabecad1eca6f4e257716027c3e8", "committedDate": "2020-07-25T17:14:42Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\nBetter check for QueryCodeDir parameter\nFixes\n\n\n.\n\n\nTrailing tab"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f0877ca2a719fabecad1eca6f4e257716027c3e8", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/f0877ca2a719fabecad1eca6f4e257716027c3e8", "committedDate": "2020-07-25T17:14:42Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\nBetter check for QueryCodeDir parameter\nFixes\n\n\n.\n\n\nTrailing tab"}, "afterCommit": {"oid": "5e23a8e2134d32328eaa3403b2cd0a0cae804b76", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/5e23a8e2134d32328eaa3403b2cd0a0cae804b76", "committedDate": "2020-07-27T16:39:47Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\nBetter check for QueryCodeDir parameter\nFixes\n\n\n.\n\n\nTrailing tab"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5e23a8e2134d32328eaa3403b2cd0a0cae804b76", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/5e23a8e2134d32328eaa3403b2cd0a0cae804b76", "committedDate": "2020-07-27T16:39:47Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\nBetter check for QueryCodeDir parameter\nFixes\n\n\n.\n\n\nTrailing tab"}, "afterCommit": {"oid": "ff7ef59ec22ff0f7dac7dd424db941f9984a5602", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/ff7ef59ec22ff0f7dac7dd424db941f9984a5602", "committedDate": "2020-07-30T15:53:55Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\nBetter check for QueryCodeDir parameter\nFixes\n\n\n.\n\n\nTrailing tab"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ff7ef59ec22ff0f7dac7dd424db941f9984a5602", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/ff7ef59ec22ff0f7dac7dd424db941f9984a5602", "committedDate": "2020-07-30T15:53:55Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\nBetter check for QueryCodeDir parameter\nFixes\n\n\n.\n\n\nTrailing tab"}, "afterCommit": {"oid": "de6aad79605d3dcdec2fc999aed810a1653a8ffb", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/de6aad79605d3dcdec2fc999aed810a1653a8ffb", "committedDate": "2020-07-31T16:38:44Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\nBetter check for QueryCodeDir parameter\nFixes\n\n\n.\n\n\nTrailing tab"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "de6aad79605d3dcdec2fc999aed810a1653a8ffb", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/de6aad79605d3dcdec2fc999aed810a1653a8ffb", "committedDate": "2020-07-31T16:38:44Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\nBetter check for QueryCodeDir parameter\nFixes\n\n\n.\n\n\nTrailing tab"}, "afterCommit": {"oid": "9478272484f173be8de5b29cc5c73ccc24ac9e3b", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/9478272484f173be8de5b29cc5c73ccc24ac9e3b", "committedDate": "2020-08-03T12:40:40Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\nBetter check for QueryCodeDir parameter\nFixes\n\n\n.\n\n\nTrailing tab"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMTI2NjUz", "url": "https://github.com/oracle/graal/pull/2674#pullrequestreview-460126653", "createdAt": "2020-08-03T15:32:32Z", "commit": {"oid": "9478272484f173be8de5b29cc5c73ccc24ac9e3b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNTozMjozMlrOG6-Rug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNTozMjozMlrOG6-Rug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQ5MDkzOA==", "bodyText": "Please call this option ExitAfterQueryCodeGeneration", "url": "https://github.com/oracle/graal/pull/2674#discussion_r464490938", "createdAt": "2020-08-03T15:32:32Z", "author": {"login": "olpaw"}, "path": "substratevm/src/com.oracle.svm.hosted/src/com/oracle/svm/hosted/c/CAnnotationProcessorCache.java", "diffHunk": "@@ -76,9 +76,16 @@\n \n         @Option(help = \"Exit image generation after C Annotation Processor Cache creation.\")//\n         public static final HostedOptionKey<Boolean> ExitAfterCAPCache = new HostedOptionKey<>(false);\n+\n+        @Option(help = \"Output query code for target platform without executing it\")//\n+        public static final HostedOptionKey<Boolean> DontRunCAPQueryCode = new HostedOptionKey<>(false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9478272484f173be8de5b29cc5c73ccc24ac9e3b"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMTI5MTAz", "url": "https://github.com/oracle/graal/pull/2674#pullrequestreview-460129103", "createdAt": "2020-08-03T15:35:40Z", "commit": {"oid": "9478272484f173be8de5b29cc5c73ccc24ac9e3b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNTozNTo0MFrOG6-Y6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNTozNTo0MFrOG6-Y6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQ5Mjc3OA==", "bodyText": "Please move this above\nif (CAnnotationProcessorCache.Options.ExitAfterCAPCache.getValue()) {", "url": "https://github.com/oracle/graal/pull/2674#discussion_r464492778", "createdAt": "2020-08-03T15:35:40Z", "author": {"login": "olpaw"}, "path": "substratevm/src/com.oracle.svm.hosted/src/com/oracle/svm/hosted/NativeImageGenerator.java", "diffHunk": "@@ -1042,6 +1044,9 @@ private NativeLibraries setupNativeLibraries(String imageName, ConstantReflectio\n             if (CAnnotationProcessorCache.Options.ExitAfterCAPCache.getValue()) {\n                 throw new InterruptImageBuilding(\"Exiting image generation because of \" + SubstrateOptionsParser.commandArgument(CAnnotationProcessorCache.Options.ExitAfterCAPCache, \"+\"));\n             }\n+            if (CAnnotationProcessorCache.Options.DontRunCAPQueryCode.getValue()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9478272484f173be8de5b29cc5c73ccc24ac9e3b"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMTQxODY0", "url": "https://github.com/oracle/graal/pull/2674#pullrequestreview-460141864", "createdAt": "2020-08-03T15:52:07Z", "commit": {"oid": "9478272484f173be8de5b29cc5c73ccc24ac9e3b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNTo1MjowN1rOG6-_sQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNTo1MjowN1rOG6-_sQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDUwMjcwNQ==", "bodyText": "Maybe\nboolean withoutCompilerInvoker = ExitAfterQueryCodeGeneration.getValue() ||\n                                 (UseCAPCache.getValue() && ExitAfterRelocatableImageWrite.getValue());\nif (!withoutCompilerInvoker) {\n    ...\nfor better readability.", "url": "https://github.com/oracle/graal/pull/2674#discussion_r464502705", "createdAt": "2020-08-03T15:52:07Z", "author": {"login": "olpaw"}, "path": "substratevm/src/com.oracle.svm.hosted/src/com/oracle/svm/hosted/NativeImageGenerator.java", "diffHunk": "@@ -861,7 +861,9 @@ private void setupNativeImage(String imageName, OptionValues options, Map<Method\n \n                 if (!(NativeImageOptions.ExitAfterRelocatableImageWrite.getValue() && CAnnotationProcessorCache.Options.UseCAPCache.getValue())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9478272484f173be8de5b29cc5c73ccc24ac9e3b"}, "originalPosition": 2}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMTQzOTk0", "url": "https://github.com/oracle/graal/pull/2674#pullrequestreview-460143994", "createdAt": "2020-08-03T15:54:52Z", "commit": {"oid": "9478272484f173be8de5b29cc5c73ccc24ac9e3b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNTo1NDo1MlrOG6_GRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNTo1NDo1MlrOG6_GRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDUwNDM4OA==", "bodyText": "If you don't run the compiler driver because you exit after right QueryCode generation you should not even need to register the singleton. See https://github.com/oracle/graal/pull/2674/files#r464502705", "url": "https://github.com/oracle/graal/pull/2674#discussion_r464504388", "createdAt": "2020-08-03T15:54:52Z", "author": {"login": "olpaw"}, "path": "substratevm/src/com.oracle.svm.hosted/src/com/oracle/svm/hosted/NativeImageGenerator.java", "diffHunk": "@@ -861,7 +861,9 @@ private void setupNativeImage(String imageName, OptionValues options, Map<Method\n \n                 if (!(NativeImageOptions.ExitAfterRelocatableImageWrite.getValue() && CAnnotationProcessorCache.Options.UseCAPCache.getValue())) {\n                     CCompilerInvoker compilerInvoker = CCompilerInvoker.create(ImageSingletons.lookup(TemporaryBuildDirectoryProvider.class).getTemporaryBuildDirectory());\n-                    compilerInvoker.verifyCompiler();\n+                    if (!CAnnotationProcessorCache.Options.DontRunCAPQueryCode.getValue()) {\n+                        compilerInvoker.verifyCompiler();\n+                    }\n                     ImageSingletons.add(CCompilerInvoker.class, compilerInvoker);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9478272484f173be8de5b29cc5c73ccc24ac9e3b"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMTUwNTgz", "url": "https://github.com/oracle/graal/pull/2674#pullrequestreview-460150583", "createdAt": "2020-08-03T16:03:41Z", "commit": {"oid": "9478272484f173be8de5b29cc5c73ccc24ac9e3b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNjowMzo0MVrOG6_aqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxNjowMzo0MVrOG6_aqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDUwOTYwOQ==", "bodyText": "I'd call this QueryCodeDir to better differentiate it from the regular CAP.... usecases (cached NativeCodeInfo result files).", "url": "https://github.com/oracle/graal/pull/2674#discussion_r464509609", "createdAt": "2020-08-03T16:03:41Z", "author": {"login": "olpaw"}, "path": "substratevm/src/com.oracle.svm.hosted/src/com/oracle/svm/hosted/c/CAnnotationProcessorCache.java", "diffHunk": "@@ -76,9 +76,16 @@\n \n         @Option(help = \"Exit image generation after C Annotation Processor Cache creation.\")//\n         public static final HostedOptionKey<Boolean> ExitAfterCAPCache = new HostedOptionKey<>(false);\n+\n+        @Option(help = \"Output query code for target platform without executing it\")//\n+        public static final HostedOptionKey<Boolean> DontRunCAPQueryCode = new HostedOptionKey<>(false);\n+\n+        @Option(help = \"Directory where query code for target platform should be output\")//\n+        public static final HostedOptionKey<String> CAPQueryCodeDir = new HostedOptionKey<>(\"\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9478272484f173be8de5b29cc5c73ccc24ac9e3b"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMTUxMzQx", "url": "https://github.com/oracle/graal/pull/2674#pullrequestreview-460151341", "createdAt": "2020-08-03T16:04:43Z", "commit": {"oid": "9478272484f173be8de5b29cc5c73ccc24ac9e3b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9478272484f173be8de5b29cc5c73ccc24ac9e3b", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/9478272484f173be8de5b29cc5c73ccc24ac9e3b", "committedDate": "2020-08-03T12:40:40Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\nBetter check for QueryCodeDir parameter\nFixes\n\n\n.\n\n\nTrailing tab"}, "afterCommit": {"oid": "6220969624ae015998d5e49b50a28f727bddcc97", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/6220969624ae015998d5e49b50a28f727bddcc97", "committedDate": "2020-08-04T12:37:06Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\nBetter check for QueryCodeDir parameter\nFixes\n\n\n.\n\n\nTrailing tab"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6220969624ae015998d5e49b50a28f727bddcc97", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/6220969624ae015998d5e49b50a28f727bddcc97", "committedDate": "2020-08-04T12:37:06Z", "message": "CAP cache improvements\n\nAdd `DontRunCAPQueryCode` native-image argument\nAdd `CAPQueryCodeDir` native-image argument\nSplit query code function and main\nBetter check for QueryCodeDir parameter\nFixes\n\n\n.\n\n\nTrailing tab"}, "afterCommit": {"oid": "3a2029b890d8d45371431ab6b1aba4b374b626e6", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/3a2029b890d8d45371431ab6b1aba4b374b626e6", "committedDate": "2020-08-04T15:27:12Z", "message": "CAP cache improvements\n\nAdd `ExitAfterQueryCodeGeneration` native-image argument\nAdd `QueryCodeDir` native-image argument\nSplit query code function and main\n\n\n."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65d838259b5e3d0d4eeee9c71d4ce202f28199ae", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/65d838259b5e3d0d4eeee9c71d4ce202f28199ae", "committedDate": "2020-08-04T19:57:11Z", "message": "CAP cache improvements\n\nAdd `ExitAfterQueryCodeGeneration` native-image argument\nAdd `QueryCodeDir` native-image argument\nSplit query code function and main"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3a2029b890d8d45371431ab6b1aba4b374b626e6", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/3a2029b890d8d45371431ab6b1aba4b374b626e6", "committedDate": "2020-08-04T15:27:12Z", "message": "CAP cache improvements\n\nAdd `ExitAfterQueryCodeGeneration` native-image argument\nAdd `QueryCodeDir` native-image argument\nSplit query code function and main\n\n\n."}, "afterCommit": {"oid": "65d838259b5e3d0d4eeee9c71d4ce202f28199ae", "author": {"user": null}, "url": "https://github.com/oracle/graal/commit/65d838259b5e3d0d4eeee9c71d4ce202f28199ae", "committedDate": "2020-08-04T19:57:11Z", "message": "CAP cache improvements\n\nAdd `ExitAfterQueryCodeGeneration` native-image argument\nAdd `QueryCodeDir` native-image argument\nSplit query code function and main"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxNTk5MjE2", "url": "https://github.com/oracle/graal/pull/2674#pullrequestreview-461599216", "createdAt": "2020-08-05T12:04:47Z", "commit": {"oid": "65d838259b5e3d0d4eeee9c71d4ce202f28199ae"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1056, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}