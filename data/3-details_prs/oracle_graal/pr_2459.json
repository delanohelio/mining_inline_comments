{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4MDQ4OTg4", "number": 2459, "title": "Debug info test", "bodyText": "This PR provides a test of the debuginfo capability on Linux. The patch provides an mx command.\n$ mx debuginfotest\n\nwhich compiles a sample program to a native image and scripts a run of the image under gdb, checking that breaks, backtraces, stepping and line listing work as expected.\nn.b. for the command to work it requires gdb to be in the path.\nThe test succeeds on my Linux x86_64 and AArch64 boxes.\nI have also modified the travis config to run this test automatically on Linux aarch64 and x86_64. I have no idea if that works or not (yet :-)", "createdAt": "2020-05-14T14:51:24Z", "url": "https://github.com/oracle/graal/pull/2459", "merged": true, "mergeCommit": {"oid": "18c2c9bb7b15438245ade811fddf36c6bac23024"}, "closed": true, "closedAt": "2020-05-27T20:57:45Z", "author": {"login": "adinn"}, "timelineItems": {"totalCount": 33, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABciSVZPABqjMzNDQ5NjIzMzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclaSPSAH2gAyNDE4MDQ4OTg4OjUyMTc0YjAwOGE3ZTE1MmQ5ZjMyYzA1MTczNzQwMzZhMDcyOTc2MjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c2924091e93aafdb4da89703b919e96eaef2240c", "author": {"user": {"login": "adinn", "name": "Andrew Dinn"}}, "url": "https://github.com/oracle/graal/commit/c2924091e93aafdb4da89703b919e96eaef2240c", "committedDate": "2020-05-17T21:25:53Z", "message": "script error"}, "afterCommit": {"oid": "30f558658563ffe58df42a92883690a32065142e", "author": {"user": {"login": "adinn", "name": "Andrew Dinn"}}, "url": "https://github.com/oracle/graal/commit/30f558658563ffe58df42a92883690a32065142e", "committedDate": "2020-05-17T21:41:00Z", "message": "script error"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6da9a854bc598cfa92307270fe8506465d0edc08", "author": {"user": {"login": "adinn", "name": "Andrew Dinn"}}, "url": "https://github.com/oracle/graal/commit/6da9a854bc598cfa92307270fe8506465d0edc08", "committedDate": "2020-05-18T07:59:06Z", "message": "use format"}, "afterCommit": {"oid": "df530554538a5cd0db8ebc2aab4c0514f027c027", "author": {"user": {"login": "adinn", "name": "Andrew Dinn"}}, "url": "https://github.com/oracle/graal/commit/df530554538a5cd0db8ebc2aab4c0514f027c027", "committedDate": "2020-05-18T08:02:46Z", "message": "use format"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5e4976cfae13bc0699b5073c5ef04f9a729e6a51", "author": {"user": {"login": "adinn", "name": "Andrew Dinn"}}, "url": "https://github.com/oracle/graal/commit/5e4976cfae13bc0699b5073c5ef04f9a729e6a51", "committedDate": "2020-05-19T17:25:54Z", "message": "correct info rexp to cater for variant output"}, "afterCommit": {"oid": "04e247c940c0552bf4739d1cd049d55679021371", "author": {"user": {"login": "adinn", "name": "Andrew Dinn"}}, "url": "https://github.com/oracle/graal/commit/04e247c940c0552bf4739d1cd049d55679021371", "committedDate": "2020-05-19T20:30:26Z", "message": "correct info rexp to cater for variant output"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4152d5cc64a1e2718f2e074d6953a40077882f95", "author": {"user": {"login": "adinn", "name": "Andrew Dinn"}}, "url": "https://github.com/oracle/graal/commit/4152d5cc64a1e2718f2e074d6953a40077882f95", "committedDate": "2020-05-20T09:00:18Z", "message": "locate jdk src.zip correctly on 1.8"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c599e19d72cd9abaf246d4dbcb9337af30ed7935", "author": {"user": {"login": "adinn", "name": "Andrew Dinn"}}, "url": "https://github.com/oracle/graal/commit/c599e19d72cd9abaf246d4dbcb9337af30ed7935", "committedDate": "2020-05-20T09:01:21Z", "message": "add DebugInfoSourceCacheRoot option to allow debug sources cache location to be specified"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dbc5cfaab603ac0fa56ecb86c52948312c2d688a", "author": {"user": {"login": "adinn", "name": "Andrew Dinn"}}, "url": "https://github.com/oracle/graal/commit/dbc5cfaab603ac0fa56ecb86c52948312c2d688a", "committedDate": "2020-05-20T08:54:00Z", "message": "check println break is in correct method"}, "afterCommit": {"oid": "a21f51aef1705ea06ec50aeb126f67851abafe06", "author": {"user": {"login": "adinn", "name": "Andrew Dinn"}}, "url": "https://github.com/oracle/graal/commit/a21f51aef1705ea06ec50aeb126f67851abafe06", "committedDate": "2020-05-20T09:05:49Z", "message": "hook debuginfotest into gate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6dac22ef5a20ae211708c07804236ebc80c9a48", "author": {"user": {"login": "adinn", "name": "Andrew Dinn"}}, "url": "https://github.com/oracle/graal/commit/e6dac22ef5a20ae211708c07804236ebc80c9a48", "committedDate": "2020-05-20T10:24:40Z", "message": "add mx debuginfotest command and link into _run_gate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc3cb87f363410e674f12280a0ea59ddf0d1b2bc", "author": {"user": {"login": "adinn", "name": "Andrew Dinn"}}, "url": "https://github.com/oracle/graal/commit/bc3cb87f363410e674f12280a0ea59ddf0d1b2bc", "committedDate": "2020-05-20T10:25:11Z", "message": "hook debuginfotest into gate"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a21f51aef1705ea06ec50aeb126f67851abafe06", "author": {"user": {"login": "adinn", "name": "Andrew Dinn"}}, "url": "https://github.com/oracle/graal/commit/a21f51aef1705ea06ec50aeb126f67851abafe06", "committedDate": "2020-05-20T09:05:49Z", "message": "hook debuginfotest into gate"}, "afterCommit": {"oid": "bc3cb87f363410e674f12280a0ea59ddf0d1b2bc", "author": {"user": {"login": "adinn", "name": "Andrew Dinn"}}, "url": "https://github.com/oracle/graal/commit/bc3cb87f363410e674f12280a0ea59ddf0d1b2bc", "committedDate": "2020-05-20T10:25:11Z", "message": "hook debuginfotest into gate"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MDIyNjkw", "url": "https://github.com/oracle/graal/pull/2459#pullrequestreview-418022690", "createdAt": "2020-05-26T07:07:21Z", "commit": {"oid": "bc3cb87f363410e674f12280a0ea59ddf0d1b2bc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNzowNzoyMVrOGaROcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNzowNzoyMVrOGaROcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE5ODM4NQ==", "bodyText": "s/use dot/used to", "url": "https://github.com/oracle/graal/pull/2459#discussion_r430198385", "createdAt": "2020-05-26T07:07:21Z", "author": {"login": "olpaw"}, "path": "substratevm/DEBUGINFO.md", "diffHunk": "@@ -16,14 +16,16 @@ argument to the GenerateDebugInfo option.\n \n The GenerateDebugInfo option also enables caching of sources for any\n JDK runtime classes, GraalVM classes and application classes which can\n-be located during native image generation. The cache is created under\n-local subdirectory sources. It is used to configure source file search\n-path roots for the debugger. Files in the cache are located in a\n-directory hierarchy that matches the file path information included in\n-the native image debug records. The source cache should contain all\n-the files needed to debug the generated image and nothing more. This\n-local cache provides a convenient way of making just the necessary\n-sources available to the debugger/IDE when debugging a native image.\n+be located during native image generation. By default the cache is\n+created under local subdirectory sources (a command line option can be\n+use dot specifiy an alternative location). It is used to configure", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc3cb87f363410e674f12280a0ea59ddf0d1b2bc"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MDI3MDcx", "url": "https://github.com/oracle/graal/pull/2459#pullrequestreview-418027071", "createdAt": "2020-05-26T07:14:40Z", "commit": {"oid": "bc3cb87f363410e674f12280a0ea59ddf0d1b2bc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNzoxNDo0MVrOGaRcHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNzoxNDo0MVrOGaRcHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDIwMTg4NQ==", "bodyText": "replace all print with mx.log", "url": "https://github.com/oracle/graal/pull/2459#discussion_r430201885", "createdAt": "2020-05-26T07:14:41Z", "author": {"login": "olpaw"}, "path": "substratevm/mx.substratevm/mx_substratevm.py", "diffHunk": "@@ -700,6 +711,36 @@ def _collector(x):\n         if actual_output != expected_output:\n             raise Exception('Unexpected output: ' + str(actual_output) + \"  !=  \" + str(expected_output))\n \n+def _debuginfotest(native_image, javac_command, path, build_only, args):\n+    mkpath(path)\n+    parent = os.path.dirname(path)\n+    print(\"parent=%s\"%parent)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc3cb87f363410e674f12280a0ea59ddf0d1b2bc"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MDMxNzY0", "url": "https://github.com/oracle/graal/pull/2459#pullrequestreview-418031764", "createdAt": "2020-05-26T07:22:14Z", "commit": {"oid": "bc3cb87f363410e674f12280a0ea59ddf0d1b2bc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNzoyMjoxNFrOGaRqRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNzoyMjoxNFrOGaRqRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDIwNTUxMA==", "bodyText": "It's better to issue an error message here instead of silently fixing a users bad option argument. Otherwise we are breeding such command line invocations.", "url": "https://github.com/oracle/graal/pull/2459#discussion_r430205510", "createdAt": "2020-05-26T07:22:14Z", "author": {"login": "olpaw"}, "path": "substratevm/src/com.oracle.svm.core/src/com/oracle/svm/core/SubstrateOptions.java", "diffHunk": "@@ -469,4 +469,14 @@ protected void onValueUpdate(EconomicMap<OptionKey<?>, Object> values, Integer o\n     @Option(help = \"Search path for source files for Application or GraalVM classes (list of comma-separated directories or jar files)\")//\n     public static final HostedOptionKey<String[]> DebugInfoSourceSearchPath = new HostedOptionKey<String[]>(null) {\n     };\n+    @Option(help = \"Directory under which to create source file cache for Application or GraalVM classes\")//\n+    public static final HostedOptionKey<String> DebugInfoSourceCacheRoot = new HostedOptionKey<String>(\"sources\") {\n+        @Override\n+        protected void onValueUpdate(EconomicMap<OptionKey<?>, Object> values, String oldValue, String newValue) {\n+            // disallow null or empty string\n+            if (newValue == null || newValue.length() == 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc3cb87f363410e674f12280a0ea59ddf0d1b2bc"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MDQ3Mjc2", "url": "https://github.com/oracle/graal/pull/2459#pullrequestreview-418047276", "createdAt": "2020-05-26T07:45:32Z", "commit": {"oid": "bc3cb87f363410e674f12280a0ea59ddf0d1b2bc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNzo0NTozMlrOGaSZQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNzo0NTozMlrOGaSZQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDIxNzUzOQ==", "bodyText": "Providing a custom javac-command does not make much sense. Since your test is in the com.oracle.svm.test project it will be built automatically as part of running mx build anyway (building it again is redundant). You can use classpath('com.oracle.svm.test') to get the classpath argument you need to pass to native-image when you want to build Hello.", "url": "https://github.com/oracle/graal/pull/2459#discussion_r430217539", "createdAt": "2020-05-26T07:45:32Z", "author": {"login": "olpaw"}, "path": "substratevm/mx.substratevm/mx_substratevm.py", "diffHunk": "@@ -1008,6 +1049,29 @@ def helloworld(args, config=None):\n     )\n \n \n+@mx.command(suite_name=suite.name, command_name='debuginfotest', usage_msg='[options]')\n+def debuginfotest(args, config=None):\n+    \"\"\"\n+    builds a debuginfo Hello native image and tests it with gdb.\n+    \"\"\"\n+    parser = ArgumentParser(prog='mx debuginfotest')\n+    all_args = ['--output-path', '--javac-command', '--build-only']\n+    masked_args = [_mask(arg, all_args) for arg in args]\n+    parser.add_argument(all_args[0], metavar='<output-path>', nargs=1, help='Path of the generated image', default=[svmbuild_dir(suite)])\n+    parser.add_argument(all_args[1], metavar='<javac-command>', help='A javac command to be used', default=mx.get_jdk().javac)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc3cb87f363410e674f12280a0ea59ddf0d1b2bc"}, "originalPosition": 75}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MDQ4MDAz", "url": "https://github.com/oracle/graal/pull/2459#pullrequestreview-418048003", "createdAt": "2020-05-26T07:46:35Z", "commit": {"oid": "bc3cb87f363410e674f12280a0ea59ddf0d1b2bc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNzo0NjozNVrOGaSbzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNzo0NjozNVrOGaSbzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDIxODE5MQ==", "bodyText": "See https://github.com/oracle/graal/pull/2459/files#r430217539", "url": "https://github.com/oracle/graal/pull/2459#discussion_r430218191", "createdAt": "2020-05-26T07:46:35Z", "author": {"login": "olpaw"}, "path": "substratevm/mx.substratevm/mx_substratevm.py", "diffHunk": "@@ -700,6 +711,36 @@ def _collector(x):\n         if actual_output != expected_output:\n             raise Exception('Unexpected output: ' + str(actual_output) + \"  !=  \" + str(expected_output))\n \n+def _debuginfotest(native_image, javac_command, path, build_only, args):\n+    mkpath(path)\n+    parent = os.path.dirname(path)\n+    print(\"parent=%s\"%parent)\n+    sourcepath = join(parent, 'src/com.oracle.svm.test/src/')\n+    print(\"sourcepath=%s\"%sourcepath)\n+    sourcecache = join(path, 'sources')\n+    print(\"sourcecache=%s\"%sourcecache)\n+    hello_source = join(sourcepath, 'hello/Hello.java')\n+    print('javac %s'%(['-sourcepath', sourcepath, '-d', path, hello_source]))\n+    mx.run(javac_command + ['-sourcepath', sourcepath, '-d', path, hello_source])", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc3cb87f363410e674f12280a0ea59ddf0d1b2bc"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MDgwOTIx", "url": "https://github.com/oracle/graal/pull/2459#pullrequestreview-418080921", "createdAt": "2020-05-26T08:31:53Z", "commit": {"oid": "bc3cb87f363410e674f12280a0ea59ddf0d1b2bc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwODozMTo1M1rOGaUBZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwODozMTo1M1rOGaUBZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDI0NDE5Nw==", "bodyText": "No need to hardcode src/com.oracle.svm.test/src/. You can use mx.project('com.oracle.svm.test').source_dirs()", "url": "https://github.com/oracle/graal/pull/2459#discussion_r430244197", "createdAt": "2020-05-26T08:31:53Z", "author": {"login": "olpaw"}, "path": "substratevm/mx.substratevm/mx_substratevm.py", "diffHunk": "@@ -700,6 +711,36 @@ def _collector(x):\n         if actual_output != expected_output:\n             raise Exception('Unexpected output: ' + str(actual_output) + \"  !=  \" + str(expected_output))\n \n+def _debuginfotest(native_image, javac_command, path, build_only, args):\n+    mkpath(path)\n+    parent = os.path.dirname(path)\n+    print(\"parent=%s\"%parent)\n+    sourcepath = join(parent, 'src/com.oracle.svm.test/src/')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc3cb87f363410e674f12280a0ea59ddf0d1b2bc"}, "originalPosition": 33}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MDg2NzM0", "url": "https://github.com/oracle/graal/pull/2459#pullrequestreview-418086734", "createdAt": "2020-05-26T08:39:36Z", "commit": {"oid": "bc3cb87f363410e674f12280a0ea59ddf0d1b2bc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwODozOTozNlrOGaUTfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwODozOTozNlrOGaUTfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDI0ODgyOQ==", "bodyText": "s/sued/used", "url": "https://github.com/oracle/graal/pull/2459#discussion_r430248829", "createdAt": "2020-05-26T08:39:36Z", "author": {"login": "olpaw"}, "path": "substratevm/mx.substratevm/testhello.py", "diffHunk": "@@ -0,0 +1,227 @@\n+# pylint: skip-file\n+#\n+# A test script for use from gdb. It can be sued to drive execution of", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc3cb87f363410e674f12280a0ea59ddf0d1b2bc"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MDkwOTg2", "url": "https://github.com/oracle/graal/pull/2459#pullrequestreview-418090986", "createdAt": "2020-05-26T08:44:58Z", "commit": {"oid": "bc3cb87f363410e674f12280a0ea59ddf0d1b2bc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwODo0NDo1OFrOGaUgMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwODo0NDo1OFrOGaUgMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDI1MjA4Mw==", "bodyText": "you could use\nself.rexps = [re.compile(regexp) for regexp in regexps]", "url": "https://github.com/oracle/graal/pull/2459#discussion_r430252083", "createdAt": "2020-05-26T08:44:58Z", "author": {"login": "olpaw"}, "path": "substratevm/mx.substratevm/testhello.py", "diffHunk": "@@ -0,0 +1,227 @@\n+# pylint: skip-file\n+#\n+# A test script for use from gdb. It can be sued to drive execution of\n+# a native image version of test app Hello and check that the debug\n+# info is valid.\n+#\n+# Assumes you have already executed\n+#\n+# $ javac hello/Hello.java\n+# $ mx native-image -H:GenerateDebugInfo=1 hello.hello\n+#\n+# Run test\n+#\n+# gdb -d /path/to/sources/src -d /path/to/sources/graal -d /path/to/sources/jdk -x testhello.py /path/to/hello\n+#\n+# exit status 0 means all is well 1 means test failed\n+#\n+# n.b. assumes the sourcefile cache is in local dir sources\n+\n+import re\n+import sys\n+\n+# A helper class which checks that a sequence of lines of output\n+# from a gdb command matches a sequence of per-line regular\n+# expressions\n+\n+class Checker:\n+    # Create a checker to check gdb command output text.\n+    # name - string to help identify the check if we have a failure.\n+    # regexps - a list of regular expressions which must match.\n+    # successive lines of checked\n+    def __init__(self, name, regexps):\n+        self.name = name\n+        compiled = []\n+        if not isinstance(regexps, list):\n+            regexps = [regexps]\n+        for regexp in regexps:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc3cb87f363410e674f12280a0ea59ddf0d1b2bc"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MDkyODQz", "url": "https://github.com/oracle/graal/pull/2459#pullrequestreview-418092843", "createdAt": "2020-05-26T08:47:18Z", "commit": {"oid": "bc3cb87f363410e674f12280a0ea59ddf0d1b2bc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwODo0NzoxOVrOGaUl0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwODo0NzoxOVrOGaUl0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDI1MzUyMA==", "bodyText": "s/split('\\n')/splitlines()", "url": "https://github.com/oracle/graal/pull/2459#discussion_r430253520", "createdAt": "2020-05-26T08:47:19Z", "author": {"login": "olpaw"}, "path": "substratevm/mx.substratevm/testhello.py", "diffHunk": "@@ -0,0 +1,227 @@\n+# pylint: skip-file\n+#\n+# A test script for use from gdb. It can be sued to drive execution of\n+# a native image version of test app Hello and check that the debug\n+# info is valid.\n+#\n+# Assumes you have already executed\n+#\n+# $ javac hello/Hello.java\n+# $ mx native-image -H:GenerateDebugInfo=1 hello.hello\n+#\n+# Run test\n+#\n+# gdb -d /path/to/sources/src -d /path/to/sources/graal -d /path/to/sources/jdk -x testhello.py /path/to/hello\n+#\n+# exit status 0 means all is well 1 means test failed\n+#\n+# n.b. assumes the sourcefile cache is in local dir sources\n+\n+import re\n+import sys\n+\n+# A helper class which checks that a sequence of lines of output\n+# from a gdb command matches a sequence of per-line regular\n+# expressions\n+\n+class Checker:\n+    # Create a checker to check gdb command output text.\n+    # name - string to help identify the check if we have a failure.\n+    # regexps - a list of regular expressions which must match.\n+    # successive lines of checked\n+    def __init__(self, name, regexps):\n+        self.name = name\n+        compiled = []\n+        if not isinstance(regexps, list):\n+            regexps = [regexps]\n+        for regexp in regexps:\n+            compiled.append(re.compile(regexp))\n+        self.rexps = compiled\n+\n+    # Check that successive lines of a gdb command's output text\n+    # match the corresponding regexp patterns provided when this\n+    # Checker was created.\n+    # text - the full output of a gdb comand run by calling\n+    # gdb.execute and passing to_string = True.\n+    # Exits with status 1 if there are less lines in the text\n+    # than regexp patterns or if any line fails to match the\n+    # corresponding pattern otherwise prints the text and returns\n+    # the set of matches.\n+    def check(self, text, skip_fails=True):\n+        lines = text.split('\\n')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc3cb87f363410e674f12280a0ea59ddf0d1b2bc"}, "originalPosition": 51}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MTY5MTI2", "url": "https://github.com/oracle/graal/pull/2459#pullrequestreview-418169126", "createdAt": "2020-05-26T10:30:05Z", "commit": {"oid": "bc3cb87f363410e674f12280a0ea59ddf0d1b2bc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMDozMDowNVrOGaYPRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMDozMDowNVrOGaYPRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDMxMzI4Nw==", "bodyText": "0x([0-9a-f]+ is a common substring that might be worth reusing .i.e use\naddress_pattern_str = '0x([0-9a-f]+'", "url": "https://github.com/oracle/graal/pull/2459#discussion_r430313287", "createdAt": "2020-05-26T10:30:05Z", "author": {"login": "olpaw"}, "path": "substratevm/mx.substratevm/testhello.py", "diffHunk": "@@ -0,0 +1,227 @@\n+# pylint: skip-file\n+#\n+# A test script for use from gdb. It can be sued to drive execution of\n+# a native image version of test app Hello and check that the debug\n+# info is valid.\n+#\n+# Assumes you have already executed\n+#\n+# $ javac hello/Hello.java\n+# $ mx native-image -H:GenerateDebugInfo=1 hello.hello\n+#\n+# Run test\n+#\n+# gdb -d /path/to/sources/src -d /path/to/sources/graal -d /path/to/sources/jdk -x testhello.py /path/to/hello\n+#\n+# exit status 0 means all is well 1 means test failed\n+#\n+# n.b. assumes the sourcefile cache is in local dir sources\n+\n+import re\n+import sys\n+\n+# A helper class which checks that a sequence of lines of output\n+# from a gdb command matches a sequence of per-line regular\n+# expressions\n+\n+class Checker:\n+    # Create a checker to check gdb command output text.\n+    # name - string to help identify the check if we have a failure.\n+    # regexps - a list of regular expressions which must match.\n+    # successive lines of checked\n+    def __init__(self, name, regexps):\n+        self.name = name\n+        compiled = []\n+        if not isinstance(regexps, list):\n+            regexps = [regexps]\n+        for regexp in regexps:\n+            compiled.append(re.compile(regexp))\n+        self.rexps = compiled\n+\n+    # Check that successive lines of a gdb command's output text\n+    # match the corresponding regexp patterns provided when this\n+    # Checker was created.\n+    # text - the full output of a gdb comand run by calling\n+    # gdb.execute and passing to_string = True.\n+    # Exits with status 1 if there are less lines in the text\n+    # than regexp patterns or if any line fails to match the\n+    # corresponding pattern otherwise prints the text and returns\n+    # the set of matches.\n+    def check(self, text, skip_fails=True):\n+        lines = text.split('\\n')\n+        rexps = self.rexps\n+        num_lines = len(lines)\n+        num_rexps = len(rexps)\n+        line_idx = 0\n+        matches = []\n+        for i in range(0, (num_rexps)):\n+            rexp = rexps[i]\n+            match = None\n+            while line_idx < num_lines and match is None:\n+                line = lines[line_idx]\n+                match = rexp.match(line)\n+                if  match is None:\n+                    if not skip_fails:\n+                        print('Checker %s: match %d failed at line %d %s\\n'%(self.name, i, line_idx, line))\n+                        print(self)\n+                        print(text)\n+                        sys.exit(1)\n+                else:\n+                    matches.append(match)\n+                line_idx += 1\n+        if len(matches) < num_rexps:\n+            print('Checker %s: insufficient matching lines %d for regular expressions %d'%(self.name, len(matches), num_rexps))\n+            print(self)\n+            print(text)\n+            sys.exit(1)\n+        print(text)\n+        return matches\n+\n+    # Format a Checker as a string\n+    def __str__(self):\n+        rexps = self.rexps\n+        result = 'Checker %s '%(self.name)\n+        result += '{\\n'\n+        for rexp in rexps:\n+            result += '  %s\\n'%(rexp)\n+        result += '}\\n'\n+        return result\n+\n+def execute(command):\n+    print('(gdb) %s'%(command))\n+    return gdb.execute(command, to_string=True)\n+\n+# Configure this gdb session\n+\n+# ensure file listings show only the current line\n+execute(\"set listsize 1\")\n+\n+# Start of actual test code\n+#\n+\n+def test():\n+\n+    # disable prompting to continue output\n+    execute(\"set pagination off\")\n+    # set a break point at hello.Hello::main\n+    # expect \"Breakpoint 1 at 0x[0-9a-f]+: file hello.Hello.java, line 64.\"\n+    exec_string = execute(\"break hello.Hello::main\")\n+    rexp = \"Breakpoint 1 at 0x([0-9a-f]+): file hello/Hello\\\\.java, line 64\\\\.\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc3cb87f363410e674f12280a0ea59ddf0d1b2bc"}, "originalPosition": 109}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MTc0MzM4", "url": "https://github.com/oracle/graal/pull/2459#pullrequestreview-418174338", "createdAt": "2020-05-26T10:38:06Z", "commit": {"oid": "bc3cb87f363410e674f12280a0ea59ddf0d1b2bc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMDozODowNlrOGaYfTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMDozODowNlrOGaYfTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDMxNzM4OQ==", "bodyText": "Using raw strings will make your patterns much more readable.\nhttps://docs.python.org/3/library/re.html?highlight=raw%20string%20notation", "url": "https://github.com/oracle/graal/pull/2459#discussion_r430317389", "createdAt": "2020-05-26T10:38:06Z", "author": {"login": "olpaw"}, "path": "substratevm/mx.substratevm/testhello.py", "diffHunk": "@@ -0,0 +1,227 @@\n+# pylint: skip-file\n+#\n+# A test script for use from gdb. It can be sued to drive execution of\n+# a native image version of test app Hello and check that the debug\n+# info is valid.\n+#\n+# Assumes you have already executed\n+#\n+# $ javac hello/Hello.java\n+# $ mx native-image -H:GenerateDebugInfo=1 hello.hello\n+#\n+# Run test\n+#\n+# gdb -d /path/to/sources/src -d /path/to/sources/graal -d /path/to/sources/jdk -x testhello.py /path/to/hello\n+#\n+# exit status 0 means all is well 1 means test failed\n+#\n+# n.b. assumes the sourcefile cache is in local dir sources\n+\n+import re\n+import sys\n+\n+# A helper class which checks that a sequence of lines of output\n+# from a gdb command matches a sequence of per-line regular\n+# expressions\n+\n+class Checker:\n+    # Create a checker to check gdb command output text.\n+    # name - string to help identify the check if we have a failure.\n+    # regexps - a list of regular expressions which must match.\n+    # successive lines of checked\n+    def __init__(self, name, regexps):\n+        self.name = name\n+        compiled = []\n+        if not isinstance(regexps, list):\n+            regexps = [regexps]\n+        for regexp in regexps:\n+            compiled.append(re.compile(regexp))\n+        self.rexps = compiled\n+\n+    # Check that successive lines of a gdb command's output text\n+    # match the corresponding regexp patterns provided when this\n+    # Checker was created.\n+    # text - the full output of a gdb comand run by calling\n+    # gdb.execute and passing to_string = True.\n+    # Exits with status 1 if there are less lines in the text\n+    # than regexp patterns or if any line fails to match the\n+    # corresponding pattern otherwise prints the text and returns\n+    # the set of matches.\n+    def check(self, text, skip_fails=True):\n+        lines = text.split('\\n')\n+        rexps = self.rexps\n+        num_lines = len(lines)\n+        num_rexps = len(rexps)\n+        line_idx = 0\n+        matches = []\n+        for i in range(0, (num_rexps)):\n+            rexp = rexps[i]\n+            match = None\n+            while line_idx < num_lines and match is None:\n+                line = lines[line_idx]\n+                match = rexp.match(line)\n+                if  match is None:\n+                    if not skip_fails:\n+                        print('Checker %s: match %d failed at line %d %s\\n'%(self.name, i, line_idx, line))\n+                        print(self)\n+                        print(text)\n+                        sys.exit(1)\n+                else:\n+                    matches.append(match)\n+                line_idx += 1\n+        if len(matches) < num_rexps:\n+            print('Checker %s: insufficient matching lines %d for regular expressions %d'%(self.name, len(matches), num_rexps))\n+            print(self)\n+            print(text)\n+            sys.exit(1)\n+        print(text)\n+        return matches\n+\n+    # Format a Checker as a string\n+    def __str__(self):\n+        rexps = self.rexps\n+        result = 'Checker %s '%(self.name)\n+        result += '{\\n'\n+        for rexp in rexps:\n+            result += '  %s\\n'%(rexp)\n+        result += '}\\n'\n+        return result\n+\n+def execute(command):\n+    print('(gdb) %s'%(command))\n+    return gdb.execute(command, to_string=True)\n+\n+# Configure this gdb session\n+\n+# ensure file listings show only the current line\n+execute(\"set listsize 1\")\n+\n+# Start of actual test code\n+#\n+\n+def test():\n+\n+    # disable prompting to continue output\n+    execute(\"set pagination off\")\n+    # set a break point at hello.Hello::main\n+    # expect \"Breakpoint 1 at 0x[0-9a-f]+: file hello.Hello.java, line 64.\"\n+    exec_string = execute(\"break hello.Hello::main\")\n+    rexp = \"Breakpoint 1 at 0x([0-9a-f]+): file hello/Hello\\\\.java, line 64\\\\.\"\n+    checker = Checker('break main', rexp)\n+    checker.check(exec_string)\n+\n+    # run the program\n+    execute(\"run\")\n+\n+    # list the line at the breakpoint\n+    # expect \"64\t        Greeter greeter = Greeter.greeter(args);\"\n+    exec_string = execute(\"list\")\n+    checker = Checker(\"list bp 1\", \"64[ \\t]+Greeter greeter = Greeter\\\\.greeter\\\\(args\\\\);\")\n+    checker.check(exec_string, skip_fails=False)\n+\n+    # run a backtrace\n+    # expect \"#0  hello.Hello::main(java.lang.String[]).* at hello.Hello.java:64\"\n+    # expect \"#1  0x[0-9a-f]+ in com.oracle.svm.core.code.IsolateEnterStub::JavaMainWrapper_run_.* at [a-z/]+/JavaMainWrapper.java:[0-9]+\"\n+    exec_string = execute(\"backtrace\")\n+    checker = Checker(\"backtrace hello.Hello::main\",\n+                      [\"#0[ \\t]+hello\\\\.Hello::main\\\\(java\\\\.lang\\\\.String\\\\[\\\\]\\\\).* at hello/Hello\\\\.java:64\",\n+                       \"#1[ \\t]+0x[0-9a-f]+ in com\\\\.oracle\\\\.svm\\\\.core\\\\.code\\\\.IsolateEnterStub::JavaMainWrapper_run_.* at [a-z/]+/JavaMainWrapper\\\\.java:[0-9]+\"\n+                      ])\n+    checker.check(exec_string, skip_fails=False)\n+\n+    # look up PrintStream::println methods\n+    # expect \"All functions matching regular expression \"java.io.PrintStream::println\":\"\n+    # expect \"\"\n+    # expect \"File java.base/java/io/PrintStream.java:\"\n+    # expect \"      void java.io.PrintStream::println(java.lang.Object)(void);\"\n+    # expect \"      void java.io.PrintStream::println(java.lang.String)(void);\"\n+    exec_string = execute(\"info func java.io.PrintStream::println\")\n+#    checker = Checker(\"info func java.io.PrintStream::println\",\n+#                      [\"All functions matching regular expression \\\"java\\\\.io\\\\.PrintStream::println\\\":\",\n+#                       \"\",\n+#                       \"File .*java/io/PrintStream.java:\",\n+#                       \"[ \\t]*void java.io.PrintStream::println\\\\(java\\\\.lang\\\\.Object\\\\)\\\\(void\\\\);\",\n+#                       \"[ \\t]*void java.io.PrintStream::println\\\\(java\\\\.lang\\\\.String\\\\)\\\\(void\\\\);\",\n+#                      ])\n+    checker = Checker(\"info func java.io.PrintStream::println\",\n+                      \"[ \\t]*void java.io.PrintStream::println\\\\(java\\\\.lang\\\\.String\\\\)\")\n+    checker.check(exec_string)\n+\n+    # set a break point at PrintStream::println(String)\n+    # expect \"Breakpoint 2 at 0x[0-9a-f]+: java.base/java/io/PrintStream.java, line [0-9]+.\"\n+    exec_string = execute(\"break java.io.PrintStream::println(java.lang.String)\")\n+    rexp = \"Breakpoint 2 at 0x([0-9a-f]+): file .*java/io/PrintStream\\\\.java, line [0-9]+\\\\.\"\n+    checker = Checker('break println', rexp)\n+    checker.check(exec_string, skip_fails=False)\n+\n+    # step into method call\n+    execute(\"step\")\n+\n+    # list current line\n+    # expect \"31\t            if (args.length == 0) {\"\n+    exec_string = execute(\"list\")\n+    rexp = \"31[ \\t]+if \\\\(args\\\\.length == 0\\\\) {\"\n+    checker = Checker('list hello.Hello.Greeter::greeter', rexp)\n+    checker.check(exec_string, skip_fails=False)\n+\n+    # run a backtrace\n+    # expect \"#0  hello.Hello.greeter::greeter(java.lang.String[]).* at hello.Hello.java:31\"\n+    # expect \"#1  0x[0-9a-f]+ in hello.Hello::main(java.lang.String[]).* at hello.Hello.java:64\"\n+    # expect \"#2  0x[0-9a-f]+ in com.oracle.svm.core.code.IsolateEnterStub::JavaMainWrapper_run_.* at [a-z/]+/JavaMainWrapper.java:[0-9]+\"\n+    exec_string = execute(\"backtrace\")\n+    checker = Checker(\"backtrace hello.Hello.Greeter::greeter\",\n+                      [\"#0[ \\t]+hello\\\\.Hello\\\\.Greeter::greeter\\\\(java\\\\.lang\\\\.String\\\\[\\\\]\\\\).* at hello/Hello\\\\.java:31\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc3cb87f363410e674f12280a0ea59ddf0d1b2bc"}, "originalPosition": 173}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MTc2NDE3", "url": "https://github.com/oracle/graal/pull/2459#pullrequestreview-418176417", "createdAt": "2020-05-26T10:41:15Z", "commit": {"oid": "bc3cb87f363410e674f12280a0ea59ddf0d1b2bc"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4OTExOTE1", "url": "https://github.com/oracle/graal/pull/2459#pullrequestreview-418911915", "createdAt": "2020-05-27T07:09:10Z", "commit": {"oid": "006f2a8e822e29611cd6b054d4a1cb5fe0059f5e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNzowOToxMFrOGa8H2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNzowOToxMFrOGa8H2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDkwMTIwOA==", "bodyText": "Very nice! \ud83d\udc4d", "url": "https://github.com/oracle/graal/pull/2459#discussion_r430901208", "createdAt": "2020-05-27T07:09:10Z", "author": {"login": "olpaw"}, "path": "substratevm/mx.substratevm/testhello.py", "diffHunk": "@@ -101,12 +101,20 @@ def execute(command):\n \n def test():\n \n+    # define some useful patterns\n+    address_pattern = '0x[0-9a-f]+'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "006f2a8e822e29611cd6b054d4a1cb5fe0059f5e"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4OTE1NDIw", "url": "https://github.com/oracle/graal/pull/2459#pullrequestreview-418915420", "createdAt": "2020-05-27T07:14:41Z", "commit": {"oid": "006f2a8e822e29611cd6b054d4a1cb5fe0059f5e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNzoxNDo0MVrOGa8SPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwNzoxNDo0MVrOGa8SPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDkwMzg3MQ==", "bodyText": "Now that you have that abstraction in-between you could take the checking one level further by returning a Path here and react on InvalidPathException during construction (Paths.get) with a sensible UserError.abort message.", "url": "https://github.com/oracle/graal/pull/2459#discussion_r430903871", "createdAt": "2020-05-27T07:14:41Z", "author": {"login": "olpaw"}, "path": "substratevm/src/com.oracle.svm.core/src/com/oracle/svm/core/SubstrateOptions.java", "diffHunk": "@@ -470,13 +472,13 @@ protected void onValueUpdate(EconomicMap<OptionKey<?>, Object> values, Integer o\n     public static final HostedOptionKey<String[]> DebugInfoSourceSearchPath = new HostedOptionKey<String[]>(null) {\n     };\n     @Option(help = \"Directory under which to create source file cache for Application or GraalVM classes\")//\n-    public static final HostedOptionKey<String> DebugInfoSourceCacheRoot = new HostedOptionKey<String>(\"sources\") {\n-        @Override\n-        protected void onValueUpdate(EconomicMap<OptionKey<?>, Object> values, String oldValue, String newValue) {\n-            // disallow null or empty string\n-            if (newValue == null || newValue.length() == 0) {\n-                DebugInfoSourceCacheRoot.update(values, oldValue);\n-            }\n+    public static final HostedOptionKey<String> DebugInfoSourceCacheRoot = new HostedOptionKey<String>(\"sources\");\n+\n+    public static String getDebugInfoSourceCacheRoot() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "006f2a8e822e29611cd6b054d4a1cb5fe0059f5e"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4OTE2NTA4", "url": "https://github.com/oracle/graal/pull/2459#pullrequestreview-418916508", "createdAt": "2020-05-27T07:16:21Z", "commit": {"oid": "006f2a8e822e29611cd6b054d4a1cb5fe0059f5e"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "006f2a8e822e29611cd6b054d4a1cb5fe0059f5e", "author": {"user": {"login": "adinn", "name": "Andrew Dinn"}}, "url": "https://github.com/oracle/graal/commit/006f2a8e822e29611cd6b054d4a1cb5fe0059f5e", "committedDate": "2020-05-26T17:00:57Z", "message": "fixes for review comments"}, "afterCommit": {"oid": "95d13ac97cca5a472097bf636c553fa1982f0699", "author": {"user": {"login": "adinn", "name": "Andrew Dinn"}}, "url": "https://github.com/oracle/graal/commit/95d13ac97cca5a472097bf636c553fa1982f0699", "committedDate": "2020-05-27T08:03:03Z", "message": "fixes for review comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cd73a953d273fd68e3dfecb934273e666a483b9", "author": {"user": {"login": "adinn", "name": "Andrew Dinn"}}, "url": "https://github.com/oracle/graal/commit/2cd73a953d273fd68e3dfecb934273e666a483b9", "committedDate": "2020-05-27T08:36:56Z", "message": "fixes for review comments"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "95d13ac97cca5a472097bf636c553fa1982f0699", "author": {"user": {"login": "adinn", "name": "Andrew Dinn"}}, "url": "https://github.com/oracle/graal/commit/95d13ac97cca5a472097bf636c553fa1982f0699", "committedDate": "2020-05-27T08:03:03Z", "message": "fixes for review comments"}, "afterCommit": {"oid": "2cd73a953d273fd68e3dfecb934273e666a483b9", "author": {"user": {"login": "adinn", "name": "Andrew Dinn"}}, "url": "https://github.com/oracle/graal/commit/2cd73a953d273fd68e3dfecb934273e666a483b9", "committedDate": "2020-05-27T08:36:56Z", "message": "fixes for review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4OTk4MDU4", "url": "https://github.com/oracle/graal/pull/2459#pullrequestreview-418998058", "createdAt": "2020-05-27T09:05:15Z", "commit": {"oid": "2cd73a953d273fd68e3dfecb934273e666a483b9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "904859e2c24375fd010bb81336fd8ec1f0404de1", "author": {"user": {"login": "olpaw", "name": "Paul Woegerer"}}, "url": "https://github.com/oracle/graal/commit/904859e2c24375fd010bb81336fd8ec1f0404de1", "committedDate": "2020-05-27T09:26:47Z", "message": "Style fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7cf361f6996d6b74c50b3ed7987c80c1e62dd5f9", "author": {"user": {"login": "olpaw", "name": "Paul Woegerer"}}, "url": "https://github.com/oracle/graal/commit/7cf361f6996d6b74c50b3ed7987c80c1e62dd5f9", "committedDate": "2020-05-27T10:05:09Z", "message": "Fix checkstyle issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93dabb297aaae737380d811c5eeb9ebe31d4607b", "author": {"user": {"login": "olpaw", "name": "Paul Woegerer"}}, "url": "https://github.com/oracle/graal/commit/93dabb297aaae737380d811c5eeb9ebe31d4607b", "committedDate": "2020-05-27T13:02:33Z", "message": "Add missing copyright header"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92337dfada77f57874e53115ad986404a9855358", "author": {"user": {"login": "olpaw", "name": "Paul Woegerer"}}, "url": "https://github.com/oracle/graal/commit/92337dfada77f57874e53115ad986404a9855358", "committedDate": "2020-05-27T13:21:56Z", "message": "Fix FindBugs warning about possible NPE"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52174b008a7e152d9f32c0517374036a07297620", "author": {"user": {"login": "olpaw", "name": "Paul Woegerer"}}, "url": "https://github.com/oracle/graal/commit/52174b008a7e152d9f32c0517374036a07297620", "committedDate": "2020-05-27T14:38:44Z", "message": "Prevent SubstrateOptions.getDebugInfoSourceCacheRoot() at SourceCache.<clinit> time\n\nAt the time of SourceCache clinit HostedOptionValues Singleton in not\nyet available thus DebugInfoSourceCacheRoot.getValue() cannot be used at\nSourceCache clinit time."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1009, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}