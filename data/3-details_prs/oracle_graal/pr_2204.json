{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgyMzQwNDg4", "number": 2204, "title": "Replace java.lang.Compiler.command usage with proper native-image API methods", "bodyText": "java.lang.Compiler.command is deprecated and will eventually be removed in the next LTS. Thus we have to get rid of our \"use\" of java.lang.Compiler.command (exposing SubstrateVM specific functionality via Compiler.command. See https://github.com/oracle/graal/blob/master/substratevm/src/com.oracle.svm.core/src/com/oracle/svm/core/CompilerCommandPlugin.java) and instead create proper native-image API methods this functionality.", "createdAt": "2020-03-02T11:50:55Z", "url": "https://github.com/oracle/graal/pull/2204", "merged": true, "mergeCommit": {"oid": "f8869dd815f4df8d27d9e2d783c4acdb180409d7"}, "closed": true, "closedAt": "2020-03-04T09:57:59Z", "author": {"login": "olpaw"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcH16cAgH2gAyMzgyMzQwNDg4OjNiYWMwZmYzMTg2ZDk1NTczZDNmMTYxN2RjOWY5OTY3NGE5MWZkYzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKKmXigFqTM2ODM5MjAzMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3bac0ff3186d95573d3f1617dc9f99674a91fdc7", "author": {"user": {"login": "olpaw", "name": "Paul Woegerer"}}, "url": "https://github.com/oracle/graal/commit/3bac0ff3186d95573d3f1617dc9f99674a91fdc7", "committedDate": "2020-02-25T17:52:21Z", "message": "Remove obsolete CompilerCommandPlugin infrastructure"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67817e29da48197f6233954acd0976d6541b58b0", "author": {"user": {"login": "olpaw", "name": "Paul Woegerer"}}, "url": "https://github.com/oracle/graal/commit/67817e29da48197f6233954acd0976d6541b58b0", "committedDate": "2020-02-25T17:52:21Z", "message": "Support @AutomaticFeature subclassing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d76d17d7ce1eaf378bb0cc010f6799842536f1a7", "author": {"user": {"login": "olpaw", "name": "Paul Woegerer"}}, "url": "https://github.com/oracle/graal/commit/d76d17d7ce1eaf378bb0cc010f6799842536f1a7", "committedDate": "2020-02-26T12:02:12Z", "message": "Provide replacement for HeapDump CompilerCommandPlugin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6830a306e474be74d531475f2ef35018107d5d80", "author": {"user": {"login": "olpaw", "name": "Paul Woegerer"}}, "url": "https://github.com/oracle/graal/commit/6830a306e474be74d531475f2ef35018107d5d80", "committedDate": "2020-02-26T12:02:12Z", "message": "Provide replacement for CompilerCommandPlugin based ArgumentVector functions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c322499fb4a985085a59948016810b79bb89f326", "author": {"user": {"login": "olpaw", "name": "Paul Woegerer"}}, "url": "https://github.com/oracle/graal/commit/c322499fb4a985085a59948016810b79bb89f326", "committedDate": "2020-02-26T12:02:12Z", "message": "Revert \"Remove obsolete CompilerCommandPlugin infrastructure\"\n\nThis reverts commit 740a43e8a1893c1064f67391b3584699390daa27.\n\nOnce all use of this undocumented interface is removed everywhere this\ncommit can be reverted thus finally the obsolete CompilerCommandPlugin\ninfrastructure will be gone."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8537f97afdcc0f7ead58ca2a5049b5e0df204ff", "author": {"user": {"login": "olpaw", "name": "Paul Woegerer"}}, "url": "https://github.com/oracle/graal/commit/a8537f97afdcc0f7ead58ca2a5049b5e0df204ff", "committedDate": "2020-02-26T12:02:12Z", "message": "Add new native-image API methods"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b374b1feeaa0197c6b64881834ea264e0c2b8e11", "author": {"user": {"login": "olpaw", "name": "Paul Woegerer"}}, "url": "https://github.com/oracle/graal/commit/b374b1feeaa0197c6b64881834ea264e0c2b8e11", "committedDate": "2020-02-28T17:25:54Z", "message": "Throw UnsupportedOperationException if argument-vector methods are called from shared library image"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7244a95140c418676893a711b7e269cb21d1416a", "author": {"user": {"login": "olpaw", "name": "Paul Woegerer"}}, "url": "https://github.com/oracle/graal/commit/7244a95140c418676893a711b7e269cb21d1416a", "committedDate": "2020-02-28T17:25:54Z", "message": "Provide HeapDumpSupport and use same signature as in HotSpotDiagnosticMXBean"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10bfae725ae580afe112faa73d3efcff4ca5e38f", "author": {"user": {"login": "olpaw", "name": "Paul Woegerer"}}, "url": "https://github.com/oracle/graal/commit/10bfae725ae580afe112faa73d3efcff4ca5e38f", "committedDate": "2020-02-28T17:25:54Z", "message": "Revert \"Support @AutomaticFeature subclassing\"\n\nThis reverts commit 67817e29"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63ebe5a7ecae1b3c778456c978346520be1eff7b", "author": {"user": {"login": "olpaw", "name": "Paul Woegerer"}}, "url": "https://github.com/oracle/graal/commit/63ebe5a7ecae1b3c778456c978346520be1eff7b", "committedDate": "2020-03-02T16:06:40Z", "message": "Explicitly exclude non-posix platforms from argument vector support"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d3d30972b31d42b50cf9e9514523e56946beb54", "author": {"user": {"login": "olpaw", "name": "Paul Woegerer"}}, "url": "https://github.com/oracle/graal/commit/6d3d30972b31d42b50cf9e9514523e56946beb54", "committedDate": "2020-03-03T11:22:51Z", "message": "Import IOException instead of using java.io.IOException"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58abafca2f6f9433bd8b8c77d1536449eb0c6f48", "author": {"user": {"login": "olpaw", "name": "Paul Woegerer"}}, "url": "https://github.com/oracle/graal/commit/58abafca2f6f9433bd8b8c77d1536449eb0c6f48", "committedDate": "2020-03-03T11:40:41Z", "message": "Make getArgumentVectorBlockSize() usable for argument vector support checking"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8564e018069a6034c2d758f06efbe77e095bf5cb", "author": {"user": {"login": "olpaw", "name": "Paul Woegerer"}}, "url": "https://github.com/oracle/graal/commit/8564e018069a6034c2d758f06efbe77e095bf5cb", "committedDate": "2020-03-03T12:28:21Z", "message": "Fix typo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4MzkxNjY4", "url": "https://github.com/oracle/graal/pull/2204#pullrequestreview-368391668", "createdAt": "2020-03-03T23:05:21Z", "commit": {"oid": "8564e018069a6034c2d758f06efbe77e095bf5cb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMzowNToyMlrOFxZ4ig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QyMzowNToyMlrOFxZ4ig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzM0ODYxOA==", "bodyText": "I don't like catching exceptions as normal control flow (and on Windows this is normal control flow). Better would be to make the check method return a boolean and in the callers either return -1 or throw an exception.", "url": "https://github.com/oracle/graal/pull/2204#discussion_r387348618", "createdAt": "2020-03-03T23:05:22Z", "author": {"login": "christianwimmer"}, "path": "substratevm/src/com.oracle.svm.core/src/com/oracle/svm/core/JavaMainWrapper.java", "diffHunk": "@@ -200,8 +209,12 @@ public static int run(int paramArgc, CCharPointerPointer paramArgv) {\n      * @return maximum length of C chars that can be stored in the program argument part of the\n      *         contiguous memory block without writing into the environment variables part.\n      */\n-    public static long getCRuntimeArgumentBlockLength() {\n-        VMError.guarantee(argv.notEqual(WordFactory.zero()) && argc > 0, \"Requires JavaMainWrapper.run(int, CCharPointerPointer) entry point!\");\n+    public static int getCRuntimeArgumentBlockLength() {\n+        try {\n+            checkArgumentBlockSupported();\n+        } catch (UnsupportedOperationException e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8564e018069a6034c2d758f06efbe77e095bf5cb"}, "originalPosition": 69}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4MzkyMDMy", "url": "https://github.com/oracle/graal/pull/2204#pullrequestreview-368392032", "createdAt": "2020-03-03T23:06:17Z", "commit": {"oid": "8564e018069a6034c2d758f06efbe77e095bf5cb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1101, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}