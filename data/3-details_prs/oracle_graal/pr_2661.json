{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2NDU4ODE4", "number": 2661, "title": "Add compilation directory to debug info", "bodyText": "This PR adds the DW_AT_comp_dir attribute to debug info, making it\npoint to the appropriate source file cache. This removes the need of\nusing set directores sources/jdk:sources/graal:sources/src in gdb.\nAt the moment there are 3 directories that might contain sources:\n\nsources/jdk\nsources/graal\nsources/src\n\nThis patch detects the corresponding path for each compilation unit and adds it to the DW_AT_comp_dir attribute.\nFor instance for java.base/java/lang/Shutdown.java it sets DW_AT_comp_dir to sources/jdk, and for com/oracle/svm/core/RegisterDumper.java it sets it to sources/graal.", "createdAt": "2020-07-08T20:09:41Z", "url": "https://github.com/oracle/graal/pull/2661", "merged": true, "mergeCommit": {"oid": "97cd4e38093ac5c13d0116883b4358686eca825c"}, "closed": true, "closedAt": "2020-07-10T02:32:11Z", "author": {"login": "zakkak"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczBifiABqjM1MjcxNDU1MjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABczOV56gFqTQ0NTU3NDc1OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a94d47f8f197a07342d2f8d8a6d7f0ee9334f459", "author": {"user": {"login": "zakkak", "name": "Foivos"}}, "url": "https://github.com/oracle/graal/commit/a94d47f8f197a07342d2f8d8a6d7f0ee9334f459", "committedDate": "2020-07-08T18:28:29Z", "message": "Removes explicit addition of source cache from in debuginfotest"}, "afterCommit": {"oid": "ad3de084bbddf7dd05cfaa6818e583b6d70b7625", "author": {"user": {"login": "zakkak", "name": "Foivos"}}, "url": "https://github.com/oracle/graal/commit/ad3de084bbddf7dd05cfaa6818e583b6d70b7625", "committedDate": "2020-07-08T21:43:39Z", "message": "Removes explicit addition of source cache from in debuginfotest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1Mzg3ODM5", "url": "https://github.com/oracle/graal/pull/2661#pullrequestreview-445387839", "createdAt": "2020-07-09T08:14:21Z", "commit": {"oid": "ad3de084bbddf7dd05cfaa6818e583b6d70b7625"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NTE0NzIw", "url": "https://github.com/oracle/graal/pull/2661#pullrequestreview-445514720", "createdAt": "2020-07-09T11:07:28Z", "commit": {"oid": "ad3de084bbddf7dd05cfaa6818e583b6d70b7625"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMTowNzoyOFrOGvMaMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMTowNzoyOFrOGvMaMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjEzOTU3MQ==", "bodyText": "I think this would be clearer:\nBy default will look employ the three local directory roots sources/{jdk,graal,src} to locate the source files for your app classes, Graal classes and JDK runtime classes. If the sources cache is not located in the directory in which you run gdb you can configure the required paths using the following command:\n(gdb) set ...", "url": "https://github.com/oracle/graal/pull/2661#discussion_r452139571", "createdAt": "2020-07-09T11:07:28Z", "author": {"login": "adinn"}, "path": "substratevm/DEBUGINFO.md", "diffHunk": "@@ -174,37 +174,41 @@ configure extra source search paths (see below).\n Configuring source paths in gdb\n -------------------------------\n \n-In order for gdb to be able to locate the source files for your app\n-classes, Graal classes and JDK runtime classes you need to provide gdb\n-with a list of source root dirs using the 'set directories' command:\n+By default gdb will look into `/path/to/sources/{jdk,graal,src}` directories to", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad3de084bbddf7dd05cfaa6818e583b6d70b7625"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NTE5MjQ3", "url": "https://github.com/oracle/graal/pull/2661#pullrequestreview-445519247", "createdAt": "2020-07-09T11:15:04Z", "commit": {"oid": "ad3de084bbddf7dd05cfaa6818e583b6d70b7625"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMToxNTowNFrOGvMnjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMToxNTowNFrOGvMnjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE0Mjk4OA==", "bodyText": "This name seems wrong as the value is not actually anything to do with compilation. I understand that it is used to populate the comp_dir DWARF property but that use is incidental to its origin -- which I think it is more helpful to signal. So I'd prefer to use field name cachePath and modifying the getter accordingly.", "url": "https://github.com/oracle/graal/pull/2661#discussion_r452142988", "createdAt": "2020-07-09T11:15:04Z", "author": {"login": "adinn"}, "path": "substratevm/src/com.oracle.objectfile/src/com/oracle/objectfile/debugentry/Range.java", "diffHunk": "@@ -36,6 +36,7 @@\n  */\n \n public class Range {\n+    private final String compilationDirectory;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad3de084bbddf7dd05cfaa6818e583b6d70b7625"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ad3de084bbddf7dd05cfaa6818e583b6d70b7625", "author": {"user": {"login": "zakkak", "name": "Foivos"}}, "url": "https://github.com/oracle/graal/commit/ad3de084bbddf7dd05cfaa6818e583b6d70b7625", "committedDate": "2020-07-08T21:43:39Z", "message": "Removes explicit addition of source cache from in debuginfotest"}, "afterCommit": {"oid": "80ad096e0d1d90be3c86a15a233ccc28caa26e94", "author": {"user": {"login": "zakkak", "name": "Foivos"}}, "url": "https://github.com/oracle/graal/commit/80ad096e0d1d90be3c86a15a233ccc28caa26e94", "committedDate": "2020-07-09T11:17:14Z", "message": "Removes explicit addition of source cache from in debuginfotest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f231abdcb1b44ea570aef3acfbbe2f3d34e4898", "author": {"user": {"login": "zakkak", "name": "Foivos"}}, "url": "https://github.com/oracle/graal/commit/4f231abdcb1b44ea570aef3acfbbe2f3d34e4898", "committedDate": "2020-07-09T11:22:42Z", "message": "Adds DW_AT_comp_dir attribute to debug info\n\nThis patch adds the DW_AT_comp_dir attribute to debug info, making it\npoint to the appropriate source file cache. This removes the need of\nusing `set directores sources/jdk:sources/graal:sources/src` in gdb."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd1c0aa3a0ca6fdc0385e875bdfa9a107e5fe6cb", "author": {"user": {"login": "zakkak", "name": "Foivos"}}, "url": "https://github.com/oracle/graal/commit/dd1c0aa3a0ca6fdc0385e875bdfa9a107e5fe6cb", "committedDate": "2020-07-09T11:22:45Z", "message": "Update DEBUGINFO.md to reflect addition of DW_AT_comp_dir"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5390a291df12560aa7b8b623a693809e1640f09", "author": {"user": {"login": "zakkak", "name": "Foivos"}}, "url": "https://github.com/oracle/graal/commit/a5390a291df12560aa7b8b623a693809e1640f09", "committedDate": "2020-07-09T11:22:45Z", "message": "Removes explicit addition of source cache from in debuginfotest"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "80ad096e0d1d90be3c86a15a233ccc28caa26e94", "author": {"user": {"login": "zakkak", "name": "Foivos"}}, "url": "https://github.com/oracle/graal/commit/80ad096e0d1d90be3c86a15a233ccc28caa26e94", "committedDate": "2020-07-09T11:17:14Z", "message": "Removes explicit addition of source cache from in debuginfotest"}, "afterCommit": {"oid": "a5390a291df12560aa7b8b623a693809e1640f09", "author": {"user": {"login": "zakkak", "name": "Foivos"}}, "url": "https://github.com/oracle/graal/commit/a5390a291df12560aa7b8b623a693809e1640f09", "committedDate": "2020-07-09T11:22:45Z", "message": "Removes explicit addition of source cache from in debuginfotest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NTc0NzU5", "url": "https://github.com/oracle/graal/pull/2661#pullrequestreview-445574759", "createdAt": "2020-07-09T12:38:49Z", "commit": {"oid": "a5390a291df12560aa7b8b623a693809e1640f09"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1050, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}