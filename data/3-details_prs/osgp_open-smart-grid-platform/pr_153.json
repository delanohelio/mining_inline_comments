{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3NjIyODIz", "number": 153, "title": "FLEX-5239 ~ Upgrade to Cucumber 5", "bodyText": "Refactors packages of Cucumber classes to the newer API. The core part\nis considered internal and to be used through the java and junit\nprojects.\nAdd strict equals true to the AcceptanceTests classes as the non-strict\nmode is deprecated, and will be removed in a future version. This\nprevents warnings in the output logs.\nUpdates settings handling in the steps, to get rid of issues because of\nempty cells defaulting to null instead of the empty string as before.\nUpdates step method annotations where the step definition text with the\nstep methods is not wrapped between \"^\" and \"$\" and the step has\nparameters. These are now considered Cucumber expressions instead of\nregular expressions. For Cucumber expressions a different syntax is\nneeded to match the arguments.\nUpdates the Configurer to no longer implement TypeRegistryConfigurer.\nThe configurers registers some default step data transformers without\nimplementing an interface of which only one implementation is allowed on\nthe glue path. This should offer flexibility in adding custom\ntransformer functionality with other step classes as needed, without\nhaving to configure this in a single class.\nAdds the junit-vintage-engine to the POMs of projects with Cucumber\ntests. The current setup of Cucumber depends on JUnit 4.\nUncommented and at-skipped a feature in\nTariffSwitchingResponseDataCleanupJob.feature in\ncucumber-tests-platform-publiclighting. A feature file without any\ncontents leads to errors when running the Cucumber tests.", "createdAt": "2020-01-27T17:51:27Z", "url": "https://github.com/OSGP/open-smart-grid-platform/pull/153", "merged": true, "mergeCommit": {"oid": "1aa5ca6ef6d7c29dc4f180c636050d8cbbf8a175"}, "closed": true, "closedAt": "2020-02-05T14:03:32Z", "author": {"login": "bvdzwet"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-ggOwAH2gAyMzY3NjIyODIzOjRmZjI0OTc1ZDgzMDBlYzY2ZWUxNzhkY2NkZjY3NWQ2MTlhOGZkMTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcBWpo-AFqTM1MzczNzEwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4ff24975d8300ec66ee178dccdf675d619a8fd10", "author": {"user": {"login": "bvdzwet", "name": "Bart van der Zwet"}}, "url": "https://github.com/OSGP/open-smart-grid-platform/commit/4ff24975d8300ec66ee178dccdf675d619a8fd10", "committedDate": "2020-01-27T17:50:24Z", "message": "FLEX-5239 ~ Starts OSGP upgrade to Cucumber 5\n\nRefactors packages of Cucumber classes to the newer API. The core part\nis considered internal and to be used through the java and junit\nprojects.\n\nAdd strict equals true to the AcceptanceTests classes as the non-strict\nmode is deprecated, and will be removed in a future version. This\nprevents warnings in the output logs.\n\nUpdates settings handling in the steps, to get rid of issues because of\nempty cells defaulting to null instead of the empty string as before.\n\nUpdates step method annotations where the step definition text with the\nstep methods is not wrapped between \"^\" and \"$\" and the step has\nparameters. These are now considered Cucumber expressions instead of\nregular expressions. For Cucumber expressions a different syntax is\nneeded to match the arguments.\n\nUpdates the Configurer to no longer implement TypeRegistryConfigurer.\nThe configurers registers some default step data transformers without\nimplementing an interface of which only one implementation is allowed on\nthe glue path. This should offer flexibility in adding custom\ntransformer functionality with other step classes as needed, without\nhaving to configure this in a single class.\n\nAdds the junit-vintage-engine to the POMs of projects with Cucumber\ntests. The current setup of Cucumber depends on JUnit 4.\n\nUncommented and at-skipped a feature in\nTariffSwitchingResponseDataCleanupJob.feature in\ncucumber-tests-platform-publiclighting. A feature file without any\ncontents leads to errors when running the Cucumber tests."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bdb9a3ce4fdea1b68bdcabcb09658f77c4b46cf", "author": {"user": {"login": "bvdzwet", "name": "Bart van der Zwet"}}, "url": "https://github.com/OSGP/open-smart-grid-platform/commit/5bdb9a3ce4fdea1b68bdcabcb09658f77c4b46cf", "committedDate": "2020-01-28T09:29:00Z", "message": "FLEX-5239 ~ Fixes Cucumber expression steps smart metering\n\nFixes some steps that are Cucumber expressions instead of regular\nexpressions in the smart metering SimulatedConfigurationObjectSteps.\n\nBumps the Cucumber version to the latest release (5.1.2)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6042c45227f3006cf3a7af9d79bb6f22c6ae9823", "author": {"user": {"login": "bvdzwet", "name": "Bart van der Zwet"}}, "url": "https://github.com/OSGP/open-smart-grid-platform/commit/6042c45227f3006cf3a7af9d79bb6f22c6ae9823", "committedDate": "2020-01-29T07:06:00Z", "message": "FLEX-5239 ~ Replaces regex by Cucumber expression"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abcf4d61311ea5108c482524812ed0cde32ef624", "author": {"user": {"login": "bvdzwet", "name": "Bart van der Zwet"}}, "url": "https://github.com/OSGP/open-smart-grid-platform/commit/abcf4d61311ea5108c482524812ed0cde32ef624", "committedDate": "2020-01-30T13:00:01Z", "message": "FLEX-5239 ~ Updates triggering the Cucumber tests\n\nCucumber test execution using command line argument cucumber.options has\nbeen deprecated. These changes should make sure the old options that\nwere used are replaced by cucumber.execution.strict and\ncucumber.filter.tags.\n\nFor cucumber.filter.tags, the parsing of tags from the pull request\ndescription, used to restrict the subset of the tests to be executed, is\nupdated, to no longer result in multiple --tag sections, but instead to\nmake an expression using and and or."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "865a7bc04bc045ec23323a89c4837c2c01f716a9", "author": {"user": {"login": "bvdzwet", "name": "Bart van der Zwet"}}, "url": "https://github.com/OSGP/open-smart-grid-platform/commit/865a7bc04bc045ec23323a89c4837c2c01f716a9", "committedDate": "2020-01-30T13:20:37Z", "message": "FLEX-5239 ~ Fixes missing escaped backslash in pipeline shell script"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "39f28124b47090b0b4e1f23ac8ed9c5cb3d162eb", "author": {"user": {"login": "bvdzwet", "name": "Bart van der Zwet"}}, "url": "https://github.com/OSGP/open-smart-grid-platform/commit/39f28124b47090b0b4e1f23ac8ed9c5cb3d162eb", "committedDate": "2020-02-03T13:50:26Z", "message": "Merges branch 'development' into feature/FLEX-5239-upgrade-to-cucumber-5"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "228d61324b4066eafd9d1323d9cec4e07c67010f", "author": {"user": {"login": "bvdzwet", "name": "Bart van der Zwet"}}, "url": "https://github.com/OSGP/open-smart-grid-platform/commit/228d61324b4066eafd9d1323d9cec4e07c67010f", "committedDate": "2020-02-03T13:54:20Z", "message": "FLEX-5239 ~ Fixes OSLP Configuration scenario\n\nThe OSLP mock server used to be configured with null for the interval\ntype when the matching cell in the step data was empty.\nThis change makes sure the default interval type is only used if there\nis no step data, and null is used if there is empty interval type step\ndata."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzNTgxODU0", "url": "https://github.com/OSGP/open-smart-grid-platform/pull/153#pullrequestreview-353581854", "createdAt": "2020-02-05T09:46:26Z", "commit": {"oid": "228d61324b4066eafd9d1323d9cec4e07c67010f"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQwOTo0NjoyNlrOFlxdqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxMDo1NjozOVrOFlzqIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTE1MjA0MA==", "bodyText": "The original regex matches a string enclosed in double-quotes. The new Cucumber expression does not take into account the double-quotes. The feature file contains:\nAnd the platform buffers a stop device response message for device \"TEST1024000000001\"\nShould the Cucumber expression be changed?", "url": "https://github.com/OSGP/open-smart-grid-platform/pull/153#discussion_r375152040", "createdAt": "2020-02-05T09:46:26Z", "author": {"login": "kevinsmeets"}, "path": "integration-tests/cucumber-tests-platform-common/src/test/java/org/opensmartgridplatform/cucumber/platform/common/glue/steps/ws/core/deviceinstallation/StopDeviceSteps.java", "diffHunk": "@@ -76,7 +76,7 @@ public void theStopDeviceResponseContainsSoapFault(final Map<String, String> exp\n         GenericResponseSteps.verifySoapFault(expectedResult);\n     }\n \n-    @Then(\"the platform buffers a stop device response message for device \\\"([^\\\"]*)\\\"\")\n+    @Then(\"the platform buffers a stop device response message for device {string}\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "228d61324b4066eafd9d1323d9cec4e07c67010f"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTE4MTk0Mg==", "bodyText": "Any matcher for Boolean argument looks like the best alternative, OK.", "url": "https://github.com/OSGP/open-smart-grid-platform/pull/153#discussion_r375181942", "createdAt": "2020-02-05T10:44:01Z", "author": {"login": "kevinsmeets"}, "path": "integration-tests/cucumber-tests-platform-common/src/test/java/org/opensmartgridplatform/cucumber/platform/common/glue/steps/ws/basicosgpfunctions/AuthorizeDeviceFunctionsSteps.java", "diffHunk": "@@ -152,7 +152,7 @@ public void receivingADeviceFunctionRequest(final Map<String, String> requestPar\n         }\n     }\n \n-    @Then(\"the device function response is \\\"([^\\\"]*)\\\"\")\n+    @Then(\"the device function response is \\\"{}\\\"\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "228d61324b4066eafd9d1323d9cec4e07c67010f"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTE4MzA3Nw==", "bodyText": "The original regex matches a string enclosed in double-quotes. The new Cucumber expression does not take into account the double-quotes. The feature file contains:\nAnd the platform buffers a device installation get status response message for device \"TEST1024000000001\"\nShould the Cucumber expression be changed?", "url": "https://github.com/OSGP/open-smart-grid-platform/pull/153#discussion_r375183077", "createdAt": "2020-02-05T10:46:15Z", "author": {"login": "kevinsmeets"}, "path": "integration-tests/cucumber-tests-platform-common/src/test/java/org/opensmartgridplatform/cucumber/platform/common/glue/steps/ws/core/deviceinstallation/GetStatusSteps.java", "diffHunk": "@@ -71,7 +72,7 @@ public void theDeviceInstallationGetStatusAsyncResponseContains(final Map<String\n                         PlatformDefaults.DEFAULT_ORGANIZATION_IDENTIFICATION));\n     }\n \n-    @Then(\"the platform buffers a device installation get status response message for device \\\"([^\\\"]*)\\\"\")\n+    @Then(\"the platform buffers a device installation get status response message for device {string}\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "228d61324b4066eafd9d1323d9cec4e07c67010f"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTE4ODAwMg==", "bodyText": "The original regex matches a string enclosed in double-quotes. The new Cucumber expression does not take into account the double-quotes.\nI can't find any feature files using this step.", "url": "https://github.com/OSGP/open-smart-grid-platform/pull/153#discussion_r375188002", "createdAt": "2020-02-05T10:56:39Z", "author": {"login": "kevinsmeets"}, "path": "integration-tests/cucumber-tests-platform/src/test/java/org/opensmartgridplatform/cucumber/platform/glue/steps/database/core/ScheduledTaskSteps.java", "diffHunk": "@@ -44,7 +44,7 @@\n     @Autowired\n     private ScheduledTaskRepository scheduledTaskRepository;\n \n-    @Given(\"a scheduled \\\"([^\\\"]*)\\\" task\")\n+    @Given(\"a scheduled {string} task\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "228d61324b4066eafd9d1323d9cec4e07c67010f"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzNzM3MTAx", "url": "https://github.com/OSGP/open-smart-grid-platform/pull/153#pullrequestreview-353737101", "createdAt": "2020-02-05T14:03:24Z", "commit": {"oid": "228d61324b4066eafd9d1323d9cec4e07c67010f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3882, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}