{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc0MjYzODA4", "number": 159, "title": "FLEX-5197 ~ Reboots OSLP SSLD after configuration is set.", "bodyText": "", "createdAt": "2020-02-12T11:48:25Z", "url": "https://github.com/OSGP/open-smart-grid-platform/pull/159", "merged": true, "mergeCommit": {"oid": "d4350b5aae66e86ff1874ffb208a47b2ec6b552f"}, "closed": true, "closedAt": "2020-02-17T12:59:05Z", "author": {"login": "kevinsmeets"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDk57xgH2gAyMzc0MjYzODA4OmZkMzIwYjY4N2Y1NTk3MDg1MjVlYjljMGQ5NTc5ODUwM2ZhYzIzN2I=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFM6fTgFqTM1OTcwNjgzNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fd320b687f559708525eb9c0d95798503fac237b", "author": {"user": {"login": "kevinsmeets", "name": "Kevin Smeets"}}, "url": "https://github.com/OSGP/open-smart-grid-platform/commit/fd320b687f559708525eb9c0d95798503fac237b", "committedDate": "2020-02-12T11:47:43Z", "message": "FLEX-5197 ~ Reboots OSLP SSLD after configuration is set."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3Mzk1OTQ3", "url": "https://github.com/OSGP/open-smart-grid-platform/pull/159#pullrequestreview-357395947", "createdAt": "2020-02-12T11:58:53Z", "commit": {"oid": "fd320b687f559708525eb9c0d95798503fac237b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxMTo1ODo1NFrOFor9Cg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQxMTo1ODo1NFrOFor9Cg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODIwNzQ5OA==", "bodyText": "Immediately return this expression instead of assigning it to the temporary variable \"deviceResponseHandler\".", "url": "https://github.com/OSGP/open-smart-grid-platform/pull/159#discussion_r378207498", "createdAt": "2020-02-12T11:58:54Z", "author": {"login": "jenkins-ip-10-4-24-184"}, "path": "osgp/protocol-adapter-oslp/osgp-adapter-protocol-oslp-elster/src/main/java/org/opensmartgridplatform/adapter/protocol/oslp/elster/infra/messaging/processors/CommonRebootRequestMessageProcessor.java", "diffHunk": "@@ -77,6 +77,22 @@ public void processSignedOslpEnvelope(final String deviceIdentification,\n         final int retryCount = unsignedOslpEnvelopeDto.getRetryCount();\n         final boolean isScheduled = unsignedOslpEnvelopeDto.isScheduled();\n \n+        final DeviceResponseHandler deviceResponseHandler = this.createSetRebootDeviceResponseHandler(domain,\n+                domainVersion, messageType, retryCount, isScheduled);\n+\n+        final DeviceRequest deviceRequest = new DeviceRequest(organisationIdentification, deviceIdentification,\n+                correlationUid, messagePriority);\n+\n+        try {\n+            this.deviceService.doSetReboot(oslpEnvelope, deviceRequest, deviceResponseHandler, ipAddress);\n+        } catch (final IOException e) {\n+            this.handleError(e, correlationUid, organisationIdentification, deviceIdentification, domain, domainVersion,\n+                    messageType, messagePriority, retryCount);\n+        }\n+    }\n+\n+    protected DeviceResponseHandler createSetRebootDeviceResponseHandler(final String domain,\n+            final String domainVersion, final String messageType, final int retryCount, final boolean isScheduled) {\n         final DeviceResponseHandler deviceResponseHandler = new DeviceResponseHandler() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd320b687f559708525eb9c0d95798503fac237b"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1dc2804bd09a4d46a2d3d5b5bdb2ebe320ff330", "author": {"user": {"login": "kevinsmeets", "name": "Kevin Smeets"}}, "url": "https://github.com/OSGP/open-smart-grid-platform/commit/e1dc2804bd09a4d46a2d3d5b5bdb2ebe320ff330", "committedDate": "2020-02-12T12:37:49Z", "message": "FLEX-5197 ~ Updates SetConfiguration feature to include reboot steps."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae1db174b9ccbe7c58b93ec1590a6f6af5104e11", "author": {"user": {"login": "kevinsmeets", "name": "Kevin Smeets"}}, "url": "https://github.com/OSGP/open-smart-grid-platform/commit/ae1db174b9ccbe7c58b93ec1590a6f6af5104e11", "committedDate": "2020-02-14T17:17:21Z", "message": "FLEX-5197 ~ Adds logging to OSLP mock server."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5NzA2ODM0", "url": "https://github.com/OSGP/open-smart-grid-platform/pull/159#pullrequestreview-359706834", "createdAt": "2020-02-17T12:42:23Z", "commit": {"oid": "ae1db174b9ccbe7c58b93ec1590a6f6af5104e11"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxMjo0MjoyM1rOFqjH0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxMjo0MjoyM1rOFqjH0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE1OTk1NQ==", "bodyText": "I agree with Jenkins", "url": "https://github.com/OSGP/open-smart-grid-platform/pull/159#discussion_r380159955", "createdAt": "2020-02-17T12:42:23Z", "author": {"login": "robindenadel"}, "path": "osgp/protocol-adapter-oslp/osgp-adapter-protocol-oslp-elster/src/main/java/org/opensmartgridplatform/adapter/protocol/oslp/elster/infra/messaging/processors/CommonRebootRequestMessageProcessor.java", "diffHunk": "@@ -77,6 +77,22 @@ public void processSignedOslpEnvelope(final String deviceIdentification,\n         final int retryCount = unsignedOslpEnvelopeDto.getRetryCount();\n         final boolean isScheduled = unsignedOslpEnvelopeDto.isScheduled();\n \n+        final DeviceResponseHandler deviceResponseHandler = this.createSetRebootDeviceResponseHandler(domain,\n+                domainVersion, messageType, retryCount, isScheduled);\n+\n+        final DeviceRequest deviceRequest = new DeviceRequest(organisationIdentification, deviceIdentification,\n+                correlationUid, messagePriority);\n+\n+        try {\n+            this.deviceService.doSetReboot(oslpEnvelope, deviceRequest, deviceResponseHandler, ipAddress);\n+        } catch (final IOException e) {\n+            this.handleError(e, correlationUid, organisationIdentification, deviceIdentification, domain, domainVersion,\n+                    messageType, messagePriority, retryCount);\n+        }\n+    }\n+\n+    protected DeviceResponseHandler createSetRebootDeviceResponseHandler(final String domain,\n+            final String domainVersion, final String messageType, final int retryCount, final boolean isScheduled) {\n         final DeviceResponseHandler deviceResponseHandler = new DeviceResponseHandler() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODIwNzQ5OA=="}, "originalCommit": {"oid": "fd320b687f559708525eb9c0d95798503fac237b"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3888, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}