{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMwMjUwNjU1", "number": 527, "title": "Feature/slim 2863 retry on all exceptions", "bodyText": "https://smartsocietyservices.atlassian.net/browse/SLIM-2863", "createdAt": "2020-12-01T11:54:48Z", "url": "https://github.com/OSGP/open-smart-grid-platform/pull/527", "merged": true, "mergeCommit": {"oid": "76a6be675c528e0705c95fc7012c6a3b672ec428"}, "closed": true, "closedAt": "2020-12-01T21:03:51Z", "author": {"login": "jboon"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdhlC_AgH2gAyNTMwMjUwNjU1OjI0YTMwMGYwYmUzYzQzNTY3OWZhYjYwZWFmNTRmZTE3Mjc1NzFkM2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdh7xGfAFqTU0MjAyMjkzNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "24a300f0be3c435679fab60eaf54fe1727571d3d", "author": {"user": {"login": "jboon", "name": null}}, "url": "https://github.com/OSGP/open-smart-grid-platform/commit/24a300f0be3c435679fab60eaf54fe1727571d3d", "committedDate": "2020-11-30T13:06:29Z", "message": "removed RetryableException, all exceptions possibly lead to retries"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e64ed1ac6a127e452e5b51ed121be9757c08f94", "author": {"user": {"login": "jboon", "name": null}}, "url": "https://github.com/OSGP/open-smart-grid-platform/commit/2e64ed1ac6a127e452e5b51ed121be9757c08f94", "committedDate": "2020-12-01T10:55:59Z", "message": "added unit tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxOTE1NzE3", "url": "https://github.com/OSGP/open-smart-grid-platform/pull/527#pullrequestreview-541915717", "createdAt": "2020-12-01T13:55:46Z", "commit": {"oid": "2e64ed1ac6a127e452e5b51ed121be9757c08f94"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxMzo1NTo0N1rOH8to9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxMzo1NTo0N1rOH8to9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzQyNDM3Mg==", "bodyText": "Why is this line necessary? Have you added unused mock elements by any change? It would be nicer without this line of code.", "url": "https://github.com/OSGP/open-smart-grid-platform/pull/527#discussion_r533424372", "createdAt": "2020-12-01T13:55:47Z", "author": {"login": "JelleHoffman"}, "path": "osgp/protocol-adapter-dlms/osgp-protocol-adapter-dlms/src/test/java/org/opensmartgridplatform/adapter/protocol/dlms/infra/messaging/processors/BundleMessageProcessorTest.java", "diffHunk": "@@ -0,0 +1,122 @@\n+/**\n+ * Copyright 2020 Alliander N.V.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file\n+ * except in compliance with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ */\n+package org.opensmartgridplatform.adapter.protocol.dlms.infra.messaging.processors;\n+\n+import static org.mockito.ArgumentMatchers.any;\n+import static org.mockito.Mockito.verify;\n+import static org.mockito.Mockito.when;\n+\n+import java.net.ConnectException;\n+\n+import javax.jms.JMSException;\n+import javax.jms.ObjectMessage;\n+\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.api.extension.ExtendWith;\n+import org.mockito.InjectMocks;\n+import org.mockito.Mock;\n+import org.mockito.junit.jupiter.MockitoExtension;\n+import org.mockito.junit.jupiter.MockitoSettings;\n+import org.mockito.quality.Strictness;\n+import org.opensmartgridplatform.adapter.protocol.dlms.application.services.BundleService;\n+import org.opensmartgridplatform.adapter.protocol.dlms.application.services.DomainHelperService;\n+import org.opensmartgridplatform.adapter.protocol.dlms.application.services.ThrottlingService;\n+import org.opensmartgridplatform.adapter.protocol.dlms.domain.entities.DlmsDevice;\n+import org.opensmartgridplatform.adapter.protocol.dlms.domain.entities.DlmsDeviceBuilder;\n+import org.opensmartgridplatform.adapter.protocol.dlms.domain.factories.DlmsConnectionHelper;\n+import org.opensmartgridplatform.adapter.protocol.dlms.domain.factories.DlmsConnectionManager;\n+import org.opensmartgridplatform.adapter.protocol.dlms.exceptions.ConnectionException;\n+import org.opensmartgridplatform.adapter.protocol.dlms.exceptions.OsgpExceptionConverter;\n+import org.opensmartgridplatform.adapter.protocol.dlms.infra.messaging.DeviceResponseMessageSender;\n+import org.opensmartgridplatform.adapter.protocol.dlms.infra.messaging.DlmsMessageListener;\n+import org.opensmartgridplatform.adapter.protocol.dlms.infra.messaging.RetryHeaderFactory;\n+import org.opensmartgridplatform.dto.valueobjects.smartmetering.BundleMessagesRequestDto;\n+import org.opensmartgridplatform.shared.exceptionhandling.ComponentType;\n+import org.opensmartgridplatform.shared.exceptionhandling.OsgpException;\n+import org.opensmartgridplatform.shared.infra.jms.MessageMetadata;\n+import org.opensmartgridplatform.shared.infra.jms.MessageType;\n+\n+@ExtendWith(MockitoExtension.class)\n+@MockitoSettings(strictness = Strictness.LENIENT)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2e64ed1ac6a127e452e5b51ed121be9757c08f94"}, "originalPosition": 47}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQxOTk1NTQ1", "url": "https://github.com/OSGP/open-smart-grid-platform/pull/527#pullrequestreview-541995545", "createdAt": "2020-12-01T15:08:52Z", "commit": {"oid": "2e64ed1ac6a127e452e5b51ed121be9757c08f94"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxNTowODo1MlrOH8xY8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxNTowODo1MlrOH8xY8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzQ4NTgwOA==", "bodyText": "minor: maybe put this in the setUp method so all init stuff is in the same place.", "url": "https://github.com/OSGP/open-smart-grid-platform/pull/527#discussion_r533485808", "createdAt": "2020-12-01T15:08:52Z", "author": {"login": "coendamen"}, "path": "osgp/protocol-adapter-dlms/osgp-protocol-adapter-dlms/src/test/java/org/opensmartgridplatform/adapter/protocol/dlms/infra/messaging/processors/BundleMessageProcessorTest.java", "diffHunk": "@@ -0,0 +1,122 @@\n+/**\n+ * Copyright 2020 Alliander N.V.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file\n+ * except in compliance with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ */\n+package org.opensmartgridplatform.adapter.protocol.dlms.infra.messaging.processors;\n+\n+import static org.mockito.ArgumentMatchers.any;\n+import static org.mockito.Mockito.verify;\n+import static org.mockito.Mockito.when;\n+\n+import java.net.ConnectException;\n+\n+import javax.jms.JMSException;\n+import javax.jms.ObjectMessage;\n+\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.api.extension.ExtendWith;\n+import org.mockito.InjectMocks;\n+import org.mockito.Mock;\n+import org.mockito.junit.jupiter.MockitoExtension;\n+import org.mockito.junit.jupiter.MockitoSettings;\n+import org.mockito.quality.Strictness;\n+import org.opensmartgridplatform.adapter.protocol.dlms.application.services.BundleService;\n+import org.opensmartgridplatform.adapter.protocol.dlms.application.services.DomainHelperService;\n+import org.opensmartgridplatform.adapter.protocol.dlms.application.services.ThrottlingService;\n+import org.opensmartgridplatform.adapter.protocol.dlms.domain.entities.DlmsDevice;\n+import org.opensmartgridplatform.adapter.protocol.dlms.domain.entities.DlmsDeviceBuilder;\n+import org.opensmartgridplatform.adapter.protocol.dlms.domain.factories.DlmsConnectionHelper;\n+import org.opensmartgridplatform.adapter.protocol.dlms.domain.factories.DlmsConnectionManager;\n+import org.opensmartgridplatform.adapter.protocol.dlms.exceptions.ConnectionException;\n+import org.opensmartgridplatform.adapter.protocol.dlms.exceptions.OsgpExceptionConverter;\n+import org.opensmartgridplatform.adapter.protocol.dlms.infra.messaging.DeviceResponseMessageSender;\n+import org.opensmartgridplatform.adapter.protocol.dlms.infra.messaging.DlmsMessageListener;\n+import org.opensmartgridplatform.adapter.protocol.dlms.infra.messaging.RetryHeaderFactory;\n+import org.opensmartgridplatform.dto.valueobjects.smartmetering.BundleMessagesRequestDto;\n+import org.opensmartgridplatform.shared.exceptionhandling.ComponentType;\n+import org.opensmartgridplatform.shared.exceptionhandling.OsgpException;\n+import org.opensmartgridplatform.shared.infra.jms.MessageMetadata;\n+import org.opensmartgridplatform.shared.infra.jms.MessageType;\n+\n+@ExtendWith(MockitoExtension.class)\n+@MockitoSettings(strictness = Strictness.LENIENT)\n+class BundleMessageProcessorTest {\n+\n+    @Mock\n+    private ObjectMessage message;\n+\n+    @Mock\n+    private OsgpExceptionConverter osgpExceptionConverter;\n+\n+    @Mock\n+    private RetryHeaderFactory retryHeaderFactory;\n+\n+    @Mock\n+    private DeviceResponseMessageSender responseMessageSender;\n+\n+    @Mock\n+    private DomainHelperService domainHelperService;\n+\n+    @Mock\n+    private ThrottlingService throttlingService;\n+\n+    @Mock\n+    private DlmsConnectionHelper dlmsConnectionHelper;\n+\n+    @Mock\n+    private BundleService bundleService;\n+\n+    @Mock\n+    private DlmsConnectionManager dlmsConnectionManager;\n+\n+    @Mock\n+    private DlmsMessageListener messageListener;\n+\n+    @InjectMocks\n+    private BundleMessageProcessor messageProcessor;\n+\n+    private DlmsDevice dlmsDevice = new DlmsDeviceBuilder().withHls5Active(true).build();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2e64ed1ac6a127e452e5b51ed121be9757c08f94"}, "originalPosition": 83}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ecfdfcc19e82cc4041e7ccd213f78c941b9d27a", "author": {"user": {"login": "jboon", "name": null}}, "url": "https://github.com/OSGP/open-smart-grid-platform/commit/4ecfdfcc19e82cc4041e7ccd213f78c941b9d27a", "committedDate": "2020-12-01T15:30:32Z", "message": "review comments processed unit test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyMDIyOTM1", "url": "https://github.com/OSGP/open-smart-grid-platform/pull/527#pullrequestreview-542022935", "createdAt": "2020-12-01T15:34:46Z", "commit": {"oid": "4ecfdfcc19e82cc4041e7ccd213f78c941b9d27a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3612, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}