{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMwMjUwNjU1", "number": 527, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxMzo1NTo0N1rOE_KS6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxNTowODo1MlrOE_Mo4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM0NjY0NDI2OnYy", "diffSide": "RIGHT", "path": "osgp/protocol-adapter-dlms/osgp-protocol-adapter-dlms/src/test/java/org/opensmartgridplatform/adapter/protocol/dlms/infra/messaging/processors/BundleMessageProcessorTest.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxMzo1NTo0N1rOH8to9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxNToyOToxOVrOH8yZDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzQyNDM3Mg==", "bodyText": "Why is this line necessary? Have you added unused mock elements by any change? It would be nicer without this line of code.", "url": "https://github.com/OSGP/open-smart-grid-platform/pull/527#discussion_r533424372", "createdAt": "2020-12-01T13:55:47Z", "author": {"login": "JelleHoffman"}, "path": "osgp/protocol-adapter-dlms/osgp-protocol-adapter-dlms/src/test/java/org/opensmartgridplatform/adapter/protocol/dlms/infra/messaging/processors/BundleMessageProcessorTest.java", "diffHunk": "@@ -0,0 +1,122 @@\n+/**\n+ * Copyright 2020 Alliander N.V.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file\n+ * except in compliance with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ */\n+package org.opensmartgridplatform.adapter.protocol.dlms.infra.messaging.processors;\n+\n+import static org.mockito.ArgumentMatchers.any;\n+import static org.mockito.Mockito.verify;\n+import static org.mockito.Mockito.when;\n+\n+import java.net.ConnectException;\n+\n+import javax.jms.JMSException;\n+import javax.jms.ObjectMessage;\n+\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.api.extension.ExtendWith;\n+import org.mockito.InjectMocks;\n+import org.mockito.Mock;\n+import org.mockito.junit.jupiter.MockitoExtension;\n+import org.mockito.junit.jupiter.MockitoSettings;\n+import org.mockito.quality.Strictness;\n+import org.opensmartgridplatform.adapter.protocol.dlms.application.services.BundleService;\n+import org.opensmartgridplatform.adapter.protocol.dlms.application.services.DomainHelperService;\n+import org.opensmartgridplatform.adapter.protocol.dlms.application.services.ThrottlingService;\n+import org.opensmartgridplatform.adapter.protocol.dlms.domain.entities.DlmsDevice;\n+import org.opensmartgridplatform.adapter.protocol.dlms.domain.entities.DlmsDeviceBuilder;\n+import org.opensmartgridplatform.adapter.protocol.dlms.domain.factories.DlmsConnectionHelper;\n+import org.opensmartgridplatform.adapter.protocol.dlms.domain.factories.DlmsConnectionManager;\n+import org.opensmartgridplatform.adapter.protocol.dlms.exceptions.ConnectionException;\n+import org.opensmartgridplatform.adapter.protocol.dlms.exceptions.OsgpExceptionConverter;\n+import org.opensmartgridplatform.adapter.protocol.dlms.infra.messaging.DeviceResponseMessageSender;\n+import org.opensmartgridplatform.adapter.protocol.dlms.infra.messaging.DlmsMessageListener;\n+import org.opensmartgridplatform.adapter.protocol.dlms.infra.messaging.RetryHeaderFactory;\n+import org.opensmartgridplatform.dto.valueobjects.smartmetering.BundleMessagesRequestDto;\n+import org.opensmartgridplatform.shared.exceptionhandling.ComponentType;\n+import org.opensmartgridplatform.shared.exceptionhandling.OsgpException;\n+import org.opensmartgridplatform.shared.infra.jms.MessageMetadata;\n+import org.opensmartgridplatform.shared.infra.jms.MessageType;\n+\n+@ExtendWith(MockitoExtension.class)\n+@MockitoSettings(strictness = Strictness.LENIENT)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2e64ed1ac6a127e452e5b51ed121be9757c08f94"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzQyNjAxMw==", "bodyText": "However it is not a must.", "url": "https://github.com/OSGP/open-smart-grid-platform/pull/527#discussion_r533426013", "createdAt": "2020-12-01T13:58:06Z", "author": {"login": "JelleHoffman"}, "path": "osgp/protocol-adapter-dlms/osgp-protocol-adapter-dlms/src/test/java/org/opensmartgridplatform/adapter/protocol/dlms/infra/messaging/processors/BundleMessageProcessorTest.java", "diffHunk": "@@ -0,0 +1,122 @@\n+/**\n+ * Copyright 2020 Alliander N.V.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file\n+ * except in compliance with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ */\n+package org.opensmartgridplatform.adapter.protocol.dlms.infra.messaging.processors;\n+\n+import static org.mockito.ArgumentMatchers.any;\n+import static org.mockito.Mockito.verify;\n+import static org.mockito.Mockito.when;\n+\n+import java.net.ConnectException;\n+\n+import javax.jms.JMSException;\n+import javax.jms.ObjectMessage;\n+\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.api.extension.ExtendWith;\n+import org.mockito.InjectMocks;\n+import org.mockito.Mock;\n+import org.mockito.junit.jupiter.MockitoExtension;\n+import org.mockito.junit.jupiter.MockitoSettings;\n+import org.mockito.quality.Strictness;\n+import org.opensmartgridplatform.adapter.protocol.dlms.application.services.BundleService;\n+import org.opensmartgridplatform.adapter.protocol.dlms.application.services.DomainHelperService;\n+import org.opensmartgridplatform.adapter.protocol.dlms.application.services.ThrottlingService;\n+import org.opensmartgridplatform.adapter.protocol.dlms.domain.entities.DlmsDevice;\n+import org.opensmartgridplatform.adapter.protocol.dlms.domain.entities.DlmsDeviceBuilder;\n+import org.opensmartgridplatform.adapter.protocol.dlms.domain.factories.DlmsConnectionHelper;\n+import org.opensmartgridplatform.adapter.protocol.dlms.domain.factories.DlmsConnectionManager;\n+import org.opensmartgridplatform.adapter.protocol.dlms.exceptions.ConnectionException;\n+import org.opensmartgridplatform.adapter.protocol.dlms.exceptions.OsgpExceptionConverter;\n+import org.opensmartgridplatform.adapter.protocol.dlms.infra.messaging.DeviceResponseMessageSender;\n+import org.opensmartgridplatform.adapter.protocol.dlms.infra.messaging.DlmsMessageListener;\n+import org.opensmartgridplatform.adapter.protocol.dlms.infra.messaging.RetryHeaderFactory;\n+import org.opensmartgridplatform.dto.valueobjects.smartmetering.BundleMessagesRequestDto;\n+import org.opensmartgridplatform.shared.exceptionhandling.ComponentType;\n+import org.opensmartgridplatform.shared.exceptionhandling.OsgpException;\n+import org.opensmartgridplatform.shared.infra.jms.MessageMetadata;\n+import org.opensmartgridplatform.shared.infra.jms.MessageType;\n+\n+@ExtendWith(MockitoExtension.class)\n+@MockitoSettings(strictness = Strictness.LENIENT)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzQyNDM3Mg=="}, "originalCommit": {"oid": "2e64ed1ac6a127e452e5b51ed121be9757c08f94"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzUwMjIyMw==", "bodyText": "No, good find, I forgot to remove this.", "url": "https://github.com/OSGP/open-smart-grid-platform/pull/527#discussion_r533502223", "createdAt": "2020-12-01T15:29:19Z", "author": {"login": "jboon"}, "path": "osgp/protocol-adapter-dlms/osgp-protocol-adapter-dlms/src/test/java/org/opensmartgridplatform/adapter/protocol/dlms/infra/messaging/processors/BundleMessageProcessorTest.java", "diffHunk": "@@ -0,0 +1,122 @@\n+/**\n+ * Copyright 2020 Alliander N.V.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file\n+ * except in compliance with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ */\n+package org.opensmartgridplatform.adapter.protocol.dlms.infra.messaging.processors;\n+\n+import static org.mockito.ArgumentMatchers.any;\n+import static org.mockito.Mockito.verify;\n+import static org.mockito.Mockito.when;\n+\n+import java.net.ConnectException;\n+\n+import javax.jms.JMSException;\n+import javax.jms.ObjectMessage;\n+\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.api.extension.ExtendWith;\n+import org.mockito.InjectMocks;\n+import org.mockito.Mock;\n+import org.mockito.junit.jupiter.MockitoExtension;\n+import org.mockito.junit.jupiter.MockitoSettings;\n+import org.mockito.quality.Strictness;\n+import org.opensmartgridplatform.adapter.protocol.dlms.application.services.BundleService;\n+import org.opensmartgridplatform.adapter.protocol.dlms.application.services.DomainHelperService;\n+import org.opensmartgridplatform.adapter.protocol.dlms.application.services.ThrottlingService;\n+import org.opensmartgridplatform.adapter.protocol.dlms.domain.entities.DlmsDevice;\n+import org.opensmartgridplatform.adapter.protocol.dlms.domain.entities.DlmsDeviceBuilder;\n+import org.opensmartgridplatform.adapter.protocol.dlms.domain.factories.DlmsConnectionHelper;\n+import org.opensmartgridplatform.adapter.protocol.dlms.domain.factories.DlmsConnectionManager;\n+import org.opensmartgridplatform.adapter.protocol.dlms.exceptions.ConnectionException;\n+import org.opensmartgridplatform.adapter.protocol.dlms.exceptions.OsgpExceptionConverter;\n+import org.opensmartgridplatform.adapter.protocol.dlms.infra.messaging.DeviceResponseMessageSender;\n+import org.opensmartgridplatform.adapter.protocol.dlms.infra.messaging.DlmsMessageListener;\n+import org.opensmartgridplatform.adapter.protocol.dlms.infra.messaging.RetryHeaderFactory;\n+import org.opensmartgridplatform.dto.valueobjects.smartmetering.BundleMessagesRequestDto;\n+import org.opensmartgridplatform.shared.exceptionhandling.ComponentType;\n+import org.opensmartgridplatform.shared.exceptionhandling.OsgpException;\n+import org.opensmartgridplatform.shared.infra.jms.MessageMetadata;\n+import org.opensmartgridplatform.shared.infra.jms.MessageType;\n+\n+@ExtendWith(MockitoExtension.class)\n+@MockitoSettings(strictness = Strictness.LENIENT)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzQyNDM3Mg=="}, "originalCommit": {"oid": "2e64ed1ac6a127e452e5b51ed121be9757c08f94"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM0NzAyODE2OnYy", "diffSide": "RIGHT", "path": "osgp/protocol-adapter-dlms/osgp-protocol-adapter-dlms/src/test/java/org/opensmartgridplatform/adapter/protocol/dlms/infra/messaging/processors/BundleMessageProcessorTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxNTowODo1MlrOH8xY8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxNToyOTozNFrOH8yZ6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzQ4NTgwOA==", "bodyText": "minor: maybe put this in the setUp method so all init stuff is in the same place.", "url": "https://github.com/OSGP/open-smart-grid-platform/pull/527#discussion_r533485808", "createdAt": "2020-12-01T15:08:52Z", "author": {"login": "coendamen"}, "path": "osgp/protocol-adapter-dlms/osgp-protocol-adapter-dlms/src/test/java/org/opensmartgridplatform/adapter/protocol/dlms/infra/messaging/processors/BundleMessageProcessorTest.java", "diffHunk": "@@ -0,0 +1,122 @@\n+/**\n+ * Copyright 2020 Alliander N.V.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file\n+ * except in compliance with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ */\n+package org.opensmartgridplatform.adapter.protocol.dlms.infra.messaging.processors;\n+\n+import static org.mockito.ArgumentMatchers.any;\n+import static org.mockito.Mockito.verify;\n+import static org.mockito.Mockito.when;\n+\n+import java.net.ConnectException;\n+\n+import javax.jms.JMSException;\n+import javax.jms.ObjectMessage;\n+\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.api.extension.ExtendWith;\n+import org.mockito.InjectMocks;\n+import org.mockito.Mock;\n+import org.mockito.junit.jupiter.MockitoExtension;\n+import org.mockito.junit.jupiter.MockitoSettings;\n+import org.mockito.quality.Strictness;\n+import org.opensmartgridplatform.adapter.protocol.dlms.application.services.BundleService;\n+import org.opensmartgridplatform.adapter.protocol.dlms.application.services.DomainHelperService;\n+import org.opensmartgridplatform.adapter.protocol.dlms.application.services.ThrottlingService;\n+import org.opensmartgridplatform.adapter.protocol.dlms.domain.entities.DlmsDevice;\n+import org.opensmartgridplatform.adapter.protocol.dlms.domain.entities.DlmsDeviceBuilder;\n+import org.opensmartgridplatform.adapter.protocol.dlms.domain.factories.DlmsConnectionHelper;\n+import org.opensmartgridplatform.adapter.protocol.dlms.domain.factories.DlmsConnectionManager;\n+import org.opensmartgridplatform.adapter.protocol.dlms.exceptions.ConnectionException;\n+import org.opensmartgridplatform.adapter.protocol.dlms.exceptions.OsgpExceptionConverter;\n+import org.opensmartgridplatform.adapter.protocol.dlms.infra.messaging.DeviceResponseMessageSender;\n+import org.opensmartgridplatform.adapter.protocol.dlms.infra.messaging.DlmsMessageListener;\n+import org.opensmartgridplatform.adapter.protocol.dlms.infra.messaging.RetryHeaderFactory;\n+import org.opensmartgridplatform.dto.valueobjects.smartmetering.BundleMessagesRequestDto;\n+import org.opensmartgridplatform.shared.exceptionhandling.ComponentType;\n+import org.opensmartgridplatform.shared.exceptionhandling.OsgpException;\n+import org.opensmartgridplatform.shared.infra.jms.MessageMetadata;\n+import org.opensmartgridplatform.shared.infra.jms.MessageType;\n+\n+@ExtendWith(MockitoExtension.class)\n+@MockitoSettings(strictness = Strictness.LENIENT)\n+class BundleMessageProcessorTest {\n+\n+    @Mock\n+    private ObjectMessage message;\n+\n+    @Mock\n+    private OsgpExceptionConverter osgpExceptionConverter;\n+\n+    @Mock\n+    private RetryHeaderFactory retryHeaderFactory;\n+\n+    @Mock\n+    private DeviceResponseMessageSender responseMessageSender;\n+\n+    @Mock\n+    private DomainHelperService domainHelperService;\n+\n+    @Mock\n+    private ThrottlingService throttlingService;\n+\n+    @Mock\n+    private DlmsConnectionHelper dlmsConnectionHelper;\n+\n+    @Mock\n+    private BundleService bundleService;\n+\n+    @Mock\n+    private DlmsConnectionManager dlmsConnectionManager;\n+\n+    @Mock\n+    private DlmsMessageListener messageListener;\n+\n+    @InjectMocks\n+    private BundleMessageProcessor messageProcessor;\n+\n+    private DlmsDevice dlmsDevice = new DlmsDeviceBuilder().withHls5Active(true).build();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2e64ed1ac6a127e452e5b51ed121be9757c08f94"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzUwMjQ0MA==", "bodyText": "yes", "url": "https://github.com/OSGP/open-smart-grid-platform/pull/527#discussion_r533502440", "createdAt": "2020-12-01T15:29:34Z", "author": {"login": "jboon"}, "path": "osgp/protocol-adapter-dlms/osgp-protocol-adapter-dlms/src/test/java/org/opensmartgridplatform/adapter/protocol/dlms/infra/messaging/processors/BundleMessageProcessorTest.java", "diffHunk": "@@ -0,0 +1,122 @@\n+/**\n+ * Copyright 2020 Alliander N.V.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file\n+ * except in compliance with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ */\n+package org.opensmartgridplatform.adapter.protocol.dlms.infra.messaging.processors;\n+\n+import static org.mockito.ArgumentMatchers.any;\n+import static org.mockito.Mockito.verify;\n+import static org.mockito.Mockito.when;\n+\n+import java.net.ConnectException;\n+\n+import javax.jms.JMSException;\n+import javax.jms.ObjectMessage;\n+\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+import org.junit.jupiter.api.extension.ExtendWith;\n+import org.mockito.InjectMocks;\n+import org.mockito.Mock;\n+import org.mockito.junit.jupiter.MockitoExtension;\n+import org.mockito.junit.jupiter.MockitoSettings;\n+import org.mockito.quality.Strictness;\n+import org.opensmartgridplatform.adapter.protocol.dlms.application.services.BundleService;\n+import org.opensmartgridplatform.adapter.protocol.dlms.application.services.DomainHelperService;\n+import org.opensmartgridplatform.adapter.protocol.dlms.application.services.ThrottlingService;\n+import org.opensmartgridplatform.adapter.protocol.dlms.domain.entities.DlmsDevice;\n+import org.opensmartgridplatform.adapter.protocol.dlms.domain.entities.DlmsDeviceBuilder;\n+import org.opensmartgridplatform.adapter.protocol.dlms.domain.factories.DlmsConnectionHelper;\n+import org.opensmartgridplatform.adapter.protocol.dlms.domain.factories.DlmsConnectionManager;\n+import org.opensmartgridplatform.adapter.protocol.dlms.exceptions.ConnectionException;\n+import org.opensmartgridplatform.adapter.protocol.dlms.exceptions.OsgpExceptionConverter;\n+import org.opensmartgridplatform.adapter.protocol.dlms.infra.messaging.DeviceResponseMessageSender;\n+import org.opensmartgridplatform.adapter.protocol.dlms.infra.messaging.DlmsMessageListener;\n+import org.opensmartgridplatform.adapter.protocol.dlms.infra.messaging.RetryHeaderFactory;\n+import org.opensmartgridplatform.dto.valueobjects.smartmetering.BundleMessagesRequestDto;\n+import org.opensmartgridplatform.shared.exceptionhandling.ComponentType;\n+import org.opensmartgridplatform.shared.exceptionhandling.OsgpException;\n+import org.opensmartgridplatform.shared.infra.jms.MessageMetadata;\n+import org.opensmartgridplatform.shared.infra.jms.MessageType;\n+\n+@ExtendWith(MockitoExtension.class)\n+@MockitoSettings(strictness = Strictness.LENIENT)\n+class BundleMessageProcessorTest {\n+\n+    @Mock\n+    private ObjectMessage message;\n+\n+    @Mock\n+    private OsgpExceptionConverter osgpExceptionConverter;\n+\n+    @Mock\n+    private RetryHeaderFactory retryHeaderFactory;\n+\n+    @Mock\n+    private DeviceResponseMessageSender responseMessageSender;\n+\n+    @Mock\n+    private DomainHelperService domainHelperService;\n+\n+    @Mock\n+    private ThrottlingService throttlingService;\n+\n+    @Mock\n+    private DlmsConnectionHelper dlmsConnectionHelper;\n+\n+    @Mock\n+    private BundleService bundleService;\n+\n+    @Mock\n+    private DlmsConnectionManager dlmsConnectionManager;\n+\n+    @Mock\n+    private DlmsMessageListener messageListener;\n+\n+    @InjectMocks\n+    private BundleMessageProcessor messageProcessor;\n+\n+    private DlmsDevice dlmsDevice = new DlmsDeviceBuilder().withHls5Active(true).build();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzQ4NTgwOA=="}, "originalCommit": {"oid": "2e64ed1ac6a127e452e5b51ed121be9757c08f94"}, "originalPosition": 83}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3488, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}