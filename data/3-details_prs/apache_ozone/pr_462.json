{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY0Njk5MDEz", "number": 462, "title": " HDDS-2913 Update config names and CLI for multi-raft feature.", "bodyText": "What changes were proposed in this pull request?\n\nUpdate config names. 2. fix typos. 3. fix logging. 4. Update datanode list CLI.\nUpdate creationTimestamp to be Instant.\n\nRelated to #HDDS-1564\n(Please fill in changes proposed in this fix)\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-2913\n(Please create an issue in ASF JIRA before opening a pull request,\nand you need to set the title of the pull request which starts with\nthe corresponding JIRA issue number. (e.g. HDDS-XXXX. Fix a typo in YYY.)\nPlease replace this section with the link to the Apache JIRA)\nHow was this patch tested?\nNo needed\n(Please explain how this patch was tested. Ex: unit tests, manual tests)\n(If this patch involves UI changes, please attach a screen-shot; otherwise, remove this)", "createdAt": "2020-01-20T08:09:27Z", "url": "https://github.com/apache/ozone/pull/462", "merged": true, "mergeCommit": {"oid": "3123cfa6ec96b267bb634b166e313c40ad8f7893"}, "closed": true, "closedAt": "2020-01-27T18:19:34Z", "author": {"login": "timmylicheng"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb8IFcHABqjI5NjE5NjgzMTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-ImrJgBqjI5Nzk5MjU4ODc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "275129a6fcde2ba8c6b6ebf223abbf5255f1c5ca", "author": {"user": {"login": "timmylicheng", "name": "Li Cheng"}}, "url": "https://github.com/apache/ozone/commit/275129a6fcde2ba8c6b6ebf223abbf5255f1c5ca", "committedDate": "2020-01-20T08:06:39Z", "message": " HDDS-2913 Address review feedback for HDDS-1564.\n1. Update config names. 2. fix typos. 3. fix logging. 4. Update datanode list CLI."}, "afterCommit": {"oid": "6935d463a6ee6fb8e6d9aeb41b5fc53b705fb11b", "author": {"user": {"login": "timmylicheng", "name": "Li Cheng"}}, "url": "https://github.com/apache/ozone/commit/6935d463a6ee6fb8e6d9aeb41b5fc53b705fb11b", "committedDate": "2020-01-20T08:15:26Z", "message": " HDDS-2913 Address review feedback for HDDS-1564.\n1. Update config names. 2. fix typos. 3. fix logging. 4. Update datanode list CLI."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6935d463a6ee6fb8e6d9aeb41b5fc53b705fb11b", "author": {"user": {"login": "timmylicheng", "name": "Li Cheng"}}, "url": "https://github.com/apache/ozone/commit/6935d463a6ee6fb8e6d9aeb41b5fc53b705fb11b", "committedDate": "2020-01-20T08:15:26Z", "message": " HDDS-2913 Address review feedback for HDDS-1564.\n1. Update config names. 2. fix typos. 3. fix logging. 4. Update datanode list CLI."}, "afterCommit": {"oid": "b25939123e8f3a597e51d4a2955b9e495cd8911a", "author": {"user": {"login": "timmylicheng", "name": "Li Cheng"}}, "url": "https://github.com/apache/ozone/commit/b25939123e8f3a597e51d4a2955b9e495cd8911a", "committedDate": "2020-01-20T09:00:11Z", "message": " HDDS-2913 Address review feedback for HDDS-1564.\n1. Update config names. 2. fix typos. 3. fix logging. 4. Update datanode list CLI.\n5. Consider DORMANT pipeline in encodeNodeId."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MDQxMTE1", "url": "https://github.com/apache/ozone/pull/462#pullrequestreview-346041115", "createdAt": "2020-01-21T17:02:27Z", "commit": {"oid": "b25939123e8f3a597e51d4a2955b9e495cd8911a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNzowMjoyN1rOFgBtYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNzowMjoyN1rOFgBtYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTEyNjc1NA==", "bodyText": "Can we change \"ozone.scm.pipeline.number.limit\" to \"ozone.scm.pipeline.limit\"?", "url": "https://github.com/apache/ozone/pull/462#discussion_r369126754", "createdAt": "2020-01-21T17:02:27Z", "author": {"login": "xiaoyuyao"}, "path": "hadoop-hdds/common/src/main/java/org/apache/hadoop/hdds/scm/ScmConfigKeys.java", "diffHunk": "@@ -322,17 +322,17 @@\n   public static final int OZONE_SCM_PIPELINE_OWNER_CONTAINER_COUNT_DEFAULT = 3;\n   // Pipeline placement policy:\n   // the max number of pipelines can a single datanode be engaged in.\n-  public static final String OZONE_DATANODE_MAX_PIPELINE_ENGAGEMENT =\n-          \"ozone.scm.datanode.max.pipeline.engagement\";\n+  public static final String OZONE_DATANODE_PIPELINE_LIMIT =\n+          \"ozone.datanode.pipeline.limit\";\n   // Setting to zero by default means this limit doesn't take effect.\n-  public static final int OZONE_DATANODE_MAX_PIPELINE_ENGAGEMENT_DEFAULT = 2;\n+  public static final int OZONE_DATANODE_PIPELINE_LIMIT_DEFAULT = 2;\n \n   // Upper limit for how many pipelines can be created.\n   // Only for test purpose now.\n-  public static final String OZONE_SCM_PIPELINE_NUMBER_LIMIT =\n+  public static final String OZONE_SCM_RATIS_PIPELINE_LIMIT =\n       \"ozone.scm.pipeline.number.limit\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b25939123e8f3a597e51d4a2955b9e495cd8911a"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MDQxODMz", "url": "https://github.com/apache/ozone/pull/462#pullrequestreview-346041833", "createdAt": "2020-01-21T17:03:28Z", "commit": {"oid": "b25939123e8f3a597e51d4a2955b9e495cd8911a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNzowMzoyOFrOFgBvjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNzowMzoyOFrOFgBvjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTEyNzMwOQ==", "bodyText": "Can we update the comment here:\nUpper limit for how many pipelines can be created across the cluster nodes managed by SCM.", "url": "https://github.com/apache/ozone/pull/462#discussion_r369127309", "createdAt": "2020-01-21T17:03:28Z", "author": {"login": "xiaoyuyao"}, "path": "hadoop-hdds/common/src/main/java/org/apache/hadoop/hdds/scm/ScmConfigKeys.java", "diffHunk": "@@ -322,17 +322,17 @@\n   public static final int OZONE_SCM_PIPELINE_OWNER_CONTAINER_COUNT_DEFAULT = 3;\n   // Pipeline placement policy:\n   // the max number of pipelines can a single datanode be engaged in.\n-  public static final String OZONE_DATANODE_MAX_PIPELINE_ENGAGEMENT =\n-          \"ozone.scm.datanode.max.pipeline.engagement\";\n+  public static final String OZONE_DATANODE_PIPELINE_LIMIT =\n+          \"ozone.datanode.pipeline.limit\";\n   // Setting to zero by default means this limit doesn't take effect.\n-  public static final int OZONE_DATANODE_MAX_PIPELINE_ENGAGEMENT_DEFAULT = 2;\n+  public static final int OZONE_DATANODE_PIPELINE_LIMIT_DEFAULT = 2;\n \n   // Upper limit for how many pipelines can be created.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b25939123e8f3a597e51d4a2955b9e495cd8911a"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MDQyNDIz", "url": "https://github.com/apache/ozone/pull/462#pullrequestreview-346042423", "createdAt": "2020-01-21T17:04:18Z", "commit": {"oid": "b25939123e8f3a597e51d4a2955b9e495cd8911a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNzowNDoxOVrOFgBxWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMVQxNzowNDoxOVrOFgBxWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTEyNzc3MQ==", "bodyText": "Can we update the comments to:\nUpper limit for how many pipelines a datanode can engage in?", "url": "https://github.com/apache/ozone/pull/462#discussion_r369127771", "createdAt": "2020-01-21T17:04:19Z", "author": {"login": "xiaoyuyao"}, "path": "hadoop-hdds/common/src/main/java/org/apache/hadoop/hdds/scm/ScmConfigKeys.java", "diffHunk": "@@ -322,17 +322,17 @@\n   public static final int OZONE_SCM_PIPELINE_OWNER_CONTAINER_COUNT_DEFAULT = 3;\n   // Pipeline placement policy:\n   // the max number of pipelines can a single datanode be engaged in.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b25939123e8f3a597e51d4a2955b9e495cd8911a"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2MDQ1OTYx", "url": "https://github.com/apache/ozone/pull/462#pullrequestreview-346045961", "createdAt": "2020-01-21T17:09:29Z", "commit": {"oid": "b25939123e8f3a597e51d4a2955b9e495cd8911a"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b25939123e8f3a597e51d4a2955b9e495cd8911a", "author": {"user": {"login": "timmylicheng", "name": "Li Cheng"}}, "url": "https://github.com/apache/ozone/commit/b25939123e8f3a597e51d4a2955b9e495cd8911a", "committedDate": "2020-01-20T09:00:11Z", "message": " HDDS-2913 Address review feedback for HDDS-1564.\n1. Update config names. 2. fix typos. 3. fix logging. 4. Update datanode list CLI.\n5. Consider DORMANT pipeline in encodeNodeId."}, "afterCommit": {"oid": "8dc92f80d38b3f21a7b0f60a36ff780c7747f4c5", "author": {"user": {"login": "timmylicheng", "name": "Li Cheng"}}, "url": "https://github.com/apache/ozone/commit/8dc92f80d38b3f21a7b0f60a36ff780c7747f4c5", "committedDate": "2020-01-22T06:50:53Z", "message": " HDDS-2913 Address review feedback for HDDS-1564.\n1. Update config names. 2. fix typos. 3. fix logging. 4. Update datanode list CLI.\n5. Consider DORMANT pipeline in encodeNodeId."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5135982eeba895c9e97012f24cf67360a3f1a764", "author": {"user": {"login": "timmylicheng", "name": "Li Cheng"}}, "url": "https://github.com/apache/ozone/commit/5135982eeba895c9e97012f24cf67360a3f1a764", "committedDate": "2020-01-22T07:12:41Z", "message": " HDDS-2913 Address review feedback for HDDS-1564.\n1. Update config names. 2. fix typos. 3. fix logging. 4. Update datanode list CLI.\n5. Consider DORMANT pipeline in encodeNodeId."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8dc92f80d38b3f21a7b0f60a36ff780c7747f4c5", "author": {"user": {"login": "timmylicheng", "name": "Li Cheng"}}, "url": "https://github.com/apache/ozone/commit/8dc92f80d38b3f21a7b0f60a36ff780c7747f4c5", "committedDate": "2020-01-22T06:50:53Z", "message": " HDDS-2913 Address review feedback for HDDS-1564.\n1. Update config names. 2. fix typos. 3. fix logging. 4. Update datanode list CLI.\n5. Consider DORMANT pipeline in encodeNodeId."}, "afterCommit": {"oid": "5135982eeba895c9e97012f24cf67360a3f1a764", "author": {"user": {"login": "timmylicheng", "name": "Li Cheng"}}, "url": "https://github.com/apache/ozone/commit/5135982eeba895c9e97012f24cf67360a3f1a764", "committedDate": "2020-01-22T07:12:41Z", "message": " HDDS-2913 Address review feedback for HDDS-1564.\n1. Update config names. 2. fix typos. 3. fix logging. 4. Update datanode list CLI.\n5. Consider DORMANT pipeline in encodeNodeId."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MjUyOTUy", "url": "https://github.com/apache/ozone/pull/462#pullrequestreview-348252952", "createdAt": "2020-01-24T22:08:29Z", "commit": {"oid": "a961d158374ea510b3b9140aa5aa4b6deb5b53c9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMjowODoyOVrOFhrwvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMjowODoyOVrOFhrwvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg2NDMxOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  \"ozone.ratis.scm.pipeline.limit\";\n          \n          \n            \n                  \"ozone.scm.ratis.pipeline.limit\";", "url": "https://github.com/apache/ozone/pull/462#discussion_r370864319", "createdAt": "2020-01-24T22:08:29Z", "author": {"login": "xiaoyuyao"}, "path": "hadoop-hdds/common/src/main/java/org/apache/hadoop/hdds/scm/ScmConfigKeys.java", "diffHunk": "@@ -321,18 +321,18 @@\n       \"ozone.scm.pipeline.owner.container.count\";\n   public static final int OZONE_SCM_PIPELINE_OWNER_CONTAINER_COUNT_DEFAULT = 3;\n   // Pipeline placement policy:\n-  // the max number of pipelines can a single datanode be engaged in.\n-  public static final String OZONE_DATANODE_MAX_PIPELINE_ENGAGEMENT =\n-          \"ozone.scm.datanode.max.pipeline.engagement\";\n-  // Setting to zero by default means this limit doesn't take effect.\n-  public static final int OZONE_DATANODE_MAX_PIPELINE_ENGAGEMENT_DEFAULT = 2;\n+  // Upper limit for how many pipelines a datanode can engage in.\n+  public static final String OZONE_DATANODE_PIPELINE_LIMIT =\n+          \"ozone.datanode.pipeline.limit\";\n+  public static final int OZONE_DATANODE_PIPELINE_LIMIT_DEFAULT = 2;\n \n-  // Upper limit for how many pipelines can be created.\n+  // Upper limit for how many pipelines can be created\n+  // across the cluster nodes managed by SCM.\n   // Only for test purpose now.\n-  public static final String OZONE_SCM_PIPELINE_NUMBER_LIMIT =\n-      \"ozone.scm.pipeline.number.limit\";\n+  public static final String OZONE_SCM_RATIS_PIPELINE_LIMIT =\n+      \"ozone.ratis.scm.pipeline.limit\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a961d158374ea510b3b9140aa5aa4b6deb5b53c9"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MjUzODM1", "url": "https://github.com/apache/ozone/pull/462#pullrequestreview-348253835", "createdAt": "2020-01-24T22:10:35Z", "commit": {"oid": "a961d158374ea510b3b9140aa5aa4b6deb5b53c9"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6ec9f7380b56b5c7ee63160e84debedc0259607", "author": {"user": {"login": "timmylicheng", "name": "Li Cheng"}}, "url": "https://github.com/apache/ozone/commit/c6ec9f7380b56b5c7ee63160e84debedc0259607", "committedDate": "2020-01-26T13:59:25Z", "message": "Updated config name for ratis pipeline limit."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a961d158374ea510b3b9140aa5aa4b6deb5b53c9", "author": {"user": {"login": "timmylicheng", "name": "Li Cheng"}}, "url": "https://github.com/apache/ozone/commit/a961d158374ea510b3b9140aa5aa4b6deb5b53c9", "committedDate": "2020-01-22T07:15:08Z", "message": "Updated config name for ratis pipeline limit."}, "afterCommit": {"oid": "c6ec9f7380b56b5c7ee63160e84debedc0259607", "author": {"user": {"login": "timmylicheng", "name": "Li Cheng"}}, "url": "https://github.com/apache/ozone/commit/c6ec9f7380b56b5c7ee63160e84debedc0259607", "committedDate": "2020-01-26T13:59:25Z", "message": "Updated config name for ratis pipeline limit."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3704, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}