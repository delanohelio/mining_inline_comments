{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxNjY3OTc3", "number": 436, "title": "HDDS-2875. Add a config in ozone to tune max outstanding requests in \u2026", "bodyText": "\u2026raft client.\nWhat changes were proposed in this pull request?\nAdd a config to tune the config value of \"raft.client.async.outstanding-requests.max\" config in raft client.\nThere is a property scm.container.client.max.outstanding.requests but this is used to set outStandingAppendsMax, but the config of this is mentioned as the \"Controls the maximum number of outstanding async requests that can be handled by the Standalone as well as Ratis client\". So, I removed this from ScmClientConfig, and created a new class for this property with prefix dfs.ratis.client to be consistent with other ratis client properties. And used the same for outStandingAppendsMax as before, not sure this is the correct way, but to keep same with current code, used it.\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-2875\nPlease replace this section with the link to the Apache JIRA)\nHow was this patch tested?\nUT and acceptance test run.", "createdAt": "2020-01-11T00:04:13Z", "url": "https://github.com/apache/ozone/pull/436", "merged": true, "mergeCommit": {"oid": "883a662d5587ec46cd634df28f5dc357ad92aaf6"}, "closed": true, "closedAt": "2020-01-16T15:23:25Z", "author": {"login": "bharatviswa504"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb54zr2gFqTM0MTcwNzE3NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb67y6qgFqTM0Mzk5MzI1Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNzA3MTc1", "url": "https://github.com/apache/ozone/pull/436#pullrequestreview-341707175", "createdAt": "2020-01-13T09:13:35Z", "commit": {"oid": "16914f436a01df114d67b118c8411d06c5b1c790"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QwOToxMzozNVrOFcwgnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QwOToxNjoyNlrOFcwk5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTY5OTIyOQ==", "bodyText": "I think we can remove this setter. This is used by GrpcOutputStream in ratis which is not used by ozone.", "url": "https://github.com/apache/ozone/pull/436#discussion_r365699229", "createdAt": "2020-01-13T09:13:35Z", "author": {"login": "lokeshj1703"}, "path": "hadoop-hdds/common/src/main/java/org/apache/hadoop/hdds/ratis/RatisHelper.java", "diffHunk": "@@ -206,6 +206,10 @@ static RaftClient newRaftClient(RpcType rpcType, RaftPeerId leader,\n     GrpcConfigKeys.OutputStream.setOutstandingAppendsMax(properties,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "16914f436a01df114d67b118c8411d06c5b1c790"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTcwMDMyNw==", "bodyText": "I dont think we have a corresponding config in ozone-default.xml.", "url": "https://github.com/apache/ozone/pull/436#discussion_r365700327", "createdAt": "2020-01-13T09:16:26Z", "author": {"login": "lokeshj1703"}, "path": "hadoop-hdds/client/src/main/java/org/apache/hadoop/hdds/scm/XceiverClientManager.java", "diffHunk": "@@ -345,10 +337,30 @@ public void setMaxSize(int maxSize) {\n       this.maxSize = maxSize;\n     }\n \n+  }\n+\n+  /**\n+   * Configuration for ratis client.\n+   */\n+  @ConfigGroup(prefix = \"dfs.ratis.client\")\n+  public class DFSRatisClientConfig {\n+\n+    @Config(key = \"async.max.outstanding.requests\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "16914f436a01df114d67b118c8411d06c5b1c790"}, "originalPosition": 36}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNzEwNTg4", "url": "https://github.com/apache/ozone/pull/436#pullrequestreview-341710588", "createdAt": "2020-01-13T09:20:15Z", "commit": {"oid": "16914f436a01df114d67b118c8411d06c5b1c790"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a8a0ea7e6e64573027b026606ac50543499e03c", "author": {"user": {"login": "bharatviswa504", "name": "Bharat Viswanadham"}}, "url": "https://github.com/apache/ozone/commit/4a8a0ea7e6e64573027b026606ac50543499e03c", "committedDate": "2020-01-14T20:47:28Z", "message": "HDDS-2875. Add a config in ozone to tune max outstanding requests in raft client."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea217c7df5c7cc1741f6bd5fa2626256aa3a751c", "author": {"user": {"login": "bharatviswa504", "name": "Bharat Viswanadham"}}, "url": "https://github.com/apache/ozone/commit/ea217c7df5c7cc1741f6bd5fa2626256aa3a751c", "committedDate": "2020-01-14T23:03:35Z", "message": "fix review comments and test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "16914f436a01df114d67b118c8411d06c5b1c790", "author": {"user": {"login": "bharatviswa504", "name": "Bharat Viswanadham"}}, "url": "https://github.com/apache/ozone/commit/16914f436a01df114d67b118c8411d06c5b1c790", "committedDate": "2020-01-10T23:58:25Z", "message": "HDDS-2875. Add a config in ozone to tune max outstanding requests in raft client."}, "afterCommit": {"oid": "ea217c7df5c7cc1741f6bd5fa2626256aa3a751c", "author": {"user": {"login": "bharatviswa504", "name": "Bharat Viswanadham"}}, "url": "https://github.com/apache/ozone/commit/ea217c7df5c7cc1741f6bd5fa2626256aa3a751c", "committedDate": "2020-01-14T23:03:35Z", "message": "fix review comments and test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQzOTkzMjU2", "url": "https://github.com/apache/ozone/pull/436#pullrequestreview-343993256", "createdAt": "2020-01-16T15:22:33Z", "commit": {"oid": "ea217c7df5c7cc1741f6bd5fa2626256aa3a751c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3926, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}