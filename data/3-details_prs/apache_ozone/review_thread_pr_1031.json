{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI5MDA1Mzk0", "number": 1031, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQwMzo0NToxMVrOEDSsdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQwMzo0NToxMVrOEDSsdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxODg3NDc5OnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/client/src/main/java/org/apache/hadoop/ozone/client/rpc/RpcClient.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQwMzo0NToxMVrOGgObKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQwMzo1MDoxNVrOGgOekw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQ0Mzk0NQ==", "bodyText": "how about\ncaCertPem = ozoneManagerClient.getCaCertificate();\n\nonly invoke when security is enabled.", "url": "https://github.com/apache/ozone/pull/1031#discussion_r436443945", "createdAt": "2020-06-08T03:45:11Z", "author": {"login": "GlenGeng"}, "path": "hadoop-ozone/client/src/main/java/org/apache/hadoop/ozone/client/rpc/RpcClient.java", "diffHunk": "@@ -170,10 +169,10 @@ public RpcClient(ConfigurationSource conf, String omServiceId)\n         OzoneManagerProtocol.class, conf\n     );\n     dtService = omTransport.getDelegationTokenService();\n-    ServiceInfoEx serviceInfoEx = ozoneManagerClient.getServiceInfo();\n+    String certificate = ozoneManagerClient.getCaCertificate();\n     String caCertPem = null;\n     if (OzoneSecurityUtil.isSecurityEnabled(conf)) {\n-      caCertPem = serviceInfoEx.getCaCertificate();\n+      caCertPem = certificate;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e11bb45bb0ecc7396bd8e217b8c3555b55623eb"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQ0NDgxOQ==", "bodyText": "CI does not passed if we do this, maybe CI want ozoneManagerClient.getCaCertificate throw exception even if security is not enabled. I will find the reason.", "url": "https://github.com/apache/ozone/pull/1031#discussion_r436444819", "createdAt": "2020-06-08T03:50:15Z", "author": {"login": "runzhiwang"}, "path": "hadoop-ozone/client/src/main/java/org/apache/hadoop/ozone/client/rpc/RpcClient.java", "diffHunk": "@@ -170,10 +169,10 @@ public RpcClient(ConfigurationSource conf, String omServiceId)\n         OzoneManagerProtocol.class, conf\n     );\n     dtService = omTransport.getDelegationTokenService();\n-    ServiceInfoEx serviceInfoEx = ozoneManagerClient.getServiceInfo();\n+    String certificate = ozoneManagerClient.getCaCertificate();\n     String caCertPem = null;\n     if (OzoneSecurityUtil.isSecurityEnabled(conf)) {\n-      caCertPem = serviceInfoEx.getCaCertificate();\n+      caCertPem = certificate;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQ0Mzk0NQ=="}, "originalCommit": {"oid": "5e11bb45bb0ecc7396bd8e217b8c3555b55623eb"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4232, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}