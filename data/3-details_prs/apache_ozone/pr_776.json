{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5ODcwNzQy", "number": 776, "title": "HDDS-3348. scmcli container info command shows the wrong container state.", "bodyText": "What changes were proposed in this pull request?\nContainer State from SCM is displayed in output of scmcli container info command\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-3348\nHow was this patch tested?\nThe output was manually checked.", "createdAt": "2020-04-06T19:53:59Z", "url": "https://github.com/apache/ozone/pull/776", "merged": true, "mergeCommit": {"oid": "de30b3788d3211c2103835760fddbd43d4cad41e"}, "closed": true, "closedAt": "2020-04-07T18:22:16Z", "author": {"login": "nandakumar131"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVEQ-NgBqjMyMDY5ODk2NjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVTPTOAFqTM4OTExMDE2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "98ad4b0765194f9ef9ca5e4a2e4e1396f5281fc3", "author": {"user": {"login": "nandakumar131", "name": "Nandakumar"}}, "url": "https://github.com/apache/ozone/commit/98ad4b0765194f9ef9ca5e4a2e4e1396f5281fc3", "committedDate": "2020-04-06T19:51:27Z", "message": "scmcli container info command shows the wrong container state."}, "afterCommit": {"oid": "994510ad5ccc11f145c2d1d6e773c9ea8e680a09", "author": {"user": {"login": "nandakumar131", "name": "Nandakumar"}}, "url": "https://github.com/apache/ozone/commit/994510ad5ccc11f145c2d1d6e773c9ea8e680a09", "committedDate": "2020-04-06T19:56:19Z", "message": "HDDS-3348. scmcli container info command shows the wrong container state."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "994510ad5ccc11f145c2d1d6e773c9ea8e680a09", "author": {"user": {"login": "nandakumar131", "name": "Nandakumar"}}, "url": "https://github.com/apache/ozone/commit/994510ad5ccc11f145c2d1d6e773c9ea8e680a09", "committedDate": "2020-04-06T19:56:19Z", "message": "HDDS-3348. scmcli container info command shows the wrong container state."}, "afterCommit": {"oid": "80fec30524031d6d4251d6bfe933418f4f121fbf", "author": {"user": {"login": "nandakumar131", "name": "Nandakumar"}}, "url": "https://github.com/apache/ozone/commit/80fec30524031d6d4251d6bfe933418f4f121fbf", "committedDate": "2020-04-06T20:01:53Z", "message": "HDDS-3348. scmcli container info command shows the wrong container state."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1dcfc4ff2accf99d99c10e9c12986533c3c54047", "author": {"user": {"login": "nandakumar131", "name": "Nandakumar"}}, "url": "https://github.com/apache/ozone/commit/1dcfc4ff2accf99d99c10e9c12986533c3c54047", "committedDate": "2020-04-06T20:03:06Z", "message": "HDDS-3348. scmcli container info command shows the wrong container state."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "80fec30524031d6d4251d6bfe933418f4f121fbf", "author": {"user": {"login": "nandakumar131", "name": "Nandakumar"}}, "url": "https://github.com/apache/ozone/commit/80fec30524031d6d4251d6bfe933418f4f121fbf", "committedDate": "2020-04-06T20:01:53Z", "message": "HDDS-3348. scmcli container info command shows the wrong container state."}, "afterCommit": {"oid": "1dcfc4ff2accf99d99c10e9c12986533c3c54047", "author": {"user": {"login": "nandakumar131", "name": "Nandakumar"}}, "url": "https://github.com/apache/ozone/commit/1dcfc4ff2accf99d99c10e9c12986533c3c54047", "committedDate": "2020-04-06T20:03:06Z", "message": "HDDS-3348. scmcli container info command shows the wrong container state."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4NjI0MzUz", "url": "https://github.com/apache/ozone/pull/776#pullrequestreview-388624353", "createdAt": "2020-04-06T21:17:58Z", "commit": {"oid": "1dcfc4ff2accf99d99c10e9c12986533c3c54047"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQyMToxNzo1OVrOGBqQZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQyMToxNzo1OVrOGBqQZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDM5NDA4NA==", "bodyText": "We don't want this extra information  about 'ContainerPath' & 'Datanodes' anymore?", "url": "https://github.com/apache/ozone/pull/776#discussion_r404394084", "createdAt": "2020-04-06T21:17:59Z", "author": {"login": "avijayanhwx"}, "path": "hadoop-hdds/tools/src/main/java/org/apache/hadoop/hdds/scm/cli/container/InfoSubcommand.java", "diffHunk": "@@ -57,26 +55,13 @@\n   @Override\n   public Void call() throws Exception {\n     try (ScmClient scmClient = parent.getParent().createScmClient()) {\n-      ContainerWithPipeline container = scmClient.\n+      final ContainerWithPipeline container = scmClient.\n           getContainerWithPipeline(containerID);\n       Preconditions.checkNotNull(container, \"Container cannot be null\");\n \n-      ContainerDataProto containerData = scmClient.readContainer(container\n-          .getContainerInfo().getContainerID(), container.getPipeline());\n-\n       // Print container report info.\n       LOG.info(\"Container id: {}\", containerID);\n-      String openStatus =\n-          containerData.getState() == ContainerDataProto.State.OPEN ? \"OPEN\" :\n-              \"CLOSED\";\n-      LOG.info(\"Container State: {}\", openStatus);\n-      LOG.info(\"Container Path: {}\", containerData.getContainerPath());\n-\n-      // Output meta data.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1dcfc4ff2accf99d99c10e9c12986533c3c54047"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4NzcyNTgw", "url": "https://github.com/apache/ozone/pull/776#pullrequestreview-388772580", "createdAt": "2020-04-07T04:19:11Z", "commit": {"oid": "1dcfc4ff2accf99d99c10e9c12986533c3c54047"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwNDoxOToxMVrOGBySlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwNDoxOToxMVrOGBySlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDUyNTcxNg==", "bodyText": "Print pipeline information of the container will be useful, can we add that info.", "url": "https://github.com/apache/ozone/pull/776#discussion_r404525716", "createdAt": "2020-04-07T04:19:11Z", "author": {"login": "bharatviswa504"}, "path": "hadoop-hdds/tools/src/main/java/org/apache/hadoop/hdds/scm/cli/container/InfoSubcommand.java", "diffHunk": "@@ -57,26 +55,13 @@\n   @Override\n   public Void call() throws Exception {\n     try (ScmClient scmClient = parent.getParent().createScmClient()) {\n-      ContainerWithPipeline container = scmClient.\n+      final ContainerWithPipeline container = scmClient.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1dcfc4ff2accf99d99c10e9c12986533c3c54047"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09c92ee21dea5c832114e938dae42ba261f6b210", "author": {"user": {"login": "nandakumar131", "name": "Nandakumar"}}, "url": "https://github.com/apache/ozone/commit/09c92ee21dea5c832114e938dae42ba261f6b210", "committedDate": "2020-04-07T11:54:09Z", "message": "HDDS-3348. Added PipelineId as part of the output."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5MTEwMTYw", "url": "https://github.com/apache/ozone/pull/776#pullrequestreview-389110160", "createdAt": "2020-04-07T13:23:24Z", "commit": {"oid": "09c92ee21dea5c832114e938dae42ba261f6b210"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3314, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}