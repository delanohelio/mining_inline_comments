{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0MTQ4Mzc2", "number": 1074, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMjo1ODozMFrOEFhm4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMjo1ODo0NlrOEFhnLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MjI4OTYwOnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/dist/src/main/compose/ozone-mr/hadoop27/test.sh", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMjo1ODozMFrOGjxB9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMzowMToxOFrOGjxIVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDE1NjY2MA==", "bodyText": "This part can be removed. IMHO.\ndocker run flokkr/hadoop:2.7.3 robot --version\nFlokkr launcher script 1.1-18-g58a3efc\n\n===== Plugin is activated ENVTOCONF =====\n======================================\n*** Launching \"robot --version\"\nRobot Framework 3.1.2 (Python 3.6.8 on linux)", "url": "https://github.com/apache/ozone/pull/1074#discussion_r440156660", "createdAt": "2020-06-15T12:58:30Z", "author": {"login": "elek"}, "path": "hadoop-ozone/dist/src/main/compose/ozone-mr/hadoop27/test.sh", "diffHunk": "@@ -27,8 +27,8 @@ execute_robot_test scm createmrenv.robot\n \n \n #rm is the container name (resource manager) and not the rm command\n-execute_command_in_container rm sudo -E apk add --update py-pip\n-execute_command_in_container rm sudo -E pip install robotframework\n+execute_command_in_container rm sudo -E yum install -y python3-pip", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b2fd840eb687c06f93c58c5173850ee38744bb4"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDE1ODI5Mg==", "bodyText": "Thanks, I'll remove it.", "url": "https://github.com/apache/ozone/pull/1074#discussion_r440158292", "createdAt": "2020-06-15T13:01:18Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/dist/src/main/compose/ozone-mr/hadoop27/test.sh", "diffHunk": "@@ -27,8 +27,8 @@ execute_robot_test scm createmrenv.robot\n \n \n #rm is the container name (resource manager) and not the rm command\n-execute_command_in_container rm sudo -E apk add --update py-pip\n-execute_command_in_container rm sudo -E pip install robotframework\n+execute_command_in_container rm sudo -E yum install -y python3-pip", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDE1NjY2MA=="}, "originalCommit": {"oid": "5b2fd840eb687c06f93c58c5173850ee38744bb4"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0MjI5MDM3OnYy", "diffSide": "LEFT", "path": "hadoop-ozone/dist/src/main/compose/ozone-mr/hadoop27/docker-config", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxMjo1ODo0NlrOGjxCdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQyMTowMjo0N1rOGkCpvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDE1Njc5MQ==", "bodyText": "What's wrong with OzFS? Based on my understanding ozonefs-hadoop2 project includes an OzFs implementation which is the same as BasicOzFs.\nIs there any motivation behind this change?", "url": "https://github.com/apache/ozone/pull/1074#discussion_r440156791", "createdAt": "2020-06-15T12:58:46Z", "author": {"login": "elek"}, "path": "hadoop-ozone/dist/src/main/compose/ozone-mr/hadoop27/docker-config", "diffHunk": "@@ -14,7 +14,7 @@\n # See the License for the specific language governing permissions and\n # limitations under the License.\n \n-CORE-SITE.xml_fs.AbstractFileSystem.o3fs.impl=org.apache.hadoop.fs.ozone.OzFs", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b2fd840eb687c06f93c58c5173850ee38744bb4"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDE1NzY4MQ==", "bodyText": "Is there any motivation behind this change?\n\nYes, with OzFs I ran into Invalid path name Wrong FS (HDDS-3482).", "url": "https://github.com/apache/ozone/pull/1074#discussion_r440157681", "createdAt": "2020-06-15T13:00:19Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/dist/src/main/compose/ozone-mr/hadoop27/docker-config", "diffHunk": "@@ -14,7 +14,7 @@\n # See the License for the specific language governing permissions and\n # limitations under the License.\n \n-CORE-SITE.xml_fs.AbstractFileSystem.o3fs.impl=org.apache.hadoop.fs.ozone.OzFs", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDE1Njc5MQ=="}, "originalCommit": {"oid": "5b2fd840eb687c06f93c58c5173850ee38744bb4"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDI3MzQ1NA==", "bodyText": "Got it. In that case it's my fault, the fix should be added to the hadoop2 specific OzFs.\nOne important point of the new structure is that we don't need to use different classes (like BasicOzFs) we can use the same FS names all the time.\nIf it's not a big deal, can you please add the workaround instead of changing the name of the AbstractFileSystem implementation?\ndiff --git hadoop-ozone/ozonefs-hadoop2/src/main/java/org/apache/hadoop/fs/ozone/OzFs.java hadoop-ozone/ozonefs-hadoop2/src/main/java/org/apache/hadoop/fs/ozone/OzFs.java\nindex 914832e2c..b5012f95c 100644\n--- hadoop-ozone/ozonefs-hadoop2/src/main/java/org/apache/hadoop/fs/ozone/OzFs.java\n+++ hadoop-ozone/ozonefs-hadoop2/src/main/java/org/apache/hadoop/fs/ozone/OzFs.java\n@@ -40,4 +40,9 @@ public OzFs(URI theUri, Configuration conf)\n     super(theUri, new OzoneFileSystem(), conf,\n         OzoneConsts.OZONE_URI_SCHEME, false);\n   }\n+\n+  @Override\n+  public int getUriDefaultPort() {\n+    return -1;\n+  }\n }\nTested and worked well.", "url": "https://github.com/apache/ozone/pull/1074#discussion_r440273454", "createdAt": "2020-06-15T15:48:11Z", "author": {"login": "elek"}, "path": "hadoop-ozone/dist/src/main/compose/ozone-mr/hadoop27/docker-config", "diffHunk": "@@ -14,7 +14,7 @@\n # See the License for the specific language governing permissions and\n # limitations under the License.\n \n-CORE-SITE.xml_fs.AbstractFileSystem.o3fs.impl=org.apache.hadoop.fs.ozone.OzFs", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDE1Njc5MQ=="}, "originalCommit": {"oid": "5b2fd840eb687c06f93c58c5173850ee38744bb4"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQ0NTM3Mw==", "bodyText": "Thanks for the hint, workaround added.", "url": "https://github.com/apache/ozone/pull/1074#discussion_r440445373", "createdAt": "2020-06-15T21:02:47Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/dist/src/main/compose/ozone-mr/hadoop27/docker-config", "diffHunk": "@@ -14,7 +14,7 @@\n # See the License for the specific language governing permissions and\n # limitations under the License.\n \n-CORE-SITE.xml_fs.AbstractFileSystem.o3fs.impl=org.apache.hadoop.fs.ozone.OzFs", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDE1Njc5MQ=="}, "originalCommit": {"oid": "5b2fd840eb687c06f93c58c5173850ee38744bb4"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4061, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}