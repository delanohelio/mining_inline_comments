{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM4NzI2Njg1", "number": 1696, "title": "HDDS-4582 Update `quota in counts` to `quota in namespace`", "bodyText": "What changes were proposed in this pull request?\nUse quota in namespace to improve readability of variables that are related to namespace quota.\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-4582\nHow was this patch tested?\nUT", "createdAt": "2020-12-13T03:24:21Z", "url": "https://github.com/apache/ozone/pull/1696", "merged": true, "mergeCommit": {"oid": "329bcc44968da2d16420d77a0b8eb55c94c6f4ee"}, "closed": true, "closedAt": "2020-12-15T07:06:30Z", "author": {"login": "amaliujia"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdl9PbxAFqTU1MTAyMTk3Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmU4nhAFqTU1MjE1Njc3Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxMDIxOTc2", "url": "https://github.com/apache/ozone/pull/1696#pullrequestreview-551021976", "createdAt": "2020-12-14T03:31:32Z", "commit": {"oid": "f449196a847566c5bb2d73bffa8c713f6a59105c"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwMzozMTozM1rOIE-b2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwMzozMjo1NVrOIE-dkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA4ODE1NQ==", "bodyText": "Can you also rename '--count-quota' to '--namespace-quota'?", "url": "https://github.com/apache/ozone/pull/1696#discussion_r542088155", "createdAt": "2020-12-14T03:31:33Z", "author": {"login": "linyiqun"}, "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/shell/SetSpaceQuotaOptions.java", "diffHunk": "@@ -32,14 +32,14 @@\n   @CommandLine.Option(names = {\"--count-quota\"},\n       description = \"For volume this parameter represents the number of \" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f449196a847566c5bb2d73bffa8c713f6a59105c"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA4ODU5NQ==", "bodyText": "Once option --count-quota is updated to --namespace-quota, this file also needed to be updated.", "url": "https://github.com/apache/ozone/pull/1696#discussion_r542088595", "createdAt": "2020-12-14T03:32:55Z", "author": {"login": "linyiqun"}, "path": "hadoop-ozone/dist/src/main/smoketest/basic/ozone-shell-lib.robot", "diffHunk": "@@ -48,12 +48,12 @@ Test ozone shell\n                     Should Be Equal     ${result}       DISK\n     ${result} =     Execute             ozone sh bucket info ${protocol}${server}/${volume}/bb1 | jq -r '. | select(.name==\"bb1\") | .quotaInBytes'\n                     Should Be Equal     ${result}       10995116277760\n-    ${result} =     Execute             ozone sh bucket info ${protocol}${server}/${volume}/bb1 | jq -r '. | select(.name==\"bb1\") | .quotaInCounts'\n+    ${result} =     Execute             ozone sh bucket info ${protocol}${server}/${volume}/bb1 | jq -r '. | select(.name==\"bb1\") | .quotaInNamespace'\n                     Should Be Equal     ${result}       100\n                     Execute             ozone sh bucket setquota ${protocol}${server}/${volume}/bb1 --space-quota 1TB --count-quota 1000", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f449196a847566c5bb2d73bffa8c713f6a59105c"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2943d193915e1dab875e1a9af2ba9d97c35a463e", "author": {"user": {"login": "amaliujia", "name": "Rui Wang"}}, "url": "https://github.com/apache/ozone/commit/2943d193915e1dab875e1a9af2ba9d97c35a463e", "committedDate": "2020-12-14T05:15:27Z", "message": "HDDS-4582 Update QUOTA_IN_COUNTS to quota in namespace"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6554a01d9aebf1559b39395c65ac57f96bd8d62", "author": {"user": {"login": "amaliujia", "name": "Rui Wang"}}, "url": "https://github.com/apache/ozone/commit/e6554a01d9aebf1559b39395c65ac57f96bd8d62", "committedDate": "2020-12-14T05:15:29Z", "message": "fixup! fix style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24b3f6039e13ae556f08f340ee3115ac6c91ae8b", "author": {"user": {"login": "amaliujia", "name": "Rui Wang"}}, "url": "https://github.com/apache/ozone/commit/24b3f6039e13ae556f08f340ee3115ac6c91ae8b", "committedDate": "2020-12-14T05:15:29Z", "message": "fiupx! address comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec031734f776c263f20b50d0e0d8ecf6d900de82", "author": {"user": {"login": "amaliujia", "name": "Rui Wang"}}, "url": "https://github.com/apache/ozone/commit/ec031734f776c263f20b50d0e0d8ecf6d900de82", "committedDate": "2020-12-14T05:15:29Z", "message": "trigger new CI check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "943f63bc3563f46ec8a544c51f3f3217b58d0cf5", "author": {"user": {"login": "amaliujia", "name": "Rui Wang"}}, "url": "https://github.com/apache/ozone/commit/943f63bc3563f46ec8a544c51f3f3217b58d0cf5", "committedDate": "2020-12-14T05:15:29Z", "message": "fixup! fix CI"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "338ccc12d186a1acbbf98d4652e59fb029859ffe", "author": {"user": {"login": "amaliujia", "name": "Rui Wang"}}, "url": "https://github.com/apache/ozone/commit/338ccc12d186a1acbbf98d4652e59fb029859ffe", "committedDate": "2020-12-14T04:24:51Z", "message": "trigger new CI check"}, "afterCommit": {"oid": "943f63bc3563f46ec8a544c51f3f3217b58d0cf5", "author": {"user": {"login": "amaliujia", "name": "Rui Wang"}}, "url": "https://github.com/apache/ozone/commit/943f63bc3563f46ec8a544c51f3f3217b58d0cf5", "committedDate": "2020-12-14T05:15:29Z", "message": "fixup! fix CI"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxMzE2MDI2", "url": "https://github.com/apache/ozone/pull/1696#pullrequestreview-551316026", "createdAt": "2020-12-14T12:22:52Z", "commit": {"oid": "943f63bc3563f46ec8a544c51f3f3217b58d0cf5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxMzUzMjA5", "url": "https://github.com/apache/ozone/pull/1696#pullrequestreview-551353209", "createdAt": "2020-12-14T13:15:46Z", "commit": {"oid": "943f63bc3563f46ec8a544c51f3f3217b58d0cf5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMzoxNTo0NlrOIFP4yQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMzoxNTo0NlrOIFP4yQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjM3NDA4OQ==", "bodyText": "Do we also change checkQuotaCountsValid to checkQuotaNamespaceValid?", "url": "https://github.com/apache/ozone/pull/1696#discussion_r542374089", "createdAt": "2020-12-14T13:15:46Z", "author": {"login": "captainzmc"}, "path": "hadoop-ozone/ozone-manager/src/main/java/org/apache/hadoop/ozone/om/request/volume/OMVolumeSetQuotaRequest.java", "diffHunk": "@@ -135,11 +135,12 @@ public OMClientResponse validateAndUpdateCache(OzoneManager ozoneManager,\n       } else {\n         omVolumeArgs.setQuotaInBytes(omVolumeArgs.getQuotaInBytes());\n       }\n-      if (checkQuotaCountsValid(setVolumePropertyRequest.getQuotaInCounts())) {\n-        omVolumeArgs.setQuotaInCounts(\n-            setVolumePropertyRequest.getQuotaInCounts());\n+      if (checkQuotaCountsValid(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "943f63bc3563f46ec8a544c51f3f3217b58d0cf5"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31b18bc104977f88257c35af272ed853de8fe59e", "author": {"user": {"login": "amaliujia", "name": "Rui Wang"}}, "url": "https://github.com/apache/ozone/commit/31b18bc104977f88257c35af272ed853de8fe59e", "committedDate": "2020-12-14T18:19:49Z", "message": "fixup! address comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c197da6a8e3e4d9f7bdd14895cc0850712ccd23a", "author": {"user": {"login": "amaliujia", "name": "Rui Wang"}}, "url": "https://github.com/apache/ozone/commit/c197da6a8e3e4d9f7bdd14895cc0850712ccd23a", "committedDate": "2020-12-14T19:52:04Z", "message": "trigger new CI check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b52ab271c4f8283e2a2a8188cc9bafb1d86cd496", "author": {"user": {"login": "amaliujia", "name": "Rui Wang"}}, "url": "https://github.com/apache/ozone/commit/b52ab271c4f8283e2a2a8188cc9bafb1d86cd496", "committedDate": "2020-12-14T20:43:37Z", "message": "trigger new CI check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bf12684fdbadbb3a5893bb52d08ababed9ac49c", "author": {"user": {"login": "amaliujia", "name": "Rui Wang"}}, "url": "https://github.com/apache/ozone/commit/2bf12684fdbadbb3a5893bb52d08ababed9ac49c", "committedDate": "2020-12-14T21:02:21Z", "message": "trigger new CI check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6d9fb3c0d7f1dd710a413aa41bb25f681e4f7dd", "author": {"user": {"login": "amaliujia", "name": "Rui Wang"}}, "url": "https://github.com/apache/ozone/commit/b6d9fb3c0d7f1dd710a413aa41bb25f681e4f7dd", "committedDate": "2020-12-14T22:32:30Z", "message": "trigger new CI check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d109c85603437f0159a5cef8fb3ef9a69f58b40a", "author": {"user": {"login": "amaliujia", "name": "Rui Wang"}}, "url": "https://github.com/apache/ozone/commit/d109c85603437f0159a5cef8fb3ef9a69f58b40a", "committedDate": "2020-12-14T22:32:36Z", "message": "trigger new CI check"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyMTU2Nzcy", "url": "https://github.com/apache/ozone/pull/1696#pullrequestreview-552156772", "createdAt": "2020-12-15T07:06:18Z", "commit": {"oid": "d109c85603437f0159a5cef8fb3ef9a69f58b40a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2108, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}