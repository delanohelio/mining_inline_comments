{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY2NjA2MzE1", "number": 1316, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxNzoxMTo1NlrOEdUEVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxNzoxMTo1NlrOEdUEVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5MTcyOTQ5OnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/integration-test/src/test/java/org/apache/hadoop/fs/ozone/TestOzoneFileSystem.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxNzoxMTo1NlrOHIZsww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QyMToyMzowN1rOHIhv1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODU3MTcxNQ==", "bodyText": "Shouldn't the cleanup be in a finally block? post mkdir if the test fails the directory won't get cleaned up. Wouldn't that affect other tests?", "url": "https://github.com/apache/ozone/pull/1316#discussion_r478571715", "createdAt": "2020-08-27T17:11:56Z", "author": {"login": "ayushtkn"}, "path": "hadoop-ozone/integration-test/src/test/java/org/apache/hadoop/fs/ozone/TestOzoneFileSystem.java", "diffHunk": "@@ -154,21 +155,21 @@ public void testCreateFileShouldCheckExistenceOfDirWithSameName()\n     } catch (FileAlreadyExistsException fae) {\n       // ignore as its expected\n     }\n+\n+    // Cleanup\n+    fs.delete(new Path(\"/d1/\"), true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fac1e371b6fb642811b5dce9b839cf562c34e52a"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODYyMzY4OQ==", "bodyText": "Thanks for taking a look at this @ayushtkn .\nIn this case it doesn't matter IMO. Cause if this test (testCreateFileShouldCheckExistenceOfDirWithSameName) fails and throws, testFileSystem as a whole will fail at this point thus the tests following this one won't even be executed.", "url": "https://github.com/apache/ozone/pull/1316#discussion_r478623689", "createdAt": "2020-08-27T18:45:35Z", "author": {"login": "smengcl"}, "path": "hadoop-ozone/integration-test/src/test/java/org/apache/hadoop/fs/ozone/TestOzoneFileSystem.java", "diffHunk": "@@ -154,21 +155,21 @@ public void testCreateFileShouldCheckExistenceOfDirWithSameName()\n     } catch (FileAlreadyExistsException fae) {\n       // ignore as its expected\n     }\n+\n+    // Cleanup\n+    fs.delete(new Path(\"/d1/\"), true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODU3MTcxNQ=="}, "originalCommit": {"oid": "fac1e371b6fb642811b5dce9b839cf562c34e52a"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODYzNDM3Ng==", "bodyText": "hmm, correct the following tests will fail. Do you think, thats a good behaviour, Ideally only the affected test should fail. If there is a common cluster, that could have been initialised in a BeforeClass and all other tests could have ran independently.\nAnyway not related to what you are doing here. Thanx for confirming.", "url": "https://github.com/apache/ozone/pull/1316#discussion_r478634376", "createdAt": "2020-08-27T19:05:41Z", "author": {"login": "ayushtkn"}, "path": "hadoop-ozone/integration-test/src/test/java/org/apache/hadoop/fs/ozone/TestOzoneFileSystem.java", "diffHunk": "@@ -154,21 +155,21 @@ public void testCreateFileShouldCheckExistenceOfDirWithSameName()\n     } catch (FileAlreadyExistsException fae) {\n       // ignore as its expected\n     }\n+\n+    // Cleanup\n+    fs.delete(new Path(\"/d1/\"), true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODU3MTcxNQ=="}, "originalCommit": {"oid": "fac1e371b6fb642811b5dce9b839cf562c34e52a"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODcwMDcyOQ==", "bodyText": "Yes, I also think @BeforeClass is better. Maybe another jira to refactor the test class this way.", "url": "https://github.com/apache/ozone/pull/1316#discussion_r478700729", "createdAt": "2020-08-27T21:16:45Z", "author": {"login": "smengcl"}, "path": "hadoop-ozone/integration-test/src/test/java/org/apache/hadoop/fs/ozone/TestOzoneFileSystem.java", "diffHunk": "@@ -154,21 +155,21 @@ public void testCreateFileShouldCheckExistenceOfDirWithSameName()\n     } catch (FileAlreadyExistsException fae) {\n       // ignore as its expected\n     }\n+\n+    // Cleanup\n+    fs.delete(new Path(\"/d1/\"), true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODU3MTcxNQ=="}, "originalCommit": {"oid": "fac1e371b6fb642811b5dce9b839cf562c34e52a"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODcwMzU3NQ==", "bodyText": "Filed https://issues.apache.org/jira/browse/HDDS-4162", "url": "https://github.com/apache/ozone/pull/1316#discussion_r478703575", "createdAt": "2020-08-27T21:23:07Z", "author": {"login": "smengcl"}, "path": "hadoop-ozone/integration-test/src/test/java/org/apache/hadoop/fs/ozone/TestOzoneFileSystem.java", "diffHunk": "@@ -154,21 +155,21 @@ public void testCreateFileShouldCheckExistenceOfDirWithSameName()\n     } catch (FileAlreadyExistsException fae) {\n       // ignore as its expected\n     }\n+\n+    // Cleanup\n+    fs.delete(new Path(\"/d1/\"), true);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODU3MTcxNQ=="}, "originalCommit": {"oid": "fac1e371b6fb642811b5dce9b839cf562c34e52a"}, "originalPosition": 32}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3883, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}