{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzMjYwMTkx", "number": 718, "title": "HDDS-3224. Enforce volume and bucket name rule at create time.", "bodyText": "What changes were proposed in this pull request?\nValidations performed by RpcClient are not done when using OzoneManager client directly. Added resource name checks for volume and bucket.\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-3224\nHow was this patch tested?\nAdded an integration test.", "createdAt": "2020-03-24T21:16:23Z", "url": "https://github.com/apache/ozone/pull/718", "merged": true, "mergeCommit": {"oid": "065d4434c45d0701feadf41b6214aa09db21a703"}, "closed": true, "closedAt": "2020-04-03T18:52:51Z", "author": {"login": "swagle"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQ6EaXgFqTM4MDcyMTYzMw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcUFjPTgFqTM4NzUwMzE2NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwNzIxNjMz", "url": "https://github.com/apache/ozone/pull/718#pullrequestreview-380721633", "createdAt": "2020-03-24T21:48:10Z", "commit": {"oid": "7ec191001e7e9f45320ef25d29a4b7bf60b0a581"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQyMTo0ODoxMFrOF7EYaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQyMTo0ODoxMFrOF7EYaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzQ4MjA4OQ==", "bodyText": "For write requests, this code is no more used.\nThese changes need to be done in OMBucketcreateRequest#preExecute and OMVolumeCreateRequest#preExecute and the same thing needs to be done in S3BucketCreateRequest", "url": "https://github.com/apache/ozone/pull/718#discussion_r397482089", "createdAt": "2020-03-24T21:48:10Z", "author": {"login": "bharatviswa504"}, "path": "hadoop-ozone/ozone-manager/src/main/java/org/apache/hadoop/ozone/om/OzoneManager.java", "diffHunk": "@@ -1894,10 +1896,12 @@ private void checkAdmin() throws OMException {\n   @Override\n   public void createBucket(OmBucketInfo bucketInfo) throws IOException {\n     try {\n-      if(isAclEnabled) {\n+      if (isAclEnabled) {\n         checkAcls(ResourceType.VOLUME, StoreType.OZONE, ACLType.CREATE,\n             bucketInfo.getVolumeName(), bucketInfo.getBucketName(), null);\n       }\n+      HddsClientUtils.verifyResourceName(bucketInfo.getVolumeName(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ec191001e7e9f45320ef25d29a4b7bf60b0a581"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgwNzI0NjMz", "url": "https://github.com/apache/ozone/pull/718#pullrequestreview-380724633", "createdAt": "2020-03-24T21:53:36Z", "commit": {"oid": "7ec191001e7e9f45320ef25d29a4b7bf60b0a581"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyNTg0Nzk4", "url": "https://github.com/apache/ozone/pull/718#pullrequestreview-382584798", "createdAt": "2020-03-27T05:14:37Z", "commit": {"oid": "6b16602705cc07fd74665b07325d465c095b2a33"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "70b93647dd139e18e983577e3f91b8aebcd3ae80", "author": {"user": {"login": "swagle", "name": "Siddharth"}}, "url": "https://github.com/apache/ozone/commit/70b93647dd139e18e983577e3f91b8aebcd3ae80", "committedDate": "2020-03-27T06:59:43Z", "message": "trigger new CI check"}, "afterCommit": {"oid": "70764f3e490284fd83fc52bf2c3ffed37cfe8ff3", "author": {"user": {"login": "swagle", "name": "Siddharth"}}, "url": "https://github.com/apache/ozone/commit/70764f3e490284fd83fc52bf2c3ffed37cfe8ff3", "committedDate": "2020-03-30T22:55:48Z", "message": "Checkstyle fix."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1MjUwNzIx", "url": "https://github.com/apache/ozone/pull/718#pullrequestreview-385250721", "createdAt": "2020-04-01T04:00:05Z", "commit": {"oid": "70764f3e490284fd83fc52bf2c3ffed37cfe8ff3"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40fb5328be711e07df287e991848b158b8e95eec", "author": {"user": {"login": "swagle", "name": "Siddharth"}}, "url": "https://github.com/apache/ozone/commit/40fb5328be711e07df287e991848b158b8e95eec", "committedDate": "2020-04-01T06:30:23Z", "message": "HDDS-3224. Enforce volume and bucket name rule at create time."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0ef030c2a83866d6b725a3573c582e225f489b4", "author": {"user": {"login": "swagle", "name": "Siddharth"}}, "url": "https://github.com/apache/ozone/commit/b0ef030c2a83866d6b725a3573c582e225f489b4", "committedDate": "2020-04-01T06:30:23Z", "message": "Addressed review, comments, still kept original changes since code path is reachable."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e0dd29e8c99495c1eae5eb1c992af321d1fa7bc", "author": {"user": {"login": "swagle", "name": "Siddharth"}}, "url": "https://github.com/apache/ozone/commit/7e0dd29e8c99495c1eae5eb1c992af321d1fa7bc", "committedDate": "2020-04-01T06:30:23Z", "message": "Addressed review comments."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b76587ffcc644b11f8054d9d3c250ab69248bfc", "author": {"user": {"login": "swagle", "name": "Siddharth"}}, "url": "https://github.com/apache/ozone/commit/6b76587ffcc644b11f8054d9d3c250ab69248bfc", "committedDate": "2020-04-01T06:30:23Z", "message": "Checkstyle fixes."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dbaa634b73b4175649818e3f95f99d6d0db7b404", "author": {"user": {"login": "swagle", "name": "Siddharth"}}, "url": "https://github.com/apache/ozone/commit/dbaa634b73b4175649818e3f95f99d6d0db7b404", "committedDate": "2020-04-01T06:30:23Z", "message": "Changes missed to S3BucketCreateRequest."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b43350364e778c3d5f7e07f20dcf7c374260c596", "author": {"user": {"login": "swagle", "name": "Siddharth"}}, "url": "https://github.com/apache/ozone/commit/b43350364e778c3d5f7e07f20dcf7c374260c596", "committedDate": "2020-04-01T06:30:23Z", "message": "Checkstyle fix."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd56dd8710e91f70d0256106286e6397c1de2d30", "author": {"user": {"login": "swagle", "name": "Siddharth"}}, "url": "https://github.com/apache/ozone/commit/fd56dd8710e91f70d0256106286e6397c1de2d30", "committedDate": "2020-04-01T06:30:23Z", "message": "Robot test chnages to fix volume name."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "70764f3e490284fd83fc52bf2c3ffed37cfe8ff3", "author": {"user": {"login": "swagle", "name": "Siddharth"}}, "url": "https://github.com/apache/ozone/commit/70764f3e490284fd83fc52bf2c3ffed37cfe8ff3", "committedDate": "2020-03-30T22:55:48Z", "message": "Checkstyle fix."}, "afterCommit": {"oid": "fd56dd8710e91f70d0256106286e6397c1de2d30", "author": {"user": {"login": "swagle", "name": "Siddharth"}}, "url": "https://github.com/apache/ozone/commit/fd56dd8710e91f70d0256106286e6397c1de2d30", "committedDate": "2020-04-01T06:30:23Z", "message": "Robot test chnages to fix volume name."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c8e841c63e4f89041ba2494138b74de3215708f", "author": {"user": {"login": "swagle", "name": "Siddharth"}}, "url": "https://github.com/apache/ozone/commit/9c8e841c63e4f89041ba2494138b74de3215708f", "committedDate": "2020-04-01T18:45:07Z", "message": "Change to url in config."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17d8a68df484c552ebcb039221f1a9b36f80be60", "author": {"user": {"login": "swagle", "name": "Siddharth"}}, "url": "https://github.com/apache/ozone/commit/17d8a68df484c552ebcb039221f1a9b36f80be60", "committedDate": "2020-04-01T18:47:01Z", "message": "Addressed review comment."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cdc11077ff4790f0a81488e3d6c2552245143f84", "author": {"user": {"login": "elek", "name": "Elek, M\u00e1rton"}}, "url": "https://github.com/apache/ozone/commit/cdc11077ff4790f0a81488e3d6c2552245143f84", "committedDate": "2020-04-03T14:40:28Z", "message": "Merge remote-tracking branch 'origin/master' into HEAD"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43a3caa0f5bd7bf4e1caa6abbb651cd99e13110f", "author": {"user": {"login": "elek", "name": "Elek, M\u00e1rton"}}, "url": "https://github.com/apache/ozone/commit/43a3caa0f5bd7bf4e1caa6abbb651cd99e13110f", "committedDate": "2020-04-03T14:40:30Z", "message": "retrigger build with empty commit"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3NTAzMTY0", "url": "https://github.com/apache/ozone/pull/718#pullrequestreview-387503164", "createdAt": "2020-04-03T18:52:35Z", "commit": {"oid": "43a3caa0f5bd7bf4e1caa6abbb651cd99e13110f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3536, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}