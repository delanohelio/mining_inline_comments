{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM3OTg2NzQw", "number": 1106, "title": "HDDS-2413. Set configuration variables from annotated java objects", "bodyText": "What changes were proposed in this pull request?\nAllow setting Configuration from strongly-typed config objects (ie. ones annotated with @Config).  This is the opposite direction of existing ConfigurationSource.getObject().\nOne caveat is that the config object needs to be created via getObject() for default values from annotations to be properly set.\nhttps://issues.apache.org/jira/browse/HDDS-2413\nHow was this patch tested?\nAdded unit test.  Also updated a single part of \"real\" code where this change makes string constants unnecessary (DUFactory.Conf and TestDUFactory).\nhttps://github.com/adoroszlai/hadoop-ozone/runs/795413474", "createdAt": "2020-06-22T14:37:07Z", "url": "https://github.com/apache/ozone/pull/1106", "merged": true, "mergeCommit": {"oid": "0300febe2cf04bbe2769aab51bd0253b4af99a25"}, "closed": true, "closedAt": "2020-07-01T16:48:36Z", "author": {"login": "adoroszlai"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABctuk_vgH2gAyNDM3OTg2NzQwOmY2MzA1MzM4ODFkNzBmODljMjc5ZDdlYTQ3YTFlMWRkYThhOTZmMWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwtHQXAFqTQ0MTAzODQ0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f630533881d70f89c279d7ea47a1e1dda8a96f1b", "author": {"user": {"login": "adoroszlai", "name": "Doroszlai, Attila"}}, "url": "https://github.com/apache/ozone/commit/f630533881d70f89c279d7ea47a1e1dda8a96f1b", "committedDate": "2020-06-22T10:48:43Z", "message": "HDDS-2413. Set configuration variables from annotated java objects"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f6d9f36e22f006d0fc7e25f0e84cae4a81eb5ed", "author": {"user": {"login": "adoroszlai", "name": "Doroszlai, Attila"}}, "url": "https://github.com/apache/ozone/commit/2f6d9f36e22f006d0fc7e25f0e84cae4a81eb5ed", "committedDate": "2020-06-22T13:12:12Z", "message": "trigger new CI check"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5ODA1NTQy", "url": "https://github.com/apache/ozone/pull/1106#pullrequestreview-439805542", "createdAt": "2020-06-30T08:50:43Z", "commit": {"oid": "2f6d9f36e22f006d0fc7e25f0e84cae4a81eb5ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwODo1MDo0NFrOGqygEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwODo1MDo0NFrOGqygEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzUyMDc4Ng==", "bodyText": "I really don't like the approach when the current port number (after using :0) is added to the configuration. It's easier if the configuration is immutable after loading.\nI understand that the immutable is not possible with this injection and I accept that it's necessary.\nOne possible approach is to introduce two interfaces: ConfigSource (read-only) and ConfigDestination (write only). OzoneConfiguration can implement both. But there could be a specific ConfigSource (eg. EnvironmentVariableConfigSource) which would be read only.\nBut I am fine with committing this patch as is, but interested about opinion.\nAlso: it seems to be useful for testing to introduce an OzoneConfiguration.fromAnnotatedObject() method.", "url": "https://github.com/apache/ozone/pull/1106#discussion_r447520786", "createdAt": "2020-06-30T08:50:44Z", "author": {"login": "elek"}, "path": "hadoop-hdds/config/src/main/java/org/apache/hadoop/hdds/conf/ConfigurationSource.java", "diffHunk": "@@ -37,9 +39,6 @@\n \n   char[] getPassword(String key) throws IOException;\n \n-  @Deprecated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2f6d9f36e22f006d0fc7e25f0e84cae4a81eb5ed"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2efa0884b1e1bcce0880f0188a765fc52e13bb0", "author": {"user": {"login": "adoroszlai", "name": "Doroszlai, Attila"}}, "url": "https://github.com/apache/ozone/commit/b2efa0884b1e1bcce0880f0188a765fc52e13bb0", "committedDate": "2020-07-01T09:31:37Z", "message": "HDDS-2413. Extract ConfigurationTarget interface"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10b19019303c88699c45f20dad93e8bb6aaa8e27", "author": {"user": {"login": "adoroszlai", "name": "Doroszlai, Attila"}}, "url": "https://github.com/apache/ozone/commit/10b19019303c88699c45f20dad93e8bb6aaa8e27", "committedDate": "2020-07-01T09:31:37Z", "message": "HDDS-2413. Helper method for config object creation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12511c42a48a2bd85e055dd460cb770617377d93", "author": {"user": {"login": "adoroszlai", "name": "Doroszlai, Attila"}}, "url": "https://github.com/apache/ozone/commit/12511c42a48a2bd85e055dd460cb770617377d93", "committedDate": "2020-07-01T09:31:37Z", "message": "HDDS-2413. Remove useless config object creation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32f5fddebb98b18b51a52a1e41f58a215f08f1b0", "author": {"user": {"login": "adoroszlai", "name": "Doroszlai, Attila"}}, "url": "https://github.com/apache/ozone/commit/32f5fddebb98b18b51a52a1e41f58a215f08f1b0", "committedDate": "2020-07-01T09:31:37Z", "message": "HDDS-2413. Use type-safe DatanodeRatisServerConfig for test settings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5a259bb2ad2d96c0a99d0b3b366959c3f711594", "author": {"user": {"login": "adoroszlai", "name": "Doroszlai, Attila"}}, "url": "https://github.com/apache/ozone/commit/a5a259bb2ad2d96c0a99d0b3b366959c3f711594", "committedDate": "2020-07-01T09:53:21Z", "message": "HDDS-2413. Use type-safe ReconSqlDbConfig in tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "250f35858facef53aedd38d169484f9e4f659a6e", "author": {"user": {"login": "adoroszlai", "name": "Doroszlai, Attila"}}, "url": "https://github.com/apache/ozone/commit/250f35858facef53aedd38d169484f9e4f659a6e", "committedDate": "2020-07-01T11:21:26Z", "message": "HDDS-2413. Get rid of unnecessary OzoneConfiguration.of"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "573868d385caaa1ddbfe5703204a784ba01ae747", "author": {"user": {"login": "adoroszlai", "name": "Doroszlai, Attila"}}, "url": "https://github.com/apache/ozone/commit/573868d385caaa1ddbfe5703204a784ba01ae747", "committedDate": "2020-07-01T11:21:26Z", "message": "HDDS-2413. Use type-safe RocksDBConfiguration in tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee3d1f7fd8b73986d538b90b901e2246ddeea08e", "author": {"user": {"login": "adoroszlai", "name": "Doroszlai, Attila"}}, "url": "https://github.com/apache/ozone/commit/ee3d1f7fd8b73986d538b90b901e2246ddeea08e", "committedDate": "2020-07-01T11:21:26Z", "message": "HDDS-2413. Use type-safe ReplicationManagerConfiguration in tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "badac1d03e834cf64d2b55e9e1d8df804aeb7bb0", "author": {"user": {"login": "adoroszlai", "name": "Doroszlai, Attila"}}, "url": "https://github.com/apache/ozone/commit/badac1d03e834cf64d2b55e9e1d8df804aeb7bb0", "committedDate": "2020-07-01T11:21:26Z", "message": "HDDS-2413. Use type-safe ReconTaskConfig in tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c9c5a6b7393e7b8442489d69789f5098a888fad", "author": {"user": {"login": "adoroszlai", "name": "Doroszlai, Attila"}}, "url": "https://github.com/apache/ozone/commit/0c9c5a6b7393e7b8442489d69789f5098a888fad", "committedDate": "2020-07-01T11:49:05Z", "message": "Merge remote-tracking branch 'origin/master' into HDDS-2413"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b997f2fec2b26745e0dc07cf34227a4246dbf94", "author": {"user": {"login": "adoroszlai", "name": "Doroszlai, Attila"}}, "url": "https://github.com/apache/ozone/commit/8b997f2fec2b26745e0dc07cf34227a4246dbf94", "committedDate": "2020-07-01T12:49:19Z", "message": "Merge remote-tracking branch 'origin/master' into HDDS-2413"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "809a1e28665a8b0d92b481fb09811178f84d4a3b", "author": {"user": {"login": "adoroszlai", "name": "Doroszlai, Attila"}}, "url": "https://github.com/apache/ozone/commit/809a1e28665a8b0d92b481fb09811178f84d4a3b", "committedDate": "2020-07-01T12:53:51Z", "message": "HDDS-2413. One more instance of DatanodeRatisServerConfig"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMDM4NDQw", "url": "https://github.com/apache/ozone/pull/1106#pullrequestreview-441038440", "createdAt": "2020-07-01T16:48:06Z", "commit": {"oid": "809a1e28665a8b0d92b481fb09811178f84d4a3b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3000, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}