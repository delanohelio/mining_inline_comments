{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU4NTUwODM0", "number": 405, "title": "HDDS-2763. Handle Datanode registration in Recon.", "bodyText": "What changes were proposed in this pull request?\n\nDatanode should use Recon address to register and heartbeat to it.\nRecon will act as a \"passive\" SCM to the Datanode.  Here \"passive\" means that the Datanode will not get any commands from this Recon SCM.\nIntegrating SCM Node Manager into Recon.\n\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-2763\nHow was this patch tested?\nManually tested using docker.\nUnit tests pending.", "createdAt": "2020-01-02T04:36:23Z", "url": "https://github.com/apache/ozone/pull/405", "merged": true, "mergeCommit": {"oid": "088d76eab483cb1828cbf0d42d0969f194bbaf36"}, "closed": true, "closedAt": "2020-01-09T23:21:10Z", "author": {"login": "avijayanhwx"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb1_8j6gH2gAyMzU4NTUwODM0Ojk0ZjZmMzNhMjRjNWU2MTQzZWU2NTNmZGU0ODIyN2MzMTRlNTMyNjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb4ycX8AFqTM0MDg3MDAxNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "94f6f33a24c5e6143ee653fde48227c314e53264", "author": {"user": {"login": "avijayanhwx", "name": null}}, "url": "https://github.com/apache/ozone/commit/94f6f33a24c5e6143ee653fde48227c314e53264", "committedDate": "2020-01-01T07:23:05Z", "message": "HDDS-2763. Handle Datanode registration in Recon."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5ecf3559f67bf2f02ee8448b5541a572965ac88", "author": {"user": {"login": "avijayanhwx", "name": null}}, "url": "https://github.com/apache/ozone/commit/f5ecf3559f67bf2f02ee8448b5541a572965ac88", "committedDate": "2020-01-02T04:33:39Z", "message": "HDDS-2763. Fix checkstyle issue."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97a67d4b760fb135828bff6d429ae3e49e749a4d", "author": {"user": {"login": "avijayanhwx", "name": null}}, "url": "https://github.com/apache/ozone/commit/97a67d4b760fb135828bff6d429ae3e49e749a4d", "committedDate": "2020-01-02T04:40:43Z", "message": "HDDS-2763. Remove log line."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3fe88e14058b5d2fd6a361fa8d49dfa244d98fd", "author": {"user": {"login": "avijayanhwx", "name": null}}, "url": "https://github.com/apache/ozone/commit/d3fe88e14058b5d2fd6a361fa8d49dfa244d98fd", "committedDate": "2020-01-02T22:17:08Z", "message": "HDDS-2763. Fix checkstyle issue."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "020dd0673d5082dca93679fe7f05027555f5e499", "author": {"user": {"login": "avijayanhwx", "name": null}}, "url": "https://github.com/apache/ozone/commit/020dd0673d5082dca93679fe7f05027555f5e499", "committedDate": "2020-01-06T22:18:10Z", "message": "HDDS-2763. Fix Datanode heartbeat issue, add more comments."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4606ae22d6beca9c9682665e3a74e99aca046e1a", "author": {"user": {"login": "avijayanhwx", "name": null}}, "url": "https://github.com/apache/ozone/commit/4606ae22d6beca9c9682665e3a74e99aca046e1a", "committedDate": "2020-01-06T22:55:39Z", "message": "HDDS-2763. Change Recon RPC server port to 9891."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7dff8954e1acb0806f7c3e942c3acb18ef028939", "author": {"user": {"login": "avijayanhwx", "name": null}}, "url": "https://github.com/apache/ozone/commit/7dff8954e1acb0806f7c3e942c3acb18ef028939", "committedDate": "2020-01-07T21:14:03Z", "message": "Merge remote-tracking branch 'upstream/master' into HDDS-2763-master"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5NjE5Njgy", "url": "https://github.com/apache/ozone/pull/405#pullrequestreview-339619682", "createdAt": "2020-01-08T02:36:07Z", "commit": {"oid": "7dff8954e1acb0806f7c3e942c3acb18ef028939"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwMjozNjowN1rOFbLXjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwMjozNjowN1rOFbLXjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDA0MjEyNg==", "bodyText": "Advice to add explicit imports.", "url": "https://github.com/apache/ozone/pull/405#discussion_r364042126", "createdAt": "2020-01-08T02:36:07Z", "author": {"login": "swagle"}, "path": "hadoop-hdds/common/src/main/java/org/apache/hadoop/hdds/HddsUtils.java", "diffHunk": "@@ -64,6 +66,8 @@\n import org.apache.hadoop.net.NetUtils;\n \n import com.google.common.net.HostAndPort;\n+\n+import static org.apache.hadoop.hdds.recon.ReconConfigKeys.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7dff8954e1acb0806f7c3e942c3acb18ef028939"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5NjIyMTQx", "url": "https://github.com/apache/ozone/pull/405#pullrequestreview-339622141", "createdAt": "2020-01-08T02:47:52Z", "commit": {"oid": "7dff8954e1acb0806f7c3e942c3acb18ef028939"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwMjo0Nzo1MlrOFbLfjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQwMjo0Nzo1MlrOFbLfjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDA0NDE3NA==", "bodyText": "Suggest rename: ozone.recon.server.address", "url": "https://github.com/apache/ozone/pull/405#discussion_r364044174", "createdAt": "2020-01-08T02:47:52Z", "author": {"login": "swagle"}, "path": "hadoop-hdds/common/src/main/java/org/apache/hadoop/hdds/recon/ReconConfigKeys.java", "diffHunk": "@@ -32,9 +32,11 @@ private ReconConfigKeys() {\n \n   public static final String OZONE_RECON_DATANODE_ADDRESS_KEY =\n       \"ozone.recon.datanode.address\";\n+  public static final String OZONE_RECON_ADDRESS_KEY =\n+      \"ozone.recon.address\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7dff8954e1acb0806f7c3e942c3acb18ef028939"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7bdd99eeb8eb6c5fd4bc12e29227081cd0d37b91", "author": {"user": {"login": "avijayanhwx", "name": null}}, "url": "https://github.com/apache/ozone/commit/7bdd99eeb8eb6c5fd4bc12e29227081cd0d37b91", "committedDate": "2020-01-08T04:16:28Z", "message": "HDDS-2763. Address review comments, increase retry interval for Datanode-recon RPC call."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwMDgxMjMx", "url": "https://github.com/apache/ozone/pull/405#pullrequestreview-340081231", "createdAt": "2020-01-08T19:10:09Z", "commit": {"oid": "7bdd99eeb8eb6c5fd4bc12e29227081cd0d37b91"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48fc274802f158b71aff82f5d4ad1d634cb2e72c", "author": {"user": {"login": "avijayanhwx", "name": null}}, "url": "https://github.com/apache/ozone/commit/48fc274802f158b71aff82f5d4ad1d634cb2e72c", "committedDate": "2020-01-08T19:37:31Z", "message": "Merge remote-tracking branch 'upstream/master' into HDDS-2763-master"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQwODcwMDE3", "url": "https://github.com/apache/ozone/pull/405#pullrequestreview-340870017", "createdAt": "2020-01-09T23:03:35Z", "commit": {"oid": "48fc274802f158b71aff82f5d4ad1d634cb2e72c"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQyMzowMzozNVrOFcGAeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOVQyMzowMzozNVrOFcGAeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAwMjg3NA==", "bodyText": "This is already committed? Should we remove this change from here ?", "url": "https://github.com/apache/ozone/pull/405#discussion_r365002874", "createdAt": "2020-01-09T23:03:35Z", "author": {"login": "anuengineer"}, "path": "hadoop-hdds/common/src/main/java/org/apache/hadoop/hdds/recon/ReconConfigKeys.java", "diffHunk": "@@ -32,9 +32,11 @@ private ReconConfigKeys() {\n \n   public static final String OZONE_RECON_DATANODE_ADDRESS_KEY =\n       \"ozone.recon.datanode.address\";\n+  public static final String OZONE_RECON_ADDRESS_KEY =\n+      \"ozone.recon.address\";\n   public static final String OZONE_RECON_DATANODE_BIND_HOST_KEY =\n       \"ozone.recon.datanode.bind.host\";\n   public static final String OZONE_RECON_DATANODE_BIND_HOST_DEFAULT =\n       \"0.0.0.0\";\n-  public static final int OZONE_RECON_DATANODE_PORT_DEFAULT = 9865;\n+  public static final int OZONE_RECON_DATANODE_PORT_DEFAULT = 9891;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48fc274802f158b71aff82f5d4ad1d634cb2e72c"}, "originalPosition": 11}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3883, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}