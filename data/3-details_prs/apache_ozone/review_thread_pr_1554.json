{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE1MTYzNDQ0", "number": 1554, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxMTowMjoxM1rOE1LNIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNTozODo0OFrOE20s2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI0MTkzNTY5OnYy", "diffSide": "RIGHT", "path": "hadoop-hdds/server-scm/src/main/java/org/apache/hadoop/hdds/scm/container/IncrementalContainerReportHandler.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxMTowMjoxM1rOHtTQkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxMToyMzo1N1rOHtT-Tw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzI2MzUwNA==", "bodyText": "Avoid the empty line changes here and above", "url": "https://github.com/apache/ozone/pull/1554#discussion_r517263504", "createdAt": "2020-11-04T11:02:13Z", "author": {"login": "ayushtkn"}, "path": "hadoop-hdds/server-scm/src/main/java/org/apache/hadoop/hdds/scm/container/IncrementalContainerReportHandler.java", "diffHunk": "@@ -71,8 +71,10 @@ public void onMessage(final IncrementalContainerReportFromDatanode report,\n     for (ContainerReplicaProto replicaProto :\n         report.getReport().getReportList()) {\n       try {\n+\n         final ContainerID id = ContainerID.valueof(\n             replicaProto.getContainerID());\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ac059f556a8667662ad40be0915efb475a2b457"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzI3NTIxNQ==", "bodyText": "Thanks for reminding, I will correct it.", "url": "https://github.com/apache/ozone/pull/1554#discussion_r517275215", "createdAt": "2020-11-04T11:23:57Z", "author": {"login": "wycccccc"}, "path": "hadoop-hdds/server-scm/src/main/java/org/apache/hadoop/hdds/scm/container/IncrementalContainerReportHandler.java", "diffHunk": "@@ -71,8 +71,10 @@ public void onMessage(final IncrementalContainerReportFromDatanode report,\n     for (ContainerReplicaProto replicaProto :\n         report.getReport().getReportList()) {\n       try {\n+\n         final ContainerID id = ContainerID.valueof(\n             replicaProto.getContainerID());\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzI2MzUwNA=="}, "originalCommit": {"oid": "4ac059f556a8667662ad40be0915efb475a2b457"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI0Mjg5NDMwOnYy", "diffSide": "RIGHT", "path": "hadoop-hdds/server-scm/src/main/java/org/apache/hadoop/hdds/scm/container/IncrementalContainerReportHandler.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxNTowODo1MlrOHtcZJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQwNDozMDo0NFrOHveomw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzQxMzE1Nw==", "bodyText": "I think rather than changing here, we should catch a separate ContainerReplicaNotFoundException  and there reduce the log level, suppressing for all IOE might not be a good choice.\n@jojochuang does that make sense?", "url": "https://github.com/apache/ozone/pull/1554#discussion_r517413157", "createdAt": "2020-11-04T15:08:52Z", "author": {"login": "ayushtkn"}, "path": "hadoop-hdds/server-scm/src/main/java/org/apache/hadoop/hdds/scm/container/IncrementalContainerReportHandler.java", "diffHunk": "@@ -87,7 +89,7 @@ public void onMessage(final IncrementalContainerReportFromDatanode report,\n             report.getDatanodeDetails(), ex);\n       } catch (IOException e) {\n         success = false;\n-        LOG.error(\"Exception while processing ICR for container {}\",\n+        LOG.warn(\"Exception while processing ICR for container {}\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ac059f556a8667662ad40be0915efb475a2b457"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTE5MDA2MA==", "bodyText": "@wycccccc can you address this as well", "url": "https://github.com/apache/ozone/pull/1554#discussion_r519190060", "createdAt": "2020-11-07T15:46:03Z", "author": {"login": "ayushtkn"}, "path": "hadoop-hdds/server-scm/src/main/java/org/apache/hadoop/hdds/scm/container/IncrementalContainerReportHandler.java", "diffHunk": "@@ -87,7 +89,7 @@ public void onMessage(final IncrementalContainerReportFromDatanode report,\n             report.getDatanodeDetails(), ex);\n       } catch (IOException e) {\n         success = false;\n-        LOG.error(\"Exception while processing ICR for container {}\",\n+        LOG.warn(\"Exception while processing ICR for container {}\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzQxMzE1Nw=="}, "originalCommit": {"oid": "4ac059f556a8667662ad40be0915efb475a2b457"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTU0NzAzNQ==", "bodyText": "@ayushtkn I think what you said makes sense\uff0clet me try it.", "url": "https://github.com/apache/ozone/pull/1554#discussion_r519547035", "createdAt": "2020-11-09T04:30:44Z", "author": {"login": "wycccccc"}, "path": "hadoop-hdds/server-scm/src/main/java/org/apache/hadoop/hdds/scm/container/IncrementalContainerReportHandler.java", "diffHunk": "@@ -87,7 +89,7 @@ public void onMessage(final IncrementalContainerReportFromDatanode report,\n             report.getDatanodeDetails(), ex);\n       } catch (IOException e) {\n         success = false;\n-        LOG.error(\"Exception while processing ICR for container {}\",\n+        LOG.warn(\"Exception while processing ICR for container {}\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzQxMzE1Nw=="}, "originalCommit": {"oid": "4ac059f556a8667662ad40be0915efb475a2b457"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI1NzY4MDM4OnYy", "diffSide": "RIGHT", "path": "hadoop-hdds/server-scm/src/main/java/org/apache/hadoop/hdds/scm/container/IncrementalContainerReportHandler.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQwOTozMTozNVrOHvl6Uw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQwOTozMTozNVrOHvl6Uw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTY2NjI1OQ==", "bodyText": "@wycccccc This is just a formatting change. It isn't required here. Please avoid changing it, Apart from this changes Looks Good", "url": "https://github.com/apache/ozone/pull/1554#discussion_r519666259", "createdAt": "2020-11-09T09:31:35Z", "author": {"login": "ayushtkn"}, "path": "hadoop-hdds/server-scm/src/main/java/org/apache/hadoop/hdds/scm/container/IncrementalContainerReportHandler.java", "diffHunk": "@@ -80,11 +80,16 @@ public void onMessage(final IncrementalContainerReportFromDatanode report,\n         processContainerReplica(dd, replicaProto, publisher);\n       } catch (ContainerNotFoundException e) {\n         success = false;\n-        LOG.warn(\"Container {} not found!\", replicaProto.getContainerID());\n+        LOG.warn(\"Container {} not found!\",\n+            replicaProto.getContainerID());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b36af18ce1ff7936e59eea66021964eadcf12b1"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI1OTIyMDExOnYy", "diffSide": "RIGHT", "path": "hadoop-hdds/server-scm/src/main/java/org/apache/hadoop/hdds/scm/container/IncrementalContainerReportHandler.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNTozODo0OFrOHv0lug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNTozODo0OFrOHv0lug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTkwNjc0Ng==", "bodyText": "Based on the CI logs generated by the previous commit (#5756e86), the CheckStyle tool only reported that this line didn't meet the character length limit (<=80). I think it is only necessary to adjust this part.", "url": "https://github.com/apache/ozone/pull/1554#discussion_r519906746", "createdAt": "2020-11-09T15:38:48Z", "author": {"login": "cku328"}, "path": "hadoop-hdds/server-scm/src/main/java/org/apache/hadoop/hdds/scm/container/IncrementalContainerReportHandler.java", "diffHunk": "@@ -80,11 +80,16 @@ public void onMessage(final IncrementalContainerReportFromDatanode report,\n         processContainerReplica(dd, replicaProto, publisher);\n       } catch (ContainerNotFoundException e) {\n         success = false;\n-        LOG.warn(\"Container {} not found!\", replicaProto.getContainerID());\n+        LOG.warn(\"Container {} not found!\",\n+            replicaProto.getContainerID());\n       } catch (NodeNotFoundException ex) {\n         success = false;\n         LOG.error(\"Received ICR from unknown datanode {}\",\n             report.getDatanodeDetails(), ex);\n+      } catch (ContainerReplicaNotFoundException e){\n+        success = false;\n+        LOG.warn(\"Container {} replica not found!\",\n+            replicaProto.getContainerID());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b36af18ce1ff7936e59eea66021964eadcf12b1"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4692, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}