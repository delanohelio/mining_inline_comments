{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5NDUxNjky", "number": 937, "title": "HDDS-3607. Lot of warnings at DN startup.", "bodyText": "What changes were proposed in this pull request?\nThe log message which is at WARN level before the PR, is printed for every edit in the raft log since the last snapshot during DataNode startup, as we replay the edits, we don't need to spam with this many warnings, especially as this is part of normal operations. The proposal is to change it to DEBUG level.\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-3607\nHow was this patch tested?\nNo tests were done, seems to be too trivial to be wrong :)", "createdAt": "2020-05-18T11:55:27Z", "url": "https://github.com/apache/ozone/pull/937", "merged": true, "mergeCommit": {"oid": "d5f521b3beffefc0935b4448555e3efbfc26c591"}, "closed": true, "closedAt": "2020-05-27T19:07:18Z", "author": {"login": "fapifta"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcied8dAH2gAyNDE5NDUxNjkyOjg4NGFkMTY4MGQzY2Y2NmZhZWE2NjZhMTljNTNmMDM5OGE1ZWI4N2Y=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcleFKKAFqTQxOTUyNDU1Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "884ad1680d3cf66faea666a19c53f0398a5eb87f", "author": {"user": {"login": "fapifta", "name": "Istvan Fajth"}}, "url": "https://github.com/apache/ozone/commit/884ad1680d3cf66faea666a19c53f0398a5eb87f", "committedDate": "2020-05-18T11:49:22Z", "message": "HDDS-3607. Lot of warnings at DN startup."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNTIzMzU0", "url": "https://github.com/apache/ozone/pull/937#pullrequestreview-413523354", "createdAt": "2020-05-18T11:57:00Z", "commit": {"oid": "884ad1680d3cf66faea666a19c53f0398a5eb87f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eafc805a79cbc4c98fba3cd16c449621352d7e21", "author": {"user": {"login": "web-flow", "name": "GitHub Web Flow"}}, "url": "https://github.com/apache/ozone/commit/eafc805a79cbc4c98fba3cd16c449621352d7e21", "committedDate": "2020-05-18T13:01:23Z", "message": "empty commit to retest build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f65c349d86115b1bc77e83a9099be45cf632ee4", "author": {"user": {"login": "web-flow", "name": "GitHub Web Flow"}}, "url": "https://github.com/apache/ozone/commit/5f65c349d86115b1bc77e83a9099be45cf632ee4", "committedDate": "2020-05-18T13:23:00Z", "message": "empty commit to retest build"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNzEyNTE3", "url": "https://github.com/apache/ozone/pull/937#pullrequestreview-413712517", "createdAt": "2020-05-18T15:38:06Z", "commit": {"oid": "5f65c349d86115b1bc77e83a9099be45cf632ee4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNTozODowNlrOGW8wSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNTozODowNlrOGW8wSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjcxNzI1Nw==", "bodyText": "Is it necessary to wrap a debug log entry in the if (LOG.isDebugEnabled()) statement? It is my understanding, that so long as you are not doing string interpolation in the log message and are passing simple variables as any parameters to the log message (ie not doing any computation to calculate the values being passed), then LOG4J does the correct thing and there is no performance penalty to removing the IF wrapper.", "url": "https://github.com/apache/ozone/pull/937#discussion_r426717257", "createdAt": "2020-05-18T15:38:06Z", "author": {"login": "sodonnel"}, "path": "hadoop-hdds/container-service/src/main/java/org/apache/hadoop/ozone/container/keyvalue/impl/BlockManagerImpl.java", "diffHunk": "@@ -108,9 +108,11 @@ public long putBlock(Container container, BlockData data) throws IOException {\n         // transaction is reapplied in the ContainerStateMachine on restart.\n         // It also implies that the given block must already exist in the db.\n         // just log and return\n-        LOG.warn(\"blockCommitSequenceId {} in the Container Db is greater than\"\n-            + \" the supplied value {}. Ignoring it\",\n-            containerBCSId, bcsId);\n+        if (LOG.isDebugEnabled()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f65c349d86115b1bc77e83a9099be45cf632ee4"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57cf4e10c87eccadc196f11aa1e03e80ceff7635", "author": {"user": {"login": "adoroszlai", "name": "Doroszlai, Attila"}}, "url": "https://github.com/apache/ozone/commit/57cf4e10c87eccadc196f11aa1e03e80ceff7635", "committedDate": "2020-05-18T18:18:09Z", "message": "trigger new CI check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29dad660aee4e451d3b6657f8108c02ac75f8dfe", "author": {"user": {"login": "adoroszlai", "name": "Doroszlai, Attila"}}, "url": "https://github.com/apache/ozone/commit/29dad660aee4e451d3b6657f8108c02ac75f8dfe", "committedDate": "2020-05-18T20:28:52Z", "message": "trigger new CI check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f069982231da0ff6fdb29ba2dd5afc0d85dd726e", "author": {"user": {"login": "fapifta", "name": "Istvan Fajth"}}, "url": "https://github.com/apache/ozone/commit/f069982231da0ff6fdb29ba2dd5afc0d85dd726e", "committedDate": "2020-05-20T14:59:03Z", "message": "Address review comment."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f7ca2df3eadeee8e322cba64cdc29d1c204f821", "author": {"user": {"login": "adoroszlai", "name": "Doroszlai, Attila"}}, "url": "https://github.com/apache/ozone/commit/6f7ca2df3eadeee8e322cba64cdc29d1c204f821", "committedDate": "2020-05-21T16:21:19Z", "message": "trigger new CI check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7dfcbc87ede1ebbfb0c0592d3a3df534579e06a2", "author": {"user": {"login": "web-flow", "name": "GitHub Web Flow"}}, "url": "https://github.com/apache/ozone/commit/7dfcbc87ede1ebbfb0c0592d3a3df534579e06a2", "committedDate": "2020-05-27T11:15:51Z", "message": "empty commit to retest build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26aaf6549b3e59c45f2c3b6ab91063987fd45616", "author": {"user": {"login": "fapifta", "name": "Istvan Fajth"}}, "url": "https://github.com/apache/ozone/commit/26aaf6549b3e59c45f2c3b6ab91063987fd45616", "committedDate": "2020-05-27T11:24:25Z", "message": "trigger new CI check"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NTI0NTUz", "url": "https://github.com/apache/ozone/pull/937#pullrequestreview-419524553", "createdAt": "2020-05-27T19:04:04Z", "commit": {"oid": "26aaf6549b3e59c45f2c3b6ab91063987fd45616"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3270, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}