{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwOTI4NjM1", "number": 1136, "title": "HDDS-3798. Collect more info about DN in recon web", "bodyText": "What changes were proposed in this pull request?\nAdd datanode version and setup time in recon web.\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-3798\nHow was this patch tested?\n\nupdate on 2020/07/05\ncd hadoop-ozone/recon/src/main/resources/webapps/recon/ozone-recon-web\npnpm run dev\n\nAs @vivekratnavel suggestion, I have add a multi-select dropdown to hide/show some columns. Here is the effect", "createdAt": "2020-06-27T15:51:00Z", "url": "https://github.com/apache/ozone/pull/1136", "merged": true, "mergeCommit": {"oid": "4d964f3f3d4e97e5e0131cd6edd048f5fffc72fa"}, "closed": true, "closedAt": "2020-07-14T18:50:21Z", "author": {"login": "runitao"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcx35KNgH2gAyNDQwOTI4NjM1OmFkODk3NDNiNGJhZjU0NGZlZjI1YjcyNWEzZGVjNDkzYmIxNzg1YzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc0gjm8AH2gAyNDQwOTI4NjM1OjIxMGZiOWI4YmJjNDQ1MWZjOTAyNzU2MDg4NTNhZWJlNTQwMGMwZmU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ad89743b4baf544fef25b725a3dec493bb1785c0", "author": {"user": {"login": "runitao", "name": "HuangTao"}}, "url": "https://github.com/apache/ozone/commit/ad89743b4baf544fef25b725a3dec493bb1785c0", "committedDate": "2020-07-05T07:55:35Z", "message": "HDDS-3798. Collect more info about DN in recon web"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40b0e065a3fd9ef21ae6a3d1122d7160903836c4", "author": {"user": {"login": "runitao", "name": "HuangTao"}}, "url": "https://github.com/apache/ozone/commit/40b0e065a3fd9ef21ae6a3d1122d7160903836c4", "committedDate": "2020-07-05T07:55:35Z", "message": "HDDS-3798. fix checkstyle and the zone of setup time"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b8d1a4187309a3ccc3cf703bd8fbf8b29f29466", "author": {"user": {"login": "runitao", "name": "HuangTao"}}, "url": "https://github.com/apache/ozone/commit/6b8d1a4187309a3ccc3cf703bd8fbf8b29f29466", "committedDate": "2020-07-05T07:55:35Z", "message": "HDDS-3798. add a multi-select dropdown to hide/show some columns"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "354d4c27d7cb32eea3068381cf478afe352e73ab", "author": {"user": {"login": "runitao", "name": "HuangTao"}}, "url": "https://github.com/apache/ozone/commit/354d4c27d7cb32eea3068381cf478afe352e73ab", "committedDate": "2020-07-05T08:02:24Z", "message": "HDDS-3798. fix conflict"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0cb9d7224a7973458e9fed56203094330917d8ce", "author": {"user": {"login": "runitao", "name": "HuangTao"}}, "url": "https://github.com/apache/ozone/commit/0cb9d7224a7973458e9fed56203094330917d8ce", "committedDate": "2020-06-28T03:02:50Z", "message": "HDDS-3798. fix checkstyle and the zone of setup time"}, "afterCommit": {"oid": "354d4c27d7cb32eea3068381cf478afe352e73ab", "author": {"user": {"login": "runitao", "name": "HuangTao"}}, "url": "https://github.com/apache/ozone/commit/354d4c27d7cb32eea3068381cf478afe352e73ab", "committedDate": "2020-07-05T08:02:24Z", "message": "HDDS-3798. fix conflict"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18a90ce06a59478960186985b884f11de1e6428b", "author": {"user": {"login": "runitao", "name": "HuangTao"}}, "url": "https://github.com/apache/ozone/commit/18a90ce06a59478960186985b884f11de1e6428b", "committedDate": "2020-07-05T14:26:51Z", "message": "HDDS-3798. revert some unrelated fields"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d4c5721ed9c9ba836bcd18bd39b27ba76bb03d5b", "author": {"user": {"login": "runitao", "name": "HuangTao"}}, "url": "https://github.com/apache/ozone/commit/d4c5721ed9c9ba836bcd18bd39b27ba76bb03d5b", "committedDate": "2020-07-05T14:23:00Z", "message": "HDDS-3798. revert some unrelated fields"}, "afterCommit": {"oid": "18a90ce06a59478960186985b884f11de1e6428b", "author": {"user": {"login": "runitao", "name": "HuangTao"}}, "url": "https://github.com/apache/ozone/commit/18a90ce06a59478960186985b884f11de1e6428b", "committedDate": "2020-07-05T14:26:51Z", "message": "HDDS-3798. revert some unrelated fields"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNzAzODE5", "url": "https://github.com/apache/ozone/pull/1136#pullrequestreview-442703819", "createdAt": "2020-07-05T20:20:19Z", "commit": {"oid": "18a90ce06a59478960186985b884f11de1e6428b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNVQyMDoyMDoyMFrOGtEocA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNVQyMDoyNzo0MFrOGtEqiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTkxNDk5Mg==", "bodyText": "nit: dangling comma\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    lastUpdated: Number(moment()),\n          \n          \n            \n                    lastUpdated: Number(moment())", "url": "https://github.com/apache/ozone/pull/1136#discussion_r449914992", "createdAt": "2020-07-05T20:20:20Z", "author": {"login": "vivekratnavel"}, "path": "hadoop-ozone/recon/src/main/resources/webapps/recon/ozone-recon-web/src/views/datanodes/datanodes.tsx", "diffHunk": "@@ -201,14 +254,23 @@ export class Datanodes extends React.Component<Record<string, object>, IDatanode\n           storageRemaining: datanode.storageReport.remaining,\n           pipelines: datanode.pipelines,\n           containers: datanode.containers,\n-          leaderCount: datanode.leaderCount\n+          leaderCount: datanode.leaderCount,\n+          version: datanode.version,\n+          setupTime: datanode.setupTime\n         };\n       });\n+      const selectedColumns: IOption[] = COLUMNS.filter(column => column.isVisible).map(column => ({\n+        label: column.key,\n+        value: column.key\n+      }))\n+      \n       this.setState({\n         loading: false,\n         dataSource,\n         totalCount,\n-        lastUpdated: Number(moment())\n+        lastUpdated: Number(moment()),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18a90ce06a59478960186985b884f11de1e6428b"}, "originalPosition": 173}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTkxNTUzMQ==", "bodyText": "nit: compare value instead of label\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                          selectedColumns.some((e) => e.label === column.key)\n          \n          \n            \n                          selectedColumns.some((e) => e.value === column.key)", "url": "https://github.com/apache/ozone/pull/1136#discussion_r449915531", "createdAt": "2020-07-05T20:27:40Z", "author": {"login": "vivekratnavel"}, "path": "hadoop-ozone/recon/src/main/resources/webapps/recon/ozone-recon-web/src/views/datanodes/datanodes.tsx", "diffHunk": "@@ -233,20 +295,48 @@ export class Datanodes extends React.Component<Record<string, object>, IDatanode\n   };\n \n   render() {\n-    const {dataSource, loading, totalCount, lastUpdated} = this.state;\n+    const {dataSource, loading, totalCount, lastUpdated, selectedColumns, columnOptions} = this.state;\n     const paginationConfig: PaginationConfig = {\n       showTotal: (total: number, range) => `${range[0]}-${range[1]} of ${total} datanodes`,\n       showSizeChanger: true,\n       onShowSizeChange: this.onShowSizeChange\n     };\n     return (\n-      <div className='datanodes-container'>\n-        <div className='page-header'>\n+      <div className=\"datanodes-container\">\n+        <div className=\"page-header\">\n           Datanodes ({totalCount})\n-          <AutoReloadPanel isLoading={loading} lastUpdated={lastUpdated} togglePolling={this.autoReload.handleAutoReloadToggle} onReload={this._loadData}/>\n+          <div className=\"filter-block\">\n+            <MultiSelect\n+              maxShowValues={3}\n+              allowSelectAll\n+              isMulti\n+              className=\"multi-select-container\"\n+              options={columnOptions}\n+              closeMenuOnSelect={false}\n+              hideSelectedOptions={false}\n+              value={selectedColumns}\n+              allOption={allColumnsOption}\n+              onChange={this._handleColumnChange}\n+            /> Columns\n+          </div>\n+          <AutoReloadPanel\n+            isLoading={loading}\n+            lastUpdated={lastUpdated}\n+            togglePolling={this.autoReload.handleAutoReloadToggle}\n+            onReload={this._loadData}\n+          />\n         </div>\n-        <div className='content-div'>\n-          <Table dataSource={dataSource} columns={COLUMNS} loading={loading} pagination={paginationConfig} rowKey='hostname'/>\n+\n+        <div className=\"content-div\">\n+          <Table\n+            dataSource={dataSource}\n+            columns={COLUMNS.filter((column) =>\n+              selectedColumns.some((e) => e.label === column.key)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18a90ce06a59478960186985b884f11de1e6428b"}, "originalPosition": 225}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3be240ca336c84c67d46ef83d6e6b7489ef40525", "author": {"user": {"login": "runitao", "name": "HuangTao"}}, "url": "https://github.com/apache/ozone/commit/3be240ca336c84c67d46ef83d6e6b7489ef40525", "committedDate": "2020-07-06T02:12:22Z", "message": "HDDS-3798. fix lint errors"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNzU1OTM0", "url": "https://github.com/apache/ozone/pull/1136#pullrequestreview-442755934", "createdAt": "2020-07-06T03:35:33Z", "commit": {"oid": "3be240ca336c84c67d46ef83d6e6b7489ef40525"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5644e6ae2536c748d113cfcbb25b4fa56964ce7f", "author": {"user": {"login": "runitao", "name": "HuangTao"}}, "url": "https://github.com/apache/ozone/commit/5644e6ae2536c748d113cfcbb25b4fa56964ce7f", "committedDate": "2020-07-09T08:16:13Z", "message": "Merge branch 'master' into hdds-3798"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "006ed2d0f9f809b246f01bda5721f07914c5e6e8", "author": {"user": {"login": "adoroszlai", "name": "Doroszlai, Attila"}}, "url": "https://github.com/apache/ozone/commit/006ed2d0f9f809b246f01bda5721f07914c5e6e8", "committedDate": "2020-07-09T10:32:02Z", "message": "trigger new CI check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "210fb9b8bbc4451fc90275608853aebe5400c0fe", "author": {"user": {"login": "runitao", "name": "HuangTao"}}, "url": "https://github.com/apache/ozone/commit/210fb9b8bbc4451fc90275608853aebe5400c0fe", "committedDate": "2020-07-13T12:26:00Z", "message": "Merge branch 'master' into hdds-3798"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3036, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}