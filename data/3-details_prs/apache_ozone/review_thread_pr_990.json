{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0ODk0NTc2", "number": 990, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMzozNTozMlrOEB9BcA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMzozNTozMlrOEB9BcA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNDgzODI0OnYy", "diffSide": "RIGHT", "path": "hadoop-hdds/docs/content/shell/KeyCommands.md", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMzozNTozMlrOGeHXTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QyMjo1MTozN1rOGewN0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIzMTExNg==", "bodyText": "The parameter is a bit different from hadoop cp comamnd. My understanding is that the uri is to help the OM HA but seems here we are restricted to under the same URI. Does it take full uri as from and to key parameters?", "url": "https://github.com/apache/ozone/pull/990#discussion_r434231116", "createdAt": "2020-06-02T23:35:32Z", "author": {"login": "xiaoyuyao"}, "path": "hadoop-hdds/docs/content/shell/KeyCommands.md", "diffHunk": "@@ -155,3 +156,22 @@ The `key cat` command displays the contents of a specific Ozone key to standard\n ozone sh key cat /hive/jan/hello.txt\n {{< /highlight >}}\n Displays the contents of the key hello.txt from the _/hive/jan_ bucket to standard output.\n+\n+### Cp\n+\n+The `key cp` command copies a key to another one in the specified bucket.\n+\n+***Params:***\n+\n+| Arguments                      |  Comment                                |\n+|--------------------------------|-----------------------------------------|\n+|  Uri                           | The name of the bucket in **/volume/bucket** format.\n+|  FromKey                       | The existing key to be copied\n+|  ToKey                         | The name of the new key\n+| -r, \\-\\-replication            | Optional, Number of copies, ONE or THREE are the options. Picks up the default from cluster configuration.\n+| -t, \\-\\-type                   | Optional, replication type of the new key. RATIS and STAND_ALONE are the options. Picks up the default from cluster configuration.\n+\n+{{< highlight bash >}}\n+ozone sh key cp /hive/jan sales.orc new_one.orc", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7867dbe5a80750243f38406003d707842e19d0ec"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDYyODc4MQ==", "bodyText": "Based on the code, the answer is no. You can use a bucketAddress (url or vol/bucket) + fromKey (string) + toKey (string).\nThis patch looks good to me as it describe the current behavior.\n@xiaoyuyao Do you have any suggestion to change the code before the next release for better usability (btw. ozone sh key put DESTINATIONURL localfile is also reported to be confusing.)", "url": "https://github.com/apache/ozone/pull/990#discussion_r434628781", "createdAt": "2020-06-03T14:52:37Z", "author": {"login": "elek"}, "path": "hadoop-hdds/docs/content/shell/KeyCommands.md", "diffHunk": "@@ -155,3 +156,22 @@ The `key cat` command displays the contents of a specific Ozone key to standard\n ozone sh key cat /hive/jan/hello.txt\n {{< /highlight >}}\n Displays the contents of the key hello.txt from the _/hive/jan_ bucket to standard output.\n+\n+### Cp\n+\n+The `key cp` command copies a key to another one in the specified bucket.\n+\n+***Params:***\n+\n+| Arguments                      |  Comment                                |\n+|--------------------------------|-----------------------------------------|\n+|  Uri                           | The name of the bucket in **/volume/bucket** format.\n+|  FromKey                       | The existing key to be copied\n+|  ToKey                         | The name of the new key\n+| -r, \\-\\-replication            | Optional, Number of copies, ONE or THREE are the options. Picks up the default from cluster configuration.\n+| -t, \\-\\-type                   | Optional, replication type of the new key. RATIS and STAND_ALONE are the options. Picks up the default from cluster configuration.\n+\n+{{< highlight bash >}}\n+ozone sh key cp /hive/jan sales.orc new_one.orc", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIzMTExNg=="}, "originalCommit": {"oid": "7867dbe5a80750243f38406003d707842e19d0ec"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDkwMDQzMw==", "bodyText": "@elek yes. Let's merge this doc JIRA and file a ticket to fix the code separately.", "url": "https://github.com/apache/ozone/pull/990#discussion_r434900433", "createdAt": "2020-06-03T22:51:37Z", "author": {"login": "xiaoyuyao"}, "path": "hadoop-hdds/docs/content/shell/KeyCommands.md", "diffHunk": "@@ -155,3 +156,22 @@ The `key cat` command displays the contents of a specific Ozone key to standard\n ozone sh key cat /hive/jan/hello.txt\n {{< /highlight >}}\n Displays the contents of the key hello.txt from the _/hive/jan_ bucket to standard output.\n+\n+### Cp\n+\n+The `key cp` command copies a key to another one in the specified bucket.\n+\n+***Params:***\n+\n+| Arguments                      |  Comment                                |\n+|--------------------------------|-----------------------------------------|\n+|  Uri                           | The name of the bucket in **/volume/bucket** format.\n+|  FromKey                       | The existing key to be copied\n+|  ToKey                         | The name of the new key\n+| -r, \\-\\-replication            | Optional, Number of copies, ONE or THREE are the options. Picks up the default from cluster configuration.\n+| -t, \\-\\-type                   | Optional, replication type of the new key. RATIS and STAND_ALONE are the options. Picks up the default from cluster configuration.\n+\n+{{< highlight bash >}}\n+ozone sh key cp /hive/jan sales.orc new_one.orc", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDIzMTExNg=="}, "originalCommit": {"oid": "7867dbe5a80750243f38406003d707842e19d0ec"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4191, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}