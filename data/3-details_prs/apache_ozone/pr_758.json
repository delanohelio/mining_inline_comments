{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk3NzEwMjE0", "number": 758, "title": "HDDS-3280. Ozone BaseHTTPServer should honor ozone.security.enabled c\u2026", "bodyText": "\u2026onfig\nWhat changes were proposed in this pull request?\n\nBase HTTP server should start with SPNEGO username and keytab only if \"ozone.security.enabled\" and \"ozone.security.kerberos.http.enabled\" configs are set to true.\n\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-3280\nHow was this patch tested?\nThis patch was tested in a cluster with Kerberos and auto-TLS enabled under different configurations:\n\nBoth \"ozone.security.enabled\" and \"ozone.security.kerberos.http.enabled\" set to false\n\"ozone.security.enabled\" set to true\nBoth \"ozone.security.enabled\" and \"ozone.security.kerberos.http.enabled\" set to true", "createdAt": "2020-04-02T17:18:25Z", "url": "https://github.com/apache/ozone/pull/758", "merged": true, "mergeCommit": {"oid": "b0973ffe5446db22fcb10a8b382d5b6aa80a8a15"}, "closed": true, "closedAt": "2020-04-07T17:17:07Z", "author": {"login": "vivekratnavel"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcTvet8AH2gAyMzk3NzEwMjE0OmU3Y2M1ODgwMGFiNjFhNWNhYjVhNmQxMmUwYjIzMjMzOGU4ZWM1MTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVGipdAFqTM4ODY2NTkzNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e7cc58800ab61a5cab5a6d12e0b232338e8ec516", "author": {"user": {"login": "vivekratnavel", "name": "Vivek Ratnavel Subramanian"}}, "url": "https://github.com/apache/ozone/commit/e7cc58800ab61a5cab5a6d12e0b232338e8ec516", "committedDate": "2020-04-02T17:09:44Z", "message": "HDDS-3280. Ozone BaseHTTPServer should honor ozone.security.enabled config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1702b3d375de534b29fd7377022bf4ed1c26ca1e", "author": {"user": {"login": "vivekratnavel", "name": "Vivek Ratnavel Subramanian"}}, "url": "https://github.com/apache/ozone/commit/1702b3d375de534b29fd7377022bf4ed1c26ca1e", "committedDate": "2020-04-02T18:41:17Z", "message": "Fix integration test failures"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c8f7e89181fa8d4fcfed644f79f7c7417089867", "author": {"user": {"login": "vivekratnavel", "name": "Vivek Ratnavel Subramanian"}}, "url": "https://github.com/apache/ozone/commit/3c8f7e89181fa8d4fcfed644f79f7c7417089867", "committedDate": "2020-04-03T20:56:50Z", "message": "Merge remote-tracking branch 'apache/master' into HDDS-3280"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4NTI3OTc2", "url": "https://github.com/apache/ozone/pull/758#pullrequestreview-388527976", "createdAt": "2020-04-06T18:52:57Z", "commit": {"oid": "3c8f7e89181fa8d4fcfed644f79f7c7417089867"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxODo1Mjo1N1rOGBlcAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxODo1Mjo1N1rOGBlcAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDMxNTEzNw==", "bodyText": "This should be better named like ozone.security.http.kerberos.enabled to have a common prefix for http related settings as there will be ozone.security.http.simple.* as well.", "url": "https://github.com/apache/ozone/pull/758#discussion_r404315137", "createdAt": "2020-04-06T18:52:57Z", "author": {"login": "xiaoyuyao"}, "path": "hadoop-hdds/common/src/main/java/org/apache/hadoop/ozone/OzoneConfigKeys.java", "diffHunk": "@@ -347,6 +347,10 @@\n       \"ozone.security.enabled\";\n   public static final boolean OZONE_SECURITY_ENABLED_DEFAULT = false;\n \n+  public static final String OZONE_HTTP_SECURITY_ENABLED_KEY =\n+      \"ozone.security.kerberos.http.enabled\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c8f7e89181fa8d4fcfed644f79f7c7417089867"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4NTI4ODY4", "url": "https://github.com/apache/ozone/pull/758#pullrequestreview-388528868", "createdAt": "2020-04-06T18:54:14Z", "commit": {"oid": "3c8f7e89181fa8d4fcfed644f79f7c7417089867"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxODo1NDoxNFrOGBle8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wNlQxODo1NDoxNFrOGBle8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDMxNTg4OA==", "bodyText": "NIT: can we wrap this into OzoneSecurityUtil as isHttpSecurityEnabled?", "url": "https://github.com/apache/ozone/pull/758#discussion_r404315888", "createdAt": "2020-04-06T18:54:14Z", "author": {"login": "xiaoyuyao"}, "path": "hadoop-hdds/framework/src/main/java/org/apache/hadoop/hdds/server/http/BaseHttpServer.java", "diffHunk": "@@ -145,16 +146,19 @@ public BaseHttpServer(Configuration conf, String name) throws IOException {\n       final InetSocketAddress httpsAddr, String name, String spnegoUserNameKey,\n       String spnegoKeytabFileKey) throws IOException {\n     HttpConfig.Policy policy = getHttpPolicy(conf);\n+    boolean isSecurityEnabled = OzoneSecurityUtil.isSecurityEnabled(conf) &&", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c8f7e89181fa8d4fcfed644f79f7c7417089867"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4NTI5MTc0", "url": "https://github.com/apache/ozone/pull/758#pullrequestreview-388529174", "createdAt": "2020-04-06T18:54:40Z", "commit": {"oid": "3c8f7e89181fa8d4fcfed644f79f7c7417089867"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9eeea1a12f04bfc483506d2a456c3ade3879aae", "author": {"user": {"login": "vivekratnavel", "name": "Vivek Ratnavel Subramanian"}}, "url": "https://github.com/apache/ozone/commit/d9eeea1a12f04bfc483506d2a456c3ade3879aae", "committedDate": "2020-04-06T21:46:28Z", "message": "Address review comments."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4NjY1OTM1", "url": "https://github.com/apache/ozone/pull/758#pullrequestreview-388665935", "createdAt": "2020-04-06T22:35:46Z", "commit": {"oid": "d9eeea1a12f04bfc483506d2a456c3ade3879aae"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3427, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}