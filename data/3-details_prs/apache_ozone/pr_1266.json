{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3MzY5MzIz", "number": 1266, "title": "HDDS-4034. Add Unit Test for HadoopNestedDirGenerator.", "bodyText": "What changes were proposed in this pull request?\nAdded Unit Test for HadoopNestedDirGenerator.\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-4034\nHow was this patch tested?\nTested Manually.", "createdAt": "2020-07-27T19:54:30Z", "url": "https://github.com/apache/ozone/pull/1266", "merged": true, "mergeCommit": {"oid": "3fc8cf25bff8f42b7419a8853145b042e0090fe1"}, "closed": true, "closedAt": "2020-08-11T09:55:03Z", "author": {"login": "aryangupta1998"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5HPaSAH2gAyNDU3MzY5MzIzOmNjZTYwZmI0ZDY5NDI0YzkwNTUxOTU2ZTE0ZjU4NGUwMGJiYzU4Mzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc9zxqeAFqTQ2NDkxODI5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cce60fb4d69424c90551956e14f584e00bbc5839", "author": {"user": null}, "url": "https://github.com/apache/ozone/commit/cce60fb4d69424c90551956e14f584e00bbc5839", "committedDate": "2020-07-27T19:45:56Z", "message": "HDDS-4034. Add Unit Test for HadoopNestedDirGenerator."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4728c4a5dbaa0814e61702a1f46926741d71f218", "author": {"user": null}, "url": "https://github.com/apache/ozone/commit/4728c4a5dbaa0814e61702a1f46926741d71f218", "committedDate": "2020-07-27T19:51:52Z", "message": "HDDS-4034. Add Unit Test for HadoopNestedDirGenerator."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "868344cb0277242eead71fd9b9af478bdb0c9136", "author": {"user": null}, "url": "https://github.com/apache/ozone/commit/868344cb0277242eead71fd9b9af478bdb0c9136", "committedDate": "2020-07-27T19:56:54Z", "message": "HDDS-4034. Add Unit Test for HadoopNestedDirGenerator."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "efe4373d36c355e2e0cbcb9def3dab11da248de7", "author": {"user": null}, "url": "https://github.com/apache/ozone/commit/efe4373d36c355e2e0cbcb9def3dab11da248de7", "committedDate": "2020-07-27T20:01:32Z", "message": "HDDS-4034. Add Unit Test for HadoopNestedDirGenerator."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a41f842b6188aacef6ab782c0274650f2115f60a", "author": {"user": null}, "url": "https://github.com/apache/ozone/commit/a41f842b6188aacef6ab782c0274650f2115f60a", "committedDate": "2020-07-28T10:25:01Z", "message": "HDDS-4034. CheckStyle Fixed."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0430d2fae32f55631f1ad391d0b0660fdbe8fca", "author": {"user": null}, "url": "https://github.com/apache/ozone/commit/a0430d2fae32f55631f1ad391d0b0660fdbe8fca", "committedDate": "2020-07-28T13:49:30Z", "message": "HDDS-4034. Trigger CI."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4MjQ2NDcy", "url": "https://github.com/apache/ozone/pull/1266#pullrequestreview-458246472", "createdAt": "2020-07-30T09:41:24Z", "commit": {"oid": "a0430d2fae32f55631f1ad391d0b0660fdbe8fca"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQwOTo0MToyNFrOG5b0mw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQwOTo0MToyNFrOG5b0mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjg3Nzg1MQ==", "bodyText": "Thanks @aryangupta1998 . Why do the no of datanodes matter here? can you explain?", "url": "https://github.com/apache/ozone/pull/1266#discussion_r462877851", "createdAt": "2020-07-30T09:41:24Z", "author": {"login": "bshashikant"}, "path": "hadoop-ozone/integration-test/src/test/java/org/apache/hadoop/ozone/freon/TestHadoopNestedDirGenerator.java", "diffHunk": "@@ -0,0 +1,208 @@\n+/**\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with this\n+ * work for additional information regarding copyright ownership.  The ASF\n+ * licenses this file to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ * <p>\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ * <p>\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+package org.apache.hadoop.ozone.freon;\n+\n+import org.apache.commons.io.FileUtils;\n+import org.apache.hadoop.fs.FileStatus;\n+import org.apache.hadoop.fs.FileSystem;\n+import org.apache.hadoop.fs.Path;\n+import org.apache.hadoop.hdds.conf.OzoneConfiguration;\n+import org.apache.hadoop.ozone.MiniOzoneCluster;\n+import org.apache.hadoop.ozone.client.ObjectStore;\n+import org.apache.hadoop.ozone.client.OzoneClientFactory;\n+import org.apache.hadoop.ozone.client.OzoneVolume;\n+import org.apache.hadoop.test.GenericTestUtils;\n+import org.apache.ratis.server.impl.RaftServerImpl;\n+import org.apache.ratis.server.raftlog.RaftLog;\n+import java.util.LinkedList;\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import org.slf4j.event.Level;\n+import java.io.File;\n+import java.io.FileOutputStream;\n+import java.io.IOException;\n+import java.net.URI;\n+\n+/**\n+ * Test for HadoopNestedDirGenerator.\n+ */\n+\n+public class TestHadoopNestedDirGenerator {\n+\n+  private String path;\n+  private OzoneConfiguration conf = null;\n+  private MiniOzoneCluster cluster = null;\n+  private ObjectStore store = null;\n+  private static final Logger LOG =\n+          LoggerFactory.getLogger(TestHadoopNestedDirGenerator.class);\n+  @Before\n+    public void setup() {\n+    path = GenericTestUtils\n+                .getTempPath(TestOzoneClientKeyGenerator.class.getSimpleName());\n+    GenericTestUtils.setLogLevel(RaftLog.LOG, Level.DEBUG);\n+    GenericTestUtils.setLogLevel(RaftServerImpl.LOG, Level.DEBUG);\n+    File baseDir = new File(path);\n+    baseDir.mkdirs();\n+  }\n+\n+    /**\n+     * Shutdown MiniDFSCluster.\n+     */\n+\n+  private void shutdown() throws IOException {\n+    if (cluster != null) {\n+      cluster.shutdown();\n+      FileUtils.deleteDirectory(new File(path));\n+    }\n+  }\n+\n+    /**\n+     * Create a MiniDFSCluster for testing.\n+     *\n+     * @throws IOException\n+     */\n+\n+    /**\n+     * Below we have 5 datanodes because only 5 tests are activated\n+     * As you need more tests increase the datanodes accordingly.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0430d2fae32f55631f1ad391d0b0660fdbe8fca"}, "originalPosition": 84}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e72af64421c184d50c778949d26e2f66aa0b396", "author": {"user": null}, "url": "https://github.com/apache/ozone/commit/5e72af64421c184d50c778949d26e2f66aa0b396", "committedDate": "2020-07-30T10:32:40Z", "message": "HDDS-4034. Add Unit Test for HadoopNestedDirGenerator - Fixed Javadoc."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0OTE4Mjk2", "url": "https://github.com/apache/ozone/pull/1266#pullrequestreview-464918296", "createdAt": "2020-08-11T09:54:52Z", "commit": {"oid": "5e72af64421c184d50c778949d26e2f66aa0b396"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2944, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}