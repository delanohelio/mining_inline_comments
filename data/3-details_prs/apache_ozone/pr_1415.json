{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgzNzA3Mjc3", "number": 1415, "title": "HDDS-4232. Use single thread for KeyDeletingService.", "bodyText": "What changes were proposed in this pull request?\nKeyDeletingService scan the keys from a particular rocksdb table and sends deletion request to SCM. Every thread would scan the table and send deletion requests. This can lead to multiple deletion request for a particular block. There is currently no way to distribute the keys to be deleted amongst multiple threads.\nWhat is the link to the Apache JIRA\nHDDS-4232\nHow was this patch tested?\nThis lead to failure in TestBlockDeletion. Please refer 49b610a", "createdAt": "2020-09-10T11:22:29Z", "url": "https://github.com/apache/ozone/pull/1415", "merged": true, "mergeCommit": {"oid": "34f3b91080aeed669aa558ac2555b7a80f8bb747"}, "closed": true, "closedAt": "2020-09-29T11:22:10Z", "author": {"login": "lokeshj1703"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHj-OegFqTQ4NjE0MjQwOQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNmYxXAFqTQ5ODM2NTU4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MTQyNDA5", "url": "https://github.com/apache/ozone/pull/1415#pullrequestreview-486142409", "createdAt": "2020-09-10T17:09:21Z", "commit": {"oid": "e8f7b6ccf9be09edbe07d64755499336c74ffb2a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNzowOToyMVrOHP9uig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNzowOToyMVrOHP9uig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjUwMjAyNg==", "bodyText": "why not just change 2 to 1?", "url": "https://github.com/apache/ozone/pull/1415#discussion_r486502026", "createdAt": "2020-09-10T17:09:21Z", "author": {"login": "amaliujia"}, "path": "hadoop-ozone/ozone-manager/src/main/java/org/apache/hadoop/ozone/om/KeyDeletingService.java", "diffHunk": "@@ -66,9 +66,6 @@\n   private static final Logger LOG =\n       LoggerFactory.getLogger(KeyDeletingService.class);\n \n-  // The thread pool size for key deleting service.\n-  private final static int KEY_DELETING_CORE_POOL_SIZE = 2;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e8f7b6ccf9be09edbe07d64755499336c74ffb2a"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NTU3OTk5", "url": "https://github.com/apache/ozone/pull/1415#pullrequestreview-486557999", "createdAt": "2020-09-11T07:59:06Z", "commit": {"oid": "e8f7b6ccf9be09edbe07d64755499336c74ffb2a"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28d93f967dc86a1dbbb2488b3d450cba95acfdff", "author": {"user": {"login": "lokeshj1703", "name": "Lokesh Jain"}}, "url": "https://github.com/apache/ozone/commit/28d93f967dc86a1dbbb2488b3d450cba95acfdff", "committedDate": "2020-09-29T09:10:01Z", "message": "HDDS-4232. Use single thread for KeyDeletingService and OpenKeyCleanupService."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c140c3823cbb45f9c3bb8a7d36c7af050ce0d4cd", "author": {"user": {"login": "lokeshj1703", "name": "Lokesh Jain"}}, "url": "https://github.com/apache/ozone/commit/c140c3823cbb45f9c3bb8a7d36c7af050ce0d4cd", "committedDate": "2020-09-29T09:10:04Z", "message": "Address review comments"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0283116f343abe3b22638f6bf7c147e0e589ed7c", "author": {"user": {"login": "lokeshj1703", "name": "Lokesh Jain"}}, "url": "https://github.com/apache/ozone/commit/0283116f343abe3b22638f6bf7c147e0e589ed7c", "committedDate": "2020-09-11T09:25:21Z", "message": "Address review comments"}, "afterCommit": {"oid": "c140c3823cbb45f9c3bb8a7d36c7af050ce0d4cd", "author": {"user": {"login": "lokeshj1703", "name": "Lokesh Jain"}}, "url": "https://github.com/apache/ozone/commit/c140c3823cbb45f9c3bb8a7d36c7af050ce0d4cd", "committedDate": "2020-09-29T09:10:04Z", "message": "Address review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4MzY1NTg1", "url": "https://github.com/apache/ozone/pull/1415#pullrequestreview-498365585", "createdAt": "2020-09-29T11:21:42Z", "commit": {"oid": "c140c3823cbb45f9c3bb8a7d36c7af050ce0d4cd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2505, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}