{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwNjU2NTE4", "number": 1133, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwOTo0Njo0NlrOEKBUWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwOTo1MTozNFrOEKBbmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4OTQyODExOnYy", "diffSide": "RIGHT", "path": "hadoop-hdds/pom.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwOTo0Njo0NlrOGq0p2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwOTo0Njo0NlrOGq0p2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzU1NjA1Nw==", "bodyText": "Maven outputs a warning for each submodule:\nThe expression ${pom.artifactId} is deprecated. Please use ${project.artifactId} instead.\n\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                          <outputFile>${project.build.outputDirectory}/${pom.artifactId}.classpath</outputFile>\n          \n          \n            \n                          <outputFile>${project.build.outputDirectory}/${project.artifactId}.classpath</outputFile>", "url": "https://github.com/apache/ozone/pull/1133#discussion_r447556057", "createdAt": "2020-06-30T09:46:46Z", "author": {"login": "adoroszlai"}, "path": "hadoop-hdds/pom.xml", "diffHunk": "@@ -279,41 +279,19 @@ https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n         <executions>\n           <execution>\n             <id>add-classpath-descriptor</id>\n-            <phase>package</phase>\n+            <phase>prepare-package</phase>\n             <goals>\n               <goal>build-classpath</goal>\n             </goals>\n             <configuration>\n-              <outputFile>${project.build.directory}/classpath</outputFile>\n+              <outputFile>${project.build.outputDirectory}/${pom.artifactId}.classpath</outputFile>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "332773c421d73e503cb727ce801f394af15249c3"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4OTQ0NjY2OnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/dist/pom.xml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwOTo1MTozNFrOGq01kg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxMTowNjozN1rOGq3Wug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzU1OTA1OA==", "bodyText": "Fix me if I'm wrong, but ozone classpath now lists several modules that were previously omitted.\nPreviously:\n$ ozone classpath\nUsage: ozone classpath <ARTIFACTNAME>\nWhere the artifact name is one of:\n\nhadoop-hdds-server-scm\nhadoop-hdds-tools\nhadoop-ozone-common\nhadoop-ozone-csi\nhadoop-ozone-datanode\nhadoop-ozone-filesystem\nhadoop-ozone-insight\nhadoop-ozone-ozone-manager\nhadoop-ozone-recon\nhadoop-ozone-s3gateway\nhadoop-ozone-tools\nhadoop-ozone-upgrade\n\nWith patch:\n$ ozone classpath\nUsage: ozone classpath <ARTIFACTNAME>\nWhere the artifact name is one of:\n\nhadoop-hdds-client\nhadoop-hdds-common\nhadoop-hdds-config\nhadoop-hdds-container-service\nhadoop-hdds-docs\nhadoop-hdds-hadoop-dependency-client\nhadoop-hdds-hadoop-dependency-server\nhadoop-hdds-interface-admin\nhadoop-hdds-interface-client\nhadoop-hdds-interface-server\nhadoop-hdds-server-framework\nhadoop-hdds-server-scm\nhadoop-hdds-tools\nhadoop-ozone-client\nhadoop-ozone-common\nhadoop-ozone-csi\nhadoop-ozone-datanode\nhadoop-ozone-filesystem-common\nhadoop-ozone-filesystem\nhadoop-ozone-insight\nhadoop-ozone-interface-client\nhadoop-ozone-ozone-manager\nhadoop-ozone-recon\nhadoop-ozone-reconcodegen\nhadoop-ozone-s3gateway\nhadoop-ozone-tools\nhadoop-ozone-upgrade\n\nInvoking ozone classpath for the extra modules results in an error (which is the same on master):\n$ ozone classpath hadoop-hdds-config\nError: Could not find or load main class org.apache.hadoop.util.Classpath\nCaused by: java.lang.ClassNotFoundException: org.apache.hadoop.util.Classpath", "url": "https://github.com/apache/ozone/pull/1133#discussion_r447559058", "createdAt": "2020-06-30T09:51:34Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/dist/pom.xml", "diffHunk": "@@ -41,103 +41,13 @@\n             <id>copy-classpath-files</id>\n             <phase>prepare-package</phase>\n             <goals>\n-              <goal>copy</goal>\n+              <goal>unpack-dependencies</goal>\n             </goals>\n             <configuration>\n               <outputDirectory>\n                 target/ozone-${ozone.version}/share/ozone/classpath\n               </outputDirectory>\n-              <artifactItems>\n-                <artifactItem>\n-                  <groupId>org.apache.hadoop</groupId>\n-                  <artifactId>hadoop-hdds-server-scm</artifactId>\n-                  <version>${hdds.version}</version>\n-                  <classifier>classpath</classifier>\n-                  <type>cp</type>\n-                  <destFileName>hadoop-hdds-server-scm.classpath</destFileName>\n-                </artifactItem>\n-                <artifactItem>\n-                  <groupId>org.apache.hadoop</groupId>\n-                  <artifactId>hadoop-hdds-tools</artifactId>\n-                  <version>${hdds.version}</version>\n-                  <classifier>classpath</classifier>\n-                  <type>cp</type>\n-                  <destFileName>hadoop-hdds-tools.classpath</destFileName>\n-                </artifactItem>\n-                <artifactItem>\n-                  <groupId>org.apache.hadoop</groupId>\n-                  <artifactId>hadoop-ozone-s3gateway</artifactId>\n-                  <version>${ozone.version}</version>\n-                  <classifier>classpath</classifier>\n-                  <type>cp</type>\n-                  <destFileName>hadoop-ozone-s3gateway.classpath</destFileName>\n-                </artifactItem>\n-                <artifactItem>\n-                  <groupId>org.apache.hadoop</groupId>\n-                  <artifactId>hadoop-ozone-csi</artifactId>\n-                  <version>${ozone.version}</version>\n-                  <classifier>classpath</classifier>\n-                  <type>cp</type>\n-                  <destFileName>hadoop-ozone-csi.classpath</destFileName>\n-                </artifactItem>\n-                <artifactItem>\n-                  <groupId>org.apache.hadoop</groupId>\n-                  <artifactId>hadoop-ozone-ozone-manager</artifactId>\n-                  <version>${ozone.version}</version>\n-                  <classifier>classpath</classifier>\n-                  <type>cp</type>\n-                  <destFileName>hadoop-ozone-ozone-manager.classpath\n-                  </destFileName>\n-                </artifactItem>\n-                <artifactItem>\n-                  <groupId>org.apache.hadoop</groupId>\n-                  <artifactId>hadoop-ozone-tools</artifactId>\n-                  <version>${ozone.version}</version>\n-                  <classifier>classpath</classifier>\n-                  <type>cp</type>\n-                  <destFileName>hadoop-ozone-tools.classpath</destFileName>\n-                </artifactItem>\n-                <artifactItem>\n-                  <groupId>org.apache.hadoop</groupId>\n-                  <artifactId>hadoop-ozone-filesystem</artifactId>\n-                  <version>${ozone.version}</version>\n-                  <classifier>classpath</classifier>\n-                  <type>cp</type>\n-                  <destFileName>hadoop-ozone-filesystem.classpath</destFileName>\n-                </artifactItem>\n-                <artifactItem>\n-                  <groupId>org.apache.hadoop</groupId>\n-                  <artifactId>hadoop-ozone-common</artifactId>\n-                  <version>${ozone.version}</version>\n-                  <classifier>classpath</classifier>\n-                  <type>cp</type>\n-                  <destFileName>hadoop-ozone-common.classpath</destFileName>\n-                </artifactItem>\n-                <artifactItem>\n-                  <groupId>org.apache.hadoop</groupId>\n-                  <artifactId>hadoop-ozone-datanode</artifactId>\n-                  <version>${ozone.version}</version>\n-                  <classifier>classpath</classifier>\n-                  <type>cp</type>\n-                  <destFileName>hadoop-ozone-datanode.classpath</destFileName>\n-                </artifactItem>\n-                <artifactItem>\n-                  <groupId>org.apache.hadoop</groupId>\n-                  <artifactId>hadoop-ozone-upgrade</artifactId>\n-                  <version>${ozone.version}</version>\n-                  <classifier>classpath</classifier>\n-                  <type>cp</type>\n-                  <destFileName>hadoop-ozone-upgrade.classpath</destFileName>\n-                </artifactItem>\n-                <artifactItem>\n-                  <groupId>org.apache.hadoop</groupId>\n-                  <artifactId>hadoop-ozone-insight</artifactId>\n-                  <version>${ozone.version}</version>\n-                  <classifier>classpath</classifier>\n-                  <type>cp</type>\n-                  <destFileName>hadoop-ozone-insight.classpath</destFileName>\n-                </artifactItem>\n-              </artifactItems>\n+              <includes>*.classpath</includes>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "332773c421d73e503cb727ce801f394af15249c3"}, "originalPosition": 102}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzYwMDMxNA==", "bodyText": "Nice catch. I did a grep for OZONE_RUN_ARTIFACT_NAME in ozone shell script and selected only those artifacts.", "url": "https://github.com/apache/ozone/pull/1133#discussion_r447600314", "createdAt": "2020-06-30T11:06:37Z", "author": {"login": "elek"}, "path": "hadoop-ozone/dist/pom.xml", "diffHunk": "@@ -41,103 +41,13 @@\n             <id>copy-classpath-files</id>\n             <phase>prepare-package</phase>\n             <goals>\n-              <goal>copy</goal>\n+              <goal>unpack-dependencies</goal>\n             </goals>\n             <configuration>\n               <outputDirectory>\n                 target/ozone-${ozone.version}/share/ozone/classpath\n               </outputDirectory>\n-              <artifactItems>\n-                <artifactItem>\n-                  <groupId>org.apache.hadoop</groupId>\n-                  <artifactId>hadoop-hdds-server-scm</artifactId>\n-                  <version>${hdds.version}</version>\n-                  <classifier>classpath</classifier>\n-                  <type>cp</type>\n-                  <destFileName>hadoop-hdds-server-scm.classpath</destFileName>\n-                </artifactItem>\n-                <artifactItem>\n-                  <groupId>org.apache.hadoop</groupId>\n-                  <artifactId>hadoop-hdds-tools</artifactId>\n-                  <version>${hdds.version}</version>\n-                  <classifier>classpath</classifier>\n-                  <type>cp</type>\n-                  <destFileName>hadoop-hdds-tools.classpath</destFileName>\n-                </artifactItem>\n-                <artifactItem>\n-                  <groupId>org.apache.hadoop</groupId>\n-                  <artifactId>hadoop-ozone-s3gateway</artifactId>\n-                  <version>${ozone.version}</version>\n-                  <classifier>classpath</classifier>\n-                  <type>cp</type>\n-                  <destFileName>hadoop-ozone-s3gateway.classpath</destFileName>\n-                </artifactItem>\n-                <artifactItem>\n-                  <groupId>org.apache.hadoop</groupId>\n-                  <artifactId>hadoop-ozone-csi</artifactId>\n-                  <version>${ozone.version}</version>\n-                  <classifier>classpath</classifier>\n-                  <type>cp</type>\n-                  <destFileName>hadoop-ozone-csi.classpath</destFileName>\n-                </artifactItem>\n-                <artifactItem>\n-                  <groupId>org.apache.hadoop</groupId>\n-                  <artifactId>hadoop-ozone-ozone-manager</artifactId>\n-                  <version>${ozone.version}</version>\n-                  <classifier>classpath</classifier>\n-                  <type>cp</type>\n-                  <destFileName>hadoop-ozone-ozone-manager.classpath\n-                  </destFileName>\n-                </artifactItem>\n-                <artifactItem>\n-                  <groupId>org.apache.hadoop</groupId>\n-                  <artifactId>hadoop-ozone-tools</artifactId>\n-                  <version>${ozone.version}</version>\n-                  <classifier>classpath</classifier>\n-                  <type>cp</type>\n-                  <destFileName>hadoop-ozone-tools.classpath</destFileName>\n-                </artifactItem>\n-                <artifactItem>\n-                  <groupId>org.apache.hadoop</groupId>\n-                  <artifactId>hadoop-ozone-filesystem</artifactId>\n-                  <version>${ozone.version}</version>\n-                  <classifier>classpath</classifier>\n-                  <type>cp</type>\n-                  <destFileName>hadoop-ozone-filesystem.classpath</destFileName>\n-                </artifactItem>\n-                <artifactItem>\n-                  <groupId>org.apache.hadoop</groupId>\n-                  <artifactId>hadoop-ozone-common</artifactId>\n-                  <version>${ozone.version}</version>\n-                  <classifier>classpath</classifier>\n-                  <type>cp</type>\n-                  <destFileName>hadoop-ozone-common.classpath</destFileName>\n-                </artifactItem>\n-                <artifactItem>\n-                  <groupId>org.apache.hadoop</groupId>\n-                  <artifactId>hadoop-ozone-datanode</artifactId>\n-                  <version>${ozone.version}</version>\n-                  <classifier>classpath</classifier>\n-                  <type>cp</type>\n-                  <destFileName>hadoop-ozone-datanode.classpath</destFileName>\n-                </artifactItem>\n-                <artifactItem>\n-                  <groupId>org.apache.hadoop</groupId>\n-                  <artifactId>hadoop-ozone-upgrade</artifactId>\n-                  <version>${ozone.version}</version>\n-                  <classifier>classpath</classifier>\n-                  <type>cp</type>\n-                  <destFileName>hadoop-ozone-upgrade.classpath</destFileName>\n-                </artifactItem>\n-                <artifactItem>\n-                  <groupId>org.apache.hadoop</groupId>\n-                  <artifactId>hadoop-ozone-insight</artifactId>\n-                  <version>${ozone.version}</version>\n-                  <classifier>classpath</classifier>\n-                  <type>cp</type>\n-                  <destFileName>hadoop-ozone-insight.classpath</destFileName>\n-                </artifactItem>\n-              </artifactItems>\n+              <includes>*.classpath</includes>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzU1OTA1OA=="}, "originalCommit": {"oid": "332773c421d73e503cb727ce801f394af15249c3"}, "originalPosition": 102}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4123, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}