{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY2NjA2MzE1", "number": 1316, "title": "HDDS-4109. Tests in TestOzoneFileSystem should use the existing MiniOzoneCluster", "bodyText": "What changes were proposed in this pull request?\n4 new tests have been added since HDDS-2833 and are not sharing that MiniOzoneCluster.\nI am able to cut down the run time of TestOzoneFileSystem from 3m18s to 1m2s on my Mac. It would only save more run time on GitHub Workflow.\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-4109\nHow was this patch tested?\nNo new tests needed.", "createdAt": "2020-08-12T08:22:18Z", "url": "https://github.com/apache/ozone/pull/1316", "merged": true, "mergeCommit": {"oid": "d064230d873ab684eff27dffa9de30a559bf7f0b"}, "closed": true, "closedAt": "2020-08-27T21:25:06Z", "author": {"login": "smengcl"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-HA5TAH2gAyNDY2NjA2MzE1Ojk4YzU1YjcwY2NmNDI3YTU5NWQ4Y2U4YTI0YjZlYWE5NGQzYjE3MTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdDFSatgFqTQ3NzAwNDg2OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "98c55b70ccf427a595d8ce8a24b6eaa94d3b1718", "author": {"user": {"login": "smengcl", "name": "Siyao Meng"}}, "url": "https://github.com/apache/ozone/commit/98c55b70ccf427a595d8ce8a24b6eaa94d3b1718", "committedDate": "2020-08-12T08:19:42Z", "message": "Tests in TestOzoneFileSystem should use the existing MiniOzoneCluster.\n\nChange-Id: I67ee849cd674b0c3541416bb1f78869541313def"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1ODI0NTE2", "url": "https://github.com/apache/ozone/pull/1316#pullrequestreview-465824516", "createdAt": "2020-08-12T11:31:12Z", "commit": {"oid": "98c55b70ccf427a595d8ce8a24b6eaa94d3b1718"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0426426f12075cecdb161a7f3ba2d7cf5f1753d", "author": {"user": {"login": "smengcl", "name": "Siyao Meng"}}, "url": "https://github.com/apache/ozone/commit/d0426426f12075cecdb161a7f3ba2d7cf5f1753d", "committedDate": "2020-08-25T16:21:40Z", "message": "Add note.\n\nChange-Id: Iaf8e5feaea00aca5d61c754e8e227f5cf4494cfc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fac1e371b6fb642811b5dce9b839cf562c34e52a", "author": {"user": {"login": "adoroszlai", "name": "Doroszlai, Attila"}}, "url": "https://github.com/apache/ozone/commit/fac1e371b6fb642811b5dce9b839cf562c34e52a", "committedDate": "2020-08-26T08:01:48Z", "message": "trigger new CI check"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2OTIyODU2", "url": "https://github.com/apache/ozone/pull/1316#pullrequestreview-476922856", "createdAt": "2020-08-27T17:11:56Z", "commit": {"oid": "fac1e371b6fb642811b5dce9b839cf562c34e52a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxNzoxMTo1NlrOHIZsww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxNzoxMTo1NlrOHIZsww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODU3MTcxNQ==", "bodyText": "Shouldn't the cleanup be in a finally block? post mkdir if the test fails the directory won't get cleaned up. Wouldn't that affect other tests?", "url": "https://github.com/apache/ozone/pull/1316#discussion_r478571715", "createdAt": "2020-08-27T17:11:56Z", "author": {"login": "ayushtkn"}, "path": "hadoop-ozone/integration-test/src/test/java/org/apache/hadoop/fs/ozone/TestOzoneFileSystem.java", "diffHunk": "@@ -154,21 +155,21 @@ public void testCreateFileShouldCheckExistenceOfDirWithSameName()\n     } catch (FileAlreadyExistsException fae) {\n       // ignore as its expected\n     }\n+\n+    // Cleanup\n+    fs.delete(new Path(\"/d1/\"), true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fac1e371b6fb642811b5dce9b839cf562c34e52a"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3MDA0ODY5", "url": "https://github.com/apache/ozone/pull/1316#pullrequestreview-477004869", "createdAt": "2020-08-27T19:08:39Z", "commit": {"oid": "fac1e371b6fb642811b5dce9b839cf562c34e52a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2718, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}