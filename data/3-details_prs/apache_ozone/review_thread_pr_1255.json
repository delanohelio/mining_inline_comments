{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2NDkzNTQ4", "number": 1255, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMjowNTowNVrOETplWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMjowODoxOFrOETppCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MDM5NzA2OnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/debug/DBScanner.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMjowNTowNlrOG5gHGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNzoxOTozMlrOG5siMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjk0ODEyMg==", "bodyText": "NIT: as I am an oldschool command line user, I would prefer to use --with-keys instead of camel case", "url": "https://github.com/apache/ozone/pull/1255#discussion_r462948122", "createdAt": "2020-07-30T12:05:06Z", "author": {"login": "elek"}, "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/debug/DBScanner.java", "diffHunk": "@@ -44,28 +44,46 @@\n             description = \"Table name\")\n   private String tableName;\n \n+  @CommandLine.Option(names = {\"--withKey\"},", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "803bd69db16a12e3de602d8086c016c986245448"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE1MTY2NQ==", "bodyText": "Sure, will do.", "url": "https://github.com/apache/ozone/pull/1255#discussion_r463151665", "createdAt": "2020-07-30T17:19:32Z", "author": {"login": "avijayanhwx"}, "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/debug/DBScanner.java", "diffHunk": "@@ -44,28 +44,46 @@\n             description = \"Table name\")\n   private String tableName;\n \n+  @CommandLine.Option(names = {\"--withKey\"},", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjk0ODEyMg=="}, "originalCommit": {"oid": "803bd69db16a12e3de602d8086c016c986245448"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MDQwNjQ4OnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/debug/DBDefinitionFactory.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMjowODoxOFrOG5gM0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxNzoxOToxN1rOG5shoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjk0OTU4Ng==", "bodyText": "I am not sure if we need type here. I think this can be simplified as:\n public static DBDefinition getDefinition(String dbName, String type){\n    if (dbMap.containsKey(dbName)){\n      return dbMap.get(dbName);\n  }\n    if (dbName.equals(RECON_SCM_DB_NAME)) {\n      return new ReconSCMDBDefinition();\n    } else if (dbName.startsWith(RECON_CONTAINER_KEY_DB)) {\n      return new ReconDBDefinition(dbName);\n    } else if (dbName.startsWith(RECON_OM_SNAPSHOT_DB)) {\n      return new OMDBDefinition();\n    }\n    return null;\n  }\nSeems to be a good logic which just works.\nOr actually RECON_SCM_DB_NAME also can be added to the map, so you don't need the firts condition", "url": "https://github.com/apache/ozone/pull/1255#discussion_r462949586", "createdAt": "2020-07-30T12:08:18Z", "author": {"login": "elek"}, "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/debug/DBDefinitionFactory.java", "diffHunk": "@@ -40,10 +46,24 @@ private DBDefinitionFactory() {\n     dbMap.put(new OMDBDefinition().getName(), new OMDBDefinition());\n   }\n \n-  public static DBDefinition getDefinition(String dbName){\n+  public static DBDefinition getDefinition(String dbName, String type){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "803bd69db16a12e3de602d8086c016c986245448"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE1MTUyMA==", "bodyText": "You are right. At the start of writing this API, I was convinced I need a 'type' parameter. At the end of my patch, that was no longer true :) Forgot to remove this assumption. I will fix it.", "url": "https://github.com/apache/ozone/pull/1255#discussion_r463151520", "createdAt": "2020-07-30T17:19:17Z", "author": {"login": "avijayanhwx"}, "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/debug/DBDefinitionFactory.java", "diffHunk": "@@ -40,10 +46,24 @@ private DBDefinitionFactory() {\n     dbMap.put(new OMDBDefinition().getName(), new OMDBDefinition());\n   }\n \n-  public static DBDefinition getDefinition(String dbName){\n+  public static DBDefinition getDefinition(String dbName, String type){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjk0OTU4Ng=="}, "originalCommit": {"oid": "803bd69db16a12e3de602d8086c016c986245448"}, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4033, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}