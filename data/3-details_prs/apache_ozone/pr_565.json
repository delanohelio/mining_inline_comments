{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2OTE4MjQ1", "number": 565, "title": "HDDS-3030. Key Rename should preserve the ObjectID.", "bodyText": "What changes were proposed in this pull request?\nOn Key Renames, objectID should be preserved from the original Key.\nCurrently it is being set to the new transactionLogIndex of the rename request.\nUse original ObjectID from actual Key when renaming.\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-3030\nHow was this patch tested?\nExisting UT should cover this.", "createdAt": "2020-02-19T01:30:15Z", "url": "https://github.com/apache/ozone/pull/565", "merged": true, "mergeCommit": {"oid": "c805047dd67ea9e96cd335c3d48146d8407a52c8"}, "closed": true, "closedAt": "2020-02-19T19:00:26Z", "author": {"login": "bharatviswa504"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcFsTP2gH2gAyMzc2OTE4MjQ1Ojg4MWNjMzk2ODAzOWI0YmNkZmVmNjRlYzJhOGVmNjA2ZWI0NjNlY2E=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcF67ezAFqTM2MTMzNjQ3OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "881cc3968039b4bcdfef64ec2a8ef606eb463eca", "author": {"user": {"login": "bharatviswa504", "name": "Bharat Viswanadham"}}, "url": "https://github.com/apache/ozone/commit/881cc3968039b4bcdfef64ec2a8ef606eb463eca", "committedDate": "2020-02-19T01:32:33Z", "message": "HDDS-3030. Key Rename should preserve the ObjectID."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "01b4ef4a7198d708ea3d873cc7ce3e2416f5181e", "author": {"user": {"login": "bharatviswa504", "name": "Bharat Viswanadham"}}, "url": "https://github.com/apache/ozone/commit/01b4ef4a7198d708ea3d873cc7ce3e2416f5181e", "committedDate": "2020-02-19T01:29:00Z", "message": "HDDS-3030. Key Rename should preserve the ObjectID."}, "afterCommit": {"oid": "881cc3968039b4bcdfef64ec2a8ef606eb463eca", "author": {"user": {"login": "bharatviswa504", "name": "Bharat Viswanadham"}}, "url": "https://github.com/apache/ozone/commit/881cc3968039b4bcdfef64ec2a8ef606eb463eca", "committedDate": "2020-02-19T01:32:33Z", "message": "HDDS-3030. Key Rename should preserve the ObjectID."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxMzM2NDc4", "url": "https://github.com/apache/ozone/pull/565#pullrequestreview-361336478", "createdAt": "2020-02-19T18:35:06Z", "commit": {"oid": "881cc3968039b4bcdfef64ec2a8ef606eb463eca"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxODozNTowN1rOFry0zg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxODozNTowN1rOFry0zg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ2NTgwNg==", "bodyText": "We should still set the UpdateID here.", "url": "https://github.com/apache/ozone/pull/565#discussion_r381465806", "createdAt": "2020-02-19T18:35:07Z", "author": {"login": "hanishakoneru"}, "path": "hadoop-ozone/ozone-manager/src/main/java/org/apache/hadoop/ozone/om/request/key/OMKeyRenameRequest.java", "diffHunk": "@@ -210,15 +210,11 @@ public OMClientResponse validateAndUpdateCache(OzoneManager ozoneManager,\n           throw new OMException(\"Key not found \" + fromKey, KEY_NOT_FOUND);\n         }\n \n-        // Copy fromKeyValue into toKeyValue and set objectID and updateID to\n-        // current transactionLogIndex\n-        toKeyValue = fromKeyValue.copyObject(false);\n-        toKeyValue.setObjectID(trxnLogIndex);\n-        toKeyValue.setUpdateID(trxnLogIndex);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "881cc3968039b4bcdfef64ec2a8ef606eb463eca"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3590, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}