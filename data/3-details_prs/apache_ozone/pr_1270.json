{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU4MDE2MDgz", "number": 1270, "title": "HDDS-4044. Deprecate ozone.s3g.volume.name.", "bodyText": "What changes were proposed in this pull request?\nHDDS-3612 introduced bucket links.\nAfter this feature now we don't need this parameter, any volume/bucket can be exposed to S3 via using bucket links.\nozone bucket link srcvol/srcbucket destvol/destbucket\nSo now to expose any ozone bucket to S3G\nFor example, the user wants to expose a bucket named bucket1 under volume1 to S3G, they can run below command\nozone bucket link volume1/bucket1 s3v/bucket2\nNow, the user can access all the keys in volume/bucket1 using s3v/bucket2 and also ingest data to the volume/bucket1 using using s3v/bucket2\nThis Jira is opened to remove the config from ozone-default.xml\nAnd also log a warning message to use bucket links, when it does not have default value s3v.\nWith this configuration it causes trouble to users, to figure which volume is used for their buckets whenever this configuration is changed.\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-4044\nHow was this patch tested?\nAdded UT", "createdAt": "2020-07-28T19:48:29Z", "url": "https://github.com/apache/ozone/pull/1270", "merged": true, "mergeCommit": {"oid": "d7ea4966656cfdb0b53a368eac52d71adb717104"}, "closed": true, "closedAt": "2020-08-06T02:46:31Z", "author": {"login": "bharatviswa504"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5b6j7ABqjM1OTU5MzYxMTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc7qhTQAFqTQ2MTA0NDczNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9df70f094b464ade615c203e2ab9160db5b0af8f", "author": {"user": {"login": "bharatviswa504", "name": "Bharat Viswanadham"}}, "url": "https://github.com/apache/ozone/commit/9df70f094b464ade615c203e2ab9160db5b0af8f", "committedDate": "2020-07-28T19:46:46Z", "message": "HDDS-4044. Deprecate ozone.s3g.volume.name."}, "afterCommit": {"oid": "8d90c9371741410f4b4f0e531a88de238d42c163", "author": {"user": {"login": "bharatviswa504", "name": "Bharat Viswanadham"}}, "url": "https://github.com/apache/ozone/commit/8d90c9371741410f4b4f0e531a88de238d42c163", "committedDate": "2020-07-28T19:50:58Z", "message": "HDDS-4044. Deprecate ozone.s3g.volume.name."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2OTc0OTIw", "url": "https://github.com/apache/ozone/pull/1270#pullrequestreview-456974920", "createdAt": "2020-07-28T20:10:37Z", "commit": {"oid": "8d90c9371741410f4b4f0e531a88de238d42c163"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMDoxMDozN1rOG4c6Sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMDoxMDozN1rOG4c6Sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg0NzExNQ==", "bodyText": "nit. space before  'configurations'.\n'configurations' --> 'configuration'\n'all S3Gateway use' --> 'all S3Gateway buckets use' ?", "url": "https://github.com/apache/ozone/pull/1270#discussion_r461847115", "createdAt": "2020-07-28T20:10:37Z", "author": {"login": "avijayanhwx"}, "path": "hadoop-ozone/ozone-manager/src/main/java/org/apache/hadoop/ozone/om/OzoneManager.java", "diffHunk": "@@ -3525,9 +3526,10 @@ private void addS3GVolumeToDB() throws IOException {\n     String dbVolumeKey = metadataManager.getVolumeKey(s3VolumeName);\n \n     if (!s3VolumeName.equals(OzoneConfigKeys.OZONE_S3_VOLUME_NAME_DEFAULT)) {\n-      LOG.warn(\"Make sure that all S3Gateway use same volume name.\" +\n-          \" Otherwise user need to manually create/configure Volume \" +\n-          \"configured by S3Gateway\");\n+      LOG.warn(OZONE_S3_VOLUME_NAME + \"configurations is deprecated. If \" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d90c9371741410f4b4f0e531a88de238d42c163"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7e4a04600d7b367c5c93126abe18a209ac7796d", "author": {"user": {"login": "bharatviswa504", "name": "Bharat Viswanadham"}}, "url": "https://github.com/apache/ozone/commit/a7e4a04600d7b367c5c93126abe18a209ac7796d", "committedDate": "2020-08-04T17:41:04Z", "message": "address review comments:"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2e6af7f4fc8dbfb795da4ffa756362521477700b", "author": {"user": {"login": "bharatviswa504", "name": "Bharat Viswanadham"}}, "url": "https://github.com/apache/ozone/commit/2e6af7f4fc8dbfb795da4ffa756362521477700b", "committedDate": "2020-07-28T23:34:20Z", "message": "fix doc and test"}, "afterCommit": {"oid": "a7e4a04600d7b367c5c93126abe18a209ac7796d", "author": {"user": {"login": "bharatviswa504", "name": "Bharat Viswanadham"}}, "url": "https://github.com/apache/ozone/commit/a7e4a04600d7b367c5c93126abe18a209ac7796d", "committedDate": "2020-08-04T17:41:04Z", "message": "address review comments:"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxMDQ0NzM0", "url": "https://github.com/apache/ozone/pull/1270#pullrequestreview-461044734", "createdAt": "2020-08-04T18:00:00Z", "commit": {"oid": "a7e4a04600d7b367c5c93126abe18a209ac7796d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2606, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}