{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0ODUzODM1", "number": 1677, "title": "HDDS-4562. Old bucket needs to be accessible after the cluster was upgraded to the Quota version.", "bodyText": "What changes were proposed in this pull request?\nlong quotaInBytes are new fields in the bucketArgs, this field will go to 0 by default in the old bucket when the old cluster is upgraded. At this point, the data writes are rejected.\nThis is similar to creating a bucket without specifying quotaInBytes, where quotaInBytes is set to -1 by default via getQuotaValue. We can use 0 as a special term.\n\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-4562\nHow was this patch tested?\nut added", "createdAt": "2020-12-09T02:38:03Z", "url": "https://github.com/apache/ozone/pull/1677", "merged": true, "mergeCommit": {"oid": "0687cc538bfa2fbe5f8f7dc2f05183c01fb7a6ba"}, "closed": true, "closedAt": "2020-12-23T15:38:07Z", "author": {"login": "captainzmc"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdlHuJ_gFqTU1MDA4NDgyMw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdn8CTVAFqTU1NTk5MTY1Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwMDg0ODIz", "url": "https://github.com/apache/ozone/pull/1677#pullrequestreview-550084823", "createdAt": "2020-12-11T13:12:11Z", "commit": {"oid": "d0256ab086e492e0c0142207bb64c879362b2de0"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwNTAzOTEx", "url": "https://github.com/apache/ozone/pull/1677#pullrequestreview-550503911", "createdAt": "2020-12-11T19:07:24Z", "commit": {"oid": "d0256ab086e492e0c0142207bb64c879362b2de0"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d0256ab086e492e0c0142207bb64c879362b2de0", "author": {"user": {"login": "captainzmc", "name": "micah zhao"}}, "url": "https://github.com/apache/ozone/commit/d0256ab086e492e0c0142207bb64c879362b2de0", "committedDate": "2020-12-09T02:13:25Z", "message": "fix style"}, "afterCommit": {"oid": "2b61f809783986ba5ee4d140de95d457432af78c", "author": {"user": {"login": "captainzmc", "name": "micah zhao"}}, "url": "https://github.com/apache/ozone/commit/2b61f809783986ba5ee4d140de95d457432af78c", "committedDate": "2020-12-14T07:03:45Z", "message": "fix review issues"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7833495b87022a956dd1f7d4d217985e488f099d", "author": {"user": {"login": "captainzmc", "name": "micah zhao"}}, "url": "https://github.com/apache/ozone/commit/7833495b87022a956dd1f7d4d217985e488f099d", "committedDate": "2020-12-14T11:57:30Z", "message": "fix namespace quota."}, "afterCommit": {"oid": "265bf1db8f1ecdf2dedc932a95d0b10872555738", "author": {"user": {"login": "captainzmc", "name": "micah zhao"}}, "url": "https://github.com/apache/ozone/commit/265bf1db8f1ecdf2dedc932a95d0b10872555738", "committedDate": "2020-12-14T13:04:35Z", "message": "fix namespace quota."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxOTc1MDM4", "url": "https://github.com/apache/ozone/pull/1677#pullrequestreview-551975038", "createdAt": "2020-12-14T23:19:33Z", "commit": {"oid": "ed17532fb5702f9a3429d1909d9cb1a4dea94824"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMzoxOTozM1rOIFxDuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMzoxOTozM1rOIFxDuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjkxNzU2Mw==", "bodyText": "Why do we need to do this during set Operation?", "url": "https://github.com/apache/ozone/pull/1677#discussion_r542917563", "createdAt": "2020-12-14T23:19:33Z", "author": {"login": "bharatviswa504"}, "path": "hadoop-ozone/client/src/main/java/org/apache/hadoop/ozone/client/rpc/RpcClient.java", "diffHunk": "@@ -291,9 +291,10 @@ public boolean setVolumeOwner(String volumeName, String owner)\n   public void setVolumeQuota(String volumeName, long quotaInCounts,\n       long quotaInBytes) throws IOException {\n     HddsClientUtils.verifyResourceName(volumeName);\n-    verifyCountsQuota(quotaInCounts);\n-    verifySpaceQuota(quotaInBytes);\n-    ozoneManagerClient.setQuota(volumeName, quotaInCounts, quotaInBytes);\n+    verifyCountsQuota(getQuotaValue(quotaInCounts));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed17532fb5702f9a3429d1909d9cb1a4dea94824"}, "originalPosition": 7}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ed17532fb5702f9a3429d1909d9cb1a4dea94824", "author": {"user": {"login": "captainzmc", "name": "micah zhao"}}, "url": "https://github.com/apache/ozone/commit/ed17532fb5702f9a3429d1909d9cb1a4dea94824", "committedDate": "2020-12-14T15:36:35Z", "message": "trigger new CI"}, "afterCommit": {"oid": "58b555780f1835356d1415f73672b66db9a931dc", "author": {"user": {"login": "captainzmc", "name": "micah zhao"}}, "url": "https://github.com/apache/ozone/commit/58b555780f1835356d1415f73672b66db9a931dc", "committedDate": "2020-12-15T07:00:07Z", "message": "fix bucket quotaInBytes."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "58b555780f1835356d1415f73672b66db9a931dc", "author": {"user": {"login": "captainzmc", "name": "micah zhao"}}, "url": "https://github.com/apache/ozone/commit/58b555780f1835356d1415f73672b66db9a931dc", "committedDate": "2020-12-15T07:00:07Z", "message": "fix bucket quotaInBytes."}, "afterCommit": {"oid": "5b88e5160e267400ef8f9298911a63a5bd600d44", "author": {"user": {"login": "captainzmc", "name": "micah zhao"}}, "url": "https://github.com/apache/ozone/commit/5b88e5160e267400ef8f9298911a63a5bd600d44", "committedDate": "2020-12-15T07:11:49Z", "message": "fix bucket quotaInBytes."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5b88e5160e267400ef8f9298911a63a5bd600d44", "author": {"user": {"login": "captainzmc", "name": "micah zhao"}}, "url": "https://github.com/apache/ozone/commit/5b88e5160e267400ef8f9298911a63a5bd600d44", "committedDate": "2020-12-15T07:11:49Z", "message": "fix bucket quotaInBytes."}, "afterCommit": {"oid": "a38bd49a7c928557ec5346047191bc699dbb3b27", "author": {"user": {"login": "captainzmc", "name": "micah zhao"}}, "url": "https://github.com/apache/ozone/commit/a38bd49a7c928557ec5346047191bc699dbb3b27", "committedDate": "2020-12-15T07:16:56Z", "message": "fix bucket quotaInBytes."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a38bd49a7c928557ec5346047191bc699dbb3b27", "author": {"user": {"login": "captainzmc", "name": "micah zhao"}}, "url": "https://github.com/apache/ozone/commit/a38bd49a7c928557ec5346047191bc699dbb3b27", "committedDate": "2020-12-15T07:16:56Z", "message": "fix bucket quotaInBytes."}, "afterCommit": {"oid": "576e3d399ab78663dd4398b9b255f4dbba2508de", "author": {"user": {"login": "captainzmc", "name": "micah zhao"}}, "url": "https://github.com/apache/ozone/commit/576e3d399ab78663dd4398b9b255f4dbba2508de", "committedDate": "2020-12-15T07:18:26Z", "message": "fix bucket quotaInBytes."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc0ec8be7e745e64dc8159df3a86ff8eb9e94e51", "author": {"user": {"login": "captainzmc", "name": "micah zhao"}}, "url": "https://github.com/apache/ozone/commit/bc0ec8be7e745e64dc8159df3a86ff8eb9e94e51", "committedDate": "2020-12-15T08:07:54Z", "message": "fix bucket quotaInBytes."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "576e3d399ab78663dd4398b9b255f4dbba2508de", "author": {"user": {"login": "captainzmc", "name": "micah zhao"}}, "url": "https://github.com/apache/ozone/commit/576e3d399ab78663dd4398b9b255f4dbba2508de", "committedDate": "2020-12-15T07:18:26Z", "message": "fix bucket quotaInBytes."}, "afterCommit": {"oid": "bc0ec8be7e745e64dc8159df3a86ff8eb9e94e51", "author": {"user": {"login": "captainzmc", "name": "micah zhao"}}, "url": "https://github.com/apache/ozone/commit/bc0ec8be7e745e64dc8159df3a86ff8eb9e94e51", "committedDate": "2020-12-15T08:07:54Z", "message": "fix bucket quotaInBytes."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyNTEzOTgw", "url": "https://github.com/apache/ozone/pull/1677#pullrequestreview-552513980", "createdAt": "2020-12-15T14:27:52Z", "commit": {"oid": "bc0ec8be7e745e64dc8159df3a86ff8eb9e94e51"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxNDoyNzo1MlrOIGOE6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxNDoyOTozNlrOIGOKPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzM5MzAwMg==", "bodyText": "We can make this check in OM side and throw exception once user try to set quota on older version volumes/buckets.", "url": "https://github.com/apache/ozone/pull/1677#discussion_r543393002", "createdAt": "2020-12-15T14:27:52Z", "author": {"login": "linyiqun"}, "path": "hadoop-hdds/docs/content/feature/Quota.md", "diffHunk": "@@ -32,11 +32,16 @@ So far, we know that Ozone allows users to create volumes, buckets, and keys. A\n 1. Storage Space level quota\n \n Administrators should be able to define how much storage space a Volume or Bucket can use. The following Settings for Storage space quota are currently supported\uff1a\n+\n a. By default, the quota for volume and bucket is not enabled.\n+\n b. When volume quota is enabled, the total size of bucket quota cannot exceed volume.\n+\n c. Bucket quota can be set separately without enabling Volume quota. The size of bucket quota is unrestricted at this point.\n+\n d. Volume quota is not currently supported separately, and volume quota takes effect only if bucket quota is set. Because ozone only check the usedBytes of the bucket when we write the key.\n \n+e. If the cluster is upgraded from old version less than 1.1.0, use of quota on older volumes and buckets is not recommended. Since the old key is not counted to the bucket's usedBytes, the quota setting is inaccurate at this point.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc0ec8be7e745e64dc8159df3a86ff8eb9e94e51"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzM5NDM2Ng==", "bodyText": "The namespace quota introduction can also be added. We could file a new JIRA for tacking this.", "url": "https://github.com/apache/ozone/pull/1677#discussion_r543394366", "createdAt": "2020-12-15T14:29:36Z", "author": {"login": "linyiqun"}, "path": "hadoop-hdds/docs/content/feature/Quota.md", "diffHunk": "@@ -32,11 +32,16 @@ So far, we know that Ozone allows users to create volumes, buckets, and keys. A\n 1. Storage Space level quota", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc0ec8be7e745e64dc8159df3a86ff8eb9e94e51"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyNzE2NTc2", "url": "https://github.com/apache/ozone/pull/1677#pullrequestreview-552716576", "createdAt": "2020-12-15T17:50:08Z", "commit": {"oid": "bc0ec8be7e745e64dc8159df3a86ff8eb9e94e51"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxNzo1MDowOFrOIGYIDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxNzo1MToyNFrOIGYLmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzU1NzY0NQ==", "bodyText": "Minor:\nWhen volume quota is enabled, the total quota of the buckets, cannot exceed the volume quota.", "url": "https://github.com/apache/ozone/pull/1677#discussion_r543557645", "createdAt": "2020-12-15T17:50:08Z", "author": {"login": "bharatviswa504"}, "path": "hadoop-hdds/docs/content/feature/Quota.md", "diffHunk": "@@ -32,11 +32,16 @@ So far, we know that Ozone allows users to create volumes, buckets, and keys. A\n 1. Storage Space level quota\n \n Administrators should be able to define how much storage space a Volume or Bucket can use. The following Settings for Storage space quota are currently supported\uff1a\n+\n a. By default, the quota for volume and bucket is not enabled.\n+\n b. When volume quota is enabled, the total size of bucket quota cannot exceed volume.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc0ec8be7e745e64dc8159df3a86ff8eb9e94e51"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzU1ODU1NA==", "bodyText": "Can we also add documentation about the clear space quota and the behavior?", "url": "https://github.com/apache/ozone/pull/1677#discussion_r543558554", "createdAt": "2020-12-15T17:51:24Z", "author": {"login": "bharatviswa504"}, "path": "hadoop-hdds/docs/content/feature/Quota.md", "diffHunk": "@@ -32,11 +32,16 @@ So far, we know that Ozone allows users to create volumes, buckets, and keys. A\n 1. Storage Space level quota\n \n Administrators should be able to define how much storage space a Volume or Bucket can use. The following Settings for Storage space quota are currently supported\uff1a\n+\n a. By default, the quota for volume and bucket is not enabled.\n+\n b. When volume quota is enabled, the total size of bucket quota cannot exceed volume.\n+\n c. Bucket quota can be set separately without enabling Volume quota. The size of bucket quota is unrestricted at this point.\n+\n d. Volume quota is not currently supported separately, and volume quota takes effect only if bucket quota is set. Because ozone only check the usedBytes of the bucket when we write the key.\n \n+e. If the cluster is upgraded from old version less than 1.1.0, use of quota on older volumes and buckets is not recommended. Since the old key is not counted to the bucket's usedBytes, the quota setting is inaccurate at this point.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc0ec8be7e745e64dc8159df3a86ff8eb9e94e51"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b5c8b92187ec83c6652b97239b50d3b9bb00709f", "author": {"user": {"login": "captainzmc", "name": "micah zhao"}}, "url": "https://github.com/apache/ozone/commit/b5c8b92187ec83c6652b97239b50d3b9bb00709f", "committedDate": "2020-12-16T15:17:46Z", "message": "fix review issues and change default to -2."}, "afterCommit": {"oid": "7dce9f7a96c799d481f48316239a93865f1dac40", "author": {"user": {"login": "captainzmc", "name": "micah zhao"}}, "url": "https://github.com/apache/ozone/commit/7dce9f7a96c799d481f48316239a93865f1dac40", "committedDate": "2020-12-17T02:20:39Z", "message": "fix review issues and change default to -2."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7dce9f7a96c799d481f48316239a93865f1dac40", "author": {"user": {"login": "captainzmc", "name": "micah zhao"}}, "url": "https://github.com/apache/ozone/commit/7dce9f7a96c799d481f48316239a93865f1dac40", "committedDate": "2020-12-17T02:20:39Z", "message": "fix review issues and change default to -2."}, "afterCommit": {"oid": "c2704f79b1e64a683eabe6031157f4dd4248c691", "author": {"user": {"login": "captainzmc", "name": "micah zhao"}}, "url": "https://github.com/apache/ozone/commit/c2704f79b1e64a683eabe6031157f4dd4248c691", "committedDate": "2020-12-17T11:19:19Z", "message": "fix review issues and change default to -2."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0NzIwMzI4", "url": "https://github.com/apache/ozone/pull/1677#pullrequestreview-554720328", "createdAt": "2020-12-17T15:34:46Z", "commit": {"oid": "c2704f79b1e64a683eabe6031157f4dd4248c691"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxNTozNDo0NlrOIH7WfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxNTozNDo0NlrOIH7WfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTE4MzM1Ng==", "bodyText": "Why we change above condition check? Above check is to confirmed that the quota is enabled, not a validation check. If we want to make sure quota value is a positive value, I prefer to additionally add omVolumeArgs.getQuotaInNamespace() > 0 check.\nif (omVolumeArgs.getQuotaInNamespace() != OzoneConsts.QUOTA_RESET && omVolumeArgs.getQuotaInNamespace() > 0) {\n}", "url": "https://github.com/apache/ozone/pull/1677#discussion_r545183356", "createdAt": "2020-12-17T15:34:46Z", "author": {"login": "linyiqun"}, "path": "hadoop-ozone/ozone-manager/src/main/java/org/apache/hadoop/ozone/om/request/bucket/OMBucketCreateRequest.java", "diffHunk": "@@ -314,7 +314,9 @@ private BucketEncryptionInfoProto getBeinfo(\n    */\n   private void checkQuotaInNamespace(OmVolumeArgs omVolumeArgs,\n       long allocatedNamespace) throws IOException {\n-    if (omVolumeArgs.getQuotaInNamespace() != OzoneConsts.QUOTA_RESET) {\n+    // Client has ensured that no negative values other than -1 (clear quota)\n+    // will occur when quota is set.\n+    if (omVolumeArgs.getQuotaInNamespace() > OzoneConsts.QUOTA_RESET) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2704f79b1e64a683eabe6031157f4dd4248c691"}, "originalPosition": 7}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d7ef4e8ad5e053bb6bfea12e63abd6a47abcdb3f", "author": {"user": {"login": "captainzmc", "name": "micah zhao"}}, "url": "https://github.com/apache/ozone/commit/d7ef4e8ad5e053bb6bfea12e63abd6a47abcdb3f", "committedDate": "2020-12-17T14:47:36Z", "message": "trigger new CI"}, "afterCommit": {"oid": "828f2e370d3164f24bdb811f0c48508617336a66", "author": {"user": {"login": "captainzmc", "name": "micah zhao"}}, "url": "https://github.com/apache/ozone/commit/828f2e370d3164f24bdb811f0c48508617336a66", "committedDate": "2020-12-18T02:15:08Z", "message": "fix review issues and change default to -2."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "554c9a86c1ae468501141fcd62944a62b109926f", "author": {"user": {"login": "captainzmc", "name": "micah zhao"}}, "url": "https://github.com/apache/ozone/commit/554c9a86c1ae468501141fcd62944a62b109926f", "committedDate": "2020-12-18T06:02:55Z", "message": "fix review issues and change default to -2."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "828f2e370d3164f24bdb811f0c48508617336a66", "author": {"user": {"login": "captainzmc", "name": "micah zhao"}}, "url": "https://github.com/apache/ozone/commit/828f2e370d3164f24bdb811f0c48508617336a66", "committedDate": "2020-12-18T02:15:08Z", "message": "fix review issues and change default to -2."}, "afterCommit": {"oid": "554c9a86c1ae468501141fcd62944a62b109926f", "author": {"user": {"login": "captainzmc", "name": "micah zhao"}}, "url": "https://github.com/apache/ozone/commit/554c9a86c1ae468501141fcd62944a62b109926f", "committedDate": "2020-12-18T06:02:55Z", "message": "fix review issues and change default to -2."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1MjEyMTMx", "url": "https://github.com/apache/ozone/pull/1677#pullrequestreview-555212131", "createdAt": "2020-12-18T07:03:15Z", "commit": {"oid": "554c9a86c1ae468501141fcd62944a62b109926f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQwNzowMzoxNVrOIIVaCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQwNzowMzoxNVrOIIVaCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTYxMDI0OQ==", "bodyText": "#1677 (comment)\nAny reason for moving back to int64?", "url": "https://github.com/apache/ozone/pull/1677#discussion_r545610249", "createdAt": "2020-12-18T07:03:15Z", "author": {"login": "bharatviswa504"}, "path": "hadoop-ozone/interface-client/src/main/proto/OmClientProtocol.proto", "diffHunk": "@@ -503,8 +503,8 @@ message BucketInfo {\n     optional string sourceVolume = 12;\n     optional string sourceBucket = 13;\n     optional uint64 usedBytes = 14;\n-    optional uint64 quotaInBytes = 15;\n-    optional uint64 quotaInNamespace = 16;\n+    optional int64 quotaInBytes = 15 [default = -2];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "554c9a86c1ae468501141fcd62944a62b109926f"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1OTkxNjU3", "url": "https://github.com/apache/ozone/pull/1677#pullrequestreview-555991657", "createdAt": "2020-12-20T07:16:31Z", "commit": {"oid": "554c9a86c1ae468501141fcd62944a62b109926f"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMFQwNzoxNjozMVrOIJBkxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMFQwNzoxNjozMVrOIJBkxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjMzMzg5NQ==", "bodyText": "Interesting, thanks for info.", "url": "https://github.com/apache/ozone/pull/1677#discussion_r546333895", "createdAt": "2020-12-20T07:16:31Z", "author": {"login": "bharatviswa504"}, "path": "hadoop-ozone/interface-client/src/main/proto/OmClientProtocol.proto", "diffHunk": "@@ -503,8 +503,8 @@ message BucketInfo {\n     optional string sourceVolume = 12;\n     optional string sourceBucket = 13;\n     optional uint64 usedBytes = 14;\n-    optional uint64 quotaInBytes = 15;\n-    optional uint64 quotaInNamespace = 16;\n+    optional int64 quotaInBytes = 15 [default = -2];", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTYxMDI0OQ=="}, "originalCommit": {"oid": "554c9a86c1ae468501141fcd62944a62b109926f"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2071, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}