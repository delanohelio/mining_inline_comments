{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU5MTgzNTAy", "number": 1276, "title": "HDDS-4046. Extensible subcommands for CLI applications", "bodyText": "What changes were proposed in this pull request?\nHDDS-3814 proposed a new subcommand which deletes the column families from the rocksdb tables.\nBut during the discussion there was no consensus if it's safe to add or not.\nThis patch makes the sub-commands easy to extend. Anybody can extend the main ozone shell commands with new sub-commands.\nSub-commands can be added to the classpath and activated by Service Provider Interface (meta-inf/services/...).\nThis is an optional feature, current approach works forward (annotation based sub-command definition).\nAnd it's not only about HDDS-3814.\nIt makes it easier to organize the sub-commands. (For example RDBStore related commands can be moved to the rdb classes, they will be picked up).\nIt makes possible to provide additional, ad-hoc tools during debug or support which can help to solve/debug specific problems.\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-4046\nHow was this patch tested?\nWith CI. The changed subcommands are covered by acceptance tests. Also tested manually with ozone sh.", "createdAt": "2020-07-30T13:36:44Z", "url": "https://github.com/apache/ozone/pull/1276", "merged": true, "mergeCommit": {"oid": "76c448f65bccd18bf3107c6fa7fd058b882f2f87"}, "closed": true, "closedAt": "2020-08-11T06:07:04Z", "author": {"login": "elek"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc4eHFiAH2gAyNDU5MTgzNTAyOjMyOTAxZmE4ODA0MTJiNTc1YjQxMDVhM2FhZDUyNDY4ZWFlNGI3Njg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc9jktPAH2gAyNDU5MTgzNTAyOjU1NjhmMTNjMWJlNzMwYjFmZWFmY2YzN2UyMDE0NmJiYzkxYTdhZGM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "32901fa880412b575b4105a3aad52468eae4b768", "author": {"user": {"login": "elek", "name": "Elek, M\u00e1rton"}}, "url": "https://github.com/apache/ozone/commit/32901fa880412b575b4105a3aad52468eae4b768", "committedDate": "2020-07-25T19:50:44Z", "message": "extension"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a4af33dcf132fecb08e177d9b20073f99fe324c", "author": {"user": {"login": "elek", "name": "Elek, M\u00e1rton"}}, "url": "https://github.com/apache/ozone/commit/2a4af33dcf132fecb08e177d9b20073f99fe324c", "committedDate": "2020-07-27T07:40:34Z", "message": "Merge remote-tracking branch 'origin/master' into extensible-api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cc584a9015baddf51e9586bfecc779f9a5383d8", "author": {"user": {"login": "elek", "name": "Elek, M\u00e1rton"}}, "url": "https://github.com/apache/ozone/commit/8cc584a9015baddf51e9586bfecc779f9a5383d8", "committedDate": "2020-07-27T08:03:12Z", "message": "fix ozone shell extension points"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b5fea75949deb66e7aaad7c3553b54f9e6b54ef", "author": {"user": {"login": "elek", "name": "Elek, M\u00e1rton"}}, "url": "https://github.com/apache/ozone/commit/9b5fea75949deb66e7aaad7c3553b54f9e6b54ef", "committedDate": "2020-07-27T08:51:45Z", "message": "fix ldb"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ef9b6df12aa97c063aec476c010faa60be3dadd", "author": {"user": {"login": "elek", "name": "Elek, M\u00e1rton"}}, "url": "https://github.com/apache/ozone/commit/4ef9b6df12aa97c063aec476c010faa60be3dadd", "committedDate": "2020-07-30T12:19:08Z", "message": "fix checkstyle and token command"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5OTQ5ODkw", "url": "https://github.com/apache/ozone/pull/1276#pullrequestreview-459949890", "createdAt": "2020-08-03T11:24:59Z", "commit": {"oid": "4ef9b6df12aa97c063aec476c010faa60be3dadd"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxMToyNDo1OVrOG612mA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxMToyNDo1OVrOG612mA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDM1MjkyMA==", "bodyText": "Won't we need\n@MetaInfServices(SubcommandWithParent.class)\n\ntoo?\nCurrently OMAdmin is added to OzoneAdmin from the parent, so it's not a problem.  (#1285 will allow inverting subcommand registration for OzoneAdmin, too.)", "url": "https://github.com/apache/ozone/pull/1276#discussion_r464352920", "createdAt": "2020-08-03T11:24:59Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/admin/om/OMAdmin.java", "diffHunk": "@@ -50,7 +51,7 @@\n     subcommands = {\n         GetServiceRolesSubcommand.class\n     })\n-public class OMAdmin extends GenericCli {\n+public class OMAdmin extends GenericCli implements SubcommandWithParent {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ef9b6df12aa97c063aec476c010faa60be3dadd"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5568f13c1be730b1feafcf37e20146bbc91a7adc", "author": {"user": {"login": "elek", "name": "Elek, M\u00e1rton"}}, "url": "https://github.com/apache/ozone/commit/5568f13c1be730b1feafcf37e20146bbc91a7adc", "committedDate": "2020-08-10T15:02:14Z", "message": "fix OmAdmin annotation"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2622, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}