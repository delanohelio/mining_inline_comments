{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1MTA1NjM5", "number": 1306, "title": "HDDS-4051. Remove whitelist/blacklist terminology from Ozone", "bodyText": "What changes were proposed in this pull request?\n\nReplace whitelist/blacklist with allowlist/blocklist\n\nThere are still some occurrences of these terminologies in javascript frameworks like bootstrap and angular. Hopefully, these frameworks will update these terminologies in their future releases.\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-4051\nHow was this patch tested?\nNo test is needed.", "createdAt": "2020-08-09T04:31:30Z", "url": "https://github.com/apache/ozone/pull/1306", "merged": true, "mergeCommit": {"oid": "d418f00d7ee12f6b35b5baca5249add27b8ff1d4"}, "closed": true, "closedAt": "2020-08-10T16:43:03Z", "author": {"login": "vivekratnavel"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc9F5N2gH2gAyNDY1MTA1NjM5Ojc0MzIwOWIxZmI4ZTM2NmNmM2RiZGNjYmNkNTViZDE0ZWQ5NzU3ZjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc9kmB5gFqTQ2NDM3NjUyOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "743209b1fb8e366cf3dbdccbcd55bd14ed9757f6", "author": {"user": {"login": "vivekratnavel", "name": "Vivek Ratnavel Subramanian"}}, "url": "https://github.com/apache/ozone/commit/743209b1fb8e366cf3dbdccbcd55bd14ed9757f6", "committedDate": "2020-08-09T04:27:29Z", "message": "HDDS-4051. Remove whitelist/blacklist terminology from Ozone"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzODQ4NTQ1", "url": "https://github.com/apache/ozone/pull/1306#pullrequestreview-463848545", "createdAt": "2020-08-09T06:57:10Z", "commit": {"oid": "743209b1fb8e366cf3dbdccbcd55bd14ed9757f6"}, "state": "COMMENTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQwNjo1NzoxMFrOG94ulw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQwNjo1OTowNlrOG94vHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU0NTc1MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * Blocklist tasks that failed reprocess step more than threshold times.\n          \n          \n            \n               * Ignore tasks that failed reprocess step more than threshold times.", "url": "https://github.com/apache/ozone/pull/1306#discussion_r467545751", "createdAt": "2020-08-09T06:57:10Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/recon/src/main/java/org/apache/hadoop/ozone/recon/tasks/ReconTaskControllerImpl.java", "diffHunk": "@@ -149,15 +149,15 @@ public synchronized void consumeOMEvents(OMUpdateEventBatch events,\n   }\n \n   /**\n-   * Blacklist tasks that failed reprocess step more than threshold times.\n+   * Blocklist tasks that failed reprocess step more than threshold times.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "743209b1fb8e366cf3dbdccbcd55bd14ed9757f6"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU0NTc1Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              private void blocklistFailedTasks(List<String> failedTasks) {\n          \n          \n            \n              private void ignoreFailedTasks(List<String> failedTasks) {", "url": "https://github.com/apache/ozone/pull/1306#discussion_r467545756", "createdAt": "2020-08-09T06:57:21Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/recon/src/main/java/org/apache/hadoop/ozone/recon/tasks/ReconTaskControllerImpl.java", "diffHunk": "@@ -149,15 +149,15 @@ public synchronized void consumeOMEvents(OMUpdateEventBatch events,\n   }\n \n   /**\n-   * Blacklist tasks that failed reprocess step more than threshold times.\n+   * Blocklist tasks that failed reprocess step more than threshold times.\n    * @param failedTasks list of failed tasks.\n    */\n-  private void blacklistFailedTasks(List<String> failedTasks) {\n+  private void blocklistFailedTasks(List<String> failedTasks) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "743209b1fb8e366cf3dbdccbcd55bd14ed9757f6"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU0NTc4Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    LOG.info(\"Blocklisting Task since it failed retry and \" +\n          \n          \n            \n                    LOG.info(\"Ignoring task since it failed retry and \" +", "url": "https://github.com/apache/ozone/pull/1306#discussion_r467545782", "createdAt": "2020-08-09T06:57:41Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/recon/src/main/java/org/apache/hadoop/ozone/recon/tasks/ReconTaskControllerImpl.java", "diffHunk": "@@ -149,15 +149,15 @@ public synchronized void consumeOMEvents(OMUpdateEventBatch events,\n   }\n \n   /**\n-   * Blacklist tasks that failed reprocess step more than threshold times.\n+   * Blocklist tasks that failed reprocess step more than threshold times.\n    * @param failedTasks list of failed tasks.\n    */\n-  private void blacklistFailedTasks(List<String> failedTasks) {\n+  private void blocklistFailedTasks(List<String> failedTasks) {\n     for (String taskName : failedTasks) {\n       LOG.info(\"Reprocess step failed for task {}.\", taskName);\n       if (taskFailureCounter.get(taskName).incrementAndGet() >\n           TASK_FAILURE_THRESHOLD) {\n-        LOG.info(\"Blacklisting Task since it failed retry and \" +\n+        LOG.info(\"Blocklisting Task since it failed retry and \" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "743209b1fb8e366cf3dbdccbcd55bd14ed9757f6"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU0NTgwOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              public void testBadBehavedTaskBlocklisting() throws Exception {\n          \n          \n            \n              public void testBadBehavedTaskIsIgnored() throws Exception {", "url": "https://github.com/apache/ozone/pull/1306#discussion_r467545809", "createdAt": "2020-08-09T06:58:02Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/recon/src/test/java/org/apache/hadoop/ozone/recon/tasks/TestReconTaskControllerImpl.java", "diffHunk": "@@ -131,7 +131,7 @@ public void testFailedTaskRetryLogic() throws Exception {\n   }\n \n   @Test\n-  public void testBadBehavedTaskBlacklisting() throws Exception {\n+  public void testBadBehavedTaskBlocklisting() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "743209b1fb8e366cf3dbdccbcd55bd14ed9757f6"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU0NTgxNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                //Should be blocklisted now.\n          \n          \n            \n                //Should be ignored now.", "url": "https://github.com/apache/ozone/pull/1306#discussion_r467545814", "createdAt": "2020-08-09T06:58:08Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/recon/src/test/java/org/apache/hadoop/ozone/recon/tasks/TestReconTaskControllerImpl.java", "diffHunk": "@@ -151,7 +151,7 @@ public void testBadBehavedTaskBlacklisting() throws Exception {\n           .get(dummyReconDBTask.getTaskName()));\n     }\n \n-    //Should be blacklisted now.\n+    //Should be blocklisted now.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "743209b1fb8e366cf3dbdccbcd55bd14ed9757f6"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU0NTg1OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      blocklistFailedTasks(reprocessFailedTasks);\n          \n          \n            \n                      ignoreFailedTasks(reprocessFailedTasks);", "url": "https://github.com/apache/ozone/pull/1306#discussion_r467545858", "createdAt": "2020-08-09T06:58:40Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/recon/src/main/java/org/apache/hadoop/ozone/recon/tasks/ReconTaskControllerImpl.java", "diffHunk": "@@ -140,7 +140,7 @@ public synchronized void consumeOMEvents(OMUpdateEventBatch events,\n           results = executorService.invokeAll(tasks);\n           List<String> reprocessFailedTasks =\n               processTaskResults(results, events);\n-          blacklistFailedTasks(reprocessFailedTasks);\n+          blocklistFailedTasks(reprocessFailedTasks);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "743209b1fb8e366cf3dbdccbcd55bd14ed9757f6"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU0NTg4Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * (blocklisted).\n          \n          \n            \n               * (ignored).", "url": "https://github.com/apache/ozone/pull/1306#discussion_r467545886", "createdAt": "2020-08-09T06:59:06Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/recon/src/main/java/org/apache/hadoop/ozone/recon/tasks/ReconTaskControllerImpl.java", "diffHunk": "@@ -94,7 +94,7 @@ public void registerTask(ReconOmTask task) {\n    * For every registered task, we try process step twice and then reprocess\n    * once (if process failed twice) to absorb the events. If a task has failed\n    * reprocess call more than 2 times across events, it is unregistered\n-   * (blacklisted).\n+   * (blocklisted).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "743209b1fb8e366cf3dbdccbcd55bd14ed9757f6"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc00022548a5977a63e04575e313018f7e9b757a", "author": {"user": {"login": "vivekratnavel", "name": "Vivek Ratnavel Subramanian"}}, "url": "https://github.com/apache/ozone/commit/bc00022548a5977a63e04575e313018f7e9b757a", "committedDate": "2020-08-09T19:27:53Z", "message": "Apply suggestions from code review\n\nCo-authored-by: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0Mzc2NTI4", "url": "https://github.com/apache/ozone/pull/1306#pullrequestreview-464376528", "createdAt": "2020-08-10T16:13:35Z", "commit": {"oid": "bc00022548a5977a63e04575e313018f7e9b757a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2700, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}