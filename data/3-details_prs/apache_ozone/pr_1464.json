{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2MTcyNzg2", "number": 1464, "title": "HDDS-4299. Display Ratis version with ozone version", "bodyText": "What changes were proposed in this pull request?\nDuring the development Ozone uses snapshot releases from Ratis. It can be useful to print out the exact version of the used Ratis as part of the output of \"ozone version\".\nRatis versions are part of the jar files since RATIS-1050\nIt can make the testing easier, as it's easier to check which Ratis version is used.\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-4299\nHow was this patch tested?\n ./bin/ozone version\n                  //////////////\n               ////////////////////\n            ////////     ////////////////\n           //////      ////////////////\n          /////      ////////////////  /\n         /////            ////////   ///\n         ////           ////////    /////\n        /////         ////////////////\n        /////       ////////////////   //\n         ////     ///////////////   /////\n         /////  ///////////////     ////\n          /////       //////      /////\n           //////   //////       /////\n             ///////////     ////////\n               //////  ////////////\n               ///   //////////\n              /    1.1.0-SNAPSHOT(Denali)\n\nSource code repository git@github.com:apache/hadoop-ozone.git -r b2c6c3b61572bfd9b765f106ab2cf501db55e5e8\nCompiled by elek on 2020-10-01T10:35Z\nCompiled with protoc 2.5.0\nFrom source with checksum ff92fd89808d10a6ee1dc21db8276427\nWith Apache Ratis: 1.1.0-11689cd-SNAPSHOT from 11689cd536b05bde323c9c6c6b57a8e82a60b680\n\nUsing HDDS 1.1.0-SNAPSHOT\nSource code repository git@github.com:apache/hadoop-ozone.git -r b2c6c3b61572bfd9b765f106ab2cf501db55e5e8\nCompiled by elek on 2020-10-01T10:34Z\nCompiled with protoc 2.5.0\nFrom source with checksum d0e6e752e4d52fb0f05063e16ade73d7", "createdAt": "2020-10-01T11:09:19Z", "url": "https://github.com/apache/ozone/pull/1464", "merged": true, "mergeCommit": {"oid": "8cd86a682ba0dc2b493c7db7af05ae5b39ef38a0"}, "closed": true, "closedAt": "2020-10-05T11:30:31Z", "author": {"login": "elek"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdOPXWFgH2gAyNDk2MTcyNzg2OjMyYTE0MDY4Nzk5NTczYjAyYjU1NTQ5YzU2Njk2NDgwNDAzM2Q1OTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdPgFGfAH2gAyNDk2MTcyNzg2OjM1MGE1ZTgyMGQ2OTkyMjEwYWEzNDJjZGMyNmJmN2I2NDM0ZDk3ODI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "32a14068799573b02b55549c566964804033d597", "author": {"user": {"login": "elek", "name": "Elek, M\u00e1rton"}}, "url": "https://github.com/apache/ozone/commit/32a14068799573b02b55549c566964804033d597", "committedDate": "2020-10-01T11:06:15Z", "message": "HDDS-4299. Display Ratis version with ozone version"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwNDU1MTIx", "url": "https://github.com/apache/ozone/pull/1464#pullrequestreview-500455121", "createdAt": "2020-10-01T15:15:08Z", "commit": {"oid": "32a14068799573b02b55549c566964804033d597"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxNToxNTowOFrOHbPRUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxNToxNTowOFrOHbPRUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODMyMzc5NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  LoggerFactory.getLogger(getClass()).warn(\"Could not read '\" +\n          \n          \n            \n                      RATIS_VERSION_PROPERTIES, ex);\n          \n          \n            \n                  LoggerFactory.getLogger(getClass()).warn(\"Could not read \" +\n          \n          \n            \n                      RATIS_VERSION_PROPERTIES, ex);", "url": "https://github.com/apache/ozone/pull/1464#discussion_r498323795", "createdAt": "2020-10-01T15:15:08Z", "author": {"login": "adoroszlai"}, "path": "hadoop-hdds/common/src/main/java/org/apache/hadoop/hdds/utils/RatisVersionInfo.java", "diffHunk": "@@ -0,0 +1,61 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.hadoop.hdds.utils;\n+\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.util.Properties;\n+\n+import org.apache.hadoop.util.ThreadUtil;\n+\n+import org.slf4j.LoggerFactory;\n+\n+/**\n+ * This class returns build information about Ratis projects.\n+ */\n+public class RatisVersionInfo {\n+\n+  private static final String RATIS_VERSION_PROPERTIES =\n+      \"ratis-version.properties\";\n+\n+  private final Properties info = new Properties();\n+\n+  public RatisVersionInfo() {\n+    try (InputStream is = ThreadUtil.getResourceAsStream(\n+        getClass().getClassLoader(),\n+        RATIS_VERSION_PROPERTIES)) {\n+      info.load(is);\n+    } catch (IOException ex) {\n+      LoggerFactory.getLogger(getClass()).warn(\"Could not read '\" +\n+          RATIS_VERSION_PROPERTIES, ex);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32a14068799573b02b55549c566964804033d597"}, "originalPosition": 45}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "350a5e820d6992210aa342cdc26bf7b6434d9782", "author": {"user": {"login": "elek", "name": "Elek, M\u00e1rton"}}, "url": "https://github.com/apache/ozone/commit/350a5e820d6992210aa342cdc26bf7b6434d9782", "committedDate": "2020-10-05T09:08:38Z", "message": "Update hadoop-hdds/common/src/main/java/org/apache/hadoop/hdds/utils/RatisVersionInfo.java\n\nCo-authored-by: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2598, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}