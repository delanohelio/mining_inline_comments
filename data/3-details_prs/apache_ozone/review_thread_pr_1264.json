{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3MTA1NDI4", "number": 1264, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwNzoyODo0MFrOETISlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQwNDowMTozMFrOET6_pw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NDk0MjI5OnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/HadoopNestedDirGenerator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwNzoyODo0MFrOG4sBdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxODozMToxNVrOG5E-yQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA5NDcwOA==", "bodyText": "Sometimes freon is executed from 'shell' sometimes from 'command line', BaseFreonGenerator.printReport already handle this and we can follow this approach.\nAlong with this patch, can you change the \"System.out\" in https://github.com/apache/hadoop-ozone/blob/master/hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/HadoopDirTreeGenerator.java#L154 as well. Thanks!", "url": "https://github.com/apache/ozone/pull/1264#discussion_r462094708", "createdAt": "2020-07-29T07:28:40Z", "author": {"login": "rakeshadr"}, "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/HadoopNestedDirGenerator.java", "diffHunk": "@@ -109,5 +117,7 @@ private void createDir(long counter) throws Exception {\n       Path dir = new Path(rootPath.concat(\"/\").concat(childDir));\n       fileSystem.mkdirs(dir.getParent());\n     }\n+    System.out.println(\"\\nSuccessfully created directories. Total \" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95b00142732c241c4d060cf6bf7a9b0105eae59a"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjUwMzYyNQ==", "bodyText": "Thanks for the review Rakesh. I have updated the PR and also the logs of HadoopTreeDirGenerator as per your suggestions.", "url": "https://github.com/apache/ozone/pull/1264#discussion_r462503625", "createdAt": "2020-07-29T18:31:15Z", "author": {"login": "aryangupta1998"}, "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/HadoopNestedDirGenerator.java", "diffHunk": "@@ -109,5 +117,7 @@ private void createDir(long counter) throws Exception {\n       Path dir = new Path(rootPath.concat(\"/\").concat(childDir));\n       fileSystem.mkdirs(dir.getParent());\n     }\n+    System.out.println(\"\\nSuccessfully created directories. Total \" +", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA5NDcwOA=="}, "originalCommit": {"oid": "95b00142732c241c4d060cf6bf7a9b0105eae59a"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4ODkwNDQ0OnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/BaseFreonGenerator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQwMzo0MTo0MVrOG5R8qA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQwNjozMDo1NVrOG5U47Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjcxNjA3Mg==", "bodyText": "Latest patch looks good. Adding few minor comments:\nPlease add javadoc and change the parameter name 's' to 'msg', just to make it more readable.", "url": "https://github.com/apache/ozone/pull/1264#discussion_r462716072", "createdAt": "2020-07-30T03:41:41Z", "author": {"login": "rakeshadr"}, "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/BaseFreonGenerator.java", "diffHunk": "@@ -301,6 +301,15 @@ public void printReport() {\n     messages.forEach(print);\n   }\n \n+  public void print(String s){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62b639c3c784cca5665f14103e0a5aff9bd90de4"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjc2NDI2OQ==", "bodyText": "Added javadoc, changed 's' to 'msg'.", "url": "https://github.com/apache/ozone/pull/1264#discussion_r462764269", "createdAt": "2020-07-30T06:30:55Z", "author": {"login": "aryangupta1998"}, "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/BaseFreonGenerator.java", "diffHunk": "@@ -301,6 +301,15 @@ public void printReport() {\n     messages.forEach(print);\n   }\n \n+  public void print(String s){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjcxNjA3Mg=="}, "originalCommit": {"oid": "62b639c3c784cca5665f14103e0a5aff9bd90de4"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4ODkwNTQ5OnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/HadoopDirTreeGenerator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQwMzo0MjoxN1rOG5R9Sg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQwNjozMTozOFrOG5U58w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjcxNjIzNA==", "bodyText": "minor comment: please remove 'return null' inside the else block as below return is sufficient.", "url": "https://github.com/apache/ozone/pull/1264#discussion_r462716234", "createdAt": "2020-07-30T03:42:17Z", "author": {"login": "rakeshadr"}, "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/HadoopDirTreeGenerator.java", "diffHunk": "@@ -97,17 +97,25 @@\n \n   @Override\n   public Void call() throws Exception {\n-\n-    init();\n-    OzoneConfiguration configuration = createOzoneConfiguration();\n-    fileSystem = FileSystem.get(URI.create(rootPath), configuration);\n-\n-    contentGenerator = new ContentGenerator(fileSizeInBytes, bufferSize);\n-    timer = getMetrics().timer(\"file-create\");\n-\n-    runTests(this::createDir);\n+    String s;\n+    if (depth <= 0) {\n+      s = \"Invalid depth value, depth value should be greater than zero!\";\n+      print(s);\n+    } else if (span <= 0) {\n+      s = \"Invalid span value, span value should be greater than zero!\";\n+      print(s);\n+    } else {\n+      init();\n+      OzoneConfiguration configuration = createOzoneConfiguration();\n+      fileSystem = FileSystem.get(URI.create(rootPath), configuration);\n+\n+      contentGenerator = new ContentGenerator(fileSizeInBytes, bufferSize);\n+      timer = getMetrics().timer(\"file-create\");\n+\n+      runTests(this::createDir);\n+      return null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62b639c3c784cca5665f14103e0a5aff9bd90de4"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjc2NDUzMQ==", "bodyText": "Removed 'return null' statement inside else block.", "url": "https://github.com/apache/ozone/pull/1264#discussion_r462764531", "createdAt": "2020-07-30T06:31:38Z", "author": {"login": "aryangupta1998"}, "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/HadoopDirTreeGenerator.java", "diffHunk": "@@ -97,17 +97,25 @@\n \n   @Override\n   public Void call() throws Exception {\n-\n-    init();\n-    OzoneConfiguration configuration = createOzoneConfiguration();\n-    fileSystem = FileSystem.get(URI.create(rootPath), configuration);\n-\n-    contentGenerator = new ContentGenerator(fileSizeInBytes, bufferSize);\n-    timer = getMetrics().timer(\"file-create\");\n-\n-    runTests(this::createDir);\n+    String s;\n+    if (depth <= 0) {\n+      s = \"Invalid depth value, depth value should be greater than zero!\";\n+      print(s);\n+    } else if (span <= 0) {\n+      s = \"Invalid span value, span value should be greater than zero!\";\n+      print(s);\n+    } else {\n+      init();\n+      OzoneConfiguration configuration = createOzoneConfiguration();\n+      fileSystem = FileSystem.get(URI.create(rootPath), configuration);\n+\n+      contentGenerator = new ContentGenerator(fileSizeInBytes, bufferSize);\n+      timer = getMetrics().timer(\"file-create\");\n+\n+      runTests(this::createDir);\n+      return null;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjcxNjIzNA=="}, "originalCommit": {"oid": "62b639c3c784cca5665f14103e0a5aff9bd90de4"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4OTI1NTM1OnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/BaseFreonGenerator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQwNjo0MDoyMVrOG5VHZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQwNzowNToyM1rOG5WUJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjc2Nzk3NA==", "bodyText": "As this is base class, please remove the inherited class details here.\nyou can write something like,\n\"Print out reports with the given message.\"", "url": "https://github.com/apache/ozone/pull/1264#discussion_r462767974", "createdAt": "2020-07-30T06:40:21Z", "author": {"login": "rakeshadr"}, "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/BaseFreonGenerator.java", "diffHunk": "@@ -301,6 +301,19 @@ public void printReport() {\n     messages.forEach(print);\n   }\n \n+  /**\n+   * Print out the messages for HadoopNestedDirGenerator", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "96d54cce36fc658083ae1d0b5b4bd2705d6e8096"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjc4NzYyMw==", "bodyText": "Changed the javadoc.", "url": "https://github.com/apache/ozone/pull/1264#discussion_r462787623", "createdAt": "2020-07-30T07:05:23Z", "author": {"login": "aryangupta1998"}, "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/BaseFreonGenerator.java", "diffHunk": "@@ -301,6 +301,19 @@ public void printReport() {\n     messages.forEach(print);\n   }\n \n+  /**\n+   * Print out the messages for HadoopNestedDirGenerator", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjc2Nzk3NA=="}, "originalCommit": {"oid": "96d54cce36fc658083ae1d0b5b4bd2705d6e8096"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5MzI0OTY3OnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/BaseFreonGenerator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQwNDowMTozMFrOG57Slw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQwODozNzozNFrOG6AnUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzM5MzQzMQ==", "bodyText": "Given we only have one String msg here, we can eliminate thew List allocation here by just simply call\nprint.accept(msg) in line 313.", "url": "https://github.com/apache/ozone/pull/1264#discussion_r463393431", "createdAt": "2020-07-31T04:01:30Z", "author": {"login": "xiaoyuyao"}, "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/BaseFreonGenerator.java", "diffHunk": "@@ -301,6 +301,18 @@ public void printReport() {\n     messages.forEach(print);\n   }\n \n+  /**\n+   * Print out reports with the given message.\n+   */\n+  public void print(String msg){\n+    List<String> messages = new LinkedList<>();\n+    messages.add(msg);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9d81f51fbb3e54919d89802139f527477c47787"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzQ4MDY1OQ==", "bodyText": "Thanks @xiaoyuyao. Fixed the print function.", "url": "https://github.com/apache/ozone/pull/1264#discussion_r463480659", "createdAt": "2020-07-31T08:37:34Z", "author": {"login": "aryangupta1998"}, "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/BaseFreonGenerator.java", "diffHunk": "@@ -301,6 +301,18 @@ public void printReport() {\n     messages.forEach(print);\n   }\n \n+  /**\n+   * Print out reports with the given message.\n+   */\n+  public void print(String msg){\n+    List<String> messages = new LinkedList<>();\n+    messages.add(msg);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzM5MzQzMQ=="}, "originalCommit": {"oid": "e9d81f51fbb3e54919d89802139f527477c47787"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4053, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}