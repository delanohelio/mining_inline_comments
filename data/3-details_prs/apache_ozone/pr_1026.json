{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI4MzY5NDQ1", "number": 1026, "title": "HDDS-3330. TestDeleteWithSlowFollower is still flaky.", "bodyText": "What changes were proposed in this pull request?\nIncreased the watch timeout so that key.close() succeeds on the same pipeline with majority commit. Added some precondition checks to validate the follower.\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-3330\nHow was this patch tested?\nmanual running the test.", "createdAt": "2020-06-05T10:39:19Z", "url": "https://github.com/apache/ozone/pull/1026", "merged": true, "mergeCommit": {"oid": "51edc5a1fdd36ef21bf892280c0a6046d0833d10"}, "closed": true, "closedAt": "2020-06-09T03:22:31Z", "author": {"login": "bshashikant"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcoQOQFAH2gAyNDI4MzY5NDQ1OjAzNTU2OWM3MWViMjQzOWU4NDlmMDRkMTNmNDliNWYwNTMxYmY4OWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcpV4JvgFqTQyNjU2NjYzOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "035569c71eb2439e849f04d13f49b5f0531bf89d", "author": {"user": {"login": "bshashikant", "name": null}}, "url": "https://github.com/apache/ozone/commit/035569c71eb2439e849f04d13f49b5f0531bf89d", "committedDate": "2020-06-05T10:37:06Z", "message": "HDDS-3330. TestDeleteWithSlowFollower is still flaky."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a026c802d435ef23745db392ef2093aaaa16a274", "author": {"user": {"login": "bshashikant", "name": null}}, "url": "https://github.com/apache/ozone/commit/a026c802d435ef23745db392ef2093aaaa16a274", "committedDate": "2020-06-05T12:11:28Z", "message": "Added retry configs."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80fc5af3d0ed05b8ba76ed283456c98540595d17", "author": {"user": {"login": "bshashikant", "name": null}}, "url": "https://github.com/apache/ozone/commit/80fc5af3d0ed05b8ba76ed283456c98540595d17", "committedDate": "2020-06-05T12:18:48Z", "message": "Addressed compilatiin failure."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1MzYyNzY2", "url": "https://github.com/apache/ozone/pull/1026#pullrequestreview-425362766", "createdAt": "2020-06-05T14:40:36Z", "commit": {"oid": "80fc5af3d0ed05b8ba76ed283456c98540595d17"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNDo0MDozNlrOGfxVqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQxNDo0MDozNlrOGfxVqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTk2NzQwMQ==", "bodyText": "Do we want to fail the test if follower is no longer a follower, or should we just ignore test result in that case?  If the latter, it may be better to change this to Assume.assumeTrue.", "url": "https://github.com/apache/ozone/pull/1026#discussion_r435967401", "createdAt": "2020-06-05T14:40:36Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/integration-test/src/test/java/org/apache/hadoop/ozone/client/rpc/TestDeleteWithSlowFollower.java", "diffHunk": "@@ -221,7 +223,9 @@ public void testDeleteKeyWithSlowFollower() throws Exception {\n     }\n     Assert.assertNotNull(follower);\n     Assert.assertNotNull(leader);\n-    // shutdown the slow follower\n+    //ensure that the chosen follower is still a follower\n+    Assert.assertTrue(ContainerTestHelper.isRatisFollower(follower, pipeline));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80fc5af3d0ed05b8ba76ed283456c98540595d17"}, "originalPosition": 36}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2NTY2NjM4", "url": "https://github.com/apache/ozone/pull/1026#pullrequestreview-426566638", "createdAt": "2020-06-08T19:46:19Z", "commit": {"oid": "80fc5af3d0ed05b8ba76ed283456c98540595d17"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3145, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}