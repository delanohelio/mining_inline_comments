{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUwNTg0OTY4", "number": 1211, "title": "HDDS-3969. Add validName check for FileSystem requests", "bodyText": "What changes were proposed in this pull request?\nThis Jira is to validate KeyNames which are created with OzoneFileSystem.\nSimilar to how hdfs handles using DFSUtil. isValidName()\nMade only changes in the client.\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-3969\nHow was this patch tested?\nAdded tests.", "createdAt": "2020-07-16T23:04:17Z", "url": "https://github.com/apache/ozone/pull/1211", "merged": true, "mergeCommit": {"oid": "854f5d3f5da7bca5b4bd48048e5d2d8f0dba2695"}, "closed": true, "closedAt": "2020-07-22T20:25:20Z", "author": {"login": "bharatviswa504"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1ndMNgH2gAyNDUwNTg0OTY4OjM1MDBiZDg0YjUwMzk4OGI5ODY2MzcxNGRkYjdiYjg0MWZkZDZkOWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1sDC2gH2gAyNDUwNTg0OTY4OjU2ZmY3ZWY3M2ZhOTcxMTUwYTViMGUzN2Y0ZjAzZmMzMjA1MWI4Njg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3500bd84b503988b98663714ddb7bb841fdd6d9f", "author": {"user": {"login": "bharatviswa504", "name": "Bharat Viswanadham"}}, "url": "https://github.com/apache/ozone/commit/3500bd84b503988b98663714ddb7bb841fdd6d9f", "committedDate": "2020-07-16T23:02:15Z", "message": "HDDS-3969. Add validName check for FileSystem requests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMzU4Nzc3", "url": "https://github.com/apache/ozone/pull/1211#pullrequestreview-450358777", "createdAt": "2020-07-17T04:04:22Z", "commit": {"oid": "3500bd84b503988b98663714ddb7bb841fdd6d9f"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwNDowNDoyMlrOGzEn1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwNDowNDoyMlrOGzEn1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIwNjI5Mg==", "bodyText": "Can we just do this here, instead of toUri().getPath() again?\n   LOG.trace(\"path for key:{} is:{}\", key, path); return key.substring(1);", "url": "https://github.com/apache/ozone/pull/1211#discussion_r456206292", "createdAt": "2020-07-17T04:04:22Z", "author": {"login": "avijayanhwx"}, "path": "hadoop-ozone/ozonefs-common/src/main/java/org/apache/hadoop/fs/ozone/BasicOzoneFileSystem.java", "diffHunk": "@@ -721,7 +723,13 @@ public String pathToKey(Path path) {\n       path = new Path(workingDir, path);\n     }\n     // removing leading '/' char\n-    String key = path.toUri().getPath().substring(1);\n+    String key = path.toUri().getPath();\n+\n+    if (OzoneFSUtils.isValidName(key)) {\n+      key = path.toUri().getPath().substring(1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3500bd84b503988b98663714ddb7bb841fdd6d9f"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56ff7ef73fa971150a5b0e37f4f03fc32051b868", "author": {"user": {"login": "bharatviswa504", "name": "Bharat Viswanadham"}}, "url": "https://github.com/apache/ozone/commit/56ff7ef73fa971150a5b0e37f4f03fc32051b868", "committedDate": "2020-07-17T04:23:13Z", "message": "checkstyle and review comments"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2864, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}