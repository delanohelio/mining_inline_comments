{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM3ODQwMTM1", "number": 1105, "title": "HDDS-3828. Configuration parsing of ozone insight should be based on fields", "bodyText": "What changes were proposed in this pull request?\nOzone insight command can print out configuration related to a specific ozone component with parsing the @config object.\nBut the usage of config annotations has been changed since HDDS-2661. We should check the annotated fields not methods.\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-3828\nHow was this patch tested?\nWith docker-compose based test:\nhttps://www.youtube.com/watch?v=ZLknuMIl_jw&list=PLCaV-jpCBO8UK5Ged2A_iv3eHuozzMsYv&index=5&t=3s", "createdAt": "2020-06-22T10:22:59Z", "url": "https://github.com/apache/ozone/pull/1105", "merged": true, "mergeCommit": {"oid": "7ff5b5bada3470c42be36443bb4e018bde90e1d9"}, "closed": true, "closedAt": "2020-06-23T00:27:09Z", "author": {"login": "elek"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcsdJ1GAH2gAyNDM3ODQwMTM1OjM4ZTYyNTlhMTJhYWFlMzJiYWI2NzM2Y2MxYmMyYzhhNzEzN2U5M2Y=", "endCursor": "Y3Vyc29yOnYyOpPPAAABct6R4dAFqTQzNTM1OTY1OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "38e6259a12aaae32bab6736cc1bc2c8a7137e93f", "author": {"user": {"login": "elek", "name": "Elek, M\u00e1rton"}}, "url": "https://github.com/apache/ozone/commit/38e6259a12aaae32bab6736cc1bc2c8a7137e93f", "committedDate": "2020-06-18T11:56:44Z", "message": "HDDS-3828. Configuration parsing of ozone insight should be based on fields"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0ODMwMDk2", "url": "https://github.com/apache/ozone/pull/1105#pullrequestreview-434830096", "createdAt": "2020-06-22T11:20:56Z", "commit": {"oid": "38e6259a12aaae32bab6736cc1bc2c8a7137e93f"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxMToyMDo1NlrOGm8cVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQxMToyMDo1NlrOGm8cVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzQ4OTM2Nw==", "bodyText": "Shouldn't it handle inherited fields, too?  I don't think we have such a configuration object hierarchy currently, but injection is prepared for it:\nhttps://github.com/apache/hadoop-ozone/blob/53549eea6f5dfc8e4cc9594583d7510b206a8acd/hadoop-hdds/config/src/main/java/org/apache/hadoop/hdds/conf/ConfigurationReflectionUtil.java#L37-L44", "url": "https://github.com/apache/ozone/pull/1105#discussion_r443489367", "createdAt": "2020-06-22T11:20:56Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/insight/src/main/java/org/apache/hadoop/ozone/insight/ConfigurationSubCommand.java", "diffHunk": "@@ -71,9 +71,9 @@ private void showConfig(Class clazz, Type type) {\n \n     String prefix = configGroup.prefix();\n \n-    for (Method method : clazz.getMethods()) {\n-      if (method.isAnnotationPresent(Config.class)) {\n-        Config config = method.getAnnotation(Config.class);\n+    for (Field field : clazz.getDeclaredFields()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38e6259a12aaae32bab6736cc1bc2c8a7137e93f"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "222b3bfec88f6dd4e905310aec3bb68bbd748b84", "author": {"user": {"login": "elek", "name": "Elek, M\u00e1rton"}}, "url": "https://github.com/apache/ozone/commit/222b3bfec88f6dd4e905310aec3bb68bbd748b84", "committedDate": "2020-06-22T13:43:58Z", "message": "recursive support + unit test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1MzU5NjU5", "url": "https://github.com/apache/ozone/pull/1105#pullrequestreview-435359659", "createdAt": "2020-06-23T00:26:42Z", "commit": {"oid": "222b3bfec88f6dd4e905310aec3bb68bbd748b84"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2998, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}