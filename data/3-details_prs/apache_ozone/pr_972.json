{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzNTg3NTI5", "number": 972, "title": "HDDS-3665. Container info command should print uuid of datanode", "bodyText": "What changes were proposed in this pull request?\nDisplay the uuid of the datanode to distinguish the datanodes in a same nodes.\nWith this PR, we can get the following result when info container, in fact i have 5 datanode in the same machine.\nContainer id: 1\nPipeline id: f47e37ff-7f7e-453b-9bcc-a58e8117b66f\nContainer State: CLOSED\nDatanodes: [localhost, localhost, localhost]\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-3665\nHow was this patch tested?\nbin/ozone admin container info 1\nContainer id: 1\nPipeline id: f47e37ff-7f7e-453b-9bcc-a58e8117b66f\nContainer State: CLOSED\nDatanodes: [c4dcebcf-3997-4ebd-a501-8d7c3053de61/localhost,\n5d7d5f77-57c6-4c90-8edf-eb0f872a0166/localhost,\naa01cb2c-6742-4938-a719-1dc75f76e88f/localhost]", "createdAt": "2020-05-27T03:40:34Z", "url": "https://github.com/apache/ozone/pull/972", "merged": true, "mergeCommit": {"oid": "9dc8ee749e322021b7a88ae61812475d2cb9a33d"}, "closed": true, "closedAt": "2020-05-27T12:56:48Z", "author": {"login": "maobaolong"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclQyHXAH2gAyNDIzNTg3NTI5OjhjMTc0OThhNzY4MjMwNzFhMDM1YWVjZTliNTBkZGI5N2NmNTNhYzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclQ-6sgH2gAyNDIzNTg3NTI5OjM5MWYxYzg0Y2Y0OWE3MGVjOTBiZjMzYWQxYzNiZWJjNWNiYWRmMTg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8c17498a76823071a035aece9b50ddb97cf53ac6", "author": {"user": {"login": "maobaolong", "name": "maobaolong"}}, "url": "https://github.com/apache/ozone/commit/8c17498a76823071a035aece9b50ddb97cf53ac6", "committedDate": "2020-05-27T03:34:30Z", "message": "HDDS-3665. Container info command should print uuid of datanode"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4ODM3MTky", "url": "https://github.com/apache/ozone/pull/972#pullrequestreview-418837192", "createdAt": "2020-05-27T03:45:33Z", "commit": {"oid": "8c17498a76823071a035aece9b50ddb97cf53ac6"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwMzo0NTozM1rOGa4chw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwMzo0NjoxOVrOGa4dTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg0MDk2Nw==", "bodyText": "Trivial NIT:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              private static String buildDatanodeDisplay(DatanodeDetails details) {\n          \n          \n            \n              private static String buildDatanodeDetails(DatanodeDetails details) {", "url": "https://github.com/apache/ozone/pull/972#discussion_r430840967", "createdAt": "2020-05-27T03:45:33Z", "author": {"login": "dineshchitlangia"}, "path": "hadoop-hdds/tools/src/main/java/org/apache/hadoop/hdds/scm/cli/container/InfoSubcommand.java", "diffHunk": "@@ -66,9 +66,14 @@ public Void call() throws Exception {\n \n       // Print pipeline of an existing container.\n       String machinesStr = container.getPipeline().getNodes().stream().map(\n-              DatanodeDetails::getHostName).collect(Collectors.joining(\",\"));\n+          InfoSubcommand::buildDatanodeDisplay)\n+          .collect(Collectors.joining(\",\\n\"));\n       LOG.info(\"Datanodes: [{}]\", machinesStr);\n       return null;\n     }\n   }\n+\n+  private static String buildDatanodeDisplay(DatanodeDetails details) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c17498a76823071a035aece9b50ddb97cf53ac6"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDg0MTE2NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      InfoSubcommand::buildDatanodeDisplay)\n          \n          \n            \n                      InfoSubcommand::buildDatanodeDetails)", "url": "https://github.com/apache/ozone/pull/972#discussion_r430841164", "createdAt": "2020-05-27T03:46:19Z", "author": {"login": "dineshchitlangia"}, "path": "hadoop-hdds/tools/src/main/java/org/apache/hadoop/hdds/scm/cli/container/InfoSubcommand.java", "diffHunk": "@@ -66,9 +66,14 @@ public Void call() throws Exception {\n \n       // Print pipeline of an existing container.\n       String machinesStr = container.getPipeline().getNodes().stream().map(\n-              DatanodeDetails::getHostName).collect(Collectors.joining(\",\"));\n+          InfoSubcommand::buildDatanodeDisplay)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c17498a76823071a035aece9b50ddb97cf53ac6"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d39df5d7d1f8d05996ea08ca8a153de019f840bc", "author": {"user": {"login": "maobaolong", "name": "maobaolong"}}, "url": "https://github.com/apache/ozone/commit/d39df5d7d1f8d05996ea08ca8a153de019f840bc", "committedDate": "2020-05-27T03:48:22Z", "message": "Update hadoop-hdds/tools/src/main/java/org/apache/hadoop/hdds/scm/cli/container/InfoSubcommand.java\n\nCo-authored-by: Dinesh Chitlangia <dineshchitlangia@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "391f1c84cf49a70ec90bf33ad1c3bebc5cbadf18", "author": {"user": {"login": "maobaolong", "name": "maobaolong"}}, "url": "https://github.com/apache/ozone/commit/391f1c84cf49a70ec90bf33ad1c3bebc5cbadf18", "committedDate": "2020-05-27T03:48:29Z", "message": "Update hadoop-hdds/tools/src/main/java/org/apache/hadoop/hdds/scm/cli/container/InfoSubcommand.java\n\nCo-authored-by: Dinesh Chitlangia <dineshchitlangia@gmail.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3086, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}