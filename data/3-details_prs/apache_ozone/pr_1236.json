{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU0OTUxNDA0", "number": 1236, "title": "HDDS-4000. Split acceptance tests to reduce CI feedback time", "bodyText": "What changes were proposed in this pull request?\nReduce total CI time:\n\nSplit acceptance tests into 3 groups executed in parallel using GitHub Actions matrix build.  Groups are defined to have similar run times.  misc has several unrelated items, some of which can be moved to another group if it grows too long.\n\n\nsecure: 50m 36s\nunsecure: 48m 23s\nmisc: 50m 6s\n\n\nMerge some integration test groups, both to make them similar length and to reduce the number of checks.  Currently some groups have much shorter run time.  Since client is the longest one, others can take more time, too.  New run times:\n\n\nclient: 54m 37s\nfilesystem-hdds: 43m 58s\nozone: 55m 37s\n\n\nStart integration checks earlier: do not wait for build check to finish.  Both acceptance and integration checks perform a full build anyway.  The only reason to wait was that if there is a compile error, we wanted to avoid spawning too many checks that fail for the same reason.  But compile error is the least frequent CI problem, checkstyle, rat and various test failures are much more common.  So being optimistic helps in the most common scenarios.  (Ideally we should cache the results of build for later stages.  Then we could both depend on it and avoid duplicate builds.)\n\nhttps://issues.apache.org/jira/browse/HDDS-4000\nHow was this patch tested?\nhttps://github.com/adoroszlai/hadoop-ozone/runs/897297500", "createdAt": "2020-07-22T08:04:18Z", "url": "https://github.com/apache/ozone/pull/1236", "merged": true, "mergeCommit": {"oid": "a7fe7260f5a72809fe5387725c92942c454ce899"}, "closed": true, "closedAt": "2020-07-27T11:46:23Z", "author": {"login": "adoroszlai"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3Uly3AH2gAyNDU0OTUxNDA0OjY1MWJlOTExYjdmODRhMTk0ZGEwZWM2MGUxODdlODgwMGZmYTNmMTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5AXdDgFqTQ1NTcwNjU4NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "651be911b7f84a194da0ec60e187e8800ffa3f13", "author": {"user": {"login": "adoroszlai", "name": "Doroszlai, Attila"}}, "url": "https://github.com/apache/ozone/commit/651be911b7f84a194da0ec60e187e8800ffa3f13", "committedDate": "2020-07-22T06:11:18Z", "message": "HDDS-4000. Split acceptance tests to reduce CI feedback time"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e9d93b179b274f1745a9a23dcf28c2880eaba2b", "author": {"user": {"login": "adoroszlai", "name": "Doroszlai, Attila"}}, "url": "https://github.com/apache/ozone/commit/5e9d93b179b274f1745a9a23dcf28c2880eaba2b", "committedDate": "2020-07-22T10:37:07Z", "message": "let misc suite run untagged tests, too"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzOTE5MTYz", "url": "https://github.com/apache/ozone/pull/1236#pullrequestreview-453919163", "createdAt": "2020-07-23T08:15:20Z", "commit": {"oid": "5e9d93b179b274f1745a9a23dcf28c2880eaba2b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwODoxNToyMFrOG2Ae6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QwODoxNToyMFrOG2Ae6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI4NDIwMg==", "bodyText": "Seems we could not add this line here \ud83d\ude09", "url": "https://github.com/apache/ozone/pull/1236#discussion_r459284202", "createdAt": "2020-07-23T08:15:20Z", "author": {"login": "cxorm"}, "path": "hadoop-ozone/dist/src/main/compose/ozonesecure-om-ha/test.sh", "diffHunk": "@@ -15,6 +15,7 @@\n # See the License for the specific language governing permissions and\n # limitations under the License.\n \n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e9d93b179b274f1745a9a23dcf28c2880eaba2b"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5cb38935c0e97e1576912f0561da01624b6b3d5c", "author": {"user": {"login": "adoroszlai", "name": "Doroszlai, Attila"}}, "url": "https://github.com/apache/ozone/commit/5cb38935c0e97e1576912f0561da01624b6b3d5c", "committedDate": "2020-07-23T08:19:38Z", "message": "remove leftover empty line"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4e13e1f87e8ee85b39f2aa810af20fe51563790", "author": {"user": {"login": "adoroszlai", "name": "Doroszlai, Attila"}}, "url": "https://github.com/apache/ozone/commit/d4e13e1f87e8ee85b39f2aa810af20fe51563790", "committedDate": "2020-07-24T11:58:01Z", "message": "Merge remote-tracking branch 'origin/master' into HDDS-4000"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NzA2NTg0", "url": "https://github.com/apache/ozone/pull/1236#pullrequestreview-455706584", "createdAt": "2020-07-27T11:45:23Z", "commit": {"oid": "d4e13e1f87e8ee85b39f2aa810af20fe51563790"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2906, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}