{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAwNDA2MTQz", "number": 783, "title": "HDDS-2976. Recon throws error while trying to get snapshot over https", "bodyText": "What changes were proposed in this pull request?\nMaking getOzoneManagerDBSnapshot work over https.\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-2976\nHow was this patch tested?\n\nManual Test in a secure environment\nUnit Tests", "createdAt": "2020-04-07T17:33:25Z", "url": "https://github.com/apache/ozone/pull/783", "merged": true, "mergeCommit": {"oid": "c9a1925537312eb950d596dbae2c7e4d91f9fd59"}, "closed": true, "closedAt": "2020-04-13T18:42:59Z", "author": {"login": "prashantpogde"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVYqtmAFqTM4OTQzMzU0Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcXTB71gFqTM5MjMzMDIzNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5NDMzNTQ2", "url": "https://github.com/apache/ozone/pull/783#pullrequestreview-389433546", "createdAt": "2020-04-07T19:41:37Z", "commit": {"oid": "947b8c51c03a56060a8fff0776dbdeed6bfbea90"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxOTo0MTozN1rOGCTQCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxOTo0MTo0MlrOGCTQKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTA2NTczOQ==", "bodyText": "NIT: We can import java.net.URLConnection and java.net.URL", "url": "https://github.com/apache/ozone/pull/783#discussion_r405065739", "createdAt": "2020-04-07T19:41:37Z", "author": {"login": "vivekratnavel"}, "path": "hadoop-ozone/recon/src/main/java/org/apache/hadoop/ozone/recon/ReconUtils.java", "diffHunk": "@@ -245,6 +246,16 @@ public InputStream makeHttpCall(CloseableHttpClient httpClient, String url)\n     }\n   }\n \n+  public InputStream makeHttpCall(URLConnectionFactory connectionFactory,\n+                                  String url)\n+      throws IOException {\n+\n+    java.net.URLConnection urlConnection =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "947b8c51c03a56060a8fff0776dbdeed6bfbea90"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTA2NTc2OA==", "bodyText": "Can we remove the other makeHttpCall that accepts CloseableHttpClient if it is no longer used?", "url": "https://github.com/apache/ozone/pull/783#discussion_r405065768", "createdAt": "2020-04-07T19:41:42Z", "author": {"login": "vivekratnavel"}, "path": "hadoop-ozone/recon/src/main/java/org/apache/hadoop/ozone/recon/ReconUtils.java", "diffHunk": "@@ -245,6 +246,16 @@ public InputStream makeHttpCall(CloseableHttpClient httpClient, String url)\n     }\n   }\n \n+  public InputStream makeHttpCall(URLConnectionFactory connectionFactory,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "947b8c51c03a56060a8fff0776dbdeed6bfbea90"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5NjU0NTA2", "url": "https://github.com/apache/ozone/pull/783#pullrequestreview-389654506", "createdAt": "2020-04-08T05:05:21Z", "commit": {"oid": "947b8c51c03a56060a8fff0776dbdeed6bfbea90"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQwNTowNToyMVrOGCfHuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQwNTowNToyMVrOGCfHuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTI2MDIxNw==", "bodyText": "Can we modify the unit test to test the new makeHttpCall API?", "url": "https://github.com/apache/ozone/pull/783#discussion_r405260217", "createdAt": "2020-04-08T05:05:21Z", "author": {"login": "avijayanhwx"}, "path": "hadoop-ozone/recon/src/test/java/org/apache/hadoop/ozone/recon/TestReconUtils.java", "diffHunk": "@@ -166,9 +168,11 @@ public int read() throws IOException {\n       }\n     });\n \n-    InputStream inputStream = new ReconUtils()\n-        .makeHttpCall(httpClientMock, url);\n-    String contents = IOUtils.toString(inputStream, Charset.defaultCharset());\n+    String contents;\n+    try (InputStream inputStream = new ReconUtils()\n+        .makeHttpCall(httpClientMock, url)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "947b8c51c03a56060a8fff0776dbdeed6bfbea90"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5OTI1Mzc5", "url": "https://github.com/apache/ozone/pull/783#pullrequestreview-389925379", "createdAt": "2020-04-08T12:28:12Z", "commit": {"oid": "947b8c51c03a56060a8fff0776dbdeed6bfbea90"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c9d94e52448281a3775906fda976c8a88a0c34da", "author": {"user": {"login": "prashantpogde", "name": null}}, "url": "https://github.com/apache/ozone/commit/c9d94e52448281a3775906fda976c8a88a0c34da", "committedDate": "2020-04-09T06:20:37Z", "message": "HDDS-2976. Fixing review comments (part 2)."}, "afterCommit": {"oid": "50ada67a99e531f8d9c09992e5ea4c6cd51e1b38", "author": {"user": {"login": "prashantpogde", "name": null}}, "url": "https://github.com/apache/ozone/commit/50ada67a99e531f8d9c09992e5ea4c6cd51e1b38", "committedDate": "2020-04-10T03:04:45Z", "message": "HDDS-2976. Fixing review comments (part 2)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df35364ce0b81472a0e04cb936fba31e469e8b67", "author": {"user": {"login": "prashantpogde", "name": null}}, "url": "https://github.com/apache/ozone/commit/df35364ce0b81472a0e04cb936fba31e469e8b67", "committedDate": "2020-04-11T02:02:48Z", "message": "HDDS-2976. Recon throws error while trying to get snapshot over https"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5dd9a973bf57ae4dc199228cb47507a4241c89d", "author": {"user": {"login": "prashantpogde", "name": null}}, "url": "https://github.com/apache/ozone/commit/e5dd9a973bf57ae4dc199228cb47507a4241c89d", "committedDate": "2020-04-11T02:02:48Z", "message": "HDDS-2976. Fixing review comments."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6633fb0184f0a0f4a29c1c817ee31315f7202372", "author": {"user": {"login": "prashantpogde", "name": null}}, "url": "https://github.com/apache/ozone/commit/6633fb0184f0a0f4a29c1c817ee31315f7202372", "committedDate": "2020-04-11T02:02:48Z", "message": "HDDS-2976. Fixing review comments (part 2)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f8073fa1c379de68b8c3d70751a43c587a90ee5", "author": {"user": {"login": "prashantpogde", "name": null}}, "url": "https://github.com/apache/ozone/commit/6f8073fa1c379de68b8c3d70751a43c587a90ee5", "committedDate": "2020-04-11T02:02:48Z", "message": "HDDS-2976. CheckStyle/Findbug fixes."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "73646c9e655caa6c467388ea9e50b290721536c5", "author": {"user": {"login": "prashantpogde", "name": null}}, "url": "https://github.com/apache/ozone/commit/73646c9e655caa6c467388ea9e50b290721536c5", "committedDate": "2020-04-10T05:18:17Z", "message": "HDDS-2976. CheckStyle/Findbug fixes."}, "afterCommit": {"oid": "6f8073fa1c379de68b8c3d70751a43c587a90ee5", "author": {"user": {"login": "prashantpogde", "name": null}}, "url": "https://github.com/apache/ozone/commit/6f8073fa1c379de68b8c3d70751a43c587a90ee5", "committedDate": "2020-04-11T02:02:48Z", "message": "HDDS-2976. CheckStyle/Findbug fixes."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyMzMwMjM3", "url": "https://github.com/apache/ozone/pull/783#pullrequestreview-392330237", "createdAt": "2020-04-13T18:16:39Z", "commit": {"oid": "6f8073fa1c379de68b8c3d70751a43c587a90ee5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3322, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}