{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3MDQyMTQ4", "number": 1263, "reviewThreads": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNjo0MDowM1rOESd83w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxNDoxMDoyM1rOETRaag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3ODAwNTQzOnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/dist/src/main/compose/ozone-mr/test.sh", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNjo0MDowM1rOG3qktA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwODo1MToxN1rOG4u8Uw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTAyMjM4OA==", "bodyText": "I think -mindepth 2 -maxdepth 2 should be added to test-all.sh, too, because currently ozone-mr/hadoop* tests are executed twice:\n2020-07-27T10:02:03.8462205Z Executing test in /mnt/ozone/hadoop-ozone/dist/target/ozone-0.6.0-SNAPSHOT/compose/ozone-mr/hadoop27\n...\n2020-07-27T10:11:13.8415416Z Executing test in /mnt/ozone/hadoop-ozone/dist/target/ozone-0.6.0-SNAPSHOT/compose/ozone-mr/hadoop27", "url": "https://github.com/apache/ozone/pull/1263#discussion_r461022388", "createdAt": "2020-07-27T16:40:03Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/dist/src/main/compose/ozone-mr/test.sh", "diffHunk": "@@ -0,0 +1,32 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+SCRIPT_DIR=$( cd \"$( dirname \"${BASH_SOURCE[0]}\" )\" >/dev/null && pwd )\n+ALL_RESULT_DIR=\"$SCRIPT_DIR/result\"\n+set -x\n+RESULT=0\n+IFS=$'\\n'\n+# shellcheck disable=SC2044\n+for test in $(find \"$SCRIPT_DIR\" -mindepth 2 -maxdepth 2 -name test.sh | grep \"${OZONE_TEST_SELECTOR:-\"\"}\" |sort); do", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51f78ffe81492efd80bb90f0f0fb1271a1b6de2e"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE0MjU0Nw==", "bodyText": "Hmm. I think I should move out the tricky find segment (contains the #suite support) to the testlib.sh and reuse it from the second level test.sh.", "url": "https://github.com/apache/ozone/pull/1263#discussion_r462142547", "createdAt": "2020-07-29T08:51:17Z", "author": {"login": "elek"}, "path": "hadoop-ozone/dist/src/main/compose/ozone-mr/test.sh", "diffHunk": "@@ -0,0 +1,32 @@\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+SCRIPT_DIR=$( cd \"$( dirname \"${BASH_SOURCE[0]}\" )\" >/dev/null && pwd )\n+ALL_RESULT_DIR=\"$SCRIPT_DIR/result\"\n+set -x\n+RESULT=0\n+IFS=$'\\n'\n+# shellcheck disable=SC2044\n+for test in $(find \"$SCRIPT_DIR\" -mindepth 2 -maxdepth 2 -name test.sh | grep \"${OZONE_TEST_SELECTOR:-\"\"}\" |sort); do", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTAyMjM4OA=="}, "originalCommit": {"oid": "51f78ffe81492efd80bb90f0f0fb1271a1b6de2e"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3ODAyMTc3OnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/dist/src/main/compose/ozone/test.sh", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNjo0NDowM1rOG3quwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwODoxNTo0M1rOG4tnuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTAyNDk2Mg==", "bodyText": "Nice.  Can you also add explicit name for the different readdata tests in ozone-topology?\nhttps://github.com/apache/hadoop-ozone/blob/ddd3211757ad67d1574e0e9e983b182681050a7c/hadoop-ozone/dist/src/main/compose/ozone-topology/test.sh#L42\nhttps://github.com/apache/hadoop-ozone/blob/ddd3211757ad67d1574e0e9e983b182681050a7c/hadoop-ozone/dist/src/main/compose/ozone-topology/test.sh#L52", "url": "https://github.com/apache/ozone/pull/1263#discussion_r461024962", "createdAt": "2020-07-27T16:44:03Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/dist/src/main/compose/ozone/test.sh", "diffHunk": "@@ -35,14 +35,14 @@ execute_robot_test scm gdpr\n \n for scheme in ofs o3fs; do\n   for bucket in link bucket; do\n-    execute_robot_test scm -v SCHEME:${scheme} -v BUCKET_TYPE:${bucket} ozonefs/ozonefs.robot\n+    execute_robot_test scm -v SCHEME:${scheme} -v BUCKET_TYPE:${bucket} -N ozonefs-${scheme}-${bucket} ozonefs/ozonefs.robot", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51f78ffe81492efd80bb90f0f0fb1271a1b6de2e"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjEyMDg4OA==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/apache/ozone/pull/1263#discussion_r462120888", "createdAt": "2020-07-29T08:15:43Z", "author": {"login": "elek"}, "path": "hadoop-ozone/dist/src/main/compose/ozone/test.sh", "diffHunk": "@@ -35,14 +35,14 @@ execute_robot_test scm gdpr\n \n for scheme in ofs o3fs; do\n   for bucket in link bucket; do\n-    execute_robot_test scm -v SCHEME:${scheme} -v BUCKET_TYPE:${bucket} ozonefs/ozonefs.robot\n+    execute_robot_test scm -v SCHEME:${scheme} -v BUCKET_TYPE:${bucket} -N ozonefs-${scheme}-${bucket} ozonefs/ozonefs.robot", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTAyNDk2Mg=="}, "originalCommit": {"oid": "51f78ffe81492efd80bb90f0f0fb1271a1b6de2e"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3ODAyNTc2OnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/dist/src/main/compose/test-all.sh", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNjo0NTowNlrOG3qxPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwODo1MDoyOFrOG4u6Tg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTAyNTU5OA==", "bodyText": "Nit: store result of $(basename $(dirname \"$test\")) in variable.", "url": "https://github.com/apache/ozone/pull/1263#discussion_r461025598", "createdAt": "2020-07-27T16:45:06Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/dist/src/main/compose/test-all.sh", "diffHunk": "@@ -46,9 +46,12 @@ for test in $(find \"$SCRIPT_DIR\" -name test.sh | grep \"${OZONE_TEST_SELECTOR:-\"\"\n       echo \"ERROR: Test execution of $(dirname \"$test\") is FAILED!!!!\"\n   fi\n   RESULT_DIR=\"$(dirname \"$test\")/result\"\n-  cp \"$RESULT_DIR\"/robot-*.xml \"$RESULT_DIR\"/docker-*.log \"$RESULT_DIR\"/*.out* \"$ALL_RESULT_DIR\"/\n+  rebot -N $(basename $(dirname \"$test\")) -o \"$ALL_RESULT_DIR\"/$(basename $(dirname \"$test\")).xml \"$RESULT_DIR\"/*.xml", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51f78ffe81492efd80bb90f0f0fb1271a1b6de2e"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE0MjAzMA==", "bodyText": "done (got ${d} with the rebase...)", "url": "https://github.com/apache/ozone/pull/1263#discussion_r462142030", "createdAt": "2020-07-29T08:50:28Z", "author": {"login": "elek"}, "path": "hadoop-ozone/dist/src/main/compose/test-all.sh", "diffHunk": "@@ -46,9 +46,12 @@ for test in $(find \"$SCRIPT_DIR\" -name test.sh | grep \"${OZONE_TEST_SELECTOR:-\"\"\n       echo \"ERROR: Test execution of $(dirname \"$test\") is FAILED!!!!\"\n   fi\n   RESULT_DIR=\"$(dirname \"$test\")/result\"\n-  cp \"$RESULT_DIR\"/robot-*.xml \"$RESULT_DIR\"/docker-*.log \"$RESULT_DIR\"/*.out* \"$ALL_RESULT_DIR\"/\n+  rebot -N $(basename $(dirname \"$test\")) -o \"$ALL_RESULT_DIR\"/$(basename $(dirname \"$test\")).xml \"$RESULT_DIR\"/*.xml", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTAyNTU5OA=="}, "originalCommit": {"oid": "51f78ffe81492efd80bb90f0f0fb1271a1b6de2e"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NjI2NTMzOnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/dist/src/main/compose/test-all.sh", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxMzozMjo1OFrOG44m_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxMzozMjo1OFrOG44m_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMwMDkyNQ==", "bodyText": "I think this line should be removed:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            rebot -N \"smoketests\" -d \"$SCRIPT_DIR/result\" \"$SCRIPT_DIR/result/robot-*.xml\"\n          \n      \n    \n    \n  \n\nto avoid the following error:\n2020-07-29T10:07:38.2962715Z [ ERROR ] Reading XML source '/mnt/ozone/hadoop-ozone/dist/target/ozone-0.6.0-SNAPSHOT/compose/result/robot-*.xml' failed: No such file or directory", "url": "https://github.com/apache/ozone/pull/1263#discussion_r462300925", "createdAt": "2020-07-29T13:32:58Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/dist/src/main/compose/test-all.sh", "diffHunk": "@@ -64,10 +49,16 @@ for t in ${tests}; do\n       RESULT=1\n       echo \"ERROR: Test execution of ${d} is FAILED!!!!\"\n   fi\n+  cd \"$SCRIPT_DIR\"\n   RESULT_DIR=\"${d}/result\"\n-  cp \"$RESULT_DIR\"/robot-*.xml \"$RESULT_DIR\"/docker-*.log \"$RESULT_DIR\"/*.out* \"$ALL_RESULT_DIR\"/\n+  TEST_DIR_NAME=$(basename ${d})\n+  rebot -N $TEST_DIR_NAME -o \"$ALL_RESULT_DIR\"/$TEST_DIR_NAME.xml \"$RESULT_DIR\"/\"*.xml\"\n+  cp \"$RESULT_DIR\"/docker-*.log \"$ALL_RESULT_DIR\"/\n+  cp \"$RESULT_DIR\"/*.out* \"$ALL_RESULT_DIR\"/ || true\n done\n \n+rebot -N acceptance -d \"$ALL_RESULT_DIR\" \"$ALL_RESULT_DIR\"/*.xml\n+\n rebot -N \"smoketests\" -d \"$SCRIPT_DIR/result\" \"$SCRIPT_DIR/result/robot-*.xml\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7d7d84cf8a9d4639f1811cac4901e42046fffa0c"}, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NjMwODA3OnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/dist/src/main/compose/ozone-topology/test.sh", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxMzo0MjozN1rOG45CDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxMzo0MjozN1rOG45CDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMwNzg1NQ==", "bodyText": "Arguments need to be swapped:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            execute_robot_test scm topology/readdata.robot -N readdata-first-half\n          \n          \n            \n            execute_robot_test scm -N readdata-first-half topology/readdata.robot\n          \n      \n    \n    \n  \n\nto avoid:\n2020-07-29T09:51:30.5630160Z [ ERROR ] Parsing 'topology/readdata.robot' failed: File or directory to execute does not exist.", "url": "https://github.com/apache/ozone/pull/1263#discussion_r462307855", "createdAt": "2020-07-29T13:42:37Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/dist/src/main/compose/ozone-topology/test.sh", "diffHunk": "@@ -39,7 +39,7 @@ execute_robot_test scm topology/loaddata.robot\n \n stop_containers datanode_1 datanode_2 datanode_3\n \n-execute_robot_test scm topology/readdata.robot\n+execute_robot_test scm topology/readdata.robot -N readdata-first-half", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7d7d84cf8a9d4639f1811cac4901e42046fffa0c"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NjMwODkwOnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/dist/src/main/compose/ozone-topology/test.sh", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxMzo0Mjo0N1rOG45Clw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxMzo0Mjo0N1rOG45Clw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMwNzk5MQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            execute_robot_test scm topology/readdata.robot -N readdata-second-half\n          \n          \n            \n            execute_robot_test scm -N readdata-second-half topology/readdata.robot", "url": "https://github.com/apache/ozone/pull/1263#discussion_r462307991", "createdAt": "2020-07-29T13:42:47Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/dist/src/main/compose/ozone-topology/test.sh", "diffHunk": "@@ -49,7 +49,7 @@ wait_for_port datanode_3 9858 60\n \n stop_containers datanode_4 datanode_5 datanode_6\n \n-execute_robot_test scm topology/readdata.robot\n+execute_robot_test scm topology/readdata.robot -N readdata-second-half", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7d7d84cf8a9d4639f1811cac4901e42046fffa0c"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NjQwNDY4OnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/dist/src/test/shell/compose_testlib.bats", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxNDowMzo0NVrOG45_ZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxNDowMzo0NVrOG45_ZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMyMzU1Ng==", "bodyText": "This needs to be updated to avoid failure in bats check:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            source ../../main/compose/testlib.sh\n          \n          \n            \n            load ../../main/compose/testlib.sh", "url": "https://github.com/apache/ozone/pull/1263#discussion_r462323556", "createdAt": "2020-07-29T14:03:45Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/dist/src/test/shell/compose_testlib.bats", "diffHunk": "@@ -0,0 +1,37 @@\n+#!/usr/bin/env bash\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+\n+source ../../main/compose/testlib.sh", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7d7d84cf8a9d4639f1811cac4901e42046fffa0c"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NjQwNzM4OnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/dist/src/test/shell/compose_testlib.bats", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxNDowNDoxOVrOG46BAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxNDowNDoxOVrOG46BAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMyMzk2OQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              run find_tests\n          \n          \n            \n              cd $BATS_TEST_DIRNAME\n          \n          \n            \n              run find_tests", "url": "https://github.com/apache/ozone/pull/1263#discussion_r462323969", "createdAt": "2020-07-29T14:04:19Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/dist/src/test/shell/compose_testlib.bats", "diffHunk": "@@ -0,0 +1,37 @@\n+#!/usr/bin/env bash\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+\n+source ../../main/compose/testlib.sh\n+@test \"Find test recursive, only on one level\" {\n+  run find_tests", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7d7d84cf8a9d4639f1811cac4901e42046fffa0c"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NjQwODM3OnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/dist/src/test/shell/compose_testlib.bats", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxNDowNDozMlrOG46Bnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxNDowNDozMlrOG46Bnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMyNDEyNw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              echo \"x${output}x}\"", "url": "https://github.com/apache/ozone/pull/1263#discussion_r462324127", "createdAt": "2020-07-29T14:04:32Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/dist/src/test/shell/compose_testlib.bats", "diffHunk": "@@ -0,0 +1,37 @@\n+#!/usr/bin/env bash\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+\n+source ../../main/compose/testlib.sh\n+@test \"Find test recursive, only on one level\" {\n+  run find_tests\n+  echo \"x${output}x}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7d7d84cf8a9d4639f1811cac4901e42046fffa0c"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NjQwOTc4OnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/dist/src/test/shell/compose_testlib.bats", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxNDowNDo0OFrOG46CZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxNDowNDo0OFrOG46CZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMyNDMyNw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              run find_tests\n          \n          \n            \n              cd $BATS_TEST_DIRNAME\n          \n          \n            \n              run find_tests", "url": "https://github.com/apache/ozone/pull/1263#discussion_r462324327", "createdAt": "2020-07-29T14:04:48Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/dist/src/test/shell/compose_testlib.bats", "diffHunk": "@@ -0,0 +1,37 @@\n+#!/usr/bin/env bash\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+\n+source ../../main/compose/testlib.sh\n+@test \"Find test recursive, only on one level\" {\n+  run find_tests\n+  echo \"x${output}x}\"\n+  [[ \"$output\" == \"./test1/test.sh ./test2/test.sh ./test4/test.sh\" ]]\n+}\n+\n+source ../../main/compose/testlib.sh\n+@test \"Find test by suite\" {\n+  OZONE_ACCEPTANCE_SUITE=one\n+  run find_tests", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7d7d84cf8a9d4639f1811cac4901e42046fffa0c"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NjQzMDU2OnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/dist/src/test/shell/compose_testlib.bats", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxNDowOToxN1rOG46PYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxNDoxODo0MFrOG46svQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMyNzY1MA==", "bodyText": "Can you please explain what's the purpose of repeatedly loading the library being tested?  In my experience it works fine with a single load, but maybe you want to cover some case I'm not aware of.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            source ../../main/compose/testlib.sh\n          \n          \n            \n            load ../../main/compose/testlib.sh\n          \n      \n    \n    \n  \n\nor\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            source ../../main/compose/testlib.sh", "url": "https://github.com/apache/ozone/pull/1263#discussion_r462327650", "createdAt": "2020-07-29T14:09:17Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/dist/src/test/shell/compose_testlib.bats", "diffHunk": "@@ -0,0 +1,37 @@\n+#!/usr/bin/env bash\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+\n+source ../../main/compose/testlib.sh\n+@test \"Find test recursive, only on one level\" {\n+  run find_tests\n+  echo \"x${output}x}\"\n+  [[ \"$output\" == \"./test1/test.sh ./test2/test.sh ./test4/test.sh\" ]]\n+}\n+\n+source ../../main/compose/testlib.sh", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7d7d84cf8a9d4639f1811cac4901e42046fffa0c"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMzMzI4OA==", "bodyText": "Yes, I learned from you that load can be used, but it doesnt work for me:\nbats compose_testlib.bats\nbats: /home/elek/projects/ozone/hadoop-ozone/dist/src/test/shell/../../main/compose/testlib.sh.bash does not exist\n\nDon't know why....", "url": "https://github.com/apache/ozone/pull/1263#discussion_r462333288", "createdAt": "2020-07-29T14:16:09Z", "author": {"login": "elek"}, "path": "hadoop-ozone/dist/src/test/shell/compose_testlib.bats", "diffHunk": "@@ -0,0 +1,37 @@\n+#!/usr/bin/env bash\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+\n+source ../../main/compose/testlib.sh\n+@test \"Find test recursive, only on one level\" {\n+  run find_tests\n+  echo \"x${output}x}\"\n+  [[ \"$output\" == \"./test1/test.sh ./test2/test.sh ./test4/test.sh\" ]]\n+}\n+\n+source ../../main/compose/testlib.sh", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMyNzY1MA=="}, "originalCommit": {"oid": "7d7d84cf8a9d4639f1811cac4901e42046fffa0c"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMzNTE2NQ==", "bodyText": "Upgrade bats to 1.2.1.\nbats-core/bats-core#282\nhttps://github.com/bats-core/bats-core/releases/tag/v1.2.1", "url": "https://github.com/apache/ozone/pull/1263#discussion_r462335165", "createdAt": "2020-07-29T14:18:40Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/dist/src/test/shell/compose_testlib.bats", "diffHunk": "@@ -0,0 +1,37 @@\n+#!/usr/bin/env bash\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+\n+source ../../main/compose/testlib.sh\n+@test \"Find test recursive, only on one level\" {\n+  run find_tests\n+  echo \"x${output}x}\"\n+  [[ \"$output\" == \"./test1/test.sh ./test2/test.sh ./test4/test.sh\" ]]\n+}\n+\n+source ../../main/compose/testlib.sh", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMyNzY1MA=="}, "originalCommit": {"oid": "7d7d84cf8a9d4639f1811cac4901e42046fffa0c"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NjQzMTM1OnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/dist/src/test/shell/compose_testlib.bats", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxNDowOToyNlrOG46P3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxNDowOToyNlrOG46P3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMyNzc3Mw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              run find_tests\n          \n          \n            \n              cd $BATS_TEST_DIRNAME\n          \n          \n            \n              run find_tests", "url": "https://github.com/apache/ozone/pull/1263#discussion_r462327773", "createdAt": "2020-07-29T14:09:26Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/dist/src/test/shell/compose_testlib.bats", "diffHunk": "@@ -0,0 +1,37 @@\n+#!/usr/bin/env bash\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+\n+source ../../main/compose/testlib.sh\n+@test \"Find test recursive, only on one level\" {\n+  run find_tests\n+  echo \"x${output}x}\"\n+  [[ \"$output\" == \"./test1/test.sh ./test2/test.sh ./test4/test.sh\" ]]\n+}\n+\n+source ../../main/compose/testlib.sh\n+@test \"Find test by suite\" {\n+  OZONE_ACCEPTANCE_SUITE=one\n+  run find_tests\n+  [[ \"$output\" == \"./test4/test.sh\" ]]\n+}\n+\n+source ../../main/compose/testlib.sh\n+@test \"Find test default suite\" {\n+  OZONE_ACCEPTANCE_SUITE=misc\n+  run find_tests", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7d7d84cf8a9d4639f1811cac4901e42046fffa0c"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NjQzNjkwOnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/dist/src/test/shell/compose_testlib.bats", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxNDoxMDoyM1rOG46TDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxNDoxMDoyM1rOG46TDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjMyODU4OA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            source ../../main/compose/testlib.sh\n          \n          \n            \n            load ../../main/compose/testlib.sh\n          \n      \n    \n    \n  \n\nor\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            source ../../main/compose/testlib.sh", "url": "https://github.com/apache/ozone/pull/1263#discussion_r462328588", "createdAt": "2020-07-29T14:10:23Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/dist/src/test/shell/compose_testlib.bats", "diffHunk": "@@ -0,0 +1,37 @@\n+#!/usr/bin/env bash\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+\n+source ../../main/compose/testlib.sh\n+@test \"Find test recursive, only on one level\" {\n+  run find_tests\n+  echo \"x${output}x}\"\n+  [[ \"$output\" == \"./test1/test.sh ./test2/test.sh ./test4/test.sh\" ]]\n+}\n+\n+source ../../main/compose/testlib.sh\n+@test \"Find test by suite\" {\n+  OZONE_ACCEPTANCE_SUITE=one\n+  run find_tests\n+  [[ \"$output\" == \"./test4/test.sh\" ]]\n+}\n+\n+source ../../main/compose/testlib.sh", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7d7d84cf8a9d4639f1811cac4901e42046fffa0c"}, "originalPosition": 32}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4050, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}