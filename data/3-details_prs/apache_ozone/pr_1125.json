{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM5Mjc1MDU0", "number": 1125, "title": "HDDS-3866. Support multi-part-upload with Freon S3 key generator", "bodyText": "What changes were proposed in this pull request?\nozone freon s3kg is a key generator which uses the s3 interface. It uses simple put objects but it turned out that s3 mpu implementation has some specific problem. I would improve the key generator to make it possible to test mpu upload with AWS Java SDK.\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-3866\nHow was this patch tested?\nozone freon s3kg -n 1 -s 6000000 --multi-part-upload\n```", "createdAt": "2020-06-24T15:13:54Z", "url": "https://github.com/apache/ozone/pull/1125", "merged": true, "mergeCommit": {"oid": "5d14b1c921fb7610521dd894703a188751928191"}, "closed": true, "closedAt": "2020-06-26T04:33:48Z", "author": {"login": "elek"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcubgcEAH2gAyNDM5Mjc1MDU0OmMwYTBmMGJjZjU5NzU3OGZlZTIzMmZiNzU4NjE1OTRlNmNmZjU1ODI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcu6aQJAFqTQzNzk4NzAxMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c0a0f0bcf597578fee232fb75861594e6cff5582", "author": {"user": {"login": "elek", "name": "Elek, M\u00e1rton"}}, "url": "https://github.com/apache/ozone/commit/c0a0f0bcf597578fee232fb75861594e6cff5582", "committedDate": "2020-06-24T15:09:28Z", "message": "HDDS-3866. Support multi-part-upload with Freon S3 key generator"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2OTAzMDYw", "url": "https://github.com/apache/ozone/pull/1125#pullrequestreview-436903060", "createdAt": "2020-06-24T18:29:53Z", "commit": {"oid": "c0a0f0bcf597578fee232fb75861594e6cff5582"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67846b56345bf9eebdb6bf2b2aca11bea43a5634", "author": {"user": {"login": "adoroszlai", "name": "Doroszlai, Attila"}}, "url": "https://github.com/apache/ozone/commit/67846b56345bf9eebdb6bf2b2aca11bea43a5634", "committedDate": "2020-06-24T18:47:44Z", "message": "trigger new CI check"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3MTU4NzMx", "url": "https://github.com/apache/ozone/pull/1125#pullrequestreview-437158731", "createdAt": "2020-06-25T04:27:04Z", "commit": {"oid": "67846b56345bf9eebdb6bf2b2aca11bea43a5634"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwNDoyNzowNFrOGoq7EQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwNDoyNzowNFrOGoq7EQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTI5OTQ3Mw==", "bodyText": "Minor: Do you think we need some check on the size, when multipart upload option is specified, as in MPU each part should be at least 5MB(except last part) But here we use same part size having that check would be useful, otherwise we shall get an error during complete MPU afteer uploading 10 parts.", "url": "https://github.com/apache/ozone/pull/1125#discussion_r445299473", "createdAt": "2020-06-25T04:27:04Z", "author": {"login": "bharatviswa504"}, "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/S3KeyGenerator.java", "diffHunk": "@@ -54,7 +64,8 @@\n   private String bucketName;\n \n   @Option(names = {\"-s\", \"--size\"},\n-      description = \"Size of the generated key (in bytes)\",\n+      description = \"Size of the generated key (in bytes) or size of one \"\n+          + \"multipart upload part (in case of multipart upload)\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67846b56345bf9eebdb6bf2b2aca11bea43a5634"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3MTU5MjYx", "url": "https://github.com/apache/ozone/pull/1125#pullrequestreview-437159261", "createdAt": "2020-06-25T04:29:02Z", "commit": {"oid": "67846b56345bf9eebdb6bf2b2aca11bea43a5634"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwNDoyOTowMlrOGoq86Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQwNDoyOTowMlrOGoq86Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTI5OTk0NQ==", "bodyText": "Any reason for this change, setting to us-east-1, as previously this was not set to any value?", "url": "https://github.com/apache/ozone/pull/1125#discussion_r445299945", "createdAt": "2020-06-25T04:29:02Z", "author": {"login": "bharatviswa504"}, "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/S3KeyGenerator.java", "diffHunk": "@@ -81,7 +103,8 @@ public Void call() throws Exception {\n     if (endpoint.length() > 0) {\n       amazonS3ClientBuilder\n           .withPathStyleAccessEnabled(true)\n-          .withEndpointConfiguration(new EndpointConfiguration(endpoint, \"\"));\n+          .withEndpointConfiguration(\n+              new EndpointConfiguration(endpoint, \"us-east-1\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67846b56345bf9eebdb6bf2b2aca11bea43a5634"}, "originalPosition": 58}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f2c8c5445eb8b95def040cded0149ff16bed1bc", "author": {"user": {"login": "elek", "name": "Elek, M\u00e1rton"}}, "url": "https://github.com/apache/ozone/commit/6f2c8c5445eb8b95def040cded0149ff16bed1bc", "committedDate": "2020-06-25T11:08:52Z", "message": "findbugs fix + parameter check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9302e0674440f1baa70b9c75b741e54b82d03c9", "author": {"user": {"login": "elek", "name": "Elek, M\u00e1rton"}}, "url": "https://github.com/apache/ozone/commit/f9302e0674440f1baa70b9c75b741e54b82d03c9", "committedDate": "2020-06-25T11:13:40Z", "message": "Merge remote-tracking branch 'elek/HDDS-3866' into HDDS-3866"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94120bf3df63da34dd595ad1a84d9eda4e138ff3", "author": {"user": {"login": "adoroszlai", "name": "Doroszlai, Attila"}}, "url": "https://github.com/apache/ozone/commit/94120bf3df63da34dd595ad1a84d9eda4e138ff3", "committedDate": "2020-06-26T02:31:29Z", "message": "trigger new CI check"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3OTg3MDEx", "url": "https://github.com/apache/ozone/pull/1125#pullrequestreview-437987011", "createdAt": "2020-06-26T03:09:46Z", "commit": {"oid": "94120bf3df63da34dd595ad1a84d9eda4e138ff3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3021, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}