{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE1MTYzNDQ0", "number": 1554, "title": "HDDS-4420. Missing a container shouldn't log message at ERROR level", "bodyText": "What changes were proposed in this pull request?\nAccording to the instructions I replace error to warn.\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-4420\nHow was this patch tested?\nRan UTs pass.", "createdAt": "2020-11-04T06:26:23Z", "url": "https://github.com/apache/ozone/pull/1554", "merged": true, "mergeCommit": {"oid": "8bcd859a504514601ff47b61a67af019f605e707"}, "closed": true, "closedAt": "2020-11-10T14:39:21Z", "author": {"login": "wycccccc"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZHlNNgH2gAyNTE1MTYzNDQ0OjU2NGE2ZjRlZjBjMmM5YTI0NjhiMmQxMmU0MDNjYTcxZWJhOWQyMTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdbKG83AFqTUyNzI0ODI0NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "564a6f4ef0c2c9a2468b2d12e403ca71eba9d215", "author": {"user": {"login": "wycccccc", "name": null}}, "url": "https://github.com/apache/ozone/commit/564a6f4ef0c2c9a2468b2d12e403ca71eba9d215", "committedDate": "2020-11-04T06:15:19Z", "message": "HDDS-4420. Missing a container shouldn't log message at ERROR level"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f94db4d0c12f3b0f6ac6c16ec2c467ea7a729d7", "author": {"user": {"login": "wycccccc", "name": null}}, "url": "https://github.com/apache/ozone/commit/3f94db4d0c12f3b0f6ac6c16ec2c467ea7a729d7", "committedDate": "2020-11-04T07:33:55Z", "message": "Trigger notification"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19fdbab657e7b2146df829f34fc1725753337eb1", "author": {"user": {"login": "wycccccc", "name": null}}, "url": "https://github.com/apache/ozone/commit/19fdbab657e7b2146df829f34fc1725753337eb1", "committedDate": "2020-11-04T07:36:31Z", "message": "Trigger notification"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ac059f556a8667662ad40be0915efb475a2b457", "author": {"user": {"login": "wycccccc", "name": null}}, "url": "https://github.com/apache/ozone/commit/4ac059f556a8667662ad40be0915efb475a2b457", "committedDate": "2020-11-04T09:48:31Z", "message": "Trigger notification"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzMjU1ODE1", "url": "https://github.com/apache/ozone/pull/1554#pullrequestreview-523255815", "createdAt": "2020-11-04T11:02:13Z", "commit": {"oid": "4ac059f556a8667662ad40be0915efb475a2b457"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxMTowMjoxM1rOHtTQkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxMTowMjoxM1rOHtTQkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzI2MzUwNA==", "bodyText": "Avoid the empty line changes here and above", "url": "https://github.com/apache/ozone/pull/1554#discussion_r517263504", "createdAt": "2020-11-04T11:02:13Z", "author": {"login": "ayushtkn"}, "path": "hadoop-hdds/server-scm/src/main/java/org/apache/hadoop/hdds/scm/container/IncrementalContainerReportHandler.java", "diffHunk": "@@ -71,8 +71,10 @@ public void onMessage(final IncrementalContainerReportFromDatanode report,\n     for (ContainerReplicaProto replicaProto :\n         report.getReport().getReportList()) {\n       try {\n+\n         final ContainerID id = ContainerID.valueof(\n             replicaProto.getContainerID());\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ac059f556a8667662ad40be0915efb475a2b457"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzNDUyNzMw", "url": "https://github.com/apache/ozone/pull/1554#pullrequestreview-523452730", "createdAt": "2020-11-04T15:08:52Z", "commit": {"oid": "4ac059f556a8667662ad40be0915efb475a2b457"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxNTowODo1MlrOHtcZJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQxNTowODo1MlrOHtcZJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzQxMzE1Nw==", "bodyText": "I think rather than changing here, we should catch a separate ContainerReplicaNotFoundException  and there reduce the log level, suppressing for all IOE might not be a good choice.\n@jojochuang does that make sense?", "url": "https://github.com/apache/ozone/pull/1554#discussion_r517413157", "createdAt": "2020-11-04T15:08:52Z", "author": {"login": "ayushtkn"}, "path": "hadoop-hdds/server-scm/src/main/java/org/apache/hadoop/hdds/scm/container/IncrementalContainerReportHandler.java", "diffHunk": "@@ -87,7 +89,7 @@ public void onMessage(final IncrementalContainerReportFromDatanode report,\n             report.getDatanodeDetails(), ex);\n       } catch (IOException e) {\n         success = false;\n-        LOG.error(\"Exception while processing ICR for container {}\",\n+        LOG.warn(\"Exception while processing ICR for container {}\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ac059f556a8667662ad40be0915efb475a2b457"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9cc0accafce5a7c41086934f28fb204165d494f0", "author": {"user": {"login": "wycccccc", "name": null}}, "url": "https://github.com/apache/ozone/commit/9cc0accafce5a7c41086934f28fb204165d494f0", "committedDate": "2020-11-05T02:18:54Z", "message": "HDDS-4420. Missing a container shouldn't log message at ERROR level"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e960ef36e0bf441d2ac0dfaa40504a65bd13db5f", "author": {"user": {"login": "wycccccc", "name": null}}, "url": "https://github.com/apache/ozone/commit/e960ef36e0bf441d2ac0dfaa40504a65bd13db5f", "committedDate": "2020-11-05T06:37:30Z", "message": "Trigger notification"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09cf00e51033d444f1b6f8f3cb7bf2b76394c57b", "author": {"user": {"login": "wycccccc", "name": null}}, "url": "https://github.com/apache/ozone/commit/09cf00e51033d444f1b6f8f3cb7bf2b76394c57b", "committedDate": "2020-11-05T08:11:38Z", "message": "Trigger notification"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b928019afd407634de81298592964830732b8843", "author": {"user": {"login": "wycccccc", "name": null}}, "url": "https://github.com/apache/ozone/commit/b928019afd407634de81298592964830732b8843", "committedDate": "2020-11-09T04:35:38Z", "message": "Merge branch 'master' of https://github.com/apache/hadoop-ozone into HDDS-4420"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5756e86ac4a51162c483f8c88eeaf9d893caa3d8", "author": {"user": {"login": "wycccccc", "name": null}}, "url": "https://github.com/apache/ozone/commit/5756e86ac4a51162c483f8c88eeaf9d893caa3d8", "committedDate": "2020-11-09T07:16:57Z", "message": "HDDS-4420. Missing a container shouldn't log message at ERROR level"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f6fa73588cc08879c82facf8ab12325e1144eb8", "author": {"user": {"login": "wycccccc", "name": null}}, "url": "https://github.com/apache/ozone/commit/2f6fa73588cc08879c82facf8ab12325e1144eb8", "committedDate": "2020-11-09T07:27:06Z", "message": "Trigger notification"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12f5f4de1927a7dd85d5c00e32e7f6df718b0964", "author": {"user": {"login": "wycccccc", "name": null}}, "url": "https://github.com/apache/ozone/commit/12f5f4de1927a7dd85d5c00e32e7f6df718b0964", "committedDate": "2020-11-09T07:29:12Z", "message": "HDDS-4420. Missing a container shouldn't log message at ERROR level"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b36af18ce1ff7936e59eea66021964eadcf12b1", "author": {"user": {"login": "wycccccc", "name": null}}, "url": "https://github.com/apache/ozone/commit/0b36af18ce1ff7936e59eea66021964eadcf12b1", "committedDate": "2020-11-09T07:34:44Z", "message": "HDDS-4420. Missing a container shouldn't log message at ERROR level"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2MDY4MTAz", "url": "https://github.com/apache/ozone/pull/1554#pullrequestreview-526068103", "createdAt": "2020-11-09T09:31:35Z", "commit": {"oid": "0b36af18ce1ff7936e59eea66021964eadcf12b1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQwOTozMTozNVrOHvl6Uw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQwOTozMTozNVrOHvl6Uw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTY2NjI1OQ==", "bodyText": "@wycccccc This is just a formatting change. It isn't required here. Please avoid changing it, Apart from this changes Looks Good", "url": "https://github.com/apache/ozone/pull/1554#discussion_r519666259", "createdAt": "2020-11-09T09:31:35Z", "author": {"login": "ayushtkn"}, "path": "hadoop-hdds/server-scm/src/main/java/org/apache/hadoop/hdds/scm/container/IncrementalContainerReportHandler.java", "diffHunk": "@@ -80,11 +80,16 @@ public void onMessage(final IncrementalContainerReportFromDatanode report,\n         processContainerReplica(dd, replicaProto, publisher);\n       } catch (ContainerNotFoundException e) {\n         success = false;\n-        LOG.warn(\"Container {} not found!\", replicaProto.getContainerID());\n+        LOG.warn(\"Container {} not found!\",\n+            replicaProto.getContainerID());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b36af18ce1ff7936e59eea66021964eadcf12b1"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI2MzgwNTI1", "url": "https://github.com/apache/ozone/pull/1554#pullrequestreview-526380525", "createdAt": "2020-11-09T15:38:48Z", "commit": {"oid": "0b36af18ce1ff7936e59eea66021964eadcf12b1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNTozODo0OFrOHv0lug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxNTozODo0OFrOHv0lug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTkwNjc0Ng==", "bodyText": "Based on the CI logs generated by the previous commit (#5756e86), the CheckStyle tool only reported that this line didn't meet the character length limit (<=80). I think it is only necessary to adjust this part.", "url": "https://github.com/apache/ozone/pull/1554#discussion_r519906746", "createdAt": "2020-11-09T15:38:48Z", "author": {"login": "cku328"}, "path": "hadoop-hdds/server-scm/src/main/java/org/apache/hadoop/hdds/scm/container/IncrementalContainerReportHandler.java", "diffHunk": "@@ -80,11 +80,16 @@ public void onMessage(final IncrementalContainerReportFromDatanode report,\n         processContainerReplica(dd, replicaProto, publisher);\n       } catch (ContainerNotFoundException e) {\n         success = false;\n-        LOG.warn(\"Container {} not found!\", replicaProto.getContainerID());\n+        LOG.warn(\"Container {} not found!\",\n+            replicaProto.getContainerID());\n       } catch (NodeNotFoundException ex) {\n         success = false;\n         LOG.error(\"Received ICR from unknown datanode {}\",\n             report.getDatanodeDetails(), ex);\n+      } catch (ContainerReplicaNotFoundException e){\n+        success = false;\n+        LOG.warn(\"Container {} replica not found!\",\n+            replicaProto.getContainerID());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b36af18ce1ff7936e59eea66021964eadcf12b1"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f9697e0c773327e8ca156dd5f3462a01bc7185a", "author": {"user": {"login": "wycccccc", "name": null}}, "url": "https://github.com/apache/ozone/commit/2f9697e0c773327e8ca156dd5f3462a01bc7185a", "committedDate": "2020-11-10T10:35:59Z", "message": "HDDS-4420. Missing a container shouldn't log message at ERROR level"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3MTQ5MTEz", "url": "https://github.com/apache/ozone/pull/1554#pullrequestreview-527149113", "createdAt": "2020-11-10T12:25:19Z", "commit": {"oid": "2f9697e0c773327e8ca156dd5f3462a01bc7185a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3MjQzOTQ1", "url": "https://github.com/apache/ozone/pull/1554#pullrequestreview-527243945", "createdAt": "2020-11-10T14:15:42Z", "commit": {"oid": "2f9697e0c773327e8ca156dd5f3462a01bc7185a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3MjQ4MjQ1", "url": "https://github.com/apache/ozone/pull/1554#pullrequestreview-527248245", "createdAt": "2020-11-10T14:19:50Z", "commit": {"oid": "2f9697e0c773327e8ca156dd5f3462a01bc7185a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2236, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}