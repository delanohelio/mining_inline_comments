{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ2NDU5MDg0", "number": 1744, "title": "HDDS-4622: Use singe server raft cluster in MiniOzoneCluster.", "bodyText": "What changes were proposed in this pull request?\nUse SCMHAManagerImpl and SCMRatisServerImpl instead of MockSCMHAManager and MockRatisServer in MiniOzoneCluster.\nThe MockRatisServer and MockSCMHAManager can not fully test the HA code.\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-4622\nHow was this patch tested?\nCI", "createdAt": "2020-12-29T12:08:32Z", "url": "https://github.com/apache/ozone/pull/1744", "merged": true, "mergeCommit": {"oid": "a5906e6608c8dcedaec1c200ed355e5e05dacb82"}, "closed": true, "closedAt": "2021-01-07T09:55:12Z", "author": {"login": "GlenGeng"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdq7ihxABqjQxNTQ3ODM4MjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdtvIhAABqjQxNzg1OTUwOTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fd115946066d1522ea61fba3fccce89b2bf19979", "author": {"user": {"login": "GlenGeng", "name": "Glen Geng"}}, "url": "https://github.com/apache/ozone/commit/fd115946066d1522ea61fba3fccce89b2bf19979", "committedDate": "2020-12-29T12:05:49Z", "message": "HDDS-4622: Use singe server raft cluster in MiniOzoneCluster."}, "afterCommit": {"oid": "d89a6fd371673d0de203c51a3962cfbf78dba062", "author": {"user": {"login": "GlenGeng", "name": "Glen Geng"}}, "url": "https://github.com/apache/ozone/commit/d89a6fd371673d0de203c51a3962cfbf78dba062", "committedDate": "2020-12-29T14:23:47Z", "message": "HDDS-4622: Use singe server raft cluster in MiniOzoneCluster."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU5NzYzMTE5", "url": "https://github.com/apache/ozone/pull/1744#pullrequestreview-559763119", "createdAt": "2020-12-30T02:42:11Z", "commit": {"oid": "d89a6fd371673d0de203c51a3962cfbf78dba062"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMFQwMjo0MjoxMVrOIMcPog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0zMFQwMjo0MjoxMVrOIMcPog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTkxNjU3OA==", "bodyText": "nit: indents before //", "url": "https://github.com/apache/ozone/pull/1744#discussion_r549916578", "createdAt": "2020-12-30T02:42:11Z", "author": {"login": "amaliujia"}, "path": "hadoop-hdds/server-scm/src/test/java/org/apache/hadoop/hdds/scm/TestUtils.java", "diffHunk": "@@ -475,7 +475,8 @@ public static void quasiCloseContainer(ContainerManagerV2 containerManager,\n   public static StorageContainerManager getScmSimple(OzoneConfiguration conf)\n       throws IOException, AuthenticationException {\n     SCMConfigurator configurator = new SCMConfigurator();\n-    configurator.setSCMHAManager(MockSCMHAManager.getInstance(true));\n+    // TODO: TestDecommissionAndMaintenance will fail with this setting.\n+//    conf.setBoolean(ScmConfigKeys.OZONE_SCM_HA_ENABLE_KEY, true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d89a6fd371673d0de203c51a3962cfbf78dba062"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d89a6fd371673d0de203c51a3962cfbf78dba062", "author": {"user": {"login": "GlenGeng", "name": "Glen Geng"}}, "url": "https://github.com/apache/ozone/commit/d89a6fd371673d0de203c51a3962cfbf78dba062", "committedDate": "2020-12-29T14:23:47Z", "message": "HDDS-4622: Use singe server raft cluster in MiniOzoneCluster."}, "afterCommit": {"oid": "d090bbdd9a6b5e9299badebdcff29484edc2e7b0", "author": {"user": {"login": "GlenGeng", "name": "Glen Geng"}}, "url": "https://github.com/apache/ozone/commit/d090bbdd9a6b5e9299badebdcff29484edc2e7b0", "committedDate": "2020-12-31T06:33:58Z", "message": "HDDS-4622: Use singe server raft cluster in MiniOzoneCluster."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d090bbdd9a6b5e9299badebdcff29484edc2e7b0", "author": {"user": {"login": "GlenGeng", "name": "Glen Geng"}}, "url": "https://github.com/apache/ozone/commit/d090bbdd9a6b5e9299badebdcff29484edc2e7b0", "committedDate": "2020-12-31T06:33:58Z", "message": "HDDS-4622: Use singe server raft cluster in MiniOzoneCluster."}, "afterCommit": {"oid": "eaee2d4e45e2c93d4e74212b5d71c92f76cf05c7", "author": {"user": {"login": "GlenGeng", "name": "Glen Geng"}}, "url": "https://github.com/apache/ozone/commit/eaee2d4e45e2c93d4e74212b5d71c92f76cf05c7", "committedDate": "2020-12-31T06:37:15Z", "message": "HDDS-4622: Use singe server raft cluster in MiniOzoneCluster."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8686b9aec25dd3dfd4e3e5ff2404ea9d87f0cca3", "author": {"user": {"login": "GlenGeng", "name": "Glen Geng"}}, "url": "https://github.com/apache/ozone/commit/8686b9aec25dd3dfd4e3e5ff2404ea9d87f0cca3", "committedDate": "2021-01-07T07:37:29Z", "message": "HDDS-4622: Use singe server raft cluster in MiniOzoneCluster."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eaee2d4e45e2c93d4e74212b5d71c92f76cf05c7", "author": {"user": {"login": "GlenGeng", "name": "Glen Geng"}}, "url": "https://github.com/apache/ozone/commit/eaee2d4e45e2c93d4e74212b5d71c92f76cf05c7", "committedDate": "2020-12-31T06:37:15Z", "message": "HDDS-4622: Use singe server raft cluster in MiniOzoneCluster."}, "afterCommit": {"oid": "8686b9aec25dd3dfd4e3e5ff2404ea9d87f0cca3", "author": {"user": {"login": "GlenGeng", "name": "Glen Geng"}}, "url": "https://github.com/apache/ozone/commit/8686b9aec25dd3dfd4e3e5ff2404ea9d87f0cca3", "committedDate": "2021-01-07T07:37:29Z", "message": "HDDS-4622: Use singe server raft cluster in MiniOzoneCluster."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1922, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}