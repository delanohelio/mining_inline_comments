{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1MTA1NjM5", "number": 1306, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQwNjo1NzoxMFrOEWjEvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQwNjo1OTowNlrOEWjFKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMDc4NzgxOnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/recon/src/main/java/org/apache/hadoop/ozone/recon/tasks/ReconTaskControllerImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQwNjo1NzoxMFrOG94ulw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQwNjo1NzoxMFrOG94ulw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU0NTc1MQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * Blocklist tasks that failed reprocess step more than threshold times.\n          \n          \n            \n               * Ignore tasks that failed reprocess step more than threshold times.", "url": "https://github.com/apache/ozone/pull/1306#discussion_r467545751", "createdAt": "2020-08-09T06:57:10Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/recon/src/main/java/org/apache/hadoop/ozone/recon/tasks/ReconTaskControllerImpl.java", "diffHunk": "@@ -149,15 +149,15 @@ public synchronized void consumeOMEvents(OMUpdateEventBatch events,\n   }\n \n   /**\n-   * Blacklist tasks that failed reprocess step more than threshold times.\n+   * Blocklist tasks that failed reprocess step more than threshold times.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "743209b1fb8e366cf3dbdccbcd55bd14ed9757f6"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMDc4Nzg2OnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/recon/src/main/java/org/apache/hadoop/ozone/recon/tasks/ReconTaskControllerImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQwNjo1NzoyMVrOG94unA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQwNjo1NzoyMVrOG94unA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU0NTc1Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              private void blocklistFailedTasks(List<String> failedTasks) {\n          \n          \n            \n              private void ignoreFailedTasks(List<String> failedTasks) {", "url": "https://github.com/apache/ozone/pull/1306#discussion_r467545756", "createdAt": "2020-08-09T06:57:21Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/recon/src/main/java/org/apache/hadoop/ozone/recon/tasks/ReconTaskControllerImpl.java", "diffHunk": "@@ -149,15 +149,15 @@ public synchronized void consumeOMEvents(OMUpdateEventBatch events,\n   }\n \n   /**\n-   * Blacklist tasks that failed reprocess step more than threshold times.\n+   * Blocklist tasks that failed reprocess step more than threshold times.\n    * @param failedTasks list of failed tasks.\n    */\n-  private void blacklistFailedTasks(List<String> failedTasks) {\n+  private void blocklistFailedTasks(List<String> failedTasks) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "743209b1fb8e366cf3dbdccbcd55bd14ed9757f6"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMDc4ODA3OnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/recon/src/main/java/org/apache/hadoop/ozone/recon/tasks/ReconTaskControllerImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQwNjo1Nzo0MVrOG94utg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQwNjo1Nzo0MVrOG94utg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU0NTc4Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    LOG.info(\"Blocklisting Task since it failed retry and \" +\n          \n          \n            \n                    LOG.info(\"Ignoring task since it failed retry and \" +", "url": "https://github.com/apache/ozone/pull/1306#discussion_r467545782", "createdAt": "2020-08-09T06:57:41Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/recon/src/main/java/org/apache/hadoop/ozone/recon/tasks/ReconTaskControllerImpl.java", "diffHunk": "@@ -149,15 +149,15 @@ public synchronized void consumeOMEvents(OMUpdateEventBatch events,\n   }\n \n   /**\n-   * Blacklist tasks that failed reprocess step more than threshold times.\n+   * Blocklist tasks that failed reprocess step more than threshold times.\n    * @param failedTasks list of failed tasks.\n    */\n-  private void blacklistFailedTasks(List<String> failedTasks) {\n+  private void blocklistFailedTasks(List<String> failedTasks) {\n     for (String taskName : failedTasks) {\n       LOG.info(\"Reprocess step failed for task {}.\", taskName);\n       if (taskFailureCounter.get(taskName).incrementAndGet() >\n           TASK_FAILURE_THRESHOLD) {\n-        LOG.info(\"Blacklisting Task since it failed retry and \" +\n+        LOG.info(\"Blocklisting Task since it failed retry and \" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "743209b1fb8e366cf3dbdccbcd55bd14ed9757f6"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMDc4ODI5OnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/recon/src/test/java/org/apache/hadoop/ozone/recon/tasks/TestReconTaskControllerImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQwNjo1ODowMlrOG94u0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQwNjo1ODowMlrOG94u0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU0NTgwOQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              public void testBadBehavedTaskBlocklisting() throws Exception {\n          \n          \n            \n              public void testBadBehavedTaskIsIgnored() throws Exception {", "url": "https://github.com/apache/ozone/pull/1306#discussion_r467545809", "createdAt": "2020-08-09T06:58:02Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/recon/src/test/java/org/apache/hadoop/ozone/recon/tasks/TestReconTaskControllerImpl.java", "diffHunk": "@@ -131,7 +131,7 @@ public void testFailedTaskRetryLogic() throws Exception {\n   }\n \n   @Test\n-  public void testBadBehavedTaskBlacklisting() throws Exception {\n+  public void testBadBehavedTaskBlocklisting() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "743209b1fb8e366cf3dbdccbcd55bd14ed9757f6"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMDc4ODMxOnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/recon/src/test/java/org/apache/hadoop/ozone/recon/tasks/TestReconTaskControllerImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQwNjo1ODowOFrOG94u1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQwNjo1ODowOFrOG94u1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU0NTgxNA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                //Should be blocklisted now.\n          \n          \n            \n                //Should be ignored now.", "url": "https://github.com/apache/ozone/pull/1306#discussion_r467545814", "createdAt": "2020-08-09T06:58:08Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/recon/src/test/java/org/apache/hadoop/ozone/recon/tasks/TestReconTaskControllerImpl.java", "diffHunk": "@@ -151,7 +151,7 @@ public void testBadBehavedTaskBlacklisting() throws Exception {\n           .get(dummyReconDBTask.getTaskName()));\n     }\n \n-    //Should be blacklisted now.\n+    //Should be blocklisted now.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "743209b1fb8e366cf3dbdccbcd55bd14ed9757f6"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMDc4ODcyOnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/recon/src/main/java/org/apache/hadoop/ozone/recon/tasks/ReconTaskControllerImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQwNjo1ODo0MFrOG94vAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQwNjo1ODo0MFrOG94vAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU0NTg1OA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      blocklistFailedTasks(reprocessFailedTasks);\n          \n          \n            \n                      ignoreFailedTasks(reprocessFailedTasks);", "url": "https://github.com/apache/ozone/pull/1306#discussion_r467545858", "createdAt": "2020-08-09T06:58:40Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/recon/src/main/java/org/apache/hadoop/ozone/recon/tasks/ReconTaskControllerImpl.java", "diffHunk": "@@ -140,7 +140,7 @@ public synchronized void consumeOMEvents(OMUpdateEventBatch events,\n           results = executorService.invokeAll(tasks);\n           List<String> reprocessFailedTasks =\n               processTaskResults(results, events);\n-          blacklistFailedTasks(reprocessFailedTasks);\n+          blocklistFailedTasks(reprocessFailedTasks);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "743209b1fb8e366cf3dbdccbcd55bd14ed9757f6"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMDc4ODkxOnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/recon/src/main/java/org/apache/hadoop/ozone/recon/tasks/ReconTaskControllerImpl.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQwNjo1OTowNlrOG94vHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOVQwNjo1OTowNlrOG94vHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU0NTg4Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * (blocklisted).\n          \n          \n            \n               * (ignored).", "url": "https://github.com/apache/ozone/pull/1306#discussion_r467545886", "createdAt": "2020-08-09T06:59:06Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/recon/src/main/java/org/apache/hadoop/ozone/recon/tasks/ReconTaskControllerImpl.java", "diffHunk": "@@ -94,7 +94,7 @@ public void registerTask(ReconOmTask task) {\n    * For every registered task, we try process step twice and then reprocess\n    * once (if process failed twice) to absorb the events. If a task has failed\n    * reprocess call more than 2 times across events, it is unregistered\n-   * (blacklisted).\n+   * (blocklisted).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "743209b1fb8e366cf3dbdccbcd55bd14ed9757f6"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3868, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}