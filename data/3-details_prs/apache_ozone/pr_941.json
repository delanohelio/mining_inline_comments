{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5Nzk4NjA3", "number": 941, "title": "HDDS-3574. Implement ofs://: Override getTrashRoot", "bodyText": "What changes were proposed in this pull request?\nImplement getTrashRoot() in OFS so deleting to trash will always move files/dirs within the same bucket.\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-3574\nHow was this patch tested?\nAdded new test. Manually tested in docker.\nTo Check\n\nWhether key path char set includes the char set for user name\n\nBefore and After patch\nBefore the patch the FS client might attempt to move the file to another bucket when -skipTrash is not specified and fs.trash.interval > 0.\n# Configure fs.trash.interval to a value larger than 0\nbash-4.2$ vi /etc/hadoop/core-site.xml\nbash-4.2$ ozone fs -mkdir -p ofs://om/vol1/bucket1/dir1/\nbash-4.2$ ozone fs -touch ofs://om/vol1/bucket1/dir1/key1 \nbash-4.2$ ozone fs -rm ofs://om/vol1/bucket1/dir1/key1\n2020-05-18 17:57:44,953 [main] INFO Configuration.deprecation: io.bytes.per.checksum is deprecated. Instead, use dfs.bytes-per-checksum\n2020-05-18 17:57:44,971 [main] INFO ozone.BasicRootedOzoneFileSystem: getTrashRoot: path = ofs://om/vol1/bucket1/dir1/key1\n2020-05-18 17:57:45,069 [main] INFO rpc.RpcClient: Creating Volume: user, with hadoop as owner.\n2020-05-18 17:57:45,104 [main] INFO rpc.RpcClient: Creating Bucket: user/hadoop, with Versioning false and Storage Type set to DISK and Encryption set to false \nrm: Failed to move to trash: ofs://om/vol1/bucket1/dir1/key1: Cannot rename a key to a different bucket. Consider using -skipTrash option\nAfter the patch the client should move the deleted file to trash under the bucket.\nbash-4.2$ vi /etc/hadoop/core-site.xml\nbash-4.2$ ozone fs -mkdir -p ofs://om/vol1/bucket1/dir1/\n2020-05-19 18:04:41,914 [main] INFO rpc.RpcClient: Creating Volume: vol1, with hadoop as owner.\n2020-05-19 18:04:42,076 [main] INFO rpc.RpcClient: Creating Bucket: vol1/bucket1, with Versioning false and Storage Type set to DISK and Encryption set to false\nbash-4.2$ ozone fs -touch ofs://om/vol1/bucket1/dir1/key1\nbash-4.2$ ozone fs -rm ofs://om/vol1/bucket1/dir1/key1\n2020-05-19 18:04:52,055 [main] INFO Configuration.deprecation: io.bytes.per.checksum is deprecated. Instead, use dfs.bytes-per-checksum\n2020-05-19 18:04:52,274 [main] INFO fs.TrashPolicyDefault: Moved: 'ofs://om/vol1/bucket1/dir1/key1' to trash at: ofs://om/vol1/bucket1/.Trash/hadoop/Current/vol1/bucket1/dir1/key1", "createdAt": "2020-05-18T23:50:25Z", "url": "https://github.com/apache/ozone/pull/941", "merged": true, "mergeCommit": {"oid": "28540cb1cc1f27c43f727b797b408125e21a9abb"}, "closed": true, "closedAt": "2020-06-02T14:53:21Z", "author": {"login": "smengcl"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABciowcAgH2gAyNDE5Nzk4NjA3OmFjM2NjNjk1Y2UxZGQ5MWM1MThlMTQyMzUwNGE4NmQ3YjA0MTlkNjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcmIyyTgH2gAyNDE5Nzk4NjA3OjQ4MTA4MDAwZjFmMzIwMTNiMThkNTI0MWU3YTY2NjkzMmU0ODdiYjg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ac3cc695ce1dd91c518e1423504a86d7b0419d60", "author": {"user": {"login": "smengcl", "name": "Siyao Meng"}}, "url": "https://github.com/apache/ozone/commit/ac3cc695ce1dd91c518e1423504a86d7b0419d60", "committedDate": "2020-05-18T23:48:37Z", "message": "Implement getTrashRoot for OFS."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0747a141faff5cbf2964bb1b249d35c7098026db", "author": {"user": {"login": "smengcl", "name": "Siyao Meng"}}, "url": "https://github.com/apache/ozone/commit/0747a141faff5cbf2964bb1b249d35c7098026db", "committedDate": "2020-05-18T23:48:57Z", "message": "Add test."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0ODk5NTE5", "url": "https://github.com/apache/ozone/pull/941#pullrequestreview-414899519", "createdAt": "2020-05-19T23:48:09Z", "commit": {"oid": "0747a141faff5cbf2964bb1b249d35c7098026db"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQyMzo0ODowOVrOGX2euQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQyMzo0ODowOVrOGX2euQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzY2MzAzMw==", "bodyText": "Minor NIT: Should we set authority in the initOFSPath??\nAs there we have checked for auth.", "url": "https://github.com/apache/ozone/pull/941#discussion_r427663033", "createdAt": "2020-05-19T23:48:09Z", "author": {"login": "bharatviswa504"}, "path": "hadoop-ozone/ozonefs/src/main/java/org/apache/hadoop/fs/ozone/OFSPath.java", "diffHunk": "@@ -66,7 +70,13 @@\n   static final String OFS_MOUNT_TMP_VOLUMENAME = \"tmp\";\n \n   OFSPath(Path path) {\n-    String pathStr = path.toUri().getPath();\n+    URI uri = path.toUri();\n+    // scheme is case-insensitive\n+    if (!uri.getScheme().toLowerCase().equals(OZONE_OFS_URI_SCHEME)) {\n+      throw new ParseException(\"Can't parse schemes other than ofs://.\");\n+    }\n+    authority = uri.getAuthority();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0747a141faff5cbf2964bb1b249d35c7098026db"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0OTAyMjUw", "url": "https://github.com/apache/ozone/pull/941#pullrequestreview-414902250", "createdAt": "2020-05-19T23:55:41Z", "commit": {"oid": "0747a141faff5cbf2964bb1b249d35c7098026db"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQyMzo1NTo0MVrOGX2nqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQyMzo1NTo0MVrOGX2nqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzY2NTMyMA==", "bodyText": "Thinking more, do we need this, from above uri, we can get authority and check if it is empty or nulll and then throw error. So, in this way, we don't need to convert path to URI again.", "url": "https://github.com/apache/ozone/pull/941#discussion_r427665320", "createdAt": "2020-05-19T23:55:41Z", "author": {"login": "bharatviswa504"}, "path": "hadoop-ozone/ozonefs/src/main/java/org/apache/hadoop/fs/ozone/OFSPath.java", "diffHunk": "@@ -78,8 +88,8 @@ private void initOFSPath(String pathStr) {\n     // pathStr should not have authority\n     try {\n       URI uri = new URI(pathStr);\n-      String authority = uri.getAuthority();\n-      if (authority != null && !authority.isEmpty()) {\n+      String auth = uri.getAuthority();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0747a141faff5cbf2964bb1b249d35c7098026db"}, "originalPosition": 46}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0OTAyNDE0", "url": "https://github.com/apache/ozone/pull/941#pullrequestreview-414902414", "createdAt": "2020-05-19T23:56:06Z", "commit": {"oid": "0747a141faff5cbf2964bb1b249d35c7098026db"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NTU1MzU3", "url": "https://github.com/apache/ozone/pull/941#pullrequestreview-415555357", "createdAt": "2020-05-20T17:22:30Z", "commit": {"oid": "0747a141faff5cbf2964bb1b249d35c7098026db"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNzoyMjozMFrOGYWJDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNzoyMjozMFrOGYWJDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODE4MTc3Mg==", "bodyText": "Should it be first username and then .Trash ? like ofs:///vol1/bucket1/username/.Trash  ?\nThis is default iml at FileSystem.java\n\n /**\n   * Get the root directory of Trash for current user when the path specified\n   * is deleted.\n   *\n   * @param path the trash root of the path to be determined.\n   * @return the default implementation returns {@code /user/$USER/.Trash}\n   */\n  public Path getTrashRoot(Path path) {\n    return this.makeQualified(new Path(getHomeDirectory().toUri().getPath(),\n        TRASH_PREFIX));\n  }\n\nCC: @mukul1987 @sadanand48 @arp7 : I think this should be checked with Sadanand implementation as well to be in sync?", "url": "https://github.com/apache/ozone/pull/941#discussion_r428181772", "createdAt": "2020-05-20T17:22:30Z", "author": {"login": "umamaheswararao"}, "path": "hadoop-ozone/ozonefs/src/main/java/org/apache/hadoop/fs/ozone/OFSPath.java", "diffHunk": "@@ -238,4 +248,23 @@ static String getTempMountBucketNameOfCurrentUser() throws IOException {\n     String username = UserGroupInformation.getCurrentUser().getUserName();\n     return getTempMountBucketName(username);\n   }\n+\n+  /**\n+   * Return trash root for the given path.\n+   * @return trash root for the given path\n+   */\n+  public Path getTrashRoot() {\n+    try {\n+      String username = UserGroupInformation.getCurrentUser().getUserName();\n+      URI uri = new URIBuilder().setScheme(OZONE_OFS_URI_SCHEME)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0747a141faff5cbf2964bb1b249d35c7098026db"}, "originalPosition": 63}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NTg0Mzkw", "url": "https://github.com/apache/ozone/pull/941#pullrequestreview-415584390", "createdAt": "2020-05-20T18:00:47Z", "commit": {"oid": "0747a141faff5cbf2964bb1b249d35c7098026db"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxODowMDo0N1rOGYXizg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxODowMDo0N1rOGYXizg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODIwNDc1MA==", "bodyText": "should we change initOFSPath to take URI as parameter so that all the URI check can be done inside initOFSPath?", "url": "https://github.com/apache/ozone/pull/941#discussion_r428204750", "createdAt": "2020-05-20T18:00:47Z", "author": {"login": "xiaoyuyao"}, "path": "hadoop-ozone/ozonefs/src/main/java/org/apache/hadoop/fs/ozone/OFSPath.java", "diffHunk": "@@ -78,8 +88,8 @@ private void initOFSPath(String pathStr) {\n     // pathStr should not have authority", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0747a141faff5cbf2964bb1b249d35c7098026db"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NTkwNDE0", "url": "https://github.com/apache/ozone/pull/941#pullrequestreview-415590414", "createdAt": "2020-05-20T18:09:12Z", "commit": {"oid": "0747a141faff5cbf2964bb1b249d35c7098026db"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxODowOToxMlrOGYX1Sg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxODowOToxMlrOGYX1Sg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODIwOTQ4Mg==", "bodyText": "NIT: we can use Path API to create the path safely instead of string concat.", "url": "https://github.com/apache/ozone/pull/941#discussion_r428209482", "createdAt": "2020-05-20T18:09:12Z", "author": {"login": "xiaoyuyao"}, "path": "hadoop-ozone/ozonefs/src/main/java/org/apache/hadoop/fs/ozone/OFSPath.java", "diffHunk": "@@ -238,4 +248,23 @@ static String getTempMountBucketNameOfCurrentUser() throws IOException {\n     String username = UserGroupInformation.getCurrentUser().getUserName();\n     return getTempMountBucketName(username);\n   }\n+\n+  /**\n+   * Return trash root for the given path.\n+   * @return trash root for the given path\n+   */\n+  public Path getTrashRoot() {\n+    try {\n+      String username = UserGroupInformation.getCurrentUser().getUserName();\n+      URI uri = new URIBuilder().setScheme(OZONE_OFS_URI_SCHEME)\n+          .setHost(authority).setPath(OZONE_URI_DELIMITER + volumeName +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0747a141faff5cbf2964bb1b249d35c7098026db"}, "originalPosition": 64}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NTkxMjQw", "url": "https://github.com/apache/ozone/pull/941#pullrequestreview-415591240", "createdAt": "2020-05-20T18:10:24Z", "commit": {"oid": "0747a141faff5cbf2964bb1b249d35c7098026db"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxODoxMDoyNFrOGYX4jA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxODoxMDoyNFrOGYX4jA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODIxMDMxNg==", "bodyText": "Can you also verify the key1 is moved to the proper Trash location?", "url": "https://github.com/apache/ozone/pull/941#discussion_r428210316", "createdAt": "2020-05-20T18:10:24Z", "author": {"login": "xiaoyuyao"}, "path": "hadoop-ozone/integration-test/src/test/java/org/apache/hadoop/ozone/shell/TestOzoneShellHA.java", "diffHunk": "@@ -442,6 +446,27 @@ public void testOzoneShCmdList() {\n     Assert.assertEquals(0, getNumOfBuckets(\"bucket\"));\n   }\n \n+  @Test\n+  public void testDeleteToTrash() throws Exception {\n+    OzoneConfiguration confcli = new OzoneConfiguration(conf);\n+    confcli.setInt(FS_TRASH_INTERVAL_KEY, 60);\n+    confcli.set(\"fs.ofs.impl\",\n+        \"org.apache.hadoop.fs.ozone.RootedOzoneFileSystem\");\n+    OzoneFsShell shell = new OzoneFsShell(confcli);\n+    final String hostPrefix = OZONE_OFS_URI_SCHEME + \"://\" + omServiceId;\n+    final String dirPrefix = hostPrefix + \"/volumed2t/bucket1/dir1\";\n+    int res;\n+    try {\n+      res = ToolRunner.run(shell, new String[]{\"-mkdir\", \"-p\", dirPrefix});\n+      Assert.assertEquals(0, res);\n+      res = ToolRunner.run(shell, new String[]{\"-touch\", dirPrefix + \"/key1\"});\n+      Assert.assertEquals(0, res);\n+      res = ToolRunner.run(shell, new String[]{\"-rm\", dirPrefix + \"/key1\"});\n+      Assert.assertEquals(0, res);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0747a141faff5cbf2964bb1b249d35c7098026db"}, "originalPosition": 45}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NTkxNTU5", "url": "https://github.com/apache/ozone/pull/941#pullrequestreview-415591559", "createdAt": "2020-05-20T18:10:51Z", "commit": {"oid": "0747a141faff5cbf2964bb1b249d35c7098026db"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxODoxMDo1MVrOGYX5fA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxODoxMDo1MVrOGYX5fA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODIxMDU1Ng==", "bodyText": "Can you add a test with skipTrash and make sure it is not moved to the Trash location?", "url": "https://github.com/apache/ozone/pull/941#discussion_r428210556", "createdAt": "2020-05-20T18:10:51Z", "author": {"login": "xiaoyuyao"}, "path": "hadoop-ozone/integration-test/src/test/java/org/apache/hadoop/ozone/shell/TestOzoneShellHA.java", "diffHunk": "@@ -442,6 +446,27 @@ public void testOzoneShCmdList() {\n     Assert.assertEquals(0, getNumOfBuckets(\"bucket\"));\n   }\n \n+  @Test\n+  public void testDeleteToTrash() throws Exception {\n+    OzoneConfiguration confcli = new OzoneConfiguration(conf);\n+    confcli.setInt(FS_TRASH_INTERVAL_KEY, 60);\n+    confcli.set(\"fs.ofs.impl\",\n+        \"org.apache.hadoop.fs.ozone.RootedOzoneFileSystem\");\n+    OzoneFsShell shell = new OzoneFsShell(confcli);\n+    final String hostPrefix = OZONE_OFS_URI_SCHEME + \"://\" + omServiceId;\n+    final String dirPrefix = hostPrefix + \"/volumed2t/bucket1/dir1\";\n+    int res;\n+    try {\n+      res = ToolRunner.run(shell, new String[]{\"-mkdir\", \"-p\", dirPrefix});\n+      Assert.assertEquals(0, res);\n+      res = ToolRunner.run(shell, new String[]{\"-touch\", dirPrefix + \"/key1\"});\n+      Assert.assertEquals(0, res);\n+      res = ToolRunner.run(shell, new String[]{\"-rm\", dirPrefix + \"/key1\"});", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0747a141faff5cbf2964bb1b249d35c7098026db"}, "originalPosition": 44}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NTk0NDY5", "url": "https://github.com/apache/ozone/pull/941#pullrequestreview-415594469", "createdAt": "2020-05-20T18:14:55Z", "commit": {"oid": "0747a141faff5cbf2964bb1b249d35c7098026db"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxODoxNDo1NVrOGYYCBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxODoxNDo1NVrOGYYCBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODIxMjc0MQ==", "bodyText": "You also need to Override getTrashRoots() which returns all trash locations under the root across multiple buckets. This should be very similar to how Trash under encryption zone is handled in DistributedFileSystem#getTrashRoots().", "url": "https://github.com/apache/ozone/pull/941#discussion_r428212741", "createdAt": "2020-05-20T18:14:55Z", "author": {"login": "xiaoyuyao"}, "path": "hadoop-ozone/ozonefs/src/main/java/org/apache/hadoop/fs/ozone/BasicRootedOzoneFileSystem.java", "diffHunk": "@@ -658,6 +658,19 @@ public String getUsername() {\n     return userName;\n   }\n \n+  /**\n+   * Get the root directory of Trash for a path in OFS.\n+   * Returns /<volumename>/<bucketname>/.Trash/<username>\n+   * Caller appends either Current or checkpoint timestamp for trash destination\n+   * @param path the trash root of the path to be determined.\n+   * @return trash root\n+   */\n+  @Override", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0747a141faff5cbf2964bb1b249d35c7098026db"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NTk0Nzc3", "url": "https://github.com/apache/ozone/pull/941#pullrequestreview-415594777", "createdAt": "2020-05-20T18:15:20Z", "commit": {"oid": "0747a141faff5cbf2964bb1b249d35c7098026db"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53c19f1f1f543978f7e381d2160e35415756a859", "author": {"user": {"login": "smengcl", "name": "Siyao Meng"}}, "url": "https://github.com/apache/ozone/commit/53c19f1f1f543978f7e381d2160e35415756a859", "committedDate": "2020-05-22T19:31:02Z", "message": "Use only Hadoop common Path API to build the trash root path."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6dae41c800fb80b1b28054387c0418cecdc2f39", "author": {"user": {"login": "smengcl", "name": "Siyao Meng"}}, "url": "https://github.com/apache/ozone/commit/a6dae41c800fb80b1b28054387c0418cecdc2f39", "committedDate": "2020-05-28T21:15:52Z", "message": "Refactor OFSPath."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06ad9d2a8285828b5506a891298df90f9d730b02", "author": {"user": {"login": "smengcl", "name": "Siyao Meng"}}, "url": "https://github.com/apache/ozone/commit/06ad9d2a8285828b5506a891298df90f9d730b02", "committedDate": "2020-05-28T22:37:37Z", "message": "Impl OFSPath#toString."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31969f9066a3e81fdf44e40b04d676e341604648", "author": {"user": {"login": "smengcl", "name": "Siyao Meng"}}, "url": "https://github.com/apache/ozone/commit/31969f9066a3e81fdf44e40b04d676e341604648", "committedDate": "2020-05-29T20:04:42Z", "message": "testDeleteToTrash now checks if file is moved to the trash location."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "241361e378f7fc541229883137a93cbb2960869f", "author": {"user": {"login": "smengcl", "name": "Siyao Meng"}}, "url": "https://github.com/apache/ozone/commit/241361e378f7fc541229883137a93cbb2960869f", "committedDate": "2020-05-29T20:46:55Z", "message": "testDeleteToTrash -> testDeleteToTrashOrSkipTrash. Also checks skipTrash behavior now."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c04e5594debcf459c3f2478b59e34904cc43b980", "author": {"user": {"login": "smengcl", "name": "Siyao Meng"}}, "url": "https://github.com/apache/ozone/commit/c04e5594debcf459c3f2478b59e34904cc43b980", "committedDate": "2020-05-29T20:48:04Z", "message": "Fix checkstyle."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49125a00b193ccfa00f3e0913c01025a054948d0", "author": {"user": {"login": "smengcl", "name": "Siyao Meng"}}, "url": "https://github.com/apache/ozone/commit/49125a00b193ccfa00f3e0913c01025a054948d0", "committedDate": "2020-05-29T20:49:12Z", "message": "Remove suppress checkstyle in the new test. Committed erroneously."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48108000f1f32013b18d5241e7a666932e487bb8", "author": {"user": {"login": "smengcl", "name": "Siyao Meng"}}, "url": "https://github.com/apache/ozone/commit/48108000f1f32013b18d5241e7a666932e487bb8", "committedDate": "2020-05-29T20:49:55Z", "message": "Fix checkstyle."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3276, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}