{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0ODg5MDQ5", "number": 1454, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxNTozMzoxN1rOEonKKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxNjoxNzowMVrOEpGyng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExMDIwMDc1OnYy", "diffSide": "RIGHT", "path": "hadoop-hdds/common/src/main/java/org/apache/hadoop/hdds/scm/storage/ContainerProtocolCalls.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQxNTozMzoxN1rOHZzd1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxNjoyNDoyOFrOHaln5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjgxOTY3MA==", "bodyText": "Can we update the javadoc comment of this method as we new added param tokens here?\nThe same suggestion for methods we changed below:\n\nputBlockAsync\nreadChunk\nwriteChunkAsync", "url": "https://github.com/apache/ozone/pull/1454#discussion_r496819670", "createdAt": "2020-09-29T15:33:17Z", "author": {"login": "linyiqun"}, "path": "hadoop-hdds/common/src/main/java/org/apache/hadoop/hdds/scm/storage/ContainerProtocolCalls.java", "diffHunk": "@@ -84,7 +86,8 @@ private ContainerProtocolCalls() {\n    * @throws IOException if there is an I/O error while performing the call\n    */\n   public static GetBlockResponseProto getBlock(XceiverClientSpi xceiverClient,\n-      DatanodeBlockID datanodeBlockID) throws IOException {\n+      DatanodeBlockID datanodeBlockID,\n+      Collection<Token<? extends TokenIdentifier>> tokens) throws IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "980842eb0f1377d87decf3fe638fb4874a658830"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njg4OTgxNg==", "bodyText": "Thanks @linyiqun for the suggestion.  Would\n@param tokens list of tokens the current user has, possibly including a token for this block\nbe OK, or do you have a better description for this param?", "url": "https://github.com/apache/ozone/pull/1454#discussion_r496889816", "createdAt": "2020-09-29T16:47:53Z", "author": {"login": "adoroszlai"}, "path": "hadoop-hdds/common/src/main/java/org/apache/hadoop/hdds/scm/storage/ContainerProtocolCalls.java", "diffHunk": "@@ -84,7 +86,8 @@ private ContainerProtocolCalls() {\n    * @throws IOException if there is an I/O error while performing the call\n    */\n   public static GetBlockResponseProto getBlock(XceiverClientSpi xceiverClient,\n-      DatanodeBlockID datanodeBlockID) throws IOException {\n+      DatanodeBlockID datanodeBlockID,\n+      Collection<Token<? extends TokenIdentifier>> tokens) throws IOException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjgxOTY3MA=="}, "originalCommit": {"oid": "980842eb0f1377d87decf3fe638fb4874a658830"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzE5OTQ5NA==", "bodyText": "@adoroszlai , above description looks good to me. Thanks.", "url": "https://github.com/apache/ozone/pull/1454#discussion_r497199494", "createdAt": "2020-09-30T01:53:03Z", "author": {"login": "linyiqun"}, "path": "hadoop-hdds/common/src/main/java/org/apache/hadoop/hdds/scm/storage/ContainerProtocolCalls.java", "diffHunk": "@@ -84,7 +86,8 @@ private ContainerProtocolCalls() {\n    * @throws IOException if there is an I/O error while performing the call\n    */\n   public static GetBlockResponseProto getBlock(XceiverClientSpi xceiverClient,\n-      DatanodeBlockID datanodeBlockID) throws IOException {\n+      DatanodeBlockID datanodeBlockID,\n+      Collection<Token<? extends TokenIdentifier>> tokens) throws IOException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjgxOTY3MA=="}, "originalCommit": {"oid": "980842eb0f1377d87decf3fe638fb4874a658830"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzY0MTQ0Nw==", "bodyText": "We can directly encode the pass in token for the specific block id without additional token selection.", "url": "https://github.com/apache/ozone/pull/1454#discussion_r497641447", "createdAt": "2020-09-30T16:24:28Z", "author": {"login": "xiaoyuyao"}, "path": "hadoop-hdds/common/src/main/java/org/apache/hadoop/hdds/scm/storage/ContainerProtocolCalls.java", "diffHunk": "@@ -84,7 +86,8 @@ private ContainerProtocolCalls() {\n    * @throws IOException if there is an I/O error while performing the call\n    */\n   public static GetBlockResponseProto getBlock(XceiverClientSpi xceiverClient,\n-      DatanodeBlockID datanodeBlockID) throws IOException {\n+      DatanodeBlockID datanodeBlockID,\n+      Collection<Token<? extends TokenIdentifier>> tokens) throws IOException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjgxOTY3MA=="}, "originalCommit": {"oid": "980842eb0f1377d87decf3fe638fb4874a658830"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExNTM4MzM0OnYy", "diffSide": "RIGHT", "path": "hadoop-hdds/client/src/main/java/org/apache/hadoop/hdds/scm/storage/BlockInputStream.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxNjoxNzowMVrOHalVBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxNjoxNzowMVrOHalVBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzYzNjYxMw==", "bodyText": "Should we just pass down the token from the caller directly and bypass the UGI addToken/getTokens completely?", "url": "https://github.com/apache/ozone/pull/1454#discussion_r497636613", "createdAt": "2020-09-30T16:17:01Z", "author": {"login": "xiaoyuyao"}, "path": "hadoop-hdds/client/src/main/java/org/apache/hadoop/hdds/scm/storage/BlockInputStream.java", "diffHunk": "@@ -193,10 +196,11 @@ public synchronized void initialize() throws IOException {\n       if (token != null) {\n         UserGroupInformation.getCurrentUser().addToken(token);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3fd7d07b7d35d2060db5ea5ce1bdfe3fac8e63c1"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4941, "cost": 1, "resetAt": "2021-11-11T21:28:48Z"}}}