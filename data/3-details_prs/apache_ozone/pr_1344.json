{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcyNjMxMjU1", "number": 1344, "title": "HDDS-4140. Auto-close /pending pull requests after 21 days of inactivity", "bodyText": "What changes were proposed in this pull request?\nEarlier we introduced a way to mark the inactive pull requests with \"pending\" label (with the help of /pending comment).\nThis pull requests introduce a new scheduled build which closes the \"pending\" pull requests after 21 days of inactivity.\nIMPORTANT: Only the pull requests which are pending on the author will be closed.\nWe should NEVER close a pull requests which are waiting for the attention of a committer.\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-4140\nHow was this patch tested?\non the https://github.com/elek/hadoop-ozone/ fork with this PR: elek#13", "createdAt": "2020-08-24T16:28:52Z", "url": "https://github.com/apache/ozone/pull/1344", "merged": true, "mergeCommit": {"oid": "5523636e30e5ccd7632d78937da1b9fc03f9be4b"}, "closed": true, "closedAt": "2020-08-27T09:02:56Z", "author": {"login": "elek"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCEw8lAH2gAyNDcyNjMxMjU1OmY3ZDU0Yjk4NGE4M2Q2OGE3YWE0OTIxNzA5YzNjNzQ0OTViNDIyODE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCq2P4gFqTQ3NTQzMDgwNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f7d54b984a83d68a7aa4921709c3c74495b42281", "author": {"user": {"login": "elek", "name": "Elek, M\u00e1rton"}}, "url": "https://github.com/apache/ozone/commit/f7d54b984a83d68a7aa4921709c3c74495b42281", "committedDate": "2020-08-24T15:58:10Z", "message": "close-pendi\n\nfix close-pending command"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ee814ad4dee09e686aeeb310c860462d9b7cde7", "author": {"user": {"login": "elek", "name": "Elek, M\u00e1rton"}}, "url": "https://github.com/apache/ozone/commit/2ee814ad4dee09e686aeeb310c860462d9b7cde7", "committedDate": "2020-08-24T15:58:12Z", "message": "make it work with apache repo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9f73e1a003d3cb2d15abfbf629c4916d700cba2", "author": {"user": {"login": "elek", "name": "Elek, M\u00e1rton"}}, "url": "https://github.com/apache/ozone/commit/d9f73e1a003d3cb2d15abfbf629c4916d700cba2", "committedDate": "2020-08-24T16:28:48Z", "message": "use 3 weeks of inactivity as the limit"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0MjcwNDkz", "url": "https://github.com/apache/ozone/pull/1344#pullrequestreview-474270493", "createdAt": "2020-08-25T08:50:29Z", "commit": {"oid": "d9f73e1a003d3cb2d15abfbf629c4916d700cba2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwODo1MDoyOVrOHGOJ7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwODo1MDoyOVrOHGOJ7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjI4NTQyMw==", "bodyText": "I think it would be better to run this workflow once per day instead of every 5 minutes.  The list of pending PRs to be closed is filtered only by date (eg. 2020-08-03), not time, so most of the runs would be no-ops.", "url": "https://github.com/apache/ozone/pull/1344#discussion_r476285423", "createdAt": "2020-08-25T08:50:29Z", "author": {"login": "adoroszlai"}, "path": ".github/workflows/close-pending.yaml", "diffHunk": "@@ -0,0 +1,32 @@\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+name: close-prs\n+\n+on:\n+  schedule:\n+  - cron:  '*/5 * * * *'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9f73e1a003d3cb2d15abfbf629c4916d700cba2"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0934a4fcf3697090c9fa2fb20fa9d3f4a39f667", "author": {"user": {"login": "elek", "name": "Elek, M\u00e1rton"}}, "url": "https://github.com/apache/ozone/commit/f0934a4fcf3697090c9fa2fb20fa9d3f4a39f667", "committedDate": "2020-08-26T12:01:32Z", "message": "Execute the script only once per day"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1NDMwODA2", "url": "https://github.com/apache/ozone/pull/1344#pullrequestreview-475430806", "createdAt": "2020-08-26T12:20:21Z", "commit": {"oid": "f0934a4fcf3697090c9fa2fb20fa9d3f4a39f667"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2760, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}