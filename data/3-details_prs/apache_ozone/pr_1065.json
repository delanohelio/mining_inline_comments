{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzNDEwMTI2", "number": 1065, "title": "HDDS-3777. Reduce recon UI build time", "bodyText": "What changes were proposed in this pull request?\n\nReplace yarn as the default package manager to pnpm\nReplace -Dskip.yarn flag with -Dskip.npx\nUse caching in Github Actions workflow to cache node_modules and pnpm-store.\nStart running acceptance tests only after build succeeds\n\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-3777\nHow was this patch tested?\nThis patch was tested with several CI triggers. It reduces the recon build time significantly from ~16 minutes to less than 2 minutes.\nExample run - https://github.com/vivekratnavel/hadoop-ozone/runs/763625356?check_suite_focus=true", "createdAt": "2020-06-12T01:09:08Z", "url": "https://github.com/apache/ozone/pull/1065", "merged": true, "mergeCommit": {"oid": "bd88eec9fec06a8f8adcbe4d257c5ccaca144f4c"}, "closed": true, "closedAt": "2020-06-12T17:38:20Z", "author": {"login": "vivekratnavel"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqV1BGgH2gAyNDMzNDEwMTI2OmY5NDcxYWRkMDM2ZmMzMmQyNzhjMzQzNzJhMjA0ZTQyMDI4NDE2ZGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcqeSjTgFqTQyOTU0MjY2NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f9471add036fc32d278c34372a204e42028416da", "author": {"user": {"login": "vivekratnavel", "name": "Vivek Ratnavel Subramanian"}}, "url": "https://github.com/apache/ozone/commit/f9471add036fc32d278c34372a204e42028416da", "committedDate": "2020-06-11T22:16:49Z", "message": "HDDS-3777. Reduce recon UI build time"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d7c86ae724a8137fb5cbb7c25c41f21a55e7476", "author": {"user": {"login": "vivekratnavel", "name": "Vivek Ratnavel Subramanian"}}, "url": "https://github.com/apache/ozone/commit/3d7c86ae724a8137fb5cbb7c25c41f21a55e7476", "committedDate": "2020-06-11T22:37:38Z", "message": "Exclude pnpm-lock.yaml from rat checks."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2a4070c7fe9d9571729b24149fb7f7560894a38", "author": {"user": {"login": "vivekratnavel", "name": "Vivek Ratnavel Subramanian"}}, "url": "https://github.com/apache/ozone/commit/e2a4070c7fe9d9571729b24149fb7f7560894a38", "committedDate": "2020-06-11T23:07:45Z", "message": "Add node_modules caching"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eaf5bf09e92cf4e4824acdade78a837c3777b1e9", "author": {"user": {"login": "vivekratnavel", "name": "Vivek Ratnavel Subramanian"}}, "url": "https://github.com/apache/ozone/commit/eaf5bf09e92cf4e4824acdade78a837c3777b1e9", "committedDate": "2020-06-11T23:13:15Z", "message": "fix error in workflow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0755b227659052451e07df45a256bd16df1bf38", "author": {"user": {"login": "vivekratnavel", "name": "Vivek Ratnavel Subramanian"}}, "url": "https://github.com/apache/ozone/commit/c0755b227659052451e07df45a256bd16df1bf38", "committedDate": "2020-06-11T23:14:19Z", "message": "fix error in workflow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ad844ae0c8fb8a541e324e9e595d14d712fcde4", "author": {"user": {"login": "vivekratnavel", "name": "Vivek Ratnavel Subramanian"}}, "url": "https://github.com/apache/ozone/commit/8ad844ae0c8fb8a541e324e9e595d14d712fcde4", "committedDate": "2020-06-12T00:55:47Z", "message": "remove yarn.lock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f039f129ce436a1e54b1010a72524efd94855f81", "author": {"user": {"login": "vivekratnavel", "name": "Vivek Ratnavel Subramanian"}}, "url": "https://github.com/apache/ozone/commit/f039f129ce436a1e54b1010a72524efd94855f81", "committedDate": "2020-06-12T01:02:40Z", "message": "replace -Dskip.yarn with -Dskip.npx flag"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98cc0db902e766978bcdb53d1da919c70840b13a", "author": {"user": {"login": "vivekratnavel", "name": "Vivek Ratnavel Subramanian"}}, "url": "https://github.com/apache/ozone/commit/98cc0db902e766978bcdb53d1da919c70840b13a", "committedDate": "2020-06-12T01:11:56Z", "message": "update pr workflow action"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1dbdff835bd906315f176849eb21cab41e7c02fd", "author": {"user": {"login": "vivekratnavel", "name": "Vivek Ratnavel Subramanian"}}, "url": "https://github.com/apache/ozone/commit/1dbdff835bd906315f176849eb21cab41e7c02fd", "committedDate": "2020-06-12T01:19:17Z", "message": "update README for pnpm"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5NDk2MjI0", "url": "https://github.com/apache/ozone/pull/1065#pullrequestreview-429496224", "createdAt": "2020-06-12T06:40:18Z", "commit": {"oid": "1dbdff835bd906315f176849eb21cab41e7c02fd"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwNjo0MDoxOFrOGi4yMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwNjo0MDoxOFrOGi4yMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTIzNTEyMw==", "bodyText": "This should be updated in the root pom instead:\nhttps://github.com/apache/hadoop-ozone/blob/78255ddc7053bb470c7663993d5ce0aecd635f2d/pom.xml#L231", "url": "https://github.com/apache/ozone/pull/1065#discussion_r439235123", "createdAt": "2020-06-12T06:40:18Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/recon/pom.xml", "diffHunk": "@@ -86,37 +86,46 @@\n       <plugin>\n         <groupId>com.github.eirslett</groupId>\n         <artifactId>frontend-maven-plugin</artifactId>\n+        <version>1.10.0</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1dbdff835bd906315f176849eb21cab41e7c02fd"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2aa691d7b2fe087360e87a0bd082188b8e66bb0", "author": {"user": {"login": "vivekratnavel", "name": "Vivek Ratnavel Subramanian"}}, "url": "https://github.com/apache/ozone/commit/d2aa691d7b2fe087360e87a0bd082188b8e66bb0", "committedDate": "2020-06-12T07:39:42Z", "message": "fix review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5NTQyNjY0", "url": "https://github.com/apache/ozone/pull/1065#pullrequestreview-429542664", "createdAt": "2020-06-12T08:06:33Z", "commit": {"oid": "d2aa691d7b2fe087360e87a0bd082188b8e66bb0"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwODowNjozM1rOGi6-Jg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwODowNjozM1rOGi6-Jg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI3MDk1MA==", "bodyText": "Nit: version is inherited from parent pom's pluginManagement section, no need to explicitly specify here.  But it does no harm and can be removed later, it's more important to merge this speed improvement sooner than later.", "url": "https://github.com/apache/ozone/pull/1065#discussion_r439270950", "createdAt": "2020-06-12T08:06:33Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/recon/pom.xml", "diffHunk": "@@ -86,7 +86,7 @@\n       <plugin>\n         <groupId>com.github.eirslett</groupId>\n         <artifactId>frontend-maven-plugin</artifactId>\n-        <version>1.10.0</version>\n+        <version>${frontend-maven-plugin.version}</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d2aa691d7b2fe087360e87a0bd082188b8e66bb0"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3185, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}