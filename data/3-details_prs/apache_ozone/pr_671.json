{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3NjU0NTI1", "number": 671, "title": "HDDS-3086. Failure running integration test it-freon.", "bodyText": "What changes were proposed in this pull request?\nAdded configs for rpc and watch timeouts for ratis clent and server.\nAlso, added a method to wait for atleast one ratis pipeline to get into open state before client IO starts.\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-3086\nHow was this patch tested?\nRan he unit tests and verified.", "createdAt": "2020-03-13T08:33:46Z", "url": "https://github.com/apache/ozone/pull/671", "merged": true, "mergeCommit": {"oid": "2ea0b604cc2500884f19cff0d226f4e211780809"}, "closed": true, "closedAt": "2020-03-16T11:31:26Z", "author": {"login": "bshashikant"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNMDbPAH2gAyMzg3NjU0NTI1OjQwYmUzMzhkZDBhMTM2ZTkyNzZkMTI1ZTY0ZWI1ODdjZTNiMGM4NDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOJ3T_gH2gAyMzg3NjU0NTI1OjJmOGEzZjg3NDVlNWNjZWMxODk2OTAzZTA3ODBkYjJkODdmZWJlYmQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "40be338dd0a136e9276d125e64eb587ce3b0c844", "author": {"user": {"login": "bshashikant", "name": null}}, "url": "https://github.com/apache/ozone/commit/40be338dd0a136e9276d125e64eb587ce3b0c844", "committedDate": "2020-03-13T08:29:42Z", "message": "HDDS-3086. Failure running integration test it-freon."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0MTY0MzI1", "url": "https://github.com/apache/ozone/pull/671#pullrequestreview-374164325", "createdAt": "2020-03-13T09:44:20Z", "commit": {"oid": "40be338dd0a136e9276d125e64eb587ce3b0c844"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QwOTo0NDoyMFrOF19THg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QwOTo0NDoyMFrOF19THg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjEyMzE2Ng==", "bodyText": "Can we make these configs to be the default, somewhere around MiniOzoneCluster?  Eg. let Builder.build() add them if they are not explicitly set.  I hope that would let us avoid repeating them for all integration tests.", "url": "https://github.com/apache/ozone/pull/671#discussion_r392123166", "createdAt": "2020-03-13T09:44:20Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/integration-test/src/test/java/org/apache/hadoop/ozone/freon/TestDataValidate.java", "diffHunk": "@@ -33,9 +38,28 @@\n   private static MiniOzoneCluster cluster = null;\n \n   static void startCluster(OzoneConfiguration conf) throws Exception {\n+    conf.setTimeDuration(\n+            RatisHelper.HDDS_DATANODE_RATIS_SERVER_PREFIX_KEY + \".\" +\n+                    DatanodeRatisServerConfig.RATIS_SERVER_REQUEST_TIMEOUT_KEY,\n+            3, TimeUnit.SECONDS);\n+    conf.setTimeDuration(\n+            RatisHelper.HDDS_DATANODE_RATIS_SERVER_PREFIX_KEY + \".\" +\n+                    DatanodeRatisServerConfig.\n+                            RATIS_SERVER_WATCH_REQUEST_TIMEOUT_KEY,\n+            10, TimeUnit.SECONDS);\n+    conf.setTimeDuration(\n+            RatisHelper.HDDS_DATANODE_RATIS_CLIENT_PREFIX_KEY+ \".\" +\n+                    \"rpc.request.timeout\",\n+            3, TimeUnit.SECONDS);\n+    conf.setTimeDuration(\n+            RatisHelper.HDDS_DATANODE_RATIS_CLIENT_PREFIX_KEY+ \".\" +\n+                    \"watch.request.timeout\",\n+            10, TimeUnit.SECONDS);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "40be338dd0a136e9276d125e64eb587ce3b0c844"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0NzcyOTE2", "url": "https://github.com/apache/ozone/pull/671#pullrequestreview-374772916", "createdAt": "2020-03-15T05:36:16Z", "commit": {"oid": "40be338dd0a136e9276d125e64eb587ce3b0c844"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f8a3f8745e5ccec1896903e0780db2d87febebd", "author": {"user": {"login": "bshashikant", "name": null}}, "url": "https://github.com/apache/ozone/commit/2f8a3f8745e5ccec1896903e0780db2d87febebd", "committedDate": "2020-03-16T08:30:35Z", "message": "Addressed checkstyle issues."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3461, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}