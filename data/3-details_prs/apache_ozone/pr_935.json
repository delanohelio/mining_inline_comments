{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5MjkyMjkz", "number": 935, "title": "HDDS-3606. Add datanode port into the printTopology command output", "bodyText": "What changes were proposed in this pull request?\nNow, i start 3 datanode in a node, the 3 datanode use differents port, but i cannot distinguish which one is HEALTHY, which one is not. A port print is necessary.\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-3606\nHow was this patch tested?\n bin/ozone  admin printTopology\nState = HEALTHY\n 127.0.0.1(localhost):RATIS=52789,STANDALONE=52790    /default-rack\n 127.0.0.1(localhost):RATIS=52777,STANDALONE=52778    /default-rack\n 127.0.0.1(localhost):RATIS=52752,STANDALONE=52753    /default-rack", "createdAt": "2020-05-18T06:42:37Z", "url": "https://github.com/apache/ozone/pull/935", "merged": true, "mergeCommit": {"oid": "9023fe76b7e7b381d81f772e85d4d38fb6816b7a"}, "closed": true, "closedAt": "2020-05-19T06:20:40Z", "author": {"login": "maobaolong"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABciaEEagH2gAyNDE5MjkyMjkzOjMzMmQyZTY2MDUyYzYxNzJiZjUzNWRkMTAyNjUzOWZkZGZhMTE1YmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcirCDWAFqTQxNDA1ODQzMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "332d2e66052c6172bf535dd1026539fddfa115bc", "author": {"user": {"login": "maobaolong", "name": "maobaolong"}}, "url": "https://github.com/apache/ozone/commit/332d2e66052c6172bf535dd1026539fddfa115bc", "committedDate": "2020-05-18T06:41:29Z", "message": "HDDS-3606. Add datanode port into the printTopology command output"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f760588da1e7066d1ecc3d629aa6babbab7814e7", "author": {"user": {"login": "maobaolong", "name": "maobaolong"}}, "url": "https://github.com/apache/ozone/commit/f760588da1e7066d1ecc3d629aa6babbab7814e7", "committedDate": "2020-05-18T12:55:15Z", "message": "trigger new ci check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23227bbabae9c58e3430af2a8619e8627efcdfe2", "author": {"user": {"login": "maobaolong", "name": "maobaolong"}}, "url": "https://github.com/apache/ozone/commit/23227bbabae9c58e3430af2a8619e8627efcdfe2", "committedDate": "2020-05-18T12:57:43Z", "message": "Merge branch 'patch-3' of https://github.com/maobaolong/hadoop-ozone into patch-3"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNTc2Nzc0", "url": "https://github.com/apache/ozone/pull/935#pullrequestreview-413576774", "createdAt": "2020-05-18T13:09:05Z", "commit": {"oid": "23227bbabae9c58e3430af2a8619e8627efcdfe2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMzowOTowNVrOGW2YKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMzowOTowNVrOGW2YKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjYxMjc3Nw==", "bodyText": "need extra space between - and 1.", "url": "https://github.com/apache/ozone/pull/935#discussion_r426612777", "createdAt": "2020-05-18T13:09:05Z", "author": {"login": "ChenSammi"}, "path": "hadoop-hdds/tools/src/main/java/org/apache/hadoop/hdds/scm/cli/TopologySubcommand.java", "diffHunk": "@@ -116,15 +116,27 @@ private void printOrderedByLocation(List<HddsProtos.Node> nodes) {\n     });\n   }\n \n+  private String formatPortOutput(List<HddsProtos.Port> ports) {\n+    StringBuilder sb = new StringBuilder();\n+    for (int i = 0; i < ports.size(); i++) {\n+      HddsProtos.Port port = ports.get(i);\n+      sb.append(port.getName() + \"=\" + port.getValue());\n+      if (i < ports.size() -1) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23227bbabae9c58e3430af2a8619e8627efcdfe2"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "767436bc00c2c0e17c8d2ec4c1c92e4617164186", "author": {"user": {"login": "maobaolong", "name": "maobaolong"}}, "url": "https://github.com/apache/ozone/commit/767436bc00c2c0e17c8d2ec4c1c92e4617164186", "committedDate": "2020-05-19T02:07:14Z", "message": "HDDS-3606. Fix style issue."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0MDU4NDMx", "url": "https://github.com/apache/ozone/pull/935#pullrequestreview-414058431", "createdAt": "2020-05-19T02:27:40Z", "commit": {"oid": "767436bc00c2c0e17c8d2ec4c1c92e4617164186"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3267, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}