{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg4MzkxMzMw", "number": 680, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNVQxNzoxMToyNVrODoIPlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwOToyODo1NVrODoP6cA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzNDA0NjkyOnYy", "diffSide": "LEFT", "path": "pom.xml", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNVQxNzoxMToyNVrOF2gF-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQyMjowNjoxNlrOF3HUBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjY5MzI0MA==", "bodyText": "I don't know if we need to remove the native library in the tests. It's probably okay.\nOther than this one I am +1.", "url": "https://github.com/apache/ozone/pull/680#discussion_r392693240", "createdAt": "2020-03-15T17:11:25Z", "author": {"login": "jojochuang"}, "path": "pom.xml", "diffHunk": "@@ -1791,11 +1708,6 @@ xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xs\n           <!-- @argLine is filled by jacoco maven plugin. @{} means late evaluation -->\n           <argLine>${maven-surefire-plugin.argLine} @{argLine}</argLine>\n           <environmentVariables>\n-            <HADOOP_COMMON_HOME>${hadoop.common.build.dir}</HADOOP_COMMON_HOME>\n-            <!-- HADOOP_HOME required for tests on Windows to find winutils -->\n-            <HADOOP_HOME>${hadoop.common.build.dir}</HADOOP_HOME>\n-            <LD_LIBRARY_PATH>${env.LD_LIBRARY_PATH}:${project.build.directory}/native/target/usr/local/lib:${hadoop.common.build.dir}/native/target/usr/local/lib</LD_LIBRARY_PATH>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b898417455c6405b2c311f11c4d5cb5b2b0b362f"}, "originalPosition": 159}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjY5NDQ1NQ==", "bodyText": "Thanks for the review @jojochuang.  This seems to have been copied from hadoop-project/pom.xml.  I don't think Ozone has any native library.", "url": "https://github.com/apache/ozone/pull/680#discussion_r392694455", "createdAt": "2020-03-15T17:26:52Z", "author": {"login": "adoroszlai"}, "path": "pom.xml", "diffHunk": "@@ -1791,11 +1708,6 @@ xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xs\n           <!-- @argLine is filled by jacoco maven plugin. @{} means late evaluation -->\n           <argLine>${maven-surefire-plugin.argLine} @{argLine}</argLine>\n           <environmentVariables>\n-            <HADOOP_COMMON_HOME>${hadoop.common.build.dir}</HADOOP_COMMON_HOME>\n-            <!-- HADOOP_HOME required for tests on Windows to find winutils -->\n-            <HADOOP_HOME>${hadoop.common.build.dir}</HADOOP_HOME>\n-            <LD_LIBRARY_PATH>${env.LD_LIBRARY_PATH}:${project.build.directory}/native/target/usr/local/lib:${hadoop.common.build.dir}/native/target/usr/local/lib</LD_LIBRARY_PATH>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjY5MzI0MA=="}, "originalCommit": {"oid": "b898417455c6405b2c311f11c4d5cb5b2b0b362f"}, "originalPosition": 159}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjY5NTQ5Nw==", "bodyText": "yeah. I think the assumption here is the behavior is the same with the native Hadoop library or not, which makes sense to me.", "url": "https://github.com/apache/ozone/pull/680#discussion_r392695497", "createdAt": "2020-03-15T17:39:07Z", "author": {"login": "jojochuang"}, "path": "pom.xml", "diffHunk": "@@ -1791,11 +1708,6 @@ xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xs\n           <!-- @argLine is filled by jacoco maven plugin. @{} means late evaluation -->\n           <argLine>${maven-surefire-plugin.argLine} @{argLine}</argLine>\n           <environmentVariables>\n-            <HADOOP_COMMON_HOME>${hadoop.common.build.dir}</HADOOP_COMMON_HOME>\n-            <!-- HADOOP_HOME required for tests on Windows to find winutils -->\n-            <HADOOP_HOME>${hadoop.common.build.dir}</HADOOP_HOME>\n-            <LD_LIBRARY_PATH>${env.LD_LIBRARY_PATH}:${project.build.directory}/native/target/usr/local/lib:${hadoop.common.build.dir}/native/target/usr/local/lib</LD_LIBRARY_PATH>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjY5MzI0MA=="}, "originalCommit": {"oid": "b898417455c6405b2c311f11c4d5cb5b2b0b362f"}, "originalPosition": 159}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzMzNTgxMg==", "bodyText": "The only native library I remembered for ozone is via ratis-thirdparty jar. So I'm OK with removing it.", "url": "https://github.com/apache/ozone/pull/680#discussion_r393335812", "createdAt": "2020-03-16T22:06:16Z", "author": {"login": "xiaoyuyao"}, "path": "pom.xml", "diffHunk": "@@ -1791,11 +1708,6 @@ xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xs\n           <!-- @argLine is filled by jacoco maven plugin. @{} means late evaluation -->\n           <argLine>${maven-surefire-plugin.argLine} @{argLine}</argLine>\n           <environmentVariables>\n-            <HADOOP_COMMON_HOME>${hadoop.common.build.dir}</HADOOP_COMMON_HOME>\n-            <!-- HADOOP_HOME required for tests on Windows to find winutils -->\n-            <HADOOP_HOME>${hadoop.common.build.dir}</HADOOP_HOME>\n-            <LD_LIBRARY_PATH>${env.LD_LIBRARY_PATH}:${project.build.directory}/native/target/usr/local/lib:${hadoop.common.build.dir}/native/target/usr/local/lib</LD_LIBRARY_PATH>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjY5MzI0MA=="}, "originalCommit": {"oid": "b898417455c6405b2c311f11c4d5cb5b2b0b362f"}, "originalPosition": 159}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzNTMwMzUyOnYy", "diffSide": "RIGHT", "path": "hadoop-hdds/tools/pom.xml", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwOToyODo1NVrOF2rpkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QwOTo0NTo0NVrOF3UrOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg4MjU3Nw==", "bodyText": "I would fix it from the Ratis side: RATIS-827", "url": "https://github.com/apache/ozone/pull/680#discussion_r392882577", "createdAt": "2020-03-16T09:28:55Z", "author": {"login": "elek"}, "path": "hadoop-hdds/tools/pom.xml", "diffHunk": "@@ -54,6 +54,12 @@ https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n       <artifactId>ratis-tools</artifactId>\n       <groupId>org.apache.ratis</groupId>\n       <version>${ratis.version}</version>\n+      <exclusions>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b898417455c6405b2c311f11c4d5cb5b2b0b362f"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjk0NjQyMw==", "bodyText": "I had seen that issue.  The reason I included it here as a workaround is there were warnings related to it during shading.", "url": "https://github.com/apache/ozone/pull/680#discussion_r392946423", "createdAt": "2020-03-16T11:19:27Z", "author": {"login": "adoroszlai"}, "path": "hadoop-hdds/tools/pom.xml", "diffHunk": "@@ -54,6 +54,12 @@ https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n       <artifactId>ratis-tools</artifactId>\n       <groupId>org.apache.ratis</groupId>\n       <version>${ratis.version}</version>\n+      <exclusions>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg4MjU3Nw=="}, "originalCommit": {"oid": "b898417455c6405b2c311f11c4d5cb5b2b0b362f"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzMzNTE1Ng==", "bodyText": "Make sense to me. I've +1 on RATIS-827. We can backoff this change when updating the ratis-snapshot version.", "url": "https://github.com/apache/ozone/pull/680#discussion_r393335156", "createdAt": "2020-03-16T22:04:19Z", "author": {"login": "xiaoyuyao"}, "path": "hadoop-hdds/tools/pom.xml", "diffHunk": "@@ -54,6 +54,12 @@ https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n       <artifactId>ratis-tools</artifactId>\n       <groupId>org.apache.ratis</groupId>\n       <version>${ratis.version}</version>\n+      <exclusions>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg4MjU3Nw=="}, "originalCommit": {"oid": "b898417455c6405b2c311f11c4d5cb5b2b0b362f"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzMzODE2Mw==", "bodyText": "We can remove it later, but I don't think it's strictly necessary.  Ozone builds fine using locally built Ratis snapshot with RATIS-827 applied.", "url": "https://github.com/apache/ozone/pull/680#discussion_r393338163", "createdAt": "2020-03-16T22:12:34Z", "author": {"login": "adoroszlai"}, "path": "hadoop-hdds/tools/pom.xml", "diffHunk": "@@ -54,6 +54,12 @@ https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n       <artifactId>ratis-tools</artifactId>\n       <groupId>org.apache.ratis</groupId>\n       <version>${ratis.version}</version>\n+      <exclusions>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg4MjU3Nw=="}, "originalCommit": {"oid": "b898417455c6405b2c311f11c4d5cb5b2b0b362f"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU1NDc0Ng==", "bodyText": "Sure, I agree. We can remove the exclusion in the commit where we start to use a Ratis version which includes RATIS-827. It was just a quick reminder that we can remove it after RATIS-827.", "url": "https://github.com/apache/ozone/pull/680#discussion_r393554746", "createdAt": "2020-03-17T09:45:45Z", "author": {"login": "elek"}, "path": "hadoop-hdds/tools/pom.xml", "diffHunk": "@@ -54,6 +54,12 @@ https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n       <artifactId>ratis-tools</artifactId>\n       <groupId>org.apache.ratis</groupId>\n       <version>${ratis.version}</version>\n+      <exclusions>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg4MjU3Nw=="}, "originalCommit": {"oid": "b898417455c6405b2c311f11c4d5cb5b2b0b362f"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4832, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}