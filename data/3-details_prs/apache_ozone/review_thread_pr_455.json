{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY0MDk4Mjkx", "number": 455, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxMzo0Mjo0NVrODY0fuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxNjo1NzoyOVrODY4R4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3MzUyNTA0OnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/dist/src/main/compose/ozonesecure/docker-compose.yaml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxMzo0Mjo0NVrOFe5TJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxMzo0Mjo0NVrOFe5TJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzk0MDM4OQ==", "bodyText": "Seems like acceptance test failure is caused by missing HTTP keytab on datanode.\ndatanode_1  | 2020-01-17 12:30:34,899 [main] ERROR ozone.HddsDatanodeService: HttpServer failed to start.\n...\ndatanode_1  | Caused by: javax.servlet.ServletException: javax.servlet.ServletException: Keytab does not exist: /etc/security/keytabs/HTTP.keytab\n\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  KERBEROS_KEYTABS: dn\n          \n          \n            \n                  KERBEROS_KEYTABS: dn HTTP", "url": "https://github.com/apache/ozone/pull/455#discussion_r367940389", "createdAt": "2020-01-17T13:42:45Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/dist/src/main/compose/ozonesecure/docker-compose.yaml", "diffHunk": "@@ -42,6 +41,8 @@ services:\n     command: [\"/opt/hadoop/bin/ozone\",\"datanode\"]\n     env_file:\n       - docker-config\n+    environment:\n+      KERBEROS_KEYTABS: dn", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b002aeeab9a5219158bbbc8b8bd132aa267d2cd"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NDE0NDk2OnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/dist/src/main/compose/ozonesecure/docker-config", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxNjo1NzoyOVrOFe_Q_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxMzozMjo0MlrOFg-MYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODAzODE0Mg==", "bodyText": "should we have recon in the no_proxy list?", "url": "https://github.com/apache/ozone/pull/455#discussion_r368038142", "createdAt": "2020-01-17T16:57:29Z", "author": {"login": "xiaoyuyao"}, "path": "hadoop-ozone/dist/src/main/compose/ozonesecure/docker-config", "diffHunk": "@@ -80,12 +80,11 @@ HDFS-SITE.XML_rpc.metrics.percentiles.intervals=60,300\n OZONE_DATANODE_SECURE_USER=root\n SECURITY_ENABLED=true\n KEYTAB_DIR=/etc/security/keytabs\n-KERBEROS_KEYTABS=dn om scm HTTP testuser testuser2 s3g\n KERBEROS_KEYSTORES=hadoop\n KERBEROS_SERVER=kdc\n JAVA_HOME=/usr/lib/jvm/jre\n JSVC_HOME=/usr/bin\n SLEEP_SECONDS=5\n KERBEROS_ENABLED=true\n \n-no_proxy=om,scm,s3g,kdc,localhost,127.0.0.1\n\\ No newline at end of file\n+no_proxy=om,scm,s3g,kdc,localhost,127.0.0.1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b002aeeab9a5219158bbbc8b8bd132aa267d2cd"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIyNDY1NA==", "bodyText": "AFAIK it was added to support the the curl/wget executed by the smoketests. As we have no recon specific acceptance tests (yet, hopefully), it's not immediately required...", "url": "https://github.com/apache/ozone/pull/455#discussion_r368224654", "createdAt": "2020-01-18T12:34:26Z", "author": {"login": "elek"}, "path": "hadoop-ozone/dist/src/main/compose/ozonesecure/docker-config", "diffHunk": "@@ -80,12 +80,11 @@ HDFS-SITE.XML_rpc.metrics.percentiles.intervals=60,300\n OZONE_DATANODE_SECURE_USER=root\n SECURITY_ENABLED=true\n KEYTAB_DIR=/etc/security/keytabs\n-KERBEROS_KEYTABS=dn om scm HTTP testuser testuser2 s3g\n KERBEROS_KEYSTORES=hadoop\n KERBEROS_SERVER=kdc\n JAVA_HOME=/usr/lib/jvm/jre\n JSVC_HOME=/usr/bin\n SLEEP_SECONDS=5\n KERBEROS_ENABLED=true\n \n-no_proxy=om,scm,s3g,kdc,localhost,127.0.0.1\n\\ No newline at end of file\n+no_proxy=om,scm,s3g,kdc,localhost,127.0.0.1", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODAzODE0Mg=="}, "originalCommit": {"oid": "5b002aeeab9a5219158bbbc8b8bd132aa267d2cd"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTE0OTgzMQ==", "bodyText": "There is one recon acceptance tests just added recently to catch a regression in HDDS-2897.\nSee #453 for details.", "url": "https://github.com/apache/ozone/pull/455#discussion_r369149831", "createdAt": "2020-01-21T17:49:22Z", "author": {"login": "xiaoyuyao"}, "path": "hadoop-ozone/dist/src/main/compose/ozonesecure/docker-config", "diffHunk": "@@ -80,12 +80,11 @@ HDFS-SITE.XML_rpc.metrics.percentiles.intervals=60,300\n OZONE_DATANODE_SECURE_USER=root\n SECURITY_ENABLED=true\n KEYTAB_DIR=/etc/security/keytabs\n-KERBEROS_KEYTABS=dn om scm HTTP testuser testuser2 s3g\n KERBEROS_KEYSTORES=hadoop\n KERBEROS_SERVER=kdc\n JAVA_HOME=/usr/lib/jvm/jre\n JSVC_HOME=/usr/bin\n SLEEP_SECONDS=5\n KERBEROS_ENABLED=true\n \n-no_proxy=om,scm,s3g,kdc,localhost,127.0.0.1\n\\ No newline at end of file\n+no_proxy=om,scm,s3g,kdc,localhost,127.0.0.1", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODAzODE0Mg=="}, "originalCommit": {"oid": "5b002aeeab9a5219158bbbc8b8bd132aa267d2cd"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDExNzcyOA==", "bodyText": "This was added in another task, only newline at EOF is changed.  So I think it should be addressed in a new Jira.", "url": "https://github.com/apache/ozone/pull/455#discussion_r370117728", "createdAt": "2020-01-23T13:32:42Z", "author": {"login": "adoroszlai"}, "path": "hadoop-ozone/dist/src/main/compose/ozonesecure/docker-config", "diffHunk": "@@ -80,12 +80,11 @@ HDFS-SITE.XML_rpc.metrics.percentiles.intervals=60,300\n OZONE_DATANODE_SECURE_USER=root\n SECURITY_ENABLED=true\n KEYTAB_DIR=/etc/security/keytabs\n-KERBEROS_KEYTABS=dn om scm HTTP testuser testuser2 s3g\n KERBEROS_KEYSTORES=hadoop\n KERBEROS_SERVER=kdc\n JAVA_HOME=/usr/lib/jvm/jre\n JSVC_HOME=/usr/bin\n SLEEP_SECONDS=5\n KERBEROS_ENABLED=true\n \n-no_proxy=om,scm,s3g,kdc,localhost,127.0.0.1\n\\ No newline at end of file\n+no_proxy=om,scm,s3g,kdc,localhost,127.0.0.1", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODAzODE0Mg=="}, "originalCommit": {"oid": "5b002aeeab9a5219158bbbc8b8bd132aa267d2cd"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4966, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}