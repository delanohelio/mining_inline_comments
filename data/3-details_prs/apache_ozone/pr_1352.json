{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDczNTUzOTMz", "number": 1352, "title": "HDDS-4147. Add OFS to FileSystem META-INF", "bodyText": "What changes were proposed in this pull request?\nWith this change, fs.ofs.impl won't have to be explicitly set in core-site.xml when using OFS on a client.\nThis change is derived from #1088\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-4147\nHow was this patch tested?\nExisting OFS tests shall pass even with conf.set(\"fs.ofs.impl\", ...) removed.", "createdAt": "2020-08-25T23:15:33Z", "url": "https://github.com/apache/ozone/pull/1352", "merged": true, "mergeCommit": {"oid": "44acf78aec6c3a4e1c5fea3a43971144c6da9a4c"}, "closed": true, "closedAt": "2020-08-28T16:15:16Z", "author": {"login": "smengcl"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCfk19gH2gAyNDczNTUzOTMzOjI1NzJlMDFjODMxYTE1OTFkOTYzZGM5NmY0ZDFiNzRlNDE2MzQzYTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdC98XtAFqTQ3NjU5MTg1MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2572e01c831a1591d963dc96f4d1b74e416343a4", "author": {"user": {"login": "smengcl", "name": "Siyao Meng"}}, "url": "https://github.com/apache/ozone/commit/2572e01c831a1591d963dc96f4d1b74e416343a4", "committedDate": "2020-08-25T23:12:23Z", "message": "[Experimental] Remove all explicit fs.o3fs.impl and fs.ofs.impl config.\nShould solely rely on META-INF to get the correct HCFS FileSystem class.\nAlso sets all defaultFS in docker compose to ofs://.\n\n(cherry picked from commit 389a45fd600fb620c71daf900be61e058ffe7288)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4593e8ae425db0c59eaaed04ebb64ef9f8648ce5", "author": {"user": {"login": "smengcl", "name": "Siyao Meng"}}, "url": "https://github.com/apache/ozone/commit/4593e8ae425db0c59eaaed04ebb64ef9f8648ce5", "committedDate": "2020-08-25T23:12:43Z", "message": "Set fs.defaultFS to OFS in docker-config.\n\n(cherry picked from commit ba080fc9e6ef4391864417ac1daf0d2953712aae)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9670c6e6a34f96c8ce6599800b06ccb145f9af0b", "author": {"user": {"login": "adoroszlai", "name": "Doroszlai, Attila"}}, "url": "https://github.com/apache/ozone/commit/9670c6e6a34f96c8ce6599800b06ccb145f9af0b", "committedDate": "2020-08-26T08:00:59Z", "message": "trigger new CI check"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1MzkzNzY2", "url": "https://github.com/apache/ozone/pull/1352#pullrequestreview-475393766", "createdAt": "2020-08-26T11:24:21Z", "commit": {"oid": "9670c6e6a34f96c8ce6599800b06ccb145f9af0b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxMToyNDoyMlrOHHHnyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxMToyNDoyMlrOHHHnyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzIyNjk1Mw==", "bodyText": "Why is this line required to use META-INF based discovery?", "url": "https://github.com/apache/ozone/pull/1352#discussion_r477226953", "createdAt": "2020-08-26T11:24:22Z", "author": {"login": "elek"}, "path": "hadoop-ozone/dist/src/main/compose/ozone-csi/docker-config", "diffHunk": "@@ -14,6 +14,8 @@\n # See the License for the specific language governing permissions and\n # limitations under the License.\n \n+CORE-SITE.XML_fs.defaultFS=ofs://om", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9670c6e6a34f96c8ce6599800b06ccb145f9af0b"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1Mzk0NzI0", "url": "https://github.com/apache/ozone/pull/1352#pullrequestreview-475394724", "createdAt": "2020-08-26T11:25:51Z", "commit": {"oid": "9670c6e6a34f96c8ce6599800b06ccb145f9af0b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxMToyNTo1MVrOHHHq1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxMToyNTo1MVrOHHHq1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzIyNzczNQ==", "bodyText": "Why do we need this line to use META-INF services based discovery?", "url": "https://github.com/apache/ozone/pull/1352#discussion_r477227735", "createdAt": "2020-08-26T11:25:51Z", "author": {"login": "elek"}, "path": "hadoop-ozone/dist/src/main/compose/ozone-om-ha/docker-config", "diffHunk": "@@ -14,8 +14,8 @@\n # See the License for the specific language governing permissions and\n # limitations under the License.\n \n-CORE-SITE.XML_fs.o3fs.impl=org.apache.hadoop.fs.ozone.OzoneFileSystem\n-CORE-SITE.XML_fs.defaultFS=o3fs://bucket1.volume1.omservice\n+CORE-SITE.XML_fs.defaultFS=ofs://omservice", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9670c6e6a34f96c8ce6599800b06ccb145f9af0b"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06eda6195df0242a560cf94bf2ac6fc803952949", "author": {"user": {"login": "smengcl", "name": "Siyao Meng"}}, "url": "https://github.com/apache/ozone/commit/06eda6195df0242a560cf94bf2ac6fc803952949", "committedDate": "2020-08-26T19:02:48Z", "message": "Revert \"Set fs.defaultFS to OFS in docker-config.\"\n\nThis reverts commit 4593e8ae425db0c59eaaed04ebb64ef9f8648ce5.\n\nChange-Id: I089c067cfdc450502701557ff174d87861fd8532"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e5ed8004e4c84e4b21fb9a8ff636e8802674ffe", "author": {"user": {"login": "smengcl", "name": "Siyao Meng"}}, "url": "https://github.com/apache/ozone/commit/0e5ed8004e4c84e4b21fb9a8ff636e8802674ffe", "committedDate": "2020-08-26T19:04:44Z", "message": "Revert docker-config fs.defaultFS changes.\n\nChange-Id: I96fde1f02397764866d89d23fd81c47237abf636"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2086f9bc8e3a95cf90afb03fdf76ad923e633ab", "author": {"user": {"login": "smengcl", "name": "Siyao Meng"}}, "url": "https://github.com/apache/ozone/commit/e2086f9bc8e3a95cf90afb03fdf76ad923e633ab", "committedDate": "2020-08-26T20:32:42Z", "message": "Recheck\n\nChange-Id: I8f3608f5d182a557a2d0eb3eff27e83abddcec9c"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2NTkxODUw", "url": "https://github.com/apache/ozone/pull/1352#pullrequestreview-476591850", "createdAt": "2020-08-27T10:35:14Z", "commit": {"oid": "e2086f9bc8e3a95cf90afb03fdf76ad923e633ab"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2771, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}