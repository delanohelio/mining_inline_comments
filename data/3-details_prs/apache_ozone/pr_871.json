{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA4ODQyNDg0", "number": 871, "title": "HDDS-3487. Ozone start fails with NullPointerException in TLS enabled cluster", "bodyText": "What changes were proposed in this pull request?\nFix the NPE in ozone components startup.\nSCM start failed with exception\njava.lang.NullPointerException\n  at org.apache.hadoop.hdds.conf.ConfigurationSource.getPassword(ConfigurationSource.java:112)\n  at org.apache.hadoop.hdds.server.http.BaseHttpServer.getPassword(BaseHttpServer.java:348)\n\nProblem\nThe LegacyHadoopConfiguration class needs to use the underlying getPassword API which reads the password from the CredentialManager, and then falls back to the config key. Instead it used the default implementation that just looked for the config key's corresponding value.\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-3487\nHow was this patch tested?\nManually tested.", "createdAt": "2020-04-25T03:48:23Z", "url": "https://github.com/apache/ozone/pull/871", "merged": true, "mergeCommit": {"oid": "2791d71b4cd7674ed17704cde1b296f11c478cb6"}, "closed": true, "closedAt": "2020-04-27T21:39:57Z", "author": {"login": "avijayanhwx"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABca9vgsgH2gAyNDA4ODQyNDg0OmI4NDE4MmFlYTJhN2NiYjBkYTQ1ZjQ1ZDFiYmJlMzI5NTBlNDM1NWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcb1DTkgFqTQwMTI4OTA2NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b84182aea2a7cbb0da45f45d1bbbe32950e4355a", "author": {"user": {"login": "avijayanhwx", "name": null}}, "url": "https://github.com/apache/ozone/commit/b84182aea2a7cbb0da45f45d1bbbe32950e4355a", "committedDate": "2020-04-25T03:44:13Z", "message": "HDDS-3487. Ozone start fails with NullPointerException in TLS enabled cluster."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMzgwNDIy", "url": "https://github.com/apache/ozone/pull/871#pullrequestreview-400380422", "createdAt": "2020-04-25T10:26:48Z", "commit": {"oid": "b84182aea2a7cbb0da45f45d1bbbe32950e4355a"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwMzgyNzQx", "url": "https://github.com/apache/ozone/pull/871#pullrequestreview-400382741", "createdAt": "2020-04-25T10:57:26Z", "commit": {"oid": "b84182aea2a7cbb0da45f45d1bbbe32950e4355a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwNDA3MzAw", "url": "https://github.com/apache/ozone/pull/871#pullrequestreview-400407300", "createdAt": "2020-04-25T16:09:25Z", "commit": {"oid": "b84182aea2a7cbb0da45f45d1bbbe32950e4355a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNVQxNjowOToyNVrOGL3M3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNVQxNjowOToyNVrOGL3M3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTA5MTkzNA==", "bodyText": "Should we also remove the deault method on ConfigurationSource for getPassword, and have the get() method in OzoneConfiguration and the new method in LegacyHadoopConfig ?", "url": "https://github.com/apache/ozone/pull/871#discussion_r415091934", "createdAt": "2020-04-25T16:09:25Z", "author": {"login": "mukul1987"}, "path": "hadoop-hdds/common/src/main/java/org/apache/hadoop/hdds/utils/LegacyHadoopConfigurationSource.java", "diffHunk": "@@ -39,6 +40,11 @@ public String get(String key) {\n     return configuration.getRaw(key);\n   }\n \n+  @Override\n+  public char[] getPassword(String key) throws IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b84182aea2a7cbb0da45f45d1bbbe32950e4355a"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12ba43227b8c2a788b7f83a1c9573f75eaa5fb1a", "author": {"user": {"login": "avijayanhwx", "name": null}}, "url": "https://github.com/apache/ozone/commit/12ba43227b8c2a788b7f83a1c9573f75eaa5fb1a", "committedDate": "2020-04-27T18:45:48Z", "message": "HDDS-3487. Ozone start fails with NullPointerException in TLS enabled cluster."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9681406a4cfa1153930cf20c69adc4080f0e41f", "author": {"user": {"login": "avijayanhwx", "name": null}}, "url": "https://github.com/apache/ozone/commit/b9681406a4cfa1153930cf20c69adc4080f0e41f", "committedDate": "2020-04-27T18:56:53Z", "message": "HDDS-3487. Change exception to UnsupportedOperationException."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1d5a96e6af5a0fb806c0c6fa1f3b36c94d359f4", "author": {"user": {"login": "avijayanhwx", "name": null}}, "url": "https://github.com/apache/ozone/commit/d1d5a96e6af5a0fb806c0c6fa1f3b36c94d359f4", "committedDate": "2020-04-27T20:05:31Z", "message": "HDDS-3487. Remove getPassword impl from OzoneConfiguration."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxMjg5MDY0", "url": "https://github.com/apache/ozone/pull/871#pullrequestreview-401289064", "createdAt": "2020-04-27T20:10:37Z", "commit": {"oid": "d1d5a96e6af5a0fb806c0c6fa1f3b36c94d359f4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3192, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}