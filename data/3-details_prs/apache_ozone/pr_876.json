{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA5OTUzOTgw", "number": 876, "title": "HDDS-3389. Add response to SetVolumePropertyResponse proto", "bodyText": "What changes were proposed in this pull request?\n#806 (comment)\n\nAdd optional bool response = 1; in the message.\nHandle the response on the client. e.g. in setOwner, if the response is false, we can print message: The specified user is already the owner of the volume.\n\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-3389\nHow was this patch tested?\nbash-4.2$ ozone sh volume create vol1\nbash-4.2$ vi /etc/hadoop/ozone-shell-log4j.properties\n# Append: log4j.logger.org.apache.hadoop.ozone.shell.Handler=DEBUG\nbash-4.2$ ozone sh volume update vol1 --user=user1\n{\n  \"metadata\" : { },\n  \"name\" : \"vol1\",\n  \"admin\" : \"hadoop\",\n  \"owner\" : \"user1\",\n  \"creationTime\" : \"2020-05-05T12:05:10.885Z\",\n  \"acls\" : [ {\n    \"type\" : \"USER\",\n    \"name\" : \"hadoop\",\n    \"aclScope\" : \"ACCESS\",\n    \"aclList\" : [ \"ALL\" ]\n  }, {\n    \"type\" : \"GROUP\",\n    \"name\" : \"users\",\n    \"aclScope\" : \"ACCESS\",\n    \"aclList\" : [ \"ALL\" ]\n  } ],\n  \"quota\" : 1152921504606846976\n}\nbash-4.2$ ozone sh volume update vol1 --user=user1\nVolume 'vol1' owner is already 'user1'. Unchanged.\n{\n  \"metadata\" : { },\n  \"name\" : \"vol1\",\n  \"admin\" : \"hadoop\",\n  \"owner\" : \"user1\",\n  \"creationTime\" : \"2020-05-05T12:05:10.885Z\",\n  \"acls\" : [ {\n    \"type\" : \"USER\",\n    \"name\" : \"hadoop\",\n    \"aclScope\" : \"ACCESS\",\n    \"aclList\" : [ \"ALL\" ]\n  }, {\n    \"type\" : \"GROUP\",\n    \"name\" : \"users\",\n    \"aclScope\" : \"ACCESS\",\n    \"aclList\" : [ \"ALL\" ]\n  } ],\n  \"quota\" : 1152921504606846976\n}", "createdAt": "2020-04-28T08:09:27Z", "url": "https://github.com/apache/ozone/pull/876", "merged": true, "mergeCommit": {"oid": "6ee5f4b7c3f13b5a0c3fae2e83b405bf9389a55d"}, "closed": true, "closedAt": "2020-05-14T17:14:46Z", "author": {"login": "smengcl"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcb_T2IAH2gAyNDA5OTUzOTgwOjMzZDFkYTJhNjQ2ODMwZmFmYWViNDkwMjJmMDFjZTk2ZDc1ZTg1Zjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcfUJdVAFqTQwODM0NTk0Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "33d1da2a646830fafaeb49022f01ce96d75e85f9", "author": {"user": {"login": "smengcl", "name": "Siyao Meng"}}, "url": "https://github.com/apache/ozone/commit/33d1da2a646830fafaeb49022f01ce96d75e85f9", "committedDate": "2020-04-28T08:07:44Z", "message": "Add bool response to SetVolumePropertyResponse proto message."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4613bd0724ee0be97651aaa7364f3921436b9183", "author": {"user": {"login": "smengcl", "name": "Siyao Meng"}}, "url": "https://github.com/apache/ozone/commit/4613bd0724ee0be97651aaa7364f3921436b9183", "committedDate": "2020-04-30T20:08:59Z", "message": "setResponse in setSetVolumePropertyResponse."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67ccaf5d4f48e4a3514f1a10474637a10607d87b", "author": {"user": {"login": "smengcl", "name": "Siyao Meng"}}, "url": "https://github.com/apache/ozone/commit/67ccaf5d4f48e4a3514f1a10474637a10607d87b", "committedDate": "2020-04-30T20:30:54Z", "message": "Fix checkstyle."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43a8f44c2d9e1130d8341143551a2ad38a0f5e87", "author": {"user": {"login": "smengcl", "name": "Siyao Meng"}}, "url": "https://github.com/apache/ozone/commit/43a8f44c2d9e1130d8341143551a2ad38a0f5e87", "committedDate": "2020-05-01T20:59:23Z", "message": "Return result to client call."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36a995815c1e560fc096759b8828828b82d30333", "author": {"user": {"login": "smengcl", "name": "Siyao Meng"}}, "url": "https://github.com/apache/ozone/commit/36a995815c1e560fc096759b8828828b82d30333", "committedDate": "2020-05-05T12:10:21Z", "message": "Print client debug output."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cad75273d637d414ddcc6cafad2113ce40b2b1f3", "author": {"user": {"login": "smengcl", "name": "Siyao Meng"}}, "url": "https://github.com/apache/ozone/commit/cad75273d637d414ddcc6cafad2113ce40b2b1f3", "committedDate": "2020-05-05T12:10:34Z", "message": "Fix checkstyle."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3edd4de4fa5a29b3e78b2d5a98b2bd47e9540b5", "author": {"user": {"login": "smengcl", "name": "Siyao Meng"}}, "url": "https://github.com/apache/ozone/commit/f3edd4de4fa5a29b3e78b2d5a98b2bd47e9540b5", "committedDate": "2020-05-05T14:22:54Z", "message": "Fix findbugs."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11f2cdff71c32e3d8b937ca6c320b7242beb7d16", "author": {"user": {"login": "smengcl", "name": "Siyao Meng"}}, "url": "https://github.com/apache/ozone/commit/11f2cdff71c32e3d8b937ca6c320b7242beb7d16", "committedDate": "2020-05-06T16:21:57Z", "message": "Retest 1"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4MzQ1MTY0", "url": "https://github.com/apache/ozone/pull/876#pullrequestreview-408345164", "createdAt": "2020-05-08T16:04:56Z", "commit": {"oid": "11f2cdff71c32e3d8b937ca6c320b7242beb7d16"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQxNjowNDo1N1rOGSqx_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOFQxNjowNDo1N1rOGSqx_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjIyODQ3OQ==", "bodyText": "Just curious if this ever return false?", "url": "https://github.com/apache/ozone/pull/876#discussion_r422228479", "createdAt": "2020-05-08T16:04:57Z", "author": {"login": "xiaoyuyao"}, "path": "hadoop-ozone/ozone-manager/src/main/java/org/apache/hadoop/ozone/om/OzoneManager.java", "diffHunk": "@@ -1690,14 +1690,10 @@ public boolean getAclsEnabled() {\n   }\n \n   /**\n-   * Changes the owner of a volume.\n-   *\n-   * @param volume - Name of the volume.\n-   * @param owner - Name of the owner.\n-   * @throws IOException\n+   * {@inheritDoc}\n    */\n   @Override\n-  public void setOwner(String volume, String owner) throws IOException {\n+  public boolean setOwner(String volume, String owner) throws IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "11f2cdff71c32e3d8b937ca6c320b7242beb7d16"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4MzQ1OTQz", "url": "https://github.com/apache/ozone/pull/876#pullrequestreview-408345943", "createdAt": "2020-05-08T16:06:10Z", "commit": {"oid": "11f2cdff71c32e3d8b937ca6c320b7242beb7d16"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3202, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}