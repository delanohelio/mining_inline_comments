{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMyNzI3MjU0", "number": 1659, "title": "HDDS-4329. Expose Ratis retry config cache in OM.", "bodyText": "What changes were proposed in this pull request?\nExpose Ratis retry cache. Followed new config approach and also used same config name as RatisServer config.\nAnd also with this Jira if any config is prefixed with \"ozone.om.ha\" and after that users try to use same the RatisServer config it will be used by OM RaftServer. (This allows if any configs need to be tuned and in OM we don't have a config, this capability can help in such scenarios)\nUsed 5 minutes as default value. As with default leader election time out and with retry 15 count, this value should be more than enough to catch retry requests and return from the cache.\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-4329\nHow was this patch tested?\nAdded a test", "createdAt": "2020-12-04T19:03:58Z", "url": "https://github.com/apache/ozone/pull/1659", "merged": true, "mergeCommit": {"oid": "46690430d7c093b9859592057fbaab569ea570cc"}, "closed": true, "closedAt": "2020-12-08T18:23:48Z", "author": {"login": "bharatviswa504"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdj054OAFqTU0NjExMTgyNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkOWrYgFqTU0NzUwNjYyMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2MTExODI3", "url": "https://github.com/apache/ozone/pull/1659#pullrequestreview-546111827", "createdAt": "2020-12-07T12:42:52Z", "commit": {"oid": "d0e4d26d695cd026693c3012ca89afe41fce79ca"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxMjo0Mjo1MlrOIAk-BQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxMjo0Mjo1MlrOIAk-BQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzQ3NjYxMw==", "bodyText": "Can we use a smaller cache duration?", "url": "https://github.com/apache/ozone/pull/1659#discussion_r537476613", "createdAt": "2020-12-07T12:42:52Z", "author": {"login": "lokeshj1703"}, "path": "hadoop-ozone/integration-test/src/test/java/org/apache/hadoop/ozone/om/TestOzoneManagerHAMetadataOnly.java", "diffHunk": "@@ -422,6 +422,24 @@ public void testOMRetryCache() throws Exception {\n     Assert.assertFalse(logCapturer.getOutput().contains(\"created volume:\"\n         + volumeName));\n \n+    //Sleep for little above seconds to get cache clear.\n+    Thread.sleep(65000);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d0e4d26d695cd026693c3012ca89afe41fce79ca"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2MTE0MjQ0", "url": "https://github.com/apache/ozone/pull/1659#pullrequestreview-546114244", "createdAt": "2020-12-07T12:46:08Z", "commit": {"oid": "d0e4d26d695cd026693c3012ca89afe41fce79ca"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2MTk1ODk4", "url": "https://github.com/apache/ozone/pull/1659#pullrequestreview-546195898", "createdAt": "2020-12-07T14:23:34Z", "commit": {"oid": "d0e4d26d695cd026693c3012ca89afe41fce79ca"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44b652713333189ee02963c6ca5f910a745f303a", "author": {"user": {"login": "bharatviswa504", "name": "Bharat Viswanadham"}}, "url": "https://github.com/apache/ozone/commit/44b652713333189ee02963c6ca5f910a745f303a", "committedDate": "2020-12-07T18:02:45Z", "message": "HDDS-4329. Expose Ratis retry config cache in OM."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9cdecbb649d48b1e66e6260cbd2b7d874786fe22", "author": {"user": {"login": "bharatviswa504", "name": "Bharat Viswanadham"}}, "url": "https://github.com/apache/ozone/commit/9cdecbb649d48b1e66e6260cbd2b7d874786fe22", "committedDate": "2020-12-07T18:02:47Z", "message": "fix cs and test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "afd915f6eaded431a4c41adef3a9a224a09180ca", "author": {"user": {"login": "bharatviswa504", "name": "Bharat Viswanadham"}}, "url": "https://github.com/apache/ozone/commit/afd915f6eaded431a4c41adef3a9a224a09180ca", "committedDate": "2020-12-07T18:02:48Z", "message": "increase cache duration"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d0e4d26d695cd026693c3012ca89afe41fce79ca", "author": {"user": {"login": "bharatviswa504", "name": "Bharat Viswanadham"}}, "url": "https://github.com/apache/ozone/commit/d0e4d26d695cd026693c3012ca89afe41fce79ca", "committedDate": "2020-12-04T23:40:36Z", "message": "increase cache duration"}, "afterCommit": {"oid": "fa9ffbc9e44b24ca7291dbd83a4995b33ad44da5", "author": {"user": {"login": "bharatviswa504", "name": "Bharat Viswanadham"}}, "url": "https://github.com/apache/ozone/commit/fa9ffbc9e44b24ca7291dbd83a4995b33ad44da5", "committedDate": "2020-12-08T00:28:37Z", "message": "reduce time and 2nd time check for correct log message"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e43758f43816c45eec353ef28c3285b30f0637d6", "author": {"user": {"login": "bharatviswa504", "name": "Bharat Viswanadham"}}, "url": "https://github.com/apache/ozone/commit/e43758f43816c45eec353ef28c3285b30f0637d6", "committedDate": "2020-12-08T00:31:42Z", "message": "remove debug code"}, "afterCommit": {"oid": "0206a5412910b2e50708d0b2601fe04842af5e58", "author": {"user": {"login": "bharatviswa504", "name": "Bharat Viswanadham"}}, "url": "https://github.com/apache/ozone/commit/0206a5412910b2e50708d0b2601fe04842af5e58", "committedDate": "2020-12-08T00:32:53Z", "message": "reduce time and 2nd time check for correct log message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6410fb86299c59e3d634e2cadc4340f9e768aa52", "author": {"user": {"login": "bharatviswa504", "name": "Bharat Viswanadham"}}, "url": "https://github.com/apache/ozone/commit/6410fb86299c59e3d634e2cadc4340f9e768aa52", "committedDate": "2020-12-08T00:33:47Z", "message": "reduce time and 2nd time check for correct log message"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0206a5412910b2e50708d0b2601fe04842af5e58", "author": {"user": {"login": "bharatviswa504", "name": "Bharat Viswanadham"}}, "url": "https://github.com/apache/ozone/commit/0206a5412910b2e50708d0b2601fe04842af5e58", "committedDate": "2020-12-08T00:32:53Z", "message": "reduce time and 2nd time check for correct log message"}, "afterCommit": {"oid": "6410fb86299c59e3d634e2cadc4340f9e768aa52", "author": {"user": {"login": "bharatviswa504", "name": "Bharat Viswanadham"}}, "url": "https://github.com/apache/ozone/commit/6410fb86299c59e3d634e2cadc4340f9e768aa52", "committedDate": "2020-12-08T00:33:47Z", "message": "reduce time and 2nd time check for correct log message"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3NTA2NjIy", "url": "https://github.com/apache/ozone/pull/1659#pullrequestreview-547506622", "createdAt": "2020-12-08T18:21:57Z", "commit": {"oid": "6410fb86299c59e3d634e2cadc4340f9e768aa52"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2028, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}