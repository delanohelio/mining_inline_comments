{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM3ODUzMDAy", "number": 1694, "title": "HDDS-3701. Change Close container exception logging to debug in ContainerUtils#logAndReturnError", "bodyText": "What changes were proposed in this pull request?\nChange close container exception logging to debug level.\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-3701\nHow was this patch tested?\nCI", "createdAt": "2020-12-12T06:58:51Z", "url": "https://github.com/apache/ozone/pull/1694", "merged": true, "mergeCommit": {"oid": "2db6e6e865ab5753959e52f82ef74954138fe70c"}, "closed": true, "closedAt": "2020-12-23T06:12:38Z", "author": {"login": "flirmnave"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdldQxcAFqTU1MDgxMTgyNg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdoUhWWAH2gAyNTM3ODUzMDAyOjRiMzkwMGQ4MWY5NWViZDYzMjlkNzA5M2RlNmY0YzVmZThlMGQ3NWY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwODExODI2", "url": "https://github.com/apache/ozone/pull/1694#pullrequestreview-550811826", "createdAt": "2020-12-12T14:16:14Z", "commit": {"oid": "6a5f5bc2e9a270f476ffd63ac0d25b5b86aaf37d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMlQxNDoxNjoxNFrOIEfq1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMlQxNDoxNjoxNFrOIEfq1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTU4NDA4Nw==", "bodyText": "Nit: Adding isDebugEnabled() check would let us avoid some unnecessary operations.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  log.debug(logInfo, request.getCmdType(), request.getTraceID(),\n          \n          \n            \n                      ex.getMessage(), ex.getResult().getValueDescriptor().getName(), ex);\n          \n          \n            \n                  if (log.isDebugEnabled()) {\n          \n          \n            \n                    log.debug(logInfo, request.getCmdType(), request.getTraceID(),\n          \n          \n            \n                        ex.getMessage(), ex.getResult().getValueDescriptor().getName(), ex);\n          \n          \n            \n                  }", "url": "https://github.com/apache/ozone/pull/1694#discussion_r541584087", "createdAt": "2020-12-12T14:16:14Z", "author": {"login": "adoroszlai"}, "path": "hadoop-hdds/container-service/src/main/java/org/apache/hadoop/ozone/container/common/helpers/ContainerUtils.java", "diffHunk": "@@ -77,8 +78,13 @@ public static ContainerCommandResponseProto logAndReturnError(\n       ContainerCommandRequestProto request) {\n     String logInfo = \"Operation: {} , Trace ID: {} , Message: {} , \" +\n         \"Result: {} , StorageContainerException Occurred.\";\n-    log.info(logInfo, request.getCmdType(), request.getTraceID(),\n-        ex.getMessage(), ex.getResult().getValueDescriptor().getName(), ex);\n+    if (ex.getResult() == CLOSED_CONTAINER_IO) {\n+      log.debug(logInfo, request.getCmdType(), request.getTraceID(),\n+          ex.getMessage(), ex.getResult().getValueDescriptor().getName(), ex);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a5f5bc2e9a270f476ffd63ac0d25b5b86aaf37d"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2MTMxMjk5", "url": "https://github.com/apache/ozone/pull/1694#pullrequestreview-556131299", "createdAt": "2020-12-21T05:06:26Z", "commit": {"oid": "d7c12df094b2e3636802485d13b11b305b49dd3e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2MTM0ODQy", "url": "https://github.com/apache/ozone/pull/1694#pullrequestreview-556134842", "createdAt": "2020-12-21T05:20:35Z", "commit": {"oid": "d7c12df094b2e3636802485d13b11b305b49dd3e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQwNToyMDozNVrOIJMkeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQwNToyMDozNVrOIJMkeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjUxNDA0Mg==", "bodyText": "Its better to add debug for CONTAINER_NOT_OPEN as well.", "url": "https://github.com/apache/ozone/pull/1694#discussion_r546514042", "createdAt": "2020-12-21T05:20:35Z", "author": {"login": "bshashikant"}, "path": "hadoop-hdds/container-service/src/main/java/org/apache/hadoop/ozone/container/common/helpers/ContainerUtils.java", "diffHunk": "@@ -77,8 +78,15 @@ public static ContainerCommandResponseProto logAndReturnError(\n       ContainerCommandRequestProto request) {\n     String logInfo = \"Operation: {} , Trace ID: {} , Message: {} , \" +\n         \"Result: {} , StorageContainerException Occurred.\";\n-    log.info(logInfo, request.getCmdType(), request.getTraceID(),\n-        ex.getMessage(), ex.getResult().getValueDescriptor().getName(), ex);\n+    if (ex.getResult() == CLOSED_CONTAINER_IO) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d7c12df094b2e3636802485d13b11b305b49dd3e"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7dc4cbee427b2f8f6d171f08fdc3c629191ae8f1", "author": {"user": {"login": "flirmnave", "name": "Huang-Mu Zheng"}}, "url": "https://github.com/apache/ozone/commit/7dc4cbee427b2f8f6d171f08fdc3c629191ae8f1", "committedDate": "2020-12-21T06:13:28Z", "message": "HDDS-3701. Change Close container exception logging to debug in ContainerUtils#logAndReturnError"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e38017eb9550dad14478ef4edd72e364f24fc0a", "author": {"user": {"login": "flirmnave", "name": "Huang-Mu Zheng"}}, "url": "https://github.com/apache/ozone/commit/7e38017eb9550dad14478ef4edd72e364f24fc0a", "committedDate": "2020-12-21T06:13:28Z", "message": "retest."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "891d562e1e5b7f4088b7188a45cbb65dc48c0b5d", "author": {"user": {"login": "flirmnave", "name": "Huang-Mu Zheng"}}, "url": "https://github.com/apache/ozone/commit/891d562e1e5b7f4088b7188a45cbb65dc48c0b5d", "committedDate": "2020-12-21T06:13:29Z", "message": "Adding isDebugEnabled() check to avoid some unnecessary operations.\n\nCo-authored-by: Doroszlai, Attila <6454655+adoroszlai@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af5e5ba306b16f827c6b633e07d195886bf95cfb", "author": {"user": {"login": "flirmnave", "name": "Huang-Mu Zheng"}}, "url": "https://github.com/apache/ozone/commit/af5e5ba306b16f827c6b633e07d195886bf95cfb", "committedDate": "2020-12-21T06:13:29Z", "message": "retest."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54e1cd74ff4dd6b53588e39a8c66ff0afca125e0", "author": {"user": {"login": "flirmnave", "name": "Huang-Mu Zheng"}}, "url": "https://github.com/apache/ozone/commit/54e1cd74ff4dd6b53588e39a8c66ff0afca125e0", "committedDate": "2020-12-21T06:23:57Z", "message": "Add CONTAINER_NOT_OPEN to debug log level."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d7c12df094b2e3636802485d13b11b305b49dd3e", "author": {"user": {"login": "flirmnave", "name": "Huang-Mu Zheng"}}, "url": "https://github.com/apache/ozone/commit/d7c12df094b2e3636802485d13b11b305b49dd3e", "committedDate": "2020-12-13T06:15:51Z", "message": "retest."}, "afterCommit": {"oid": "54e1cd74ff4dd6b53588e39a8c66ff0afca125e0", "author": {"user": {"login": "flirmnave", "name": "Huang-Mu Zheng"}}, "url": "https://github.com/apache/ozone/commit/54e1cd74ff4dd6b53588e39a8c66ff0afca125e0", "committedDate": "2020-12-21T06:23:57Z", "message": "Add CONTAINER_NOT_OPEN to debug log level."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b3900d81f95ebd6329d7093de6f4c5fe8e0d75f", "author": {"user": {"login": "flirmnave", "name": "Huang-Mu Zheng"}}, "url": "https://github.com/apache/ozone/commit/4b3900d81f95ebd6329d7093de6f4c5fe8e0d75f", "committedDate": "2020-12-21T11:48:44Z", "message": "retest."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2104, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}