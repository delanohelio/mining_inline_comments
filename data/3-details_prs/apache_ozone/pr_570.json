{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3NTU4OTkx", "number": 570, "title": "HDDS-3035. Add ability to enable Ratis metrics in OzoneManager.", "bodyText": "What changes were proposed in this pull request?\nEnabled Dropwizard metrics registry to publish all OM Ratis metrics to JMX and configured metrics system endpoint.\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-3035\nHow was this patch tested?\n\nAdded an integration test\nVerified using docker build", "createdAt": "2020-02-20T05:31:58Z", "url": "https://github.com/apache/ozone/pull/570", "merged": true, "mergeCommit": {"oid": "887cee24602e44c3cd25f1e155ef7c1aef9258a4"}, "closed": true, "closedAt": "2020-02-22T04:59:29Z", "author": {"login": "swagle"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcGESHTAH2gAyMzc3NTU4OTkxOjU0NTA3NTM0OWFjYTViYjdlMTVlNjRlZjc2OGU2Mjg0NjdjZjU4NjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcGo8fRAH2gAyMzc3NTU4OTkxOjk5NmMyMjU5YzUyZTQ5OGU2OGJhMDcxN2NkMzFiN2FjNmVhMGUzNGY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "545075349aca5bb7e15e64ef768e628467cf5862", "author": {"user": {"login": "swagle", "name": "Siddharth"}}, "url": "https://github.com/apache/ozone/commit/545075349aca5bb7e15e64ef768e628467cf5862", "committedDate": "2020-02-20T05:29:02Z", "message": "HDDS-3035. Add ability to enable Ratis metrics in OzoneManager."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyOTU5OTA3", "url": "https://github.com/apache/ozone/pull/570#pullrequestreview-362959907", "createdAt": "2020-02-21T22:39:36Z", "commit": {"oid": "545075349aca5bb7e15e64ef768e628467cf5862"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyOTYwMzcw", "url": "https://github.com/apache/ozone/pull/570#pullrequestreview-362960370", "createdAt": "2020-02-21T22:40:58Z", "commit": {"oid": "545075349aca5bb7e15e64ef768e628467cf5862"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQyMjo0MDo1OFrOFtGuYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQyMjo0MDo1OFrOFtGuYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjg0MDQxOA==", "bodyText": "One comment. We can probably add ratis reporters only if Ratis is enabled.", "url": "https://github.com/apache/ozone/pull/570#discussion_r382840418", "createdAt": "2020-02-21T22:40:58Z", "author": {"login": "avijayanhwx"}, "path": "hadoop-ozone/ozone-manager/src/main/java/org/apache/hadoop/ozone/om/OzoneManager.java", "diffHunk": "@@ -1068,14 +1074,20 @@ public OMMetrics getMetrics() {\n    * Start service.\n    */\n   public void start() throws IOException {\n-\n     omClientProtocolMetrics.register();\n+    HddsServerUtil.initializeMetrics(configuration, \"OzoneManager\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "545075349aca5bb7e15e64ef768e628467cf5862"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1a86ea5b992a108fe8b38b0b5e5b0beeebf2f8c", "author": {"user": {"login": "swagle", "name": "Siddharth"}}, "url": "https://github.com/apache/ozone/commit/b1a86ea5b992a108fe8b38b0b5e5b0beeebf2f8c", "committedDate": "2020-02-22T00:01:47Z", "message": "HDDS-3035. Addressed review comments."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "996c2259c52e498e68ba0717cd31b7ac6ea0e34f", "author": {"user": {"login": "swagle", "name": "Siddharth"}}, "url": "https://github.com/apache/ozone/commit/996c2259c52e498e68ba0717cd31b7ac6ea0e34f", "committedDate": "2020-02-22T00:11:54Z", "message": "Checkstyle fix."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3598, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}