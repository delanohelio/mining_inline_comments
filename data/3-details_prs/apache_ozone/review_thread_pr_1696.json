{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM4NzI2Njg1", "number": 1696, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwMzozMTozM1rOFEyObQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMzoxNTo0NlrOFE-g4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNTYxNTE3OnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/shell/SetSpaceQuotaOptions.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwMzozMTozM1rOIE-b2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwMzo1ODozMFrOIE-5iQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA4ODE1NQ==", "bodyText": "Can you also rename '--count-quota' to '--namespace-quota'?", "url": "https://github.com/apache/ozone/pull/1696#discussion_r542088155", "createdAt": "2020-12-14T03:31:33Z", "author": {"login": "linyiqun"}, "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/shell/SetSpaceQuotaOptions.java", "diffHunk": "@@ -32,14 +32,14 @@\n   @CommandLine.Option(names = {\"--count-quota\"},\n       description = \"For volume this parameter represents the number of \" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f449196a847566c5bb2d73bffa8c713f6a59105c"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA5NTc1Mw==", "bodyText": "Good point!", "url": "https://github.com/apache/ozone/pull/1696#discussion_r542095753", "createdAt": "2020-12-14T03:58:30Z", "author": {"login": "amaliujia"}, "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/shell/SetSpaceQuotaOptions.java", "diffHunk": "@@ -32,14 +32,14 @@\n   @CommandLine.Option(names = {\"--count-quota\"},\n       description = \"For volume this parameter represents the number of \" +", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA4ODE1NQ=="}, "originalCommit": {"oid": "f449196a847566c5bb2d73bffa8c713f6a59105c"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNTYxODU5OnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/dist/src/main/smoketest/basic/ozone-shell-lib.robot", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwMzozMjo1NVrOIE-dkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwMzo1ODozNVrOIE-5lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA4ODU5NQ==", "bodyText": "Once option --count-quota is updated to --namespace-quota, this file also needed to be updated.", "url": "https://github.com/apache/ozone/pull/1696#discussion_r542088595", "createdAt": "2020-12-14T03:32:55Z", "author": {"login": "linyiqun"}, "path": "hadoop-ozone/dist/src/main/smoketest/basic/ozone-shell-lib.robot", "diffHunk": "@@ -48,12 +48,12 @@ Test ozone shell\n                     Should Be Equal     ${result}       DISK\n     ${result} =     Execute             ozone sh bucket info ${protocol}${server}/${volume}/bb1 | jq -r '. | select(.name==\"bb1\") | .quotaInBytes'\n                     Should Be Equal     ${result}       10995116277760\n-    ${result} =     Execute             ozone sh bucket info ${protocol}${server}/${volume}/bb1 | jq -r '. | select(.name==\"bb1\") | .quotaInCounts'\n+    ${result} =     Execute             ozone sh bucket info ${protocol}${server}/${volume}/bb1 | jq -r '. | select(.name==\"bb1\") | .quotaInNamespace'\n                     Should Be Equal     ${result}       100\n                     Execute             ozone sh bucket setquota ${protocol}${server}/${volume}/bb1 --space-quota 1TB --count-quota 1000", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f449196a847566c5bb2d73bffa8c713f6a59105c"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA5NTc2Ng==", "bodyText": "Done!", "url": "https://github.com/apache/ozone/pull/1696#discussion_r542095766", "createdAt": "2020-12-14T03:58:35Z", "author": {"login": "amaliujia"}, "path": "hadoop-ozone/dist/src/main/smoketest/basic/ozone-shell-lib.robot", "diffHunk": "@@ -48,12 +48,12 @@ Test ozone shell\n                     Should Be Equal     ${result}       DISK\n     ${result} =     Execute             ozone sh bucket info ${protocol}${server}/${volume}/bb1 | jq -r '. | select(.name==\"bb1\") | .quotaInBytes'\n                     Should Be Equal     ${result}       10995116277760\n-    ${result} =     Execute             ozone sh bucket info ${protocol}${server}/${volume}/bb1 | jq -r '. | select(.name==\"bb1\") | .quotaInCounts'\n+    ${result} =     Execute             ozone sh bucket info ${protocol}${server}/${volume}/bb1 | jq -r '. | select(.name==\"bb1\") | .quotaInNamespace'\n                     Should Be Equal     ${result}       100\n                     Execute             ozone sh bucket setquota ${protocol}${server}/${volume}/bb1 --space-quota 1TB --count-quota 1000", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA4ODU5NQ=="}, "originalCommit": {"oid": "f449196a847566c5bb2d73bffa8c713f6a59105c"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNzYyODQ5OnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/ozone-manager/src/main/java/org/apache/hadoop/ozone/om/request/volume/OMVolumeSetQuotaRequest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMzoxNTo0NlrOIFP4yQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMTowMzo0MFrOIFo31w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjM3NDA4OQ==", "bodyText": "Do we also change checkQuotaCountsValid to checkQuotaNamespaceValid?", "url": "https://github.com/apache/ozone/pull/1696#discussion_r542374089", "createdAt": "2020-12-14T13:15:46Z", "author": {"login": "captainzmc"}, "path": "hadoop-ozone/ozone-manager/src/main/java/org/apache/hadoop/ozone/om/request/volume/OMVolumeSetQuotaRequest.java", "diffHunk": "@@ -135,11 +135,12 @@ public OMClientResponse validateAndUpdateCache(OzoneManager ozoneManager,\n       } else {\n         omVolumeArgs.setQuotaInBytes(omVolumeArgs.getQuotaInBytes());\n       }\n-      if (checkQuotaCountsValid(setVolumePropertyRequest.getQuotaInCounts())) {\n-        omVolumeArgs.setQuotaInCounts(\n-            setVolumePropertyRequest.getQuotaInCounts());\n+      if (checkQuotaCountsValid(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "943f63bc3563f46ec8a544c51f3f3217b58d0cf5"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjc4MzQ0Nw==", "bodyText": "Indeed! Done!", "url": "https://github.com/apache/ozone/pull/1696#discussion_r542783447", "createdAt": "2020-12-14T21:03:40Z", "author": {"login": "amaliujia"}, "path": "hadoop-ozone/ozone-manager/src/main/java/org/apache/hadoop/ozone/om/request/volume/OMVolumeSetQuotaRequest.java", "diffHunk": "@@ -135,11 +135,12 @@ public OMClientResponse validateAndUpdateCache(OzoneManager ozoneManager,\n       } else {\n         omVolumeArgs.setQuotaInBytes(omVolumeArgs.getQuotaInBytes());\n       }\n-      if (checkQuotaCountsValid(setVolumePropertyRequest.getQuotaInCounts())) {\n-        omVolumeArgs.setQuotaInCounts(\n-            setVolumePropertyRequest.getQuotaInCounts());\n+      if (checkQuotaCountsValid(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjM3NDA4OQ=="}, "originalCommit": {"oid": "943f63bc3563f46ec8a544c51f3f3217b58d0cf5"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4618, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}