{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc4NzIxMzkx", "number": 1388, "title": "HDDS-4204. upgrade docker environment does not work with KEEP_RUNNING=true", "bodyText": "What changes were proposed in this pull request?\nOzone upgrade test fails if run with KEEP_RUNNING=true.  The variable is applied to both runs (pre- and post-upgrade), but pre-upgrade containers should be stopped regardless, since they will be replaced by the new ones.\nAlso remove leftover debug directory creation.\nhttps://issues.apache.org/jira/browse/HDDS-4204\nHow was this patch tested?\nTested locally:\n$ cd hadoop-ozone/dist/target/ozone-1.1.0-SNAPSHOT/compose/upgrade\n$ KEEP_RUNNING=true ./test.sh\n...\nStopping upgrade_om_1    ...\n...\nReaddata :: Smoketest ozone cluster startup                           | PASS |\n...\n\nRegular CI:\nhttps://github.com/adoroszlai/hadoop-ozone/runs/1067273739", "createdAt": "2020-09-03T15:41:48Z", "url": "https://github.com/apache/ozone/pull/1388", "merged": true, "mergeCommit": {"oid": "53353c064319a8d71bf99f6e95acd1dca318e37e"}, "closed": true, "closedAt": "2020-09-07T12:27:53Z", "author": {"login": "adoroszlai"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdFRZQpAH2gAyNDc4NzIxMzkxOmI5MDA5OGJmZTUxYzk0M2QxZjkyMWE0MjEzYjZlNjdjZDQ4YWE2OTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdGiJIyAFqTQ4MzUxNjk0NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b90098bfe51c943d1f921a4213b6e67cd48aa698", "author": {"user": {"login": "adoroszlai", "name": "Doroszlai, Attila"}}, "url": "https://github.com/apache/ozone/commit/b90098bfe51c943d1f921a4213b6e67cd48aa698", "committedDate": "2020-09-03T14:22:50Z", "message": "HDDS-4204. upgrade docker environment does not work with KEEP_RUNNING=true"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2ab1cf093fd04b4cca6582745e735ba039061d4", "author": {"user": {"login": "adoroszlai", "name": "Doroszlai, Attila"}}, "url": "https://github.com/apache/ozone/commit/e2ab1cf093fd04b4cca6582745e735ba039061d4", "committedDate": "2020-09-03T17:08:29Z", "message": "trigger new CI check"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyMDU5MDgy", "url": "https://github.com/apache/ozone/pull/1388#pullrequestreview-482059082", "createdAt": "2020-09-03T17:33:58Z", "commit": {"oid": "e2ab1cf093fd04b4cca6582745e735ba039061d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxNzozMzo1OVrOHMw1HQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxNzozMzo1OVrOHMw1HQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzE0NDk4OQ==", "bodyText": "/debug is leftover means it is unused now?", "url": "https://github.com/apache/ozone/pull/1388#discussion_r483144989", "createdAt": "2020-09-03T17:33:59Z", "author": {"login": "amaliujia"}, "path": "hadoop-ozone/dist/src/main/compose/upgrade/test.sh", "diffHunk": "@@ -26,7 +26,6 @@ export COMPOSE_DIR\n export OZONE_VOLUME\n \n mkdir -p \"${OZONE_VOLUME}\"/{dn1,dn2,dn3,om,recon,s3g,scm}\n-mkdir -p \"${OZONE_VOLUME}/debug\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2ab1cf093fd04b4cca6582745e735ba039061d4"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzNTE2OTQ1", "url": "https://github.com/apache/ozone/pull/1388#pullrequestreview-483516945", "createdAt": "2020-09-07T12:27:32Z", "commit": {"oid": "e2ab1cf093fd04b4cca6582745e735ba039061d4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2446, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}