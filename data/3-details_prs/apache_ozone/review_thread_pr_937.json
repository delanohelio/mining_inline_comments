{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5NDUxNjky", "number": 937, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNTozODowNlrOD9csfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNTozODowNlrOD9csfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1NzU5ODcxOnYy", "diffSide": "RIGHT", "path": "hadoop-hdds/container-service/src/main/java/org/apache/hadoop/ozone/container/keyvalue/impl/BlockManagerImpl.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNTozODowNlrOGW8wSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxNDo1ODoxOFrOGYQC4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjcxNzI1Nw==", "bodyText": "Is it necessary to wrap a debug log entry in the if (LOG.isDebugEnabled()) statement? It is my understanding, that so long as you are not doing string interpolation in the log message and are passing simple variables as any parameters to the log message (ie not doing any computation to calculate the values being passed), then LOG4J does the correct thing and there is no performance penalty to removing the IF wrapper.", "url": "https://github.com/apache/ozone/pull/937#discussion_r426717257", "createdAt": "2020-05-18T15:38:06Z", "author": {"login": "sodonnel"}, "path": "hadoop-hdds/container-service/src/main/java/org/apache/hadoop/ozone/container/keyvalue/impl/BlockManagerImpl.java", "diffHunk": "@@ -108,9 +108,11 @@ public long putBlock(Container container, BlockData data) throws IOException {\n         // transaction is reapplied in the ContainerStateMachine on restart.\n         // It also implies that the given block must already exist in the db.\n         // just log and return\n-        LOG.warn(\"blockCommitSequenceId {} in the Container Db is greater than\"\n-            + \" the supplied value {}. Ignoring it\",\n-            containerBCSId, bcsId);\n+        if (LOG.isDebugEnabled()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5f65c349d86115b1bc77e83a9099be45cf632ee4"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjczMjMyMQ==", "bodyText": "http://www.slf4j.org/faq.html#logging_performance suggests the IF wrapper is not needed for performance reasons.", "url": "https://github.com/apache/ozone/pull/937#discussion_r426732321", "createdAt": "2020-05-18T15:59:00Z", "author": {"login": "sodonnel"}, "path": "hadoop-hdds/container-service/src/main/java/org/apache/hadoop/ozone/container/keyvalue/impl/BlockManagerImpl.java", "diffHunk": "@@ -108,9 +108,11 @@ public long putBlock(Container container, BlockData data) throws IOException {\n         // transaction is reapplied in the ContainerStateMachine on restart.\n         // It also implies that the given block must already exist in the db.\n         // just log and return\n-        LOG.warn(\"blockCommitSequenceId {} in the Container Db is greater than\"\n-            + \" the supplied value {}. Ignoring it\",\n-            containerBCSId, bcsId);\n+        if (LOG.isDebugEnabled()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjcxNzI1Nw=="}, "originalCommit": {"oid": "5f65c349d86115b1bc77e83a9099be45cf632ee4"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODA4MTg4OA==", "bodyText": "yepp, you are right, muscle memory I guess :D Thank you for checking it, I pushed a fix.", "url": "https://github.com/apache/ozone/pull/937#discussion_r428081888", "createdAt": "2020-05-20T14:58:18Z", "author": {"login": "fapifta"}, "path": "hadoop-hdds/container-service/src/main/java/org/apache/hadoop/ozone/container/keyvalue/impl/BlockManagerImpl.java", "diffHunk": "@@ -108,9 +108,11 @@ public long putBlock(Container container, BlockData data) throws IOException {\n         // transaction is reapplied in the ContainerStateMachine on restart.\n         // It also implies that the given block must already exist in the db.\n         // just log and return\n-        LOG.warn(\"blockCommitSequenceId {} in the Container Db is greater than\"\n-            + \" the supplied value {}. Ignoring it\",\n-            containerBCSId, bcsId);\n+        if (LOG.isDebugEnabled()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjcxNzI1Nw=="}, "originalCommit": {"oid": "5f65c349d86115b1bc77e83a9099be45cf632ee4"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4312, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}