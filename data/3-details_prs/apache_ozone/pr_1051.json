{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyNTU1MzU2", "number": 1051, "title": "HDDS-3747. Redundancy if condition code in ListPipelinesSubcommand", "bodyText": "Remove the redundancy if condition code in ListPipelinesSubcommand\nWhat changes were proposed in this pull request?\nto remove redundancy code in ListPipelinesSubCommand\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-3747\nHow was this patch tested?\nthrough CI checks", "createdAt": "2020-06-10T16:02:14Z", "url": "https://github.com/apache/ozone/pull/1051", "merged": true, "mergeCommit": {"oid": "d85c7e334c568a9df571b7b779d119a0a1566751"}, "closed": true, "closedAt": "2020-07-09T16:15:02Z", "author": {"login": "hemanthboyina"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcp73F0gH2gAyNDMyNTU1MzU2OmFmMjkwZTJlNDAxMjc3ZTllNTQ4YjViZGEzZWViZDRhMzg2NmZlNzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABczRbhYAFqTQ0NTc2OTEzNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "af290e2e401277e9e548b5bda3eebd4a3866fe77", "author": {"user": {"login": "hemanthboyina", "name": null}}, "url": "https://github.com/apache/ozone/commit/af290e2e401277e9e548b5bda3eebd4a3866fe77", "committedDate": "2020-06-10T16:01:33Z", "message": "Redundancy if condition code in ListPipelinesSubcommand\n\nRemove the redundancy if condition code in ListPipelinesSubcommand"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4MjY5MzE1", "url": "https://github.com/apache/ozone/pull/1051#pullrequestreview-428269315", "createdAt": "2020-06-10T17:17:24Z", "commit": {"oid": "af290e2e401277e9e548b5bda3eebd4a3866fe77"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNzoxNzoyNFrOGh-1IA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNzoxNzoyNFrOGh-1IA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODI4NTYwMA==", "bodyText": "Please reduce the indent to fix the checkstyle failure.", "url": "https://github.com/apache/ozone/pull/1051#discussion_r438285600", "createdAt": "2020-06-10T17:17:24Z", "author": {"login": "maobaolong"}, "path": "hadoop-hdds/tools/src/main/java/org/apache/hadoop/hdds/scm/cli/pipeline/ListPipelinesSubcommand.java", "diffHunk": "@@ -54,17 +54,13 @@\n   @Override\n   public Void call() throws Exception {\n     try (ScmClient scmClient = parent.getParent().createScmClient()) {\n-      if (Strings.isNullOrEmpty(factor) && Strings.isNullOrEmpty(state)) {\n-        scmClient.listPipelines().forEach(System.out::println);\n-      } else {\n-        scmClient.listPipelines().stream()\n-            .filter(p -> ((Strings.isNullOrEmpty(factor) ||\n-                (p.getFactor().toString().compareToIgnoreCase(factor) == 0))\n-                && (Strings.isNullOrEmpty(state) ||\n-                (p.getPipelineState().toString().compareToIgnoreCase(state)\n-                    == 0))))\n+       scmClient.listPipelines().stream()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af290e2e401277e9e548b5bda3eebd4a3866fe77"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45d9b2760fe5ebe904890385cd52f9c55fbd25d1", "author": {"user": {"login": "hemanthboyina", "name": null}}, "url": "https://github.com/apache/ozone/commit/45d9b2760fe5ebe904890385cd52f9c55fbd25d1", "committedDate": "2020-06-12T18:33:37Z", "message": "Update ListPipelinesSubcommand.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwMTQyMDAy", "url": "https://github.com/apache/ozone/pull/1051#pullrequestreview-430142002", "createdAt": "2020-06-13T14:11:06Z", "commit": {"oid": "45d9b2760fe5ebe904890385cd52f9c55fbd25d1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QxNDoxMTowN1rOGjXuIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QxNDoxMTowN1rOGjXuIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc0MTk4Nw==", "bodyText": "Structuring this as below would reduce duplication, and make it easier to add further filters if needed:\nStream<...> stream = scmClient.listPipelines().stream();\nif (!isNullOrEmpty(factor)) {\n  stream = stream.filter(...);\n}\nif (!isNullOrEmpty(state)) {\n  stream = stream.filter(...);\n}\nstream.forEach(...);", "url": "https://github.com/apache/ozone/pull/1051#discussion_r439741987", "createdAt": "2020-06-13T14:11:07Z", "author": {"login": "adoroszlai"}, "path": "hadoop-hdds/tools/src/main/java/org/apache/hadoop/hdds/scm/cli/pipeline/ListPipelinesSubcommand.java", "diffHunk": "@@ -54,17 +54,12 @@\n   @Override\n   public Void call() throws Exception {\n     try (ScmClient scmClient = parent.getParent().createScmClient()) {\n-      if (Strings.isNullOrEmpty(factor) && Strings.isNullOrEmpty(state)) {\n-        scmClient.listPipelines().forEach(System.out::println);\n-      } else {\n-        scmClient.listPipelines().stream()\n-            .filter(p -> ((Strings.isNullOrEmpty(factor) ||\n-                (p.getFactor().toString().compareToIgnoreCase(factor) == 0))\n-                && (Strings.isNullOrEmpty(state) ||\n-                (p.getPipelineState().toString().compareToIgnoreCase(state)\n-                    == 0))))\n-            .forEach(System.out::println);\n-      }\n+      scmClient.listPipelines().stream()\n+          .filter(p -> ((Strings.isNullOrEmpty(factor)\n+              || (p.getFactor().toString().compareToIgnoreCase(factor) == 0))\n+              && (Strings.isNullOrEmpty(state) || (p.getPipelineState()\n+                  .toString().compareToIgnoreCase(state) == 0))))\n+          .forEach(System.out::println);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45d9b2760fe5ebe904890385cd52f9c55fbd25d1"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6020a02f74f2f671b62d2671da21bba5f39a5ae", "author": {"user": {"login": "hemanthboyina", "name": null}}, "url": "https://github.com/apache/ozone/commit/f6020a02f74f2f671b62d2671da21bba5f39a5ae", "committedDate": "2020-06-19T17:42:45Z", "message": "Update ListPipelinesSubcommand.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09d9dd6ccb82f0ec6b37a2d95f6e1aa4e36dced8", "author": {"user": {"login": "hemanthboyina", "name": null}}, "url": "https://github.com/apache/ozone/commit/09d9dd6ccb82f0ec6b37a2d95f6e1aa4e36dced8", "committedDate": "2020-06-19T18:37:06Z", "message": "Update ListPipelinesSubcommand.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM1NDI0Nzkw", "url": "https://github.com/apache/ozone/pull/1051#pullrequestreview-435424790", "createdAt": "2020-06-23T04:06:42Z", "commit": {"oid": "09d9dd6ccb82f0ec6b37a2d95f6e1aa4e36dced8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4NzcxMzQy", "url": "https://github.com/apache/ozone/pull/1051#pullrequestreview-438771342", "createdAt": "2020-06-28T11:28:03Z", "commit": {"oid": "09d9dd6ccb82f0ec6b37a2d95f6e1aa4e36dced8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NzY5MTM2", "url": "https://github.com/apache/ozone/pull/1051#pullrequestreview-445769136", "createdAt": "2020-07-09T16:14:40Z", "commit": {"oid": "09d9dd6ccb82f0ec6b37a2d95f6e1aa4e36dced8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3173, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}