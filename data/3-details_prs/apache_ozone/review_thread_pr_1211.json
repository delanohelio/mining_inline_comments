{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUwNTg0OTY4", "number": 1211, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwNDowNDoyMlrOEPY0Sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwNDowNDoyMlrOEPY0Sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0NTcwNjk5OnYy", "diffSide": "RIGHT", "path": "hadoop-ozone/ozonefs-common/src/main/java/org/apache/hadoop/fs/ozone/BasicOzoneFileSystem.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwNDowNDoyMlrOGzEn1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QwNDoyMzo1MVrOGzE4Kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIwNjI5Mg==", "bodyText": "Can we just do this here, instead of toUri().getPath() again?\n   LOG.trace(\"path for key:{} is:{}\", key, path); return key.substring(1);", "url": "https://github.com/apache/ozone/pull/1211#discussion_r456206292", "createdAt": "2020-07-17T04:04:22Z", "author": {"login": "avijayanhwx"}, "path": "hadoop-ozone/ozonefs-common/src/main/java/org/apache/hadoop/fs/ozone/BasicOzoneFileSystem.java", "diffHunk": "@@ -721,7 +723,13 @@ public String pathToKey(Path path) {\n       path = new Path(workingDir, path);\n     }\n     // removing leading '/' char\n-    String key = path.toUri().getPath().substring(1);\n+    String key = path.toUri().getPath();\n+\n+    if (OzoneFSUtils.isValidName(key)) {\n+      key = path.toUri().getPath().substring(1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3500bd84b503988b98663714ddb7bb841fdd6d9f"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIxMDQ3NQ==", "bodyText": "Done.", "url": "https://github.com/apache/ozone/pull/1211#discussion_r456210475", "createdAt": "2020-07-17T04:23:51Z", "author": {"login": "bharatviswa504"}, "path": "hadoop-ozone/ozonefs-common/src/main/java/org/apache/hadoop/fs/ozone/BasicOzoneFileSystem.java", "diffHunk": "@@ -721,7 +723,13 @@ public String pathToKey(Path path) {\n       path = new Path(workingDir, path);\n     }\n     // removing leading '/' char\n-    String key = path.toUri().getPath().substring(1);\n+    String key = path.toUri().getPath();\n+\n+    if (OzoneFSUtils.isValidName(key)) {\n+      key = path.toUri().getPath().substring(1);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjIwNjI5Mg=="}, "originalCommit": {"oid": "3500bd84b503988b98663714ddb7bb841fdd6d9f"}, "originalPosition": 24}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3989, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}