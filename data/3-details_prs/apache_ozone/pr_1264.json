{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3MTA1NDI4", "number": 1264, "title": "HDDS-4035. Update logs of HadoopDirGenerator.", "bodyText": "What changes were proposed in this pull request?\n\n\nAdded logs to HadoopNestedDirGenerator.\n\n\nEdit logs of HadoopDirTreeGenerator.\n\n\nUse BaseFreonGenerator printReport() for shell and command-line execution of freon commands like ddsg, dtsg, etc.\n\n\nWhat is the link to the Apache JIRA\nhttps://issues.apache.org/jira/browse/HDDS-4035\nHow was this patch tested?\nTested Manually.", "createdAt": "2020-07-27T11:35:26Z", "url": "https://github.com/apache/ozone/pull/1264", "merged": true, "mergeCommit": {"oid": "c7ae9fe363355306896133b4b92a113abb79864e"}, "closed": true, "closedAt": "2020-08-05T16:33:54Z", "author": {"login": "aryangupta1998"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5AKzfAH2gAyNDU3MTA1NDI4Ojk1YjAwMTQyNzMyYzI0MWM0ZDA2MGNmNmJmN2E5YjAxMDVlYWU1OWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc77O1cgH2gAyNDU3MTA1NDI4OjRmZTFiZmFjMzMxYmFkMTBkNjNlOTVkMTUzOTVjY2I2M2I5ZmJiYTc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "95b00142732c241c4d060cf6bf7a9b0105eae59a", "author": {"user": null}, "url": "https://github.com/apache/ozone/commit/95b00142732c241c4d060cf6bf7a9b0105eae59a", "committedDate": "2020-07-27T11:31:34Z", "message": "HDDS-4035. Add logs to HadoopNestedDirGenerator."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3MjYxNjUw", "url": "https://github.com/apache/ozone/pull/1264#pullrequestreview-457261650", "createdAt": "2020-07-29T07:28:40Z", "commit": {"oid": "95b00142732c241c4d060cf6bf7a9b0105eae59a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwNzoyODo0MFrOG4sBdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwNzoyODo0MFrOG4sBdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA5NDcwOA==", "bodyText": "Sometimes freon is executed from 'shell' sometimes from 'command line', BaseFreonGenerator.printReport already handle this and we can follow this approach.\nAlong with this patch, can you change the \"System.out\" in https://github.com/apache/hadoop-ozone/blob/master/hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/HadoopDirTreeGenerator.java#L154 as well. Thanks!", "url": "https://github.com/apache/ozone/pull/1264#discussion_r462094708", "createdAt": "2020-07-29T07:28:40Z", "author": {"login": "rakeshadr"}, "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/HadoopNestedDirGenerator.java", "diffHunk": "@@ -109,5 +117,7 @@ private void createDir(long counter) throws Exception {\n       Path dir = new Path(rootPath.concat(\"/\").concat(childDir));\n       fileSystem.mkdirs(dir.getParent());\n     }\n+    System.out.println(\"\\nSuccessfully created directories. Total \" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95b00142732c241c4d060cf6bf7a9b0105eae59a"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62b639c3c784cca5665f14103e0a5aff9bd90de4", "author": {"user": null}, "url": "https://github.com/apache/ozone/commit/62b639c3c784cca5665f14103e0a5aff9bd90de4", "committedDate": "2020-07-29T18:28:15Z", "message": "HDDS-4035. Update logs of HadoopTreeDirGenerator/HadoopNestedDirGenerator."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4MDUwMjAw", "url": "https://github.com/apache/ozone/pull/1264#pullrequestreview-458050200", "createdAt": "2020-07-30T03:41:41Z", "commit": {"oid": "62b639c3c784cca5665f14103e0a5aff9bd90de4"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQwMzo0MTo0MVrOG5R8qA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQwMzo0MjoxN1rOG5R9Sg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjcxNjA3Mg==", "bodyText": "Latest patch looks good. Adding few minor comments:\nPlease add javadoc and change the parameter name 's' to 'msg', just to make it more readable.", "url": "https://github.com/apache/ozone/pull/1264#discussion_r462716072", "createdAt": "2020-07-30T03:41:41Z", "author": {"login": "rakeshadr"}, "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/BaseFreonGenerator.java", "diffHunk": "@@ -301,6 +301,15 @@ public void printReport() {\n     messages.forEach(print);\n   }\n \n+  public void print(String s){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62b639c3c784cca5665f14103e0a5aff9bd90de4"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjcxNjIzNA==", "bodyText": "minor comment: please remove 'return null' inside the else block as below return is sufficient.", "url": "https://github.com/apache/ozone/pull/1264#discussion_r462716234", "createdAt": "2020-07-30T03:42:17Z", "author": {"login": "rakeshadr"}, "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/HadoopDirTreeGenerator.java", "diffHunk": "@@ -97,17 +97,25 @@\n \n   @Override\n   public Void call() throws Exception {\n-\n-    init();\n-    OzoneConfiguration configuration = createOzoneConfiguration();\n-    fileSystem = FileSystem.get(URI.create(rootPath), configuration);\n-\n-    contentGenerator = new ContentGenerator(fileSizeInBytes, bufferSize);\n-    timer = getMetrics().timer(\"file-create\");\n-\n-    runTests(this::createDir);\n+    String s;\n+    if (depth <= 0) {\n+      s = \"Invalid depth value, depth value should be greater than zero!\";\n+      print(s);\n+    } else if (span <= 0) {\n+      s = \"Invalid span value, span value should be greater than zero!\";\n+      print(s);\n+    } else {\n+      init();\n+      OzoneConfiguration configuration = createOzoneConfiguration();\n+      fileSystem = FileSystem.get(URI.create(rootPath), configuration);\n+\n+      contentGenerator = new ContentGenerator(fileSizeInBytes, bufferSize);\n+      timer = getMetrics().timer(\"file-create\");\n+\n+      runTests(this::createDir);\n+      return null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62b639c3c784cca5665f14103e0a5aff9bd90de4"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "96d54cce36fc658083ae1d0b5b4bd2705d6e8096", "author": {"user": null}, "url": "https://github.com/apache/ozone/commit/96d54cce36fc658083ae1d0b5b4bd2705d6e8096", "committedDate": "2020-07-30T06:32:49Z", "message": "HDDS-4035. Update logs of HadoopTreeDirGenerator/HadoopNestedDirGenerator - Fixed minor changes."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4MTIyMTMy", "url": "https://github.com/apache/ozone/pull/1264#pullrequestreview-458122132", "createdAt": "2020-07-30T06:40:21Z", "commit": {"oid": "96d54cce36fc658083ae1d0b5b4bd2705d6e8096"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQwNjo0MDoyMVrOG5VHZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQwNjo0MDoyMVrOG5VHZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjc2Nzk3NA==", "bodyText": "As this is base class, please remove the inherited class details here.\nyou can write something like,\n\"Print out reports with the given message.\"", "url": "https://github.com/apache/ozone/pull/1264#discussion_r462767974", "createdAt": "2020-07-30T06:40:21Z", "author": {"login": "rakeshadr"}, "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/BaseFreonGenerator.java", "diffHunk": "@@ -301,6 +301,19 @@ public void printReport() {\n     messages.forEach(print);\n   }\n \n+  /**\n+   * Print out the messages for HadoopNestedDirGenerator", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "96d54cce36fc658083ae1d0b5b4bd2705d6e8096"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9d81f51fbb3e54919d89802139f527477c47787", "author": {"user": null}, "url": "https://github.com/apache/ozone/commit/e9d81f51fbb3e54919d89802139f527477c47787", "committedDate": "2020-07-30T07:03:38Z", "message": "HDDS-4035. Update logs of HadoopTreeDirGenerator/HadoopNestedDirGenerator - Fixed Javadoc."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4OTAyNzAw", "url": "https://github.com/apache/ozone/pull/1264#pullrequestreview-458902700", "createdAt": "2020-07-31T04:01:30Z", "commit": {"oid": "e9d81f51fbb3e54919d89802139f527477c47787"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQwNDowMTozMFrOG57Slw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQwNDowMTozMFrOG57Slw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzM5MzQzMQ==", "bodyText": "Given we only have one String msg here, we can eliminate thew List allocation here by just simply call\nprint.accept(msg) in line 313.", "url": "https://github.com/apache/ozone/pull/1264#discussion_r463393431", "createdAt": "2020-07-31T04:01:30Z", "author": {"login": "xiaoyuyao"}, "path": "hadoop-ozone/tools/src/main/java/org/apache/hadoop/ozone/freon/BaseFreonGenerator.java", "diffHunk": "@@ -301,6 +301,18 @@ public void printReport() {\n     messages.forEach(print);\n   }\n \n+  /**\n+   * Print out reports with the given message.\n+   */\n+  public void print(String msg){\n+    List<String> messages = new LinkedList<>();\n+    messages.add(msg);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9d81f51fbb3e54919d89802139f527477c47787"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4OTAzMjQ3", "url": "https://github.com/apache/ozone/pull/1264#pullrequestreview-458903247", "createdAt": "2020-07-31T04:04:01Z", "commit": {"oid": "e9d81f51fbb3e54919d89802139f527477c47787"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4cda37cfd21d0bed5c1af74c97064dca4763a8b3", "author": {"user": null}, "url": "https://github.com/apache/ozone/commit/4cda37cfd21d0bed5c1af74c97064dca4763a8b3", "committedDate": "2020-07-31T08:36:07Z", "message": "HDDS-4035. Fixed Print Function in BaseFreonGenerator."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80111a78213f846e476982d591e76630c81407f4", "author": {"user": null}, "url": "https://github.com/apache/ozone/commit/80111a78213f846e476982d591e76630c81407f4", "committedDate": "2020-08-02T04:38:21Z", "message": "HDDS-4035. Fixed Print Function in BaseFreonGenerator."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "044728a63922904e53ddd16b6e4c30a4c959a2f0", "author": {"user": null}, "url": "https://github.com/apache/ozone/commit/044728a63922904e53ddd16b6e4c30a4c959a2f0", "committedDate": "2020-08-04T11:24:57Z", "message": "trigger new CI check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3be1cd9158bc3d147ba939da52256f9627c2773b", "author": {"user": null}, "url": "https://github.com/apache/ozone/commit/3be1cd9158bc3d147ba939da52256f9627c2773b", "committedDate": "2020-08-04T11:25:40Z", "message": "trigger new CI check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4fe1bfac331bad10d63e95d15395ccb63b9fbba7", "author": {"user": null}, "url": "https://github.com/apache/ozone/commit/4fe1bfac331bad10d63e95d15395ccb63b9fbba7", "committedDate": "2020-08-05T13:28:13Z", "message": "trigger new CI check"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2941, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}