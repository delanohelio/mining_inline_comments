{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwNDM1Nzcy", "number": 4052, "title": "PLFM-6159 - Part A: Allows storing annotations (V2) for submissions", "bodyText": "", "createdAt": "2020-05-20T00:22:42Z", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4052", "merged": true, "mergeCommit": {"oid": "b82fde9c6d02c8103e74f0ca314486010cd8247d"}, "closed": true, "closedAt": "2020-05-27T00:47:37Z", "author": {"login": "marcomarasca"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABci-MXuABqjMzNTQyNDU4ODE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclOYQrgFqTQxODc3MTcxMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "31838dee3f38307e75fecfbd13a31615af2af6d8", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/31838dee3f38307e75fecfbd13a31615af2af6d8", "committedDate": "2020-05-20T00:16:58Z", "message": "PLFM-6159: Allows storing annotations v2 for submissions"}, "afterCommit": {"oid": "304efb418bede7afde6cf68d51f2f82ed5c3903f", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/304efb418bede7afde6cf68d51f2f82ed5c3903f", "committedDate": "2020-05-20T00:46:53Z", "message": "PLFM-6159: Allows storing annotations v2 for submissions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1f58cbc3ab866f751b642cbc1cd07f428a8ec30", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/b1f58cbc3ab866f751b642cbc1cd07f428a8ec30", "committedDate": "2020-05-20T01:57:48Z", "message": "Remove old migration code block"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ae1b7483d055692d4a87a522e59bd666091796b", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/6ae1b7483d055692d4a87a522e59bd666091796b", "committedDate": "2020-05-20T01:57:48Z", "message": "PLFM-6159: Rename view type EVALUTION_SUBMISSIONS to SUBMISSION"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "902ac1bf67ff94be37281374431c17673a6fbe22", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/902ac1bf67ff94be37281374431c17673a6fbe22", "committedDate": "2020-05-20T01:57:48Z", "message": "PLFM-6159: Allows storing annotations v2 for submissions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "304efb418bede7afde6cf68d51f2f82ed5c3903f", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/304efb418bede7afde6cf68d51f2f82ed5c3903f", "committedDate": "2020-05-20T00:46:53Z", "message": "PLFM-6159: Allows storing annotations v2 for submissions"}, "afterCommit": {"oid": "902ac1bf67ff94be37281374431c17673a6fbe22", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/902ac1bf67ff94be37281374431c17673a6fbe22", "committedDate": "2020-05-20T01:57:48Z", "message": "PLFM-6159: Allows storing annotations v2 for submissions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0b596a3d15aa6182946205b2d586229a2543359", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/a0b596a3d15aa6182946205b2d586229a2543359", "committedDate": "2020-05-20T02:47:47Z", "message": "Use a subset of workers for replication/reconciliation test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4ac31dc98f4d6aa9a81f8c57291577977981f78a", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/4ac31dc98f4d6aa9a81f8c57291577977981f78a", "committedDate": "2020-05-20T02:43:24Z", "message": "Use a subset of workers for replication/reconciliation test"}, "afterCommit": {"oid": "a0b596a3d15aa6182946205b2d586229a2543359", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/a0b596a3d15aa6182946205b2d586229a2543359", "committedDate": "2020-05-20T02:47:47Z", "message": "Use a subset of workers for replication/reconciliation test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb2ef08828d37614bb26cb54f17de210825d6384", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/eb2ef08828d37614bb26cb54f17de210825d6384", "committedDate": "2020-05-21T19:39:37Z", "message": "PLFM-6159: Avoid migrating previous submission annotations"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3cd5ecdb6eaa397fbe20811db282eb5388ecb22f", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/3cd5ecdb6eaa397fbe20811db282eb5388ecb22f", "committedDate": "2020-05-21T18:35:25Z", "message": "PLFM-6159: Avoid migrating previous submission annotations"}, "afterCommit": {"oid": "eb2ef08828d37614bb26cb54f17de210825d6384", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/eb2ef08828d37614bb26cb54f17de210825d6384", "committedDate": "2020-05-21T19:39:37Z", "message": "PLFM-6159: Avoid migrating previous submission annotations"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NzYzMTM3", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4052#pullrequestreview-418763137", "createdAt": "2020-05-27T00:20:21Z", "commit": {"oid": "eb2ef08828d37614bb26cb54f17de210825d6384"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwMDoyMDoyMlrOGa0izg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwMDoyMDoyMlrOGa0izg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDc3NzAzOA==", "bodyText": "any annotation data here will not be available for a view.", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4052#discussion_r430777038", "createdAt": "2020-05-27T00:20:22Z", "author": {"login": "john-hill"}, "path": "lib/lib-auto-generated/src/main/resources/schema/org/sagebionetworks/evaluation/model/SubmissionStatus.json", "diffHunk": "@@ -25,20 +25,26 @@\n \t\t},\n \t\t\"score\": {\n \t\t\t\"type\": \"number\",\n-\t\t\t\"description\": \"This field is deprecated and should not be used. Use the 'annotations' field instead.\",\n+\t\t\t\"description\": \"This field is deprecated and should not be used. Use the 'submissionAnnotations' field instead.\",\n \t\t\t\"transient\": true\n \t\t},\n \t\t\"report\": {\n \t\t\t\"type\": \"string\",\n-\t\t\t\"description\": \"This field is deprecated and should not be used. Use the 'annotations' field instead.\",\n+\t\t\t\"description\": \"This field is deprecated and should not be used. Use the 'submissionAnnotations' field instead.\",\n \t\t\t\"transient\": true\n \t\t},\n \t\t\"annotations\": {\n \t\t\t\"type\": \"object\",\n-\t\t\t\"description\": \"Annotations on this Submission. Each Annotation may be marked as private or public.\",\n+\t\t\t\"description\": \"This field is deprecated and should not be used. Use the 'submissionAnnotations' field instead.\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb2ef08828d37614bb26cb54f17de210825d6384"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NzY2NTg2", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4052#pullrequestreview-418766586", "createdAt": "2020-05-27T00:31:24Z", "commit": {"oid": "eb2ef08828d37614bb26cb54f17de210825d6384"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwMDozMToyNFrOGa0ukw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwMDozMToyNFrOGa0ukw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDc4MDA1MQ==", "bodyText": "dead code", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4052#discussion_r430780051", "createdAt": "2020-05-27T00:31:24Z", "author": {"login": "john-hill"}, "path": "lib/models/src/main/java/org/sagebionetworks/repo/model/annotation/v2/AnnotationsV2Translator.java", "diffHunk": "@@ -60,6 +67,82 @@ public static Annotations toAnnotationsV2(org.sagebionetworks.repo.model.Annotat\n \t\treturn annotationsV2;\n \t}\n \n+\tpublic static Annotations toAnnotationsV2(org.sagebionetworks.repo.model.annotation.Annotations annotations) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb2ef08828d37614bb26cb54f17de210825d6384"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NzY3MDgx", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4052#pullrequestreview-418767081", "createdAt": "2020-05-27T00:33:03Z", "commit": {"oid": "eb2ef08828d37614bb26cb54f17de210825d6384"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwMDozMzowM1rOGa0wQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwMDozMzowM1rOGa0wQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDc4MDQ4MQ==", "bodyText": "dead code", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4052#discussion_r430780481", "createdAt": "2020-05-27T00:33:03Z", "author": {"login": "john-hill"}, "path": "lib/models/src/test/java/org/sagebionetworks/repo/model/annotation/v2/AnnotationsV2TranslatorTest.java", "diffHunk": "@@ -231,5 +243,111 @@ public void testToAnnotationsV2_V1WithAnEmptyMap(){\n \t\tannotationsV2.getAnnotations().remove(stringKey2);\n \t\tassertEquals(annotationsV2, translated);\n \t}\n+\t\n+\t@Test\n+\tpublic void testToAnnotationsV2FromSubmissionAnnotations() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb2ef08828d37614bb26cb54f17de210825d6384"}, "originalPosition": 45}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NzcxNzEz", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4052#pullrequestreview-418771713", "createdAt": "2020-05-27T00:46:27Z", "commit": {"oid": "eb2ef08828d37614bb26cb54f17de210825d6384"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4719, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}