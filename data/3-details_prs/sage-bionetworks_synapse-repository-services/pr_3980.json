{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzOTIxMTQ1", "number": 3980, "title": "PLFM-6046", "bodyText": "", "createdAt": "2020-03-26T02:28:51Z", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/3980", "merged": true, "mergeCommit": {"oid": "172f5fb9b93f1b9e6b1be07268e0570cb29ed709"}, "closed": true, "closedAt": "2020-03-31T23:39:32Z", "author": {"login": "xschildw"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRQqKsAH2gAyMzkzOTIxMTQ1OjI4ZWJmMzkzOTNmOTkwNjQ5NDY5NzFmMTdlNjczMWQ4Y2M1YTRlZjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcTL1lwAFqTM4NTE3NTk2Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "28ebf39393f99064946971f17e6731d8cc5a4ef2", "author": {"user": {"login": "xschildw", "name": "Xavier Schildwachter"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/28ebf39393f99064946971f17e6731d8cc5a4ef2", "committedDate": "2020-03-26T00:07:20Z", "message": "Remove sendAfterCommit() calls"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyNDk2NTk1", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/3980#pullrequestreview-382496595", "createdAt": "2020-03-26T23:51:16Z", "commit": {"oid": "28ebf39393f99064946971f17e6731d8cc5a4ef2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMzo1MToxNlrOF8egwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMzo1MToxNlrOF8egwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODk1ODc4NA==", "bodyText": "We should not remove this, the WIKI object type has a SNS topic in the stack builder.", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/3980#discussion_r398958784", "createdAt": "2020-03-26T23:51:16Z", "author": {"login": "marcomarasca"}, "path": "lib/jdomodels/src/main/java/org/sagebionetworks/repo/model/dbo/wikiV2/V2DBOWikiPageDaoImpl.java", "diffHunk": "@@ -359,8 +359,6 @@ public V2WikiPage updateWikiPage(V2WikiPage wikiPage,\n \t\t\tbasicDao.createBatch(attachmentsToInsert);\n \t\t}\n \t\t\n-\t\t// Send the change message\n-\t\ttransactionalMessenger.sendMessageAfterCommit(newDbo, ChangeType.UPDATE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28ebf39393f99064946971f17e6731d8cc5a4ef2"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyNDk2NjY3", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/3980#pullrequestreview-382496667", "createdAt": "2020-03-26T23:51:28Z", "commit": {"oid": "28ebf39393f99064946971f17e6731d8cc5a4ef2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMzo1MToyOFrOF8eg_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMzo1MToyOFrOF8eg_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODk1ODg0NA==", "bodyText": "We should not remove this, the WIKI object type has a SNS topic in the stack builder.", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/3980#discussion_r398958844", "createdAt": "2020-03-26T23:51:28Z", "author": {"login": "marcomarasca"}, "path": "lib/jdomodels/src/test/java/org/sagebionetworks/repo/model/dbo/dao/DBOActivityDAOImplTest.java", "diffHunk": "@@ -92,7 +92,6 @@ public void testLockActivityAndIncrementEtag() throws Exception {\n \t\t\n \t\tChangeType type = ChangeType.UPDATE;\n \t\tString returnedNewEtag = activityDao.lockActivityAndGenerateEtag(id.toString(), oldEtag, type);\n-\t\tverify(mockMessenger).sendMessageAfterCommit(eq(mockDbo), eq(type));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28ebf39393f99064946971f17e6731d8cc5a4ef2"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyNDk3NTA5", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/3980#pullrequestreview-382497509", "createdAt": "2020-03-26T23:53:44Z", "commit": {"oid": "28ebf39393f99064946971f17e6731d8cc5a4ef2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyNDk4NzIx", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/3980#pullrequestreview-382498721", "createdAt": "2020-03-26T23:57:20Z", "commit": {"oid": "28ebf39393f99064946971f17e6731d8cc5a4ef2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMzo1NzoyMFrOF8eoMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMzo1NzoyMFrOF8eoMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODk2MDY4OA==", "bodyText": "We should also remove the message that is sent when deleting the activity", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/3980#discussion_r398960688", "createdAt": "2020-03-26T23:57:20Z", "author": {"login": "marcomarasca"}, "path": "lib/jdomodels/src/main/java/org/sagebionetworks/repo/model/dbo/dao/DBOActivityDAOImpl.java", "diffHunk": "@@ -136,7 +135,6 @@ public String lockActivityAndGenerateEtag(String id, String eTag, ChangeType cha\n \t\t// Get a new etag\n \t\tDBOActivity dbo = getDBO(id);\n \t\tdbo.seteTag(UUID.randomUUID().toString());\n-\t\ttransactionalMessenger.sendMessageAfterCommit(dbo, changeType);\n \t\treturn dbo.getEtag();\n \t}\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28ebf39393f99064946971f17e6731d8cc5a4ef2"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7792405be9319e58884aeeffd72262f549940c2c", "author": {"user": {"login": "xschildw", "name": "Xavier Schildwachter"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/7792405be9319e58884aeeffd72262f549940c2c", "committedDate": "2020-03-27T07:45:55Z", "message": "Fix the mess..."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5d5bf423d0fed30c2b47f580616d5c316721f28", "author": {"user": {"login": "xschildw", "name": "Xavier Schildwachter"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/d5d5bf423d0fed30c2b47f580616d5c316721f28", "committedDate": "2020-03-29T19:08:40Z", "message": "More cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9df07cc736bcb8a97183a83caef8548e168693af", "author": {"user": {"login": "xschildw", "name": "Xavier Schildwachter"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/9df07cc736bcb8a97183a83caef8548e168693af", "committedDate": "2020-03-29T19:18:00Z", "message": "Merge branch 'develop' into dev-plfm-6046"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1MTc1OTYy", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/3980#pullrequestreview-385175962", "createdAt": "2020-03-31T23:38:08Z", "commit": {"oid": "9df07cc736bcb8a97183a83caef8548e168693af"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4836, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}