{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3Njc2OTc3", "number": 4044, "title": "PLFM-6158 - Final Refactoring", "bodyText": "", "createdAt": "2020-05-14T00:08:14Z", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4044", "merged": true, "mergeCommit": {"oid": "79342a5a4814ad73163a53885e4718e5cfdd7a2d"}, "closed": true, "closedAt": "2020-05-15T00:43:32Z", "author": {"login": "marcomarasca"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcg9teGAH2gAyNDE3Njc2OTc3Ojk1NmMzMmFkZTVkYjU2N2RkMmE4ZTk4ZjdiYmQzNWU4NmI5MDBjNzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABchXJANAFqTQxMjI3NjIxNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "956c32ade5db567dd2a8e98f7bbd35e86b900c74", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/956c32ade5db567dd2a8e98f7bbd35e86b900c74", "committedDate": "2020-05-13T19:05:32Z", "message": "PLFM-6158: Move the replication manager"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b3e69294984bfe2d945a7e4eb8de8416a6a97b9", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/1b3e69294984bfe2d945a7e4eb8de8416a6a97b9", "committedDate": "2020-05-13T19:05:32Z", "message": "PLFM-6158: Move replication workers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aaff1f1db50d7f605a8d925a6d57287dc96d1a78", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/aaff1f1db50d7f605a8d925a6d57287dc96d1a78", "committedDate": "2020-05-13T19:05:33Z", "message": "PLFM-6158: Table index manager refactored"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6b726c98c9adbd3d3d61512a371f11f7f6a7b67", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/c6b726c98c9adbd3d3d61512a371f11f7f6a7b67", "committedDate": "2020-05-13T19:05:33Z", "message": "PLFM-6158: RowMetadataColumnTranslationReference uses integer for benefactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac6dfec6d4091ee5747eea7a9b9a45609901f5e9", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/ac6dfec6d4091ee5747eea7a9b9a45609901f5e9", "committedDate": "2020-05-13T19:05:33Z", "message": "PLFM-6158: Push view containers computation to provider"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a38bb328b76a53206bf8ae44bfd7202547672003", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/a38bb328b76a53206bf8ae44bfd7202547672003", "committedDate": "2020-05-13T19:05:33Z", "message": "PLFM-6158: Push object data fetching to metadata index provider"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d8aa1cd81f109d323161552572a0150cdbae1ff", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/1d8aa1cd81f109d323161552572a0150cdbae1ff", "committedDate": "2020-05-13T19:05:34Z", "message": "Validate the view id when updating from a row set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48e163e7452b4c1e03e49e9ecdc5e2da7a79f073", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/48e163e7452b4c1e03e49e9ecdc5e2da7a79f073", "committedDate": "2020-05-13T19:05:34Z", "message": "PLFM-6158: Push annotation get/set to metadata index provider"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5d28d5fb2919cb1570ec78cd09562417ce26512", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/c5d28d5fb2919cb1570ec78cd09562417ce26512", "committedDate": "2020-05-13T19:05:34Z", "message": "Fix for circular dependency injection issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd2956e537df7a63bfb95cf9ab207e93fc1ffff5", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/bd2956e537df7a63bfb95cf9ab207e93fc1ffff5", "committedDate": "2020-05-13T19:05:34Z", "message": "PLFM-6158: Push CRC and default columns to metadata index provider"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d8064181bda5121c134e8f3ee4efb7e319b5b55", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/8d8064181bda5121c134e8f3ee4efb7e319b5b55", "committedDate": "2020-05-13T19:05:34Z", "message": "Remove unused method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ccb9315955b259c9a60fd581cb38a075e6da7014", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/ccb9315955b259c9a60fd581cb38a075e6da7014", "committedDate": "2020-05-13T19:05:35Z", "message": "PLFM-6158: Default column model for views refactored"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "626bc993dca1dc03f8210d2858092a69e6e66ca2", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/626bc993dca1dc03f8210d2858092a69e6e66ca2", "committedDate": "2020-05-13T19:05:35Z", "message": "PLFM-6158: Remove deprecated method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13fbc1d83edc4b3c6194e101cb2f103929ee1d3e", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/13fbc1d83edc4b3c6194e101cb2f103929ee1d3e", "committedDate": "2020-05-13T22:17:33Z", "message": "PLFM-6158: Reconciliation logic moved to the manager and switch to provider"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7bbc0cc3ec9d25722150970af9d56398cc0038d", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/e7bbc0cc3ec9d25722150970af9d56398cc0038d", "committedDate": "2020-05-13T22:23:47Z", "message": "PLFM-6158: Removed deprecated methods"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36bcd82636fe856711b237227b17ac7a85d758af", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/36bcd82636fe856711b237227b17ac7a85d758af", "committedDate": "2020-05-13T23:06:19Z", "message": "PLFM-6158: Use a bind variable for subtype filtering"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c8641e57638418bbc3d5bf5629c835ee110ae41", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/4c8641e57638418bbc3d5bf5629c835ee110ae41", "committedDate": "2020-05-13T23:22:00Z", "message": "PLFM-6158: Query row level filtering benefactor type supplied by the provider"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "702267bd751a5e0d03a11425592f53da93b24c14", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/702267bd751a5e0d03a11425592f53da93b24c14", "committedDate": "2020-05-14T23:18:20Z", "message": "PLFM-6158: Temporarily move replication under the old package"}, "afterCommit": {"oid": "4c8641e57638418bbc3d5bf5629c835ee110ae41", "author": {"user": {"login": "marcomarasca", "name": "Marco Marasca"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/4c8641e57638418bbc3d5bf5629c835ee110ae41", "committedDate": "2020-05-13T23:22:00Z", "message": "PLFM-6158: Query row level filtering benefactor type supplied by the provider"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyMjY1MTYy", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4044#pullrequestreview-412265162", "createdAt": "2020-05-15T00:08:43Z", "commit": {"oid": "4c8641e57638418bbc3d5bf5629c835ee110ae41"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwMDowODo0M1rOGVyN-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwMDowODo0M1rOGVyN-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ5NjA1Nw==", "bodyText": "remove AuthorizationManger to break the cycle.", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4044#discussion_r425496057", "createdAt": "2020-05-15T00:08:43Z", "author": {"login": "john-hill"}, "path": "services/repository-managers/src/main/java/org/sagebionetworks/repo/manager/table/metadata/MetadataIndexProviderFactoryImpl.java", "diffHunk": "@@ -15,9 +15,29 @@\n public class MetadataIndexProviderFactoryImpl implements MetadataIndexProviderFactory {\r\n \r\n \tprivate Map<ViewObjectType, MetadataIndexProvider> providersMap;\r\n-\r\n+\t\r\n+\t// We use setter injection here since we have a circular dependency:\r\n+\t//\r\n+\t// NodeManager -> AuthorizationManager -> FileHandleAssociationManager -> \r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c8641e57638418bbc3d5bf5629c835ee110ae41"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyMjczNjI3", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4044#pullrequestreview-412273627", "createdAt": "2020-05-15T00:35:01Z", "commit": {"oid": "4c8641e57638418bbc3d5bf5629c835ee110ae41"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwMDozNTowMVrOGVyqLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwMDozNTowMVrOGVyqLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTUwMzI3OA==", "bodyText": "Does this work? Maybe....Will write an integration test.", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4044#discussion_r425503278", "createdAt": "2020-05-15T00:35:01Z", "author": {"login": "john-hill"}, "path": "services/repository/src/main/java/org/sagebionetworks/repo/web/controller/TableController.java", "diffHunk": "@@ -398,12 +399,13 @@ PaginatedColumnModels listColumnModels(\n \t@RequestMapping(value = UrlHelpers.COLUMN_TABLE_VIEW_DEFAULT_TYPE, method = RequestMethod.GET)\r\n \tpublic @ResponseBody\r\n \tListWrapper<ColumnModel> getDefaultColumnsForViewType(\r\n-\t\t\t@PathVariable String viewtype)\r\n+\t\t\t@PathVariable String viewtype,\r\n+\t\t\t@RequestParam(value = \"objectType\", required = false, defaultValue = \"ENTITY\") ViewObjectType objectType)\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c8641e57638418bbc3d5bf5629c835ee110ae41"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyMjc2MjE3", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4044#pullrequestreview-412276217", "createdAt": "2020-05-15T00:43:14Z", "commit": {"oid": "4c8641e57638418bbc3d5bf5629c835ee110ae41"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4710, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}