{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3Njg4NTA2", "number": 4045, "title": "Plfm 6161 f", "bodyText": "", "createdAt": "2020-05-14T00:53:34Z", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4045", "merged": true, "mergeCommit": {"oid": "cda34f5bd49c972b8a330d224c5fc19468762814"}, "closed": true, "closedAt": "2020-05-14T20:01:37Z", "author": {"login": "john-hill"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcg9IUKgH2gAyNDE3Njg4NTA2OjUxMmQyOTQyZGViOGFjZjY5Y2MyNWI5MTQ0MzE4ODQxZGE2MTJlM2Y=", "endCursor": "Y3Vyc29yOnYyOpPPAAABchTG0xAFqTQxMjEyMjY1Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "512d2942deb8acf69cc25b9144318841da612e3f", "author": {"user": {"login": "john-hill", "name": "John Hill"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/512d2942deb8acf69cc25b9144318841da612e3f", "committedDate": "2020-05-13T18:24:57Z", "message": "only root schemas can have  value"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a594867e799411e2673c4b244d7d916db5145808", "author": {"user": {"login": "john-hill", "name": "John Hill"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/a594867e799411e2673c4b244d7d916db5145808", "committedDate": "2020-05-13T19:42:43Z", "message": "added const and enum"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dbd1bb5adc92db2a783bd710ebaf98526eb77f55", "author": {"user": {"login": "john-hill", "name": "John Hill"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/dbd1bb5adc92db2a783bd710ebaf98526eb77f55", "committedDate": "2020-05-14T00:52:08Z", "message": "fixed duplicated bootstrap schemas, added integration test fothe main use case, refactored delimiter and now return  with schema version info"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23151c49d5e2a72ffb933c4b7ae6bfd30e1bf5b8", "author": {"user": {"login": "john-hill", "name": "John Hill"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/23151c49d5e2a72ffb933c4b7ae6bfd30e1bf5b8", "committedDate": "2020-05-14T00:55:27Z", "message": "merged develop"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyMTIyNjU2", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4045#pullrequestreview-412122656", "createdAt": "2020-05-14T19:34:00Z", "commit": {"oid": "23151c49d5e2a72ffb933c4b7ae6bfd30e1bf5b8"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxOTozNDowMFrOGVrQkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQyMDowMDo1OVrOGVsJSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM4MjAzMg==", "bodyText": "Let us add a unit test", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4045#discussion_r425382032", "createdAt": "2020-05-14T19:34:00Z", "author": {"login": "marcomarasca"}, "path": "services/repository-managers/src/main/java/org/sagebionetworks/repo/manager/schema/JsonSchemaManagerImpl.java", "diffHunk": "@@ -366,5 +368,59 @@ public ListJsonSchemaVersionInfoResponse listSchemaVersions(ListJsonSchemaVersio\n \t\tresponse.setNextPageToken(nextPageToken.getNextPageTokenForCurrentResults(page));\n \t\treturn response;\n \t}\n+\t\n+\t/**\n+\n+\t * \n+\t * @param id\n+\t * @return\n+\t */\n+\t@Override\n+\tpublic JsonSchema getValidationSchema(String id) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23151c49d5e2a72ffb933c4b7ae6bfd30e1bf5b8"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM5MzA2OA==", "bodyText": "We might want to add an additional integration test where we have a similar hierarchy but additionally we have a \"loop\" of $ref, for example here we could add a property named dogFriends that are of type pets.Dog.", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4045#discussion_r425393068", "createdAt": "2020-05-14T19:54:35Z", "author": {"login": "marcomarasca"}, "path": "services/workers/src/test/resources/pets/Cat.json", "diffHunk": "@@ -0,0 +1,15 @@\n+{\n+\t\"title\": \"Cat\",\n+\t\"$id\": \"my.organization/pets.cat.Cat\",\n+\t\"description\": \"...\",\n+\t\"allOf\": [\n+\t\t{\n+\t\t\t\"$ref\": \"my.organization/pets.Pet\"\n+\t\t}\n+\t],\n+\t\"properties\": {\n+\t\t\"breed\": {\n+\t\t\t\"$ref\": \"my.organization/pets.cat.Breed\"\n+\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23151c49d5e2a72ffb933c4b7ae6bfd30e1bf5b8"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM5NjU1Mw==", "bodyText": "Consider renaming the class from SchemaTranslatorImp -> SchemaTranslatorImpl", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4045#discussion_r425396553", "createdAt": "2020-05-14T20:00:59Z", "author": {"login": "marcomarasca"}, "path": "services/repository-managers/src/main/java/org/sagebionetworks/repo/manager/schema/SchemaTranslatorImp.java", "diffHunk": "@@ -33,7 +34,7 @@\n \t@Override\n \tpublic ObjectSchemaImpl loadSchemaFromClasspath(String id) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23151c49d5e2a72ffb933c4b7ae6bfd30e1bf5b8"}, "originalPosition": 10}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4713, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}