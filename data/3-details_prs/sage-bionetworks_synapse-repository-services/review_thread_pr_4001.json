{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzNTQ0MDY2", "number": 4001, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQyMzoyNzo0OFrODytfCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQyMzozMjoyM1rODyti1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0NTAwNjE3OnYy", "diffSide": "RIGHT", "path": "lib/lib-table-cluster/src/main/java/org/sagebionetworks/table/cluster/TableIndexDAOImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQyMzoyNzo0OFrOGG6riw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQyMzoyNzo0OFrOGG6riw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTkwNjA1OQ==", "bodyText": "alterTemp=false;", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4001#discussion_r409906059", "createdAt": "2020-04-16T23:27:48Z", "author": {"login": "john-hill"}, "path": "lib/lib-table-cluster/src/main/java/org/sagebionetworks/table/cluster/TableIndexDAOImpl.java", "diffHunk": "@@ -165,7 +165,7 @@ private static TransactionTemplate createTransactionTemplate(DataSourceTransacti\n \r\n \t@Override\r\n \tpublic void deleteTable(IdAndVersion tableId) {\r\n-\t\tdeleteMultiValueTablesForTable(tableId);\r\n+\t\tdeleteMultiValueTablesForTable(tableId, false);\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffc9f59973c46b140307d4848babdc71ad4794b2"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0NTAwNjc5OnYy", "diffSide": "RIGHT", "path": "lib/lib-table-cluster/src/main/java/org/sagebionetworks/table/cluster/TableIndexDAOImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQyMzoyODowNlrOGG6r5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQyMzoyODowNlrOGG6r5g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTkwNjE1MA==", "bodyText": "alterTemp=false", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4001#discussion_r409906150", "createdAt": "2020-04-16T23:28:06Z", "author": {"login": "john-hill"}, "path": "lib/lib-table-cluster/src/main/java/org/sagebionetworks/table/cluster/TableIndexDAOImpl.java", "diffHunk": "@@ -446,32 +447,32 @@ public boolean alterTableAsNeeded(IdAndVersion tableId, List<ColumnChangeDetails\n \r\n \t@Override\r\n \tpublic Set<Long> getMultivalueColumnIndexTableColumnIds(IdAndVersion tableId){\r\n-\t\treturn getMultivalueColumnIndexTableNames(tableId)\r\n+\t\treturn getMultivalueColumnIndexTableNames(tableId, false)\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffc9f59973c46b140307d4848babdc71ad4794b2"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0NTAxNDM4OnYy", "diffSide": "RIGHT", "path": "services/repository-managers/src/main/java/org/sagebionetworks/repo/manager/table/TableIndexManagerImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQyMzozMTozOVrOGG6wZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQyMzozMTozOVrOGG6wZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTkwNzMwMQ==", "bodyText": "altertemp=false", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4001#discussion_r409907301", "createdAt": "2020-04-16T23:31:39Z", "author": {"login": "john-hill"}, "path": "services/repository-managers/src/main/java/org/sagebionetworks/repo/manager/table/TableIndexManagerImpl.java", "diffHunk": "@@ -111,7 +111,7 @@ public void applyChangeSetToIndex(final IdAndVersion tableId, final SparseChange\n \t\t\t\t\t\t\t//once all changes to main table are applied, populate the list-type columns with the changes.\r\n \t\t\t\t\t\t\tfor(ListColumnRowChanges listColumnChange : rowset.groupListColumnChanges()){\r\n \t\t\t\t\t\t\t\ttableIndexDao.deleteFromListColumnIndexTable(tableId, listColumnChange.getColumnModel(), listColumnChange.getRowIds());\r\n-\t\t\t\t\t\t\t\ttableIndexDao.populateListColumnIndexTable(tableId, listColumnChange.getColumnModel(), listColumnChange.getRowIds());\r\n+\t\t\t\t\t\t\t\ttableIndexDao.populateListColumnIndexTable(tableId, listColumnChange.getColumnModel(), listColumnChange.getRowIds(), false);\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffc9f59973c46b140307d4848babdc71ad4794b2"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0NTAxNTkwOnYy", "diffSide": "RIGHT", "path": "services/repository-managers/src/main/java/org/sagebionetworks/repo/manager/table/TableIndexManagerImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQyMzozMjoyM1rOGG6xQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQyMzozMjoyM1rOGG6xQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTkwNzUyMA==", "bodyText": "alterTemp=false", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4001#discussion_r409907520", "createdAt": "2020-04-16T23:32:23Z", "author": {"login": "john-hill"}, "path": "services/repository-managers/src/main/java/org/sagebionetworks/repo/manager/table/TableIndexManagerImpl.java", "diffHunk": "@@ -354,26 +356,30 @@ public void populateListColumnIndexTables(final IdAndVersion tableIdAndVersion,\n \t\tValidateArgument.required(schema, \"schema\");\r\n \t\tfor(ColumnModel column: schema) {\r\n \t\t\tif (ColumnTypeListMappings.isList(column.getColumnType())) {\r\n-\t\t\t\ttableIndexDao.populateListColumnIndexTable(tableIdAndVersion, column, rowIds);\r\n+\t\t\t\ttableIndexDao.populateListColumnIndexTable(tableIdAndVersion, column, rowIds, false);\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ffc9f59973c46b140307d4848babdc71ad4794b2"}, "originalPosition": 61}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3175, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}