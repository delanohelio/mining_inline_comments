{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQzMTY0NDc4", "number": 4119, "title": "Plfm 6325", "bodyText": "", "createdAt": "2020-07-02T01:47:01Z", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4119", "merged": true, "mergeCommit": {"oid": "37018d42e5b2c7e8ebaec32803922fa6f85a9ff8"}, "closed": true, "closedAt": "2020-07-03T01:34:26Z", "author": {"login": "john-hill"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcvM9figH2gAyNDQzMTY0NDc4OjdjYjlkOGIzYmU3NDQ2YmJlYWVkYWFkZTljYjA4ZjA4MGI1M2FlZjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcxIv2ygFqTQ0MjA4NDE0Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7cb9d8b3be7446bbeaedaade9cb08f080b53aef9", "author": {"user": {"login": "john-hill", "name": "John Hill"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/7cb9d8b3be7446bbeaedaade9cb08f080b53aef9", "committedDate": "2020-06-27T00:46:33Z", "message": "positive and negative validation of main use cases schemas"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8f93a3e2e16b19d6d4eef5ab5818f8d912a13bd", "author": {"user": {"login": "john-hill", "name": "John Hill"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/d8f93a3e2e16b19d6d4eef5ab5818f8d912a13bd", "committedDate": "2020-06-29T20:21:53Z", "message": "modify loaded json for failure case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c37bcd66e3f020052dba97bfcb6e6cafc6a606e", "author": {"user": {"login": "john-hill", "name": "John Hill"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/8c37bcd66e3f020052dba97bfcb6e6cafc6a606e", "committedDate": "2020-07-01T01:59:19Z", "message": "created validation results with a simple first test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aacf9b633355c16ccb49b7d88f65c65a3f860357", "author": {"user": {"login": "john-hill", "name": "John Hill"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/aacf9b633355c16ccb49b7d88f65c65a3f860357", "committedDate": "2020-07-02T01:43:18Z", "message": "added validation results and validation layer of abstraction"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "552a34b5277f3342595a7e0bc3825c0445f2446d", "author": {"user": {"login": "john-hill", "name": "John Hill"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/552a34b5277f3342595a7e0bc3825c0445f2446d", "committedDate": "2020-07-02T01:52:36Z", "message": "test cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd7e79b261c46e08deaee005af1414074607422d", "author": {"user": {"login": "john-hill", "name": "John Hill"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/bd7e79b261c46e08deaee005af1414074607422d", "committedDate": "2020-07-02T18:39:06Z", "message": "Merge branch 'develop' into PLFM-6325"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d300a45838f387ef023d650599032643e81781d0", "author": {"user": {"login": "john-hill", "name": "John Hill"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/d300a45838f387ef023d650599032643e81781d0", "committedDate": "2020-07-02T20:14:35Z", "message": "force maven to use our modified version of json.org"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMDgwOTk0", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4119#pullrequestreview-442080994", "createdAt": "2020-07-03T00:14:43Z", "commit": {"oid": "d300a45838f387ef023d650599032643e81781d0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwMDoxNDo0NFrOGsgO0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwMDoxNDo0NFrOGsgO0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTMxODYxMA==", "bodyText": "Please add the exclusion block on the conflicting org.json dependency so we are sure that it's not added to the classpath.", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4119#discussion_r449318610", "createdAt": "2020-07-03T00:14:44Z", "author": {"login": "marcomarasca"}, "path": "services/repository-managers/pom.xml", "diffHunk": "@@ -58,7 +59,17 @@\n \t\t\t<groupId>org.sagebionetworks</groupId>\r\n \t\t\t<artifactId>simple-http-client</artifactId>\r\n \t\t</dependency>\r\n-\r\n+\t\t<!-- Force maven to use our modified version of json.org by including it \r\n+\t\t\tbefore com.github.everit-org.json-schema which also depends on it. -->\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>org.json</groupId>\r\n+\t\t\t<artifactId>JSON-Java</artifactId>\r\n+\t\t</dependency>\r\n+\t\t<!-- JSON schema validation library -->\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>com.github.everit-org.json-schema</groupId>\r\n+\t\t\t<artifactId>org.everit.json.schema</artifactId>\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d300a45838f387ef023d650599032643e81781d0"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9d12b4b941424ec92367ce52584cc1e42a6a88f", "author": {"user": {"login": "john-hill", "name": "John Hill"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/c9d12b4b941424ec92367ce52584cc1e42a6a88f", "committedDate": "2020-07-03T00:28:56Z", "message": "exclude json.org transative dependency"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMDg0MTQz", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4119#pullrequestreview-442084143", "createdAt": "2020-07-03T00:28:16Z", "commit": {"oid": "d300a45838f387ef023d650599032643e81781d0"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwMDoyODoxNlrOGsgaQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwMDo1NDowNVrOGsgtsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTMyMTUzNg==", "bodyText": "This might potentially be added to the root pom.xml in the dependency management section", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4119#discussion_r449321536", "createdAt": "2020-07-03T00:28:16Z", "author": {"login": "marcomarasca"}, "path": "services/repository-managers/pom.xml", "diffHunk": "@@ -58,7 +59,17 @@\n \t\t\t<groupId>org.sagebionetworks</groupId>\r\n \t\t\t<artifactId>simple-http-client</artifactId>\r\n \t\t</dependency>\r\n-\r\n+\t\t<!-- Force maven to use our modified version of json.org by including it \r\n+\t\t\tbefore com.github.everit-org.json-schema which also depends on it. -->\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>org.json</groupId>\r\n+\t\t\t<artifactId>JSON-Java</artifactId>\r\n+\t\t</dependency>\r\n+\t\t<!-- JSON schema validation library -->\r\n+\t\t<dependency>\r\n+\t\t\t<groupId>com.github.everit-org.json-schema</groupId>\r\n+\t\t\t<artifactId>org.everit.json.schema</artifactId>\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTMxODYxMA=="}, "originalCommit": {"oid": "d300a45838f387ef023d650599032643e81781d0"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTMyNjUxMg==", "bodyText": "Could you renamed the class to SchemaTranslatorImpl.java", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/4119#discussion_r449326512", "createdAt": "2020-07-03T00:54:05Z", "author": {"login": "marcomarasca"}, "path": "services/repository-managers/src/main/java/org/sagebionetworks/repo/manager/schema/SchemaTranslatorImp.java", "diffHunk": "@@ -177,15 +177,17 @@ JsonSchema translate(ObjectSchema objectSchema, boolean isRoot) {\n \n \tvoid translateConcreteType(ObjectSchema objectSchema, JsonSchema jsonSchema) {\n \t\tif(objectSchema.getType() == null || TYPE.OBJECT.equals(objectSchema.getType())) {\n-\t\t\tMap<String, JsonSchema> properties = jsonSchema.getProperties();\n-\t\t\tif(properties == null) {\n-\t\t\t\tproperties = new LinkedHashMap<String, JsonSchema>(1);\n+\t\t\tif(objectSchema.getId() != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9d12b4b941424ec92367ce52584cc1e42a6a88f"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4569, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}