{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzOTIxMTQ1", "number": 3980, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMzo1MToxNlrODr4BIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMzo1NzoyMFrODr4F0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3MzMzMTUzOnYy", "diffSide": "LEFT", "path": "lib/jdomodels/src/main/java/org/sagebionetworks/repo/model/dbo/wikiV2/V2DBOWikiPageDaoImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMzo1MToxNlrOF8egwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMzo1MToxNlrOF8egwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODk1ODc4NA==", "bodyText": "We should not remove this, the WIKI object type has a SNS topic in the stack builder.", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/3980#discussion_r398958784", "createdAt": "2020-03-26T23:51:16Z", "author": {"login": "marcomarasca"}, "path": "lib/jdomodels/src/main/java/org/sagebionetworks/repo/model/dbo/wikiV2/V2DBOWikiPageDaoImpl.java", "diffHunk": "@@ -359,8 +359,6 @@ public V2WikiPage updateWikiPage(V2WikiPage wikiPage,\n \t\t\tbasicDao.createBatch(attachmentsToInsert);\n \t\t}\n \t\t\n-\t\t// Send the change message\n-\t\ttransactionalMessenger.sendMessageAfterCommit(newDbo, ChangeType.UPDATE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28ebf39393f99064946971f17e6731d8cc5a4ef2"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3MzMzMTgzOnYy", "diffSide": "LEFT", "path": "lib/jdomodels/src/test/java/org/sagebionetworks/repo/model/dbo/dao/DBOActivityDAOImplTest.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMzo1MToyOFrOF8eg_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QyMDoxNDowNVrOF9AdZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODk1ODg0NA==", "bodyText": "We should not remove this, the WIKI object type has a SNS topic in the stack builder.", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/3980#discussion_r398958844", "createdAt": "2020-03-26T23:51:28Z", "author": {"login": "marcomarasca"}, "path": "lib/jdomodels/src/test/java/org/sagebionetworks/repo/model/dbo/dao/DBOActivityDAOImplTest.java", "diffHunk": "@@ -92,7 +92,6 @@ public void testLockActivityAndIncrementEtag() throws Exception {\n \t\t\n \t\tChangeType type = ChangeType.UPDATE;\n \t\tString returnedNewEtag = activityDao.lockActivityAndGenerateEtag(id.toString(), oldEtag, type);\n-\t\tverify(mockMessenger).sendMessageAfterCommit(eq(mockDbo), eq(type));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28ebf39393f99064946971f17e6731d8cc5a4ef2"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTA4MzcxMQ==", "bodyText": "This one still needed (activity)", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/3980#discussion_r399083711", "createdAt": "2020-03-27T07:44:59Z", "author": {"login": "xschildw"}, "path": "lib/jdomodels/src/test/java/org/sagebionetworks/repo/model/dbo/dao/DBOActivityDAOImplTest.java", "diffHunk": "@@ -92,7 +92,6 @@ public void testLockActivityAndIncrementEtag() throws Exception {\n \t\t\n \t\tChangeType type = ChangeType.UPDATE;\n \t\tString returnedNewEtag = activityDao.lockActivityAndGenerateEtag(id.toString(), oldEtag, type);\n-\t\tverify(mockMessenger).sendMessageAfterCommit(eq(mockDbo), eq(type));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODk1ODg0NA=="}, "originalCommit": {"oid": "28ebf39393f99064946971f17e6731d8cc5a4ef2"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTUxNDk4MA==", "bodyText": "Right, wrong class :)", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/3980#discussion_r399514980", "createdAt": "2020-03-27T20:14:05Z", "author": {"login": "marcomarasca"}, "path": "lib/jdomodels/src/test/java/org/sagebionetworks/repo/model/dbo/dao/DBOActivityDAOImplTest.java", "diffHunk": "@@ -92,7 +92,6 @@ public void testLockActivityAndIncrementEtag() throws Exception {\n \t\t\n \t\tChangeType type = ChangeType.UPDATE;\n \t\tString returnedNewEtag = activityDao.lockActivityAndGenerateEtag(id.toString(), oldEtag, type);\n-\t\tverify(mockMessenger).sendMessageAfterCommit(eq(mockDbo), eq(type));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODk1ODg0NA=="}, "originalCommit": {"oid": "28ebf39393f99064946971f17e6731d8cc5a4ef2"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3MzM0MzU1OnYy", "diffSide": "RIGHT", "path": "lib/jdomodels/src/main/java/org/sagebionetworks/repo/model/dbo/dao/DBOActivityDAOImpl.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMzo1NzoyMFrOF8eoMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMzo1NzoyMFrOF8eoMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODk2MDY4OA==", "bodyText": "We should also remove the message that is sent when deleting the activity", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/3980#discussion_r398960688", "createdAt": "2020-03-26T23:57:20Z", "author": {"login": "marcomarasca"}, "path": "lib/jdomodels/src/main/java/org/sagebionetworks/repo/model/dbo/dao/DBOActivityDAOImpl.java", "diffHunk": "@@ -136,7 +135,6 @@ public String lockActivityAndGenerateEtag(String id, String eTag, ChangeType cha\n \t\t// Get a new etag\n \t\tDBOActivity dbo = getDBO(id);\n \t\tdbo.seteTag(UUID.randomUUID().toString());\n-\t\ttransactionalMessenger.sendMessageAfterCommit(dbo, changeType);\n \t\treturn dbo.getEtag();\n \t}\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "28ebf39393f99064946971f17e6731d8cc5a4ef2"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3153, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}