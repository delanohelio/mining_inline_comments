{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcxNjUzMzc4", "number": 3930, "title": "PLFM-6006 STS Upload Restrictions (CR responses)", "bodyText": "Code review responses for\n\nhttps://sagebionetworks.jira.com/browse/PLFM-6005 STS Permissions Restrictions\nhttps://sagebionetworks.jira.com/browse/PLFM-6006 STS Upload Restrictions\n\nSee also previous pull request #3916", "createdAt": "2020-02-06T00:35:19Z", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/3930", "merged": true, "mergeCommit": {"oid": "01e0f7029641cfb43d7c255b16d563436099d6a1"}, "closed": true, "closedAt": "2020-02-11T00:19:01Z", "author": {"login": "DwayneJengSage"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcBfGywgH2gAyMzcxNjUzMzc4OmQwZGI2N2I5NGU1NmZjODJmZjMzZjAzOTUwMDg1YWY4ZTY5OGIwYzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDGc8bAFqTM1NjM1NzIzOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d0db67b94e56fc82ff33f03950085af8e698b0c7", "author": {"user": {"login": "DwayneJengSage", "name": "Dwayne Jeng"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/d0db67b94e56fc82ff33f03950085af8e698b0c7", "committedDate": "2020-02-05T23:54:29Z", "message": "PLFM-6006 STS Upload Restrictions (CR responses)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "accd235638d1a75b00444bf1a7d0650719eef75b", "author": {"user": {"login": "DwayneJengSage", "name": "Dwayne Jeng"}}, "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/commit/accd235638d1a75b00444bf1a7d0650719eef75b", "committedDate": "2020-02-06T00:10:15Z", "message": "Merge branch 'develop' of https://github.com/Sage-Bionetworks/Synapse-Repository-Services into plfm-6005\n\nConflicts:\n\tservices/repository-managers/src/main/java/org/sagebionetworks/repo/manager/ProjectSettingsManagerImpl.java\n\tservices/repository-managers/src/test/java/org/sagebionetworks/repo/manager/ProjectSettingsImplAutowiredTest.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2MzUzNTcx", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/3930#pullrequestreview-356353571", "createdAt": "2020-02-11T00:07:47Z", "commit": {"oid": "accd235638d1a75b00444bf1a7d0650719eef75b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQwMDowNzo0N1rOFn6FMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQwMDowNzo0N1rOFn6FMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzM5MDM4Ng==", "bodyText": "believe need to check message separately.", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/3930#discussion_r377390386", "createdAt": "2020-02-11T00:07:47Z", "author": {"login": "john-hill"}, "path": "services/repository-managers/src/test/java/org/sagebionetworks/repo/manager/ProjectSettingsImplAutowiredTest.java", "diffHunk": "@@ -258,45 +269,32 @@ public void testValidExternalObjectStorageSettingWithSlashes() throws IOExceptio\n \t}\n \n \t@Test\n-\tpublic void testExternalObjectStorageSettingInvalidBucket() throws IOException {\n+\tpublic void testExternalObjectStorageSettingInvalidBucket() {\n \t\tExternalObjectStorageLocationSetting externalObjectStorageSetting = new ExternalObjectStorageLocationSetting();\n \t\texternalObjectStorageSetting.setBucket(\" \");\n \t\texternalObjectStorageSetting.setEndpointUrl(\"https://www.someurl.com\");\n-\t\t\n-\t\tIllegalArgumentException ex = assertThrows(IllegalArgumentException.class, () -> {\n-\t\t\t//call under test\n-\t\t\tprojectSettingsManager.createStorageLocationSetting(userInfo, externalObjectStorageSetting);\n-\t\t});\n-\t\t\n-\t\tassertEquals(\"Invalid bucket name.\", ex.getMessage());\n+\t\t//call under test\n+\t\tassertThrows(IllegalArgumentException.class, () -> projectSettingsManager.createStorageLocationSetting(\n+\t\t\t\tuserInfo, externalObjectStorageSetting), \"Invalid Bucket Name\");\n \t}\n \n \t@Test\n-\tpublic void testExternalObjectStorageSettingInvalidBucketWithSlashes() throws IOException {\n+\tpublic void testExternalObjectStorageSettingInvalidBucketWithSlashes() {\n \t\tExternalObjectStorageLocationSetting externalObjectStorageSetting = new ExternalObjectStorageLocationSetting();\n \t\texternalObjectStorageSetting.setBucket(\" / / / / / \");\n \t\texternalObjectStorageSetting.setEndpointUrl(\"https://www.someurl.com\");\n-\t\t\n-\t\tIllegalArgumentException ex = assertThrows(IllegalArgumentException.class, () -> {\n-\t\t\t//call under test\n-\t\t\tprojectSettingsManager.createStorageLocationSetting(userInfo, externalObjectStorageSetting);\n-\t\t});\n-\t\t\n-\t\tassertEquals(\"Invalid bucket name.\", ex.getMessage());\n+\t\t//call under test\n+\t\tassertThrows(IllegalArgumentException.class, () -> projectSettingsManager.createStorageLocationSetting(\n+\t\t\t\tuserInfo, externalObjectStorageSetting), \"Invalid Bucket Name\");\n \t}\n \n \t@Test\n-\tpublic void testExternalObjectStorageSettingInvalidURL() throws IOException {\n+\tpublic void testExternalObjectStorageSettingInvalidURL() {\n \t\tExternalObjectStorageLocationSetting externalObjectStorageSetting = new ExternalObjectStorageLocationSetting();\n \t\texternalObjectStorageSetting.setBucket(\"someBucket\");\n \t\texternalObjectStorageSetting.setEndpointUrl(\"not a url\");\n-\t\t\n-\t\tIllegalArgumentException ex = assertThrows(IllegalArgumentException.class, () -> {\n-\t\t\t//call under test\n-\t\t\tprojectSettingsManager.createStorageLocationSetting(userInfo, externalObjectStorageSetting);\n-\t\t});\n-\t\t\n-\t\tassertEquals(\"The External URL is not a valid url: not a url\", ex.getMessage());\n+\t\t//call under test\n+\t\tassertThrows(IllegalArgumentException.class, () -> projectSettingsManager.createStorageLocationSetting(\n+\t\t\t\tuserInfo, externalObjectStorageSetting), \"The External URL is not a valid url: not a url\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "accd235638d1a75b00444bf1a7d0650719eef75b"}, "originalPosition": 192}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2MzU3MjM5", "url": "https://github.com/Sage-Bionetworks/Synapse-Repository-Services/pull/3930#pullrequestreview-356357239", "createdAt": "2020-02-11T00:18:54Z", "commit": {"oid": "accd235638d1a75b00444bf1a7d0650719eef75b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4794, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}