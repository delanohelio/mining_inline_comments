{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkwNDcyODA2", "number": 14062, "title": "[14050] Allow RESTEasy bundle to be used as a client in a Java SE env", "bodyText": "Fixes #14050\nFixes the NPE (which occurs because there is no OSGi environment to provide Bundles/BundleContexts/etc.).\nAdds a test case to verify that a client can be created in a Java SE environment.\nUpdates the bnd file to handle unit tests and add to the test path to include everything needed to build a client in a Java SE env.\nAdds minimal MP Config implementation required in order to work with RESTEasy config.", "createdAt": "2020-09-21T18:11:44Z", "url": "https://github.com/OpenLiberty/open-liberty/pull/14062", "merged": true, "mergeCommit": {"oid": "d2e1931319217280d2612ee991a20a7fbc08d14c"}, "closed": true, "closedAt": "2020-09-22T21:52:47Z", "author": {"login": "andymc12"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLHyaUAFqTQ5Mjg3OTM4OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLfI30gFqTQ5Mzg3MDMyNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyODc5Mzg4", "url": "https://github.com/OpenLiberty/open-liberty/pull/14062#pullrequestreview-492879388", "createdAt": "2020-09-21T18:34:47Z", "commit": {"oid": "81a815039e7b00e45ac967eef99ae853786c6026"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxODozNDo0OFrOHVdjsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxODozNDo0OFrOHVdjsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjI2NjQxOA==", "bodyText": "This is more of a question. I know this is an SE environment only, but do we need do-privs when getting system properties? If this wasn't SE would we need them?", "url": "https://github.com/OpenLiberty/open-liberty/pull/14062#discussion_r492266418", "createdAt": "2020-09-21T18:34:48Z", "author": {"login": "WhiteCat22"}, "path": "dev/io.openliberty.org.jboss.resteasy.common/src/io/openliberty/restfulWS/client/ConfigProviderResolverImpl.java", "diffHunk": "@@ -0,0 +1,91 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+package io.openliberty.restfulWS.client;\n+\n+import java.security.AccessController;\n+import java.security.PrivilegedAction;\n+import java.util.Optional;\n+\n+import org.eclipse.microprofile.config.Config;\n+import org.eclipse.microprofile.config.spi.ConfigBuilder;\n+import org.eclipse.microprofile.config.spi.ConfigProviderResolver;\n+import org.eclipse.microprofile.config.spi.ConfigSource;\n+\n+/**\n+ * Only intended to be used in Java SE client environments.\n+ */\n+public class ConfigProviderResolverImpl extends ConfigProviderResolver {\n+    \n+    private final boolean java2SecurityEnabled = System.getSecurityManager() != null;\n+\n+    private final Config config = new Config() {\n+\n+        @Override\n+        public Iterable<ConfigSource> getConfigSources() {\n+            // TODO Auto-generated method stub\n+            return null;\n+        }\n+\n+        @Override\n+        public <T> Optional<T> getOptionalValue(String propName, Class<T> type) {\n+            return Optional.ofNullable(getValue(propName, type));\n+        }\n+\n+        @SuppressWarnings(\"unchecked\")\n+        @Override\n+        public Iterable<String> getPropertyNames() {\n+            return (Iterable<String>) System.getProperties().keySet().iterator();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81a815039e7b00e45ac967eef99ae853786c6026"}, "originalPosition": 45}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyODgwMjE5", "url": "https://github.com/OpenLiberty/open-liberty/pull/14062#pullrequestreview-492880219", "createdAt": "2020-09-21T18:35:55Z", "commit": {"oid": "81a815039e7b00e45ac967eef99ae853786c6026"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxODozNTo1NlrOHVdmOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQxODozNTo1NlrOHVdmOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjI2NzA2Nw==", "bodyText": "do we need to explicitly NOT export this package in bnd?", "url": "https://github.com/OpenLiberty/open-liberty/pull/14062#discussion_r492267067", "createdAt": "2020-09-21T18:35:56Z", "author": {"login": "WhiteCat22"}, "path": "dev/io.openliberty.org.jboss.resteasy.common/resources/META-INF/services/org.eclipse.microprofile.config.spi.ConfigProviderResolver", "diffHunk": "@@ -0,0 +1,2 @@\n+# Intended only for Java SE environments - should NOT be exposed by the ResourceProvider in the bnd file", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81a815039e7b00e45ac967eef99ae853786c6026"}, "originalPosition": 1}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "407436a77e484d2010e8faa90ebe74d533145261", "author": {"user": {"login": "andymc12", "name": "Andy McCright"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/407436a77e484d2010e8faa90ebe74d533145261", "committedDate": "2020-09-21T20:58:54Z", "message": "[14050] Allow RESTEasy bundle to be used as a client in a Java SE env"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "81a815039e7b00e45ac967eef99ae853786c6026", "author": {"user": {"login": "andymc12", "name": "Andy McCright"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/81a815039e7b00e45ac967eef99ae853786c6026", "committedDate": "2020-09-21T18:09:15Z", "message": "[14050] Allow RESTEasy bundle to be used as a client in a Java SE env"}, "afterCommit": {"oid": "407436a77e484d2010e8faa90ebe74d533145261", "author": {"user": {"login": "andymc12", "name": "Andy McCright"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/407436a77e484d2010e8faa90ebe74d533145261", "committedDate": "2020-09-21T20:58:54Z", "message": "[14050] Allow RESTEasy bundle to be used as a client in a Java SE env"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzODcwMzI2", "url": "https://github.com/OpenLiberty/open-liberty/pull/14062#pullrequestreview-493870326", "createdAt": "2020-09-22T21:47:09Z", "commit": {"oid": "407436a77e484d2010e8faa90ebe74d533145261"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3258, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}