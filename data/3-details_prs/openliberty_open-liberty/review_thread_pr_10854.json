{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc0NDA2MjE4", "number": 10854, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxODo1Nzo0OFrODjMuzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNTozMDowOFrODlFwSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4MjM1MzQxOnYy", "diffSide": "RIGHT", "path": "dev/com.ibm.ws.logging/src/com/ibm/ws/logging/data/NameAliases.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxODo1Nzo0OFrOFu4B8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxODo1Nzo0OFrOFu4B8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY5NjgxOQ==", "bodyText": "This won't fix the issue... LogTraceData has unsynchronized access to originalExtensions / aliasesExtensions.", "url": "https://github.com/OpenLiberty/open-liberty/pull/10854#discussion_r384696819", "createdAt": "2020-02-26T18:57:48Z", "author": {"login": "donbourne"}, "path": "dev/com.ibm.ws.logging/src/com/ibm/ws/logging/data/NameAliases.java", "diffHunk": "@@ -23,11 +23,13 @@\n     public NameAliases(String[] originalNames) {\n         this.originalNames = originalNames;\n         this.aliases = originalNames.clone();\n-        this.originalExtensions = new ArrayList<>();\n-        this.aliasesExtensions = new ArrayList<>();\n+        synchronized (this) {\n+            this.originalExtensions = new ArrayList<>();\n+            this.aliasesExtensions = new ArrayList<>();\n+        }\n     }\n \n-    public void newAliases(Map<String, String> newAliases) {\n+    public synchronized void newAliases(Map<String, String> newAliases) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f031c361c3b36fffeda18bb174c544c058fed01b"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4NjEyNzc5OnYy", "diffSide": "RIGHT", "path": "dev/com.ibm.ws.logging/src/com/ibm/ws/logging/data/ExtensionAliases.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxODoxMjowN1rOFvbzqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxODoxMjowN1rOFvbzqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI4Mjk4NA==", "bodyText": "this should probably be a static inner class inside NameAliases since NameAliases is the only class that uses it.", "url": "https://github.com/OpenLiberty/open-liberty/pull/10854#discussion_r385282984", "createdAt": "2020-02-27T18:12:07Z", "author": {"login": "donbourne"}, "path": "dev/com.ibm.ws.logging/src/com/ibm/ws/logging/data/ExtensionAliases.java", "diffHunk": "@@ -0,0 +1,31 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+package com.ibm.ws.logging.data;\n+\n+import java.util.ArrayList;\n+\n+/**\n+ *\n+ */\n+public class ExtensionAliases {\n+    public ArrayList<String> originalExtensions;\n+    public ArrayList<String> aliasesExtensions;\n+\n+    public ExtensionAliases() {\n+        this.originalExtensions = new ArrayList<String>();\n+        this.aliasesExtensions = new ArrayList<String>();\n+    }\n+\n+    public void addExtensionAlias(String originalName, String alias) {\n+        originalExtensions.add(originalName);\n+        aliasesExtensions.add(alias);\n+    }\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62f2040c93e62a4b46bd9612f6ca20e25a91f8c3"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4NjE1MDkxOnYy", "diffSide": "RIGHT", "path": "dev/com.ibm.ws.logging/src/com/ibm/ws/logging/data/LogTraceData.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxODoxOTozN1rOFvcCqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxODoxOTozN1rOFvcCqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI4NjgyNg==", "bodyText": "should add a method to ExtensionAliases to get an alias rather than iterating here... eg. getAlias(String original)", "url": "https://github.com/OpenLiberty/open-liberty/pull/10854#discussion_r385286826", "createdAt": "2020-02-27T18:19:37Z", "author": {"login": "donbourne"}, "path": "dev/com.ibm.ws.logging/src/com/ibm/ws/logging/data/LogTraceData.java", "diffHunk": "@@ -698,20 +698,17 @@ public static String getTypeKeyJSON(boolean isMessageEvent) {\n     }\n \n     public static String getExtensionNameKeyJSON(boolean isMessageEvent, String extKey) {\n-        ArrayList<String> tempExt = null;\n-        ArrayList<String> aliasesExt = null;\n+        ExtensionAliases tempExt = null;\n         if (isMessageEvent) {\n-            tempExt = jsonLoggingNameAliasesMessages.originalExtensions;\n-            aliasesExt = jsonLoggingNameAliasesMessages.aliasesExtensions;\n+            tempExt = jsonLoggingNameAliasesMessages.extensionAliases;\n \n         } else {\n-            tempExt = jsonLoggingNameAliasesTrace.originalExtensions;\n-            aliasesExt = jsonLoggingNameAliasesTrace.aliasesExtensions;\n+            tempExt = jsonLoggingNameAliasesTrace.extensionAliases;\n \n         }\n-        for (int i = 0; i < tempExt.size(); i++) {\n-            if (tempExt.get(i).equals(extKey)) {\n-                return aliasesExt.get(i);\n+        for (int i = 0; i < tempExt.originalExtensions.size(); i++) {\n+            if (tempExt.originalExtensions.get(i).equals(extKey)) {\n+                return tempExt.aliasesExtensions.get(i);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62f2040c93e62a4b46bd9612f6ca20e25a91f8c3"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwMjE4MTg0OnYy", "diffSide": "RIGHT", "path": "dev/com.ibm.ws.logging/src/com/ibm/ws/logging/data/LogTraceData.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNTozMDowOFrOFxx72A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNTozMDowOFrOFxx72A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc0MjY4MA==", "bodyText": "please clean up vertical spacing in this method", "url": "https://github.com/OpenLiberty/open-liberty/pull/10854#discussion_r387742680", "createdAt": "2020-03-04T15:30:08Z", "author": {"login": "donbourne"}, "path": "dev/com.ibm.ws.logging/src/com/ibm/ws/logging/data/LogTraceData.java", "diffHunk": "@@ -698,23 +699,15 @@ public static String getTypeKeyJSON(boolean isMessageEvent) {\n     }\n \n     public static String getExtensionNameKeyJSON(boolean isMessageEvent, String extKey) {\n-        ArrayList<String> tempExt = null;\n-        ArrayList<String> aliasesExt = null;\n+        ExtensionAliases tempExt = null;\n         if (isMessageEvent) {\n-            tempExt = jsonLoggingNameAliasesMessages.originalExtensions;\n-            aliasesExt = jsonLoggingNameAliasesMessages.aliasesExtensions;\n+            tempExt = jsonLoggingNameAliasesMessages.extensionAliases;\n \n         } else {\n-            tempExt = jsonLoggingNameAliasesTrace.originalExtensions;\n-            aliasesExt = jsonLoggingNameAliasesTrace.aliasesExtensions;\n+            tempExt = jsonLoggingNameAliasesTrace.extensionAliases;\n \n         }\n-        for (int i = 0; i < tempExt.size(); i++) {\n-            if (tempExt.get(i).equals(extKey)) {\n-                return aliasesExt.get(i);\n-            }\n-        }\n-        return extKey;\n+        return tempExt.getAlias(extKey);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "990aadde1ab75688fa8f61f2a197da111c65b49a"}, "originalPosition": 32}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2123, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}