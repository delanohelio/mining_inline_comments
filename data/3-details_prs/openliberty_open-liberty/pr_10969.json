{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3NDI0MDI1", "number": 10969, "title": "catch IO exception due to bundle uninstallation in generateXML", "bodyText": "In the rare case the bundle is uninstalled just before\nfOutputStream = new FileOutputStream(cachedFile);\nThen an IO exception will be thrown since the path to the cached file is broken.\nJust catching the exception as before in PR #10613", "createdAt": "2020-02-19T22:14:39Z", "url": "https://github.com/OpenLiberty/open-liberty/pull/10969", "merged": true, "mergeCommit": {"oid": "9292ff1cbfb91bea76e9ba7e7d26e46ee7f554d1"}, "closed": true, "closedAt": "2020-02-21T20:26:45Z", "author": {"login": "volosied"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcGMirbAFqTM2MTk3Njk5NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcGlNXjgFqTM2Mjg3Njg4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxOTc2OTk0", "url": "https://github.com/OpenLiberty/open-liberty/pull/10969#pullrequestreview-361976994", "createdAt": "2020-02-20T15:06:21Z", "commit": {"oid": "92355cf740e6f739221788e230cd9796f07359ef"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxNTowNjoyMlrOFsW9rQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQxNTowNjoyMlrOFsW9rQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjA1NzkwMQ==", "bodyText": "Does this method really need to be public?", "url": "https://github.com/OpenLiberty/open-liberty/pull/10969#discussion_r382057901", "createdAt": "2020-02-20T15:06:22Z", "author": {"login": "pnicolucci"}, "path": "dev/com.ibm.ws.webcontainer/src/com/ibm/ws/webcontainer/osgi/mbeans/PluginGenerator.java", "diffHunk": "@@ -208,6 +211,10 @@ protected BundleContext getBundleContext() {\n         return FrameworkUtil.getBundle(PluginGenerator.class).getBundleContext();\n     }\n \n+    public boolean isBundleUninstalled() {\n+        return bundle.getState() == Bundle.UNINSTALLED;\n+    }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92355cf740e6f739221788e230cd9796f07359ef"}, "originalPosition": 26}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "92355cf740e6f739221788e230cd9796f07359ef", "author": {"user": null}, "url": "https://github.com/OpenLiberty/open-liberty/commit/92355cf740e6f739221788e230cd9796f07359ef", "committedDate": "2020-02-19T22:09:21Z", "message": "revise bundle check in plugin generation"}, "afterCommit": {"oid": "7c20adf9d91582d4d57a580876125e811f1fae90", "author": {"user": null}, "url": "https://github.com/OpenLiberty/open-liberty/commit/7c20adf9d91582d4d57a580876125e811f1fae90", "committedDate": "2020-02-20T19:02:23Z", "message": "revise bundle check in plugin generation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyMzg5MDU5", "url": "https://github.com/OpenLiberty/open-liberty/pull/10969#pullrequestreview-362389059", "createdAt": "2020-02-21T04:08:03Z", "commit": {"oid": "7c20adf9d91582d4d57a580876125e811f1fae90"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQwNDowODowM1rOFsrHWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQwNDowODowM1rOFsrHWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM4ODA1Ng==", "bodyText": "We're just checking that the bundle is not uninstalled, can be correct this comment to say that? The bundle must not be uninstalled in order to write the file or something like that. If this isn't actually the case let me know and we can discuss.", "url": "https://github.com/OpenLiberty/open-liberty/pull/10969#discussion_r382388056", "createdAt": "2020-02-21T04:08:03Z", "author": {"login": "pnicolucci"}, "path": "dev/com.ibm.ws.webcontainer/src/com/ibm/ws/webcontainer/osgi/mbeans/PluginGenerator.java", "diffHunk": "@@ -775,6 +782,7 @@ protected synchronized void generateXML(String rootLoc, String serverName,\n \n             // Only write out to file if we have new or changed configuration information, or if this is an explicit request\n             if (writeFile || !utilityRequest || !fileExists) {\n+                // Bundle must be valid in order to write the file", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c20adf9d91582d4d57a580876125e811f1fae90"}, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d720a0ba75d11719887ea7f03acea371d8c75880", "author": {"user": null}, "url": "https://github.com/OpenLiberty/open-liberty/commit/d720a0ba75d11719887ea7f03acea371d8c75880", "committedDate": "2020-02-21T04:22:09Z", "message": "revise bundle check in plugin generation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7c20adf9d91582d4d57a580876125e811f1fae90", "author": {"user": null}, "url": "https://github.com/OpenLiberty/open-liberty/commit/7c20adf9d91582d4d57a580876125e811f1fae90", "committedDate": "2020-02-20T19:02:23Z", "message": "revise bundle check in plugin generation"}, "afterCommit": {"oid": "d720a0ba75d11719887ea7f03acea371d8c75880", "author": {"user": null}, "url": "https://github.com/OpenLiberty/open-liberty/commit/d720a0ba75d11719887ea7f03acea371d8c75880", "committedDate": "2020-02-21T04:22:09Z", "message": "revise bundle check in plugin generation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyODc2ODg5", "url": "https://github.com/OpenLiberty/open-liberty/pull/10969#pullrequestreview-362876889", "createdAt": "2020-02-21T19:50:43Z", "commit": {"oid": "d720a0ba75d11719887ea7f03acea371d8c75880"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3125, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}