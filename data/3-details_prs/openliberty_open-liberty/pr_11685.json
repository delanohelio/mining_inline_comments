{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAwNDc1NDM2", "number": 11685, "title": "Update JPA Spec 1.0 Query FAT to be multi-db supportive.", "bodyText": "Update JPA Spec 1.0 Query FAT to be able to run against other databases besides Derby using the supported OL test infrastructure (rather than just manually changing database.xml)", "createdAt": "2020-04-07T20:05:21Z", "url": "https://github.com/OpenLiberty/open-liberty/pull/11685", "merged": true, "mergeCommit": {"oid": "2a143e7fea4e89821534bebd8527784b0f3079e7"}, "closed": true, "closedAt": "2020-04-16T16:07:04Z", "author": {"login": "jgrassel"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVp_GHgH2gAyNDAwNDc1NDM2OmY1MGMzOGI3NzMwYzhmNjA1NTI4ZTMzNDgwMGQzMjZjMWY1NjE3OTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcWXQzPgFqTM5MTY1MzUwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f50c38b7730c8f605528e334800d326c1f561793", "author": {"user": {"login": "jgrassel", "name": "Jody Grassel"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/f50c38b7730c8f605528e334800d326c1f561793", "committedDate": "2020-04-08T15:53:31Z", "message": "Update JPA Spec 1.0 Query FAT to be multi-db supportive.\n\nSigned-off-by: Joe Grassel <jgrassel@us.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9068f88e0deb3afb8e6efbba49bf76e7783d6c47", "author": {"user": {"login": "jgrassel", "name": "Jody Grassel"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/9068f88e0deb3afb8e6efbba49bf76e7783d6c47", "committedDate": "2020-04-07T20:03:40Z", "message": "Update JPA Spec 1.0 Query FAT to be multi-db supportive.\n\nSigned-off-by: Joe Grassel <jgrassel@us.ibm.com>"}, "afterCommit": {"oid": "f50c38b7730c8f605528e334800d326c1f561793", "author": {"user": {"login": "jgrassel", "name": "Jody Grassel"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/f50c38b7730c8f605528e334800d326c1f561793", "committedDate": "2020-04-08T15:53:31Z", "message": "Update JPA Spec 1.0 Query FAT to be multi-db supportive.\n\nSigned-off-by: Joe Grassel <jgrassel@us.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwMjE4OTA4", "url": "https://github.com/OpenLiberty/open-liberty/pull/11685#pullrequestreview-390218908", "createdAt": "2020-04-08T18:18:37Z", "commit": {"oid": "f50c38b7730c8f605528e334800d326c1f561793"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxODoxODozN1rOGC7UGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxOTowMzoxOFrOGC86yw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTcyMjEzNw==", "bodyText": "If this is supposed to be DB agnostic, do we want to use <properties.derby.embedded?", "url": "https://github.com/OpenLiberty/open-liberty/pull/11685#discussion_r405722137", "createdAt": "2020-04-08T18:18:37Z", "author": {"login": "dazey3"}, "path": "dev/com.ibm.ws.jpa_spec10_query_fat/publish/servers/JPA10QueryServer/database.xml", "diffHunk": "@@ -10,18 +10,30 @@\n  -->\n  <server>\n     <dataSource id=\"jdbc/JPA_DS\" jndiName=\"jdbc/JPA_DS\" fat.modify=\"true\">\n-            <jdbcDriver libraryRef=\"JDBCLib\"/>\n-            <properties.derby.embedded databaseName=\"memory:ds1\" createDatabase=\"create\" user=\"dbuser1\" password=\"{xor}Oz0vKDtu\" />\n+            <jdbcDriver libraryRef=\"AnonymousJDBCLib\"/>\n+            <properties.derby.embedded databaseName=\"memory:ds1\" createDatabase=\"create\" />\n     </dataSource>\n \n     <dataSource id=\"jdbc/JPA_NJTADS\" jndiName=\"jdbc/JPA_NJTADS\" fat.modify=\"true\" transactional=\"false\">\n-            <jdbcDriver libraryRef=\"JDBCLib\"/>\n-            <properties.derby.embedded databaseName=\"memory:ds1\" createDatabase=\"create\" user=\"dbuser1\" password=\"{xor}Oz0vKDtu\" />\n+            <jdbcDriver libraryRef=\"AnonymousJDBCLib\"/>\n+            <properties.derby.embedded databaseName=\"memory:ds1\" createDatabase=\"create\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f50c38b7730c8f605528e334800d326c1f561793"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTcyODkxOA==", "bodyText": "What was the necessity of changing the test? Was the test failing without this change? What DBs fail without this change?", "url": "https://github.com/OpenLiberty/open-liberty/pull/11685#discussion_r405728918", "createdAt": "2020-04-08T18:30:04Z", "author": {"login": "dazey3"}, "path": "dev/com.ibm.ws.jpa_spec10_query_fat/test-applications/olgh8014/src/com/ibm/ws/jpa/olgh8014/testlogic/JPATestOLGH8014Logic.java", "diffHunk": "@@ -387,7 +387,7 @@ public void testAggregateFunctionsWithPrimitives(TestExecutionContext testExecCt\n                 Assert.assertEquals(new Integer(20), res);\n             } else {\n                 //The specification defined assertion\n-                Assert.assertEquals(new Double(20), res);\n+                Assert.assertEquals(new Double(20).doubleValue(), (double) res, 0.5);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f50c38b7730c8f605528e334800d326c1f561793"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTc0NjE1Mg==", "bodyText": "Does ${schemaname} just not work for Postgres? Should this be removed from all the Postgres ddl (JPA_OLGH8294_DELETE_POSTGRES, JPA_OLGH8294_DROP_POSTGRES, JPA_OLGH8014_DELETE_POSTGRES, JPA_OLGH8014_DROP_POSTGRES)?", "url": "https://github.com/OpenLiberty/open-liberty/pull/11685#discussion_r405746152", "createdAt": "2020-04-08T18:59:23Z", "author": {"login": "dazey3"}, "path": "dev/com.ibm.ws.jpa_spec10_query_fat/test-applications/olgh8014/ddl/WEB-INF/classes/JPA_OLGH8014_POPULATE_POSTGRES.ddl", "diffHunk": "@@ -1,2 +1,2 @@\n-INSERT INTO ${schemaname}.SIMPLEENTITYOLGH8014 (KEY_CHAR,ITEM_BIG_DECIMAL1,ITEM_BIG_INTEGER1,ITEM_FLOAT1,ITEM_FLOAT2,ITEM_INTEGER1,ITEM_INTEGER2,ITEM_STRING1) VALUES ('SimpleEntityOLGH80141',11.11,12,13.13,14.15,15,16,'TestString');\n-INSERT INTO ${schemaname}.SIMPLEENTITYOLGH8014 (KEY_CHAR,ITEM_BIG_DECIMAL1,ITEM_BIG_INTEGER1,ITEM_FLOAT1,ITEM_FLOAT2,ITEM_INTEGER1,ITEM_INTEGER2,ITEM_STRING1) VALUES ('SimpleEntityOLGH80142',21.21,22,23.23,24.25,25,26,'TestString');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f50c38b7730c8f605528e334800d326c1f561793"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTc0ODQyNw==", "bodyText": "Was this change needed for a test failure?? I wouldn't think this to be necessary for different databases", "url": "https://github.com/OpenLiberty/open-liberty/pull/11685#discussion_r405748427", "createdAt": "2020-04-08T19:03:18Z", "author": {"login": "dazey3"}, "path": "dev/com.ibm.ws.jpa_spec10_query_fat/test-applications/olgh8294/web/olgh8294Web.war/WEB-INF/classes/META-INF/persistence.xml", "diffHunk": "@@ -35,6 +35,7 @@\n \n     <persistence-unit name=\"OLGH8294_PROPERTY_RL\" transaction-type=\"RESOURCE_LOCAL\">\n         <non-jta-data-source>jdbc/JPA_NJTADS</non-jta-data-source>\n+        <class>com.ibm.ws.jpa.olgh8294.model.SimpleEntityOLGH8294</class>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f50c38b7730c8f605528e334800d326c1f561793"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b30076365ed55875eb3312bcf520b0261330bbb", "author": {"user": {"login": "jgrassel", "name": "Jody Grassel"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/3b30076365ed55875eb3312bcf520b0261330bbb", "committedDate": "2020-04-09T20:10:40Z", "message": "Address review comments for PR Update JPA Spec 1.0 Query FAT to be multi-db supportive. #11685\n\nSigned-off-by: Joe Grassel <jgrassel@us.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNjUzNTAx", "url": "https://github.com/OpenLiberty/open-liberty/pull/11685#pullrequestreview-391653501", "createdAt": "2020-04-10T20:38:35Z", "commit": {"oid": "3b30076365ed55875eb3312bcf520b0261330bbb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2782, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}