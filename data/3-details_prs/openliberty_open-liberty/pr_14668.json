{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA4NjQ3NTYy", "number": 14668, "title": "Fix connection manager deadlock when purgePolicy=FailingConnectionOnly", "bodyText": "Modify the com.ibm.ejs.j2c.PoolManager.validateConnections method to prevent a potential deadlock from occurring on a connection that may be used on another thread when purgePolicy=FailingConnectionOnly.\nFixes #14657", "createdAt": "2020-10-23T01:47:11Z", "url": "https://github.com/OpenLiberty/open-liberty/pull/14668", "merged": true, "mergeCommit": {"oid": "5763426ea6375cb551cb212cc0840c074e4dc913"}, "closed": true, "closedAt": "2020-11-04T16:47:27Z", "author": {"login": "gjwatts"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdVM0UTgBqjM5MTE3OTQ0OTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZBimDAH2gAyNTA4NjQ3NTYyOjkxZDBiMmQ1ODY0YjVkYmFmMzQxNTA1YmRkZTY0OTY1NzQzZGY0NzU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9d68441ca8e141174b61fa0340323d771831b280", "author": {"user": {"login": "gjwatts", "name": "Greg Watts"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/9d68441ca8e141174b61fa0340323d771831b280", "committedDate": "2020-10-23T01:32:22Z", "message": "14657 fix connection manager deadlock validateConnections"}, "afterCommit": {"oid": "d68408adabcfbc625c41db2fc292c01f1e39fb60", "author": {"user": {"login": "gjwatts", "name": "Greg Watts"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/d68408adabcfbc625c41db2fc292c01f1e39fb60", "committedDate": "2020-10-23T02:05:22Z", "message": "14657 fix connection manager deadlock validateConnections"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d68408adabcfbc625c41db2fc292c01f1e39fb60", "author": {"user": {"login": "gjwatts", "name": "Greg Watts"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/d68408adabcfbc625c41db2fc292c01f1e39fb60", "committedDate": "2020-10-23T02:05:22Z", "message": "14657 fix connection manager deadlock validateConnections"}, "afterCommit": {"oid": "daa8412ac1a59715586712769c5e482e972e9be6", "author": {"user": {"login": "gjwatts", "name": "Greg Watts"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/daa8412ac1a59715586712769c5e482e972e9be6", "committedDate": "2020-10-23T18:53:06Z", "message": "14657 fix connection manager deadlock validateConnections"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "daa8412ac1a59715586712769c5e482e972e9be6", "author": {"user": {"login": "gjwatts", "name": "Greg Watts"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/daa8412ac1a59715586712769c5e482e972e9be6", "committedDate": "2020-10-23T18:53:06Z", "message": "14657 fix connection manager deadlock validateConnections"}, "afterCommit": {"oid": "21a78d25caa20ff52429c804d939be3bafe50148", "author": {"user": {"login": "gjwatts", "name": "Greg Watts"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/21a78d25caa20ff52429c804d939be3bafe50148", "committedDate": "2020-10-23T19:03:51Z", "message": "14657 fix connection manager deadlock validateConnections"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c24c8c43e383b82fa1eadd29c36b470fe6512ec", "author": {"user": {"login": "gjwatts", "name": "Greg Watts"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/6c24c8c43e383b82fa1eadd29c36b470fe6512ec", "committedDate": "2020-10-23T19:08:40Z", "message": "14657 fix connection manager deadlock validateConnections"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "21a78d25caa20ff52429c804d939be3bafe50148", "author": {"user": {"login": "gjwatts", "name": "Greg Watts"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/21a78d25caa20ff52429c804d939be3bafe50148", "committedDate": "2020-10-23T19:03:51Z", "message": "14657 fix connection manager deadlock validateConnections"}, "afterCommit": {"oid": "6c24c8c43e383b82fa1eadd29c36b470fe6512ec", "author": {"user": {"login": "gjwatts", "name": "Greg Watts"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/6c24c8c43e383b82fa1eadd29c36b470fe6512ec", "committedDate": "2020-10-23T19:08:40Z", "message": "14657 fix connection manager deadlock validateConnections"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1Nzg3Mzgz", "url": "https://github.com/OpenLiberty/open-liberty/pull/14668#pullrequestreview-515787383", "createdAt": "2020-10-23T15:39:00Z", "commit": {"oid": "d68408adabcfbc625c41db2fc292c01f1e39fb60"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxNTozOTowMFrOHnTQVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxNTozOTowMFrOHnTQVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDk3MTk4OA==", "bodyText": "Remove the commented out code here and the old commented out code.", "url": "https://github.com/OpenLiberty/open-liberty/pull/14668#discussion_r510971988", "createdAt": "2020-10-23T15:39:00Z", "author": {"login": "jmstephensgit"}, "path": "dev/com.ibm.ws.jca.cm/src/com/ibm/ejs/j2c/PoolManager.java", "diffHunk": "@@ -452,95 +438,171 @@ protected void validateConnections(ManagedConnectionFactory managedConnectionFac\n             Tr.entry(this, tc, \"validateConnections\", gConfigProps.cfName);\n         }\n \n-        /*\n-         * Get all of the managed connections wrappers.\n-         */\n+//        boolean b = false;\n+//        if (b) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d68408adabcfbc625c41db2fc292c01f1e39fb60"}, "originalPosition": 104}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91d0b2d5864b5dbaf341505bdde64965743df475", "author": {"user": {"login": "gjwatts", "name": "Greg Watts"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/91d0b2d5864b5dbaf341505bdde64965743df475", "committedDate": "2020-11-03T23:13:02Z", "message": "Updating with Kyle's feedback"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3004, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}