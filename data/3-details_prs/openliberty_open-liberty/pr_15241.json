{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1Mzk2MDg3", "number": 15241, "title": "Restructure mpJwt FAT projects", "bodyText": "Restructuring the mpJwt Fats.\nMove common files and apps to a shared project.\nUpdate the mpJwt-1.1 fat project to run \"lite\" tests with mpJwt-1.2 (when run in lite mode).  Using repeat rules that can be manually updated to run all tests with 1.2 in full mode locally if/when needed.\nUpdate the mpJwt-1.2 fat project to NO Longer run the 1.1 tests.  Also updated project so that it can be run with any future versions of mpJwt by updating FATSuite and adding some config files.", "createdAt": "2020-12-09T19:00:23Z", "url": "https://github.com/OpenLiberty/open-liberty/pull/15241", "merged": true, "mergeCommit": {"oid": "86ec110ab2b378af76b793a9474cde78d5567599"}, "closed": true, "closedAt": "2021-01-05T15:49:44Z", "author": {"login": "c00crane"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkjbU3AH2gAyNTM1Mzk2MDg3Ojc5ZDM3MzEwNDEwY2FmMTgxMDRlNTU0ZDIxNWYzZmJhNTBkYzFkN2M=", "endCursor": "Y3Vyc29yOnYyOpPPAAABds5CS-AH2gAyNTM1Mzk2MDg3OjBkOTc4MTc1NjI4NDNjYWM2NmRmNmE4Nzc5ZjA5Yzg5MDAwYjE3Mjk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "79d37310410caf18104e554d215f3fba50dc1d7c", "author": {"user": {"login": "c00crane", "name": "Chris Crane"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/79d37310410caf18104e554d215f3fba50dc1d7c", "committedDate": "2020-12-09T18:55:02Z", "message": "Move common mpJwt files to shared project"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20ad175cabc827e14e5ab70be7446f183285a0e0", "author": {"user": {"login": "c00crane", "name": "Chris Crane"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/20ad175cabc827e14e5ab70be7446f183285a0e0", "committedDate": "2020-12-09T19:10:16Z", "message": "Update common files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93e01f9a7c184b2d1c4c881cf95d74083423426b", "author": {"user": {"login": "c00crane", "name": "Chris Crane"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/93e01f9a7c184b2d1c4c881cf95d74083423426b", "committedDate": "2020-12-09T19:11:11Z", "message": "Update FAT logging for repeat actions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe950e6b8a38894605714b2cd7a7091de6080ec9", "author": {"user": {"login": "c00crane", "name": "Chris Crane"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/fe950e6b8a38894605714b2cd7a7091de6080ec9", "committedDate": "2020-12-09T19:16:47Z", "message": "Update mpJwt-1.1 FAT project for restructuring"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bcd5a26e044315688e27376897d0938acef7db74", "author": {"user": {"login": "c00crane", "name": "Chris Crane"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/bcd5a26e044315688e27376897d0938acef7db74", "committedDate": "2020-12-09T19:19:13Z", "message": "Update mpJwt-1.2 FAT project for restructuring"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a20a63f3cb662ebabbb4a3f0e6909a344ed7641", "author": {"user": {"login": "c00crane", "name": "Chris Crane"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/9a20a63f3cb662ebabbb4a3f0e6909a344ed7641", "committedDate": "2020-12-09T19:23:00Z", "message": "Misc Updates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "298571c42c8efaadc918cec67f0eb33e62b1d9c7", "author": {"user": {"login": "c00crane", "name": "Chris Crane"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/298571c42c8efaadc918cec67f0eb33e62b1d9c7", "committedDate": "2020-12-09T19:26:06Z", "message": "Merge remote-tracking branch 'origin/integration' into restructureMpJwt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2896eed22b25bb2b4ca8e598ce34571d06335f2f", "author": {"user": {"login": "c00crane", "name": "Chris Crane"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/2896eed22b25bb2b4ca8e598ce34571d06335f2f", "committedDate": "2020-12-09T23:04:04Z", "message": "Update unittests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f4d027e7bbb4b1b014265ff566d885823bae3c4c", "author": {"user": {"login": "c00crane", "name": "Chris Crane"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/f4d027e7bbb4b1b014265ff566d885823bae3c4c", "committedDate": "2020-12-09T22:58:59Z", "message": "Update unittests"}, "afterCommit": {"oid": "2896eed22b25bb2b4ca8e598ce34571d06335f2f", "author": {"user": {"login": "c00crane", "name": "Chris Crane"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/2896eed22b25bb2b4ca8e598ce34571d06335f2f", "committedDate": "2020-12-09T23:04:04Z", "message": "Update unittests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0fdb91c516ba2dbc9094aaf887a204e9b47f7fa7", "author": {"user": {"login": "c00crane", "name": "Chris Crane"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/0fdb91c516ba2dbc9094aaf887a204e9b47f7fa7", "committedDate": "2020-12-10T17:36:55Z", "message": "fix file sharing between mpJwt Fat projects"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52bd3640f4c1fe7626e9a94b546cac0692b83c42", "author": {"user": {"login": "c00crane", "name": "Chris Crane"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/52bd3640f4c1fe7626e9a94b546cac0692b83c42", "committedDate": "2020-12-10T18:47:06Z", "message": "update jwtsso web client issue"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzODY2NjE5", "url": "https://github.com/OpenLiberty/open-liberty/pull/15241#pullrequestreview-553866619", "createdAt": "2020-12-16T16:31:36Z", "commit": {"oid": "52bd3640f4c1fe7626e9a94b546cac0692b83c42"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxNjozMTozNlrOIHOKxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxNjo1OToxNVrOIHPfMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ0MzA3OQ==", "bodyText": "I'm guessing this still works with the // in the path?", "url": "https://github.com/OpenLiberty/open-liberty/pull/15241#discussion_r544443079", "createdAt": "2020-12-16T16:31:36Z", "author": {"login": "ayoho"}, "path": "dev/com.ibm.ws.security.fat.common.mp.jwt/src/com/ibm/ws/security/fat/common/mp/jwt/utils/MPJwtAppSetupUtils.java", "diffHunk": "@@ -319,9 +239,9 @@ protected String getWarName(String baseWarName) {\n     }\n \n     public WebArchive addDefaultFileAssetsForAppsToWar(String warName, WebArchive war) throws Exception {\n-        war.add(new FileAsset(new File(\"build/classes/com/ibm/ws/security/jwt/fat/mpjwt/CommonMicroProfileApp.class\")),\n-                \"com/ibm/ws/security/jwt/fat/mpjwt/CommonMicroProfileApp.class\");\n-        war.add(new FileAsset(new File(\"build/classes/com/ibm/ws/security/jwt/fat/mpjwt/MpJwtFatConstants.class\")), \"com/ibm/ws/security/jwt/fat/mpjwt/MpJwtFatConstants.class\");\n+        war.add(new FileAsset(new File(\"lib/com/ibm/ws/security/fat/common/mp/jwt/CommonMicroProfileApp.class\")),\n+                \"com/ibm/ws/security/fat/common/mp/jwt/CommonMicroProfileApp.class\");\n+        war.add(new FileAsset(new File(\"lib/com/ibm/ws/security/fat/common/mp/jwt//MPJwtFatConstants.class\")), \"com/ibm/ws/security/fat/common/mp/jwt//MPJwtFatConstants.class\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52bd3640f4c1fe7626e9a94b546cac0692b83c42"}, "originalPosition": 197}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ1ODI3Ng==", "bodyText": "Not going to try these tests with the MP JWT features anymore?", "url": "https://github.com/OpenLiberty/open-liberty/pull/15241#discussion_r544458276", "createdAt": "2020-12-16T16:50:53Z", "author": {"login": "ayoho"}, "path": "dev/com.ibm.ws.security.jwtsso_fat/fat/src/com/ibm/ws/security/jwtsso/fat/ConfigAttributeTests.java", "diffHunk": "@@ -64,9 +65,9 @@\n     protected static Class<?> thisClass = ConfigAttributeTests.class;\n \n     @ClassRule\n-    public static RepeatTests r = RepeatTests.with(new RunWithMpJwtVersion(JwtFatConstants.NO_MPJWT))\n-                    .andWith(new RunWithMpJwtVersion(JwtFatConstants.MPJWT_VERSION_11))\n-                    .andWith(new RunWithMpJwtVersion(JwtFatConstants.MPJWT_VERSION_12));\n+    public static RepeatTests r = RepeatTests.with(new RunWithMpJwtVersion(JwtFatConstants.NO_MPJWT));\n+//                    .andWith(new RunWithMpJwtVersion(JwtFatConstants.MPJWT_VERSION_11))\n+//                    .andWith(new RunWithMpJwtVersion(JwtFatConstants.MPJWT_VERSION_12));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52bd3640f4c1fe7626e9a94b546cac0692b83c42"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ2MzIwNg==", "bodyText": "Not entirely sure if this is necessary.", "url": "https://github.com/OpenLiberty/open-liberty/pull/15241#discussion_r544463206", "createdAt": "2020-12-16T16:57:17Z", "author": {"login": "ayoho"}, "path": "dev/com.ibm.ws.security.mp.jwt.1.1_fat/.classpath", "diffHunk": "@@ -21,11 +20,8 @@\n \t<classpathentry kind=\"src\" path=\"test-applications/microProfileLoginConfig_NotInWebXml_BasicInApp.war/src\"/>\n \t<classpathentry kind=\"src\" path=\"test-applications/microProfileLoginConfig_NotInWebXml_NotInApp.war/src\"/>\n \t<classpathentry kind=\"src\" path=\"test-applications/microProfileLoginConfig_MultiLayer_NotInWebXml_MpJwtInApp.war/src\"/>\n-\t<classpathentry kind=\"src\" path=\"test-applications/microProfilePropagationClient.war/src\"/>\n-\t<classpathentry kind=\"src\" path=\"test-applications/microProfileMP-ConfigUnderWeb-INF.war/src\"/>\n-\t<classpathentry kind=\"src\" path=\"test-applications/microProfileMP-ConfigInMETA-INF.war/src\"/>\n-\t<classpathentry kind=\"src\" path=\"test-applications/microProfileMP-ConfigNotInApp.war/src\"/>\n \t<classpathentry kind=\"con\" path=\"aQute.bnd.classpath.container\"/>\n \t<classpathentry kind=\"con\" path=\"org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.8\"/>\n+\t<classpathentry kind=\"lib\" path=\"/com.ibm.ws.security.fat.common.mp.jwt/build/libs/com.ibm.ws.security.fat.common.mp.jwt.jar\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52bd3640f4c1fe7626e9a94b546cac0692b83c42"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ2NDY4OA==", "bodyText": "Is this simply printing out the name and number of the tasks being performed?", "url": "https://github.com/OpenLiberty/open-liberty/pull/15241#discussion_r544464688", "createdAt": "2020-12-16T16:59:15Z", "author": {"login": "ayoho"}, "path": "dev/com.ibm.ws.security.mp.jwt.1.1_fat/build.gradle", "diffHunk": "@@ -35,37 +36,65 @@ dependencies {\n       'xerces:xercesImpl:2.11.0'\n }\n \n-autoFVT.doLast {\n+ gradle.taskGraph.whenReady {taskGraph ->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52bd3640f4c1fe7626e9a94b546cac0692b83c42"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26939600020b9c074c52ffd392066034b8827164", "author": {"user": {"login": "c00crane", "name": "Chris Crane"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/26939600020b9c074c52ffd392066034b8827164", "committedDate": "2021-01-04T16:26:26Z", "message": "Review comment updates"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYxMTY3NjU4", "url": "https://github.com/OpenLiberty/open-liberty/pull/15241#pullrequestreview-561167658", "createdAt": "2021-01-04T16:33:51Z", "commit": {"oid": "26939600020b9c074c52ffd392066034b8827164"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d97817562843cac66df6a8779f09c89000b1729", "author": {"user": {"login": "c00crane", "name": "Chris Crane"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/0d97817562843cac66df6a8779f09c89000b1729", "committedDate": "2021-01-04T16:37:00Z", "message": "Merge remote-tracking branch 'origin/integration' into restructureMpJwt"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2786, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}