{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA2ODEwNzkx", "number": 14568, "title": "Issue 13577: JWE consumer support initial drop", "bodyText": "For issue #13577\nAdds support for server.xml configuration attributes that allow consuming of JWE tokens.\nThis includes:\n\nkeyManagementKeyAlias config attributes added to <jwtConsumer> and <mpJwt>\nNew CWWKS6056E message for an error extracting a JWS from a JWE\nSupport for consuming a JWE passed as a Bearer token to a protected resource (should also work using the token header/cookie name server config/MP Config attributes since it goes through the same flow)\nSupport for consuming a JWE passed to the Consumer.createJwt(String) API\n\nThis does not include:\n\nSupport for the mp.jwt.decrypt.key.location MP Config attribute", "createdAt": "2020-10-20T13:39:27Z", "url": "https://github.com/OpenLiberty/open-liberty/pull/14568", "merged": true, "mergeCommit": {"oid": "e0398e01408ad369b822fbc8c2319ed119bdccf7"}, "closed": true, "closedAt": "2020-10-22T02:59:19Z", "author": {"login": "ayoho"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdTH6kJAH2gAyNTA2ODEwNzkxOjlmODNkNGI0YjZmYTIyMTAzOTNlMjg0MjQ1NjhkZmIyY2IxYTZkYTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdU0JuCAFqTUxNDE5NTM5NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9f83d4b4b6fa2210393e28424568dfb2cb1a6da7", "author": {"user": {"login": "ayoho", "name": "Adam Yoho"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/9f83d4b4b6fa2210393e28424568dfb2cb1a6da7", "committedDate": "2020-10-16T15:15:06Z", "message": "Issue 13577: JWE consumer support initial drop\n\nFor issue #13577\n\nAdds support for server.xml configuration attributes that allow consuming of JWE tokens."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7413d6773929e731cef2e1952ced9d3672a533f0", "author": {"user": {"login": "ayoho", "name": "Adam Yoho"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/7413d6773929e731cef2e1952ced9d3672a533f0", "committedDate": "2020-10-20T14:29:45Z", "message": "Merge remote-tracking branch 'origin/integration' into 13577-consumeJwe-1"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d21ed5517ddb420a0b7ef431b88c925237cbc907", "author": {"user": {"login": "ayoho", "name": "Adam Yoho"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/d21ed5517ddb420a0b7ef431b88c925237cbc907", "committedDate": "2020-10-20T20:33:05Z", "message": "Merge remote-tracking branch 'origin/integration' into 13577-consumeJwe-1"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzMTIzNjM5", "url": "https://github.com/OpenLiberty/open-liberty/pull/14568#pullrequestreview-513123639", "createdAt": "2020-10-20T20:52:08Z", "commit": {"oid": "d21ed5517ddb420a0b7ef431b88c925237cbc907"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQyMDo1MjowOVrOHlQnWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQyMDo1MjowOVrOHlQnWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODgzMTU3Ng==", "bodyText": "TODO: Update to use keyManagementKeyAlias and keyManagementKeyAlias.consumer.desc", "url": "https://github.com/OpenLiberty/open-liberty/pull/14568#discussion_r508831576", "createdAt": "2020-10-20T20:52:09Z", "author": {"login": "teddyjtorres"}, "path": "dev/com.ibm.ws.security.jwt/resources/OSGI-INF/metatype/metatype.xml", "diffHunk": "@@ -87,7 +87,8 @@\n         <AD id=\"jwkEndpointUrl\" name=\"%jwkEndpointUrl\" description=\"%jwkEndpointUrl.desc\"  required=\"false\"  type=\"String\" />\n         <AD id=\"amrValues\" name=\"%amrValues\" description=\"%amrValues.desc\" required=\"false\" type=\"String\" cardinality=\"400\" ibm:beta=\"true\"/>\n         <AD id=\"sslRef\" name=\"%sslRef\" description=\"%sslRef.desc\" required=\"false\" type=\"String\" ibmui:uiReference=\"com.ibm.ws.ssl.repertoire\" />\n-         <AD id=\"useSystemPropertiesForHttpClientConnections\" name=\"%useSystemPropertiesForHttpClientConnections\" description=\"%useSystemPropertiesForHttpClientConnections.desc\" required=\"false\" type=\"Boolean\" default=\"false\"/>\n+        <AD id=\"useSystemPropertiesForHttpClientConnections\" name=\"%useSystemPropertiesForHttpClientConnections\" description=\"%useSystemPropertiesForHttpClientConnections.desc\" required=\"false\" type=\"Boolean\" default=\"false\"/>\n+        <AD id=\"keyManagementKeyAlias\" name=\"internal\" description=\"internal use only\" required=\"false\" type=\"String\" ibm:beta=\"true\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d21ed5517ddb420a0b7ef431b88c925237cbc907"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzMTM1Mjg3", "url": "https://github.com/OpenLiberty/open-liberty/pull/14568#pullrequestreview-513135287", "createdAt": "2020-10-20T21:08:40Z", "commit": {"oid": "d21ed5517ddb420a0b7ef431b88c925237cbc907"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQyMTowODo0MFrOHlRLDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQyMTowODo0MFrOHlRLDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODg0MDcxNw==", "bodyText": "Please confirm if the key value is traced, if so, then tag this method and elsewhere this key is visible in this path with\n\n@Sensitive", "url": "https://github.com/OpenLiberty/open-liberty/pull/14568#discussion_r508840717", "createdAt": "2020-10-20T21:08:40Z", "author": {"login": "teddyjtorres"}, "path": "dev/com.ibm.ws.security.jwt/src/com/ibm/ws/security/jwt/utils/JweHelper.java", "diffHunk": "@@ -72,6 +98,12 @@ Key getKeyManagementKeyFromTrustStore(JwtConfig jwtConfig) throws KeyStoreExcept\n         return JwtUtils.getPublicKey(keyAlias, trustStoreRef);\n     }\n \n+    Key getJweDecryptionKey(JwtConsumerConfig config) throws KeyStoreException, CertificateException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d21ed5517ddb420a0b7ef431b88c925237cbc907"}, "originalPosition": 67}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzMTQ1MzEz", "url": "https://github.com/OpenLiberty/open-liberty/pull/14568#pullrequestreview-513145313", "createdAt": "2020-10-20T21:24:02Z", "commit": {"oid": "d21ed5517ddb420a0b7ef431b88c925237cbc907"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQyMToyNDowMlrOHlRp7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQyMToyNDowMlrOHlRp7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODg0ODYyMg==", "bodyText": "TODO: Update to use keyManagementKeyAlias and keyManagementKeyAlias.consumer.desc", "url": "https://github.com/OpenLiberty/open-liberty/pull/14568#discussion_r508848622", "createdAt": "2020-10-20T21:24:02Z", "author": {"login": "teddyjtorres"}, "path": "dev/com.ibm.ws.security.mp.jwt/resources/OSGI-INF/metatype/metatype.xml", "diffHunk": "@@ -50,6 +50,7 @@\n             <Option label=\"%tokenHeader.Cookie\" value=\"Cookie\" />\n         </AD>\n         <AD id=\"cookieName\" name=\"%cookieName\" description=\"%cookieName.desc\" required=\"false\" type=\"String\" ibm:beta=\"true\" />\n+        <AD id=\"keyManagementKeyAlias\" name=\"internal\" description=\"internal use only\" required=\"false\" type=\"String\" ibm:beta=\"true\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d21ed5517ddb420a0b7ef431b88c925237cbc907"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1de3dcdaa59e223445a3457af82dbc4f391869a", "author": {"user": {"login": "ayoho", "name": "Adam Yoho"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/b1de3dcdaa59e223445a3457af82dbc4f391869a", "committedDate": "2020-10-21T14:59:42Z", "message": "Issue 13577: Add doPriv in JWT consumer and Sensitive annotation for JWE decrypt keys"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4a2c775c61267f48e9a4768b0a944c5d1dd41f2a", "author": {"user": {"login": "ayoho", "name": "Adam Yoho"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/4a2c775c61267f48e9a4768b0a944c5d1dd41f2a", "committedDate": "2020-10-21T14:55:08Z", "message": "Issue 13577: Add doPriv for getting SSL properties for JWT consumer"}, "afterCommit": {"oid": "b1de3dcdaa59e223445a3457af82dbc4f391869a", "author": {"user": {"login": "ayoho", "name": "Adam Yoho"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/b1de3dcdaa59e223445a3457af82dbc4f391869a", "committedDate": "2020-10-21T14:59:42Z", "message": "Issue 13577: Add doPriv in JWT consumer and Sensitive annotation for JWE decrypt keys"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0MTk1Mzk1", "url": "https://github.com/OpenLiberty/open-liberty/pull/14568#pullrequestreview-514195395", "createdAt": "2020-10-21T21:21:24Z", "commit": {"oid": "b1de3dcdaa59e223445a3457af82dbc4f391869a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3100, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}