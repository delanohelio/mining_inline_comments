{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEzMjAxMDQ3", "number": 14773, "title": "Update to no longer synchronize on Integer objects", "bodyText": "With Java 16, JEP 390 changes Integer primitive wrappers so that they should not be synchronized on any longer.\n\nThe changes in this PR undo many previous PRs that introduced synchronizing on Integer in order to remove having so many inner classes used for synchronization.  This change re-introduces many of those inner classes again.  This will have a small impact on footprint and probably CPU since we will be loading more classes.\nFixes #16299", "createdAt": "2020-10-30T18:19:25Z", "url": "https://github.com/OpenLiberty/open-liberty/pull/14773", "merged": true, "mergeCommit": {"oid": "064086c9848d7c1b61a016824b8d5ed906106747"}, "closed": true, "closedAt": "2021-03-23T23:22:09Z", "author": {"login": "jhanders34"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdXrX_egFqTUyMDk0NTU0Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABeF6ef8gBqjQ0OTUyNTM4ODg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwOTQ1NTQ3", "url": "https://github.com/OpenLiberty/open-liberty/pull/14773#pullrequestreview-520945547", "createdAt": "2020-10-30T18:47:32Z", "commit": {"oid": "6c81ef4c3ef6a1f0f86552676cd6bacf2f4cd6a2"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxODo0NzozMlrOHrb_dA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxODo0ODo0MFrOHrcBlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTMwOTQyOA==", "bodyText": "could this be made a static class to reduce overhead of creating a new ZipFileHandleImpl (same comment applies to other instances of occurrences of non-static private lock classes)", "url": "https://github.com/OpenLiberty/open-liberty/pull/14773#discussion_r515309428", "createdAt": "2020-10-30T18:47:32Z", "author": {"login": "aguibert"}, "path": "dev/com.ibm.ws.artifact.zip/src/com/ibm/ws/artifact/zip/cache/internal/ZipFileHandleImpl.java", "diffHunk": "@@ -88,7 +88,10 @@ public long getLastModified() {\n \n     //\n \n-    private final Integer zipFileLock = new Integer(0);\n+    private class ZipFileLock {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c81ef4c3ef6a1f0f86552676cd6bacf2f4cd6a2"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTMwOTk3NA==", "bodyText": "Why switching to new Object() here? AFAIK the new Object() constructor might be removed in a future Java release, so we should avoid new usages of this.", "url": "https://github.com/OpenLiberty/open-liberty/pull/14773#discussion_r515309974", "createdAt": "2020-10-30T18:48:40Z", "author": {"login": "aguibert"}, "path": "dev/com.ibm.ws.channelfw/src/com/ibm/ws/bytebuffer/internal/WsByteBufferPoolManagerImpl.java", "diffHunk": "@@ -92,7 +92,7 @@\n     private long lastTimeCheck = 0L;\n     private int leakDetectionInterval = -1;\n     private String leakDetectionOutput = null;\n-    private final Integer leakDetectionSyncObject = new Integer(1);\n+    private final Object leakDetectionSyncObject = new Object() {};", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6c81ef4c3ef6a1f0f86552676cd6bacf2f4cd6a2"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6c81ef4c3ef6a1f0f86552676cd6bacf2f4cd6a2", "author": {"user": {"login": "jhanders34", "name": "Jared Anderson"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/6c81ef4c3ef6a1f0f86552676cd6bacf2f4cd6a2", "committedDate": "2020-10-30T18:13:43Z", "message": "Update to no longer synchronize on Integer objects\n\n- With Java 16, JEP 390 changes Integer wrappers so that they should not\nbe synchronized on any longer."}, "afterCommit": {"oid": "4a312af6b018704b498119ae979ee7efebd3a2e7", "author": {"user": {"login": "jhanders34", "name": "Jared Anderson"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/4a312af6b018704b498119ae979ee7efebd3a2e7", "committedDate": "2020-10-30T18:58:06Z", "message": "Update to no longer synchronize on Integer objects\n\n- With Java 16, JEP 390 changes Integer wrappers so that they should not\nbe synchronized on any longer."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwOTUzODUw", "url": "https://github.com/OpenLiberty/open-liberty/pull/14773#pullrequestreview-520953850", "createdAt": "2020-10-30T19:00:38Z", "commit": {"oid": "6c81ef4c3ef6a1f0f86552676cd6bacf2f4cd6a2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4a312af6b018704b498119ae979ee7efebd3a2e7", "author": {"user": {"login": "jhanders34", "name": "Jared Anderson"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/4a312af6b018704b498119ae979ee7efebd3a2e7", "committedDate": "2020-10-30T18:58:06Z", "message": "Update to no longer synchronize on Integer objects\n\n- With Java 16, JEP 390 changes Integer wrappers so that they should not\nbe synchronized on any longer."}, "afterCommit": {"oid": "d6937ab8fe2c32657bd278a147b998fa84680b7e", "author": {"user": {"login": "jhanders34", "name": "Jared Anderson"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/d6937ab8fe2c32657bd278a147b998fa84680b7e", "committedDate": "2020-10-30T20:03:01Z", "message": "Update to no longer synchronize on Integer objects\n\n- With Java 16, JEP 390 changes Integer wrappers so that they should not\nbe synchronized on any longer."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d6937ab8fe2c32657bd278a147b998fa84680b7e", "author": {"user": {"login": "jhanders34", "name": "Jared Anderson"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/d6937ab8fe2c32657bd278a147b998fa84680b7e", "committedDate": "2020-10-30T20:03:01Z", "message": "Update to no longer synchronize on Integer objects\n\n- With Java 16, JEP 390 changes Integer wrappers so that they should not\nbe synchronized on any longer."}, "afterCommit": {"oid": "f45aa026aa06d6fbd3fd9ac77c406b8da95e6047", "author": {"user": {"login": "jhanders34", "name": "Jared Anderson"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/f45aa026aa06d6fbd3fd9ac77c406b8da95e6047", "committedDate": "2020-10-30T20:55:26Z", "message": "Update to no longer synchronize on Integer objects\n\n- With Java 16, JEP 390 changes Integer wrappers so that they should not\nbe synchronized on any longer."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f45aa026aa06d6fbd3fd9ac77c406b8da95e6047", "author": {"user": {"login": "jhanders34", "name": "Jared Anderson"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/f45aa026aa06d6fbd3fd9ac77c406b8da95e6047", "committedDate": "2020-10-30T20:55:26Z", "message": "Update to no longer synchronize on Integer objects\n\n- With Java 16, JEP 390 changes Integer wrappers so that they should not\nbe synchronized on any longer."}, "afterCommit": {"oid": "d464b21965189038f027dd57e19fbbe54085dc4f", "author": {"user": {"login": "jhanders34", "name": "Jared Anderson"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/d464b21965189038f027dd57e19fbbe54085dc4f", "committedDate": "2020-10-30T20:58:41Z", "message": "Update to no longer synchronize on Integer objects\n\n- With Java 16, JEP 390 changes Integer wrappers so that they should not\nbe synchronized on any longer."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d464b21965189038f027dd57e19fbbe54085dc4f", "author": {"user": {"login": "jhanders34", "name": "Jared Anderson"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/d464b21965189038f027dd57e19fbbe54085dc4f", "committedDate": "2020-10-30T20:58:41Z", "message": "Update to no longer synchronize on Integer objects\n\n- With Java 16, JEP 390 changes Integer wrappers so that they should not\nbe synchronized on any longer."}, "afterCommit": {"oid": "65e88f75e2627c624579673a35f1b51491900fd9", "author": {"user": {"login": "jhanders34", "name": "Jared Anderson"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/65e88f75e2627c624579673a35f1b51491900fd9", "committedDate": "2020-11-05T16:26:35Z", "message": "Update to no longer synchronize on Integer objects\n\n- With Java 16, JEP 390 changes Integer wrappers so that they should not\nbe synchronized on any longer."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjE2NjU3MTk5", "url": "https://github.com/OpenLiberty/open-liberty/pull/14773#pullrequestreview-616657199", "createdAt": "2021-03-19T17:48:33Z", "commit": {"oid": "65e88f75e2627c624579673a35f1b51491900fd9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a3f5437b2cd047868829bbfc90ec07306e542f7", "author": {"user": {"login": "jhanders34", "name": "Jared Anderson"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/3a3f5437b2cd047868829bbfc90ec07306e542f7", "committedDate": "2021-03-23T10:25:39Z", "message": "Update to no longer synchronize on Integer objects\n\n- With Java 16, JEP 390 changes Integer wrappers so that they should not\nbe synchronized on any longer."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "65e88f75e2627c624579673a35f1b51491900fd9", "author": {"user": {"login": "jhanders34", "name": "Jared Anderson"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/65e88f75e2627c624579673a35f1b51491900fd9", "committedDate": "2020-11-05T16:26:35Z", "message": "Update to no longer synchronize on Integer objects\n\n- With Java 16, JEP 390 changes Integer wrappers so that they should not\nbe synchronized on any longer."}, "afterCommit": {"oid": "3a3f5437b2cd047868829bbfc90ec07306e542f7", "author": {"user": {"login": "jhanders34", "name": "Jared Anderson"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/3a3f5437b2cd047868829bbfc90ec07306e542f7", "committedDate": "2021-03-23T10:25:39Z", "message": "Update to no longer synchronize on Integer objects\n\n- With Java 16, JEP 390 changes Integer wrappers so that they should not\nbe synchronized on any longer."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2899, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}