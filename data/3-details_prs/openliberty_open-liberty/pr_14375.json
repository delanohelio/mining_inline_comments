{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5NDA2OTQ0", "number": 14375, "title": "Fix MP Config FAT tests so they can run against mpConfig 2.0", "bodyText": "Created mpConfig2.0 specific tests within the 2.0 FAT bucket where the functionality has changed from 1.X-> 2.0\nCreated mpConfig1.x specific tests/packages within the 1.x FAT buckets, where the Liberty impl has extra or different functionality from SmallRye impl", "createdAt": "2020-10-07T17:29:16Z", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375", "merged": true, "mergeCommit": {"oid": "4271f7fed63046c7545507e89b59e23d38a6f503"}, "closed": true, "closedAt": "2020-10-28T11:00:43Z", "author": {"login": "Joseph-Cass"}, "timelineItems": {"totalCount": 23, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQTpfGAFqTUwNDI3MTg0OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWSB_VABqjM5MjAwNDQ3NzA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0MjcxODQ5", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#pullrequestreview-504271849", "createdAt": "2020-10-07T21:13:31Z", "commit": {"oid": "eb75c416a4dcb50b1203ffe052f04170cb9529d5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMToxMzozMVrOHeFv3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMToxMzozMVrOHeFv3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMxMzUwMw==", "bodyText": "you got some tabs here maybe", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#discussion_r501313503", "createdAt": "2020-10-07T21:13:31Z", "author": {"login": "Emily-Jiang"}, "path": "dev/com.ibm.ws.microprofile.config.1.1_fat/fat/src/com/ibm/ws/microprofile/config/fat/suite/SharedShrinkWrapApps.java", "diffHunk": "@@ -26,7 +26,7 @@\n     public static JavaArchive getTestAppUtilsJar() {\n         final String LIB_NAME = \"testAppUtils\";\n         JavaArchive testAppUtils = ShrinkWrap.create(JavaArchive.class, LIB_NAME + \".jar\")\n-                        .addPackage(\"com.ibm.ws.microprofile.appConfig.test.utils\");\n+                                             .addPackage(\"com.ibm.ws.microprofile.appConfig.test.utils\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb75c416a4dcb50b1203ffe052f04170cb9529d5"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0MjcyMDI0", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#pullrequestreview-504272024", "createdAt": "2020-10-07T21:13:50Z", "commit": {"oid": "eb75c416a4dcb50b1203ffe052f04170cb9529d5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMToxMzo1MFrOHeFwVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMToxMzo1MFrOHeFwVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMxMzYyMw==", "bodyText": "can you fix the format?", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#discussion_r501313623", "createdAt": "2020-10-07T21:13:50Z", "author": {"login": "Emily-Jiang"}, "path": "dev/com.ibm.ws.microprofile.config.1.1_fat/fat/src/com/ibm/ws/microprofile/config/fat/suite/SharedShrinkWrapApps.java", "diffHunk": "@@ -38,22 +38,24 @@ public static WebArchive cdiConfigServerApps() {\n         }\n \n         cdiConfig_war = ShrinkWrap.create(WebArchive.class, APP_NAME + \".war\")\n-                        .addAsManifestResource(new File(\"test-applications/\" + APP_NAME + \".war/resources/META-INF/permissions.xml\"), \"permissions.xml\")\n-                        .addAsManifestResource(new File(\"test-applications/\" + APP_NAME + \".war/resources/META-INF/services/org.eclipse.microprofile.config.spi.ConfigSource\"),\n-                                               \"services/org.eclipse.microprofile.config.spi.ConfigSource\")\n-                        .addAsManifestResource(new File(\"test-applications/\" + APP_NAME + \".war/resources/META-INF/services/org.eclipse.microprofile.config.spi.Converter\"),\n-                                               \"services/org.eclipse.microprofile.config.spi.Converter\")\n-                        .addAsLibrary(cdiConfigJar());\n+                                  .addAsManifestResource(new File(\"test-applications/\" + APP_NAME + \".war/resources/META-INF/permissions.xml\"), \"permissions.xml\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb75c416a4dcb50b1203ffe052f04170cb9529d5"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0Mjc1NDU3", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#pullrequestreview-504275457", "createdAt": "2020-10-07T21:19:21Z", "commit": {"oid": "eb75c416a4dcb50b1203ffe052f04170cb9529d5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMToxOToyMVrOHeF6rw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMToxOToyMVrOHeF6rw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMxNjI3MQ==", "bodyText": "Please list what these tests for.", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#discussion_r501316271", "createdAt": "2020-10-07T21:19:21Z", "author": {"login": "Emily-Jiang"}, "path": "dev/com.ibm.ws.microprofile.config.1.1_fat/fat/src/com/ibm/ws/microprofile/config/fat/tests/LibertySpecificConfigTests.java", "diffHunk": "@@ -0,0 +1,111 @@\n+/*******************************************************************************\n+ * Copyright (c) 2016, 2018 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+package com.ibm.ws.microprofile.config.fat.tests;\n+\n+import java.io.File;\n+\n+import org.jboss.shrinkwrap.api.ShrinkWrap;\n+import org.jboss.shrinkwrap.api.asset.FileAsset;\n+import org.jboss.shrinkwrap.api.spec.WebArchive;\n+import org.junit.AfterClass;\n+import org.junit.BeforeClass;\n+import org.junit.ClassRule;\n+import org.junit.runner.RunWith;\n+\n+import com.ibm.websphere.simplicity.ShrinkHelper;\n+import com.ibm.ws.microprofile.appConfig.cdi.libertyTests.LibertyBuiltInConverterTestServlet;\n+import com.ibm.ws.microprofile.appConfig.cdi.libertyTests.LibertyFieldTestServlet;\n+import com.ibm.ws.microprofile.appConfig.classLoaders.test.libertyTests.LibertyClassLoadersTestServlet;\n+import com.ibm.ws.microprofile.appConfig.converters.test.libertyTests.LibertyConvertersTestServlet;\n+import com.ibm.ws.microprofile.appConfig.defaultSources.tests.libertyTests.LibertyDefaultSourcesTestServlet;\n+import com.ibm.ws.microprofile.config.fat.repeat.RepeatConfigActions;\n+import com.ibm.ws.microprofile.config.fat.repeat.RepeatConfigActions.Version;\n+import com.ibm.ws.microprofile.config.fat.suite.SharedShrinkWrapApps;\n+\n+import componenttest.annotation.Server;\n+import componenttest.annotation.TestServlet;\n+import componenttest.annotation.TestServlets;\n+import componenttest.custom.junit.runner.FATRunner;\n+import componenttest.custom.junit.runner.Mode;\n+import componenttest.custom.junit.runner.Mode.TestMode;\n+import componenttest.rules.repeater.RepeatTests;\n+import componenttest.topology.impl.LibertyServer;\n+import componenttest.topology.utils.FATServletClient;\n+\n+/**\n+ * These tests test Config functionality specific to Liberty's implementation (mpConfig 1.x) of MicroProfile Config specification.\n+ *\n+ * For mpConfig versions <2.0, Open Liberty implemented some extra pieces of functionality beyond the MicroProfile Config specification.\n+ *\n+ * In additon, some tests check for error messages defined by Liberty, and others check functionality which changed between mpConfig 1.4 -> 2.0.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb75c416a4dcb50b1203ffe052f04170cb9529d5"}, "originalPosition": 48}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0Mjc2NTk1", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#pullrequestreview-504276595", "createdAt": "2020-10-07T21:21:14Z", "commit": {"oid": "eb75c416a4dcb50b1203ffe052f04170cb9529d5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMToyMToxNFrOHeF-Wg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMToyMToxNFrOHeF-Wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMxNzIxMA==", "bodyText": "why did you change the year?", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#discussion_r501317210", "createdAt": "2020-10-07T21:21:14Z", "author": {"login": "Emily-Jiang"}, "path": "dev/com.ibm.ws.microprofile.config.1.1_fat/test-applications/brokenCDIConfig.war/src/com/ibm/ws/microprofile/appConfig/cdi/broken/test/TypeWithValidConverter.java", "diffHunk": "@@ -1,5 +1,5 @@\n /*******************************************************************************\n- * Copyright (c) 2019 IBM Corporation and others.\n+ * Copyright (c) 2018 IBM Corporation and others.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb75c416a4dcb50b1203ffe052f04170cb9529d5"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0Mjc2ODk4", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#pullrequestreview-504276898", "createdAt": "2020-10-07T21:21:45Z", "commit": {"oid": "eb75c416a4dcb50b1203ffe052f04170cb9529d5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMToyMTo0NVrOHeF_Ow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMToyMTo0NVrOHeF_Ow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMxNzQzNQ==", "bodyText": "Why did you delete this?", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#discussion_r501317435", "createdAt": "2020-10-07T21:21:45Z", "author": {"login": "Emily-Jiang"}, "path": "dev/com.ibm.ws.microprofile.config.1.1_fat/test-applications/brokenCDIConfig.war/src/com/ibm/ws/microprofile/appConfig/cdi/broken/test/TypeWithValidConverter.java", "diffHunk": "@@ -8,23 +8,21 @@\n  * Contributors:\n  *     IBM Corporation - initial API and implementation\n  *******************************************************************************/\n-package io.openliberty.microprofile.config.internal_fat.apps.badobserver;\n-\n-import javax.inject.Inject;\n-import javax.servlet.annotation.WebServlet;\n-\n-import componenttest.app.FATServlet;\n+package com.ibm.ws.microprofile.appConfig.cdi.broken.test;\n \n /**\n  *\n  */\n-@WebServlet(\"/\")\n-public class BadObserverServlet extends FATServlet {\n+public class TypeWithValidConverter {\n \n-    @Inject\n-    BadObserverBean bean;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb75c416a4dcb50b1203ffe052f04170cb9529d5"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0Mjc4NzAy", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#pullrequestreview-504278702", "createdAt": "2020-10-07T21:24:50Z", "commit": {"oid": "eb75c416a4dcb50b1203ffe052f04170cb9529d5"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eb75c416a4dcb50b1203ffe052f04170cb9529d5", "author": {"user": {"login": "JCass149", "name": "Joseph Cass"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/eb75c416a4dcb50b1203ffe052f04170cb9529d5", "committedDate": "2020-10-07T17:25:03Z", "message": "Fix MP Config FAT tests so that appropriate existing tests can run against mpConfig 2.0\n\n* Created mpConfig2.0 specific tests within the 2.0 FAT bucket where the functionality has changed from 1.X-> 2.0\n* Created mpConfig1.x specific tests/packages within the 1.x FAT buckets, where the Liberty impl has extra or different functionality from SmallRye impl"}, "afterCommit": {"oid": "a260140030f9dcbf66a3ee6072810e0600284365", "author": {"user": {"login": "JCass149", "name": "Joseph Cass"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/a260140030f9dcbf66a3ee6072810e0600284365", "committedDate": "2020-10-08T10:06:57Z", "message": "Fix MP Config FAT tests so that appropriate existing tests can run against mpConfig 2.0\n\n* Created mpConfig2.0 specific tests within the 2.0 FAT bucket where the functionality has changed from 1.X-> 2.0\n* Created mpConfig1.x specific tests/packages within the 1.x FAT buckets, where the Liberty impl has extra or different functionality from SmallRye impl"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0ODMzODgx", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#pullrequestreview-504833881", "createdAt": "2020-10-08T14:18:53Z", "commit": {"oid": "ae2d0e91beabadb975897aa1640f267028f3c1da"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNDoxODo1M1rOHeg6YQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNDoxODo1M1rOHeg6YQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTc1ODU2MQ==", "bodyText": "Note to reviewer(s): Git has muddled up a file creation + deletion for a file rename here.", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#discussion_r501758561", "createdAt": "2020-10-08T14:18:53Z", "author": {"login": "Joseph-Cass"}, "path": "dev/com.ibm.ws.microprofile.config.1.4_fat/fat/src/com/ibm/ws/microprofile/config14/test/LibertySpecificConfigTests.java", "diffHunk": "@@ -1,5 +1,5 @@\n /*******************************************************************************", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae2d0e91beabadb975897aa1640f267028f3c1da"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0ODM0NjUw", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#pullrequestreview-504834650", "createdAt": "2020-10-08T14:19:35Z", "commit": {"oid": "ae2d0e91beabadb975897aa1640f267028f3c1da"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNDoxOTozNVrOHeg8tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNDoxOTozNVrOHeg8tw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTc1OTE1OQ==", "bodyText": "Note to reviewer(s): Git has muddled up a file creation + deletion for a file rename here.", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#discussion_r501759159", "createdAt": "2020-10-08T14:19:35Z", "author": {"login": "Joseph-Cass"}, "path": "dev/com.ibm.ws.microprofile.config.1.1_fat/test-applications/brokenCDIConfig.war/src/com/ibm/ws/microprofile/appConfig/cdi/broken/test/TypeWithNoConverter.java", "diffHunk": "@@ -1,5 +1,5 @@\n /*******************************************************************************", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae2d0e91beabadb975897aa1640f267028f3c1da"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0ODM0NzUw", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#pullrequestreview-504834750", "createdAt": "2020-10-08T14:19:40Z", "commit": {"oid": "ae2d0e91beabadb975897aa1640f267028f3c1da"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNDoxOTo0MVrOHeg8_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNDoxOTo0MVrOHeg8_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTc1OTIzMQ==", "bodyText": "Note to reviewer(s): Git has muddled up a file creation + deletion for a file rename here.", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#discussion_r501759231", "createdAt": "2020-10-08T14:19:41Z", "author": {"login": "Joseph-Cass"}, "path": "dev/com.ibm.ws.microprofile.config.1.1_fat/test-applications/brokenCDIConfig.war/src/com/ibm/ws/microprofile/appConfig/cdi/broken/test/TypeWithValidConverter.java", "diffHunk": "@@ -1,5 +1,5 @@\n /*******************************************************************************", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae2d0e91beabadb975897aa1640f267028f3c1da"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0ODM1MTc1", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#pullrequestreview-504835175", "createdAt": "2020-10-08T14:20:05Z", "commit": {"oid": "ae2d0e91beabadb975897aa1640f267028f3c1da"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNDoyMDowNVrOHeg-Ug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNDoyMDowNVrOHeg-Ug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTc1OTU3MA==", "bodyText": "Note to reviewer(s): Git has muddled up a file creation + deletion for a file rename here.", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#discussion_r501759570", "createdAt": "2020-10-08T14:20:05Z", "author": {"login": "Joseph-Cass"}, "path": "dev/com.ibm.ws.microprofile.config.1.1_fat/test-applications/cdiConfig.jar/src/com/ibm/ws/microprofile/appConfig/cdi/libertyTests/LibertyBuiltInConverterTestServlet.java", "diffHunk": "@@ -1,5 +1,5 @@\n /*******************************************************************************", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae2d0e91beabadb975897aa1640f267028f3c1da"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0ODM1Nzc2", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#pullrequestreview-504835776", "createdAt": "2020-10-08T14:20:40Z", "commit": {"oid": "ae2d0e91beabadb975897aa1640f267028f3c1da"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNDoyMDo0MFrOHehACg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxNDoyMDo0MFrOHehACg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTc2MDAxMA==", "bodyText": "Note to reviewer(s): Git has muddled up a file creation + deletion for a file rename here.", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#discussion_r501760010", "createdAt": "2020-10-08T14:20:40Z", "author": {"login": "Joseph-Cass"}, "path": "dev/io.openliberty.microprofile.config.2.0.internal_fat/fat/src/io/openliberty/microprofile/config/internal_fat/apps/brokenInjection/MissingConfigPropertyBean.java", "diffHunk": "@@ -1,5 +1,5 @@\n /*******************************************************************************", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae2d0e91beabadb975897aa1640f267028f3c1da"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NTUyODQ3", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#pullrequestreview-507552847", "createdAt": "2020-10-13T15:19:58Z", "commit": {"oid": "ae2d0e91beabadb975897aa1640f267028f3c1da"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNToxOTo1OFrOHgsJVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNToxOTo1OFrOHgsJVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAzOTc2NQ==", "bodyText": "Package name has a capitalized O whereas the corresponding directory does not.", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#discussion_r504039765", "createdAt": "2020-10-13T15:19:58Z", "author": {"login": "Azquelt"}, "path": "dev/io.openliberty.microprofile.config.2.0.internal_fat/fat/src/io/openliberty/microprofile/config/internal_fat/apps/badobserver/TestObserver.java", "diffHunk": "@@ -8,7 +8,7 @@\n  * Contributors:\n  *     IBM Corporation - initial API and implementation\n  *******************************************************************************/\n-package io.openliberty.microprofile.config.internal_fat.apps.badobserver;\n+package io.openliberty.microprofile.config.internal_fat.apps.badObserver;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae2d0e91beabadb975897aa1640f267028f3c1da"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NjA4MTUw", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#pullrequestreview-507608150", "createdAt": "2020-10-13T16:14:03Z", "commit": {"oid": "ae2d0e91beabadb975897aa1640f267028f3c1da"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNjoxNDowM1rOHgurPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNjoxNDowM1rOHgurPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDA4MTIxMw==", "bodyText": "These methods which return null look like they're not referenced anywhere any more?", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#discussion_r504081213", "createdAt": "2020-10-13T16:14:03Z", "author": {"login": "Azquelt"}, "path": "dev/com.ibm.ws.microprofile.config.1.1_fat/test-applications/cdiConfig.jar/src/com/ibm/ws/microprofile/appConfig/cdi/beans/ConfigFieldInjectionBean.java", "diffHunk": "@@ -203,25 +167,32 @@ public URL getOPTIONAL_MISSING_KEY() {\n     }\n \n     @Override\n-    public Pizza getPIZZA_KEY() {\n-        return PIZZA_EXISTING_PROP;\n+    public String getMISSING_KEY() {\n+        return MISSING_KEY_WITH_DEFAULT_VALUE;\n     }\n \n     @Override\n-    public Pizza getPIZZA_MISSING_KEY() {\n-        return PIZZA_MISSING_PROP;\n+    public Pizza getPIZZA_GOOD_KEY() {\n+        return PIZZA_GOOD_PROP;\n     }\n \n     @Override\n-    public Pizza getPIZZA_GOOD_KEY() {\n-        return PIZZA_GOOD_PROP;\n+    public Parent getPARENT_KEY() {\n+        return null;\n     }\n \n-//    public Car<Red> getRED_CAR_KEY() {\n-//        return RED_CAR_PROP;\n-//    }\n-//\n-//    public Car<Blue> getBLUE_CAR_KEY() {\n-//        return BLUE_CAR_PROP;\n-//    }\n+    @Override\n+    public Animal getANIMAL_KEY() {\n+        return null;\n+    }\n+\n+    @Override\n+    public Pizza getPIZZA_KEY() {\n+        return null;\n+    }\n+\n+    @Override\n+    public Pizza getPIZZA_MISSING_KEY() {\n+        return null;\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae2d0e91beabadb975897aa1640f267028f3c1da"}, "originalPosition": 137}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NjA5MTg5", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#pullrequestreview-507609189", "createdAt": "2020-10-13T16:15:12Z", "commit": {"oid": "ae2d0e91beabadb975897aa1640f267028f3c1da"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNjoxNToxMlrOHguudg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNjoxNToxMlrOHguudg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDA4MjAzOA==", "bodyText": "Not sure that this interface is actually referenced anywhere apart from the bean that implements it. Maybe it could be taken out?", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#discussion_r504082038", "createdAt": "2020-10-13T16:15:12Z", "author": {"login": "Azquelt"}, "path": "dev/com.ibm.ws.microprofile.config.1.1_fat/test-applications/cdiConfig.jar/src/com/ibm/ws/microprofile/appConfig/cdi/beans/ConfigFieldInjectionInterface.java", "diffHunk": "@@ -48,6 +48,8 @@\n \n     public URL getOPTIONAL_MISSING_KEY();\n \n+    public String getMISSING_KEY();\n+\n     public Pizza getPIZZA_KEY();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae2d0e91beabadb975897aa1640f267028f3c1da"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ae2d0e91beabadb975897aa1640f267028f3c1da", "author": {"user": {"login": "JCass149", "name": "Joseph Cass"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/ae2d0e91beabadb975897aa1640f267028f3c1da", "committedDate": "2020-10-08T14:15:43Z", "message": "Tidy code and update copyright headers"}, "afterCommit": {"oid": "f7e055e4b9389f1e90cfb781e656283ef12bc7dc", "author": {"user": {"login": "JCass149", "name": "Joseph Cass"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/f7e055e4b9389f1e90cfb781e656283ef12bc7dc", "committedDate": "2020-10-14T15:23:59Z", "message": "Tidy code and update copyright headers"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f7e055e4b9389f1e90cfb781e656283ef12bc7dc", "author": {"user": {"login": "JCass149", "name": "Joseph Cass"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/f7e055e4b9389f1e90cfb781e656283ef12bc7dc", "committedDate": "2020-10-14T15:23:59Z", "message": "Tidy code and update copyright headers"}, "afterCommit": {"oid": "b664cc3f8d2a3dc94712d18da7256b7a79706b59", "author": {"user": {"login": "JCass149", "name": "Joseph Cass"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/b664cc3f8d2a3dc94712d18da7256b7a79706b59", "committedDate": "2020-10-21T13:10:04Z", "message": "Tidy code and update copyright headers"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b664cc3f8d2a3dc94712d18da7256b7a79706b59", "author": {"user": {"login": "JCass149", "name": "Joseph Cass"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/b664cc3f8d2a3dc94712d18da7256b7a79706b59", "committedDate": "2020-10-21T13:10:04Z", "message": "Tidy code and update copyright headers"}, "afterCommit": {"oid": "20694486cdef36301c67c39eada4c6d93b51a564", "author": {"user": {"login": "JCass149", "name": "Joseph Cass"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/20694486cdef36301c67c39eada4c6d93b51a564", "committedDate": "2020-10-22T11:07:46Z", "message": "Tidy code and update copyright headers"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1NzgwODYy", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#pullrequestreview-515780862", "createdAt": "2020-10-23T15:31:07Z", "commit": {"oid": "20694486cdef36301c67c39eada4c6d93b51a564"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxNTozMTowN1rOHnS9Sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxNTozMTowN1rOHnS9Sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDk2NzExNQ==", "bodyText": "This test isn't correct any more if any of the system properties or environment variables contain ${foo} as this would trigger property expansion so the input value won't match the value retrieved from config.\nThis does seem to happen on some linux systems.", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#discussion_r510967115", "createdAt": "2020-10-23T15:31:07Z", "author": {"login": "Azquelt"}, "path": "dev/io.openliberty.microprofile.config.2.0.internal_fat/fat/src/io/openliberty/microprofile/config/internal_fat/apps/defaultSources/DefaultSourcesTestServlet.java", "diffHunk": "@@ -0,0 +1,74 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+package io.openliberty.microprofile.config.internal_fat.apps.defaultSources;\n+\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Properties;\n+import java.util.Set;\n+\n+import javax.servlet.annotation.WebServlet;\n+\n+import org.eclipse.microprofile.config.Config;\n+import org.eclipse.microprofile.config.spi.ConfigBuilder;\n+import org.eclipse.microprofile.config.spi.ConfigProviderResolver;\n+import org.junit.Assert;\n+import org.junit.Test;\n+\n+import componenttest.app.FATServlet;\n+\n+@WebServlet(\"/\")\n+public class DefaultSourcesTestServlet extends FATServlet {\n+\n+    /**\n+     *\n+     * @throws Exception\n+     */\n+    @Test\n+    public void defaultSystemConfigProperties() throws Exception {\n+        Map<String, String> systemValues = new HashMap<>(System.getenv());\n+        Properties props = System.getProperties();\n+\n+        // Properties override environment variables.\n+        for (Map.Entry<?, ?> entry : props.entrySet()) {\n+            String key = (String) entry.getKey();\n+            String value = (String) entry.getValue();\n+            systemValues.put(key, value);\n+        }\n+\n+        ConfigBuilder builder = ConfigProviderResolver.instance().getBuilder();\n+        builder.addDefaultSources();\n+        Config config = builder.build();\n+\n+        // Bit of a naughty cast but we know it's a set and that's easier to work on\n+        Set<String> configPropertyNames = (Set<String>) config.getPropertyNames();\n+\n+        Assert.assertFalse(\"There should be at least 1 system value.\", systemValues.isEmpty());\n+\n+        // Check expected Config property values are present\n+        for (Map.Entry<String, String> systemValue : systemValues.entrySet()) {\n+\n+            String expectedKey = systemValue.getKey();\n+\n+            Assert.assertTrue(\"The system value for \" + expectedKey + \" should be a Config property name\",\n+                              configPropertyNames.contains(expectedKey));\n+\n+            if (!systemValue.getValue().isEmpty()) {\n+\n+                String expectedValue = systemValue.getValue();\n+                String actualValue = config.getValue(expectedKey, expectedKey.getClass());\n+\n+                Assert.assertTrue(\"The system value for \" + expectedKey + \" should be \" + expectedValue + \", not \" + actualValue,\n+                                  expectedValue.equals(actualValue));\n+            }\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "20694486cdef36301c67c39eada4c6d93b51a564"}, "originalPosition": 72}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1NzgyNzU3", "url": "https://github.com/OpenLiberty/open-liberty/pull/14375#pullrequestreview-515782757", "createdAt": "2020-10-23T15:33:25Z", "commit": {"oid": "20694486cdef36301c67c39eada4c6d93b51a564"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0adea6b58c6f3187eea2bd09237ed42c68fb805c", "author": {"user": {"login": "JCass149", "name": "Joseph Cass"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/0adea6b58c6f3187eea2bd09237ed42c68fb805c", "committedDate": "2020-10-26T10:43:26Z", "message": "Fix MP Config FAT tests so that appropriate existing tests can run against mpConfig 2.0\n\n* Created mpConfig2.0 specific tests within the 2.0 FAT bucket where the functionality has changed from 1.X-> 2.0\n* Created mpConfig1.x specific tests/packages within the 1.x FAT buckets, where the Liberty impl has extra or different functionality from SmallRye impl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c25341419e31603059e9bde366cb38e47ec3f9d", "author": {"user": {"login": "JCass149", "name": "Joseph Cass"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/7c25341419e31603059e9bde366cb38e47ec3f9d", "committedDate": "2020-10-26T10:43:26Z", "message": "Tidy code and update copyright headers"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "20694486cdef36301c67c39eada4c6d93b51a564", "author": {"user": {"login": "JCass149", "name": "Joseph Cass"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/20694486cdef36301c67c39eada4c6d93b51a564", "committedDate": "2020-10-22T11:07:46Z", "message": "Tidy code and update copyright headers"}, "afterCommit": {"oid": "7c25341419e31603059e9bde366cb38e47ec3f9d", "author": {"user": {"login": "JCass149", "name": "Joseph Cass"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/7c25341419e31603059e9bde366cb38e47ec3f9d", "committedDate": "2020-10-26T10:43:26Z", "message": "Tidy code and update copyright headers"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3153, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}