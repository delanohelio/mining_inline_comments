{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE2ODA0MDc0", "number": 14863, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxOTo1NjozOVrOE27gvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxNDoyNTo1M1rOE3QCRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2MDMzNTk5OnYy", "diffSide": "RIGHT", "path": "dev/io.openliberty.org.jboss.resteasy.validator.provider/bnd.bnd", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxOTo1NjozOVrOHv_UAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxOTo1NjozOVrOHv_UAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDA4MjQzMg==", "bodyText": "This is already pulled in to the common bundle.  Instead of including it here, we should depend on it from the common bundle.", "url": "https://github.com/OpenLiberty/open-liberty/pull/14863#discussion_r520082432", "createdAt": "2020-11-09T19:56:39Z", "author": {"login": "andymc12"}, "path": "dev/io.openliberty.org.jboss.resteasy.validator.provider/bnd.bnd", "diffHunk": "@@ -0,0 +1,66 @@\n+#*******************************************************************************\n+# Copyright (c) 2020 IBM Corporation and others.\n+# All rights reserved. This program and the accompanying materials\n+# are made available under the terms of the Eclipse Public License v1.0\n+# which accompanies this distribution, and is available at\n+# http://www.eclipse.org/legal/epl-v10.html\n+#\n+# Contributors:\n+#     IBM Corporation - initial API and implementation\n+#*******************************************************************************\n+-include= ~../cnf/resources/bnd/bundle.props\n+bVersion=1.0\n+\n+Bundle-SymbolicName: io.openliberty.org.jboss.resteasy.validator.provider\n+\n+src: src, resources\n+\n+app-resources= \\\n+  META-INF/services/javax.ws.rs.ext.Providers| \\\n+  META-INF/services/javax.validation.spi.ValidationProvider\n+  \n+-cdiannotations:\n+\n+Service-Component: \\\n+  io.openliberty.org.jboss.resteasy.validator.provider.ResourceProvider; \\\n+    implementation:=com.ibm.wsspi.classloading.ResourceProvider; \\\n+    provide:=com.ibm.wsspi.classloading.ResourceProvider; \\\n+    configuration-policy:=optional; \\\n+    properties:=\"resources=${app-resources}\"    \n+\n+Export-Package: \\\n+  org.jboss.resteasy.plugins.validation;version=4.5.8.Final;thread-context=true\n+ Private-Package: \\\n+  org.jboss.resteasy.plugins.validation.i18n;version=4.5.8.Final\n+\n+# Using version=! in order to not have a version attached to the import for packages that were removed\n+# from Java after Java 8.  Doing this keeps the import like before Java 11 support. It will get the\n+# packages from Java when using Java 8 or earlier and from the new shipped bundles for Java 9 and later.\n+Import-Package: \\\n+  org.jboss.resteasy.api.validation, \\\n+  org.hibernate.validator.internal,\\\n+  jakarta.persistence,\\\n+  *\n+  \n+#  javax.activation;version=!, \\\n+#  javax.annotation;version=!, \\\n+#  javax.annotation.security;version=!, \\\n+\n+DynamicImport-Package: \\\n+  jakarta.validation.*, \\\n+  jakarta.persistence.*, \\\n+  jakarta.xml.*\n+\n+Include-Resource:\\\n+@${repo;org.jboss.resteasy:resteasy-core-spi;4.5.8.Final;EXACT}, \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f915ac36e53d940183d30e8d518b25ee0de27c4a"}, "originalPosition": 55}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2MDM0MDY5OnYy", "diffSide": "RIGHT", "path": "dev/io.openliberty.org.jboss.resteasy.validator.provider/bnd.bnd", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxOTo1Nzo1NlrOHv_W6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxOTo1Nzo1NlrOHv_W6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDA4MzE3Nw==", "bodyText": "Is there a com.ibm.*validator or io.openliberty.*validator project that we can depend on instead of the open source one?", "url": "https://github.com/OpenLiberty/open-liberty/pull/14863#discussion_r520083177", "createdAt": "2020-11-09T19:57:56Z", "author": {"login": "andymc12"}, "path": "dev/io.openliberty.org.jboss.resteasy.validator.provider/bnd.bnd", "diffHunk": "@@ -0,0 +1,66 @@\n+#*******************************************************************************\n+# Copyright (c) 2020 IBM Corporation and others.\n+# All rights reserved. This program and the accompanying materials\n+# are made available under the terms of the Eclipse Public License v1.0\n+# which accompanies this distribution, and is available at\n+# http://www.eclipse.org/legal/epl-v10.html\n+#\n+# Contributors:\n+#     IBM Corporation - initial API and implementation\n+#*******************************************************************************\n+-include= ~../cnf/resources/bnd/bundle.props\n+bVersion=1.0\n+\n+Bundle-SymbolicName: io.openliberty.org.jboss.resteasy.validator.provider\n+\n+src: src, resources\n+\n+app-resources= \\\n+  META-INF/services/javax.ws.rs.ext.Providers| \\\n+  META-INF/services/javax.validation.spi.ValidationProvider\n+  \n+-cdiannotations:\n+\n+Service-Component: \\\n+  io.openliberty.org.jboss.resteasy.validator.provider.ResourceProvider; \\\n+    implementation:=com.ibm.wsspi.classloading.ResourceProvider; \\\n+    provide:=com.ibm.wsspi.classloading.ResourceProvider; \\\n+    configuration-policy:=optional; \\\n+    properties:=\"resources=${app-resources}\"    \n+\n+Export-Package: \\\n+  org.jboss.resteasy.plugins.validation;version=4.5.8.Final;thread-context=true\n+ Private-Package: \\\n+  org.jboss.resteasy.plugins.validation.i18n;version=4.5.8.Final\n+\n+# Using version=! in order to not have a version attached to the import for packages that were removed\n+# from Java after Java 8.  Doing this keeps the import like before Java 11 support. It will get the\n+# packages from Java when using Java 8 or earlier and from the new shipped bundles for Java 9 and later.\n+Import-Package: \\\n+  org.jboss.resteasy.api.validation, \\\n+  org.hibernate.validator.internal,\\\n+  jakarta.persistence,\\\n+  *\n+  \n+#  javax.activation;version=!, \\\n+#  javax.annotation;version=!, \\\n+#  javax.annotation.security;version=!, \\\n+\n+DynamicImport-Package: \\\n+  jakarta.validation.*, \\\n+  jakarta.persistence.*, \\\n+  jakarta.xml.*\n+\n+Include-Resource:\\\n+@${repo;org.jboss.resteasy:resteasy-core-spi;4.5.8.Final;EXACT}, \\\n+@${repo;org.jboss.resteasy:resteasy-validator-provider;4.5.8.Final;EXACT}, \\\n+META-INF=resources/META-INF\n+\n+-buildpath: \\\n+ org.hibernate.validator;version=latest", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f915ac36e53d940183d30e8d518b25ee0de27c4a"}, "originalPosition": 60}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2MDM0NzQ1OnYy", "diffSide": "RIGHT", "path": "dev/io.openliberty.restfulWS.3.0_fat/bnd.bnd", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxOTo1OTozOVrOHv_a8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQxOTo1OTozOVrOHv_a8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDA4NDIxMQ==", "bodyText": "same as other comment - can we use a com.ibm or io.openliberty project instead?", "url": "https://github.com/OpenLiberty/open-liberty/pull/14863#discussion_r520084211", "createdAt": "2020-11-09T19:59:39Z", "author": {"login": "andymc12"}, "path": "dev/io.openliberty.restfulWS.3.0_fat/bnd.bnd", "diffHunk": "@@ -19,8 +19,11 @@ fat.project: true\n \n \n -buildpath: \\\n-    io.openliberty.jakarta.annotation.2.0;version=latest,\\\n-    io.openliberty.jakarta.jaxb.3.0;version=latest,\\\n-    io.openliberty.jakarta.restfulWS.3.0;version=latest,\\\n+\tio.openliberty.jakarta.annotation.2.0;version=latest,\\\n+\tio.openliberty.jakarta.jaxb.3.0;version=latest,\\\n+\tio.openliberty.jakarta.validation.3.0;version=latest,\\\n+\tio.openliberty.jakarta.restfulWS.3.0;version=latest,\\\n \tio.openliberty.jakarta.servlet.5.0;version=latest,\\\n-\tcom.ibm.ws.componenttest.2.0\n+\tcom.ibm.ws.componenttest.2.0,\\\n+\torg.hibernate.validator;version=latest,\\\n+\tjakarta.validation.jakarta.validation-api", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f915ac36e53d940183d30e8d518b25ee0de27c4a"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2MDM1OTk3OnYy", "diffSide": "RIGHT", "path": "dev/io.openliberty.restfulWS.3.0_fat/fat/src/io/openliberty/restfulWS30/fat/validator/Resource.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMDowMjo1NlrOHv_ieg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMDowMjo1NlrOHv_ieg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDA4NjEzOA==", "bodyText": "It might be better to test with a different constraint annotation.  I'm not 100% sure, but I think it isn't possible to get a null id here anyway - because some sort of ID is required for matching the path.\nMaybe try using @Positive and then send in a negative number or alphabetic characters?", "url": "https://github.com/OpenLiberty/open-liberty/pull/14863#discussion_r520086138", "createdAt": "2020-11-09T20:02:56Z", "author": {"login": "andymc12"}, "path": "dev/io.openliberty.restfulWS.3.0_fat/fat/src/io/openliberty/restfulWS30/fat/validator/Resource.java", "diffHunk": "@@ -0,0 +1,41 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+package io.openliberty.restfulWS30.fat.validator;\n+\n+import jakarta.ws.rs.PathParam;\n+\n+import jakarta.validation.constraints.NotNull;\n+\n+import jakarta.ws.rs.ApplicationPath;\n+import jakarta.ws.rs.POST;\n+import jakarta.ws.rs.Path;\n+import jakarta.ws.rs.Produces;\n+import jakarta.ws.rs.core.Application;\n+\n+\n+\n+@ApplicationPath(\"/app\")\n+@Path(\"/path/{id}\")\n+@Produces(\"text/plain\")\n+public class Resource extends Application {    \n+\n+    private String id;\n+\n+    @POST\n+    public String foo(@NotNull @PathParam(\"id\") String id) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f915ac36e53d940183d30e8d518b25ee0de27c4a"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2MDM3MDU2OnYy", "diffSide": "RIGHT", "path": "dev/io.openliberty.org.jboss.resteasy.validator.provider/resources/META-INF/services/javax.validation.spi.ValidationProvider", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMDowNjowNVrOHv_opw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMDowNjowNVrOHv_opw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDA4NzcxOQ==", "bodyText": "I wonder if we need this file at all.  I think that when the beanValidation-3.0 feature is enabled, that will automatically supply a ValidationProvider for us.", "url": "https://github.com/OpenLiberty/open-liberty/pull/14863#discussion_r520087719", "createdAt": "2020-11-09T20:06:05Z", "author": {"login": "andymc12"}, "path": "dev/io.openliberty.org.jboss.resteasy.validator.provider/resources/META-INF/services/javax.validation.spi.ValidationProvider", "diffHunk": "@@ -0,0 +1 @@\n+org.hibernate.validator.HibernateValidator", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f915ac36e53d940183d30e8d518b25ee0de27c4a"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2MDM3MTgxOnYy", "diffSide": "RIGHT", "path": "dev/io.openliberty.org.jboss.resteasy.validator.provider/resources/META-INF/services/javax.ws.rs.ext.Providers", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMDowNjoyNlrOHv_paw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wOVQyMDowNjoyNlrOHv_paw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDA4NzkxNQ==", "bodyText": "Same as above - I wonder if we need this file at all. I think that when the beanValidation-3.0 feature is enabled, that will automatically supply a ValidationProvider for us.", "url": "https://github.com/OpenLiberty/open-liberty/pull/14863#discussion_r520087915", "createdAt": "2020-11-09T20:06:26Z", "author": {"login": "andymc12"}, "path": "dev/io.openliberty.org.jboss.resteasy.validator.provider/resources/META-INF/services/javax.ws.rs.ext.Providers", "diffHunk": "@@ -0,0 +1,4 @@\n+org.hibernate.validator.HibernateValidator", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f915ac36e53d940183d30e8d518b25ee0de27c4a"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2MzYzODY3OnYy", "diffSide": "RIGHT", "path": "dev/io.openliberty.restfulWS.3.0_fat/bnd.bnd", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxNDoxMzo1MFrOHwecMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxNDoxMzo1MFrOHwecMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDU5MjQzMw==", "bodyText": "You shouldn't need this line since you have io.openliberty.jakarta.validation.3.0;version=latest,\\ above.  IIUC, there is a build time cost for depending on artifacts in Artifactory/Maven Central/etc. vs depending on artifacts built during the build.  The latter is preferred.", "url": "https://github.com/OpenLiberty/open-liberty/pull/14863#discussion_r520592433", "createdAt": "2020-11-10T14:13:50Z", "author": {"login": "andymc12"}, "path": "dev/io.openliberty.restfulWS.3.0_fat/bnd.bnd", "diffHunk": "@@ -19,8 +19,10 @@ fat.project: true\n \n \n -buildpath: \\\n-    io.openliberty.jakarta.annotation.2.0;version=latest,\\\n-    io.openliberty.jakarta.jaxb.3.0;version=latest,\\\n-    io.openliberty.jakarta.restfulWS.3.0;version=latest,\\\n+\tio.openliberty.jakarta.annotation.2.0;version=latest,\\\n+\tio.openliberty.jakarta.jaxb.3.0;version=latest,\\\n+\tio.openliberty.jakarta.validation.3.0;version=latest,\\\n+\tio.openliberty.jakarta.restfulWS.3.0;version=latest,\\\n \tio.openliberty.jakarta.servlet.5.0;version=latest,\\\n-\tcom.ibm.ws.componenttest.2.0\n+\tcom.ibm.ws.componenttest.2.0,\\\n+\tjakarta.validation.jakarta.validation-api", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "251867a9c0a68847e21166dc08213b947b030075"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2MzY5ODYzOnYy", "diffSide": "RIGHT", "path": "dev/io.openliberty.restfulWS.3.0_fat/fat/src/io/openliberty/restfulWS30/fat/validator/ValidatorTestServlet.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxNDoyNTo1M1rOHwfBOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxNDoyNTo1M1rOHwfBOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDYwMTkxNA==", "bodyText": "I don't think we need this test.  It's basically just testing manual bean validation - I think the BV FATs have something similar.  We really only need tests that bean validation is performed on JAX-RS resources and providers.", "url": "https://github.com/OpenLiberty/open-liberty/pull/14863#discussion_r520601914", "createdAt": "2020-11-10T14:25:53Z", "author": {"login": "andymc12"}, "path": "dev/io.openliberty.restfulWS.3.0_fat/fat/src/io/openliberty/restfulWS30/fat/validator/ValidatorTestServlet.java", "diffHunk": "@@ -0,0 +1,97 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+package io.openliberty.restfulWS30.fat.validator;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n+\n+import java.io.InputStream;\n+import java.net.HttpURLConnection;\n+import java.net.URI;\n+import java.util.HashSet;\n+import java.util.Set;\n+\n+import jakarta.servlet.annotation.WebServlet;\n+import jakarta.validation.ConstraintViolation;\n+import jakarta.validation.Validation;\n+import jakarta.validation.Validator;\n+import jakarta.validation.constraints.NotNull;\n+\n+import org.junit.Test;\n+\n+import componenttest.app.FATServlet;\n+\n+@SuppressWarnings(\"serial\")\n+@WebServlet(\"/ValidatorTestServlet\")\n+public class ValidatorTestServlet extends FATServlet {\n+\n+    @Test\n+    public void testNotNullViolations() {\n+        Validator validator = Validation.buildDefaultValidatorFactory().getValidator();\n+        System.out.println(\"testNotNullViolations validator \" + validator.toString());\n+        \n+        MyBean myBean = new MyBean();\n+        myBean.notNull = null;\n+        assertViolations(validator.validate(myBean), NotNull.class);\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "251867a9c0a68847e21166dc08213b947b030075"}, "originalPosition": 44}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2528, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}