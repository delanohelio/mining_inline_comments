{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3NzQwNjY0", "number": 10601, "title": "disabled test for two embedded resource adapters with login modules", "bodyText": "Enhance the tests for embedded resource adapters with login modules to add a login module into the second embedded RAR so that both have login modules.  This will help that we are able to load the right one even if there are multiple.  But we cannot enable the test until the function is added, so for now, it will also package the login modules in a separate library, which we can remove when the real function is ready to test.", "createdAt": "2020-01-27T22:42:05Z", "url": "https://github.com/OpenLiberty/open-liberty/pull/10601", "merged": true, "mergeCommit": {"oid": "126942a493569a82b41cc9af58b4a68a67ce16a3"}, "closed": true, "closedAt": "2020-01-28T14:47:03Z", "author": {"login": "njr-11"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-konpgH2gAyMzY3NzQwNjY0OmM1MDVmODViNzQxYzQxYjljNTc3MTNhMjU1ZWFmMGNiZmY0MDBhMjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-k4C9AH2gAyMzY3NzQwNjY0OjM0NDMyZjFmZWE3OGYyMGZjNzE0ZTk2YmUwNTk2Mzk5ZDVkMjEwZDA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c505f85b741c41b9c57713a255eaf0cbff400a26", "author": {"user": {"login": "njr-11", "name": "Nathan Rauh"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/c505f85b741c41b9c57713a255eaf0cbff400a26", "committedDate": "2020-01-27T22:39:11Z", "message": "Issue #10529 disabled test for two embedded resource adapters with login modules"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MDMxMzUx", "url": "https://github.com/OpenLiberty/open-liberty/pull/10601#pullrequestreview-349031351", "createdAt": "2020-01-27T22:51:05Z", "commit": {"oid": "c505f85b741c41b9c57713a255eaf0cbff400a26"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMjo1MTowNlrOFiUO8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QyMjo1MTowNlrOFiUO8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTUyNzQwOQ==", "bodyText": "Not sure if you meant to leave this print statement here.  If so, maybe something like, Found login module property key=loginName value=", "url": "https://github.com/OpenLiberty/open-liberty/pull/10601#discussion_r371527409", "createdAt": "2020-01-27T22:51:06Z", "author": {"login": "KyleAure"}, "path": "dev/com.ibm.ws.jca_fat_enterpriseApp/test-resourceadapters/enterpriseAppRA/src/com/ibm/test/jca/enterprisera/EALoginModule.java", "diffHunk": "@@ -0,0 +1,81 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+package com.ibm.test.jca.enterprisera;\n+\n+import java.security.AccessController;\n+import java.security.PrivilegedAction;\n+import java.util.Map;\n+\n+import javax.resource.spi.security.PasswordCredential;\n+import javax.security.auth.Subject;\n+import javax.security.auth.callback.Callback;\n+import javax.security.auth.callback.CallbackHandler;\n+import javax.security.auth.login.LoginException;\n+import javax.security.auth.spi.LoginModule;\n+\n+import com.ibm.wsspi.security.auth.callback.WSManagedConnectionFactoryCallback;\n+import com.ibm.wsspi.security.auth.callback.WSMappingPropertiesCallback;\n+\n+/**\n+ * This login module always assigns the user name based on a login property called \"loginName\".\n+ */\n+public class EALoginModule implements LoginModule {\n+    private CallbackHandler callbackHandler;\n+    private Subject subject;\n+\n+    @Override\n+    public void initialize(Subject subject, CallbackHandler callbackHandler, Map<String, ?> sharedState, Map<String, ?> options) {\n+        this.callbackHandler = callbackHandler;\n+        this.subject = subject;\n+    }\n+\n+    @Override\n+    public boolean login() throws LoginException {\n+        try {\n+            final WSManagedConnectionFactoryCallback mcfCallback = new WSManagedConnectionFactoryCallback(\"Target ManagedConnectionFactory: \");\n+            WSMappingPropertiesCallback mpropsCallback = new WSMappingPropertiesCallback(\"Mapping Properties (HashMap): \");\n+            callbackHandler.handle(new Callback[] { mcfCallback, mpropsCallback });\n+\n+            Map<?, ?> properties = mpropsCallback.getProperties();\n+            final String loginName = (String) properties.get(\"loginName\");\n+            System.out.println(\"### LOGINMODULE PROP \" + loginName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c505f85b741c41b9c57713a255eaf0cbff400a26"}, "originalPosition": 49}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34432f1fea78f20fc714e96be0596399d5d210d0", "author": {"user": {"login": "njr-11", "name": "Nathan Rauh"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/34432f1fea78f20fc714e96be0596399d5d210d0", "committedDate": "2020-01-27T22:56:02Z", "message": "Issue #10529 code review fix for println left in code"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3278, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}