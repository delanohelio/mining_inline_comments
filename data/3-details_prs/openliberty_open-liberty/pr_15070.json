{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI0NzQzMDUz", "number": 15070, "title": "Avoid NPE in case where an app handler is unset", "bodyText": "", "createdAt": "2020-11-20T14:30:30Z", "url": "https://github.com/OpenLiberty/open-liberty/pull/15070", "merged": true, "mergeCommit": {"oid": "c0c84a39b9d9e8b0f6a40655001dd0af72d1ab48"}, "closed": true, "closedAt": "2020-11-24T15:05:46Z", "author": {"login": "brenthdaniel"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdeYP0nAH2gAyNTI0NzQzMDUzOmQ5YjVlZWZiZWZlMzM5ZmExMTQ1N2U2YjZiY2M0NmJhYmM2ZGU5ZTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdedvDIAFqTUzNTc2ODc1OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d9b5eefbefe339fa11457e6b6bcc46babc6de9e7", "author": {"user": {"login": "brenthdaniel", "name": "Brent Daniel"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/d9b5eefbefe339fa11457e6b6bcc46babc6de9e7", "committedDate": "2020-11-20T14:29:58Z", "message": "Avoid NPE in case where an app handler is unset"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1NzMzNjYw", "url": "https://github.com/OpenLiberty/open-liberty/pull/15070#pullrequestreview-535733660", "createdAt": "2020-11-20T19:53:11Z", "commit": {"oid": "d9b5eefbefe339fa11457e6b6bcc46babc6de9e7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQxOTo1MzoxMVrOH3evMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQxOTo1NToxNFrOH3ezGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzkzNzMzMQ==", "bodyText": "I would make this final", "url": "https://github.com/OpenLiberty/open-liberty/pull/15070#discussion_r527937331", "createdAt": "2020-11-20T19:53:11Z", "author": {"login": "tjwatson"}, "path": "dev/com.ibm.ws.app.manager/src/com/ibm/ws/app/manager/internal/statemachine/StartAction.java", "diffHunk": "@@ -118,8 +118,14 @@ public StartAction(ApplicationConfig config,\n     @Override\n     public void execute(ExecutorService executor) {\n         _startTime.set(System.currentTimeMillis());\n+        @SuppressWarnings({ \"rawtypes\" })\n+        ApplicationHandler handler = _aii.getHandler();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9b5eefbefe339fa11457e6b6bcc46babc6de9e7"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzkzODMzMA==", "bodyText": "I don't see how an NPE is prevented here when handler==null. Did you intend to return early from the if (handler == null) check above?", "url": "https://github.com/OpenLiberty/open-liberty/pull/15070#discussion_r527938330", "createdAt": "2020-11-20T19:55:14Z", "author": {"login": "tjwatson"}, "path": "dev/com.ibm.ws.app.manager/src/com/ibm/ws/app/manager/internal/statemachine/StartAction.java", "diffHunk": "@@ -128,13 +134,11 @@ public void execute(ExecutorService executor) {\n             @SuppressWarnings(\"deprecation\")\n             @Override\n             public void run() {\n-                AppMessageHelper.get(_aii.getHandler()).audit(\"APPLICATION_SLOW_STARTUP\", _config.getName(), TimestampUtils.getElapsedTime(_startTime.get()));\n+                AppMessageHelper.get(handler).audit(\"APPLICATION_SLOW_STARTUP\", _config.getName(), TimestampUtils.getElapsedTime(_startTime.get()));\n             }\n         }, maxWait, TimeUnit.SECONDS));\n \n         try {\n-            @SuppressWarnings(\"rawtypes\")\n-            ApplicationHandler handler = _aii.getHandler();\n             @SuppressWarnings(\"unchecked\")\n             ApplicationMonitoringInformation ami = handler.setUpApplicationMonitoring(_aii);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d9b5eefbefe339fa11457e6b6bcc46babc6de9e7"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd7281a722f0c4cfeccf76c750f205e03deb9080", "author": {"user": {"login": "brenthdaniel", "name": "Brent Daniel"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/cd7281a722f0c4cfeccf76c750f205e03deb9080", "committedDate": "2020-11-20T20:34:56Z", "message": "Return when the handler is null"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e512885f44196e1289449da96a10367bfe011c1e", "author": {"user": {"login": "brenthdaniel", "name": "Brent Daniel"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/e512885f44196e1289449da96a10367bfe011c1e", "committedDate": "2020-11-20T20:46:00Z", "message": "Make handler final"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1NzY4NzU4", "url": "https://github.com/OpenLiberty/open-liberty/pull/15070#pullrequestreview-535768758", "createdAt": "2020-11-20T20:53:36Z", "commit": {"oid": "e512885f44196e1289449da96a10367bfe011c1e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2870, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}