{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk3MDAyMTY3", "number": 11580, "title": "Preserve HTTP response code in mpOpenTracing", "bodyText": "When using mpOpenTracing-1.x, exceptions thrown by applications were always mapped to response code 500.\nIn the exception mapper, preserve the Response if the exception is an instance of WebApplicationException and the original response code is kept.\nFixes #11408", "createdAt": "2020-04-01T13:38:58Z", "url": "https://github.com/OpenLiberty/open-liberty/pull/11580", "merged": true, "mergeCommit": {"oid": "7beb6835e6020c7796d6a01206447b03032fce2f"}, "closed": true, "closedAt": "2020-04-16T13:57:23Z", "author": {"login": "fmhwong"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVab-ngFqTM4OTUwODg0OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVrqxuAFqTM5MDE5OTM0MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5NTA4ODQ4", "url": "https://github.com/OpenLiberty/open-liberty/pull/11580#pullrequestreview-389508848", "createdAt": "2020-04-07T21:37:19Z", "commit": {"oid": "1b88d2df50253cc22d3ad974890331cc95a91c07"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QyMTozNzoxOVrOGCXEug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QyMTozOTo1NFrOGCXJ3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTEyODM3OA==", "bodyText": "Expected exception", "url": "https://github.com/OpenLiberty/open-liberty/pull/11580#discussion_r405128378", "createdAt": "2020-04-07T21:37:19Z", "author": {"login": "donbourne"}, "path": "dev/com.ibm.ws.opentracing.1.x_fat/fat/src/com/ibm/ws/testing/opentracing/test/FATMPOpenTracing.java", "diffHunk": "@@ -99,22 +105,57 @@ public void testHelloWorld() throws Exception {\n             tracerState += actualResponseLine;\n         }\n \n+        int expectedSpans = 3;\n+        int spanCount = getSpanCount(tracerState);\n+        if (spanCount != expectedSpans) {\n+            Assert.assertEquals(\"Expected \" + expectedSpans + \" spans but found \" + spanCount + \":\", tracerState);\n+        }\n+    }\n+    \n+    @Test\n+    public void testNotFoundException() throws Exception {\n+    \tString methodName = \"testNotFoundException\";\n+\n+        try {\n+            \n+            executeWebService(\"notFound\");\n+        } catch (TestAppException tae) {\n+            FATLogging.info(CLASS, methodName, \"Expection exception\", tae);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1b88d2df50253cc22d3ad974890331cc95a91c07"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTEyOTY5Mg==", "bodyText": "why does number of expected spans change to 3 (from 2)?", "url": "https://github.com/OpenLiberty/open-liberty/pull/11580#discussion_r405129692", "createdAt": "2020-04-07T21:39:54Z", "author": {"login": "donbourne"}, "path": "dev/com.ibm.ws.opentracing.1.x_fat/fat/src/com/ibm/ws/testing/opentracing/test/FATMPOpenTracing.java", "diffHunk": "@@ -99,22 +105,57 @@ public void testHelloWorld() throws Exception {\n             tracerState += actualResponseLine;\n         }\n \n+        int expectedSpans = 3;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1b88d2df50253cc22d3ad974890331cc95a91c07"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7164317b24a717e6846ef91ac68ee5e1b5928dc2", "author": {"user": {"login": "fmhwong", "name": "Felix Wong"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/7164317b24a717e6846ef91ac68ee5e1b5928dc2", "committedDate": "2020-04-08T14:18:06Z", "message": "Preserve response code"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1b88d2df50253cc22d3ad974890331cc95a91c07", "author": {"user": {"login": "fmhwong", "name": "Felix Wong"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/1b88d2df50253cc22d3ad974890331cc95a91c07", "committedDate": "2020-04-01T13:23:27Z", "message": "Preserve response code"}, "afterCommit": {"oid": "7164317b24a717e6846ef91ac68ee5e1b5928dc2", "author": {"user": {"login": "fmhwong", "name": "Felix Wong"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/7164317b24a717e6846ef91ac68ee5e1b5928dc2", "committedDate": "2020-04-08T14:18:06Z", "message": "Preserve response code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwMTk5MzQx", "url": "https://github.com/OpenLiberty/open-liberty/pull/11580#pullrequestreview-390199341", "createdAt": "2020-04-08T17:51:08Z", "commit": {"oid": "7164317b24a717e6846ef91ac68ee5e1b5928dc2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2871, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}