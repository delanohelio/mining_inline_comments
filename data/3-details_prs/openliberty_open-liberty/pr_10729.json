{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcxMDg0NDY0", "number": 10729, "title": "Ensure LTPA Keys are created before hitting https endpoint", "bodyText": "In relation to #10675\nThis PR is meant to fix #10675.\nThe test failure is caused by attempting to hit a secure endpoint before the LTPA keys are created and LTPA is configured. This meant that the test received a 401 response code and thus failed as that is not the expected response.\nThe fix is to simply add a wait statement in the test code to hold off hitting any secure endpoints until after the LTPA keys are created and LTPA is configured. This fix is applied to all test cases under\nTestEnableDisableFeaturesTest.\nIn addition to the fix, a bunch of other changes were made to the strings/regexps that the test code was waiting for throughout the tests. The strings/regexps should not contain any English phrases such as \"Web application available\". The corresponding message codes were used instead.\nFor more information about LTPA refer to https://www.ibm.com/support/knowledgecenter/SSFS6T/com.ibm.apic.apionprem.doc/task_apionprem_ltpa_new.html", "createdAt": "2020-02-04T22:34:54Z", "url": "https://github.com/OpenLiberty/open-liberty/pull/10729", "merged": true, "mergeCommit": {"oid": "5ed7f2ad42f14e3d046a14f99d659033dab90e4c"}, "closed": true, "closedAt": "2020-02-06T21:44:00Z", "author": {"login": "lamkavan"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcBJWOvAH2gAyMzcxMDg0NDY0OmJlNGM2MDdiZmQ4ZmZmMjkyZTgzYWIwN2Q1NDI5OWJiYTg2ZmM0Mjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcBxdFDgFqTM1NDc3Nzg3NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "be4c607bfd8fff292e83ab07d54299bba86fc428", "author": {"user": null}, "url": "https://github.com/OpenLiberty/open-liberty/commit/be4c607bfd8fff292e83ab07d54299bba86fc428", "committedDate": "2020-02-04T22:33:26Z", "message": "Ensure LTPA Keys are created before hitting https endpoint"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzODAzNDc2", "url": "https://github.com/OpenLiberty/open-liberty/pull/10729#pullrequestreview-353803476", "createdAt": "2020-02-05T15:24:45Z", "commit": {"oid": "be4c607bfd8fff292e83ab07d54299bba86fc428"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNToyNDo0NVrOFl733A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNToyNDo0NVrOFl733A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMyMjU4OA==", "bodyText": "Is there a reason to keep this instead of changing to waitForSecurityPrerequisites(serverEDF6, 60000);?", "url": "https://github.com/OpenLiberty/open-liberty/pull/10729#discussion_r375322588", "createdAt": "2020-02-05T15:24:45Z", "author": {"login": "fmhwong"}, "path": "dev/com.ibm.ws.microprofile.metrics.monitor_fat/fat/src/com/ibm/ws/microprofile/metrics/monitor_fat/TestEnableDisableFeaturesTest.java", "diffHunk": "@@ -299,7 +299,7 @@ public void testEDF7() throws Exception {\n     \tcurrentServ = serverEDF6;\n     \tString testName = \"testEDF7\";\n     \tserverEDF6.startServer();\n-    \tAssert.assertNotNull(\"CWWKO0219I NOT FOUND\",serverEDF6.waitForStringInLog(\"defaultHttpEndpoint-ssl\",60000));\n+    \tAssert.assertNotNull(\"TCP Channel defaultHttpEndpoint-ssl has not started (CWWKO0219I not found)\",serverEDF6.waitForStringInLog(\"CWWKO0219I.*defaultHttpEndpoint-ssl\",60000));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be4c607bfd8fff292e83ab07d54299bba86fc428"}, "originalPosition": 73}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzODE0NTQ3", "url": "https://github.com/OpenLiberty/open-liberty/pull/10729#pullrequestreview-353814547", "createdAt": "2020-02-05T15:37:23Z", "commit": {"oid": "be4c607bfd8fff292e83ab07d54299bba86fc428"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a154546b0c9ffdd3d428c6618015d1ed14afcbf4", "author": {"user": null}, "url": "https://github.com/OpenLiberty/open-liberty/commit/a154546b0c9ffdd3d428c6618015d1ed14afcbf4", "committedDate": "2020-02-05T19:34:56Z", "message": "Ensure that order of execution does not effect behaviour"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0Nzc3ODc1", "url": "https://github.com/OpenLiberty/open-liberty/pull/10729#pullrequestreview-354777875", "createdAt": "2020-02-06T21:17:07Z", "commit": {"oid": "a154546b0c9ffdd3d428c6618015d1ed14afcbf4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3332, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}