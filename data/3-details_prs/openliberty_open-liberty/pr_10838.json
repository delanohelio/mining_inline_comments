{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczODMxMDQx", "number": 10838, "title": "Ensure SSL passwords are not logged in oracle connection properties", "bodyText": "Fixes #8547\nFilters out SSL passwords in oracle connection properties when traced.\nInput:\njavax.net.ssl.keyStore=path-to-keystore/keystore.p12;javax.net.ssl.keyStorePassword= {aes}AGSgzua84RvVKvqP/N1FhMMbhdoFoht03A+T02KrDZ4QAJngbba3jDbVUVnhGTZ0Ig==;javax.net.ssl.trustStore= path-to-keystore/keystore.p12;javax.net.ssl.trustStoreType=PKCS12;javax.net.ssl.trustStorePassword=password\"\n\nOutput:\njavax.net.ssl.keyStore=path-to-keystore/keystore.p12;javax.net.ssl.keyStorePassword= *****;javax.net.ssl.trustStore= path-to-keystore/keystore.p12;javax.net.ssl.trustStoreType=PKCS12;javax.net.ssl.trustStorePassword=*****\"", "createdAt": "2020-02-11T19:11:36Z", "url": "https://github.com/OpenLiberty/open-liberty/pull/10838", "merged": true, "mergeCommit": {"oid": "ee0145555d9a8ef0f60570c6bc8a64a7dbee7d9d"}, "closed": true, "closedAt": "2020-02-13T14:33:20Z", "author": {"login": "KyleAure"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDWWkWgH2gAyMzczODMxMDQxOjZhOGFmNzkyNjIyOTExZmRkYWYwMjkyNGJlODZhYjQ0MWI2MzJiMmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDprCJAFqTM1NzY0MDUzMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6a8af792622911fddaf02924be86ab441b632b2f", "author": {"user": {"login": "KyleAure", "name": "Kyle Aure"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/6a8af792622911fddaf02924be86ab441b632b2f", "committedDate": "2020-02-11T18:50:25Z", "message": "Ensure connection property passwords are not logged."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2OTU5MTY1", "url": "https://github.com/OpenLiberty/open-liberty/pull/10838#pullrequestreview-356959165", "createdAt": "2020-02-11T20:09:31Z", "commit": {"oid": "6a8af792622911fddaf02924be86ab441b632b2f"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQyMDowOTozMVrOFoXaYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQyMDoxNToyOVrOFoXkWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg3MDk0NA==", "bodyText": ".toLowerCase().contains(\"connectionProperties\") won't ever be true", "url": "https://github.com/OpenLiberty/open-liberty/pull/10838#discussion_r377870944", "createdAt": "2020-02-11T20:09:31Z", "author": {"login": "njr-11"}, "path": "dev/com.ibm.ws.jdbc/src/com/ibm/ws/jdbc/internal/PropertyService.java", "diffHunk": "@@ -161,6 +172,8 @@ public int hashCode() {\n                 entry.setValue(\"******\");\n             else if(entry.getKey() instanceof String && entry.getValue() instanceof String && ((String) entry.getKey()).toLowerCase().contains(\"url\"))\n                 entry.setValue(filterURL((String) entry.getValue()));\n+            else if (entry.getKey() instanceof String && entry.getKey() instanceof String && ((String) entry.getKey()).toLowerCase().contains(\"connectionProperties\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a8af792622911fddaf02924be86ab441b632b2f"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg3MzQ5OA==", "bodyText": "Rather than having separate patterns/matchers for keyStorePassword=..., you could use a single pattern for just Password=...", "url": "https://github.com/OpenLiberty/open-liberty/pull/10838#discussion_r377873498", "createdAt": "2020-02-11T20:15:29Z", "author": {"login": "njr-11"}, "path": "dev/com.ibm.ws.jdbc/src/com/ibm/ws/jdbc/internal/PropertyService.java", "diffHunk": "@@ -194,6 +207,23 @@ public static String filterURL(String url) {\n         sb.append(\"****\");\n         return sb.toString();\n     }\n+    \n+    public static String filterConnectionProperties(String props) {\n+        final String keyStorePattern = \"javax\\\\.net\\\\.ssl\\\\.keyStorePassword\\\\s*=\\\\s*(.*?)\\\\s*(;|$)\";\n+        final String trustStorePattern = \"javax\\\\.net\\\\.ssl\\\\.trustStorePassword\\\\s*=\\\\s*(.*?)\\\\s*(;|$)\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a8af792622911fddaf02924be86ab441b632b2f"}, "originalPosition": 43}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea7dd91584e1a76d0e588829ccb872fad2dd1be7", "author": {"user": {"login": "KyleAure", "name": "Kyle Aure"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/ea7dd91584e1a76d0e588829ccb872fad2dd1be7", "committedDate": "2020-02-12T17:11:10Z", "message": "feedback changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3NjQwNTMy", "url": "https://github.com/OpenLiberty/open-liberty/pull/10838#pullrequestreview-357640532", "createdAt": "2020-02-12T17:20:58Z", "commit": {"oid": "ea7dd91584e1a76d0e588829ccb872fad2dd1be7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3194, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}