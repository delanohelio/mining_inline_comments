{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzNTAxOTM0", "number": 14489, "title": "Log derby network start", "bodyText": "Currently when we test to ensure that Derby Network has started correctly output it sent to system out instead of properly to our test output.\nThis will help if there are any delays in starting derby network and hopefully make triaging these issues easier.", "createdAt": "2020-10-14T16:38:57Z", "url": "https://github.com/OpenLiberty/open-liberty/pull/14489", "merged": true, "mergeCommit": {"oid": "cbfd288a08e6629977777203c7f3bd47f4bacb53"}, "closed": true, "closedAt": "2020-10-15T16:22:55Z", "author": {"login": "KyleAure"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSf-v4ABqjM4Nzc1NDQxNDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSi7CqAFqTUwODY5MDQwNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "72f41c70e4fb249499896bcde8b329cf5ca9307f", "author": {"user": {"login": "KyleAure", "name": "Kyle Aure"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/72f41c70e4fb249499896bcde8b329cf5ca9307f", "committedDate": "2020-10-14T16:34:46Z", "message": "Ensure derby startup logs are traced"}, "afterCommit": {"oid": "45addf967833ad81ce83f1bb1eebf521ec043333", "author": {"user": {"login": "KyleAure", "name": "Kyle Aure"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/45addf967833ad81ce83f1bb1eebf521ec043333", "committedDate": "2020-10-14T16:43:13Z", "message": "Ensure derby startup logs are traced"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "45addf967833ad81ce83f1bb1eebf521ec043333", "author": {"user": {"login": "KyleAure", "name": "Kyle Aure"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/45addf967833ad81ce83f1bb1eebf521ec043333", "committedDate": "2020-10-14T16:43:13Z", "message": "Ensure derby startup logs are traced"}, "afterCommit": {"oid": "32fee406dad5e7e83c48eb2bb43d40dc8b25a362", "author": {"user": {"login": "KyleAure", "name": "Kyle Aure"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/32fee406dad5e7e83c48eb2bb43d40dc8b25a362", "committedDate": "2020-10-14T16:59:20Z", "message": "Ensure derby startup logs are traced"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NjMwMTUy", "url": "https://github.com/OpenLiberty/open-liberty/pull/14489#pullrequestreview-508630152", "createdAt": "2020-10-14T18:44:04Z", "commit": {"oid": "32fee406dad5e7e83c48eb2bb43d40dc8b25a362"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxODo0NDowNFrOHhgXSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxODo0NDowNFrOHhgXSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg5NTMwNw==", "bodyText": "Did you leave off the m argument for the 2nd parameter intentionally?", "url": "https://github.com/OpenLiberty/open-liberty/pull/14489#discussion_r504895307", "createdAt": "2020-10-14T18:44:04Z", "author": {"login": "gjwatts"}, "path": "dev/fattest.simplicity/src/componenttest/topology/database/DerbyNetworkUtilities.java", "diffHunk": "@@ -16,43 +16,47 @@\n \n import org.apache.derby.drda.NetworkServerControl;\n \n+import com.ibm.websphere.simplicity.log.Log;\n+\n /**\n  * Provides methods for starting and stopping Derby Network.\n  * The server is checked a number of times to be sure it has started,\n  * otherwise the exception returned from the ping is thrown.\n  */\n public class DerbyNetworkUtilities {\n+    private static final Class<?> c = DerbyNetworkUtilities.class;\n \n     static final int NUMBER_OF_PINGS = 10;\n     static final int SLEEP_BETWEEN_PINGS = 10000;\n-    // TODO serverName and portNumber are hard coded, \n+    // TODO serverName and portNumber are hard coded,\n     // but in the future should be taken from bootstrapping.properties if specified\n     static final String serverName = \"localhost\";\n     static final int portNumber = 1527;\n \n     static public void startDerbyNetwork() throws UnknownHostException, Exception {\n-        NetworkServerControl serverControl =\n-                        new NetworkServerControl(InetAddress.getByName(serverName), portNumber);\n+        final String m = \"startDerbyNetwork\";\n+        NetworkServerControl serverControl = new NetworkServerControl(InetAddress.getByName(serverName), portNumber);\n         serverControl.start(new PrintWriter(System.out));\n         for (int i = 1; i <= NUMBER_OF_PINGS; i++) {\n             try {\n-                System.out.println(\"Attempt \" + i + \" to see if Derby Network server started\");\n+                Log.info(c, m, \"Attempt \" + i + \" to see if Derby Network server started\");\n                 serverControl.ping();\n                 break;\n             } catch (Exception ex) {\n                 if (i == NUMBER_OF_PINGS) {\n-                    System.out.println(\"Derby Network server failed to start\");\n-                    ex.printStackTrace();\n+                    Log.info(c, m, \"Derby Network server failed to start\");\n+                    Log.error(c, m, ex);\n                     throw ex;\n+                } else {\n+                    Log.warning(c, \"Attempt \" + i + \" failed due to exception: \" + System.lineSeparator() + ex.getMessage());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32fee406dad5e7e83c48eb2bb43d40dc8b25a362"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NjMwNTQx", "url": "https://github.com/OpenLiberty/open-liberty/pull/14489#pullrequestreview-508630541", "createdAt": "2020-10-14T18:44:39Z", "commit": {"oid": "32fee406dad5e7e83c48eb2bb43d40dc8b25a362"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0594ae8824bd104767d8aa1edb8d0fc65df90221", "author": {"user": {"login": "KyleAure", "name": "Kyle Aure"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/0594ae8824bd104767d8aa1edb8d0fc65df90221", "committedDate": "2020-10-14T20:06:36Z", "message": "Ensure derby startup logs are traced"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "32fee406dad5e7e83c48eb2bb43d40dc8b25a362", "author": {"user": {"login": "KyleAure", "name": "Kyle Aure"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/32fee406dad5e7e83c48eb2bb43d40dc8b25a362", "committedDate": "2020-10-14T16:59:20Z", "message": "Ensure derby startup logs are traced"}, "afterCommit": {"oid": "0594ae8824bd104767d8aa1edb8d0fc65df90221", "author": {"user": {"login": "KyleAure", "name": "Kyle Aure"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/0594ae8824bd104767d8aa1edb8d0fc65df90221", "committedDate": "2020-10-14T20:06:36Z", "message": "Ensure derby startup logs are traced"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NjkwNDA2", "url": "https://github.com/OpenLiberty/open-liberty/pull/14489#pullrequestreview-508690406", "createdAt": "2020-10-14T20:09:08Z", "commit": {"oid": "0594ae8824bd104767d8aa1edb8d0fc65df90221"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3056, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}