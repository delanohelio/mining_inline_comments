{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2NDA1Mzgy", "number": 11866, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQyMDo0MTo0MFrOD0bWwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxNzoxNjo0N1rOD1Yq_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MzAwNzM3OnYy", "diffSide": "RIGHT", "path": "dev/com.ibm.ws.microprofile.metrics.2.0/src/com/ibm/ws/microprofile/metrics/writer/PrometheusMetricWriter.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQyMDo0MTo0MFrOGJXmDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQyMDo0MTo0MFrOGJXmDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ3Njk0MA==", "bodyText": "Should the empty check on crrentMetricMap move to line 114.  If it is empty, you don't need to compute description, unit, conversionFactory etc.", "url": "https://github.com/OpenLiberty/open-liberty/pull/11866#discussion_r412476940", "createdAt": "2020-04-21T20:41:40Z", "author": {"login": "fmhwong"}, "path": "dev/com.ibm.ws.microprofile.metrics.2.0/src/com/ibm/ws/microprofile/metrics/writer/PrometheusMetricWriter.java", "diffHunk": "@@ -123,7 +123,10 @@ protected void writeMetricMapAsPrometheus(StringBuilder builder, String registry\n             double conversionFactor = conversionAppendEntry.getValue();\n             String appendUnit = conversionAppendEntry.getKey();\n \n-            if (metricMetadata.getTypeRaw().equals(MetricType.COUNTER)) {\n+            //If current metadata that we are parsing does not have a matching metric... skip\n+            if (currentMetricMap.isEmpty()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c7e9a5ec7394dce5e4b1a10fe6a178c8fc623ed"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2MzAxMTE0OnYy", "diffSide": "RIGHT", "path": "dev/com.ibm.ws.microprofile.metrics.2.3/src/com/ibm/ws/microprofile/metrics23/writer/PrometheusMetricWriter23.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQyMDo0Mjo0MVrOGJXoQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQyMDo0Mjo0MVrOGJXoQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQ3NzUwNg==", "bodyText": "Should the empty check on crrentMetricMap move to line 56. If it is empty, you don't need to compute description, unit, conversionFactory etc.", "url": "https://github.com/OpenLiberty/open-liberty/pull/11866#discussion_r412477506", "createdAt": "2020-04-21T20:42:41Z", "author": {"login": "fmhwong"}, "path": "dev/com.ibm.ws.microprofile.metrics.2.3/src/com/ibm/ws/microprofile/metrics23/writer/PrometheusMetricWriter23.java", "diffHunk": "@@ -66,7 +66,10 @@ protected void writeMetricMapAsPrometheus(StringBuilder builder, String registry\n             double conversionFactor = conversionAppendEntry.getValue();\n             String appendUnit = conversionAppendEntry.getKey();\n \n-            if (metricMetadata.getTypeRaw().equals(MetricType.COUNTER)) {\n+            //If current metadata that we are parsing does not have a matching metric... skip\n+            if (currentMetricMap.isEmpty()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c7e9a5ec7394dce5e4b1a10fe6a178c8fc623ed"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3MzA1MzQzOnYy", "diffSide": "RIGHT", "path": "dev/com.ibm.ws.microprofile.metrics.2.3/src/com/ibm/ws/microprofile/metrics23/writer/PrometheusMetricWriter23.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxNzoxNjo0N1rOGKzP2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxNzozODowMFrOGK0I9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk3ODU4NQ==", "bodyText": "Uncomment the if statement", "url": "https://github.com/OpenLiberty/open-liberty/pull/11866#discussion_r413978585", "createdAt": "2020-04-23T17:16:47Z", "author": {"login": "fmhwong"}, "path": "dev/com.ibm.ws.microprofile.metrics.2.3/src/com/ibm/ws/microprofile/metrics23/writer/PrometheusMetricWriter23.java", "diffHunk": "@@ -66,10 +70,7 @@ protected void writeMetricMapAsPrometheus(StringBuilder builder, String registry\n             double conversionFactor = conversionAppendEntry.getValue();\n             String appendUnit = conversionAppendEntry.getKey();\n \n-            //If current metadata that we are parsing does not have a matching metric... skip\n-            if (currentMetricMap.isEmpty()) {\n-                continue;\n-            } else if (metricMetadata.getTypeRaw().equals(MetricType.COUNTER)) {\n+            //if (metricMetadata.getTypeRaw().equals(MetricType.COUNTER)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cbf94acccfcc21467ff0ea34d767f0881ece43f8"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk5MzIwNg==", "bodyText": "ah right, may have pushed that commit a little bit late in the day :D", "url": "https://github.com/OpenLiberty/open-liberty/pull/11866#discussion_r413993206", "createdAt": "2020-04-23T17:38:00Z", "author": {"login": "Channyboy"}, "path": "dev/com.ibm.ws.microprofile.metrics.2.3/src/com/ibm/ws/microprofile/metrics23/writer/PrometheusMetricWriter23.java", "diffHunk": "@@ -66,10 +70,7 @@ protected void writeMetricMapAsPrometheus(StringBuilder builder, String registry\n             double conversionFactor = conversionAppendEntry.getValue();\n             String appendUnit = conversionAppendEntry.getKey();\n \n-            //If current metadata that we are parsing does not have a matching metric... skip\n-            if (currentMetricMap.isEmpty()) {\n-                continue;\n-            } else if (metricMetadata.getTypeRaw().equals(MetricType.COUNTER)) {\n+            //if (metricMetadata.getTypeRaw().equals(MetricType.COUNTER)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk3ODU4NQ=="}, "originalCommit": {"oid": "cbf94acccfcc21467ff0ea34d767f0881ece43f8"}, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1929, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}