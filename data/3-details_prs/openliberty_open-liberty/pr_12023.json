{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyMjY4MDAy", "number": 12023, "title": "Eliminate extraneous parens in regex", "bodyText": "", "createdAt": "2020-05-01T19:30:54Z", "url": "https://github.com/OpenLiberty/open-liberty/pull/12023", "merged": true, "mergeCommit": {"oid": "2fde487f155555354a077cf58aa65711360faac6"}, "closed": true, "closedAt": "2020-05-08T14:23:11Z", "author": {"login": "jim-krueger"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcdHCVJAFqTQwNDM1OTM0MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcfBMHCABqjMzMTQwMzY5NDY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0MzU5MzQw", "url": "https://github.com/OpenLiberty/open-liberty/pull/12023#pullrequestreview-404359340", "createdAt": "2020-05-01T19:39:22Z", "commit": {"oid": "defaaa013bca82ce706f1f294ebeeb76668bf83b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxOTozOToyMlrOGPTqRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxOTo0MTozMFrOGPTtuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODcwMzk0Mw==", "bodyText": "The null check is redundant.  We already checked it above", "url": "https://github.com/OpenLiberty/open-liberty/pull/12023#discussion_r418703943", "createdAt": "2020-05-01T19:39:22Z", "author": {"login": "jhanders34"}, "path": "dev/com.ibm.ws.org.apache.cxf.cxf.rt.frontend.jaxrs.3.2/src/org/apache/cxf/jaxrs/model/URITemplate.java", "diffHunk": "@@ -85,9 +85,18 @@ public URITemplate(String theTemplate, List<Parameter> params) {\n                 variables.add(var.getName());\n                 if (var.getPattern() != null) {\n                     customVariables.add(var.getName());\n-                    patternBuilder.append('(');\n-                    patternBuilder.append(var.getPattern());\n-                    patternBuilder.append(')');\n+                    String pattern = var.getPattern();\n+                    // #11893 Add parenthesis to the pattern to identify a regex in the pattern, \n+                    // however do not add them if they already exist since that will cause the Matcher\n+                    // to create extraneous values.  Parens identify a group so multiple parens would\n+                    // indicate multiple groups.\n+                    if ((pattern != null) && ((pattern.startsWith(\"(\")) && (pattern.endsWith(\")\")))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "defaaa013bca82ce706f1f294ebeeb76668bf83b"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODcwNDIyOQ==", "bodyText": "// Liberty change begin and // Liberty change end comments are missing", "url": "https://github.com/OpenLiberty/open-liberty/pull/12023#discussion_r418704229", "createdAt": "2020-05-01T19:40:06Z", "author": {"login": "jhanders34"}, "path": "dev/com.ibm.ws.org.apache.cxf.cxf.rt.frontend.jaxrs.3.2/src/org/apache/cxf/jaxrs/model/URITemplate.java", "diffHunk": "@@ -85,9 +85,18 @@ public URITemplate(String theTemplate, List<Parameter> params) {\n                 variables.add(var.getName());\n                 if (var.getPattern() != null) {\n                     customVariables.add(var.getName());\n-                    patternBuilder.append('(');\n-                    patternBuilder.append(var.getPattern());\n-                    patternBuilder.append(')');\n+                    String pattern = var.getPattern();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "defaaa013bca82ce706f1f294ebeeb76668bf83b"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODcwNDgyNA==", "bodyText": "Also definitely overuse of parentheses in the if condition.", "url": "https://github.com/OpenLiberty/open-liberty/pull/12023#discussion_r418704824", "createdAt": "2020-05-01T19:41:30Z", "author": {"login": "jhanders34"}, "path": "dev/com.ibm.ws.org.apache.cxf.cxf.rt.frontend.jaxrs.3.2/src/org/apache/cxf/jaxrs/model/URITemplate.java", "diffHunk": "@@ -85,9 +85,18 @@ public URITemplate(String theTemplate, List<Parameter> params) {\n                 variables.add(var.getName());\n                 if (var.getPattern() != null) {\n                     customVariables.add(var.getName());\n-                    patternBuilder.append('(');\n-                    patternBuilder.append(var.getPattern());\n-                    patternBuilder.append(')');\n+                    String pattern = var.getPattern();\n+                    // #11893 Add parenthesis to the pattern to identify a regex in the pattern, \n+                    // however do not add them if they already exist since that will cause the Matcher\n+                    // to create extraneous values.  Parens identify a group so multiple parens would\n+                    // indicate multiple groups.\n+                    if ((pattern != null) && ((pattern.startsWith(\"(\")) && (pattern.endsWith(\")\")))) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODcwMzk0Mw=="}, "originalCommit": {"oid": "defaaa013bca82ce706f1f294ebeeb76668bf83b"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "defaaa013bca82ce706f1f294ebeeb76668bf83b", "author": {"user": {"login": "jim-krueger", "name": "Jim Krueger"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/defaaa013bca82ce706f1f294ebeeb76668bf83b", "committedDate": "2020-05-01T19:26:52Z", "message": "Eliminate extraneous parens in regex"}, "afterCommit": {"oid": "47b2066cded6ac16b6e67c99b8630ba18d184246", "author": {"user": {"login": "jim-krueger", "name": "Jim Krueger"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/47b2066cded6ac16b6e67c99b8630ba18d184246", "committedDate": "2020-05-01T19:49:20Z", "message": "Eliminate extraneous parens in regex"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "47b2066cded6ac16b6e67c99b8630ba18d184246", "author": {"user": {"login": "jim-krueger", "name": "Jim Krueger"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/47b2066cded6ac16b6e67c99b8630ba18d184246", "committedDate": "2020-05-01T19:49:20Z", "message": "Eliminate extraneous parens in regex"}, "afterCommit": {"oid": "a4e508a15ced09f80a0b93e606934ff925dc3b35", "author": {"user": {"login": "jim-krueger", "name": "Jim Krueger"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/a4e508a15ced09f80a0b93e606934ff925dc3b35", "committedDate": "2020-05-01T19:57:06Z", "message": "Eliminate extraneous parens in regex"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0MzY5MzI0", "url": "https://github.com/OpenLiberty/open-liberty/pull/12023#pullrequestreview-404369324", "createdAt": "2020-05-01T19:59:15Z", "commit": {"oid": "a4e508a15ced09f80a0b93e606934ff925dc3b35"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0OTk0Mzgy", "url": "https://github.com/OpenLiberty/open-liberty/pull/12023#pullrequestreview-404994382", "createdAt": "2020-05-04T13:37:56Z", "commit": {"oid": "a4e508a15ced09f80a0b93e606934ff925dc3b35"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a4e508a15ced09f80a0b93e606934ff925dc3b35", "author": {"user": {"login": "jim-krueger", "name": "Jim Krueger"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/a4e508a15ced09f80a0b93e606934ff925dc3b35", "committedDate": "2020-05-01T19:57:06Z", "message": "Eliminate extraneous parens in regex"}, "afterCommit": {"oid": "dfb08f26f35007e2a8f145b2b3b9f72a613842b0", "author": {"user": {"login": "jim-krueger", "name": "Jim Krueger"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/dfb08f26f35007e2a8f145b2b3b9f72a613842b0", "committedDate": "2020-05-07T17:45:03Z", "message": "Eliminate extraneous parens in regex"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3NzAzNDU0", "url": "https://github.com/OpenLiberty/open-liberty/pull/12023#pullrequestreview-407703454", "createdAt": "2020-05-07T17:52:54Z", "commit": {"oid": "dfb08f26f35007e2a8f145b2b3b9f72a613842b0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6ded0f089fe997f95accd53f699020efe3fe167", "author": {"user": {"login": "jim-krueger", "name": "Jim Krueger"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/b6ded0f089fe997f95accd53f699020efe3fe167", "committedDate": "2020-05-07T18:00:29Z", "message": "Eliminate extraneous parens in regex"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dfb08f26f35007e2a8f145b2b3b9f72a613842b0", "author": {"user": {"login": "jim-krueger", "name": "Jim Krueger"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/dfb08f26f35007e2a8f145b2b3b9f72a613842b0", "committedDate": "2020-05-07T17:45:03Z", "message": "Eliminate extraneous parens in regex"}, "afterCommit": {"oid": "b6ded0f089fe997f95accd53f699020efe3fe167", "author": {"user": {"login": "jim-krueger", "name": "Jim Krueger"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/b6ded0f089fe997f95accd53f699020efe3fe167", "committedDate": "2020-05-07T18:00:29Z", "message": "Eliminate extraneous parens in regex"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2756, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}