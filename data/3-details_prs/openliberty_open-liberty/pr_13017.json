{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4OTYwNTA0", "number": 13017, "title": "Issue 12380: Changed error.getMessage() across multiple projects", "bodyText": "Changed error.getMessage() across multiple projects to be more descriptive and avoid null as an error message.\nfor #12380", "createdAt": "2020-07-14T15:40:19Z", "url": "https://github.com/OpenLiberty/open-liberty/pull/13017", "merged": true, "mergeCommit": {"oid": "7e5ced57abda27b0ffe103b2eb7e300a364df5f3"}, "closed": true, "closedAt": "2020-07-20T17:01:02Z", "author": {"login": "julien2424"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc03zdmAH2gAyNDQ4OTYwNTA0OmEyZjdiYjJiM2YyODljM2QzMzM5MDQ5ZmEzYTkwZmYxYmFhMTRiZWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1m3KngH2gAyNDQ4OTYwNTA0OmU4Y2VjNTMzYzRhNTA1ZDBmNjBlMTMyMjZhZjM2MzBhYWI3MTM3NmI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a2f7bb2b3f289c3d3339049fa3a90ff1baa14bee", "author": {"user": null}, "url": "https://github.com/OpenLiberty/open-liberty/commit/a2f7bb2b3f289c3d3339049fa3a90ff1baa14bee", "committedDate": "2020-07-14T15:31:08Z", "message": "Issue 12380: Changed error.getMessage() across multiple projects to be more descriptive and avoid null as an error message"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4MjQzMzUy", "url": "https://github.com/OpenLiberty/open-liberty/pull/13017#pullrequestreview-448243352", "createdAt": "2020-07-14T15:57:00Z", "commit": {"oid": "a2f7bb2b3f289c3d3339049fa3a90ff1baa14bee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxNTo1NzowMVrOGxaQkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxNTo1NzowMVrOGxaQkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDQ2MzYzNA==", "bodyText": "Looks like you accidentally took out the second insert - clientConfig.getClientId(). That needs to be put back.", "url": "https://github.com/OpenLiberty/open-liberty/pull/13017#discussion_r454463634", "createdAt": "2020-07-14T15:57:01Z", "author": {"login": "ayoho"}, "path": "dev/com.ibm.ws.security.openidconnect.clients.common/src/com/ibm/ws/security/openidconnect/clients/common/AuthorizationCodeHandler.java", "diffHunk": "@@ -99,7 +99,7 @@ public ProviderAuthenticationResult handleAuthorizationCode(HttpServletRequest r\n             boolean throwExc = clientConfig.getTokenEndpointUrl() != null && clientConfig.getTokenEndpointUrl().startsWith(\"https\");\n             sslSocketFactory = new OidcClientHttpUtil().getSSLSocketFactory(clientConfig, sslSupport, throwExc, false);\n         } catch (SSLException e) {\n-            Tr.error(tc, \"OIDC_CLIENT_HTTPS_WITH_SSLCONTEXT_NULL\", new Object[] { e.getMessage() != null ? e.getMessage() : \"invalid ssl context\", clientConfig.getClientId() });\n+            Tr.error(tc, \"OIDC_CLIENT_HTTPS_WITH_SSLCONTEXT_NULL\", new Object[] { e });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2f7bb2b3f289c3d3339049fa3a90ff1baa14bee"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36508b77dfec4a305437a67b409d66bcce57608c", "author": {"user": null}, "url": "https://github.com/OpenLiberty/open-liberty/commit/36508b77dfec4a305437a67b409d66bcce57608c", "committedDate": "2020-07-14T18:15:50Z", "message": "Issue 12380: Made more changes and fixed a bug"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4Mzc4Mzk3", "url": "https://github.com/OpenLiberty/open-liberty/pull/13017#pullrequestreview-448378397", "createdAt": "2020-07-14T18:55:18Z", "commit": {"oid": "36508b77dfec4a305437a67b409d66bcce57608c"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxODo1NToxOFrOGxg_zA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQxODo1OTo0MVrOGxhJpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU3NDAyOA==", "bodyText": "These cases - where the exception object is of type SocialLoginException - are ones that I'd leave the call to getMessage() as it is.", "url": "https://github.com/OpenLiberty/open-liberty/pull/13017#discussion_r454574028", "createdAt": "2020-07-14T18:55:18Z", "author": {"login": "ayoho"}, "path": "dev/com.ibm.ws.security.social/src/com/ibm/ws/security/social/twitter/TwitterTokenServices.java", "diffHunk": "@@ -86,7 +86,7 @@ public void getRequestToken(HttpServletRequest request, HttpServletResponse resp\n             try {\n                 SocialUtil.validateEndpointWithQuery(authzEndpoint);\n             } catch (SocialLoginException e) {\n-                Tr.error(tc, \"FAILED_TO_REDIRECT_TO_AUTHZ_ENDPOINT\", new Object[] { config.getUniqueId(), e.getMessage() });\n+                Tr.error(tc, \"FAILED_TO_REDIRECT_TO_AUTHZ_ENDPOINT\", new Object[] { config.getUniqueId(), e });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "36508b77dfec4a305437a67b409d66bcce57608c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDU3NjU0OQ==", "bodyText": "The insert for this message actually looks like it should be a username, not an exception. The message is\nERROR_AUTHENTICATE=CWWKS6103E: A security subject cannot be created for the {0} user.\n\nI'm trying to decide if we should enhance the message to add an insert at the end that could be the Exception object.", "url": "https://github.com/OpenLiberty/open-liberty/pull/13017#discussion_r454576549", "createdAt": "2020-07-14T18:59:41Z", "author": {"login": "ayoho"}, "path": "dev/com.ibm.ws.security.common/src/com/ibm/ws/security/common/token/propagation/TokenPropagationHelper.java", "diffHunk": "@@ -275,7 +275,7 @@ public static synchronized boolean pushSubject(String username) {\n             FFDCFilter.processException(e,\n                     TokenPropagationHelper.class.getName(), \"pushSubject\",\n                     new Object[] { username });\n-            Tr.error(tc, \"ERROR_AUTHENTICATE\", new Object[] { e.getMessage() }); // CWWKS6103E\n+            Tr.error(tc, \"ERROR_AUTHENTICATE\", new Object[] { e }); // CWWKS6103E", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "36508b77dfec4a305437a67b409d66bcce57608c"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1d88a95e7d977f9dc3bb5835467736373364df5", "author": {"user": null}, "url": "https://github.com/OpenLiberty/open-liberty/commit/e1d88a95e7d977f9dc3bb5835467736373364df5", "committedDate": "2020-07-16T21:28:18Z", "message": "fixed SocialLoginException and ErrorAuthenticate"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwMjUxNjg0", "url": "https://github.com/OpenLiberty/open-liberty/pull/13017#pullrequestreview-450251684", "createdAt": "2020-07-16T22:11:48Z", "commit": {"oid": "e1d88a95e7d977f9dc3bb5835467736373364df5"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMjoxMTo0OFrOGy-mYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQyMjoxMjoyOFrOGy-nRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjEwNzYxNw==", "bodyText": "This one could have stayed as just e, but it's a debug statement so isn't a big deal.", "url": "https://github.com/OpenLiberty/open-liberty/pull/13017#discussion_r456107617", "createdAt": "2020-07-16T22:11:48Z", "author": {"login": "ayoho"}, "path": "dev/com.ibm.ws.security.social/src/com/ibm/ws/security/social/tai/TAIWebUtils.java", "diffHunk": "@@ -189,7 +189,7 @@ String getBearerTokenFromCustomHeaderSegments(HttpServletRequest req, String hea\n         } catch (Exception e) {\n             //can be ignored\n             if (tc.isDebugEnabled()) {\n-                Tr.debug(tc, \"Fail to read Header Segments:\", e);\n+                Tr.debug(tc, \"Fail to read Header Segments:\", e.getMessage());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1d88a95e7d977f9dc3bb5835467736373364df5"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjEwNzg0NQ==", "bodyText": "This one should stay as e since we don't know what kind of Exception we're catching here.", "url": "https://github.com/OpenLiberty/open-liberty/pull/13017#discussion_r456107845", "createdAt": "2020-07-16T22:12:28Z", "author": {"login": "ayoho"}, "path": "dev/com.ibm.ws.security.social/src/com/ibm/ws/security/social/web/EndpointServices.java", "diffHunk": "@@ -106,7 +106,7 @@ void handleSocialLoginRequest(HttpServletRequest request, HttpServletResponse re\n                     doRedirect(request, response, config);\n                 }\n             } catch (Exception e) {\n-                throw new SocialLoginException(\"ERROR_PROCESSING_REDIRECT\", null, new Object[] { e });\n+                throw new SocialLoginException(\"ERROR_PROCESSING_REDIRECT\", null, new Object[] { e.getMessage() });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1d88a95e7d977f9dc3bb5835467736373364df5"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8cec533c4a505d0f60e13226af3630aab71376b", "author": {"user": null}, "url": "https://github.com/OpenLiberty/open-liberty/commit/e8cec533c4a505d0f60e13226af3630aab71376b", "committedDate": "2020-07-16T22:20:43Z", "message": "fixed a couple of issues in security.social"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2138, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}