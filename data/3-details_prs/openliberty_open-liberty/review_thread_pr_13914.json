{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg2MDY0MDA3", "number": 13914, "reviewThreads": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNjoyNTo1NFrOEjOBXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxMzoxNjowNVrOEjllVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MzY1MzQxOnYy", "diffSide": "RIGHT", "path": "dev/com.ibm.ws.kernel.feature.core/src/com/ibm/ws/kernel/feature/internal/FeatureManager.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNjoyNTo1NFrOHRdDWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxODoyNjo0OFrOHRheYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA2MzgzNA==", "bodyText": "Why is this check only done when not on Open Liberty?\nThe check for !isExtension should be done done regardless if we are on Open Liberty or not.  I suggest the following check be done after this if-then-else block entirely so it applies to both:\nif (altName != null && isRootFeature && !isExtension) {\n    Tr.error(tc, \"MISSING_FEATURE_HAS_ALT_NAME\", missing, altName);\n}", "url": "https://github.com/OpenLiberty/open-liberty/pull/13914#discussion_r488063834", "createdAt": "2020-09-14T16:25:54Z", "author": {"login": "tjwatson"}, "path": "dev/com.ibm.ws.kernel.feature.core/src/com/ibm/ws/kernel/feature/internal/FeatureManager.java", "diffHunk": "@@ -1642,16 +1650,27 @@ boolean reportErrors(Result result, Collection<String> restrictedAccessAttempts,\n         }\n         for (String missing : result.getMissing()) {\n             reportedErrors = true;\n+            boolean isRootFeature = rootFeatures.contains(missing);\n+            boolean isExtension = missing.indexOf(\":\") > -1;\n+            String altName = featureRepository.matchesAlternate(missing);\n             //Check if using Open Liberty before suggesting install util for missing features\n             if (!getProductInfoDisplayName().startsWith(PRODUCT_INFO_STRING_OPEN_LIBERTY)) {\n-                if (rootFeatures.contains(missing) && missing.indexOf(\":\") < 0) {\n+                if (isRootFeature && !isExtension) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70498d694fcec268355aa76a35500a3fea0436d5"}, "originalPosition": 85}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODEzNjI4OQ==", "bodyText": "It's unlikely that an extension feature (ie a feature containing an ':' in the name) will match a key in the atlNames map so the check is redundant for that purpose. The isExtension check in the code was to select between the two flavors of the UPDATE_MISSING_FEATURE_ERROR_<*> message. Open Liberty does not have both error messages.\nI'll restructure to print the ALT_NAME message outside the scope of the is-closed-liberty conditional block:\n            //Check if using Open Liberty before suggesting install util for missing features\n            if (!getProductInfoDisplayName().startsWith(PRODUCT_INFO_STRING_OPEN_LIBERTY)) {\n                if (isRootFeature && !isExtension) {\n                    // Only report this message for core features included as root features in the server.xml\n                    Tr.error(tc, \"UPDATE_MISSING_CORE_FEATURE_ERROR\", missing, locationService.getServerName());\n                } else {\n                    Tr.error(tc, \"UPDATE_MISSING_FEATURE_ERROR\", missing);\n                }\n            } else {\n                // Not on Open Liberty\n                Tr.error(tc, \"UPDATE_MISSING_FEATURE_ERROR\", missing);\n            }\n            if (altName != null && isRootFeature) {\n                Tr.error(tc, \"MISSING_FEATURE_HAS_ALT_NAME\", missing, altName);\n            }\n            installStatus.addMissingFeature(missing);", "url": "https://github.com/OpenLiberty/open-liberty/pull/13914#discussion_r488136289", "createdAt": "2020-09-14T18:26:48Z", "author": {"login": "sebratton"}, "path": "dev/com.ibm.ws.kernel.feature.core/src/com/ibm/ws/kernel/feature/internal/FeatureManager.java", "diffHunk": "@@ -1642,16 +1650,27 @@ boolean reportErrors(Result result, Collection<String> restrictedAccessAttempts,\n         }\n         for (String missing : result.getMissing()) {\n             reportedErrors = true;\n+            boolean isRootFeature = rootFeatures.contains(missing);\n+            boolean isExtension = missing.indexOf(\":\") > -1;\n+            String altName = featureRepository.matchesAlternate(missing);\n             //Check if using Open Liberty before suggesting install util for missing features\n             if (!getProductInfoDisplayName().startsWith(PRODUCT_INFO_STRING_OPEN_LIBERTY)) {\n-                if (rootFeatures.contains(missing) && missing.indexOf(\":\") < 0) {\n+                if (isRootFeature && !isExtension) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA2MzgzNA=="}, "originalCommit": {"oid": "70498d694fcec268355aa76a35500a3fea0436d5"}, "originalPosition": 85}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MzY2NzQwOnYy", "diffSide": "RIGHT", "path": "dev/com.ibm.ws.kernel.feature.core/src/com/ibm/ws/kernel/feature/internal/subsystem/FeatureDefinitionUtils.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNjoyOTozMlrOHRdMGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxODoyOToxNlrOHRhjow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA2NjA3Mg==", "bodyText": "I suggest making this a Collection<String> to give more freedom in the implementation.  Likely an ArrayList would be more performant than requiring a heavy object like a Set here.", "url": "https://github.com/OpenLiberty/open-liberty/pull/13914#discussion_r488066072", "createdAt": "2020-09-14T16:29:32Z", "author": {"login": "tjwatson"}, "path": "dev/com.ibm.ws.kernel.feature.core/src/com/ibm/ws/kernel/feature/internal/subsystem/FeatureDefinitionUtils.java", "diffHunk": "@@ -104,6 +107,7 @@\n         final String featureName;\n         final String symbolicName;\n         final String shortName;\n+        final Set<String> alternateNames;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70498d694fcec268355aa76a35500a3fea0436d5"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODEzNzYzNQ==", "bodyText": "done", "url": "https://github.com/OpenLiberty/open-liberty/pull/13914#discussion_r488137635", "createdAt": "2020-09-14T18:29:16Z", "author": {"login": "sebratton"}, "path": "dev/com.ibm.ws.kernel.feature.core/src/com/ibm/ws/kernel/feature/internal/subsystem/FeatureDefinitionUtils.java", "diffHunk": "@@ -104,6 +107,7 @@\n         final String featureName;\n         final String symbolicName;\n         final String shortName;\n+        final Set<String> alternateNames;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA2NjA3Mg=="}, "originalCommit": {"oid": "70498d694fcec268355aa76a35500a3fea0436d5"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MzY4MDY5OnYy", "diffSide": "RIGHT", "path": "dev/com.ibm.ws.kernel.feature.core/src/com/ibm/ws/kernel/feature/internal/subsystem/FeatureDefinitionUtils.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNjozMzowNlrOHRdUaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxODozOTo0OVrOHRh5_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA2ODIwMQ==", "bodyText": "This could be replaced by this line:\nresult = new ArrayList<String>(data.keySet());\nThat is assuming you change the type to a Collection otherwise it would be:\nresult = new HashSet<String>(data.keySet());", "url": "https://github.com/OpenLiberty/open-liberty/pull/13914#discussion_r488068201", "createdAt": "2020-09-14T16:33:06Z", "author": {"login": "tjwatson"}, "path": "dev/com.ibm.ws.kernel.feature.core/src/com/ibm/ws/kernel/feature/internal/subsystem/FeatureDefinitionUtils.java", "diffHunk": "@@ -391,6 +399,38 @@ static int getIntegerValue(String value, int defaultValue) {\n             manifest = loadManifest(mfFile, inStream);\n         }\n \n+        /**\n+         * Get alternate names of the feature if any.\n+         *\n+         * @return A (possibly empty) set of alternate names.\n+         */\n+        Set<String> getAltNames() {\n+\n+            if (alternateNames == null) {\n+                Set<String> result;\n+                String ibmAltNames;\n+                try {\n+                    ibmAltNames = getMainAttributeValue(IBM_ALT_NAMES);\n+                } catch (IOException e) {\n+                    return Collections.<String> emptySet();\n+                }\n+\n+                if (ibmAltNames == null) {\n+                    result = Collections.<String> emptySet();\n+                } else {\n+                    Map<String, Map<String, String>> data = ManifestHeaderProcessor.parseImportString(ibmAltNames);\n+\n+                    result = new HashSet<String>();\n+                    for (Map.Entry<String, Map<String, String>> entry : data.entrySet()) {\n+                        //any attributes are not supported and will be ignored.\n+                        result.add(entry.getKey());\n+                    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70498d694fcec268355aa76a35500a3fea0436d5"}, "originalPosition": 89}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODE0MzM1Nw==", "bodyText": "suggestion adopted. Thanks", "url": "https://github.com/OpenLiberty/open-liberty/pull/13914#discussion_r488143357", "createdAt": "2020-09-14T18:39:49Z", "author": {"login": "sebratton"}, "path": "dev/com.ibm.ws.kernel.feature.core/src/com/ibm/ws/kernel/feature/internal/subsystem/FeatureDefinitionUtils.java", "diffHunk": "@@ -391,6 +399,38 @@ static int getIntegerValue(String value, int defaultValue) {\n             manifest = loadManifest(mfFile, inStream);\n         }\n \n+        /**\n+         * Get alternate names of the feature if any.\n+         *\n+         * @return A (possibly empty) set of alternate names.\n+         */\n+        Set<String> getAltNames() {\n+\n+            if (alternateNames == null) {\n+                Set<String> result;\n+                String ibmAltNames;\n+                try {\n+                    ibmAltNames = getMainAttributeValue(IBM_ALT_NAMES);\n+                } catch (IOException e) {\n+                    return Collections.<String> emptySet();\n+                }\n+\n+                if (ibmAltNames == null) {\n+                    result = Collections.<String> emptySet();\n+                } else {\n+                    Map<String, Map<String, String>> data = ManifestHeaderProcessor.parseImportString(ibmAltNames);\n+\n+                    result = new HashSet<String>();\n+                    for (Map.Entry<String, Map<String, String>> entry : data.entrySet()) {\n+                        //any attributes are not supported and will be ignored.\n+                        result.add(entry.getKey());\n+                    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA2ODIwMQ=="}, "originalCommit": {"oid": "70498d694fcec268355aa76a35500a3fea0436d5"}, "originalPosition": 89}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MzY5MjQ0OnYy", "diffSide": "RIGHT", "path": "dev/com.ibm.ws.kernel.feature.core/src/com/ibm/ws/kernel/feature/internal/subsystem/FeatureRepository.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNjozNjoxMVrOHRdbjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNjozNjoxMVrOHRdbjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA3MDAyOA==", "bodyText": "if you change to writeInt be sure to change this to readInt", "url": "https://github.com/OpenLiberty/open-liberty/pull/13914#discussion_r488070028", "createdAt": "2020-09-14T16:36:11Z", "author": {"login": "tjwatson"}, "path": "dev/com.ibm.ws.kernel.feature.core/src/com/ibm/ws/kernel/feature/internal/subsystem/FeatureRepository.java", "diffHunk": "@@ -442,8 +460,14 @@ static ImmutableAttributes loadFeatureAttributes(DataInputStream in) throws IOEx\n             processTypes.add(valueOf(in.readUTF(), ProcessType.SERVER));\n         }\n         ActivationType activationType = valueOf(in.readUTF(), ActivationType.SEQUENTIAL);\n-        return new ImmutableAttributes(repositoryType, symbolicName, shortName, featureVersion, visibility, appRestart, version, featureFile, lastModified, fileSize, isAutoFeature,\n-                                       hasApiServices, hasApiPackages, hasSpiPackages, isSingleton, processTypes, activationType);\n+        short altNamesCount = in.readShort();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70498d694fcec268355aa76a35500a3fea0436d5"}, "originalPosition": 54}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MzY5OTk2OnYy", "diffSide": "RIGHT", "path": "dev/com.ibm.ws.kernel.feature.core/src/com/ibm/ws/kernel/feature/internal/subsystem/FeatureRepository.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNjozODoxOFrOHRdgXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNjozODoxOFrOHRdgXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA3MTI2Mg==", "bodyText": "might as well seed the size here for the collection.  If this is an ArrayList that would make it pretty small.  Should consider using Collections.empty for when size == 0", "url": "https://github.com/OpenLiberty/open-liberty/pull/13914#discussion_r488071262", "createdAt": "2020-09-14T16:38:18Z", "author": {"login": "tjwatson"}, "path": "dev/com.ibm.ws.kernel.feature.core/src/com/ibm/ws/kernel/feature/internal/subsystem/FeatureRepository.java", "diffHunk": "@@ -442,8 +460,14 @@ static ImmutableAttributes loadFeatureAttributes(DataInputStream in) throws IOEx\n             processTypes.add(valueOf(in.readUTF(), ProcessType.SERVER));\n         }\n         ActivationType activationType = valueOf(in.readUTF(), ActivationType.SEQUENTIAL);\n-        return new ImmutableAttributes(repositoryType, symbolicName, shortName, featureVersion, visibility, appRestart, version, featureFile, lastModified, fileSize, isAutoFeature,\n-                                       hasApiServices, hasApiPackages, hasSpiPackages, isSingleton, processTypes, activationType);\n+        short altNamesCount = in.readShort();\n+        Set<String> altNames = new HashSet<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70498d694fcec268355aa76a35500a3fea0436d5"}, "originalPosition": 55}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MzczNDYzOnYy", "diffSide": "RIGHT", "path": "dev/com.ibm.ws.kernel.feature.core/src/com/ibm/ws/kernel/feature/internal/subsystem/FeatureRepository.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNjo0NTo0MFrOHRd2hQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNjowMDoyNVrOHSI8hA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA3NjkzMw==", "bodyText": "If we do ignore case here then we need to do the following to populate:\nalternateFeatureNameToPublicName.put(lowerFeature(s), cachedAttr.featureName);", "url": "https://github.com/OpenLiberty/open-liberty/pull/13914#discussion_r488076933", "createdAt": "2020-09-14T16:45:40Z", "author": {"login": "tjwatson"}, "path": "dev/com.ibm.ws.kernel.feature.core/src/com/ibm/ws/kernel/feature/internal/subsystem/FeatureRepository.java", "diffHunk": "@@ -621,6 +645,12 @@ private void updateMaps(SubsystemFeatureDefinitionImpl def) {\n             if (def.getVisibility() == Visibility.PUBLIC)\n                 publicFeatureNameToSymbolicName.put(lowerFeature(cachedAttr.symbolicName), cachedAttr.symbolicName);\n \n+            // populate mapping from known, commonly used alternative names to allow hints when the wrong feature\n+            // name is specified in a server config.\n+            for (String s : cachedAttr.alternateNames) {\n+                alternateFeatureNameToPublicName.put(s, cachedAttr.featureName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70498d694fcec268355aa76a35500a3fea0436d5"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODY3NTUwMg==", "bodyText": "I am surprised the FATs pass without making the change to lower case the key here.", "url": "https://github.com/OpenLiberty/open-liberty/pull/13914#discussion_r488675502", "createdAt": "2020-09-15T13:39:49Z", "author": {"login": "tjwatson"}, "path": "dev/com.ibm.ws.kernel.feature.core/src/com/ibm/ws/kernel/feature/internal/subsystem/FeatureRepository.java", "diffHunk": "@@ -621,6 +645,12 @@ private void updateMaps(SubsystemFeatureDefinitionImpl def) {\n             if (def.getVisibility() == Visibility.PUBLIC)\n                 publicFeatureNameToSymbolicName.put(lowerFeature(cachedAttr.symbolicName), cachedAttr.symbolicName);\n \n+            // populate mapping from known, commonly used alternative names to allow hints when the wrong feature\n+            // name is specified in a server config.\n+            for (String s : cachedAttr.alternateNames) {\n+                alternateFeatureNameToPublicName.put(s, cachedAttr.featureName);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA3NjkzMw=="}, "originalCommit": {"oid": "70498d694fcec268355aa76a35500a3fea0436d5"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODc4Mjk4MA==", "bodyText": "Will do the lowerFeature call in FeatureDefinitionUtils.getAltNames() instead.", "url": "https://github.com/OpenLiberty/open-liberty/pull/13914#discussion_r488782980", "createdAt": "2020-09-15T16:00:25Z", "author": {"login": "sebratton"}, "path": "dev/com.ibm.ws.kernel.feature.core/src/com/ibm/ws/kernel/feature/internal/subsystem/FeatureRepository.java", "diffHunk": "@@ -621,6 +645,12 @@ private void updateMaps(SubsystemFeatureDefinitionImpl def) {\n             if (def.getVisibility() == Visibility.PUBLIC)\n                 publicFeatureNameToSymbolicName.put(lowerFeature(cachedAttr.symbolicName), cachedAttr.symbolicName);\n \n+            // populate mapping from known, commonly used alternative names to allow hints when the wrong feature\n+            // name is specified in a server config.\n+            for (String s : cachedAttr.alternateNames) {\n+                alternateFeatureNameToPublicName.put(s, cachedAttr.featureName);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA3NjkzMw=="}, "originalCommit": {"oid": "70498d694fcec268355aa76a35500a3fea0436d5"}, "originalPosition": 72}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MzczNTk0OnYy", "diffSide": "RIGHT", "path": "dev/com.ibm.ws.kernel.feature.core/src/com/ibm/ws/kernel/feature/internal/subsystem/FeatureRepository.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNjo0NTo1M1rOHRd3Vg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNjo0NTo1M1rOHRd3Vg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA3NzE0Mg==", "bodyText": "Other places that write a collection use writeInt for the size.  I agree that it is far fetched to ever need that big of a size for alternate names, but I'd error on the side of consistency here.", "url": "https://github.com/OpenLiberty/open-liberty/pull/13914#discussion_r488077142", "createdAt": "2020-09-14T16:45:53Z", "author": {"login": "tjwatson"}, "path": "dev/com.ibm.ws.kernel.feature.core/src/com/ibm/ws/kernel/feature/internal/subsystem/FeatureRepository.java", "diffHunk": "@@ -371,6 +384,11 @@ static void writeFeatureAttributes(ImmutableAttributes iAttr, ProvisioningDetail\n \n         out.writeUTF(iAttr.activationType.toString());\n \n+        out.writeShort(iAttr.alternateNames.size());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70498d694fcec268355aa76a35500a3fea0436d5"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1MzczNjMwOnYy", "diffSide": "RIGHT", "path": "dev/com.ibm.ws.kernel.feature.core/src/com/ibm/ws/kernel/feature/internal/subsystem/FeatureRepository.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNjo0NTo1OVrOHRd3kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNjo0NTo1OVrOHRd3kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODA3NzIwMw==", "bodyText": "We likely need to ignore case here like we do for short names:\nreturn alternateFeatureNameToPublicName.get(lowerFeature(featureName));", "url": "https://github.com/OpenLiberty/open-liberty/pull/13914#discussion_r488077203", "createdAt": "2020-09-14T16:45:59Z", "author": {"login": "tjwatson"}, "path": "dev/com.ibm.ws.kernel.feature.core/src/com/ibm/ws/kernel/feature/internal/subsystem/FeatureRepository.java", "diffHunk": "@@ -118,6 +121,16 @@ public FeatureRepository(WsResource res, BundleContext bundleContext) {\n         this.bundleContext = bundleContext;\n     }\n \n+    /**\n+     * Use to check if a feature name is a commonly used alternate to an existing feature name\n+     *\n+     * @param featureName\n+     * @return The existing feature name or null if no match\n+     */\n+    public String matchesAlternate(String featureName) {\n+        return alternateFeatureNameToPublicName.get(featureName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70498d694fcec268355aa76a35500a3fea0436d5"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1NDM2MTg5OnYy", "diffSide": "RIGHT", "path": "dev/com.ibm.ws.kernel.feature.core/resources/com/ibm/ws/kernel/feature/internal/resources/ProvisionerMessages.nlsprops", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxOTo0MDowOFrOHRj4tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxOTo0MDowOFrOHRj4tw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODE3NTc5OQ==", "bodyText": "{0} appears to be a feature, not a feature definition. If so, change \"the feature definition {0} which was not found.\" to \"the {0} feature that was not found.\" If (0) applies to a feature definition, then use \"\"the {0} feature definition that was not found.\"", "url": "https://github.com/OpenLiberty/open-liberty/pull/13914#discussion_r488175799", "createdAt": "2020-09-14T19:40:08Z", "author": {"login": "helyarp"}, "path": "dev/com.ibm.ws.kernel.feature.core/resources/com/ibm/ws/kernel/feature/internal/resources/ProvisionerMessages.nlsprops", "diffHunk": "@@ -217,6 +217,11 @@ UPDATE_CONFLICT_INCOMPATIBLE_EE_FEATURES_DIFFERENT_PLATFORM_ERROR=CWWKF0044E: Th\n UPDATE_CONFLICT_INCOMPATIBLE_EE_FEATURES_DIFFERENT_PLATFORM_ERROR.explanation=The server configuration contains an incompatible combination of both Jakarta EE and Java EE features.  Features that support the Jakarta EE 9 programming model are incompatible with features that support the Java EE programming models, including Jakarta EE 8.  This conflict can happen if the two incompatible features are configured directly in the server configuration, or if the configured features include different versions of a feature that are incompatible.\n UPDATE_CONFLICT_INCOMPATIBLE_EE_FEATURES_DIFFERENT_PLATFORM_ERROR.useraction=Specify a compatible version of the configured features that caused the conflict in the server.xml file, and ensure the server.xml file uses either Jakarta EE or Java EE features, but not both.\n \n+#CWWK0045E {0} = feature appearing in server xml; {1} = a real feature def name which is a probable match for name 0.\n+MISSING_FEATURE_HAS_ALT_NAME=CWWKF0045E: An existing feature definition, {1}, is a possible match for the feature definition {0} which was not found. ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70498d694fcec268355aa76a35500a3fea0436d5"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1NDM2NDQxOnYy", "diffSide": "RIGHT", "path": "dev/com.ibm.ws.kernel.feature.core/resources/com/ibm/ws/kernel/feature/internal/resources/ProvisionerMessages.nlsprops", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxOTo0MTowMFrOHRj6Rw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxOTo0MTowMFrOHRj6Rw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODE3NjE5OQ==", "bodyText": "Change \"could not\" to \"cannot\" and change \"may\" to \"might\"", "url": "https://github.com/OpenLiberty/open-liberty/pull/13914#discussion_r488176199", "createdAt": "2020-09-14T19:41:00Z", "author": {"login": "helyarp"}, "path": "dev/com.ibm.ws.kernel.feature.core/resources/com/ibm/ws/kernel/feature/internal/resources/ProvisionerMessages.nlsprops", "diffHunk": "@@ -217,6 +217,11 @@ UPDATE_CONFLICT_INCOMPATIBLE_EE_FEATURES_DIFFERENT_PLATFORM_ERROR=CWWKF0044E: Th\n UPDATE_CONFLICT_INCOMPATIBLE_EE_FEATURES_DIFFERENT_PLATFORM_ERROR.explanation=The server configuration contains an incompatible combination of both Jakarta EE and Java EE features.  Features that support the Jakarta EE 9 programming model are incompatible with features that support the Java EE programming models, including Jakarta EE 8.  This conflict can happen if the two incompatible features are configured directly in the server configuration, or if the configured features include different versions of a feature that are incompatible.\n UPDATE_CONFLICT_INCOMPATIBLE_EE_FEATURES_DIFFERENT_PLATFORM_ERROR.useraction=Specify a compatible version of the configured features that caused the conflict in the server.xml file, and ensure the server.xml file uses either Jakarta EE or Java EE features, but not both.\n \n+#CWWK0045E {0} = feature appearing in server xml; {1} = a real feature def name which is a probable match for name 0.\n+MISSING_FEATURE_HAS_ALT_NAME=CWWKF0045E: An existing feature definition, {1}, is a possible match for the feature definition {0} which was not found. \n+MISSING_FEATURE_HAS_ALT_NAME.explanation=The feature manager could not find a definition for a feature specified in the server configuration. The name specified may match an existing feature definition.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70498d694fcec268355aa76a35500a3fea0436d5"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1NzUxMzgwOnYy", "diffSide": "RIGHT", "path": "dev/com.ibm.ws.kernel.feature.core/resources/com/ibm/ws/kernel/feature/internal/resources/ProvisionerMessages.nlsprops", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxMzoxNjowNVrOHSBS4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNzoyMTowOFrOHSMCXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODY1NzYzNQ==", "bodyText": "Change \"the feature {0} which\" to  \"the {0} feature that\"  or to \"the {0} feature, which\"", "url": "https://github.com/OpenLiberty/open-liberty/pull/13914#discussion_r488657635", "createdAt": "2020-09-15T13:16:05Z", "author": {"login": "helyarp"}, "path": "dev/com.ibm.ws.kernel.feature.core/resources/com/ibm/ws/kernel/feature/internal/resources/ProvisionerMessages.nlsprops", "diffHunk": "@@ -217,6 +217,11 @@ UPDATE_CONFLICT_INCOMPATIBLE_EE_FEATURES_DIFFERENT_PLATFORM_ERROR=CWWKF0044E: Th\n UPDATE_CONFLICT_INCOMPATIBLE_EE_FEATURES_DIFFERENT_PLATFORM_ERROR.explanation=The server configuration contains an incompatible combination of both Jakarta EE and Java EE features.  Features that support the Jakarta EE 9 programming model are incompatible with features that support the Java EE programming models, including Jakarta EE 8.  This conflict can happen if the two incompatible features are configured directly in the server configuration, or if the configured features include different versions of a feature that are incompatible.\n UPDATE_CONFLICT_INCOMPATIBLE_EE_FEATURES_DIFFERENT_PLATFORM_ERROR.useraction=Specify a compatible version of the configured features that caused the conflict in the server.xml file, and ensure the server.xml file uses either Jakarta EE or Java EE features, but not both.\n \n+#CWWK0045E {0} = feature appearing in server xml; {1} = a real feature def name which is a probable match for name 0.\n+MISSING_FEATURE_HAS_ALT_NAME=CWWKF0045E: An existing feature definition, {1}, is a possible match for the feature {0} which was not found. ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b68cca4b5a06b0f61d694eb566da5bd2e7b74bf0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODc4NDk5OA==", "bodyText": "Done", "url": "https://github.com/OpenLiberty/open-liberty/pull/13914#discussion_r488784998", "createdAt": "2020-09-15T16:03:27Z", "author": {"login": "sebratton"}, "path": "dev/com.ibm.ws.kernel.feature.core/resources/com/ibm/ws/kernel/feature/internal/resources/ProvisionerMessages.nlsprops", "diffHunk": "@@ -217,6 +217,11 @@ UPDATE_CONFLICT_INCOMPATIBLE_EE_FEATURES_DIFFERENT_PLATFORM_ERROR=CWWKF0044E: Th\n UPDATE_CONFLICT_INCOMPATIBLE_EE_FEATURES_DIFFERENT_PLATFORM_ERROR.explanation=The server configuration contains an incompatible combination of both Jakarta EE and Java EE features.  Features that support the Jakarta EE 9 programming model are incompatible with features that support the Java EE programming models, including Jakarta EE 8.  This conflict can happen if the two incompatible features are configured directly in the server configuration, or if the configured features include different versions of a feature that are incompatible.\n UPDATE_CONFLICT_INCOMPATIBLE_EE_FEATURES_DIFFERENT_PLATFORM_ERROR.useraction=Specify a compatible version of the configured features that caused the conflict in the server.xml file, and ensure the server.xml file uses either Jakarta EE or Java EE features, but not both.\n \n+#CWWK0045E {0} = feature appearing in server xml; {1} = a real feature def name which is a probable match for name 0.\n+MISSING_FEATURE_HAS_ALT_NAME=CWWKF0045E: An existing feature definition, {1}, is a possible match for the feature {0} which was not found. ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODY1NzYzNQ=="}, "originalCommit": {"oid": "b68cca4b5a06b0f61d694eb566da5bd2e7b74bf0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODgzMzYyOQ==", "bodyText": "latest message change has been pushed to github", "url": "https://github.com/OpenLiberty/open-liberty/pull/13914#discussion_r488833629", "createdAt": "2020-09-15T17:21:08Z", "author": {"login": "sebratton"}, "path": "dev/com.ibm.ws.kernel.feature.core/resources/com/ibm/ws/kernel/feature/internal/resources/ProvisionerMessages.nlsprops", "diffHunk": "@@ -217,6 +217,11 @@ UPDATE_CONFLICT_INCOMPATIBLE_EE_FEATURES_DIFFERENT_PLATFORM_ERROR=CWWKF0044E: Th\n UPDATE_CONFLICT_INCOMPATIBLE_EE_FEATURES_DIFFERENT_PLATFORM_ERROR.explanation=The server configuration contains an incompatible combination of both Jakarta EE and Java EE features.  Features that support the Jakarta EE 9 programming model are incompatible with features that support the Java EE programming models, including Jakarta EE 8.  This conflict can happen if the two incompatible features are configured directly in the server configuration, or if the configured features include different versions of a feature that are incompatible.\n UPDATE_CONFLICT_INCOMPATIBLE_EE_FEATURES_DIFFERENT_PLATFORM_ERROR.useraction=Specify a compatible version of the configured features that caused the conflict in the server.xml file, and ensure the server.xml file uses either Jakarta EE or Java EE features, but not both.\n \n+#CWWK0045E {0} = feature appearing in server xml; {1} = a real feature def name which is a probable match for name 0.\n+MISSING_FEATURE_HAS_ALT_NAME=CWWKF0045E: An existing feature definition, {1}, is a possible match for the feature {0} which was not found. ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODY1NzYzNQ=="}, "originalCommit": {"oid": "b68cca4b5a06b0f61d694eb566da5bd2e7b74bf0"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2801, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}