{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA1MDU3Mjg3", "number": 14535, "title": "11851 Fix Open JMS20 FAT MessageEndpoint Tests", "bodyText": "Ref: #11851\nConfigure all server/client activation specs and application MDBs to declare (bind/enable) the message endpoints within all test applications in fat com.ibm.ws.messaging.open_jms20_fat.  Along with a few additional improvements, the FAT now provides a simple pattern to transform all server configurations which require the javax. packages to be replaced in JMS resource configuration elements.  The server transformation (server.xml) is the same as that applied to JMS configuration types metadata (metadata.xml).", "createdAt": "2020-10-16T19:29:09Z", "url": "https://github.com/OpenLiberty/open-liberty/pull/14535", "merged": true, "mergeCommit": {"oid": "1722f4dc2d2fd722dc56deef59d9c2a654b702dc"}, "closed": true, "closedAt": "2020-10-23T13:25:38Z", "author": {"login": "dazavala"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdVCIS9gBqjM5MDkxMjQ1NzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdVPnfGgBqjM5MTIxNTA1MDY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f8a5237321979538a7b3202dccfcd0f0ac8bcf14", "author": {"user": {"login": "dazavala", "name": "Dave Zavala"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/f8a5237321979538a7b3202dccfcd0f0ac8bcf14", "committedDate": "2020-10-16T19:11:30Z", "message": "11851 Fix Open JMS20 FAT MessageEndpoint Tests"}, "afterCommit": {"oid": "2523a436cab9bf686112e792f80990d4c55e8b23", "author": {"user": {"login": "dazavala", "name": "Dave Zavala"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/2523a436cab9bf686112e792f80990d4c55e8b23", "committedDate": "2020-10-22T13:37:45Z", "message": "11851 Fix Open JMS20 FAT MessageEndpoint Tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0ODIwMjgx", "url": "https://github.com/OpenLiberty/open-liberty/pull/14535#pullrequestreview-514820281", "createdAt": "2020-10-22T14:55:35Z", "commit": {"oid": "2523a436cab9bf686112e792f80990d4c55e8b23"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxNDo1NTozNVrOHml94A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxNTowMTo1MlrOHmmRNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDIyOTk4NA==", "bodyText": "I've been commenting these out once the tests are running.  Not sure if it is better to leave the trace enabled (for quicker debugging problems) or to have the trace present but commented out (for faster test runs).", "url": "https://github.com/OpenLiberty/open-liberty/pull/14535#discussion_r510229984", "createdAt": "2020-10-22T14:55:35Z", "author": {"login": "tbitonti"}, "path": "dev/com.ibm.ws.messaging.open_jms20_fat/publish/files/EJBMDB_server.xml", "diffHunk": "@@ -20,16 +20,17 @@\n   <variable name=\"onError\" value=\"FAIL\"/>\n \n   <logging ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2523a436cab9bf686112e792f80990d4c55e8b23"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDIzNDkzNA==", "bodyText": "Doesn't the usual server transformation steps handle this file?  Or is it not transformed because it is not under the 'servers' folder?  Also, there are some helper methods, either on LibertyServer or on ShrinkWrapHelper which may do something similar.", "url": "https://github.com/OpenLiberty/open-liberty/pull/14535#discussion_r510234934", "createdAt": "2020-10-22T15:01:52Z", "author": {"login": "tbitonti"}, "path": "dev/com.ibm.ws.messaging.open_jms20_fat/fat/src/com/ibm/ws/messaging/JMS20/fat/SharedSubscription/SharedSubscriptionWithMsgSelTest_129623.java", "diffHunk": "@@ -85,27 +79,33 @@ private static String getLocalAddress() {\n     }\n \n     private static boolean runInServlet(String test) throws IOException {\n-        return TestUtils.runInServlet( clientHostName, clientPort, subscriptionContextRoot, test, getLocalAddress() );\n+        return TestUtils.runInServlet(clientHostName, clientPort, subscriptionContextRoot, test, getLocalAddress());\n         // throws IOException\n     }\n \n-    //\n-\n     @BeforeClass\n     public static void testConfigFileChange() throws Exception {\n         engineServer.copyFileToLibertyInstallRoot(\n-            \"lib/features\",\n-            \"features/testjmsinternals-1.0.mf\");\n+                                                  \"lib/features\",\n+                                                  \"features/testjmsinternals-1.0.mf\");\n         engineServer.setServerConfigurationFile(\"SharedSubscriptionEngine.xml\");\n \n         clientServer.copyFileToLibertyInstallRoot(\n-            \"lib/features\",\n-            \"features/testjmsinternals-1.0.mf\");\n+                                                  \"lib/features\",\n+                                                  \"features/testjmsinternals-1.0.mf\");\n         TestUtils.addDropinsWebApp(clientServer, subscriptionAppName, subscriptionPackages);\n-        clientServer.setServerConfigurationFile(\"SharedSubscriptionDurClient.xml\");\n+        final String clientXml = \"SharedSubscriptionDurClient.xml\";\n+        if (JakartaEE9Action.isActive()) {\n+            Path clientXmlFile = Paths.get(\n+                                           \"lib/LibertyFATTestFiles\",\n+                                           clientXml);\n+            JakartaEE9Action.transformApp(clientXmlFile);\n+            Log.info(c, \"setUp\", \"Transformed server \" + clientXmlFile);\n+        }\n+        clientServer.setServerConfigurationFile(clientXml);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2523a436cab9bf686112e792f80990d4c55e8b23"}, "originalPosition": 103}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2523a436cab9bf686112e792f80990d4c55e8b23", "author": {"user": {"login": "dazavala", "name": "Dave Zavala"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/2523a436cab9bf686112e792f80990d4c55e8b23", "committedDate": "2020-10-22T13:37:45Z", "message": "11851 Fix Open JMS20 FAT MessageEndpoint Tests"}, "afterCommit": {"oid": "edb20b5aa6dd16ffc17ac21af1acd325e80337ff", "author": {"user": {"login": "dazavala", "name": "Dave Zavala"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/edb20b5aa6dd16ffc17ac21af1acd325e80337ff", "committedDate": "2020-10-22T18:08:42Z", "message": "11851 Fix Open JMS20 FAT MessageEndpoint Tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "edb20b5aa6dd16ffc17ac21af1acd325e80337ff", "author": {"user": {"login": "dazavala", "name": "Dave Zavala"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/edb20b5aa6dd16ffc17ac21af1acd325e80337ff", "committedDate": "2020-10-22T18:08:42Z", "message": "11851 Fix Open JMS20 FAT MessageEndpoint Tests"}, "afterCommit": {"oid": "607f89206b0b907ebc5cb4f11a9658df4b043b2c", "author": {"user": {"login": "dazavala", "name": "Dave Zavala"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/607f89206b0b907ebc5cb4f11a9658df4b043b2c", "committedDate": "2020-10-22T18:25:48Z", "message": "11851 Fix Open JMS20 FAT MessageEndpoint Tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1MDA2Mjgw", "url": "https://github.com/OpenLiberty/open-liberty/pull/14535#pullrequestreview-515006280", "createdAt": "2020-10-22T18:27:19Z", "commit": {"oid": "edb20b5aa6dd16ffc17ac21af1acd325e80337ff"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68010633ed059fc55a465420d1b2e67b7bc0a0c6", "author": {"user": {"login": "dazavala", "name": "Dave Zavala"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/68010633ed059fc55a465420d1b2e67b7bc0a0c6", "committedDate": "2020-10-23T04:41:53Z", "message": "11851 Fix Open JMS20 FAT MessageEndpoint Tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "607f89206b0b907ebc5cb4f11a9658df4b043b2c", "author": {"user": {"login": "dazavala", "name": "Dave Zavala"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/607f89206b0b907ebc5cb4f11a9658df4b043b2c", "committedDate": "2020-10-22T18:25:48Z", "message": "11851 Fix Open JMS20 FAT MessageEndpoint Tests"}, "afterCommit": {"oid": "68010633ed059fc55a465420d1b2e67b7bc0a0c6", "author": {"user": {"login": "dazavala", "name": "Dave Zavala"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/68010633ed059fc55a465420d1b2e67b7bc0a0c6", "committedDate": "2020-10-23T04:41:53Z", "message": "11851 Fix Open JMS20 FAT MessageEndpoint Tests"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3076, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}