{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkxMDE1Njgz", "number": 14082, "title": "EJBBindings Server.xml bindings test", "bodyText": "#8231\nTests ejb-jar-bnd.xml elements included directly in server.xml", "createdAt": "2020-09-22T15:17:04Z", "url": "https://github.com/OpenLiberty/open-liberty/pull/14082", "merged": true, "mergeCommit": {"oid": "bfb63924e826fc1f336aa0a5c431746bd46ee259"}, "closed": true, "closedAt": "2020-09-27T15:27:49Z", "author": {"login": "olendvcook"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLfAdvAFqTQ5Mzg0OTMyMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdMcAbQABqjM4MDkzMjAxNjg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzODQ5MzIw", "url": "https://github.com/OpenLiberty/open-liberty/pull/14082#pullrequestreview-493849320", "createdAt": "2020-09-22T21:10:10Z", "commit": {"oid": "4012b615d2654f4d648433e74bf1363c0f46a350"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQyMToxMDoxMFrOHWMgHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQyMToxNDoxMFrOHWMnpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzAzNTU0OA==", "bodyText": "I hate to be that guy, but could this file be reformatted with a uniform indentation scheme?  I normally wouldn't necessarily protest about it, but since this test is actually about the server.xml file we should make sure it's easy to read.", "url": "https://github.com/OpenLiberty/open-liberty/pull/14082#discussion_r493035548", "createdAt": "2020-09-22T21:10:10Z", "author": {"login": "brideck"}, "path": "dev/com.ibm.ws.ejbcontainer.bindings_fat/publish/servers/com.ibm.ws.ejbcontainer.bindings.fat.serverxml.testserver/server.xml", "diffHunk": "@@ -0,0 +1,53 @@\n+<server>\n+    <featureManager>\n+        <feature>servlet-3.1</feature>\n+        <feature>ejbRemote-3.2</feature>\n+        <feature>ejbHome-3.2</feature>\n+\t\t<feature>componenttest-1.0</feature>\n+    </featureManager>\n+    \n+    <include location=\"../fatTestPorts.xml\"/>\n+\n+    <iiopEndpoint id=\"defaultIiopEndpoint\" iiopPort=\"${bvt.prop.IIOP}\" iiopsPort=\"${bvt.prop.IIOP.secure}\"/>\n+    \n+    <ejbContainer bindToServerRoot=\"true\"/>\n+    \n+    <application location=\"ServerXMLTestApp.ear\">\n+    \n+    \t<ejb-jar-bnd moduleName=\"BindingNameEJB\">\n+    \t\t<session name=\"BindingName5\">\n+    \t\t\t<interface class=\"com.ibm.ejb3x.BindingName.ejb.BindingNameIntf\" binding-name=\"ejblocal:ejb/ServerXMLBindingNameIntf5\"/>\n+  \t\t\t\t<interface class=\"com.ibm.ejb3x.BindingName.ejb.RemoteBindingNameIntf\" binding-name=\"ejb/ServerXMLBindingNameIntf5\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4012b615d2654f4d648433e74bf1363c0f46a350"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzAzNzQ3Ng==", "bodyText": "There's some errant copy/paste issues with the assertion text here and with remote-home-binding below.  Also, is there any particular reason that you're not just using assertNotNull for all of these test points?", "url": "https://github.com/OpenLiberty/open-liberty/pull/14082#discussion_r493037476", "createdAt": "2020-09-22T21:14:10Z", "author": {"login": "brideck"}, "path": "dev/com.ibm.ws.ejbcontainer.bindings_fat/test-applications/ServerXMLBindingsWeb.war/src/com/ibm/ws/ejbcontainer/bindings/serverxml/bnd/web/ServerXMLBindingsTestServlet.java", "diffHunk": "@@ -0,0 +1,144 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 IBM Corporation and others.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *     IBM Corporation - initial API and implementation\n+ *******************************************************************************/\n+package com.ibm.ws.ejbcontainer.bindings.serverxml.bnd.web;\n+\n+import static org.junit.Assert.fail;\n+\n+import javax.naming.InitialContext;\n+import javax.rmi.PortableRemoteObject;\n+import javax.servlet.annotation.WebServlet;\n+\n+import com.ibm.ejb3x.BindingName.ejb.BindingNameIntf;\n+import com.ibm.ejb3x.BindingName.ejb.RemoteBindingNameIntf;\n+import com.ibm.ejb3x.ComponentIDBnd.ejb.ComponentIDBnd;\n+import com.ibm.ejb3x.ComponentIDBnd.ejb.ComponentIDBndHome;\n+import com.ibm.ejb3x.HomeBindingName.ejb.LocalHomeBindingName;\n+import com.ibm.ejb3x.HomeBindingName.ejb.LocalHomeBindingNameHome;\n+import com.ibm.ejb3x.HomeBindingName.ejb.RemoteHomeBindingName;\n+import com.ibm.ejb3x.HomeBindingName.ejb.RemoteHomeBindingNameHome;\n+import com.ibm.ejb3x.SimpleBindingName.ejb.SimpleBindingName;\n+import com.ibm.ejb3x.SimpleBindingName.ejb.SimpleBindingNameHome;\n+\n+import componenttest.app.FATServlet;\n+\n+/**\n+ */\n+@SuppressWarnings(\"serial\")\n+@WebServlet(\"/ServerXMLBindingsTestServlet\")\n+public class ServerXMLBindingsTestServlet extends FATServlet {\n+\n+    public void lookupServerXMLBindings() throws Exception {\n+        InitialContext ctx = new InitialContext();\n+\n+        // Component-id\n+        ComponentIDBndHome compIDbeanHome = (ComponentIDBndHome) ctx.lookup(\"ejblocal:ejb/ServerXMLMyEJB1#com.ibm.ejb3x.ComponentIDBnd.ejb.ComponentIDBndHome\");\n+        if (compIDbeanHome == null) {\n+            fail(\"lookup component-id was null\");\n+        }\n+        ComponentIDBnd compIDbean = compIDbeanHome.create();\n+        if (compIDbean == null) {\n+            fail(\"home.create() component-id was null\");\n+        }\n+        System.out.println(\"Got bean, calling method\");\n+        if (compIDbean.foo() == null) {\n+            fail(\"bean.method() for component-id was null\");\n+        }\n+\n+        // local-home-binding\n+        LocalHomeBindingNameHome LHBbeanHome = (LocalHomeBindingNameHome) ctx.lookup(\"ejblocal:com/ibm/ejb3x/HomeBindingName/ejb/ServerXMLHomeBindingNameHome1\");\n+        if (LHBbeanHome == null) {\n+            fail(\"lookup local-home-binding was null\");\n+        }\n+        LocalHomeBindingName LHBbean = LHBbeanHome.create();\n+        if (LHBbean == null) {\n+            fail(\"home.create() for local-home-binding was null\");\n+        }\n+        if (LHBbean.foo() == null) {\n+            fail(\"bean.method() for local-home-binding was null\");\n+        }\n+\n+        // remote-home-binding\n+        Object RHBlookup = ctx.lookup(\"com/ibm/ejb3x/HomeBindingName/ejb/ServerXMLHomeBindingNameHome3\");\n+        RemoteHomeBindingNameHome RHBbeanHome = (RemoteHomeBindingNameHome) PortableRemoteObject.narrow(RHBlookup, RemoteHomeBindingNameHome.class);\n+        if (RHBbeanHome == null) {\n+            fail(\"lookup for remote-home-binding was null\");\n+        }\n+        RemoteHomeBindingName RHBbean = RHBbeanHome.create();\n+        if (RHBbean == null) {\n+            fail(\"lookup for remote-home-binding was null\");\n+        }\n+        if (RHBbean.foo() == null) {\n+            fail(\"lookup for remote-home-binding was null\");\n+        }\n+\n+        // simple-binding-name\n+        SimpleBindingNameHome SBNbeanHome = (SimpleBindingNameHome) ctx.lookup(\"ejblocal:com/ibm/ejb3x/SimpleBindingName/ejb/ServerXMLSimpleBindingNameHome1\");\n+        if (SBNbeanHome == null) {\n+            fail(\"lookup for simple-binding-name was null\");\n+        }\n+        SimpleBindingName SBNbean = SBNbeanHome.create();\n+        if (SBNbean == null) {\n+            fail(\"lookup for simple-binding-name was null\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4012b615d2654f4d648433e74bf1363c0f46a350"}, "originalPosition": 89}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4012b615d2654f4d648433e74bf1363c0f46a350", "author": {"user": {"login": "olendvcook", "name": "Olen Cook"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/4012b615d2654f4d648433e74bf1363c0f46a350", "committedDate": "2020-09-22T14:03:59Z", "message": "EJBBindings Server.xml bindings test"}, "afterCommit": {"oid": "6d49001b630c3c8422fdee5099ecd6df65877376", "author": {"user": {"login": "olendvcook", "name": "Olen Cook"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/6d49001b630c3c8422fdee5099ecd6df65877376", "committedDate": "2020-09-22T22:08:23Z", "message": "EJBBindings Server.xml bindings test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzODgxMzQ0", "url": "https://github.com/OpenLiberty/open-liberty/pull/14082#pullrequestreview-493881344", "createdAt": "2020-09-22T22:09:47Z", "commit": {"oid": "4012b615d2654f4d648433e74bf1363c0f46a350"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6d49001b630c3c8422fdee5099ecd6df65877376", "author": {"user": {"login": "olendvcook", "name": "Olen Cook"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/6d49001b630c3c8422fdee5099ecd6df65877376", "committedDate": "2020-09-22T22:08:23Z", "message": "EJBBindings Server.xml bindings test"}, "afterCommit": {"oid": "24df40ce4197c153005c547eefe6b2705a7f2956", "author": {"user": {"login": "olendvcook", "name": "Olen Cook"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/24df40ce4197c153005c547eefe6b2705a7f2956", "committedDate": "2020-09-22T22:10:26Z", "message": "EJBBindings Server.xml bindings test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1NjIxMDkw", "url": "https://github.com/OpenLiberty/open-liberty/pull/14082#pullrequestreview-495621090", "createdAt": "2020-09-24T14:16:22Z", "commit": {"oid": "24df40ce4197c153005c547eefe6b2705a7f2956"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "24df40ce4197c153005c547eefe6b2705a7f2956", "author": {"user": {"login": "olendvcook", "name": "Olen Cook"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/24df40ce4197c153005c547eefe6b2705a7f2956", "committedDate": "2020-09-22T22:10:26Z", "message": "EJBBindings Server.xml bindings test"}, "afterCommit": {"oid": "1ef46bcd9b4b30b566918fe12655b62de9b235bb", "author": {"user": {"login": "olendvcook", "name": "Olen Cook"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/1ef46bcd9b4b30b566918fe12655b62de9b235bb", "committedDate": "2020-09-24T14:24:35Z", "message": "EJBBindings Server.xml bindings test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d35d4baabaed16a51dc816412851f1293b320c74", "author": {"user": {"login": "olendvcook", "name": "Olen Cook"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/d35d4baabaed16a51dc816412851f1293b320c74", "committedDate": "2020-09-25T20:41:58Z", "message": "EJBBindings Server.xml bindings test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1ef46bcd9b4b30b566918fe12655b62de9b235bb", "author": {"user": {"login": "olendvcook", "name": "Olen Cook"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/1ef46bcd9b4b30b566918fe12655b62de9b235bb", "committedDate": "2020-09-24T14:24:35Z", "message": "EJBBindings Server.xml bindings test"}, "afterCommit": {"oid": "d35d4baabaed16a51dc816412851f1293b320c74", "author": {"user": {"login": "olendvcook", "name": "Olen Cook"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/d35d4baabaed16a51dc816412851f1293b320c74", "committedDate": "2020-09-25T20:41:58Z", "message": "EJBBindings Server.xml bindings test"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3270, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}