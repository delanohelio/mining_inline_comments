{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0NTE3MjE2", "number": 11203, "title": "Add missing autofeatures to resolveAsSet output", "bodyText": "", "createdAt": "2020-03-05T21:47:24Z", "url": "https://github.com/OpenLiberty/open-liberty/pull/11203", "merged": true, "mergeCommit": {"oid": "bac8028dec85e31278730989164589311c323bc3"}, "closed": true, "closedAt": "2020-03-12T14:26:57Z", "author": {"login": "TayyabDev"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKyqZMgH2gAyMzg0NTE3MjE2OjFmMmM4MjI0MjEzOTRmODdkYWE0MTAyMzc1ZDMzMTViZGRhNmRiNmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcM8GsFgFqTM3MzU3NDg4Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1f2c822421394f87daa4102375d3315bdda6db6f", "author": {"user": {"login": "TayyabDev", "name": "Tayyab Waqar"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/1f2c822421394f87daa4102375d3315bdda6db6f", "committedDate": "2020-03-05T21:46:53Z", "message": "Add call to old resolve api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc8bff631dd7ea75077b63fa0b34fd4391cda6c8", "author": {"user": {"login": "TayyabDev", "name": "Tayyab Waqar"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/dc8bff631dd7ea75077b63fa0b34fd4391cda6c8", "committedDate": "2020-03-06T20:47:28Z", "message": "filter auto feature from old resolver cal"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f07e7eb8b62df20ce9c207663163f69e97a98d34", "author": {"user": {"login": "TayyabDev", "name": "Tayyab Waqar"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/f07e7eb8b62df20ce9c207663163f69e97a98d34", "committedDate": "2020-03-09T17:49:01Z", "message": "Clean up sysout"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxNDEwNjIw", "url": "https://github.com/OpenLiberty/open-liberty/pull/11203#pullrequestreview-371410620", "createdAt": "2020-03-09T18:04:21Z", "commit": {"oid": "f07e7eb8b62df20ce9c207663163f69e97a98d34"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQxODowNDoyMVrOFzznRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQxODowNDoyMVrOFzznRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTg2NzMzNQ==", "bodyText": "You should skip the 2nd call to resolve the auto features if returnedFeatureList is empty.", "url": "https://github.com/OpenLiberty/open-liberty/pull/11203#discussion_r389867335", "createdAt": "2020-03-09T18:04:21Z", "author": {"login": "alvinso"}, "path": "dev/com.ibm.ws.install/src/com/ibm/ws/install/internal/ResolveDirector.java", "diffHunk": "@@ -641,8 +641,24 @@ void resolveAutoFeatures(Collection<ESAAsset> autoFeatures, ArrayList<InstallAss\n                 Set<String> allServerFeatures = new HashSet<>(InstallUtils.getAllServerFeatures());\n                 allServerFeatures.addAll(assetsToInstall);\n \n-                log(Level.FINE, \"Using resolveAsSet to resolve features\");\n+                // FIRST CALL to resolveAsSet --> this throws an error for singleton features\n+                log(Level.FINE, \"Calling resolveAsSet api\");\n                 installResources = resolver.resolveAsSet(allServerFeatures); // use new api\n+\n+\n+                Set<String> returnedFeatureList = new HashSet<>();\n+                for(List<RepositoryResource>  resList  : installResources){\n+                    for(RepositoryResource res : resList) {\n+                        if (res.getType().equals(ResourceType.FEATURE)) {\n+                            EsaResource esa = (EsaResource) res;\n+                            returnedFeatureList.add(esa.getProvideFeature());\n+                        }\n+                    }\n+                }\n+                InstallUtils.setResolveAsSetFeatures(returnedFeatureList);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f07e7eb8b62df20ce9c207663163f69e97a98d34"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54588424ec43750b0f0e27d631b3155647c611a4", "author": {"user": {"login": "TayyabDev", "name": "Tayyab Waqar"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/54588424ec43750b0f0e27d631b3155647c611a4", "committedDate": "2020-03-09T19:01:44Z", "message": "Refactor and move around code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "634d7dc2eae12dd221839aae4e7f19f6ef308978", "author": {"user": {"login": "TayyabDev", "name": "Tayyab Waqar"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/634d7dc2eae12dd221839aae4e7f19f6ef308978", "committedDate": "2020-03-10T15:44:38Z", "message": "Include all resources in resolveAsSetFeatures list"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64562a0295601152d206cad57156b3a82e95c2e0", "author": {"user": {"login": "TayyabDev", "name": "Tayyab Waqar"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/64562a0295601152d206cad57156b3a82e95c2e0", "committedDate": "2020-03-10T18:22:01Z", "message": "Optimize code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c89d5d48ddb39ee599ae1166880b252de10a0d69", "author": {"user": {"login": "TayyabDev", "name": "Tayyab Waqar"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/c89d5d48ddb39ee599ae1166880b252de10a0d69", "committedDate": "2020-03-10T20:31:26Z", "message": "Support fix for liberty maven plugin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ff85f679cd1e6e355beea92d953035ac2b0d0b1", "author": {"user": {"login": "TayyabDev", "name": "Tayyab Waqar"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/4ff85f679cd1e6e355beea92d953035ac2b0d0b1", "committedDate": "2020-03-11T14:06:00Z", "message": "Merge branch 'integration' of github.com:OpenLiberty/open-liberty into autofeatureIssue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "414a6c6a4f35fb0591cd9d3f6fe6a5dc9cbdc529", "author": {"user": {"login": "TayyabDev", "name": "Tayyab Waqar"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/414a6c6a4f35fb0591cd9d3f6fe6a5dc9cbdc529", "committedDate": "2020-03-11T15:38:27Z", "message": "Only include features in resolve as set list"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4f0302a34511e8433071449cbfc574949d38f30", "author": {"user": {"login": "TayyabDev", "name": "Tayyab Waqar"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/e4f0302a34511e8433071449cbfc574949d38f30", "committedDate": "2020-03-11T20:08:02Z", "message": "Use method for resolving autofeatures"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczMTE4Mjkz", "url": "https://github.com/OpenLiberty/open-liberty/pull/11203#pullrequestreview-373118293", "createdAt": "2020-03-11T20:54:45Z", "commit": {"oid": "e4f0302a34511e8433071449cbfc574949d38f30"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQyMDo1NDo0NlrOF1IwQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQyMDo1NDo0NlrOF1IwQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTI2MjI3NQ==", "bodyText": "can we call ResolveDirector.resolveAutoFeatures right after the resolveAsSet call?", "url": "https://github.com/OpenLiberty/open-liberty/pull/11203#discussion_r391262275", "createdAt": "2020-03-11T20:54:46Z", "author": {"login": "alvinso"}, "path": "dev/com.ibm.ws.install/src/com/ibm/ws/install/internal/InstallKernelMap.java", "diffHunk": "@@ -738,7 +738,6 @@ private static boolean containsIgnoreCase(Collection<String> featureToInstall, S\n \n             resolver = new RepositoryResolver(productDefinitions, installedFeatures, Collections.<IFixInfo> emptySet(), repoList);\n             resolveResult = resolver.resolveAsSet((Collection<String>) data.get(FEATURES_TO_RESOLVE));\n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4f0302a34511e8433071449cbfc574949d38f30"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82562b062166bdb355bc3f487a58f0fa8b305618", "author": {"user": {"login": "TayyabDev", "name": "Tayyab Waqar"}}, "url": "https://github.com/OpenLiberty/open-liberty/commit/82562b062166bdb355bc3f487a58f0fa8b305618", "committedDate": "2020-03-11T21:01:01Z", "message": "Move reRefactor code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczNTc0ODgz", "url": "https://github.com/OpenLiberty/open-liberty/pull/11203#pullrequestreview-373574883", "createdAt": "2020-03-12T13:54:47Z", "commit": {"oid": "82562b062166bdb355bc3f487a58f0fa8b305618"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3037, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}