{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgyNTcxNzE0", "number": 25678, "title": "Fix query expression parsing and recovery issues", "bodyText": "Purpose\n\nFix query-expression context ending in the BallerinaParser when there's no on-conflict-clause\nRemove parser support of equals as an operator\nFix operator precedence param of the join-on-condition expression parsing\nImplement explicit recovery rules for equals keyword of join-on-condition in BallerinaParserErrorHandler\n\nFixes #25542\nFixes #25590\nFixes #25316\nApproach\nN/A\nSamples\nN/A\nRemarks\nN/A\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-09-09T06:55:49Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25678", "merged": true, "mergeCommit": {"oid": "9dbb36f54c2e4909d1133b89c9c57b57d3223a92"}, "closed": true, "closedAt": "2020-09-09T09:08:39Z", "author": {"login": "lochana-chathura"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdG2pssAH2gAyNDgyNTcxNzE0OjNjMzQyYjFiOTRiYTBjYmFhMTc1M2Y4NGFkZGI4MmJjYzBmZTgwNTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHIfe6AFqTQ4NDgxMDY2MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3c342b1b94ba0cbaa1753f84addb82bcc0fe8059", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3c342b1b94ba0cbaa1753f84addb82bcc0fe8059", "committedDate": "2020-09-08T12:21:12Z", "message": "Fix query expression recovery"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5f36f11f9ef4eb948d5075f78d0ac426ecfa502", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e5f36f11f9ef4eb948d5075f78d0ac426ecfa502", "committedDate": "2020-09-08T12:31:37Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into Fix-query\n\n\u0001 Conflicts:\n\u0001\tcompiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21a1a1abd4dec2f690abe4ea7c7709fc8973e9ce", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/21a1a1abd4dec2f690abe4ea7c7709fc8973e9ce", "committedDate": "2020-09-09T06:41:35Z", "message": "Improve join-clause recovery for missing join-on-condition"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69b8313b8b44227606c61dc2e9fabf14890087c9", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/69b8313b8b44227606c61dc2e9fabf14890087c9", "committedDate": "2020-09-09T07:08:33Z", "message": "Fix FormattingTreeModifier for changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0NzIwNTM5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25678#pullrequestreview-484720539", "createdAt": "2020-09-09T07:12:25Z", "commit": {"oid": "69b8313b8b44227606c61dc2e9fabf14890087c9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQwNzoxMjoyNVrOHO5tuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQwNzoxMjoyNVrOHO5tuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTM4NzcwNQ==", "bodyText": "Don't we need to recover here?\nWhat if theres an additional token (say a public keyword) before the on keyword?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25678#discussion_r485387705", "createdAt": "2020-09-09T07:12:25Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java", "diffHunk": "@@ -9504,17 +9501,35 @@ private STNode parseJoinClause(boolean isRhsExpr) {\n     /**\n      * Parse on clause.\n      * <p>\n-     * <code>on clause := on expression</code>\n+     * <code>on clause := `on` expression `equals` expression</code>\n      *\n      * @return On clause node\n      */\n     private STNode parseOnClause(boolean isRhsExpr) {\n+        STToken nextToken = peek();\n+        if (isQueryClauseStartToken(nextToken.kind)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69b8313b8b44227606c61dc2e9fabf14890087c9"}, "originalPosition": 119}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0ODEwNjYx", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25678#pullrequestreview-484810661", "createdAt": "2020-09-09T09:08:20Z", "commit": {"oid": "69b8313b8b44227606c61dc2e9fabf14890087c9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4682, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}