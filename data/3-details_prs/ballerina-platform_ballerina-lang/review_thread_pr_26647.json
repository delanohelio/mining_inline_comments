{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTExMzIyOTgy", "number": 26647, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQwNzoyNjo1N1rOEyrhoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMTowNDo1NFrOFE7VEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxNTc3Mzc2OnYy", "diffSide": "RIGHT", "path": "bvm/ballerina-runtime/src/main/java/io/ballerina/runtime/BalStringUtils.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQwNzoyNjo1N1rOHpc6zg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQwNzoyNjo1N1rOHpc6zg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzIyNzQ3MA==", "bodyText": "shall we put a comment what this \"2\" means?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26647#discussion_r513227470", "createdAt": "2020-10-28T07:26:57Z", "author": {"login": "gimantha"}, "path": "bvm/ballerina-runtime/src/main/java/io/ballerina/runtime/BalStringUtils.java", "diffHunk": "@@ -168,12 +195,12 @@ public static Object parseMapExpressionStringValue(String exprValue) {\n      * @param exprValue Ballerina expression syntax of the array\n      * @return table value\n      */\n-    public static Object parseTableExpressionStringValue(String exprValue) {\n+    public static Object parseTableExpressionStringValue(String exprValue, BLink parent) {\n         String[] keys = exprValue.substring\n                 (exprValue.indexOf('(') + 1, exprValue.indexOf(')')).split(\",\");\n         ArrayValue fieldNames = (ArrayValue) ValueCreator.createArrayValue(StringUtils.fromStringArray(keys));\n         ArrayValueImpl data = (ArrayValueImpl) StringUtils.parseExpressionStringValue(exprValue.substring\n-                (exprValue.indexOf(')') + 2));\n+                (exprValue.indexOf(')') + 2), parent);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "999821a41629f1d5d7e87cb2ed47288489cee5a6"}, "originalPosition": 195}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQwNzEwNjc1OnYy", "diffSide": "RIGHT", "path": "bvm/ballerina-runtime/src/main/java/io/ballerina/runtime/BalStringUtils.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMTowNDo1NFrOIFLRTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxMTowNDo1NFrOIFLRTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjI5ODQ0NA==", "bodyText": "Have this after the returning check. No need to initialize if you return", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26647#discussion_r542298444", "createdAt": "2020-12-14T11:04:54Z", "author": {"login": "pcnfernando"}, "path": "bvm/ballerina-runtime/src/main/java/io/ballerina/runtime/BalStringUtils.java", "diffHunk": "@@ -36,46 +38,60 @@\n import io.ballerina.runtime.types.BUnionType;\n import io.ballerina.runtime.values.ArrayValue;\n import io.ballerina.runtime.values.ArrayValueImpl;\n-import io.ballerina.runtime.values.MappingInitialValueEntry;\n+import io.ballerina.runtime.values.MapValueImpl;\n import io.ballerina.runtime.values.TableValueImpl;\n import io.ballerina.runtime.values.TupleValueImpl;\n import io.ballerina.runtime.values.XMLSequence;\n \n import java.util.ArrayList;\n-import java.util.HashMap;\n+import java.util.Arrays;\n import java.util.HashSet;\n import java.util.List;\n import java.util.Set;\n import java.util.regex.Matcher;\n import java.util.regex.Pattern;\n \n+import static io.ballerina.runtime.api.PredefinedTypes.TYPE_ANYDATA;\n+import static io.ballerina.runtime.api.PredefinedTypes.TYPE_ERROR;\n+\n /**\n  * Common utility methods used for Ballerina expression syntax manipulation.\n  *\n  * @since 2.0.0\n  */\n public class BalStringUtils {\n+    private static final UnionType bUnionType = new BUnionType(Arrays.asList(TYPE_ANYDATA, TYPE_ERROR));\n+    private static boolean hasCycles = false;\n \n     /**\n      * Create an array from string literal.\n      *\n      * @param exprValue Ballerina expression syntax of the array\n      * @return array value\n      */\n-    public static Object parseArrayExpressionStringValue(String exprValue) {\n+    public static Object parseArrayExpressionStringValue(String exprValue, BLink parent) {\n         List<String> list = getElements(exprValue);\n-        Object[] arrayElements = new Object[list.size()];\n+        ArrayValueImpl arr = new ArrayValueImpl(new BArrayType(bUnionType));\n+        CycleUtils.Node node = new CycleUtils.Node(arr, parent);\n         Set<Type> typeSet = new HashSet<>();\n         for (int i = 0; i < list.size(); i++) {\n             String e = list.get(i);\n-            Object val = StringUtils.parseExpressionStringValue(e);\n+            Object val = StringUtils.parseExpressionStringValue(e, node);\n             Type type = TypeChecker.getType(val);\n             typeSet.add(type);\n-            arrayElements[i] = val;\n+            arr.add(i, val);\n+        }\n+        int size = arr.size();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fffb2d9abcf80ceed526cc9d3827ac78bf8d5f28"}, "originalPosition": 62}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4672, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}