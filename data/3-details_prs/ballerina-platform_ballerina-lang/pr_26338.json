{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAyNTIyOTkx", "number": 26338, "title": "Make positions 0-based in the compiler", "bodyText": "Purpose\nThis PR modifies the position info of AST nodes in the compiler to 0-based positioning. This is to unify every component to make use of the same scheme. Where appropriate, the positions will be converted to 1-based (e.g., compiler errors given to users, stack traces in panics)\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-10-13T16:14:16Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26338", "merged": true, "mergeCommit": {"oid": "29586d45150db66a7a979b076a218ede3b2bc64d"}, "closed": true, "closedAt": "2020-10-14T17:07:02Z", "author": {"login": "pubudu91"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSWNBAAFqTUwODAwMTgxMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSgUICgFqTUwODU1NjE3Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4MDAxODEx", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26338#pullrequestreview-508001811", "createdAt": "2020-10-14T05:20:00Z", "commit": {"oid": "0a59bd55e7c24d1db3f213c4676093ea4cdc6f8f"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4MTEzNTgw", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26338#pullrequestreview-508113580", "createdAt": "2020-10-14T08:31:25Z", "commit": {"oid": "0a59bd55e7c24d1db3f213c4676093ea4cdc6f8f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQwODozMToyNVrOHhIFKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQwODozMToyNVrOHhIFKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDQ5NzQ1MA==", "bodyText": "With this change, now we don't need to convert a SyntaxDiagnostic to BLangDiagnostic. Shall we remove that conversion too?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26338#discussion_r504497450", "createdAt": "2020-10-14T08:31:25Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/parser/Parser.java", "diffHunk": "@@ -150,9 +150,9 @@ private void reportSyntaxDiagnostics(BDiagnosticSource diagnosticSource, SyntaxT\n             Location syntaxLocation = syntaxDiagnostic.location();\n             LineRange lineRange = syntaxLocation.lineRange();\n             LinePosition startLine = lineRange.startLine();\n-            LinePosition endLine = lineRange.startLine();\n-            Location location = new BLangDiagnosticLocation(diagnosticSource.cUnitName, startLine.line() + 1,\n-                    endLine.line() + 1, startLine.offset() + 1, endLine.offset() + 1);\n+            LinePosition endLine = lineRange.endLine();\n+            Location location = new BLangDiagnosticLocation(diagnosticSource.cUnitName, startLine.line(),\n+                                                            endLine.line(), startLine.offset(), endLine.offset());\n             BLangDiagnostic diag =\n                     new BLangDiagnostic(location, syntaxDiagnostic.message(), syntaxDiagnostic.diagnosticInfo());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0a59bd55e7c24d1db3f213c4676093ea4cdc6f8f"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "761d39d6cd3e054341bb001d64d88d9111a150eb", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/761d39d6cd3e054341bb001d64d88d9111a150eb", "committedDate": "2020-10-14T11:15:58Z", "message": "Rename srcFile -> fileName"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72309c37fe8e7f9d22230254b911661fe60decfa", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/72309c37fe8e7f9d22230254b911661fe60decfa", "committedDate": "2020-10-14T11:17:15Z", "message": "Make positions 0-based in the compiler"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47914ead507915a860ac669aead8bfc9bc31a68c", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/47914ead507915a860ac669aead8bfc9bc31a68c", "committedDate": "2020-10-14T11:17:16Z", "message": "Fix position info in oberservability gen"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "506d8b8e12cb4bf951d42090892bcc41bb24a617", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/506d8b8e12cb4bf951d42090892bcc41bb24a617", "committedDate": "2020-10-14T11:17:16Z", "message": "Remove unnecessary conversion of syntax diagnostic -> blang diagnostic"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4fbd09835e1c28b1453a4bab37bc2804cfc53f4d", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4fbd09835e1c28b1453a4bab37bc2804cfc53f4d", "committedDate": "2020-10-14T11:13:57Z", "message": "Remove unnecessary conversion of syntax diagnostic -> blang diagnostic"}, "afterCommit": {"oid": "506d8b8e12cb4bf951d42090892bcc41bb24a617", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/506d8b8e12cb4bf951d42090892bcc41bb24a617", "committedDate": "2020-10-14T11:17:16Z", "message": "Remove unnecessary conversion of syntax diagnostic -> blang diagnostic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "063a2e7d5099b181e2f0971990ce94ed7a88622d", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/063a2e7d5099b181e2f0971990ce94ed7a88622d", "committedDate": "2020-10-14T14:45:02Z", "message": "Fix missing node filtering test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NTU2MTc2", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26338#pullrequestreview-508556176", "createdAt": "2020-10-14T17:06:49Z", "commit": {"oid": "063a2e7d5099b181e2f0971990ce94ed7a88622d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4352, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}