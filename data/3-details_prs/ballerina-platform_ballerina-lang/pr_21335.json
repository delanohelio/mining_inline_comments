{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwODAwNjg2", "number": 21335, "title": "Send vscode client configuration during initialization", "bodyText": "Purpose\n\nSend vscode client configuration during initialization. Expected behavior is soon after Language Server gets the initialization request, initial configurations need to be sync using workspace/didChangeConfiguration notification.\n\nFixes #21324\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-02-27T11:40:15Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21335", "merged": true, "mergeCommit": {"oid": "09250c591b12ab67628348dff67744d26e35cfa6"}, "closed": true, "closedAt": "2020-03-02T06:18:42Z", "author": {"login": "rasika"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIZxgxgH2gAyMzgwODAwNjg2OjM5NmQzMzEzZTIxOWU1NDNlMzk2NGUwYTM0YmEwZGQwYTJkY2RmOWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcJnlVwgFqTM2Njk2OTMzMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "396d3313e219e543e3964e0a34ba0dd0a2dcdf9d", "author": {"user": {"login": "rasika", "name": "Rasika Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/396d3313e219e543e3964e0a34ba0dd0a2dcdf9d", "committedDate": "2020-02-27T11:39:11Z", "message": "Send vscode client configuration during initialization\n\nSigned-off-by: Rasika <info.rasika@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1NzIxNzE4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21335#pullrequestreview-365721718", "createdAt": "2020-02-27T14:24:55Z", "commit": {"oid": "396d3313e219e543e3964e0a34ba0dd0a2dcdf9d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxNDoyNTo0NFrOFvUPDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxNDoyNTo0NFrOFvUPDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTE1ODkyNw==", "bodyText": "I think this is to capture the initial configuration at the server-side? It seems that we are violating the LSP by sending the didChangeConfiguration notification through the extension bypassing the protocol. I think what we should do to fetch the initial configuration is to use the configuration request at the server-side [1].\n[1] https://microsoft.github.io/language-server-protocol/specifications/specification-3-14/#workspace_configuration", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21335#discussion_r385158927", "createdAt": "2020-02-27T14:25:44Z", "author": {"login": "nadeeshaan"}, "path": "tool-plugins/vscode/src/extension.ts", "diffHunk": "@@ -91,6 +91,21 @@ export function activate(context: ExtensionContext): Promise<any> {\n         activateTreeView(ballerinaExtInstance);\n         // Enable Ballerina Syntax Highlighter\n         activateSyntaxHighlighter(ballerinaExtInstance);\n+\n+        ballerinaExtInstance.onReady().then(() => {\n+            const langClient = <ExtendedLangClient>ballerinaExtInstance.langClient;\n+            // Send initial configuration \n+            const args: DidChangeConfigurationParams = {\n+                settings: workspace.getConfiguration('ballerina'),\n+            };\n+            langClient.sendNotification(\"workspace/didChangeConfiguration\", args);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "396d3313e219e543e3964e0a34ba0dd0a2dcdf9d"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2OTY5MzMx", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21335#pullrequestreview-366969331", "createdAt": "2020-03-02T06:18:29Z", "commit": {"oid": "396d3313e219e543e3964e0a34ba0dd0a2dcdf9d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4054, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}