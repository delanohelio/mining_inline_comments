{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1OTQxMTI2", "number": 25203, "title": "[Testerina] Improvements to assertion equality", "bodyText": "Purpose\nBased on the current language specification, deep value equality is not supported for behavioral type values. So, using \"assertEquals\" to compare any|error type values is misleading.\nThus, introducing a new function \"assertExactEquals\" that can be used for exact equality in \"any|error\" type and changing the \"assertEquals\" function signature to support value equality only for \"anydata|error\" type.\nFixes #22048\nApproach\n\nImplement \"assertExactEquals\", \"assertExactNotEquals\" and change function signature for \"assertEquals\", \"assertNotEquals\" based on expected behavior.\nWrite assertion test cases to cover different data types\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-08-11T08:06:57Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25203", "merged": true, "mergeCommit": {"oid": "71474e35f607fdad5966d925ab4a38d5d78bf451"}, "closed": true, "closedAt": "2020-08-12T08:27:28Z", "author": {"login": "Dilhasha"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc9cXCXAH2gAyNDY1OTQxMTI2OjRlNzFhZDIwYzY4MDEwZDJhZjQ2NTVlZmQ0YmUxNjc4M2QyMGNlZjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-HH1ogFqTQ2NTY5OTE1Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4e71ad20c68010d2af4655efd4be16783d20cef0", "author": {"user": {"login": "Dilhasha", "name": "Fathima Dilhasha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4e71ad20c68010d2af4655efd4be16783d20cef0", "committedDate": "2020-08-10T06:37:58Z", "message": "Add assertExactEquals function"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e29f8fa307f01beb84d51489d992fb20f1780b2", "author": {"user": {"login": "Dilhasha", "name": "Fathima Dilhasha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8e29f8fa307f01beb84d51489d992fb20f1780b2", "committedDate": "2020-08-11T08:04:11Z", "message": "Add assertion tests for different types"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0ODU3MjQ2", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25203#pullrequestreview-464857246", "createdAt": "2020-08-11T08:31:44Z", "commit": {"oid": "8e29f8fa307f01beb84d51489d992fb20f1780b2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwODozMTo0NFrOG-tykQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwODozMTo0NFrOG-tykQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODQxNTEyMQ==", "bodyText": "Is the assignment required? The very next line is isEqual = (actual == expected).\nIm assuming changing it to boolean isEqual = (actual == expected) should work.\nSame for line 87", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25203#discussion_r468415121", "createdAt": "2020-08-11T08:31:44Z", "author": {"login": "Ibaqu"}, "path": "misc/testerina/modules/testerina-core/src/main/ballerina/src/test/assert.bal", "diffHunk": "@@ -67,14 +67,9 @@ public function assertFalse(boolean condition, public string msg = \"Assertion Fa\n # + actual - Actual value\n # + expected - Expected value\n # + msg - Assertion error message\n-public function assertEquals(any|error actual, any|error expected, public string msg = \"Assertion Failed!\") {\n+public function assertEquals(anydata|error actual, anydata|error expected, public string msg = \"Assertion Failed!\") {\n     boolean isEqual = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e29f8fa307f01beb84d51489d992fb20f1780b2"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d6ba64f8d454dcb68cc47340fac49a44582a0a5", "author": {"user": {"login": "Dilhasha", "name": "Fathima Dilhasha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2d6ba64f8d454dcb68cc47340fac49a44582a0a5", "committedDate": "2020-08-11T10:20:10Z", "message": "Fix unnecessary assignments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94c5ddcad24dcb06c42a725e9da1c50c9710661e", "author": {"user": {"login": "Dilhasha", "name": "Fathima Dilhasha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/94c5ddcad24dcb06c42a725e9da1c50c9710661e", "committedDate": "2020-08-11T10:20:42Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into issue-22048-master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6afbf9e334992c6ba8187444511f51be4d4215b0", "author": {"user": {"login": "Dilhasha", "name": "Fathima Dilhasha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/6afbf9e334992c6ba8187444511f51be4d4215b0", "committedDate": "2020-08-11T11:34:54Z", "message": "Change assertion equality for function mocking"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "31917180bdac9d92c6f7f846a1aabb21c7d893fa", "author": {"user": {"login": "Dilhasha", "name": "Fathima Dilhasha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/31917180bdac9d92c6f7f846a1aabb21c7d893fa", "committedDate": "2020-08-11T10:34:15Z", "message": "Change assertion equality for function mocking"}, "afterCommit": {"oid": "6afbf9e334992c6ba8187444511f51be4d4215b0", "author": {"user": {"login": "Dilhasha", "name": "Fathima Dilhasha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/6afbf9e334992c6ba8187444511f51be4d4215b0", "committedDate": "2020-08-11T11:34:54Z", "message": "Change assertion equality for function mocking"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1MDEzODUy", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25203#pullrequestreview-465013852", "createdAt": "2020-08-11T12:26:06Z", "commit": {"oid": "6afbf9e334992c6ba8187444511f51be4d4215b0"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e7747ade60bf853a4f69df8a28825ad179b94b7", "author": {"user": {"login": "Dilhasha", "name": "Fathima Dilhasha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2e7747ade60bf853a4f69df8a28825ad179b94b7", "committedDate": "2020-08-11T13:22:32Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into issue-22048-master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec63e0fe8025c8ebb1628765d6212a7d20dae01d", "author": {"user": {"login": "Dilhasha", "name": "Fathima Dilhasha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ec63e0fe8025c8ebb1628765d6212a7d20dae01d", "committedDate": "2020-08-11T13:28:19Z", "message": "Change assertion equality for function mocking"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1NTU5NTk4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25203#pullrequestreview-465559598", "createdAt": "2020-08-12T03:02:28Z", "commit": {"oid": "ec63e0fe8025c8ebb1628765d6212a7d20dae01d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1NjUwNTMw", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25203#pullrequestreview-465650530", "createdAt": "2020-08-12T07:18:50Z", "commit": {"oid": "ec63e0fe8025c8ebb1628765d6212a7d20dae01d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNzoxODo1MFrOG_U1nA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNzoxODo1MFrOG_U1nA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA1NDg3Ng==", "bodyText": "Should we ask the user to handle this? Is there a possibility to hide this detail from the user and handle it internally maybe within the assertEquals function?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25203#discussion_r469054876", "createdAt": "2020-08-12T07:18:50Z", "author": {"login": "azinneera"}, "path": "tests/jballerina-debugger-integration-test/src/test/resources/project-based-tests/basic-project/src/hello-world/tests/hello_world_test.bal", "diffHunk": "@@ -33,5 +33,9 @@ public function mockPrint((any|error)... s) {\n function testFunc() {\n     // Invoking the main function\n     main();\n-    test:assertEquals(outputs[0], \"Hello, World!\");\n+    if (outputs[0] is anydata) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec63e0fe8025c8ebb1628765d6212a7d20dae01d"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1Njk5MTUz", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25203#pullrequestreview-465699153", "createdAt": "2020-08-12T08:27:18Z", "commit": {"oid": "ec63e0fe8025c8ebb1628765d6212a7d20dae01d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3633, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}