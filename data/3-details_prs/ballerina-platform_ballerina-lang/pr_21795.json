{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg5MDMwNzQ5", "number": 21795, "title": "Fix empty space print for error with empty details", "bodyText": "Purpose\nFix empty space print for error with empty details. With this change, we don't have to change union_type.bal BBE output to have extra spaces.\n< error key '' not found\n---\n> error key '' not found<space>\n\nBBE : https://ballerina.io/v1-1/learn/by-example/union-type.html\nApproach\n\nDescribe how you are implementing the solutions along with the design details.\nTrim the string and check if it is empty.\n\nSamples\n\nProvide high-level details about the samples related to this feature.\n\nRemarks\n\nList any other known issues, related PRs, TODO items, or any other notes related to the PR.\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-03-16T07:01:57Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21795", "merged": true, "mergeCommit": {"oid": "c39bf36f91dc5b2aed0338c2bf52468868ce97fd"}, "closed": true, "closedAt": "2020-03-16T22:56:10Z", "author": {"login": "KRVPerera"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcOKRCegBqjMxMzIxODUzNTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOVBxlAFqTM3NTU5NjM2Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "46ae1890b641848e259a92e1c51b459e378d565d", "author": {"user": {"login": "KRVPerera", "name": "Rukshan Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/46ae1890b641848e259a92e1c51b459e378d565d", "committedDate": "2020-03-16T06:58:51Z", "message": "Does not print a 'space' if error detail is empty\n\nSigned-off-by: KRVPerera <rukshan.viduranga@gmail.com>"}, "afterCommit": {"oid": "304204dbb5a3ddbf5b5e658a44a45dd9123a6408", "author": {"user": {"login": "KRVPerera", "name": "Rukshan Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/304204dbb5a3ddbf5b5e658a44a45dd9123a6408", "committedDate": "2020-03-16T08:58:29Z", "message": "Does not print a 'space' if error detail is empty\n\nSigned-off-by: KRVPerera <rukshan.viduranga@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "304204dbb5a3ddbf5b5e658a44a45dd9123a6408", "author": {"user": {"login": "KRVPerera", "name": "Rukshan Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/304204dbb5a3ddbf5b5e658a44a45dd9123a6408", "committedDate": "2020-03-16T08:58:29Z", "message": "Does not print a 'space' if error detail is empty\n\nSigned-off-by: KRVPerera <rukshan.viduranga@gmail.com>"}, "afterCommit": {"oid": "fb69aa006abfe5d407c5d7a4ccb670242996ce80", "author": {"user": {"login": "KRVPerera", "name": "Rukshan Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/fb69aa006abfe5d407c5d7a4ccb670242996ce80", "committedDate": "2020-03-16T10:05:19Z", "message": "Remove extra space in existing test cases\n\nSigned-off-by: KRVPerera <rukshan.viduranga@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0e53a4cd75cbb38b0fafd8007584b0a86da0c0c", "author": {"user": {"login": "KRVPerera", "name": "Rukshan Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c0e53a4cd75cbb38b0fafd8007584b0a86da0c0c", "committedDate": "2020-03-16T10:06:46Z", "message": "Does not print a 'space' if error detail is empty\n\nSigned-off-by: KRVPerera <rukshan.viduranga@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fb69aa006abfe5d407c5d7a4ccb670242996ce80", "author": {"user": {"login": "KRVPerera", "name": "Rukshan Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/fb69aa006abfe5d407c5d7a4ccb670242996ce80", "committedDate": "2020-03-16T10:05:19Z", "message": "Remove extra space in existing test cases\n\nSigned-off-by: KRVPerera <rukshan.viduranga@gmail.com>"}, "afterCommit": {"oid": "7fc3b8b12f85ca0cca36240f6bf3378b083194ed", "author": {"user": {"login": "KRVPerera", "name": "Rukshan Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7fc3b8b12f85ca0cca36240f6bf3378b083194ed", "committedDate": "2020-03-16T10:06:46Z", "message": "Remove extra space in existing test cases\n\nSigned-off-by: KRVPerera <rukshan.viduranga@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1MTc4NTE3", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21795#pullrequestreview-375178517", "createdAt": "2020-03-16T12:43:30Z", "commit": {"oid": "7fc3b8b12f85ca0cca36240f6bf3378b083194ed"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxMjo0MzozMFrOF2yhtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxMjo0MzozMFrOF2yhtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjk5NTI1NA==", "bodyText": "Do we need this conditional check? The details will be null if the user hasn't specified any details right?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21795#discussion_r392995254", "createdAt": "2020-03-16T12:43:30Z", "author": {"login": "pubudu91"}, "path": "bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/values/ErrorValue.java", "diffHunk": "@@ -88,16 +88,31 @@ public ErrorValue(BType type, BString reason, Object details) {\n     @Override\n     @Deprecated\n     public String stringValue() {\n-        return \"error \" + reason.getValue() +\n-                Optional.ofNullable(details).map(\n-                        details -> \" \" + org.ballerinalang.jvm.values.utils.StringUtils.getStringValue(details)).orElse(\n-                        \"\");\n+        String detailsString;\n+        if (details == null) {\n+            detailsString = \"\";\n+        } else {\n+            detailsString = org.ballerinalang.jvm.values.utils.StringUtils.getStringValue(details);\n+        }\n+        if (detailsString.trim().isEmpty()) {\n+            return \"error \" + reason.getValue();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fc3b8b12f85ca0cca36240f6bf3378b083194ed"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1Mjc0NTA0", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21795#pullrequestreview-375274504", "createdAt": "2020-03-16T14:32:45Z", "commit": {"oid": "945b366fa60ffe1dadf9459f4379b84ffc156c2f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "945b366fa60ffe1dadf9459f4379b84ffc156c2f", "author": {"user": {"login": "KRVPerera", "name": "Rukshan Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/945b366fa60ffe1dadf9459f4379b84ffc156c2f", "committedDate": "2020-03-16T13:55:04Z", "message": "Refactor ErrorValue stringValue method\n\nSigned-off-by: KRVPerera <rukshan.viduranga@gmail.com>"}, "afterCommit": {"oid": "7fc3b8b12f85ca0cca36240f6bf3378b083194ed", "author": {"user": {"login": "KRVPerera", "name": "Rukshan Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7fc3b8b12f85ca0cca36240f6bf3378b083194ed", "committedDate": "2020-03-16T10:06:46Z", "message": "Remove extra space in existing test cases\n\nSigned-off-by: KRVPerera <rukshan.viduranga@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f43b4ea6ce937998cb2a936fdbcb0457872cac9c", "author": {"user": {"login": "KRVPerera", "name": "Rukshan Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f43b4ea6ce937998cb2a936fdbcb0457872cac9c", "committedDate": "2020-03-16T16:11:53Z", "message": "Refactor ErrorValue stringValue method\n\nSigned-off-by: KRVPerera <rukshan.viduranga@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7fc3b8b12f85ca0cca36240f6bf3378b083194ed", "author": {"user": {"login": "KRVPerera", "name": "Rukshan Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7fc3b8b12f85ca0cca36240f6bf3378b083194ed", "committedDate": "2020-03-16T10:06:46Z", "message": "Remove extra space in existing test cases\n\nSigned-off-by: KRVPerera <rukshan.viduranga@gmail.com>"}, "afterCommit": {"oid": "f43b4ea6ce937998cb2a936fdbcb0457872cac9c", "author": {"user": {"login": "KRVPerera", "name": "Rukshan Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f43b4ea6ce937998cb2a936fdbcb0457872cac9c", "committedDate": "2020-03-16T16:11:53Z", "message": "Refactor ErrorValue stringValue method\n\nSigned-off-by: KRVPerera <rukshan.viduranga@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1NTk2MzYz", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21795#pullrequestreview-375596363", "createdAt": "2020-03-16T21:30:58Z", "commit": {"oid": "f43b4ea6ce937998cb2a936fdbcb0457872cac9c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3793, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}