{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3NzY1NTMy", "number": 21761, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxMzoxNTowNVrODn0-Xg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxMzoxNzowNFrODn1BBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzMDg4OTkwOnYy", "diffSide": "RIGHT", "path": "stdlib/grpc/src/main/java/org/ballerinalang/net/grpc/ObservableClientConnectorListener.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxMzoxNTowNVrOF2DKxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxODowNTo0MVrOF2Njkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjIxOTMzNQ==", "bodyText": "Can we do an integer division here instead of String.valueOf(statusCode).charAt(0) ? I think it might be better.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21761#discussion_r392219335", "createdAt": "2020-03-13T13:15:05Z", "author": {"login": "nadundesilva"}, "path": "stdlib/grpc/src/main/java/org/ballerinalang/net/grpc/ObservableClientConnectorListener.java", "diffHunk": "@@ -64,7 +65,7 @@ public void onError(Throwable throwable) {\n \n     private void addHttpStatusCode(int statusCode) {\n         Optional<ObserverContext> observerContext = ObserveUtils.getObserverContextOfCurrentFrame(context.getStrand());\n-        observerContext.ifPresent(ctx -> ctx.addTag(ObservabilityConstants.TAG_KEY_HTTP_STATUS_CODE,\n-                String.valueOf(statusCode)));\n+        observerContext.ifPresent(ctx -> ctx.addTag(ObservabilityConstants.TAG_KEY_HTTP_STATUS_CODE_GROUP,\n+                String.valueOf(statusCode).charAt(0) + STATUS_CODE_GROUP_SUFFIX));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "24288c264a8a6985b01d798c487623ba32e982ca"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjM4OTUyMg==", "bodyText": "Fixed with f22240b", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21761#discussion_r392389522", "createdAt": "2020-03-13T18:05:41Z", "author": {"login": "madushajg"}, "path": "stdlib/grpc/src/main/java/org/ballerinalang/net/grpc/ObservableClientConnectorListener.java", "diffHunk": "@@ -64,7 +65,7 @@ public void onError(Throwable throwable) {\n \n     private void addHttpStatusCode(int statusCode) {\n         Optional<ObserverContext> observerContext = ObserveUtils.getObserverContextOfCurrentFrame(context.getStrand());\n-        observerContext.ifPresent(ctx -> ctx.addTag(ObservabilityConstants.TAG_KEY_HTTP_STATUS_CODE,\n-                String.valueOf(statusCode)));\n+        observerContext.ifPresent(ctx -> ctx.addTag(ObservabilityConstants.TAG_KEY_HTTP_STATUS_CODE_GROUP,\n+                String.valueOf(statusCode).charAt(0) + STATUS_CODE_GROUP_SUFFIX));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjIxOTMzNQ=="}, "originalCommit": {"oid": "24288c264a8a6985b01d798c487623ba32e982ca"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQzMDg5NjY5OnYy", "diffSide": "RIGHT", "path": "stdlib/grpc/src/main/java/org/ballerinalang/net/grpc/callback/StreamingCallableUnitCallBack.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxMzoxNzowNFrOF2DPAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QxODowNTo1MlrOF2Nj-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjIyMDQxOQ==", "bodyText": "Same as in the other place we can use integer division. It might be even better to just hardcode \"5xx\"\nPlease do so in all similar places", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21761#discussion_r392220419", "createdAt": "2020-03-13T13:17:04Z", "author": {"login": "nadundesilva"}, "path": "stdlib/grpc/src/main/java/org/ballerinalang/net/grpc/callback/StreamingCallableUnitCallBack.java", "diffHunk": "@@ -40,20 +41,21 @@ public StreamingCallableUnitCallBack(StreamObserver responseSender, ObserverCont\n         this.responseSender = responseSender;\n         this.observerContext = context;\n     }\n-    \n+\n     @Override\n     public void notifySuccess() {\n         super.notifySuccess();\n     }\n-    \n+\n     @Override\n     public void notifyFailure(ErrorValue error) {\n         if (responseSender != null) {\n             handleFailure(responseSender, error);\n         }\n         if (observerContext != null) {\n-            observerContext.addTag(TAG_KEY_HTTP_STATUS_CODE,\n-                    String.valueOf(getMappingHttpStatusCode(Status.Code.INTERNAL.value())));\n+            observerContext.addTag(TAG_KEY_HTTP_STATUS_CODE_GROUP,\n+                    String.valueOf(getMappingHttpStatusCode(Status.Code.INTERNAL.value())).charAt(0) +\n+                            STATUS_CODE_GROUP_SUFFIX);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "24288c264a8a6985b01d798c487623ba32e982ca"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjM4OTYyNQ==", "bodyText": "Fixed with f22240b", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21761#discussion_r392389625", "createdAt": "2020-03-13T18:05:52Z", "author": {"login": "madushajg"}, "path": "stdlib/grpc/src/main/java/org/ballerinalang/net/grpc/callback/StreamingCallableUnitCallBack.java", "diffHunk": "@@ -40,20 +41,21 @@ public StreamingCallableUnitCallBack(StreamObserver responseSender, ObserverCont\n         this.responseSender = responseSender;\n         this.observerContext = context;\n     }\n-    \n+\n     @Override\n     public void notifySuccess() {\n         super.notifySuccess();\n     }\n-    \n+\n     @Override\n     public void notifyFailure(ErrorValue error) {\n         if (responseSender != null) {\n             handleFailure(responseSender, error);\n         }\n         if (observerContext != null) {\n-            observerContext.addTag(TAG_KEY_HTTP_STATUS_CODE,\n-                    String.valueOf(getMappingHttpStatusCode(Status.Code.INTERNAL.value())));\n+            observerContext.addTag(TAG_KEY_HTTP_STATUS_CODE_GROUP,\n+                    String.valueOf(getMappingHttpStatusCode(Status.Code.INTERNAL.value())).charAt(0) +\n+                            STATUS_CODE_GROUP_SUFFIX);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjIyMDQxOQ=="}, "originalCommit": {"oid": "24288c264a8a6985b01d798c487623ba32e982ca"}, "originalPosition": 32}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 874, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}