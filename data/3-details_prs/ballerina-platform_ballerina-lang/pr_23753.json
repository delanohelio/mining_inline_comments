{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI4NTM2NDc0", "number": 23753, "title": "Fix errors in messaging modules", "bodyText": "Purpose\n\n$title\n\nModules\n\n RabbitMQ\n NATS\n Kafka\n\n\nNote\nKafka transactions test failing due to:\n\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-06-05T15:38:33Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23753", "merged": true, "mergeCommit": {"oid": "39f95850dc2964727a258a195e5b45589351a5ac"}, "closed": true, "closedAt": "2020-06-08T04:42:27Z", "author": {"login": "aashikam"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcoUgyZAH2gAyNDI4NTM2NDc0OjhlMDgyMGJmNTgzZTBlZDk5MGUyZWRmOTFkYjkyMDdjOTc0MGNmZTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcpI8i8gFqTQyNTkxMTc0Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8e0820bf583e0ed990e2edf91db9207c9740cfe4", "author": {"user": {"login": "aashikam", "name": "Arshika Mohottige"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8e0820bf583e0ed990e2edf91db9207c9740cfe4", "committedDate": "2020-06-05T15:36:58Z", "message": "Fix rabbitmq module errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63988e38f7e1dd60e2ca33b1c914e0156e0a0bc2", "author": {"user": {"login": "aashikam", "name": "Arshika Mohottige"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/63988e38f7e1dd60e2ca33b1c914e0156e0a0bc2", "committedDate": "2020-06-05T15:43:56Z", "message": "Fix formatting in rabbitmq module"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdfa3c84aacb4102dc3e54f34eaa8fea71c06440", "author": {"user": {"login": "aashikam", "name": "Arshika Mohottige"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/fdfa3c84aacb4102dc3e54f34eaa8fea71c06440", "committedDate": "2020-06-06T05:15:41Z", "message": "Fix nats module errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d75960fb419de07a124a8e0f715af15ae764d736", "author": {"user": {"login": "aashikam", "name": "Arshika Mohottige"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d75960fb419de07a124a8e0f715af15ae764d736", "committedDate": "2020-06-06T05:17:20Z", "message": "Fix formatting in nats module"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8261062aab8e7cdf92ffd9e5ef8fdf9ac5b22539", "author": {"user": {"login": "aashikam", "name": "Arshika Mohottige"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8261062aab8e7cdf92ffd9e5ef8fdf9ac5b22539", "committedDate": "2020-06-06T05:52:39Z", "message": "Fix kafka module errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ea1b04d7681a05c7a3ddafaf873637e846c3b19", "author": {"user": {"login": "aashikam", "name": "Arshika Mohottige"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3ea1b04d7681a05c7a3ddafaf873637e846c3b19", "committedDate": "2020-06-06T06:32:31Z", "message": "Fix kafka unit test failures"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NzIwMDk5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23753#pullrequestreview-425720099", "createdAt": "2020-06-06T07:04:08Z", "commit": {"oid": "3ea1b04d7681a05c7a3ddafaf873637e846c3b19"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQwNzowNDowOFrOGgCUtQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQwNzo0Nzo0OVrOGgCevQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI0NTY4NQ==", "bodyText": "Shall we replace the param reason with errorType or typeId", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23753#discussion_r436245685", "createdAt": "2020-06-06T07:04:08Z", "author": {"login": "chamil321"}, "path": "stdlib/messaging/kafka/src/main/java/org/ballerinalang/messaging/kafka/utils/KafkaUtils.java", "diffHunk": "@@ -628,26 +630,15 @@ private static Object getBValues(Object value, String type) {\n     }\n \n     public static BError createKafkaError(String message, String reason) {\n-        MapValue<BString, Object> detail = createKafkaDetailRecord(message);\n-        return BValueCreator.createErrorValue(StringUtils.fromString(reason), detail);\n+        return BallerinaErrors.createDistinctError(reason, KafkaConstants.KAFKA_PACKAGE_ID, message);\n     }\n \n-    public static BError createKafkaError(String message, String reason, BError cause) {\n-        MapValue<BString, Object> detail = createKafkaDetailRecord(message, cause);\n-        return BValueCreator.createErrorValue(StringUtils.fromString(reason), detail);\n-    }\n-\n-    private static MapValue<BString, Object> createKafkaDetailRecord(String message) {\n-        return createKafkaDetailRecord(message, null);\n-    }\n-\n-    private static MapValue<BString, Object> createKafkaDetailRecord(String message, BError cause) {\n-        MapValue<BString, Object> detail = createKafkaRecord(KafkaConstants.DETAIL_RECORD_NAME);\n-        return BallerinaValues.createRecord(detail, message, cause);\n+    public static BError createKafkaError(String message, String reason, ErrorValue cause) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ea1b04d7681a05c7a3ddafaf873637e846c3b19"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI0NzcxNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # Represents the NATS module related errors.\n          \n          \n            \n            # The union of the NATS module related errors.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23753#discussion_r436247714", "createdAt": "2020-06-06T07:39:33Z", "author": {"login": "chamil321"}, "path": "stdlib/messaging/nats/src/main/ballerina/src/nats/error.bal", "diffHunk": "@@ -14,32 +14,23 @@\n // specific language governing permissions and limitations\n // under the License.\n \n-# Holds the details of an error.\n-#\n-# + message - Specific error message of the error\n-# + cause - Any other error, which causes this error\n-public type Detail record {\n-    string message;\n-    error cause?;\n-};\n-\n-# Represents the reason for the NATS module related errors.\n-public const NATS_ERROR = \"{ballerina/nats}Error\";\n+# Represents the NATS module related errors.\n+public type NatsError distinct error;\n \n # Represents the NATS module related errors.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ea1b04d7681a05c7a3ddafaf873637e846c3b19"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI0ODI1Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # Represents the RabbitMQ module related errors.\n          \n          \n            \n            # The union of the RabbitMQ module related errors.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23753#discussion_r436248253", "createdAt": "2020-06-06T07:47:49Z", "author": {"login": "chamil321"}, "path": "stdlib/messaging/rabbitmq/src/main/ballerina/src/rabbitmq/rabbitmq_errors.bal", "diffHunk": "@@ -14,17 +14,8 @@\n // specific language governing permissions and limitations\n // under the License.\n \n-# The details of an error.\n-#\n-# + message - Specific error message of the error\n-# + cause - Any other error, which causes this error\n-public type Detail record {\n-    string message;\n-    error cause?;\n-};\n-\n-# Represents the reason for the RabbitMQ module related errors.\n-public const RABBITMQ_ERROR = \"{ballerina/rabbitmq}Error\";\n+# Represents the RabbitMQ module related errors.\n+public type RabbitMqError distinct error;\n \n # Represents the RabbitMQ module related errors.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ea1b04d7681a05c7a3ddafaf873637e846c3b19"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34d30facdab73e012f3b1169bbbf65be7e322b07", "author": {"user": {"login": "aashikam", "name": "Arshika Mohottige"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/34d30facdab73e012f3b1169bbbf65be7e322b07", "committedDate": "2020-06-06T07:52:52Z", "message": "Add changes from code review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1OTExNzQy", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23753#pullrequestreview-425911742", "createdAt": "2020-06-08T04:42:21Z", "commit": {"oid": "34d30facdab73e012f3b1169bbbf65be7e322b07"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4401, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}