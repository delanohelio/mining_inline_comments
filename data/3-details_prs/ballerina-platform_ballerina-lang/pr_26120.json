{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkzODM2MzE0", "number": 26120, "title": "Add support for transactional workers", "bodyText": "Purpose\nFixes #25794", "createdAt": "2020-09-28T03:01:10Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26120", "merged": true, "mergeCommit": {"oid": "91fa954c1cbe92d47a2d644f43743f944b281b9d"}, "closed": true, "closedAt": "2020-10-02T06:57:57Z", "author": {"login": "gimantha"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdNIpMQgH2gAyNDkzODM2MzE0OmIxMTVhZDQxNWNjMTVhZDJkNDJmNWViYjg5ZWI0NmZkMmFkMGQwMmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdOgaRbAFqTUwMDg5NjQ2NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b115ad415cc15ad2d42f5ebb89eb46fd2ad0d02c", "author": {"user": {"login": "gimantha", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b115ad415cc15ad2d42f5ebb89eb46fd2ad0d02c", "committedDate": "2020-09-28T00:42:29Z", "message": "Add test file for transactional workers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad36e8cf27910bbe0784534ebb4f5b96dbbb41e4", "author": {"user": {"login": "gimantha", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ad36e8cf27910bbe0784534ebb4f5b96dbbb41e4", "committedDate": "2020-09-28T00:44:18Z", "message": "Add initial commit for transactional workers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd4d9e4b29d70cb63f854e7ba6739c1f92996680", "author": {"user": {"login": "gimantha", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bd4d9e4b29d70cb63f854e7ba6739c1f92996680", "committedDate": "2020-09-28T00:49:07Z", "message": "Add transactional tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1fb992e2b32d2abc31d63738450bdb82ac7565cb", "author": {"user": {"login": "gimantha", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1fb992e2b32d2abc31d63738450bdb82ac7565cb", "committedDate": "2020-09-28T00:53:08Z", "message": "Add to tests to testng-new-parser.xml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3fb122ff739e31ae1e4fbc80e707c2568962652", "author": {"user": {"login": "gimantha", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c3fb122ff739e31ae1e4fbc80e707c2568962652", "committedDate": "2020-09-28T00:59:01Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into master_new\n\n# Conflicts:\n#\ttests/jballerina-unit-test/src/test/resources/testng-new-parser.xml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a77c593233c4ffa4fd35f77e292385b2c70a8c1", "author": {"user": {"login": "gimantha", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4a77c593233c4ffa4fd35f77e292385b2c70a8c1", "committedDate": "2020-09-28T02:52:15Z", "message": "Add parser tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6921b7787a40926841cf6cb5ac364fd979d6a776", "author": {"user": {"login": "gimantha", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/6921b7787a40926841cf6cb5ac364fd979d6a776", "committedDate": "2020-09-28T03:05:38Z", "message": "Revert: Add initial commit for transactional workers (ad36e8cf)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba05d1aaf72f1895027701bace69c44d4abe09e1", "author": {"user": {"login": "gimantha", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ba05d1aaf72f1895027701bace69c44d4abe09e1", "committedDate": "2020-09-28T03:06:09Z", "message": "update jsons"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db68dfa3b6ece39858c700a78378df036f455dd6", "author": {"user": {"login": "gimantha", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/db68dfa3b6ece39858c700a78378df036f455dd6", "committedDate": "2020-09-28T03:07:16Z", "message": "Revert: Add initial commit for transactional workers (ad36e8cf)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91b048b9b8ac28fdf50f24d6e2eab7fa3902b2ce", "author": {"user": {"login": "gimantha", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/91b048b9b8ac28fdf50f24d6e2eab7fa3902b2ce", "committedDate": "2020-09-28T03:09:35Z", "message": "Revert: Add initial commit for transactional workers (ad36e8cf)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a87ad60c94a07cf52c003144fd906388d8746e7d", "author": {"user": {"login": "gimantha", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a87ad60c94a07cf52c003144fd906388d8746e7d", "committedDate": "2020-09-28T03:09:43Z", "message": "Revert: Add initial commit for transactional workers (ad36e8cf)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MTY1MzQ0", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26120#pullrequestreview-497165344", "createdAt": "2020-09-28T03:24:44Z", "commit": {"oid": "a87ad60c94a07cf52c003144fd906388d8746e7d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwMzoyNDo0NFrOHYtWTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwMzoyNToxNFrOHYtWwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY3MDg2Mg==", "bodyText": "missing break after   case NAMED_WORKER_DECL_START:", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26120#discussion_r495670862", "createdAt": "2020-09-28T03:24:44Z", "author": {"login": "rdulmina"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParserErrorHandler.java", "diffHunk": "@@ -1860,6 +1865,8 @@ private Result seekMatchInStmtRelatedAlternativePaths(ParserRuleContext currentC\n             case REGULAR_COMPOUND_STMT_RHS:\n                 alternativeRules = REGULAR_COMPOUND_STMT_RHS;\n                 break;\n+            case NAMED_WORKER_DECL_START:\n+                alternativeRules = NAMED_WORKER_DECL_START;\n             default:\n                 return seekMatchInExprRelatedAlternativePaths(currentCtx, lookahead, currentDepth, matchingRulesCount,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a87ad60c94a07cf52c003144fd906388d8746e7d"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY3MDk3Nw==", "bodyText": "I think we can remove this.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26120#discussion_r495670977", "createdAt": "2020-09-28T03:25:14Z", "author": {"login": "rdulmina"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParserErrorHandler.java", "diffHunk": "@@ -1993,6 +2000,9 @@ private Result seekMatchInExprRelatedAlternativePaths(ParserRuleContext currentC\n             case LISTENERS_LIST_END:\n                 alternativeRules = LISTENERS_LIST_END;\n                 break;\n+            case NAMED_WORKER_DECL_START:\n+                alternativeRules = NAMED_WORKER_DECL_START;\n+                break;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a87ad60c94a07cf52c003144fd906388d8746e7d"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MTY2NDYz", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26120#pullrequestreview-497166463", "createdAt": "2020-09-28T03:29:48Z", "commit": {"oid": "a87ad60c94a07cf52c003144fd906388d8746e7d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwMzoyOTo0OFrOHYtaBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwMzoyOTo0OFrOHYtaBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY3MTgxNQ==", "bodyText": "Do we need recovery for worker keyword @SupunS  WDYT?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26120#discussion_r495671815", "createdAt": "2020-09-28T03:29:48Z", "author": {"login": "rdulmina"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java", "diffHunk": "@@ -3118,9 +3118,12 @@ private STNode parseStatement(STNode annots) {\n                 // any statement starts with `[` can be either a var-decl with tuple type\n                 // or a destructuring assignment with list-binding-pattern.\n                 return parseStatementStartsWithOpenBracket(getAnnotations(annots), false);\n+            case TRANSACTIONAL_KEYWORD:\n+                if (peek(2).kind == SyntaxKind.WORKER_KEYWORD) {\n+                    return parseNamedWorkerDeclaration(getAnnotations(annots));\n+                }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a87ad60c94a07cf52c003144fd906388d8746e7d"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b2d8deb8d4707578c3001463a27a788e4716793", "author": {"user": {"login": "gimantha", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1b2d8deb8d4707578c3001463a27a788e4716793", "committedDate": "2020-09-28T04:03:51Z", "message": "Fix checkstyle issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0624d45828a8f219a4d27f161073d4a12d90c0db", "author": {"user": {"login": "gimantha", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0624d45828a8f219a4d27f161073d4a12d90c0db", "committedDate": "2020-09-28T04:28:57Z", "message": "Remove unnecessary block"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MjEwNDcy", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26120#pullrequestreview-497210472", "createdAt": "2020-09-28T06:12:56Z", "commit": {"oid": "0624d45828a8f219a4d27f161073d4a12d90c0db"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5MTAxMzg2", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26120#pullrequestreview-499101386", "createdAt": "2020-09-30T05:51:33Z", "commit": {"oid": "0624d45828a8f219a4d27f161073d4a12d90c0db"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf46f2dbe5671d0e8daa3b237faa59b1eaf5fffb", "author": {"user": {"login": "gimantha", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/cf46f2dbe5671d0e8daa3b237faa59b1eaf5fffb", "committedDate": "2020-10-02T05:56:44Z", "message": "Resolve merge conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "106fbabcebd0b310151fa70de909f11d30dae901", "author": {"user": {"login": "gimantha", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/106fbabcebd0b310151fa70de909f11d30dae901", "committedDate": "2020-10-02T06:04:34Z", "message": "Revert change"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwODk2NDY0", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26120#pullrequestreview-500896464", "createdAt": "2020-10-02T06:57:50Z", "commit": {"oid": "106fbabcebd0b310151fa70de909f11d30dae901"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4453, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}