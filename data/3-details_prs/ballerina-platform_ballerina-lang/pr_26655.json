{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTExMzg1OTU4", "number": 26655, "title": "Add tests for interop issues", "bodyText": "Purpose\n\nResolve #20164\nResolve #20644\n\nApproach\n\nThe issue is already fixed in the master. This adds tests for the scenario\n\nSamples\n\nN/A\n\nRemarks\n\nN/A\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-10-28T08:58:27Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26655", "merged": true, "mergeCommit": {"oid": "9027b1143276f3942f860d214da5ee45a8780448"}, "closed": true, "closedAt": "2020-11-04T13:44:53Z", "author": {"login": "riyafa"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdW6gdXgBqjM5MzAzMjk0ODA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZLwT8AFqTUyMzI1OTI5OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bace79fd04ffafd82697066c7f95669d7dff4b90", "author": {"user": {"login": "riyafa", "name": "Riyafa Abdul Hameed"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bace79fd04ffafd82697066c7f95669d7dff4b90", "committedDate": "2020-10-28T08:41:28Z", "message": "Add tests for returning string? in interop function\n\nResolve https://github.com/ballerina-platform/ballerina-lang/issues/20164"}, "afterCommit": {"oid": "cd86d7242122e27dc7237cb1b669ffe575cfc2a1", "author": {"user": {"login": "riyafa", "name": "Riyafa Abdul Hameed"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/cd86d7242122e27dc7237cb1b669ffe575cfc2a1", "committedDate": "2020-10-28T09:52:57Z", "message": "Use DataProvider to simplify tests in StaticMethodTest\n\nAlso rearranges the location of tests in the static_method_tests.bal file for better clarity"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cd86d7242122e27dc7237cb1b669ffe575cfc2a1", "author": {"user": {"login": "riyafa", "name": "Riyafa Abdul Hameed"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/cd86d7242122e27dc7237cb1b669ffe575cfc2a1", "committedDate": "2020-10-28T09:52:57Z", "message": "Use DataProvider to simplify tests in StaticMethodTest\n\nAlso rearranges the location of tests in the static_method_tests.bal file for better clarity"}, "afterCommit": {"oid": "5989c8f9fdb91ec736b4157e3c0abf504b0fa3b4", "author": {"user": {"login": "riyafa", "name": "Riyafa Abdul Hameed"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5989c8f9fdb91ec736b4157e3c0abf504b0fa3b4", "committedDate": "2020-11-02T06:25:52Z", "message": "Add test for type cast failure\n\nResolve https://github.com/ballerina-platform/ballerina-lang/issues/20644"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyMTg1NTIy", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26655#pullrequestreview-522185522", "createdAt": "2020-11-03T04:36:47Z", "commit": {"oid": "5989c8f9fdb91ec736b4157e3c0abf504b0fa3b4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwNDozNjo0OFrOHsgCFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwNDozNjo0OFrOHsgCFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjQyNDIxNA==", "bodyText": "Do we need this comment here when there's no crash expected?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26655#discussion_r516424214", "createdAt": "2020-11-03T04:36:48Z", "author": {"login": "HindujaB"}, "path": "tests/jballerina-unit-test/src/test/resources/test-src/javainterop/basic/static_method_tests.bal", "diffHunk": "@@ -73,12 +91,55 @@ function testUsingParamValues() returns int {\n function testDecimalParamAndReturn(decimal a1) returns decimal {\n     return decimalParamAndReturn(a1);\n }\n-\n function testStaticResolve() {\n+    // When instance and static methods have the same name resolve static method based on the parameter type\n     int val = hashCode(2);\n     test:assertEquals(val, 2);\n }\n \n+public function testBalEnvSlowAsyncVoidSig() {\n+    int added = addTwoNumbersSlowAsyncVoidSig(1, 2);\n+    test:assertEquals(3, added);\n+}\n+\n+public function testUnionReturn() returns string {\n+    ResourceDefinition resourceDef = {path:\"path\", method:\"method\"};\n+    ResourceDefinition[] resources = [resourceDef];\n+    ApiDefinition apiDef = {resources:resources};\n+    return value:toString(getMapOrError(\"swagger\", apiDef));\n+}\n+\n+public function testBalEnvFastAsyncVoidSig() {\n+    int added = addTwoNumbersFastAsyncVoidSig(1, 2);\n+    test:assertEquals(3, added);\n+}\n+\n+public function testBalEnvSlowAsync() {\n+    int added = addTwoNumbersSlowAsync(1, 2);\n+    test:assertEquals(3, added);\n+}\n+\n+public function testBalEnvFastAsync() {\n+    int added = addTwoNumbersFastAsync(1, 2);\n+    test:assertEquals(3, added);\n+}\n+\n+public function testReturnNullString() {\n+    string concat = \"some\" + (returnNullString(true) ?: \"\");\n+    test:assertEquals(\"some\", concat);\n+}\n+\n+public function testReturnNotNullString() {\n+    string concat = \"some\" + (returnNullString(false) ?: \"\");\n+    test:assertEquals(\"someNotNull\", concat);\n+}\n+\n+public function testStringCast() {\n+    any result = getValue();\n+    string s = <string> result; // This line crashes with ClassCastException", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5989c8f9fdb91ec736b4157e3c0abf504b0fa3b4"}, "originalPosition": 75}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ba754f04b32739b4c50f5d7cafddf618a9f93d4", "author": {"user": {"login": "riyafa", "name": "Riyafa Abdul Hameed"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/6ba754f04b32739b4c50f5d7cafddf618a9f93d4", "committedDate": "2020-11-03T04:44:26Z", "message": "Add tests for returning string? in interop function\n\nResolve https://github.com/ballerina-platform/ballerina-lang/issues/20164"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be53ffc3e91e3e82880d6171492098b2b7ceca2a", "author": {"user": {"login": "riyafa", "name": "Riyafa Abdul Hameed"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/be53ffc3e91e3e82880d6171492098b2b7ceca2a", "committedDate": "2020-11-03T04:44:26Z", "message": "Use DataProvider to simplify tests in StaticMethodTest\n\nAlso rearranges the location of tests in the static_method_tests.bal file for better clarity"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68933736946509f7cb7ff2c08a899a22f15590ee", "author": {"user": {"login": "riyafa", "name": "Riyafa Abdul Hameed"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/68933736946509f7cb7ff2c08a899a22f15590ee", "committedDate": "2020-11-03T04:44:26Z", "message": "Add test for type cast failure\n\nResolve https://github.com/ballerina-platform/ballerina-lang/issues/20644"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5989c8f9fdb91ec736b4157e3c0abf504b0fa3b4", "author": {"user": {"login": "riyafa", "name": "Riyafa Abdul Hameed"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5989c8f9fdb91ec736b4157e3c0abf504b0fa3b4", "committedDate": "2020-11-02T06:25:52Z", "message": "Add test for type cast failure\n\nResolve https://github.com/ballerina-platform/ballerina-lang/issues/20644"}, "afterCommit": {"oid": "68933736946509f7cb7ff2c08a899a22f15590ee", "author": {"user": {"login": "riyafa", "name": "Riyafa Abdul Hameed"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/68933736946509f7cb7ff2c08a899a22f15590ee", "committedDate": "2020-11-03T04:44:26Z", "message": "Add test for type cast failure\n\nResolve https://github.com/ballerina-platform/ballerina-lang/issues/20644"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzMjU5Mjk5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26655#pullrequestreview-523259299", "createdAt": "2020-11-04T11:07:04Z", "commit": {"oid": "68933736946509f7cb7ff2c08a899a22f15590ee"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4304, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}