{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk3NjYyNjEy", "number": 26203, "title": "Restrict zero match clauses in match statement", "bodyText": "Purpose\n$Subject\nFixes #25296\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-10-05T07:48:48Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26203", "merged": true, "mergeCommit": {"oid": "63466653fe9e7cafb6dab949fd7cda50ee593491"}, "closed": true, "closedAt": "2020-10-06T11:00:32Z", "author": {"login": "rdulmina"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdOj42igH2gAyNDk3NjYyNjEyOjQ0MDE3OTM4YzdjNjQ1M2ExYzFkMDM2NWUwYzRiMzA4MDdiZWRjMmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdP2RzSgFqTUwMjgyMDA5NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "44017938c7c6453a1c1d0365e0c4b30807bedc2d", "author": {"user": {"login": "rdulmina", "name": "Dulmina Renuke"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/44017938c7c6453a1c1d0365e0c4b30807bedc2d", "committedDate": "2020-10-02T11:00:57Z", "message": "Parser changes for validating empty match clauses."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df6cbbc1047404f763a6cbc77f4a0c88499e7b36", "author": {"user": {"login": "rdulmina", "name": "Dulmina Renuke"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/df6cbbc1047404f763a6cbc77f4a0c88499e7b36", "committedDate": "2020-10-05T07:34:42Z", "message": "Test cases and recovery for zero match clause."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2e512836140ee6449ee1c5f106efc6e911ef5d2", "author": {"user": {"login": "rdulmina", "name": "Dulmina Renuke"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e2e512836140ee6449ee1c5f106efc6e911ef5d2", "committedDate": "2020-10-05T07:37:40Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cb805acc4718f98bfc2b5318c84462d4e280a3d", "author": {"user": {"login": "rdulmina", "name": "Dulmina Renuke"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8cb805acc4718f98bfc2b5318c84462d4e280a3d", "committedDate": "2020-10-05T07:45:48Z", "message": "Insert record to syntax_diagnostic_message.properties"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyMDczOTQ2", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26203#pullrequestreview-502073946", "createdAt": "2020-10-05T13:47:57Z", "commit": {"oid": "8cb805acc4718f98bfc2b5318c84462d4e280a3d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMzo0Nzo1N1rOHcd4Ag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMzo0Nzo1N1rOHcd4Ag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTYxMTY1MA==", "bodyText": "Missing license header.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26203#discussion_r499611650", "createdAt": "2020-10-05T13:47:57Z", "author": {"login": "anupama-pathirage"}, "path": "compiler/ballerina-parser/src/test/resources/statements/match-stmt/match_stmt_source_16.bal", "diffHunk": "@@ -0,0 +1,4 @@\n+function func(any v){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8cb805acc4718f98bfc2b5318c84462d4e280a3d"}, "originalPosition": 1}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1594d5126690fdb2c7929393bb2503bf9547012c", "author": {"user": {"login": "rdulmina", "name": "Dulmina Renuke"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1594d5126690fdb2c7929393bb2503bf9547012c", "committedDate": "2020-10-06T04:17:32Z", "message": "Update assert file."}, "afterCommit": {"oid": "8cb805acc4718f98bfc2b5318c84462d4e280a3d", "author": {"user": {"login": "rdulmina", "name": "Dulmina Renuke"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8cb805acc4718f98bfc2b5318c84462d4e280a3d", "committedDate": "2020-10-05T07:45:48Z", "message": "Insert record to syntax_diagnostic_message.properties"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNzg1NDg5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26203#pullrequestreview-502785489", "createdAt": "2020-10-06T10:12:03Z", "commit": {"oid": "8cb805acc4718f98bfc2b5318c84462d4e280a3d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxMDoxMjowM1rOHc_XPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxMDoxNDoyM1rOHc_caQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE2MDMxNg==", "bodyText": "shall we reword the error message?\n\"match statement should have one or more match clauses\"", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26203#discussion_r500160316", "createdAt": "2020-10-06T10:12:03Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-parser/src/main/resources/syntax_diagnostic_message.properties", "diffHunk": "@@ -235,7 +235,8 @@ error.more.field.match.patterns.after.rest.field=more field match patterns after\n error.action.as.a.wait.expr=''wait'' cannot be used with actions\n error.invalid.usage.of.var='var' is not a valid type descriptor\n error.more.match.patterns.after.rest.match.pattern=more match patterns after rest match pattern\n-error-match-pattern-not-allowed=match pattern not allowed\n+error.match.pattern.not.allowed=match pattern not allowed\n+error.at.least.one.match.clause.required=error at least one match clause required", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8cb805acc4718f98bfc2b5318c84462d4e280a3d"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE2MTY0MQ==", "bodyText": "shouldn't be returning here", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26203#discussion_r500161641", "createdAt": "2020-10-06T10:14:23Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerina/compiler/internal/parser/BallerinaParser.java", "diffHunk": "@@ -11802,7 +11802,19 @@ private STNode parseMatchStatement() {\n         STNode actionOrExpr = parseActionOrExpression();\n         startContext(ParserRuleContext.MATCH_BODY);\n         STNode openBrace = parseOpenBrace();\n-        STNode matchClauses = parseMatchClauses();\n+        // Parse match clauses list\n+        List<STNode> matchClausesList = new ArrayList<>();\n+        while (!isEndOfMatchClauses(peek().kind)) {\n+            STNode clause = parseMatchClause();\n+            matchClausesList.add(clause);\n+        }\n+        STNode matchClauses =  STNodeFactory.createNodeList(matchClausesList);\n+        // At least one match clause required\n+        if (isNodeListEmpty(matchClauses)) {\n+            return SyntaxErrors.addDiagnostic(openBrace,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8cb805acc4718f98bfc2b5318c84462d4e280a3d"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe98ce39b5a827326618e1a8c6dbde180ae0a0b5", "author": {"user": {"login": "rdulmina", "name": "Dulmina Renuke"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/fe98ce39b5a827326618e1a8c6dbde180ae0a0b5", "committedDate": "2020-10-06T10:27:46Z", "message": "Reword error msg\nReword error msg for zero match clause and remove incorrect return."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyODIwMDk0", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26203#pullrequestreview-502820094", "createdAt": "2020-10-06T11:00:25Z", "commit": {"oid": "fe98ce39b5a827326618e1a8c6dbde180ae0a0b5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4532, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}