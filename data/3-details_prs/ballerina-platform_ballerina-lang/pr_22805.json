{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2NDY1Nzc2", "number": 22805, "title": "Add worker-decl, annotation-decl and XML-namespace-decl parsing support", "bodyText": "Purpose\nThis PR adds the following:\n\nAnnotation declaration parsing\nModule level XML namespace parsing\nNamed worker declaration parsing, and fix the function body structure.\nBasic parsing support for documentation (ballerina flavoured markdown validation is not supported yet)\n\nFixes #22029\nFixes #22747\nFixes #22764\nApproach\nN/A\nSamples\nN/A\nRemarks\nN/A\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-04-21T06:25:35Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22805", "merged": true, "mergeCommit": {"oid": "3d671fe15b2f324d46347894b133c3ecb9365fb3"}, "closed": true, "closedAt": "2020-04-21T20:52:48Z", "author": {"login": "SupunS"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYtFyjgH2gAyNDA2NDY1Nzc2OmQxNTllOTY0ZTA0YjdjMGNkYjUyZWQ5ZTgwODc1ZmUzYTExYjA5MzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZ0vviAH2gAyNDA2NDY1Nzc2OjUxZGY0Y2JhZTY4OTJhYWFiMjgwNzEyYTc3OTNjYzMzM2Y2OTUxYTA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d159e964e04b7c0cdb52ed9e80875fe3a11b0935", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d159e964e04b7c0cdb52ed9e80875fe3a11b0935", "committedDate": "2020-04-18T03:12:19Z", "message": "Clean up end of statements logic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a2d3941c4709e84c5d0b6186f27afedc72369a1", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3a2d3941c4709e84c5d0b6186f27afedc72369a1", "committedDate": "2020-04-18T05:46:06Z", "message": "Cleanup record field parsing and recovery"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd1fecbd8c93b572a635b125e5077b1a85b127aa", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bd1fecbd8c93b572a635b125e5077b1a85b127aa", "committedDate": "2020-04-18T05:48:38Z", "message": "Merge branch 'incremental-parser' of https://github.com/ballerina-platform/ballerina-lang into module-level-decl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9911a7b7cd2b0b2fbf0ac1cd69eb79d9be88b05d", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9911a7b7cd2b0b2fbf0ac1cd69eb79d9be88b05d", "committedDate": "2020-04-19T06:15:17Z", "message": "Annotation decl parsing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6620be90299bd04ee89fb6f20f1bfcfec5e4a74d", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/6620be90299bd04ee89fb6f20f1bfcfec5e4a74d", "committedDate": "2020-04-19T06:15:32Z", "message": "Merge branch 'incremental-parser' of https://github.com/ballerina-platform/ballerina-lang into module-level-decl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aab8e92993f3aec20578ea358b00f037e1b0df81", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/aab8e92993f3aec20578ea358b00f037e1b0df81", "committedDate": "2020-04-19T08:52:47Z", "message": "Add XML namespace declaration parsing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b68cfb212161405430548a1f2b147925d06549d2", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b68cfb212161405430548a1f2b147925d06549d2", "committedDate": "2020-04-19T12:54:04Z", "message": "Improve doc comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b65d5efe6178f4e1978543395107ad6656dd896", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2b65d5efe6178f4e1978543395107ad6656dd896", "committedDate": "2020-04-20T06:07:52Z", "message": "Add wroker decl basic parsing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0a0db336bf49f536b1cf3f507ff838582960b0d", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f0a0db336bf49f536b1cf3f507ff838582960b0d", "committedDate": "2020-04-20T08:25:26Z", "message": "Add worker-decl parsing tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0bb00cb51e90f107de380c05a4f1f8611e4e4dfa", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0bb00cb51e90f107de380c05a4f1f8611e4e4dfa", "committedDate": "2020-04-20T09:39:07Z", "message": "Merge branch 'incremental-parser' of https://github.com/ballerina-platform/ballerina-lang into module-level-decl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "59936612db4c8b5e6326798df17580804b24cbe4", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/59936612db4c8b5e6326798df17580804b24cbe4", "committedDate": "2020-04-20T13:26:09Z", "message": "Add documentation string basic parsing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b972b9577bbb0c7b141bfa669392e031f13ec142", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b972b9577bbb0c7b141bfa669392e031f13ec142", "committedDate": "2020-04-21T02:55:33Z", "message": "Merge branch 'incremental-parser' of https://github.com/ballerina-platform/ballerina-lang into module-level-decl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b5ce4d718ee62fa3eef64bc4dfd21b8234ef721", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7b5ce4d718ee62fa3eef64bc4dfd21b8234ef721", "committedDate": "2020-04-21T06:21:46Z", "message": "Add annotation declaration tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f39fc9c3abf819b37d38fc24356dec8b60c34a2", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1f39fc9c3abf819b37d38fc24356dec8b60c34a2", "committedDate": "2020-04-21T06:59:47Z", "message": "Add test cases and clean up code"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "891b60a66a4af66e0554d7fc1b8638fddb554add", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/891b60a66a4af66e0554d7fc1b8638fddb554add", "committedDate": "2020-04-21T06:56:56Z", "message": "Add test cases and clean up code"}, "afterCommit": {"oid": "1f39fc9c3abf819b37d38fc24356dec8b60c34a2", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1f39fc9c3abf819b37d38fc24356dec8b60c34a2", "committedDate": "2020-04-21T06:59:47Z", "message": "Add test cases and clean up code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3MDU1MjMw", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22805#pullrequestreview-397055230", "createdAt": "2020-04-21T07:24:48Z", "commit": {"oid": "1f39fc9c3abf819b37d38fc24356dec8b60c34a2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwNzoyNDo0OVrOGI2qqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwNzoyNDo0OVrOGI2qqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTkzNzQ1MQ==", "bodyText": "Is this an optional filed?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22805#discussion_r411937451", "createdAt": "2020-04-21T07:24:49Z", "author": {"login": "sameerajayasoma"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/syntax/tree/NodeFactory.java", "diffHunk": "@@ -1155,5 +1155,132 @@ public static NilLiteralNode createNilLiteralNode(\n                 closeParenToken.internalNode());\n         return stNilLiteralNode.createUnlinkedFacade();\n     }\n+\n+    public static AnnotationDeclarationNode createAnnotationDeclarationNode(\n+            MetadataNode metadata,\n+            Token visibilityQualifier,\n+            Token constKeyword,\n+            Token annotationKeyword,\n+            Node typeDescriptor,\n+            Token annotationTag,\n+            Token onKeyword,\n+            SeparatedNodeList<Node> attachPoints,\n+            Token semicolonToken) {\n+        Objects.requireNonNull(metadata, \"metadata must not be null\");\n+        Objects.requireNonNull(visibilityQualifier, \"visibilityQualifier must not be null\");\n+        Objects.requireNonNull(constKeyword, \"constKeyword must not be null\");\n+        Objects.requireNonNull(annotationKeyword, \"annotationKeyword must not be null\");\n+        Objects.requireNonNull(typeDescriptor, \"typeDescriptor must not be null\");\n+        Objects.requireNonNull(annotationTag, \"annotationTag must not be null\");\n+        Objects.requireNonNull(onKeyword, \"onKeyword must not be null\");\n+        Objects.requireNonNull(attachPoints, \"attachPoints must not be null\");\n+        Objects.requireNonNull(semicolonToken, \"semicolonToken must not be null\");\n+\n+        STNode stAnnotationDeclarationNode = STNodeFactory.createAnnotationDeclarationNode(\n+                metadata.internalNode(),\n+                visibilityQualifier.internalNode(),\n+                constKeyword.internalNode(),\n+                annotationKeyword.internalNode(),\n+                typeDescriptor.internalNode(),\n+                annotationTag.internalNode(),\n+                onKeyword.internalNode(),\n+                attachPoints.underlyingListNode().internalNode(),\n+                semicolonToken.internalNode());\n+        return stAnnotationDeclarationNode.createUnlinkedFacade();\n+    }\n+\n+    public static AnnotationAttachPointNode createAnnotationAttachPointNode(\n+            Token sourceKeyword,\n+            Token firstIdent,\n+            Token secondIdent) {\n+        Objects.requireNonNull(sourceKeyword, \"sourceKeyword must not be null\");\n+        Objects.requireNonNull(firstIdent, \"firstIdent must not be null\");\n+        Objects.requireNonNull(secondIdent, \"secondIdent must not be null\");\n+\n+        STNode stAnnotationAttachPointNode = STNodeFactory.createAnnotationAttachPointNode(\n+                sourceKeyword.internalNode(),\n+                firstIdent.internalNode(),\n+                secondIdent.internalNode());\n+        return stAnnotationAttachPointNode.createUnlinkedFacade();\n+    }\n+\n+    public static XMLNamespaceDeclarationNode createXMLNamespaceDeclarationNode(\n+            Token xmlnsKeyword,\n+            ExpressionNode namespaceuri,\n+            Token asKeyword,\n+            IdentifierToken namespacePrefix,\n+            Token semicolonToken) {\n+        Objects.requireNonNull(xmlnsKeyword, \"xmlnsKeyword must not be null\");\n+        Objects.requireNonNull(namespaceuri, \"namespaceuri must not be null\");\n+        Objects.requireNonNull(asKeyword, \"asKeyword must not be null\");\n+        Objects.requireNonNull(namespacePrefix, \"namespacePrefix must not be null\");\n+        Objects.requireNonNull(semicolonToken, \"semicolonToken must not be null\");\n+\n+        STNode stXMLNamespaceDeclarationNode = STNodeFactory.createXMLNamespaceDeclarationNode(\n+                xmlnsKeyword.internalNode(),\n+                namespaceuri.internalNode(),\n+                asKeyword.internalNode(),\n+                namespacePrefix.internalNode(),\n+                semicolonToken.internalNode());\n+        return stXMLNamespaceDeclarationNode.createUnlinkedFacade();\n+    }\n+\n+    public static FunctionBodyBlockNode createFunctionBodyBlockNode(\n+            Token openBraceToken,\n+            NamedWorkerDeclarator namedWorkerDeclarator,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f39fc9c3abf819b37d38fc24356dec8b60c34a2"}, "originalPosition": 112}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51df4cbae6892aaab280712a7793cc333f6951a0", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/51df4cbae6892aaab280712a7793cc333f6951a0", "committedDate": "2020-04-21T14:41:24Z", "message": "Merge branch 'incremental-parser' of https://github.com/ballerina-platform/ballerina-lang into module-level-decl"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3596, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}