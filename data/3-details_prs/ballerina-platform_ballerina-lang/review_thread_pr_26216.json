{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4MDYyNTI4", "number": 26216, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxMDozMjowNFrOEqqlUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxMDo0NzozOVrOEqq5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzMTczMzMxOnYy", "diffSide": "RIGHT", "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/parser/BLangNodeTransformer.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxMDozMjowNFrOHdABKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxMTowODoyMlrOHdBLtQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE3MTA0OQ==", "bodyText": "Won't this result in some incorrect line-numbers for service declarations?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26216#discussion_r500171049", "createdAt": "2020-10-06T10:32:04Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/parser/BLangNodeTransformer.java", "diffHunk": "@@ -1095,7 +1095,7 @@ private BLangNode createService(Node serviceNode, IdentifierToken serviceNameNod\n         // 1) Define type nodeDefinition for service type.\n         BLangClassDefinition classDef = (BLangClassDefinition) TreeBuilder.createClassDefNode();\n         BLangIdentifier serviceTypeID = createIdentifier(identifierPos, serviceTypeName);\n-        serviceTypeID.pos = pos;\n+        serviceTypeID.pos = symTable.builtinPos;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48a5e10bf282e039edf2b6407d2ae9b79e2b32a9"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE5MDEzMw==", "bodyText": "Hmm.. Good point. Will check this and see. It looks like we are not skipping class defs generated for services. Will have to filter these in another way if that's the case.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26216#discussion_r500190133", "createdAt": "2020-10-06T11:08:22Z", "author": {"login": "pubudu91"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/parser/BLangNodeTransformer.java", "diffHunk": "@@ -1095,7 +1095,7 @@ private BLangNode createService(Node serviceNode, IdentifierToken serviceNameNod\n         // 1) Define type nodeDefinition for service type.\n         BLangClassDefinition classDef = (BLangClassDefinition) TreeBuilder.createClassDefNode();\n         BLangIdentifier serviceTypeID = createIdentifier(identifierPos, serviceTypeName);\n-        serviceTypeID.pos = pos;\n+        serviceTypeID.pos = symTable.builtinPos;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE3MTA0OQ=="}, "originalCommit": {"oid": "48a5e10bf282e039edf2b6407d2ae9b79e2b32a9"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzMTczNjYwOnYy", "diffSide": "RIGHT", "path": "compiler/ballerina-compiler-api/src/main/java/io/ballerina/compiler/api/symbols/FunctionSymbol.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxMDozMzowNlrOHdADPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxMTowNjo0NVrOHdBIow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE3MTU4Mg==", "bodyText": "Should this be sentence-case?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26216#discussion_r500171582", "createdAt": "2020-10-06T10:33:06Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-compiler-api/src/main/java/io/ballerina/compiler/api/symbols/FunctionSymbol.java", "diffHunk": "@@ -19,27 +19,26 @@\n \n import io.ballerina.compiler.api.types.BallerinaTypeDescriptor;\n \n-import java.util.List;\n import java.util.Optional;\n \n /**\n  * Represent Function Symbol.\n  *\n  * @since 2.0.0\n  */\n-public interface FunctionSymbol extends Symbol {\n+public interface FunctionSymbol extends Symbol, Qualifiable, Deprecatable {\n \n     /**\n-     * Get the list of qualifiers.\n+     * Get the Function Type Descriptor.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48a5e10bf282e039edf2b6407d2ae9b79e2b32a9"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE4OTM0Nw==", "bodyText": "Yeah, should be. Will change.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26216#discussion_r500189347", "createdAt": "2020-10-06T11:06:45Z", "author": {"login": "pubudu91"}, "path": "compiler/ballerina-compiler-api/src/main/java/io/ballerina/compiler/api/symbols/FunctionSymbol.java", "diffHunk": "@@ -19,27 +19,26 @@\n \n import io.ballerina.compiler.api.types.BallerinaTypeDescriptor;\n \n-import java.util.List;\n import java.util.Optional;\n \n /**\n  * Represent Function Symbol.\n  *\n  * @since 2.0.0\n  */\n-public interface FunctionSymbol extends Symbol {\n+public interface FunctionSymbol extends Symbol, Qualifiable, Deprecatable {\n \n     /**\n-     * Get the list of qualifiers.\n+     * Get the Function Type Descriptor.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE3MTU4Mg=="}, "originalCommit": {"oid": "48a5e10bf282e039edf2b6407d2ae9b79e2b32a9"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzMTc0MzM5OnYy", "diffSide": "RIGHT", "path": "compiler/ballerina-compiler-api/src/main/java/io/ballerina/compiler/api/symbols/FunctionSymbol.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxMDozNTowOFrOHdAHVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QwMjo0NzoxN1rOHdgsXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE3MjYyOA==", "bodyText": "Can the type-desc be null?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26216#discussion_r500172628", "createdAt": "2020-10-06T10:35:08Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-compiler-api/src/main/java/io/ballerina/compiler/api/symbols/FunctionSymbol.java", "diffHunk": "@@ -19,27 +19,26 @@\n \n import io.ballerina.compiler.api.types.BallerinaTypeDescriptor;\n \n-import java.util.List;\n import java.util.Optional;\n \n /**\n  * Represent Function Symbol.\n  *\n  * @since 2.0.0\n  */\n-public interface FunctionSymbol extends Symbol {\n+public interface FunctionSymbol extends Symbol, Qualifiable, Deprecatable {\n \n     /**\n-     * Get the list of qualifiers.\n+     * Get the Function Type Descriptor.\n      *\n-     * @return {@link List} of qualifiers\n+     * @return {@link BallerinaTypeDescriptor}\n      */\n-    List<Qualifier> qualifiers();\n+    Optional<BallerinaTypeDescriptor> typeDescriptor();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48a5e10bf282e039edf2b6407d2ae9b79e2b32a9"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE5MTE3Mw==", "bodyText": "Hmm. Can't think of a reason why it'd be. Will check with Nadeeshaan and see. All the typeDescriptor() methods seem to return Optional values.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26216#discussion_r500191173", "createdAt": "2020-10-06T11:10:18Z", "author": {"login": "pubudu91"}, "path": "compiler/ballerina-compiler-api/src/main/java/io/ballerina/compiler/api/symbols/FunctionSymbol.java", "diffHunk": "@@ -19,27 +19,26 @@\n \n import io.ballerina.compiler.api.types.BallerinaTypeDescriptor;\n \n-import java.util.List;\n import java.util.Optional;\n \n /**\n  * Represent Function Symbol.\n  *\n  * @since 2.0.0\n  */\n-public interface FunctionSymbol extends Symbol {\n+public interface FunctionSymbol extends Symbol, Qualifiable, Deprecatable {\n \n     /**\n-     * Get the list of qualifiers.\n+     * Get the Function Type Descriptor.\n      *\n-     * @return {@link List} of qualifiers\n+     * @return {@link BallerinaTypeDescriptor}\n      */\n-    List<Qualifier> qualifiers();\n+    Optional<BallerinaTypeDescriptor> typeDescriptor();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE3MjYyOA=="}, "originalCommit": {"oid": "48a5e10bf282e039edf2b6407d2ae9b79e2b32a9"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDcwNjM5Ng==", "bodyText": "This was because the earlier BOperatorSymbols were converted into the InvokableSymbols and the type became null during the conversion, I think we can remove the optional here", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26216#discussion_r500706396", "createdAt": "2020-10-07T02:47:17Z", "author": {"login": "nadeeshaan"}, "path": "compiler/ballerina-compiler-api/src/main/java/io/ballerina/compiler/api/symbols/FunctionSymbol.java", "diffHunk": "@@ -19,27 +19,26 @@\n \n import io.ballerina.compiler.api.types.BallerinaTypeDescriptor;\n \n-import java.util.List;\n import java.util.Optional;\n \n /**\n  * Represent Function Symbol.\n  *\n  * @since 2.0.0\n  */\n-public interface FunctionSymbol extends Symbol {\n+public interface FunctionSymbol extends Symbol, Qualifiable, Deprecatable {\n \n     /**\n-     * Get the list of qualifiers.\n+     * Get the Function Type Descriptor.\n      *\n-     * @return {@link List} of qualifiers\n+     * @return {@link BallerinaTypeDescriptor}\n      */\n-    List<Qualifier> qualifiers();\n+    Optional<BallerinaTypeDescriptor> typeDescriptor();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE3MjYyOA=="}, "originalCommit": {"oid": "48a5e10bf282e039edf2b6407d2ae9b79e2b32a9"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzMTc4NDIzOnYy", "diffSide": "RIGHT", "path": "compiler/ballerina-compiler-api/src/main/java/io/ballerina/compiler/api/symbols/Qualifiable.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxMDo0NzozOVrOHdAgWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwOToyNTo1MVrOHfCKeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE3OTAzNQ==", "bodyText": "IIUC only the worker-symbol (may be not?) and xmlns-symbol doesn't have any qualifiers?\nSo can we move this method to the Symbol interface, and return an empty list for whoever doesn't have any qualifiers?\nThat would simplify the class hierarchy.. and can move this qualifiers in to the abstract BallerinaSymbol class as well in the implementation", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26216#discussion_r500179035", "createdAt": "2020-10-06T10:47:39Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-compiler-api/src/main/java/io/ballerina/compiler/api/symbols/Qualifiable.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.ballerina.compiler.api.symbols;\n+\n+import java.util.Set;\n+\n+/**\n+ * An interface for symbols for which qualifiers apply.\n+ *\n+ * @since 2.0.0\n+ */\n+public interface Qualifiable {\n+\n+    /**\n+     * Gets the set of qualifiers the user has applied to a symbol.\n+     *\n+     * @return The set of qualifiers applied to the symbol\n+     */\n+    Set<Qualifier> qualifiers();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48a5e10bf282e039edf2b6407d2ae9b79e2b32a9"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE5NDEwOQ==", "bodyText": "And module and service symbols as well though.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26216#discussion_r500194109", "createdAt": "2020-10-06T11:15:35Z", "author": {"login": "pubudu91"}, "path": "compiler/ballerina-compiler-api/src/main/java/io/ballerina/compiler/api/symbols/Qualifiable.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.ballerina.compiler.api.symbols;\n+\n+import java.util.Set;\n+\n+/**\n+ * An interface for symbols for which qualifiers apply.\n+ *\n+ * @since 2.0.0\n+ */\n+public interface Qualifiable {\n+\n+    /**\n+     * Gets the set of qualifiers the user has applied to a symbol.\n+     *\n+     * @return The set of qualifiers applied to the symbol\n+     */\n+    Set<Qualifier> qualifiers();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE3OTAzNQ=="}, "originalCommit": {"oid": "48a5e10bf282e039edf2b6407d2ae9b79e2b32a9"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDcwNzY5MQ==", "bodyText": "If the qualifiers are not allowed, shouldn't we avoid exposing the API as well?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26216#discussion_r500707691", "createdAt": "2020-10-07T02:52:23Z", "author": {"login": "nadeeshaan"}, "path": "compiler/ballerina-compiler-api/src/main/java/io/ballerina/compiler/api/symbols/Qualifiable.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.ballerina.compiler.api.symbols;\n+\n+import java.util.Set;\n+\n+/**\n+ * An interface for symbols for which qualifiers apply.\n+ *\n+ * @since 2.0.0\n+ */\n+public interface Qualifiable {\n+\n+    /**\n+     * Gets the set of qualifiers the user has applied to a symbol.\n+     *\n+     * @return The set of qualifiers applied to the symbol\n+     */\n+    Set<Qualifier> qualifiers();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE3OTAzNQ=="}, "originalCommit": {"oid": "48a5e10bf282e039edf2b6407d2ae9b79e2b32a9"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjMwMzM1Mw==", "bodyText": "Yeah, that was my thought as well. Hence this approach", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26216#discussion_r502303353", "createdAt": "2020-10-09T09:25:51Z", "author": {"login": "pubudu91"}, "path": "compiler/ballerina-compiler-api/src/main/java/io/ballerina/compiler/api/symbols/Qualifiable.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.ballerina.compiler.api.symbols;\n+\n+import java.util.Set;\n+\n+/**\n+ * An interface for symbols for which qualifiers apply.\n+ *\n+ * @since 2.0.0\n+ */\n+public interface Qualifiable {\n+\n+    /**\n+     * Gets the set of qualifiers the user has applied to a symbol.\n+     *\n+     * @return The set of qualifiers applied to the symbol\n+     */\n+    Set<Qualifier> qualifiers();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE3OTAzNQ=="}, "originalCommit": {"oid": "48a5e10bf282e039edf2b6407d2ae9b79e2b32a9"}, "originalPosition": 34}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4886, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}