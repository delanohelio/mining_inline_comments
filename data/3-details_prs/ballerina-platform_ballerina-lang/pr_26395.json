{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA1MjUxOTk3", "number": 26395, "title": "Enable language and runtime tests which disable with JDK 11 migration", "bodyText": "Purpose\n\nSubject.\n\nFixes #26082\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-10-17T09:31:59Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26395", "merged": true, "mergeCommit": {"oid": "ce9ab7cfeedb1606b6a2e68c6a2771a568c77572"}, "closed": true, "closedAt": "2020-10-29T16:35:25Z", "author": {"login": "chiranSachintha"}, "timelineItems": {"totalCount": 23, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdTYKJWABqjM4ODkwNzQwOTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXU2nbgFqTUxOTg1OTc1MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "170aaf92d9cb3b240c65167f6e1448342b986e68", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/170aaf92d9cb3b240c65167f6e1448342b986e68", "committedDate": "2020-10-17T09:26:54Z", "message": "Enable language and runtime tests which disable with JDK 11 migration"}, "afterCommit": {"oid": "e9b4534a61bdd906132bba0b84d6945d8019e7d9", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e9b4534a61bdd906132bba0b84d6945d8019e7d9", "committedDate": "2020-10-17T10:09:50Z", "message": "Enable language and runtime tests which disable with JDK 11 migration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "048b0c39717c08d9f91e3e6a048a2d007de07f92", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/048b0c39717c08d9f91e3e6a048a2d007de07f92", "committedDate": "2020-10-17T19:13:08Z", "message": "Enable language and runtime tests which disable with JDK 11 migration"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e9b4534a61bdd906132bba0b84d6945d8019e7d9", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e9b4534a61bdd906132bba0b84d6945d8019e7d9", "committedDate": "2020-10-17T10:09:50Z", "message": "Enable language and runtime tests which disable with JDK 11 migration"}, "afterCommit": {"oid": "048b0c39717c08d9f91e3e6a048a2d007de07f92", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/048b0c39717c08d9f91e3e6a048a2d007de07f92", "committedDate": "2020-10-17T19:13:08Z", "message": "Enable language and runtime tests which disable with JDK 11 migration"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExNDYwNDg2", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26395#pullrequestreview-511460486", "createdAt": "2020-10-19T07:01:06Z", "commit": {"oid": "048b0c39717c08d9f91e3e6a048a2d007de07f92"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQwNzowMTowN1rOHkAQ1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQwNzowNDozOFrOHkAWfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzUxNTA5Mg==", "bodyText": "This way we're creating two maps, first the mutable one and then the immutable one.\nInstead, shall we use https://github.com/ballerina-platform/ballerina-lang/blob/master/bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/values/MapValueImpl.java#L101?\nWe can use https://github.com/ballerina-platform/ballerina-lang/blob/master/bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/values/ReadOnlyUtils.java#L72 to get the immutable type and then pass the detail as a KeyValueEntry https://github.com/ballerina-platform/ballerina-lang/blob/master/bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/values/MappingInitialValueEntry.java#L39.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26395#discussion_r507515092", "createdAt": "2020-10-19T07:01:07Z", "author": {"login": "MaryamZi"}, "path": "bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/api/BErrorCreator.java", "diffHunk": "@@ -60,7 +62,12 @@ public static BError createError(BString message, BString details) {\n         if (details != null) {\n             detailMap.put(ERROR_MESSAGE_FIELD, details);\n         }\n-        return new ErrorValue(message, detailMap);\n+        return new ErrorValue(message, readonlyCloneDetailMap(detailMap));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "048b0c39717c08d9f91e3e6a048a2d007de07f92"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzUxNjU0MA==", "bodyText": "The other helper methods here should also be updated, right? They don't seem to be making the error detail immutable?\nIMO, we should also check on the possibility of making org.ballerinalang.jvm.types.BTypes#typeErrorDetail itself be immutable (i.e., setting the readonly flag). @rdhananjaya, WDYT?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26395#discussion_r507516540", "createdAt": "2020-10-19T07:04:38Z", "author": {"login": "MaryamZi"}, "path": "bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/api/BErrorCreator.java", "diffHunk": "@@ -60,7 +62,12 @@ public static BError createError(BString message, BString details) {\n         if (details != null) {\n             detailMap.put(ERROR_MESSAGE_FIELD, details);\n         }\n-        return new ErrorValue(message, detailMap);\n+        return new ErrorValue(message, readonlyCloneDetailMap(detailMap));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzUxNTA5Mg=="}, "originalCommit": {"oid": "048b0c39717c08d9f91e3e6a048a2d007de07f92"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f25baac5042bdd050954de0cb2bdf3d1b830ff7", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2f25baac5042bdd050954de0cb2bdf3d1b830ff7", "committedDate": "2020-10-20T04:16:56Z", "message": "Fix review suggestions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b6a51db1216138afe29668674471af5b8d2bf20", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4b6a51db1216138afe29668674471af5b8d2bf20", "committedDate": "2020-10-20T04:37:25Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into issue-26082\n\n\u0001 Conflicts:\n\u0001\tbvm/ballerina-runtime/src/main/java/io/ballerina/runtime/api/ErrorCreator.java\n\u0001\tbvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/types/BTypes.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a4de85b01edefc66ac1057b0a7d3cd16325bc43", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7a4de85b01edefc66ac1057b0a7d3cd16325bc43", "committedDate": "2020-10-20T04:44:24Z", "message": "Resolve conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3d8284aa3a891d04c52f4aa1d98d34c219f110a", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b3d8284aa3a891d04c52f4aa1d98d34c219f110a", "committedDate": "2020-10-21T08:12:24Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into issue-26082\n\n\u0001 Conflicts:\n\u0001\ttests/jballerina-unit-test/src/test/resources/testng.xml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92f88f1cd2d3495418fd13aa11902941b225ada1", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/92f88f1cd2d3495418fd13aa11902941b225ada1", "committedDate": "2020-10-21T17:01:16Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into issue-26082"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "361a3e8cafcda2e81e201e6543f5d00fcf615539", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/361a3e8cafcda2e81e201e6543f5d00fcf615539", "committedDate": "2020-10-23T04:56:51Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into issue-26082"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ea87909cedf22d2b5d75e7e5dd3b79de83ffb68", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4ea87909cedf22d2b5d75e7e5dd3b79de83ffb68", "committedDate": "2020-10-23T08:08:38Z", "message": "Set `TYPE_ERROR_DETAIL` as mutable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "245946ee69d6ed964d293e3381cc604b0d7d854e", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/245946ee69d6ed964d293e3381cc604b0d7d854e", "committedDate": "2020-10-23T15:11:31Z", "message": "Enable `BirVariableOptimizationTest` and `LangLibValueTest` tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da5722bdafb5179a12ca9ab5e90add24ae588176", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/da5722bdafb5179a12ca9ab5e90add24ae588176", "committedDate": "2020-10-23T15:12:23Z", "message": "Resolve conflicts"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bff8fa3da66f1528cf7ac56a959d03ca5bd22984", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bff8fa3da66f1528cf7ac56a959d03ca5bd22984", "committedDate": "2020-10-23T08:08:38Z", "message": "Resolve conflicts"}, "afterCommit": {"oid": "da5722bdafb5179a12ca9ab5e90add24ae588176", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/da5722bdafb5179a12ca9ab5e90add24ae588176", "committedDate": "2020-10-23T15:12:23Z", "message": "Resolve conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "39beae4f34af27691182a54c8510173e3d40c7d6", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/39beae4f34af27691182a54c8510173e3d40c7d6", "committedDate": "2020-10-26T19:32:55Z", "message": "Enable `JavaVarargsTest` and `RefTypeTests` tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a360e2fb5fd4c384921dbfdc014a37cf68558261", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a360e2fb5fd4c384921dbfdc014a37cf68558261", "committedDate": "2020-10-27T15:23:54Z", "message": "Set `TYPE_ERROR_DETAIL` as immutable"}, "afterCommit": {"oid": "d3ec03efdcbd2542705b8309c6140871128fa567", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d3ec03efdcbd2542705b8309c6140871128fa567", "committedDate": "2020-10-27T17:00:42Z", "message": "Enable `VariableReturnTypeTest` and `FinalAccessTest` tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48ecf0f05527d6b39a1a45541b45439e96a2d2bf", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/48ecf0f05527d6b39a1a45541b45439e96a2d2bf", "committedDate": "2020-10-27T17:04:10Z", "message": "Enable `VariableReturnTypeTest` and `FunctionSignatureInBaloTest` tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d3ec03efdcbd2542705b8309c6140871128fa567", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d3ec03efdcbd2542705b8309c6140871128fa567", "committedDate": "2020-10-27T17:00:42Z", "message": "Enable `VariableReturnTypeTest` and `FinalAccessTest` tests"}, "afterCommit": {"oid": "48ecf0f05527d6b39a1a45541b45439e96a2d2bf", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/48ecf0f05527d6b39a1a45541b45439e96a2d2bf", "committedDate": "2020-10-27T17:04:10Z", "message": "Enable `VariableReturnTypeTest` and `FunctionSignatureInBaloTest` tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72ec22d3487b386b85856f6a11134726d7714555", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/72ec22d3487b386b85856f6a11134726d7714555", "committedDate": "2020-10-29T13:44:02Z", "message": "Enable `ObjectInBaloTest` tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cc198ae11d2f0de80f4a6e0cd95009fd74d98eb3", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/cc198ae11d2f0de80f4a6e0cd95009fd74d98eb3", "committedDate": "2020-10-29T10:26:24Z", "message": "Fix review suggestions"}, "afterCommit": {"oid": "a50358d17a7f107772da4b322c12e4501157062f", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a50358d17a7f107772da4b322c12e4501157062f", "committedDate": "2020-10-29T13:44:47Z", "message": "Fix review suggestions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fafd350c73843ea02410a1888ed8aef12f9edeb6", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/fafd350c73843ea02410a1888ed8aef12f9edeb6", "committedDate": "2020-10-29T15:15:48Z", "message": "Fix review suggestions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a50358d17a7f107772da4b322c12e4501157062f", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a50358d17a7f107772da4b322c12e4501157062f", "committedDate": "2020-10-29T13:44:47Z", "message": "Fix review suggestions"}, "afterCommit": {"oid": "fafd350c73843ea02410a1888ed8aef12f9edeb6", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/fafd350c73843ea02410a1888ed8aef12f9edeb6", "committedDate": "2020-10-29T15:15:48Z", "message": "Fix review suggestions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5ODU5NzUw", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26395#pullrequestreview-519859750", "createdAt": "2020-10-29T16:35:15Z", "commit": {"oid": "fafd350c73843ea02410a1888ed8aef12f9edeb6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4406, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}