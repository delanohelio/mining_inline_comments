{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc3Njg2MDc3", "number": 25561, "title": "Update BIR spec with types related information and tests", "bodyText": "Purpose\nThis PR completes the BIR spec with types information.\nAlso this has test cases added to cover basic-blocks and instructions.\nFixes #25531\nApproach\n\nDescribe how you are implementing the solutions along with the design details.\n\nSamples\n\nProvide high-level details about the samples related to this feature.\n\nRemarks\n\nList any other known issues, related PRs, TODO items, or any other notes related to the PR.\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-09-02T09:17:25Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25561", "merged": true, "mergeCommit": {"oid": "9ccc6972f30e6b26058c4d1493d8f4fb83ace73a"}, "closed": true, "closedAt": "2020-09-04T05:32:20Z", "author": {"login": "Kishanthan"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdE4SS8AH2gAyNDc3Njg2MDc3OmMyZTJmYTQyNDQzMTJkMTE5ZmIwNjgxYWRjZTA4MDQ4M2ZlZjczMzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdFO-rFgBqjM3MjQyNjAwNzc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c2e2fa4244312d119fb0681adce080483fef7339", "author": {"user": {"login": "Kishanthan", "name": "Kishanthan Thangarajah"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c2e2fa4244312d119fb0681adce080483fef7339", "committedDate": "2020-09-02T09:07:36Z", "message": "Update BIR spec with types related infomation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e72188900e285750d12eb0cdafb727a5fbebcceb", "author": {"user": {"login": "Kishanthan", "name": "Kishanthan Thangarajah"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e72188900e285750d12eb0cdafb727a5fbebcceb", "committedDate": "2020-09-02T09:08:19Z", "message": "Fix a bug with null type tag value"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73a554249b2969f91e64729d9a87e75325f7fbc6", "author": {"user": {"login": "Kishanthan", "name": "Kishanthan Thangarajah"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/73a554249b2969f91e64729d9a87e75325f7fbc6", "committedDate": "2020-09-02T09:09:39Z", "message": "Fix compilation issues in typed-binding-pattern test file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f02bc50d1f3a542f7aa57f61e09c363c2233fa0e", "author": {"user": {"login": "Kishanthan", "name": "Kishanthan Thangarajah"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f02bc50d1f3a542f7aa57f61e09c363c2233fa0e", "committedDate": "2020-09-02T09:11:21Z", "message": "Add chunk length for type values to skip reading"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6a78371e4d7d6f42cbcb5771c8356241580be85", "author": {"user": {"login": "Kishanthan", "name": "Kishanthan Thangarajah"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f6a78371e4d7d6f42cbcb5771c8356241580be85", "committedDate": "2020-09-02T09:11:51Z", "message": "Read and skip bytes that are now being written"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4eb1715466695eeef1b5bd2592fd98cd5fe0d276", "author": {"user": {"login": "Kishanthan", "name": "Kishanthan Thangarajah"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4eb1715466695eeef1b5bd2592fd98cd5fe0d276", "committedDate": "2020-09-02T09:13:06Z", "message": "Add validation test using lang-lib test sources"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2bb420a8fc83ba6bdcf66667dc89930712a1ee2", "author": {"user": {"login": "Kishanthan", "name": "Kishanthan Thangarajah"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f2bb420a8fc83ba6bdcf66667dc89930712a1ee2", "committedDate": "2020-09-02T09:13:44Z", "message": "Improve test coverage with basic-blocks and instructions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1032ece5b318a07bc0b41c0a63e01a5860479631", "author": {"user": {"login": "Kishanthan", "name": "Kishanthan Thangarajah"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1032ece5b318a07bc0b41c0a63e01a5860479631", "committedDate": "2020-09-02T09:14:01Z", "message": "Add values test source"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwNjQ2Mzg0", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25561#pullrequestreview-480646384", "createdAt": "2020-09-02T09:31:37Z", "commit": {"oid": "1032ece5b318a07bc0b41c0a63e01a5860479631"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQwOTozMTozN1rOHLm8WA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQwOTozMTozN1rOHLm8WA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTkzNDQyNA==", "bodyText": "Better to break this into two methods and use  @DataProvider to link them. that way you can run one file by file if there is a failed one.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25561#discussion_r481934424", "createdAt": "2020-09-02T09:31:37Z", "author": {"login": "manuranga"}, "path": "docs/bir-spec/src/test/java/org/ballerinalang/birspec/BIRTestUtils.java", "diffHunk": "@@ -42,9 +53,44 @@\n \n     private static final String TEST_RESOURCE_ROOT = \"test-src/\";\n \n+    private static final String LANG_LIB_TEST_SRC_ROOT = \"../../langlib/langlib-test/src/test/resources/test-src\";\n+\n+    private static final Path TEST_ROOT_PATH = Paths.get(LANG_LIB_TEST_SRC_ROOT);\n+\n+    static void validateBIRSpec() throws IOException {\n+\n+        assert TEST_ROOT_PATH.toFile().exists();\n+        List<String> testSources = Files.walk(TEST_ROOT_PATH)\n+                .filter(file -> Files.isRegularFile(file))\n+                .map(file -> file.toAbsolutePath().normalize().toString())\n+                .filter(file -> file.endsWith(\".bal\") && !file.contains(\"negative\") && !file.contains(\"subtype\"))\n+                .collect(Collectors.toList());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1032ece5b318a07bc0b41c0a63e01a5860479631"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d860a805dc7535fb2d46ffdbf26f261961251e44", "author": {"user": {"login": "Kishanthan", "name": "Kishanthan Thangarajah"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d860a805dc7535fb2d46ffdbf26f261961251e44", "committedDate": "2020-09-03T03:34:32Z", "message": "Use dataprovider approch to run all the tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "efeba07703d40ec986c007b0d944b4d5ea2c3fba", "author": {"user": {"login": "Kishanthan", "name": "Kishanthan Thangarajah"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/efeba07703d40ec986c007b0d944b4d5ea2c3fba", "committedDate": "2020-09-03T03:32:31Z", "message": "Use dataprovider approch to run all the tests"}, "afterCommit": {"oid": "d860a805dc7535fb2d46ffdbf26f261961251e44", "author": {"user": {"login": "Kishanthan", "name": "Kishanthan Thangarajah"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d860a805dc7535fb2d46ffdbf26f261961251e44", "committedDate": "2020-09-03T03:34:32Z", "message": "Use dataprovider approch to run all the tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxNDg1Nzk4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25561#pullrequestreview-481485798", "createdAt": "2020-09-03T04:35:53Z", "commit": {"oid": "d860a805dc7535fb2d46ffdbf26f261961251e44"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxNTA2MzY3", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25561#pullrequestreview-481506367", "createdAt": "2020-09-03T05:40:05Z", "commit": {"oid": "d860a805dc7535fb2d46ffdbf26f261961251e44"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QwNTo0MDowNlrOHMWpCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QwNTo0MDowNlrOHMWpCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjcxNTkxMg==", "bodyText": "@Kishanthan I checked the code space and I think only you have used a blank line at the beginning of methods. I think it would be nice to follow the same practice everywhere and have no blank lines at the beginning of methods. WDYT?\nhttps://www.oracle.com/java/technologies/javase/codeconventions-whitespace.html", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25561#discussion_r482715912", "createdAt": "2020-09-03T05:40:06Z", "author": {"login": "riyafa"}, "path": "docs/bir-spec/src/test/java/org/ballerinalang/birspec/BIRTestUtils.java", "diffHunk": "@@ -21,30 +21,93 @@\n import io.kaitai.struct.KaitaiStruct;\n import org.ballerinalang.build.kaitai.Bir;\n import org.ballerinalang.model.elements.AttachPoint;\n+import org.ballerinalang.model.elements.PackageID;\n import org.ballerinalang.test.util.BCompileUtil;\n import org.ballerinalang.test.util.CompileResult;\n import org.testng.Assert;\n+import org.testng.annotations.DataProvider;\n+import org.wso2.ballerinalang.compiler.bir.model.BIRInstruction;\n import org.wso2.ballerinalang.compiler.bir.model.BIRNode;\n+import org.wso2.ballerinalang.compiler.bir.model.BIRNonTerminator;\n+import org.wso2.ballerinalang.compiler.bir.model.BIROperand;\n+import org.wso2.ballerinalang.compiler.bir.model.BIRTerminator;\n import org.wso2.ballerinalang.compiler.semantics.model.symbols.BPackageSymbol;\n import org.wso2.ballerinalang.compiler.semantics.model.types.BType;\n import org.wso2.ballerinalang.compiler.tree.BLangPackage;\n import org.wso2.ballerinalang.compiler.util.diagnotic.DiagnosticPos;\n import org.wso2.ballerinalang.programfile.CompiledBinaryFile.BIRPackageFile;\n \n+import java.io.IOException;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n import java.util.ArrayList;\n import java.util.List;\n+import java.util.Map;\n import java.util.Set;\n+import java.util.stream.Collectors;\n \n /**\n  * Utility methods to help with testing BIR model.\n  */\n class BIRTestUtils {\n \n-    private static final String TEST_RESOURCE_ROOT = \"test-src/\";\n+    private static final String TEST_RESOURCES_ROOT = \"src/test/resources/test-src\";\n+    private static final Path TEST_RESOURCES_ROOT_PATH = Paths.get(TEST_RESOURCES_ROOT);\n+\n+    private static final String LANG_LIB_TEST_SRC_ROOT = \"../../langlib/langlib-test/src/test/resources/test-src\";\n+    private static final Path LANG_LIB_TEST_ROOT_PATH = Paths.get(LANG_LIB_TEST_SRC_ROOT);\n+\n+    @DataProvider(name = \"createTestSources\")\n+    public static Object[][] createTestDataProvider() throws IOException {\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d860a805dc7535fb2d46ffdbf26f261961251e44"}, "originalPosition": 44}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be68e87da0b07dc01ae7927933fa69a3d026fa4d", "author": {"user": {"login": "Kishanthan", "name": "Kishanthan Thangarajah"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/be68e87da0b07dc01ae7927933fa69a3d026fa4d", "committedDate": "2020-09-03T11:05:58Z", "message": "Reorder top level tag type enum"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ca14b11a9b66faf23b8d7f11b3cf3baeffcd12c", "author": {"user": {"login": "Kishanthan", "name": "Kishanthan Thangarajah"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0ca14b11a9b66faf23b8d7f11b3cf3baeffcd12c", "committedDate": "2020-09-03T11:06:33Z", "message": "Update bir spec hbs with WIP text"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77fd22481de537979a347bd802a22ef6eed3ac56", "author": {"user": {"login": "Kishanthan", "name": "Kishanthan Thangarajah"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/77fd22481de537979a347bd802a22ef6eed3ac56", "committedDate": "2020-09-03T11:33:46Z", "message": "Remove extra new lines before the method body"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b109557ac3518f53a59c98132e6d4e4b73d337fc", "author": {"user": {"login": "Kishanthan", "name": "Kishanthan Thangarajah"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b109557ac3518f53a59c98132e6d4e4b73d337fc", "committedDate": "2020-09-03T11:32:01Z", "message": "Remove extra new lines before the method body"}, "afterCommit": {"oid": "77fd22481de537979a347bd802a22ef6eed3ac56", "author": {"user": {"login": "Kishanthan", "name": "Kishanthan Thangarajah"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/77fd22481de537979a347bd802a22ef6eed3ac56", "committedDate": "2020-09-03T11:33:46Z", "message": "Remove extra new lines before the method body"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4786, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}