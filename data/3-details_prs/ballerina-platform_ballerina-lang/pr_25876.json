{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg4NTU0MDQ5", "number": 25876, "title": "Replace compiler-front-end diagnostics with the new diagnostic model", "bodyText": "Purpose\n\nReplace compiler-front-end diagnostics with the new diagnostic model\n\nFixes #25332\nFixes #25419\nApproach\n\nDescribe how you are implementing the solutions along with the design details.\n\nSamples\n\nProvide high-level details about the samples related to this feature.\n\nRemarks\n\nList any other known issues, related PRs, TODO items, or any other notes related to the PR.\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-09-17T10:05:12Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25876", "merged": true, "mergeCommit": {"oid": "a751f1b7a9439bff1b6e212d0e8b711d0f88ee8f"}, "closed": true, "closedAt": "2020-09-17T16:43:50Z", "author": {"login": "dulajdilshan"}, "timelineItems": {"totalCount": 56, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdE0imHgH2gAyNDg4NTU0MDQ5Ojc3OGRmNjQ1MjA4ZmQwZDBlYzRlOTQxNWMyMWU2ZTQyNTdjYTUzZWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJzzMpAFqTQ5MDc5NDk1MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "778df645208fd0d0ec4e9415c21e6e4257ca53ec", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/778df645208fd0d0ec4e9415c21e6e4257ca53ec", "committedDate": "2020-09-02T04:45:47Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1edb301c824f546c394b5bac25dc2a0bceadb364", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1edb301c824f546c394b5bac25dc2a0bceadb364", "committedDate": "2020-09-09T08:24:16Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17791db54b7117046ed3263ccf992125353ab4d4", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/17791db54b7117046ed3263ccf992125353ab4d4", "committedDate": "2020-09-09T09:20:52Z", "message": "Implement diagnostic API"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ce3d9934d02395327af1ce44e95b067412b6e55", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3ce3d9934d02395327af1ce44e95b067412b6e55", "committedDate": "2020-09-09T10:19:11Z", "message": "Merge pull request #25684 from dulajdilshan/new-diagnostic\n\nImplement diagnostic API"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07d3483f43c7566199d37c1b71aa11fa597aa236", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/07d3483f43c7566199d37c1b71aa11fa597aa236", "committedDate": "2020-09-09T11:31:19Z", "message": "Clean up new diagnostic classes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35e46b5d2bffc53f265c114aa872c4dd22c18242", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/35e46b5d2bffc53f265c114aa872c4dd22c18242", "committedDate": "2020-09-09T11:49:33Z", "message": "Merge pull request #25691 from SupunS/diagnostic-change\n\nClean up new diagnostic classes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5735d73ee819753f153a6ff248cc4b2aa450d87f", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5735d73ee819753f153a6ff248cc4b2aa450d87f", "committedDate": "2020-09-09T13:06:25Z", "message": "Remove packageID info from diagnostics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82d312e1ab5f7149067d181d03aa4a38f2ddf660", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/82d312e1ab5f7149067d181d03aa4a38f2ddf660", "committedDate": "2020-09-09T13:07:43Z", "message": "Merge pull request #25692 from SupunS/diagnostic-change\n\nRemove packageID info from diagnostics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a761c5eda397d5de51ba6081f1471eb0f755b696", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a761c5eda397d5de51ba6081f1471eb0f755b696", "committedDate": "2020-09-11T08:57:18Z", "message": "Implement diagnostic storing and logging functionalities"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b8123c7960c96a35046051d9970e2814f586b64", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5b8123c7960c96a35046051d9970e2814f586b64", "committedDate": "2020-09-11T08:57:18Z", "message": "Update compiler with new diagnostic logger"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdd344b92f051bc781f8a74fe70d7bfdc8494632", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/fdd344b92f051bc781f8a74fe70d7bfdc8494632", "committedDate": "2020-09-11T09:34:11Z", "message": "Merge pull request #25737 from dulajdilshan/new-diagnostic\n\nNew diagnostic logger"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c1b7c5ad63a6fc662ae4f0ef00781a94472cd33", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7c1b7c5ad63a6fc662ae4f0ef00781a94472cd33", "committedDate": "2020-09-11T13:24:16Z", "message": "Remove old diagnostic dependencies from LS side"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86205c06d5392d692ecf475cc451ca944b04568c", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/86205c06d5392d692ecf475cc451ca944b04568c", "committedDate": "2020-09-11T14:06:12Z", "message": "Remove old diagnostic loggers and listeners"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4fcab91459e7b0b0eb4894d29081339661cb5100", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4fcab91459e7b0b0eb4894d29081339661cb5100", "committedDate": "2020-09-11T14:18:35Z", "message": "Remove DiagnosticCollector class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b842fbba69be73862c0a70e1da0f6d9d868e91ec", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b842fbba69be73862c0a70e1da0f6d9d868e91ec", "committedDate": "2020-09-11T14:43:59Z", "message": "Merge pull request #25747 from SupunS/diagnostic-change\n\nRemove old diagnostic related classes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e28c9679fa4915e48e1c7cc962a0743c1900731", "author": {"user": {"login": "nadeeshaan", "name": "Nadeeshaan Gunasinghe"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8e28c9679fa4915e48e1c7cc962a0743c1900731", "committedDate": "2020-09-12T03:38:27Z", "message": "fix diagnostics issues in language server for new diagnostic API"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d709409ba2acfc7b5b07da55e54a35e47cecc0a", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7d709409ba2acfc7b5b07da55e54a35e47cecc0a", "committedDate": "2020-09-12T04:02:48Z", "message": "Merge pull request #25750 from nadeeshaan/diagnostic-change-local\n\nFix diagnostics issues in language server for new diagnostic API"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd84f7f71139b82ac0bcd6bf44d092c0d730fe3a", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/dd84f7f71139b82ac0bcd6bf44d092c0d730fe3a", "committedDate": "2020-09-12T04:35:49Z", "message": "Remove severity field from BallerinaDiagnostic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db2a6d4c5e3284aa4deb3f751b610b0a5bb46ac0", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/db2a6d4c5e3284aa4deb3f751b610b0a5bb46ac0", "committedDate": "2020-09-12T04:37:32Z", "message": "Merge pull request #25751 from SupunS/diagnostic-change\n\nRemove severity field from BallerinaDiagnostic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46f9248c8f73c5b28becec911448aa9da2a78612", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/46f9248c8f73c5b28becec911448aa9da2a78612", "committedDate": "2020-09-12T04:44:38Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into diagnostic-change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "534e7a007fd7af183fb99338be7b32907cf408a0", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/534e7a007fd7af183fb99338be7b32907cf408a0", "committedDate": "2020-09-12T04:46:41Z", "message": "Merge pull request #25752 from SupunS/diagnostic-change\n\nSync with master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08aa3e97fb94ba0ab0a2e2f05b9c57ff50a34fc8", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/08aa3e97fb94ba0ab0a2e2f05b9c57ff50a34fc8", "committedDate": "2020-09-14T09:06:05Z", "message": "Remove diagnostic console print"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8ecf2fbaffc036759fbb992d0ea3ade723a8dd7", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d8ecf2fbaffc036759fbb992d0ea3ade723a8dd7", "committedDate": "2020-09-14T09:10:19Z", "message": "Remove `CompileResultDiagnosticListener` and update the `CompileResult` to get the diagnostics from the `BLangPackage`"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46c72cbd65f96d612b746b0ff5a7c20f03652992", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/46c72cbd65f96d612b746b0ff5a7c20f03652992", "committedDate": "2020-09-14T09:10:20Z", "message": "Update ballerina-test-utils/build.gradle with `ballerina-tools-api`"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aaecbd7c273ded617fbefeddf0d0933ebbd2478a", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/aaecbd7c273ded617fbefeddf0d0933ebbd2478a", "committedDate": "2020-09-14T09:10:20Z", "message": "Update tests with new diagnostic api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b68488c50760ef29db4e1100f7c17febe36a1a3", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0b68488c50760ef29db4e1100f7c17febe36a1a3", "committedDate": "2020-09-15T03:39:57Z", "message": "Remove checkstyle issues and refactor some tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02f52bfb2c89cefdf08b4107c3dde234924c4f94", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/02f52bfb2c89cefdf08b4107c3dde234924c4f94", "committedDate": "2020-09-15T05:53:02Z", "message": "Merge pull request #25755 from dulajdilshan/new-diagnostic\n\nRemove `CompileResultDiagnosticListener` and update the tests to compatible with new diagnostic api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b89b5ae859fda7e2fcd92f1b514ca43c35f8cf0e", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b89b5ae859fda7e2fcd92f1b514ca43c35f8cf0e", "committedDate": "2020-09-15T05:53:53Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into diagnostic-change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ec937d9815618b2e362f9f78fc0fa7c02887263", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7ec937d9815618b2e362f9f78fc0fa7c02887263", "committedDate": "2020-09-15T05:55:39Z", "message": "Merge pull request #25798 from SupunS/diagnostic-change\n\nSync with master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ec941cb10d1f31a7732ee185fb5b956b5fdb4e3", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3ec941cb10d1f31a7732ee185fb5b956b5fdb4e3", "committedDate": "2020-09-15T10:13:09Z", "message": "Fix data mapper test utils"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "038b74e3433d292da1fa8c8844df8f709d5ee956", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/038b74e3433d292da1fa8c8844df8f709d5ee956", "committedDate": "2020-09-16T09:26:38Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into diagnostic-change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdc94aac0b781fa72543233e49ef598a9cdba37a", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/fdc94aac0b781fa72543233e49ef598a9cdba37a", "committedDate": "2020-09-16T12:28:40Z", "message": "Cleanup syntax diagnostic reporting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d92253335147d1e4ad4fd568d5da50058b4322b", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/6d92253335147d1e4ad4fd568d5da50058b4322b", "committedDate": "2020-09-17T03:31:31Z", "message": "Add ordered-list for diagnostics to BLangPackage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e26e13c218ea1673afd9f117387b64a6ecd6a09", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4e26e13c218ea1673afd9f117387b64a6ecd6a09", "committedDate": "2020-09-17T03:31:32Z", "message": "Change diagnostic-location constructor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb0ba6c71a45d23dc7135bbd9825dc70e24c8a93", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bb0ba6c71a45d23dc7135bbd9825dc70e24c8a93", "committedDate": "2020-09-17T03:37:56Z", "message": "Improve ordering diagnostics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6bd7f022bffc52fc042f8262545957faee3d4707", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/6bd7f022bffc52fc042f8262545957faee3d4707", "committedDate": "2020-09-17T03:52:05Z", "message": "Merge pull request #25838 from dulajdilshan/new-diagnostic\n\nAdd ordered-list for diagnostics to BLangPackage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "655bb4045b712a668d84721d560593acb0938967", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/655bb4045b712a668d84721d560593acb0938967", "committedDate": "2020-09-17T04:15:47Z", "message": "Add a comparator for sorting diagnostics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bbd72a517737db0807a5f84bc4cee2b09e214abf", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bbd72a517737db0807a5f84bc4cee2b09e214abf", "committedDate": "2020-09-17T04:56:10Z", "message": "Add a comparator for sorting diagnostics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b35abc67b014a48f76b0dcbddda20068d7ae7358", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b35abc67b014a48f76b0dcbddda20068d7ae7358", "committedDate": "2020-09-17T05:08:48Z", "message": "Merge branch 'diagnostic-change' of https://github.com/ballerina-platform/ballerina-lang into diagnostic-change\n\n\u0001 Conflicts:\n\u0001\tcompiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/tree/BLangPackage.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c03b7a28f71b709ea1b0efda7fa86babbf5205a5", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c03b7a28f71b709ea1b0efda7fa86babbf5205a5", "committedDate": "2020-09-17T05:52:47Z", "message": "Fix error logging in type checker"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2fc680d574df429ca8b667a3dc287e7242aeb6f8", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2fc680d574df429ca8b667a3dc287e7242aeb6f8", "committedDate": "2020-09-17T07:13:23Z", "message": "Fix diagnostic locations for syntax errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03748ff5adae5d3f26b69ba4888eda3d20c519dc", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/03748ff5adae5d3f26b69ba4888eda3d20c519dc", "committedDate": "2020-09-17T07:29:27Z", "message": "Merge branch 'diagnostic-change' of https://github.com/ballerina-platform/ballerina-lang into diagnostic-change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "012655b057b84b1789233541025cd8318ade4662", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/012655b057b84b1789233541025cd8318ade4662", "committedDate": "2020-09-17T08:46:17Z", "message": "Fix obtaining diagnostics for unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd89cf09e6428fe9397090af071acb5ef0b1fa74", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bd89cf09e6428fe9397090af071acb5ef0b1fa74", "committedDate": "2020-09-17T08:51:24Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into diagnostic-change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79b8ed16938fa7091e6fb8833dd7c4c51e2a11de", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/79b8ed16938fa7091e6fb8833dd7c4c51e2a11de", "committedDate": "2020-09-17T09:02:35Z", "message": "Merge branch 'diagnostic-change' of https://github.com/ballerina-platform/ballerina-lang into diagnostic-change\n\n\u0001 Conflicts:\n\u0001\tcompiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/tree/BLangPackage.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03c5a417b0f1e7be5f4c2e83752d6b4507fbf12e", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/03c5a417b0f1e7be5f4c2e83752d6b4507fbf12e", "committedDate": "2020-09-17T09:21:11Z", "message": "Fix checkstyle issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34ae4b404f71b8f8d81b2cbe590f0d49cfa43a84", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/34ae4b404f71b8f8d81b2cbe590f0d49cfa43a84", "committedDate": "2020-09-17T09:32:26Z", "message": "Merge branch 'diagnostic-change' of https://github.com/ballerina-platform/ballerina-lang into diagnostic-change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5b96fbddd36be342f29b35235bb89bfa0ab5809", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b5b96fbddd36be342f29b35235bb89bfa0ab5809", "committedDate": "2020-09-17T10:09:03Z", "message": "Disable failing tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16f6a3b2a48f4fd16dd7bc270d264f487016a812", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/16f6a3b2a48f4fd16dd7bc270d264f487016a812", "committedDate": "2020-09-17T11:57:02Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into diagnostic-change"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwNTA1NDEz", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25876#pullrequestreview-490505413", "createdAt": "2020-09-17T11:43:19Z", "commit": {"oid": "b5b96fbddd36be342f29b35235bb89bfa0ab5809"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxMTo0MzoxOVrOHTeEdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxMTo0NDoyMVrOHTeGbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDE3NzY1NA==", "bodyText": "Let's rename all the BallerinaDiagnostic** classes to BLangDiagnostic**, to be consistent with the other naming patterns.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25876#discussion_r490177654", "createdAt": "2020-09-17T11:43:19Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/diagnostic/BallerinaDiagnostic.java", "diffHunk": "@@ -0,0 +1,69 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ *  in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing,\n+ *  software distributed under the License is distributed on an\n+ *  \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ *  KIND, either express or implied.  See the License for the\n+ *  specific language governing permissions and limitations\n+ *  under the License.\n+ */\n+package org.wso2.ballerinalang.compiler.diagnostic;\n+\n+import io.ballerina.tools.diagnostics.Diagnostic;\n+import io.ballerina.tools.diagnostics.DiagnosticInfo;\n+import io.ballerina.tools.diagnostics.Location;\n+\n+/**\n+ * Represent a diagnostic in the ballerina compiler front-end. A diagnostic can be a semantic\n+ * error, a warning or a info.\n+ *\n+ * @since 2.0.0\n+ */\n+public class BallerinaDiagnostic extends Diagnostic {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b5b96fbddd36be342f29b35235bb89bfa0ab5809"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDE3ODE1OA==", "bodyText": "Shall we create an issue to track this", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25876#discussion_r490178158", "createdAt": "2020-09-17T11:44:21Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/diagnostic/BallerinaDiagnosticLog.java", "diffHunk": "@@ -0,0 +1,207 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ *  in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing,\n+ *  software distributed under the License is distributed on an\n+ *  \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ *  KIND, either express or implied.  See the License for the\n+ *  specific language governing permissions and limitations\n+ *  under the License.\n+ */\n+package org.wso2.ballerinalang.compiler.diagnostic;\n+\n+import io.ballerina.tools.diagnostics.Diagnostic;\n+import io.ballerina.tools.diagnostics.DiagnosticInfo;\n+import io.ballerina.tools.diagnostics.DiagnosticSeverity;\n+import org.ballerinalang.model.elements.PackageID;\n+import org.ballerinalang.util.diagnostic.Diagnostic.DiagnosticPosition;\n+import org.ballerinalang.util.diagnostic.Diagnostic.Kind;\n+import org.ballerinalang.util.diagnostic.DiagnosticCode;\n+import org.ballerinalang.util.diagnostic.DiagnosticLog;\n+import org.wso2.ballerinalang.compiler.PackageCache;\n+import org.wso2.ballerinalang.compiler.tree.BLangPackage;\n+import org.wso2.ballerinalang.compiler.util.CompilerContext;\n+import org.wso2.ballerinalang.compiler.util.diagnotic.DiagnosticPos;\n+\n+import java.text.MessageFormat;\n+import java.util.Locale;\n+import java.util.ResourceBundle;\n+\n+/**\n+ * Logger class for logging various compiler diagnostics.\n+ * \n+ * @since 2.0.0\n+ */\n+public class BallerinaDiagnosticLog implements DiagnosticLog {\n+\n+    private static final CompilerContext.Key<BallerinaDiagnosticLog> DIAGNOSTIC_LOG_KEY = new CompilerContext.Key<>();\n+    private static final String ERROR_PREFIX = \"error\";\n+    private static final String WARNING_PREFIX = \"warning\";\n+    private static final String NOTE_PREFIX = \"note\";\n+    private static final ResourceBundle MESSAGES = ResourceBundle.getBundle(\"compiler\", Locale.getDefault());\n+\n+    private int errorCount = 0;\n+    private PackageCache packageCache;\n+    private boolean isMute = false;\n+\n+    private BallerinaDiagnosticLog(CompilerContext context) {\n+        context.put(DIAGNOSTIC_LOG_KEY, this);\n+        this.packageCache = PackageCache.getInstance(context);\n+    }\n+\n+    public static BallerinaDiagnosticLog getInstance(CompilerContext context) {\n+        BallerinaDiagnosticLog dLogger = context.get(DIAGNOSTIC_LOG_KEY);\n+        if (dLogger == null) {\n+            dLogger = new BallerinaDiagnosticLog(context);\n+        }\n+\n+        return dLogger;\n+    }\n+\n+    /**\n+     * Log an error.\n+     * \n+     * @param pos Position of the error in the source code.\n+     * @param code Error code\n+     * @param args Parameters associated with the error\n+     */\n+    public void error(DiagnosticPos pos, DiagnosticCode code, Object... args) {\n+        String msg = formatMessage(ERROR_PREFIX, code, args);\n+        reportDiagnostic(pos, msg, DiagnosticSeverity.ERROR);\n+    }\n+\n+    /**\n+     * Log a warning.\n+     * \n+     * @param pos Position of the warning in the source code.\n+     * @param code Error code\n+     * @param args Parameters associated with the error\n+     */\n+    public void warning(DiagnosticPos pos, DiagnosticCode code, Object... args) {\n+        String msg = formatMessage(WARNING_PREFIX, code, args);\n+        reportDiagnostic(pos, msg, DiagnosticSeverity.WARNING);\n+    }\n+\n+    /**\n+     * Log an info.\n+     * \n+     * @param pos Position of the info in the source code.\n+     * @param code Error code\n+     * @param args Parameters associated with the info\n+     */\n+    public void note(DiagnosticPos pos, DiagnosticCode code, Object... args) {\n+        String msg = formatMessage(NOTE_PREFIX, code, args);\n+        reportDiagnostic(pos, msg, DiagnosticSeverity.INFO);\n+    }\n+\n+    /**\n+     * Get the number of error logged in this logger.\n+     *\n+     * @return Number of errors logged.\n+     */\n+    public int errorCount() {\n+        return this.errorCount;\n+    }\n+\n+    /**\n+     * Set the error count.\n+     * \n+     * @param errorCount Error count\n+     */\n+    public void setErrorCount(int errorCount) {\n+        this.errorCount = errorCount;\n+    }\n+\n+    /**\n+     * Reset error count.\n+     */\n+    public void resetErrorCount() {\n+        this.errorCount = 0;\n+    }\n+\n+    /**\n+     * Mute the logger. This will stop reporting the diagnostic.\n+     * However it will continue to keep track of the number of errors.\n+     */\n+    public void mute() {\n+        this.isMute = true;\n+    }\n+\n+    /**\n+     * Unmute the logger. This will start reporting the diagnostic.\n+     */\n+    public void unmute() {\n+        this.isMute = false;\n+    }\n+\n+    @Override\n+    public void logDiagnostic(Kind kind, DiagnosticPosition pos, CharSequence message) {\n+        DiagnosticSeverity severity;\n+        switch (kind) {\n+            case ERROR:\n+                severity = DiagnosticSeverity.ERROR;\n+                break;\n+            case WARNING:\n+                severity = DiagnosticSeverity.WARNING;\n+                break;\n+            case NOTE:\n+            default:\n+                severity = DiagnosticSeverity.INFO;\n+                break;\n+        }\n+\n+        reportDiagnostic((DiagnosticPos) pos, message.toString(), severity);\n+    }\n+\n+    /**\n+     * Report a diagnostic for a given package.\n+     * \n+     * @param pkgId Package ID of the diagnostic associated with\n+     * @param diagnostic\n+     */\n+    public void logDiagnostic(PackageID pkgId, Diagnostic diagnostic) {\n+        if (diagnostic.diagnosticInfo().severity() == DiagnosticSeverity.ERROR) {\n+            this.errorCount++;\n+        }\n+\n+        storeDiagnosticInPackage(pkgId, diagnostic);\n+    }\n+\n+    // private helper methods\n+\n+    private String formatMessage(String prefix, DiagnosticCode code, Object[] args) {\n+        String msgKey = MESSAGES.getString(prefix + \".\" + code.getValue());\n+        return MessageFormat.format(msgKey, args);\n+    }\n+\n+    private void reportDiagnostic(DiagnosticPos pos, String msg, DiagnosticSeverity severity) {\n+        if (severity == DiagnosticSeverity.ERROR) {\n+            this.errorCount++;\n+        }\n+\n+        if (this.isMute) {\n+            return;\n+        }\n+\n+        // TODO: Add 'code' and 'messageTemplate' to the DiagnosticInfo", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b5b96fbddd36be342f29b35235bb89bfa0ab5809"}, "originalPosition": 193}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d3f51a29652c7b622e6240720ecc5fefe98ae6c", "author": {"user": {"login": "SupunS", "name": "Supun Setunga"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4d3f51a29652c7b622e6240720ecc5fefe98ae6c", "committedDate": "2020-09-17T15:00:29Z", "message": "Log compile errors to console"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5dbc6b178717d3c4388f515947e98c1bc1193cf3", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5dbc6b178717d3c4388f515947e98c1bc1193cf3", "committedDate": "2020-09-17T15:09:51Z", "message": "Merge branch 'diagnostic-change' of https://github.com/ballerina-platform/ballerina-lang into diagnostic-change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e095cc3c9350c65f1898942bd742c1d84520df7", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4e095cc3c9350c65f1898942bd742c1d84520df7", "committedDate": "2020-09-17T15:22:50Z", "message": "Disable ballerina-data-mapper-test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d23ac58a8d9b11fa7add784e42aa8e2694ad702", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2d23ac58a8d9b11fa7add784e42aa8e2694ad702", "committedDate": "2020-09-17T15:30:46Z", "message": "Enable and correct record-field-access-negative-test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3876d60ba90088ca5ba0b1721b946409ce28b0d", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d3876d60ba90088ca5ba0b1721b946409ce28b0d", "committedDate": "2020-09-17T15:54:28Z", "message": "Rename BallerinaDiagnostic** to BLangDiagnostic**"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwNzk0OTUw", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25876#pullrequestreview-490794950", "createdAt": "2020-09-17T16:43:38Z", "commit": {"oid": "d3876d60ba90088ca5ba0b1721b946409ce28b0d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4595, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}