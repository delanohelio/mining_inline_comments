{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI3NjE1ODk4", "number": 27165, "title": "Refactor the model and behaviour for constants", "bodyText": "Purpose\nThis PR addresses some of the issues that were there with constants.\n\nConstantSymbol is now a type symbol as well.\nWhen used in type defs, symbol() will return the constant symbol\nThe type of a constant is the singleton type of its value space.\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-11-25T18:07:13Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27165", "merged": true, "mergeCommit": {"oid": "c96fe8e81f298cb8e924a7d15daab38434671588"}, "closed": true, "closedAt": "2020-12-09T02:52:53Z", "author": {"login": "pubudu91"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdgLrIsgFqTUzODk5NDM2MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkVpiSgFqTU0Nzc5Njc1Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4OTk0MzYw", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27165#pullrequestreview-538994360", "createdAt": "2020-11-26T04:58:09Z", "commit": {"oid": "a8ca6c3d6d47474452c419a7f58a3f182bbf113c"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwNDo1ODowOVrOH6L4pg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwNDo1ODowOVrOH6L4pg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDc3NDE4Mg==", "bodyText": "What if we return an Optional here?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27165#discussion_r530774182", "createdAt": "2020-11-26T04:58:09Z", "author": {"login": "nadeeshaan"}, "path": "compiler/ballerina-lang/src/main/java/io/ballerina/compiler/api/symbols/ConstantSymbol.java", "diffHunk": "@@ -22,12 +22,19 @@\n  *\n  * @since 2.0.0\n  */\n-public interface ConstantSymbol extends VariableSymbol {\n+public interface ConstantSymbol extends VariableSymbol, SingletonTypeSymbol {\n \n     /**\n      * Get the constant value.\n      *\n      * @return {@link Object} value of the constant\n      */\n     Object constValue();\n+\n+    /**\n+     * Gets the broader type of constant expression associated with this symbol.\n+     *\n+     * @return {@link TypeSymbol} of the broader type\n+     */\n+    TypeSymbol broaderTypeDescriptor();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8ca6c3d6d47474452c419a7f58a3f182bbf113c"}, "originalPosition": 19}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ca97dc8e9cfbac9e10095fccd4d0c17e2b0bca27", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ca97dc8e9cfbac9e10095fccd4d0c17e2b0bca27", "committedDate": "2020-11-26T19:33:57Z", "message": "Enable the disabled enum tests"}, "afterCommit": {"oid": "4072d0790ae465272f51b03f1c9223164b28964b", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4072d0790ae465272f51b03f1c9223164b28964b", "committedDate": "2020-11-30T07:57:41Z", "message": "Enable the disabled enum tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4072d0790ae465272f51b03f1c9223164b28964b", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4072d0790ae465272f51b03f1c9223164b28964b", "committedDate": "2020-11-30T07:57:41Z", "message": "Enable the disabled enum tests"}, "afterCommit": {"oid": "526d75f962c866e808e4bca5ea56c82f243745c1", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/526d75f962c866e808e4bca5ea56c82f243745c1", "committedDate": "2020-12-03T04:44:36Z", "message": "Enable the disabled enum tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c516a525b8aa38faea1b75805c466e4be335ba13", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c516a525b8aa38faea1b75805c466e4be335ba13", "committedDate": "2020-12-07T06:01:13Z", "message": "Use the actual symbol for BLangUserDefinedType for looking up symbols"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04c5358f39a98fc20529c8e337dbb2cc11f91821", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/04c5358f39a98fc20529c8e337dbb2cc11f91821", "committedDate": "2020-12-07T06:01:18Z", "message": "Make ConstantSymbol a type symbol"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b7d9aa275ff7a63845d8bc8726df444d2ace91a", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8b7d9aa275ff7a63845d8bc8726df444d2ace91a", "committedDate": "2020-12-07T06:01:18Z", "message": "Change constants' type to singleton type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb1246f28fa4c2b991b1504f09a30a1d191c22d9", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/eb1246f28fa4c2b991b1504f09a30a1d191c22d9", "committedDate": "2020-12-07T06:01:19Z", "message": "Override langLibMethods() for singleton type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a619cedd6cf62e07bdbd3373f291ed870fb7643e", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a619cedd6cf62e07bdbd3373f291ed870fb7643e", "committedDate": "2020-12-07T06:01:19Z", "message": "Add more tests for constants as a type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6823826d3835eb43636a05e714bcc7e5d0f56d0", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e6823826d3835eb43636a05e714bcc7e5d0f56d0", "committedDate": "2020-12-07T06:01:19Z", "message": "Fix broken ExpressionContextTest test cases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "583d09a53597e83ea054beed98146b83505d13fe", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/583d09a53597e83ea054beed98146b83505d13fe", "committedDate": "2020-12-07T06:01:20Z", "message": "Fix broken ClassDefContextTest test case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "280da8982e8a083a0cc1bfeeca3ee275d7d14708", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/280da8982e8a083a0cc1bfeeca3ee275d7d14708", "committedDate": "2020-12-07T06:01:20Z", "message": "Fix broken RecordTypeDescriptorTest test cases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22c5fe9d76a9a9206c07206356da61ba0f538126", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/22c5fe9d76a9a9206c07206356da61ba0f538126", "committedDate": "2020-12-07T06:01:20Z", "message": "Fix broken StatementContextTest test cases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65e7e9797b75c9713cd103a787c7b651c2c86a03", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/65e7e9797b75c9713cd103a787c7b651c2c86a03", "committedDate": "2020-12-07T06:01:20Z", "message": "Add an API to get the broader type of a constant"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aaa8678bc5a3c53a6425b0cb4b05559fa72550b0", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/aaa8678bc5a3c53a6425b0cb4b05559fa72550b0", "committedDate": "2020-12-07T06:01:21Z", "message": "Improve constant filtering logic in array typedesc context and fix tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3aac28da0c64943773732065a84551b1e9dd3b3b", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3aac28da0c64943773732065a84551b1e9dd3b3b", "committedDate": "2020-12-07T06:01:21Z", "message": "Fix checkstyle failure"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12ecb29424fd0799dda701e950ac46651d49466b", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/12ecb29424fd0799dda701e950ac46651d49466b", "committedDate": "2020-12-07T06:01:21Z", "message": "Enable the disabled enum tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "526d75f962c866e808e4bca5ea56c82f243745c1", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/526d75f962c866e808e4bca5ea56c82f243745c1", "committedDate": "2020-12-03T04:44:36Z", "message": "Enable the disabled enum tests"}, "afterCommit": {"oid": "12ecb29424fd0799dda701e950ac46651d49466b", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/12ecb29424fd0799dda701e950ac46651d49466b", "committedDate": "2020-12-07T06:01:21Z", "message": "Enable the disabled enum tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0869b0899c4855bb31c2151770e7e731276be076", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0869b0899c4855bb31c2151770e7e731276be076", "committedDate": "2020-12-07T07:48:09Z", "message": "Fix broken lang server tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3Nzk2NzU3", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27165#pullrequestreview-547796757", "createdAt": "2020-12-09T02:51:53Z", "commit": {"oid": "0869b0899c4855bb31c2151770e7e731276be076"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4829, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}