{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgyNjY5Mjc4", "number": 25683, "title": "Make limit an intermediate query clause", "bodyText": "Purpose\n$title.\nFixes #25585\nFixes #25679\nApproach\nn/a\nSamples\nn/a\nRemarks\n\n#25682\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-09-09T08:49:59Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25683", "merged": true, "mergeCommit": {"oid": "8206a8cf2ca1215a60c8dfa8daa98a4e98bed9a4"}, "closed": true, "closedAt": "2020-09-10T07:55:03Z", "author": {"login": "grainier"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdGeOnlAH2gAyNDgyNjY5Mjc4OjVkNjk1ZGRkNDZmYjE5NGU1Y2JkNGFlZWQ0YjE4MTNjNTA3ZmY3Yjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHcCpIAFqTQ4NTY3MjA4Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5d695ddd46fb194e5cbd4aeed4b1813c507ff7b8", "author": {"user": {"login": "grainier", "name": "Grainier Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5d695ddd46fb194e5cbd4aeed4b1813c507ff7b8", "committedDate": "2020-09-07T07:53:54Z", "message": "Allow frame expressions in limit clause"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "081eafceaf032fe04f50f790cefdd0fb2f479c02", "author": {"user": {"login": "grainier", "name": "Grainier Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/081eafceaf032fe04f50f790cefdd0fb2f479c02", "committedDate": "2020-09-07T07:54:52Z", "message": "Merge branch 'master' of github.com:ballerina-platform/ballerina-lang into fix-25585"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "088feb0c45d9a0be7fcdd1194828bf0e4d8cfd0a", "author": {"user": {"login": "grainier", "name": "Grainier Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/088feb0c45d9a0be7fcdd1194828bf0e4d8cfd0a", "committedDate": "2020-09-08T00:48:03Z", "message": "Merge branch 'master' of github.com:ballerina-platform/ballerina-lang into fix-25585"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80582a0c43e5459e1ffa455b5e5bb4493cefdaa7", "author": {"user": {"login": "grainier", "name": "Grainier Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/80582a0c43e5459e1ffa455b5e5bb4493cefdaa7", "committedDate": "2020-09-09T06:14:33Z", "message": "Make limit a intermediate query clause"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3f309a222253f926b9d009e45e1f56d7bd56d38", "author": {"user": {"login": "grainier", "name": "Grainier Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f3f309a222253f926b9d009e45e1f56d7bd56d38", "committedDate": "2020-09-09T07:16:35Z", "message": "Make limit a intermediate query clause in old parser"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79225ba5f80c1ef0aa418f07af63e46ae49e8c23", "author": {"user": {"login": "grainier", "name": "Grainier Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/79225ba5f80c1ef0aa418f07af63e46ae49e8c23", "committedDate": "2020-09-09T07:17:53Z", "message": "Fix tests after making limit a query intermediate clause"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f66f589bc7ba4fbbe3b1d75b3ce62334364dc75", "author": {"user": {"login": "grainier", "name": "Grainier Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/6f66f589bc7ba4fbbe3b1d75b3ce62334364dc75", "committedDate": "2020-09-09T07:21:55Z", "message": "Merge upstream"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e25aded52660a4324514d4d99f02c655d2ab623d", "author": {"user": {"login": "grainier", "name": "Grainier Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e25aded52660a4324514d4d99f02c655d2ab623d", "committedDate": "2020-09-09T08:42:04Z", "message": "Fix formatter after making limit a query intermediate clause"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56d642668b1dd0011c951921a3295da9902e2888", "author": {"user": {"login": "grainier", "name": "Grainier Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/56d642668b1dd0011c951921a3295da9902e2888", "committedDate": "2020-09-09T09:08:22Z", "message": "Add IntermediateClauseNode class"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6f94940f6b5336df4b6d53c7c6ccdc191a902bfa", "author": {"user": {"login": "grainier", "name": "Grainier Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/6f94940f6b5336df4b6d53c7c6ccdc191a902bfa", "committedDate": "2020-09-09T08:57:37Z", "message": "Add IntermediateClauseNode class"}, "afterCommit": {"oid": "56d642668b1dd0011c951921a3295da9902e2888", "author": {"user": {"login": "grainier", "name": "Grainier Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/56d642668b1dd0011c951921a3295da9902e2888", "committedDate": "2020-09-09T09:08:22Z", "message": "Add IntermediateClauseNode class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb62f77aba845992d5355a492656a618ebccfbfa", "author": {"user": {"login": "grainier", "name": "Grainier Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bb62f77aba845992d5355a492656a618ebccfbfa", "committedDate": "2020-09-09T09:17:40Z", "message": "Merge upstream"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e08218b3524c2dfe9f8090983ee23cc7ebf5ccb8", "author": {"user": {"login": "grainier", "name": "Grainier Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e08218b3524c2dfe9f8090983ee23cc7ebf5ccb8", "committedDate": "2020-09-09T10:21:57Z", "message": "Fix parser tests for query expression"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5ed334e2977c216454854528be903745061f8354", "author": {"user": {"login": "grainier", "name": "Grainier Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5ed334e2977c216454854528be903745061f8354", "committedDate": "2020-09-09T09:56:03Z", "message": "Fix parser tests for query expression"}, "afterCommit": {"oid": "e08218b3524c2dfe9f8090983ee23cc7ebf5ccb8", "author": {"user": {"login": "grainier", "name": "Grainier Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e08218b3524c2dfe9f8090983ee23cc7ebf5ccb8", "committedDate": "2020-09-09T10:21:57Z", "message": "Fix parser tests for query expression"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1MTc1MzYx", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25683#pullrequestreview-485175361", "createdAt": "2020-09-09T16:04:48Z", "commit": {"oid": "e08218b3524c2dfe9f8090983ee23cc7ebf5ccb8"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1NTYxNjc3", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25683#pullrequestreview-485561677", "createdAt": "2020-09-10T04:44:21Z", "commit": {"oid": "e08218b3524c2dfe9f8090983ee23cc7ebf5ccb8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwNDo0NDoyMVrOHPivRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwNDo0NDo0MVrOHPivkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA1OTg0NA==", "bodyText": "shall we update the grammar rule in the doc comment above this method with limit clause?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25683#discussion_r486059844", "createdAt": "2020-09-10T04:44:21Z", "author": {"login": "lochana-chathura"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java", "diffHunk": "@@ -9066,11 +9065,12 @@ private STNode parseIntermediateClause(boolean isRhsExpr) {\n             case ASCENDING_KEYWORD:\n             case DESCENDING_KEYWORD:\n                 return parseOrderByClause(isRhsExpr);\n+            case LIMIT_KEYWORD:\n+                return parseLimitClause(isRhsExpr);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e08218b3524c2dfe9f8090983ee23cc7ebf5ccb8"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA1OTkyMA==", "bodyText": "doc above this method also", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25683#discussion_r486059920", "createdAt": "2020-09-10T04:44:41Z", "author": {"login": "lochana-chathura"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java", "diffHunk": "@@ -9034,9 +9034,8 @@ private STNode parseQueryExprRhs(STNode queryConstructType, boolean isRhsExpr) {\n         STNode intermediateClauses = STNodeFactory.createNodeList(clauses);\n         STNode queryPipeline = STNodeFactory.createQueryPipelineNode(fromClause, intermediateClauses);\n         STNode onConflictClause = parseOnConflictClause(isRhsExpr);\n-        STNode limitClause = parseLimitClause(isRhsExpr);\n         return STNodeFactory.createQueryExpressionNode(queryConstructType, queryPipeline, selectClause,\n-                onConflictClause, limitClause);\n+                onConflictClause);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e08218b3524c2dfe9f8090983ee23cc7ebf5ccb8"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8320b4c947558403655cd25bd3e34f50a2787f12", "author": {"user": {"login": "grainier", "name": "Grainier Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8320b4c947558403655cd25bd3e34f50a2787f12", "committedDate": "2020-09-10T05:50:50Z", "message": "Merge branch 'master' of github.com:ballerina-platform/ballerina-lang into fix-25585"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26cab73222bb2e1ca9ebc36da90410b174d73565", "author": {"user": {"login": "grainier", "name": "Grainier Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/26cab73222bb2e1ca9ebc36da90410b174d73565", "committedDate": "2020-09-10T06:57:20Z", "message": "Fix parser/error handler as per review comments"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f2064f79838f7625c59cbdc0210fdeee30399990", "author": {"user": {"login": "grainier", "name": "Grainier Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f2064f79838f7625c59cbdc0210fdeee30399990", "committedDate": "2020-09-10T06:46:09Z", "message": "Fix parser/error handler as per review comments"}, "afterCommit": {"oid": "26cab73222bb2e1ca9ebc36da90410b174d73565", "author": {"user": {"login": "grainier", "name": "Grainier Perera"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/26cab73222bb2e1ca9ebc36da90410b174d73565", "committedDate": "2020-09-10T06:57:20Z", "message": "Fix parser/error handler as per review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1NjQwMzQy", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25683#pullrequestreview-485640342", "createdAt": "2020-09-10T07:09:46Z", "commit": {"oid": "26cab73222bb2e1ca9ebc36da90410b174d73565"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1NjcyMDg3", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25683#pullrequestreview-485672087", "createdAt": "2020-09-10T07:54:56Z", "commit": {"oid": "26cab73222bb2e1ca9ebc36da90410b174d73565"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4690, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}