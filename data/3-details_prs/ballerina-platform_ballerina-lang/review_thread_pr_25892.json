{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg4NzAzMjMz", "number": 25892, "reviewThreads": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxNjozMjoxOFrOEkoSSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQwNTo0Nzo0OVrOEk00WA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA2ODQ0MjMyOnYy", "diffSide": "RIGHT", "path": "misc/formatter/modules/formatter-core/src/main/java/org/ballerinalang/formatter/core/FormattingTreeModifier.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxNjozMjoxOFrOHTrp5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxODowOToyNlrOHTvOuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQwMDIzMQ==", "bodyText": "shall we use isEmpty instead of checking size equals to zero", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25892#discussion_r490400231", "createdAt": "2020-09-17T16:32:18Z", "author": {"login": "nadeeshaan"}, "path": "misc/formatter/modules/formatter-core/src/main/java/org/ballerinalang/formatter/core/FormattingTreeModifier.java", "diffHunk": "@@ -360,8 +361,11 @@ public FunctionDefinitionNode transform(FunctionDefinitionNode functionDefinitio\n             functionDefinitionNode = functionDefinitionNode.modify()\n                     .withMetadata(metadata).apply();\n         }\n+\n+        int startColumn = qualifierList.size() == 0 ? getStartColumn(functionDefinitionNode, true) : 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6b3c7d89ef748e55790d84a78e7af0a11e1abc7"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQ1ODgwOQ==", "bodyText": "Fixed", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25892#discussion_r490458809", "createdAt": "2020-09-17T18:09:26Z", "author": {"login": "sanjana"}, "path": "misc/formatter/modules/formatter-core/src/main/java/org/ballerinalang/formatter/core/FormattingTreeModifier.java", "diffHunk": "@@ -360,8 +361,11 @@ public FunctionDefinitionNode transform(FunctionDefinitionNode functionDefinitio\n             functionDefinitionNode = functionDefinitionNode.modify()\n                     .withMetadata(metadata).apply();\n         }\n+\n+        int startColumn = qualifierList.size() == 0 ? getStartColumn(functionDefinitionNode, true) : 0;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQwMDIzMQ=="}, "originalCommit": {"oid": "f6b3c7d89ef748e55790d84a78e7af0a11e1abc7"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA2ODQ2MjM0OnYy", "diffSide": "RIGHT", "path": "misc/formatter/modules/formatter-core/src/main/java/org/ballerinalang/formatter/core/FormattingTreeModifier.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxNjozNzoyMlrOHTr2Xw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxODozNDo0MFrOHTwFCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQwMzQyMw==", "bodyText": "since we return within each of the clauses, shall we use if clauses", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25892#discussion_r490403423", "createdAt": "2020-09-17T16:37:22Z", "author": {"login": "nadeeshaan"}, "path": "misc/formatter/modules/formatter-core/src/main/java/org/ballerinalang/formatter/core/FormattingTreeModifier.java", "diffHunk": "@@ -3687,12 +3697,51 @@ public OrderKeyNode transform(OrderKeyNode orderKeyNode) {\n                 .apply();\n     }\n \n+    @Override\n+    public ClassDefinitionNode transform(ClassDefinitionNode classDefinitionNode) {\n+        if (!isInLineRange(classDefinitionNode, lineRange)) {\n+            return classDefinitionNode;\n+        }\n+\n+        Token visibilityQualifier = getToken(classDefinitionNode.visibilityQualifier().orElse(null));\n+        MetadataNode metadata = this.modifyNode(classDefinitionNode.metadata().orElse(null));\n+        NodeList<Token> qualifierList = this.modifyNodeList(classDefinitionNode.classTypeQualifiers());\n+        Token classKeyword = getToken(classDefinitionNode.classKeyword());\n+        Token className = getToken(classDefinitionNode.className());\n+        NodeList<Node> members = this.modifyNodeList(classDefinitionNode.members());\n+        Token openBrace = getToken(classDefinitionNode.openBrace());\n+        Token closeBrace = getToken(classDefinitionNode.closeBrace());\n+        int startColumn = getStartColumn(classDefinitionNode, true);\n+\n+        if (metadata != null) {\n+            classDefinitionNode = classDefinitionNode.modify()\n+                    .withMetadata(metadata).apply();\n+        }\n+\n+        if (visibilityQualifier != null && !visibilityQualifier.isMissing()) {\n+            classDefinitionNode = classDefinitionNode.modify()\n+                    .withVisibilityQualifier(formatToken(visibilityQualifier, startColumn, 1, 0, 0))\n+                    .apply();\n+            startColumn = 0;\n+        }\n+\n+        return classDefinitionNode.modify()\n+                .withClassKeyword(formatToken(classKeyword, startColumn, 0, 0, 0))\n+                .withClassName(formatToken(className, 1, 0, 0, 0))\n+                .withOpenBrace(formatToken(openBrace, 1, 0, 0, 1))\n+                .withCloseBrace(formatToken(closeBrace, 0, 0, 0, 1))\n+                .withClassTypeQualifiers(qualifierList)\n+                .withMembers(members)\n+                .apply();\n+    }\n+\n     @Override\n     public Token transform(Token token) {\n         int startColumn = getStartColumn(token, true);\n         if (token.kind() == (SyntaxKind.COMMA_TOKEN)) {\n             return formatToken(token, 0, 1, 0, 0);\n-        } else if (token.kind() == (SyntaxKind.PUBLIC_KEYWORD) || token.kind() == (SyntaxKind.ABSTRACT_KEYWORD)) {\n+        } else if (token.kind() == (SyntaxKind.PUBLIC_KEYWORD) || token.kind() == (SyntaxKind.ABSTRACT_KEYWORD) ||", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6b3c7d89ef748e55790d84a78e7af0a11e1abc7"}, "originalPosition": 110}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQ3MjcxNQ==", "bodyText": "Updated.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25892#discussion_r490472715", "createdAt": "2020-09-17T18:34:40Z", "author": {"login": "sanjana"}, "path": "misc/formatter/modules/formatter-core/src/main/java/org/ballerinalang/formatter/core/FormattingTreeModifier.java", "diffHunk": "@@ -3687,12 +3697,51 @@ public OrderKeyNode transform(OrderKeyNode orderKeyNode) {\n                 .apply();\n     }\n \n+    @Override\n+    public ClassDefinitionNode transform(ClassDefinitionNode classDefinitionNode) {\n+        if (!isInLineRange(classDefinitionNode, lineRange)) {\n+            return classDefinitionNode;\n+        }\n+\n+        Token visibilityQualifier = getToken(classDefinitionNode.visibilityQualifier().orElse(null));\n+        MetadataNode metadata = this.modifyNode(classDefinitionNode.metadata().orElse(null));\n+        NodeList<Token> qualifierList = this.modifyNodeList(classDefinitionNode.classTypeQualifiers());\n+        Token classKeyword = getToken(classDefinitionNode.classKeyword());\n+        Token className = getToken(classDefinitionNode.className());\n+        NodeList<Node> members = this.modifyNodeList(classDefinitionNode.members());\n+        Token openBrace = getToken(classDefinitionNode.openBrace());\n+        Token closeBrace = getToken(classDefinitionNode.closeBrace());\n+        int startColumn = getStartColumn(classDefinitionNode, true);\n+\n+        if (metadata != null) {\n+            classDefinitionNode = classDefinitionNode.modify()\n+                    .withMetadata(metadata).apply();\n+        }\n+\n+        if (visibilityQualifier != null && !visibilityQualifier.isMissing()) {\n+            classDefinitionNode = classDefinitionNode.modify()\n+                    .withVisibilityQualifier(formatToken(visibilityQualifier, startColumn, 1, 0, 0))\n+                    .apply();\n+            startColumn = 0;\n+        }\n+\n+        return classDefinitionNode.modify()\n+                .withClassKeyword(formatToken(classKeyword, startColumn, 0, 0, 0))\n+                .withClassName(formatToken(className, 1, 0, 0, 0))\n+                .withOpenBrace(formatToken(openBrace, 1, 0, 0, 1))\n+                .withCloseBrace(formatToken(closeBrace, 0, 0, 0, 1))\n+                .withClassTypeQualifiers(qualifierList)\n+                .withMembers(members)\n+                .apply();\n+    }\n+\n     @Override\n     public Token transform(Token token) {\n         int startColumn = getStartColumn(token, true);\n         if (token.kind() == (SyntaxKind.COMMA_TOKEN)) {\n             return formatToken(token, 0, 1, 0, 0);\n-        } else if (token.kind() == (SyntaxKind.PUBLIC_KEYWORD) || token.kind() == (SyntaxKind.ABSTRACT_KEYWORD)) {\n+        } else if (token.kind() == (SyntaxKind.PUBLIC_KEYWORD) || token.kind() == (SyntaxKind.ABSTRACT_KEYWORD) ||", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQwMzQyMw=="}, "originalCommit": {"oid": "f6b3c7d89ef748e55790d84a78e7af0a11e1abc7"}, "originalPosition": 110}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA2ODUyMTY3OnYy", "diffSide": "RIGHT", "path": "misc/formatter/modules/formatter-core/src/test/java/org/ballerinalang/formatter/core/declarations/ClassDefinitionDeclarationsTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxNjo1MTozOFrOHTsaxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxODoxMTo0MlrOHTvTeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQxMjc0Mw==", "bodyText": "Might need a doc comment here to pass the check style.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25892#discussion_r490412743", "createdAt": "2020-09-17T16:51:38Z", "author": {"login": "IrushiL"}, "path": "misc/formatter/modules/formatter-core/src/test/java/org/ballerinalang/formatter/core/declarations/ClassDefinitionDeclarationsTest.java", "diffHunk": "@@ -0,0 +1,68 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.formatter.core.declarations;\n+\n+import org.ballerinalang.formatter.core.FormatterTest;\n+import org.testng.annotations.DataProvider;\n+import org.testng.annotations.Test;\n+\n+import java.io.IOException;\n+import java.nio.file.Paths;\n+import java.util.Arrays;\n+import java.util.List;\n+\n+public class ClassDefinitionDeclarationsTest extends FormatterTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6b3c7d89ef748e55790d84a78e7af0a11e1abc7"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQ2MDAyNA==", "bodyText": "Added the required Javadoc.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25892#discussion_r490460024", "createdAt": "2020-09-17T18:11:42Z", "author": {"login": "sanjana"}, "path": "misc/formatter/modules/formatter-core/src/test/java/org/ballerinalang/formatter/core/declarations/ClassDefinitionDeclarationsTest.java", "diffHunk": "@@ -0,0 +1,68 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *   http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.formatter.core.declarations;\n+\n+import org.ballerinalang.formatter.core.FormatterTest;\n+import org.testng.annotations.DataProvider;\n+import org.testng.annotations.Test;\n+\n+import java.io.IOException;\n+import java.nio.file.Paths;\n+import java.util.Arrays;\n+import java.util.List;\n+\n+public class ClassDefinitionDeclarationsTest extends FormatterTest {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQxMjc0Mw=="}, "originalCommit": {"oid": "f6b3c7d89ef748e55790d84a78e7af0a11e1abc7"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA2ODUzMjY2OnYy", "diffSide": "RIGHT", "path": "misc/formatter/modules/formatter-core/src/test/resources/declarations/class-definition/assert/class_definition_declaration_17.bal", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxNjo1NDoxOFrOHTsheQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxODoxNDo0MFrOHTvZ7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQxNDQ1Nw==", "bodyText": "Latest changes keeps a blank link in between empty blocks.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25892#discussion_r490414457", "createdAt": "2020-09-17T16:54:18Z", "author": {"login": "IrushiL"}, "path": "misc/formatter/modules/formatter-core/src/test/resources/declarations/class-definition/assert/class_definition_declaration_17.bal", "diffHunk": "@@ -0,0 +1,11 @@\n+class Foo {\n+    public function init() {\n+    }\n+\n+    function getName() {\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6b3c7d89ef748e55790d84a78e7af0a11e1abc7"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQ2MTY3OQ==", "bodyText": "Updated.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25892#discussion_r490461679", "createdAt": "2020-09-17T18:14:40Z", "author": {"login": "sanjana"}, "path": "misc/formatter/modules/formatter-core/src/test/resources/declarations/class-definition/assert/class_definition_declaration_17.bal", "diffHunk": "@@ -0,0 +1,11 @@\n+class Foo {\n+    public function init() {\n+    }\n+\n+    function getName() {\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQxNDQ1Nw=="}, "originalCommit": {"oid": "f6b3c7d89ef748e55790d84a78e7af0a11e1abc7"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA2ODUzOTY3OnYy", "diffSide": "RIGHT", "path": "misc/formatter/modules/formatter-core/src/test/resources/declarations/class-definition/source/class_definition_declaration_2.bal", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxNjo1NjowN1rOHTsl1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxODoxNTowNlrOHTva6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQxNTU3Mg==", "bodyText": "Shouldn't we disorganize the formatting here?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25892#discussion_r490415572", "createdAt": "2020-09-17T16:56:07Z", "author": {"login": "IrushiL"}, "path": "misc/formatter/modules/formatter-core/src/test/resources/declarations/class-definition/source/class_definition_declaration_2.bal", "diffHunk": "@@ -0,0 +1,17 @@\n+class Person {\n+    *A;\n+    public int age = 10;\n+    function foo() returns int {\n+        int a = 12345;\n+        return a;\n+    }\n+\n+    public string name = \"sample name\";\n+    int year = 50;\n+    function bar() returns string {\n+        string b = \"bar\";\n+        return b;\n+    }\n+\n+    string month = \"february\";\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6b3c7d89ef748e55790d84a78e7af0a11e1abc7"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQ2MTkzMA==", "bodyText": "Disorganized the formatting.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25892#discussion_r490461930", "createdAt": "2020-09-17T18:15:06Z", "author": {"login": "sanjana"}, "path": "misc/formatter/modules/formatter-core/src/test/resources/declarations/class-definition/source/class_definition_declaration_2.bal", "diffHunk": "@@ -0,0 +1,17 @@\n+class Person {\n+    *A;\n+    public int age = 10;\n+    function foo() returns int {\n+        int a = 12345;\n+        return a;\n+    }\n+\n+    public string name = \"sample name\";\n+    int year = 50;\n+    function bar() returns string {\n+        string b = \"bar\";\n+        return b;\n+    }\n+\n+    string month = \"february\";\n+}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQxNTU3Mg=="}, "originalCommit": {"oid": "f6b3c7d89ef748e55790d84a78e7af0a11e1abc7"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA2ODU1NjI2OnYy", "diffSide": "RIGHT", "path": "misc/formatter/modules/formatter-core/src/test/resources/declarations/class-definition/source/class_definition_declaration_10.bal", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxNzowMDoyNlrOHTswOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxODozNDoyMlrOHTwEgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQxODIzNQ==", "bodyText": "Missing new line", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25892#discussion_r490418235", "createdAt": "2020-09-17T17:00:26Z", "author": {"login": "IrushiL"}, "path": "misc/formatter/modules/formatter-core/src/test/resources/declarations/class-definition/source/class_definition_declaration_10.bal", "diffHunk": "@@ -0,0 +1,6 @@\n+    readonly\n+                 class\n+          Foo\n+                      {\n+       string             name\n+     ;        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6b3c7d89ef748e55790d84a78e7af0a11e1abc7"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQ3MjU3Ng==", "bodyText": "Added.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25892#discussion_r490472576", "createdAt": "2020-09-17T18:34:22Z", "author": {"login": "sanjana"}, "path": "misc/formatter/modules/formatter-core/src/test/resources/declarations/class-definition/source/class_definition_declaration_10.bal", "diffHunk": "@@ -0,0 +1,6 @@\n+    readonly\n+                 class\n+          Foo\n+                      {\n+       string             name\n+     ;        }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQxODIzNQ=="}, "originalCommit": {"oid": "f6b3c7d89ef748e55790d84a78e7af0a11e1abc7"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA2ODU1ODcxOnYy", "diffSide": "RIGHT", "path": "misc/formatter/modules/formatter-core/src/test/resources/declarations/class-definition/source/class_definition_declaration_11.bal", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxNzowMTowM1rOHTsxzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxODozNDoxMlrOHTwEEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQxODYzNg==", "bodyText": "Missing new line", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25892#discussion_r490418636", "createdAt": "2020-09-17T17:01:03Z", "author": {"login": "IrushiL"}, "path": "misc/formatter/modules/formatter-core/src/test/resources/declarations/class-definition/source/class_definition_declaration_11.bal", "diffHunk": "@@ -0,0 +1,6 @@\n+distinct\n+  class\n+    Foo\n+        {\n+    string      name\n+ ;            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6b3c7d89ef748e55790d84a78e7af0a11e1abc7"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQ3MjQ2Ng==", "bodyText": "Added.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25892#discussion_r490472466", "createdAt": "2020-09-17T18:34:12Z", "author": {"login": "sanjana"}, "path": "misc/formatter/modules/formatter-core/src/test/resources/declarations/class-definition/source/class_definition_declaration_11.bal", "diffHunk": "@@ -0,0 +1,6 @@\n+distinct\n+  class\n+    Foo\n+        {\n+    string      name\n+ ;            }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQxODYzNg=="}, "originalCommit": {"oid": "f6b3c7d89ef748e55790d84a78e7af0a11e1abc7"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA2ODU1OTEwOnYy", "diffSide": "RIGHT", "path": "misc/formatter/modules/formatter-core/src/test/resources/declarations/class-definition/source/class_definition_declaration_13.bal", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QxNzowMTowOVrOHTsyEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xN1QyMTowMzoyM1rOHT1cxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQxODcwNg==", "bodyText": "Missing new line", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25892#discussion_r490418706", "createdAt": "2020-09-17T17:01:09Z", "author": {"login": "IrushiL"}, "path": "misc/formatter/modules/formatter-core/src/test/resources/declarations/class-definition/source/class_definition_declaration_13.bal", "diffHunk": "@@ -0,0 +1,13 @@\n+readonly\n+ distinct\n+    class\n+        Foo\n+      {\n+    string  name ;\n+\n+\n+}\n+\n+distinct           readonly\n+         class           Foo          {\n+    string      name   ;     }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6b3c7d89ef748e55790d84a78e7af0a11e1abc7"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDU2MDcxMQ==", "bodyText": "Fixed.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25892#discussion_r490560711", "createdAt": "2020-09-17T21:03:23Z", "author": {"login": "sanjana"}, "path": "misc/formatter/modules/formatter-core/src/test/resources/declarations/class-definition/source/class_definition_declaration_13.bal", "diffHunk": "@@ -0,0 +1,13 @@\n+readonly\n+ distinct\n+    class\n+        Foo\n+      {\n+    string  name ;\n+\n+\n+}\n+\n+distinct           readonly\n+         class           Foo          {\n+    string      name   ;     }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQxODcwNg=="}, "originalCommit": {"oid": "f6b3c7d89ef748e55790d84a78e7af0a11e1abc7"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA3MDI0NzE1OnYy", "diffSide": "RIGHT", "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/syntax/tree/SyntaxTree.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQwMzozMzo0NlrOHT8wpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQwNDo1NTozNlrOHT-DSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY4MDQ4Nw==", "bodyText": "Shall we add this method inside the formatter without altering the parser? Since this new line is something added by the formatter itself?\nWe could move this to the FormatterUtils class.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25892#discussion_r490680487", "createdAt": "2020-09-18T03:33:46Z", "author": {"login": "IrushiL"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/syntax/tree/SyntaxTree.java", "diffHunk": "@@ -124,6 +124,17 @@ public String toSourceCode() {\n         return rootNode.toSourceCode();\n     }\n \n+    /**", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c128d13051ada7ad8530e40b051dde6f982a3fd"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDcwMTY0MA==", "bodyText": "Moved.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25892#discussion_r490701640", "createdAt": "2020-09-18T04:55:36Z", "author": {"login": "sanjana"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/syntax/tree/SyntaxTree.java", "diffHunk": "@@ -124,6 +124,17 @@ public String toSourceCode() {\n         return rootNode.toSourceCode();\n     }\n \n+    /**", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY4MDQ4Nw=="}, "originalCommit": {"oid": "5c128d13051ada7ad8530e40b051dde6f982a3fd"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA3MDI4OTg1OnYy", "diffSide": "RIGHT", "path": "misc/formatter/modules/formatter-core/src/test/java/org/ballerinalang/formatter/core/FormatterTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQwMzo1MDoyMlrOHT9HXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQwNToxOToyN1rOHT-b-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY4NjMwMg==", "bodyText": "Shall we change the actual formatter API (inside the Formatter class) output also? Since that would be what is returned to someone calling the formatter.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25892#discussion_r490686302", "createdAt": "2020-09-18T03:50:22Z", "author": {"login": "IrushiL"}, "path": "misc/formatter/modules/formatter-core/src/test/java/org/ballerinalang/formatter/core/FormatterTest.java", "diffHunk": "@@ -61,7 +61,7 @@ public void test(String source, String sourcePath) throws IOException {\n         SyntaxTree syntaxTree = SyntaxTree.from(textDocument);\n         SyntaxTree newSyntaxTree = Formatter.format(syntaxTree);\n         Assert.assertFalse(newSyntaxTree.hasDiagnostics());\n-        Assert.assertEquals(newSyntaxTree.toSourceCode(), getSourceText(assertFilePath));\n+        Assert.assertEquals(newSyntaxTree.toFormatterSourceCode(), getSourceText(assertFilePath));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c128d13051ada7ad8530e40b051dde6f982a3fd"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDcwNzk2MA==", "bodyText": "Done.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25892#discussion_r490707960", "createdAt": "2020-09-18T05:19:27Z", "author": {"login": "sanjana"}, "path": "misc/formatter/modules/formatter-core/src/test/java/org/ballerinalang/formatter/core/FormatterTest.java", "diffHunk": "@@ -61,7 +61,7 @@ public void test(String source, String sourcePath) throws IOException {\n         SyntaxTree syntaxTree = SyntaxTree.from(textDocument);\n         SyntaxTree newSyntaxTree = Formatter.format(syntaxTree);\n         Assert.assertFalse(newSyntaxTree.hasDiagnostics());\n-        Assert.assertEquals(newSyntaxTree.toSourceCode(), getSourceText(assertFilePath));\n+        Assert.assertEquals(newSyntaxTree.toFormatterSourceCode(), getSourceText(assertFilePath));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDY4NjMwMg=="}, "originalCommit": {"oid": "5c128d13051ada7ad8530e40b051dde6f982a3fd"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA3MDQ5NTYwOnYy", "diffSide": "RIGHT", "path": "misc/formatter/modules/formatter-core/src/main/java/org/ballerinalang/formatter/core/FormatterUtils.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQwNTo0Nzo0OVrOHT-7NQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQwNTo0Nzo0OVrOHT-7NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDcxNTk1Nw==", "bodyText": "There are multiple places we call System.getProperty(LINE_SEPARATOR), instead of keeping just the LINE_SEPARATOR as a static field, let's keep the actual return value.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25892#discussion_r490715957", "createdAt": "2020-09-18T05:47:49Z", "author": {"login": "nadeeshaan"}, "path": "misc/formatter/modules/formatter-core/src/main/java/org/ballerinalang/formatter/core/FormatterUtils.java", "diffHunk": "@@ -551,6 +554,18 @@ static boolean addNewTrailingLine(NonTerminalNode parent, NonTerminalNode node)\n         return true;\n     }\n \n+    /**\n+     * Converts the syntax tree into source code, remove superfluous spaces and newlines at the ending and returns it\n+     * as a string.\n+     *\n+     * @param syntaxTree       syntaxTree\n+     * @return source code as a string\n+     */\n+    public static String toFormattedSourceCode(SyntaxTree syntaxTree) {\n+        return syntaxTree.toSourceCode().trim() +\n+                System.getProperty(LINE_SEPARATOR);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bc7df351f9ffe107ff07fa0fad6236451a5b6c9b"}, "originalPosition": 104}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4965, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}