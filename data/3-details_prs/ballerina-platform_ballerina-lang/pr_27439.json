{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1OTkxMzIy", "number": 27439, "title": "Refactor and improve project API util methods", "bodyText": "Purpose\n\nIntroduces the following methods:\nio.ballerina.projects.directory.ProjectPaths\n\nUpdate:\npublic static Path packageRoot(Path filepath) throws ProjectException;\npublic static boolean isBalFile(Path filepath);\npublic static boolean isStandaloneBalFile(Path filepath);\npublic static Path packageRoot(Path filepath) throws ProjectException;\npublic static boolean isBallerinaStandaloneFile(Path filepath);\npublic static boolean isBallerinaSourceFile(Path filepath);\npublic static Path findPackageRoot(Path filepath) throws ProjectException;\npublic static boolean isBallerinaStandaloneFile(Path file);\nFixes #27273\nio.ballerina.projects.directory.Project\npublic abstract DocumentId documentId(Path file);\nFixes #27274\n\nRemoves the following method:\nio.ballerina.projects.directory.ProjectLoader\npublic static Optional<DocumentId> getDocumentId(Path documentFilePath, BuildProject project);\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-12-10T14:49:57Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27439", "merged": true, "mergeCommit": {"oid": "1754f86e00c21bf45022c3f31286bff4e05fcb70"}, "closed": true, "closedAt": "2021-01-15T18:52:01Z", "author": {"login": "azinneera"}, "timelineItems": {"totalCount": 31, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdk0h_dABqjQwOTU1MDUyNTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdwdjmgAFqTU1NzQ0MzIzMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dcd266af51207ae3292b70b9b7b7dfba12e41005", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/dcd266af51207ae3292b70b9b7b7dfba12e41005", "committedDate": "2020-12-10T14:46:30Z", "message": "Remove ProjectLoader#getDocumentId and refactor to use the Project"}, "afterCommit": {"oid": "21a892b9cfe35c5fcd370214d86eb0415824c66e", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/21a892b9cfe35c5fcd370214d86eb0415824c66e", "committedDate": "2020-12-10T14:50:25Z", "message": "Remove ProjectLoader#getDocumentId and refactor to use the Project"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "21a892b9cfe35c5fcd370214d86eb0415824c66e", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/21a892b9cfe35c5fcd370214d86eb0415824c66e", "committedDate": "2020-12-10T14:50:25Z", "message": "Remove ProjectLoader#getDocumentId and refactor to use the Project"}, "afterCommit": {"oid": "94dc0c0951e8adf61cdc517b83d0cc050f93d655", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/94dc0c0951e8adf61cdc517b83d0cc050f93d655", "committedDate": "2020-12-10T15:05:30Z", "message": "Remove ProjectLoader#getDocumentId and refactor to use the Project"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "94dc0c0951e8adf61cdc517b83d0cc050f93d655", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/94dc0c0951e8adf61cdc517b83d0cc050f93d655", "committedDate": "2020-12-10T15:05:30Z", "message": "Remove ProjectLoader#getDocumentId and refactor to use the Project"}, "afterCommit": {"oid": "aa75699c875d994655aa0a7ad71a2a1d304b618c", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/aa75699c875d994655aa0a7ad71a2a1d304b618c", "committedDate": "2020-12-10T15:41:10Z", "message": "Remove ProjectLoader#getDocumentId and refactor to use the Project"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "aa75699c875d994655aa0a7ad71a2a1d304b618c", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/aa75699c875d994655aa0a7ad71a2a1d304b618c", "committedDate": "2020-12-10T15:41:10Z", "message": "Remove ProjectLoader#getDocumentId and refactor to use the Project"}, "afterCommit": {"oid": "e61c1a59ac0f53511f2d8a0f8321fecaf7953ab7", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e61c1a59ac0f53511f2d8a0f8321fecaf7953ab7", "committedDate": "2020-12-10T16:04:04Z", "message": "Remove ProjectLoader#getDocumentId and refactor to use the Project"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e61c1a59ac0f53511f2d8a0f8321fecaf7953ab7", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e61c1a59ac0f53511f2d8a0f8321fecaf7953ab7", "committedDate": "2020-12-10T16:04:04Z", "message": "Remove ProjectLoader#getDocumentId and refactor to use the Project"}, "afterCommit": {"oid": "533684968773835c280cb9f1a01989c0d1770112", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/533684968773835c280cb9f1a01989c0d1770112", "committedDate": "2020-12-11T07:34:03Z", "message": "Remove ProjectLoader#getDocumentId and refactor to use the Project"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "533684968773835c280cb9f1a01989c0d1770112", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/533684968773835c280cb9f1a01989c0d1770112", "committedDate": "2020-12-11T07:34:03Z", "message": "Remove ProjectLoader#getDocumentId and refactor to use the Project"}, "afterCommit": {"oid": "b2c2d1591b1ad094d17fe9ba6a959300360162e5", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b2c2d1591b1ad094d17fe9ba6a959300360162e5", "committedDate": "2020-12-11T08:22:57Z", "message": "Remove ProjectLoader#getDocumentId and refactor to use the Project"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b2c2d1591b1ad094d17fe9ba6a959300360162e5", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b2c2d1591b1ad094d17fe9ba6a959300360162e5", "committedDate": "2020-12-11T08:22:57Z", "message": "Remove ProjectLoader#getDocumentId and refactor to use the Project"}, "afterCommit": {"oid": "86922cc42be3c129a57dbe92d935fbab9b5d0bfe", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/86922cc42be3c129a57dbe92d935fbab9b5d0bfe", "committedDate": "2020-12-11T08:45:31Z", "message": "Remove ProjectLoader#getDocumentId and refactor to use the Project"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "86922cc42be3c129a57dbe92d935fbab9b5d0bfe", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/86922cc42be3c129a57dbe92d935fbab9b5d0bfe", "committedDate": "2020-12-11T08:45:31Z", "message": "Remove ProjectLoader#getDocumentId and refactor to use the Project"}, "afterCommit": {"oid": "8082df7b420ec7921e7e3c62c07391f1fc82df0f", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8082df7b420ec7921e7e3c62c07391f1fc82df0f", "committedDate": "2020-12-11T08:52:40Z", "message": "Remove ProjectLoader#getDocumentId and refactor to use the Project"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8082df7b420ec7921e7e3c62c07391f1fc82df0f", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8082df7b420ec7921e7e3c62c07391f1fc82df0f", "committedDate": "2020-12-11T08:52:40Z", "message": "Remove ProjectLoader#getDocumentId and refactor to use the Project"}, "afterCommit": {"oid": "981293c0e5e55d2d3b3c4a86fe6d636713e51e04", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/981293c0e5e55d2d3b3c4a86fe6d636713e51e04", "committedDate": "2020-12-11T09:03:04Z", "message": "Remove ProjectLoader#getDocumentId and refactor to use the Project"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxNzgwNDYz", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27439#pullrequestreview-551780463", "createdAt": "2020-12-14T18:33:20Z", "commit": {"oid": "981293c0e5e55d2d3b3c4a86fe6d636713e51e04"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxODozMzoyMFrOIFe4YA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxODozMzoyMFrOIFe4YA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjYxOTc0NA==", "bodyText": "License header missing.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27439#discussion_r542619744", "createdAt": "2020-12-14T18:33:20Z", "author": {"login": "hemikak"}, "path": "compiler/ballerina-lang/src/main/java/io/ballerina/projects/directory/ProjectPaths.java", "diffHunk": "@@ -0,0 +1,128 @@\n+package io.ballerina.projects.directory;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "981293c0e5e55d2d3b3c4a86fe6d636713e51e04"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxOTg0NzA2", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27439#pullrequestreview-551984706", "createdAt": "2020-12-14T23:41:20Z", "commit": {"oid": "981293c0e5e55d2d3b3c4a86fe6d636713e51e04"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMzo0MToyMFrOIFxojg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQwMDowMzowNVrOIFyT9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjkyNjk5MA==", "bodyText": "Let's move this class to io.ballerina.projects.util class.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27439#discussion_r542926990", "createdAt": "2020-12-14T23:41:20Z", "author": {"login": "sameerajayasoma"}, "path": "compiler/ballerina-lang/src/main/java/io/ballerina/projects/directory/ProjectPaths.java", "diffHunk": "@@ -0,0 +1,128 @@\n+package io.ballerina.projects.directory;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "981293c0e5e55d2d3b3c4a86fe6d636713e51e04"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjkyNzEyMg==", "bodyText": "Missing  @SInCE 2.0.0", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27439#discussion_r542927122", "createdAt": "2020-12-14T23:41:42Z", "author": {"login": "sameerajayasoma"}, "path": "compiler/ballerina-lang/src/main/java/io/ballerina/projects/directory/ProjectPaths.java", "diffHunk": "@@ -0,0 +1,128 @@\n+package io.ballerina.projects.directory;\n+\n+import io.ballerina.projects.Project;\n+import io.ballerina.projects.ProjectException;\n+import io.ballerina.projects.util.ProjectConstants;\n+import org.wso2.ballerinalang.compiler.util.ProjectDirConstants;\n+\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.util.Optional;\n+\n+/**\n+ * Consists of static methods that may be used to obtain {@link Project}\n+ * information using file paths.\n+ */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "981293c0e5e55d2d3b3c4a86fe6d636713e51e04"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjkzMTI1OA==", "bodyText": "Do we need to support other files here? e.g., resources, Package.md, Ballerina.toml etc", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27439#discussion_r542931258", "createdAt": "2020-12-14T23:51:18Z", "author": {"login": "sameerajayasoma"}, "path": "compiler/ballerina-lang/src/main/java/io/ballerina/projects/directory/ProjectPaths.java", "diffHunk": "@@ -0,0 +1,128 @@\n+package io.ballerina.projects.directory;\n+\n+import io.ballerina.projects.Project;\n+import io.ballerina.projects.ProjectException;\n+import io.ballerina.projects.util.ProjectConstants;\n+import org.wso2.ballerinalang.compiler.util.ProjectDirConstants;\n+\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.util.Optional;\n+\n+/**\n+ * Consists of static methods that may be used to obtain {@link Project}\n+ * information using file paths.\n+ */\n+public class ProjectPaths {\n+\n+    /**\n+     * Finds the root directory of a Ballerina package using the filepath provided.\n+     *\n+     * @param filepath ballerina file that belongs to a package\n+     * @return path to the package root directory\n+     * @throws ProjectException if the provided path is invalid or if it is a standalone ballerina file\n+     */\n+    public static Path findPackageRoot(Path filepath) throws ProjectException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "981293c0e5e55d2d3b3c4a86fe6d636713e51e04"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjkzMzEwNQ==", "bodyText": "AFAIR, what we discussed was to introduce two APIs:\n\nCheck whether a given path belongs to a package?\nGet the package root path from a given file path", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27439#discussion_r542933105", "createdAt": "2020-12-14T23:56:08Z", "author": {"login": "sameerajayasoma"}, "path": "compiler/ballerina-lang/src/main/java/io/ballerina/projects/directory/ProjectPaths.java", "diffHunk": "@@ -0,0 +1,128 @@\n+package io.ballerina.projects.directory;\n+\n+import io.ballerina.projects.Project;\n+import io.ballerina.projects.ProjectException;\n+import io.ballerina.projects.util.ProjectConstants;\n+import org.wso2.ballerinalang.compiler.util.ProjectDirConstants;\n+\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.util.Optional;\n+\n+/**\n+ * Consists of static methods that may be used to obtain {@link Project}\n+ * information using file paths.\n+ */\n+public class ProjectPaths {\n+\n+    /**\n+     * Finds the root directory of a Ballerina package using the filepath provided.\n+     *\n+     * @param filepath ballerina file that belongs to a package\n+     * @return path to the package root directory\n+     * @throws ProjectException if the provided path is invalid or if it is a standalone ballerina file\n+     */\n+    public static Path findPackageRoot(Path filepath) throws ProjectException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjkzMTI1OA=="}, "originalCommit": {"oid": "981293c0e5e55d2d3b3c4a86fe6d636713e51e04"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjkzNzA0Mw==", "bodyText": "It is not correct to get the module name from the moduleId. Use moduleId to get the ModuleContext.\nWhat's inside moduleId is just for debugging purposes.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27439#discussion_r542937043", "createdAt": "2020-12-15T00:02:07Z", "author": {"login": "sameerajayasoma"}, "path": "compiler/ballerina-lang/src/main/java/io/ballerina/projects/directory/BuildProject.java", "diffHunk": "@@ -111,4 +114,38 @@ private BuildProject(ProjectEnvironmentBuilder environmentBuilder, Path projectP\n         }\n         return Optional.empty();\n     }\n+\n+    @Override\n+    public DocumentId documentId(Path file) {\n+        ProjectPaths.findPackageRoot(file);\n+        Path parent = Optional.of(file.toAbsolutePath().getParent()).get();\n+        for (ModuleId moduleId : this.currentPackage().moduleIds()) {\n+            String moduleDirName;\n+            if (moduleId.moduleName().contains(DOT)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "981293c0e5e55d2d3b3c4a86fe6d636713e51e04"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjkzODEwMQ==", "bodyText": "ModuleId.moduleName() is public method which is not correct. Please remove that as well.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27439#discussion_r542938101", "createdAt": "2020-12-15T00:03:05Z", "author": {"login": "sameerajayasoma"}, "path": "compiler/ballerina-lang/src/main/java/io/ballerina/projects/directory/BuildProject.java", "diffHunk": "@@ -111,4 +114,38 @@ private BuildProject(ProjectEnvironmentBuilder environmentBuilder, Path projectP\n         }\n         return Optional.empty();\n     }\n+\n+    @Override\n+    public DocumentId documentId(Path file) {\n+        ProjectPaths.findPackageRoot(file);\n+        Path parent = Optional.of(file.toAbsolutePath().getParent()).get();\n+        for (ModuleId moduleId : this.currentPackage().moduleIds()) {\n+            String moduleDirName;\n+            if (moduleId.moduleName().contains(DOT)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjkzNzA0Mw=="}, "originalCommit": {"oid": "981293c0e5e55d2d3b3c4a86fe6d636713e51e04"}, "originalPosition": 37}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "72ee7510228379684215bc3e68ac6c6660edbc06", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/72ee7510228379684215bc3e68ac6c6660edbc06", "committedDate": "2020-12-15T04:48:27Z", "message": "Address review suggestions"}, "afterCommit": {"oid": "5249c8e8abf09c371c935eafff71df7f5f524561", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5249c8e8abf09c371c935eafff71df7f5f524561", "committedDate": "2020-12-15T05:04:09Z", "message": "Address review suggestions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5249c8e8abf09c371c935eafff71df7f5f524561", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5249c8e8abf09c371c935eafff71df7f5f524561", "committedDate": "2020-12-15T05:04:09Z", "message": "Address review suggestions"}, "afterCommit": {"oid": "1594be067e816aa6d6e1238d175cec9ef1513090", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1594be067e816aa6d6e1238d175cec9ef1513090", "committedDate": "2020-12-15T05:07:15Z", "message": "Address review suggestions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1594be067e816aa6d6e1238d175cec9ef1513090", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1594be067e816aa6d6e1238d175cec9ef1513090", "committedDate": "2020-12-15T05:07:15Z", "message": "Address review suggestions"}, "afterCommit": {"oid": "c61d6c6331463e6185626d11a37f0cef4a04e669", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c61d6c6331463e6185626d11a37f0cef4a04e669", "committedDate": "2020-12-15T05:47:51Z", "message": "Address review suggestions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e30ecd028c1212bdf64874bef95c51cf6232d82f", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e30ecd028c1212bdf64874bef95c51cf6232d82f", "committedDate": "2020-12-18T11:28:56Z", "message": "Update project path utils as per the review suggestions"}, "afterCommit": {"oid": "0d270ee161c66880f0805f065833d341af80a6d5", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0d270ee161c66880f0805f065833d341af80a6d5", "committedDate": "2020-12-21T06:36:51Z", "message": "Update project path utils as per the review suggestions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0d270ee161c66880f0805f065833d341af80a6d5", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0d270ee161c66880f0805f065833d341af80a6d5", "committedDate": "2020-12-21T06:36:51Z", "message": "Update project path utils as per the review suggestions"}, "afterCommit": {"oid": "30cfff21151408ce4b521d63c5fca1a7601e36e1", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/30cfff21151408ce4b521d63c5fca1a7601e36e1", "committedDate": "2020-12-21T08:22:37Z", "message": "Update project path utils as per the review suggestions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "30cfff21151408ce4b521d63c5fca1a7601e36e1", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/30cfff21151408ce4b521d63c5fca1a7601e36e1", "committedDate": "2020-12-21T08:22:37Z", "message": "Update project path utils as per the review suggestions"}, "afterCommit": {"oid": "f68675adc1a57979a103bef0c08cecd59140d8d1", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f68675adc1a57979a103bef0c08cecd59140d8d1", "committedDate": "2020-12-23T07:14:36Z", "message": "Update project path utils as per the review suggestions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9c70231b6da8305653f678718730dcb851cfa3cf", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9c70231b6da8305653f678718730dcb851cfa3cf", "committedDate": "2021-01-11T06:23:30Z", "message": "Improve project path utils"}, "afterCommit": {"oid": "012e775e468d57ca1f217d6db01edc0e3f0d0144", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/012e775e468d57ca1f217d6db01edc0e3f0d0144", "committedDate": "2021-01-11T06:40:26Z", "message": "Improve project path utils"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "012e775e468d57ca1f217d6db01edc0e3f0d0144", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/012e775e468d57ca1f217d6db01edc0e3f0d0144", "committedDate": "2021-01-11T06:40:26Z", "message": "Improve project path utils"}, "afterCommit": {"oid": "1522bb197becc7ef5280a8866014d2bb157f79d8", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1522bb197becc7ef5280a8866014d2bb157f79d8", "committedDate": "2021-01-11T06:48:52Z", "message": "Improve project path utils"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1522bb197becc7ef5280a8866014d2bb157f79d8", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1522bb197becc7ef5280a8866014d2bb157f79d8", "committedDate": "2021-01-11T06:48:52Z", "message": "Improve project path utils"}, "afterCommit": {"oid": "25c104777fe2d66140be8a7f18e5e5567239b9ab", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/25c104777fe2d66140be8a7f18e5e5567239b9ab", "committedDate": "2021-01-11T19:06:11Z", "message": "Improve project path utils"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "377c52fe54c2edc415cd40ed3891e756942c9a7f", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/377c52fe54c2edc415cd40ed3891e756942c9a7f", "committedDate": "2021-01-15T14:39:29Z", "message": "Introduce ProjectPaths utility"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82a32cfa3316634931a8361e2350c1331f283d3f", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/82a32cfa3316634931a8361e2350c1331f283d3f", "committedDate": "2021-01-15T14:39:29Z", "message": "Add an API to retrieve documentId from document path in Project"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68f101ffa1f306c522c354e931c51e1d74c3802d", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/68f101ffa1f306c522c354e931c51e1d74c3802d", "committedDate": "2021-01-15T14:39:29Z", "message": "Remove ProjectLoader#getDocumentId and refactor to use the Project"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8785519dcf7053f56d5fa93de6128bf4703f4dc6", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8785519dcf7053f56d5fa93de6128bf4703f4dc6", "committedDate": "2021-01-15T14:39:29Z", "message": "Address review suggestions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25c631517c2f34465e8fbb2a2dd5e05559f73b1f", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/25c631517c2f34465e8fbb2a2dd5e05559f73b1f", "committedDate": "2021-01-15T14:39:29Z", "message": "Update project path utils as per the review suggestions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "25c104777fe2d66140be8a7f18e5e5567239b9ab", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/25c104777fe2d66140be8a7f18e5e5567239b9ab", "committedDate": "2021-01-11T19:06:11Z", "message": "Improve project path utils"}, "afterCommit": {"oid": "eebd3f097540af3058b18d6c47affb71d3ceecba", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/eebd3f097540af3058b18d6c47affb71d3ceecba", "committedDate": "2021-01-15T14:39:29Z", "message": "Improve project path utils"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b11dc70e9cf2d70a6b16654d6321ede54b4be2da", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b11dc70e9cf2d70a6b16654d6321ede54b4be2da", "committedDate": "2021-01-15T15:06:38Z", "message": "Improve project path utils"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eebd3f097540af3058b18d6c47affb71d3ceecba", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/eebd3f097540af3058b18d6c47affb71d3ceecba", "committedDate": "2021-01-15T14:39:29Z", "message": "Improve project path utils"}, "afterCommit": {"oid": "b11dc70e9cf2d70a6b16654d6321ede54b4be2da", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b11dc70e9cf2d70a6b16654d6321ede54b4be2da", "committedDate": "2021-01-15T15:06:38Z", "message": "Improve project path utils"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98e46a3e4d5225a6c1a9102d830fc366e3edd6d2", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/98e46a3e4d5225a6c1a9102d830fc366e3edd6d2", "committedDate": "2021-01-15T15:32:12Z", "message": "Fix failing jballerina unit test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5e684115a151db53217b90b040fdf11cd3ee30b6", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5e684115a151db53217b90b040fdf11cd3ee30b6", "committedDate": "2021-01-15T15:29:46Z", "message": "Fix failing jballerina unit test"}, "afterCommit": {"oid": "98e46a3e4d5225a6c1a9102d830fc366e3edd6d2", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/98e46a3e4d5225a6c1a9102d830fc366e3edd6d2", "committedDate": "2021-01-15T15:32:12Z", "message": "Fix failing jballerina unit test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3NDQzMjMz", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27439#pullrequestreview-557443233", "createdAt": "2020-12-23T00:37:14Z", "commit": {"oid": "30cfff21151408ce4b521d63c5fca1a7601e36e1"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QwMDozNzoxNFrOIKNPoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QwMDo0MTo0MVrOIKNUBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzU3MzY2NA==", "bodyText": "What we had previously (findPackageRoot ) is better IMO.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27439#discussion_r547573664", "createdAt": "2020-12-23T00:37:14Z", "author": {"login": "sameerajayasoma"}, "path": "compiler/ballerina-lang/src/main/java/io/ballerina/projects/util/ProjectPaths.java", "diffHunk": "@@ -0,0 +1,157 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ *  in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing,\n+ *  software distributed under the License is distributed on an\n+ *  \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ *  KIND, either express or implied.  See the License for the\n+ *  specific language governing permissions and limitations\n+ *  under the License.\n+ */\n+package io.ballerina.projects.util;\n+\n+import io.ballerina.projects.Project;\n+import io.ballerina.projects.ProjectException;\n+import org.wso2.ballerinalang.compiler.util.ProjectDirConstants;\n+\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.util.Optional;\n+\n+import static io.ballerina.projects.util.ProjectConstants.BALLERINA_TOML;\n+\n+/**\n+ * Consists of static methods that may be used to obtain {@link Project}\n+ * information using file paths.\n+ *\n+ * @since 2.0.0\n+ */\n+public class ProjectPaths {\n+\n+    /**\n+     * Finds the root directory of a Ballerina package using the filepath provided.\n+     *\n+     * @param filepath ballerina file that belongs to a package\n+     * @return path to the package root directory\n+     * @throws ProjectException if the provided path is invalid or if it is a standalone ballerina file\n+     */\n+    public static Path packageRoot(Path filepath) throws ProjectException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "30cfff21151408ce4b521d63c5fca1a7601e36e1"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzU3NDc5MA==", "bodyText": "This method should simply traverse recursively until it finds a Ballerina.toml. We don't need to complicate this method IMO.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27439#discussion_r547574790", "createdAt": "2020-12-23T00:41:41Z", "author": {"login": "sameerajayasoma"}, "path": "compiler/ballerina-lang/src/main/java/io/ballerina/projects/util/ProjectPaths.java", "diffHunk": "@@ -0,0 +1,157 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ *  in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing,\n+ *  software distributed under the License is distributed on an\n+ *  \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ *  KIND, either express or implied.  See the License for the\n+ *  specific language governing permissions and limitations\n+ *  under the License.\n+ */\n+package io.ballerina.projects.util;\n+\n+import io.ballerina.projects.Project;\n+import io.ballerina.projects.ProjectException;\n+import org.wso2.ballerinalang.compiler.util.ProjectDirConstants;\n+\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.util.Optional;\n+\n+import static io.ballerina.projects.util.ProjectConstants.BALLERINA_TOML;\n+\n+/**\n+ * Consists of static methods that may be used to obtain {@link Project}\n+ * information using file paths.\n+ *\n+ * @since 2.0.0\n+ */\n+public class ProjectPaths {\n+\n+    /**\n+     * Finds the root directory of a Ballerina package using the filepath provided.\n+     *\n+     * @param filepath ballerina file that belongs to a package\n+     * @return path to the package root directory\n+     * @throws ProjectException if the provided path is invalid or if it is a standalone ballerina file\n+     */\n+    public static Path packageRoot(Path filepath) throws ProjectException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzU3MzY2NA=="}, "originalCommit": {"oid": "30cfff21151408ce4b521d63c5fca1a7601e36e1"}, "originalPosition": 45}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4794, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}