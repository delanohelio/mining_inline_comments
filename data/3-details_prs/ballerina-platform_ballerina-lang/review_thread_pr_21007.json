{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc0MTIzMjcx", "number": 21007, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQwNjoyMjowNFrODfDxyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQwNjoyMjowNFrODfDxyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMzODk0MzQ2OnYy", "diffSide": "RIGHT", "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/bir/codegen/JvmMethodGen.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQwNjoyMjowNFrOFoi4Nw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQwNjoyMjowNFrOFoi4Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODA1ODgwNw==", "bodyText": "correct to return", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21007#discussion_r378058807", "createdAt": "2020-02-12T06:22:04Z", "author": {"login": "manuranga"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/bir/codegen/JvmMethodGen.java", "diffHunk": "@@ -1028,49 +1030,52 @@ static void genYieldCheck(MethodVisitor mv, LabelGenerator labelGen, BIRBasicBlo\n         mv.visitJumpInsn(GOTO, gotoLabel);\n     }\n \n-    static void generateLambdaMethod(Map.Entry<AsyncCall, FPLoad> ins, ClassWriter cw, String lambdaName) {\n+    static void generateLambdaMethod(BIRInstruction ins, ClassWriter cw, String lambdaName) {\n         @Nilable BType lhsType;\n         String orgName;\n         String moduleName;\n         String funcName;\n         int paramIndex = 1;\n         boolean isVirtual = false;\n-        AsyncCall asyncIns = ins.getKey();\n-        FPLoad fpIns = ins.getValue();\n-        if (ins.getKey() != null) {\n+        InstructionKind kind = ins.getKind();\n+        if (kind == InstructionKind.ASYNC_CALL) {\n+            AsyncCall asyncIns = (AsyncCall) ins;\n             isVirtual = asyncIns.isVirtual;\n             lhsType = asyncIns.lhsOp != null ? asyncIns.lhsOp.variableDcl.type : null;\n             orgName = asyncIns.calleePkg.orgName.value;\n             moduleName = asyncIns.calleePkg.name.value;\n             funcName = asyncIns.name.getValue();\n-        } else {\n+        } else if (kind == InstructionKind.FP_LOAD) {\n+            FPLoad fpIns = (FPLoad) ins;\n             lhsType = fpIns.lhsOp.variableDcl.type;\n             orgName = fpIns.pkgId.orgName.value;\n             moduleName = fpIns.pkgId.name.value;\n             funcName = fpIns.funcName.getValue();\n+        } else {\n+            throw new BLangCompilerException(\"JVM lambda method generation is not supported for instruction \" +\n+                    String.format(\"%s\", ins));\n         }\n \n         boolean isExternFunction = isExternStaticFunctionCall(ins);\n         boolean isBuiltinModule = isBallerinaBuiltinModule(orgName, moduleName);\n \n         BType returnType = new BNilType();\n         if (lhsType.tag == TypeTags.FUTURE) {\n-            returnType = lhsType.returnType;\n+            returnType = lhsType;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6088c3e84c6e4f89569a7d33e4ebde6514b64159"}, "originalPosition": 51}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1227, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}