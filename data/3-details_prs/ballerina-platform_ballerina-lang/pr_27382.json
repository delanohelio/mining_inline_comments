{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0MzczNjIx", "number": 27382, "title": "Fix syntax API for receive-action", "bodyText": "Purpose\n$subject.\nFixes #26376\nApproach\nN/A\nSamples\nN/A\nRemarks\nN/A\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-12-08T11:07:14Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27382", "merged": true, "mergeCommit": {"oid": "4541acde1ba74104b6a038d4c0de7622e542ac96"}, "closed": true, "closedAt": "2021-01-05T05:25:00Z", "author": {"login": "lochana-chathura"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkGfeTgH2gAyNTM0MzczNjIxOjcwOWFjZjg2NTY4YmVmOTI5Yzg5YjBjYzEyYjc3YjlhOTg4NjkwYTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdtEBLWAFqTU2MTUyMTc0Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "709acf86568bef929c89b0cc12b77b9a988690a0", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/709acf86568bef929c89b0cc12b77b9a988690a0", "committedDate": "2020-12-08T09:12:19Z", "message": "Fix receive-action syntax API"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ce9580fa9f2adf9c2972019725927626db60c1d9", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ce9580fa9f2adf9c2972019725927626db60c1d9", "committedDate": "2020-12-08T10:58:04Z", "message": "Fix qualifiedNameRef in parseQualifiedIdentifierRhsInStmtStartBrace"}, "afterCommit": {"oid": "709acf86568bef929c89b0cc12b77b9a988690a0", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/709acf86568bef929c89b0cc12b77b9a988690a0", "committedDate": "2020-12-08T09:12:19Z", "message": "Fix receive-action syntax API"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2ODYyMDc5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27382#pullrequestreview-556862079", "createdAt": "2020-12-22T07:07:30Z", "commit": {"oid": "709acf86568bef929c89b0cc12b77b9a988690a0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQwNzowNzozMFrOIJwqKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQwNzoxMDozN1rOIJwuZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzEwNTMyMg==", "bodyText": "use createIdentifier(Location pos, Token token) method to give a name to the missing identifier. otherwise will cause a null pointer exception at the later process.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27382#discussion_r547105322", "createdAt": "2020-12-22T07:07:30Z", "author": {"login": "rdulmina"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/parser/BLangNodeTransformer.java", "diffHunk": "@@ -2203,7 +2203,18 @@ public BLangNode transform(TrapExpressionNode trapExpressionNode) {\n     @Override\n     public BLangNode transform(ReceiveActionNode receiveActionNode) {\n         BLangWorkerReceive workerReceiveExpr = (BLangWorkerReceive) TreeBuilder.createWorkerReceiveNode();\n-        workerReceiveExpr.setWorkerName(createIdentifier(receiveActionNode.receiveWorkers().name()));\n+        Node receiveWorkers = receiveActionNode.receiveWorkers();\n+        Token workerName;\n+        if (receiveWorkers.kind() == SyntaxKind.SIMPLE_NAME_REFERENCE) {\n+            workerName = ((SimpleNameReferenceNode) receiveWorkers).name();\n+        } else {\n+            // TODO: implement multiple-receive-action support\n+            Location receiveFieldsPos = getPosition(receiveWorkers);\n+            dlog.error(receiveFieldsPos, DiagnosticErrorCode.MULTIPLE_RECEIVE_ACTION_NOT_YET_SUPPORTED);\n+            workerName = NodeFactory.createMissingToken(SyntaxKind.IDENTIFIER_TOKEN,\n+                    NodeFactory.createEmptyMinutiaeList(), NodeFactory.createEmptyMinutiaeList());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "709acf86568bef929c89b0cc12b77b9a988690a0"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzEwNTkzMA==", "bodyText": "Can we add a jballerina-unit-test case to check this error", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27382#discussion_r547105930", "createdAt": "2020-12-22T07:09:10Z", "author": {"login": "rdulmina"}, "path": "compiler/ballerina-lang/src/main/resources/compiler.properties", "diffHunk": "@@ -1610,3 +1610,5 @@ error.invalid.isolated.qualifier.on.module.no.init.var.decl=\\\n \n error.binding.pattern.not.yet.supported.in.module.var.decl=\\\n   ''{0}'' binding pattern not yet supported in module variable declaration\n+\n+error.multiple.receive.action.not.yet.supported=multiple receive action not yet supported", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "709acf86568bef929c89b0cc12b77b9a988690a0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzEwNjQwNg==", "bodyText": "Don't we have parser test cases for multiple receive action?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27382#discussion_r547106406", "createdAt": "2020-12-22T07:10:37Z", "author": {"login": "rdulmina"}, "path": "compiler/ballerina-treegen/src/main/resources/syntax_tree_descriptor.json", "diffHunk": "@@ -3297,7 +3297,7 @@\n                 },\n                 {\n                     \"name\": \"receiveWorkers\",\n-                    \"type\": \"SimpleNameReferenceNode\"\n+                    \"type\": \"Node\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "709acf86568bef929c89b0cc12b77b9a988690a0"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2ODY0NjU5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27382#pullrequestreview-556864659", "createdAt": "2020-12-22T07:13:50Z", "commit": {"oid": "709acf86568bef929c89b0cc12b77b9a988690a0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQwNzoxMzo1MFrOIJwydA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQwNzoxMzo1MFrOIJwydA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzEwNzQ0NA==", "bodyText": "Any issue to track this TODO?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27382#discussion_r547107444", "createdAt": "2020-12-22T07:13:50Z", "author": {"login": "rdulmina"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/parser/BLangNodeTransformer.java", "diffHunk": "@@ -2203,7 +2203,18 @@ public BLangNode transform(TrapExpressionNode trapExpressionNode) {\n     @Override\n     public BLangNode transform(ReceiveActionNode receiveActionNode) {\n         BLangWorkerReceive workerReceiveExpr = (BLangWorkerReceive) TreeBuilder.createWorkerReceiveNode();\n-        workerReceiveExpr.setWorkerName(createIdentifier(receiveActionNode.receiveWorkers().name()));\n+        Node receiveWorkers = receiveActionNode.receiveWorkers();\n+        Token workerName;\n+        if (receiveWorkers.kind() == SyntaxKind.SIMPLE_NAME_REFERENCE) {\n+            workerName = ((SimpleNameReferenceNode) receiveWorkers).name();\n+        } else {\n+            // TODO: implement multiple-receive-action support", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "709acf86568bef929c89b0cc12b77b9a988690a0"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "084efd935bfe9d7490e28d333ff86fa52ba04f06", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/084efd935bfe9d7490e28d333ff86fa52ba04f06", "committedDate": "2020-12-23T10:23:05Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into fixes-5\n\n\u0001 Conflicts:\n\u0001\tcompiler/ballerina-lang/src/main/java/org/ballerinalang/util/diagnostic/DiagnosticErrorCode.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49d17382d4e4597c5acdc8139136bbca608a3264", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/49d17382d4e4597c5acdc8139136bbca608a3264", "committedDate": "2021-01-04T06:32:43Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into fixes-5"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c06b959885c8a886b230b1a7f491af5822b60379", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c06b959885c8a886b230b1a7f491af5822b60379", "committedDate": "2021-01-04T07:21:55Z", "message": "Add unit test to check multiple receive action error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYxNTIxNzQz", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27382#pullrequestreview-561521743", "createdAt": "2021-01-05T05:24:44Z", "commit": {"oid": "c06b959885c8a886b230b1a7f491af5822b60379"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4760, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}