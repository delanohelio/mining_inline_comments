{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1NjE2OTg0", "number": 24917, "title": "Fix StringLiteral as expression lhs", "bodyText": "Purpose\nWrapped stringliteral token with basicLiteralNode when it is used as expressionLhs\nFixes #24377\nApproach\nWrapped the StringLiteralToken with basicLiteralToken when its used as an expression LHS. Added parser tests to test for this.\nSamples\n\nn/a\n\nRemarks\n\nn/a\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-07-23T10:29:17Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24917", "merged": true, "mergeCommit": {"oid": "423394690a9d2f9c9ecad52f0c98c27b8c1ccc01"}, "closed": true, "closedAt": "2020-07-24T07:36:09Z", "author": {"login": "m36dot"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3rQihAH2gAyNDU1NjE2OTg0OjUwZDA1YjY5YTAyZTQxMDE2MzQwODMzYWQ4MGFhMzhjNDdjYmIzNTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3_AA0gFqTQ1NDY4NjIxMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "50d05b69a02e41016340833ad80aa38c47cbb354", "author": {"user": {"login": "m36dot", "name": "Saif Abdul Cassim"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/50d05b69a02e41016340833ad80aa38c47cbb354", "committedDate": "2020-07-23T08:35:54Z", "message": "Fix parseStringLiteral\n\nWrapped the stringliteral token with basicliteraltoken"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f2a144b796be447c03371947cdd025568e64e0e", "author": {"user": {"login": "m36dot", "name": "Saif Abdul Cassim"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3f2a144b796be447c03371947cdd025568e64e0e", "committedDate": "2020-07-23T10:24:20Z", "message": "Fix parseStringLiteral\n\nChanged StringLiteral being returned as a token.\nwrapped it with basicLiteralNode for expressionlhs\n and added tests."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9e7d99583746c96a130063ce640b5d8186fe940", "author": {"user": {"login": "m36dot", "name": "Saif Abdul Cassim"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c9e7d99583746c96a130063ce640b5d8186fe940", "committedDate": "2020-07-23T10:42:53Z", "message": "Fix checkStyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0NjM1NDI4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24917#pullrequestreview-454635428", "createdAt": "2020-07-24T05:02:22Z", "commit": {"oid": "c9e7d99583746c96a130063ce640b5d8186fe940"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQwNTowMjoyMlrOG2jMfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQwNTowNTo1OVrOG2jPJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTg1MjkyNQ==", "bodyText": "This can break things. Inside the below if-condition,  a SpecificFieldNode is created. But for that, key is expected to be a token.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24917#discussion_r459852925", "createdAt": "2020-07-24T05:02:22Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java", "diffHunk": "@@ -15870,6 +15872,7 @@ private STNode parseStatementStartingBracedListFirstMember() {\n                 return parseIdentifierRhsInStmtStartingBrace(readonlyKeyword);\n             case STRING_LITERAL:\n                 STNode key = parseStringLiteral();\n+                key = parseBasicLiteral((STToken) key);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9e7d99583746c96a130063ce640b5d8186fe940"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTg1MzUyMQ==", "bodyText": "Having a method for a single line of code sounds not correct. It also adds a runtime over-head of an additional function call.\nSince this is the most prominent usage, shall we keep this as is, and only change the place where the change is needed?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24917#discussion_r459853521", "createdAt": "2020-07-24T05:05:30Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java", "diffHunk": "@@ -4936,13 +4936,15 @@ private boolean isEndOfExpression(SyntaxKind tokenKind, boolean isRhsExpr, boole\n         }\n     }\n \n+    private STNode parseBasicLiteral() {\n+        return parseBasicLiteral(consume());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c9e7d99583746c96a130063ce640b5d8186fe940"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTg1MzYwNw==", "bodyText": "Let's add a test case for that as well.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24917#discussion_r459853607", "createdAt": "2020-07-24T05:05:59Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java", "diffHunk": "@@ -15870,6 +15872,7 @@ private STNode parseStatementStartingBracedListFirstMember() {\n                 return parseIdentifierRhsInStmtStartingBrace(readonlyKeyword);\n             case STRING_LITERAL:\n                 STNode key = parseStringLiteral();\n+                key = parseBasicLiteral((STToken) key);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTg1MjkyNQ=="}, "originalCommit": {"oid": "c9e7d99583746c96a130063ce640b5d8186fe940"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bef534797fb69d8d4368d5a70b1c4a2424a1a3c1", "author": {"user": {"login": "m36dot", "name": "Saif Abdul Cassim"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bef534797fb69d8d4368d5a70b1c4a2424a1a3c1", "committedDate": "2020-07-24T06:16:17Z", "message": "Add test for callstmt\n\nAdd tests for call stmt with method call. Also changed\nwhere the string literal gets wrapped by basicliteral"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0Njg2MjEy", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24917#pullrequestreview-454686212", "createdAt": "2020-07-24T07:35:57Z", "commit": {"oid": "bef534797fb69d8d4368d5a70b1c4a2424a1a3c1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3699, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}