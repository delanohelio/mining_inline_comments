{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgyNzg0NzU3", "number": 25690, "title": "Add type information to assertion error message", "bodyText": "Purpose\n\nThis PR adds type information to assertion error message when there is a type mismatch. This will help users to identify the reason for assertion failure more easily.\n\nFixes part 1 of #12892\nApproach\nSamples\n> test:assertEquals(1,\"1\");\n\n        [fail] testFunction:\n            Assertion Failed!\n                expected: <string> '1'\n                actual  : <int> '1'\n\n>  Person p1 = new;\n    Employee p2 = new;\n    test:assertExactEquals(p1,p2);\n\n        [fail] testFunction:\n            Assertion Failed!\n                expected: <Employee> 'object diffmod:Employee'\n                actual  : <Person> 'object diffmod:Person'\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-09-09T11:47:06Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25690", "merged": true, "mergeCommit": {"oid": "f949e8d932297928930f46d815d8ec1826072528"}, "closed": true, "closedAt": "2020-09-15T15:12:21Z", "author": {"login": "Dilhasha"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHKqeagH2gAyNDgyNzg0NzU3OjI4M2M1NmJiMTg1ZmFlZTU4NTk2ZTQ5ZjU5MWQzZTkyMTc4ZGUxYzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJJSyMgFqTQ4ODc4OTg2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "283c56bb185faee58596e49f591d3e92178de1c3", "author": {"user": {"login": "Dilhasha", "name": "Fathima Dilhasha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/283c56bb185faee58596e49f591d3e92178de1c3", "committedDate": "2020-09-09T11:40:09Z", "message": "Add type information to assertion error message"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0OTM4NDg3", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25690#pullrequestreview-484938487", "createdAt": "2020-09-09T12:05:23Z", "commit": {"oid": "283c56bb185faee58596e49f591d3e92178de1c3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxMjowNToyNFrOHPEH9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxMjowNToyNFrOHPEH9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTU1ODI2MQ==", "bodyText": "Does BallerinaTypeCheck fit into natives.io? Cant it be considered part of core?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25690#discussion_r485558261", "createdAt": "2020-09-09T12:05:24Z", "author": {"login": "Ibaqu"}, "path": "misc/testerina/modules/testerina-core/src/main/java/org/ballerinalang/testerina/natives/io/BallerinaTypeCheck.java", "diffHunk": "@@ -0,0 +1,36 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.testerina.natives.io;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "283c56bb185faee58596e49f591d3e92178de1c3"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0OTQyODE2", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25690#pullrequestreview-484942816", "createdAt": "2020-09-09T12:11:22Z", "commit": {"oid": "283c56bb185faee58596e49f591d3e92178de1c3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f51a7f61a08c0e7be71cf34fb10284f61d29ee3", "author": {"user": {"login": "Dilhasha", "name": "Fathima Dilhasha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8f51a7f61a08c0e7be71cf34fb10284f61d29ee3", "committedDate": "2020-09-10T04:48:23Z", "message": "Move BallerinaTypeCheck to testerina core"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2cbf90ffab825ef015d50775afd0f9e99cc87ea", "author": {"user": {"login": "Dilhasha", "name": "Fathima Dilhasha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d2cbf90ffab825ef015d50775afd0f9e99cc87ea", "committedDate": "2020-09-10T04:54:29Z", "message": "Improve error messages"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8fb713aadf83c4a402bb64f3925be593a44f929c", "author": {"user": {"login": "Dilhasha", "name": "Fathima Dilhasha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8fb713aadf83c4a402bb64f3925be593a44f929c", "committedDate": "2020-09-10T07:07:53Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into assertions-diff"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1NjQxMTkw", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25690#pullrequestreview-485641190", "createdAt": "2020-09-10T07:11:06Z", "commit": {"oid": "d2cbf90ffab825ef015d50775afd0f9e99cc87ea"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1393f561e42bbb546067aab406e2ac0036ea97cd", "author": {"user": {"login": "Dilhasha", "name": "Fathima Dilhasha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1393f561e42bbb546067aab406e2ac0036ea97cd", "committedDate": "2020-09-10T10:55:28Z", "message": "Add testcases to evaluate error messages"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e9727648a67b945f1b39b9a8a5eda5c2f70c84c6", "author": {"user": {"login": "Dilhasha", "name": "Fathima Dilhasha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e9727648a67b945f1b39b9a8a5eda5c2f70c84c6", "committedDate": "2020-09-10T08:16:38Z", "message": "Improve test cases for assertion errors"}, "afterCommit": {"oid": "1393f561e42bbb546067aab406e2ac0036ea97cd", "author": {"user": {"login": "Dilhasha", "name": "Fathima Dilhasha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1393f561e42bbb546067aab406e2ac0036ea97cd", "committedDate": "2020-09-10T10:55:28Z", "message": "Add testcases to evaluate error messages"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bffa408c129c9012ac5e8ce819d33242f61f6a1e", "author": {"user": {"login": "Dilhasha", "name": "Fathima Dilhasha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bffa408c129c9012ac5e8ce819d33242f61f6a1e", "committedDate": "2020-09-11T08:05:51Z", "message": "Add max length check for assertion arguments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f06468cb1a8664c2d5feb5bf2f906a1be521dc04", "author": {"user": {"login": "Dilhasha", "name": "Fathima Dilhasha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f06468cb1a8664c2d5feb5bf2f906a1be521dc04", "committedDate": "2020-09-11T08:36:14Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into assertions-diff"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3MzEyNTQw", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25690#pullrequestreview-487312540", "createdAt": "2020-09-13T14:32:52Z", "commit": {"oid": "1393f561e42bbb546067aab406e2ac0036ea97cd"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e4ac344d6d89e5c4674eda49cc2ae6a1b045752", "author": {"user": {"login": "Dilhasha", "name": "Fathima Dilhasha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3e4ac344d6d89e5c4674eda49cc2ae6a1b045752", "committedDate": "2020-09-14T05:59:32Z", "message": "Improve assertion error messages"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1b544fdeed9b41e73648991484fde3af38a1d78b", "author": {"user": {"login": "Dilhasha", "name": "Fathima Dilhasha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1b544fdeed9b41e73648991484fde3af38a1d78b", "committedDate": "2020-09-14T03:53:55Z", "message": "Improve assertion error messages"}, "afterCommit": {"oid": "3e4ac344d6d89e5c4674eda49cc2ae6a1b045752", "author": {"user": {"login": "Dilhasha", "name": "Fathima Dilhasha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3e4ac344d6d89e5c4674eda49cc2ae6a1b045752", "committedDate": "2020-09-14T05:59:32Z", "message": "Improve assertion error messages"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4Mzc4NzEx", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25690#pullrequestreview-488378711", "createdAt": "2020-09-15T06:58:42Z", "commit": {"oid": "3e4ac344d6d89e5c4674eda49cc2ae6a1b045752"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwNjo1ODo0M1rOHRzbvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwNjo1ODo0M1rOHRzbvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODQzMDUyNw==", "bodyText": "This is too much to be effective shall we use 80 which is usually the default character width of a terminal. Or we can do 180 as per https://en.wikipedia.org/wiki/Characters_per_line", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25690#discussion_r488430527", "createdAt": "2020-09-15T06:58:43Z", "author": {"login": "hevayo"}, "path": "misc/testerina/modules/testerina-core/src/main/ballerina/src/test/assert.bal", "diffHunk": "@@ -19,6 +19,7 @@ import ballerina/java;\n const string assertFailureErrorCategory = \"assert-failure\";\n const string arraysNotEqualMessage = \"Arrays are not equal\";\n const string arrayLengthsMismatchMessage = \" (Array lengths are not the same)\";\n+const int maxArgLength = 2048;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3e4ac344d6d89e5c4674eda49cc2ae6a1b045752"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f2ae63a5f283edbc33e2c8470bad5bb587ca7e5", "author": {"user": {"login": "Dilhasha", "name": "Fathima Dilhasha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8f2ae63a5f283edbc33e2c8470bad5bb587ca7e5", "committedDate": "2020-09-15T07:21:42Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into assertions-diff"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef1a234f7677dd123ed21a32ea746b181f1df1c3", "author": {"user": {"login": "Dilhasha", "name": "Fathima Dilhasha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ef1a234f7677dd123ed21a32ea746b181f1df1c3", "committedDate": "2020-09-15T14:03:31Z", "message": "Update character limit"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4Nzg5ODYw", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25690#pullrequestreview-488789860", "createdAt": "2020-09-15T15:12:13Z", "commit": {"oid": "ef1a234f7677dd123ed21a32ea746b181f1df1c3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4692, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}