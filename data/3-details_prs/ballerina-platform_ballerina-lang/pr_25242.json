{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY2OTk3Mjk0", "number": 25242, "title": "Use ListNode for all delimited lists in the parser", "bodyText": "Purpose\n$subject.\nFixes #25032\nApproach\nN/A\nSamples\nN/A\nRemarks\nN/A\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-08-12T20:42:17Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25242", "merged": true, "mergeCommit": {"oid": "640faec5f5c30ed0bd06d43b4bd5fd1885b12574"}, "closed": true, "closedAt": "2020-08-13T11:30:58Z", "author": {"login": "lochana-chathura"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc90AfsAH2gAyNDY2OTk3Mjk0OjcyZDhlNDliYjlkNjgwMDA1MDhiMDI1MTIyZDgxN2FhNGEyNTlkYTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-eVmgAFqTQ2NjY3NDgzMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "72d8e49bb9d68000508b025122d817aa4a259da5", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/72d8e49bb9d68000508b025122d817aa4a259da5", "committedDate": "2020-08-11T10:11:04Z", "message": "Use NodeList for service listeners"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f2650f639223fb6ddae28bd7f74ba52bc9cae5f", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0f2650f639223fb6ddae28bd7f74ba52bc9cae5f", "committedDate": "2020-08-11T11:55:15Z", "message": "Update assertions with service declaration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ebf201e1d3787f21da556fd79970126036c2130", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4ebf201e1d3787f21da556fd79970126036c2130", "committedDate": "2020-08-12T13:35:41Z", "message": "Use NodeList for function parameters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a188f8717bf0140bdf51ebfbe9ce4605ae55d0b", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2a188f8717bf0140bdf51ebfbe9ce4605ae55d0b", "committedDate": "2020-08-12T13:49:37Z", "message": "Update assertions with function parameters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b140bc1ba6219bb23dcaa7b0fc1626a6a0df2cfd", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b140bc1ba6219bb23dcaa7b0fc1626a6a0df2cfd", "committedDate": "2020-08-12T19:32:19Z", "message": "Use NodeList for import version number"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d3148c0e87a526a277c2789eff57dbd365824a2", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/6d3148c0e87a526a277c2789eff57dbd365824a2", "committedDate": "2020-08-12T19:39:34Z", "message": "Update assertions with import version number"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "400c6aa027a3565e195619781d8ed3ab038d2f83", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/400c6aa027a3565e195619781d8ed3ab038d2f83", "committedDate": "2020-08-12T20:18:28Z", "message": "Fix VariableDeclarationNode metadata parsing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e89bac6be3681b4ede816e07ab63ce8cb70d5be", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0e89bac6be3681b4ede816e07ab63ce8cb70d5be", "committedDate": "2020-08-12T20:38:12Z", "message": "Refactor code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1aa73265549f45ca8395de84cb6923db33afdfac", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1aa73265549f45ca8395de84cb6923db33afdfac", "committedDate": "2020-08-12T21:14:58Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into fix-delimited-lists"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "794ac0d411ea4a2bc2e7768c36a0464d32dac744", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/794ac0d411ea4a2bc2e7768c36a0464d32dac744", "committedDate": "2020-08-13T06:13:42Z", "message": "Update FormattingTreeModifier for syntax tree changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2NDgwNTQz", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25242#pullrequestreview-466480543", "createdAt": "2020-08-13T06:36:21Z", "commit": {"oid": "794ac0d411ea4a2bc2e7768c36a0464d32dac744"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QwNjozNjoyMVrOG_96bQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QwNjozNjoyMVrOG_96bQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTcyNzg1Mw==", "bodyText": "Found a bug in TreeModifier.java. \n  \n    \n      ballerina-lang/compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/syntax/tree/TreeModifier.java\n    \n    \n        Lines 3100 to 3101\n      in\n      c4f3e10\n    \n    \n    \n    \n\n        \n          \n           protected <T extends Node> SeparatedNodeList<T> modifySeparatedNodeList(SeparatedNodeList<T> nodeList) { \n        \n\n        \n          \n               return modifyGenericNodeList(nodeList, SeparatedNodeList::new); \n        \n    \n  \n\n\n\n\nHere we have used modifyGenericNodeList() which only iterates through the alternative elements as we are parsing a SeparatedNodeList object, not  NodeList\n\n\nSo when there's no modification that method simply returns the original SeparatedNodeList which is fine.\nBut when there's a modification it return SeparatedNodeList which does not contain separators as no processing has been added with getSeparator().\n\n\nSubsequently, when we are formatting and when there's a modification, separators just get vanished.\n\n\n@sameerajayasoma @SupunS shall I create an issue for the root cause?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25242#discussion_r469727853", "createdAt": "2020-08-13T06:36:21Z", "author": {"login": "lochana-chathura"}, "path": "misc/formatter/modules/formatter-core/src/main/java/org/ballerinalang/formatter/core/FormattingTreeModifier.java", "diffHunk": "@@ -278,7 +258,7 @@ public FunctionSignatureNode transform(FunctionSignatureNode functionSignatureNo\n         Token openPara = getToken(functionSignatureNode.openParenToken());\n         Token closePara = getToken(functionSignatureNode.closeParenToken());\n \n-        NodeList<ParameterNode> parameters = this.modifyNodeList(functionSignatureNode.parameters());\n+        SeparatedNodeList<ParameterNode> parameters = this.modifySeparatedNodeList(functionSignatureNode.parameters());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "794ac0d411ea4a2bc2e7768c36a0464d32dac744"}, "originalPosition": 56}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d136c0fb829ccd82bc5025b53e65122ffeee51df", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d136c0fb829ccd82bc5025b53e65122ffeee51df", "committedDate": "2020-08-13T06:53:46Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into fix-delimited-lists"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1fd03923d6bba4555ce827a1c79d25294bd151ad", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1fd03923d6bba4555ce827a1c79d25294bd151ad", "committedDate": "2020-08-13T07:39:34Z", "message": "Update failing assertions and relocate QuotedIdentifierTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8e8c25745ccccc9f98ca9875d689460943da55f", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c8e8c25745ccccc9f98ca9875d689460943da55f", "committedDate": "2020-08-13T10:26:13Z", "message": "Fix jballerina-unit-test failures due to upstream changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2Njc0ODMz", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25242#pullrequestreview-466674833", "createdAt": "2020-08-13T11:29:18Z", "commit": {"oid": "c8e8c25745ccccc9f98ca9875d689460943da55f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3662, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}