{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3MDczMjY5", "number": 21154, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQwMjo0NTo1MVrODiM1Wg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQwMjo0NTo1MVrODiM1Wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3MTg4NDQyOnYy", "diffSide": "RIGHT", "path": "stdlib/grpc/src/main/java/org/ballerinalang/net/grpc/ServicesBuilderUtils.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQwMjo0NTo1MVrOFtUspQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQwMjo0NTo1MVrOFtUspQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzA2OTM0OQ==", "bodyText": "If we return the providedName from L87, we would not need this null check. WDYT?\nIf so, serviceName variable can be also removed", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21154#discussion_r383069349", "createdAt": "2020-02-24T02:45:51Z", "author": {"login": "chamil321"}, "path": "stdlib/grpc/src/main/java/org/ballerinalang/net/grpc/ServicesBuilderUtils.java", "diffHunk": "@@ -69,16 +69,32 @@ public static ServerServiceDefinition getServiceDefinition(BRuntime runtime, Obj\n         if (fileDescriptor == null) {\n             throw new GrpcServerException(\"Couldn't find the service descriptor.\");\n         }\n-        String serviceTypeName = service.getType().getName(); // typeName format: <name>$$<type>$$<version>\n-        String[] splitValues = serviceTypeName.split(\"\\\\$\\\\$\");\n-        String serviceName = splitValues[0];\n+        String serviceName = getServiceName(service);\n         Descriptors.ServiceDescriptor serviceDescriptor = fileDescriptor.findServiceByName(serviceName);\n         if (serviceDescriptor == null) {\n             throw new GrpcServerException(\"Couldn't find the service descriptor for the service: \" + serviceName);\n         }\n         return getServiceDefinition(runtime, service, serviceDescriptor);\n     }\n-    \n+\n+    private static String getServiceName(ObjectValue service) {\n+        String serviceName = null;\n+        Object serviceConfigData = service.getType().getAnnotation(\"ballerina/grpc:ServiceConfig\");\n+        if (serviceConfigData != null) {\n+            MapValue<String, Object> configMap = (MapValue) serviceConfigData;\n+            String providedName = configMap.getStringValue(\"name\");\n+            if (providedName != null && !providedName.isEmpty()) {\n+                serviceName = providedName;\n+            }\n+        }\n+        if (serviceName == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48a87528f2b3053fa9a3c116329fb1aa8dd64466"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1096, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}