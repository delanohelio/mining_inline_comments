{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3MzMzNjc4", "number": 20747, "title": "Prevent compiling of test bal files when not required", "bodyText": "Purpose\nCurrently, the --skip-tests flag in the Ballerina build command compiles the tests even though they are not executed. This PR changes this behavior to ensure that the tests are not compiled when the     --skip-tests flag is used.\nThe existing implementation compiles the tests in the run command as well. This is also removed through this PR.\nAn integration test is added to check if the compilation of tests is skipped when the --skip-tests flag is used in the build command.\nFixes #19229\nApproach\nThe TEST_ENABLED parameter of the BuildCommand and the RunCommand are changed to reflect the following requirements.\n\nBuild Command - compiles test cases when --skip-tests flag is not used\nBuild Command - does not compile test cases when --skip-tests flag is used\nRun Command - does not compile test cases\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-01-27T06:32:06Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20747", "merged": true, "mergeCommit": {"oid": "5a574253ebf8b0335efcd7ba55a8d299294c169f"}, "closed": true, "closedAt": "2020-02-10T11:47:08Z", "author": {"login": "IrushiL"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-WTF-AH2gAyMzY3MzMzNjc4OmFhZWI3Njk2ZjJmYzhhYjEyNjFhN2VjNjljZWZkZDgyMmMzM2U0Nzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcB621wAH2gAyMzY3MzMzNjc4OjY4NmJkY2E3NTQ3NWQ0YWI5NWRjNTFlYmI5Zjk3MDMyMWFhMzVjNDE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "aaeb7696f2fc8ab1261a7ec69cefdd822c33e477", "author": {"user": {"login": "IrushiL", "name": "Irushi Liyanage"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/aaeb7696f2fc8ab1261a7ec69cefdd822c33e477", "committedDate": "2020-01-27T05:57:00Z", "message": "Prevent compiling of test bal fils when not required"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MTk0NTc5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20747#pullrequestreview-349194579", "createdAt": "2020-01-28T08:28:32Z", "commit": {"oid": "aaeb7696f2fc8ab1261a7ec69cefdd822c33e477"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e97335a6bc8fcd876c61e736784ad3c3e6eae29", "author": {"user": {"login": "IrushiL", "name": "Irushi Liyanage"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9e97335a6bc8fcd876c61e736784ad3c3e6eae29", "committedDate": "2020-01-30T07:48:34Z", "message": "Exclude the resources directory when retrieving source files"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzNjgwMTU5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20747#pullrequestreview-353680159", "createdAt": "2020-02-05T12:33:01Z", "commit": {"oid": "9e97335a6bc8fcd876c61e736784ad3c3e6eae29"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxMjozMzowMlrOFl2I3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxMjozMzowMlrOFl2I3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTIyODYzNg==", "bodyText": "Why we are throwing IOException from here?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20747#discussion_r375228636", "createdAt": "2020-02-05T12:33:02Z", "author": {"login": "anupama-pathirage"}, "path": "cli/ballerina-packerina/src/test/java/org/ballerinalang/packerina/cmd/BuildCommandTest.java", "diffHunk": "@@ -744,6 +744,23 @@ public void testBuildCommandSingleFileWithOutput() throws IOException {\n         Path execJar = tmpDir.resolve(\"sample.jar\");\n         Assert.assertTrue(Files.exists(execJar), \"Check if jar gets created\");\n     }\n+\n+    @Test(description = \"Test the --skip-tests flag in the build command to ensure it avoids compiling tests\")\n+    public void testBuildWithSkipTests() throws IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e97335a6bc8fcd876c61e736784ad3c3e6eae29"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzNjgxMTgz", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20747#pullrequestreview-353681183", "createdAt": "2020-02-05T12:34:45Z", "commit": {"oid": "9e97335a6bc8fcd876c61e736784ad3c3e6eae29"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxMjozNDo0NVrOFl2L7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxMjozNDo0NVrOFl2L7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTIyOTQyMA==", "bodyText": "Do we need to throw IOException from here?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20747#discussion_r375229420", "createdAt": "2020-02-05T12:34:45Z", "author": {"login": "anupama-pathirage"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/packaging/converters/FilterSearch.java", "diffHunk": "@@ -47,7 +47,7 @@ public FileVisitResult visitFile(Object file, BasicFileAttributes attrs) throws\n      */\n     private boolean isExcluded(Path path) throws IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9e97335a6bc8fcd876c61e736784ad3c3e6eae29"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "686bdca75475d4ab95dc51ebb9f970321aa35c41", "author": {"user": {"login": "IrushiL", "name": "Irushi Liyanage"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/686bdca75475d4ab95dc51ebb9f970321aa35c41", "committedDate": "2020-02-07T08:14:24Z", "message": "Fix review comments"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4382, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}