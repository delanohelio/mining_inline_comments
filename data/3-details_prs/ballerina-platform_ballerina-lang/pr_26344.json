{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzMTM4NjY2", "number": 26344, "title": "Validate missing key expr in invalid member access expressions in parser", "bodyText": "Purpose\n$Subject\nFixes #25432\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-10-14T06:20:40Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26344", "merged": true, "mergeCommit": {"oid": "f5f0aa47214b5ffd10928cd9b6aaf21f2c08600b"}, "closed": true, "closedAt": "2020-10-15T03:36:04Z", "author": {"login": "rdulmina"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSXCAmgH2gAyNTAzMTM4NjY2OjY2NjRkNDViNTIzZjY5ZjJjNTAzMGZlODgyNDEyY2M2ODVjY2NkZTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSpUHUgFqTUwODkxMzk1NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6664d45b523f69f2c5030fe882412cc685cccde3", "author": {"user": {"login": "rdulmina", "name": "Dulmina Renuke"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/6664d45b523f69f2c5030fe882412cc685cccde3", "committedDate": "2020-10-14T06:17:53Z", "message": "Validate missing key expr in invalid member access expressions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5df89ffea9e6e94becabfe2899f1fc80d8241ff5", "author": {"user": {"login": "rdulmina", "name": "Dulmina Renuke"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5df89ffea9e6e94becabfe2899f1fc80d8241ff5", "committedDate": "2020-10-14T06:18:20Z", "message": "Jballerina unit test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1703da5fae798944b58df53f7801ba5933bdb4a7", "author": {"user": {"login": "rdulmina", "name": "Dulmina Renuke"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1703da5fae798944b58df53f7801ba5933bdb4a7", "committedDate": "2020-10-14T10:58:30Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into bug-fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4Mjg2NjEy", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26344#pullrequestreview-508286612", "createdAt": "2020-10-14T12:22:26Z", "commit": {"oid": "1703da5fae798944b58df53f7801ba5933bdb4a7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMjoyMjoyNlrOHhQRvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMjoyMjoyNlrOHhQRvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDYzMTc0MQ==", "bodyText": "Inside the same method, there seems to be multiple places where we call STNodeFactory.createNodeList(member); with member possibly being null.\nShall we fix those as well? :)", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26344#discussion_r504631741", "createdAt": "2020-10-14T12:22:26Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerina/compiler/internal/parser/BallerinaParser.java", "diffHunk": "@@ -14165,7 +14165,15 @@ private STNode parseTypedBindingPatternOrMemberAccessRhs(STNode typeDescOrExpr,\n             case CLOSE_BRACE_TOKEN: // T[a]}\n             case COMMA_TOKEN:// T[a],\n                 if (context == ParserRuleContext.AMBIGUOUS_STMT) {\n-                    keyExpr = STNodeFactory.createNodeList(member);\n+                    if (member == null) {\n+                        STNode missingVarRef = STNodeFactory.createSimpleNameReferenceNode(\n+                                SyntaxErrors.createMissingToken(SyntaxKind.IDENTIFIER_TOKEN));\n+                        keyExpr = STNodeFactory.createNodeList(missingVarRef);\n+                        closeBracket = SyntaxErrors.addDiagnostic(closeBracket,\n+                                DiagnosticErrorCode.ERROR_MISSING_KEY_EXPR_IN_MEMBER_ACCESS_EXPR);\n+                    } else {\n+                        keyExpr = STNodeFactory.createNodeList(member);\n+                    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1703da5fae798944b58df53f7801ba5933bdb4a7"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4886671e01aa82b982b43b1ca59e73cd71d1d293", "author": {"user": {"login": "rdulmina", "name": "Dulmina Renuke"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4886671e01aa82b982b43b1ca59e73cd71d1d293", "committedDate": "2020-10-14T15:15:26Z", "message": "Handle other places where key expr can be null"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4OTEzOTU0", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26344#pullrequestreview-508913954", "createdAt": "2020-10-15T03:35:57Z", "commit": {"oid": "4886671e01aa82b982b43b1ca59e73cd71d1d293"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4358, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}