{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2MTE4MDg3", "number": 23656, "title": "Fix system and xslt module errors", "bodyText": "Purpose\n\n$Title\n\nFixes #23634", "createdAt": "2020-06-01T17:31:25Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23656", "merged": true, "mergeCommit": {"oid": "2f9e508c135e800df1b1dcc65aaa59bcf06a4ad6"}, "closed": true, "closedAt": "2020-06-03T09:11:59Z", "author": {"login": "chamil321"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnDruOAH2gAyNDI2MTE4MDg3Ojg1ZmFiMDk4MGEyODkyYWQ1YWIwNzY1NGE4MjQzOTkzZDQ1YjRhNjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnlzXJgFqTQyMzM2NDI3Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "85fab0980a2892ad5ab07654a8243993d45b4a60", "author": {"user": {"login": "chamil321", "name": "Chamil Elladeniya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/85fab0980a2892ad5ab07654a8243993d45b4a60", "committedDate": "2020-06-01T17:26:36Z", "message": "Fix system module errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58eb07280c58daa519eee74cdf1caab0319a5f80", "author": {"user": {"login": "chamil321", "name": "Chamil Elladeniya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/58eb07280c58daa519eee74cdf1caab0319a5f80", "committedDate": "2020-06-02T07:09:31Z", "message": "Fix xslt module"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "48350835d94d5e368a127b2e3d1ef8b9076f7900", "author": {"user": {"login": "chamil321", "name": "Chamil Elladeniya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/48350835d94d5e368a127b2e3d1ef8b9076f7900", "committedDate": "2020-06-02T05:35:01Z", "message": "Fix Xslt module"}, "afterCommit": {"oid": "58eb07280c58daa519eee74cdf1caab0319a5f80", "author": {"user": {"login": "chamil321", "name": "Chamil Elladeniya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/58eb07280c58daa519eee74cdf1caab0319a5f80", "committedDate": "2020-06-02T07:09:31Z", "message": "Fix xslt module"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b84938e60cc8149551f0fb931ed9e5064901f7b", "author": {"user": {"login": "chamil321", "name": "Chamil Elladeniya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7b84938e60cc8149551f0fb931ed9e5064901f7b", "committedDate": "2020-06-02T07:51:46Z", "message": "Add API to create distinct error with cause"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMjUwNzgz", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23656#pullrequestreview-423250783", "createdAt": "2020-06-03T06:26:47Z", "commit": {"oid": "7b84938e60cc8149551f0fb931ed9e5064901f7b"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNjoyNjo0N1rOGeNrZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwNjozNjoyNFrOGeN6Lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMzNDU2Nw==", "bodyText": "Do we need another constructor taking:\n\ntypeIdName\npkgId\nmessage\ncause\nerror detail type\n\nMaybe we can add it when there is a requirement for it.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23656#discussion_r434334567", "createdAt": "2020-06-03T06:26:47Z", "author": {"login": "rdhananjaya"}, "path": "bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/BallerinaErrors.java", "diffHunk": "@@ -99,15 +100,32 @@ public static ErrorValue createError(BType type, BString message, BString detail\n         return new ErrorValue(type, message, null, detailMap);\n     }\n \n+    public static ErrorValue createDistinctError(String typeIdName, BPackage typeIdPkg, String message) {\n+        return createDistinctError(typeIdName, typeIdPkg, message, new MapValueImpl<>(BTypes.typeErrorDetail));\n+    }\n \n-    public static ErrorValue createDistinctError(String errorCode, String typeIdName, BPackage typeIdPkg,\n+    public static ErrorValue createDistinctError(String typeIdName, BPackage typeIdPkg, String message,\n                                                  MapValue<BString, Object> detailRecord) {\n-        ErrorValue error = createError(errorCode, detailRecord);\n+        ErrorValue error = createError(message, detailRecord);\n+        setTypeId(typeIdName, typeIdPkg, error);\n+        return error;\n+    }\n+\n+    public static ErrorValue createDistinctError(String typeIdName, BPackage typeIdPkg, String message,\n+                                                 ErrorValue cause) {\n+        MapValueImpl<Object, Object> details = new MapValueImpl<>(BTypes.typeErrorDetail);\n+        ErrorValue error = new ErrorValue(new BErrorType(TypeConstants.ERROR, BTypes.typeError.getPackage(),\n+                                                         TypeChecker.getType(details)),\n+                                          StringUtils.fromString(message), cause, details);\n+        setTypeId(typeIdName, typeIdPkg, error);\n+        return error;\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b84938e60cc8149551f0fb931ed9e5064901f7b"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMzODAxMw==", "bodyText": "It's is required that the typeId to be same name as the defined type for distinct types.\nFor example type A distinct error, here typeId of A is A.\nPlease refer the spec, in the spec the value we call typeId is referred to as local id.\nhttps://ballerina.io/ballerina-spec/spec.html#section_5.1.3", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23656#discussion_r434338013", "createdAt": "2020-06-03T06:35:33Z", "author": {"login": "rdhananjaya"}, "path": "stdlib/system/src/main/java/org/ballerinalang/stdlib/system/utils/SystemUtils.java", "diffHunk": "@@ -49,41 +47,31 @@\n     private static final String UNKNOWN_MESSAGE = \"Unknown Error\";\n \n     /**\n-     * Returns error object for input reason.\n-     * Error type is generic ballerina error type. This utility to construct error object from message.\n+     * Returns error object  with message. Error type is generic ballerina error type. This utility to construct\n+     * error object from message.\n      *\n-     * @param error Reason for creating the error object. If the reason is null, \"UNKNOWN\" sets by\n-     *              default.\n+     * @param typeId The string type ID of the particular error object. If the typeId is  null, \"UNKNOWN\" sets by", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b84938e60cc8149551f0fb931ed9e5064901f7b"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMzODM1MA==", "bodyText": "The issue is we don't have a way to enforce this when we are creating error values programmatically in Java.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23656#discussion_r434338350", "createdAt": "2020-06-03T06:36:24Z", "author": {"login": "rdhananjaya"}, "path": "stdlib/system/src/main/java/org/ballerinalang/stdlib/system/utils/SystemUtils.java", "diffHunk": "@@ -49,41 +47,31 @@\n     private static final String UNKNOWN_MESSAGE = \"Unknown Error\";\n \n     /**\n-     * Returns error object for input reason.\n-     * Error type is generic ballerina error type. This utility to construct error object from message.\n+     * Returns error object  with message. Error type is generic ballerina error type. This utility to construct\n+     * error object from message.\n      *\n-     * @param error Reason for creating the error object. If the reason is null, \"UNKNOWN\" sets by\n-     *              default.\n+     * @param typeId The string type ID of the particular error object. If the typeId is  null, \"UNKNOWN\" sets by", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDMzODAxMw=="}, "originalCommit": {"oid": "7b84938e60cc8149551f0fb931ed9e5064901f7b"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a612bc5f28d6ecb61cf1fe73ac258fde22761608", "author": {"user": {"login": "chamil321", "name": "Chamil Elladeniya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a612bc5f28d6ecb61cf1fe73ac258fde22761608", "committedDate": "2020-06-03T09:07:00Z", "message": "Address review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMzY0Mjcy", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23656#pullrequestreview-423364272", "createdAt": "2020-06-03T09:11:44Z", "commit": {"oid": "a612bc5f28d6ecb61cf1fe73ac258fde22761608"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4487, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}