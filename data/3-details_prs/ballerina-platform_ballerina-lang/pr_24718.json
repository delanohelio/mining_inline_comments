{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4NjQ4MDIz", "number": 24718, "title": "Support executing a single test function", "bodyText": "Purpose\n\nSupport executing a single test function or a set of functions\n\nFixes #24628\nApproach\n\nIntroduce a new \"--functions\" flag to specify the list of functions to be executed within module/project.\n\nSamples\n\nN/A\n\nRemarks\n\nN/A\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-07-14T05:11:29Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24718", "merged": true, "mergeCommit": {"oid": "7288f1bfaa81f71973cb2b5345fa1b6a1a095074"}, "closed": true, "closedAt": "2020-07-16T10:00:07Z", "author": {"login": "Dilhasha"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc09AXQgBqjM1NDYwMTc1ODk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1cQ4dgFqTQ0OTcwMDQ2Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "48ab7ed4cfde5298957bc1738be6472736ac4f91", "author": {"user": null}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/48ab7ed4cfde5298957bc1738be6472736ac4f91", "committedDate": "2020-07-14T21:16:06Z", "message": "Remove unnecessary formatting"}, "afterCommit": {"oid": "9971499b65f8608beb4dd5beac0c194cb452ea3a", "author": {"user": null}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9971499b65f8608beb4dd5beac0c194cb452ea3a", "committedDate": "2020-07-14T21:33:13Z", "message": "Support executing a single test function"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9971499b65f8608beb4dd5beac0c194cb452ea3a", "author": {"user": null}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9971499b65f8608beb4dd5beac0c194cb452ea3a", "committedDate": "2020-07-14T21:33:13Z", "message": "Support executing a single test function"}, "afterCommit": {"oid": "1409b7d8cb22f52e6914328ffc90f60b91a7bdfe", "author": {"user": null}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1409b7d8cb22f52e6914328ffc90f60b91a7bdfe", "committedDate": "2020-07-14T22:15:41Z", "message": "Support executing a single test function"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a58a19c3c7708cc23868d33bb79e5e90ca0bed29", "author": {"user": {"login": "Dilhasha", "name": "Fathima Dilhasha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a58a19c3c7708cc23868d33bb79e5e90ca0bed29", "committedDate": "2020-07-14T22:23:31Z", "message": "Support executing a single test function"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1409b7d8cb22f52e6914328ffc90f60b91a7bdfe", "author": {"user": null}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1409b7d8cb22f52e6914328ffc90f60b91a7bdfe", "committedDate": "2020-07-14T22:15:41Z", "message": "Support executing a single test function"}, "afterCommit": {"oid": "a58a19c3c7708cc23868d33bb79e5e90ca0bed29", "author": {"user": {"login": "Dilhasha", "name": "Fathima Dilhasha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a58a19c3c7708cc23868d33bb79e5e90ca0bed29", "committedDate": "2020-07-14T22:23:31Z", "message": "Support executing a single test function"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4NjEzNjk5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24718#pullrequestreview-448613699", "createdAt": "2020-07-15T04:04:32Z", "commit": {"oid": "a58a19c3c7708cc23868d33bb79e5e90ca0bed29"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwNDowNDozMlrOGxtbAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwNDowNzo0NVrOGxtegw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc3NzYwMg==", "bodyText": "Can we name the options as --tests", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24718#discussion_r454777602", "createdAt": "2020-07-15T04:04:32Z", "author": {"login": "hevayo"}, "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/TestCommand.java", "diffHunk": "@@ -149,6 +149,9 @@ public TestCommand(Path userDir, PrintStream outStream, PrintStream errStream, b\n     @CommandLine.Option(names = \"--home-cache\", description = \"Custom home cache\")\n     private String homeCache;\n \n+    @CommandLine.Option(names = \"--functions\", split = \",\", description = \"Test functions to be executed\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a58a19c3c7708cc23868d33bb79e5e90ca0bed29"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc3ODQzOQ==", "bodyText": "Can we give a more specific response", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24718#discussion_r454778439", "createdAt": "2020-07-15T04:07:26Z", "author": {"login": "hevayo"}, "path": "tests/testerina-integration-test/src/test/java/org/ballerinalang/testerina/test/SelectedFunctionTest.java", "diffHunk": "@@ -0,0 +1,75 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ *  in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *  http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing,\n+ *  software distributed under the License is distributed on an\n+ *  \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ *  KIND, either express or implied.  See the License for the\n+ *  specific language governing permissions and limitations\n+ *  under the License.\n+ */\n+package org.ballerinalang.testerina.test;\n+\n+import org.ballerinalang.test.context.BMainInstance;\n+import org.ballerinalang.test.context.BallerinaTestException;\n+import org.ballerinalang.test.context.LogLeecher;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+\n+/**\n+ * Test class containing tests related to selective function tests.\n+ */\n+public class SelectedFunctionTest extends BaseTestCase {\n+\n+    private BMainInstance balClient;\n+    private String projectPath;\n+\n+    @BeforeClass\n+    public void setup() throws BallerinaTestException {\n+        balClient = new BMainInstance(balServer);\n+        projectPath = basicTestsProjectPath.toString();\n+    }\n+\n+    @Test\n+    public void testSingleFunctionExecution() throws BallerinaTestException {\n+        String msg = \"1 passing\";\n+        LogLeecher clientLeecher = new LogLeecher(msg);\n+        balClient.runMain(\"test\", new String[]{\"--functions\", \"testFunc\", \"beforeEachAfterEach\"},\n+                null, new String[]{}, new LogLeecher[]{clientLeecher}, projectPath);\n+        clientLeecher.waitForText(20000);\n+    }\n+\n+    @Test\n+    public void testDependentFunctionExecution() throws BallerinaTestException {\n+        String msg = \"2 passing\";\n+        LogLeecher clientLeecher = new LogLeecher(msg);\n+        balClient.runMain(\"test\", new String[]{\"--functions\", \"testFunc2\", \"beforeEachAfterEach\"},\n+                null, new String[]{}, new LogLeecher[]{clientLeecher}, projectPath);\n+        clientLeecher.waitForText(20000);\n+    }\n+\n+    @Test\n+    public void testMultipleFunctionExecution() throws BallerinaTestException {\n+        String msg = \"2 passing\";\n+        LogLeecher clientLeecher = new LogLeecher(msg);\n+        balClient.runMain(\"test\", new String[]{\"--functions\", \"testFunc,testFunc2\",\n+                \"beforeEachAfterEach\"}, null, new String[]{}, new LogLeecher[]{clientLeecher}, projectPath);\n+        clientLeecher.waitForText(20000);\n+    }\n+\n+    @Test\n+    public void testNonExistingFunctionExecution() throws BallerinaTestException {\n+        String msg = \"No tests found\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a58a19c3c7708cc23868d33bb79e5e90ca0bed29"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc3ODQ5OQ==", "bodyText": "What is the error code of this.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24718#discussion_r454778499", "createdAt": "2020-07-15T04:07:45Z", "author": {"login": "hevayo"}, "path": "tests/testerina-integration-test/src/test/java/org/ballerinalang/testerina/test/SelectedFunctionTest.java", "diffHunk": "@@ -0,0 +1,75 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ *  in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *  http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing,\n+ *  software distributed under the License is distributed on an\n+ *  \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ *  KIND, either express or implied.  See the License for the\n+ *  specific language governing permissions and limitations\n+ *  under the License.\n+ */\n+package org.ballerinalang.testerina.test;\n+\n+import org.ballerinalang.test.context.BMainInstance;\n+import org.ballerinalang.test.context.BallerinaTestException;\n+import org.ballerinalang.test.context.LogLeecher;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+\n+/**\n+ * Test class containing tests related to selective function tests.\n+ */\n+public class SelectedFunctionTest extends BaseTestCase {\n+\n+    private BMainInstance balClient;\n+    private String projectPath;\n+\n+    @BeforeClass\n+    public void setup() throws BallerinaTestException {\n+        balClient = new BMainInstance(balServer);\n+        projectPath = basicTestsProjectPath.toString();\n+    }\n+\n+    @Test\n+    public void testSingleFunctionExecution() throws BallerinaTestException {\n+        String msg = \"1 passing\";\n+        LogLeecher clientLeecher = new LogLeecher(msg);\n+        balClient.runMain(\"test\", new String[]{\"--functions\", \"testFunc\", \"beforeEachAfterEach\"},\n+                null, new String[]{}, new LogLeecher[]{clientLeecher}, projectPath);\n+        clientLeecher.waitForText(20000);\n+    }\n+\n+    @Test\n+    public void testDependentFunctionExecution() throws BallerinaTestException {\n+        String msg = \"2 passing\";\n+        LogLeecher clientLeecher = new LogLeecher(msg);\n+        balClient.runMain(\"test\", new String[]{\"--functions\", \"testFunc2\", \"beforeEachAfterEach\"},\n+                null, new String[]{}, new LogLeecher[]{clientLeecher}, projectPath);\n+        clientLeecher.waitForText(20000);\n+    }\n+\n+    @Test\n+    public void testMultipleFunctionExecution() throws BallerinaTestException {\n+        String msg = \"2 passing\";\n+        LogLeecher clientLeecher = new LogLeecher(msg);\n+        balClient.runMain(\"test\", new String[]{\"--functions\", \"testFunc,testFunc2\",\n+                \"beforeEachAfterEach\"}, null, new String[]{}, new LogLeecher[]{clientLeecher}, projectPath);\n+        clientLeecher.waitForText(20000);\n+    }\n+\n+    @Test\n+    public void testNonExistingFunctionExecution() throws BallerinaTestException {\n+        String msg = \"No tests found\";\n+        LogLeecher clientLeecher = new LogLeecher(msg);\n+        balClient.runMain(\"test\", new String[]{\"--functions\", \"nonExistingFunc\", \"--all\"},\n+                null, new String[]{}, new LogLeecher[]{clientLeecher}, projectPath);\n+        clientLeecher.waitForText(20000);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a58a19c3c7708cc23868d33bb79e5e90ca0bed29"}, "originalPosition": 73}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4NjE0OTAz", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24718#pullrequestreview-448614903", "createdAt": "2020-07-15T04:08:58Z", "commit": {"oid": "a58a19c3c7708cc23868d33bb79e5e90ca0bed29"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwNDowODo1OFrOGxtfgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwNDowODo1OFrOGxtfgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc3ODc1NQ==", "bodyText": "Wouldnt it be better to name the option as --tests", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24718#discussion_r454778755", "createdAt": "2020-07-15T04:08:58Z", "author": {"login": "azinneera"}, "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/TestCommand.java", "diffHunk": "@@ -149,6 +149,9 @@ public TestCommand(Path userDir, PrintStream outStream, PrintStream errStream, b\n     @CommandLine.Option(names = \"--home-cache\", description = \"Custom home cache\")\n     private String homeCache;\n \n+    @CommandLine.Option(names = \"--functions\", split = \",\", description = \"Test functions to be executed\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a58a19c3c7708cc23868d33bb79e5e90ca0bed29"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4NjE4NDM4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24718#pullrequestreview-448618438", "createdAt": "2020-07-15T04:22:16Z", "commit": {"oid": "a58a19c3c7708cc23868d33bb79e5e90ca0bed29"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwNDoyMjoxNlrOGxtsoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwNDoyMjoxNlrOGxtsoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDc4MjExMg==", "bodyText": "Shall we add test cases to check the behavior to test the following:\n\nwhen trying to run a disabled test case\nwhen trying to run a test case which depends on a disabled tests case", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24718#discussion_r454782112", "createdAt": "2020-07-15T04:22:16Z", "author": {"login": "azinneera"}, "path": "tests/testerina-integration-test/src/test/java/org/ballerinalang/testerina/test/SelectedFunctionTest.java", "diffHunk": "@@ -0,0 +1,75 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ *  in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *  http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing,\n+ *  software distributed under the License is distributed on an\n+ *  \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ *  KIND, either express or implied.  See the License for the\n+ *  specific language governing permissions and limitations\n+ *  under the License.\n+ */\n+package org.ballerinalang.testerina.test;\n+\n+import org.ballerinalang.test.context.BMainInstance;\n+import org.ballerinalang.test.context.BallerinaTestException;\n+import org.ballerinalang.test.context.LogLeecher;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+\n+/**\n+ * Test class containing tests related to selective function tests.\n+ */\n+public class SelectedFunctionTest extends BaseTestCase {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a58a19c3c7708cc23868d33bb79e5e90ca0bed29"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0100686922816b37b3f8fc746289aeabc04bfd71", "author": {"user": {"login": "Dilhasha", "name": "Fathima Dilhasha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0100686922816b37b3f8fc746289aeabc04bfd71", "committedDate": "2020-07-15T09:01:28Z", "message": "Fix PR suggestions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4Nzc1MzE2", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24718#pullrequestreview-448775316", "createdAt": "2020-07-15T09:17:34Z", "commit": {"oid": "0100686922816b37b3f8fc746289aeabc04bfd71"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "697af76a935b85814aa1a79fbb96bf5d77defb3f", "author": {"user": {"login": "Dilhasha", "name": "Fathima Dilhasha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/697af76a935b85814aa1a79fbb96bf5d77defb3f", "committedDate": "2020-07-16T08:12:27Z", "message": "Fix issue in single test execution"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5NzAwNDY3", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24718#pullrequestreview-449700467", "createdAt": "2020-07-16T09:59:51Z", "commit": {"oid": "697af76a935b85814aa1a79fbb96bf5d77defb3f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3733, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}