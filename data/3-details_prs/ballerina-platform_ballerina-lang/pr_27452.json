{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM2NTk0MDU3", "number": 27452, "title": "Improve --tests flag to support wildcards and module wise execution", "bodyText": "Purpose\nImproves the --tests flag. Adds Wildcard support and module wise execution.\nFixes #27258\nApproach\nSamples\nFor a ballerina project ProjectA with module Module1 each containing test cases.\nProjectA\n\u251c\u2500\u2500 main.bal\n\u251c\u2500\u2500 modules\n\u2502   \u2514\u2500\u2500 Module1\n\u2502       \u251c\u2500\u2500 Module1.bal\n\u2502       \u2514\u2500\u2500 tests\n\u2502           \u2514\u2500\u2500 Module1_test.bal\n\u2514\u2500\u2500 tests\n    \u2514\u2500\u2500 main_test.bal\n\n\nRun specific tests in the Default module only\n\n$ ballerina test --tests <ProjectName>:<test>\n\nexample :\n~ ballerina test --tests ProjectA:test1\n\n~ ballerina test --tests ProjectA:A_test1,ProjectA:A_test2\n\n// Run all tests starting with A_\n~ ballerina test --tests ProjectA:A_*\n\n// Run all tests in the default module\n~ ballerina test --tests ProjectA:*\n\n\n\nRun tests in a specified module only\n\n$ ballerina test --tests <ProjectName>.<ModuleName>:<test>\n\nexample :\n~ ballerina test --tests ProjectA.Module1:A_test1\n\n~ ballerina test --tests ProjectA.Module1:m_test1,ProjectA.Module1:m_test2\n\n// Run all tests starting with m_\n~ ballerina test --tests ProjectA.Module1:m_*\n\n// Run all tests in the specified module\n~ ballerina test --tests ProjectA.Module1:*\n\n\nRemarks\n\nList any other known issues, related PRs, TODO items, or any other notes related to the PR.\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-12-11T07:32:09Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27452", "merged": true, "mergeCommit": {"oid": "a6ddb5c38afb2bb951d65ee937d0dad0f2ef02f7"}, "closed": true, "closedAt": "2020-12-16T05:27:36Z", "author": {"login": "Ibaqu"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdlC3-bgBqjQwOTg5MDUxMzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmn3WrgFqTU1MzM2MTkwNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "881bcd758f924fb2d5b14322dc92f1ebaf2f3321", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/881bcd758f924fb2d5b14322dc92f1ebaf2f3321", "committedDate": "2020-12-11T06:39:13Z", "message": "Improve --tests flag to support wildcards and module wise execution"}, "afterCommit": {"oid": "50966ad8025dd8739824fbc4070e4db952213728", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/50966ad8025dd8739824fbc4070e4db952213728", "committedDate": "2020-12-11T07:31:54Z", "message": "Improve --tests flag to support wildcards and module wise execution"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "50966ad8025dd8739824fbc4070e4db952213728", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/50966ad8025dd8739824fbc4070e4db952213728", "committedDate": "2020-12-11T07:31:54Z", "message": "Improve --tests flag to support wildcards and module wise execution"}, "afterCommit": {"oid": "3f612253a5f9770b09b50b9ae54ce09764d4fc04", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3f612253a5f9770b09b50b9ae54ce09764d4fc04", "committedDate": "2020-12-11T07:52:38Z", "message": "Improve --tests flag to support wildcards and module wise execution"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb120538b5e35ef9f3d085b22e128970b336ac28", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/eb120538b5e35ef9f3d085b22e128970b336ac28", "committedDate": "2020-12-11T11:39:31Z", "message": "Improve --tests flag to support wildcards and module wise execution"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44be06096ba933c223221cc0dd696f14372e75ac", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/44be06096ba933c223221cc0dd696f14372e75ac", "committedDate": "2020-12-11T12:59:24Z", "message": "Add module execution tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3f612253a5f9770b09b50b9ae54ce09764d4fc04", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3f612253a5f9770b09b50b9ae54ce09764d4fc04", "committedDate": "2020-12-11T07:52:38Z", "message": "Improve --tests flag to support wildcards and module wise execution"}, "afterCommit": {"oid": "44be06096ba933c223221cc0dd696f14372e75ac", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/44be06096ba933c223221cc0dd696f14372e75ac", "committedDate": "2020-12-11T12:59:24Z", "message": "Add module execution tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxMDg0Mjkx", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27452#pullrequestreview-551084291", "createdAt": "2020-12-14T06:54:12Z", "commit": {"oid": "8adab9cc37341818c88350cfba1ad8e6304cf7d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwNjo1NDoxMlrOIFCOsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwNjo1NDoxMlrOIFCOsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE1MDMyMQ==", "bodyText": "Don't we need to handle the potential IndexOutOfBoundException(s) in here? (or are we validating the user inputs in an earlier phase?)", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27452#discussion_r542150321", "createdAt": "2020-12-14T06:54:12Z", "author": {"login": "NipunaRanasinghe"}, "path": "misc/testerina/modules/testerina-runtime/src/main/java/org/ballerinalang/test/runtime/util/TesterinaUtils.java", "diffHunk": "@@ -198,12 +198,38 @@ private static Test getTest(String testName, List<Test> tests) {\n     /**\n      * Provides the updated test functions for single Execution after adding the dependent tests.\n      *\n-     * @param currentTests the tests available in current test suite\n-     * @param functions    the list of test functions provided by user\n+     * @param suite         current test suite\n+     * @param functions     the list of test functions provided by user\n      * @return updated list of test functions\n      */\n-    public static List<Test> getSingleExecutionTests(List<Test> currentTests, List<String> functions) {\n-        List<String> updatedFunctionList = getUpdatedFunctionList(currentTests, functions);\n+    public static List<Test> getSingleExecutionTests(TestSuite suite, List<String> functions) {\n+        List<String> filteredList = new ArrayList<>();\n+\n+        // Go through each function in the functionsList\n+        for (String function : functions) {\n+            if (function.contains(\":\")) {\n+                String[] functionDetail = function.split(\":\");\n+\n+                if (functionDetail[0].equals(suite.getPackageID())) {\n+                    if (functionDetail[1].equals(TesterinaConstants.WILDCARD)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8adab9cc37341818c88350cfba1ad8e6304cf7d4"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "020c2301329ebe37fb1819cd95379cf4df755c79", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/020c2301329ebe37fb1819cd95379cf4df755c79", "committedDate": "2020-12-14T07:22:31Z", "message": "Refactor module test execution"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8adab9cc37341818c88350cfba1ad8e6304cf7d4", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8adab9cc37341818c88350cfba1ad8e6304cf7d4", "committedDate": "2020-12-11T13:05:59Z", "message": "Refactor module test execution"}, "afterCommit": {"oid": "020c2301329ebe37fb1819cd95379cf4df755c79", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/020c2301329ebe37fb1819cd95379cf4df755c79", "committedDate": "2020-12-14T07:22:31Z", "message": "Refactor module test execution"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzMzYxOTA0", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27452#pullrequestreview-553361904", "createdAt": "2020-12-16T05:13:07Z", "commit": {"oid": "020c2301329ebe37fb1819cd95379cf4df755c79"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4797, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}