{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMxNjMwNjU1", "number": 23838, "title": "Add EnumDeclarationNode support for transformer", "bodyText": "Add EnumDeclarationNode support for transformer\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-06-09T08:43:13Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23838", "merged": true, "mergeCommit": {"oid": "0df21b93291f40818e4f541226c5a23ce264cd17"}, "closed": true, "closedAt": "2020-06-10T09:40:00Z", "author": {"login": "m36dot"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcpg89BgH2gAyNDMxNjMwNjU1OmIyNjViZGY3MGMzODYxYmZhZGVlYWNmOGFhMjZkY2VlMmVkYTI3YjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcp2ZolgFqTQyNzg4NjQwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b265bdf70c3861bfadeeacf8aa26dcee2eda27b1", "author": {"user": {"login": "m36dot", "name": "Saif Abdul Cassim"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b265bdf70c3861bfadeeacf8aa26dcee2eda27b1", "committedDate": "2020-06-09T08:40:31Z", "message": "Add enum declaration node support"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2OTQyMzY0", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23838#pullrequestreview-426942364", "createdAt": "2020-06-09T09:11:15Z", "commit": {"oid": "b265bdf70c3861bfadeeacf8aa26dcee2eda27b1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQwOToxMToxNVrOGhAF_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQwOToxMzo1NlrOGhAMDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzI1NzcyNA==", "bodyText": "please use addToTop function instead. because compilationUnit can be null in lang-server", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23838#discussion_r437257724", "createdAt": "2020-06-09T09:11:15Z", "author": {"login": "manuranga"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/parser/BLangNodeTransformer.java", "diffHunk": "@@ -2297,6 +2304,99 @@ public BLangNode transform(ArrayTypeDescriptorNode arrayTypeDescriptorNode) {\n         return arrayTypeNode;\n     }\n \n+    public void addEnumDeclarationNode(\n+            EnumDeclarationNode enumDeclarationNode,\n+            BLangCompilationUnit compInit) {\n+\n+        Boolean publicQualifier = false;\n+        if (enumDeclarationNode.qualifier() != null &&\n+                enumDeclarationNode.qualifier().kind()\n+                        == SyntaxKind.PUBLIC_KEYWORD) {\n+            publicQualifier = true;\n+        }\n+        for (Node member : enumDeclarationNode.enumMemberList()) {\n+            compInit.addTopLevelNode(transformEnumMember(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b265bdf70c3861bfadeeacf8aa26dcee2eda27b1"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzI1ODQxNg==", "bodyText": "do we need a separate Boolean, can we set the flag then and there.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23838#discussion_r437258416", "createdAt": "2020-06-09T09:12:25Z", "author": {"login": "manuranga"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/parser/BLangNodeTransformer.java", "diffHunk": "@@ -2297,6 +2304,99 @@ public BLangNode transform(ArrayTypeDescriptorNode arrayTypeDescriptorNode) {\n         return arrayTypeNode;\n     }\n \n+    public void addEnumDeclarationNode(\n+            EnumDeclarationNode enumDeclarationNode,\n+            BLangCompilationUnit compInit) {\n+\n+        Boolean publicQualifier = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b265bdf70c3861bfadeeacf8aa26dcee2eda27b1"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzI1OTI3Nw==", "bodyText": "see if you can reuse the deSugarTypeAsUserDefType function instead.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23838#discussion_r437259277", "createdAt": "2020-06-09T09:13:56Z", "author": {"login": "manuranga"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/parser/BLangNodeTransformer.java", "diffHunk": "@@ -2297,6 +2304,99 @@ public BLangNode transform(ArrayTypeDescriptorNode arrayTypeDescriptorNode) {\n         return arrayTypeNode;\n     }\n \n+    public void addEnumDeclarationNode(\n+            EnumDeclarationNode enumDeclarationNode,\n+            BLangCompilationUnit compInit) {\n+\n+        Boolean publicQualifier = false;\n+        if (enumDeclarationNode.qualifier() != null &&\n+                enumDeclarationNode.qualifier().kind()\n+                        == SyntaxKind.PUBLIC_KEYWORD) {\n+            publicQualifier = true;\n+        }\n+        for (Node member : enumDeclarationNode.enumMemberList()) {\n+            compInit.addTopLevelNode(transformEnumMember(\n+                    (EnumMemberNode) member,\n+                    publicQualifier));\n+        }\n+\n+        BLangTypeDefinition bLangTypeDefinition =\n+                (BLangTypeDefinition) TreeBuilder.createTypeDefinition();\n+        if (publicQualifier) {\n+            bLangTypeDefinition.flagSet.add(Flag.PUBLIC);\n+        }\n+\n+        bLangTypeDefinition.setName(\n+                (BLangIdentifier)transform(enumDeclarationNode.identifier()));\n+\n+        BLangUnionTypeNode bLangUnionTypeNode =\n+                (BLangUnionTypeNode) TreeBuilder.createUnionTypeNode();\n+        for (Node member : enumDeclarationNode.enumMemberList()) {\n+            bLangUnionTypeNode.memberTypeNodes.\n+                    add(createTypeNode(\n+                            ((EnumMemberNode) member).identifier()));\n+        }\n+        Collections.reverse(bLangUnionTypeNode.memberTypeNodes);\n+        bLangTypeDefinition.setTypeNode(bLangUnionTypeNode);\n+        compInit.addTopLevelNode(bLangTypeDefinition);\n+    }\n+\n+    public BLangConstant transformEnumMember(EnumMemberNode member,\n+                                             Boolean publicQualifier) {\n+        BLangConstant bLangConstant =\n+                (BLangConstant) TreeBuilder.createConstantNode();\n+\n+        bLangConstant.flagSet.add(Flag.CONSTANT);\n+\n+        if (publicQualifier) {\n+            bLangConstant.flagSet.add(Flag.PUBLIC);\n+        }\n+        BLangTypeDefinition assosiatedTypeDef =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b265bdf70c3861bfadeeacf8aa26dcee2eda27b1"}, "originalPosition": 72}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ce1d1f8e2e01a76982c6ba9e184b198ff9e712c", "author": {"user": {"login": "m36dot", "name": "Saif Abdul Cassim"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4ce1d1f8e2e01a76982c6ba9e184b198ff9e712c", "committedDate": "2020-06-09T10:37:31Z", "message": "refactor code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "acdb6da6b1e8f88caaf9fd65a385a06a2b1ffbe8", "author": {"user": {"login": "m36dot", "name": "Saif Abdul Cassim"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/acdb6da6b1e8f88caaf9fd65a385a06a2b1ffbe8", "committedDate": "2020-06-09T11:18:10Z", "message": "Fix checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35716146dbd9ed4a66f54fd0d8cc448b4bf9dde7", "author": {"user": {"login": "m36dot", "name": "Saif Abdul Cassim"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/35716146dbd9ed4a66f54fd0d8cc448b4bf9dde7", "committedDate": "2020-06-10T04:42:51Z", "message": "Refactor Code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3ODg2NDA5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23838#pullrequestreview-427886409", "createdAt": "2020-06-10T09:39:51Z", "commit": {"oid": "35716146dbd9ed4a66f54fd0d8cc448b4bf9dde7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4436, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}