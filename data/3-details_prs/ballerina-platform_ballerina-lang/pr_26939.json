{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIxMzc1MDAw", "number": 26939, "title": "Fix skipping of runtime args in commands for build projects", "bodyText": "Purpose\n\nWhen the build/run/test command is run for a build project from the project directory with runtime args provided (e.g. ballerina build --b7a.config.file=/home/user/config.toml), the args are skipped since it has the same prefix (\"--\") as the options. This contains the fix for it.\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-11-16T05:49:26Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26939", "merged": true, "mergeCommit": {"oid": "a77dd9ae44b33ad0d6b5b3daac1017460ed00184"}, "closed": true, "closedAt": "2020-11-16T10:47:14Z", "author": {"login": "azinneera"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdc-nzJABqjM5OTg1NzE4NTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABddB07EgH2gAyNTIxMzc1MDAwOjk2Y2Q3OTA3OWMwNTMxMzRkNDUzZDA5NjA2MGFhMjc0YjI5YmUzYjU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "201eaa1040962b2b6e7b4f7c0e6f5d0ad16e55c7", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/201eaa1040962b2b6e7b4f7c0e6f5d0ad16e55c7", "committedDate": "2020-11-16T05:42:53Z", "message": "Fix skipping of runtime args in commands for build projects"}, "afterCommit": {"oid": "8e445caf405e15d58f9f2f0caa54c4d7ce1693f1", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8e445caf405e15d58f9f2f0caa54c4d7ce1693f1", "committedDate": "2020-11-16T06:03:07Z", "message": "Fix skipping of runtime args in commands for build projects"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8e445caf405e15d58f9f2f0caa54c4d7ce1693f1", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8e445caf405e15d58f9f2f0caa54c4d7ce1693f1", "committedDate": "2020-11-16T06:03:07Z", "message": "Fix skipping of runtime args in commands for build projects"}, "afterCommit": {"oid": "d80aca1493605ec196926d33af052acc5b96a32e", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d80aca1493605ec196926d33af052acc5b96a32e", "committedDate": "2020-11-16T06:57:52Z", "message": "Fix skipping of runtime args in commands for build projects"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "888fc31926185c2b1f81f6e9e79cd15799f36f9f", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/888fc31926185c2b1f81f6e9e79cd15799f36f9f", "committedDate": "2020-11-16T07:30:51Z", "message": "Handle the exit code of process in run command"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b3c35176ec7356377afd911acaa9b4b5530a3e8", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3b3c35176ec7356377afd911acaa9b4b5530a3e8", "committedDate": "2020-11-16T07:30:51Z", "message": "Fix skipping of runtime args in commands for build projects"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d80aca1493605ec196926d33af052acc5b96a32e", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d80aca1493605ec196926d33af052acc5b96a32e", "committedDate": "2020-11-16T06:57:52Z", "message": "Fix skipping of runtime args in commands for build projects"}, "afterCommit": {"oid": "3b3c35176ec7356377afd911acaa9b4b5530a3e8", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3b3c35176ec7356377afd911acaa9b4b5530a3e8", "committedDate": "2020-11-16T07:30:51Z", "message": "Fix skipping of runtime args in commands for build projects"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2785a8af3b3e38afc4955bb7282442544d9165be", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2785a8af3b3e38afc4955bb7282442544d9165be", "committedDate": "2020-11-16T08:39:33Z", "message": "Disable code coverage for single bal files"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxMTUxMjQy", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26939#pullrequestreview-531151242", "createdAt": "2020-11-16T09:35:41Z", "commit": {"oid": "2785a8af3b3e38afc4955bb7282442544d9165be"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQwOTozNTo0MlrOHzwNjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQwOTozNTo0MlrOHzwNjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDAyOTMyNw==", "bodyText": "Can't we use USER_DIR in ProjectConstants?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26939#discussion_r524029327", "createdAt": "2020-11-16T09:35:42Z", "author": {"login": "pramodya1994"}, "path": "cli/ballerina-cli/src/main/java/io/ballerina/cli/cmd/BuildCommand.java", "diffHunk": "@@ -152,8 +154,13 @@ public void execute() {\n         String[] args;\n         if (this.argList == null) {\n             args = new String[0];\n+            this.projectPath = Paths.get(System.getProperty(\"user.dir\"));\n+        } else if (this.argList.get(0).startsWith(RuntimeConstants.BALLERINA_ARGS_INIT_PREFIX)) {\n+            args = argList.toArray(new String[0]);\n+            this.projectPath = Paths.get(System.getProperty(\"user.dir\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2785a8af3b3e38afc4955bb7282442544d9165be"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxMTUyNzk0", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26939#pullrequestreview-531152794", "createdAt": "2020-11-16T09:37:42Z", "commit": {"oid": "2785a8af3b3e38afc4955bb7282442544d9165be"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQwOTozNzo0MlrOHzwWrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQwOTozNzo0MlrOHzwWrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDAzMTY2Mg==", "bodyText": "Can't we use USER_DIR in ProjectConstants?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26939#discussion_r524031662", "createdAt": "2020-11-16T09:37:42Z", "author": {"login": "pramodya1994"}, "path": "cli/ballerina-cli/src/main/java/io/ballerina/cli/cmd/RunCommand.java", "diffHunk": "@@ -114,8 +115,13 @@ public void execute() {\n         String[] args;\n         if (this.argList == null) {\n             args = new String[0];\n+            this.projectPath = Paths.get(System.getProperty(\"user.dir\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2785a8af3b3e38afc4955bb7282442544d9165be"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "96cd79079c053134d453d096060aa274b29be3b5", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/96cd79079c053134d453d096060aa274b29be3b5", "committedDate": "2020-11-16T09:48:45Z", "message": "Address review suggestions"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4881, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}