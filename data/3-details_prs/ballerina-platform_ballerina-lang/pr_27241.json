{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI5MDQ4Njcz", "number": 27241, "title": "Handle IndexOutOfBoundException for wrong param count", "bodyText": "Purpose\n\nTo handle IndexOutOfBound Exception\n\nFixes #26128\nApproach\n\nAdd more logic to exception handling\n\nSamples\n\nNA\n\nRemarks\n\nNA\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples\nTest cases for Interop Exception.pdf", "createdAt": "2020-11-29T03:12:02Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27241", "merged": true, "mergeCommit": {"oid": "e2d652f41e27df0c828aa14b376f7f0c45951a5c"}, "closed": true, "closedAt": "2020-12-11T06:27:06Z", "author": {"login": "gabilang"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdhIjVJABqjQwNDg2NzgyNzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdlB7CCgFqTU0OTgzMDQ3OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c2325bfcf4f85b4067cdfa0614279133ae841f9f", "author": {"user": {"login": "gabilang", "name": "Gabilan Ganeshwaran"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c2325bfcf4f85b4067cdfa0614279133ae841f9f", "committedDate": "2020-11-29T03:04:04Z", "message": "Handle IndexOutOfBoundException for wrong param count"}, "afterCommit": {"oid": "310dbdead023db66f1c7f980e8811ed0e4681e69", "author": {"user": {"login": "gabilang", "name": "Gabilan Ganeshwaran"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/310dbdead023db66f1c7f980e8811ed0e4681e69", "committedDate": "2020-11-29T03:52:34Z", "message": "Handle IndexOutOfBoundException for wrong param count"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "310dbdead023db66f1c7f980e8811ed0e4681e69", "author": {"user": {"login": "gabilang", "name": "Gabilan Ganeshwaran"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/310dbdead023db66f1c7f980e8811ed0e4681e69", "committedDate": "2020-11-29T03:52:34Z", "message": "Handle IndexOutOfBoundException for wrong param count"}, "afterCommit": {"oid": "f7c481d96a8d84680a23be79ab511adbdb056a2e", "author": {"user": {"login": "gabilang", "name": "Gabilan Ganeshwaran"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f7c481d96a8d84680a23be79ab511adbdb056a2e", "committedDate": "2020-12-10T06:38:57Z", "message": "Handle IndexOutOfBoundException for wrong param count"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4OTQwNjA3", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27241#pullrequestreview-548940607", "createdAt": "2020-12-10T08:11:31Z", "commit": {"oid": "f7c481d96a8d84680a23be79ab511adbdb056a2e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwODoxMTozMVrOIC8dkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwODoxMTozMVrOIC8dkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk1ODY3NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private JInteropException paramCountMismatchError(JMethodRequest jMethodRequest) {\n          \n          \n            \n                private JInteropException throwParamCountMismatchError(JMethodRequest jMethodRequest) {", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27241#discussion_r539958675", "createdAt": "2020-12-10T08:11:31Z", "author": {"login": "warunalakshitha"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/bir/codegen/interop/JMethodResolver.java", "diffHunk": "@@ -859,19 +814,40 @@ private String getParamTypesAsString(ParamTypeConstraint[] constraints) {\n         return stringJoiner.toString();\n     }\n \n-    private JInteropException getNoSuchMethodError(String methodName, Class<?> jType, BType bType,\n+    private JInteropException methodNotFoundError(JMethodRequest jMethodRequest) {\n+\n+        if (jMethodRequest.kind == JMethodKind.CONSTRUCTOR) {\n+            throw new JInteropException(DiagnosticErrorCode.CONSTRUCTOR_NOT_FOUND,\n+                    \"No such public constructor with '\" + jMethodRequest.bFuncParamCount +\n+                            \"' parameter(s) found in class '\" + jMethodRequest.declaringClass + \"'\");\n+        } else {\n+            if (jMethodRequest.bFuncParamCount == 0 || jMethodRequest.bParamTypes[0].tag != TypeTags.HANDLE) {\n+                throw new JInteropException(DiagnosticErrorCode.METHOD_NOT_FOUND,\n+                        \"No such public static method '\" + jMethodRequest.methodName + \"' with '\" +\n+                                jMethodRequest.bFuncParamCount +\n+                                \"' parameter(s) found in class '\" + jMethodRequest.declaringClass + \"'\");\n+            } else {\n+                throw new JInteropException(DiagnosticErrorCode.METHOD_NOT_FOUND,\n+                        \"No such public method '\" + jMethodRequest.methodName + \"' with '\" +\n+                                jMethodRequest.bFuncParamCount +\n+                                \"' parameter(s) found in class '\" + jMethodRequest.declaringClass + \"'\");\n+            }\n+        }\n+    }\n+\n+    private JInteropException noSuchMethodError(String methodName, Class<?> jType, BType bType,\n                                                    Class<?> declaringClass) {\n \n-        return new JInteropException(DiagnosticErrorCode.METHOD_SIGNATURE_DOES_NOT_MATCH,\n+        throw new JInteropException(DiagnosticErrorCode.METHOD_SIGNATURE_DOES_NOT_MATCH,\n                 \"Incompatible param type for method '\" + methodName + \"' in class '\" + declaringClass.getName() +\n                         \"': Java type '\" + jType.getName() + \"' will not be matched to ballerina type '\" +\n                         (bType.tag == TypeTags.FINITE ? bType.tsymbol.name.value : bType) + \"'\");\n     }\n \n-    private JInteropException getParamCountMismatchError(JMethodRequest jMethodRequest) {\n+    private JInteropException paramCountMismatchError(JMethodRequest jMethodRequest) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f7c481d96a8d84680a23be79ab511adbdb056a2e"}, "originalPosition": 263}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4OTQwODcy", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27241#pullrequestreview-548940872", "createdAt": "2020-12-10T08:11:56Z", "commit": {"oid": "f7c481d96a8d84680a23be79ab511adbdb056a2e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwODoxMTo1NlrOIC8emg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwODoxMTo1NlrOIC8emg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk1ODkzOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private JInteropException methodNotFoundError(JMethodRequest jMethodRequest) {\n          \n          \n            \n                private JInteropException throwMethodNotFoundError(JMethodRequest jMethodRequest) {", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27241#discussion_r539958938", "createdAt": "2020-12-10T08:11:56Z", "author": {"login": "warunalakshitha"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/bir/codegen/interop/JMethodResolver.java", "diffHunk": "@@ -859,19 +814,40 @@ private String getParamTypesAsString(ParamTypeConstraint[] constraints) {\n         return stringJoiner.toString();\n     }\n \n-    private JInteropException getNoSuchMethodError(String methodName, Class<?> jType, BType bType,\n+    private JInteropException methodNotFoundError(JMethodRequest jMethodRequest) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f7c481d96a8d84680a23be79ab511adbdb056a2e"}, "originalPosition": 231}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b3ace1d4cc4ec7f4da64cec828469549f520966b", "author": {"user": {"login": "gabilang", "name": "Gabilan Ganeshwaran"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b3ace1d4cc4ec7f4da64cec828469549f520966b", "committedDate": "2020-12-10T17:12:45Z", "message": "Update compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/bir/codegen/interop/JMethodResolver.java\n\nCo-authored-by: Waruna Lakshitha <warunalakshitha@users.noreply.github.com>"}, "afterCommit": {"oid": "e43afc7c26cfa073778e620e434478dba8054185", "author": {"user": {"login": "gabilang", "name": "Gabilan Ganeshwaran"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e43afc7c26cfa073778e620e434478dba8054185", "committedDate": "2020-12-10T18:10:12Z", "message": "Handle IndexOutOfBoundException for wrong param count"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9c0ba48c3a0a524a8904dc49890dd1d03495252", "author": {"user": {"login": "gabilang", "name": "Gabilan Ganeshwaran"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a9c0ba48c3a0a524a8904dc49890dd1d03495252", "committedDate": "2020-12-11T03:19:05Z", "message": "Handle IndexOutOfBoundException for wrong param count"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e43afc7c26cfa073778e620e434478dba8054185", "author": {"user": {"login": "gabilang", "name": "Gabilan Ganeshwaran"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e43afc7c26cfa073778e620e434478dba8054185", "committedDate": "2020-12-10T18:10:12Z", "message": "Handle IndexOutOfBoundException for wrong param count"}, "afterCommit": {"oid": "a9c0ba48c3a0a524a8904dc49890dd1d03495252", "author": {"user": {"login": "gabilang", "name": "Gabilan Ganeshwaran"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a9c0ba48c3a0a524a8904dc49890dd1d03495252", "committedDate": "2020-12-11T03:19:05Z", "message": "Handle IndexOutOfBoundException for wrong param count"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5ODMwNDc5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27241#pullrequestreview-549830479", "createdAt": "2020-12-11T06:26:49Z", "commit": {"oid": "a9c0ba48c3a0a524a8904dc49890dd1d03495252"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4866, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}