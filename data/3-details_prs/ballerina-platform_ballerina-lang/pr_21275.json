{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwMTk5Mjg1", "number": 21275, "title": "[HTTP] Introduce common HTTP client config to remove repetition ", "bodyText": "Purpose\nFixes #21049\nApproach\nAs mentioned in this #21049 (comment);\n\nList the copied fields in the referencing type and say \"copied from T\" with a link to T\n\nRemarks\n\nballerina-platform/ballerina-spec#423\n#21082\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-02-26T12:09:13Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21275", "merged": true, "mergeCommit": {"oid": "0caa513f0f8b6d7f6373dc731d9feb24d6509d9c"}, "closed": true, "closedAt": "2020-03-02T06:17:37Z", "author": {"login": "BuddhiWathsala"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIW5x_AFqTM2NTQ4MDEyMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcJnfKQAFqTM2Njk2NzYwOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1NDgwMTIy", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21275#pullrequestreview-365480122", "createdAt": "2020-02-27T08:12:05Z", "commit": {"oid": "a629b58aa96dcd4b51d4dacbb876c5b717e0543b"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwODoxMjowNVrOFvIlxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwODoxODoxOFrOFvIvgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk2ODEzMg==", "bodyText": "Shall we remove this content to http_commons.bal file as it contains all the commonly used types?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21275#discussion_r384968132", "createdAt": "2020-02-27T08:12:05Z", "author": {"login": "chamil321"}, "path": "stdlib/http/src/main/ballerina/src/http/common_client_config.bal", "diffHunk": "@@ -0,0 +1,46 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a629b58aa96dcd4b51d4dacbb876c5b717e0543b"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk2OTE5Nw==", "bodyText": "We can remove ProxyConfig as well as it is already grouped under ClientHttp1Settings type", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21275#discussion_r384969197", "createdAt": "2020-02-27T08:14:37Z", "author": {"login": "chamil321"}, "path": "stdlib/http/src/main/ballerina/src/http/resiliency/failover_client_endpoint.bal", "diffHunk": "@@ -434,37 +434,27 @@ function populateErrorsFromLastResponse (Response inResponse, ClientError?[] fai\n \n # Provides a set of HTTP related configurations and failover related configurations.\n #\n-# + httpVersion - The HTTP version to be used to communicate with the endpoint\n-# + http1Settings - Configurations related to HTTP/1.x protocol\n-# + http2Settings - Configurations related to HTTP/2 protocol\n-# + timeoutInMillis - The maximum time to wait (in milliseconds) for a response before closing the connection\n-# + forwarded - The choice of setting `forwarded`/`x-forwarded` header\n-# + followRedirects - Redirect related options\n-# + poolConfig - Configurations associated with request pooling\n+# httpVersion - Copied from CommonClientConfiguration\n+# http1Settings - Copied from CommonClientConfiguration\n+# http2Settings - Copied from CommonClientConfiguration\n+# timeoutInMillis - Copied from CommonClientConfiguration\n+# forwarded - Copied from CommonClientConfiguration\n+# followRedirects - Copied from CommonClientConfiguration\n+# poolConfig - Copied from CommonClientConfiguration\n+# cache - Copied from CommonClientConfiguration\n+# compression - Copied from CommonClientConfiguration\n+# auth - Copied from CommonClientConfiguration\n+# circuitBreaker - Copied from CommonClientConfiguration\n+# retryConfig - Copied from CommonClientConfiguration\n+# cookieConfig - Copied from CommonClientConfiguration\n # + proxy - Proxy related options\n # + targets - The upstream HTTP endpoints among which the incoming HTTP traffic load should be sent on failover\n-# + cache - The configurations for controlling the caching behaviour\n-# + compression - Specifies the way of handling compression (`accept-encoding`) header\n-# + auth - HTTP authentication related configurations\n-# + circuitBreaker - Circuit Breaker behaviour configurations\n-# + retryConfig - Retry related options\n # + failoverCodes - Array of HTTP response status codes for which the failover behaviour should be triggered\n # + intervalInMillis - Failover delay interval in milliseconds\n public type FailoverClientConfiguration record {|\n-    string httpVersion = HTTP_1_1;\n-    ClientHttp1Settings http1Settings = {};\n-    ClientHttp2Settings http2Settings = {};\n-    int timeoutInMillis = 60000;\n-    string forwarded = \"disable\";\n-    FollowRedirects? followRedirects = ();\n+    *CommonClientConfiguration;\n     ProxyConfig? proxy = ();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a629b58aa96dcd4b51d4dacbb876c5b717e0543b"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk2OTM4Mg==", "bodyText": "We can remove ProxyConfig as well as it is already grouped under ClientHttp1Settings type", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21275#discussion_r384969382", "createdAt": "2020-02-27T08:15:06Z", "author": {"login": "chamil321"}, "path": "stdlib/http/src/main/ballerina/src/http/resiliency/load_balance_client_endpoint.bal", "diffHunk": "@@ -304,37 +304,27 @@ function populateGenericLoadBalanceActionError(LoadBalanceActionErrorData loadBa\n \n # The configurations related to the load balance client endpoint.\n #\n-# + httpVersion - The HTTP version to be used to communicate with the endpoint\n-# + http1Settings - Configurations related to HTTP/1.x protocol\n-# + http2Settings - Configurations related to HTTP/2 protocol\n-# + timeoutInMillis - The maximum time to wait (in milli seconds) for a response before closing the connection\n-# + forwarded - The choice of setting forwarded/x-forwarded header\n-# + followRedirects - Redirect related options\n-# + poolConfig - Configurations associated with request pooling\n+# httpVersion - Copied from CommonClientConfiguration\n+# http1Settings - Copied from CommonClientConfiguration\n+# http2Settings - Copied from CommonClientConfiguration\n+# timeoutInMillis - Copied from CommonClientConfiguration\n+# forwarded - Copied from CommonClientConfiguration\n+# followRedirects - Copied from CommonClientConfiguration\n+# poolConfig - Copied from CommonClientConfiguration\n+# cache - Copied from CommonClientConfiguration\n+# compression - Copied from CommonClientConfiguration\n+# auth - Copied from CommonClientConfiguration\n+# circuitBreaker - Copied from CommonClientConfiguration\n+# retryConfig - Copied from CommonClientConfiguration\n+# cookieConfig - Copied from CommonClientConfiguration\n # + proxy - Proxy related options\n # + targets - The upstream HTTP endpoints among which the incoming HTTP traffic load should be distributed\n-# + cache - The configurations for controlling the caching behaviour\n-# + compression - Specifies the way of handling compression (`accept-encoding`) header\n-# + auth - Configurations related to the HTTP authentication.\n-# + circuitBreaker - Circuit Breaker configuration\n-# + retryConfig - Retry related options\n # + lbRule - LoadBalancing rule\n # + failover - Configuration for load balancer whether to fail over in case of a failure\n public type LoadBalanceClientConfiguration record {|\n-    string httpVersion = HTTP_1_1;\n-    ClientHttp1Settings http1Settings = {};\n-    ClientHttp2Settings http2Settings = {};\n-    int timeoutInMillis = 60000;\n-    string forwarded = \"disable\";\n-    FollowRedirects? followRedirects = ();\n+    *CommonClientConfiguration;\n     ProxyConfig? proxy = ();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a629b58aa96dcd4b51d4dacbb876c5b717e0543b"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk3MDYyNA==", "bodyText": "Shall we format the JSON using https://jsonformatter.curiousconcept.com/ and paste it here. Ideally, we need to add only the specific change. Most of these changes are just indentation.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21275#discussion_r384970624", "createdAt": "2020-02-27T08:18:18Z", "author": {"login": "chamil321"}, "path": "language-server/modules/langserver-core/src/test/resources/completion/function/chainCompletion4.json", "diffHunk": "@@ -4,358 +4,336 @@\n     \"character\": 7\n   },\n   \"source\": \"function/source/chainCompletion4.bal\",\n-  \"items\": [\n-    {\n-      \"label\": \"shift()((any|error))\",\n-      \"kind\": \"Function\",\n-      \"detail\": \"Function\",\n-      \"documentation\": {\n-        \"right\": {\n-          \"kind\": \"markdown\",\n-          \"value\": \"**Package:** _ballerina/lang.array_  \\n  \\nRemoves and returns first member of an array.\\nThe array must not be empty.\\n  \\n  \\n  \\n**Returns** `(any|error)`   \\n- the value that was the first member of the array  \\n  \\n\"\n-        }\n-      },\n-      \"sortText\": \"120\",\n-      \"insertText\": \"shift()\",\n-      \"insertTextFormat\": \"Snippet\"\n+  \"items\": [{\n+    \"label\": \"shift()((any|error))\",\n+    \"kind\": \"Function\",\n+    \"detail\": \"Function\",\n+    \"documentation\": {\n+      \"right\": {\n+        \"kind\": \"markdown\",\n+        \"value\": \"**Package:** _ballerina/lang.array_  \\n  \\nRemoves and returns first member of an array.\\nThe array must not be empty.\\n  \\n  \\n  \\n**Returns** `(any|error)`   \\n- the value that was the first member of the array  \\n  \\n\"\n+      }\n     },\n-    {\n-      \"label\": \"toStream()(stream<(anydata|error)><(anydata|error)>)\",\n-      \"kind\": \"Function\",\n-      \"detail\": \"Function\",\n-      \"documentation\": {\n-        \"right\": {\n-          \"kind\": \"markdown\",\n-          \"value\": \"**Package:** _ballerina/lang.array_  \\n  \\nReturns a stream from the given array.\\n  \\n\"\n-        }\n-      },\n-      \"sortText\": \"120\",\n-      \"insertText\": \"toStream()\",\n-      \"insertTextFormat\": \"Snippet\"\n+    \"sortText\": \"120\",\n+    \"insertText\": \"shift()\",\n+    \"insertTextFormat\": \"Snippet\"\n+  }, {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a629b58aa96dcd4b51d4dacbb876c5b717e0543b"}, "originalPosition": 44}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a0cf134de3b5c6782f90b4b858100423a1e6fba", "author": {"user": {"login": "BuddhiWathsala", "name": "Buddhi Kothalawala"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9a0cf134de3b5c6782f90b4b858100423a1e6fba", "committedDate": "2020-02-28T09:56:02Z", "message": "introduce a common HTTP client config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "377668ae39647e9e3cde1853ffb17aceb405a9c9", "author": {"user": {"login": "BuddhiWathsala", "name": "Buddhi Kothalawala"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/377668ae39647e9e3cde1853ffb17aceb405a9c9", "committedDate": "2020-02-28T09:56:02Z", "message": "remove repetitive fields by introducing HTTP common client config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4005b6f5acbd1f69a69c09a47ab34ce59a3653ba", "author": {"user": {"login": "BuddhiWathsala", "name": "Buddhi Kothalawala"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4005b6f5acbd1f69a69c09a47ab34ce59a3653ba", "committedDate": "2020-02-28T09:56:02Z", "message": "fix language tests by changing the expected config JSON"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd87c10979b94b173dfac65d2c398345c37c4ffa", "author": {"user": {"login": "BuddhiWathsala", "name": "Buddhi Kothalawala"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/fd87c10979b94b173dfac65d2c398345c37c4ffa", "committedDate": "2020-02-28T09:56:02Z", "message": "fix language server JSON formats"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bbf173f2e61c966f125812b80ddcdaf81b4ccff", "author": {"user": {"login": "BuddhiWathsala", "name": "Buddhi Kothalawala"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2bbf173f2e61c966f125812b80ddcdaf81b4ccff", "committedDate": "2020-02-28T09:56:02Z", "message": "move CommonClientConfiguration to http_commons.bal"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "11bea2ef9321fc834ecb2228f575185f5e3eb10d", "author": {"user": {"login": "BuddhiWathsala", "name": "Buddhi Kothalawala"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/11bea2ef9321fc834ecb2228f575185f5e3eb10d", "committedDate": "2020-02-28T09:56:02Z", "message": "remove proxy config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44296d135055b7826de9430384aaec4b1cbd9270", "author": {"user": {"login": "BuddhiWathsala", "name": "Buddhi Kothalawala"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/44296d135055b7826de9430384aaec4b1cbd9270", "committedDate": "2020-02-28T09:56:03Z", "message": "reformat lang server JSONs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c95222163095a46422e49ce2d16b1be5eb190b8b", "author": {"user": {"login": "BuddhiWathsala", "name": "Buddhi Kothalawala"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c95222163095a46422e49ce2d16b1be5eb190b8b", "committedDate": "2020-02-28T09:56:03Z", "message": "fix JSONs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69c0e28a3cbef1b3313f363342f46a63b78fea0e", "author": {"user": {"login": "BuddhiWathsala", "name": "Buddhi Kothalawala"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/69c0e28a3cbef1b3313f363342f46a63b78fea0e", "committedDate": "2020-02-28T09:56:03Z", "message": "fix completion and package import JSONs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2OTI3MjMw", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21275#pullrequestreview-366927230", "createdAt": "2020-03-02T02:57:56Z", "commit": {"oid": "69c0e28a3cbef1b3313f363342f46a63b78fea0e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2OTY3NjA4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21275#pullrequestreview-366967608", "createdAt": "2020-03-02T06:11:44Z", "commit": {"oid": "69c0e28a3cbef1b3313f363342f46a63b78fea0e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4027, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}