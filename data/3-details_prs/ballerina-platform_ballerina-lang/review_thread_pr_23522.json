{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzMzMwNTEw", "number": 23522, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxODo1MTo0NFrOD_zc3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxODo1NDoyMlrOD_zgzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4MjI5ODUzOnYy", "diffSide": "RIGHT", "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParserErrorListener.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxODo1MTo0NFrOGarzDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjoxMDoyMlrOGe3Fkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDYzMzc0MQ==", "bodyText": "We are fixing this with the following PR.\n#23500", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23522#discussion_r430633741", "createdAt": "2020-05-26T18:51:44Z", "author": {"login": "sameerajayasoma"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParserErrorListener.java", "diffHunk": "@@ -47,7 +45,8 @@ public void reportInvalidNodeError(STToken token, String message) {\n     }\n     \n     private void logError(int line, int col, String message) {\n-        PrintStream out = System.out;\n-        out.println(\"xxx.bal:\" + line + \":\" + col + \":\" + message);\n+        // TODO - Removing below lines as it breaks lang-server rpc", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2175afd8d961c8c19f2386f703f2dac00fa33ea8"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxMzAxMA==", "bodyText": "Noted", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23522#discussion_r435013010", "createdAt": "2020-06-04T06:10:22Z", "author": {"login": "suhothayan"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParserErrorListener.java", "diffHunk": "@@ -47,7 +45,8 @@ public void reportInvalidNodeError(STToken token, String message) {\n     }\n     \n     private void logError(int line, int col, String message) {\n-        PrintStream out = System.out;\n-        out.println(\"xxx.bal:\" + line + \":\" + col + \":\" + message);\n+        // TODO - Removing below lines as it breaks lang-server rpc", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDYzMzc0MQ=="}, "originalCommit": {"oid": "2175afd8d961c8c19f2386f703f2dac00fa33ea8"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4MjMwMjEzOnYy", "diffSide": "RIGHT", "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/incremental/HybridNodeStorage.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxODo1MjozOVrOGar1NQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNjoyOToxNVrOGe3gTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDYzNDI5Mw==", "bodyText": "Can you please create an issue for this change? I think we need to fix this in other places too. Issue will help us to track it. Thanks.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23522#discussion_r430634293", "createdAt": "2020-05-26T18:52:39Z", "author": {"login": "sameerajayasoma"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/incremental/HybridNodeStorage.java", "diffHunk": "@@ -80,6 +80,9 @@ HybridNode peekSubtree() {\n     }\n \n     HybridNode consumeToken() {\n+        if (currentToken == null) {\n+            currentToken = peekToken();\n+        }\n         HybridNode hybridNode = currentToken;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2175afd8d961c8c19f2386f703f2dac00fa33ea8"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAxOTg1NQ==", "bodyText": "Created an issue #23719", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23522#discussion_r435019855", "createdAt": "2020-06-04T06:29:15Z", "author": {"login": "suhothayan"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/incremental/HybridNodeStorage.java", "diffHunk": "@@ -80,6 +80,9 @@ HybridNode peekSubtree() {\n     }\n \n     HybridNode consumeToken() {\n+        if (currentToken == null) {\n+            currentToken = peekToken();\n+        }\n         HybridNode hybridNode = currentToken;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDYzNDI5Mw=="}, "originalCommit": {"oid": "2175afd8d961c8c19f2386f703f2dac00fa33ea8"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4MjMwNjA2OnYy", "diffSide": "RIGHT", "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/tree/STNode.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxODo1MzozOVrOGar3sA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNzowMjowOFrOGe4XrQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDYzNDkyOA==", "bodyText": "Can you please create an issue explaining the bug here?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23522#discussion_r430634928", "createdAt": "2020-05-26T18:53:39Z", "author": {"login": "sameerajayasoma"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/tree/STNode.java", "diffHunk": "@@ -156,7 +156,7 @@ private void updateWidth(STNode[] children, int firstChildIndex, int lastChildIn\n     private int getFirstChildIndex(STNode... children) {\n         for (int index = 0; index < children.length; index++) {\n             STNode child = children[index];\n-            if (SyntaxUtils.isSTNodePresent(child) && child.widthWithMinutiae != 0) {\n+            if (SyntaxUtils.isSTNodePresent(child) && child.widthWithLeadingMinutiae != 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2175afd8d961c8c19f2386f703f2dac00fa33ea8"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAzNDAyOQ==", "bodyText": "This seems to be unnecessary now. I'll revert this.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23522#discussion_r435034029", "createdAt": "2020-06-04T07:02:08Z", "author": {"login": "suhothayan"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/tree/STNode.java", "diffHunk": "@@ -156,7 +156,7 @@ private void updateWidth(STNode[] children, int firstChildIndex, int lastChildIn\n     private int getFirstChildIndex(STNode... children) {\n         for (int index = 0; index < children.length; index++) {\n             STNode child = children[index];\n-            if (SyntaxUtils.isSTNodePresent(child) && child.widthWithMinutiae != 0) {\n+            if (SyntaxUtils.isSTNodePresent(child) && child.widthWithLeadingMinutiae != 0) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDYzNDkyOA=="}, "originalCommit": {"oid": "2175afd8d961c8c19f2386f703f2dac00fa33ea8"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4MjMwODYyOnYy", "diffSide": "RIGHT", "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/text/StringTextDocument.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxODo1NDoyMlrOGar5Ww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQwNzowMjo0NFrOGe4Yzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDYzNTM1NQ==", "bodyText": "This class is not part of the public syntax API. I think I've mistakenly made this class public.\nWhy do you want to directly access this class anyway?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23522#discussion_r430635355", "createdAt": "2020-05-26T18:54:22Z", "author": {"login": "sameerajayasoma"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/text/StringTextDocument.java", "diffHunk": "@@ -28,7 +28,7 @@\n     private final String text;\n     private LineMap textLineMap;\n \n-    StringTextDocument(String text) {\n+    public StringTextDocument(String text) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2175afd8d961c8c19f2386f703f2dac00fa33ea8"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTAzNDMxOQ==", "bodyText": "This is not needed, as there are other ways to create StringTextDocument. I'll revert this.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23522#discussion_r435034319", "createdAt": "2020-06-04T07:02:44Z", "author": {"login": "suhothayan"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/text/StringTextDocument.java", "diffHunk": "@@ -28,7 +28,7 @@\n     private final String text;\n     private LineMap textLineMap;\n \n-    StringTextDocument(String text) {\n+    public StringTextDocument(String text) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDYzNTM1NQ=="}, "originalCommit": {"oid": "2175afd8d961c8c19f2386f703f2dac00fa33ea8"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3634, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}