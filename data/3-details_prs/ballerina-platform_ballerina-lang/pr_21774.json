{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg4OTYyODk2", "number": 21774, "title": "Fix error logs of cache module", "bodyText": "Purpose\nThis PR remove the logging of the errors due to cache related operations.\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-03-16T03:29:20Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21774", "merged": true, "mergeCommit": {"oid": "5e83668221592c9818d23982d043b528afd9aa83"}, "closed": true, "closedAt": "2020-03-16T23:02:40Z", "author": {"login": "ldclakmal"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcOFqDkgH2gAyMzg4OTYyODk2OmM3ZGU0NGE1NTQzMGRlNmFlZjkwYzg1YThkZmRmMzMxYWY2YmIxYTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOQpJngFqTM3NTM3NzI2Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c7de44a55430de6aef90c85a8dfdf331af6bb1a6", "author": {"user": {"login": "ldclakmal", "name": "Chanaka Lakmal"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c7de44a55430de6aef90c85a8dfdf331af6bb1a6", "committedDate": "2020-03-16T03:36:29Z", "message": "Fix error logs of cache module"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "adc290919eb123b033d1070fef41d53d3f9edd54", "author": {"user": {"login": "ldclakmal", "name": "Chanaka Lakmal"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/adc290919eb123b033d1070fef41d53d3f9edd54", "committedDate": "2020-03-16T03:27:12Z", "message": "Fix error logs of cache module"}, "afterCommit": {"oid": "c7de44a55430de6aef90c85a8dfdf331af6bb1a6", "author": {"user": {"login": "ldclakmal", "name": "Chanaka Lakmal"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c7de44a55430de6aef90c85a8dfdf331af6bb1a6", "committedDate": "2020-03-16T03:36:29Z", "message": "Fix error logs of cache module"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0ODk2MDUx", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21774#pullrequestreview-374896051", "createdAt": "2020-03-16T03:38:54Z", "commit": {"oid": "c7de44a55430de6aef90c85a8dfdf331af6bb1a6"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwMzozODo1NVrOF2ktcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwMzozOToxMlrOF2ktmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjc2ODg4Mg==", "bodyText": "Don't we need to check whether the debug has enabled or not?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21774#discussion_r392768882", "createdAt": "2020-03-16T03:38:55Z", "author": {"login": "chamil321"}, "path": "stdlib/cache/src/main/ballerina/src/cache/cache_errors.bal", "diffHunk": "@@ -47,3 +47,19 @@ function prepareError(string message, error? err = ()) returns Error {\n     }\n     return cacheError;\n }\n+\n+# Prepare the `error` as an `Error`.\n+#\n+# + message - Error message\n+# + err - `error` instance\n+# + return - Prepared `Error` instance\n+function prepareErrorWithDebugLog(string message, error? err = ()) returns Error {\n+    log:printDebug(message, err);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c7de44a55430de6aef90c85a8dfdf331af6bb1a6"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjc2ODkyMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            }\n          \n          \n            \n            }", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21774#discussion_r392768920", "createdAt": "2020-03-16T03:39:12Z", "author": {"login": "chamil321"}, "path": "stdlib/cache/src/main/ballerina/src/cache/cache_errors.bal", "diffHunk": "@@ -47,3 +47,19 @@ function prepareError(string message, error? err = ()) returns Error {\n     }\n     return cacheError;\n }\n+\n+# Prepare the `error` as an `Error`.\n+#\n+# + message - Error message\n+# + err - `error` instance\n+# + return - Prepared `Error` instance\n+function prepareErrorWithDebugLog(string message, error? err = ()) returns Error {\n+    log:printDebug(message, err);\n+    Error cacheError;\n+    if (err is error) {\n+        cacheError = error(CACHE_ERROR, message = message, cause = err);\n+    } else {\n+        cacheError = error(CACHE_ERROR, message = message);\n+    }\n+    return cacheError;\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c7de44a55430de6aef90c85a8dfdf331af6bb1a6"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d318ea7f0a283342354a9095c6d44c18fdbc1753", "author": {"user": {"login": "ldclakmal", "name": "Chanaka Lakmal"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d318ea7f0a283342354a9095c6d44c18fdbc1753", "committedDate": "2020-03-16T03:45:20Z", "message": "Fix review suggestions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0OTA1NjUy", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21774#pullrequestreview-374905652", "createdAt": "2020-03-16T04:27:11Z", "commit": {"oid": "d318ea7f0a283342354a9095c6d44c18fdbc1753"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwNDoyNzoxMVrOF2lNqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQwNDoyNzoxMVrOF2lNqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjc3NzEzMQ==", "bodyText": "Do we need to make the log statement a part of this function? Doing so defeats the purpose of using the log function which takes a function pointer. The purpose of it is to delay the evaluation of any parameters passed to the log function. Using it like this doesn't achieve that objective. You might as well use the log function which takes a string param.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21774#discussion_r392777131", "createdAt": "2020-03-16T04:27:11Z", "author": {"login": "pubudu91"}, "path": "stdlib/cache/src/main/ballerina/src/cache/cache_errors.bal", "diffHunk": "@@ -47,3 +47,21 @@ function prepareError(string message, error? err = ()) returns Error {\n     }\n     return cacheError;\n }\n+\n+# Prepare the `error` as an `Error`.\n+#\n+# + message - Error message\n+# + err - `error` instance\n+# + return - Prepared `Error` instance\n+function prepareErrorWithDebugLog(string message, error? err = ()) returns Error {\n+    log:printDebug(function() returns string {\n+        return message;\n+    });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d318ea7f0a283342354a9095c6d44c18fdbc1753"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0OTM0Mzg5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21774#pullrequestreview-374934389", "createdAt": "2020-03-16T06:22:57Z", "commit": {"oid": "d318ea7f0a283342354a9095c6d44c18fdbc1753"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a674f02a08ee1eff16da0bc6b8577fce31a3a7d9", "author": {"user": {"login": "ldclakmal", "name": "Chanaka Lakmal"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a674f02a08ee1eff16da0bc6b8577fce31a3a7d9", "committedDate": "2020-03-16T09:00:13Z", "message": "Revert log with function pointers"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1a43013d6df6f6aa478d0e2e1f9b0b54438beceb", "author": {"user": {"login": "ldclakmal", "name": "Chanaka Lakmal"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1a43013d6df6f6aa478d0e2e1f9b0b54438beceb", "committedDate": "2020-03-16T08:42:40Z", "message": "Revert log with function pointers"}, "afterCommit": {"oid": "a674f02a08ee1eff16da0bc6b8577fce31a3a7d9", "author": {"user": {"login": "ldclakmal", "name": "Chanaka Lakmal"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a674f02a08ee1eff16da0bc6b8577fce31a3a7d9", "committedDate": "2020-03-16T09:00:13Z", "message": "Revert log with function pointers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65782a738ceaf5a90bc067e72d2c10d941d31779", "author": {"user": {"login": "ldclakmal", "name": "Chanaka Lakmal"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/65782a738ceaf5a90bc067e72d2c10d941d31779", "committedDate": "2020-03-16T10:43:17Z", "message": "Merge branch 'stage' of https://github.com/ballerina-platform/ballerina-lang into fix-cache-master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0839973f2de498c2bb10251a08a13bed8ba476d9", "author": {"user": {"login": "ldclakmal", "name": "Chanaka Lakmal"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0839973f2de498c2bb10251a08a13bed8ba476d9", "committedDate": "2020-03-16T15:08:02Z", "message": "Merge branch 'stage' of https://github.com/ballerina-platform/ballerina-lang into fix-cache-master"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1Mzc3MjY3", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21774#pullrequestreview-375377267", "createdAt": "2020-03-16T16:24:27Z", "commit": {"oid": "0839973f2de498c2bb10251a08a13bed8ba476d9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3940, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}