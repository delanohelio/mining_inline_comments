{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA5MjYyNzQ0", "number": 22907, "title": "Add support for Enums", "bodyText": "Purpose\nThis PR adds support for enum syntax.\nFixes #22680\nSamples\nAdds support for the following\npublic enum Color {\n  RED,\n  GREEN,\n  BLUE\n}\nis equivalent to\npublic const RED = \"RED\";\npublic const GREEN = \"GREEN\";\npublic const BLUE = \"BLUE\";\npublic type Color RED|GREEN|BLUE;\nEnum members can also have expressions of type string.\npublic enum Color {\n  RED = \"red\",\n  GREEN,\n  BLUE\n}\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-04-27T05:37:20Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22907", "merged": true, "mergeCommit": {"oid": "34423bd2a169f8f54ba6e998e2cb935c49e84801"}, "closed": true, "closedAt": "2020-05-13T21:22:45Z", "author": {"login": "irshadnilam"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcboVZugH2gAyNDA5MjYyNzQ0Ojg5NjE4M2IyN2RlMDYxODkyZDE1YmFhZTI3ZjdlOWRkYzBlMzNhNTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABchDlwIAFqTQxMTQwMjYxNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "896183b27de061892d15baae27f7e9ddc0e33a57", "author": {"user": {"login": "irshadnilam", "name": "Irshad Nilam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/896183b27de061892d15baae27f7e9ddc0e33a57", "committedDate": "2020-04-27T05:21:37Z", "message": "Modify grammar to support enum syntax"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95fd60f2226913a4e634a5292f86812b665c8413", "author": {"user": {"login": "irshadnilam", "name": "Irshad Nilam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/95fd60f2226913a4e634a5292f86812b665c8413", "committedDate": "2020-04-27T05:23:49Z", "message": "Construct enums as constants and typedef"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "463ffa23d7f5e5ce9512b5b40d58d95ef8884759", "author": {"user": {"login": "irshadnilam", "name": "Irshad Nilam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/463ffa23d7f5e5ce9512b5b40d58d95ef8884759", "committedDate": "2020-04-27T05:30:11Z", "message": "Add enum tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0MDY5NzU5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22907#pullrequestreview-404069759", "createdAt": "2020-05-01T08:36:07Z", "commit": {"oid": "463ffa23d7f5e5ce9512b5b40d58d95ef8884759"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMDY4NjAw", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22907#pullrequestreview-411068600", "createdAt": "2020-05-13T15:55:09Z", "commit": {"oid": "463ffa23d7f5e5ce9512b5b40d58d95ef8884759"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNDAyNjE0", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22907#pullrequestreview-411402614", "createdAt": "2020-05-14T01:18:58Z", "commit": {"oid": "463ffa23d7f5e5ce9512b5b40d58d95ef8884759"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwMToxODo1OFrOGVI2Jg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwMTo0OTo1NVrOGVJUug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDgxODIxNA==", "bodyText": "The grammar for module-enum-decl in the spec is\nmodule-enum-decl :=\n   metadata\n   [public] enum identifier { enum-member (, enum-member)* }\n\nAt least one enum-member is required.\nSo shouldn't this be\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        (enumMember (COMMA enumMember)*)? RIGHT_BRACE\n          \n          \n            \n                        enumMember (COMMA enumMember)* RIGHT_BRACE", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22907#discussion_r424818214", "createdAt": "2020-05-14T01:18:58Z", "author": {"login": "MaryamZi"}, "path": "compiler/ballerina-lang/src/main/resources/grammar/BallerinaParser.g4", "diffHunk": "@@ -156,6 +157,15 @@ constantDefinition\n     :   PUBLIC? CONST typeName? Identifier ASSIGN constantExpression SEMICOLON\n     ;\n \n+enumDefinition\n+    :   documentationString? annotationAttachment* PUBLIC? ENUM Identifier LEFT_BRACE\n+            (enumMember (COMMA enumMember)*)? RIGHT_BRACE", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "463ffa23d7f5e5ce9512b5b40d58d95ef8884759"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDgyNDIwNA==", "bodyText": "The following results in a bad, sad error atm.\npublic enum Color {\n\n}", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22907#discussion_r424824204", "createdAt": "2020-05-14T01:42:36Z", "author": {"login": "MaryamZi"}, "path": "compiler/ballerina-lang/src/main/resources/grammar/BallerinaParser.g4", "diffHunk": "@@ -156,6 +157,15 @@ constantDefinition\n     :   PUBLIC? CONST typeName? Identifier ASSIGN constantExpression SEMICOLON\n     ;\n \n+enumDefinition\n+    :   documentationString? annotationAttachment* PUBLIC? ENUM Identifier LEFT_BRACE\n+            (enumMember (COMMA enumMember)*)? RIGHT_BRACE", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDgxODIxNA=="}, "originalCommit": {"oid": "463ffa23d7f5e5ce9512b5b40d58d95ef8884759"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDgyNjA0Mg==", "bodyText": "The spec says the attachment point for module-enum-decl is type.\nBut this seems to be matching for consts now.\npublic annotation X on type;\npublic const annotation Y on source const;\n\n@X // should work, doesn't\n@Y // should fail, doesn't\npublic enum Color {\n    RED,\n    BLUE\n}", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22907#discussion_r424826042", "createdAt": "2020-05-14T01:49:55Z", "author": {"login": "MaryamZi"}, "path": "compiler/ballerina-lang/src/main/resources/grammar/BallerinaParser.g4", "diffHunk": "@@ -156,6 +157,15 @@ constantDefinition\n     :   PUBLIC? CONST typeName? Identifier ASSIGN constantExpression SEMICOLON\n     ;\n \n+enumDefinition\n+    :   documentationString? annotationAttachment* PUBLIC? ENUM Identifier LEFT_BRACE", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "463ffa23d7f5e5ce9512b5b40d58d95ef8884759"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3479, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}