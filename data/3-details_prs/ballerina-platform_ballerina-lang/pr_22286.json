{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk1MTA3OTI0", "number": 22286, "title": "Fix taint analyze bad-sad issue 21259", "bodyText": "Purpose\nFix bad-sad error  when taint analyzing named args.\nFixes #21259\nApproach\n\nDescribe how you are implementing the solutions along with the design details.\n\nSamples\n\nProvide high-level details about the samples related to this feature.\n\nRemarks\n\nList any other known issues, related PRs, TODO items, or any other notes related to the PR.\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-03-28T15:06:41Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22286", "merged": true, "mergeCommit": {"oid": "2ad7ae8da2176856158c8970b9a533c6ff59171b"}, "closed": true, "closedAt": "2020-04-01T11:05:41Z", "author": {"login": "rdhananjaya"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcR9EROAH2gAyMzk1MTA3OTI0OmM3NDgxNGJkOWQyYzA2ZjhkYzI2OWM1ZGYxNjBiNzFhMmQ1ZGMwNjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcTVq2NgFqTM4NTQ4MTM1MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c74814bd9d2c06f8dc269c5df160b71a2d5dc069", "author": {"user": {"login": "rdhananjaya", "name": "Dhananjaya [Danje]"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c74814bd9d2c06f8dc269c5df160b71a2d5dc069", "committedDate": "2020-03-28T03:51:40Z", "message": "Improve taint analyzing named args"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "136af4c42b07cfc662edfc6b9dd5a9c54c3ba3a2", "author": {"user": {"login": "rdhananjaya", "name": "Dhananjaya [Danje]"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/136af4c42b07cfc662edfc6b9dd5a9c54c3ba3a2", "committedDate": "2020-03-28T15:02:46Z", "message": "Refactor analyzeInvocation method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eed8730e359a2b394fcf0dadb33bd8cbe4e28695", "author": {"user": {"login": "rdhananjaya", "name": "Dhananjaya [Danje]"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/eed8730e359a2b394fcf0dadb33bd8cbe4e28695", "committedDate": "2020-03-29T03:48:23Z", "message": "Fix failing integration test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "091e88fb4b5d61a111b0f4399ff7a2a244eb2440", "author": {"user": {"login": "rdhananjaya", "name": "Dhananjaya [Danje]"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/091e88fb4b5d61a111b0f4399ff7a2a244eb2440", "committedDate": "2020-03-29T09:04:59Z", "message": "Fix lambda functions skipping taint errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1162af60876eb546e5367a1b84828d811e1331fb", "author": {"user": {"login": "rdhananjaya", "name": "Dhananjaya [Danje]"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1162af60876eb546e5367a1b84828d811e1331fb", "committedDate": "2020-03-30T06:55:01Z", "message": "Reset lambda function fix done for #21823"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0NTYyOTYw", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22286#pullrequestreview-384562960", "createdAt": "2020-03-31T09:37:01Z", "commit": {"oid": "1162af60876eb546e5367a1b84828d811e1331fb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwOTozNzowMVrOF-NWpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQwOTozNzowMVrOF-NWpw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDc3NDgyMw==", "bodyText": "Shall we replace this with a normal loop?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22286#discussion_r400774823", "createdAt": "2020-03-31T09:37:01Z", "author": {"login": "pubudu91"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/semantics/analyzer/TaintAnalyzer.java", "diffHunk": "@@ -2280,111 +2281,110 @@ private void analyzeInvocation(BLangInvocation invocationExpr) {\n                 }\n             }\n         }\n+\n         // Check tainted status of each argument. If argument is tainted, get the taint table when the given parameter\n         // is tainted and use it to update \"allParamsUntaintedRecord\". Do same for all parameters to identify the\n         // complete taint outcome of the current function.\n-        if (invocationExpr.argExprs != null) {\n-            int requiredParamCount = invokableSymbol.params.size();\n+        int requiredParamCount = invokableSymbol.params.size();\n \n-            int namedArgsCount = (int) invocationExpr.requiredArgs.stream()\n-                    .filter(a -> a.getKind() == NodeKind.NAMED_ARGS_EXPR).count();\n-            int requiredArgsCount = invocationExpr.requiredArgs.size() - namedArgsCount;\n-            int restArgsCount = invocationExpr.restArgs.size();\n+        int namedArgsCount = (int) invocationExpr.requiredArgs.stream()\n+                .filter(a -> a.getKind() == NodeKind.NAMED_ARGS_EXPR).count();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1162af60876eb546e5367a1b84828d811e1331fb"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3804655cf7d2ebab97831e506680091aed577c95", "author": {"user": {"login": "rdhananjaya", "name": "Dhananjaya [Danje]"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3804655cf7d2ebab97831e506680091aed577c95", "committedDate": "2020-03-31T09:47:29Z", "message": "Replace java stream with a foreach loop"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1NDgxMzUw", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22286#pullrequestreview-385481350", "createdAt": "2020-04-01T11:05:27Z", "commit": {"oid": "3804655cf7d2ebab97831e506680091aed577c95"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4242, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}