{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczMjQwMTA3", "number": 20965, "title": "Improve the error message for 'ballerina pull' command", "bodyText": "Purpose\n\n$title\nFixes #18466\n\nApproach\n\nDescribe how you are implementing the solutions along with the design details.\n\nSamples\n\nProvide high-level details about the samples related to this feature.\n\nRemarks\n\nList any other known issues, related PRs, TODO items, or any other notes related to the PR.\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-02-10T16:46:45Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965", "merged": true, "mergeCommit": {"oid": "41fa9fc0b7680153009fb05f4f4f6df2405f7418"}, "closed": true, "closedAt": "2020-02-27T04:46:55Z", "author": {"login": "suganyasuven"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcC_tScgH2gAyMzczMjQwMTA3OmZlNjBlNjJmZmRkN2U5MmY4ZTVhODlkYzViZDUzYzM0NTk1MTZhMWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcGFti3AH2gAyMzczMjQwMTA3OjVmYWQyYTIxM2FhZTdlN2ZkMjc1ODZhMWFjM2M4NTNmNWZiODMyMTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fe60e62ffdd7e92f8e5a89dc5bd53c3459516a1e", "author": {"user": {"login": "suganyasuven", "name": "Suganya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/fe60e62ffdd7e92f8e5a89dc5bd53c3459516a1e", "committedDate": "2020-02-10T16:27:25Z", "message": "Modify the error message for 'ballerina pull' command"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02a392c11f05a1f141d9e0ecff90ab02ccb70ada", "author": {"user": {"login": "suganyasuven", "name": "Suganya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/02a392c11f05a1f141d9e0ecff90ab02ccb70ada", "committedDate": "2020-02-11T08:31:35Z", "message": "Exit with non-zero status code for error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwMTM5NDM1", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#pullrequestreview-360139435", "createdAt": "2020-02-18T08:19:48Z", "commit": {"oid": "02a392c11f05a1f141d9e0ecff90ab02ccb70ada"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQwODoxOTo0OFrOFq41pA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQwODoxOTo0OFrOFq41pA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDUxNTc0OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                \"Pull command requires the names of the organization and module.\",\n          \n          \n            \n                                \"pull command requires the names of the organization and module.\",\n          \n      \n    \n    \n  \n\nAren't we using simple letters only for warnings?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#discussion_r380515748", "createdAt": "2020-02-18T08:19:48Z", "author": {"login": "pramodya1994"}, "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java", "diffHunk": "@@ -81,28 +81,34 @@ public void execute() {\n \n         String resourceName = argList.get(0);\n         String orgName;\n+        String packageName;\n         String moduleName;\n         String version;\n \n         // Get org-name\n-        int orgNameIndex = resourceName.indexOf(\"/\");\n-        if (orgNameIndex != -1) {\n-            orgName = resourceName.substring(0, orgNameIndex);\n+        String[] module = resourceName.split(\"/\");\n+        if (module.length == 2) {\n+            orgName = module[0];\n+            packageName = module[1];\n             if (orgName.equals(\"ballerina\")) {\n                 throw LauncherUtils.createLauncherException(\"`Ballerina` is the builtin organization and its modules\"\n                                                                     + \" are included in the runtime.\");\n             }\n         } else {\n-            throw LauncherUtils.createLauncherException(\"no module-name provided\");\n+            CommandUtil.printError(outStream,\n+                    \"Pull command requires the names of the organization and module.\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "02a392c11f05a1f141d9e0ecff90ab02ccb70ada"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "784fbaeb899f3bec989abc5166bedcc244565fb6", "author": {"user": {"login": "suganyasuven", "name": "Suganya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/784fbaeb899f3bec989abc5166bedcc244565fb6", "committedDate": "2020-02-18T10:06:10Z", "message": "Modify error message"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwODc0Njgz", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#pullrequestreview-360874683", "createdAt": "2020-02-19T06:51:07Z", "commit": {"oid": "7222adea8976c8fbd9b04704b30bc9d19fce5508"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwNjo1MTowN1rOFrcxBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwNjo1NDo0N1rOFrc1Qg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEwNDM5MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return (Pattern.matches(getPullCommandRegex(), str));\n          \n          \n            \n                    return Pattern.matches(getPullCommandRegex(), str);", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#discussion_r381104391", "createdAt": "2020-02-19T06:51:07Z", "author": {"login": "warunalakshitha"}, "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java", "diffHunk": "@@ -147,4 +155,12 @@ public void printUsage(StringBuilder out) {\n     @Override\n     public void setParentCmdParser(CommandLine parentCmdParser) {\n     }\n+\n+    private String getPullCommandRegex() {\n+        return MODULE_NAME_REGEX;\n+    }\n+\n+    public boolean validateModuleName(String str) {\n+        return (Pattern.matches(getPullCommandRegex(), str));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7222adea8976c8fbd9b04704b30bc9d19fce5508"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEwNDg1OA==", "bodyText": "Shall we use one spilt function and use return array to get module name and version? we can remove contains and check split array", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#discussion_r381104858", "createdAt": "2020-02-19T06:52:36Z", "author": {"login": "warunalakshitha"}, "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java", "diffHunk": "@@ -81,28 +83,34 @@ public void execute() {\n \n         String resourceName = argList.get(0);\n         String orgName;\n+        String packageName;\n         String moduleName;\n         String version;\n \n         // Get org-name\n-        int orgNameIndex = resourceName.indexOf(\"/\");\n-        if (orgNameIndex != -1) {\n-            orgName = resourceName.substring(0, orgNameIndex);\n-            if (orgName.equals(\"ballerina\")) {\n-                throw LauncherUtils.createLauncherException(\"`Ballerina` is the builtin organization and its modules\"\n-                                                                    + \" are included in the runtime.\");\n-            }\n-        } else {\n-            throw LauncherUtils.createLauncherException(\"no module-name provided\");\n+        if (!validateModuleName(resourceName)) {\n+            CommandUtil.printError(outStream,\n+                    \"invalid module name. Provide the module-name with the org-name\",\n+                    \"ballerina pull {<org-name>/<module-name> | <org-name>/<module-name>:<version>}\",\n+                    false);\n+            Runtime.getRuntime().exit(1);\n+            return;\n+        }\n+\n+        String[] module = resourceName.split(\"/\");\n+        orgName = module[0];\n+        packageName = module[1];\n+        if (orgName.equals(\"ballerina\")) {\n+            throw LauncherUtils.createLauncherException(\"`Ballerina` is the builtin organization and its modules\"\n+                    + \" are included in the runtime.\");\n         }\n \n         // Get module name\n-        int packageNameIndex = resourceName.indexOf(\":\");\n-        if (packageNameIndex != -1) { // version is provided\n-            moduleName = resourceName.substring(orgNameIndex + 1, packageNameIndex);\n-            version = resourceName.substring(packageNameIndex + 1, resourceName.length());\n+        if (packageName.contains(\":\")) { // version is provided", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7222adea8976c8fbd9b04704b30bc9d19fce5508"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEwNTEwNg==", "bodyText": "space after org name", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#discussion_r381105106", "createdAt": "2020-02-19T06:53:23Z", "author": {"login": "warunalakshitha"}, "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java", "diffHunk": "@@ -81,28 +83,34 @@ public void execute() {\n \n         String resourceName = argList.get(0);\n         String orgName;\n+        String packageName;\n         String moduleName;\n         String version;\n \n         // Get org-name\n-        int orgNameIndex = resourceName.indexOf(\"/\");\n-        if (orgNameIndex != -1) {\n-            orgName = resourceName.substring(0, orgNameIndex);\n-            if (orgName.equals(\"ballerina\")) {\n-                throw LauncherUtils.createLauncherException(\"`Ballerina` is the builtin organization and its modules\"\n-                                                                    + \" are included in the runtime.\");\n-            }\n-        } else {\n-            throw LauncherUtils.createLauncherException(\"no module-name provided\");\n+        if (!validateModuleName(resourceName)) {\n+            CommandUtil.printError(outStream,\n+                    \"invalid module name. Provide the module-name with the org-name\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7222adea8976c8fbd9b04704b30bc9d19fce5508"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEwNTM1OQ==", "bodyText": "start with simple letter and shall we remove starting space.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#discussion_r381105359", "createdAt": "2020-02-19T06:54:17Z", "author": {"login": "warunalakshitha"}, "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java", "diffHunk": "@@ -81,28 +83,34 @@ public void execute() {\n \n         String resourceName = argList.get(0);\n         String orgName;\n+        String packageName;\n         String moduleName;\n         String version;\n \n         // Get org-name\n-        int orgNameIndex = resourceName.indexOf(\"/\");\n-        if (orgNameIndex != -1) {\n-            orgName = resourceName.substring(0, orgNameIndex);\n-            if (orgName.equals(\"ballerina\")) {\n-                throw LauncherUtils.createLauncherException(\"`Ballerina` is the builtin organization and its modules\"\n-                                                                    + \" are included in the runtime.\");\n-            }\n-        } else {\n-            throw LauncherUtils.createLauncherException(\"no module-name provided\");\n+        if (!validateModuleName(resourceName)) {\n+            CommandUtil.printError(outStream,\n+                    \"invalid module name. Provide the module-name with the org-name\",\n+                    \"ballerina pull {<org-name>/<module-name> | <org-name>/<module-name>:<version>}\",\n+                    false);\n+            Runtime.getRuntime().exit(1);\n+            return;\n+        }\n+\n+        String[] module = resourceName.split(\"/\");\n+        orgName = module[0];\n+        packageName = module[1];\n+        if (orgName.equals(\"ballerina\")) {\n+            throw LauncherUtils.createLauncherException(\"`Ballerina` is the builtin organization and its modules\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7222adea8976c8fbd9b04704b30bc9d19fce5508"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEwNTQ3NA==", "bodyText": "Shall we add a comment on describing regex rules.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#discussion_r381105474", "createdAt": "2020-02-19T06:54:47Z", "author": {"login": "warunalakshitha"}, "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/Constants.java", "diffHunk": "@@ -37,4 +37,9 @@\n     static final String SEARCH_COMMAND = \"search\";\n     static final String CLEAN_COMMAND = \"clean\";\n     static final String UNINSTALL_COMMAND = \"uninstall\";\n+\n+    static final String MODULE_NAME_REGEX = \"[^0-9_][_\\\\w]+/[^0-9_][_\\\\.\\\\w]+|\" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7222adea8976c8fbd9b04704b30bc9d19fce5508"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed66194747b4eb7785d3a0df5cb05d56d765a22b", "author": {"user": {"login": "suganyasuven", "name": "Suganya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ed66194747b4eb7785d3a0df5cb05d56d765a22b", "committedDate": "2020-02-19T08:12:13Z", "message": "Validate the module name with regex"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d33695f42103c406a794a334522cb6f58d15246", "author": {"user": {"login": "suganyasuven", "name": "Suganya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4d33695f42103c406a794a334522cb6f58d15246", "committedDate": "2020-02-19T08:12:52Z", "message": "Fix review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwOTA3MDQz", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#pullrequestreview-360907043", "createdAt": "2020-02-19T08:08:57Z", "commit": {"oid": "eb958be5729e27e002425295624009e3d99fff83"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwODowODo1N1rOFreY7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwODoxMzoyNlrOFregEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEzMDk4OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // Get org-name\n          \n          \n            \n                    // Get the name of the organization.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#discussion_r381130989", "createdAt": "2020-02-19T08:08:57Z", "author": {"login": "praneesha"}, "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java", "diffHunk": "@@ -81,28 +83,35 @@ public void execute() {\n \n         String resourceName = argList.get(0);\n         String orgName;\n+        String packageName;\n         String moduleName;\n         String version;\n \n         // Get org-name", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb958be5729e27e002425295624009e3d99fff83"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEzMTIwMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // Get module name\n          \n          \n            \n                    // Get the name of the module.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#discussion_r381131201", "createdAt": "2020-02-19T08:09:30Z", "author": {"login": "praneesha"}, "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java", "diffHunk": "@@ -81,28 +83,35 @@ public void execute() {\n \n         String resourceName = argList.get(0);\n         String orgName;\n+        String packageName;\n         String moduleName;\n         String version;\n \n         // Get org-name\n-        int orgNameIndex = resourceName.indexOf(\"/\");\n-        if (orgNameIndex != -1) {\n-            orgName = resourceName.substring(0, orgNameIndex);\n-            if (orgName.equals(\"ballerina\")) {\n-                throw LauncherUtils.createLauncherException(\"`Ballerina` is the builtin organization and its modules\"\n-                                                                    + \" are included in the runtime.\");\n-            }\n-        } else {\n-            throw LauncherUtils.createLauncherException(\"no module-name provided\");\n+        if (!validateModuleName(resourceName)) {\n+            CommandUtil.printError(outStream,\n+                    \"invalid module name. Provide the module-name with the org-name \",\n+                    \"ballerina pull {<org-name>/<module-name> | <org-name>/<module-name>:<version>}\",\n+                    false);\n+            Runtime.getRuntime().exit(1);\n+            return;\n+        }\n+\n+        String[] moduleInfo = resourceName.split(\"/\");\n+        orgName = moduleInfo[0];\n+        packageName = moduleInfo[1];\n+        if (orgName.equals(\"ballerina\")) {\n+            throw LauncherUtils.createLauncherException(\"`ballerina` is the builtin organization and its modules\"\n+                    + \" are included in the runtime.\");\n         }\n \n         // Get module name", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb958be5729e27e002425295624009e3d99fff83"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEzMjQ4NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                //module name format : <org-name>/<module-name> | <org-name>/<module-name>:<version>\n          \n          \n            \n                //Module name format: <org-name>/<module-name> | <org-name>/<module-name>:<version>", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#discussion_r381132484", "createdAt": "2020-02-19T08:12:39Z", "author": {"login": "praneesha"}, "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/Constants.java", "diffHunk": "@@ -37,4 +37,11 @@\n     static final String SEARCH_COMMAND = \"search\";\n     static final String CLEAN_COMMAND = \"clean\";\n     static final String UNINSTALL_COMMAND = \"uninstall\";\n+\n+    //module name format : <org-name>/<module-name> | <org-name>/<module-name>:<version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83b54a671431b87a44e6efc98344f72ba798d00"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEzMjU3OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                //version format : 1, 1.*, 1.*.*\n          \n          \n            \n                //Module version format: 1, 1.*, 1.*.*", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#discussion_r381132579", "createdAt": "2020-02-19T08:12:52Z", "author": {"login": "praneesha"}, "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/Constants.java", "diffHunk": "@@ -37,4 +37,11 @@\n     static final String SEARCH_COMMAND = \"search\";\n     static final String CLEAN_COMMAND = \"clean\";\n     static final String UNINSTALL_COMMAND = \"uninstall\";\n+\n+    //module name format : <org-name>/<module-name> | <org-name>/<module-name>:<version>\n+    //version format : 1, 1.*, 1.*.*", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83b54a671431b87a44e6efc98344f72ba798d00"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTEzMjgxNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                \"invalid module name. Provide the module-name with the org-name \",\n          \n          \n            \n                                \"invalid module name. Provide the module name with the org name. \",", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#discussion_r381132816", "createdAt": "2020-02-19T08:13:26Z", "author": {"login": "praneesha"}, "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java", "diffHunk": "@@ -81,28 +83,35 @@ public void execute() {\n \n         String resourceName = argList.get(0);\n         String orgName;\n+        String packageName;\n         String moduleName;\n         String version;\n \n         // Get org-name\n-        int orgNameIndex = resourceName.indexOf(\"/\");\n-        if (orgNameIndex != -1) {\n-            orgName = resourceName.substring(0, orgNameIndex);\n-            if (orgName.equals(\"ballerina\")) {\n-                throw LauncherUtils.createLauncherException(\"`Ballerina` is the builtin organization and its modules\"\n-                                                                    + \" are included in the runtime.\");\n-            }\n-        } else {\n-            throw LauncherUtils.createLauncherException(\"no module-name provided\");\n+        if (!validateModuleName(resourceName)) {\n+            CommandUtil.printError(outStream,\n+                    \"invalid module name. Provide the module-name with the org-name \",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a83b54a671431b87a44e6efc98344f72ba798d00"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwOTMwNDQ5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#pullrequestreview-360930449", "createdAt": "2020-02-19T08:51:15Z", "commit": {"oid": "c01bf39022a848c8c55048f264aa4a83dc29d4d2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwOTM5Nzcx", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#pullrequestreview-360939771", "createdAt": "2020-02-19T09:06:04Z", "commit": {"oid": "c01bf39022a848c8c55048f264aa4a83dc29d4d2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwOTowNjowNVrOFrgAFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwOTowNjowNVrOFrgAFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTE1NzM5Ng==", "bodyText": "if (orgName.equals(\"ballerina\") || orgName.equals(\"ballerinax\") ) {\nthrow LauncherUtils.createLauncherException(\"`ballerina' and 'ballerinax' are reserved \" +\n\"organization names used by Ballerina\");\n}", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#discussion_r381157396", "createdAt": "2020-02-19T09:06:05Z", "author": {"login": "warunalakshitha"}, "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java", "diffHunk": "@@ -81,28 +83,35 @@ public void execute() {\n \n         String resourceName = argList.get(0);\n         String orgName;\n+        String packageName;\n         String moduleName;\n         String version;\n \n-        // Get org-name\n-        int orgNameIndex = resourceName.indexOf(\"/\");\n-        if (orgNameIndex != -1) {\n-            orgName = resourceName.substring(0, orgNameIndex);\n-            if (orgName.equals(\"ballerina\")) {\n-                throw LauncherUtils.createLauncherException(\"`Ballerina` is the builtin organization and its modules\"\n-                                                                    + \" are included in the runtime.\");\n-            }\n-        } else {\n-            throw LauncherUtils.createLauncherException(\"no module-name provided\");\n+        // Get the name of the organization.\n+        if (!validateModuleName(resourceName)) {\n+            CommandUtil.printError(outStream,\n+                    \"invalid module name. Provide the module name with the org name. \",\n+                    \"ballerina pull {<org-name>/<module-name> | <org-name>/<module-name>:<version>}\",\n+                    false);\n+            Runtime.getRuntime().exit(1);\n+            return;\n+        }\n+\n+        String[] moduleInfo = resourceName.split(\"/\");\n+        orgName = moduleInfo[0];\n+        packageName = moduleInfo[1];\n+        if (orgName.equals(\"ballerina\")) {\n+            throw LauncherUtils.createLauncherException(\"`ballerina` is the builtin organization and its modules\"\n+                    + \" are included in the runtime.\");\n         }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c01bf39022a848c8c55048f264aa4a83dc29d4d2"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea9e431228997fba446c0009395c7ae68d895a33", "author": {"user": {"login": "suganyasuven", "name": "Suganya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ea9e431228997fba446c0009395c7ae68d895a33", "committedDate": "2020-02-19T09:31:27Z", "message": "Check if org name is reserved one when pulling"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwOTYyNzYz", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#pullrequestreview-360962763", "createdAt": "2020-02-19T09:39:01Z", "commit": {"oid": "ea9e431228997fba446c0009395c7ae68d895a33"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNjY5NTIy", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#pullrequestreview-361669522", "createdAt": "2020-02-20T07:01:19Z", "commit": {"oid": "ea9e431228997fba446c0009395c7ae68d895a33"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwNzowMToxOVrOFsIHOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwNzowMToxOVrOFsIHOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgxNDU4Ng==", "bodyText": "This should be removed we should not special case ballerina org", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20965#discussion_r381814586", "createdAt": "2020-02-20T07:01:19Z", "author": {"login": "hevayo"}, "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/PullCommand.java", "diffHunk": "@@ -81,28 +83,35 @@ public void execute() {\n \n         String resourceName = argList.get(0);\n         String orgName;\n+        String packageName;\n         String moduleName;\n         String version;\n \n         // Get org-name\n-        int orgNameIndex = resourceName.indexOf(\"/\");\n-        if (orgNameIndex != -1) {\n-            orgName = resourceName.substring(0, orgNameIndex);\n-            if (orgName.equals(\"ballerina\")) {\n-                throw LauncherUtils.createLauncherException(\"`Ballerina` is the builtin organization and its modules\"\n-                                                                    + \" are included in the runtime.\");\n-            }\n-        } else {\n-            throw LauncherUtils.createLauncherException(\"no module-name provided\");\n+        if (!validateModuleName(resourceName)) {\n+            CommandUtil.printError(outStream,\n+                    \"invalid module name. Provide the module-name with the org-name \",\n+                    \"ballerina pull {<org-name>/<module-name> | <org-name>/<module-name>:<version>}\",\n+                    false);\n+            Runtime.getRuntime().exit(1);\n+            return;\n+        }\n+\n+        String[] moduleInfo = resourceName.split(\"/\");\n+        orgName = moduleInfo[0];\n+        packageName = moduleInfo[1];\n+        if (orgName.equals(\"ballerina\") || orgName.equals(\"ballerinax\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea9e431228997fba446c0009395c7ae68d895a33"}, "originalPosition": 42}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5fad2a213aae7e7fd27586a1ac3c853f5fb83219", "author": {"user": {"login": "suganyasuven", "name": "Suganya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5fad2a213aae7e7fd27586a1ac3c853f5fb83219", "committedDate": "2020-02-20T07:08:54Z", "message": "Remove the condition added to check if org name is reserved one"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4217, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}