{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyNTEyMjQw", "number": 25118, "title": "Improve query-expr and query-action parsing", "bodyText": "Purpose\n$subject.\nFixes #24923\nApproach\nN/A\nSamples\nN/A\nRemarks\nN/A\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-08-04T03:53:32Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25118", "merged": true, "mergeCommit": {"oid": "e29f3dcd344794e9c39d71a3cca6e5923b57016f"}, "closed": true, "closedAt": "2020-08-05T07:18:09Z", "author": {"login": "lochana-chathura"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc59LQQAH2gAyNDYyNTEyMjQwOmExMmUyYWZiNmFjZGY1ZTlmNTVjYmZlZGQ0ZTI5YjNlNzBhMjc4YjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc7172IgFqTQ2MTQwMDU5MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a12e2afb6acdf5e9f55cbfedd4e29b3e70a278b3", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a12e2afb6acdf5e9f55cbfedd4e29b3e70a278b3", "committedDate": "2020-07-30T10:36:16Z", "message": "Improve query expr parsing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "640daa2127e0999711ed9a89277ee958b7d00348", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/640daa2127e0999711ed9a89277ee958b7d00348", "committedDate": "2020-07-31T03:08:11Z", "message": "Add on-conflict and limit clause recovery support"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e30a7cdb84f75598c59ce02317281b5504944aa2", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e30a7cdb84f75598c59ce02317281b5504944aa2", "committedDate": "2020-07-31T19:11:30Z", "message": "Add join clause recovery support"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "988e47bbe8d67d29aa3aaf16a2ff22ec300a5179", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/988e47bbe8d67d29aa3aaf16a2ff22ec300a5179", "committedDate": "2020-07-31T19:18:27Z", "message": "Add query expr test cases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38c2690502bc598ef208b38ad847d8abc262dc41", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/38c2690502bc598ef208b38ad847d8abc262dc41", "committedDate": "2020-08-01T13:13:04Z", "message": "Improve query action parsing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "109b16dd8b76c2f50b1a254c8d36a08576f7c1a7", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/109b16dd8b76c2f50b1a254c8d36a08576f7c1a7", "committedDate": "2020-08-04T04:42:28Z", "message": "Refactor code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe8e85ac6729ccb4d48dcd28a2e8bb9c9eb0328b", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/fe8e85ac6729ccb4d48dcd28a2e8bb9c9eb0328b", "committedDate": "2020-08-04T05:11:45Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into improve-query\n\n\u0001 Conflicts:\n\u0001\tcompiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3825b1b06b6eeae5bd86bd8007cd29ad76790bb", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e3825b1b06b6eeae5bd86bd8007cd29ad76790bb", "committedDate": "2020-08-04T05:16:14Z", "message": "Add missing resume point"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ed32005b128bd3274eb061a9fdee1587dc2ff04", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/6ed32005b128bd3274eb061a9fdee1587dc2ff04", "committedDate": "2020-08-04T05:27:47Z", "message": "Update assertion for upstream change in INVALID_NODE_MINUTIAE of leading minutiae"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwNTA4MjA2", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25118#pullrequestreview-460508206", "createdAt": "2020-08-04T05:37:22Z", "commit": {"oid": "6ed32005b128bd3274eb061a9fdee1587dc2ff04"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwNTozNzoyMlrOG7Rxrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwNTozNzoyMlrOG7Rxrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDgxMDQxNA==", "bodyText": "join-on-condition := on expression equals expression from spec is parsed as on-clause := on expression.\ni.e. we parse the equals keyword implicitly.\n\n\nequals operator was added to error handler as well since it is already supported in the parser.\nThere's no such operator in the spec though.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25118#discussion_r464810414", "createdAt": "2020-08-04T05:37:22Z", "author": {"login": "lochana-chathura"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java", "diffHunk": "@@ -10918,6 +10818,8 @@ private STNode parseJoinClause(boolean isRhsExpr) {\n      */\n     private STNode parseOnClause(boolean isRhsExpr) {\n         STNode onKeyword = parseOnKeyword();\n+        // note that parsing expression includes following.\n+        // equals-expr := expression `equals` expression\n         STNode expression = parseExpression(OperatorPrecedence.QUERY, isRhsExpr, false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ed32005b128bd3274eb061a9fdee1587dc2ff04"}, "originalPosition": 366}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32dadcec78637a693a297a853d1ea1872d1068b7", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/32dadcec78637a693a297a853d1ea1872d1068b7", "committedDate": "2020-08-04T06:39:03Z", "message": "Refactor code"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7a99c07b5b55672eb2db8ae018d644bb02c949c2", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7a99c07b5b55672eb2db8ae018d644bb02c949c2", "committedDate": "2020-08-04T06:33:36Z", "message": "Refactor code"}, "afterCommit": {"oid": "32dadcec78637a693a297a853d1ea1872d1068b7", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/32dadcec78637a693a297a853d1ea1872d1068b7", "committedDate": "2020-08-04T06:39:03Z", "message": "Refactor code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwNTMxOTU4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25118#pullrequestreview-460531958", "createdAt": "2020-08-04T06:35:51Z", "commit": {"oid": "6ed32005b128bd3274eb061a9fdee1587dc2ff04"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwNjozNTo1MVrOG7S-gQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwNjozNTo1MVrOG7S-gQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDgzMDA4MQ==", "bodyText": "Wouldn't we need this?\nFor eg: In case when theres an additional token after the order-keys, but not one of the \"EndOfOrderKeys\" tokens ..?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25118#discussion_r464830081", "createdAt": "2020-08-04T06:35:51Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java", "diffHunk": "@@ -10693,13 +10630,10 @@ private STNode parseOrderKeyList(boolean isRhsExpr) {\n \n         // Parse the remaining order keys\n         nextToken = peek();\n-        STNode orderKeyListMemberEnd;\n+        STNode leadingComma;\n         while (!isEndOfOrderKeys(nextToken.kind)) {\n-            orderKeyListMemberEnd = parseOrderKeyListMemberEnd();\n-            if (orderKeyListMemberEnd == null) {\n-                break;\n-            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ed32005b128bd3274eb061a9fdee1587dc2ff04"}, "originalPosition": 188}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a434d8b5c1ae6c2c20602d22c780e5e66327feab", "author": {"user": {"login": "lochana-chathura", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a434d8b5c1ae6c2c20602d22c780e5e66327feab", "committedDate": "2020-08-05T05:22:25Z", "message": "Add review changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxNDAwNTkw", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25118#pullrequestreview-461400590", "createdAt": "2020-08-05T07:17:57Z", "commit": {"oid": "a434d8b5c1ae6c2c20602d22c780e5e66327feab"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4986, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}