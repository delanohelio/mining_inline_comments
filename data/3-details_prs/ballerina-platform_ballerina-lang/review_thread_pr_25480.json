{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc0OTA3Njk0", "number": 25480, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQwNjowNjozOFrOEdfKOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxMDo1MTo1MFrOEhnfNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5MzU0NjgxOnYy", "diffSide": "RIGHT", "path": "tests/jballerina-unit-test/src/test/java/org/ballerinalang/test/imports/ImportsTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQwNjowNjozOFrOHIqqhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQwMjozNDoyNFrOHJoPtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODg0OTY2OQ==", "bodyText": "Shall we move these tests to ballerina?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25480#discussion_r478849669", "createdAt": "2020-08-28T06:06:38Z", "author": {"login": "dulvinw"}, "path": "tests/jballerina-unit-test/src/test/java/org/ballerinalang/test/imports/ImportsTest.java", "diffHunk": "@@ -66,7 +72,25 @@ public void testSameModuleNameDifferentOrgImports() {\n \n     @Test(description = \"Test auto imports\")\n     public void testPredeclaredModules() {\n-        BCompileUtil.compile(\"test-src/imports/predeclared-imports\", \"bar\");\n-        BCompileUtil.compile(\"test-src/imports/predeclared-imports\", \"foo\");\n+        CompileResult result = BCompileUtil.compile(\"test-src/imports/predeclared-imports\", \"bar\");\n+        BValue[] returns = BRunUtil.invoke(result, \"testPredeclaredModules\");\n+        Assert.assertEquals(((BDecimal) returns[0]).decimalValue(), BigDecimal.valueOf(22.0));\n+        Assert.assertEquals(((BFloat) returns[1]).floatValue(), 70.35);\n+        Assert.assertEquals((returns[2]).stringValue(), \"NaN\");\n+        Assert.assertEquals(((BInteger) returns[3]).intValue(), 110);\n+        Assert.assertEquals(((BInteger) returns[4]).intValue(), 15);\n+        Assert.assertEquals(((BBoolean) returns[5]).booleanValue(), true);\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b0e5e68a6da9e53814899dfecf28ffe80a71b5e4"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTg1ODYxNA==", "bodyText": "Fixed", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25480#discussion_r479858614", "createdAt": "2020-08-31T02:34:24Z", "author": {"login": "chiranSachintha"}, "path": "tests/jballerina-unit-test/src/test/java/org/ballerinalang/test/imports/ImportsTest.java", "diffHunk": "@@ -66,7 +72,25 @@ public void testSameModuleNameDifferentOrgImports() {\n \n     @Test(description = \"Test auto imports\")\n     public void testPredeclaredModules() {\n-        BCompileUtil.compile(\"test-src/imports/predeclared-imports\", \"bar\");\n-        BCompileUtil.compile(\"test-src/imports/predeclared-imports\", \"foo\");\n+        CompileResult result = BCompileUtil.compile(\"test-src/imports/predeclared-imports\", \"bar\");\n+        BValue[] returns = BRunUtil.invoke(result, \"testPredeclaredModules\");\n+        Assert.assertEquals(((BDecimal) returns[0]).decimalValue(), BigDecimal.valueOf(22.0));\n+        Assert.assertEquals(((BFloat) returns[1]).floatValue(), 70.35);\n+        Assert.assertEquals((returns[2]).stringValue(), \"NaN\");\n+        Assert.assertEquals(((BInteger) returns[3]).intValue(), 110);\n+        Assert.assertEquals(((BInteger) returns[4]).intValue(), 15);\n+        Assert.assertEquals(((BBoolean) returns[5]).booleanValue(), true);\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODg0OTY2OQ=="}, "originalCommit": {"oid": "b0e5e68a6da9e53814899dfecf28ffe80a71b5e4"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5MzU2MTM2OnYy", "diffSide": "RIGHT", "path": "tests/jballerina-unit-test/src/test/resources/test-src/imports/predeclared-imports/src/bar/predeclared-modules.bal", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQwNjoxMzoyN1rOHIqy1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQwMjozNDowN1rOHJoPYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODg1MTc5OA==", "bodyText": "Looks like this isn't used?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25480#discussion_r478851798", "createdAt": "2020-08-28T06:13:27Z", "author": {"login": "dulvinw"}, "path": "tests/jballerina-unit-test/src/test/resources/test-src/imports/predeclared-imports/src/bar/predeclared-modules.bal", "diffHunk": "@@ -0,0 +1,78 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+function testSumFunctionInDecimal(decimal p1, decimal p2) returns decimal {\n+    return 'decimal:sum(p1, p2);\n+}\n+\n+function testOneArgMaxFunctionInDecimal(decimal arg) returns decimal {\n+    return 'decimal:max(arg);\n+}\n+\n+function testSumFunctionInFloat() returns float {\n+    return 'float:sum(12.34, 23.45, 34.56);\n+}\n+\n+function testFloatConsts() returns float {\n+    return 'float:NaN;\n+}\n+\n+function testSumFunctionInInt() returns int {\n+    return 'int:sum(10, 25, 35, 40);\n+}\n+\n+function testMaxFunctionInInt(int n, int... ns) returns int {\n+    return 'int:max(n, ...ns);\n+}\n+\n+function testFromString(string s, boolean|error expected) {\n+    assert(expected, 'boolean:fromString(s));\n+}\n+\n+string str = \"Hello Ballerina!\";\n+\n+function testSubString() returns [string,string, string] {\n+    return [str.substring(6, 9), str.substring(6), 'string:substring(str,6)];\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b0e5e68a6da9e53814899dfecf28ffe80a71b5e4"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTg1ODUzMA==", "bodyText": "Added", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25480#discussion_r479858530", "createdAt": "2020-08-31T02:34:07Z", "author": {"login": "chiranSachintha"}, "path": "tests/jballerina-unit-test/src/test/resources/test-src/imports/predeclared-imports/src/bar/predeclared-modules.bal", "diffHunk": "@@ -0,0 +1,78 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+function testSumFunctionInDecimal(decimal p1, decimal p2) returns decimal {\n+    return 'decimal:sum(p1, p2);\n+}\n+\n+function testOneArgMaxFunctionInDecimal(decimal arg) returns decimal {\n+    return 'decimal:max(arg);\n+}\n+\n+function testSumFunctionInFloat() returns float {\n+    return 'float:sum(12.34, 23.45, 34.56);\n+}\n+\n+function testFloatConsts() returns float {\n+    return 'float:NaN;\n+}\n+\n+function testSumFunctionInInt() returns int {\n+    return 'int:sum(10, 25, 35, 40);\n+}\n+\n+function testMaxFunctionInInt(int n, int... ns) returns int {\n+    return 'int:max(n, ...ns);\n+}\n+\n+function testFromString(string s, boolean|error expected) {\n+    assert(expected, 'boolean:fromString(s));\n+}\n+\n+string str = \"Hello Ballerina!\";\n+\n+function testSubString() returns [string,string, string] {\n+    return [str.substring(6, 9), str.substring(6), 'string:substring(str,6)];\n+}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODg1MTc5OA=="}, "originalCommit": {"oid": "b0e5e68a6da9e53814899dfecf28ffe80a71b5e4"}, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAwMDQ1NTY1OnYy", "diffSide": "RIGHT", "path": "tests/jballerina-unit-test/src/test/resources/test-src/imports/predeclared-imports/src/bar/predeclared-modules.bal", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQwMzo1MDoyMVrOHJpLMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QwMzoyODozNVrOHNvGxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTg3Mzg0Mg==", "bodyText": "Shall we make the string we give as the detail message the message itself? Since we don't have error reasons now.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                panic error(ASSERTION_ERROR_REASON,\n          \n          \n            \n                            message = \"expected '\" + expected.toString() + \"', found '\" + actual.toString () + \"'\");\n          \n          \n            \n                panic error(\"expected '\" + expected.toString() + \"', found '\" + actual.toString () + \"'\");", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25480#discussion_r479873842", "createdAt": "2020-08-31T03:50:21Z", "author": {"login": "MaryamZi"}, "path": "tests/jballerina-unit-test/src/test/resources/test-src/imports/predeclared-imports/src/bar/predeclared-modules.bal", "diffHunk": "@@ -0,0 +1,81 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+function testSumFunctionInDecimal(decimal p1, decimal p2) returns decimal {\n+    return 'decimal:sum(p1, p2);\n+}\n+\n+function testOneArgMaxFunctionInDecimal(decimal arg) returns decimal {\n+    return 'decimal:max(arg);\n+}\n+\n+function testSumFunctionInFloat() returns float {\n+    return 'float:sum(12.34, 23.45, 34.56);\n+}\n+\n+function testFloatConsts() returns float {\n+    return 'float:NaN;\n+}\n+\n+function testSumFunctionInInt() returns int {\n+    return 'int:sum(10, 25, 35, 40);\n+}\n+\n+function testMaxFunctionInInt(int n, int... ns) returns int {\n+    return 'int:max(n, ...ns);\n+}\n+\n+string str = \"Hello Ballerina!\";\n+\n+function testSubString() returns string {\n+    return 'string:substring(str,6);\n+}\n+\n+function testStartsWithFunctionInString() returns boolean {\n+    return 'string:startsWith(str, \"Hello\");\n+}\n+\n+function testPredeclaredModules() {\n+    decimal d1 = 22.0;\n+    decimal d2 = 5.7;\n+    float f1 = 70.35;\n+    string s1 = \"true\";\n+    string s2 = \"Ballerina!\";\n+    assertEquality(d1, testSumFunctionInDecimal(10.5, 11.5));\n+    assertEquality(d2, testOneArgMaxFunctionInDecimal(5.7));\n+    assertEquality(f1, testSumFunctionInFloat());\n+    assertEquality(true, testFloatConsts().isNaN());\n+    assertEquality(110, testSumFunctionInInt());\n+    assertEquality(15, testMaxFunctionInInt(10,15));\n+    assertEquality(true, 'boolean:fromString(s1));\n+    assertEquality(s2, testSubString());\n+    assertEquality(true, testStartsWithFunctionInString());\n+}\n+\n+const ASSERTION_ERROR_REASON = \"AssertionError\";\n+\n+function assertEquality(any|error expected, any|error actual) {\n+    if expected is anydata && actual is anydata && expected == actual {\n+        return;\n+    }\n+\n+    if expected === actual {\n+        return;\n+    }\n+\n+    panic error(ASSERTION_ERROR_REASON,\n+                message = \"expected '\" + expected.toString() + \"', found '\" + actual.toString () + \"'\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf8aa43a32da7b6e4ee762abfce9808947a3037e"}, "originalPosition": 80}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDE2NTMxOA==", "bodyText": "Done", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25480#discussion_r484165318", "createdAt": "2020-09-07T03:28:35Z", "author": {"login": "chiranSachintha"}, "path": "tests/jballerina-unit-test/src/test/resources/test-src/imports/predeclared-imports/src/bar/predeclared-modules.bal", "diffHunk": "@@ -0,0 +1,81 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+function testSumFunctionInDecimal(decimal p1, decimal p2) returns decimal {\n+    return 'decimal:sum(p1, p2);\n+}\n+\n+function testOneArgMaxFunctionInDecimal(decimal arg) returns decimal {\n+    return 'decimal:max(arg);\n+}\n+\n+function testSumFunctionInFloat() returns float {\n+    return 'float:sum(12.34, 23.45, 34.56);\n+}\n+\n+function testFloatConsts() returns float {\n+    return 'float:NaN;\n+}\n+\n+function testSumFunctionInInt() returns int {\n+    return 'int:sum(10, 25, 35, 40);\n+}\n+\n+function testMaxFunctionInInt(int n, int... ns) returns int {\n+    return 'int:max(n, ...ns);\n+}\n+\n+string str = \"Hello Ballerina!\";\n+\n+function testSubString() returns string {\n+    return 'string:substring(str,6);\n+}\n+\n+function testStartsWithFunctionInString() returns boolean {\n+    return 'string:startsWith(str, \"Hello\");\n+}\n+\n+function testPredeclaredModules() {\n+    decimal d1 = 22.0;\n+    decimal d2 = 5.7;\n+    float f1 = 70.35;\n+    string s1 = \"true\";\n+    string s2 = \"Ballerina!\";\n+    assertEquality(d1, testSumFunctionInDecimal(10.5, 11.5));\n+    assertEquality(d2, testOneArgMaxFunctionInDecimal(5.7));\n+    assertEquality(f1, testSumFunctionInFloat());\n+    assertEquality(true, testFloatConsts().isNaN());\n+    assertEquality(110, testSumFunctionInInt());\n+    assertEquality(15, testMaxFunctionInInt(10,15));\n+    assertEquality(true, 'boolean:fromString(s1));\n+    assertEquality(s2, testSubString());\n+    assertEquality(true, testStartsWithFunctionInString());\n+}\n+\n+const ASSERTION_ERROR_REASON = \"AssertionError\";\n+\n+function assertEquality(any|error expected, any|error actual) {\n+    if expected is anydata && actual is anydata && expected == actual {\n+        return;\n+    }\n+\n+    if expected === actual {\n+        return;\n+    }\n+\n+    panic error(ASSERTION_ERROR_REASON,\n+                message = \"expected '\" + expected.toString() + \"', found '\" + actual.toString () + \"'\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTg3Mzg0Mg=="}, "originalCommit": {"oid": "cf8aa43a32da7b6e4ee762abfce9808947a3037e"}, "originalPosition": 80}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAwMDQ1NjM2OnYy", "diffSide": "RIGHT", "path": "tests/jballerina-unit-test/src/test/resources/test-src/imports/predeclared-imports/src/foo/overridden-predeclared-modules.bal", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQwMzo1MDo1NVrOHJpLpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QwMzoyODo0OFrOHNvG_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTg3Mzk1Nw==", "bodyText": "Same comment as above re: removing ASSERTION_ERROR_REASON.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25480#discussion_r479873957", "createdAt": "2020-08-31T03:50:55Z", "author": {"login": "MaryamZi"}, "path": "tests/jballerina-unit-test/src/test/resources/test-src/imports/predeclared-imports/src/foo/overridden-predeclared-modules.bal", "diffHunk": "@@ -0,0 +1,87 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+import ballerina/lang.'boolean as booleans;\n+import ballerina/lang.'int as ints;\n+import ballerina/lang.'decimal as decimals;\n+import ballerina/lang.'float as floats;\n+import ballerina/lang.'string as strings;\n+\n+function testSumFunctionInDecimal(decimal p1, decimal p2) returns decimal {\n+    return 'decimals:sum(p1, p2);\n+}\n+\n+function testOneArgMaxFunctionInDecimal(decimal arg) returns decimal {\n+    return 'decimals:max(arg);\n+}\n+\n+function testSumFunctionInFloat() returns float {\n+    return 'floats:sum(12.34, 23.45, 34.56);\n+}\n+\n+function testFloatConsts() returns float {\n+    return 'floats:NaN;\n+}\n+\n+function testSumFunctionInInt() returns int {\n+    return 'ints:sum(10, 25, 35, 40);\n+}\n+\n+function testMaxFunctionInInt(int n, int... ns) returns int {\n+    return 'ints:max(n, ...ns);\n+}\n+\n+string str = \"Hello Ballerina!\";\n+\n+function testSubString() returns string {\n+    return 'strings:substring(str,6);\n+}\n+\n+function testStartsWithFunctionInString() returns boolean {\n+    return 'strings:startsWith(str, \"Hello\");\n+}\n+\n+function testOverriddenPredeclaredModules() {\n+    decimal d1 = 22.0;\n+    decimal d2 = 5.7;\n+    float f1 = 70.35;\n+    string s1 = \"true\";\n+    string s2 = \"Ballerina!\";\n+    assertEquality(d1, testSumFunctionInDecimal(10.5, 11.5));\n+    assertEquality(d2, testOneArgMaxFunctionInDecimal(5.7));\n+    assertEquality(f1, testSumFunctionInFloat());\n+    assertEquality(true, testFloatConsts().isNaN());\n+    assertEquality(110, testSumFunctionInInt());\n+    assertEquality(15, testMaxFunctionInInt(10,15));\n+    assertEquality(true, 'booleans:fromString(s1));\n+    assertEquality(s2, testSubString());\n+    assertEquality(true, testStartsWithFunctionInString());\n+}\n+\n+const ASSERTION_ERROR_REASON = \"AssertionError\";\n+\n+function assertEquality(any|error expected, any|error actual) {\n+    if expected is anydata && actual is anydata && expected == actual {\n+        return;\n+    }\n+\n+    if expected === actual {\n+        return;\n+    }\n+\n+    panic error(ASSERTION_ERROR_REASON,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf8aa43a32da7b6e4ee762abfce9808947a3037e"}, "originalPosition": 85}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDE2NTM3NA==", "bodyText": "Done", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25480#discussion_r484165374", "createdAt": "2020-09-07T03:28:48Z", "author": {"login": "chiranSachintha"}, "path": "tests/jballerina-unit-test/src/test/resources/test-src/imports/predeclared-imports/src/foo/overridden-predeclared-modules.bal", "diffHunk": "@@ -0,0 +1,87 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+import ballerina/lang.'boolean as booleans;\n+import ballerina/lang.'int as ints;\n+import ballerina/lang.'decimal as decimals;\n+import ballerina/lang.'float as floats;\n+import ballerina/lang.'string as strings;\n+\n+function testSumFunctionInDecimal(decimal p1, decimal p2) returns decimal {\n+    return 'decimals:sum(p1, p2);\n+}\n+\n+function testOneArgMaxFunctionInDecimal(decimal arg) returns decimal {\n+    return 'decimals:max(arg);\n+}\n+\n+function testSumFunctionInFloat() returns float {\n+    return 'floats:sum(12.34, 23.45, 34.56);\n+}\n+\n+function testFloatConsts() returns float {\n+    return 'floats:NaN;\n+}\n+\n+function testSumFunctionInInt() returns int {\n+    return 'ints:sum(10, 25, 35, 40);\n+}\n+\n+function testMaxFunctionInInt(int n, int... ns) returns int {\n+    return 'ints:max(n, ...ns);\n+}\n+\n+string str = \"Hello Ballerina!\";\n+\n+function testSubString() returns string {\n+    return 'strings:substring(str,6);\n+}\n+\n+function testStartsWithFunctionInString() returns boolean {\n+    return 'strings:startsWith(str, \"Hello\");\n+}\n+\n+function testOverriddenPredeclaredModules() {\n+    decimal d1 = 22.0;\n+    decimal d2 = 5.7;\n+    float f1 = 70.35;\n+    string s1 = \"true\";\n+    string s2 = \"Ballerina!\";\n+    assertEquality(d1, testSumFunctionInDecimal(10.5, 11.5));\n+    assertEquality(d2, testOneArgMaxFunctionInDecimal(5.7));\n+    assertEquality(f1, testSumFunctionInFloat());\n+    assertEquality(true, testFloatConsts().isNaN());\n+    assertEquality(110, testSumFunctionInInt());\n+    assertEquality(15, testMaxFunctionInInt(10,15));\n+    assertEquality(true, 'booleans:fromString(s1));\n+    assertEquality(s2, testSubString());\n+    assertEquality(true, testStartsWithFunctionInString());\n+}\n+\n+const ASSERTION_ERROR_REASON = \"AssertionError\";\n+\n+function assertEquality(any|error expected, any|error actual) {\n+    if expected is anydata && actual is anydata && expected == actual {\n+        return;\n+    }\n+\n+    if expected === actual {\n+        return;\n+    }\n+\n+    panic error(ASSERTION_ERROR_REASON,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTg3Mzk1Nw=="}, "originalCommit": {"oid": "cf8aa43a32da7b6e4ee762abfce9808947a3037e"}, "originalPosition": 85}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAwMDQ2MjIxOnYy", "diffSide": "RIGHT", "path": "tests/jballerina-unit-test/src/test/resources/test-src/imports/predeclared-imports/src/bar/predeclared-modules.bal", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQwMzo1NDo1MFrOHJpO5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwODo1NzozM1rOHRKUOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTg3NDc4OA==", "bodyText": "We seem to have added tests for string, int, float, and decimal. Shall we add a simple test for the rest of the predeclared imports too?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25480#discussion_r479874788", "createdAt": "2020-08-31T03:54:50Z", "author": {"login": "MaryamZi"}, "path": "tests/jballerina-unit-test/src/test/resources/test-src/imports/predeclared-imports/src/bar/predeclared-modules.bal", "diffHunk": "@@ -0,0 +1,81 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+function testSumFunctionInDecimal(decimal p1, decimal p2) returns decimal {\n+    return 'decimal:sum(p1, p2);\n+}\n+\n+function testOneArgMaxFunctionInDecimal(decimal arg) returns decimal {\n+    return 'decimal:max(arg);\n+}\n+\n+function testSumFunctionInFloat() returns float {\n+    return 'float:sum(12.34, 23.45, 34.56);\n+}\n+\n+function testFloatConsts() returns float {\n+    return 'float:NaN;\n+}\n+\n+function testSumFunctionInInt() returns int {\n+    return 'int:sum(10, 25, 35, 40);\n+}\n+\n+function testMaxFunctionInInt(int n, int... ns) returns int {\n+    return 'int:max(n, ...ns);\n+}\n+\n+string str = \"Hello Ballerina!\";\n+\n+function testSubString() returns string {\n+    return 'string:substring(str,6);\n+}\n+\n+function testStartsWithFunctionInString() returns boolean {\n+    return 'string:startsWith(str, \"Hello\");\n+}\n+\n+function testPredeclaredModules() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf8aa43a32da7b6e4ee762abfce9808947a3037e"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDE5MDY5MQ==", "bodyText": "There are no use scenarios with other predeclared imports yet.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25480#discussion_r484190691", "createdAt": "2020-09-07T05:31:54Z", "author": {"login": "chiranSachintha"}, "path": "tests/jballerina-unit-test/src/test/resources/test-src/imports/predeclared-imports/src/bar/predeclared-modules.bal", "diffHunk": "@@ -0,0 +1,81 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+function testSumFunctionInDecimal(decimal p1, decimal p2) returns decimal {\n+    return 'decimal:sum(p1, p2);\n+}\n+\n+function testOneArgMaxFunctionInDecimal(decimal arg) returns decimal {\n+    return 'decimal:max(arg);\n+}\n+\n+function testSumFunctionInFloat() returns float {\n+    return 'float:sum(12.34, 23.45, 34.56);\n+}\n+\n+function testFloatConsts() returns float {\n+    return 'float:NaN;\n+}\n+\n+function testSumFunctionInInt() returns int {\n+    return 'int:sum(10, 25, 35, 40);\n+}\n+\n+function testMaxFunctionInInt(int n, int... ns) returns int {\n+    return 'int:max(n, ...ns);\n+}\n+\n+string str = \"Hello Ballerina!\";\n+\n+function testSubString() returns string {\n+    return 'string:substring(str,6);\n+}\n+\n+function testStartsWithFunctionInString() returns boolean {\n+    return 'string:startsWith(str, \"Hello\");\n+}\n+\n+function testPredeclaredModules() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTg3NDc4OA=="}, "originalCommit": {"oid": "cf8aa43a32da7b6e4ee762abfce9808947a3037e"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTUxODQyOA==", "bodyText": "We can still add tests for overriding, right?\nShall we also create an issue to add predeclared tests once the langlib content for these langlibs are introduced in the implementation?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25480#discussion_r485518428", "createdAt": "2020-09-09T10:50:37Z", "author": {"login": "MaryamZi"}, "path": "tests/jballerina-unit-test/src/test/resources/test-src/imports/predeclared-imports/src/bar/predeclared-modules.bal", "diffHunk": "@@ -0,0 +1,81 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+function testSumFunctionInDecimal(decimal p1, decimal p2) returns decimal {\n+    return 'decimal:sum(p1, p2);\n+}\n+\n+function testOneArgMaxFunctionInDecimal(decimal arg) returns decimal {\n+    return 'decimal:max(arg);\n+}\n+\n+function testSumFunctionInFloat() returns float {\n+    return 'float:sum(12.34, 23.45, 34.56);\n+}\n+\n+function testFloatConsts() returns float {\n+    return 'float:NaN;\n+}\n+\n+function testSumFunctionInInt() returns int {\n+    return 'int:sum(10, 25, 35, 40);\n+}\n+\n+function testMaxFunctionInInt(int n, int... ns) returns int {\n+    return 'int:max(n, ...ns);\n+}\n+\n+string str = \"Hello Ballerina!\";\n+\n+function testSubString() returns string {\n+    return 'string:substring(str,6);\n+}\n+\n+function testStartsWithFunctionInString() returns boolean {\n+    return 'string:startsWith(str, \"Hello\");\n+}\n+\n+function testPredeclaredModules() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTg3NDc4OA=="}, "originalCommit": {"oid": "cf8aa43a32da7b6e4ee762abfce9808947a3037e"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzYzNDk3Ng==", "bodyText": "No, there are no use scenarios. Created new issue to add predeclared tests for those langlibs. (#25757)", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25480#discussion_r487634976", "createdAt": "2020-09-14T03:40:44Z", "author": {"login": "chiranSachintha"}, "path": "tests/jballerina-unit-test/src/test/resources/test-src/imports/predeclared-imports/src/bar/predeclared-modules.bal", "diffHunk": "@@ -0,0 +1,81 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+function testSumFunctionInDecimal(decimal p1, decimal p2) returns decimal {\n+    return 'decimal:sum(p1, p2);\n+}\n+\n+function testOneArgMaxFunctionInDecimal(decimal arg) returns decimal {\n+    return 'decimal:max(arg);\n+}\n+\n+function testSumFunctionInFloat() returns float {\n+    return 'float:sum(12.34, 23.45, 34.56);\n+}\n+\n+function testFloatConsts() returns float {\n+    return 'float:NaN;\n+}\n+\n+function testSumFunctionInInt() returns int {\n+    return 'int:sum(10, 25, 35, 40);\n+}\n+\n+function testMaxFunctionInInt(int n, int... ns) returns int {\n+    return 'int:max(n, ...ns);\n+}\n+\n+string str = \"Hello Ballerina!\";\n+\n+function testSubString() returns string {\n+    return 'string:substring(str,6);\n+}\n+\n+function testStartsWithFunctionInString() returns boolean {\n+    return 'string:startsWith(str, \"Hello\");\n+}\n+\n+function testPredeclaredModules() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTg3NDc4OA=="}, "originalCommit": {"oid": "cf8aa43a32da7b6e4ee762abfce9808947a3037e"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzc1Njg1Ng==", "bodyText": "@chiranSachintha, let's add few simple tests for overriding as discussed offline.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25480#discussion_r487756856", "createdAt": "2020-09-14T08:57:33Z", "author": {"login": "MaryamZi"}, "path": "tests/jballerina-unit-test/src/test/resources/test-src/imports/predeclared-imports/src/bar/predeclared-modules.bal", "diffHunk": "@@ -0,0 +1,81 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+function testSumFunctionInDecimal(decimal p1, decimal p2) returns decimal {\n+    return 'decimal:sum(p1, p2);\n+}\n+\n+function testOneArgMaxFunctionInDecimal(decimal arg) returns decimal {\n+    return 'decimal:max(arg);\n+}\n+\n+function testSumFunctionInFloat() returns float {\n+    return 'float:sum(12.34, 23.45, 34.56);\n+}\n+\n+function testFloatConsts() returns float {\n+    return 'float:NaN;\n+}\n+\n+function testSumFunctionInInt() returns int {\n+    return 'int:sum(10, 25, 35, 40);\n+}\n+\n+function testMaxFunctionInInt(int n, int... ns) returns int {\n+    return 'int:max(n, ...ns);\n+}\n+\n+string str = \"Hello Ballerina!\";\n+\n+function testSubString() returns string {\n+    return 'string:substring(str,6);\n+}\n+\n+function testStartsWithFunctionInString() returns boolean {\n+    return 'string:startsWith(str, \"Hello\");\n+}\n+\n+function testPredeclaredModules() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTg3NDc4OA=="}, "originalCommit": {"oid": "cf8aa43a32da7b6e4ee762abfce9808947a3037e"}, "originalPosition": 51}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzNjg1NDI5OnYy", "diffSide": "RIGHT", "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/semantics/model/SymbolTable.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQxMDo1MTo1MFrOHPBung==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwMzowNDoxN1rOHRCbQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTUxOTAwNg==", "bodyText": "Shall we order these alphabetically and have the same order as the spec (ballerina-platform/ballerina-spec@158691e)? O:)", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25480#discussion_r485519006", "createdAt": "2020-09-09T10:51:50Z", "author": {"login": "MaryamZi"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/semantics/model/SymbolTable.java", "diffHunk": "@@ -356,6 +356,16 @@ public void loadPredeclaredModules() {\n         modules.put(Names.ERROR, this.langErrorModuleSymbol);\n         modules.put(Names.OBJECT, this.langObjectModuleSymbol);\n         modules.put(Names.XML, this.langXmlModuleSymbol);\n+        modules.put(Names.INT, this.langIntModuleSymbol);\n+        modules.put(Names.FLOAT, this.langFloatModuleSymbol);\n+        modules.put(Names.DECIMAL, this.langDecimalModuleSymbol);\n+        modules.put(Names.BOOLEAN, this.langBooleanModuleSymbol);\n+        modules.put(Names.FUTURE, this.langFutureModuleSymbol);\n+        modules.put(Names.MAP, this.langMapModuleSymbol);\n+        modules.put(Names.STREAM, this.langStreamModuleSymbol);\n+        modules.put(Names.STRING, this.langStringModuleSymbol);\n+        modules.put(Names.TABLE, this.langTableModuleSymbol);\n+        modules.put(Names.TYPEDESC, this.langTypedescModuleSymbol);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e2e513e30e120fbdb804d5d721cc094816074be7"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzYyNzU4Nw==", "bodyText": "Done", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25480#discussion_r487627587", "createdAt": "2020-09-14T03:04:17Z", "author": {"login": "chiranSachintha"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/semantics/model/SymbolTable.java", "diffHunk": "@@ -356,6 +356,16 @@ public void loadPredeclaredModules() {\n         modules.put(Names.ERROR, this.langErrorModuleSymbol);\n         modules.put(Names.OBJECT, this.langObjectModuleSymbol);\n         modules.put(Names.XML, this.langXmlModuleSymbol);\n+        modules.put(Names.INT, this.langIntModuleSymbol);\n+        modules.put(Names.FLOAT, this.langFloatModuleSymbol);\n+        modules.put(Names.DECIMAL, this.langDecimalModuleSymbol);\n+        modules.put(Names.BOOLEAN, this.langBooleanModuleSymbol);\n+        modules.put(Names.FUTURE, this.langFutureModuleSymbol);\n+        modules.put(Names.MAP, this.langMapModuleSymbol);\n+        modules.put(Names.STREAM, this.langStreamModuleSymbol);\n+        modules.put(Names.STRING, this.langStringModuleSymbol);\n+        modules.put(Names.TABLE, this.langTableModuleSymbol);\n+        modules.put(Names.TYPEDESC, this.langTypedescModuleSymbol);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTUxOTAwNg=="}, "originalCommit": {"oid": "e2e513e30e120fbdb804d5d721cc094816074be7"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 293, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}