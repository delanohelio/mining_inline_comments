{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg5MjQxMjI4", "number": 25939, "title": "Change observe module functions used by ballerina/http to isolated", "bodyText": "Purpose\n\nChange observe module functions used by ballerina/http to isolated\n\nApproach\n\nThe two functions used by ballerina/http had been updated to isolated. The relevant java level implementations were updated as well to ensure thread safety.", "createdAt": "2020-09-18T11:00:26Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25939", "merged": true, "mergeCommit": {"oid": "0ea0312eb7fc0933b725ca6526589a2111108b3e"}, "closed": true, "closedAt": "2020-09-18T13:31:45Z", "author": {"login": "nadundesilva"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdKCrBogH2gAyNDg5MjQxMjI4Ojc1NTE1YjgwZjkxZDYyZTNjZGZjMDRhZTdjMDhiNTg0MzRhMDI4ZDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdKFG9IAFqTQ5MTQzNjI5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "75515b80f91d62e3cdfc04ae7c08b58434a028d1", "author": {"user": {"login": "nadundesilva", "name": "Nadun De Silva"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/75515b80f91d62e3cdfc04ae7c08b58434a028d1", "committedDate": "2020-09-18T10:03:17Z", "message": "Update observe lib module functions which are currently used by ballerina/http module to isolated\n\n# Since all the functions in ballerina/http had been changed to \"isolated\", to support this, observe modules's functions that are currently used by ballerina/http had been changed to isolated. Ideally we should make all the function in observe lib isolated."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxNDMzMTIy", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25939#pullrequestreview-491433122", "createdAt": "2020-09-18T12:49:16Z", "commit": {"oid": "75515b80f91d62e3cdfc04ae7c08b58434a028d1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxMjo0OToxN1rOHULuHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxMjo0OToxN1rOHULuHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDkyNTU5OQ==", "bodyText": "do we need to change this to ConcurrentHashMap ?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25939#discussion_r490925599", "createdAt": "2020-09-18T12:49:17Z", "author": {"login": "Kishanthan"}, "path": "bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/observability/ObserverContext.java", "diffHunk": "@@ -73,9 +73,9 @@\n     private boolean isSystemSpan;\n \n     public ObserverContext() {\n-        this.properties = new HashMap<>();\n-        this.mainTags = new HashMap<>();\n-        this.additionalTags = new HashMap<>();\n+        this.properties = new ConcurrentHashMap<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "75515b80f91d62e3cdfc04ae7c08b58434a028d1"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62949558fcaffac152102ab246d94114db89cf97", "author": {"user": {"login": "nadundesilva", "name": "Nadun De Silva"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/62949558fcaffac152102ab246d94114db89cf97", "committedDate": "2020-09-18T12:51:32Z", "message": "Revert added ConcurrentHashMaps\n\n# Since ConcurrentHashMaps may introduce a perf hit and since we have no issues so far with HashMaps, we will revert this change. This needs to be tested and verified to see if it is thread safe or not."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxNDM2Mjk3", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25939#pullrequestreview-491436297", "createdAt": "2020-09-18T12:53:36Z", "commit": {"oid": "62949558fcaffac152102ab246d94114db89cf97"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4621, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}