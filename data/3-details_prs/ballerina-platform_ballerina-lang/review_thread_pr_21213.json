{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc4ODMzNTM0", "number": 21213, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwNTo0MjowNFrODi8unw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwNDoxODoxMlrODm7xFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM3OTczMTUxOnYy", "diffSide": "RIGHT", "path": "examples/csv-io/csv_io.bal", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwNTo0MjowNFrOFue2qw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwODo1Nzo1NlrOFui2jA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI4NDMzMQ==", "bodyText": "I think instead of casting to error, it would be better if we change this to\n    if (tblResult is table<record {}>) {\n        table<Employee> empTable = <table<Employee>> tblResult;\n        foreach var rec in empTable {\n            io:println(rec);\n        }\n    } else {\n        log:printError(\"An error occurred while creating table: \",\n                        err = tblResult);\n    }\nor even\n    if (tblResult is table<record {}>) {\n        foreach var rec in tblResult {\n            io:println(rec);\n        }\n    } else {\n        log:printError(\"An error occurred while creating table: \",\n                        err = tblResult);\n    }\n@anupama-pathirage WDYT?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21213#discussion_r384284331", "createdAt": "2020-02-26T05:42:04Z", "author": {"login": "MaryamZi"}, "path": "examples/csv-io/csv_io.bal", "diffHunk": "@@ -61,7 +61,7 @@ public function main() returns @tainted error? {\n         }\n     } else {\n         log:printError(\"An error occurred while creating table: \",\n-                        err = tblResult);\n+                        err = <error>tblResult);\n     }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38c17e89290b0f4db8565a0d286c1ae0a50be7f6"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDM0OTgzNg==", "bodyText": "+1 for the first option.  Otherwise it looks like no point in passing Employee to the  getTable function in var tblResult = rCsvChannel2.getTable(Employee);", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21213#discussion_r384349836", "createdAt": "2020-02-26T08:57:56Z", "author": {"login": "anupama-pathirage"}, "path": "examples/csv-io/csv_io.bal", "diffHunk": "@@ -61,7 +61,7 @@ public function main() returns @tainted error? {\n         }\n     } else {\n         log:printError(\"An error occurred while creating table: \",\n-                        err = tblResult);\n+                        err = <error>tblResult);\n     }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI4NDMzMQ=="}, "originalCommit": {"oid": "38c17e89290b0f4db8565a0d286c1ae0a50be7f6"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4MDEwMDIxOnYy", "diffSide": "RIGHT", "path": "tests/ballerina-examples-test/build.gradle", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwODo0MToxMVrOFuiVOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwODo0MToxMVrOFuiVOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDM0MTMwNg==", "bodyText": "Shall we include context by specifying which BBE test has failed and how?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21213#discussion_r384341306", "createdAt": "2020-02-26T08:41:11Z", "author": {"login": "keizer619"}, "path": "tests/ballerina-examples-test/build.gradle", "diffHunk": "@@ -29,114 +29,340 @@ configurations {\n }\n \n dependencies {\n-    ballerinaTools project(path: ':ballerina-tools', configuration: 'unzipped')\n+    ballerinaTools project(path: ':jballerina-tools', configuration: 'unzipped')\n }\n \n task copyDistribution() {\n-    dependsOn \":ballerina-tools:build\"\n+    dependsOn \":jballerina-tools:build\"\n     doFirst {\n         copy {\n             from file(configurations.ballerinaTools.asPath)\n             into \"$buildDir/extractedDistribution\"\n         }\n     }\n }\n+def distPath = \"$buildDir/extractedDistribution\"\n+def bbeList = []\n \n-task test {\n-    dependsOn copyDistribution\n-    def distPath = \"$buildDir/extractedDistribution\"\n-    mustRunAfter ':jballerina-integration-test:test'\n-    outputs.dir(\"${distPath}/examples/target\")\n-    outputs.dir(\"${distPath}/examples/.ballerina/repo/\")\n-    outputs.cacheIf{ true }\n+def IgnoreList = [\n+        'proto-to-ballerina',\n+        'swagger-to-ballerina',\n+        'taint-checking',\n+        'websub-hub-client-sample',\n+        'websub-remote-hub-sample',\n+        'config-api',\n+        'testerina-function-mocks',\n+        'jdbc-client-crud-operations',\n+        'jdbc-client-batch-update',\n+        'jdbc-client-call-procedures',\n+        'streaming-big-dataset',\n+        'docker-deployment',\n+        'kubernetes-deployment',\n+        'awslambda-deployment',\n+        'openshift-deployment',\n+        'grpc-server-streaming',\n+        'transactions-distributed',\n+        'local-transactions',\n+        'local-transactions-with-participants',\n+        'xa-transactions',\n+        'secured-client-with-oauth2',\n+        'gauge-metrics',\n+        'counter-metrics',\n+        'xml-functions',\n+        'openapi-to-ballerina',\n+        'kafka_message_consumer_group_service',\n+        'kafka_message_consumer_simple',\n+        'kafka_message_consumer_service',\n+        'kafka_message_producer',\n+        'kafka_message_producer_transactional',\n+        'grpc-secured-unary',\n+        'grpc-bidirectional-streaming',\n+        'grpc-client-streaming',\n+        'grpc-unary-non-blocking',\n+        'grpc-unary-blocking',\n+        'nats-streaming-start-position',\n+        'nats-streaming-queue-group',\n+        'nats-streaming-durable-subscriptions',\n+        'nats-streaming-consumer-with-data-binding',\n+        'nats-streaming-client',\n+        'nats-basic-client',\n+        'jdbc-streaming-big-dataset',\n+        'testerina-guarantee-test-execution-order',\n+        'testerina-data-driven-tests',\n+        'testerina-before-and-after-suite',\n+        'testerina-before-each-test',\n+        'testerina-before-and-after-test',\n+        'testerina-assertions',\n+        'taint-checking',\n+        'websocket-chat-application',\n+        'secured-service-with-basic-auth',\n+        'secured-service-with-jwt',\n+        'http-caching-client',\n+        'response-with-multiparts',\n+        'http-data-binding',\n+        'http-1.1-to-2.0-protocol-switch',\n+        'websocket-basic-sample',\n+        'http-to-websocket-upgrade',\n+        'websocket-proxy-server',\n+        'http-redirects',\n+        'tracing',\n+        'secured-client-with-basic-auth',\n+        'secured-client-with-jwt-auth',\n+        'http-2.0-server-push',\n+        'worker-interaction',\n+        'workers',\n+        'hello-world-parallel',\n+        'the-main-function',\n+        'task-scheduler-appointment',\n+        'task-scheduler-timer',\n+        'checkpanic',\n+        'type-cast',\n+        'async',\n+        'panic',\n+        'time',\n+        'log-api',\n+        'crypto',\n+        'http-client-endpoint',\n+        'type-conversion',\n+        'record-io'\n+]\n \n-    PatternSet patternSet = new PatternSet();\n-    patternSet.exclude(\"**/.ballerina/**\");\n-    patternSet.exclude(\"**/Ballerina.toml\");\n-    patternSet.exclude(\"**/Ballerina.lock\");\n-    patternSet.exclude(\"**/ballerina-internal.log\")\n-    inputs.files(files(\"${distPath}/examples\").asFileTree.matching(patternSet))\n-    \n+def MockList = [\n+        'filepath',\n+        'strings',\n+        'math-functions',\n+        'cache',\n+        'fork-variable-access',\n+        'fork',\n+        'user-defined-error',\n+        'trap',\n+        'check',\n+        'error-handling',\n+        'error-destructure-binding-pattern',\n+        'record-destructure-binding-pattern',\n+        'tuple-destructure-binding-pattern',\n+        'error-typed-binding-pattern',\n+        'record-typed-binding-pattern',\n+        'tuple-typed-binding-pattern',\n+        'xml-access',\n+        'xml-namespaces',\n+        'xml-attributes',\n+        'xml-literal',\n+        'xml',\n+        'json-to-xml-conversion',\n+        'json-record-map-conversion',\n+        'json-access',\n+        'json-arrays',\n+        'json-objects',\n+        'json',\n+        'immutable-values',\n+        'clone',\n+        'optional-field-access',\n+        'length',\n+        'equality',\n+        'compound-assignment-operators',\n+        'object-type-reference',\n+        'anonymous-objects',\n+        'abstract-objects',\n+        'object-assignability',\n+        'object-methods',\n+        'objects',\n+        'record-type-reference',\n+        'record-optional-fields',\n+        'anonymous-records',\n+        'records',\n+        'string-template',\n+        'range-expressions',\n+        'constants',\n+        'any-type',\n+        'anydata-type',\n+        'optional-type',\n+        'byte-type',\n+        'union-type',\n+        'table',\n+        'maps',\n+        'tuple-type',\n+        'arrays',\n+        'values',\n+        'elvis-operator',\n+        'type-guard',\n+        'type-test-expression',\n+        'error-match-statement',\n+        'record-match-statement',\n+        'tuple-match-statement',\n+        'match',\n+        'foreach',\n+        'while',\n+        'if-else',\n+        'functional-iteration',\n+        'closures',\n+        'anonymous-functions',\n+        'function-pointers',\n+        'quoted-identifiers',\n+        'functions-with-rest-parameter',\n+        'functions-with-defaultable-parameters',\n+        'functions-with-required-parameters',\n+        'functions',\n+        'var',\n+        'variables',\n+        'modules',\n+        'hello-world-client',\n+        'hello-world'\n+]\n+\n+\n+task createProject {\n+    dependsOn copyDistribution\n     doFirst {\n         exec {\n             //Initialize Ballerina project\n             if (Os.isFamily(Os.FAMILY_WINDOWS)) {\n                 //TODO: Need to verify with windows\n-                workingDir \"${distPath}/examples\"\n-                commandLine 'cmd', '/c', \"${distPath}/bin/ballerina.bat\", 'init'\n+                workingDir \"${buildDir}/\"\n+                commandLine 'cmd', '/c', \"${distPath}/bin/ballerina.bat\", 'new', 'TestProject'\n             } else {\n-                workingDir \"${distPath}/examples\"\n-                commandLine \"${distPath}/bin/./ballerina\", 'init'\n+                workingDir \"${buildDir}/\"\n+                commandLine \"${distPath}/bin/./ballerina\", 'new', 'TestProject'\n             }\n         }\n-\n     }\n-\n-    doLast {\n-        // TODO: run examples list as dynamic tasks\n-        //List of BBEs excluded from building\n-        def ignoreList = [ 'proto-to-ballerina',\n-                           'swagger-to-ballerina',\n-                           'taint-checking',\n-                           'websub-hub-client-sample',\n-                           'websub-remote-hub-sample',\n-                           'config-api',\n-                           'testerina-function-mocks',\n-                           'jdbc-client-crud-operations',\n-                           'jdbc-client-batch-update',\n-                           'jdbc-client-call-procedures',\n-                           'streaming-big-dataset',\n-                           'docker-deployment',\n-                           'kubernetes-deployment',\n-                           'awslambda-deployment',\n-                           'openshift-deployment',\n-                           'grpc-server-streaming',\n-                           'transactions-distributed',\n-                           'local-transactions',\n-                           'local-transactions-with-participants',\n-                           'xa-transactions',\n-                           'secured-client-with-oauth2',\n-                           'gauge-metrics',\n-                           'counter-metrics',\n-                           'xml-functions',\n-                           'openapi-to-ballerina',\n-                           'rabbitmq-simple-consumer',\n-                           'rabbitmq-simple-producer'\n-                           ]\n-\n-        def inputFile = new File( \"${distPath}/examples/index.json\")\n+    doFirst {\n+        def inputFile = new File(\"${distPath}/examples/index.json\")\n         def categories = new JsonSlurper().parseText(inputFile.text)\n-        def bbeList = []\n         categories.each { category ->\n             def examples = category.samples\n             examples.each { example ->\n                 bbeList.push(\"$example.url\")\n-\n             }\n         }\n+    }\n+    doLast {\n+        bbeList.each { String bbe ->\n+            def src = \"${project.rootDir}/examples/${bbe}\"\n+            def dis = \"${buildDir}/TestProject/src/${bbe}_test/\"\n+            copy {\n+                from(src) {}\n+                into dis\n+            }\n+        }\n+    }\n+}\n \n-        // Remove excludes\n-        ignoreList.each { ignoreItem ->\n-            bbeList.remove(\"$ignoreItem\")\n+task TestWithTool {\n+    doFirst {\n+        MockList.each { String bbe ->\n+            println bbe\n+            bbe = \"${bbe}_test\"\n+            def outputarry = []\n+            if (Os.isFamily(Os.FAMILY_WINDOWS)) {\n+                //TODO: Need to verify with windows\n+                exec {\n+                    workingDir \"${buildDir}/TestProject\"\n+                    commandLine 'cmd', '/c', \"${distPath}/bin/ballerina.bat\", 'build', '--skip-tests', '--experimental', bbe\n+                }\n+            } else {\n+                exec {\n+                    workingDir \"${buildDir}/TestProject\"\n+                    commandLine \"${distPath}/bin/./ballerina\", 'build', '--skip-tests', '--experimental', bbe\n+                }\n+            }\n+            new ByteArrayOutputStream().withStream { os ->\n+                if (Os.isFamily(Os.FAMILY_WINDOWS)) {\n+                    //TODO: Need to verify with windows\n+                    exec {\n+                        workingDir \"${buildDir}/TestProject/target/bin\"\n+                        commandLine 'cmd', '/c', \"${distPath}/bin/ballerina.bat\", 'run', \"${bbe}.jar\"\n+                        standardOutput = os\n+                    }\n+                } else {\n+                    exec {\n+                        workingDir \"${buildDir}/TestProject/target/bin\"\n+                        commandLine \"${distPath}/bin/./ballerina\", 'run', \"${bbe}.jar\"\n+                        standardOutput = os\n+                    }\n+                }\n+                outputarry.add(os.toString())\n+                println outputarry[0]\n+            }\n+            def lines = \"${outputarry[0]}\".split('\\n')\n+            def variable = bbe - \"_test\"\n+            variable = variable.replace('-', '_')\n+            File file = file(\"${buildDir}/TestProject/src/${bbe}/${variable}.out\")\n+            def fileout = []\n+            file.readLines().each {\n+                def str2 = it.toString()\n+                str2 = str2.trim()\n+                if (str2?.trim()) {\n+                    if (str2[0] != '#') {\n+                        fileout.add(str2)\n+                    }\n+                }\n+            }\n+            def newlines = []\n+            for (int i = 0; i < lines.size(); i++) {\n+                def str1 = lines[i].toString()\n+                str1 = str1.trim()\n+                if (str1?.trim()) {\n+                    newlines.add(str1)\n+                }\n+            }\n+            def index = fileout.findIndexOf { it == newlines[0] }\n+            if (index == -1) {\n+                throw new GradleException('Error occurred')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38c17e89290b0f4db8565a0d286c1ae0a50be7f6"}, "originalPosition": 352}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4MDEwMjc0OnYy", "diffSide": "RIGHT", "path": "examples/basic-https-listener-client/tests/basic_https_listener_client_test.bal", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwODo0MTo1OFrOFuiW0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwODo0MTo1OFrOFuiW0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDM0MTcxMg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            @test:Config { }\n          \n          \n            \n            @test:Config {}", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21213#discussion_r384341712", "createdAt": "2020-02-26T08:41:58Z", "author": {"login": "anupama-pathirage"}, "path": "examples/basic-https-listener-client/tests/basic_https_listener_client_test.bal", "diffHunk": "@@ -1,7 +1,7 @@\n import ballerina/http;\n import ballerina/test;\n \n-@test:Config\n+@test:Config { }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38c17e89290b0f4db8565a0d286c1ae0a50be7f6"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMTUxNDIyOnYy", "diffSide": "RIGHT", "path": "tests/ballerina-examples-test/build.gradle", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwNDoxNjowNlrOF0ovHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwNDoxNjowNlrOF0ovHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDczNzY5Mg==", "bodyText": "@ramithaYO Shall we remove this extra line?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21213#discussion_r390737692", "createdAt": "2020-03-11T04:16:06Z", "author": {"login": "keizer619"}, "path": "tests/ballerina-examples-test/build.gradle", "diffHunk": "@@ -45,98 +45,382 @@ task copyDistribution() {\n task test {\n     dependsOn copyDistribution\n     def distPath = \"$buildDir/extractedDistribution\"\n+    def bbeList = []\n+\n     mustRunAfter ':jballerina-integration-test:test'\n     outputs.dir(\"${distPath}/examples/target\")\n     outputs.dir(\"${distPath}/examples/.ballerina/repo/\")\n-    outputs.cacheIf{ true }\n+    outputs.cacheIf { true }\n \n     PatternSet patternSet = new PatternSet();\n     patternSet.exclude(\"**/.ballerina/**\");\n     patternSet.exclude(\"**/Ballerina.toml\");\n     patternSet.exclude(\"**/Ballerina.lock\");\n     patternSet.exclude(\"**/ballerina-internal.log\")\n     inputs.files(files(\"${distPath}/examples\").asFileTree.matching(patternSet))\n-    \n+    def ignoreList = [\n+            'proto-to-ballerina',\n+            'swagger-to-ballerina',\n+            'taint-checking',\n+            'websub-hub-client-sample',\n+            'websub-remote-hub-sample',\n+            'config-api',\n+            'testerina-function-mocks',\n+            'jdbc-client-crud-operations',\n+            'jdbc-client-batch-update',\n+            'jdbc-client-call-procedures',\n+            'streaming-big-dataset',\n+            'docker-deployment',\n+            'kubernetes-deployment',\n+            'awslambda-deployment',\n+            'openshift-deployment',\n+            'grpc-server-streaming',\n+            'transactions-distributed',\n+            'local-transactions',\n+            'local-transactions-with-participants',\n+            'xa-transactions',\n+            'secured-client-with-oauth2',\n+            'gauge-metrics',\n+            'counter-metrics',\n+            'openapi-to-ballerina',\n+            'kafka_message_consumer_group_service',\n+            'kafka_message_consumer_simple',\n+            'kafka_message_consumer_service',\n+            'kafka_message_producer',\n+            'kafka_message_producer_transactional',\n+            'grpc-secured-unary',\n+            'grpc-bidirectional-streaming',\n+            'grpc-client-streaming',\n+            'grpc-unary-non-blocking',\n+            'grpc-unary-blocking',\n+            'nats-streaming-start-position',\n+            'nats-streaming-queue-group',\n+            'nats-streaming-durable-subscriptions',\n+            'nats-streaming-consumer-with-data-binding',\n+            'nats-streaming-client',\n+            'nats-basic-client',\n+            'jdbc-streaming-big-dataset',\n+            'testerina-guarantee-test-execution-order',\n+            'testerina-data-driven-tests',\n+            'testerina-before-and-after-suite',\n+            'testerina-before-each-test',\n+            'testerina-before-and-after-test',\n+            'testerina-assertions',\n+            'taint-checking',\n+            'websocket-chat-application',\n+            'secured-service-with-basic-auth',\n+            'secured-service-with-jwt',\n+            'http-caching-client',\n+            'response-with-multiparts',\n+            'http-data-binding',\n+            'http-1.1-to-2.0-protocol-switch',\n+            'websocket-basic-sample',\n+            'http-to-websocket-upgrade',\n+            'websocket-proxy-server',\n+            'http-redirects',\n+            'tracing',\n+            'secured-client-with-basic-auth',\n+            'secured-client-with-jwt-auth',\n+            'log-api',\n+            'http-2.0-server-push',\n+            'the-main-function',\n+            'task-scheduler-appointment',\n+            'task-scheduler-timer',\n+            'time',\n+            'crypto',\n+            'xml-functions',\n+            'xml-literal',\n+            'tuple-typed-binding-pattern',\n+            'xml-access',\n+            'xml-namespaces',\n+            'xml-attributes',\n+            'xml',\n+            'tuple-match-statement',\n+            'ballerina-to-openapi',\n+            'http-timeout',\n+            'http-retry',\n+            'http-failover',\n+            'http-load-balancer',\n+            'http-circuit-breaker',\n+            'content-based-routing',\n+            'header-based-routing',\n+            'http-filters',\n+            'http-compression',\n+            'http-100-continue',\n+            'http-access-logs',\n+            'http-cors',\n+            'request-with-multiparts',\n+            'mutual-ssl',\n+            'basic-https-listener-client',\n+            'https-listener',\n+            'http-disable-chunking',\n+            'base-path-and-path',\n+            'hello-world-service',\n+            'tuple-match-statement'\n+    ]\n+    def mockList = [\n+            'strings',\n+            'math-functions',\n+            'cache',\n+            'user-defined-error',\n+            'trap',\n+            'check',\n+            'error-handling',\n+            'error-destructure-binding-pattern',\n+            'record-destructure-binding-pattern',\n+            'tuple-destructure-binding-pattern',\n+            'error-typed-binding-pattern',\n+            'record-typed-binding-pattern',\n+            'tuple-typed-binding-pattern',\n+            'json-to-xml-conversion',\n+            'json-record-map-conversion',\n+            'json-access',\n+            'json-arrays',\n+            'json-objects',\n+            'json',\n+            'immutable-values',\n+            'clone',\n+            'optional-field-access',\n+            'length',\n+            'equality',\n+            'compound-assignment-operators',\n+            'object-type-reference',\n+            'anonymous-objects',\n+            'abstract-objects',\n+            'object-assignability',\n+            'object-methods',\n+            'objects',\n+            'record-type-reference',\n+            'record-optional-fields',\n+            'anonymous-records',\n+            'records',\n+            'string-template',\n+            'range-expressions',\n+            'constants',\n+            'any-type',\n+            'anydata-type',\n+            'optional-type',\n+            'byte-type',\n+            'union-type',\n+            'table',\n+            'maps',\n+            'tuple-type',\n+            'arrays',\n+            'values',\n+            'elvis-operator',\n+            'type-guard',\n+            'type-test-expression',\n+            'error-match-statement',\n+            'record-match-statement',\n+            'match',\n+            'foreach',\n+            'while',\n+            'if-else',\n+            'functional-iteration',\n+            'closures',\n+            'anonymous-functions',\n+            'function-pointers',\n+            'quoted-identifiers',\n+            'functions-with-rest-parameter',\n+            'functions-with-defaultable-parameters',\n+            'functions-with-required-parameters',\n+            'functions',\n+            'var',\n+            'variables',\n+            'modules',\n+            'hello-world-client',\n+            'hello-world'\n+    ]\n+    def stdEMock = [\n+            'worker-interaction',\n+            'workers',\n+            'fork-variable-access',\n+            'fork',\n+            'hello-world-parallel',\n+            'type-conversion',\n+            'filepath',\n+            'record-io',\n+            'checkpanic',\n+            'type-cast',\n+            'panic',\n+            'http-client-endpoint',\n+            'async'\n+    ]\n     doFirst {\n         exec {\n             //Initialize Ballerina project\n             if (Os.isFamily(Os.FAMILY_WINDOWS)) {\n                 //TODO: Need to verify with windows\n-                workingDir \"${distPath}/examples\"\n-                commandLine 'cmd', '/c', \"${distPath}/bin/ballerina.bat\", 'init'\n+                workingDir \"${buildDir}/\"\n+                commandLine 'cmd', '/c', \"${distPath}/bin/ballerina.bat\", 'new', 'TestProject'\n             } else {\n-                workingDir \"${distPath}/examples\"\n-                commandLine \"${distPath}/bin/./ballerina\", 'init'\n+                workingDir \"${buildDir}/\"\n+                commandLine \"${distPath}/bin/./ballerina\", 'new', 'TestProject'\n             }\n         }\n-\n-    }\n-\n-    doLast {\n-        // TODO: run examples list as dynamic tasks\n-        //List of BBEs excluded from building\n-        def ignoreList = [ 'proto-to-ballerina',\n-                           'swagger-to-ballerina',\n-                           'taint-checking',\n-                           'websub-hub-client-sample',\n-                           'websub-remote-hub-sample',\n-                           'config-api',\n-                           'testerina-function-mocks',\n-                           'jdbc-client-crud-operations',\n-                           'jdbc-client-batch-update',\n-                           'jdbc-client-call-procedures',\n-                           'streaming-big-dataset',\n-                           'docker-deployment',\n-                           'kubernetes-deployment',\n-                           'awslambda-deployment',\n-                           'openshift-deployment',\n-                           'grpc-server-streaming',\n-                           'transactions-distributed',\n-                           'local-transactions',\n-                           'local-transactions-with-participants',\n-                           'xa-transactions',\n-                           'secured-client-with-oauth2',\n-                           'gauge-metrics',\n-                           'counter-metrics',\n-                           'xml-functions',\n-                           'openapi-to-ballerina',\n-                           'rabbitmq-simple-consumer',\n-                           'rabbitmq-simple-producer'\n-                           ]\n-\n-        def inputFile = new File( \"${distPath}/examples/index.json\")\n+        def inputFile = new File(\"${distPath}/examples/index.json\")\n         def categories = new JsonSlurper().parseText(inputFile.text)\n-        def bbeList = []\n         categories.each { category ->\n             def examples = category.samples\n             examples.each { example ->\n                 bbeList.push(\"$example.url\")\n-\n             }\n         }\n-\n-        // Remove excludes\n-        ignoreList.each { ignoreItem ->\n-            bbeList.remove(\"$ignoreItem\")\n+        def src = \"${project.rootDir}/examples/\"\n+        def dis = \"${buildDir}/TestProject/src/\"\n+        copy {\n+            from(src)\n+            into dis\n         }\n \n+    }\n+    doLast {\n+        def ListOfItem = stdEMock + mockList\n+        ListOfItem.each { String bbe ->\n+            if (Os.isFamily(Os.FAMILY_WINDOWS)) {\n+                exec {\n+                    workingDir \"${buildDir}/TestProject\"\n+                    commandLine 'cmd', '/c', \"${distPath}/bin/ballerina.bat\", 'build', '--skip-tests', '--experimental', bbe\n+                }\n+            } else {\n+                exec {\n+                    workingDir \"${buildDir}/TestProject\"\n+                    commandLine \"${distPath}/bin/./ballerina\", 'build', '--skip-tests', '--experimental', bbe\n+                }\n+            }\n+        }\n+        mockList.each { String bbe ->\n+            def bbeOut = []\n+            def fileOut = []\n+            def cmdOutAry = []\n+            def balName = bbe.replace('-', '_')\n+            def str = \"\"\n+            new ByteArrayOutputStream().withStream { os ->\n+                if (Os.isFamily(Os.FAMILY_WINDOWS)) {\n+                    exec {\n+                        workingDir \"${buildDir}/TestProject/target/bin\"\n+                        commandLine 'cmd', '/c', \"${distPath}/bin/ballerina.bat\", 'run', \"${bbe}.jar\"\n+                        standardOutput = os\n+                    }\n+                } else {\n+                    exec {\n+                        workingDir \"${buildDir}/TestProject/target/bin\"\n+                        commandLine \"${distPath}/bin/./ballerina\", 'run', \"${bbe}.jar\"\n+                        standardOutput = os\n+                    }\n+                }\n+                cmdOutAry.add(os.toString())\n+            }\n+            File file = file(\"${buildDir}/TestProject/src/${bbe}/${balName}.out\")\n+            file.readLines().each {\n+                str = it.trim()\n+                if (str?.trim()) {\n+                    if (str[0] != '#') {\n+                        fileOut.add(str)\n+                    }\n+                }\n+            }\n+            def lines = \"${cmdOutAry[0]}\".split('\\n')\n+            for (int i = 0; i < lines.size(); i++) {\n+                str = lines[i].trim()\n+                if (str?.trim()) {\n+                    bbeOut.add(str)\n+                }\n+            }\n+            def index = fileOut.findIndexOf { it == bbeOut[0] }\n+            if (index == -1) {\n+                throw new GradleException(\"Ballerina example test failed: ${balName}\")\n+            }\n+            for (int i = 0; i < bbeOut.size(); i++) {\n+                if (bbeOut[i] != fileOut[index + i]) {\n+                    throw new GradleException(\"Ballerina example test failed: ${balName}\")\n+                }\n+            }\n+            println \"Ballerina example test passed: ${balName}\"\n+        }\n+        stdEMock.each { String bbe ->\n+            def balName = bbe.replace('-', '_')\n+            def str = \"\"\n+            def fileOut = []\n+            def bbeOut = []\n+            def cmdOutAry = []\n+            def errOut = new ByteArrayOutputStream()\n+            new ByteArrayOutputStream().withStream { os ->\n+                if (Os.isFamily(Os.FAMILY_WINDOWS)) {\n+                    exec {\n+                        workingDir \"${buildDir}/TestProject/src/${bbe}\"\n+                        commandLine 'cmd', '/c', \"${distPath}/bin/ballerina.bat\", 'run', \"${balName}.bal\"\n+                        ignoreExitValue true\n+                        standardOutput = os\n+                        errorOutput = errOut\n+                    }\n+                } else {\n+                    exec {\n+                        workingDir \"${buildDir}/TestProject/src/${bbe}\"\n+                        commandLine \"${distPath}/bin/./ballerina\", 'run', \"${balName}.bal\"\n+                        ignoreExitValue true\n+                        standardOutput = os\n+                        errorOutput = errOut\n+                    }\n+                }\n+                cmdOutAry.add(os.toString())\n+                cmdOutAry.add(errOut.toString())\n+            }\n+            File file = file(\"${buildDir}/TestProject/src/${bbe}/${balName}.out\")\n+            def arg1 = \"user-agent\"\n+            file.readLines().each {\n+                str = it.trim()\n+                if (str?.trim()) {\n+                    if (str[0] != '#') {\n+                        str = str.replaceAll(\"${arg1}=\\\\S*\", \"${arg1}=V\")\n+                        str = str.replaceAll(\"${arg1}\\\"\\\\S*\", \"${arg1}\\\":\\\"V\\\",\")\n+                        fileOut.add(str)\n+                    }\n+                }\n+            }\n+            def lines = \"${cmdOutAry[0]}\".split('\\n')\n+            lines = lines + \"${cmdOutAry[1]}\".split('\\n')\n+            lines.each {\n+                str = it.trim()\n+                str = str.replaceAll(\"${arg1}=\\\\S*\", \"${arg1}=V\")\n+                str = str.replaceAll(\"${arg1}\\\"\\\\S*\", \"${arg1}\\\":\\\"V\\\",\")\n+                if (str == \"Compiling source\" || str == \"${balName}.bal\" || str == \"Running executables\" || str == \"\") {\n+                } else {\n+                    bbeOut.add(str)\n+                }\n+            }\n+            for (int i = 0; i < bbeOut.size(); i++) {\n+                def index = fileOut.findIndexOf { it == bbeOut[i] }\n+                if (index == -1) {\n+                    throw new GradleException(\"Ballerina example test failed: ${balName}\")\n+                }\n+            }\n+            println \"Ballerina example test passed: ${balName}\"\n+        }\n+    }\n+    doLast {\n+        def bbeIgnoreList = ignoreList + mockList + stdEMock\n+        bbeIgnoreList.each { String elements ->\n+            bbeList.remove(\"$elements\")\n+        }\n         bbeList.each { String bbe ->\n             if (Os.isFamily(Os.FAMILY_WINDOWS)) {\n                 //TODO: Need to verify with windows\n                 exec {\n-                    workingDir \"${distPath}/examples\"\n-                    commandLine 'cmd', '/c', \"${distPath}/bin/ballerina.bat\", 'build', bbe, '--experimental'\n+                    workingDir \"${buildDir}/TestProject\"\n+                    commandLine 'cmd', '/c', \"${distPath}/bin/ballerina.bat\", 'build', '--experimental', \"${bbe}\"\n                 }\n             } else {\n                 exec {\n-                    workingDir \"${distPath}/examples\"\n-                    commandLine \"${distPath}/bin/./ballerina\", 'build', bbe, '--experimental'\n+                    workingDir \"${buildDir}/TestProject\"\n+                    commandLine \"${buildDir}/extractedDistribution/bin/./ballerina\", 'build', '--experimental', \"${bbe}\"\n                 }\n             }\n         }\n-   }\n+    }\n }\n \n build {\n     dependsOn test\n }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dce37801773f993b495aab7d6672ae535937e51d"}, "originalPosition": 458}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMTUxNTcyOnYy", "diffSide": "RIGHT", "path": "tests/ballerina-examples-test/build.gradle", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwNDoxNzowOFrOF0ov-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwNDoxNzowOFrOF0ov-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDczNzkxNQ==", "bodyText": "@ramithaYO Shall we add comments for these lists and mention what will be done with these lists?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21213#discussion_r390737915", "createdAt": "2020-03-11T04:17:08Z", "author": {"login": "keizer619"}, "path": "tests/ballerina-examples-test/build.gradle", "diffHunk": "@@ -45,98 +45,382 @@ task copyDistribution() {\n task test {\n     dependsOn copyDistribution\n     def distPath = \"$buildDir/extractedDistribution\"\n+    def bbeList = []\n+\n     mustRunAfter ':jballerina-integration-test:test'\n     outputs.dir(\"${distPath}/examples/target\")\n     outputs.dir(\"${distPath}/examples/.ballerina/repo/\")\n-    outputs.cacheIf{ true }\n+    outputs.cacheIf { true }\n \n     PatternSet patternSet = new PatternSet();\n     patternSet.exclude(\"**/.ballerina/**\");\n     patternSet.exclude(\"**/Ballerina.toml\");\n     patternSet.exclude(\"**/Ballerina.lock\");\n     patternSet.exclude(\"**/ballerina-internal.log\")\n     inputs.files(files(\"${distPath}/examples\").asFileTree.matching(patternSet))\n-    \n+    def ignoreList = [\n+            'proto-to-ballerina',\n+            'swagger-to-ballerina',\n+            'taint-checking',\n+            'websub-hub-client-sample',\n+            'websub-remote-hub-sample',\n+            'config-api',\n+            'testerina-function-mocks',\n+            'jdbc-client-crud-operations',\n+            'jdbc-client-batch-update',\n+            'jdbc-client-call-procedures',\n+            'streaming-big-dataset',\n+            'docker-deployment',\n+            'kubernetes-deployment',\n+            'awslambda-deployment',\n+            'openshift-deployment',\n+            'grpc-server-streaming',\n+            'transactions-distributed',\n+            'local-transactions',\n+            'local-transactions-with-participants',\n+            'xa-transactions',\n+            'secured-client-with-oauth2',\n+            'gauge-metrics',\n+            'counter-metrics',\n+            'openapi-to-ballerina',\n+            'kafka_message_consumer_group_service',\n+            'kafka_message_consumer_simple',\n+            'kafka_message_consumer_service',\n+            'kafka_message_producer',\n+            'kafka_message_producer_transactional',\n+            'grpc-secured-unary',\n+            'grpc-bidirectional-streaming',\n+            'grpc-client-streaming',\n+            'grpc-unary-non-blocking',\n+            'grpc-unary-blocking',\n+            'nats-streaming-start-position',\n+            'nats-streaming-queue-group',\n+            'nats-streaming-durable-subscriptions',\n+            'nats-streaming-consumer-with-data-binding',\n+            'nats-streaming-client',\n+            'nats-basic-client',\n+            'jdbc-streaming-big-dataset',\n+            'testerina-guarantee-test-execution-order',\n+            'testerina-data-driven-tests',\n+            'testerina-before-and-after-suite',\n+            'testerina-before-each-test',\n+            'testerina-before-and-after-test',\n+            'testerina-assertions',\n+            'taint-checking',\n+            'websocket-chat-application',\n+            'secured-service-with-basic-auth',\n+            'secured-service-with-jwt',\n+            'http-caching-client',\n+            'response-with-multiparts',\n+            'http-data-binding',\n+            'http-1.1-to-2.0-protocol-switch',\n+            'websocket-basic-sample',\n+            'http-to-websocket-upgrade',\n+            'websocket-proxy-server',\n+            'http-redirects',\n+            'tracing',\n+            'secured-client-with-basic-auth',\n+            'secured-client-with-jwt-auth',\n+            'log-api',\n+            'http-2.0-server-push',\n+            'the-main-function',\n+            'task-scheduler-appointment',\n+            'task-scheduler-timer',\n+            'time',\n+            'crypto',\n+            'xml-functions',\n+            'xml-literal',\n+            'tuple-typed-binding-pattern',\n+            'xml-access',\n+            'xml-namespaces',\n+            'xml-attributes',\n+            'xml',\n+            'tuple-match-statement',\n+            'ballerina-to-openapi',\n+            'http-timeout',\n+            'http-retry',\n+            'http-failover',\n+            'http-load-balancer',\n+            'http-circuit-breaker',\n+            'content-based-routing',\n+            'header-based-routing',\n+            'http-filters',\n+            'http-compression',\n+            'http-100-continue',\n+            'http-access-logs',\n+            'http-cors',\n+            'request-with-multiparts',\n+            'mutual-ssl',\n+            'basic-https-listener-client',\n+            'https-listener',\n+            'http-disable-chunking',\n+            'base-path-and-path',\n+            'hello-world-service',\n+            'tuple-match-statement'\n+    ]\n+    def mockList = [\n+            'strings',\n+            'math-functions',\n+            'cache',\n+            'user-defined-error',\n+            'trap',\n+            'check',\n+            'error-handling',\n+            'error-destructure-binding-pattern',\n+            'record-destructure-binding-pattern',\n+            'tuple-destructure-binding-pattern',\n+            'error-typed-binding-pattern',\n+            'record-typed-binding-pattern',\n+            'tuple-typed-binding-pattern',\n+            'json-to-xml-conversion',\n+            'json-record-map-conversion',\n+            'json-access',\n+            'json-arrays',\n+            'json-objects',\n+            'json',\n+            'immutable-values',\n+            'clone',\n+            'optional-field-access',\n+            'length',\n+            'equality',\n+            'compound-assignment-operators',\n+            'object-type-reference',\n+            'anonymous-objects',\n+            'abstract-objects',\n+            'object-assignability',\n+            'object-methods',\n+            'objects',\n+            'record-type-reference',\n+            'record-optional-fields',\n+            'anonymous-records',\n+            'records',\n+            'string-template',\n+            'range-expressions',\n+            'constants',\n+            'any-type',\n+            'anydata-type',\n+            'optional-type',\n+            'byte-type',\n+            'union-type',\n+            'table',\n+            'maps',\n+            'tuple-type',\n+            'arrays',\n+            'values',\n+            'elvis-operator',\n+            'type-guard',\n+            'type-test-expression',\n+            'error-match-statement',\n+            'record-match-statement',\n+            'match',\n+            'foreach',\n+            'while',\n+            'if-else',\n+            'functional-iteration',\n+            'closures',\n+            'anonymous-functions',\n+            'function-pointers',\n+            'quoted-identifiers',\n+            'functions-with-rest-parameter',\n+            'functions-with-defaultable-parameters',\n+            'functions-with-required-parameters',\n+            'functions',\n+            'var',\n+            'variables',\n+            'modules',\n+            'hello-world-client',\n+            'hello-world'\n+    ]\n+    def stdEMock = [", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dce37801773f993b495aab7d6672ae535937e51d"}, "originalPosition": 215}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMTUxNzAyOnYy", "diffSide": "RIGHT", "path": "settings.gradle", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwNDoxODoxMlrOF0ow0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwNDoxODoxMlrOF0ow0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDczODEzMA==", "bodyText": "@ramithaYO No need to have extra line space. Lets keep with other includes", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21213#discussion_r390738130", "createdAt": "2020-03-11T04:18:12Z", "author": {"login": "keizer619"}, "path": "settings.gradle", "diffHunk": "@@ -115,7 +115,8 @@ include(':ballerina-cli-module')\n include(':ballerina-jsonutils')\n include(':testerina:testerina-runtime')\n include(':testerina-integration-test')\n-// include(':examples-test')\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dce37801773f993b495aab7d6672ae535937e51d"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1137, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}