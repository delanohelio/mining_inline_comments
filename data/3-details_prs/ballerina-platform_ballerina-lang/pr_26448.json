{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3MjU3OTY5", "number": 26448, "title": "Change the match-clause cloner", "bodyText": "Purpose\nFixes #26446\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-10-21T05:23:14Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26448", "merged": true, "mergeCommit": {"oid": "6e9e6d9c75e4ddfb32441c51eff1a7505a4e5a5d"}, "closed": true, "closedAt": "2020-10-21T06:41:31Z", "author": {"login": "KavinduZoysa"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdUmaKCgH2gAyNTA3MjU3OTY5OjQ5YTgwOTBmY2YwMTMzYjU1NjBjOTFmOTIxMGI2MjhhNDQ3YWNiYTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUnIUJAFqTUxMzMzMzY4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "49a8090fcf0133b5560c91f9210b628a447acba0", "author": {"user": {"login": "KavinduZoysa", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/49a8090fcf0133b5560c91f9210b628a447acba0", "committedDate": "2020-10-21T05:20:41Z", "message": "Change the match clause cloner"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzMzE4MzE5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26448#pullrequestreview-513318319", "createdAt": "2020-10-21T05:32:50Z", "commit": {"oid": "49a8090fcf0133b5560c91f9210b628a447acba0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwNTozMjo1MFrOHla4Tg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwNTozMjo1MFrOHla4Tg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODk5OTc1OA==", "bodyText": "shouldn't we clone here as well?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26448#discussion_r508999758", "createdAt": "2020-10-21T05:32:50Z", "author": {"login": "hasithaa"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/parser/NodeCloner.java", "diffHunk": "@@ -695,7 +695,7 @@ public void visit(BLangMatchClause source) {\n         source.cloneRef = clone;\n         clone.matchPatterns = cloneList(source.matchPatterns);\n         clone.setMatchGuard(source.getMatchGuard());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49a8090fcf0133b5560c91f9210b628a447acba0"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzMzE5MDgx", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26448#pullrequestreview-513319081", "createdAt": "2020-10-21T05:34:50Z", "commit": {"oid": "49a8090fcf0133b5560c91f9210b628a447acba0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwNTozNDo1MFrOHla6nw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwNTozNDo1MFrOHla6nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTAwMDM1MQ==", "bodyText": "Ideally, we should validate something here, right? Shall we have post return some value, and assert it inside the match, and remove returns string here?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26448#discussion_r509000351", "createdAt": "2020-10-21T05:34:50Z", "author": {"login": "MaryamZi"}, "path": "tests/jballerina-unit-test/src/test/resources/test-src/statements/matchstmt/const-pattern.bal", "diffHunk": "@@ -405,6 +405,23 @@ function testConstPattern12() {\n     assertEquals(\"OTHER\", constPattern12(3));\n }\n \n+client class Client {\n+    remote function post(string x, string y) returns anydata {\n+    }\n+}\n+\n+Client clientEndpoint = new ();\n+public function testConstPattern13() returns string {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49a8090fcf0133b5560c91f9210b628a447acba0"}, "originalPosition": 10}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b8da7e30ea965b3f5e3dc464023c9c244ef6812e", "author": {"user": {"login": "KavinduZoysa", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b8da7e30ea965b3f5e3dc464023c9c244ef6812e", "committedDate": "2020-10-21T05:41:16Z", "message": "Fix suggestions"}, "afterCommit": {"oid": "5efacb2b2e37217be0680e8b7e4589e1d406dfb7", "author": {"user": {"login": "KavinduZoysa", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5efacb2b2e37217be0680e8b7e4589e1d406dfb7", "committedDate": "2020-10-21T05:43:00Z", "message": "Fix suggestions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzMzI0ODI1", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26448#pullrequestreview-513324825", "createdAt": "2020-10-21T05:50:07Z", "commit": {"oid": "5efacb2b2e37217be0680e8b7e4589e1d406dfb7"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwNTo1MDowN1rOHlbNsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwNTo1MDowN1rOHlbNsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTAwNTIzNQ==", "bodyText": "We should probably have a wildcard match pattern here and panic if it reaches that clause, just for completeness.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26448#discussion_r509005235", "createdAt": "2020-10-21T05:50:07Z", "author": {"login": "MaryamZi"}, "path": "tests/jballerina-unit-test/src/test/resources/test-src/statements/matchstmt/const-pattern.bal", "diffHunk": "@@ -405,6 +405,23 @@ function testConstPattern12() {\n     assertEquals(\"OTHER\", constPattern12(3));\n }\n \n+client class Client {\n+    remote function post(string x, string y) returns anydata {\n+        return y;\n+    }\n+}\n+\n+Client clientEndpoint = new ();\n+public function testConstPattern13() {\n+    string animal = \"Mouse\";\n+    match animal {\n+        \"Mouse\" => {\n+            var res = clientEndpoint->post(\"/post\", \"POST: Hello World\");\n+            assertEquals(\"POST: Hello World\", res);\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5efacb2b2e37217be0680e8b7e4589e1d406dfb7"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3dc7b6030a9ba28b98b02ea68de27e97b071cb0", "author": {"user": {"login": "KavinduZoysa", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d3dc7b6030a9ba28b98b02ea68de27e97b071cb0", "committedDate": "2020-10-21T05:56:12Z", "message": "Fix suggestions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5efacb2b2e37217be0680e8b7e4589e1d406dfb7", "author": {"user": {"login": "KavinduZoysa", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5efacb2b2e37217be0680e8b7e4589e1d406dfb7", "committedDate": "2020-10-21T05:43:00Z", "message": "Fix suggestions"}, "afterCommit": {"oid": "d3dc7b6030a9ba28b98b02ea68de27e97b071cb0", "author": {"user": {"login": "KavinduZoysa", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d3dc7b6030a9ba28b98b02ea68de27e97b071cb0", "committedDate": "2020-10-21T05:56:12Z", "message": "Fix suggestions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzMzMzNjg5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26448#pullrequestreview-513333689", "createdAt": "2020-10-21T06:11:06Z", "commit": {"oid": "d3dc7b6030a9ba28b98b02ea68de27e97b071cb0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4432, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}