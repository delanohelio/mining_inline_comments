{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwMzIxMTQ4", "number": 22949, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwMzoxNDoyNlrOD3dauQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwMzoxODo1M1rOD3dduw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5NDgwMjQ5OnYy", "diffSide": "RIGHT", "path": "stdlib/email/src/main/ballerina/src/email/smtp_client_endpoint.bal", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwMzoxNDoyNlrOGNuXQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwNjo0NTo0MlrOGNxqDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzA0NDI4OQ==", "bodyText": "Is it possible to make it as properties map like\nmap<string>? properties = ();\nAs we are converting the value to a string, I think we can restrict to string only\nWDYT?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22949#discussion_r417044289", "createdAt": "2020-04-29T03:14:26Z", "author": {"login": "daneshk"}, "path": "stdlib/email/src/main/ballerina/src/email/smtp_client_endpoint.bal", "diffHunk": "@@ -59,8 +59,10 @@ function send(SmtpClient clientEndpoint, Email email) returns Error? = @java:Met\n #\n # + port - Port number of the SMTP server\n # + enableSsl - If set to true, use SSL to connect and use the SSL port by default.\n-#               The default value is true for the \"smtps\" protocol and false for the \"smtp\" protocol.\n+#               The default value is true for the \"smtps\" protocol and false for the \"smtp\" protocol\n+# + properties - SMTP properties to override the existing configuration\n public type SmtpConfig record {|\n     int port = 465;\n     boolean enableSsl = true;\n+    Property[]? properties = ();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a23cf6a43539d7278fd3087909f5135e100bc9e6"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzA5ODI1Mw==", "bodyText": "Changed.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22949#discussion_r417098253", "createdAt": "2020-04-29T06:45:42Z", "author": {"login": "Maninda"}, "path": "stdlib/email/src/main/ballerina/src/email/smtp_client_endpoint.bal", "diffHunk": "@@ -59,8 +59,10 @@ function send(SmtpClient clientEndpoint, Email email) returns Error? = @java:Met\n #\n # + port - Port number of the SMTP server\n # + enableSsl - If set to true, use SSL to connect and use the SSL port by default.\n-#               The default value is true for the \"smtps\" protocol and false for the \"smtp\" protocol.\n+#               The default value is true for the \"smtps\" protocol and false for the \"smtp\" protocol\n+# + properties - SMTP properties to override the existing configuration\n public type SmtpConfig record {|\n     int port = 465;\n     boolean enableSsl = true;\n+    Property[]? properties = ();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzA0NDI4OQ=="}, "originalCommit": {"oid": "a23cf6a43539d7278fd3087909f5135e100bc9e6"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5NDgxMDE5OnYy", "diffSide": "RIGHT", "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/SmtpUtil.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwMzoxODo1M1rOGNubSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwNjoyMzowNFrOGNxKeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzA0NTMyMg==", "bodyText": "I think we need to give priority to the predefined fields? shall we first add custom properties and then add field values.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22949#discussion_r417045322", "createdAt": "2020-04-29T03:18:53Z", "author": {"login": "daneshk"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/SmtpUtil.java", "diffHunk": "@@ -74,6 +75,15 @@ public static Properties getProperties(MapValue smtpConfig, String host) {\n         properties.put(EmailConstants.PROPS_SMTP_AUTH, \"true\");\n         properties.put(EmailConstants.PROPS_SMTP_STARTTLS, \"true\");\n         properties.put(EmailConstants.PROPS_ENABLE_SSL, smtpConfig.getBooleanValue(EmailConstants.PROPS_SSL));\n+        CommonUtil.addCustomProperties(smtpConfig.getArrayValue(EmailConstants.PROPS_PROPERTIES), properties);\n+        if (log.isDebugEnabled()) {\n+            Set<String> propertySet = properties.stringPropertyNames();\n+            log.debug(\"SMTP Properties set are as follows.\");\n+            for (Object propertyObj : propertySet) {\n+                log.debug(\"Property Name: \" + propertyObj + \", Value: \" + properties.get(propertyObj).toString()\n+                        + \" ValueType: \" + properties.get(propertyObj).getClass().getName());\n+            }\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a23cf6a43539d7278fd3087909f5135e100bc9e6"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzA5MDE2OA==", "bodyText": "Custom properties are given higher priority to override the default functionality of the connector for advanced users.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22949#discussion_r417090168", "createdAt": "2020-04-29T06:23:04Z", "author": {"login": "Maninda"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/SmtpUtil.java", "diffHunk": "@@ -74,6 +75,15 @@ public static Properties getProperties(MapValue smtpConfig, String host) {\n         properties.put(EmailConstants.PROPS_SMTP_AUTH, \"true\");\n         properties.put(EmailConstants.PROPS_SMTP_STARTTLS, \"true\");\n         properties.put(EmailConstants.PROPS_ENABLE_SSL, smtpConfig.getBooleanValue(EmailConstants.PROPS_SSL));\n+        CommonUtil.addCustomProperties(smtpConfig.getArrayValue(EmailConstants.PROPS_PROPERTIES), properties);\n+        if (log.isDebugEnabled()) {\n+            Set<String> propertySet = properties.stringPropertyNames();\n+            log.debug(\"SMTP Properties set are as follows.\");\n+            for (Object propertyObj : propertySet) {\n+                log.debug(\"Property Name: \" + propertyObj + \", Value: \" + properties.get(propertyObj).toString()\n+                        + \" ValueType: \" + properties.get(propertyObj).getClass().getName());\n+            }\n+        }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzA0NTMyMg=="}, "originalCommit": {"oid": "a23cf6a43539d7278fd3087909f5135e100bc9e6"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3829, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}