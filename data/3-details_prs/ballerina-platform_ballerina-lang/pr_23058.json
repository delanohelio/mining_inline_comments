{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyNzY1OTUx", "number": 23058, "title": "Member type infer support and related type checker improvements", "bodyText": "Purpose\n\nThis PR contains below improvements.\n\n\nInfer member type from table constructor record literals\nSupport map as constraint type for table\nType checker improvements & bug fixes\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-05-04T06:41:44Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23058", "merged": true, "mergeCommit": {"oid": "c23a973f442305a763880ceb6246e5f971eca8a8"}, "closed": true, "closedAt": "2020-05-04T17:09:43Z", "author": {"login": "mohanvive"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABccuhYDgH2gAyNDEyNzY1OTUxOjhlMTJlODM0NjUwMzViNzU5OTY1OGI5ZjZiZTgwOThlZTE5NDgzMTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcd-gaOAH2gAyNDEyNzY1OTUxOmUyNTQxNDg4ZTIyZTQ5OGYxOGNjNTVhOTAxMmQzNWQ2ZTQyYjUxYjc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8e12e83465035b7599658b9f6be8098ee1948312", "author": {"user": {"login": "mohanvive", "name": "Mohanadarshan V"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8e12e83465035b7599658b9f6be8098ee1948312", "committedDate": "2020-04-30T15:08:03Z", "message": "Add improvements to infer table type from record list"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8afabba3f259590c0b5c1ac05a9c6ea77bb8986", "author": {"user": {"login": "mohanvive", "name": "Mohanadarshan V"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d8afabba3f259590c0b5c1ac05a9c6ea77bb8986", "committedDate": "2020-05-02T08:21:32Z", "message": "Remove redundant test file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98d24f05533d16d620b72c4fd355c58cb98e46f3", "author": {"user": {"login": "mohanvive", "name": "Mohanadarshan V"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/98d24f05533d16d620b72c4fd355c58cb98e46f3", "committedDate": "2020-05-02T13:13:52Z", "message": "Add map constrained table test cases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10811c777ee3b10bec790b60dd5891fad90a9d4f", "author": {"user": {"login": "mohanvive", "name": "Mohanadarshan V"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/10811c777ee3b10bec790b60dd5891fad90a9d4f", "committedDate": "2020-05-04T05:38:09Z", "message": "Add type checker validation for table with map constraint"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4b848129cfec82bd8fd1d6c3d7b48483b8f854c", "author": {"user": {"login": "mohanvive", "name": "Mohanadarshan V"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c4b848129cfec82bd8fd1d6c3d7b48483b8f854c", "committedDate": "2020-05-04T06:28:23Z", "message": "Add negative testcases for member type infer usecase"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "393e5cf231671816a878a53f0f4b3b1e26e0faa4", "author": {"user": {"login": "mohanvive", "name": "Mohanadarshan V"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/393e5cf231671816a878a53f0f4b3b1e26e0faa4", "committedDate": "2020-05-04T06:38:53Z", "message": "Add minor code refactoring changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NzgwMTU5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23058#pullrequestreview-404780159", "createdAt": "2020-05-04T08:08:28Z", "commit": {"oid": "393e5cf231671816a878a53f0f4b3b1e26e0faa4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwODowODoyOFrOGP2WMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwODowODoyOFrOGP2WMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTI3MjI0MQ==", "bodyText": "I have these types defined\ntype Person record {\n    readonly string name;\n    readonly int age;\n};\n\ntype Customer record {\n    readonly int id;\n    readonly string name;\n    string lname;\n};\n\nAnd I have this table.\nvar tab = table key(name) [\n    { name: \"AAA\", age: 31 },\n    { name: \"BBB\", age: 34 },\n    { id: 13 , name: \"Foo\", lname: \"QWER\" }\n    ];\nAccording to the PR table constraint will be one record type with required fields and some optional fields.\nBut shouldnt it be table<Person|Customer> ?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23058#discussion_r419272241", "createdAt": "2020-05-04T08:08:28Z", "author": {"login": "gimantha"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/semantics/analyzer/TypeChecker.java", "diffHunk": "@@ -758,8 +774,59 @@ public void visit(BLangTableConstructorExpr tableConstructorExpr) {\n         }\n     }\n \n-    private boolean validateTableType(BTableType tableType, DiagnosticPos pos,\n-                                      List<BLangRecordLiteral> recordLiterals) {\n+    private BType inferTableMemberType(List<BType> memTypes, BLangTableConstructorExpr tableConstructorExpr) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "393e5cf231671816a878a53f0f4b3b1e26e0faa4"}, "originalPosition": 62}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0Nzg5MDc4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23058#pullrequestreview-404789078", "createdAt": "2020-05-04T08:23:01Z", "commit": {"oid": "393e5cf231671816a878a53f0f4b3b1e26e0faa4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0ODI0OTk3", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23058#pullrequestreview-404824997", "createdAt": "2020-05-04T09:18:31Z", "commit": {"oid": "393e5cf231671816a878a53f0f4b3b1e26e0faa4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2541488e22e498f18cc55a9012d35d6e42b51b7", "author": {"user": {"login": "mohanvive", "name": "Mohanadarshan V"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e2541488e22e498f18cc55a9012d35d6e42b51b7", "committedDate": "2020-05-04T12:19:24Z", "message": "Enable Anydata testcases with table"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3365, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}