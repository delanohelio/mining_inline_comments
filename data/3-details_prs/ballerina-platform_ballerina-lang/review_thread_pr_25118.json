{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyNTEyMjQw", "number": 25118, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwNTozNzoyMlrOEU2jOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwNjozNTo1MVrOEU3VUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwMzAwNzI4OnYy", "diffSide": "RIGHT", "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwNTozNzoyMlrOG7Rxrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwNTozNzoyMlrOG7Rxrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDgxMDQxNA==", "bodyText": "join-on-condition := on expression equals expression from spec is parsed as on-clause := on expression.\ni.e. we parse the equals keyword implicitly.\n\n\nequals operator was added to error handler as well since it is already supported in the parser.\nThere's no such operator in the spec though.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25118#discussion_r464810414", "createdAt": "2020-08-04T05:37:22Z", "author": {"login": "lochana-chathura"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java", "diffHunk": "@@ -10918,6 +10818,8 @@ private STNode parseJoinClause(boolean isRhsExpr) {\n      */\n     private STNode parseOnClause(boolean isRhsExpr) {\n         STNode onKeyword = parseOnKeyword();\n+        // note that parsing expression includes following.\n+        // equals-expr := expression `equals` expression\n         STNode expression = parseExpression(OperatorPrecedence.QUERY, isRhsExpr, false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ed32005b128bd3274eb061a9fdee1587dc2ff04"}, "originalPosition": 366}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwMzEzNTUzOnYy", "diffSide": "LEFT", "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQwNjozNTo1MVrOG7S-gQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQwNToyMzoyNVrOG76pTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDgzMDA4MQ==", "bodyText": "Wouldn't we need this?\nFor eg: In case when theres an additional token after the order-keys, but not one of the \"EndOfOrderKeys\" tokens ..?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25118#discussion_r464830081", "createdAt": "2020-08-04T06:35:51Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java", "diffHunk": "@@ -10693,13 +10630,10 @@ private STNode parseOrderKeyList(boolean isRhsExpr) {\n \n         // Parse the remaining order keys\n         nextToken = peek();\n-        STNode orderKeyListMemberEnd;\n+        STNode leadingComma;\n         while (!isEndOfOrderKeys(nextToken.kind)) {\n-            orderKeyListMemberEnd = parseOrderKeyListMemberEnd();\n-            if (orderKeyListMemberEnd == null) {\n-                break;\n-            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ed32005b128bd3274eb061a9fdee1587dc2ff04"}, "originalPosition": 188}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDg0ODM2NQ==", "bodyText": "private boolean isEndOfOrderKeys(SyntaxKind tokenKind) {\n        switch (tokenKind) {\n            case COMMA_TOKEN:\n            case ASCENDING_KEYWORD:\n            case DESCENDING_KEYWORD:\n                return false;\n            default:\n                return !isTypeStartingToken(tokenKind);\n        }\n    }\nIf there's an additional token and not one of end of order keys it should be one of following.\n\ncomma token - recover with missing identifer(expr)\nascending/ descending token - recover with missing comma, missing identifier(expr)\ntype start token - it is considered as an expr\n\nCan there be any other case?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25118#discussion_r464848365", "createdAt": "2020-08-04T07:17:22Z", "author": {"login": "lochana-chathura"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java", "diffHunk": "@@ -10693,13 +10630,10 @@ private STNode parseOrderKeyList(boolean isRhsExpr) {\n \n         // Parse the remaining order keys\n         nextToken = peek();\n-        STNode orderKeyListMemberEnd;\n+        STNode leadingComma;\n         while (!isEndOfOrderKeys(nextToken.kind)) {\n-            orderKeyListMemberEnd = parseOrderKeyListMemberEnd();\n-            if (orderKeyListMemberEnd == null) {\n-                break;\n-            }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDgzMDA4MQ=="}, "originalCommit": {"oid": "6ed32005b128bd3274eb061a9fdee1587dc2ff04"}, "originalPosition": 188}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTA3MTM5NQ==", "bodyText": "Not all type-starting-tokens are expressions..\nI was thinking, we can terminate if the next token is an end of order keys for sure. If not, try to parse the \"parseOrderKeyListMemberEnd\" and let the error recovery handle whether to terminate or continue.. WDYT?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25118#discussion_r465071395", "createdAt": "2020-08-04T14:00:04Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java", "diffHunk": "@@ -10693,13 +10630,10 @@ private STNode parseOrderKeyList(boolean isRhsExpr) {\n \n         // Parse the remaining order keys\n         nextToken = peek();\n-        STNode orderKeyListMemberEnd;\n+        STNode leadingComma;\n         while (!isEndOfOrderKeys(nextToken.kind)) {\n-            orderKeyListMemberEnd = parseOrderKeyListMemberEnd();\n-            if (orderKeyListMemberEnd == null) {\n-                break;\n-            }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDgzMDA4MQ=="}, "originalCommit": {"oid": "6ed32005b128bd3274eb061a9fdee1587dc2ff04"}, "originalPosition": 188}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTQ4MDAxNQ==", "bodyText": "yea. that's better. Fixed in a434d8b", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25118#discussion_r465480015", "createdAt": "2020-08-05T05:23:25Z", "author": {"login": "lochana-chathura"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java", "diffHunk": "@@ -10693,13 +10630,10 @@ private STNode parseOrderKeyList(boolean isRhsExpr) {\n \n         // Parse the remaining order keys\n         nextToken = peek();\n-        STNode orderKeyListMemberEnd;\n+        STNode leadingComma;\n         while (!isEndOfOrderKeys(nextToken.kind)) {\n-            orderKeyListMemberEnd = parseOrderKeyListMemberEnd();\n-            if (orderKeyListMemberEnd == null) {\n-                break;\n-            }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDgzMDA4MQ=="}, "originalCommit": {"oid": "6ed32005b128bd3274eb061a9fdee1587dc2ff04"}, "originalPosition": 188}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 338, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}