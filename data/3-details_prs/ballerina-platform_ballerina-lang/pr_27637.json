{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ1NTEzMDA0", "number": 27637, "title": "Fix runtime hangs", "bodyText": "Purpose\n\nTo solve runtime hangs issue while using AsyncUtils invoke functions\n\nFixes #26187\nApproach\n\n\nSamples\n\n\nRemarks\n\nRefactor invokefunctionAsync method\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-12-25T04:31:51Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27637", "merged": true, "mergeCommit": {"oid": "5009cdad3625584d28eada51c1aee431e6e11a3c"}, "closed": true, "closedAt": "2021-01-13T04:38:18Z", "author": {"login": "gabilang"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdoarUNgH2gAyNTQ1NTEzMDA0OjNjNmFkOTY5MzMwZDdkYzdjNTA2YTNkYWMwY2UyZmZlYzk3ZWU3NGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdvoJbzgFqTU2Njg4Nzc1OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3c6ad969330d7dc7c506a3dac0ce2ffec97ee74d", "author": {"user": {"login": "gabilang", "name": "Gabilan Ganeshwaran"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3c6ad969330d7dc7c506a3dac0ce2ffec97ee74d", "committedDate": "2020-12-21T18:59:03Z", "message": "Fix runtime hangs when trying to use AsyncUtils invoke functions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba5d110ad5b6600f02b5ffd978d993962ba76457", "author": {"user": {"login": "gabilang", "name": "Gabilan Ganeshwaran"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ba5d110ad5b6600f02b5ffd978d993962ba76457", "committedDate": "2020-12-22T23:57:51Z", "message": "Fix runtime hangs when using AsyncUtils invoke functions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb9ab2c14893cac070565520a49334d52e7261ba", "author": {"user": {"login": "gabilang", "name": "Gabilan Ganeshwaran"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/cb9ab2c14893cac070565520a49334d52e7261ba", "committedDate": "2020-12-23T00:17:04Z", "message": "Merge branch 'master' into master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76fe0f3518fb008828d69e7155b567eccf305bf6", "author": {"user": {"login": "gabilang", "name": "Gabilan Ganeshwaran"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/76fe0f3518fb008828d69e7155b567eccf305bf6", "committedDate": "2020-12-24T07:40:16Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "473ddae236c2919b7cac6039f126ad119a43d773", "author": {"user": {"login": "gabilang", "name": "Gabilan Ganeshwaran"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/473ddae236c2919b7cac6039f126ad119a43d773", "committedDate": "2020-12-25T04:29:18Z", "message": "Fix runtime hangs when using AsyncUtils invoke functions"}, "afterCommit": {"oid": "77cae75a45cbd50f0364710cf114321c0c0ceea7", "author": {"user": {"login": "gabilang", "name": "Gabilan Ganeshwaran"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/77cae75a45cbd50f0364710cf114321c0c0ceea7", "committedDate": "2021-01-05T17:04:59Z", "message": "Fix runtime hangs when using AsyncUtils invoke functions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "77cae75a45cbd50f0364710cf114321c0c0ceea7", "author": {"user": {"login": "gabilang", "name": "Gabilan Ganeshwaran"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/77cae75a45cbd50f0364710cf114321c0c0ceea7", "committedDate": "2021-01-05T17:04:59Z", "message": "Fix runtime hangs when using AsyncUtils invoke functions"}, "afterCommit": {"oid": "9303d747e557acc225669d68cc0e6d8d90588918", "author": {"user": {"login": "gabilang", "name": "Gabilan Ganeshwaran"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9303d747e557acc225669d68cc0e6d8d90588918", "committedDate": "2021-01-06T15:52:37Z", "message": "Fix runtime hangs when using AsyncUtils invoke functions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYzMjg4NjMz", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27637#pullrequestreview-563288633", "createdAt": "2021-01-07T08:24:19Z", "commit": {"oid": "9303d747e557acc225669d68cc0e6d8d90588918"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wN1QwODoyNDoxOVrOIPjDRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wN1QwODoyNDoxOVrOIPjDRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzE3MzgzMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    final FutureValue future = scheduler.createFuture(parent, null, null,\n          \n          \n            \n                     final FutureValue future = scheduler.createFuture(parent, null, null, ((BFunctionType) func.getType()).retType,\n          \n          \n            \n                                                                      name, metadata);", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27637#discussion_r553173831", "createdAt": "2021-01-07T08:24:19Z", "author": {"login": "warunalakshitha"}, "path": "bvm/ballerina-runtime/src/main/java/io/ballerina/runtime/internal/scheduling/AsyncUtils.java", "diffHunk": "@@ -157,6 +159,55 @@ public void notifyFailure(BError error) {\n         invokeFunctionPointerAsync(func, strand, strandName, metadata, argsSupplier.get(), callback, scheduler);\n     }\n \n+    public static FutureValue invokeAndForgetFunctionPointerAsync(BFunctionPointer<?, ?> func, Strand parent,\n+                                                                  String name, StrandMetadata metadata, Object[] args,\n+                                                                  AsyncFunctionCallback callback,\n+                                                                  Scheduler scheduler) {\n+\n+        final FutureValue future = scheduler.createFuture(parent, null, null,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9303d747e557acc225669d68cc0e6d8d90588918"}, "originalPosition": 38}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1ebc535e779a29763db71857583287d6413c454", "author": {"user": {"login": "gabilang", "name": "Gabilan Ganeshwaran"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d1ebc535e779a29763db71857583287d6413c454", "committedDate": "2021-01-08T04:48:10Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2a07e041510d9ca6f1be7edb550e9046cc3919d9", "author": {"user": {"login": "gabilang", "name": "Gabilan Ganeshwaran"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2a07e041510d9ca6f1be7edb550e9046cc3919d9", "committedDate": "2021-01-08T09:14:44Z", "message": "Update bvm/ballerina-runtime/src/main/java/io/ballerina/runtime/internal/scheduling/AsyncUtils.java\n\nCo-authored-by: Waruna Lakshitha <warunalakshitha@users.noreply.github.com>"}, "afterCommit": {"oid": "09566250114f2094eaf31af330f53637aedb374a", "author": {"user": {"login": "gabilang", "name": "Gabilan Ganeshwaran"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/09566250114f2094eaf31af330f53637aedb374a", "committedDate": "2021-01-08T20:11:15Z", "message": "Fix formatting issue"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "09566250114f2094eaf31af330f53637aedb374a", "author": {"user": {"login": "gabilang", "name": "Gabilan Ganeshwaran"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/09566250114f2094eaf31af330f53637aedb374a", "committedDate": "2021-01-08T20:11:15Z", "message": "Fix formatting issue"}, "afterCommit": {"oid": "2cf73ef67369f64123ef44e585593e8de1a0216b", "author": {"user": {"login": "gabilang", "name": "Gabilan Ganeshwaran"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2cf73ef67369f64123ef44e585593e8de1a0216b", "committedDate": "2021-01-08T20:35:00Z", "message": "Fix formatting issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abb994e486027300c20c92b4dafc94add168d134", "author": {"user": {"login": "gabilang", "name": "Gabilan Ganeshwaran"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/abb994e486027300c20c92b4dafc94add168d134", "committedDate": "2021-01-08T20:40:32Z", "message": "Fix formatting issue"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2cf73ef67369f64123ef44e585593e8de1a0216b", "author": {"user": {"login": "gabilang", "name": "Gabilan Ganeshwaran"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2cf73ef67369f64123ef44e585593e8de1a0216b", "committedDate": "2021-01-08T20:35:00Z", "message": "Fix formatting issue"}, "afterCommit": {"oid": "abb994e486027300c20c92b4dafc94add168d134", "author": {"user": {"login": "gabilang", "name": "Gabilan Ganeshwaran"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/abb994e486027300c20c92b4dafc94add168d134", "committedDate": "2021-01-08T20:40:32Z", "message": "Fix formatting issue"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY2ODg3NzU5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27637#pullrequestreview-566887759", "createdAt": "2021-01-13T04:38:11Z", "commit": {"oid": "abb994e486027300c20c92b4dafc94add168d134"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4676, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}