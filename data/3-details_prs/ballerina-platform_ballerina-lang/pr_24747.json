{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ5MzA2MjAw", "number": 24747, "title": "Implement Module function mocking", "bodyText": "Purpose\nImplement Module level function mocking.\nFixes #24594\nApproach\nImplement module-level function mocking with validation\nSamples\n\nProvide high-level details about the samples related to this feature.\n\nRemarks\n\nList any other known issues, related PRs, TODO items, or any other notes related to the PR.\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-07-15T07:43:01Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747", "merged": true, "mergeCommit": {"oid": "559328bc7b3d23a4c4d903fa0984609f7d8af3e4"}, "closed": true, "closedAt": "2020-07-16T14:49:04Z", "author": {"login": "Ibaqu"}, "timelineItems": {"totalCount": 36, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1F5utgBqjM1NDczNDY5ODU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1gZi8AFqTQ0OTkyNDYxOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "46f25f5fc8e1ec46292a792246f23b330a7389c1", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/46f25f5fc8e1ec46292a792246f23b330a7389c1", "committedDate": "2020-07-15T07:14:38Z", "message": "Implement Module function mocking"}, "afterCommit": {"oid": "b4dc4da31baf5164cfd88dca4ae5a6c35dfcf992", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b4dc4da31baf5164cfd88dca4ae5a6c35dfcf992", "committedDate": "2020-07-15T07:56:07Z", "message": "Implement Module function mocking"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4ODA4MjY3", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#pullrequestreview-448808267", "createdAt": "2020-07-15T10:01:06Z", "commit": {"oid": "b4dc4da31baf5164cfd88dca4ae5a6c35dfcf992"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDowMTowNlrOGx3J3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDowMTowNlrOGx3J3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDkzNzA1NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        String packageName = functionName.substring(functionName.indexOf(\"/\") + 1, functionName.indexOf(\":\"));\n          \n          \n            \n                        String packageName = functionName.substring(functionName.indexOf('/') + 1, functionName.indexOf(':'));\n          \n      \n    \n    \n  \n\nFaster indexOf method by using char", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#discussion_r454937055", "createdAt": "2020-07-15T10:01:06Z", "author": {"login": "pramodya1994"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/desugar/MockDesugar.java", "diffHunk": "@@ -102,15 +96,33 @@ public void generateMockFunctions(BLangPackage pkgNode) {\n         Set<String> mockFunctionSet = mockFunctionMap.keySet();\n \n         for (String function: mockFunctionSet) {\n-            if (!function.contains(\"#\")) { // Check added to skip desugaring for previous implementation mock functions\n-                pkgNode.getTestablePkg().functions.add(generateMockFunction(function));\n-            }\n+            pkgNode.getTestablePkg().functions.add(generateMockFunction(function));\n         }\n     }\n \n     private BLangFunction generateMockFunction(String functionName) {\n-        // Get the orginal function from the pkgNode function list for reference\n-        this.originalFunction = getOriginalFunction(functionName);\n+        // Set the current mock object\n+        this.mockFnObjectName = this.bLangPackage.getTestablePkg().getMockFunctionNamesMap().get(functionName);\n+\n+        // Reset both import and original functions\n+        this.importFunction = null;\n+        this.originalFunction = null;\n+\n+        // Function name is going to be 'ballerina/math:1.0.0 # absInt'\n+        String currentPackageId = this.bLangPackage.packageID.toString();\n+\n+\n+        // We need to identify if the function is part of the current package or imported package\n+        if (functionName.contains(currentPackageId)) {\n+            // Simply extract the name only and set it to function name\n+            functionName = functionName.substring(functionName.indexOf(MOCK_ANNOTATION_DELIMITER) + 1);\n+            this.originalFunction = getOriginalFunction(functionName);\n+        } else {\n+            // Extract the name and the package details\n+            String packageName = functionName.substring(functionName.indexOf(\"/\") + 1, functionName.indexOf(\":\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4dc4da31baf5164cfd88dca4ae5a6c35dfcf992"}, "originalPosition": 91}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4ODEwMzEy", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#pullrequestreview-448810312", "createdAt": "2020-07-15T10:03:53Z", "commit": {"oid": "b4dc4da31baf5164cfd88dca4ae5a6c35dfcf992"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDowMzo1M1rOGx3QDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDowMzo1M1rOGx3QDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDkzODYzOQ==", "bodyText": "importFunction hides the field declared at L68, Shall we use another name for this?\nAlso, initializer null is redundant.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#discussion_r454938639", "createdAt": "2020-07-15T10:03:53Z", "author": {"login": "pramodya1994"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/desugar/MockDesugar.java", "diffHunk": "@@ -136,16 +149,96 @@ private BLangFunction getOriginalFunction(String functionName) {\n         return null;\n     }\n \n+    private BInvokableSymbol getImportFunction(String functionName, String packageName) {\n+        BInvokableSymbol importFunction = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4dc4da31baf5164cfd88dca4ae5a6c35dfcf992"}, "originalPosition": 116}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4ODEwOTUx", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#pullrequestreview-448810951", "createdAt": "2020-07-15T10:04:46Z", "commit": {"oid": "b4dc4da31baf5164cfd88dca4ae5a6c35dfcf992"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDowNDo0NlrOGx3SBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDowNDo0NlrOGx3SBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDkzOTE0Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    List<BLangSimpleVariable> requiredParams = null;\n          \n          \n            \n                    List<BLangSimpleVariable> requiredParams;", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#discussion_r454939142", "createdAt": "2020-07-15T10:04:46Z", "author": {"login": "pramodya1994"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/desugar/MockDesugar.java", "diffHunk": "@@ -136,16 +149,96 @@ private BLangFunction getOriginalFunction(String functionName) {\n         return null;\n     }\n \n+    private BInvokableSymbol getImportFunction(String functionName, String packageName) {\n+        BInvokableSymbol importFunction = null;\n+        importFunction = getInvokableSymbol(functionName, packageName, this.bLangPackage.getImports());\n+\n+        if (importFunction == null) {\n+            importFunction =\n+                    getInvokableSymbol(functionName, packageName,  this.bLangPackage.getTestablePkg().getImports());\n+        }\n+\n+        return importFunction;\n+    }\n+\n+    private BInvokableSymbol getInvokableSymbol(String functionName,\n+                                                String packageName,\n+                                                List<BLangImportPackage> importList) {\n+        // Loop through each BLangImportPackage\n+        for (BLangImportPackage importPkg : importList) {\n+            // If the import package name matches\n+            if (importPkg.alias.getValue().equals(packageName)) {\n+                // return the function name defined in the package entry map\n+                return (BInvokableSymbol) importPkg.symbol.scope.entries.get(new Name(functionName)).symbol;\n+            }\n+        }\n+\n+        return null;\n+    }\n+\n     private List<BLangSimpleVariable> generateRequiredParams() {\n-        List<BLangSimpleVariable> requiredParams = this.originalFunction.requiredParams;\n+        List<BLangSimpleVariable> requiredParams = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4dc4da31baf5164cfd88dca4ae5a6c35dfcf992"}, "originalPosition": 144}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4ODExMzM0", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#pullrequestreview-448811334", "createdAt": "2020-07-15T10:05:20Z", "commit": {"oid": "b4dc4da31baf5164cfd88dca4ae5a6c35dfcf992"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDowNToyMFrOGx3TLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDowNToyMFrOGx3TLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDkzOTQzNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    BLangType returnTypeNode = null;\n          \n          \n            \n                    BLangType returnTypeNode;", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#discussion_r454939436", "createdAt": "2020-07-15T10:05:20Z", "author": {"login": "pramodya1994"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/desugar/MockDesugar.java", "diffHunk": "@@ -136,16 +149,96 @@ private BLangFunction getOriginalFunction(String functionName) {\n         return null;\n     }\n \n+    private BInvokableSymbol getImportFunction(String functionName, String packageName) {\n+        BInvokableSymbol importFunction = null;\n+        importFunction = getInvokableSymbol(functionName, packageName, this.bLangPackage.getImports());\n+\n+        if (importFunction == null) {\n+            importFunction =\n+                    getInvokableSymbol(functionName, packageName,  this.bLangPackage.getTestablePkg().getImports());\n+        }\n+\n+        return importFunction;\n+    }\n+\n+    private BInvokableSymbol getInvokableSymbol(String functionName,\n+                                                String packageName,\n+                                                List<BLangImportPackage> importList) {\n+        // Loop through each BLangImportPackage\n+        for (BLangImportPackage importPkg : importList) {\n+            // If the import package name matches\n+            if (importPkg.alias.getValue().equals(packageName)) {\n+                // return the function name defined in the package entry map\n+                return (BInvokableSymbol) importPkg.symbol.scope.entries.get(new Name(functionName)).symbol;\n+            }\n+        }\n+\n+        return null;\n+    }\n+\n     private List<BLangSimpleVariable> generateRequiredParams() {\n-        List<BLangSimpleVariable> requiredParams = this.originalFunction.requiredParams;\n+        List<BLangSimpleVariable> requiredParams = null;\n+\n+        if (this.originalFunction == null) {\n+            requiredParams = generateImportRequiredParams();\n+        } else {\n+            requiredParams = this.originalFunction.requiredParams;\n+        }\n+\n         return requiredParams;\n     }\n \n+    private List<BLangSimpleVariable> generateImportRequiredParams() {\n+        List<BLangSimpleVariable> bLangSimpleVariables = new ArrayList<>();\n+\n+        // Iterate through the params and generate the BLangSimpleVariable\n+        for (BVarSymbol bVarSymbol : this.importFunction.params) {\n+            BLangSimpleVariable bLangSimpleVariable =\n+                    ASTBuilderUtil.createVariable(bLangPackage.pos, bVarSymbol.name.getValue(),\n+                            bVarSymbol.type, null, bVarSymbol);\n+            bLangSimpleVariables.add(bLangSimpleVariable);\n+        }\n+\n+        return bLangSimpleVariables;\n+    }\n+\n+    private BLangSimpleVariable generateRestParam() {\n+        BLangSimpleVariable bLangSimpleVariable = null;\n+\n+        if (this.importFunction != null) {\n+            BVarSymbol restParam = this.importFunction.restParam;\n+\n+            if (this.importFunction.restParam != null) {\n+                bLangSimpleVariable = ASTBuilderUtil.createVariable(bLangPackage.pos, restParam.name.getValue(),\n+                        restParam.type, null, restParam);\n+                bLangSimpleVariable.typeNode = ASTBuilderUtil.createTypeNode(restParam.type);\n+            }\n+        }\n+\n+        return bLangSimpleVariable;\n+    }\n+\n     private BLangType generateReturnTypeNode() {\n-        BLangType returnTypeNode = this.originalFunction.returnTypeNode;\n+        BLangType returnTypeNode = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4dc4da31baf5164cfd88dca4ae5a6c35dfcf992"}, "originalPosition": 187}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4ODExODI3", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#pullrequestreview-448811827", "createdAt": "2020-07-15T10:05:59Z", "commit": {"oid": "b4dc4da31baf5164cfd88dca4ae5a6c35dfcf992"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDowNTo1OVrOGx3UlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDowNTo1OVrOGx3UlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDkzOTc5Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    BInvokableType bInvokableType = null;\n          \n          \n            \n                    BInvokableType bInvokableType;", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#discussion_r454939797", "createdAt": "2020-07-15T10:05:59Z", "author": {"login": "pramodya1994"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/desugar/MockDesugar.java", "diffHunk": "@@ -160,13 +253,14 @@ private BInvokableSymbol generateSymbol(String functionName) {\n     }\n \n     private BInvokableType generateSymbolInvokableType() {\n-        BInvokableType bInvokableType = (BInvokableType) this.originalFunction.symbol.type;\n-        return bInvokableType;\n-    }\n+        BInvokableType bInvokableType = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4dc4da31baf5164cfd88dca4ae5a6c35dfcf992"}, "originalPosition": 217}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4ODEzMDA4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#pullrequestreview-448813008", "createdAt": "2020-07-15T10:07:46Z", "commit": {"oid": "b4dc4da31baf5164cfd88dca4ae5a6c35dfcf992"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDowNzo0NlrOGx3YQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDowNzo0NlrOGx3YQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk0MDczOQ==", "bodyText": "Isn't it redundant?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#discussion_r454940739", "createdAt": "2020-07-15T10:07:46Z", "author": {"login": "pramodya1994"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/desugar/MockDesugar.java", "diffHunk": "@@ -208,10 +323,9 @@ private BLangFieldBasedAccess generateFieldBasedAccess() {\n     }\n \n     // = (functionToMock)\n-    private BLangLiteral generateRHSExpr() {\n+    private BLangLiteral generateRHSExpr(String val) {\n         BType type = symTable.stringType;\n-        Object value = this.originalFunction.name.value;\n-\n+        Object value = val;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4dc4da31baf5164cfd88dca4ae5a6c35dfcf992"}, "originalPosition": 291}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4ODE4MDkx", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#pullrequestreview-448818091", "createdAt": "2020-07-15T10:15:18Z", "commit": {"oid": "b4dc4da31baf5164cfd88dca4ae5a6c35dfcf992"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDoxNToxOFrOGx3oKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDoxNToxOFrOGx3oKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk0NDgwOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    List<BLangSimpleVarRef> argVariables = null;\n          \n          \n            \n                    List<BLangSimpleVarRef> argVariables;", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#discussion_r454944808", "createdAt": "2020-07-15T10:15:18Z", "author": {"login": "pramodya1994"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/desugar/MockDesugar.java", "diffHunk": "@@ -266,21 +380,25 @@ private BInvokableSymbol getMockHandlerInvokableSymbol() {\n     }\n \n     private BLangSimpleVarRef getMockFunctionReference() {\n-        String mockObjName =\n-                bLangPackage.getTestablePkg().getMockFunctionNamesMap().get(originalFunction.getName().toString());\n         BVarSymbol mockObjectSymbol =\n-                (BVarSymbol) bLangPackage.getTestablePkg().symbol.scope.lookup(new Name(mockObjName)).symbol;\n-\n+                (BVarSymbol) bLangPackage.getTestablePkg().symbol.scope.lookup(new Name(this.mockFnObjectName)).symbol;\n         BLangSimpleVarRef bLangSimpleVarRef = ASTBuilderUtil.createVariableRef(bLangPackage.pos, mockObjectSymbol);\n-\n         return bLangSimpleVarRef;\n     }\n \n     private BLangListConstructorExpr generateMockHandlerArgs() {\n         BLangListConstructorExpr argsList =\n                 ASTBuilderUtil.createEmptyArrayLiteral(bLangPackage.pos, symTable.arrayAnydataType);\n-        List<BLangSimpleVarRef> argVariables =\n-                ASTBuilderUtil.createVariableRefList(bLangPackage.pos, originalFunction.requiredParams);\n+\n+        List<BLangSimpleVarRef> argVariables = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4dc4da31baf5164cfd88dca4ae5a6c35dfcf992"}, "originalPosition": 316}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4ODE5NzU3", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#pullrequestreview-448819757", "createdAt": "2020-07-15T10:18:03Z", "commit": {"oid": "b4dc4da31baf5164cfd88dca4ae5a6c35dfcf992"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDoxODowNFrOGx3tXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDoxODowNFrOGx3tXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk0NjE0MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    BType type = null;\n          \n          \n            \n                    BType type;", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#discussion_r454946141", "createdAt": "2020-07-15T10:18:04Z", "author": {"login": "pramodya1994"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/desugar/MockDesugar.java", "diffHunk": "@@ -296,4 +414,16 @@ private static IdentifierNode createIdentifier(String value) {\n         }\n         return node;\n     }\n+\n+    private BType generateType() {\n+        BType type = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4dc4da31baf5164cfd88dca4ae5a6c35dfcf992"}, "originalPosition": 334}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4ODIwODk4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#pullrequestreview-448820898", "createdAt": "2020-07-15T10:19:48Z", "commit": {"oid": "b4dc4da31baf5164cfd88dca4ae5a6c35dfcf992"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDoxOTo0OFrOGx3wyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDoxOTo0OFrOGx3wyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk0NzAxOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                };\n          \n          \n            \n            };", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#discussion_r454947019", "createdAt": "2020-07-15T10:19:48Z", "author": {"login": "pramodya1994"}, "path": "misc/testerina/modules/testerina-core/src/main/ballerina/src/test/mock.bal", "diffHunk": "@@ -223,7 +223,10 @@ public function when(MockFunction mockFunction) returns FunctionStub {\n }\n \n # Represents a MockFunction object\n-public type MockFunction object { string functionToMock = \"\"; };\n+public type MockFunction object {\n+    string functionToMock = \"\";\n+    string functionToMockPackage = \"\";\n+    };", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4dc4da31baf5164cfd88dca4ae5a6c35dfcf992"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4ODMzOTQ0", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#pullrequestreview-448833944", "createdAt": "2020-07-15T10:39:29Z", "commit": {"oid": "51259c72b66598e38db2a6db79b60c10de1b60e9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDozOTozMFrOGx4Z8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDozOTozMFrOGx4Z8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk1NzU1NA==", "bodyText": "This is never used", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#discussion_r454957554", "createdAt": "2020-07-15T10:39:30Z", "author": {"login": "pramodya1994"}, "path": "misc/testerina/modules/testerina-core/src/main/java/org/ballerinalang/testerina/core/TestAnnotationProcessor.java", "diffHunk": "@@ -78,14 +74,12 @@\n     private static final String VALUE_SET_ANNOTATION_NAME = \"dataProvider\";\n     private static final String TEST_ENABLE_ANNOTATION_NAME = \"enable\";\n     private static final String MOCK_ANNOTATION_DELIMITER = \"#\";\n-    private static final String MOCK_FN = \"Mock\";\n+    private static final String MOCK_FN = \"MockFn\"; //Remove this", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51259c72b66598e38db2a6db79b60c10de1b60e9"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4ODM0ODQ3", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#pullrequestreview-448834847", "createdAt": "2020-07-15T10:40:58Z", "commit": {"oid": "51259c72b66598e38db2a6db79b60c10de1b60e9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDo0MDo1OFrOGx4c8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDo0MDo1OFrOGx4c8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk1ODMyMA==", "bodyText": "It's better if we can divide this method since its complexity is high and long.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#discussion_r454958320", "createdAt": "2020-07-15T10:40:58Z", "author": {"login": "pramodya1994"}, "path": "misc/testerina/modules/testerina-core/src/main/java/org/ballerinalang/testerina/core/TestAnnotationProcessor.java", "diffHunk": "@@ -314,23 +238,30 @@ public void process(FunctionNode functionNode, List<AnnotationAttachmentNode> an\n     // Extract mock function information\n     @Override\n     public void process(SimpleVariableNode simpleVariableNode, List<AnnotationAttachmentNode> annotations) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51259c72b66598e38db2a6db79b60c10de1b60e9"}, "originalPosition": 126}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4ODM1MTMz", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#pullrequestreview-448835133", "createdAt": "2020-07-15T10:41:26Z", "commit": {"oid": "51259c72b66598e38db2a6db79b60c10de1b60e9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDo0MToyNlrOGx4dzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDo0MToyNlrOGx4dzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk1ODU0Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                annotationValues[0] = packageName; // Set default value of the annotation as the current pacakge\n          \n          \n            \n                                annotationValues[0] = packageName; // Set default value of the annotation as the current package", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#discussion_r454958543", "createdAt": "2020-07-15T10:41:26Z", "author": {"login": "pramodya1994"}, "path": "misc/testerina/modules/testerina-core/src/main/java/org/ballerinalang/testerina/core/TestAnnotationProcessor.java", "diffHunk": "@@ -314,23 +238,30 @@ public void process(FunctionNode functionNode, List<AnnotationAttachmentNode> an\n     // Extract mock function information\n     @Override\n     public void process(SimpleVariableNode simpleVariableNode, List<AnnotationAttachmentNode> annotations) {\n-        annotations = annotations.stream().distinct().collect(Collectors.toList());\n+        parent = (BLangPackage) ((BLangSimpleVariable) simpleVariableNode).parent;\n+        String packageName = getPackageName(parent);\n \n+        annotations = annotations.stream().distinct().collect(Collectors.toList());\n+        // Iterate through all the annotations\n         for (AnnotationAttachmentNode attachmentNode : annotations) {\n             String annotationName = attachmentNode.getAnnotationName().getValue();\n-            // Check if the annotation name is Mock\n-            if (MOCK_ANNOTATION_NAME.equals(annotationName)) {\n-                String type = ((BLangUserDefinedType) ((BLangSimpleVariable) simpleVariableNode).typeNode)\n-                        .typeName.getValue();\n \n+            if (MOCK_ANNOTATION_NAME.equals(annotationName)) {\n+                String type = ((BLangUserDefinedType) ((BLangSimpleVariable) simpleVariableNode).typeNode).\n+                        typeName.getValue();\n+                // Check if the simpleVariableNode that the annotation is attached to is in fact the MockFunction object\n                 if (type.equals(\"MockFunction\")) {\n-                    String[] vals = new String[2];\n-                    // Extract function to mock name\n+                    String mockFnObjectName = simpleVariableNode.getName().getValue();\n+                    String[] annotationValues = new String[2]; // [0] - moduleName, [1] - functionName\n+                    annotationValues[0] = packageName; // Set default value of the annotation as the current pacakge", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51259c72b66598e38db2a6db79b60c10de1b60e9"}, "originalPosition": 149}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4ODM1ODQy", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#pullrequestreview-448835842", "createdAt": "2020-07-15T10:42:32Z", "commit": {"oid": "51259c72b66598e38db2a6db79b60c10de1b60e9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDo0MjozM1rOGx4f5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDo0MjozM1rOGx4f5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk1OTA3OQ==", "bodyText": "variableNode is never used", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#discussion_r454959079", "createdAt": "2020-07-15T10:42:33Z", "author": {"login": "pramodya1994"}, "path": "misc/testerina/modules/testerina-core/src/main/java/org/ballerinalang/testerina/core/TestAnnotationProcessor.java", "diffHunk": "@@ -429,34 +343,27 @@ private String formatPackageName(String value) {\n \n     /**\n      * Validates the function name provided in the annotation.\n-     * @param functionName Function to mock\n+     * @param functionName Name of the function to mock\n      * @param variableNode  MockFunction object variable node\n      * @param attachmentNode  MockFunction object attachment node\n      */\n-    private void validateFunctionName(String functionName, SimpleVariableNode variableNode,\n+    private void validateFunctionName(String functionName, PackageID functionToMockID, SimpleVariableNode variableNode,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51259c72b66598e38db2a6db79b60c10de1b60e9"}, "originalPosition": 253}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4ODM2Nzg3", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#pullrequestreview-448836787", "createdAt": "2020-07-15T10:44:03Z", "commit": {"oid": "51259c72b66598e38db2a6db79b60c10de1b60e9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDo0NDowM1rOGx4i1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDo0NDowM1rOGx4i1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk1OTgzMA==", "bodyText": "functionToMockID is nullable. NPE can be thrown.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#discussion_r454959830", "createdAt": "2020-07-15T10:44:03Z", "author": {"login": "pramodya1994"}, "path": "misc/testerina/modules/testerina-core/src/main/java/org/ballerinalang/testerina/core/TestAnnotationProcessor.java", "diffHunk": "@@ -465,7 +372,8 @@ private void validateFunctionName(String functionName, SimpleVariableNode variab\n \n             // If it reaches this part, then the function has'nt been found in both packages\n             diagnosticLog.logDiagnostic(Diagnostic.Kind.ERROR, attachmentNode.getPosition(),\n-                    \"Function \\'\" + functionName + \"\\' cannot be found in the current package\");\n+                    \"Function \\'\" + functionName + \"\\' cannot be found in the package \\'\"\n+                            + functionToMockID.toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51259c72b66598e38db2a6db79b60c10de1b60e9"}, "originalPosition": 292}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4ODM4MTMw", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#pullrequestreview-448838130", "createdAt": "2020-07-15T10:46:12Z", "commit": {"oid": "51259c72b66598e38db2a6db79b60c10de1b60e9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDo0NjoxMlrOGx4nRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMDo0NjoxMlrOGx4nRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk2MDk2NQ==", "bodyText": "Seems thenReturn and mockHandler methods never used. Pls remove them if it is not used.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#discussion_r454960965", "createdAt": "2020-07-15T10:46:12Z", "author": {"login": "pramodya1994"}, "path": "misc/testerina/modules/testerina-core/src/main/java/org/ballerinalang/testerina/natives/test/FunctionMock.java", "diffHunk": "@@ -43,14 +43,18 @@ public static ErrorValue thenReturn(ObjectValue caseObj) {\n \n     public static Object mockHandler(ObjectValue mockFuncObj, ArrayValue args) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "51259c72b66598e38db2a6db79b60c10de1b60e9"}, "originalPosition": 2}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4ODM5NTQ3", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#pullrequestreview-448839547", "createdAt": "2020-07-15T10:48:34Z", "commit": {"oid": "51259c72b66598e38db2a6db79b60c10de1b60e9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "51259c72b66598e38db2a6db79b60c10de1b60e9", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/51259c72b66598e38db2a6db79b60c10de1b60e9", "committedDate": "2020-07-15T10:30:31Z", "message": "Fix PR suggestions"}, "afterCommit": {"oid": "19be154c1766990b6e0f4e40a8ddee2e357ef604", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/19be154c1766990b6e0f4e40a8ddee2e357ef604", "committedDate": "2020-07-15T11:05:08Z", "message": "Fix PR suggestions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4ODgwNzkz", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#pullrequestreview-448880793", "createdAt": "2020-07-15T11:55:14Z", "commit": {"oid": "19be154c1766990b6e0f4e40a8ddee2e357ef604"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMTo1NToxNFrOGx6suQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMTo1NToxNFrOGx6suQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk5NTEyOQ==", "bodyText": "Is \"this.importFunction\" nullable? Should we add a null check for that as well?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#discussion_r454995129", "createdAt": "2020-07-15T11:55:14Z", "author": {"login": "Dilhasha"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/desugar/MockDesugar.java", "diffHunk": "@@ -160,13 +253,14 @@ private BInvokableSymbol generateSymbol(String functionName) {\n     }\n \n     private BInvokableType generateSymbolInvokableType() {\n-        BInvokableType bInvokableType = (BInvokableType) this.originalFunction.symbol.type;\n-        return bInvokableType;\n-    }\n+        BInvokableType bInvokableType;\n \n-    private BType generateType() {\n-        BType type = ((BInvokableType) this.originalFunction.type).retType;\n-        return type;\n+        if (this.originalFunction == null) {\n+            bInvokableType = (BInvokableType) this.importFunction.type;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19be154c1766990b6e0f4e40a8ddee2e357ef604"}, "originalPosition": 223}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4ODgxNDg1", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#pullrequestreview-448881485", "createdAt": "2020-07-15T11:56:20Z", "commit": {"oid": "19be154c1766990b6e0f4e40a8ddee2e357ef604"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMTo1NjoyMFrOGx6u7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQxMTo1NjoyMFrOGx6u7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk5NTY5NA==", "bodyText": "Is \"this.importFunction\" nullable? Should we add a null check for that as well?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#discussion_r454995694", "createdAt": "2020-07-15T11:56:20Z", "author": {"login": "Dilhasha"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/desugar/MockDesugar.java", "diffHunk": "@@ -177,24 +271,45 @@ private BLangFunctionBody generateBody() {\n \n     private List<BLangStatement> generateStatements() {\n         // <MockFunctionObj>.functionToMock = (functionToMock);\n-        BLangAssignment bLangAssignment =\n-                ASTBuilderUtil.createAssignmentStmt(bLangPackage.pos, generateFieldBasedAccess(), generateRHSExpr());\n+        String functionToMockVal = (this.originalFunction == null) ?\n+                this.importFunction.name.toString() : this.originalFunction.name.toString();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19be154c1766990b6e0f4e40a8ddee2e357ef604"}, "originalPosition": 238}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "19be154c1766990b6e0f4e40a8ddee2e357ef604", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/19be154c1766990b6e0f4e40a8ddee2e357ef604", "committedDate": "2020-07-15T11:05:08Z", "message": "Fix PR suggestions"}, "afterCommit": {"oid": "958b83a01bf986dd5e6ea5e4b0d751d7131743e2", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/958b83a01bf986dd5e6ea5e4b0d751d7131743e2", "committedDate": "2020-07-15T13:01:13Z", "message": "Fix PR suggestions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "958b83a01bf986dd5e6ea5e4b0d751d7131743e2", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/958b83a01bf986dd5e6ea5e4b0d751d7131743e2", "committedDate": "2020-07-15T13:01:13Z", "message": "Fix PR suggestions"}, "afterCommit": {"oid": "b75f7956b17f77b1322b8992c50f45b3090cce4e", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b75f7956b17f77b1322b8992c50f45b3090cce4e", "committedDate": "2020-07-15T13:21:24Z", "message": "Fix PR suggestions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b75f7956b17f77b1322b8992c50f45b3090cce4e", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b75f7956b17f77b1322b8992c50f45b3090cce4e", "committedDate": "2020-07-15T13:21:24Z", "message": "Fix PR suggestions"}, "afterCommit": {"oid": "272b67f1ad340a1efaa41f5fbdcd29d29cab9033", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/272b67f1ad340a1efaa41f5fbdcd29d29cab9033", "committedDate": "2020-07-15T13:53:11Z", "message": "Fix PR suggestions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4OTkwMzA2", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#pullrequestreview-448990306", "createdAt": "2020-07-15T14:07:46Z", "commit": {"oid": "272b67f1ad340a1efaa41f5fbdcd29d29cab9033"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5NDk5NjM5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#pullrequestreview-449499639", "createdAt": "2020-07-16T04:32:38Z", "commit": {"oid": "272b67f1ad340a1efaa41f5fbdcd29d29cab9033"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d5d22fb96e765f80323b0ec61507a35b0030c927", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d5d22fb96e765f80323b0ec61507a35b0030c927", "committedDate": "2020-07-16T06:19:32Z", "message": "Add previous mock function implementation"}, "afterCommit": {"oid": "8114a939b082e04626a0bdb0ee2c408a78ed74f7", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8114a939b082e04626a0bdb0ee2c408a78ed74f7", "committedDate": "2020-07-16T06:32:17Z", "message": "Add previous mock function implementation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8114a939b082e04626a0bdb0ee2c408a78ed74f7", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8114a939b082e04626a0bdb0ee2c408a78ed74f7", "committedDate": "2020-07-16T06:32:17Z", "message": "Add previous mock function implementation"}, "afterCommit": {"oid": "eca9c3612e8a68463ba8f5a64aee094a520ed5ba", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/eca9c3612e8a68463ba8f5a64aee094a520ed5ba", "committedDate": "2020-07-16T07:37:17Z", "message": "Add previous mock function implementation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "557110ac068a9a565d372c4deb7db6a91b3bf99e", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/557110ac068a9a565d372c4deb7db6a91b3bf99e", "committedDate": "2020-07-16T10:11:33Z", "message": "Implement Module function mocking"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67ec9708ea73d03bc540454e8bf055b9649bf6f2", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/67ec9708ea73d03bc540454e8bf055b9649bf6f2", "committedDate": "2020-07-16T10:11:33Z", "message": "Fix PR suggestions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eca9c3612e8a68463ba8f5a64aee094a520ed5ba", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/eca9c3612e8a68463ba8f5a64aee094a520ed5ba", "committedDate": "2020-07-16T07:37:17Z", "message": "Add previous mock function implementation"}, "afterCommit": {"oid": "5af79b9d4bf4184f482d5f6c834fb084dfdf85ac", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5af79b9d4bf4184f482d5f6c834fb084dfdf85ac", "committedDate": "2020-07-16T11:05:49Z", "message": "Add previous mock function implementation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5Nzc1ODA4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#pullrequestreview-449775808", "createdAt": "2020-07-16T11:55:39Z", "commit": {"oid": "5af79b9d4bf4184f482d5f6c834fb084dfdf85ac"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5Nzg5MzYz", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#pullrequestreview-449789363", "createdAt": "2020-07-16T12:16:14Z", "commit": {"oid": "5af79b9d4bf4184f482d5f6c834fb084dfdf85ac"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxMjoxNjoxNFrOGyoQmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxMjoxNjoxNFrOGyoQmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTc0MTU5Mg==", "bodyText": "This change will break the BBE tests in ballerina-distribution repo. Can we have the same Mock annotation for both function and parameter.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#discussion_r455741592", "createdAt": "2020-07-16T12:16:14Z", "author": {"login": "hevayo"}, "path": "misc/testerina/modules/testerina-core/src/main/ballerina/src/test/annotations.bal", "diffHunk": "@@ -62,7 +62,7 @@ public annotation BeforeEach on function;\n public annotation AfterEach on function;\n \n # Identifies the MockFunction object\n-public const annotation MockConfig MockFn on source var;\n+public const annotation MockConfig Mock on source var;\n \n # Identifies the Mock Function\n-public annotation MockConf Mock on function;\n+public annotation MockConf MockFn on function;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5af79b9d4bf4184f482d5f6c834fb084dfdf85ac"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5NzkwMDQ3", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#pullrequestreview-449790047", "createdAt": "2020-07-16T12:17:14Z", "commit": {"oid": "5af79b9d4bf4184f482d5f6c834fb084dfdf85ac"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ecafca2acd3651b48ba27daf79c849398400e8a", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1ecafca2acd3651b48ba27daf79c849398400e8a", "committedDate": "2020-07-16T13:05:31Z", "message": "Add previous mock function implementation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5af79b9d4bf4184f482d5f6c834fb084dfdf85ac", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5af79b9d4bf4184f482d5f6c834fb084dfdf85ac", "committedDate": "2020-07-16T11:05:49Z", "message": "Add previous mock function implementation"}, "afterCommit": {"oid": "1ecafca2acd3651b48ba27daf79c849398400e8a", "author": {"user": {"login": "Ibaqu", "name": "Aquib Zulfikar"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1ecafca2acd3651b48ba27daf79c849398400e8a", "committedDate": "2020-07-16T13:05:31Z", "message": "Add previous mock function implementation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5OTI0NjE5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24747#pullrequestreview-449924619", "createdAt": "2020-07-16T14:48:56Z", "commit": {"oid": "1ecafca2acd3651b48ba27daf79c849398400e8a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3747, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}