{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxMjIzNDIx", "number": 21346, "title": "Implement Email Connector", "bodyText": "Purpose\nImplement Email Connector\nFixes #21179\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-02-28T06:20:13Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346", "merged": true, "mergeCommit": {"oid": "d6e167e621643d829fd39fde41902dff2468c1e4"}, "closed": true, "closedAt": "2020-03-11T10:30:57Z", "author": {"login": "Maninda"}, "timelineItems": {"totalCount": 177, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIuhnzAH2gAyMzgxMjIzNDIxOjNhYjA4YmNlYmE4YmNlNDk3NTBmMDZkODA1NzVhYTI1MGNlNGE3Zjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcMki8-AFqTM3MjYzNDg4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3ab08bceba8bce49750f06d80575aa250ce4a7f7", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3ab08bceba8bce49750f06d80575aa250ce4a7f7", "committedDate": "2020-02-28T11:49:50Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c6c64a7bd2a91b54283005c9e4bf0a229ec648a", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7c6c64a7bd2a91b54283005c9e4bf0a229ec648a", "committedDate": "2020-02-28T11:51:59Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6026db3a7b7e38855c6b1a530071384a4f88b74", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c6026db3a7b7e38855c6b1a530071384a4f88b74", "committedDate": "2020-02-28T11:52:46Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d5f091b5621bf520de01c7d796f97b34ff205e3", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4d5f091b5621bf520de01c7d796f97b34ff205e3", "committedDate": "2020-02-28T11:53:35Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50f8b2ebd979660c4feaba01894334eeed0568c8", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/50f8b2ebd979660c4feaba01894334eeed0568c8", "committedDate": "2020-02-28T15:38:35Z", "message": "Correct the suggestions pointed out in the PR."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ca4455cefd18c4b9db0ae6972dc0175c7cd74073", "committedDate": "2020-02-29T04:42:54Z", "message": "Revert back ballerina-grammar directory mistakenly added."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2Nzc3Mzkz", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366777393", "createdAt": "2020-02-29T04:51:47Z", "commit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073"}, "state": "COMMENTED", "comments": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQwNDo1MTo0OFrOFwHplw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQwNTowMzoxOFrOFwHr2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAwMTMwMw==", "bodyText": "Shall we order the imports alphabetically?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386001303", "createdAt": "2020-02-29T04:51:48Z", "author": {"login": "MaryamZi"}, "path": "stdlib/email/src/main/ballerina/src/email/Module.md", "diffHunk": "@@ -0,0 +1,81 @@\n+## Module overview\n+\n+This module contains functions to perform email operations such as sending and reading emails using SMTP, POP3, and IMAP4 protocols.\n+\n+## Sample\n+\n+The below sample uses the functions in the module to send an email using the SMTP protocol.\n+\n+```ballerina\n+import ballerina/io;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAwMTMyNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                if(emailResponse is email:Email) {\n          \n          \n            \n                if (emailResponse is email:Email) {", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386001324", "createdAt": "2020-02-29T04:52:26Z", "author": {"login": "MaryamZi"}, "path": "stdlib/email/src/main/ballerina/src/email/Module.md", "diffHunk": "@@ -0,0 +1,81 @@\n+## Module overview\n+\n+This module contains functions to perform email operations such as sending and reading emails using SMTP, POP3, and IMAP4 protocols.\n+\n+## Sample\n+\n+The below sample uses the functions in the module to send an email using the SMTP protocol.\n+\n+```ballerina\n+import ballerina/io;\n+import ballerina/email;\n+\n+email:SmtpConfig smtpConfig = {\n+    host: \"smtp.gmail.com\",\n+    port: 587,\n+    username: \"sender@email.com\",\n+    password: \"pass123\"\n+};\n+\n+public function main() {\n+    email:SmtpClient smtpClient = new (smtpConfig);\n+    email:Email email = {\n+        toAddr: [\"receiver1@email.com\", \"receiver2@email.com\"],\n+        ccAddr: [\"receiver3@email.com\", \"receiver4@email.com\"],\n+        bccAddr: [\"receiver5@email.com\"],\n+        subject: \"Sample Email\",\n+        messageBody: \"This is a sample email.\",\n+        fromAddr: \"sender@email.com\",\n+        senderAddr: \"sender@email.com\"\n+    };\n+    error? response = smtpClient->send(email);\n+}\n+```\n+\n+The below sample uses the functions in the module to receive an email using the POP3 protocol.\n+\n+```ballerina\n+email:PopConfig popConfig = {\n+    host: \"pop.gmail.com\",\n+    port: 995,\n+    username: \"sender@email.com\",\n+    password: \"senderPa$$w0rd\"\n+};\n+\n+public function main() {\n+    email:PopClient popClient = new (popConfig);\n+    email:Email|error? emailResponse = popClient->read();\n+    if(emailResponse is email:Email) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAwMTM0Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                if(emailResponse is email:Email) {\n          \n          \n            \n                if (emailResponse is email:Email) {", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386001346", "createdAt": "2020-02-29T04:52:56Z", "author": {"login": "MaryamZi"}, "path": "stdlib/email/src/main/ballerina/src/email/Module.md", "diffHunk": "@@ -0,0 +1,81 @@\n+## Module overview\n+\n+This module contains functions to perform email operations such as sending and reading emails using SMTP, POP3, and IMAP4 protocols.\n+\n+## Sample\n+\n+The below sample uses the functions in the module to send an email using the SMTP protocol.\n+\n+```ballerina\n+import ballerina/io;\n+import ballerina/email;\n+\n+email:SmtpConfig smtpConfig = {\n+    host: \"smtp.gmail.com\",\n+    port: 587,\n+    username: \"sender@email.com\",\n+    password: \"pass123\"\n+};\n+\n+public function main() {\n+    email:SmtpClient smtpClient = new (smtpConfig);\n+    email:Email email = {\n+        toAddr: [\"receiver1@email.com\", \"receiver2@email.com\"],\n+        ccAddr: [\"receiver3@email.com\", \"receiver4@email.com\"],\n+        bccAddr: [\"receiver5@email.com\"],\n+        subject: \"Sample Email\",\n+        messageBody: \"This is a sample email.\",\n+        fromAddr: \"sender@email.com\",\n+        senderAddr: \"sender@email.com\"\n+    };\n+    error? response = smtpClient->send(email);\n+}\n+```\n+\n+The below sample uses the functions in the module to receive an email using the POP3 protocol.\n+\n+```ballerina\n+email:PopConfig popConfig = {\n+    host: \"pop.gmail.com\",\n+    port: 995,\n+    username: \"sender@email.com\",\n+    password: \"senderPa$$w0rd\"\n+};\n+\n+public function main() {\n+    email:PopClient popClient = new (popConfig);\n+    email:Email|error? emailResponse = popClient->read();\n+    if(emailResponse is email:Email) {\n+        io:println(\"Email Subject: \", emailResponse.subject);\n+        io:println(\"Email Body: \", emailResponse.body);\n+    } else if (emailResponse is ()) {\n+        io:println(\"There are no emails in the INBOX.\");\n+    } else {\n+        io:println(\"Error: \" + emailResponse.toString());\n+    }\n+}\n+```\n+\n+The below sample uses the functions in the module to receive an email using the IMAP4 protocol.\n+\n+```ballerina\n+email:ImapConfig imapConfig = {\n+    host: \"imap.gmail.com\",\n+    port: 143,\n+    username: \"sender@email.com\",\n+    password: \"senderPa$$w0rd\"\n+};\n+\n+public function main() {\n+    email:ImapClient imapClient = new (imapConfig);\n+    email:Email|error? emailResponse = imapClient->read();\n+    if(emailResponse is email:Email) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAwMTQzMw==", "bodyText": "Is the Addr suffix still valid? The fields in https://github.com/ballerina-platform/ballerina-lang/pull/21346/files#diff-4e2491d7a639e6d95383b2e3a12db821R40 don't seem to have it?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386001433", "createdAt": "2020-02-29T04:54:42Z", "author": {"login": "MaryamZi"}, "path": "stdlib/email/src/main/ballerina/src/email/Module.md", "diffHunk": "@@ -0,0 +1,81 @@\n+## Module overview\n+\n+This module contains functions to perform email operations such as sending and reading emails using SMTP, POP3, and IMAP4 protocols.\n+\n+## Sample\n+\n+The below sample uses the functions in the module to send an email using the SMTP protocol.\n+\n+```ballerina\n+import ballerina/io;\n+import ballerina/email;\n+\n+email:SmtpConfig smtpConfig = {\n+    host: \"smtp.gmail.com\",\n+    port: 587,\n+    username: \"sender@email.com\",\n+    password: \"pass123\"\n+};\n+\n+public function main() {\n+    email:SmtpClient smtpClient = new (smtpConfig);\n+    email:Email email = {\n+        toAddr: [\"receiver1@email.com\", \"receiver2@email.com\"],", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAwMTQ3MQ==", "bodyText": "Why do we need a record here? Can't we just directly use a string as field/param?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386001471", "createdAt": "2020-02-29T04:55:39Z", "author": {"login": "MaryamZi"}, "path": "stdlib/email/src/main/ballerina/src/email/commons.bal", "diffHunk": "@@ -0,0 +1,56 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Configurations for the connections.\n+#\n+# + host - IP Address\n+# + port - Port\n+# + username - Provider username\n+# + password - Provider password\n+public type ConnectionConfig record {|\n+    string host;\n+    int port;\n+    string username;\n+    string password;\n+|};\n+\n+# Email message sending and receiving configurations.\n+#\n+# + to - TO address list\n+# + cc - CC address list\n+# + bcc - BCC address list\n+# + subject - Subject of email\n+# + body - Body of the email message\n+# + from - From address\n+# + sender - Sender's address\n+# + replyTo - Reply To addresses\n+public type Email record {|\n+    string[] to;\n+    string[] cc?;\n+    string[] bcc?;\n+    string subject;\n+    string body;\n+    string 'from;\n+    string sender?;\n+    string[] replyTo?;\n+|};\n+\n+# Filter to receive an email.\n+#\n+# + folder - Folder to read emails\n+public type Filter record {|", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAwMTU0NQ==", "bodyText": "Why are we not doing anything with the error? Shouldn't the __init() return this error?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386001545", "createdAt": "2020-02-29T04:56:44Z", "author": {"login": "MaryamZi"}, "path": "stdlib/email/src/main/ballerina/src/email/imap_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,55 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an IMAP Client, which interacts with an IMAP Server.\n+public type ImapClient client object {\n+\n+    # Gets invoked during object initialization.\n+    #\n+    # + clientConfig - Configurations for the IMAP Client\n+    public function __init(ImapConfig clientConfig) {\n+        error? response = initImapClientEndpoint(self, clientConfig, false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAwMTU4OQ==", "bodyText": "Why can't we just do\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    Email|error? email = imapRead(self, filter, false);\n          \n          \n            \n                    if(email is error) {\n          \n          \n            \n                        return email;\n          \n          \n            \n                    } else {\n          \n          \n            \n                        return <Email?>email;\n          \n          \n            \n                    }\n          \n          \n            \n                    return imapRead(self, filter, false);", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386001589", "createdAt": "2020-02-29T04:57:55Z", "author": {"login": "MaryamZi"}, "path": "stdlib/email/src/main/ballerina/src/email/imap_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,55 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an IMAP Client, which interacts with an IMAP Server.\n+public type ImapClient client object {\n+\n+    # Gets invoked during object initialization.\n+    #\n+    # + clientConfig - Configurations for the IMAP Client\n+    public function __init(ImapConfig clientConfig) {\n+        error? response = initImapClientEndpoint(self, clientConfig, false);\n+    }\n+\n+    # Reads a message.\n+    #\n+    # + return - An `error` if failed to send the message to the recipient\n+    public remote function read() returns Email|error? {\n+        Filter filter = {\n+            folder: \"INBOX\"\n+        };\n+        Email|error? email = imapRead(self, filter, false);\n+        if(email is error) {\n+            return email;\n+        } else {\n+            return <Email?>email;\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAwMTY2MA==", "bodyText": "Why is the type int?? What do we do if the user sets () as the value for port?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386001660", "createdAt": "2020-02-29T04:58:53Z", "author": {"login": "MaryamZi"}, "path": "stdlib/email/src/main/ballerina/src/email/imap_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,55 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an IMAP Client, which interacts with an IMAP Server.\n+public type ImapClient client object {\n+\n+    # Gets invoked during object initialization.\n+    #\n+    # + clientConfig - Configurations for the IMAP Client\n+    public function __init(ImapConfig clientConfig) {\n+        error? response = initImapClientEndpoint(self, clientConfig, false);\n+    }\n+\n+    # Reads a message.\n+    #\n+    # + return - An `error` if failed to send the message to the recipient\n+    public remote function read() returns Email|error? {\n+        Filter filter = {\n+            folder: \"INBOX\"\n+        };\n+        Email|error? email = imapRead(self, filter, false);\n+        if(email is error) {\n+            return email;\n+        } else {\n+            return <Email?>email;\n+        }\n+    }\n+\n+};\n+\n+# Configuration of the IMAP Endpoint.\n+#\n+# + host - Host address of the IMAP server\n+# + port - Port number of the IMAP server\n+# + username - Username to access the IMAP server\n+# + password - Password to access the IMAP server\n+public type ImapConfig record {|\n+    string host;\n+    int? port = 143;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAwMTY2OQ==", "bodyText": "Same comment as above re: ignoring errors.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386001669", "createdAt": "2020-02-29T04:59:09Z", "author": {"login": "MaryamZi"}, "path": "stdlib/email/src/main/ballerina/src/email/pop_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,55 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents a POP Client, which interacts with a POP Server.\n+public type PopClient client object {\n+\n+    # Gets invoked during object initialization.\n+    #\n+    # + clientConfig - Configurations for the POP Client\n+    public function __init(PopConfig clientConfig) {\n+        error? response = initPopClientEndpoint(self, clientConfig, true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAwMTY4Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    Email|error? email = popRead(self, filter, true);\n          \n          \n            \n                    if(email is error) {\n          \n          \n            \n                        return email;\n          \n          \n            \n                    } else {\n          \n          \n            \n                        return <Email?>email;\n          \n          \n            \n                    }\n          \n          \n            \n                    return popRead(self, filter, true);", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386001682", "createdAt": "2020-02-29T04:59:38Z", "author": {"login": "MaryamZi"}, "path": "stdlib/email/src/main/ballerina/src/email/pop_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,55 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents a POP Client, which interacts with a POP Server.\n+public type PopClient client object {\n+\n+    # Gets invoked during object initialization.\n+    #\n+    # + clientConfig - Configurations for the POP Client\n+    public function __init(PopConfig clientConfig) {\n+        error? response = initPopClientEndpoint(self, clientConfig, true);\n+    }\n+\n+    # Used to read a message.\n+    #\n+    # + return - An `error` if failed to send the message to the recipient\n+    public remote function read() returns Email|error? {\n+        Filter filter = {\n+            folder: \"INBOX\"\n+        };\n+        Email|error? email = popRead(self, filter, true);\n+        if(email is error) {\n+            return email;\n+        } else {\n+            return <Email?>email;\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAwMTcyNw==", "bodyText": "Same comment as above re: ignoring errors.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386001727", "createdAt": "2020-02-29T05:00:39Z", "author": {"login": "MaryamZi"}, "path": "stdlib/email/src/main/ballerina/src/email/smtp_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an SMTP Client, which interacts with an SMTP Server.\n+public type SmtpClient client object {\n+\n+    # Gets invoked during object initialization.\n+    #\n+    # + clientConfig - Configurations for SMTP Client\n+    public function __init(SmtpConfig clientConfig) {\n+        error? response = initSmtpClientEndpoint(self, clientConfig);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAwMTgzMw==", "bodyText": "This will be added to master right? The version would have to be fixed everywhere as 1.2.0.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386001833", "createdAt": "2020-02-29T05:02:22Z", "author": {"login": "MaryamZi"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/service/compiler/EmailListenerCompilerPlugin.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.service.compiler;\n+\n+import org.ballerinalang.compiler.plugins.AbstractCompilerPlugin;\n+import org.ballerinalang.util.diagnostic.DiagnosticLog;\n+\n+/**\n+ * This class validates annotations attached to the Ballerina service and its resource nodes.\n+ *\n+ * @since 1.1.5", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAwMTg4Mg==", "bodyText": "Are we planning on doing any custom compile time validations? If not, we can remove this?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386001882", "createdAt": "2020-02-29T05:03:18Z", "author": {"login": "MaryamZi"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/service/compiler/EmailListenerCompilerPlugin.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.service.compiler;\n+\n+import org.ballerinalang.compiler.plugins.AbstractCompilerPlugin;\n+import org.ballerinalang.util.diagnostic.DiagnosticLog;\n+\n+/**\n+ * This class validates annotations attached to the Ballerina service and its resource nodes.\n+ *\n+ * @since 1.1.5\n+ */\n+class EmailListenerCompilerPlugin extends AbstractCompilerPlugin {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2NzgxNjEz", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366781613", "createdAt": "2020-02-29T06:40:21Z", "commit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQwNjo0MDoyMVrOFwH_rw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQwNjo0MDoyMVrOFwH_rw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAwNjk1OQ==", "bodyText": "Suggested change", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386006959", "createdAt": "2020-02-29T06:40:21Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/ballerina/src/email/service_endpoint.bal", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+import ballerinax/java;\n+\n+public function initSmtpClientEndpoint(SmtpClient clientEndpoint, SmtpConfig config) returns error? = @java:Method {\n+    name : \"initClientEndpoint\",\n+    class : \"org.ballerinalang.stdlib.email.client.SmtpClient\"\n+} external;\n+\n+public function send(SmtpClient clientEndpoint, Email email) returns error? = @java:Method {\n+    name : \"sendMessage\",\n+    class : \"org.ballerinalang.stdlib.email.client.SmtpClient\"\n+} external;\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2NzgxNzE2", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366781716", "createdAt": "2020-02-29T06:42:45Z", "commit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQwNjo0Mjo0NVrOFwIAUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQwNjo0Mjo0NVrOFwIAUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAwNzEyMw==", "bodyText": "Suggested change", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386007123", "createdAt": "2020-02-29T06:42:45Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/ballerina/src/email/service_endpoint.bal", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+import ballerinax/java;\n+\n+public function initSmtpClientEndpoint(SmtpClient clientEndpoint, SmtpConfig config) returns error? = @java:Method {\n+    name : \"initClientEndpoint\",\n+    class : \"org.ballerinalang.stdlib.email.client.SmtpClient\"\n+} external;\n+\n+public function send(SmtpClient clientEndpoint, Email email) returns error? = @java:Method {\n+    name : \"sendMessage\",\n+    class : \"org.ballerinalang.stdlib.email.client.SmtpClient\"\n+} external;\n+\n+\n+public function initPopClientEndpoint(PopClient clientEndpoint, PopConfig config, boolean isPop) returns error? = @java:Method {\n+    name : \"initClientEndpoint\",\n+    class : \"org.ballerinalang.stdlib.email.client.PopClient\"\n+} external;\n+\n+public function popRead(PopClient clientEndpoint, Filter message, boolean isPop) returns Email|error? = @java:Method {\n+    name : \"readMessage\",\n+    class : \"org.ballerinalang.stdlib.email.client.PopClient\"\n+} external;\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073"}, "originalPosition": 40}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2NzgxODQx", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366781841", "createdAt": "2020-02-29T06:45:41Z", "commit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQwNjo0NTo0MVrOFwIA7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQwNjo0NTo0MVrOFwIA7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAwNzI3OA==", "bodyText": "Seems like the isPop method parameter is not used. Please check all the usages of this method.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public static MapValue readMessage(ObjectValue clientConnector, MapValue<Object, Object> filter, boolean isPop)\n          \n          \n            \n                public static MapValue readMessage(ObjectValue clientConnector, MapValue<Object, Object> filter)", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386007278", "createdAt": "2020-02-29T06:45:41Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/client/PopClient.java", "diffHunk": "@@ -0,0 +1,123 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.client;\n+\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.ballerinalang.jvm.values.ObjectValue;\n+import org.ballerinalang.stdlib.email.util.BallerinaPopException;\n+import org.ballerinalang.stdlib.email.util.ImapConstants;\n+import org.ballerinalang.stdlib.email.util.PopConstants;\n+import org.ballerinalang.stdlib.email.util.PopUtil;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.util.Properties;\n+\n+import javax.mail.Folder;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.NoSuchProviderException;\n+import javax.mail.Session;\n+import javax.mail.Store;\n+\n+/**\n+ * Contains functionality of POP Client.\n+ */\n+public class PopClient {\n+\n+    private static final Logger log = LoggerFactory.getLogger(PopClient.class);\n+\n+    private PopClient() {\n+        // A Singleton class.\n+    }\n+\n+    /**\n+     * Initializes the ObjectValue object with the POP Properties.\n+     * @param clientEndpoint Represents the POP Client class\n+     * @param config Properties required to configure the POP Session\n+     * @param isPop True if the protocol is POP3 and false otherwise (if protocol is IMAP)\n+     * @throws BallerinaPopException If an error occurs in the POP client\n+     */\n+    public static void initClientEndpoint(ObjectValue clientEndpoint, MapValue<Object, Object> config, boolean isPop)\n+            throws BallerinaPopException {\n+        log.debug(\"[PopClient][InitClient] Calling getProperties\");\n+        Properties properties = PopUtil.getProperties(config, isPop);\n+        Session session = Session.getInstance(properties, null);\n+        try {\n+            Store store;\n+\n+            if (isPop) {\n+                store = session.getStore(PopConstants.POP_PROTOCOL);\n+                clientEndpoint.addNativeData(PopConstants.PROPS_HOST,\n+                        properties.getProperty(PopConstants.PROPS_POP_HOST));\n+            } else {\n+                store = session.getStore(ImapConstants.IMAP_PROTOCOL);\n+                clientEndpoint.addNativeData(PopConstants.PROPS_HOST,\n+                        properties.getProperty(ImapConstants.PROPS_IMAP_HOST));\n+            }\n+            clientEndpoint.addNativeData(PopConstants.PROPS_STORE, store);\n+            clientEndpoint.addNativeData(PopConstants.PROPS_USERNAME,\n+                    properties.getProperty(PopConstants.PROPS_USERNAME));\n+            clientEndpoint.addNativeData(PopConstants.PROPS_PASSWORD,\n+                    properties.getProperty(PopConstants.PROPS_PASSWORD));\n+        } catch (NoSuchProviderException e) {\n+            log.error(\"Failed to read message : \", e);\n+            throw new BallerinaPopException(\"Error occurred while accessing POP server\", e);\n+        }\n+    }\n+\n+    /**\n+     * Read emails from the server.\n+     * @param clientConnector Represents the POP Client class\n+     * @param filter Criteria, which is used to read emails\n+     * @param isPop True if the protocol is POP3 and false otherwise (if protocol is IMAP)\n+     * @return MapValue Returns the type supported by Ballerina\n+     * @throws BallerinaPopException If an error occurs in the POP client\n+     */\n+    public static MapValue readMessage(ObjectValue clientConnector, MapValue<Object, Object> filter, boolean isPop)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073"}, "originalPosition": 94}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2NzgxOTU4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366781958", "createdAt": "2020-02-29T06:48:38Z", "commit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQwNjo0ODozOVrOFwIBmQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQwNjo0ODozOVrOFwIBmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAwNzQ0OQ==", "bodyText": "IMO, these are generic constants for both IMAP and POP protocols. If so, please move it to a different class and refactor the usages.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386007449", "createdAt": "2020-02-29T06:48:39Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/PopConstants.java", "diffHunk": "@@ -0,0 +1,46 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+/**\n+ * Constants for POP3-related functions.\n+ *\n+ * @since 1.1.5\n+ */\n+public class PopConstants {\n+    public static final String DEFAULT_PORT_NUMBER = \"995\";\n+    public static final String PROPS_HOST = \"host\";\n+    public static final String PROPS_PORT = \"port\";\n+    public static final String PROPS_USERNAME = \"username\";\n+    public static final String PROPS_PASSWORD = \"password\";\n+    public static final String PROPS_STORE = \"store\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2NzgyMTgw", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366782180", "createdAt": "2020-02-29T06:55:31Z", "commit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQwNjo1NTozMVrOFwICuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQwNjo1NTozMVrOFwICuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAwNzczNg==", "bodyText": "IMO, a method should have single responsibility. So, the implementation logic change based on a boolean means, you can have 2 separate methods.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386007736", "createdAt": "2020-02-29T06:55:31Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/PopUtil.java", "diffHunk": "@@ -0,0 +1,203 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+import org.ballerinalang.jvm.BallerinaValues;\n+import org.ballerinalang.jvm.types.BArrayType;\n+import org.ballerinalang.jvm.types.BTypes;\n+import org.ballerinalang.jvm.values.ArrayValue;\n+import org.ballerinalang.jvm.values.ArrayValueImpl;\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Properties;\n+\n+import javax.mail.Address;\n+import javax.mail.BodyPart;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.internet.MimeMultipart;\n+\n+/**\n+ * Contains Utility functions related to the POP3 protocol.\n+ */\n+public class PopUtil {\n+\n+    private static final Logger log = LoggerFactory.getLogger(PopUtil.class);\n+    private static final int MAX_PORT = 65535;\n+\n+    /**\n+     * Generates Properties object using the passed MapValue.\n+     *\n+     * @param popConfig MapValue with the configuration values\n+     * @param isPop True if the protocol is POP3 and false otherwise (if protocol is IMAP)\n+     * @return Properties object\n+     */\n+    public static Properties getProperties(MapValue popConfig, boolean isPop) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073"}, "originalPosition": 56}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2NzgyMjc0", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366782274", "createdAt": "2020-02-29T06:57:57Z", "commit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQwNjo1Nzo1OFrOFwIDRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOVQwNjo1Nzo1OFrOFwIDRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAwNzg3Nw==", "bodyText": "IMO, these methods should have single responsibility in each. So, the implementation logic change based on a boolean means, you can have 2 separate methods. The common logic can be abstracted into a separate method.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386007877", "createdAt": "2020-02-29T06:57:58Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/ballerina/src/email/service_endpoint.bal", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+import ballerinax/java;\n+\n+public function initSmtpClientEndpoint(SmtpClient clientEndpoint, SmtpConfig config) returns error? = @java:Method {\n+    name : \"initClientEndpoint\",\n+    class : \"org.ballerinalang.stdlib.email.client.SmtpClient\"\n+} external;\n+\n+public function send(SmtpClient clientEndpoint, Email email) returns error? = @java:Method {\n+    name : \"sendMessage\",\n+    class : \"org.ballerinalang.stdlib.email.client.SmtpClient\"\n+} external;\n+\n+\n+public function initPopClientEndpoint(PopClient clientEndpoint, PopConfig config, boolean isPop) returns error? = @java:Method {\n+    name : \"initClientEndpoint\",\n+    class : \"org.ballerinalang.stdlib.email.client.PopClient\"\n+} external;\n+\n+public function popRead(PopClient clientEndpoint, Filter message, boolean isPop) returns Email|error? = @java:Method {\n+    name : \"readMessage\",\n+    class : \"org.ballerinalang.stdlib.email.client.PopClient\"\n+} external;\n+\n+\n+public function initImapClientEndpoint(ImapClient clientEndpoint, ImapConfig config, boolean isPop) returns error? = @java:Method {\n+    name : \"initClientEndpoint\",\n+    class : \"org.ballerinalang.stdlib.email.client.PopClient\"\n+} external;\n+\n+public function imapRead(ImapClient clientEndpoint, Filter message, boolean isPop) returns Email|error? = @java:Method {\n+    name : \"readMessage\",\n+    class : \"org.ballerinalang.stdlib.email.client.PopClient\"\n+} external;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073"}, "originalPosition": 49}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "072bb580a4cd9a279db552f46a6bff7d1a0072b7", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/072bb580a4cd9a279db552f46a6bff7d1a0072b7", "committedDate": "2020-02-29T09:44:43Z", "message": "Add functionality to return errors from interops related to SMTP and POP clients."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8fa8877662bc1340daba795362dc9e5f8db4fac", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b8fa8877662bc1340daba795362dc9e5f8db4fac", "committedDate": "2020-02-29T09:48:38Z", "message": "Improve code clarity.\n\nCo-Authored-By: Maryam Ziyad <maryamziyadm@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a17005bd1becac9c5d20b22b1c03b9f93bbc89c5", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a17005bd1becac9c5d20b22b1c03b9f93bbc89c5", "committedDate": "2020-02-29T09:49:09Z", "message": "Improve code clarity.\n\nCo-Authored-By: Maryam Ziyad <maryamziyadm@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "812caf9b3a4fb46efbe1fc6551646f899544310a", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/812caf9b3a4fb46efbe1fc6551646f899544310a", "committedDate": "2020-02-29T10:51:11Z", "message": "Simplified the code.\n\nCo-Authored-By: Maryam Ziyad <maryamziyadm@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01f731e09b3f414f442022f207f8c92344fe30cb", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/01f731e09b3f414f442022f207f8c92344fe30cb", "committedDate": "2020-02-29T10:52:34Z", "message": "Simplified the code.\n\nCo-Authored-By: Maryam Ziyad <maryamziyadm@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6fc01c2ee0f0ff65ab90ff77303431940d741609", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/6fc01c2ee0f0ff65ab90ff77303431940d741609", "committedDate": "2020-02-29T10:58:00Z", "message": "Fix changes proposed in the PR."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7bb1aedfc69e2e9fca0c24a40300801e7d426e0e", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7bb1aedfc69e2e9fca0c24a40300801e7d426e0e", "committedDate": "2020-02-29T11:10:03Z", "message": "Resolve a merge conflict."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2OTM1MDAz", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366935003", "createdAt": "2020-03-02T03:35:58Z", "commit": {"oid": "7bb1aedfc69e2e9fca0c24a40300801e7d426e0e"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQwMzozNTo1OFrOFwS1Ww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQwMzo0MjowN1rOFwS5Zg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjE4NDUzOQ==", "bodyText": "Why do we have these functions as public functions? They are only expected to be called from within the module right?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386184539", "createdAt": "2020-03-02T03:35:58Z", "author": {"login": "MaryamZi"}, "path": "stdlib/email/src/main/ballerina/src/email/service_endpoint.bal", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+import ballerinax/java;\n+\n+public function initSmtpClientEndpoint(SmtpClient clientEndpoint, SmtpConfig config) returns error? = @java:Method {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7bb1aedfc69e2e9fca0c24a40300801e7d426e0e"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjE4NTIyNw==", "bodyText": "AFAICT, this particular record is only used in imapRead and popRead atm.\ne.g.,\nimapRead(ImapClient clientEndpoint, Filter message)\nMy question was, why can't we just use a string as the second param instead?\nimapRead(ImapClient clientEndpoint, string filter)", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386185227", "createdAt": "2020-03-02T03:40:15Z", "author": {"login": "MaryamZi"}, "path": "stdlib/email/src/main/ballerina/src/email/commons.bal", "diffHunk": "@@ -0,0 +1,56 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Configurations for the connections.\n+#\n+# + host - IP Address\n+# + port - Port\n+# + username - Provider username\n+# + password - Provider password\n+public type ConnectionConfig record {|\n+    string host;\n+    int port;\n+    string username;\n+    string password;\n+|};\n+\n+# Email message sending and receiving configurations.\n+#\n+# + to - TO address list\n+# + cc - CC address list\n+# + bcc - BCC address list\n+# + subject - Subject of email\n+# + body - Body of the email message\n+# + from - From address\n+# + sender - Sender's address\n+# + replyTo - Reply To addresses\n+public type Email record {|\n+    string[] to;\n+    string[] cc?;\n+    string[] bcc?;\n+    string subject;\n+    string body;\n+    string 'from;\n+    string sender?;\n+    string[] replyTo?;\n+|};\n+\n+# Filter to receive an email.\n+#\n+# + folder - Folder to read emails\n+public type Filter record {|", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAwMTQ3MQ=="}, "originalCommit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjE4NTU3NA==", "bodyText": "Ack and OK if we are adding with this PR. If not, IMO, we shouldn't introduce this class now.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386185574", "createdAt": "2020-03-02T03:42:07Z", "author": {"login": "MaryamZi"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/service/compiler/EmailListenerCompilerPlugin.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.service.compiler;\n+\n+import org.ballerinalang.compiler.plugins.AbstractCompilerPlugin;\n+import org.ballerinalang.util.diagnostic.DiagnosticLog;\n+\n+/**\n+ * This class validates annotations attached to the Ballerina service and its resource nodes.\n+ *\n+ * @since 1.1.5\n+ */\n+class EmailListenerCompilerPlugin extends AbstractCompilerPlugin {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAwMTg4Mg=="}, "originalCommit": {"oid": "ca4455cefd18c4b9db0ae6972dc0175c7cd74073"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0248227c9308898b698c54fe42089655160202df", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0248227c9308898b698c54fe42089655160202df", "committedDate": "2020-03-02T06:33:01Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into email"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d596a974e496b4e32c7607679f6d3723644b951", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9d596a974e496b4e32c7607679f6d3723644b951", "committedDate": "2020-03-02T06:45:14Z", "message": "Revert ballerina-grammar commit"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2OTcyODAw", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366972800", "createdAt": "2020-03-02T06:31:11Z", "commit": {"oid": "7bb1aedfc69e2e9fca0c24a40300801e7d426e0e"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQwNjozMToxMlrOFwUwQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQwNjo0OToyMlrOFwVA7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjIxNjAwMw==", "bodyText": "This version represents the version of the particular std lib module base on its maturity and the functionality coverage. This is totally independent from the ballerina version.\nSo If we are confident enough that this module has covered all basic functionalities we can version this as 1.0.0. If not something less would be meaningful.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386216003", "createdAt": "2020-03-02T06:31:12Z", "author": {"login": "chamil321"}, "path": "stdlib/email/src/main/ballerina/Ballerina.toml", "diffHunk": "@@ -0,0 +1,18 @@\n+[project]\n+org-name = \"ballerina\"\n+version = \"1.1.5\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7bb1aedfc69e2e9fca0c24a40300801e7d426e0e"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjIyMDI3MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (string == null) {\n          \n          \n            \n                        return \"\";\n          \n          \n            \n                    } else {\n          \n          \n            \n                        return string;\n          \n          \n            \n                    }\n          \n          \n            \n                    return string == null ? \"\" : string;\n          \n          \n            \n                    }", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386220271", "createdAt": "2020-03-02T06:49:22Z", "author": {"login": "chamil321"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/PopUtil.java", "diffHunk": "@@ -0,0 +1,203 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+import org.ballerinalang.jvm.BallerinaValues;\n+import org.ballerinalang.jvm.types.BArrayType;\n+import org.ballerinalang.jvm.types.BTypes;\n+import org.ballerinalang.jvm.values.ArrayValue;\n+import org.ballerinalang.jvm.values.ArrayValueImpl;\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Properties;\n+\n+import javax.mail.Address;\n+import javax.mail.BodyPart;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.internet.MimeMultipart;\n+\n+/**\n+ * Contains Utility functions related to the POP3 protocol.\n+ */\n+public class PopUtil {\n+\n+    private static final Logger log = LoggerFactory.getLogger(PopUtil.class);\n+    private static final int MAX_PORT = 65535;\n+\n+    /**\n+     * Generates Properties object using the passed MapValue.\n+     *\n+     * @param popConfig MapValue with the configuration values\n+     * @param isPop True if the protocol is POP3 and false otherwise (if protocol is IMAP)\n+     * @return Properties object\n+     */\n+    public static Properties getProperties(MapValue popConfig, boolean isPop) {\n+        log.debug(\"[PopUtil][getProperties] Extracting Property values from Config\");\n+        Properties properties = new Properties();\n+        if (isPop) {\n+            properties.put(PopConstants.PROPS_POP_HOST, popConfig.getStringValue(PopConstants.PROPS_HOST));\n+            properties.put(PopConstants.PROPS_POP_PORT,\n+                    extractPortValue(popConfig.getIntValue(PopConstants.PROPS_PORT), isPop));\n+            properties.put(PopConstants.PROPS_POP_AUTH, \"true\");\n+            properties.put(PopConstants.PROPS_POP_STARTTLS, \"true\");\n+            properties.put(EmailConstants.MAIL_STORE_PROTOCOL, PopConstants.POP_PROTOCOL);\n+        } else {\n+            properties.put(ImapConstants.PROPS_IMAP_HOST, popConfig.getStringValue(PopConstants.PROPS_HOST));\n+            properties.put(ImapConstants.PROPS_IMAP_PORT,\n+                    extractPortValue(popConfig.getIntValue(PopConstants.PROPS_PORT), isPop));\n+            properties.put(ImapConstants.PROPS_IMAP_AUTH, \"true\");\n+            properties.put(ImapConstants.PROPS_IMAP_STARTTLS, \"true\");\n+            properties.put(EmailConstants.MAIL_STORE_PROTOCOL, ImapConstants.IMAP_PROTOCOL);\n+        }\n+\n+        properties.put(PopConstants.PROPS_USERNAME, popConfig.getStringValue(PopConstants.PROPS_USERNAME));\n+        properties.put(PopConstants.PROPS_PASSWORD, popConfig.getStringValue(PopConstants.PROPS_PASSWORD));\n+\n+        log.debug(\"[PopUtil][getProperties] Property object created. Returning Object to PopClient\");\n+        return properties;\n+    }\n+\n+    /**\n+     * Generates MapValue object using the passed message.\n+     *\n+     * @param message received\n+     * @return MapValue object\n+     * @throws MessagingException If an error occurs related to messaging\n+     * @throws IOException If an error occurs related to I/O\n+     */\n+    public static MapValue getMapValue(Message message) throws MessagingException, IOException {\n+        log.debug(\"[PopUtil][getMapValue] Extracting MapValue values from Config\");\n+        Map<String, Object> valueMap = new HashMap<>();\n+        Address[] toAddress = message.getRecipients(Message.RecipientType.TO);\n+        Address[] ccAddress = message.getRecipients(Message.RecipientType.CC);\n+        Address[] bccAddress = message.getRecipients(Message.RecipientType.BCC);\n+        Address[] replyToAddress = message.getReplyTo();\n+        ArrayValue toAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue ccAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue bccAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue replyToAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        if (toAddress != null) {\n+            for (Address address: toAddress) {\n+                toAddressArrayValue.append(address.toString());\n+            }\n+        }\n+        if (ccAddress != null) {\n+            for (Address address: ccAddress) {\n+                ccAddressArrayValue.append(address.toString());\n+            }\n+        }\n+        if (bccAddress != null) {\n+            for (Address address: bccAddress) {\n+                bccAddressArrayValue.append(address.toString());\n+            }\n+        }\n+        if (replyToAddress != null) {\n+            for (Address address: replyToAddress) {\n+                replyToAddressArrayValue.append(address.toString());\n+            }\n+        }\n+        String subject = getStringNullChecked(message.getSubject());\n+        String messageBody = \"\";\n+        if (message.isMimeType(\"text/plain\")) {\n+            if (message.getContent() != null) {\n+                messageBody = message.getContent().toString();\n+            } else {\n+                messageBody = \"\";\n+            }\n+        } else if (message.isMimeType(\"multipart/*\")) {\n+            MimeMultipart mimeMultipart = (MimeMultipart) message.getContent();\n+            messageBody = getTextFromMimeMultipart(mimeMultipart);\n+        }\n+        String fromAddress;\n+        if (message.getFrom() != null) {\n+            fromAddress = message.getFrom()[0].toString();\n+        } else {\n+            fromAddress = \"\";\n+        }\n+        String senderAddress = \"\";\n+        valueMap.put(EmailConstants.MESSAGE_TO, toAddressArrayValue);\n+        valueMap.put(EmailConstants.MESSAGE_CC, ccAddressArrayValue);\n+        valueMap.put(EmailConstants.MESSAGE_BCC, bccAddressArrayValue);\n+        valueMap.put(EmailConstants.MESSAGE_REPLY_TO, replyToAddressArrayValue);\n+        valueMap.put(EmailConstants.MESSAGE_SUBJECT, subject);\n+        valueMap.put(EmailConstants.MESSAGE_MESSAGE_BODY, messageBody);\n+        valueMap.put(EmailConstants.MESSAGE_FROM, fromAddress);\n+        valueMap.put(EmailConstants.MESSAGE_SENDER, senderAddress);\n+        log.debug(\"[PopUtil][getMapValue] MapValue object created. Returning Object to PopClient\");\n+        return BallerinaValues.createRecordValue(EmailConstants.EMAIL_PACKAGE_ID, PopConstants.EMAIL, valueMap);\n+    }\n+\n+    private static String getTextFromMimeMultipart(\n+            MimeMultipart mimeMultipart)  throws MessagingException, IOException {\n+        StringBuilder result = new StringBuilder();\n+        int count = mimeMultipart.getCount();\n+        for (int i = 0; i < count; i++) {\n+            BodyPart bodyPart = mimeMultipart.getBodyPart(i);\n+            if (bodyPart.isMimeType(\"text/plain\")) {\n+                result.append(\"\\n\").append(bodyPart.getContent());\n+                break; // without break same text appears twice in my tests\n+            } else if (bodyPart.isMimeType(\"text/html\")) {\n+                String html = (String) bodyPart.getContent();\n+                // result = result + \"\\n\" + org.jsoup.Jsoup.parse(html).text();\n+                result.append(\"\\n\").append(html);\n+            } else if (bodyPart.getContent() instanceof MimeMultipart) {\n+                result.append(getTextFromMimeMultipart((MimeMultipart) bodyPart.getContent()));\n+            }\n+        }\n+        return result.toString();\n+    }\n+\n+    private static String getStringNullChecked(String string) {\n+        if (string == null) {\n+            return \"\";\n+        } else {\n+            return string;\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d596a974e496b4e32c7607679f6d3723644b951"}, "originalPosition": 177}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3MTQxNjA1", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-367141605", "createdAt": "2020-03-02T11:52:19Z", "commit": {"oid": "9d596a974e496b4e32c7607679f6d3723644b951"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMTo1MjoyMFrOFwc3zg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMTo1MjoyMFrOFwc3zg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM0OTAwNg==", "bodyText": "Shouldn't we check log.isDebugEnabled() before debug logs?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386349006", "createdAt": "2020-03-02T11:52:20Z", "author": {"login": "anupama-pathirage"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/client/SmtpClient.java", "diffHunk": "@@ -0,0 +1,98 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.client;\n+\n+import org.ballerinalang.jvm.StringUtils;\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.ballerinalang.jvm.values.ObjectValue;\n+import org.ballerinalang.jvm.values.api.BValueCreator;\n+import org.ballerinalang.stdlib.email.util.SmtpConstants;\n+import org.ballerinalang.stdlib.email.util.SmtpUtil;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.Properties;\n+\n+import javax.mail.MessagingException;\n+import javax.mail.PasswordAuthentication;\n+import javax.mail.Session;\n+import javax.mail.Transport;\n+\n+/**\n+ * Contains functionality of SMTP Client.\n+ */\n+public class SmtpClient {\n+\n+    private static final Logger log = LoggerFactory.getLogger(SmtpClient.class);\n+\n+    private SmtpClient() {\n+        // Singleton class\n+    }\n+\n+    /**\n+     * Initializes the ObjectValue object with the SMTP Properties.\n+     * @param clientEndpoint Represents the SMTP Client class\n+     * @param config Properties required to configure the SMTP Session\n+     * @return Object If an error occurs in the SMTP client, error\n+     */\n+    public static Object initClientEndpoint(ObjectValue clientEndpoint, MapValue<Object, Object> config) {\n+        try {\n+            log.debug(\"[SmtpClient][InitClient] Calling getProperties\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d596a974e496b4e32c7607679f6d3723644b951"}, "originalPosition": 56}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3MTQyOTI0", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-367142924", "createdAt": "2020-03-02T11:54:49Z", "commit": {"oid": "9d596a974e496b4e32c7607679f6d3723644b951"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMTo1NDo0OVrOFwc71A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMTo1NDo0OVrOFwc71A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM1MDAzNg==", "bodyText": "What is the usage of this class?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386350036", "createdAt": "2020-03-02T11:54:49Z", "author": {"login": "anupama-pathirage"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/BallerinaPopException.java", "diffHunk": "@@ -0,0 +1,33 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+/**\n+ * Exception class for POP.\n+ */\n+public class BallerinaPopException extends Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d596a974e496b4e32c7607679f6d3723644b951"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3MTQzMDcx", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-367143071", "createdAt": "2020-03-02T11:55:05Z", "commit": {"oid": "9d596a974e496b4e32c7607679f6d3723644b951"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMTo1NTowNlrOFwc8PA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMTo1NTowNlrOFwc8PA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM1MDE0MA==", "bodyText": "What is the usage of this class?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386350140", "createdAt": "2020-03-02T11:55:06Z", "author": {"login": "anupama-pathirage"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/BallerinaSmtpException.java", "diffHunk": "@@ -0,0 +1,33 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+/**\n+ * Exception class for SMTP.\n+ */\n+public class BallerinaSmtpException extends Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d596a974e496b4e32c7607679f6d3723644b951"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3MTQzNTA0", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-367143504", "createdAt": "2020-03-02T11:55:53Z", "commit": {"oid": "9d596a974e496b4e32c7607679f6d3723644b951"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMTo1NTo1M1rOFwc9jA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMTo1NTo1M1rOFwc9jA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM1MDQ3Ng==", "bodyText": "Unused constant?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386350476", "createdAt": "2020-03-02T11:55:53Z", "author": {"login": "anupama-pathirage"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/SmtpConstants.java", "diffHunk": "@@ -0,0 +1,45 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+/**\n+ * Constants for SMTP-related functions.\n+ *\n+ * @since 1.1.5\n+ */\n+public class SmtpConstants {\n+\n+    public static final String DEFAULT_PORT_NUMBER = \"587\";\n+    public static final String PROPS_HOST = \"host\";\n+    public static final String PROPS_PORT = \"port\";\n+    public static final String PROPS_USERNAME = \"username\";\n+    public static final String PROPS_PASSWORD = \"password\";\n+    public static final String PROPS_SESSION = \"session\";\n+    public static final String PROPS_SMTP_HOST = \"mail.smtp.host\";\n+    public static final String PROPS_SMTP_PORT = \"mail.smtp.port\";\n+    public static final String PROPS_SMTP_AUTH = \"mail.smtp.auth\";\n+    public static final String PROPS_SMTP_STARTTLS = \"mail.smtp.starttls.enable\";\n+    public static final String SMTP_ERROR_CODE = \"{ballerina/email}Smtp\";\n+    public static final String SMTP_ERROR_MESSAGE = \"Error while sending the email.\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d596a974e496b4e32c7607679f6d3723644b951"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3MTQzNzEw", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-367143710", "createdAt": "2020-03-02T11:56:17Z", "commit": {"oid": "9d596a974e496b4e32c7607679f6d3723644b951"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMTo1NjoxOFrOFwc-LA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMTo1NjoxOFrOFwc-LA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM1MDYzNg==", "bodyText": "Unused constant", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386350636", "createdAt": "2020-03-02T11:56:18Z", "author": {"login": "anupama-pathirage"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/ImapConstants.java", "diffHunk": "@@ -0,0 +1,38 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+/**\n+ * Constants for IMAP-related functions.\n+ *\n+ * @since 1.1.5\n+ */\n+public class ImapConstants {\n+    public static final String DEFAULT_PORT_NUMBER = \"143\";\n+    public static final String IMAP_PROTOCOL = \"imap\";\n+    public static final String PROPS_IMAP_HOST = \"mail.imap.host\";\n+    public static final String PROPS_IMAP_PORT = \"mail.imap.port\";\n+    public static final String PROPS_IMAP_STARTTLS = \"mail.imap.starttls.enable\";\n+    public static final String PROPS_IMAP_AUTH = \"mail.imap.auth\";\n+    public static final String IMAP_ERROR_CODE = \"{ballerina/email}Imap\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d596a974e496b4e32c7607679f6d3723644b951"}, "originalPosition": 33}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3MTUzOTYz", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-367153963", "createdAt": "2020-03-02T12:15:10Z", "commit": {"oid": "9d596a974e496b4e32c7607679f6d3723644b951"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMjoxNToxMFrOFwdb4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wMlQxMjoxNToxMFrOFwdb4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM1ODI0Mg==", "bodyText": "Shall we add @since annotation for all the new classes?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386358242", "createdAt": "2020-03-02T12:15:10Z", "author": {"login": "anupama-pathirage"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/client/PopClient.java", "diffHunk": "@@ -0,0 +1,124 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.client;\n+\n+import org.ballerinalang.jvm.BallerinaErrors;\n+import org.ballerinalang.jvm.StringUtils;\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.ballerinalang.jvm.values.ObjectValue;\n+import org.ballerinalang.jvm.values.api.BValueCreator;\n+import org.ballerinalang.stdlib.email.util.ImapConstants;\n+import org.ballerinalang.stdlib.email.util.PopConstants;\n+import org.ballerinalang.stdlib.email.util.PopUtil;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.util.Properties;\n+\n+import javax.mail.Folder;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.NoSuchProviderException;\n+import javax.mail.Session;\n+import javax.mail.Store;\n+\n+/**\n+ * Contains functionality of POP Client.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d596a974e496b4e32c7607679f6d3723644b951"}, "originalPosition": 43}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a04c574f31a764074384de15bf1c3347982b1c0", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0a04c574f31a764074384de15bf1c3347982b1c0", "committedDate": "2020-03-02T12:50:38Z", "message": "Correct the suggestions given in the PR."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ffbe8998b354a2e50f81a89679e2e1d2e17dcc1", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2ffbe8998b354a2e50f81a89679e2e1d2e17dcc1", "committedDate": "2020-03-02T12:54:43Z", "message": "Correct a change proposed in the PR."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ecfc51717a472f044dee3589bc3f300e6209834", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2ecfc51717a472f044dee3589bc3f300e6209834", "committedDate": "2020-03-02T17:33:21Z", "message": "Add a missing configuration."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3NzYyMDcw", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-367762070", "createdAt": "2020-03-03T07:54:15Z", "commit": {"oid": "2ecfc51717a472f044dee3589bc3f300e6209834"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QwNzo1NDoxNVrOFw7TlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QwNzo1NDoxNVrOFw7TlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njg0NzYzNw==", "bodyText": "Is this record being using currently?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386847637", "createdAt": "2020-03-03T07:54:15Z", "author": {"login": "wggihan"}, "path": "stdlib/email/src/main/ballerina/src/email/commons.bal", "diffHunk": "@@ -0,0 +1,56 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Configurations for the connections.\n+#\n+# + host - IP Address\n+# + port - Port\n+# + username - Provider username\n+# + password - Provider password\n+public type ConnectionConfig record {|", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ecfc51717a472f044dee3589bc3f300e6209834"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "212324bb74acc46ead997e86e8110d4630842423", "author": {"user": {"login": "nadeeshaan", "name": "Nadeeshaan Gunasinghe"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/212324bb74acc46ead997e86e8110d4630842423", "committedDate": "2020-03-03T08:02:39Z", "message": "fix failing completion tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3NzgzMTAy", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-367783102", "createdAt": "2020-03-03T08:34:55Z", "commit": {"oid": "2ecfc51717a472f044dee3589bc3f300e6209834"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QwODozNDo1NVrOFw8Uzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QwODozNDo1NVrOFw8Uzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njg2NDMzNQ==", "bodyText": "This need to change as receive. Check other places as well.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386864335", "createdAt": "2020-03-03T08:34:55Z", "author": {"login": "wggihan"}, "path": "stdlib/email/src/main/ballerina/src/email/pop_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents a POP Client, which interacts with a POP Server.\n+public type PopClient client object {\n+\n+    # Gets invoked during object initialization.\n+    #\n+    # + clientConfig - Configurations for the POP Client\n+    # + return - An `error` if failed while creating the client\n+    public function __init(PopConfig clientConfig) returns error? {\n+        return initPopClientEndpoint(self, clientConfig, true);\n+    }\n+\n+    # Used to read a message.\n+    #\n+    # + filter - Filter parameters to read an email\n+    # + return - An `error` if failed to send the message to the recipient", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ecfc51717a472f044dee3589bc3f300e6209834"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4cc543fd9ec5835a8388a2a9d79775b612bcfd74", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4cc543fd9ec5835a8388a2a9d79775b612bcfd74", "committedDate": "2020-03-03T08:40:54Z", "message": "Merge pull request #1 from nadeeshaan/email-local\n\nFix failing completion tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3NzkzMjk0", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-367793294", "createdAt": "2020-03-03T08:51:06Z", "commit": {"oid": "2ecfc51717a472f044dee3589bc3f300e6209834"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QwODo1MTowN1rOFw80cg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QwODo1MTowN1rOFw80cg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njg3MjQzNA==", "bodyText": "Shall we keep this password as a byte[] and convert to string on demand at least? @ldclakmal  wdyt?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r386872434", "createdAt": "2020-03-03T08:51:07Z", "author": {"login": "wggihan"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/client/PopClient.java", "diffHunk": "@@ -0,0 +1,132 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.client;\n+\n+import org.ballerinalang.jvm.BallerinaErrors;\n+import org.ballerinalang.jvm.StringUtils;\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.ballerinalang.jvm.values.ObjectValue;\n+import org.ballerinalang.jvm.values.api.BValueCreator;\n+import org.ballerinalang.stdlib.email.util.ImapConstants;\n+import org.ballerinalang.stdlib.email.util.PopConstants;\n+import org.ballerinalang.stdlib.email.util.PopUtil;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.util.Properties;\n+\n+import javax.mail.Folder;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.NoSuchProviderException;\n+import javax.mail.Session;\n+import javax.mail.Store;\n+\n+/**\n+ * Contains functionality of POP Client.\n+ */\n+public class PopClient {\n+\n+    private static final Logger log = LoggerFactory.getLogger(PopClient.class);\n+\n+    private PopClient() {\n+        // A Singleton class.\n+    }\n+\n+    /**\n+     * Initializes the ObjectValue object with the POP Properties.\n+     * @param clientEndpoint Represents the POP Client class\n+     * @param config Properties required to configure the POP Session\n+     * @param isPop True if the protocol is POP3 and false otherwise (if protocol is IMAP)\n+     * @return If an error occurs in the POP client, error\n+     */\n+    public static Object initClientEndpoint(ObjectValue clientEndpoint, MapValue<Object, Object> config,\n+                                            boolean isPop) {\n+        if (log.isDebugEnabled()) {\n+            log.debug(\"[PopClient][InitClient] Calling getProperties\");\n+        }\n+        Properties properties = PopUtil.getProperties(config, isPop);\n+        Session session = Session.getInstance(properties, null);\n+        try {\n+            Store store;\n+            if (isPop) {\n+                store = session.getStore(PopConstants.POP_PROTOCOL);\n+                clientEndpoint.addNativeData(PopConstants.PROPS_HOST,\n+                        properties.getProperty(PopConstants.PROPS_POP_HOST));\n+            } else {\n+                store = session.getStore(ImapConstants.IMAP_PROTOCOL);\n+                clientEndpoint.addNativeData(PopConstants.PROPS_HOST,\n+                        properties.getProperty(ImapConstants.PROPS_IMAP_HOST));\n+            }\n+            clientEndpoint.addNativeData(PopConstants.PROPS_STORE, store);\n+            clientEndpoint.addNativeData(PopConstants.PROPS_USERNAME,\n+                    properties.getProperty(PopConstants.PROPS_USERNAME));\n+            clientEndpoint.addNativeData(PopConstants.PROPS_PASSWORD,\n+                    properties.getProperty(PopConstants.PROPS_PASSWORD));\n+            return null;\n+        } catch (NoSuchProviderException e) {\n+            log.error(\"Failed initialize client properties : \", e);\n+            return BValueCreator.createErrorValue(StringUtils.fromString(PopConstants.POP_ERROR_CODE),\n+                    e.getMessage());\n+        }\n+    }\n+\n+    /**\n+     * Read emails from the server.\n+     * @param clientConnector Represents the POP Client class\n+     * @param filter Criteria, which is used to read emails\n+     * @return If successful return the received email, otherwise an error\n+     */\n+    public static Object readMessage(ObjectValue clientConnector, MapValue<Object, Object> filter) {\n+        try {\n+            Store store = (Store) clientConnector.getNativeData(PopConstants.PROPS_STORE);\n+            String host = (String) clientConnector.getNativeData(PopConstants.PROPS_HOST);\n+            String username = (String) clientConnector.getNativeData(PopConstants.PROPS_USERNAME);\n+            String password = (String) clientConnector.getNativeData(PopConstants.PROPS_PASSWORD);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ecfc51717a472f044dee3589bc3f300e6209834"}, "originalPosition": 102}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0554cc79c8cc4646a2ec0f87c5d4dd4ceaf367ef", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0554cc79c8cc4646a2ec0f87c5d4dd4ceaf367ef", "committedDate": "2020-03-03T09:26:18Z", "message": "Correct an exception and add SSL to POP and IMAP protocols."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af1ed20f8784a2c26436603ed2354e4525a9f9f4", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/af1ed20f8784a2c26436603ed2354e4525a9f9f4", "committedDate": "2020-03-03T09:26:52Z", "message": "Merge branch 'email' of github.com:Maninda/ballerina-lang into email"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da9b0fe57be691ec81bd8353a3c264fa38b3ed18", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/da9b0fe57be691ec81bd8353a3c264fa38b3ed18", "committedDate": "2020-03-03T09:42:17Z", "message": "Correct a comment as proposed in the PR."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b1f4acd2689bf943d173aeba987b75cfc87dd8b", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5b1f4acd2689bf943d173aeba987b75cfc87dd8b", "committedDate": "2020-03-03T11:45:00Z", "message": "Removed conflicting configurations to fix the conflict."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87665f8124387e7d00ff31826b0b89c4e7b71af3", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/87665f8124387e7d00ff31826b0b89c4e7b71af3", "committedDate": "2020-03-03T14:18:11Z", "message": "Merge branch 'master' of github.com:ballerina-platform/ballerina-lang into email"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe1632c2b44d77f5cc468205076b42c0e070f24e", "author": {"user": {"login": "nadeeshaan", "name": "Nadeeshaan Gunasinghe"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/fe1632c2b44d77f5cc468205076b42c0e070f24e", "committedDate": "2020-03-04T03:08:38Z", "message": "update failing test configs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a8f3669b9866b48d66d8ccbf11c85d9b30fca7e", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7a8f3669b9866b48d66d8ccbf11c85d9b30fca7e", "committedDate": "2020-03-04T03:39:12Z", "message": "Merge pull request #2 from nadeeshaan/email-local\n\nUpdate failing test configs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NjIyNTg4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-368622588", "createdAt": "2020-03-04T09:32:40Z", "commit": {"oid": "7a8f3669b9866b48d66d8ccbf11c85d9b30fca7e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwOTozMjo0MFrOFxl2oA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwOTozMjo0MFrOFxl2oA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzU0NDczNg==", "bodyText": "Shall we remove this else block? because already messageBody is an empty string;", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r387544736", "createdAt": "2020-03-04T09:32:40Z", "author": {"login": "Bhashinee"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/PopUtil.java", "diffHunk": "@@ -0,0 +1,213 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+import org.ballerinalang.jvm.BallerinaValues;\n+import org.ballerinalang.jvm.types.BArrayType;\n+import org.ballerinalang.jvm.types.BTypes;\n+import org.ballerinalang.jvm.values.ArrayValue;\n+import org.ballerinalang.jvm.values.ArrayValueImpl;\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Properties;\n+\n+import javax.mail.Address;\n+import javax.mail.BodyPart;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.internet.MimeMultipart;\n+\n+/**\n+ * Contains Utility functions related to the POP3 protocol.\n+ *\n+ * @since 1.1.5\n+ */\n+public class PopUtil {\n+\n+    private static final Logger log = LoggerFactory.getLogger(PopUtil.class);\n+    private static final int MAX_PORT = 65535;\n+\n+    /**\n+     * Generates Properties object using the passed MapValue.\n+     *\n+     * @param popConfig MapValue with the configuration values\n+     * @param isPop True if the protocol is POP3 and false otherwise (if protocol is IMAP)\n+     * @return Properties object\n+     */\n+    public static Properties getProperties(MapValue popConfig, boolean isPop) {\n+        if (log.isDebugEnabled()) {\n+            log.debug(\"[PopUtil][getProperties] Extracting Property values from Config\");\n+        }\n+        Properties properties = new Properties();\n+        if (isPop) {\n+            properties.put(PopConstants.PROPS_POP_HOST, popConfig.getStringValue(PopConstants.PROPS_HOST));\n+            properties.put(PopConstants.PROPS_POP_PORT,\n+                    extractPortValue(popConfig.getIntValue(PopConstants.PROPS_PORT), isPop));\n+            properties.put(PopConstants.PROPS_POP_AUTH, \"true\");\n+            properties.put(PopConstants.PROPS_POP_STARTTLS, \"true\");\n+            properties.put(PopConstants.PROPS_POP_SSL_ENABLE, popConfig.getBooleanValue(PopConstants.PROPS_SSL));\n+            properties.put(EmailConstants.MAIL_STORE_PROTOCOL, PopConstants.POP_PROTOCOL);\n+        } else {\n+            properties.put(ImapConstants.PROPS_IMAP_HOST, popConfig.getStringValue(PopConstants.PROPS_HOST));\n+            properties.put(ImapConstants.PROPS_IMAP_PORT,\n+                    extractPortValue(popConfig.getIntValue(PopConstants.PROPS_PORT), isPop));\n+            properties.put(ImapConstants.PROPS_IMAP_AUTH, \"true\");\n+            properties.put(ImapConstants.PROPS_IMAP_STARTTLS, \"true\");\n+            properties.put(ImapConstants.PROPS_IMAP_SSL_ENABLE, popConfig.getBooleanValue(PopConstants.PROPS_SSL));\n+            properties.put(EmailConstants.MAIL_STORE_PROTOCOL, ImapConstants.IMAP_PROTOCOL);\n+        }\n+\n+        properties.put(PopConstants.PROPS_USERNAME, popConfig.getStringValue(PopConstants.PROPS_USERNAME));\n+        properties.put(PopConstants.PROPS_PASSWORD, popConfig.getStringValue(PopConstants.PROPS_PASSWORD));\n+\n+        if (log.isDebugEnabled()) {\n+            log.debug(\"[PopUtil][getProperties] Property object created. Returning Object to PopClient\");\n+        }\n+        return properties;\n+    }\n+\n+    /**\n+     * Generates MapValue object using the passed message.\n+     *\n+     * @param message received\n+     * @return MapValue object\n+     * @throws MessagingException If an error occurs related to messaging\n+     * @throws IOException If an error occurs related to I/O\n+     */\n+    public static MapValue getMapValue(Message message) throws MessagingException, IOException {\n+        if (log.isDebugEnabled()) {\n+            log.debug(\"[PopUtil][getMapValue] Extracting MapValue values from Config\");\n+        }\n+        Map<String, Object> valueMap = new HashMap<>();\n+        Address[] toAddress = message.getRecipients(Message.RecipientType.TO);\n+        Address[] ccAddress = message.getRecipients(Message.RecipientType.CC);\n+        Address[] bccAddress = message.getRecipients(Message.RecipientType.BCC);\n+        Address[] replyToAddress = message.getReplyTo();\n+        ArrayValue toAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue ccAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue bccAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue replyToAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        if (toAddress != null) {\n+            for (Address address: toAddress) {\n+                toAddressArrayValue.append(address.toString());\n+            }\n+        }\n+        if (ccAddress != null) {\n+            for (Address address: ccAddress) {\n+                ccAddressArrayValue.append(address.toString());\n+            }\n+        }\n+        if (bccAddress != null) {\n+            for (Address address: bccAddress) {\n+                bccAddressArrayValue.append(address.toString());\n+            }\n+        }\n+        if (replyToAddress != null) {\n+            for (Address address: replyToAddress) {\n+                replyToAddressArrayValue.append(address.toString());\n+            }\n+        }\n+        String subject = getStringNullChecked(message.getSubject());\n+        String messageBody = \"\";\n+        if (message.isMimeType(\"text/plain\")) {\n+            if (message.getContent() != null) {\n+                messageBody = message.getContent().toString();\n+            } else {\n+                messageBody = \"\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7a8f3669b9866b48d66d8ccbf11c85d9b30fca7e"}, "originalPosition": 137}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NjMwMTQ4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-368630148", "createdAt": "2020-03-04T09:43:13Z", "commit": {"oid": "7a8f3669b9866b48d66d8ccbf11c85d9b30fca7e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwOTo0MzoxM1rOFxmNtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwOTo0MzoxM1rOFxmNtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzU1MDY0Ng==", "bodyText": "Shall we get rid of this else block and simply return without having it in an else block?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r387550646", "createdAt": "2020-03-04T09:43:13Z", "author": {"login": "Bhashinee"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/PopUtil.java", "diffHunk": "@@ -0,0 +1,213 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+import org.ballerinalang.jvm.BallerinaValues;\n+import org.ballerinalang.jvm.types.BArrayType;\n+import org.ballerinalang.jvm.types.BTypes;\n+import org.ballerinalang.jvm.values.ArrayValue;\n+import org.ballerinalang.jvm.values.ArrayValueImpl;\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Properties;\n+\n+import javax.mail.Address;\n+import javax.mail.BodyPart;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.internet.MimeMultipart;\n+\n+/**\n+ * Contains Utility functions related to the POP3 protocol.\n+ *\n+ * @since 1.1.5\n+ */\n+public class PopUtil {\n+\n+    private static final Logger log = LoggerFactory.getLogger(PopUtil.class);\n+    private static final int MAX_PORT = 65535;\n+\n+    /**\n+     * Generates Properties object using the passed MapValue.\n+     *\n+     * @param popConfig MapValue with the configuration values\n+     * @param isPop True if the protocol is POP3 and false otherwise (if protocol is IMAP)\n+     * @return Properties object\n+     */\n+    public static Properties getProperties(MapValue popConfig, boolean isPop) {\n+        if (log.isDebugEnabled()) {\n+            log.debug(\"[PopUtil][getProperties] Extracting Property values from Config\");\n+        }\n+        Properties properties = new Properties();\n+        if (isPop) {\n+            properties.put(PopConstants.PROPS_POP_HOST, popConfig.getStringValue(PopConstants.PROPS_HOST));\n+            properties.put(PopConstants.PROPS_POP_PORT,\n+                    extractPortValue(popConfig.getIntValue(PopConstants.PROPS_PORT), isPop));\n+            properties.put(PopConstants.PROPS_POP_AUTH, \"true\");\n+            properties.put(PopConstants.PROPS_POP_STARTTLS, \"true\");\n+            properties.put(PopConstants.PROPS_POP_SSL_ENABLE, popConfig.getBooleanValue(PopConstants.PROPS_SSL));\n+            properties.put(EmailConstants.MAIL_STORE_PROTOCOL, PopConstants.POP_PROTOCOL);\n+        } else {\n+            properties.put(ImapConstants.PROPS_IMAP_HOST, popConfig.getStringValue(PopConstants.PROPS_HOST));\n+            properties.put(ImapConstants.PROPS_IMAP_PORT,\n+                    extractPortValue(popConfig.getIntValue(PopConstants.PROPS_PORT), isPop));\n+            properties.put(ImapConstants.PROPS_IMAP_AUTH, \"true\");\n+            properties.put(ImapConstants.PROPS_IMAP_STARTTLS, \"true\");\n+            properties.put(ImapConstants.PROPS_IMAP_SSL_ENABLE, popConfig.getBooleanValue(PopConstants.PROPS_SSL));\n+            properties.put(EmailConstants.MAIL_STORE_PROTOCOL, ImapConstants.IMAP_PROTOCOL);\n+        }\n+\n+        properties.put(PopConstants.PROPS_USERNAME, popConfig.getStringValue(PopConstants.PROPS_USERNAME));\n+        properties.put(PopConstants.PROPS_PASSWORD, popConfig.getStringValue(PopConstants.PROPS_PASSWORD));\n+\n+        if (log.isDebugEnabled()) {\n+            log.debug(\"[PopUtil][getProperties] Property object created. Returning Object to PopClient\");\n+        }\n+        return properties;\n+    }\n+\n+    /**\n+     * Generates MapValue object using the passed message.\n+     *\n+     * @param message received\n+     * @return MapValue object\n+     * @throws MessagingException If an error occurs related to messaging\n+     * @throws IOException If an error occurs related to I/O\n+     */\n+    public static MapValue getMapValue(Message message) throws MessagingException, IOException {\n+        if (log.isDebugEnabled()) {\n+            log.debug(\"[PopUtil][getMapValue] Extracting MapValue values from Config\");\n+        }\n+        Map<String, Object> valueMap = new HashMap<>();\n+        Address[] toAddress = message.getRecipients(Message.RecipientType.TO);\n+        Address[] ccAddress = message.getRecipients(Message.RecipientType.CC);\n+        Address[] bccAddress = message.getRecipients(Message.RecipientType.BCC);\n+        Address[] replyToAddress = message.getReplyTo();\n+        ArrayValue toAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue ccAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue bccAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue replyToAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        if (toAddress != null) {\n+            for (Address address: toAddress) {\n+                toAddressArrayValue.append(address.toString());\n+            }\n+        }\n+        if (ccAddress != null) {\n+            for (Address address: ccAddress) {\n+                ccAddressArrayValue.append(address.toString());\n+            }\n+        }\n+        if (bccAddress != null) {\n+            for (Address address: bccAddress) {\n+                bccAddressArrayValue.append(address.toString());\n+            }\n+        }\n+        if (replyToAddress != null) {\n+            for (Address address: replyToAddress) {\n+                replyToAddressArrayValue.append(address.toString());\n+            }\n+        }\n+        String subject = getStringNullChecked(message.getSubject());\n+        String messageBody = \"\";\n+        if (message.isMimeType(\"text/plain\")) {\n+            if (message.getContent() != null) {\n+                messageBody = message.getContent().toString();\n+            } else {\n+                messageBody = \"\";\n+            }\n+        } else if (message.isMimeType(\"multipart/*\")) {\n+            MimeMultipart mimeMultipart = (MimeMultipart) message.getContent();\n+            messageBody = getTextFromMimeMultipart(mimeMultipart);\n+        }\n+        String fromAddress;\n+        if (message.getFrom() != null) {\n+            fromAddress = message.getFrom()[0].toString();\n+        } else {\n+            fromAddress = \"\";\n+        }\n+        String senderAddress = \"\";\n+        valueMap.put(EmailConstants.MESSAGE_TO, toAddressArrayValue);\n+        valueMap.put(EmailConstants.MESSAGE_CC, ccAddressArrayValue);\n+        valueMap.put(EmailConstants.MESSAGE_BCC, bccAddressArrayValue);\n+        valueMap.put(EmailConstants.MESSAGE_REPLY_TO, replyToAddressArrayValue);\n+        valueMap.put(EmailConstants.MESSAGE_SUBJECT, subject);\n+        valueMap.put(EmailConstants.MESSAGE_MESSAGE_BODY, messageBody);\n+        valueMap.put(EmailConstants.MESSAGE_FROM, fromAddress);\n+        valueMap.put(EmailConstants.MESSAGE_SENDER, senderAddress);\n+        if (log.isDebugEnabled()) {\n+            log.debug(\"[PopUtil][getMapValue] MapValue object created. Returning Object to PopClient\");\n+        }\n+        return BallerinaValues.createRecordValue(EmailConstants.EMAIL_PACKAGE_ID, PopConstants.EMAIL, valueMap);\n+    }\n+\n+    private static String getTextFromMimeMultipart(\n+            MimeMultipart mimeMultipart)  throws MessagingException, IOException {\n+        StringBuilder result = new StringBuilder();\n+        int count = mimeMultipart.getCount();\n+        for (int i = 0; i < count; i++) {\n+            BodyPart bodyPart = mimeMultipart.getBodyPart(i);\n+            if (bodyPart.isMimeType(\"text/plain\")) {\n+                result.append(\"\\n\").append(bodyPart.getContent());\n+                break; // without break same text appears twice in my tests\n+            } else if (bodyPart.isMimeType(\"text/html\")) {\n+                String html = (String) bodyPart.getContent();\n+                // result = result + \"\\n\" + org.jsoup.Jsoup.parse(html).text();\n+                result.append(\"\\n\").append(html);\n+            } else if (bodyPart.getContent() instanceof MimeMultipart) {\n+                result.append(getTextFromMimeMultipart((MimeMultipart) bodyPart.getContent()));\n+            }\n+        }\n+        return result.toString();\n+    }\n+\n+    private static String getStringNullChecked(String string) {\n+        return string == null ? \"\" : string;\n+    }\n+\n+    /**\n+     * Extracts port value and checks validity.\n+     *\n+     * @param longValue Port value extracted from the Config\n+     * @return Port value as a string\n+     */\n+    private static String extractPortValue(long longValue, boolean isPop) {\n+        if (log.isDebugEnabled()) {\n+            log.debug(\"[PopUtil][extractPortValue] Extracting Port value\");\n+        }\n+        if (longValue <= 0 || longValue > MAX_PORT) {\n+            if (isPop) {\n+                log.error(\"Invalid port number given in configuration. Setting default port \"\n+                        + PopConstants.DEFAULT_PORT_NUMBER);\n+                return PopConstants.DEFAULT_PORT_NUMBER;\n+            } else {\n+                log.error(\"Invalid port number given in configuration. Setting default port \"\n+                        + ImapConstants.DEFAULT_PORT_NUMBER);\n+                return PopConstants.DEFAULT_PORT_NUMBER;\n+            }\n+        } else {\n+            return Long.toString(longValue);\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7a8f3669b9866b48d66d8ccbf11c85d9b30fca7e"}, "originalPosition": 210}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NjQxMDUy", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-368641052", "createdAt": "2020-03-04T09:58:04Z", "commit": {"oid": "7a8f3669b9866b48d66d8ccbf11c85d9b30fca7e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwOTo1ODowNFrOFxmvSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwOTo1ODowNFrOFxmvSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzU1OTI0MQ==", "bodyText": "We can use ternary operator and do this from a single line.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    }\n          \n          \n            \n                    return string != null ? string : \"\";", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r387559241", "createdAt": "2020-03-04T09:58:04Z", "author": {"login": "Bhashinee"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/SmtpUtil.java", "diffHunk": "@@ -0,0 +1,186 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+import org.ballerinalang.jvm.values.ArrayValue;\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.Properties;\n+\n+import javax.mail.Address;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.Session;\n+import javax.mail.internet.AddressException;\n+import javax.mail.internet.InternetAddress;\n+import javax.mail.internet.MimeMessage;\n+\n+/**\n+ * Contains the utility functions related to the SMTP protocol.\n+ *\n+ * @since 1.1.5\n+ */\n+public class SmtpUtil {\n+\n+    private static final Logger log = LoggerFactory.getLogger(SmtpUtil.class);\n+    private static final int MAX_PORT = 65535;\n+\n+    /**\n+     * Generates the Properties object using the passed MapValue.\n+     *\n+     * @param smtpConfig MapValue with the configuration values\n+     * @return Properties object\n+     */\n+    public static Properties getProperties(MapValue smtpConfig) {\n+        Properties properties = new Properties();\n+        properties.put(SmtpConstants.PROPS_SMTP_HOST, smtpConfig.getStringValue(SmtpConstants.PROPS_HOST));\n+        properties.put(SmtpConstants.PROPS_SMTP_PORT,\n+                extractPortValue(smtpConfig.getIntValue(SmtpConstants.PROPS_PORT)));\n+        properties.put(SmtpConstants.PROPS_SMTP_AUTH, \"true\");\n+        properties.put(SmtpConstants.PROPS_SMTP_STARTTLS, \"true\"); //TLS\n+        properties.put(SmtpConstants.PROPS_USERNAME, smtpConfig.getStringValue(SmtpConstants.PROPS_USERNAME));\n+        properties.put(SmtpConstants.PROPS_PASSWORD, smtpConfig.getStringValue(SmtpConstants.PROPS_PASSWORD));\n+        if (log.isDebugEnabled()) {\n+            log.debug(\"[SmtpUtil][getProperties] Property object created. Returning Object to SMTPClient\");\n+        }\n+        return properties;\n+    }\n+\n+\n+    /**\n+     * Extracts port value and checks validity.\n+     *\n+     * @param longValue Port value extracted from the Config\n+     * @return Port value as a string\n+     */\n+    private static String extractPortValue(long longValue) {\n+        if (log.isDebugEnabled()) {\n+            log.debug(\"[SmtpUtil][extractPortValue] Extracting Port value\");\n+        }\n+        if (longValue <= 0 || longValue > MAX_PORT) {\n+            log.error(\"Invalid port number given in configuration. Setting default port \"\n+                    + SmtpConstants.DEFAULT_PORT_NUMBER);\n+            return SmtpConstants.DEFAULT_PORT_NUMBER;\n+        } else {\n+            return Long.toString(longValue);\n+        }\n+    }\n+\n+    /**\n+     * Generates a MIME message to be sent as an email.\n+     *\n+     * @param session Session to which the message is attached\n+     * @param username User who sends the email\n+     * @param message Ballerina-typed data object\n+     * @return Email message as a MIME message\n+     * @throws AddressException If an error occurs related to Internet Address operations\n+     */\n+\n+    public static MimeMessage generateMessage(Session session, String username, MapValue message)\n+            throws AddressException {\n+        MimeMessage emailMessage = new MimeMessage(session);\n+        String[] toAddress = getNullCheckedStringArray(message, EmailConstants.MESSAGE_TO);\n+        String[] ccAddress = getNullCheckedStringArray(message, EmailConstants.MESSAGE_CC);\n+        String[] bccAddress = getNullCheckedStringArray(message, EmailConstants.MESSAGE_BCC);\n+        String[] replyToAddress = getNullCheckedStringArray(message, EmailConstants.MESSAGE_REPLY_TO);\n+        int toAddressArrayLength = getNullArrayLengthChecked(toAddress);\n+        int ccAddressArrayLength = getNullArrayLengthChecked(ccAddress);\n+        int bccAddressArrayLength = getNullArrayLengthChecked(bccAddress);\n+        int replyToAddressArrayLength = getNullArrayLengthChecked(replyToAddress);\n+        Address[] toAddressArray = new Address[toAddressArrayLength];\n+        Address[] ccAddressArray = new Address[ccAddressArrayLength];\n+        Address[] bccAddressArray = new Address[bccAddressArrayLength];\n+        Address[] replyToAddressArray = new Address[replyToAddressArrayLength];\n+        for (int i = 0; i < toAddressArrayLength; i++) {\n+            toAddressArray[i] = new InternetAddress(toAddress[i]);\n+        }\n+        for (int i = 0; i < ccAddressArrayLength; i++) {\n+            ccAddressArray[i] = new InternetAddress(ccAddress[i]);\n+        }\n+        for (int i = 0; i < bccAddressArrayLength; i++) {\n+            bccAddressArray[i] = new InternetAddress(bccAddress[i]);\n+        }\n+        for (int i = 0; i < replyToAddressArrayLength; i++) {\n+            replyToAddressArray[i] = new InternetAddress(replyToAddress[i]);\n+        }\n+        if (log.isDebugEnabled()) {\n+            log.debug(\"[SmtpUtil][generateMessage] Generated TO, CC and BCC Address Arrays.\");\n+        }\n+        String subject = message.getStringValue(EmailConstants.MESSAGE_SUBJECT);\n+        String messageBody = message.getStringValue(EmailConstants.MESSAGE_MESSAGE_BODY);\n+        String fromAddress = message.getStringValue(EmailConstants.MESSAGE_FROM);\n+        if (fromAddress == null || fromAddress.isEmpty()) {\n+            fromAddress = username;\n+        }\n+        String senderAddress = getNullCheckedString(message.getStringValue(EmailConstants.MESSAGE_SENDER));\n+        if (log.isDebugEnabled()) {\n+            log.debug(\"[SmtpUtil][generateMessage] Generating MimeMessage\");\n+        }\n+\n+        try {\n+            emailMessage.setRecipients(Message.RecipientType.TO, toAddressArray);\n+            if (ccAddressArrayLength > 0) {\n+                emailMessage.setRecipients(Message.RecipientType.CC, ccAddressArray);\n+            }\n+            if (bccAddressArrayLength > 0) {\n+                emailMessage.setRecipients(Message.RecipientType.BCC, bccAddressArray);\n+            }\n+            if (replyToAddressArrayLength > 0) {\n+                emailMessage.setReplyTo(replyToAddressArray);\n+            }\n+            emailMessage.setSubject(subject);\n+            emailMessage.setText(messageBody);\n+            emailMessage.setFrom(new InternetAddress(fromAddress));\n+            if (!senderAddress.isEmpty()) {\n+                emailMessage.setSender(new InternetAddress(senderAddress));\n+            }\n+        } catch (MessagingException e) {\n+            log.error(\"Failed to send message : \", e);\n+        }\n+        return emailMessage;\n+    }\n+\n+    private static String[] getNullCheckedStringArray(MapValue mapValue, String parameter) {\n+        ArrayValue arrayValue = mapValue.getArrayValue(parameter);\n+        if (arrayValue != null) {\n+            return arrayValue.getStringArray();\n+        } else {\n+            return new String[0];\n+        }\n+    }\n+\n+    private static int getNullArrayLengthChecked(String[] addresses) {\n+        if (addresses == null) {\n+            return 0;\n+        } else {\n+            return addresses.length;\n+        }\n+    }\n+\n+    private static String getNullCheckedString(String string) {\n+        if (string != null) {\n+            return string;\n+        } else {\n+            return \"\";\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7a8f3669b9866b48d66d8ccbf11c85d9b30fca7e"}, "originalPosition": 183}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NjQ0NDk4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-368644498", "createdAt": "2020-03-04T10:02:57Z", "commit": {"oid": "7a8f3669b9866b48d66d8ccbf11c85d9b30fca7e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxMDowMjo1N1rOFxm6LQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxMDowMjo1N1rOFxm6LQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzU2MjAyOQ==", "bodyText": "Shall we rename this to 'enableSsl'?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r387562029", "createdAt": "2020-03-04T10:02:57Z", "author": {"login": "Bhashinee"}, "path": "stdlib/email/src/main/ballerina/src/email/imap_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,51 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an IMAP Client, which interacts with an IMAP Server.\n+public type ImapClient client object {\n+\n+    # Gets invoked during object initialization.\n+    #\n+    # + clientConfig - Configurations for the IMAP Client\n+    # + return - An `error` if failed while creating the client\n+    public function __init(ImapConfig clientConfig) returns error? {\n+        return initImapClientEndpoint(self, clientConfig, false);\n+    }\n+\n+    # Reads a message.\n+    #\n+    # + filter - Filter parameters to read an email\n+    # + return - An `error` if failed to send the message to the recipient\n+    public remote function read(Filter filter = { folder: \"INBOX\" }) returns Email|error? {\n+        return imapRead(self, filter);\n+    }\n+\n+};\n+\n+# Configuration of the IMAP Endpoint.\n+#\n+# + host - Host address of the IMAP server\n+# + port - Port number of the IMAP server\n+# + ssl - SSL enable\n+# + username - Username to access the IMAP server\n+# + password - Password to access the IMAP server\n+public type ImapConfig record {|\n+    string host;\n+    int port = 143;\n+    boolean ssl = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7a8f3669b9866b48d66d8ccbf11c85d9b30fca7e"}, "originalPosition": 48}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NjQ0OTIy", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-368644922", "createdAt": "2020-03-04T10:03:33Z", "commit": {"oid": "7a8f3669b9866b48d66d8ccbf11c85d9b30fca7e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxMDowMzozM1rOFxm7ew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxMDowMzozM1rOFxm7ew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzU2MjM2Mw==", "bodyText": "Shall we rename this to enableSsl?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                boolean ssl = true;\n          \n          \n            \n                boolean enableSsl = true;", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r387562363", "createdAt": "2020-03-04T10:03:33Z", "author": {"login": "Bhashinee"}, "path": "stdlib/email/src/main/ballerina/src/email/pop_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,51 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents a POP Client, which interacts with a POP Server.\n+public type PopClient client object {\n+\n+    # Gets invoked during object initialization.\n+    #\n+    # + clientConfig - Configurations for the POP Client\n+    # + return - An `error` if failed while creating the client\n+    public function __init(PopConfig clientConfig) returns error? {\n+        return initPopClientEndpoint(self, clientConfig, true);\n+    }\n+\n+    # Used to read a message.\n+    #\n+    # + filter - Filter parameters to read an email\n+    # + return - An `error` if failed to receive the message to the recipient\n+    public remote function read(Filter filter = { folder: \"INBOX\" }) returns Email|error? {\n+        return popRead(self, filter);\n+    }\n+\n+};\n+\n+# Configuration of the POP Endpoint.\n+#\n+# + host - Host address of the POP server\n+# + port - Port number of the POP server\n+# + ssl - SSL enable\n+# + username - Username to access the POP server\n+# + password - Password to access the POP server\n+public type PopConfig record {|\n+    string host;\n+    int port = 995;\n+    boolean ssl = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7a8f3669b9866b48d66d8ccbf11c85d9b30fca7e"}, "originalPosition": 48}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3df50a3cad31bac13c14ae5ee47b10cc497f8100", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3df50a3cad31bac13c14ae5ee47b10cc497f8100", "committedDate": "2020-03-04T11:13:31Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into email"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4ff5e2809f06371874b4c7d347bdbf1cf9d845e", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e4ff5e2809f06371874b4c7d347bdbf1cf9d845e", "committedDate": "2020-03-04T14:00:24Z", "message": "Merge branch 'email' of github.com:Maninda/ballerina-lang into email"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4ODQ2ODM3", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-368846837", "createdAt": "2020-03-04T14:56:55Z", "commit": {"oid": "7a8f3669b9866b48d66d8ccbf11c85d9b30fca7e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNDo1Njo1NlrOFxwhng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNDo1Njo1NlrOFxwhng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzcxOTU4Mg==", "bodyText": "Both if else blocks return the same 'PopConstants.DEFAULT_PORT_NUMBER;' . Is this correct? Please check. And I think we can get rid of the else block.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r387719582", "createdAt": "2020-03-04T14:56:56Z", "author": {"login": "Bhashinee"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/PopUtil.java", "diffHunk": "@@ -0,0 +1,213 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+import org.ballerinalang.jvm.BallerinaValues;\n+import org.ballerinalang.jvm.types.BArrayType;\n+import org.ballerinalang.jvm.types.BTypes;\n+import org.ballerinalang.jvm.values.ArrayValue;\n+import org.ballerinalang.jvm.values.ArrayValueImpl;\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Properties;\n+\n+import javax.mail.Address;\n+import javax.mail.BodyPart;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.internet.MimeMultipart;\n+\n+/**\n+ * Contains Utility functions related to the POP3 protocol.\n+ *\n+ * @since 1.1.5\n+ */\n+public class PopUtil {\n+\n+    private static final Logger log = LoggerFactory.getLogger(PopUtil.class);\n+    private static final int MAX_PORT = 65535;\n+\n+    /**\n+     * Generates Properties object using the passed MapValue.\n+     *\n+     * @param popConfig MapValue with the configuration values\n+     * @param isPop True if the protocol is POP3 and false otherwise (if protocol is IMAP)\n+     * @return Properties object\n+     */\n+    public static Properties getProperties(MapValue popConfig, boolean isPop) {\n+        if (log.isDebugEnabled()) {\n+            log.debug(\"[PopUtil][getProperties] Extracting Property values from Config\");\n+        }\n+        Properties properties = new Properties();\n+        if (isPop) {\n+            properties.put(PopConstants.PROPS_POP_HOST, popConfig.getStringValue(PopConstants.PROPS_HOST));\n+            properties.put(PopConstants.PROPS_POP_PORT,\n+                    extractPortValue(popConfig.getIntValue(PopConstants.PROPS_PORT), isPop));\n+            properties.put(PopConstants.PROPS_POP_AUTH, \"true\");\n+            properties.put(PopConstants.PROPS_POP_STARTTLS, \"true\");\n+            properties.put(PopConstants.PROPS_POP_SSL_ENABLE, popConfig.getBooleanValue(PopConstants.PROPS_SSL));\n+            properties.put(EmailConstants.MAIL_STORE_PROTOCOL, PopConstants.POP_PROTOCOL);\n+        } else {\n+            properties.put(ImapConstants.PROPS_IMAP_HOST, popConfig.getStringValue(PopConstants.PROPS_HOST));\n+            properties.put(ImapConstants.PROPS_IMAP_PORT,\n+                    extractPortValue(popConfig.getIntValue(PopConstants.PROPS_PORT), isPop));\n+            properties.put(ImapConstants.PROPS_IMAP_AUTH, \"true\");\n+            properties.put(ImapConstants.PROPS_IMAP_STARTTLS, \"true\");\n+            properties.put(ImapConstants.PROPS_IMAP_SSL_ENABLE, popConfig.getBooleanValue(PopConstants.PROPS_SSL));\n+            properties.put(EmailConstants.MAIL_STORE_PROTOCOL, ImapConstants.IMAP_PROTOCOL);\n+        }\n+\n+        properties.put(PopConstants.PROPS_USERNAME, popConfig.getStringValue(PopConstants.PROPS_USERNAME));\n+        properties.put(PopConstants.PROPS_PASSWORD, popConfig.getStringValue(PopConstants.PROPS_PASSWORD));\n+\n+        if (log.isDebugEnabled()) {\n+            log.debug(\"[PopUtil][getProperties] Property object created. Returning Object to PopClient\");\n+        }\n+        return properties;\n+    }\n+\n+    /**\n+     * Generates MapValue object using the passed message.\n+     *\n+     * @param message received\n+     * @return MapValue object\n+     * @throws MessagingException If an error occurs related to messaging\n+     * @throws IOException If an error occurs related to I/O\n+     */\n+    public static MapValue getMapValue(Message message) throws MessagingException, IOException {\n+        if (log.isDebugEnabled()) {\n+            log.debug(\"[PopUtil][getMapValue] Extracting MapValue values from Config\");\n+        }\n+        Map<String, Object> valueMap = new HashMap<>();\n+        Address[] toAddress = message.getRecipients(Message.RecipientType.TO);\n+        Address[] ccAddress = message.getRecipients(Message.RecipientType.CC);\n+        Address[] bccAddress = message.getRecipients(Message.RecipientType.BCC);\n+        Address[] replyToAddress = message.getReplyTo();\n+        ArrayValue toAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue ccAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue bccAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue replyToAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        if (toAddress != null) {\n+            for (Address address: toAddress) {\n+                toAddressArrayValue.append(address.toString());\n+            }\n+        }\n+        if (ccAddress != null) {\n+            for (Address address: ccAddress) {\n+                ccAddressArrayValue.append(address.toString());\n+            }\n+        }\n+        if (bccAddress != null) {\n+            for (Address address: bccAddress) {\n+                bccAddressArrayValue.append(address.toString());\n+            }\n+        }\n+        if (replyToAddress != null) {\n+            for (Address address: replyToAddress) {\n+                replyToAddressArrayValue.append(address.toString());\n+            }\n+        }\n+        String subject = getStringNullChecked(message.getSubject());\n+        String messageBody = \"\";\n+        if (message.isMimeType(\"text/plain\")) {\n+            if (message.getContent() != null) {\n+                messageBody = message.getContent().toString();\n+            } else {\n+                messageBody = \"\";\n+            }\n+        } else if (message.isMimeType(\"multipart/*\")) {\n+            MimeMultipart mimeMultipart = (MimeMultipart) message.getContent();\n+            messageBody = getTextFromMimeMultipart(mimeMultipart);\n+        }\n+        String fromAddress;\n+        if (message.getFrom() != null) {\n+            fromAddress = message.getFrom()[0].toString();\n+        } else {\n+            fromAddress = \"\";\n+        }\n+        String senderAddress = \"\";\n+        valueMap.put(EmailConstants.MESSAGE_TO, toAddressArrayValue);\n+        valueMap.put(EmailConstants.MESSAGE_CC, ccAddressArrayValue);\n+        valueMap.put(EmailConstants.MESSAGE_BCC, bccAddressArrayValue);\n+        valueMap.put(EmailConstants.MESSAGE_REPLY_TO, replyToAddressArrayValue);\n+        valueMap.put(EmailConstants.MESSAGE_SUBJECT, subject);\n+        valueMap.put(EmailConstants.MESSAGE_MESSAGE_BODY, messageBody);\n+        valueMap.put(EmailConstants.MESSAGE_FROM, fromAddress);\n+        valueMap.put(EmailConstants.MESSAGE_SENDER, senderAddress);\n+        if (log.isDebugEnabled()) {\n+            log.debug(\"[PopUtil][getMapValue] MapValue object created. Returning Object to PopClient\");\n+        }\n+        return BallerinaValues.createRecordValue(EmailConstants.EMAIL_PACKAGE_ID, PopConstants.EMAIL, valueMap);\n+    }\n+\n+    private static String getTextFromMimeMultipart(\n+            MimeMultipart mimeMultipart)  throws MessagingException, IOException {\n+        StringBuilder result = new StringBuilder();\n+        int count = mimeMultipart.getCount();\n+        for (int i = 0; i < count; i++) {\n+            BodyPart bodyPart = mimeMultipart.getBodyPart(i);\n+            if (bodyPart.isMimeType(\"text/plain\")) {\n+                result.append(\"\\n\").append(bodyPart.getContent());\n+                break; // without break same text appears twice in my tests\n+            } else if (bodyPart.isMimeType(\"text/html\")) {\n+                String html = (String) bodyPart.getContent();\n+                // result = result + \"\\n\" + org.jsoup.Jsoup.parse(html).text();\n+                result.append(\"\\n\").append(html);\n+            } else if (bodyPart.getContent() instanceof MimeMultipart) {\n+                result.append(getTextFromMimeMultipart((MimeMultipart) bodyPart.getContent()));\n+            }\n+        }\n+        return result.toString();\n+    }\n+\n+    private static String getStringNullChecked(String string) {\n+        return string == null ? \"\" : string;\n+    }\n+\n+    /**\n+     * Extracts port value and checks validity.\n+     *\n+     * @param longValue Port value extracted from the Config\n+     * @return Port value as a string\n+     */\n+    private static String extractPortValue(long longValue, boolean isPop) {\n+        if (log.isDebugEnabled()) {\n+            log.debug(\"[PopUtil][extractPortValue] Extracting Port value\");\n+        }\n+        if (longValue <= 0 || longValue > MAX_PORT) {\n+            if (isPop) {\n+                log.error(\"Invalid port number given in configuration. Setting default port \"\n+                        + PopConstants.DEFAULT_PORT_NUMBER);\n+                return PopConstants.DEFAULT_PORT_NUMBER;\n+            } else {\n+                log.error(\"Invalid port number given in configuration. Setting default port \"\n+                        + ImapConstants.DEFAULT_PORT_NUMBER);\n+                return PopConstants.DEFAULT_PORT_NUMBER;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7a8f3669b9866b48d66d8ccbf11c85d9b30fca7e"}, "originalPosition": 206}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1730f0c9fb3fe59d4b5190425517b90991638e8", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f1730f0c9fb3fe59d4b5190425517b90991638e8", "committedDate": "2020-03-04T15:42:15Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into email"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0d8e5129f4ac934ff93354bc00a69c58d584271", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c0d8e5129f4ac934ff93354bc00a69c58d584271", "committedDate": "2020-03-04T15:57:29Z", "message": "Merge branch 'email' of github.com:Maninda/ballerina-lang into email2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba00ef47b5c7aed9c31f43585e13a82fe1c185fa", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ba00ef47b5c7aed9c31f43585e13a82fe1c185fa", "committedDate": "2020-03-05T08:14:11Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into email2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f09afdaf62800565054c69fe3dd3bf40db0f899", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2f09afdaf62800565054c69fe3dd3bf40db0f899", "committedDate": "2020-03-05T09:41:46Z", "message": "Fix build failure due to interop dependancy mechanism change."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5acb52cc5c02d2ff00efa94671752aa7284ba84", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f5acb52cc5c02d2ff00efa94671752aa7284ba84", "committedDate": "2020-03-05T11:50:55Z", "message": "Merge branch 'email' of github.com:Maninda/ballerina-lang into email2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8fe4c1945db3f79c6ae3035fc65a87216c3f5bc8", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8fe4c1945db3f79c6ae3035fc65a87216c3f5bc8", "committedDate": "2020-03-05T11:53:43Z", "message": "Add fix to build failure."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41c2ec8ca7e7b5fa457b862fca13672be6bf3eaf", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/41c2ec8ca7e7b5fa457b862fca13672be6bf3eaf", "committedDate": "2020-03-05T11:57:11Z", "message": "Correct the tab space."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMDg4NTgy", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-370088582", "createdAt": "2020-03-06T05:23:36Z", "commit": {"oid": "41c2ec8ca7e7b5fa457b862fca13672be6bf3eaf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwNToyMzozNlrOFytffg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwNToyMzozNlrOFytffg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODcxODQ2Mg==", "bodyText": "Do we need this kind of debug logs? Is this adding any value? IMO, at least we should print values, else this doesn't help much when it comes to debugging.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r388718462", "createdAt": "2020-03-06T05:23:36Z", "author": {"login": "wggihan"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/PopUtil.java", "diffHunk": "@@ -0,0 +1,213 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+import org.ballerinalang.jvm.BallerinaValues;\n+import org.ballerinalang.jvm.types.BArrayType;\n+import org.ballerinalang.jvm.types.BTypes;\n+import org.ballerinalang.jvm.values.ArrayValue;\n+import org.ballerinalang.jvm.values.ArrayValueImpl;\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Properties;\n+\n+import javax.mail.Address;\n+import javax.mail.BodyPart;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.internet.MimeMultipart;\n+\n+/**\n+ * Contains Utility functions related to the POP3 protocol.\n+ *\n+ * @since 1.1.5\n+ */\n+public class PopUtil {\n+\n+    private static final Logger log = LoggerFactory.getLogger(PopUtil.class);\n+    private static final int MAX_PORT = 65535;\n+\n+    /**\n+     * Generates Properties object using the passed MapValue.\n+     *\n+     * @param popConfig MapValue with the configuration values\n+     * @param isPop True if the protocol is POP3 and false otherwise (if protocol is IMAP)\n+     * @return Properties object\n+     */\n+    public static Properties getProperties(MapValue popConfig, boolean isPop) {\n+        if (log.isDebugEnabled()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41c2ec8ca7e7b5fa457b862fca13672be6bf3eaf"}, "originalPosition": 59}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwMDkwODU0", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-370090854", "createdAt": "2020-03-06T05:33:19Z", "commit": {"oid": "41c2ec8ca7e7b5fa457b862fca13672be6bf3eaf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwNTozMzoxOVrOFytnNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNlQwNTozMzoxOVrOFytnNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODcyMDQzOA==", "bodyText": "We can break this into smaller methods that return Address[]? We can avoid this longer method IMO.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r388720438", "createdAt": "2020-03-06T05:33:19Z", "author": {"login": "wggihan"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/PopUtil.java", "diffHunk": "@@ -0,0 +1,213 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+import org.ballerinalang.jvm.BallerinaValues;\n+import org.ballerinalang.jvm.types.BArrayType;\n+import org.ballerinalang.jvm.types.BTypes;\n+import org.ballerinalang.jvm.values.ArrayValue;\n+import org.ballerinalang.jvm.values.ArrayValueImpl;\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Properties;\n+\n+import javax.mail.Address;\n+import javax.mail.BodyPart;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.internet.MimeMultipart;\n+\n+/**\n+ * Contains Utility functions related to the POP3 protocol.\n+ *\n+ * @since 1.1.5\n+ */\n+public class PopUtil {\n+\n+    private static final Logger log = LoggerFactory.getLogger(PopUtil.class);\n+    private static final int MAX_PORT = 65535;\n+\n+    /**\n+     * Generates Properties object using the passed MapValue.\n+     *\n+     * @param popConfig MapValue with the configuration values\n+     * @param isPop True if the protocol is POP3 and false otherwise (if protocol is IMAP)\n+     * @return Properties object\n+     */\n+    public static Properties getProperties(MapValue popConfig, boolean isPop) {\n+        if (log.isDebugEnabled()) {\n+            log.debug(\"[PopUtil][getProperties] Extracting Property values from Config\");\n+        }\n+        Properties properties = new Properties();\n+        if (isPop) {\n+            properties.put(PopConstants.PROPS_POP_HOST, popConfig.getStringValue(PopConstants.PROPS_HOST));\n+            properties.put(PopConstants.PROPS_POP_PORT,\n+                    extractPortValue(popConfig.getIntValue(PopConstants.PROPS_PORT), isPop));\n+            properties.put(PopConstants.PROPS_POP_AUTH, \"true\");\n+            properties.put(PopConstants.PROPS_POP_STARTTLS, \"true\");\n+            properties.put(PopConstants.PROPS_POP_SSL_ENABLE, popConfig.getBooleanValue(PopConstants.PROPS_SSL));\n+            properties.put(EmailConstants.MAIL_STORE_PROTOCOL, PopConstants.POP_PROTOCOL);\n+        } else {\n+            properties.put(ImapConstants.PROPS_IMAP_HOST, popConfig.getStringValue(PopConstants.PROPS_HOST));\n+            properties.put(ImapConstants.PROPS_IMAP_PORT,\n+                    extractPortValue(popConfig.getIntValue(PopConstants.PROPS_PORT), isPop));\n+            properties.put(ImapConstants.PROPS_IMAP_AUTH, \"true\");\n+            properties.put(ImapConstants.PROPS_IMAP_STARTTLS, \"true\");\n+            properties.put(ImapConstants.PROPS_IMAP_SSL_ENABLE, popConfig.getBooleanValue(PopConstants.PROPS_SSL));\n+            properties.put(EmailConstants.MAIL_STORE_PROTOCOL, ImapConstants.IMAP_PROTOCOL);\n+        }\n+\n+        properties.put(PopConstants.PROPS_USERNAME, popConfig.getStringValue(PopConstants.PROPS_USERNAME));\n+        properties.put(PopConstants.PROPS_PASSWORD, popConfig.getStringValue(PopConstants.PROPS_PASSWORD));\n+\n+        if (log.isDebugEnabled()) {\n+            log.debug(\"[PopUtil][getProperties] Property object created. Returning Object to PopClient\");\n+        }\n+        return properties;\n+    }\n+\n+    /**\n+     * Generates MapValue object using the passed message.\n+     *\n+     * @param message received\n+     * @return MapValue object\n+     * @throws MessagingException If an error occurs related to messaging\n+     * @throws IOException If an error occurs related to I/O\n+     */\n+    public static MapValue getMapValue(Message message) throws MessagingException, IOException {\n+        if (log.isDebugEnabled()) {\n+            log.debug(\"[PopUtil][getMapValue] Extracting MapValue values from Config\");\n+        }\n+        Map<String, Object> valueMap = new HashMap<>();\n+        Address[] toAddress = message.getRecipients(Message.RecipientType.TO);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41c2ec8ca7e7b5fa457b862fca13672be6bf3eaf"}, "originalPosition": 103}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb2289aaaf42f9464819f6f0de78b9e125bb8236", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/cb2289aaaf42f9464819f6f0de78b9e125bb8236", "committedDate": "2020-03-08T12:04:23Z", "message": "Add changes proposed in the PR and to refactor code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a94b3b875d5738c0c5c5b105fe8fcfa4011deffc", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a94b3b875d5738c0c5c5b105fe8fcfa4011deffc", "committedDate": "2020-03-08T12:36:13Z", "message": "Resolve conflicts between branches"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxMDkyOTc3", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-371092977", "createdAt": "2020-03-09T11:37:09Z", "commit": {"oid": "a94b3b875d5738c0c5c5b105fe8fcfa4011deffc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQxMTozNzowOVrOFzjq2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQxMTozNzowOVrOFzjq2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTYwNjEwNw==", "bodyText": "Do we need to add greenmail as an implementation dependency? we only use this for testing.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r389606107", "createdAt": "2020-03-09T11:37:09Z", "author": {"login": "daneshk"}, "path": "stdlib/email/build.gradle", "diffHunk": "@@ -0,0 +1,69 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ *\n+ */\n+\n+apply from: \"$rootDir/gradle/balNativeLibProject.gradle\"\n+apply from: \"$rootDir/gradle/baseNativeStdLibProject.gradle\"\n+\n+configurations.testCompileClasspath {\n+    resolutionStrategy {\n+        preferProjectModules()\n+    }\n+}\n+\n+dependencies {\n+    baloCreat project(':lib-creator')\n+    implementation project(':ballerina-lang')\n+    implementation project(':ballerina-runtime')\n+    implementation project(':ballerina-time')\n+    implementation project(':ballerina-log-api')\n+    implementation project(':ballerina-file')\n+    implementation 'com.sun.mail:javax.mail:1.6.2'\n+    implementation 'com.icegreen:greenmail:1.5.11'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a94b3b875d5738c0c5c5b105fe8fcfa4011deffc"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxNjcxOTg2", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-371671986", "createdAt": "2020-03-10T04:13:12Z", "commit": {"oid": "a94b3b875d5738c0c5c5b105fe8fcfa4011deffc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwNDoxMzoxM1rOF0A_YQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwNDoxMzoxM1rOF0A_YQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4NjQ5Nw==", "bodyText": "Shall we use the most simple client (without this config) for the basic use case? We can specify the config details in the latter as more details. WDYT?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r390086497", "createdAt": "2020-03-10T04:13:13Z", "author": {"login": "wggihan"}, "path": "stdlib/email/src/main/ballerina/src/email/Module.md", "diffHunk": "@@ -0,0 +1,97 @@\n+## Module overview\n+\n+This module contains functions to perform email operations such as sending and reading emails using SMTP, POP3, and IMAP4 protocols.\n+\n+## Sample\n+\n+The below sample uses the functions in the module to send an email using the SMTP protocol.\n+\n+```ballerina\n+import ballerina/email;\n+import ballerina/io;\n+\n+email:SmtpConfig smtpConfig = {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a94b3b875d5738c0c5c5b105fe8fcfa4011deffc"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxNjcyODI2", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-371672826", "createdAt": "2020-03-10T04:16:46Z", "commit": {"oid": "a94b3b875d5738c0c5c5b105fe8fcfa4011deffc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwNDoxNjo0NlrOF0BCbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwNDoxNjo0NlrOF0BCbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4NzI3OA==", "bodyText": "Do we have a concept of a store in our email connector?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r390087278", "createdAt": "2020-03-10T04:16:46Z", "author": {"login": "wggihan"}, "path": "stdlib/email/src/main/ballerina/src/email/email_errors.bal", "diffHunk": "@@ -0,0 +1,42 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Record type to hold the details of an error.\n+#\n+# + message - Specific error message of the error.\n+# + cause - Any other error, which causes this error.\n+public type Detail record {\n+    string message;\n+    error cause?;\n+};\n+\n+# SMTP email send error.\n+public const EMAIL_SEND_ERROR = \"{ballerina/email}EmailSendError\";\n+# Represents an error that occurs when sending an email fails.\n+public type EmailSendError error<EMAIL_SEND_ERROR, Detail>;\n+\n+# Identifies an email server store access failure error.\n+public const GET_STORE_ERROR = \"{ballerina/email}GetStoreError\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a94b3b875d5738c0c5c5b105fe8fcfa4011deffc"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxNzA3MjMw", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-371707230", "createdAt": "2020-03-10T06:35:20Z", "commit": {"oid": "a94b3b875d5738c0c5c5b105fe8fcfa4011deffc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwNjozNToyMFrOF0C39w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwNjozNToyMFrOF0C39w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDExNzM2Nw==", "bodyText": "Shall we consolidate this to a single line?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r390117367", "createdAt": "2020-03-10T06:35:20Z", "author": {"login": "wggihan"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/client/EmailAccessClient.java", "diffHunk": "@@ -0,0 +1,140 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.client;\n+\n+import org.ballerinalang.jvm.BallerinaErrors;\n+import org.ballerinalang.jvm.StringUtils;\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.ballerinalang.jvm.values.ObjectValue;\n+import org.ballerinalang.stdlib.email.util.EmailAccessUtil;\n+import org.ballerinalang.stdlib.email.util.EmailConstants;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.util.Properties;\n+\n+import javax.mail.Folder;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.NoSuchProviderException;\n+import javax.mail.Session;\n+import javax.mail.Store;\n+\n+/**\n+ * Contains the functionality of email reading with POP and IMAP clients.\n+ *\n+ * @since 1.2.0\n+ */\n+public class EmailAccessClient {\n+\n+    private static final Logger log = LoggerFactory.getLogger(EmailAccessClient.class);\n+\n+    private EmailAccessClient() {\n+        // A Singleton class.\n+    }\n+\n+    /**\n+     * Initializes the ObjectValue object with the POP properties.\n+     * @param clientEndpoint Represents the POP Client class\n+     * @param host Represents the host address of POP server\n+     * @param username Represents the username of the POP server\n+     * @param password Represents the password of the POP server\n+     * @param config Properties required to configure the POP session\n+     * @return If an error occurs in the POP client, returns an error\n+     */\n+    public static Object initPopClientEndpoint(ObjectValue clientEndpoint, String host, String username,\n+                                               String password, MapValue<Object, Object> config) {\n+        Properties properties = EmailAccessUtil.getPopProperties(config, host);\n+        Session session = Session.getInstance(properties, null);\n+        try {\n+            Store store;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a94b3b875d5738c0c5c5b105fe8fcfa4011deffc"}, "originalPosition": 67}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxNzEwMjUy", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-371710252", "createdAt": "2020-03-10T06:45:22Z", "commit": {"oid": "a94b3b875d5738c0c5c5b105fe8fcfa4011deffc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwNjo0NToyMlrOF0DBZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwNjo0NToyMlrOF0DBZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDExOTc4MQ==", "bodyText": "IMO, we can move these to another smaller methods as well.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r390119781", "createdAt": "2020-03-10T06:45:22Z", "author": {"login": "wggihan"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/EmailAccessUtil.java", "diffHunk": "@@ -0,0 +1,175 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+import com.sun.mail.imap.IMAPMessage;\n+import com.sun.mail.pop3.POP3Message;\n+import org.ballerinalang.jvm.BallerinaValues;\n+import org.ballerinalang.jvm.types.BArrayType;\n+import org.ballerinalang.jvm.types.BTypes;\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.ballerinalang.jvm.values.api.BArray;\n+import org.ballerinalang.jvm.values.api.BValueCreator;\n+\n+import java.io.IOException;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Properties;\n+\n+import javax.mail.Address;\n+import javax.mail.BodyPart;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.internet.MimeMultipart;\n+\n+/**\n+ * Contains utility functions related to the POP and IMAP protocols.\n+ *\n+ * @since 1.2.0\n+ */\n+public class EmailAccessUtil {\n+\n+    /**\n+     * Generates Properties object using the passed MapValue.\n+     *\n+     * @param emailAccessConfig MapValue with the configuration values\n+     * @param host Host address of email server\n+     * @return Properties Email server access properties\n+     */\n+    public static Properties getPopProperties(MapValue emailAccessConfig, String host) {\n+        Properties properties = new Properties();\n+        properties.put(EmailConstants.PROPS_POP_HOST, host);\n+        properties.put(EmailConstants.PROPS_POP_PORT,\n+                Long.toString(emailAccessConfig.getIntValue(EmailConstants.PROPS_PORT)));\n+        properties.put(EmailConstants.PROPS_POP_AUTH, \"true\");\n+        properties.put(EmailConstants.PROPS_POP_STARTTLS, \"true\");\n+        properties.put(EmailConstants.PROPS_POP_SSL_ENABLE,\n+                emailAccessConfig.getBooleanValue(EmailConstants.PROPS_SSL));\n+        properties.put(EmailConstants.MAIL_STORE_PROTOCOL, EmailConstants.POP_PROTOCOL);\n+        return properties;\n+    }\n+\n+    /**\n+     * Generates Properties object using the passed MapValue.\n+     *\n+     * @param emailAccessConfig MapValue with the configuration values\n+     * @param host Host address of email server\n+     * @return Properties Email server access properties\n+     */\n+    public static Properties getImapProperties(MapValue emailAccessConfig, String host) {\n+        Properties properties = new Properties();\n+        properties.put(EmailConstants.PROPS_IMAP_HOST, host);\n+        properties.put(EmailConstants.PROPS_IMAP_PORT,\n+                Long.toString(emailAccessConfig.getIntValue(EmailConstants.PROPS_PORT)));\n+        properties.put(EmailConstants.PROPS_IMAP_AUTH, \"true\");\n+        properties.put(EmailConstants.PROPS_IMAP_STARTTLS, \"true\");\n+        properties.put(EmailConstants.PROPS_IMAP_SSL_ENABLE,\n+                emailAccessConfig.getBooleanValue(EmailConstants.PROPS_SSL));\n+        properties.put(EmailConstants.MAIL_STORE_PROTOCOL, EmailConstants.IMAP_PROTOCOL);\n+        return properties;\n+    }\n+\n+    /**\n+     * Generates MapValue object using the passed message.\n+     *\n+     * @param message Email message received\n+     * @return MapValue Ballerina compatible map object\n+     * @throws MessagingException If an error occurs related to messaging\n+     * @throws IOException If an error occurs related to I/O\n+     */\n+    public static MapValue getMapValue(Message message) throws MessagingException, IOException {\n+        Map<String, Object> valueMap = new HashMap<>();\n+        BArray toAddressArrayValue = getAddressBArrayList(message.getRecipients(Message.RecipientType.TO));\n+        BArray ccAddressArrayValue = getAddressBArrayList(message.getRecipients(Message.RecipientType.CC));\n+        BArray bccAddressArrayValue = getAddressBArrayList(message.getRecipients(Message.RecipientType.BCC));\n+        BArray replyToAddressArrayValue = getAddressBArrayList(message.getReplyTo());\n+        String subject = getStringNullChecked(message.getSubject());\n+        String messageBody = \"\";\n+        if (message.isMimeType(\"text/plain\")) {\n+            if (message.getContent() != null) {\n+                messageBody = message.getContent().toString();\n+            }\n+        } else if (message.isMimeType(\"multipart/*\")) {\n+            MimeMultipart mimeMultipart = (MimeMultipart) message.getContent();\n+            messageBody = getTextFromMimeMultipart(mimeMultipart);\n+        }\n+        String fromAddress = \"\";\n+        if (message.getFrom() != null) {\n+            fromAddress = message.getFrom()[0].toString();\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a94b3b875d5738c0c5c5b105fe8fcfa4011deffc"}, "originalPosition": 115}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxNzE0NTM4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-371714538", "createdAt": "2020-03-10T06:59:18Z", "commit": {"oid": "a94b3b875d5738c0c5c5b105fe8fcfa4011deffc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwNjo1OToxOFrOF0DPfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwNjo1OToxOFrOF0DPfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDEyMzM4OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            public const DEFAULT_FOLDER = \"INBOX\";\n          \n          \n            \n            public const DEFAULT_FOLDER = \"INBOX\";", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r390123388", "createdAt": "2020-03-10T06:59:18Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/ballerina/src/email/commons.bal", "diffHunk": "@@ -0,0 +1,39 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Email message sending and receiving configurations.\n+#\n+# + to - TO address list\n+# + cc - CC address list\n+# + bcc - BCC address list\n+# + subject - Subject of email\n+# + body - Body of the email message\n+# + from - From address\n+# + sender - Sender's address\n+# + replyTo - Reply To addresses\n+public type Email record {|\n+    string[] to;\n+    string[] cc?;\n+    string[] bcc?;\n+    string subject;\n+    string body;\n+    string 'from;\n+    string sender?;\n+    string[] replyTo?;\n+|};\n+\n+# Default email folder to read emails.\n+public const DEFAULT_FOLDER = \"INBOX\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a94b3b875d5738c0c5c5b105fe8fcfa4011deffc"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxNzE2MjU4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-371716258", "createdAt": "2020-03-10T07:04:26Z", "commit": {"oid": "a94b3b875d5738c0c5c5b105fe8fcfa4011deffc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwNzowNDoyNlrOF0DU1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQwNzowNDoyNlrOF0DU1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDEyNDc1Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        Store store;\n          \n          \n            \n                        store = session.getStore(EmailConstants.IMAP_PROTOCOL);\n          \n          \n            \n                        Store store = session.getStore(EmailConstants.IMAP_PROTOCOL);", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r390124757", "createdAt": "2020-03-10T07:04:26Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/client/EmailAccessClient.java", "diffHunk": "@@ -0,0 +1,140 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.client;\n+\n+import org.ballerinalang.jvm.BallerinaErrors;\n+import org.ballerinalang.jvm.StringUtils;\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.ballerinalang.jvm.values.ObjectValue;\n+import org.ballerinalang.stdlib.email.util.EmailAccessUtil;\n+import org.ballerinalang.stdlib.email.util.EmailConstants;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.util.Properties;\n+\n+import javax.mail.Folder;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.NoSuchProviderException;\n+import javax.mail.Session;\n+import javax.mail.Store;\n+\n+/**\n+ * Contains the functionality of email reading with POP and IMAP clients.\n+ *\n+ * @since 1.2.0\n+ */\n+public class EmailAccessClient {\n+\n+    private static final Logger log = LoggerFactory.getLogger(EmailAccessClient.class);\n+\n+    private EmailAccessClient() {\n+        // A Singleton class.\n+    }\n+\n+    /**\n+     * Initializes the ObjectValue object with the POP properties.\n+     * @param clientEndpoint Represents the POP Client class\n+     * @param host Represents the host address of POP server\n+     * @param username Represents the username of the POP server\n+     * @param password Represents the password of the POP server\n+     * @param config Properties required to configure the POP session\n+     * @return If an error occurs in the POP client, returns an error\n+     */\n+    public static Object initPopClientEndpoint(ObjectValue clientEndpoint, String host, String username,\n+                                               String password, MapValue<Object, Object> config) {\n+        Properties properties = EmailAccessUtil.getPopProperties(config, host);\n+        Session session = Session.getInstance(properties, null);\n+        try {\n+            Store store;\n+            store = session.getStore(EmailConstants.POP_PROTOCOL);\n+            clientEndpoint.addNativeData(EmailConstants.PROPS_STORE, store);\n+            clientEndpoint.addNativeData(EmailConstants.PROPS_HOST, host);\n+            clientEndpoint.addNativeData(EmailConstants.PROPS_USERNAME, username);\n+            clientEndpoint.addNativeData(EmailConstants.PROPS_PASSWORD, password);\n+            return null;\n+        } catch (NoSuchProviderException e) {\n+            log.error(\"Failed initialize client properties : \", e);\n+            return BallerinaErrors.createError(StringUtils.fromString(\n+                    EmailConstants.EMAIL_ACCESS_GET_STORE_ERROR), e.getMessage());\n+        }\n+    }\n+\n+    /**\n+     * Initializes the ObjectValue object with the IMAP properties.\n+     * @param clientEndpoint Represents the IMAP Client class\n+     * @param host Represents the host address of IMAP server\n+     * @param username Represents the username of the IMAP server\n+     * @param password Represents the password of the IMAP server\n+     * @param config Properties required to configure the IMAP session\n+     * @return If an error occurs in the IMAP client, returns an error\n+     */\n+    public static Object initImapClientEndpoint(ObjectValue clientEndpoint, String host, String username,\n+                                               String password, MapValue<Object, Object> config) {\n+        Properties properties = EmailAccessUtil.getImapProperties(config, host);\n+        Session session = Session.getInstance(properties, null);\n+        try {\n+            Store store;\n+            store = session.getStore(EmailConstants.IMAP_PROTOCOL);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a94b3b875d5738c0c5c5b105fe8fcfa4011deffc"}, "originalPosition": 96}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77fa70f1687b2086a788c357da64b5bf0b01b6bf", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/77fa70f1687b2086a788c357da64b5bf0b01b6bf", "committedDate": "2020-03-10T09:57:14Z", "message": "Fix issues identified in a code review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e6db61d7d049161664b99b1b3549611c250a584", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3e6db61d7d049161664b99b1b3549611c250a584", "committedDate": "2020-03-10T10:09:18Z", "message": "Add new line character at the end of the file"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyNDQ3NDY1", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-372447465", "createdAt": "2020-03-11T02:56:56Z", "commit": {"oid": "3e6db61d7d049161664b99b1b3549611c250a584"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMjo1Njo1N1rOF0ns3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwMjo1Njo1N1rOF0ns3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDcyMDczMw==", "bodyText": "Shall we change this to ClientInitError?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r390720733", "createdAt": "2020-03-11T02:56:57Z", "author": {"login": "daneshk"}, "path": "stdlib/email/src/main/ballerina/src/email/email_errors.bal", "diffHunk": "@@ -0,0 +1,42 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Record type to hold the details of an error.\n+#\n+# + message - Specific error message of the error.\n+# + cause - Any other error, which causes this error.\n+public type Detail record {\n+    string message;\n+    error cause?;\n+};\n+\n+# SMTP email send error.\n+public const SEND_ERROR = \"{ballerina/email}SendError\";\n+# Represents an error that occurs when sending an email fails.\n+public type SendError error<SEND_ERROR, Detail>;\n+\n+# Identifies an email server store access failure error.\n+public const READ_CLIENT_INIT_ERROR = \"{ballerina/email}ReadClientInitError\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3e6db61d7d049161664b99b1b3549611c250a584"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "587a694cf427770e7af86613c47f2aa9d02dc9d4", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/587a694cf427770e7af86613c47f2aa9d02dc9d4", "committedDate": "2020-03-11T06:14:59Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into email2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74c8018bbb1c2087c33324206f1d804d89f6ba7e", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/74c8018bbb1c2087c33324206f1d804d89f6ba7e", "committedDate": "2020-03-11T06:54:56Z", "message": "Fix language server issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyNjM0ODg1", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-372634885", "createdAt": "2020-03-11T10:27:56Z", "commit": {"oid": "74c8018bbb1c2087c33324206f1d804d89f6ba7e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed94f0aae3e2be3e4c45833b5ad502179129bbf6", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ed94f0aae3e2be3e4c45833b5ad502179129bbf6", "committedDate": "2020-02-28T05:07:00Z", "message": "Implement https://github.com/ballerina-platform/ballerina-lang/issues/21179 for developing Email Connector."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "213563149712983bfc13b7ee63a88e48648720d7", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/213563149712983bfc13b7ee63a88e48648720d7", "committedDate": "2020-02-28T05:27:07Z", "message": "Resolve merge conflicts in  https://github.com/ballerina-platform/ballerina-lang/issues/21179 for developing Email Connector."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "036996fec7841509fee2d39cd46107ff2c8377f4", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/036996fec7841509fee2d39cd46107ff2c8377f4", "committedDate": "2020-02-28T05:45:47Z", "message": "Removed unwanted files."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1104373f2b8beb799886ad0fc618809d0d3a213b", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1104373f2b8beb799886ad0fc618809d0d3a213b", "committedDate": "2020-02-28T05:56:05Z", "message": "Corrected merge errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c84cc9b68e836ad7af72296b005754fbc02a6e1", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4c84cc9b68e836ad7af72296b005754fbc02a6e1", "committedDate": "2020-02-28T06:14:54Z", "message": "Fix some code format issues."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/63df7d30118d1066147ba44cb94e949f04fe05a8", "committedDate": "2020-02-28T07:08:27Z", "message": "Fixed doc generation issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjI4NTE4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366228518", "createdAt": "2020-02-28T08:31:13Z", "commit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozMToxNFrOFvtAcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozMToxNFrOFvtAcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NDc4Ng==", "bodyText": "Shall we remove this commented line?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385564786", "createdAt": "2020-02-28T08:31:14Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/ballerina/src/email/smtp_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an SMTP Client that interacts with an SMTP Server\n+public type SmtpClient client object {\n+\n+    # Gets invoked during object initialization\n+    #\n+    # + clientConfig - Configurations for SMTP Client\n+    public function __init(SmtpConfig clientConfig) {\n+        error? response = initSmtpClientEndpoint(self, clientConfig);\n+    }\n+\n+    # Used to send a message\n+    #\n+    # + email - String message\n+    # + return - An `error` if failed to send the message to the recipient\n+    public remote function send(Email email) returns error? {\n+        return send(self, email);\n+    }\n+\n+};\n+\n+# Configuration of the SMTP Endpoint\n+#\n+# + host - Host address of SMTP server\n+# + port - Port number of SMTP server\n+# + username - Username to access SMTP server\n+# + password - Password to access SMTP server\n+public type SmtpConfig record {|\n+    //ConnectionConfig? connConfig = ();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 44}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjI4NzYx", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366228761", "createdAt": "2020-02-28T08:31:44Z", "commit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozMTo0NFrOFvtBSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozMTo0NFrOFvtBSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NTAwMQ==", "bodyText": "Suggested change", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385565001", "createdAt": "2020-02-28T08:31:44Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/client/PopClient.java", "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.client;\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjI4ODc1", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366228875", "createdAt": "2020-02-28T08:31:58Z", "commit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozMTo1OFrOFvtBnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozMTo1OFrOFvtBnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NTA4NQ==", "bodyText": "Suggested change", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385565085", "createdAt": "2020-02-28T08:31:58Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/client/PopClient.java", "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.client;\n+\n+\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.ballerinalang.jvm.values.ObjectValue;\n+import org.ballerinalang.stdlib.email.util.BallerinaPopException;\n+import org.ballerinalang.stdlib.email.util.ImapConstants;\n+import org.ballerinalang.stdlib.email.util.PopConstants;\n+import org.ballerinalang.stdlib.email.util.PopUtil;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.util.Properties;\n+\n+import javax.mail.Folder;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.NoSuchProviderException;\n+import javax.mail.Session;\n+import javax.mail.Store;\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjI5NDA2", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366229406", "createdAt": "2020-02-28T08:32:58Z", "commit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozMjo1OFrOFvtDKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozMjo1OFrOFvtDKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NTQ4MQ==", "bodyText": "Suggested change", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385565481", "createdAt": "2020-02-28T08:32:58Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/client/SmtpClient.java", "diffHunk": "@@ -0,0 +1,91 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.client;\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjI5NDk4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366229498", "createdAt": "2020-02-28T08:33:09Z", "commit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozMzowOVrOFvtDbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozMzowOVrOFvtDbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NTU0OQ==", "bodyText": "Suggested change", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385565549", "createdAt": "2020-02-28T08:33:09Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/client/SmtpClient.java", "diffHunk": "@@ -0,0 +1,91 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.client;\n+\n+\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.ballerinalang.jvm.values.ObjectValue;\n+import org.ballerinalang.stdlib.email.util.BallerinaSmtpException;\n+import org.ballerinalang.stdlib.email.util.SmtpConstants;\n+import org.ballerinalang.stdlib.email.util.SmtpUtil;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.Properties;\n+\n+import javax.mail.MessagingException;\n+import javax.mail.PasswordAuthentication;\n+import javax.mail.Session;\n+import javax.mail.Transport;\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjI5NzA1", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366229705", "createdAt": "2020-02-28T08:33:32Z", "commit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozMzozM1rOFvtEEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozMzozM1rOFvtEEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NTcxNA==", "bodyText": "Suggested change", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385565714", "createdAt": "2020-02-28T08:33:33Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/service/compiler/EmailListenerCompilerPlugin.java", "diffHunk": "@@ -0,0 +1,37 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.service.compiler;\n+\n+import org.ballerinalang.compiler.plugins.AbstractCompilerPlugin;\n+import org.ballerinalang.util.diagnostic.DiagnosticLog;\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjI5Nzgx", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366229781", "createdAt": "2020-02-28T08:33:41Z", "commit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozMzo0MlrOFvtEUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozMzo0MlrOFvtEUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NTc3OA==", "bodyText": "Suggested change", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385565778", "createdAt": "2020-02-28T08:33:42Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/service/compiler/EmailListenerCompilerPlugin.java", "diffHunk": "@@ -0,0 +1,37 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.service.compiler;\n+\n+import org.ballerinalang.compiler.plugins.AbstractCompilerPlugin;\n+import org.ballerinalang.util.diagnostic.DiagnosticLog;\n+\n+\n+/**\n+ * This class validates annotations attached to Ballerina service and resource nodes.\n+ *\n+ * @since 1.1.3\n+ */\n+class EmailListenerCompilerPlugin extends AbstractCompilerPlugin {\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjMwMDQ5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366230049", "createdAt": "2020-02-28T08:34:16Z", "commit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozNDoxNlrOFvtFLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozNDoxNlrOFvtFLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NTk5OA==", "bodyText": "Suggested change", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385565998", "createdAt": "2020-02-28T08:34:16Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/EmailConstants.java", "diffHunk": "@@ -0,0 +1,52 @@\n+ /*\n+  * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+  *\n+  * WSO2 Inc. licenses this file to you under the Apache License,\n+  * Version 2.0 (the \"License\"); you may not use this file except\n+  * in compliance with the License.\n+  * You may obtain a copy of the License at\n+  *\n+  *   http://www.apache.org/licenses/LICENSE-2.0\n+  *\n+  * Unless required by applicable law or agreed to in writing,\n+  * software distributed under the License is distributed on an\n+  * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+  * KIND, either express or implied.  See the License for the\n+  * specific language governing permissions and limitations\n+  * under the License.\n+  */\n+\n+ package org.ballerinalang.stdlib.email.util;\n+\n+ import org.ballerinalang.jvm.types.BPackage;\n+\n+ import static org.ballerinalang.jvm.util.BLangConstants.BALLERINA_BUILTIN_PKG_PREFIX;\n+\n+ /**\n+  * Constants for email package functions.\n+  *\n+  * @since 1.1.3\n+  */\n+ public class EmailConstants {\n+\n+     /**\n+      * Package path.\n+      */\n+     public static final BPackage EMAIL_PACKAGE_ID = new BPackage(BALLERINA_BUILTIN_PKG_PREFIX, \"email\");\n+\n+     public static final String MESSAGE_TO = \"to\";\n+     public static final String MESSAGE_CC = \"cc\";\n+     public static final String MESSAGE_BCC = \"bcc\";\n+     public static final String MESSAGE_SUBJECT = \"subject\";\n+     public static final String MESSAGE_MESSAGE_BODY = \"body\";\n+     public static final String MESSAGE_FROM = \"from\";\n+     public static final String MESSAGE_SENDER = \"sender\";\n+     public static final String MESSAGE_REPLY_TO = \"replyTo\";\n+\n+     public static final String MAIL_STORE_PROTOCOL = \"mail.store.protocol\";\n+\n+ }\n+\n+\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 52}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjMwMjA5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366230209", "createdAt": "2020-02-28T08:34:37Z", "commit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozNDozN1rOFvtFoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozNDozN1rOFvtFoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NjExMg==", "bodyText": "Suggested change", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385566112", "createdAt": "2020-02-28T08:34:37Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/ImapConstants.java", "diffHunk": "@@ -0,0 +1,39 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+/**\n+ * Constants for IMAP related functions.\n+ *\n+ * @since 1.1.3\n+ */\n+public class ImapConstants {\n+    public static final String DEFAULT_PORT_NUMBER = \"143\";\n+    public static final String IMAP_PROTOCOL = \"imap\";\n+    public static final String PROPS_IMAP_HOST = \"mail.imap.host\";\n+    public static final String PROPS_IMAP_PORT = \"mail.imap.port\";\n+    public static final String PROPS_IMAP_STARTTLS = \"mail.imap.starttls.enable\";\n+    public static final String PROPS_IMAP_AUTH = \"mail.imap.auth\";\n+\n+    private ImapConstants() {\n+        // private constructor\n+    }\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjMwMjky", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366230292", "createdAt": "2020-02-28T08:34:46Z", "commit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozNDo0NlrOFvtF4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozNDo0NlrOFvtF4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NjE3Nw==", "bodyText": "Suggested change", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385566177", "createdAt": "2020-02-28T08:34:46Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/PopConstants.java", "diffHunk": "@@ -0,0 +1,47 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+/**\n+ * Constants for POP3 related functions.\n+ *\n+ * @since 1.1.3\n+ */\n+public class PopConstants {\n+    public static final String DEFAULT_PORT_NUMBER = \"995\";\n+    public static final String PROPS_HOST = \"host\";\n+    public static final String PROPS_PORT = \"port\";\n+    public static final String PROPS_USERNAME = \"username\";\n+    public static final String PROPS_PASSWORD = \"password\";\n+    public static final String PROPS_STORE = \"store\";\n+    public static final String POP_PROTOCOL = \"pop3\";\n+    public static final String PROPS_FILTER_FOLDER = \"folder\";\n+    public static final String PROPS_POP_HOST = \"mail.pop3.host\";\n+    public static final String PROPS_POP_PORT = \"mail.pop3.port\";\n+    public static final String PROPS_POP_AUTH = \"mail.pop.auth\";\n+    public static final String PROPS_POP_STARTTLS = \"mail.pop3.starttls.enable\";\n+\n+    static final String EMAIL = \"Email\";\n+\n+    private PopConstants() {\n+        // private constructor\n+    }\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 46}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjMxMTcw", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366231170", "createdAt": "2020-02-28T08:36:33Z", "commit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozNjozM1rOFvtIlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozNjozM1rOFvtIlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2Njg2OA==", "bodyText": "Suggested change", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385566868", "createdAt": "2020-02-28T08:36:33Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/PopUtil.java", "diffHunk": "@@ -0,0 +1,210 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+import org.ballerinalang.jvm.BallerinaValues;\n+import org.ballerinalang.jvm.types.BArrayType;\n+import org.ballerinalang.jvm.types.BTypes;\n+import org.ballerinalang.jvm.values.ArrayValue;\n+import org.ballerinalang.jvm.values.ArrayValueImpl;\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Properties;\n+\n+import javax.mail.Address;\n+import javax.mail.BodyPart;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.internet.MimeMultipart;\n+\n+/**\n+ * Contains Utility functions related to POP3 protocol.\n+ */\n+public class PopUtil {\n+\n+    private static final Logger log = LoggerFactory.getLogger(PopUtil.class);\n+    private static final int MAX_PORT = 65535;\n+\n+    /**\n+     * Generates Properties object using the passed MapValue.\n+     *\n+     * @param popConfig MapValue with the configuration values\n+     * @param isPop True if the protocol is POP3 and false otherwise (if protocol is IMAP)\n+     * @return Properties object\n+     */\n+    public static Properties getProperties(MapValue popConfig, boolean isPop) {\n+        log.debug(\"[PopUtil][getProperties] Extracting Property values from Config\");\n+        Properties properties = new Properties();\n+        if (isPop) {\n+            properties.put(PopConstants.PROPS_POP_HOST, popConfig.getStringValue(PopConstants.PROPS_HOST));\n+            properties.put(PopConstants.PROPS_POP_PORT,\n+                    extractPortValue(popConfig.getIntValue(PopConstants.PROPS_PORT), isPop));\n+            properties.put(PopConstants.PROPS_POP_AUTH, \"true\");\n+            properties.put(PopConstants.PROPS_POP_STARTTLS, \"true\");\n+            properties.put(EmailConstants.MAIL_STORE_PROTOCOL, PopConstants.POP_PROTOCOL);\n+        } else {\n+            properties.put(ImapConstants.PROPS_IMAP_HOST, popConfig.getStringValue(PopConstants.PROPS_HOST));\n+            properties.put(ImapConstants.PROPS_IMAP_PORT,\n+                    extractPortValue(popConfig.getIntValue(PopConstants.PROPS_PORT), isPop));\n+            properties.put(ImapConstants.PROPS_IMAP_AUTH, \"true\");\n+            properties.put(ImapConstants.PROPS_IMAP_STARTTLS, \"true\");\n+            properties.put(EmailConstants.MAIL_STORE_PROTOCOL, ImapConstants.IMAP_PROTOCOL);\n+        }\n+\n+        properties.put(PopConstants.PROPS_USERNAME, popConfig.getStringValue(PopConstants.PROPS_USERNAME));\n+        properties.put(PopConstants.PROPS_PASSWORD, popConfig.getStringValue(PopConstants.PROPS_PASSWORD));\n+\n+        log.debug(\"[PopUtil][getProperties] Property object created. Returning Object to PopClient\");\n+        return properties;\n+    }\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 82}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjMxMzAx", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366231301", "createdAt": "2020-02-28T08:36:47Z", "commit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozNjo0N1rOFvtJCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozNjo0N1rOFvtJCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2Njk4NQ==", "bodyText": "Suggested change", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385566985", "createdAt": "2020-02-28T08:36:47Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/PopUtil.java", "diffHunk": "@@ -0,0 +1,210 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+import org.ballerinalang.jvm.BallerinaValues;\n+import org.ballerinalang.jvm.types.BArrayType;\n+import org.ballerinalang.jvm.types.BTypes;\n+import org.ballerinalang.jvm.values.ArrayValue;\n+import org.ballerinalang.jvm.values.ArrayValueImpl;\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Properties;\n+\n+import javax.mail.Address;\n+import javax.mail.BodyPart;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.internet.MimeMultipart;\n+\n+/**\n+ * Contains Utility functions related to POP3 protocol.\n+ */\n+public class PopUtil {\n+\n+    private static final Logger log = LoggerFactory.getLogger(PopUtil.class);\n+    private static final int MAX_PORT = 65535;\n+\n+    /**\n+     * Generates Properties object using the passed MapValue.\n+     *\n+     * @param popConfig MapValue with the configuration values\n+     * @param isPop True if the protocol is POP3 and false otherwise (if protocol is IMAP)\n+     * @return Properties object\n+     */\n+    public static Properties getProperties(MapValue popConfig, boolean isPop) {\n+        log.debug(\"[PopUtil][getProperties] Extracting Property values from Config\");\n+        Properties properties = new Properties();\n+        if (isPop) {\n+            properties.put(PopConstants.PROPS_POP_HOST, popConfig.getStringValue(PopConstants.PROPS_HOST));\n+            properties.put(PopConstants.PROPS_POP_PORT,\n+                    extractPortValue(popConfig.getIntValue(PopConstants.PROPS_PORT), isPop));\n+            properties.put(PopConstants.PROPS_POP_AUTH, \"true\");\n+            properties.put(PopConstants.PROPS_POP_STARTTLS, \"true\");\n+            properties.put(EmailConstants.MAIL_STORE_PROTOCOL, PopConstants.POP_PROTOCOL);\n+        } else {\n+            properties.put(ImapConstants.PROPS_IMAP_HOST, popConfig.getStringValue(PopConstants.PROPS_HOST));\n+            properties.put(ImapConstants.PROPS_IMAP_PORT,\n+                    extractPortValue(popConfig.getIntValue(PopConstants.PROPS_PORT), isPop));\n+            properties.put(ImapConstants.PROPS_IMAP_AUTH, \"true\");\n+            properties.put(ImapConstants.PROPS_IMAP_STARTTLS, \"true\");\n+            properties.put(EmailConstants.MAIL_STORE_PROTOCOL, ImapConstants.IMAP_PROTOCOL);\n+        }\n+\n+        properties.put(PopConstants.PROPS_USERNAME, popConfig.getStringValue(PopConstants.PROPS_USERNAME));\n+        properties.put(PopConstants.PROPS_PASSWORD, popConfig.getStringValue(PopConstants.PROPS_PASSWORD));\n+\n+        log.debug(\"[PopUtil][getProperties] Property object created. Returning Object to PopClient\");\n+        return properties;\n+    }\n+\n+\n+    /**\n+     * Generates MapValue object using the passed Message.\n+     *\n+     * @param message received\n+     * @return MapValue object\n+     * @throws MessagingException If an error occurs related to messaging\n+     * @throws IOException If an error occurs related to I/O\n+     */\n+    public static MapValue getMapValue(Message message) throws MessagingException, IOException {\n+        log.debug(\"[PopUtil][getMapValue] Extracting MapValue values from Config\");\n+        Map<String, Object> valueMap = new HashMap<>();\n+        Address[] toAddress = message.getRecipients(Message.RecipientType.TO);\n+        Address[] ccAddress = message.getRecipients(Message.RecipientType.CC);\n+        Address[] bccAddress = message.getRecipients(Message.RecipientType.BCC);\n+        Address[] replyToAddress = message.getReplyTo();\n+        int toAddressArrayLength = getNullArrayLengthChecked(toAddress);\n+        int ccAddressArrayLength = getNullArrayLengthChecked(ccAddress);\n+        int bccAddressArrayLength = getNullArrayLengthChecked(bccAddress);\n+        int replyToAddressArrayLength = getNullArrayLengthChecked(replyToAddress);\n+        ArrayValue toAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue ccAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue bccAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue replyToAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        for (int i = 0; i < toAddressArrayLength; i++) {\n+            toAddressArrayValue.add(i, toAddress[i].toString());\n+        }\n+        for (int i = 0; i < ccAddressArrayLength; i++) {\n+            ccAddressArrayValue.add(i, ccAddress[i].toString());\n+        }\n+        for (int i = 0; i < bccAddressArrayLength; i++) {\n+            bccAddressArrayValue.add(i, bccAddress[i].toString());\n+        }\n+        for (int i = 0; i < replyToAddressArrayLength; i++) {\n+            replyToAddressArrayValue.add(i, replyToAddress[i].toString());\n+        }\n+        String subject = getStringNullChecked(message.getSubject());\n+        String messageBody = \"\";\n+        if (message.isMimeType(\"text/plain\")) {\n+            if (message.getContent() != null) {\n+                messageBody = message.getContent().toString();\n+            } else {\n+                messageBody = \"\";\n+            }\n+        } else if (message.isMimeType(\"multipart/*\")) {\n+            MimeMultipart mimeMultipart = (MimeMultipart) message.getContent();\n+            messageBody = getTextFromMimeMultipart(mimeMultipart);\n+        }\n+        String fromAddress;\n+        if (message.getFrom() != null) {\n+            fromAddress = message.getFrom()[0].toString();\n+        } else {\n+            fromAddress = \"\";\n+        }\n+        String senderAddress = \"\";\n+        valueMap.put(EmailConstants.MESSAGE_TO, toAddressArrayValue);\n+        valueMap.put(EmailConstants.MESSAGE_CC, ccAddressArrayValue);\n+        valueMap.put(EmailConstants.MESSAGE_BCC, bccAddressArrayValue);\n+        valueMap.put(EmailConstants.MESSAGE_REPLY_TO, replyToAddressArrayValue);\n+        valueMap.put(EmailConstants.MESSAGE_SUBJECT, subject);\n+        valueMap.put(EmailConstants.MESSAGE_MESSAGE_BODY, messageBody);\n+        valueMap.put(EmailConstants.MESSAGE_FROM, fromAddress);\n+        valueMap.put(EmailConstants.MESSAGE_SENDER, senderAddress);\n+        log.debug(\"[PopUtil][getMapValue] MapValue object created. Returning Object to PopClient\");\n+        return BallerinaValues.createRecordValue(EmailConstants.EMAIL_PACKAGE_ID, PopConstants.EMAIL, valueMap);\n+    }\n+\n+    private static String getTextFromMimeMultipart(\n+            MimeMultipart mimeMultipart)  throws MessagingException, IOException {\n+        StringBuilder result = new StringBuilder();\n+        int count = mimeMultipart.getCount();\n+        for (int i = 0; i < count; i++) {\n+            BodyPart bodyPart = mimeMultipart.getBodyPart(i);\n+            if (bodyPart.isMimeType(\"text/plain\")) {\n+                result.append(\"\\n\").append(bodyPart.getContent());\n+                break; // without break same text appears twice in my tests\n+            } else if (bodyPart.isMimeType(\"text/html\")) {\n+                String html = (String) bodyPart.getContent();\n+                // result = result + \"\\n\" + org.jsoup.Jsoup.parse(html).text();\n+                result.append(\"\\n\").append(html);\n+            } else if (bodyPart.getContent() instanceof MimeMultipart) {\n+                result.append(getTextFromMimeMultipart((MimeMultipart) bodyPart.getContent()));\n+            }\n+        }\n+        return result.toString();\n+    }\n+\n+    private static String getStringNullChecked(String string) {\n+        if (string == null) {\n+            return \"\";\n+        } else {\n+            return string;\n+        }\n+    }\n+\n+    private static int getNullArrayLengthChecked(Address[] addresses) {\n+        if (addresses == null) {\n+            return 0;\n+        } else {\n+            return addresses.length;\n+        }\n+    }\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 185}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjMxMzkw", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366231390", "createdAt": "2020-02-28T08:36:59Z", "commit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozNjo1OVrOFvtJVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozNjo1OVrOFvtJVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NzA2Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \n          \n      \n    \n    \n  \n\nShall we remove the empty spaces in all the other places as well?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385567062", "createdAt": "2020-02-28T08:36:59Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/PopUtil.java", "diffHunk": "@@ -0,0 +1,210 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+import org.ballerinalang.jvm.BallerinaValues;\n+import org.ballerinalang.jvm.types.BArrayType;\n+import org.ballerinalang.jvm.types.BTypes;\n+import org.ballerinalang.jvm.values.ArrayValue;\n+import org.ballerinalang.jvm.values.ArrayValueImpl;\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Properties;\n+\n+import javax.mail.Address;\n+import javax.mail.BodyPart;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.internet.MimeMultipart;\n+\n+/**\n+ * Contains Utility functions related to POP3 protocol.\n+ */\n+public class PopUtil {\n+\n+    private static final Logger log = LoggerFactory.getLogger(PopUtil.class);\n+    private static final int MAX_PORT = 65535;\n+\n+    /**\n+     * Generates Properties object using the passed MapValue.\n+     *\n+     * @param popConfig MapValue with the configuration values\n+     * @param isPop True if the protocol is POP3 and false otherwise (if protocol is IMAP)\n+     * @return Properties object\n+     */\n+    public static Properties getProperties(MapValue popConfig, boolean isPop) {\n+        log.debug(\"[PopUtil][getProperties] Extracting Property values from Config\");\n+        Properties properties = new Properties();\n+        if (isPop) {\n+            properties.put(PopConstants.PROPS_POP_HOST, popConfig.getStringValue(PopConstants.PROPS_HOST));\n+            properties.put(PopConstants.PROPS_POP_PORT,\n+                    extractPortValue(popConfig.getIntValue(PopConstants.PROPS_PORT), isPop));\n+            properties.put(PopConstants.PROPS_POP_AUTH, \"true\");\n+            properties.put(PopConstants.PROPS_POP_STARTTLS, \"true\");\n+            properties.put(EmailConstants.MAIL_STORE_PROTOCOL, PopConstants.POP_PROTOCOL);\n+        } else {\n+            properties.put(ImapConstants.PROPS_IMAP_HOST, popConfig.getStringValue(PopConstants.PROPS_HOST));\n+            properties.put(ImapConstants.PROPS_IMAP_PORT,\n+                    extractPortValue(popConfig.getIntValue(PopConstants.PROPS_PORT), isPop));\n+            properties.put(ImapConstants.PROPS_IMAP_AUTH, \"true\");\n+            properties.put(ImapConstants.PROPS_IMAP_STARTTLS, \"true\");\n+            properties.put(EmailConstants.MAIL_STORE_PROTOCOL, ImapConstants.IMAP_PROTOCOL);\n+        }\n+\n+        properties.put(PopConstants.PROPS_USERNAME, popConfig.getStringValue(PopConstants.PROPS_USERNAME));\n+        properties.put(PopConstants.PROPS_PASSWORD, popConfig.getStringValue(PopConstants.PROPS_PASSWORD));\n+\n+        log.debug(\"[PopUtil][getProperties] Property object created. Returning Object to PopClient\");\n+        return properties;\n+    }\n+\n+\n+    /**\n+     * Generates MapValue object using the passed Message.\n+     *\n+     * @param message received\n+     * @return MapValue object\n+     * @throws MessagingException If an error occurs related to messaging\n+     * @throws IOException If an error occurs related to I/O\n+     */\n+    public static MapValue getMapValue(Message message) throws MessagingException, IOException {\n+        log.debug(\"[PopUtil][getMapValue] Extracting MapValue values from Config\");\n+        Map<String, Object> valueMap = new HashMap<>();\n+        Address[] toAddress = message.getRecipients(Message.RecipientType.TO);\n+        Address[] ccAddress = message.getRecipients(Message.RecipientType.CC);\n+        Address[] bccAddress = message.getRecipients(Message.RecipientType.BCC);\n+        Address[] replyToAddress = message.getReplyTo();\n+        int toAddressArrayLength = getNullArrayLengthChecked(toAddress);\n+        int ccAddressArrayLength = getNullArrayLengthChecked(ccAddress);\n+        int bccAddressArrayLength = getNullArrayLengthChecked(bccAddress);\n+        int replyToAddressArrayLength = getNullArrayLengthChecked(replyToAddress);\n+        ArrayValue toAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue ccAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue bccAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue replyToAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        for (int i = 0; i < toAddressArrayLength; i++) {\n+            toAddressArrayValue.add(i, toAddress[i].toString());\n+        }\n+        for (int i = 0; i < ccAddressArrayLength; i++) {\n+            ccAddressArrayValue.add(i, ccAddress[i].toString());\n+        }\n+        for (int i = 0; i < bccAddressArrayLength; i++) {\n+            bccAddressArrayValue.add(i, bccAddress[i].toString());\n+        }\n+        for (int i = 0; i < replyToAddressArrayLength; i++) {\n+            replyToAddressArrayValue.add(i, replyToAddress[i].toString());\n+        }\n+        String subject = getStringNullChecked(message.getSubject());\n+        String messageBody = \"\";\n+        if (message.isMimeType(\"text/plain\")) {\n+            if (message.getContent() != null) {\n+                messageBody = message.getContent().toString();\n+            } else {\n+                messageBody = \"\";\n+            }\n+        } else if (message.isMimeType(\"multipart/*\")) {\n+            MimeMultipart mimeMultipart = (MimeMultipart) message.getContent();\n+            messageBody = getTextFromMimeMultipart(mimeMultipart);\n+        }\n+        String fromAddress;\n+        if (message.getFrom() != null) {\n+            fromAddress = message.getFrom()[0].toString();\n+        } else {\n+            fromAddress = \"\";\n+        }\n+        String senderAddress = \"\";\n+        valueMap.put(EmailConstants.MESSAGE_TO, toAddressArrayValue);\n+        valueMap.put(EmailConstants.MESSAGE_CC, ccAddressArrayValue);\n+        valueMap.put(EmailConstants.MESSAGE_BCC, bccAddressArrayValue);\n+        valueMap.put(EmailConstants.MESSAGE_REPLY_TO, replyToAddressArrayValue);\n+        valueMap.put(EmailConstants.MESSAGE_SUBJECT, subject);\n+        valueMap.put(EmailConstants.MESSAGE_MESSAGE_BODY, messageBody);\n+        valueMap.put(EmailConstants.MESSAGE_FROM, fromAddress);\n+        valueMap.put(EmailConstants.MESSAGE_SENDER, senderAddress);\n+        log.debug(\"[PopUtil][getMapValue] MapValue object created. Returning Object to PopClient\");\n+        return BallerinaValues.createRecordValue(EmailConstants.EMAIL_PACKAGE_ID, PopConstants.EMAIL, valueMap);\n+    }\n+\n+    private static String getTextFromMimeMultipart(\n+            MimeMultipart mimeMultipart)  throws MessagingException, IOException {\n+        StringBuilder result = new StringBuilder();\n+        int count = mimeMultipart.getCount();\n+        for (int i = 0; i < count; i++) {\n+            BodyPart bodyPart = mimeMultipart.getBodyPart(i);\n+            if (bodyPart.isMimeType(\"text/plain\")) {\n+                result.append(\"\\n\").append(bodyPart.getContent());\n+                break; // without break same text appears twice in my tests\n+            } else if (bodyPart.isMimeType(\"text/html\")) {\n+                String html = (String) bodyPart.getContent();\n+                // result = result + \"\\n\" + org.jsoup.Jsoup.parse(html).text();\n+                result.append(\"\\n\").append(html);\n+            } else if (bodyPart.getContent() instanceof MimeMultipart) {\n+                result.append(getTextFromMimeMultipart((MimeMultipart) bodyPart.getContent()));\n+            }\n+        }\n+        return result.toString();\n+    }\n+\n+    private static String getStringNullChecked(String string) {\n+        if (string == null) {\n+            return \"\";\n+        } else {\n+            return string;\n+        }\n+    }\n+\n+    private static int getNullArrayLengthChecked(Address[] addresses) {\n+        if (addresses == null) {\n+            return 0;\n+        } else {\n+            return addresses.length;\n+        }\n+    }\n+\n+\n+    /**\n+     * Extracts port value and checks validity.\n+     *\n+     * @param longValue Port value extracted from Config\n+     * @return Port value as a string\n+     */\n+    private static String extractPortValue(long longValue, boolean isPop) {\n+        log.debug(\"[PopUtil][extractPortValue] Extracting Port value\");\n+        if (longValue <= 0 || longValue > MAX_PORT) {\n+            if (isPop) {\n+                log.error(\"Invalid port number given in configuration. Setting default port \"\n+                        + PopConstants.DEFAULT_PORT_NUMBER);\n+                return PopConstants.DEFAULT_PORT_NUMBER;\n+            } else {\n+                log.error(\"Invalid port number given in configuration. Setting default port \"\n+                        + ImapConstants.DEFAULT_PORT_NUMBER);\n+                return PopConstants.DEFAULT_PORT_NUMBER;\n+            }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 204}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjI5Mzg3", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366229387", "createdAt": "2020-02-28T08:32:56Z", "commit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "state": "COMMENTED", "comments": {"totalCount": 29, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozMjo1NlrOFvtDFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozODo1N1rOFvtMdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NTQ2Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            This module contains functions to perform email operations such as sending and reading emails using SMTP, POP3 and IMAP4 protocols.\n          \n          \n            \n            This module contains functions to perform email operations such as sending and reading emails using SMTP, POP3, and IMAP4 protocols.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385565463", "createdAt": "2020-02-28T08:32:56Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/Module.md", "diffHunk": "@@ -0,0 +1,83 @@\n+## Module overview\n+\n+This module contains functions to perform email operations such as sending and reading emails using SMTP, POP3 and IMAP4 protocols.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NTU3MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The sample given below uses the functions in the module to send an email with SMTP protocol.\n          \n          \n            \n            The below sample uses the functions in the module to send an email using the SMTP protocol.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385565570", "createdAt": "2020-02-28T08:33:13Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/Module.md", "diffHunk": "@@ -0,0 +1,83 @@\n+## Module overview\n+\n+This module contains functions to perform email operations such as sending and reading emails using SMTP, POP3 and IMAP4 protocols.\n+\n+## Sample\n+\n+The sample given below uses the functions in the module to send an email with SMTP protocol.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NTczNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The sample given below uses the functions in the module to receive an email with POP3 protocol.\n          \n          \n            \n            The below sample uses the functions in the module to receive an email using the POP3 protocol.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385565735", "createdAt": "2020-02-28T08:33:36Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/Module.md", "diffHunk": "@@ -0,0 +1,83 @@\n+## Module overview\n+\n+This module contains functions to perform email operations such as sending and reading emails using SMTP, POP3 and IMAP4 protocols.\n+\n+## Sample\n+\n+The sample given below uses the functions in the module to send an email with SMTP protocol.\n+\n+```ballerina\n+import ballerina/io;\n+import ballerina/email;\n+\n+email:SmtpConfig smtpConfig = {\n+    connConfig: {\n+        host: \"smtp.gmail.com\",\n+        port: 587,\n+        username: \"sender@email.com\",\n+        password: \"pass123\"\n+    }\n+};\n+\n+public function main() {\n+    email:SmtpClient smtpClient = new (smtpConfig);\n+    email:Email email = {\n+        toAddr: [\"receiver1@email.com\", \"receiver2@email.com\"],\n+        ccAddr: [\"receiver3@email.com\", \"receiver4@email.com\"],\n+        bccAddr: [\"receiver5@email.com\"],\n+        subject: \"Sample Email\",\n+        messageBody: \"This is a sample email.\",\n+        fromAddr: \"sender@email.com\",\n+        senderAddr: \"sender@email.com\"\n+    };\n+\n+    error? dd = smtpClient->send(email);\n+}\n+```\n+\n+The sample given below uses the functions in the module to receive an email with POP3 protocol.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NTkzMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The sample given below uses the functions in the module to receive an email with IMAP4 protocol.\n          \n          \n            \n            The below sample uses the functions in the module to receive an email using the IMAP4 protocol.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385565933", "createdAt": "2020-02-28T08:34:04Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/Module.md", "diffHunk": "@@ -0,0 +1,83 @@\n+## Module overview\n+\n+This module contains functions to perform email operations such as sending and reading emails using SMTP, POP3 and IMAP4 protocols.\n+\n+## Sample\n+\n+The sample given below uses the functions in the module to send an email with SMTP protocol.\n+\n+```ballerina\n+import ballerina/io;\n+import ballerina/email;\n+\n+email:SmtpConfig smtpConfig = {\n+    connConfig: {\n+        host: \"smtp.gmail.com\",\n+        port: 587,\n+        username: \"sender@email.com\",\n+        password: \"pass123\"\n+    }\n+};\n+\n+public function main() {\n+    email:SmtpClient smtpClient = new (smtpConfig);\n+    email:Email email = {\n+        toAddr: [\"receiver1@email.com\", \"receiver2@email.com\"],\n+        ccAddr: [\"receiver3@email.com\", \"receiver4@email.com\"],\n+        bccAddr: [\"receiver5@email.com\"],\n+        subject: \"Sample Email\",\n+        messageBody: \"This is a sample email.\",\n+        fromAddr: \"sender@email.com\",\n+        senderAddr: \"sender@email.com\"\n+    };\n+\n+    error? dd = smtpClient->send(email);\n+}\n+```\n+\n+The sample given below uses the functions in the module to receive an email with POP3 protocol.\n+\n+```ballerina\n+email:PopConfig popConfig = {\n+    host: \"pop.gmail.com\",\n+    username: \"sender@email.com\",\n+    password: \"senderPa$$w0rd\"\n+};\n+\n+public function main() {\n+    email:PopClient popClient = new (popConfig);\n+    email:Email|error? emailResponse = popClient->read();\n+    if(emailResponse is email:Email) {\n+        io:println(\"Email Subject: \", emailResponse.subject);\n+        io:println(\"Email Body: \", emailResponse.body);\n+    } else if (emailResponse is ()) {\n+        io:println(\"There are no emails in the INBOX.\");\n+    } else {\n+        io:println(\"Error: \" + emailResponse.toString());\n+    }\n+}\n+```\n+\n+The sample given below uses the functions in the module to receive an email with IMAP4 protocol.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NjAwOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # Provides configurations for connections\n          \n          \n            \n            # Configurations for the connections.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385566009", "createdAt": "2020-02-28T08:34:19Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/commons.bal", "diffHunk": "@@ -0,0 +1,56 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Provides configurations for connections", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NjE1NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # Provides email message sends and receives\n          \n          \n            \n            # Email message sending and receiving configurations.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385566154", "createdAt": "2020-02-28T08:34:42Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/commons.bal", "diffHunk": "@@ -0,0 +1,56 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Provides configurations for connections\n+#\n+# + host - IP Address\n+# + port - Port\n+# + username - Provider username\n+# + password - Provider password\n+public type ConnectionConfig record {|\n+    string host;\n+    int port;\n+    string username;\n+    string password;\n+|};\n+\n+# Provides email message sends and receives", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NjIzOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # + body - Email message body\n          \n          \n            \n            # + body - Body of the email message", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385566238", "createdAt": "2020-02-28T08:34:57Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/commons.bal", "diffHunk": "@@ -0,0 +1,56 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Provides configurations for connections\n+#\n+# + host - IP Address\n+# + port - Port\n+# + username - Provider username\n+# + password - Provider password\n+public type ConnectionConfig record {|\n+    string host;\n+    int port;\n+    string username;\n+    string password;\n+|};\n+\n+# Provides email message sends and receives\n+#\n+# + to - TO address list\n+# + cc - CC address list\n+# + bcc - BCC address list\n+# + subject - Subject of email\n+# + body - Email message body", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NjMyOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # Provides filter to receive email\n          \n          \n            \n            # Filter to receive an email.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385566328", "createdAt": "2020-02-28T08:35:13Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/commons.bal", "diffHunk": "@@ -0,0 +1,56 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Provides configurations for connections\n+#\n+# + host - IP Address\n+# + port - Port\n+# + username - Provider username\n+# + password - Provider password\n+public type ConnectionConfig record {|\n+    string host;\n+    int port;\n+    string username;\n+    string password;\n+|};\n+\n+# Provides email message sends and receives\n+#\n+# + to - TO address list\n+# + cc - CC address list\n+# + bcc - BCC address list\n+# + subject - Subject of email\n+# + body - Email message body\n+# + from - From address\n+# + sender - Sender's address\n+# + replyTo - Reply To addresses\n+public type Email record {|\n+    string[] to = [];\n+    string[]? cc = [];\n+    string[]? bcc = [];\n+    string subject = \"\";\n+    string body = \"\";\n+    string 'from = \"\";\n+    string? sender = \"\";\n+    string[]? replyTo = [];\n+|};\n+\n+# Provides filter to receive email", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NjU0MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # Represents an IMAP Client that interacts with an IMAP Server\n          \n          \n            \n            # Represents an IMAP Client, which interacts with an IMAP Server.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385566540", "createdAt": "2020-02-28T08:35:48Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/imap_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,55 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an IMAP Client that interacts with an IMAP Server", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NjY2MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # Gets invoked during object initialization\n          \n          \n            \n                # Gets invoked during object initialization.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385566660", "createdAt": "2020-02-28T08:36:04Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/imap_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,55 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an IMAP Client that interacts with an IMAP Server\n+public type ImapClient client object {\n+\n+    # Gets invoked during object initialization", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NjcwNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # + clientConfig - Configurations for IMAP Client\n          \n          \n            \n                # + clientConfig - Configurations for the IMAP Client", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385566705", "createdAt": "2020-02-28T08:36:11Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/imap_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,55 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an IMAP Client that interacts with an IMAP Server\n+public type ImapClient client object {\n+\n+    # Gets invoked during object initialization\n+    #\n+    # + clientConfig - Configurations for IMAP Client", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2Njc3NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # Used to read a message\n          \n          \n            \n                # Reads a message.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385566774", "createdAt": "2020-02-28T08:36:22Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/imap_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,55 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an IMAP Client that interacts with an IMAP Server\n+public type ImapClient client object {\n+\n+    # Gets invoked during object initialization\n+    #\n+    # + clientConfig - Configurations for IMAP Client\n+    public function __init(ImapConfig clientConfig) {\n+        error? response = initImapClientEndpoint(self, clientConfig, false);\n+    }\n+\n+    # Used to read a message", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2Njg4MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # Configuration of the IMAP Endpoint\n          \n          \n            \n            # Configuration of the IMAP Endpoint.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385566881", "createdAt": "2020-02-28T08:36:35Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/imap_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,55 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an IMAP Client that interacts with an IMAP Server\n+public type ImapClient client object {\n+\n+    # Gets invoked during object initialization\n+    #\n+    # + clientConfig - Configurations for IMAP Client\n+    public function __init(ImapConfig clientConfig) {\n+        error? response = initImapClientEndpoint(self, clientConfig, false);\n+    }\n+\n+    # Used to read a message\n+    #\n+    # + return - An `error` if failed to send the message to the recipient\n+    public remote function read() returns Email|error? {\n+        Filter filter = {\n+            folder: \"INBOX\"\n+        };\n+        map<anydata>|error? email = imapRead(self, filter, false);\n+        if(email is error) {\n+            return email;\n+        } else {\n+            return <Email?>email;\n+        }\n+    }\n+\n+};\n+\n+# Configuration of the IMAP Endpoint", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2Njk0Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # + host - Host address of IMAP server\n          \n          \n            \n            # + host - Host address of the IMAP server", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385566946", "createdAt": "2020-02-28T08:36:43Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/imap_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,55 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an IMAP Client that interacts with an IMAP Server\n+public type ImapClient client object {\n+\n+    # Gets invoked during object initialization\n+    #\n+    # + clientConfig - Configurations for IMAP Client\n+    public function __init(ImapConfig clientConfig) {\n+        error? response = initImapClientEndpoint(self, clientConfig, false);\n+    }\n+\n+    # Used to read a message\n+    #\n+    # + return - An `error` if failed to send the message to the recipient\n+    public remote function read() returns Email|error? {\n+        Filter filter = {\n+            folder: \"INBOX\"\n+        };\n+        map<anydata>|error? email = imapRead(self, filter, false);\n+        if(email is error) {\n+            return email;\n+        } else {\n+            return <Email?>email;\n+        }\n+    }\n+\n+};\n+\n+# Configuration of the IMAP Endpoint\n+#\n+# + host - Host address of IMAP server", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NzAwMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # + port - Port number of IMAP server\n          \n          \n            \n            # + port - Port number of the IMAP server", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385567001", "createdAt": "2020-02-28T08:36:49Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/imap_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,55 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an IMAP Client that interacts with an IMAP Server\n+public type ImapClient client object {\n+\n+    # Gets invoked during object initialization\n+    #\n+    # + clientConfig - Configurations for IMAP Client\n+    public function __init(ImapConfig clientConfig) {\n+        error? response = initImapClientEndpoint(self, clientConfig, false);\n+    }\n+\n+    # Used to read a message\n+    #\n+    # + return - An `error` if failed to send the message to the recipient\n+    public remote function read() returns Email|error? {\n+        Filter filter = {\n+            folder: \"INBOX\"\n+        };\n+        map<anydata>|error? email = imapRead(self, filter, false);\n+        if(email is error) {\n+            return email;\n+        } else {\n+            return <Email?>email;\n+        }\n+    }\n+\n+};\n+\n+# Configuration of the IMAP Endpoint\n+#\n+# + host - Host address of IMAP server\n+# + port - Port number of IMAP server", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NzA1Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # + username - Username to access IMAP server\n          \n          \n            \n            # + username - Username to access the IMAP server", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385567057", "createdAt": "2020-02-28T08:36:58Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/imap_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,55 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an IMAP Client that interacts with an IMAP Server\n+public type ImapClient client object {\n+\n+    # Gets invoked during object initialization\n+    #\n+    # + clientConfig - Configurations for IMAP Client\n+    public function __init(ImapConfig clientConfig) {\n+        error? response = initImapClientEndpoint(self, clientConfig, false);\n+    }\n+\n+    # Used to read a message\n+    #\n+    # + return - An `error` if failed to send the message to the recipient\n+    public remote function read() returns Email|error? {\n+        Filter filter = {\n+            folder: \"INBOX\"\n+        };\n+        map<anydata>|error? email = imapRead(self, filter, false);\n+        if(email is error) {\n+            return email;\n+        } else {\n+            return <Email?>email;\n+        }\n+    }\n+\n+};\n+\n+# Configuration of the IMAP Endpoint\n+#\n+# + host - Host address of IMAP server\n+# + port - Port number of IMAP server\n+# + username - Username to access IMAP server", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NzA4OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # + password - Password to access IMAP server\n          \n          \n            \n            # + password - Password to access the IMAP server", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385567088", "createdAt": "2020-02-28T08:37:03Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/imap_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,55 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an IMAP Client that interacts with an IMAP Server\n+public type ImapClient client object {\n+\n+    # Gets invoked during object initialization\n+    #\n+    # + clientConfig - Configurations for IMAP Client\n+    public function __init(ImapConfig clientConfig) {\n+        error? response = initImapClientEndpoint(self, clientConfig, false);\n+    }\n+\n+    # Used to read a message\n+    #\n+    # + return - An `error` if failed to send the message to the recipient\n+    public remote function read() returns Email|error? {\n+        Filter filter = {\n+            folder: \"INBOX\"\n+        };\n+        map<anydata>|error? email = imapRead(self, filter, false);\n+        if(email is error) {\n+            return email;\n+        } else {\n+            return <Email?>email;\n+        }\n+    }\n+\n+};\n+\n+# Configuration of the IMAP Endpoint\n+#\n+# + host - Host address of IMAP server\n+# + port - Port number of IMAP server\n+# + username - Username to access IMAP server\n+# + password - Password to access IMAP server", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NzIwMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # Represents an POP Client that interacts with an POP Server\n          \n          \n            \n            # Represents a POP Client, which interacts with a POP Server.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385567203", "createdAt": "2020-02-28T08:37:20Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/pop_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,55 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an POP Client that interacts with an POP Server", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NzI0OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # Gets invoked during object initialization\n          \n          \n            \n                # Gets invoked during object initialization.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385567249", "createdAt": "2020-02-28T08:37:27Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/pop_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,55 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an POP Client that interacts with an POP Server\n+public type PopClient client object {\n+\n+    # Gets invoked during object initialization", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NzMxNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # + clientConfig - Configurations for POP Client\n          \n          \n            \n                # + clientConfig - Configurations for the POP Client", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385567317", "createdAt": "2020-02-28T08:37:37Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/pop_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,55 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an POP Client that interacts with an POP Server\n+public type PopClient client object {\n+\n+    # Gets invoked during object initialization\n+    #\n+    # + clientConfig - Configurations for POP Client", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NzM3Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # Used to read a message\n          \n          \n            \n                # Used to read a message.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385567372", "createdAt": "2020-02-28T08:37:43Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/pop_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,55 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an POP Client that interacts with an POP Server\n+public type PopClient client object {\n+\n+    # Gets invoked during object initialization\n+    #\n+    # + clientConfig - Configurations for POP Client\n+    public function __init(PopConfig clientConfig) {\n+        error? response = initPopClientEndpoint(self, clientConfig, true);\n+    }\n+\n+    # Used to read a message", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NzQyNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # Configuration of the POP Endpoint\n          \n          \n            \n            # Configuration of the POP Endpoint.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385567427", "createdAt": "2020-02-28T08:37:52Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/pop_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,55 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an POP Client that interacts with an POP Server\n+public type PopClient client object {\n+\n+    # Gets invoked during object initialization\n+    #\n+    # + clientConfig - Configurations for POP Client\n+    public function __init(PopConfig clientConfig) {\n+        error? response = initPopClientEndpoint(self, clientConfig, true);\n+    }\n+\n+    # Used to read a message\n+    #\n+    # + return - An `error` if failed to send the message to the recipient\n+    public remote function read() returns Email|error? {\n+        Filter filter = {\n+            folder: \"INBOX\"\n+        };\n+        map<anydata>|error? email = popRead(self, filter, true);\n+        if(email is error) {\n+            return email;\n+        } else {\n+            return <Email?>email;\n+        }\n+    }\n+\n+};\n+\n+# Configuration of the POP Endpoint", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NzQ2NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # + host - Host address of POP server\n          \n          \n            \n            # + host - Host address of the POP server", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385567464", "createdAt": "2020-02-28T08:37:59Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/pop_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,55 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an POP Client that interacts with an POP Server\n+public type PopClient client object {\n+\n+    # Gets invoked during object initialization\n+    #\n+    # + clientConfig - Configurations for POP Client\n+    public function __init(PopConfig clientConfig) {\n+        error? response = initPopClientEndpoint(self, clientConfig, true);\n+    }\n+\n+    # Used to read a message\n+    #\n+    # + return - An `error` if failed to send the message to the recipient\n+    public remote function read() returns Email|error? {\n+        Filter filter = {\n+            folder: \"INBOX\"\n+        };\n+        map<anydata>|error? email = popRead(self, filter, true);\n+        if(email is error) {\n+            return email;\n+        } else {\n+            return <Email?>email;\n+        }\n+    }\n+\n+};\n+\n+# Configuration of the POP Endpoint\n+#\n+# + host - Host address of POP server", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NzUwOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # + port - Port number of POP server\n          \n          \n            \n            # + port - Port number of the POP server", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385567508", "createdAt": "2020-02-28T08:38:05Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/pop_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,55 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an POP Client that interacts with an POP Server\n+public type PopClient client object {\n+\n+    # Gets invoked during object initialization\n+    #\n+    # + clientConfig - Configurations for POP Client\n+    public function __init(PopConfig clientConfig) {\n+        error? response = initPopClientEndpoint(self, clientConfig, true);\n+    }\n+\n+    # Used to read a message\n+    #\n+    # + return - An `error` if failed to send the message to the recipient\n+    public remote function read() returns Email|error? {\n+        Filter filter = {\n+            folder: \"INBOX\"\n+        };\n+        map<anydata>|error? email = popRead(self, filter, true);\n+        if(email is error) {\n+            return email;\n+        } else {\n+            return <Email?>email;\n+        }\n+    }\n+\n+};\n+\n+# Configuration of the POP Endpoint\n+#\n+# + host - Host address of POP server\n+# + port - Port number of POP server", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NzU0NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # + username - Username to access POP server\n          \n          \n            \n            # + username - Username to access the POP server", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385567545", "createdAt": "2020-02-28T08:38:10Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/pop_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,55 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an POP Client that interacts with an POP Server\n+public type PopClient client object {\n+\n+    # Gets invoked during object initialization\n+    #\n+    # + clientConfig - Configurations for POP Client\n+    public function __init(PopConfig clientConfig) {\n+        error? response = initPopClientEndpoint(self, clientConfig, true);\n+    }\n+\n+    # Used to read a message\n+    #\n+    # + return - An `error` if failed to send the message to the recipient\n+    public remote function read() returns Email|error? {\n+        Filter filter = {\n+            folder: \"INBOX\"\n+        };\n+        map<anydata>|error? email = popRead(self, filter, true);\n+        if(email is error) {\n+            return email;\n+        } else {\n+            return <Email?>email;\n+        }\n+    }\n+\n+};\n+\n+# Configuration of the POP Endpoint\n+#\n+# + host - Host address of POP server\n+# + port - Port number of POP server\n+# + username - Username to access POP server", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2NzU4OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # + password - Password to access POP server\n          \n          \n            \n            # + password - Password to access the POP server", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385567588", "createdAt": "2020-02-28T08:38:15Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/pop_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,55 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an POP Client that interacts with an POP Server\n+public type PopClient client object {\n+\n+    # Gets invoked during object initialization\n+    #\n+    # + clientConfig - Configurations for POP Client\n+    public function __init(PopConfig clientConfig) {\n+        error? response = initPopClientEndpoint(self, clientConfig, true);\n+    }\n+\n+    # Used to read a message\n+    #\n+    # + return - An `error` if failed to send the message to the recipient\n+    public remote function read() returns Email|error? {\n+        Filter filter = {\n+            folder: \"INBOX\"\n+        };\n+        map<anydata>|error? email = popRead(self, filter, true);\n+        if(email is error) {\n+            return email;\n+        } else {\n+            return <Email?>email;\n+        }\n+    }\n+\n+};\n+\n+# Configuration of the POP Endpoint\n+#\n+# + host - Host address of POP server\n+# + port - Port number of POP server\n+# + username - Username to access POP server\n+# + password - Password to access POP server", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2Nzc0MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # Represents an SMTP Client that interacts with an SMTP Server\n          \n          \n            \n            # Represents an SMTP Client, which interacts with an SMTP Server.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385567740", "createdAt": "2020-02-28T08:38:40Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/smtp_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an SMTP Client that interacts with an SMTP Server", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2Nzc3Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # Gets invoked during object initialization\n          \n          \n            \n                # Gets invoked during object initialization.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385567776", "createdAt": "2020-02-28T08:38:46Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/smtp_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an SMTP Client that interacts with an SMTP Server\n+public type SmtpClient client object {\n+\n+    # Gets invoked during object initialization", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2Nzg2MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # Used to send a message\n          \n          \n            \n                # Send a message.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385567860", "createdAt": "2020-02-28T08:38:57Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/smtp_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an SMTP Client that interacts with an SMTP Server\n+public type SmtpClient client object {\n+\n+    # Gets invoked during object initialization\n+    #\n+    # + clientConfig - Configurations for SMTP Client\n+    public function __init(SmtpConfig clientConfig) {\n+        error? response = initSmtpClientEndpoint(self, clientConfig);\n+    }\n+\n+    # Used to send a message", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjMyOTYy", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366232962", "createdAt": "2020-02-28T08:39:55Z", "commit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozOTo1NlrOFvtN9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODozOTo1NlrOFvtN9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2ODI0NQ==", "bodyText": "Do we need to initialize the values of this record?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385568245", "createdAt": "2020-02-28T08:39:56Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/ballerina/src/email/commons.bal", "diffHunk": "@@ -0,0 +1,56 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Provides configurations for connections\n+#\n+# + host - IP Address\n+# + port - Port\n+# + username - Provider username\n+# + password - Provider password\n+public type ConnectionConfig record {|\n+    string host;\n+    int port;\n+    string username;\n+    string password;\n+|};\n+\n+# Provides email message sends and receives\n+#\n+# + to - TO address list\n+# + cc - CC address list\n+# + bcc - BCC address list\n+# + subject - Subject of email\n+# + body - Email message body\n+# + from - From address\n+# + sender - Sender's address\n+# + replyTo - Reply To addresses\n+public type Email record {|", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 40}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjMzNDc1", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366233475", "createdAt": "2020-02-28T08:40:57Z", "commit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODo0MDo1N1rOFvtPtQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODo0MDo1N1rOFvtPtQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2ODY5Mw==", "bodyText": "IMO, this should be optional field. Please check the other attributes of the records as well.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                string[]? cc = [];\n          \n          \n            \n                string[] cc? = [];", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385568693", "createdAt": "2020-02-28T08:40:57Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/ballerina/src/email/commons.bal", "diffHunk": "@@ -0,0 +1,56 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Provides configurations for connections\n+#\n+# + host - IP Address\n+# + port - Port\n+# + username - Provider username\n+# + password - Provider password\n+public type ConnectionConfig record {|\n+    string host;\n+    int port;\n+    string username;\n+    string password;\n+|};\n+\n+# Provides email message sends and receives\n+#\n+# + to - TO address list\n+# + cc - CC address list\n+# + bcc - BCC address list\n+# + subject - Subject of email\n+# + body - Email message body\n+# + from - From address\n+# + sender - Sender's address\n+# + replyTo - Reply To addresses\n+public type Email record {|\n+    string[] to = [];\n+    string[]? cc = [];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjM0MzA1", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366234305", "createdAt": "2020-02-28T08:42:39Z", "commit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODo0Mjo0MFrOFvtSOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODo0Mjo0MFrOFvtSOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2OTMzOQ==", "bodyText": "Do we need to initialize this? And can this property hold () as the value?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385569339", "createdAt": "2020-02-28T08:42:40Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/ballerina/src/email/commons.bal", "diffHunk": "@@ -0,0 +1,56 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Provides configurations for connections\n+#\n+# + host - IP Address\n+# + port - Port\n+# + username - Provider username\n+# + password - Provider password\n+public type ConnectionConfig record {|\n+    string host;\n+    int port;\n+    string username;\n+    string password;\n+|};\n+\n+# Provides email message sends and receives\n+#\n+# + to - TO address list\n+# + cc - CC address list\n+# + bcc - BCC address list\n+# + subject - Subject of email\n+# + body - Email message body\n+# + from - From address\n+# + sender - Sender's address\n+# + replyTo - Reply To addresses\n+public type Email record {|\n+    string[] to = [];\n+    string[]? cc = [];\n+    string[]? bcc = [];\n+    string subject = \"\";\n+    string body = \"\";\n+    string 'from = \"\";\n+    string? sender = \"\";\n+    string[]? replyTo = [];\n+|};\n+\n+# Provides filter to receive email\n+#\n+# + folder - Folder to read emails\n+public type Filter record {|\n+    string? folder = \"INBOX\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 55}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjM1MDAy", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366235002", "createdAt": "2020-02-28T08:44:00Z", "commit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODo0NDowMFrOFvtUSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODo0NDowMFrOFvtUSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2OTg2Ng==", "bodyText": "There is no connConfig. remove it from the docs", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385569866", "createdAt": "2020-02-28T08:44:00Z", "author": {"login": "daneshk"}, "path": "stdlib/email/src/main/ballerina/src/email/Module.md", "diffHunk": "@@ -0,0 +1,83 @@\n+## Module overview\n+\n+This module contains functions to perform email operations such as sending and reading emails using SMTP, POP3 and IMAP4 protocols.\n+\n+## Sample\n+\n+The sample given below uses the functions in the module to send an email with SMTP protocol.\n+\n+```ballerina\n+import ballerina/io;\n+import ballerina/email;\n+\n+email:SmtpConfig smtpConfig = {\n+    connConfig: {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjM2NzQx", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366236741", "createdAt": "2020-02-28T08:47:14Z", "commit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODo0NzoxNFrOFvtZrQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODo0NzoxNFrOFvtZrQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU3MTI0NQ==", "bodyText": "The extern function only returns map<anydata> not the error | (). We have to revisit all the other functions as well.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385571245", "createdAt": "2020-02-28T08:47:14Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/ballerina/src/email/service_endpoint.bal", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+import ballerinax/java;\n+\n+public function initSmtpClientEndpoint(SmtpClient clientEndpoint, map<anydata> config) returns error? = @java:Method {\n+    name : \"initClientEndpoint\",\n+    class : \"org.ballerinalang.stdlib.email.client.SmtpClient\"\n+} external;\n+\n+public function send(SmtpClient clientEndpoint, map<anydata> email) returns error? = @java:Method {\n+    name : \"sendMessage\",\n+    class : \"org.ballerinalang.stdlib.email.client.SmtpClient\"\n+} external;\n+\n+\n+public function initPopClientEndpoint(PopClient clientEndpoint, map<anydata> config, boolean isPop) returns error? = @java:Method {\n+    name : \"initClientEndpoint\",\n+    class : \"org.ballerinalang.stdlib.email.client.PopClient\"\n+} external;\n+\n+public function popRead(PopClient clientEndpoint, map<anydata> message, boolean isPop) returns map<anydata>|error? = @java:Method {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjMzMDAx", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366233001", "createdAt": "2020-02-28T08:40:01Z", "commit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "state": "COMMENTED", "comments": {"totalCount": 29, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODo0MDowMlrOFvtOEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODo0NzozNVrOFvtaMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2ODI3NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # Configuration of the SMTP Endpoint\n          \n          \n            \n            # Configuration of the SMTP Endpoint.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385568274", "createdAt": "2020-02-28T08:40:02Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/smtp_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an SMTP Client that interacts with an SMTP Server\n+public type SmtpClient client object {\n+\n+    # Gets invoked during object initialization\n+    #\n+    # + clientConfig - Configurations for SMTP Client\n+    public function __init(SmtpConfig clientConfig) {\n+        error? response = initSmtpClientEndpoint(self, clientConfig);\n+    }\n+\n+    # Used to send a message\n+    #\n+    # + email - String message\n+    # + return - An `error` if failed to send the message to the recipient\n+    public remote function send(Email email) returns error? {\n+        return send(self, email);\n+    }\n+\n+};\n+\n+# Configuration of the SMTP Endpoint", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2ODMyNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # + host - Host address of SMTP server\n          \n          \n            \n            # + host - Host address of the SMTP server", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385568327", "createdAt": "2020-02-28T08:40:08Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/smtp_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an SMTP Client that interacts with an SMTP Server\n+public type SmtpClient client object {\n+\n+    # Gets invoked during object initialization\n+    #\n+    # + clientConfig - Configurations for SMTP Client\n+    public function __init(SmtpConfig clientConfig) {\n+        error? response = initSmtpClientEndpoint(self, clientConfig);\n+    }\n+\n+    # Used to send a message\n+    #\n+    # + email - String message\n+    # + return - An `error` if failed to send the message to the recipient\n+    public remote function send(Email email) returns error? {\n+        return send(self, email);\n+    }\n+\n+};\n+\n+# Configuration of the SMTP Endpoint\n+#\n+# + host - Host address of SMTP server", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2ODM3Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # + port - Port number of SMTP server\n          \n          \n            \n            # + port - Port number of the SMTP server", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385568372", "createdAt": "2020-02-28T08:40:14Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/smtp_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an SMTP Client that interacts with an SMTP Server\n+public type SmtpClient client object {\n+\n+    # Gets invoked during object initialization\n+    #\n+    # + clientConfig - Configurations for SMTP Client\n+    public function __init(SmtpConfig clientConfig) {\n+        error? response = initSmtpClientEndpoint(self, clientConfig);\n+    }\n+\n+    # Used to send a message\n+    #\n+    # + email - String message\n+    # + return - An `error` if failed to send the message to the recipient\n+    public remote function send(Email email) returns error? {\n+        return send(self, email);\n+    }\n+\n+};\n+\n+# Configuration of the SMTP Endpoint\n+#\n+# + host - Host address of SMTP server\n+# + port - Port number of SMTP server", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2ODQxMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # + username - Username to access SMTP server\n          \n          \n            \n            # + username - Username to access the SMTP server", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385568412", "createdAt": "2020-02-28T08:40:20Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/smtp_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an SMTP Client that interacts with an SMTP Server\n+public type SmtpClient client object {\n+\n+    # Gets invoked during object initialization\n+    #\n+    # + clientConfig - Configurations for SMTP Client\n+    public function __init(SmtpConfig clientConfig) {\n+        error? response = initSmtpClientEndpoint(self, clientConfig);\n+    }\n+\n+    # Used to send a message\n+    #\n+    # + email - String message\n+    # + return - An `error` if failed to send the message to the recipient\n+    public remote function send(Email email) returns error? {\n+        return send(self, email);\n+    }\n+\n+};\n+\n+# Configuration of the SMTP Endpoint\n+#\n+# + host - Host address of SMTP server\n+# + port - Port number of SMTP server\n+# + username - Username to access SMTP server", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2ODQ0Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # + password - Password to access SMTP server\n          \n          \n            \n            # + password - Password to access the SMTP server", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385568446", "createdAt": "2020-02-28T08:40:26Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/ballerina/src/email/smtp_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an SMTP Client that interacts with an SMTP Server\n+public type SmtpClient client object {\n+\n+    # Gets invoked during object initialization\n+    #\n+    # + clientConfig - Configurations for SMTP Client\n+    public function __init(SmtpConfig clientConfig) {\n+        error? response = initSmtpClientEndpoint(self, clientConfig);\n+    }\n+\n+    # Used to send a message\n+    #\n+    # + email - String message\n+    # + return - An `error` if failed to send the message to the recipient\n+    public remote function send(Email email) returns error? {\n+        return send(self, email);\n+    }\n+\n+};\n+\n+# Configuration of the SMTP Endpoint\n+#\n+# + host - Host address of SMTP server\n+# + port - Port number of SMTP server\n+# + username - Username to access SMTP server\n+# + password - Password to access SMTP server", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2ODU2NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // Singleton class\n          \n          \n            \n                    // A Singleton class.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385568564", "createdAt": "2020-02-28T08:40:44Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/client/PopClient.java", "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.client;\n+\n+\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.ballerinalang.jvm.values.ObjectValue;\n+import org.ballerinalang.stdlib.email.util.BallerinaPopException;\n+import org.ballerinalang.stdlib.email.util.ImapConstants;\n+import org.ballerinalang.stdlib.email.util.PopConstants;\n+import org.ballerinalang.stdlib.email.util.PopUtil;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.util.Properties;\n+\n+import javax.mail.Folder;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.NoSuchProviderException;\n+import javax.mail.Session;\n+import javax.mail.Store;\n+\n+\n+/**\n+ * Contains functionality of POP Client.\n+ */\n+public class PopClient {\n+\n+    private static final Logger log = LoggerFactory.getLogger(PopClient.class);\n+\n+    private PopClient() {\n+        // Singleton class", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2OTA1Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @throws BallerinaPopException If an error occurs in POP client\n          \n          \n            \n                 * @throws BallerinaPopException If an error occurs in the POP client", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385569056", "createdAt": "2020-02-28T08:41:53Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/client/PopClient.java", "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.client;\n+\n+\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.ballerinalang.jvm.values.ObjectValue;\n+import org.ballerinalang.stdlib.email.util.BallerinaPopException;\n+import org.ballerinalang.stdlib.email.util.ImapConstants;\n+import org.ballerinalang.stdlib.email.util.PopConstants;\n+import org.ballerinalang.stdlib.email.util.PopUtil;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.util.Properties;\n+\n+import javax.mail.Folder;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.NoSuchProviderException;\n+import javax.mail.Session;\n+import javax.mail.Store;\n+\n+\n+/**\n+ * Contains functionality of POP Client.\n+ */\n+public class PopClient {\n+\n+    private static final Logger log = LoggerFactory.getLogger(PopClient.class);\n+\n+    private PopClient() {\n+        // Singleton class\n+    }\n+\n+    /**\n+     * Initializes the ObjectValue object with the POP Properties.\n+     * @param clientEndpoint Represents the POP Client class\n+     * @param config Properties required to configure the POP Session\n+     * @param isPop True if the protocol is POP3 and false otherwise (if protocol is IMAP)\n+     * @throws BallerinaPopException If an error occurs in POP client", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2OTE4MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @param filter Criteria which are used to read emails\n          \n          \n            \n                 * @param filter Criteria, which is used to read emails", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385569181", "createdAt": "2020-02-28T08:42:14Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/client/PopClient.java", "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.client;\n+\n+\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.ballerinalang.jvm.values.ObjectValue;\n+import org.ballerinalang.stdlib.email.util.BallerinaPopException;\n+import org.ballerinalang.stdlib.email.util.ImapConstants;\n+import org.ballerinalang.stdlib.email.util.PopConstants;\n+import org.ballerinalang.stdlib.email.util.PopUtil;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.util.Properties;\n+\n+import javax.mail.Folder;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.NoSuchProviderException;\n+import javax.mail.Session;\n+import javax.mail.Store;\n+\n+\n+/**\n+ * Contains functionality of POP Client.\n+ */\n+public class PopClient {\n+\n+    private static final Logger log = LoggerFactory.getLogger(PopClient.class);\n+\n+    private PopClient() {\n+        // Singleton class\n+    }\n+\n+    /**\n+     * Initializes the ObjectValue object with the POP Properties.\n+     * @param clientEndpoint Represents the POP Client class\n+     * @param config Properties required to configure the POP Session\n+     * @param isPop True if the protocol is POP3 and false otherwise (if protocol is IMAP)\n+     * @throws BallerinaPopException If an error occurs in POP client\n+     */\n+    public static void initClientEndpoint(ObjectValue clientEndpoint, MapValue<Object, Object> config, boolean isPop)\n+            throws BallerinaPopException {\n+        log.debug(\"[PopClient][InitClient] Calling getProperties\");\n+        Properties properties = PopUtil.getProperties(config, isPop);\n+        Session session = Session.getInstance(properties, null);\n+        try {\n+            Store store;\n+\n+            if (isPop) {\n+                store = session.getStore(PopConstants.POP_PROTOCOL);\n+                clientEndpoint.addNativeData(PopConstants.PROPS_HOST,\n+                        properties.getProperty(PopConstants.PROPS_POP_HOST));\n+            } else {\n+                store = session.getStore(ImapConstants.IMAP_PROTOCOL);\n+                clientEndpoint.addNativeData(PopConstants.PROPS_HOST,\n+                        properties.getProperty(ImapConstants.PROPS_IMAP_HOST));\n+            }\n+            clientEndpoint.addNativeData(PopConstants.PROPS_STORE, store);\n+            clientEndpoint.addNativeData(PopConstants.PROPS_USERNAME,\n+                    properties.getProperty(PopConstants.PROPS_USERNAME));\n+            clientEndpoint.addNativeData(PopConstants.PROPS_PASSWORD,\n+                    properties.getProperty(PopConstants.PROPS_PASSWORD));\n+        } catch (NoSuchProviderException e) {\n+            log.error(\"Failed to read message : \", e);\n+            throw new BallerinaPopException(\"Error occurred while accessing POP server\", e);\n+        }\n+    }\n+\n+    /**\n+     * Read emails from the server.\n+     * @param clientConnector Represents the POP Client class\n+     * @param filter Criteria which are used to read emails", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 91}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2OTIzNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @return MapValue Returns the type supported to Ballerina\n          \n          \n            \n                 * @return MapValue Returns the type supported by Ballerina", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385569237", "createdAt": "2020-02-28T08:42:24Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/client/PopClient.java", "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.client;\n+\n+\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.ballerinalang.jvm.values.ObjectValue;\n+import org.ballerinalang.stdlib.email.util.BallerinaPopException;\n+import org.ballerinalang.stdlib.email.util.ImapConstants;\n+import org.ballerinalang.stdlib.email.util.PopConstants;\n+import org.ballerinalang.stdlib.email.util.PopUtil;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.util.Properties;\n+\n+import javax.mail.Folder;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.NoSuchProviderException;\n+import javax.mail.Session;\n+import javax.mail.Store;\n+\n+\n+/**\n+ * Contains functionality of POP Client.\n+ */\n+public class PopClient {\n+\n+    private static final Logger log = LoggerFactory.getLogger(PopClient.class);\n+\n+    private PopClient() {\n+        // Singleton class\n+    }\n+\n+    /**\n+     * Initializes the ObjectValue object with the POP Properties.\n+     * @param clientEndpoint Represents the POP Client class\n+     * @param config Properties required to configure the POP Session\n+     * @param isPop True if the protocol is POP3 and false otherwise (if protocol is IMAP)\n+     * @throws BallerinaPopException If an error occurs in POP client\n+     */\n+    public static void initClientEndpoint(ObjectValue clientEndpoint, MapValue<Object, Object> config, boolean isPop)\n+            throws BallerinaPopException {\n+        log.debug(\"[PopClient][InitClient] Calling getProperties\");\n+        Properties properties = PopUtil.getProperties(config, isPop);\n+        Session session = Session.getInstance(properties, null);\n+        try {\n+            Store store;\n+\n+            if (isPop) {\n+                store = session.getStore(PopConstants.POP_PROTOCOL);\n+                clientEndpoint.addNativeData(PopConstants.PROPS_HOST,\n+                        properties.getProperty(PopConstants.PROPS_POP_HOST));\n+            } else {\n+                store = session.getStore(ImapConstants.IMAP_PROTOCOL);\n+                clientEndpoint.addNativeData(PopConstants.PROPS_HOST,\n+                        properties.getProperty(ImapConstants.PROPS_IMAP_HOST));\n+            }\n+            clientEndpoint.addNativeData(PopConstants.PROPS_STORE, store);\n+            clientEndpoint.addNativeData(PopConstants.PROPS_USERNAME,\n+                    properties.getProperty(PopConstants.PROPS_USERNAME));\n+            clientEndpoint.addNativeData(PopConstants.PROPS_PASSWORD,\n+                    properties.getProperty(PopConstants.PROPS_PASSWORD));\n+        } catch (NoSuchProviderException e) {\n+            log.error(\"Failed to read message : \", e);\n+            throw new BallerinaPopException(\"Error occurred while accessing POP server\", e);\n+        }\n+    }\n+\n+    /**\n+     * Read emails from the server.\n+     * @param clientConnector Represents the POP Client class\n+     * @param filter Criteria which are used to read emails\n+     * @param isPop True if the protocol is POP3 and false otherwise (if protocol is IMAP)\n+     * @return MapValue Returns the type supported to Ballerina", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 93}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2OTI4Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @throws BallerinaPopException If an error occurs in POP client\n          \n          \n            \n                 * @throws BallerinaPopException If an error occurs in the POP client", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385569286", "createdAt": "2020-02-28T08:42:32Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/client/PopClient.java", "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.client;\n+\n+\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.ballerinalang.jvm.values.ObjectValue;\n+import org.ballerinalang.stdlib.email.util.BallerinaPopException;\n+import org.ballerinalang.stdlib.email.util.ImapConstants;\n+import org.ballerinalang.stdlib.email.util.PopConstants;\n+import org.ballerinalang.stdlib.email.util.PopUtil;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.util.Properties;\n+\n+import javax.mail.Folder;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.NoSuchProviderException;\n+import javax.mail.Session;\n+import javax.mail.Store;\n+\n+\n+/**\n+ * Contains functionality of POP Client.\n+ */\n+public class PopClient {\n+\n+    private static final Logger log = LoggerFactory.getLogger(PopClient.class);\n+\n+    private PopClient() {\n+        // Singleton class\n+    }\n+\n+    /**\n+     * Initializes the ObjectValue object with the POP Properties.\n+     * @param clientEndpoint Represents the POP Client class\n+     * @param config Properties required to configure the POP Session\n+     * @param isPop True if the protocol is POP3 and false otherwise (if protocol is IMAP)\n+     * @throws BallerinaPopException If an error occurs in POP client\n+     */\n+    public static void initClientEndpoint(ObjectValue clientEndpoint, MapValue<Object, Object> config, boolean isPop)\n+            throws BallerinaPopException {\n+        log.debug(\"[PopClient][InitClient] Calling getProperties\");\n+        Properties properties = PopUtil.getProperties(config, isPop);\n+        Session session = Session.getInstance(properties, null);\n+        try {\n+            Store store;\n+\n+            if (isPop) {\n+                store = session.getStore(PopConstants.POP_PROTOCOL);\n+                clientEndpoint.addNativeData(PopConstants.PROPS_HOST,\n+                        properties.getProperty(PopConstants.PROPS_POP_HOST));\n+            } else {\n+                store = session.getStore(ImapConstants.IMAP_PROTOCOL);\n+                clientEndpoint.addNativeData(PopConstants.PROPS_HOST,\n+                        properties.getProperty(ImapConstants.PROPS_IMAP_HOST));\n+            }\n+            clientEndpoint.addNativeData(PopConstants.PROPS_STORE, store);\n+            clientEndpoint.addNativeData(PopConstants.PROPS_USERNAME,\n+                    properties.getProperty(PopConstants.PROPS_USERNAME));\n+            clientEndpoint.addNativeData(PopConstants.PROPS_PASSWORD,\n+                    properties.getProperty(PopConstants.PROPS_PASSWORD));\n+        } catch (NoSuchProviderException e) {\n+            log.error(\"Failed to read message : \", e);\n+            throw new BallerinaPopException(\"Error occurred while accessing POP server\", e);\n+        }\n+    }\n+\n+    /**\n+     * Read emails from the server.\n+     * @param clientConnector Represents the POP Client class\n+     * @param filter Criteria which are used to read emails\n+     * @param isPop True if the protocol is POP3 and false otherwise (if protocol is IMAP)\n+     * @return MapValue Returns the type supported to Ballerina\n+     * @throws BallerinaPopException If an error occurs in POP client", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 94}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2OTQxMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @throws BallerinaSmtpException If an error occurs in SMTP client\n          \n          \n            \n                 * @throws BallerinaSmtpException If an error occurs in the SMTP client", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385569412", "createdAt": "2020-02-28T08:42:52Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/client/SmtpClient.java", "diffHunk": "@@ -0,0 +1,91 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.client;\n+\n+\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.ballerinalang.jvm.values.ObjectValue;\n+import org.ballerinalang.stdlib.email.util.BallerinaSmtpException;\n+import org.ballerinalang.stdlib.email.util.SmtpConstants;\n+import org.ballerinalang.stdlib.email.util.SmtpUtil;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.Properties;\n+\n+import javax.mail.MessagingException;\n+import javax.mail.PasswordAuthentication;\n+import javax.mail.Session;\n+import javax.mail.Transport;\n+\n+\n+/**\n+ * Contains functionality of SMTP Client.\n+ */\n+public class SmtpClient {\n+\n+    private static final Logger log = LoggerFactory.getLogger(SmtpClient.class);\n+\n+    private SmtpClient() {\n+        // Singleton class\n+    }\n+\n+    /**\n+     * Initializes the ObjectValue object with the SMTP Properties.\n+     * @param clientEndpoint Represents the SMTP Client class\n+     * @param config Properties required to configure the SMTP Session\n+     * @throws BallerinaSmtpException If an error occurs in SMTP client", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2OTQ5MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Send an email to an SMTP server.\n          \n          \n            \n                 * Sends an email to an SMTP server.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385569491", "createdAt": "2020-02-28T08:43:04Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/client/SmtpClient.java", "diffHunk": "@@ -0,0 +1,91 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.client;\n+\n+\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.ballerinalang.jvm.values.ObjectValue;\n+import org.ballerinalang.stdlib.email.util.BallerinaSmtpException;\n+import org.ballerinalang.stdlib.email.util.SmtpConstants;\n+import org.ballerinalang.stdlib.email.util.SmtpUtil;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.Properties;\n+\n+import javax.mail.MessagingException;\n+import javax.mail.PasswordAuthentication;\n+import javax.mail.Session;\n+import javax.mail.Transport;\n+\n+\n+/**\n+ * Contains functionality of SMTP Client.\n+ */\n+public class SmtpClient {\n+\n+    private static final Logger log = LoggerFactory.getLogger(SmtpClient.class);\n+\n+    private SmtpClient() {\n+        // Singleton class\n+    }\n+\n+    /**\n+     * Initializes the ObjectValue object with the SMTP Properties.\n+     * @param clientEndpoint Represents the SMTP Client class\n+     * @param config Properties required to configure the SMTP Session\n+     * @throws BallerinaSmtpException If an error occurs in SMTP client\n+     */\n+    public static void initClientEndpoint(ObjectValue clientEndpoint, MapValue<Object, Object> config)\n+            throws BallerinaSmtpException {\n+        log.debug(\"[SmtpClient][InitClient] Calling getProperties\");\n+        Properties properties = SmtpUtil.getProperties(config);\n+        log.debug(\"[SmtpClient][Send] Creating session\");\n+        Session session = Session.getInstance(properties,\n+                new javax.mail.Authenticator() {\n+                    protected PasswordAuthentication getPasswordAuthentication() {\n+                        return new PasswordAuthentication(properties.getProperty(SmtpConstants.PROPS_USERNAME),\n+                                properties.getProperty(SmtpConstants.PROPS_PASSWORD));\n+                    }\n+                });\n+        clientEndpoint.addNativeData(SmtpConstants.PROPS_SESSION, session);\n+        clientEndpoint.addNativeData(SmtpConstants.PROPS_USERNAME,\n+                properties.getProperty(SmtpConstants.PROPS_USERNAME));\n+    }\n+\n+    /**\n+     * Send an email to an SMTP server.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2OTU2Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @throws BallerinaSmtpException If an error occurs in SMTP client\n          \n          \n            \n                 * @throws BallerinaSmtpException If an error occurs in the SMTP client", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385569563", "createdAt": "2020-02-28T08:43:14Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/client/SmtpClient.java", "diffHunk": "@@ -0,0 +1,91 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.client;\n+\n+\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.ballerinalang.jvm.values.ObjectValue;\n+import org.ballerinalang.stdlib.email.util.BallerinaSmtpException;\n+import org.ballerinalang.stdlib.email.util.SmtpConstants;\n+import org.ballerinalang.stdlib.email.util.SmtpUtil;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.Properties;\n+\n+import javax.mail.MessagingException;\n+import javax.mail.PasswordAuthentication;\n+import javax.mail.Session;\n+import javax.mail.Transport;\n+\n+\n+/**\n+ * Contains functionality of SMTP Client.\n+ */\n+public class SmtpClient {\n+\n+    private static final Logger log = LoggerFactory.getLogger(SmtpClient.class);\n+\n+    private SmtpClient() {\n+        // Singleton class\n+    }\n+\n+    /**\n+     * Initializes the ObjectValue object with the SMTP Properties.\n+     * @param clientEndpoint Represents the SMTP Client class\n+     * @param config Properties required to configure the SMTP Session\n+     * @throws BallerinaSmtpException If an error occurs in SMTP client\n+     */\n+    public static void initClientEndpoint(ObjectValue clientEndpoint, MapValue<Object, Object> config)\n+            throws BallerinaSmtpException {\n+        log.debug(\"[SmtpClient][InitClient] Calling getProperties\");\n+        Properties properties = SmtpUtil.getProperties(config);\n+        log.debug(\"[SmtpClient][Send] Creating session\");\n+        Session session = Session.getInstance(properties,\n+                new javax.mail.Authenticator() {\n+                    protected PasswordAuthentication getPasswordAuthentication() {\n+                        return new PasswordAuthentication(properties.getProperty(SmtpConstants.PROPS_USERNAME),\n+                                properties.getProperty(SmtpConstants.PROPS_PASSWORD));\n+                    }\n+                });\n+        clientEndpoint.addNativeData(SmtpConstants.PROPS_SESSION, session);\n+        clientEndpoint.addNativeData(SmtpConstants.PROPS_USERNAME,\n+                properties.getProperty(SmtpConstants.PROPS_USERNAME));\n+    }\n+\n+    /**\n+     * Send an email to an SMTP server.\n+     * @param clientConnector Represents the SMTP Client class\n+     * @param message Fields of an email\n+     * @throws BallerinaSmtpException If an error occurs in SMTP client", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 76}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2OTY2Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * This class validates annotations attached to Ballerina service and resource nodes.\n          \n          \n            \n             * This class validates annotations attached to the Ballerina service and its resource nodes.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385569666", "createdAt": "2020-02-28T08:43:30Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/service/compiler/EmailListenerCompilerPlugin.java", "diffHunk": "@@ -0,0 +1,37 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.service.compiler;\n+\n+import org.ballerinalang.compiler.plugins.AbstractCompilerPlugin;\n+import org.ballerinalang.util.diagnostic.DiagnosticLog;\n+\n+\n+/**\n+ * This class validates annotations attached to Ballerina service and resource nodes.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2OTg1Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * Constants for IMAP related functions.\n          \n          \n            \n             * Constants for IMAP-related functions.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385569857", "createdAt": "2020-02-28T08:44:00Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/ImapConstants.java", "diffHunk": "@@ -0,0 +1,39 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+/**\n+ * Constants for IMAP related functions.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2OTkyNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * Constants for POP3 related functions.\n          \n          \n            \n             * Constants for POP3-related functions.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385569924", "createdAt": "2020-02-28T08:44:09Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/PopConstants.java", "diffHunk": "@@ -0,0 +1,47 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+/**\n+ * Constants for POP3 related functions.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU3MDAwMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * Contains Utility functions related to POP3 protocol.\n          \n          \n            \n             * Contains Utility functions related to the POP3 protocol.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385570002", "createdAt": "2020-02-28T08:44:21Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/PopUtil.java", "diffHunk": "@@ -0,0 +1,210 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+import org.ballerinalang.jvm.BallerinaValues;\n+import org.ballerinalang.jvm.types.BArrayType;\n+import org.ballerinalang.jvm.types.BTypes;\n+import org.ballerinalang.jvm.values.ArrayValue;\n+import org.ballerinalang.jvm.values.ArrayValueImpl;\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Properties;\n+\n+import javax.mail.Address;\n+import javax.mail.BodyPart;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.internet.MimeMultipart;\n+\n+/**\n+ * Contains Utility functions related to POP3 protocol.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU3MDEzMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Generates MapValue object using the passed Message.\n          \n          \n            \n                 * Generates MapValue object using the passed message.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385570131", "createdAt": "2020-02-28T08:44:39Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/PopUtil.java", "diffHunk": "@@ -0,0 +1,210 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+import org.ballerinalang.jvm.BallerinaValues;\n+import org.ballerinalang.jvm.types.BArrayType;\n+import org.ballerinalang.jvm.types.BTypes;\n+import org.ballerinalang.jvm.values.ArrayValue;\n+import org.ballerinalang.jvm.values.ArrayValueImpl;\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Properties;\n+\n+import javax.mail.Address;\n+import javax.mail.BodyPart;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.internet.MimeMultipart;\n+\n+/**\n+ * Contains Utility functions related to POP3 protocol.\n+ */\n+public class PopUtil {\n+\n+    private static final Logger log = LoggerFactory.getLogger(PopUtil.class);\n+    private static final int MAX_PORT = 65535;\n+\n+    /**\n+     * Generates Properties object using the passed MapValue.\n+     *\n+     * @param popConfig MapValue with the configuration values\n+     * @param isPop True if the protocol is POP3 and false otherwise (if protocol is IMAP)\n+     * @return Properties object\n+     */\n+    public static Properties getProperties(MapValue popConfig, boolean isPop) {\n+        log.debug(\"[PopUtil][getProperties] Extracting Property values from Config\");\n+        Properties properties = new Properties();\n+        if (isPop) {\n+            properties.put(PopConstants.PROPS_POP_HOST, popConfig.getStringValue(PopConstants.PROPS_HOST));\n+            properties.put(PopConstants.PROPS_POP_PORT,\n+                    extractPortValue(popConfig.getIntValue(PopConstants.PROPS_PORT), isPop));\n+            properties.put(PopConstants.PROPS_POP_AUTH, \"true\");\n+            properties.put(PopConstants.PROPS_POP_STARTTLS, \"true\");\n+            properties.put(EmailConstants.MAIL_STORE_PROTOCOL, PopConstants.POP_PROTOCOL);\n+        } else {\n+            properties.put(ImapConstants.PROPS_IMAP_HOST, popConfig.getStringValue(PopConstants.PROPS_HOST));\n+            properties.put(ImapConstants.PROPS_IMAP_PORT,\n+                    extractPortValue(popConfig.getIntValue(PopConstants.PROPS_PORT), isPop));\n+            properties.put(ImapConstants.PROPS_IMAP_AUTH, \"true\");\n+            properties.put(ImapConstants.PROPS_IMAP_STARTTLS, \"true\");\n+            properties.put(EmailConstants.MAIL_STORE_PROTOCOL, ImapConstants.IMAP_PROTOCOL);\n+        }\n+\n+        properties.put(PopConstants.PROPS_USERNAME, popConfig.getStringValue(PopConstants.PROPS_USERNAME));\n+        properties.put(PopConstants.PROPS_PASSWORD, popConfig.getStringValue(PopConstants.PROPS_PASSWORD));\n+\n+        log.debug(\"[PopUtil][getProperties] Property object created. Returning Object to PopClient\");\n+        return properties;\n+    }\n+\n+\n+    /**\n+     * Generates MapValue object using the passed Message.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 84}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU3MDI3Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @param longValue Port value extracted from Config\n          \n          \n            \n                 * @param longValue Port value extracted from the Config", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385570272", "createdAt": "2020-02-28T08:45:02Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/PopUtil.java", "diffHunk": "@@ -0,0 +1,210 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+import org.ballerinalang.jvm.BallerinaValues;\n+import org.ballerinalang.jvm.types.BArrayType;\n+import org.ballerinalang.jvm.types.BTypes;\n+import org.ballerinalang.jvm.values.ArrayValue;\n+import org.ballerinalang.jvm.values.ArrayValueImpl;\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Properties;\n+\n+import javax.mail.Address;\n+import javax.mail.BodyPart;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.internet.MimeMultipart;\n+\n+/**\n+ * Contains Utility functions related to POP3 protocol.\n+ */\n+public class PopUtil {\n+\n+    private static final Logger log = LoggerFactory.getLogger(PopUtil.class);\n+    private static final int MAX_PORT = 65535;\n+\n+    /**\n+     * Generates Properties object using the passed MapValue.\n+     *\n+     * @param popConfig MapValue with the configuration values\n+     * @param isPop True if the protocol is POP3 and false otherwise (if protocol is IMAP)\n+     * @return Properties object\n+     */\n+    public static Properties getProperties(MapValue popConfig, boolean isPop) {\n+        log.debug(\"[PopUtil][getProperties] Extracting Property values from Config\");\n+        Properties properties = new Properties();\n+        if (isPop) {\n+            properties.put(PopConstants.PROPS_POP_HOST, popConfig.getStringValue(PopConstants.PROPS_HOST));\n+            properties.put(PopConstants.PROPS_POP_PORT,\n+                    extractPortValue(popConfig.getIntValue(PopConstants.PROPS_PORT), isPop));\n+            properties.put(PopConstants.PROPS_POP_AUTH, \"true\");\n+            properties.put(PopConstants.PROPS_POP_STARTTLS, \"true\");\n+            properties.put(EmailConstants.MAIL_STORE_PROTOCOL, PopConstants.POP_PROTOCOL);\n+        } else {\n+            properties.put(ImapConstants.PROPS_IMAP_HOST, popConfig.getStringValue(PopConstants.PROPS_HOST));\n+            properties.put(ImapConstants.PROPS_IMAP_PORT,\n+                    extractPortValue(popConfig.getIntValue(PopConstants.PROPS_PORT), isPop));\n+            properties.put(ImapConstants.PROPS_IMAP_AUTH, \"true\");\n+            properties.put(ImapConstants.PROPS_IMAP_STARTTLS, \"true\");\n+            properties.put(EmailConstants.MAIL_STORE_PROTOCOL, ImapConstants.IMAP_PROTOCOL);\n+        }\n+\n+        properties.put(PopConstants.PROPS_USERNAME, popConfig.getStringValue(PopConstants.PROPS_USERNAME));\n+        properties.put(PopConstants.PROPS_PASSWORD, popConfig.getStringValue(PopConstants.PROPS_PASSWORD));\n+\n+        log.debug(\"[PopUtil][getProperties] Property object created. Returning Object to PopClient\");\n+        return properties;\n+    }\n+\n+\n+    /**\n+     * Generates MapValue object using the passed Message.\n+     *\n+     * @param message received\n+     * @return MapValue object\n+     * @throws MessagingException If an error occurs related to messaging\n+     * @throws IOException If an error occurs related to I/O\n+     */\n+    public static MapValue getMapValue(Message message) throws MessagingException, IOException {\n+        log.debug(\"[PopUtil][getMapValue] Extracting MapValue values from Config\");\n+        Map<String, Object> valueMap = new HashMap<>();\n+        Address[] toAddress = message.getRecipients(Message.RecipientType.TO);\n+        Address[] ccAddress = message.getRecipients(Message.RecipientType.CC);\n+        Address[] bccAddress = message.getRecipients(Message.RecipientType.BCC);\n+        Address[] replyToAddress = message.getReplyTo();\n+        int toAddressArrayLength = getNullArrayLengthChecked(toAddress);\n+        int ccAddressArrayLength = getNullArrayLengthChecked(ccAddress);\n+        int bccAddressArrayLength = getNullArrayLengthChecked(bccAddress);\n+        int replyToAddressArrayLength = getNullArrayLengthChecked(replyToAddress);\n+        ArrayValue toAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue ccAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue bccAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue replyToAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        for (int i = 0; i < toAddressArrayLength; i++) {\n+            toAddressArrayValue.add(i, toAddress[i].toString());\n+        }\n+        for (int i = 0; i < ccAddressArrayLength; i++) {\n+            ccAddressArrayValue.add(i, ccAddress[i].toString());\n+        }\n+        for (int i = 0; i < bccAddressArrayLength; i++) {\n+            bccAddressArrayValue.add(i, bccAddress[i].toString());\n+        }\n+        for (int i = 0; i < replyToAddressArrayLength; i++) {\n+            replyToAddressArrayValue.add(i, replyToAddress[i].toString());\n+        }\n+        String subject = getStringNullChecked(message.getSubject());\n+        String messageBody = \"\";\n+        if (message.isMimeType(\"text/plain\")) {\n+            if (message.getContent() != null) {\n+                messageBody = message.getContent().toString();\n+            } else {\n+                messageBody = \"\";\n+            }\n+        } else if (message.isMimeType(\"multipart/*\")) {\n+            MimeMultipart mimeMultipart = (MimeMultipart) message.getContent();\n+            messageBody = getTextFromMimeMultipart(mimeMultipart);\n+        }\n+        String fromAddress;\n+        if (message.getFrom() != null) {\n+            fromAddress = message.getFrom()[0].toString();\n+        } else {\n+            fromAddress = \"\";\n+        }\n+        String senderAddress = \"\";\n+        valueMap.put(EmailConstants.MESSAGE_TO, toAddressArrayValue);\n+        valueMap.put(EmailConstants.MESSAGE_CC, ccAddressArrayValue);\n+        valueMap.put(EmailConstants.MESSAGE_BCC, bccAddressArrayValue);\n+        valueMap.put(EmailConstants.MESSAGE_REPLY_TO, replyToAddressArrayValue);\n+        valueMap.put(EmailConstants.MESSAGE_SUBJECT, subject);\n+        valueMap.put(EmailConstants.MESSAGE_MESSAGE_BODY, messageBody);\n+        valueMap.put(EmailConstants.MESSAGE_FROM, fromAddress);\n+        valueMap.put(EmailConstants.MESSAGE_SENDER, senderAddress);\n+        log.debug(\"[PopUtil][getMapValue] MapValue object created. Returning Object to PopClient\");\n+        return BallerinaValues.createRecordValue(EmailConstants.EMAIL_PACKAGE_ID, PopConstants.EMAIL, valueMap);\n+    }\n+\n+    private static String getTextFromMimeMultipart(\n+            MimeMultipart mimeMultipart)  throws MessagingException, IOException {\n+        StringBuilder result = new StringBuilder();\n+        int count = mimeMultipart.getCount();\n+        for (int i = 0; i < count; i++) {\n+            BodyPart bodyPart = mimeMultipart.getBodyPart(i);\n+            if (bodyPart.isMimeType(\"text/plain\")) {\n+                result.append(\"\\n\").append(bodyPart.getContent());\n+                break; // without break same text appears twice in my tests\n+            } else if (bodyPart.isMimeType(\"text/html\")) {\n+                String html = (String) bodyPart.getContent();\n+                // result = result + \"\\n\" + org.jsoup.Jsoup.parse(html).text();\n+                result.append(\"\\n\").append(html);\n+            } else if (bodyPart.getContent() instanceof MimeMultipart) {\n+                result.append(getTextFromMimeMultipart((MimeMultipart) bodyPart.getContent()));\n+            }\n+        }\n+        return result.toString();\n+    }\n+\n+    private static String getStringNullChecked(String string) {\n+        if (string == null) {\n+            return \"\";\n+        } else {\n+            return string;\n+        }\n+    }\n+\n+    private static int getNullArrayLengthChecked(Address[] addresses) {\n+        if (addresses == null) {\n+            return 0;\n+        } else {\n+            return addresses.length;\n+        }\n+    }\n+\n+\n+    /**\n+     * Extracts port value and checks validity.\n+     *\n+     * @param longValue Port value extracted from Config", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 189}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU3MDQ3OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * Constants for SMTP related functions.\n          \n          \n            \n             * Constants for SMTP-related functions.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385570479", "createdAt": "2020-02-28T08:45:29Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/SmtpConstants.java", "diffHunk": "@@ -0,0 +1,43 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+/**\n+ * Constants for SMTP related functions.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU3MDYyNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * Contains Utility functions related to the SMTP protocol.\n          \n          \n            \n             * Contains the utility functions related to the SMTP protocol.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385570627", "createdAt": "2020-02-28T08:45:49Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/SmtpUtil.java", "diffHunk": "@@ -0,0 +1,167 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.Properties;\n+\n+import javax.mail.Address;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.Session;\n+import javax.mail.internet.AddressException;\n+import javax.mail.internet.InternetAddress;\n+import javax.mail.internet.MimeMessage;\n+\n+\n+/**\n+ * Contains Utility functions related to the SMTP protocol.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU3MDY4NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Generates Properties object using the passed MapValue.\n          \n          \n            \n                 * Generates the Properties object using the passed MapValue.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385570684", "createdAt": "2020-02-28T08:45:57Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/SmtpUtil.java", "diffHunk": "@@ -0,0 +1,167 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.Properties;\n+\n+import javax.mail.Address;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.Session;\n+import javax.mail.internet.AddressException;\n+import javax.mail.internet.InternetAddress;\n+import javax.mail.internet.MimeMessage;\n+\n+\n+/**\n+ * Contains Utility functions related to the SMTP protocol.\n+ */\n+public class SmtpUtil {\n+\n+    private static final Logger log = LoggerFactory.getLogger(SmtpUtil.class);\n+    private static final int MAX_PORT = 65535;\n+\n+    /**\n+     * Generates Properties object using the passed MapValue.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU3MDc4NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @param longValue Port value extracted from Config\n          \n          \n            \n                 * @param longValue Port value extracted from the Config", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385570785", "createdAt": "2020-02-28T08:46:11Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/SmtpUtil.java", "diffHunk": "@@ -0,0 +1,167 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.Properties;\n+\n+import javax.mail.Address;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.Session;\n+import javax.mail.internet.AddressException;\n+import javax.mail.internet.InternetAddress;\n+import javax.mail.internet.MimeMessage;\n+\n+\n+/**\n+ * Contains Utility functions related to the SMTP protocol.\n+ */\n+public class SmtpUtil {\n+\n+    private static final Logger log = LoggerFactory.getLogger(SmtpUtil.class);\n+    private static final int MAX_PORT = 65535;\n+\n+    /**\n+     * Generates Properties object using the passed MapValue.\n+     *\n+     * @param smtpConfig MapValue with the configuration values\n+     * @return Properties object\n+     */\n+    public static Properties getProperties(MapValue smtpConfig) {\n+        Properties properties = new Properties();\n+        properties.put(SmtpConstants.PROPS_SMTP_HOST, smtpConfig.getStringValue(SmtpConstants.PROPS_HOST));\n+        properties.put(SmtpConstants.PROPS_SMTP_PORT,\n+                extractPortValue(smtpConfig.getIntValue(SmtpConstants.PROPS_PORT)));\n+        properties.put(SmtpConstants.PROPS_SMTP_AUTH, \"true\");\n+        properties.put(SmtpConstants.PROPS_SMTP_STARTTLS, \"true\"); //TLS\n+        properties.put(SmtpConstants.PROPS_USERNAME, smtpConfig.getStringValue(SmtpConstants.PROPS_USERNAME));\n+        properties.put(SmtpConstants.PROPS_PASSWORD, smtpConfig.getStringValue(SmtpConstants.PROPS_PASSWORD));\n+        log.debug(\"[SmtpUtil][getProperties] Property object created. Returning Object to SMTPClient\");\n+        return properties;\n+    }\n+\n+\n+    /**\n+     * Extracts port value and checks validity.\n+     *\n+     * @param longValue Port value extracted from Config", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU3MDg4MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @param session Session the message is attached\n          \n          \n            \n                 * @param session Session to which the message is attached", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385570881", "createdAt": "2020-02-28T08:46:25Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/SmtpUtil.java", "diffHunk": "@@ -0,0 +1,167 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.Properties;\n+\n+import javax.mail.Address;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.Session;\n+import javax.mail.internet.AddressException;\n+import javax.mail.internet.InternetAddress;\n+import javax.mail.internet.MimeMessage;\n+\n+\n+/**\n+ * Contains Utility functions related to the SMTP protocol.\n+ */\n+public class SmtpUtil {\n+\n+    private static final Logger log = LoggerFactory.getLogger(SmtpUtil.class);\n+    private static final int MAX_PORT = 65535;\n+\n+    /**\n+     * Generates Properties object using the passed MapValue.\n+     *\n+     * @param smtpConfig MapValue with the configuration values\n+     * @return Properties object\n+     */\n+    public static Properties getProperties(MapValue smtpConfig) {\n+        Properties properties = new Properties();\n+        properties.put(SmtpConstants.PROPS_SMTP_HOST, smtpConfig.getStringValue(SmtpConstants.PROPS_HOST));\n+        properties.put(SmtpConstants.PROPS_SMTP_PORT,\n+                extractPortValue(smtpConfig.getIntValue(SmtpConstants.PROPS_PORT)));\n+        properties.put(SmtpConstants.PROPS_SMTP_AUTH, \"true\");\n+        properties.put(SmtpConstants.PROPS_SMTP_STARTTLS, \"true\"); //TLS\n+        properties.put(SmtpConstants.PROPS_USERNAME, smtpConfig.getStringValue(SmtpConstants.PROPS_USERNAME));\n+        properties.put(SmtpConstants.PROPS_PASSWORD, smtpConfig.getStringValue(SmtpConstants.PROPS_PASSWORD));\n+        log.debug(\"[SmtpUtil][getProperties] Property object created. Returning Object to SMTPClient\");\n+        return properties;\n+    }\n+\n+\n+    /**\n+     * Extracts port value and checks validity.\n+     *\n+     * @param longValue Port value extracted from Config\n+     * @return Port value as a string\n+     */\n+    private static String extractPortValue(long longValue) {\n+        log.debug(\"[SmtpUtil][extractPortValue] Extracting Port value\");\n+        if (longValue <= 0 || longValue > MAX_PORT) {\n+            log.error(\"Invalid port number given in configuration. Setting default port \"\n+                    + SmtpConstants.DEFAULT_PORT_NUMBER);\n+            return SmtpConstants.DEFAULT_PORT_NUMBER;\n+        } else {\n+            return Long.toString(longValue);\n+        }\n+    }\n+\n+    /**\n+     * Generates a MIME message to be sent as an email.\n+     *\n+     * @param session Session the message is attached", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 84}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU3MDk0Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @param username User who sens the email\n          \n          \n            \n                 * @param username User who sends the email", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385570943", "createdAt": "2020-02-28T08:46:32Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/SmtpUtil.java", "diffHunk": "@@ -0,0 +1,167 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.Properties;\n+\n+import javax.mail.Address;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.Session;\n+import javax.mail.internet.AddressException;\n+import javax.mail.internet.InternetAddress;\n+import javax.mail.internet.MimeMessage;\n+\n+\n+/**\n+ * Contains Utility functions related to the SMTP protocol.\n+ */\n+public class SmtpUtil {\n+\n+    private static final Logger log = LoggerFactory.getLogger(SmtpUtil.class);\n+    private static final int MAX_PORT = 65535;\n+\n+    /**\n+     * Generates Properties object using the passed MapValue.\n+     *\n+     * @param smtpConfig MapValue with the configuration values\n+     * @return Properties object\n+     */\n+    public static Properties getProperties(MapValue smtpConfig) {\n+        Properties properties = new Properties();\n+        properties.put(SmtpConstants.PROPS_SMTP_HOST, smtpConfig.getStringValue(SmtpConstants.PROPS_HOST));\n+        properties.put(SmtpConstants.PROPS_SMTP_PORT,\n+                extractPortValue(smtpConfig.getIntValue(SmtpConstants.PROPS_PORT)));\n+        properties.put(SmtpConstants.PROPS_SMTP_AUTH, \"true\");\n+        properties.put(SmtpConstants.PROPS_SMTP_STARTTLS, \"true\"); //TLS\n+        properties.put(SmtpConstants.PROPS_USERNAME, smtpConfig.getStringValue(SmtpConstants.PROPS_USERNAME));\n+        properties.put(SmtpConstants.PROPS_PASSWORD, smtpConfig.getStringValue(SmtpConstants.PROPS_PASSWORD));\n+        log.debug(\"[SmtpUtil][getProperties] Property object created. Returning Object to SMTPClient\");\n+        return properties;\n+    }\n+\n+\n+    /**\n+     * Extracts port value and checks validity.\n+     *\n+     * @param longValue Port value extracted from Config\n+     * @return Port value as a string\n+     */\n+    private static String extractPortValue(long longValue) {\n+        log.debug(\"[SmtpUtil][extractPortValue] Extracting Port value\");\n+        if (longValue <= 0 || longValue > MAX_PORT) {\n+            log.error(\"Invalid port number given in configuration. Setting default port \"\n+                    + SmtpConstants.DEFAULT_PORT_NUMBER);\n+            return SmtpConstants.DEFAULT_PORT_NUMBER;\n+        } else {\n+            return Long.toString(longValue);\n+        }\n+    }\n+\n+    /**\n+     * Generates a MIME message to be sent as an email.\n+     *\n+     * @param session Session the message is attached\n+     * @param username User who sens the email", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 85}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU3MDk5Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @param message Ballerina typed data object\n          \n          \n            \n                 * @param message Ballerina-typed data object", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385570996", "createdAt": "2020-02-28T08:46:41Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/SmtpUtil.java", "diffHunk": "@@ -0,0 +1,167 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.Properties;\n+\n+import javax.mail.Address;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.Session;\n+import javax.mail.internet.AddressException;\n+import javax.mail.internet.InternetAddress;\n+import javax.mail.internet.MimeMessage;\n+\n+\n+/**\n+ * Contains Utility functions related to the SMTP protocol.\n+ */\n+public class SmtpUtil {\n+\n+    private static final Logger log = LoggerFactory.getLogger(SmtpUtil.class);\n+    private static final int MAX_PORT = 65535;\n+\n+    /**\n+     * Generates Properties object using the passed MapValue.\n+     *\n+     * @param smtpConfig MapValue with the configuration values\n+     * @return Properties object\n+     */\n+    public static Properties getProperties(MapValue smtpConfig) {\n+        Properties properties = new Properties();\n+        properties.put(SmtpConstants.PROPS_SMTP_HOST, smtpConfig.getStringValue(SmtpConstants.PROPS_HOST));\n+        properties.put(SmtpConstants.PROPS_SMTP_PORT,\n+                extractPortValue(smtpConfig.getIntValue(SmtpConstants.PROPS_PORT)));\n+        properties.put(SmtpConstants.PROPS_SMTP_AUTH, \"true\");\n+        properties.put(SmtpConstants.PROPS_SMTP_STARTTLS, \"true\"); //TLS\n+        properties.put(SmtpConstants.PROPS_USERNAME, smtpConfig.getStringValue(SmtpConstants.PROPS_USERNAME));\n+        properties.put(SmtpConstants.PROPS_PASSWORD, smtpConfig.getStringValue(SmtpConstants.PROPS_PASSWORD));\n+        log.debug(\"[SmtpUtil][getProperties] Property object created. Returning Object to SMTPClient\");\n+        return properties;\n+    }\n+\n+\n+    /**\n+     * Extracts port value and checks validity.\n+     *\n+     * @param longValue Port value extracted from Config\n+     * @return Port value as a string\n+     */\n+    private static String extractPortValue(long longValue) {\n+        log.debug(\"[SmtpUtil][extractPortValue] Extracting Port value\");\n+        if (longValue <= 0 || longValue > MAX_PORT) {\n+            log.error(\"Invalid port number given in configuration. Setting default port \"\n+                    + SmtpConstants.DEFAULT_PORT_NUMBER);\n+            return SmtpConstants.DEFAULT_PORT_NUMBER;\n+        } else {\n+            return Long.toString(longValue);\n+        }\n+    }\n+\n+    /**\n+     * Generates a MIME message to be sent as an email.\n+     *\n+     * @param session Session the message is attached\n+     * @param username User who sens the email\n+     * @param message Ballerina typed data object", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 86}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU3MTIwNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * Test class for email receive using IMAP4 with least number of parameters.\n          \n          \n            \n             * Test class for email receipt using IMAP4 with least number of parameters.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385571204", "createdAt": "2020-02-28T08:47:08Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/test/java/org/ballerinalang/stdlib/email/ImapSimpleEmailReceiveTest.java", "diffHunk": "@@ -0,0 +1,108 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email;\n+\n+\n+import com.icegreen.greenmail.user.GreenMailUser;\n+import com.icegreen.greenmail.util.GreenMail;\n+import com.icegreen.greenmail.util.ServerSetupTest;\n+import org.ballerinalang.model.values.BError;\n+import org.ballerinalang.model.values.BMap;\n+import org.ballerinalang.model.values.BValue;\n+import org.ballerinalang.test.util.BCompileUtil;\n+import org.ballerinalang.test.util.BRunUtil;\n+import org.ballerinalang.test.util.CompileResult;\n+import org.testng.annotations.AfterClass;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+\n+import java.io.IOException;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.Session;\n+import javax.mail.internet.InternetAddress;\n+import javax.mail.internet.MimeMessage;\n+\n+import static org.testng.AssertJUnit.assertEquals;\n+import static org.testng.AssertJUnit.assertNotNull;\n+import static org.testng.AssertJUnit.fail;\n+\n+\n+/**\n+ * Test class for email receive using IMAP4 with least number of parameters.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU3MTMzMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // create an e-mail message using javax.mail ..\n          \n          \n            \n                    // Create an e-mail message using javax.mail.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385571331", "createdAt": "2020-02-28T08:47:26Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/test/java/org/ballerinalang/stdlib/email/ImapSimpleEmailReceiveTest.java", "diffHunk": "@@ -0,0 +1,108 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email;\n+\n+\n+import com.icegreen.greenmail.user.GreenMailUser;\n+import com.icegreen.greenmail.util.GreenMail;\n+import com.icegreen.greenmail.util.ServerSetupTest;\n+import org.ballerinalang.model.values.BError;\n+import org.ballerinalang.model.values.BMap;\n+import org.ballerinalang.model.values.BValue;\n+import org.ballerinalang.test.util.BCompileUtil;\n+import org.ballerinalang.test.util.BRunUtil;\n+import org.ballerinalang.test.util.CompileResult;\n+import org.testng.annotations.AfterClass;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+\n+import java.io.IOException;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.Session;\n+import javax.mail.internet.InternetAddress;\n+import javax.mail.internet.MimeMessage;\n+\n+import static org.testng.AssertJUnit.assertEquals;\n+import static org.testng.AssertJUnit.assertNotNull;\n+import static org.testng.AssertJUnit.fail;\n+\n+\n+/**\n+ * Test class for email receive using IMAP4 with least number of parameters.\n+ *\n+ * @since 1.1.3\n+ */\n+public class ImapSimpleEmailReceiveTest {\n+\n+    private CompileResult compileResult;\n+    private static final String USER_PASSWORD = \"abcdef123\";\n+    private static final String USER_NAME = \"hascode\";\n+    private static final String EMAIL_USER_ADDRESS = \"hascode@localhost\";\n+    private static final String EMAIL_FROM = \"someone@localhost.com\";\n+    private static final String EMAIL_SUBJECT = \"Test E-Mail\";\n+    private static final String EMAIL_TEXT = \"This is a test e-mail.\";\n+    private GreenMail mailServer;\n+\n+    @BeforeClass\n+    public void setup() throws MessagingException {\n+\n+        mailServer = new GreenMail(ServerSetupTest.IMAP);\n+        mailServer.start();\n+        GreenMailUser user = mailServer.setUser(EMAIL_USER_ADDRESS, USER_NAME, USER_PASSWORD);\n+        mailServer.setUser(EMAIL_USER_ADDRESS, USER_NAME, USER_PASSWORD);\n+\n+        // create an e-mail message using javax.mail ..", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 74}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU3MTM3Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // use greenmail to store the message\n          \n          \n            \n                    // Use greenmail to store the message.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385571377", "createdAt": "2020-02-28T08:47:35Z", "author": {"login": "praneesha"}, "path": "stdlib/email/src/test/java/org/ballerinalang/stdlib/email/ImapSimpleEmailReceiveTest.java", "diffHunk": "@@ -0,0 +1,108 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email;\n+\n+\n+import com.icegreen.greenmail.user.GreenMailUser;\n+import com.icegreen.greenmail.util.GreenMail;\n+import com.icegreen.greenmail.util.ServerSetupTest;\n+import org.ballerinalang.model.values.BError;\n+import org.ballerinalang.model.values.BMap;\n+import org.ballerinalang.model.values.BValue;\n+import org.ballerinalang.test.util.BCompileUtil;\n+import org.ballerinalang.test.util.BRunUtil;\n+import org.ballerinalang.test.util.CompileResult;\n+import org.testng.annotations.AfterClass;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.Test;\n+\n+import java.io.IOException;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.Session;\n+import javax.mail.internet.InternetAddress;\n+import javax.mail.internet.MimeMessage;\n+\n+import static org.testng.AssertJUnit.assertEquals;\n+import static org.testng.AssertJUnit.assertNotNull;\n+import static org.testng.AssertJUnit.fail;\n+\n+\n+/**\n+ * Test class for email receive using IMAP4 with least number of parameters.\n+ *\n+ * @since 1.1.3\n+ */\n+public class ImapSimpleEmailReceiveTest {\n+\n+    private CompileResult compileResult;\n+    private static final String USER_PASSWORD = \"abcdef123\";\n+    private static final String USER_NAME = \"hascode\";\n+    private static final String EMAIL_USER_ADDRESS = \"hascode@localhost\";\n+    private static final String EMAIL_FROM = \"someone@localhost.com\";\n+    private static final String EMAIL_SUBJECT = \"Test E-Mail\";\n+    private static final String EMAIL_TEXT = \"This is a test e-mail.\";\n+    private GreenMail mailServer;\n+\n+    @BeforeClass\n+    public void setup() throws MessagingException {\n+\n+        mailServer = new GreenMail(ServerSetupTest.IMAP);\n+        mailServer.start();\n+        GreenMailUser user = mailServer.setUser(EMAIL_USER_ADDRESS, USER_NAME, USER_PASSWORD);\n+        mailServer.setUser(EMAIL_USER_ADDRESS, USER_NAME, USER_PASSWORD);\n+\n+        // create an e-mail message using javax.mail ..\n+        MimeMessage message = new MimeMessage((Session) null);\n+        message.setFrom(new InternetAddress(EMAIL_FROM));\n+        message.addRecipient(Message.RecipientType.TO, new InternetAddress(EMAIL_USER_ADDRESS));\n+        message.setSubject(EMAIL_SUBJECT);\n+        message.setText(EMAIL_TEXT);\n+\n+        // use greenmail to store the message", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 81}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjM3MTc1", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366237175", "createdAt": "2020-02-28T08:48:04Z", "commit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODo0ODowNFrOFvtbAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODo0ODowNFrOFvtbAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU3MTU4Nw==", "bodyText": "IMO, we need to return the error here.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385571587", "createdAt": "2020-02-28T08:48:04Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/client/PopClient.java", "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.client;\n+\n+\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.ballerinalang.jvm.values.ObjectValue;\n+import org.ballerinalang.stdlib.email.util.BallerinaPopException;\n+import org.ballerinalang.stdlib.email.util.ImapConstants;\n+import org.ballerinalang.stdlib.email.util.PopConstants;\n+import org.ballerinalang.stdlib.email.util.PopUtil;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.util.Properties;\n+\n+import javax.mail.Folder;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.NoSuchProviderException;\n+import javax.mail.Session;\n+import javax.mail.Store;\n+\n+\n+/**\n+ * Contains functionality of POP Client.\n+ */\n+public class PopClient {\n+\n+    private static final Logger log = LoggerFactory.getLogger(PopClient.class);\n+\n+    private PopClient() {\n+        // Singleton class\n+    }\n+\n+    /**\n+     * Initializes the ObjectValue object with the POP Properties.\n+     * @param clientEndpoint Represents the POP Client class\n+     * @param config Properties required to configure the POP Session\n+     * @param isPop True if the protocol is POP3 and false otherwise (if protocol is IMAP)\n+     * @throws BallerinaPopException If an error occurs in POP client\n+     */\n+    public static void initClientEndpoint(ObjectValue clientEndpoint, MapValue<Object, Object> config, boolean isPop)\n+            throws BallerinaPopException {\n+        log.debug(\"[PopClient][InitClient] Calling getProperties\");\n+        Properties properties = PopUtil.getProperties(config, isPop);\n+        Session session = Session.getInstance(properties, null);\n+        try {\n+            Store store;\n+\n+            if (isPop) {\n+                store = session.getStore(PopConstants.POP_PROTOCOL);\n+                clientEndpoint.addNativeData(PopConstants.PROPS_HOST,\n+                        properties.getProperty(PopConstants.PROPS_POP_HOST));\n+            } else {\n+                store = session.getStore(ImapConstants.IMAP_PROTOCOL);\n+                clientEndpoint.addNativeData(PopConstants.PROPS_HOST,\n+                        properties.getProperty(ImapConstants.PROPS_IMAP_HOST));\n+            }\n+            clientEndpoint.addNativeData(PopConstants.PROPS_STORE, store);\n+            clientEndpoint.addNativeData(PopConstants.PROPS_USERNAME,\n+                    properties.getProperty(PopConstants.PROPS_USERNAME));\n+            clientEndpoint.addNativeData(PopConstants.PROPS_PASSWORD,\n+                    properties.getProperty(PopConstants.PROPS_PASSWORD));\n+        } catch (NoSuchProviderException e) {\n+            log.error(\"Failed to read message : \", e);\n+            throw new BallerinaPopException(\"Error occurred while accessing POP server\", e);\n+        }\n+    }\n+\n+    /**\n+     * Read emails from the server.\n+     * @param clientConnector Represents the POP Client class\n+     * @param filter Criteria which are used to read emails\n+     * @param isPop True if the protocol is POP3 and false otherwise (if protocol is IMAP)\n+     * @return MapValue Returns the type supported to Ballerina\n+     * @throws BallerinaPopException If an error occurs in POP client\n+     */\n+    public static MapValue readMessage(ObjectValue clientConnector, MapValue<Object, Object> filter, boolean isPop)\n+            throws BallerinaPopException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 97}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjM4MjM2", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366238236", "createdAt": "2020-02-28T08:49:53Z", "commit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODo0OTo1NFrOFvtd_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODo0OTo1NFrOFvtd_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU3MjM0OA==", "bodyText": "We need to update the version in all the places.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385572348", "createdAt": "2020-02-28T08:49:54Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/ballerina/Ballerina.toml", "diffHunk": "@@ -0,0 +1,18 @@\n+[project]\n+org-name = \"ballerina\"\n+version = \"1.1.3\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjQxNzM4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366241738", "createdAt": "2020-02-28T08:56:17Z", "commit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODo1NjoxN1rOFvto4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODo1NjoxN1rOFvto4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU3NTEzOA==", "bodyText": "I think we need to implement the logic of this class.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385575138", "createdAt": "2020-02-28T08:56:17Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/service/compiler/EmailListenerCompilerPlugin.java", "diffHunk": "@@ -0,0 +1,37 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.service.compiler;\n+\n+import org.ballerinalang.compiler.plugins.AbstractCompilerPlugin;\n+import org.ballerinalang.util.diagnostic.DiagnosticLog;\n+\n+\n+/**\n+ * This class validates annotations attached to Ballerina service and resource nodes.\n+ *\n+ * @since 1.1.3\n+ */\n+class EmailListenerCompilerPlugin extends AbstractCompilerPlugin {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjQyMDIz", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366242023", "createdAt": "2020-02-28T08:56:45Z", "commit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODo1Njo0NVrOFvtp3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODo1Njo0NVrOFvtp3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU3NTM5MQ==", "bodyText": "Shall we get the filter value as user input without hardcoding to \"INBOX\"?\nset it as a defaultable parameter", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385575391", "createdAt": "2020-02-28T08:56:45Z", "author": {"login": "daneshk"}, "path": "stdlib/email/src/main/ballerina/src/email/imap_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,55 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an IMAP Client that interacts with an IMAP Server\n+public type ImapClient client object {\n+\n+    # Gets invoked during object initialization\n+    #\n+    # + clientConfig - Configurations for IMAP Client\n+    public function __init(ImapConfig clientConfig) {\n+        error? response = initImapClientEndpoint(self, clientConfig, false);\n+    }\n+\n+    # Used to read a message\n+    #\n+    # + return - An `error` if failed to send the message to the recipient\n+    public remote function read() returns Email|error? {\n+        Filter filter = {\n+            folder: \"INBOX\"\n+        };", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 33}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjQ0NjE5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366244619", "createdAt": "2020-02-28T09:01:07Z", "commit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwOTowMTowN1rOFvtxmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwOTowMTowN1rOFvtxmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU3NzM2OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            public function send(SmtpClient clientEndpoint, map<anydata> email) returns error? = @java:Method {\n          \n          \n            \n            public function send(SmtpClient clientEndpoint, Email email) returns error? = @java:Method {", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385577368", "createdAt": "2020-02-28T09:01:07Z", "author": {"login": "daneshk"}, "path": "stdlib/email/src/main/ballerina/src/email/service_endpoint.bal", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+import ballerinax/java;\n+\n+public function initSmtpClientEndpoint(SmtpClient clientEndpoint, map<anydata> config) returns error? = @java:Method {\n+    name : \"initClientEndpoint\",\n+    class : \"org.ballerinalang.stdlib.email.client.SmtpClient\"\n+} external;\n+\n+public function send(SmtpClient clientEndpoint, map<anydata> email) returns error? = @java:Method {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjQ0ODUx", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366244851", "createdAt": "2020-02-28T09:01:33Z", "commit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwOTowMTozM1rOFvtyRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwOTowMTozM1rOFvtyRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU3NzU0Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            public function initSmtpClientEndpoint(SmtpClient clientEndpoint, map<anydata> config) returns error? = @java:Method {\n          \n          \n            \n            public function initSmtpClientEndpoint(SmtpClient clientEndpoint, SmtpConfig config) returns error? = @java:Method {", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385577542", "createdAt": "2020-02-28T09:01:33Z", "author": {"login": "daneshk"}, "path": "stdlib/email/src/main/ballerina/src/email/service_endpoint.bal", "diffHunk": "@@ -0,0 +1,49 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+import ballerinax/java;\n+\n+public function initSmtpClientEndpoint(SmtpClient clientEndpoint, map<anydata> config) returns error? = @java:Method {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjQ5NDI2", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366249426", "createdAt": "2020-02-28T09:09:55Z", "commit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwOTowOTo1NVrOFvt_2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwOTowOTo1NVrOFvt_2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU4MTAxOA==", "bodyText": "We can replace this as follows and remove the getStringNullChecked method.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    String subject = getStringNullChecked(message.getSubject());\n          \n          \n            \n                    String subject = message.getSubject() != null ? message.getSubject() : \"\";", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385581018", "createdAt": "2020-02-28T09:09:55Z", "author": {"login": "ldclakmal"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/PopUtil.java", "diffHunk": "@@ -0,0 +1,210 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+import org.ballerinalang.jvm.BallerinaValues;\n+import org.ballerinalang.jvm.types.BArrayType;\n+import org.ballerinalang.jvm.types.BTypes;\n+import org.ballerinalang.jvm.values.ArrayValue;\n+import org.ballerinalang.jvm.values.ArrayValueImpl;\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Properties;\n+\n+import javax.mail.Address;\n+import javax.mail.BodyPart;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.internet.MimeMultipart;\n+\n+/**\n+ * Contains Utility functions related to POP3 protocol.\n+ */\n+public class PopUtil {\n+\n+    private static final Logger log = LoggerFactory.getLogger(PopUtil.class);\n+    private static final int MAX_PORT = 65535;\n+\n+    /**\n+     * Generates Properties object using the passed MapValue.\n+     *\n+     * @param popConfig MapValue with the configuration values\n+     * @param isPop True if the protocol is POP3 and false otherwise (if protocol is IMAP)\n+     * @return Properties object\n+     */\n+    public static Properties getProperties(MapValue popConfig, boolean isPop) {\n+        log.debug(\"[PopUtil][getProperties] Extracting Property values from Config\");\n+        Properties properties = new Properties();\n+        if (isPop) {\n+            properties.put(PopConstants.PROPS_POP_HOST, popConfig.getStringValue(PopConstants.PROPS_HOST));\n+            properties.put(PopConstants.PROPS_POP_PORT,\n+                    extractPortValue(popConfig.getIntValue(PopConstants.PROPS_PORT), isPop));\n+            properties.put(PopConstants.PROPS_POP_AUTH, \"true\");\n+            properties.put(PopConstants.PROPS_POP_STARTTLS, \"true\");\n+            properties.put(EmailConstants.MAIL_STORE_PROTOCOL, PopConstants.POP_PROTOCOL);\n+        } else {\n+            properties.put(ImapConstants.PROPS_IMAP_HOST, popConfig.getStringValue(PopConstants.PROPS_HOST));\n+            properties.put(ImapConstants.PROPS_IMAP_PORT,\n+                    extractPortValue(popConfig.getIntValue(PopConstants.PROPS_PORT), isPop));\n+            properties.put(ImapConstants.PROPS_IMAP_AUTH, \"true\");\n+            properties.put(ImapConstants.PROPS_IMAP_STARTTLS, \"true\");\n+            properties.put(EmailConstants.MAIL_STORE_PROTOCOL, ImapConstants.IMAP_PROTOCOL);\n+        }\n+\n+        properties.put(PopConstants.PROPS_USERNAME, popConfig.getStringValue(PopConstants.PROPS_USERNAME));\n+        properties.put(PopConstants.PROPS_PASSWORD, popConfig.getStringValue(PopConstants.PROPS_PASSWORD));\n+\n+        log.debug(\"[PopUtil][getProperties] Property object created. Returning Object to PopClient\");\n+        return properties;\n+    }\n+\n+\n+    /**\n+     * Generates MapValue object using the passed Message.\n+     *\n+     * @param message received\n+     * @return MapValue object\n+     * @throws MessagingException If an error occurs related to messaging\n+     * @throws IOException If an error occurs related to I/O\n+     */\n+    public static MapValue getMapValue(Message message) throws MessagingException, IOException {\n+        log.debug(\"[PopUtil][getMapValue] Extracting MapValue values from Config\");\n+        Map<String, Object> valueMap = new HashMap<>();\n+        Address[] toAddress = message.getRecipients(Message.RecipientType.TO);\n+        Address[] ccAddress = message.getRecipients(Message.RecipientType.CC);\n+        Address[] bccAddress = message.getRecipients(Message.RecipientType.BCC);\n+        Address[] replyToAddress = message.getReplyTo();\n+        int toAddressArrayLength = getNullArrayLengthChecked(toAddress);\n+        int ccAddressArrayLength = getNullArrayLengthChecked(ccAddress);\n+        int bccAddressArrayLength = getNullArrayLengthChecked(bccAddress);\n+        int replyToAddressArrayLength = getNullArrayLengthChecked(replyToAddress);\n+        ArrayValue toAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue ccAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue bccAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue replyToAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        for (int i = 0; i < toAddressArrayLength; i++) {\n+            toAddressArrayValue.add(i, toAddress[i].toString());\n+        }\n+        for (int i = 0; i < ccAddressArrayLength; i++) {\n+            ccAddressArrayValue.add(i, ccAddress[i].toString());\n+        }\n+        for (int i = 0; i < bccAddressArrayLength; i++) {\n+            bccAddressArrayValue.add(i, bccAddress[i].toString());\n+        }\n+        for (int i = 0; i < replyToAddressArrayLength; i++) {\n+            replyToAddressArrayValue.add(i, replyToAddress[i].toString());\n+        }\n+        String subject = getStringNullChecked(message.getSubject());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "63df7d30118d1066147ba44cb94e949f04fe05a8"}, "originalPosition": 118}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e969b2d676275f2a8ccd2b2e108b8b142df8ec53", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e969b2d676275f2a8ccd2b2e108b8b142df8ec53", "committedDate": "2020-02-28T09:55:15Z", "message": "Remove empty line\n\nCo-Authored-By: Chanaka Lakmal <ldclakmal@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "006587ce7c82b50ff0b59bb39a5bb07e8dcaaf64", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/006587ce7c82b50ff0b59bb39a5bb07e8dcaaf64", "committedDate": "2020-02-28T09:55:36Z", "message": "Remove empty line\n\nCo-Authored-By: Chanaka Lakmal <ldclakmal@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d13f1eab3e52d75fbd60ab8ae7696c3e6aa6507", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0d13f1eab3e52d75fbd60ab8ae7696c3e6aa6507", "committedDate": "2020-02-28T09:55:56Z", "message": "Remove empty line\n\nCo-Authored-By: Chanaka Lakmal <ldclakmal@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00aa135e3127d1cf56c6c71938ab0b10f7bb5823", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/00aa135e3127d1cf56c6c71938ab0b10f7bb5823", "committedDate": "2020-02-28T09:56:29Z", "message": "Remove empty line\n\nCo-Authored-By: Chanaka Lakmal <ldclakmal@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00a2428371ba594edac36e57f2fbc9c93f7d47da", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/00a2428371ba594edac36e57f2fbc9c93f7d47da", "committedDate": "2020-02-28T09:57:02Z", "message": "Remove empty line\n\nCo-Authored-By: Chanaka Lakmal <ldclakmal@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d889036b984d99df80308e478c0b89ef462e1520", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d889036b984d99df80308e478c0b89ef462e1520", "committedDate": "2020-02-28T09:57:33Z", "message": "Remove empty line\n\nCo-Authored-By: Chanaka Lakmal <ldclakmal@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "739348deb1bb1ee210e514fc572d7afed93847db", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/739348deb1bb1ee210e514fc572d7afed93847db", "committedDate": "2020-02-28T09:58:04Z", "message": "Remove empty line\n\nCo-Authored-By: Chanaka Lakmal <ldclakmal@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e74daa62133e95077036a07e68ed41c71fd063a5", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e74daa62133e95077036a07e68ed41c71fd063a5", "committedDate": "2020-02-28T10:00:14Z", "message": "Remove empty line\n\nCo-Authored-By: Chanaka Lakmal <ldclakmal@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cef84215b92a0e5a8577b4cec0c75da4704ee53f", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/cef84215b92a0e5a8577b4cec0c75da4704ee53f", "committedDate": "2020-02-28T10:01:28Z", "message": "Remove empty line\n\nCo-Authored-By: Chanaka Lakmal <ldclakmal@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d40c0fd08aecb59f0aca1a9e278ab32d8706a5db", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d40c0fd08aecb59f0aca1a9e278ab32d8706a5db", "committedDate": "2020-02-28T10:02:50Z", "message": "Correct grammar\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d39dd2929925e8631b76b375ad6365b08c0271d0", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d39dd2929925e8631b76b375ad6365b08c0271d0", "committedDate": "2020-02-28T10:03:38Z", "message": "Correct the grammar\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57629b1cdc0dff98891f2352ea5dd44c0fb8a2a3", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/57629b1cdc0dff98891f2352ea5dd44c0fb8a2a3", "committedDate": "2020-02-28T10:04:35Z", "message": "Correct the grammar\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79eb1a5fcf2eb7119854331e1a9b27cc96b28246", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/79eb1a5fcf2eb7119854331e1a9b27cc96b28246", "committedDate": "2020-02-28T10:05:14Z", "message": "Correct the grammar\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce3930545a6d348782a1fb443b60c4d1512750ed", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ce3930545a6d348782a1fb443b60c4d1512750ed", "committedDate": "2020-02-28T10:05:38Z", "message": "Correct the grammar\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc054e9ff80cca842cfd9fe0969d59964515e3a0", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bc054e9ff80cca842cfd9fe0969d59964515e3a0", "committedDate": "2020-02-28T10:06:14Z", "message": "Correct the grammar\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6afb86b57a5a1b0af6604511df1905dc03cbbafb", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/6afb86b57a5a1b0af6604511df1905dc03cbbafb", "committedDate": "2020-02-28T10:06:29Z", "message": "Correct the grammar\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36c2bdc3645ced69e687ec39a720c30593d5f072", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/36c2bdc3645ced69e687ec39a720c30593d5f072", "committedDate": "2020-02-28T10:07:42Z", "message": "Correct the grammar\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7dfc19bca60536037fcb34a42d8150509aa6b621", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7dfc19bca60536037fcb34a42d8150509aa6b621", "committedDate": "2020-02-28T10:08:36Z", "message": "Correct the grammar\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ede5fe180d943a02c0a3465a5f5b78517701e0c3", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ede5fe180d943a02c0a3465a5f5b78517701e0c3", "committedDate": "2020-02-28T10:09:02Z", "message": "Correct the grammar\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f065d3ac8db383ffc750d4971dac7d161b4fea2", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5f065d3ac8db383ffc750d4971dac7d161b4fea2", "committedDate": "2020-02-28T10:09:31Z", "message": "Correct the grammar\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63a93a79a7e5058281883edfaa06ea76b2fb83da", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/63a93a79a7e5058281883edfaa06ea76b2fb83da", "committedDate": "2020-02-28T10:57:59Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1eb3351c7884f8244c218ddf4c1d338bfa2d113a", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1eb3351c7884f8244c218ddf4c1d338bfa2d113a", "committedDate": "2020-02-28T10:58:49Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aff52a02230f0b034b3920e0a04c6f957692df43", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/aff52a02230f0b034b3920e0a04c6f957692df43", "committedDate": "2020-02-28T10:59:21Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2e3efb67245684670087b301851448b3f69849d", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e2e3efb67245684670087b301851448b3f69849d", "committedDate": "2020-02-28T10:59:59Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "909b08e5e7ea459cff6d5d5d1a382f1df970fe90", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/909b08e5e7ea459cff6d5d5d1a382f1df970fe90", "committedDate": "2020-02-28T11:00:24Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd370c4644ae09edccd0e8bfbea8f41d6bbe32b9", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/dd370c4644ae09edccd0e8bfbea8f41d6bbe32b9", "committedDate": "2020-02-28T11:00:53Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a742c85205aef1bb040f351dfbb983c266df9d42", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a742c85205aef1bb040f351dfbb983c266df9d42", "committedDate": "2020-02-28T11:01:37Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6d796f469afb633a2c23145d14b0e11522f6ad6", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b6d796f469afb633a2c23145d14b0e11522f6ad6", "committedDate": "2020-02-28T11:02:58Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8dc9a36527eeb5fe5bbe6ecb3e0b3c76f13b414", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c8dc9a36527eeb5fe5bbe6ecb3e0b3c76f13b414", "committedDate": "2020-02-28T11:03:31Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54e9c197ef56f03c1497e0bf16789dc28694832c", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/54e9c197ef56f03c1497e0bf16789dc28694832c", "committedDate": "2020-02-28T11:04:07Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01dcc6a2e9eed45d8c7559aa246fd1cf74af7a08", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/01dcc6a2e9eed45d8c7559aa246fd1cf74af7a08", "committedDate": "2020-02-28T11:06:57Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f570d9ebfb9f9e789ec25005a39aff88ee192613", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f570d9ebfb9f9e789ec25005a39aff88ee192613", "committedDate": "2020-02-28T11:07:56Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77f4be7a79d559f1bdf9f8761edc352c0d0c1c4f", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/77f4be7a79d559f1bdf9f8761edc352c0d0c1c4f", "committedDate": "2020-02-28T11:08:32Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c599bcc8cc525bc4ae7eabe86ae4620e717d5e60", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c599bcc8cc525bc4ae7eabe86ae4620e717d5e60", "committedDate": "2020-02-28T11:09:02Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1bc036b183386377c0b7b58ee3a6726b86c90cae", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1bc036b183386377c0b7b58ee3a6726b86c90cae", "committedDate": "2020-02-28T11:11:00Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce88ab5f55b0cc0e3871990456f97ab0cc37757b", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ce88ab5f55b0cc0e3871990456f97ab0cc37757b", "committedDate": "2020-02-28T11:12:27Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a526358858821aef36074f62b3dd0c7f7864b0bb", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a526358858821aef36074f62b3dd0c7f7864b0bb", "committedDate": "2020-02-28T11:15:13Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22ab8449babcf62a6d74c7193dfa85aa2afd8cdf", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/22ab8449babcf62a6d74c7193dfa85aa2afd8cdf", "committedDate": "2020-02-28T11:17:10Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "780e15d38c8d0a4e3f3b31ee28a22584f771c0cd", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/780e15d38c8d0a4e3f3b31ee28a22584f771c0cd", "committedDate": "2020-02-28T11:17:46Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e340f3a08ab1ef78f8f2dd141cbad8cb5e3c457", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3e340f3a08ab1ef78f8f2dd141cbad8cb5e3c457", "committedDate": "2020-02-28T11:19:15Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "310eab3a574900d35a0ec5def5204dd9f9f8af2d", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/310eab3a574900d35a0ec5def5204dd9f9f8af2d", "committedDate": "2020-02-28T11:20:02Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88c8f62f363fbcef9ced7a74d9fdf210bea6ee65", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/88c8f62f363fbcef9ced7a74d9fdf210bea6ee65", "committedDate": "2020-02-28T11:20:25Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8e2270b05d868383f532ac3db10e8ae1120ce1b", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c8e2270b05d868383f532ac3db10e8ae1120ce1b", "committedDate": "2020-02-28T11:20:47Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46d631e810dc1bf597c23abece18551abbf3f550", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/46d631e810dc1bf597c23abece18551abbf3f550", "committedDate": "2020-02-28T11:21:08Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9029260f74d50decf651360ca5d8a7287c11f4e", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d9029260f74d50decf651360ca5d8a7287c11f4e", "committedDate": "2020-02-28T11:21:29Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cccf81e374a87fe5a5ca8ea1a1be1ac043dffa30", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/cccf81e374a87fe5a5ca8ea1a1be1ac043dffa30", "committedDate": "2020-02-28T11:21:49Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MzI0NDg1", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#pullrequestreview-366324485", "createdAt": "2020-02-28T11:14:07Z", "commit": {"oid": "ce88ab5f55b0cc0e3871990456f97ab0cc37757b"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxMToxNDowN1rOFvxlFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxMToyMDoxMFrOFvxuwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTYzOTcwMw==", "bodyText": "Can this be () ?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385639703", "createdAt": "2020-02-28T11:14:07Z", "author": {"login": "ThisaruGuruge"}, "path": "stdlib/email/src/main/ballerina/src/email/imap_client_endpoint.bal", "diffHunk": "@@ -0,0 +1,55 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents an IMAP Client, which interacts with an IMAP Server.\n+public type ImapClient client object {\n+\n+    # Gets invoked during object initialization.\n+    #\n+    # + clientConfig - Configurations for the IMAP Client\n+    public function __init(ImapConfig clientConfig) {\n+        error? response = initImapClientEndpoint(self, clientConfig, false);\n+    }\n+\n+    # Reads a message.\n+    #\n+    # + return - An `error` if failed to send the message to the recipient\n+    public remote function read() returns Email|error? {\n+        Filter filter = {\n+            folder: \"INBOX\"\n+        };\n+        map<anydata>|error? email = imapRead(self, filter, false);\n+        if(email is error) {\n+            return email;\n+        } else {\n+            return <Email?>email;\n+        }\n+    }\n+\n+};\n+\n+# Configuration of the IMAP Endpoint.\n+#\n+# + host - Host address of the IMAP server\n+# + port - Port number of the IMAP server\n+# + username - Username to access the IMAP server\n+# + password - Password to access the IMAP server\n+public type ImapConfig record {|\n+    string host;\n+    int? port = 143;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce88ab5f55b0cc0e3871990456f97ab0cc37757b"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY0MDc0Mw==", "bodyText": "Shall we use foreach loop instead of for loop ? We can use toAddressArrayValue.append() instead of toAddressArrayValue.add().\nCheck for the other places too.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385640743", "createdAt": "2020-02-28T11:16:29Z", "author": {"login": "ThisaruGuruge"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/PopUtil.java", "diffHunk": "@@ -0,0 +1,210 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+import org.ballerinalang.jvm.BallerinaValues;\n+import org.ballerinalang.jvm.types.BArrayType;\n+import org.ballerinalang.jvm.types.BTypes;\n+import org.ballerinalang.jvm.values.ArrayValue;\n+import org.ballerinalang.jvm.values.ArrayValueImpl;\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Properties;\n+\n+import javax.mail.Address;\n+import javax.mail.BodyPart;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.internet.MimeMultipart;\n+\n+/**\n+ * Contains Utility functions related to POP3 protocol.\n+ */\n+public class PopUtil {\n+\n+    private static final Logger log = LoggerFactory.getLogger(PopUtil.class);\n+    private static final int MAX_PORT = 65535;\n+\n+    /**\n+     * Generates Properties object using the passed MapValue.\n+     *\n+     * @param popConfig MapValue with the configuration values\n+     * @param isPop True if the protocol is POP3 and false otherwise (if protocol is IMAP)\n+     * @return Properties object\n+     */\n+    public static Properties getProperties(MapValue popConfig, boolean isPop) {\n+        log.debug(\"[PopUtil][getProperties] Extracting Property values from Config\");\n+        Properties properties = new Properties();\n+        if (isPop) {\n+            properties.put(PopConstants.PROPS_POP_HOST, popConfig.getStringValue(PopConstants.PROPS_HOST));\n+            properties.put(PopConstants.PROPS_POP_PORT,\n+                    extractPortValue(popConfig.getIntValue(PopConstants.PROPS_PORT), isPop));\n+            properties.put(PopConstants.PROPS_POP_AUTH, \"true\");\n+            properties.put(PopConstants.PROPS_POP_STARTTLS, \"true\");\n+            properties.put(EmailConstants.MAIL_STORE_PROTOCOL, PopConstants.POP_PROTOCOL);\n+        } else {\n+            properties.put(ImapConstants.PROPS_IMAP_HOST, popConfig.getStringValue(PopConstants.PROPS_HOST));\n+            properties.put(ImapConstants.PROPS_IMAP_PORT,\n+                    extractPortValue(popConfig.getIntValue(PopConstants.PROPS_PORT), isPop));\n+            properties.put(ImapConstants.PROPS_IMAP_AUTH, \"true\");\n+            properties.put(ImapConstants.PROPS_IMAP_STARTTLS, \"true\");\n+            properties.put(EmailConstants.MAIL_STORE_PROTOCOL, ImapConstants.IMAP_PROTOCOL);\n+        }\n+\n+        properties.put(PopConstants.PROPS_USERNAME, popConfig.getStringValue(PopConstants.PROPS_USERNAME));\n+        properties.put(PopConstants.PROPS_PASSWORD, popConfig.getStringValue(PopConstants.PROPS_PASSWORD));\n+\n+        log.debug(\"[PopUtil][getProperties] Property object created. Returning Object to PopClient\");\n+        return properties;\n+    }\n+\n+\n+    /**\n+     * Generates MapValue object using the passed Message.\n+     *\n+     * @param message received\n+     * @return MapValue object\n+     * @throws MessagingException If an error occurs related to messaging\n+     * @throws IOException If an error occurs related to I/O\n+     */\n+    public static MapValue getMapValue(Message message) throws MessagingException, IOException {\n+        log.debug(\"[PopUtil][getMapValue] Extracting MapValue values from Config\");\n+        Map<String, Object> valueMap = new HashMap<>();\n+        Address[] toAddress = message.getRecipients(Message.RecipientType.TO);\n+        Address[] ccAddress = message.getRecipients(Message.RecipientType.CC);\n+        Address[] bccAddress = message.getRecipients(Message.RecipientType.BCC);\n+        Address[] replyToAddress = message.getReplyTo();\n+        int toAddressArrayLength = getNullArrayLengthChecked(toAddress);\n+        int ccAddressArrayLength = getNullArrayLengthChecked(ccAddress);\n+        int bccAddressArrayLength = getNullArrayLengthChecked(bccAddress);\n+        int replyToAddressArrayLength = getNullArrayLengthChecked(replyToAddress);\n+        ArrayValue toAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue ccAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue bccAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue replyToAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        for (int i = 0; i < toAddressArrayLength; i++) {\n+            toAddressArrayValue.add(i, toAddress[i].toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce88ab5f55b0cc0e3871990456f97ab0cc37757b"}, "originalPosition": 107}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY0MjE3Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    for (int i = 0; i < ccAddressArrayLength; i++) {\n          \n          \n            \n                        ccAddressArrayValue.add(i, ccAddress[i].toString());\n          \n          \n            \n                    }\n          \n          \n            \n                    for (Address address : ccAddress) {\n          \n          \n            \n                        ccAddressArrayValue.append(address.toString());\n          \n          \n            \n                    }", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21346#discussion_r385642176", "createdAt": "2020-02-28T11:20:10Z", "author": {"login": "ThisaruGuruge"}, "path": "stdlib/email/src/main/java/org/ballerinalang/stdlib/email/util/PopUtil.java", "diffHunk": "@@ -0,0 +1,210 @@\n+/*\n+ * Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.ballerinalang.stdlib.email.util;\n+\n+import org.ballerinalang.jvm.BallerinaValues;\n+import org.ballerinalang.jvm.types.BArrayType;\n+import org.ballerinalang.jvm.types.BTypes;\n+import org.ballerinalang.jvm.values.ArrayValue;\n+import org.ballerinalang.jvm.values.ArrayValueImpl;\n+import org.ballerinalang.jvm.values.MapValue;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.io.IOException;\n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Properties;\n+\n+import javax.mail.Address;\n+import javax.mail.BodyPart;\n+import javax.mail.Message;\n+import javax.mail.MessagingException;\n+import javax.mail.internet.MimeMultipart;\n+\n+/**\n+ * Contains Utility functions related to POP3 protocol.\n+ */\n+public class PopUtil {\n+\n+    private static final Logger log = LoggerFactory.getLogger(PopUtil.class);\n+    private static final int MAX_PORT = 65535;\n+\n+    /**\n+     * Generates Properties object using the passed MapValue.\n+     *\n+     * @param popConfig MapValue with the configuration values\n+     * @param isPop True if the protocol is POP3 and false otherwise (if protocol is IMAP)\n+     * @return Properties object\n+     */\n+    public static Properties getProperties(MapValue popConfig, boolean isPop) {\n+        log.debug(\"[PopUtil][getProperties] Extracting Property values from Config\");\n+        Properties properties = new Properties();\n+        if (isPop) {\n+            properties.put(PopConstants.PROPS_POP_HOST, popConfig.getStringValue(PopConstants.PROPS_HOST));\n+            properties.put(PopConstants.PROPS_POP_PORT,\n+                    extractPortValue(popConfig.getIntValue(PopConstants.PROPS_PORT), isPop));\n+            properties.put(PopConstants.PROPS_POP_AUTH, \"true\");\n+            properties.put(PopConstants.PROPS_POP_STARTTLS, \"true\");\n+            properties.put(EmailConstants.MAIL_STORE_PROTOCOL, PopConstants.POP_PROTOCOL);\n+        } else {\n+            properties.put(ImapConstants.PROPS_IMAP_HOST, popConfig.getStringValue(PopConstants.PROPS_HOST));\n+            properties.put(ImapConstants.PROPS_IMAP_PORT,\n+                    extractPortValue(popConfig.getIntValue(PopConstants.PROPS_PORT), isPop));\n+            properties.put(ImapConstants.PROPS_IMAP_AUTH, \"true\");\n+            properties.put(ImapConstants.PROPS_IMAP_STARTTLS, \"true\");\n+            properties.put(EmailConstants.MAIL_STORE_PROTOCOL, ImapConstants.IMAP_PROTOCOL);\n+        }\n+\n+        properties.put(PopConstants.PROPS_USERNAME, popConfig.getStringValue(PopConstants.PROPS_USERNAME));\n+        properties.put(PopConstants.PROPS_PASSWORD, popConfig.getStringValue(PopConstants.PROPS_PASSWORD));\n+\n+        log.debug(\"[PopUtil][getProperties] Property object created. Returning Object to PopClient\");\n+        return properties;\n+    }\n+\n+\n+    /**\n+     * Generates MapValue object using the passed Message.\n+     *\n+     * @param message received\n+     * @return MapValue object\n+     * @throws MessagingException If an error occurs related to messaging\n+     * @throws IOException If an error occurs related to I/O\n+     */\n+    public static MapValue getMapValue(Message message) throws MessagingException, IOException {\n+        log.debug(\"[PopUtil][getMapValue] Extracting MapValue values from Config\");\n+        Map<String, Object> valueMap = new HashMap<>();\n+        Address[] toAddress = message.getRecipients(Message.RecipientType.TO);\n+        Address[] ccAddress = message.getRecipients(Message.RecipientType.CC);\n+        Address[] bccAddress = message.getRecipients(Message.RecipientType.BCC);\n+        Address[] replyToAddress = message.getReplyTo();\n+        int toAddressArrayLength = getNullArrayLengthChecked(toAddress);\n+        int ccAddressArrayLength = getNullArrayLengthChecked(ccAddress);\n+        int bccAddressArrayLength = getNullArrayLengthChecked(bccAddress);\n+        int replyToAddressArrayLength = getNullArrayLengthChecked(replyToAddress);\n+        ArrayValue toAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue ccAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue bccAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        ArrayValue replyToAddressArrayValue = new ArrayValueImpl(new BArrayType(BTypes.typeString));\n+        for (int i = 0; i < toAddressArrayLength; i++) {\n+            toAddressArrayValue.add(i, toAddress[i].toString());\n+        }\n+        for (int i = 0; i < ccAddressArrayLength; i++) {\n+            ccAddressArrayValue.add(i, ccAddress[i].toString());\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce88ab5f55b0cc0e3871990456f97ab0cc37757b"}, "originalPosition": 111}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "519c2cd27ac3c3e5bde2ed6706447a9db73527f0", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/519c2cd27ac3c3e5bde2ed6706447a9db73527f0", "committedDate": "2020-02-28T11:22:10Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75bf05ddf74879bf514b3e7472dcce5bf61becad", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/75bf05ddf74879bf514b3e7472dcce5bf61becad", "committedDate": "2020-02-28T11:23:25Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0b8bd50c4e72b2a21912542a803bb5a0b7e38fd", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c0b8bd50c4e72b2a21912542a803bb5a0b7e38fd", "committedDate": "2020-02-28T11:25:54Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae22a4f189427d52d84ed176a3b3cb58537202b7", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ae22a4f189427d52d84ed176a3b3cb58537202b7", "committedDate": "2020-02-28T11:26:50Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "baebc4427162c98a3d360e70e5c1240d3c9a0404", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/baebc4427162c98a3d360e70e5c1240d3c9a0404", "committedDate": "2020-02-28T11:27:23Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b9b857fc44d5bfbd10ffe43a192f89ddeef75e7", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0b9b857fc44d5bfbd10ffe43a192f89ddeef75e7", "committedDate": "2020-02-28T11:28:29Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75f9b68dd1ebe9e29af843e39db155de283a9669", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/75f9b68dd1ebe9e29af843e39db155de283a9669", "committedDate": "2020-02-28T11:29:11Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1411abf476230973680d4cc441f6fcc3d1260148", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1411abf476230973680d4cc441f6fcc3d1260148", "committedDate": "2020-02-28T11:30:04Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6195f0b9ce621e61bb3db32137c982480192b76d", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/6195f0b9ce621e61bb3db32137c982480192b76d", "committedDate": "2020-02-28T11:30:47Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9968e33b51d17ecd01637c5f14db0bec55df3ed9", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9968e33b51d17ecd01637c5f14db0bec55df3ed9", "committedDate": "2020-02-28T11:31:52Z", "message": "Remove an empty line.\n\nCo-Authored-By: Chanaka Lakmal <ldclakmal@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1531a3e6b55463da2cf0c458c858f2152d18c8c0", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1531a3e6b55463da2cf0c458c858f2152d18c8c0", "committedDate": "2020-02-28T11:33:19Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e94834cec2027e94cec5e906541af647057a666c", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e94834cec2027e94cec5e906541af647057a666c", "committedDate": "2020-02-28T11:36:52Z", "message": "Remove an empty line.\n\nCo-Authored-By: Chanaka Lakmal <ldclakmal@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8d5572b6b41683a3df99a4dc8059224a1782534", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c8d5572b6b41683a3df99a4dc8059224a1782534", "committedDate": "2020-02-28T11:37:38Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82ed891e37f8d126af5ceda172e38aa5a8424737", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/82ed891e37f8d126af5ceda172e38aa5a8424737", "committedDate": "2020-02-28T11:39:27Z", "message": "Remove an empty line.\n\nCo-Authored-By: Chanaka Lakmal <ldclakmal@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b61cdcd547ce55220b4414b9f06bbf1979e8940b", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b61cdcd547ce55220b4414b9f06bbf1979e8940b", "committedDate": "2020-02-28T11:42:00Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e127e58c49d7ccaf2c9ee39ed826cbdb9a372c23", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e127e58c49d7ccaf2c9ee39ed826cbdb9a372c23", "committedDate": "2020-02-28T11:42:37Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02f3e5f486c727a7a5cae63c098a1af2a8b420f6", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/02f3e5f486c727a7a5cae63c098a1af2a8b420f6", "committedDate": "2020-02-28T11:43:18Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "368f54560a87cbb69e409b9e668c5b1bedd46da7", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/368f54560a87cbb69e409b9e668c5b1bedd46da7", "committedDate": "2020-02-28T11:43:57Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5df5f11658ae77b88880ce4c7e50483ceb27e63d", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5df5f11658ae77b88880ce4c7e50483ceb27e63d", "committedDate": "2020-02-28T11:44:40Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e44c5c8fa1f5b1f0686047ee3bb26777d2f4d64", "author": {"user": {"login": "Maninda", "name": "Maninda Edirisooriya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9e44c5c8fa1f5b1f0686047ee3bb26777d2f4d64", "committedDate": "2020-02-28T11:45:19Z", "message": "Correct the grammar.\n\nCo-Authored-By: praneesha <praneesha@wso2.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4070, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}