{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA3NzU5NDUy", "number": 22854, "title": "Add try-catch statement to the body of generated main method", "bodyText": "Purpose\nThis PR adds a common try-catch to generated java main method. This will now handle any runtime exceptions or errors thrown from program initialization and shutdown (for example: launch listener) and will handle them in a graceful manner so that user sees proper ballerina related errors on the console.\nFixes #21575\nApproach\n\nAdded try-catch statement to the body of generated main method\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-04-23T08:24:28Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22854", "merged": true, "mergeCommit": {"oid": "1cb238c3d37f77d0f60a502dae111994070e90a5"}, "closed": true, "closedAt": "2020-04-24T03:52:08Z", "author": {"login": "Kishanthan"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcaYXjvAH2gAyNDA3NzU5NDUyOjM0NDUxMzhmZDk0OTA4ODEyZjM1YzAzNDQxYTNmOGQ5NWZiOTc1M2U=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcaeD6GAH2gAyNDA3NzU5NDUyOjcyNDcxNGJlOTdiM2I5OGFiNzZmZjQ0NDY2ZDg2NzcwMmU0YzRjM2E=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3445138fd94908812f35c03441a3f8d95fb9753e", "author": {"user": {"login": "Kishanthan", "name": "Kishanthan Thangarajah"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3445138fd94908812f35c03441a3f8d95fb9753e", "committedDate": "2020-04-23T08:11:34Z", "message": "Add try-catch statment to the body generated main method\n\nThis PR adds a common try-catch to generated java main method.\nThis will now handle any runtime exceptions or errors thrown from\nprogram initialization and shutdown (for example: launch listener)\nand will handle them in a gracefull manner so that user sees\nproper ballerina related errors on the console."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "078d55416c34b5ffb3620b5259cb56fdcdc2795f", "author": {"user": {"login": "Kishanthan", "name": "Kishanthan Thangarajah"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/078d55416c34b5ffb3620b5259cb56fdcdc2795f", "committedDate": "2020-04-23T08:16:45Z", "message": "Add test launch listener modules"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32832e97d0bde96f7854a5d35aeaf8ee3bf59f46", "author": {"user": {"login": "Kishanthan", "name": "Kishanthan Thangarajah"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/32832e97d0bde96f7854a5d35aeaf8ee3bf59f46", "committedDate": "2020-04-23T08:17:48Z", "message": "Include test launch listener modules in gradle parent"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ecdf4000414b001f96701306f6eef5672f3c2e03", "author": {"user": {"login": "Kishanthan", "name": "Kishanthan Thangarajah"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ecdf4000414b001f96701306f6eef5672f3c2e03", "committedDate": "2020-04-23T08:18:39Z", "message": "Add test cases to verify launch-listener init & shutdown failures"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "205f84511f29c08039ccb69e29bb130ed572184a", "author": {"user": {"login": "Kishanthan", "name": "Kishanthan Thangarajah"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/205f84511f29c08039ccb69e29bb130ed572184a", "committedDate": "2020-04-23T08:19:41Z", "message": "Merge branch 'master' into fix-21575"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4OTIxODQ5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22854#pullrequestreview-398921849", "createdAt": "2020-04-23T09:28:47Z", "commit": {"oid": "205f84511f29c08039ccb69e29bb130ed572184a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwOToyODo0N1rOGKf1kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwOToyODo0N1rOGKf1kw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY2MDU2Mw==", "bodyText": "Do we need this empty spotbugs-exclude files", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22854#discussion_r413660563", "createdAt": "2020-04-23T09:28:47Z", "author": {"login": "warunalakshitha"}, "path": "tests/launch-listener-test-util-libs/test-launch-listener-03/spotbugs-exclude.xml", "diffHunk": "@@ -0,0 +1,21 @@\n+<!--\n+  ~  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "205f84511f29c08039ccb69e29bb130ed572184a"}, "originalPosition": 2}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4OTE5NjY1", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22854#pullrequestreview-398919665", "createdAt": "2020-04-23T09:26:04Z", "commit": {"oid": "205f84511f29c08039ccb69e29bb130ed572184a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwOToyNjowNFrOGKfuLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QwOTozOToxMlrOGKgRbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY1ODY2OQ==", "bodyText": "can we remove the original handleErrorFromFutureValue method?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22854#discussion_r413658669", "createdAt": "2020-04-23T09:26:04Z", "author": {"login": "manuranga"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/bir/codegen/JvmMethodGen.java", "diffHunk": "@@ -1722,7 +1727,7 @@ static void generateMainMethod(@Nilable BIRFunction userMainFunc, ClassWriter cw\n             mv.visitIntInsn(BIPUSH, 100);\n             mv.visitTypeInsn(ANEWARRAY, OBJECT);\n             mv.visitFieldInsn(PUTFIELD, STRAND, \"frames\", String.format(\"[L%s;\", OBJECT));\n-            errorGen.printStackTraceFromFutureValue(mv, indexMap);\n+            handleErrorFromFutureValue(mv);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "205f84511f29c08039ccb69e29bb130ed572184a"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY2NzY5Mw==", "bodyText": "can remove the original method ?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22854#discussion_r413667693", "createdAt": "2020-04-23T09:39:12Z", "author": {"login": "manuranga"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/bir/codegen/JvmMethodGen.java", "diffHunk": "@@ -1685,7 +1690,7 @@ static void generateMainMethod(@Nilable BIRFunction userMainFunc, ClassWriter cw\n             mv.visitIntInsn(BIPUSH, 100);\n             mv.visitTypeInsn(ANEWARRAY, OBJECT);\n             mv.visitFieldInsn(PUTFIELD, STRAND, \"frames\", String.format(\"[L%s;\", OBJECT));\n-            errorGen.printStackTraceFromFutureValue(mv, indexMap);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "205f84511f29c08039ccb69e29bb130ed572184a"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e8a330cf58c2455e8e3c0042df702e76bf4785d", "author": {"user": {"login": "Kishanthan", "name": "Kishanthan Thangarajah"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1e8a330cf58c2455e8e3c0042df702e76bf4785d", "committedDate": "2020-04-23T09:49:41Z", "message": "Remove unused method for JvmErrorGen"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d55bb3f963c83d11460d37799b5ca233157c312e", "author": {"user": {"login": "Kishanthan", "name": "Kishanthan Thangarajah"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d55bb3f963c83d11460d37799b5ca233157c312e", "committedDate": "2020-04-23T09:50:12Z", "message": "Remove unwanted spotbugs exclude files"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4OTQyMjg4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22854#pullrequestreview-398942288", "createdAt": "2020-04-23T09:55:12Z", "commit": {"oid": "d55bb3f963c83d11460d37799b5ca233157c312e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "724714be97b3b98ab76ff44466d867702e4c4c3a", "author": {"user": {"login": "Kishanthan", "name": "Kishanthan Thangarajah"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/724714be97b3b98ab76ff44466d867702e4c4c3a", "committedDate": "2020-04-23T14:49:32Z", "message": "Use correct archive file name"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3443, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}