{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3NTk1MTEx", "number": 23712, "title": "Update webSub module error", "bodyText": "Purpose\n$Subject\nFixes ##23634\nApproach\n\nDescribe how you are implementing the solutions along with the design details.\n\nSamples\n\nProvide high-level details about the samples related to this feature.\n\nRemarks\n\nList any other known issues, related PRs, TODO items, or any other notes related to the PR.\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-06-04T05:18:51Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23712", "merged": true, "mergeCommit": {"oid": "fe9ad84907ecc9471e105228de34909e887a615b"}, "closed": true, "closedAt": "2020-06-06T09:04:06Z", "author": {"login": "kalaiyarasiganeshalingam"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcn2_2ygH2gAyNDI3NTk1MTExOjc0ZTZjNDZjMmI3MjkwNTdkY2JkNDMxYzcwMjM5Mjg2ODc0OWU3OTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcojfWDAFqTQyNTcyNjIyOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "74e6c46c2b729057dcbd431c702392868749e796", "author": {"user": {"login": "kalaiyarasiganeshalingam", "name": "Kalaiyarasi Ganeshalingam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/74e6c46c2b729057dcbd431c702392868749e796", "committedDate": "2020-06-04T05:13:45Z", "message": "Fix webSub error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e38f0a17b3ac9681bb1b6c31ae40cb558b2a1776", "author": {"user": {"login": "kalaiyarasiganeshalingam", "name": "Kalaiyarasi Ganeshalingam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e38f0a17b3ac9681bb1b6c31ae40cb558b2a1776", "committedDate": "2020-06-04T05:14:22Z", "message": "Merge branch '23283-add-distinct-type' of https://github.com/ballerina-platform/ballerina-lang into websub_error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9305a5cdee6ea85c2d6a726bb57b87f043effd08", "author": {"user": {"login": "kalaiyarasiganeshalingam", "name": "Kalaiyarasi Ganeshalingam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9305a5cdee6ea85c2d6a726bb57b87f043effd08", "committedDate": "2020-06-04T12:50:15Z", "message": "Merge branch '23283-add-distinct-type' of https://github.com/ballerina-platform/ballerina-lang into websub_error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d6caf4ddb7045e27e81009a3d48b8f0b455b1dc", "author": {"user": {"login": "kalaiyarasiganeshalingam", "name": "Kalaiyarasi Ganeshalingam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7d6caf4ddb7045e27e81009a3d48b8f0b455b1dc", "committedDate": "2020-06-04T14:30:21Z", "message": "Add the new WebSub error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80a7340ed096f37decf99c79f020055aa8fa6f9f", "author": {"user": {"login": "kalaiyarasiganeshalingam", "name": "Kalaiyarasi Ganeshalingam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/80a7340ed096f37decf99c79f020055aa8fa6f9f", "committedDate": "2020-06-05T09:58:14Z", "message": "Merge branch 'websub_error' of https://github.com/kalaiyarasiganeshalingam/ballerina-lang into websub_error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea8478214f04181886ec9ba304f5d676788d6ddf", "author": {"user": {"login": "kalaiyarasiganeshalingam", "name": "Kalaiyarasi Ganeshalingam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ea8478214f04181886ec9ba304f5d676788d6ddf", "committedDate": "2020-06-05T10:51:06Z", "message": "Handle the error message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1535ffbff875a14ecdb19796a7cafd485711b7b9", "author": {"user": {"login": "kalaiyarasiganeshalingam", "name": "Kalaiyarasi Ganeshalingam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1535ffbff875a14ecdb19796a7cafd485711b7b9", "committedDate": "2020-06-05T11:02:39Z", "message": "Remove unwanted things"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NzE4NDY2", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23712#pullrequestreview-425718466", "createdAt": "2020-06-06T06:29:54Z", "commit": {"oid": "1535ffbff875a14ecdb19796a7cafd485711b7b9"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQwNjoyOTo1NFrOGgCM8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQwNjozMDowOVrOGgCNDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI0MzY5OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return error(\"Error occurred for request: Mode[\" + mode+ \"] at Hub[\" + hub + \"] - \" + response.message());\n          \n          \n            \n                    return WebSubError(\"Error occurred for request: Mode[\" + mode+ \"] at Hub[\" + hub + \"] - \" + response.message());", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23712#discussion_r436243698", "createdAt": "2020-06-06T06:29:54Z", "author": {"login": "chamil321"}, "path": "stdlib/websub/src/main/ballerina/src/websub/subscriber_client.bal", "diffHunk": "@@ -123,10 +123,7 @@ function processHubResponse(@untainted string hub, @untainted string mode,\n \n     string topic = subscriptionChangeRequest.topic;\n     if (response is error) {\n-        string errCause = <string> response.detail()?.message;\n-        error webSubError = error(WEBSUB_ERROR_CODE, message = \"Error occurred for request: Mode[\" + mode\n-                                        + \"] at Hub[\" + hub + \"] - \" + errCause );\n-        return webSubError;\n+        return error(\"Error occurred for request: Mode[\" + mode+ \"] at Hub[\" + hub + \"] - \" + response.message());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1535ffbff875a14ecdb19796a7cafd485711b7b9"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI0MzcyNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        return error(\"Redirection response received for subscription change request made with followRedirects \" +\n          \n          \n            \n                        return WebSubError(\"Redirection response received for subscription change request made with followRedirects \" +", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23712#discussion_r436243725", "createdAt": "2020-06-06T06:30:09Z", "author": {"login": "chamil321"}, "path": "stdlib/websub/src/main/ballerina/src/websub/subscriber_client.bal", "diffHunk": "@@ -136,22 +133,18 @@ function processHubResponse(@untainted string hub, @untainted string mode,\n                 return invokeClientConnectorOnRedirection(redirected_hub, mode, subscriptionChangeRequest,\n                                                             httpClient.config.auth, remainingRedirects - 1);\n             }\n-            error subscriptionError = error(WEBSUB_ERROR_CODE, message = \"Redirection response received for \"\n-                    + \"subscription change request made with followRedirects disabled or after maxCount exceeded: Hub [\"\n-                    + hub + \"], Topic [\" + subscriptionChangeRequest.topic + \"]\");\n-            return subscriptionError;\n+            return error(\"Redirection response received for subscription change request made with followRedirects \" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1535ffbff875a14ecdb19796a7cafd485711b7b9"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NzE4ODU4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23712#pullrequestreview-425718858", "createdAt": "2020-06-06T06:38:29Z", "commit": {"oid": "1535ffbff875a14ecdb19796a7cafd485711b7b9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQwNjozODoyOVrOGgCOxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQwNjozODoyOVrOGgCOxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI0NDE2NA==", "bodyText": "now can't we pass an array of causes like before?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23712#discussion_r436244164", "createdAt": "2020-06-06T06:38:29Z", "author": {"login": "chamil321"}, "path": "stdlib/websub/src/main/ballerina/src/websub/commons.bal", "diffHunk": "@@ -623,12 +604,11 @@ public type Hub object {\n \n         if (stopResult is error) {\n             if (stopHubServiceResult is error) {\n-                error[] causes = [stopResult, stopHubServiceResult];\n-                return error(WEBSUB_ERROR_CODE, causes = causes);\n+                return WebSubError(\"Couldn't stop the started up Ballerina WebSub Hub\", stopHubServiceResult);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1535ffbff875a14ecdb19796a7cafd485711b7b9"}, "originalPosition": 118}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0cc4cd671aec9c7550c49c2f84a671631f5b5eb8", "author": {"user": {"login": "kalaiyarasiganeshalingam", "name": "Kalaiyarasi Ganeshalingam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0cc4cd671aec9c7550c49c2f84a671631f5b5eb8", "committedDate": "2020-06-06T08:17:33Z", "message": "Fix suggested comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NzI2MjI4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23712#pullrequestreview-425726228", "createdAt": "2020-06-06T09:03:58Z", "commit": {"oid": "0cc4cd671aec9c7550c49c2f84a671631f5b5eb8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4387, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}