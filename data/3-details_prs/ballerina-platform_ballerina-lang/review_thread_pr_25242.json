{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY2OTk3Mjk0", "number": 25242, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QwNjozNjoyMVrOEX6juQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QwNjozNjoyMVrOEX6juQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkzNTEyMTIxOnYy", "diffSide": "RIGHT", "path": "misc/formatter/modules/formatter-core/src/main/java/org/ballerinalang/formatter/core/FormattingTreeModifier.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QwNjozNjoyMVrOG_96bQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxMTozMDo0MVrOHAHdqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTcyNzg1Mw==", "bodyText": "Found a bug in TreeModifier.java. \n  \n    \n      ballerina-lang/compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/syntax/tree/TreeModifier.java\n    \n    \n        Lines 3100 to 3101\n      in\n      c4f3e10\n    \n    \n    \n    \n\n        \n          \n           protected <T extends Node> SeparatedNodeList<T> modifySeparatedNodeList(SeparatedNodeList<T> nodeList) { \n        \n\n        \n          \n               return modifyGenericNodeList(nodeList, SeparatedNodeList::new); \n        \n    \n  \n\n\n\n\nHere we have used modifyGenericNodeList() which only iterates through the alternative elements as we are parsing a SeparatedNodeList object, not  NodeList\n\n\nSo when there's no modification that method simply returns the original SeparatedNodeList which is fine.\nBut when there's a modification it return SeparatedNodeList which does not contain separators as no processing has been added with getSeparator().\n\n\nSubsequently, when we are formatting and when there's a modification, separators just get vanished.\n\n\n@sameerajayasoma @SupunS shall I create an issue for the root cause?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25242#discussion_r469727853", "createdAt": "2020-08-13T06:36:21Z", "author": {"login": "lochana-chathura"}, "path": "misc/formatter/modules/formatter-core/src/main/java/org/ballerinalang/formatter/core/FormattingTreeModifier.java", "diffHunk": "@@ -278,7 +258,7 @@ public FunctionSignatureNode transform(FunctionSignatureNode functionSignatureNo\n         Token openPara = getToken(functionSignatureNode.openParenToken());\n         Token closePara = getToken(functionSignatureNode.closeParenToken());\n \n-        NodeList<ParameterNode> parameters = this.modifyNodeList(functionSignatureNode.parameters());\n+        SeparatedNodeList<ParameterNode> parameters = this.modifySeparatedNodeList(functionSignatureNode.parameters());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "794ac0d411ea4a2bc2e7768c36a0464d32dac744"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTg4NDMyOQ==", "bodyText": "+1. Please create an issue", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25242#discussion_r469884329", "createdAt": "2020-08-13T11:30:41Z", "author": {"login": "SupunS"}, "path": "misc/formatter/modules/formatter-core/src/main/java/org/ballerinalang/formatter/core/FormattingTreeModifier.java", "diffHunk": "@@ -278,7 +258,7 @@ public FunctionSignatureNode transform(FunctionSignatureNode functionSignatureNo\n         Token openPara = getToken(functionSignatureNode.openParenToken());\n         Token closePara = getToken(functionSignatureNode.closeParenToken());\n \n-        NodeList<ParameterNode> parameters = this.modifyNodeList(functionSignatureNode.parameters());\n+        SeparatedNodeList<ParameterNode> parameters = this.modifySeparatedNodeList(functionSignatureNode.parameters());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTcyNzg1Mw=="}, "originalCommit": {"oid": "794ac0d411ea4a2bc2e7768c36a0464d32dac744"}, "originalPosition": 56}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 395, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}