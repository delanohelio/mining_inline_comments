{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0MTg5NTMx", "number": 26145, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwNjo0MTowMVrOEr673A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwODozNDowOVrOEsh3MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0NDg5ODIwOnYy", "diffSide": "RIGHT", "path": "tests/jballerina-integration-test/src/test/java/org/ballerinalang/test/packaging/ModulePushTestCase.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwNjo0MTowMVrOHe8_0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwNjo0MTowMVrOHe8_0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjIxODcwNw==", "bodyText": "We can get rid of asserting whether file exists because Files.isDirectory(modulePath) will fail anyway if the file doesn't exist. WDYT?\nLet's correct this in other similar places too.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26145#discussion_r502218707", "createdAt": "2020-10-09T06:41:01Z", "author": {"login": "Dilhasha"}, "path": "tests/jballerina-integration-test/src/test/java/org/ballerinalang/test/packaging/ModulePushTestCase.java", "diffHunk": "@@ -70,13 +70,20 @@ public void testPush() throws Exception {\n     \n         Assert.assertTrue(Files.exists(projectPath));\n         Assert.assertTrue(Files.isDirectory(projectPath));\n+\n+        Path modulePath = projectPath.resolve(\"src\").resolve(moduleName);\n     \n         // Create module\n         balClient.runMain(\"add\", new String[]{moduleName}, envVariables, new String[]{}, new LogLeecher[]{},\n                 projectPath.toString());\n     \n-        Assert.assertTrue(Files.exists(projectPath.resolve(\"src\").resolve(moduleName)));\n-        Assert.assertTrue(Files.isDirectory(projectPath.resolve(\"src\").resolve(moduleName)));\n+        Assert.assertTrue(Files.exists(modulePath));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85d6df2f29b810fe9406223d58b06217d8f567c2"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0NDk0MzcxOnYy", "diffSide": "RIGHT", "path": "tests/jballerina-integration-test/src/test/resources/packaging/balopath/case1/TestProject2/src/baz/tests/impl_test.bal", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwNjo1ODoyOVrOHe9a2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwNjo1ODoyOVrOHe9a2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjIyNTYyNA==", "bodyText": "Shall we remove this new line and can you please check other place as well?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26145#discussion_r502225624", "createdAt": "2020-10-09T06:58:29Z", "author": {"login": "lnash94"}, "path": "tests/jballerina-integration-test/src/test/resources/packaging/balopath/case1/TestProject2/src/baz/tests/impl_test.bal", "diffHunk": "@@ -0,0 +1,9 @@\n+import ballerina/test;\n+\n+# Test function\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85d6df2f29b810fe9406223d58b06217d8f567c2"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1MTI3MzYxOnYy", "diffSide": "RIGHT", "path": "tests/jballerina-integration-test/src/test/java/org/ballerinalang/test/packaging/PackagingTestCase.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwODozMzo0NlrOHf0d_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwODozMzo0NlrOHf0d_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzEyNzU1MQ==", "bodyText": "We can get rid of asserting whether file exists because Files.isDirectory(modulePath) will fail anyway if the file doesn't exist. WDYT?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26145#discussion_r503127551", "createdAt": "2020-10-12T08:33:46Z", "author": {"login": "Dilhasha"}, "path": "tests/jballerina-integration-test/src/test/java/org/ballerinalang/test/packaging/PackagingTestCase.java", "diffHunk": "@@ -236,17 +238,31 @@ public void testPushAllPackages() throws Exception {\n         // Create first module\n         balClient.runMain(\"add\", new String[]{firstPackage}, envVariables, new String[]{}, new LogLeecher[]{},\n                 projectPath.toString());\n-    \n-        Assert.assertTrue(Files.exists(projectPath.resolve(\"src\").resolve(firstPackage)));\n-        Assert.assertTrue(Files.isDirectory(projectPath.resolve(\"src\").resolve(firstPackage)));\n+\n+        Path firstPackagePath = projectPath.resolve(\"src\").resolve(firstPackage);\n+\n+        Assert.assertTrue(Files.exists(firstPackagePath));\n+        Assert.assertTrue(Files.isDirectory(firstPackagePath));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "08d685f768daf39f34615aae684e8d683481e29c"}, "originalPosition": 80}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1MTI3NDU4OnYy", "diffSide": "RIGHT", "path": "tests/jballerina-integration-test/src/test/java/org/ballerinalang/test/packaging/PackagingTestCase.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwODozMzo1OFrOHf0ejQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwODozMzo1OFrOHf0ejQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzEyNzY5Mw==", "bodyText": "We can get rid of asserting whether file exists because Files.isDirectory(modulePath) will fail anyway if the file doesn't exist. WDYT?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26145#discussion_r503127693", "createdAt": "2020-10-12T08:33:58Z", "author": {"login": "Dilhasha"}, "path": "tests/jballerina-integration-test/src/test/java/org/ballerinalang/test/packaging/PackagingTestCase.java", "diffHunk": "@@ -236,17 +238,31 @@ public void testPushAllPackages() throws Exception {\n         // Create first module\n         balClient.runMain(\"add\", new String[]{firstPackage}, envVariables, new String[]{}, new LogLeecher[]{},\n                 projectPath.toString());\n-    \n-        Assert.assertTrue(Files.exists(projectPath.resolve(\"src\").resolve(firstPackage)));\n-        Assert.assertTrue(Files.isDirectory(projectPath.resolve(\"src\").resolve(firstPackage)));\n+\n+        Path firstPackagePath = projectPath.resolve(\"src\").resolve(firstPackage);\n+\n+        Assert.assertTrue(Files.exists(firstPackagePath));\n+        Assert.assertTrue(Files.isDirectory(firstPackagePath));\n+\n+        PackerinaTestUtils.copy(Paths.get(\"src\", \"test\", \"resources\", \"packaging\", \"pushingModule\", \"main.bal\"),\n+                firstPackagePath.resolve(\"main.bal\"));\n+        PackerinaTestUtils.copy(Paths.get(\"src\", \"test\", \"resources\", \"packaging\", \"pushingModule\", \"main_test.bal\"),\n+                firstPackagePath.resolve(\"tests\").resolve(\"main_test.bal\"));\n     \n         // Create second module\n         balClient.runMain(\"add\", new String[]{secondPackage}, envVariables, new String[]{}, new LogLeecher[]{},\n                 projectPath.toString());\n-    \n-        Assert.assertTrue(Files.exists(projectPath.resolve(\"src\").resolve(secondPackage)));\n-        Assert.assertTrue(Files.isDirectory(projectPath.resolve(\"src\").resolve(secondPackage)));\n-    \n+\n+        Path secondPackagePath = projectPath.resolve(\"src\").resolve(secondPackage);\n+\n+        Assert.assertTrue(Files.exists(secondPackagePath));\n+        Assert.assertTrue(Files.isDirectory(secondPackagePath));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "08d685f768daf39f34615aae684e8d683481e29c"}, "originalPosition": 98}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1MTI3NjAwOnYy", "diffSide": "RIGHT", "path": "tests/jballerina-integration-test/src/test/java/org/ballerinalang/test/packaging/PackagingTestCase.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwODozNDowOVrOHf0fQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwODozNDowOVrOHf0fQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzEyNzg3NQ==", "bodyText": "We can get rid of asserting whether file exists because Files.isDirectory(modulePath) will fail anyway if the file doesn't exist. WDYT?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26145#discussion_r503127875", "createdAt": "2020-10-12T08:34:09Z", "author": {"login": "Dilhasha"}, "path": "tests/jballerina-integration-test/src/test/java/org/ballerinalang/test/packaging/PackagingTestCase.java", "diffHunk": "@@ -286,39 +301,27 @@ public void testBuildAndRunModuleWithPeriod() throws BallerinaTestException {\n         balClient.runMain(\"add\", new String[] { moduleName }, envVariables, new String[] {}, new LogLeecher[] {},\n                 projectPath.toString());\n \n-        Assert.assertTrue(Files.exists(projectPath.resolve(\"src\").resolve(moduleName)));\n-        Assert.assertTrue(Files.isDirectory(projectPath.resolve(\"src\").resolve(moduleName)));\n+        Path modulePath = projectPath.resolve(\"src\").resolve(moduleName);\n+        Assert.assertTrue(Files.exists(modulePath));\n+        Assert.assertTrue(Files.isDirectory(modulePath));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "08d685f768daf39f34615aae684e8d683481e29c"}, "originalPosition": 126}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4841, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}