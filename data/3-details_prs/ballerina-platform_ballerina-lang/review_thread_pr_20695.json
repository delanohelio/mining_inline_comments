{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1Njc3OTAy", "number": 20695, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQwNTo1OTo1MVrODZuMCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQwOToyMDowOVrODbgG8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4Mjk3NzM3OnYy", "diffSide": "RIGHT", "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/BuildCommand.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQwNTo1OTo1MVrOFgRStA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQwNTo1OTo1MVrOFgRStA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTM4MjA2OA==", "bodyText": "Shall we keep as 2017 since it was added in 2017.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20695#discussion_r369382068", "createdAt": "2020-01-22T05:59:51Z", "author": {"login": "warunalakshitha"}, "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/BuildCommand.java", "diffHunk": "@@ -1,5 +1,5 @@\n /*\n- *  Copyright (c) 2017, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10c12ae658066345b83d20a31cb10e84c9091fdb"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4Mjk3NzYxOnYy", "diffSide": "RIGHT", "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/RunCommand.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQwNTo1OTo1N1rOFgRS0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQwNTo1OTo1N1rOFgRS0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTM4MjA5OQ==", "bodyText": "Year of the copy right should be the year that we commit the file. Since we add this file in 2019 we can keep as it is.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20695#discussion_r369382099", "createdAt": "2020-01-22T05:59:57Z", "author": {"login": "warunalakshitha"}, "path": "cli/ballerina-packerina/src/main/java/org/ballerinalang/packerina/cmd/RunCommand.java", "diffHunk": "@@ -1,5 +1,5 @@\n /*\n- * Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10c12ae658066345b83d20a31cb10e84c9091fdb"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4Mjk3ODI3OnYy", "diffSide": "RIGHT", "path": "cli/ballerina-packerina/src/test/java/org/ballerinalang/packerina/cmd/BuildCommandTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQwNjowMDoyMlrOFgRTNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQwNjowMDoyMlrOFgRTNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTM4MjE5Ng==", "bodyText": "This change no needed.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20695#discussion_r369382196", "createdAt": "2020-01-22T06:00:22Z", "author": {"login": "warunalakshitha"}, "path": "cli/ballerina-packerina/src/test/java/org/ballerinalang/packerina/cmd/BuildCommandTest.java", "diffHunk": "@@ -1,5 +1,5 @@\n /*\n- *  Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10c12ae658066345b83d20a31cb10e84c9091fdb"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4Mjk4MTU2OnYy", "diffSide": "LEFT", "path": "composer/packages/api-designer/package-lock.json", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQwNjowMjozMlrOFgRVLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQwNjowMjozMlrOFgRVLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTM4MjcwMA==", "bodyText": "Shall we revert adding all package-lock.json files. We do not need those.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20695#discussion_r369382700", "createdAt": "2020-01-22T06:02:32Z", "author": {"login": "warunalakshitha"}, "path": "composer/packages/api-designer/package-lock.json", "diffHunk": "@@ -1,6 +1,6 @@\n {\n \t\"name\": \"@ballerina/api-designer\",\n-\t\"version\": \"1.1.0\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10c12ae658066345b83d20a31cb10e84c9091fdb"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4Mjk4MTk4OnYy", "diffSide": "RIGHT", "path": "tests/jballerina-integration-test/src/test/java/org/ballerinalang/test/packaging/SingleBalFileTestCase.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQwNjowMjo1MVrOFgRVcA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQwNjowMjo1MVrOFgRVcA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTM4Mjc2OA==", "bodyText": "We do not need this change.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20695#discussion_r369382768", "createdAt": "2020-01-22T06:02:51Z", "author": {"login": "warunalakshitha"}, "path": "tests/jballerina-integration-test/src/test/java/org/ballerinalang/test/packaging/SingleBalFileTestCase.java", "diffHunk": "@@ -1,5 +1,5 @@\n /*\n- * Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10c12ae658066345b83d20a31cb10e84c9091fdb"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4MzAzOTAzOnYy", "diffSide": "RIGHT", "path": "cli/ballerina-packerina/src/test/java/org/ballerinalang/packerina/cmd/BuildCommandTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQwNjo0MjoyNVrOFgR38g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxMjowMjoyNFrOFiAY2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTM5MTYwMg==", "bodyText": "This wont give a relative path right ? validBalFilePath.resolve(\"valid-relative-path-bal-file/hello_world_relative.bal\")\nAlso we cannot have the file separate as /. Wont it break in Windows ?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20695#discussion_r369391602", "createdAt": "2020-01-22T06:42:25Z", "author": {"login": "hemikak"}, "path": "cli/ballerina-packerina/src/test/java/org/ballerinalang/packerina/cmd/BuildCommandTest.java", "diffHunk": "@@ -287,6 +287,22 @@ public void testBuildAllWithArg() throws IOException {\n         Assert.assertTrue(buildLog.contains(\"too many arguments.\\n\"));\n     }\n \n+    @Test(description = \"Build .bal files with the relative path\")\n+    public void testBuildWithRelativePath() throws IOException {\n+        // valid source root path\n+        Path validBalFilePath = this.testResources.resolve(\"valid-bal-file\");\n+        BuildCommand buildCommand = new BuildCommand(validBalFilePath, printStream, printStream, false, true);\n+        new CommandLine(buildCommand).parse(String.valueOf(validBalFilePath.resolve\n+                (\"valid-relative-path-bal-file/hello_world_relative.bal\")));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10c12ae658066345b83d20a31cb10e84c9091fdb"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTIwMjI2Ng==", "bodyText": "Modified with proper relative path.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20695#discussion_r371202266", "createdAt": "2020-01-27T12:02:24Z", "author": {"login": "parkavi11"}, "path": "cli/ballerina-packerina/src/test/java/org/ballerinalang/packerina/cmd/BuildCommandTest.java", "diffHunk": "@@ -287,6 +287,22 @@ public void testBuildAllWithArg() throws IOException {\n         Assert.assertTrue(buildLog.contains(\"too many arguments.\\n\"));\n     }\n \n+    @Test(description = \"Build .bal files with the relative path\")\n+    public void testBuildWithRelativePath() throws IOException {\n+        // valid source root path\n+        Path validBalFilePath = this.testResources.resolve(\"valid-bal-file\");\n+        BuildCommand buildCommand = new BuildCommand(validBalFilePath, printStream, printStream, false, true);\n+        new CommandLine(buildCommand).parse(String.valueOf(validBalFilePath.resolve\n+                (\"valid-relative-path-bal-file/hello_world_relative.bal\")));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTM5MTYwMg=="}, "originalCommit": {"oid": "10c12ae658066345b83d20a31cb10e84c9091fdb"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4MzA0MjIyOnYy", "diffSide": "RIGHT", "path": "tests/jballerina-integration-test/src/test/java/org/ballerinalang/test/packaging/SingleBalFileTestCase.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQwNjo0Mzo0N1rOFgR5pg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxMjowMjoxN1rOFiAYpw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTM5MjAzOA==", "bodyText": "Do we need an integration test as well ?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20695#discussion_r369392038", "createdAt": "2020-01-22T06:43:47Z", "author": {"login": "hemikak"}, "path": "tests/jballerina-integration-test/src/test/java/org/ballerinalang/test/packaging/SingleBalFileTestCase.java", "diffHunk": "@@ -94,6 +94,19 @@ public void testSingleBalFileWithJDBCUsage() throws BallerinaTestException {\n         fooRunLeecher.waitForText(10000);\n     }\n \n+    @Test(description = \"Test running bal with relative path\")\n+    public void testRunWithRelativePath() throws BallerinaTestException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10c12ae658066345b83d20a31cb10e84c9091fdb"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTIwMjIxNQ==", "bodyText": "I have written an integration test for run command and for build command, unit test is written.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20695#discussion_r371202215", "createdAt": "2020-01-27T12:02:17Z", "author": {"login": "parkavi11"}, "path": "tests/jballerina-integration-test/src/test/java/org/ballerinalang/test/packaging/SingleBalFileTestCase.java", "diffHunk": "@@ -94,6 +94,19 @@ public void testSingleBalFileWithJDBCUsage() throws BallerinaTestException {\n         fooRunLeecher.waitForText(10000);\n     }\n \n+    @Test(description = \"Test running bal with relative path\")\n+    public void testRunWithRelativePath() throws BallerinaTestException {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTM5MjAzOA=="}, "originalCommit": {"oid": "10c12ae658066345b83d20a31cb10e84c9091fdb"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4MzA0MjkyOnYy", "diffSide": "RIGHT", "path": "tests/jballerina-integration-test/src/test/java/org/ballerinalang/test/packaging/SingleBalFileTestCase.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQwNjo0NDowNlrOFgR6Bg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxMjowMTowNVrOFiAWvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTM5MjEzNA==", "bodyText": "I dont think we can hardcode the file separator.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20695#discussion_r369392134", "createdAt": "2020-01-22T06:44:06Z", "author": {"login": "hemikak"}, "path": "tests/jballerina-integration-test/src/test/java/org/ballerinalang/test/packaging/SingleBalFileTestCase.java", "diffHunk": "@@ -94,6 +94,19 @@ public void testSingleBalFileWithJDBCUsage() throws BallerinaTestException {\n         fooRunLeecher.waitForText(10000);\n     }\n \n+    @Test(description = \"Test running bal with relative path\")\n+    public void testRunWithRelativePath() throws BallerinaTestException {\n+        String testBalFile = \"hello_world.bal\";\n+        Path testRelativeFilePath = Paths.get(\"src\", \"test\", \"resources\", \"packaging\", \"singleBalFile\",\n+                \"relative\", \"testDir\");\n+        // Run and see output\n+        String msg = \"Hello, World!\";\n+        LogLeecher fooRunLeecher = new LogLeecher(msg);\n+        balClient.runMain(\"run\", new String[]{\"../testBal/hello_world.bal\"}, new HashMap<>(), new String[0],", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "10c12ae658066345b83d20a31cb10e84c9091fdb"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTIwMTcyNg==", "bodyText": "Used File.separator instead of hardcoding the path.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20695#discussion_r371201726", "createdAt": "2020-01-27T12:01:05Z", "author": {"login": "parkavi11"}, "path": "tests/jballerina-integration-test/src/test/java/org/ballerinalang/test/packaging/SingleBalFileTestCase.java", "diffHunk": "@@ -94,6 +94,19 @@ public void testSingleBalFileWithJDBCUsage() throws BallerinaTestException {\n         fooRunLeecher.waitForText(10000);\n     }\n \n+    @Test(description = \"Test running bal with relative path\")\n+    public void testRunWithRelativePath() throws BallerinaTestException {\n+        String testBalFile = \"hello_world.bal\";\n+        Path testRelativeFilePath = Paths.get(\"src\", \"test\", \"resources\", \"packaging\", \"singleBalFile\",\n+                \"relative\", \"testDir\");\n+        // Run and see output\n+        String msg = \"Hello, World!\";\n+        LogLeecher fooRunLeecher = new LogLeecher(msg);\n+        balClient.runMain(\"run\", new String[]{\"../testBal/hello_world.bal\"}, new HashMap<>(), new String[0],", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTM5MjEzNA=="}, "originalCommit": {"oid": "10c12ae658066345b83d20a31cb10e84c9091fdb"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMTY0MjEwOnYy", "diffSide": "RIGHT", "path": "cli/ballerina-packerina/src/test/java/org/ballerinalang/packerina/cmd/BuildCommandTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQwOToyMDowOVrOFjBZbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQwOToyMjoxNVrOFjBdfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjI2NzM3Mg==", "bodyText": "Did you check java.nio.file.Path.relativize ?\nhttps://stackoverflow.com/questions/37747896/understanding-java-nio-file-path-relativizepath-other", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20695#discussion_r372267372", "createdAt": "2020-01-29T09:20:09Z", "author": {"login": "hemikak"}, "path": "cli/ballerina-packerina/src/test/java/org/ballerinalang/packerina/cmd/BuildCommandTest.java", "diffHunk": "@@ -459,6 +459,18 @@ public void testBuildCommand() throws IOException {\n         readOutput(true);\n     }\n \n+    @Test(description = \"Build a valid ballerina file with relative path\")\n+    public void testBuildWithRelativePath() throws IOException {\n+        String buildPath = \"relative\" + File.separator + \"testDir\" + File.separator + \"..\" + File.separator + \"testBal\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "581c379c728844b8853efffbda8b672c05dff74e"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjI2ODQxMw==", "bodyText": "This is also fine.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20695#discussion_r372268413", "createdAt": "2020-01-29T09:22:15Z", "author": {"login": "hemikak"}, "path": "cli/ballerina-packerina/src/test/java/org/ballerinalang/packerina/cmd/BuildCommandTest.java", "diffHunk": "@@ -459,6 +459,18 @@ public void testBuildCommand() throws IOException {\n         readOutput(true);\n     }\n \n+    @Test(description = \"Build a valid ballerina file with relative path\")\n+    public void testBuildWithRelativePath() throws IOException {\n+        String buildPath = \"relative\" + File.separator + \"testDir\" + File.separator + \"..\" + File.separator + \"testBal\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjI2NzM3Mg=="}, "originalCommit": {"oid": "581c379c728844b8853efffbda8b672c05dff74e"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 536, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}