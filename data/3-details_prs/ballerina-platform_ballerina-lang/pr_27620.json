{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ0MDAxNjYw", "number": 27620, "title": "Fix included record parameter issue with `init` function", "bodyText": "Purpose\n\n$Title.\n\nFixes #27617\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-12-22T09:46:14Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27620", "merged": true, "mergeCommit": {"oid": "5fce5842af0b682ebb45dc4cc3fd9b2b79b110e9"}, "closed": true, "closedAt": "2020-12-22T10:50:12Z", "author": {"login": "chiranSachintha"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdonSnNAH2gAyNTQ0MDAxNjYwOmI1MGFmNjBlNjVlMmI3Y2JkMDYzMDBkYWIwNjEyZGY5YWExYjIxMGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdon-0TgFqTU1Njk3Njk1NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b50af60e65e2b7cbd06300dab0612df9aa1b210a", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b50af60e65e2b7cbd06300dab0612df9aa1b210a", "committedDate": "2020-12-22T09:40:50Z", "message": "Set flags of generated init function"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdd66ecf9617e975a00e3dad9f253a68961e66a7", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/fdd66ecf9617e975a00e3dad9f253a68961e66a7", "committedDate": "2020-12-22T09:41:07Z", "message": "Add unit tests for included record parameter"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2OTYwMjMx", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27620#pullrequestreview-556960231", "createdAt": "2020-12-22T10:03:04Z", "commit": {"oid": "fdd66ecf9617e975a00e3dad9f253a68961e66a7"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxMDowMzowNFrOIJ1b_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQxMDowNDozOVrOIJ1fQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzE4MzYxMw==", "bodyText": "Let's fix the alignment here - align this with the start of Flags.asMask(requiredParameter.flagSet), similar to the rest of the args below.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27620#discussion_r547183613", "createdAt": "2020-12-22T10:03:04Z", "author": {"login": "MaryamZi"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/desugar/Desugar.java", "diffHunk": "@@ -536,7 +536,8 @@ private void addRequiredParamsToGeneratedInitFunction(BLangFunction initFunction\n                     ASTBuilderUtil.createVariable(initFunction.pos,\n                                                   requiredParameter.name.getValue(), requiredParameter.type,\n                                                   createRequiredParamExpr(requiredParameter.expr),\n-                                                  new BVarSymbol(0, names.fromString(requiredParameter.name.getValue()),\n+                                                  new BVarSymbol(Flags.asMask(requiredParameter.flagSet),\n+                                                  names.fromString(requiredParameter.name.getValue()),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fdd66ecf9617e975a00e3dad9f253a68961e66a7"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzE4NDE2NA==", "bodyText": "Are these names correct? IMO, it implies there's a param of a function type.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27620#discussion_r547184164", "createdAt": "2020-12-22T10:04:05Z", "author": {"login": "MaryamZi"}, "path": "tests/jballerina-unit-test/src/test/java/org/ballerinalang/test/functions/FunctionWithIncludedRecordParam.java", "diffHunk": "@@ -185,4 +185,9 @@ public void testFunctionOfFunctionTypedParamWithIncludedRecordParam21() {\n     public void testFunctionOfFunctionTypedParamWithIncludedRecordParam22() {\n         BRunUtil.invoke(result, \"testFunctionOfFunctionTypedParamWithIncludedRecordParam22\");\n     }\n+\n+    @Test\n+    public void testFunctionOfFunctionTypedParamWithIncludedRecordParam23() {\n+        BRunUtil.invoke(result, \"testFunctionOfFunctionTypedParamWithIncludedRecordParam23\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fdd66ecf9617e975a00e3dad9f253a68961e66a7"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzE4NDQ0OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                TestClass tclass =  new(firstName = \"chiran\", secondName = \"sachintha\");\n          \n          \n            \n                TestClass tclass = new (firstName = \"chiran\", secondName = \"sachintha\");", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27620#discussion_r547184448", "createdAt": "2020-12-22T10:04:39Z", "author": {"login": "MaryamZi"}, "path": "tests/jballerina-unit-test/src/test/resources/test-src/functions/functions_with_included_record_parameters.bal", "diffHunk": "@@ -300,6 +300,21 @@ function testFunctionOfFunctionTypedParamWithIncludedRecordParam22() {\n     assertEquality(x, val);\n }\n \n+public class TestClass {\n+    public string firstName;\n+    public string secondName;\n+    public function init(*NewPerson p) {\n+        self.firstName = p.firstName;\n+        self.secondName = p.secondName;\n+    }\n+}\n+\n+function testFunctionOfFunctionTypedParamWithIncludedRecordParam23() {\n+    TestClass tclass =  new(firstName = \"chiran\", secondName = \"sachintha\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fdd66ecf9617e975a00e3dad9f253a68961e66a7"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "deca04b6ba1462cd717703fbb44d91afff34132b", "author": {"user": {"login": "chiranSachintha", "name": "Chiran Sachintha"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/deca04b6ba1462cd717703fbb44d91afff34132b", "committedDate": "2020-12-22T10:22:03Z", "message": "Fix review suggestions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2OTc2OTU1", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27620#pullrequestreview-556976955", "createdAt": "2020-12-22T10:29:07Z", "commit": {"oid": "deca04b6ba1462cd717703fbb44d91afff34132b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4665, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}