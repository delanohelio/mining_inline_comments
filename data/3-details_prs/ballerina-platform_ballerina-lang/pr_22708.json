{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA0OTQ0NDE3", "number": 22708, "title": "Fix for 'BArrayType' referencing error for multidimensional array", "bodyText": "Purpose\n\nThis PR will fix the wrong referencing of dimensions for multi dimensional arrays.\n\nFixes #21556\nApproach\n\nN/A\n\nSamples\n\nN/A\n\nRemarks\n\nN/A\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-04-17T06:19:21Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22708", "merged": true, "mergeCommit": {"oid": "6176b2ce8f7f9c07b9fe335d8cdfad86b9bd0595"}, "closed": true, "closedAt": "2020-04-30T18:37:07Z", "author": {"login": "HindujaB"}, "timelineItems": {"totalCount": 40, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYbg9TAFqTM5NTE5NjY5MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABccxfRYAFqTQwMzc3ODI2Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1MTk2Njkw", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22708#pullrequestreview-395196690", "createdAt": "2020-04-17T06:41:28Z", "commit": {"oid": "4ab1b4665e644f2e1627943bed8776cd4f970bb8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QwNjo0MToyOFrOGHBtQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QwNjo0MToyOFrOGHBtQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDAyMTE4NA==", "bodyText": "Licence header should be 2020", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22708#discussion_r410021184", "createdAt": "2020-04-17T06:41:28Z", "author": {"login": "warunalakshitha"}, "path": "bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/types/BArrayType.java", "diffHunk": "@@ -1,20 +1,20 @@\n /*\n-*   Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n-*\n-*  WSO2 Inc. licenses this file to you under the Apache License,\n-*  Version 2.0 (the \"License\"); you may not use this file except\n-*  in compliance with the License.\n-*  You may obtain a copy of the License at\n-*\n-*    http://www.apache.org/licenses/LICENSE-2.0\n-*\n-* Unless required by applicable law or agreed to in writing,\n-* software distributed under the License is distributed on an\n-* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n-* KIND, either express or implied.  See the License for the\n-* specific language governing permissions and limitations\n-* under the License.\n-*/\n+ *   Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ab1b4665e644f2e1627943bed8776cd4f970bb8"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1MjMxMjEx", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22708#pullrequestreview-395231211", "createdAt": "2020-04-17T07:44:41Z", "commit": {"oid": "52879ba833b656e946a3650bcd6a2ef5b9d0683e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QwNzo0NDo0MVrOGHDafA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QwNzo0NDo0MVrOGHDafA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDA0OTE0OA==", "bodyText": "We change year only in newly created files, not in old files.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22708#discussion_r410049148", "createdAt": "2020-04-17T07:44:41Z", "author": {"login": "riyafa"}, "path": "bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/types/BArrayType.java", "diffHunk": "@@ -1,20 +1,20 @@\n /*\n-*   Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n-*\n-*  WSO2 Inc. licenses this file to you under the Apache License,\n-*  Version 2.0 (the \"License\"); you may not use this file except\n-*  in compliance with the License.\n-*  You may obtain a copy of the License at\n-*\n-*    http://www.apache.org/licenses/LICENSE-2.0\n-*\n-* Unless required by applicable law or agreed to in writing,\n-* software distributed under the License is distributed on an\n-* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n-* KIND, either express or implied.  See the License for the\n-* specific language governing permissions and limitations\n-* under the License.\n-*/\n+ *   Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "52879ba833b656e946a3650bcd6a2ef5b9d0683e"}, "originalPosition": 18}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "52879ba833b656e946a3650bcd6a2ef5b9d0683e", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/52879ba833b656e946a3650bcd6a2ef5b9d0683e", "committedDate": "2020-04-17T06:55:08Z", "message": "Change year into 2020 in license section"}, "afterCommit": {"oid": "8c93df82f4a65e741f1ef0aa41bf2d59c11312c1", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8c93df82f4a65e741f1ef0aa41bf2d59c11312c1", "committedDate": "2020-04-17T09:44:43Z", "message": "Add test cases and revert the commit of unnecessary files"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1NTM1NTE5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22708#pullrequestreview-395535519", "createdAt": "2020-04-17T15:05:27Z", "commit": {"oid": "8c93df82f4a65e741f1ef0aa41bf2d59c11312c1"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxNTowNToyOFrOGHRxQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxNTowNToyOFrOGHRxQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDI4NDM1Mg==", "bodyText": "Shall we remove this formatting as it is not necessary?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22708#discussion_r410284352", "createdAt": "2020-04-17T15:05:28Z", "author": {"login": "riyafa"}, "path": "bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/types/BArrayType.java", "diffHunk": "@@ -1,20 +1,20 @@\n /*\n-*   Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n-*\n-*  WSO2 Inc. licenses this file to you under the Apache License,\n-*  Version 2.0 (the \"License\"); you may not use this file except\n-*  in compliance with the License.\n-*  You may obtain a copy of the License at\n-*\n-*    http://www.apache.org/licenses/LICENSE-2.0\n-*\n-* Unless required by applicable law or agreed to in writing,\n-* software distributed under the License is distributed on an\n-* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n-* KIND, either express or implied.  See the License for the\n-* specific language governing permissions and limitations\n-* under the License.\n-*/\n+ *   Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ *  in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c93df82f4a65e741f1ef0aa41bf2d59c11312c1"}, "originalPosition": 33}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MTc5OTU0", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22708#pullrequestreview-396179954", "createdAt": "2020-04-20T06:48:32Z", "commit": {"oid": "8c93df82f4a65e741f1ef0aa41bf2d59c11312c1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwNjo0ODozMlrOGIFmdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwNjo0ODozMlrOGIFmdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTEzMzU1OA==", "bodyText": "Formatting issue here", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22708#discussion_r411133558", "createdAt": "2020-04-20T06:48:32Z", "author": {"login": "Kishanthan"}, "path": "tests/jballerina-unit-test/src/test/resources/test-src/statements/arrays/array-test.bal", "diffHunk": "@@ -201,3 +201,15 @@ function assertArrayLengthPanic(int expected, any[] arr, string message = \"Array\n         panic error(message + \" Expected : \" + expected.toString() + \" Actual : \" + actual.toString());\n     }\n }\n+\n+function testMultidimensionalArrayString() returns string {\n+    int[][2] arr = [];\n+    typedesc<any> t = typeof arr;\n+    return t.toString();\n+}\n+\n+function testArrayMapString() returns string {\n+        map<Foo>[2][] arr = [];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c93df82f4a65e741f1ef0aa41bf2d59c11312c1"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8c93df82f4a65e741f1ef0aa41bf2d59c11312c1", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8c93df82f4a65e741f1ef0aa41bf2d59c11312c1", "committedDate": "2020-04-17T09:44:43Z", "message": "Add test cases and revert the commit of unnecessary files"}, "afterCommit": {"oid": "59c6a14a1d1212d5aa2adfb41dce4fe2d5b3c9cc", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/59c6a14a1d1212d5aa2adfb41dce4fe2d5b3c9cc", "committedDate": "2020-04-20T10:44:23Z", "message": "Modify the string concat() usage in toString() function"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "59c6a14a1d1212d5aa2adfb41dce4fe2d5b3c9cc", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/59c6a14a1d1212d5aa2adfb41dce4fe2d5b3c9cc", "committedDate": "2020-04-20T10:44:23Z", "message": "Modify the string concat() usage in toString() function"}, "afterCommit": {"oid": "5bbca472e72ad5e4e0cd58d63b96473396e3bc44", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5bbca472e72ad5e4e0cd58d63b96473396e3bc44", "committedDate": "2020-04-20T11:56:36Z", "message": "Remove unused imports to fix checkstyle error"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5bbca472e72ad5e4e0cd58d63b96473396e3bc44", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5bbca472e72ad5e4e0cd58d63b96473396e3bc44", "committedDate": "2020-04-20T11:56:36Z", "message": "Remove unused imports to fix checkstyle error"}, "afterCommit": {"oid": "122d8385f4b861558e324f45e5334784ff3c29c8", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/122d8385f4b861558e324f45e5334784ff3c29c8", "committedDate": "2020-04-25T12:54:24Z", "message": "Change the logic of toString function\n\nThis commit relates to the issue #21556"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwNjI3MTIx", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22708#pullrequestreview-400627121", "createdAt": "2020-04-27T05:00:01Z", "commit": {"oid": "122d8385f4b861558e324f45e5334784ff3c29c8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QwNTowMDowMVrOGMQyDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QwNTowMDowMVrOGMQyDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTUxMTA1NA==", "bodyText": "This cast can be moved to a variable as there are three casts happening for the same.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22708#discussion_r415511054", "createdAt": "2020-04-27T05:00:01Z", "author": {"login": "Kishanthan"}, "path": "bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/types/BArrayType.java", "diffHunk": "@@ -128,8 +128,32 @@ public boolean equals(Object obj) {\n \n     @Override\n     public String toString() {\n-        StringBuilder sb = new StringBuilder(elementType.toString());\n-        return size != -1 ? sb.append(\"[\").append(size).append(\"]\").toString() : sb.append(\"[]\").toString();\n+        StringBuilder sb = new StringBuilder();\n+        sb.append(getTypeName());\n+        sb.append(getSizeString());\n+        BType element = elementType;\n+        while (element instanceof BArrayType) {\n+            sb.append(((BArrayType) element).getSizeString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "122d8385f4b861558e324f45e5334784ff3c29c8"}, "originalPosition": 48}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAwNjM0MjI4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22708#pullrequestreview-400634228", "createdAt": "2020-04-27T05:24:31Z", "commit": {"oid": "122d8385f4b861558e324f45e5334784ff3c29c8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QwNToyNDozMlrOGMRSLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QwNToyNDozMlrOGMRSLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTUxOTI3OA==", "bodyText": "I don't think we need this line, since already checked in the while.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22708#discussion_r415519278", "createdAt": "2020-04-27T05:24:32Z", "author": {"login": "manuranga"}, "path": "bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/types/BArrayType.java", "diffHunk": "@@ -128,8 +128,32 @@ public boolean equals(Object obj) {\n \n     @Override\n     public String toString() {\n-        StringBuilder sb = new StringBuilder(elementType.toString());\n-        return size != -1 ? sb.append(\"[\").append(size).append(\"]\").toString() : sb.append(\"[]\").toString();\n+        StringBuilder sb = new StringBuilder();\n+        sb.append(getTypeName());\n+        sb.append(getSizeString());\n+        BType element = elementType;\n+        while (element instanceof BArrayType) {\n+            sb.append(((BArrayType) element).getSizeString());\n+            if (!(((BArrayType) element).elementType instanceof BArrayType)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "122d8385f4b861558e324f45e5334784ff3c29c8"}, "originalPosition": 49}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a9602ad8dfa8420eea723f0f163906c6dcfb1db2", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a9602ad8dfa8420eea723f0f163906c6dcfb1db2", "committedDate": "2020-04-27T05:38:13Z", "message": "Add a variable for repeating type casts\n\nThis commit relates to the issue #21556"}, "afterCommit": {"oid": "bb556716f940f13eaf2400c2efa2442a5eb18dda", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bb556716f940f13eaf2400c2efa2442a5eb18dda", "committedDate": "2020-04-27T06:06:47Z", "message": "Remove unwanted lines"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bb556716f940f13eaf2400c2efa2442a5eb18dda", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bb556716f940f13eaf2400c2efa2442a5eb18dda", "committedDate": "2020-04-27T06:06:47Z", "message": "Remove unwanted lines"}, "afterCommit": {"oid": "738e478ac89ca01e785e85624f19f8b8cb4ad8db", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/738e478ac89ca01e785e85624f19f8b8cb4ad8db", "committedDate": "2020-04-27T11:40:40Z", "message": "Get rid of getType() in toString method"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "738e478ac89ca01e785e85624f19f8b8cb4ad8db", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/738e478ac89ca01e785e85624f19f8b8cb4ad8db", "committedDate": "2020-04-27T11:40:40Z", "message": "Get rid of getType() in toString method"}, "afterCommit": {"oid": "9277821411e1c42a4a49b48589efd35b05a9502e", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9277821411e1c42a4a49b48589efd35b05a9502e", "committedDate": "2020-04-28T03:34:54Z", "message": "Get rid of getType() in toString method"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9277821411e1c42a4a49b48589efd35b05a9502e", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9277821411e1c42a4a49b48589efd35b05a9502e", "committedDate": "2020-04-28T03:34:54Z", "message": "Get rid of getType() in toString method"}, "afterCommit": {"oid": "07b18a564e5435e50421d62e4b33f0d8761a8436", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/07b18a564e5435e50421d62e4b33f0d8761a8436", "committedDate": "2020-04-28T05:55:22Z", "message": "Get rid of getType() in toString method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxNjcxNTE2", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22708#pullrequestreview-401671516", "createdAt": "2020-04-28T09:45:09Z", "commit": {"oid": "07b18a564e5435e50421d62e4b33f0d8761a8436"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQwOTo0NTowOVrOGNLzpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQwOTo0Nzo0MVrOGNL51w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjQ3ODExOA==", "bodyText": "why is this check moved outside of while loop's condition?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22708#discussion_r416478118", "createdAt": "2020-04-28T09:45:09Z", "author": {"login": "manuranga"}, "path": "bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/types/BArrayType.java", "diffHunk": "@@ -128,8 +128,23 @@ public boolean equals(Object obj) {\n \n     @Override\n     public String toString() {\n-        StringBuilder sb = new StringBuilder(elementType.toString());\n-        return size != -1 ? sb.append(\"[\").append(size).append(\"]\").toString() : sb.append(\"[]\").toString();\n+        StringBuilder sb = new StringBuilder();\n+        BType element = elementType;\n+        sb.append(getSizeString());\n+        while (true) {\n+            if (!(element instanceof BArrayType)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07b18a564e5435e50421d62e4b33f0d8761a8436"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjQ3OTcwMw==", "bodyText": "insert is less efficient than append, can we move this above sb.append(getSizeString()); and use append ?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22708#discussion_r416479703", "createdAt": "2020-04-28T09:47:41Z", "author": {"login": "manuranga"}, "path": "bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/types/BArrayType.java", "diffHunk": "@@ -128,8 +128,23 @@ public boolean equals(Object obj) {\n \n     @Override\n     public String toString() {\n-        StringBuilder sb = new StringBuilder(elementType.toString());\n-        return size != -1 ? sb.append(\"[\").append(size).append(\"]\").toString() : sb.append(\"[]\").toString();\n+        StringBuilder sb = new StringBuilder();\n+        BType element = elementType;\n+        sb.append(getSizeString());\n+        while (true) {\n+            if (!(element instanceof BArrayType)) {\n+                break;\n+            }\n+            BArrayType arrayElement = (BArrayType) element;\n+            sb.append(arrayElement.getSizeString());\n+            element = arrayElement.elementType;\n+        }\n+        sb.insert(0, element.toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07b18a564e5435e50421d62e4b33f0d8761a8436"}, "originalPosition": 54}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d937100ddcb7e5a1d8bb26f6fba57e7ff64a9571", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d937100ddcb7e5a1d8bb26f6fba57e7ff64a9571", "committedDate": "2020-04-28T10:15:23Z", "message": "Remove unnecessary checks"}, "afterCommit": {"oid": "1d36132fbe4080bd76afdef3bba901ea3a9078b5", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1d36132fbe4080bd76afdef3bba901ea3a9078b5", "committedDate": "2020-04-29T15:39:54Z", "message": "Modify union type toString method\n\nThis commit resolves the ambiguity in toString of union types. Eg.: (int|string[][4])[3] is clearer than int|string[][4][3]"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyNDYzNTg1", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22708#pullrequestreview-402463585", "createdAt": "2020-04-29T08:34:21Z", "commit": {"oid": "d937100ddcb7e5a1d8bb26f6fba57e7ff64a9571"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwODozNDoyMVrOGN08AA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwNTo0NToxOVrOGOaa_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzE1MjAwMA==", "bodyText": "can we please change this to match the style of the repo, using tag to check the sub class type.\nbType.tag == TypeTags.ARRAY", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22708#discussion_r417152000", "createdAt": "2020-04-29T08:34:21Z", "author": {"login": "manuranga"}, "path": "bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/types/BArrayType.java", "diffHunk": "@@ -128,8 +128,20 @@ public boolean equals(Object obj) {\n \n     @Override\n     public String toString() {\n-        StringBuilder sb = new StringBuilder(elementType.toString());\n-        return size != -1 ? sb.append(\"[\").append(size).append(\"]\").toString() : sb.append(\"[]\").toString();\n+        StringBuilder sb = new StringBuilder();\n+        BType element = elementType;\n+        sb.append(getSizeString());\n+        while (element instanceof BArrayType) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d937100ddcb7e5a1d8bb26f6fba57e7ff64a9571"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzE1Mzc1OA==", "bodyText": "can we please add and example with complex type\neg:\n(int|boolean[6][4])[2][3]", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22708#discussion_r417153758", "createdAt": "2020-04-29T08:37:25Z", "author": {"login": "manuranga"}, "path": "tests/jballerina-unit-test/src/test/resources/test-src/statements/arrays/array-test.bal", "diffHunk": "@@ -201,3 +201,34 @@ function assertArrayLengthPanic(int expected, any[] arr, string message = \"Array\n         panic error(message + \" Expected : \" + expected.toString() + \" Actual : \" + actual.toString());\n     }\n }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d937100ddcb7e5a1d8bb26f6fba57e7ff64a9571"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzc2NjE0MA==", "bodyText": "This was correct the way it was, typedesc map<int|string>\nnew format is redundant typedesc map<(int|string)>.\nOnly advance case like (int|boolean[6][4])[2][3] needs brackets", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22708#discussion_r417766140", "createdAt": "2020-04-30T05:45:19Z", "author": {"login": "manuranga"}, "path": "bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/types/BUnionType.java", "diffHunk": "@@ -120,7 +120,7 @@ public String toString() {\n                     sb.append(PIPE);\n                 }\n             }\n-            cachedToString = sb.toString();\n+            cachedToString = sb.append(\")\").toString();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d36132fbe4080bd76afdef3bba901ea3a9078b5"}, "originalPosition": 14}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1d36132fbe4080bd76afdef3bba901ea3a9078b5", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1d36132fbe4080bd76afdef3bba901ea3a9078b5", "committedDate": "2020-04-29T15:39:54Z", "message": "Modify union type toString method\n\nThis commit resolves the ambiguity in toString of union types. Eg.: (int|string[][4])[3] is clearer than int|string[][4][3]"}, "afterCommit": {"oid": "3ac30498b351f60c7c5232a3fade7b4fc75bf1b2", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3ac30498b351f60c7c5232a3fade7b4fc75bf1b2", "committedDate": "2020-04-30T08:00:37Z", "message": "Add necessary test case for array of tuples"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5b769366a2d22453d56d375db79fa738e432f3f", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f5b769366a2d22453d56d375db79fa738e432f3f", "committedDate": "2020-04-30T12:07:49Z", "message": "Fix for reverse referencing in toString method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d6d46060e01928db87c58ad1c6f9b916a278e29", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0d6d46060e01928db87c58ad1c6f9b916a278e29", "committedDate": "2020-04-30T12:07:49Z", "message": "Rename variables in toString function"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54e03a4281b535c743649f02a441d76ce68159ab", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/54e03a4281b535c743649f02a441d76ce68159ab", "committedDate": "2020-04-30T12:07:49Z", "message": "Fix the getType method for Array of BMapType and BArrayType\n\nThis commit fixes the returning element type method related to issue #21556"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d4beca94d2dbf0eab20ba87bfd09db7ffebef9e", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3d4beca94d2dbf0eab20ba87bfd09db7ffebef9e", "committedDate": "2020-04-30T12:07:49Z", "message": "Change year into 2020 in license section"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "124dce91604773a746dd29b1cdc3ba4054242415", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/124dce91604773a746dd29b1cdc3ba4054242415", "committedDate": "2020-04-30T12:07:49Z", "message": "Add test cases and revert the commit of unnecessary files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa5c400461923f7b52a1684c155e6172d1b3a31f", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/aa5c400461923f7b52a1684c155e6172d1b3a31f", "committedDate": "2020-04-30T12:07:49Z", "message": "Modify tests cases by adding assertion inside .bal file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ce0b6ceaa76967694da7083d01d54c6d4d3cba8", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1ce0b6ceaa76967694da7083d01d54c6d4d3cba8", "committedDate": "2020-04-30T12:07:49Z", "message": "Modify the string concat() usage in toString() function"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0fdcc7b6cbda4eca344307c1895c3ea0e3396ddf", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0fdcc7b6cbda4eca344307c1895c3ea0e3396ddf", "committedDate": "2020-04-30T12:07:49Z", "message": "Remove unused imports to fix checkstyle error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4792472cbdf6a336db92e1136e862137b786d0eb", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4792472cbdf6a336db92e1136e862137b786d0eb", "committedDate": "2020-04-30T12:07:49Z", "message": "Change the logic of toString function\n\nThis commit relates to the issue #21556"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd4cdf31ccdb75517b531d91505787585d50cb51", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/fd4cdf31ccdb75517b531d91505787585d50cb51", "committedDate": "2020-04-30T12:07:49Z", "message": "Add a variable for repeating type casts\n\nThis commit relates to the issue #21556"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70c94823f3d06069787c69e46f8459ad9d85fa74", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/70c94823f3d06069787c69e46f8459ad9d85fa74", "committedDate": "2020-04-30T12:07:49Z", "message": "Remove unwanted lines"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4712ceaf280d3dd5e3950790a42b2c52882e1300", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4712ceaf280d3dd5e3950790a42b2c52882e1300", "committedDate": "2020-04-30T12:07:50Z", "message": "Get rid of getType() in toString method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75508dc2047d61c5d32a2b9775ce95547fa71675", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/75508dc2047d61c5d32a2b9775ce95547fa71675", "committedDate": "2020-04-30T12:07:50Z", "message": "Remove unnecessary checks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c5439a6d126bce93489c8e52499a6a369b3624b", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0c5439a6d126bce93489c8e52499a6a369b3624b", "committedDate": "2020-04-30T12:07:50Z", "message": "Change instance of check into tag check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e91f5a9155b7a85f6fedda8a8233f16f9fbded2d", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e91f5a9155b7a85f6fedda8a8233f16f9fbded2d", "committedDate": "2020-04-30T12:07:50Z", "message": "Add test case for union type arrays"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19433f03fc054f6a72a026d9cc6403a1fca7b869", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/19433f03fc054f6a72a026d9cc6403a1fca7b869", "committedDate": "2020-04-30T12:07:50Z", "message": "Modify union type toString method\n\nThis commit resolves the ambiguity in toString of union types. Eg.: (int|string[][4])[3] is clearer than int|string[][4][3]"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bdc55370d8060ad4de437fa8c8b3f9b70125bad6", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bdc55370d8060ad4de437fa8c8b3f9b70125bad6", "committedDate": "2020-04-30T12:07:50Z", "message": "Revert \"Modify union type toString method\"\n\nThis reverts commit 1d36132f"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a40691434f55b5d27e83b7a00ea09bbb84fb70ee", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a40691434f55b5d27e83b7a00ea09bbb84fb70ee", "committedDate": "2020-04-30T12:07:50Z", "message": "Modify union type toString method\n\nThis commit resolves the ambiguity in toString of array union types. Eg.: (int|string[][4])[3] is clearer than int|string[][4][3]"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "224b02b27a596c33e843dfb4ad66b31b263a2140", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/224b02b27a596c33e843dfb4ad66b31b263a2140", "committedDate": "2020-04-30T12:07:50Z", "message": "Add necessary test case for array of tuples"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b78854689a3e68c6dad786ac8f60bd7fccb5718", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1b78854689a3e68c6dad786ac8f60bd7fccb5718", "committedDate": "2020-04-30T12:07:50Z", "message": "Modify error messages that reference union type arrays"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3ac30498b351f60c7c5232a3fade7b4fc75bf1b2", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3ac30498b351f60c7c5232a3fade7b4fc75bf1b2", "committedDate": "2020-04-30T08:00:37Z", "message": "Add necessary test case for array of tuples"}, "afterCommit": {"oid": "1b78854689a3e68c6dad786ac8f60bd7fccb5718", "author": {"user": {"login": "HindujaB", "name": "Hinduja Balasubramaniyam"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1b78854689a3e68c6dad786ac8f60bd7fccb5718", "committedDate": "2020-04-30T12:07:50Z", "message": "Modify error messages that reference union type arrays"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzNzc4MjY2", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22708#pullrequestreview-403778266", "createdAt": "2020-04-30T18:35:28Z", "commit": {"oid": "1b78854689a3e68c6dad786ac8f60bd7fccb5718"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3574, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}