{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3MDk4NTY4", "number": 23693, "title": "Add transformer for XMLNamespaceDeclarationNode", "bodyText": "Purpose\n$subject\nFixes #23692\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-06-03T10:07:09Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23693", "merged": true, "mergeCommit": {"oid": "9bf994516ce1ae3b0fda2c21f9f5fab8e64734e8"}, "closed": true, "closedAt": "2020-06-05T06:18:01Z", "author": {"login": "KavinduZoysa"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnmyFzAFqTQyMzQxMzU1OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcoMg7mgFqTQyNTAyMjIxNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzNDEzNTU4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23693#pullrequestreview-423413558", "createdAt": "2020-06-03T10:16:42Z", "commit": {"oid": "dc9e13e2bd2a717194b64171b2a77ef658a07e6a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxMDoxNjo0M1rOGeVa1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxMDoxOTowMFrOGeVf0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ2MTM5OA==", "bodyText": "Can't use single param createIdentifier method?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23693#discussion_r434461398", "createdAt": "2020-06-03T10:16:43Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/parser/BLangNodeTransformer.java", "diffHunk": "@@ -1247,11 +1256,22 @@ public BLangNode transform(BinaryExpressionNode binaryExprNode) {\n \n     @Override\n     public BLangNode transform(FieldAccessExpressionNode fieldAccessExprNode) {\n-        BLangFieldBasedAccess bLFieldBasedAccess = (BLangFieldBasedAccess) TreeBuilder.createFieldBasedAccessNode();\n+        BLangFieldBasedAccess bLFieldBasedAccess;\n         Node fieldName = fieldAccessExprNode.fieldName();\n+        if (fieldName.kind() == SyntaxKind.QUALIFIED_NAME_REFERENCE) {\n+            QualifiedNameReferenceNode qualifiedFieldName = (QualifiedNameReferenceNode)fieldName;\n+            BLangFieldBasedAccess.BLangNSPrefixedFieldBasedAccess accessWithPrefixNode =\n+                    (BLangFieldBasedAccess.BLangNSPrefixedFieldBasedAccess)\n+                            TreeBuilder.createFieldBasedAccessWithPrefixNode();\n+            accessWithPrefixNode.nsPrefix = createIdentifier(qualifiedFieldName.modulePrefix());\n+            accessWithPrefixNode.field = createIdentifier(qualifiedFieldName.identifier());\n+            bLFieldBasedAccess = accessWithPrefixNode;\n+        } else {\n+            bLFieldBasedAccess = (BLangFieldBasedAccess) TreeBuilder.createFieldBasedAccessNode();\n+            bLFieldBasedAccess.field =\n+                    createIdentifier(getPosition(fieldName), ((SimpleNameReferenceNode) fieldName).name());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc9e13e2bd2a717194b64171b2a77ef658a07e6a"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ2MjQwNQ==", "bodyText": "Can't use single param createIdentifier method?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23693#discussion_r434462405", "createdAt": "2020-06-03T10:18:30Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/parser/BLangNodeTransformer.java", "diffHunk": "@@ -2015,6 +2057,55 @@ public BLangNode transform(XMLTextNode xmlTextNode) {\n         return xmlTextLiteral;\n     }\n \n+    @Override\n+    public BLangNode transform(XMLNamespaceDeclarationNode xmlnsDeclNode) {\n+        BLangXMLNS xmlns = (BLangXMLNS) TreeBuilder.createXMLNSNode();\n+        BLangIdentifier prefixIdentifier = createIdentifier(getPosition(xmlnsDeclNode.namespacePrefix()),\n+                xmlnsDeclNode.namespacePrefix().text());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc9e13e2bd2a717194b64171b2a77ef658a07e6a"}, "originalPosition": 174}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDQ2MjY3Mw==", "bodyText": "Can't use single param createIdentifier method?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23693#discussion_r434462673", "createdAt": "2020-06-03T10:19:00Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/parser/BLangNodeTransformer.java", "diffHunk": "@@ -2015,6 +2057,55 @@ public BLangNode transform(XMLTextNode xmlTextNode) {\n         return xmlTextLiteral;\n     }\n \n+    @Override\n+    public BLangNode transform(XMLNamespaceDeclarationNode xmlnsDeclNode) {\n+        BLangXMLNS xmlns = (BLangXMLNS) TreeBuilder.createXMLNSNode();\n+        BLangIdentifier prefixIdentifier = createIdentifier(getPosition(xmlnsDeclNode.namespacePrefix()),\n+                xmlnsDeclNode.namespacePrefix().text());\n+\n+        xmlns.namespaceURI = createSimpleLiteral(xmlnsDeclNode.namespaceuri());\n+        xmlns.prefix = prefixIdentifier;\n+        xmlns.pos = getPosition(xmlnsDeclNode);\n+\n+        BLangXMLNSStatement xmlnsStmt = (BLangXMLNSStatement) TreeBuilder.createXMLNSDeclrStatementNode();\n+        xmlnsStmt.xmlnsDecl = xmlns;\n+        xmlnsStmt.pos = getPosition(xmlnsDeclNode);\n+        return xmlnsStmt;\n+    }\n+\n+    @Override\n+    public BLangNode transform(ModuleXMLNamespaceDeclarationNode xmlnsDeclNode) {\n+        BLangXMLNS xmlns = (BLangXMLNS) TreeBuilder.createXMLNSNode();\n+        BLangIdentifier prefixIdentifier = createIdentifier(getPosition(xmlnsDeclNode.namespacePrefix()),\n+                xmlnsDeclNode.namespacePrefix().text());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc9e13e2bd2a717194b64171b2a77ef658a07e6a"}, "originalPosition": 190}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b4df89ae14cdaa4cfbf3a959cedfd3761fce741", "author": {"user": {"login": "KavinduZoysa", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4b4df89ae14cdaa4cfbf3a959cedfd3761fce741", "committedDate": "2020-06-04T19:13:23Z", "message": "Transform XMLNamespaceDeclarationNode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e407239579ea90b69f8c5153826fadfad40ec3d", "author": {"user": {"login": "KavinduZoysa", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3e407239579ea90b69f8c5153826fadfad40ec3d", "committedDate": "2020-06-04T19:13:23Z", "message": "Add module level xml ns declaration node"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec5d2534a1f6ef2bea38881c3290684a8e38a474", "author": {"user": {"login": "KavinduZoysa", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ec5d2534a1f6ef2bea38881c3290684a8e38a474", "committedDate": "2020-06-04T19:13:23Z", "message": "Add the parser logic for xml ns delc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4a3e1a153b7473f1b388271022e2fd57d07148c", "author": {"user": {"login": "KavinduZoysa", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e4a3e1a153b7473f1b388271022e2fd57d07148c", "committedDate": "2020-06-04T19:17:47Z", "message": "Transform the module level xml ns decl"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f3a71c5ad1db5d01188fbf505622cbeb3905c3f", "author": {"user": {"login": "KavinduZoysa", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4f3a71c5ad1db5d01188fbf505622cbeb3905c3f", "committedDate": "2020-06-04T19:17:47Z", "message": "Fix the failure parser tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b70d6e60f68258309ab45188d8ca5bb151576e7", "author": {"user": {"login": "KavinduZoysa", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7b70d6e60f68258309ab45188d8ca5bb151576e7", "committedDate": "2020-06-04T19:17:47Z", "message": "Fix suggetions"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "70140103480de0a7358f9071a6e6853224ca1505", "author": {"user": {"login": "KavinduZoysa", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/70140103480de0a7358f9071a6e6853224ca1505", "committedDate": "2020-06-03T11:27:12Z", "message": "Fix suggetions"}, "afterCommit": {"oid": "7b70d6e60f68258309ab45188d8ca5bb151576e7", "author": {"user": {"login": "KavinduZoysa", "name": null}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7b70d6e60f68258309ab45188d8ca5bb151576e7", "committedDate": "2020-06-04T19:17:47Z", "message": "Fix suggetions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1MDIyMjE3", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23693#pullrequestreview-425022217", "createdAt": "2020-06-05T06:17:53Z", "commit": {"oid": "7b70d6e60f68258309ab45188d8ca5bb151576e7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4504, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}