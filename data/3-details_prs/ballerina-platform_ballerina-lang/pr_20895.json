{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcxODU5MzY2", "number": 20895, "title": "Handle the exception thrown when user lacks permission to bal files", "bodyText": "Purpose\n\nHandles the UncheckedIOException thrown from java.nio.Files#find method when user lacks permission to bal files in the project.\n\nFixes #9303\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-02-06T11:54:58Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20895", "merged": true, "mergeCommit": {"oid": "5a08d3ecd621174aba27e8520d07554ec9b344b4"}, "closed": true, "closedAt": "2020-02-12T13:43:35Z", "author": {"login": "azinneera"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDI-w3gFqTM1NjM5OTg2NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDlWwgAFqTM1NzQwNzM4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2Mzk5ODY0", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20895#pullrequestreview-356399864", "createdAt": "2020-02-11T03:14:45Z", "commit": {"oid": "bb8c695dfacede30e003f4821b5ccd4a47a6868f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQwMzoxNDo0NVrOFn8isg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQwMzoxNDo0NVrOFn8isg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQzMDcwNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        if (e.getCause() instanceof AccessDeniedException) {\n          \n          \n            \n                     if (e.getCause() instanceof AccessDeniedException) {\n          \n          \n            \n                        throw new BLangCompilerException(\"permission denied for path \" + \n          \n          \n            \n                                                                 pkgPath.toString() + \", cause: \" + e.getMessage());\n          \n          \n            \n                    } else {\n          \n          \n            \n                        throw e;\n          \n          \n            \n                    }", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20895#discussion_r377430706", "createdAt": "2020-02-11T03:14:45Z", "author": {"login": "warunalakshitha"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/util/ProjectDirs.java", "diffHunk": "@@ -78,14 +80,23 @@ public static BLangCompilerException getPackageNotFoundError(String sourcePackag\n      * @param pkgPath package path\n      * @return true if source files exists else false\n      */\n-    public static boolean containsSourceFiles(Path pkgPath) {\n+    public static boolean containsSourceFiles(Path pkgPath) throws BLangCompilerException {\n         List<Path> sourceFiles = new ArrayList<>();\n         try {\n             sourceFiles = Files.find(pkgPath, Integer.MAX_VALUE, (path, attrs) ->\n                     path.toString().endsWith(ProjectDirConstants.BLANG_SOURCE_EXT)).collect(Collectors.toList());\n         } catch (IOException ignored) {\n             // Here we are trying to check if there are source files inside the package to be compiled. If an error\n             // occurs when trying to visit the files inside the package then we simply return the empty list created.\n+        } catch (UncheckedIOException e) {\n+            // Files#find returns an UncheckedIOException instead of an AccessDeniedException when there is a file to\n+            // which user doesnt have required permission.\n+            if (e.getCause() instanceof AccessDeniedException) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb8c695dfacede30e003f4821b5ccd4a47a6868f"}, "originalPosition": 25}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "20cfc24813d6f78f3509611bdc277fe15b201664", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/20cfc24813d6f78f3509611bdc277fe15b201664", "committedDate": "2020-02-12T05:38:42Z", "message": "Update compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/util/ProjectDirs.java\n\nCo-Authored-By: Waruna Lakshitha <warunalakshitha@users.noreply.github.com>"}, "afterCommit": {"oid": "055b8a6ef0277d1f8da8d1a56d91c8ff0cfadf21", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/055b8a6ef0277d1f8da8d1a56d91c8ff0cfadf21", "committedDate": "2020-02-12T06:07:38Z", "message": "Handle the exception thrown when user lacks permission to bal files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1aadbf72ba091e3008c92fad9f8ac85d1b5891c3", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1aadbf72ba091e3008c92fad9f8ac85d1b5891c3", "committedDate": "2020-02-12T07:14:21Z", "message": "Handle the exception thrown when user lacks permission to bal files"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "055b8a6ef0277d1f8da8d1a56d91c8ff0cfadf21", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/055b8a6ef0277d1f8da8d1a56d91c8ff0cfadf21", "committedDate": "2020-02-12T06:07:38Z", "message": "Handle the exception thrown when user lacks permission to bal files"}, "afterCommit": {"oid": "1aadbf72ba091e3008c92fad9f8ac85d1b5891c3", "author": {"user": {"login": "azinneera", "name": "Asma Jabir"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1aadbf72ba091e3008c92fad9f8ac85d1b5891c3", "committedDate": "2020-02-12T07:14:21Z", "message": "Handle the exception thrown when user lacks permission to bal files"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3NDA3Mzg1", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20895#pullrequestreview-357407385", "createdAt": "2020-02-12T12:19:12Z", "commit": {"oid": "1aadbf72ba091e3008c92fad9f8ac85d1b5891c3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4186, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}