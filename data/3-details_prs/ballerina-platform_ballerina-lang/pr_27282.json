{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMwNzI5ODI3", "number": 27282, "title": "Add parameters passed when logging to diagnostics", "bodyText": "Purpose\n\nDescribe the problems, issues, or needs driving this feature/fix and include links to related issues.\n\nFixes #27211\nFixes #24842\nApproach\n\nDescribe how you are implementing the solutions along with the design details.\n\nSamples\n\nProvide high-level details about the samples related to this feature.\n\nRemarks\n\nList any other known issues, related PRs, TODO items, or any other notes related to the PR.\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-12-02T04:06:38Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27282", "merged": true, "mergeCommit": {"oid": "a4abe606db6782280eaa01ada8e8743b346fb683"}, "closed": true, "closedAt": "2021-01-11T08:36:45Z", "author": {"login": "dulajdilshan"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdiG6TBABqjQwNjAzNzk4Mjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABduMU6JgFqTU2NDQ1NDYzNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "76190c3f17c03d620515ae814a8e020aaa1dec5d", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/76190c3f17c03d620515ae814a8e020aaa1dec5d", "committedDate": "2020-11-27T06:52:59Z", "message": "Add args in diagnostics to diagnostic-info"}, "afterCommit": {"oid": "02922e9316333de33960119daca420cfccb9fa31", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/02922e9316333de33960119daca420cfccb9fa31", "committedDate": "2020-12-02T04:33:05Z", "message": "Add new constructor to diagnostic-info"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyNDkyMDc0", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27282#pullrequestreview-542492074", "createdAt": "2020-12-02T04:34:29Z", "commit": {"oid": "76190c3f17c03d620515ae814a8e020aaa1dec5d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQwNDozNjoyM1rOH9KIAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMlQwNDo0MTo0NlrOH9KN4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg5MTA3Mg==", "bodyText": "Shouldn't this args part of the DiagnosticRelatedInformation?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27282#discussion_r533891072", "createdAt": "2020-12-02T04:36:23Z", "author": {"login": "rasika"}, "path": "compiler/ballerina-tools-api/src/main/java/io/ballerina/tools/diagnostics/DiagnosticInfo.java", "diffHunk": "@@ -32,21 +32,31 @@\n     private final String messageTemplate;\n     private final DiagnosticSeverity severity;\n     private final Collection<DiagnosticRelatedInformation> relatedInformation;\n+    private Object[] args;\n \n     public DiagnosticInfo(String code,\n                           String messageTemplate,\n                           DiagnosticSeverity severity) {\n-        this(code, messageTemplate, severity, Collections.emptyList());\n+        this(code, messageTemplate, severity, Collections.emptyList(), null);\n     }\n \n     public DiagnosticInfo(String code,\n                           String messageTemplate,\n                           DiagnosticSeverity severity,\n-                          Collection<DiagnosticRelatedInformation> relatedInformation) {\n+                          Object[] args) {\n+        this(code, messageTemplate, severity, Collections.emptyList(), args);\n+    }\n+\n+    public DiagnosticInfo(String code,\n+                          String messageTemplate,\n+                          DiagnosticSeverity severity,\n+                          Collection<DiagnosticRelatedInformation> relatedInformation,\n+                          Object[] args) {\n         this.code = code;\n         this.messageTemplate = messageTemplate;\n         this.severity = severity;\n         this.relatedInformation = relatedInformation;\n+        this.args = args;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "02922e9316333de33960119daca420cfccb9fa31"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzg5MjU3Nw==", "bodyText": "Args being Object api-consumer need to call instanceOf. Can't we have a specific thing for symbol-info where the type is Symbol", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27282#discussion_r533892577", "createdAt": "2020-12-02T04:41:46Z", "author": {"login": "rasika"}, "path": "compiler/ballerina-tools-api/src/main/java/io/ballerina/tools/diagnostics/DiagnosticInfo.java", "diffHunk": "@@ -64,4 +74,8 @@ public DiagnosticSeverity severity() {\n     public Collection<DiagnosticRelatedInformation> relatedInformation() {\n         return relatedInformation;\n     }\n+\n+    public Object[] getArgs() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "02922e9316333de33960119daca420cfccb9fa31"}, "originalPosition": 39}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "02922e9316333de33960119daca420cfccb9fa31", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/02922e9316333de33960119daca420cfccb9fa31", "committedDate": "2020-12-02T04:33:05Z", "message": "Add new constructor to diagnostic-info"}, "afterCommit": {"oid": "866b87f924f133dcde15f9c2af47f3b8e7a0df0b", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/866b87f924f133dcde15f9c2af47f3b8e7a0df0b", "committedDate": "2020-12-09T11:57:21Z", "message": "Add diagnostic-args to diagnostics"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "866b87f924f133dcde15f9c2af47f3b8e7a0df0b", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/866b87f924f133dcde15f9c2af47f3b8e7a0df0b", "committedDate": "2020-12-09T11:57:21Z", "message": "Add diagnostic-args to diagnostics"}, "afterCommit": {"oid": "4f7e884ca812fa8e8e4f4bc8a44db4d90d754e06", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4f7e884ca812fa8e8e4f4bc8a44db4d90d754e06", "committedDate": "2020-12-10T22:05:04Z", "message": "Replace some parameters with their symbolic value in dlog.error API usages in CodeAnalyzer"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4f7e884ca812fa8e8e4f4bc8a44db4d90d754e06", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4f7e884ca812fa8e8e4f4bc8a44db4d90d754e06", "committedDate": "2020-12-10T22:05:04Z", "message": "Replace some parameters with their symbolic value in dlog.error API usages in CodeAnalyzer"}, "afterCommit": {"oid": "35fba7e77f883e0919763ed5e26f411c2a7e1517", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/35fba7e77f883e0919763ed5e26f411c2a7e1517", "committedDate": "2020-12-10T22:40:10Z", "message": "Replace some parameters with their symbolic value in dlog.error API usages in CodeAnalyzer"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5Nzk3NDQ0", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27282#pullrequestreview-549797444", "createdAt": "2020-12-11T04:41:53Z", "commit": {"oid": "35fba7e77f883e0919763ed5e26f411c2a7e1517"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQwNDo0MTo1M1rOIDo36Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQwNDo0MTo1M1rOIDo36Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDY4NjMxMw==", "bodyText": "Shall we pass Collections.emptyList() to avoid possible NPEs and minimize null checks from the api-consumer side", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27282#discussion_r540686313", "createdAt": "2020-12-11T04:41:53Z", "author": {"login": "rasika"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/diagnostic/BLangDiagnostic.java", "diffHunk": "@@ -34,20 +37,20 @@\n     private String msg;\n     private DiagnosticInfo diagnosticInfo;\n     private DiagnosticCode diagnosticCode;\n+    private List<DiagnosticProperty> properties;\n \n-    public BLangDiagnostic(Location location, String msg, DiagnosticInfo diagnosticInfo) {\n-        this.location = location;\n-        this.msg = msg;\n-        this.diagnosticInfo = diagnosticInfo;\n-        this.diagnosticCode = null;\n+    public BLangDiagnostic(Location location, String msg, DiagnosticInfo diagnosticInfo,\n+                           DiagnosticCode diagnosticCode) {\n+        this(location, msg, diagnosticInfo, diagnosticCode, null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35fba7e77f883e0919763ed5e26f411c2a7e1517"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5ODg2NTQ4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27282#pullrequestreview-549886548", "createdAt": "2020-12-11T08:23:57Z", "commit": {"oid": "35fba7e77f883e0919763ed5e26f411c2a7e1517"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7114c42c732231fa1a1ab6353871a24a86d00042", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7114c42c732231fa1a1ab6353871a24a86d00042", "committedDate": "2020-12-11T19:03:15Z", "message": "Expose 'value()' API"}, "afterCommit": {"oid": "2a324ad09d5b767c929d2ea9a91c568394cedc4f", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2a324ad09d5b767c929d2ea9a91c568394cedc4f", "committedDate": "2021-01-08T13:22:07Z", "message": "Remove Property interfaces"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23bf2db2ff45ffaf7ed4bcae7141b8fd7421fa9a", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/23bf2db2ff45ffaf7ed4bcae7141b8fd7421fa9a", "committedDate": "2021-01-08T14:21:15Z", "message": "Add properties to diagnostics"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82449cfbfe4edea4303193d4a76c036fcc6f998a", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/82449cfbfe4edea4303193d4a76c036fcc6f998a", "committedDate": "2021-01-08T14:21:15Z", "message": "Change arguments to symbol in dlog.error in DataflowAnalyzer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ef71d4a08d65a32efe1bfba6d5275daeb6ba4aa", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8ef71d4a08d65a32efe1bfba6d5275daeb6ba4aa", "committedDate": "2021-01-08T14:21:15Z", "message": "Replace some parameters with their symbolic value in dlog.error API usages in CodeAnalyzer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "270e82767957e983ad17e197c48b060cb1480a89", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/270e82767957e983ad17e197c48b060cb1480a89", "committedDate": "2021-01-08T14:21:15Z", "message": "Pass Collections.emptyList() to avoid possible NPEs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dabaac52b743087e91071fb9c9a3f79504e15041", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/dabaac52b743087e91071fb9c9a3f79504e15041", "committedDate": "2021-01-08T14:21:16Z", "message": "Rename package with 'properties'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d46599dad64e6347ff9088d941b1730160c81a0", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0d46599dad64e6347ff9088d941b1730160c81a0", "committedDate": "2021-01-08T14:21:16Z", "message": "Expose 'value()' API"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a07ad985c587256f4aa5a77e2ad661dc42b597e", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9a07ad985c587256f4aa5a77e2ad661dc42b597e", "committedDate": "2021-01-08T14:21:16Z", "message": "Remove diagnostic-related-info from diagnostic-info"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ccf0f5829d8f4596dd274e1e3174dc41dad7a64", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5ccf0f5829d8f4596dd274e1e3174dc41dad7a64", "committedDate": "2021-01-08T14:21:16Z", "message": "Make attributes final"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09b4a3874c9c2e0826f6246791e6d5c7a115eda3", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/09b4a3874c9c2e0826f6246791e6d5c7a115eda3", "committedDate": "2021-01-08T14:21:16Z", "message": "Remove Property interfaces"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2a324ad09d5b767c929d2ea9a91c568394cedc4f", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2a324ad09d5b767c929d2ea9a91c568394cedc4f", "committedDate": "2021-01-08T13:22:07Z", "message": "Remove Property interfaces"}, "afterCommit": {"oid": "0be81b136981c70034a6a2ffe297a3b809a227e6", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0be81b136981c70034a6a2ffe297a3b809a227e6", "committedDate": "2021-01-08T14:21:16Z", "message": "Fix checkstyle issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffa37bc95888e04877af428c7d11fc72cc46f066", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ffa37bc95888e04877af428c7d11fc72cc46f066", "committedDate": "2021-01-08T15:55:15Z", "message": "Fix checkstyle issues"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0be81b136981c70034a6a2ffe297a3b809a227e6", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0be81b136981c70034a6a2ffe297a3b809a227e6", "committedDate": "2021-01-08T14:21:16Z", "message": "Fix checkstyle issues"}, "afterCommit": {"oid": "ffa37bc95888e04877af428c7d11fc72cc46f066", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ffa37bc95888e04877af428c7d11fc72cc46f066", "committedDate": "2021-01-08T15:55:15Z", "message": "Fix checkstyle issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8508ac645aded072a2ee0d39285f034968897875", "author": {"user": {"login": "dulajdilshan", "name": "Dulaj Dilshan"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8508ac645aded072a2ee0d39285f034968897875", "committedDate": "2021-01-08T16:05:47Z", "message": "fix missing javadoc @param <T>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY0NDU0NjM1", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27282#pullrequestreview-564454635", "createdAt": "2021-01-08T17:39:27Z", "commit": {"oid": "8508ac645aded072a2ee0d39285f034968897875"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4689, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}