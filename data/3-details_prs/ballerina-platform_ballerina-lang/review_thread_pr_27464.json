{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM2ODQ1OTM3", "number": 27464, "reviewThreads": {"totalCount": 27, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxNzoxMTozMVrOFFtN1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxNTozNjowOVrOFLwwbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxNTI4MDIxOnYy", "diffSide": "RIGHT", "path": "bvm/ballerina-runtime/src/main/java/io/ballerina/runtime/internal/types/BMemberFunctionType.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxNzoxMTozMVrOIGWYVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxNzoxMTozMVrOIGWYVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzUyOTA0Nw==", "bodyText": "Do we need a separate variable here?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r543529047", "createdAt": "2020-12-15T17:11:31Z", "author": {"login": "MaryamZi"}, "path": "bvm/ballerina-runtime/src/main/java/io/ballerina/runtime/internal/types/BMemberFunctionType.java", "diffHunk": "@@ -74,4 +74,9 @@ public ObjectType getParentObjectType() {\n     public FunctionType getType() {\n         return type;\n     }\n+\n+    public <T extends MemberFunctionType> MemberFunctionType duplicate() {\n+        MemberFunctionType t = new BMemberFunctionType(funcName, parentObjectType, type, flags);\n+        return t;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ab53e410a83d2bb8db059c54f2080165131d125"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxNTI4MzYyOnYy", "diffSide": "RIGHT", "path": "bvm/ballerina-runtime/src/main/java/io/ballerina/runtime/internal/types/BObjectType.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxNzoxMjoxNVrOIGWacQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwNTo1OTo0M1rOIHl9AQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzUyOTU4NQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public BObjectType duplicateTypeAndprocessObjectCtorAnnots(MapValue globalAnnotationMap, Strand strand) {\n          \n          \n            \n                public BObjectType duplicateTypeAndProcessObjectCtorAnnots(MapValue globalAnnotationMap, Strand strand) {", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r543529585", "createdAt": "2020-12-15T17:12:15Z", "author": {"login": "MaryamZi"}, "path": "bvm/ballerina-runtime/src/main/java/io/ballerina/runtime/internal/types/BObjectType.java", "diffHunk": "@@ -136,8 +137,30 @@ public void setTypeIdSet(BTypeIdSet typeIdSet) {\n         this.typeIdSet = typeIdSet;\n     }\n \n-    public void processObjectCtorAnnots(MapValue globalAnnotationMap, Strand strand) {\n-        AnnotationUtils.processObjectCtorAnnotations(globalAnnotationMap, this, strand);\n+    public BObjectType duplicateTypeAndprocessObjectCtorAnnots(MapValue globalAnnotationMap, Strand strand) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ab53e410a83d2bb8db059c54f2080165131d125"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzUzMDU4Mw==", "bodyText": "Does this method belong here? Wouldn't it be better to have this in AnnotationUtils?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r543530583", "createdAt": "2020-12-15T17:13:30Z", "author": {"login": "MaryamZi"}, "path": "bvm/ballerina-runtime/src/main/java/io/ballerina/runtime/internal/types/BObjectType.java", "diffHunk": "@@ -136,8 +137,30 @@ public void setTypeIdSet(BTypeIdSet typeIdSet) {\n         this.typeIdSet = typeIdSet;\n     }\n \n-    public void processObjectCtorAnnots(MapValue globalAnnotationMap, Strand strand) {\n-        AnnotationUtils.processObjectCtorAnnotations(globalAnnotationMap, this, strand);\n+    public BObjectType duplicateTypeAndprocessObjectCtorAnnots(MapValue globalAnnotationMap, Strand strand) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzUyOTU4NQ=="}, "originalCommit": {"oid": "4ab53e410a83d2bb8db059c54f2080165131d125"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDI0NzI4NQ==", "bodyText": "Please elaborate why you think this doesn't belong here.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r544247285", "createdAt": "2020-12-16T12:09:15Z", "author": {"login": "rdhananjaya"}, "path": "bvm/ballerina-runtime/src/main/java/io/ballerina/runtime/internal/types/BObjectType.java", "diffHunk": "@@ -136,8 +137,30 @@ public void setTypeIdSet(BTypeIdSet typeIdSet) {\n         this.typeIdSet = typeIdSet;\n     }\n \n-    public void processObjectCtorAnnots(MapValue globalAnnotationMap, Strand strand) {\n-        AnnotationUtils.processObjectCtorAnnotations(globalAnnotationMap, this, strand);\n+    public BObjectType duplicateTypeAndprocessObjectCtorAnnots(MapValue globalAnnotationMap, Strand strand) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzUyOTU4NQ=="}, "originalCommit": {"oid": "4ab53e410a83d2bb8db059c54f2080165131d125"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDMxODg0Ng==", "bodyText": "IMO, even though annotations are part of the type, this duplication and reprocessing the annotations is an approach we're adopting to address a particular scenario.\nI believe the BObjectType does not have to know about processing annotations, instead we can address this via AnnotationUtils which handles all of the annotation processing and setting it to the types - i.e., AnnotationUtils calls duplicate() on the BObjectType and sets the annotations to the new type. The only exception to this seems to be io.ballerina.runtime.internal.types.BObjectType#processObjectCtorAnnots which I think could also happen via AnnotationUtils.\nI think the eventual approach to this should be to codegen the creation of a new BObjectType for each new (service) object constructor, and let the annotation processing happen as for a class/normal object via AnnotationUtils.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r544318846", "createdAt": "2020-12-16T13:58:41Z", "author": {"login": "MaryamZi"}, "path": "bvm/ballerina-runtime/src/main/java/io/ballerina/runtime/internal/types/BObjectType.java", "diffHunk": "@@ -136,8 +137,30 @@ public void setTypeIdSet(BTypeIdSet typeIdSet) {\n         this.typeIdSet = typeIdSet;\n     }\n \n-    public void processObjectCtorAnnots(MapValue globalAnnotationMap, Strand strand) {\n-        AnnotationUtils.processObjectCtorAnnotations(globalAnnotationMap, this, strand);\n+    public BObjectType duplicateTypeAndprocessObjectCtorAnnots(MapValue globalAnnotationMap, Strand strand) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzUyOTU4NQ=="}, "originalCommit": {"oid": "4ab53e410a83d2bb8db059c54f2080165131d125"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDgzMjc2OQ==", "bodyText": "Refactored this and code-gen so to directly call duplicate() and then process annot on that duplicated type. Please check.\nIIRC I moved this method to BObjectType from BServiceType class since we need to do this duplication stuff for object constructor as well. Agreed with your reasoning.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r544832769", "createdAt": "2020-12-17T05:59:43Z", "author": {"login": "rdhananjaya"}, "path": "bvm/ballerina-runtime/src/main/java/io/ballerina/runtime/internal/types/BObjectType.java", "diffHunk": "@@ -136,8 +137,30 @@ public void setTypeIdSet(BTypeIdSet typeIdSet) {\n         this.typeIdSet = typeIdSet;\n     }\n \n-    public void processObjectCtorAnnots(MapValue globalAnnotationMap, Strand strand) {\n-        AnnotationUtils.processObjectCtorAnnotations(globalAnnotationMap, this, strand);\n+    public BObjectType duplicateTypeAndprocessObjectCtorAnnots(MapValue globalAnnotationMap, Strand strand) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzUyOTU4NQ=="}, "originalCommit": {"oid": "4ab53e410a83d2bb8db059c54f2080165131d125"}, "originalPosition": 55}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxNTMwNzkwOnYy", "diffSide": "RIGHT", "path": "bvm/ballerina-runtime/src/main/java/io/ballerina/runtime/internal/types/BObjectType.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNVQxNzoxNzowN1rOIGWpBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxMjoxMToxMVrOIHCSvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzUzMzMxNw==", "bodyText": "Doesn't cloneThis and duplicate do pretty much the same thing? Shouldn't we use one of the two as the name?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r543533317", "createdAt": "2020-12-15T17:17:07Z", "author": {"login": "MaryamZi"}, "path": "bvm/ballerina-runtime/src/main/java/io/ballerina/runtime/internal/types/BObjectType.java", "diffHunk": "@@ -136,8 +137,30 @@ public void setTypeIdSet(BTypeIdSet typeIdSet) {\n         this.typeIdSet = typeIdSet;\n     }\n \n-    public void processObjectCtorAnnots(MapValue globalAnnotationMap, Strand strand) {\n-        AnnotationUtils.processObjectCtorAnnotations(globalAnnotationMap, this, strand);\n+    public BObjectType duplicateTypeAndprocessObjectCtorAnnots(MapValue globalAnnotationMap, Strand strand) {\n+        BObjectType clone = cloneThis();\n+        AnnotationUtils.processObjectCtorAnnotations(globalAnnotationMap, clone, strand);\n+        return clone;\n+    }\n+\n+    BObjectType cloneThis() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ab53e410a83d2bb8db059c54f2080165131d125"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDI0ODUwOA==", "bodyText": "Will change this to duplicate,  this function and the duplicate function from function type have nothing common, just that they both duplicate their respective objects.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r544248508", "createdAt": "2020-12-16T12:11:11Z", "author": {"login": "rdhananjaya"}, "path": "bvm/ballerina-runtime/src/main/java/io/ballerina/runtime/internal/types/BObjectType.java", "diffHunk": "@@ -136,8 +137,30 @@ public void setTypeIdSet(BTypeIdSet typeIdSet) {\n         this.typeIdSet = typeIdSet;\n     }\n \n-    public void processObjectCtorAnnots(MapValue globalAnnotationMap, Strand strand) {\n-        AnnotationUtils.processObjectCtorAnnotations(globalAnnotationMap, this, strand);\n+    public BObjectType duplicateTypeAndprocessObjectCtorAnnots(MapValue globalAnnotationMap, Strand strand) {\n+        BObjectType clone = cloneThis();\n+        AnnotationUtils.processObjectCtorAnnotations(globalAnnotationMap, clone, strand);\n+        return clone;\n+    }\n+\n+    BObjectType cloneThis() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzUzMzMxNw=="}, "originalCommit": {"oid": "4ab53e410a83d2bb8db059c54f2080165131d125"}, "originalPosition": 61}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyMDQyOTQ3OnYy", "diffSide": "RIGHT", "path": "bvm/ballerina-runtime/src/main/java/io/ballerina/runtime/internal/types/BObjectType.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxMzo0MDo0N1rOIHFzBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxMzo0MDo0N1rOIHFzBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDMwNTkyNw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public BObjectType duplicateTypeAndprocessAnnots(MapValue globalAnnotationMap, Strand strand) {\n          \n          \n            \n                public BObjectType duplicateTypeAndProcessAnnots(MapValue globalAnnotationMap, Strand strand) {", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r544305927", "createdAt": "2020-12-16T13:40:47Z", "author": {"login": "MaryamZi"}, "path": "bvm/ballerina-runtime/src/main/java/io/ballerina/runtime/internal/types/BObjectType.java", "diffHunk": "@@ -136,8 +137,30 @@ public void setTypeIdSet(BTypeIdSet typeIdSet) {\n         this.typeIdSet = typeIdSet;\n     }\n \n-    public void processObjectCtorAnnots(MapValue globalAnnotationMap, Strand strand) {\n-        AnnotationUtils.processObjectCtorAnnotations(globalAnnotationMap, this, strand);\n+    public BObjectType duplicateTypeAndprocessAnnots(MapValue globalAnnotationMap, Strand strand) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b23b306204864038e84dcbbc5f9b5612df756633"}, "originalPosition": 55}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzNTA2MDAyOnYy", "diffSide": "RIGHT", "path": "bvm/ballerina-core/src/main/java/org/ballerinalang/core/model/types/BStructureType.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMFQxODoyMToxM1rOIJGTiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxNjowNToxMFrOIJdb3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjQxMTQwMA==", "bodyText": "Shall we rename the parameter too?\nAlso, should we rename the methods to xxxMemberMethodTypes instead of xxxMemberFunctionTypes?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r546411400", "createdAt": "2020-12-20T18:21:13Z", "author": {"login": "MaryamZi"}, "path": "bvm/ballerina-core/src/main/java/org/ballerinalang/core/model/types/BStructureType.java", "diffHunk": "@@ -64,11 +64,11 @@ public void setFieldTypeCount(int[] fieldCount) {\n         this.fieldTypeCount = fieldCount;\n     }\n \n-    public BAttachedFunction[] getAttachedFunctions() {\n+    public BAttachedFunction[] getMemberFunctionTypes() {\n         return attachedFunctions;\n     }\n \n-    public void setAttachedFunctions(BAttachedFunction[] attachedFunctions) {\n+    public void setMemberFunctionTypes(BAttachedFunction[] attachedFunctions) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d22b7abcc63c4c1ae8cb6b78f585282ed2ad3480"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY3NTQ4Mg==", "bodyText": "I think this should be something like setMethodTypes @MaryamZi @hasithaa WDY think about that name?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r546675482", "createdAt": "2020-12-21T12:19:41Z", "author": {"login": "rdhananjaya"}, "path": "bvm/ballerina-core/src/main/java/org/ballerinalang/core/model/types/BStructureType.java", "diffHunk": "@@ -64,11 +64,11 @@ public void setFieldTypeCount(int[] fieldCount) {\n         this.fieldTypeCount = fieldCount;\n     }\n \n-    public BAttachedFunction[] getAttachedFunctions() {\n+    public BAttachedFunction[] getMemberFunctionTypes() {\n         return attachedFunctions;\n     }\n \n-    public void setAttachedFunctions(BAttachedFunction[] attachedFunctions) {\n+    public void setMemberFunctionTypes(BAttachedFunction[] attachedFunctions) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjQxMTQwMA=="}, "originalCommit": {"oid": "d22b7abcc63c4c1ae8cb6b78f585282ed2ad3480"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njc5MDM2Ng==", "bodyText": "+1", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r546790366", "createdAt": "2020-12-21T16:05:10Z", "author": {"login": "MaryamZi"}, "path": "bvm/ballerina-core/src/main/java/org/ballerinalang/core/model/types/BStructureType.java", "diffHunk": "@@ -64,11 +64,11 @@ public void setFieldTypeCount(int[] fieldCount) {\n         this.fieldTypeCount = fieldCount;\n     }\n \n-    public BAttachedFunction[] getAttachedFunctions() {\n+    public BAttachedFunction[] getMemberFunctionTypes() {\n         return attachedFunctions;\n     }\n \n-    public void setAttachedFunctions(BAttachedFunction[] attachedFunctions) {\n+    public void setMemberFunctionTypes(BAttachedFunction[] attachedFunctions) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjQxMTQwMA=="}, "originalCommit": {"oid": "d22b7abcc63c4c1ae8cb6b78f585282ed2ad3480"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzNTA2NjYwOnYy", "diffSide": "RIGHT", "path": "tests/jballerina-unit-test/src/test/java/org/ballerinalang/nativeimpl/jvm/servicetests/ServiceValue.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMFQxODoyODoyN1rOIJGWgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMFQxOTo0MDoyOFrOIJG4Eg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjQxMjE2MQ==", "bodyText": "Is the name correct here? The annotation may not be a map, right?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r546412161", "createdAt": "2020-12-20T18:28:27Z", "author": {"login": "MaryamZi"}, "path": "tests/jballerina-unit-test/src/test/java/org/ballerinalang/nativeimpl/jvm/servicetests/ServiceValue.java", "diffHunk": "@@ -165,4 +176,15 @@ public static BArray getServicePath() {\n     public static BMap getAnnotationsAtServiceAttach() {\n         return ServiceValue.annotationMap;\n     }\n+\n+    public static BValue getAnnotMap(BObject service, BString method, ArrayValue path, BString annotName) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d22b7abcc63c4c1ae8cb6b78f585282ed2ad3480"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjQxMzM5MA==", "bodyText": "This method seems to be used only in tests? I'm not sure if we should be introducing a method just for tests. Can't we extract this information using getResourceAnnotation?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r546413390", "createdAt": "2020-12-20T18:40:24Z", "author": {"login": "MaryamZi"}, "path": "tests/jballerina-unit-test/src/test/java/org/ballerinalang/nativeimpl/jvm/servicetests/ServiceValue.java", "diffHunk": "@@ -165,4 +176,15 @@ public static BArray getServicePath() {\n     public static BMap getAnnotationsAtServiceAttach() {\n         return ServiceValue.annotationMap;\n     }\n+\n+    public static BValue getAnnotMap(BObject service, BString method, ArrayValue path, BString annotName) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjQxMjE2MQ=="}, "originalCommit": {"oid": "d22b7abcc63c4c1ae8cb6b78f585282ed2ad3480"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjQyMDc1NA==", "bodyText": "Missed that this was a test class, my bad. Shall we rename the method though?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r546420754", "createdAt": "2020-12-20T19:40:28Z", "author": {"login": "MaryamZi"}, "path": "tests/jballerina-unit-test/src/test/java/org/ballerinalang/nativeimpl/jvm/servicetests/ServiceValue.java", "diffHunk": "@@ -165,4 +176,15 @@ public static BArray getServicePath() {\n     public static BMap getAnnotationsAtServiceAttach() {\n         return ServiceValue.annotationMap;\n     }\n+\n+    public static BValue getAnnotMap(BObject service, BString method, ArrayValue path, BString annotName) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjQxMjE2MQ=="}, "originalCommit": {"oid": "d22b7abcc63c4c1ae8cb6b78f585282ed2ad3480"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3MjI0NTExOnYy", "diffSide": "RIGHT", "path": "bvm/ballerina-core/src/main/java/org/ballerinalang/core/model/types/BStructureType.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNDoyMDo1N1rOIOJnwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNDoyMDo1N1rOIOJnwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTcwODYwOQ==", "bodyText": "Should we rename these as getMethods and setMethods similar to the runtime ObjectType or rename them to getMethodTypes and setMethodTypes, for consistency?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r551708609", "createdAt": "2021-01-05T04:20:57Z", "author": {"login": "MaryamZi"}, "path": "bvm/ballerina-core/src/main/java/org/ballerinalang/core/model/types/BStructureType.java", "diffHunk": "@@ -64,12 +64,12 @@ public void setFieldTypeCount(int[] fieldCount) {\n         this.fieldTypeCount = fieldCount;\n     }\n \n-    public BAttachedFunction[] getAttachedFunctions() {\n+    public BAttachedFunction[] getMethodTypes() {\n         return attachedFunctions;\n     }\n \n-    public void setAttachedFunctions(BAttachedFunction[] attachedFunctions) {\n-        this.attachedFunctions = attachedFunctions;\n+    public void setMethodTypes(BAttachedFunction[] methodTypes) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "425eb75d279efdd9ddf56ee0a50cd7eff9d0fda1"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3MjI1NjEwOnYy", "diffSide": "RIGHT", "path": "bvm/ballerina-runtime/src/main/java/io/ballerina/runtime/api/types/ServiceType.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNDoyODoxM1rOIOJt9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNDoyODoxM1rOIOJt9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTcxMDE5OA==", "bodyText": "Should the return type here be RemoteMethodType[]?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r551710198", "createdAt": "2021-01-05T04:28:13Z", "author": {"login": "MaryamZi"}, "path": "bvm/ballerina-runtime/src/main/java/io/ballerina/runtime/api/types/ServiceType.java", "diffHunk": "@@ -23,7 +23,7 @@\n  */\n public interface ServiceType extends ObjectType {\n \n-    MemberFunctionType[] getRemoteFunctions();\n+    MethodType[] getRemoteMethods();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "425eb75d279efdd9ddf56ee0a50cd7eff9d0fda1"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3MjI5MTY3OnYy", "diffSide": "RIGHT", "path": "compiler/ballerina-lang/src/main/resources/compiler.properties", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNDo1MToxM1rOIOKCVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNDo1MToxM1rOIOKCVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTcxNTQxNQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              only int, string, float, boolean, decimal types are supported as path params, found ''{0}''\n          \n          \n            \n              only ''int'', ''string'', ''float'', ''boolean'', and ''decimal'' types are supported as path parameters, found ''{0}''", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r551715415", "createdAt": "2021-01-05T04:51:13Z", "author": {"login": "MaryamZi"}, "path": "compiler/ballerina-lang/src/main/resources/compiler.properties", "diffHunk": "@@ -752,10 +752,10 @@ error.remote.function.in.non.network.object=\\\n   remote qualifier only allowed in client and service objects\n \n error.unsupported.path.param.type=\\\n-  only int, string, float, boolean types are supported as path params, found ''{0}''\n+  only int, string, float, boolean, decimal types are supported as path params, found ''{0}''", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "425eb75d279efdd9ddf56ee0a50cd7eff9d0fda1"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3MjI5MjM1OnYy", "diffSide": "RIGHT", "path": "compiler/ballerina-lang/src/main/resources/compiler.properties", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNDo1MTo0MFrOIOKCwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNDo1MTo0MFrOIOKCwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTcxNTUyMg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              only int, string, float, boolean, decimal types are supported as rest path param, found ''{0}''\n          \n          \n            \n              only ''int'', ''string'', ''float'', ''boolean'', and ''decimal'' types are supported as rest path parameter, found ''{0}''", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r551715522", "createdAt": "2021-01-05T04:51:40Z", "author": {"login": "MaryamZi"}, "path": "compiler/ballerina-lang/src/main/resources/compiler.properties", "diffHunk": "@@ -752,10 +752,10 @@ error.remote.function.in.non.network.object=\\\n   remote qualifier only allowed in client and service objects\n \n error.unsupported.path.param.type=\\\n-  only int, string, float, boolean types are supported as path params, found ''{0}''\n+  only int, string, float, boolean, decimal types are supported as path params, found ''{0}''\n \n error.unsupported.rest.path.param.type=\\\n-  only int, string, float, boolean types are supported as rest path param, found ''{0}''\n+  only int, string, float, boolean, decimal types are supported as rest path param, found ''{0}''", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "425eb75d279efdd9ddf56ee0a50cd7eff9d0fda1"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3MjMwNTU4OnYy", "diffSide": "RIGHT", "path": "stdlib/http/src/main/java/org/ballerinalang/net/http/HttpService.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNDo1OTo0NlrOIOKKSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNToyMDo1NlrOIOKdrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTcxNzQ1MA==", "bodyText": "Shouldn't this be calling the getter? These probably don't run right, or would have failed?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r551717450", "createdAt": "2021-01-05T04:59:46Z", "author": {"login": "MaryamZi"}, "path": "stdlib/http/src/main/java/org/ballerinalang/net/http/HttpService.java", "diffHunk": "@@ -258,7 +258,7 @@ public void setUpgradeToWebSocketResources(\n     private static void processResources(HttpService httpService) {\n         List<HttpResource> httpResources = new ArrayList<>();\n         List<HttpResource> upgradeToWebSocketResources = new ArrayList<>();\n-        for (AttachedFunctionType resource : httpService.getBalService().getType().getAttachedFunctions()) {\n+        for (AttachedFunctionType resource : httpService.getBalService().getType().setMethodTypes()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "425eb75d279efdd9ddf56ee0a50cd7eff9d0fda1"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTcyMjQxNQ==", "bodyText": "No these are leftover stuff. Will fix this", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r551722415", "createdAt": "2021-01-05T05:20:56Z", "author": {"login": "rdhananjaya"}, "path": "stdlib/http/src/main/java/org/ballerinalang/net/http/HttpService.java", "diffHunk": "@@ -258,7 +258,7 @@ public void setUpgradeToWebSocketResources(\n     private static void processResources(HttpService httpService) {\n         List<HttpResource> httpResources = new ArrayList<>();\n         List<HttpResource> upgradeToWebSocketResources = new ArrayList<>();\n-        for (AttachedFunctionType resource : httpService.getBalService().getType().getAttachedFunctions()) {\n+        for (AttachedFunctionType resource : httpService.getBalService().getType().setMethodTypes()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTcxNzQ1MA=="}, "originalCommit": {"oid": "425eb75d279efdd9ddf56ee0a50cd7eff9d0fda1"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3MjMwNjAwOnYy", "diffSide": "RIGHT", "path": "stdlib/http/src/main/java/org/ballerinalang/net/http/serviceendpoint/Detach.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNTowMDoxMFrOIOKKlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNTowMDoxMFrOIOKKlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTcxNzUyNg==", "bodyText": "Getter?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r551717526", "createdAt": "2021-01-05T05:00:10Z", "author": {"login": "MaryamZi"}, "path": "stdlib/http/src/main/java/org/ballerinalang/net/http/serviceendpoint/Detach.java", "diffHunk": "@@ -38,7 +38,7 @@ public static Object detach(BObject serviceEndpoint, BObject serviceObj) {\n         HTTPServicesRegistry httpServicesRegistry = getHttpServicesRegistry(serviceEndpoint);\n         WebSocketServicesRegistry webSocketServicesRegistry = getWebSocketServicesRegistry(serviceEndpoint);\n         Type param;\n-        AttachedFunctionType[] resourceList = serviceObj.getType().getAttachedFunctions();\n+        AttachedFunctionType[] resourceList = serviceObj.getType().setMethodTypes();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "425eb75d279efdd9ddf56ee0a50cd7eff9d0fda1"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3MjMwNjA1OnYy", "diffSide": "RIGHT", "path": "stdlib/http/src/main/java/org/ballerinalang/net/http/serviceendpoint/Register.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNTowMDoxNVrOIOKKpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNTowMDoxNVrOIOKKpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTcxNzU0MA==", "bodyText": "Getter?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r551717540", "createdAt": "2021-01-05T05:00:15Z", "author": {"login": "MaryamZi"}, "path": "stdlib/http/src/main/java/org/ballerinalang/net/http/serviceendpoint/Register.java", "diffHunk": "@@ -45,7 +45,7 @@ public static Object register(BalEnv env, BObject serviceEndpoint, BObject servi\n         httpServicesRegistry.setRuntime(env.getRuntime());\n \n         Type param;\n-        AttachedFunctionType[] resourceList = service.getType().getAttachedFunctions();\n+        AttachedFunctionType[] resourceList = service.getType().setMethodTypes();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "425eb75d279efdd9ddf56ee0a50cd7eff9d0fda1"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3MjMwNjI4OnYy", "diffSide": "RIGHT", "path": "stdlib/http/src/main/java/org/ballerinalang/net/http/websocket/WebSocketService.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNTowMDoxOVrOIOKKwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNTowMDoxOVrOIOKKwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTcxNzU2OA==", "bodyText": "Getter?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r551717568", "createdAt": "2021-01-05T05:00:19Z", "author": {"login": "MaryamZi"}, "path": "stdlib/http/src/main/java/org/ballerinalang/net/http/websocket/WebSocketService.java", "diffHunk": "@@ -46,7 +46,7 @@ public WebSocketService(BObject service, BRuntime runtime) {\n     }\n \n     private void populateResourcesMap(BObject service) {\n-        for (AttachedFunctionType resource : service.getType().getAttachedFunctions()) {\n+        for (AttachedFunctionType resource : service.getType().setMethodTypes()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "425eb75d279efdd9ddf56ee0a50cd7eff9d0fda1"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3MjMwNjM2OnYy", "diffSide": "RIGHT", "path": "stdlib/http/src/main/java/org/ballerinalang/net/http/websocket/WebSocketUtil.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNTowMDoyNVrOIOKKzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNTowMDoyNVrOIOKKzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTcxNzU4MQ==", "bodyText": "Getter?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r551717581", "createdAt": "2021-01-05T05:00:25Z", "author": {"login": "MaryamZi"}, "path": "stdlib/http/src/main/java/org/ballerinalang/net/http/websocket/WebSocketUtil.java", "diffHunk": "@@ -550,7 +550,7 @@ public static WebSocketService validateAndCreateWebSocketService(BRuntime runtim\n                                                                      BMap<BString, Object> clientEndpointConfig) {\n         Object clientService = clientEndpointConfig.get(WebSocketConstants.CLIENT_SERVICE_CONFIG);\n         if (clientService != null) {\n-            Type param = ((BObject) clientService).getType().getAttachedFunctions()[0].getParameterType()[0];\n+            Type param = ((BObject) clientService).getType().setMethodTypes()[0].getParameterType()[0];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "425eb75d279efdd9ddf56ee0a50cd7eff9d0fda1"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3MjMwNjQ4OnYy", "diffSide": "RIGHT", "path": "stdlib/reflect/src/main/java/org/ballerinalang/stdlib/reflect/AnnotationUtils.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNTowMDozMlrOIOKK3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNTowMDozMlrOIOKK3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTcxNzU5Ng==", "bodyText": "Getter?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r551717596", "createdAt": "2021-01-05T05:00:32Z", "author": {"login": "MaryamZi"}, "path": "stdlib/reflect/src/main/java/org/ballerinalang/stdlib/reflect/AnnotationUtils.java", "diffHunk": "@@ -39,9 +39,9 @@\n      * @return annotation value object.\n      */\n     public static Object externGetResourceAnnotations(BObject service, BString resourceName, BString annot) {\n-        MemberFunctionType[] functions = service.getType().getAttachedFunctions();\n+        MethodTypes[] functions = service.getType().setMethodTypes();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "425eb75d279efdd9ddf56ee0a50cd7eff9d0fda1"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3MjMwNjcxOnYy", "diffSide": "RIGHT", "path": "stdlib/task/src/main/java/org/ballerinalang/stdlib/task/objects/ServiceInformation.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNTowMDo0MVrOIOKK_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNTowMDo0MVrOIOKK_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTcxNzYzMQ==", "bodyText": "Getter?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r551717631", "createdAt": "2021-01-05T05:00:41Z", "author": {"login": "MaryamZi"}, "path": "stdlib/task/src/main/java/org/ballerinalang/stdlib/task/objects/ServiceInformation.java", "diffHunk": "@@ -48,8 +48,8 @@ public String getServiceName() {\n         return this.service.getType().getName().split(\"\\\\$\\\\$\")[0];\n     }\n \n-    public MemberFunctionType getOnTriggerFunction() {\n-        for (MemberFunctionType resource : service.getType().getAttachedFunctions()) {\n+    public MethodTypes getOnTriggerFunction() {\n+        for (MethodTypes resource : service.getType().setMethodTypes()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "425eb75d279efdd9ddf56ee0a50cd7eff9d0fda1"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3MjMwNjg5OnYy", "diffSide": "RIGHT", "path": "stdlib/task/src/main/java/org/ballerinalang/stdlib/task/utils/Utils.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNTowMDo1M1rOIOKLJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNTowMDo1M1rOIOKLJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTcxNzY2OQ==", "bodyText": "Getter?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r551717669", "createdAt": "2021-01-05T05:00:53Z", "author": {"login": "MaryamZi"}, "path": "stdlib/task/src/main/java/org/ballerinalang/stdlib/task/utils/Utils.java", "diffHunk": "@@ -114,13 +114,13 @@ private static String getStringFieldValue(BMap<BString, Object> record, BString\n      *       Issue: https://github.com/ballerina-platform/ballerina-lang/issues/14148\n      */\n     public static void validateService(ServiceInformation serviceInformation) throws SchedulingException {\n-        MemberFunctionType[] resources = serviceInformation.getService().getType().getAttachedFunctions();\n+        MethodTypes[] resources = serviceInformation.getService().getType().setMethodTypes();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "425eb75d279efdd9ddf56ee0a50cd7eff9d0fda1"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3MjMwNzc1OnYy", "diffSide": "RIGHT", "path": "tests/jballerina-unit-test/src/test/java/org/ballerinalang/nativeimpl/jvm/servicetests/ServiceValue.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNTowMToyM1rOIOKLnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNTowMToyM1rOIOKLnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTcxNzc4OQ==", "bodyText": "Shall we rename the variable?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r551717789", "createdAt": "2021-01-05T05:01:23Z", "author": {"login": "MaryamZi"}, "path": "tests/jballerina-unit-test/src/test/java/org/ballerinalang/nativeimpl/jvm/servicetests/ServiceValue.java", "diffHunk": "@@ -148,15 +148,26 @@ public static BObject getService() {\n         return ServiceValue.service;\n     }\n \n-    public static BValue getResourceAnnotation(BString resourceName, BString annotName) {\n-        for (var r : ((ServiceType) ServiceValue.service.getType()).getResourceFunctions()) {\n-            if (r.getName().equals(resourceName.getValue())) {\n+    public static BValue getResourceAnnotation(BString methodName, ArrayValue path, BString annotName) {\n+        String funcName = generateMethodName(methodName, path);\n+\n+        for (var r : ((ServiceType) ServiceValue.service.getType()).getResourceMethods()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "425eb75d279efdd9ddf56ee0a50cd7eff9d0fda1"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3MjMwODExOnYy", "diffSide": "RIGHT", "path": "tests/jballerina-unit-test/src/test/java/org/ballerinalang/nativeimpl/jvm/servicetests/ServiceValue.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNTowMTozOVrOIOKL0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNTowMTozOVrOIOKL0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTcxNzg0Mg==", "bodyText": "Shall we rename the variable?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r551717842", "createdAt": "2021-01-05T05:01:39Z", "author": {"login": "MaryamZi"}, "path": "tests/jballerina-unit-test/src/test/java/org/ballerinalang/nativeimpl/jvm/servicetests/ServiceValue.java", "diffHunk": "@@ -165,4 +176,16 @@ public static BArray getServicePath() {\n     public static BMap getAnnotationsAtServiceAttach() {\n         return ServiceValue.annotationMap;\n     }\n+\n+    public static BValue getResourceMethodAnnotations(BObject service, BString method, ArrayValue resourcePath,\n+                                                      BString annotName) {\n+        String methodName = generateMethodName(method, resourcePath);\n+\n+        for (var r : ((ServiceType) service.getType()).getResourceMethods()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "425eb75d279efdd9ddf56ee0a50cd7eff9d0fda1"}, "originalPosition": 57}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3MjMyMDU3OnYy", "diffSide": "RIGHT", "path": "tests/jballerina-unit-test/src/test/resources/test-src/services/service_decl.bal", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNTowOTozNFrOIOKTHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwNTowOTozNFrOIOKTHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTcxOTcwOQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            return { output: \"Hello\" };\n          \n          \n            \n                            return {output: \"Hello\"};", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r551719709", "createdAt": "2021-01-05T05:09:34Z", "author": {"login": "MaryamZi"}, "path": "tests/jballerina-unit-test/src/test/resources/test-src/services/service_decl.bal", "diffHunk": "@@ -109,6 +118,24 @@ service S / on lsn {\n     function createError() returns @tainted error? {\n         return ();\n     }\n+\n+    resource function get foo() returns service object {} {\n+        return service object {\n+            resource function get foo() returns string {\n+                return \"foo/foo\";\n+            }\n+        };\n+    }\n+}\n+\n+int i = 0;\n+function returnServiceObj() returns service object {} {\n+    i = i + 1;\n+    return service object {\n+        @RAnnot { val: \"anot-val: \" + i.toString() }  resource function get processRequest() returns json {\n+                return { output: \"Hello\" };", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "425eb75d279efdd9ddf56ee0a50cd7eff9d0fda1"}, "originalPosition": 55}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3ODMxNjE3OnYy", "diffSide": "RIGHT", "path": "bvm/ballerina-core/src/main/java/org/ballerinalang/core/model/types/BStructureType.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxNDowOTo0NlrOIPC1Mw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxNDoyMjoyOFrOIPDhwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjY0NTkzOQ==", "bodyText": "Shouldn't we change the method name?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r552645939", "createdAt": "2021-01-06T14:09:46Z", "author": {"login": "MaryamZi"}, "path": "bvm/ballerina-core/src/main/java/org/ballerinalang/core/model/types/BStructureType.java", "diffHunk": "@@ -68,8 +68,8 @@ public void setFieldTypeCount(int[] fieldCount) {\n         return attachedFunctions;\n     }\n \n-    public void setAttachedFunctions(BAttachedFunction[] attachedFunctions) {\n-        this.attachedFunctions = attachedFunctions;\n+    public void setAttachedFunctions(BAttachedFunction[] methodTypes) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1319c9c415b8c17f60e993b8863833f7a8ee66ea"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjY1NzM0Ng==", "bodyText": "This is a mistake. Let me reset this.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r552657346", "createdAt": "2021-01-06T14:22:28Z", "author": {"login": "rdhananjaya"}, "path": "bvm/ballerina-core/src/main/java/org/ballerinalang/core/model/types/BStructureType.java", "diffHunk": "@@ -68,8 +68,8 @@ public void setFieldTypeCount(int[] fieldCount) {\n         return attachedFunctions;\n     }\n \n-    public void setAttachedFunctions(BAttachedFunction[] attachedFunctions) {\n-        this.attachedFunctions = attachedFunctions;\n+    public void setAttachedFunctions(BAttachedFunction[] methodTypes) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjY0NTkzOQ=="}, "originalCommit": {"oid": "1319c9c415b8c17f60e993b8863833f7a8ee66ea"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3ODMyMjkzOnYy", "diffSide": "RIGHT", "path": "bvm/ballerina-runtime/src/main/java/io/ballerina/runtime/internal/types/BServiceType.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxNDoxMDo1MFrOIPC55A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxNDoxMDo1MFrOIPC55A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjY0NzE0MA==", "bodyText": "Shouldn't this be setResourceMethods?\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public void setResourceFunctions(ResourceMethodType[] resourceFunctions) {\n          \n          \n            \n                public void setResourceMethods(ResourceMethodType[] resourceMethods) {", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r552647140", "createdAt": "2021-01-06T14:10:50Z", "author": {"login": "MaryamZi"}, "path": "bvm/ballerina-runtime/src/main/java/io/ballerina/runtime/internal/types/BServiceType.java", "diffHunk": "@@ -32,14 +33,14 @@\n  */\n public class BServiceType extends BObjectType implements ServiceType {\n \n-    private ResourceFunctionType[] resourceFunctions;\n-    private volatile MemberFunctionType[] remoteFunctions;\n+    private ResourceMethodType[] resourceFunctions;\n+    private volatile RemoteMethodType[] remoteFunctions;\n \n     public BServiceType(String typeName, Module pkg, long flags) {\n         super(typeName, pkg, flags);\n     }\n \n-    public void setResourceFunctions(ResourceFunctionType[] resourceFunctions) {\n+    public void setResourceFunctions(ResourceMethodType[] resourceFunctions) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1319c9c415b8c17f60e993b8863833f7a8ee66ea"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3ODMyOTAwOnYy", "diffSide": "RIGHT", "path": "stdlib/http/src/main/java/org/ballerinalang/net/http/HttpService.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxNDoxMjoxMlrOIPC91A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxNDoxMjoxMlrOIPC91A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjY0ODE0OA==", "bodyText": "Do we need this change?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r552648148", "createdAt": "2021-01-06T14:12:12Z", "author": {"login": "MaryamZi"}, "path": "stdlib/http/src/main/java/org/ballerinalang/net/http/HttpService.java", "diffHunk": "@@ -258,7 +258,7 @@ public void setUpgradeToWebSocketResources(\n     private static void processResources(HttpService httpService) {\n         List<HttpResource> httpResources = new ArrayList<>();\n         List<HttpResource> upgradeToWebSocketResources = new ArrayList<>();\n-        for (AttachedFunctionType resource : httpService.getBalService().getType().getAttachedFunctions()) {\n+        for (AttachedFunctionType resource : httpService.getBalService().getType().getAttachedFunctions()()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1319c9c415b8c17f60e993b8863833f7a8ee66ea"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3ODM0MDU0OnYy", "diffSide": "RIGHT", "path": "stdlib/task/src/main/java/org/ballerinalang/stdlib/task/utils/TaskExecutor.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxNDoxNDoyOFrOIPDFQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxNDo1ODoxM1rOIPFf_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjY1MDA1MQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            import io.ballerina.runtime.api.types.MethodTypes;\n          \n          \n            \n            import io.ballerina.runtime.api.types.MethodType;\n          \n      \n    \n    \n  \n\nThere seem to be several places with this change.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r552650051", "createdAt": "2021-01-06T14:14:28Z", "author": {"login": "MaryamZi"}, "path": "stdlib/task/src/main/java/org/ballerinalang/stdlib/task/utils/TaskExecutor.java", "diffHunk": "@@ -19,7 +19,7 @@\n \n import io.ballerina.runtime.api.Runtime;\n import io.ballerina.runtime.api.async.StrandMetadata;\n-import io.ballerina.runtime.api.types.MemberFunctionType;\n+import io.ballerina.runtime.api.types.MethodTypes;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1319c9c415b8c17f60e993b8863833f7a8ee66ea"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjY4OTY2MA==", "bodyText": "Reset all the changes to these hanging java files in stdlib directory", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r552689660", "createdAt": "2021-01-06T14:58:13Z", "author": {"login": "rdhananjaya"}, "path": "stdlib/task/src/main/java/org/ballerinalang/stdlib/task/utils/TaskExecutor.java", "diffHunk": "@@ -19,7 +19,7 @@\n \n import io.ballerina.runtime.api.Runtime;\n import io.ballerina.runtime.api.async.StrandMetadata;\n-import io.ballerina.runtime.api.types.MemberFunctionType;\n+import io.ballerina.runtime.api.types.MethodTypes;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjY1MDA1MQ=="}, "originalCommit": {"oid": "1319c9c415b8c17f60e993b8863833f7a8ee66ea"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3ODc3MDIzOnYy", "diffSide": "RIGHT", "path": "bvm/ballerina-runtime/src/main/java/io/ballerina/runtime/internal/types/BServiceType.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxNTozNToxNFrOIPHYaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxNTozNToxNFrOIPHYaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjcyMDQ4OA==", "bodyText": "Not related to this PR, but can't we do this when setting the methods itself, by overriding setAttachedFunctions maybe? We can probably remove the synchronized block and make remoteMethods a non-volatile variable then, right?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r552720488", "createdAt": "2021-01-06T15:35:14Z", "author": {"login": "MaryamZi"}, "path": "bvm/ballerina-runtime/src/main/java/io/ballerina/runtime/internal/types/BServiceType.java", "diffHunk": "@@ -49,26 +50,26 @@ public void setResourceFunctions(ResourceFunctionType[] resourceFunctions) {\n      * @return array of remote functions\n      */\n     @Override\n-    public MemberFunctionType[] getRemoteFunctions() {\n-        if (remoteFunctions == null) {\n-            MemberFunctionType[] funcs = getRemoteFunctions(getAttachedFunctions());\n+    public RemoteMethodType[] getRemoteMethods() {\n+        if (remoteMethods == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d8b750f57a50846cdabb0c561331521fe7498b8"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ3ODc3NDg0OnYy", "diffSide": "RIGHT", "path": "bvm/ballerina-runtime/src/main/java/io/ballerina/runtime/internal/types/BServiceType.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxNTozNjowOVrOIPHbeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNlQxNTozNjowOVrOIPHbeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjcyMTI3NA==", "bodyText": "Shall we rename this to getRemoteMethods and maybe change the param name too?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27464#discussion_r552721274", "createdAt": "2021-01-06T15:36:09Z", "author": {"login": "MaryamZi"}, "path": "bvm/ballerina-runtime/src/main/java/io/ballerina/runtime/internal/types/BServiceType.java", "diffHunk": "@@ -49,26 +50,26 @@ public void setResourceFunctions(ResourceFunctionType[] resourceFunctions) {\n      * @return array of remote functions\n      */\n     @Override\n-    public MemberFunctionType[] getRemoteFunctions() {\n-        if (remoteFunctions == null) {\n-            MemberFunctionType[] funcs = getRemoteFunctions(getAttachedFunctions());\n+    public RemoteMethodType[] getRemoteMethods() {\n+        if (remoteMethods == null) {\n+            RemoteMethodType[] funcs = getRemoteFunctions(getMethods());\n             synchronized (this) {\n-                if (remoteFunctions == null) {\n-                    remoteFunctions = funcs;\n+                if (remoteMethods == null) {\n+                    remoteMethods = funcs;\n                 }\n             }\n         }\n-        return remoteFunctions;\n+        return remoteMethods;\n     }\n \n-    private MemberFunctionType[] getRemoteFunctions(MemberFunctionType[] attachedFunctions) {\n-        ArrayList<MemberFunctionType> functions = new ArrayList<>();\n-        for (MemberFunctionType funcType : attachedFunctions) {\n-            if (SymbolFlags.isFlagOn(((BMemberFunctionType) funcType).flags, SymbolFlags.REMOTE)) {\n+    private RemoteMethodType[] getRemoteFunctions(MethodType[] attachedFunctions) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d8b750f57a50846cdabb0c561331521fe7498b8"}, "originalPosition": 58}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2733, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}