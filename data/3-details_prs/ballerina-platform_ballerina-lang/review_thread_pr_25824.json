{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg3MzA5OTU5", "number": 25824, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNjowNDoyOFrOEjqeOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNjowNToxMVrOEjqfew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1ODMxNDgyOnYy", "diffSide": "RIGHT", "path": "tests/jballerina-unit-test/src/test/java/org/ballerinalang/test/expressions/lambda/FunctionPointersNegativeTest.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNjowNDoyOFrOHSJHFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNlQwMjoxMzoxMFrOHSdgnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODc4NTY4NQ==", "bodyText": "Is it correct that this error is getting logged? Only Context is an unknown type here, right? Even though there are errors when attempting to resolve FunctionEntry's members, it is not unknown?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25824#discussion_r488785685", "createdAt": "2020-09-15T16:04:28Z", "author": {"login": "MaryamZi"}, "path": "tests/jballerina-unit-test/src/test/java/org/ballerinalang/test/expressions/lambda/FunctionPointersNegativeTest.java", "diffHunk": "@@ -34,9 +34,11 @@\n     public void testFunctionPointerAsVariable() {\n         CompileResult result =\n                 BCompileUtil.compile(\"test-src/expressions/lambda/negative/fp-type-mismatch1-negative.bal\");\n-        Assert.assertEquals(result.getErrorCount(), 1);\n+        Assert.assertEquals(result.getErrorCount(), 3);\n         BAssertUtil.validateError(result, 0, \"incompatible types: expected 'function (string,int) returns \" +\n                 \"(boolean)', found 'function (string,float) returns (boolean)'\", 2, 53);\n+        BAssertUtil.validateError(result, 1, \"unknown type 'Context'\", 10, 29);\n+        BAssertUtil.validateError(result, 2, \"unknown type 'FunctionEntry'\", 12, 5);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6045554f5b6f0cfa7cc5bb49ec6dcfb4da1c0745"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODgyNDE1Mw==", "bodyText": "This error message at index 2 is due to the behavior of tuple, the behavior added by this PR for function type is similar.\nSample for SLP preview 3:\n\ntype A object {\n    K i;\n\n    function __init(K i) {\n        self.i = i;\n    }\n};\n\ntype B [A, K];\n\ntype C B|A|D;\n\ntype D record {\n    K i;\n    B j;\n    C k;\n};\n\noutput:\nerror: .::main.bal:10:9: unknown type 'A'\nerror: .::main.bal:10:12: unknown type 'K'\nerror: .::main.bal:12:10: unknown type 'A'\nerror: .::main.bal:12:12: unknown type 'D'\nerror: .::main.bal:3:5: unknown type 'K'\nerror: .::main.bal:15:5: unknown type 'K'\nerror: .::main.bal:16:5: unknown type 'B'\nerror: .::main.bal:17:5: unknown type 'C'\nerror: .::main.bal:5:21: unknown type 'K'", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25824#discussion_r488824153", "createdAt": "2020-09-15T17:05:01Z", "author": {"login": "rdhananjaya"}, "path": "tests/jballerina-unit-test/src/test/java/org/ballerinalang/test/expressions/lambda/FunctionPointersNegativeTest.java", "diffHunk": "@@ -34,9 +34,11 @@\n     public void testFunctionPointerAsVariable() {\n         CompileResult result =\n                 BCompileUtil.compile(\"test-src/expressions/lambda/negative/fp-type-mismatch1-negative.bal\");\n-        Assert.assertEquals(result.getErrorCount(), 1);\n+        Assert.assertEquals(result.getErrorCount(), 3);\n         BAssertUtil.validateError(result, 0, \"incompatible types: expected 'function (string,int) returns \" +\n                 \"(boolean)', found 'function (string,float) returns (boolean)'\", 2, 53);\n+        BAssertUtil.validateError(result, 1, \"unknown type 'Context'\", 10, 29);\n+        BAssertUtil.validateError(result, 2, \"unknown type 'FunctionEntry'\", 12, 5);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODc4NTY4NQ=="}, "originalCommit": {"oid": "6045554f5b6f0cfa7cc5bb49ec6dcfb4da1c0745"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODgzNTkxNg==", "bodyText": "The output doesn't seem consistent right? An \"unknown type 'B'\" error is only logged for the usage as a field in D and not for the definition of C?\nFor the following sample, there is only one error.\ntype FunctionType record {\n    Context c;\n};\n\ntype FunctionEntry [FunctionType, typedesc<anydata>];\nmap<FunctionEntry> functions = { };\nerror: .::test.bal:2:5: unknown type 'Context'\nI guess we can go ahead with these changes for the time-being. But shall we create an issue to revisit this and make the errors consistent?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25824#discussion_r488835916", "createdAt": "2020-09-15T17:23:15Z", "author": {"login": "MaryamZi"}, "path": "tests/jballerina-unit-test/src/test/java/org/ballerinalang/test/expressions/lambda/FunctionPointersNegativeTest.java", "diffHunk": "@@ -34,9 +34,11 @@\n     public void testFunctionPointerAsVariable() {\n         CompileResult result =\n                 BCompileUtil.compile(\"test-src/expressions/lambda/negative/fp-type-mismatch1-negative.bal\");\n-        Assert.assertEquals(result.getErrorCount(), 1);\n+        Assert.assertEquals(result.getErrorCount(), 3);\n         BAssertUtil.validateError(result, 0, \"incompatible types: expected 'function (string,int) returns \" +\n                 \"(boolean)', found 'function (string,float) returns (boolean)'\", 2, 53);\n+        BAssertUtil.validateError(result, 1, \"unknown type 'Context'\", 10, 29);\n+        BAssertUtil.validateError(result, 2, \"unknown type 'FunctionEntry'\", 12, 5);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODc4NTY4NQ=="}, "originalCommit": {"oid": "6045554f5b6f0cfa7cc5bb49ec6dcfb4da1c0745"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTExOTkwMw==", "bodyText": "Issue created: #25831", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25824#discussion_r489119903", "createdAt": "2020-09-16T02:13:10Z", "author": {"login": "rdhananjaya"}, "path": "tests/jballerina-unit-test/src/test/java/org/ballerinalang/test/expressions/lambda/FunctionPointersNegativeTest.java", "diffHunk": "@@ -34,9 +34,11 @@\n     public void testFunctionPointerAsVariable() {\n         CompileResult result =\n                 BCompileUtil.compile(\"test-src/expressions/lambda/negative/fp-type-mismatch1-negative.bal\");\n-        Assert.assertEquals(result.getErrorCount(), 1);\n+        Assert.assertEquals(result.getErrorCount(), 3);\n         BAssertUtil.validateError(result, 0, \"incompatible types: expected 'function (string,int) returns \" +\n                 \"(boolean)', found 'function (string,float) returns (boolean)'\", 2, 53);\n+        BAssertUtil.validateError(result, 1, \"unknown type 'Context'\", 10, 29);\n+        BAssertUtil.validateError(result, 2, \"unknown type 'FunctionEntry'\", 12, 5);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODc4NTY4NQ=="}, "originalCommit": {"oid": "6045554f5b6f0cfa7cc5bb49ec6dcfb4da1c0745"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1ODMxNzMyOnYy", "diffSide": "RIGHT", "path": "tests/jballerina-unit-test/src/test/resources/test-src/expressions/lambda/struct-function-pointers.bal", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNjowNTowMlrOHSJIog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNjowNTowMlrOHSJIog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODc4NjA4Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    json j = { j: a.toString() };\n          \n          \n            \n                    json j = {j: a.toString()};", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25824#discussion_r488786082", "createdAt": "2020-09-15T16:05:02Z", "author": {"login": "MaryamZi"}, "path": "tests/jballerina-unit-test/src/test/resources/test-src/expressions/lambda/struct-function-pointers.bal", "diffHunk": "@@ -52,3 +52,40 @@ function test3() returns (string){\n     string x = bob.getPersonName(bob);\n     return x;\n }\n+\n+class Context {\n+    function getJsonVal(anydata a) returns json|error {\n+        json j = { j: a.toString() };", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6045554f5b6f0cfa7cc5bb49ec6dcfb4da1c0745"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1ODMxODAzOnYy", "diffSide": "RIGHT", "path": "tests/jballerina-unit-test/src/test/resources/test-src/expressions/lambda/struct-function-pointers.bal", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNjowNToxMVrOHSJJBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNjowNToxMVrOHSJJBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODc4NjE4Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return ;\n          \n          \n            \n                    return;", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25824#discussion_r488786182", "createdAt": "2020-09-15T16:05:11Z", "author": {"login": "MaryamZi"}, "path": "tests/jballerina-unit-test/src/test/resources/test-src/expressions/lambda/struct-function-pointers.bal", "diffHunk": "@@ -52,3 +52,40 @@ function test3() returns (string){\n     string x = bob.getPersonName(bob);\n     return x;\n }\n+\n+class Context {\n+    function getJsonVal(anydata a) returns json|error {\n+        json j = { j: a.toString() };\n+        return ;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6045554f5b6f0cfa7cc5bb49ec6dcfb4da1c0745"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 119, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}