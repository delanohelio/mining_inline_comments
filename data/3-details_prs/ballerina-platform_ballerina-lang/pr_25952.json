{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkwMDEwNDUz", "number": 25952, "title": "[Formatter] Fix formatting issues in several parser nodes", "bodyText": "Purpose\nFixes formatting issues in the following nodes.\n\nDo statement.\nQuery expressions.\nFork statements.\nPanic statements.\nContinue statements.\nBreak statements.\nEnum declarations.\nCompound assignment statements.\nLet expression.\nCall statements.\nIf-else statements.\n\nApproach\n\nDescribe how you are implementing the solutions along with the design details.\n\nSamples\n\nProvide high-level details about the samples related to this feature.\n\nRemarks\n\nList any other known issues, related PRs, TODO items, or any other notes related to the PR.\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-09-21T03:12:06Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25952", "merged": true, "mergeCommit": {"oid": "aba288f11b52944a82fb34cf11a49e6d2f4ebd7a"}, "closed": true, "closedAt": "2020-09-21T04:07:51Z", "author": {"login": "IrushiL"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdKWeAjAH2gAyNDkwMDEwNDUzOjVjYmUyYmI3YjBlNTljNDIzZDM1ODY4OThjYWE0ZWNhNWFhMDQzYjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdK7YeygFqTQ5MjI2OTgzNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5cbe2bb7b0e59c423d3586898caa4eca5aa043b4", "author": {"user": {"login": "IrushiL", "name": "Irushi Liyanage"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5cbe2bb7b0e59c423d3586898caa4eca5aa043b4", "committedDate": "2020-09-19T09:07:10Z", "message": "Fix the do statement"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e88e8b642d464db3eacbfb942663601e09e13b38", "author": {"user": {"login": "IrushiL", "name": "Irushi Liyanage"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e88e8b642d464db3eacbfb942663601e09e13b38", "committedDate": "2020-09-19T23:25:05Z", "message": "Fix query expressions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35cca60be71e93cc91a61c474ff1c6dd72d6ecd3", "author": {"user": {"login": "IrushiL", "name": "Irushi Liyanage"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/35cca60be71e93cc91a61c474ff1c6dd72d6ecd3", "committedDate": "2020-09-20T20:10:01Z", "message": "Fix fork statements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc60e344edb0968caca8540e9e042ebd9ced9489", "author": {"user": {"login": "IrushiL", "name": "Irushi Liyanage"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bc60e344edb0968caca8540e9e042ebd9ced9489", "committedDate": "2020-09-20T20:23:49Z", "message": "Fix panic statements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56a6e8880b18c232b94daca3c5d438a4d5224492", "author": {"user": {"login": "IrushiL", "name": "Irushi Liyanage"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/56a6e8880b18c232b94daca3c5d438a4d5224492", "committedDate": "2020-09-20T21:22:41Z", "message": "Fix continue statements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1b9b083dd01e2d4313b469d5a2d0a8e7ab72a4a", "author": {"user": {"login": "IrushiL", "name": "Irushi Liyanage"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c1b9b083dd01e2d4313b469d5a2d0a8e7ab72a4a", "committedDate": "2020-09-20T21:26:51Z", "message": "Fix break statements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68bec39929c0174d02d30b49864a279dd4502b76", "author": {"user": {"login": "IrushiL", "name": "Irushi Liyanage"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/68bec39929c0174d02d30b49864a279dd4502b76", "committedDate": "2020-09-20T22:12:59Z", "message": "Fix enum declarations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abcb7059ab61cf4c9af884ec7b11c7bc0ad10e26", "author": {"user": {"login": "IrushiL", "name": "Irushi Liyanage"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/abcb7059ab61cf4c9af884ec7b11c7bc0ad10e26", "committedDate": "2020-09-20T22:21:56Z", "message": "Fix compound assignment statements"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87e1a9c82f735eb9ed527b7761abe4276606d454", "author": {"user": {"login": "IrushiL", "name": "Irushi Liyanage"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/87e1a9c82f735eb9ed527b7761abe4276606d454", "committedDate": "2020-09-21T00:49:00Z", "message": "Fix let expressions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4911658abd694dabb225f0f0e482aaa2c5ee9a4", "author": {"user": {"login": "IrushiL", "name": "Irushi Liyanage"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d4911658abd694dabb225f0f0e482aaa2c5ee9a4", "committedDate": "2020-09-21T00:59:12Z", "message": "Fix the call statement"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ea1c3a1bde5121a198f036f2bc349efe02c5a7f", "author": {"user": {"login": "IrushiL", "name": "Irushi Liyanage"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5ea1c3a1bde5121a198f036f2bc349efe02c5a7f", "committedDate": "2020-09-21T03:03:59Z", "message": "Fix the if else statements"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMjY0NDY0", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25952#pullrequestreview-492264464", "createdAt": "2020-09-21T03:37:28Z", "commit": {"oid": "5ea1c3a1bde5121a198f036f2bc349efe02c5a7f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMjY2MTk5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25952#pullrequestreview-492266199", "createdAt": "2020-09-21T03:47:12Z", "commit": {"oid": "5ea1c3a1bde5121a198f036f2bc349efe02c5a7f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQwMzo0NzoxMlrOHU__4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQwMzo0ODowM1rOHVAAYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTc4MjExMw==", "bodyText": "Shall we assign the addSpaces value with the if's condition? No need to add an if clause just for setting the variable", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25952#discussion_r491782113", "createdAt": "2020-09-21T03:47:12Z", "author": {"login": "nadeeshaan"}, "path": "misc/formatter/modules/formatter-core/src/main/java/org/ballerinalang/formatter/core/FormatterUtils.java", "diffHunk": "@@ -526,8 +561,12 @@ private static Indentation getBlockParent(Node node) {\n         if (parent.kind() == SyntaxKind.IF_ELSE_STATEMENT) {\n             ArrayList nestedBlock = nestedIfBlock((NonTerminalNode) parent);\n             if (!nestedBlock.isEmpty()) {\n+                boolean addSpaces = false;\n+                if (parent.parent() != null && parent.parent().kind() == SyntaxKind.BLOCK_STATEMENT) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ea1c3a1bde5121a198f036f2bc349efe02c5a7f"}, "originalPosition": 116}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTc4MjI0Mg==", "bodyText": "can simplify the addSpaces value assignment by assigning the if condition directly", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25952#discussion_r491782242", "createdAt": "2020-09-21T03:48:03Z", "author": {"login": "nadeeshaan"}, "path": "misc/formatter/modules/formatter-core/src/main/java/org/ballerinalang/formatter/core/NodeIndentation.java", "diffHunk": "@@ -111,8 +112,20 @@ static int simpleNameReferenceNode(Node node, FormattingOptions options) {\n             }\n         }\n         if (parent != null && parent.kind() == SyntaxKind.FUNCTION_CALL) {\n+            if (grandParent != null && grandParent.kind() == SyntaxKind.CALL_STATEMENT) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ea1c3a1bde5121a198f036f2bc349efe02c5a7f"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMjY2OTIx", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25952#pullrequestreview-492266921", "createdAt": "2020-09-21T03:51:37Z", "commit": {"oid": "5ea1c3a1bde5121a198f036f2bc349efe02c5a7f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQwMzo1MTozOFrOHVACeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMVQwMzo1MTozOFrOHVACeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTc4Mjc3Ng==", "bodyText": "Can simplify the addSpaces variable assignment", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25952#discussion_r491782776", "createdAt": "2020-09-21T03:51:38Z", "author": {"login": "nadeeshaan"}, "path": "misc/formatter/modules/formatter-core/src/main/java/org/ballerinalang/formatter/core/FormattingTreeModifier.java", "diffHunk": "@@ -409,12 +418,18 @@ public ReturnTypeDescriptorNode transform(ReturnTypeDescriptorNode returnTypeDes\n         if (!isInLineRange(returnTypeDescriptorNode, lineRange)) {\n             return returnTypeDescriptorNode;\n         }\n+        boolean addSpaces = false;\n+        if (returnTypeDescriptorNode.parent() != null &&\n+                returnTypeDescriptorNode.parent().kind() == SyntaxKind.BLOCK_STATEMENT) {\n+            addSpaces = true;\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ea1c3a1bde5121a198f036f2bc349efe02c5a7f"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMjY5ODM3", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25952#pullrequestreview-492269837", "createdAt": "2020-09-21T04:07:37Z", "commit": {"oid": "5ea1c3a1bde5121a198f036f2bc349efe02c5a7f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4630, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}