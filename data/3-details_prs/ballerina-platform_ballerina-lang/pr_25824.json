{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg3MzA5OTU5", "number": 25824, "title": "Improve delayed type resolving for function type", "bodyText": "Purpose\nWhen type nodes in function types cannot be resolved at the time the function type is first being resolved, the types that couldn't resolve was represented by symtable.noType and didn't emit errors for it. This PR fixes that.\nFixes #25811\nApproach\n\nDescribe how you are implementing the solutions along with the design details.\n\nSamples\n\nProvide high-level details about the samples related to this feature.\n\nRemarks\n\nList any other known issues, related PRs, TODO items, or any other notes related to the PR.\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-09-15T13:47:41Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25824", "merged": true, "mergeCommit": {"oid": "7607cc254c9e46741cf4ce2e027406c88a271c06"}, "closed": true, "closedAt": "2020-09-16T16:43:15Z", "author": {"login": "rdhananjaya"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJIBWSAH2gAyNDg3MzA5OTU5OjYwNDU1NTRmNWI2ZjBjZmE3Y2M1YmI0OWVjNmRjZmI0ZGExYzA3NDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJfMWZAFqTQ4OTgxMDM5NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6045554f5b6f0cfa7cc5bb49ec6dcfb4da1c0745", "author": {"user": {"login": "rdhananjaya", "name": "Dhananjaya [Danje]"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/6045554f5b6f0cfa7cc5bb49ec6dcfb4da1c0745", "committedDate": "2020-09-15T13:43:16Z", "message": "Improve delayed type resolving for function type"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4ODM5MzEy", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25824#pullrequestreview-488839312", "createdAt": "2020-09-15T16:04:28Z", "commit": {"oid": "6045554f5b6f0cfa7cc5bb49ec6dcfb4da1c0745"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNjowNDoyOFrOHSJHFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxNjowNToxMVrOHSJJBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODc4NTY4NQ==", "bodyText": "Is it correct that this error is getting logged? Only Context is an unknown type here, right? Even though there are errors when attempting to resolve FunctionEntry's members, it is not unknown?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25824#discussion_r488785685", "createdAt": "2020-09-15T16:04:28Z", "author": {"login": "MaryamZi"}, "path": "tests/jballerina-unit-test/src/test/java/org/ballerinalang/test/expressions/lambda/FunctionPointersNegativeTest.java", "diffHunk": "@@ -34,9 +34,11 @@\n     public void testFunctionPointerAsVariable() {\n         CompileResult result =\n                 BCompileUtil.compile(\"test-src/expressions/lambda/negative/fp-type-mismatch1-negative.bal\");\n-        Assert.assertEquals(result.getErrorCount(), 1);\n+        Assert.assertEquals(result.getErrorCount(), 3);\n         BAssertUtil.validateError(result, 0, \"incompatible types: expected 'function (string,int) returns \" +\n                 \"(boolean)', found 'function (string,float) returns (boolean)'\", 2, 53);\n+        BAssertUtil.validateError(result, 1, \"unknown type 'Context'\", 10, 29);\n+        BAssertUtil.validateError(result, 2, \"unknown type 'FunctionEntry'\", 12, 5);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6045554f5b6f0cfa7cc5bb49ec6dcfb4da1c0745"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODc4NjA4Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    json j = { j: a.toString() };\n          \n          \n            \n                    json j = {j: a.toString()};", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25824#discussion_r488786082", "createdAt": "2020-09-15T16:05:02Z", "author": {"login": "MaryamZi"}, "path": "tests/jballerina-unit-test/src/test/resources/test-src/expressions/lambda/struct-function-pointers.bal", "diffHunk": "@@ -52,3 +52,40 @@ function test3() returns (string){\n     string x = bob.getPersonName(bob);\n     return x;\n }\n+\n+class Context {\n+    function getJsonVal(anydata a) returns json|error {\n+        json j = { j: a.toString() };", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6045554f5b6f0cfa7cc5bb49ec6dcfb4da1c0745"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODc4NjE4Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return ;\n          \n          \n            \n                    return;", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25824#discussion_r488786182", "createdAt": "2020-09-15T16:05:11Z", "author": {"login": "MaryamZi"}, "path": "tests/jballerina-unit-test/src/test/resources/test-src/expressions/lambda/struct-function-pointers.bal", "diffHunk": "@@ -52,3 +52,40 @@ function test3() returns (string){\n     string x = bob.getPersonName(bob);\n     return x;\n }\n+\n+class Context {\n+    function getJsonVal(anydata a) returns json|error {\n+        json j = { j: a.toString() };\n+        return ;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6045554f5b6f0cfa7cc5bb49ec6dcfb4da1c0745"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c045ec869c0d69f509c27d1d3c48ea56ff419fb5", "author": {"user": {"login": "rdhananjaya", "name": "Dhananjaya [Danje]"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c045ec869c0d69f509c27d1d3c48ea56ff419fb5", "committedDate": "2020-09-16T05:05:34Z", "message": "Merge branch 'master' of github.com:ballerina-platform/ballerina-lang into fix-function-type-type-resolving-issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "afc41d2c2fec58ce6d4ae4a35064890c0ebcbe86", "author": {"user": {"login": "rdhananjaya", "name": "Dhananjaya [Danje]"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/afc41d2c2fec58ce6d4ae4a35064890c0ebcbe86", "committedDate": "2020-09-16T05:19:55Z", "message": "Fix merge error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc79e33fc41fddb9a195094115c5d3cc3a59565e", "author": {"user": {"login": "rdhananjaya", "name": "Dhananjaya [Danje]"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/cc79e33fc41fddb9a195094115c5d3cc3a59565e", "committedDate": "2020-09-16T07:26:10Z", "message": "Fix type error checking logic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22d883907155af039f06c65ce0d20e433c7b6f56", "author": {"user": {"login": "rdhananjaya", "name": "Dhananjaya [Danje]"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/22d883907155af039f06c65ce0d20e433c7b6f56", "committedDate": "2020-09-16T07:48:04Z", "message": "Fix failing lang-server test cases"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5cb310033fad9fcd768acaf60b6e9b144aa226e0", "author": {"user": {"login": "rdhananjaya", "name": "Dhananjaya [Danje]"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5cb310033fad9fcd768acaf60b6e9b144aa226e0", "committedDate": "2020-09-16T07:40:29Z", "message": "Fix failing lang-server test cases"}, "afterCommit": {"oid": "22d883907155af039f06c65ce0d20e433c7b6f56", "author": {"user": {"login": "rdhananjaya", "name": "Dhananjaya [Danje]"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/22d883907155af039f06c65ce0d20e433c7b6f56", "committedDate": "2020-09-16T07:48:04Z", "message": "Fix failing lang-server test cases"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5MzcxMzcy", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25824#pullrequestreview-489371372", "createdAt": "2020-09-16T08:01:24Z", "commit": {"oid": "22d883907155af039f06c65ce0d20e433c7b6f56"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0af97583ae34304736b17790d2845cfaad972ae9", "author": {"user": {"login": "rdhananjaya", "name": "Dhananjaya [Danje]"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0af97583ae34304736b17790d2845cfaad972ae9", "committedDate": "2020-09-16T09:04:57Z", "message": "Fixup unit test code"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "673cfd14ae2d0f7d471805312413d583bbe41535", "author": {"user": {"login": "rdhananjaya", "name": "Dhananjaya [Danje]"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/673cfd14ae2d0f7d471805312413d583bbe41535", "committedDate": "2020-09-16T08:36:06Z", "message": "Fixup unit test code"}, "afterCommit": {"oid": "0af97583ae34304736b17790d2845cfaad972ae9", "author": {"user": {"login": "rdhananjaya", "name": "Dhananjaya [Danje]"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0af97583ae34304736b17790d2845cfaad972ae9", "committedDate": "2020-09-16T09:04:57Z", "message": "Fixup unit test code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg5ODEwMzk1", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25824#pullrequestreview-489810395", "createdAt": "2020-09-16T16:43:06Z", "commit": {"oid": "0af97583ae34304736b17790d2845cfaad972ae9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4750, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}