{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0MTg5NTMx", "number": 26145, "title": "Enable packerina tests", "bodyText": "Purpose\n\nEnable the packerina tests which are disabled due to the stdlib migration.\n\nFixes #25594, #22996\nApproach\n\nWrote tests without using stdlibs.\n\nSamples\n\nProvide high-level details about the samples related to this feature.\n\nRemarks\n\nList any other known issues, related PRs, TODO items, or any other notes related to the PR.\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-09-28T14:32:40Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26145", "merged": true, "mergeCommit": {"oid": "9d2308bfe98309ee6c404f955fec862a638f1c49"}, "closed": true, "closedAt": "2020-10-13T03:39:26Z", "author": {"login": "suganyasuven"}, "timelineItems": {"totalCount": 27, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdL6kIvAH2gAyNDk0MTg5NTMxOjBmYjI5Nzc4OTY3YjdmYjczOTZhNWM4YWNjZmMzNjJmMjc5MDFmMTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSAKWxgFqTUwNzA0NzI2OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0fb29778967b7fb7396a5c8accfc362f27901f12", "author": {"user": {"login": "suganyasuven", "name": "Suganya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0fb29778967b7fb7396a5c8accfc362f27901f12", "committedDate": "2020-09-24T05:44:22Z", "message": "Fix dependency scope test cases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "744af7648a6a0dc9948e1e7d694f747d5f20017b", "author": {"user": {"login": "suganyasuven", "name": "Suganya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/744af7648a6a0dc9948e1e7d694f747d5f20017b", "committedDate": "2020-09-24T06:00:07Z", "message": "Fix directory test case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bc251741934fd2ccaafa59e2ad636d1904996a4", "author": {"user": {"login": "suganyasuven", "name": "Suganya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5bc251741934fd2ccaafa59e2ad636d1904996a4", "committedDate": "2020-09-24T06:18:24Z", "message": "Fix packaging test case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4add5a9e1a9ec1cad4771678dc9420fef329fc92", "author": {"user": {"login": "suganyasuven", "name": "Suganya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4add5a9e1a9ec1cad4771678dc9420fef329fc92", "committedDate": "2020-09-24T06:29:27Z", "message": "Fix maven test case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "793a3aa23cd4ab932a339c350b9a2928e54a48fe", "author": {"user": {"login": "suganyasuven", "name": "Suganya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/793a3aa23cd4ab932a339c350b9a2928e54a48fe", "committedDate": "2020-09-24T06:48:55Z", "message": "Fix multiple versions module test case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd53528ee0dcbda340520df64d97510e608aead1", "author": {"user": {"login": "suganyasuven", "name": "Suganya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bd53528ee0dcbda340520df64d97510e608aead1", "committedDate": "2020-09-24T07:14:24Z", "message": "Fix spi services test case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "659428566ef2d07dd76c30265e45a6966eca5002", "author": {"user": {"login": "suganyasuven", "name": "Suganya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/659428566ef2d07dd76c30265e45a6966eca5002", "committedDate": "2020-09-25T05:38:32Z", "message": "Enable native packaging test case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3198057d922138f850528cc8025526dcec2aeac6", "author": {"user": {"login": "suganyasuven", "name": "Suganya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3198057d922138f850528cc8025526dcec2aeac6", "committedDate": "2020-09-25T06:59:36Z", "message": "Fix packaging negative test cases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d08291e1f0125a01973a771cc126ed251c1a253", "author": {"user": {"login": "suganyasuven", "name": "Suganya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4d08291e1f0125a01973a771cc126ed251c1a253", "committedDate": "2020-09-25T16:14:28Z", "message": "Enable lock file test cases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f607c14fafdcbadd73ae2edd000502c470b80c0", "author": {"user": {"login": "suganyasuven", "name": "Suganya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2f607c14fafdcbadd73ae2edd000502c470b80c0", "committedDate": "2020-09-26T17:01:12Z", "message": "Enable path dependency test cases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "832bb64f25ea4ffa1495a106d65450935923945f", "author": {"user": {"login": "suganyasuven", "name": "Suganya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/832bb64f25ea4ffa1495a106d65450935923945f", "committedDate": "2020-09-28T07:57:44Z", "message": "Fix path dependency test cases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4672ad79fa791f1cb4ce271343f9126fdf9c9ec0", "author": {"user": {"login": "suganyasuven", "name": "Suganya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4672ad79fa791f1cb4ce271343f9126fdf9c9ec0", "committedDate": "2020-09-28T08:10:56Z", "message": "Fix package import test case"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46a9b8a81e66010ac5f6c5f306631b4c4280ea54", "author": {"user": {"login": "suganyasuven", "name": "Suganya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/46a9b8a81e66010ac5f6c5f306631b4c4280ea54", "committedDate": "2020-09-28T14:27:59Z", "message": "Enable single bal file test cases"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "817efe66076412835c62a3853e31454f0ee9d738", "author": {"user": {"login": "suganyasuven", "name": "Suganya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/817efe66076412835c62a3853e31454f0ee9d738", "committedDate": "2020-09-28T15:06:49Z", "message": "Fix checkstyle issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a902e566db6dcbe1e2f3d9539a4690c1108e7d5", "author": {"user": {"login": "suganyasuven", "name": "Suganya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9a902e566db6dcbe1e2f3d9539a4690c1108e7d5", "committedDate": "2020-09-29T05:07:25Z", "message": "Fix failed tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85d6df2f29b810fe9406223d58b06217d8f567c2", "author": {"user": {"login": "suganyasuven", "name": "Suganya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/85d6df2f29b810fe9406223d58b06217d8f567c2", "committedDate": "2020-09-30T11:18:31Z", "message": "Enable validate balo dependency test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1Mzk5MTMy", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26145#pullrequestreview-505399132", "createdAt": "2020-10-09T06:41:01Z", "commit": {"oid": "85d6df2f29b810fe9406223d58b06217d8f567c2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwNjo0MTowMVrOHe8_0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwNjo0MTowMVrOHe8_0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjIxODcwNw==", "bodyText": "We can get rid of asserting whether file exists because Files.isDirectory(modulePath) will fail anyway if the file doesn't exist. WDYT?\nLet's correct this in other similar places too.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26145#discussion_r502218707", "createdAt": "2020-10-09T06:41:01Z", "author": {"login": "Dilhasha"}, "path": "tests/jballerina-integration-test/src/test/java/org/ballerinalang/test/packaging/ModulePushTestCase.java", "diffHunk": "@@ -70,13 +70,20 @@ public void testPush() throws Exception {\n     \n         Assert.assertTrue(Files.exists(projectPath));\n         Assert.assertTrue(Files.isDirectory(projectPath));\n+\n+        Path modulePath = projectPath.resolve(\"src\").resolve(moduleName);\n     \n         // Create module\n         balClient.runMain(\"add\", new String[]{moduleName}, envVariables, new String[]{}, new LogLeecher[]{},\n                 projectPath.toString());\n     \n-        Assert.assertTrue(Files.exists(projectPath.resolve(\"src\").resolve(moduleName)));\n-        Assert.assertTrue(Files.isDirectory(projectPath.resolve(\"src\").resolve(moduleName)));\n+        Assert.assertTrue(Files.exists(modulePath));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85d6df2f29b810fe9406223d58b06217d8f567c2"}, "originalPosition": 31}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1NDA3ODE5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26145#pullrequestreview-505407819", "createdAt": "2020-10-09T06:58:29Z", "commit": {"oid": "85d6df2f29b810fe9406223d58b06217d8f567c2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwNjo1ODoyOVrOHe9a2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQwNjo1ODoyOVrOHe9a2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjIyNTYyNA==", "bodyText": "Shall we remove this new line and can you please check other place as well?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26145#discussion_r502225624", "createdAt": "2020-10-09T06:58:29Z", "author": {"login": "lnash94"}, "path": "tests/jballerina-integration-test/src/test/resources/packaging/balopath/case1/TestProject2/src/baz/tests/impl_test.bal", "diffHunk": "@@ -0,0 +1,9 @@\n+import ballerina/test;\n+\n+# Test function\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85d6df2f29b810fe9406223d58b06217d8f567c2"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a34a282ac9262e064c5b997e50d8d579642d113", "author": {"user": {"login": "suganyasuven", "name": "Suganya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7a34a282ac9262e064c5b997e50d8d579642d113", "committedDate": "2020-10-09T07:23:31Z", "message": "Address review suggestions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9929630bb7048e5557ac564ff34f35f3ebba1d81", "author": {"user": {"login": "suganyasuven", "name": "Suganya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9929630bb7048e5557ac564ff34f35f3ebba1d81", "committedDate": "2020-10-09T08:06:45Z", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into packerina-tests-fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08d685f768daf39f34615aae684e8d683481e29c", "author": {"user": {"login": "suganyasuven", "name": "Suganya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/08d685f768daf39f34615aae684e8d683481e29c", "committedDate": "2020-10-09T08:13:24Z", "message": "Disable MavenTestCase"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2NDA1NjI4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26145#pullrequestreview-506405628", "createdAt": "2020-10-12T08:33:46Z", "commit": {"oid": "08d685f768daf39f34615aae684e8d683481e29c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwODozMzo0NlrOHf0d_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwODozMzo0NlrOHf0d_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzEyNzU1MQ==", "bodyText": "We can get rid of asserting whether file exists because Files.isDirectory(modulePath) will fail anyway if the file doesn't exist. WDYT?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26145#discussion_r503127551", "createdAt": "2020-10-12T08:33:46Z", "author": {"login": "Dilhasha"}, "path": "tests/jballerina-integration-test/src/test/java/org/ballerinalang/test/packaging/PackagingTestCase.java", "diffHunk": "@@ -236,17 +238,31 @@ public void testPushAllPackages() throws Exception {\n         // Create first module\n         balClient.runMain(\"add\", new String[]{firstPackage}, envVariables, new String[]{}, new LogLeecher[]{},\n                 projectPath.toString());\n-    \n-        Assert.assertTrue(Files.exists(projectPath.resolve(\"src\").resolve(firstPackage)));\n-        Assert.assertTrue(Files.isDirectory(projectPath.resolve(\"src\").resolve(firstPackage)));\n+\n+        Path firstPackagePath = projectPath.resolve(\"src\").resolve(firstPackage);\n+\n+        Assert.assertTrue(Files.exists(firstPackagePath));\n+        Assert.assertTrue(Files.isDirectory(firstPackagePath));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "08d685f768daf39f34615aae684e8d683481e29c"}, "originalPosition": 80}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2NDA1Nzk2", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26145#pullrequestreview-506405796", "createdAt": "2020-10-12T08:33:58Z", "commit": {"oid": "08d685f768daf39f34615aae684e8d683481e29c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwODozMzo1OFrOHf0ejQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwODozMzo1OFrOHf0ejQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzEyNzY5Mw==", "bodyText": "We can get rid of asserting whether file exists because Files.isDirectory(modulePath) will fail anyway if the file doesn't exist. WDYT?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26145#discussion_r503127693", "createdAt": "2020-10-12T08:33:58Z", "author": {"login": "Dilhasha"}, "path": "tests/jballerina-integration-test/src/test/java/org/ballerinalang/test/packaging/PackagingTestCase.java", "diffHunk": "@@ -236,17 +238,31 @@ public void testPushAllPackages() throws Exception {\n         // Create first module\n         balClient.runMain(\"add\", new String[]{firstPackage}, envVariables, new String[]{}, new LogLeecher[]{},\n                 projectPath.toString());\n-    \n-        Assert.assertTrue(Files.exists(projectPath.resolve(\"src\").resolve(firstPackage)));\n-        Assert.assertTrue(Files.isDirectory(projectPath.resolve(\"src\").resolve(firstPackage)));\n+\n+        Path firstPackagePath = projectPath.resolve(\"src\").resolve(firstPackage);\n+\n+        Assert.assertTrue(Files.exists(firstPackagePath));\n+        Assert.assertTrue(Files.isDirectory(firstPackagePath));\n+\n+        PackerinaTestUtils.copy(Paths.get(\"src\", \"test\", \"resources\", \"packaging\", \"pushingModule\", \"main.bal\"),\n+                firstPackagePath.resolve(\"main.bal\"));\n+        PackerinaTestUtils.copy(Paths.get(\"src\", \"test\", \"resources\", \"packaging\", \"pushingModule\", \"main_test.bal\"),\n+                firstPackagePath.resolve(\"tests\").resolve(\"main_test.bal\"));\n     \n         // Create second module\n         balClient.runMain(\"add\", new String[]{secondPackage}, envVariables, new String[]{}, new LogLeecher[]{},\n                 projectPath.toString());\n-    \n-        Assert.assertTrue(Files.exists(projectPath.resolve(\"src\").resolve(secondPackage)));\n-        Assert.assertTrue(Files.isDirectory(projectPath.resolve(\"src\").resolve(secondPackage)));\n-    \n+\n+        Path secondPackagePath = projectPath.resolve(\"src\").resolve(secondPackage);\n+\n+        Assert.assertTrue(Files.exists(secondPackagePath));\n+        Assert.assertTrue(Files.isDirectory(secondPackagePath));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "08d685f768daf39f34615aae684e8d683481e29c"}, "originalPosition": 98}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2NDA1OTM0", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26145#pullrequestreview-506405934", "createdAt": "2020-10-12T08:34:09Z", "commit": {"oid": "08d685f768daf39f34615aae684e8d683481e29c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwODozNDowOVrOHf0fQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwODozNDowOVrOHf0fQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzEyNzg3NQ==", "bodyText": "We can get rid of asserting whether file exists because Files.isDirectory(modulePath) will fail anyway if the file doesn't exist. WDYT?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26145#discussion_r503127875", "createdAt": "2020-10-12T08:34:09Z", "author": {"login": "Dilhasha"}, "path": "tests/jballerina-integration-test/src/test/java/org/ballerinalang/test/packaging/PackagingTestCase.java", "diffHunk": "@@ -286,39 +301,27 @@ public void testBuildAndRunModuleWithPeriod() throws BallerinaTestException {\n         balClient.runMain(\"add\", new String[] { moduleName }, envVariables, new String[] {}, new LogLeecher[] {},\n                 projectPath.toString());\n \n-        Assert.assertTrue(Files.exists(projectPath.resolve(\"src\").resolve(moduleName)));\n-        Assert.assertTrue(Files.isDirectory(projectPath.resolve(\"src\").resolve(moduleName)));\n+        Path modulePath = projectPath.resolve(\"src\").resolve(moduleName);\n+        Assert.assertTrue(Files.exists(modulePath));\n+        Assert.assertTrue(Files.isDirectory(modulePath));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "08d685f768daf39f34615aae684e8d683481e29c"}, "originalPosition": 126}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "487598c51edd3abeed58f868a0b4c1b57bf1bf72", "author": {"user": {"login": "suganyasuven", "name": "Suganya"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/487598c51edd3abeed58f868a0b4c1b57bf1bf72", "committedDate": "2020-10-12T08:40:50Z", "message": "Apply review suggestions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2NDEzOTc2", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26145#pullrequestreview-506413976", "createdAt": "2020-10-12T08:44:23Z", "commit": {"oid": "487598c51edd3abeed58f868a0b4c1b57bf1bf72"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3MDQ3MjY4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26145#pullrequestreview-507047268", "createdAt": "2020-10-13T03:39:11Z", "commit": {"oid": "487598c51edd3abeed58f868a0b4c1b57bf1bf72"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4483, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}