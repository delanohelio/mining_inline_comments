{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY2MjI4NjY0", "number": 25214, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNjozMjo1NFrOEXfT-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNjozMjo1NFrOEXfT-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkzMDY1NzIxOnYy", "diffSide": "RIGHT", "path": "language-server/modules/langserver-core/src/main/java/org/ballerinalang/langserver/completions/providers/context/AssignmentStatementNodeContext.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNjozMjo1NFrOG_Tk5A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMlQwNjozODowOFrOG_Ttdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTAzNDIxMg==", "bodyText": "this local variable seems to be redundant. can we add merge  ifPresent logic in https://github.com/ballerina-platform/ballerina-lang/pull/25214/files#diff-3fef1a396b3d9462c79c38bf09b51ca3R108 into https://github.com/ballerina-platform/ballerina-lang/pull/25214/files#diff-3fef1a396b3d9462c79c38bf09b51ca3R103. And else block can be safely removed. WDYT?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25214#discussion_r469034212", "createdAt": "2020-08-12T06:32:54Z", "author": {"login": "rasika"}, "path": "language-server/modules/langserver-core/src/main/java/org/ballerinalang/langserver/completions/providers/context/AssignmentStatementNodeContext.java", "diffHunk": "@@ -41,13 +57,57 @@ public AssignmentStatementNodeContext() {\n     public List<LSCompletionItem> getCompletions(LSContext context, AssignmentStatementNode node)\n             throws LSCompletionException {\n         List<LSCompletionItem> completionItems = new ArrayList<>();\n-        completionItems.addAll(this.actionKWCompletions(context));\n-        completionItems.addAll(this.expressionCompletions(context));\n+        if (this.onQualifiedNameIdentifier(context, node.expression())) {\n+            /*\n+            Captures the following cases\n+            (1) [module:]TypeName c = module:<cursor>\n+            (2) [module:]TypeName c = module:a<cursor>\n+             */\n+            QualifiedNameReferenceNode qNameRef = (QualifiedNameReferenceNode) node.expression();\n+            Predicate<Scope.ScopeEntry> filter = scopeEntry -> {\n+                BSymbol symbol = scopeEntry.symbol;\n+                return symbol instanceof BVarSymbol && (symbol.flags & Flags.PUBLIC) == Flags.PUBLIC;\n+            };\n+            List<Scope.ScopeEntry> moduleContent = QNameReferenceUtil.getModuleContent(context, qNameRef, filter);\n+            completionItems.addAll(this.getCompletionItemList(moduleContent, context));\n+        } else {\n+            /*\n+            Captures the following cases\n+            (1) [module:]TypeName c = <cursor>\n+            (2) [module:]TypeName c = a<cursor>\n+             */\n+            completionItems.addAll(this.actionKWCompletions(context));\n+            completionItems.addAll(this.expressionCompletions(context));\n+            completionItems.addAll(this.getNewExprCompletionItems(context, node));\n+            completionItems.add(new SnippetCompletionItem(context, Snippet.KW_IS.get()));\n+        }\n         return completionItems;\n     }\n \n     @Override\n     public boolean onPreValidation(AssignmentStatementNode node) {\n         return !node.equalsToken().isMissing();\n     }\n+\n+    private List<LSCompletionItem> getNewExprCompletionItems(LSContext context, AssignmentStatementNode node) {\n+        List<LSCompletionItem> completionItems = new ArrayList<>();\n+        ArrayList<Scope.ScopeEntry> visibleSymbols = new ArrayList<>(context.get(CommonKeys.VISIBLE_SYMBOLS_KEY));\n+        Optional<BObjectTypeSymbol> objectType;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c5484042051875542992ec1c561dc1cd734f6174"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTAzNjQwNg==", "bodyText": "+1\nSending this in next commit.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25214#discussion_r469036406", "createdAt": "2020-08-12T06:38:08Z", "author": {"login": "nadeeshaan"}, "path": "language-server/modules/langserver-core/src/main/java/org/ballerinalang/langserver/completions/providers/context/AssignmentStatementNodeContext.java", "diffHunk": "@@ -41,13 +57,57 @@ public AssignmentStatementNodeContext() {\n     public List<LSCompletionItem> getCompletions(LSContext context, AssignmentStatementNode node)\n             throws LSCompletionException {\n         List<LSCompletionItem> completionItems = new ArrayList<>();\n-        completionItems.addAll(this.actionKWCompletions(context));\n-        completionItems.addAll(this.expressionCompletions(context));\n+        if (this.onQualifiedNameIdentifier(context, node.expression())) {\n+            /*\n+            Captures the following cases\n+            (1) [module:]TypeName c = module:<cursor>\n+            (2) [module:]TypeName c = module:a<cursor>\n+             */\n+            QualifiedNameReferenceNode qNameRef = (QualifiedNameReferenceNode) node.expression();\n+            Predicate<Scope.ScopeEntry> filter = scopeEntry -> {\n+                BSymbol symbol = scopeEntry.symbol;\n+                return symbol instanceof BVarSymbol && (symbol.flags & Flags.PUBLIC) == Flags.PUBLIC;\n+            };\n+            List<Scope.ScopeEntry> moduleContent = QNameReferenceUtil.getModuleContent(context, qNameRef, filter);\n+            completionItems.addAll(this.getCompletionItemList(moduleContent, context));\n+        } else {\n+            /*\n+            Captures the following cases\n+            (1) [module:]TypeName c = <cursor>\n+            (2) [module:]TypeName c = a<cursor>\n+             */\n+            completionItems.addAll(this.actionKWCompletions(context));\n+            completionItems.addAll(this.expressionCompletions(context));\n+            completionItems.addAll(this.getNewExprCompletionItems(context, node));\n+            completionItems.add(new SnippetCompletionItem(context, Snippet.KW_IS.get()));\n+        }\n         return completionItems;\n     }\n \n     @Override\n     public boolean onPreValidation(AssignmentStatementNode node) {\n         return !node.equalsToken().isMissing();\n     }\n+\n+    private List<LSCompletionItem> getNewExprCompletionItems(LSContext context, AssignmentStatementNode node) {\n+        List<LSCompletionItem> completionItems = new ArrayList<>();\n+        ArrayList<Scope.ScopeEntry> visibleSymbols = new ArrayList<>(context.get(CommonKeys.VISIBLE_SYMBOLS_KEY));\n+        Optional<BObjectTypeSymbol> objectType;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTAzNDIxMg=="}, "originalCommit": {"oid": "c5484042051875542992ec1c561dc1cd734f6174"}, "originalPosition": 72}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 367, "cost": 1, "resetAt": "2021-11-12T11:57:46Z"}}}