{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk4MTU2MjY3", "number": 22458, "title": "Add compound assignment statement support", "bodyText": "Purpose\nAdd compound assignment statement support.\nFixes #22338\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-04-03T12:53:35Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22458", "merged": true, "mergeCommit": {"oid": "1c99f702154912eefb5520e373aca22b8844ba9d"}, "closed": true, "closedAt": "2020-04-08T07:18:19Z", "author": {"login": "m36dot"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcTXKy1gH2gAyMzk4MTU2MjY3Ojg0YWVkYzFkOTFjNzBmMDA5MGYzY2M0MmE5M2MyYzc0MGU4N2MxNWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVinL-AFqTM4OTcwOTg5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "84aedc1d91c70f0090f3cc42a93c2c740e87c15c", "author": {"user": {"login": "m36dot", "name": "Saif Abdul Cassim"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/84aedc1d91c70f0090f3cc42a93c2c740e87c15c", "committedDate": "2020-04-01T12:50:15Z", "message": "Add compoundAssignmentStatement"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a89a927d50c2ecb583128d1eb0d779bf6a5dd19", "author": {"user": {"login": "m36dot", "name": "Saif Abdul Cassim"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5a89a927d50c2ecb583128d1eb0d779bf6a5dd19", "committedDate": "2020-04-01T12:51:34Z", "message": "Add public tree node for compoundAssignmentStatement"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a93fb6ec4121b5acec321024afafc35085f95faf", "author": {"user": {"login": "m36dot", "name": "Saif Abdul Cassim"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a93fb6ec4121b5acec321024afafc35085f95faf", "committedDate": "2020-04-02T09:33:55Z", "message": "Add new binary operator method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3e94fdd1fc6f9e201f5cce2286dd2a477fc9525", "author": {"user": {"login": "m36dot", "name": "Saif Abdul Cassim"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b3e94fdd1fc6f9e201f5cce2286dd2a477fc9525", "committedDate": "2020-04-02T12:21:44Z", "message": "Add recovery logic for compound assignment statement"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "043481e77847feb75b7c7f667b01871e447332a0", "author": {"user": {"login": "m36dot", "name": "Saif Abdul Cassim"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/043481e77847feb75b7c7f667b01871e447332a0", "committedDate": "2020-04-02T12:24:56Z", "message": "Fix checkstyle failures"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c0b85b0643be3148a2ca2f00afad3525d06ce12", "author": {"user": {"login": "m36dot", "name": "Saif Abdul Cassim"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0c0b85b0643be3148a2ca2f00afad3525d06ce12", "committedDate": "2020-04-02T13:12:15Z", "message": "Fix binary operator checker"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d52665be2ca83563469aae9364068fa486fd438", "author": {"user": {"login": "m36dot", "name": "Saif Abdul Cassim"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2d52665be2ca83563469aae9364068fa486fd438", "committedDate": "2020-04-03T09:06:34Z", "message": "Fix syntaxkind typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "721b9be21e544e87e4fe707df604f824ad8a9a48", "author": {"user": {"login": "m36dot", "name": "Saif Abdul Cassim"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/721b9be21e544e87e4fe707df604f824ad8a9a48", "committedDate": "2020-04-03T10:12:25Z", "message": "declared compound-assignment-operator as non-terminal"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "acf2319db85e113e571967b3de5b81c3675c7951", "author": {"user": {"login": "m36dot", "name": "Saif Abdul Cassim"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/acf2319db85e113e571967b3de5b81c3675c7951", "committedDate": "2020-04-03T10:13:35Z", "message": "Add compound assignment operator and statement"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd0054de4d8f16427e6fe96cd87f836f9ac0d248", "author": {"user": {"login": "m36dot", "name": "Saif Abdul Cassim"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/dd0054de4d8f16427e6fe96cd87f836f9ac0d248", "committedDate": "2020-04-03T11:59:04Z", "message": "Fix comund assignment statement for all lvlexp"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66614daaeb838a58496f10b659e85328e7c29485", "author": {"user": {"login": "m36dot", "name": "Saif Abdul Cassim"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/66614daaeb838a58496f10b659e85328e7c29485", "committedDate": "2020-04-03T12:09:30Z", "message": "Add compound assignment statement tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5984f4de24a7b4b63a709ab8b6a22b7445a709a6", "author": {"user": {"login": "m36dot", "name": "Saif Abdul Cassim"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5984f4de24a7b4b63a709ab8b6a22b7445a709a6", "committedDate": "2020-04-03T12:44:42Z", "message": "Fix merge conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dad18e8b0dc6dc730229729e40ca1e16e1989f58", "author": {"user": {"login": "m36dot", "name": "Saif Abdul Cassim"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/dad18e8b0dc6dc730229729e40ca1e16e1989f58", "committedDate": "2020-04-03T12:51:21Z", "message": "Rebase code for new style"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg3MjQ4Mzk4", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22458#pullrequestreview-387248398", "createdAt": "2020-04-03T13:20:47Z", "commit": {"oid": "dad18e8b0dc6dc730229729e40ca1e16e1989f58"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMzoyMDo0OFrOGAVKJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxMzozNzowOFrOGAVzCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjk5OTg0Nw==", "bodyText": "Parameters can have only assignment-op", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22458#discussion_r402999847", "createdAt": "2020-04-03T13:20:48Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParserErrorHandler.java", "diffHunk": "@@ -1578,19 +1587,19 @@ private ParserRuleContext getNextRuleForVarName(int nextLookahead) {\n                 // Currently processing a required param, but now switch\n                 // to a defaultable param\n                 switchContext(ParserRuleContext.DEFAULTABLE_PARAM);\n-                return ParserRuleContext.ASSIGN_OP;\n+                return compoundOrNot(nextToken);\n             }\n         } else if (parentCtx == ParserRuleContext.DEFAULTABLE_PARAM) {\n             if (isEndOfParametersList(nextToken)) {\n                 return ParserRuleContext.CLOSE_PARENTHESIS;\n             } else {\n-                return ParserRuleContext.ASSIGN_OP;\n+                return compoundOrNot(nextToken);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dad18e8b0dc6dc730229729e40ca1e16e1989f58"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzAwMTEyNw==", "bodyText": "Once we fix the above comment, this method will be used at only one place.\nSo we can write this logic then and there", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22458#discussion_r403001127", "createdAt": "2020-04-03T13:22:55Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParserErrorHandler.java", "diffHunk": "@@ -1603,6 +1612,33 @@ private ParserRuleContext getNextRuleForVarName(int nextLookahead) {\n         }\n     }\n \n+    /**\n+     * Check whether the given token kind is a compound binary operator.\n+     * \n+     * @param kind STToken kind\n+     * @return <code>true</code> if the token kind refers to a binary operator. <code>false</code> otherwise\n+     */\n+    private boolean isCompoundBinaryOperator(SyntaxKind kind) {\n+        switch (kind) {\n+            case PLUS_TOKEN:\n+            case MINUS_TOKEN:\n+            case SLASH_TOKEN:\n+            case ASTERISK_TOKEN:\n+                return true;\n+            default:\n+                return false;\n+        }\n+    }\n+\n+    //return whether we choose a assignment op or a compund binary one\n+    private ParserRuleContext compoundOrNot(STToken token) {\n+        if (isCompoundBinaryOperator(token.kind)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dad18e8b0dc6dc730229729e40ca1e16e1989f58"}, "originalPosition": 95}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzAwNTQ3Mg==", "bodyText": "should be /**", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22458#discussion_r403005472", "createdAt": "2020-04-03T13:29:20Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java", "diffHunk": "@@ -3782,7 +3806,7 @@ private STNode parseStringLiteral() {\n         }\n     }\n \n-    /**\n+    /*", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dad18e8b0dc6dc730229729e40ca1e16e1989f58"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzAwNjg2OA==", "bodyText": "unwanted comment?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22458#discussion_r403006868", "createdAt": "2020-04-03T13:31:34Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParserErrorHandler.java", "diffHunk": "@@ -1160,6 +1163,8 @@ private ParserRuleContext getNextRule(ParserRuleContext currentCtx, int nextLook\n             case IMPORT_DECL:\n             case RETURN_STMT:\n             case COMPUTED_FIELD_NAME:\n+            case COMPOUND_ASSIGNMENT_STMT:\n+                // case EXPRESSION:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dad18e8b0dc6dc730229729e40ca1e16e1989f58"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzAwODM4OQ==", "bodyText": "Seems this is not used?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22458#discussion_r403008389", "createdAt": "2020-04-03T13:34:00Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParserErrorHandler.java", "diffHunk": "@@ -164,6 +164,9 @@\n     private static final ParserRuleContext[] SPECIFIC_FIELD_RHS =\n             { ParserRuleContext.COLON, ParserRuleContext.COMMA, ParserRuleContext.CLOSE_PARENTHESIS };\n \n+    private static final ParserRuleContext[] COMPOUND_ASSIGNMENT_STATEMENT =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dad18e8b0dc6dc730229729e40ca1e16e1989f58"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzAxMDMxNA==", "bodyText": "Do we need this node? Can the two fields private Token binaryOperator and private Token equalsToken  be embedded to the CompoundAssignmentStatement node itself?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22458#discussion_r403010314", "createdAt": "2020-04-03T13:37:08Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/syntax/tree/CompoundAssignmentOperator.java", "diffHunk": "@@ -0,0 +1,47 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ *  in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing,\n+ *  software distributed under the License is distributed on an\n+ *  \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ *  KIND, either express or implied.  See the License for the\n+ *  specific language governing permissions and limitations\n+ *  under the License.\n+ */\n+package io.ballerinalang.compiler.syntax.tree;\n+\n+import io.ballerinalang.compiler.internal.parser.tree.STNode;\n+\n+public class CompoundAssignmentOperator extends Statement {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dad18e8b0dc6dc730229729e40ca1e16e1989f58"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5cb8b047d1fbe90b07e0838db12d1b209542958e", "author": {"user": {"login": "m36dot", "name": "Saif Abdul Cassim"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5cb8b047d1fbe90b07e0838db12d1b209542958e", "committedDate": "2020-04-06T06:58:16Z", "message": "reformatted code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a822b8c43e5c68f4526bee517d7ca0c4a772cd6e", "author": {"user": {"login": "m36dot", "name": "Saif Abdul Cassim"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a822b8c43e5c68f4526bee517d7ca0c4a772cd6e", "committedDate": "2020-04-06T07:27:25Z", "message": "fix merge conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8748ef8663b54f8cf3461b02e80c2197e24133a0", "author": {"user": {"login": "m36dot", "name": "Saif Abdul Cassim"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8748ef8663b54f8cf3461b02e80c2197e24133a0", "committedDate": "2020-04-06T08:04:36Z", "message": "Merge compoundAssignmentOperator into compoundAssignmentStatement"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dbb5c3dddf08d7563d860708c0e23599010ac3ff", "author": {"user": {"login": "m36dot", "name": "Saif Abdul Cassim"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/dbb5c3dddf08d7563d860708c0e23599010ac3ff", "committedDate": "2020-04-08T06:18:27Z", "message": "Merge branch 'incremental-parser' of https://github.com/ballerina-platform/ballerina-lang into incremental-parser"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5NzA5ODk2", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22458#pullrequestreview-389709896", "createdAt": "2020-04-08T07:18:04Z", "commit": {"oid": "dbb5c3dddf08d7563d860708c0e23599010ac3ff"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4164, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}