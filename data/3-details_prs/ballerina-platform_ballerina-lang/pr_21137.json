{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2NTI0ODU2", "number": 21137, "title": "Fix duplicate declarations in ballerina tests", "bodyText": "Purpose\n\nBy applying this fix, the compiler will give a compiler error when there is a symbol duplication in the test files compared to the source files\n\nFixes #20963\nFixes #20694\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-02-18T10:07:07Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21137", "merged": true, "mergeCommit": {"oid": "9f4398642d2fc328f077da1d35964b03a9f0018f"}, "closed": true, "closedAt": "2020-02-27T09:18:51Z", "author": {"login": "dulvinw"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcGFZpbAFqTM2MTY2NDQ2NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIXvz_gFqTM2NTUxODc4Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNjY0NDY1", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21137#pullrequestreview-361664465", "createdAt": "2020-02-20T06:47:10Z", "commit": {"oid": "425af6fda420edf31d7a2cda0fb332e626269651"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwNjo0NzoxMFrOFsHxrQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwNjo0NzoxMFrOFsHxrQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgwOTA2OQ==", "bodyText": "Remove this change.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21137#discussion_r381809069", "createdAt": "2020-02-20T06:47:10Z", "author": {"login": "dulvinw"}, "path": "compiler/ballerina-lang/src/main/java/org/ballerinalang/util/diagnostic/DiagnosticCode.java", "diffHunk": "@@ -37,6 +37,7 @@\n     UNDEFINED_SYMBOL(\"undefined.symbol\"),\n     UNDEFINED_FUNCTION(\"undefined.function\"),\n     UNDEFINED_FUNCTION_IN_OBJECT(\"undefined.function.in.object\"),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "425af6fda420edf31d7a2cda0fb332e626269651"}, "originalPosition": 3}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "425af6fda420edf31d7a2cda0fb332e626269651", "author": {"user": {"login": "dulvinw", "name": "Dulvin Witharane"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/425af6fda420edf31d7a2cda0fb332e626269651", "committedDate": "2020-02-20T05:22:01Z", "message": "fix duplicate function name in test, in a test"}, "afterCommit": {"oid": "96aacdb321a8d1139ddcf3228494805182cbb9f3", "author": {"user": {"login": "dulvinw", "name": "Dulvin Witharane"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/96aacdb321a8d1139ddcf3228494805182cbb9f3", "committedDate": "2020-02-18T10:04:49Z", "message": "Fix duplicate declarations in ballerina tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "96aacdb321a8d1139ddcf3228494805182cbb9f3", "author": {"user": {"login": "dulvinw", "name": "Dulvin Witharane"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/96aacdb321a8d1139ddcf3228494805182cbb9f3", "committedDate": "2020-02-18T10:04:49Z", "message": "Fix duplicate declarations in ballerina tests"}, "afterCommit": {"oid": "79ea632f533c8a444eb7eafd9f2e4e5ef52b3f35", "author": {"user": {"login": "dulvinw", "name": "Dulvin Witharane"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/79ea632f533c8a444eb7eafd9f2e4e5ef52b3f35", "committedDate": "2020-02-21T06:42:09Z", "message": "Fix duplicate declarations in ballerina tests\n\nadd Javadoc for test and revert unwanted code"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "79ea632f533c8a444eb7eafd9f2e4e5ef52b3f35", "author": {"user": {"login": "dulvinw", "name": "Dulvin Witharane"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/79ea632f533c8a444eb7eafd9f2e4e5ef52b3f35", "committedDate": "2020-02-21T06:42:09Z", "message": "Fix duplicate declarations in ballerina tests\n\nadd Javadoc for test and revert unwanted code"}, "afterCommit": {"oid": "646b326d2d158f4096c2722ac8f12781eab9ff39", "author": {"user": {"login": "dulvinw", "name": "Dulvin Witharane"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/646b326d2d158f4096c2722ac8f12781eab9ff39", "committedDate": "2020-02-21T08:46:44Z", "message": "Fix duplicate declarations in ballerina tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYzMzMwMDM0", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21137#pullrequestreview-363330034", "createdAt": "2020-02-24T11:41:54Z", "commit": {"oid": "646b326d2d158f4096c2722ac8f12781eab9ff39"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxMTo0MTo1NVrOFtdyRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxMTo0MTo1NVrOFtdyRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzIxODI0NQ==", "bodyText": "Shall we rename this? It is not  isDependentTestPackage, rather it validates, whether found symbol defined in the parent package. Shall we say isRedeclaredInParentModule ?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21137#discussion_r383218245", "createdAt": "2020-02-24T11:41:55Z", "author": {"login": "hasithaa"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/semantics/analyzer/SymbolResolver.java", "diffHunk": "@@ -258,6 +262,14 @@ private boolean hasSameOwner(BSymbol symbol, BSymbol foundSym) {\n                 ((foundSym.owner.tag & SymTag.INVOKABLE) == SymTag.INVOKABLE);\n     }\n \n+    private boolean isDependentTestPackage(BSymbol symbol, BSymbol foundSym) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "646b326d2d158f4096c2722ac8f12781eab9ff39"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a403ddc480940adda08c7ecd9c0fff769c1fefe5", "author": {"user": {"login": "dulvinw", "name": "Dulvin Witharane"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a403ddc480940adda08c7ecd9c0fff769c1fefe5", "committedDate": "2020-02-25T11:17:03Z", "message": "Fix duplicate declarations in ballerina tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "646b326d2d158f4096c2722ac8f12781eab9ff39", "author": {"user": {"login": "dulvinw", "name": "Dulvin Witharane"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/646b326d2d158f4096c2722ac8f12781eab9ff39", "committedDate": "2020-02-21T08:46:44Z", "message": "Fix duplicate declarations in ballerina tests"}, "afterCommit": {"oid": "a403ddc480940adda08c7ecd9c0fff769c1fefe5", "author": {"user": {"login": "dulvinw", "name": "Dulvin Witharane"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a403ddc480940adda08c7ecd9c0fff769c1fefe5", "committedDate": "2020-02-25T11:17:03Z", "message": "Fix duplicate declarations in ballerina tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0NjUxNjU3", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21137#pullrequestreview-364651657", "createdAt": "2020-02-26T06:39:30Z", "commit": {"oid": "a403ddc480940adda08c7ecd9c0fff769c1fefe5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwNjozOTozMFrOFufuBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwNjozOTozMFrOFufuBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI5ODUwMg==", "bodyText": "Do we need the check for the found symbol? hasSameOwner being false would imply it's not from the same (testable) package?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21137#discussion_r384298502", "createdAt": "2020-02-26T06:39:30Z", "author": {"login": "MaryamZi"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/semantics/analyzer/SymbolResolver.java", "diffHunk": "@@ -258,6 +262,14 @@ private boolean hasSameOwner(BSymbol symbol, BSymbol foundSym) {\n                 ((foundSym.owner.tag & SymTag.INVOKABLE) == SymTag.INVOKABLE);\n     }\n \n+    private boolean isSymbolRedeclaredInTestPackage(BSymbol symbol, BSymbol foundSym) {\n+        if (Symbols.isFlagOn(symbol.owner.flags, Flags.TESTABLE) &&\n+                !Symbols.isFlagOn(foundSym.owner.flags, Flags.TESTABLE)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a403ddc480940adda08c7ecd9c0fff769c1fefe5"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1NTE4Nzg2", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21137#pullrequestreview-365518786", "createdAt": "2020-02-27T09:17:31Z", "commit": {"oid": "a403ddc480940adda08c7ecd9c0fff769c1fefe5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4122, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}