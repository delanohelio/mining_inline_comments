{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4MDYyNTI4", "number": 26216, "title": "Map internal symbol flags to qualifiers in public symbol API", "bodyText": "Purpose\nThis PR exposes some of the flags in the internal symbol as qualifiers in the public symbol API.\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-10-05T19:18:15Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26216", "merged": true, "mergeCommit": {"oid": "4a943792ce4e9a4f79e6411e105714b66f1e4fe6"}, "closed": true, "closedAt": "2020-10-12T08:42:27Z", "author": {"login": "pubudu91"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdPpfJvABqjM4NDIyMjEyNTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdRv43gAFqTUwNjQxMTg0Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1b98977235e17ef56fb5389d5bff5a58ccb14827", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1b98977235e17ef56fb5389d5bff5a58ccb14827", "committedDate": "2020-10-05T18:39:22Z", "message": "Add test cases for symbol flags to qualifiers mapping"}, "afterCommit": {"oid": "7464d1ec16c2f0e64d40f468d5cba9b6c7537a30", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7464d1ec16c2f0e64d40f468d5cba9b6c7537a30", "committedDate": "2020-10-05T20:05:38Z", "message": "Add test cases for symbol flags to qualifiers mapping"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7464d1ec16c2f0e64d40f468d5cba9b6c7537a30", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7464d1ec16c2f0e64d40f468d5cba9b6c7537a30", "committedDate": "2020-10-05T20:05:38Z", "message": "Add test cases for symbol flags to qualifiers mapping"}, "afterCommit": {"oid": "b3a156d2b7f4e580bda67e2bd9f5906953bcd636", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b3a156d2b7f4e580bda67e2bd9f5906953bcd636", "committedDate": "2020-10-05T20:17:57Z", "message": "Add test cases for symbol flags to qualifiers mapping"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNTQ4Mzc3", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26216#pullrequestreview-502548377", "createdAt": "2020-10-06T02:50:48Z", "commit": {"oid": "9b26d2d8d344fcec1bb5f3ccd879a1ce621184fb"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNzk5OTI2", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26216#pullrequestreview-502799926", "createdAt": "2020-10-06T10:32:04Z", "commit": {"oid": "48a5e10bf282e039edf2b6407d2ae9b79e2b32a9"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxMDozMjowNFrOHdABKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxMDo0NzozOVrOHdAgWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE3MTA0OQ==", "bodyText": "Won't this result in some incorrect line-numbers for service declarations?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26216#discussion_r500171049", "createdAt": "2020-10-06T10:32:04Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/parser/BLangNodeTransformer.java", "diffHunk": "@@ -1095,7 +1095,7 @@ private BLangNode createService(Node serviceNode, IdentifierToken serviceNameNod\n         // 1) Define type nodeDefinition for service type.\n         BLangClassDefinition classDef = (BLangClassDefinition) TreeBuilder.createClassDefNode();\n         BLangIdentifier serviceTypeID = createIdentifier(identifierPos, serviceTypeName);\n-        serviceTypeID.pos = pos;\n+        serviceTypeID.pos = symTable.builtinPos;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48a5e10bf282e039edf2b6407d2ae9b79e2b32a9"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE3MTU4Mg==", "bodyText": "Should this be sentence-case?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26216#discussion_r500171582", "createdAt": "2020-10-06T10:33:06Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-compiler-api/src/main/java/io/ballerina/compiler/api/symbols/FunctionSymbol.java", "diffHunk": "@@ -19,27 +19,26 @@\n \n import io.ballerina.compiler.api.types.BallerinaTypeDescriptor;\n \n-import java.util.List;\n import java.util.Optional;\n \n /**\n  * Represent Function Symbol.\n  *\n  * @since 2.0.0\n  */\n-public interface FunctionSymbol extends Symbol {\n+public interface FunctionSymbol extends Symbol, Qualifiable, Deprecatable {\n \n     /**\n-     * Get the list of qualifiers.\n+     * Get the Function Type Descriptor.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48a5e10bf282e039edf2b6407d2ae9b79e2b32a9"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE3MjYyOA==", "bodyText": "Can the type-desc be null?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26216#discussion_r500172628", "createdAt": "2020-10-06T10:35:08Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-compiler-api/src/main/java/io/ballerina/compiler/api/symbols/FunctionSymbol.java", "diffHunk": "@@ -19,27 +19,26 @@\n \n import io.ballerina.compiler.api.types.BallerinaTypeDescriptor;\n \n-import java.util.List;\n import java.util.Optional;\n \n /**\n  * Represent Function Symbol.\n  *\n  * @since 2.0.0\n  */\n-public interface FunctionSymbol extends Symbol {\n+public interface FunctionSymbol extends Symbol, Qualifiable, Deprecatable {\n \n     /**\n-     * Get the list of qualifiers.\n+     * Get the Function Type Descriptor.\n      *\n-     * @return {@link List} of qualifiers\n+     * @return {@link BallerinaTypeDescriptor}\n      */\n-    List<Qualifier> qualifiers();\n+    Optional<BallerinaTypeDescriptor> typeDescriptor();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48a5e10bf282e039edf2b6407d2ae9b79e2b32a9"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDE3OTAzNQ==", "bodyText": "IIUC only the worker-symbol (may be not?) and xmlns-symbol doesn't have any qualifiers?\nSo can we move this method to the Symbol interface, and return an empty list for whoever doesn't have any qualifiers?\nThat would simplify the class hierarchy.. and can move this qualifiers in to the abstract BallerinaSymbol class as well in the implementation", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26216#discussion_r500179035", "createdAt": "2020-10-06T10:47:39Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-compiler-api/src/main/java/io/ballerina/compiler/api/symbols/Qualifiable.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package io.ballerina.compiler.api.symbols;\n+\n+import java.util.Set;\n+\n+/**\n+ * An interface for symbols for which qualifiers apply.\n+ *\n+ * @since 2.0.0\n+ */\n+public interface Qualifiable {\n+\n+    /**\n+     * Gets the set of qualifiers the user has applied to a symbol.\n+     *\n+     * @return The set of qualifiers applied to the symbol\n+     */\n+    Set<Qualifier> qualifiers();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "48a5e10bf282e039edf2b6407d2ae9b79e2b32a9"}, "originalPosition": 34}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "48a5e10bf282e039edf2b6407d2ae9b79e2b32a9", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/48a5e10bf282e039edf2b6407d2ae9b79e2b32a9", "committedDate": "2020-10-06T06:54:39Z", "message": "Add tests for flag to symbol kind mapping"}, "afterCommit": {"oid": "ac19085908969f0c5926544ea67658052ccce1f5", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ac19085908969f0c5926544ea67658052ccce1f5", "committedDate": "2020-10-09T09:27:05Z", "message": "Add tests for flag to symbol kind mapping"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "857da93b225091624b2b3dca928cd1020b94d47d", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/857da93b225091624b2b3dca928cd1020b94d47d", "committedDate": "2020-10-11T19:28:28Z", "message": "Modify the service class def skipping logic"}, "afterCommit": {"oid": "d896e51e74ac3335bd9fc83922cf62547dcbb0ce", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d896e51e74ac3335bd9fc83922cf62547dcbb0ce", "committedDate": "2020-10-11T19:30:01Z", "message": "Modify the service class def skipping logic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f5e57ad759f4e787b32f74531f3d5aa291b18340", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f5e57ad759f4e787b32f74531f3d5aa291b18340", "committedDate": "2020-10-12T04:48:17Z", "message": "Add missing qualifiers to symbols"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56af7f3a3eb46aa2414e302494630139a4c3dea7", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/56af7f3a3eb46aa2414e302494630139a4c3dea7", "committedDate": "2020-10-12T04:48:29Z", "message": "Fix type symbol lookup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f218000a8383e278c2b4925fda3180e9e7424b69", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f218000a8383e278c2b4925fda3180e9e7424b69", "committedDate": "2020-10-12T04:48:32Z", "message": "Introduce an interface for symbols which allows qualifiers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "002854719c6a25b979f0e261feb4b7ae5915d5e0", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/002854719c6a25b979f0e261feb4b7ae5915d5e0", "committedDate": "2020-10-12T04:48:34Z", "message": "Add an API to check if a function is external"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6272fe43288580e890f6cbca913ce3f89f7fa342", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/6272fe43288580e890f6cbca913ce3f89f7fa342", "committedDate": "2020-10-12T04:48:36Z", "message": "Add an API to check if the symbol is deprecated"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1875277d969caa9d18df295b2ba5f2766e61029", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c1875277d969caa9d18df295b2ba5f2766e61029", "committedDate": "2020-10-12T04:48:37Z", "message": "Add readonly() API to type symbol"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c900fdcfd067c1c2fbb5f54afb9a19e9576541cd", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c900fdcfd067c1c2fbb5f54afb9a19e9576541cd", "committedDate": "2020-10-12T04:48:38Z", "message": "Add test cases for symbol flags to qualifiers mapping"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1404e94f7cbc1f359ae6249b1988afac5c6dc71a", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1404e94f7cbc1f359ae6249b1988afac5c6dc71a", "committedDate": "2020-10-12T04:48:38Z", "message": "Fix position of implicit return type node"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43d34cd9bbe9ff05aa6cbcc3b9071a6d065bcd85", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/43d34cd9bbe9ff05aa6cbcc3b9071a6d065bcd85", "committedDate": "2020-10-12T04:48:39Z", "message": "Add service symbols to the symbol API"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88ad3edbde17ebb72904d725e487ce2c0df46029", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/88ad3edbde17ebb72904d725e487ce2c0df46029", "committedDate": "2020-10-12T04:48:39Z", "message": "Add tests for flag to symbol kind mapping"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f12d9a9cd8d57a0a5927e0cacc9c1f96fcc9bf6d", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f12d9a9cd8d57a0a5927e0cacc9c1f96fcc9bf6d", "committedDate": "2020-10-12T04:48:41Z", "message": "Modify the service class def skipping logic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e2847b0191a3f1860dd630ca5cc90bba6e16730", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9e2847b0191a3f1860dd630ca5cc90bba6e16730", "committedDate": "2020-10-12T04:54:53Z", "message": "Move Deprecatable and Qualifiable to ballerina-lang"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d896e51e74ac3335bd9fc83922cf62547dcbb0ce", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d896e51e74ac3335bd9fc83922cf62547dcbb0ce", "committedDate": "2020-10-11T19:30:01Z", "message": "Modify the service class def skipping logic"}, "afterCommit": {"oid": "9e2847b0191a3f1860dd630ca5cc90bba6e16730", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9e2847b0191a3f1860dd630ca5cc90bba6e16730", "committedDate": "2020-10-12T04:54:53Z", "message": "Move Deprecatable and Qualifiable to ballerina-lang"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2MjkyNjI5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26216#pullrequestreview-506292629", "createdAt": "2020-10-12T04:59:55Z", "commit": {"oid": "9e2847b0191a3f1860dd630ca5cc90bba6e16730"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68ffacb0d6abd220fdb7976aad638758633fe065", "author": {"user": {"login": "pubudu91", "name": "Pubudu Fernando"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/68ffacb0d6abd220fdb7976aad638758633fe065", "committedDate": "2020-10-12T07:19:57Z", "message": "Move symbol mapping test to new test module"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2NDExODQ3", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26216#pullrequestreview-506411847", "createdAt": "2020-10-12T08:41:36Z", "commit": {"oid": "68ffacb0d6abd220fdb7976aad638758633fe065"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4533, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}