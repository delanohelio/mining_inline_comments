{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAwNDY0Mzgy", "number": 26293, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxMDoyODozN1rOEr_fOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxMDo0NjowN1rOEr_zeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0NTY0NDExOnYy", "diffSide": "RIGHT", "path": "compiler/ballerina-lang/src/main/java/io/ballerina/build/ModuleCompilation.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxMDoyODozN1rOHfEJlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxMDozNTozOVrOHfEWAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjMzNTg5NQ==", "bodyText": "moduleContext hides the class level field defined in L41. Can we use other name for this?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26293#discussion_r502335895", "createdAt": "2020-10-09T10:28:37Z", "author": {"login": "pramodya1994"}, "path": "compiler/ballerina-lang/src/main/java/io/ballerina/build/ModuleCompilation.java", "diffHunk": "@@ -66,9 +66,21 @@\n         return new DependencyGraph<>(dependencyIdMap);\n     }\n \n-    void addModuleDependencies(ModuleId moduleId, Map<ModuleId, Set<ModuleId>> dependencyIdMap) {\n+    private void addModuleDependencies(ModuleId moduleId, Map<ModuleId, Set<ModuleId>> dependencyIdMap) {\n         Package pkg = packageResolver.getPackage(moduleId.packageId());\n         Collection<ModuleId> directDependencies = pkg.moduleDependencyGraph().getDirectDependencies(moduleId);\n+\n+        ModuleContext moduleContext = pkg.packageContext().moduleContext(moduleId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b0ebc6185a51aa808d112e1649e9a94ac2cb534a"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjMzOTA3Mg==", "bodyText": "I was on it.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26293#discussion_r502339072", "createdAt": "2020-10-09T10:35:39Z", "author": {"login": "Kishanthan"}, "path": "compiler/ballerina-lang/src/main/java/io/ballerina/build/ModuleCompilation.java", "diffHunk": "@@ -66,9 +66,21 @@\n         return new DependencyGraph<>(dependencyIdMap);\n     }\n \n-    void addModuleDependencies(ModuleId moduleId, Map<ModuleId, Set<ModuleId>> dependencyIdMap) {\n+    private void addModuleDependencies(ModuleId moduleId, Map<ModuleId, Set<ModuleId>> dependencyIdMap) {\n         Package pkg = packageResolver.getPackage(moduleId.packageId());\n         Collection<ModuleId> directDependencies = pkg.moduleDependencyGraph().getDirectDependencies(moduleId);\n+\n+        ModuleContext moduleContext = pkg.packageContext().moduleContext(moduleId);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjMzNTg5NQ=="}, "originalCommit": {"oid": "b0ebc6185a51aa808d112e1649e9a94ac2cb534a"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0NTY5NTk0OnYy", "diffSide": "RIGHT", "path": "project-api/ballerina-projects/src/main/java/io/ballerina/projects/env/CustomPackageResolver.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxMDo0NjowN1rOHfEp0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxMzoxNjozNlrOHfJQzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjM0NDE0NA==", "bodyText": "@sameerajayasoma , using currentPkg.packageId() seems to be a bug here which was the issue for package dependencies becoming empty (which we saw during the debug session)", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26293#discussion_r502344144", "createdAt": "2020-10-09T10:46:07Z", "author": {"login": "Kishanthan"}, "path": "project-api/ballerina-projects/src/main/java/io/ballerina/projects/env/CustomPackageResolver.java", "diffHunk": "@@ -65,7 +65,8 @@ public CustomPackageResolver(Project project) {\n                 // TODO load the module from the custom_project_dir\n                 module = loadFromCustomProjectDir(modLoadRequest);\n             }\n-            modLoadResponses.add(new ModuleLoadResponse(currentPkg.packageId(), module.moduleId(), modLoadRequest));\n+            modLoadResponses.add(new ModuleLoadResponse(module.packageInstance().packageId(), module.moduleId(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "daad2e90982019a66eb86e841f2f1c0d759719bb"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjM4MjE3Mg==", "bodyText": "I think we should get packageName from the Ballerina.toml file. At some places, we are taking the project directory name as the default package name. I think this creates errors.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26293#discussion_r502382172", "createdAt": "2020-10-09T12:08:15Z", "author": {"login": "pramodya1994"}, "path": "project-api/ballerina-projects/src/main/java/io/ballerina/projects/env/CustomPackageResolver.java", "diffHunk": "@@ -65,7 +65,8 @@ public CustomPackageResolver(Project project) {\n                 // TODO load the module from the custom_project_dir\n                 module = loadFromCustomProjectDir(modLoadRequest);\n             }\n-            modLoadResponses.add(new ModuleLoadResponse(currentPkg.packageId(), module.moduleId(), modLoadRequest));\n+            modLoadResponses.add(new ModuleLoadResponse(module.packageInstance().packageId(), module.moduleId(),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjM0NDE0NA=="}, "originalCommit": {"oid": "daad2e90982019a66eb86e841f2f1c0d759719bb"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjQxOTY2MA==", "bodyText": "AFAIR, here we are only considering the PackageId.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26293#discussion_r502419660", "createdAt": "2020-10-09T13:16:36Z", "author": {"login": "sameerajayasoma"}, "path": "project-api/ballerina-projects/src/main/java/io/ballerina/projects/env/CustomPackageResolver.java", "diffHunk": "@@ -65,7 +65,8 @@ public CustomPackageResolver(Project project) {\n                 // TODO load the module from the custom_project_dir\n                 module = loadFromCustomProjectDir(modLoadRequest);\n             }\n-            modLoadResponses.add(new ModuleLoadResponse(currentPkg.packageId(), module.moduleId(), modLoadRequest));\n+            modLoadResponses.add(new ModuleLoadResponse(module.packageInstance().packageId(), module.moduleId(),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjM0NDE0NA=="}, "originalCommit": {"oid": "daad2e90982019a66eb86e841f2f1c0d759719bb"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4908, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}