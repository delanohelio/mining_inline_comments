{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3NTcwOTgx", "number": 21736, "title": "fix xml attribute access not returning error", "bodyText": "Purpose\npublic function main() {\n   xml x = xml `<abc><def>DEF</def><ghi>1</ghi></abc>`;\n   string|error attr = x.k;\n   io:println(attr is error); // print true after this PR\n}\nFixes #21735\nAlso fix multiple xml related issues\nApproach\n\nDescribe how you are implementing the solutions along with the design details.\n\nSamples\n\nProvide high-level details about the samples related to this feature.\n\nRemarks\n\nList any other known issues, related PRs, TODO items, or any other notes related to the PR.\n\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-03-13T03:20:12Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21736", "merged": true, "mergeCommit": {"oid": "3a9a4a69f4a5e8d85c895e31fceedec96177e3cf"}, "closed": true, "closedAt": "2020-03-16T23:00:08Z", "author": {"login": "rdhananjaya"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcNHkTQgH2gAyMzg3NTcwOTgxOjI5NTMzN2M0OWY0M2U3MDllOGNkZDIwZmE3YzkzZDYyMWE0Njg4ZjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOMwNAAH2gAyMzg3NTcwOTgxOjhiY2QxZDgyYjY1YTcwNTc4Y2Y1NjE5YzM5ZGI0NjhlZTFlNDE5Yzg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "295337c49f43e709e8cdd20fa7c93d621a4688f6", "author": {"user": {"login": "rdhananjaya", "name": "Dhananjaya [Danje]"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/295337c49f43e709e8cdd20fa7c93d621a4688f6", "committedDate": "2020-03-13T03:16:05Z", "message": "Return an error if attribute is not found"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0MDQyNDY1", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21736#pullrequestreview-374042465", "createdAt": "2020-03-13T04:20:46Z", "commit": {"oid": "295337c49f43e709e8cdd20fa7c93d621a4688f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QwNDoyMDo0NlrOF13Ozw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xM1QwNDoyMDo0NlrOF13Ozw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjAyMzc1OQ==", "bodyText": "As discussed offline, we would have to consider optional access here right?\nShall we also add some tests?", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21736#discussion_r392023759", "createdAt": "2020-03-13T04:20:46Z", "author": {"login": "MaryamZi"}, "path": "langlib/lang.__internal/src/main/java/org/ballerinalang/langlib/internal/GetAttribute.java", "diffHunk": "@@ -54,6 +54,10 @@ public static Object getAttribute(Strand strand, XMLValue xmlVal, String attrNam\n                     \"Invalid xml attribute access on xml \" + xmlVal.getNodeType().value());\n         }\n         XMLQName qname = new XMLQName(attrName);\n-        return xmlVal.getAttribute(qname.getLocalName(), qname.getUri());\n+        String attrVal = xmlVal.getAttribute(qname.getLocalName(), qname.getUri());\n+        if (attrVal == null) {\n+            return createError(XML_OPERATION_ERROR, \"attribute '\" + attrName + \"' not found\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "295337c49f43e709e8cdd20fa7c93d621a4688f6"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "726949356b79539698681b27095327b46c63c11b", "author": {"user": {"login": "rdhananjaya", "name": "Dhananjaya [Danje]"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/726949356b79539698681b27095327b46c63c11b", "committedDate": "2020-03-13T06:44:08Z", "message": "Improve xml attribute access lax behavior\n\nAnd refactor xml internal functions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14d25afcbb23478cad1a20ae07bc157002fc5181", "author": {"user": {"login": "rdhananjaya", "name": "Dhananjaya [Danje]"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/14d25afcbb23478cad1a20ae07bc157002fc5181", "committedDate": "2020-03-13T08:25:28Z", "message": "Fix checkstyle failure"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9aea0697bf3629149ae3e77fc69a7ea01990f41b", "author": {"user": {"login": "rdhananjaya", "name": "Dhananjaya [Danje]"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9aea0697bf3629149ae3e77fc69a7ea01990f41b", "committedDate": "2020-03-13T08:16:17Z", "message": "Fix checkstyle failure"}, "afterCommit": {"oid": "14d25afcbb23478cad1a20ae07bc157002fc5181", "author": {"user": {"login": "rdhananjaya", "name": "Dhananjaya [Danje]"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/14d25afcbb23478cad1a20ae07bc157002fc5181", "committedDate": "2020-03-13T08:25:28Z", "message": "Fix checkstyle failure"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1cb475669fb56e17a1021d3631515d8282777aca", "author": {"user": {"login": "rdhananjaya", "name": "Dhananjaya [Danje]"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1cb475669fb56e17a1021d3631515d8282777aca", "committedDate": "2020-03-14T10:03:19Z", "message": "Improve type checking of xml step expression"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb7174033d7dfc233d029e2b3cf25cab94850efb", "author": {"user": {"login": "rdhananjaya", "name": "Dhananjaya [Danje]"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bb7174033d7dfc233d029e2b3cf25cab94850efb", "committedDate": "2020-03-16T03:31:43Z", "message": "Improve xml serialization"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0OTA0NTkw", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21736#pullrequestreview-374904590", "createdAt": "2020-03-16T04:21:32Z", "commit": {"oid": "1cb475669fb56e17a1021d3631515d8282777aca"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a44cf7e3e4a992d7e2ae5fc68e74c85894457f3", "author": {"user": {"login": "rdhananjaya", "name": "Dhananjaya [Danje]"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5a44cf7e3e4a992d7e2ae5fc68e74c85894457f3", "committedDate": "2020-03-16T05:08:57Z", "message": "Stop re-declaring xmln prefix to stax writer"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9b35ebeb79e34f4bc0f9211053c017ffbe46f776", "author": {"user": {"login": "rdhananjaya", "name": "Dhananjaya [Danje]"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9b35ebeb79e34f4bc0f9211053c017ffbe46f776", "committedDate": "2020-03-16T03:56:11Z", "message": "Stop re-declaring xmln prefix to stax writer"}, "afterCommit": {"oid": "5a44cf7e3e4a992d7e2ae5fc68e74c85894457f3", "author": {"user": {"login": "rdhananjaya", "name": "Dhananjaya [Danje]"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5a44cf7e3e4a992d7e2ae5fc68e74c85894457f3", "committedDate": "2020-03-16T05:08:57Z", "message": "Stop re-declaring xmln prefix to stax writer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8bcd1d82b65a70578cf5619c39db468ee1e419c8", "author": {"user": {"login": "rdhananjaya", "name": "Dhananjaya [Danje]"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8bcd1d82b65a70578cf5619c39db468ee1e419c8", "committedDate": "2020-03-16T11:52:32Z", "message": "Fix failing test due to namespace changes"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3927, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}