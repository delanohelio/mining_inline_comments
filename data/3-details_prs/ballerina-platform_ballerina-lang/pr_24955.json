{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3MDAzNzE3", "number": 24955, "title": "Fix CCE when using non-string literals as namespaceURI.", "bodyText": "Purpose\n$subject\nFixes #24930\nCheck List\n\n Read the Contributing Guide\n Updated Change Log\n Checked Tooling Support (#)\n Added necessary tests\n\n Unit Tests\n Spec Conformance Tests\n Integration Tests\n Ballerina By Example Tests\n\n\n Increased Test Coverage\n Added necessary documentation\n\n API documentation\n Module documentation in Module.md files\n Ballerina By Examples", "createdAt": "2020-07-27T08:40:45Z", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24955", "merged": true, "mergeCommit": {"oid": "302a545ea11964341276ac3bb7818ce99757b072"}, "closed": true, "closedAt": "2020-07-27T09:41:30Z", "author": {"login": "rdulmina"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc49q9BAH2gAyNDU3MDAzNzE3OmQzNjY3YTk2MGEyNzE0OWE3OTIzYjAzZGFlMzI5ZTc2NWFjMjkxNjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc4-l2jAFqTQ1NTYyOTY4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d3667a960a27149a7923b03dae329e765ac29162", "author": {"user": {"login": "rdulmina", "name": "Dulmina Renuke"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d3667a960a27149a7923b03dae329e765ac29162", "committedDate": "2020-07-27T08:36:58Z", "message": "Fix CCE when using non-string literals as namespaceURI."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79251066fd6228e442f292a7ea6b163941ba2551", "author": {"user": {"login": "rdulmina", "name": "Dulmina Renuke"}}, "url": "https://github.com/ballerina-platform/ballerina-lang/commit/79251066fd6228e442f292a7ea6b163941ba2551", "committedDate": "2020-07-27T08:37:59Z", "message": "Add missing files"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NTg5ODEw", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24955#pullrequestreview-455589810", "createdAt": "2020-07-27T08:46:10Z", "commit": {"oid": "79251066fd6228e442f292a7ea6b163941ba2551"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwODo0NjoxMFrOG3ZPFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QwODo0NjoxMFrOG3ZPFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDczODMyNg==", "bodyText": "Trying to recover again can be expensive..\nSince we have already parsed the expression and knows that it is invalid, we can create a dummy literal/var-ref here and use that as the uri.", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24955#discussion_r460738326", "createdAt": "2020-07-27T08:46:10Z", "author": {"login": "SupunS"}, "path": "compiler/ballerina-parser/src/main/java/io/ballerinalang/compiler/internal/parser/BallerinaParser.java", "diffHunk": "@@ -8245,7 +8245,14 @@ private STNode parseFieldIdent() {\n     private STNode parseXMLNamespaceDeclaration(boolean isModuleVar) {\n         startContext(ParserRuleContext.XML_NAMESPACE_DECLARATION);\n         STNode xmlnsKeyword = parseXMLNSKeyword();\n-        STNode namespaceUri = parseXMLNamespaceUri();\n+\n+        STNode namespaceUri = parseSimpleConstExpr();\n+        while (!isValidXMLNameSpaceURI(namespaceUri)) {\n+            xmlnsKeyword = SyntaxErrors.cloneWithTrailingInvalidNodeMinutiae(xmlnsKeyword,\n+                    namespaceUri, DiagnosticErrorCode.ERROR_INVALID_XML_NAMESPACE_URI);\n+            namespaceUri = parseSimpleConstExpr();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79251066fd6228e442f292a7ea6b163941ba2551"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NjI5Njg5", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24955#pullrequestreview-455629689", "createdAt": "2020-07-27T09:41:18Z", "commit": {"oid": "79251066fd6228e442f292a7ea6b163941ba2551"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3720, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}