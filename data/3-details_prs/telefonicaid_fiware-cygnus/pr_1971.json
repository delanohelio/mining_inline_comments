{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEyOTI0MjA0", "number": 1971, "title": "Upsert by unique key", "bodyText": "This PR fixes issue for upsert transaction. Now a days, the transaction used to be one for all processed batch, now it's one for each different unique key. This Unique key is the one specified on the agent conf.", "createdAt": "2020-10-30T11:11:50Z", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1971", "merged": true, "mergeCommit": {"oid": "33d5380307f18fc9599ccfb96791fad99b723c28"}, "closed": true, "closedAt": "2020-10-30T12:44:29Z", "author": {"login": "IvanHdzC"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdXRVwzgH2gAyNTEyOTI0MjA0Ojg0YmMwYjhmM2M4NmViYmZhMGJjYzFmNGRjMmU5ZmFiN2IyMzFhZjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXmH-mAFqTUyMDYzMDUyNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "84bc0b8f3c86ebbfa0bcc1f4dc2e9fab7b231af0", "author": {"user": {"login": "IvanHdzC", "name": "Ivan Hernandez"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/84bc0b8f3c86ebbfa0bcc1f4dc2e9fab7b231af0", "committedDate": "2020-10-29T12:29:39Z", "message": "update test for last data by key"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "734ece5cd3da52d09f2dc9cf3b71fea89817a9fa", "author": {"user": {"login": "IvanHdzC", "name": "Ivan Hernandez"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/734ece5cd3da52d09f2dc9cf3b71fea89817a9fa", "committedDate": "2020-10-29T12:30:35Z", "message": "add unique key to aggregation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee9ca72a65632685f112b293f64573977428f4ec", "author": {"user": {"login": "IvanHdzC", "name": "Ivan Hernandez"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/ee9ca72a65632685f112b293f64573977428f4ec", "committedDate": "2020-10-29T12:32:38Z", "message": "update last data collection by unique key"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "494f7a4cdbc7298479a068eed9ef04238e370475", "author": {"user": {"login": "IvanHdzC", "name": "Ivan Hernandez"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/494f7a4cdbc7298479a068eed9ef04238e370475", "committedDate": "2020-10-29T15:43:14Z", "message": "update postgresql tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9078b22a9696fdcff47027c73df75bee319ba980", "author": {"user": {"login": "IvanHdzC", "name": "Ivan Hernandez"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/9078b22a9696fdcff47027c73df75bee319ba980", "committedDate": "2020-10-29T15:43:24Z", "message": "update postgresql query"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d10ccfd8b9ab19e6da966962e3779baa3adeed6", "author": {"user": {"login": "IvanHdzC", "name": "Ivan Hernandez"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/8d10ccfd8b9ab19e6da966962e3779baa3adeed6", "committedDate": "2020-10-29T16:55:26Z", "message": "update mysql tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77738662b04445efab965c5f1c502c38d96abbfe", "author": {"user": {"login": "IvanHdzC", "name": "Ivan Hernandez"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/77738662b04445efab965c5f1c502c38d96abbfe", "committedDate": "2020-10-29T16:55:38Z", "message": "update mysql query"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "419deadc1b62607d7eba547addaa62e4a66c6a4f", "author": {"user": {"login": "IvanHdzC", "name": "Ivan Hernandez"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/419deadc1b62607d7eba547addaa62e4a66c6a4f", "committedDate": "2020-10-29T17:09:55Z", "message": "update upsert transaction"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e406e3427aaddfe33f5ba970487e7ad5c8f7b15b", "author": {"user": {"login": "IvanHdzC", "name": "Ivan Hernandez"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/e406e3427aaddfe33f5ba970487e7ad5c8f7b15b", "committedDate": "2020-10-30T11:16:42Z", "message": "add CNR entry"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwNTkxNDE2", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1971#pullrequestreview-520591416", "createdAt": "2020-10-30T11:43:12Z", "commit": {"oid": "419deadc1b62607d7eba547addaa62e4a66c6a4f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxMTo0MzoxMlrOHrLhGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxMTo0MzoxMlrOHrLhGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTAzOTUxNA==", "bodyText": "Is safe access to element by 1 (i.e. only 1 element is in upsertList)?", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1971#discussion_r515039514", "createdAt": "2020-10-30T11:43:12Z", "author": {"login": "AlvaroVega"}, "path": "cygnus-common/src/test/java/com/telefonica/iot/cygnus/backends/sql/SQLQueryUtilsTest.java", "diffHunk": "@@ -269,12 +267,10 @@ public void testMySQLUpsertQueryMultipleBatch() {\n                 sqlInstance,\n                 destination,\n                 attrNativeTypes);\n-\n+        sqlupsertQuery = upsertList.get(1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "419deadc1b62607d7eba547addaa62e4a66c6a4f"}, "originalPosition": 92}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d95da2eace60287755c9f0c4c1bb0ccedf84e83c", "author": {"user": {"login": "IvanHdzC", "name": "Ivan Hernandez"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/d95da2eace60287755c9f0c4c1bb0ccedf84e83c", "committedDate": "2020-10-30T12:00:43Z", "message": "update readme doc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwNjIwMTAw", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1971#pullrequestreview-520620100", "createdAt": "2020-10-30T12:27:21Z", "commit": {"oid": "d95da2eace60287755c9f0c4c1bb0ccedf84e83c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwNjMwNTI1", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1971#pullrequestreview-520630525", "createdAt": "2020-10-30T12:42:36Z", "commit": {"oid": "d95da2eace60287755c9f0c4c1bb0ccedf84e83c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3796, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}