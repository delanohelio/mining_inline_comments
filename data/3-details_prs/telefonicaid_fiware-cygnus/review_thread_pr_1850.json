{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk2OTUzNzEz", "number": 1850, "reviewThreads": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxMzoxMToxMFrODthmAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwOTowMToyM1rOD-4UpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5MDYyOTEzOnYy", "diffSide": "RIGHT", "path": "cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSICKANSink.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxMzoxMToxMFrOF-_3pg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwOToyMTo1OFrOF_ioUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTYwMjQ3MA==", "bodyText": "The goal for this task is to use the entity id as orgName, pkgName and resName.\nPerhaps It isn't necessary to store again the entityId on the sink, because it's already stored into the corresponding objects inside the generic aggregator.\ndo you agree @VicenteLT?", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r401602470", "createdAt": "2020-04-01T13:11:10Z", "author": {"login": "IvanHdzC"}, "path": "cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSICKANSink.java", "diffHunk": "@@ -349,6 +362,7 @@ private void persistAggregation(NGSIGenericAggregator aggregator, String service\n                 aggregation += \",\" + jsonObject;\n             }\n         }\n+        entityId=aggregator.getEntityId();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2f08615bebf5bedb4681eee5414cf35043e5791"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjE3MTk4NQ==", "bodyText": "fixed in dd61bbd", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r402171985", "createdAt": "2020-04-02T09:21:58Z", "author": {"login": "VicenteLT"}, "path": "cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSICKANSink.java", "diffHunk": "@@ -349,6 +362,7 @@ private void persistAggregation(NGSIGenericAggregator aggregator, String service\n                 aggregation += \",\" + jsonObject;\n             }\n         }\n+        entityId=aggregator.getEntityId();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTYwMjQ3MA=="}, "originalCommit": {"oid": "b2f08615bebf5bedb4681eee5414cf35043e5791"}, "originalPosition": 65}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5Mzg3MzYwOnYy", "diffSide": "RIGHT", "path": "cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/aggregation/NGSIGenericAggregator.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwNzo0NTo0MFrOF_fFpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwOToyMToxMFrOF_imdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjExMzk1OA==", "bodyText": "remove this lines", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r402113958", "createdAt": "2020-04-02T07:45:40Z", "author": {"login": "IvanHdzC"}, "path": "cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/aggregation/NGSIGenericAggregator.java", "diffHunk": "@@ -393,6 +394,24 @@ public void setEntityType(String entityType) {\n     } //setEntityType\n \n     /**\n+     * Gets the entityId", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2fec1dcc982f4a027fa828b46e243d19ebf12873"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjE3MTUwOA==", "bodyText": "fixed in b179bd5", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r402171508", "createdAt": "2020-04-02T09:21:10Z", "author": {"login": "VicenteLT"}, "path": "cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/aggregation/NGSIGenericAggregator.java", "diffHunk": "@@ -393,6 +394,24 @@ public void setEntityType(String entityType) {\n     } //setEntityType\n \n     /**\n+     * Gets the entityId", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjExMzk1OA=="}, "originalCommit": {"oid": "2fec1dcc982f4a027fa828b46e243d19ebf12873"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5Mzg3NDE5OnYy", "diffSide": "RIGHT", "path": "cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSICKANSink.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwNzo0NTo0OVrOF_fF_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQwOToyMToyMFrOF_imxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjExNDA0Ng==", "bodyText": "remove this line", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r402114046", "createdAt": "2020-04-02T07:45:49Z", "author": {"login": "IvanHdzC"}, "path": "cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSICKANSink.java", "diffHunk": "@@ -349,6 +346,7 @@ private void persistAggregation(NGSIGenericAggregator aggregator, String service\n                 aggregation += \",\" + jsonObject;\n             }\n         }\n+        //entityId=aggregator.getEntityId();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2fec1dcc982f4a027fa828b46e243d19ebf12873"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjE3MTU4OA==", "bodyText": "fixed in b179bd5", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r402171588", "createdAt": "2020-04-02T09:21:20Z", "author": {"login": "VicenteLT"}, "path": "cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSICKANSink.java", "diffHunk": "@@ -349,6 +346,7 @@ private void persistAggregation(NGSIGenericAggregator aggregator, String service\n                 aggregation += \",\" + jsonObject;\n             }\n         }\n+        //entityId=aggregator.getEntityId();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjExNDA0Ng=="}, "originalCommit": {"oid": "2fec1dcc982f4a027fa828b46e243d19ebf12873"}, "originalPosition": 65}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5NTIxNTg2OnYy", "diffSide": "RIGHT", "path": "doc/cygnus-ngsi/flume_extensions_catalogue/ngsi_ckan_sink.md", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMzo0OTo0NlrOF_sJTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxNTowMTo1NlrOF_vktA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMyNzg4NA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            | data\\_model | no | dm-by-entity | dm-by-entity-id | <i>dm-by-entity</i>, even if not configured. ||\n          \n          \n            \n            | data\\_model | no | dm-by-entity | <i>dm-by-entity-id</i>, <i>dm-by-entity</i> ||", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r402327884", "createdAt": "2020-04-02T13:49:46Z", "author": {"login": "IvanHdzC"}, "path": "doc/cygnus-ngsi/flume_extensions_catalogue/ngsi_ckan_sink.md", "diffHunk": "@@ -325,7 +351,7 @@ NOTE: `curl` is a Unix command allowing for interacting with REST APIs such as t\n | enable\\_encoding\u00a0| no | false | <i>true</i> or <i>false</i>, <i>true</i> applies the new encoding, <i>false</i> applies the old encoding. ||\n | enable\\_grouping | no | false | <i>true</i> or <i>false</i>. Check this [link](./ngsi_grouping_interceptor.md) for more details. ||\n | enable\\_name\\_mappings | no | false | <i>true</i> or <i>false</i>. Check this [link](./ngsi_name_mappings_interceptor.md) for more details. ||\n-| data\\_model | no | dm-by-entity |  Always <i>dm-by-entity</i>, even if not configured. ||\n+| data\\_model | no | dm-by-entity | dm-by-entity-id | <i>dm-by-entity</i>, even if not configured. ||", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "097cfc576625ab25cde9f08b66696f277716fd36"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjM4NDA1Mg==", "bodyText": "Solved in aad6fe1", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r402384052", "createdAt": "2020-04-02T15:01:56Z", "author": {"login": "VicenteLT"}, "path": "doc/cygnus-ngsi/flume_extensions_catalogue/ngsi_ckan_sink.md", "diffHunk": "@@ -325,7 +351,7 @@ NOTE: `curl` is a Unix command allowing for interacting with REST APIs such as t\n | enable\\_encoding\u00a0| no | false | <i>true</i> or <i>false</i>, <i>true</i> applies the new encoding, <i>false</i> applies the old encoding. ||\n | enable\\_grouping | no | false | <i>true</i> or <i>false</i>. Check this [link](./ngsi_grouping_interceptor.md) for more details. ||\n | enable\\_name\\_mappings | no | false | <i>true</i> or <i>false</i>. Check this [link](./ngsi_name_mappings_interceptor.md) for more details. ||\n-| data\\_model | no | dm-by-entity |  Always <i>dm-by-entity</i>, even if not configured. ||\n+| data\\_model | no | dm-by-entity | dm-by-entity-id | <i>dm-by-entity</i>, even if not configured. ||", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMyNzg4NA=="}, "originalCommit": {"oid": "097cfc576625ab25cde9f08b66696f277716fd36"}, "originalPosition": 71}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5NjQ3NTIwOnYy", "diffSide": "RIGHT", "path": "cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSICKANSink.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxODo0MToyOFrOF_4nHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNToyNzowOVrOGY3biw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjUzMjEyNA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                /*entityId\n          \n          \n            \n                /**\n          \n      \n    \n    \n  \n\nSeems to be a typo", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r402532124", "createdAt": "2020-04-02T18:41:28Z", "author": {"login": "fgalan"}, "path": "cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSICKANSink.java", "diffHunk": "@@ -66,7 +67,7 @@\n     private String ckanViewer;\n     private CKANBackend persistenceBackend;\n \n-    /**\n+    /*entityId", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aad6fe1d70613f27b5bae4ab36969c8fa512c61c"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODcyNzE3OQ==", "bodyText": "Fixed in 0ab256e", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r428727179", "createdAt": "2020-05-21T15:27:09Z", "author": {"login": "IvanHdzC"}, "path": "cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSICKANSink.java", "diffHunk": "@@ -66,7 +67,7 @@\n     private String ckanViewer;\n     private CKANBackend persistenceBackend;\n \n-    /**\n+    /*entityId", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjUzMjEyNA=="}, "originalCommit": {"oid": "aad6fe1d70613f27b5bae4ab36969c8fa512c61c"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5NjQ4NDkyOnYy", "diffSide": "RIGHT", "path": "cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSICKANSink.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxODo0NDowN1rOF_4tJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNToyODowMlrOGY3dvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjUzMzY3MQ==", "bodyText": "Block seems to be missindented\n\nMabye some spaces vs. tab issue?", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r402533671", "createdAt": "2020-04-02T18:44:07Z", "author": {"login": "fgalan"}, "path": "cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSICKANSink.java", "diffHunk": "@@ -442,22 +450,27 @@ public String buildPkgName(String fiwareService, String fiwareServicePath) throw\n      * @return Resource name\n      * @throws CygnusBadConfiguration\n      */\n-    public String buildResName(String entity) throws CygnusBadConfiguration {\n+    public String buildResName(String entity, String entityId) throws CygnusBadConfiguration {\n         String resName;\n-        \n-        if (enableEncoding) {\n-            resName = NGSICharsets.encodeCKAN(entity);\n-        } else {\n-            resName = NGSIUtils.encode(entity, false, true).toLowerCase(Locale.ENGLISH);\n-        } // if else\n+        switch(dataModel) {\n+            case DMBYENTITYID:\n+            \tresName=entityId;\n+                break;\n+        default:\n+            if (enableEncoding) {\n+                resName = NGSICharsets.encodeCKAN(entity);\n+            } else {\n+                resName = NGSIUtils.encode(entity, false, true).toLowerCase(Locale.ENGLISH);\n+            } // if else", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aad6fe1d70613f27b5bae4ab36969c8fa512c61c"}, "originalPosition": 171}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODcyNzc0MQ==", "bodyText": "Fixed in 1651f0d", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r428727741", "createdAt": "2020-05-21T15:28:02Z", "author": {"login": "IvanHdzC"}, "path": "cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSICKANSink.java", "diffHunk": "@@ -442,22 +450,27 @@ public String buildPkgName(String fiwareService, String fiwareServicePath) throw\n      * @return Resource name\n      * @throws CygnusBadConfiguration\n      */\n-    public String buildResName(String entity) throws CygnusBadConfiguration {\n+    public String buildResName(String entity, String entityId) throws CygnusBadConfiguration {\n         String resName;\n-        \n-        if (enableEncoding) {\n-            resName = NGSICharsets.encodeCKAN(entity);\n-        } else {\n-            resName = NGSIUtils.encode(entity, false, true).toLowerCase(Locale.ENGLISH);\n-        } // if else\n+        switch(dataModel) {\n+            case DMBYENTITYID:\n+            \tresName=entityId;\n+                break;\n+        default:\n+            if (enableEncoding) {\n+                resName = NGSICharsets.encodeCKAN(entity);\n+            } else {\n+                resName = NGSIUtils.encode(entity, false, true).toLowerCase(Locale.ENGLISH);\n+            } // if else", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjUzMzY3MQ=="}, "originalCommit": {"oid": "aad6fe1d70613f27b5bae4ab36969c8fa512c61c"}, "originalPosition": 171}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5NjQ4OTI3OnYy", "diffSide": "RIGHT", "path": "cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSISink.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxODo0NToyMVrOF_4v5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNToyODoyOVrOGY3e0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjUzNDM3Mw==", "bodyText": "Missidentent block:\n\nMaybe some \"spaces vs. tabs\" issue?", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r402534373", "createdAt": "2020-04-02T18:45:21Z", "author": {"login": "fgalan"}, "path": "cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSISink.java", "diffHunk": "@@ -871,6 +874,37 @@ private void accumulateByEntityType(NGSIEvent event) {\n             batch.addEvent(destination, event);\n         } // accumulateByEntityType\n \n+        private void accumulateByEntityId(NGSIEvent event) {\n+        \tMap<String, String> headers = event.getHeaders();\n+            ContextElement originalCE = event.getOriginalCE();\n+            ContextElement mappedCE = event.getMappedCE();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aad6fe1d70613f27b5bae4ab36969c8fa512c61c"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjU0NzMxMg==", "bodyText": "(In general, I think the code should be reviewed for indent problems... not sure if the ones I have commented in this PR are the only ones. They are easy to find with a carfeful examination of https://github.com/telefonicaid/fiware-cygnus/pull/1850/files).", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r402547312", "createdAt": "2020-04-02T19:07:19Z", "author": {"login": "fgalan"}, "path": "cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSISink.java", "diffHunk": "@@ -871,6 +874,37 @@ private void accumulateByEntityType(NGSIEvent event) {\n             batch.addEvent(destination, event);\n         } // accumulateByEntityType\n \n+        private void accumulateByEntityId(NGSIEvent event) {\n+        \tMap<String, String> headers = event.getHeaders();\n+            ContextElement originalCE = event.getOriginalCE();\n+            ContextElement mappedCE = event.getMappedCE();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjUzNDM3Mw=="}, "originalCommit": {"oid": "aad6fe1d70613f27b5bae4ab36969c8fa512c61c"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODcyODAxOA==", "bodyText": "Fixed in 72fd80e", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r428728018", "createdAt": "2020-05-21T15:28:29Z", "author": {"login": "IvanHdzC"}, "path": "cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSISink.java", "diffHunk": "@@ -871,6 +874,37 @@ private void accumulateByEntityType(NGSIEvent event) {\n             batch.addEvent(destination, event);\n         } // accumulateByEntityType\n \n+        private void accumulateByEntityId(NGSIEvent event) {\n+        \tMap<String, String> headers = event.getHeaders();\n+            ContextElement originalCE = event.getOriginalCE();\n+            ContextElement mappedCE = event.getMappedCE();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjUzNDM3Mw=="}, "originalCommit": {"oid": "aad6fe1d70613f27b5bae4ab36969c8fa512c61c"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5NjQ5ODMwOnYy", "diffSide": "RIGHT", "path": "doc/cygnus-ngsi/flume_extensions_catalogue/ngsi_ckan_sink.md", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxODo0Nzo1N1rOF_41mg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNToyOTowMlrOGY3gLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjUzNTgzNA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The resiurce name depends on the configured data model (see the [Configuration](#section2.1) section for more details):\n          \n          \n            \n            The resource name depends on the configured data model (see the [Configuration](#section2.1) section for more details):", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r402535834", "createdAt": "2020-04-02T18:47:57Z", "author": {"login": "fgalan"}, "path": "doc/cygnus-ngsi/flume_extensions_catalogue/ngsi_ckan_sink.md", "diffHunk": "@@ -50,32 +50,58 @@ This is done at the cygnus-ngsi Http listeners (in Flume jergon, sources) thanks\n [Top](#top)\n \n #### <a name=\"section1.2.1\"></a>Organizations naming conventions\n-An organization named as the notified `fiware-service` header value (or, in absence of such a header, the defaulted value for the FIWARE service) is created (if not existing yet).\n+* Data model by entity (`data_model=dm-by-entity`). An organization named as the notified `fiware-service` header value (or, in absence of such a header, the defaulted value for the FIWARE service) is created (if not existing yet).\n+Since based in [PostgreSQL only accepts] \n+https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n+Nevertheless, different than PostgreSQL, [organization lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.organization_create) may be up to 100 characters (minimum, 2 characters).\n \n-Since based in [PostgreSQL only accepts](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n \n-Nevertheless, different than PostgreSQL, [organization lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.organization_create) may be up to 100 characters (minimum, 2 characters).\n+* Data model by entity id (`data_model=dm-by-entity-id`). The organization name will take the value of the notified header `fiware-service` without encoding.\n+\n+The following table summarizes the organization name composition:\n+\n+| FIWARE service path | `dm-by-entity` | `dm-by-entity-id` |\n+|---|---|---|\n+| `/` | `<fiware-service>` | `<fiware-service>` | \n \n [Top](#top)\n \n #### <a name=\"section1.2.2\"></a>Packages/datasets naming conventions\n-A package/dataset named as the concatenation of the notified `fiware-service` and `fiware-servicePath` header values (or, in absence of such headers, the defaulted value for the FIWARE service and service path) is created (if not existing yet) in the above organization.\n+* Data model by entity (`data_model=dm-by-entity`). A package/dataset named as the concatenation of the notified `fiware-service` and `fiware-servicePath` header values (or, in absence of such headers, the defaulted value for the FIWARE service and service path) is created (if not existing yet) in the above organization.\n+Since based in [PostgreSQL only accepts](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to  certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter\n+Nevertheless, different than PostgreSQL, [dataset lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.package_create) may be up to 100 characters (minimum, 2 characters).\n \n-Since based in [PostgreSQL only accepts](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to  certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n \n-Nevertheless, different than PostgreSQL, [dataset lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.package_create) may be up to 100 characters (minimum, 2 characters).\n+* Data model by entity id (`data_model=dm-by-entity-id`). A package/dataset name always take the entity ID. Such a name is already given in the NGSIEvent values, see the [Configuration](#section2.1) section for more details) within the the `NGSIEvent`.\n+\n+The following table summarizes the package name composition:\n+\n+| FIWARE service path | `dm-by-entity` | `dm-by-entity-id` |\n+|---|---|---|\n+| `/` | `<fiware-service>_<fiware-servicePath>` | `<entityId>` | \n \n [Top](#top)\n \n #### <a name=\"section1.2.3\"></a>Resources naming conventions\n-CKAN resources follow a single data model (see the [Configuration](#section2.1) section for more details), i.e. per entity. Thus, a resource name always take the concatenation of the entity ID and type. Such a name is already given in the `notified_entities`/`grouped_entities` header values (depending on using or not the grouping rules, see the [Configuration](#section2.1) section for more details) within the `NGSIEvent`.\n+The resiurce name depends on the configured data model (see the [Configuration](#section2.1) section for more details):", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aad6fe1d70613f27b5bae4ab36969c8fa512c61c"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODcyODM2Nw==", "bodyText": "Fixed in db4c369", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r428728367", "createdAt": "2020-05-21T15:29:02Z", "author": {"login": "IvanHdzC"}, "path": "doc/cygnus-ngsi/flume_extensions_catalogue/ngsi_ckan_sink.md", "diffHunk": "@@ -50,32 +50,58 @@ This is done at the cygnus-ngsi Http listeners (in Flume jergon, sources) thanks\n [Top](#top)\n \n #### <a name=\"section1.2.1\"></a>Organizations naming conventions\n-An organization named as the notified `fiware-service` header value (or, in absence of such a header, the defaulted value for the FIWARE service) is created (if not existing yet).\n+* Data model by entity (`data_model=dm-by-entity`). An organization named as the notified `fiware-service` header value (or, in absence of such a header, the defaulted value for the FIWARE service) is created (if not existing yet).\n+Since based in [PostgreSQL only accepts] \n+https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n+Nevertheless, different than PostgreSQL, [organization lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.organization_create) may be up to 100 characters (minimum, 2 characters).\n \n-Since based in [PostgreSQL only accepts](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n \n-Nevertheless, different than PostgreSQL, [organization lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.organization_create) may be up to 100 characters (minimum, 2 characters).\n+* Data model by entity id (`data_model=dm-by-entity-id`). The organization name will take the value of the notified header `fiware-service` without encoding.\n+\n+The following table summarizes the organization name composition:\n+\n+| FIWARE service path | `dm-by-entity` | `dm-by-entity-id` |\n+|---|---|---|\n+| `/` | `<fiware-service>` | `<fiware-service>` | \n \n [Top](#top)\n \n #### <a name=\"section1.2.2\"></a>Packages/datasets naming conventions\n-A package/dataset named as the concatenation of the notified `fiware-service` and `fiware-servicePath` header values (or, in absence of such headers, the defaulted value for the FIWARE service and service path) is created (if not existing yet) in the above organization.\n+* Data model by entity (`data_model=dm-by-entity`). A package/dataset named as the concatenation of the notified `fiware-service` and `fiware-servicePath` header values (or, in absence of such headers, the defaulted value for the FIWARE service and service path) is created (if not existing yet) in the above organization.\n+Since based in [PostgreSQL only accepts](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to  certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter\n+Nevertheless, different than PostgreSQL, [dataset lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.package_create) may be up to 100 characters (minimum, 2 characters).\n \n-Since based in [PostgreSQL only accepts](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to  certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n \n-Nevertheless, different than PostgreSQL, [dataset lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.package_create) may be up to 100 characters (minimum, 2 characters).\n+* Data model by entity id (`data_model=dm-by-entity-id`). A package/dataset name always take the entity ID. Such a name is already given in the NGSIEvent values, see the [Configuration](#section2.1) section for more details) within the the `NGSIEvent`.\n+\n+The following table summarizes the package name composition:\n+\n+| FIWARE service path | `dm-by-entity` | `dm-by-entity-id` |\n+|---|---|---|\n+| `/` | `<fiware-service>_<fiware-servicePath>` | `<entityId>` | \n \n [Top](#top)\n \n #### <a name=\"section1.2.3\"></a>Resources naming conventions\n-CKAN resources follow a single data model (see the [Configuration](#section2.1) section for more details), i.e. per entity. Thus, a resource name always take the concatenation of the entity ID and type. Such a name is already given in the `notified_entities`/`grouped_entities` header values (depending on using or not the grouping rules, see the [Configuration](#section2.1) section for more details) within the `NGSIEvent`.\n+The resiurce name depends on the configured data model (see the [Configuration](#section2.1) section for more details):", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjUzNTgzNA=="}, "originalCommit": {"oid": "aad6fe1d70613f27b5bae4ab36969c8fa512c61c"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5NjUwODg5OnYy", "diffSide": "RIGHT", "path": "doc/cygnus-ngsi/flume_extensions_catalogue/ngsi_ckan_sink.md", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxODo1MDo1MFrOF_48cA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNTo0NDoyMlrOGY4JCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjUzNzU4NA==", "bodyText": "According to \" Data model by entity (data_model=dm-by-entity). A resource name always take the concatenation of the entity ID and type\", is the second one (<entityType>) correct? Shouldn't include the entity id concatened in some way?", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r402537584", "createdAt": "2020-04-02T18:50:50Z", "author": {"login": "fgalan"}, "path": "doc/cygnus-ngsi/flume_extensions_catalogue/ngsi_ckan_sink.md", "diffHunk": "@@ -50,32 +50,58 @@ This is done at the cygnus-ngsi Http listeners (in Flume jergon, sources) thanks\n [Top](#top)\n \n #### <a name=\"section1.2.1\"></a>Organizations naming conventions\n-An organization named as the notified `fiware-service` header value (or, in absence of such a header, the defaulted value for the FIWARE service) is created (if not existing yet).\n+* Data model by entity (`data_model=dm-by-entity`). An organization named as the notified `fiware-service` header value (or, in absence of such a header, the defaulted value for the FIWARE service) is created (if not existing yet).\n+Since based in [PostgreSQL only accepts] \n+https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n+Nevertheless, different than PostgreSQL, [organization lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.organization_create) may be up to 100 characters (minimum, 2 characters).\n \n-Since based in [PostgreSQL only accepts](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n \n-Nevertheless, different than PostgreSQL, [organization lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.organization_create) may be up to 100 characters (minimum, 2 characters).\n+* Data model by entity id (`data_model=dm-by-entity-id`). The organization name will take the value of the notified header `fiware-service` without encoding.\n+\n+The following table summarizes the organization name composition:\n+\n+| FIWARE service path | `dm-by-entity` | `dm-by-entity-id` |\n+|---|---|---|\n+| `/` | `<fiware-service>` | `<fiware-service>` | \n \n [Top](#top)\n \n #### <a name=\"section1.2.2\"></a>Packages/datasets naming conventions\n-A package/dataset named as the concatenation of the notified `fiware-service` and `fiware-servicePath` header values (or, in absence of such headers, the defaulted value for the FIWARE service and service path) is created (if not existing yet) in the above organization.\n+* Data model by entity (`data_model=dm-by-entity`). A package/dataset named as the concatenation of the notified `fiware-service` and `fiware-servicePath` header values (or, in absence of such headers, the defaulted value for the FIWARE service and service path) is created (if not existing yet) in the above organization.\n+Since based in [PostgreSQL only accepts](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to  certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter\n+Nevertheless, different than PostgreSQL, [dataset lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.package_create) may be up to 100 characters (minimum, 2 characters).\n \n-Since based in [PostgreSQL only accepts](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to  certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n \n-Nevertheless, different than PostgreSQL, [dataset lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.package_create) may be up to 100 characters (minimum, 2 characters).\n+* Data model by entity id (`data_model=dm-by-entity-id`). A package/dataset name always take the entity ID. Such a name is already given in the NGSIEvent values, see the [Configuration](#section2.1) section for more details) within the the `NGSIEvent`.\n+\n+The following table summarizes the package name composition:\n+\n+| FIWARE service path | `dm-by-entity` | `dm-by-entity-id` |\n+|---|---|---|\n+| `/` | `<fiware-service>_<fiware-servicePath>` | `<entityId>` | \n \n [Top](#top)\n \n #### <a name=\"section1.2.3\"></a>Resources naming conventions\n-CKAN resources follow a single data model (see the [Configuration](#section2.1) section for more details), i.e. per entity. Thus, a resource name always take the concatenation of the entity ID and type. Such a name is already given in the `notified_entities`/`grouped_entities` header values (depending on using or not the grouping rules, see the [Configuration](#section2.1) section for more details) within the `NGSIEvent`.\n+The resiurce name depends on the configured data model (see the [Configuration](#section2.1) section for more details):\n+\n+* Data model by entity (`data_model=dm-by-entity`). A resource name always take the concatenation of the entity ID and type. Such a name is already given in the `notified_entities`/`grouped_entities` header values (depending on using or not the grouping rules, see the [Configuration](#section2.1) section for more details) within the `NGSIEvent`.\n+\n+\n+* Data model by entity id (`data_model=dm-by-entity-id`). A resource name always take the entity ID. Such a name is already given in the NGSIEvent values, see the [Configuration](#section2.1) section for more details) within the the `NGSIEvent`. \n \n It must be noticed a CKAN Datastore (and a viewer) is also created and associated to the resource above. This datastore, which in the end is a PostgreSQL table, will hold the persisted data.\n \n Since based in [PostgreSQL](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to  certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n \n Despite there is no real limit on the resource names, Cygnus will keep limiting their lengths up to 100 characters (minimum, 2 characters), accordingly to what's done with organization and package names.\n \n+The following table summarizes the resource name composition:\n+\n+| FIWARE service path | `dm-by-entity` | `dm-by-entity-id` |\n+|---|---|---|\n+| `/` | `<entityType>` | `<entityId>` |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aad6fe1d70613f27b5bae4ab36969c8fa512c61c"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODczODgyNA==", "bodyText": "Fixed in 082929d", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r428738824", "createdAt": "2020-05-21T15:44:22Z", "author": {"login": "IvanHdzC"}, "path": "doc/cygnus-ngsi/flume_extensions_catalogue/ngsi_ckan_sink.md", "diffHunk": "@@ -50,32 +50,58 @@ This is done at the cygnus-ngsi Http listeners (in Flume jergon, sources) thanks\n [Top](#top)\n \n #### <a name=\"section1.2.1\"></a>Organizations naming conventions\n-An organization named as the notified `fiware-service` header value (or, in absence of such a header, the defaulted value for the FIWARE service) is created (if not existing yet).\n+* Data model by entity (`data_model=dm-by-entity`). An organization named as the notified `fiware-service` header value (or, in absence of such a header, the defaulted value for the FIWARE service) is created (if not existing yet).\n+Since based in [PostgreSQL only accepts] \n+https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n+Nevertheless, different than PostgreSQL, [organization lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.organization_create) may be up to 100 characters (minimum, 2 characters).\n \n-Since based in [PostgreSQL only accepts](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n \n-Nevertheless, different than PostgreSQL, [organization lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.organization_create) may be up to 100 characters (minimum, 2 characters).\n+* Data model by entity id (`data_model=dm-by-entity-id`). The organization name will take the value of the notified header `fiware-service` without encoding.\n+\n+The following table summarizes the organization name composition:\n+\n+| FIWARE service path | `dm-by-entity` | `dm-by-entity-id` |\n+|---|---|---|\n+| `/` | `<fiware-service>` | `<fiware-service>` | \n \n [Top](#top)\n \n #### <a name=\"section1.2.2\"></a>Packages/datasets naming conventions\n-A package/dataset named as the concatenation of the notified `fiware-service` and `fiware-servicePath` header values (or, in absence of such headers, the defaulted value for the FIWARE service and service path) is created (if not existing yet) in the above organization.\n+* Data model by entity (`data_model=dm-by-entity`). A package/dataset named as the concatenation of the notified `fiware-service` and `fiware-servicePath` header values (or, in absence of such headers, the defaulted value for the FIWARE service and service path) is created (if not existing yet) in the above organization.\n+Since based in [PostgreSQL only accepts](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to  certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter\n+Nevertheless, different than PostgreSQL, [dataset lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.package_create) may be up to 100 characters (minimum, 2 characters).\n \n-Since based in [PostgreSQL only accepts](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to  certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n \n-Nevertheless, different than PostgreSQL, [dataset lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.package_create) may be up to 100 characters (minimum, 2 characters).\n+* Data model by entity id (`data_model=dm-by-entity-id`). A package/dataset name always take the entity ID. Such a name is already given in the NGSIEvent values, see the [Configuration](#section2.1) section for more details) within the the `NGSIEvent`.\n+\n+The following table summarizes the package name composition:\n+\n+| FIWARE service path | `dm-by-entity` | `dm-by-entity-id` |\n+|---|---|---|\n+| `/` | `<fiware-service>_<fiware-servicePath>` | `<entityId>` | \n \n [Top](#top)\n \n #### <a name=\"section1.2.3\"></a>Resources naming conventions\n-CKAN resources follow a single data model (see the [Configuration](#section2.1) section for more details), i.e. per entity. Thus, a resource name always take the concatenation of the entity ID and type. Such a name is already given in the `notified_entities`/`grouped_entities` header values (depending on using or not the grouping rules, see the [Configuration](#section2.1) section for more details) within the `NGSIEvent`.\n+The resiurce name depends on the configured data model (see the [Configuration](#section2.1) section for more details):\n+\n+* Data model by entity (`data_model=dm-by-entity`). A resource name always take the concatenation of the entity ID and type. Such a name is already given in the `notified_entities`/`grouped_entities` header values (depending on using or not the grouping rules, see the [Configuration](#section2.1) section for more details) within the `NGSIEvent`.\n+\n+\n+* Data model by entity id (`data_model=dm-by-entity-id`). A resource name always take the entity ID. Such a name is already given in the NGSIEvent values, see the [Configuration](#section2.1) section for more details) within the the `NGSIEvent`. \n \n It must be noticed a CKAN Datastore (and a viewer) is also created and associated to the resource above. This datastore, which in the end is a PostgreSQL table, will hold the persisted data.\n \n Since based in [PostgreSQL](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to  certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n \n Despite there is no real limit on the resource names, Cygnus will keep limiting their lengths up to 100 characters (minimum, 2 characters), accordingly to what's done with organization and package names.\n \n+The following table summarizes the resource name composition:\n+\n+| FIWARE service path | `dm-by-entity` | `dm-by-entity-id` |\n+|---|---|---|\n+| `/` | `<entityType>` | `<entityId>` |", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjUzNzU4NA=="}, "originalCommit": {"oid": "aad6fe1d70613f27b5bae4ab36969c8fa512c61c"}, "originalPosition": 61}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5NjU0MTcxOnYy", "diffSide": "RIGHT", "path": "doc/cygnus-ngsi/flume_extensions_catalogue/ngsi_ckan_sink.md", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxODo1OTozOVrOF_5RnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxNTowODoyMlrOGAZo-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjU0MzAwNQ==", "bodyText": "Previously to this PR, dm-by-entity was the only mode supported, wasn't it? Or, in other words, this PR has added the possibility of using dm-by-entity-id.\nIs my understanding correct?", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r402543005", "createdAt": "2020-04-02T18:59:39Z", "author": {"login": "fgalan"}, "path": "doc/cygnus-ngsi/flume_extensions_catalogue/ngsi_ckan_sink.md", "diffHunk": "@@ -325,7 +351,7 @@ NOTE: `curl` is a Unix command allowing for interacting with REST APIs such as t\n | enable\\_encoding\u00a0| no | false | <i>true</i> or <i>false</i>, <i>true</i> applies the new encoding, <i>false</i> applies the old encoding. ||\n | enable\\_grouping | no | false | <i>true</i> or <i>false</i>. Check this [link](./ngsi_grouping_interceptor.md) for more details. ||\n | enable\\_name\\_mappings | no | false | <i>true</i> or <i>false</i>. Check this [link](./ngsi_name_mappings_interceptor.md) for more details. ||\n-| data\\_model | no | dm-by-entity |  Always <i>dm-by-entity</i>, even if not configured. ||\n+| data\\_model | no | dm-by-entity | <i>dm-by-entity-id</i>, <i>dm-by-entity</i> ||", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aad6fe1d70613f27b5bae4ab36969c8fa512c61c"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjk3NzY4Ng==", "bodyText": "Yes , its correct", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r402977686", "createdAt": "2020-04-03T12:43:31Z", "author": {"login": "VicenteLT"}, "path": "doc/cygnus-ngsi/flume_extensions_catalogue/ngsi_ckan_sink.md", "diffHunk": "@@ -325,7 +351,7 @@ NOTE: `curl` is a Unix command allowing for interacting with REST APIs such as t\n | enable\\_encoding\u00a0| no | false | <i>true</i> or <i>false</i>, <i>true</i> applies the new encoding, <i>false</i> applies the old encoding. ||\n | enable\\_grouping | no | false | <i>true</i> or <i>false</i>. Check this [link](./ngsi_grouping_interceptor.md) for more details. ||\n | enable\\_name\\_mappings | no | false | <i>true</i> or <i>false</i>. Check this [link](./ngsi_name_mappings_interceptor.md) for more details. ||\n-| data\\_model | no | dm-by-entity |  Always <i>dm-by-entity</i>, even if not configured. ||\n+| data\\_model | no | dm-by-entity | <i>dm-by-entity-id</i>, <i>dm-by-entity</i> ||", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjU0MzAwNQ=="}, "originalCommit": {"oid": "aad6fe1d70613f27b5bae4ab36969c8fa512c61c"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA3MzI3Mw==", "bodyText": "Thanks for the clarification!\nNTC", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r403073273", "createdAt": "2020-04-03T15:08:22Z", "author": {"login": "fgalan"}, "path": "doc/cygnus-ngsi/flume_extensions_catalogue/ngsi_ckan_sink.md", "diffHunk": "@@ -325,7 +351,7 @@ NOTE: `curl` is a Unix command allowing for interacting with REST APIs such as t\n | enable\\_encoding\u00a0| no | false | <i>true</i> or <i>false</i>, <i>true</i> applies the new encoding, <i>false</i> applies the old encoding. ||\n | enable\\_grouping | no | false | <i>true</i> or <i>false</i>. Check this [link](./ngsi_grouping_interceptor.md) for more details. ||\n | enable\\_name\\_mappings | no | false | <i>true</i> or <i>false</i>. Check this [link](./ngsi_name_mappings_interceptor.md) for more details. ||\n-| data\\_model | no | dm-by-entity |  Always <i>dm-by-entity</i>, even if not configured. ||\n+| data\\_model | no | dm-by-entity | <i>dm-by-entity-id</i>, <i>dm-by-entity</i> ||", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjU0MzAwNQ=="}, "originalCommit": {"oid": "aad6fe1d70613f27b5bae4ab36969c8fa512c61c"}, "originalPosition": 71}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5NjU1NzMwOnYy", "diffSide": "RIGHT", "path": "cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSICKANSink.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxOTowNDoxN1rOF_5b0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNTowNToyM1rOGY2mDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjU0NTYxOQ==", "bodyText": "As far as I understand (according to https://github.com/telefonicaid/fiware-cygnus/pull/1850/files#diff-7d759ac06f173f8e331ae811fbf231c7R354) CKAN sink support two modes: dm-by-entity-id and dm-by-entity. I see the following pattern in this PR (in several places):\n        switch(dataModel) {\n            case DMBYENTITYID:\n                // Code for processing the dm-by-entity-id case\n                break;\n            default:\n                // Code for processing the dm-by-entity\n                break;\n\nHowever, I'd suggest a more extensible and robuts approach:\n        switch(dataModel) {\n            case DMBYENTITYID:\n                // Code for processing the dm-by-entity-id case\n                break;\n            case DMBYENTITY:\n                // Code for processing the dm-by-entity\n                break;\n            default:\n                // Deal with the error of trying to use an unsupported mode (log, etc.)\n                break;", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r402545619", "createdAt": "2020-04-02T19:04:17Z", "author": {"login": "fgalan"}, "path": "cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSICKANSink.java", "diffHunk": "@@ -409,29 +411,35 @@ public String buildOrgName(String fiwareService) throws CygnusBadConfiguration {\n      * @return Package name\n      * @throws CygnusBadConfiguration\n      */\n-    public String buildPkgName(String fiwareService, String fiwareServicePath) throws CygnusBadConfiguration {\n+    public String buildPkgName(String fiwareService, String fiwareServicePath, String entityId) throws CygnusBadConfiguration {\n         String pkgName;\n         \n-        if (enableEncoding) {\n-            pkgName = NGSICharsets.encodeCKAN(fiwareService)\n-                    + CommonConstants.CONCATENATOR\n-                    + NGSICharsets.encodeCKAN(fiwareServicePath);\n-        } else {\n-            if (fiwareServicePath.equals(\"/\")) {\n-                pkgName = NGSIUtils.encode(fiwareService, false, true).toLowerCase(Locale.ENGLISH);\n-            } else {\n-                pkgName = (NGSIUtils.encode(fiwareService, false, true)\n-                        + NGSIUtils.encode(fiwareServicePath, false, true)).toLowerCase(Locale.ENGLISH);\n-            } // if else\n-        } // if else\n-\n-        if (pkgName.length() > NGSIConstants.CKAN_MAX_NAME_LEN) {\n-            throw new CygnusBadConfiguration(\"Building package name '\" + pkgName + \"' and its length is \"\n-                    + \"greater than \" + NGSIConstants.CKAN_MAX_NAME_LEN);\n-        } else if (pkgName.length() < NGSIConstants.CKAN_MIN_NAME_LEN) {\n-            throw new CygnusBadConfiguration(\"Building package name '\" + pkgName + \"' and its length is \"\n-                    + \"lower than \" + NGSIConstants.CKAN_MIN_NAME_LEN);\n-        } // if else if\n+        switch(dataModel) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aad6fe1d70613f27b5bae4ab36969c8fa512c61c"}, "originalPosition": 120}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODcxMzQ4Nw==", "bodyText": "Fixed in 1651f0d", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r428713487", "createdAt": "2020-05-21T15:05:23Z", "author": {"login": "IvanHdzC"}, "path": "cygnus-ngsi/src/main/java/com/telefonica/iot/cygnus/sinks/NGSICKANSink.java", "diffHunk": "@@ -409,29 +411,35 @@ public String buildOrgName(String fiwareService) throws CygnusBadConfiguration {\n      * @return Package name\n      * @throws CygnusBadConfiguration\n      */\n-    public String buildPkgName(String fiwareService, String fiwareServicePath) throws CygnusBadConfiguration {\n+    public String buildPkgName(String fiwareService, String fiwareServicePath, String entityId) throws CygnusBadConfiguration {\n         String pkgName;\n         \n-        if (enableEncoding) {\n-            pkgName = NGSICharsets.encodeCKAN(fiwareService)\n-                    + CommonConstants.CONCATENATOR\n-                    + NGSICharsets.encodeCKAN(fiwareServicePath);\n-        } else {\n-            if (fiwareServicePath.equals(\"/\")) {\n-                pkgName = NGSIUtils.encode(fiwareService, false, true).toLowerCase(Locale.ENGLISH);\n-            } else {\n-                pkgName = (NGSIUtils.encode(fiwareService, false, true)\n-                        + NGSIUtils.encode(fiwareServicePath, false, true)).toLowerCase(Locale.ENGLISH);\n-            } // if else\n-        } // if else\n-\n-        if (pkgName.length() > NGSIConstants.CKAN_MAX_NAME_LEN) {\n-            throw new CygnusBadConfiguration(\"Building package name '\" + pkgName + \"' and its length is \"\n-                    + \"greater than \" + NGSIConstants.CKAN_MAX_NAME_LEN);\n-        } else if (pkgName.length() < NGSIConstants.CKAN_MIN_NAME_LEN) {\n-            throw new CygnusBadConfiguration(\"Building package name '\" + pkgName + \"' and its length is \"\n-                    + \"lower than \" + NGSIConstants.CKAN_MIN_NAME_LEN);\n-        } // if else if\n+        switch(dataModel) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjU0NTYxOQ=="}, "originalCommit": {"oid": "aad6fe1d70613f27b5bae4ab36969c8fa512c61c"}, "originalPosition": 120}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5NjU2NDE1OnYy", "diffSide": "RIGHT", "path": "cygnus-common/src/main/java/com/telefonica/iot/cygnus/sinks/Enums.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxOTowNjoxOVrOF_5gOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQxNDo1Mzo0M1rOGY1-lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjU0Njc0NQ==", "bodyText": "Maybe is a na\u00efve question :) but... where is the code that translate the string \"dm-by-entity-id\" to DMBYENTITYID ? Is some kind of generic uppercase + dash removal function?", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r402546745", "createdAt": "2020-04-02T19:06:19Z", "author": {"login": "fgalan"}, "path": "cygnus-common/src/main/java/com/telefonica/iot/cygnus/sinks/Enums.java", "diffHunk": "@@ -14,6 +14,6 @@\n     /**\n      * Available data models for all the sinks.\n      */\n-    public enum DataModel { DMBYSERVICE, DMBYSERVICEPATH, DMBYENTITY, DMBYENTITYTYPE, DMBYATTRIBUTE }\n+    public enum DataModel { DMBYSERVICE, DMBYSERVICEPATH, DMBYENTITY, DMBYENTITYTYPE, DMBYATTRIBUTE, DMBYENTITYID }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aad6fe1d70613f27b5bae4ab36969c8fa512c61c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjk5MDU0Ng==", "bodyText": "In the configure method , in NGSISynk.java:\n@Override public void configure(Context context) { String dataModelStr = context.getString(\"data_model\", \"dm-by-entity\");", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r402990546", "createdAt": "2020-04-03T13:05:38Z", "author": {"login": "VicenteLT"}, "path": "cygnus-common/src/main/java/com/telefonica/iot/cygnus/sinks/Enums.java", "diffHunk": "@@ -14,6 +14,6 @@\n     /**\n      * Available data models for all the sinks.\n      */\n-    public enum DataModel { DMBYSERVICE, DMBYSERVICEPATH, DMBYENTITY, DMBYENTITYTYPE, DMBYATTRIBUTE }\n+    public enum DataModel { DMBYSERVICE, DMBYSERVICEPATH, DMBYENTITY, DMBYENTITYTYPE, DMBYATTRIBUTE, DMBYENTITYID }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjU0Njc0NQ=="}, "originalCommit": {"oid": "aad6fe1d70613f27b5bae4ab36969c8fa512c61c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODcwMzM4Mg==", "bodyText": "NGSISink read it on the agent properties and then CKAN sinks inherits it", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r428703382", "createdAt": "2020-05-21T14:53:43Z", "author": {"login": "IvanHdzC"}, "path": "cygnus-common/src/main/java/com/telefonica/iot/cygnus/sinks/Enums.java", "diffHunk": "@@ -14,6 +14,6 @@\n     /**\n      * Available data models for all the sinks.\n      */\n-    public enum DataModel { DMBYSERVICE, DMBYSERVICEPATH, DMBYENTITY, DMBYENTITYTYPE, DMBYATTRIBUTE }\n+    public enum DataModel { DMBYSERVICE, DMBYSERVICEPATH, DMBYENTITY, DMBYENTITYTYPE, DMBYATTRIBUTE, DMBYENTITYID }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjU0Njc0NQ=="}, "originalCommit": {"oid": "aad6fe1d70613f27b5bae4ab36969c8fa512c61c"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5OTk5ODIwOnYy", "diffSide": "RIGHT", "path": "CHANGES_NEXT_RELEASE", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxNTowODo1N1rOGAZqtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wM1QxNTowODo1N1rOGAZqtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzA3MzcxOA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            [cygnus-ngsi] New datamodel for CKAN (subservice -> org, entityId -> dataset, entityId -> resource) (#1792)\n          \n          \n            \n            [cygnus-ngsi] New datamodel for CKAN (dm-by-entity-id) implementing mapping: subservice -> org, entityId -> dataset, entityId -> resource (#1792)\n          \n      \n    \n    \n  \n\nMaybe this way is more precise...", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r403073718", "createdAt": "2020-04-03T15:08:57Z", "author": {"login": "fgalan"}, "path": "CHANGES_NEXT_RELEASE", "diffHunk": "@@ -12,3 +12,4 @@\n [cygnus-ngsi][Elasticsearch] Fix a bug that non-Latin characters such as Japanese are garbled. (#1839)\n [cygnus-ngsi][MongoSink]Fix on mongo collection name asignation. (#1845)\n [cygnus-ngsi][MongoSink]Fix on mongo recvTime Date format.\n+[cygnus-ngsi] New datamodel for CKAN (subservice -> org, entityId -> dataset, entityId -> resource) (#1792)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aad6fe1d70613f27b5bae4ab36969c8fa512c61c"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3MjYwODgwOnYy", "diffSide": "RIGHT", "path": "doc/cygnus-ngsi/flume_extensions_catalogue/ngsi_ckan_sink.md", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwOTowMDo0MFrOGZP7eA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwOTowNjowN1rOGZQFRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTEyODU2OA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Data model by entity id (`data_model=dm-by-entity-id`). The organization name will take the value of the notified header `fiware-service` without encoding.\n          \n          \n            \n            * Data model by entity id (`data_model=dm-by-entity-id`). The organization name will take the value of the notified header `fiware-service`. Note that in this case, encoding is never applied (this is current marked as \"debt\" in the source code with a FIXME mark).", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r429128568", "createdAt": "2020-05-22T09:00:40Z", "author": {"login": "fgalan"}, "path": "doc/cygnus-ngsi/flume_extensions_catalogue/ngsi_ckan_sink.md", "diffHunk": "@@ -50,32 +50,58 @@ This is done at the cygnus-ngsi Http listeners (in Flume jergon, sources) thanks\n [Top](#top)\n \n #### <a name=\"section1.2.1\"></a>Organizations naming conventions\n-An organization named as the notified `fiware-service` header value (or, in absence of such a header, the defaulted value for the FIWARE service) is created (if not existing yet).\n+* Data model by entity (`data_model=dm-by-entity`). An organization named as the notified `fiware-service` header value (or, in absence of such a header, the defaulted value for the FIWARE service) is created (if not existing yet).\n+Since based in [PostgreSQL only accepts] \n+https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n+Nevertheless, different than PostgreSQL, [organization lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.organization_create) may be up to 100 characters (minimum, 2 characters).\n \n-Since based in [PostgreSQL only accepts](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n \n-Nevertheless, different than PostgreSQL, [organization lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.organization_create) may be up to 100 characters (minimum, 2 characters).\n+* Data model by entity id (`data_model=dm-by-entity-id`). The organization name will take the value of the notified header `fiware-service` without encoding.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ed14fea42ed73cb07423237d67dea78af326afe"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTEzMTA3OA==", "bodyText": "Fixed in a0373a8", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r429131078", "createdAt": "2020-05-22T09:06:07Z", "author": {"login": "IvanHdzC"}, "path": "doc/cygnus-ngsi/flume_extensions_catalogue/ngsi_ckan_sink.md", "diffHunk": "@@ -50,32 +50,58 @@ This is done at the cygnus-ngsi Http listeners (in Flume jergon, sources) thanks\n [Top](#top)\n \n #### <a name=\"section1.2.1\"></a>Organizations naming conventions\n-An organization named as the notified `fiware-service` header value (or, in absence of such a header, the defaulted value for the FIWARE service) is created (if not existing yet).\n+* Data model by entity (`data_model=dm-by-entity`). An organization named as the notified `fiware-service` header value (or, in absence of such a header, the defaulted value for the FIWARE service) is created (if not existing yet).\n+Since based in [PostgreSQL only accepts] \n+https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n+Nevertheless, different than PostgreSQL, [organization lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.organization_create) may be up to 100 characters (minimum, 2 characters).\n \n-Since based in [PostgreSQL only accepts](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n \n-Nevertheless, different than PostgreSQL, [organization lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.organization_create) may be up to 100 characters (minimum, 2 characters).\n+* Data model by entity id (`data_model=dm-by-entity-id`). The organization name will take the value of the notified header `fiware-service` without encoding.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTEyODU2OA=="}, "originalCommit": {"oid": "1ed14fea42ed73cb07423237d67dea78af326afe"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3MjYxMDE0OnYy", "diffSide": "RIGHT", "path": "doc/cygnus-ngsi/flume_extensions_catalogue/ngsi_ckan_sink.md", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwOTowMTowN1rOGZP8Tg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwOTowNjoyNlrOGZQFzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTEyODc4Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Data model by entity id (`data_model=dm-by-entity-id`). A package/dataset name always take the entity ID. Such a name is already given in the NGSIEvent values, see the [Configuration](#section2.1) section for more details) within the the `NGSIEvent`.\n          \n          \n            \n            * Data model by entity id (`data_model=dm-by-entity-id`). A package/dataset name always take the entity ID. Such a name is already given in the NGSIEvent values, see the [Configuration](#section2.1) section for more details) within the the `NGSIEvent`. Note that in this case, encoding is never applied (this is current marked as \"debt\" in the source code with a FIXME mark).", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r429128782", "createdAt": "2020-05-22T09:01:07Z", "author": {"login": "fgalan"}, "path": "doc/cygnus-ngsi/flume_extensions_catalogue/ngsi_ckan_sink.md", "diffHunk": "@@ -50,32 +50,58 @@ This is done at the cygnus-ngsi Http listeners (in Flume jergon, sources) thanks\n [Top](#top)\n \n #### <a name=\"section1.2.1\"></a>Organizations naming conventions\n-An organization named as the notified `fiware-service` header value (or, in absence of such a header, the defaulted value for the FIWARE service) is created (if not existing yet).\n+* Data model by entity (`data_model=dm-by-entity`). An organization named as the notified `fiware-service` header value (or, in absence of such a header, the defaulted value for the FIWARE service) is created (if not existing yet).\n+Since based in [PostgreSQL only accepts] \n+https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n+Nevertheless, different than PostgreSQL, [organization lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.organization_create) may be up to 100 characters (minimum, 2 characters).\n \n-Since based in [PostgreSQL only accepts](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n \n-Nevertheless, different than PostgreSQL, [organization lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.organization_create) may be up to 100 characters (minimum, 2 characters).\n+* Data model by entity id (`data_model=dm-by-entity-id`). The organization name will take the value of the notified header `fiware-service` without encoding.\n+\n+The following table summarizes the organization name composition:\n+\n+| `dm-by-entity` | `dm-by-entity-id` |\n+|---|---|\n+| `<fiware-service>` | `<fiware-service>` | \n \n [Top](#top)\n \n #### <a name=\"section1.2.2\"></a>Packages/datasets naming conventions\n-A package/dataset named as the concatenation of the notified `fiware-service` and `fiware-servicePath` header values (or, in absence of such headers, the defaulted value for the FIWARE service and service path) is created (if not existing yet) in the above organization.\n+* Data model by entity (`data_model=dm-by-entity`). A package/dataset named as the concatenation of the notified `fiware-service` and `fiware-servicePath` header values (or, in absence of such headers, the defaulted value for the FIWARE service and service path) is created (if not existing yet) in the above organization.\n+Since based in [PostgreSQL only accepts](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to  certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter\n+Nevertheless, different than PostgreSQL, [dataset lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.package_create) may be up to 100 characters (minimum, 2 characters).\n \n-Since based in [PostgreSQL only accepts](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to  certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n \n-Nevertheless, different than PostgreSQL, [dataset lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.package_create) may be up to 100 characters (minimum, 2 characters).\n+* Data model by entity id (`data_model=dm-by-entity-id`). A package/dataset name always take the entity ID. Such a name is already given in the NGSIEvent values, see the [Configuration](#section2.1) section for more details) within the the `NGSIEvent`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ed14fea42ed73cb07423237d67dea78af326afe"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTEzMTIxNQ==", "bodyText": "Fixed in 4a57860", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r429131215", "createdAt": "2020-05-22T09:06:26Z", "author": {"login": "IvanHdzC"}, "path": "doc/cygnus-ngsi/flume_extensions_catalogue/ngsi_ckan_sink.md", "diffHunk": "@@ -50,32 +50,58 @@ This is done at the cygnus-ngsi Http listeners (in Flume jergon, sources) thanks\n [Top](#top)\n \n #### <a name=\"section1.2.1\"></a>Organizations naming conventions\n-An organization named as the notified `fiware-service` header value (or, in absence of such a header, the defaulted value for the FIWARE service) is created (if not existing yet).\n+* Data model by entity (`data_model=dm-by-entity`). An organization named as the notified `fiware-service` header value (or, in absence of such a header, the defaulted value for the FIWARE service) is created (if not existing yet).\n+Since based in [PostgreSQL only accepts] \n+https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n+Nevertheless, different than PostgreSQL, [organization lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.organization_create) may be up to 100 characters (minimum, 2 characters).\n \n-Since based in [PostgreSQL only accepts](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n \n-Nevertheless, different than PostgreSQL, [organization lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.organization_create) may be up to 100 characters (minimum, 2 characters).\n+* Data model by entity id (`data_model=dm-by-entity-id`). The organization name will take the value of the notified header `fiware-service` without encoding.\n+\n+The following table summarizes the organization name composition:\n+\n+| `dm-by-entity` | `dm-by-entity-id` |\n+|---|---|\n+| `<fiware-service>` | `<fiware-service>` | \n \n [Top](#top)\n \n #### <a name=\"section1.2.2\"></a>Packages/datasets naming conventions\n-A package/dataset named as the concatenation of the notified `fiware-service` and `fiware-servicePath` header values (or, in absence of such headers, the defaulted value for the FIWARE service and service path) is created (if not existing yet) in the above organization.\n+* Data model by entity (`data_model=dm-by-entity`). A package/dataset named as the concatenation of the notified `fiware-service` and `fiware-servicePath` header values (or, in absence of such headers, the defaulted value for the FIWARE service and service path) is created (if not existing yet) in the above organization.\n+Since based in [PostgreSQL only accepts](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to  certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter\n+Nevertheless, different than PostgreSQL, [dataset lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.package_create) may be up to 100 characters (minimum, 2 characters).\n \n-Since based in [PostgreSQL only accepts](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to  certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n \n-Nevertheless, different than PostgreSQL, [dataset lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.package_create) may be up to 100 characters (minimum, 2 characters).\n+* Data model by entity id (`data_model=dm-by-entity-id`). A package/dataset name always take the entity ID. Such a name is already given in the NGSIEvent values, see the [Configuration](#section2.1) section for more details) within the the `NGSIEvent`.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTEyODc4Mg=="}, "originalCommit": {"oid": "1ed14fea42ed73cb07423237d67dea78af326afe"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3MjYxMDkyOnYy", "diffSide": "RIGHT", "path": "doc/cygnus-ngsi/flume_extensions_catalogue/ngsi_ckan_sink.md", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwOTowMToyM1rOGZP81Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwOTowNjo0NFrOGZQGSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTEyODkxNw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Data model by entity id (`data_model=dm-by-entity-id`). A resource name always take the entity ID. Such a name is already given in the NGSIEvent values, see the [Configuration](#section2.1) section for more details) within the the `NGSIEvent`. \n          \n          \n            \n            * Data model by entity id (`data_model=dm-by-entity-id`). A resource name always take the entity ID. Such a name is already given in the NGSIEvent values, see the [Configuration](#section2.1) section for more details) within the the `NGSIEvent`. Note that in this case, encoding is never applied (this is current marked as \"debt\" in the source code with a FIXME mark).", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r429128917", "createdAt": "2020-05-22T09:01:23Z", "author": {"login": "fgalan"}, "path": "doc/cygnus-ngsi/flume_extensions_catalogue/ngsi_ckan_sink.md", "diffHunk": "@@ -50,32 +50,58 @@ This is done at the cygnus-ngsi Http listeners (in Flume jergon, sources) thanks\n [Top](#top)\n \n #### <a name=\"section1.2.1\"></a>Organizations naming conventions\n-An organization named as the notified `fiware-service` header value (or, in absence of such a header, the defaulted value for the FIWARE service) is created (if not existing yet).\n+* Data model by entity (`data_model=dm-by-entity`). An organization named as the notified `fiware-service` header value (or, in absence of such a header, the defaulted value for the FIWARE service) is created (if not existing yet).\n+Since based in [PostgreSQL only accepts] \n+https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n+Nevertheless, different than PostgreSQL, [organization lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.organization_create) may be up to 100 characters (minimum, 2 characters).\n \n-Since based in [PostgreSQL only accepts](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n \n-Nevertheless, different than PostgreSQL, [organization lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.organization_create) may be up to 100 characters (minimum, 2 characters).\n+* Data model by entity id (`data_model=dm-by-entity-id`). The organization name will take the value of the notified header `fiware-service` without encoding.\n+\n+The following table summarizes the organization name composition:\n+\n+| `dm-by-entity` | `dm-by-entity-id` |\n+|---|---|\n+| `<fiware-service>` | `<fiware-service>` | \n \n [Top](#top)\n \n #### <a name=\"section1.2.2\"></a>Packages/datasets naming conventions\n-A package/dataset named as the concatenation of the notified `fiware-service` and `fiware-servicePath` header values (or, in absence of such headers, the defaulted value for the FIWARE service and service path) is created (if not existing yet) in the above organization.\n+* Data model by entity (`data_model=dm-by-entity`). A package/dataset named as the concatenation of the notified `fiware-service` and `fiware-servicePath` header values (or, in absence of such headers, the defaulted value for the FIWARE service and service path) is created (if not existing yet) in the above organization.\n+Since based in [PostgreSQL only accepts](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to  certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter\n+Nevertheless, different than PostgreSQL, [dataset lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.package_create) may be up to 100 characters (minimum, 2 characters).\n \n-Since based in [PostgreSQL only accepts](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to  certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n \n-Nevertheless, different than PostgreSQL, [dataset lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.package_create) may be up to 100 characters (minimum, 2 characters).\n+* Data model by entity id (`data_model=dm-by-entity-id`). A package/dataset name always take the entity ID. Such a name is already given in the NGSIEvent values, see the [Configuration](#section2.1) section for more details) within the the `NGSIEvent`.\n+\n+The following table summarizes the package name composition:\n+\n+| `dm-by-entity` | `dm-by-entity-id` |\n+|---|---|\n+| `<fiware-service>_<fiware-servicePath>` | `<entityId>` | \n \n [Top](#top)\n \n #### <a name=\"section1.2.3\"></a>Resources naming conventions\n-CKAN resources follow a single data model (see the [Configuration](#section2.1) section for more details), i.e. per entity. Thus, a resource name always take the concatenation of the entity ID and type. Such a name is already given in the `notified_entities`/`grouped_entities` header values (depending on using or not the grouping rules, see the [Configuration](#section2.1) section for more details) within the `NGSIEvent`.\n+The resource name depends on the configured data model (see the [Configuration](#section2.1) section for more details):\n+\n+* Data model by entity (`data_model=dm-by-entity`). A resource name always take the concatenation of the entity ID and type. Such a name is already given in the `notified_entities`/`grouped_entities` header values (depending on using or not the grouping rules, see the [Configuration](#section2.1) section for more details) within the `NGSIEvent`.\n+\n+\n+* Data model by entity id (`data_model=dm-by-entity-id`). A resource name always take the entity ID. Such a name is already given in the NGSIEvent values, see the [Configuration](#section2.1) section for more details) within the the `NGSIEvent`. ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ed14fea42ed73cb07423237d67dea78af326afe"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTEzMTMzNw==", "bodyText": "Fixed in 176c876", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1850#discussion_r429131337", "createdAt": "2020-05-22T09:06:44Z", "author": {"login": "IvanHdzC"}, "path": "doc/cygnus-ngsi/flume_extensions_catalogue/ngsi_ckan_sink.md", "diffHunk": "@@ -50,32 +50,58 @@ This is done at the cygnus-ngsi Http listeners (in Flume jergon, sources) thanks\n [Top](#top)\n \n #### <a name=\"section1.2.1\"></a>Organizations naming conventions\n-An organization named as the notified `fiware-service` header value (or, in absence of such a header, the defaulted value for the FIWARE service) is created (if not existing yet).\n+* Data model by entity (`data_model=dm-by-entity`). An organization named as the notified `fiware-service` header value (or, in absence of such a header, the defaulted value for the FIWARE service) is created (if not existing yet).\n+Since based in [PostgreSQL only accepts] \n+https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n+Nevertheless, different than PostgreSQL, [organization lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.organization_create) may be up to 100 characters (minimum, 2 characters).\n \n-Since based in [PostgreSQL only accepts](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n \n-Nevertheless, different than PostgreSQL, [organization lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.organization_create) may be up to 100 characters (minimum, 2 characters).\n+* Data model by entity id (`data_model=dm-by-entity-id`). The organization name will take the value of the notified header `fiware-service` without encoding.\n+\n+The following table summarizes the organization name composition:\n+\n+| `dm-by-entity` | `dm-by-entity-id` |\n+|---|---|\n+| `<fiware-service>` | `<fiware-service>` | \n \n [Top](#top)\n \n #### <a name=\"section1.2.2\"></a>Packages/datasets naming conventions\n-A package/dataset named as the concatenation of the notified `fiware-service` and `fiware-servicePath` header values (or, in absence of such headers, the defaulted value for the FIWARE service and service path) is created (if not existing yet) in the above organization.\n+* Data model by entity (`data_model=dm-by-entity`). A package/dataset named as the concatenation of the notified `fiware-service` and `fiware-servicePath` header values (or, in absence of such headers, the defaulted value for the FIWARE service and service path) is created (if not existing yet) in the above organization.\n+Since based in [PostgreSQL only accepts](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to  certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter\n+Nevertheless, different than PostgreSQL, [dataset lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.package_create) may be up to 100 characters (minimum, 2 characters).\n \n-Since based in [PostgreSQL only accepts](https://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS), it must be said only alphanumeric characters and the underscore (`_`) are accepted. The hyphen ('-') is also accepted. This leads to  certain [encoding](#section2.3.3) is applied depending on the `enable_encoding` configuration parameter.\n \n-Nevertheless, different than PostgreSQL, [dataset lengths](http://docs.ckan.org/en/latest/api/#ckan.logic.action.create.package_create) may be up to 100 characters (minimum, 2 characters).\n+* Data model by entity id (`data_model=dm-by-entity-id`). A package/dataset name always take the entity ID. Such a name is already given in the NGSIEvent values, see the [Configuration](#section2.1) section for more details) within the the `NGSIEvent`.\n+\n+The following table summarizes the package name composition:\n+\n+| `dm-by-entity` | `dm-by-entity-id` |\n+|---|---|\n+| `<fiware-service>_<fiware-servicePath>` | `<entityId>` | \n \n [Top](#top)\n \n #### <a name=\"section1.2.3\"></a>Resources naming conventions\n-CKAN resources follow a single data model (see the [Configuration](#section2.1) section for more details), i.e. per entity. Thus, a resource name always take the concatenation of the entity ID and type. Such a name is already given in the `notified_entities`/`grouped_entities` header values (depending on using or not the grouping rules, see the [Configuration](#section2.1) section for more details) within the `NGSIEvent`.\n+The resource name depends on the configured data model (see the [Configuration](#section2.1) section for more details):\n+\n+* Data model by entity (`data_model=dm-by-entity`). A resource name always take the concatenation of the entity ID and type. Such a name is already given in the `notified_entities`/`grouped_entities` header values (depending on using or not the grouping rules, see the [Configuration](#section2.1) section for more details) within the `NGSIEvent`.\n+\n+\n+* Data model by entity id (`data_model=dm-by-entity-id`). A resource name always take the entity ID. Such a name is already given in the NGSIEvent values, see the [Configuration](#section2.1) section for more details) within the the `NGSIEvent`. ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTEyODkxNw=="}, "originalCommit": {"oid": "1ed14fea42ed73cb07423237d67dea78af326afe"}, "originalPosition": 49}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2446, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}