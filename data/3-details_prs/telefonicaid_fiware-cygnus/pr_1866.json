{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyNDQ3NzQ2", "number": 1866, "title": "[docker][cygnus-ngsi][feature][NGSIPostgreSQLSink] configure \"postgresql_database\" in docker", "bodyText": "NGSIPostgreSQLSink can use the user own database by using the \"postgresql_database\" parameter. But the cygnus-ngsi docker container cannot set \"postgresql_database\" through an environment variable.\nSo I modified some docker related files to be able to configure \"postgresql_database\" by using an environment variable.", "createdAt": "2020-05-02T12:54:44Z", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1866", "merged": true, "mergeCommit": {"oid": "1af4e9910c912cfd4154594f8a9336c35b706d72"}, "closed": true, "closedAt": "2020-05-06T14:44:27Z", "author": {"login": "nmatsui"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcdO6W9AH2gAyNDEyNDQ3NzQ2OjgyMjk4YjgzY2NkMzIwMDA2ZTc5MGRjNGZlNDQ1Y2EwOWFlMzQ1Mjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcem-8KgH2gAyNDEyNDQ3NzQ2Ojc2OWI5OTllODFmN2YxN2ZlMGI1ZDRiNjUwNDRmZjIzNjJlZWJmMTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "82298b83ccd320006e790dc4fe445ca09ae34529", "author": {"user": {"login": "nmatsui", "name": "Nobuyuki Matsui"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/82298b83ccd320006e790dc4fe445ca09ae34529", "committedDate": "2020-05-02T04:52:18Z", "message": "update files related to docker to be able to configure 'postgresql_database'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8b048f01e698da32801b379bb57458dddbd97b1", "author": {"user": {"login": "nmatsui", "name": "Nobuyuki Matsui"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/c8b048f01e698da32801b379bb57458dddbd97b1", "committedDate": "2020-05-02T05:13:41Z", "message": "update docs of CYGNUS_POSTGRESQL_DATABASE"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94a329243e3576a833faeae7444c1bf3761ffbf5", "author": {"user": {"login": "nmatsui", "name": "Nobuyuki Matsui"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/94a329243e3576a833faeae7444c1bf3761ffbf5", "committedDate": "2020-05-03T08:20:03Z", "message": "update docs to add 'cygnus-ngsi.sinks.postgresql-sink.postgresql_database'"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NzU2MjIy", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1866#pullrequestreview-404756222", "createdAt": "2020-05-04T07:25:17Z", "commit": {"oid": "94a329243e3576a833faeae7444c1bf3761ffbf5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwNzoyNToxN1rOGP1JBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwNzoyNToxN1rOGP1JBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTI1MjQ4NQ==", "bodyText": "I understand this (and the other similar change in the file) is a typo fix, right?", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1866#discussion_r419252485", "createdAt": "2020-05-04T07:25:17Z", "author": {"login": "fgalan"}, "path": "doc/cygnus-ngsi/installation_and_administration_guide/install_with_docker.md", "diffHunk": "@@ -282,9 +282,10 @@ As seen above, the default configuration distributed with the image is tied to c\n * PostgreSQL:\n     * It only works for building historical context data in PostgreSQL.\n     * The endpoint for PostgreSQL is `iot-postgresql` but can be changed through the CYGNUS_POSTGRESQL_HOST environment variable.\n-    * The port for PostgreSQL is `3306` but can be changed through the CYGNUS_POSTGRESQL_PORT environment variable.\n+    * The port for PostgreSQL is `5432` but can be changed through the CYGNUS_POSTGRESQL_PORT environment variable.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94a329243e3576a833faeae7444c1bf3761ffbf5"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NzU2OTc4", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1866#pullrequestreview-404756978", "createdAt": "2020-05-04T07:26:41Z", "commit": {"oid": "94a329243e3576a833faeae7444c1bf3761ffbf5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwNzoyNjo0MVrOGP1LWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwNzoyNjo0MVrOGP1LWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTI1MzA4MA==", "bodyText": "Maybe the new env var could be mentioned in the CHANGES_NEXT_RELEASE file. Something like:\n- Fix: new env var CYGNUS_POSTGRESQL_DATABASE to set Postgresql database in Docker", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1866#discussion_r419253080", "createdAt": "2020-05-04T07:26:41Z", "author": {"login": "fgalan"}, "path": "docker/cygnus-ngsi/cygnus-entrypoint.sh", "diffHunk": "@@ -596,6 +596,9 @@ elif [ \"$CYGNUS_POSTGRESQL_HOST\" != \"\" ]; then\n     sed -i '/'${CYGNUS_AGENT_NAME}'.sinks.postgresql-sink.postgresql_username/c '${CYGNUS_AGENT_NAME}'.sinks.postgresql-sink.postgresql_username = '${CYGNUS_POSTGRESQL_USER} ${FLUME_HOME}/conf/${AGENT_CONF_FILE}\n     sed -i '/'${CYGNUS_AGENT_NAME}'.sinks.postgresql-sink.postgresql_password/c '${CYGNUS_AGENT_NAME}'.sinks.postgresql-sink.postgresql_password = '${CYGNUS_POSTGRESQL_PASS} ${FLUME_HOME}/conf/${AGENT_CONF_FILE}\n     # The following are optional and disabled by default\n+    if [ \"$CYGNUS_POSTGRESQL_DATABASE\" != \"\" ]; then", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94a329243e3576a833faeae7444c1bf3761ffbf5"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "981e642a5a531fbb242f70752f751648d1e6f0da", "author": {"user": {"login": "nmatsui", "name": "Nobuyuki Matsui"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/981e642a5a531fbb242f70752f751648d1e6f0da", "committedDate": "2020-05-06T02:26:49Z", "message": "Merge branch 'master' into feature/docker_environment_CYGNUS_POSTGRESQL_DATABASE"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2MjcxOTM1", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1866#pullrequestreview-406271935", "createdAt": "2020-05-06T02:32:30Z", "commit": {"oid": "c8b048f01e698da32801b379bb57458dddbd97b1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwMjozMjozMFrOGRCKUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwMjozMjozMFrOGRCKUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDUxNDM4NQ==", "bodyText": "added a sentence to describe CYGNUS_POSTGRESQL_DATABASE.", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1866#discussion_r420514385", "createdAt": "2020-05-06T02:32:30Z", "author": {"login": "nmatsui"}, "path": "doc/cygnus-ngsi/installation_and_administration_guide/install_with_docker.md", "diffHunk": "@@ -282,9 +282,10 @@ As seen above, the default configuration distributed with the image is tied to c\n * PostgreSQL:\n     * It only works for building historical context data in PostgreSQL.\n     * The endpoint for PostgreSQL is `iot-postgresql` but can be changed through the CYGNUS_POSTGRESQL_HOST environment variable.\n-    * The port for PostgreSQL is `3306` but can be changed through the CYGNUS_POSTGRESQL_PORT environment variable.\n+    * The port for PostgreSQL is `5432` but can be changed through the CYGNUS_POSTGRESQL_PORT environment variable.\n     * The user for PostgreSQL is `postgresql` but can be changed through the CYGNUS_POSTGRESQL_USER environment variable.\n     * The pass for PostgreSQL is `postgresql` but can be changed through the CYGNUS_POSTGRESQL_PASS environment variable.\n+    * The database for PostgreSQL is `postgres` but can be changed through the CYGNUS_POSTGRESQL_DATABASE environment variable.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8b048f01e698da32801b379bb57458dddbd97b1"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b475f0ec3f87d0606c3fb2de3c9270132a886b8d", "author": {"user": {"login": "nmatsui", "name": "Nobuyuki Matsui"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/b475f0ec3f87d0606c3fb2de3c9270132a886b8d", "committedDate": "2020-05-06T02:36:55Z", "message": "Update CHANGES_NEXT_RELEASE"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2MzQzODE3", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1866#pullrequestreview-406343817", "createdAt": "2020-05-06T06:55:59Z", "commit": {"oid": "b475f0ec3f87d0606c3fb2de3c9270132a886b8d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2MzY5ODM4", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1866#pullrequestreview-406369838", "createdAt": "2020-05-06T07:42:00Z", "commit": {"oid": "b475f0ec3f87d0606c3fb2de3c9270132a886b8d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2MzgwNTU2", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1866#pullrequestreview-406380556", "createdAt": "2020-05-06T07:58:40Z", "commit": {"oid": "b475f0ec3f87d0606c3fb2de3c9270132a886b8d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "769b999e81f7f17fe0b5d4b65044ff2362eebf19", "author": {"user": {"login": "nmatsui", "name": "Nobuyuki Matsui"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/769b999e81f7f17fe0b5d4b65044ff2362eebf19", "committedDate": "2020-05-06T11:28:57Z", "message": "Merge branch 'master' into feature/docker_environment_CYGNUS_POSTGRESQL_DATABASE"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3827, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}