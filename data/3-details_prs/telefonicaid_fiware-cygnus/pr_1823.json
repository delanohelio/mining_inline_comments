{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwOTE3ODM5", "number": 1823, "title": "Task/sql error persistence", "bodyText": "Solves #1791\nThis PR inserts all errors on sql persistance on a new table on the DB. If the table doesn't exists, then it's created. The layout for the table is the following.\npostgresql=# select * from prueba2.prueba2_error_log;\ntimestamp        |                                error                                |                  query\n2020-02-27 09:12:42.049 ### | ERROR: relation \"prueba2.e_farolahttpul_streetlight\" does not exist+### | INSERT INTO prueba2.e_farola (recvT\nime,fiwareServicePath,entityId,entityType,TimeInstant,TimeInstant_md,serialNumber,serialNumber_md) VALUES ('2020-02-27 15:15:29.344','/e','farolahttpu\nl','Streetlight','2019-10-31T13:49:17.00Z','[]','OP00096F160318C000004','[]'),('2020-02-27 15:15:30.510','/e','farolahttpul','Streetlight','2019-10-31\nT13:49:17.00Z','[]','OP00096F160318C000004','[]')\nfor both SQL kind of sinlks.", "createdAt": "2020-02-27T15:34:07Z", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1823", "merged": true, "mergeCommit": {"oid": "6eb91166e6f7361b7aaaff77b46d3a283aefa671"}, "closed": true, "closedAt": "2020-03-05T12:01:24Z", "author": {"login": "IvanHdzC"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcGIHpKgH2gAyMzgwOTE3ODM5OjdlYzMwN2JmY2I1NGQxNmU4ZGM2ZmMyYmQ2MjdhN2VkYzE2YmZmYjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKqSQsgFqTM2OTUxMTc4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7ec307bfcb54d16e8dc6fc2bd627a7edc16bffb3", "author": {"user": null}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/7ec307bfcb54d16e8dc6fc2bd627a7edc16bffb3", "committedDate": "2020-02-20T09:57:13Z", "message": "move query creation to method context for mysql backend"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f4a8306d683cd123660954f59413dadbbb4d8fd", "author": {"user": null}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/7f4a8306d683cd123660954f59413dadbbb4d8fd", "committedDate": "2020-02-20T11:14:25Z", "message": "add table creation and insert methods to persist errors on mysql"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34cb1940defb53eeb182be5c681068d69a62d58b", "author": {"user": {"login": "IvanHdzC", "name": "Ivan Hernandez"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/34cb1940defb53eeb182be5c681068d69a62d58b", "committedDate": "2020-02-26T10:39:27Z", "message": "edit error log insert"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d49da91d9e4d80564dd55844abd9e3a80cbeb847", "author": {"user": {"login": "IvanHdzC", "name": "Ivan Hernandez"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/d49da91d9e4d80564dd55844abd9e3a80cbeb847", "committedDate": "2020-02-26T11:01:49Z", "message": "add persistError method to persist exceptions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "265a25007686a1732d437ea633c3bd8ce49c964a", "author": {"user": {"login": "IvanHdzC", "name": "Ivan Hernandez"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/265a25007686a1732d437ea633c3bd8ce49c964a", "committedDate": "2020-02-26T13:45:04Z", "message": "sql string handling fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "710f3cc344fcb147564828cde4d47570b1f31313", "author": {"user": {"login": "IvanHdzC", "name": "Ivan Hernandez"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/710f3cc344fcb147564828cde4d47570b1f31313", "committedDate": "2020-02-26T16:31:29Z", "message": "error persistance on postgresql"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "745862d0b70f631191d272324e5b9de790ad4fbc", "author": {"user": null}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/745862d0b70f631191d272324e5b9de790ad4fbc", "committedDate": "2020-02-27T09:57:52Z", "message": "edit sql query creation for error persistance"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c54a6be6447a720f21b949806fdeda946823c56", "author": {"user": {"login": "IvanHdzC", "name": "Ivan Hernandez"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/2c54a6be6447a720f21b949806fdeda946823c56", "committedDate": "2020-02-27T15:30:56Z", "message": "Merge branch 'master' into task/sql_error_persistence"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9bd3e954a10b080f04a6f0cf7e1d000db0940851", "author": {"user": {"login": "IvanHdzC", "name": "Ivan Hernandez"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/9bd3e954a10b080f04a6f0cf7e1d000db0940851", "committedDate": "2020-02-27T15:32:37Z", "message": "add CNR entry"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MjI1NDIz", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1823#pullrequestreview-366225423", "createdAt": "2020-02-28T08:24:45Z", "commit": {"oid": "9bd3e954a10b080f04a6f0cf7e1d000db0940851"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODoyNDo0NVrOFvs3EA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwODoyNDo0NVrOFvs3EA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTU2MjM4NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            [cygnus-common][PostgreSQL, MySQL] SQL error persistance.\n          \n          \n            \n            [cygnus-common][PostgreSQL, MySQL] SQL error persistance (#1791)", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1823#discussion_r385562384", "createdAt": "2020-02-28T08:24:45Z", "author": {"login": "fgalan"}, "path": "CHANGES_NEXT_RELEASE", "diffHunk": "@@ -1,3 +1,4 @@\n [cygnus-ngsi][PostgisSink, PostGRESQLSink] Enable datamodel by entity type (dm-by-entity-type) (#1684)\n [cygnus-ngsi] Add correlatorId rollbacked transactions (#1770)\n-[cygnus-ngsi][PostGRESQLSink] Fix schemaName when inserting data into DB\n\\ No newline at end of file\n+[cygnus-ngsi][PostGRESQLSink] Fix schemaName when inserting data into DB\n+[cygnus-common][PostgreSQL, MySQL] SQL error persistance.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9bd3e954a10b080f04a6f0cf7e1d000db0940851"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e33016a1310ab7c9498f67cb8539ac372b3d44a", "author": {"user": {"login": "IvanHdzC", "name": "Ivan Hernandez"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/9e33016a1310ab7c9498f67cb8539ac372b3d44a", "committedDate": "2020-02-28T09:38:27Z", "message": "Update CHANGES_NEXT_RELEASE\n\nCo-Authored-By: Ferm\u00edn Gal\u00e1n M\u00e1rquez <fgalan@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e46641b6ac1597718f7a1c1c85e4774de67d2fb", "author": {"user": {"login": "IvanHdzC", "name": "Ivan Hernandez"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/1e46641b6ac1597718f7a1c1c85e4774de67d2fb", "committedDate": "2020-02-28T11:06:18Z", "message": "update docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "069e3a31ab28b730e53a210f6678dd038fa41e0d", "author": {"user": {"login": "fgalan", "name": "Ferm\u00edn Gal\u00e1n M\u00e1rquez"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/069e3a31ab28b730e53a210f6678dd038fa41e0d", "committedDate": "2020-02-28T16:52:26Z", "message": "Merge branch 'master' into task/sql_error_persistence"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2NTQzMDM0", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1823#pullrequestreview-366543034", "createdAt": "2020-02-28T16:54:35Z", "commit": {"oid": "069e3a31ab28b730e53a210f6678dd038fa41e0d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3MDIzMDgy", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1823#pullrequestreview-367023082", "createdAt": "2020-03-02T08:41:53Z", "commit": {"oid": "069e3a31ab28b730e53a210f6678dd038fa41e0d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NTExNzg1", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1823#pullrequestreview-369511785", "createdAt": "2020-03-05T12:01:17Z", "commit": {"oid": "069e3a31ab28b730e53a210f6678dd038fa41e0d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3816, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}