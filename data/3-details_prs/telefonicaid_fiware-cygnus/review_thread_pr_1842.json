{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyMzI0NDA1", "number": 1842, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMToyOToyNlrODqVm2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMTozNDo0N1rODqVtjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NzIwNzk0OnYy", "diffSide": "RIGHT", "path": "CHANGES_NEXT_RELEASE", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMToyOToyNlrOF6BT8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMjozNzowMFrOF6Dc2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM4MzIxOA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            [cygnus-common][PostgreSQL, MySQL] SQL generic backend (#1806)\n          \n          \n            \n            [cygnus-common][PostgreSQL, MySQL] Refactor code to use a SQL generic backend for all SQL-based sinks (#1806)", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1842#discussion_r396383218", "createdAt": "2020-03-23T11:29:26Z", "author": {"login": "fgalan"}, "path": "CHANGES_NEXT_RELEASE", "diffHunk": "@@ -5,3 +5,5 @@\n [cygnus-ngsi][PostgisSink] Enable postgis functions without native types flag on.\n [cygnus-ngsi][RestHandler] Add a not null validation for ngsiVersion header of request.\n [cygnus-ngsi][HDFSSink] Separate files by property periodicity (#1830)\n+[cygnus-common][PostgreSQL, MySQL] SQL generic backend (#1806)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8e37d178ca22cb91e272da27fcef067c7e5f36f"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQxODI2NQ==", "bodyText": "Fixed in 7c4888e", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1842#discussion_r396418265", "createdAt": "2020-03-23T12:37:00Z", "author": {"login": "fgalan"}, "path": "CHANGES_NEXT_RELEASE", "diffHunk": "@@ -5,3 +5,5 @@\n [cygnus-ngsi][PostgisSink] Enable postgis functions without native types flag on.\n [cygnus-ngsi][RestHandler] Add a not null validation for ngsiVersion header of request.\n [cygnus-ngsi][HDFSSink] Separate files by property periodicity (#1830)\n+[cygnus-common][PostgreSQL, MySQL] SQL generic backend (#1806)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM4MzIxOA=="}, "originalCommit": {"oid": "a8e37d178ca22cb91e272da27fcef067c7e5f36f"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NzIxNTEwOnYy", "diffSide": "RIGHT", "path": "doc/cygnus-common/backends_catalogue/sql_backend.md", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMTozMTo0NFrOF6BYkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxNDoxODoxMVrOF6Hegg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM4NDQwMw==", "bodyText": "Is there any ToC or index document in which this new documentation file should be linked?\nIn addition, maybe (not sure) it should be added to mkdocs.yml file.", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1842#discussion_r396384403", "createdAt": "2020-03-23T11:31:44Z", "author": {"login": "fgalan"}, "path": "doc/cygnus-common/backends_catalogue/sql_backend.md", "diffHunk": "@@ -0,0 +1,16 @@\n+# SQL backend", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8e37d178ca22cb91e272da27fcef067c7e5f36f"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQyMDM4MA==", "bodyText": "Maybe the file modify is this one: doc/cygnus-common/backends_catalogue/README.md\nIn this file (and laso mkdocs.yml) it is a matter not only of adding the new .md, but also to remove the ones removed.", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1842#discussion_r396420380", "createdAt": "2020-03-23T12:40:32Z", "author": {"login": "fgalan"}, "path": "doc/cygnus-common/backends_catalogue/sql_backend.md", "diffHunk": "@@ -0,0 +1,16 @@\n+# SQL backend", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM4NDQwMw=="}, "originalCommit": {"oid": "a8e37d178ca22cb91e272da27fcef067c7e5f36f"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQ4NDIyNg==", "bodyText": "Fixed in f880887", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1842#discussion_r396484226", "createdAt": "2020-03-23T14:18:11Z", "author": {"login": "IvanHdzC"}, "path": "doc/cygnus-common/backends_catalogue/sql_backend.md", "diffHunk": "@@ -0,0 +1,16 @@\n+# SQL backend", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM4NDQwMw=="}, "originalCommit": {"oid": "a8e37d178ca22cb91e272da27fcef067c7e5f36f"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NzIyNTA5OnYy", "diffSide": "RIGHT", "path": "cygnus-common/src/main/java/com/telefonica/iot/cygnus/backends/sql/SQLBackend.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMTozNDo0N1rOF6Bexg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxMDo1Nzo0NVrOF6q62g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM4NTk5MA==", "bodyText": "I guess all logs in SQLBackend should include instance name", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1842#discussion_r396385990", "createdAt": "2020-03-23T11:34:47Z", "author": {"login": "AlvaroVega"}, "path": "cygnus-common/src/main/java/com/telefonica/iot/cygnus/backends/sql/SQLBackend.java", "diffHunk": "@@ -75,196 +67,207 @@ public void close(){\n     } // close\n \n     /**\n-     * Sets the MySQL driver. It is protected since it is only used by the\n+     * Sets the SQL driver. It is protected since it is only used by the\n      * tests.\n-     * \n-     * @param driver\n-     *            The MySQL driver to be set.\n+     *\n+     * @param driver The SQL driver to be set.\n      */\n-    protected void setDriver(MySQLDriver driver) {\n+    public void setDriver(SQLBackend.SQLDriver driver) {\n         this.driver = driver;\n     } // setDriver\n \n-    protected MySQLDriver getDriver() {\n+    public SQLBackend.SQLDriver getDriver() {\n         return driver;\n     } // getDriver\n \n-    @Override\n-    public void createDatabase(String dbName) throws CygnusRuntimeError, CygnusPersistenceError {\n-        if (cache.isCachedDb(dbName)) {\n-            LOGGER.debug(\"'\" + dbName + \"' is cached, thus it is not created\");\n+    public void createDestination(String destination) throws CygnusRuntimeError, CygnusPersistenceError {\n+        if (cache.isCachedDestination(destination)) {\n+            LOGGER.debug(\"'\" + destination + \"' is cached, thus it is not created\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8e37d178ca22cb91e272da27fcef067c7e5f36f"}, "originalPosition": 124}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQwNzg4NA==", "bodyText": "Ok. The class has a generic name so it shouldn't be changed. Is it ok if I add the instance as a sufix of the class name? For instance:\ncom.telefonica.iot.cygnus.sql.sqlBackend.mysql\nWould that be ok?", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1842#discussion_r396407884", "createdAt": "2020-03-23T12:17:31Z", "author": {"login": "IvanHdzC"}, "path": "cygnus-common/src/main/java/com/telefonica/iot/cygnus/backends/sql/SQLBackend.java", "diffHunk": "@@ -75,196 +67,207 @@ public void close(){\n     } // close\n \n     /**\n-     * Sets the MySQL driver. It is protected since it is only used by the\n+     * Sets the SQL driver. It is protected since it is only used by the\n      * tests.\n-     * \n-     * @param driver\n-     *            The MySQL driver to be set.\n+     *\n+     * @param driver The SQL driver to be set.\n      */\n-    protected void setDriver(MySQLDriver driver) {\n+    public void setDriver(SQLBackend.SQLDriver driver) {\n         this.driver = driver;\n     } // setDriver\n \n-    protected MySQLDriver getDriver() {\n+    public SQLBackend.SQLDriver getDriver() {\n         return driver;\n     } // getDriver\n \n-    @Override\n-    public void createDatabase(String dbName) throws CygnusRuntimeError, CygnusPersistenceError {\n-        if (cache.isCachedDb(dbName)) {\n-            LOGGER.debug(\"'\" + dbName + \"' is cached, thus it is not created\");\n+    public void createDestination(String destination) throws CygnusRuntimeError, CygnusPersistenceError {\n+        if (cache.isCachedDestination(destination)) {\n+            LOGGER.debug(\"'\" + destination + \"' is cached, thus it is not created\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM4NTk5MA=="}, "originalCommit": {"oid": "a8e37d178ca22cb91e272da27fcef067c7e5f36f"}, "originalPosition": 124}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjUyNDQ1NQ==", "bodyText": "It would be ok, something know what instance (mysql or postgresql/postgis)", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1842#discussion_r396524455", "createdAt": "2020-03-23T15:11:11Z", "author": {"login": "AlvaroVega"}, "path": "cygnus-common/src/main/java/com/telefonica/iot/cygnus/backends/sql/SQLBackend.java", "diffHunk": "@@ -75,196 +67,207 @@ public void close(){\n     } // close\n \n     /**\n-     * Sets the MySQL driver. It is protected since it is only used by the\n+     * Sets the SQL driver. It is protected since it is only used by the\n      * tests.\n-     * \n-     * @param driver\n-     *            The MySQL driver to be set.\n+     *\n+     * @param driver The SQL driver to be set.\n      */\n-    protected void setDriver(MySQLDriver driver) {\n+    public void setDriver(SQLBackend.SQLDriver driver) {\n         this.driver = driver;\n     } // setDriver\n \n-    protected MySQLDriver getDriver() {\n+    public SQLBackend.SQLDriver getDriver() {\n         return driver;\n     } // getDriver\n \n-    @Override\n-    public void createDatabase(String dbName) throws CygnusRuntimeError, CygnusPersistenceError {\n-        if (cache.isCachedDb(dbName)) {\n-            LOGGER.debug(\"'\" + dbName + \"' is cached, thus it is not created\");\n+    public void createDestination(String destination) throws CygnusRuntimeError, CygnusPersistenceError {\n+        if (cache.isCachedDestination(destination)) {\n+            LOGGER.debug(\"'\" + destination + \"' is cached, thus it is not created\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM4NTk5MA=="}, "originalCommit": {"oid": "a8e37d178ca22cb91e272da27fcef067c7e5f36f"}, "originalPosition": 124}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzAyNDI4NA==", "bodyText": "Maybe include self.sqlInstance value in SQLBackendImpl logs would be enough", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1842#discussion_r397024284", "createdAt": "2020-03-24T09:50:09Z", "author": {"login": "AlvaroVega"}, "path": "cygnus-common/src/main/java/com/telefonica/iot/cygnus/backends/sql/SQLBackend.java", "diffHunk": "@@ -75,196 +67,207 @@ public void close(){\n     } // close\n \n     /**\n-     * Sets the MySQL driver. It is protected since it is only used by the\n+     * Sets the SQL driver. It is protected since it is only used by the\n      * tests.\n-     * \n-     * @param driver\n-     *            The MySQL driver to be set.\n+     *\n+     * @param driver The SQL driver to be set.\n      */\n-    protected void setDriver(MySQLDriver driver) {\n+    public void setDriver(SQLBackend.SQLDriver driver) {\n         this.driver = driver;\n     } // setDriver\n \n-    protected MySQLDriver getDriver() {\n+    public SQLBackend.SQLDriver getDriver() {\n         return driver;\n     } // getDriver\n \n-    @Override\n-    public void createDatabase(String dbName) throws CygnusRuntimeError, CygnusPersistenceError {\n-        if (cache.isCachedDb(dbName)) {\n-            LOGGER.debug(\"'\" + dbName + \"' is cached, thus it is not created\");\n+    public void createDestination(String destination) throws CygnusRuntimeError, CygnusPersistenceError {\n+        if (cache.isCachedDestination(destination)) {\n+            LOGGER.debug(\"'\" + destination + \"' is cached, thus it is not created\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM4NTk5MA=="}, "originalCommit": {"oid": "a8e37d178ca22cb91e272da27fcef067c7e5f36f"}, "originalPosition": 124}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzA2NDkyMg==", "bodyText": "great idea! Thanks @AlvaroVega.\nFixed in 73fcd16", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1842#discussion_r397064922", "createdAt": "2020-03-24T10:57:45Z", "author": {"login": "IvanHdzC"}, "path": "cygnus-common/src/main/java/com/telefonica/iot/cygnus/backends/sql/SQLBackend.java", "diffHunk": "@@ -75,196 +67,207 @@ public void close(){\n     } // close\n \n     /**\n-     * Sets the MySQL driver. It is protected since it is only used by the\n+     * Sets the SQL driver. It is protected since it is only used by the\n      * tests.\n-     * \n-     * @param driver\n-     *            The MySQL driver to be set.\n+     *\n+     * @param driver The SQL driver to be set.\n      */\n-    protected void setDriver(MySQLDriver driver) {\n+    public void setDriver(SQLBackend.SQLDriver driver) {\n         this.driver = driver;\n     } // setDriver\n \n-    protected MySQLDriver getDriver() {\n+    public SQLBackend.SQLDriver getDriver() {\n         return driver;\n     } // getDriver\n \n-    @Override\n-    public void createDatabase(String dbName) throws CygnusRuntimeError, CygnusPersistenceError {\n-        if (cache.isCachedDb(dbName)) {\n-            LOGGER.debug(\"'\" + dbName + \"' is cached, thus it is not created\");\n+    public void createDestination(String destination) throws CygnusRuntimeError, CygnusPersistenceError {\n+        if (cache.isCachedDestination(destination)) {\n+            LOGGER.debug(\"'\" + destination + \"' is cached, thus it is not created\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM4NTk5MA=="}, "originalCommit": {"oid": "a8e37d178ca22cb91e272da27fcef067c7e5f36f"}, "originalPosition": 124}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2439, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}