{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyMjM2OTI5", "number": 1841, "title": "set Charset as 'UTF-8' when posting data to elasticsearch", "bodyText": "fix #1839", "createdAt": "2020-03-23T08:39:09Z", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1841", "merged": true, "mergeCommit": {"oid": "858ecc413de74efbed282a93516f1d6690bc7edd"}, "closed": true, "closedAt": "2020-03-25T11:56:53Z", "author": {"login": "nmatsui"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQZfPMgH2gAyMzkyMjM2OTI5OjJiZTMxMDY3MzVkNDQzNjM5MDQ1YjY5NmYyMzU2YjU5NmVmN2MwY2U=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRFUqEgFqTM4MTA0MDI3NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2be3106735d443639045b696f2356b596ef7c0ce", "author": {"user": {"login": "nmatsui", "name": "Nobuyuki Matsui"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/2be3106735d443639045b696f2356b596ef7c0ce", "committedDate": "2020-03-23T07:50:37Z", "message": "set Charset as 'UTF-8' when posting data to elasticsearch"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5MjQ1OTU2", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1841#pullrequestreview-379245956", "createdAt": "2020-03-23T09:15:29Z", "commit": {"oid": "2be3106735d443639045b696f2356b596ef7c0ce"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwOToxNTozMFrOF58iGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwOToxNTozMFrOF58iGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjMwNDkyMg==", "bodyText": "Leftover comment? In that case, it should be removed.", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1841#discussion_r396304922", "createdAt": "2020-03-23T09:15:30Z", "author": {"login": "fgalan"}, "path": "cygnus-common/src/test/java/com/telefonica/iot/cygnus/backends/elasticsearch/ElasticsearchBackendImplTest.java", "diffHunk": "@@ -149,17 +157,18 @@ public void testBulkInsert_woData() {\n         public void testBulkInsert_oneData() {\n             System.out.println(getTestTraceHead(String.format(\"[ElasticsearchBackendImplTest.bulkInsert OK, TLS=%b, Data=1]\", flag)));\n \n+            System.out.println(String.format(\"%s, %b, %s\", schema, flag, msg));\n             List<Map<String, String>> data = new ArrayList<Map<String, String>>();\n             data.add(new HashMap<String, String>(){\n                 {\n                     put(\"recvTimeTs\", \"test_recvTimeTs_1\");\n-                    put(\"data\", \"{\\\"message\\\": \\\"test data 1\\\"}\");\n+                    put(\"data\", msg);\n                 }\n             });\n-            String recvTimeTs1Hash = \"599F4FB6AFDB1BEF51126B47DAC2696F\";\n+            // String recvTimeTs1Hash = \"599F4FB6AFDB1BEF51126B47DAC2696F\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2be3106735d443639045b696f2356b596ef7c0ce"}, "originalPosition": 43}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5MjQ3OTMx", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1841#pullrequestreview-379247931", "createdAt": "2020-03-23T09:18:11Z", "commit": {"oid": "2be3106735d443639045b696f2356b596ef7c0ce"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwOToxODoxMVrOF58oPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwOToxODoxMVrOF58oPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjMwNjQ5NA==", "bodyText": "An entry to CHANGES_NEXT_RELEASE file, briefly describing the modifications in this PR and referencing the issue number, should be included. Please have a look to existing CHANGES_NEXT_RELEASE file to see the style we use.", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1841#discussion_r396306494", "createdAt": "2020-03-23T09:18:11Z", "author": {"login": "fgalan"}, "path": "cygnus-common/src/main/java/com/telefonica/iot/cygnus/backends/elasticsearch/ElasticsearchBackendImpl.java", "diffHunk": "@@ -25,9 +25,9 @@\n import com.telefonica.iot.cygnus.errors.CygnusPersistenceError;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2be3106735d443639045b696f2356b596ef7c0ce"}, "originalPosition": 1}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a6730ec79b7176ae25ae0beea4dd4690fad57be", "author": {"user": {"login": "nmatsui", "name": "Nobuyuki Matsui"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/7a6730ec79b7176ae25ae0beea4dd4690fad57be", "committedDate": "2020-03-23T09:26:24Z", "message": "remove unnecessary lines"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5101c079eebb49aab8b8627ce40612661d1b0e0a", "author": {"user": {"login": "nmatsui", "name": "Nobuyuki Matsui"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/5101c079eebb49aab8b8627ce40612661d1b0e0a", "committedDate": "2020-03-23T10:01:49Z", "message": "Update CHANGES_NEXT_RELEASE for fix/1839_elasticsearch_charset"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b225d3a1b09b7bfc6406a1d594d5298d7f248d46", "author": {"user": {"login": "nmatsui", "name": "Nobuyuki Matsui"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/b225d3a1b09b7bfc6406a1d594d5298d7f248d46", "committedDate": "2020-03-23T10:09:41Z", "message": "Merge master to fix/1839_elasticsearch_charset"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5MzA2NDQ2", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1841#pullrequestreview-379306446", "createdAt": "2020-03-23T10:36:34Z", "commit": {"oid": "b225d3a1b09b7bfc6406a1d594d5298d7f248d46"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5MzU4OTI4", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1841#pullrequestreview-379358928", "createdAt": "2020-03-23T11:54:02Z", "commit": {"oid": "b225d3a1b09b7bfc6406a1d594d5298d7f248d46"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMTo1NDowMlrOF6CFJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMTo1NDowMlrOF6CFJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM5NTgxNQ==", "bodyText": "\"UTF-8\" should be declared as a String, so that if anytime another content-type is supported it would be easyer to modify it.", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1841#discussion_r396395815", "createdAt": "2020-03-23T11:54:02Z", "author": {"login": "IvanHdzC"}, "path": "cygnus-common/src/main/java/com/telefonica/iot/cygnus/backends/elasticsearch/ElasticsearchBackendImpl.java", "diffHunk": "@@ -117,10 +117,10 @@ public JsonResponse bulkInsert(String index, String type, List<Map<String, Strin\n                 jsonLines += String.format(\"{\\\"index\\\":{\\\"_id\\\":\\\"%s-%s\\\"}}\\n\", erecvTimeTs, hash);\n                 jsonLines += String.format(\"%s\\n\", edata);\n             } // for\n-            entity = new StringEntity(jsonLines);\n+            entity = new StringEntity(jsonLines, Charset.forName(\"UTF-8\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b225d3a1b09b7bfc6406a1d594d5298d7f248d46"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a29929ac555f3ecaefa361bf64381ba6e5cc5ac8", "author": {"user": {"login": "nmatsui", "name": "Nobuyuki Matsui"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/a29929ac555f3ecaefa361bf64381ba6e5cc5ac8", "committedDate": "2020-03-25T08:25:34Z", "message": "accept the 'charset' parameter and use it to define the encoding of 'org.apache.http.entity.StringEntity'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8fc121de5afa6f4fb1126101a2ca9d028477e053", "author": {"user": {"login": "nmatsui", "name": "Nobuyuki Matsui"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/8fc121de5afa6f4fb1126101a2ca9d028477e053", "committedDate": "2020-03-25T08:41:18Z", "message": "update Dockerfile and configuration files used in docker container"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f3832d7c49ac1b3677fb8fbe64170ccaf623160", "author": {"user": {"login": "nmatsui", "name": "Nobuyuki Matsui"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/3f3832d7c49ac1b3677fb8fbe64170ccaf623160", "committedDate": "2020-03-25T09:30:56Z", "message": "updated some documents to explain the  parameter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9580f461a645b90b5605a947d83fe207741f835f", "author": {"user": {"login": "nmatsui", "name": "Nobuyuki Matsui"}}, "url": "https://github.com/telefonicaid/fiware-cygnus/commit/9580f461a645b90b5605a947d83fe207741f835f", "committedDate": "2020-03-25T09:40:33Z", "message": "Merge master to fix/1839_elasticsearch_charset"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMDQwMjc1", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1841#pullrequestreview-381040275", "createdAt": "2020-03-25T10:54:53Z", "commit": {"oid": "9580f461a645b90b5605a947d83fe207741f835f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3819, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}