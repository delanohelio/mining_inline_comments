{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY0NTQxMTQ0", "number": 476, "title": "More stable builds", "bodyText": "This PR contains the improvements that were discovered during working on PR-475.\nWe had several problems that were causing different tests to fail after different changes. These failures were not caused directly by the tests but the order of the tests.\nWhat helped to resolve these problems that anyone can suffer from:\n\nSwitching off parallel builds and tests\nPublishing Gradle unit tests reports to the Jenkins - they are quite friendly to use\nMaking TomcatHttpsTest stabler by clearing the javax.net.ssl settings before the test, these can be set by other tests so the single-threaded tests and cleanup make sure that these tests will work well\n\nOther tests that benefit from single-threaded execution are Zuul filter tests that use RequestContext.getCurrentContext() which can use the static testContext.\nMany other tests (for example those that I have written or reviewed) were written without taking parallel execution into account and can be failing unpredictably.", "createdAt": "2020-01-19T14:39:26Z", "url": "https://github.com/zowe/api-layer/pull/476", "merged": true, "mergeCommit": {"oid": "a980ee2d98c408e840be859a205eb61d14bbc33e"}, "closed": true, "closedAt": "2020-01-22T11:50:26Z", "author": {"login": "plavjanik"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb74p0GgH2gAyMzY0NTQxMTQ0OmJhZTdlZjI0NjUzZGI1MGZhNjRjNzUzNzUyYjkzZWUyM2E5MGRjZjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb8z7JigFqTM0NjUxMzU3NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bae7ef24653db50fa64c753752b93ee23a90dcf8", "author": {"user": {"login": "plavjanik", "name": "Petr Plavjanik"}}, "url": "https://github.com/zowe/api-layer/commit/bae7ef24653db50fa64c753752b93ee23a90dcf8", "committedDate": "2020-01-19T14:16:49Z", "message": "Add unit tests reports for services\n\nSigned-off-by: Petr Plavjanik <plavjanik@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa930352ed5ee6a47b949c6731114fafa14f104e", "author": {"user": {"login": "plavjanik", "name": "Petr Plavjanik"}}, "url": "https://github.com/zowe/api-layer/commit/aa930352ed5ee6a47b949c6731114fafa14f104e", "committedDate": "2020-01-19T14:17:06Z", "message": "Swith of parallel builds and tests\n\nSigned-off-by: Petr Plavjanik <plavjanik@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6997814f3b54bfaa20465a6e108606da28ff850c", "author": {"user": {"login": "plavjanik", "name": "Petr Plavjanik"}}, "url": "https://github.com/zowe/api-layer/commit/6997814f3b54bfaa20465a6e108606da28ff850c", "committedDate": "2020-01-19T14:17:50Z", "message": "Clear javax.net.ssl properties before TomcatHttpsTests\n\nSigned-off-by: Petr Plavjanik <plavjanik@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1MjEyNDMz", "url": "https://github.com/zowe/api-layer/pull/476#pullrequestreview-345212433", "createdAt": "2020-01-20T10:30:01Z", "commit": {"oid": "6997814f3b54bfaa20465a6e108606da28ff850c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1MjEyNzE0", "url": "https://github.com/zowe/api-layer/pull/476#pullrequestreview-345212714", "createdAt": "2020-01-20T10:30:28Z", "commit": {"oid": "6997814f3b54bfaa20465a6e108606da28ff850c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQxMDozMDoyOFrOFfZ35w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQxMDozMDoyOFrOFfZ35w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODQ3NDA4Nw==", "bodyText": "Is it useful?", "url": "https://github.com/zowe/api-layer/pull/476#discussion_r368474087", "createdAt": "2020-01-20T10:30:28Z", "author": {"login": "JirkaAichler"}, "path": "common-service-core/src/test/java/com/ca/mfaas/tomcat/TomcatHttpsTest.java", "diffHunk": "@@ -50,6 +62,7 @@ public void noTrustStoreShouldFail() throws IOException, LifecycleException {\n             startTomcatAndDoHttpsRequest(httpsConfig);\n             fail(EXPECTED_SSL_HANDSHAKE_EXCEPTION_NOT_THROWN);\n         } catch (SSLHandshakeException e) {  // NOSONAR\n+            log.info(\"SSLHandshakeException: {}\", e, e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6997814f3b54bfaa20465a6e108606da28ff850c"}, "originalPosition": 52}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ2NTEzNTc1", "url": "https://github.com/zowe/api-layer/pull/476#pullrequestreview-346513575", "createdAt": "2020-01-22T11:20:09Z", "commit": {"oid": "6997814f3b54bfaa20465a6e108606da28ff850c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4956, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}