{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgzMDE3NjAx", "number": 536, "title": "Check that the ignoring SslContextFactory has empty keystore", "bodyText": "A unit test that checks that ignoringSslContextFactory has empty keystore (necessary for IBM Java to not use the javax.net properties to load the keystore) to make sure that code in #527\nwill work in the future.\nI could not find public API to get the keystore and the reflection did not work for me either so adding a package field was the easiest option.\nSigned-off-by: Petr Plavjanik plavjanik@gmail.com", "createdAt": "2020-03-03T15:29:40Z", "url": "https://github.com/zowe/api-layer/pull/536", "merged": true, "mergeCommit": {"oid": "2279fc7ee38d8216927fbf28f177bb13d0bdb66d"}, "closed": true, "closedAt": "2020-03-04T16:18:05Z", "author": {"login": "plavjanik"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKD_p1AH2gAyMzgzMDE3NjAxOmM1ZDBlNzA3YzMwMDkxY2I1Mzc0N2M5NmRkNWViMGJhMTk5YjQxNDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKY-zvgFqTM2ODg5NjY1OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c5d0e707c30091cb53747c96dd5eb0ba199b4149", "author": {"user": {"login": "plavjanik", "name": "Petr Plavjanik"}}, "url": "https://github.com/zowe/api-layer/commit/c5d0e707c30091cb53747c96dd5eb0ba199b4149", "committedDate": "2020-03-03T15:24:34Z", "message": "Check that the ignoring SslContextFactory has empty keystore\n\nSigned-off-by: Petr Plavjanik <plavjanik@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4MDg2NDA3", "url": "https://github.com/zowe/api-layer/pull/536#pullrequestreview-368086407", "createdAt": "2020-03-03T15:39:47Z", "commit": {"oid": "c5d0e707c30091cb53747c96dd5eb0ba199b4149"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxNTozOTo0OFrOFxLCkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wM1QxNTozOTo0OFrOFxLCkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzEwNTQyNA==", "bodyText": "Typo", "url": "https://github.com/zowe/api-layer/pull/536#discussion_r387105424", "createdAt": "2020-03-03T15:39:48Z", "author": {"login": "JirkaAichler"}, "path": "common-service-core/src/main/java/org/zowe/apiml/security/HttpsFactory.java", "diffHunk": "@@ -169,7 +176,8 @@ private void loadKeystoreMaterial(SSLContextBuilder sslContextBuilder) throws Un\n                 config.getKeyPassword() == null ? null : config.getKeyPassword().toCharArray());\n     }\n \n-    private void loadKeyringMaterial(SSLContextBuilder sslContextBuilder) throws UnrecoverableKeyException,\n+    private void\n+    loadKeyringMaterial(SSLContextBuilder sslContextBuilder) throws UnrecoverableKeyException,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c5d0e707c30091cb53747c96dd5eb0ba199b4149"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NTcwNDc3", "url": "https://github.com/zowe/api-layer/pull/536#pullrequestreview-368570477", "createdAt": "2020-03-04T08:08:43Z", "commit": {"oid": "c5d0e707c30091cb53747c96dd5eb0ba199b4149"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwODowODo0M1rOFxjUFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwODoxMzoyNFrOFxjbmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzUwMzEyNw==", "bodyText": "This method has default access modifier, but what about to be clear put here comment to known:\n\nmethod is only for testing purpose\nKeyStore is stored only in case of empty keystore (not if keystore is provided)", "url": "https://github.com/zowe/api-layer/pull/536#discussion_r387503127", "createdAt": "2020-03-04T08:08:43Z", "author": {"login": "pj892031"}, "path": "common-service-core/src/main/java/org/zowe/apiml/security/HttpsFactory.java", "diffHunk": "@@ -76,6 +77,10 @@ public ConnectionSocketFactory createSslSocketFactory() {\n         }\n     }\n \n+    KeyStore getUsedStore() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c5d0e707c30091cb53747c96dd5eb0ba199b4149"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzUwNTA0OQ==", "bodyText": "What about the second case with ignoring=false for purpose of restTemplateWithoutKeystore etc. I think we don't have any tests for that.", "url": "https://github.com/zowe/api-layer/pull/536#discussion_r387505049", "createdAt": "2020-03-04T08:13:24Z", "author": {"login": "pj892031"}, "path": "common-service-core/src/test/java/org/zowe/apiml/security/HttpsFactoryTest.java", "diffHunk": "@@ -44,11 +50,12 @@ public void shouldCreateSecureSslSocketFactory() {\n     }\n \n     @Test\n-    public void shouldCreateIgnoringSslSocketFactory() {\n+    public void shouldCreateIgnoringSslSocketFactory() throws KeyStoreException {\n         HttpsConfig httpsConfig = httpsConfigBuilder.verifySslCertificatesOfServices(false).build();\n         HttpsFactory httpsFactory = new HttpsFactory(httpsConfig);\n         ConnectionSocketFactory socketFactory = httpsFactory.createSslSocketFactory();\n         assertEquals(SSLConnectionSocketFactory.class, socketFactory.getClass());\n+        assertFalse(httpsFactory.getUsedKeyStore().aliases().hasMoreElements());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c5d0e707c30091cb53747c96dd5eb0ba199b4149"}, "originalPosition": 41}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe7d6c9916033e57ebcccaab1866902250a4aca7", "author": {"user": {"login": "plavjanik", "name": "Petr Plavjanik"}}, "url": "https://github.com/zowe/api-layer/commit/fe7d6c9916033e57ebcccaab1866902250a4aca7", "committedDate": "2020-03-04T15:34:54Z", "message": "Address review feedback\n\nSigned-off-by: Petr Plavjanik <plavjanik@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e47786f40b0b0ac0598c0cfb1bc119c74cab9f9", "author": {"user": {"login": "plavjanik", "name": "Petr Plavjanik"}}, "url": "https://github.com/zowe/api-layer/commit/4e47786f40b0b0ac0598c0cfb1bc119c74cab9f9", "committedDate": "2020-03-04T15:35:43Z", "message": "Merge branch 'master' into test-for-empty-context"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4ODgzMzcz", "url": "https://github.com/zowe/api-layer/pull/536#pullrequestreview-368883373", "createdAt": "2020-03-04T15:37:04Z", "commit": {"oid": "4e47786f40b0b0ac0598c0cfb1bc119c74cab9f9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4ODk2NjU4", "url": "https://github.com/zowe/api-layer/pull/536#pullrequestreview-368896658", "createdAt": "2020-03-04T15:51:39Z", "commit": {"oid": "4e47786f40b0b0ac0598c0cfb1bc119c74cab9f9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4915, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}