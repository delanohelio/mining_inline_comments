{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwOTEzNzY4", "number": 532, "title": "Version endpoint in API Gateway", "bodyText": "Endpoint to show APIML and Zowe version throught the API Gateway. To see Zowe version it needs to set up the launch parameter of API Gateway - apiml.zoweManifest with a path to Zowe build manifest.json file, which usually located in the root folder of Zowe build.\nRelated GitHub Issue: #345", "createdAt": "2020-02-27T15:28:17Z", "url": "https://github.com/zowe/api-layer/pull/532", "merged": true, "mergeCommit": {"oid": "2e146872fda74663f6a3041f66ffa079d798edeb"}, "closed": true, "closedAt": "2020-03-12T10:39:22Z", "author": {"login": "arxioly"}, "timelineItems": {"totalCount": 29, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIdejrAFqTM2NTc2OTA2OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcM4BlJgFqTM3MzM4MDU3Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1NzY5MDY4", "url": "https://github.com/zowe/api-layer/pull/532#pullrequestreview-365769068", "createdAt": "2020-02-27T15:48:03Z", "commit": {"oid": "8d984be2f88cc7fcaf52efde833c191632848e05"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxNTo0ODowNFrOFvWZog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxNTo1NzozM1rOFvWzQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTE5NDQwMg==", "bodyText": "Could you please provide more information in the name about what it is supposed to do?\n\nThe given, when, then form is good to store this information", "url": "https://github.com/zowe/api-layer/pull/532#discussion_r385194402", "createdAt": "2020-02-27T15:48:04Z", "author": {"login": "balhar-jakub"}, "path": "gateway-service/src/test/java/org/zowe/apiml/gateway/controllers/VersionControllerTest.java", "diffHunk": "@@ -0,0 +1,56 @@\n+/*\n+ * This program and the accompanying materials are made available under the terms of the\n+ * Eclipse Public License v2.0 which accompanies this distribution, and is available at\n+ * https://www.eclipse.org/legal/epl-v20.html\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Copyright Contributors to the Zowe Project.\n+ */\n+package org.zowe.apiml.gateway.controllers;\n+\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.mockito.Mock;\n+import org.mockito.Mockito;\n+import org.springframework.test.context.junit4.SpringRunner;\n+import org.springframework.test.web.servlet.MockMvc;\n+import org.springframework.test.web.servlet.setup.MockMvcBuilders;\n+import org.zowe.apiml.product.version.VersionInfo;\n+import org.zowe.apiml.product.version.VersionService;\n+\n+import static org.hamcrest.core.Is.is;\n+import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;\n+import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.jsonPath;\n+import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;\n+\n+@RunWith(SpringRunner.class)\n+public class VersionControllerTest {\n+    @Mock\n+    private VersionService versionService;\n+\n+    private MockMvc mockMvc;\n+\n+    @Before\n+    public void setUp() {\n+        VersionController versionController = new VersionController(versionService);\n+        mockMvc = MockMvcBuilders.standaloneSetup(versionController).build();\n+    }\n+\n+    @Test\n+    public void callVersionEndpoint() throws Exception {\n+        Mockito.when(versionService.getVersion()).thenReturn(getDummyVersionInfo());\n+        this.mockMvc.perform(get(\"/version\"))\n+            .andExpect(status().isOk())\n+            .andExpect(jsonPath(\"$.zoweVersion\", is(\"0.0.0 build #000\")))\n+            .andExpect(jsonPath(\"$.apimlVersion\", is(\"0.0.0 build #000 (1a3b5c7)\")));\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d984be2f88cc7fcaf52efde833c191632848e05"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTE5NjU3Nw==", "bodyText": "Add an example of how the version information looks like.", "url": "https://github.com/zowe/api-layer/pull/532#discussion_r385196577", "createdAt": "2020-02-27T15:51:15Z", "author": {"login": "balhar-jakub"}, "path": "docs/diagnostics.md", "diffHunk": "@@ -28,3 +28,10 @@ It is also printed to the log as the very first messsage:\n     [GS] 16:32:04.098 [main] INFO org.zowe.apiml.product.service.BuildInfo - Service gateway-service version xyz #n/a on 2018-08-23T14:28:33.231Z by plape03mac850 commit 6fd7c53\n     [DC] 16:32:04.195 [main] INFO org.zowe.apiml.product.service.BuildInfo - Service discoverable-client version xyz #n/a on 2018-08-23T14:28:33.217Z by plape03mac850 commit 6fd7c53\n     [AC] 16:32:04.317 [main] INFO org.zowe.apiml.product.service.BuildInfo - Service api-catalog-services version xyz #n/a on 2018-08-23T14:28:33.201Z by plape03mac850 commit 6fd7c53\n+\n+\n+## Version Information", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d984be2f88cc7fcaf52efde833c191632848e05"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTIwMDk2Mg==", "bodyText": "Would it be possible to move at least the internal logic to the separate private method to make this method more easily understood?", "url": "https://github.com/zowe/api-layer/pull/532#discussion_r385200962", "createdAt": "2020-02-27T15:57:33Z", "author": {"login": "balhar-jakub"}, "path": "apiml-common/src/main/java/org/zowe/apiml/product/version/VersionService.java", "diffHunk": "@@ -0,0 +1,123 @@\n+/*\n+ * This program and the accompanying materials are made available under the terms of the\n+ * Eclipse Public License v2.0 which accompanies this distribution, and is available at\n+ * https://www.eclipse.org/legal/epl-v20.html\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Copyright Contributors to the Zowe Project.\n+ */\n+package org.zowe.apiml.product.version;\n+\n+import com.fasterxml.jackson.annotation.JsonInclude;\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.fasterxml.jackson.databind.node.ObjectNode;\n+import lombok.extern.slf4j.Slf4j;\n+import org.apache.commons.lang.StringUtils;\n+import org.springframework.beans.factory.annotation.Value;\n+import org.springframework.stereotype.Service;\n+import org.zowe.apiml.util.FileUtils;\n+\n+import java.io.IOException;\n+\n+/**\n+ * Class for retrieving information about Zowe version from Zowe's manifest.json\n+ * and information about API ML version from build-info.properties and git.properties\n+ */\n+\n+@Slf4j\n+@Service\n+public class VersionService {\n+    private static final String NO_VERSION = \"Build information is not available\";\n+    private static final VersionInfo version = new VersionInfo();\n+\n+    private final BuildInfoDetails buildInfo;\n+\n+    @Value(\"${apiml.zoweManifest:#{null}}\")\n+    private String zoweManifest;\n+\n+    public VersionService() {\n+        buildInfo = new BuildInfo().getBuildInfoDetails();\n+    }\n+\n+    public VersionService(BuildInfoDetails buildInfo) {\n+        this.buildInfo = buildInfo;\n+    }\n+\n+    /**\n+     * Getting the cached VersionInfo object, if it's empty it will be filled\n+     * @return filled VersionInfo object\n+     */\n+    public VersionInfo getVersion() {\n+        if (version.getApimlVersion() == null) {\n+            updateVersionInfo();\n+        }\n+        return version;\n+    }\n+\n+    /**\n+     * Updating the cached VersionInfo object with values from Zowe's manifest.json, API ML's build-info.properties\n+     * and git.properties files\n+     */\n+    public void updateVersionInfo() {\n+        if (StringUtils.isNotEmpty(zoweManifest)) {\n+            version.setZoweVersion(getZoweVersion(zoweManifest));\n+        }\n+        version.setApimlVersion(getApimlVersion());\n+    }\n+\n+    /**\n+     * Retrieving the information about API ML version from build-info.properties and git.properties files\n+     * @return the version, build and commit numbers in one string\n+     */\n+    private String getApimlVersion() {\n+        String apimlVersion = NO_VERSION;\n+        if (!buildInfo.getVersion().equalsIgnoreCase(\"unknown\")) {\n+            apimlVersion = String.format(\"%s build #%s (%s)\", buildInfo.getVersion(), buildInfo.getNumber(), buildInfo.getCommitId());\n+        }\n+        return apimlVersion;\n+    }\n+\n+    /**\n+     * Retrieving the information about Zowe version from manifest.json file\n+     * @param manifestJsonFile the path to Zowe's manifest.json file\n+     * @return the version and build numbers in one string\n+     */\n+    private String getZoweVersion(String manifestJsonFile) {\n+        ObjectMapper mapper = new ObjectMapper();\n+        mapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);\n+        try {\n+            String manifestJson = FileUtils.readFile(manifestJsonFile);\n+            if (manifestJson != null) {\n+                ObjectNode objectNode = mapper.readValue(manifestJson, ObjectNode.class);\n+                JsonNode versionNode = objectNode.get(\"version\");\n+                if (versionNode != null && !versionNode.asText().isEmpty()) {\n+                    StringBuilder zoweVersion = new StringBuilder();\n+                    zoweVersion.append(versionNode.asText());\n+                    String buildNumber = \"n/a\";\n+                    JsonNode buildNode = objectNode.get(\"build\");\n+                    if (buildNode != null) {\n+                        JsonNode buildNumberNode = buildNode.get(\"number\");\n+                        if (buildNumberNode != null && StringUtils.isNotEmpty(buildNumberNode.asText())) {\n+                            buildNumber = buildNumberNode.asText();\n+                        }\n+                    }\n+                    zoweVersion.append(\" build #\");\n+                    zoweVersion.append(buildNumber);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d984be2f88cc7fcaf52efde833c191632848e05"}, "originalPosition": 107}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MDUxNTU5", "url": "https://github.com/zowe/api-layer/pull/532#pullrequestreview-366051559", "createdAt": "2020-02-27T22:40:33Z", "commit": {"oid": "ad06a452c0af6a565e4c6ffb22237a01ec8c79c8"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3MTU5MjM1", "url": "https://github.com/zowe/api-layer/pull/532#pullrequestreview-367159235", "createdAt": "2020-03-02T12:25:04Z", "commit": {"oid": "ad06a452c0af6a565e4c6ffb22237a01ec8c79c8"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fadf357b2b50530939aac3a46b7a1536d895fec3", "author": {"user": {"login": "arxioly", "name": "Elena Kubantseva"}}, "url": "https://github.com/zowe/api-layer/commit/fadf357b2b50530939aac3a46b7a1536d895fec3", "committedDate": "2020-03-03T10:13:58Z", "message": "changed version model and added changes in documentation\n\nSigned-off-by: Elena Kubantseva <elena.kubantseva@broadcom.com>"}, "afterCommit": {"oid": "823fb54bfa29e930408db7415bccf10d6be09e99", "author": {"user": {"login": "arxioly", "name": "Elena Kubantseva"}}, "url": "https://github.com/zowe/api-layer/commit/823fb54bfa29e930408db7415bccf10d6be09e99", "committedDate": "2020-03-03T10:16:05Z", "message": "changed version model and added changes in documentation\n\nSigned-off-by: Elena Kubantseva <elena.kubantseva@broadcom.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ea9d72aa94e4adabd8912c780f01582cb00d912d", "author": {"user": {"login": "arxioly", "name": "Elena Kubantseva"}}, "url": "https://github.com/zowe/api-layer/commit/ea9d72aa94e4adabd8912c780f01582cb00d912d", "committedDate": "2020-03-04T15:44:59Z", "message": "added encoding manifest.json if it's not in UTF-8\n\nSigned-off-by: Elena Kubantseva <elena.kubantseva@broadcom.com>"}, "afterCommit": {"oid": "a5b2f24d122f9802b33b13f7672c6f7c77f99fb3", "author": {"user": {"login": "arxioly", "name": "Elena Kubantseva"}}, "url": "https://github.com/zowe/api-layer/commit/a5b2f24d122f9802b33b13f7672c6f7c77f99fb3", "committedDate": "2020-03-04T17:39:32Z", "message": "added encoding manifest.json if it's not in UTF-8\n\nSigned-off-by: Elena Kubantseva <elena.kubantseva@broadcom.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d0562533232b1ac9e26349900a73061ef9a2dae0", "author": {"user": {"login": "arxioly", "name": "Elena Kubantseva"}}, "url": "https://github.com/zowe/api-layer/commit/d0562533232b1ac9e26349900a73061ef9a2dae0", "committedDate": "2020-03-04T18:04:44Z", "message": "changed example of response\n\nSigned-off-by: Elena Kubantseva <elena.kubantseva@broadcom.com>"}, "afterCommit": {"oid": "5ca08c710a89208dea6fa536b3fc18406b0fd8b3", "author": {"user": {"login": "arxioly", "name": "Elena Kubantseva"}}, "url": "https://github.com/zowe/api-layer/commit/5ca08c710a89208dea6fa536b3fc18406b0fd8b3", "committedDate": "2020-03-04T18:06:32Z", "message": "changed example of response\n\nSigned-off-by: Elena Kubantseva <elena.kubantseva@broadcom.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NTYyMDg4", "url": "https://github.com/zowe/api-layer/pull/532#pullrequestreview-369562088", "createdAt": "2020-03-05T13:23:17Z", "commit": {"oid": "5ca08c710a89208dea6fa536b3fc18406b0fd8b3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NTY0MjM4", "url": "https://github.com/zowe/api-layer/pull/532#pullrequestreview-369564238", "createdAt": "2020-03-05T13:26:26Z", "commit": {"oid": "5ca08c710a89208dea6fa536b3fc18406b0fd8b3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NTY1MTk0", "url": "https://github.com/zowe/api-layer/pull/532#pullrequestreview-369565194", "createdAt": "2020-03-05T13:27:53Z", "commit": {"oid": "5ca08c710a89208dea6fa536b3fc18406b0fd8b3"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwOTc5NjYw", "url": "https://github.com/zowe/api-layer/pull/532#pullrequestreview-370979660", "createdAt": "2020-03-09T08:25:06Z", "commit": {"oid": "ae9e59314cf44c254de6dc3c6a1ace88a80d2d2e"}, "state": "DISMISSED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwODoyNTowNlrOFzeGvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQwODo0MToxNVrOFzegig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUxNDk0Mw==", "bodyText": "Should update other scripts referencing this one and documentation, if this is not WIP", "url": "https://github.com/zowe/api-layer/pull/532#discussion_r389514943", "createdAt": "2020-03-09T08:25:06Z", "author": {"login": "jandadav"}, "path": "api-catalog-ui/frontend/package.json", "diffHunk": "@@ -36,13 +36,13 @@\n         \"redux-thunk\": \"2.3.0\",\n         \"rimraf\": \"^3.0.0\",\n         \"rxjs\": \"6.3.3\",\n-        \"swagger-ui\": \"^3.23.1\",\n+        \"swagger-ui-react\": \"^3.23.0\",\n         \"uuid\": \"3.3.2\"\n     },\n     \"scripts\": {\n         \"start\": \"cross-env HTTPS=true react-scripts start\",\n         \"start:dev\": \"concurrently -c blue,green -n Backend,UI \\\"npm run start:mocked-backend\\\" \\\"cross-env REACT_APP_GATEWAY_URL=http://localhost:8000 npm run start\\\"\",\n-        \"start:mocked-backend\": \"cross-env REACT_APP_GATEWAY_URL=http://localhost:8000 nodemon mocked-backend/server.js\",\n+        \"start:mock\": \"cross-env REACT_APP_GATEWAY_URL=http://localhost:8000 nodemon mocked-backend/server.js\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae9e59314cf44c254de6dc3c6a1ace88a80d2d2e"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUxOTAxMw==", "bodyText": "This was not changed by you but we have typo here", "url": "https://github.com/zowe/api-layer/pull/532#discussion_r389519013", "createdAt": "2020-03-09T08:35:29Z", "author": {"login": "jandadav"}, "path": "gateway-service/src/main/resources/gateway-api-doc.json", "diffHunk": "@@ -65,7 +69,7 @@\n                 }\n             }\n         },\n-        \"/query\": {\n+        \"/auth/query\": {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae9e59314cf44c254de6dc3c6a1ace88a80d2d2e"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUyMTU0Ng==", "bodyText": "Calling the endpoint for version as documented is timing out and throwing zuul exceptions on gw\nimplies URL https://localhost:10010/api/v1/gateway/version\nPlease help me if i'm interpreting the information on the apidoc incorrectly", "url": "https://github.com/zowe/api-layer/pull/532#discussion_r389521546", "createdAt": "2020-03-09T08:41:15Z", "author": {"login": "jandadav"}, "path": "gateway-service/src/main/resources/gateway-api-doc.json", "diffHunk": "@@ -164,11 +168,38 @@\n                     }\n                 }\n             }\n+        },\n+        \"/version\": {\n+            \"get\": {\n+                \"tags\": [\n+                    \"Diagnostic\"\n+                ],\n+                \"summary\": \"Return version information of API Mediation Layer and Zowe\",\n+                \"description\": \"Use the `/version` API to get the version information of API Mediation Layer and Zowe.\\nThe version information includes version, build number and commit hash.\\nIn the response can be only API ML version information or API ML and Zowe version information, this depends on API ML installed as part of Zowe build or as standalone application.\",\n+                \"operationId\": \"VersionInfoUsingGET\",\n+                \"responses\": {\n+                    \"200\": {\n+                        \"description\": \"OK\",\n+                        \"content\": {\n+                            \"application/json\": {\n+                                \"schema\": {\n+                                    \"$ref\": \"#/components/schemas/VersionInfo\"\n+                                }\n+                            }\n+                        }\n+                    }\n+                }\n+            },\n+            \"servers\": [\n+                {\n+                    \"url\": \"/\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae9e59314cf44c254de6dc3c6a1ace88a80d2d2e"}, "originalPosition": 62}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ae9e59314cf44c254de6dc3c6a1ace88a80d2d2e", "author": {"user": {"login": "arxioly", "name": "Elena Kubantseva"}}, "url": "https://github.com/zowe/api-layer/commit/ae9e59314cf44c254de6dc3c6a1ace88a80d2d2e", "committedDate": "2020-03-06T15:04:40Z", "message": "added version endpoint to gateway-api-doc.json, and enabled try-it-out button\n\nSigned-off-by: Elena Kubantseva <elena.kubantseva@broadcom.com>"}, "afterCommit": {"oid": "a246d3d7824fdc409b6fe25eb6187c91265e71e1", "author": {"user": {"login": "arxioly", "name": "Elena Kubantseva"}}, "url": "https://github.com/zowe/api-layer/commit/a246d3d7824fdc409b6fe25eb6187c91265e71e1", "committedDate": "2020-03-10T10:29:42Z", "message": "version endpoint replaced to api/v1/gateway\n\nSigned-off-by: Elena Kubantseva <elena.kubantseva@broadcom.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7ad523ec4792c0534a35e820f1d2dc27d84bd187", "author": {"user": {"login": "arxioly", "name": "Elena Kubantseva"}}, "url": "https://github.com/zowe/api-layer/commit/7ad523ec4792c0534a35e820f1d2dc27d84bd187", "committedDate": "2020-03-11T11:48:01Z", "message": "fixed routing problem\n\nSigned-off-by: Elena Kubantseva <elena.kubantseva@broadcom.com>"}, "afterCommit": {"oid": "3bfe4c6dcf10a94f0fb971dab3752fd146ca3af0", "author": {"user": {"login": "arxioly", "name": "Elena Kubantseva"}}, "url": "https://github.com/zowe/api-layer/commit/3bfe4c6dcf10a94f0fb971dab3752fd146ca3af0", "committedDate": "2020-03-11T12:00:44Z", "message": "fixed routing problem\n\nSigned-off-by: Elena Kubantseva <elena.kubantseva@broadcom.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyNzA5NTMy", "url": "https://github.com/zowe/api-layer/pull/532#pullrequestreview-372709532", "createdAt": "2020-03-11T12:23:45Z", "commit": {"oid": "41c845fecffc842996747e4265d2fe09546d6899"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyNzI5NjIy", "url": "https://github.com/zowe/api-layer/pull/532#pullrequestreview-372729622", "createdAt": "2020-03-11T12:54:18Z", "commit": {"oid": "41c845fecffc842996747e4265d2fe09546d6899"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMjo1NDoxOFrOF01owQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMjo1NDoxOFrOF01owQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDk0OTA1Nw==", "bodyText": "Integration test is failing. requestString should be updated to contain also either /gateway or /api/v1/gateway I guess.", "url": "https://github.com/zowe/api-layer/pull/532#discussion_r390949057", "createdAt": "2020-03-11T12:54:18Z", "author": {"login": "taban03"}, "path": "integration-tests/src/test/java/org/zowe/apiml/gatewayservice/VersionEndpointTest.java", "diffHunk": "@@ -0,0 +1,51 @@\n+/*\n+ * This program and the accompanying materials are made available under the terms of the\n+ * Eclipse Public License v2.0 which accompanies this distribution, and is available at\n+ * https://www.eclipse.org/legal/epl-v20.html\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Copyright Contributors to the Zowe Project.\n+ */\n+package org.zowe.apiml.gatewayservice;\n+\n+import io.restassured.RestAssured;\n+import org.junit.Before;\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.zowe.apiml.util.config.ConfigReader;\n+import org.zowe.apiml.util.config.GatewayServiceConfiguration;\n+\n+import static io.restassured.RestAssured.given;\n+import static org.apache.http.HttpStatus.SC_OK;\n+import static org.hamcrest.CoreMatchers.containsString;\n+import static org.hamcrest.Matchers.is;\n+\n+public class VersionEndpointTest {\n+\n+    private String requestString;\n+\n+    @BeforeClass\n+    public static void beforeClass() {\n+        RestAssured.useRelaxedHTTPSValidation();\n+    }\n+\n+    @Before\n+    public void setUp() {\n+        GatewayServiceConfiguration serviceConfiguration = ConfigReader.environmentConfiguration().getGatewayServiceConfiguration();\n+        String scheme = serviceConfiguration.getScheme();\n+        String host = serviceConfiguration.getHost();\n+        int port = serviceConfiguration.getPort();\n+        requestString = String.format(\"%s://%s:%s%s\", scheme, host, port, \"/version\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41c845fecffc842996747e4265d2fe09546d6899"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1bf0b2317c6c702394e559e9d3c834abed1840a", "author": {"user": {"login": "arxioly", "name": "Elena Kubantseva"}}, "url": "https://github.com/zowe/api-layer/commit/d1bf0b2317c6c702394e559e9d3c834abed1840a", "committedDate": "2020-03-11T14:31:26Z", "message": "added version controller\n\nSigned-off-by: Elena Kubantseva <elena.kubantseva@broadcom.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6320d4a89606537929f0cb03c7983a3b549a70ba", "author": {"user": {"login": "arxioly", "name": "Elena Kubantseva"}}, "url": "https://github.com/zowe/api-layer/commit/6320d4a89606537929f0cb03c7983a3b549a70ba", "committedDate": "2020-03-11T14:31:27Z", "message": "added JavaDocs, tests, parameter in installation scripts and docs\n\nSigned-off-by: Elena Kubantseva <elena.kubantseva@broadcom.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7e0a3c8cb87507dc641c2309539868dccaf5228", "author": {"user": {"login": "arxioly", "name": "Elena Kubantseva"}}, "url": "https://github.com/zowe/api-layer/commit/e7e0a3c8cb87507dc641c2309539868dccaf5228", "committedDate": "2020-03-11T14:31:27Z", "message": "added changes after review\n\nSigned-off-by: Elena Kubantseva <elena.kubantseva@broadcom.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79590609098b9efd106fdac2f05b850b9011fe51", "author": {"user": {"login": "arxioly", "name": "Elena Kubantseva"}}, "url": "https://github.com/zowe/api-layer/commit/79590609098b9efd106fdac2f05b850b9011fe51", "committedDate": "2020-03-11T14:31:27Z", "message": "changed version model and added changes in documentation\n\nSigned-off-by: Elena Kubantseva <elena.kubantseva@broadcom.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4bac9d014728a51f12956342cec61a5a347c2656", "author": {"user": {"login": "janan07", "name": "Andrew Jandacek"}}, "url": "https://github.com/zowe/api-layer/commit/4bac9d014728a51f12956342cec61a5a347c2656", "committedDate": "2020-03-11T14:31:27Z", "message": "Update diagnostics.md\n\nSigned-off-by: Andrew Jandacek <andrew.jandacek@broadcom.com>\nSigned-off-by: Elena Kubantseva <elena.kubantseva@broadcom.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27d8b48ec37b5948ebb640f5f5c23433ca5014b9", "author": {"user": {"login": "janan07", "name": "Andrew Jandacek"}}, "url": "https://github.com/zowe/api-layer/commit/27d8b48ec37b5948ebb640f5f5c23433ca5014b9", "committedDate": "2020-03-11T14:31:27Z", "message": "Update FileUtils.java\n\nSigned-off-by: Andrew Jandacek <andrew.jandacek@broadcom.com>\nSigned-off-by: Elena Kubantseva <elena.kubantseva@broadcom.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0af7875b1a4221cdd5570eba3831a3dd0bb10cd4", "author": {"user": {"login": "arxioly", "name": "Elena Kubantseva"}}, "url": "https://github.com/zowe/api-layer/commit/0af7875b1a4221cdd5570eba3831a3dd0bb10cd4", "committedDate": "2020-03-11T14:31:27Z", "message": "added encoding manifest.json if it's not in UTF-8\n\nSigned-off-by: Elena Kubantseva <elena.kubantseva@broadcom.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "710cafdbddb34e24ed38fe38f769050e35026d8a", "author": {"user": {"login": "arxioly", "name": "Elena Kubantseva"}}, "url": "https://github.com/zowe/api-layer/commit/710cafdbddb34e24ed38fe38f769050e35026d8a", "committedDate": "2020-03-11T14:31:27Z", "message": "changed example of response\n\nSigned-off-by: Elena Kubantseva <elena.kubantseva@broadcom.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fbfe02d9d6280fab514bcfd4c50510449242f6e2", "author": {"user": {"login": "arxioly", "name": "Elena Kubantseva"}}, "url": "https://github.com/zowe/api-layer/commit/fbfe02d9d6280fab514bcfd4c50510449242f6e2", "committedDate": "2020-03-11T14:31:27Z", "message": "version endpoint replaced to api/v1/gateway\n\nSigned-off-by: Elena Kubantseva <elena.kubantseva@broadcom.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99f1c9f7547775166a1b17a588c50a7543ccdc04", "author": {"user": {"login": "arxioly", "name": "Elena Kubantseva"}}, "url": "https://github.com/zowe/api-layer/commit/99f1c9f7547775166a1b17a588c50a7543ccdc04", "committedDate": "2020-03-11T14:31:27Z", "message": "fixed routing problem\n\nSigned-off-by: Elena Kubantseva <elena.kubantseva@broadcom.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ce668c973212ff8916e0cc6f6344cf379ea16d6", "author": {"user": {"login": "arxioly", "name": "Elena Kubantseva"}}, "url": "https://github.com/zowe/api-layer/commit/3ce668c973212ff8916e0cc6f6344cf379ea16d6", "committedDate": "2020-03-11T14:31:27Z", "message": "fixed typo\n\nSigned-off-by: Elena Kubantseva <elena.kubantseva@broadcom.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc1e6e88ccdf7db49cf412dea37bcf23ca6ffa72", "author": {"user": {"login": "arxioly", "name": "Elena Kubantseva"}}, "url": "https://github.com/zowe/api-layer/commit/dc1e6e88ccdf7db49cf412dea37bcf23ca6ffa72", "committedDate": "2020-03-11T14:31:27Z", "message": "fixed integration test\n\nSigned-off-by: Elena Kubantseva <elena.kubantseva@broadcom.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6bbcd6cce593baf88bd0c6e257d1b0ee5a489872", "author": {"user": {"login": "arxioly", "name": "Elena Kubantseva"}}, "url": "https://github.com/zowe/api-layer/commit/6bbcd6cce593baf88bd0c6e257d1b0ee5a489872", "committedDate": "2020-03-11T14:13:52Z", "message": "fixed integration test\n\nSigned-off-by: Elena Kubantseva <elena.kubantseva@broadcom.com>"}, "afterCommit": {"oid": "dc1e6e88ccdf7db49cf412dea37bcf23ca6ffa72", "author": {"user": {"login": "arxioly", "name": "Elena Kubantseva"}}, "url": "https://github.com/zowe/api-layer/commit/dc1e6e88ccdf7db49cf412dea37bcf23ca6ffa72", "committedDate": "2020-03-11T14:31:27Z", "message": "fixed integration test\n\nSigned-off-by: Elena Kubantseva <elena.kubantseva@broadcom.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyODcyMzI1", "url": "https://github.com/zowe/api-layer/pull/532#pullrequestreview-372872325", "createdAt": "2020-03-11T15:31:49Z", "commit": {"oid": "dc1e6e88ccdf7db49cf412dea37bcf23ca6ffa72"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczMzgwNTc2", "url": "https://github.com/zowe/api-layer/pull/532#pullrequestreview-373380576", "createdAt": "2020-03-12T09:09:35Z", "commit": {"oid": "dc1e6e88ccdf7db49cf412dea37bcf23ca6ffa72"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4913, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}