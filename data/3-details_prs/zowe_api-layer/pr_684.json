{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1ODkyOTI2", "number": 684, "title": "Removing APIML cookie on using Passticket scheme, new Integration tests to verify the transformation", "bodyText": "This PR improves Passticket transformation: don't propagate original credentials. The change is to remove APIML cookie with JWT. There is one case, when user can have invalud JWT in cookie, use header authorization and service then can reject the request.\nSigned-off-by: Pavel Jare\u0161 pavel.jares@broadcom.com", "createdAt": "2020-06-01T10:32:33Z", "url": "https://github.com/zowe/api-layer/pull/684", "merged": true, "mergeCommit": {"oid": "48fc1e4f10609500618fe6cbe456d0e192ea4500"}, "closed": true, "closedAt": "2020-06-11T13:17:32Z", "author": {"login": "pj892031"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcm9upjAH2gAyNDI1ODkyOTI2OjgzYjRiMDhiZGRlZDYzYTE4MjFjYThhMWNmMGMyYTFkNDE5NDVhNDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcqMPBNAFqTQyODgwODQ0MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "83b4b08bdded63a1821ca8a1cf0c2a1d41945a42", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/83b4b08bdded63a1821ca8a1cf0c2a1d41945a42", "committedDate": "2020-06-01T10:30:22Z", "message": "removing APIML cookie on using Passticket scheme, new Integration tests to verify the transformation\n\nSigned-off-by: Pavel Jare\u0161 <pavel.jares@broadcom.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab867fb43416c55f77318e2d9942c78d917cfd40", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/ab867fb43416c55f77318e2d9942c78d917cfd40", "committedDate": "2020-06-01T10:33:26Z", "message": "Merge branch 'master' into protectors/removeCookieOnPassticketScheme"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxNzg4Mzc3", "url": "https://github.com/zowe/api-layer/pull/684#pullrequestreview-421788377", "createdAt": "2020-06-01T11:59:19Z", "commit": {"oid": "ab867fb43416c55f77318e2d9942c78d917cfd40"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxMTo1OToxOVrOGdIAyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMVQxMTo1OToxOVrOGdIAyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzE5MzE2Mw==", "bodyText": "You should handle the public void applyToRequest(HttpRequest request) method as well, not just the InstanceInfo variant", "url": "https://github.com/zowe/api-layer/pull/684#discussion_r433193163", "createdAt": "2020-06-01T11:59:19Z", "author": {"login": "jandadav"}, "path": "gateway-service/src/main/java/org/zowe/apiml/gateway/security/service/schema/HttpBasicPassTicketScheme.java", "diffHunk": "@@ -80,13 +90,22 @@ public AuthenticationCommand createCommand(Authentication authentication, Suppli\n \n         private static final long serialVersionUID = 3941300386857998443L;\n \n+        private static final String COOKIE_HEADER = \"cookie\";\n+\n         private final String authorizationValue;\n+        private final String cookieName;\n         private final long expireAt;\n \n         @Override\n         public void apply(InstanceInfo instanceInfo) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ab867fb43416c55f77318e2d9942c78d917cfd40"}, "originalPosition": 58}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03978789ee9f62ec78d4a01405e7ab34a77fca6d", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/03978789ee9f62ec78d4a01405e7ab34a77fca6d", "committedDate": "2020-06-01T12:35:52Z", "message": "rollout to applyToRequest method\n\nSigned-off-by: Pavel Jare\u0161 <pavel.jares@broadcom.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5453001151dc385fff04fc6459fc24e37e68f8d7", "author": {"user": {"login": "jandadav", "name": "David Janda"}}, "url": "https://github.com/zowe/api-layer/commit/5453001151dc385fff04fc6459fc24e37e68f8d7", "committedDate": "2020-06-02T08:45:37Z", "message": "tests that won't execute on Zowe\n\nSigned-off-by: jandadav <janda.david@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58e20915eec5ba562f8924dca9efbc443c9f4729", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/58e20915eec5ba562f8924dca9efbc443c9f4729", "committedDate": "2020-06-02T13:06:57Z", "message": "Merge branch 'master' into protectors/removeCookieOnPassticketScheme"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a70d48806036ad3d52498f15d8dd3a1687be56ba", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/a70d48806036ad3d52498f15d8dd3a1687be56ba", "committedDate": "2020-06-03T10:36:20Z", "message": "additional tests\n\nSigned-off-by: Pavel Jare\u0161 <pavel.jares@broadcom.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4056eab15b3b7263ef341cca40d6168d882287f", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/d4056eab15b3b7263ef341cca40d6168d882287f", "committedDate": "2020-06-03T11:16:31Z", "message": "Merge branch 'master' into protectors/removeCookieOnPassticketScheme"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1b8f69e2d61b9fba31621cd8b7b76175de3b4a5", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/f1b8f69e2d61b9fba31621cd8b7b76175de3b4a5", "committedDate": "2020-06-09T07:40:44Z", "message": "Merge branch 'master' into protectors/removeCookieOnPassticketScheme"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce29b0630721758450bf45ce17141544d7bf1357", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/ce29b0630721758450bf45ce17141544d7bf1357", "committedDate": "2020-06-10T09:26:25Z", "message": "Merge branch 'master' into protectors/removeCookieOnPassticketScheme"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3bb54d3f11c22e94ee7e758df3309aa297518715", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/3bb54d3f11c22e94ee7e758df3309aa297518715", "committedDate": "2020-06-10T11:48:30Z", "message": "attempt to fix test\n\nSigned-off-by: Pavel Jare\u0161 <pavel.jares@broadcom.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f948e65804d10bfa41fd5aa7b5477391ae0c00c2", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/f948e65804d10bfa41fd5aa7b5477391ae0c00c2", "committedDate": "2020-06-10T12:58:37Z", "message": "test simplify - different treatment of stop between localhost and MF\n\nSigned-off-by: Pavel Jare\u0161 <pavel.jares@broadcom.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4ODA4NDQx", "url": "https://github.com/zowe/api-layer/pull/684#pullrequestreview-428808441", "createdAt": "2020-06-11T11:06:10Z", "commit": {"oid": "f948e65804d10bfa41fd5aa7b5477391ae0c00c2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4874, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}