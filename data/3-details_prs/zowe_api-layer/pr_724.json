{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM5MDI1MzAx", "number": 724, "title": "CORS headers provided by Southbound services are ignored", "bodyText": "Description\nzOSMF has custom handling of CORS. To make sure the CORS handling is properly delegated\nto the API ML filter the CORS related headers from the response of the southbound service.\nSigned-off-by: Jakub Balhar jakub.balhar@broadcom.com\nFixes # (issue)\n#384\nType of change\nPlease delete options that are not relevant.\n\n Bug fix (non-breaking change which fixes an issue)\n\nChecklist:\n\n My code follows the style guidelines of this project\n I have performed a self-review of my own code\n I have commented my code, particularly in hard-to-understand areas\n I have made corresponding changes to the documentation\n My changes generate no new warnings\n I have added tests that prove my fix is effective or that my feature works\n New and existing unit tests pass locally with my changes\n Any dependent changes have been merged and published in downstream modules\n\nFor more details about how should the code look like read the Contributing guideline", "createdAt": "2020-06-24T07:45:36Z", "url": "https://github.com/zowe/api-layer/pull/724", "merged": true, "mergeCommit": {"oid": "d7a3c9b1ea278b2e4dd8c51cce2bdacc40c75cc8"}, "closed": true, "closedAt": "2020-06-25T07:49:12Z", "author": {"login": "balhar-jakub"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcuU-XOgH2gAyNDM5MDI1MzAxOjgzN2E4MDFiMjYzNzA1MzA1ZDdhYTNiMjc1OWVjNDM0ZmY2NjFmNzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcunqunAH2gAyNDM5MDI1MzAxOjBhYTkzYmZhZmFlYjZjYjAxYjE0Mzk1OWVkMmI4ZjYyYTU0OTM2M2M=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "837a801b263705305d7aa3b2759ec434ff661f73", "author": {"user": {"login": "balhar-jakub", "name": "Jakub Balhar"}}, "url": "https://github.com/zowe/api-layer/commit/837a801b263705305d7aa3b2759ec434ff661f73", "committedDate": "2020-06-24T07:32:49Z", "message": "CORS headers provided by Southbound services are ignored\n\nzOSMF has custom handling of CORS. To make sure the CORS handling is properly delegated\nto the API ML filter the CORS related headers from the response of the southbound service.\n\nSigned-off-by: Jakub Balhar <jakub.balhar@broadcom.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2NDI5MTMx", "url": "https://github.com/zowe/api-layer/pull/724#pullrequestreview-436429131", "createdAt": "2020-06-24T08:23:30Z", "commit": {"oid": "837a801b263705305d7aa3b2759ec434ff661f73"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwODoyMzozMFrOGoH_-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwODoyMzozMFrOGoH_-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDcyNzI4OA==", "bodyText": "isnt it better to split those strings manually?", "url": "https://github.com/zowe/api-layer/pull/724#discussion_r444727288", "createdAt": "2020-06-24T08:23:30Z", "author": {"login": "achmelo"}, "path": "gateway-service/src/main/java/org/zowe/apiml/gateway/security/config/SecurityConfiguration.java", "diffHunk": "@@ -180,6 +181,13 @@ CorsConfigurationSource corsConfigurationSource() {\n         return source;\n     }\n \n+    private void addCorsRelatedIgnoredHeaders() {\n+        zuulProperties.setIgnoredHeaders(new HashSet<>(\n+            Arrays.asList((\"Access-Control-Request-Method,Access-Control-Request-Headers,Access-Control-Allow-Origin,\" +\n+                \"Access-Control-Allow-Methods,Access-Control-Allow-Headers,Access-Control-Allow-Credentials\").split(\",\"))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "837a801b263705305d7aa3b2759ec434ff661f73"}, "originalPosition": 44}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "256787fe61069a3968fc5ef558057fb899b143f5", "author": {"user": {"login": "balhar-jakub", "name": "Jakub Balhar"}}, "url": "https://github.com/zowe/api-layer/commit/256787fe61069a3968fc5ef558057fb899b143f5", "committedDate": "2020-06-24T11:40:42Z", "message": "Configure ignored CORS Headers in properties\n\nMove the configuration of the ignored CORS headers to the properties so that it is possible to add others in configuration.\n\nSigned-off-by: Jakub Balhar <jakub.balhar@broadcom.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2NjMzNTI3", "url": "https://github.com/zowe/api-layer/pull/724#pullrequestreview-436633527", "createdAt": "2020-06-24T13:15:05Z", "commit": {"oid": "256787fe61069a3968fc5ef558057fb899b143f5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0aa93bfafaeb6cb01b143959ed2b8f62a549363c", "author": {"user": {"login": "balhar-jakub", "name": "Jakub Balhar"}}, "url": "https://github.com/zowe/api-layer/commit/0aa93bfafaeb6cb01b143959ed2b8f62a549363c", "committedDate": "2020-06-25T05:19:34Z", "message": "Merge branch 'master' into rip/GH384/filter_cors_related_from_southbound"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4886, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}