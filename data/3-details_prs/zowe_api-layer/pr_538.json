{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgzMDc3OTUz", "number": 538, "title": "GatewayNotifier (make calls asynchronous) and logout improvement (distributing invalidated tokens between Gateways)", "bodyText": "This PR has two goals (both about improving of GatewayNotifier):\n\nnotification from Discovery service to Gateways is now asynchronous\n-- it make registration more safe, because back calls can take a time (see timeout of registration)\nfully supporting logout on gateway\n-- each Gateway store invalidated token and notify about them other gateways\n-- in case Gateway is down, invalidated token could be only on part of Gateways\n-- this problem is solved by distribution of token, is Gateway is newly registred, other running gateway send the invalidated list to this instance", "createdAt": "2020-03-03T17:22:18Z", "url": "https://github.com/zowe/api-layer/pull/538", "merged": true, "mergeCommit": {"oid": "2ca489725ed76ae1d04315a300d0d35bd42ccceb"}, "closed": true, "closedAt": "2020-03-12T14:37:45Z", "author": {"login": "pj892031"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKFn2xgH2gAyMzgzMDc3OTUzOjI1ZWNmODk4Nzg5MzM1ZTg3ZjAwMGMwY2EwYzQ0M2M2YmY3MTliNmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcM8NikAH2gAyMzgzMDc3OTUzOjAwMzE2YjBkZGU3OWVmYmQxZGFlOTJjYjY0NDY5YWVmOTg3NjYyYjQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "25ecf898789335e87f000c0ca0c443c6bf719b6f", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/25ecf898789335e87f000c0ca0c443c6bf719b6f", "committedDate": "2020-03-03T17:18:23Z", "message": "GatewayNotifier (make calls asynchronous) and logout improvement (distributing invalidated tokens between Gateways)\n\nSigned-off-by: Pavel Jare\u0161 <pavel.jares@broadcom.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NjMzMzgx", "url": "https://github.com/zowe/api-layer/pull/538#pullrequestreview-368633381", "createdAt": "2020-03-04T09:47:34Z", "commit": {"oid": "25ecf898789335e87f000c0ca0c443c6bf719b6f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwOTo0NzozNFrOFxmXqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQwOTo0NzozNFrOFxmXqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzU1MzE5NQ==", "bodyText": "You can use Gateway constant from org.zowe.apiml.product.constants.CoreService instead.", "url": "https://github.com/zowe/api-layer/pull/538#discussion_r387553195", "createdAt": "2020-03-04T09:47:34Z", "author": {"login": "JirkaAichler"}, "path": "discovery-service/src/main/java/org/zowe/apiml/discovery/GatewayNotifier.java", "diffHunk": "@@ -14,30 +14,66 @@\n import com.netflix.eureka.EurekaServerContext;\n import com.netflix.eureka.EurekaServerContextHolder;\n import com.netflix.eureka.registry.PeerAwareInstanceRegistry;\n+import lombok.AllArgsConstructor;\n+import lombok.Getter;\n import lombok.extern.slf4j.Slf4j;\n import org.apache.commons.lang.StringUtils;\n+import org.apache.logging.log4j.util.BiConsumer;\n import org.springframework.beans.factory.annotation.Qualifier;\n+import org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;\n import org.springframework.stereotype.Component;\n import org.springframework.web.client.RestTemplate;\n import org.zowe.apiml.message.core.MessageService;\n import org.zowe.apiml.message.log.ApimlLogger;\n import org.zowe.apiml.util.EurekaUtils;\n \n+import javax.annotation.PostConstruct;\n+import javax.annotation.PreDestroy;\n+import java.util.Collections;\n import java.util.List;\n+import java.util.concurrent.BlockingQueue;\n+import java.util.concurrent.LinkedBlockingQueue;\n+import java.util.concurrent.TimeUnit;\n+import java.util.function.Consumer;\n \n+/**\n+ * This bean is used to send a notification to the Gateways. It is sending notification asynchronous (at first they\n+ * are stored into the queue and then with a delay send to Gateways). If same notification is waiting for sending\n+ * it send it only once.\n+ *\n+ * Purpose of this bean is at first in notification Gateways about new and removed services and process at least\n+ * evicting of caches there.\n+ */\n @Component\n @Slf4j\n-public class GatewayNotifier {\n+public class GatewayNotifier implements Runnable {\n+\n+    public static final String GATEWAY_SERVICE_ID = \"GATEWAY\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "25ecf898789335e87f000c0ca0c443c6bf719b6f"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bcd5a4c6c57c7aabb3bbc3f7f6b25c0661df95e4", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/bcd5a4c6c57c7aabb3bbc3f7f6b25c0661df95e4", "committedDate": "2020-03-04T10:02:01Z", "message": "using common constant to identify Gateway\n\nSigned-off-by: Pavel Jare\u0161 <pavel.jares@broadcom.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c5a0c01d98905f3a5a3d9dbccd61baa96d25c40", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/4c5a0c01d98905f3a5a3d9dbccd61baa96d25c40", "committedDate": "2020-03-04T10:13:04Z", "message": "add equal method into Notification\n\nSigned-off-by: Pavel Jare\u0161 <pavel.jares@broadcom.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4NjY2NTg2", "url": "https://github.com/zowe/api-layer/pull/538#pullrequestreview-368666586", "createdAt": "2020-03-04T10:33:47Z", "commit": {"oid": "4c5a0c01d98905f3a5a3d9dbccd61baa96d25c40"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxMDozMzo0N1rOFxn-Iw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxMDozMzo0N1rOFxn-Iw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzU3OTQyNw==", "bodyText": "Please use constant as well.", "url": "https://github.com/zowe/api-layer/pull/538#discussion_r387579427", "createdAt": "2020-03-04T10:33:47Z", "author": {"login": "JirkaAichler"}, "path": "gateway-service/src/main/java/org/zowe/apiml/gateway/security/service/AuthenticationService.java", "diffHunk": "@@ -139,6 +145,31 @@ public TokenAuthentication validateJwtToken(String jwtToken) {\n         return validTokenAuthentication;\n     }\n \n+    /**\n+     * This method get all invalidated JWT token in the cache and distributes them to instance of Gateway with name\n+     * in argument toInstanceId. If instance cannot be find it return false. A notification can throw an runtime\n+     * exception. In all other cases all invalidated token are distributed and method returns true.\n+     *\n+     * @param toInstanceId instanceId of Gateway where invalidated JWT token should be sent\n+     * @return true if all token were sent, otherwise false\n+     */\n+    public boolean distributeInvalidate(String toInstanceId) {\n+        final Application application = discoveryClient.getApplication(\"gateway\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c5a0c01d98905f3a5a3d9dbccd61baa96d25c40"}, "originalPosition": 95}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e1eadf530b60567050741336a8f01cccd4e0fca", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/2e1eadf530b60567050741336a8f01cccd4e0fca", "committedDate": "2020-03-04T11:14:26Z", "message": "using constants instant of literal \"gateway\"\n\nSigned-off-by: Pavel Jare\u0161 <pavel.jares@broadcom.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4OTAxNDg1", "url": "https://github.com/zowe/api-layer/pull/538#pullrequestreview-368901485", "createdAt": "2020-03-04T15:56:45Z", "commit": {"oid": "2e1eadf530b60567050741336a8f01cccd4e0fca"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNTo1Njo0NVrOFxzFDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNTo1Njo0NVrOFxzFDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc2MTQyMg==", "bodyText": "I think you can move\nRestTemplate restTemplate = mock(RestTemplate.class); MessageService messageService = mock(MessageService.class); GatewayNotifier gatewayNotifier = new GatewayNotifierSync(restTemplate, messageService);\nto the setup method since they are used by severals tests. Just for better readability of the tests", "url": "https://github.com/zowe/api-layer/pull/538#discussion_r387761422", "createdAt": "2020-03-04T15:56:45Z", "author": {"login": "taban03"}, "path": "discovery-service/src/test/java/org/zowe/apiml/discovery/GatewayNotifierTest.java", "diffHunk": "@@ -134,4 +144,96 @@ public void testNotificationFailed() {\n         );\n     }\n \n+    @Test\n+    public void testDistributeInvalidatedCredentials() {\n+        InstanceInfo targetInstanceInfo = createInstanceInfo(\"host\", 1000, 1433);\n+        String targetInstanceId = targetInstanceInfo.getInstanceId();\n+\n+        InstanceInfo gatewayInstance = createInstanceInfo(\"gateway\", 111, 123);\n+        String gatewayUrl = \"https://gateway:123/auth/distribute/\" + targetInstanceId;\n+\n+        RestTemplate restTemplate = mock(RestTemplate.class);\n+        MessageService messageService = mock(MessageService.class);\n+        GatewayNotifier gatewayNotifier = new GatewayNotifierSync(restTemplate, messageService);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2e1eadf530b60567050741336a8f01cccd4e0fca"}, "originalPosition": 92}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY4OTA5OTg3", "url": "https://github.com/zowe/api-layer/pull/538#pullrequestreview-368909987", "createdAt": "2020-03-04T16:06:09Z", "commit": {"oid": "2e1eadf530b60567050741336a8f01cccd4e0fca"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNjowNjoxMFrOFxzeuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQxNjoxNDoyN1rOFxz0SA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc2Nzk5Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public void testGetAllRecords_MissingCache() {\n          \n          \n            \n                public void givenUnknownCacheName_whenGetAllRecords_thenThrowsException() {", "url": "https://github.com/zowe/api-layer/pull/538#discussion_r387767993", "createdAt": "2020-03-04T16:06:10Z", "author": {"login": "taban03"}, "path": "common-service-core/src/test/java/org/zowe/apiml/util/CacheUtilsTest.java", "diffHunk": "@@ -91,4 +92,57 @@ public void testEvictSubset() {\n         verify(ehCache2, times(1)).remove(keys.get(3));\n     }\n \n+    @Test\n+    public void testGetAllRecords_MissingCache() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2e1eadf530b60567050741336a8f01cccd4e0fca"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc2OTgzOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public void testGetAllRecords_UnsupportedCacheManager() {\n          \n          \n            \n                public void givenUnsupportedCacheManager_whenGetAllRecords_thenThrowsException() {", "url": "https://github.com/zowe/api-layer/pull/538#discussion_r387769838", "createdAt": "2020-03-04T16:08:53Z", "author": {"login": "taban03"}, "path": "common-service-core/src/test/java/org/zowe/apiml/util/CacheUtilsTest.java", "diffHunk": "@@ -91,4 +92,57 @@ public void testEvictSubset() {\n         verify(ehCache2, times(1)).remove(keys.get(3));\n     }\n \n+    @Test\n+    public void testGetAllRecords_MissingCache() {\n+        CacheManager cacheManager = mock(CacheManager.class);\n+        IllegalArgumentException iae = Assertions.assertThrows(IllegalArgumentException.class, () -> {\n+            CacheUtils.getAllRecords(cacheManager, \"unknownCacheName\");\n+        });\n+        assertEquals(\"Unknown cache unknownCacheName\", iae.getMessage());\n+    }\n+\n+    @Test\n+    public void testGetAllRecords_UnsupportedCacheManager() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2e1eadf530b60567050741336a8f01cccd4e0fca"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzc3MzUxMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public void testGetAllRecords_Success() {\n          \n          \n            \n                public void givenValidCacheManager_whenGetAllRecords_thenReadAllStoredRecords() {", "url": "https://github.com/zowe/api-layer/pull/538#discussion_r387773512", "createdAt": "2020-03-04T16:14:27Z", "author": {"login": "taban03"}, "path": "common-service-core/src/test/java/org/zowe/apiml/util/CacheUtilsTest.java", "diffHunk": "@@ -91,4 +92,57 @@ public void testEvictSubset() {\n         verify(ehCache2, times(1)).remove(keys.get(3));\n     }\n \n+    @Test\n+    public void testGetAllRecords_MissingCache() {\n+        CacheManager cacheManager = mock(CacheManager.class);\n+        IllegalArgumentException iae = Assertions.assertThrows(IllegalArgumentException.class, () -> {\n+            CacheUtils.getAllRecords(cacheManager, \"unknownCacheName\");\n+        });\n+        assertEquals(\"Unknown cache unknownCacheName\", iae.getMessage());\n+    }\n+\n+    @Test\n+    public void testGetAllRecords_UnsupportedCacheManager() {\n+        CacheManager cacheManager = mock(CacheManager.class);\n+        Cache cache = mock(Cache.class);\n+        when(cacheManager.getCache(\"knownCacheName\")).thenReturn(cache);\n+        IllegalArgumentException iae = Assertions.assertThrows(IllegalArgumentException.class, () -> {\n+            CacheUtils.getAllRecords(cacheManager, \"knownCacheName\");\n+        });\n+        assertTrue(iae.getMessage().startsWith(\"Unsupported type of cache : \"));\n+    }\n+\n+    private Map<Object, Element> convert(Map<Integer, String> in) {\n+        Map<Object, Element> out = new HashMap<>();\n+        for (Map.Entry<Integer, String> entry : in.entrySet()) {\n+            out.put(entry.getKey(), new Element(entry.getKey(), entry.getValue()));\n+        }\n+        return out;\n+    }\n+\n+    @Test\n+    public void testGetAllRecords_Success() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2e1eadf530b60567050741336a8f01cccd4e0fca"}, "originalPosition": 57}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f716aab628d2808795d8275ee70ad581314baaf6", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/f716aab628d2808795d8275ee70ad581314baaf6", "committedDate": "2020-03-05T08:12:33Z", "message": "minor changes by review\n\nSigned-off-by: Pavel Jare\u0161 <pavel.jares@broadcom.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a29dd5d3fd83db260f03e4168d98819a129b3c04", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/a29dd5d3fd83db260f03e4168d98819a129b3c04", "committedDate": "2020-03-05T08:29:56Z", "message": "remove sonar bugs\n\nSigned-off-by: Pavel Jare\u0161 <pavel.jares@broadcom.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5Mzc5Mjk0", "url": "https://github.com/zowe/api-layer/pull/538#pullrequestreview-369379294", "createdAt": "2020-03-05T08:41:03Z", "commit": {"oid": "a29dd5d3fd83db260f03e4168d98819a129b3c04"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwODo0MTowNFrOFyKjAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQwODo0MTowNFrOFyKjAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE0NTkyMg==", "bodyText": "We should use externalized messages for warn, info and error.", "url": "https://github.com/zowe/api-layer/pull/538#discussion_r388145922", "createdAt": "2020-03-05T08:41:04Z", "author": {"login": "JirkaAichler"}, "path": "discovery-service/src/main/java/org/zowe/apiml/discovery/GatewayNotifier.java", "diffHunk": "@@ -185,6 +185,9 @@ public void run() {\n                     notification.process();\n                 }\n             } catch (InterruptedException e) {\n+                log.warn(\"Thread for Gateway notification was interrupted\", e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a29dd5d3fd83db260f03e4168d98819a129b3c04"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "201e86027a3cb4c672b84565759029a28fbb5e6b", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/201e86027a3cb4c672b84565759029a28fbb5e6b", "committedDate": "2020-03-05T09:02:32Z", "message": "decrease log level for interruption of thread in GatewayNotifier - no reason to show to user\n\nSigned-off-by: Pavel Jare\u0161 <pavel.jares@broadcom.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NDI4Nzkz", "url": "https://github.com/zowe/api-layer/pull/538#pullrequestreview-369428793", "createdAt": "2020-03-05T09:53:07Z", "commit": {"oid": "201e86027a3cb4c672b84565759029a28fbb5e6b"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7f650b5a3bf847edd7399852e0512f5df8879ea", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/a7f650b5a3bf847edd7399852e0512f5df8879ea", "committedDate": "2020-03-10T11:14:23Z", "message": "fix test, reason was removing Sonar issues before\n\nSigned-off-by: Pavel Jare\u0161 <pavel.jares@broadcom.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d99ea470f3c42999af3174d2a9decdc91beafaf4", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/d99ea470f3c42999af3174d2a9decdc91beafaf4", "committedDate": "2020-03-10T15:32:43Z", "message": "Merge remote-tracking branch 'remotes/origin/master' into protectors/gatewayNotifier\n\n# Conflicts:\n#\tdiscovery-service/src/main/java/org/zowe/apiml/discovery/GatewayNotifier.java\n#\tgateway-service/src/main/java/org/zowe/apiml/gateway/security/service/AuthenticationService.java\n#\tgateway-service/src/main/java/org/zowe/apiml/gateway/security/service/schema/ZosmfScheme.java\n#\tgateway-service/src/test/java/org/zowe/apiml/gateway/security/query/SuccessfulQueryHandlerTest.java\n#\tgateway-service/src/test/java/org/zowe/apiml/gateway/security/service/AuthenticationServiceTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85ee4a401d2a296680fbf29dd303baeabafb8f23", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/85ee4a401d2a296680fbf29dd303baeabafb8f23", "committedDate": "2020-03-10T15:55:23Z", "message": "fix of merge\n\nSigned-off-by: Pavel Jare\u0161 <pavel.jares@broadcom.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3ed5e8b2c36493333306423bf4207b1513c8ad4", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/a3ed5e8b2c36493333306423bf4207b1513c8ad4", "committedDate": "2020-03-10T16:22:58Z", "message": "remove unused method\n\nSigned-off-by: Pavel Jare\u0161 <pavel.jares@broadcom.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyNzE2NTg5", "url": "https://github.com/zowe/api-layer/pull/538#pullrequestreview-372716589", "createdAt": "2020-03-11T12:34:54Z", "commit": {"oid": "a3ed5e8b2c36493333306423bf4207b1513c8ad4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f2a8cc0e53e5dce2c361bf084ac52d9282e9b92", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/4f2a8cc0e53e5dce2c361bf084ac52d9282e9b92", "committedDate": "2020-03-11T14:31:52Z", "message": "Merge branch 'master' into protectors/gatewayNotifier"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczNTU4NDA4", "url": "https://github.com/zowe/api-layer/pull/538#pullrequestreview-373558408", "createdAt": "2020-03-12T13:34:35Z", "commit": {"oid": "4f2a8cc0e53e5dce2c361bf084ac52d9282e9b92"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00316b0dde79efbd1dae92cb64469aef987662b4", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/00316b0dde79efbd1dae92cb64469aef987662b4", "committedDate": "2020-03-12T14:02:16Z", "message": "Merge branch 'master' into protectors/gatewayNotifier"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4918, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}