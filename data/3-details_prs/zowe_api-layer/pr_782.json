{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY2OTUyMzU5", "number": 782, "title": "Carsoncook/gh774/assert log messages", "bodyText": "Description\nAdds LogMessageTracker in apiml-utility that provides a framework to retrieve logged messages. This is useful particularly for testing code to determine if certain messages of a given severity were logged.\nFixes #774\nType of change\nPlease delete options that are not relevant.\n\n Bug fix (non-breaking change which fixes an issue)\n New feature (non-breaking change which adds functionality)\n Breaking change (fix or feature that would cause existing functionality to not work as expected)\n This change requires a documentation update\n\nChecklist:\n\n My code follows the style guidelines of this project\n I have performed a self-review of my own code\n I have commented my code, particularly in hard-to-understand areas\n I have made corresponding changes to the documentation\n My changes generate no new warnings\n I have added tests that prove my fix is effective or that my feature works\n New and existing unit tests pass locally with my changes\n Any dependent changes have been merged and published in downstream modules\n\nFor more details about how should the code look like read the Contributing guideline", "createdAt": "2020-08-12T19:04:32Z", "url": "https://github.com/zowe/api-layer/pull/782", "merged": true, "mergeCommit": {"oid": "e12d8803b8882bf903727733c1fad501b18c7f0b"}, "closed": true, "closedAt": "2020-08-13T13:57:25Z", "author": {"login": "CarsonCook"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-OPjpgH2gAyNDY2OTUyMzU5OmU0NjY0NmM0MjJiODMxMDc2ODdkYWZmYjViMDIxZjYyNTg3M2U2OWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-gV8XgH2gAyNDY2OTUyMzU5OmViOTU4Nzg2ZDhlMTk5MWYwOWFkNThlMTBmMTVkNmUzZWMzMjc1ZDE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e46646c422b83107687daffb5b021f625873e69a", "author": {"user": {"login": "CarsonCook", "name": "Carson Cook"}}, "url": "https://github.com/zowe/api-layer/commit/e46646c422b83107687daffb5b021f625873e69a", "committedDate": "2020-08-12T16:45:03Z", "message": "Add LogMessageTracker and unit tests\n\nSigned-off-by: Carson Cook <carson.cook@ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce62bc0650cf33b40136f3c065a322701cf6c6b8", "author": {"user": {"login": "CarsonCook", "name": "Carson Cook"}}, "url": "https://github.com/zowe/api-layer/commit/ce62bc0650cf33b40136f3c065a322701cf6c6b8", "committedDate": "2020-08-12T17:05:20Z", "message": "Add LogMessageTracker support for regex\n\nSigned-off-by: Carson Cook <carson.cook@ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4eca5e5d08e1d095d2013f972d80ea1ac81193e", "author": {"user": {"login": "CarsonCook", "name": "Carson Cook"}}, "url": "https://github.com/zowe/api-layer/commit/d4eca5e5d08e1d095d2013f972d80ea1ac81193e", "committedDate": "2020-08-12T17:21:50Z", "message": "Fix handling for formatted log messages\n\nSigned-off-by: Carson Cook <carson.cook@ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27406965cd318be2fad5ab95ba437714e1d2cc9e", "author": {"user": {"login": "CarsonCook", "name": "Carson Cook"}}, "url": "https://github.com/zowe/api-layer/commit/27406965cd318be2fad5ab95ba437714e1d2cc9e", "committedDate": "2020-08-12T18:17:44Z", "message": "Fix raw string used to search log messages\n\nSigned-off-by: Carson Cook <carson.cook@ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e16175758762e1dc967ea262b956fb8a9c95a60a", "author": {"user": {"login": "CarsonCook", "name": "Carson Cook"}}, "url": "https://github.com/zowe/api-layer/commit/e16175758762e1dc967ea262b956fb8a9c95a60a", "committedDate": "2020-08-12T18:20:08Z", "message": "Add method to filter by log level\n\nSigned-off-by: Carson Cook <carson.cook@ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "687528a38c8de962718519cfbc7fe0e82b753ba5", "author": {"user": {"login": "CarsonCook", "name": "Carson Cook"}}, "url": "https://github.com/zowe/api-layer/commit/687528a38c8de962718519cfbc7fe0e82b753ba5", "committedDate": "2020-08-12T18:35:16Z", "message": "Add logging assertions to config validator unit tests\n\nSigned-off-by: Carson Cook <carson.cook@ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a51515f001faffe0935836cee7c6e709f1afbfb", "author": {"user": {"login": "CarsonCook", "name": "Carson Cook"}}, "url": "https://github.com/zowe/api-layer/commit/7a51515f001faffe0935836cee7c6e709f1afbfb", "committedDate": "2020-08-12T18:35:47Z", "message": "Fix homePageUrl warning check\n\nSigned-off-by: Carson Cook <carson.cook@ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72edbcfea2338e6a570e6c2c4fc05667abd72133", "author": {"user": {"login": "CarsonCook", "name": "Carson Cook"}}, "url": "https://github.com/zowe/api-layer/commit/72edbcfea2338e6a570e6c2c4fc05667abd72133", "committedDate": "2020-08-12T19:21:03Z", "message": "Fix sonarcloud smells\n\nSigned-off-by: Carson Cook <carson.cook@ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "604d588ac6d0ef1b9b7e3dad0ee49f97a7d8f918", "author": {"user": {"login": "CarsonCook", "name": "Carson Cook"}}, "url": "https://github.com/zowe/api-layer/commit/604d588ac6d0ef1b9b7e3dad0ee49f97a7d8f918", "committedDate": "2020-08-12T19:28:52Z", "message": "Add more coverage in LogMessageTrackerTest\n\nSigned-off-by: Carson Cook <carson.cook@ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8015d6316a5cfe732452743c1a65512ffb6259a", "author": {"user": {"login": "balhar-jakub", "name": "Jakub Balhar"}}, "url": "https://github.com/zowe/api-layer/commit/f8015d6316a5cfe732452743c1a65512ffb6259a", "committedDate": "2020-08-13T06:27:46Z", "message": "Merge branch 'master' into carsoncook/gh774/assertLogMessages"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2NTA4MTA5", "url": "https://github.com/zowe/api-layer/pull/782#pullrequestreview-466508109", "createdAt": "2020-08-13T07:27:18Z", "commit": {"oid": "f8015d6316a5cfe732452743c1a65512ffb6259a"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QwNzoyNzoxOFrOG__TOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QwNzoyNzoxOFrOG__TOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTc1MDU4NQ==", "bodyText": "We are trying to keep the given_when_then structure in the test names, would it be possible to have it here as well?", "url": "https://github.com/zowe/api-layer/pull/782#discussion_r469750585", "createdAt": "2020-08-13T07:27:18Z", "author": {"login": "balhar-jakub"}, "path": "apiml-utility/src/test/java/org/zowe/apiml/product/logging/LogMessageTrackerTest.java", "diffHunk": "@@ -0,0 +1,112 @@\n+/*\n+ * This program and the accompanying materials are made available under the terms of the\n+ * Eclipse Public License v2.0 which accompanies this distribution, and is available at\n+ * https://www.eclipse.org/legal/epl-v20.html\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Copyright Contributors to the Zowe Project.\n+ */\n+\n+package org.zowe.apiml.product.logging;\n+\n+import ch.qos.logback.classic.Level;\n+import ch.qos.logback.classic.Logger;\n+import ch.qos.logback.classic.spi.ILoggingEvent;\n+import org.junit.jupiter.api.AfterEach;\n+import org.junit.jupiter.api.BeforeEach;\n+import org.junit.jupiter.api.Test;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.List;\n+import java.util.regex.Pattern;\n+\n+import static junit.framework.TestCase.assertFalse;\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n+\n+class LogMessageTrackerTest {\n+    private static final String LOG_MESSAGE = \"This is a log message.\";\n+    private static final String NOT_LOGGED_MESSAGE = \"This is not a log message.\";\n+\n+    private static final Pattern MESSAGE_REGEX = Pattern.compile(\"^This.*\");\n+    private static final Pattern NOT_MESSAGE_REGEX = Pattern.compile(\"^dummy\");\n+\n+    private final LogMessageTracker logMessageTracker = new LogMessageTracker(this.getClass());\n+    private final Logger log = (Logger) LoggerFactory.getLogger(this.getClass());\n+\n+    @BeforeEach\n+    void setup() {\n+        logMessageTracker.startTracking();\n+        log.trace(LOG_MESSAGE);\n+        log.debug(LOG_MESSAGE);\n+        log.info(LOG_MESSAGE);\n+        log.warn(LOG_MESSAGE);\n+        log.error(LOG_MESSAGE);\n+    }\n+\n+    @AfterEach\n+    void cleanUp() {\n+        logMessageTracker.stopTracking();\n+    }\n+\n+    @Test\n+    void testSearch() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8015d6316a5cfe732452743c1a65512ffb6259a"}, "originalPosition": 54}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87dda51a1c92879b19a6b7f30a5a5e36439df41f", "author": {"user": {"login": "CarsonCook", "name": "Carson Cook"}}, "url": "https://github.com/zowe/api-layer/commit/87dda51a1c92879b19a6b7f30a5a5e36439df41f", "committedDate": "2020-08-13T13:50:11Z", "message": "Change test names to given when then\n\nSigned-off-by: Carson Cook <carson.cook@ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb958786d8e1991f09ad58e10f15d6e3ec3275d1", "author": {"user": {"login": "CarsonCook", "name": "Carson Cook"}}, "url": "https://github.com/zowe/api-layer/commit/eb958786d8e1991f09ad58e10f15d6e3ec3275d1", "committedDate": "2020-08-13T13:50:19Z", "message": "Merge branch 'carsoncook/gh774/assertLogMessages' of github.com:zowe/api-layer into carsoncook/gh774/assertLogMessages\n\nSigned-off-by:  <>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4818, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}