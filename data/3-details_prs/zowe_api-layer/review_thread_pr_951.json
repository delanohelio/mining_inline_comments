{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI3NDk5NjQx", "number": 951, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxMDozOTo0N1rOE9k79w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxMDo0MTo0NlrOE9k_Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzMDAzNzY3OnYy", "diffSide": "RIGHT", "path": "caching-service/src/main/java/org/zowe/apiml/caching/service/vsam/VsamKey.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxMDozOTo0N1rOH6Vo0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxMDozOTo0N1rOH6Vo0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDkzMzk3MA==", "bodyText": "Any reason why you didn't use this: StringUtils.rightPad()", "url": "https://github.com/zowe/api-layer/pull/951#discussion_r530933970", "createdAt": "2020-11-26T10:39:47Z", "author": {"login": "balhar-jakub"}, "path": "caching-service/src/main/java/org/zowe/apiml/caching/service/vsam/VsamKey.java", "diffHunk": "@@ -0,0 +1,63 @@\n+/*\r\n+ * This program and the accompanying materials are made available under the terms of the\r\n+ * Eclipse Public License v2.0 which accompanies this distribution, and is available at\r\n+ * https://www.eclipse.org/legal/epl-v20.html\r\n+ *\r\n+ * SPDX-License-Identifier: EPL-2.0\r\n+ *\r\n+ * Copyright Contributors to the Zowe Project.\r\n+ */\r\n+\r\n+package org.zowe.apiml.caching.service.vsam;\r\n+\r\n+import lombok.Getter;\r\n+import org.zowe.apiml.caching.config.VsamConfig;\r\n+import org.zowe.apiml.caching.model.KeyValue;\r\n+\r\n+import java.io.UnsupportedEncodingException;\r\n+\r\n+public class VsamKey {\r\n+\r\n+    private final VsamConfig config;\r\n+\r\n+    @Getter\r\n+    int keyLength;\r\n+\r\n+    public VsamKey(VsamConfig config) {\r\n+\r\n+        if (config.getKeyLength() < 23) {\r\n+            throw new IllegalArgumentException(\"VsamKey cannot have length smaller than 23 characters\");\r\n+        }\r\n+        this.config = config;\r\n+        this.keyLength = config.getKeyLength();\r\n+    }\r\n+\r\n+    @Override\r\n+    public String toString() {\r\n+        return \"vsamkey\";\r\n+    }\r\n+\r\n+    public String getKey(String serviceId, String key) {\r\n+        return VsamUtils.padToLength(serviceId.hashCode() + \":\" + key.hashCode(), keyLength);\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76bd2b8a06406b64fe78f93f374eb1b7a5676fd7"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzMDA0MDE2OnYy", "diffSide": "RIGHT", "path": "caching-service/src/main/java/org/zowe/apiml/caching/service/vsam/VsamUtils.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxMDo0MDoyMlrOH6VqTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxMjozOToxM1rOH6Zw-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDkzNDM1MQ==", "bodyText": "I would delete it as there is the same functionality in the StringUtils in Apache Commons among others.", "url": "https://github.com/zowe/api-layer/pull/951#discussion_r530934351", "createdAt": "2020-11-26T10:40:22Z", "author": {"login": "balhar-jakub"}, "path": "caching-service/src/main/java/org/zowe/apiml/caching/service/vsam/VsamUtils.java", "diffHunk": "@@ -0,0 +1,26 @@\n+/*\r\n+ * This program and the accompanying materials are made available under the terms of the\r\n+ * Eclipse Public License v2.0 which accompanies this distribution, and is available at\r\n+ * https://www.eclipse.org/legal/epl-v20.html\r\n+ *\r\n+ * SPDX-License-Identifier: EPL-2.0\r\n+ *\r\n+ * Copyright Contributors to the Zowe Project.\r\n+ */\r\n+\r\n+package org.zowe.apiml.caching.service.vsam;\r\n+import lombok.experimental.UtilityClass;\r\n+\r\n+@UtilityClass\r\n+public class VsamUtils {\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76bd2b8a06406b64fe78f93f374eb1b7a5676fd7"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTAwMTU5Mg==", "bodyText": "Good point", "url": "https://github.com/zowe/api-layer/pull/951#discussion_r531001592", "createdAt": "2020-11-26T12:39:13Z", "author": {"login": "jandadav"}, "path": "caching-service/src/main/java/org/zowe/apiml/caching/service/vsam/VsamUtils.java", "diffHunk": "@@ -0,0 +1,26 @@\n+/*\r\n+ * This program and the accompanying materials are made available under the terms of the\r\n+ * Eclipse Public License v2.0 which accompanies this distribution, and is available at\r\n+ * https://www.eclipse.org/legal/epl-v20.html\r\n+ *\r\n+ * SPDX-License-Identifier: EPL-2.0\r\n+ *\r\n+ * Copyright Contributors to the Zowe Project.\r\n+ */\r\n+\r\n+package org.zowe.apiml.caching.service.vsam;\r\n+import lombok.experimental.UtilityClass;\r\n+\r\n+@UtilityClass\r\n+public class VsamUtils {\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDkzNDM1MQ=="}, "originalCommit": {"oid": "76bd2b8a06406b64fe78f93f374eb1b7a5676fd7"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzMDA0MzI0OnYy", "diffSide": "RIGHT", "path": "caching-service/src/main/java/org/zowe/apiml/caching/service/vsam/VsamKey.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxMDo0MTowOVrOH6VsIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxMDo0MTowOVrOH6VsIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDkzNDgxNw==", "bodyText": "What about\nreturn getKey(serviceId, keyValue.getKey());", "url": "https://github.com/zowe/api-layer/pull/951#discussion_r530934817", "createdAt": "2020-11-26T10:41:09Z", "author": {"login": "balhar-jakub"}, "path": "caching-service/src/main/java/org/zowe/apiml/caching/service/vsam/VsamKey.java", "diffHunk": "@@ -0,0 +1,63 @@\n+/*\r\n+ * This program and the accompanying materials are made available under the terms of the\r\n+ * Eclipse Public License v2.0 which accompanies this distribution, and is available at\r\n+ * https://www.eclipse.org/legal/epl-v20.html\r\n+ *\r\n+ * SPDX-License-Identifier: EPL-2.0\r\n+ *\r\n+ * Copyright Contributors to the Zowe Project.\r\n+ */\r\n+\r\n+package org.zowe.apiml.caching.service.vsam;\r\n+\r\n+import lombok.Getter;\r\n+import org.zowe.apiml.caching.config.VsamConfig;\r\n+import org.zowe.apiml.caching.model.KeyValue;\r\n+\r\n+import java.io.UnsupportedEncodingException;\r\n+\r\n+public class VsamKey {\r\n+\r\n+    private final VsamConfig config;\r\n+\r\n+    @Getter\r\n+    int keyLength;\r\n+\r\n+    public VsamKey(VsamConfig config) {\r\n+\r\n+        if (config.getKeyLength() < 23) {\r\n+            throw new IllegalArgumentException(\"VsamKey cannot have length smaller than 23 characters\");\r\n+        }\r\n+        this.config = config;\r\n+        this.keyLength = config.getKeyLength();\r\n+    }\r\n+\r\n+    @Override\r\n+    public String toString() {\r\n+        return \"vsamkey\";\r\n+    }\r\n+\r\n+    public String getKey(String serviceId, String key) {\r\n+        return VsamUtils.padToLength(serviceId.hashCode() + \":\" + key.hashCode(), keyLength);\r\n+    }\r\n+\r\n+    public String getKey(String serviceId, KeyValue keyValue) {\r\n+        return VsamUtils.padToLength(serviceId.hashCode() + \":\" + keyValue.getKey().hashCode(), keyLength);\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76bd2b8a06406b64fe78f93f374eb1b7a5676fd7"}, "originalPosition": 45}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMzMDA0NTk0OnYy", "diffSide": "RIGHT", "path": "caching-service/src/main/java/org/zowe/apiml/caching/service/vsam/VsamRecord.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxMDo0MTo0NlrOH6Vtvg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQxMDo0MTo0NlrOH6Vtvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDkzNTIzMA==", "bodyText": "I guess that you plan to add Documentation later?", "url": "https://github.com/zowe/api-layer/pull/951#discussion_r530935230", "createdAt": "2020-11-26T10:41:46Z", "author": {"login": "balhar-jakub"}, "path": "caching-service/src/main/java/org/zowe/apiml/caching/service/vsam/VsamRecord.java", "diffHunk": "@@ -0,0 +1,99 @@\n+/*\r\n+ * This program and the accompanying materials are made available under the terms of the\r\n+ * Eclipse Public License v2.0 which accompanies this distribution, and is available at\r\n+ * https://www.eclipse.org/legal/epl-v20.html\r\n+ *\r\n+ * SPDX-License-Identifier: EPL-2.0\r\n+ *\r\n+ * Copyright Contributors to the Zowe Project.\r\n+ */\r\n+\r\n+package org.zowe.apiml.caching.service.vsam;\r\n+\r\n+import com.fasterxml.jackson.core.JsonProcessingException;\r\n+import com.fasterxml.jackson.databind.ObjectMapper;\r\n+import org.zowe.apiml.caching.config.VsamConfig;\r\n+import org.zowe.apiml.caching.model.KeyValue;\r\n+\r\n+import java.io.UnsupportedEncodingException;\r\n+\r\n+public class VsamRecord {\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "76bd2b8a06406b64fe78f93f374eb1b7a5676fd7"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 467, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}