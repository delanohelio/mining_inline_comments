{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg5OTY4MDgw", "number": 561, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxMzo0MjoyMFrODpHWjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNDowNzoxN1rODpH_3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0NDM4NjcxOnYy", "diffSide": "RIGHT", "path": "gateway-service/src/main/java/org/zowe/apiml/gateway/controllers/AuthController.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxMzo0MjoyMFrOF4Fd_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxMzo0MjoyMFrOF4Fd_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM1NDE3Mw==", "bodyText": "When you are using @RestController there is no need to mention @ResponseBody\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\n@Controller\n@ResponseBody\npublic @interface RestController {", "url": "https://github.com/zowe/api-layer/pull/561#discussion_r394354173", "createdAt": "2020-03-18T13:42:20Z", "author": {"login": "ilkinabdullayev"}, "path": "gateway-service/src/main/java/org/zowe/apiml/gateway/controllers/AuthController.java", "diffHunk": "@@ -56,4 +66,26 @@ public void distributeInvalidate(HttpServletRequest request, HttpServletResponse\n         response.setStatus(distributed ? SC_OK : SC_NO_CONTENT);\n     }\n \n+    @GetMapping(path = \"/keys/public/all\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c8be049d8919a50623823c7f0c6c39d8ba57010"}, "originalPosition": 50}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0NDQxMjk2OnYy", "diffSide": "RIGHT", "path": "gateway-service/src/main/java/org/zowe/apiml/gateway/controllers/AuthController.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxMzo0ODo0M1rOF4FvEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxNTo0MzoxNFrOF62fIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM1ODU0NQ==", "bodyText": "may I ask why long path?", "url": "https://github.com/zowe/api-layer/pull/561#discussion_r394358545", "createdAt": "2020-03-18T13:48:43Z", "author": {"login": "ilkinabdullayev"}, "path": "gateway-service/src/main/java/org/zowe/apiml/gateway/controllers/AuthController.java", "diffHunk": "@@ -9,29 +9,39 @@\n  */\n package org.zowe.apiml.gateway.controllers;\n \n-import lombok.AllArgsConstructor;\n-import org.springframework.web.bind.annotation.DeleteMapping;\n-import org.springframework.web.bind.annotation.GetMapping;\n-import org.springframework.web.bind.annotation.RequestMapping;\n-import org.springframework.web.bind.annotation.RestController;\n+import com.nimbusds.jose.jwk.JWK;\n+import com.nimbusds.jose.jwk.JWKSet;\n+import lombok.RequiredArgsConstructor;\n+import net.minidev.json.JSONObject;\n+import org.springframework.web.bind.annotation.*;\n import org.zowe.apiml.gateway.security.service.AuthenticationService;\n+import org.zowe.apiml.gateway.security.service.JwtSecurityInitializer;\n+import org.zowe.apiml.gateway.security.service.zosmf.ZosmfServiceFacade;\n \n import javax.servlet.http.HttpServletRequest;\n import javax.servlet.http.HttpServletResponse;\n+import java.util.LinkedList;\n+import java.util.List;\n \n import static org.apache.http.HttpStatus.*;\n \n /**\n  * Controller offer method to control security. It can contains method for user and also method for calling services\n  * by gateway to distribute state of authentication between nodes.\n  */\n-@AllArgsConstructor\n+@RequiredArgsConstructor\n @RestController\n @RequestMapping(\"/auth\")\n public class AuthController {\n \n+    @org.springframework.beans.factory.annotation.Value(\"${apiml.security.zosmf.useJwtToken:true}\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c8be049d8919a50623823c7f0c6c39d8ba57010"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjMwMDMwNw==", "bodyText": "because here is a conflict between @value annotation  in Lombok and Spring", "url": "https://github.com/zowe/api-layer/pull/561#discussion_r396300307", "createdAt": "2020-03-23T09:07:05Z", "author": {"login": "pj892031"}, "path": "gateway-service/src/main/java/org/zowe/apiml/gateway/controllers/AuthController.java", "diffHunk": "@@ -9,29 +9,39 @@\n  */\n package org.zowe.apiml.gateway.controllers;\n \n-import lombok.AllArgsConstructor;\n-import org.springframework.web.bind.annotation.DeleteMapping;\n-import org.springframework.web.bind.annotation.GetMapping;\n-import org.springframework.web.bind.annotation.RequestMapping;\n-import org.springframework.web.bind.annotation.RestController;\n+import com.nimbusds.jose.jwk.JWK;\n+import com.nimbusds.jose.jwk.JWKSet;\n+import lombok.RequiredArgsConstructor;\n+import net.minidev.json.JSONObject;\n+import org.springframework.web.bind.annotation.*;\n import org.zowe.apiml.gateway.security.service.AuthenticationService;\n+import org.zowe.apiml.gateway.security.service.JwtSecurityInitializer;\n+import org.zowe.apiml.gateway.security.service.zosmf.ZosmfServiceFacade;\n \n import javax.servlet.http.HttpServletRequest;\n import javax.servlet.http.HttpServletResponse;\n+import java.util.LinkedList;\n+import java.util.List;\n \n import static org.apache.http.HttpStatus.*;\n \n /**\n  * Controller offer method to control security. It can contains method for user and also method for calling services\n  * by gateway to distribute state of authentication between nodes.\n  */\n-@AllArgsConstructor\n+@RequiredArgsConstructor\n @RestController\n @RequestMapping(\"/auth\")\n public class AuthController {\n \n+    @org.springframework.beans.factory.annotation.Value(\"${apiml.security.zosmf.useJwtToken:true}\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM1ODU0NQ=="}, "originalCommit": {"oid": "8c8be049d8919a50623823c7f0c6c39d8ba57010"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzI1NDQzNA==", "bodyText": "i tried it is working well\n@Value(\"${apiml.security.zosmf.useJwtToken:true}\")", "url": "https://github.com/zowe/api-layer/pull/561#discussion_r397254434", "createdAt": "2020-03-24T15:43:14Z", "author": {"login": "ilkinabdullayev"}, "path": "gateway-service/src/main/java/org/zowe/apiml/gateway/controllers/AuthController.java", "diffHunk": "@@ -9,29 +9,39 @@\n  */\n package org.zowe.apiml.gateway.controllers;\n \n-import lombok.AllArgsConstructor;\n-import org.springframework.web.bind.annotation.DeleteMapping;\n-import org.springframework.web.bind.annotation.GetMapping;\n-import org.springframework.web.bind.annotation.RequestMapping;\n-import org.springframework.web.bind.annotation.RestController;\n+import com.nimbusds.jose.jwk.JWK;\n+import com.nimbusds.jose.jwk.JWKSet;\n+import lombok.RequiredArgsConstructor;\n+import net.minidev.json.JSONObject;\n+import org.springframework.web.bind.annotation.*;\n import org.zowe.apiml.gateway.security.service.AuthenticationService;\n+import org.zowe.apiml.gateway.security.service.JwtSecurityInitializer;\n+import org.zowe.apiml.gateway.security.service.zosmf.ZosmfServiceFacade;\n \n import javax.servlet.http.HttpServletRequest;\n import javax.servlet.http.HttpServletResponse;\n+import java.util.LinkedList;\n+import java.util.List;\n \n import static org.apache.http.HttpStatus.*;\n \n /**\n  * Controller offer method to control security. It can contains method for user and also method for calling services\n  * by gateway to distribute state of authentication between nodes.\n  */\n-@AllArgsConstructor\n+@RequiredArgsConstructor\n @RestController\n @RequestMapping(\"/auth\")\n public class AuthController {\n \n+    @org.springframework.beans.factory.annotation.Value(\"${apiml.security.zosmf.useJwtToken:true}\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM1ODU0NQ=="}, "originalCommit": {"oid": "8c8be049d8919a50623823c7f0c6c39d8ba57010"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0NDQ5MjQ1OnYy", "diffSide": "RIGHT", "path": "gateway-service/src/main/java/org/zowe/apiml/gateway/controllers/AuthController.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNDowNzoxN1rOF4GjZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwOTowNzo1NVrOF58R4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM3MTk0Mg==", "bodyText": "May I ask why you prefer inheritance to test class, you can simply test by creating Setter method for useZosmfJwtToken. So basically this field has protected access level only for test?", "url": "https://github.com/zowe/api-layer/pull/561#discussion_r394371942", "createdAt": "2020-03-18T14:07:17Z", "author": {"login": "ilkinabdullayev"}, "path": "gateway-service/src/main/java/org/zowe/apiml/gateway/controllers/AuthController.java", "diffHunk": "@@ -9,29 +9,39 @@\n  */\n package org.zowe.apiml.gateway.controllers;\n \n-import lombok.AllArgsConstructor;\n-import org.springframework.web.bind.annotation.DeleteMapping;\n-import org.springframework.web.bind.annotation.GetMapping;\n-import org.springframework.web.bind.annotation.RequestMapping;\n-import org.springframework.web.bind.annotation.RestController;\n+import com.nimbusds.jose.jwk.JWK;\n+import com.nimbusds.jose.jwk.JWKSet;\n+import lombok.RequiredArgsConstructor;\n+import net.minidev.json.JSONObject;\n+import org.springframework.web.bind.annotation.*;\n import org.zowe.apiml.gateway.security.service.AuthenticationService;\n+import org.zowe.apiml.gateway.security.service.JwtSecurityInitializer;\n+import org.zowe.apiml.gateway.security.service.zosmf.ZosmfServiceFacade;\n \n import javax.servlet.http.HttpServletRequest;\n import javax.servlet.http.HttpServletResponse;\n+import java.util.LinkedList;\n+import java.util.List;\n \n import static org.apache.http.HttpStatus.*;\n \n /**\n  * Controller offer method to control security. It can contains method for user and also method for calling services\n  * by gateway to distribute state of authentication between nodes.\n  */\n-@AllArgsConstructor\n+@RequiredArgsConstructor\n @RestController\n @RequestMapping(\"/auth\")\n public class AuthController {\n \n+    @org.springframework.beans.factory.annotation.Value(\"${apiml.security.zosmf.useJwtToken:true}\")\n+    protected boolean useZosmfJwtToken;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c8be049d8919a50623823c7f0c6c39d8ba57010"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjMwMDc3MQ==", "bodyText": "I thought about more changes, then there was only this setter, i changed it in the last commit", "url": "https://github.com/zowe/api-layer/pull/561#discussion_r396300771", "createdAt": "2020-03-23T09:07:55Z", "author": {"login": "pj892031"}, "path": "gateway-service/src/main/java/org/zowe/apiml/gateway/controllers/AuthController.java", "diffHunk": "@@ -9,29 +9,39 @@\n  */\n package org.zowe.apiml.gateway.controllers;\n \n-import lombok.AllArgsConstructor;\n-import org.springframework.web.bind.annotation.DeleteMapping;\n-import org.springframework.web.bind.annotation.GetMapping;\n-import org.springframework.web.bind.annotation.RequestMapping;\n-import org.springframework.web.bind.annotation.RestController;\n+import com.nimbusds.jose.jwk.JWK;\n+import com.nimbusds.jose.jwk.JWKSet;\n+import lombok.RequiredArgsConstructor;\n+import net.minidev.json.JSONObject;\n+import org.springframework.web.bind.annotation.*;\n import org.zowe.apiml.gateway.security.service.AuthenticationService;\n+import org.zowe.apiml.gateway.security.service.JwtSecurityInitializer;\n+import org.zowe.apiml.gateway.security.service.zosmf.ZosmfServiceFacade;\n \n import javax.servlet.http.HttpServletRequest;\n import javax.servlet.http.HttpServletResponse;\n+import java.util.LinkedList;\n+import java.util.List;\n \n import static org.apache.http.HttpStatus.*;\n \n /**\n  * Controller offer method to control security. It can contains method for user and also method for calling services\n  * by gateway to distribute state of authentication between nodes.\n  */\n-@AllArgsConstructor\n+@RequiredArgsConstructor\n @RestController\n @RequestMapping(\"/auth\")\n public class AuthController {\n \n+    @org.springframework.beans.factory.annotation.Value(\"${apiml.security.zosmf.useJwtToken:true}\")\n+    protected boolean useZosmfJwtToken;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDM3MTk0Mg=="}, "originalCommit": {"oid": "8c8be049d8919a50623823c7f0c6c39d8ba57010"}, "originalPosition": 36}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 451, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}