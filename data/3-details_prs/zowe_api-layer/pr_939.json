{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI0NjcxNjE1", "number": 939, "title": "PoC packing", "bodyText": "Description\nPlease include a summary of the change and which issue is fixed. Please also include relevant motivation and context. List any dependencies that are required for this change.\nFixes # (issue)\nType of change\nPlease delete options that are not relevant.\n\n Bug fix (non-breaking change which fixes an issue)\n New feature (non-breaking change which adds functionality)\n Breaking change (fix or feature that would cause existing functionality to not work as expected)\n This change requires a documentation update\n\nChecklist:\n\n My code follows the style guidelines of this project\n I have performed a self-review of my own code\n I have commented my code, particularly in hard-to-understand areas\n I have made corresponding changes to the documentation\n My changes generate no new warnings\n I have added tests that prove my fix is effective or that my feature works\n New and existing unit tests pass locally with my changes\n Any dependent changes have been merged and published in downstream modules\n\nFor more details about how should the code look like read the Contributing guideline", "createdAt": "2020-11-20T12:24:06Z", "url": "https://github.com/zowe/api-layer/pull/939", "merged": true, "mergeCommit": {"oid": "e27dc32e4d3b1095033f73a203945a1e71723085"}, "closed": true, "closedAt": "2020-11-26T15:01:20Z", "author": {"login": "stevenhorsman"}, "timelineItems": {"totalCount": 37, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdeWVoTAH2gAyNTI0NjcxNjE1OjBlOTY4NTc1YjZkZDUzZTUxYmU0ZWMzMDMxZTBjYTNiMjkyOGI2NDM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdgT7zqAH2gAyNTI0NjcxNjE1OjFmZDNmMzcwOGMzYzk0NDhkODZlZTgxYWRmNTIxNDkyYWMwMGIwMzg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0e968575b6dd53e51be4ec3031e0ca3b2928b643", "author": {"user": {"login": "balhar-jakub", "name": "Jakub Balhar"}}, "url": "https://github.com/zowe/api-layer/commit/0e968575b6dd53e51be4ec3031e0ca3b2928b643", "committedDate": "2020-11-20T12:16:30Z", "message": "Initial attempt to add gateway package"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c2821f17015d539db6c16275fb67bccc8f5e5b6", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/5c2821f17015d539db6c16275fb67bccc8f5e5b6", "committedDate": "2020-11-20T12:22:48Z", "message": "Merge remote-tracking branch 'origin/master' into users/stevenh/packaging-poc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c47a5da725d6e5e3ace1610e2cb14b3fed3cdad2", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/c47a5da725d6e5e3ace1610e2cb14b3fed3cdad2", "committedDate": "2020-11-20T12:37:25Z", "message": "Update gradle build\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9db9106d15dc773aac6517a8ddb96e702a93e852", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/9db9106d15dc773aac6517a8ddb96e702a93e852", "committedDate": "2020-11-20T12:41:18Z", "message": "Update artifact name\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02cebcc7a274a0473288024a7c94678b839d2e92", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/02cebcc7a274a0473288024a7c94678b839d2e92", "committedDate": "2020-11-20T14:33:20Z", "message": " Directory rename\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08b2f3523ce07b0ee70f7138985233f05cb759bb", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/08b2f3523ce07b0ee70f7138985233f05cb759bb", "committedDate": "2020-11-20T14:34:45Z", "message": "Merge remote-tracking branch 'origin/master' into users/stevenh/packaging-poc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0a6ae36ac6d53047efb7ea62d47703029709007", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/c0a6ae36ac6d53047efb7ea62d47703029709007", "committedDate": "2020-11-20T14:47:24Z", "message": "Update task name\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "203dafabff898a1702bd29fe28bb19d626082611", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/203dafabff898a1702bd29fe28bb19d626082611", "committedDate": "2020-11-20T15:43:09Z", "message": "Try adding api-catalog and discovery packages\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f68de00fbc7850a13198025f47fe5241c0ebd410", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/f68de00fbc7850a13198025f47fe5241c0ebd410", "committedDate": "2020-11-20T15:47:32Z", "message": "Fix typo\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffaccd99beee5af2c1179fdcc3cb4ff4e649eb94", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/ffaccd99beee5af2c1179fdcc3cb4ff4e649eb94", "committedDate": "2020-11-20T16:16:40Z", "message": "Fix copy-paste errors\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5891849f95d42908e7c7d91408358bac89bad86", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/c5891849f95d42908e7c7d91408358bac89bad86", "committedDate": "2020-11-23T11:47:57Z", "message": "Update validation\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e2ba9c675311ecf36fddd2bd2b4a0d4e7704172", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/1e2ba9c675311ecf36fddd2bd2b4a0d4e7704172", "committedDate": "2020-11-23T12:08:49Z", "message": "Add caching-service package"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "edd406e79282b4a34e96b3d4b894319096d1dedc", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/edd406e79282b4a34e96b3d4b894319096d1dedc", "committedDate": "2020-11-23T12:08:53Z", "message": "Merge branch 'users/stevenh/packaging-poc' of github.com:zowe/api-layer into users/stevenh/packaging-poc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0577021990bb192f3e7fed00224978a426854c3d", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/0577021990bb192f3e7fed00224978a426854c3d", "committedDate": "2020-11-23T12:09:16Z", "message": "Merge remote-tracking branch 'origin/master' into users/stevenh/packaging-poc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2ODkwOTc3", "url": "https://github.com/zowe/api-layer/pull/939#pullrequestreview-536890977", "createdAt": "2020-11-23T22:21:37Z", "commit": {"oid": "0577021990bb192f3e7fed00224978a426854c3d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QyMjoyMTozOFrOH4hqJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QyMzowODoxMFrOH4i7Xg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTAzMzc2NQ==", "bodyText": "We may not need this check for HA. We still want to install the plugin even if current HA-instance doesn't have app-server started.", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529033765", "createdAt": "2020-11-23T22:21:38Z", "author": {"login": "jackjia-ibm"}, "path": "api-catalog-package/src/main/resources/bin/configure.sh", "diffHunk": "@@ -0,0 +1,24 @@\n+#!/bin/sh\n+\n+################################################################################\n+# This program and the accompanying materials are made available under the terms of the\n+# Eclipse Public License v2.0 which accompanies this distribution, and is available at\n+# https://www.eclipse.org/legal/epl-v20.html\n+#\n+# SPDX-License-Identifier: EPL-2.0\n+#\n+# Copyright IBM Corporation 2019, 2020\n+################################################################################\n+\n+if [[ ${LAUNCH_COMPONENTS} == *\"app-server\"* ]]; then", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0577021990bb192f3e7fed00224978a426854c3d"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTAzNjUxMQ==", "bodyText": "How to match real Artifactory path org/zowe/apiml/sdk/api-catalog-package.", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529036511", "createdAt": "2020-11-23T22:27:33Z", "author": {"login": "jackjia-ibm"}, "path": "api-catalog-package/src/main/resources/manifest.yaml", "diffHunk": "@@ -0,0 +1,25 @@\n+---\n+name: api-catalog\n+# Component identifier. This identifier matches artifact path in Zowe Artifactory https://zowe.jfrog.io/.\n+id: org.zowe.apiml.api-catalog # TODO - this needs deciding on and updating", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0577021990bb192f3e7fed00224978a426854c3d"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTAzODEwOQ==", "bodyText": "This looks new to me. Is this APIML specific issue? Do you think we should handle this in zowe-installpackaging/bin/internal/zowe-set-env.sh?", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529038109", "createdAt": "2020-11-23T22:31:10Z", "author": {"login": "jackjia-ibm"}, "path": "api-catalog-package/src/main/resources/bin/start.sh", "diffHunk": "@@ -0,0 +1,87 @@\n+#!/bin/sh\n+\n+################################################################################\n+# This program and the accompanying materials are made available under the terms of the\n+# Eclipse Public License v2.0 which accompanies this distribution, and is available at\n+# https://www.eclipse.org/legal/epl-v20.html\n+#\n+# SPDX-License-Identifier: EPL-2.0\n+#\n+# Copyright IBM Corporation 2019, 2020\n+################################################################################\n+\n+# Variables required on shell:\n+# - ZOWE_PREFIX\n+# - DISCOVERY_PORT - the port the discovery service will use\n+# - CATALOG_PORT - the port the api catalog service will use\n+# - GATEWAY_PORT - the port the api gateway service will use\n+# - VERIFY_CERTIFICATES - boolean saying if we accept only verified certificates\n+# - DISCOVERY_PORT - The port the data sets server will use\n+# - KEY_ALIAS\n+# - KEYSTORE - The keystore to use for SSL certificates\n+# - KEYSTORE_TYPE - The keystore type to use for SSL certificates\n+# - KEYSTORE_PASSWORD - The password to access the keystore supplied by KEYSTORE\n+# - KEY_ALIAS - The alias of the key within the keystore\n+# - ALLOW_SLASHES - Allows encoded slashes on on URLs through gateway\n+# - ZOWE_MANIFEST - The full path to Zowe's manifest.json file\n+\n+JAR_FILE=\"${LAUNCH_COMPONENT}/api-catalog-services.jar\"\n+\n+# API Mediation Layer Debug Mode\n+export LOG_LEVEL=\n+\n+if [[ ! -z ${APIML_DEBUG_MODE_ENABLED} && ${APIML_DEBUG_MODE_ENABLED} == true ]]\n+then\n+  export LOG_LEVEL=\"debug\"\n+fi\n+\n+LIBPATH=\"$LIBPATH\":\"/lib\"\n+LIBPATH=\"$LIBPATH\":\"/usr/lib\"\n+LIBPATH=\"$LIBPATH\":\"${JAVA_HOME}\"/bin\n+LIBPATH=\"$LIBPATH\":\"${JAVA_HOME}\"/bin/classic\n+LIBPATH=\"$LIBPATH\":\"${JAVA_HOME}\"/bin/j9vm\n+LIBPATH=\"$LIBPATH\":\"${JAVA_HOME}\"/lib/s390/classic\n+LIBPATH=\"$LIBPATH\":\"${JAVA_HOME}\"/lib/s390/default\n+LIBPATH=\"$LIBPATH\":\"${JAVA_HOME}\"/lib/s390/j9vm\n+export LIBPATH=\"$LIBPATH\":", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0577021990bb192f3e7fed00224978a426854c3d"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTAzODU0OQ==", "bodyText": "Need to confirm if this service id is correct.", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529038549", "createdAt": "2020-11-23T22:32:16Z", "author": {"login": "jackjia-ibm"}, "path": "caching-service-package/src/main/resources/manifest.yaml", "diffHunk": "@@ -0,0 +1,25 @@\n+---\n+name: caching-service\n+# Component identifier. This identifier matches artifact path in Zowe Artifactory https://zowe.jfrog.io/.\n+id: org.zowe.apiml.caching-service # TODO - this needs deciding on and updating\n+# Component version is defined in gradle.properties for Gradle project\n+# Human readable component name\n+title: Caching service for internal usage\n+# Human readable component description\n+description: Service that provides caching API.\n+license: EPL-2.0\n+repository:\n+  type: git\n+  url: https://github.com/zowe/api-layer.git # TODO - link to the subfolder?\n+build:\n+  branch: \"{{build.branch}}\"\n+  number: \"{{build.number}}\"\n+  commitHash: \"{{build.commitHash}}\"\n+  timestamp: \"{{build.timestamp}}\"\n+commands:\n+  start: bin/start.sh\n+  # Note: component has no configure script\n+  validate: bin/validate.sh\n+apimlServices:\n+  dynamic:\n+    - serviceId: cachingservice", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0577021990bb192f3e7fed00224978a426854c3d"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA0MDUzMg==", "bodyText": "Could we support validate_variable_is_set \"KEYSTORE KEYSTORE_PASSWORD KEY_ALIAS VERIFY_CERTIFICATES\" format? Or add a function called validate_variables_are_set.", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529040532", "createdAt": "2020-11-23T22:36:30Z", "author": {"login": "jackjia-ibm"}, "path": "api-catalog-package/src/main/resources/bin/validate.sh", "diffHunk": "@@ -0,0 +1,31 @@\n+#!/bin/sh\n+\n+################################################################################\n+# This program and the accompanying materials are made available under the terms of the\n+# Eclipse Public License v2.0 which accompanies this distribution, and is available at\n+# https://www.eclipse.org/legal/epl-v20.html\n+#\n+# SPDX-License-Identifier: EPL-2.0\n+#\n+# Copyright IBM Corporation 2019, 2020\n+################################################################################\n+\n+INITIAL_ERRORS_FOUND=$ERRORS_FOUND\n+\n+# - GATEWAY_PORT - should not be bound to a port currently\n+. ${ROOT_DIR}/bin/utils/network-utils.sh\n+validate_port_is_available ${CATALOG_PORT}\n+validate_host_is_resolvable \"ZOWE_EXPLORER_HOST\" # Note - takes variable name, not value as parameter\n+\n+# Validate some certificate values properly set. Needs more adding?\n+. ${ROOT_DIR}/bin/utils/zowe-variable-utils.sh\n+validate_zowe_prefix\n+validate_variable_is_set \"KEYSTORE\"\n+validate_variable_is_set \"KEYSTORE_PASSWORD\"\n+validate_variable_is_set \"KEY_ALIAS\"\n+validate_variable_is_set \"VERIFY_CERTIFICATES\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0577021990bb192f3e7fed00224978a426854c3d"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA0MTc4Mg==", "bodyText": "Combine with line 16, 21 and 28, could we source one single library then the extension developer doesn't need to know which function exists in which utils script.\nI think eventually we can change run-zowe.sh to source the lib, and extension can use it directly.", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529041782", "createdAt": "2020-11-23T22:39:08Z", "author": {"login": "jackjia-ibm"}, "path": "api-catalog-package/src/main/resources/bin/validate.sh", "diffHunk": "@@ -0,0 +1,31 @@\n+#!/bin/sh\n+\n+################################################################################\n+# This program and the accompanying materials are made available under the terms of the\n+# Eclipse Public License v2.0 which accompanies this distribution, and is available at\n+# https://www.eclipse.org/legal/epl-v20.html\n+#\n+# SPDX-License-Identifier: EPL-2.0\n+#\n+# Copyright IBM Corporation 2019, 2020\n+################################################################################\n+\n+INITIAL_ERRORS_FOUND=$ERRORS_FOUND\n+\n+# - GATEWAY_PORT - should not be bound to a port currently\n+. ${ROOT_DIR}/bin/utils/network-utils.sh\n+validate_port_is_available ${CATALOG_PORT}\n+validate_host_is_resolvable \"ZOWE_EXPLORER_HOST\" # Note - takes variable name, not value as parameter\n+\n+# Validate some certificate values properly set. Needs more adding?\n+. ${ROOT_DIR}/bin/utils/zowe-variable-utils.sh", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0577021990bb192f3e7fed00224978a426854c3d"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA0MjcwNA==", "bodyText": "Not sure if we can eliminate this line from extension side, but handle it on run-zowe.sh instead. I know many other packages may not have this line. For example, https://github.com/zowe/explorer-jes/blob/staging/bin/validate.sh.", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529042704", "createdAt": "2020-11-23T22:41:05Z", "author": {"login": "jackjia-ibm"}, "path": "api-catalog-package/src/main/resources/bin/validate.sh", "diffHunk": "@@ -0,0 +1,31 @@\n+#!/bin/sh\n+\n+################################################################################\n+# This program and the accompanying materials are made available under the terms of the\n+# Eclipse Public License v2.0 which accompanies this distribution, and is available at\n+# https://www.eclipse.org/legal/epl-v20.html\n+#\n+# SPDX-License-Identifier: EPL-2.0\n+#\n+# Copyright IBM Corporation 2019, 2020\n+################################################################################\n+\n+INITIAL_ERRORS_FOUND=$ERRORS_FOUND\n+\n+# - GATEWAY_PORT - should not be bound to a port currently\n+. ${ROOT_DIR}/bin/utils/network-utils.sh\n+validate_port_is_available ${CATALOG_PORT}\n+validate_host_is_resolvable \"ZOWE_EXPLORER_HOST\" # Note - takes variable name, not value as parameter\n+\n+# Validate some certificate values properly set. Needs more adding?\n+. ${ROOT_DIR}/bin/utils/zowe-variable-utils.sh\n+validate_zowe_prefix\n+validate_variable_is_set \"KEYSTORE\"\n+validate_variable_is_set \"KEYSTORE_PASSWORD\"\n+validate_variable_is_set \"KEY_ALIAS\"\n+validate_variable_is_set \"VERIFY_CERTIFICATES\"\n+\n+. ${ROOT_DIR}/bin/utils/java-utils.sh\n+validate_java_home\n+\n+return $ERRORS_FOUND-$INITIAL_ERRORS_FOUND", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0577021990bb192f3e7fed00224978a426854c3d"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA0Mzk0OA==", "bodyText": "Could we change validate_directory_is_accessible to accept multiple directories, or rename to validate_directories_are_accessible, so IFS and loop can be handled by util lib.", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529043948", "createdAt": "2020-11-23T22:43:59Z", "author": {"login": "jackjia-ibm"}, "path": "discovery-package/src/main/resources/bin/validate.sh", "diffHunk": "@@ -0,0 +1,44 @@\n+#!/bin/sh\n+\n+################################################################################\n+# This program and the accompanying materials are made available under the terms of the\n+# Eclipse Public License v2.0 which accompanies this distribution, and is available at\n+# https://www.eclipse.org/legal/epl-v20.html\n+#\n+# SPDX-License-Identifier: EPL-2.0\n+#\n+# Copyright IBM Corporation 2019, 2020\n+################################################################################\n+\n+INITIAL_ERRORS_FOUND=$ERRORS_FOUND\n+\n+# - GATEWAY_PORT - should not be bound to a port currently\n+. ${ROOT_DIR}/bin/utils/network-utils.sh\n+validate_port_is_available ${DISCOVERY_PORT}\n+validate_host_is_resolvable \"ZOWE_EXPLORER_HOST\" # Note - takes variable name, not value as parameter\n+\n+. ${ROOT_DIR}/bin/utils/zosmf-utils.sh\n+validate_zosmf_host_and_port \"${ZOSMF_HOST}\" \"${ZOSMF_PORT}\"\n+\n+# Validate some certificate values properly set. Needs more adding?\n+. ${ROOT_DIR}/bin/utils/zowe-variable-utils.sh\n+validate_zowe_prefix\n+validate_variable_is_set \"KEYSTORE\"\n+validate_variable_is_set \"KEYSTORE_PASSWORD\"\n+validate_variable_is_set \"KEY_ALIAS\"\n+validate_variable_is_set \"VERIFY_CERTIFICATES\"\n+\n+. ${ROOT_DIR}/bin/utils/file-utils.sh\n+# Check we can access all external static def directories\n+OLDIFS=\"$IFS\"\n+IFS=\";\"\n+for DIRECTORY in ${ZWEAD_EXTERNAL_STATIC_DEF_DIRECTORIES} \n+do\n+  validate_directory_is_accessible \"${DIRECTORY}\"\n+done\n+export IFS=\"$OLDIFS\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0577021990bb192f3e7fed00224978a426854c3d"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA0NjcwOA==", "bodyText": "To me, I think subfolder is not needed. The API Catalog code may exist in or reference multiple sub-folders, we may not have an accurate list of all related folders. For example, should we point to api-catalog-services, or api-catalog-ui, or api-catalog-package folder in this case. It may also related to apiml-common.", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529046708", "createdAt": "2020-11-23T22:50:06Z", "author": {"login": "jackjia-ibm"}, "path": "api-catalog-package/src/main/resources/manifest.yaml", "diffHunk": "@@ -0,0 +1,25 @@\n+---\n+name: api-catalog\n+# Component identifier. This identifier matches artifact path in Zowe Artifactory https://zowe.jfrog.io/.\n+id: org.zowe.apiml.api-catalog # TODO - this needs deciding on and updating\n+# Component version is defined in gradle.properties for Gradle project\n+# Human readable component name\n+title: API Catalog\n+# Human readable component description\n+description: API Catalog service to display service details and API documentation for discovered API services.\n+license: EPL-2.0\n+repository:\n+  type: git\n+  url: https://github.com/zowe/api-layer.git # TODO - link to the subfolder?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0577021990bb192f3e7fed00224978a426854c3d"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA1NDU1OA==", "bodyText": "I have mixed feelings of the network validations. Few thoughts:\n\nthe validation method (onetstat, oping) is not compatible with Linux,\nin some extreme strict docker images, people may not have netstat/ping network util tools installed,\nthe variable is validated here ZOWE_EXPLORER_HOST could be complicated. Currently it's simple and pointed to external domain where we access the system. But actually the system itself may not be necessary to have to resolve the domain correctly. Resolving the domain is only critical to external, the client side, which we cannot validate here,\nI have concerns to reference ZOWE_EXPLORER_HOST from component level. I think we should try to eliminate it as much as possible because the variable itself is confusing and has been used for various purpose: external domain, internal domains, referrer, etc.", "url": "https://github.com/zowe/api-layer/pull/939#discussion_r529054558", "createdAt": "2020-11-23T23:08:10Z", "author": {"login": "jackjia-ibm"}, "path": "api-catalog-package/src/main/resources/bin/validate.sh", "diffHunk": "@@ -0,0 +1,31 @@\n+#!/bin/sh\n+\n+################################################################################\n+# This program and the accompanying materials are made available under the terms of the\n+# Eclipse Public License v2.0 which accompanies this distribution, and is available at\n+# https://www.eclipse.org/legal/epl-v20.html\n+#\n+# SPDX-License-Identifier: EPL-2.0\n+#\n+# Copyright IBM Corporation 2019, 2020\n+################################################################################\n+\n+INITIAL_ERRORS_FOUND=$ERRORS_FOUND\n+\n+# - GATEWAY_PORT - should not be bound to a port currently\n+. ${ROOT_DIR}/bin/utils/network-utils.sh\n+validate_port_is_available ${CATALOG_PORT}\n+validate_host_is_resolvable \"ZOWE_EXPLORER_HOST\" # Note - takes variable name, not value as parameter", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0577021990bb192f3e7fed00224978a426854c3d"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e0cfc8633d66cab8037308586a5da337a0c99b2", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/3e0cfc8633d66cab8037308586a5da337a0c99b2", "committedDate": "2020-11-24T09:52:05Z", "message": "Post-review updates\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4bba40a5ec611cb50d7ca9c8e38e64eca15672d4", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/4bba40a5ec611cb50d7ca9c8e38e64eca15672d4", "committedDate": "2020-11-25T09:22:56Z", "message": "Merge branch 'master' into users/stevenh/packaging-poc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40750530ff7d53cf39cf1e4d418696235b8911dc", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/40750530ff7d53cf39cf1e4d418696235b8911dc", "committedDate": "2020-11-25T14:53:59Z", "message": "Update validate scripts based on new utils\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e81dbf73d861187449e49afcfc0798125870fbb", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/8e81dbf73d861187449e49afcfc0798125870fbb", "committedDate": "2020-11-25T14:54:03Z", "message": "Merge branch 'users/stevenh/packaging-poc' of github.com:zowe/api-layer into users/stevenh/packaging-poc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac6d9f04ec805f3c084141ddd0e37fbf717ba8f2", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/ac6d9f04ec805f3c084141ddd0e37fbf717ba8f2", "committedDate": "2020-11-25T14:54:59Z", "message": "Merge remote-tracking branch 'origin/master' into users/stevenh/packaging-poc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e77bdfcb8a49242d89d73251392a967c753a2eb0", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/e77bdfcb8a49242d89d73251392a967c753a2eb0", "committedDate": "2020-11-25T15:11:17Z", "message": "Merge branch 'master' into users/stevenh/packaging-poc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61006a7278648d8bf1a3aaeae652d65f5d535519", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/61006a7278648d8bf1a3aaeae652d65f5d535519", "committedDate": "2020-11-26T09:19:26Z", "message": "Merge branch 'master' into users/stevenh/packaging-poc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2faedc1b7629b32b04eb72f3868e06ca34ef7ce1", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/2faedc1b7629b32b04eb72f3868e06ca34ef7ce1", "committedDate": "2020-11-26T09:57:55Z", "message": "Update variable name\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c9fde9be2615d67f86249a8f48f59d53f47ea406", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/c9fde9be2615d67f86249a8f48f59d53f47ea406", "committedDate": "2020-11-26T09:57:59Z", "message": "Merge branch 'users/stevenh/packaging-poc' of github.com:zowe/api-layer into users/stevenh/packaging-poc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1364462cf8eaa7547fa147e0b9b2d593e51950e", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/e1364462cf8eaa7547fa147e0b9b2d593e51950e", "committedDate": "2020-11-26T12:28:16Z", "message": "Merge branch 'master' into users/stevenh/packaging-poc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97a56ef17866fb203013becbf0b04cc66326243c", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/97a56ef17866fb203013becbf0b04cc66326243c", "committedDate": "2020-11-26T12:33:25Z", "message": "Add warning comment\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "507712063c0fbd3f7993e9605682f64360b0b009", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/507712063c0fbd3f7993e9605682f64360b0b009", "committedDate": "2020-11-26T12:33:30Z", "message": "Merge branch 'users/stevenh/packaging-poc' of github.com:zowe/api-layer into users/stevenh/packaging-poc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM5Mjk0ODEy", "url": "https://github.com/zowe/api-layer/pull/939#pullrequestreview-539294812", "createdAt": "2020-11-26T13:01:26Z", "commit": {"oid": "507712063c0fbd3f7993e9605682f64360b0b009"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12504c072e68af42ea3345e7e60a116fd36d884b", "author": {"user": {"login": "balhar-jakub", "name": "Jakub Balhar"}}, "url": "https://github.com/zowe/api-layer/commit/12504c072e68af42ea3345e7e60a116fd36d884b", "committedDate": "2020-11-26T13:01:35Z", "message": "Merge branch 'master' into users/stevenh/packaging-poc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1923a2414a43520a3f401f5dd27061b7ce509691", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/1923a2414a43520a3f401f5dd27061b7ce509691", "committedDate": "2020-11-26T13:39:59Z", "message": "Merge remote-tracking branch 'origin/master' into users/stevenh/packaging-poc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2d2a6d712972da98f455ffb6acbf1d2c1ea108c", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/f2d2a6d712972da98f455ffb6acbf1d2c1ea108c", "committedDate": "2020-11-26T13:42:12Z", "message": "Merge branch 'users/stevenh/packaging-poc' of github.com:zowe/api-layer into users/stevenh/packaging-poc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d27ed2c2a7e9e75afe4f4298407bde0265c72862", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/d27ed2c2a7e9e75afe4f4298407bde0265c72862", "committedDate": "2020-11-26T13:43:03Z", "message": "Merged in new parameter from PR-925\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71c4c6d92dbdd939779d12c4fb3791598fd9b62b", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/71c4c6d92dbdd939779d12c4fb3791598fd9b62b", "committedDate": "2020-11-26T13:44:44Z", "message": "Update to match PR-925\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM5MzM0NDcy", "url": "https://github.com/zowe/api-layer/pull/939#pullrequestreview-539334472", "createdAt": "2020-11-26T13:54:52Z", "commit": {"oid": "71c4c6d92dbdd939779d12c4fb3791598fd9b62b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73b8d5ca41f018ebd4b55443c6e46a8a7f93eac4", "author": {"user": {"login": "balhar-jakub", "name": "Jakub Balhar"}}, "url": "https://github.com/zowe/api-layer/commit/73b8d5ca41f018ebd4b55443c6e46a8a7f93eac4", "committedDate": "2020-11-26T13:55:56Z", "message": "Merge branch 'master' into users/stevenh/packaging-poc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "faa1502daf5eee3890b537c65637a513561e2d4f", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/faa1502daf5eee3890b537c65637a513561e2d4f", "committedDate": "2020-11-26T14:36:17Z", "message": "Add java path check in conifguration\n\nSigned-off-by: stevenhorsman <steven@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1fd3f3708c3c9448d86ee81adf521492ac00b038", "author": {"user": {"login": "stevenhorsman", "name": "Steve Horsman"}}, "url": "https://github.com/zowe/api-layer/commit/1fd3f3708c3c9448d86ee81adf521492ac00b038", "committedDate": "2020-11-26T14:36:20Z", "message": "Merge branch 'users/stevenh/packaging-poc' of github.com:zowe/api-layer into users/stevenh/packaging-poc"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4781, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}