{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2MDcyNzE2", "number": 549, "title": "Penetration testing of JWT", "bodyText": "Based on the following article:\nhttps://medium.com/101-writeups/hacking-json-web-token-jwt-233fe6c862e6", "createdAt": "2020-03-10T11:14:39Z", "url": "https://github.com/zowe/api-layer/pull/549", "merged": true, "mergeCommit": {"oid": "7c7731927668c3d395dbaf59e32132e0ec0d531e"}, "closed": true, "closedAt": "2020-03-25T07:22:11Z", "author": {"login": "JirkaAichler"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcMQib2AH2gAyMzg2MDcyNzE2OjkzNTA3MGJlZDE5ODQ5YzYxYWM3YTI1NWEwZmZiNDRlNTA3NDU2NGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQvCsWgH2gAyMzg2MDcyNzE2OmUxYjBlMTY5MjdlMWU0OGU5YzlmNzJjM2Q1ZjZiMzM4ZjBlYTUyOGQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "935070bed19849c61ac7a255a0ffb44e5074564a", "author": {"user": {"login": "JirkaAichler", "name": null}}, "url": "https://github.com/zowe/api-layer/commit/935070bed19849c61ac7a255a0ffb44e5074564a", "committedDate": "2020-03-10T11:09:16Z", "message": "Add penetration testing of JWT\n\nSigned-off-by: JirkaAichler <jiri.aichler@broadcom.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c8a7307c95e1f6f8503ce36357fa9e7315e97bd", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/3c8a7307c95e1f6f8503ce36357fa9e7315e97bd", "committedDate": "2020-03-13T15:26:27Z", "message": "extending penetration tests about JWT (multiple cases and endpoints)\n\nSigned-off-by: Pavel Jare\u0161 <pavel.jares@broadcom.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77ff9c22859cba70954d52da00bed9395e55ca6d", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/77ff9c22859cba70954d52da00bed9395e55ca6d", "committedDate": "2020-03-16T12:33:58Z", "message": "Merge branch 'master' into protectors/jwtTest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1MzU3MDIy", "url": "https://github.com/zowe/api-layer/pull/549#pullrequestreview-375357022", "createdAt": "2020-03-16T16:01:18Z", "commit": {"oid": "77ff9c22859cba70954d52da00bed9395e55ca6d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNjowMToxOVrOF268wQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNjowMToxOVrOF268wQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEzMzI0OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * - passTicket endpoint on Gateway (covered by Spring security, see authorized access)\n          \n          \n            \n             * - PassTicket endpoint on Gateway (covered by Spring Security, see authorized access)", "url": "https://github.com/zowe/api-layer/pull/549#discussion_r393133249", "createdAt": "2020-03-16T16:01:19Z", "author": {"login": "plavjanik"}, "path": "integration-tests/src/test/java/org/zowe/apiml/penetration/JwtPenTest.java", "diffHunk": "@@ -0,0 +1,339 @@\n+package org.zowe.apiml.penetration;\n+\n+import io.jsonwebtoken.Jwts;\n+import io.jsonwebtoken.SignatureAlgorithm;\n+import io.restassured.RestAssured;\n+import org.json.JSONObject;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.zowe.apiml.gatewayservice.SecurityUtils;\n+import org.zowe.apiml.security.HttpsConfig;\n+import org.zowe.apiml.security.common.ticket.TicketRequest;\n+import org.zowe.apiml.util.config.ConfigReader;\n+import org.zowe.apiml.util.config.EnvironmentConfiguration;\n+import org.zowe.apiml.util.config.TlsConfiguration;\n+\n+import java.nio.charset.StandardCharsets;\n+import java.security.PublicKey;\n+import java.util.Base64;\n+\n+import static io.restassured.RestAssured.given;\n+import static io.restassured.http.ContentType.JSON;\n+import static org.apache.http.HttpStatus.SC_OK;\n+import static org.apache.http.HttpStatus.SC_UNAUTHORIZED;\n+import static org.hamcrest.core.Is.is;\n+import static org.junit.jupiter.api.Assertions.assertNotNull;\n+import static org.zowe.apiml.gatewayservice.SecurityUtils.getConfiguredSslConfig;\n+import static org.zowe.apiml.security.SecurityUtils.loadPublicKey;\n+\n+/*\n+ * Penetration testing of JWT\n+ *\n+ * Based on the following article:\n+ * https://medium.com/101-writeups/hacking-json-web-token-jwt-233fe6c862e6\n+ *\n+ * It tests three type of endpoints:\n+ * - query endpoint (verify JWT token)\n+ * - passTicket endpoint on Gateway (covered by Spring security, see authorized access)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77ff9c22859cba70954d52da00bed9395e55ca6d"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1MzU3Mzg3", "url": "https://github.com/zowe/api-layer/pull/549#pullrequestreview-375357387", "createdAt": "2020-03-16T16:01:43Z", "commit": {"oid": "77ff9c22859cba70954d52da00bed9395e55ca6d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNjowMTo0M1rOF2690Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNlQxNjowMTo0M1rOF2690Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEzMzUyMQ==", "bodyText": "``\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * - passTicket endpoint on Discoverable client (through server command's treatment)\n          \n          \n            \n             * - PassTicket endpoint on Discoverable client (through server command's treatment)", "url": "https://github.com/zowe/api-layer/pull/549#discussion_r393133521", "createdAt": "2020-03-16T16:01:43Z", "author": {"login": "plavjanik"}, "path": "integration-tests/src/test/java/org/zowe/apiml/penetration/JwtPenTest.java", "diffHunk": "@@ -0,0 +1,339 @@\n+package org.zowe.apiml.penetration;\n+\n+import io.jsonwebtoken.Jwts;\n+import io.jsonwebtoken.SignatureAlgorithm;\n+import io.restassured.RestAssured;\n+import org.json.JSONObject;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.zowe.apiml.gatewayservice.SecurityUtils;\n+import org.zowe.apiml.security.HttpsConfig;\n+import org.zowe.apiml.security.common.ticket.TicketRequest;\n+import org.zowe.apiml.util.config.ConfigReader;\n+import org.zowe.apiml.util.config.EnvironmentConfiguration;\n+import org.zowe.apiml.util.config.TlsConfiguration;\n+\n+import java.nio.charset.StandardCharsets;\n+import java.security.PublicKey;\n+import java.util.Base64;\n+\n+import static io.restassured.RestAssured.given;\n+import static io.restassured.http.ContentType.JSON;\n+import static org.apache.http.HttpStatus.SC_OK;\n+import static org.apache.http.HttpStatus.SC_UNAUTHORIZED;\n+import static org.hamcrest.core.Is.is;\n+import static org.junit.jupiter.api.Assertions.assertNotNull;\n+import static org.zowe.apiml.gatewayservice.SecurityUtils.getConfiguredSslConfig;\n+import static org.zowe.apiml.security.SecurityUtils.loadPublicKey;\n+\n+/*\n+ * Penetration testing of JWT\n+ *\n+ * Based on the following article:\n+ * https://medium.com/101-writeups/hacking-json-web-token-jwt-233fe6c862e6\n+ *\n+ * It tests three type of endpoints:\n+ * - query endpoint (verify JWT token)\n+ * - passTicket endpoint on Gateway (covered by Spring security, see authorized access)\n+ * - passTicket endpoint on Discoverable client (through server command's treatment)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77ff9c22859cba70954d52da00bed9395e55ca6d"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1MzU5ODU3", "url": "https://github.com/zowe/api-layer/pull/549#pullrequestreview-375359857", "createdAt": "2020-03-16T16:04:27Z", "commit": {"oid": "77ff9c22859cba70954d52da00bed9395e55ca6d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "850bb808acdcfdc97b0c1ee0818f00338554fd47", "author": {"user": {"login": "plavjanik", "name": "Petr Plavjanik"}}, "url": "https://github.com/zowe/api-layer/commit/850bb808acdcfdc97b0c1ee0818f00338554fd47", "committedDate": "2020-03-16T19:54:34Z", "message": "Update integration-tests/src/test/java/org/zowe/apiml/penetration/JwtPenTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ab3974d71ec7bfa4fb6f68e8da190595364b925", "author": {"user": {"login": "plavjanik", "name": "Petr Plavjanik"}}, "url": "https://github.com/zowe/api-layer/commit/9ab3974d71ec7bfa4fb6f68e8da190595364b925", "committedDate": "2020-03-16T19:54:41Z", "message": "Update integration-tests/src/test/java/org/zowe/apiml/penetration/JwtPenTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31db13c1014628cbeddb31524584758f15812380", "author": {"user": {"login": "JirkaAichler", "name": null}}, "url": "https://github.com/zowe/api-layer/commit/31db13c1014628cbeddb31524584758f15812380", "committedDate": "2020-03-17T13:05:55Z", "message": "Merge branch 'master' into protectors/jwtTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f33efc3c6567eef75632eabc6bba62e063e91657", "author": {"user": {"login": "JirkaAichler", "name": null}}, "url": "https://github.com/zowe/api-layer/commit/f33efc3c6567eef75632eabc6bba62e063e91657", "committedDate": "2020-03-17T13:51:13Z", "message": "Add license\n\nSigned-off-by: JirkaAichler <jiri.aichler@broadcom.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4de73b38058a5e2cfcef72f59f26bd3c65be5b8d", "author": {"user": {"login": "JirkaAichler", "name": null}}, "url": "https://github.com/zowe/api-layer/commit/4de73b38058a5e2cfcef72f59f26bd3c65be5b8d", "committedDate": "2020-03-17T13:51:34Z", "message": "Merge remote-tracking branch 'origin/protectors/jwtTest' into protectors/jwtTest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2MDcxMzAx", "url": "https://github.com/zowe/api-layer/pull/549#pullrequestreview-376071301", "createdAt": "2020-03-17T14:12:01Z", "commit": {"oid": "4de73b38058a5e2cfcef72f59f26bd3c65be5b8d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8076252037dbc7710d08a29de5c5770cd55206a8", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/8076252037dbc7710d08a29de5c5770cd55206a8", "committedDate": "2020-03-19T09:25:53Z", "message": "fix security issue\n\nSigned-off-by: Pavel Jare\u0161 <pavel.jares@broadcom.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bbd8caaecf7488f3f46a1e15f9fafdbc450d6791", "author": {"user": {"login": "plavjanik", "name": "Petr Plavjanik"}}, "url": "https://github.com/zowe/api-layer/commit/bbd8caaecf7488f3f46a1e15f9fafdbc450d6791", "committedDate": "2020-03-19T18:11:02Z", "message": "Merge branch 'master' into protectors/jwtTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9602c8ffc9b2c853376b43bdc814d3e481ca36e1", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/9602c8ffc9b2c853376b43bdc814d3e481ca36e1", "committedDate": "2020-03-19T21:55:53Z", "message": "fix tests with invalid tokens and refactor of JwtPenTest\n\nSigned-off-by: Pavel Jare\u0161 <pavel.jares@broadcom.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "666a4a15fdfbd5b395aa77c6f06f5c8bb97b15b5", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/666a4a15fdfbd5b395aa77c6f06f5c8bb97b15b5", "committedDate": "2020-03-23T09:13:39Z", "message": "Merge branch 'master' into protectors/jwtTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1b0e16927e1e48e9c9f72c3d5f6b338f0ea528d", "author": {"user": {"login": "pj892031", "name": "Pavel Jare\u0161"}}, "url": "https://github.com/zowe/api-layer/commit/e1b0e16927e1e48e9c9f72c3d5f6b338f0ea528d", "committedDate": "2020-03-24T08:57:21Z", "message": "attempt to remove useJUnitPlatform"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4922, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}