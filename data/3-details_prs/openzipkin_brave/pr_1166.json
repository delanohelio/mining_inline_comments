{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1ODQyOTg4", "number": 1166, "title": "Moves FinishedSpanHandler.alwaysSampleLocal to Tracing.Builder", "bodyText": "When FinishedSpanHandler.alwaysSampleLocal was defined, we didn't have\nTracingCustomizer which allowed looser coupling of configuration. This\nmoves FinishedSpanHandler.alwaysSampleLocal() to Tracing.Builder so\nwe don't have to inherit this burden in the upcoming SpanHandler.", "createdAt": "2020-04-20T05:55:36Z", "url": "https://github.com/openzipkin/brave/pull/1166", "merged": true, "mergeCommit": {"oid": "1111d827e3d97a9ffb22b22a4064b390312c498c"}, "closed": true, "closedAt": "2020-04-20T06:18:38Z", "author": {"login": "codefromthecrypt"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcZYlvaAH2gAyNDA1ODQyOTg4OmJiMDJjYWNiYTJhNjUzYTBkNmJkZWMyODVjMWU2MDUxNWE0Y2U0MDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcaQPpUgFqTM5ODY0MTQwNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bb02cacba2a653a0d6bdec285c1e60515a4ce401", "author": {"user": null}, "url": "https://github.com/openzipkin/brave/commit/bb02cacba2a653a0d6bdec285c1e60515a4ce401", "committedDate": "2020-04-20T05:53:08Z", "message": "Moves FinishedSpanHandler.alwaysSampleLocal to Tracing.Builder\n\nWhen FinishedSpanHandler.alwaysSampleLocal was defined, we didn't have\nTracingCustomizer which allowed looser coupling of configuration. This\nmoves `FinishedSpanHandler.alwaysSampleLocal()` to `Tracing.Builder` so\nwe don't have to inherit this burden in the upcoming `SpanHandler`."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MTU4NzI3", "url": "https://github.com/openzipkin/brave/pull/1166#pullrequestreview-396158727", "createdAt": "2020-04-20T06:00:35Z", "commit": {"oid": "bb02cacba2a653a0d6bdec285c1e60515a4ce401"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwNjowMDozNlrOGIEXRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwNjowMDozNlrOGIEXRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTExMzI4Nw==", "bodyText": "// Handle deprecated FinishedSpanHandler.alwaysSampleLocal", "url": "https://github.com/openzipkin/brave/pull/1166#discussion_r411113287", "createdAt": "2020-04-20T06:00:36Z", "author": {"login": "anuraaga"}, "path": "brave/src/main/java/brave/Tracing.java", "diffHunk": "@@ -455,6 +478,10 @@ public Tracing build() {\n       // Make sure any exceptions caused by handlers don't crash callers\n       FinishedSpanHandler finishedSpanHandler =\n         NoopAwareFinishedSpanHandler.create(spanHandlers, noop);\n+      boolean alwaysSampleLocal = builder.alwaysSampleLocal;\n+      for (FinishedSpanHandler handler : spanHandlers) {\n+        if (handler.alwaysSampleLocal()) alwaysSampleLocal = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb02cacba2a653a0d6bdec285c1e60515a4ce401"}, "originalPosition": 69}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04a1fe112b6b2a308e28a7c78a16679051c539ba", "author": {"user": null}, "url": "https://github.com/openzipkin/brave/commit/04a1fe112b6b2a308e28a7c78a16679051c539ba", "committedDate": "2020-04-20T06:11:34Z", "message": "feedback"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NjQxNDA2", "url": "https://github.com/openzipkin/brave/pull/1166#pullrequestreview-398641406", "createdAt": "2020-04-22T22:43:41Z", "commit": {"oid": "04a1fe112b6b2a308e28a7c78a16679051c539ba"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1671, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}