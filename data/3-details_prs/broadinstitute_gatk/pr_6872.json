{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5NjQ4ODE0", "number": 6872, "title": "optionally provide sample-map-file instead of sample-map-table", "bodyText": "Changes\n\n--cohort-sample-file can be used instead of --cohort-sample-table to provide the (sample_id,sample_name) map\nThe Avro reader was changed to set the BQ client's parent to be the current project instead of the destination table's project. This was needed for AoU since our notebook users do not have BQ jobs permissions on the microarray dataset.", "createdAt": "2020-10-08T04:32:21Z", "url": "https://github.com/broadinstitute/gatk/pull/6872", "merged": true, "mergeCommit": {"oid": "0360115ddd6d3c51bc9c4cae252f8c6e071546a2"}, "closed": true, "closedAt": "2020-10-21T15:35:16Z", "author": {"login": "ericsong"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQZ26pAH2gAyNDk5NjQ4ODE0OjRkNDEyNGNhZTAyNDg4MTk2ZDg5NjZlZDZhYWQ5ZGJhN2E5YjIwOWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUvE0FgFqTUxMzgxNDI4NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4d4124cae02488196d8966ed6aad9dba7a9b209d", "author": {"user": {"login": "ericsong", "name": "Eric Song"}}, "url": "https://github.com/broadinstitute/gatk/commit/4d4124cae02488196d8966ed6aad9dba7a9b209d", "committedDate": "2020-10-08T04:27:38Z", "message": "optionally provide sample-map-file instead of sample-map-table"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34189496a8589af0c6ab6dd9a63467f7e50d7dd3", "author": {"user": {"login": "ericsong", "name": "Eric Song"}}, "url": "https://github.com/broadinstitute/gatk/commit/34189496a8589af0c6ab6dd9a63467f7e50d7dd3", "committedDate": "2020-10-13T18:41:57Z", "message": "fix variantstore test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f4a300d73ee5124b2cf633a0765b3dc932e3757", "author": {"user": {"login": "meganshand", "name": null}}, "url": "https://github.com/broadinstitute/gatk/commit/3f4a300d73ee5124b2cf633a0765b3dc932e3757", "committedDate": "2020-10-16T21:24:42Z", "message": "trying to fix test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExNzc3MDA1", "url": "https://github.com/broadinstitute/gatk/pull/6872#pullrequestreview-511777005", "createdAt": "2020-10-19T13:46:00Z", "commit": {"oid": "3f4a300d73ee5124b2cf633a0765b3dc932e3757"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzo0NjowMVrOHkPI2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMzo0NjowMVrOHkPI2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc1ODgwOQ==", "bodyText": "There are two implication here -- you need permission, but also this is where the cost of using the storage API will be attributed.  This was set to the destination table project since (a) the user just created that table so they should have permission and (b) the cost for the temporary storage of that table and the cost to use the read API against it should go to to the same place.\nIf we need the extra flexibility to provide an independent project here, rather than the default I would make another argument like \"read-api-project\" or something that can be passed in to override the default of the table project", "url": "https://github.com/broadinstitute/gatk/pull/6872#discussion_r507758809", "createdAt": "2020-10-19T13:46:01Z", "author": {"login": "kcibul"}, "path": "src/main/java/org/broadinstitute/hellbender/utils/bigquery/StorageAPIAvroReader.java", "diffHunk": "@@ -50,7 +51,7 @@ public StorageAPIAvroReader(final TableReference tableRef, final String rowRestr\n         try {\n             this.client = BigQueryStorageClient.create();\n \n-            final String parent = String.format(\"projects/%s\", tableRef.tableProject);\n+            final String parent = String.format(\"projects/%s\", BigQueryOptions.getDefaultInstance().getProjectId());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f4a300d73ee5124b2cf633a0765b3dc932e3757"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4cc8731c9e423f4259182f9d3e3297bdad4a1150", "author": {"user": {"login": "ericsong", "name": "Eric Song"}}, "url": "https://github.com/broadinstitute/gatk/commit/4cc8731c9e423f4259182f9d3e3297bdad4a1150", "committedDate": "2020-10-19T17:01:53Z", "message": "pass in read project id"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13bf40a2c6e2de7685654e56935f0b204ea24ec6", "author": {"user": {"login": "ericsong", "name": "Eric Song"}}, "url": "https://github.com/broadinstitute/gatk/commit/13bf40a2c6e2de7685654e56935f0b204ea24ec6", "committedDate": "2020-10-19T17:59:44Z", "message": "empty string -> null"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0643ae961b9546b7362bc0245f3e3d9c0adda87c", "author": {"user": {"login": "ericsong", "name": "Eric Song"}}, "url": "https://github.com/broadinstitute/gatk/commit/0643ae961b9546b7362bc0245f3e3d9c0adda87c", "committedDate": "2020-10-19T18:39:34Z", "message": "make read-project-id optional"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzODE0Mjg0", "url": "https://github.com/broadinstitute/gatk/pull/6872#pullrequestreview-513814284", "createdAt": "2020-10-21T15:26:31Z", "commit": {"oid": "0643ae961b9546b7362bc0245f3e3d9c0adda87c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2506, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}