{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5Mzc3Mzgw", "number": 6429, "title": "improved checking for upstream deletions in GenotypingEngine", "bodyText": "It no longer modifies state.  Closes #2537\nUpstream deletions are only recorded once they definitely will be emitted.  Closes #6031\n\n@ldgauthier Here's a GenotypeGVCFs bug fix for you.\n@tfenne Your suspicion was correct.", "createdAt": "2020-01-31T02:13:54Z", "url": "https://github.com/broadinstitute/gatk/pull/6429", "merged": true, "mergeCommit": {"oid": "ca19a404cd218726ee08159005b1a03fd073d997"}, "closed": true, "closedAt": "2020-02-25T19:50:56Z", "author": {"login": "davidbenjamin"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb_f19OgH2gAyMzY5Mzc3MzgwOjhiMDBiNTliMzkyY2FjYzQwMGE1YjNmZmEzMzZmOGE2NWQwNWM3MGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcH2tIJgH2gAyMzY5Mzc3MzgwOjdjYTJmM2YwM2RmZGQwZDBiM2ZmNDM5MjBhNzBlZTBmMGQ4YWQzZWU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8b00b59b392cacc400a5b3ffa336f8a65d05c70d", "author": {"user": {"login": "davidbenjamin", "name": "David Benjamin"}}, "url": "https://github.com/broadinstitute/gatk/commit/8b00b59b392cacc400a5b3ffa336f8a65d05c70d", "committedDate": "2020-01-30T19:38:09Z", "message": "made isCoveredByDeletion non-state-modifying"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e4ac95405b2ceb2a9c8d8ca429a8fe4d859ef57", "author": {"user": {"login": "davidbenjamin", "name": "David Benjamin"}}, "url": "https://github.com/broadinstitute/gatk/commit/4e4ac95405b2ceb2a9c8d8ca429a8fe4d859ef57", "committedDate": "2020-01-30T21:54:14Z", "message": "record deletion after all places an allele could be dropped have passed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0MzQwNTIy", "url": "https://github.com/broadinstitute/gatk/pull/6429#pullrequestreview-364340522", "createdAt": "2020-02-25T18:19:40Z", "commit": {"oid": "4e4ac95405b2ceb2a9c8d8ca429a8fe4d859ef57"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxODoxOTo0MVrOFuP6VQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxODoyMDozMFrOFuP8Lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDAzOTUwOQ==", "bodyText": "Can you note that this is the size for the normalized representation?  Otherwise it's not obvious why we need this information in addition to the VC.", "url": "https://github.com/broadinstitute/gatk/pull/6429#discussion_r384039509", "createdAt": "2020-02-25T18:19:41Z", "author": {"login": "ldgauthier"}, "path": "src/main/java/org/broadinstitute/hellbender/tools/walkers/genotyper/GenotypingEngine.java", "diffHunk": "@@ -264,13 +270,17 @@ void clearUpstreamDeletionsLoc() {\n     }\n \n     /**\n-     *  Record deletion to keep\n-     *  Add deletions to a list.\n+     *  Record emitted deletion in order to remove downstream spanning deletion alleles that are not covered by any emitted deletion.\n+     *  In addition to recording a new deletion, this method culls previously-recorded deletions that end before the current variant\n+     *  context.  This assumes that variants are traversed in order.\n      *\n      * @param deletionSize  size of deletion in bases", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e4ac95405b2ceb2a9c8d8ca429a8fe4d859ef57"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDAzOTk4Mg==", "bodyText": "I would put \"variant context, potentially multi-allelic\", again, to clarify why we need two parameters.", "url": "https://github.com/broadinstitute/gatk/pull/6429#discussion_r384039982", "createdAt": "2020-02-25T18:20:30Z", "author": {"login": "ldgauthier"}, "path": "src/main/java/org/broadinstitute/hellbender/tools/walkers/genotyper/GenotypingEngine.java", "diffHunk": "@@ -264,13 +270,17 @@ void clearUpstreamDeletionsLoc() {\n     }\n \n     /**\n-     *  Record deletion to keep\n-     *  Add deletions to a list.\n+     *  Record emitted deletion in order to remove downstream spanning deletion alleles that are not covered by any emitted deletion.\n+     *  In addition to recording a new deletion, this method culls previously-recorded deletions that end before the current variant\n+     *  context.  This assumes that variants are traversed in order.\n      *\n      * @param deletionSize  size of deletion in bases\n      * @param vc            variant context", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e4ac95405b2ceb2a9c8d8ca429a8fe4d859ef57"}, "originalPosition": 49}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ca2f3f03dfdd0d0b3ff43920a70ee0f0d8ad3ee", "author": {"user": {"login": "davidbenjamin", "name": "David Benjamin"}}, "url": "https://github.com/broadinstitute/gatk/commit/7ca2f3f03dfdd0d0b3ff43920a70ee0f0d8ad3ee", "committedDate": "2020-02-25T18:47:43Z", "message": "review"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2741, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}