{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0MDE3Mjk5", "number": 6527, "title": "more control over scattering genomics DB in M2 pon wdl", "bodyText": "@fleharty This should resolve Sachet's issue by allowing arbitrarily much scattering, reducing the memory required by GenomicsDBImport.", "createdAt": "2020-03-26T08:09:37Z", "url": "https://github.com/broadinstitute/gatk/pull/6527", "merged": true, "mergeCommit": {"oid": "58de4f81e9493b7e8d6ff7a6c932d126bd2d5e8d"}, "closed": true, "closedAt": "2020-04-08T15:36:11Z", "author": {"login": "davidbenjamin"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRUU1PgH2gAyMzk0MDE3Mjk5OmY5MTEzMjFkMDUzMjdhMmQ3OGJjMGMzMjNlYmU5YmY0YjY4MzhlZGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVmjy9gFqTM4OTkwMjE0Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f911321d05327a2d78bc0c323ebe9bf4b6838edf", "author": {"user": {"login": "davidbenjamin", "name": "David Benjamin"}}, "url": "https://github.com/broadinstitute/gatk/commit/f911321d05327a2d78bc0c323ebe9bf4b6838edf", "committedDate": "2020-03-26T04:23:39Z", "message": "SplitIntervals dont-mix-contigs option"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c5978e8051ab7cc0068a2861f22b791b945ce47", "author": {"user": {"login": "davidbenjamin", "name": "David Benjamin"}}, "url": "https://github.com/broadinstitute/gatk/commit/2c5978e8051ab7cc0068a2861f22b791b945ce47", "committedDate": "2020-03-26T04:37:25Z", "message": "boy scout rule"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4fde8b11c62577814f9ecc525819f53d051ef7c", "author": {"user": {"login": "davidbenjamin", "name": "David Benjamin"}}, "url": "https://github.com/broadinstitute/gatk/commit/b4fde8b11c62577814f9ecc525819f53d051ef7c", "committedDate": "2020-03-26T04:42:42Z", "message": "ability to scatter genomics DB in M2 pon WDL"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5MTc1NjAx", "url": "https://github.com/broadinstitute/gatk/pull/6527#pullrequestreview-389175601", "createdAt": "2020-04-07T14:30:51Z", "commit": {"oid": "b4fde8b11c62577814f9ecc525819f53d051ef7c"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxNDozMDo1MVrOGCGaLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxNDo0MjoxMlrOGCG74g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDg1NTM0Mg==", "bodyText": "consider using ctrl + alt + L here, to fix the spacing here", "url": "https://github.com/broadinstitute/gatk/pull/6527#discussion_r404855342", "createdAt": "2020-04-07T14:30:51Z", "author": {"login": "fleharty"}, "path": "src/main/java/org/broadinstitute/hellbender/tools/walkers/SplitIntervals.java", "diffHunk": "@@ -128,8 +134,21 @@ public void onTraversalStart() {\n         final IntervalListScatterer scatterer = subdivisionMode.make();\n         final List<IntervalList> scattered = scatterer.scatter(intervalList, scatterCount);\n \n+        // optionally split interval lists that contain intervals from multiple contigs\n+        final List<IntervalList> scatteredFinal = !dontMixContigs ? scattered :\n+                scattered.stream().flatMap(il -> il.getIntervals().stream()\n+                        .collect(Collectors.groupingBy(Interval::getContig)).entrySet().stream()    // group each interval list into sublists", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4fde8b11c62577814f9ecc525819f53d051ef7c"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDg2Mzk3MA==", "bodyText": "I believe this causes line 19 and 20 to no longer be needed.\nimport java.nio.file.Path;\nimport java.nio.file.Paths;", "url": "https://github.com/broadinstitute/gatk/pull/6527#discussion_r404863970", "createdAt": "2020-04-07T14:42:12Z", "author": {"login": "fleharty"}, "path": "src/test/java/org/broadinstitute/hellbender/tools/walkers/SplitIntervalsIntegrationTest.java", "diffHunk": "@@ -84,33 +86,49 @@ public void testSingleScatter() {\n     public void testTwoIntervals() {\n         final int scatterCount = 5;\n         final File outputDir = createTempDir(\"output\");\n-        final String[] args = {\n-                \"-L\", \"20:1000000-2000000\",\n-                \"-L\", \"20:3000000-4000000\",\n-                \"-R\", REFERENCE.toAbsolutePath().toString(),\n-                \"-\" + SplitIntervals.SCATTER_COUNT_SHORT_NAME, Integer.toString(scatterCount),\n-                \"-O\", outputDir.getAbsolutePath()\n-        };\n+        final ArgumentsBuilder args = new ArgumentsBuilder()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4fde8b11c62577814f9ecc525819f53d051ef7c"}, "originalPosition": 98}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ccbc8d090b1dce44f35236b8d5d6660e54e0bac", "author": {"user": {"login": "davidbenjamin", "name": "David Benjamin"}}, "url": "https://github.com/broadinstitute/gatk/commit/0ccbc8d090b1dce44f35236b8d5d6660e54e0bac", "committedDate": "2020-04-08T01:57:05Z", "message": "review edits"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5OTAyMTQ2", "url": "https://github.com/broadinstitute/gatk/pull/6527#pullrequestreview-389902146", "createdAt": "2020-04-08T11:53:59Z", "commit": {"oid": "0ccbc8d090b1dce44f35236b8d5d6660e54e0bac"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2839, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}