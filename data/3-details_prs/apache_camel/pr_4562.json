{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE1MjQ2MTQ0", "number": 4562, "title": "[CAMEL-15725] setting up basic OSGi-CDI metadata in the manifest", "bodyText": "Make sure there is a JIRA issue filed for the change (usually before you start working on it).  Trivial changes like typos do not require a JIRA issue.  Your pull request should address just this issue, without pulling in other changes.\n Each commit in the pull request should have a meaningful subject line and body.\n If you're unsure, you can format the pull request title like [CAMEL-XXX] Fixes bug in camel-file component, where you replace CAMEL-XXX with the appropriate JIRA issue.\n Write a pull request description that is detailed enough to understand what the pull request does, how, and why.\n Run mvn clean install -Psourcecheck in your module with source check enabled to make sure basic checks pass and there are no checkstyle violations. A more thorough check will be performed on your pull request automatically.\nBelow are the contribution guidelines:\nhttps://github.com/apache/camel/blob/master/CONTRIBUTING.md", "createdAt": "2020-11-04T09:17:00Z", "url": "https://github.com/apache/camel/pull/4562", "merged": true, "mergeCommit": {"oid": "32dbbdbca780d2ae5da0450cb989a9a7607f89a2"}, "closed": true, "closedAt": "2020-11-13T05:24:20Z", "author": {"login": "rmannibucau"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZKLPMAH2gAyNTE1MjQ2MTQ0OmJmODFjOWZmYjg3YzMwNmJkNjBmODZmZWFhNDY5MGZhYmIwZjc3ZGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdcAPrDAFqTUyOTc0NTM2MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bf81c9ffb87c306bd60f86feaa4690fabb0f77dc", "author": {"user": {"login": "rmannibucau", "name": "Romain Manni-Bucau"}}, "url": "https://github.com/apache/camel/commit/bf81c9ffb87c306bd60f86feaa4690fabb0f77dc", "committedDate": "2020-11-04T09:16:40Z", "message": "setting up basic OSGi-CDI metadata in the manifest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzMTcxODQz", "url": "https://github.com/apache/camel/pull/4562#pullrequestreview-523171843", "createdAt": "2020-11-04T09:18:51Z", "commit": {"oid": "bf81c9ffb87c306bd60f86feaa4690fabb0f77dc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzMTgxNjU5", "url": "https://github.com/apache/camel/pull/4562#pullrequestreview-523181659", "createdAt": "2020-11-04T09:30:38Z", "commit": {"oid": "bf81c9ffb87c306bd60f86feaa4690fabb0f77dc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQwOTozMDozOVrOHtPz4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQwOTozMDozOVrOHtPz4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzIwNzAwOQ==", "bodyText": "IIRC, we did not used the @Vetoed annotation to maintain compatibility with CDI 1.0.\nIt works because the default profile weld-3.0 uses CDI 2.0, but other profiles may fail.\nThat being said, we may want to consider dropping CDI 1.0 support.", "url": "https://github.com/apache/camel/pull/4562#discussion_r517207009", "createdAt": "2020-11-04T09:30:39Z", "author": {"login": "astefanutti"}, "path": "components/camel-cdi/src/main/java/org/apache/camel/cdi/AnnotatedDelegate.java", "diffHunk": "@@ -21,11 +21,13 @@\n import java.util.HashSet;\n import java.util.Set;\n \n+import javax.enterprise.inject.Vetoed;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bf81c9ffb87c306bd60f86feaa4690fabb0f77dc"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3MzA2MDgx", "url": "https://github.com/apache/camel/pull/4562#pullrequestreview-527306081", "createdAt": "2020-11-10T15:14:50Z", "commit": {"oid": "bf81c9ffb87c306bd60f86feaa4690fabb0f77dc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3ODg1MTQ2", "url": "https://github.com/apache/camel/pull/4562#pullrequestreview-527885146", "createdAt": "2020-11-11T06:07:17Z", "commit": {"oid": "bf81c9ffb87c306bd60f86feaa4690fabb0f77dc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwNjowNzoxN1rOHw_ZdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwNjowNzoxN1rOHw_ZdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTEzMjQwNA==", "bodyText": "Is this correct, it seems to be cdi 1.x only? We are CDI 2.0 onwards only for Camel 3.x.", "url": "https://github.com/apache/camel/pull/4562#discussion_r521132404", "createdAt": "2020-11-11T06:07:17Z", "author": {"login": "davsclaus"}, "path": "components/camel-cdi/pom.xml", "diffHunk": "@@ -37,10 +37,37 @@\n         <label>java</label>\n         <title>CDI</title>\n \n+        <camel.osgi.provide.capability>\n+            osgi.cdi.extension;osgi.cdi.extension=\"org.apache.camel.cdi\";\n+                version:Version=\"${camel.osgi.version}\";\n+                aries.cdi.extension.bean.classes:List&lt;String&gt;=\"org.apache.camel.cdi.CdiCamelFactory,org.apache.camel.cdi.CdiEventComponent\";\n+                    uses:=\"javax.annotation,javax.enterprise.event,javax.enterprise.inject.spi\",\n+            osgi.service;objectClass:List&lt;String&gt;=\"javax.enterprise.inject.spi.Extension\",\n+                osgi.service;objectClass:List&lt;String&gt;=\"javax.enterprise.inject.spi.Extension\";\n+                    uses:=\"javax.enterprise.inject.spi\";\n+                    osgi.cdi.extension=\"org.apache.camel.cdi\";\n+                service.scope=prototype;service.vendor=\"Apache Software Foundation\";\n+                version:Version=\"${camel.osgi.version}\";\n+                effective:=active,\n+            osgi.serviceloader;osgi.serviceloader=\"javax.enterprise.inject.spi.Extension\";\n+                register:=\"org.apache.camel.cdi.CdiCamelExtension\";\n+                    uses:=\"javax.enterprise.inject.spi\";\n+                    osgi.cdi.extension=\"org.apache.camel.cdi\";\n+                    service.scope=prototype;\n+                    service.vendor=\"Apache Software Foundation\";\n+                version:Version=\"${camel.osgi.version}\"\n+        </camel.osgi.provide.capability>\n+        <camel.osgi.require.capability>\n+            osgi.extender;filter:=\"(&amp;(osgi.extender=osgi.cdi)(version>=1.0.0)(!(version>=2.0.0)))\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bf81c9ffb87c306bd60f86feaa4690fabb0f77dc"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5NzQ1MzYx", "url": "https://github.com/apache/camel/pull/4562#pullrequestreview-529745361", "createdAt": "2020-11-13T05:24:15Z", "commit": {"oid": "bf81c9ffb87c306bd60f86feaa4690fabb0f77dc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2824, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}