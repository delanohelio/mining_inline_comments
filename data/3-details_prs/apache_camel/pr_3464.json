{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5ODkxOTEx", "number": 3464, "title": "bean component now supports scope option", "bodyText": "https://issues.apache.org/jira/projects/CAMEL/issues/CAMEL-14359", "createdAt": "2020-01-07T09:05:42Z", "url": "https://github.com/apache/camel/pull/3464", "merged": true, "mergeCommit": {"oid": "6d57ea237c3d5b09d1098d5982d5c6ef0f051ad0"}, "closed": true, "closedAt": "2020-01-07T12:43:30Z", "author": {"login": "davsclaus"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb3xBDqAH2gAyMzU5ODkxOTExOjMzZTdmZGU2YzlmOGZhN2VkMDEzMjY0N2NiNjA1MGU5MGI0M2E1MmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb4AGpggH2gAyMzU5ODkxOTExOmU5MzFiYWMyN2QxYzY1N2MxMTNkYTExM2QzNTJlNzRhNGEwM2MyNjg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "33e7fde6c9f8fa7ed0132647cb6050e90b43a52d", "author": {"user": {"login": "davsclaus", "name": "Claus Ibsen"}}, "url": "https://github.com/apache/camel/commit/33e7fde6c9f8fa7ed0132647cb6050e90b43a52d", "committedDate": "2020-01-06T19:07:16Z", "message": "Polished"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "000fbb01af6676b6f21cc5187cdf296f5ea09965", "author": {"user": {"login": "davsclaus", "name": "Claus Ibsen"}}, "url": "https://github.com/apache/camel/commit/000fbb01af6676b6f21cc5187cdf296f5ea09965", "committedDate": "2020-01-06T19:07:16Z", "message": "CAMEL-14359: camel-bean is now singleton scoped by default (cache=true)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc61558af28a1d41c98f3f8068c50af50cb31d7d", "author": {"user": {"login": "davsclaus", "name": "Claus Ibsen"}}, "url": "https://github.com/apache/camel/commit/bc61558af28a1d41c98f3f8068c50af50cb31d7d", "committedDate": "2020-01-06T19:07:16Z", "message": "CAMEL-14359: camel-bean is now singleton scoped by default (cache=true)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e06e5fc4be0129c93b077aa08994375907c2ca3", "author": {"user": {"login": "davsclaus", "name": "Claus Ibsen"}}, "url": "https://github.com/apache/camel/commit/7e06e5fc4be0129c93b077aa08994375907c2ca3", "committedDate": "2020-01-06T19:21:08Z", "message": "CAMEL-14359: camel-bean is now singleton scoped by default (cache=true)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2745841d1ecf27e06766adf8716325a33e314138", "author": {"user": {"login": "davsclaus", "name": "Claus Ibsen"}}, "url": "https://github.com/apache/camel/commit/2745841d1ecf27e06766adf8716325a33e314138", "committedDate": "2020-01-06T19:41:11Z", "message": "CAMEL-14359: camel-bean - Adding bean scope option."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e1bfe28dca3c33be93407d66c4ee4df3aba5796", "author": {"user": {"login": "davsclaus", "name": "Claus Ibsen"}}, "url": "https://github.com/apache/camel/commit/5e1bfe28dca3c33be93407d66c4ee4df3aba5796", "committedDate": "2020-01-07T06:17:47Z", "message": "CAMEL-14359: camel-bean - Adding bean scope option."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22f40215456fa6c53da2ed461212db22e032ee94", "author": {"user": {"login": "davsclaus", "name": "Claus Ibsen"}}, "url": "https://github.com/apache/camel/commit/22f40215456fa6c53da2ed461212db22e032ee94", "committedDate": "2020-01-07T07:35:29Z", "message": "CAMEL-14359: camel-bean - Adding bean scope option."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "123f92f9e7c5c36c63d08aa465358b59a41df2fd", "author": {"user": {"login": "davsclaus", "name": "Claus Ibsen"}}, "url": "https://github.com/apache/camel/commit/123f92f9e7c5c36c63d08aa465358b59a41df2fd", "committedDate": "2020-01-07T08:58:52Z", "message": "CAMEL-14359: camel-bean - Adding bean scope option."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b016deca9004e899261ea370b12644882996694f", "author": {"user": {"login": "davsclaus", "name": "Claus Ibsen"}}, "url": "https://github.com/apache/camel/commit/b016deca9004e899261ea370b12644882996694f", "committedDate": "2020-01-07T09:03:01Z", "message": "CAMEL-14359: camel-bean - Adding bean scope option."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5MTE4NDI3", "url": "https://github.com/apache/camel/pull/3464#pullrequestreview-339118427", "createdAt": "2020-01-07T09:27:24Z", "commit": {"oid": "b016deca9004e899261ea370b12644882996694f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5MTMxMjM2", "url": "https://github.com/apache/camel/pull/3464#pullrequestreview-339131236", "createdAt": "2020-01-07T09:50:42Z", "commit": {"oid": "b016deca9004e899261ea370b12644882996694f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwOTo1MDo0M1rOFa0jbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wN1QwOTo1MDo0M1rOFa0jbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzY2ODMzMw==", "bodyText": "Maybe The bean does not have to be thread-safe would be clearer (as it is o.k. for the bean to be thread-safe)? What do you think?", "url": "https://github.com/apache/camel/pull/3464#discussion_r363668333", "createdAt": "2020-01-07T09:50:43Z", "author": {"login": "PascalSchumacher"}, "path": "components/camel-bean/src/main/java/org/apache/camel/component/bean/BeanComponent.java", "diffHunk": "@@ -36,9 +37,19 @@\n     @SuppressWarnings(\"unchecked\")\n     private final Map<BeanInfoCacheKey, BeanInfo> beanInfoCache = LRUCacheFactory.newLRUSoftCache(1000);\n \n-    @Metadata(label = \"advanced\", description = \"If enabled, Camel will cache the result of the first Registry look-up.\"\n-        + \" Cache can be enabled if the bean in the Registry is defined as a singleton scope.\")\n+    @Deprecated\n+    @Metadata(defaultValue = \"true\", description = \"Use singleton option instead.\")\n     private Boolean cache;\n+    @Metadata(defaultValue = \"Singleton\", description = \"Scope of bean.\"\n+            + \" When using singleton scope (default) the bean is created or looked up only once and reused for the lifetime of the endpoint.\"\n+            + \" The bean should be thread-safe in case concurrent threads is calling the bean at the same time.\"\n+            + \" When using request scope the bean is created or looked up once per request (exchange). This can be used if you want to store state on a bean\"\n+            + \" while processing a request and you want to call the same bean instance multiple times while processing the request.\"\n+            + \" The bean should not be thread-safe as the instance is only called from the same request.  \"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b016deca9004e899261ea370b12644882996694f"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e931bac27d1c657c113da113d352e74a4a03c268", "author": {"user": {"login": "davsclaus", "name": "Claus Ibsen"}}, "url": "https://github.com/apache/camel/commit/e931bac27d1c657c113da113d352e74a4a03c268", "committedDate": "2020-01-07T12:41:57Z", "message": "CAMEL-14359: camel-bean - Update docs, thanks to Pascal for the feedback"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2721, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}