{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg5NzY4NjQ1", "number": 3643, "title": "CAMEL-13844: RestConfiguration - Make it simpler and only have one", "bodyText": "", "createdAt": "2020-03-17T11:04:53Z", "url": "https://github.com/apache/camel/pull/3643", "merged": true, "mergeCommit": {"oid": "702a6b21e1bc490865097cb3b86f95da74c441e2"}, "closed": true, "closedAt": "2020-03-18T12:30:25Z", "author": {"login": "lburgazzoli"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcOg1VDAFqTM3NTk0MDg5MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcO2HvYgFqTM3Njc5OTM4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1OTQwODkw", "url": "https://github.com/apache/camel/pull/3643#pullrequestreview-375940890", "createdAt": "2020-03-17T11:16:14Z", "commit": {"oid": "6d65984d1ce1192cf1cb5c1a9669a6883b36ddbf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1OTY1NDE1", "url": "https://github.com/apache/camel/pull/3643#pullrequestreview-375965415", "createdAt": "2020-03-17T11:55:01Z", "commit": {"oid": "6d65984d1ce1192cf1cb5c1a9669a6883b36ddbf"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxMTo1NTowMVrOF3Y9Sw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxMTo1NzowMlrOF3ZBdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzYyNDkwNw==", "bodyText": "Why do you have this dependency, we should never depend on this", "url": "https://github.com/apache/camel/pull/3643#discussion_r393624907", "createdAt": "2020-03-17T11:55:01Z", "author": {"login": "davsclaus"}, "path": "components/camel-rest/pom.xml", "diffHunk": "@@ -38,6 +38,10 @@\n             <groupId>org.apache.camel</groupId>\n             <artifactId>camel-support</artifactId>\n         </dependency>\n+        <dependency>\n+            <groupId>org.apache.camel</groupId>\n+            <artifactId>camel-base</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d65984d1ce1192cf1cb5c1a9669a6883b36ddbf"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzYyNTk3NQ==", "bodyText": "I know default interface methods are nice, but can we move this to AbstractCamelContext so we dont end up cluttering this interface with code.", "url": "https://github.com/apache/camel/pull/3643#discussion_r393625975", "createdAt": "2020-03-17T11:57:02Z", "author": {"login": "davsclaus"}, "path": "core/camel-api/src/main/java/org/apache/camel/CamelContext.java", "diffHunk": "@@ -412,6 +412,19 @@\n      */\n     Endpoint getEndpoint(String uri);\n \n+    /**\n+     * Resolves the given uri to an {@link Endpoint} of the specified type.\n+     *\n+     * @param fmt the string format\n+     * @param args the arguments referenced by the format\n+     * @return the endpoint\n+     *\n+     * @see #getEndpoint(String)\n+     */\n+    default Endpoint getEndpointF(String fmt, Object... args) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d65984d1ce1192cf1cb5c1a9669a6883b36ddbf"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6d65984d1ce1192cf1cb5c1a9669a6883b36ddbf", "author": {"user": {"login": "lburgazzoli", "name": "Luca Burgazzoli"}}, "url": "https://github.com/apache/camel/commit/6d65984d1ce1192cf1cb5c1a9669a6883b36ddbf", "committedDate": "2020-03-17T10:55:04Z", "message": "RestConfiguration - Make it simpler and only have one"}, "afterCommit": {"oid": "ddbeda06e37696305dafe73f60b439aea7a70773", "author": {"user": {"login": "lburgazzoli", "name": "Luca Burgazzoli"}}, "url": "https://github.com/apache/camel/commit/ddbeda06e37696305dafe73f60b439aea7a70773", "committedDate": "2020-03-17T13:33:46Z", "message": "CAMEL-13844 RestConfiguration - Make it simpler and only have one"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ddbeda06e37696305dafe73f60b439aea7a70773", "author": {"user": {"login": "lburgazzoli", "name": "Luca Burgazzoli"}}, "url": "https://github.com/apache/camel/commit/ddbeda06e37696305dafe73f60b439aea7a70773", "committedDate": "2020-03-17T13:33:46Z", "message": "CAMEL-13844 RestConfiguration - Make it simpler and only have one"}, "afterCommit": {"oid": "ceac05b5d5fba33b23cc8a21179e0eb917e200a3", "author": {"user": {"login": "lburgazzoli", "name": "Luca Burgazzoli"}}, "url": "https://github.com/apache/camel/commit/ceac05b5d5fba33b23cc8a21179e0eb917e200a3", "committedDate": "2020-03-17T18:16:27Z", "message": "CAMEL-13844 RestConfiguration - Make it simpler and only have one"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2NTgzNzk0", "url": "https://github.com/apache/camel/pull/3643#pullrequestreview-376583794", "createdAt": "2020-03-18T06:03:46Z", "commit": {"oid": "ceac05b5d5fba33b23cc8a21179e0eb917e200a3"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwNjowMzo0NlrOF33U9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwNjowMzo0NlrOF33U9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDEyMjQ4Nw==", "bodyText": "Instead of the Suppler then just use a String parameter. It doesnt make sense to use a function here IMHO.", "url": "https://github.com/apache/camel/pull/3643#discussion_r394122487", "createdAt": "2020-03-18T06:03:46Z", "author": {"login": "davsclaus"}, "path": "core/camel-support/src/main/java/org/apache/camel/support/CamelContextHelper.java", "diffHunk": "@@ -587,4 +590,53 @@ public static String getRouteId(NamedNode node) {\n         return parent != null ? parent.getId() : null;\n     }\n \n+    /**\n+     * Gets the {@link RestConfiguration} from the {@link CamelContext} and check if the component which consumes the\n+     * configuration is compatible with the one for which the rest configuration is set-up.\n+     *\n+     * @param camelContext the camel context\n+     * @param component the component that will consume the {@link RestConfiguration}\n+     * @return the {@link RestConfiguration}\n+     * @throws IllegalArgumentException is the component is not compatible with the {@link RestConfiguration} set-up\n+     */\n+    public static RestConfiguration getRestConfiguration(CamelContext camelContext, String component) {\n+        RestConfiguration configuration = camelContext.getRestConfiguration();\n+\n+        validateRestConfigurationComponent(component, () -> configuration.getComponent());\n+\n+        return configuration;\n+    }\n+\n+    /**\n+     * Gets the {@link RestConfiguration} from the {@link CamelContext} and check if the component which consumes the\n+     * configuration is compatible with the one for which the rest configuration is set-up.\n+     *\n+     * @param camelContext the camel context\n+     * @param component the component that will consume the {@link RestConfiguration}\n+     * @param producerComponent the producer component that will consume the {@link RestConfiguration}\n+     * @return the {@link RestConfiguration}\n+     * @throws IllegalArgumentException is the component is not compatible with the {@link RestConfiguration} set-up\n+     */\n+    public static RestConfiguration getRestConfiguration(CamelContext camelContext, String component, String producerComponent) {\n+        RestConfiguration configuration = camelContext.getRestConfiguration();\n+\n+        validateRestConfigurationComponent(component, () -> configuration.getComponent());\n+        validateRestConfigurationComponent(producerComponent, () -> configuration.getProducerComponent());\n+\n+        return configuration;\n+    }\n+\n+    private static void validateRestConfigurationComponent(String component, Supplier<String> configurationComponentFn) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ceac05b5d5fba33b23cc8a21179e0eb917e200a3"}, "originalPosition": 59}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ceac05b5d5fba33b23cc8a21179e0eb917e200a3", "author": {"user": {"login": "lburgazzoli", "name": "Luca Burgazzoli"}}, "url": "https://github.com/apache/camel/commit/ceac05b5d5fba33b23cc8a21179e0eb917e200a3", "committedDate": "2020-03-17T18:16:27Z", "message": "CAMEL-13844 RestConfiguration - Make it simpler and only have one"}, "afterCommit": {"oid": "d1779fd8d2e523c83a3cf8f742984c46b6f5dc93", "author": {"user": {"login": "lburgazzoli", "name": "Luca Burgazzoli"}}, "url": "https://github.com/apache/camel/commit/d1779fd8d2e523c83a3cf8f742984c46b6f5dc93", "committedDate": "2020-03-18T07:52:23Z", "message": "CAMEL-13844 RestConfiguration - Make it simpler and only have one"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0575b993623abe92584270d608022ce7efade37a", "author": {"user": {"login": "lburgazzoli", "name": "Luca Burgazzoli"}}, "url": "https://github.com/apache/camel/commit/0575b993623abe92584270d608022ce7efade37a", "committedDate": "2020-03-18T10:51:07Z", "message": "CAMEL-13844 RestConfiguration - Make it simpler and only have one"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "719bc1ae1a0c5d9687ab18b6ead07a181bc74c9d", "author": {"user": {"login": "lburgazzoli", "name": "Luca Burgazzoli"}}, "url": "https://github.com/apache/camel/commit/719bc1ae1a0c5d9687ab18b6ead07a181bc74c9d", "committedDate": "2020-03-18T10:51:08Z", "message": "Add slf4j implementation to avoid warning when running tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe7c2a9b21e8bc83a1465a7a0adcd5236066603e", "author": {"user": {"login": "lburgazzoli", "name": "Luca Burgazzoli"}}, "url": "https://github.com/apache/camel/commit/fe7c2a9b21e8bc83a1465a7a0adcd5236066603e", "committedDate": "2020-03-18T10:58:40Z", "message": "Fix usage of deprecated mockito method"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d1779fd8d2e523c83a3cf8f742984c46b6f5dc93", "author": {"user": {"login": "lburgazzoli", "name": "Luca Burgazzoli"}}, "url": "https://github.com/apache/camel/commit/d1779fd8d2e523c83a3cf8f742984c46b6f5dc93", "committedDate": "2020-03-18T07:52:23Z", "message": "CAMEL-13844 RestConfiguration - Make it simpler and only have one"}, "afterCommit": {"oid": "fe7c2a9b21e8bc83a1465a7a0adcd5236066603e", "author": {"user": {"login": "lburgazzoli", "name": "Luca Burgazzoli"}}, "url": "https://github.com/apache/camel/commit/fe7c2a9b21e8bc83a1465a7a0adcd5236066603e", "committedDate": "2020-03-18T10:58:40Z", "message": "Fix usage of deprecated mockito method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2Nzk5Mzg1", "url": "https://github.com/apache/camel/pull/3643#pullrequestreview-376799385", "createdAt": "2020-03-18T12:04:21Z", "commit": {"oid": "fe7c2a9b21e8bc83a1465a7a0adcd5236066603e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3089, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}