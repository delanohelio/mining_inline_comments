{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM0ODcwNDQ4", "number": 3917, "title": "[CAMEL-15170] initial commit (add message queue support to JT400 component)", "bodyText": "Make sure there is a JIRA issue filed for the change (usually before you start working on it).  Trivial changes like typos do not require a JIRA issue.  Your pull request should address just this issue, without pulling in other changes.\n Each commit in the pull request should have a meaningful subject line and body.\n If you're unsure, you can format the pull request title like [CAMEL-XXX] Fixes bug in camel-file component, where you replace CAMEL-XXX with the appropriate JIRA issue.\n Write a pull request description that is detailed enough to understand what the pull request does, how, and why.\n Run mvn clean install -Psourcecheck in your module with source check enabled to make sure basic checks pass and there are no checkstyle violations. A more thorough check will be performed on your pull request automatically.\n\nComments\nThis is a work in progress, but opening a Draft PR to welcome comments. This pass has somewhat basic support, sufficient for my current needs. I propose we land this functionality (when no longer WIP) and queue up individual features for future goals (for which I will gladly itemize as issues in Jira)\nCurrently, the behavior is as follows (this is also included in the doc):\nWhen configured as a message queue consumer endpoint, the endpoint will poll\na message queue on a remote system. For every entry on the queue, a new\nExchange is sent with the entry's data in the In message's body. The\ndata is always formatted as a String. Note that only new messages will\nbe processed. That is, any existing messages on the queue that have already\nbeen handled by another program will not be processed by this endpoint.\nFor a message queue provider endpoint, the In message body contents are\npresumed to be text and sent to the queue as an informational message.\nInquiry messages or messages requiring a message ID are not supported.", "createdAt": "2020-06-15T23:12:59Z", "url": "https://github.com/apache/camel/pull/3917", "merged": true, "mergeCommit": {"oid": "d34f104504a78a95d0c82f9b33db8df5faf504fa"}, "closed": true, "closedAt": "2020-06-19T07:47:19Z", "author": {"login": "ThePrez"}, "timelineItems": {"totalCount": 24, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcrobWTAH2gAyNDM0ODcwNDQ4OmVmYzU1OGFmNzllZjFjNTY1MWNmMzMyY2EwZjI0ZjA2NWJjM2QzNTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcsuLoKgFqTQzMzg3MTUzMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "efc558af79ef1c5651cf332ca0f24f065bc3d352", "author": {"user": null}, "url": "https://github.com/apache/camel/commit/efc558af79ef1c5651cf332ca0f24f065bc3d352", "committedDate": "2020-06-15T22:30:54Z", "message": "CAMEL-15170: initial commit (add message queue support)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxNDczMzg5", "url": "https://github.com/apache/camel/pull/3917#pullrequestreview-431473389", "createdAt": "2020-06-16T12:57:00Z", "commit": {"oid": "efc558af79ef1c5651cf332ca0f24f065bc3d352"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "afdc912472bfd986c73500064c441c84637a2e54", "author": {"user": null}, "url": "https://github.com/apache/camel/commit/afdc912472bfd986c73500064c441c84637a2e54", "committedDate": "2020-06-16T14:50:14Z", "message": "style changes for -Psourcecheck compliance"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1fd7259e907f8544524f3aec50f2062e75fc3de8", "author": {"user": null}, "url": "https://github.com/apache/camel/commit/1fd7259e907f8544524f3aec50f2062e75fc3de8", "committedDate": "2020-06-16T14:56:20Z", "message": "remove deprecated receive functions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1ce8b7b83e74a6e9f7529bd216960999cd7e0a5", "author": {"user": null}, "url": "https://github.com/apache/camel/commit/f1ce8b7b83e74a6e9f7529bd216960999cd7e0a5", "committedDate": "2020-06-16T16:38:16Z", "message": "Set headers for message file and id"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6be20856b7dc755b939a164a084812f904ddff01", "author": {"user": null}, "url": "https://github.com/apache/camel/commit/6be20856b7dc755b939a164a084812f904ddff01", "committedDate": "2020-06-16T16:39:29Z", "message": "fix order of 3-part job name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9b7d7e55e1bd31bf0aeaaaf476e0aca6bc84438", "author": {"user": null}, "url": "https://github.com/apache/camel/commit/f9b7d7e55e1bd31bf0aeaaaf476e0aca6bc84438", "committedDate": "2020-06-16T17:36:08Z", "message": "add support for different message actions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c0779fba558f5fdedd3c443d8014c439f96ef46", "author": {"user": null}, "url": "https://github.com/apache/camel/commit/4c0779fba558f5fdedd3c443d8014c439f96ef46", "committedDate": "2020-06-16T17:44:01Z", "message": "improve conciseness of header-setting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf9da187214cc4ece798390f3fa48013953f8ac2", "author": {"user": null}, "url": "https://github.com/apache/camel/commit/bf9da187214cc4ece798390f3fa48013953f8ac2", "committedDate": "2020-06-16T17:45:04Z", "message": "set header for message key"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b1dce0d2b262cfb5db66fec162d7d79c08654b1", "author": {"user": null}, "url": "https://github.com/apache/camel/commit/6b1dce0d2b262cfb5db66fec162d7d79c08654b1", "committedDate": "2020-06-16T18:11:27Z", "message": "bugfix: only use message key when action is SAME"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5623d8ff33d7c5375280fe0d6ccbd8ba282488d8", "author": {"user": null}, "url": "https://github.com/apache/camel/commit/5623d8ff33d7c5375280fe0d6ccbd8ba282488d8", "committedDate": "2020-06-16T18:20:05Z", "message": "add message type header"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70c23d3c0fe77d0b27bd97935b368a0f11d6f730", "author": {"user": null}, "url": "https://github.com/apache/camel/commit/70c23d3c0fe77d0b27bd97935b368a0f11d6f730", "committedDate": "2020-06-16T18:35:54Z", "message": "add documentation for jt400 msgq support"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e45b1c2819352eb5265f7703a5454679bbb5fe7a", "author": {"user": null}, "url": "https://github.com/apache/camel/commit/e45b1c2819352eb5265f7703a5454679bbb5fe7a", "committedDate": "2020-06-16T18:36:48Z", "message": "remove \"type\" query parameter as it is not needed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25bced277f39fa66dcf5f0eda2fbee1583c36f03", "author": {"user": null}, "url": "https://github.com/apache/camel/commit/25bced277f39fa66dcf5f0eda2fbee1583c36f03", "committedDate": "2020-06-16T18:50:51Z", "message": "add header info to doc, plus minor cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2b2f4117faf7e3b9b6d8821fb509f1101586b87", "author": {"user": null}, "url": "https://github.com/apache/camel/commit/a2b2f4117faf7e3b9b6d8821fb509f1101586b87", "committedDate": "2020-06-16T18:55:47Z", "message": "rename header constants (jt400 scope) and stop setting MESSAGE_KEY header"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf1a5631e9719f5b7f5660e01d8d716bfed7b51c", "author": {"user": null}, "url": "https://github.com/apache/camel/commit/cf1a5631e9719f5b7f5660e01d8d716bfed7b51c", "committedDate": "2020-06-16T20:03:40Z", "message": "cleanup comments/doc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cf8f8079deb7159becc10f55eb810f9a9f3ec5e", "author": {"user": null}, "url": "https://github.com/apache/camel/commit/8cf8f8079deb7159becc10f55eb810f9a9f3ec5e", "committedDate": "2020-06-16T20:04:37Z", "message": "updated doc for messageAction parameter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "456b524b9e2f786ec46be80fd09c366920dec7b8", "author": {"user": null}, "url": "https://github.com/apache/camel/commit/456b524b9e2f786ec46be80fd09c366920dec7b8", "committedDate": "2020-06-16T22:40:36Z", "message": "improve doc surrounding message queue processing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c658cba8abe8a72e626eec17fb76f58efba96ff7", "author": {"user": null}, "url": "https://github.com/apache/camel/commit/c658cba8abe8a72e626eec17fb76f58efba96ff7", "committedDate": "2020-06-16T22:48:15Z", "message": "cleanup misc javadoc errors"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyMTY0Mjk3", "url": "https://github.com/apache/camel/pull/3917#pullrequestreview-432164297", "createdAt": "2020-06-17T08:15:50Z", "commit": {"oid": "c658cba8abe8a72e626eec17fb76f58efba96ff7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QwODoxNTo1MVrOGk6zZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QwODoxNTo1MVrOGk6zZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTM2NTM1MA==", "bodyText": "These are the Camel headers isn't? I think it would make sense to have the headers with Camel prefix in order to standardize with other components as well, e.g: CamelJt400MessageID.\nAlso, it would make sense to place the constants into a singleton class to ease the usability for users.\nExample from recent component.", "url": "https://github.com/apache/camel/pull/3917#discussion_r441365350", "createdAt": "2020-06-17T08:15:51Z", "author": {"login": "omarsmak"}, "path": "components/camel-jt400/src/main/java/org/apache/camel/component/jt400/Jt400Endpoint.java", "diffHunk": "@@ -36,14 +36,20 @@\n import org.apache.camel.util.URISupport;\n \n /**\n- * Exchanges messages with an AS/400 system using data queues or program call.\n+ * Exchanges messages with an AS/400 system using data queues, message queues, or program call.\n  */\n @UriEndpoint(firstVersion = \"1.5.0\", scheme = \"jt400\", title = \"JT400\", syntax = \"jt400:userID:password/systemName/objectPath.type\", category = {Category.MESSAGING})\n public class Jt400Endpoint extends ScheduledPollEndpoint implements MultipleConsumersSupport {\n \n     public static final String KEY = \"KEY\";\n     public static final String SENDER_INFORMATION = \"SENDER_INFORMATION\";\n \n+    // Used only for message queue support\n+    public static final String MESSAGE_ID = \"jt400.MESSAGE_ID\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c658cba8abe8a72e626eec17fb76f58efba96ff7"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67ab5534b626e262f93fb8fd10f6a1ba1f043674", "author": {"user": null}, "url": "https://github.com/apache/camel/commit/67ab5534b626e262f93fb8fd10f6a1ba1f043674", "committedDate": "2020-06-17T13:00:55Z", "message": "move header constants into new class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e6ee7fc5fff24fc68257a7f54c5ad570401c35f", "author": {"user": null}, "url": "https://github.com/apache/camel/commit/4e6ee7fc5fff24fc68257a7f54c5ad570401c35f", "committedDate": "2020-06-17T13:13:15Z", "message": "change header constant values"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzMDYwMzA5", "url": "https://github.com/apache/camel/pull/3917#pullrequestreview-433060309", "createdAt": "2020-06-18T08:34:54Z", "commit": {"oid": "4e6ee7fc5fff24fc68257a7f54c5ad570401c35f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzODcxNTMw", "url": "https://github.com/apache/camel/pull/3917#pullrequestreview-433871530", "createdAt": "2020-06-19T07:47:05Z", "commit": {"oid": "4e6ee7fc5fff24fc68257a7f54c5ad570401c35f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3010, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}