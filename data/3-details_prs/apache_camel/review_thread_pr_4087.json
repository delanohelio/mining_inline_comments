{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY3MTkwNjYy", "number": 4087, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxNTozNzo0MVrOEYHCPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwODo1NTo0NlrOEY9Shw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkzNzE2NTQxOnYy", "diffSide": "RIGHT", "path": "components/camel-as2/camel-as2-component/src/main/java/org/apache/camel/component/as2/AS2Component.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxNTozNzo0MVrOHARMyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwNToxOTo0NVrOHBZ_mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA0Mzg0OQ==", "bodyText": "I wonder if this may cause some problems, as its in the JDK itself and if your build vs runtime are not the same then it can cause problems. I think we need to make this part in the doStart", "url": "https://github.com/apache/camel/pull/4087#discussion_r470043849", "createdAt": "2020-08-13T15:37:41Z", "author": {"login": "davsclaus"}, "path": "components/camel-as2/camel-as2-component/src/main/java/org/apache/camel/component/as2/AS2Component.java", "diffHunk": "@@ -58,8 +58,8 @@ protected Endpoint createEndpoint(String uri, String methodName, AS2ApiName apiN\n     }\n \n     @Override\n-    protected void doStart() throws Exception {\n-        super.doStart();\n+    protected void doInit() throws Exception {\n+        super.doInit();\n         if (Security.getProvider(\"BC\") == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5322968843fbe71fe6d03670051eb35e0043ab5a"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTIzNjUwNg==", "bodyText": "yeah, it makes sense.", "url": "https://github.com/apache/camel/pull/4087#discussion_r471236506", "createdAt": "2020-08-17T05:19:45Z", "author": {"login": "zhfeng"}, "path": "components/camel-as2/camel-as2-component/src/main/java/org/apache/camel/component/as2/AS2Component.java", "diffHunk": "@@ -58,8 +58,8 @@ protected Endpoint createEndpoint(String uri, String methodName, AS2ApiName apiN\n     }\n \n     @Override\n-    protected void doStart() throws Exception {\n-        super.doStart();\n+    protected void doInit() throws Exception {\n+        super.doInit();\n         if (Security.getProvider(\"BC\") == null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA0Mzg0OQ=="}, "originalCommit": {"oid": "5322968843fbe71fe6d03670051eb35e0043ab5a"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0NTQ1MDk2OnYy", "diffSide": "RIGHT", "path": "components/camel-cdi/src/main/java/org/apache/camel/cdi/CdiEventConsumer.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwNTo1Mzo1NFrOHBajUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwNjowMDo0NlrOHBarNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTI0NTY1MQ==", "bodyText": "This should be in doStart as we add / remove the consumer when the consumer is started/stopped, eg you can stop a consumer/route and then later start it. So this should be as before", "url": "https://github.com/apache/camel/pull/4087#discussion_r471245651", "createdAt": "2020-08-17T05:53:54Z", "author": {"login": "davsclaus"}, "path": "components/camel-cdi/src/main/java/org/apache/camel/cdi/CdiEventConsumer.java", "diffHunk": "@@ -37,8 +37,8 @@\n     }\n \n     @Override\n-    protected void doStart() throws Exception {\n-        super.doStart();\n+    protected void doInit() throws Exception {\n+        super.doInit();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "836d3e09957eb63444a320229b14b6cf197c37e8"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTI0NzY3MQ==", "bodyText": "Ok, I get it and I have not noticed that this is an event", "url": "https://github.com/apache/camel/pull/4087#discussion_r471247671", "createdAt": "2020-08-17T06:00:46Z", "author": {"login": "zhfeng"}, "path": "components/camel-cdi/src/main/java/org/apache/camel/cdi/CdiEventConsumer.java", "diffHunk": "@@ -37,8 +37,8 @@\n     }\n \n     @Override\n-    protected void doStart() throws Exception {\n-        super.doStart();\n+    protected void doInit() throws Exception {\n+        super.doInit();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTI0NTY1MQ=="}, "originalCommit": {"oid": "836d3e09957eb63444a320229b14b6cf197c37e8"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0NjA1NDQ3OnYy", "diffSide": "RIGHT", "path": "components/camel-apns/src/main/java/org/apache/camel/component/apns/ApnsConsumer.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QwODo1NTo0NlrOHBgKSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwNjoxNjoyMVrOHCEz2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTMzNzU0NQ==", "bodyText": "Same thing here as before, we should do this in doStart as its adding and removing consumers on the endpoint at runtime when its started/stopped.", "url": "https://github.com/apache/camel/pull/4087#discussion_r471337545", "createdAt": "2020-08-17T08:55:46Z", "author": {"login": "davsclaus"}, "path": "components/camel-apns/src/main/java/org/apache/camel/component/apns/ApnsConsumer.java", "diffHunk": "@@ -82,15 +82,15 @@ public ApnsEndpoint getEndpoint() {\n     }\n \n     @Override\n-    protected void doStart() throws Exception {\n+    protected void doInit() throws Exception {\n         // only add as consumer if not already registered\n         if (!getEndpoint().getConsumers().contains(this)) {\n             if (!getEndpoint().getConsumers().isEmpty()) {\n                 throw new IllegalStateException(\"Endpoint \" + getEndpoint().getEndpointUri() + \" only allows 1 active consumer but you attempted to start a 2nd consumer.\");\n             }\n             getEndpoint().getConsumers().add(this);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c6bbf0e0b38fb6818b3e0376a8b02db24d8cd675"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTkzODAwOQ==", "bodyText": "Fixed", "url": "https://github.com/apache/camel/pull/4087#discussion_r471938009", "createdAt": "2020-08-18T06:16:21Z", "author": {"login": "zhfeng"}, "path": "components/camel-apns/src/main/java/org/apache/camel/component/apns/ApnsConsumer.java", "diffHunk": "@@ -82,15 +82,15 @@ public ApnsEndpoint getEndpoint() {\n     }\n \n     @Override\n-    protected void doStart() throws Exception {\n+    protected void doInit() throws Exception {\n         // only add as consumer if not already registered\n         if (!getEndpoint().getConsumers().contains(this)) {\n             if (!getEndpoint().getConsumers().isEmpty()) {\n                 throw new IllegalStateException(\"Endpoint \" + getEndpoint().getEndpointUri() + \" only allows 1 active consumer but you attempted to start a 2nd consumer.\");\n             }\n             getEndpoint().getConsumers().add(this);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTMzNzU0NQ=="}, "originalCommit": {"oid": "c6bbf0e0b38fb6818b3e0376a8b02db24d8cd675"}, "originalPosition": 11}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4859, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}