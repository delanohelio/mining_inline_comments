{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI4NTI1NDEy", "number": 4694, "title": "[CAMEL-15899] Hazelcast consumer listeners not removed after use", "bodyText": "The following exception occurs if the camelroute with a hazel cast topic is restarted\nWARNUNG: Error processing exchange for hazelcast consumer on object 'null' in cache 'server.trace.event'.. Exchange[ID-1605875260724-0-338]. Caused by: [java.util.concurrent.RejectedExecutionException - null]\njava.util.concurrent.RejectedExecutionException\nat org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:435)\nat org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:201)\nat org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:201)\nat org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:97)\nat org.apache.camel.component.hazelcast.listener.CamelListener.sendExchange(CamelListener.java:48)\nat org.apache.camel.component.hazelcast.listener.CamelMessageListener.onMessage(CamelMessageListener.java:34)\nat com.hazelcast.topic.impl.TopicService.dispatchEvent(TopicService.java:138)\nat com.hazelcast.spi.impl.eventservice.impl.LocalEventDispatcher.run(LocalEventDispatcher.java:64)\nat com.hazelcast.util.executor.StripedExecutor$Worker.process(StripedExecutor.java:244)\nat com.hazelcast.util.executor.StripedExecutor$Worker.run(StripedExecutor.java:227)\n\n\nSolution\nRegister listeners in doStart and remove them in doStop", "createdAt": "2020-11-27T10:24:02Z", "url": "https://github.com/apache/camel/pull/4694", "merged": true, "mergeCommit": {"oid": "7c6cbf89829123ffd2088daff43bd1d5c036c1fe"}, "closed": true, "closedAt": "2020-11-27T13:02:18Z", "author": {"login": "scriptease"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdgk-6tgFqTUzOTg2ODMyNg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdglvdKAFqTUzOTkwMzg4Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM5ODY4MzI2", "url": "https://github.com/apache/camel/pull/4694#pullrequestreview-539868326", "createdAt": "2020-11-27T10:27:06Z", "commit": {"oid": "e3a1c00967bf3e25871437c142bf41b3d43ce6b9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QxMDoyNzowNlrOH649hg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QxMDoyNzowNlrOH649hg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTUxMjcxMA==", "bodyText": "I think this will make the camel codestyle fails, but it's not a problem", "url": "https://github.com/apache/camel/pull/4694#discussion_r531512710", "createdAt": "2020-11-27T10:27:06Z", "author": {"login": "oscerd"}, "path": "components/camel-hazelcast/src/main/java/org/apache/camel/component/hazelcast/list/HazelcastListConsumer.java", "diffHunk": "@@ -16,25 +16,51 @@\n  */\n package org.apache.camel.component.hazelcast.list;\n \n-import com.hazelcast.collection.IList;\n-import com.hazelcast.core.HazelcastInstance;\n+import java.util.UUID;\n+\n import org.apache.camel.Consumer;\n import org.apache.camel.Endpoint;\n import org.apache.camel.Processor;\n import org.apache.camel.component.hazelcast.HazelcastDefaultConsumer;\n import org.apache.camel.component.hazelcast.listener.CamelItemListener;\n \n+import com.hazelcast.collection.IList;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3a1c00967bf3e25871437c142bf41b3d43ce6b9"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95e794db3bf7a9dfc1b69e7b8c7e452b40adec27", "author": {"user": {"login": "scriptease", "name": "Florian Agsteiner"}}, "url": "https://github.com/apache/camel/commit/95e794db3bf7a9dfc1b69e7b8c7e452b40adec27", "committedDate": "2020-11-27T10:46:16Z", "message": "[CAMEL-15899] Hazelcast consumer listeners not removed after use"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "99073c71b1a4cccbbd13f4008cfe8af7aac059b9", "author": {"user": {"login": "scriptease", "name": "Florian Agsteiner"}}, "url": "https://github.com/apache/camel/commit/99073c71b1a4cccbbd13f4008cfe8af7aac059b9", "committedDate": "2020-11-27T10:44:25Z", "message": "[CAMEL-15899] Hazelcast consumer listeners not removed after use"}, "afterCommit": {"oid": "95e794db3bf7a9dfc1b69e7b8c7e452b40adec27", "author": {"user": {"login": "scriptease", "name": "Florian Agsteiner"}}, "url": "https://github.com/apache/camel/commit/95e794db3bf7a9dfc1b69e7b8c7e452b40adec27", "committedDate": "2020-11-27T10:46:16Z", "message": "[CAMEL-15899] Hazelcast consumer listeners not removed after use"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM5OTAzODgy", "url": "https://github.com/apache/camel/pull/4694#pullrequestreview-539903882", "createdAt": "2020-11-27T11:21:09Z", "commit": {"oid": "95e794db3bf7a9dfc1b69e7b8c7e452b40adec27"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2794, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}