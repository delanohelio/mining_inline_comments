{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3NjQ5MjI5", "number": 3523, "title": "Add a RouteBuilderLifecycleStrategy to intercept RouteBuilder related events", "bodyText": "", "createdAt": "2020-01-27T18:56:08Z", "url": "https://github.com/apache/camel/pull/3523", "merged": true, "mergeCommit": {"oid": "041ebb03ed508b7ff32e13ff4ef20f5241b4d00e"}, "closed": true, "closedAt": "2020-01-28T11:22:29Z", "author": {"login": "lburgazzoli"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-hcwxgBqjI5ODI5OTU3ODM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-vbwEgFqTM0OTI5NTc3Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2c5566cdc64af4d3a84f64f2d19dd53a74f66696", "author": {"user": {"login": "lburgazzoli", "name": "Luca Burgazzoli"}}, "url": "https://github.com/apache/camel/commit/2c5566cdc64af4d3a84f64f2d19dd53a74f66696", "committedDate": "2020-01-27T18:54:13Z", "message": "Add a RouteBuilderLifecycleStrategy to intercept ROuteBuilder related events"}, "afterCommit": {"oid": "ba0a15bbb1e968367bbcdeb592145bf687644b00", "author": {"user": {"login": "lburgazzoli", "name": "Luca Burgazzoli"}}, "url": "https://github.com/apache/camel/commit/ba0a15bbb1e968367bbcdeb592145bf687644b00", "committedDate": "2020-01-27T18:56:15Z", "message": "Add a RouteBuilderLifecycleStrategy to intercept RouteBuilder related events"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4OTAyMjI4", "url": "https://github.com/apache/camel/pull/3523#pullrequestreview-348902228", "createdAt": "2020-01-27T19:04:05Z", "commit": {"oid": "ba0a15bbb1e968367bbcdeb592145bf687644b00"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4OTAyOTAx", "url": "https://github.com/apache/camel/pull/3523#pullrequestreview-348902901", "createdAt": "2020-01-27T19:05:13Z", "commit": {"oid": "ba0a15bbb1e968367bbcdeb592145bf687644b00"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxOTowNToxNFrOFiN_Pg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxOTowNjo0MFrOFiOBrQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQyNTA4Ng==", "bodyText": "Move to camel-api and add javdoc to class level", "url": "https://github.com/apache/camel/pull/3523#discussion_r371425086", "createdAt": "2020-01-27T19:05:14Z", "author": {"login": "davsclaus"}, "path": "core/camel-core-engine/src/main/java/org/apache/camel/builder/RouteBuilderLifecycleStrategy.java", "diffHunk": "@@ -0,0 +1,31 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.camel.builder;\n+\n+public interface RouteBuilderLifecycleStrategy {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba0a15bbb1e968367bbcdeb592145bf687644b00"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQyNTE0MQ==", "bodyText": "Fix CS", "url": "https://github.com/apache/camel/pull/3523#discussion_r371425141", "createdAt": "2020-01-27T19:05:22Z", "author": {"login": "davsclaus"}, "path": "core/camel-core-engine/src/main/java/org/apache/camel/builder/RouteBuilder.java", "diffHunk": "@@ -478,12 +493,21 @@ protected void checkInitialized() throws Exception {\n             if (camelContext.adapt(ExtendedCamelContext.class).getErrorHandlerFactory() instanceof ErrorHandlerBuilder) {\n                 setErrorHandlerBuilder((ErrorHandlerBuilder)camelContext.adapt(ExtendedCamelContext.class).getErrorHandlerFactory());\n             }\n+\n+            for (RouteBuilderLifecycleStrategy interceptor: lifecycleInterceptors) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba0a15bbb1e968367bbcdeb592145bf687644b00"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQyNTE5NQ==", "bodyText": "Fix CS", "url": "https://github.com/apache/camel/pull/3523#discussion_r371425195", "createdAt": "2020-01-27T19:05:29Z", "author": {"login": "davsclaus"}, "path": "core/camel-core-engine/src/main/java/org/apache/camel/builder/RouteBuilder.java", "diffHunk": "@@ -478,12 +493,21 @@ protected void checkInitialized() throws Exception {\n             if (camelContext.adapt(ExtendedCamelContext.class).getErrorHandlerFactory() instanceof ErrorHandlerBuilder) {\n                 setErrorHandlerBuilder((ErrorHandlerBuilder)camelContext.adapt(ExtendedCamelContext.class).getErrorHandlerFactory());\n             }\n+\n+            for (RouteBuilderLifecycleStrategy interceptor: lifecycleInterceptors) {\n+                interceptor.beforeConfigure(this);\n+            }\n+\n             configure();\n             // mark all route definitions as custom prepared because\n             // a route builder prepares the route definitions correctly already\n             for (RouteDefinition route : getRouteCollection().getRoutes()) {\n                 route.markPrepared();\n             }\n+\n+            for (RouteBuilderLifecycleStrategy interceptor: lifecycleInterceptors) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba0a15bbb1e968367bbcdeb592145bf687644b00"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQyNTMyNw==", "bodyText": "Make final", "url": "https://github.com/apache/camel/pull/3523#discussion_r371425327", "createdAt": "2020-01-27T19:05:47Z", "author": {"login": "davsclaus"}, "path": "core/camel-core-engine/src/main/java/org/apache/camel/builder/RouteBuilder.java", "diffHunk": "@@ -71,6 +71,7 @@\n     private List<TransformerBuilder> transformerBuilders = new ArrayList<>();\n     private List<ValidatorBuilder> validatorBuilders = new ArrayList<>();\n     private RoutesDefinition routeCollection = new RoutesDefinition();\n+    private List<RouteBuilderLifecycleStrategy> lifecycleInterceptors = new ArrayList<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba0a15bbb1e968367bbcdeb592145bf687644b00"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQyNTcwOQ==", "bodyText": "Fix spacing in javadoc, also for the other method", "url": "https://github.com/apache/camel/pull/3523#discussion_r371425709", "createdAt": "2020-01-27T19:06:40Z", "author": {"login": "davsclaus"}, "path": "core/camel-core-engine/src/main/java/org/apache/camel/builder/RouteBuilderLifecycleStrategy.java", "diffHunk": "@@ -0,0 +1,31 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.camel.builder;\n+\n+public interface RouteBuilderLifecycleStrategy {\n+    /**\n+     * This method is invoked before the {@link RouteBuilder#configure()}method is invoked.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba0a15bbb1e968367bbcdeb592145bf687644b00"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e6f9bbd8c4bf9dfbb3512f9e8fb7f3aa716fa6a", "author": {"user": {"login": "lburgazzoli", "name": "Luca Burgazzoli"}}, "url": "https://github.com/apache/camel/commit/6e6f9bbd8c4bf9dfbb3512f9e8fb7f3aa716fa6a", "committedDate": "2020-01-28T09:32:47Z", "message": "Add a RouteBuilderLifecycleStrategy to intercept RouteBuilder related events"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ba0a15bbb1e968367bbcdeb592145bf687644b00", "author": {"user": {"login": "lburgazzoli", "name": "Luca Burgazzoli"}}, "url": "https://github.com/apache/camel/commit/ba0a15bbb1e968367bbcdeb592145bf687644b00", "committedDate": "2020-01-27T18:56:15Z", "message": "Add a RouteBuilderLifecycleStrategy to intercept RouteBuilder related events"}, "afterCommit": {"oid": "6e6f9bbd8c4bf9dfbb3512f9e8fb7f3aa716fa6a", "author": {"user": {"login": "lburgazzoli", "name": "Luca Burgazzoli"}}, "url": "https://github.com/apache/camel/commit/6e6f9bbd8c4bf9dfbb3512f9e8fb7f3aa716fa6a", "committedDate": "2020-01-28T09:32:47Z", "message": "Add a RouteBuilderLifecycleStrategy to intercept RouteBuilder related events"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5Mjk1Nzc2", "url": "https://github.com/apache/camel/pull/3523#pullrequestreview-349295776", "createdAt": "2020-01-28T11:14:05Z", "commit": {"oid": "6e6f9bbd8c4bf9dfbb3512f9e8fb7f3aa716fa6a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2762, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}