{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk3NTEzMzU2", "number": 3705, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMTozMjoxNVrODt6UvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMzoyMDozNlrODt8vYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5NDY4MDkzOnYy", "diffSide": "RIGHT", "path": "components/camel-tika/src/main/java/org/apache/camel/component/tika/TikaComponent.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMTozMjoxNVrOF_nAIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMjo1NDowNFrOF_py2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjI0MzYxOA==", "bodyText": "I just realized that setProperties should be done on the endpoint not on the configuration in order to avoid reflection, is that correct @oscerd ?", "url": "https://github.com/apache/camel/pull/3705#discussion_r402243618", "createdAt": "2020-04-02T11:32:15Z", "author": {"login": "omarsmak"}, "path": "components/camel-tika/src/main/java/org/apache/camel/component/tika/TikaComponent.java", "diffHunk": "@@ -38,6 +38,10 @@ protected Endpoint createEndpoint(String uri, String remaining, Map<String, Obje\n             tikaConfiguration.setTikaConfig(config);\r\n         }\r\n         tikaConfiguration.setOperation(new URI(uri).getHost());\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "225528a48bd20af13a258c831e75848f408d16c3"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjI0NDUyMA==", "bodyText": "Yes, we missed that one, I guess @davsclaus", "url": "https://github.com/apache/camel/pull/3705#discussion_r402244520", "createdAt": "2020-04-02T11:34:08Z", "author": {"login": "oscerd"}, "path": "components/camel-tika/src/main/java/org/apache/camel/component/tika/TikaComponent.java", "diffHunk": "@@ -38,6 +38,10 @@ protected Endpoint createEndpoint(String uri, String remaining, Map<String, Obje\n             tikaConfiguration.setTikaConfig(config);\r\n         }\r\n         tikaConfiguration.setOperation(new URI(uri).getHost());\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjI0MzYxOA=="}, "originalCommit": {"oid": "225528a48bd20af13a258c831e75848f408d16c3"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjI0NjUyNg==", "bodyText": "Yes see the other components how its done", "url": "https://github.com/apache/camel/pull/3705#discussion_r402246526", "createdAt": "2020-04-02T11:38:17Z", "author": {"login": "davsclaus"}, "path": "components/camel-tika/src/main/java/org/apache/camel/component/tika/TikaComponent.java", "diffHunk": "@@ -38,6 +38,10 @@ protected Endpoint createEndpoint(String uri, String remaining, Map<String, Obje\n             tikaConfiguration.setTikaConfig(config);\r\n         }\r\n         tikaConfiguration.setOperation(new URI(uri).getHost());\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjI0MzYxOA=="}, "originalCommit": {"oid": "225528a48bd20af13a258c831e75848f408d16c3"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjI4OTM2OQ==", "bodyText": "@omarsmak I've changed call of setProperties to invoked on endpoint (other components do it that way), is it correct now?", "url": "https://github.com/apache/camel/pull/3705#discussion_r402289369", "createdAt": "2020-04-02T12:54:04Z", "author": {"login": "JiriOndrusek"}, "path": "components/camel-tika/src/main/java/org/apache/camel/component/tika/TikaComponent.java", "diffHunk": "@@ -38,6 +38,10 @@ protected Endpoint createEndpoint(String uri, String remaining, Map<String, Obje\n             tikaConfiguration.setTikaConfig(config);\r\n         }\r\n         tikaConfiguration.setOperation(new URI(uri).getHost());\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjI0MzYxOA=="}, "originalCommit": {"oid": "225528a48bd20af13a258c831e75848f408d16c3"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5NDg0NDAzOnYy", "diffSide": "RIGHT", "path": "components/camel-tika/src/main/java/org/apache/camel/component/tika/TikaProducer.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMjoyMToyMFrOF_olIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMjo1OTowMlrOF_p_nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjI2OTQ3Mw==", "bodyText": "It seams to be a related to IDE, but looks like we don't need this for all fields.", "url": "https://github.com/apache/camel/pull/3705#discussion_r402269473", "createdAt": "2020-04-02T12:21:20Z", "author": {"login": "dmvolod"}, "path": "components/camel-tika/src/main/java/org/apache/camel/component/tika/TikaProducer.java", "diffHunk": "@@ -59,12 +59,24 @@\n     private final String encoding;\r\n \r\n     public TikaProducer(TikaEndpoint endpoint) {\r\n+        this(endpoint, true, null);\r\n+    }\r\n+\r\n+    public TikaProducer(TikaEndpoint endpoint, Parser parser) {\r\n+        this(endpoint, parser == null, parser);\r\n+    }\r\n+\r\n+    private TikaProducer(TikaEndpoint endpoint, boolean autodetectParser, Parser parser) {\r\n         super(endpoint);\r\n         this.tikaConfiguration = endpoint.getTikaConfiguration();\r\n         this.encoding = this.tikaConfiguration.getTikaParseOutputEncoding();\r\n         TikaConfig config = this.tikaConfiguration.getTikaConfig();\r\n-        this.parser = new AutoDetectParser(config);\r\n         this.detector = config.getDetector();\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "225528a48bd20af13a258c831e75848f408d16c3"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjI5MjYzOQ==", "bodyText": "@dmvolod  yes, 'this.' prefixes are not required. From my point of view it helps to orientate in the code, developer immediately know, that these fields are on 'this' instance. It also helps in future, if someone adds a new parameter with the same name, it could prevent issue with initialization of the bad property.\nBut I have no problem with removal of 'this' on all fields (I haven't changed that) should I remove it?", "url": "https://github.com/apache/camel/pull/3705#discussion_r402292639", "createdAt": "2020-04-02T12:59:02Z", "author": {"login": "JiriOndrusek"}, "path": "components/camel-tika/src/main/java/org/apache/camel/component/tika/TikaProducer.java", "diffHunk": "@@ -59,12 +59,24 @@\n     private final String encoding;\r\n \r\n     public TikaProducer(TikaEndpoint endpoint) {\r\n+        this(endpoint, true, null);\r\n+    }\r\n+\r\n+    public TikaProducer(TikaEndpoint endpoint, Parser parser) {\r\n+        this(endpoint, parser == null, parser);\r\n+    }\r\n+\r\n+    private TikaProducer(TikaEndpoint endpoint, boolean autodetectParser, Parser parser) {\r\n         super(endpoint);\r\n         this.tikaConfiguration = endpoint.getTikaConfiguration();\r\n         this.encoding = this.tikaConfiguration.getTikaParseOutputEncoding();\r\n         TikaConfig config = this.tikaConfiguration.getTikaConfig();\r\n-        this.parser = new AutoDetectParser(config);\r\n         this.detector = config.getDetector();\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjI2OTQ3Mw=="}, "originalCommit": {"oid": "225528a48bd20af13a258c831e75848f408d16c3"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5NTA3NjgxOnYy", "diffSide": "RIGHT", "path": "components/camel-tika/src/main/java/org/apache/camel/component/tika/TikaProducer.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMzoyMDozNlrOF_q1iQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMlQxMzozMjo1OVrOF_rYeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMwNjQ0MQ==", "bodyText": "I think you can replace autodetectParser with parser == null and eliminate the three-args constructor.", "url": "https://github.com/apache/camel/pull/3705#discussion_r402306441", "createdAt": "2020-04-02T13:20:36Z", "author": {"login": "ppalaga"}, "path": "components/camel-tika/src/main/java/org/apache/camel/component/tika/TikaProducer.java", "diffHunk": "@@ -59,12 +59,24 @@\n     private final String encoding;\r\n \r\n     public TikaProducer(TikaEndpoint endpoint) {\r\n+        this(endpoint, true, null);\r\n+    }\r\n+\r\n+    public TikaProducer(TikaEndpoint endpoint, Parser parser) {\r\n+        this(endpoint, parser == null, parser);\r\n+    }\r\n+\r\n+    private TikaProducer(TikaEndpoint endpoint, boolean autodetectParser, Parser parser) {\r\n         super(endpoint);\r\n         this.tikaConfiguration = endpoint.getTikaConfiguration();\r\n         this.encoding = this.tikaConfiguration.getTikaParseOutputEncoding();\r\n         TikaConfig config = this.tikaConfiguration.getTikaConfig();\r\n-        this.parser = new AutoDetectParser(config);\r\n         this.detector = config.getDetector();\r\n+        if (autodetectParser) {\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72147d76e96908c2cd3e9992c1518c294a31ee65"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMxMDU0Ng==", "bodyText": "@ppalaga Unfortunately I can not do that, it will cause conflict with existing public constructor (https://github.com/apache/camel/pull/3705/files#diff-1383e03de9c8ef89d7546ab133b8801cR65). The only reason of having 3 args constructor is to keep property 'this.parser' final.", "url": "https://github.com/apache/camel/pull/3705#discussion_r402310546", "createdAt": "2020-04-02T13:26:28Z", "author": {"login": "JiriOndrusek"}, "path": "components/camel-tika/src/main/java/org/apache/camel/component/tika/TikaProducer.java", "diffHunk": "@@ -59,12 +59,24 @@\n     private final String encoding;\r\n \r\n     public TikaProducer(TikaEndpoint endpoint) {\r\n+        this(endpoint, true, null);\r\n+    }\r\n+\r\n+    public TikaProducer(TikaEndpoint endpoint, Parser parser) {\r\n+        this(endpoint, parser == null, parser);\r\n+    }\r\n+\r\n+    private TikaProducer(TikaEndpoint endpoint, boolean autodetectParser, Parser parser) {\r\n         super(endpoint);\r\n         this.tikaConfiguration = endpoint.getTikaConfiguration();\r\n         this.encoding = this.tikaConfiguration.getTikaParseOutputEncoding();\r\n         TikaConfig config = this.tikaConfiguration.getTikaConfig();\r\n-        this.parser = new AutoDetectParser(config);\r\n         this.detector = config.getDetector();\r\n+        if (autodetectParser) {\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMwNjQ0MQ=="}, "originalCommit": {"oid": "72147d76e96908c2cd3e9992c1518c294a31ee65"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMxMTg3Mg==", "bodyText": "I'll missed a small detail, I'll fix it in that way", "url": "https://github.com/apache/camel/pull/3705#discussion_r402311872", "createdAt": "2020-04-02T13:28:14Z", "author": {"login": "JiriOndrusek"}, "path": "components/camel-tika/src/main/java/org/apache/camel/component/tika/TikaProducer.java", "diffHunk": "@@ -59,12 +59,24 @@\n     private final String encoding;\r\n \r\n     public TikaProducer(TikaEndpoint endpoint) {\r\n+        this(endpoint, true, null);\r\n+    }\r\n+\r\n+    public TikaProducer(TikaEndpoint endpoint, Parser parser) {\r\n+        this(endpoint, parser == null, parser);\r\n+    }\r\n+\r\n+    private TikaProducer(TikaEndpoint endpoint, boolean autodetectParser, Parser parser) {\r\n         super(endpoint);\r\n         this.tikaConfiguration = endpoint.getTikaConfiguration();\r\n         this.encoding = this.tikaConfiguration.getTikaParseOutputEncoding();\r\n         TikaConfig config = this.tikaConfiguration.getTikaConfig();\r\n-        this.parser = new AutoDetectParser(config);\r\n         this.detector = config.getDetector();\r\n+        if (autodetectParser) {\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMwNjQ0MQ=="}, "originalCommit": {"oid": "72147d76e96908c2cd3e9992c1518c294a31ee65"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMxNTM4NQ==", "bodyText": "@ppalaga thanks for pointing this out. (I've over-combined so easy thing). It's changed now.", "url": "https://github.com/apache/camel/pull/3705#discussion_r402315385", "createdAt": "2020-04-02T13:32:59Z", "author": {"login": "JiriOndrusek"}, "path": "components/camel-tika/src/main/java/org/apache/camel/component/tika/TikaProducer.java", "diffHunk": "@@ -59,12 +59,24 @@\n     private final String encoding;\r\n \r\n     public TikaProducer(TikaEndpoint endpoint) {\r\n+        this(endpoint, true, null);\r\n+    }\r\n+\r\n+    public TikaProducer(TikaEndpoint endpoint, Parser parser) {\r\n+        this(endpoint, parser == null, parser);\r\n+    }\r\n+\r\n+    private TikaProducer(TikaEndpoint endpoint, boolean autodetectParser, Parser parser) {\r\n         super(endpoint);\r\n         this.tikaConfiguration = endpoint.getTikaConfiguration();\r\n         this.encoding = this.tikaConfiguration.getTikaParseOutputEncoding();\r\n         TikaConfig config = this.tikaConfiguration.getTikaConfig();\r\n-        this.parser = new AutoDetectParser(config);\r\n         this.detector = config.getDetector();\r\n+        if (autodetectParser) {\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMwNjQ0MQ=="}, "originalCommit": {"oid": "72147d76e96908c2cd3e9992c1518c294a31ee65"}, "originalPosition": 18}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4967, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}