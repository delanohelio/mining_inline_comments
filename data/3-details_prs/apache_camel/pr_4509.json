{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA5NTY1Nzcx", "number": 4509, "title": "[CAMEL-15748] nullify mqtt client on producer and consumer stop", "bodyText": "When restarting a route with a paho consumer or using a paho producer\nafter a connection failure to the broker the mqtt client was not\nreconnected. This patch sets consumer and producer internl mqtt  client\ninstance to null os stop, so that a restart will create a new instance\nand connect to the broker again.\n\n Make sure there is a JIRA issue filed for the change (usually before you start working on it).  Trivial changes like typos do not require a JIRA issue.  Your pull request should address just this issue, without pulling in other changes.\n Each commit in the pull request should have a meaningful subject line and body.\n If you're unsure, you can format the pull request title like [CAMEL-XXX] Fixes bug in camel-file component, where you replace CAMEL-XXX with the appropriate JIRA issue.\n Write a pull request description that is detailed enough to understand what the pull request does, how, and why.\n Run mvn clean install -Psourcecheck in your module with source check enabled to make sure basic checks pass and there are no checkstyle violations. A more thorough check will be performed on your pull request automatically.\nBelow are the contribution guidelines:\nhttps://github.com/apache/camel/blob/master/CONTRIBUTING.md", "createdAt": "2020-10-25T09:54:19Z", "url": "https://github.com/apache/camel/pull/4509", "merged": true, "mergeCommit": {"oid": "da07bf50799f8bfea816b12cd5c9e4b880c7b3f2"}, "closed": true, "closedAt": "2020-10-25T15:44:44Z", "author": {"login": "mcollovati"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdV868iAFqTUxNjM0Mjg3Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWAjF9AH2gAyNTA5NTY1NzcxOmM2OTE2OTg2N2ZjNTBhYjc1ZjM4MWZkOTg3OTc1YjM2ZmE1NmQ0Nzc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2MzQyODc3", "url": "https://github.com/apache/camel/pull/4509#pullrequestreview-516342877", "createdAt": "2020-10-25T10:08:20Z", "commit": {"oid": "f22ea0c17144ccddb99fd503ffce3fe64b84051e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f22ea0c17144ccddb99fd503ffce3fe64b84051e", "author": {"user": {"login": "mcollovati", "name": "Marco Collovati"}}, "url": "https://github.com/apache/camel/commit/f22ea0c17144ccddb99fd503ffce3fe64b84051e", "committedDate": "2020-10-25T10:40:43Z", "message": "CAMEL-15748: nullify mqtt client on producer and consumer stop\n\nWhen restarting a route with a paho consumer or using a paho producer\nafter a connection failure to the broker the mqtt client was not\nreconnected. This patch sets consumer and producer internl mqtt  client\ninstance to null os stop, so that a restart will create a new instance\nand connect to the broker again."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2MzYzMzYx", "url": "https://github.com/apache/camel/pull/4509#pullrequestreview-516363361", "createdAt": "2020-10-25T14:16:37Z", "commit": {"oid": "f22ea0c17144ccddb99fd503ffce3fe64b84051e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNVQxNDoxNjozN1rOHn5wIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNVQxNDoxNjozN1rOHn5wIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTYwMjcyMQ==", "bodyText": "You need to add the ASF license header to the top of this file.", "url": "https://github.com/apache/camel/pull/4509#discussion_r511602721", "createdAt": "2020-10-25T14:16:37Z", "author": {"login": "davsclaus"}, "path": "components/camel-paho/src/test/java/org/apache/camel/component/paho/PahoReconnectAfterFailureTest.java", "diffHunk": "@@ -0,0 +1,128 @@\n+package org.apache.camel.component.paho;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f22ea0c17144ccddb99fd503ffce3fe64b84051e"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2MzYzMzc3", "url": "https://github.com/apache/camel/pull/4509#pullrequestreview-516363377", "createdAt": "2020-10-25T14:16:45Z", "commit": {"oid": "f22ea0c17144ccddb99fd503ffce3fe64b84051e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c69169867fc50ab75f381fd987975b36fa56d477", "author": {"user": {"login": "mcollovati", "name": "Marco Collovati"}}, "url": "https://github.com/apache/camel/commit/c69169867fc50ab75f381fd987975b36fa56d477", "committedDate": "2020-10-25T14:21:54Z", "message": "Added ASF license header on PahoReconnectAfterFailureTest"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2847, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}