{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzNDk3MTc5", "number": 3677, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMDoxNTo0N1rODrJTYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMDoxNzoxNVrODrJVag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2NTY3Nzc2OnYy", "diffSide": "RIGHT", "path": "components/camel-undertow/src/main/java/org/apache/camel/component/undertow/UndertowComponent.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMDoxNTo0N1rOF7UPiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMDoyNzoxN1rOF7UrCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzc0MTk2MA==", "bodyText": "Add @metadata with security label.", "url": "https://github.com/apache/camel/pull/3677#discussion_r397741960", "createdAt": "2020-03-25T10:15:47Z", "author": {"login": "davsclaus"}, "path": "components/camel-undertow/src/main/java/org/apache/camel/component/undertow/UndertowComponent.java", "diffHunk": "@@ -78,6 +87,7 @@\n     @Metadata(label = \"security\")\n     private String allowedRoles;\n \n+    private UndertowSecurityProvider securityProvider;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "54a3cbecb78f140ef1591da3a4aa428ec0736ea0"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzc0OTAwMA==", "bodyText": "@davsclaus this is not parameter which comes from configuration, it is just private variable that is used by component when SPI implementation is searched for. From my POV there should be annotation like @nometadata in tis case.", "url": "https://github.com/apache/camel/pull/3677#discussion_r397749000", "createdAt": "2020-03-25T10:27:17Z", "author": {"login": "JiriOndrusek"}, "path": "components/camel-undertow/src/main/java/org/apache/camel/component/undertow/UndertowComponent.java", "diffHunk": "@@ -78,6 +87,7 @@\n     @Metadata(label = \"security\")\n     private String allowedRoles;\n \n+    private UndertowSecurityProvider securityProvider;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzc0MTk2MA=="}, "originalCommit": {"oid": "54a3cbecb78f140ef1591da3a4aa428ec0736ea0"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2NTY3ODUwOnYy", "diffSide": "RIGHT", "path": "components/camel-undertow/src/main/java/org/apache/camel/component/undertow/UndertowComponent.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMDoxNjowNFrOF7UQDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMDoyODo0NlrOF7UufA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzc0MjA5NA==", "bodyText": "Add setter so you can set this explicit", "url": "https://github.com/apache/camel/pull/3677#discussion_r397742094", "createdAt": "2020-03-25T10:16:04Z", "author": {"login": "davsclaus"}, "path": "components/camel-undertow/src/main/java/org/apache/camel/component/undertow/UndertowComponent.java", "diffHunk": "@@ -435,4 +476,8 @@ public String getAllowedRoles() {\n     public void setAllowedRoles(String allowedRoles) {\n         this.allowedRoles = allowedRoles;\n     }\n+\n+    public UndertowSecurityProvider getSecurityProvider() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "54a3cbecb78f140ef1591da3a4aa428ec0736ea0"}, "originalPosition": 116}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzc0OTg4NA==", "bodyText": "I can do it also this way, in that case please ignore my previous comment", "url": "https://github.com/apache/camel/pull/3677#discussion_r397749884", "createdAt": "2020-03-25T10:28:46Z", "author": {"login": "JiriOndrusek"}, "path": "components/camel-undertow/src/main/java/org/apache/camel/component/undertow/UndertowComponent.java", "diffHunk": "@@ -435,4 +476,8 @@ public String getAllowedRoles() {\n     public void setAllowedRoles(String allowedRoles) {\n         this.allowedRoles = allowedRoles;\n     }\n+\n+    public UndertowSecurityProvider getSecurityProvider() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzc0MjA5NA=="}, "originalCommit": {"oid": "54a3cbecb78f140ef1591da3a4aa428ec0736ea0"}, "originalPosition": 116}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2NTY3OTE4OnYy", "diffSide": "RIGHT", "path": "components/camel-undertow/src/main/java/org/apache/camel/component/undertow/UndertowComponent.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMDoxNjoxN1rOF7UQeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMDozMDowMlrOF7Uxpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzc0MjIwMA==", "bodyText": "Only init if the security provider is null", "url": "https://github.com/apache/camel/pull/3677#discussion_r397742200", "createdAt": "2020-03-25T10:16:17Z", "author": {"login": "davsclaus"}, "path": "components/camel-undertow/src/main/java/org/apache/camel/component/undertow/UndertowComponent.java", "diffHunk": "@@ -306,6 +339,8 @@ public Producer createProducer(CamelContext camelContext, String host,\n     protected void doStart() throws Exception {\n         super.doStart();\n \n+        initSecurityProvider();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "54a3cbecb78f140ef1591da3a4aa428ec0736ea0"}, "originalPosition": 82}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzc1MDY5NA==", "bodyText": "I'll change it", "url": "https://github.com/apache/camel/pull/3677#discussion_r397750694", "createdAt": "2020-03-25T10:30:02Z", "author": {"login": "JiriOndrusek"}, "path": "components/camel-undertow/src/main/java/org/apache/camel/component/undertow/UndertowComponent.java", "diffHunk": "@@ -306,6 +339,8 @@ public Producer createProducer(CamelContext camelContext, String host,\n     protected void doStart() throws Exception {\n         super.doStart();\n \n+        initSecurityProvider();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzc0MjIwMA=="}, "originalCommit": {"oid": "54a3cbecb78f140ef1591da3a4aa428ec0736ea0"}, "originalPosition": 82}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2NTY4MTg5OnYy", "diffSide": "RIGHT", "path": "components/camel-undertow/src/main/java/org/apache/camel/component/undertow/UndertowEndpoint.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMDoxNjo1NlrOF7USHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMDoyOToyOVrOF7UwWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzc0MjYyMA==", "bodyText": "getter/setters should be plain, not these tricks. Instead when creating the endpoint in the component, then set the security provider on the endpoint correctly", "url": "https://github.com/apache/camel/pull/3677#discussion_r397742620", "createdAt": "2020-03-25T10:16:56Z", "author": {"login": "davsclaus"}, "path": "components/camel-undertow/src/main/java/org/apache/camel/component/undertow/UndertowEndpoint.java", "diffHunk": "@@ -147,7 +147,11 @@ public UndertowComponent getComponent() {\n     }\n \n     public UndertowSecurityProvider getSecurityProvider() {\n-        return securityProvider;\n+        if (this.securityProvider == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "54a3cbecb78f140ef1591da3a4aa428ec0736ea0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzc1MDM2MQ==", "bodyText": "ok, I'll do it, thanks for explanation", "url": "https://github.com/apache/camel/pull/3677#discussion_r397750361", "createdAt": "2020-03-25T10:29:29Z", "author": {"login": "JiriOndrusek"}, "path": "components/camel-undertow/src/main/java/org/apache/camel/component/undertow/UndertowEndpoint.java", "diffHunk": "@@ -147,7 +147,11 @@ public UndertowComponent getComponent() {\n     }\n \n     public UndertowSecurityProvider getSecurityProvider() {\n-        return securityProvider;\n+        if (this.securityProvider == null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzc0MjYyMA=="}, "originalCommit": {"oid": "54a3cbecb78f140ef1591da3a4aa428ec0736ea0"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2NTY4Mjk4OnYy", "diffSide": "RIGHT", "path": "components/camel-undertow/src/main/java/org/apache/camel/component/undertow/UndertowEndpoint.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMDoxNzoxNVrOF7US0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxMDoyOTo0NVrOF7UxDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzc0MjgwMA==", "bodyText": "See prev comment, getter/setter should be plain", "url": "https://github.com/apache/camel/pull/3677#discussion_r397742800", "createdAt": "2020-03-25T10:17:15Z", "author": {"login": "davsclaus"}, "path": "components/camel-undertow/src/main/java/org/apache/camel/component/undertow/UndertowEndpoint.java", "diffHunk": "@@ -454,14 +458,13 @@ public boolean isPreserveHostHeader() {\n     }\n \n     public Object getSecurityConfiguration() {\n-        return this.securityConfiguration == null ? getComponent().getSecurityConfiguration() : this.securityConfiguration;\n+        return this.securityConfiguration;\n     }\n \n     public void setSecurityConfiguration(Object securityConfiguration) {\n         this.securityConfiguration = securityConfiguration;\n     }\n \n-\n     public String getAllowedRoles() {\n         return allowedRoles == null ? getComponent().getAllowedRoles() : allowedRoles;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "54a3cbecb78f140ef1591da3a4aa428ec0736ea0"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzc1MDU0MA==", "bodyText": "I'll change it", "url": "https://github.com/apache/camel/pull/3677#discussion_r397750540", "createdAt": "2020-03-25T10:29:45Z", "author": {"login": "JiriOndrusek"}, "path": "components/camel-undertow/src/main/java/org/apache/camel/component/undertow/UndertowEndpoint.java", "diffHunk": "@@ -454,14 +458,13 @@ public boolean isPreserveHostHeader() {\n     }\n \n     public Object getSecurityConfiguration() {\n-        return this.securityConfiguration == null ? getComponent().getSecurityConfiguration() : this.securityConfiguration;\n+        return this.securityConfiguration;\n     }\n \n     public void setSecurityConfiguration(Object securityConfiguration) {\n         this.securityConfiguration = securityConfiguration;\n     }\n \n-\n     public String getAllowedRoles() {\n         return allowedRoles == null ? getComponent().getAllowedRoles() : allowedRoles;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzc0MjgwMA=="}, "originalCommit": {"oid": "54a3cbecb78f140ef1591da3a4aa428ec0736ea0"}, "originalPosition": 27}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4956, "cost": 1, "resetAt": "2021-11-12T11:18:39Z"}}}