{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk3NDYwODk4", "number": 4359, "title": "CAMEL-15626: Use StringBuilder instead of StringBuffer", "bodyText": "Signed-off-by: Miguel Serra serramiguel1@gmail.com", "createdAt": "2020-10-04T16:28:50Z", "url": "https://github.com/apache/camel/pull/4359", "merged": true, "mergeCommit": {"oid": "da293599c7e4084004cee1b53262b7f6f48506d2"}, "closed": true, "closedAt": "2020-10-05T07:18:27Z", "author": {"login": "mcserra"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdPRzlpAFqTUwMTYzODgwOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdPSW4bgFqTUwMTY0MTcxMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxNjM4ODA4", "url": "https://github.com/apache/camel/pull/4359#pullrequestreview-501638808", "createdAt": "2020-10-04T16:30:50Z", "commit": {"oid": "cd791ce84716d5fb505bcc98b9b7d7036ac7e334"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxNjQwMjc0", "url": "https://github.com/apache/camel/pull/4359#pullrequestreview-501640274", "createdAt": "2020-10-04T16:50:26Z", "commit": {"oid": "cd791ce84716d5fb505bcc98b9b7d7036ac7e334"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNFQxNjo1MDoyNlrOHcIxOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNFQxNjo1MDoyNlrOHcIxOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI2NTg1MA==", "bodyText": "StringBuffer is here intentionally because it is mutable and ensures locks. As aggregate method can be called in many threads in parallel, you need to ensure locking in different way (synchronized block, ReentrantLock, ...) before changing this to StringBuilder, otherwise the output will be corrupted.", "url": "https://github.com/apache/camel/pull/4359#discussion_r499265850", "createdAt": "2020-10-04T16:50:26Z", "author": {"login": "bedlaj"}, "path": "core/camel-base/src/main/java/org/apache/camel/processor/aggregate/StringAggregationStrategy.java", "diffHunk": "@@ -63,12 +63,12 @@ public StringAggregationStrategy pick(Expression expression) {\n      */\n     @Override\n     public Exchange aggregate(Exchange oldExchange, Exchange newExchange) {\n-        StringBuffer result; // Aggregate in StringBuffer instead of StringBuilder, to make it thread safe", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cd791ce84716d5fb505bcc98b9b7d7036ac7e334"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac7a71c372f6665207247265b63bb2e2c66d6cd8", "author": {"user": {"login": "mcserra", "name": "Miguel Serra"}}, "url": "https://github.com/apache/camel/commit/ac7a71c372f6665207247265b63bb2e2c66d6cd8", "committedDate": "2020-10-04T17:06:48Z", "message": "CAMEL-15626: Use StringBuilder instead of StringBuffer\n\nSigned-off-by: Miguel Serra <serramiguel1@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cd791ce84716d5fb505bcc98b9b7d7036ac7e334", "author": {"user": {"login": "mcserra", "name": "Miguel Serra"}}, "url": "https://github.com/apache/camel/commit/cd791ce84716d5fb505bcc98b9b7d7036ac7e334", "committedDate": "2020-10-04T16:27:06Z", "message": "CAMEL-15626: Use StringBuilder instead of StringBuffer\n\nSigned-off-by: Miguel Serra <serramiguel1@gmail.com>"}, "afterCommit": {"oid": "ac7a71c372f6665207247265b63bb2e2c66d6cd8", "author": {"user": {"login": "mcserra", "name": "Miguel Serra"}}, "url": "https://github.com/apache/camel/commit/ac7a71c372f6665207247265b63bb2e2c66d6cd8", "committedDate": "2020-10-04T17:06:48Z", "message": "CAMEL-15626: Use StringBuilder instead of StringBuffer\n\nSigned-off-by: Miguel Serra <serramiguel1@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxNjQxNzEz", "url": "https://github.com/apache/camel/pull/4359#pullrequestreview-501641713", "createdAt": "2020-10-04T17:09:23Z", "commit": {"oid": "ac7a71c372f6665207247265b63bb2e2c66d6cd8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2866, "cost": 1, "resetAt": "2021-10-29T17:30:11Z"}}}