{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2NTI3ODQ1", "number": 540, "title": "Enable ideprobe for pants plugin CI", "bodyText": "This PR enables a way to run ide-probe tests for intellij pants plugin.\nI added new element to travis matrix (ideprobe) which runs test.sh script inside docker.\nThe docker image just setups packages needed to run probe and pants (python, xvfb etc.) and coursier and accepts an agreement needed to run intellij.\nThe run_docker script builds pants plugin and passes it down to docker container.\ntest.sh script is used inside docker to run tests. It enables virtual display to run tests with full gui. Then it installs ideprobe artifacts to ivy local repo (eventually we should just use a published version and proper resolvers).\nTests are run using junit standalone launcher (run via coursier). Coursier is also used to build the classpath required to run ide-probe (the framework and tests). The tests for pants are inside artifact\ncom.virtuslab.ideprobe:pants-tests_2.13:0.1:test and the jar for this artifact is passed as scan-classpath flag for junit to run only pants related tests.\nThere is one more thing here. At the beginning of runtime classpath we put one more jar with pants.conf file. In ide-probe it contains common config for pants tests: intellij and plugin versions. Thanks to this we control have control over versions here and also we can use the pants plugin from current PR. In similar way it is possible to override any other probe config externally.\nFurther things to do with this integration:\n\nNote that I disabled PantsIssue42 test, it is quite heavy as it reproduces an issue and ensures it's not there anymore, but to do this is sets up 2 extra versions of pants. Running this causes exceed of the max 90min time for a travis job. In general, tests will need to be split (probably with set of more granular include/exclude patterns to fit in.\nScreenshots - ide probe takes screenshots during ui tests, we can make them available to look at for failing tests. We will just need to see how to do this in travis and implement it.", "createdAt": "2020-06-18T14:51:57Z", "url": "https://github.com/pantsbuild/intellij-pants-plugin/pull/540", "merged": true, "mergeCommit": {"oid": "e6af5aa21d17720ac33c1e617fdf74c3e8d761f5"}, "closed": true, "closedAt": "2020-07-08T16:48:52Z", "author": {"login": "lukaszwawrzyk"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcsugp3gBqjM0NjE0MzQzMjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcy9UC8AFqTQ0NDk1MTEyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "830f312eda3330d4551c2fcc290f8f71f34476be", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/830f312eda3330d4551c2fcc290f8f71f34476be", "committedDate": "2020-06-18T14:50:17Z", "message": "setup ideprobe"}, "afterCommit": {"oid": "71b611fabbae11273ec4c02c454ee8bdfbd0c0e4", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/71b611fabbae11273ec4c02c454ee8bdfbd0c0e4", "committedDate": "2020-06-19T08:09:54Z", "message": "setup ideprobe"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "71b611fabbae11273ec4c02c454ee8bdfbd0c0e4", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/71b611fabbae11273ec4c02c454ee8bdfbd0c0e4", "committedDate": "2020-06-19T08:09:54Z", "message": "setup ideprobe"}, "afterCommit": {"oid": "098e8142f0b46b08bd7b4c06bf14e97817e7907c", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/098e8142f0b46b08bd7b4c06bf14e97817e7907c", "committedDate": "2020-06-19T09:33:20Z", "message": "setup ideprobe"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "098e8142f0b46b08bd7b4c06bf14e97817e7907c", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/098e8142f0b46b08bd7b4c06bf14e97817e7907c", "committedDate": "2020-06-19T09:33:20Z", "message": "setup ideprobe"}, "afterCommit": {"oid": "077f1d9e9571fc8c582177981df8d24e8264119a", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/077f1d9e9571fc8c582177981df8d24e8264119a", "committedDate": "2020-06-19T11:38:32Z", "message": "setup ideprobe"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "077f1d9e9571fc8c582177981df8d24e8264119a", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/077f1d9e9571fc8c582177981df8d24e8264119a", "committedDate": "2020-06-19T11:38:32Z", "message": "setup ideprobe"}, "afterCommit": {"oid": "6227ab45d3f205463ef531903b26dc3758fe5887", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/6227ab45d3f205463ef531903b26dc3758fe5887", "committedDate": "2020-06-19T12:02:00Z", "message": "setup ideprobe"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6227ab45d3f205463ef531903b26dc3758fe5887", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/6227ab45d3f205463ef531903b26dc3758fe5887", "committedDate": "2020-06-19T12:02:00Z", "message": "setup ideprobe"}, "afterCommit": {"oid": "e2d0c5ef387177ec13dedf8b2483bef0a41bf55e", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/e2d0c5ef387177ec13dedf8b2483bef0a41bf55e", "committedDate": "2020-06-19T14:37:30Z", "message": "setup ideprobe"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e2d0c5ef387177ec13dedf8b2483bef0a41bf55e", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/e2d0c5ef387177ec13dedf8b2483bef0a41bf55e", "committedDate": "2020-06-19T14:37:30Z", "message": "setup ideprobe"}, "afterCommit": {"oid": "46d3b4720292efeec4e571f7c4bcb85bf8d6c3fd", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/46d3b4720292efeec4e571f7c4bcb85bf8d6c3fd", "committedDate": "2020-06-23T12:41:26Z", "message": "setup ideprobe"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "46d3b4720292efeec4e571f7c4bcb85bf8d6c3fd", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/46d3b4720292efeec4e571f7c4bcb85bf8d6c3fd", "committedDate": "2020-06-23T12:41:26Z", "message": "setup ideprobe"}, "afterCommit": {"oid": "521ac464c4a6ca347131230bfece2dec5eb087d4", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/521ac464c4a6ca347131230bfece2dec5eb087d4", "committedDate": "2020-06-23T14:15:48Z", "message": "setup ideprobe"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a3226e68a810ddd8007faa6e5ad118633c52974", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/6a3226e68a810ddd8007faa6e5ad118633c52974", "committedDate": "2020-06-24T15:11:40Z", "message": "Initial setup of ideprobe"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "521ac464c4a6ca347131230bfece2dec5eb087d4", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/521ac464c4a6ca347131230bfece2dec5eb087d4", "committedDate": "2020-06-23T14:15:48Z", "message": "setup ideprobe"}, "afterCommit": {"oid": "6a3226e68a810ddd8007faa6e5ad118633c52974", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/6a3226e68a810ddd8007faa6e5ad118633c52974", "committedDate": "2020-06-24T15:11:40Z", "message": "Initial setup of ideprobe"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a7e22226561ee67ccdba922dbf9fce74be435e43", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/a7e22226561ee67ccdba922dbf9fce74be435e43", "committedDate": "2020-07-06T13:59:23Z", "message": "Move pants test in"}, "afterCommit": {"oid": "735ada3138250a0b10328dc19f9b8612f1f59410", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/735ada3138250a0b10328dc19f9b8612f1f59410", "committedDate": "2020-07-06T14:03:30Z", "message": "Move pants test in"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "735ada3138250a0b10328dc19f9b8612f1f59410", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/735ada3138250a0b10328dc19f9b8612f1f59410", "committedDate": "2020-07-06T14:03:30Z", "message": "Move pants test in"}, "afterCommit": {"oid": "6729bb54c7d18ee3e13747b6a243e46e494c2338", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/6729bb54c7d18ee3e13747b6a243e46e494c2338", "committedDate": "2020-07-06T14:05:02Z", "message": "Move pants test in"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6729bb54c7d18ee3e13747b6a243e46e494c2338", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/6729bb54c7d18ee3e13747b6a243e46e494c2338", "committedDate": "2020-07-06T14:05:02Z", "message": "Move pants test in"}, "afterCommit": {"oid": "bf483cf32bddad728b3b37d535065c47cd23d69c", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/bf483cf32bddad728b3b37d535065c47cd23d69c", "committedDate": "2020-07-07T08:24:39Z", "message": "Move pants test in"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bf483cf32bddad728b3b37d535065c47cd23d69c", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/bf483cf32bddad728b3b37d535065c47cd23d69c", "committedDate": "2020-07-07T08:24:39Z", "message": "Move pants test in"}, "afterCommit": {"oid": "c6deec6f7a1d7c1334cd233dcdd3f80557b1913a", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/c6deec6f7a1d7c1334cd233dcdd3f80557b1913a", "committedDate": "2020-07-07T08:27:31Z", "message": "Move pants test in"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c6deec6f7a1d7c1334cd233dcdd3f80557b1913a", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/c6deec6f7a1d7c1334cd233dcdd3f80557b1913a", "committedDate": "2020-07-07T08:27:31Z", "message": "Move pants test in"}, "afterCommit": {"oid": "69c158484c754bb74e94dadfed7e56ecc4e1b2e0", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/69c158484c754bb74e94dadfed7e56ecc4e1b2e0", "committedDate": "2020-07-07T11:37:43Z", "message": "Move pants test in"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "69c158484c754bb74e94dadfed7e56ecc4e1b2e0", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/69c158484c754bb74e94dadfed7e56ecc4e1b2e0", "committedDate": "2020-07-07T11:37:43Z", "message": "Move pants test in"}, "afterCommit": {"oid": "b84193c703a796d05e384c0efcbbcf21756d33f5", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/b84193c703a796d05e384c0efcbbcf21756d33f5", "committedDate": "2020-07-07T13:27:33Z", "message": "Move pants test in"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b84193c703a796d05e384c0efcbbcf21756d33f5", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/b84193c703a796d05e384c0efcbbcf21756d33f5", "committedDate": "2020-07-07T13:27:33Z", "message": "Move pants test in"}, "afterCommit": {"oid": "18ef41865446ad4260f3aea57bee6fd2dc15d9d0", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/18ef41865446ad4260f3aea57bee6fd2dc15d9d0", "committedDate": "2020-07-08T11:21:53Z", "message": "Move pants test in"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "18ef41865446ad4260f3aea57bee6fd2dc15d9d0", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/18ef41865446ad4260f3aea57bee6fd2dc15d9d0", "committedDate": "2020-07-08T11:21:53Z", "message": "Move pants test in"}, "afterCommit": {"oid": "6e37948626d30c5dc1c76bb5e43de0565598d667", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/6e37948626d30c5dc1c76bb5e43de0565598d667", "committedDate": "2020-07-08T12:31:21Z", "message": "Move pants test in"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2bd3a689002cd6f46ff5110a7f4620f25ef14c3", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/c2bd3a689002cd6f46ff5110a7f4620f25ef14c3", "committedDate": "2020-07-08T14:16:29Z", "message": "Move pants test in"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6e37948626d30c5dc1c76bb5e43de0565598d667", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/6e37948626d30c5dc1c76bb5e43de0565598d667", "committedDate": "2020-07-08T12:31:21Z", "message": "Move pants test in"}, "afterCommit": {"oid": "c2bd3a689002cd6f46ff5110a7f4620f25ef14c3", "author": {"user": {"login": "lukaszwawrzyk", "name": "\u0141ukasz Wawrzyk"}}, "url": "https://github.com/pantsbuild/intellij-pants-plugin/commit/c2bd3a689002cd6f46ff5110a7f4620f25ef14c3", "committedDate": "2020-07-08T14:16:29Z", "message": "Move pants test in"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0OTUxMTIz", "url": "https://github.com/pantsbuild/intellij-pants-plugin/pull/540#pullrequestreview-444951123", "createdAt": "2020-07-08T16:47:58Z", "commit": {"oid": "c2bd3a689002cd6f46ff5110a7f4620f25ef14c3"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQxNjo0Nzo1OFrOGuwtzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQxNjo0Nzo1OFrOGuwtzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTY4NTgzNg==", "bodyText": "Note that the plugin built by Pants is still via JDK 8, in case any discrepancy occurs in the future.", "url": "https://github.com/pantsbuild/intellij-pants-plugin/pull/540#discussion_r451685836", "createdAt": "2020-07-08T16:47:58Z", "author": {"login": "wisechengyi"}, "path": "ideprobe/Dockerfile", "diffHunk": "@@ -0,0 +1,13 @@\n+FROM openjdk:11", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2bd3a689002cd6f46ff5110a7f4620f25ef14c3"}, "originalPosition": 1}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1897, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}