{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYyMDIzODM4", "number": 476, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxMzoyMDowNFrODXhGxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwMzo0MTo0OFrODXuZWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1OTg2MjQ1OnYy", "diffSide": "RIGHT", "path": "src/com/twitter/intellij/pants/file/FileChangeTracker.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxMzoyMDowNFrOFc2lxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxMzo0MzoyMVrOFc3QbQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTc5ODg1Mg==", "bodyText": "Can be private", "url": "https://github.com/pantsbuild/intellij-pants-plugin/pull/476#discussion_r365798852", "createdAt": "2020-01-13T13:20:04Z", "author": {"login": "lukaszwawrzyk"}, "path": "src/com/twitter/intellij/pants/file/FileChangeTracker.java", "diffHunk": "@@ -298,36 +297,41 @@ public static void unregisterProject(@NotNull Project project) {\n       });\n   }\n \n-  private static VirtualFileListener getNewListener() {\n+  private static VirtualFileListener getNewListener(final PantsOptions pantsOptions) {\n     return new VirtualFileListener() {\n+\n+      void markDirty(VirtualFile file) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a676a270677f2577a7286a3cab0741e42374216"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgwOTc3Mw==", "bodyText": "Done", "url": "https://github.com/pantsbuild/intellij-pants-plugin/pull/476#discussion_r365809773", "createdAt": "2020-01-13T13:43:21Z", "author": {"login": "tpasternak"}, "path": "src/com/twitter/intellij/pants/file/FileChangeTracker.java", "diffHunk": "@@ -298,36 +297,41 @@ public static void unregisterProject(@NotNull Project project) {\n       });\n   }\n \n-  private static VirtualFileListener getNewListener() {\n+  private static VirtualFileListener getNewListener(final PantsOptions pantsOptions) {\n     return new VirtualFileListener() {\n+\n+      void markDirty(VirtualFile file) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTc5ODg1Mg=="}, "originalCommit": {"oid": "1a676a270677f2577a7286a3cab0741e42374216"}, "originalPosition": 51}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1OTg2NDA5OnYy", "diffSide": "RIGHT", "path": "src/com/twitter/intellij/pants/service/project/metadata/PantsMetadataService.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxMzoyMDozOFrOFc2mtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxMzo0MzoyN1rOFc3QnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTc5OTA5NQ==", "bodyText": "All these new imports are suspicious as there are no further changes in this file", "url": "https://github.com/pantsbuild/intellij-pants-plugin/pull/476#discussion_r365799095", "createdAt": "2020-01-13T13:20:38Z", "author": {"login": "lukaszwawrzyk"}, "path": "src/com/twitter/intellij/pants/service/project/metadata/PantsMetadataService.java", "diffHunk": "@@ -11,16 +12,23 @@\n import com.intellij.openapi.module.Module;\n import com.intellij.openapi.project.Project;\n import com.intellij.openapi.util.Computable;\n+import com.intellij.openapi.vfs.VirtualFile;\n+import com.twitter.intellij.pants.file.FileChangeTracker;\n+import com.twitter.intellij.pants.model.PantsOptions;\n import com.twitter.intellij.pants.service.project.PantsResolver;\n+import com.twitter.intellij.pants.settings.PantsProjectSettings;\n import com.twitter.intellij.pants.settings.PantsSettings;\n import com.twitter.intellij.pants.util.PantsConstants;\n import com.twitter.intellij.pants.util.PantsUtil;\n import org.jetbrains.annotations.NotNull;\n import org.jetbrains.annotations.Nullable;\n import com.google.gson.Gson;\n \n+import java.util.ArrayList;\n import java.util.Collection;\n import java.util.Collections;\n+import java.util.List;\n+import java.util.Optional;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a676a270677f2577a7286a3cab0741e42374216"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgwOTgyMA==", "bodyText": "Done", "url": "https://github.com/pantsbuild/intellij-pants-plugin/pull/476#discussion_r365809820", "createdAt": "2020-01-13T13:43:27Z", "author": {"login": "tpasternak"}, "path": "src/com/twitter/intellij/pants/service/project/metadata/PantsMetadataService.java", "diffHunk": "@@ -11,16 +12,23 @@\n import com.intellij.openapi.module.Module;\n import com.intellij.openapi.project.Project;\n import com.intellij.openapi.util.Computable;\n+import com.intellij.openapi.vfs.VirtualFile;\n+import com.twitter.intellij.pants.file.FileChangeTracker;\n+import com.twitter.intellij.pants.model.PantsOptions;\n import com.twitter.intellij.pants.service.project.PantsResolver;\n+import com.twitter.intellij.pants.settings.PantsProjectSettings;\n import com.twitter.intellij.pants.settings.PantsSettings;\n import com.twitter.intellij.pants.util.PantsConstants;\n import com.twitter.intellij.pants.util.PantsUtil;\n import org.jetbrains.annotations.NotNull;\n import org.jetbrains.annotations.Nullable;\n import com.google.gson.Gson;\n \n+import java.util.ArrayList;\n import java.util.Collection;\n import java.util.Collections;\n+import java.util.List;\n+import java.util.Optional;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTc5OTA5NQ=="}, "originalCommit": {"oid": "1a676a270677f2577a7286a3cab0741e42374216"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1OTg2NTE4OnYy", "diffSide": "RIGHT", "path": "src/com/twitter/intellij/pants/file/FileChangeTracker.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxMzoyMTowMFrOFc2nXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxMzo0Mzo0NVrOFc3RLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTc5OTI2Mw==", "bodyText": "You can run formatter on this file", "url": "https://github.com/pantsbuild/intellij-pants-plugin/pull/476#discussion_r365799263", "createdAt": "2020-01-13T13:21:00Z", "author": {"login": "lukaszwawrzyk"}, "path": "src/com/twitter/intellij/pants/file/FileChangeTracker.java", "diffHunk": "@@ -104,10 +104,10 @@ public FileChangeTracker getInstance() {\n     return instance;\n   }\n \n-  private static void markDirty(@NotNull VirtualFile file, @NotNull VirtualFileListener listener) {\n+  private static void markDirty(@NotNull VirtualFile file,final PantsOptions pantsOptions, @NotNull VirtualFileListener listener) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a676a270677f2577a7286a3cab0741e42374216"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgwOTk2NA==", "bodyText": "Done", "url": "https://github.com/pantsbuild/intellij-pants-plugin/pull/476#discussion_r365809964", "createdAt": "2020-01-13T13:43:45Z", "author": {"login": "tpasternak"}, "path": "src/com/twitter/intellij/pants/file/FileChangeTracker.java", "diffHunk": "@@ -104,10 +104,10 @@ public FileChangeTracker getInstance() {\n     return instance;\n   }\n \n-  private static void markDirty(@NotNull VirtualFile file, @NotNull VirtualFileListener listener) {\n+  private static void markDirty(@NotNull VirtualFile file,final PantsOptions pantsOptions, @NotNull VirtualFileListener listener) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTc5OTI2Mw=="}, "originalCommit": {"oid": "1a676a270677f2577a7286a3cab0741e42374216"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1OTg2NjYwOnYy", "diffSide": "RIGHT", "path": "src/com/twitter/intellij/pants/components/impl/PantsProjectComponentImpl.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxMzoyMToyOVrOFc2oLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxMzo0Mzo1MFrOFc3RUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTc5OTQ3MA==", "bodyText": "contains", "url": "https://github.com/pantsbuild/intellij-pants-plugin/pull/476#discussion_r365799470", "createdAt": "2020-01-13T13:21:29Z", "author": {"login": "lukaszwawrzyk"}, "path": "src/com/twitter/intellij/pants/components/impl/PantsProjectComponentImpl.java", "diffHunk": "@@ -188,6 +193,46 @@ private void prepareGuiComponents() {\n           }\n         }\n \n+\n+        /**\n+         * VSF tracker implementation requires PantsOptions object, that cannot be constructed in\n+         * the Event Dispatch Thread. What is more, it can't be constructed if the project contain", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a676a270677f2577a7286a3cab0741e42374216"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgxMDAwMw==", "bodyText": "Done", "url": "https://github.com/pantsbuild/intellij-pants-plugin/pull/476#discussion_r365810003", "createdAt": "2020-01-13T13:43:50Z", "author": {"login": "tpasternak"}, "path": "src/com/twitter/intellij/pants/components/impl/PantsProjectComponentImpl.java", "diffHunk": "@@ -188,6 +193,46 @@ private void prepareGuiComponents() {\n           }\n         }\n \n+\n+        /**\n+         * VSF tracker implementation requires PantsOptions object, that cannot be constructed in\n+         * the Event Dispatch Thread. What is more, it can't be constructed if the project contain", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTc5OTQ3MA=="}, "originalCommit": {"oid": "1a676a270677f2577a7286a3cab0741e42374216"}, "originalPosition": 45}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1OTg3MDgwOnYy", "diffSide": "RIGHT", "path": "src/com/twitter/intellij/pants/components/impl/PantsProjectComponentImpl.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxMzoyMjo1NlrOFc2qfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxMzo0Mzo1NFrOFc3RbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgwMDA2Mw==", "bodyText": "This is redundant", "url": "https://github.com/pantsbuild/intellij-pants-plugin/pull/476#discussion_r365800063", "createdAt": "2020-01-13T13:22:56Z", "author": {"login": "lukaszwawrzyk"}, "path": "src/com/twitter/intellij/pants/components/impl/PantsProjectComponentImpl.java", "diffHunk": "@@ -188,6 +193,46 @@ private void prepareGuiComponents() {\n           }\n         }\n \n+\n+        /**\n+         * VSF tracker implementation requires PantsOptions object, that cannot be constructed in\n+         * the Event Dispatch Thread. What is more, it can't be constructed if the project contain\n+         * no modules, and cannot be registered twice. Hence, there are two cases when VFS tracker is\n+         * needed:\n+         *   1. When the Pants project is opened and it already contains modules - then we can register tracker immediately\n+         *   2. When the Pants project is opened, but modules are not loaded yet - then we have to wait until a module is loaded\n+         * @param project", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a676a270677f2577a7286a3cab0741e42374216"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgxMDAyOA==", "bodyText": "Done", "url": "https://github.com/pantsbuild/intellij-pants-plugin/pull/476#discussion_r365810028", "createdAt": "2020-01-13T13:43:54Z", "author": {"login": "tpasternak"}, "path": "src/com/twitter/intellij/pants/components/impl/PantsProjectComponentImpl.java", "diffHunk": "@@ -188,6 +193,46 @@ private void prepareGuiComponents() {\n           }\n         }\n \n+\n+        /**\n+         * VSF tracker implementation requires PantsOptions object, that cannot be constructed in\n+         * the Event Dispatch Thread. What is more, it can't be constructed if the project contain\n+         * no modules, and cannot be registered twice. Hence, there are two cases when VFS tracker is\n+         * needed:\n+         *   1. When the Pants project is opened and it already contains modules - then we can register tracker immediately\n+         *   2. When the Pants project is opened, but modules are not loaded yet - then we have to wait until a module is loaded\n+         * @param project", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgwMDA2Mw=="}, "originalCommit": {"oid": "1a676a270677f2577a7286a3cab0741e42374216"}, "originalPosition": 50}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI1OTg3NDg0OnYy", "diffSide": "RIGHT", "path": "src/com/twitter/intellij/pants/components/impl/PantsProjectComponentImpl.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxMzoyNDoxOFrOFc2s8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxMzo0Mzo1OFrOFc3Rjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgwMDY4OA==", "bodyText": "Also run formatter on this file", "url": "https://github.com/pantsbuild/intellij-pants-plugin/pull/476#discussion_r365800688", "createdAt": "2020-01-13T13:24:18Z", "author": {"login": "lukaszwawrzyk"}, "path": "src/com/twitter/intellij/pants/components/impl/PantsProjectComponentImpl.java", "diffHunk": "@@ -188,6 +193,46 @@ private void prepareGuiComponents() {\n           }\n         }\n \n+\n+        /**\n+         * VSF tracker implementation requires PantsOptions object, that cannot be constructed in\n+         * the Event Dispatch Thread. What is more, it can't be constructed if the project contain\n+         * no modules, and cannot be registered twice. Hence, there are two cases when VFS tracker is\n+         * needed:\n+         *   1. When the Pants project is opened and it already contains modules - then we can register tracker immediately\n+         *   2. When the Pants project is opened, but modules are not loaded yet - then we have to wait until a module is loaded\n+         * @param project\n+         */\n+        private void registerVfsListener(Project project) {\n+          if(ModuleManager.getInstance(project).getModules().length > 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a676a270677f2577a7286a3cab0741e42374216"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgxMDA2Mw==", "bodyText": "Done", "url": "https://github.com/pantsbuild/intellij-pants-plugin/pull/476#discussion_r365810063", "createdAt": "2020-01-13T13:43:58Z", "author": {"login": "tpasternak"}, "path": "src/com/twitter/intellij/pants/components/impl/PantsProjectComponentImpl.java", "diffHunk": "@@ -188,6 +193,46 @@ private void prepareGuiComponents() {\n           }\n         }\n \n+\n+        /**\n+         * VSF tracker implementation requires PantsOptions object, that cannot be constructed in\n+         * the Event Dispatch Thread. What is more, it can't be constructed if the project contain\n+         * no modules, and cannot be registered twice. Hence, there are two cases when VFS tracker is\n+         * needed:\n+         *   1. When the Pants project is opened and it already contains modules - then we can register tracker immediately\n+         *   2. When the Pants project is opened, but modules are not loaded yet - then we have to wait until a module is loaded\n+         * @param project\n+         */\n+        private void registerVfsListener(Project project) {\n+          if(ModuleManager.getInstance(project).getModules().length > 0) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgwMDY4OA=="}, "originalCommit": {"oid": "1a676a270677f2577a7286a3cab0741e42374216"}, "originalPosition": 53}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2MjAzOTkzOnYy", "diffSide": "RIGHT", "path": "src/com/twitter/intellij/pants/service/project/metadata/PantsMetadataService.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwMzo0MTo0OFrOFdLayA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwMzo0MTo0OFrOFdLayA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjE0MDEwNA==", "bodyText": "no change in this file.", "url": "https://github.com/pantsbuild/intellij-pants-plugin/pull/476#discussion_r366140104", "createdAt": "2020-01-14T03:41:48Z", "author": {"login": "wisechengyi"}, "path": "src/com/twitter/intellij/pants/service/project/metadata/PantsMetadataService.java", "diffHunk": "@@ -3,6 +3,7 @@\n \n package com.twitter.intellij.pants.service.project.metadata;\n \n+import com.intellij.openapi.application.ApplicationManager;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf35b1cb53a004ccefb8bd6920673fb97c4123f4"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2033, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}