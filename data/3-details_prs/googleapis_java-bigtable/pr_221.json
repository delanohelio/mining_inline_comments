{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwNTY0NzY4", "number": 221, "title": "chore: clean up synth.py script with newer tooling", "bodyText": "", "createdAt": "2020-03-18T17:18:15Z", "url": "https://github.com/googleapis/java-bigtable/pull/221", "merged": true, "mergeCommit": {"oid": "0a9d13d60e6715c81e0313dada2c4ad8c66fa268"}, "closed": true, "closedAt": "2020-03-24T14:56:44Z", "author": {"login": "kolea2"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcO6mpsAH2gAyMzkwNTY0NzY4OmQ2NzRhMmYzNWJiYmM3MWYzNjUxYWU5YTVmY2MyY2I2OWQ2ZGNjNmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQiMfQgFqTM3OTY4NDExMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d674a2f35bbbc71f3651ae9a5fcc2cb69d6dcc6b", "author": {"user": {"login": "kolea2", "name": null}}, "url": "https://github.com/googleapis/java-bigtable/commit/d674a2f35bbbc71f3651ae9a5fcc2cb69d6dcc6b", "committedDate": "2020-03-18T17:17:44Z", "message": "chore: clean up synth.py script with newer tooling"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49e166762c6e6425be23daca22887891d7bedd55", "author": {"user": {"login": "kolea2", "name": null}}, "url": "https://github.com/googleapis/java-bigtable/commit/49e166762c6e6425be23daca22887891d7bedd55", "committedDate": "2020-03-18T17:27:19Z", "message": "chore: clean up synth.py script with newer tooling"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MjA0Njg5", "url": "https://github.com/googleapis/java-bigtable/pull/221#pullrequestreview-377204689", "createdAt": "2020-03-18T20:19:16Z", "commit": {"oid": "49e166762c6e6425be23daca22887891d7bedd55"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQyMDoxOToxNlrOF4VZPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQyMDoxOToxNlrOF4VZPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDYxNTEwMA==", "bodyText": "The java.gapic_library() helper won't exclude these files", "url": "https://github.com/googleapis/java-bigtable/pull/221#discussion_r394615100", "createdAt": "2020-03-18T20:19:16Z", "author": {"login": "chingor13"}, "path": "synth.py", "diffHunk": "@@ -86,32 +69,16 @@ def generate_data_api(gapic, license):\n     \"google-cloud-bigtable/src/main/java/com/google/cloud/bigtable/data/v2/stub/GrpcBigtableCallableFactory.java\",\n   ]\n \n-  package_name = f'com.google.cloud.bigtable.v2'\n-  java.fix_proto_headers(library / f'proto-google-cloud-bigtable-v2')\n-  # java.fix_grpc_headers(library / f'grpc-google-cloud-bigtable-v2', package_name)\n-\n-  ##todo replace with fix_grpc_headers\n-  s.replace(\n-      library / f'grpc-google-cloud-bigtable-v2/src/**/*.java',\n-      f\"package com.google.bigtable.v2;\",\n-      f\"{license}package com.google.bigtable.v2;\"\n-  )\n-  s.copy(library / f'gapic-google-cloud-bigtable-v2', 'google-cloud-bigtable/', excludes=excludes)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49e166762c6e6425be23daca22887891d7bedd55"}, "originalPosition": 65}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3Nzc1Mjk5", "url": "https://github.com/googleapis/java-bigtable/pull/221#pullrequestreview-377775299", "createdAt": "2020-03-19T14:31:07Z", "commit": {"oid": "49e166762c6e6425be23daca22887891d7bedd55"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNDozMTowN1rOF4xIhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQxNDozMTowN1rOF4xIhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTA2OTU3NQ==", "bodyText": "I don't think this will put these files in the right place. java-bigtable is a single artifact that contains clients for both admin & data. Which is why all of the explicit copies were added", "url": "https://github.com/googleapis/java-bigtable/pull/221#discussion_r395069575", "createdAt": "2020-03-19T14:31:07Z", "author": {"login": "igorbernstein2"}, "path": "synth.py", "diffHunk": "@@ -86,32 +69,16 @@ def generate_data_api(gapic, license):\n     \"google-cloud-bigtable/src/main/java/com/google/cloud/bigtable/data/v2/stub/GrpcBigtableCallableFactory.java\",\n   ]\n \n-  package_name = f'com.google.cloud.bigtable.v2'\n-  java.fix_proto_headers(library / f'proto-google-cloud-bigtable-v2')\n-  # java.fix_grpc_headers(library / f'grpc-google-cloud-bigtable-v2', package_name)\n-\n-  ##todo replace with fix_grpc_headers\n-  s.replace(\n-      library / f'grpc-google-cloud-bigtable-v2/src/**/*.java',\n-      f\"package com.google.bigtable.v2;\",\n-      f\"{license}package com.google.bigtable.v2;\"\n-  )\n-  s.copy(library / f'gapic-google-cloud-bigtable-v2', 'google-cloud-bigtable/', excludes=excludes)\n-  s.copy(library / f'grpc-google-cloud-bigtable-v2/src', f'grpc-google-cloud-bigtable-v2/src')\n-  s.copy(library / f'proto-google-cloud-bigtable-v2/src', f'proto-google-cloud-bigtable-v2/src')\n-\n   make_internal_only(internal_only)\n \n-  java.format_code(f'./grpc-google-cloud-bigtable-v2/src')\n-  java.format_code(f'./proto-google-cloud-bigtable-v2/src')\n-\n-\n-def generate_admin_api(gapic, license):\n-  library = gapic.java_library(\n-      service='bigtable-admin',\n-      version='v2',\n-      config_path='/google/bigtable/admin/artman_bigtableadmin.yaml',\n-      artman_output_name='')\n+def generate_admin_api(gapic):\n+  java.gapic_library(\n+        service='bigtable-admin',\n+        version='v2',\n+        config_pattern='/google/bigtable/admin/artman_bigtableadmin.yaml',\n+        package_pattern='com.google.bigtable.v2',\n+        gapic=gapic,\n+  )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49e166762c6e6425be23daca22887891d7bedd55"}, "originalPosition": 88}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0911b64475f06d5db0bb275574f53431fd75b8ef", "author": {"user": {"login": "kolea2", "name": null}}, "url": "https://github.com/googleapis/java-bigtable/commit/0911b64475f06d5db0bb275574f53431fd75b8ef", "committedDate": "2020-03-20T14:02:03Z", "message": "update based on review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5Njg0MTEy", "url": "https://github.com/googleapis/java-bigtable/pull/221#pullrequestreview-379684112", "createdAt": "2020-03-23T17:59:17Z", "commit": {"oid": "0911b64475f06d5db0bb275574f53431fd75b8ef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1146, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}