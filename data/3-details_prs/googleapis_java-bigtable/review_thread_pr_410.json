{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgyMTI2Mjk1", "number": 410, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQyMjozOTowNlrOEhcDxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMlQwMDoyOTo1OVrOEiudRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzNDk4MTgwOnYy", "diffSide": "RIGHT", "path": "google-cloud-bigtable/src/main/java/com/google/cloud/bigtable/data/v2/BigtableDataClient.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQyMjozOTowNlrOHOwTZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQwOTo0MDo1OFrOHO_VqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTIzMzUwOA==", "bodyText": "This isnt quite right.\nThe main issue is that Bigtable ReadRows must return row in lexicographic  row key order. Which means that the keys will be processed sequentially on the serverside. So batching works best when the caller cares more about throughput than latency and the keys are grouped together.\nIf the caller cares more about latency then sending smaller concurrent request is better", "url": "https://github.com/googleapis/java-bigtable/pull/410#discussion_r485233508", "createdAt": "2020-09-08T22:39:06Z", "author": {"login": "igorbernstein2"}, "path": "google-cloud-bigtable/src/main/java/com/google/cloud/bigtable/data/v2/BigtableDataClient.java", "diffHunk": "@@ -1077,9 +1077,9 @@ public void bulkMutateRows(BulkMutation mutation) {\n   }\n \n   /**\n-   * Reads rows for given tableId in a batch. If the row does not exist, the value will be null.\n-   * This operation should be called with in a single thread. The returned Batcher instance is not\n-   * threadsafe, it can only be used from single thread.\n+   * Reads rows for given tableId in a batch. If the row does not exist, the value will be null. The\n+   * keys are processed sequentially one by one in the order they are passed to the Batcher. The\n+   * returned Batcher instance is not threadsafe, it can only be used from a single thread.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "57c4987fc285458f30c49e83a2576218915525c9"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTQ3OTg0OQ==", "bodyText": "Thanks for the clarification, now I see what this issue is about.\nPlease take a look at the updated variant.", "url": "https://github.com/googleapis/java-bigtable/pull/410#discussion_r485479849", "createdAt": "2020-09-09T09:40:58Z", "author": {"login": "dmitry-fa"}, "path": "google-cloud-bigtable/src/main/java/com/google/cloud/bigtable/data/v2/BigtableDataClient.java", "diffHunk": "@@ -1077,9 +1077,9 @@ public void bulkMutateRows(BulkMutation mutation) {\n   }\n \n   /**\n-   * Reads rows for given tableId in a batch. If the row does not exist, the value will be null.\n-   * This operation should be called with in a single thread. The returned Batcher instance is not\n-   * threadsafe, it can only be used from single thread.\n+   * Reads rows for given tableId in a batch. If the row does not exist, the value will be null. The\n+   * keys are processed sequentially one by one in the order they are passed to the Batcher. The\n+   * returned Batcher instance is not threadsafe, it can only be used from a single thread.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTIzMzUwOA=="}, "originalCommit": {"oid": "57c4987fc285458f30c49e83a2576218915525c9"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0ODQ4MTk3OnYy", "diffSide": "RIGHT", "path": "google-cloud-bigtable/src/main/java/com/google/cloud/bigtable/data/v2/BigtableDataClient.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMlQwMDoyOTo1OVrOHQxDug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQwOTowMTozM1rOHRKdRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzM0MzAzNA==", "bodyText": "How about \"Lower latencies can be achieved by sending smaller requests concurrently.\" ?", "url": "https://github.com/googleapis/java-bigtable/pull/410#discussion_r487343034", "createdAt": "2020-09-12T00:29:59Z", "author": {"login": "vermas2012"}, "path": "google-cloud-bigtable/src/main/java/com/google/cloud/bigtable/data/v2/BigtableDataClient.java", "diffHunk": "@@ -1113,8 +1117,13 @@ public void bulkMutateRows(BulkMutation mutation) {\n \n   /**\n    * Reads rows for given tableId and filter criteria in a batch. If the row does not exist, the\n-   * value will be null. This operation should be called with in a single thread. The returned\n-   * Batcher instance is not threadsafe, it can only be used from single thread.\n+   * value will be null. The returned Batcher instance is not threadsafe, it can only be used from a\n+   * single thread.\n+   *\n+   * <p>Performance notice: The ReadRows protocol requires that rows are sent in ascending key\n+   * order, which means that the keys are processed sequentially on the server-side, so batching\n+   * allows improving throughput but not latency. Low latency might be achieved if send smaller\n+   * requests concurrently.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d06b02a4b1e4183e2609685e78af99807671df0b"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Nzc1OTE3Mw==", "bodyText": "Agree, sounds much better.", "url": "https://github.com/googleapis/java-bigtable/pull/410#discussion_r487759173", "createdAt": "2020-09-14T09:01:33Z", "author": {"login": "dmitry-fa"}, "path": "google-cloud-bigtable/src/main/java/com/google/cloud/bigtable/data/v2/BigtableDataClient.java", "diffHunk": "@@ -1113,8 +1117,13 @@ public void bulkMutateRows(BulkMutation mutation) {\n \n   /**\n    * Reads rows for given tableId and filter criteria in a batch. If the row does not exist, the\n-   * value will be null. This operation should be called with in a single thread. The returned\n-   * Batcher instance is not threadsafe, it can only be used from single thread.\n+   * value will be null. The returned Batcher instance is not threadsafe, it can only be used from a\n+   * single thread.\n+   *\n+   * <p>Performance notice: The ReadRows protocol requires that rows are sent in ascending key\n+   * order, which means that the keys are processed sequentially on the server-side, so batching\n+   * allows improving throughput but not latency. Low latency might be achieved if send smaller\n+   * requests concurrently.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzM0MzAzNA=="}, "originalCommit": {"oid": "d06b02a4b1e4183e2609685e78af99807671df0b"}, "originalPosition": 38}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3387, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}