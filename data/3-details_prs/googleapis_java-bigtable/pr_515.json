{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE2MjcyMTEz", "number": 515, "title": "feat: allow restore backup to different instance", "bodyText": "Thank you for opening a Pull Request! Before submitting your PR, there are a few things you can do to make sure it goes smoothly:\n\n Make sure to open an issue as a bug/issue before writing your code!  That way we can discuss the change, evaluate designs, and agree on the general idea\n Ensure the tests and linter pass\n Code coverage does not decrease (if any source code was changed)\n Appropriate docs were updated (if necessary)\n\nFixes #789\nkokoro:force-run", "createdAt": "2020-11-05T18:58:27Z", "url": "https://github.com/googleapis/java-bigtable/pull/515", "merged": true, "mergeCommit": {"oid": "8a5e60e8ed116d36810cc4059539228768726912"}, "closed": true, "closedAt": "2021-04-30T14:44:03Z", "author": {"login": "liubonan"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZ6Yr8AFqTUyNTM1MjM0Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABeSM0ywgFqTY0OTI4MDc4MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1MzUyMzQy", "url": "https://github.com/googleapis/java-bigtable/pull/515#pullrequestreview-525352342", "createdAt": "2020-11-06T17:26:01Z", "commit": {"oid": "8146fb3cde20ac206d939050820db73b1238c6e2"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxNzoyNjowMVrOHu27og==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxNzoyNjo0NFrOHu29Rg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODg5NjU0Ng==", "bodyText": "what are your thoughts on renaming sourceInstanceId to destinationInstanceId, or targetInstanceId? 'source' is a little confusing to me", "url": "https://github.com/googleapis/java-bigtable/pull/515#discussion_r518896546", "createdAt": "2020-11-06T17:26:01Z", "author": {"login": "kolea2"}, "path": "google-cloud-bigtable/src/main/java/com/google/cloud/bigtable/admin/v2/models/RestoreTableRequest.java", "diffHunk": "@@ -20,24 +20,47 @@\n import com.google.common.base.Objects;\n import com.google.common.base.Preconditions;\n import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n \n /** Fluent wrapper for {@link com.google.bigtable.admin.v2.RestoreTableRequest} */\n public final class RestoreTableRequest {\n   private final com.google.bigtable.admin.v2.RestoreTableRequest.Builder requestBuilder =\n       com.google.bigtable.admin.v2.RestoreTableRequest.newBuilder();\n-  private final String backupId;\n-  private final String clusterId;\n+  private final String sourceBackupId;\n+  private final String sourceClusterId;\n+  private final String sourceInstanceId;\n \n-  public static RestoreTableRequest of(String clusterId, String backupId) {\n-    RestoreTableRequest request = new RestoreTableRequest(clusterId, backupId);\n+  /**\n+   * Create a {@link RestoreTableRequest} object. It assumes the source backup locates in the same\n+   * instance as the destination table. To restore a table from a backup in another instance, use\n+   * {@link #of(String, String, String) of} method.\n+   */\n+  public static RestoreTableRequest of(String sourceClusterId, String sourceBackupId) {\n+    RestoreTableRequest request = new RestoreTableRequest(null, sourceClusterId, sourceBackupId);\n     return request;\n   }\n \n-  private RestoreTableRequest(String clusterId, String backupId) {\n-    Preconditions.checkNotNull(clusterId);\n-    Preconditions.checkNotNull(backupId);\n-    this.backupId = backupId;\n-    this.clusterId = clusterId;\n+  /**\n+   * Create a {@link RestoreTableRequest} object. It assumes the source backup locates in the same\n+   * instance as the destination table. To restore a table from a backup in another instance, use\n+   * {@link #of(String, String, String) of} method.\n+   */\n+  public static RestoreTableRequest of(\n+      String sourceInstanceId, String sourceClusterId, String sourceBackupId) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8146fb3cde20ac206d939050820db73b1238c6e2"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODg5Njk2Ng==", "bodyText": "FYI, this will need to be rebased when #498 is merged", "url": "https://github.com/googleapis/java-bigtable/pull/515#discussion_r518896966", "createdAt": "2020-11-06T17:26:44Z", "author": {"login": "kolea2"}, "path": "google-cloud-bigtable/src/test/java/com/google/cloud/bigtable/admin/v2/it/BigtableBackupIT.java", "diffHunk": "@@ -360,6 +362,55 @@ public void backupIamTest() throws InterruptedException {\n     assertThat(permissions).hasSize(4);\n   }\n \n+  @Test", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8146fb3cde20ac206d939050820db73b1238c6e2"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0MjAzNDMz", "url": "https://github.com/googleapis/java-bigtable/pull/515#pullrequestreview-554203433", "createdAt": "2020-12-17T00:58:54Z", "commit": {"oid": "8146fb3cde20ac206d939050820db73b1238c6e2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ef7e588495a6bf581927b9e3379ef624d8b950d3", "author": {"user": {"login": "liubonan", "name": "Bonan Liu"}}, "url": "https://github.com/googleapis/java-bigtable/commit/ef7e588495a6bf581927b9e3379ef624d8b950d3", "committedDate": "2021-01-15T22:42:56Z", "message": "Merge remote-tracking branch 'upstream/master'"}, "afterCommit": {"oid": "d23bb2074ae308f20861317020a26173e7b7a0a9", "author": {"user": {"login": "liubonan", "name": "Bonan Liu"}}, "url": "https://github.com/googleapis/java-bigtable/commit/d23bb2074ae308f20861317020a26173e7b7a0a9", "committedDate": "2021-01-20T20:02:40Z", "message": "feat: allow restore backup to different instance"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d23bb2074ae308f20861317020a26173e7b7a0a9", "author": {"user": {"login": "liubonan", "name": "Bonan Liu"}}, "url": "https://github.com/googleapis/java-bigtable/commit/d23bb2074ae308f20861317020a26173e7b7a0a9", "committedDate": "2021-01-20T20:02:40Z", "message": "feat: allow restore backup to different instance"}, "afterCommit": {"oid": "effb896ed4e2fdb49f646549ba0c800e189e2a8f", "author": {"user": {"login": "liubonan", "name": "Bonan Liu"}}, "url": "https://github.com/googleapis/java-bigtable/commit/effb896ed4e2fdb49f646549ba0c800e189e2a8f", "committedDate": "2021-01-20T20:08:11Z", "message": "feat: allow restore backup to different instance"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "042ed7619bbdb061e36e0f91a3019b813f366827", "author": {"user": {"login": "liubonan", "name": "Bonan Liu"}}, "url": "https://github.com/googleapis/java-bigtable/commit/042ed7619bbdb061e36e0f91a3019b813f366827", "committedDate": "2021-01-20T20:09:27Z", "message": "feat: allow restore backup to different instance"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "effb896ed4e2fdb49f646549ba0c800e189e2a8f", "author": {"user": {"login": "liubonan", "name": "Bonan Liu"}}, "url": "https://github.com/googleapis/java-bigtable/commit/effb896ed4e2fdb49f646549ba0c800e189e2a8f", "committedDate": "2021-01-20T20:08:11Z", "message": "feat: allow restore backup to different instance"}, "afterCommit": {"oid": "042ed7619bbdb061e36e0f91a3019b813f366827", "author": {"user": {"login": "liubonan", "name": "Bonan Liu"}}, "url": "https://github.com/googleapis/java-bigtable/commit/042ed7619bbdb061e36e0f91a3019b813f366827", "committedDate": "2021-01-20T20:09:27Z", "message": "feat: allow restore backup to different instance"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjQ2MzM2Mzgx", "url": "https://github.com/googleapis/java-bigtable/pull/515#pullrequestreview-646336381", "createdAt": "2021-04-27T20:36:52Z", "commit": {"oid": "042ed7619bbdb061e36e0f91a3019b813f366827"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNC0yN1QyMDozNjo1MlrOJQyW8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wNC0yN1QyMDozNzoyNVrOJQyYSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMTU4MjA2Nw==", "bodyText": "nit: this javadoc needs updating", "url": "https://github.com/googleapis/java-bigtable/pull/515#discussion_r621582067", "createdAt": "2021-04-27T20:36:52Z", "author": {"login": "kolea2"}, "path": "google-cloud-bigtable/src/main/java/com/google/cloud/bigtable/admin/v2/models/RestoreTableRequest.java", "diffHunk": "@@ -20,24 +20,47 @@\n import com.google.common.base.Objects;\n import com.google.common.base.Preconditions;\n import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n \n /** Fluent wrapper for {@link com.google.bigtable.admin.v2.RestoreTableRequest} */\n public final class RestoreTableRequest {\n   private final com.google.bigtable.admin.v2.RestoreTableRequest.Builder requestBuilder =\n       com.google.bigtable.admin.v2.RestoreTableRequest.newBuilder();\n-  private final String backupId;\n-  private final String clusterId;\n+  private final String sourceBackupId;\n+  private final String sourceClusterId;\n+  private final String sourceInstanceId;\n \n-  public static RestoreTableRequest of(String clusterId, String backupId) {\n-    RestoreTableRequest request = new RestoreTableRequest(clusterId, backupId);\n+  /**\n+   * Create a {@link RestoreTableRequest} object. It assumes the source backup locates in the same\n+   * instance as the destination table. To restore a table from a backup in another instance, use\n+   * {@link #of(String, String, String) of} method.\n+   */\n+  public static RestoreTableRequest of(String sourceClusterId, String sourceBackupId) {\n+    RestoreTableRequest request = new RestoreTableRequest(null, sourceClusterId, sourceBackupId);\n     return request;\n   }\n \n-  private RestoreTableRequest(String clusterId, String backupId) {\n-    Preconditions.checkNotNull(clusterId);\n-    Preconditions.checkNotNull(backupId);\n-    this.backupId = backupId;\n-    this.clusterId = clusterId;\n+  /**\n+   * Create a {@link RestoreTableRequest} object. It assumes the source backup locates in the same", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "042ed7619bbdb061e36e0f91a3019b813f366827"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYyMTU4MjQwOQ==", "bodyText": "the variables in the test are target.... Should these be renamed?", "url": "https://github.com/googleapis/java-bigtable/pull/515#discussion_r621582409", "createdAt": "2021-04-27T20:37:25Z", "author": {"login": "kolea2"}, "path": "google-cloud-bigtable/src/main/java/com/google/cloud/bigtable/admin/v2/models/RestoreTableRequest.java", "diffHunk": "@@ -20,24 +20,47 @@\n import com.google.common.base.Objects;\n import com.google.common.base.Preconditions;\n import javax.annotation.Nonnull;\n+import javax.annotation.Nullable;\n \n /** Fluent wrapper for {@link com.google.bigtable.admin.v2.RestoreTableRequest} */\n public final class RestoreTableRequest {\n   private final com.google.bigtable.admin.v2.RestoreTableRequest.Builder requestBuilder =\n       com.google.bigtable.admin.v2.RestoreTableRequest.newBuilder();\n-  private final String backupId;\n-  private final String clusterId;\n+  private final String sourceBackupId;\n+  private final String sourceClusterId;\n+  private final String sourceInstanceId;\n \n-  public static RestoreTableRequest of(String clusterId, String backupId) {\n-    RestoreTableRequest request = new RestoreTableRequest(clusterId, backupId);\n+  /**\n+   * Create a {@link RestoreTableRequest} object. It assumes the source backup locates in the same\n+   * instance as the destination table. To restore a table from a backup in another instance, use\n+   * {@link #of(String, String, String) of} method.\n+   */\n+  public static RestoreTableRequest of(String sourceClusterId, String sourceBackupId) {\n+    RestoreTableRequest request = new RestoreTableRequest(null, sourceClusterId, sourceBackupId);\n     return request;\n   }\n \n-  private RestoreTableRequest(String clusterId, String backupId) {\n-    Preconditions.checkNotNull(clusterId);\n-    Preconditions.checkNotNull(backupId);\n-    this.backupId = backupId;\n-    this.clusterId = clusterId;\n+  /**\n+   * Create a {@link RestoreTableRequest} object. It assumes the source backup locates in the same\n+   * instance as the destination table. To restore a table from a backup in another instance, use\n+   * {@link #of(String, String, String) of} method.\n+   */\n+  public static RestoreTableRequest of(\n+      String sourceInstanceId, String sourceClusterId, String sourceBackupId) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "042ed7619bbdb061e36e0f91a3019b813f366827"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef66710cb2416dfd68cd9a854b02998a87daa193", "author": {"user": {"login": "liubonan", "name": "Bonan Liu"}}, "url": "https://github.com/googleapis/java-bigtable/commit/ef66710cb2416dfd68cd9a854b02998a87daa193", "committedDate": "2021-04-27T22:14:49Z", "message": "Address comments in the PR.\n\nChange-Id: I3a2bb866d660cc5b6abb5a57b344dfc019c8cdf0"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjQ3MDM4OTg5", "url": "https://github.com/googleapis/java-bigtable/pull/515#pullrequestreview-647038989", "createdAt": "2021-04-28T13:07:21Z", "commit": {"oid": "ef66710cb2416dfd68cd9a854b02998a87daa193"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8495075fb0de85c2c4652b2a41d1bf9c0f6a6500", "author": {"user": {"login": "liubonan", "name": "Bonan Liu"}}, "url": "https://github.com/googleapis/java-bigtable/commit/8495075fb0de85c2c4652b2a41d1bf9c0f6a6500", "committedDate": "2021-04-29T17:41:45Z", "message": "Merge branch 'master' of https://github.com/googleapis/java-bigtable\n\nChange-Id: I9d75b3c7135223e0f56266e797201a96efcc86a7"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b168074b6731e61c1dc12c83e24ed491b5342ee2", "author": {"user": {"login": "liubonan", "name": "Bonan Liu"}}, "url": "https://github.com/googleapis/java-bigtable/commit/b168074b6731e61c1dc12c83e24ed491b5342ee2", "committedDate": "2021-04-29T18:25:45Z", "message": "Improve unit test coverage for RestoreTableRequest.\n\nChange-Id: I65a08bcfcdef49478925037066d865e0963b4374"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjQ5MjgwNzgx", "url": "https://github.com/googleapis/java-bigtable/pull/515#pullrequestreview-649280781", "createdAt": "2021-04-30T14:35:33Z", "commit": {"oid": "b168074b6731e61c1dc12c83e24ed491b5342ee2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1040, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}