{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5NTA2OTgx", "number": 451, "title": "chore: make version embedding more robust", "bodyText": "The previous approach used the jar manifest. Unfortunately that approaches falls apart when the\nconsumer shades the client jar. The new approach uses a combination of releasetool's version tag\nreplacement and maven-resources-plugin to generate a class with an embedded version string.", "createdAt": "2020-10-07T20:45:08Z", "url": "https://github.com/googleapis/java-bigtable/pull/451", "merged": true, "mergeCommit": {"oid": "a3bb37147c9123f47011526466cce0a7533aea18"}, "closed": true, "closedAt": "2020-10-16T22:13:08Z", "author": {"login": "igorbernstein2"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQX0nxgBqjM4NTMxNzI5MzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdTMMiUgFqTUxMDc3MTMxMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "13b4dc3ec9b9485da9b9dd8b2e0e8db692f37b2f", "author": {"user": {"login": "igorbernstein2", "name": "Igor Bernstein"}}, "url": "https://github.com/googleapis/java-bigtable/commit/13b4dc3ec9b9485da9b9dd8b2e0e8db692f37b2f", "committedDate": "2020-10-07T20:44:49Z", "message": "chore: Make version embedding more robust\n\nThe previous approach used the jar manifest. Unfortunately that approaches falls apart when the consumer shades the client jar. The new approach uses a combination of releasetool's version tag replacement and maven-resources-plugin to generate a class with an embedded version string"}, "afterCommit": {"oid": "696dc80bf9a7977992a08444c45c045fa7cedd77", "author": {"user": {"login": "igorbernstein2", "name": "Igor Bernstein"}}, "url": "https://github.com/googleapis/java-bigtable/commit/696dc80bf9a7977992a08444c45c045fa7cedd77", "committedDate": "2020-10-08T02:05:10Z", "message": "chore: make version embedding more robust\n\nThe previous approach used the jar manifest. Unfortunately that approaches falls apart when the consumer shades the client jar.\nThe new approach uses a combination of releasetool's version tag replacement and maven-resources-plugin to generate a class with an embedded version string"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6dd067bc4306dd02d829198daea8d7a05185756", "author": {"user": {"login": "igorbernstein2", "name": "Igor Bernstein"}}, "url": "https://github.com/googleapis/java-bigtable/commit/f6dd067bc4306dd02d829198daea8d7a05185756", "committedDate": "2020-10-08T02:07:50Z", "message": "chore: make version embedding more robust\n\nThe previous approach used the jar manifest. Unfortunately that approaches falls apart when the\nconsumer shades the client jar. The new approach uses a combination of releasetool's version tag\nreplacement and maven-resources-plugin to generate a class with an embedded version string."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "696dc80bf9a7977992a08444c45c045fa7cedd77", "author": {"user": {"login": "igorbernstein2", "name": "Igor Bernstein"}}, "url": "https://github.com/googleapis/java-bigtable/commit/696dc80bf9a7977992a08444c45c045fa7cedd77", "committedDate": "2020-10-08T02:05:10Z", "message": "chore: make version embedding more robust\n\nThe previous approach used the jar manifest. Unfortunately that approaches falls apart when the consumer shades the client jar.\nThe new approach uses a combination of releasetool's version tag replacement and maven-resources-plugin to generate a class with an embedded version string"}, "afterCommit": {"oid": "f6dd067bc4306dd02d829198daea8d7a05185756", "author": {"user": {"login": "igorbernstein2", "name": "Igor Bernstein"}}, "url": "https://github.com/googleapis/java-bigtable/commit/f6dd067bc4306dd02d829198daea8d7a05185756", "committedDate": "2020-10-08T02:07:50Z", "message": "chore: make version embedding more robust\n\nThe previous approach used the jar manifest. Unfortunately that approaches falls apart when the\nconsumer shades the client jar. The new approach uses a combination of releasetool's version tag\nreplacement and maven-resources-plugin to generate a class with an embedded version string."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNjc1NTM2", "url": "https://github.com/googleapis/java-bigtable/pull/451#pullrequestreview-510675536", "createdAt": "2020-10-16T17:37:40Z", "commit": {"oid": "f6dd067bc4306dd02d829198daea8d7a05185756"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22d831cc7dad747f4eb67b7eefd9e36fd437dc73", "author": {"user": {"login": "igorbernstein2", "name": "Igor Bernstein"}}, "url": "https://github.com/googleapis/java-bigtable/commit/22d831cc7dad747f4eb67b7eefd9e36fd437dc73", "committedDate": "2020-10-16T18:54:29Z", "message": "Simplify by using a file allowlisted in release-tool"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNzYzNTc4", "url": "https://github.com/googleapis/java-bigtable/pull/451#pullrequestreview-510763578", "createdAt": "2020-10-16T20:00:25Z", "commit": {"oid": "22d831cc7dad747f4eb67b7eefd9e36fd437dc73"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQyMDowMDoyNVrOHjOJzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNlQyMDowMDoyNVrOHjOJzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjY5NDA5Mw==", "bodyText": "@chingor13, to get this to work, I'm guessing we need to add a path here?  https://github.com/googleapis/release-please/blob/master/src/releasers/java-yoshi.ts#L182  Any thing else?", "url": "https://github.com/googleapis/java-bigtable/pull/451#discussion_r506694093", "createdAt": "2020-10-16T20:00:25Z", "author": {"login": "kolea2"}, "path": "google-cloud-bigtable/src/main/java/com/google/cloud/bigtable/GoogleUtils.java", "diffHunk": "@@ -0,0 +1,26 @@\n+/*\n+ * Copyright 2020 Google LLC\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.google.cloud.bigtable;\n+\n+import com.google.api.core.InternalApi;\n+\n+/** Utility to get the current version of the Bigtable client. */\n+@InternalApi(\"For internal use only\")\n+// Note: this file MUST be named GoogleUtils.java so that it can be picked up by releasetool\n+public class GoogleUtils {\n+  public static final String BIGTABLE_CLIENT_VERSION =\n+      \"1.16.1-SNAPSHOT\"; // {x-version-update:google-cloud-bigtable:current}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22d831cc7dad747f4eb67b7eefd9e36fd437dc73"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cccd64c83b2aa791c3b628c74fd2060ed0f9fd9e", "author": {"user": {"login": "igorbernstein2", "name": "Igor Bernstein"}}, "url": "https://github.com/googleapis/java-bigtable/commit/cccd64c83b2aa791c3b628c74fd2060ed0f9fd9e", "committedDate": "2020-10-16T20:11:44Z", "message": "Revert \"Simplify by using a file allowlisted in release-tool\"\n\nThis reverts commit 22d831cc7dad747f4eb67b7eefd9e36fd437dc73."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEwNzcxMzEz", "url": "https://github.com/googleapis/java-bigtable/pull/451#pullrequestreview-510771313", "createdAt": "2020-10-16T20:14:21Z", "commit": {"oid": "cccd64c83b2aa791c3b628c74fd2060ed0f9fd9e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1086, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}