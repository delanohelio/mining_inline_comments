{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzNTg0ODQ0", "number": 467, "title": "feat: attemp DirectPath by default", "bodyText": "Update client to attempt DirectPath by default, and remove DirectPath test endpoint.\nNote that it doesn't mean that after this change client will just use DirectPath, but will call the DirectPath codepath by default.\nThe actually enablement of DirectPath is controlled by service owner via ACL config. For now, after this change, although all users will attempt DirectPath, but they will all just fallback to the original CFE path.\nFor testing, we will just use -Dbigtable.directpath-data-endpoint and -Dbigtable.directpath-admin-endpoint to override the default endpoint with DP enabled endpoints.\n@igorbernstein2\n@mgarolera\n@mohanli-ml", "createdAt": "2020-10-14T19:15:31Z", "url": "https://github.com/googleapis/java-bigtable/pull/467", "merged": true, "mergeCommit": {"oid": "89c622da6038067892687af3edafae743465eda7"}, "closed": true, "closedAt": "2020-10-19T20:28:41Z", "author": {"login": "WeiranFang"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSh9ztgH2gAyNTAzNTg0ODQ0OjA2NWZkNTZjMzNkZTRkYmNkMjVmYWY1NjYxYTIzMzUxOTkyYjE0YmU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdS0zubAH2gAyNTAzNTg0ODQ0OmQ5YmZkZTI5OGQ2MWUwMzMxNjZmNTEzMThkOTAxZDYwNmUwOWFmNDU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "065fd56c33de4dbcd25faf5661a23351992b14be", "author": {"user": {"login": "WeiranFang", "name": "Weiran Fang"}}, "url": "https://github.com/googleapis/java-bigtable/commit/065fd56c33de4dbcd25faf5661a23351992b14be", "committedDate": "2020-10-14T19:02:15Z", "message": "feat: attemp DirectPath by default"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5NDc2Njk5", "url": "https://github.com/googleapis/java-bigtable/pull/467#pullrequestreview-509476699", "createdAt": "2020-10-15T14:59:31Z", "commit": {"oid": "065fd56c33de4dbcd25faf5661a23351992b14be"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxNDo1OTozMVrOHiMN1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxNDo1OTozMVrOHiMN1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTYxMzc4Mg==", "bodyText": "is there anywhere we can keep this logging information to confirm (in tests, for example) that we are connecting using DirectPath?", "url": "https://github.com/googleapis/java-bigtable/pull/467#discussion_r505613782", "createdAt": "2020-10-15T14:59:31Z", "author": {"login": "kolea2"}, "path": "google-cloud-bigtable/src/main/java/com/google/cloud/bigtable/data/v2/stub/EnhancedBigtableStubSettings.java", "diffHunk": "@@ -166,12 +163,6 @@\n   private EnhancedBigtableStubSettings(Builder builder) {\n     super(builder);\n \n-    if (DIRECT_PATH_ENDPOINT.equals(builder.getEndpoint())) {\n-      logger.warning(\n-          \"Connecting to Bigtable using DirectPath.\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "065fd56c33de4dbcd25faf5661a23351992b14be"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5NDc4ODk0", "url": "https://github.com/googleapis/java-bigtable/pull/467#pullrequestreview-509478894", "createdAt": "2020-10-15T15:01:39Z", "commit": {"oid": "065fd56c33de4dbcd25faf5661a23351992b14be"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxNTowMTo0MFrOHiMUzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxNTowMTo0MFrOHiMUzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTYxNTU2Nw==", "bodyText": "Can you add a  comment on why we attemt DirectPath? to give context to future readers.", "url": "https://github.com/googleapis/java-bigtable/pull/467#discussion_r505615567", "createdAt": "2020-10-15T15:01:40Z", "author": {"login": "mgarolera"}, "path": "google-cloud-bigtable/src/main/java/com/google/cloud/bigtable/data/v2/stub/EnhancedBigtableStubSettings.java", "diffHunk": "@@ -245,13 +236,7 @@ public boolean isRefreshingChannel() {\n         .setKeepAliveTimeout(\n             Duration.ofSeconds(10)) // wait this long before considering the connection dead\n         .setKeepAliveWithoutCalls(true) // sends ping without active streams\n-        // TODO(weiranf): Set this to true by default once DirectPath goes to public beta\n-        .setAttemptDirectPath(isDirectPathEnabled());\n-  }\n-\n-  // TODO(weiranf): Remove this once DirectPath goes to public beta\n-  private static boolean isDirectPathEnabled() {\n-    return Boolean.getBoolean(\"bigtable.attempt-directpath\");\n+        .setAttemptDirectPath(true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "065fd56c33de4dbcd25faf5661a23351992b14be"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5NDgzMDc4", "url": "https://github.com/googleapis/java-bigtable/pull/467#pullrequestreview-509483078", "createdAt": "2020-10-15T15:05:38Z", "commit": {"oid": "065fd56c33de4dbcd25faf5661a23351992b14be"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9bfde298d61e033166f51318d901d606e09af45", "author": {"user": {"login": "WeiranFang", "name": "Weiran Fang"}}, "url": "https://github.com/googleapis/java-bigtable/commit/d9bfde298d61e033166f51318d901d606e09af45", "committedDate": "2020-10-15T16:59:26Z", "message": "Add comment for DP attempt"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1023, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}