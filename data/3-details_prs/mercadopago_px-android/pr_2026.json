{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3MDQyMzc2", "number": 2026, "title": "[enhancement] improve esc availability", "bodyText": "", "createdAt": "2020-01-24T22:33:33Z", "url": "https://github.com/mercadopago/px-android/pull/2026", "merged": true, "mergeCommit": {"oid": "5f572bee13d400da8d922ff1e961caaa8fd4f20f"}, "closed": true, "closedAt": "2020-02-06T18:27:48Z", "author": {"login": "cgaggino"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb9my7qAFqTM0ODI2MzM5NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcBvB4cAFqTM1NDY3MzUyNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MjYzMzk1", "url": "https://github.com/mercadopago/px-android/pull/2026#pullrequestreview-348263395", "createdAt": "2020-01-24T22:36:20Z", "commit": {"oid": "9616b15e161313ad7fcc0b59d0b9bed7f928c255"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMjozNjoyMFrOFhsQ-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMjozNjoyMFrOFhsQ-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg3MjU2OA==", "bodyText": "Esto se mueve afuera del if ya que hubo casos recientemente donde agregan nuevos posibles errores en la api de tokenizacion y no podiamos handlear bien esos casos por el if con c\u00f3digos hardcodeados", "url": "https://github.com/mercadopago/px-android/pull/2026#discussion_r370872568", "createdAt": "2020-01-24T22:36:20Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/datasource/TokenizeService.java", "diffHunk": "@@ -62,10 +62,11 @@ public void success(final Token token) {\n \n             @Override\n             public void failure(final ApiException apiException) {\n-                //TODO move to esc manager  / Token repo\n+                //TODO move to esc manager / Token repo\n+                paymentSettingRepository.configure((Token) null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9616b15e161313ad7fcc0b59d0b9bed7f928c255"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MjYzNzQ1", "url": "https://github.com/mercadopago/px-android/pull/2026#pullrequestreview-348263745", "createdAt": "2020-01-24T22:37:18Z", "commit": {"oid": "9616b15e161313ad7fcc0b59d0b9bed7f928c255"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMjozNzoxOFrOFhsSHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMjozNzoxOFrOFhsSHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg3Mjg2MQ==", "bodyText": "Idem al anterior, se mueve afuera del if ya que hubo casos recientemente donde agregan nuevos posibles errores en la api de tokenizacion y no podiamos handlear bien esos casos por el if con c\u00f3digos hardcodeados. Podria quedar en un retry infinito. Por lo mismo se borra el flujo de recover de este caso", "url": "https://github.com/mercadopago/px-android/pull/2026#discussion_r370872861", "createdAt": "2020-01-24T22:37:18Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/cardvault/CardVaultPresenter.java", "diffHunk": "@@ -271,28 +257,20 @@ public void onSuccess(final Token token) {\n             @Override\n             public void onFailure(final MercadoPagoError error) {\n                 if (error.isApiException() && EscUtil.isInvalidEscForApiException(error.getApiException())) {\n+                    // Just limit the tracking to esc api exception\n                     EscFrictionEventTracker.create(escCardToken.getCardId(), esc, error.getApiException()).track();\n-                    escManagerBehaviour.deleteESCWith(escCardToken.getCardId());\n-                    esc = null;\n-                    //Start CVV screen if fail\n-                    if (isViewAttached()) {\n-                        getView().startSecurityCodeActivity(Reason.SAVED_CARD);\n-                    }\n-                } else {\n-                    //Retry with error screen\n-                    recoverCreateESCToken(error);\n+                }\n+\n+                escManagerBehaviour.deleteESCWith(escCardToken.getCardId());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9616b15e161313ad7fcc0b59d0b9bed7f928c255"}, "originalPosition": 59}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9616b15e161313ad7fcc0b59d0b9bed7f928c255", "author": {"user": {"login": "cgaggino", "name": "Cristian Gaggino"}}, "url": "https://github.com/mercadopago/px-android/commit/9616b15e161313ad7fcc0b59d0b9bed7f928c255", "committedDate": "2020-01-24T22:32:52Z", "message": "* Improved esc availability with minor changes"}, "afterCommit": {"oid": "ad1832a0451a450f94f8c6aba4328a090fc277cb", "author": {"user": {"login": "cgaggino", "name": "Cristian Gaggino"}}, "url": "https://github.com/mercadopago/px-android/commit/ad1832a0451a450f94f8c6aba4328a090fc277cb", "committedDate": "2020-01-27T01:28:32Z", "message": "* Improved esc availability with minor changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b407f688a7f5bac0e6698491eb572d1168ed5c0", "author": {"user": {"login": "cgaggino", "name": "Cristian Gaggino"}}, "url": "https://github.com/mercadopago/px-android/commit/9b407f688a7f5bac0e6698491eb572d1168ed5c0", "committedDate": "2020-01-27T02:36:17Z", "message": "* Improved esc availability with minor changes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ad1832a0451a450f94f8c6aba4328a090fc277cb", "author": {"user": {"login": "cgaggino", "name": "Cristian Gaggino"}}, "url": "https://github.com/mercadopago/px-android/commit/ad1832a0451a450f94f8c6aba4328a090fc277cb", "committedDate": "2020-01-27T01:28:32Z", "message": "* Improved esc availability with minor changes"}, "afterCommit": {"oid": "9b407f688a7f5bac0e6698491eb572d1168ed5c0", "author": {"user": {"login": "cgaggino", "name": "Cristian Gaggino"}}, "url": "https://github.com/mercadopago/px-android/commit/9b407f688a7f5bac0e6698491eb572d1168ed5c0", "committedDate": "2020-01-27T02:36:17Z", "message": "* Improved esc availability with minor changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b28ce58ba68631e0e07196e058d01c5365b63f07", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/b28ce58ba68631e0e07196e058d01c5365b63f07", "committedDate": "2020-02-05T14:06:19Z", "message": "update esc status, test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09195e1ad81c71af73ad98b854692d42e1f52c31", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/09195e1ad81c71af73ad98b854692d42e1f52c31", "committedDate": "2020-02-06T18:26:48Z", "message": "refactor CustomSearchItem"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0NjczNTI3", "url": "https://github.com/mercadopago/px-android/pull/2026#pullrequestreview-354673527", "createdAt": "2020-02-06T18:27:36Z", "commit": {"oid": "09195e1ad81c71af73ad98b854692d42e1f52c31"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3853, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}