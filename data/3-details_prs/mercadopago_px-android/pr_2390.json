{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI0Mjg2MzQy", "number": 2390, "title": "[Feature] Card form bottom sheet", "bodyText": "Motivaci\u00f3n y Contexto\nSe agrega bottom sheet de andes para levantar las opciones de alta de tarjeta de cr\u00e9dito y debito en chile (webpay).\nDescripci\u00f3n\n\nC\u00f3mo probarlo\n\n\nScreenshots\n\nTipo de cambio (para el release manager)\n\n Breaking change (Fix o feature que cambia una funcionalidad existente o rompe firmas)\n\n\n\n Mi cambio afecta a los integradores internos\n\n\nCompartir conocimiento", "createdAt": "2020-11-19T22:56:39Z", "url": "https://github.com/mercadopago/px-android/pull/2390", "merged": true, "mergeCommit": {"oid": "7f20189f7061c4a16457d3881ef755b36fe9e234"}, "closed": true, "closedAt": "2020-11-27T20:04:44Z", "author": {"login": "jorGonzalez291292"}, "timelineItems": {"totalCount": 28, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdW9ja6AH2gAyNTI0Mjg2MzQyOjBjYTUzYmNhMGU5YmM0OGM5ZWZlOGI0YjJhZWZmOTM3YzJmOTIyNGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdgtNMWgFqTU0MDE3ODEwMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0ca53bca0e9bc48c9efe8b4b2aeff937c2f9224a", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/0ca53bca0e9bc48c9efe8b4b2aeff937c2f9224a", "committedDate": "2020-10-28T13:26:28Z", "message": "add sheet option model"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74c0c382be1a882b76e2507979d0d35d832655a7", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/74c0c382be1a882b76e2507979d0d35d832655a7", "committedDate": "2020-11-15T14:12:00Z", "message": "card form bottom sheet"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "545388463f6e7b40b5d9d0481a528754f916888e", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/545388463f6e7b40b5d9d0481a528754f916888e", "committedDate": "2020-11-16T11:59:34Z", "message": "recycler view and adepter added"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dba72f5714e7805d1fde56d0ef4b53ac63b7b857", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/dba72f5714e7805d1fde56d0ef4b53ac63b7b857", "committedDate": "2020-11-17T16:56:02Z", "message": "cardformoption click listener added"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fec05f19d88d6d362ccc8abfb4b75f686db4a8e", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/9fec05f19d88d6d362ccc8abfb4b75f686db4a8e", "committedDate": "2020-11-19T14:14:56Z", "message": "add init type to new card meta data"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8f0fb56e1653d71fb83856c269b9696bcd10da6", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/b8f0fb56e1653d71fb83856c269b9696bcd10da6", "committedDate": "2020-11-19T19:43:23Z", "message": "refactor recycler view adapter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1fa30ae12ac7e5e5209211c8569875ab87fd1b44", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/1fa30ae12ac7e5e5209211c8569875ab87fd1b44", "committedDate": "2020-11-19T22:09:38Z", "message": "revert changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7768e2e51d5d97f578631fb53b482ffbb59386ba", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/7768e2e51d5d97f578631fb53b482ffbb59386ba", "committedDate": "2020-11-19T22:24:07Z", "message": "merge with master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0542678a163e15b66de67d9e66e3a88040c003f", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/a0542678a163e15b66de67d9e66e3a88040c003f", "committedDate": "2020-11-19T22:45:29Z", "message": "refactor open card form"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23db14f0e593e3863163f103a6978fb770dde76f", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/23db14f0e593e3863163f103a6978fb770dde76f", "committedDate": "2020-11-19T22:51:53Z", "message": "add code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "763cbeed2a912da8c65cf31fdaa3b39c70af3c02", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/763cbeed2a912da8c65cf31fdaa3b39c70af3c02", "committedDate": "2020-11-20T19:37:46Z", "message": "rename file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "136dc6c637360c17631881c6cd0b0f8e68ede4ef", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/136dc6c637360c17631881c6cd0b0f8e68ede4ef", "committedDate": "2020-11-24T19:15:10Z", "message": "update text sizes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0a9c19c74abb272bffa4d4a92ddc3c6d1533c14", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/e0a9c19c74abb272bffa4d4a92ddc3c6d1533c14", "committedDate": "2020-11-24T20:06:58Z", "message": "rename package"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4d36e27a59bf17960801b8a5544fa93ab4c4361", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/c4d36e27a59bf17960801b8a5544fa93ab4c4361", "committedDate": "2020-11-24T20:08:42Z", "message": "rename package again"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3ODY4MjIy", "url": "https://github.com/mercadopago/px-android/pull/2390#pullrequestreview-537868222", "createdAt": "2020-11-24T20:12:38Z", "commit": {"oid": "c4d36e27a59bf17960801b8a5544fa93ab4c4361"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQyMDoxMjozOFrOH5Td9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQyMDoxMjozOFrOH5Td9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg0OTg0NQ==", "bodyText": "List en vez de ArrayList", "url": "https://github.com/mercadopago/px-android/pull/2390#discussion_r529849845", "createdAt": "2020-11-24T20:12:38Z", "author": {"login": "guchito9"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/express/add_new_card/OtherPaymentMethodFragment.java", "diffHunk": "@@ -81,12 +87,34 @@ public void onViewCreated(@NonNull final View view, @Nullable final Bundle saved\n \n     private void configureAddNewCard(@NonNull final NewCardMetadata newCardMetadata) {\n         addNewCardView.setVisibility(View.VISIBLE);\n+        final ArrayList<CardFormOption> cardFormOptions = newCardMetadata.getSheetOptions();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4d36e27a59bf17960801b8a5544fa93ab4c4361"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3ODY4NjI1", "url": "https://github.com/mercadopago/px-android/pull/2390#pullrequestreview-537868625", "createdAt": "2020-11-24T20:13:20Z", "commit": {"oid": "c4d36e27a59bf17960801b8a5544fa93ab4c4361"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQyMDoxMzoyMFrOH5TfEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQyMDoxMzoyMFrOH5TfEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg1MDEzMQ==", "bodyText": "onClickListener en vez de onCLickListener", "url": "https://github.com/mercadopago/px-android/pull/2390#discussion_r529850131", "createdAt": "2020-11-24T20:13:20Z", "author": {"login": "guchito9"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/express/add_new_card/OtherPaymentMethodFragment.java", "diffHunk": "@@ -81,12 +87,34 @@ public void onViewCreated(@NonNull final View view, @Nullable final Bundle saved\n \n     private void configureAddNewCard(@NonNull final NewCardMetadata newCardMetadata) {\n         addNewCardView.setVisibility(View.VISIBLE);\n+        final ArrayList<CardFormOption> cardFormOptions = newCardMetadata.getSheetOptions();\n+        final View.OnClickListener onCLickListener;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4d36e27a59bf17960801b8a5544fa93ab4c4361"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3ODcxNzYw", "url": "https://github.com/mercadopago/px-android/pull/2390#pullrequestreview-537871760", "createdAt": "2020-11-24T20:17:34Z", "commit": {"oid": "c4d36e27a59bf17960801b8a5544fa93ab4c4361"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQyMDoxNzozNFrOH5ToTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQyMDoxNzozNFrOH5ToTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg1MjQ5Mg==", "bodyText": "Meter\u00eda un fromValue que haga internamente un equalsIgnoreCase dentro del enum mejor", "url": "https://github.com/mercadopago/px-android/pull/2390#discussion_r529852492", "createdAt": "2020-11-24T20:17:34Z", "author": {"login": "guchito9"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/express/add_new_card/OtherPaymentMethodFragment.java", "diffHunk": "@@ -81,12 +87,34 @@ public void onViewCreated(@NonNull final View view, @Nullable final Bundle saved\n \n     private void configureAddNewCard(@NonNull final NewCardMetadata newCardMetadata) {\n         addNewCardView.setVisibility(View.VISIBLE);\n+        final ArrayList<CardFormOption> cardFormOptions = newCardMetadata.getSheetOptions();\n+        final View.OnClickListener onCLickListener;\n+\n+        if (ListUtil.isEmpty(cardFormOptions) || cardFormOptions.size() == 1) {\n+            final String initType = newCardMetadata.getCardFormInitType().toUpperCase();\n+            onCLickListener = v -> presenter.onAddNewCardSelected(CardFormInitType.valueOf(initType));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4d36e27a59bf17960801b8a5544fa93ab4c4361"}, "originalPosition": 43}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3ODc2NDkw", "url": "https://github.com/mercadopago/px-android/pull/2390#pullrequestreview-537876490", "createdAt": "2020-11-24T20:25:01Z", "commit": {"oid": "c4d36e27a59bf17960801b8a5544fa93ab4c4361"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQyMDoyNTowMVrOH5T3nw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQyMDoyNTowMVrOH5T3nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg1NjQxNQ==", "bodyText": "Esto lo har\u00eda como un enum usando serializedName para los valores exactos que vienen de backend. Cualquier cosa ver la clase Button:\nhttps://github.com/mercadopago/px-android/blob/master/px-services/src/main/java/com/mercadopago/android/px/model/internal/Button.kt", "url": "https://github.com/mercadopago/px-android/pull/2390#discussion_r529856415", "createdAt": "2020-11-24T20:25:01Z", "author": {"login": "guchito9"}, "path": "px-services/src/main/java/com/mercadopago/android/px/model/NewCardMetadata.java", "diffHunk": "@@ -2,14 +2,21 @@\n \n import android.os.Parcel;\n import android.os.Parcelable;\n+import androidx.annotation.Nullable;\n+import com.mercadopago.android.px.model.internal.CardFormOption;\n import com.mercadopago.android.px.model.internal.Text;\n import java.io.Serializable;\n+import java.util.ArrayList;\n \n public final class NewCardMetadata implements Parcelable, Serializable {\n \n     private final Text label;\n     private final Text description;\n     private final String version;\n+    private final String cardFormInitType;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4d36e27a59bf17960801b8a5544fa93ab4c4361"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3ODgxMTA2", "url": "https://github.com/mercadopago/px-android/pull/2390#pullrequestreview-537881106", "createdAt": "2020-11-24T20:32:08Z", "commit": {"oid": "c4d36e27a59bf17960801b8a5544fa93ab4c4361"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQyMDozMjowOFrOH5UGMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQyMDozMjowOFrOH5UGMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg2MDE0NA==", "bodyText": "Mandale EXTRA_MODEL por el amor de Dios", "url": "https://github.com/mercadopago/px-android/pull/2390#discussion_r529860144", "createdAt": "2020-11-24T20:32:08Z", "author": {"login": "guchito9"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/express/add_new_card/sheet_options/CardFormBottomSheetFragment.kt", "diffHunk": "@@ -0,0 +1,95 @@\n+package com.mercadopago.android.px.internal.features.express.add_new_card.sheet_options\n+\n+import android.os.Bundle\n+import android.view.LayoutInflater\n+import android.view.View\n+import android.view.ViewGroup\n+import androidx.core.content.ContextCompat\n+import androidx.fragment.app.Fragment\n+import androidx.recyclerview.widget.DividerItemDecoration\n+import androidx.recyclerview.widget.LinearLayoutManager\n+import androidx.recyclerview.widget.RecyclerView\n+import com.mercadopago.android.px.R\n+import com.mercadopago.android.px.internal.di.Session\n+import com.mercadopago.android.px.internal.features.express.ExpressPaymentFragment\n+import com.mercadopago.android.px.internal.features.express.add_new_card.CardFormInitType\n+import com.mercadopago.android.px.internal.util.CardFormWrapper\n+\n+private const val CARD_FORM_BOTTOM_SHEET_MODEL_EXTRA = \"card_form_bottom_sheet_model\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4d36e27a59bf17960801b8a5544fa93ab4c4361"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3ODg0NTU1", "url": "https://github.com/mercadopago/px-android/pull/2390#pullrequestreview-537884555", "createdAt": "2020-11-24T20:37:38Z", "commit": {"oid": "c4d36e27a59bf17960801b8a5544fa93ab4c4361"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQyMDozNzozOVrOH5UQ2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQyMDozNzozOVrOH5UQ2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg2Mjg3NQ==", "bodyText": "Creo que usando directamente el getParcelable te ahorr\u00e1s el takeIf", "url": "https://github.com/mercadopago/px-android/pull/2390#discussion_r529862875", "createdAt": "2020-11-24T20:37:39Z", "author": {"login": "guchito9"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/express/add_new_card/sheet_options/CardFormBottomSheetFragment.kt", "diffHunk": "@@ -0,0 +1,95 @@\n+package com.mercadopago.android.px.internal.features.express.add_new_card.sheet_options\n+\n+import android.os.Bundle\n+import android.view.LayoutInflater\n+import android.view.View\n+import android.view.ViewGroup\n+import androidx.core.content.ContextCompat\n+import androidx.fragment.app.Fragment\n+import androidx.recyclerview.widget.DividerItemDecoration\n+import androidx.recyclerview.widget.LinearLayoutManager\n+import androidx.recyclerview.widget.RecyclerView\n+import com.mercadopago.android.px.R\n+import com.mercadopago.android.px.internal.di.Session\n+import com.mercadopago.android.px.internal.features.express.ExpressPaymentFragment\n+import com.mercadopago.android.px.internal.features.express.add_new_card.CardFormInitType\n+import com.mercadopago.android.px.internal.util.CardFormWrapper\n+\n+private const val CARD_FORM_BOTTOM_SHEET_MODEL_EXTRA = \"card_form_bottom_sheet_model\"\n+\n+internal class CardFormBottomSheetFragment : Fragment() {\n+\n+    private lateinit var cardFormWrapper: CardFormWrapper\n+    private var cardFormOptionClick: CardFormOptionClick? = null\n+\n+    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n+        return inflater.inflate(R.layout.px_fragment_card_form_bottom_sheet, container, false)\n+    }\n+\n+    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n+        super.onViewCreated(view, savedInstanceState)\n+        arguments?.takeIf { it.containsKey(CARD_FORM_BOTTOM_SHEET_MODEL_EXTRA) }?.let {\n+            setUpRecyclerView(view, it.getParcelable(CARD_FORM_BOTTOM_SHEET_MODEL_EXTRA)!!)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4d36e27a59bf17960801b8a5544fa93ab4c4361"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3ODg1MDQy", "url": "https://github.com/mercadopago/px-android/pull/2390#pullrequestreview-537885042", "createdAt": "2020-11-24T20:38:27Z", "commit": {"oid": "c4d36e27a59bf17960801b8a5544fa93ab4c4361"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQyMDozODoyN1rOH5USRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQyMDozODoyN1rOH5USRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg2MzIzOQ==", "bodyText": "Ojo, chequear por null y no forzarlo", "url": "https://github.com/mercadopago/px-android/pull/2390#discussion_r529863239", "createdAt": "2020-11-24T20:38:27Z", "author": {"login": "guchito9"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/express/add_new_card/sheet_options/CardFormBottomSheetFragment.kt", "diffHunk": "@@ -0,0 +1,95 @@\n+package com.mercadopago.android.px.internal.features.express.add_new_card.sheet_options\n+\n+import android.os.Bundle\n+import android.view.LayoutInflater\n+import android.view.View\n+import android.view.ViewGroup\n+import androidx.core.content.ContextCompat\n+import androidx.fragment.app.Fragment\n+import androidx.recyclerview.widget.DividerItemDecoration\n+import androidx.recyclerview.widget.LinearLayoutManager\n+import androidx.recyclerview.widget.RecyclerView\n+import com.mercadopago.android.px.R\n+import com.mercadopago.android.px.internal.di.Session\n+import com.mercadopago.android.px.internal.features.express.ExpressPaymentFragment\n+import com.mercadopago.android.px.internal.features.express.add_new_card.CardFormInitType\n+import com.mercadopago.android.px.internal.util.CardFormWrapper\n+\n+private const val CARD_FORM_BOTTOM_SHEET_MODEL_EXTRA = \"card_form_bottom_sheet_model\"\n+\n+internal class CardFormBottomSheetFragment : Fragment() {\n+\n+    private lateinit var cardFormWrapper: CardFormWrapper\n+    private var cardFormOptionClick: CardFormOptionClick? = null\n+\n+    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n+        return inflater.inflate(R.layout.px_fragment_card_form_bottom_sheet, container, false)\n+    }\n+\n+    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n+        super.onViewCreated(view, savedInstanceState)\n+        arguments?.takeIf { it.containsKey(CARD_FORM_BOTTOM_SHEET_MODEL_EXTRA) }?.let {\n+            setUpRecyclerView(view, it.getParcelable(CARD_FORM_BOTTOM_SHEET_MODEL_EXTRA)!!)\n+            setUpCardFormWrapper()\n+        } ?: error(\"Arguments should not be null\")\n+    }\n+\n+    private fun setUpRecyclerView(view: View, cardFormBottomSheetModel: CardFormBottomSheetModel) {\n+        val newCardSheetOptions = view.findViewById<RecyclerView>(R.id.sheet_options)\n+        context?.let { context ->\n+            val decoration = DividerItemDecoration(context, LinearLayoutManager.VERTICAL)\n+            decoration.setDrawable(ContextCompat.getDrawable(context, R.drawable.px_item_option_decorator_divider)!!)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4d36e27a59bf17960801b8a5544fa93ab4c4361"}, "originalPosition": 41}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ccf728d5c9337a13ef1c1438e3b4b0708f417788", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/ccf728d5c9337a13ef1c1438e3b4b0708f417788", "committedDate": "2020-11-25T12:56:43Z", "message": "review changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9defeccbb2f06f76497dbd5bcf54f48c18986caa", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/9defeccbb2f06f76497dbd5bcf54f48c18986caa", "committedDate": "2020-11-25T21:29:20Z", "message": "update layout sheet option"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwMTMwMTY1", "url": "https://github.com/mercadopago/px-android/pull/2390#pullrequestreview-540130165", "createdAt": "2020-11-27T18:16:47Z", "commit": {"oid": "9defeccbb2f06f76497dbd5bcf54f48c18986caa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QxODoxNjo0N1rOH7F0jQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QxODoxNjo0N1rOH7F0jQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTcyMzQwNQ==", "bodyText": "Yo le pondr\u00eda set, porque reemplaza, no se hace add", "url": "https://github.com/mercadopago/px-android/pull/2390#discussion_r531723405", "createdAt": "2020-11-27T18:16:47Z", "author": {"login": "guchito9"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/express/add_new_card/sheet_options/CardFormBottomSheetFragment.kt", "diffHunk": "@@ -0,0 +1,98 @@\n+package com.mercadopago.android.px.internal.features.express.add_new_card.sheet_options\n+\n+import android.os.Bundle\n+import android.view.LayoutInflater\n+import android.view.View\n+import android.view.ViewGroup\n+import androidx.core.content.ContextCompat\n+import androidx.fragment.app.Fragment\n+import androidx.recyclerview.widget.DividerItemDecoration\n+import androidx.recyclerview.widget.LinearLayoutManager\n+import androidx.recyclerview.widget.RecyclerView\n+import com.mercadopago.android.px.R\n+import com.mercadopago.android.px.internal.di.Session\n+import com.mercadopago.android.px.internal.features.express.ExpressPaymentFragment\n+import com.mercadopago.android.px.internal.util.CardFormWrapper\n+import com.mercadopago.android.px.model.CardFormInitType\n+\n+private const val EXTRA_BOTTOM_SHEET_MODEL = \"bottom_sheet_model\"\n+\n+internal class CardFormBottomSheetFragment : Fragment() {\n+\n+    private lateinit var cardFormWrapper: CardFormWrapper\n+    private var cardFormOptionClick: CardFormOptionClick? = null\n+\n+    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {\n+        return inflater.inflate(R.layout.px_fragment_card_form_bottom_sheet, container, false)\n+    }\n+\n+    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n+        super.onViewCreated(view, savedInstanceState)\n+        arguments?.getParcelable<CardFormBottomSheetModel>(EXTRA_BOTTOM_SHEET_MODEL)?.let { model ->\n+            setUpRecyclerView(view, model)\n+            setUpCardFormWrapper()\n+        } ?: error(\"Arguments should not be null\")\n+    }\n+\n+    private fun setUpRecyclerView(view: View, cardFormBottomSheetModel: CardFormBottomSheetModel) {\n+        val newCardSheetOptions = view.findViewById<RecyclerView>(R.id.sheet_options)\n+        context?.let { context ->\n+            val drawableDecorator = ContextCompat.getDrawable(context, R.drawable.px_item_option_decorator_divider)\n+            drawableDecorator?.let {\n+                val decoration = DividerItemDecoration(context, LinearLayoutManager.VERTICAL)\n+                decoration.setDrawable(it)\n+                newCardSheetOptions.addItemDecoration(decoration)\n+            }\n+        }\n+        newCardSheetOptions.adapter = SheetOptionsRecyclerViewAdapter(\n+            cardFormBottomSheetModel,\n+            this::onCardFormOptionSelected)\n+    }\n+\n+    private fun setUpCardFormWrapper() {\n+        val configurationModule = Session.getInstance().configurationModule\n+        cardFormWrapper = CardFormWrapper(\n+            configurationModule.paymentSettings,\n+            configurationModule.trackingRepository)\n+    }\n+\n+    private fun onCardFormOptionSelected(cardFormInitType: CardFormInitType) {\n+        parentFragment?.fragmentManager?.let { fragmentManager ->\n+\n+            cardFormOptionClick?.onOptionClick()\n+\n+            when (cardFormInitType) {\n+                CardFormInitType.STANDARD -> {\n+                    cardFormWrapper.getCardFormWithFragment().start(\n+                        fragmentManager,\n+                        ExpressPaymentFragment.REQ_CODE_CARD_FORM,\n+                        R.id.one_tap_fragment\n+                    )\n+                }\n+\n+                CardFormInitType.WEBPAY_TBK -> {\n+                    //TODO: Open card form by web view\n+                    cardFormWrapper.getCardFormWithWebView()\n+                }\n+            }\n+        }\n+    }\n+\n+    fun addCardFormOptionClick(cardFormOptionClick: CardFormOptionClick) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9defeccbb2f06f76497dbd5bcf54f48c18986caa"}, "originalPosition": 81}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwMTMxNDc5", "url": "https://github.com/mercadopago/px-android/pull/2390#pullrequestreview-540131479", "createdAt": "2020-11-27T18:21:28Z", "commit": {"oid": "9defeccbb2f06f76497dbd5bcf54f48c18986caa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QxODoyMToyOFrOH7F5LQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yN1QxODoyMToyOFrOH7F5LQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTcyNDU4OQ==", "bodyText": "El +1 por el header?", "url": "https://github.com/mercadopago/px-android/pull/2390#discussion_r531724589", "createdAt": "2020-11-27T18:21:28Z", "author": {"login": "guchito9"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/express/add_new_card/sheet_options/SheetOptionsRecyclerViewAdapter.kt", "diffHunk": "@@ -0,0 +1,87 @@\n+package com.mercadopago.android.px.internal.features.express.add_new_card.sheet_options\n+\n+import android.view.LayoutInflater\n+import android.view.View\n+import android.view.ViewGroup\n+import android.widget.ImageView\n+import android.widget.TextView\n+import androidx.recyclerview.widget.RecyclerView\n+import com.mercadopago.android.px.R\n+import com.mercadopago.android.px.internal.extensions.loadOrElse\n+import com.mercadopago.android.px.internal.extensions.visible\n+import com.mercadopago.android.px.internal.font.FontHelper\n+import com.mercadopago.android.px.internal.font.PxFont\n+import com.mercadopago.android.px.internal.view.MPTextView\n+import com.mercadopago.android.px.model.CardFormInitType\n+import java.util.*\n+\n+internal class SheetOptionsRecyclerViewAdapter(\n+    cardFormBottomSheetModel: CardFormBottomSheetModel,\n+    private val cardFormOptionSelected: (CardFormInitType) -> Unit\n+) : RecyclerView.Adapter<RecyclerView.ViewHolder>() {\n+\n+    private val cardFormOptions = cardFormBottomSheetModel.cardFormOptions\n+    private val cardFormTitleHeader = cardFormBottomSheetModel.titleHeader\n+\n+    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int) = when (SheetOptionViewType.values()[viewType]) {\n+        SheetOptionViewType.HEADER -> {\n+            SheetOptionHeaderViewHolder(inflateViewHolderView(parent, R.layout.sheet_option_header))\n+        }\n+        SheetOptionViewType.OPTION -> {\n+            SheetOptionViewHolder(inflateViewHolderView(parent, R.layout.sheet_option))\n+        }\n+    }\n+\n+    override fun getItemViewType(position: Int): Int {\n+        val viewType = if (position > 0) SheetOptionViewType.OPTION else SheetOptionViewType.HEADER\n+        return viewType.ordinal\n+    }\n+\n+    override fun getItemCount() = cardFormOptions.size + 1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9defeccbb2f06f76497dbd5bcf54f48c18986caa"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e207fa589582e2c2a357f68c9011083ec8cc6ce", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/2e207fa589582e2c2a357f68c9011083ec8cc6ce", "committedDate": "2020-11-27T19:45:31Z", "message": "refactor header bottom sheet"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "605e1dd29bc1b9b71a822108779e7f4b29d092ca", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/605e1dd29bc1b9b71a822108779e7f4b29d092ca", "committedDate": "2020-11-27T19:56:46Z", "message": "change name method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQwMTc4MTAw", "url": "https://github.com/mercadopago/px-android/pull/2390#pullrequestreview-540178100", "createdAt": "2020-11-27T20:02:57Z", "commit": {"oid": "605e1dd29bc1b9b71a822108779e7f4b29d092ca"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3716, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}