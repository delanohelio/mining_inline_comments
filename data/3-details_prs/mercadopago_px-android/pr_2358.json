{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA1MTEzMDQ2", "number": 2358, "title": "[Fix] Front location cvv on one tap and security code fragments", "bodyText": "", "createdAt": "2020-10-16T21:33:06Z", "url": "https://github.com/mercadopago/px-android/pull/2358", "merged": true, "mergeCommit": {"oid": "6c9bd24623810f76482c37339d92d528ab0c1bea"}, "closed": true, "closedAt": "2020-10-19T19:14:22Z", "author": {"login": "guchito9"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdUFtK3gBqjM4OTQwMzIyNzI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdUID5WgBqjM4OTQ4MDUxMjY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "35432680ee6340fe43a918c0b1f691805b1a9434", "author": {"user": {"login": "guchito9", "name": "Guche Mantuano"}}, "url": "https://github.com/mercadopago/px-android/commit/35432680ee6340fe43a918c0b1f691805b1a9434", "committedDate": "2020-10-16T21:29:22Z", "message": "Fix front location cvv on one tap and security code fragments"}, "afterCommit": {"oid": "f29e06e9092041516589f35e9a84e81a90b6d689", "author": {"user": {"login": "guchito9", "name": "Guche Mantuano"}}, "url": "https://github.com/mercadopago/px-android/commit/f29e06e9092041516589f35e9a84e81a90b6d689", "committedDate": "2020-10-19T15:14:23Z", "message": "Fix front location cvv on one tap and security code fragments"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f29e06e9092041516589f35e9a84e81a90b6d689", "author": {"user": {"login": "guchito9", "name": "Guche Mantuano"}}, "url": "https://github.com/mercadopago/px-android/commit/f29e06e9092041516589f35e9a84e81a90b6d689", "committedDate": "2020-10-19T15:14:23Z", "message": "Fix front location cvv on one tap and security code fragments"}, "afterCommit": {"oid": "81b760e33d4e64892586f65b98b524d5ce0261eb", "author": {"user": {"login": "guchito9", "name": "Guche Mantuano"}}, "url": "https://github.com/mercadopago/px-android/commit/81b760e33d4e64892586f65b98b524d5ce0261eb", "committedDate": "2020-10-19T15:18:17Z", "message": "Fix front location cvv on one tap and security code fragments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExODk3NTI4", "url": "https://github.com/mercadopago/px-android/pull/2358#pullrequestreview-511897528", "createdAt": "2020-10-19T15:37:25Z", "commit": {"oid": "81b760e33d4e64892586f65b98b524d5ce0261eb"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNTozNzoyNVrOHkU2Rw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNTo0MjoxM1rOHkVERA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg1MjM1OQ==", "bodyText": "Con el is no te lo casteo? es por el <*>?", "url": "https://github.com/mercadopago/px-android/pull/2358#discussion_r507852359", "createdAt": "2020-10-19T15:37:25Z", "author": {"login": "jorGonzalez291292"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/base/BaseFragment.kt", "diffHunk": "@@ -18,4 +18,10 @@ abstract class BaseFragment : Fragment() {\n         super.onDetach()\n         fragmentCommunicationViewModel = null\n     }\n+\n+    protected fun forceDoBackPressed() {\n+        if (context is PXActivity<*>) {\n+            (context as PXActivity<*>).forceDoBackPressed()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81b760e33d4e64892586f65b98b524d5ce0261eb"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg1NTk0MA==", "bodyText": "Porque siempre es true? No deber\u00edamos devolver payButtonFragment.isExploding()?", "url": "https://github.com/mercadopago/px-android/pull/2358#discussion_r507855940", "createdAt": "2020-10-19T15:42:13Z", "author": {"login": "jorGonzalez291292"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/security_code/SecurityCodeFragment.kt", "diffHunk": "@@ -273,10 +256,16 @@ internal class SecurityCodeFragment : BaseFragment(), PayButton.Handler, BackHan\n \n     override fun onCvvRequested() = PayButton.CvvRequestedModel(fragmentContainer, renderMode)\n \n-    override fun handleBack() = payButtonFragment.isExploding().also { isExploding ->\n-        if (!isExploding) {\n+    override fun handleBack(): Boolean {\n+        if (backEnabled && !payButtonFragment.isExploding()) {\n             securityCodeViewModel.onBack()\n+            transition.prepareForExit()\n+            ViewUtils.hideKeyboard(activity)\n+            postDelayed(100) {\n+                forceDoBackPressed()\n+            }\n         }\n+        return true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81b760e33d4e64892586f65b98b524d5ce0261eb"}, "originalPosition": 66}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExOTMwMDA5", "url": "https://github.com/mercadopago/px-android/pull/2358#pullrequestreview-511930009", "createdAt": "2020-10-19T16:10:55Z", "commit": {"oid": "81b760e33d4e64892586f65b98b524d5ce0261eb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "81b760e33d4e64892586f65b98b524d5ce0261eb", "author": {"user": {"login": "guchito9", "name": "Guche Mantuano"}}, "url": "https://github.com/mercadopago/px-android/commit/81b760e33d4e64892586f65b98b524d5ce0261eb", "committedDate": "2020-10-19T15:18:17Z", "message": "Fix front location cvv on one tap and security code fragments"}, "afterCommit": {"oid": "aa04d62da1583abf97994f406aa1f0ec52db61cb", "author": {"user": {"login": "guchito9", "name": "Guche Mantuano"}}, "url": "https://github.com/mercadopago/px-android/commit/aa04d62da1583abf97994f406aa1f0ec52db61cb", "committedDate": "2020-10-19T16:38:57Z", "message": "Fix front location cvv on one tap and security code fragments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExOTgwODQ4", "url": "https://github.com/mercadopago/px-android/pull/2358#pullrequestreview-511980848", "createdAt": "2020-10-19T17:12:27Z", "commit": {"oid": "aa04d62da1583abf97994f406aa1f0ec52db61cb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNzoxMjoyN1rOHkYzvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNzoxMjoyN1rOHkYzvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzkxNzI0NQ==", "bodyText": "Est\u00e1 perfectamente dise\u00f1ado! solo cambiaria un poco los nombres\nonBackPressed()\nforceBack()\nprivate doBack()\ndoBack tiene toda la logica de lo que es hacer back, onBackPressed ahora ejecuta un doBack en vez de un forceDoBackPressed y por ultimo matamos este ultimo nombre que es bastante confuso", "url": "https://github.com/mercadopago/px-android/pull/2358#discussion_r507917245", "createdAt": "2020-10-19T17:12:27Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/base/PXActivity.java", "diffHunk": "@@ -56,6 +56,10 @@ public void attachBaseContext(@NonNull final Context context) {\n \n     @Override\n     public void onBackPressed() {\n+        forceDoBackPressed();\n+    }\n+\n+    public final void forceDoBackPressed() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa04d62da1583abf97994f406aa1f0ec52db61cb"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4cacffb6eae3c62fac25dbd45265c4ec1dceb38", "author": {"user": {"login": "guchito9", "name": "Guche Mantuano"}}, "url": "https://github.com/mercadopago/px-android/commit/e4cacffb6eae3c62fac25dbd45265c4ec1dceb38", "committedDate": "2020-10-19T17:59:03Z", "message": "Fix front location cvv on one tap and security code fragments"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "aa04d62da1583abf97994f406aa1f0ec52db61cb", "author": {"user": {"login": "guchito9", "name": "Guche Mantuano"}}, "url": "https://github.com/mercadopago/px-android/commit/aa04d62da1583abf97994f406aa1f0ec52db61cb", "committedDate": "2020-10-19T16:38:57Z", "message": "Fix front location cvv on one tap and security code fragments"}, "afterCommit": {"oid": "e4cacffb6eae3c62fac25dbd45265c4ec1dceb38", "author": {"user": {"login": "guchito9", "name": "Guche Mantuano"}}, "url": "https://github.com/mercadopago/px-android/commit/e4cacffb6eae3c62fac25dbd45265c4ec1dceb38", "committedDate": "2020-10-19T17:59:03Z", "message": "Fix front location cvv on one tap and security code fragments"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3691, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}