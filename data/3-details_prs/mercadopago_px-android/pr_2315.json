{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc5NzkyNDY5", "number": 2315, "title": "[feature][ci size] new payment congrats", "bodyText": "", "createdAt": "2020-09-04T15:20:02Z", "url": "https://github.com/mercadopago/px-android/pull/2315", "merged": true, "mergeCommit": {"oid": "eb5d2cdfaf417ebc4fdcbf5a7a01b91675f699f0"}, "closed": true, "closedAt": "2020-09-14T19:58:30Z", "author": {"login": "cgaggino"}, "timelineItems": {"totalCount": 50, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCCLEXgH2gAyNDc5NzkyNDY5OjY2ZTRkN2ZmNWM3NWJjODQ4YTVlNTk0Mzc5MmIyNGZlOTM5MWU4YmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdI4x7hgFqTQ4ODA5NjIyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "66e4d7ff5c75bc848a5e5943792b24fe9391e8bd", "author": {"user": {"login": "mmunozpatinomeli", "name": null}}, "url": "https://github.com/mercadopago/px-android/commit/66e4d7ff5c75bc848a5e5943792b24fe9391e8bd", "committedDate": "2020-08-24T12:56:59Z", "message": "PaymentCongrats"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76cc491c5cdfd3dafc54ae8b1520a11965cffd5f", "author": {"user": {"login": "guchito9", "name": "Guche Mantuano"}}, "url": "https://github.com/mercadopago/px-android/commit/76cc491c5cdfd3dafc54ae8b1520a11965cffd5f", "committedDate": "2020-08-24T14:42:17Z", "message": "Merge pull request #2298 from nmanuelidesML/feature/payment-congrats-rebase\n\nPaymentCongrats Rebase"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "673ae164309e86c907f0c8afacdc3f7d08749f78", "author": {"user": {"login": "nmanuelidesML", "name": "Niko Manuelides"}}, "url": "https://github.com/mercadopago/px-android/commit/673ae164309e86c907f0c8afacdc3f7d08749f78", "committedDate": "2020-08-26T13:43:48Z", "message": "fixing tracking"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2419433ece9e22b7e7c430549f2c2683877a4aea", "author": {"user": {"login": "guchito9", "name": "Guche Mantuano"}}, "url": "https://github.com/mercadopago/px-android/commit/2419433ece9e22b7e7c430549f2c2683877a4aea", "committedDate": "2020-08-26T13:45:09Z", "message": "Merge pull request #2289 from nmanuelidesML/feature/fixing_tracking\n\nFixing tracking in new congrats"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "117e6793661a0ea38847d399a4d949c168cd9c6c", "author": {"user": {"login": "mmunozpatinomeli", "name": null}}, "url": "https://github.com/mercadopago/px-android/commit/117e6793661a0ea38847d399a4d949c168cd9c6c", "committedDate": "2020-08-26T16:42:26Z", "message": "Fixing NPE on tracking data"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cc888e519607a90970ed370cd00e6710d03cbc4", "author": {"user": {"login": "guchito9", "name": "Guche Mantuano"}}, "url": "https://github.com/mercadopago/px-android/commit/8cc888e519607a90970ed370cd00e6710d03cbc4", "committedDate": "2020-08-26T17:10:04Z", "message": "Merge pull request #2301 from mmunozpatinomeli/feature/fixing_NPE_tracking\n\nFixing NPE on tracking data"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f642cde226d7d08c3aca7e32c9f0a87c07dfc5a", "author": {"user": {"login": "mmunozpatinomeli", "name": null}}, "url": "https://github.com/mercadopago/px-android/commit/9f642cde226d7d08c3aca7e32c9f0a87c07dfc5a", "committedDate": "2020-08-27T13:30:22Z", "message": "Added autoReturn support"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8747afc7e1fd358668a1062906701a96157b942e", "author": {"user": {"login": "guchito9", "name": "Guche Mantuano"}}, "url": "https://github.com/mercadopago/px-android/commit/8747afc7e1fd358668a1062906701a96157b942e", "committedDate": "2020-08-27T14:16:26Z", "message": "Merge pull request #2300 from mmunozpatinomeli/feauture/payment_congrats_back_url_support\n\n[PaymentCongrats] Added autoReturn support"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02a3adfde3eb1af2659e29945c241b645e7cfb60", "author": {"user": {"login": "mmunozpatinomeli", "name": null}}, "url": "https://github.com/mercadopago/px-android/commit/02a3adfde3eb1af2659e29945c241b645e7cfb60", "committedDate": "2020-08-27T19:02:34Z", "message": "Added custom sorting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a95bcfd645bb260eed08f1010d3c22346955a55", "author": {"user": {"login": "guchito9", "name": "Guche Mantuano"}}, "url": "https://github.com/mercadopago/px-android/commit/6a95bcfd645bb260eed08f1010d3c22346955a55", "committedDate": "2020-08-27T19:33:10Z", "message": "Merge pull request #2305 from mmunozpatinomeli/feature/add_custon_sorting\n\n[PaymentCongrats] Adding custon sorting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24468d06e2947f478382167ef54dbc6b06f8e81c", "author": {"user": {"login": "nmanuelidesML", "name": "Niko Manuelides"}}, "url": "https://github.com/mercadopago/px-android/commit/24468d06e2947f478382167ef54dbc6b06f8e81c", "committedDate": "2020-08-28T19:47:11Z", "message": "adding sessionId, flow and flowExtrInfo to tracking"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6", "author": {"user": {"login": "guchito9", "name": "Guche Mantuano"}}, "url": "https://github.com/mercadopago/px-android/commit/c2a781f58796b3341d6b4283945493696db297f6", "committedDate": "2020-08-31T15:04:08Z", "message": "Merge pull request #2306 from nmanuelidesML/feature/adding_flow_detail\n\nSe agrega sessionId, flow y flowExtraInfo a los datos de trackeo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTQzNDE2", "url": "https://github.com/mercadopago/px-android/pull/2315#pullrequestreview-482943416", "createdAt": "2020-09-04T21:17:47Z", "commit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMToxNzo0N1rOHNbthA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMToxNzo0N1rOHNbthA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg0NzU1Ng==", "bodyText": "\ud83d\udc40", "url": "https://github.com/mercadopago/px-android/pull/2315#discussion_r483847556", "createdAt": "2020-09-04T21:17:47Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/business_result/BusinessPaymentResultActivity.java", "diffHunk": "@@ -86,9 +67,10 @@ protected void onStop() {\n \n     @NonNull\n     private BusinessPaymentResultPresenter createPresenter() {\n-        final BusinessPaymentModel model = getIntent().getParcelableExtra(EXTRA_BUSINESS_PAYMENT_MODEL);\n-        return new BusinessPaymentResultPresenter(Session.getInstance().getConfigurationModule().getPaymentSettings(),\n-            model, BehaviourProvider.getFlowBehaviour(), isMP(this));\n+        final PaymentCongratsModel model = getIntent().getParcelableExtra(PAYMENT_CONGRATS);\n+         //TODO FIX PAYMENTSETTINGS PARAM\n+        return new BusinessPaymentResultPresenter(/*null,*/model,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "originalPosition": 70}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTQ1NzQ2", "url": "https://github.com/mercadopago/px-android/pull/2315#pullrequestreview-482945746", "createdAt": "2020-09-04T21:24:19Z", "commit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMToyNDoxOVrOHNb00g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMToyNDoxOVrOHNb00g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg0OTQyNg==", "bodyText": "Podemos llamar esto model? ya que no es un payment tecnicamente hablando", "url": "https://github.com/mercadopago/px-android/pull/2315#discussion_r483849426", "createdAt": "2020-09-04T21:24:19Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/business_result/BusinessPaymentResultMapper.java", "diffHunk": "@@ -25,48 +25,44 @@\n     }\n \n     @Override\n-    public BusinessPaymentResultViewModel map(@NonNull final BusinessPaymentModel model) {\n-        final PaymentResultHeader.Model headerModel = getHeaderModel(model.getPayment());\n+    public BusinessPaymentResultViewModel map(@NonNull final PaymentCongratsModel model) {\n+        final PaymentResultHeader.Model headerModel = getHeaderModel(model);\n         final PaymentResultBody.Model bodyModel = getBodyModel(model);\n         return new BusinessPaymentResultViewModel(headerModel, bodyModel,\n-            model.getPayment().getPrimaryAction(), model.getPayment().getSecondaryAction(),\n-            RedirectHelper.INSTANCE.shouldAutoReturn(autoReturn, model.getPayment().getPaymentStatus()));\n+            model.getFooterMainAction(), model.getFooterSecondaryAction(),\n+            RedirectHelper.INSTANCE.shouldAutoReturn(autoReturn, model.getCongratsType().name));\n     }\n \n     @NonNull\n-    private PaymentResultBody.Model getBodyModel(@NonNull final BusinessPaymentModel model) {\n-        final BusinessPayment payment = model.getPayment();\n+    private PaymentResultBody.Model getBodyModel(@NonNull final PaymentCongratsModel model) {\n         final List<PaymentResultMethod.Model> methodModels = new ArrayList<>();\n-        if (payment.shouldShowPaymentMethod()) {\n-            for (final PaymentData paymentData : model.getPaymentResult().getPaymentDataList()) {\n-                methodModels.add(PaymentResultMethod.Model.with(paymentData, model.getCurrency(),\n-                    payment.getStatementDescription()));\n+        if (model.getShouldShowPaymentMethod()) {\n+            for (final PaymentInfo paymentInfo : model.getPaymentsInfo()) {\n+                methodModels.add(PaymentResultMethod.Model.with(paymentInfo,\n+                    model.getStatementDescription()));\n             }\n         }\n-\n-        final PaymentResultType type = PaymentResultType.from(payment.getDecorator());\n+        final PaymentCongratsModel.CongratsType type = model.getCongratsType();\n         return new PaymentResultBody.Model.Builder()\n             .setMethodModels(methodModels)\n-            .setCongratsViewModel(new CongratsResponseMapper(new BusinessPaymentResultTracker())\n-                .map(model.getCongratsResponse()))\n-            .setReceiptId((type == PaymentResultType.APPROVED && payment.shouldShowReceipt()) ? payment.getReceipt() : null)\n-            .setHelp(payment.getHelp())\n-            .setStatement(payment.getStatementDescription())\n-            .setTopFragment(payment.getTopFragment())\n-            .setBottomFragment(payment.getBottomFragment())\n-            .setImportantFragment(payment.getImportantFragment())\n+            .setCongratsViewModel(new PaymentCongratsResponseMapper(new BusinessPaymentResultTracker())\n+                .map(model.getPaymentCongratsResponse()))\n+            .setReceiptId((type == PaymentCongratsModel.CongratsType.APPROVED && model.getShouldShowReceipt()) ? String\n+                .valueOf(model.getPaymentId()) : null)\n+            .setHelp(model.getHelp())\n+            .setStatement(model.getStatementDescription())\n+            .setTopFragment(model.getTopFragment())\n+            .setBottomFragment(model.getBottomFragment())\n+            .setImportantFragment(model.getImportantFragment())\n             .build();\n     }\n \n     @NonNull\n-    private PaymentResultHeader.Model getHeaderModel(@NonNull final BusinessPayment payment) {\n+    private PaymentResultHeader.Model getHeaderModel(@NonNull final PaymentCongratsModel payment) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "originalPosition": 82}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTQ2MzMz", "url": "https://github.com/mercadopago/px-android/pull/2315#pullrequestreview-482946333", "createdAt": "2020-09-04T21:26:01Z", "commit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMToyNjowMlrOHNb21A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMToyNjowMlrOHNb21A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg0OTk0MA==", "bodyText": "\ud83d\udc40", "url": "https://github.com/mercadopago/px-android/pull/2315#discussion_r483849940", "createdAt": "2020-09-04T21:26:02Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/business_result/BusinessPaymentResultPresenter.java", "diffHunk": "@@ -29,22 +27,23 @@\n import com.mercadopago.android.px.tracking.internal.events.ViewReceiptEvent;\n import com.mercadopago.android.px.tracking.internal.views.ResultViewTrack;\n import kotlin.Unit;\n+import org.jetbrains.annotations.NotNull;\n \n /* default */ class BusinessPaymentResultPresenter extends BasePresenter<BusinessPaymentResultContract.View>\n     implements ActionDispatcher, BusinessPaymentResultContract.Presenter, PaymentResultBody.Listener {\n \n-    @NonNull private final PaymentSettingRepository paymentSettings;\n-    private final BusinessPaymentModel model;\n+    private final PaymentCongratsModel model;\n+    //@NonNull private final PaymentSettingRepository paymentSettings;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "originalPosition": 31}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTQ2NTM0", "url": "https://github.com/mercadopago/px-android/pull/2315#pullrequestreview-482946534", "createdAt": "2020-09-04T21:26:34Z", "commit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMToyNjozNFrOHNb3dQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMToyNjozNFrOHNb3dQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg1MDEwMQ==", "bodyText": "Esto deber\u00eda ser non null, no?", "url": "https://github.com/mercadopago/px-android/pull/2315#discussion_r483850101", "createdAt": "2020-09-04T21:26:34Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/business_result/BusinessPaymentResultPresenter.java", "diffHunk": "@@ -29,22 +27,23 @@\n import com.mercadopago.android.px.tracking.internal.events.ViewReceiptEvent;\n import com.mercadopago.android.px.tracking.internal.views.ResultViewTrack;\n import kotlin.Unit;\n+import org.jetbrains.annotations.NotNull;\n \n /* default */ class BusinessPaymentResultPresenter extends BasePresenter<BusinessPaymentResultContract.View>\n     implements ActionDispatcher, BusinessPaymentResultContract.Presenter, PaymentResultBody.Listener {\n \n-    @NonNull private final PaymentSettingRepository paymentSettings;\n-    private final BusinessPaymentModel model;\n+    private final PaymentCongratsModel model;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTQ2Njc1", "url": "https://github.com/mercadopago/px-android/pull/2315#pullrequestreview-482946675", "createdAt": "2020-09-04T21:26:57Z", "commit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMToyNjo1N1rOHNb38g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMToyNjo1N1rOHNb38g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg1MDIyNg==", "bodyText": "\ud83d\udc40", "url": "https://github.com/mercadopago/px-android/pull/2315#discussion_r483850226", "createdAt": "2020-09-04T21:26:57Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/business_result/BusinessPaymentResultPresenter.java", "diffHunk": "@@ -29,22 +27,23 @@\n import com.mercadopago.android.px.tracking.internal.events.ViewReceiptEvent;\n import com.mercadopago.android.px.tracking.internal.views.ResultViewTrack;\n import kotlin.Unit;\n+import org.jetbrains.annotations.NotNull;\n \n /* default */ class BusinessPaymentResultPresenter extends BasePresenter<BusinessPaymentResultContract.View>\n     implements ActionDispatcher, BusinessPaymentResultContract.Presenter, PaymentResultBody.Listener {\n \n-    @NonNull private final PaymentSettingRepository paymentSettings;\n-    private final BusinessPaymentModel model;\n+    private final PaymentCongratsModel model;\n+    //@NonNull private final PaymentSettingRepository paymentSettings;\n     private final ResultViewTrack viewTracker;\n     private final FlowBehaviour flowBehaviour;\n     @Nullable private CongratsAutoReturn.Timer autoReturnTimer;\n \n-    /* default */ BusinessPaymentResultPresenter(@NonNull final PaymentSettingRepository paymentSettings,\n-        @NonNull final BusinessPaymentModel model, @NonNull final FlowBehaviour flowBehaviour, final boolean isMP) {\n-        this.paymentSettings = paymentSettings;\n+    /* default */ BusinessPaymentResultPresenter(/*@NonNull final PaymentSettingRepository paymentSettings,*/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTQ3MTc3", "url": "https://github.com/mercadopago/px-android/pull/2315#pullrequestreview-482947177", "createdAt": "2020-09-04T21:28:26Z", "commit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMToyODoyN1rOHNb5lA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMToyODoyN1rOHNb5lA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg1MDY0NA==", "bodyText": "podemos hacer el getResult directamente en la llamada", "url": "https://github.com/mercadopago/px-android/pull/2315#discussion_r483850644", "createdAt": "2020-09-04T21:28:27Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/business_result/BusinessPaymentResultPresenter.java", "diffHunk": "@@ -56,7 +55,8 @@ public void attachView(final BusinessPaymentResultContract.View view) {\n     @Override\n     public void onFreshStart() {\n         viewTracker.track();\n-        flowBehaviour.trackConversion(new FlowBehaviourResultMapper().map(model.getPayment()));\n+        final FlowBehaviour.Result result = getResult();\n+        flowBehaviour.trackConversion(result);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "originalPosition": 55}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTQ3MjQw", "url": "https://github.com/mercadopago/px-android/pull/2315#pullrequestreview-482947240", "createdAt": "2020-09-04T21:28:37Z", "commit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMToyODozN1rOHNb50w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMToyODozN1rOHNb50w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg1MDcwNw==", "bodyText": "idem", "url": "https://github.com/mercadopago/px-android/pull/2315#discussion_r483850707", "createdAt": "2020-09-04T21:28:37Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/business_result/BusinessPaymentResultPresenter.java", "diffHunk": "@@ -71,6 +71,26 @@ public void onStop() {\n         if (autoReturnTimer != null) {\n             autoReturnTimer.cancel();\n         }\n+        viewTracker.track();\n+        final FlowBehaviour.Result result = getResult();\n+        flowBehaviour.trackConversion(result);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "originalPosition": 65}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTQ4MzYw", "url": "https://github.com/mercadopago/px-android/pull/2315#pullrequestreview-482948360", "createdAt": "2020-09-04T21:29:57Z", "commit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMToyOTo1OFrOHNb7eQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMToyOTo1OFrOHNb7eQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg1MTEyOQ==", "bodyText": "podemos hacer otro mapper como lo era FlowBehaviourResultMapper", "url": "https://github.com/mercadopago/px-android/pull/2315#discussion_r483851129", "createdAt": "2020-09-04T21:29:58Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/business_result/BusinessPaymentResultPresenter.java", "diffHunk": "@@ -71,6 +71,26 @@ public void onStop() {\n         if (autoReturnTimer != null) {\n             autoReturnTimer.cancel();\n         }\n+        viewTracker.track();\n+        final FlowBehaviour.Result result = getResult();\n+        flowBehaviour.trackConversion(result);\n+    }\n+\n+    @NotNull\n+    private FlowBehaviour.Result getResult() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "originalPosition": 69}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTUxMzk1", "url": "https://github.com/mercadopago/px-android/pull/2315#pullrequestreview-482951395", "createdAt": "2020-09-04T21:31:35Z", "commit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMTozMTozNVrOHNb9Wg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMTozMTozNVrOHNb9Wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg1MTYxMA==", "bodyText": "pongamos los nombres de clases y variables consistentes, podemos cambiar a expenseSplit", "url": "https://github.com/mercadopago/px-android/pull/2315#discussion_r483851610", "createdAt": "2020-09-04T21:31:35Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/business_result/BusinessPaymentResultPresenter.java", "diffHunk": "@@ -160,9 +179,9 @@ public void onClickDiscountItem(final int index, @Nullable final String deepLink\n \n     @Override\n     public void onClickMoneySplit() {\n-        final CongratsResponse.MoneySplit moneySplit = model.getCongratsResponse().getMoneySplit();\n+        final PaymentCongratsResponse.ExpenseSplit moneySplit = model.getPaymentCongratsResponse().getExpenseSplit();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "originalPosition": 108}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTc0NTg5", "url": "https://github.com/mercadopago/px-android/pull/2315#pullrequestreview-482974589", "createdAt": "2020-09-04T21:44:02Z", "commit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMTo0NDowM1rOHNcLUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMTo0NDowM1rOHNcLUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg1NTE4NQ==", "bodyText": "Nosotros usamos como convenci\u00f3n que el mapper tiene el nombre del objeto al que mapea, es decir este se llamar\u00eda PaymentCongratsResponseMapper, lo ven muy complicado cambiarlos?", "url": "https://github.com/mercadopago/px-android/pull/2315#discussion_r483855185", "createdAt": "2020-09-04T21:44:03Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/business_result/CongratsResponseMapper.java", "diffHunk": "@@ -1,314 +1,106 @@\n package com.mercadopago.android.px.internal.features.business_result;\n \n import androidx.annotation.NonNull;\n-import com.mercadolibre.android.mlbusinesscomponents.common.MLBusinessSingleItem;\n-import com.mercadolibre.android.mlbusinesscomponents.components.actioncard.MLBusinessActionCardViewData;\n-import com.mercadolibre.android.mlbusinesscomponents.components.common.downloadapp.MLBusinessDownloadAppData;\n-import com.mercadolibre.android.mlbusinesscomponents.components.common.downloadapp.MLBusinessDownloadAppView;\n-import com.mercadolibre.android.mlbusinesscomponents.components.crossselling.MLBusinessCrossSellingBoxData;\n-import com.mercadolibre.android.mlbusinesscomponents.components.discount.MLBusinessDiscountBoxData;\n-import com.mercadolibre.android.mlbusinesscomponents.components.discount.MLBusinessDiscountTracker;\n-import com.mercadolibre.android.mlbusinesscomponents.components.loyalty.MLBusinessLoyaltyRingData;\n-import com.mercadolibre.android.mlbusinesscomponents.components.touchpoint.domain.model.AdditionalEdgeInsets;\n-import com.mercadolibre.android.mlbusinesscomponents.components.touchpoint.domain.response.MLBusinessTouchpointResponse;\n-import com.mercadolibre.android.mlbusinesscomponents.components.touchpoint.tracking.MLBusinessTouchpointTracker;\n-import com.mercadopago.android.px.internal.util.JsonUtil;\n+import androidx.annotation.Nullable;\n+import com.mercadopago.android.px.internal.features.payment_congrats.model.PaymentCongratsResponse;\n+import com.mercadopago.android.px.internal.features.payment_congrats.model.PaymentCongratsText;\n import com.mercadopago.android.px.internal.viewmodel.mappers.Mapper;\n import com.mercadopago.android.px.model.internal.Action;\n import com.mercadopago.android.px.model.internal.CongratsResponse;\n-import java.util.Collections;\n-import java.util.HashMap;\n-import java.util.LinkedList;\n+import java.util.ArrayList;\n import java.util.List;\n-import java.util.Map;\n-import javax.annotation.Nullable;\n \n-public class CongratsResponseMapper extends Mapper<CongratsResponse, CongratsViewModel> {\n-\n-    /* default */ final BusinessPaymentResultTracker discountTracker;\n-\n-    /**\n-     * Constructor\n-     *\n-     * @param discountTracker A {@link BusinessPaymentResultTracker}\n-     */\n-    public CongratsResponseMapper(final BusinessPaymentResultTracker discountTracker) {\n-        this.discountTracker = discountTracker;\n-    }\n+public class CongratsResponseMapper extends Mapper<CongratsResponse, PaymentCongratsResponse> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTgwNzIw", "url": "https://github.com/mercadopago/px-android/pull/2315#pullrequestreview-482980720", "createdAt": "2020-09-04T21:47:20Z", "commit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMTo0NzoyMFrOHNcO6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMTo0NzoyMFrOHNcO6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg1NjEwNQ==", "bodyText": "el mapeo recuerden hacerlo en el viewmodel y que al fragment le llegue el modelo ya mapeado", "url": "https://github.com/mercadopago/px-android/pull/2315#discussion_r483856105", "createdAt": "2020-09-04T21:47:20Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/pay_button/PayButtonFragment.kt", "diffHunk": "@@ -100,8 +101,7 @@ class PayButtonFragment : Fragment(), PayButton.View, SecurityValidationHandler\n             is UIResult.VisualProcessorResult -> PaymentProcessorActivity.start(this, REQ_CODE_PAYMENT_PROCESSOR)\n             is UIError.ConnectionError -> showSnackBar(stateUI.error)\n             is UIResult.PaymentResult -> PaymentResultActivity.start(this, REQ_CODE_CONGRATS, stateUI.model)\n-            is UIResult.BusinessPaymentResult ->\n-                BusinessPaymentResultActivity.start(this, REQ_CODE_CONGRATS, stateUI.model)\n+            is UIResult.BusinessPaymentResult -> PaymentCongrats.show(PaymentCongratsModelMapper().map(stateUI.model), activity, REQ_CODE_CONGRATS)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "originalPosition": 56}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTgzNjg0", "url": "https://github.com/mercadopago/px-android/pull/2315#pullrequestreview-482983684", "createdAt": "2020-09-04T21:49:57Z", "commit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMTo0OTo1N1rOHNcU4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMTo0OTo1N1rOHNcU4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg1NzYzNQ==", "bodyText": "el initialized = true ya no va mas, se puede borrar esta linea", "url": "https://github.com/mercadopago/px-android/pull/2315#discussion_r483857635", "createdAt": "2020-09-04T21:49:57Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/di/Session.java", "diffHunk": "@@ -152,6 +153,15 @@ public void init(@NonNull final MercadoPagoCardStorage mercadoPagoCardStorage) {\n         initialized = true;\n     }\n \n+    public void init(@NonNull final PaymentCongratsModel paymentCongratsModel) {\n+        initialized = true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2438301ad5368c6a581ce724e019cf414c05d1f", "author": {"user": {"login": "mmunozpatinomeli", "name": null}}, "url": "https://github.com/mercadopago/px-android/commit/c2438301ad5368c6a581ce724e019cf414c05d1f", "committedDate": "2020-09-04T21:50:17Z", "message": "Rebase and iconId added"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTgzOTA5", "url": "https://github.com/mercadopago/px-android/pull/2315#pullrequestreview-482983909", "createdAt": "2020-09-04T21:50:45Z", "commit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMTo1MDo0NVrOHNcXcg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMTo1MDo0NVrOHNcXcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg1ODI5MA==", "bodyText": "esto deberia estar en la test app, no en el m\u00f3dulo de px-checkout", "url": "https://github.com/mercadopago/px-android/pull/2315#discussion_r483858290", "createdAt": "2020-09-04T21:50:45Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/payment_congrats/PaymentCongratsMock.java", "diffHunk": "@@ -0,0 +1,97 @@\n+package com.mercadopago.android.px.internal.features.payment_congrats;\n+\n+import com.mercadopago.android.px.internal.features.payment_congrats.model.PXPaymentCongratsTracking;\n+import com.mercadopago.android.px.internal.features.payment_congrats.model.PaymentCongratsModel;\n+import com.mercadopago.android.px.internal.features.payment_congrats.model.PaymentCongratsResponse;\n+import com.mercadopago.android.px.internal.features.payment_congrats.model.PaymentInfo;\n+import java.math.BigDecimal;\n+import java.util.ArrayList;\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+public final class PaymentCongratsMock {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTg1MTYw", "url": "https://github.com/mercadopago/px-android/pull/2315#pullrequestreview-482985160", "createdAt": "2020-09-04T21:54:37Z", "commit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMTo1NDozOFrOHNceBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMTo1NDozOFrOHNceBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg1OTk3Mg==", "bodyText": "ac\u00e1 podemos usar directamente el json util tambien, parcel.writeString(JsonUtil.toJson(flowExtraInfo))", "url": "https://github.com/mercadopago/px-android/pull/2315#discussion_r483859972", "createdAt": "2020-09-04T21:54:38Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/payment_congrats/model/PXPaymentCongratsTracking.kt", "diffHunk": "@@ -0,0 +1,59 @@\n+package com.mercadopago.android.px.internal.features.payment_congrats.model\n+\n+import android.os.Parcel\n+import android.os.Parcelable\n+import com.mercadopago.android.px.internal.extensions.readBigDecimal\n+import com.mercadopago.android.px.internal.extensions.writeBigDecimal\n+import com.mercadopago.android.px.internal.util.JsonUtil\n+import org.json.JSONObject\n+import java.math.BigDecimal\n+\n+data class PXPaymentCongratsTracking(\n+        val campaignId: String?,\n+        val currencyId: String?,\n+        val paymentStatusDetail: String?,\n+        val paymentId: Long?,\n+        val totalAmount: BigDecimal?,\n+        val flowExtraInfo: Map<String, Any>? = HashMap(),\n+        val flow: String?,\n+        val sessionId: String?\n+) : Parcelable {\n+\n+    constructor(parcel: Parcel) : this(\n+            parcel.readString(),\n+            parcel.readString(),\n+            parcel.readString(),\n+            parcel.readValue(Long::class.java.classLoader) as? Long,\n+            parcel.readBigDecimal(),\n+            JsonUtil.getMapFromJson(parcel.readString()),\n+            parcel.readString(),\n+            parcel.readString()\n+    )\n+\n+\n+    override fun writeToParcel(parcel: Parcel, flags: Int) {\n+        parcel.writeString(campaignId)\n+        parcel.writeString(currencyId)\n+        parcel.writeString(paymentStatusDetail)\n+        parcel.writeValue(paymentId)\n+        parcel.writeBigDecimal(totalAmount)\n+        val flowExtraInfoString: String? = JSONObject(flowExtraInfo).toString()\n+        parcel.writeString(flowExtraInfoString)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTg4OTUx", "url": "https://github.com/mercadopago/px-android/pull/2315#pullrequestreview-482988951", "createdAt": "2020-09-04T22:07:09Z", "commit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMjowNzowOVrOHNcqdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMjowNzowOVrOHNcqdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg2MzE1OA==", "bodyText": "podemos usar directamente los de ResultViewTrack y hacerlos publicos", "url": "https://github.com/mercadopago/px-android/pull/2315#discussion_r483863158", "createdAt": "2020-09-04T22:07:09Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/payment_congrats/model/PaymentCongratsModel.java", "diffHunk": "@@ -0,0 +1,683 @@\n+package com.mercadopago.android.px.internal.features.payment_congrats.model;\n+\n+import android.os.Bundle;\n+import android.os.Parcel;\n+import android.os.Parcelable;\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.fragment.app.Fragment;\n+import com.mercadopago.android.px.internal.util.TextUtil;\n+import com.mercadopago.android.px.model.ExitAction;\n+import com.mercadopago.android.px.model.ExternalFragment;\n+import com.mercadopago.android.px.model.PaymentData;\n+import java.math.BigDecimal;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+public class PaymentCongratsModel implements Parcelable {\n+    public static final Parcelable.Creator<PaymentCongratsModel> CREATOR =\n+        new Parcelable.Creator<PaymentCongratsModel>() {\n+            @Override\n+            public PaymentCongratsModel createFromParcel(final Parcel source) {\n+                return new PaymentCongratsModel(source);\n+            }\n+\n+            @Override\n+            public PaymentCongratsModel[] newArray(final int size) {\n+                return new PaymentCongratsModel[size];\n+            }\n+        };\n+\n+    public static final String SUCCESS = \"success\";\n+    public static final String PENDING = \"further_action_needed\";\n+    public static final String ERROR = \"error\";\n+    public static final String UNKNOWN = \"unknown\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTg5MzAz", "url": "https://github.com/mercadopago/px-android/pull/2315#pullrequestreview-482989303", "createdAt": "2020-09-04T22:08:22Z", "commit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMjowODoyMlrOHNcrnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMjowODoyMlrOHNcrnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg2MzQ1NQ==", "bodyText": "este dato parece unicamente de tracking, les parece bien meterlo dentro de PXPaymentCongratsTracking ? para que no se confunda conque es el status posta del pago", "url": "https://github.com/mercadopago/px-android/pull/2315#discussion_r483863455", "createdAt": "2020-09-04T22:08:22Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/payment_congrats/model/PaymentCongratsModel.java", "diffHunk": "@@ -0,0 +1,683 @@\n+package com.mercadopago.android.px.internal.features.payment_congrats.model;\n+\n+import android.os.Bundle;\n+import android.os.Parcel;\n+import android.os.Parcelable;\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.fragment.app.Fragment;\n+import com.mercadopago.android.px.internal.util.TextUtil;\n+import com.mercadopago.android.px.model.ExitAction;\n+import com.mercadopago.android.px.model.ExternalFragment;\n+import com.mercadopago.android.px.model.PaymentData;\n+import java.math.BigDecimal;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+public class PaymentCongratsModel implements Parcelable {\n+    public static final Parcelable.Creator<PaymentCongratsModel> CREATOR =\n+        new Parcelable.Creator<PaymentCongratsModel>() {\n+            @Override\n+            public PaymentCongratsModel createFromParcel(final Parcel source) {\n+                return new PaymentCongratsModel(source);\n+            }\n+\n+            @Override\n+            public PaymentCongratsModel[] newArray(final int size) {\n+                return new PaymentCongratsModel[size];\n+            }\n+        };\n+\n+    public static final String SUCCESS = \"success\";\n+    public static final String PENDING = \"further_action_needed\";\n+    public static final String ERROR = \"error\";\n+    public static final String UNKNOWN = \"unknown\";\n+\n+    //Basic data\n+    @NonNull private final CongratsType congratsType;\n+    @NonNull private final String title;\n+    @Nullable private final String subtitle;\n+    @NonNull private final String imageUrl;\n+    @Nullable private final String help;\n+    private final int iconId;\n+    @Nullable private final String statementDescription;\n+    private final boolean shouldShowPaymentMethod;\n+    @NonNull private final List<PaymentInfo> paymentsInfo;\n+\n+    //Receipt data\n+    private final boolean shouldShowReceipt;\n+\n+    // Exit Buttons\n+    @Nullable private final ExitAction footerMainAction;\n+    @Nullable private final ExitAction footerSecondaryAction;\n+    // custom views for integrators\n+    @Nullable private final ExternalFragment topFragment;\n+    @Nullable private final ExternalFragment bottomFragment;\n+    @Nullable private final ExternalFragment importantFragment;\n+    @Nullable private final PaymentCongratsResponse paymentCongratsResponse;\n+\n+    //Internal PX data\n+    @Nullable private final String autoReturn;\n+\n+    //Internal PX Tracking data\n+    @Nullable private final Long paymentId;\n+    @NonNull private final PXPaymentCongratsTracking pxPaymentCongratsTracking;\n+    @NonNull private final String paymentStatus;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "originalPosition": 65}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTkwNjcy", "url": "https://github.com/mercadopago/px-android/pull/2315#pullrequestreview-482990672", "createdAt": "2020-09-04T22:13:03Z", "commit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMjoxMzowM1rOHNcwGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMjoxMzowM1rOHNcwGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg2NDYwMw==", "bodyText": "les parece poner getTrackingCongratsStatus o algo asi? que se entienda que lo que estamos sacando es ese dato, mappedResult puede confundir a primera lectura", "url": "https://github.com/mercadopago/px-android/pull/2315#discussion_r483864603", "createdAt": "2020-09-04T22:13:03Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/payment_congrats/model/PaymentCongratsModelMapper.java", "diffHunk": "@@ -0,0 +1,152 @@\n+package com.mercadopago.android.px.internal.features.payment_congrats.model;\n+\n+import androidx.annotation.NonNull;\n+import com.mercadopago.android.px.internal.di.Session;\n+import com.mercadopago.android.px.internal.features.business_result.CongratsResponseMapper;\n+import com.mercadopago.android.px.internal.repository.PaymentSettingRepository;\n+import com.mercadopago.android.px.internal.util.CurrenciesUtil;\n+import com.mercadopago.android.px.internal.util.PaymentDataHelper;\n+import com.mercadopago.android.px.internal.viewmodel.BusinessPaymentModel;\n+import com.mercadopago.android.px.model.BusinessPayment;\n+import com.mercadopago.android.px.model.Currency;\n+import com.mercadopago.android.px.model.PaymentData;\n+import com.mercadopago.android.px.model.PaymentResult;\n+import java.math.BigDecimal;\n+\n+public class PaymentCongratsModelMapper {\n+\n+    /**\n+     * Takes a BusinessPaymentModel and outputs a PaymentCongratsModel\n+     *\n+     * @param businessPaymentModel the data to be converted\n+     * @return a paymentCongratsModel built from a businessPaymentModel\n+     */\n+    public PaymentCongratsModel map(final BusinessPaymentModel businessPaymentModel) {\n+\n+        final PaymentSettingRepository paymentSettings = Session.getInstance().getConfigurationModule().getPaymentSettings();\n+\n+        final PaymentCongratsResponse paymentCongratsResponse =\n+            new CongratsResponseMapper().map(businessPaymentModel.getCongratsResponse());\n+        final BusinessPayment businessPayment = businessPaymentModel.getPayment();\n+        final PXPaymentCongratsTracking tracking = new PXPaymentCongratsTracking(\n+            businessPaymentModel.getPaymentResult().getPaymentData().getCampaign() != null ? businessPaymentModel\n+                .getPaymentResult().getPaymentData().getCampaign().getId() : \"\",\n+            businessPaymentModel.getCurrency().getId(),\n+            businessPayment.getPaymentStatusDetail(),\n+            businessPaymentModel.getPaymentResult().getPaymentId(),\n+            Session.getInstance().getConfigurationModule().getPaymentSettings().getCheckoutPreference()\n+                .getTotalAmount(),\n+            Session.getInstance().getConfigurationModule().getTrackingRepository().getFlowDetail(),\n+            Session.getInstance().getConfigurationModule().getTrackingRepository().getFlowId(),\n+            Session.getInstance().getConfigurationModule().getTrackingRepository().getSessionId()\n+        );\n+        final PaymentCongratsModel.Builder builder = new PaymentCongratsModel.Builder()\n+            .withTracking(tracking)\n+            .withPaymentStatus(getMappedResult(businessPaymentModel.getPaymentResult()))\n+            .withDiscountCouponsAmount(\n+                PaymentDataHelper.getTotalDiscountAmount(businessPaymentModel.getPaymentResult().getPaymentDataList()))\n+            .withCongratsType(\n+                PaymentCongratsModel.CongratsType.fromName(businessPayment.getPaymentStatus()))\n+            .withCrossSelling(paymentCongratsResponse.getCrossSellings())\n+            .withHeader(businessPayment.getTitle(), businessPayment.getImageUrl())\n+            .withShouldShowPaymentMethod(businessPayment.shouldShowPaymentMethod())\n+            .withIconId(businessPayment.getIcon())\n+            .withPaymentData(businessPaymentModel.getPaymentResult().getPaymentData())\n+            .withIconId(businessPayment.getIcon())\n+            .withAutoReturn(paymentSettings.getCheckoutPreference().getAutoReturn())\n+            .withCustomSorting(businessPaymentModel.getCongratsResponse().hasCustomOrder());\n+\n+        if (!businessPaymentModel.getPaymentResult().getPaymentDataList().isEmpty()) {\n+            builder.withPaymentMethodInfo(\n+                getPaymentsInfo(businessPaymentModel.getPaymentResult().getPaymentDataList().get(0),\n+                    businessPaymentModel.getCurrency()));\n+        }\n+        if (businessPaymentModel.getPaymentResult().getPaymentDataList().size() > 1) {\n+            builder.withPaymentMethodInfo(\n+                getPaymentsInfo(businessPaymentModel.getPaymentResult().getPaymentDataList().get(1),\n+                    businessPaymentModel.getCurrency()));\n+        }\n+        if (businessPayment.getPrimaryAction() != null && businessPayment.getPrimaryAction().getName() != null) {\n+            builder.withFooterMainAction(businessPayment.getPrimaryAction().getName(),\n+                businessPayment.getPrimaryAction().getResCode());\n+        }\n+        if (businessPayment.getSecondaryAction() != null && businessPayment.getSecondaryAction().getName() != null) {\n+            builder.withFooterSecondaryAction(businessPayment.getSecondaryAction().getName(),\n+                businessPayment.getSecondaryAction().getResCode());\n+        }\n+        if (businessPayment.getHelp() != null) {\n+            builder.withHelp(businessPayment.getHelp());\n+        }\n+        if (paymentCongratsResponse.getDiscount() != null) {\n+            builder.withDiscounts(paymentCongratsResponse.getDiscount());\n+        }\n+        if (businessPayment.getBottomFragment() != null) {\n+            builder.withBottomFragment(businessPayment.getBottomFragment());\n+        }\n+        if (businessPayment.getTopFragment() != null) {\n+            builder.withTopFragment(businessPayment.getTopFragment());\n+        }\n+        if (businessPayment.getImportantFragment() != null) {\n+            builder.withImportantFragment(businessPayment.getImportantFragment());\n+        }\n+        if (paymentCongratsResponse.getExpenseSplit() != null) {\n+            builder.withExpenseSplit(paymentCongratsResponse.getExpenseSplit());\n+        }\n+        if (paymentCongratsResponse.getLoyalty() != null) {\n+            builder.withLoyalty(paymentCongratsResponse.getLoyalty());\n+        }\n+        if (businessPaymentModel.getPaymentResult().getPaymentId() != null) {\n+            builder.withReceipt(businessPaymentModel.getPaymentResult().getPaymentId(),\n+                businessPayment.shouldShowReceipt(),\n+                paymentCongratsResponse.getViewReceipt());\n+        }\n+        if (businessPayment.getStatementDescription() != null) {\n+            builder.withStatementDescription(businessPayment.getStatementDescription());\n+        }\n+        if (businessPayment.getSubtitle() != null) {\n+            builder.withSubtitle(businessPayment.getSubtitle());\n+        }\n+\n+        return builder.build();\n+    }\n+\n+    private PaymentInfo getPaymentsInfo(final PaymentData paymentData, final Currency currency) {\n+        final PaymentInfo.Builder paymentInfo = new PaymentInfo.Builder()\n+            .withPaymentMethodType(\n+                PaymentInfo.PaymentMethodType.fromName(paymentData.getPaymentMethod().getPaymentTypeId()))\n+            .withPaymentMethodId(paymentData.getPaymentMethod().getId())\n+            .withPaymentMethodName(paymentData.getPaymentMethod().getName())\n+            .withPaidAmount(getPrettyAmount(currency,\n+                PaymentDataHelper.getPrettyAmountToPay(paymentData)));\n+        if (paymentData.getToken() != null && paymentData.getToken().getLastFourDigits() != null) {\n+            paymentInfo.withLastFourDigits(paymentData.getToken().getLastFourDigits());\n+        }\n+        if (paymentData.getPayerCost() != null) {\n+            paymentInfo.withInstallmentsData(\n+                paymentData.getPayerCost().getInstallments(),\n+                getPrettyAmount(currency, paymentData.getPayerCost().getInstallmentAmount()),\n+                getPrettyAmount(currency, paymentData.getPayerCost().getTotalAmount()),\n+                paymentData.getPayerCost().getInstallmentRate());\n+        }\n+\n+        return paymentInfo.build();\n+    }\n+\n+    private String getPrettyAmount(@NonNull final Currency currency, @NonNull final BigDecimal amount) {\n+        return CurrenciesUtil.getLocalizedAmountWithoutZeroDecimals(currency, amount);\n+    }\n+\n+    private String getMappedResult(final PaymentResult paymentResult) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "originalPosition": 139}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTkxMDI1", "url": "https://github.com/mercadopago/px-android/pull/2315#pullrequestreview-482991025", "createdAt": "2020-09-04T22:14:20Z", "commit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMjoxNDoyMFrOHNcxFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMjoxNDoyMFrOHNcxFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg2NDg1NQ==", "bodyText": "hagamos que extienda de mapper", "url": "https://github.com/mercadopago/px-android/pull/2315#discussion_r483864855", "createdAt": "2020-09-04T22:14:20Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/payment_congrats/model/PaymentCongratsModelMapper.java", "diffHunk": "@@ -0,0 +1,152 @@\n+package com.mercadopago.android.px.internal.features.payment_congrats.model;\n+\n+import androidx.annotation.NonNull;\n+import com.mercadopago.android.px.internal.di.Session;\n+import com.mercadopago.android.px.internal.features.business_result.CongratsResponseMapper;\n+import com.mercadopago.android.px.internal.repository.PaymentSettingRepository;\n+import com.mercadopago.android.px.internal.util.CurrenciesUtil;\n+import com.mercadopago.android.px.internal.util.PaymentDataHelper;\n+import com.mercadopago.android.px.internal.viewmodel.BusinessPaymentModel;\n+import com.mercadopago.android.px.model.BusinessPayment;\n+import com.mercadopago.android.px.model.Currency;\n+import com.mercadopago.android.px.model.PaymentData;\n+import com.mercadopago.android.px.model.PaymentResult;\n+import java.math.BigDecimal;\n+\n+public class PaymentCongratsModelMapper {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTkyMDYx", "url": "https://github.com/mercadopago/px-android/pull/2315#pullrequestreview-482992061", "createdAt": "2020-09-04T22:17:40Z", "commit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMjoxNzo0MFrOHNc0bw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMjoxNzo0MFrOHNc0bw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg2NTcxMQ==", "bodyText": "Misma l\u00f3gica que el otro mapper, usar el nombre de la clase a la que estamos mappeando, solo para alinear convenciones", "url": "https://github.com/mercadopago/px-android/pull/2315#discussion_r483865711", "createdAt": "2020-09-04T22:17:40Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/payment_congrats/model/PaymentCongratsResponseMapper.java", "diffHunk": "@@ -0,0 +1,321 @@\n+package com.mercadopago.android.px.internal.features.payment_congrats.model;\n+\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import com.mercadolibre.android.mlbusinesscomponents.common.MLBusinessSingleItem;\n+import com.mercadolibre.android.mlbusinesscomponents.components.actioncard.MLBusinessActionCardViewData;\n+import com.mercadolibre.android.mlbusinesscomponents.components.common.downloadapp.MLBusinessDownloadAppData;\n+import com.mercadolibre.android.mlbusinesscomponents.components.common.downloadapp.MLBusinessDownloadAppView;\n+import com.mercadolibre.android.mlbusinesscomponents.components.crossselling.MLBusinessCrossSellingBoxData;\n+import com.mercadolibre.android.mlbusinesscomponents.components.discount.MLBusinessDiscountBoxData;\n+import com.mercadolibre.android.mlbusinesscomponents.components.discount.MLBusinessDiscountTracker;\n+import com.mercadolibre.android.mlbusinesscomponents.components.loyalty.MLBusinessLoyaltyRingData;\n+import com.mercadolibre.android.mlbusinesscomponents.components.touchpoint.domain.model.AdditionalEdgeInsets;\n+import com.mercadolibre.android.mlbusinesscomponents.components.touchpoint.domain.response.MLBusinessTouchpointResponse;\n+import com.mercadolibre.android.mlbusinesscomponents.components.touchpoint.tracking.MLBusinessTouchpointTracker;\n+import com.mercadopago.android.px.internal.features.business_result.BusinessPaymentResultTracker;\n+import com.mercadopago.android.px.internal.features.business_result.CongratsViewModel;\n+import com.mercadopago.android.px.internal.features.business_result.MLBusinessMapper;\n+import com.mercadopago.android.px.internal.features.business_result.PXDiscountBoxData;\n+import com.mercadopago.android.px.internal.util.JsonUtil;\n+import com.mercadopago.android.px.internal.viewmodel.mappers.Mapper;\n+import java.util.Collections;\n+import java.util.HashMap;\n+import java.util.LinkedList;\n+import java.util.List;\n+import java.util.Map;\n+\n+public class PaymentCongratsResponseMapper extends Mapper<PaymentCongratsResponse, CongratsViewModel> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTkyOTEw", "url": "https://github.com/mercadopago/px-android/pull/2315#pullrequestreview-482992910", "createdAt": "2020-09-04T22:20:59Z", "commit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMjoyMDo1OVrOHNc3nQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMjoyMDo1OVrOHNc3nQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg2NjUyNQ==", "bodyText": "yo har\u00eda final las clases que sepan que son finales, para evitar que algun tercero la extienda y tener problemas a la hora de modificarla, igual esta en un package \"internal\" pero por las dudas no viene mal", "url": "https://github.com/mercadopago/px-android/pull/2315#discussion_r483866525", "createdAt": "2020-09-04T22:20:59Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/payment_congrats/model/PaymentCongratsText.java", "diffHunk": "@@ -0,0 +1,76 @@\n+package com.mercadopago.android.px.internal.features.payment_congrats.model;\n+\n+import android.os.Parcel;\n+import android.os.Parcelable;\n+\n+public class PaymentCongratsText implements Parcelable {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTkzOTkw", "url": "https://github.com/mercadopago/px-android/pull/2315#pullrequestreview-482993990", "createdAt": "2020-09-04T22:25:20Z", "commit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMjoyNToyMVrOHNc7ZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMjoyNToyMVrOHNc7ZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg2NzQ5Mw==", "bodyText": "podria ser final", "url": "https://github.com/mercadopago/px-android/pull/2315#discussion_r483867493", "createdAt": "2020-09-04T22:25:21Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/payment_congrats/model/PaymentResultInfo.java", "diffHunk": "@@ -0,0 +1,51 @@\n+package com.mercadopago.android.px.internal.features.payment_congrats.model;\n+\n+import android.os.Parcel;\n+import android.os.Parcelable;\n+\n+public class PaymentResultInfo implements Parcelable{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTk2MjQ0", "url": "https://github.com/mercadopago/px-android/pull/2315#pullrequestreview-482996244", "createdAt": "2020-09-04T22:34:30Z", "commit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMjozNDozMVrOHNdDAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMjozNDozMVrOHNdDAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg2OTQ0Mw==", "bodyText": "esto queda raro porque basicamente podemos enviar una lista de string y que me diga si es split payment o no, se que la l\u00f3gica es bastante gen\u00e9rica pero les parece bien crear otro m\u00e9todo para seguir restringiendo el tipo de dato de la lista?", "url": "https://github.com/mercadopago/px-android/pull/2315#discussion_r483869443", "createdAt": "2020-09-04T22:34:31Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/util/PaymentDataHelper.java", "diffHunk": "@@ -19,7 +20,7 @@ public static BigDecimal getPrettyAmountToPay(@NonNull final PaymentData payment\n         return paymentData.getRawAmount();\n     }\n \n-    public static boolean isSplitPayment(@NonNull final Collection<PaymentData> paymentDataList) {\n+    public static <T> boolean isSplitPayment(@NonNull final Collection<T> paymentDataList) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTk3NTk4", "url": "https://github.com/mercadopago/px-android/pull/2315#pullrequestreview-482997598", "createdAt": "2020-09-04T22:40:46Z", "commit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMjo0MDo0N1rOHNdH3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMjo0MDo0N1rOHNdH3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg3MDY4NA==", "bodyText": "esto no se usa, no?", "url": "https://github.com/mercadopago/px-android/pull/2315#discussion_r483870684", "createdAt": "2020-09-04T22:40:47Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/view/PaymentResultAmount.java", "diffHunk": "@@ -7,16 +7,13 @@\n import android.util.AttributeSet;\n import com.google.android.flexbox.FlexboxLayout;\n import com.mercadopago.android.px.R;\n-import com.mercadopago.android.px.internal.util.CurrenciesUtil;\n import com.mercadopago.android.px.internal.util.ViewUtils;\n-import com.mercadopago.android.px.model.Currency;\n-import com.mercadopago.android.px.model.Discount;\n-import com.mercadopago.android.px.model.PayerCost;\n import java.math.BigDecimal;\n import java.util.Locale;\n \n public class PaymentResultAmount extends FlexboxLayout {\n \n+    public static final String NO_RATE = \"0\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyOTk5NTQ4", "url": "https://github.com/mercadopago/px-android/pull/2315#pullrequestreview-482999548", "createdAt": "2020-09-04T22:49:38Z", "commit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMjo0OTozOFrOHNdOqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMjo0OTozOFrOHNdOqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg3MjQyNQ==", "bodyText": "no me qued\u00f3 claro este cambio de condici\u00f3n", "url": "https://github.com/mercadopago/px-android/pull/2315#discussion_r483872425", "createdAt": "2020-09-04T22:49:38Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/view/PaymentResultMethod.java", "diffHunk": "@@ -76,13 +77,14 @@ private String getDescription(@NonNull final Model model) {\n                 model.paymentMethodName,\n                 getResources().getString(R.string.px_ending_in),\n                 model.lastFourDigits);\n-        } else if(!PaymentTypes.isAccountMoney(model.paymentTypeId)){\n+        } else if (!PaymentTypes.isAccountMoney(model.paymentTypeId) || model.paymentMethodDescription == null ||\n+            model.paymentMethodDescription.getMessage() == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "originalPosition": 33}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzMDAxMzcx", "url": "https://github.com/mercadopago/px-android/pull/2315#pullrequestreview-483001371", "createdAt": "2020-09-04T22:58:21Z", "commit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMjo1ODoyMVrOHNdVog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wNFQyMjo1ODoyMVrOHNdVog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg3NDIxMA==", "bodyText": "ojo ac\u00e1 estamos usando el name que es en upper case, y actualmente creo que se est\u00e1 trackeando en lowercase, por si hay alguna query qeu no lo contemple...\nde todas formas creo que el enum no es necesario, se mappea de un string payment type id a un enum para despues terminar usando el name o el value que es el string del payment type id, que opinan que esto siga siendo un String y no un enum?", "url": "https://github.com/mercadopago/px-android/pull/2315#discussion_r483874210", "createdAt": "2020-09-04T22:58:21Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/tracking/internal/model/ResultViewTrackModel.java", "diffHunk": "@@ -33,67 +31,108 @@\n     private final String campaignId;\n     private final String campaignsIds;\n     private final int discountsCount;\n-\n+    private final Map<String, Object> extraInfo = Collections.emptyMap();\n     private boolean hasBottomView;\n     private boolean hasTopView;\n     private boolean hasImportantView;\n     private boolean hasMoneySplitView;\n-    private final Map<String, Object> extraInfo = Collections.emptyMap();\n-\n-    private enum Style {\n-        GENERIC(\"generic\"),\n-        CUSTOM(\"custom\");\n-\n-        @NonNull public final String value;\n-\n-        Style(@NonNull final String value) {\n-            this.value = value;\n-        }\n-    }\n \n     public ResultViewTrackModel(@NonNull final PaymentModel paymentModel,\n         @NonNull final PaymentResultScreenConfiguration screenConfiguration,\n         @NonNull final CheckoutPreference checkoutPreference, @NonNull final String currencyId, final boolean isMP) {\n-        this(Style.GENERIC, paymentModel, checkoutPreference, currencyId);\n+        this(Style.GENERIC,\n+            paymentModel.getPaymentResult().getPaymentId(),\n+            paymentModel.getPaymentResult().getPaymentStatus(),\n+            paymentModel.getPaymentResult().getPaymentStatusDetail(),\n+            PaymentDataHelper.isSplitPayment(paymentModel.getPaymentResult().getPaymentDataList()),\n+            checkoutPreference.getTotalAmount(),\n+            PaymentDataHelper\n+                .getTotalDiscountAmount(paymentModel.getPaymentResult().getPaymentDataList()),\n+            paymentModel.getCongratsResponse().getScore() != null ? paymentModel.getCongratsResponse().getScore()\n+                .getProgress().getLevel() : null,\n+            paymentModel.getCongratsResponse().getDiscount() != null ? paymentModel.getCongratsResponse().getDiscount()\n+                .getItems().size() : 0,\n+            paymentModel.getCongratsResponse().getDiscount() != null ? TextUtil\n+                .join(new FromDiscountItemToItemId().map(paymentModel.getCongratsResponse().getDiscount().getItems()))\n+                : null,\n+            paymentModel.getPaymentResult().getPaymentData().getCampaign() != null ? paymentModel.getPaymentResult()\n+                .getPaymentData().getCampaign().getId() : null,\n+            paymentModel.getPaymentResult().getPaymentData().getPaymentMethod() != null ? paymentModel\n+                .getPaymentResult().getPaymentData().getPaymentMethod().getId() : null,\n+            paymentModel.getPaymentResult().getPaymentData().getPaymentMethod() != null ? paymentModel\n+                .getPaymentResult().getPaymentData().getPaymentMethod().getPaymentTypeId() : null,\n+            currencyId,\n+            paymentModel.getPaymentResult().getPaymentData());\n         hasBottomView = screenConfiguration.hasBottomFragment();\n         hasTopView = screenConfiguration.hasTopFragment();\n         hasImportantView = false;\n         hasMoneySplitView = isMP && paymentModel.getCongratsResponse().getMoneySplit() != null;\n     }\n \n-    public ResultViewTrackModel(@NonNull final BusinessPaymentModel paymentModel,\n-        @NonNull final CheckoutPreference checkoutPreference, @NonNull final String currencyId, final boolean isMP) {\n-        this(Style.CUSTOM, paymentModel, checkoutPreference, currencyId);\n-        hasBottomView = paymentModel.getPayment().hasBottomFragment();\n-        hasTopView = paymentModel.getPayment().hasTopFragment();\n-        hasMoneySplitView = isMP && paymentModel.getCongratsResponse().getMoneySplit() != null;\n+    public ResultViewTrackModel(@NonNull final PaymentCongratsModel paymentCongratsModel, final boolean isMP) {\n+        this(Style.CUSTOM,\n+            paymentCongratsModel.getPaymentId(),\n+            paymentCongratsModel.getCongratsType().name(),\n+            paymentCongratsModel.getPxPaymentCongratsTracking().getPaymentStatusDetail(),\n+            PaymentDataHelper.isSplitPayment(paymentCongratsModel.getPaymentsInfo()),\n+            paymentCongratsModel.getPxPaymentCongratsTracking().getTotalAmount(),\n+            paymentCongratsModel.getDiscountCouponsAmount(),\n+            paymentCongratsModel.getPaymentCongratsResponse().getLoyalty() != null ? paymentCongratsModel\n+                .getPaymentCongratsResponse().getLoyalty()\n+                .getProgress().getLevel() : null,\n+            paymentCongratsModel.getPaymentCongratsResponse().getDiscount() != null ? paymentCongratsModel\n+                .getPaymentCongratsResponse().getDiscount()\n+                .getItems().size() : 0,\n+            paymentCongratsModel.getPaymentCongratsResponse().getDiscount() != null ? TextUtil\n+                .join(new FromPaymentCongratsDiscountItemToItemId()\n+                    .map(paymentCongratsModel.getPaymentCongratsResponse().getDiscount().getItems())) : null,\n+            paymentCongratsModel.getPxPaymentCongratsTracking().getCampaignId(),\n+            paymentCongratsModel.getPaymentsInfo().get(0).paymentMethodId,\n+            paymentCongratsModel.getPaymentsInfo().get(0).paymentMethodType.name(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "originalPosition": 101}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f4cab1c6aa636300b293020668c61e6d34e80db", "author": {"user": {"login": "mmunozpatinomeli", "name": null}}, "url": "https://github.com/mercadopago/px-android/commit/0f4cab1c6aa636300b293020668c61e6d34e80db", "committedDate": "2020-09-07T12:48:29Z", "message": "Merge branch 'feature/new-payment-congrats' into feature/new_payment_congrats_rebase"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "90f93310141afd0c6995a0765dde2e6c82f9cf8e", "author": {"user": {"login": "mmunozpatinomeli", "name": null}}, "url": "https://github.com/mercadopago/px-android/commit/90f93310141afd0c6995a0765dde2e6c82f9cf8e", "committedDate": "2020-09-07T13:09:08Z", "message": "fix session in rebase"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a087291832ca8a248bf937658512cb3dadf8586", "author": {"user": {"login": "guchito9", "name": "Guche Mantuano"}}, "url": "https://github.com/mercadopago/px-android/commit/3a087291832ca8a248bf937658512cb3dadf8586", "committedDate": "2020-09-07T13:39:22Z", "message": "Merge pull request #2316 from mmunozpatinomeli/feature/new_payment_congrats_rebase\n\nPaymentCongrats Rebase"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24975436fb21bf7b4235e62bfe0379f200b80156", "author": {"user": {"login": "mmunozpatinomeli", "name": null}}, "url": "https://github.com/mercadopago/px-android/commit/24975436fb21bf7b4235e62bfe0379f200b80156", "committedDate": "2020-09-09T14:27:32Z", "message": "first codereview fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cdaaaf5c0e1a94874e78f8dfa5dea22847784031", "author": {"user": {"login": "guchito9", "name": "Guche Mantuano"}}, "url": "https://github.com/mercadopago/px-android/commit/cdaaaf5c0e1a94874e78f8dfa5dea22847784031", "committedDate": "2020-09-10T15:25:04Z", "message": "Merge pull request #2318 from mmunozpatinomeli/feature/payment-congrats-fixes\n\n[PaymentCongrats] First codereview fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MjM2MTE0", "url": "https://github.com/mercadopago/px-android/pull/2315#pullrequestreview-486236114", "createdAt": "2020-09-10T19:13:11Z", "commit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxOToxMzoxMVrOHQCQCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxOToxMzoxMVrOHQCQCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjU3NjEzNw==", "bodyText": "Estoy pensando que directamente har\u00eda que reciba un PaymentCongratsModel este m\u00e9todo, y que el mapeo se haga en donde se llama, porque no tiene mucho sentido seguir recibiendo BusinessPaymentModel.", "url": "https://github.com/mercadopago/px-android/pull/2315#discussion_r486576137", "createdAt": "2020-09-10T19:13:11Z", "author": {"login": "guchito9"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/business_result/BusinessPaymentResultActivity.java", "diffHunk": "@@ -33,33 +32,15 @@\n     implements BusinessPaymentResultContract.View {\n \n     private static final String TAG = BusinessPaymentResultActivity.class.getSimpleName();\n-    private static final String EXTRA_BUSINESS_PAYMENT_MODEL = \"extra_business_payment_model\";\n+    private static final String PAYMENT_CONGRATS = \"payment_congrats\";\n \n     public static void startWithForwardResult(@NonNull final Activity activity, @NonNull final BusinessPaymentModel model) {\n         final Intent intent = new Intent(activity, BusinessPaymentResultActivity.class);\n-        intent.putExtra(EXTRA_BUSINESS_PAYMENT_MODEL, model);\n+        intent.putExtra(PAYMENT_CONGRATS, new PaymentCongratsModelMapper().map(model));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2a781f58796b3341d6b4283945493696db297f6"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e454d62ed02da24a3839ad54456475f4c9574add", "author": {"user": {"login": "mmunozpatinomeli", "name": null}}, "url": "https://github.com/mercadopago/px-android/commit/e454d62ed02da24a3839ad54456475f4c9574add", "committedDate": "2020-09-10T20:11:07Z", "message": "Merge branch 'px/master' into feature/new-payment-congrats-conflicts-fix\n\n# Conflicts:\n#\tpx-checkout/src/main/java/com/mercadopago/android/px/internal/features/pay_button/PayButtonViewModel.kt"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f39092a157959126a4066c6a24c0f02226fabdf", "author": {"user": {"login": "guchito9", "name": "Guche Mantuano"}}, "url": "https://github.com/mercadopago/px-android/commit/9f39092a157959126a4066c6a24c0f02226fabdf", "committedDate": "2020-09-10T20:23:31Z", "message": "Merge pull request #2323 from mmunozpatinomeli/feature/new-payment-congrats-conflicts-fix\n\n[PaymentCongrats] Fix Conflicts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2ODU3NTU2", "url": "https://github.com/mercadopago/px-android/pull/2315#pullrequestreview-486857556", "createdAt": "2020-09-11T14:28:53Z", "commit": {"oid": "9f39092a157959126a4066c6a24c0f02226fabdf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxNDoyODo1M1rOHQhMTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxNDoyODo1M1rOHQhMTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzA4MzA4NQ==", "bodyText": "Ya siendo esto loadOrHide le mandar\u00eda INVISIBLE de una sin recibir un par\u00e1metro de afuera", "url": "https://github.com/mercadopago/px-android/pull/2315#discussion_r487083085", "createdAt": "2020-09-11T14:28:53Z", "author": {"login": "guchito9"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/util/ViewUtils.java", "diffHunk": "@@ -103,6 +104,17 @@ public static boolean loadOrHide(final int visibility, @Nullable final Text text\n         }\n     }\n \n+    public static boolean loadOrHide(final int visibility, @Nullable final PaymentCongratsText text, @NonNull final MPTextView view) {\n+        if (text == null || TextUtil.isEmpty(text.getMessage())) {\n+            view.setVisibility(visibility);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f39092a157959126a4066c6a24c0f02226fabdf"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7aef509c9aca4cdf3300626e7245c42b869ff82d", "author": {"user": {"login": "mmunozpatinomeli", "name": null}}, "url": "https://github.com/mercadopago/px-android/commit/7aef509c9aca4cdf3300626e7245c42b869ff82d", "committedDate": "2020-09-14T15:17:06Z", "message": "second codereview fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "378644040910bf969c744f1b3fa6d2d11076c3b1", "author": {"user": {"login": "guchito9", "name": "Guche Mantuano"}}, "url": "https://github.com/mercadopago/px-android/commit/378644040910bf969c744f1b3fa6d2d11076c3b1", "committedDate": "2020-09-14T18:37:43Z", "message": "Merge pull request #2324 from mmunozpatinomeli/feature/new-payment-congrats-second-fixes\n\n[PaymentCongrats] Second codereview fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4MDk2MjIz", "url": "https://github.com/mercadopago/px-android/pull/2315#pullrequestreview-488096223", "createdAt": "2020-09-14T19:57:51Z", "commit": {"oid": "378644040910bf969c744f1b3fa6d2d11076c3b1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3760, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}