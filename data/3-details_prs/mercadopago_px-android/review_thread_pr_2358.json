{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA1MTEzMDQ2", "number": 2358, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNTozNzoyNVrOEvYKmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNzoxMjoyN1rOEvasJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MTE0NDU2OnYy", "diffSide": "RIGHT", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/base/BaseFragment.kt", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNTozNzoyNVrOHkU2Rw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNjozOTo0NVrOHkXjOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg1MjM1OQ==", "bodyText": "Con el is no te lo casteo? es por el <*>?", "url": "https://github.com/mercadopago/px-android/pull/2358#discussion_r507852359", "createdAt": "2020-10-19T15:37:25Z", "author": {"login": "jorGonzalez291292"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/base/BaseFragment.kt", "diffHunk": "@@ -18,4 +18,10 @@ abstract class BaseFragment : Fragment() {\n         super.onDetach()\n         fragmentCommunicationViewModel = null\n     }\n+\n+    protected fun forceDoBackPressed() {\n+        if (context is PXActivity<*>) {\n+            (context as PXActivity<*>).forceDoBackPressed()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81b760e33d4e64892586f65b98b524d5ce0261eb"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg5NjYzMw==", "bodyText": "Por algo de context en si, no s\u00e9 si es una variable p\u00fablica o que", "url": "https://github.com/mercadopago/px-android/pull/2358#discussion_r507896633", "createdAt": "2020-10-19T16:39:45Z", "author": {"login": "guchito9"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/base/BaseFragment.kt", "diffHunk": "@@ -18,4 +18,10 @@ abstract class BaseFragment : Fragment() {\n         super.onDetach()\n         fragmentCommunicationViewModel = null\n     }\n+\n+    protected fun forceDoBackPressed() {\n+        if (context is PXActivity<*>) {\n+            (context as PXActivity<*>).forceDoBackPressed()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg1MjM1OQ=="}, "originalCommit": {"oid": "81b760e33d4e64892586f65b98b524d5ce0261eb"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MTE2NzUzOnYy", "diffSide": "RIGHT", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/security_code/SecurityCodeFragment.kt", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNTo0MjoxM1rOHkVERA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNjo0MDowMlrOHkXj7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg1NTk0MA==", "bodyText": "Porque siempre es true? No deber\u00edamos devolver payButtonFragment.isExploding()?", "url": "https://github.com/mercadopago/px-android/pull/2358#discussion_r507855940", "createdAt": "2020-10-19T15:42:13Z", "author": {"login": "jorGonzalez291292"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/security_code/SecurityCodeFragment.kt", "diffHunk": "@@ -273,10 +256,16 @@ internal class SecurityCodeFragment : BaseFragment(), PayButton.Handler, BackHan\n \n     override fun onCvvRequested() = PayButton.CvvRequestedModel(fragmentContainer, renderMode)\n \n-    override fun handleBack() = payButtonFragment.isExploding().also { isExploding ->\n-        if (!isExploding) {\n+    override fun handleBack(): Boolean {\n+        if (backEnabled && !payButtonFragment.isExploding()) {\n             securityCodeViewModel.onBack()\n+            transition.prepareForExit()\n+            ViewUtils.hideKeyboard(activity)\n+            postDelayed(100) {\n+                forceDoBackPressed()\n+            }\n         }\n+        return true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81b760e33d4e64892586f65b98b524d5ce0261eb"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg5NjgxNA==", "bodyText": "Ahora se handlea siempre siempre ac\u00e1", "url": "https://github.com/mercadopago/px-android/pull/2358#discussion_r507896814", "createdAt": "2020-10-19T16:40:02Z", "author": {"login": "guchito9"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/security_code/SecurityCodeFragment.kt", "diffHunk": "@@ -273,10 +256,16 @@ internal class SecurityCodeFragment : BaseFragment(), PayButton.Handler, BackHan\n \n     override fun onCvvRequested() = PayButton.CvvRequestedModel(fragmentContainer, renderMode)\n \n-    override fun handleBack() = payButtonFragment.isExploding().also { isExploding ->\n-        if (!isExploding) {\n+    override fun handleBack(): Boolean {\n+        if (backEnabled && !payButtonFragment.isExploding()) {\n             securityCodeViewModel.onBack()\n+            transition.prepareForExit()\n+            ViewUtils.hideKeyboard(activity)\n+            postDelayed(100) {\n+                forceDoBackPressed()\n+            }\n         }\n+        return true", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzg1NTk0MA=="}, "originalCommit": {"oid": "81b760e33d4e64892586f65b98b524d5ce0261eb"}, "originalPosition": 66}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MTU1ODE1OnYy", "diffSide": "RIGHT", "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/base/PXActivity.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNzoxMjoyN1rOHkYzvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNzo1MDo1MFrOHkaiwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzkxNzI0NQ==", "bodyText": "Est\u00e1 perfectamente dise\u00f1ado! solo cambiaria un poco los nombres\nonBackPressed()\nforceBack()\nprivate doBack()\ndoBack tiene toda la logica de lo que es hacer back, onBackPressed ahora ejecuta un doBack en vez de un forceDoBackPressed y por ultimo matamos este ultimo nombre que es bastante confuso", "url": "https://github.com/mercadopago/px-android/pull/2358#discussion_r507917245", "createdAt": "2020-10-19T17:12:27Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/base/PXActivity.java", "diffHunk": "@@ -56,6 +56,10 @@ public void attachBaseContext(@NonNull final Context context) {\n \n     @Override\n     public void onBackPressed() {\n+        forceDoBackPressed();\n+    }\n+\n+    public final void forceDoBackPressed() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa04d62da1583abf97994f406aa1f0ec52db61cb"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk0NTY2NA==", "bodyText": "Bueno, dale, compro", "url": "https://github.com/mercadopago/px-android/pull/2358#discussion_r507945664", "createdAt": "2020-10-19T17:50:50Z", "author": {"login": "guchito9"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/base/PXActivity.java", "diffHunk": "@@ -56,6 +56,10 @@ public void attachBaseContext(@NonNull final Context context) {\n \n     @Override\n     public void onBackPressed() {\n+        forceDoBackPressed();\n+    }\n+\n+    public final void forceDoBackPressed() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzkxNzI0NQ=="}, "originalCommit": {"oid": "aa04d62da1583abf97994f406aa1f0ec52db61cb"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1718, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}