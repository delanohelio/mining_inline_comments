{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwNjcwNDY2", "number": 2072, "title": "[enhancement] generic confirmation button", "bodyText": "Se desacopla la l\u00f3gica de pagar de las pantallas y se lleva a un fragment especifico del boton, el cual va a handlear toda la l\u00f3gica repetitiva inherente del pago en cada pantalla", "createdAt": "2020-03-18T21:19:27Z", "url": "https://github.com/mercadopago/px-android/pull/2072", "merged": true, "mergeCommit": {"oid": "07fe4175adcf96aaf898ffb176f2c43bb9fbeaa3"}, "closed": true, "closedAt": "2020-03-19T06:10:32Z", "author": {"login": "cgaggino"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcOXYcKAH2gAyMzkwNjcwNDY2OjQ5MzYwOTdlZDMzZDZkMzkwMDQxMzdlNGIzMDRlNmI4ZDgxMWE3Y2U=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPDvz4gFqTM3NzQwODUzNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4936097ed33d6d39004137e4b304e6b8d811a7ce", "author": {"user": {"login": "cgaggino", "name": "Cristian Gaggino"}}, "url": "https://github.com/mercadopago/px-android/commit/4936097ed33d6d39004137e4b304e6b8d811a7ce", "committedDate": "2020-03-17T00:15:32Z", "message": " * Refactored payment service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "daf56892d60d7b2302fa3b42a15ecd6e77c3eaad", "author": {"user": {"login": "cgaggino", "name": "Cristian Gaggino"}}, "url": "https://github.com/mercadopago/px-android/commit/daf56892d60d7b2302fa3b42a15ecd6e77c3eaad", "committedDate": "2020-03-18T05:54:17Z", "message": "* Added PayButtonFragment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MjQ4OTQx", "url": "https://github.com/mercadopago/px-android/pull/2072#pullrequestreview-377248941", "createdAt": "2020-03-18T21:29:27Z", "commit": {"oid": "9fb7978b22d132e925a0ee1d6374eec700934a41"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQyMToyOToyN1rOF4Xj1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQyMToyOToyN1rOF4Xj1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY1MDU4Mw==", "bodyText": "Est\u00e1 repetida, flashe\u00f3 el IDE", "url": "https://github.com/mercadopago/px-android/pull/2072#discussion_r394650583", "createdAt": "2020-03-18T21:29:27Z", "author": {"login": "guchito9"}, "path": "px-checkout/build.gradle", "diffHunk": "@@ -12,6 +12,7 @@ android {\n }\n \n dependencies {\n+    implementation 'com.android.support:support-v4:28.0.0'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9fb7978b22d132e925a0ee1d6374eec700934a41"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MjUxNzg4", "url": "https://github.com/mercadopago/px-android/pull/2072#pullrequestreview-377251788", "createdAt": "2020-03-18T21:34:39Z", "commit": {"oid": "9fb7978b22d132e925a0ee1d6374eec700934a41"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQyMTozNDozOVrOF4Xszw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQyMTozNDozOVrOF4Xszw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY1Mjg3OQ==", "bodyText": "Fijate de sacar los NotNull, te los pone por default el IDE cuando implement\u00e1s un m\u00e9todo de Kotlin", "url": "https://github.com/mercadopago/px-android/pull/2072#discussion_r394652879", "createdAt": "2020-03-18T21:34:39Z", "author": {"login": "guchito9"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/express/ExpressPaymentFragment.java", "diffHunk": "@@ -83,32 +68,29 @@\n import com.mercadopago.android.px.model.StatusMetadata;\n import com.mercadopago.android.px.model.exceptions.MercadoPagoError;\n import com.mercadopago.android.px.model.internal.DisabledPaymentMethod;\n-import com.mercadopago.android.px.tracking.internal.model.Reason;\n+import com.mercadopago.android.px.model.internal.PaymentConfiguration;\n+import com.mercadopago.android.px.tracking.internal.model.ConfirmData;\n import java.util.Arrays;\n import java.util.List;\n+import org.jetbrains.annotations.NotNull;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9fb7978b22d132e925a0ee1d6374eec700934a41"}, "originalPosition": 79}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9fb7978b22d132e925a0ee1d6374eec700934a41", "author": {"user": {"login": "cgaggino", "name": "Cristian Gaggino"}}, "url": "https://github.com/mercadopago/px-android/commit/9fb7978b22d132e925a0ee1d6374eec700934a41", "committedDate": "2020-03-18T21:16:52Z", "message": "* Cleaned express payment view"}, "afterCommit": {"oid": "d5c778ba481ce28e1958ce309491f158cacae875", "author": {"user": {"login": "cgaggino", "name": "Cristian Gaggino"}}, "url": "https://github.com/mercadopago/px-android/commit/d5c778ba481ce28e1958ce309491f158cacae875", "committedDate": "2020-03-18T21:55:19Z", "message": "* Cleaned express payment view"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MjczNDgz", "url": "https://github.com/mercadopago/px-android/pull/2072#pullrequestreview-377273483", "createdAt": "2020-03-18T22:15:42Z", "commit": {"oid": "9fb7978b22d132e925a0ee1d6374eec700934a41"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQyMjoxNjozM1rOF4YyeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQyMjoxNjozM1rOF4YyeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDY3MDcxMw==", "bodyText": "El postValue se usa para devolver datos desde background al main thread.\nSe tiene que usar el setValue o en este caso value.\nFuente", "url": "https://github.com/mercadopago/px-android/pull/2072#discussion_r394670713", "createdAt": "2020-03-18T22:16:33Z", "author": {"login": "jorGonzalez291292"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/pay_button/PayButtonViewModel.kt", "diffHunk": "@@ -0,0 +1,137 @@\n+package com.mercadopago.android.px.internal.features.pay_button\n+\n+import android.arch.lifecycle.MutableLiveData\n+import com.mercadopago.android.px.addons.model.SecurityValidationData\n+import com.mercadopago.android.px.internal.base.BaseViewModel\n+import com.mercadopago.android.px.internal.core.ConnectionHelper\n+import com.mercadopago.android.px.internal.core.ProductIdProvider\n+import com.mercadopago.android.px.internal.features.explode.ExplodeDecoratorMapper\n+import com.mercadopago.android.px.internal.repository.PaymentRepository\n+import com.mercadopago.android.px.internal.repository.PaymentSettingRepository\n+import com.mercadopago.android.px.internal.util.ApiUtil\n+import com.mercadopago.android.px.internal.util.SecurityValidationDataFactory\n+import com.mercadopago.android.px.internal.viewmodel.mappers.PayButtonViewModelMapper\n+import com.mercadopago.android.px.model.Card\n+import com.mercadopago.android.px.model.IPaymentDescriptor\n+import com.mercadopago.android.px.model.PaymentRecovery\n+import com.mercadopago.android.px.model.exceptions.MercadoPagoError\n+import com.mercadopago.android.px.model.exceptions.NoConnectivityException\n+import com.mercadopago.android.px.model.internal.PaymentConfiguration\n+import com.mercadopago.android.px.tracking.internal.events.ConfirmEvent\n+import com.mercadopago.android.px.tracking.internal.events.FrictionEventTracker\n+import com.mercadopago.android.px.tracking.internal.model.ConfirmData\n+import com.mercadopago.android.px.tracking.internal.model.Reason\n+import com.mercadopago.android.px.tracking.internal.views.OneTapViewTracker\n+import com.mercadopago.android.px.internal.viewmodel.PayButtonViewModel as ButtonConfig\n+\n+internal class PayButtonViewModel(\n+    private var paymentService: PaymentRepository,\n+    private var productIdProvider: ProductIdProvider,\n+    private var connectionHelper: ConnectionHelper,\n+    paymentSettingRepository: PaymentSettingRepository) : BaseViewModel(), PayButton.ViewModel {\n+\n+    private var confirmTrackerData: ConfirmData? = null\n+    private var paymentConfiguration: PaymentConfiguration? = null\n+\n+    val buttonTextLiveData = MutableLiveData<ButtonConfig>()\n+    val paymentStartedLiveData = MutableLiveData<Pair<Int, ButtonConfig>>()\n+    val cvvRequiredLiveData = MutableLiveData<Pair<Card, Reason>>()\n+    val recoverRequiredLiveData = MutableLiveData<PaymentRecovery>()\n+    val stateUILiveData = MutableLiveData<PayButtonState>()\n+\n+    private var buttonConfig: ButtonConfig = PayButtonViewModelMapper().map(\n+        paymentSettingRepository.advancedConfiguration.customStringConfiguration)\n+\n+    init {\n+        buttonTextLiveData.postValue(buttonConfig)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5c778ba481ce28e1958ce309491f158cacae875"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f85bf2e4285c2514c7792bb9d0fe2b047518806", "author": {"user": {"login": "cgaggino", "name": "Cristian Gaggino"}}, "url": "https://github.com/mercadopago/px-android/commit/0f85bf2e4285c2514c7792bb9d0fe2b047518806", "committedDate": "2020-03-18T23:07:19Z", "message": "* Cleaned express payment view"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d5c778ba481ce28e1958ce309491f158cacae875", "author": {"user": {"login": "cgaggino", "name": "Cristian Gaggino"}}, "url": "https://github.com/mercadopago/px-android/commit/d5c778ba481ce28e1958ce309491f158cacae875", "committedDate": "2020-03-18T21:55:19Z", "message": "* Cleaned express payment view"}, "afterCommit": {"oid": "0f85bf2e4285c2514c7792bb9d0fe2b047518806", "author": {"user": {"login": "cgaggino", "name": "Cristian Gaggino"}}, "url": "https://github.com/mercadopago/px-android/commit/0f85bf2e4285c2514c7792bb9d0fe2b047518806", "committedDate": "2020-03-18T23:07:19Z", "message": "* Cleaned express payment view"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea68b96b2ee3502a2707e55f452ebd8408459a54", "author": {"user": {"login": "cgaggino", "name": "Cristian Gaggino"}}, "url": "https://github.com/mercadopago/px-android/commit/ea68b96b2ee3502a2707e55f452ebd8408459a54", "committedDate": "2020-03-18T23:28:19Z", "message": "* Fixed button adapter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3dac3913a4a4b9ba0fd841eb0847d62865e95576", "author": {"user": {"login": "cgaggino", "name": "Cristian Gaggino"}}, "url": "https://github.com/mercadopago/px-android/commit/3dac3913a4a4b9ba0fd841eb0847d62865e95576", "committedDate": "2020-03-19T00:20:23Z", "message": "* Update button status"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95dec7a40d33291ca029a0447d334ba83c1751f6", "author": {"user": {"login": "cgaggino", "name": "Cristian Gaggino"}}, "url": "https://github.com/mercadopago/px-android/commit/95dec7a40d33291ca029a0447d334ba83c1751f6", "committedDate": "2020-03-19T00:23:37Z", "message": "* Changed post value by set value"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba3dd69b97b89bb7326c5e793f78121b04256687", "author": {"user": {"login": "cgaggino", "name": "Cristian Gaggino"}}, "url": "https://github.com/mercadopago/px-android/commit/ba3dd69b97b89bb7326c5e793f78121b04256687", "committedDate": "2020-03-19T01:57:18Z", "message": "* Fixed fragment replacement"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f807510c82e407edbc93dafe9b9858fb32a55e1c", "author": {"user": {"login": "cgaggino", "name": "Cristian Gaggino"}}, "url": "https://github.com/mercadopago/px-android/commit/f807510c82e407edbc93dafe9b9858fb32a55e1c", "committedDate": "2020-03-19T02:10:54Z", "message": "* Reverted set value to post value for problems with fragments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3NDA4NTM0", "url": "https://github.com/mercadopago/px-android/pull/2072#pullrequestreview-377408534", "createdAt": "2020-03-19T03:56:53Z", "commit": {"oid": "f807510c82e407edbc93dafe9b9858fb32a55e1c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3890, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}