{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwMDY1NzMz", "number": 2208, "title": "[Feature] Money split view", "bodyText": "Motivaci\u00f3n y Contexto\nFeature de divisi\u00f3n de gastos en la congrats.\nDescripci\u00f3n\nSe integra el componente MLBusinessActionCardView en la congrats para divisi\u00f3n de gastos.\nC\u00f3mo probarlo\n\n\nScreenshots\n\nTipo de cambio (para el release manager)\n\n Breaking change (Fix o feature que cambia una funcionalidad existente o rompe firmas)\n\n\n\n Mi cambio afecta a los integradores internos\n\n\nCompartir conocimiento", "createdAt": "2020-06-25T14:39:32Z", "url": "https://github.com/mercadopago/px-android/pull/2208", "merged": true, "mergeCommit": {"oid": "02e62d75f72cfb6bf4b772cee89e5c85e408caa4"}, "closed": true, "closedAt": "2020-06-25T18:45:55Z", "author": {"login": "jorGonzalez291292"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABctzTzoAH2gAyNDQwMDY1NzMzOjBkY2QzMjJlYjEzMjg1NGY2YTQzMmMyMWM4ODEyOTZmZmRkNWY4ZTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcuzMoMgFqTQzNzc2NTYzOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0dcd322eb132854f6a432c21c881296ffdd5f8e4", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/0dcd322eb132854f6a432c21c881296ffdd5f8e4", "committedDate": "2020-06-22T16:19:28Z", "message": "split payment added"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f188dbd03135d2be34d7a12c6bd2d3ce8ed9121", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/1f188dbd03135d2be34d7a12c6bd2d3ce8ed9121", "committedDate": "2020-06-23T19:53:19Z", "message": "refactor money split component"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1d29d4a3b5d53e045c34b200a4fa21b10ee1fa5", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/f1d29d4a3b5d53e045c34b200a4fa21b10ee1fa5", "committedDate": "2020-06-24T13:54:29Z", "message": "refactor name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94e563c476c06b7adc2a24e309b961bdc42ab435", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/94e563c476c06b7adc2a24e309b961bdc42ab435", "committedDate": "2020-06-25T12:25:21Z", "message": "action card view for money split added, deeplink track by screen added"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7de774f1f2a81802e5b3495e9f136f8e9471e27e", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/7de774f1f2a81802e5b3495e9f136f8e9471e27e", "committedDate": "2020-06-25T14:18:39Z", "message": "merge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b80d9e4f2c6a6e990df7883649bea404874930c6", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/b80d9e4f2c6a6e990df7883649bea404874930c6", "committedDate": "2020-06-25T14:20:54Z", "message": "revert changes in onetap samples"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54bd9e4b66fb2afda38b0e751fcdb739dc20d105", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/54bd9e4b66fb2afda38b0e751fcdb739dc20d105", "committedDate": "2020-06-25T14:29:39Z", "message": "remove imports, revert changes in LocaleUtil"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3NjQ2NjQ0", "url": "https://github.com/mercadopago/px-android/pull/2208#pullrequestreview-437646644", "createdAt": "2020-06-25T16:09:50Z", "commit": {"oid": "54bd9e4b66fb2afda38b0e751fcdb739dc20d105"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNjowOTo1MFrOGpBvaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNjowOTo1MFrOGpBvaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY3MzMyMQ==", "bodyText": "Es un overkill tener un mapper para cada modelo? para que no queden tantos getters de este estilo, termina siendo una s\u00e1bana la clase", "url": "https://github.com/mercadopago/px-android/pull/2208#discussion_r445673321", "createdAt": "2020-06-25T16:09:50Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/business_result/CongratsResponseMapper.java", "diffHunk": "@@ -304,4 +307,52 @@ public String getButtonDeepLink() {\n \n         return crossSellingBoxData;\n     }\n+\n+    @Nullable\n+    private MLBusinessActionCardViewData getMoneySplitData(@Nullable final CongratsResponse.MoneySplit moneySplit) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "54bd9e4b66fb2afda38b0e751fcdb739dc20d105"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3NjUwMzk0", "url": "https://github.com/mercadopago/px-android/pull/2208#pullrequestreview-437650394", "createdAt": "2020-06-25T16:14:07Z", "commit": {"oid": "54bd9e4b66fb2afda38b0e751fcdb739dc20d105"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNjoxNDowN1rOGpB7WQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNjoxNDowN1rOGpB7WQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY3NjM3Nw==", "bodyText": "podemos hacer mas safe esto? crasheamos si no viene de backend?, se que deberia venir pero hoy no tenemos una capa intermedia, lo mismo los otros getters", "url": "https://github.com/mercadopago/px-android/pull/2208#discussion_r445676377", "createdAt": "2020-06-25T16:14:07Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/business_result/CongratsResponseMapper.java", "diffHunk": "@@ -304,4 +307,52 @@ public String getButtonDeepLink() {\n \n         return crossSellingBoxData;\n     }\n+\n+    @Nullable\n+    private MLBusinessActionCardViewData getMoneySplitData(@Nullable final CongratsResponse.MoneySplit moneySplit) {\n+\n+        if (moneySplit == null) {\n+            return null;\n+        }\n+\n+        final Text title = moneySplit.getTitle();\n+\n+        return new MLBusinessActionCardViewData() {\n+            @NonNull\n+            @Override\n+            public String getTitle() {\n+                return title.getMessage();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "54bd9e4b66fb2afda38b0e751fcdb739dc20d105"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3NjY0NjIx", "url": "https://github.com/mercadopago/px-android/pull/2208#pullrequestreview-437664621", "createdAt": "2020-06-25T16:31:20Z", "commit": {"oid": "54bd9e4b66fb2afda38b0e751fcdb739dc20d105"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNjozMToyMFrOGpCnwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNjozMToyMFrOGpCnwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY4Nzc0NA==", "bodyText": "Revisar indentado", "url": "https://github.com/mercadopago/px-android/pull/2208#discussion_r445687744", "createdAt": "2020-06-25T16:31:20Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/business_result/CongratsViewModel.kt", "diffHunk": "@@ -1,18 +1,19 @@\n package com.mercadopago.android.px.internal.features.business_result\n \n+import com.mercadolibre.android.mlbusinesscomponents.components.actioncard.MLBusinessActionCardViewData\n import com.mercadolibre.android.mlbusinesscomponents.components.common.downloadapp.MLBusinessDownloadAppData\n import com.mercadolibre.android.mlbusinesscomponents.components.crossselling.MLBusinessCrossSellingBoxData\n-import com.mercadolibre.android.mlbusinesscomponents.components.discount.MLBusinessDiscountBoxData\n import com.mercadolibre.android.mlbusinesscomponents.components.loyalty.MLBusinessLoyaltyRingData\n import com.mercadopago.android.px.model.internal.Action\n import com.mercadopago.android.px.model.internal.Text\n \n internal data class CongratsViewModel(\n-    val loyaltyRingData: MLBusinessLoyaltyRingData?,\n-    val discountBoxData: PXDiscountBoxData?,\n-    val showAllDiscounts: Action?,\n-    val downloadAppData: MLBusinessDownloadAppData?,\n-    val crossSellingBoxData: List<MLBusinessCrossSellingBoxData>?,\n-    val topTextBox: Text,\n-    val viewReceipt: Action?,\n-    val customOrder: Boolean)\n\\ No newline at end of file\n+        val loyaltyRingData: MLBusinessLoyaltyRingData?,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "54bd9e4b66fb2afda38b0e751fcdb739dc20d105"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3NjY2NDYy", "url": "https://github.com/mercadopago/px-android/pull/2208#pullrequestreview-437666462", "createdAt": "2020-06-25T16:33:41Z", "commit": {"oid": "54bd9e4b66fb2afda38b0e751fcdb739dc20d105"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNjozMzo0MVrOGpCtPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNjozMzo0MVrOGpCtPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY4OTE1MQ==", "bodyText": "No me copa en el presenter esto, podriamos tener un objeto que conozca estos est\u00e1ticos, podria ser un enum si lo necesitamos a nivel firma", "url": "https://github.com/mercadopago/px-android/pull/2208#discussion_r445689151", "createdAt": "2020-06-25T16:33:41Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/payment_result/PaymentResultPresenter.java", "diffHunk": "@@ -47,6 +49,7 @@\n     private final ResultViewTrack resultViewTrack;\n     private final PaymentResultScreenConfiguration screenConfiguration;\n     private final FlowBehaviour flowBehaviour;\n+    private static final String MONEY_SPLIT_TYPE = \"money_split\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "54bd9e4b66fb2afda38b0e751fcdb739dc20d105"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3NjcxMjA5", "url": "https://github.com/mercadopago/px-android/pull/2208#pullrequestreview-437671209", "createdAt": "2020-06-25T16:39:50Z", "commit": {"oid": "54bd9e4b66fb2afda38b0e751fcdb739dc20d105"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNjozOTo1MFrOGpC75Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNjozOTo1MFrOGpC75Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY5MjkwMQ==", "bodyText": "Ac\u00e1 quizas podriamos utilizar el mecanismo de trackFromView que ofrece EventTracker, y te independizas de la vista que se trackea el evento", "url": "https://github.com/mercadopago/px-android/pull/2208#discussion_r445692901", "createdAt": "2020-06-25T16:39:50Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/tracking/internal/events/CongratsDeepLink.kt", "diffHunk": "@@ -0,0 +1,20 @@\n+package com.mercadopago.android.px.tracking.internal.events\n+\n+import java.util.*\n+\n+abstract class CongratsDeepLink : EventTracker() {\n+    protected abstract val congratsType: String\n+    protected abstract val type: String\n+    protected abstract val deepLink: String\n+\n+    override fun getEventPath() = path.format(Locale.US, congratsType)\n+\n+    override fun getEventData() = mutableMapOf(\n+            \"type\" to type,\n+            \"deep_link\" to deepLink\n+    )\n+\n+    companion object {\n+        private const val path = \"$BASE_PATH/congrats/%s/deep_link\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "54bd9e4b66fb2afda38b0e751fcdb739dc20d105"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3Njc0OTQw", "url": "https://github.com/mercadopago/px-android/pull/2208#pullrequestreview-437674940", "createdAt": "2020-06-25T16:44:39Z", "commit": {"oid": "54bd9e4b66fb2afda38b0e751fcdb739dc20d105"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNjo0NDozOVrOGpDHCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNjo0NDozOVrOGpDHCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY5NTc1Mw==", "bodyText": "no deberia considerar tambien si es MP o ML? trackearia true para ML en versiones viejas cuando lo prendan", "url": "https://github.com/mercadopago/px-android/pull/2208#discussion_r445695753", "createdAt": "2020-06-25T16:44:39Z", "author": {"login": "cgaggino"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/tracking/internal/model/ResultViewTrackModel.java", "diffHunk": "@@ -54,13 +55,15 @@ public ResultViewTrackModel(@NonNull final PaymentModel paymentModel,\n         hasBottomView = screenConfiguration.hasBottomFragment();\n         hasTopView = screenConfiguration.hasTopFragment();\n         hasImportantView = false;\n+        hasMoneySplitView = paymentModel.getCongratsResponse().getMoneySplit() != null;\n     }\n \n     public ResultViewTrackModel(@NonNull final BusinessPaymentModel paymentModel,\n         @NonNull final CheckoutPreference checkoutPreference, @NonNull final String currencyId) {\n         this(Style.CUSTOM, paymentModel, checkoutPreference, currencyId);\n         hasBottomView = paymentModel.getPayment().hasBottomFragment();\n         hasTopView = paymentModel.getPayment().hasTopFragment();\n+        hasMoneySplitView = paymentModel.getCongratsResponse().getMoneySplit() != null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "54bd9e4b66fb2afda38b0e751fcdb739dc20d105"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3Njc3MzI3", "url": "https://github.com/mercadopago/px-android/pull/2208#pullrequestreview-437677327", "createdAt": "2020-06-25T16:47:31Z", "commit": {"oid": "54bd9e4b66fb2afda38b0e751fcdb739dc20d105"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNjo0NzozMVrOGpDOhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQxNjo0NzozMVrOGpDOhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY5NzY3MQ==", "bodyText": "qued\u00f3 de m\u00e1s el comment de default", "url": "https://github.com/mercadopago/px-android/pull/2208#discussion_r445697671", "createdAt": "2020-06-25T16:47:31Z", "author": {"login": "cgaggino"}, "path": "px-services/src/main/java/com/mercadopago/android/px/model/internal/CongratsResponse.java", "diffHunk": "@@ -553,4 +563,52 @@ public int getRight() {\n             return right;\n         }\n     }\n+\n+    /* default */ public static final class MoneySplit implements Parcelable {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "54bd9e4b66fb2afda38b0e751fcdb739dc20d105"}, "originalPosition": 50}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3Njc4MDM0", "url": "https://github.com/mercadopago/px-android/pull/2208#pullrequestreview-437678034", "createdAt": "2020-06-25T16:48:27Z", "commit": {"oid": "54bd9e4b66fb2afda38b0e751fcdb739dc20d105"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f20b5fa6efc176f7f15763be1256a54253f7c72", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/5f20b5fa6efc176f7f15763be1256a54253f7c72", "committedDate": "2020-06-25T18:11:50Z", "message": "review changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c071da04e0050fe253732955afc01bee6f2222c", "author": {"user": {"login": "jorGonzalez291292", "name": "Jorge Daniel Gonzalez"}}, "url": "https://github.com/mercadopago/px-android/commit/5c071da04e0050fe253732955afc01bee6f2222c", "committedDate": "2020-06-25T18:14:37Z", "message": "change base context"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22e85cd633a5a4fd499d9bc820fd48a296499806", "author": {"user": {"login": "guchito9", "name": "Guche Mantuano"}}, "url": "https://github.com/mercadopago/px-android/commit/22e85cd633a5a4fd499d9bc820fd48a296499806", "committedDate": "2020-06-25T18:45:14Z", "message": "Remove experimental business components version"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3NzY1NjM4", "url": "https://github.com/mercadopago/px-android/pull/2208#pullrequestreview-437765638", "createdAt": "2020-06-25T18:45:33Z", "commit": {"oid": "22e85cd633a5a4fd499d9bc820fd48a296499806"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3815, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}