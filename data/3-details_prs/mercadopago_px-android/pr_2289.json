{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwMjY3MDkw", "number": 2289, "title": "Fixing tracking in new congrats", "bodyText": "Se arregla el tracking de la congrats en base al nuevo flujo de congrats\nMotivaci\u00f3n y Contexto\n\nDescripci\u00f3n\n\nC\u00f3mo probarlo\n\n\nScreenshots\n\n\nTipo de cambio (para el release manager)\n\n Breaking change (Fix o feature que cambia una funcionalidad existente o rompe firmas)\n\n\n\n Mi cambio afecta a los integradores internos\n\n\nCompartir conocimiento", "createdAt": "2020-08-19T16:03:35Z", "url": "https://github.com/mercadopago/px-android/pull/2289", "merged": true, "mergeCommit": {"oid": "2419433ece9e22b7e7c430549f2c2683877a4aea"}, "closed": true, "closedAt": "2020-08-26T13:45:10Z", "author": {"login": "nmanuelidesML"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAvU4hgFqTQ3MTU0MjMyMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCsDIyABqjM2OTQ4ODMyNTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNTQyMzIx", "url": "https://github.com/mercadopago/px-android/pull/2289#pullrequestreview-471542321", "createdAt": "2020-08-20T12:25:34Z", "commit": {"oid": "39495da3433951e485dc3d319884f7339ea4c436"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMjoyNTozNFrOHD-aog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMjoyNTozNFrOHD-aog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzkzMDQwMg==", "bodyText": "sacar del BPM el paymentId o receipt es exactamente lo mismo no?", "url": "https://github.com/mercadopago/px-android/pull/2289#discussion_r473930402", "createdAt": "2020-08-20T12:25:34Z", "author": {"login": "mmunozpatinomeli"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/business_result/BusinessPaymentResultMapper.java", "diffHunk": "@@ -38,8 +38,8 @@ public BusinessPaymentResultViewModel map(@NonNull final PaymentCongratsModel mo\n             .setMethodModels(methodModels)\n             .setCongratsViewModel(new PaymentCongratsResponseMapper(new BusinessPaymentResultTracker())\n                 .map(model.getPaymentCongratsResponse()))\n-            .setReceiptId((type == PaymentCongratsModel.CongratsType.APPROVED && model.getShouldShowReceipt()) ? model\n-                .getReceiptId() : null)\n+            .setReceiptId((type == PaymentCongratsModel.CongratsType.APPROVED && model.getShouldShowReceipt()) ? String\n+                .valueOf(model.getPaymentId()) : null)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "39495da3433951e485dc3d319884f7339ea4c436"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNTQzMDk1", "url": "https://github.com/mercadopago/px-android/pull/2289#pullrequestreview-471543095", "createdAt": "2020-08-20T12:26:37Z", "commit": {"oid": "39495da3433951e485dc3d319884f7339ea4c436"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMjoyNjozOFrOHD-c7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMjoyNjozOFrOHD-c7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzkzMDk4OQ==", "bodyText": "niko ac\u00e1 no quedan varias l\u00edneas comentadas m\u00e1s abajo en este mismo archivo??", "url": "https://github.com/mercadopago/px-android/pull/2289#discussion_r473930989", "createdAt": "2020-08-20T12:26:38Z", "author": {"login": "mmunozpatinomeli"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/business_result/BusinessPaymentResultPresenter.java", "diffHunk": "@@ -42,7 +44,7 @@\n         @NonNull final FlowBehaviour flowBehaviour, final boolean isMP) {\n         this.model = model;\n         this.flowBehaviour = flowBehaviour;\n-//        viewTracker = new ResultViewTrack(model, paymentSettings, isMP);\n+        viewTracker = new ResultViewTrack(model, isMP);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "39495da3433951e485dc3d319884f7339ea4c436"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNTQ2MTY3", "url": "https://github.com/mercadopago/px-android/pull/2289#pullrequestreview-471546167", "createdAt": "2020-08-20T12:30:55Z", "commit": {"oid": "39495da3433951e485dc3d319884f7339ea4c436"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMjozMDo1NVrOHD-mdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMjozMDo1NVrOHD-mdg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzkzMzQzMA==", "bodyText": "esto no toca borrarlo?", "url": "https://github.com/mercadopago/px-android/pull/2289#discussion_r473933430", "createdAt": "2020-08-20T12:30:55Z", "author": {"login": "mmunozpatinomeli"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/tracking/internal/views/ResultViewTrack.kt", "diffHunk": "@@ -19,18 +19,25 @@ class ResultViewTrack : TrackWrapper {\n     private val remediesResponse: RemediesResponse\n \n     constructor(paymentModel: PaymentModel, screenConfiguration: PaymentResultScreenConfiguration,\n-        paymentSetting: PaymentSettingRepository, isMP: Boolean) {\n+                paymentSetting: PaymentSettingRepository, isMP: Boolean) {\n         resultViewTrackModel = ResultViewTrackModel(paymentModel, screenConfiguration, paymentSetting.checkoutPreference!!,\n-            paymentSetting.currency.id, isMP)\n+                paymentSetting.currency.id, isMP)\n         paymentStatus = getMappedResult(paymentModel.paymentResult)\n         this.remediesResponse = paymentModel.remedies\n     }\n \n-    constructor(paymentModel: BusinessPaymentModel, paymentSetting: PaymentSettingRepository, isMP: Boolean) {\n+    /*constructor(paymentModel: BusinessPaymentModel, paymentSetting: PaymentSettingRepository, isMP: Boolean) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "39495da3433951e485dc3d319884f7339ea4c436"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNTQ3MzU1", "url": "https://github.com/mercadopago/px-android/pull/2289#pullrequestreview-471547355", "createdAt": "2020-08-20T12:32:30Z", "commit": {"oid": "39495da3433951e485dc3d319884f7339ea4c436"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMjozMjozMVrOHD-p-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMjozMjozMVrOHD-p-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzkzNDMyOA==", "bodyText": "ac\u00e1 s\u00f3lo agregaste un import??? o.O", "url": "https://github.com/mercadopago/px-android/pull/2289#discussion_r473934328", "createdAt": "2020-08-20T12:32:31Z", "author": {"login": "mmunozpatinomeli"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/tracking/internal/mapper/FromDiscountItemToItemId.java", "diffHunk": "@@ -1,6 +1,7 @@\n package com.mercadopago.android.px.tracking.internal.mapper;\n \n import android.support.annotation.NonNull;\n+import com.mercadopago.android.px.internal.features.payment_congrats.model.PaymentCongratsResponse;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "39495da3433951e485dc3d319884f7339ea4c436"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fb0955d732948308253c9cba9bf2c7a9cd049ac9", "author": {"user": {"login": "nmanuelidesML", "name": "Niko Manuelides"}}, "url": "https://github.com/mercadopago/px-android/commit/fb0955d732948308253c9cba9bf2c7a9cd049ac9", "committedDate": "2020-08-24T18:11:25Z", "message": "fixed android x annotation"}, "afterCommit": {"oid": "b33f054296cb3e9e9d9e98347a080269621792f8", "author": {"user": {"login": "nmanuelidesML", "name": "Niko Manuelides"}}, "url": "https://github.com/mercadopago/px-android/commit/b33f054296cb3e9e9d9e98347a080269621792f8", "committedDate": "2020-08-24T19:13:35Z", "message": "fixing tracking"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczNzk5OTM2", "url": "https://github.com/mercadopago/px-android/pull/2289#pullrequestreview-473799936", "createdAt": "2020-08-24T19:37:57Z", "commit": {"oid": "b33f054296cb3e9e9d9e98347a080269621792f8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxOTozNzo1OFrOHFzhfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxOTozNzo1OFrOHFzhfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTg0OTA4Nw==", "bodyText": "niko esta l\u00ednea no deber\u00eda borrarse", "url": "https://github.com/mercadopago/px-android/pull/2289#discussion_r475849087", "createdAt": "2020-08-24T19:37:58Z", "author": {"login": "mmunozpatinomeli"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/pay_button/PayButtonFragment.kt", "diffHunk": "@@ -101,7 +100,6 @@ class PayButtonFragment : Fragment(), PayButton.View, SecurityValidationHandler\n             is UIResult.VisualProcessorResult -> PaymentProcessorActivity.start(this, REQ_CODE_PAYMENT_PROCESSOR)\n             is UIError.ConnectionError -> showSnackBar(stateUI.error)\n             is UIResult.PaymentResult -> PaymentResultActivity.start(this, REQ_CODE_CONGRATS, stateUI.model)\n-            is UIResult.NoCongratsResult -> DummyResultActivity.start(this, REQ_CODE_CONGRATS, stateUI.model)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b33f054296cb3e9e9d9e98347a080269621792f8"}, "originalPosition": 49}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczODAyMjg2", "url": "https://github.com/mercadopago/px-android/pull/2289#pullrequestreview-473802286", "createdAt": "2020-08-24T19:41:47Z", "commit": {"oid": "b33f054296cb3e9e9d9e98347a080269621792f8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxOTo0MTo0N1rOHFzoWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxOTo0MTo0N1rOHFzoWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTg1MDg0Mg==", "bodyText": "todos estos with, validamos que en la firma en iOS respecto a estos datos est\u00e1 igual?", "url": "https://github.com/mercadopago/px-android/pull/2289#discussion_r475850842", "createdAt": "2020-08-24T19:41:47Z", "author": {"login": "mmunozpatinomeli"}, "path": "px-checkout/src/main/java/com/mercadopago/android/px/internal/features/payment_congrats/model/PaymentCongratsModel.java", "diffHunk": "@@ -467,5 +669,68 @@ public Builder withExpenseSplit(final PaymentCongratsResponse.ExpenseSplit expen\n             this.customSorting = customSorting;\n             return this;\n         }\n+\n+        /**\n+         * @param campaignId the id of the campaign for the payment\n+         * @return builder with the added String\n+         */\n+        /* default */ Builder withCampaignId(@Nullable final String campaignId) {\n+            this.campaignId = campaignId;\n+            return this;\n+        }\n+\n+        /**\n+         * @param flow the name of the flow building the congrats (e.g \"buyer_qr\")\n+         * @return builder with the added String\n+         */\n+        /* default */ Builder withFlow(final String flow) {\n+            this.flow = flow;\n+            return this;\n+        }\n+\n+        /**\n+         * @param currencyId the id of the currency being used to pay\n+         * @return builder with the added String\n+         */\n+        /* default */ Builder withCurrencyId(final String currencyId) {\n+            this.currencyId = currencyId;\n+            return this;\n+        }\n+\n+        /**\n+         * @param paymentStatus the status of the payment\n+         * @return builder with the added String\n+         */\n+        /* default */ Builder withPaymentStatus(final String paymentStatus) {\n+            this.paymentStatus = paymentStatus;\n+            return this;\n+        }\n+\n+        /**\n+         * @param paymentStatusDetail a description for the payment status\n+         * @return builder with the added String\n+         */\n+        /* default */ Builder withPaymentStatusDetail(final String paymentStatusDetail) {\n+            this.paymentStatusDetail = paymentStatusDetail;\n+            return this;\n+        }\n+\n+        /**\n+         * @param paymentData info about the payment for internal tracking purposes\n+         * @return builder with the added paymentData\n+         */\n+        /* default */ Builder withPaymentData(final PaymentData paymentData) {\n+            this.paymentData = paymentData;\n+            return this;\n+        }\n+\n+        /**\n+         * @param discountCouponsAmount the total amount of discounts from the coupons\n+         * @return builder with the added discount coupons amount\n+         */\n+        /* default */ Builder withDiscountCouponsAmount(final BigDecimal discountCouponsAmount) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b33f054296cb3e9e9d9e98347a080269621792f8"}, "originalPosition": 679}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "af7dece612b73a753c25b2c7530093207c88813f", "author": {"user": {"login": "nmanuelidesML", "name": "Niko Manuelides"}}, "url": "https://github.com/mercadopago/px-android/commit/af7dece612b73a753c25b2c7530093207c88813f", "committedDate": "2020-08-25T19:06:44Z", "message": "added tracking info to PCM"}, "afterCommit": {"oid": "86bf2d1f46a54c22512d4a279eaeacd3a6fe960a", "author": {"user": {"login": "nmanuelidesML", "name": "Niko Manuelides"}}, "url": "https://github.com/mercadopago/px-android/commit/86bf2d1f46a54c22512d4a279eaeacd3a6fe960a", "committedDate": "2020-08-25T19:12:23Z", "message": "fixing tracking"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6b89576039e03eb8496d089e0fad43ed9f4d2c22", "author": {"user": {"login": "nmanuelidesML", "name": "Niko Manuelides"}}, "url": "https://github.com/mercadopago/px-android/commit/6b89576039e03eb8496d089e0fad43ed9f4d2c22", "committedDate": "2020-08-25T20:04:45Z", "message": "fix tracking info with new tracking data class"}, "afterCommit": {"oid": "320ac13f5a2f64fa5fa73b0bfa482a185fdc5923", "author": {"user": {"login": "nmanuelidesML", "name": "Niko Manuelides"}}, "url": "https://github.com/mercadopago/px-android/commit/320ac13f5a2f64fa5fa73b0bfa482a185fdc5923", "committedDate": "2020-08-25T20:16:25Z", "message": "fixing tracking"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0ODIyMzM0", "url": "https://github.com/mercadopago/px-android/pull/2289#pullrequestreview-474822334", "createdAt": "2020-08-25T20:20:40Z", "commit": {"oid": "320ac13f5a2f64fa5fa73b0bfa482a185fdc5923"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "673ae164309e86c907f0c8afacdc3f7d08749f78", "author": {"user": {"login": "nmanuelidesML", "name": "Niko Manuelides"}}, "url": "https://github.com/mercadopago/px-android/commit/673ae164309e86c907f0c8afacdc3f7d08749f78", "committedDate": "2020-08-26T13:43:48Z", "message": "fixing tracking"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "320ac13f5a2f64fa5fa73b0bfa482a185fdc5923", "author": {"user": {"login": "nmanuelidesML", "name": "Niko Manuelides"}}, "url": "https://github.com/mercadopago/px-android/commit/320ac13f5a2f64fa5fa73b0bfa482a185fdc5923", "committedDate": "2020-08-25T20:16:25Z", "message": "fixing tracking"}, "afterCommit": {"oid": "673ae164309e86c907f0c8afacdc3f7d08749f78", "author": {"user": {"login": "nmanuelidesML", "name": "Niko Manuelides"}}, "url": "https://github.com/mercadopago/px-android/commit/673ae164309e86c907f0c8afacdc3f7d08749f78", "committedDate": "2020-08-26T13:43:48Z", "message": "fixing tracking"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3743, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}