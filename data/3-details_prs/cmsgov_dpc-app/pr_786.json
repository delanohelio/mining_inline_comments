{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzOTA4OTcx", "number": 786, "title": "DPC-443 limit the number of members in roster", "bodyText": "Why\nWe need a limit on the number of patients that a provider can have attributed to them. This is a really basic anti-fraud measure.\nWe'll start at 1000 for now, but that may have to be changed. It should definitely be a config option.\nWhat Changed\nCheck roster size when creating, updating, and adding members\nChoices Made\nCheck at the attribution layer for roster size.\nTickets closed:\nhttps://jiraent.cms.gov/browse/DPC-443\nFuture Work\nList any additional tickets that have either been created due to work in this PR, or existing tickets that expand upon the feature or provide additional fixes.\nChecklist\n\n All tests are passing via make ci-app (app change) and make ci-web (website change)\n Swagger documentation has been updated\n FHIR documentation has been updated\n Any required dpc-ops changes have a PR submitted and mentioned in this ticket\n Any manual migration steps are documented, scripts written (where applicable), and tested\n Before merging, any required dpc-ops changes have been approved and merged into master of the dpc-ops repo", "createdAt": "2020-05-06T06:48:11Z", "url": "https://github.com/CMSgov/dpc-app/pull/786", "merged": true, "mergeCommit": {"oid": "489d690dece920701ddfec2e45ccf8c9b49fc70f"}, "closed": true, "closedAt": "2020-05-28T02:40:25Z", "author": {"login": "MrBilnon"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcei65lgH2gAyNDEzOTA4OTcxOjkwNTk3MDRiNjI4NTIzNjU1YTAyNzg1MGY1ZjM0Y2Q5MjBkNDhhMDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcli4p2AH2gAyNDEzOTA4OTcxOjI0NTdkZTY5ODk4ZGJhZTRjMzFjNThiYzU1MGMyNGRiMjAwZGJkNWI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9059704b628523655a027850f5f34cd920d48a09", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/9059704b628523655a027850f5f34cd920d48a09", "committedDate": "2020-05-06T06:44:55Z", "message": "limit the number of members in roster"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2ODU0MzE5", "url": "https://github.com/CMSgov/dpc-app/pull/786#pullrequestreview-406854319", "createdAt": "2020-05-06T17:55:43Z", "commit": {"oid": "9059704b628523655a027850f5f34cd920d48a09"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNzo1NTo0M1rOGRewzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxODowNjoxMVrOGRfKZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDk4Mjk5MQ==", "bodyText": "A little tweak for the name; the unit test name and its calls should also be updated.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public static boolean rosterSizeToBig(int limit, Group... groups) {\n          \n          \n            \n                public static boolean rosterSizeTooBig(int limit, Group... groups) {", "url": "https://github.com/CMSgov/dpc-app/pull/786#discussion_r420982991", "createdAt": "2020-05-06T17:55:43Z", "author": {"login": "dhgreene"}, "path": "dpc-attribution/src/main/java/gov/cms/dpc/attribution/resources/AbstractGroupResource.java", "diffHunk": "@@ -47,4 +50,19 @@ protected AbstractGroupResource() {\n     @DELETE\n     @Path(\"/{rosterID}\")\n     public abstract Response deleteRoster(UUID rosterID);\n+\n+    public static boolean rosterSizeToBig(int limit, Group... groups) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9059704b628523655a027850f5f34cd920d48a09"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDk4OTU0MQ==", "bodyText": "This is the kind of thing we want to be setting via an environment variable, especially since we expect it to change over time.  Adding a new one will require an associated dpc-ops PR request and an addition to our store of secrets.  \ud83d\ude04", "url": "https://github.com/CMSgov/dpc-app/pull/786#discussion_r420989541", "createdAt": "2020-05-06T18:06:11Z", "author": {"login": "dhgreene"}, "path": "dpc-attribution/src/main/resources/application.conf", "diffHunk": "@@ -48,6 +48,8 @@ dpc.attribution {\n   // Disable FHIR validation\n   fhir.validation.enabled = false\n \n+  patientLimit = 1000", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9059704b628523655a027850f5f34cd920d48a09"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "673ce32392fe0d8ad4d9f0fd8702965e6eeb7905", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/673ce32392fe0d8ad4d9f0fd8702965e6eeb7905", "committedDate": "2020-05-06T20:30:47Z", "message": "add environment override for patientLimit to prod.application.conf and correct naming of method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd342e45ea54a02a10cf02f5f92beb5292f266c4", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/cd342e45ea54a02a10cf02f5f92beb5292f266c4", "committedDate": "2020-05-10T08:27:27Z", "message": "make provider and patient limit configurable"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4Mzg4OTcz", "url": "https://github.com/CMSgov/dpc-app/pull/786#pullrequestreview-418388973", "createdAt": "2020-05-26T15:02:08Z", "commit": {"oid": "cd342e45ea54a02a10cf02f5f92beb5292f266c4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2457de69898dbae4c31c58bc550c24db200dbd5b", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/2457de69898dbae4c31c58bc550c24db200dbd5b", "committedDate": "2020-05-28T00:39:56Z", "message": "Merge branch 'master' into DPC-443-limit-attribution-members"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 131, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}