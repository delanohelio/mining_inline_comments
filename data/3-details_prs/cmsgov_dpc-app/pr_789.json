{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1NzYzNDYy", "number": 789, "title": "DPC-91 refactor configs", "bodyText": "Why\nClean up the configs and allow things to be configurable\nWhat Changed\nUsing substitution syntax for making variables have a default value if not defined as a environment variable\nChoices Made\nJustify changes made and any reasons for why a given path was taken, as opposed to an alternative option.\nTickets closed:\nhttps://jira.cms.gov/browse/DPC-91\nFuture Work\nList any additional tickets that have either been created due to work in this PR, or existing tickets that expand upon the feature or provide additional fixes.\nChecklist\n\n All tests are passing via make ci-app (app change) and make ci-web (website change)\n Swagger documentation has been updated\n FHIR documentation has been updated\n Any required dpc-ops changes have a PR submitted and mentioned in this ticket\n Any manual migration steps are documented, scripts written (where applicable), and tested\n Before merging, any required dpc-ops changes have been approved and merged into master of the dpc-ops repo", "createdAt": "2020-05-10T18:46:45Z", "url": "https://github.com/CMSgov/dpc-app/pull/789", "merged": true, "mergeCommit": {"oid": "d061e1f1f19de32cf74d85d0ba1f13ddb67374e3"}, "closed": true, "closedAt": "2020-06-02T05:25:54Z", "author": {"login": "MrBilnon"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcf_milgH2gAyNDE1NzYzNDYyOmFlNjk5MDY3Mjk4Y2ZmYTQ1OTViNTM4ZjQxNWNhNTU0MWViMTJhOWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnNpkfAH2gAyNDE1NzYzNDYyOmE1ZjU4YTM5NzM3YmZhMGVmODNiN2FjOGU0YjU5ZjgwZDdiZmQzMzk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ae699067298cffa4595b538f415ca5541eb12a9a", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/ae699067298cffa4595b538f415ca5541eb12a9a", "committedDate": "2020-05-10T18:43:51Z", "message": "refactor configs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7fd8b881dbcd2eb78a2621eab2fd17ddb4ca4c42", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/7fd8b881dbcd2eb78a2621eab2fd17ddb4ca4c42", "committedDate": "2020-05-13T17:44:58Z", "message": "remove property already defined at the base application.conf level"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1fe447a7c49a4666b4bd11cb7f99c454b2dd79f7", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/1fe447a7c49a4666b4bd11cb7f99c454b2dd79f7", "committedDate": "2020-05-14T22:06:15Z", "message": "Merge branch 'master' into DPC-1307-config-defaults"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzODc1ODgx", "url": "https://github.com/CMSgov/dpc-app/pull/789#pullrequestreview-413875881", "createdAt": "2020-05-18T19:23:10Z", "commit": {"oid": "1fe447a7c49a4666b4bd11cb7f99c454b2dd79f7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxOToyMzoxMFrOGXEhZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxOToyMzoxMFrOGXEhZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg0NDUxNg==", "bodyText": "The BFD_URL gets set in ops/config/decrypted/local.env for local environments, and is faithfully set for all AWS environments in Terraform.  Do we need a hard-coded default (here and elsewhere), or can this be deleted?", "url": "https://github.com/CMSgov/dpc-app/pull/789#discussion_r426844516", "createdAt": "2020-05-18T19:23:10Z", "author": {"login": "dhgreene"}, "path": "dpc-aggregation/src/main/resources/application.conf", "diffHunk": "@@ -6,16 +6,18 @@ dpc.aggregation {\n     keyStore {\n       type = \"JKS\"\n       defaultPassword = \"changeit\"\n+      defaultPassword = ${?BB_KEYSTORE_PASS}\n       location = \"../bbcerts/bb.keystore\"\n+      location = ${?BB_KEYSTORE_LOCATION}\n     }\n \n     timeouts {\n       connectionTimeout: 5000 // ms\n       socketTimeout: 5000 // ms\n       requestTimeout: 5000 // ms\n     }\n-\n-    serverBaseUrl = ${BFD_URL}\n+    serverBaseUrl = \"https://prod-sbx.bfdcloud.net/v1/fhir\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1fe447a7c49a4666b4bd11cb7f99c454b2dd79f7"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "721da60993e9331d075ea588ee54b9b7a5bac8f0", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/721da60993e9331d075ea588ee54b9b7a5bac8f0", "committedDate": "2020-05-22T14:36:37Z", "message": "Merge branch 'master' into DPC-1307-config-defaults"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72e2e634dfe0bc9108b220b4519a1fb1016abc7c", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/72e2e634dfe0bc9108b220b4519a1fb1016abc7c", "committedDate": "2020-05-27T04:45:28Z", "message": "remove fallback value for BFD_URL as it's always defined from the environment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65b551b45f5376a9756efa09ca6ee554d8662699", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/65b551b45f5376a9756efa09ca6ee554d8662699", "committedDate": "2020-05-28T18:29:30Z", "message": "Merge branch 'master' into DPC-1307-config-defaults"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwOTc1MTM3", "url": "https://github.com/CMSgov/dpc-app/pull/789#pullrequestreview-420975137", "createdAt": "2020-05-29T13:59:01Z", "commit": {"oid": "65b551b45f5376a9756efa09ca6ee554d8662699"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41b5e6e29e888ad4abeea64886ef11540d837172", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/41b5e6e29e888ad4abeea64886ef11540d837172", "committedDate": "2020-06-01T15:44:16Z", "message": "Merge branch 'master' into DPC-1307-config-defaults"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5f58a39737bfa0ef83b7ac8e4b59f80d7bfd339", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/a5f58a39737bfa0ef83b7ac8e4b59f80d7bfd339", "committedDate": "2020-06-02T05:03:18Z", "message": "Merge branch 'master' into DPC-1307-config-defaults"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 136, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}