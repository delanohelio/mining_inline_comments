{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2NzI4ODcz", "number": 761, "title": "DPC-1283: Patient resource input validation", "bodyText": "Why\nDPC needs to validate that the values provided as identifiers within the http://hl7.org/fhir/sid/us-mbi system match the MBI format.\nWhat Changed\nValidation added to check MBI format in the PatientEntity and FHIRExtractors.\nChoices Made\nThe pattern fits the MBI format for placement of letters and numbers, but in order to allow synthetic data, does not limit the letters or numbers that may be used.\nFuture Work\nThere is a lot of room for improvement in API responses across the board. Rather than spending time setting up better responses for just this ticket, we should review as part of DPC-878.\nTickets Closed\nDPC-1283\nChecklist\n\n All tests are passing via make ci-app (app change) and make ci-web (website change)\n Swagger documentation has been updated\n FHIR documentation has been updated\n Any required dpc-ops changes have a PR submitted and mentioned in this ticket\n Any manual migration steps are documented, scripts written (where applicable), and tested\n Before merging, any required dpc-ops changes have been approved and merged into master of the dpc-ops repo", "createdAt": "2020-04-21T14:56:22Z", "url": "https://github.com/CMSgov/dpc-app/pull/761", "merged": true, "mergeCommit": {"oid": "9045b40098224b0ee6954de7aaca1fb6a571d051"}, "closed": true, "closedAt": "2020-04-22T20:46:32Z", "author": {"login": "em1"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcZ4WypAH2gAyNDA2NzI4ODczOjY4Yzc4ODI1Y2E0NjJjZTYzOTc4ZmU3ZjY3ZTY4MDExMzI0ZmZjNGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcaJubLAFqTM5ODI5MDUzOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "68c78825ca462ce63978fe7f67e68011324ffc4b", "author": {"user": {"login": "em1", "name": null}}, "url": "https://github.com/CMSgov/dpc-app/commit/68c78825ca462ce63978fe7f67e68011324ffc4b", "committedDate": "2020-04-21T18:53:46Z", "message": "MBI pattern on PatientEntity beneficiaryID"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35e3f82a8889cd439347017866788ee4438bc8c9", "author": {"user": {"login": "em1", "name": null}}, "url": "https://github.com/CMSgov/dpc-app/commit/35e3f82a8889cd439347017866788ee4438bc8c9", "committedDate": "2020-04-21T18:53:56Z", "message": "Test changes for MBI format in Patient"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b5361a7a762de7338659096b953fa8b8c6e76e85", "author": {"user": {"login": "em1", "name": null}}, "url": "https://github.com/CMSgov/dpc-app/commit/b5361a7a762de7338659096b953fa8b8c6e76e85", "committedDate": "2020-04-21T14:31:02Z", "message": "Test changes for MBI format in Patient"}, "afterCommit": {"oid": "35e3f82a8889cd439347017866788ee4438bc8c9", "author": {"user": {"login": "em1", "name": null}}, "url": "https://github.com/CMSgov/dpc-app/commit/35e3f82a8889cd439347017866788ee4438bc8c9", "committedDate": "2020-04-21T18:53:56Z", "message": "Test changes for MBI format in Patient"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4MTc0MjYz", "url": "https://github.com/CMSgov/dpc-app/pull/761#pullrequestreview-398174263", "createdAt": "2020-04-22T13:11:46Z", "commit": {"oid": "35e3f82a8889cd439347017866788ee4438bc8c9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxMzoxMTo0N1rOGJ1nhA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxMzoxMTo0N1rOGJ1nhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjk2ODgzNg==", "bodyText": "Would this be a good place to document the difference between valid MBI's and \"valid\" test MBI's?", "url": "https://github.com/CMSgov/dpc-app/pull/761#discussion_r412968836", "createdAt": "2020-04-22T13:11:47Z", "author": {"login": "dhgreene"}, "path": "dpc-common/src/main/java/gov/cms/dpc/common/entities/PatientEntity.java", "diffHunk": "@@ -20,9 +21,11 @@\n public class PatientEntity extends PersonEntity {\n \n     public static final long serialVersionUID = 42L;\n+    public static final String MBI_FORMAT = \"^\\\\d[a-zA-Z][a-zA-Z0-9]\\\\d[a-zA-Z][a-zA-Z0-9]\\\\d[a-zA-Z]{2}\\\\d{2}$\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35e3f82a8889cd439347017866788ee4438bc8c9"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c976f8ec80145f5885f7af521037e8dd0d448de6", "author": {"user": {"login": "em1", "name": null}}, "url": "https://github.com/CMSgov/dpc-app/commit/c976f8ec80145f5885f7af521037e8dd0d448de6", "committedDate": "2020-04-22T14:01:51Z", "message": "Add comment about MBI format"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4MjkwNTM4", "url": "https://github.com/CMSgov/dpc-app/pull/761#pullrequestreview-398290538", "createdAt": "2020-04-22T15:07:58Z", "commit": {"oid": "c976f8ec80145f5885f7af521037e8dd0d448de6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 109, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}