{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2MzczOTg0", "number": 557, "title": "Rename MBI identifier to BENE_ID", "bodyText": "Why\nIn preparation for our migration to MBIs from BB bene_id, we need to rename the identifier enum to avoid conflicts in the future.\nWhat Changed\nThis is a simple IntelliJ refactoring which did a find/replace across the java code.\nChoices Made\nTickets closed:\nFuture Work\nDPC-938: Update patient profile to use MBIs instead of bene_ids\nChecklist\n\n All tests are passing via make ci-app (app change) and make ci-web (website change)\n Swagger documentation has been updated\n FHIR documentation has been updated\n Any required dpc-ops changes have a PR submitted and mentioned in this ticket\n Any manual migration steps are documented, scripts written (where applicable), and tested\n Before merging, any required dpc-ops changes have been approved and merged into master of the dpc-ops repo", "createdAt": "2020-01-23T13:54:37Z", "url": "https://github.com/CMSgov/dpc-app/pull/557", "merged": true, "mergeCommit": {"oid": "30fc80de4924a0e989e34979aff9d832603b3543"}, "closed": true, "closedAt": "2020-01-28T14:37:36Z", "author": {"login": "nickrobison-usds"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb9KtdkgH2gAyMzY2MzczOTg0Ojc2NWM4NzA5ODEyNWJhNWVkNzQ0ODhhOGNiODU1ZDM5N2RmOGU3YWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-xzJhgH2gAyMzY2MzczOTg0OjkyZGI5MDc1MWY0NDVmZmU3NzIxMGUyYzc1Mzk4NjRkMmQ4YWQxYjE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "765c87098125ba5ed74488a8cb855d397df8e7aa", "author": {"user": {"login": "nickrobison-usds", "name": "Nick Robison"}}, "url": "https://github.com/CMSgov/dpc-app/commit/765c87098125ba5ed74488a8cb855d397df8e7aa", "committedDate": "2020-01-23T13:53:01Z", "message": "Rename MBI identifier to BENE_ID.\n\nIn preparation for our migration to MBIs from BB bene_id, we need to rename the identifier enum to avoid conflicts in the future.\n\nThis is a simple IntelliJ refactoring."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a2e32607c51d4f46645aebf60ec2e86bbc12ed8", "author": {"user": {"login": "nickrobison-usds", "name": "Nick Robison"}}, "url": "https://github.com/CMSgov/dpc-app/commit/0a2e32607c51d4f46645aebf60ec2e86bbc12ed8", "committedDate": "2020-01-23T16:21:36Z", "message": "Update identifier system\n\nUpdated the identifier system in the ConsentResourceTest parameterized values.\nWe'll need to switch this back when we move fully to MBIs."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3NjE4ODE3", "url": "https://github.com/CMSgov/dpc-app/pull/557#pullrequestreview-347618817", "createdAt": "2020-01-23T21:26:51Z", "commit": {"oid": "0a2e32607c51d4f46645aebf60ec2e86bbc12ed8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QyMToyNjo1MlrOFhNLMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QyMToyNjo1MlrOFhNLMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDM2MzE4Nw==", "bodyText": "There's an error on this test. I'm thinking it's because the profile is expecting an MBI, but FHIRExtractors.getPatientMPI() is called, looking for bene_id. So we might need to set both temporarily?", "url": "https://github.com/CMSgov/dpc-app/pull/557#discussion_r370363187", "createdAt": "2020-01-23T21:26:52Z", "author": {"login": "em1"}, "path": "dpc-api/src/test/java/gov/cms/dpc/api/validations/ProfileTests.java", "diffHunk": "@@ -58,7 +57,7 @@ void testPatientProfile() throws IOException, URISyntaxException {\n \n         // Try for a valid patient\n         final Patient validPatient = invalidPatient.copy();\n-        validPatient.addIdentifier().setSystem(DPCIdentifierSystem.MBI.getSystem()).setValue(\"test-mbi\");\n+        validPatient.addIdentifier().setSystem(DPCIdentifierSystem.BENE_ID.getSystem()).setValue(\"test-mbi\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0a2e32607c51d4f46645aebf60ec2e86bbc12ed8"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "134d572440bca9fe587a045366df4c9a2ad1e116", "author": {"user": null}, "url": "https://github.com/CMSgov/dpc-app/commit/134d572440bca9fe587a045366df4c9a2ad1e116", "committedDate": "2020-01-24T15:27:18Z", "message": "DPC-942: Update organization in API from web app (#555)\n\n* Update organization from web app to API\r\n\r\nUse FHIR client to update registered organizations in API\r\n\r\nAlso some cleanup from manual testing; remove delay in org creation\r\n\r\n* Add fhir endpoint updating\r\n\r\n* Add payloadType to endpoint update request\r\n\r\n* Add Endpoint.payloadType to Organization$submit\r\n\r\nThis field is required by FHIR but currently our API has a bug that\r\nskips validation of this field when creating an Endpoint. This commit\r\nadds the field and updates the test stubs.\r\n\r\nSee:\r\nhttps://hl7.org/fhir/STU3/endpoint-example.json.html\r\nhttps://dpc.cms.gov/ig/StructureDefinition-dpc-profile-endpoint-definitions.html\r\n\r\n* Cleanup\r\n\r\n* Refactor for smaller APIClient class\r\n\r\nPull out FHIR resource building into a separate class.\r\n\r\nOne other cleanup fix in attribute method in organization_registrar\r\n\r\nMore cleanup from codeclimate recs\r\n\r\n* Refactor APIClient to separate org and endpoint\r\n\r\nOrg and endpint update requests should be separate methods because\r\nthey are separate interactions with the API."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6127714b7462952502fdddc01e95e252d3024da", "author": {"user": {"login": "nickrobison-usds", "name": "Nick Robison"}}, "url": "https://github.com/CMSgov/dpc-app/commit/e6127714b7462952502fdddc01e95e252d3024da", "committedDate": "2020-01-24T15:27:18Z", "message": "Cleanup ProfileTests\n\nRemoved some unused variables and added todo to update the MBI's, once we're ready for it."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4983b2a75db67a58da40d8fcfdba26b8095fc8fb", "author": {"user": {"login": "nickrobison-usds", "name": "Nick Robison"}}, "url": "https://github.com/CMSgov/dpc-app/commit/4983b2a75db67a58da40d8fcfdba26b8095fc8fb", "committedDate": "2020-01-24T15:27:18Z", "message": "Revert patient profile changes.\n\nThis should not have been committed yet. It will come in a later PR."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f55af88a29c25b3bbd92b42b85a00cff468e08f", "author": {"user": {"login": "nickrobison-usds", "name": "Nick Robison"}}, "url": "https://github.com/CMSgov/dpc-app/commit/1f55af88a29c25b3bbd92b42b85a00cff468e08f", "committedDate": "2020-01-24T15:36:37Z", "message": "Merge branch 'master' into nickrobison/rename-dpc-identifier"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "926f2b38bebe88e4c92580ca7851c30ced6a325c", "author": {"user": {"login": "nickrobison-usds", "name": "Nick Robison"}}, "url": "https://github.com/CMSgov/dpc-app/commit/926f2b38bebe88e4c92580ca7851c30ced6a325c", "committedDate": "2020-01-24T17:30:38Z", "message": "Revert patient profile test."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MDMyODA4", "url": "https://github.com/CMSgov/dpc-app/pull/557#pullrequestreview-349032808", "createdAt": "2020-01-27T22:54:15Z", "commit": {"oid": "926f2b38bebe88e4c92580ca7851c30ced6a325c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92db90751f445ffe77210e2c7539864d2d8ad1b1", "author": {"user": {"login": "nickrobison-usds", "name": "Nick Robison"}}, "url": "https://github.com/CMSgov/dpc-app/commit/92db90751f445ffe77210e2c7539864d2d8ad1b1", "committedDate": "2020-01-28T13:59:27Z", "message": "Merge branch 'master' into nickrobison/rename-dpc-identifier"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 224, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}