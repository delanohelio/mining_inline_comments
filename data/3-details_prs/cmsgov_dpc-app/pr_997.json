{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcyMjY2MTIw", "number": 997, "title": "DPC-640 Persist MBI as uppercase", "bodyText": "Fixes DPC-640\n\nProposed Changes\n\nChange Details\n\nSecurity Implications\nNo new data is stored.\n\n\n new software dependencies\n\n\n\n security controls or supporting software altered\n\n\n\n new data stored or transmitted\n\n\n\n security checklist is completed for this change\n\n\n\n requires more information or team discussion to evaluate security implications\n\n\n\n no PHI/PII is affected by this change\n\n\nAcceptance Validation\n\n\nNo \"bad\" MBIs in DB.\n\nA script (attached to ticket) will need to be ran in order to convert previously stored MBIs to uppercase.\nUPDATE patients SET beneficiary_id=UPPER(beneficiary_id);\n\n\nNo way for \"bad\" MBIs to get in DB.\n\nAdded UPPER function to MBI field.\n\n\n\n\nFeedback Requested", "createdAt": "2020-08-24T05:22:28Z", "url": "https://github.com/CMSgov/dpc-app/pull/997", "merged": true, "mergeCommit": {"oid": "10b2f4649405527d30d8efe04f8ecf9a74fb41b0"}, "closed": true, "closedAt": "2020-08-25T06:07:17Z", "author": {"login": "MrMorie"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdB6wsBAH2gAyNDcyMjY2MTIwOmRiZWFmZTBjMGExNDhmYmJkMGZkYTUxZmYyZDA0OWZiZTE4MzBiM2E=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCQYUwAH2gAyNDcyMjY2MTIwOmUwZDk2ZGFmMDVjOTI3YzE4ZTE0YzMxOTZlM2Y5OTBmN2NkNjVmZDM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "dbeafe0c0a148fbbd0fda51ff2d049fbe1830b3a", "author": {"user": {"login": "MrMorie", "name": "Salvador"}}, "url": "https://github.com/CMSgov/dpc-app/commit/dbeafe0c0a148fbbd0fda51ff2d049fbe1830b3a", "committedDate": "2020-08-24T04:18:50Z", "message": "+Persisted MBI as uppercase. +Convert MBI to upperpace before hashing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79c9a06c54b896958ac3168bf3d47a5cc9317957", "author": {"user": {"login": "MrMorie", "name": "Salvador"}}, "url": "https://github.com/CMSgov/dpc-app/commit/79c9a06c54b896958ac3168bf3d47a5cc9317957", "committedDate": "2020-08-24T19:56:29Z", "message": "Used PrePersist and PreUpdate hooks to uppercase MBI."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ded2e1da0efff710353d7eed11f06540c4af30a6", "author": {"user": {"login": "MrMorie", "name": "Salvador"}}, "url": "https://github.com/CMSgov/dpc-app/commit/ded2e1da0efff710353d7eed11f06540c4af30a6", "committedDate": "2020-08-24T19:59:32Z", "message": "Removed unused imports in PatientEntity.java. Formating fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczODMxOTQw", "url": "https://github.com/CMSgov/dpc-app/pull/997#pullrequestreview-473831940", "createdAt": "2020-08-24T20:28:06Z", "commit": {"oid": "ded2e1da0efff710353d7eed11f06540c4af30a6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQyMDoyODowNlrOHF1Esw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQyMDoyODowNlrOHF1Esw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTg3NDQ4Mw==", "bodyText": "Can you assert the uppercase in either the smoke test or e2e test to make sure we aren't running into any weird dropwizard transaction problems?", "url": "https://github.com/CMSgov/dpc-app/pull/997#discussion_r475874483", "createdAt": "2020-08-24T20:28:06Z", "author": {"login": "MrBilnon"}, "path": "dpc-common/src/main/java/gov/cms/dpc/common/entities/PatientEntity.java", "diffHunk": "@@ -118,6 +115,14 @@ public PatientEntity update(PatientEntity updated) {\n         return this;\n     }\n \n+    @PrePersist\n+    @PreUpdate\n+    public void upperCaseBeneficiaryId() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ded2e1da0efff710353d7eed11f06540c4af30a6"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ca59d2b34cfbce1a885f2b3287b9c0002fd78d2", "author": {"user": {"login": "MrMorie", "name": "Salvador"}}, "url": "https://github.com/CMSgov/dpc-app/commit/6ca59d2b34cfbce1a885f2b3287b9c0002fd78d2", "committedDate": "2020-08-24T21:04:18Z", "message": "Fixed null pointer issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f66aab31d0b10725a414ac526dc2a7196589623", "author": {"user": {"login": "MrMorie", "name": "Salvador"}}, "url": "https://github.com/CMSgov/dpc-app/commit/2f66aab31d0b10725a414ac526dc2a7196589623", "committedDate": "2020-08-24T22:52:00Z", "message": "Added uppercase MBI test to e2e tests."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczOTczNzI1", "url": "https://github.com/CMSgov/dpc-app/pull/997#pullrequestreview-473973725", "createdAt": "2020-08-24T22:58:29Z", "commit": {"oid": "2f66aab31d0b10725a414ac526dc2a7196589623"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e0d96daf05c927c18e14c3196e3f990f7cd65fd3", "author": {"user": {"login": "MrMorie", "name": "Salvador"}}, "url": "https://github.com/CMSgov/dpc-app/commit/e0d96daf05c927c18e14c3196e3f990f7cd65fd3", "committedDate": "2020-08-25T05:30:08Z", "message": "Merge branch 'master' into sg/DPC-640-save-mbi-as-uppercase"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 372, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}