{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA3MzE4MTY3", "number": 763, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxNToxMTo0OVrOD0z6BQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNjoxNzo0MVrOD9dvXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2NzAyOTgxOnYy", "diffSide": "RIGHT", "path": "dpc-common/src/main/java/gov/cms/dpc/common/hibernate/validator/OrganizationIdValidator.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxNToxMTo0OVrOGJ7xnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxNToyNjoxMVrOGJ8f7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzA2OTcyNQ==", "bodyText": "Is there a reasonable length validation (min < identifier.length() < max) for this?", "url": "https://github.com/CMSgov/dpc-app/pull/763#discussion_r413069725", "createdAt": "2020-04-22T15:11:49Z", "author": {"login": "dhgreene"}, "path": "dpc-common/src/main/java/gov/cms/dpc/common/hibernate/validator/OrganizationIdValidator.java", "diffHunk": "@@ -0,0 +1,32 @@\n+package gov.cms.dpc.common.hibernate.validator;\n+\n+import gov.cms.dpc.common.annotations.OrganizationId;\n+import org.apache.commons.lang3.StringUtils;\n+import org.apache.commons.validator.routines.checkdigit.LuhnCheckDigit;\n+\n+import javax.validation.ConstraintValidator;\n+import javax.validation.ConstraintValidatorContext;\n+\n+public class OrganizationIdValidator implements ConstraintValidator<OrganizationId, String> {\n+\n+    public static final String VALIDATION_MESSAGE = \"Invalid Organization ID format\";\n+    private static final String CARD_ISSUER_IDENTIFIER = \"80840\";\n+\n+    @Override\n+    public void initialize(OrganizationId organizationId) {\n+        //not used\n+    }\n+\n+    @Override\n+    public boolean isValid(String s, ConstraintValidatorContext constraintValidatorContext) {\n+        if (!allDigits(s)) {\n+            return false;\n+        }\n+        String identifier = CARD_ISSUER_IDENTIFIER + s;\n+        return LuhnCheckDigit.LUHN_CHECK_DIGIT.isValid(identifier);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4328a645c33572a0a1c23bd645cd62f1cb21356b"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzA4MTU4MA==", "bodyText": "yep @dhgreene, here:\nhttps://github.com/CMSgov/dpc-app/blob/DPC-1282-organization-id-validation/dpc-common/src/main/java/gov/cms/dpc/common/annotations/OrganizationId.java#L17", "url": "https://github.com/CMSgov/dpc-app/pull/763#discussion_r413081580", "createdAt": "2020-04-22T15:26:11Z", "author": {"login": "MrBilnon"}, "path": "dpc-common/src/main/java/gov/cms/dpc/common/hibernate/validator/OrganizationIdValidator.java", "diffHunk": "@@ -0,0 +1,32 @@\n+package gov.cms.dpc.common.hibernate.validator;\n+\n+import gov.cms.dpc.common.annotations.OrganizationId;\n+import org.apache.commons.lang3.StringUtils;\n+import org.apache.commons.validator.routines.checkdigit.LuhnCheckDigit;\n+\n+import javax.validation.ConstraintValidator;\n+import javax.validation.ConstraintValidatorContext;\n+\n+public class OrganizationIdValidator implements ConstraintValidator<OrganizationId, String> {\n+\n+    public static final String VALIDATION_MESSAGE = \"Invalid Organization ID format\";\n+    private static final String CARD_ISSUER_IDENTIFIER = \"80840\";\n+\n+    @Override\n+    public void initialize(OrganizationId organizationId) {\n+        //not used\n+    }\n+\n+    @Override\n+    public boolean isValid(String s, ConstraintValidatorContext constraintValidatorContext) {\n+        if (!allDigits(s)) {\n+            return false;\n+        }\n+        String identifier = CARD_ISSUER_IDENTIFIER + s;\n+        return LuhnCheckDigit.LUHN_CHECK_DIGIT.isValid(identifier);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzA2OTcyNQ=="}, "originalCommit": {"oid": "4328a645c33572a0a1c23bd645cd62f1cb21356b"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2OTA2MDI3OnYy", "diffSide": "RIGHT", "path": "dpc-common/src/main/java/gov/cms/dpc/fhir/helpers/FHIRHelpers.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQyMjo0MzoyNVrOGKO23g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQyMjo0MzoyNVrOGKO23g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzM4MjM2Ng==", "bodyText": "Method registerOrganization has 5 arguments (exceeds 4 allowed). Consider refactoring.", "url": "https://github.com/CMSgov/dpc-app/pull/763#discussion_r413382366", "createdAt": "2020-04-22T22:43:25Z", "author": {"login": "codeclimate"}, "path": "dpc-common/src/main/java/gov/cms/dpc/fhir/helpers/FHIRHelpers.java", "diffHunk": "@@ -41,7 +41,7 @@\n      * @return - {@link String} Access token generated for the {@link Organization}\n      * @throws IOException - Throws if HTTP client fails\n      */\n-    public static String registerOrganization(IGenericClient client, IParser parser, String organizationID, String adminURL) throws IOException {\n+    public static String registerOrganization(IGenericClient client, IParser parser, String organizationID, String organizationNPI, String adminURL) throws IOException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8c979c4f3ec67a1238b9429a5955430e1c8dd7b3"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4ODkzODQ3OnYy", "diffSide": "RIGHT", "path": "dpc-common/src/main/java/gov/cms/dpc/common/annotations/NPI.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMToxNTozMFrOGM4BjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMToxNTozMFrOGM4BjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE1Mzk5Nw==", "bodyText": "Similar blocks of code found in 2 locations. Consider refactoring.", "url": "https://github.com/CMSgov/dpc-app/pull/763#discussion_r416153997", "createdAt": "2020-04-27T21:15:30Z", "author": {"login": "codeclimate"}, "path": "dpc-common/src/main/java/gov/cms/dpc/common/annotations/NPI.java", "diffHunk": "@@ -0,0 +1,25 @@\n+package gov.cms.dpc.common.annotations;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e91f7b25d308cb97d8c72c30b163d277827f670b"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU4ODkzODUxOnYy", "diffSide": "RIGHT", "path": "dpc-common/src/main/java/gov/cms/dpc/common/annotations/OrganizationId.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMToxNTozMFrOGM4BkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QyMToxNTozMFrOGM4BkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjE1NDAwMQ==", "bodyText": "Similar blocks of code found in 2 locations. Consider refactoring.", "url": "https://github.com/CMSgov/dpc-app/pull/763#discussion_r416154001", "createdAt": "2020-04-27T21:15:30Z", "author": {"login": "codeclimate"}, "path": "dpc-common/src/main/java/gov/cms/dpc/common/annotations/OrganizationId.java", "diffHunk": "@@ -0,0 +1,25 @@\n+package gov.cms.dpc.common.annotations;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e91f7b25d308cb97d8c72c30b163d277827f670b"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1Nzc2OTg5OnYy", "diffSide": "RIGHT", "path": "dpc-common/src/main/java/gov/cms/dpc/common/annotations/NPI.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNjoxNzo0MVrOGW-aiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNjoxNzo0MVrOGW-aiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc0NDQ1OQ==", "bodyText": "Similar blocks of code found in 3 locations. Consider refactoring.", "url": "https://github.com/CMSgov/dpc-app/pull/763#discussion_r426744459", "createdAt": "2020-05-18T16:17:41Z", "author": {"login": "codeclimate"}, "path": "dpc-common/src/main/java/gov/cms/dpc/common/annotations/NPI.java", "diffHunk": "@@ -0,0 +1,25 @@\n+package gov.cms.dpc.common.annotations;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "546ef56bb16f120f539ef8b928e7b5b5fd48b53c"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY1Nzc2OTkxOnYy", "diffSide": "RIGHT", "path": "dpc-common/src/main/java/gov/cms/dpc/common/annotations/OrganizationId.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNjoxNzo0MVrOGW-ajQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxNjoxNzo0MVrOGW-ajQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc0NDQ2MQ==", "bodyText": "Similar blocks of code found in 3 locations. Consider refactoring.", "url": "https://github.com/CMSgov/dpc-app/pull/763#discussion_r426744461", "createdAt": "2020-05-18T16:17:41Z", "author": {"login": "codeclimate"}, "path": "dpc-common/src/main/java/gov/cms/dpc/common/annotations/OrganizationId.java", "diffHunk": "@@ -0,0 +1,25 @@\n+package gov.cms.dpc.common.annotations;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "546ef56bb16f120f539ef8b928e7b5b5fd48b53c"}, "originalPosition": 1}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4867, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}