{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU4NDc0MTM4", "number": 933, "title": "DPC-392: Break apart integration and unit tests", "bodyText": "Fixes DPC-392\nJUnit tests in DPC include a mix of unit and integration tests. To provide the option of running them separately, we need to distinguish them in some way.\nProposed Changes\n\nAnnotate test classes with @IntegrationTest if they rely on any other service\nCreate Maven unit-tests profile to exclude classes from the Integration group\n\nThere is an existing integration-tests profile that includes only the Integration group\n\n\nCreate dpc-unit-test.sh script to run tests from the Maven unit-tests profile\nAdd a handful of new unit tests in dpc-api as a starting point\n\nChange Details\nIn an attempt to change as little existing code as possible, new unit tests for API resources have been placed in classes called *ResourceUnitTest. In some cases, however, the original test classes (e.g., DataResourceTest) may already contain only unit tests. Look for an @IntegrationTest annotation to be sure.\nNote that Code Climate reports a decrease in coverage, even though this PR adds unit tests. This is due to more tests being identified as integration tests when they were previously treated as unit tests in terms of coverage. Unit test development will continue in follow-up tasks.\nSecurity Implications\nNo security implications. Changes apply only to tests.\n\n\n new software dependencies\n\n\n security controls or supporting software altered\n\n\n new data stored or transmitted\n\n\n security checklist is completed for this change\n\n\n requires more information or team discussion to evaluate security implications\n\n\n no PHI/PII is affected by this change\n\n\nAcceptance Validation\n./dpc-unit-test.sh will run only the unit tests.\nFeedback Requested\nAny", "createdAt": "2020-07-29T14:23:36Z", "url": "https://github.com/CMSgov/dpc-app/pull/933", "merged": true, "mergeCommit": {"oid": "b2dfca52937355b1df9068b12b5255fe57069cc3"}, "closed": true, "closedAt": "2020-08-06T15:43:23Z", "author": {"login": "em1"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5r9lagH2gAyNDU4NDc0MTM4OjZkNDY2MTM5MzliMjIyODQyN2Q2MGUyYzNhZDBiYjZlYmI5Zjk3N2U=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8QssNAFqTQ2MjU3NDI1Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6d46613939b2228427d60e2c3ad0bb6ebb9f977e", "author": {"user": {"login": "em1", "name": null}}, "url": "https://github.com/CMSgov/dpc-app/commit/6d46613939b2228427d60e2c3ad0bb6ebb9f977e", "committedDate": "2020-07-29T14:32:57Z", "message": "Annotate tests relying on db with @IntegrationTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86cf72e8a13df53d75a92121e683682b7e717258", "author": {"user": {"login": "em1", "name": null}}, "url": "https://github.com/CMSgov/dpc-app/commit/86cf72e8a13df53d75a92121e683682b7e717258", "committedDate": "2020-07-29T14:33:02Z", "message": "Script for running only unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bafe3c33cdc6dfab3618d999cd63b1a231e85530", "author": {"user": {"login": "em1", "name": null}}, "url": "https://github.com/CMSgov/dpc-app/commit/bafe3c33cdc6dfab3618d999cd63b1a231e85530", "committedDate": "2020-07-29T14:33:02Z", "message": "Simple unit tests for API Patient GET and POST"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee8e889b1c9dd8ec2d8695e711d40426f8a5e785", "author": {"user": {"login": "em1", "name": null}}, "url": "https://github.com/CMSgov/dpc-app/commit/ee8e889b1c9dd8ec2d8695e711d40426f8a5e785", "committedDate": "2020-07-29T14:33:03Z", "message": "Unit tests in progress"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6487c6f78faf4f7fd2f6e36220c7669d3660040", "author": {"user": {"login": "em1", "name": null}}, "url": "https://github.com/CMSgov/dpc-app/commit/b6487c6f78faf4f7fd2f6e36220c7669d3660040", "committedDate": "2020-07-29T14:33:03Z", "message": "Key resource unit test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "b6487c6f78faf4f7fd2f6e36220c7669d3660040", "author": {"user": {"login": "em1", "name": null}}, "url": "https://github.com/CMSgov/dpc-app/commit/b6487c6f78faf4f7fd2f6e36220c7669d3660040", "committedDate": "2020-07-29T14:33:03Z", "message": "Key resource unit test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b899830fba71943f9f706d08b524a11ce1844619", "author": {"user": {"login": "em1", "name": null}}, "url": "https://github.com/CMSgov/dpc-app/commit/b899830fba71943f9f706d08b524a11ce1844619", "committedDate": "2020-07-30T12:42:04Z", "message": "Merge branch 'master' into emily/dpc-392-unit-int-test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94b7f94e09f6583b237ab286497d8ee8f1fda842", "author": {"user": {"login": "em1", "name": null}}, "url": "https://github.com/CMSgov/dpc-app/commit/94b7f94e09f6583b237ab286497d8ee8f1fda842", "committedDate": "2020-08-05T19:47:09Z", "message": "Merge branch 'master' into emily/dpc-392-unit-int-test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5f7fd2293aa01773cdfee33edc10b1cc19e5c56", "author": {"user": {"login": "em1", "name": null}}, "url": "https://github.com/CMSgov/dpc-app/commit/a5f7fd2293aa01773cdfee33edc10b1cc19e5c56", "committedDate": "2020-08-06T13:53:30Z", "message": "Merge branch 'master' into emily/dpc-392-unit-int-test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNTUwOTQw", "url": "https://github.com/CMSgov/dpc-app/pull/933#pullrequestreview-462550940", "createdAt": "2020-08-06T14:04:13Z", "commit": {"oid": "a5f7fd2293aa01773cdfee33edc10b1cc19e5c56"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNDowNDoxM1rOG81CAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNDowNDoxM1rOG81CAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjQzNjYxMA==", "bodyText": "Shouldn\u2019t this script be called in the make file somewhere?", "url": "https://github.com/CMSgov/dpc-app/pull/933#discussion_r466436610", "createdAt": "2020-08-06T14:04:13Z", "author": {"login": "MrBilnon"}, "path": "dpc-unit-test.sh", "diffHunk": "@@ -0,0 +1,32 @@\n+#!/bin/bash", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5f7fd2293aa01773cdfee33edc10b1cc19e5c56"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNTY0MjIw", "url": "https://github.com/CMSgov/dpc-app/pull/933#pullrequestreview-462564220", "createdAt": "2020-08-06T14:18:42Z", "commit": {"oid": "a5f7fd2293aa01773cdfee33edc10b1cc19e5c56"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNTc0MjU3", "url": "https://github.com/CMSgov/dpc-app/pull/933#pullrequestreview-462574257", "createdAt": "2020-08-06T14:28:50Z", "commit": {"oid": "a5f7fd2293aa01773cdfee33edc10b1cc19e5c56"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 441, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}