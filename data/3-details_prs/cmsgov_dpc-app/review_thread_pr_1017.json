{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc2NTE0NDEy", "number": 1017, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQyMDo0NzozNlrOEed6Fg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQyMDo0NzozNlrOEed6Fg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAwMzgyNzQyOnYy", "diffSide": "RIGHT", "path": "dpc-common/src/main/java/gov/cms/dpc/common/hibernate/validator/NoHtmlValidator.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQyMDo0NzozNlrOHKIr1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMVQwMzozNDowNVrOHKcEig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDM5MDEwMA==", "bodyText": "Would it make more sense to replace with \" and \"?\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    String s1 = s.replaceAll(\"(\\\\s&\\\\s)\", \"   \");\n          \n          \n            \n                    String s1 = s.replaceAll(\"(\\\\s&\\\\s)\", \" and \");", "url": "https://github.com/CMSgov/dpc-app/pull/1017#discussion_r480390100", "createdAt": "2020-08-31T20:47:36Z", "author": {"login": "dhgreene"}, "path": "dpc-common/src/main/java/gov/cms/dpc/common/hibernate/validator/NoHtmlValidator.java", "diffHunk": "@@ -23,7 +23,9 @@ public boolean isValid(String s, ConstraintValidatorContext constraintValidatorC\n         if (StringUtils.isBlank(s)) {\n             return true;\n         }\n-        String safe = Jsoup.clean(s, \"\", Whitelist.none(), new Document.OutputSettings().prettyPrint(false));\n-        return safe.equals(s);\n+        // Ignore `&` in names and addresses\n+        String s1 = s.replaceAll(\"(\\\\s&\\\\s)\", \"   \");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa7c5b4abe9c180ee62c09fe2cd9f5c9c5d3c5ff"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDM5MjQxOA==", "bodyText": "Would it make more sense to replace with \" and \"?\n\nI considered this but thought it might be best to maintain the same character length. No one is actually going to see the modified string since the validator just returns a boolean, so I don't think the replacement matters much. I did go back and forth on it for a bit, though. I'm open to changing it.", "url": "https://github.com/CMSgov/dpc-app/pull/1017#discussion_r480392418", "createdAt": "2020-08-31T20:52:33Z", "author": {"login": "jonfulk"}, "path": "dpc-common/src/main/java/gov/cms/dpc/common/hibernate/validator/NoHtmlValidator.java", "diffHunk": "@@ -23,7 +23,9 @@ public boolean isValid(String s, ConstraintValidatorContext constraintValidatorC\n         if (StringUtils.isBlank(s)) {\n             return true;\n         }\n-        String safe = Jsoup.clean(s, \"\", Whitelist.none(), new Document.OutputSettings().prettyPrint(false));\n-        return safe.equals(s);\n+        // Ignore `&` in names and addresses\n+        String s1 = s.replaceAll(\"(\\\\s&\\\\s)\", \"   \");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDM5MDEwMA=="}, "originalCommit": {"oid": "fa7c5b4abe9c180ee62c09fe2cd9f5c9c5d3c5ff"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDU0OTA3MQ==", "bodyText": "I think you can just change the Whitelist object to whitelist ampersand.", "url": "https://github.com/CMSgov/dpc-app/pull/1017#discussion_r480549071", "createdAt": "2020-09-01T01:25:18Z", "author": {"login": "MrBilnon"}, "path": "dpc-common/src/main/java/gov/cms/dpc/common/hibernate/validator/NoHtmlValidator.java", "diffHunk": "@@ -23,7 +23,9 @@ public boolean isValid(String s, ConstraintValidatorContext constraintValidatorC\n         if (StringUtils.isBlank(s)) {\n             return true;\n         }\n-        String safe = Jsoup.clean(s, \"\", Whitelist.none(), new Document.OutputSettings().prettyPrint(false));\n-        return safe.equals(s);\n+        // Ignore `&` in names and addresses\n+        String s1 = s.replaceAll(\"(\\\\s&\\\\s)\", \"   \");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDM5MDEwMA=="}, "originalCommit": {"oid": "fa7c5b4abe9c180ee62c09fe2cd9f5c9c5d3c5ff"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDU3Mzk4NQ==", "bodyText": "@whuang85 i tried that, as i mentioned in the description, but the Whitelist object seems to be made for whitelisting HTML tags and not random strings or regular expressions. I would prefer to use the whitelist object if you can help me figure out how to do that.", "url": "https://github.com/CMSgov/dpc-app/pull/1017#discussion_r480573985", "createdAt": "2020-09-01T01:48:33Z", "author": {"login": "jonfulk"}, "path": "dpc-common/src/main/java/gov/cms/dpc/common/hibernate/validator/NoHtmlValidator.java", "diffHunk": "@@ -23,7 +23,9 @@ public boolean isValid(String s, ConstraintValidatorContext constraintValidatorC\n         if (StringUtils.isBlank(s)) {\n             return true;\n         }\n-        String safe = Jsoup.clean(s, \"\", Whitelist.none(), new Document.OutputSettings().prettyPrint(false));\n-        return safe.equals(s);\n+        // Ignore `&` in names and addresses\n+        String s1 = s.replaceAll(\"(\\\\s&\\\\s)\", \"   \");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDM5MDEwMA=="}, "originalCommit": {"oid": "fa7c5b4abe9c180ee62c09fe2cd9f5c9c5d3c5ff"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDcwNzcyMg==", "bodyText": "@jonfulk oops, didn't read the description and yea it looks like it's not possible", "url": "https://github.com/CMSgov/dpc-app/pull/1017#discussion_r480707722", "createdAt": "2020-09-01T03:34:05Z", "author": {"login": "MrBilnon"}, "path": "dpc-common/src/main/java/gov/cms/dpc/common/hibernate/validator/NoHtmlValidator.java", "diffHunk": "@@ -23,7 +23,9 @@ public boolean isValid(String s, ConstraintValidatorContext constraintValidatorC\n         if (StringUtils.isBlank(s)) {\n             return true;\n         }\n-        String safe = Jsoup.clean(s, \"\", Whitelist.none(), new Document.OutputSettings().prettyPrint(false));\n-        return safe.equals(s);\n+        // Ignore `&` in names and addresses\n+        String s1 = s.replaceAll(\"(\\\\s&\\\\s)\", \"   \");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDM5MDEwMA=="}, "originalCommit": {"oid": "fa7c5b4abe9c180ee62c09fe2cd9f5c9c5d3c5ff"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 74, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}