{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzMjc5NTg2", "number": 1135, "title": "DPC-815 Feature: Add smoke test to Github Actions workflow", "bodyText": "Fixes DPC-815\nRun smoke test in Github Actions workflow.\nProposed Changes\nUse make smoke to launch smoke tests\nSecurity Implications\n\n new software dependencies\n security controls or supporting software altered\n new data stored or transmitted\n security checklist is completed for this change\n requires more information or team discussion to evaluate security implications\n no PHI/PII is affected by this change\n\nAcceptance Validation\nUnfortunately, you can only verify this with a PR so check the GH action below\nhttps://github.com/CMSgov/dpc-app/pull/1135/checks?check_run_id=1508340485\n [INFO] Replacing /home/runner/work/dpc-app/dpc-app/dpc-smoketest/target/dpc-smoketest.jar with /home/runner/work/dpc-app/dpc-app/dpc-smoketest/target/dpc-smoketest-0.4.0-SNAPSHOT-shaded.jar\n[INFO] Attaching shaded artifact.\n[INFO] ------------------------------------------------------------------------\n[INFO] Reactor Summary for DPC Application 0.4.0-SNAPSHOT:\n[INFO] \n[INFO] DPC Application .................................... SUCCESS [ 45.954 s]\n[INFO] Common DPC testing code ............................ SUCCESS [ 22.426 s]\n[INFO] DPC Common Libraries ............................... SUCCESS [ 18.093 s]\n[INFO] DPC SmokeTests ..................................... SUCCESS [ 22.878 s]\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  01:56 min\n[INFO] Finished at: 2020-12-06T22:41:13Z\n[INFO] ------------------------------------------------------------------------\n\nFeedback Requested", "createdAt": "2020-12-06T22:35:30Z", "url": "https://github.com/CMSgov/dpc-app/pull/1135", "merged": true, "mergeCommit": {"oid": "2e91bde4d410d6c89b81c2c9ae9e2323ba749196"}, "closed": true, "closedAt": "2020-12-08T15:37:29Z", "author": {"login": "jeffcorpuz"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdjoocpAH2gAyNTMzMjc5NTg2OmY3ZGFkODgyNWU3NmIzZjQxNzM1M2E3MjQ3OTQ4N2VhOWE3OTAwODU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkL9yOgFqTU0NzM1MjA3MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f7dad8825e76b3f417353a72479487ea9a790085", "author": {"user": {"login": "jeffcorpuz", "name": "Jeff Corpuz"}}, "url": "https://github.com/CMSgov/dpc-app/commit/f7dad8825e76b3f417353a72479487ea9a790085", "committedDate": "2020-12-06T22:24:58Z", "message": "add smoke test to gh workflow\n\nSigned-off-by: Jeff Corpuz <jeffcorpuz@icloud.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0351e9e193ae8e18b8d106ef819b42f7d5694e5c", "author": {"user": {"login": "jeffcorpuz", "name": "Jeff Corpuz"}}, "url": "https://github.com/CMSgov/dpc-app/commit/0351e9e193ae8e18b8d106ef819b42f7d5694e5c", "committedDate": "2020-12-06T22:38:33Z", "message": "separate smoke test to own step\n\nSigned-off-by: Jeff Corpuz <jeffcorpuz@icloud.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1NzgxOTM2", "url": "https://github.com/CMSgov/dpc-app/pull/1135#pullrequestreview-545781936", "createdAt": "2020-12-07T01:43:21Z", "commit": {"oid": "0351e9e193ae8e18b8d106ef819b42f7d5694e5c"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwMTo0MzoyMVrOIAStQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwMTo0NjowNVrOIASv7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzE3NzQwOA==", "bodyText": "What is the difference between make smoke and make smoke/local?", "url": "https://github.com/CMSgov/dpc-app/pull/1135#discussion_r537177408", "createdAt": "2020-12-07T01:43:21Z", "author": {"login": "msnook"}, "path": ".github/workflows/ci-workflow.yml", "diffHunk": "@@ -34,3 +35,22 @@ jobs:\n       - name: \"Website Build\"\n         run: |\n           make ci-web\n+          \n+  smoke-test:\n+    name: \"Run Smoke Test\"\n+    runs-on: ubuntu-latest\n+    steps:\n+      - name: \"Checkout code\"\n+        uses: actions/checkout@v1\n+      - name: \"Set up JDK 11\" \n+        uses: actions/setup-java@v1\n+        with:\n+          java-version: '11.0.2'\n+      - name: \"Set up Python 3.8.1\"\n+        uses: actions/setup-python@v2\n+        with:\n+          python-version: '3.8.1'\n+      - name: \"Smoke Test\"\n+        run: |\n+          make smoke", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0351e9e193ae8e18b8d106ef819b42f7d5694e5c"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzE3ODA5Mw==", "bodyText": "The way this is configured, I think it will run in parallel with build-app and build-web.  Should we run it immediately after make ci-app since the job name is \"Build and Test API\".  I think that will reduce code redundancy (i.e., setting up JDK and Python multiple times) and also ensure that we're running smoke against the actual build.", "url": "https://github.com/CMSgov/dpc-app/pull/1135#discussion_r537178093", "createdAt": "2020-12-07T01:46:05Z", "author": {"login": "msnook"}, "path": ".github/workflows/ci-workflow.yml", "diffHunk": "@@ -34,3 +35,22 @@ jobs:\n       - name: \"Website Build\"\n         run: |\n           make ci-web\n+          \n+  smoke-test:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0351e9e193ae8e18b8d106ef819b42f7d5694e5c"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56e9bdc66f68ac43c2e477aeceb8717e0d34cbc9", "author": {"user": {"login": "jeffcorpuz", "name": "Jeff Corpuz"}}, "url": "https://github.com/CMSgov/dpc-app/commit/56e9bdc66f68ac43c2e477aeceb8717e0d34cbc9", "committedDate": "2020-12-07T03:00:15Z", "message": "run format, make smoke serial run after unit tests\n\nSigned-off-by: Jeff Corpuz <jeffcorpuz@icloud.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ2NTcxMzgy", "url": "https://github.com/CMSgov/dpc-app/pull/1135#pullrequestreview-546571382", "createdAt": "2020-12-07T21:57:32Z", "commit": {"oid": "56e9bdc66f68ac43c2e477aeceb8717e0d34cbc9"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3MzQ4ODU5", "url": "https://github.com/CMSgov/dpc-app/pull/1135#pullrequestreview-547348859", "createdAt": "2020-12-08T15:31:53Z", "commit": {"oid": "56e9bdc66f68ac43c2e477aeceb8717e0d34cbc9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3MzUyMDcx", "url": "https://github.com/CMSgov/dpc-app/pull/1135#pullrequestreview-547352071", "createdAt": "2020-12-08T15:34:58Z", "commit": {"oid": "56e9bdc66f68ac43c2e477aeceb8717e0d34cbc9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 331, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}