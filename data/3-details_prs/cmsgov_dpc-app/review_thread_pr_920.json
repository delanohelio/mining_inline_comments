{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU0Njg4NzMw", "number": 920, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxNjoxODo1N1rOETVCMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNDo1Nzo1NVrOEwS-7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4NzAzMDI3OnYy", "diffSide": "RIGHT", "path": "dpc-api/src/main/java/gov/cms/dpc/api/resources/v1/GroupResource.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxNjoxODo1N1rOG5AG5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQxNjoyMTo0NVrOG5AN0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQyMzc4Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // _outputFormat only supports FHIR_NDJSON, APPLICATION_NDJON, or NDJSON\n          \n          \n            \n                    if (StringUtils.isNotEmpty(outputFormat) && (!FHIR_NDJSON.equals(outputFormat) && !APPLICATION_NDJSON.equals(outputFormat) && !NDJSON.equals(outputFormat) )) {\n          \n          \n            \n                        throw new BadRequestException(\"'_outputFormat' query parameter must be 'application/fhir+ndjson','application/ndjson', or 'ndjson' \");\n          \n          \n            \n                    // _outputFormat only supports FHIR_NDJSON, APPLICATION_NDJSON, or NDJSON\n          \n          \n            \n                    if (StringUtils.isNotEmpty(outputFormat) && (!FHIR_NDJSON.equals(outputFormat) && !APPLICATION_NDJSON.equals(outputFormat) && !NDJSON.equals(outputFormat) )) {\n          \n          \n            \n                        throw new BadRequestException(\"'_outputFormat' query parameter must be 'application/fhir+ndjson', 'application/ndjson', or 'ndjson' \");", "url": "https://github.com/CMSgov/dpc-app/pull/920#discussion_r462423782", "createdAt": "2020-07-29T16:18:57Z", "author": {"login": "em1"}, "path": "dpc-api/src/main/java/gov/cms/dpc/api/resources/v1/GroupResource.java", "diffHunk": "@@ -351,10 +353,10 @@ private OffsetDateTime handleSinceQueryParam(String since) {\n      *\n      * @param outputFormat param to check\n      */\n-    private static void checkExportRequest(String outputFormat, String headerPrefer) {\n-        // _outputFormat only supports FHIR_NDJSON\n-        if (StringUtils.isNotEmpty(outputFormat) && !FHIR_NDJSON.equals(outputFormat)) {\n-            throw new BadRequestException(\"'_outputFormat' query parameter must be 'application/fhir+ndjson'\");\n+    private static void checkExportRequest(String outputFormat String headerPrefer) {\n+        // _outputFormat only supports FHIR_NDJSON, APPLICATION_NDJON, or NDJSON\n+        if (StringUtils.isNotEmpty(outputFormat) && (!FHIR_NDJSON.equals(outputFormat) && !APPLICATION_NDJSON.equals(outputFormat) && !NDJSON.equals(outputFormat) )) {\n+            throw new BadRequestException(\"'_outputFormat' query parameter must be 'application/fhir+ndjson','application/ndjson', or 'ndjson' \");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dbc67fd145cf1c63b34d276f6b4718bd2797f955"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQyNTU1NA==", "bodyText": "is the constant wrong in the declaration", "url": "https://github.com/CMSgov/dpc-app/pull/920#discussion_r462425554", "createdAt": "2020-07-29T16:21:45Z", "author": {"login": "richbraman"}, "path": "dpc-api/src/main/java/gov/cms/dpc/api/resources/v1/GroupResource.java", "diffHunk": "@@ -351,10 +353,10 @@ private OffsetDateTime handleSinceQueryParam(String since) {\n      *\n      * @param outputFormat param to check\n      */\n-    private static void checkExportRequest(String outputFormat, String headerPrefer) {\n-        // _outputFormat only supports FHIR_NDJSON\n-        if (StringUtils.isNotEmpty(outputFormat) && !FHIR_NDJSON.equals(outputFormat)) {\n-            throw new BadRequestException(\"'_outputFormat' query parameter must be 'application/fhir+ndjson'\");\n+    private static void checkExportRequest(String outputFormat String headerPrefer) {\n+        // _outputFormat only supports FHIR_NDJSON, APPLICATION_NDJON, or NDJSON\n+        if (StringUtils.isNotEmpty(outputFormat) && (!FHIR_NDJSON.equals(outputFormat) && !APPLICATION_NDJSON.equals(outputFormat) && !NDJSON.equals(outputFormat) )) {\n+            throw new BadRequestException(\"'_outputFormat' query parameter must be 'application/fhir+ndjson','application/ndjson', or 'ndjson' \");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQyMzc4Mg=="}, "originalCommit": {"oid": "dbc67fd145cf1c63b34d276f6b4718bd2797f955"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE5MDc4MTI0OnYy", "diffSide": "RIGHT", "path": "dpc-api/src/main/java/gov/cms/dpc/api/resources/v1/GroupResource.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNDo1Nzo1NVrOHlw9pA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNToyNzo1NlrOHlybzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTM2MTU3Mg==", "bodyText": "Should they be case insensitive?", "url": "https://github.com/CMSgov/dpc-app/pull/920#discussion_r509361572", "createdAt": "2020-10-21T14:57:55Z", "author": {"login": "MrMorie"}, "path": "dpc-api/src/main/java/gov/cms/dpc/api/resources/v1/GroupResource.java", "diffHunk": "@@ -369,8 +368,8 @@ private static void checkExportRequest(String outputFormat, List<Pair<String, St\n \n     private static void checkOutputFormat(String outputFormat) {\n         // _outputFormat only supports FHIR_NDJSON\n-        if (StringUtils.isNotEmpty(outputFormat) && !FHIR_NDJSON.equals(outputFormat)) {\n-            throw new BadRequestException(\"'_outputFormat' query parameter must be 'application/fhir+ndjson'\");\n+        if (!StringUtils.equalsAny(outputFormat, FHIR_NDJSON, APPLICATION_NDJSON, NDJSON)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5721302cf46db1c21b13cb51cc2529419e1c2444"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTM4NTY3Nw==", "bodyText": "good point... i think they should. Same is true for the checkRequestHeaders method I merged in yesterday.", "url": "https://github.com/CMSgov/dpc-app/pull/920#discussion_r509385677", "createdAt": "2020-10-21T15:27:56Z", "author": {"login": "jonfulk"}, "path": "dpc-api/src/main/java/gov/cms/dpc/api/resources/v1/GroupResource.java", "diffHunk": "@@ -369,8 +368,8 @@ private static void checkExportRequest(String outputFormat, List<Pair<String, St\n \n     private static void checkOutputFormat(String outputFormat) {\n         // _outputFormat only supports FHIR_NDJSON\n-        if (StringUtils.isNotEmpty(outputFormat) && !FHIR_NDJSON.equals(outputFormat)) {\n-            throw new BadRequestException(\"'_outputFormat' query parameter must be 'application/fhir+ndjson'\");\n+        if (!StringUtils.equalsAny(outputFormat, FHIR_NDJSON, APPLICATION_NDJSON, NDJSON)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTM2MTU3Mg=="}, "originalCommit": {"oid": "5721302cf46db1c21b13cb51cc2529419e1c2444"}, "originalPosition": 27}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 114, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}