{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUxMTQ1OTE3", "number": 914, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxNDowMjo1MFrOEPjClQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxNDowMjo1MFrOEPjCog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0NzM4MTk3OnYy", "diffSide": "RIGHT", "path": "dpc-web/app/models/organization.rb", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxNDowMjo1MFrOGzUQhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxNDowMjo1MFrOGzUQhQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjQ2MjQ2OQ==", "bodyText": "Line is too long. [131/120]", "url": "https://github.com/CMSgov/dpc-app/pull/914#discussion_r456462469", "createdAt": "2020-07-17T14:02:50Z", "author": {"login": "codeclimate"}, "path": "dpc-web/app/models/organization.rb", "diffHunk": "@@ -25,9 +25,9 @@ class Organization < ApplicationRecord\n \n   scope :provider, -> { where.not(organization_type: ORGANIZATION_TYPES['health_it_vendor']) }\n \n-  scope :is_registered, -> { where('id IN(SELECT DISTINCT(organization_id) FROM registered_organizations)') }\n+  scope :is_registered, -> { where('id IN(SELECT DISTINCT(organization_id) FROM registered_organizations WHERE enabled IS true)') }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8eb4aca492eab378ab626fb2b9777f8d9c10fd9"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0NzM4MjAwOnYy", "diffSide": "RIGHT", "path": "dpc-web/app/models/organization.rb", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxNDowMjo1MFrOGzUQiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxNDowMjo1MFrOGzUQiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjQ2MjQ3Mw==", "bodyText": "Line is too long. [139/120]", "url": "https://github.com/CMSgov/dpc-app/pull/914#discussion_r456462473", "createdAt": "2020-07-17T14:02:50Z", "author": {"login": "codeclimate"}, "path": "dpc-web/app/models/organization.rb", "diffHunk": "@@ -25,9 +25,9 @@ class Organization < ApplicationRecord\n \n   scope :provider, -> { where.not(organization_type: ORGANIZATION_TYPES['health_it_vendor']) }\n \n-  scope :is_registered, -> { where('id IN(SELECT DISTINCT(organization_id) FROM registered_organizations)') }\n+  scope :is_registered, -> { where('id IN(SELECT DISTINCT(organization_id) FROM registered_organizations WHERE enabled IS true)') }\n \n-  scope :is_not_registered, -> { where('id NOT IN(SELECT DISTINCT(organization_id) FROM registered_organizations)') }\n+  scope :is_not_registered, -> { where('id IN(SELECT DISTINCT(organization_id) FROM registered_organizations WHERE enabled IS NOT true)') }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8eb4aca492eab378ab626fb2b9777f8d9c10fd9"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0NzM4MjA0OnYy", "diffSide": "RIGHT", "path": "dpc-web/app/controllers/internal/registered_organizations_controller.rb", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxNDowMjo1MFrOGzUQjw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxNDowMjo1MFrOGzUQjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjQ2MjQ3OQ==", "bodyText": "Inconsistent indentation detected.", "url": "https://github.com/CMSgov/dpc-app/pull/914#discussion_r456462479", "createdAt": "2020-07-17T14:02:50Z", "author": {"login": "codeclimate"}, "path": "dpc-web/app/controllers/internal/registered_organizations_controller.rb", "diffHunk": "@@ -60,6 +61,25 @@ def destroy\n       redirect_to internal_organization_path(@organization)\n     end\n \n+    def enable_or_disable\n+      @organization = Organization.find(org_id_param)\n+      @reg_org = @organization.registered_organization\n+\n+      if @reg_org.enabled == true\n+        @reg_org.enabled = false\n+        @reg_org.save\n+\n+        flash[:notice] = 'API access disabled.'\n+        redirect_to internal_organization_path(@organization)\n+      else @reg_org.enabled == false\n+        @reg_org.enabled = true", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8eb4aca492eab378ab626fb2b9777f8d9c10fd9"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0NzM4MjA2OnYy", "diffSide": "RIGHT", "path": "dpc-web/app/controllers/internal/registered_organizations_controller.rb", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxNDowMjo1MFrOGzUQkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxNDowMjo1MFrOGzUQkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjQ2MjQ4Mg==", "bodyText": "Inconsistent indentation detected.", "url": "https://github.com/CMSgov/dpc-app/pull/914#discussion_r456462482", "createdAt": "2020-07-17T14:02:50Z", "author": {"login": "codeclimate"}, "path": "dpc-web/app/controllers/internal/registered_organizations_controller.rb", "diffHunk": "@@ -60,6 +61,25 @@ def destroy\n       redirect_to internal_organization_path(@organization)\n     end\n \n+    def enable_or_disable\n+      @organization = Organization.find(org_id_param)\n+      @reg_org = @organization.registered_organization\n+\n+      if @reg_org.enabled == true\n+        @reg_org.enabled = false\n+        @reg_org.save\n+\n+        flash[:notice] = 'API access disabled.'\n+        redirect_to internal_organization_path(@organization)\n+      else @reg_org.enabled == false\n+        @reg_org.enabled = true\n+        @reg_org.save", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8eb4aca492eab378ab626fb2b9777f8d9c10fd9"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg0NzM4MjEwOnYy", "diffSide": "RIGHT", "path": "dpc-web/app/controllers/internal/registered_organizations_controller.rb", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxNDowMjo1MFrOGzUQlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxNDowMjo1MFrOGzUQlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjQ2MjQ4Nw==", "bodyText": "Inconsistent indentation detected.", "url": "https://github.com/CMSgov/dpc-app/pull/914#discussion_r456462487", "createdAt": "2020-07-17T14:02:50Z", "author": {"login": "codeclimate"}, "path": "dpc-web/app/controllers/internal/registered_organizations_controller.rb", "diffHunk": "@@ -60,6 +61,25 @@ def destroy\n       redirect_to internal_organization_path(@organization)\n     end\n \n+    def enable_or_disable\n+      @organization = Organization.find(org_id_param)\n+      @reg_org = @organization.registered_organization\n+\n+      if @reg_org.enabled == true\n+        @reg_org.enabled = false\n+        @reg_org.save\n+\n+        flash[:notice] = 'API access disabled.'\n+        redirect_to internal_organization_path(@organization)\n+      else @reg_org.enabled == false\n+        @reg_org.enabled = true\n+        @reg_org.save\n+\n+        flash[:notice] = 'API access enabled.'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8eb4aca492eab378ab626fb2b9777f8d9c10fd9"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 110, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}