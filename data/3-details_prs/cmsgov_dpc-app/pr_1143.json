{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQwOTI0NDY5", "number": 1143, "title": "DPC-859 creating resource templates for the tests", "bodyText": "Fixes DPC-859\nSome of the resource tests can only be ran a set number of times because they are based on a set number of example resources.  This PR will turn those example resources into templates so the resource tests can run any number of times.\nProposed Changes\n\nCreate method to generate a sample resource from a template with the ability to replace placeholders in the template\nRefactor the bodies/body of the targeter\n\nChange Details\nSee above\nSecurity Implications\n\n\n new software dependencies\n\n\n\n security controls or supporting software altered\n\n\n\n new data stored or transmitted\n\n\n\n security checklist is completed for this change\n\n\n\n requires more information or team discussion to evaluate security implications\n\n\n\n no PHI/PII is affected by this change\n\n\nAcceptance Validation\n\n\nFeedback Requested", "createdAt": "2020-12-16T06:24:52Z", "url": "https://github.com/CMSgov/dpc-app/pull/1143", "merged": true, "mergeCommit": {"oid": "19a8b0fa6b42cbfe886f6276c197d5638f9ed56b"}, "closed": true, "closedAt": "2021-01-08T18:19:07Z", "author": {"login": "MrBilnon"}, "timelineItems": {"totalCount": 46, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdmo39cgH2gAyNTQwOTI0NDY5OjZiYzBmMDk4NDZhYThlMDVjMTFiODNhZjUxN2FiMWEwMTQ4MGFhMWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABduM4ckAFqTU2NDQ4MDIwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6bc0f09846aa8e05c11b83af517ab1a01480aa1f", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/6bc0f09846aa8e05c11b83af517ab1a01480aa1f", "committedDate": "2020-12-16T06:23:41Z", "message": "creating resource templates for the tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8afa75dc9b5b309bf72e71b368ae024ff3578c4", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/a8afa75dc9b5b309bf72e71b368ae024ff3578c4", "committedDate": "2020-12-16T07:29:19Z", "message": "generate mbi for patient tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f41a0f332db1c8f8298b408bd1e53e1553ed6ccf", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/f41a0f332db1c8f8298b408bd1e53e1553ed6ccf", "committedDate": "2020-12-16T16:00:56Z", "message": "Merge branch 'master' into DPC-859-resource-templates-for-performance-tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "08f53607868f92462e757444c7a2de16ffee7095", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/08f53607868f92462e757444c7a2de16ffee7095", "committedDate": "2020-12-16T16:02:08Z", "message": "remove old test files, replaced by templates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e90dee56630e1eb012d434a546454aecfaf0e23", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/4e90dee56630e1eb012d434a546454aecfaf0e23", "committedDate": "2020-12-16T16:03:11Z", "message": "revert changes to unmarshallId, create new fn instead"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b327057bca36bd20681cda4171431e17f54996b", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/5b327057bca36bd20681cda4171431e17f54996b", "committedDate": "2020-12-16T16:03:17Z", "message": "Merge branch 'DPC-859-resource-templates-for-performance-tests' of https://github.com/CMSgov/dpc-app into DPC-859-resource-templates-for-performance-tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4766c39a081ac911550d8973bce5c987f198ee90", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/4766c39a081ac911550d8973bce5c987f198ee90", "committedDate": "2020-12-16T16:14:42Z", "message": "change variable name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzODcwMDIx", "url": "https://github.com/CMSgov/dpc-app/pull/1143#pullrequestreview-553870021", "createdAt": "2020-12-16T16:35:06Z", "commit": {"oid": "4766c39a081ac911550d8973bce5c987f198ee90"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzOTEwNDg1", "url": "https://github.com/CMSgov/dpc-app/pull/1143#pullrequestreview-553910485", "createdAt": "2020-12-16T17:17:24Z", "commit": {"oid": "4766c39a081ac911550d8973bce5c987f198ee90"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxNzoxNzoyNVrOIHQTag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxNzoxNzoyNVrOIHQTag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ3ODA1OA==", "bodyText": "thats pretty cool", "url": "https://github.com/CMSgov/dpc-app/pull/1143#discussion_r544478058", "createdAt": "2020-12-16T17:17:25Z", "author": {"login": "MrMorie"}, "path": "dpc-testing/performance/pkg/dpc/dpc.go", "diffHunk": "@@ -109,11 +132,15 @@ func readBodies(pattern string) [][]byte {\n \treturn bodies\n }\n \n-func generateKeyBodies(n int, fn func() (string, *rsa.PrivateKey, string)) [][]byte {\n-\tvar bodies [][]byte\n-\tfor i := 0; i < n; i++ {\n-\t\tpubKeyStr, _, signature := fn()\n-\t\tbodies = append(bodies, []byte(fmt.Sprintf(\"{ \\\"key\\\": \\\"%s\\\", \\\"signature\\\": \\\"%s\\\"}\", pubKeyStr, signature)))\n+func generateNPI() string {\n+\tluhnWithPrefix := luhn.GenerateWithPrefix(15, \"808403\")\n+\treturn luhnWithPrefix[len(luhnWithPrefix)-10:]\n+}\n+\n+func generateMBI() string {\n+\tmbi, err := regen.Generate(\"^[1-9][a-zA-Z][a-zA-Z0-9][0-9][a-zA-Z][a-zA-Z0-9][0-9][a-zA-Z]{2}[0-9]{2}$\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4766c39a081ac911550d8973bce5c987f198ee90"}, "originalPosition": 66}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzODc4MjMw", "url": "https://github.com/CMSgov/dpc-app/pull/1143#pullrequestreview-553878230", "createdAt": "2020-12-16T16:43:16Z", "commit": {"oid": "4766c39a081ac911550d8973bce5c987f198ee90"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxNjo0MzoxN1rOIHOuVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxNzozNToxMlrOIHRFRA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ1MjE4MQ==", "bodyText": "We'll want to capture and respond to possible errors here, and with any other functions that can return an error.", "url": "https://github.com/CMSgov/dpc-app/pull/1143#discussion_r544452181", "createdAt": "2020-12-16T16:43:17Z", "author": {"login": "dhgreene"}, "path": "dpc-testing/performance/pkg/dpc/dpc.go", "diffHunk": "@@ -29,6 +36,22 @@ func unmarshalIDs(resps [][]byte) []string {\n \treturn IDs\n }\n \n+// Pull `identifier` out of a set of response bodies\n+func unmarshalIdentifiers(resps [][]byte, system string) []string {\n+\tvar identifierValue []string\n+\tfor _, resp := range resps {\n+\t\tvar result Resource\n+\t\tjson.Unmarshal(resp, &result)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4766c39a081ac911550d8973bce5c987f198ee90"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ1Mjk2Nw==", "bodyText": "We probably don't need to modify this \ud83d\ude04", "url": "https://github.com/CMSgov/dpc-app/pull/1143#discussion_r544452967", "createdAt": "2020-12-16T16:44:18Z", "author": {"login": "dhgreene"}, "path": "dpc-testing/performance/main.go", "diffHunk": "@@ -26,4 +26,5 @@ func main() {\n \tapi.RunPractitionerTests()\n \tapi.RunOrgTests()\n \tapi.RunGroupTests()\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4766c39a081ac911550d8973bce5c987f198ee90"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ1ODk0NQ==", "bodyText": "What's our convention for test MBIs?", "url": "https://github.com/CMSgov/dpc-app/pull/1143#discussion_r544458945", "createdAt": "2020-12-16T16:51:46Z", "author": {"login": "dhgreene"}, "path": "dpc-testing/performance/pkg/dpc/dpc.go", "diffHunk": "@@ -109,11 +132,15 @@ func readBodies(pattern string) [][]byte {\n \treturn bodies\n }\n \n-func generateKeyBodies(n int, fn func() (string, *rsa.PrivateKey, string)) [][]byte {\n-\tvar bodies [][]byte\n-\tfor i := 0; i < n; i++ {\n-\t\tpubKeyStr, _, signature := fn()\n-\t\tbodies = append(bodies, []byte(fmt.Sprintf(\"{ \\\"key\\\": \\\"%s\\\", \\\"signature\\\": \\\"%s\\\"}\", pubKeyStr, signature)))\n+func generateNPI() string {\n+\tluhnWithPrefix := luhn.GenerateWithPrefix(15, \"808403\")\n+\treturn luhnWithPrefix[len(luhnWithPrefix)-10:]\n+}\n+\n+func generateMBI() string {\n+\tmbi, err := regen.Generate(\"^[1-9][a-zA-Z][a-zA-Z0-9][0-9][a-zA-Z][a-zA-Z0-9][0-9][a-zA-Z]{2}[0-9]{2}$\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4766c39a081ac911550d8973bce5c987f198ee90"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ2MTk4OA==", "bodyText": "Let's add unit tests for the functions in this file!  \ud83e\uddea", "url": "https://github.com/CMSgov/dpc-app/pull/1143#discussion_r544461988", "createdAt": "2020-12-16T16:55:46Z", "author": {"login": "dhgreene"}, "path": "dpc-testing/performance/pkg/dpc/generator.go", "diffHunk": "@@ -0,0 +1,99 @@\n+package dpc\n+\n+import (\n+\t\"bytes\"\n+\t\"crypto/rsa\"\n+\t\"fmt\"\n+\t\"io/ioutil\"\n+\t\"net/url\"\n+)\n+\n+func templateBodyGenerator(templateFile string, replacementMap map[string]func() string) func() []byte {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4766c39a081ac911550d8973bce5c987f198ee90"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ2NzY4Ng==", "bodyText": "This will be more readable with `` instead of \"\":\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tbodies = append(bodies, []byte(fmt.Sprintf(\"{ \\\"key\\\": \\\"%s\\\", \\\"signature\\\": \\\"%s\\\"}\", pubKeyStr, signature)))\n          \n          \n            \n            \t\tbodies = append(bodies, []byte(fmt.Sprintf(`{ \"key\": \"%s\", \"signature\": \"%s\"}`, pubKeyStr, signature)))", "url": "https://github.com/CMSgov/dpc-app/pull/1143#discussion_r544467686", "createdAt": "2020-12-16T17:03:23Z", "author": {"login": "dhgreene"}, "path": "dpc-testing/performance/pkg/dpc/generator.go", "diffHunk": "@@ -0,0 +1,99 @@\n+package dpc\n+\n+import (\n+\t\"bytes\"\n+\t\"crypto/rsa\"\n+\t\"fmt\"\n+\t\"io/ioutil\"\n+\t\"net/url\"\n+)\n+\n+func templateBodyGenerator(templateFile string, replacementMap map[string]func() string) func() []byte {\n+\tbody, err := ioutil.ReadFile(templateFile)\n+\tif err != nil {\n+\t\tpanic(err)\n+\t}\n+\treturn func() []byte {\n+\t\toutput := body\n+\n+\t\tfor k, v := range replacementMap {\n+\t\t\tkeyCount := bytes.Count(body, []byte(k))\n+\t\t\tfor i := 0; i < keyCount; i++ {\n+\t\t\t\tvalue := v()\n+\t\t\t\toutput = bytes.Replace(output, []byte(k), []byte(value), i+1)\n+\t\t\t}\n+\n+\t\t}\n+\n+\t\treturn output\n+\t}\n+}\n+\n+func keyBodyGenerator(n int, fn func() (string, *rsa.PrivateKey, string)) func() []byte {\n+\tvar bodies [][]byte\n+\tfor i := 0; i < n; i++ {\n+\t\tpubKeyStr, _, signature := fn()\n+\t\tbodies = append(bodies, []byte(fmt.Sprintf(\"{ \\\"key\\\": \\\"%s\\\", \\\"signature\\\": \\\"%s\\\"}\", pubKeyStr, signature)))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4766c39a081ac911550d8973bce5c987f198ee90"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDQ5MDgyMA==", "bodyText": "Can we make dpc.generateNPI() public and reference it here and a few lines later?", "url": "https://github.com/CMSgov/dpc-app/pull/1143#discussion_r544490820", "createdAt": "2020-12-16T17:35:12Z", "author": {"login": "dhgreene"}, "path": "dpc-testing/performance/pkg/dpc/test_organization.go", "diffHunk": "@@ -13,7 +14,10 @@ func (api *API) RunOrgTests() {\n \t\tBaseURL:     api.URL,\n \t\tEndpoint:    endpoint + \"/$submit\",\n \t\tAccessToken: string(api.goldenMacaroon),\n-\t\tBodies:      readBodies(\"../../src/main/resources/organizations/base-organization.json\"),\n+\t\tGenerator: templateBodyGenerator(\"./templates/organization-bundle-template.json\", map[string]func() string{\"{NPI}\": func() string {\n+\t\t\tluhnWithPrefix := luhn.GenerateWithPrefix(15, \"808403\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4766c39a081ac911550d8973bce5c987f198ee90"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "669ef9a4eddc7c3edf2d321cbc3ec834a61abfbc", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/669ef9a4eddc7c3edf2d321cbc3ec834a61abfbc", "committedDate": "2020-12-16T18:04:46Z", "message": "pr concerns"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "536a0f678d7178c3a74161e5d608fa1bb6c2a3ac", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/536a0f678d7178c3a74161e5d608fa1bb6c2a3ac", "committedDate": "2020-12-16T18:05:01Z", "message": "make generated mbis strict"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "96c48090d7af84656af8e3193c6219a62be9741d", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/96c48090d7af84656af8e3193c6219a62be9741d", "committedDate": "2020-12-16T18:35:47Z", "message": "Merge branch 'master' into DPC-859-resource-templates-for-performance-tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzOTg5MzAx", "url": "https://github.com/CMSgov/dpc-app/pull/1143#pullrequestreview-553989301", "createdAt": "2020-12-16T18:55:03Z", "commit": {"oid": "96c48090d7af84656af8e3193c6219a62be9741d"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "711baf88b7b437d0612dfa2d5b5758cd8d9c0f8c", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/711baf88b7b437d0612dfa2d5b5758cd8d9c0f8c", "committedDate": "2020-12-16T21:23:11Z", "message": "pr concerns"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0MTA5Mjgw", "url": "https://github.com/CMSgov/dpc-app/pull/1143#pullrequestreview-554109280", "createdAt": "2020-12-16T21:44:32Z", "commit": {"oid": "711baf88b7b437d0612dfa2d5b5758cd8d9c0f8c"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc2a29567358f6e8dad9769fc7e2706c424343da", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/bc2a29567358f6e8dad9769fc7e2706c424343da", "committedDate": "2020-12-17T06:46:00Z", "message": "fix some stuff"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd79b393be2f7fad1ceb1771533fc821d8b70aeb", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/fd79b393be2f7fad1ceb1771533fc821d8b70aeb", "committedDate": "2020-12-17T06:48:23Z", "message": "removed commented out code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8edaa39d4714d4fce70a97ca629a7d110a12333", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/d8edaa39d4714d4fce70a97ca629a7d110a12333", "committedDate": "2020-12-17T06:50:37Z", "message": "remove more commented out code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0MzI3Nzgx", "url": "https://github.com/CMSgov/dpc-app/pull/1143#pullrequestreview-554327781", "createdAt": "2020-12-17T07:08:37Z", "commit": {"oid": "d8edaa39d4714d4fce70a97ca629a7d110a12333"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU0MzI4NDA1", "url": "https://github.com/CMSgov/dpc-app/pull/1143#pullrequestreview-554328405", "createdAt": "2020-12-17T07:09:56Z", "commit": {"oid": "d8edaa39d4714d4fce70a97ca629a7d110a12333"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f77a485f3e3ecc76204c53ded911be38f848d14", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/5f77a485f3e3ecc76204c53ded911be38f848d14", "committedDate": "2020-12-21T15:27:52Z", "message": "Merge branch 'master' into DPC-859-resource-templates-for-performance-tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2NDc2NzMx", "url": "https://github.com/CMSgov/dpc-app/pull/1143#pullrequestreview-556476731", "createdAt": "2020-12-21T15:48:33Z", "commit": {"oid": "5f77a485f3e3ecc76204c53ded911be38f848d14"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35f8d4f7cacae37131751a2c56162b24b4ac2bc2", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/35f8d4f7cacae37131751a2c56162b24b4ac2bc2", "committedDate": "2020-12-21T23:25:04Z", "message": "Merge branch 'master' into DPC-859-resource-templates-for-performance-tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2NzQ2MjYz", "url": "https://github.com/CMSgov/dpc-app/pull/1143#pullrequestreview-556746263", "createdAt": "2020-12-22T00:32:21Z", "commit": {"oid": "35f8d4f7cacae37131751a2c56162b24b4ac2bc2"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d3205331774e35166f91fa181e85b71c3c7fa99c", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/d3205331774e35166f91fa181e85b71c3c7fa99c", "committedDate": "2020-12-22T03:19:15Z", "message": "make code climate happy"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2Nzk5NTQ2", "url": "https://github.com/CMSgov/dpc-app/pull/1143#pullrequestreview-556799546", "createdAt": "2020-12-22T03:41:38Z", "commit": {"oid": "d3205331774e35166f91fa181e85b71c3c7fa99c"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3bfb7b2b02865b2ed3782458452860db8ec5fd67", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/3bfb7b2b02865b2ed3782458452860db8ec5fd67", "committedDate": "2021-01-04T22:50:14Z", "message": "Merge branch 'master' into DPC-859-resource-templates-for-performance-tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYxNDExNjYx", "url": "https://github.com/CMSgov/dpc-app/pull/1143#pullrequestreview-561411661", "createdAt": "2021-01-04T23:10:54Z", "commit": {"oid": "3bfb7b2b02865b2ed3782458452860db8ec5fd67"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYxNDc5NjM3", "url": "https://github.com/CMSgov/dpc-app/pull/1143#pullrequestreview-561479637", "createdAt": "2021-01-05T02:41:26Z", "commit": {"oid": "3bfb7b2b02865b2ed3782458452860db8ec5fd67"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwMjo0MToyNlrOIOINFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQwMjo0MToyNlrOIOINFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTY4NTM5Nw==", "bodyText": "Thats pretty cool.", "url": "https://github.com/CMSgov/dpc-app/pull/1143#discussion_r551685397", "createdAt": "2021-01-05T02:41:26Z", "author": {"login": "MrMorie"}, "path": "dpc-testing/performance/pkg/dpc/dpc.go", "diffHunk": "@@ -90,30 +110,15 @@ func cleanAndPanic(err error) {\n \tpanic(err)\n }\n \n-func readBodies(pattern string) [][]byte {\n-\tfilenames, err := filepath.Glob(pattern)\n-\tif err != nil {\n-\t\tpanic(err)\n-\t}\n-\n-\tbodies := make([][]byte, 0)\n-\tfor _, fname := range filenames {\n-\t\tbody, err := ioutil.ReadFile(fname)\n-\t\tif err != nil {\n-\t\t\tpanic(err)\n-\t\t}\n-\n-\t\tbodies = append(bodies, body)\n-\t}\n-\n-\treturn bodies\n+func generateNPI() string {\n+\tluhnWithPrefix := luhn.GenerateWithPrefix(15, \"808403\")\n+\treturn luhnWithPrefix[len(luhnWithPrefix)-10:]\n }\n \n-func generateKeyBodies(n int, fn func() (string, *rsa.PrivateKey, string)) [][]byte {\n-\tvar bodies [][]byte\n-\tfor i := 0; i < n; i++ {\n-\t\tpubKeyStr, _, signature := fn()\n-\t\tbodies = append(bodies, []byte(fmt.Sprintf(\"{ \\\"key\\\": \\\"%s\\\", \\\"signature\\\": \\\"%s\\\"}\", pubKeyStr, signature)))\n+func generateMBI() string {\n+\tmbi, err := regen.Generate(\"^[1-9][ac-hj-km-np-rt-yAC-HJ-KM-NP-RT-Y][ac-hj-km-np-rt-yAC-HJ-KM-NP-RT-Y0-9][0-9][ac-hj-km-np-rt-yAC-HJ-KM-NP-RT-Y][ac-hj-km-np-rt-yAC-HJ-KM-NP-RT-Y0-9][0-9][ac-hj-km-np-rt-yAC-HJ-KM-NP-RT-Y]{2}[0-9]{2}$\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3bfb7b2b02865b2ed3782458452860db8ec5fd67"}, "originalPosition": 125}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYxNDgzNDk4", "url": "https://github.com/CMSgov/dpc-app/pull/1143#pullrequestreview-561483498", "createdAt": "2021-01-05T02:54:56Z", "commit": {"oid": "3bfb7b2b02865b2ed3782458452860db8ec5fd67"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3dcc8b53a9017bba7db2dfbbe518de80b1a81716", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/3dcc8b53a9017bba7db2dfbbe518de80b1a81716", "committedDate": "2021-01-06T16:28:31Z", "message": "Merge branch 'master' into DPC-859-resource-templates-for-performance-tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYyODcyNDA1", "url": "https://github.com/CMSgov/dpc-app/pull/1143#pullrequestreview-562872405", "createdAt": "2021-01-06T16:50:55Z", "commit": {"oid": "3dcc8b53a9017bba7db2dfbbe518de80b1a81716"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYzMDE3OTY0", "url": "https://github.com/CMSgov/dpc-app/pull/1143#pullrequestreview-563017964", "createdAt": "2021-01-06T20:29:41Z", "commit": {"oid": "3dcc8b53a9017bba7db2dfbbe518de80b1a81716"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed3269fa5072c0c6f346f29849f4c08e9f7084d4", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/ed3269fa5072c0c6f346f29849f4c08e9f7084d4", "committedDate": "2021-01-06T21:19:11Z", "message": "add test for template generator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f756b3fc8cc0358705cae6887f43b76392c4dfe", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/7f756b3fc8cc0358705cae6887f43b76392c4dfe", "committedDate": "2021-01-06T21:19:52Z", "message": "Merge branch 'master' into DPC-859-resource-templates-for-performance-tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f42bd0e4f0148cf9a5a986086e54d9b0fe8d6e68", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/f42bd0e4f0148cf9a5a986086e54d9b0fe8d6e68", "committedDate": "2021-01-06T21:41:54Z", "message": "use testify"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97dfae4a81bbafc7c6f48cb2ea45800d0d604cbe", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/97dfae4a81bbafc7c6f48cb2ea45800d0d604cbe", "committedDate": "2021-01-06T21:41:59Z", "message": "Merge branch 'DPC-859-resource-templates-for-performance-tests' of https://github.com/CMSgov/dpc-app into DPC-859-resource-templates-for-performance-tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYzMDY2Mzg1", "url": "https://github.com/CMSgov/dpc-app/pull/1143#pullrequestreview-563066385", "createdAt": "2021-01-06T22:03:49Z", "commit": {"oid": "97dfae4a81bbafc7c6f48cb2ea45800d0d604cbe"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY0Mzg1NDI1", "url": "https://github.com/CMSgov/dpc-app/pull/1143#pullrequestreview-564385425", "createdAt": "2021-01-08T16:12:04Z", "commit": {"oid": "97dfae4a81bbafc7c6f48cb2ea45800d0d604cbe"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d836625100e99ea9b3c51fdf9f07c235de65c01", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/2d836625100e99ea9b3c51fdf9f07c235de65c01", "committedDate": "2021-01-08T16:36:14Z", "message": "Merge branch 'master' into DPC-859-resource-templates-for-performance-tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY0NDIzNjgy", "url": "https://github.com/CMSgov/dpc-app/pull/1143#pullrequestreview-564423682", "createdAt": "2021-01-08T16:55:18Z", "commit": {"oid": "2d836625100e99ea9b3c51fdf9f07c235de65c01"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b3299f1a77f20eab31550555d1b442499e4d006", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/5b3299f1a77f20eab31550555d1b442499e4d006", "committedDate": "2021-01-08T17:15:15Z", "message": "Merge branch 'master' into DPC-859-resource-templates-for-performance-tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY0NDUyODk5", "url": "https://github.com/CMSgov/dpc-app/pull/1143#pullrequestreview-564452899", "createdAt": "2021-01-08T17:36:47Z", "commit": {"oid": "5b3299f1a77f20eab31550555d1b442499e4d006"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34c271bf6d9b684b7aa522d1ba8313341ccb3f6f", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/34c271bf6d9b684b7aa522d1ba8313341ccb3f6f", "committedDate": "2021-01-08T17:57:18Z", "message": "Merge branch 'master' into DPC-859-resource-templates-for-performance-tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY0NDgwMjA5", "url": "https://github.com/CMSgov/dpc-app/pull/1143#pullrequestreview-564480209", "createdAt": "2021-01-08T18:18:16Z", "commit": {"oid": "34c271bf6d9b684b7aa522d1ba8313341ccb3f6f"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 342, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}