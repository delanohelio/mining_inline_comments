{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwMTUwNzk2", "number": 773, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxNDoyMjoxNlrOD3OC9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxNDoyMjoxN1rOD3OC_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5MjI4NDA0OnYy", "diffSide": "RIGHT", "path": "dpc-web/app/models/registered_organization.rb", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxNDoyMjoxNlrOGNWkJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxNDoyMjoxNlrOGNWkJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjY1NDM3NQ==", "bodyText": "Literal 'Cannot find organization' appeared as a condition.", "url": "https://github.com/CMSgov/dpc-app/pull/773#discussion_r416654375", "createdAt": "2020-04-28T14:22:16Z", "author": {"login": "codeclimate"}, "path": "dpc-web/app/models/registered_organization.rb", "diffHunk": "@@ -84,7 +90,9 @@ def delete_api_organization\n       return\n     end\n \n-    errors.add(:base, \"couldn't be deleted from #{api_env} API: #{api_response}\")\n+    action = 'deleted'\n+    msg = api_repsponse.include? 'Cannot find organization' ? 'Cannot find organization' : api_response", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33b9c040174d9ba94533f48c52f7dfc0798a92d2"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5MjI4NDA1OnYy", "diffSide": "RIGHT", "path": "dpc-web/app/models/registered_organization.rb", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxNDoyMjoxNlrOGNWkKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxNDoyMjoxNlrOGNWkKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjY1NDM3Ng==", "bodyText": "Use double pipes || instead.", "url": "https://github.com/CMSgov/dpc-app/pull/773#discussion_r416654376", "createdAt": "2020-04-28T14:22:16Z", "author": {"login": "codeclimate"}, "path": "dpc-web/app/models/registered_organization.rb", "diffHunk": "@@ -84,7 +90,9 @@ def delete_api_organization\n       return\n     end\n \n-    errors.add(:base, \"couldn't be deleted from #{api_env} API: #{api_response}\")\n+    action = 'deleted'\n+    msg = api_repsponse.include? 'Cannot find organization' ? 'Cannot find organization' : api_response", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33b9c040174d9ba94533f48c52f7dfc0798a92d2"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5MjI4NDEwOnYy", "diffSide": "RIGHT", "path": "dpc-web/app/controllers/internal/organizations_controller.rb", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxNDoyMjoxN1rOGNWkLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxNDoyMjoxN1rOGNWkLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjY1NDM4Mg==", "bodyText": "Trailing whitespace detected.", "url": "https://github.com/CMSgov/dpc-app/pull/773#discussion_r416654382", "createdAt": "2020-04-28T14:22:17Z", "author": {"login": "codeclimate"}, "path": "dpc-web/app/controllers/internal/organizations_controller.rb", "diffHunk": "@@ -84,6 +86,10 @@ def destroy\n \n     private\n \n+    def prod_sbx?\n+      ENV['DEPLOY_ENV'] == 'prod-sbx'\n+    end\n+  ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33b9c040174d9ba94533f48c52f7dfc0798a92d2"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5MjI4NDE0OnYy", "diffSide": "RIGHT", "path": "dpc-web/app/controllers/internal/organizations_controller.rb", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxNDoyMjoxN1rOGNWkMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxNDoyMjoxN1rOGNWkMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjY1NDM4Ng==", "bodyText": "Line is too long. [131/120]", "url": "https://github.com/CMSgov/dpc-app/pull/773#discussion_r416654386", "createdAt": "2020-04-28T14:22:17Z", "author": {"login": "codeclimate"}, "path": "dpc-web/app/controllers/internal/organizations_controller.rb", "diffHunk": "@@ -42,6 +42,8 @@ def create\n         flash[:notice] = 'Organization created.'\n         if params[:from_user].present?\n           redirect_to edit_internal_user_path(params[:from_user], user_organization_ids: @organization.id)\n+        elsif prod_sbx?\n+          redirect_to new_internal_organization_registered_organization_path(organization_id: @organization.id, api_env: 'sandbox')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33b9c040174d9ba94533f48c52f7dfc0798a92d2"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4873, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}