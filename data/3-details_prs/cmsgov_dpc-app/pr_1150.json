{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQyOTU4MDI5", "number": 1150, "title": "DPC 971 Feature: Add Snyk scans for Github Actions", "bodyText": "Fixes DPC-971\nCurrently, we are performing Snyk analysis after a branch gets merged to master (triggered by Jenkins). This is great, but it means that a build could fail if a vulnerability was introduced in a feature branch (it isn't detectable by Snyk until the code makes it to master).\nWe should add a Snyk analysis into our feature branch CI via a Github Action.\nhttps://github.com/snyk/actions\nProposed Changes\n\nAdd snyk/actions to Github Actions\n\nChange Details\n\nFail on high severity failures\nAdd SNYK_API_TOKEN to Github Repo Secrets and KeyBase\n\nSecurity Implications\n\n\n new software dependencies\n\n\n\n security controls or supporting software altered\n\n\n\n new data stored or transmitted\n\n\n\n security checklist is completed for this change\n\n\n\n requires more information or team discussion to evaluate security implications\n\n\n\n no PHI/PII is affected by this change\n\n\nAcceptance Validation\nCan only test Workflow change via a PR...\n\nhttps://github.com/CMSgov/dpc-app/actions/runs/432800008\n\nWill block success of action run.\n\nMatch this: https://app.snyk.io/org/oeda/reports/\n\nFeedback Requested", "createdAt": "2020-12-19T17:55:54Z", "url": "https://github.com/CMSgov/dpc-app/pull/1150", "merged": true, "mergeCommit": {"oid": "6ce8e862d03a57263e6ad0b211bcb76de80bdfe7"}, "closed": true, "closedAt": "2020-12-23T17:46:39Z", "author": {"login": "lostpurplecow"}, "timelineItems": {"totalCount": 35, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdnwj_PAH2gAyNTQyOTU4MDI5OmE2MjdhMzFhMDZmNTc3M2JlNWViZmZiMTA4YTE4YzY4Njg3YjA1YWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdpCSTeAFqTU1ODExNTc4MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a627a31a06f5773be5ebffb108a18c68687b05ab", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/a627a31a06f5773be5ebffb108a18c68687b05ab", "committedDate": "2020-12-19T17:55:02Z", "message": "add snyk scans for java, python, and ruby\n\nSigned-off-by: Jeff Corpuz <jcorpuz@fearless.tech>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2ae423d7895bda5af7db4e674800ac8ff16b6f8", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/c2ae423d7895bda5af7db4e674800ac8ff16b6f8", "committedDate": "2020-12-19T18:02:19Z", "message": "address ruby dev\n\nSigned-off-by: Jeff Corpuz <jcorpuz@fearless.tech>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8a97db397f0cfd5f63daac4ada77107d82c1f7c", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/f8a97db397f0cfd5f63daac4ada77107d82c1f7c", "committedDate": "2020-12-19T18:09:07Z", "message": "test ruby dep\n\nSigned-off-by: Jeff Corpuz <jcorpuz@fearless.tech>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc74e23d9067fbfc17c4f4e50d925148c0cea133", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/dc74e23d9067fbfc17c4f4e50d925148c0cea133", "committedDate": "2020-12-19T18:41:14Z", "message": "Revert \"test ruby dep\"\n\nThis reverts commit f8a97db397f0cfd5f63daac4ada77107d82c1f7c."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "529990eeb0d6303a19d7a649366712eadeff53e9", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/529990eeb0d6303a19d7a649366712eadeff53e9", "committedDate": "2020-12-19T18:41:40Z", "message": "Revert \"address ruby dev\"\n\nThis reverts commit c2ae423d7895bda5af7db4e674800ac8ff16b6f8."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f39d41f45c16dca5a2e670785e55cb516afbd140", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/f39d41f45c16dca5a2e670785e55cb516afbd140", "committedDate": "2020-12-19T18:44:35Z", "message": "remove python, re-arrange ruby\n\nSigned-off-by: Jeff Corpuz <jcorpuz@fearless.tech>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94ae554b4c17e474425fd67fb0850f29c7a3ab7b", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/94ae554b4c17e474425fd67fb0850f29c7a3ab7b", "committedDate": "2020-12-19T18:49:04Z", "message": "rearrange java\n\nSigned-off-by: Jeff Corpuz <jcorpuz@fearless.tech>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1OTYzNTY5", "url": "https://github.com/CMSgov/dpc-app/pull/1150#pullrequestreview-555963569", "createdAt": "2020-12-19T19:32:00Z", "commit": {"oid": "94ae554b4c17e474425fd67fb0850f29c7a3ab7b"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a33fa00715f46709df098cc5c1f863ee7361c88a", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/a33fa00715f46709df098cc5c1f863ee7361c88a", "committedDate": "2020-12-19T22:13:16Z", "message": "add python"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40472050a116a7d482cfdeba0a4af473bb65fc30", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/40472050a116a7d482cfdeba0a4af473bb65fc30", "committedDate": "2020-12-19T22:20:37Z", "message": "attempt w/ all projects\n\nSigned-off-by: Jeff Corpuz <jcorpuz@fearless.tech>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6203c048d275aa1735f920368859ba9d595383c5", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/6203c048d275aa1735f920368859ba9d595383c5", "committedDate": "2020-12-19T22:27:02Z", "message": "ignore directories\n\nSigned-off-by: Jeff Corpuz <jcorpuz@fearless.tech>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3955a1b3a3f6997bb5da907e59fbc8d5d83d4950", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/3955a1b3a3f6997bb5da907e59fbc8d5d83d4950", "committedDate": "2020-12-19T22:33:02Z", "message": "revert for dependencies\n\nSigned-off-by: Jeff Corpuz <jcorpuz@fearless.tech>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2fcba7432a697011521a6a5d6b2bba77ff01e993", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/2fcba7432a697011521a6a5d6b2bba77ff01e993", "committedDate": "2020-12-19T22:34:20Z", "message": "use maven jdk 11\n\nSigned-off-by: Jeff Corpuz <jcorpuz@fearless.tech>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac888f0e9d3a18d69f9bb6b4b35541d484d996d9", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/ac888f0e9d3a18d69f9bb6b4b35541d484d996d9", "committedDate": "2020-12-19T22:35:36Z", "message": "rearranged\n\nSigned-off-by: Jeff Corpuz <jcorpuz@fearless.tech>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa0069a2eeaf3a897bb26d5648c7f7e71eda8988", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/fa0069a2eeaf3a897bb26d5648c7f7e71eda8988", "committedDate": "2020-12-19T22:41:06Z", "message": "change to monitor\n\nSigned-off-by: Jeff Corpuz <jcorpuz@fearless.tech>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2d6d4d1ee1ec893971bedc6434b3f0a1a10c438", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/f2d6d4d1ee1ec893971bedc6434b3f0a1a10c438", "committedDate": "2020-12-19T22:44:38Z", "message": "revert to test for ga\n\nSigned-off-by: Jeff Corpuz <jcorpuz@fearless.tech>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8adcd6d9a9da5d0b182cf4dab923590c6c36ea7", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/a8adcd6d9a9da5d0b182cf4dab923590c6c36ea7", "committedDate": "2020-12-19T22:46:58Z", "message": "python bzt\n\nSigned-off-by: Jeff Corpuz <jcorpuz@fearless.tech>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2NTMwMDI5", "url": "https://github.com/CMSgov/dpc-app/pull/1150#pullrequestreview-556530029", "createdAt": "2020-12-21T17:05:00Z", "commit": {"oid": "a8adcd6d9a9da5d0b182cf4dab923590c6c36ea7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxNzowNTowMFrOIJfaCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxNzowNTowMFrOIJfaCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjgyMjY2Nw==", "bodyText": "Should we include the other sources here, or perhaps use the directory-driven approach from the ops PR?", "url": "https://github.com/CMSgov/dpc-app/pull/1150#discussion_r546822667", "createdAt": "2020-12-21T17:05:00Z", "author": {"login": "dhgreene"}, "path": ".github/workflows/ci-workflow.yml", "diffHunk": "@@ -14,6 +15,12 @@ jobs:\n     steps:\n       - name: \"Checkout code\"\n         uses: actions/checkout@v1\n+      - name: Run Snyk - Java\n+        uses: snyk/actions/maven-3-jdk-11@master\n+        continue-on-error: false\n+        with:\n+          command: test\n+          args: --severity-threshold=high --file=pom.xml", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8adcd6d9a9da5d0b182cf4dab923590c6c36ea7"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f0ffe01955184946e3731bada24769a4182eec7", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/8f0ffe01955184946e3731bada24769a4182eec7", "committedDate": "2020-12-23T13:46:41Z", "message": "test all projects\n\nSigned-off-by: Jeff Corpuz <jcorpuz@fearless.tech>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "970d3698bc6da0904fc2c3a5974f5bcae1efa47d", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/970d3698bc6da0904fc2c3a5974f5bcae1efa47d", "committedDate": "2020-12-23T13:48:07Z", "message": "add checkout\n\nSigned-off-by: Jeff Corpuz <jcorpuz@fearless.tech>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64ce1ffa6a41fde31178035cdcc1271ca5ad2541", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/64ce1ffa6a41fde31178035cdcc1271ca5ad2541", "committedDate": "2020-12-23T13:52:52Z", "message": "rearrage\n\nSigned-off-by: Jeff Corpuz <jcorpuz@fearless.tech>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1a60fc194bdc0dedec433217142c573d19f4726", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/f1a60fc194bdc0dedec433217142c573d19f4726", "committedDate": "2020-12-23T14:06:17Z", "message": "target directories\n\nSigned-off-by: Jeff Corpuz <jcorpuz@fearless.tech>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b942a70cdcb71a3d060fe8c564cc7e430d569dee", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/b942a70cdcb71a3d060fe8c564cc7e430d569dee", "committedDate": "2020-12-23T14:12:40Z", "message": "debugging missing projects\n\nSigned-off-by: Jeff Corpuz <jcorpuz@fearless.tech>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8982b0cc4deb8d632d2b140e6e3729d32dc2feb3", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/8982b0cc4deb8d632d2b140e6e3729d32dc2feb3", "committedDate": "2020-12-23T14:19:01Z", "message": "ignore current working directory\n\nSigned-off-by: Jeff Corpuz <jcorpuz@fearless.tech>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f4e70b6a9dbe5cb5c708d9f1517af7e63873ee3", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/2f4e70b6a9dbe5cb5c708d9f1517af7e63873ee3", "committedDate": "2020-12-23T14:26:34Z", "message": "allow missing\n\nSigned-off-by: Jeff Corpuz <jcorpuz@fearless.tech>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "396d975649dad79e6937fcb7c887faa5dc7be09d", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/396d975649dad79e6937fcb7c887faa5dc7be09d", "committedDate": "2020-12-23T14:32:09Z", "message": "incorrect flags for allow missing\n\nSigned-off-by: Jeff Corpuz <jcorpuz@fearless.tech>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ceba3bb75f86b444ed6bbcc1f80c231baadcf252", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/ceba3bb75f86b444ed6bbcc1f80c231baadcf252", "committedDate": "2020-12-23T14:39:33Z", "message": "final final final final version\n\nSigned-off-by: Jeff Corpuz <jcorpuz@fearless.tech>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c2e522167ebe1d69e83b8c04248e4d4e39aee9a", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/5c2e522167ebe1d69e83b8c04248e4d4e39aee9a", "committedDate": "2020-12-23T14:42:52Z", "message": "one snyk test to rule them all?\n\nSigned-off-by: Jeff Corpuz <jcorpuz@fearless.tech>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "843c6a63a17d0656214347d6fe9cc779add526f4", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/843c6a63a17d0656214347d6fe9cc779add526f4", "committedDate": "2020-12-23T14:52:37Z", "message": "add go to test\n\nSigned-off-by: Jeff Corpuz <jcorpuz@fearless.tech>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53539037a22ac4aab0d6d86150611eb605531faf", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/53539037a22ac4aab0d6d86150611eb605531faf", "committedDate": "2020-12-23T14:58:00Z", "message": "what happens if we do this...\n\nSigned-off-by: Jeff Corpuz <jcorpuz@fearless.tech>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3dc5a5fc587c4e58d2421f8a656d9e0d2bcac88c", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/3dc5a5fc587c4e58d2421f8a656d9e0d2bcac88c", "committedDate": "2020-12-23T15:21:31Z", "message": "move snyk to build/test api workflow\n\nSigned-off-by: Jeff Corpuz <jcorpuz@fearless.tech>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35f72c628a12f3b6122af0558a3ff30338768d53", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/35f72c628a12f3b6122af0558a3ff30338768d53", "committedDate": "2020-12-23T15:28:47Z", "message": "Merge branch 'master' into jcorpuz/dpc-971-snyk-github-actions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "079fa7edc479bc7d5b0d663760b35e3a026b4577", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/079fa7edc479bc7d5b0d663760b35e3a026b4577", "committedDate": "2020-12-23T15:35:16Z", "message": "Revert \"move snyk to build/test api workflow\"\n\nThis reverts commit 3dc5a5fc587c4e58d2421f8a656d9e0d2bcac88c."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f6966a0726366d79c4667a180b73ed281f09149", "author": {"user": {"login": "lostpurplecow", "name": "Jeff"}}, "url": "https://github.com/CMSgov/dpc-app/commit/5f6966a0726366d79c4667a180b73ed281f09149", "committedDate": "2020-12-23T15:36:22Z", "message": "block failing snyk builds\n\nSigned-off-by: Jeff Corpuz <jcorpuz@fearless.tech>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4MTE1Nzgx", "url": "https://github.com/CMSgov/dpc-app/pull/1150#pullrequestreview-558115781", "createdAt": "2020-12-23T17:07:56Z", "commit": {"oid": "5f6966a0726366d79c4667a180b73ed281f09149"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 351, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}