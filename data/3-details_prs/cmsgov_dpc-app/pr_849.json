{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzMjM3Njky", "number": 849, "title": "Get smoke test working in prod env", "bodyText": "Why\nOur smoke tests did not run in our neo prod environment because there are no DNS entries for the hosts. The smoke test code assumes that urls for posting and the domain name are the same, which is not the case in the prod environment right now.\nWhat Changed\nThere are two operations in the code that needed attention:\n\ntokens must be created using the domain name\nthe job location returned by an $export request must be converted from domain ->\n\nThis code is a temporary bypass until we have completed our testing and are ready to make DNS changes.\nTickets closed:\nGive a list of tickets closed in this PR.\nFuture Work\nI assume we will remove these bypasses when we make the DNS changes.\nChecklist\n\n[ x ] All tests are passing via make ci-app (app change) and make ci-web (website change)\n(NA) Swagger documentation has been updated\n(NA) FHIR documentation has been updated\n(NA) Any required dpc-ops changes have a PR submitted and mentioned in this ticket\n(NA) Any manual migration steps are documented, scripts written (where applicable), and tested\n(NA) Before merging, any required dpc-ops changes have been approved and merged into master of the dpc-ops repo", "createdAt": "2020-06-11T17:37:11Z", "url": "https://github.com/CMSgov/dpc-app/pull/849", "merged": true, "mergeCommit": {"oid": "e4f28757066f9ec4edc8f665ad67b4c8f139ce59"}, "closed": true, "closedAt": "2020-06-16T13:17:07Z", "author": {"login": "DeirdreHolub"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqR2VTAFqTQyOTE0MzQ0Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcri9T9ABqjM0NDUxNDEyNjU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5MTQzNDQy", "url": "https://github.com/CMSgov/dpc-app/pull/849#pullrequestreview-429143442", "createdAt": "2020-06-11T17:38:37Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNzozODozN1rOGinxlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNzozODozN1rOGinxlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk1NjQzNg==", "bodyText": "Remove this unused method parameter \"httpClient\".", "url": "https://github.com/CMSgov/dpc-app/pull/849#discussion_r438956436", "createdAt": "2020-06-11T17:38:37Z", "author": {"login": "codeclimate"}, "path": "dpc-smoketest/src/main/java/gov/cms/dpc/testing/smoketests/ClientUtils.java", "diffHunk": "@@ -43,17 +43,17 @@ private ClientUtils() {\n \n     /**\n      * Helper method for initiating and Export job and monitoring its success.\n-     *\n      * @param exportClient - {@link IGenericClient} to use for export request. Ensure this contains the necessary authentication and HttpHeaders\n      * @param providerNPIs - {@link List} of {@link String} of provider NPIs to use for exporting\n      * @param httpClient   - {@link CloseableHttpClient} to use for executing non-FHIR HTTP requests\n+     * @param overrideURL  - overrides the url used for checking jobs; only useful when DNS is not active in an environment\n      */\n-    static void handleExportJob(IGenericClient exportClient, List<String> providerNPIs, CloseableHttpClient httpClient) {\n+    static void handleExportJob(IGenericClient exportClient, List<String> providerNPIs, CloseableHttpClient httpClient, String overrideURL) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5NzU2MzYx", "url": "https://github.com/CMSgov/dpc-app/pull/849#pullrequestreview-429756361", "createdAt": "2020-06-12T13:50:28Z", "commit": null, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5049ad7e3911c5e754931429d80cd213976f307", "author": {"user": {"login": "DeirdreHolub", "name": null}}, "url": "https://github.com/CMSgov/dpc-app/commit/b5049ad7e3911c5e754931429d80cd213976f307", "committedDate": "2020-06-15T16:08:23Z", "message": "smoke test works in neo prod env"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ad8717c2d9941b5ac3a14a1012cea3ee547227c", "author": {"user": {"login": "DeirdreHolub", "name": null}}, "url": "https://github.com/CMSgov/dpc-app/commit/7ad8717c2d9941b5ac3a14a1012cea3ee547227c", "committedDate": "2020-06-15T16:08:23Z", "message": "add notes about reversing workarounds"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "7ad8717c2d9941b5ac3a14a1012cea3ee547227c", "author": {"user": {"login": "DeirdreHolub", "name": null}}, "url": "https://github.com/CMSgov/dpc-app/commit/7ad8717c2d9941b5ac3a14a1012cea3ee547227c", "committedDate": "2020-06-15T16:08:23Z", "message": "add notes about reversing workarounds"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 489, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}