{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA2MjIxNjcw", "number": 1093, "title": "DPC-800: Webapp Tasks for Static Site Separation", "bodyText": "DO NOT MERGE UNTIL ALL STATIC SITE SEPARATION TASKS HAVE BEEN COMPLETED.\nFixes DPC-800\nAC: Complete the webapp tasks for separating out the static site\n\nRedirect static/rails links to corresponding pages\nRemove static pages from rails app\n\n\nProposed Changes\n\nAdded STATIC_SITE_URL variable for the static site url\nAny link to a static page has been changed to redirect to static site\nStatic pages have been deleted\n\n\nChange Details\n\nroot_path now redirects to sign_in page\n\n\nSecurity Implications\n\n\n new software dependencies\n\n\n\n security controls or supporting software altered\n\n\n\n new data stored or transmitted\n\n\n\n security checklist is completed for this change\n\n\n\n requires more information or team discussion to evaluate security implications\n\n\n\n no PHI/PII is affected by this change\n\n\nAcceptance Validation\n\n\nFeedback Requested", "createdAt": "2020-10-19T19:18:18Z", "url": "https://github.com/CMSgov/dpc-app/pull/1093", "merged": true, "mergeCommit": {"oid": "57e56b74dcaddc3b4a93840bfc547a6064158668"}, "closed": true, "closedAt": "2021-03-03T15:56:01Z", "author": {"login": "Sun-Mountain"}, "timelineItems": {"totalCount": 25, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdS3qgqgH2gAyNTA2MjIxNjcwOmMzMmQzYjQ1YzJkNjczNTk2NjA5ODc2NjJmMTJlMDQ4MzNlZjdmNmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABd_S0n3AH2gAyNTA2MjIxNjcwOjhlZjkxMDhhODU3MDZmNmIzZDk2ZjhiMTU2YmE4YzFjMDZiZmEwMDI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c32d3b45c2d67359660987662f12e04833ef7f6c", "author": {"user": {"login": "Sun-Mountain", "name": "Nicole Zonnenberg"}}, "url": "https://github.com/CMSgov/dpc-app/commit/c32d3b45c2d67359660987662f12e04833ef7f6c", "committedDate": "2020-10-15T20:19:05Z", "message": "URL redirect to statict site url"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7f44bd5d7c77786a641d688215def7a46f51d1c6", "author": {"user": {"login": "Sun-Mountain", "name": "Nicole Zonnenberg"}}, "url": "https://github.com/CMSgov/dpc-app/commit/7f44bd5d7c77786a641d688215def7a46f51d1c6", "committedDate": "2020-10-15T20:19:38Z", "message": "Remove pages folder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8747b6fb060fb57f4e9bc89920b4756e6322bfd1", "author": {"user": {"login": "Sun-Mountain", "name": "Nicole Zonnenberg"}}, "url": "https://github.com/CMSgov/dpc-app/commit/8747b6fb060fb57f4e9bc89920b4756e6322bfd1", "committedDate": "2020-10-19T13:50:03Z", "message": "Update home navigation links"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03e57d125c713bb22f2c0816195ffadb5ec65052", "author": {"user": {"login": "Sun-Mountain", "name": "Nicole Zonnenberg"}}, "url": "https://github.com/CMSgov/dpc-app/commit/03e57d125c713bb22f2c0816195ffadb5ec65052", "committedDate": "2020-10-19T14:43:56Z", "message": "Delete home page"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b55e8fa9e1090cd05bb217f3b0c6a427dcb6400", "author": {"user": {"login": "Sun-Mountain", "name": "Nicole Zonnenberg"}}, "url": "https://github.com/CMSgov/dpc-app/commit/7b55e8fa9e1090cd05bb217f3b0c6a427dcb6400", "committedDate": "2020-10-19T16:08:01Z", "message": "Fix routes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f8e7d580c1d95122d66be5617825b82d972428f", "author": {"user": {"login": "Sun-Mountain", "name": "Nicole Zonnenberg"}}, "url": "https://github.com/CMSgov/dpc-app/commit/4f8e7d580c1d95122d66be5617825b82d972428f", "committedDate": "2020-10-19T18:00:50Z", "message": "Fix tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2e30436dc8248a8fec6f79146fb5c4dfc237424", "author": {"user": {"login": "Sun-Mountain", "name": "Nicole Zonnenberg"}}, "url": "https://github.com/CMSgov/dpc-app/commit/f2e30436dc8248a8fec6f79146fb5c4dfc237424", "committedDate": "2020-10-19T18:37:07Z", "message": "Update README"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "465723a3c8826fbf4a5014c8b425a4a35a498ad1", "author": {"user": {"login": "Sun-Mountain", "name": "Nicole Zonnenberg"}}, "url": "https://github.com/CMSgov/dpc-app/commit/465723a3c8826fbf4a5014c8b425a4a35a498ad1", "committedDate": "2020-10-19T19:22:36Z", "message": "Merge branch 'master' into nz/dpc-800-static-site-separate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f01815a85b30ca167fdeb3f5d8f209cf771451d9", "author": {"user": {"login": "Sun-Mountain", "name": "Nicole Zonnenberg"}}, "url": "https://github.com/CMSgov/dpc-app/commit/f01815a85b30ca167fdeb3f5d8f209cf771451d9", "committedDate": "2020-10-19T20:09:18Z", "message": "Remove public controller"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba73c3f4826e7c4b775141823e97d428d6312bc7", "author": {"user": {"login": "Sun-Mountain", "name": "Nicole Zonnenberg"}}, "url": "https://github.com/CMSgov/dpc-app/commit/ba73c3f4826e7c4b775141823e97d428d6312bc7", "committedDate": "2020-10-20T13:07:57Z", "message": "Devise Helper Spec"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2e23e78daf4fd7f33bfacde164361bdb9cfb3a2", "author": {"user": {"login": "Sun-Mountain", "name": "Nicole Zonnenberg"}}, "url": "https://github.com/CMSgov/dpc-app/commit/f2e23e78daf4fd7f33bfacde164361bdb9cfb3a2", "committedDate": "2020-10-20T13:19:32Z", "message": "Remove SimpleCov.start"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0MDA2NjA3", "url": "https://github.com/CMSgov/dpc-app/pull/1093#pullrequestreview-514006607", "createdAt": "2020-10-21T17:34:38Z", "commit": {"oid": "f2e23e78daf4fd7f33bfacde164361bdb9cfb3a2"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNzozNDozOFrOHl4a_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNzo0MDoyN1rOHl4x6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQ4Mzc3NQ==", "bodyText": "\"There all\"?", "url": "https://github.com/CMSgov/dpc-app/pull/1093#discussion_r509483775", "createdAt": "2020-10-21T17:34:38Z", "author": {"login": "dhgreene"}, "path": "dpc-web/README.md", "diffHunk": "@@ -1,5 +1,7 @@\n # README\n-This is the *draft* version of the Data Point of Care (DPC) website. The website has functioning public static content as well as a sign-up section allowing providers to volunteer for beta-testing the DPC application. The sign-up section, and whatever functionality and specialized content that we provide signed up beta participants will require authentication to view. In addition, there is an administrator portal to manage the registration and communications with the participants.\n+This is the *draft* version of the Data Point of Care (DPC) website. The website has a sign-up section allowing providers to volunteer for beta-testing the DPC application. The sign-up section, and whatever functionality and specialized content that we provide signed up beta participants will require authentication to view. In addition, there is an administrator portal to manage the registration and communications with the participants.\n+\n+There all static public pages are now hosted on a separate static site. This may result in broken links when run locally.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2e23e78daf4fd7f33bfacde164361bdb9cfb3a2"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQ4NTMyNQ==", "bodyText": "Should we show the default port for the static site (4001)?", "url": "https://github.com/CMSgov/dpc-app/pull/1093#discussion_r509485325", "createdAt": "2020-10-21T17:36:12Z", "author": {"login": "dhgreene"}, "path": "dpc-web/README.md", "diffHunk": "@@ -105,6 +107,15 @@ If you want to switch to the sandbox environment, add the `ENV` variable:\n ENV=prod-sbx\n ```\n \n+#### Static Pages\n+\n+All static public pages are hosted in a separate [jekyll site](https://github.com/CMSgov/dpc-static-site). To run the full suite, clone and follow the local instructions for the jekyll site to run at the same time as this web app.\n+\n+You will need to add a `STATIC_SITE_URL` variable to your `.env` file:\n+\n+```\n+STATIC_SITE_URL=http://localhost:xxxx", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2e23e78daf4fd7f33bfacde164361bdb9cfb3a2"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQ4NzQwNg==", "bodyText": "If I read this correctly, this prematurely closes the <li> that we're closing 5 lines later.", "url": "https://github.com/CMSgov/dpc-app/pull/1093#discussion_r509487406", "createdAt": "2020-10-21T17:38:26Z", "author": {"login": "dhgreene"}, "path": "dpc-web/app/views/shared/_navbar.html.erb", "diffHunk": "@@ -55,7 +56,7 @@ aria-controls=\"topnav-wrap\" aria-label=\"Close menu\">\n         </li>\n \n       <% elsif internal_user_signed_in? %>\n-        <li class=\"topnav__item\">\n+        <li class=\"topnav__item\"></li>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2e23e78daf4fd7f33bfacde164361bdb9cfb3a2"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQ4OTY0MQ==", "bodyText": "Should we check for the presence of this env var when starting the app and abort if it's not present?  It seems like otherwise we're asking for bugs.\nWhile we're doing that, is it worth assigning the env var to more convenient config value, maybe something like static_site_url?", "url": "https://github.com/CMSgov/dpc-app/pull/1093#discussion_r509489641", "createdAt": "2020-10-21T17:40:27Z", "author": {"login": "dhgreene"}, "path": "dpc-web/app/views/shared/_navbar.html.erb", "diffHunk": "@@ -23,7 +24,7 @@ aria-controls=\"topnav-wrap\" aria-label=\"Close menu\">\n     </button>\n     <ul class=\"topnav\">\n       <li class=\"topnav__item\">\n-        <%= link_to \"Home\", root_path, class: \"topnav__link\"  %>\n+        <%= link_to \"Home\", ENV['STATIC_SITE_URL'], class: \"topnav__link\"  %>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2e23e78daf4fd7f33bfacde164361bdb9cfb3a2"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa7b50dd17d4121d1aedd27e1b5a96bbac8b3720", "author": {"user": {"login": "Sun-Mountain", "name": "Nicole Zonnenberg"}}, "url": "https://github.com/CMSgov/dpc-app/commit/aa7b50dd17d4121d1aedd27e1b5a96bbac8b3720", "committedDate": "2020-10-22T12:49:46Z", "message": "Small fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65ce6f20f16e346f108eea80a1253e1fec27dbb0", "author": {"user": {"login": "Sun-Mountain", "name": "Nicole Zonnenberg"}}, "url": "https://github.com/CMSgov/dpc-app/commit/65ce6f20f16e346f108eea80a1253e1fec27dbb0", "committedDate": "2020-10-22T15:36:49Z", "message": "Abort if static_site_url not present added"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "319b554672372832b562d267704e6c338de12c6b", "author": {"user": {"login": "Sun-Mountain", "name": "Nicole Zonnenberg"}}, "url": "https://github.com/CMSgov/dpc-app/commit/319b554672372832b562d267704e6c338de12c6b", "committedDate": "2020-10-22T15:51:25Z", "message": "Fix home route"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02a80ad2afb09c584ad30c806602ea0a7f361133", "author": {"user": {"login": "Sun-Mountain", "name": "Nicole Zonnenberg"}}, "url": "https://github.com/CMSgov/dpc-app/commit/02a80ad2afb09c584ad30c806602ea0a7f361133", "committedDate": "2020-10-22T16:05:59Z", "message": "Fix home route"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0OTEzMDM1", "url": "https://github.com/CMSgov/dpc-app/pull/1093#pullrequestreview-514913035", "createdAt": "2020-10-22T16:29:22Z", "commit": {"oid": "02a80ad2afb09c584ad30c806602ea0a7f361133"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92e0f75b54222d84c919961e76e53b594ff50a38", "author": {"user": {"login": "Sun-Mountain", "name": "Nicole Zonnenberg"}}, "url": "https://github.com/CMSgov/dpc-app/commit/92e0f75b54222d84c919961e76e53b594ff50a38", "committedDate": "2020-10-23T13:45:19Z", "message": "STATIC SITE URL default set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "380c82c5bb6cae1ff1d019812731593f373d4576", "author": {"user": {"login": "Sun-Mountain", "name": "Nicole Zonnenberg"}}, "url": "https://github.com/CMSgov/dpc-app/commit/380c82c5bb6cae1ff1d019812731593f373d4576", "committedDate": "2021-02-17T20:27:05Z", "message": "Fixing merge conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "acfe087d7dfcec40cda932e8fdb2f4158f22615a", "author": {"user": {"login": "Sun-Mountain", "name": "Nicole Zonnenberg"}}, "url": "https://github.com/CMSgov/dpc-app/commit/acfe087d7dfcec40cda932e8fdb2f4158f22615a", "committedDate": "2021-02-17T20:27:25Z", "message": "Merge branch 'master' into nz/dpc-800-static-site-separate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f46bc4663337ca226a32772b9c132fe1b492da69", "author": {"user": {"login": "Sun-Mountain", "name": "Nicole Zonnenberg"}}, "url": "https://github.com/CMSgov/dpc-app/commit/f46bc4663337ca226a32772b9c132fe1b492da69", "committedDate": "2021-02-22T14:34:00Z", "message": "Merge branch 'master' into nz/dpc-800-static-site-separate"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTk1NDQ4NzQx", "url": "https://github.com/CMSgov/dpc-app/pull/1093#pullrequestreview-595448741", "createdAt": "2021-02-22T15:09:46Z", "commit": {"oid": "f46bc4663337ca226a32772b9c132fe1b492da69"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ec507bd5d14bc4c427b1333fe8024715f9ff4a6", "author": {"user": {"login": "Sun-Mountain", "name": "Nicole Zonnenberg"}}, "url": "https://github.com/CMSgov/dpc-app/commit/8ec507bd5d14bc4c427b1333fe8024715f9ff4a6", "committedDate": "2021-02-23T16:56:58Z", "message": "Merge branch 'master' into nz/dpc-800-static-site-separate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2f8578d5389268d7a854f30639c58aac54e0379", "author": {"user": {"login": "Sun-Mountain", "name": "Nicole Zonnenberg"}}, "url": "https://github.com/CMSgov/dpc-app/commit/e2f8578d5389268d7a854f30639c58aac54e0379", "committedDate": "2021-02-23T17:39:21Z", "message": "Merge branch 'master' into nz/dpc-800-static-site-separate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ef9108a85706f6b3d96f8b156ba8c1c06bfa002", "author": {"user": {"login": "Sun-Mountain", "name": "Nicole Zonnenberg"}}, "url": "https://github.com/CMSgov/dpc-app/commit/8ef9108a85706f6b3d96f8b156ba8c1c06bfa002", "committedDate": "2021-03-02T20:50:14Z", "message": "Merge branch 'master' into nz/dpc-800-static-site-separate"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 299, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}