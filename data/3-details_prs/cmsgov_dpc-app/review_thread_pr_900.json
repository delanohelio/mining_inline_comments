{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ3MDI4ODQ4", "number": 900, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQyMDo0NDoxM1rOENaPAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQyMDo0NDoxM1rOENaPAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgyNDk2NzcwOnYy", "diffSide": "RIGHT", "path": "dpc-web/db/migrate/20200709181216_remove_sandbox_id_from_organizations.rb", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQyMDo0NDoxM1rOGwFGyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxOTozNToyNVrOGy5thQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA2ODQ4OA==", "bodyText": "Can you briefly explain how we plan to run this migration in our AWS environments, especially prod-sbx and prod?", "url": "https://github.com/CMSgov/dpc-app/pull/900#discussion_r453068488", "createdAt": "2020-07-10T20:44:13Z", "author": {"login": "dhgreene"}, "path": "dpc-web/db/migrate/20200709181216_remove_sandbox_id_from_organizations.rb", "diffHunk": "@@ -0,0 +1,5 @@\n+class RemoveSandboxIdFromOrganizations < ActiveRecord::Migration[6.0]\n+  def change\n+    remove_column :organizations, :sandbox_id", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d81068f48a8ea73ed871422a4228b9a2a398ae20"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE4MTU0Mw==", "bodyText": "I think I know what your asking. Migrations are run automatically in deployment. prod should not be an issue since there shouldn't be any sandbox_ids in that database.\nAs for prod-sbx, maybe we should merge the rake command, populate that branch's npi's with fake npi's and then merge the drop column.", "url": "https://github.com/CMSgov/dpc-app/pull/900#discussion_r455181543", "createdAt": "2020-07-15T16:34:46Z", "author": {"login": "Sun-Mountain"}, "path": "dpc-web/db/migrate/20200709181216_remove_sandbox_id_from_organizations.rb", "diffHunk": "@@ -0,0 +1,5 @@\n+class RemoveSandboxIdFromOrganizations < ActiveRecord::Migration[6.0]\n+  def change\n+    remove_column :organizations, :sandbox_id", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA2ODQ4OA=="}, "originalCommit": {"oid": "d81068f48a8ea73ed871422a4228b9a2a398ae20"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE4NjExNA==", "bodyText": "Attempting to upload to dev to test it out but something's weird with the deploy which seems to be a github incident issue?", "url": "https://github.com/CMSgov/dpc-app/pull/900#discussion_r455186114", "createdAt": "2020-07-15T16:42:15Z", "author": {"login": "Sun-Mountain"}, "path": "dpc-web/db/migrate/20200709181216_remove_sandbox_id_from_organizations.rb", "diffHunk": "@@ -0,0 +1,5 @@\n+class RemoveSandboxIdFromOrganizations < ActiveRecord::Migration[6.0]\n+  def change\n+    remove_column :organizations, :sandbox_id", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA2ODQ4OA=="}, "originalCommit": {"oid": "d81068f48a8ea73ed871422a4228b9a2a398ae20"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjAxNDE5MA==", "bodyText": "@dhgreene Successfully deployed to dev and was able to generate new fake npis in the same way we generated the sandbox_ids.", "url": "https://github.com/CMSgov/dpc-app/pull/900#discussion_r456014190", "createdAt": "2020-07-16T19:15:15Z", "author": {"login": "Sun-Mountain"}, "path": "dpc-web/db/migrate/20200709181216_remove_sandbox_id_from_organizations.rb", "diffHunk": "@@ -0,0 +1,5 @@\n+class RemoveSandboxIdFromOrganizations < ActiveRecord::Migration[6.0]\n+  def change\n+    remove_column :organizations, :sandbox_id", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA2ODQ4OA=="}, "originalCommit": {"oid": "d81068f48a8ea73ed871422a4228b9a2a398ae20"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjAyMzk2NA==", "bodyText": "Great!\n\nAs for prod-sbx, maybe we should merge the rake command, populate that branch's npi's with fake npi's and then merge the drop column.\n\nGiven the current way we're deploying, that would take two PR's.", "url": "https://github.com/CMSgov/dpc-app/pull/900#discussion_r456023964", "createdAt": "2020-07-16T19:30:42Z", "author": {"login": "dhgreene"}, "path": "dpc-web/db/migrate/20200709181216_remove_sandbox_id_from_organizations.rb", "diffHunk": "@@ -0,0 +1,5 @@\n+class RemoveSandboxIdFromOrganizations < ActiveRecord::Migration[6.0]\n+  def change\n+    remove_column :organizations, :sandbox_id", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA2ODQ4OA=="}, "originalCommit": {"oid": "d81068f48a8ea73ed871422a4228b9a2a398ae20"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjAyNzUyNQ==", "bodyText": "@dhgreene I can deploy the rake task to prod-sbx tomorrow to generate the npis (it won't affect anything that's currently in use). And then we can merge this PR in :)", "url": "https://github.com/CMSgov/dpc-app/pull/900#discussion_r456027525", "createdAt": "2020-07-16T19:35:25Z", "author": {"login": "Sun-Mountain"}, "path": "dpc-web/db/migrate/20200709181216_remove_sandbox_id_from_organizations.rb", "diffHunk": "@@ -0,0 +1,5 @@\n+class RemoveSandboxIdFromOrganizations < ActiveRecord::Migration[6.0]\n+  def change\n+    remove_column :organizations, :sandbox_id", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA2ODQ4OA=="}, "originalCommit": {"oid": "d81068f48a8ea73ed871422a4228b9a2a398ae20"}, "originalPosition": 3}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 103, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}