{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcwOTMzNjgx", "number": 586, "reviewThreads": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxODoyNTo1N1rODdFMLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxNjo1NjozOVrODhJEqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxODIwMzMzOnYy", "diffSide": "RIGHT", "path": "dpc-api/src/main/java/gov/cms/dpc/api/cli/keys/KeyList.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxODoyNTo1N1rOFlep-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxODoyNTo1N1rOFlep-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDg0Mzg5Nw==", "bodyText": "Similar blocks of code found in 2 locations. Consider refactoring.", "url": "https://github.com/CMSgov/dpc-app/pull/586#discussion_r374843897", "createdAt": "2020-02-04T18:25:57Z", "author": {"login": "codeclimate"}, "path": "dpc-api/src/main/java/gov/cms/dpc/api/cli/keys/KeyList.java", "diffHunk": "@@ -0,0 +1,79 @@\n+package gov.cms.dpc.api.cli.keys;\n+\n+import com.fasterxml.jackson.core.type.TypeReference;\n+import com.jakewharton.fliptables.FlipTable;\n+import gov.cms.dpc.api.cli.AbstractAdminCommand;\n+import gov.cms.dpc.api.entities.PublicKeyEntity;\n+import gov.cms.dpc.api.models.CollectionResponse;\n+import io.dropwizard.setup.Bootstrap;\n+import net.sourceforge.argparse4j.inf.Namespace;\n+import net.sourceforge.argparse4j.inf.Subparser;\n+import org.apache.http.client.methods.CloseableHttpResponse;\n+import org.apache.http.client.methods.HttpPost;\n+import org.apache.http.client.utils.URIBuilder;\n+import org.apache.http.impl.client.CloseableHttpClient;\n+import org.apache.http.impl.client.HttpClients;\n+import org.eclipse.jetty.http.HttpStatus;\n+import org.hl7.fhir.dstu3.model.IdType;\n+\n+import java.io.IOException;\n+import java.net.URISyntaxException;\n+import java.time.format.DateTimeFormatter;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+public class KeyList extends AbstractAdminCommand {\n+\n+    public KeyList() {\n+        super(\"list\", \"List public keys for registered Organization.\");\n+    }\n+\n+    @Override\n+    public void addAdditionalOptions(Subparser subparser) {\n+        subparser\n+                .addArgument(\"id\")\n+                .required(true)\n+                .dest(\"org-reference\")\n+                .help(\"ID of Organization to list tokens\");\n+    }\n+\n+    @Override\n+    public void run(Bootstrap<?> bootstrap, Namespace namespace) throws Exception {\n+        // Get the reference\n+        final String orgReference = namespace.getString(\"org-reference\");\n+        System.out.println(String.format(\"Listing keys for organization: %s.\", orgReference));\n+\n+        final String apiService = namespace.getString(API_HOSTNAME);\n+        System.out.println(String.format(\"Connecting to API service at: %s\", apiService));\n+        listKeys(apiService, orgReference);\n+    }\n+\n+    private void listKeys(String apiService, String organization) throws IOException, URISyntaxException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5869a8f1e39ce49903a33f4cfd04e9485e79992d"}, "originalPosition": 51}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxODIwMzM4OnYy", "diffSide": "RIGHT", "path": "dpc-api/src/main/java/gov/cms/dpc/api/cli/tokens/TokenList.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxODoyNTo1OFrOFlep_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxODoyNTo1OFrOFlep_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDg0MzkwMw==", "bodyText": "Similar blocks of code found in 2 locations. Consider refactoring.", "url": "https://github.com/CMSgov/dpc-app/pull/586#discussion_r374843903", "createdAt": "2020-02-04T18:25:58Z", "author": {"login": "codeclimate"}, "path": "dpc-api/src/main/java/gov/cms/dpc/api/cli/tokens/TokenList.java", "diffHunk": "@@ -53,10 +49,10 @@ public void run(Bootstrap<?> bootstrap, Namespace namespace) throws IOException,\n         listTokens(apiService, orgReference);\n     }\n \n-    private void listTokens(String attributionService, String organization) throws IOException, URISyntaxException {\n-        // List all the tokens, switching\n+    private void listTokens(String apiService, String organization) throws IOException, URISyntaxException {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5869a8f1e39ce49903a33f4cfd04e9485e79992d"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxODIwMzQyOnYy", "diffSide": "RIGHT", "path": "dpc-api/src/main/java/gov/cms/dpc/api/cli/keys/KeyDelete.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxODoyNTo1OFrOFleqBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxODoyNTo1OFrOFleqBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDg0MzkxMA==", "bodyText": "Similar blocks of code found in 2 locations. Consider refactoring.", "url": "https://github.com/CMSgov/dpc-app/pull/586#discussion_r374843910", "createdAt": "2020-02-04T18:25:58Z", "author": {"login": "codeclimate"}, "path": "dpc-api/src/main/java/gov/cms/dpc/api/cli/keys/KeyDelete.java", "diffHunk": "@@ -0,0 +1,65 @@\n+package gov.cms.dpc.api.cli.keys;\n+\n+import gov.cms.dpc.api.cli.AbstractAdminCommand;\n+import io.dropwizard.setup.Bootstrap;\n+import net.sourceforge.argparse4j.inf.Namespace;\n+import net.sourceforge.argparse4j.inf.Subparser;\n+import org.apache.http.client.methods.CloseableHttpResponse;\n+import org.apache.http.client.methods.HttpPost;\n+import org.apache.http.client.utils.URIBuilder;\n+import org.apache.http.impl.client.CloseableHttpClient;\n+import org.apache.http.impl.client.HttpClients;\n+import org.eclipse.jetty.http.HttpStatus;\n+import org.hl7.fhir.dstu3.model.IdType;\n+\n+public class KeyDelete extends AbstractAdminCommand {\n+\n+    private static final String KEY_ID = \"key-id\";\n+    private static final String ORG_REFERENCE = \"org-reference\";\n+\n+    public KeyDelete() {\n+        super(\"delete\", \"Delete public key for registered Organization.\");\n+    }\n+\n+    @Override\n+    public void addAdditionalOptions(Subparser subparser) {\n+        subparser\n+                .addArgument(\"--org\", \"-o\")\n+                .dest(\"org-reference\")\n+                .required(true)\n+                .help(\"Organization entity\");\n+        subparser\n+                .addArgument(\"id\")\n+                .required(true)\n+                .dest(KEY_ID)\n+                .help(\"ID of Public Key to delete\");\n+    }\n+\n+    @Override\n+    public void run(Bootstrap<?> bootstrap, Namespace namespace) throws Exception {\n+        // Get the reference\n+        final String orgReference = namespace.getString(ORG_REFERENCE);\n+        final String keyID = namespace.getString(KEY_ID);\n+        System.out.println(String.format(\"Deleting public key %s for organization %s\", keyID, orgReference));\n+\n+        final String apiService = namespace.getString(API_HOSTNAME);\n+        System.out.println(String.format(\"Connecting to API service at: %s\", apiService));\n+\n+        // Delete the token\n+        try (final CloseableHttpClient httpClient = HttpClients.createDefault()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5869a8f1e39ce49903a33f4cfd04e9485e79992d"}, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxODIwMzQ2OnYy", "diffSide": "RIGHT", "path": "dpc-api/src/main/java/gov/cms/dpc/api/tasks/keys/DeletePublicKey.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxODoyNTo1OFrOFleqDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxODoyNTo1OFrOFleqDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDg0MzkxNg==", "bodyText": "Similar blocks of code found in 2 locations. Consider refactoring.", "url": "https://github.com/CMSgov/dpc-app/pull/586#discussion_r374843916", "createdAt": "2020-02-04T18:25:58Z", "author": {"login": "codeclimate"}, "path": "dpc-api/src/main/java/gov/cms/dpc/api/tasks/keys/DeletePublicKey.java", "diffHunk": "@@ -0,0 +1,50 @@\n+package gov.cms.dpc.api.tasks.keys;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5869a8f1e39ce49903a33f4cfd04e9485e79992d"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxODIwMzQ4OnYy", "diffSide": "RIGHT", "path": "dpc-api/src/main/java/gov/cms/dpc/api/tasks/tokens/DeleteToken.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxODoyNTo1OVrOFleqEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxODoyNTo1OVrOFleqEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDg0MzkyMQ==", "bodyText": "Similar blocks of code found in 2 locations. Consider refactoring.", "url": "https://github.com/CMSgov/dpc-app/pull/586#discussion_r374843921", "createdAt": "2020-02-04T18:25:59Z", "author": {"login": "codeclimate"}, "path": "dpc-api/src/main/java/gov/cms/dpc/api/tasks/tokens/DeleteToken.java", "diffHunk": "@@ -1,4 +1,4 @@\n-package gov.cms.dpc.api.tasks;\n+package gov.cms.dpc.api.tasks.tokens;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5869a8f1e39ce49903a33f4cfd04e9485e79992d"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyOTA1Mjc1OnYy", "diffSide": "RIGHT", "path": "dpc-api/src/main/java/gov/cms/dpc/api/tasks/keys/ListPublicKeys.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxODo0Njo0NlrOFnGqNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxODo0Njo0NlrOFnGqNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjU0Nzg5NA==", "bodyText": "Similar blocks of code found in 2 locations. Consider refactoring.", "url": "https://github.com/CMSgov/dpc-app/pull/586#discussion_r376547894", "createdAt": "2020-02-07T18:46:46Z", "author": {"login": "codeclimate"}, "path": "dpc-api/src/main/java/gov/cms/dpc/api/tasks/keys/ListPublicKeys.java", "diffHunk": "@@ -0,0 +1,43 @@\n+package gov.cms.dpc.api.tasks.keys;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32b0a8f90565205bf3c47b85cec71136372c8b78"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyOTA1Mjc4OnYy", "diffSide": "RIGHT", "path": "dpc-api/src/main/java/gov/cms/dpc/api/tasks/tokens/ListClientTokens.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxODo0Njo0NlrOFnGqOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxODo0Njo0NlrOFnGqOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjU0Nzg5OQ==", "bodyText": "Similar blocks of code found in 2 locations. Consider refactoring.", "url": "https://github.com/CMSgov/dpc-app/pull/586#discussion_r376547899", "createdAt": "2020-02-07T18:46:46Z", "author": {"login": "codeclimate"}, "path": "dpc-api/src/main/java/gov/cms/dpc/api/tasks/tokens/ListClientTokens.java", "diffHunk": "@@ -1,7 +1,6 @@\n-package gov.cms.dpc.api.tasks;\n+package gov.cms.dpc.api.tasks.tokens;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32b0a8f90565205bf3c47b85cec71136372c8b78"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyOTA1Mjc5OnYy", "diffSide": "RIGHT", "path": "dpc-api/src/main/java/gov/cms/dpc/api/cli/keys/KeyDelete.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxODo0Njo0NlrOFnGqPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxODo0Njo0NlrOFnGqPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjU0NzkwMA==", "bodyText": "Replace this use of System.out or System.err by a logger.", "url": "https://github.com/CMSgov/dpc-app/pull/586#discussion_r376547900", "createdAt": "2020-02-07T18:46:46Z", "author": {"login": "codeclimate"}, "path": "dpc-api/src/main/java/gov/cms/dpc/api/cli/keys/KeyDelete.java", "diffHunk": "@@ -0,0 +1,65 @@\n+package gov.cms.dpc.api.cli.keys;\n+\n+import gov.cms.dpc.api.cli.AbstractAdminCommand;\n+import io.dropwizard.setup.Bootstrap;\n+import net.sourceforge.argparse4j.inf.Namespace;\n+import net.sourceforge.argparse4j.inf.Subparser;\n+import org.apache.http.client.methods.CloseableHttpResponse;\n+import org.apache.http.client.methods.HttpPost;\n+import org.apache.http.client.utils.URIBuilder;\n+import org.apache.http.impl.client.CloseableHttpClient;\n+import org.apache.http.impl.client.HttpClients;\n+import org.eclipse.jetty.http.HttpStatus;\n+import org.hl7.fhir.dstu3.model.IdType;\n+\n+public class KeyDelete extends AbstractAdminCommand {\n+\n+    private static final String KEY_ID = \"key-id\";\n+    private static final String ORG_REFERENCE = \"org-reference\";\n+\n+    public KeyDelete() {\n+        super(\"delete\", \"Delete public key for registered Organization.\");\n+    }\n+\n+    @Override\n+    public void addAdditionalOptions(Subparser subparser) {\n+        subparser\n+                .addArgument(\"--org\", \"-o\")\n+                .dest(\"org-reference\")\n+                .required(true)\n+                .help(\"Organization entity\");\n+        subparser\n+                .addArgument(\"id\")\n+                .required(true)\n+                .dest(KEY_ID)\n+                .help(\"ID of Public Key to delete\");\n+    }\n+\n+    @Override\n+    public void run(Bootstrap<?> bootstrap, Namespace namespace) throws Exception {\n+        // Get the reference\n+        final String orgReference = namespace.getString(ORG_REFERENCE);\n+        final String keyID = namespace.getString(KEY_ID);\n+        System.out.println(String.format(\"Deleting public key %s for organization %s\", keyID, orgReference));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32b0a8f90565205bf3c47b85cec71136372c8b78"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyOTA1MjgxOnYy", "diffSide": "RIGHT", "path": "dpc-api/src/main/java/gov/cms/dpc/api/cli/keys/KeyDelete.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxODo0Njo0N1rOFnGqPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxODo0Njo0N1rOFnGqPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjU0NzkwMg==", "bodyText": "Replace this use of System.out or System.err by a logger.", "url": "https://github.com/CMSgov/dpc-app/pull/586#discussion_r376547902", "createdAt": "2020-02-07T18:46:47Z", "author": {"login": "codeclimate"}, "path": "dpc-api/src/main/java/gov/cms/dpc/api/cli/keys/KeyDelete.java", "diffHunk": "@@ -0,0 +1,65 @@\n+package gov.cms.dpc.api.cli.keys;\n+\n+import gov.cms.dpc.api.cli.AbstractAdminCommand;\n+import io.dropwizard.setup.Bootstrap;\n+import net.sourceforge.argparse4j.inf.Namespace;\n+import net.sourceforge.argparse4j.inf.Subparser;\n+import org.apache.http.client.methods.CloseableHttpResponse;\n+import org.apache.http.client.methods.HttpPost;\n+import org.apache.http.client.utils.URIBuilder;\n+import org.apache.http.impl.client.CloseableHttpClient;\n+import org.apache.http.impl.client.HttpClients;\n+import org.eclipse.jetty.http.HttpStatus;\n+import org.hl7.fhir.dstu3.model.IdType;\n+\n+public class KeyDelete extends AbstractAdminCommand {\n+\n+    private static final String KEY_ID = \"key-id\";\n+    private static final String ORG_REFERENCE = \"org-reference\";\n+\n+    public KeyDelete() {\n+        super(\"delete\", \"Delete public key for registered Organization.\");\n+    }\n+\n+    @Override\n+    public void addAdditionalOptions(Subparser subparser) {\n+        subparser\n+                .addArgument(\"--org\", \"-o\")\n+                .dest(\"org-reference\")\n+                .required(true)\n+                .help(\"Organization entity\");\n+        subparser\n+                .addArgument(\"id\")\n+                .required(true)\n+                .dest(KEY_ID)\n+                .help(\"ID of Public Key to delete\");\n+    }\n+\n+    @Override\n+    public void run(Bootstrap<?> bootstrap, Namespace namespace) throws Exception {\n+        // Get the reference\n+        final String orgReference = namespace.getString(ORG_REFERENCE);\n+        final String keyID = namespace.getString(KEY_ID);\n+        System.out.println(String.format(\"Deleting public key %s for organization %s\", keyID, orgReference));\n+\n+        final String apiService = namespace.getString(API_HOSTNAME);\n+        System.out.println(String.format(\"Connecting to API service at: %s\", apiService));\n+\n+        // Delete the token\n+        try (final CloseableHttpClient httpClient = HttpClients.createDefault()) {\n+            final URIBuilder builder = new URIBuilder(String.format(\"%s/delete-key\", apiService));\n+            builder.setParameter(\"organization\", new IdType(orgReference).getIdPart());\n+            builder.setParameter(\"key\", keyID);\n+            final HttpPost keyDelete = new HttpPost(builder.build());\n+\n+            try (CloseableHttpResponse response = httpClient.execute(keyDelete)) {\n+                if (!HttpStatus.isSuccess(response.getStatusLine().getStatusCode())) {\n+                    System.err.println(\"Error deleting key: \" + response.getStatusLine().getReasonPhrase());\n+                    System.exit(1);\n+                }\n+            }\n+        }\n+\n+        System.out.println(\"Successfully deleted public key\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32b0a8f90565205bf3c47b85cec71136372c8b78"}, "originalPosition": 63}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyOTA1MjgzOnYy", "diffSide": "RIGHT", "path": "dpc-api/src/main/java/gov/cms/dpc/api/cli/keys/KeyList.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxODo0Njo0N1rOFnGqQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxODo0Njo0N1rOFnGqQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjU0NzkwNg==", "bodyText": "Similar blocks of code found in 2 locations. Consider refactoring.", "url": "https://github.com/CMSgov/dpc-app/pull/586#discussion_r376547906", "createdAt": "2020-02-07T18:46:47Z", "author": {"login": "codeclimate"}, "path": "dpc-api/src/main/java/gov/cms/dpc/api/cli/keys/KeyList.java", "diffHunk": "@@ -0,0 +1,79 @@\n+package gov.cms.dpc.api.cli.keys;\n+\n+import com.fasterxml.jackson.core.type.TypeReference;\n+import com.jakewharton.fliptables.FlipTable;\n+import gov.cms.dpc.api.cli.AbstractAdminCommand;\n+import gov.cms.dpc.api.entities.PublicKeyEntity;\n+import gov.cms.dpc.api.models.CollectionResponse;\n+import io.dropwizard.setup.Bootstrap;\n+import net.sourceforge.argparse4j.inf.Namespace;\n+import net.sourceforge.argparse4j.inf.Subparser;\n+import org.apache.http.client.methods.CloseableHttpResponse;\n+import org.apache.http.client.methods.HttpPost;\n+import org.apache.http.client.utils.URIBuilder;\n+import org.apache.http.impl.client.CloseableHttpClient;\n+import org.apache.http.impl.client.HttpClients;\n+import org.eclipse.jetty.http.HttpStatus;\n+import org.hl7.fhir.dstu3.model.IdType;\n+\n+import java.io.IOException;\n+import java.net.URISyntaxException;\n+import java.time.format.DateTimeFormatter;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+public class KeyList extends AbstractAdminCommand {\n+\n+    public KeyList() {\n+        super(\"list\", \"List public keys for registered Organization.\");\n+    }\n+\n+    @Override\n+    public void addAdditionalOptions(Subparser subparser) {\n+        subparser\n+                .addArgument(\"id\")\n+                .required(true)\n+                .dest(\"org-reference\")\n+                .help(\"ID of Organization to list tokens\");\n+    }\n+\n+    @Override", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32b0a8f90565205bf3c47b85cec71136372c8b78"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM0NzkwMTI5OnYy", "diffSide": "RIGHT", "path": "dpc-api/src/main/java/gov/cms/dpc/api/cli/keys/KeyCommand.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxNDo0ODoxNFrOFp49oQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNDo0NzowMVrOFrFIjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTQ2OTIxNw==", "bodyText": "Register subcommands here. See details in other comment.", "url": "https://github.com/CMSgov/dpc-app/pull/586#discussion_r379469217", "createdAt": "2020-02-14T14:48:14Z", "author": {"login": "DeirdreHolub"}, "path": "dpc-api/src/main/java/gov/cms/dpc/api/cli/keys/KeyCommand.java", "diffHunk": "@@ -0,0 +1,10 @@\n+package gov.cms.dpc.api.cli.keys;\n+\n+import gov.cms.dpc.api.cli.AbstractCommandTree;\n+\n+public class KeyCommand extends AbstractCommandTree {\n+\n+    protected KeyCommand() {\n+        super(\"key\", \"Public key related commands\");\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d7c5974460ab89bf0388cc3fe2fa4c35963f69f"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDcxNzE5Ng==", "bodyText": "Well that was embarrassing, thanks for catching it!", "url": "https://github.com/CMSgov/dpc-app/pull/586#discussion_r380717196", "createdAt": "2020-02-18T14:47:01Z", "author": {"login": "nickrobison-usds"}, "path": "dpc-api/src/main/java/gov/cms/dpc/api/cli/keys/KeyCommand.java", "diffHunk": "@@ -0,0 +1,10 @@\n+package gov.cms.dpc.api.cli.keys;\n+\n+import gov.cms.dpc.api.cli.AbstractCommandTree;\n+\n+public class KeyCommand extends AbstractCommandTree {\n+\n+    protected KeyCommand() {\n+        super(\"key\", \"Public key related commands\");\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTQ2OTIxNw=="}, "originalCommit": {"oid": "1d7c5974460ab89bf0388cc3fe2fa4c35963f69f"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2MDE5NDgyOnYy", "diffSide": "RIGHT", "path": "dpc-api/src/main/java/gov/cms/dpc/api/cli/keys/KeyUpload.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxNDoxNTowNVrOFrprqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxNDoxNTowNVrOFrprqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTMxNjAwOA==", "bodyText": "Should this say something more like, ID of organization to upload key for?", "url": "https://github.com/CMSgov/dpc-app/pull/586#discussion_r381316008", "createdAt": "2020-02-19T14:15:05Z", "author": {"login": "em1"}, "path": "dpc-api/src/main/java/gov/cms/dpc/api/cli/keys/KeyUpload.java", "diffHunk": "@@ -0,0 +1,92 @@\n+package gov.cms.dpc.api.cli.keys;\n+\n+import gov.cms.dpc.api.cli.AbstractAdminCommand;\n+import io.dropwizard.setup.Bootstrap;\n+import net.sourceforge.argparse4j.inf.Namespace;\n+import net.sourceforge.argparse4j.inf.Subparser;\n+import org.apache.http.HttpHeaders;\n+import org.apache.http.client.methods.CloseableHttpResponse;\n+import org.apache.http.client.methods.HttpPost;\n+import org.apache.http.client.utils.URIBuilder;\n+import org.apache.http.entity.StringEntity;\n+import org.apache.http.impl.client.CloseableHttpClient;\n+import org.apache.http.impl.client.HttpClients;\n+import org.apache.http.util.EntityUtils;\n+import org.eclipse.jetty.http.HttpStatus;\n+import org.hl7.fhir.dstu3.model.IdType;\n+\n+import javax.ws.rs.core.MediaType;\n+import java.io.IOException;\n+import java.net.URISyntaxException;\n+import java.nio.file.FileSystems;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.util.Optional;\n+\n+public class KeyUpload extends AbstractAdminCommand {\n+\n+    private static final String KEY_FILE = \"key-file\";\n+\n+    public KeyUpload() {\n+        super(\"upload\", \"Upload organization public key\");\n+    }\n+\n+    @Override\n+    public void addAdditionalOptions(Subparser subparser) {\n+        subparser\n+                .addArgument(\"id\")\n+                .required(true)\n+                .dest(\"org-reference\")\n+                .help(\"ID of Organization to list tokens\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ea5e581b31a99f9fb71a7b6a5e37caa74278363"}, "originalPosition": 40}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2MDc4MjQ5OnYy", "diffSide": "RIGHT", "path": "dpc-api/src/main/java/gov/cms/dpc/api/cli/keys/KeyUpload.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxNjo1NjozOVrOFrvWWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxNjo1NjozOVrOFrvWWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQwODg1Nw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            .help(\"ID of Organization to upload keys tokens\");\n          \n          \n            \n                            .help(\"ID of Organization to upload key\");", "url": "https://github.com/CMSgov/dpc-app/pull/586#discussion_r381408857", "createdAt": "2020-02-19T16:56:39Z", "author": {"login": "em1"}, "path": "dpc-api/src/main/java/gov/cms/dpc/api/cli/keys/KeyUpload.java", "diffHunk": "@@ -0,0 +1,92 @@\n+package gov.cms.dpc.api.cli.keys;\n+\n+import gov.cms.dpc.api.cli.AbstractAdminCommand;\n+import io.dropwizard.setup.Bootstrap;\n+import net.sourceforge.argparse4j.inf.Namespace;\n+import net.sourceforge.argparse4j.inf.Subparser;\n+import org.apache.http.HttpHeaders;\n+import org.apache.http.client.methods.CloseableHttpResponse;\n+import org.apache.http.client.methods.HttpPost;\n+import org.apache.http.client.utils.URIBuilder;\n+import org.apache.http.entity.StringEntity;\n+import org.apache.http.impl.client.CloseableHttpClient;\n+import org.apache.http.impl.client.HttpClients;\n+import org.apache.http.util.EntityUtils;\n+import org.eclipse.jetty.http.HttpStatus;\n+import org.hl7.fhir.dstu3.model.IdType;\n+\n+import javax.ws.rs.core.MediaType;\n+import java.io.IOException;\n+import java.net.URISyntaxException;\n+import java.nio.file.FileSystems;\n+import java.nio.file.Files;\n+import java.nio.file.Path;\n+import java.util.Optional;\n+\n+public class KeyUpload extends AbstractAdminCommand {\n+\n+    private static final String KEY_FILE = \"key-file\";\n+\n+    public KeyUpload() {\n+        super(\"upload\", \"Upload organization public key\");\n+    }\n+\n+    @Override\n+    public void addAdditionalOptions(Subparser subparser) {\n+        subparser\n+                .addArgument(\"id\")\n+                .required(true)\n+                .dest(\"org-reference\")\n+                .help(\"ID of Organization to upload keys tokens\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "372f791f7d437d5f26bbf2c69fcded023eb1cd45"}, "originalPosition": 40}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4966, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}