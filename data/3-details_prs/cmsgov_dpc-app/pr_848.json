{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzMTE3NjU5", "number": 848, "title": "DPC-85 add location and lastupdated (if set) to headers", "bodyText": "Why\nTo align with FHIR, adding location and last modified headers\nWhat Changed\nAdded the location and last modified date (when available) to the bundle\nChoices Made\nDid not change the code for organization to have last modified date as that table doesn't contain those columns so it's a heavier lift.\nTickets closed:\nhttps://jira.cms.gov/browse/DPC-85\nFuture Work\nList any additional tickets that have either been created due to work in this PR, or existing tickets that expand upon the feature or provide additional fixes.\nChecklist\n\n All tests are passing via make ci-app (app change) and make ci-web (website change)\n Swagger documentation has been updated\n FHIR documentation has been updated\n Any required dpc-ops changes have a PR submitted and mentioned in this ticket\n Any manual migration steps are documented, scripts written (where applicable), and tested\n Before merging, any required dpc-ops changes have been approved and merged into master of the dpc-ops repo", "createdAt": "2020-06-11T14:26:44Z", "url": "https://github.com/CMSgov/dpc-app/pull/848", "merged": true, "mergeCommit": {"oid": "5c06c5de7a92877a5c58737f8292664f20ff3258"}, "closed": true, "closedAt": "2020-06-26T03:34:21Z", "author": {"login": "MrBilnon"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqC02JAH2gAyNDMzMTE3NjU5OmFlNDI2MjNkNWUwNThlZDg1YzZiNTdkYmNjZTM4YjkxYjRhNTc0NWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcu1aoFgFqTQzNzg2NzE3Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ae42623d5e058ed85c6b57dbcce38b91b4a5745b", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/ae42623d5e058ed85c6b57dbcce38b91b4a5745b", "committedDate": "2020-06-11T00:08:26Z", "message": "add location and lastupdated (if set) to headers"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef0bf0589b3d9225fad39106c2da8b953cee2fbc", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/ef0bf0589b3d9225fad39106c2da8b953cee2fbc", "committedDate": "2020-06-11T14:31:05Z", "message": "Merge branch 'master' into wh/DPC-85-add-location-and-last-modified-to-resource-creation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNjExODIw", "url": "https://github.com/CMSgov/dpc-app/pull/848#pullrequestreview-433611820", "createdAt": "2020-06-18T20:10:25Z", "commit": {"oid": "ef0bf0589b3d9225fad39106c2da8b953cee2fbc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66775fdf3296637ce96af1b10d82c879beea2948", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/66775fdf3296637ce96af1b10d82c879beea2948", "committedDate": "2020-06-25T20:00:24Z", "message": "Merge branch 'master' into wh/DPC-85-add-location-and-last-modified-to-resource-creation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0fa6758be80591449d927c33d92f5ae22eb228dc", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/0fa6758be80591449d927c33d92f5ae22eb228dc", "committedDate": "2020-06-25T20:34:20Z", "message": "missing import after merge"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3ODQ1MjA4", "url": "https://github.com/CMSgov/dpc-app/pull/848#pullrequestreview-437845208", "createdAt": "2020-06-25T20:45:14Z", "commit": {"oid": "0fa6758be80591449d927c33d92f5ae22eb228dc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQyMDo0NToxNFrOGpLKpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQyMDo0NToxNFrOGpLKpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTgyNzc0OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public static Practitioner createPractitionerResource(String NPI, String orgID) {\n          \n          \n            \n                public static Practitioner createPractitionerResource(String npi, String orgID) {\n          \n      \n    \n    \n  \n\nWould you be okay with making this and the MBI parameter in createPatientResource() lowercase? Might get mistaken for constants if someone is scanning the code quickly.", "url": "https://github.com/CMSgov/dpc-app/pull/848#discussion_r445827749", "createdAt": "2020-06-25T20:45:14Z", "author": {"login": "em1"}, "path": "dpc-api/src/test/java/gov/cms/dpc/api/APITestHelpers.java", "diffHunk": "@@ -199,4 +198,33 @@ private static Validator provideValidator(InjectingConstraintValidatorFactory fa\n                 .configure().constraintValidatorFactory(factory)\n                 .buildValidatorFactory().getValidator();\n     }\n+\n+    public static Practitioner createPractitionerResource(String NPI, String orgID) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fa6758be80591449d927c33d92f5ae22eb228dc"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6227935c2c8f60c746642af5d19c52ef0ef438e0", "author": {"user": {"login": "MrBilnon", "name": "Will H"}}, "url": "https://github.com/CMSgov/dpc-app/commit/6227935c2c8f60c746642af5d19c52ef0ef438e0", "committedDate": "2020-06-25T20:48:00Z", "message": "lower case variables"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3ODUzNjI2", "url": "https://github.com/CMSgov/dpc-app/pull/848#pullrequestreview-437853626", "createdAt": "2020-06-25T20:58:19Z", "commit": {"oid": "6227935c2c8f60c746642af5d19c52ef0ef438e0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQyMDo1ODoxOVrOGpLkBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNVQyMDo1ODoxOVrOGpLkBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTgzNDI0NQ==", "bodyText": "Do these need to be Location and Last-Modified? Or is it case insensitive?", "url": "https://github.com/CMSgov/dpc-app/pull/848#discussion_r445834245", "createdAt": "2020-06-25T20:58:19Z", "author": {"login": "em1"}, "path": "dpc-api/src/test/java/gov/cms/dpc/api/resources/v1/PatientResourceTest.java", "diffHunk": "@@ -245,4 +244,33 @@ void testCreateInvalidPatient() throws IOException, URISyntaxException {\n \n         conn.disconnect();\n     }\n+\n+    @Test\n+    public void testCreatePatientReturnsAppropriateHeaders() {\n+        IGenericClient client = APIAuthHelpers.buildAuthenticatedClient(ctx, getBaseURL(), ORGANIZATION_TOKEN, PUBLIC_KEY_ID, PRIVATE_KEY);\n+        Patient patient = APITestHelpers.createPatientResource(\"4S41C00AA00\", APITestHelpers.ORGANIZATION_ID);\n+\n+        MethodOutcome methodOutcome = client.create()\n+                .resource(patient)\n+                .encodedJson()\n+                .execute();\n+\n+        String location = methodOutcome.getResponseHeaders().get(\"location\").get(0);\n+        String date = methodOutcome.getResponseHeaders().get(\"last-modified\").get(0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6227935c2c8f60c746642af5d19c52ef0ef438e0"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3ODY3MTcy", "url": "https://github.com/CMSgov/dpc-app/pull/848#pullrequestreview-437867172", "createdAt": "2020-06-25T21:20:39Z", "commit": {"oid": "6227935c2c8f60c746642af5d19c52ef0ef438e0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 487, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}