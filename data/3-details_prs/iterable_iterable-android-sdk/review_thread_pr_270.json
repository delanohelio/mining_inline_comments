{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAyNTEzOTIx", "number": 270, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNzozMjo1MlrOEtJm9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNzozMjo1MlrOEtJm9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1Nzc4ODA2OnYy", "diffSide": "RIGHT", "path": "iterableapi/src/main/java/com/iterable/iterableapi/IterableApi.java", "isResolved": false, "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNzozMjo1MlrOHgyBQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxOToyOTo1NlrOHg2MFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDEzNjAwMQ==", "bodyText": "I think we can just leave the first part of the check (authToken != null && !authToken.equalsIgnoreCase(_authToken)).\nIt will return true if the new token is not null and is different from the current one. The second condition enables one case: when the new token is null and the old token is not null. I'm not sure when we could encounter that and not sure if we want to run login in that case.", "url": "https://github.com/Iterable/iterable-android-sdk/pull/270#discussion_r504136001", "createdAt": "2020-10-13T17:32:52Z", "author": {"login": "vbabenkoru"}, "path": "iterableapi/src/main/java/com/iterable/iterableapi/IterableApi.java", "diffHunk": "@@ -221,11 +221,11 @@ void setNotificationData(IterableNotificationData data) {\n \n     void setAuthToken(String authToken) {\n         if (isInitialized()) {\n-            if (_authToken != authToken) {\n+            if ((authToken != null && !authToken.equalsIgnoreCase(_authToken)) || (_authToken != null && !_authToken.equalsIgnoreCase(authToken))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad171b9c24815851be43d1cae97bb422715f5779"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDE0MTc1OQ==", "bodyText": "Don't we need the second case for the logout case?\nWhen setting the email to null, shouldn't we also be removing the authToken.", "url": "https://github.com/Iterable/iterable-android-sdk/pull/270#discussion_r504141759", "createdAt": "2020-10-13T17:43:33Z", "author": {"login": "davidtruong"}, "path": "iterableapi/src/main/java/com/iterable/iterableapi/IterableApi.java", "diffHunk": "@@ -221,11 +221,11 @@ void setNotificationData(IterableNotificationData data) {\n \n     void setAuthToken(String authToken) {\n         if (isInitialized()) {\n-            if (_authToken != authToken) {\n+            if ((authToken != null && !authToken.equalsIgnoreCase(_authToken)) || (_authToken != null && !_authToken.equalsIgnoreCase(authToken))) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDEzNjAwMQ=="}, "originalCommit": {"oid": "ad171b9c24815851be43d1cae97bb422715f5779"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDE0ODczOQ==", "bodyText": "If email is null, isInitialized() will be false and the inner conditional won't be executed.", "url": "https://github.com/Iterable/iterable-android-sdk/pull/270#discussion_r504148739", "createdAt": "2020-10-13T17:54:50Z", "author": {"login": "vbabenkoru"}, "path": "iterableapi/src/main/java/com/iterable/iterableapi/IterableApi.java", "diffHunk": "@@ -221,11 +221,11 @@ void setNotificationData(IterableNotificationData data) {\n \n     void setAuthToken(String authToken) {\n         if (isInitialized()) {\n-            if (_authToken != authToken) {\n+            if ((authToken != null && !authToken.equalsIgnoreCase(_authToken)) || (_authToken != null && !_authToken.equalsIgnoreCase(authToken))) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDEzNjAwMQ=="}, "originalCommit": {"oid": "ad171b9c24815851be43d1cae97bb422715f5779"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDE5MTIxNQ==", "bodyText": "Does this flow allow us to set authToken to null?", "url": "https://github.com/Iterable/iterable-android-sdk/pull/270#discussion_r504191215", "createdAt": "2020-10-13T19:05:54Z", "author": {"login": "Ayyanchira"}, "path": "iterableapi/src/main/java/com/iterable/iterableapi/IterableApi.java", "diffHunk": "@@ -221,11 +221,11 @@ void setNotificationData(IterableNotificationData data) {\n \n     void setAuthToken(String authToken) {\n         if (isInitialized()) {\n-            if (_authToken != authToken) {\n+            if ((authToken != null && !authToken.equalsIgnoreCase(_authToken)) || (_authToken != null && !_authToken.equalsIgnoreCase(authToken))) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDEzNjAwMQ=="}, "originalCommit": {"oid": "ad171b9c24815851be43d1cae97bb422715f5779"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDE5MTY3NQ==", "bodyText": "It does...", "url": "https://github.com/Iterable/iterable-android-sdk/pull/270#discussion_r504191675", "createdAt": "2020-10-13T19:06:49Z", "author": {"login": "Ayyanchira"}, "path": "iterableapi/src/main/java/com/iterable/iterableapi/IterableApi.java", "diffHunk": "@@ -221,11 +221,11 @@ void setNotificationData(IterableNotificationData data) {\n \n     void setAuthToken(String authToken) {\n         if (isInitialized()) {\n-            if (_authToken != authToken) {\n+            if ((authToken != null && !authToken.equalsIgnoreCase(_authToken)) || (_authToken != null && !_authToken.equalsIgnoreCase(authToken))) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDEzNjAwMQ=="}, "originalCommit": {"oid": "ad171b9c24815851be43d1cae97bb422715f5779"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDE5MzA5MA==", "bodyText": "Oh yeah, you're right. If current token is not null, we can set it to null. If it's already null, we don't do anything.", "url": "https://github.com/Iterable/iterable-android-sdk/pull/270#discussion_r504193090", "createdAt": "2020-10-13T19:09:26Z", "author": {"login": "vbabenkoru"}, "path": "iterableapi/src/main/java/com/iterable/iterableapi/IterableApi.java", "diffHunk": "@@ -221,11 +221,11 @@ void setNotificationData(IterableNotificationData data) {\n \n     void setAuthToken(String authToken) {\n         if (isInitialized()) {\n-            if (_authToken != authToken) {\n+            if ((authToken != null && !authToken.equalsIgnoreCase(_authToken)) || (_authToken != null && !_authToken.equalsIgnoreCase(authToken))) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDEzNjAwMQ=="}, "originalCommit": {"oid": "ad171b9c24815851be43d1cae97bb422715f5779"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDIwNDMwOQ==", "bodyText": "But then we will never be able to set it to null...", "url": "https://github.com/Iterable/iterable-android-sdk/pull/270#discussion_r504204309", "createdAt": "2020-10-13T19:29:56Z", "author": {"login": "Ayyanchira"}, "path": "iterableapi/src/main/java/com/iterable/iterableapi/IterableApi.java", "diffHunk": "@@ -221,11 +221,11 @@ void setNotificationData(IterableNotificationData data) {\n \n     void setAuthToken(String authToken) {\n         if (isInitialized()) {\n-            if (_authToken != authToken) {\n+            if ((authToken != null && !authToken.equalsIgnoreCase(_authToken)) || (_authToken != null && !_authToken.equalsIgnoreCase(authToken))) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDEzNjAwMQ=="}, "originalCommit": {"oid": "ad171b9c24815851be43d1cae97bb422715f5779"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2198, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}