{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3NzE5Njc0", "number": 3172, "title": "RHPAM-1344 - Process ID accepts invalid characters", "bodyText": "Validation of Process ID is aligned to the jBPM Engine now, so if Process ID is valid in the UI it will be 100% compatible at runtime (no issues/warnings/errors during process execution).\nRemaining questions\nHi @krisv, @romartin, @LuboTerifaj, I have some questions related to this Jira issue:\n\n How to save the process if ID is not correct? Encode? Clear ID from non-valid symbols? Prevent process save?\n Should I also handle Process ID during process creation (using already created validator) in this PR or I should create new Jira issue for it?\n\nTBD\n\n deal with non-valid IDs\n missing tests\n Sonar Cloud issues if any", "createdAt": "2020-02-20T12:09:14Z", "url": "https://github.com/kiegroup/kie-wb-common/pull/3172", "merged": true, "mergeCommit": {"oid": "9ae96049fd1da096cd01ee43e3bd8cce16266612"}, "closed": true, "closedAt": "2020-04-12T21:32:10Z", "author": {"login": "hasys"}, "timelineItems": {"totalCount": 37, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcHmGkPgBqjMwNjczODQ3ODU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcV-CivgBqjMyMTg3NTM3NTc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8e6f2942e5f3a7a361fb565b6ed042af07a767e3", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/8e6f2942e5f3a7a361fb565b6ed042af07a767e3", "committedDate": "2020-02-20T12:00:29Z", "message": "RHPAM-1344 - Process ID accepts invalid characters"}, "afterCommit": {"oid": "71c486c8e518c5339faa8e91738020727624278b", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/71c486c8e518c5339faa8e91738020727624278b", "committedDate": "2020-02-24T23:26:07Z", "message": "RHPAM-1344 - Process ID accepts invalid characters"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0NDU1Mzk0", "url": "https://github.com/kiegroup/kie-wb-common/pull/3172#pullrequestreview-364455394", "createdAt": "2020-02-25T21:19:06Z", "commit": {"oid": "71c486c8e518c5339faa8e91738020727624278b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0NDU1Mjg4", "url": "https://github.com/kiegroup/kie-wb-common/pull/3172#pullrequestreview-364455288", "createdAt": "2020-02-25T21:18:54Z", "commit": {"oid": "71c486c8e518c5339faa8e91738020727624278b"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQyMToxODo1NFrOFuVjpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQyMToxODo1NFrOFuVjpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDEzMjAwNA==", "bodyText": "I believe we're encouraged to use Stunner's StringUtils.isEmpty(..).", "url": "https://github.com/kiegroup/kie-wb-common/pull/3172#discussion_r384132004", "createdAt": "2020-02-25T21:18:54Z", "author": {"login": "manstis"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-api/src/main/java/org/kie/workbench/common/stunner/bpmn/forms/validation/process/ProcessIdValueValidator.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.workbench.common.stunner.bpmn.forms.validation.process;\n+\n+import javax.validation.ConstraintValidator;\n+import javax.validation.ConstraintValidatorContext;\n+\n+import static org.kie.workbench.common.stunner.bpmn.util.XmlUtils.isNcNameCharacter;\n+import static org.kie.workbench.common.stunner.bpmn.util.XmlUtils.isNcNameStartCharacter;\n+\n+public class ProcessIdValueValidator implements ConstraintValidator<ValidProcessIdValue, String> {\n+\n+    @Override\n+    public void initialize(ValidProcessIdValue constraintAnnotation) {\n+        //not used\n+    }\n+\n+    @Override\n+    public boolean isValid(String value, ConstraintValidatorContext context) {\n+        if (value == null || value.isEmpty()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71c486c8e518c5339faa8e91738020727624278b"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY3OTIyMjE2", "url": "https://github.com/kiegroup/kie-wb-common/pull/3172#pullrequestreview-367922216", "createdAt": "2020-03-03T12:04:22Z", "commit": {"oid": "e709016e34d9ba558b599b8e6c136097020268e8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e709016e34d9ba558b599b8e6c136097020268e8", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/e709016e34d9ba558b599b8e6c136097020268e8", "committedDate": "2020-02-26T16:43:19Z", "message": "StringUtils"}, "afterCommit": {"oid": "7da82b3afabeff29901d9ec02c04356decfeb64b", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/7da82b3afabeff29901d9ec02c04356decfeb64b", "committedDate": "2020-03-03T16:25:42Z", "message": "New processes names cleared"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5MTQwMzAx", "url": "https://github.com/kiegroup/kie-wb-common/pull/3172#pullrequestreview-369140301", "createdAt": "2020-03-04T21:35:34Z", "commit": {"oid": "7da82b3afabeff29901d9ec02c04356decfeb64b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NDcwNjU2", "url": "https://github.com/kiegroup/kie-wb-common/pull/3172#pullrequestreview-369470656", "createdAt": "2020-03-05T10:53:03Z", "commit": {"oid": "7da82b3afabeff29901d9ec02c04356decfeb64b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7da82b3afabeff29901d9ec02c04356decfeb64b", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/7da82b3afabeff29901d9ec02c04356decfeb64b", "committedDate": "2020-03-03T16:25:42Z", "message": "New processes names cleared"}, "afterCommit": {"oid": "73476f05952061c592ae2886191aea6353acf6b6", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/73476f05952061c592ae2886191aea6353acf6b6", "committedDate": "2020-03-23T20:36:08Z", "message": "Clean up, tests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "73476f05952061c592ae2886191aea6353acf6b6", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/73476f05952061c592ae2886191aea6353acf6b6", "committedDate": "2020-03-23T20:36:08Z", "message": "Clean up, tests"}, "afterCommit": {"oid": "1dd0571f1ca27cc4ba07d01d386234abe763e0a5", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/1dd0571f1ca27cc4ba07d01d386234abe763e0a5", "committedDate": "2020-03-25T16:38:21Z", "message": "Rebase to master, addition coverage."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxOTQwNTkz", "url": "https://github.com/kiegroup/kie-wb-common/pull/3172#pullrequestreview-381940593", "createdAt": "2020-03-26T12:01:36Z", "commit": {"oid": "fa36abc343a1e13250b96c1fd5beea9497004a51"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fa36abc343a1e13250b96c1fd5beea9497004a51", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/fa36abc343a1e13250b96c1fd5beea9497004a51", "committedDate": "2020-03-26T03:43:54Z", "message": "Enable disabled test"}, "afterCommit": {"oid": "d4dd7a69ea5b7bb864a0b2dd7bbc7e798e3280a2", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/d4dd7a69ea5b7bb864a0b2dd7bbc7e798e3280a2", "committedDate": "2020-03-27T09:14:18Z", "message": "Enable disabled test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMDkxMzQz", "url": "https://github.com/kiegroup/kie-wb-common/pull/3172#pullrequestreview-383091343", "createdAt": "2020-03-27T18:07:52Z", "commit": {"oid": "d4dd7a69ea5b7bb864a0b2dd7bbc7e798e3280a2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMjMwMTIx", "url": "https://github.com/kiegroup/kie-wb-common/pull/3172#pullrequestreview-383230121", "createdAt": "2020-03-27T22:16:20Z", "commit": {"oid": "d4dd7a69ea5b7bb864a0b2dd7bbc7e798e3280a2"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QyMjoxNjoyMFrOF9DYGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QyMjozMTo0N1rOF9DqHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTU2Mjc3OQ==", "bodyText": "I don't think this javadoc provides any useful info, I would just suggest to remove it, the mehtod's name is quite clear...", "url": "https://github.com/kiegroup/kie-wb-common/pull/3172#discussion_r399562779", "createdAt": "2020-03-27T22:16:20Z", "author": {"login": "romartin"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-extensions/kie-wb-common-stunner-kogito/kie-wb-common-stunner-kogito-client/src/main/java/org/kie/workbench/common/stunner/kogito/client/service/AbstractKogitoClientDiagramService.java", "diffHunk": "@@ -0,0 +1,63 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.workbench.common.stunner.kogito.client.service;\n+\n+import static org.kie.workbench.common.stunner.core.util.StringUtils.isEmpty;\n+\n+public abstract class AbstractKogitoClientDiagramService implements KogitoClientDiagramService {\n+\n+    private static final char UNIX_SEPARATOR = '/';\n+    private static final char WINDOWS_SEPARATOR = '\\\\';\n+    public static final String DEFAULT_DIAGRAM_ID = \"default\";\n+\n+    /**", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4dd7a69ea5b7bb864a0b2dd7bbc7e798e3280a2"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTU2NjY4OA==", "bodyText": "By doing this you're converting a checked exception to an unchecked expection, which I don't think it's a good practice in general... so the result of this is that the process will be not able to be parsed, because the IllegalArgumentException instance will be catched at upper layers, which will cause the marshallers to stop processing, maybe we can think on this:\n\nDoing this way, the parsers will completely stop working, so the process will be not properly imported, so the end usre will end up on the xml editor being shown. In this case, also the exception will not display how to fix it, so it'll result on the user lost\nCan we maybe manage the UnsupportedEncodingException and add a (marshalling) validation message, but allow continue processing by applying some valid value instead? this way the process wil be imported, but a message will appear to the user, which will notice about that value being changed as is not valid.\n\nAnyway, I don't konw if in that case really makes sense, as it's just expecting the UTF-8 format in some fragment of the whole XML file, which should then be also UTF-8.... but well, tis' something you should keep in mind once trying to avoid catching excpetions by converting checked to uncheced ones, because that's not the way exceptions are expected to work.", "url": "https://github.com/kiegroup/kie-wb-common/pull/3172#discussion_r399566688", "createdAt": "2020-03-27T22:29:14Z", "author": {"login": "romartin"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-backend/src/main/java/org/kie/workbench/common/stunner/bpmn/backend/converters/fromstunner/processes/RootProcessConverter.java", "diffHunk": "@@ -96,4 +100,16 @@ private ProcessPropertyWriter convertProcessNode(Node<Definition<BPMNDiagram>, ?\n \n         return p;\n     }\n+\n+    private static String encode(String text) {\n+        if (isEmpty(text)) {\n+            return text;\n+        }\n+\n+        try {\n+            return URLEncoder.encode(text, \"UTF-8\");\n+        } catch (UnsupportedEncodingException e) {\n+            throw new IllegalArgumentException(text, e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4dd7a69ea5b7bb864a0b2dd7bbc7e798e3280a2"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTU2Njc4MA==", "bodyText": "Same comment about expections as above", "url": "https://github.com/kiegroup/kie-wb-common/pull/3172#discussion_r399566780", "createdAt": "2020-03-27T22:29:34Z", "author": {"login": "romartin"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-backend/src/main/java/org/kie/workbench/common/stunner/bpmn/backend/converters/tostunner/processes/RootProcessConverter.java", "diffHunk": "@@ -82,4 +87,15 @@ protected ProcessData createProcessData(String processVariables) {\n     protected AdvancedData createAdvancedData(String globalVariables) {\n         return new AdvancedData(new GlobalVariables(globalVariables));\n     }\n+\n+    private static String decode(String text) {\n+        if (isEmpty(text)) {\n+            return text;\n+        }\n+        try {\n+            return URLDecoder.decode(text, \"UTF-8\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4dd7a69ea5b7bb864a0b2dd7bbc7e798e3280a2"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTU2NzE2Ng==", "bodyText": "parameters javadocs empyt, just then remove those..", "url": "https://github.com/kiegroup/kie-wb-common/pull/3172#discussion_r399567166", "createdAt": "2020-03-27T22:31:02Z", "author": {"login": "romartin"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/main/java/org/kie/workbench/common/stunner/bpmn/client/forms/util/StringUtils.java", "diffHunk": "@@ -53,29 +56,61 @@ public static String getStringForList(List<? extends Object> objects) {\n     }\n \n     /**\n-     * URLEncode a string\n+     * Encode a url parameters see {@link URL#encodeQueryString(String)}\n      * @param s\n      * @return\n      */\n     public static String urlEncode(String s) {\n-        if (s == null || s.isEmpty()) {\n+        if (isEmpty(s)) {\n             return s;\n         }\n         return url.encodeQueryString(s);\n     }\n \n     /**\n-     * URLDecode a string\n+     * Decode a url parameters see {@link URL#decodeQueryString(String)}\n      * @param s\n      * @return\n      */\n     public static String urlDecode(String s) {\n-        if (s == null || s.isEmpty()) {\n+        if (isEmpty(s)) {\n             return s;\n         }\n         return url.decodeQueryString(s);\n     }\n \n+    /**\n+     * Equivalent of {@link java.net.URLDecoder#decode(String, String)} in UTF-8 decoding on server side\n+     * @param s", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4dd7a69ea5b7bb864a0b2dd7bbc7e798e3280a2"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTU2NzIxNg==", "bodyText": "parameters javadocs empyt, just then remove those..", "url": "https://github.com/kiegroup/kie-wb-common/pull/3172#discussion_r399567216", "createdAt": "2020-03-27T22:31:15Z", "author": {"login": "romartin"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/main/java/org/kie/workbench/common/stunner/bpmn/client/forms/util/StringUtils.java", "diffHunk": "@@ -53,29 +56,61 @@ public static String getStringForList(List<? extends Object> objects) {\n     }\n \n     /**\n-     * URLEncode a string\n+     * Encode a url parameters see {@link URL#encodeQueryString(String)}\n      * @param s\n      * @return\n      */\n     public static String urlEncode(String s) {\n-        if (s == null || s.isEmpty()) {\n+        if (isEmpty(s)) {\n             return s;\n         }\n         return url.encodeQueryString(s);\n     }\n \n     /**\n-     * URLDecode a string\n+     * Decode a url parameters see {@link URL#decodeQueryString(String)}\n      * @param s\n      * @return\n      */\n     public static String urlDecode(String s) {\n-        if (s == null || s.isEmpty()) {\n+        if (isEmpty(s)) {\n             return s;\n         }\n         return url.decodeQueryString(s);\n     }\n \n+    /**\n+     * Equivalent of {@link java.net.URLDecoder#decode(String, String)} in UTF-8 decoding on server side\n+     * @param s\n+     * @return\n+     */\n+    public static String encode(String s) {\n+        if (isEmpty(s)) {\n+            return s;\n+        }\n+        return url.encode(s);\n+    }\n+\n+    /**\n+     * Equivalent of {@link java.net.URLEncoder#encode(String, String)} in UTF-8 encoding on server side\n+     * @param s", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4dd7a69ea5b7bb864a0b2dd7bbc7e798e3280a2"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTU2NzM4OQ==", "bodyText": "double *", "url": "https://github.com/kiegroup/kie-wb-common/pull/3172#discussion_r399567389", "createdAt": "2020-03-27T22:31:47Z", "author": {"login": "romartin"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/main/java/org/kie/workbench/common/stunner/bpmn/client/forms/util/URL.java", "diffHunk": "@@ -39,4 +39,22 @@ public String encodeQueryString(String s) {\n     public String decodeQueryString(String s) {\n         return com.google.gwt.http.client.URL.decodeQueryString(s);\n     }\n+\n+    /**\n+     * Proxy method for {@link com.google.gwt.http.client.URL#encode(String s)} ()}\n+     * @param s - string to encode\n+     * * @return encoded string value", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4dd7a69ea5b7bb864a0b2dd7bbc7e798e3280a2"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzNjQwNzEw", "url": "https://github.com/kiegroup/kie-wb-common/pull/3172#pullrequestreview-383640710", "createdAt": "2020-03-30T08:40:02Z", "commit": {"oid": "d4dd7a69ea5b7bb864a0b2dd7bbc7e798e3280a2"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwODo0MDowMlrOF9fOug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQwOToxMzoyNlrOF9ghdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAxOTEzMA==", "bodyText": "just for consistency, could we use final String fullName?", "url": "https://github.com/kiegroup/kie-wb-common/pull/3172#discussion_r400019130", "createdAt": "2020-03-30T08:40:02Z", "author": {"login": "jomarko"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-extensions/kie-wb-common-stunner-kogito/kie-wb-common-stunner-kogito-client/src/main/java/org/kie/workbench/common/stunner/kogito/client/service/AbstractKogitoClientDiagramService.java", "diffHunk": "@@ -0,0 +1,63 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.workbench.common.stunner.kogito.client.service;\n+\n+import static org.kie.workbench.common.stunner.core.util.StringUtils.isEmpty;\n+\n+public abstract class AbstractKogitoClientDiagramService implements KogitoClientDiagramService {\n+\n+    private static final char UNIX_SEPARATOR = '/';\n+    private static final char WINDOWS_SEPARATOR = '\\\\';\n+    public static final String DEFAULT_DIAGRAM_ID = \"default\";\n+\n+    /**\n+     * Extracts file name from path.\n+     * @param filePath path to the file\n+     * @return file name\n+     */\n+    public String createDiagramTitleFromFilePath(final String filePath) {\n+        if (isEmpty(filePath)) {\n+            return generateDefaultId();\n+        }\n+\n+        return getFileNameWithoutExtension(getFileName(filePath));\n+    }\n+\n+    private static String getFileNameWithoutExtension(String fullName) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4dd7a69ea5b7bb864a0b2dd7bbc7e798e3280a2"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAzMjU5Ng==", "bodyText": "isn't more usual put default keyword as first of method signature?", "url": "https://github.com/kiegroup/kie-wb-common/pull/3172#discussion_r400032596", "createdAt": "2020-03-30T09:00:59Z", "author": {"login": "jomarko"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-api/src/main/java/org/kie/workbench/common/stunner/bpmn/forms/validation/process/ValidProcessIdValue.java", "diffHunk": "@@ -0,0 +1,39 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.workbench.common.stunner.bpmn.forms.validation.process;\n+\n+import java.lang.annotation.Documented;\n+import java.lang.annotation.ElementType;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.Target;\n+\n+import javax.validation.Constraint;\n+import javax.validation.Payload;\n+\n+import static java.lang.annotation.RetentionPolicy.RUNTIME;\n+\n+@Documented\n+@Target(ElementType.FIELD)\n+@Retention(RUNTIME)\n+@Constraint(validatedBy = {ProcessIdValueValidator.class})\n+public @interface ValidProcessIdValue {\n+    String message() default \"Process ID is not valid\";\n+\n+    Class<?>[] groups() default {};\n+\n+    Class<? extends Payload>[] payload() default {};", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4dd7a69ea5b7bb864a0b2dd7bbc7e798e3280a2"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAzNzU5MQ==", "bodyText": "Why we decided to implement this on our own rather than using existing library?", "url": "https://github.com/kiegroup/kie-wb-common/pull/3172#discussion_r400037591", "createdAt": "2020-03-30T09:09:07Z", "author": {"login": "jomarko"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-api/src/main/java/org/kie/workbench/common/stunner/bpmn/util/XmlUtils.java", "diffHunk": "@@ -0,0 +1,687 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.workbench.common.stunner.bpmn.util;\n+\n+import java.util.Arrays;\n+\n+import static org.kie.workbench.common.stunner.core.util.StringUtils.isEmpty;\n+\n+public class XmlUtils {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4dd7a69ea5b7bb864a0b2dd7bbc7e798e3280a2"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDA0MDMwOA==", "bodyText": "PowerMockito causes troubles to running tests on jdk11, if thee is a way to avoid it I would vote for it.", "url": "https://github.com/kiegroup/kie-wb-common/pull/3172#discussion_r400040308", "createdAt": "2020-03-30T09:13:26Z", "author": {"login": "jomarko"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-marshalling/src/test/java/org/kie/workbench/common/stunner/bpmn/client/marshall/converters/fromstunner/DefinitionsConverterTest.java", "diffHunk": "@@ -37,11 +41,28 @@\n import org.kie.workbench.common.stunner.core.graph.impl.GraphImpl;\n import org.kie.workbench.common.stunner.core.graph.impl.NodeImpl;\n import org.kie.workbench.common.stunner.core.graph.store.GraphNodeStoreImpl;\n+import org.mockito.Mock;\n+import org.mockito.runners.MockitoJUnitRunner;\n+import org.mockito.stubbing.Answer;\n \n import static org.assertj.core.api.Assertions.assertThat;\n+import static org.mockito.Matchers.anyString;\n+import static org.powermock.api.mockito.PowerMockito.when;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d4dd7a69ea5b7bb864a0b2dd7bbc7e798e3280a2"}, "originalPosition": 22}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d4dd7a69ea5b7bb864a0b2dd7bbc7e798e3280a2", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/d4dd7a69ea5b7bb864a0b2dd7bbc7e798e3280a2", "committedDate": "2020-03-27T09:14:18Z", "message": "Enable disabled test"}, "afterCommit": {"oid": "9ba383c1d04da9474a336723874140ca6c206cb5", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/9ba383c1d04da9474a336723874140ca6c206cb5", "committedDate": "2020-03-30T11:35:34Z", "message": "PR code review fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg0NDUwMjQw", "url": "https://github.com/kiegroup/kie-wb-common/pull/3172#pullrequestreview-384450240", "createdAt": "2020-03-31T07:01:33Z", "commit": {"oid": "9ba383c1d04da9474a336723874140ca6c206cb5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9ba383c1d04da9474a336723874140ca6c206cb5", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/9ba383c1d04da9474a336723874140ca6c206cb5", "committedDate": "2020-03-30T11:35:34Z", "message": "PR code review fixes"}, "afterCommit": {"oid": "9aea91d7feaeeb100c27879962bdc83eac3a5bc0", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/9aea91d7feaeeb100c27879962bdc83eac3a5bc0", "committedDate": "2020-03-31T10:15:16Z", "message": "Case Management didn't decode a file name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg1ODE4NDU5", "url": "https://github.com/kiegroup/kie-wb-common/pull/3172#pullrequestreview-385818459", "createdAt": "2020-04-01T17:54:38Z", "commit": {"oid": "9aea91d7feaeeb100c27879962bdc83eac3a5bc0"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9aea91d7feaeeb100c27879962bdc83eac3a5bc0", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/9aea91d7feaeeb100c27879962bdc83eac3a5bc0", "committedDate": "2020-03-31T10:15:16Z", "message": "Case Management didn't decode a file name"}, "afterCommit": {"oid": "54d18f5c5439c85a19034f61fc54038ab5b34a1d", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/54d18f5c5439c85a19034f61fc54038ab5b34a1d", "committedDate": "2020-04-06T11:08:47Z", "message": "Align escaping with jBPM Engine"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5MjI0NjMz", "url": "https://github.com/kiegroup/kie-wb-common/pull/3172#pullrequestreview-389224633", "createdAt": "2020-04-07T15:20:20Z", "commit": {"oid": "54d18f5c5439c85a19034f61fc54038ab5b34a1d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "69482e04455cf5ae327e6899b679b90be38eb2f2", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/69482e04455cf5ae327e6899b679b90be38eb2f2", "committedDate": "2020-04-07T18:23:49Z", "message": "Remove URLDecoder usage"}, "afterCommit": {"oid": "8ee78b04569c6fb529353646a32471d81986b2ea", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/8ee78b04569c6fb529353646a32471d81986b2ea", "committedDate": "2020-04-08T08:14:04Z", "message": "Remove URLDecoder usage"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8ee78b04569c6fb529353646a32471d81986b2ea", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/8ee78b04569c6fb529353646a32471d81986b2ea", "committedDate": "2020-04-08T08:14:04Z", "message": "Remove URLDecoder usage"}, "afterCommit": {"oid": "dd42034eb0993d3834afa10543de1f40a95d4240", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/dd42034eb0993d3834afa10543de1f40a95d4240", "committedDate": "2020-04-08T22:20:32Z", "message": "Remove URLDecoder usage"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwODM0MDMx", "url": "https://github.com/kiegroup/kie-wb-common/pull/3172#pullrequestreview-390834031", "createdAt": "2020-04-09T14:16:43Z", "commit": {"oid": "dd42034eb0993d3834afa10543de1f40a95d4240"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b762a5c670dcb7eaa208859dac0c4cd628077b0", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/6b762a5c670dcb7eaa208859dac0c4cd628077b0", "committedDate": "2020-04-09T14:46:41Z", "message": "RHPAM-1344 - Process ID accepts invalid characters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8daa91ec1b476ece6ce284643755bc2c9322907", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/f8daa91ec1b476ece6ce284643755bc2c9322907", "committedDate": "2020-04-09T14:46:41Z", "message": "StringUtils"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38252f494ea7d6f45e7cddaf160b077e9e6711ff", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/38252f494ea7d6f45e7cddaf160b077e9e6711ff", "committedDate": "2020-04-09T14:46:41Z", "message": "New processes names cleared"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb4bb2c17aafd4a9e081d17c846708c3b2174cb1", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/bb4bb2c17aafd4a9e081d17c846708c3b2174cb1", "committedDate": "2020-04-09T14:46:41Z", "message": "Remove fixed todo\n\nsee https://issues.jboss.org/browse/JBPM-8749"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c233fef6b926d9b7641dfc147c4b2798abc2a97a", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/c233fef6b926d9b7641dfc147c4b2798abc2a97a", "committedDate": "2020-04-09T14:48:51Z", "message": "ID clean up"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c61933cb5a4b3777fca633aa9c675cb344c17694", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/c61933cb5a4b3777fca633aa9c675cb344c17694", "committedDate": "2020-04-09T14:48:51Z", "message": "KOGITO-1354 Kogito Use realfile name provided by Appformer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "daa61cd98418d2469753fbc1b30b9f46091b6cc9", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/daa61cd98418d2469753fbc1b30b9f46091b6cc9", "committedDate": "2020-04-09T14:48:51Z", "message": "Clean up, tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec98e571952035398631fc795b6f7a776651ff8e", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/ec98e571952035398631fc795b6f7a776651ff8e", "committedDate": "2020-04-09T14:48:51Z", "message": "Rebase to master, addition coverage."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "881d477c026d2b685df73e9314b08a2516ce319a", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/881d477c026d2b685df73e9314b08a2516ce319a", "committedDate": "2020-04-09T14:48:51Z", "message": "Enable disabled test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e79df3a14ae2412d565e1cb13603befa47802b1c", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/e79df3a14ae2412d565e1cb13603befa47802b1c", "committedDate": "2020-04-09T14:48:51Z", "message": "PR code review fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54b96b6ebda82ab520e2b4ea872d4c8c6da9f01c", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/54b96b6ebda82ab520e2b4ea872d4c8c6da9f01c", "committedDate": "2020-04-09T14:48:51Z", "message": "Case Management didn't decode a file name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1c0c8ec767f0f36302c47af1b7de71607c0d43c", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/b1c0c8ec767f0f36302c47af1b7de71607c0d43c", "committedDate": "2020-04-09T14:48:51Z", "message": "Align escaping with jBPM Engine"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d94848a21f0f2966acc960dc9ddd9f7aa9b398bf", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/d94848a21f0f2966acc960dc9ddd9f7aa9b398bf", "committedDate": "2020-04-09T14:49:44Z", "message": "Remove URLDecoder usage"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dd42034eb0993d3834afa10543de1f40a95d4240", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/dd42034eb0993d3834afa10543de1f40a95d4240", "committedDate": "2020-04-08T22:20:32Z", "message": "Remove URLDecoder usage"}, "afterCommit": {"oid": "d94848a21f0f2966acc960dc9ddd9f7aa9b398bf", "author": {"user": {"login": "hasys", "name": "Kirill Gaevskii"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/d94848a21f0f2966acc960dc9ddd9f7aa9b398bf", "committedDate": "2020-04-09T14:49:44Z", "message": "Remove URLDecoder usage"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 729, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}