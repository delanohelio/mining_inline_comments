{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2NzI3OTU3", "number": 3167, "title": "DROOLS-5060: [DMN Designer] Editor allows node with prefix/trailing space", "bodyText": "See https://issues.redhat.com/browse/DROOLS-5060\nIt also incorporates a fix for https://issues.redhat.com/browse/RHDM-1247\nThis PR trims leading and trailing space on Name values.\nIt also normalises whitespace in the Name value (as requested by @tarilabs).\nIt's possible to enter the name in the following places:-\n\nGraph view, node name popover.\nGrid view, name/typeref cell popovers.\nProperties Panel\nData Types tab (new data-types).\nImported DMN nodes/data-types Name values should remain read-only.", "createdAt": "2020-02-18T16:54:34Z", "url": "https://github.com/kiegroup/kie-wb-common/pull/3167", "merged": true, "mergeCommit": {"oid": "ade1b2d0f079507bc308e5113acf84ccb3cb7c83"}, "closed": true, "closedAt": "2020-02-27T13:54:30Z", "author": {"login": "manstis"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcFzq9TgBqjMwNTEwNjIwNTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIbf3RgFqTM2NTY4NjI0Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1c33a44bded2e5b625b43b396323ee70655dd4c6", "author": {"user": null}, "url": "https://github.com/kiegroup/kie-wb-common/commit/1c33a44bded2e5b625b43b396323ee70655dd4c6", "committedDate": "2020-02-18T16:39:06Z", "message": "DROOLS-5060: [DMN Designer] Editor allows node with prefix/trailing space"}, "afterCommit": {"oid": "d848b7b7fc29ef11356d4b1083ed3ca20bc7db59", "author": {"user": null}, "url": "https://github.com/kiegroup/kie-wb-common/commit/d848b7b7fc29ef11356d4b1083ed3ca20bc7db59", "committedDate": "2020-02-19T10:07:36Z", "message": "Updates following Sonarcloud analysis"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "060a8f7703ac65c03c82d1b91acd119b19d5876b", "author": {"user": null}, "url": "https://github.com/kiegroup/kie-wb-common/commit/060a8f7703ac65c03c82d1b91acd119b19d5876b", "committedDate": "2020-02-20T10:00:41Z", "message": "Add some more tests to keep Sonarcloud happy..."}, "afterCommit": {"oid": "13584dceeeccf39e11485f866ca211f910d0f636", "author": {"user": null}, "url": "https://github.com/kiegroup/kie-wb-common/commit/13584dceeeccf39e11485f866ca211f910d0f636", "committedDate": "2020-02-25T21:23:46Z", "message": "Updates following peer review."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0NjU3NTUw", "url": "https://github.com/kiegroup/kie-wb-common/pull/3167#pullrequestreview-364657550", "createdAt": "2020-02-26T06:56:47Z", "commit": {"oid": "13584dceeeccf39e11485f866ca211f910d0f636"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwNjo1Njo0OFrOFugAeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwNzoxOTo0MFrOFugalg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDMwMzIyNQ==", "bodyText": "Can't we use Objects.equals(value, name.value)?", "url": "https://github.com/kiegroup/kie-wb-common/pull/3167#discussion_r384303225", "createdAt": "2020-02-26T06:56:48Z", "author": {"login": "jomarko"}, "path": "kie-wb-common-dmn/kie-wb-common-dmn-api/src/main/java/org/kie/workbench/common/dmn/api/property/dmn/NameHolder.java", "diffHunk": "@@ -0,0 +1,80 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.kie.workbench.common.dmn.api.property.dmn;\n+\n+import org.jboss.errai.common.client.api.annotations.Portable;\n+import org.jboss.errai.databinding.client.api.Bindable;\n+import org.kie.workbench.common.dmn.api.property.DMNProperty;\n+import org.kie.workbench.common.forms.adf.definitions.annotations.metaModel.FieldDefinition;\n+import org.kie.workbench.common.forms.adf.definitions.annotations.metaModel.FieldValue;\n+import org.kie.workbench.common.forms.adf.definitions.annotations.metaModel.I18nMode;\n+import org.kie.workbench.common.stunner.core.definition.annotation.Property;\n+import org.kie.workbench.common.stunner.core.definition.annotation.property.Type;\n+import org.kie.workbench.common.stunner.core.definition.annotation.property.Value;\n+import org.kie.workbench.common.stunner.core.definition.property.PropertyMetaTypes;\n+import org.kie.workbench.common.stunner.core.definition.property.PropertyType;\n+import org.kie.workbench.common.stunner.core.util.HashUtil;\n+\n+@Portable\n+@Bindable\n+@Property(meta = PropertyMetaTypes.NAME)\n+@FieldDefinition(i18nMode = I18nMode.OVERRIDE_I18N_KEY)\n+public class NameHolder implements DMNProperty {\n+\n+    public static final String DEFAULT_NAME = \"\";\n+\n+    @Type\n+    public static final PropertyType type = new NamePropertyType();\n+\n+    @Value\n+    @FieldValue\n+    private Name value;\n+\n+    public NameHolder() {\n+        this(new Name(DEFAULT_NAME));\n+    }\n+\n+    public NameHolder(final Name value) {\n+        this.value = value;\n+    }\n+\n+    public Name getValue() {\n+        return value;\n+    }\n+\n+    public void setValue(final Name value) {\n+        this.value = value;\n+    }\n+\n+    @Override\n+    public boolean equals(final Object o) {\n+        if (this == o) {\n+            return true;\n+        }\n+        if (!(o instanceof NameHolder)) {\n+            return false;\n+        }\n+\n+        final NameHolder name = (NameHolder) o;\n+\n+        return value != null ? value.equals(name.value) : name.value == null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13584dceeeccf39e11485f866ca211f910d0f636"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDMwNzgyNQ==", "bodyText": "I think we can remove this /**/", "url": "https://github.com/kiegroup/kie-wb-common/pull/3167#discussion_r384307825", "createdAt": "2020-02-26T07:13:05Z", "author": {"login": "jomarko"}, "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/editors/included/grid/BaseCardComponent.java", "diffHunk": "@@ -91,9 +92,9 @@ public HTMLElement getContent() {\n \n             final String oldName = getIncludedModel().getName();\n \n-            getIncludedModel().setName(newName);\n+            getIncludedModel().setName(NameUtils.normaliseName(newName));\n \n-            if (getIncludedModel().isValid()) {\n+            if (getIncludedModel().isValid()) {/**/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13584dceeeccf39e11485f866ca211f910d0f636"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDMwODUzNw==", "bodyText": "Isn't the jira just about DRG elements? Are data types DRGElements?", "url": "https://github.com/kiegroup/kie-wb-common/pull/3167#discussion_r384308537", "createdAt": "2020-02-26T07:15:23Z", "author": {"login": "jomarko"}, "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/editors/types/listview/DataTypeListItem.java", "diffHunk": "@@ -430,7 +431,7 @@ private boolean isAReferenceToDestroyedDataType(final DataType dataType) {\n     DataType updateProperties(final DataType dataType) {\n         return dataTypeManager\n                 .from(dataType)\n-                .withName(getName())\n+                .withName(NameUtils.normaliseName(getName()))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13584dceeeccf39e11485f866ca211f910d0f636"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDMwODkxNQ==", "bodyText": "magic number you are saying? ... and who is the magician that do magic with this magic number?", "url": "https://github.com/kiegroup/kie-wb-common/pull/3167#discussion_r384308915", "createdAt": "2020-02-26T07:16:28Z", "author": {"login": "jomarko"}, "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/property/dmn/NameFieldProvider.java", "diffHunk": "@@ -0,0 +1,61 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.kie.workbench.common.dmn.client.property.dmn;\n+\n+import javax.enterprise.context.Dependent;\n+\n+import org.kie.workbench.common.dmn.api.property.dmn.Name;\n+import org.kie.workbench.common.dmn.api.property.dmn.NameFieldType;\n+import org.kie.workbench.common.forms.fields.shared.fieldTypes.basic.BasicTypeFieldProvider;\n+import org.kie.workbench.common.forms.model.TypeInfo;\n+\n+@Dependent\n+public class NameFieldProvider extends BasicTypeFieldProvider<NameFieldDefinition> {\n+\n+    //Arbitrary 'magic' number", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13584dceeeccf39e11485f866ca211f910d0f636"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDMwOTkxMA==", "bodyText": "please remove comment", "url": "https://github.com/kiegroup/kie-wb-common/pull/3167#discussion_r384309910", "createdAt": "2020-02-26T07:19:40Z", "author": {"login": "jomarko"}, "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/test/java/org/kie/workbench/common/dmn/client/editors/included/grid/BaseCardComponentTest.java", "diffHunk": "@@ -144,18 +144,27 @@ public void testGetContent() {\n \n     @Test\n     public void testOnTitleChangedWhenIncludedModelIsValid() {\n+        doTestOnTitleChangedWhenIncludedModelIsValid(\"newName\", \"newName\");\n+    }\n+\n+    @Test\n+    public void testOnTitleChangedWhenIncludedModelIsValidWithWhitespace() {\n+        doTestOnTitleChangedWhenIncludedModelIsValid(\"   newName   \", \"newName\");\n+    }\n+\n+    private void doTestOnTitleChangedWhenIncludedModelIsValid(final String newName,\n+                                                              final String expectedNewName) {\n         final DMNCardsGridComponent grid = mock(DMNCardsGridComponent.class);\n         final DMNIncludedModelActiveRecord includedModel = spy(new DMNIncludedModelActiveRecord(null));\n-        final String newName = \"newName\";\n \n         doReturn(true).when(includedModel).isValid();\n-        doReturn(emptyList()).when(includedModel).update();\n+        doReturn(emptyList()).when(includedModel).update();/**/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13584dceeeccf39e11485f866ca211f910d0f636"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e8b74198d94f3c15f83a12918002009d42dc28f", "author": {"user": null}, "url": "https://github.com/kiegroup/kie-wb-common/commit/6e8b74198d94f3c15f83a12918002009d42dc28f", "committedDate": "2020-02-26T09:10:32Z", "message": "DROOLS-5060: [DMN Designer] Editor allows node with prefix/trailing space"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "987cd9272d13b4315fd57a118b94ef65adebd476", "author": {"user": null}, "url": "https://github.com/kiegroup/kie-wb-common/commit/987cd9272d13b4315fd57a118b94ef65adebd476", "committedDate": "2020-02-26T09:10:32Z", "message": "Updates following Sonarcloud analysis"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa81beb90b7f4ae363dccd251b28cb295005193d", "author": {"user": null}, "url": "https://github.com/kiegroup/kie-wb-common/commit/aa81beb90b7f4ae363dccd251b28cb295005193d", "committedDate": "2020-02-26T09:10:32Z", "message": "Add some more tests to keep Sonarcloud happy..."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "149507e272847cae0b64874e442b8b5dbef00f07", "author": {"user": null}, "url": "https://github.com/kiegroup/kie-wb-common/commit/149507e272847cae0b64874e442b8b5dbef00f07", "committedDate": "2020-02-26T09:10:32Z", "message": "Updates following peer review."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0NzU2MjM3", "url": "https://github.com/kiegroup/kie-wb-common/pull/3167#pullrequestreview-364756237", "createdAt": "2020-02-26T09:50:10Z", "commit": {"oid": "13584dceeeccf39e11485f866ca211f910d0f636"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd5fa508876a4a76c8fba5025b609c8d95ef2a6d", "author": {"user": null}, "url": "https://github.com/kiegroup/kie-wb-common/commit/fd5fa508876a4a76c8fba5025b609c8d95ef2a6d", "committedDate": "2020-02-26T09:59:31Z", "message": "Updates following peer review."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "13584dceeeccf39e11485f866ca211f910d0f636", "author": {"user": null}, "url": "https://github.com/kiegroup/kie-wb-common/commit/13584dceeeccf39e11485f866ca211f910d0f636", "committedDate": "2020-02-25T21:23:46Z", "message": "Updates following peer review."}, "afterCommit": {"oid": "fd5fa508876a4a76c8fba5025b609c8d95ef2a6d", "author": {"user": null}, "url": "https://github.com/kiegroup/kie-wb-common/commit/fd5fa508876a4a76c8fba5025b609c8d95ef2a6d", "committedDate": "2020-02-26T09:59:31Z", "message": "Updates following peer review."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1Njg2MjQz", "url": "https://github.com/kiegroup/kie-wb-common/pull/3167#pullrequestreview-365686243", "createdAt": "2020-02-27T13:39:43Z", "commit": {"oid": "fd5fa508876a4a76c8fba5025b609c8d95ef2a6d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 719, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}