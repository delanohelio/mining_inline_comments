{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcxNTgxNjUy", "number": 3142, "title": "DROOLS-5011 : Multiselect dropdown for enumerated values", "bodyText": "https://issues.redhat.com/browse/DROOLS-5011\n#3142\nkiegroup/drools-wb#1301", "createdAt": "2020-02-05T20:57:41Z", "url": "https://github.com/kiegroup/kie-wb-common/pull/3142", "merged": true, "mergeCommit": {"oid": "fecfe10feaea45741e17ff4341b7dcac34578bb8"}, "closed": true, "closedAt": "2020-02-14T12:25:13Z", "author": {"login": "Rikkola"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcBwsxQgBqjMwMTUzNTcxNjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcCD4egAFqTM1NTM1OTg0MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0ac1287ebf2096ba0d5d1055cc6a375ed94584e4", "author": {"user": {"login": "Rikkola", "name": "Toni Rikkola"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/0ac1287ebf2096ba0d5d1055cc6a375ed94584e4", "committedDate": "2020-02-05T20:56:55Z", "message": "DROOLS-5011 : Multiselect dropdown for enumerated values"}, "afterCommit": {"oid": "1aed501e20290c7e1701b93648241c138fdb2e06", "author": {"user": {"login": "caponetto", "name": "Guilherme Caponetto"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/1aed501e20290c7e1701b93648241c138fdb2e06", "committedDate": "2020-02-06T20:24:06Z", "message": "[AF-2422] Fixed path issues on Windows OS."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0OTgxNjY3", "url": "https://github.com/kiegroup/kie-wb-common/pull/3142#pullrequestreview-354981667", "createdAt": "2020-02-07T07:59:00Z", "commit": {"oid": "1aed501e20290c7e1701b93648241c138fdb2e06"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1aed501e20290c7e1701b93648241c138fdb2e06", "author": {"user": {"login": "caponetto", "name": "Guilherme Caponetto"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/1aed501e20290c7e1701b93648241c138fdb2e06", "committedDate": "2020-02-06T20:24:06Z", "message": "[AF-2422] Fixed path issues on Windows OS."}, "afterCommit": {"oid": "dbfc39baf7d19fde73169116ea00a98876a321ee", "author": {"user": {"login": "Rikkola", "name": "Toni Rikkola"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/dbfc39baf7d19fde73169116ea00a98876a321ee", "committedDate": "2020-02-07T08:16:39Z", "message": "DROOLS-5011 : Multiselect dropdown for enumerated values"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1MDQ4ODYy", "url": "https://github.com/kiegroup/kie-wb-common/pull/3142#pullrequestreview-355048862", "createdAt": "2020-02-07T10:04:06Z", "commit": {"oid": "dbfc39baf7d19fde73169116ea00a98876a321ee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxMDowNDowNlrOFm4DjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxMDowNDowNlrOFm4DjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjMwODYyMQ==", "bodyText": "Do I want to be reallllllllly picky here?\nIf we have an enumeration like: [1=\"one\", 2=\"two, deux\", 3=\"three\"] this will break.\nDon't you have a utility class somewhere to handle the correct splits?", "url": "https://github.com/kiegroup/kie-wb-common/pull/3142#discussion_r376308621", "createdAt": "2020-02-07T10:04:06Z", "author": {"login": "manstis"}, "path": "kie-wb-common-widgets/kie-wb-decorated-grid-widget/src/main/java/org/kie/workbench/common/widgets/decoratedgrid/client/widget/cells/AbstractProxyPopupDropDownListBox.java", "diffHunk": "@@ -80,11 +81,22 @@ public void render(final Cell.Context context,\n                        final SafeHtmlRenderer<String> renderer) {\n         //Render value\n         if (value != null) {\n-            String label = getLabel(convertToString(value));\n+            final String label = makeLabel(convertToString(value));\n+\n             sb.append(renderer.render(label));\n         }\n     }\n \n+    private String makeLabel(final String convert) {\n+        if (listBox.isMultipleSelect()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dbfc39baf7d19fde73169116ea00a98876a321ee"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1MDgwMTgx", "url": "https://github.com/kiegroup/kie-wb-common/pull/3142#pullrequestreview-355080181", "createdAt": "2020-02-07T10:58:17Z", "commit": {"oid": "dbfc39baf7d19fde73169116ea00a98876a321ee"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8a96191acd22378cc36554ed4673cd40f402a96", "author": {"user": {"login": "Rikkola", "name": "Toni Rikkola"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/a8a96191acd22378cc36554ed4673cd40f402a96", "committedDate": "2020-02-07T16:57:33Z", "message": "DROOLS-5011 : Multiselect dropdown for enumerated values"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dbfc39baf7d19fde73169116ea00a98876a321ee", "author": {"user": {"login": "Rikkola", "name": "Toni Rikkola"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/dbfc39baf7d19fde73169116ea00a98876a321ee", "committedDate": "2020-02-07T08:16:39Z", "message": "DROOLS-5011 : Multiselect dropdown for enumerated values"}, "afterCommit": {"oid": "a8a96191acd22378cc36554ed4673cd40f402a96", "author": {"user": {"login": "Rikkola", "name": "Toni Rikkola"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/a8a96191acd22378cc36554ed4673cd40f402a96", "committedDate": "2020-02-07T16:57:33Z", "message": "DROOLS-5011 : Multiselect dropdown for enumerated values"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1MzU5ODQx", "url": "https://github.com/kiegroup/kie-wb-common/pull/3142#pullrequestreview-355359841", "createdAt": "2020-02-07T18:45:19Z", "commit": {"oid": "a8a96191acd22378cc36554ed4673cd40f402a96"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxODo0NToxOVrOFnGnSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxODo0NToxOVrOFnGnSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjU0NzE0NQ==", "bodyText": "ListSplitter is needed because of the \"\\\"1,2,3\\\"", "url": "https://github.com/kiegroup/kie-wb-common/pull/3142#discussion_r376547145", "createdAt": "2020-02-07T18:45:19Z", "author": {"login": "Rikkola"}, "path": "kie-wb-common-widgets/kie-wb-decorated-grid-widget/src/test/java/org/kie/workbench/common/widgets/decoratedgrid/client/widget/cells/AbstractProxyPopupDropDownListBoxRenderTest.java", "diffHunk": "@@ -0,0 +1,154 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.kie.workbench.common.widgets.decoratedgrid.client.widget.cells;\n+\n+import com.google.gwt.cell.client.Cell;\n+import com.google.gwt.safehtml.shared.SafeHtml;\n+import com.google.gwt.safehtml.shared.SafeHtmlBuilder;\n+import com.google.gwt.text.shared.SafeHtmlRenderer;\n+import com.google.gwtmockito.GwtMock;\n+import com.google.gwtmockito.GwtMockitoTestRunner;\n+import org.gwtbootstrap3.client.ui.ListBox;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.kie.soup.project.datamodel.oracle.DropDownData;\n+import org.kie.workbench.common.widgets.client.datamodel.AsyncPackageDataModelOracle;\n+import org.mockito.Mock;\n+\n+import static org.mockito.Matchers.anyString;\n+import static org.mockito.Mockito.doReturn;\n+import static org.mockito.Mockito.mock;\n+import static org.mockito.Mockito.verify;\n+\n+@RunWith(GwtMockitoTestRunner.class)\n+public class AbstractProxyPopupDropDownListBoxRenderTest {\n+\n+    @GwtMock\n+    private ListBox listBox;\n+\n+    private AbstractProxyPopupDropDownListBox<String> listBoxDropDown;\n+\n+    @Mock\n+    private AbstractProxyPopupDropDownEditCell abstractProxyPopupDropDownEditCell;\n+\n+    @Before\n+    public void setUp() throws Exception {\n+        listBoxDropDown = new AbstractProxyPopupDropDownListBox<String>(abstractProxyPopupDropDownEditCell,\n+                                                                        \"in\") {\n+\n+            @Override\n+            public String convertToString(final String value) {\n+                return value;\n+            }\n+\n+            @Override\n+            public String convertFromString(final String value) {\n+                return value;\n+            }\n+        };\n+\n+        doReturn(mock(AsyncPackageDataModelOracle.class)).when(abstractProxyPopupDropDownEditCell).getDataModelOracle();\n+\n+        addListBoxItem(0, \"Fork\", \"1\");\n+        addListBoxItem(1, \"Spoon\", \"2\");\n+        addListBoxItem(2, \"Knife\", \"3\");\n+        addListBoxItem(3, \"Spork\", \"4\");\n+        addListBoxItem(4, \"Fork, Spoon and Knife\", \"\\\"1,2,3\\\"\");\n+        doReturn(5).when(listBox).getItemCount();\n+        listBoxDropDown.setDropDownData(DropDownData.create(new String[]{\"1=Fork\", \"2=Spoon\", \"3=Knife\", \"4=Spork\", \"\\\"1,2,3\\\"=Fork, Spoon and Knife\"}));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8a96191acd22378cc36554ed4673cd40f402a96"}, "originalPosition": 72}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 696, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}