{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzOTIwMzgw", "number": 3248, "title": "Kogito 1020 : VSCode - BPMN modeler support variables tagging", "bodyText": "Hi @romartin can you review this PR?\nReady for Review\nKnown issues that I will be fixing while this PR is reviewed:\n-When loading a new diagram that has tags, when you add other tags the previous tags are removed (Only one time) - FIXED NOW\n-Additional tests are needed to test the logic of the overlay and adding of the badges/labels and edge cases - Fixed Some Tests / ADDED\n-Currently when saving it separates tags with semicolon ; as it caused conflicts with the separation of variables, will fix - FIXED NOW\n-Business Central needs to be tested to ensure that it can save and reload FIXED ISSUES / TESTED\n-Currently when saving CData is skipped Fixed by Kirill on another PR\n****Note : Due to the last refactor, the widget does not work properly in regards to events, will fix tomorrow. Firing up the builds to check Sonar Cloud Issues -- FIXED NOW", "createdAt": "2020-03-26T02:25:37Z", "url": "https://github.com/kiegroup/kie-wb-common/pull/3248", "merged": true, "mergeCommit": {"oid": "bec3764363553f5e4dbb91f676e936c351e93bee"}, "closed": true, "closedAt": "2020-04-09T20:06:45Z", "author": {"login": "inodeman"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcR68Z6ABqjMxNzQ1MTc5ODM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcWB_3ogFqTM5MTA4NjcwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "75e21c0fa0d8bfe4b0ce900c8f546550e34449b0", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/75e21c0fa0d8bfe4b0ce900c8f546550e34449b0", "committedDate": "2020-03-27T03:14:01Z", "message": "KOGITO-1020 : VSCode - BPMN modeler support variables tagging - Fixed Loading Issue + Misc Bugs / Serializing with commands/semmicolons / BC Test"}, "afterCommit": {"oid": "2749545715e8774a70bbf907cbf4237af4d9b9ea", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/2749545715e8774a70bbf907cbf4237af4d9b9ea", "committedDate": "2020-03-28T01:23:00Z", "message": "KOGITO-1020 : VSCode - BPMN modeler support variables tagging - Added tests for Sonar Cloud"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzNDU2Nzgy", "url": "https://github.com/kiegroup/kie-wb-common/pull/3248#pullrequestreview-383456782", "createdAt": "2020-03-29T21:20:22Z", "commit": {"oid": "19666db4213ffeccddce968ef2eb1cfe0a564209"}, "state": "COMMENTED", "comments": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQyMToyMDoyMlrOF9VP3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQyMTozNzoyN1rOF9VXAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg1NTU4MQ==", "bodyText": "not sure if makes sense, but shouldn't it be a replaceAll instead of a replace?", "url": "https://github.com/kiegroup/kie-wb-common/pull/3248#discussion_r399855581", "createdAt": "2020-03-29T21:20:22Z", "author": {"login": "romartin"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-backend/src/main/java/org/kie/workbench/common/stunner/bpmn/backend/converters/customproperties/CustomElement.java", "diffHunk": "@@ -31,7 +31,20 @@\n     public static final MetadataTypeDefinition<Boolean> autoStart = new BooleanElement(\"customAutoStart\", false);\n     public static final MetadataTypeDefinition<Boolean> autoConnectionSource = new BooleanElement(\"isAutoConnection.source\", false);\n     public static final MetadataTypeDefinition<Boolean> autoConnectionTarget = new BooleanElement(\"isAutoConnection.target\", false);\n-    public static final MetadataTypeDefinition<Boolean> customKPI = new BooleanElement(\"customKPI\", false);\n+    public static final MetadataTypeDefinition<String> customTags = new StringElement(\"customTags\", \"[]\") {\n+        // Need to use an intermediary character since Variables depend on comma separators\n+        @Override\n+        public String getValue(BaseElement element) {\n+            return getStringValue(element)\n+                    .orElse(getDefaultValue()).replace(\",\", \";\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19666db4213ffeccddce968ef2eb1cfe0a564209"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg1NTU5OA==", "bodyText": "not sure if makes sense, but shouldn't it be a replaceAll instead of a replace?", "url": "https://github.com/kiegroup/kie-wb-common/pull/3248#discussion_r399855598", "createdAt": "2020-03-29T21:20:26Z", "author": {"login": "romartin"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-backend/src/main/java/org/kie/workbench/common/stunner/bpmn/backend/converters/customproperties/CustomElement.java", "diffHunk": "@@ -31,7 +31,20 @@\n     public static final MetadataTypeDefinition<Boolean> autoStart = new BooleanElement(\"customAutoStart\", false);\n     public static final MetadataTypeDefinition<Boolean> autoConnectionSource = new BooleanElement(\"isAutoConnection.source\", false);\n     public static final MetadataTypeDefinition<Boolean> autoConnectionTarget = new BooleanElement(\"isAutoConnection.target\", false);\n-    public static final MetadataTypeDefinition<Boolean> customKPI = new BooleanElement(\"customKPI\", false);\n+    public static final MetadataTypeDefinition<String> customTags = new StringElement(\"customTags\", \"[]\") {\n+        // Need to use an intermediary character since Variables depend on comma separators\n+        @Override\n+        public String getValue(BaseElement element) {\n+            return getStringValue(element)\n+                    .orElse(getDefaultValue()).replace(\",\", \";\");\n+        }\n+\n+        @Override\n+        public void setValue(BaseElement element, String value) {\n+            value = value.replace(\";\", \",\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19666db4213ffeccddce968ef2eb1cfe0a564209"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg1NjIxMw==", "bodyText": "This html template file represents a \"fragment\" of the whole html document, so there is no need to declare neither the head and body tags, could you please remove all those? The html template should just start on the <div id=\"widget\"....", "url": "https://github.com/kiegroup/kie-wb-common/pull/3248#discussion_r399856213", "createdAt": "2020-03-29T21:26:32Z", "author": {"login": "romartin"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/main/java/org/kie/workbench/common/stunner/bpmn/client/forms/fields/variablesEditor/VariablesEditorWidget.html", "diffHunk": "@@ -16,8 +16,10 @@\n <!DOCTYPE html>\n <html lang=\"en\">\n <head>\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19666db4213ffeccddce968ef2eb1cfe0a564209"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg1NjI3NQ==", "bodyText": "no i18n", "url": "https://github.com/kiegroup/kie-wb-common/pull/3248#discussion_r399856275", "createdAt": "2020-03-29T21:26:58Z", "author": {"login": "romartin"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/main/java/org/kie/workbench/common/stunner/bpmn/client/forms/fields/variablesEditor/VariablesEditorWidget.html", "diffHunk": "@@ -30,40 +32,61 @@\n                     <table class=\"table table-striped table-bordered\" data-field=\"table\">\n                         <thead>\n                         <tr>\n-                            <th data-field=\"nameth\" style=\"width:46%\">\n+                            <th data-field=\"nameth\" style=\"width:32%\">\n                                 Name\n                             </th>\n-                            <th data-field=\"datatypeth\" style=\"width:46%\">\n+                            <th data-field=\"datatypeth\" style=\"width:43%\">\n                                 Data Type\n                             </th>\n \n-                            <th data-field=\"kpith\" style=\"width:4%\">\n-                                KPI\n+                            <th style=\"width:22%\" data-field=\"tagsth\">\n+                                Tags\n+                                <i class=\"fa fa-info-circle\" title = \"Add Predefined or Custom Tags to Variables\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19666db4213ffeccddce968ef2eb1cfe0a564209"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg1NjI5MA==", "bodyText": "no i18n", "url": "https://github.com/kiegroup/kie-wb-common/pull/3248#discussion_r399856290", "createdAt": "2020-03-29T21:27:08Z", "author": {"login": "romartin"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/main/java/org/kie/workbench/common/stunner/bpmn/client/forms/fields/variablesEditor/VariablesEditorWidget.html", "diffHunk": "@@ -30,40 +32,61 @@\n                     <table class=\"table table-striped table-bordered\" data-field=\"table\">\n                         <thead>\n                         <tr>\n-                            <th data-field=\"nameth\" style=\"width:46%\">\n+                            <th data-field=\"nameth\" style=\"width:32%\">\n                                 Name\n                             </th>\n-                            <th data-field=\"datatypeth\" style=\"width:46%\">\n+                            <th data-field=\"datatypeth\" style=\"width:43%\">\n                                 Data Type\n                             </th>\n \n-                            <th data-field=\"kpith\" style=\"width:4%\">\n-                                KPI\n+                            <th style=\"width:22%\" data-field=\"tagsth\">\n+                                Tags\n+                                <i class=\"fa fa-info-circle\" title = \"Add Predefined or Custom Tags to Variables\"/>\n                             </th>\n \n-                            <td style=\"width:4%\">\n+                            <td style=\"width:3%\">\n                                 <button type=\"button\" class=\"center-block\" data-field=\"addVarButton\"></button>\n                             </td>\n                         </tr>\n                         </thead>\n                         <tbody id=\"variableRows\">\n                         <tr id=\"variableRow\">\n-                            <td style=\"width:46%\">\n+                            <td style=\"width:32%\">\n                                 <input type=\"text\" class=\"form-control\" data-field=\"name\"/>\n                             </td>\n-                            <td style=\"width:46%\">\n+                            <td style=\"width:43%\">\n                                 <select data-field=\"dataType\" class=\"form-control\">\n                                     <option value=\"Integer\">Integer</option>\n                                     <option value=\"String\">String</option>\n                                 </select>\n                                 <input type=\"text\" class=\"form-control\" data-field=\"customDataType\"/>\n                             </td>\n \n-                            <td style=\"width:4%\" data-field=\"kpiTD\">\n-                                <input type=\"checkbox\" style=\"margin-left:15px; margin-top:10px\" data-field=\"kpi\"/>\n+                            <td style=\"width:22%\" data-field=\"tagsTD\">\n+                                <div class = \"containerDiv\" title = \"Tags\">\n+                                    <a class = \"tagAnchor tagsSVG\" data-field=\"variable-tags-settings\" data-dismiss=\"onblur\" data-placement=\"bottom\" data-toggle=\"popover\" data-html=\"true\" data-content=\"OverlayContent\">\n+                                        <span data-field =\"tagCount\"  title = \"These are the tags included \" class = \"tagSpan\"></span>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19666db4213ffeccddce968ef2eb1cfe0a564209"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg1NjI5OA==", "bodyText": "no i18n", "url": "https://github.com/kiegroup/kie-wb-common/pull/3248#discussion_r399856298", "createdAt": "2020-03-29T21:27:17Z", "author": {"login": "romartin"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/main/java/org/kie/workbench/common/stunner/bpmn/client/forms/fields/variablesEditor/VariablesEditorWidget.html", "diffHunk": "@@ -30,40 +32,61 @@\n                     <table class=\"table table-striped table-bordered\" data-field=\"table\">\n                         <thead>\n                         <tr>\n-                            <th data-field=\"nameth\" style=\"width:46%\">\n+                            <th data-field=\"nameth\" style=\"width:32%\">\n                                 Name\n                             </th>\n-                            <th data-field=\"datatypeth\" style=\"width:46%\">\n+                            <th data-field=\"datatypeth\" style=\"width:43%\">\n                                 Data Type\n                             </th>\n \n-                            <th data-field=\"kpith\" style=\"width:4%\">\n-                                KPI\n+                            <th style=\"width:22%\" data-field=\"tagsth\">\n+                                Tags\n+                                <i class=\"fa fa-info-circle\" title = \"Add Predefined or Custom Tags to Variables\"/>\n                             </th>\n \n-                            <td style=\"width:4%\">\n+                            <td style=\"width:3%\">\n                                 <button type=\"button\" class=\"center-block\" data-field=\"addVarButton\"></button>\n                             </td>\n                         </tr>\n                         </thead>\n                         <tbody id=\"variableRows\">\n                         <tr id=\"variableRow\">\n-                            <td style=\"width:46%\">\n+                            <td style=\"width:32%\">\n                                 <input type=\"text\" class=\"form-control\" data-field=\"name\"/>\n                             </td>\n-                            <td style=\"width:46%\">\n+                            <td style=\"width:43%\">\n                                 <select data-field=\"dataType\" class=\"form-control\">\n                                     <option value=\"Integer\">Integer</option>\n                                     <option value=\"String\">String</option>\n                                 </select>\n                                 <input type=\"text\" class=\"form-control\" data-field=\"customDataType\"/>\n                             </td>\n \n-                            <td style=\"width:4%\" data-field=\"kpiTD\">\n-                                <input type=\"checkbox\" style=\"margin-left:15px; margin-top:10px\" data-field=\"kpi\"/>\n+                            <td style=\"width:22%\" data-field=\"tagsTD\">\n+                                <div class = \"containerDiv\" title = \"Tags\">\n+                                    <a class = \"tagAnchor tagsSVG\" data-field=\"variable-tags-settings\" data-dismiss=\"onblur\" data-placement=\"bottom\" data-toggle=\"popover\" data-html=\"true\" data-content=\"OverlayContent\">\n+                                        <span data-field =\"tagCount\"  title = \"These are the tags included \" class = \"tagSpan\"></span>\n+                                    </a>\n+                                </div>\n+\n+                                <div style=\"display:none;\"   data-field = \"tags-div\" class = \"tagsDiv\">\n+\n+                                    <button type=\"button\" class =\"close\" data-field=\"closeButton\">x</button>\n+\n+                                    <h3>Variable tags</h3>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19666db4213ffeccddce968ef2eb1cfe0a564209"}, "originalPosition": 65}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg1NjMyNg==", "bodyText": "no i18n", "url": "https://github.com/kiegroup/kie-wb-common/pull/3248#discussion_r399856326", "createdAt": "2020-03-29T21:27:30Z", "author": {"login": "romartin"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/main/java/org/kie/workbench/common/stunner/bpmn/client/forms/fields/variablesEditor/VariablesEditorWidget.html", "diffHunk": "@@ -30,40 +32,61 @@\n                     <table class=\"table table-striped table-bordered\" data-field=\"table\">\n                         <thead>\n                         <tr>\n-                            <th data-field=\"nameth\" style=\"width:46%\">\n+                            <th data-field=\"nameth\" style=\"width:32%\">\n                                 Name\n                             </th>\n-                            <th data-field=\"datatypeth\" style=\"width:46%\">\n+                            <th data-field=\"datatypeth\" style=\"width:43%\">\n                                 Data Type\n                             </th>\n \n-                            <th data-field=\"kpith\" style=\"width:4%\">\n-                                KPI\n+                            <th style=\"width:22%\" data-field=\"tagsth\">\n+                                Tags\n+                                <i class=\"fa fa-info-circle\" title = \"Add Predefined or Custom Tags to Variables\"/>\n                             </th>\n \n-                            <td style=\"width:4%\">\n+                            <td style=\"width:3%\">\n                                 <button type=\"button\" class=\"center-block\" data-field=\"addVarButton\"></button>\n                             </td>\n                         </tr>\n                         </thead>\n                         <tbody id=\"variableRows\">\n                         <tr id=\"variableRow\">\n-                            <td style=\"width:46%\">\n+                            <td style=\"width:32%\">\n                                 <input type=\"text\" class=\"form-control\" data-field=\"name\"/>\n                             </td>\n-                            <td style=\"width:46%\">\n+                            <td style=\"width:43%\">\n                                 <select data-field=\"dataType\" class=\"form-control\">\n                                     <option value=\"Integer\">Integer</option>\n                                     <option value=\"String\">String</option>\n                                 </select>\n                                 <input type=\"text\" class=\"form-control\" data-field=\"customDataType\"/>\n                             </td>\n \n-                            <td style=\"width:4%\" data-field=\"kpiTD\">\n-                                <input type=\"checkbox\" style=\"margin-left:15px; margin-top:10px\" data-field=\"kpi\"/>\n+                            <td style=\"width:22%\" data-field=\"tagsTD\">\n+                                <div class = \"containerDiv\" title = \"Tags\">\n+                                    <a class = \"tagAnchor tagsSVG\" data-field=\"variable-tags-settings\" data-dismiss=\"onblur\" data-placement=\"bottom\" data-toggle=\"popover\" data-html=\"true\" data-content=\"OverlayContent\">\n+                                        <span data-field =\"tagCount\"  title = \"These are the tags included \" class = \"tagSpan\"></span>\n+                                    </a>\n+                                </div>\n+\n+                                <div style=\"display:none;\"   data-field = \"tags-div\" class = \"tagsDiv\">\n+\n+                                    <button type=\"button\" class =\"close\" data-field=\"closeButton\">x</button>\n+\n+                                    <h3>Variable tags</h3>\n+\n+                                    <select data-field=\"defaultTagNames\" class=\"form-control selectionWidget\" style = \"width: 150px;\"/>\n+                                    <input class=\"form-control selectionWidget\" data-field=\"customTagName\" style = \"width: 150px;\" type=\"text\"/>\n+\n+                                    <span class=\"glyphicon glyphicon-ok check-mark acceptButton\" title = \"Add Tag\" data-field=\"acceptButton\" ></span>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19666db4213ffeccddce968ef2eb1cfe0a564209"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg1NjQwNg==", "bodyText": "could it be private access?", "url": "https://github.com/kiegroup/kie-wb-common/pull/3248#discussion_r399856406", "createdAt": "2020-03-29T21:28:11Z", "author": {"login": "romartin"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/main/java/org/kie/workbench/common/stunner/bpmn/client/forms/fields/variablesEditor/VariablesEditorWidgetViewImpl.java", "diffHunk": "@@ -78,13 +78,13 @@\n     private DataTypeNamesService clientDataTypesService;\n \n     @DataField\n-    protected TableCellElement kpith = Document.get().createTHElement();\n+    protected TableCellElement tagsth = Document.get().createTHElement();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19666db4213ffeccddce968ef2eb1cfe0a564209"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg1NjQxNA==", "bodyText": "could it be private access?", "url": "https://github.com/kiegroup/kie-wb-common/pull/3248#discussion_r399856414", "createdAt": "2020-03-29T21:28:15Z", "author": {"login": "romartin"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/main/java/org/kie/workbench/common/stunner/bpmn/client/forms/fields/variablesEditor/VariablesEditorWidgetViewImpl.java", "diffHunk": "@@ -78,13 +78,13 @@\n     private DataTypeNamesService clientDataTypesService;\n \n     @DataField\n-    protected TableCellElement kpith = Document.get().createTHElement();\n+    protected TableCellElement tagsth = Document.get().createTHElement();\n \n     List<String> dataTypes;\n     List<String> dataTypeDisplayNames;\n     boolean readOnly = false;\n \n-    private boolean kpiDisabled = false;\n+    protected boolean tagsDisabled = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19666db4213ffeccddce968ef2eb1cfe0a564209"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg1NjU2NQ==", "bodyText": "replace or replaceAll here too?'", "url": "https://github.com/kiegroup/kie-wb-common/pull/3248#discussion_r399856565", "createdAt": "2020-03-29T21:29:29Z", "author": {"login": "romartin"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-marshalling/src/main/java/org/kie/workbench/common/stunner/bpmn/client/marshall/converters/customproperties/CustomElement.java", "diffHunk": "@@ -30,7 +30,21 @@\n     public static final MetadataTypeDefinition<Boolean> autoStart = new BooleanElement(\"customAutoStart\", false);\n     public static final MetadataTypeDefinition<Boolean> autoConnectionSource = new BooleanElement(\"isAutoConnection.source\", false);\n     public static final MetadataTypeDefinition<Boolean> autoConnectionTarget = new BooleanElement(\"isAutoConnection.target\", false);\n-    public static final MetadataTypeDefinition<Boolean> customKPI = new BooleanElement(\"customKPI\", false);\n+    public static final MetadataTypeDefinition<String> customTags = new StringElement(\"customTags\", \"[]\") {\n+        // Need to use an intermediary character since Variables depend on comma separators\n+        @Override\n+        public String getValue(BaseElement element) {\n+            return getStringValue(element)\n+                    .orElse(getDefaultValue()).replace(\",\", \";\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19666db4213ffeccddce968ef2eb1cfe0a564209"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg1NjYxMg==", "bodyText": "replace or replaceAll here too?'", "url": "https://github.com/kiegroup/kie-wb-common/pull/3248#discussion_r399856612", "createdAt": "2020-03-29T21:29:51Z", "author": {"login": "romartin"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-marshalling/src/main/java/org/kie/workbench/common/stunner/bpmn/client/marshall/converters/customproperties/CustomElement.java", "diffHunk": "@@ -30,7 +30,21 @@\n     public static final MetadataTypeDefinition<Boolean> autoStart = new BooleanElement(\"customAutoStart\", false);\n     public static final MetadataTypeDefinition<Boolean> autoConnectionSource = new BooleanElement(\"isAutoConnection.source\", false);\n     public static final MetadataTypeDefinition<Boolean> autoConnectionTarget = new BooleanElement(\"isAutoConnection.target\", false);\n-    public static final MetadataTypeDefinition<Boolean> customKPI = new BooleanElement(\"customKPI\", false);\n+    public static final MetadataTypeDefinition<String> customTags = new StringElement(\"customTags\", \"[]\") {\n+        // Need to use an intermediary character since Variables depend on comma separators\n+        @Override\n+        public String getValue(BaseElement element) {\n+            return getStringValue(element)\n+                    .orElse(getDefaultValue()).replace(\",\", \";\");\n+        }\n+\n+        @Override\n+        public void setValue(BaseElement element, String value) {\n+            value = value.replace(\";\", \",\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19666db4213ffeccddce968ef2eb1cfe0a564209"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg1NzQxMA==", "bodyText": "In general I see this VariableListItemWidgetViewImpl class, which is a view implementation, plenty of logic. Not sure in the already existing stuff, but at least looking at all below new methods.\nThe ideal should be having no logic on the view implementations, this way the classes are easier to test and most important, it results easy to manage the code and move to other (future ) implementation of a view, by reusing the same presenter classes and unit tests.\nSo it does not worth adding a comment for each of the conditional or looping expressions below in this class, just give it a second look now, try to see wihch logics can be moved to presenter, and then we can do second review iteration for this class. So please, could you try to refactor this a bit and try to decouple the logic as much as possible from the view?\nPS: Also could you please use private access modifier for the fields in the class? mostly are protected, not sure if for some reaon...\nThanks!", "url": "https://github.com/kiegroup/kie-wb-common/pull/3248#discussion_r399857410", "createdAt": "2020-03-29T21:37:27Z", "author": {"login": "romartin"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/main/java/org/kie/workbench/common/stunner/bpmn/client/forms/fields/variablesEditor/VariableListItemWidgetViewImpl.java", "diffHunk": "@@ -58,7 +77,7 @@\n  * they use a combination of ListBox and TextBox to implement a drop-down combo\n  * to hold the values.\n  */\n-@Templated(\"VariablesEditorWidget.html#variableRow\")\n+@Templated(value = \"VariablesEditorWidget.html#variableRow\", stylesheet = \"VariablesEditorWidget.css\")\n public class VariableListItemWidgetViewImpl implements VariableListItemWidgetView,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "19666db4213ffeccddce968ef2eb1cfe0a564209"}, "originalPosition": 54}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "19666db4213ffeccddce968ef2eb1cfe0a564209", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/19666db4213ffeccddce968ef2eb1cfe0a564209", "committedDate": "2020-03-28T04:39:58Z", "message": "KOGITO-1020 : VSCode - BPMN modeler support variables tagging - Added tests for Sonar Cloud"}, "afterCommit": {"oid": "d06b0234ca081c4e36f54889bd8636c9baca1532", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/d06b0234ca081c4e36f54889bd8636c9baca1532", "committedDate": "2020-03-31T00:15:59Z", "message": "KOGITO-1020 : VSCode - BPMN modeler support variables tagging - Added tests for Sonar Cloud"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d06b0234ca081c4e36f54889bd8636c9baca1532", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/d06b0234ca081c4e36f54889bd8636c9baca1532", "committedDate": "2020-03-31T00:15:59Z", "message": "KOGITO-1020 : VSCode - BPMN modeler support variables tagging - Added tests for Sonar Cloud"}, "afterCommit": {"oid": "737f662ed0527715dd8c20c1557852f2b1a5bc9a", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/737f662ed0527715dd8c20c1557852f2b1a5bc9a", "committedDate": "2020-04-01T03:45:17Z", "message": "KOGITO-1020 : VSCode - BPMN modeler support variables tagging - Fixed Sonarcloud issues / Reviews"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f789112d784ed5bc582c289c55afd77c6b98dc63", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/f789112d784ed5bc582c289c55afd77c6b98dc63", "committedDate": "2020-04-02T01:46:21Z", "message": "KOGITO-1020 : VSCode - BPMN modeler support variables tagging - Fixed Sonarcloud issues / Reviews"}, "afterCommit": {"oid": "2a7cd7309cfd34618c2135801375c19f9f0fea7e", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/2a7cd7309cfd34618c2135801375c19f9f0fea7e", "committedDate": "2020-04-02T17:49:09Z", "message": "KOGITO-1020 : VSCode - BPMN modeler support variables tagging - Fixed Sonarcloud issues / Reviews"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg4Njk3ODUz", "url": "https://github.com/kiegroup/kie-wb-common/pull/3248#pullrequestreview-388697853", "createdAt": "2020-04-06T23:58:11Z", "commit": {"oid": "ed0fcb20ee31dda4f780b5b9c7816881b49e1dc4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5NDY1NzMw", "url": "https://github.com/kiegroup/kie-wb-common/pull/3248#pullrequestreview-389465730", "createdAt": "2020-04-07T20:28:55Z", "commit": {"oid": "ed0fcb20ee31dda4f780b5b9c7816881b49e1dc4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwMTY1MDYw", "url": "https://github.com/kiegroup/kie-wb-common/pull/3248#pullrequestreview-390165060", "createdAt": "2020-04-08T17:03:51Z", "commit": {"oid": "ed0fcb20ee31dda4f780b5b9c7816881b49e1dc4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ed0fcb20ee31dda4f780b5b9c7816881b49e1dc4", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/ed0fcb20ee31dda4f780b5b9c7816881b49e1dc4", "committedDate": "2020-04-02T19:58:29Z", "message": "KOGITO-1020 : VSCode - BPMN modeler support variables tagging - Fixed BUG"}, "afterCommit": {"oid": "02ea5d7de770a5db8e26840de49721e978d105d1", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/02ea5d7de770a5db8e26840de49721e978d105d1", "committedDate": "2020-04-08T18:14:17Z", "message": "KOGITO-1020 : VSCode - BPMN modeler support variables tagging"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf13c6c859c033f298cfc7a90f33d5d93109780e", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/bf13c6c859c033f298cfc7a90f33d5d93109780e", "committedDate": "2020-04-08T23:10:01Z", "message": "KOGITO-1020 : VSCode - BPMN modeler support variables tagging"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c01ba1558a0a1e6a6754246189e6f8993bb332b8", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/c01ba1558a0a1e6a6754246189e6f8993bb332b8", "committedDate": "2020-04-09T02:19:48Z", "message": "KOGITO-1020 : VSCode - BPMN modeler support variables tagging - Fixed Test Failures / Conflicts"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "02ea5d7de770a5db8e26840de49721e978d105d1", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/02ea5d7de770a5db8e26840de49721e978d105d1", "committedDate": "2020-04-08T18:14:17Z", "message": "KOGITO-1020 : VSCode - BPMN modeler support variables tagging"}, "afterCommit": {"oid": "c01ba1558a0a1e6a6754246189e6f8993bb332b8", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/c01ba1558a0a1e6a6754246189e6f8993bb332b8", "committedDate": "2020-04-09T02:19:48Z", "message": "KOGITO-1020 : VSCode - BPMN modeler support variables tagging - Fixed Test Failures / Conflicts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwOTM3MDkw", "url": "https://github.com/kiegroup/kie-wb-common/pull/3248#pullrequestreview-390937090", "createdAt": "2020-04-09T16:14:22Z", "commit": {"oid": "c01ba1558a0a1e6a6754246189e6f8993bb332b8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxMDg2NzAx", "url": "https://github.com/kiegroup/kie-wb-common/pull/3248#pullrequestreview-391086701", "createdAt": "2020-04-09T19:52:05Z", "commit": {"oid": "c01ba1558a0a1e6a6754246189e6f8993bb332b8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 566, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}