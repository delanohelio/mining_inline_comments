{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYwMDY3NDQ2", "number": 3101, "title": "[KOGITO-844] Replacing VFSService with ResourceContentService", "bodyText": "See https://issues.redhat.com/browse/KOGITO-844\nThis PR is needed to avoid propagation of backend modules to kogito editors.", "createdAt": "2020-01-07T16:25:45Z", "url": "https://github.com/kiegroup/kie-wb-common/pull/3101", "merged": true, "mergeCommit": {"oid": "28af07d5d80eb1bdb7bb36beb8f41afc3988e7d7"}, "closed": true, "closedAt": "2020-01-14T09:14:55Z", "author": {"login": "gitgabrio"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4DRaEgH2gAyMzYwMDY3NDQ2OjZmODM3YzRlNDQ4NTNjN2ViODE4MmIyMWM1YjY2NTgyMjcxZWZlODg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb59ylCAFqTM0MTkxMDIzOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6f837c4e44853c7eb8182b21c5b66582271efe88", "author": {"user": {"login": "gitgabrio", "name": "Gabriele Cardosi"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/6f837c4e44853c7eb8182b21c5b66582271efe88", "committedDate": "2020-01-07T16:23:25Z", "message": "[KOGITO-884] Replacing VFSService with ResourceContentService"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e718392f46cdf967a22082b582e81f1ed4553bf7", "author": {"user": {"login": "gitgabrio", "name": "Gabriele Cardosi"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/e718392f46cdf967a22082b582e81f1ed4553bf7", "committedDate": "2020-01-08T09:25:46Z", "message": "Merge remote-tracking branch 'origin/master' into KOGITO-844"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5246cf78bc418dbbb168cd1f4e98ff70b7d7d221", "author": {"user": {"login": "gitgabrio", "name": "Gabriele Cardosi"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/5246cf78bc418dbbb168cd1f4e98ff70b7d7d221", "committedDate": "2020-01-08T16:25:22Z", "message": "Merge remote-tracking branch 'origin/master' into KOGITO-844"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8ca02f4f26267b6f7e7b08acf814c10cb8f91e9", "author": {"user": {"login": "gitgabrio", "name": "Gabriele Cardosi"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/a8ca02f4f26267b6f7e7b08acf814c10cb8f91e9", "committedDate": "2020-01-10T09:18:00Z", "message": "[KOGITO-844] Minor modifications"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxMTQzODcy", "url": "https://github.com/kiegroup/kie-wb-common/pull/3101#pullrequestreview-341143872", "createdAt": "2020-01-10T12:54:37Z", "commit": {"oid": "a8ca02f4f26267b6f7e7b08acf814c10cb8f91e9"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a9b8f7925274094d1d65036a7a3865c6eadd39c", "author": {"user": {"login": "gitgabrio", "name": "Gabriele Cardosi"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/6a9b8f7925274094d1d65036a7a3865c6eadd39c", "committedDate": "2020-01-10T13:49:45Z", "message": "[KOGITO-844] Fixed API usage"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04e3b0f9938f5580170968202c55d3554854b8be", "author": {"user": {"login": "gitgabrio", "name": "Gabriele Cardosi"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/04e3b0f9938f5580170968202c55d3554854b8be", "committedDate": "2020-01-13T10:16:04Z", "message": "[KOGITO-844] Fixed promise usage. Implemented catch test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ac74165f8acb9ae807fc52b10200877545a9d82", "author": {"user": {"login": "gitgabrio", "name": "Gabriele Cardosi"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/6ac74165f8acb9ae807fc52b10200877545a9d82", "committedDate": "2020-01-13T10:16:46Z", "message": "Merge remote-tracking branch 'origin/master' into KOGITO-844"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNzk1NzQx", "url": "https://github.com/kiegroup/kie-wb-common/pull/3101#pullrequestreview-341795741", "createdAt": "2020-01-13T11:59:47Z", "commit": {"oid": "6ac74165f8acb9ae807fc52b10200877545a9d82"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxODQ3NjIz", "url": "https://github.com/kiegroup/kie-wb-common/pull/3101#pullrequestreview-341847623", "createdAt": "2020-01-13T13:38:17Z", "commit": {"oid": "6ac74165f8acb9ae807fc52b10200877545a9d82"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxODUzMzI2", "url": "https://github.com/kiegroup/kie-wb-common/pull/3101#pullrequestreview-341853326", "createdAt": "2020-01-13T13:47:26Z", "commit": {"oid": "6ac74165f8acb9ae807fc52b10200877545a9d82"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxODY2NTI0", "url": "https://github.com/kiegroup/kie-wb-common/pull/3101#pullrequestreview-341866524", "createdAt": "2020-01-13T14:07:41Z", "commit": {"oid": "6ac74165f8acb9ae807fc52b10200877545a9d82"}, "state": "COMMENTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNDowNzo0MlrOFc3-lA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNDoxMjoxNlrOFc4HmQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgyMTU4OA==", "bodyText": "So is the first parameter uri or path? I am confused after reading javadoc.", "url": "https://github.com/kiegroup/kie-wb-common/pull/3101#discussion_r365821588", "createdAt": "2020-01-13T14:07:42Z", "author": {"login": "jomarko"}, "path": "kie-wb-common-kogito/kie-wb-common-kogito-webapp-base/src/main/java/org/kie/workbench/common/kogito/webapp/base/client/workarounds/KogitoResourceContentService.java", "diffHunk": "@@ -0,0 +1,127 @@\n+/*\n+ * Copyright 2019 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.kie.workbench.common.kogito.webapp.base.client.workarounds;\n+\n+import java.util.Arrays;\n+import java.util.List;\n+\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.inject.Inject;\n+\n+import elemental2.promise.IThenable;\n+import org.appformer.kogito.bridge.client.resource.ResourceContentService;\n+import org.jboss.errai.common.client.api.ErrorCallback;\n+import org.jboss.errai.common.client.api.RemoteCallback;\n+import org.uberfire.client.mvp.PlaceManager;\n+import org.uberfire.client.promise.Promises;\n+import org.uberfire.mvp.PlaceRequest;\n+import org.uberfire.mvp.impl.DefaultPlaceRequest;\n+\n+/**\n+ * Class used to provide <i>resources</i> access to <i>kogito editors</i>\n+ */\n+@ApplicationScoped\n+public class KogitoResourceContentService {\n+\n+    public static final String CONTENT_PARAMETER_NAME = \"content\";\n+    public static final String FILE_NAME_PARAMETER_NAME = \"fileName\";\n+    private PlaceManager placeManager;\n+    private ResourceContentService resourceContentService;\n+    private Promises promises;\n+\n+    private KogitoResourceContentService() {\n+        //CDI proxy\n+    }\n+\n+    @Inject\n+    public KogitoResourceContentService(final PlaceManager placeManager,\n+                                        final ResourceContentService resourceContentService,\n+                                        final Promises promises) {\n+        this.placeManager = placeManager;\n+        this.resourceContentService = resourceContentService;\n+        this.promises = promises;\n+    }\n+\n+    /**\n+     * Open a file at given <code>Path</code> inside an <b>editor</b>\n+     * @param fileUri the <b>uri</code> to the file\n+     * @param editorId The <b>id</b> of the editor to open by the <code>PlaceRequest</code>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ac74165f8acb9ae807fc52b10200877545a9d82"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgyMTk1MA==", "bodyText": "similar question uri vs path", "url": "https://github.com/kiegroup/kie-wb-common/pull/3101#discussion_r365821950", "createdAt": "2020-01-13T14:08:24Z", "author": {"login": "jomarko"}, "path": "kie-wb-common-kogito/kie-wb-common-kogito-webapp-base/src/main/java/org/kie/workbench/common/kogito/webapp/base/client/workarounds/KogitoResourceContentService.java", "diffHunk": "@@ -0,0 +1,127 @@\n+/*\n+ * Copyright 2019 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.kie.workbench.common.kogito.webapp.base.client.workarounds;\n+\n+import java.util.Arrays;\n+import java.util.List;\n+\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.inject.Inject;\n+\n+import elemental2.promise.IThenable;\n+import org.appformer.kogito.bridge.client.resource.ResourceContentService;\n+import org.jboss.errai.common.client.api.ErrorCallback;\n+import org.jboss.errai.common.client.api.RemoteCallback;\n+import org.uberfire.client.mvp.PlaceManager;\n+import org.uberfire.client.promise.Promises;\n+import org.uberfire.mvp.PlaceRequest;\n+import org.uberfire.mvp.impl.DefaultPlaceRequest;\n+\n+/**\n+ * Class used to provide <i>resources</i> access to <i>kogito editors</i>\n+ */\n+@ApplicationScoped\n+public class KogitoResourceContentService {\n+\n+    public static final String CONTENT_PARAMETER_NAME = \"content\";\n+    public static final String FILE_NAME_PARAMETER_NAME = \"fileName\";\n+    private PlaceManager placeManager;\n+    private ResourceContentService resourceContentService;\n+    private Promises promises;\n+\n+    private KogitoResourceContentService() {\n+        //CDI proxy\n+    }\n+\n+    @Inject\n+    public KogitoResourceContentService(final PlaceManager placeManager,\n+                                        final ResourceContentService resourceContentService,\n+                                        final Promises promises) {\n+        this.placeManager = placeManager;\n+        this.resourceContentService = resourceContentService;\n+        this.promises = promises;\n+    }\n+\n+    /**\n+     * Open a file at given <code>Path</code> inside an <b>editor</b>\n+     * @param fileUri the <b>uri</code> to the file\n+     * @param editorId The <b>id</b> of the editor to open by the <code>PlaceRequest</code>\n+     */\n+    public void openFile(final String fileUri,\n+                         final String editorId) {\n+        resourceContentService.get(fileUri).then((IThenable.ThenOnFulfilledCallbackFn<String, Void>) fileContent -> {\n+            final PlaceRequest placeRequest = new DefaultPlaceRequest(editorId);\n+            placeRequest.addParameter(FILE_NAME_PARAMETER_NAME, fileUri);\n+            placeRequest.addParameter(CONTENT_PARAMETER_NAME, fileContent);\n+            placeManager.goTo(placeRequest);\n+            return promises.resolve();\n+        });\n+    }\n+\n+    /**\n+     * Load the file at given <code>Path</code> and returns content inside a callback\n+     * @param fileUri\n+     * @param callback\n+     */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ac74165f8acb9ae807fc52b10200877545a9d82"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgyMjUwNg==", "bodyText": "Don't we need something similar for opening file?", "url": "https://github.com/kiegroup/kie-wb-common/pull/3101#discussion_r365822506", "createdAt": "2020-01-13T14:09:37Z", "author": {"login": "jomarko"}, "path": "kie-wb-common-kogito/kie-wb-common-kogito-webapp-base/src/main/java/org/kie/workbench/common/kogito/webapp/base/client/workarounds/KogitoResourceContentService.java", "diffHunk": "@@ -0,0 +1,127 @@\n+/*\n+ * Copyright 2019 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.kie.workbench.common.kogito.webapp.base.client.workarounds;\n+\n+import java.util.Arrays;\n+import java.util.List;\n+\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.inject.Inject;\n+\n+import elemental2.promise.IThenable;\n+import org.appformer.kogito.bridge.client.resource.ResourceContentService;\n+import org.jboss.errai.common.client.api.ErrorCallback;\n+import org.jboss.errai.common.client.api.RemoteCallback;\n+import org.uberfire.client.mvp.PlaceManager;\n+import org.uberfire.client.promise.Promises;\n+import org.uberfire.mvp.PlaceRequest;\n+import org.uberfire.mvp.impl.DefaultPlaceRequest;\n+\n+/**\n+ * Class used to provide <i>resources</i> access to <i>kogito editors</i>\n+ */\n+@ApplicationScoped\n+public class KogitoResourceContentService {\n+\n+    public static final String CONTENT_PARAMETER_NAME = \"content\";\n+    public static final String FILE_NAME_PARAMETER_NAME = \"fileName\";\n+    private PlaceManager placeManager;\n+    private ResourceContentService resourceContentService;\n+    private Promises promises;\n+\n+    private KogitoResourceContentService() {\n+        //CDI proxy\n+    }\n+\n+    @Inject\n+    public KogitoResourceContentService(final PlaceManager placeManager,\n+                                        final ResourceContentService resourceContentService,\n+                                        final Promises promises) {\n+        this.placeManager = placeManager;\n+        this.resourceContentService = resourceContentService;\n+        this.promises = promises;\n+    }\n+\n+    /**\n+     * Open a file at given <code>Path</code> inside an <b>editor</b>\n+     * @param fileUri the <b>uri</code> to the file\n+     * @param editorId The <b>id</b> of the editor to open by the <code>PlaceRequest</code>\n+     */\n+    public void openFile(final String fileUri,\n+                         final String editorId) {\n+        resourceContentService.get(fileUri).then((IThenable.ThenOnFulfilledCallbackFn<String, Void>) fileContent -> {\n+            final PlaceRequest placeRequest = new DefaultPlaceRequest(editorId);\n+            placeRequest.addParameter(FILE_NAME_PARAMETER_NAME, fileUri);\n+            placeRequest.addParameter(CONTENT_PARAMETER_NAME, fileContent);\n+            placeManager.goTo(placeRequest);\n+            return promises.resolve();\n+        });\n+    }\n+\n+    /**\n+     * Load the file at given <code>Path</code> and returns content inside a callback\n+     * @param fileUri\n+     * @param callback\n+     */\n+    public void loadFile(final String fileUri,\n+                         final RemoteCallback<String> callback,\n+                         final ErrorCallback<Object> errorCallback) {\n+        resourceContentService.get(fileUri).then((IThenable.ThenOnFulfilledCallbackFn<String, Void>) fileContent -> {\n+                                                     callback.callback(fileContent);\n+                                                     return promises.resolve();\n+                                                 })\n+                .catch_(error -> {\n+                    errorCallback.error(\"Error \" + error, new Throwable(\"Failed to load file \" + fileUri));\n+                    return null;\n+                })", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ac74165f8acb9ae807fc52b10200877545a9d82"}, "originalPosition": 89}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgyMzU2Mw==", "bodyText": "Can we clarify the javadoc and state that obtained list is returned via callback. As the method returns void?", "url": "https://github.com/kiegroup/kie-wb-common/pull/3101#discussion_r365823563", "createdAt": "2020-01-13T14:11:40Z", "author": {"login": "jomarko"}, "path": "kie-wb-common-kogito/kie-wb-common-kogito-webapp-base/src/main/java/org/kie/workbench/common/kogito/webapp/base/client/workarounds/KogitoResourceContentService.java", "diffHunk": "@@ -0,0 +1,127 @@\n+/*\n+ * Copyright 2019 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.kie.workbench.common.kogito.webapp.base.client.workarounds;\n+\n+import java.util.Arrays;\n+import java.util.List;\n+\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.inject.Inject;\n+\n+import elemental2.promise.IThenable;\n+import org.appformer.kogito.bridge.client.resource.ResourceContentService;\n+import org.jboss.errai.common.client.api.ErrorCallback;\n+import org.jboss.errai.common.client.api.RemoteCallback;\n+import org.uberfire.client.mvp.PlaceManager;\n+import org.uberfire.client.promise.Promises;\n+import org.uberfire.mvp.PlaceRequest;\n+import org.uberfire.mvp.impl.DefaultPlaceRequest;\n+\n+/**\n+ * Class used to provide <i>resources</i> access to <i>kogito editors</i>\n+ */\n+@ApplicationScoped\n+public class KogitoResourceContentService {\n+\n+    public static final String CONTENT_PARAMETER_NAME = \"content\";\n+    public static final String FILE_NAME_PARAMETER_NAME = \"fileName\";\n+    private PlaceManager placeManager;\n+    private ResourceContentService resourceContentService;\n+    private Promises promises;\n+\n+    private KogitoResourceContentService() {\n+        //CDI proxy\n+    }\n+\n+    @Inject\n+    public KogitoResourceContentService(final PlaceManager placeManager,\n+                                        final ResourceContentService resourceContentService,\n+                                        final Promises promises) {\n+        this.placeManager = placeManager;\n+        this.resourceContentService = resourceContentService;\n+        this.promises = promises;\n+    }\n+\n+    /**\n+     * Open a file at given <code>Path</code> inside an <b>editor</b>\n+     * @param fileUri the <b>uri</code> to the file\n+     * @param editorId The <b>id</b> of the editor to open by the <code>PlaceRequest</code>\n+     */\n+    public void openFile(final String fileUri,\n+                         final String editorId) {\n+        resourceContentService.get(fileUri).then((IThenable.ThenOnFulfilledCallbackFn<String, Void>) fileContent -> {\n+            final PlaceRequest placeRequest = new DefaultPlaceRequest(editorId);\n+            placeRequest.addParameter(FILE_NAME_PARAMETER_NAME, fileUri);\n+            placeRequest.addParameter(CONTENT_PARAMETER_NAME, fileContent);\n+            placeManager.goTo(placeRequest);\n+            return promises.resolve();\n+        });\n+    }\n+\n+    /**\n+     * Load the file at given <code>Path</code> and returns content inside a callback\n+     * @param fileUri\n+     * @param callback\n+     */\n+    public void loadFile(final String fileUri,\n+                         final RemoteCallback<String> callback,\n+                         final ErrorCallback<Object> errorCallback) {\n+        resourceContentService.get(fileUri).then((IThenable.ThenOnFulfilledCallbackFn<String, Void>) fileContent -> {\n+                                                     callback.callback(fileContent);\n+                                                     return promises.resolve();\n+                                                 })\n+                .catch_(error -> {\n+                    errorCallback.error(\"Error \" + error, new Throwable(\"Failed to load file \" + fileUri));\n+                    return null;\n+                })\n+        ;\n+    }\n+\n+    /**\n+     * Get the <code>List&lt;Path&gt;</code> from the project/workspace where the editor is running", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ac74165f8acb9ae807fc52b10200877545a9d82"}, "originalPosition": 94}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgyMzYyNA==", "bodyText": "formatting", "url": "https://github.com/kiegroup/kie-wb-common/pull/3101#discussion_r365823624", "createdAt": "2020-01-13T14:11:47Z", "author": {"login": "jomarko"}, "path": "kie-wb-common-kogito/kie-wb-common-kogito-webapp-base/src/main/java/org/kie/workbench/common/kogito/webapp/base/client/workarounds/KogitoResourceContentService.java", "diffHunk": "@@ -0,0 +1,127 @@\n+/*\n+ * Copyright 2019 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.kie.workbench.common.kogito.webapp.base.client.workarounds;\n+\n+import java.util.Arrays;\n+import java.util.List;\n+\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.inject.Inject;\n+\n+import elemental2.promise.IThenable;\n+import org.appformer.kogito.bridge.client.resource.ResourceContentService;\n+import org.jboss.errai.common.client.api.ErrorCallback;\n+import org.jboss.errai.common.client.api.RemoteCallback;\n+import org.uberfire.client.mvp.PlaceManager;\n+import org.uberfire.client.promise.Promises;\n+import org.uberfire.mvp.PlaceRequest;\n+import org.uberfire.mvp.impl.DefaultPlaceRequest;\n+\n+/**\n+ * Class used to provide <i>resources</i> access to <i>kogito editors</i>\n+ */\n+@ApplicationScoped\n+public class KogitoResourceContentService {\n+\n+    public static final String CONTENT_PARAMETER_NAME = \"content\";\n+    public static final String FILE_NAME_PARAMETER_NAME = \"fileName\";\n+    private PlaceManager placeManager;\n+    private ResourceContentService resourceContentService;\n+    private Promises promises;\n+\n+    private KogitoResourceContentService() {\n+        //CDI proxy\n+    }\n+\n+    @Inject\n+    public KogitoResourceContentService(final PlaceManager placeManager,\n+                                        final ResourceContentService resourceContentService,\n+                                        final Promises promises) {\n+        this.placeManager = placeManager;\n+        this.resourceContentService = resourceContentService;\n+        this.promises = promises;\n+    }\n+\n+    /**\n+     * Open a file at given <code>Path</code> inside an <b>editor</b>\n+     * @param fileUri the <b>uri</code> to the file\n+     * @param editorId The <b>id</b> of the editor to open by the <code>PlaceRequest</code>\n+     */\n+    public void openFile(final String fileUri,\n+                         final String editorId) {\n+        resourceContentService.get(fileUri).then((IThenable.ThenOnFulfilledCallbackFn<String, Void>) fileContent -> {\n+            final PlaceRequest placeRequest = new DefaultPlaceRequest(editorId);\n+            placeRequest.addParameter(FILE_NAME_PARAMETER_NAME, fileUri);\n+            placeRequest.addParameter(CONTENT_PARAMETER_NAME, fileContent);\n+            placeManager.goTo(placeRequest);\n+            return promises.resolve();\n+        });\n+    }\n+\n+    /**\n+     * Load the file at given <code>Path</code> and returns content inside a callback\n+     * @param fileUri\n+     * @param callback\n+     */\n+    public void loadFile(final String fileUri,\n+                         final RemoteCallback<String> callback,\n+                         final ErrorCallback<Object> errorCallback) {\n+        resourceContentService.get(fileUri).then((IThenable.ThenOnFulfilledCallbackFn<String, Void>) fileContent -> {\n+                                                     callback.callback(fileContent);\n+                                                     return promises.resolve();\n+                                                 })\n+                .catch_(error -> {\n+                    errorCallback.error(\"Error \" + error, new Throwable(\"Failed to load file \" + fileUri));\n+                    return null;\n+                })\n+        ;\n+    }\n+\n+    /**\n+     * Get the <code>List&lt;Path&gt;</code> from the project/workspace where the editor is running\n+     *\n+     * @param callback\n+     * @param errorCallback\n+     *\n+     * @see ResourceContentService#list(String)\n+     */\n+    public void getAllItems(final RemoteCallback<List<String>> callback,\n+                               final ErrorCallback<Object> errorCallback) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ac74165f8acb9ae807fc52b10200877545a9d82"}, "originalPosition": 102}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgyMzgwNA==", "bodyText": "similar question as above", "url": "https://github.com/kiegroup/kie-wb-common/pull/3101#discussion_r365823804", "createdAt": "2020-01-13T14:12:06Z", "author": {"login": "jomarko"}, "path": "kie-wb-common-kogito/kie-wb-common-kogito-webapp-base/src/main/java/org/kie/workbench/common/kogito/webapp/base/client/workarounds/KogitoResourceContentService.java", "diffHunk": "@@ -0,0 +1,127 @@\n+/*\n+ * Copyright 2019 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.kie.workbench.common.kogito.webapp.base.client.workarounds;\n+\n+import java.util.Arrays;\n+import java.util.List;\n+\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.inject.Inject;\n+\n+import elemental2.promise.IThenable;\n+import org.appformer.kogito.bridge.client.resource.ResourceContentService;\n+import org.jboss.errai.common.client.api.ErrorCallback;\n+import org.jboss.errai.common.client.api.RemoteCallback;\n+import org.uberfire.client.mvp.PlaceManager;\n+import org.uberfire.client.promise.Promises;\n+import org.uberfire.mvp.PlaceRequest;\n+import org.uberfire.mvp.impl.DefaultPlaceRequest;\n+\n+/**\n+ * Class used to provide <i>resources</i> access to <i>kogito editors</i>\n+ */\n+@ApplicationScoped\n+public class KogitoResourceContentService {\n+\n+    public static final String CONTENT_PARAMETER_NAME = \"content\";\n+    public static final String FILE_NAME_PARAMETER_NAME = \"fileName\";\n+    private PlaceManager placeManager;\n+    private ResourceContentService resourceContentService;\n+    private Promises promises;\n+\n+    private KogitoResourceContentService() {\n+        //CDI proxy\n+    }\n+\n+    @Inject\n+    public KogitoResourceContentService(final PlaceManager placeManager,\n+                                        final ResourceContentService resourceContentService,\n+                                        final Promises promises) {\n+        this.placeManager = placeManager;\n+        this.resourceContentService = resourceContentService;\n+        this.promises = promises;\n+    }\n+\n+    /**\n+     * Open a file at given <code>Path</code> inside an <b>editor</b>\n+     * @param fileUri the <b>uri</code> to the file\n+     * @param editorId The <b>id</b> of the editor to open by the <code>PlaceRequest</code>\n+     */\n+    public void openFile(final String fileUri,\n+                         final String editorId) {\n+        resourceContentService.get(fileUri).then((IThenable.ThenOnFulfilledCallbackFn<String, Void>) fileContent -> {\n+            final PlaceRequest placeRequest = new DefaultPlaceRequest(editorId);\n+            placeRequest.addParameter(FILE_NAME_PARAMETER_NAME, fileUri);\n+            placeRequest.addParameter(CONTENT_PARAMETER_NAME, fileContent);\n+            placeManager.goTo(placeRequest);\n+            return promises.resolve();\n+        });\n+    }\n+\n+    /**\n+     * Load the file at given <code>Path</code> and returns content inside a callback\n+     * @param fileUri\n+     * @param callback\n+     */\n+    public void loadFile(final String fileUri,\n+                         final RemoteCallback<String> callback,\n+                         final ErrorCallback<Object> errorCallback) {\n+        resourceContentService.get(fileUri).then((IThenable.ThenOnFulfilledCallbackFn<String, Void>) fileContent -> {\n+                                                     callback.callback(fileContent);\n+                                                     return promises.resolve();\n+                                                 })\n+                .catch_(error -> {\n+                    errorCallback.error(\"Error \" + error, new Throwable(\"Failed to load file \" + fileUri));\n+                    return null;\n+                })\n+        ;\n+    }\n+\n+    /**\n+     * Get the <code>List&lt;Path&gt;</code> from the project/workspace where the editor is running\n+     *\n+     * @param callback\n+     * @param errorCallback\n+     *\n+     * @see ResourceContentService#list(String)\n+     */\n+    public void getAllItems(final RemoteCallback<List<String>> callback,\n+                               final ErrorCallback<Object> errorCallback) {\n+        getFilteredItems(\"*\", callback, errorCallback);\n+    }\n+\n+    /**\n+     * Get <b>filtered</b> <code>List&lt;Path&gt;</code> from the project/workspace where the editor is running\n+     * @param pattern A GLOB pattern to filter files. To list all files use \"*\"\n+     * @param callback\n+     * @param errorCallback\n+     *\n+     * @see ResourceContentService#list(String)\n+     */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ac74165f8acb9ae807fc52b10200877545a9d82"}, "originalPosition": 113}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgyMzg5Nw==", "bodyText": "formating", "url": "https://github.com/kiegroup/kie-wb-common/pull/3101#discussion_r365823897", "createdAt": "2020-01-13T14:12:16Z", "author": {"login": "jomarko"}, "path": "kie-wb-common-kogito/kie-wb-common-kogito-webapp-base/src/main/java/org/kie/workbench/common/kogito/webapp/base/client/workarounds/KogitoResourceContentService.java", "diffHunk": "@@ -0,0 +1,127 @@\n+/*\n+ * Copyright 2019 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.kie.workbench.common.kogito.webapp.base.client.workarounds;\n+\n+import java.util.Arrays;\n+import java.util.List;\n+\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.inject.Inject;\n+\n+import elemental2.promise.IThenable;\n+import org.appformer.kogito.bridge.client.resource.ResourceContentService;\n+import org.jboss.errai.common.client.api.ErrorCallback;\n+import org.jboss.errai.common.client.api.RemoteCallback;\n+import org.uberfire.client.mvp.PlaceManager;\n+import org.uberfire.client.promise.Promises;\n+import org.uberfire.mvp.PlaceRequest;\n+import org.uberfire.mvp.impl.DefaultPlaceRequest;\n+\n+/**\n+ * Class used to provide <i>resources</i> access to <i>kogito editors</i>\n+ */\n+@ApplicationScoped\n+public class KogitoResourceContentService {\n+\n+    public static final String CONTENT_PARAMETER_NAME = \"content\";\n+    public static final String FILE_NAME_PARAMETER_NAME = \"fileName\";\n+    private PlaceManager placeManager;\n+    private ResourceContentService resourceContentService;\n+    private Promises promises;\n+\n+    private KogitoResourceContentService() {\n+        //CDI proxy\n+    }\n+\n+    @Inject\n+    public KogitoResourceContentService(final PlaceManager placeManager,\n+                                        final ResourceContentService resourceContentService,\n+                                        final Promises promises) {\n+        this.placeManager = placeManager;\n+        this.resourceContentService = resourceContentService;\n+        this.promises = promises;\n+    }\n+\n+    /**\n+     * Open a file at given <code>Path</code> inside an <b>editor</b>\n+     * @param fileUri the <b>uri</code> to the file\n+     * @param editorId The <b>id</b> of the editor to open by the <code>PlaceRequest</code>\n+     */\n+    public void openFile(final String fileUri,\n+                         final String editorId) {\n+        resourceContentService.get(fileUri).then((IThenable.ThenOnFulfilledCallbackFn<String, Void>) fileContent -> {\n+            final PlaceRequest placeRequest = new DefaultPlaceRequest(editorId);\n+            placeRequest.addParameter(FILE_NAME_PARAMETER_NAME, fileUri);\n+            placeRequest.addParameter(CONTENT_PARAMETER_NAME, fileContent);\n+            placeManager.goTo(placeRequest);\n+            return promises.resolve();\n+        });\n+    }\n+\n+    /**\n+     * Load the file at given <code>Path</code> and returns content inside a callback\n+     * @param fileUri\n+     * @param callback\n+     */\n+    public void loadFile(final String fileUri,\n+                         final RemoteCallback<String> callback,\n+                         final ErrorCallback<Object> errorCallback) {\n+        resourceContentService.get(fileUri).then((IThenable.ThenOnFulfilledCallbackFn<String, Void>) fileContent -> {\n+                                                     callback.callback(fileContent);\n+                                                     return promises.resolve();\n+                                                 })\n+                .catch_(error -> {\n+                    errorCallback.error(\"Error \" + error, new Throwable(\"Failed to load file \" + fileUri));\n+                    return null;\n+                })\n+        ;\n+    }\n+\n+    /**\n+     * Get the <code>List&lt;Path&gt;</code> from the project/workspace where the editor is running\n+     *\n+     * @param callback\n+     * @param errorCallback\n+     *\n+     * @see ResourceContentService#list(String)\n+     */\n+    public void getAllItems(final RemoteCallback<List<String>> callback,\n+                               final ErrorCallback<Object> errorCallback) {\n+        getFilteredItems(\"*\", callback, errorCallback);\n+    }\n+\n+    /**\n+     * Get <b>filtered</b> <code>List&lt;Path&gt;</code> from the project/workspace where the editor is running\n+     * @param pattern A GLOB pattern to filter files. To list all files use \"*\"\n+     * @param callback\n+     * @param errorCallback\n+     *\n+     * @see ResourceContentService#list(String)\n+     */\n+    public void getFilteredItems(final String pattern,\n+                               final RemoteCallback<List<String>> callback,\n+                               final ErrorCallback<Object> errorCallback) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ac74165f8acb9ae807fc52b10200877545a9d82"}, "originalPosition": 116}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1dd806ba31d0b9a4e057934fe02fc87981ac3b95", "author": {"user": {"login": "gitgabrio", "name": "Gabriele Cardosi"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/1dd806ba31d0b9a4e057934fe02fc87981ac3b95", "committedDate": "2020-01-13T14:29:58Z", "message": "[KOGITO-844] Add \"NOT_AVALIABLE_IN_KOGITO\" constant as per PR suggestion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b897fecaa65eb021724e1f02455e70d84083900", "author": {"user": {"login": "gitgabrio", "name": "Gabriele Cardosi"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/3b897fecaa65eb021724e1f02455e70d84083900", "committedDate": "2020-01-13T14:49:08Z", "message": "[KOGITO-844] Fixed as per PR suggestion"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxOTEwMjM4", "url": "https://github.com/kiegroup/kie-wb-common/pull/3101#pullrequestreview-341910238", "createdAt": "2020-01-13T15:08:04Z", "commit": {"oid": "3b897fecaa65eb021724e1f02455e70d84083900"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 640, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}