{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwNzcwMzU1", "number": 3290, "reviewThreads": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxNTowOTozNFrOD3rCVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMTo0MjoyNlrOD7NFYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU5NzAzMzgwOnYy", "diffSide": "RIGHT", "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/commands/clone/DMNDeepCloneProcess.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQxNTowOTozNFrOGODkHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQwODo1NzowMFrOGOgHwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzM5MTY0NA==", "bodyText": "Just a thought, but please see DefaultValueUtilities.updateNewNodeName(..) that is currently used to ensure new elements have unique names. It might be re-usable here.", "url": "https://github.com/kiegroup/kie-wb-common/pull/3290#discussion_r417391644", "createdAt": "2020-04-29T15:09:34Z", "author": {"login": "manstis"}, "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/commands/clone/DMNDeepCloneProcess.java", "diffHunk": "@@ -87,15 +118,78 @@ public DMNDeepCloneProcess(final FactoryManager factoryManager,\n             cloneBusinessKnowledgeModel((BusinessKnowledgeModel) source, (BusinessKnowledgeModel) target);\n         }\n \n-        return super.clone(source, target);\n+        return target;\n     }\n \n     private void cloneDRGElementBasicInfo(final DRGElement source, final DRGElement target) {\n-        target.setName(source.getName().copy());\n-        target.setNameHolder(source.getNameHolder().copy());\n+        final String uniqueNodeName = composeUniqueNodeName(source.getName().getValue());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aed945d33ff469c75cada281180929ba59333e88"}, "originalPosition": 98}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQwNDQ1MA==", "bodyText": "I will check.\nRegards", "url": "https://github.com/kiegroup/kie-wb-common/pull/3290#discussion_r417404450", "createdAt": "2020-04-29T15:26:25Z", "author": {"login": "vpellegrino"}, "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/commands/clone/DMNDeepCloneProcess.java", "diffHunk": "@@ -87,15 +118,78 @@ public DMNDeepCloneProcess(final FactoryManager factoryManager,\n             cloneBusinessKnowledgeModel((BusinessKnowledgeModel) source, (BusinessKnowledgeModel) target);\n         }\n \n-        return super.clone(source, target);\n+        return target;\n     }\n \n     private void cloneDRGElementBasicInfo(final DRGElement source, final DRGElement target) {\n-        target.setName(source.getName().copy());\n-        target.setNameHolder(source.getNameHolder().copy());\n+        final String uniqueNodeName = composeUniqueNodeName(source.getName().getValue());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzM5MTY0NA=="}, "originalCommit": {"oid": "aed945d33ff469c75cada281180929ba59333e88"}, "originalPosition": 98}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQyMTc5MA==", "bodyText": "@manstis I briefly looked at DefaultValueUtilities implementation.\nThe method updateNewNodeName seems to be not suitable for the copy case, since it is working only with default names (i.e. names assigned when node gets created).\nIn the copy case you can change a node name to whatever value, and then suffix sequence must work as well.\nThere are other two methods getExistingNodeNames and getMaxUnusedIndex that maybe can work well with this specific use-case.\nI need to perform some trial and check if the result is the same.", "url": "https://github.com/kiegroup/kie-wb-common/pull/3290#discussion_r417421790", "createdAt": "2020-04-29T15:49:29Z", "author": {"login": "vpellegrino"}, "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/commands/clone/DMNDeepCloneProcess.java", "diffHunk": "@@ -87,15 +118,78 @@ public DMNDeepCloneProcess(final FactoryManager factoryManager,\n             cloneBusinessKnowledgeModel((BusinessKnowledgeModel) source, (BusinessKnowledgeModel) target);\n         }\n \n-        return super.clone(source, target);\n+        return target;\n     }\n \n     private void cloneDRGElementBasicInfo(final DRGElement source, final DRGElement target) {\n-        target.setName(source.getName().copy());\n-        target.setNameHolder(source.getNameHolder().copy());\n+        final String uniqueNodeName = composeUniqueNodeName(source.getName().getValue());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzM5MTY0NA=="}, "originalCommit": {"oid": "aed945d33ff469c75cada281180929ba59333e88"}, "originalPosition": 98}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzg1OTUyMg==", "bodyText": "OK, fair point. It was a suggestion, re-use if and as appropriate.", "url": "https://github.com/kiegroup/kie-wb-common/pull/3290#discussion_r417859522", "createdAt": "2020-04-30T08:57:00Z", "author": {"login": "manstis"}, "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/commands/clone/DMNDeepCloneProcess.java", "diffHunk": "@@ -87,15 +118,78 @@ public DMNDeepCloneProcess(final FactoryManager factoryManager,\n             cloneBusinessKnowledgeModel((BusinessKnowledgeModel) source, (BusinessKnowledgeModel) target);\n         }\n \n-        return super.clone(source, target);\n+        return target;\n     }\n \n     private void cloneDRGElementBasicInfo(final DRGElement source, final DRGElement target) {\n-        target.setName(source.getName().copy());\n-        target.setNameHolder(source.getNameHolder().copy());\n+        final String uniqueNodeName = composeUniqueNodeName(source.getName().getValue());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzM5MTY0NA=="}, "originalCommit": {"oid": "aed945d33ff469c75cada281180929ba59333e88"}, "originalPosition": 98}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxODQwMzE2OnYy", "diffSide": "RIGHT", "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/commands/clone/DMNDeepCloneProcess.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwODowNDo1MlrOGRIHMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwODowNDo1MlrOGRIHMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDYxMTg5MQ==", "bodyText": "Could be final as well", "url": "https://github.com/kiegroup/kie-wb-common/pull/3290#discussion_r420611891", "createdAt": "2020-05-06T08:04:52Z", "author": {"login": "dupliaka"}, "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/commands/clone/DMNDeepCloneProcess.java", "diffHunk": "@@ -87,15 +117,78 @@ public DMNDeepCloneProcess(final FactoryManager factoryManager,\n             cloneBusinessKnowledgeModel((BusinessKnowledgeModel) source, (BusinessKnowledgeModel) target);\n         }\n \n-        return super.clone(source, target);\n+        return target;\n     }\n \n     private void cloneDRGElementBasicInfo(final DRGElement source, final DRGElement target) {\n-        target.setName(source.getName().copy());\n-        target.setNameHolder(source.getNameHolder().copy());\n+        final String uniqueNodeName = composeUniqueNodeName(source.getName().getValue());\n+        target.setId(new Id());\n+        target.setNameHolder(new NameHolder(new Name(uniqueNodeName)));\n+        target.setDescription(source.getDescription().copy());\n+        target.setParent(source.getParent());\n         target.getLinksHolder().getValue().getLinks().addAll(cloneExternalLinkList(source));\n     }\n \n+    private void cloneTextElementBasicInfo(final HasText source, final HasText target) {\n+        final String uniqueNodeName = composeUniqueNodeName(source.getText().getValue());\n+        target.setText(new Text(uniqueNodeName));\n+    }\n+\n+    protected String composeUniqueNodeName(final String name) {\n+        final String originalName = Optional.ofNullable(name).orElse(\"\");\n+\n+        try {\n+            final MatchResult nameSuffixMatcher = NAME_SUFFIX_REGEX.exec(originalName);\n+            if (nameSuffixMatcher != null) {\n+                return buildNameWithIncrementedSuffixIndex(originalName, nameSuffixMatcher);\n+            }\n+        } catch (Exception e) {\n+            LOGGER.warning(\"There was an issue while parsing node with name \" + originalName + \" - A fallback will be used for it\");\n+        }\n+\n+        return joinPrefixWithIndexedSuffix(originalName);\n+    }\n+\n+    private String buildNameWithIncrementedSuffixIndex(final String nameValue, final MatchResult matchResult) {\n+        final String suffix = matchResult.getGroup(0);\n+        final String prefix = Optional.ofNullable(nameValue.split(suffix)[0]).orElse(\"\");\n+        return joinPrefixWithIndexedSuffix(prefix);\n+    }\n+\n+    private String joinPrefixWithIndexedSuffix(final String originalName) {\n+        final String originalNameWithHyphen = originalName + HYPHEN;\n+        return originalNameWithHyphen + getMaxUnusedIndexByNamePrefix(originalNameWithHyphen);\n+    }\n+\n+    private int getMaxUnusedIndexByNamePrefix(final String namePrefix) {\n+        final List<String> nodeNameList = StreamSupport.stream(getGraphNodes().spliterator(), true)\n+                .map(this::nodeNamesMapper)\n+                .filter(Objects::nonNull)\n+                .collect(Collectors.toList());\n+        return DefaultValueUtilities.getMaxUnusedIndex(nodeNameList, namePrefix);\n+    }\n+\n+    private Iterable<Node<View, Edge>> getGraphNodes() {\n+        return sessionManager\n+                .getCurrentSession()\n+                .getCanvasHandler()\n+                .getDiagram()\n+                .getGraph()\n+                .nodes();\n+    }\n+\n+    private String nodeNamesMapper(final Node<View, Edge> node) {\n+        if (node.getContent().getDefinition() instanceof NamedElement) {\n+            NamedElement namedElement = (NamedElement) node.getContent().getDefinition();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f9577928b3d5f7f3ed7a5a22b5ed3597900a3b27"}, "originalPosition": 155}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxODQwNDQzOnYy", "diffSide": "RIGHT", "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/commands/clone/DMNDeepCloneProcess.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwODowNToxOFrOGRIH_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwODowNToxOFrOGRIH_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDYxMjA5NQ==", "bodyText": "This could be final", "url": "https://github.com/kiegroup/kie-wb-common/pull/3290#discussion_r420612095", "createdAt": "2020-05-06T08:05:18Z", "author": {"login": "dupliaka"}, "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/commands/clone/DMNDeepCloneProcess.java", "diffHunk": "@@ -87,15 +117,78 @@ public DMNDeepCloneProcess(final FactoryManager factoryManager,\n             cloneBusinessKnowledgeModel((BusinessKnowledgeModel) source, (BusinessKnowledgeModel) target);\n         }\n \n-        return super.clone(source, target);\n+        return target;\n     }\n \n     private void cloneDRGElementBasicInfo(final DRGElement source, final DRGElement target) {\n-        target.setName(source.getName().copy());\n-        target.setNameHolder(source.getNameHolder().copy());\n+        final String uniqueNodeName = composeUniqueNodeName(source.getName().getValue());\n+        target.setId(new Id());\n+        target.setNameHolder(new NameHolder(new Name(uniqueNodeName)));\n+        target.setDescription(source.getDescription().copy());\n+        target.setParent(source.getParent());\n         target.getLinksHolder().getValue().getLinks().addAll(cloneExternalLinkList(source));\n     }\n \n+    private void cloneTextElementBasicInfo(final HasText source, final HasText target) {\n+        final String uniqueNodeName = composeUniqueNodeName(source.getText().getValue());\n+        target.setText(new Text(uniqueNodeName));\n+    }\n+\n+    protected String composeUniqueNodeName(final String name) {\n+        final String originalName = Optional.ofNullable(name).orElse(\"\");\n+\n+        try {\n+            final MatchResult nameSuffixMatcher = NAME_SUFFIX_REGEX.exec(originalName);\n+            if (nameSuffixMatcher != null) {\n+                return buildNameWithIncrementedSuffixIndex(originalName, nameSuffixMatcher);\n+            }\n+        } catch (Exception e) {\n+            LOGGER.warning(\"There was an issue while parsing node with name \" + originalName + \" - A fallback will be used for it\");\n+        }\n+\n+        return joinPrefixWithIndexedSuffix(originalName);\n+    }\n+\n+    private String buildNameWithIncrementedSuffixIndex(final String nameValue, final MatchResult matchResult) {\n+        final String suffix = matchResult.getGroup(0);\n+        final String prefix = Optional.ofNullable(nameValue.split(suffix)[0]).orElse(\"\");\n+        return joinPrefixWithIndexedSuffix(prefix);\n+    }\n+\n+    private String joinPrefixWithIndexedSuffix(final String originalName) {\n+        final String originalNameWithHyphen = originalName + HYPHEN;\n+        return originalNameWithHyphen + getMaxUnusedIndexByNamePrefix(originalNameWithHyphen);\n+    }\n+\n+    private int getMaxUnusedIndexByNamePrefix(final String namePrefix) {\n+        final List<String> nodeNameList = StreamSupport.stream(getGraphNodes().spliterator(), true)\n+                .map(this::nodeNamesMapper)\n+                .filter(Objects::nonNull)\n+                .collect(Collectors.toList());\n+        return DefaultValueUtilities.getMaxUnusedIndex(nodeNameList, namePrefix);\n+    }\n+\n+    private Iterable<Node<View, Edge>> getGraphNodes() {\n+        return sessionManager\n+                .getCurrentSession()\n+                .getCanvasHandler()\n+                .getDiagram()\n+                .getGraph()\n+                .nodes();\n+    }\n+\n+    private String nodeNamesMapper(final Node<View, Edge> node) {\n+        if (node.getContent().getDefinition() instanceof NamedElement) {\n+            NamedElement namedElement = (NamedElement) node.getContent().getDefinition();\n+            return namedElement.getName().getValue();\n+        }\n+        if (node.getContent().getDefinition() instanceof HasText) {\n+            HasText hasText = (HasText) node.getContent().getDefinition();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f9577928b3d5f7f3ed7a5a22b5ed3597900a3b27"}, "originalPosition": 159}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxODQxNTIxOnYy", "diffSide": "RIGHT", "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/commands/clone/DMNDeepCloneProcess.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwODowODo1NlrOGRIO9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxMzo1MzozN1rOGRUIwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDYxMzg3OQ==", "bodyText": "Just a suggestion :\nYou can keep one return to have only one exit point.", "url": "https://github.com/kiegroup/kie-wb-common/pull/3290#discussion_r420613879", "createdAt": "2020-05-06T08:08:56Z", "author": {"login": "dupliaka"}, "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/commands/clone/DMNDeepCloneProcess.java", "diffHunk": "@@ -87,15 +117,78 @@ public DMNDeepCloneProcess(final FactoryManager factoryManager,\n             cloneBusinessKnowledgeModel((BusinessKnowledgeModel) source, (BusinessKnowledgeModel) target);\n         }\n \n-        return super.clone(source, target);\n+        return target;\n     }\n \n     private void cloneDRGElementBasicInfo(final DRGElement source, final DRGElement target) {\n-        target.setName(source.getName().copy());\n-        target.setNameHolder(source.getNameHolder().copy());\n+        final String uniqueNodeName = composeUniqueNodeName(source.getName().getValue());\n+        target.setId(new Id());\n+        target.setNameHolder(new NameHolder(new Name(uniqueNodeName)));\n+        target.setDescription(source.getDescription().copy());\n+        target.setParent(source.getParent());\n         target.getLinksHolder().getValue().getLinks().addAll(cloneExternalLinkList(source));\n     }\n \n+    private void cloneTextElementBasicInfo(final HasText source, final HasText target) {\n+        final String uniqueNodeName = composeUniqueNodeName(source.getText().getValue());\n+        target.setText(new Text(uniqueNodeName));\n+    }\n+\n+    protected String composeUniqueNodeName(final String name) {\n+        final String originalName = Optional.ofNullable(name).orElse(\"\");\n+\n+        try {\n+            final MatchResult nameSuffixMatcher = NAME_SUFFIX_REGEX.exec(originalName);\n+            if (nameSuffixMatcher != null) {\n+                return buildNameWithIncrementedSuffixIndex(originalName, nameSuffixMatcher);\n+            }\n+        } catch (Exception e) {\n+            LOGGER.warning(\"There was an issue while parsing node with name \" + originalName + \" - A fallback will be used for it\");\n+        }\n+\n+        return joinPrefixWithIndexedSuffix(originalName);\n+    }\n+\n+    private String buildNameWithIncrementedSuffixIndex(final String nameValue, final MatchResult matchResult) {\n+        final String suffix = matchResult.getGroup(0);\n+        final String prefix = Optional.ofNullable(nameValue.split(suffix)[0]).orElse(\"\");\n+        return joinPrefixWithIndexedSuffix(prefix);\n+    }\n+\n+    private String joinPrefixWithIndexedSuffix(final String originalName) {\n+        final String originalNameWithHyphen = originalName + HYPHEN;\n+        return originalNameWithHyphen + getMaxUnusedIndexByNamePrefix(originalNameWithHyphen);\n+    }\n+\n+    private int getMaxUnusedIndexByNamePrefix(final String namePrefix) {\n+        final List<String> nodeNameList = StreamSupport.stream(getGraphNodes().spliterator(), true)\n+                .map(this::nodeNamesMapper)\n+                .filter(Objects::nonNull)\n+                .collect(Collectors.toList());\n+        return DefaultValueUtilities.getMaxUnusedIndex(nodeNameList, namePrefix);\n+    }\n+\n+    private Iterable<Node<View, Edge>> getGraphNodes() {\n+        return sessionManager\n+                .getCurrentSession()\n+                .getCanvasHandler()\n+                .getDiagram()\n+                .getGraph()\n+                .nodes();\n+    }\n+\n+    private String nodeNamesMapper(final Node<View, Edge> node) {\n+        if (node.getContent().getDefinition() instanceof NamedElement) {\n+            NamedElement namedElement = (NamedElement) node.getContent().getDefinition();\n+            return namedElement.getName().getValue();\n+        }\n+        if (node.getContent().getDefinition() instanceof HasText) {\n+            HasText hasText = (HasText) node.getContent().getDefinition();\n+            return hasText.getText().getValue();\n+        }\n+        return null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f9577928b3d5f7f3ed7a5a22b5ed3597900a3b27"}, "originalPosition": 162}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDYxNzYwNg==", "bodyText": "In this case, for readability I prefer to have multiple returns, instead of a non-final variable to keep the result to return", "url": "https://github.com/kiegroup/kie-wb-common/pull/3290#discussion_r420617606", "createdAt": "2020-05-06T08:16:10Z", "author": {"login": "vpellegrino"}, "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/commands/clone/DMNDeepCloneProcess.java", "diffHunk": "@@ -87,15 +117,78 @@ public DMNDeepCloneProcess(final FactoryManager factoryManager,\n             cloneBusinessKnowledgeModel((BusinessKnowledgeModel) source, (BusinessKnowledgeModel) target);\n         }\n \n-        return super.clone(source, target);\n+        return target;\n     }\n \n     private void cloneDRGElementBasicInfo(final DRGElement source, final DRGElement target) {\n-        target.setName(source.getName().copy());\n-        target.setNameHolder(source.getNameHolder().copy());\n+        final String uniqueNodeName = composeUniqueNodeName(source.getName().getValue());\n+        target.setId(new Id());\n+        target.setNameHolder(new NameHolder(new Name(uniqueNodeName)));\n+        target.setDescription(source.getDescription().copy());\n+        target.setParent(source.getParent());\n         target.getLinksHolder().getValue().getLinks().addAll(cloneExternalLinkList(source));\n     }\n \n+    private void cloneTextElementBasicInfo(final HasText source, final HasText target) {\n+        final String uniqueNodeName = composeUniqueNodeName(source.getText().getValue());\n+        target.setText(new Text(uniqueNodeName));\n+    }\n+\n+    protected String composeUniqueNodeName(final String name) {\n+        final String originalName = Optional.ofNullable(name).orElse(\"\");\n+\n+        try {\n+            final MatchResult nameSuffixMatcher = NAME_SUFFIX_REGEX.exec(originalName);\n+            if (nameSuffixMatcher != null) {\n+                return buildNameWithIncrementedSuffixIndex(originalName, nameSuffixMatcher);\n+            }\n+        } catch (Exception e) {\n+            LOGGER.warning(\"There was an issue while parsing node with name \" + originalName + \" - A fallback will be used for it\");\n+        }\n+\n+        return joinPrefixWithIndexedSuffix(originalName);\n+    }\n+\n+    private String buildNameWithIncrementedSuffixIndex(final String nameValue, final MatchResult matchResult) {\n+        final String suffix = matchResult.getGroup(0);\n+        final String prefix = Optional.ofNullable(nameValue.split(suffix)[0]).orElse(\"\");\n+        return joinPrefixWithIndexedSuffix(prefix);\n+    }\n+\n+    private String joinPrefixWithIndexedSuffix(final String originalName) {\n+        final String originalNameWithHyphen = originalName + HYPHEN;\n+        return originalNameWithHyphen + getMaxUnusedIndexByNamePrefix(originalNameWithHyphen);\n+    }\n+\n+    private int getMaxUnusedIndexByNamePrefix(final String namePrefix) {\n+        final List<String> nodeNameList = StreamSupport.stream(getGraphNodes().spliterator(), true)\n+                .map(this::nodeNamesMapper)\n+                .filter(Objects::nonNull)\n+                .collect(Collectors.toList());\n+        return DefaultValueUtilities.getMaxUnusedIndex(nodeNameList, namePrefix);\n+    }\n+\n+    private Iterable<Node<View, Edge>> getGraphNodes() {\n+        return sessionManager\n+                .getCurrentSession()\n+                .getCanvasHandler()\n+                .getDiagram()\n+                .getGraph()\n+                .nodes();\n+    }\n+\n+    private String nodeNamesMapper(final Node<View, Edge> node) {\n+        if (node.getContent().getDefinition() instanceof NamedElement) {\n+            NamedElement namedElement = (NamedElement) node.getContent().getDefinition();\n+            return namedElement.getName().getValue();\n+        }\n+        if (node.getContent().getDefinition() instanceof HasText) {\n+            HasText hasText = (HasText) node.getContent().getDefinition();\n+            return hasText.getText().getValue();\n+        }\n+        return null;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDYxMzg3OQ=="}, "originalCommit": {"oid": "f9577928b3d5f7f3ed7a5a22b5ed3597900a3b27"}, "originalPosition": 162}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY0OTkwMw==", "bodyText": "Ok", "url": "https://github.com/kiegroup/kie-wb-common/pull/3290#discussion_r420649903", "createdAt": "2020-05-06T09:14:08Z", "author": {"login": "dupliaka"}, "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/commands/clone/DMNDeepCloneProcess.java", "diffHunk": "@@ -87,15 +117,78 @@ public DMNDeepCloneProcess(final FactoryManager factoryManager,\n             cloneBusinessKnowledgeModel((BusinessKnowledgeModel) source, (BusinessKnowledgeModel) target);\n         }\n \n-        return super.clone(source, target);\n+        return target;\n     }\n \n     private void cloneDRGElementBasicInfo(final DRGElement source, final DRGElement target) {\n-        target.setName(source.getName().copy());\n-        target.setNameHolder(source.getNameHolder().copy());\n+        final String uniqueNodeName = composeUniqueNodeName(source.getName().getValue());\n+        target.setId(new Id());\n+        target.setNameHolder(new NameHolder(new Name(uniqueNodeName)));\n+        target.setDescription(source.getDescription().copy());\n+        target.setParent(source.getParent());\n         target.getLinksHolder().getValue().getLinks().addAll(cloneExternalLinkList(source));\n     }\n \n+    private void cloneTextElementBasicInfo(final HasText source, final HasText target) {\n+        final String uniqueNodeName = composeUniqueNodeName(source.getText().getValue());\n+        target.setText(new Text(uniqueNodeName));\n+    }\n+\n+    protected String composeUniqueNodeName(final String name) {\n+        final String originalName = Optional.ofNullable(name).orElse(\"\");\n+\n+        try {\n+            final MatchResult nameSuffixMatcher = NAME_SUFFIX_REGEX.exec(originalName);\n+            if (nameSuffixMatcher != null) {\n+                return buildNameWithIncrementedSuffixIndex(originalName, nameSuffixMatcher);\n+            }\n+        } catch (Exception e) {\n+            LOGGER.warning(\"There was an issue while parsing node with name \" + originalName + \" - A fallback will be used for it\");\n+        }\n+\n+        return joinPrefixWithIndexedSuffix(originalName);\n+    }\n+\n+    private String buildNameWithIncrementedSuffixIndex(final String nameValue, final MatchResult matchResult) {\n+        final String suffix = matchResult.getGroup(0);\n+        final String prefix = Optional.ofNullable(nameValue.split(suffix)[0]).orElse(\"\");\n+        return joinPrefixWithIndexedSuffix(prefix);\n+    }\n+\n+    private String joinPrefixWithIndexedSuffix(final String originalName) {\n+        final String originalNameWithHyphen = originalName + HYPHEN;\n+        return originalNameWithHyphen + getMaxUnusedIndexByNamePrefix(originalNameWithHyphen);\n+    }\n+\n+    private int getMaxUnusedIndexByNamePrefix(final String namePrefix) {\n+        final List<String> nodeNameList = StreamSupport.stream(getGraphNodes().spliterator(), true)\n+                .map(this::nodeNamesMapper)\n+                .filter(Objects::nonNull)\n+                .collect(Collectors.toList());\n+        return DefaultValueUtilities.getMaxUnusedIndex(nodeNameList, namePrefix);\n+    }\n+\n+    private Iterable<Node<View, Edge>> getGraphNodes() {\n+        return sessionManager\n+                .getCurrentSession()\n+                .getCanvasHandler()\n+                .getDiagram()\n+                .getGraph()\n+                .nodes();\n+    }\n+\n+    private String nodeNamesMapper(final Node<View, Edge> node) {\n+        if (node.getContent().getDefinition() instanceof NamedElement) {\n+            NamedElement namedElement = (NamedElement) node.getContent().getDefinition();\n+            return namedElement.getName().getValue();\n+        }\n+        if (node.getContent().getDefinition() instanceof HasText) {\n+            HasText hasText = (HasText) node.getContent().getDefinition();\n+            return hasText.getText().getValue();\n+        }\n+        return null;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDYxMzg3OQ=="}, "originalCommit": {"oid": "f9577928b3d5f7f3ed7a5a22b5ed3597900a3b27"}, "originalPosition": 162}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDgwODg5OA==", "bodyText": "Ok", "url": "https://github.com/kiegroup/kie-wb-common/pull/3290#discussion_r420808898", "createdAt": "2020-05-06T13:53:37Z", "author": {"login": "dupliaka"}, "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/commands/clone/DMNDeepCloneProcess.java", "diffHunk": "@@ -87,15 +117,78 @@ public DMNDeepCloneProcess(final FactoryManager factoryManager,\n             cloneBusinessKnowledgeModel((BusinessKnowledgeModel) source, (BusinessKnowledgeModel) target);\n         }\n \n-        return super.clone(source, target);\n+        return target;\n     }\n \n     private void cloneDRGElementBasicInfo(final DRGElement source, final DRGElement target) {\n-        target.setName(source.getName().copy());\n-        target.setNameHolder(source.getNameHolder().copy());\n+        final String uniqueNodeName = composeUniqueNodeName(source.getName().getValue());\n+        target.setId(new Id());\n+        target.setNameHolder(new NameHolder(new Name(uniqueNodeName)));\n+        target.setDescription(source.getDescription().copy());\n+        target.setParent(source.getParent());\n         target.getLinksHolder().getValue().getLinks().addAll(cloneExternalLinkList(source));\n     }\n \n+    private void cloneTextElementBasicInfo(final HasText source, final HasText target) {\n+        final String uniqueNodeName = composeUniqueNodeName(source.getText().getValue());\n+        target.setText(new Text(uniqueNodeName));\n+    }\n+\n+    protected String composeUniqueNodeName(final String name) {\n+        final String originalName = Optional.ofNullable(name).orElse(\"\");\n+\n+        try {\n+            final MatchResult nameSuffixMatcher = NAME_SUFFIX_REGEX.exec(originalName);\n+            if (nameSuffixMatcher != null) {\n+                return buildNameWithIncrementedSuffixIndex(originalName, nameSuffixMatcher);\n+            }\n+        } catch (Exception e) {\n+            LOGGER.warning(\"There was an issue while parsing node with name \" + originalName + \" - A fallback will be used for it\");\n+        }\n+\n+        return joinPrefixWithIndexedSuffix(originalName);\n+    }\n+\n+    private String buildNameWithIncrementedSuffixIndex(final String nameValue, final MatchResult matchResult) {\n+        final String suffix = matchResult.getGroup(0);\n+        final String prefix = Optional.ofNullable(nameValue.split(suffix)[0]).orElse(\"\");\n+        return joinPrefixWithIndexedSuffix(prefix);\n+    }\n+\n+    private String joinPrefixWithIndexedSuffix(final String originalName) {\n+        final String originalNameWithHyphen = originalName + HYPHEN;\n+        return originalNameWithHyphen + getMaxUnusedIndexByNamePrefix(originalNameWithHyphen);\n+    }\n+\n+    private int getMaxUnusedIndexByNamePrefix(final String namePrefix) {\n+        final List<String> nodeNameList = StreamSupport.stream(getGraphNodes().spliterator(), true)\n+                .map(this::nodeNamesMapper)\n+                .filter(Objects::nonNull)\n+                .collect(Collectors.toList());\n+        return DefaultValueUtilities.getMaxUnusedIndex(nodeNameList, namePrefix);\n+    }\n+\n+    private Iterable<Node<View, Edge>> getGraphNodes() {\n+        return sessionManager\n+                .getCurrentSession()\n+                .getCanvasHandler()\n+                .getDiagram()\n+                .getGraph()\n+                .nodes();\n+    }\n+\n+    private String nodeNamesMapper(final Node<View, Edge> node) {\n+        if (node.getContent().getDefinition() instanceof NamedElement) {\n+            NamedElement namedElement = (NamedElement) node.getContent().getDefinition();\n+            return namedElement.getName().getValue();\n+        }\n+        if (node.getContent().getDefinition() instanceof HasText) {\n+            HasText hasText = (HasText) node.getContent().getDefinition();\n+            return hasText.getText().getValue();\n+        }\n+        return null;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDYxMzg3OQ=="}, "originalCommit": {"oid": "f9577928b3d5f7f3ed7a5a22b5ed3597900a3b27"}, "originalPosition": 162}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxODQyNTE5OnYy", "diffSide": "RIGHT", "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/commands/clone/DMNDeepCloneProcess.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwODoxMjowNVrOGRIVBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwODoxMjowNVrOGRIVBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDYxNTQzMQ==", "bodyText": "hasText named like boolean variable that checks for text. Probably we could provide more context - wise declaration?", "url": "https://github.com/kiegroup/kie-wb-common/pull/3290#discussion_r420615431", "createdAt": "2020-05-06T08:12:05Z", "author": {"login": "dupliaka"}, "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/commands/clone/DMNDeepCloneProcess.java", "diffHunk": "@@ -87,15 +117,78 @@ public DMNDeepCloneProcess(final FactoryManager factoryManager,\n             cloneBusinessKnowledgeModel((BusinessKnowledgeModel) source, (BusinessKnowledgeModel) target);\n         }\n \n-        return super.clone(source, target);\n+        return target;\n     }\n \n     private void cloneDRGElementBasicInfo(final DRGElement source, final DRGElement target) {\n-        target.setName(source.getName().copy());\n-        target.setNameHolder(source.getNameHolder().copy());\n+        final String uniqueNodeName = composeUniqueNodeName(source.getName().getValue());\n+        target.setId(new Id());\n+        target.setNameHolder(new NameHolder(new Name(uniqueNodeName)));\n+        target.setDescription(source.getDescription().copy());\n+        target.setParent(source.getParent());\n         target.getLinksHolder().getValue().getLinks().addAll(cloneExternalLinkList(source));\n     }\n \n+    private void cloneTextElementBasicInfo(final HasText source, final HasText target) {\n+        final String uniqueNodeName = composeUniqueNodeName(source.getText().getValue());\n+        target.setText(new Text(uniqueNodeName));\n+    }\n+\n+    protected String composeUniqueNodeName(final String name) {\n+        final String originalName = Optional.ofNullable(name).orElse(\"\");\n+\n+        try {\n+            final MatchResult nameSuffixMatcher = NAME_SUFFIX_REGEX.exec(originalName);\n+            if (nameSuffixMatcher != null) {\n+                return buildNameWithIncrementedSuffixIndex(originalName, nameSuffixMatcher);\n+            }\n+        } catch (Exception e) {\n+            LOGGER.warning(\"There was an issue while parsing node with name \" + originalName + \" - A fallback will be used for it\");\n+        }\n+\n+        return joinPrefixWithIndexedSuffix(originalName);\n+    }\n+\n+    private String buildNameWithIncrementedSuffixIndex(final String nameValue, final MatchResult matchResult) {\n+        final String suffix = matchResult.getGroup(0);\n+        final String prefix = Optional.ofNullable(nameValue.split(suffix)[0]).orElse(\"\");\n+        return joinPrefixWithIndexedSuffix(prefix);\n+    }\n+\n+    private String joinPrefixWithIndexedSuffix(final String originalName) {\n+        final String originalNameWithHyphen = originalName + HYPHEN;\n+        return originalNameWithHyphen + getMaxUnusedIndexByNamePrefix(originalNameWithHyphen);\n+    }\n+\n+    private int getMaxUnusedIndexByNamePrefix(final String namePrefix) {\n+        final List<String> nodeNameList = StreamSupport.stream(getGraphNodes().spliterator(), true)\n+                .map(this::nodeNamesMapper)\n+                .filter(Objects::nonNull)\n+                .collect(Collectors.toList());\n+        return DefaultValueUtilities.getMaxUnusedIndex(nodeNameList, namePrefix);\n+    }\n+\n+    private Iterable<Node<View, Edge>> getGraphNodes() {\n+        return sessionManager\n+                .getCurrentSession()\n+                .getCanvasHandler()\n+                .getDiagram()\n+                .getGraph()\n+                .nodes();\n+    }\n+\n+    private String nodeNamesMapper(final Node<View, Edge> node) {\n+        if (node.getContent().getDefinition() instanceof NamedElement) {\n+            NamedElement namedElement = (NamedElement) node.getContent().getDefinition();\n+            return namedElement.getName().getValue();\n+        }\n+        if (node.getContent().getDefinition() instanceof HasText) {\n+            HasText hasText = (HasText) node.getContent().getDefinition();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f9577928b3d5f7f3ed7a5a22b5ed3597900a3b27"}, "originalPosition": 159}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxODQ5Mjk4OnYy", "diffSide": "RIGHT", "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/commands/clone/DMNDeepCloneProcess.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwODozMTo1OFrOGRI_wQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwOToxMzoyMFrOGRKZ9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDYyNjM2OQ==", "bodyText": "Small suggestion to investigate how could we avoid a generic exception since that would be hard to inspect if something would happen if exec will throw any exception like IndexOutOfBounds or buildNameWithIncrementedSuffixIndex throw some exception(bcs it would probably just skipped)", "url": "https://github.com/kiegroup/kie-wb-common/pull/3290#discussion_r420626369", "createdAt": "2020-05-06T08:31:58Z", "author": {"login": "dupliaka"}, "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/commands/clone/DMNDeepCloneProcess.java", "diffHunk": "@@ -87,15 +117,78 @@ public DMNDeepCloneProcess(final FactoryManager factoryManager,\n             cloneBusinessKnowledgeModel((BusinessKnowledgeModel) source, (BusinessKnowledgeModel) target);\n         }\n \n-        return super.clone(source, target);\n+        return target;\n     }\n \n     private void cloneDRGElementBasicInfo(final DRGElement source, final DRGElement target) {\n-        target.setName(source.getName().copy());\n-        target.setNameHolder(source.getNameHolder().copy());\n+        final String uniqueNodeName = composeUniqueNodeName(source.getName().getValue());\n+        target.setId(new Id());\n+        target.setNameHolder(new NameHolder(new Name(uniqueNodeName)));\n+        target.setDescription(source.getDescription().copy());\n+        target.setParent(source.getParent());\n         target.getLinksHolder().getValue().getLinks().addAll(cloneExternalLinkList(source));\n     }\n \n+    private void cloneTextElementBasicInfo(final HasText source, final HasText target) {\n+        final String uniqueNodeName = composeUniqueNodeName(source.getText().getValue());\n+        target.setText(new Text(uniqueNodeName));\n+    }\n+\n+    protected String composeUniqueNodeName(final String name) {\n+        final String originalName = Optional.ofNullable(name).orElse(\"\");\n+\n+        try {\n+            final MatchResult nameSuffixMatcher = NAME_SUFFIX_REGEX.exec(originalName);\n+            if (nameSuffixMatcher != null) {\n+                return buildNameWithIncrementedSuffixIndex(originalName, nameSuffixMatcher);\n+            }\n+        } catch (Exception e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f9577928b3d5f7f3ed7a5a22b5ed3597900a3b27"}, "originalPosition": 118}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDYzMjY4Mg==", "bodyText": "@dupliaka thank you for your question.\nLet me explain a bit why I put this generic catch block.\nI put this try-catch block because of the regex matcher.\nThis exception in reality should never happen.\nIt is only a way to way to unblock cloning mechanism in case any issue with the matcher occurs.\nThe strategy here, only in the remote case an exception gets thrown  is:\n\nSoftly print exception details\nReturn a fallback name for the copied node", "url": "https://github.com/kiegroup/kie-wb-common/pull/3290#discussion_r420632682", "createdAt": "2020-05-06T08:43:14Z", "author": {"login": "vpellegrino"}, "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/commands/clone/DMNDeepCloneProcess.java", "diffHunk": "@@ -87,15 +117,78 @@ public DMNDeepCloneProcess(final FactoryManager factoryManager,\n             cloneBusinessKnowledgeModel((BusinessKnowledgeModel) source, (BusinessKnowledgeModel) target);\n         }\n \n-        return super.clone(source, target);\n+        return target;\n     }\n \n     private void cloneDRGElementBasicInfo(final DRGElement source, final DRGElement target) {\n-        target.setName(source.getName().copy());\n-        target.setNameHolder(source.getNameHolder().copy());\n+        final String uniqueNodeName = composeUniqueNodeName(source.getName().getValue());\n+        target.setId(new Id());\n+        target.setNameHolder(new NameHolder(new Name(uniqueNodeName)));\n+        target.setDescription(source.getDescription().copy());\n+        target.setParent(source.getParent());\n         target.getLinksHolder().getValue().getLinks().addAll(cloneExternalLinkList(source));\n     }\n \n+    private void cloneTextElementBasicInfo(final HasText source, final HasText target) {\n+        final String uniqueNodeName = composeUniqueNodeName(source.getText().getValue());\n+        target.setText(new Text(uniqueNodeName));\n+    }\n+\n+    protected String composeUniqueNodeName(final String name) {\n+        final String originalName = Optional.ofNullable(name).orElse(\"\");\n+\n+        try {\n+            final MatchResult nameSuffixMatcher = NAME_SUFFIX_REGEX.exec(originalName);\n+            if (nameSuffixMatcher != null) {\n+                return buildNameWithIncrementedSuffixIndex(originalName, nameSuffixMatcher);\n+            }\n+        } catch (Exception e) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDYyNjM2OQ=="}, "originalCommit": {"oid": "f9577928b3d5f7f3ed7a5a22b5ed3597900a3b27"}, "originalPosition": 118}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY0OTQ2MQ==", "bodyText": "Ok", "url": "https://github.com/kiegroup/kie-wb-common/pull/3290#discussion_r420649461", "createdAt": "2020-05-06T09:13:20Z", "author": {"login": "dupliaka"}, "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/commands/clone/DMNDeepCloneProcess.java", "diffHunk": "@@ -87,15 +117,78 @@ public DMNDeepCloneProcess(final FactoryManager factoryManager,\n             cloneBusinessKnowledgeModel((BusinessKnowledgeModel) source, (BusinessKnowledgeModel) target);\n         }\n \n-        return super.clone(source, target);\n+        return target;\n     }\n \n     private void cloneDRGElementBasicInfo(final DRGElement source, final DRGElement target) {\n-        target.setName(source.getName().copy());\n-        target.setNameHolder(source.getNameHolder().copy());\n+        final String uniqueNodeName = composeUniqueNodeName(source.getName().getValue());\n+        target.setId(new Id());\n+        target.setNameHolder(new NameHolder(new Name(uniqueNodeName)));\n+        target.setDescription(source.getDescription().copy());\n+        target.setParent(source.getParent());\n         target.getLinksHolder().getValue().getLinks().addAll(cloneExternalLinkList(source));\n     }\n \n+    private void cloneTextElementBasicInfo(final HasText source, final HasText target) {\n+        final String uniqueNodeName = composeUniqueNodeName(source.getText().getValue());\n+        target.setText(new Text(uniqueNodeName));\n+    }\n+\n+    protected String composeUniqueNodeName(final String name) {\n+        final String originalName = Optional.ofNullable(name).orElse(\"\");\n+\n+        try {\n+            final MatchResult nameSuffixMatcher = NAME_SUFFIX_REGEX.exec(originalName);\n+            if (nameSuffixMatcher != null) {\n+                return buildNameWithIncrementedSuffixIndex(originalName, nameSuffixMatcher);\n+            }\n+        } catch (Exception e) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDYyNjM2OQ=="}, "originalCommit": {"oid": "f9577928b3d5f7f3ed7a5a22b5ed3597900a3b27"}, "originalPosition": 118}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxODUwNTA2OnYy", "diffSide": "RIGHT", "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/commands/clone/DMNDeepCloneProcess.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwODozNToyOFrOGRJHbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwOToxMTowMlrOGRKU5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDYyODMzNA==", "bodyText": "Could you please update javadoc on it as well?", "url": "https://github.com/kiegroup/kie-wb-common/pull/3290#discussion_r420628334", "createdAt": "2020-05-06T08:35:28Z", "author": {"login": "dupliaka"}, "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/commands/clone/DMNDeepCloneProcess.java", "diffHunk": "@@ -69,10 +92,17 @@ public DMNDeepCloneProcess(final FactoryManager factoryManager,\n     @Override", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f9577928b3d5f7f3ed7a5a22b5ed3597900a3b27"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDYzMzU2OQ==", "bodyText": "Which information would you update?\nNothing seems to be changed from doc perspective", "url": "https://github.com/kiegroup/kie-wb-common/pull/3290#discussion_r420633569", "createdAt": "2020-05-06T08:44:47Z", "author": {"login": "vpellegrino"}, "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/commands/clone/DMNDeepCloneProcess.java", "diffHunk": "@@ -69,10 +92,17 @@ public DMNDeepCloneProcess(final FactoryManager factoryManager,\n     @Override", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDYyODMzNA=="}, "originalCommit": {"oid": "f9577928b3d5f7f3ed7a5a22b5ed3597900a3b27"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY0ODE2Nw==", "bodyText": "I mean that for new node name. It is not clear that this should comply with the validation mechanisms", "url": "https://github.com/kiegroup/kie-wb-common/pull/3290#discussion_r420648167", "createdAt": "2020-05-06T09:11:02Z", "author": {"login": "dupliaka"}, "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/main/java/org/kie/workbench/common/dmn/client/commands/clone/DMNDeepCloneProcess.java", "diffHunk": "@@ -69,10 +92,17 @@ public DMNDeepCloneProcess(final FactoryManager factoryManager,\n     @Override", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDYyODMzNA=="}, "originalCommit": {"oid": "f9577928b3d5f7f3ed7a5a22b5ed3597900a3b27"}, "originalPosition": 69}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxODY1ODg4OnYy", "diffSide": "RIGHT", "path": "kie-wb-common-dmn/kie-wb-common-dmn-webapp-kogito-runtime/src/test/java/org/kie/workbench/common/dmn/showcase/client/selenium/DMNDesignerKogitoSeleniumIT.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwOToyMTo1MVrOGRKsSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxMzo0MDo1MlrOGRThbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY1NDE1Mw==", "bodyText": "This test is a reproducer for https://issues.redhat.com/browse/DROOLS-4424\nIf your change affect this then we can remove the comment and close the bug.\nLet me only check it manually first.", "url": "https://github.com/kiegroup/kie-wb-common/pull/3290#discussion_r420654153", "createdAt": "2020-05-06T09:21:51Z", "author": {"login": "dupliaka"}, "path": "kie-wb-common-dmn/kie-wb-common-dmn-webapp-kogito-runtime/src/test/java/org/kie/workbench/common/dmn/showcase/client/selenium/DMNDesignerKogitoSeleniumIT.java", "diffHunk": "@@ -250,6 +250,7 @@ public void testCopyAndPaste() throws Exception {\n         expandDecisionNavigatorDock();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67be7177df4167072a118e1287ede29cec567d1e"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDc5ODgzMA==", "bodyText": "I retested it manually I think you can remove the comment so now it is not a reproducer. Just a test.", "url": "https://github.com/kiegroup/kie-wb-common/pull/3290#discussion_r420798830", "createdAt": "2020-05-06T13:40:52Z", "author": {"login": "dupliaka"}, "path": "kie-wb-common-dmn/kie-wb-common-dmn-webapp-kogito-runtime/src/test/java/org/kie/workbench/common/dmn/showcase/client/selenium/DMNDesignerKogitoSeleniumIT.java", "diffHunk": "@@ -250,6 +250,7 @@ public void testCopyAndPaste() throws Exception {\n         expandDecisionNavigatorDock();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY1NDE1Mw=="}, "originalCommit": {"oid": "67be7177df4167072a118e1287ede29cec567d1e"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxODY4MTk5OnYy", "diffSide": "RIGHT", "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/test/java/org/kie/workbench/common/dmn/client/commands/clone/DMNDeepCloneProcessTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwOToyODozMVrOGRK7EQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwOTozMzozOVrOGRLGUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY1NzkzNw==", "bodyText": "Suggestion\nWould you mind to add a test for case if the matcher throws an exception in composeUniqueNodeName()?", "url": "https://github.com/kiegroup/kie-wb-common/pull/3290#discussion_r420657937", "createdAt": "2020-05-06T09:28:31Z", "author": {"login": "dupliaka"}, "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/test/java/org/kie/workbench/common/dmn/client/commands/clone/DMNDeepCloneProcessTest.java", "diffHunk": "@@ -261,4 +348,70 @@ private void setLinks(final DRGElement drgElement, final String... links) {\n                                          .add(new DMNExternalLink(link, \"description\"))\n                 );\n     }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0b74d1418d0de7842d01e64930c2e53055ee6eaf"}, "originalPosition": 209}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY2MDgxNw==", "bodyText": "Looked at code of com.google.gwt.regexp.shared.RegExp#exec method.\nThere is no explicit exception thrown, so I am going to remove the try-catch block.", "url": "https://github.com/kiegroup/kie-wb-common/pull/3290#discussion_r420660817", "createdAt": "2020-05-06T09:33:39Z", "author": {"login": "vpellegrino"}, "path": "kie-wb-common-dmn/kie-wb-common-dmn-client/src/test/java/org/kie/workbench/common/dmn/client/commands/clone/DMNDeepCloneProcessTest.java", "diffHunk": "@@ -261,4 +348,70 @@ private void setLinks(final DRGElement drgElement, final String... links) {\n                                          .add(new DMNExternalLink(link, \"description\"))\n                 );\n     }\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY1NzkzNw=="}, "originalCommit": {"oid": "0b74d1418d0de7842d01e64930c2e53055ee6eaf"}, "originalPosition": 209}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzNDA2OTQ3OnYy", "diffSide": "RIGHT", "path": "kie-wb-common-dmn/kie-wb-common-dmn-webapp-kogito-runtime/src/test/java/org/kie/workbench/common/dmn/showcase/client/selenium/DMNDesignerKogitoSeleniumIT.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMTo0MjoyNlrOGTYqaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMVQxMTo0MjoyNlrOGTYqaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjk4MDIwMA==", "bodyText": "Thank you for updating the test @vpellegrino @dupliaka !", "url": "https://github.com/kiegroup/kie-wb-common/pull/3290#discussion_r422980200", "createdAt": "2020-05-11T11:42:26Z", "author": {"login": "jomarko"}, "path": "kie-wb-common-dmn/kie-wb-common-dmn-webapp-kogito-runtime/src/test/java/org/kie/workbench/common/dmn/showcase/client/selenium/DMNDesignerKogitoSeleniumIT.java", "diffHunk": "@@ -269,7 +267,12 @@ public void testCopyAndPaste() throws Exception {\n         XmlAssert.assertThat(actual)\n                 .withNamespaceContext(NAMESPACES)\n                 .valueByXPath(\"count(//dmn:businessKnowledgeModel[@name='\" + nodeName + \"'])\")\n-                .isEqualTo(2);\n+                .isEqualTo(1);\n+\n+        XmlAssert.assertThat(actual)\n+                .withNamespaceContext(NAMESPACES)\n+                .valueByXPath(\"count(//dmn:businessKnowledgeModel[@name='\" + copiedNodeName + \"'])\")\n+                .isEqualTo(1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2fa1de59308b44be488aa2428cf0fd01229d793e"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1281, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}