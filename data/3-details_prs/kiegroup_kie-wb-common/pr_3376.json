{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYwNTEwODU4", "number": 3376, "title": "JBPM-9266 : Stunner - Called element in Reusable sub-process is not populated", "bodyText": "Hi @romartin @handreyrc can you review this PR? Basically every time the CalledElement for property was created and a call to get the contents it was firing up a Server event, but returned immediately so the data was not updated, if you previously selected and unselected the element it would get the right data. What I did is make the call upon the Form Provider creation so that the data is ready when the user clicked on the combo box.", "createdAt": "2020-07-31T20:59:26Z", "url": "https://github.com/kiegroup/kie-wb-common/pull/3376", "merged": true, "mergeCommit": {"oid": "8b05367675c3832bddcf31adaf30ac419a5cba1a"}, "closed": true, "closedAt": "2020-09-17T21:14:27Z", "author": {"login": "inodeman"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8DbZtgFqTQ2MjA3OTkxOQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJ3q0TAFqTQ5MDk5MzY0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyMDc5OTE5", "url": "https://github.com/kiegroup/kie-wb-common/pull/3376#pullrequestreview-462079919", "createdAt": "2020-08-05T23:00:28Z", "commit": {"oid": "e6e31d54f3a2ec073d5e54eafc9d86f7f6cc80b4"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQyMzowMDoyOFrOG8db8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQyMzowMDoyOFrOG8db8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA1MDAzNQ==", "bodyText": "looks tricky.. :) Why need for scheduling it? Can't we instead, observe to some CDI event or use some callback on the code, in order to avoid this?", "url": "https://github.com/kiegroup/kie-wb-common/pull/3376#discussion_r466050035", "createdAt": "2020-08-05T23:00:28Z", "author": {"login": "romartin"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/main/java/org/kie/workbench/common/stunner/bpmn/client/dataproviders/CalledElementFormProvider.java", "diffHunk": "@@ -40,6 +41,19 @@ public String getProviderName() {\n         return getClass().getSimpleName();\n     }\n \n+    public CalledElementFormProvider() {\n+        scheduleServiceCall(() -> requestProcessDataEvent.fire(new RequestProcessDataEvent()));\n+    }\n+\n+    protected void scheduleServiceCall(final com.google.gwt.user.client.Command command) {\n+        new Timer() {\n+            @Override\n+            public void run() {\n+                command.execute();\n+            }\n+        }.schedule(100);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e6e31d54f3a2ec073d5e54eafc9d86f7f6cc80b4"}, "originalPosition": 22}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e6e31d54f3a2ec073d5e54eafc9d86f7f6cc80b4", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/e6e31d54f3a2ec073d5e54eafc9d86f7f6cc80b4", "committedDate": "2020-07-31T20:51:33Z", "message": "JBPM-9266 : Stunner - Called element in Reusable sub-process is not populated"}, "afterCommit": {"oid": "8e46728307f7ac34ca57ad8a144974e812d18a1e", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/8e46728307f7ac34ca57ad8a144974e812d18a1e", "committedDate": "2020-08-10T20:13:59Z", "message": "JBPM-9266 : Stunner - Called element in Reusable sub-process is not populated"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0ODgzNzk1", "url": "https://github.com/kiegroup/kie-wb-common/pull/3376#pullrequestreview-464883795", "createdAt": "2020-08-11T09:06:57Z", "commit": {"oid": "8e46728307f7ac34ca57ad8a144974e812d18a1e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwOTowNjo1N1rOG-vD-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwOTowNjo1N1rOG-vD-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODQzNTk2Mg==", "bodyText": "Do we need GwtMockito here? Mockito also has a spy method.\nAlso looks like spied object is not used later.", "url": "https://github.com/kiegroup/kie-wb-common/pull/3376#discussion_r468435962", "createdAt": "2020-08-11T09:06:57Z", "author": {"login": "hasys"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/test/java/org/kie/workbench/common/stunner/bpmn/client/dataproviders/CalledElementFormProviderTest.java", "diffHunk": "@@ -38,8 +38,9 @@\n import static org.mockito.Mockito.times;\n import static org.mockito.Mockito.verify;\n import static org.mockito.Mockito.when;\n+import static org.powermock.api.mockito.PowerMockito.spy;\n \n-@RunWith(MockitoJUnitRunner.class)\n+@RunWith(GwtMockitoTestRunner.class)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e46728307f7ac34ca57ad8a144974e812d18a1e"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2MjM2ODQ1", "url": "https://github.com/kiegroup/kie-wb-common/pull/3376#pullrequestreview-466236845", "createdAt": "2020-08-12T20:10:41Z", "commit": {"oid": "a40eb8b15df20dc9bb868470a203dc488f257661"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0NjA3ODI0", "url": "https://github.com/kiegroup/kie-wb-common/pull/3376#pullrequestreview-474607824", "createdAt": "2020-08-25T15:38:52Z", "commit": {"oid": "a40eb8b15df20dc9bb868470a203dc488f257661"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a40eb8b15df20dc9bb868470a203dc488f257661", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/a40eb8b15df20dc9bb868470a203dc488f257661", "committedDate": "2020-08-12T16:15:22Z", "message": "JBPM-9266 : Stunner - Called element in Reusable sub-process is not populated"}, "afterCommit": {"oid": "64f1ef6d0866c3eeb0ef4e15d41d68a784e9103f", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/64f1ef6d0866c3eeb0ef4e15d41d68a784e9103f", "committedDate": "2020-08-26T18:09:44Z", "message": "JBPM-9266 : Stunner - Called element in Reusable sub-process is not populated"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5ODY4MTQz", "url": "https://github.com/kiegroup/kie-wb-common/pull/3376#pullrequestreview-479868143", "createdAt": "2020-09-01T15:34:12Z", "commit": {"oid": "64f1ef6d0866c3eeb0ef4e15d41d68a784e9103f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3cc6305ca99b138a22d02518453efad1c84cfdbd", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/3cc6305ca99b138a22d02518453efad1c84cfdbd", "committedDate": "2020-09-01T16:39:09Z", "message": "JBPM-9266 : Stunner - Called element in Reusable sub-process is not populated"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d7f37525c735f10786f3de3e592a608eb1837a3", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/9d7f37525c735f10786f3de3e592a608eb1837a3", "committedDate": "2020-09-01T16:39:09Z", "message": "JBPM-9266 : Stunner - Called element in Reusable sub-process is not populated"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8aa3b52d77d3bf574aecf62d9d3cb27ae207e378", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/8aa3b52d77d3bf574aecf62d9d3cb27ae207e378", "committedDate": "2020-09-01T16:39:09Z", "message": "JBPM-9266 : Stunner - Called element in Reusable sub-process is not populated"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb41b829f47810d67c8ce3bb46b5f33caa281ca6", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/eb41b829f47810d67c8ce3bb46b5f33caa281ca6", "committedDate": "2020-09-01T16:39:09Z", "message": "JBPM-9266 : Stunner - Called element in Reusable sub-process is not populated"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72e509ab005f8696395340ccac7127ec8a95a781", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/72e509ab005f8696395340ccac7127ec8a95a781", "committedDate": "2020-09-01T17:34:36Z", "message": "JBPM-9266 : Stunner - Called element in Reusable sub-process is not populated"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "64f1ef6d0866c3eeb0ef4e15d41d68a784e9103f", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/64f1ef6d0866c3eeb0ef4e15d41d68a784e9103f", "committedDate": "2020-08-26T18:09:44Z", "message": "JBPM-9266 : Stunner - Called element in Reusable sub-process is not populated"}, "afterCommit": {"oid": "72e509ab005f8696395340ccac7127ec8a95a781", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/72e509ab005f8696395340ccac7127ec8a95a781", "committedDate": "2020-09-01T17:34:36Z", "message": "JBPM-9266 : Stunner - Called element in Reusable sub-process is not populated"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwNTk0MTIw", "url": "https://github.com/kiegroup/kie-wb-common/pull/3376#pullrequestreview-490594120", "createdAt": "2020-09-17T13:28:15Z", "commit": {"oid": "72e509ab005f8696395340ccac7127ec8a95a781"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwOTkzNjQw", "url": "https://github.com/kiegroup/kie-wb-common/pull/3376#pullrequestreview-490993640", "createdAt": "2020-09-17T21:14:06Z", "commit": {"oid": "72e509ab005f8696395340ccac7127ec8a95a781"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 482, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}