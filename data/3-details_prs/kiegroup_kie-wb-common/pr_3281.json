{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA3NTcyMTY5", "number": 3281, "title": "KOGITO-1748 - VsCode editor - Package property is empty when the process is created", "bodyText": "https://issues.redhat.com/browse/KOGITO-1748\nPackage property is set to \"default\" on new .bpmn files. Existing .bpmn files with empty values\nfor this property will also be set to \"default\".", "createdAt": "2020-04-22T22:05:25Z", "url": "https://github.com/kiegroup/kie-wb-common/pull/3281", "merged": true, "mergeCommit": {"oid": "93f1fce5381a8bcb673895cf676caae1b6ee0014"}, "closed": true, "closedAt": "2020-05-07T23:58:37Z", "author": {"login": "Josephblt"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcaa6sKgFqTM5ODk5NDY3MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcekUowAFqTQwNjM5NjQ1Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4OTk0Njcw", "url": "https://github.com/kiegroup/kie-wb-common/pull/3281#pullrequestreview-398994670", "createdAt": "2020-04-23T11:09:44Z", "commit": {"oid": "caff6aa0ae8767d2e54564e5e282d2bad3164540"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMTowOTo0NVrOGKjy9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxMTowOTo0NVrOGKjy9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzcyNTQzMQ==", "bodyText": "Hi @Josephblt,\nwe already have an ability to use file name as process ID. It because now we are getting file name with filepath from VS Code. My idea is to parse package from the path if possible. For example, if it is a maven project than file path will be like /some/path/ProjectName/src/main/java/folder/folder2/FileName.bpmn.\nSo, if file path contains src/main/java all between it and file name can be a package, just need to replace / or \\ to dots. And if src/main/java pattern is not met, use default value. WDYT?\nThe code about file name is located here: https://github.com/hasys/kie-wb-common/blob/d94848a21f0f2966acc960dc9ddd9f7aa9b398bf/kie-wb-common-stunner/kie-wb-common-stunner-extensions/kie-wb-common-stunner-kogito/kie-wb-common-stunner-kogito-client/src/main/java/org/kie/workbench/common/stunner/kogito/client/service/AbstractKogitoClientDiagramService.java", "url": "https://github.com/kiegroup/kie-wb-common/pull/3281#discussion_r413725431", "createdAt": "2020-04-23T11:09:45Z", "author": {"login": "hasys"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-marshalling/src/main/java/org/kie/workbench/common/stunner/bpmn/client/marshall/service/BPMNClientDiagramService.java", "diffHunk": "@@ -146,6 +148,11 @@ private void updateDiagramSet(Node<Definition<BPMNDiagram>, ?> diagramNode, Stri\n         if (diagramSet.getId().getValue().isEmpty()) {\n             diagramSet.getId().setValue(createValidId(name));\n         }\n+\n+        if (diagramSet.getPackageProperty().getValue() == null ||\n+                diagramSet.getPackageProperty().getValue().isEmpty()) {\n+            diagramSet.getPackageProperty().setValue(DEFAULT_PACKAGE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "caff6aa0ae8767d2e54564e5e282d2bad3164540"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5NDg2MzYx", "url": "https://github.com/kiegroup/kie-wb-common/pull/3281#pullrequestreview-399486361", "createdAt": "2020-04-23T21:21:43Z", "commit": {"oid": "caff6aa0ae8767d2e54564e5e282d2bad3164540"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "caff6aa0ae8767d2e54564e5e282d2bad3164540", "author": {"user": {"login": "Josephblt", "name": "Wagner Scholl Lemos"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/caff6aa0ae8767d2e54564e5e282d2bad3164540", "committedDate": "2020-04-22T22:03:16Z", "message": "KOGITO-1748 - VsCode editor - Package property is empty when the process is created\n\nPackage property is set to \"default\" on new .bpmn files. Existing files with empty values\nfor this property will also be set to \"default\"."}, "afterCommit": {"oid": "002f42ed92ee8b83ba238049d49dc3e326e01659", "author": {"user": {"login": "Josephblt", "name": "Wagner Scholl Lemos"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/002f42ed92ee8b83ba238049d49dc3e326e01659", "committedDate": "2020-04-24T18:59:32Z", "message": "KOGITO-1748 - VsCode editor - Package property is empty when the process is created\n\nPackage property is set to \"default\" on new .bpmn files. Existing files with empty values\nfor this property will also be set to \"default\"."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "002f42ed92ee8b83ba238049d49dc3e326e01659", "author": {"user": {"login": "Josephblt", "name": "Wagner Scholl Lemos"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/002f42ed92ee8b83ba238049d49dc3e326e01659", "committedDate": "2020-04-24T18:59:32Z", "message": "KOGITO-1748 - VsCode editor - Package property is empty when the process is created\n\nPackage property is set to \"default\" on new .bpmn files. Existing files with empty values\nfor this property will also be set to \"default\"."}, "afterCommit": {"oid": "cff7dab9941691fcbfa097062e616b1e72175466", "author": {"user": {"login": "Josephblt", "name": "Wagner Scholl Lemos"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/cff7dab9941691fcbfa097062e616b1e72175466", "committedDate": "2020-04-27T14:58:50Z", "message": "KOGITO-1748 - VsCode editor - Package property is empty when the process is created\n\nPackage property is set to \"default\" on new .bpmn files. Existing files with empty values\nfor this property will also be set to \"default\"."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cff7dab9941691fcbfa097062e616b1e72175466", "author": {"user": {"login": "Josephblt", "name": "Wagner Scholl Lemos"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/cff7dab9941691fcbfa097062e616b1e72175466", "committedDate": "2020-04-27T14:58:50Z", "message": "KOGITO-1748 - VsCode editor - Package property is empty when the process is created\n\nPackage property is set to \"default\" on new .bpmn files. Existing files with empty values\nfor this property will also be set to \"default\"."}, "afterCommit": {"oid": "3ecaabc8bcf91bb7ad89ffb841d0a104cc56c021", "author": {"user": {"login": "Josephblt", "name": "Wagner Scholl Lemos"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/3ecaabc8bcf91bb7ad89ffb841d0a104cc56c021", "committedDate": "2020-04-28T08:28:30Z", "message": "KOGITO-1748 - VsCode editor - Package property is empty when the process is created\n\nPackage property is set to \"default\" on new .bpmn files. Existing files with empty values\nfor this property will also be set to \"default\"."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyMjMxNDA5", "url": "https://github.com/kiegroup/kie-wb-common/pull/3281#pullrequestreview-402231409", "createdAt": "2020-04-28T21:38:15Z", "commit": {"oid": "3ecaabc8bcf91bb7ad89ffb841d0a104cc56c021"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQyMTozODoxNlrOGNn-Rg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQyMTo0MDowM1rOGNoB5A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjkzOTU5MA==", "bodyText": "can it be private? or at least, package protected (no access modifier)?", "url": "https://github.com/kiegroup/kie-wb-common/pull/3281#discussion_r416939590", "createdAt": "2020-04-28T21:38:16Z", "author": {"login": "romartin"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-marshalling/src/main/java/org/kie/workbench/common/stunner/bpmn/client/marshall/service/BPMNClientDiagramService.java", "diffHunk": "@@ -55,6 +55,9 @@\n @ApplicationScoped\n public class BPMNClientDiagramService extends AbstractKogitoClientDiagramService {\n \n+    protected static final String DEFAULT_PACKAGE = \"default\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ecaabc8bcf91bb7ad89ffb841d0a104cc56c021"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjk0MDE2MQ==", "bodyText": "can it be private? or at least, package protected (no access modifier)?", "url": "https://github.com/kiegroup/kie-wb-common/pull/3281#discussion_r416940161", "createdAt": "2020-04-28T21:39:20Z", "author": {"login": "romartin"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-marshalling/src/main/java/org/kie/workbench/common/stunner/bpmn/client/marshall/service/BPMNClientDiagramService.java", "diffHunk": "@@ -55,6 +55,9 @@\n @ApplicationScoped\n public class BPMNClientDiagramService extends AbstractKogitoClientDiagramService {\n \n+    protected static final String DEFAULT_PACKAGE = \"default\";\n+    protected static final String NO_DIAGRAM_MESSAGE = \"No BPMN Diagram can be found.\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ecaabc8bcf91bb7ad89ffb841d0a104cc56c021"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjk0MDUxNg==", "bodyText": "any reason for changing the type to a NullPointerException?", "url": "https://github.com/kiegroup/kie-wb-common/pull/3281#discussion_r416940516", "createdAt": "2020-04-28T21:40:03Z", "author": {"login": "romartin"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-marshalling/src/main/java/org/kie/workbench/common/stunner/bpmn/client/marshall/service/BPMNClientDiagramService.java", "diffHunk": "@@ -166,7 +180,7 @@ private Diagram parse(final String fileName, final String raw) {\n         final Graph<DefinitionSet, ?> graph = marshalling.unmarshall(metadata, raw);\n         final Node<Definition<BPMNDiagram>, ?> diagramNode = GraphUtils.getFirstNode((Graph<?, Node>) graph, BPMNDiagramImpl.class);\n         if (null == diagramNode) {\n-            throw new RuntimeException(\"No BPMN Diagram can be found.\");\n+            throw new NullPointerException(NO_DIAGRAM_MESSAGE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3ecaabc8bcf91bb7ad89ffb841d0a104cc56c021"}, "originalPosition": 49}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3ecaabc8bcf91bb7ad89ffb841d0a104cc56c021", "author": {"user": {"login": "Josephblt", "name": "Wagner Scholl Lemos"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/3ecaabc8bcf91bb7ad89ffb841d0a104cc56c021", "committedDate": "2020-04-28T08:28:30Z", "message": "KOGITO-1748 - VsCode editor - Package property is empty when the process is created\n\nPackage property is set to \"default\" on new .bpmn files. Existing files with empty values\nfor this property will also be set to \"default\"."}, "afterCommit": {"oid": "da981f2936bfa88fd4d839b42946acd69572d2eb", "author": {"user": {"login": "Josephblt", "name": "Wagner Scholl Lemos"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/da981f2936bfa88fd4d839b42946acd69572d2eb", "committedDate": "2020-04-29T03:17:10Z", "message": "KOGITO-1748 - VsCode editor - Package property is empty when the process is created\n\nPackage property is set to \"default\" on new .bpmn files. Existing files with empty values\nfor this property will also be set to \"default\"."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzMzQ1ODcx", "url": "https://github.com/kiegroup/kie-wb-common/pull/3281#pullrequestreview-403345871", "createdAt": "2020-04-30T09:19:33Z", "commit": {"oid": "da981f2936bfa88fd4d839b42946acd69572d2eb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4c3e342f5ece0ddf6f2f3f9b5134f10f1b6fa4e", "author": {"user": {"login": "Josephblt", "name": "Wagner Scholl Lemos"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/d4c3e342f5ece0ddf6f2f3f9b5134f10f1b6fa4e", "committedDate": "2020-05-06T01:04:06Z", "message": "KOGITO-1748 - VsCode editor - Package property is empty when the process is created\n\nPackage property is set to \"default\" on new .bpmn files. Existing files with empty values\nfor this property will also be set to \"default\"."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "da981f2936bfa88fd4d839b42946acd69572d2eb", "author": {"user": {"login": "Josephblt", "name": "Wagner Scholl Lemos"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/da981f2936bfa88fd4d839b42946acd69572d2eb", "committedDate": "2020-04-29T03:17:10Z", "message": "KOGITO-1748 - VsCode editor - Package property is empty when the process is created\n\nPackage property is set to \"default\" on new .bpmn files. Existing files with empty values\nfor this property will also be set to \"default\"."}, "afterCommit": {"oid": "d4c3e342f5ece0ddf6f2f3f9b5134f10f1b6fa4e", "author": {"user": {"login": "Josephblt", "name": "Wagner Scholl Lemos"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/d4c3e342f5ece0ddf6f2f3f9b5134f10f1b6fa4e", "committedDate": "2020-05-06T01:04:06Z", "message": "KOGITO-1748 - VsCode editor - Package property is empty when the process is created\n\nPackage property is set to \"default\" on new .bpmn files. Existing files with empty values\nfor this property will also be set to \"default\"."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2Mzk2NDUy", "url": "https://github.com/kiegroup/kie-wb-common/pull/3281#pullrequestreview-406396452", "createdAt": "2020-05-06T08:22:56Z", "commit": {"oid": "d4c3e342f5ece0ddf6f2f3f9b5134f10f1b6fa4e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 609, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}