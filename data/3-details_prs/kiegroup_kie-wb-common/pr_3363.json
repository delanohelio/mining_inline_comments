{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1OTc1NDIz", "number": 3363, "title": "KOGITO-2651 : Allow expressions in output assignments", "bodyText": "Hi @romartin @handreyrc can you review this PR? Change is simple, there was a check before to show a warning if the variable is output and expression. I removed the custom message and constants and updated test code. Let me know", "createdAt": "2020-07-23T22:05:34Z", "url": "https://github.com/kiegroup/kie-wb-common/pull/3363", "merged": true, "mergeCommit": {"oid": "11d4a23354bebd6979fa9b429737501a1f6a2f8d"}, "closed": true, "closedAt": "2020-08-14T02:08:50Z", "author": {"login": "inodeman"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc7TCfkAFqTQ2MDA4MjM1Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-pq-VAFqTQ2NzI0MTU5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMDgyMzUz", "url": "https://github.com/kiegroup/kie-wb-common/pull/3363#pullrequestreview-460082353", "createdAt": "2020-08-03T14:38:32Z", "commit": {"oid": "f17737822a61277495d75970ae6db9e17aafc0f7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyMDk5ODUx", "url": "https://github.com/kiegroup/kie-wb-common/pull/3363#pullrequestreview-462099851", "createdAt": "2020-08-05T23:57:07Z", "commit": {"oid": "f17737822a61277495d75970ae6db9e17aafc0f7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQyMzo1NzowOFrOG8ehdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQwMDowMDoxOFrOG8elPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA2NzgyOQ==", "bodyText": "New test doesn't test constant, but expression. So {hello} should be reverted back to hello.", "url": "https://github.com/kiegroup/kie-wb-common/pull/3363#discussion_r466067829", "createdAt": "2020-08-05T23:57:08Z", "author": {"login": "hasys"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/test/java/org/kie/workbench/common/stunner/bpmn/client/forms/fields/assignmentsEditor/AssignmentListItemWidgetViewImplTest.java", "diffHunk": "@@ -361,9 +361,8 @@ public void testSetExpressionToOutput() {\n     public void testSetConstantToOutput() {\n         AssignmentRow row = new AssignmentRow(null, OUTPUT, null, null, null, null);\n         when(view.getModel()).thenReturn(row);\n-        view.setExpression(\"hello\");\n-\n-        assertNull(view.getModel().getExpression());\n+        view.setExpression(\"{hello}\");\n+        assertEquals(view.getModel().getExpression(), \"{hello}\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f17737822a61277495d75970ae6db9e17aafc0f7"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA2ODU1Nw==", "bodyText": "Method can be removed now since it had only one invocation.", "url": "https://github.com/kiegroup/kie-wb-common/pull/3363#discussion_r466068557", "createdAt": "2020-08-05T23:59:32Z", "author": {"login": "hasys"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/main/java/org/kie/workbench/common/stunner/bpmn/client/forms/fields/assignmentsEditor/AssignmentListItemWidgetViewImpl.java", "diffHunk": "@@ -281,13 +281,7 @@ public String getExpression() {\n \n     @Override\n     public void setExpression(final String expression) {\n-        if (getModel().getVariableType() == OUTPUT && isConstant(expression)) {\n-            notification.fire(new NotificationEvent(StunnerFormsClientFieldsConstants.INSTANCE.Only_expressions_allowed_for_output(),\n-                                                    NotificationEvent.NotificationType.ERROR));\n-            processVarComboBox.textBoxValueChanged(\"\");\n-        } else {\n             getModel().setExpression(expression);\n-        }\n     }\n \n     private static boolean isConstant(String expression) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f17737822a61277495d75970ae6db9e17aafc0f7"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA2ODc5Ng==", "bodyText": "Some spaces can be removed here since it is now on method level.", "url": "https://github.com/kiegroup/kie-wb-common/pull/3363#discussion_r466068796", "createdAt": "2020-08-06T00:00:18Z", "author": {"login": "hasys"}, "path": "kie-wb-common-stunner/kie-wb-common-stunner-sets/kie-wb-common-stunner-bpmn/kie-wb-common-stunner-bpmn-client/src/main/java/org/kie/workbench/common/stunner/bpmn/client/forms/fields/assignmentsEditor/AssignmentListItemWidgetViewImpl.java", "diffHunk": "@@ -281,13 +281,7 @@ public String getExpression() {\n \n     @Override\n     public void setExpression(final String expression) {\n-        if (getModel().getVariableType() == OUTPUT && isConstant(expression)) {\n-            notification.fire(new NotificationEvent(StunnerFormsClientFieldsConstants.INSTANCE.Only_expressions_allowed_for_output(),\n-                                                    NotificationEvent.NotificationType.ERROR));\n-            processVarComboBox.textBoxValueChanged(\"\");\n-        } else {\n             getModel().setExpression(expression);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f17737822a61277495d75970ae6db9e17aafc0f7"}, "originalPosition": 9}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f17737822a61277495d75970ae6db9e17aafc0f7", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/f17737822a61277495d75970ae6db9e17aafc0f7", "committedDate": "2020-07-23T21:39:55Z", "message": "KOGITO-2651 : Allow expressions in output assignments"}, "afterCommit": {"oid": "b9fe1144c6dfa3457ce2f5187e976110ca63753e", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/b9fe1144c6dfa3457ce2f5187e976110ca63753e", "committedDate": "2020-08-06T18:07:34Z", "message": "KOGITO-2651 : Allow expressions in output assignments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a140f57860730e0e98e45c7aa09f05ddc3d0e496", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/a140f57860730e0e98e45c7aa09f05ddc3d0e496", "committedDate": "2020-08-10T15:00:58Z", "message": "KOGITO-2651 : Allow expressions in output assignments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "875b74bda84e5ae8f77ec4633e9b09a867e11759", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/875b74bda84e5ae8f77ec4633e9b09a867e11759", "committedDate": "2020-08-10T15:00:59Z", "message": "KOGITO-2651 : Allow expressions in output assignments"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b9fe1144c6dfa3457ce2f5187e976110ca63753e", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/b9fe1144c6dfa3457ce2f5187e976110ca63753e", "committedDate": "2020-08-06T18:07:34Z", "message": "KOGITO-2651 : Allow expressions in output assignments"}, "afterCommit": {"oid": "875b74bda84e5ae8f77ec4633e9b09a867e11759", "author": {"user": {"login": "inodeman", "name": "Jaime Enriquez"}}, "url": "https://github.com/kiegroup/kie-wb-common/commit/875b74bda84e5ae8f77ec4633e9b09a867e11759", "committedDate": "2020-08-10T15:00:59Z", "message": "KOGITO-2651 : Allow expressions in output assignments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY3MjQxNTk2", "url": "https://github.com/kiegroup/kie-wb-common/pull/3363#pullrequestreview-467241596", "createdAt": "2020-08-14T00:42:26Z", "commit": {"oid": "875b74bda84e5ae8f77ec4633e9b09a867e11759"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 471, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}