{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI0Mzc4Mzc0", "number": 1227, "title": "Make `HttpObjectDecoder` more RFC7230 compatible and other improvements", "bodyText": "Motivation:\nRFC7230 defines obs-text as %x80-FF (any negative byte value), and\nreason-phrase as *( HTAB / SP / VCHAR / obs-text ).\nModifications:\n\nAdjust isObsText and reason-phrase validation according to RFC7230;\nVerify that the passed closeHandler is non-null;\n\nResult:\nHttpObjectDecoder is more robust and RFC7230 compatible.", "createdAt": "2020-11-20T03:15:08Z", "url": "https://github.com/apple/servicetalk/pull/1227", "merged": true, "mergeCommit": {"oid": "7eb37c34d66dba3205738d4775ab7ecca4529e41"}, "closed": true, "closedAt": "2020-11-20T23:50:59Z", "author": {"login": "idelpivnitskiy"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdeOlG9AH2gAyNTI0Mzc4Mzc0OjNkYjA5YTYwMTlkY2ZhYmZkMmIzNmJmZTA1MTkwMjViMWE3MzhmMTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdeelUwgH2gAyNTI0Mzc4Mzc0Ojg3Mzk5Y2I3NDg3Y2U5ZTgxODllYjFlYjcxM2U2MDFkMzk5ODgyZTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3db09a6019dcfabfd2b36bfe0519025b1a738f16", "author": {"user": {"login": "idelpivnitskiy", "name": "Idel Pivnitskiy"}}, "url": "https://github.com/apple/servicetalk/commit/3db09a6019dcfabfd2b36bfe0519025b1a738f16", "committedDate": "2020-11-20T03:14:10Z", "message": "Make `HttpObjectDecoder` more RFC7230 compatible and other improvements\n\nMotivation:\n\nRFC7230 defines `obs-text` as `%x80-FF` (any negative byte value), and\nreason-phrase as `*( HTAB / SP / VCHAR / obs-text )`.\n\nModifications:\n\n- Adjust `isObsText` and reason-phrase validation according to RFC7230;\n- Verify that the passed `closeHandler` is non-null;\n- Return fast if the buffer is not readable after skipping control chars;\n\nResult:\n\n`HttpObjectDecoder` is more robust and RFC7230 compatible."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1Nzk2NzQ2", "url": "https://github.com/apple/servicetalk/pull/1227#pullrequestreview-535796746", "createdAt": "2020-11-20T21:42:52Z", "commit": {"oid": "3db09a6019dcfabfd2b36bfe0519025b1a738f16"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQyMTo0Mjo1MlrOH3hvrQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQyMTo0Mjo1MlrOH3hvrQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzk4NjYwNQ==", "bodyText": "IIUC this is just an optimization to avoid attempting to search for CRLF? is this thought to be common?", "url": "https://github.com/apple/servicetalk/pull/1227#discussion_r527986605", "createdAt": "2020-11-20T21:42:52Z", "author": {"login": "Scottmitch"}, "path": "servicetalk-http-netty/src/main/java/io/servicetalk/http/netty/HttpObjectDecoder.java", "diffHunk": "@@ -225,6 +226,9 @@ protected final void decode(final ChannelHandlerContext ctx, final ByteBuf buffe\n                 currentState = State.READ_INITIAL;\n             }\n             case READ_INITIAL: {\n+                if (!buffer.isReadable()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3db09a6019dcfabfd2b36bfe0519025b1a738f16"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87399cb7487ce9e8189eb1eb713e601d399882e5", "author": {"user": {"login": "idelpivnitskiy", "name": "Idel Pivnitskiy"}}, "url": "https://github.com/apple/servicetalk/commit/87399cb7487ce9e8189eb1eb713e601d399882e5", "committedDate": "2020-11-20T21:52:53Z", "message": "Remove unnecessary optimization for READ_INITIAL"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3346, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}