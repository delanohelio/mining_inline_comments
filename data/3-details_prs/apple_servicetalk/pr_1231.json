{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI2MDg0Nzc0", "number": 1231, "title": "Publisher#flatMapConcatIterable error recovery from Subscriber#onNext\u2026", "bodyText": "\u2026 throwing\nMotivation:\nIf Subscriber#onNext throws in Publisher#flatMapConcatIterable we don't\nreset the currentIterator state if there is no pending requestN demand.\nThis may result in not propagating the error to the downstream\nsubscriber.\nModifications:\n\nPublisherConcatMapIterable should reset the currentIterator state when\ncatching an exception from Subscriber#onNext\nPublisherConcatMapIterable should also attempt to close the Iterator\nif an exception is caught from Subscriber methods\n\nResult:\nPublisher#flatMapConcatIterable has more robust exception handling and\nerror propagation.", "createdAt": "2020-11-24T00:53:18Z", "url": "https://github.com/apple/servicetalk/pull/1231", "merged": true, "mergeCommit": {"oid": "801b14899da88a3ab1407dd8703a3d861836b2bf"}, "closed": true, "closedAt": "2020-11-30T16:01:06Z", "author": {"login": "Scottmitch"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdfe4kvAH2gAyNTI2MDg0Nzc0OjlkNWFjM2M2MjhhNWQ4YTM2ODA0NjBlMDIxOTkwMTkwZTg5MjY1YWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdgSSx-gFqTUzOTI4MTEzNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9d5ac3c628a5d8a3680460e021990190e89265ad", "author": {"user": {"login": "Scottmitch", "name": "Scott Mitchell"}}, "url": "https://github.com/apple/servicetalk/commit/9d5ac3c628a5d8a3680460e021990190e89265ad", "committedDate": "2020-11-24T00:47:50Z", "message": "Publisher#flatMapConcatIterable error recovery from Subscriber#onNext throwing\n\nMotivation:\nIf Subscriber#onNext throws in Publisher#flatMapConcatIterable we don't\nreset the currentIterator state if there is no pending requestN demand.\nThis may result in not propagating the error to the downstream\nsubscriber.\n\nModifications:\n- PublisherConcatMapIterable should reset the currentIterator state when\ncatching an exception from Subscriber#onNext\n- PublisherConcatMapIterable should also attempt to close the Iterator\nif an exception is caught from Subscriber methods\n\nResult:\nPublisher#flatMapConcatIterable has more robust exception handling and\nerror propagation."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2OTU4OTkx", "url": "https://github.com/apple/servicetalk/pull/1231#pullrequestreview-536958991", "createdAt": "2020-11-24T00:54:15Z", "commit": {"oid": "9d5ac3c628a5d8a3680460e021990190e89265ad"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQwMDo1NDoxNVrOH4lPlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQwMDo1NDoxNVrOH4lPlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA5MjUwMw==", "bodyText": "the updated test are in #1229 and depend upon a few core changes (e.g. TestPublisher, TestPublisherSubscriber) so I will defer the testing to that PR with the larger changes.", "url": "https://github.com/apple/servicetalk/pull/1231#discussion_r529092503", "createdAt": "2020-11-24T00:54:15Z", "author": {"login": "Scottmitch"}, "path": "servicetalk-concurrent-api/src/test/java/io/servicetalk/concurrent/api/PublisherConcatMapIterableTest.java", "diffHunk": "@@ -315,6 +316,7 @@ public void exceptionFromBufferedOnNextThenOnErrorIsPropagated() {\n         testExceptionFromBufferedOnNextThenTerminalIsPropagated(publisher::onError);\n     }\n \n+    @Ignore(\"fixed in https://github.com/apple/servicetalk/pull/1229\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d5ac3c628a5d8a3680460e021990190e89265ad"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3Mjc5NTEx", "url": "https://github.com/apple/servicetalk/pull/1231#pullrequestreview-537279511", "createdAt": "2020-11-24T09:10:05Z", "commit": {"oid": "9d5ac3c628a5d8a3680460e021990190e89265ad"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM5MjgxMTM3", "url": "https://github.com/apple/servicetalk/pull/1231#pullrequestreview-539281137", "createdAt": "2020-11-26T12:41:37Z", "commit": {"oid": "9d5ac3c628a5d8a3680460e021990190e89265ad"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3355, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}