{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYzOTU0MDQ5", "number": 922, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QwNjozMDowMFrODYubPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QwNjozMDowMFrODYubPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3MjUzMDUzOnYy", "diffSide": "RIGHT", "path": "servicetalk-utils-internal/src/main/java/io/servicetalk/utils/internal/PlatformDependent.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QwNjozMDowMFrOFev4xw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxODoxMzoxNlrOFfBIgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzc4NjE4Mw==", "bodyText": "Was this an API change in jctools?", "url": "https://github.com/apple/servicetalk/pull/922#discussion_r367786183", "createdAt": "2020-01-17T06:30:00Z", "author": {"login": "NiteshKant"}, "path": "servicetalk-utils-internal/src/main/java/io/servicetalk/utils/internal/PlatformDependent.java", "diffHunk": "@@ -322,7 +322,7 @@ private Queues() {\n         }\n \n         static <T> Queue<T> newUnboundedLinkedMpscQueue() {\n-            return USE_UNSAFE_QUEUES ? MpscLinkedQueue.newMpscLinkedQueue()\n+            return USE_UNSAFE_QUEUES ? new MpscLinkedQueue<>()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "031bced67e1476d7325ac95dc87e5a250cc7bd5f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODAwNDYzNw==", "bodyText": "jctools update was a major version bump (e.g. 2.x -> 3.x) so API breaking is fair. However the package name didn't change so this may result in collisions at runtime and the and maven coordinates didn't change so this may cause trouble for build tools at compile time during the transition period... /cc @nitsanw", "url": "https://github.com/apple/servicetalk/pull/922#discussion_r368004637", "createdAt": "2020-01-17T15:50:10Z", "author": {"login": "Scottmitch"}, "path": "servicetalk-utils-internal/src/main/java/io/servicetalk/utils/internal/PlatformDependent.java", "diffHunk": "@@ -322,7 +322,7 @@ private Queues() {\n         }\n \n         static <T> Queue<T> newUnboundedLinkedMpscQueue() {\n-            return USE_UNSAFE_QUEUES ? MpscLinkedQueue.newMpscLinkedQueue()\n+            return USE_UNSAFE_QUEUES ? new MpscLinkedQueue<>()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzc4NjE4Mw=="}, "originalCommit": {"oid": "031bced67e1476d7325ac95dc87e5a250cc7bd5f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA2Nzc2Nw==", "bodyText": "yep, they had minor API changes: https://github.com/JCTools/JCTools/blob/master/RELEASE-NOTES.md#300\n@Scottmitch @NiteshKant will you suggest to not update for now? Netty 4.1.45 depends on jctools 2.x, the next netty version will use 3.0.0. We can update it later to make it consistent with netty: netty/netty@8410b08", "url": "https://github.com/apple/servicetalk/pull/922#discussion_r368067767", "createdAt": "2020-01-17T18:10:54Z", "author": {"login": "idelpivnitskiy"}, "path": "servicetalk-utils-internal/src/main/java/io/servicetalk/utils/internal/PlatformDependent.java", "diffHunk": "@@ -322,7 +322,7 @@ private Queues() {\n         }\n \n         static <T> Queue<T> newUnboundedLinkedMpscQueue() {\n-            return USE_UNSAFE_QUEUES ? MpscLinkedQueue.newMpscLinkedQueue()\n+            return USE_UNSAFE_QUEUES ? new MpscLinkedQueue<>()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzc4NjE4Mw=="}, "originalCommit": {"oid": "031bced67e1476d7325ac95dc87e5a250cc7bd5f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA2ODE1NQ==", "bodyText": "however, there were no api changes made in netty, so we should be good either way", "url": "https://github.com/apple/servicetalk/pull/922#discussion_r368068155", "createdAt": "2020-01-17T18:11:48Z", "author": {"login": "idelpivnitskiy"}, "path": "servicetalk-utils-internal/src/main/java/io/servicetalk/utils/internal/PlatformDependent.java", "diffHunk": "@@ -322,7 +322,7 @@ private Queues() {\n         }\n \n         static <T> Queue<T> newUnboundedLinkedMpscQueue() {\n-            return USE_UNSAFE_QUEUES ? MpscLinkedQueue.newMpscLinkedQueue()\n+            return USE_UNSAFE_QUEUES ? new MpscLinkedQueue<>()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzc4NjE4Mw=="}, "originalCommit": {"oid": "031bced67e1476d7325ac95dc87e5a250cc7bd5f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODA2ODczOQ==", "bodyText": "AFAIR netty shades jctools so we should be fine. Lets update", "url": "https://github.com/apple/servicetalk/pull/922#discussion_r368068739", "createdAt": "2020-01-17T18:13:16Z", "author": {"login": "NiteshKant"}, "path": "servicetalk-utils-internal/src/main/java/io/servicetalk/utils/internal/PlatformDependent.java", "diffHunk": "@@ -322,7 +322,7 @@ private Queues() {\n         }\n \n         static <T> Queue<T> newUnboundedLinkedMpscQueue() {\n-            return USE_UNSAFE_QUEUES ? MpscLinkedQueue.newMpscLinkedQueue()\n+            return USE_UNSAFE_QUEUES ? new MpscLinkedQueue<>()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzc4NjE4Mw=="}, "originalCommit": {"oid": "031bced67e1476d7325ac95dc87e5a250cc7bd5f"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2828, "cost": 1, "resetAt": "2021-11-12T09:44:50Z"}}}