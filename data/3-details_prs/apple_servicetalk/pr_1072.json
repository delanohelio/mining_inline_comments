{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0MzczMTEx", "number": 1072, "title": "Configure ServiceTalkJacksonSerializerFeature explicitly and remove '\u2026", "bodyText": "Configure ServiceTalkJacksonSerializerFeature explicitly and remove org.glassfish.jersey.jackson.JacksonFeature check\nMotivation:\nDocumentation for JerseyDataJacksonTestSuite.wrap says that we can't run test suite in Intellij IDEA because somehow JacksonFeature get to test classpath due to bug in ' Gradle IDEA plugin' . If we configure ServiceTalkJacksonSerializerFeature with Application.getProperties(), we can run tests in the Intellij for those classes that use ServiceTalkJacksonSerializerFeature\nModifications:\n\nAdd ServiceTalkJacksonSerializerFeature property to tests that uses ServiceTalkJacksonSerializerFeature\nremove method JerseyDataJacksonTestSuite.wrap\n\nResult:\nNow JerseyDataJacksonTestSuite.java tests can be run in IDEA.", "createdAt": "2020-05-28T09:46:05Z", "url": "https://github.com/apple/servicetalk/pull/1072", "merged": true, "mergeCommit": {"oid": "b863902e814959e24c63fbbc4d7a23422fee99c6"}, "closed": true, "closedAt": "2020-05-29T17:13:04Z", "author": {"login": "volyx"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclqgFKAH2gAyNDI0MzczMTExOmNkNjdlMWJmMDRiZmFjOTM2ZjBkZjIzZGZiZTBjNDRiZjM2OGRjZGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcmEmfaAFqTQyMTA4MzIzMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cd67e1bf04bfac936f0df23dfbe0c44bf368dcda", "author": {"user": {"login": "volyx", "name": "Dmitrii Volykhin"}}, "url": "https://github.com/apple/servicetalk/commit/cd67e1bf04bfac936f0df23dfbe0c44bf368dcda", "committedDate": "2020-05-28T09:32:20Z", "message": "Configure ServiceTalkJacksonSerializerFeature explicitly and remove 'org.glassfish.jersey.jackson.JacksonFeature' check\n\nMotivation:\n\nDocumentation for JerseyDataJacksonTestSuite.wrap says that we can't run test suite in Intellij IDEA because somehow JacksonFeature get to test test classpath due to bug in ' Gradle IDEA plugin' . If we configure ServiceTalkJacksonSerializerFeature with Application.getProperties(), we can run tests in the Intellij for those classes that use ServiceTalkJacksonSerializerFeature\n\nModifications:\n\n- Add ServiceTalkJacksonSerializerFeature property to tests that uses ServiceTalkJacksonSerializerFeature\n- remove method JerseyDataJacksonTestSuite.wrap\n\nResult:\n\nNow JerseyDataJacksonTestSuite.java tests can be run in IDEA."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwNTY4NTAw", "url": "https://github.com/apple/servicetalk/pull/1072#pullrequestreview-420568500", "createdAt": "2020-05-28T23:56:34Z", "commit": {"oid": "cd67e1bf04bfac936f0df23dfbe0c44bf368dcda"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMzo1NjozNFrOGcKjNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQyMzo1NjozNFrOGcKjNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE4NjE2Ng==", "bodyText": "Does newProperties have to be mutable? If not, consider using singletonMap\nCan you use the ST_JSON_FEATURE constant instead of \"ServiceTalkJacksonSerializerFeature\"?\nPlease use static imports for readability (JSON_FEATURE)", "url": "https://github.com/apple/servicetalk/pull/1072#discussion_r432186166", "createdAt": "2020-05-28T23:56:34Z", "author": {"login": "ddossot"}, "path": "servicetalk-data-jackson-jersey/src/test/java/io/servicetalk/data/jackson/jersey/AbstractStreamingJsonResourcesTest.java", "diffHunk": "@@ -47,6 +50,14 @@ public AbstractStreamingJsonResourcesTest(final RouterApi api) {\n                     PublisherJsonResources.class\n             ));\n         }\n+\n+        @Override\n+        public Map<String, Object> getProperties() {\n+            Map<String, Object> properties = super.getProperties();\n+            Map<String, Object> newProperties = new HashMap<>(properties);\n+            newProperties.put(InternalProperties.JSON_FEATURE, \"ServiceTalkJacksonSerializerFeature\");\n+            return newProperties;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cd67e1bf04bfac936f0df23dfbe0c44bf368dcda"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56683c06b21de85718f583a6b436268c0cfbe6c0", "author": {"user": {"login": "volyx", "name": "Dmitrii Volykhin"}}, "url": "https://github.com/apple/servicetalk/commit/56683c06b21de85718f583a6b436268c0cfbe6c0", "committedDate": "2020-05-29T15:51:28Z", "message": "review comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMDgzMjMz", "url": "https://github.com/apple/servicetalk/pull/1072#pullrequestreview-421083233", "createdAt": "2020-05-29T15:56:52Z", "commit": {"oid": "56683c06b21de85718f583a6b436268c0cfbe6c0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3722, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}