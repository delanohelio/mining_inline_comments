{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM2Mjk3NDU3", "number": 1269, "title": "Github Actions CI Release Builds", "bodyText": "", "createdAt": "2020-12-10T22:21:27Z", "url": "https://github.com/apple/servicetalk/pull/1269", "merged": true, "mergeCommit": {"oid": "4af43f12ca1fabc174ddc3f53023ff79e2b148ee"}, "closed": true, "closedAt": "2020-12-10T22:54:44Z", "author": {"login": "Scottmitch"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdk69w-AH2gAyNTM2Mjk3NDU3OjUxYTM4MDI5OTFkMmE3MmMxNmQ4NTBmMjIwNzVlNWMwZGJiYWYyZWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdk7PDagFqTU0OTY2MzE2Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "51a3802991d2a72c16d850f22075e5c0dbbaf2eb", "author": {"user": {"login": "Scottmitch", "name": "Scott Mitchell"}}, "url": "https://github.com/apple/servicetalk/commit/51a3802991d2a72c16d850f22075e5c0dbbaf2eb", "committedDate": "2020-12-10T22:20:28Z", "message": "Github Actions CI Release Builds"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eddaf6fc6258288364e87d55e9029ecb7db0c27f", "author": {"user": {"login": "Scottmitch", "name": "Scott Mitchell"}}, "url": "https://github.com/apple/servicetalk/commit/eddaf6fc6258288364e87d55e9029ecb7db0c27f", "committedDate": "2020-12-10T22:32:34Z", "message": "remove JDK 8 from test report label"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5NjYzMTYy", "url": "https://github.com/apple/servicetalk/pull/1269#pullrequestreview-549663162", "createdAt": "2020-12-10T22:39:21Z", "commit": {"oid": "eddaf6fc6258288364e87d55e9029ecb7db0c27f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQyMjozOToyMVrOIDgjIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQyMjozOToyMVrOIDgjIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDU0OTkyMg==", "bodyText": "for 3rd party actions is better to use a commit hash instead of a tag.\ntags are not immutable and a bad actor could change Action code, harvest secrets, etc..", "url": "https://github.com/apple/servicetalk/pull/1269#discussion_r540549922", "createdAt": "2020-12-10T22:39:21Z", "author": {"login": "jerrinot"}, "path": ".github/workflows/ci-release.yml", "diffHunk": "@@ -0,0 +1,43 @@\n+name: Release Builder\n+on:\n+  push:\n+    branches: [ main ]\n+    tags:\n+      - \"[0-9]+.[0-9]+.[0-9]+\"\n+jobs:\n+  build-jdk8:\n+    runs-on: ubuntu-latest\n+    steps:\n+      - name: Checkout Code\n+        uses: actions/checkout@v2\n+      - name: Check NO SNAPSHOT version suffix\n+        run: if [[ $(cat gradle.properties | grep version= | sed 's/^version=//') =~ .*-SNAPSHOT ]]; then exit 1; else exit 0; fi\n+      - name: Set up JDK 8\n+        uses: actions/setup-java@v1\n+        with:\n+          java-version: 8\n+      - name: Grant execute permission for gradlew\n+        run: chmod +x gradlew\n+      - name: Cache Gradle packages\n+        uses: actions/cache@v2\n+        with:\n+          path: |\n+            ~/.gradle/caches\n+            ~/.gradle/wrapper\n+          key: ${{ runner.os }}-gradle-${{ hashFiles('**/*.gradle') }}\n+          restore-keys: ${{ runner.os }}-gradle\n+      - name: Build with Gradle\n+        env:\n+          ORG_GRADLE_PROJECT_signingKey: ${{ secrets.ORG_GRADLE_PROJECT_SIGNINGKEY }}\n+          ORG_GRADLE_PROJECT_signingPassword: ${{ secrets.ORG_GRADLE_PROJECT_SIGNINGPASSWORD }}\n+          SONATYPE_USER: ${{ secrets.SONATYPE_USER }}\n+          SONATYPE_TOKEN: ${{ secrets.SONATYPE_TOKEN }}\n+          CI: true\n+        run: ./gradlew --parallel --max-workers=4 -PreleaseBuild=true clean check && ./gradlew -PreleaseBuild=true publish\n+      - name: Publish Test Results\n+        if: ${{ always() }}\n+        uses: scacap/action-surefire-report@v1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eddaf6fc6258288364e87d55e9029ecb7db0c27f"}, "originalPosition": 39}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3382, "cost": 1, "resetAt": "2021-11-01T11:59:11Z"}}}