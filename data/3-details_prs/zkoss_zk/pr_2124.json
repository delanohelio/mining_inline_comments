{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwNzc0MTAy", "number": 2124, "title": "ZK-4629: Avoid exposing technical internal error details (allow custo\u2026", "bodyText": "\u2026m error handling)", "createdAt": "2020-08-20T09:09:02Z", "url": "https://github.com/zkoss/zk/pull/2124", "merged": true, "mergeCommit": {"oid": "7b8b68d6f4a85c171fb457de74a3c0582a62e878"}, "closed": true, "closedAt": "2020-08-21T03:38:50Z", "author": {"login": "DevChu"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAtunmgFqTQ3MTQ2NDk0NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdA62sQABqjM2Nzc3MTA3OTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNDY0OTQ1", "url": "https://github.com/zkoss/zk/pull/2124#pullrequestreview-471464945", "createdAt": "2020-08-20T10:29:47Z", "commit": {"oid": "9c9bc2a68e274df016a0b302334b1dfd825f7cb1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMDoyOTo0N1rOHD6OnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMDozMjo1M1rOHD6YdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mzg2MTc4OQ==", "bodyText": "keep \"Illegal request\"", "url": "https://github.com/zkoss/zk/pull/2124#discussion_r473861789", "createdAt": "2020-08-20T10:29:47Z", "author": {"login": "plijyfes"}, "path": "zk/src/org/zkoss/zk/au/http/DHtmlUpdateServlet.java", "diffHunk": "@@ -602,7 +603,7 @@ private void sessionTimeout(HttpServletRequest request, HttpServletResponse resp\n \t\t\ttry {\n \t\t\t\tInteger.parseInt(sid);\n \t\t\t} catch (NumberFormatException e) {\n-\t\t\t\tresponseError(request, response, \"Illegal request\");\n+\t\t\t\tresponseError(request, response, null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c9bc2a68e274df016a0b302334b1dfd825f7cb1"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mzg2MjI3Mg==", "bodyText": "remove", "url": "https://github.com/zkoss/zk/pull/2124#discussion_r473862272", "createdAt": "2020-08-20T10:30:21Z", "author": {"login": "plijyfes"}, "path": "zk/src/org/zkoss/zk/au/http/DHtmlUpdateServlet.java", "diffHunk": "@@ -686,10 +687,9 @@ protected Desktop recoverDesktop(Session sess, HttpServletRequest request, HttpS\n \t */\n \tprivate static void responseError(HttpServletRequest request, HttpServletResponse response, String errmsg)\n \t\t\tthrows IOException {\n-\t\t//Don't use sendError because Browser cannot handle UTF-8\n-\t\tAuWriter out = AuWriters.newInstance().open(request, response);\n-\t\tout.write(new AuAlert(errmsg, true));\n-\t\tout.close(request, response);\n+\t\tif (errmsg == null || errmsg.length() == 0)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c9bc2a68e274df016a0b302334b1dfd825f7cb1"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mzg2NDMwOA==", "bodyText": "int SC_BAD_REQUEST = 400;", "url": "https://github.com/zkoss/zk/pull/2124#discussion_r473864308", "createdAt": "2020-08-20T10:32:53Z", "author": {"login": "plijyfes"}, "path": "zk/src/org/zkoss/zk/au/http/DHtmlUpdateServlet.java", "diffHunk": "@@ -686,10 +687,9 @@ protected Desktop recoverDesktop(Session sess, HttpServletRequest request, HttpS\n \t */\n \tprivate static void responseError(HttpServletRequest request, HttpServletResponse response, String errmsg)\n \t\t\tthrows IOException {\n-\t\t//Don't use sendError because Browser cannot handle UTF-8\n-\t\tAuWriter out = AuWriters.newInstance().open(request, response);\n-\t\tout.write(new AuAlert(errmsg, true));\n-\t\tout.close(request, response);\n+\t\tif (errmsg == null || errmsg.length() == 0)\n+\t\t\terrmsg = \"Invalid Request (see: Server logs for details)\";\n+\t\tresponse.sendError(400, errmsg);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c9bc2a68e274df016a0b302334b1dfd825f7cb1"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNDcwNzc4", "url": "https://github.com/zkoss/zk/pull/2124#pullrequestreview-471470778", "createdAt": "2020-08-20T10:36:11Z", "commit": {"oid": "9c9bc2a68e274df016a0b302334b1dfd825f7cb1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9c9bc2a68e274df016a0b302334b1dfd825f7cb1", "author": {"user": {"login": "DevChu", "name": "James Chu"}}, "url": "https://github.com/zkoss/zk/commit/9c9bc2a68e274df016a0b302334b1dfd825f7cb1", "committedDate": "2020-08-20T09:08:25Z", "message": "ZK-4629: Avoid exposing technical internal error details (allow custom error handling)"}, "afterCommit": {"oid": "d0052ea94410de9484b0448d69db8eaca9b26ba3", "author": {"user": {"login": "DevChu", "name": "James Chu"}}, "url": "https://github.com/zkoss/zk/commit/d0052ea94410de9484b0448d69db8eaca9b26ba3", "committedDate": "2020-08-20T10:38:32Z", "message": "ZK-4629: Avoid exposing technical internal error details (allow custom error handling)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d0052ea94410de9484b0448d69db8eaca9b26ba3", "author": {"user": {"login": "DevChu", "name": "James Chu"}}, "url": "https://github.com/zkoss/zk/commit/d0052ea94410de9484b0448d69db8eaca9b26ba3", "committedDate": "2020-08-20T10:38:32Z", "message": "ZK-4629: Avoid exposing technical internal error details (allow custom error handling)"}, "afterCommit": {"oid": "694cddf3089a052f11121261e61fa9ee0910eacc", "author": {"user": {"login": "DevChu", "name": "James Chu"}}, "url": "https://github.com/zkoss/zk/commit/694cddf3089a052f11121261e61fa9ee0910eacc", "committedDate": "2020-08-20T10:41:57Z", "message": "ZK-4629: Avoid exposing technical internal error details (allow custom error handling)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "694cddf3089a052f11121261e61fa9ee0910eacc", "author": {"user": {"login": "DevChu", "name": "James Chu"}}, "url": "https://github.com/zkoss/zk/commit/694cddf3089a052f11121261e61fa9ee0910eacc", "committedDate": "2020-08-20T10:41:57Z", "message": "ZK-4629: Avoid exposing technical internal error details (allow custom error handling)"}, "afterCommit": {"oid": "ea1cc1e5b308b36f7bcae95714f8ab1090698be1", "author": {"user": {"login": "DevChu", "name": "James Chu"}}, "url": "https://github.com/zkoss/zk/commit/ea1cc1e5b308b36f7bcae95714f8ab1090698be1", "committedDate": "2020-08-20T10:46:20Z", "message": "ZK-4629: Avoid exposing technical internal error details (allow custom error handling)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxNDc3NzAz", "url": "https://github.com/zkoss/zk/pull/2124#pullrequestreview-471477703", "createdAt": "2020-08-20T10:47:38Z", "commit": {"oid": "ea1cc1e5b308b36f7bcae95714f8ab1090698be1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3668f3ffd122bf3d3241072760e5a9f14aacdf8", "author": {"user": {"login": "DevChu", "name": "James Chu"}}, "url": "https://github.com/zkoss/zk/commit/e3668f3ffd122bf3d3241072760e5a9f14aacdf8", "committedDate": "2020-08-21T01:51:05Z", "message": "ZK-4629: Avoid exposing technical internal error details (allow custom error handling)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ea1cc1e5b308b36f7bcae95714f8ab1090698be1", "author": {"user": {"login": "DevChu", "name": "James Chu"}}, "url": "https://github.com/zkoss/zk/commit/ea1cc1e5b308b36f7bcae95714f8ab1090698be1", "committedDate": "2020-08-20T10:46:20Z", "message": "ZK-4629: Avoid exposing technical internal error details (allow custom error handling)"}, "afterCommit": {"oid": "e3668f3ffd122bf3d3241072760e5a9f14aacdf8", "author": {"user": {"login": "DevChu", "name": "James Chu"}}, "url": "https://github.com/zkoss/zk/commit/e3668f3ffd122bf3d3241072760e5a9f14aacdf8", "committedDate": "2020-08-21T01:51:05Z", "message": "ZK-4629: Avoid exposing technical internal error details (allow custom error handling)"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 88, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}