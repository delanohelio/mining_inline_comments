{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU3MDc0MTA5", "number": 2067, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwOTo1MDoyMFrOESvQVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwOTo1NDozOVrOESvWlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MDg0MDU1OnYy", "diffSide": "RIGHT", "path": "zul/src/archive/web/js/zul/menu/Menuitem.js", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwOTo1MDoyMFrOG4FQxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwOTo1MDoyMFrOG4FQxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTQ1OTY1NQ==", "bodyText": "modify _curIndex", "url": "https://github.com/zkoss/zk/pull/2067#discussion_r461459655", "createdAt": "2020-07-28T09:50:20Z", "author": {"login": "scribetw"}, "path": "zul/src/archive/web/js/zul/menu/Menuitem.js", "diffHunk": "@@ -370,8 +372,20 @@ zul.menu.Menuitem = zk.$extends(zul.LabelImageWidget, {\n \t\treturn this.$n('a');\n \t},\n \t_doMouseEnter: function (evt) {\n-\t\tif (zul.menu._nOpen || this.isTopmost())\n+\t\tvar isTopmost = this.isTopmost();\n+\t\tif (zul.menu._nOpen || isTopmost)\n \t\t\tzWatch.fire('onFloatUp', this); //notify all\n+\t\tif (!isTopmost && !this._disabled) {\n+\t\t\tif (this.parent)\n+\t\t\t\tthis.parent.removeActive_();\n+\t\t\tthis.$class._addActive(this);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df7fbb448933959a7b2feb682003675ff3d74224"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MDg0MTUwOnYy", "diffSide": "RIGHT", "path": "zul/src/archive/web/js/zul/menu/Menuitem.js", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwOTo1MDozMlrOG4FRTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwOTo1MDozMlrOG4FRTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTQ1OTc4OQ==", "bodyText": "_curIndex = -1", "url": "https://github.com/zkoss/zk/pull/2067#discussion_r461459789", "createdAt": "2020-07-28T09:50:32Z", "author": {"login": "scribetw"}, "path": "zul/src/archive/web/js/zul/menu/Menuitem.js", "diffHunk": "@@ -370,8 +372,20 @@ zul.menu.Menuitem = zk.$extends(zul.LabelImageWidget, {\n \t\treturn this.$n('a');\n \t},\n \t_doMouseEnter: function (evt) {\n-\t\tif (zul.menu._nOpen || this.isTopmost())\n+\t\tvar isTopmost = this.isTopmost();\n+\t\tif (zul.menu._nOpen || isTopmost)\n \t\t\tzWatch.fire('onFloatUp', this); //notify all\n+\t\tif (!isTopmost && !this._disabled) {\n+\t\t\tif (this.parent)\n+\t\t\t\tthis.parent.removeActive_();\n+\t\t\tthis.$class._addActive(this);\n+\t\t}\n+\t},\n+\t_doMouseLeave: function (evt) {\n+\t\tvar isTopmost = this.isTopmost();\n+\t\tif (!isTopmost && !this._disabled) {\n+\t\t\tthis.$class._rmActive(this);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df7fbb448933959a7b2feb682003675ff3d74224"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg4MDg1NjU1OnYy", "diffSide": "RIGHT", "path": "zul/src/archive/web/js/zul/menu/Menupopup.js", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwOTo1NDozOVrOG4FacA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQwOTo1NDozOVrOG4FacA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTQ2MjEyOA==", "bodyText": "activating the menuitem, regain the focus", "url": "https://github.com/zkoss/zk/pull/2067#discussion_r461462128", "createdAt": "2020-07-28T09:54:39Z", "author": {"login": "scribetw"}, "path": "zul/src/archive/web/js/zul/menu/Menupopup.js", "diffHunk": "@@ -358,16 +354,18 @@ zul.menu.Menupopup = zk.$extends(zul.wgt.Popup, {\n \t\t\t\tvar root = _getRootMenu(this);\n \t\t\t\tif (root && (root = root._getPrevVisibleMenu()))\n \t\t\t\t\t_activateNextMenu(root);\n-\t\t\t\telse // the parent is not menu widget\n+\t\t\t\telse { // the parent is not menu widget\n+\t\t\t\t\tvar ref = this._fakeParent;\n \t\t\t\t\tthis.close();\n-\n+\t\t\t\t\tif (ref) ref.focus();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df7fbb448933959a7b2feb682003675ff3d74224"}, "originalPosition": 119}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 566, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}