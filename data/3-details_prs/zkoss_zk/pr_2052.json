{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4MTQ0OTI3", "number": 2052, "title": "refine ZK-4494: Treeitem/Treerow visible issue and add information cl\u2026", "bodyText": "\u2026ass for omit tree line", "createdAt": "2020-07-13T09:53:05Z", "url": "https://github.com/zkoss/zk/pull/2052", "merged": true, "mergeCommit": {"oid": "5fbd056729666b4935a4e4542ca2dcdb48c1c9b0"}, "closed": true, "closedAt": "2020-07-14T03:35:27Z", "author": {"login": "plijyfes"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc0eaMBABqjM1Mzg3MDg4Nzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc0tjB4AFqTQ0Nzc2MDg2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bef02c4fff08db35665a05faf603b22491adb437", "author": {"user": {"login": "plijyfes", "name": "LeonLee"}}, "url": "https://github.com/zkoss/zk/commit/bef02c4fff08db35665a05faf603b22491adb437", "committedDate": "2020-07-13T09:50:42Z", "message": "refine ZK-4494: Treeitem/Treerow visible issue and add information class for omit tree line"}, "afterCommit": {"oid": "d318bae6436120f34ed36eb735bcd717413cf039", "author": {"user": {"login": "plijyfes", "name": "LeonLee"}}, "url": "https://github.com/zkoss/zk/commit/d318bae6436120f34ed36eb735bcd717413cf039", "committedDate": "2020-07-13T09:54:52Z", "message": "refine ZK-4494: Treeitem/Treerow visible issue and add information class for omit tree line"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d318bae6436120f34ed36eb735bcd717413cf039", "author": {"user": {"login": "plijyfes", "name": "LeonLee"}}, "url": "https://github.com/zkoss/zk/commit/d318bae6436120f34ed36eb735bcd717413cf039", "committedDate": "2020-07-13T09:54:52Z", "message": "refine ZK-4494: Treeitem/Treerow visible issue and add information class for omit tree line"}, "afterCommit": {"oid": "daba14d8375aa5f16603bba76d482a8784fb15ff", "author": {"user": {"login": "plijyfes", "name": "LeonLee"}}, "url": "https://github.com/zkoss/zk/commit/daba14d8375aa5f16603bba76d482a8784fb15ff", "committedDate": "2020-07-13T10:03:51Z", "message": "refine ZK-4494: Treeitem/Treerow visible issue and add information class for omit tree line"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3MTIwMTgz", "url": "https://github.com/zkoss/zk/pull/2052#pullrequestreview-447120183", "createdAt": "2020-07-13T10:17:01Z", "commit": {"oid": "daba14d8375aa5f16603bba76d482a8784fb15ff"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NzQ3OTg5", "url": "https://github.com/zkoss/zk/pull/2052#pullrequestreview-447747989", "createdAt": "2020-07-14T02:50:55Z", "commit": {"oid": "daba14d8375aa5f16603bba76d482a8784fb15ff"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwMjo1MDo1NVrOGxCC6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNFQwMzowMToxNFrOGxCN1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDA2NjkyMQ==", "bodyText": "lineClass", "url": "https://github.com/zkoss/zk/pull/2052#discussion_r454066921", "createdAt": "2020-07-14T02:50:55Z", "author": {"login": "scribetw"}, "path": "zul/src/archive/web/js/zul/sel/Treecell.js", "diffHunk": "@@ -180,8 +180,14 @@ zul.sel.Treecell = zk.$extends(zul.LabelImageWidget, {\n \t\t\t}\n \t\t\tvar iconScls = tree ? tree.getZclass() : '',\n \t\t\t\tpitems = this._getTreeitems(item, tree);\n-\t\t\tfor (var j = 0, k = pitems.length; j < k; ++j)\n-\t\t\t\tthis._appendIcon(sb, iconScls, 'spacer', false, j == k - 1); // ZK-4494: provide line anchor information to draw tree lines\n+\t\t\tfor (var j = 0, k = pitems.length; j < k; ++j) {\n+\t\t\t\tvar lineAnchor = '';\n+\t\t\t\tif (j == k - 1) // last meaningful line in structure\n+\t\t\t\t\tlineAnchor = '-line-anchor';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "daba14d8375aa5f16603bba76d482a8784fb15ff"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDA2ODYyNg==", "bodyText": "reverse order find visible child", "url": "https://github.com/zkoss/zk/pull/2052#discussion_r454068626", "createdAt": "2020-07-14T02:57:09Z", "author": {"login": "scribetw"}, "path": "zul/src/archive/web/js/zul/sel/Treechildren.js", "diffHunk": "@@ -261,6 +261,16 @@ zul.sel.Treechildren = zk.$extends(zul.Widget, {\n \t\t\tjq(n).replaceWith(content);\n \t\t}\n \t\tchild.bind(desktop, skipper);\n+\t},\n+\tgetLastVisibleItem_: function () { // ZK-4494: provide line anchor information to draw tree lines\n+\t\tvar items = [];\n+\t\tfor (var w = this.firstChild; w; w = w.nextSibling)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "daba14d8375aa5f16603bba76d482a8784fb15ff"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDA2OTcxNw==", "bodyText": "return treechildren && treechildren.getLastVisibleItem_() == treeitem;", "url": "https://github.com/zkoss/zk/pull/2052#discussion_r454069717", "createdAt": "2020-07-14T03:01:14Z", "author": {"login": "scribetw"}, "path": "zul/src/archive/web/js/zul/sel/Treerow.js", "diffHunk": "@@ -92,5 +92,13 @@ zul.sel.Treerow = zk.$extends(zul.Widget, {\n \t},\n \tdeferRedrawHTML_: function (out) {\n \t\tout.push('<tr', this.domAttrs_({domClass: 1}), ' class=\"z-renderdefer\"></tr>');\n+\t},\n+\tisLastVisibleChild_: function () {\n+\t\tvar result = false,\n+\t\t\ttreeitem = this.parent,\n+\t\t\ttreechildren = treeitem.parent;\n+\t\tif (treechildren)\n+\t\t\tresult = treechildren.getLastVisibleItem_() == treeitem;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "daba14d8375aa5f16603bba76d482a8784fb15ff"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5a8d67ebe4b7b1916e0a2ecf63905f203dcacb8", "author": {"user": {"login": "plijyfes", "name": "LeonLee"}}, "url": "https://github.com/zkoss/zk/commit/e5a8d67ebe4b7b1916e0a2ecf63905f203dcacb8", "committedDate": "2020-07-14T03:29:56Z", "message": "refine ZK-4494: Treeitem/Treerow visible issue and add information class for omit tree line"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "daba14d8375aa5f16603bba76d482a8784fb15ff", "author": {"user": {"login": "plijyfes", "name": "LeonLee"}}, "url": "https://github.com/zkoss/zk/commit/daba14d8375aa5f16603bba76d482a8784fb15ff", "committedDate": "2020-07-13T10:03:51Z", "message": "refine ZK-4494: Treeitem/Treerow visible issue and add information class for omit tree line"}, "afterCommit": {"oid": "e5a8d67ebe4b7b1916e0a2ecf63905f203dcacb8", "author": {"user": {"login": "plijyfes", "name": "LeonLee"}}, "url": "https://github.com/zkoss/zk/commit/e5a8d67ebe4b7b1916e0a2ecf63905f203dcacb8", "committedDate": "2020-07-14T03:29:56Z", "message": "refine ZK-4494: Treeitem/Treerow visible issue and add information class for omit tree line"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NzYwODY1", "url": "https://github.com/zkoss/zk/pull/2052#pullrequestreview-447760865", "createdAt": "2020-07-14T03:34:08Z", "commit": {"oid": "e5a8d67ebe4b7b1916e0a2ecf63905f203dcacb8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 109, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}