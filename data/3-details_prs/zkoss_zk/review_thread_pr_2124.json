{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwNzc0MTAy", "number": 2124, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMDoyOTo0N1rOEadk1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMDozMjo1M1rOEadrFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2MTgyOTk5OnYy", "diffSide": "RIGHT", "path": "zk/src/org/zkoss/zk/au/http/DHtmlUpdateServlet.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMDoyOTo0N1rOHD6OnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMDoyOTo0N1rOHD6OnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mzg2MTc4OQ==", "bodyText": "keep \"Illegal request\"", "url": "https://github.com/zkoss/zk/pull/2124#discussion_r473861789", "createdAt": "2020-08-20T10:29:47Z", "author": {"login": "plijyfes"}, "path": "zk/src/org/zkoss/zk/au/http/DHtmlUpdateServlet.java", "diffHunk": "@@ -602,7 +603,7 @@ private void sessionTimeout(HttpServletRequest request, HttpServletResponse resp\n \t\t\ttry {\n \t\t\t\tInteger.parseInt(sid);\n \t\t\t} catch (NumberFormatException e) {\n-\t\t\t\tresponseError(request, response, \"Illegal request\");\n+\t\t\t\tresponseError(request, response, null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c9bc2a68e274df016a0b302334b1dfd825f7cb1"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2MTgzMzE5OnYy", "diffSide": "RIGHT", "path": "zk/src/org/zkoss/zk/au/http/DHtmlUpdateServlet.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMDozMDoyMVrOHD6QgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMDozMDoyMVrOHD6QgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mzg2MjI3Mg==", "bodyText": "remove", "url": "https://github.com/zkoss/zk/pull/2124#discussion_r473862272", "createdAt": "2020-08-20T10:30:21Z", "author": {"login": "plijyfes"}, "path": "zk/src/org/zkoss/zk/au/http/DHtmlUpdateServlet.java", "diffHunk": "@@ -686,10 +687,9 @@ protected Desktop recoverDesktop(Session sess, HttpServletRequest request, HttpS\n \t */\n \tprivate static void responseError(HttpServletRequest request, HttpServletResponse response, String errmsg)\n \t\t\tthrows IOException {\n-\t\t//Don't use sendError because Browser cannot handle UTF-8\n-\t\tAuWriter out = AuWriters.newInstance().open(request, response);\n-\t\tout.write(new AuAlert(errmsg, true));\n-\t\tout.close(request, response);\n+\t\tif (errmsg == null || errmsg.length() == 0)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c9bc2a68e274df016a0b302334b1dfd825f7cb1"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk2MTg0NTk4OnYy", "diffSide": "RIGHT", "path": "zk/src/org/zkoss/zk/au/http/DHtmlUpdateServlet.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMDozMjo1M1rOHD6YdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQxMDozMjo1M1rOHD6YdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mzg2NDMwOA==", "bodyText": "int SC_BAD_REQUEST = 400;", "url": "https://github.com/zkoss/zk/pull/2124#discussion_r473864308", "createdAt": "2020-08-20T10:32:53Z", "author": {"login": "plijyfes"}, "path": "zk/src/org/zkoss/zk/au/http/DHtmlUpdateServlet.java", "diffHunk": "@@ -686,10 +687,9 @@ protected Desktop recoverDesktop(Session sess, HttpServletRequest request, HttpS\n \t */\n \tprivate static void responseError(HttpServletRequest request, HttpServletResponse response, String errmsg)\n \t\t\tthrows IOException {\n-\t\t//Don't use sendError because Browser cannot handle UTF-8\n-\t\tAuWriter out = AuWriters.newInstance().open(request, response);\n-\t\tout.write(new AuAlert(errmsg, true));\n-\t\tout.close(request, response);\n+\t\tif (errmsg == null || errmsg.length() == 0)\n+\t\t\terrmsg = \"Invalid Request (see: Server logs for details)\";\n+\t\tresponse.sendError(400, errmsg);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c9bc2a68e274df016a0b302334b1dfd825f7cb1"}, "originalPosition": 38}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 552, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}