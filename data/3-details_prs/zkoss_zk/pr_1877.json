{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc0MjQwMTgz", "number": 1877, "title": "ZK-4504: Merge successive setAttrs in one zAu response", "bodyText": "", "createdAt": "2020-02-12T10:55:03Z", "url": "https://github.com/zkoss/zk/pull/1877", "merged": true, "mergeCommit": {"oid": "0532694e57d9d6c1f56c1ee29001d2029231d560"}, "closed": true, "closedAt": "2020-02-14T02:01:28Z", "author": {"login": "scribetw"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDkKuSgBqjMwMzAzMTcyODQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcEFt1VAFqTM1ODY3MjczMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "01e10426cc0e67fff55a3e667d904c59a3c93ba6", "author": {"user": {"login": "scribetw", "name": "Scribe Huang"}}, "url": "https://github.com/zkoss/zk/commit/01e10426cc0e67fff55a3e667d904c59a3c93ba6", "committedDate": "2020-02-12T10:53:42Z", "message": "ZK-4504: Merge successive setAttrs in one zAu response"}, "afterCommit": {"oid": "ca6cbd4d047c98a8db5d84c333cb32be640015a9", "author": {"user": {"login": "scribetw", "name": "Scribe Huang"}}, "url": "https://github.com/zkoss/zk/commit/ca6cbd4d047c98a8db5d84c333cb32be640015a9", "committedDate": "2020-02-12T10:55:56Z", "message": "ZK-4504: Merge successive setAttrs in one zAu response"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ca6cbd4d047c98a8db5d84c333cb32be640015a9", "author": {"user": {"login": "scribetw", "name": "Scribe Huang"}}, "url": "https://github.com/zkoss/zk/commit/ca6cbd4d047c98a8db5d84c333cb32be640015a9", "committedDate": "2020-02-12T10:55:56Z", "message": "ZK-4504: Merge successive setAttrs in one zAu response"}, "afterCommit": {"oid": "9771dd62fc6a39c853071d811e684afe4c27874b", "author": {"user": {"login": "scribetw", "name": "Scribe Huang"}}, "url": "https://github.com/zkoss/zk/commit/9771dd62fc6a39c853071d811e684afe4c27874b", "committedDate": "2020-02-13T02:01:26Z", "message": "ZK-4504: Merge successive setAttrs in one zAu response"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9771dd62fc6a39c853071d811e684afe4c27874b", "author": {"user": {"login": "scribetw", "name": "Scribe Huang"}}, "url": "https://github.com/zkoss/zk/commit/9771dd62fc6a39c853071d811e684afe4c27874b", "committedDate": "2020-02-13T02:01:26Z", "message": "ZK-4504: Merge successive setAttrs in one zAu response"}, "afterCommit": {"oid": "a96d0c72c8d06e9ce161b6293496a37447b29020", "author": {"user": {"login": "scribetw", "name": "Scribe Huang"}}, "url": "https://github.com/zkoss/zk/commit/a96d0c72c8d06e9ce161b6293496a37447b29020", "committedDate": "2020-02-13T02:55:29Z", "message": "ZK-4504: Merge successive setAttrs in one zAu response"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a96d0c72c8d06e9ce161b6293496a37447b29020", "author": {"user": {"login": "scribetw", "name": "Scribe Huang"}}, "url": "https://github.com/zkoss/zk/commit/a96d0c72c8d06e9ce161b6293496a37447b29020", "committedDate": "2020-02-13T02:55:29Z", "message": "ZK-4504: Merge successive setAttrs in one zAu response"}, "afterCommit": {"oid": "2940c4294e6b842b581bf5fe0ab3484077153f63", "author": {"user": {"login": "scribetw", "name": "Scribe Huang"}}, "url": "https://github.com/zkoss/zk/commit/2940c4294e6b842b581bf5fe0ab3484077153f63", "committedDate": "2020-02-13T08:04:35Z", "message": "ZK-4504: Merge successive setAttrs in one zAu response"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4MDg0NDI3", "url": "https://github.com/zkoss/zk/pull/1877#pullrequestreview-358084427", "createdAt": "2020-02-13T09:56:19Z", "commit": {"oid": "2940c4294e6b842b581bf5fe0ab3484077153f63"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QwOTo1NjoyMFrOFpNd_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QwOTo1NjoyMFrOFpNd_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODc1NjYwNg==", "bodyText": "check  len % 2 == 0", "url": "https://github.com/zkoss/zk/pull/1877#discussion_r378756606", "createdAt": "2020-02-13T09:56:20Z", "author": {"login": "scribetw"}, "path": "zk/src/archive/web/js/zk/au.js", "diffHunk": "@@ -1688,6 +1688,20 @@ zAu.cmd1 = /*prototype*/ {\n \t\t\t}\n \t\t}\n \t},\n+\t/**\n+\t * Sets the attributes of a widget.\n+\t * @param zk.Widget wgt the widget\n+\t * @param Array attrs an array or name1, value2, name2, value2, ...\n+\t * @since 9.0.1\n+\t */\n+\tsetAttrs: function (wgt, attrs) {\n+\t\tif (wgt) { // server push may cause wgt is null in some case - zksandbox/#a1\n+\t\t\tvar setAttr = zAu.cmd1.setAttr;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2940c4294e6b842b581bf5fe0ab3484077153f63"}, "originalPosition": 21}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2940c4294e6b842b581bf5fe0ab3484077153f63", "author": {"user": {"login": "scribetw", "name": "Scribe Huang"}}, "url": "https://github.com/zkoss/zk/commit/2940c4294e6b842b581bf5fe0ab3484077153f63", "committedDate": "2020-02-13T08:04:35Z", "message": "ZK-4504: Merge successive setAttrs in one zAu response"}, "afterCommit": {"oid": "878f67fe07081ffc9c210ae42108483cf3a589ba", "author": {"user": {"login": "scribetw", "name": "Scribe Huang"}}, "url": "https://github.com/zkoss/zk/commit/878f67fe07081ffc9c210ae42108483cf3a589ba", "committedDate": "2020-02-13T10:53:40Z", "message": "ZK-4504: Merge successive setAttrs in one zAu response"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "878f67fe07081ffc9c210ae42108483cf3a589ba", "author": {"user": {"login": "scribetw", "name": "Scribe Huang"}}, "url": "https://github.com/zkoss/zk/commit/878f67fe07081ffc9c210ae42108483cf3a589ba", "committedDate": "2020-02-13T10:53:40Z", "message": "ZK-4504: Merge successive setAttrs in one zAu response"}, "afterCommit": {"oid": "5ac1e15e1a1e6543cf724b1c2de9cc539ff20946", "author": {"user": {"login": "scribetw", "name": "Scribe Huang"}}, "url": "https://github.com/zkoss/zk/commit/5ac1e15e1a1e6543cf724b1c2de9cc539ff20946", "committedDate": "2020-02-13T10:59:32Z", "message": "ZK-4504: Merge successive setAttrs in one zAu response"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5ac1e15e1a1e6543cf724b1c2de9cc539ff20946", "author": {"user": {"login": "scribetw", "name": "Scribe Huang"}}, "url": "https://github.com/zkoss/zk/commit/5ac1e15e1a1e6543cf724b1c2de9cc539ff20946", "committedDate": "2020-02-13T10:59:32Z", "message": "ZK-4504: Merge successive setAttrs in one zAu response"}, "afterCommit": {"oid": "6b475983c8c2b2dfbb7369fe30910450a55a441f", "author": {"user": {"login": "scribetw", "name": "Scribe Huang"}}, "url": "https://github.com/zkoss/zk/commit/6b475983c8c2b2dfbb7369fe30910450a55a441f", "committedDate": "2020-02-13T11:03:05Z", "message": "ZK-4504: Merge successive setAttrs in one zAu response"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4NjcwNTUx", "url": "https://github.com/zkoss/zk/pull/1877#pullrequestreview-358670551", "createdAt": "2020-02-14T01:53:36Z", "commit": {"oid": "6b475983c8c2b2dfbb7369fe30910450a55a441f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4NjcxNzA4", "url": "https://github.com/zkoss/zk/pull/1877#pullrequestreview-358671708", "createdAt": "2020-02-14T01:57:35Z", "commit": {"oid": "6b475983c8c2b2dfbb7369fe30910450a55a441f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQwMTo1NzozNVrOFppjbA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQwMTo1NzozNVrOFppjbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTIxNjc0OA==", "bodyText": "StringBuilder", "url": "https://github.com/zkoss/zk/pull/1877#discussion_r379216748", "createdAt": "2020-02-14T01:57:35Z", "author": {"login": "DevChu"}, "path": "zk/src/org/zkoss/zk/au/out/AuSetAttributes.java", "diffHunk": "@@ -0,0 +1,80 @@\n+/* AuSetAttributes.java\n+\n+\tPurpose:\n+\t\t\n+\tDescription:\n+\t\t\n+\tHistory:\n+\t\tWed Feb 12 15:48:05     2020, Created by rudyhuang\n+\n+Copyright (C) 2020 Potix Corporation. All Rights Reserved.\n+\n+*/\n+package org.zkoss.zk.au.out;\n+\n+import java.util.Date;\n+import java.util.List;\n+\n+import org.zkoss.json.JSONArray;\n+import org.zkoss.zk.au.AuResponse;\n+import org.zkoss.zk.au.DeferredValue;\n+import org.zkoss.zk.ui.Component;\n+\n+/**\n+ * A response to set successive attributes of the specified component at the client.\n+ * <p>data[0]: the uuid of the component<br/>\n+ * data[1]: the array of attribute name and attribute value\n+ *\n+ * @since 9.0.1\n+ * @author rudyhuang\n+ * @see org.zkoss.zk.au.out.AuSetAttribute\n+ */\n+public class AuSetAttributes extends AuResponse {\n+\t/**\n+\t * Construct an instance for miscellaneous values, such as Boolean,\n+\t * Integer and so on.\n+\t */\n+\tpublic AuSetAttributes(Component comp, AuSetAttribute... attrs) {\n+\t\tsuper(\"setAttrs\", comp, attrs);\n+\t}\n+\n+\t@Override\n+\tpublic List<Object> getEncodedData() {\n+\t\tif (_data == null)\n+\t\t\treturn null;\n+\n+\t\tfinal JSONArray encdata = new JSONArray();\n+\t\tencdata.add(new JSONComponent((Component) getDepends()));\n+\t\tfinal JSONArray subdata = new JSONArray();\n+\t\tfor (AuSetAttribute setAttr : (AuSetAttribute[]) _data) {\n+\t\t\tObject[] setAttrData = setAttr.getRawData();\n+\t\t\tfor (int j = 1, len = setAttrData.length; j < len; ++j) { // skip 0\n+\t\t\t\tObject d = setAttrData[j];\n+\t\t\t\tif (d instanceof DeferredValue)\n+\t\t\t\t\td = ((DeferredValue) d).getValue();\n+\t\t\t\tif (d instanceof Component)\n+\t\t\t\t\td = new JSONComponent((Component) d);\n+\t\t\t\tif (d instanceof Date)\n+\t\t\t\t\td = new JSONDate((Date) d);\n+\t\t\t\tsubdata.add(d);\n+\t\t\t}\n+\t\t}\n+\t\tencdata.add(subdata);\n+\t\treturn encdata;\n+\t}\n+\n+\t@Override\n+\tpublic String toString() {\n+\t\t//Don't call getCommand and getData since it causes\n+\t\t//AuSetDeferredAttribute to evaluate the deferred value\n+\t\tfinal StringBuffer sb = new StringBuffer(60).append(\"[cmd=\").append(_cmd);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6b475983c8c2b2dfbb7369fe30910450a55a441f"}, "originalPosition": 70}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed24e88a32abedc48e3c0c24bfd2be8b19e0446f", "author": {"user": {"login": "scribetw", "name": "Scribe Huang"}}, "url": "https://github.com/zkoss/zk/commit/ed24e88a32abedc48e3c0c24bfd2be8b19e0446f", "committedDate": "2020-02-14T01:59:11Z", "message": "ZK-4504: Merge successive setAttrs in one zAu response"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6b475983c8c2b2dfbb7369fe30910450a55a441f", "author": {"user": {"login": "scribetw", "name": "Scribe Huang"}}, "url": "https://github.com/zkoss/zk/commit/6b475983c8c2b2dfbb7369fe30910450a55a441f", "committedDate": "2020-02-13T11:03:05Z", "message": "ZK-4504: Merge successive setAttrs in one zAu response"}, "afterCommit": {"oid": "ed24e88a32abedc48e3c0c24bfd2be8b19e0446f", "author": {"user": {"login": "scribetw", "name": "Scribe Huang"}}, "url": "https://github.com/zkoss/zk/commit/ed24e88a32abedc48e3c0c24bfd2be8b19e0446f", "committedDate": "2020-02-14T01:59:11Z", "message": "ZK-4504: Merge successive setAttrs in one zAu response"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4NjcyNzMw", "url": "https://github.com/zkoss/zk/pull/1877#pullrequestreview-358672730", "createdAt": "2020-02-14T02:01:22Z", "commit": {"oid": "ed24e88a32abedc48e3c0c24bfd2be8b19e0446f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}