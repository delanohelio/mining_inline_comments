{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ0Nzk4NjEz", "number": 923, "title": "[JENKINS-63847] Use line separator from agent OS instead of master OS", "bodyText": "JENKINS-63847\nRegression probably caused by #757. Before, it always used \\n, which seemed to work on Windows.\nUnder PrintStream, BufferedWriter captures current line separator on initialization, and this behaviour can't be tuned.\nThis avoid using println and uses an eol character depending on the agent OS.", "createdAt": "2020-12-23T13:33:52Z", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/923", "merged": true, "mergeCommit": {"oid": "8d822f38c0b20af5c2d5a9ee6ce822163d52fb48"}, "closed": true, "closedAt": "2021-10-04T07:01:44Z", "author": {"login": "Vlatombe"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdo_NxWAH2gAyNTQ0Nzk4NjEzOjM1Nzg0N2RjM2VkNjEzMjFhZDFmNzJjNDRhYjk0ODEwODRhMDMzMDM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdwERosgH2gAyNTQ0Nzk4NjEzOjI4NWVlMzZmNjgzM2JmMTY4MGNiOGM0ZmU2NDg0Y2U2ZGNhYzk5Yjk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "357847dc3ed61321ad1f72c44ab9481084a03303", "author": {"user": {"login": "Vlatombe", "name": "Vincent Latombe"}}, "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/357847dc3ed61321ad1f72c44ab9481084a03303", "committedDate": "2020-12-23T13:33:16Z", "message": "[JENKINS-63847] Use line separator from agent OS instead of master OS"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "096e66f630546c039697f2804f30647d03efc95a", "author": {"user": {"login": "Vlatombe", "name": "Vincent Latombe"}}, "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/096e66f630546c039697f2804f30647d03efc95a", "committedDate": "2020-12-23T13:50:53Z", "message": "Revert \"[JENKINS-63847] Use line separator from agent OS instead of master OS\"\n\nThis reverts commit 357847dc3ed61321ad1f72c44ab9481084a03303."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18d73fb7efd6d7702f53cd7d2f17b5d28c414f9c", "author": {"user": {"login": "Vlatombe", "name": "Vincent Latombe"}}, "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/18d73fb7efd6d7702f53cd7d2f17b5d28c414f9c", "committedDate": "2020-12-23T14:04:59Z", "message": "Use newline for agent OS"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY1NDQ3MzMw", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/923#pullrequestreview-565447330", "createdAt": "2021-01-11T15:14:18Z", "commit": {"oid": "18d73fb7efd6d7702f53cd7d2f17b5d28c414f9c"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMVQxNToxNDoxOFrOIRZoFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMVQxNToxNDoxOFrOIRZoFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTExNjU2Nw==", "bodyText": "IIUC from \n  \n    \n      kubernetes-plugin/src/main/java/org/csanchez/jenkins/plugins/kubernetes/pipeline/ContainerExecDecorator.java\n    \n    \n         Line 371\n      in\n      18d73fb\n    \n    \n    \n    \n\n        \n          \n           String sh = shell != null ? shell : launcher.isUnix() ? \"sh\" : \"cmd\"; \n        \n    \n  \n\n\nSeems a bit fragile, since shell could in principle be overridden on Windows, but OK. Maybe clearer to introduce a constant here.", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/923#discussion_r555116567", "createdAt": "2021-01-11T15:14:18Z", "author": {"login": "jglick"}, "path": "src/main/java/org/csanchez/jenkins/plugins/kubernetes/pipeline/ContainerExecDecorator.java", "diffHunk": "@@ -460,10 +460,12 @@ public void onClose(int i, String s) {\n                     toggleStdout.disable();\n                     OutputStream stdin = watch.getInput();\n                     PrintStream in = new PrintStream(stdin, true, StandardCharsets.UTF_8.name());\n+                    boolean windows = sh.equals(\"cmd\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18d73fb7efd6d7702f53cd7d2f17b5d28c414f9c"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf7407640f8442fb641399f09c0c3f989e0a31b5", "author": {"user": {"login": "Vlatombe", "name": "Vincent Latombe"}}, "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/bf7407640f8442fb641399f09c0c3f989e0a31b5", "committedDate": "2021-01-11T16:14:16Z", "message": "Remove fragile condition"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY1NjA3MzQy", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/923#pullrequestreview-565607342", "createdAt": "2021-01-11T18:00:43Z", "commit": {"oid": "bf7407640f8442fb641399f09c0c3f989e0a31b5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "285ee36f6833bf1680cb8c4fe6484ce6dcac99b9", "author": {"user": {"login": "Vlatombe", "name": "Vincent Latombe"}}, "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/285ee36f6833bf1680cb8c4fe6484ce6dcac99b9", "committedDate": "2021-01-14T13:24:29Z", "message": "Merge branch 'master' into JENKINS-63847"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 81, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}