{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM4NDA4NDk2", "number": 801, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMjozODo1N1rOEH8wDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMjo0MToxMFrOEH8zhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2NzcwODMwOnYy", "diffSide": "RIGHT", "path": "src/main/java/org/csanchez/jenkins/plugins/kubernetes/KubectlBuildWrapper.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMjozODo1N1rOGnnOMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMjozODo1N1rOGnnOMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDE5MDI1OQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    try (Writer w = new OutputStreamWriter(configFile.write())) {\n          \n          \n            \n                    try (Writer w = new OutputStreamWriter(configFile.write(), StandardCharsets.UTF_8)) {\n          \n      \n    \n    \n  \n\nor something", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/801#discussion_r444190259", "createdAt": "2020-06-23T12:38:57Z", "author": {"login": "jglick"}, "path": "src/main/java/org/csanchez/jenkins/plugins/kubernetes/KubectlBuildWrapper.java", "diffHunk": "@@ -92,13 +94,10 @@ public void setUp(Context context, Run<?, ?> build, FilePath workspace, Launcher\n         if (auth == null) {\n             throw new AbortException(\"Unsupported Credentials type \" + credentials.getClass().getName());\n         }\n-        // create Kubeconfig\n-        try (Writer w = new OutputStreamWriter(new FileOutputStream(configFile.getRemote()), \"UTF-8\")) {\n-            try {\n-                w.write(auth.buildKubeConfig(new KubernetesAuthConfig(getServerUrl(), getCaCertificate(), getCaCertificate() == null)));\n-            } catch (KubernetesAuthException e) {\n-                throw new AbortException(e.getMessage());\n-            }\n+        try (Writer w = new OutputStreamWriter(configFile.write())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7370c81874d45d892c2688c0f282581c33281fb5"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2NzcxMTMxOnYy", "diffSide": "RIGHT", "path": "src/main/java/org/csanchez/jenkins/plugins/kubernetes/KubectlBuildWrapper.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMjozOTo0MlrOGnnP_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMjozOTo0MlrOGnnP_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDE5MDcxOQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                @Symbol(\"kubectl\")\n          \n          \n            \n                @Symbol(\"kubeconfig\")\n          \n      \n    \n    \n  \n\nseems more intuitive to me", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/801#discussion_r444190719", "createdAt": "2020-06-23T12:39:42Z", "author": {"login": "jglick"}, "path": "src/main/java/org/csanchez/jenkins/plugins/kubernetes/KubectlBuildWrapper.java", "diffHunk": "@@ -113,6 +112,7 @@ public void setUp(Context context, Run<?, ?> build, FilePath workspace, Launcher\n     }\n \n     @Extension\n+    @Symbol(\"kubectl\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7370c81874d45d892c2688c0f282581c33281fb5"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc2NzcxNzE2OnYy", "diffSide": "RIGHT", "path": "src/test/java/org/csanchez/jenkins/plugins/kubernetes/KubectlBuildWrapperTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMjo0MToxMFrOGnnToQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxMjo0MToxMFrOGnnToQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDE5MTY0OQ==", "bodyText": "Or you can set this on a per-WorkflowJob basis.", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/801#discussion_r444191649", "createdAt": "2020-06-23T12:41:10Z", "author": {"login": "jglick"}, "path": "src/test/java/org/csanchez/jenkins/plugins/kubernetes/KubectlBuildWrapperTest.java", "diffHunk": "@@ -0,0 +1,39 @@\n+package org.csanchez.jenkins.plugins.kubernetes;\n+\n+import com.cloudbees.plugins.credentials.CredentialsScope;\n+import com.cloudbees.plugins.credentials.SystemCredentialsProvider;\n+import com.cloudbees.plugins.credentials.impl.UsernamePasswordCredentialsImpl;\n+import hudson.model.Result;\n+import org.csanchez.jenkins.plugins.kubernetes.pipeline.AbstractKubernetesPipelineTest;\n+import org.jenkinsci.plugins.workflow.flow.FlowDurabilityHint;\n+import org.jenkinsci.plugins.workflow.flow.GlobalDefaultFlowDurabilityLevel;\n+import org.junit.Before;\n+import org.junit.Test;\n+\n+import static org.csanchez.jenkins.plugins.kubernetes.KubernetesTestUtil.deletePods;\n+import static org.csanchez.jenkins.plugins.kubernetes.KubernetesTestUtil.getLabels;\n+import static org.junit.Assert.assertNotNull;\n+\n+public class KubectlBuildWrapperTest extends AbstractKubernetesPipelineTest {\n+    @Before\n+    public void setUp() throws Exception {\n+        // Had some problems with FileChannel.close hangs from WorkflowRun.save:\n+        r.jenkins.getDescriptorByType(GlobalDefaultFlowDurabilityLevel.DescriptorImpl.class).setDurabilityHint(FlowDurabilityHint.PERFORMANCE_OPTIMIZED);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7370c81874d45d892c2688c0f282581c33281fb5"}, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4948, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}