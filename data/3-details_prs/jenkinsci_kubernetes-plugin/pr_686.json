{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYzNTg0NTkx", "number": 686, "title": "Remove containers grace period", "bodyText": "Nothing interesting should be running in agents containers when it is requested to be terminated, so don't wait these 30 seconds to kill remaining processes inside it.\nShould speed up a lot tests hopefully.\nSubsumes #689 and #690, please review this commit.", "createdAt": "2020-01-16T11:00:47Z", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/686", "merged": true, "mergeCommit": {"oid": "cfcc2e5db388e2c66f4438791b67550d625de8f0"}, "closed": true, "closedAt": "2020-01-20T10:10:58Z", "author": {"login": "Vlatombe"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb7O0HDgH2gAyMzYzNTg0NTkxOmU1ZmFhN2YzOWFkMTVmZThhY2ZkYmJmNjkxYjliNmIxMGJiNDc4ZTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb8H6IegH2gAyMzYzNTg0NTkxOjNmYjEyMWRhOThkNzdiMjJlZDE1NmZkZjA1YjQ4YzI2YTNhZjAxZDM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e5faa7f39ad15fe8acfdbbf691b9b6b10bb478e9", "author": {"user": {"login": "Vlatombe", "name": "Vincent Latombe"}}, "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/e5faa7f39ad15fe8acfdbbf691b9b6b10bb478e9", "committedDate": "2020-01-17T13:32:03Z", "message": "Set terminationGracePeriodSeconds to 0 to avoid waiting 30 seconds for pod termination."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4cf95f2ccc5226241a44a22fbc6b2210d7274b20", "author": {"user": {"login": "Vlatombe", "name": "Vincent Latombe"}}, "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/4cf95f2ccc5226241a44a22fbc6b2210d7274b20", "committedDate": "2020-01-17T10:34:24Z", "message": "Give commands more time to complete"}, "afterCommit": {"oid": "e5faa7f39ad15fe8acfdbbf691b9b6b10bb478e9", "author": {"user": {"login": "Vlatombe", "name": "Vincent Latombe"}}, "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/e5faa7f39ad15fe8acfdbbf691b9b6b10bb478e9", "committedDate": "2020-01-17T13:32:03Z", "message": "Set terminationGracePeriodSeconds to 0 to avoid waiting 30 seconds for pod termination."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88a10ee1d61e6082067f739813b01018ffaab384", "author": {"user": {"login": "Vlatombe", "name": "Vincent Latombe"}}, "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/88a10ee1d61e6082067f739813b01018ffaab384", "committedDate": "2020-01-17T14:39:23Z", "message": "Merge branch 'master' into remove-grace-period"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0NjM2NDA2", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/686#pullrequestreview-344636406", "createdAt": "2020-01-17T15:02:17Z", "commit": {"oid": "88a10ee1d61e6082067f739813b01018ffaab384"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxNTowMjoxN1rOFe7tvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxNTowMjoyNlrOFe7uCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzk3OTk2NQ==", "bodyText": "Is this really safe?", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/686#discussion_r367979965", "createdAt": "2020-01-17T15:02:17Z", "author": {"login": "jglick"}, "path": "src/main/java/org/csanchez/jenkins/plugins/kubernetes/PodTemplateBuilder.java", "diffHunk": "@@ -198,6 +198,7 @@ public Pod build() {\n             builder.withNodeSelector(nodeSelector);\n         }\n \n+        builder.withTerminationGracePeriodSeconds(0L);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88a10ee1d61e6082067f739813b01018ffaab384"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Nzk4MDA0Mg==", "bodyText": "Fine here in tests.", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/686#discussion_r367980042", "createdAt": "2020-01-17T15:02:26Z", "author": {"login": "jglick"}, "path": "src/test/java/org/csanchez/jenkins/plugins/kubernetes/pipeline/ContainerExecDecoratorTest.java", "diffHunk": "@@ -120,7 +120,7 @@ public void configureCloud() throws Exception {\n                 .withCommand(\"cat\").withTty(true).withWorkingDir(\"/home/jenkins/agent1\").build();\n         String podName = \"test-command-execution-\" + RandomStringUtils.random(5, \"bcdfghjklmnpqrstvwxz0123456789\");\n         pod = client.pods().create(new PodBuilder().withNewMetadata().withName(podName)\n-                .withLabels(getLabels(this, name)).endMetadata().withNewSpec().withContainers(c, d).withNodeSelector(Collections.singletonMap(\"kubernetes.io/os\", \"linux\")).endSpec().build());\n+                .withLabels(getLabels(this, name)).endMetadata().withNewSpec().withContainers(c, d).withNodeSelector(Collections.singletonMap(\"kubernetes.io/os\", \"linux\")).withTerminationGracePeriodSeconds(0L).endSpec().build());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "88a10ee1d61e6082067f739813b01018ffaab384"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c42025b5d226014e8e16609bfc97565e5c19d4ec", "author": {"user": {"login": "Vlatombe", "name": "Vincent Latombe"}}, "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/c42025b5d226014e8e16609bfc97565e5c19d4ec", "committedDate": "2020-01-17T16:56:32Z", "message": "Merge branch 'master' into remove-grace-period"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a62d0afa4d35796385c1799c82583cbfdd497cf", "author": {"user": {"login": "Vlatombe", "name": "Vincent Latombe"}}, "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/4a62d0afa4d35796385c1799c82583cbfdd497cf", "committedDate": "2020-01-17T17:11:24Z", "message": "Only set terminationGracePeriodSeconds for tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3fb121da98d77b22ed156fdf05b48c26a3af01d3", "author": {"user": {"login": "Vlatombe", "name": "Vincent Latombe"}}, "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/3fb121da98d77b22ed156fdf05b48c26a3af01d3", "committedDate": "2020-01-20T08:03:13Z", "message": "Merge branch 'master' into remove-grace-period"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 177, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}