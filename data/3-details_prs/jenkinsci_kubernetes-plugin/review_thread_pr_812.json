{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyMTU4ODcx", "number": 812, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwNzozMDo0MVrOEWrvIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwNzozMDo0MVrOEWrvIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMjIwNzA1OnYy", "diffSide": "RIGHT", "path": "src/main/java/io/jenkins/plugins/kubernetes/NoDelayProvisionerStrategy.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwNzozMDo0MVrOG-D9zA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwNzozMDo0MVrOG-D9zA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzcyOTg2OA==", "bodyText": "nodeProvisioner is always non-null if label is non-null.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        NodeProvisioner nodeProvisioner = label.nodeProvisioner;\n          \n          \n            \n                        if (availableCapacity > 0 && nodeProvisioner != null) {\n          \n          \n            \n                            LOGGER.log(Level.FINE, \"Suggesting NodeProvisioner review\");\n          \n          \n            \n                            Timer.get().schedule(nodeProvisioner::suggestReviewNow, 1L, TimeUnit.SECONDS);\n          \n          \n            \n                        }\n          \n          \n            \n                        if (availableCapacity > 0 && label != null) {\n          \n          \n            \n                            LOGGER.log(Level.FINE, \"Suggesting NodeProvisioner review\");\n          \n          \n            \n                            Timer.get().schedule(label.nodeProvisioner::suggestReviewNow, 1L, TimeUnit.SECONDS);\n          \n          \n            \n                        }\n          \n      \n    \n    \n  \n\navailableCapacity > 0 is not useful IMO. It would be more relevant to capture the number of nodes provisioned in the current round and check if it is >0.", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/812#discussion_r467729868", "createdAt": "2020-08-10T07:30:41Z", "author": {"login": "Vlatombe"}, "path": "src/main/java/io/jenkins/plugins/kubernetes/NoDelayProvisionerStrategy.java", "diffHunk": "@@ -71,6 +73,11 @@\n             }\n         }\n         if (availableCapacity >= currentDemand) {\n+            NodeProvisioner nodeProvisioner = label.nodeProvisioner;\n+            if (availableCapacity > 0 && nodeProvisioner != null) {\n+                LOGGER.log(Level.FINE, \"Suggesting NodeProvisioner review\");\n+                Timer.get().schedule(nodeProvisioner::suggestReviewNow, 1L, TimeUnit.SECONDS);\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "631e45172b4fdada0ac62ce1ea990962e353e10b"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4957, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}