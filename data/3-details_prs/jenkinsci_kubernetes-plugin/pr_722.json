{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwNzMyNjQ2", "number": 722, "title": "[JENKINS-60133] Remove openshift-specific behaviour", "bodyText": "JENKINS-60133\nRunning in openshift with the default jnlp image (jenkins/jnlp-slave:4.0.1-1) will issue the following warning\n[WARNING] HOME is set to / in the jnlp container. You may encounter troubles when using tools or ssh client. This usually happens if the uid doesnt have any entry in /etc/passwd. Please add a user to your Dockerfile or set the HOME environment variable to a valid directory in the pod template definition.", "createdAt": "2020-02-27T09:36:17Z", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/722", "merged": true, "mergeCommit": {"oid": "8a9d7d218c59e464d70640a1988056d582211320"}, "closed": true, "closedAt": "2020-03-02T09:29:48Z", "author": {"login": "Vlatombe"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIHMk-gH2gAyMzgwNzMyNjQ2OjU5YjEyNzRiZjYyOTNjNjBkZWY1NDU3NzIwMTMyOWVmYjVmMjU0N2U=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcJqUISAH2gAyMzgwNzMyNjQ2OjhjOGFmMzE0NzNiNjY4OGM0MjI0NzA1ODkzMzY2MWM1NWU0N2M2Y2I=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "59b1274bf6293c60def54577201329efb5f2547e", "author": {"user": {"login": "Vlatombe", "name": "Vincent Latombe"}}, "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/59b1274bf6293c60def54577201329efb5f2547e", "committedDate": "2020-02-26T14:00:33Z", "message": "[JENKINS-60133] Remove openshift-specific behaviour"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1NzA1MTk3", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/722#pullrequestreview-365705197", "createdAt": "2020-02-27T14:04:39Z", "commit": {"oid": "59b1274bf6293c60def54577201329efb5f2547e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "409c7f2465a27c594f4a32f086e5256f046e3736", "author": {"user": {"login": "Vlatombe", "name": "Vincent Latombe"}}, "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/409c7f2465a27c594f4a32f086e5256f046e3736", "committedDate": "2020-02-27T14:37:32Z", "message": "[JENKINS-60133] Add a note in README about running in OpenShift"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MDY1MjAz", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/722#pullrequestreview-366065203", "createdAt": "2020-02-27T23:12:05Z", "commit": {"oid": "409c7f2465a27c594f4a32f086e5256f046e3736"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QyMzoxMjowNVrOFvkctg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QyMzoxMjowNVrOFvkctg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTQyNDU2Ng==", "bodyText": "A (yaml or Groovy-oriented) code sample would be appreciated here.", "url": "https://github.com/jenkinsci/kubernetes-plugin/pull/722#discussion_r385424566", "createdAt": "2020-02-27T23:12:05Z", "author": {"login": "jglick"}, "path": "README.md", "diffHunk": "@@ -573,6 +573,21 @@ containerLog 'mongodb'\n \n Also see the online help and [examples/containerLog.groovy](examples/containerLog.groovy).\n \n+# Running on OpenShift\n+\n+OpenShift runs containers using a 'random' UID that is overriding what is specified in Docker images.\n+For this reason, you may end up with the following warning in your build\n+\n+```\n+[WARNING] HOME is set to / in the jnlp container. You may encounter troubles when using tools or ssh client. This usually happens if the uid doesnt have any entry in /etc/passwd. Please add a user to your Dockerfile or set the HOME environment variable to a valid directory in the pod template definition.\n+```\n+\n+At the moment the jenkinsci agent image is not built for OpenShift and will issue this warning.\n+\n+This issue can be circumvented in various ways:\n+* build a docker image for OpenShift in order to behave when running using an arbitrary uid.\n+* override HOME environment variable in the pod spec to use `/home/jenkins` and mount a volume to `/home/jenkins` to ensure the user running the container can write to it", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "409c7f2465a27c594f4a32f086e5256f046e3736"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c8af31473b6688c42247058933661c55e47c6cb", "author": {"user": {"login": "Vlatombe", "name": "Vincent Latombe"}}, "url": "https://github.com/jenkinsci/kubernetes-plugin/commit/8c8af31473b6688c42247058933661c55e47c6cb", "committedDate": "2020-03-02T09:29:24Z", "message": "Add an example for openshift"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 207, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}