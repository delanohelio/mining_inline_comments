{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0NDczNjY2", "number": 7669, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQyMDo1MzoxMFrOFDIhGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxMjowMDoxOFrOFGJ_XQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM4ODI5NTkyOnYy", "diffSide": "RIGHT", "path": "services/src/main/java/org/keycloak/forms/login/freemarker/FreeMarkerLoginFormsProvider.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQyMDo1MzoxMFrOICo-lg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxMjowMTozNVrOIHB7ow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTYzOTQ0Ng==", "bodyText": "This would give misleading information to the attributes. idpAlias must contain identity provider alias. You can however add another attribute, e.g. idpDisplayName, that would be display name (if set) or alias (if displayname unset), and use that in the template.", "url": "https://github.com/keycloak/keycloak/pull/7669#discussion_r539639446", "createdAt": "2020-12-09T20:53:10Z", "author": {"login": "hmlnarik"}, "path": "services/src/main/java/org/keycloak/forms/login/freemarker/FreeMarkerLoginFormsProvider.java", "diffHunk": "@@ -209,6 +209,9 @@ protected Response createResponse(LoginFormsPages page) {\n                 BrokeredIdentityContext brokerContext = (BrokeredIdentityContext) this.attributes.get(IDENTITY_PROVIDER_BROKER_CONTEXT);\n                 String idpAlias = brokerContext.getIdpConfig().getAlias();\n                 idpAlias = ObjectUtil.capitalize(idpAlias);\n+                if (!ObjectUtil.isBlank(brokerContext.getIdpConfig().getDisplayName())) {\n+                    idpAlias = brokerContext.getIdpConfig().getDisplayName();\n+                }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe597c79d6ee89505f71d88b2192e1f3640770a6"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTU0NTIyNw==", "bodyText": "Hi @hmlnarik, please check again, if I understood it correctly.", "url": "https://github.com/keycloak/keycloak/pull/7669#discussion_r541545227", "createdAt": "2020-12-12T09:59:15Z", "author": {"login": "loaded02"}, "path": "services/src/main/java/org/keycloak/forms/login/freemarker/FreeMarkerLoginFormsProvider.java", "diffHunk": "@@ -209,6 +209,9 @@ protected Response createResponse(LoginFormsPages page) {\n                 BrokeredIdentityContext brokerContext = (BrokeredIdentityContext) this.attributes.get(IDENTITY_PROVIDER_BROKER_CONTEXT);\n                 String idpAlias = brokerContext.getIdpConfig().getAlias();\n                 idpAlias = ObjectUtil.capitalize(idpAlias);\n+                if (!ObjectUtil.isBlank(brokerContext.getIdpConfig().getDisplayName())) {\n+                    idpAlias = brokerContext.getIdpConfig().getDisplayName();\n+                }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTYzOTQ0Ng=="}, "originalCommit": {"oid": "fe597c79d6ee89505f71d88b2192e1f3640770a6"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDI0MjU5NQ==", "bodyText": "This part is correct, yet see below", "url": "https://github.com/keycloak/keycloak/pull/7669#discussion_r544242595", "createdAt": "2020-12-16T12:01:35Z", "author": {"login": "hmlnarik"}, "path": "services/src/main/java/org/keycloak/forms/login/freemarker/FreeMarkerLoginFormsProvider.java", "diffHunk": "@@ -209,6 +209,9 @@ protected Response createResponse(LoginFormsPages page) {\n                 BrokeredIdentityContext brokerContext = (BrokeredIdentityContext) this.attributes.get(IDENTITY_PROVIDER_BROKER_CONTEXT);\n                 String idpAlias = brokerContext.getIdpConfig().getAlias();\n                 idpAlias = ObjectUtil.capitalize(idpAlias);\n+                if (!ObjectUtil.isBlank(brokerContext.getIdpConfig().getDisplayName())) {\n+                    idpAlias = brokerContext.getIdpConfig().getDisplayName();\n+                }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTYzOTQ0Ng=="}, "originalCommit": {"oid": "fe597c79d6ee89505f71d88b2192e1f3640770a6"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxOTk5NDUzOnYy", "diffSide": "RIGHT", "path": "services/src/main/java/org/keycloak/forms/login/freemarker/FreeMarkerLoginFormsProvider.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxMjowMDoxOFrOIHB44g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxMTozODowM1rOIIfjGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDI0MTg5MA==", "bodyText": "idpAlias must be retained, idpDisplayName is a new attribute", "url": "https://github.com/keycloak/keycloak/pull/7669#discussion_r544241890", "createdAt": "2020-12-16T12:00:18Z", "author": {"login": "hmlnarik"}, "path": "services/src/main/java/org/keycloak/forms/login/freemarker/FreeMarkerLoginFormsProvider.java", "diffHunk": "@@ -209,9 +209,13 @@ protected Response createResponse(LoginFormsPages page) {\n                 BrokeredIdentityContext brokerContext = (BrokeredIdentityContext) this.attributes.get(IDENTITY_PROVIDER_BROKER_CONTEXT);\n                 String idpAlias = brokerContext.getIdpConfig().getAlias();\n                 idpAlias = ObjectUtil.capitalize(idpAlias);\n+                String displayName = idpAlias;\n+                if (!ObjectUtil.isBlank(brokerContext.getIdpConfig().getDisplayName())) {\n+                    displayName = brokerContext.getIdpConfig().getDisplayName();\n+                }\n \n                 attributes.put(\"brokerContext\", brokerContext);\n-                attributes.put(\"idpAlias\", idpAlias);\n+                attributes.put(\"idpDisplayName\", displayName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c28b7ae38d6f11f23e8d914df7aae95a037075b2"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTc3NjQwOQ==", "bodyText": "Hi @hmlnarik, please check again", "url": "https://github.com/keycloak/keycloak/pull/7669#discussion_r545776409", "createdAt": "2020-12-18T11:38:03Z", "author": {"login": "loaded02"}, "path": "services/src/main/java/org/keycloak/forms/login/freemarker/FreeMarkerLoginFormsProvider.java", "diffHunk": "@@ -209,9 +209,13 @@ protected Response createResponse(LoginFormsPages page) {\n                 BrokeredIdentityContext brokerContext = (BrokeredIdentityContext) this.attributes.get(IDENTITY_PROVIDER_BROKER_CONTEXT);\n                 String idpAlias = brokerContext.getIdpConfig().getAlias();\n                 idpAlias = ObjectUtil.capitalize(idpAlias);\n+                String displayName = idpAlias;\n+                if (!ObjectUtil.isBlank(brokerContext.getIdpConfig().getDisplayName())) {\n+                    displayName = brokerContext.getIdpConfig().getDisplayName();\n+                }\n \n                 attributes.put(\"brokerContext\", brokerContext);\n-                attributes.put(\"idpAlias\", idpAlias);\n+                attributes.put(\"idpDisplayName\", displayName);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDI0MTg5MA=="}, "originalCommit": {"oid": "c28b7ae38d6f11f23e8d914df7aae95a037075b2"}, "originalPosition": 11}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3243, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}