{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkzMjE4NzA4", "number": 7450, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxNjo1NzozNFrOEniJtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxNjo1NzozNFrOEniJtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5ODg5NDYzOnYy", "diffSide": "RIGHT", "path": "quarkus/runtime/src/main/java/org/keycloak/configuration/PropertyMappers.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxNjo1NzozNFrOHYLfNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxOToyNjozOVrOHZMhSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTExNjA4NQ==", "bodyText": "@pedroigor I needed to use \"placeholder\" for the defaultValue as the transformer function is not executed in case that value is null. If we want to remove the workaround with \"placeholder\", we may need to change this line and remove the need to have non-null defaultValue - https://github.com/keycloak/keycloak/blob/master/quarkus/runtime/src/main/java/org/keycloak/configuration/PropertyMapper.java#L137 .\nThen it will be possible to run transformer function even if \"value\" is null - which I am not 100% sure we want to support? WDYT?", "url": "https://github.com/keycloak/keycloak/pull/7450#discussion_r495116085", "createdAt": "2020-09-25T16:57:34Z", "author": {"login": "mposolda"}, "path": "quarkus/runtime/src/main/java/org/keycloak/configuration/PropertyMappers.java", "diffHunk": "@@ -133,6 +131,19 @@ private static void configureDatabasePropertyMappers() {\n         createWithDefault(\"db.pool.max-size\", \"quarkus.datasource.jdbc.max-size\", String.valueOf(100), \"The maximum size of the connection pool.\");\n     }\n \n+    private static void configureClustering() {\n+        createWithDefault(\"cluster.enabled\", \"kc.spi.connections-infinispan.default.clustered\", \"placeholder\", (value, context) -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c11d9dfe8575177cd55828f591e01e478939b0b2"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE4MTU3Nw==", "bodyText": "I think we can pass null to the transformer and delegate the default value resolution to it. Can't remember now why the code stands like that though, probably some corner case or maybe garbage ...", "url": "https://github.com/keycloak/keycloak/pull/7450#discussion_r496181577", "createdAt": "2020-09-28T19:26:39Z", "author": {"login": "pedroigor"}, "path": "quarkus/runtime/src/main/java/org/keycloak/configuration/PropertyMappers.java", "diffHunk": "@@ -133,6 +131,19 @@ private static void configureDatabasePropertyMappers() {\n         createWithDefault(\"db.pool.max-size\", \"quarkus.datasource.jdbc.max-size\", String.valueOf(100), \"The maximum size of the connection pool.\");\n     }\n \n+    private static void configureClustering() {\n+        createWithDefault(\"cluster.enabled\", \"kc.spi.connections-infinispan.default.clustered\", \"placeholder\", (value, context) -> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTExNjA4NQ=="}, "originalCommit": {"oid": "c11d9dfe8575177cd55828f591e01e478939b0b2"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3358, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}