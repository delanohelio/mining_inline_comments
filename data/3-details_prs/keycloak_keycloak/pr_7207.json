{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwMDgzODAz", "number": 7207, "title": "[KEYCLOAK-13141] - Supporting re-augmentation", "bodyText": "The main changes are:\n\nSupport for re-augmenting the server so that the server is optimized with the new configuration and/or custom providers (and saving a few precious milliseconds during startup)\nChanges to the distribution so that it reflects the new directory structure we need to run fast|mutable jars.\nChange the current approach for changing build time config such as database so that the server should be re-augmented to apply any change\nChange the current approach for deploying custom providers so that the server should be re-augmented in order to have any provider deployed\nRunning re-augmentation when building the test suite auth-server-quarkus as well as initial support for forcing re-augmentation between tests run\nWhile we wait for some changes that are targeted for Quarkus 1.7.0, we are using Quarkus SNAPSHOT", "createdAt": "2020-06-25T15:08:04Z", "url": "https://github.com/keycloak/keycloak/pull/7207", "merged": true, "mergeCommit": {"oid": "1db1deb0668b01eafa5dd03b222f51699be48008"}, "closed": true, "closedAt": "2020-07-10T14:04:48Z", "author": {"login": "pedroigor"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcuwGwIgBqjM0ODI4NTkxNzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABczjNSwgFqTQ0NjM3ODY4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "03e894d493a3a3cb75cbebbafb43f1ed8c222404", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/03e894d493a3a3cb75cbebbafb43f1ed8c222404", "committedDate": "2020-06-25T14:50:25Z", "message": "[KEYCLOAK-13141] - Supporting re-augmentation"}, "afterCommit": {"oid": "705cdb4e7e55abf5a38cc822a554bd05d24a7833", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/705cdb4e7e55abf5a38cc822a554bd05d24a7833", "committedDate": "2020-06-25T15:09:17Z", "message": "[KEYCLOAK-13141] - Supporting re-augmentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "705cdb4e7e55abf5a38cc822a554bd05d24a7833", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/705cdb4e7e55abf5a38cc822a554bd05d24a7833", "committedDate": "2020-06-25T15:09:17Z", "message": "[KEYCLOAK-13141] - Supporting re-augmentation"}, "afterCommit": {"oid": "a5588d1176da937f139d8d15de0f8a22df8aa8b9", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/a5588d1176da937f139d8d15de0f8a22df8aa8b9", "committedDate": "2020-07-03T13:37:48Z", "message": "[KEYCLOAK-13141] - Supporting re-augmentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNDkwMTA0", "url": "https://github.com/keycloak/keycloak/pull/7207#pullrequestreview-442490104", "createdAt": "2020-07-03T15:55:57Z", "commit": {"oid": "a5588d1176da937f139d8d15de0f8a22df8aa8b9"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a5588d1176da937f139d8d15de0f8a22df8aa8b9", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/a5588d1176da937f139d8d15de0f8a22df8aa8b9", "committedDate": "2020-07-03T13:37:48Z", "message": "[KEYCLOAK-13141] - Supporting re-augmentation"}, "afterCommit": {"oid": "f6b76a934b05343d433188f0cbe955e989e621fc", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/f6b76a934b05343d433188f0cbe955e989e621fc", "committedDate": "2020-07-08T00:24:45Z", "message": "[KEYCLOAK-13141] - Supporting re-augmentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f6b76a934b05343d433188f0cbe955e989e621fc", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/f6b76a934b05343d433188f0cbe955e989e621fc", "committedDate": "2020-07-08T00:24:45Z", "message": "[KEYCLOAK-13141] - Supporting re-augmentation"}, "afterCommit": {"oid": "721391b7fe4956403773d0ee79d4c7c08fbabb87", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/721391b7fe4956403773d0ee79d4c7c08fbabb87", "committedDate": "2020-07-08T00:41:07Z", "message": "[KEYCLOAK-13141] - Supporting re-augmentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "721391b7fe4956403773d0ee79d4c7c08fbabb87", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/721391b7fe4956403773d0ee79d4c7c08fbabb87", "committedDate": "2020-07-08T00:41:07Z", "message": "[KEYCLOAK-13141] - Supporting re-augmentation"}, "afterCommit": {"oid": "32fb534a45347165ea0a6f7c3e09b509ccd713fc", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/32fb534a45347165ea0a6f7c3e09b509ccd713fc", "committedDate": "2020-07-08T15:18:02Z", "message": "[KEYCLOAK-13141] - Supporting re-augmentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "32fb534a45347165ea0a6f7c3e09b509ccd713fc", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/32fb534a45347165ea0a6f7c3e09b509ccd713fc", "committedDate": "2020-07-08T15:18:02Z", "message": "[KEYCLOAK-13141] - Supporting re-augmentation"}, "afterCommit": {"oid": "15d37d198d37bf7285a939b74d71e3d8ce907161", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/15d37d198d37bf7285a939b74d71e3d8ce907161", "committedDate": "2020-07-09T11:53:55Z", "message": "[KEYCLOAK-13141] - Supporting re-augmentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "15d37d198d37bf7285a939b74d71e3d8ce907161", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/15d37d198d37bf7285a939b74d71e3d8ce907161", "committedDate": "2020-07-09T11:53:55Z", "message": "[KEYCLOAK-13141] - Supporting re-augmentation"}, "afterCommit": {"oid": "b9e051ffc2bca8e4caa33b3795f4dff5e2b65d81", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/b9e051ffc2bca8e4caa33b3795f4dff5e2b65d81", "committedDate": "2020-07-09T11:59:43Z", "message": "[KEYCLOAK-13141] - Supporting re-augmentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b9e051ffc2bca8e4caa33b3795f4dff5e2b65d81", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/b9e051ffc2bca8e4caa33b3795f4dff5e2b65d81", "committedDate": "2020-07-09T11:59:43Z", "message": "[KEYCLOAK-13141] - Supporting re-augmentation"}, "afterCommit": {"oid": "07d79e3de3c4617afa201def0b6ac8fdf2c9547c", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/07d79e3de3c4617afa201def0b6ac8fdf2c9547c", "committedDate": "2020-07-09T13:11:22Z", "message": "[KEYCLOAK-13141] - Supporting re-augmentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "07d79e3de3c4617afa201def0b6ac8fdf2c9547c", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/07d79e3de3c4617afa201def0b6ac8fdf2c9547c", "committedDate": "2020-07-09T13:11:22Z", "message": "[KEYCLOAK-13141] - Supporting re-augmentation"}, "afterCommit": {"oid": "2160a39990ce5f0dfd8d805e3b2797ed81398a8a", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/2160a39990ce5f0dfd8d805e3b2797ed81398a8a", "committedDate": "2020-07-09T13:13:54Z", "message": "[KEYCLOAK-13141] - Supporting re-augmentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NjE4NDg1", "url": "https://github.com/keycloak/keycloak/pull/7207#pullrequestreview-445618485", "createdAt": "2020-07-09T13:32:15Z", "commit": {"oid": "2160a39990ce5f0dfd8d805e3b2797ed81398a8a"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMzozMjoxNVrOGvRTFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMzo0MTo1NVrOGvRs2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjIxOTY3MQ==", "bodyText": "Instead of deleting this README should we not rather add instructions top copy, then run \"kc.sh config\"?", "url": "https://github.com/keycloak/keycloak/pull/7207#discussion_r452219671", "createdAt": "2020-07-09T13:32:15Z", "author": {"login": "stianst"}, "path": "distribution/server-x/src/main/content/providers/README.txt", "diffHunk": "@@ -1 +0,0 @@\n-Copy custom providers into this directory then restart the Keycloak server.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2160a39990ce5f0dfd8d805e3b2797ed81398a8a"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjIyMzM3NA==", "bodyText": "Looks like a type since this line is already here?", "url": "https://github.com/keycloak/keycloak/pull/7207#discussion_r452223374", "createdAt": "2020-07-09T13:37:44Z", "author": {"login": "stianst"}, "path": "testsuite/integration-arquillian/servers/auth-server/quarkus/pom.xml", "diffHunk": "@@ -13,6 +13,7 @@\n     <artifactId>integration-arquillian-servers-auth-server-quarkus</artifactId>\n \n     <properties>\n+        <auth.server.home>${project.build.directory}/unpacked/keycloak.x-${project.version}</auth.server.home>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2160a39990ce5f0dfd8d805e3b2797ed81398a8a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjIyNjI2NA==", "bodyText": "Actually we want to remove this as we want to use quarkus.<whatever> for Quarkus direct properties, and only expose specific alias/mappings to Quarkus properties. So this whole transform key can perhaps just be removed when we start working on the config stuff", "url": "https://github.com/keycloak/keycloak/pull/7207#discussion_r452226264", "createdAt": "2020-07-09T13:41:55Z", "author": {"login": "stianst"}, "path": "quarkus/runtime/src/main/java/org/keycloak/provider/quarkus/KeycloakPropertiesConfigSource.java", "diffHunk": "@@ -125,6 +125,13 @@ private static InputStream openStream(String fileName) {\n         return result;\n     }\n \n+    /**", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2160a39990ce5f0dfd8d805e3b2797ed81398a8a"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2160a39990ce5f0dfd8d805e3b2797ed81398a8a", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/2160a39990ce5f0dfd8d805e3b2797ed81398a8a", "committedDate": "2020-07-09T13:13:54Z", "message": "[KEYCLOAK-13141] - Supporting re-augmentation"}, "afterCommit": {"oid": "81ad44824e3cde39394c452823d78fa9b76effc3", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/81ad44824e3cde39394c452823d78fa9b76effc3", "committedDate": "2020-07-09T21:07:23Z", "message": "[KEYCLOAK-13141] - Supporting re-augmentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "81ad44824e3cde39394c452823d78fa9b76effc3", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/81ad44824e3cde39394c452823d78fa9b76effc3", "committedDate": "2020-07-09T21:07:23Z", "message": "[KEYCLOAK-13141] - Supporting re-augmentation"}, "afterCommit": {"oid": "b67aac71e39c93c47af99086bf74984cb44e2386", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/b67aac71e39c93c47af99086bf74984cb44e2386", "committedDate": "2020-07-09T22:45:36Z", "message": "[KEYCLOAK-13141] - Supporting re-augmentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5541e9cc6e4602efebb85fbcc8f5042987493534", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/5541e9cc6e4602efebb85fbcc8f5042987493534", "committedDate": "2020-07-10T11:33:11Z", "message": "[KEYCLOAK-13141] - Supporting re-augmentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b67aac71e39c93c47af99086bf74984cb44e2386", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/b67aac71e39c93c47af99086bf74984cb44e2386", "committedDate": "2020-07-09T22:45:36Z", "message": "[KEYCLOAK-13141] - Supporting re-augmentation"}, "afterCommit": {"oid": "5541e9cc6e4602efebb85fbcc8f5042987493534", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/5541e9cc6e4602efebb85fbcc8f5042987493534", "committedDate": "2020-07-10T11:33:11Z", "message": "[KEYCLOAK-13141] - Supporting re-augmentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2Mzc4Njg5", "url": "https://github.com/keycloak/keycloak/pull/7207#pullrequestreview-446378689", "createdAt": "2020-07-10T12:57:25Z", "commit": {"oid": "5541e9cc6e4602efebb85fbcc8f5042987493534"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3013, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}