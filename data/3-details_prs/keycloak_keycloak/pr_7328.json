{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY2MDA5MDUw", "number": 7328, "title": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants", "bodyText": "EDIT: It's now rebased on master", "createdAt": "2020-08-11T10:15:15Z", "url": "https://github.com/keycloak/keycloak/pull/7328", "merged": true, "mergeCommit": {"oid": "d59a74c364e9cee1fdfaf2fc7de21c9ecb1e5c6f"}, "closed": true, "closedAt": "2020-08-28T18:56:11Z", "author": {"login": "martin-kanis"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc93zGDgBqjM2NDM0OTYyNjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdDZtBwgFqTQ3Nzk1NzY5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "efe871af15f06f6bd0bd63e746e962c89f1451dc", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/efe871af15f06f6bd0bd63e746e962c89f1451dc", "committedDate": "2020-08-11T10:13:21Z", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants"}, "afterCommit": {"oid": "dba7f0b347291f3fbfa4cec036f8b0f6d972a166", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/dba7f0b347291f3fbfa4cec036f8b0f6d972a166", "committedDate": "2020-08-11T14:35:41Z", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dba7f0b347291f3fbfa4cec036f8b0f6d972a166", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/dba7f0b347291f3fbfa4cec036f8b0f6d972a166", "committedDate": "2020-08-11T14:35:41Z", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants"}, "afterCommit": {"oid": "a1dc963847e9702a97495dc9c523f56b9b3d79b6", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/a1dc963847e9702a97495dc9c523f56b9b3d79b6", "committedDate": "2020-08-13T07:52:32Z", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a1dc963847e9702a97495dc9c523f56b9b3d79b6", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/a1dc963847e9702a97495dc9c523f56b9b3d79b6", "committedDate": "2020-08-13T07:52:32Z", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants"}, "afterCommit": {"oid": "c0362da7af9c15141bd99d0577c5cc076ef035a1", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/c0362da7af9c15141bd99d0577c5cc076ef035a1", "committedDate": "2020-08-13T10:08:12Z", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c0362da7af9c15141bd99d0577c5cc076ef035a1", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/c0362da7af9c15141bd99d0577c5cc076ef035a1", "committedDate": "2020-08-13T10:08:12Z", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants"}, "afterCommit": {"oid": "4d5c79a1e346f9b25c39fb68a3e9ac85f6e4749f", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/4d5c79a1e346f9b25c39fb68a3e9ac85f6e4749f", "committedDate": "2020-08-18T07:56:00Z", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4d5c79a1e346f9b25c39fb68a3e9ac85f6e4749f", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/4d5c79a1e346f9b25c39fb68a3e9ac85f6e4749f", "committedDate": "2020-08-18T07:56:00Z", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants"}, "afterCommit": {"oid": "34f4242a5ec6bb785abc4f193576c9ced18c625a", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/34f4242a5ec6bb785abc4f193576c9ced18c625a", "committedDate": "2020-08-18T08:45:03Z", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "34f4242a5ec6bb785abc4f193576c9ced18c625a", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/34f4242a5ec6bb785abc4f193576c9ced18c625a", "committedDate": "2020-08-18T08:45:03Z", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants"}, "afterCommit": {"oid": "c97d18b1b15bbddff51a181253bc7b2dfef23e4b", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/c97d18b1b15bbddff51a181253bc7b2dfef23e4b", "committedDate": "2020-08-18T10:29:51Z", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c97d18b1b15bbddff51a181253bc7b2dfef23e4b", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/c97d18b1b15bbddff51a181253bc7b2dfef23e4b", "committedDate": "2020-08-18T10:29:51Z", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants"}, "afterCommit": {"oid": "7333120e5e2e36df627277233b1a4b4cae05c343", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/7333120e5e2e36df627277233b1a4b4cae05c343", "committedDate": "2020-08-18T12:19:28Z", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7333120e5e2e36df627277233b1a4b4cae05c343", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/7333120e5e2e36df627277233b1a4b4cae05c343", "committedDate": "2020-08-18T12:19:28Z", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants"}, "afterCommit": {"oid": "493f41f94f448c1d2cfa4416bf7d6a14821f87d0", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/493f41f94f448c1d2cfa4416bf7d6a14821f87d0", "committedDate": "2020-08-18T12:30:29Z", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcwMzYwMTM3", "url": "https://github.com/keycloak/keycloak/pull/7328#pullrequestreview-470360137", "createdAt": "2020-08-19T11:20:14Z", "commit": {"oid": "493f41f94f448c1d2cfa4416bf7d6a14821f87d0"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "493f41f94f448c1d2cfa4416bf7d6a14821f87d0", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/493f41f94f448c1d2cfa4416bf7d6a14821f87d0", "committedDate": "2020-08-18T12:30:29Z", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants"}, "afterCommit": {"oid": "e294322976729e11b9dab0d4b0af4e6d8e65a5b3", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/e294322976729e11b9dab0d4b0af4e6d8e65a5b3", "committedDate": "2020-08-26T08:06:23Z", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e294322976729e11b9dab0d4b0af4e6d8e65a5b3", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/e294322976729e11b9dab0d4b0af4e6d8e65a5b3", "committedDate": "2020-08-26T08:06:23Z", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants"}, "afterCommit": {"oid": "0c7eb05b891a662b33b420d1f316fcddf2ffa00d", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/0c7eb05b891a662b33b420d1f316fcddf2ffa00d", "committedDate": "2020-08-26T09:36:13Z", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "39ea083986a313aa5100175309385578d80b0765", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/39ea083986a313aa5100175309385578d80b0765", "committedDate": "2020-08-26T15:28:26Z", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0c7eb05b891a662b33b420d1f316fcddf2ffa00d", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/0c7eb05b891a662b33b420d1f316fcddf2ffa00d", "committedDate": "2020-08-26T09:36:13Z", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants"}, "afterCommit": {"oid": "39ea083986a313aa5100175309385578d80b0765", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/39ea083986a313aa5100175309385578d80b0765", "committedDate": "2020-08-26T15:28:26Z", "message": "KEYCLOAK-15102 Complement methods for accessing groups with Stream variants"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2NTQyNzE2", "url": "https://github.com/keycloak/keycloak/pull/7328#pullrequestreview-476542716", "createdAt": "2020-08-27T09:26:59Z", "commit": {"oid": "39ea083986a313aa5100175309385578d80b0765"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwOToyNjo1OVrOHIIAQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QwOToyNjo1OVrOHIIAQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODI4MTc5NQ==", "bodyText": "Could be\nreturn Stream.concat(super.getGroupsStream(), Stream.of(group))\n    .filter(Objects::nonNull);", "url": "https://github.com/keycloak/keycloak/pull/7328#discussion_r478281795", "createdAt": "2020-08-27T09:26:59Z", "author": {"login": "hmlnarik"}, "path": "federation/ldap/src/main/java/org/keycloak/storage/ldap/mappers/HardcodedLDAPGroupStorageMapper.java", "diffHunk": "@@ -51,12 +50,12 @@ public UserModel proxy(LDAPObject ldapUser, UserModel delegate, RealmModel realm\n         return new UserModelDelegate(delegate) {\n \n             @Override\n-            public Set<GroupModel> getGroups() {\n-                Set<GroupModel> groups = new HashSet<GroupModel>(super.getGroups());\n+            public Stream<GroupModel> getGroupsStream() {\n+                Stream<GroupModel> groups = super.getGroupsStream();\n \n                 GroupModel group = getGroup(realm);\n                 if (group != null) {\n-                    groups.add(group);\n+                    return Stream.concat(groups, Stream.of(group));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "39ea083986a313aa5100175309385578d80b0765"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2NTQzOTIw", "url": "https://github.com/keycloak/keycloak/pull/7328#pullrequestreview-476543920", "createdAt": "2020-08-27T09:28:32Z", "commit": {"oid": "39ea083986a313aa5100175309385578d80b0765"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3MjIxNDMz", "url": "https://github.com/keycloak/keycloak/pull/7328#pullrequestreview-477221433", "createdAt": "2020-08-28T03:44:32Z", "commit": {"oid": "39ea083986a313aa5100175309385578d80b0765"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3OTU3Njk2", "url": "https://github.com/keycloak/keycloak/pull/7328#pullrequestreview-477957696", "createdAt": "2020-08-28T18:55:49Z", "commit": {"oid": "39ea083986a313aa5100175309385578d80b0765"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2919, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}