{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1MDQzODI0", "number": 7122, "title": "KEYCLOAK-14310 Added fix that considers Content-Type for data encoding", "bodyText": "KEYCLOAK-14310\nAdded fix that considers Content-Type for data encoding and added corresponding test\nA Unit Test was added because creating a suitable integration test would cause a non corresponding effort. The test was aligned with the existing test for this class which addresses a similar issue with encoding. The modifications to the pom are needed because surefire by default does not pick up the tests in inner classes. This prevented the existing test from being executed in maven builds. Additionally surefire has problems picking up the encoding in the forked JVM, even though the surefire encoding is set correct to UTF-8 in the build.", "createdAt": "2020-05-29T11:18:22Z", "url": "https://github.com/keycloak/keycloak/pull/7122", "merged": true, "mergeCommit": {"oid": "9a7b91bdc22e4e75a1ca0a12cb4355f4a1d16964"}, "closed": true, "closedAt": "2020-07-09T07:53:03Z", "author": {"login": "fabianschlier"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcmAcRUgH2gAyNDI1MDQzODI0OmE2MDdhNWQ3ZjI2MGY4ZjlmODVhMzYzN2YwYjNkYmIyN2JkZTg3Yzc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABctv7aBAFqTQzNDg3MDI3Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a607a5d7f260f8f9f85a3637f0b3dbb27bde87c7", "author": {"user": null}, "url": "https://github.com/keycloak/keycloak/commit/a607a5d7f260f8f9f85a3637f0b3dbb27bde87c7", "committedDate": "2020-05-29T11:06:05Z", "message": "KEYCLOAK-14310 Added fix that considers Content-Type for data encoding and added corresponding test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzMjk4OTgx", "url": "https://github.com/keycloak/keycloak/pull/7122#pullrequestreview-433298981", "createdAt": "2020-06-18T13:46:08Z", "commit": {"oid": "a607a5d7f260f8f9f85a3637f0b3dbb27bde87c7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxMzo0NjowOFrOGlwDOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxMzo0NjowOFrOGlwDOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjIzNzc1Mw==", "bodyText": "Shall we handle the case when there is an org.apache.http.HttpHeaders#CONTENT_TYPE header? Also, please, replace the string with org.apache.http.HttpHeaders#CONTENT_TYPE.", "url": "https://github.com/keycloak/keycloak/pull/7122#discussion_r442237753", "createdAt": "2020-06-18T13:46:08Z", "author": {"login": "pedroigor"}, "path": "server-spi-private/src/main/java/org/keycloak/broker/provider/util/SimpleHttp.java", "diffHunk": "@@ -242,7 +242,7 @@ private URI appendParameterToUrl(String url) throws IOException {\n     }\n \n     private StringEntity getJsonEntity() throws IOException {\n-        return new StringEntity(JsonSerialization.writeValueAsString(entity));\n+        return new StringEntity(JsonSerialization.writeValueAsString(entity), ContentType.getByMimeType(headers.get(\"Content-Type\")));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a607a5d7f260f8f9f85a3637f0b3dbb27bde87c7"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4658fc8bc522bff6ad58141d82a967110588e202", "author": {"user": null}, "url": "https://github.com/keycloak/keycloak/commit/4658fc8bc522bff6ad58141d82a967110588e202", "committedDate": "2020-06-22T08:55:52Z", "message": "KEYCLOAK-14310 Replaced string by constant after review amendment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0ODcwMjcy", "url": "https://github.com/keycloak/keycloak/pull/7122#pullrequestreview-434870272", "createdAt": "2020-06-22T12:23:06Z", "commit": {"oid": "4658fc8bc522bff6ad58141d82a967110588e202"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3106, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}