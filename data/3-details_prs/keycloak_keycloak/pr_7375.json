{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc0NjYxNjc4", "number": 7375, "title": "[KEYCLOAK-14953] Added Galleon feature pack to enable Galleon provisioning of the adaptors to WildFly.", "bodyText": "This is the pull request for the changes we have been discussing recently regarding providing a Galleon feature pack from Keycloak to make it possible to install the Keycloak client adapters for OIDC using Galleon, this will also complement the work currently being undertaken to add support for the generation of bootable jars which is based on the provisioning of Galleon feature packs.\nhttps://issues.redhat.com/browse/KEYCLOAK-14953\nThe following analysis submission contains a number of examples showing how community users can make use of this against WildFly.\nwildfly/wildfly-proposals#330\nNote: The Galleon CLI and galleon-maven-plugin mentioned in the analysis are community only features.\nLocally I have been testing the use of the Galleon CLI against WildFly 19.0.0.Final, WildFly 20.0.0.Final and WildFly 20.0.1.Final so the feature pack produced by a Keycloak release is not tied to a single WildFly release so this doesn't introduce a need for lock stepping the releases.\nExample Project\nThe simplest way to test this new feature pack is to create a bootable jar, first the topic branch of this PR will need to be built as the example has a SNAPSHOT dependency.\nI have an installation of Keycloak running locally with the default ports i.e. localhost:8080 with the following added:\n\nA new realm called WildFly.\nA user in the WildFly realm granted the Users role.\nA client defined with the ID simple-webapp with a root URL of http://localhost:8090/simple-webapp/\n\nWithin the repository https://github.com/darranl/keycloak-experiments the project is called \"simplified-bootable-webapp\".\nThe project can be built with the command \"mvn package\", this will automatically provision a server in a jar with the Keycloak client adapter installed and enabled, it will then execute this CLI script to configure the client:\nhttps://github.com/darranl/keycloak-experiments/blob/master/simplified-bootable-webapp/configure-oidc.cli\nStart the server with the command:\njava -jar target/simple-webapp-bootable.jar -Djboss.socket.binding.port-offset=10\nNavigate to:\nhttp://localhost:8090/simple-webapp\nClicking \"Access Secured Servlet\" should then trigger the authentication process and redirect to Keycloak etc...\nDiscussion Points\nA couple of areas still need consideration but easier to see in the context of this PR.\n\n\nInitially @jfdenise called the new layer \"keycloak-elytron-oidc\", within Galleon layers we are making Elytron the preferred solution so I don't really want everything to end up with an \"elytron\" qualifier - I have renamed the layer \"keycloak-client-oidc\" but \"keycloak-adapter-oidc\" could make sense.  If anyone feels strongly now is the time to address that.\n\n\nThe examples in the analysis are using a fully qualified GAV to reference the feature pack.  There is an option to publish channels by adding a project equivalent to https://github.com/wildfly/wildfly-producers.  The producers project allows channels to be defined with version ranges.  As an example users of WildFly can specify the feature pack \"wildfly:current\" and they will always get the latest WildFly version.  Where community users use the Galleon CLI they can also use an update command to update their installation and the use of channels allows the versions to be constrained.\n\n\nThe use of producers to define channels is a community only feature and can be added later so I am just mentioning it here in case there is interest.", "createdAt": "2020-08-27T12:18:27Z", "url": "https://github.com/keycloak/keycloak/pull/7375", "merged": true, "mergeCommit": {"oid": "1bcb397a2f2355b7464b2944066633c4ab847e7a"}, "closed": true, "closedAt": "2020-09-18T06:27:26Z", "author": {"login": "darranl"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdC-87igH2gAyNDc0NjYxNjc4OjAzM2E5ZmI3ZDkxODBmYTViNWUyYWFhNjc4ZTQ0YmI4YmRlZmYyMTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHycX6gFqTQ4NjY3MzA5OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "033a9fb7d9180fa5b5e2aaa678e44bb8bdeff215", "author": {"user": {"login": "jfdenise", "name": "Jean-Fran\u00e7ois Denise "}}, "url": "https://github.com/keycloak/keycloak/commit/033a9fb7d9180fa5b5e2aaa678e44bb8bdeff215", "committedDate": "2020-08-27T11:45:45Z", "message": "[KEYCLOAK-14953] keycloak oidc/elytron adapter galleon-pack prototype"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3264a20f0441164654f543401f05771019d3a724", "author": {"user": {"login": "darranl", "name": "Darran Lofthouse"}}, "url": "https://github.com/keycloak/keycloak/commit/3264a20f0441164654f543401f05771019d3a724", "committedDate": "2020-08-27T11:46:40Z", "message": "[KEYCLOAK-14953] Additional updates to the new Galleon feature pack:\n - Adjust feature pack to depend on \"wildfly-galleon-pack\".\n - Declare dependency from \"keycloak-client-oidc\" on \"undertow\" and \"ee\" layers.\n - Update name of layer to \"keycloak-client-oidc\".\n - Update the producer to match the group and artifact ID of the maven artifact."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6922a2ce8e275c00a43bd478f37b4d1ff1f7bf1", "author": {"user": {"login": "darranl", "name": "Darran Lofthouse"}}, "url": "https://github.com/keycloak/keycloak/commit/c6922a2ce8e275c00a43bd478f37b4d1ff1f7bf1", "committedDate": "2020-08-27T16:22:01Z", "message": "[KEYCLOAK-14953] Make repository.jboss.org available for building the Galleon feature pack.\n\nUpdate the EAP versions to match the most recent release."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0ODQzMDUz", "url": "https://github.com/keycloak/keycloak/pull/7375#pullrequestreview-484843053", "createdAt": "2020-09-09T09:48:16Z", "commit": {"oid": "c6922a2ce8e275c00a43bd478f37b4d1ff1f7bf1"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQwOTo0ODoxNlrOHO_m1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQwOTo0ODo0MVrOHO_n3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTQ4NDI0NA==", "bodyText": "Version properties here should be aligned with already used properties in keycloak-parent pom.xml.\nI have sent PR to your product repo fork.", "url": "https://github.com/keycloak/keycloak/pull/7375#discussion_r485484244", "createdAt": "2020-09-09T09:48:16Z", "author": {"login": "pskopek"}, "path": "distribution/galleon-feature-packs/adapter-galleon-pack/pom.xml", "diffHunk": "@@ -0,0 +1,318 @@\n+<!--\n+~ Copyright 2016 Red Hat, Inc. and/or its affiliates\n+~ and other contributors as indicated by the @author tags.\n+~\n+~ Licensed under the Apache License, Version 2.0 (the \"License\");\n+~ you may not use this file except in compliance with the License.\n+~ You may obtain a copy of the License at\n+~\n+~ http://www.apache.org/licenses/LICENSE-2.0\n+~\n+~ Unless required by applicable law or agreed to in writing, software\n+~ distributed under the License is distributed on an \"AS IS\" BASIS,\n+~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+~ See the License for the specific language governing permissions and\n+~ limitations under the License.\n+-->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\n+    <parent>\n+        <groupId>org.keycloak</groupId>\n+        <artifactId>galleon-feature-packs-parent</artifactId>\n+        <version>12.0.0-SNAPSHOT</version>\n+    </parent>\n+\n+    <modelVersion>4.0.0</modelVersion>\n+    \n+    <groupId>${galleon-adapter-group-id}</groupId>\n+    <artifactId>keycloak-adapter-galleon-pack</artifactId>\n+\n+    <name>Keycloak Galleon Feature Pack: Adapter</name>\n+    <packaging>pom</packaging>\n+    \n+    <properties>\n+        <feature-pack.resources.directory>${basedir}/../../feature-packs/adapter-feature-pack/src/main/resources</feature-pack.resources.directory>\n+        <version.org.wildfly.galleon-plugins>4.2.6.Final</version.org.wildfly.galleon-plugins>\n+        <xmlFileSource>${feature-pack.resources.directory}/licenses/${product.slot}/licenses.xml</xmlFileSource>\n+        <outputDirectory>${basedir}/target/resources/packages/licenses/content/docs/licenses-${product.slot}</outputDirectory>\n+    </properties>\n+    <dependencies>\n+        <dependency>\n+            <groupId>org.keycloak</groupId>\n+            <artifactId>keycloak-core</artifactId>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>*</groupId>\n+                    <artifactId>*</artifactId>\n+                </exclusion>\n+            </exclusions>\n+            <scope>provided</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.keycloak</groupId>\n+            <artifactId>keycloak-common</artifactId>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>*</groupId>\n+                    <artifactId>*</artifactId>\n+                </exclusion>\n+            </exclusions>\n+            <scope>provided</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.keycloak</groupId>\n+            <artifactId>keycloak-adapter-core</artifactId>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>*</groupId>\n+                    <artifactId>*</artifactId>\n+                </exclusion>\n+            </exclusions>\n+            <scope>provided</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.keycloak</groupId>\n+            <artifactId>keycloak-jboss-adapter-core</artifactId>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>*</groupId>\n+                    <artifactId>*</artifactId>\n+                </exclusion>\n+            </exclusions>\n+            <scope>provided</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.keycloak</groupId>\n+            <artifactId>keycloak-wildfly-subsystem</artifactId>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>*</groupId>\n+                    <artifactId>*</artifactId>\n+                </exclusion>\n+            </exclusions>\n+            <scope>provided</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.keycloak</groupId>\n+            <artifactId>keycloak-wildfly-adapter</artifactId>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>*</groupId>\n+                    <artifactId>*</artifactId>\n+                </exclusion>\n+            </exclusions>\n+            <scope>provided</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.keycloak</groupId>\n+            <artifactId>keycloak-wildfly-elytron-oidc-adapter</artifactId>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>*</groupId>\n+                    <artifactId>*</artifactId>\n+                </exclusion>\n+            </exclusions>\n+            <scope>provided</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.keycloak</groupId>\n+            <artifactId>keycloak-adapter-spi</artifactId>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>*</groupId>\n+                    <artifactId>*</artifactId>\n+                </exclusion>\n+            </exclusions>\n+            <scope>provided</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.keycloak</groupId>\n+            <artifactId>keycloak-undertow-adapter-spi</artifactId>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>*</groupId>\n+                    <artifactId>*</artifactId>\n+                </exclusion>\n+            </exclusions>\n+            <scope>provided</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.keycloak</groupId>\n+            <artifactId>keycloak-undertow-adapter</artifactId>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>*</groupId>\n+                    <artifactId>*</artifactId>\n+                </exclusion>\n+            </exclusions>\n+            <scope>provided</scope>\n+        </dependency>\n+\n+        <!-- Authorization -->\n+        <dependency>\n+            <groupId>org.keycloak</groupId>\n+            <artifactId>keycloak-authz-client</artifactId>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>*</groupId>\n+                    <artifactId>*</artifactId>\n+                </exclusion>\n+            </exclusions>\n+            <scope>provided</scope>\n+        </dependency>\n+    </dependencies>\n+\n+\n+\n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-resources-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <id>copy-resources</id>\n+                        <phase>process-resources</phase>\n+                        <goals>\n+                            <goal>copy-resources</goal>\n+                        </goals>\n+                        <configuration>\n+                            <outputDirectory>${basedir}/target/resources</outputDirectory>\n+                            <resources>\n+                                <resource>\n+                                    <directory>${basedir}/src/main/resources</directory>\n+                                </resource>\n+                            </resources>\n+                        </configuration>\n+                    </execution>\n+                    <execution>\n+                        <id>copy-feature-pack-resources</id>\n+                        <phase>process-resources</phase>\n+                        <goals>\n+                            <goal>copy-resources</goal>\n+                        </goals>\n+                        <configuration>\n+                            <outputDirectory>${basedir}/target/resources</outputDirectory>\n+                            <resources>\n+                                <resource>\n+                                    <directory>${feature-pack.resources.directory}</directory>\n+                                    <includes>\n+                                        <include>content/**</include>\n+                                        <include>modules/**</include>\n+                                    </includes>\n+                                </resource>\n+                            </resources>\n+                        </configuration>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+            <plugin>\n+                <groupId>org.wildfly.galleon-plugins</groupId>\n+                <artifactId>wildfly-galleon-maven-plugin</artifactId>\n+                <version>${version.org.wildfly.galleon-plugins}</version>\n+                <dependencies>\n+                    <!--\n+                        feature-spec-gen uses wildfly-embedded to generate the feature specs, hence the designated\n+                        wildfly-embedded version must match the pack one\n+                    -->\n+                    <dependency>\n+                        <groupId>org.wildfly.core</groupId>\n+                        <artifactId>wildfly-embedded</artifactId>\n+                        <version>${version.org.wildfly.core}</version>\n+                    </dependency>\n+                    <!-- If you add a dependency on wildfly-embedded you need to bring your own transitives -->\n+                    <dependency>\n+                        <groupId>org.wildfly.common</groupId>\n+                        <artifactId>wildfly-common</artifactId>\n+                        <version>${version.org.wildfly.common}</version>\n+                    </dependency>\n+                </dependencies>\n+                <executions>\n+                    <execution>\n+                        <id>keycloak-adapter-galleon-pack-build</id>\n+                        <goals>\n+                            <goal>build-feature-pack</goal>\n+                        </goals>\n+                        <phase>compile</phase>\n+                        <configuration>\n+                            <fork-embedded>false</fork-embedded>\n+                        </configuration>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+            <plugin>\n+                <groupId>org.keycloak</groupId>\n+                <artifactId>keycloak-distribution-licenses-maven-plugin</artifactId>\n+            </plugin>\n+        </plugins>\n+    </build>\n+\n+    <profiles>\n+        <profile>\n+            <id>community</id>\n+            <activation>\n+                <property>\n+                    <name>!product</name>\n+                </property>\n+            </activation>\n+            <properties>\n+                <galleon-adapter-group-id>org.keycloak</galleon-adapter-group-id>\n+                <version.org.wildfly>20.0.0.Final</version.org.wildfly>\n+                <version.org.wildfly.core>12.0.1.Final</version.org.wildfly.core>\n+                <version.org.wildfly.common>1.5.4.Final</version.org.wildfly.common>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c6922a2ce8e275c00a43bd478f37b4d1ff1f7bf1"}, "originalPosition": 262}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTQ4NDUwOQ==", "bodyText": "The same applies here.", "url": "https://github.com/keycloak/keycloak/pull/7375#discussion_r485484509", "createdAt": "2020-09-09T09:48:41Z", "author": {"login": "pskopek"}, "path": "distribution/galleon-feature-packs/adapter-galleon-pack/pom.xml", "diffHunk": "@@ -0,0 +1,318 @@\n+<!--\n+~ Copyright 2016 Red Hat, Inc. and/or its affiliates\n+~ and other contributors as indicated by the @author tags.\n+~\n+~ Licensed under the Apache License, Version 2.0 (the \"License\");\n+~ you may not use this file except in compliance with the License.\n+~ You may obtain a copy of the License at\n+~\n+~ http://www.apache.org/licenses/LICENSE-2.0\n+~\n+~ Unless required by applicable law or agreed to in writing, software\n+~ distributed under the License is distributed on an \"AS IS\" BASIS,\n+~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+~ See the License for the specific language governing permissions and\n+~ limitations under the License.\n+-->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\n+    <parent>\n+        <groupId>org.keycloak</groupId>\n+        <artifactId>galleon-feature-packs-parent</artifactId>\n+        <version>12.0.0-SNAPSHOT</version>\n+    </parent>\n+\n+    <modelVersion>4.0.0</modelVersion>\n+    \n+    <groupId>${galleon-adapter-group-id}</groupId>\n+    <artifactId>keycloak-adapter-galleon-pack</artifactId>\n+\n+    <name>Keycloak Galleon Feature Pack: Adapter</name>\n+    <packaging>pom</packaging>\n+    \n+    <properties>\n+        <feature-pack.resources.directory>${basedir}/../../feature-packs/adapter-feature-pack/src/main/resources</feature-pack.resources.directory>\n+        <version.org.wildfly.galleon-plugins>4.2.6.Final</version.org.wildfly.galleon-plugins>\n+        <xmlFileSource>${feature-pack.resources.directory}/licenses/${product.slot}/licenses.xml</xmlFileSource>\n+        <outputDirectory>${basedir}/target/resources/packages/licenses/content/docs/licenses-${product.slot}</outputDirectory>\n+    </properties>\n+    <dependencies>\n+        <dependency>\n+            <groupId>org.keycloak</groupId>\n+            <artifactId>keycloak-core</artifactId>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>*</groupId>\n+                    <artifactId>*</artifactId>\n+                </exclusion>\n+            </exclusions>\n+            <scope>provided</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.keycloak</groupId>\n+            <artifactId>keycloak-common</artifactId>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>*</groupId>\n+                    <artifactId>*</artifactId>\n+                </exclusion>\n+            </exclusions>\n+            <scope>provided</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.keycloak</groupId>\n+            <artifactId>keycloak-adapter-core</artifactId>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>*</groupId>\n+                    <artifactId>*</artifactId>\n+                </exclusion>\n+            </exclusions>\n+            <scope>provided</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.keycloak</groupId>\n+            <artifactId>keycloak-jboss-adapter-core</artifactId>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>*</groupId>\n+                    <artifactId>*</artifactId>\n+                </exclusion>\n+            </exclusions>\n+            <scope>provided</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.keycloak</groupId>\n+            <artifactId>keycloak-wildfly-subsystem</artifactId>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>*</groupId>\n+                    <artifactId>*</artifactId>\n+                </exclusion>\n+            </exclusions>\n+            <scope>provided</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.keycloak</groupId>\n+            <artifactId>keycloak-wildfly-adapter</artifactId>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>*</groupId>\n+                    <artifactId>*</artifactId>\n+                </exclusion>\n+            </exclusions>\n+            <scope>provided</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.keycloak</groupId>\n+            <artifactId>keycloak-wildfly-elytron-oidc-adapter</artifactId>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>*</groupId>\n+                    <artifactId>*</artifactId>\n+                </exclusion>\n+            </exclusions>\n+            <scope>provided</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.keycloak</groupId>\n+            <artifactId>keycloak-adapter-spi</artifactId>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>*</groupId>\n+                    <artifactId>*</artifactId>\n+                </exclusion>\n+            </exclusions>\n+            <scope>provided</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.keycloak</groupId>\n+            <artifactId>keycloak-undertow-adapter-spi</artifactId>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>*</groupId>\n+                    <artifactId>*</artifactId>\n+                </exclusion>\n+            </exclusions>\n+            <scope>provided</scope>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.keycloak</groupId>\n+            <artifactId>keycloak-undertow-adapter</artifactId>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>*</groupId>\n+                    <artifactId>*</artifactId>\n+                </exclusion>\n+            </exclusions>\n+            <scope>provided</scope>\n+        </dependency>\n+\n+        <!-- Authorization -->\n+        <dependency>\n+            <groupId>org.keycloak</groupId>\n+            <artifactId>keycloak-authz-client</artifactId>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>*</groupId>\n+                    <artifactId>*</artifactId>\n+                </exclusion>\n+            </exclusions>\n+            <scope>provided</scope>\n+        </dependency>\n+    </dependencies>\n+\n+\n+\n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-resources-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <id>copy-resources</id>\n+                        <phase>process-resources</phase>\n+                        <goals>\n+                            <goal>copy-resources</goal>\n+                        </goals>\n+                        <configuration>\n+                            <outputDirectory>${basedir}/target/resources</outputDirectory>\n+                            <resources>\n+                                <resource>\n+                                    <directory>${basedir}/src/main/resources</directory>\n+                                </resource>\n+                            </resources>\n+                        </configuration>\n+                    </execution>\n+                    <execution>\n+                        <id>copy-feature-pack-resources</id>\n+                        <phase>process-resources</phase>\n+                        <goals>\n+                            <goal>copy-resources</goal>\n+                        </goals>\n+                        <configuration>\n+                            <outputDirectory>${basedir}/target/resources</outputDirectory>\n+                            <resources>\n+                                <resource>\n+                                    <directory>${feature-pack.resources.directory}</directory>\n+                                    <includes>\n+                                        <include>content/**</include>\n+                                        <include>modules/**</include>\n+                                    </includes>\n+                                </resource>\n+                            </resources>\n+                        </configuration>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+            <plugin>\n+                <groupId>org.wildfly.galleon-plugins</groupId>\n+                <artifactId>wildfly-galleon-maven-plugin</artifactId>\n+                <version>${version.org.wildfly.galleon-plugins}</version>\n+                <dependencies>\n+                    <!--\n+                        feature-spec-gen uses wildfly-embedded to generate the feature specs, hence the designated\n+                        wildfly-embedded version must match the pack one\n+                    -->\n+                    <dependency>\n+                        <groupId>org.wildfly.core</groupId>\n+                        <artifactId>wildfly-embedded</artifactId>\n+                        <version>${version.org.wildfly.core}</version>\n+                    </dependency>\n+                    <!-- If you add a dependency on wildfly-embedded you need to bring your own transitives -->\n+                    <dependency>\n+                        <groupId>org.wildfly.common</groupId>\n+                        <artifactId>wildfly-common</artifactId>\n+                        <version>${version.org.wildfly.common}</version>\n+                    </dependency>\n+                </dependencies>\n+                <executions>\n+                    <execution>\n+                        <id>keycloak-adapter-galleon-pack-build</id>\n+                        <goals>\n+                            <goal>build-feature-pack</goal>\n+                        </goals>\n+                        <phase>compile</phase>\n+                        <configuration>\n+                            <fork-embedded>false</fork-embedded>\n+                        </configuration>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+            <plugin>\n+                <groupId>org.keycloak</groupId>\n+                <artifactId>keycloak-distribution-licenses-maven-plugin</artifactId>\n+            </plugin>\n+        </plugins>\n+    </build>\n+\n+    <profiles>\n+        <profile>\n+            <id>community</id>\n+            <activation>\n+                <property>\n+                    <name>!product</name>\n+                </property>\n+            </activation>\n+            <properties>\n+                <galleon-adapter-group-id>org.keycloak</galleon-adapter-group-id>\n+                <version.org.wildfly>20.0.0.Final</version.org.wildfly>\n+                <version.org.wildfly.core>12.0.1.Final</version.org.wildfly.core>\n+                <version.org.wildfly.common>1.5.4.Final</version.org.wildfly.common>\n+            </properties>\n+            <repositories>\n+                <repository>\n+                    <id>jboss</id>\n+                    <url>https://repository.jboss.org/nexus/content/groups/public/</url>\n+                    <snapshots>\n+                        <enabled>false</enabled>\n+                    </snapshots>\n+                </repository>\n+            </repositories>\n+            <dependencies>\n+                <dependency>\n+                    <groupId>org.wildfly</groupId>\n+                    <artifactId>wildfly-galleon-pack</artifactId>\n+                    <version>${version.org.wildfly}</version>\n+                    <type>zip</type>\n+                    <scope>provided</scope>\n+                </dependency>\n+            </dependencies>\n+        </profile>\n+        <profile>\n+            <id>product</id>\n+            <activation>\n+                <property>\n+                    <name>product</name>\n+                </property>\n+            </activation>\n+            <properties>\n+                <galleon-adapter-group-id>org.jboss.sso</galleon-adapter-group-id>\n+                <version.org.jboss.eap>7.3.2.GA-redhat-00002</version.org.jboss.eap>\n+                <version.org.wildfly.core>10.1.11.Final-redhat-00001</version.org.wildfly.core>\n+                <version.org.wildfly.common>1.5.2.Final-redhat-00002</version.org.wildfly.common>\n+            </properties>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c6922a2ce8e275c00a43bd478f37b4d1ff1f7bf1"}, "originalPosition": 295}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "930db4ed2dfb55f94c38fa100fa675d0268b30ab", "author": {"user": {"login": "pskopek", "name": "Peter Skopek"}}, "url": "https://github.com/keycloak/keycloak/commit/930db4ed2dfb55f94c38fa100fa675d0268b30ab", "committedDate": "2020-09-09T16:14:36Z", "message": "KEYCLOAK-14953 Unify wildfly component versions related properties already used in keycloak."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1NjQxODc3", "url": "https://github.com/keycloak/keycloak/pull/7375#pullrequestreview-485641877", "createdAt": "2020-09-10T07:12:11Z", "commit": {"oid": "930db4ed2dfb55f94c38fa100fa675d0268b30ab"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NjczMDk5", "url": "https://github.com/keycloak/keycloak/pull/7375#pullrequestreview-486673099", "createdAt": "2020-09-11T10:00:58Z", "commit": {"oid": "930db4ed2dfb55f94c38fa100fa675d0268b30ab"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2777, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}