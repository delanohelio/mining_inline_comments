{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU5MTQxNTM3", "number": 7305, "title": "KEYCLOAK-14811 KEYCLOAK-14812 RoleProvider, RoleStorageManager", "bodyText": "", "createdAt": "2020-07-30T12:44:32Z", "url": "https://github.com/keycloak/keycloak/pull/7305", "merged": true, "mergeCommit": {"oid": "6b00633c47cba2b7bb823b01226e54f3cf28b2db"}, "closed": true, "closedAt": "2020-07-31T18:11:27Z", "author": {"login": "vramik"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5_952AFqTQ1ODM5MzE1Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc6YSOVgFqTQ1OTM2NzE4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4MzkzMTU3", "url": "https://github.com/keycloak/keycloak/pull/7305#pullrequestreview-458393157", "createdAt": "2020-07-30T13:21:02Z", "commit": {"oid": "949396acc6b1cd44a6d6c7f858273c5fb95e5498"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMzoyMTowM1rOG5itig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMFQxMzoyMjo1OFrOG5iyYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjk5MDczMA==", "bodyText": "This method doesn't exist in RoleProvider interface.", "url": "https://github.com/keycloak/keycloak/pull/7305#discussion_r462990730", "createdAt": "2020-07-30T13:21:03Z", "author": {"login": "mhajas"}, "path": "services/src/main/java/org/keycloak/storage/RoleStorageManager.java", "diffHunk": "@@ -0,0 +1,239 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates\n+ * and other contributors as indicated by the @author tags.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.keycloak.storage;\n+\n+import java.util.LinkedList;\n+import java.util.List;\n+import java.util.stream.Stream;\n+import org.jboss.logging.Logger;\n+import org.keycloak.common.util.reflections.Types;\n+import org.keycloak.component.ComponentModel;\n+import org.keycloak.models.ClientModel;\n+import org.keycloak.models.KeycloakSession;\n+import org.keycloak.models.ModelException;\n+import org.keycloak.models.RealmModel;\n+import org.keycloak.models.RoleModel;\n+import org.keycloak.models.RoleProvider;\n+import org.keycloak.storage.role.RoleLookupProvider;\n+import org.keycloak.storage.role.RoleStorageProvider;\n+import org.keycloak.storage.role.RoleStorageProviderFactory;\n+import org.keycloak.storage.role.RoleStorageProviderModel;\n+import org.keycloak.utils.ServicesUtils;\n+\n+public class RoleStorageManager implements RoleProvider {\n+    private static final Logger logger = Logger.getLogger(RoleStorageManager.class);\n+\n+    protected KeycloakSession session;\n+\n+    private final long roleStorageProviderTimeout;\n+\n+    public RoleStorageManager(KeycloakSession session, long roleStorageProviderTimeout) {\n+        this.session = session;\n+        this.roleStorageProviderTimeout = roleStorageProviderTimeout;\n+    }\n+\n+    public static boolean isStorageProviderEnabled(RealmModel realm, String providerId) {\n+        RoleStorageProviderModel model = getStorageProviderModel(realm, providerId);\n+        return model.isEnabled();\n+    }\n+\n+    public static RoleStorageProviderModel getStorageProviderModel(RealmModel realm, String componentId) {\n+        ComponentModel model = realm.getComponent(componentId);\n+        if (model == null) return null;\n+        return new RoleStorageProviderModel(model);\n+    }\n+\n+    public static RoleStorageProvider getStorageProvider(KeycloakSession session, RealmModel realm, String componentId) {\n+        ComponentModel model = realm.getComponent(componentId);\n+        if (model == null) return null;\n+        RoleStorageProviderModel storageModel = new RoleStorageProviderModel(model);\n+        RoleStorageProviderFactory factory = (RoleStorageProviderFactory)session.getKeycloakSessionFactory().getProviderFactory(RoleStorageProvider.class, model.getProviderId());\n+        if (factory == null) {\n+            throw new ModelException(\"Could not find RoletStorageProviderFactory for: \" + model.getProviderId());\n+        }\n+        return getStorageProviderInstance(session, storageModel, factory);\n+    }\n+\n+\n+    public static List<RoleStorageProviderModel> getStorageProviders(RealmModel realm) {\n+        return realm.getRoleStorageProviders();\n+    }\n+\n+    public static RoleStorageProvider getStorageProviderInstance(KeycloakSession session, RoleStorageProviderModel model, RoleStorageProviderFactory factory) {\n+        RoleStorageProvider instance = (RoleStorageProvider)session.getAttribute(model.getId());\n+        if (instance != null) return instance;\n+        instance = factory.create(session, model);\n+        if (instance == null) {\n+            throw new IllegalStateException(\"RoleStorageProvideFactory (of type \" + factory.getClass().getName() + \") produced a null instance\");\n+        }\n+        session.enlistForClose(instance);\n+        session.setAttribute(model.getId(), instance);\n+        return instance;\n+    }\n+\n+\n+    public static <T> List<T> getStorageProviders(KeycloakSession session, RealmModel realm, Class<T> type) {\n+        List<T> list = new LinkedList<>();\n+        for (RoleStorageProviderModel model : getStorageProviders(realm)) {\n+            RoleStorageProviderFactory factory = (RoleStorageProviderFactory) session.getKeycloakSessionFactory().getProviderFactory(RoleStorageProvider.class, model.getProviderId());\n+            if (factory == null) {\n+                logger.warnv(\"Configured RoleStorageProvider {0} of provider id {1} does not exist in realm {2}\", model.getName(), model.getProviderId(), realm.getName());\n+                continue;\n+            }\n+            if (Types.supports(type, factory, RoleStorageProviderFactory.class)) {\n+                list.add(type.cast(getStorageProviderInstance(session, model, factory)));\n+            }\n+\n+\n+        }\n+        return list;\n+    }\n+\n+\n+    public static <T> List<T> getEnabledStorageProviders(KeycloakSession session, RealmModel realm, Class<T> type) {\n+        List<T> list = new LinkedList<>();\n+        for (RoleStorageProviderModel model : getStorageProviders(realm)) {\n+            if (!model.isEnabled()) continue;\n+            RoleStorageProviderFactory factory = (RoleStorageProviderFactory) session.getKeycloakSessionFactory().getProviderFactory(RoleStorageProvider.class, model.getProviderId());\n+            if (factory == null) {\n+                logger.warnv(\"Configured RoleStorageProvider {0} of provider id {1} does not exist in realm {2}\", model.getName(), model.getProviderId(), realm.getName());\n+                continue;\n+            }\n+            if (Types.supports(type, factory, RoleStorageProviderFactory.class)) {\n+                list.add(type.cast(getStorageProviderInstance(session, model, factory)));\n+            }\n+        }\n+        return list;\n+    }\n+\n+    @Override\n+    public RoleModel addRealmRole(RealmModel realm, String name) {\n+        return session.roleLocalStorage().addRealmRole(realm, name);\n+    }\n+\n+    @Override\n+    public RoleModel addRealmRole(RealmModel realm, String id, String name) {\n+        return session.roleLocalStorage().addRealmRole(realm, id, name);\n+    }\n+\n+    @Override\n+    public RoleModel getRealmRole(RealmModel realm, String name) {\n+        RoleModel realmRole = session.roleLocalStorage().getRealmRole(realm, name);\n+        if (realmRole != null) return realmRole;\n+        for (RoleLookupProvider enabledStorageProvider : getEnabledStorageProviders(session, realm, RoleLookupProvider.class)) {\n+            realmRole = enabledStorageProvider.getRealmRole(realm, name);\n+            if (realmRole != null) return realmRole;\n+        }\n+        return null;\n+    }\n+\n+    @Override\n+    public RoleModel getRoleById(RealmModel realm, String id) {\n+        StorageId storageId = new StorageId(id);\n+        if (storageId.getProviderId() == null) {\n+            return session.roleLocalStorage().getRoleById(realm, id);\n+        }\n+        RoleLookupProvider provider = (RoleLookupProvider)getStorageProvider(session, realm, storageId.getProviderId());\n+        if (provider == null) return null;\n+        if (! isStorageProviderEnabled(realm, storageId.getProviderId())) return null;\n+        return provider.getRoleById(realm, id);\n+    }\n+\n+    @Override\n+    public Stream<RoleModel> getRealmRolesStream(RealmModel realm, Integer first, Integer max) {\n+        return session.roleLocalStorage().getRealmRolesStream(realm, first, max);\n+    }\n+\n+    /**\n+     * Obtaining roles from an external role storage is time-bounded. In case the external role storage\n+     * isn't available at least roles from a local storage are returned. For this purpose\n+     * the {@link org.keycloak.services.DefaultKeycloakSessionFactory#getRoleStorageProviderTimeout()} property is used.\n+     * Default value is 3000 milliseconds and it's configurable.\n+     * See {@link org.keycloak.services.DefaultKeycloakSessionFactory} for details.\n+     */\n+    @Override\n+    public Stream<RoleModel> searchForRolesStream(RealmModel realm, String search, Integer first, Integer max) {\n+        Stream<RoleModel> local = session.roleLocalStorage().searchForRolesStream(realm, search, first, max);\n+        Stream<RoleModel> ext = getEnabledStorageProviders(session, realm, RoleLookupProvider.class).stream()\n+                .flatMap(ServicesUtils.timeBound(session,\n+                        roleStorageProviderTimeout,\n+                        p -> ((RoleLookupProvider) p).searchForRolesStream(realm, search, first, max)));\n+\n+        return Stream.concat(local, ext);\n+    }\n+\n+    @Override", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "949396acc6b1cd44a6d6c7f858273c5fb95e5498"}, "originalPosition": 179}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjk5MDk1Mg==", "bodyText": "We should use removeRole(role).", "url": "https://github.com/keycloak/keycloak/pull/7305#discussion_r462990952", "createdAt": "2020-07-30T13:21:24Z", "author": {"login": "mhajas"}, "path": "services/src/main/java/org/keycloak/storage/RoleStorageManager.java", "diffHunk": "@@ -0,0 +1,239 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates\n+ * and other contributors as indicated by the @author tags.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.keycloak.storage;\n+\n+import java.util.LinkedList;\n+import java.util.List;\n+import java.util.stream.Stream;\n+import org.jboss.logging.Logger;\n+import org.keycloak.common.util.reflections.Types;\n+import org.keycloak.component.ComponentModel;\n+import org.keycloak.models.ClientModel;\n+import org.keycloak.models.KeycloakSession;\n+import org.keycloak.models.ModelException;\n+import org.keycloak.models.RealmModel;\n+import org.keycloak.models.RoleModel;\n+import org.keycloak.models.RoleProvider;\n+import org.keycloak.storage.role.RoleLookupProvider;\n+import org.keycloak.storage.role.RoleStorageProvider;\n+import org.keycloak.storage.role.RoleStorageProviderFactory;\n+import org.keycloak.storage.role.RoleStorageProviderModel;\n+import org.keycloak.utils.ServicesUtils;\n+\n+public class RoleStorageManager implements RoleProvider {\n+    private static final Logger logger = Logger.getLogger(RoleStorageManager.class);\n+\n+    protected KeycloakSession session;\n+\n+    private final long roleStorageProviderTimeout;\n+\n+    public RoleStorageManager(KeycloakSession session, long roleStorageProviderTimeout) {\n+        this.session = session;\n+        this.roleStorageProviderTimeout = roleStorageProviderTimeout;\n+    }\n+\n+    public static boolean isStorageProviderEnabled(RealmModel realm, String providerId) {\n+        RoleStorageProviderModel model = getStorageProviderModel(realm, providerId);\n+        return model.isEnabled();\n+    }\n+\n+    public static RoleStorageProviderModel getStorageProviderModel(RealmModel realm, String componentId) {\n+        ComponentModel model = realm.getComponent(componentId);\n+        if (model == null) return null;\n+        return new RoleStorageProviderModel(model);\n+    }\n+\n+    public static RoleStorageProvider getStorageProvider(KeycloakSession session, RealmModel realm, String componentId) {\n+        ComponentModel model = realm.getComponent(componentId);\n+        if (model == null) return null;\n+        RoleStorageProviderModel storageModel = new RoleStorageProviderModel(model);\n+        RoleStorageProviderFactory factory = (RoleStorageProviderFactory)session.getKeycloakSessionFactory().getProviderFactory(RoleStorageProvider.class, model.getProviderId());\n+        if (factory == null) {\n+            throw new ModelException(\"Could not find RoletStorageProviderFactory for: \" + model.getProviderId());\n+        }\n+        return getStorageProviderInstance(session, storageModel, factory);\n+    }\n+\n+\n+    public static List<RoleStorageProviderModel> getStorageProviders(RealmModel realm) {\n+        return realm.getRoleStorageProviders();\n+    }\n+\n+    public static RoleStorageProvider getStorageProviderInstance(KeycloakSession session, RoleStorageProviderModel model, RoleStorageProviderFactory factory) {\n+        RoleStorageProvider instance = (RoleStorageProvider)session.getAttribute(model.getId());\n+        if (instance != null) return instance;\n+        instance = factory.create(session, model);\n+        if (instance == null) {\n+            throw new IllegalStateException(\"RoleStorageProvideFactory (of type \" + factory.getClass().getName() + \") produced a null instance\");\n+        }\n+        session.enlistForClose(instance);\n+        session.setAttribute(model.getId(), instance);\n+        return instance;\n+    }\n+\n+\n+    public static <T> List<T> getStorageProviders(KeycloakSession session, RealmModel realm, Class<T> type) {\n+        List<T> list = new LinkedList<>();\n+        for (RoleStorageProviderModel model : getStorageProviders(realm)) {\n+            RoleStorageProviderFactory factory = (RoleStorageProviderFactory) session.getKeycloakSessionFactory().getProviderFactory(RoleStorageProvider.class, model.getProviderId());\n+            if (factory == null) {\n+                logger.warnv(\"Configured RoleStorageProvider {0} of provider id {1} does not exist in realm {2}\", model.getName(), model.getProviderId(), realm.getName());\n+                continue;\n+            }\n+            if (Types.supports(type, factory, RoleStorageProviderFactory.class)) {\n+                list.add(type.cast(getStorageProviderInstance(session, model, factory)));\n+            }\n+\n+\n+        }\n+        return list;\n+    }\n+\n+\n+    public static <T> List<T> getEnabledStorageProviders(KeycloakSession session, RealmModel realm, Class<T> type) {\n+        List<T> list = new LinkedList<>();\n+        for (RoleStorageProviderModel model : getStorageProviders(realm)) {\n+            if (!model.isEnabled()) continue;\n+            RoleStorageProviderFactory factory = (RoleStorageProviderFactory) session.getKeycloakSessionFactory().getProviderFactory(RoleStorageProvider.class, model.getProviderId());\n+            if (factory == null) {\n+                logger.warnv(\"Configured RoleStorageProvider {0} of provider id {1} does not exist in realm {2}\", model.getName(), model.getProviderId(), realm.getName());\n+                continue;\n+            }\n+            if (Types.supports(type, factory, RoleStorageProviderFactory.class)) {\n+                list.add(type.cast(getStorageProviderInstance(session, model, factory)));\n+            }\n+        }\n+        return list;\n+    }\n+\n+    @Override\n+    public RoleModel addRealmRole(RealmModel realm, String name) {\n+        return session.roleLocalStorage().addRealmRole(realm, name);\n+    }\n+\n+    @Override\n+    public RoleModel addRealmRole(RealmModel realm, String id, String name) {\n+        return session.roleLocalStorage().addRealmRole(realm, id, name);\n+    }\n+\n+    @Override\n+    public RoleModel getRealmRole(RealmModel realm, String name) {\n+        RoleModel realmRole = session.roleLocalStorage().getRealmRole(realm, name);\n+        if (realmRole != null) return realmRole;\n+        for (RoleLookupProvider enabledStorageProvider : getEnabledStorageProviders(session, realm, RoleLookupProvider.class)) {\n+            realmRole = enabledStorageProvider.getRealmRole(realm, name);\n+            if (realmRole != null) return realmRole;\n+        }\n+        return null;\n+    }\n+\n+    @Override\n+    public RoleModel getRoleById(RealmModel realm, String id) {\n+        StorageId storageId = new StorageId(id);\n+        if (storageId.getProviderId() == null) {\n+            return session.roleLocalStorage().getRoleById(realm, id);\n+        }\n+        RoleLookupProvider provider = (RoleLookupProvider)getStorageProvider(session, realm, storageId.getProviderId());\n+        if (provider == null) return null;\n+        if (! isStorageProviderEnabled(realm, storageId.getProviderId())) return null;\n+        return provider.getRoleById(realm, id);\n+    }\n+\n+    @Override\n+    public Stream<RoleModel> getRealmRolesStream(RealmModel realm, Integer first, Integer max) {\n+        return session.roleLocalStorage().getRealmRolesStream(realm, first, max);\n+    }\n+\n+    /**\n+     * Obtaining roles from an external role storage is time-bounded. In case the external role storage\n+     * isn't available at least roles from a local storage are returned. For this purpose\n+     * the {@link org.keycloak.services.DefaultKeycloakSessionFactory#getRoleStorageProviderTimeout()} property is used.\n+     * Default value is 3000 milliseconds and it's configurable.\n+     * See {@link org.keycloak.services.DefaultKeycloakSessionFactory} for details.\n+     */\n+    @Override\n+    public Stream<RoleModel> searchForRolesStream(RealmModel realm, String search, Integer first, Integer max) {\n+        Stream<RoleModel> local = session.roleLocalStorage().searchForRolesStream(realm, search, first, max);\n+        Stream<RoleModel> ext = getEnabledStorageProviders(session, realm, RoleLookupProvider.class).stream()\n+                .flatMap(ServicesUtils.timeBound(session,\n+                        roleStorageProviderTimeout,\n+                        p -> ((RoleLookupProvider) p).searchForRolesStream(realm, search, first, max)));\n+\n+        return Stream.concat(local, ext);\n+    }\n+\n+    @Override\n+    public boolean removeRole(RealmModel realm, RoleModel role) {\n+        if (!StorageId.isLocalStorage(role.getId())) {\n+            throw new RuntimeException(\"Federated roles do not support this operation\");\n+        }\n+        return session.roleLocalStorage().removeRole(realm, role);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "949396acc6b1cd44a6d6c7f858273c5fb95e5498"}, "originalPosition": 184}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjk5MTk2OA==", "bodyText": "This class doesn't implement methods removeRoles(realm/client).", "url": "https://github.com/keycloak/keycloak/pull/7305#discussion_r462991968", "createdAt": "2020-07-30T13:22:58Z", "author": {"login": "mhajas"}, "path": "services/src/main/java/org/keycloak/storage/RoleStorageManager.java", "diffHunk": "@@ -0,0 +1,239 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates\n+ * and other contributors as indicated by the @author tags.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.keycloak.storage;\n+\n+import java.util.LinkedList;\n+import java.util.List;\n+import java.util.stream.Stream;\n+import org.jboss.logging.Logger;\n+import org.keycloak.common.util.reflections.Types;\n+import org.keycloak.component.ComponentModel;\n+import org.keycloak.models.ClientModel;\n+import org.keycloak.models.KeycloakSession;\n+import org.keycloak.models.ModelException;\n+import org.keycloak.models.RealmModel;\n+import org.keycloak.models.RoleModel;\n+import org.keycloak.models.RoleProvider;\n+import org.keycloak.storage.role.RoleLookupProvider;\n+import org.keycloak.storage.role.RoleStorageProvider;\n+import org.keycloak.storage.role.RoleStorageProviderFactory;\n+import org.keycloak.storage.role.RoleStorageProviderModel;\n+import org.keycloak.utils.ServicesUtils;\n+\n+public class RoleStorageManager implements RoleProvider {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "949396acc6b1cd44a6d6c7f858273c5fb95e5498"}, "originalPosition": 37}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "949396acc6b1cd44a6d6c7f858273c5fb95e5498", "author": {"user": {"login": "vramik", "name": "Vlasta Ramik"}}, "url": "https://github.com/keycloak/keycloak/commit/949396acc6b1cd44a6d6c7f858273c5fb95e5498", "committedDate": "2020-07-30T12:33:35Z", "message": "KEYCLOAK-14812 Create RoleStorageManager"}, "afterCommit": {"oid": "8b35d72ca5b9f70ebdb0b664d9a3552616ed66a9", "author": {"user": {"login": "vramik", "name": "Vlasta Ramik"}}, "url": "https://github.com/keycloak/keycloak/commit/8b35d72ca5b9f70ebdb0b664d9a3552616ed66a9", "committedDate": "2020-07-30T12:38:20Z", "message": "KEYCLOAK-14812 Create RoleStorageManager"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4411c1050a2382207fab950aed3979ef02976ab1", "author": {"user": {"login": "vramik", "name": "Vlasta Ramik"}}, "url": "https://github.com/keycloak/keycloak/commit/4411c1050a2382207fab950aed3979ef02976ab1", "committedDate": "2020-07-30T18:01:28Z", "message": "KEYCLOAK-14811 Create RoleProvider and make it independent of ClientProvider and RealmProvider"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8b35d72ca5b9f70ebdb0b664d9a3552616ed66a9", "author": {"user": {"login": "vramik", "name": "Vlasta Ramik"}}, "url": "https://github.com/keycloak/keycloak/commit/8b35d72ca5b9f70ebdb0b664d9a3552616ed66a9", "committedDate": "2020-07-30T12:38:20Z", "message": "KEYCLOAK-14812 Create RoleStorageManager"}, "afterCommit": {"oid": "91c0d257a359ef74864d303ec4735238a0410e69", "author": {"user": {"login": "vramik", "name": "Vlasta Ramik"}}, "url": "https://github.com/keycloak/keycloak/commit/91c0d257a359ef74864d303ec4735238a0410e69", "committedDate": "2020-07-30T18:01:28Z", "message": "KEYCLOAK-14812 Create RoleStorageManager"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MDE3MzQ0", "url": "https://github.com/keycloak/keycloak/pull/7305#pullrequestreview-459017344", "createdAt": "2020-07-31T08:52:26Z", "commit": {"oid": "91c0d257a359ef74864d303ec4735238a0410e69"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MTQzODEz", "url": "https://github.com/keycloak/keycloak/pull/7305#pullrequestreview-459143813", "createdAt": "2020-07-31T12:43:56Z", "commit": {"oid": "91c0d257a359ef74864d303ec4735238a0410e69"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MTQzOTA3", "url": "https://github.com/keycloak/keycloak/pull/7305#pullrequestreview-459143907", "createdAt": "2020-07-31T12:44:05Z", "commit": {"oid": "91c0d257a359ef74864d303ec4735238a0410e69"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MTczNTY1", "url": "https://github.com/keycloak/keycloak/pull/7305#pullrequestreview-459173565", "createdAt": "2020-07-31T13:29:11Z", "commit": {"oid": "91c0d257a359ef74864d303ec4735238a0410e69"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e27dafc6d931aea37701740864b2eba147fec5c4", "author": {"user": {"login": "vramik", "name": "Vlasta Ramik"}}, "url": "https://github.com/keycloak/keycloak/commit/e27dafc6d931aea37701740864b2eba147fec5c4", "committedDate": "2020-07-31T15:15:28Z", "message": "KEYCLOAK-14812 Create RoleStorageManager"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "91c0d257a359ef74864d303ec4735238a0410e69", "author": {"user": {"login": "vramik", "name": "Vlasta Ramik"}}, "url": "https://github.com/keycloak/keycloak/commit/91c0d257a359ef74864d303ec4735238a0410e69", "committedDate": "2020-07-30T18:01:28Z", "message": "KEYCLOAK-14812 Create RoleStorageManager"}, "afterCommit": {"oid": "e27dafc6d931aea37701740864b2eba147fec5c4", "author": {"user": {"login": "vramik", "name": "Vlasta Ramik"}}, "url": "https://github.com/keycloak/keycloak/commit/e27dafc6d931aea37701740864b2eba147fec5c4", "committedDate": "2020-07-31T15:15:28Z", "message": "KEYCLOAK-14812 Create RoleStorageManager"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MjcwNDIx", "url": "https://github.com/keycloak/keycloak/pull/7305#pullrequestreview-459270421", "createdAt": "2020-07-31T15:36:46Z", "commit": {"oid": "e27dafc6d931aea37701740864b2eba147fec5c4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MzM1NzUx", "url": "https://github.com/keycloak/keycloak/pull/7305#pullrequestreview-459335751", "createdAt": "2020-07-31T17:19:48Z", "commit": {"oid": "e27dafc6d931aea37701740864b2eba147fec5c4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MzY3MTg1", "url": "https://github.com/keycloak/keycloak/pull/7305#pullrequestreview-459367185", "createdAt": "2020-07-31T18:11:19Z", "commit": {"oid": "e27dafc6d931aea37701740864b2eba147fec5c4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2882, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}