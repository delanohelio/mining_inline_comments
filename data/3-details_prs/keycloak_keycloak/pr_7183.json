{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2NDc0NTUx", "number": 7183, "title": "[KEYCLOAK-11330] - Clustering tests for GA", "bodyText": "", "createdAt": "2020-06-18T13:29:09Z", "url": "https://github.com/keycloak/keycloak/pull/7183", "merged": true, "mergeCommit": {"oid": "337a751aaaeb7d3847dedd3d2ca7ca070024d9b6"}, "closed": true, "closedAt": "2020-06-24T15:23:47Z", "author": {"login": "pedroigor"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcsh5pbgBqjM0NTkzMTQzMzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcubtcGAFqTQzNjc1NzE2Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "699e9a4af4140e6b94b479bb8cdd00b6c4962c08", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/699e9a4af4140e6b94b479bb8cdd00b6c4962c08", "committedDate": "2020-06-18T13:28:20Z", "message": "[KEYCLOAK-11330] - Clustering tests for GA"}, "afterCommit": {"oid": "6de4463eb538cb804fc4f52e3f880d4e75bc5b44", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/6de4463eb538cb804fc4f52e3f880d4e75bc5b44", "committedDate": "2020-06-18T17:28:24Z", "message": "[KEYCLOAK-11330] - Clustering tests for GA"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6de4463eb538cb804fc4f52e3f880d4e75bc5b44", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/6de4463eb538cb804fc4f52e3f880d4e75bc5b44", "committedDate": "2020-06-18T17:28:24Z", "message": "[KEYCLOAK-11330] - Clustering tests for GA"}, "afterCommit": {"oid": "545e05aaf317c39f6509bd410061be0eb7ca63d1", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/545e05aaf317c39f6509bd410061be0eb7ca63d1", "committedDate": "2020-06-18T20:18:49Z", "message": "[KEYCLOAK-11330] - Clustering tests for GA"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzOTg0NTgz", "url": "https://github.com/keycloak/keycloak/pull/7183#pullrequestreview-433984583", "createdAt": "2020-06-19T10:53:34Z", "commit": {"oid": "545e05aaf317c39f6509bd410061be0eb7ca63d1"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxMDo1MzozNFrOGmQsSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQxMDo1MzozNFrOGmQsSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjc3MjU1NQ==", "bodyText": "This should be a separate job", "url": "https://github.com/keycloak/keycloak/pull/7183#discussion_r442772555", "createdAt": "2020-06-19T10:53:34Z", "author": {"login": "stianst"}, "path": ".github/workflows/ci-x.yml", "diffHunk": "@@ -51,3 +51,5 @@ jobs:\n         run: mvn clean install -B -Pquarkus,auth-server-quarkus -DskipTests -f testsuite/pom.xml\n       - name: Run base tests\n         run: mvn clean install -B -Pquarkus,auth-server-quarkus -f testsuite/integration-arquillian/tests/base/pom.xml | misc/log/trimmer.sh; exit ${PIPESTATUS[0]}\n+      - name: Run cluster tests\n+        run: mvn clean install -B -Pauth-server-cluster-quarkus -Dsession.cache.owners=2 -Dtest=**.cluster.** -f testsuite/integration-arquillian/pom.xml  | misc/log/trimmer.sh; exit", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "545e05aaf317c39f6509bd410061be0eb7ca63d1"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "545e05aaf317c39f6509bd410061be0eb7ca63d1", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/545e05aaf317c39f6509bd410061be0eb7ca63d1", "committedDate": "2020-06-18T20:18:49Z", "message": "[KEYCLOAK-11330] - Clustering tests for GA"}, "afterCommit": {"oid": "672ab14fee4b3a7202c254d1a3a3809fe63a212a", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/672ab14fee4b3a7202c254d1a3a3809fe63a212a", "committedDate": "2020-06-19T18:20:33Z", "message": "[KEYCLOAK-11330] - Clustering tests for GA"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MDUzNjAz", "url": "https://github.com/keycloak/keycloak/pull/7183#pullrequestreview-436053603", "createdAt": "2020-06-23T18:37:07Z", "commit": {"oid": "672ab14fee4b3a7202c254d1a3a3809fe63a212a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxODozNzowN1rOGn1xdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QxODozNzowN1rOGn1xdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDQyODY2MA==", "bodyText": "Is this intentionally always passing due to last exit command that ignores exit code of mvn?\nIn the GH Actions, there is a failed test (ClientInvalidationClusterTest), but the action result is green.", "url": "https://github.com/keycloak/keycloak/pull/7183#discussion_r444428660", "createdAt": "2020-06-23T18:37:07Z", "author": {"login": "hmlnarik"}, "path": ".github/workflows/ci-x.yml", "diffHunk": "@@ -51,3 +51,26 @@ jobs:\n         run: mvn clean install -B -Pquarkus,auth-server-quarkus -DskipTests -f testsuite/pom.xml\n       - name: Run base tests\n         run: mvn clean install -B -Pquarkus,auth-server-quarkus -f testsuite/integration-arquillian/tests/base/pom.xml | misc/log/trimmer.sh; exit ${PIPESTATUS[0]}\n+  test-cluster:\n+    name: Test Clustering\n+    needs: build\n+    runs-on: ubuntu-latest\n+    env:\n+      MAVEN_OPTS: -Xmx2048m\n+    steps:\n+      - uses: actions/checkout@v2\n+      - uses: actions/setup-java@v1\n+        with:\n+          java-version: 11\n+      - name: Download Maven Repo\n+        uses: actions/download-artifact@v1\n+        with:\n+          name: maven-repo\n+          path: .\n+      - name: Extract Maven Repo\n+        shell: bash\n+        run: tar -xzvf maven-repo.tgz -C ~\n+      - name: Build testsuite\n+        run: mvn clean install -B -Pquarkus,auth-server-quarkus -DskipTests -f testsuite/pom.xml\n+      - name: Run cluster tests\n+        run: mvn clean install -B -Pauth-server-cluster-quarkus -Dsession.cache.owners=2 -Dtest=**.cluster.** -f testsuite/integration-arquillian/pom.xml  | misc/log/trimmer.sh; exit", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "672ab14fee4b3a7202c254d1a3a3809fe63a212a"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10c0fde1afb3f6b375186f4426dfcfcdcd196169", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/10c0fde1afb3f6b375186f4426dfcfcdcd196169", "committedDate": "2020-06-23T19:05:46Z", "message": "[KEYCLOAK-11330] - Clustering tests for GA"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "672ab14fee4b3a7202c254d1a3a3809fe63a212a", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/672ab14fee4b3a7202c254d1a3a3809fe63a212a", "committedDate": "2020-06-19T18:20:33Z", "message": "[KEYCLOAK-11330] - Clustering tests for GA"}, "afterCommit": {"oid": "10c0fde1afb3f6b375186f4426dfcfcdcd196169", "author": {"user": {"login": "pedroigor", "name": "Pedro Igor"}}, "url": "https://github.com/keycloak/keycloak/commit/10c0fde1afb3f6b375186f4426dfcfcdcd196169", "committedDate": "2020-06-23T19:05:46Z", "message": "[KEYCLOAK-11330] - Clustering tests for GA"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2NzU3MTYz", "url": "https://github.com/keycloak/keycloak/pull/7183#pullrequestreview-436757163", "createdAt": "2020-06-24T15:23:40Z", "commit": {"oid": "10c0fde1afb3f6b375186f4426dfcfcdcd196169"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2985, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}