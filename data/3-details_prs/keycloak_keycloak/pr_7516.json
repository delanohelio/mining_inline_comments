{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA2MzczMTM4", "number": 7516, "title": "KEYCLOAK-14138 Upgrade OTP login screen", "bodyText": "edited related css and ftl theme resources\nfixed affected tests\n\nSigned-off-by: Peter Zaoral pzaoral@redhat.com\n@mabartos @vmuzikar @ssilvert PTAL once you got a chance. I'll attach the pipeline test run results later. Thanks!", "createdAt": "2020-10-20T00:43:07Z", "url": "https://github.com/keycloak/keycloak/pull/7516", "merged": true, "mergeCommit": {"oid": "c8a2f82a503d2b5702d45c37cfb305cb292cb912"}, "closed": true, "closedAt": "2020-12-03T15:00:37Z", "author": {"login": "Pepo48"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdUoUyrAFqTUxMzM2ODk0Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdikeXygFqTU0NDA0MTgxMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzMzY4OTQ3", "url": "https://github.com/keycloak/keycloak/pull/7516#pullrequestreview-513368947", "createdAt": "2020-10-21T07:13:08Z", "commit": {"oid": "a53bcd4813ab2167956cd42679663586304ab4a9"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwNzoxMzowOFrOHldXSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwNzozMTo0MFrOHleAVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTA0MDQ1Ng==", "bodyText": "I have some issues with margin and padding. If you add the css file in this order, like below, it should resolve that.\nbase.css, app.css, patternfly.min.css, patternfly-additions.min.css tile.css", "url": "https://github.com/keycloak/keycloak/pull/7516#discussion_r509040456", "createdAt": "2020-10-21T07:13:08Z", "author": {"login": "mabartos"}, "path": "themes/src/main/resources/theme/keycloak/login/theme.properties", "diffHunk": "@@ -2,7 +2,7 @@ parent=base\n import=common/keycloak\n \n styles=css/login.css\n-stylesCommon=node_modules/patternfly/dist/css/patternfly.min.css node_modules/patternfly/dist/css/patternfly-additions.min.css lib/zocial/zocial.css\n+stylesCommon=node_modules/patternfly/dist/css/patternfly.min.css web_modules/@patternfly/react-core/dist/styles/app.css web_modules/@patternfly/react-core/dist/styles/base.css node_modules/patternfly/dist/css/patternfly-additions.min.css lib/patternfly4/tile.css", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a53bcd4813ab2167956cd42679663586304ab4a9"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTA0NjExNQ==", "bodyText": "@Pepo48 Have you tried this on IE? IE doesn't support var() function. The basic screens should be available even in IE, as it was discussed here. So, there should be, at least, some similar appearance like with PF4.", "url": "https://github.com/keycloak/keycloak/pull/7516#discussion_r509046115", "createdAt": "2020-10-21T07:23:33Z", "author": {"login": "mabartos"}, "path": "themes/src/main/resources/theme/keycloak/common/resources/lib/patternfly4/tile.css", "diffHunk": "@@ -0,0 +1,100 @@\n+.pf-c-tile {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a53bcd4813ab2167956cd42679663586304ab4a9"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTA0ODMyOQ==", "bodyText": "I think, it'd be better use property for the icon instead of hardcoded value. Then, customer can easily change the icon in theme.properties. WDYT @Pepo48 ?", "url": "https://github.com/keycloak/keycloak/pull/7516#discussion_r509048329", "createdAt": "2020-10-21T07:27:13Z", "author": {"login": "mabartos"}, "path": "themes/src/main/resources/theme/base/login/login-otp.ftl", "diffHunk": "@@ -9,13 +9,13 @@\n                         <div class=\"${properties.kcFormGroupClass!}\">\n                             <div class=\"${properties.kcInputWrapperClass!}\">\n                                 <#list otpLogin.userOtpCredentials as otpCredential>\n-                                    <div class=\"${properties.kcSelectOTPListClass!}\">\n+                                    <div class=\"${properties.kcLoginOTPListClass!}\" tabindex=\"${otpCredential?index}\">\n                                     <input type=\"hidden\" value=\"${otpCredential.id}\">\n-                                        <div class=\"${properties.kcSelectOTPListItemClass!}\">\n-                                            <span class=\"${properties.kcAuthenticatorOtpCircleClass!}\"></span>\n-                                            <h2 class=\"${properties.kcSelectOTPItemHeadingClass!}\">\n-                                                ${otpCredential.userLabel}\n-                                            </h2>\n+                                        <div class=\"${properties.kcLoginOTPListItemHeaderClass!}\">\n+                                            <div class=\"${properties.kcLoginOTPListItemIconClass!}\">\n+                                              <i class=\"fa fa-mobile\" aria-hidden=\"true\"></i>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a53bcd4813ab2167956cd42679663586304ab4a9"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTA1MDk2NQ==", "bodyText": "Is it possible to add any margin-bottom? If user have defined f.e. 3 OTP credentials with longer name, there are two rows, but there are no space between them.", "url": "https://github.com/keycloak/keycloak/pull/7516#discussion_r509050965", "createdAt": "2020-10-21T07:31:40Z", "author": {"login": "mabartos"}, "path": "themes/src/main/resources/theme/keycloak/login/resources/css/login.css", "diffHunk": "@@ -515,8 +515,12 @@ a.zocial  {\n     width: 100%;\n }\n \n-.login-pf-page .card-pf{\n-  margin-bottom: 10px;\n+.otp-tile {\n+    padding: 1.5rem;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a53bcd4813ab2167956cd42679663586304ab4a9"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0ODgwOTcy", "url": "https://github.com/keycloak/keycloak/pull/7516#pullrequestreview-514880972", "createdAt": "2020-10-22T15:54:52Z", "commit": {"oid": "a53bcd4813ab2167956cd42679663586304ab4a9"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxNTo1NDo1MlrOHmotGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMlQxNTo1OTowOFrOHmo5iA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDI3NDg0MA==", "bodyText": "This is a bit off topic for this PR as we used JS here as well (but I just noticed it now :)). Didn't we have some policy not to use any JS on login pages if possible (of course e.g. webauthn wouldn't work without JS)? @ssilvert?", "url": "https://github.com/keycloak/keycloak/pull/7516#discussion_r510274840", "createdAt": "2020-10-22T15:54:52Z", "author": {"login": "vmuzikar"}, "path": "themes/src/main/resources/theme/base/login/login-otp.ftl", "diffHunk": "@@ -51,16 +51,16 @@\n             <script type=\"text/javascript\">\n             $(document).ready(function() {\n                 // Card Single Select\n-                $('.card-pf-view-single-select').click(function() {\n-                  if ($(this).hasClass('active'))\n-                  { $(this).removeClass('active'); $(this).children().removeAttr('name'); }\n+                $('.otp-tile').click(function() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a53bcd4813ab2167956cd42679663586304ab4a9"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDI3ODAyNA==", "bodyText": "@mabartos What do you mean? I haven't noticed any issues. :)", "url": "https://github.com/keycloak/keycloak/pull/7516#discussion_r510278024", "createdAt": "2020-10-22T15:59:08Z", "author": {"login": "vmuzikar"}, "path": "themes/src/main/resources/theme/keycloak/login/theme.properties", "diffHunk": "@@ -2,7 +2,7 @@ parent=base\n import=common/keycloak\n \n styles=css/login.css\n-stylesCommon=node_modules/patternfly/dist/css/patternfly.min.css node_modules/patternfly/dist/css/patternfly-additions.min.css lib/zocial/zocial.css\n+stylesCommon=node_modules/patternfly/dist/css/patternfly.min.css web_modules/@patternfly/react-core/dist/styles/app.css web_modules/@patternfly/react-core/dist/styles/base.css node_modules/patternfly/dist/css/patternfly-additions.min.css lib/patternfly4/tile.css", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTA0MDQ1Ng=="}, "originalCommit": {"oid": "a53bcd4813ab2167956cd42679663586304ab4a9"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0ODg3MzQ1", "url": "https://github.com/keycloak/keycloak/pull/7516#pullrequestreview-514887345", "createdAt": "2020-10-22T16:01:20Z", "commit": {"oid": "a53bcd4813ab2167956cd42679663586304ab4a9"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a53bcd4813ab2167956cd42679663586304ab4a9", "author": {"user": {"login": "Pepo48", "name": "Peter Zaoral"}}, "url": "https://github.com/keycloak/keycloak/commit/a53bcd4813ab2167956cd42679663586304ab4a9", "committedDate": "2020-10-20T00:40:53Z", "message": "KEYCLOAK-14138 Upgrade OTP login screen\n\n* edited related css and ftl theme resources\n* fixed affected tests\n\nSigned-off-by: Peter Zaoral <pzaoral@redhat.com>"}, "afterCommit": {"oid": "527c986a8f0a57980e45fd6fb1d48e2ead72dfc9", "author": {"user": {"login": "Pepo48", "name": "Peter Zaoral"}}, "url": "https://github.com/keycloak/keycloak/commit/527c986a8f0a57980e45fd6fb1d48e2ead72dfc9", "committedDate": "2020-10-26T08:56:12Z", "message": "KEYCLOAK-14138 Upgrade OTP login screen\n\n* edited related css and ftl theme resources\n* fixed affected tests\n\nSigned-off-by: Peter Zaoral <pzaoral@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "527c986a8f0a57980e45fd6fb1d48e2ead72dfc9", "author": {"user": {"login": "Pepo48", "name": "Peter Zaoral"}}, "url": "https://github.com/keycloak/keycloak/commit/527c986a8f0a57980e45fd6fb1d48e2ead72dfc9", "committedDate": "2020-10-26T08:56:12Z", "message": "KEYCLOAK-14138 Upgrade OTP login screen\n\n* edited related css and ftl theme resources\n* fixed affected tests\n\nSigned-off-by: Peter Zaoral <pzaoral@redhat.com>"}, "afterCommit": {"oid": "5ada5132d216aa1a15fa16847f3093e460ec1d8f", "author": {"user": {"login": "Pepo48", "name": "Peter Zaoral"}}, "url": "https://github.com/keycloak/keycloak/commit/5ada5132d216aa1a15fa16847f3093e460ec1d8f", "committedDate": "2020-10-27T19:20:26Z", "message": "KEYCLOAK-14138 Upgrade OTP login screen\n\n* edited related css and ftl theme resources\n* added tile component\n* fixed IE11 compatibility\n* fixed affected tests\n\nSigned-off-by: Peter Zaoral <pzaoral@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5ada5132d216aa1a15fa16847f3093e460ec1d8f", "author": {"user": {"login": "Pepo48", "name": "Peter Zaoral"}}, "url": "https://github.com/keycloak/keycloak/commit/5ada5132d216aa1a15fa16847f3093e460ec1d8f", "committedDate": "2020-10-27T19:20:26Z", "message": "KEYCLOAK-14138 Upgrade OTP login screen\n\n* edited related css and ftl theme resources\n* added tile component\n* fixed IE11 compatibility\n* fixed affected tests\n\nSigned-off-by: Peter Zaoral <pzaoral@redhat.com>"}, "afterCommit": {"oid": "6b584a0d6920154236e65e567c62c153e563bf6c", "author": {"user": {"login": "Pepo48", "name": "Peter Zaoral"}}, "url": "https://github.com/keycloak/keycloak/commit/6b584a0d6920154236e65e567c62c153e563bf6c", "committedDate": "2020-10-29T16:33:30Z", "message": "KEYCLOAK-14138 Upgrade OTP login screen\n\n* edited related css and ftl theme resources\n* added tile component\n* fixed IE11 compatibility\n* fixed affected tests\n\nSigned-off-by: Peter Zaoral <pzaoral@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwNTQ4NDQ4", "url": "https://github.com/keycloak/keycloak/pull/7516#pullrequestreview-520548448", "createdAt": "2020-10-30T10:39:00Z", "commit": {"oid": "6b584a0d6920154236e65e567c62c153e563bf6c"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwNzEyNjg0", "url": "https://github.com/keycloak/keycloak/pull/7516#pullrequestreview-520712684", "createdAt": "2020-10-30T14:19:01Z", "commit": {"oid": "6b584a0d6920154236e65e567c62c153e563bf6c"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyNjU0MTg3", "url": "https://github.com/keycloak/keycloak/pull/7516#pullrequestreview-522654187", "createdAt": "2020-11-03T16:10:57Z", "commit": {"oid": "6b584a0d6920154236e65e567c62c153e563bf6c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxNjoxMDo1N1rOHs2BkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxNjoxMDo1N1rOHs2BkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjc4NDUyOA==", "bodyText": "If I understand it correctly, this directory is meant for 3rd party libraries. I'm not sure we should be adding custom files in there. It might even get deleted on some dependencies update. Or am I missing something? @ssilvert", "url": "https://github.com/keycloak/keycloak/pull/7516#discussion_r516784528", "createdAt": "2020-11-03T16:10:57Z", "author": {"login": "vmuzikar"}, "path": "themes/src/main/resources/theme/keycloak/common/resources/lib/patternfly4/tile.css", "diffHunk": "@@ -0,0 +1,202 @@\n+/*Internet Explorer 11 compatibility workaround - IE does not support CSS variables */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6b584a0d6920154236e65e567c62c153e563bf6c"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyNjg4NzQ2", "url": "https://github.com/keycloak/keycloak/pull/7516#pullrequestreview-522688746", "createdAt": "2020-11-03T16:46:36Z", "commit": {"oid": "6b584a0d6920154236e65e567c62c153e563bf6c"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6b584a0d6920154236e65e567c62c153e563bf6c", "author": {"user": {"login": "Pepo48", "name": "Peter Zaoral"}}, "url": "https://github.com/keycloak/keycloak/commit/6b584a0d6920154236e65e567c62c153e563bf6c", "committedDate": "2020-10-29T16:33:30Z", "message": "KEYCLOAK-14138 Upgrade OTP login screen\n\n* edited related css and ftl theme resources\n* added tile component\n* fixed IE11 compatibility\n* fixed affected tests\n\nSigned-off-by: Peter Zaoral <pzaoral@redhat.com>"}, "afterCommit": {"oid": "496f5babae922ba64ea0799bf62ce278bb1890fb", "author": {"user": {"login": "Pepo48", "name": "Peter Zaoral"}}, "url": "https://github.com/keycloak/keycloak/commit/496f5babae922ba64ea0799bf62ce278bb1890fb", "committedDate": "2020-11-03T17:49:24Z", "message": "KEYCLOAK-14138 Upgrade OTP login screen\n\n* edited related css and ftl theme resources\n* added tile component\n* fixed IE11 compatibility\n* fixed affected tests\n\nSigned-off-by: Peter Zaoral <pzaoral@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "496f5babae922ba64ea0799bf62ce278bb1890fb", "author": {"user": {"login": "Pepo48", "name": "Peter Zaoral"}}, "url": "https://github.com/keycloak/keycloak/commit/496f5babae922ba64ea0799bf62ce278bb1890fb", "committedDate": "2020-11-03T17:49:24Z", "message": "KEYCLOAK-14138 Upgrade OTP login screen\n\n* edited related css and ftl theme resources\n* added tile component\n* fixed IE11 compatibility\n* fixed affected tests\n\nSigned-off-by: Peter Zaoral <pzaoral@redhat.com>"}, "afterCommit": {"oid": "509024a706dafe8e71ea296dacd59b55f68625b6", "author": {"user": {"login": "Pepo48", "name": "Peter Zaoral"}}, "url": "https://github.com/keycloak/keycloak/commit/509024a706dafe8e71ea296dacd59b55f68625b6", "committedDate": "2020-11-23T17:40:03Z", "message": "KEYCLOAK-14138 Upgrade OTP login screen\n\n* edited related css and ftl theme resources\n* added tile component\n* fixed IE11 compatibility\n* fixed affected tests\n\nSigned-off-by: Peter Zaoral <pzaoral@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9e35cd156c5e40e88b80e54be795f7835871b23", "author": {"user": {"login": "Pepo48", "name": "Peter Zaoral"}}, "url": "https://github.com/keycloak/keycloak/commit/a9e35cd156c5e40e88b80e54be795f7835871b23", "committedDate": "2020-11-24T16:10:50Z", "message": "KEYCLOAK-14138 Upgrade OTP login screen\n\n* edited related css and ftl theme resources\n* added tile component\n* fixed IE11 compatibility\n* fixed affected tests\n\nSigned-off-by: Peter Zaoral <pzaoral@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "509024a706dafe8e71ea296dacd59b55f68625b6", "author": {"user": {"login": "Pepo48", "name": "Peter Zaoral"}}, "url": "https://github.com/keycloak/keycloak/commit/509024a706dafe8e71ea296dacd59b55f68625b6", "committedDate": "2020-11-23T17:40:03Z", "message": "KEYCLOAK-14138 Upgrade OTP login screen\n\n* edited related css and ftl theme resources\n* added tile component\n* fixed IE11 compatibility\n* fixed affected tests\n\nSigned-off-by: Peter Zaoral <pzaoral@redhat.com>"}, "afterCommit": {"oid": "a9e35cd156c5e40e88b80e54be795f7835871b23", "author": {"user": {"login": "Pepo48", "name": "Peter Zaoral"}}, "url": "https://github.com/keycloak/keycloak/commit/a9e35cd156c5e40e88b80e54be795f7835871b23", "committedDate": "2020-11-24T16:10:50Z", "message": "KEYCLOAK-14138 Upgrade OTP login screen\n\n* edited related css and ftl theme resources\n* added tile component\n* fixed IE11 compatibility\n* fixed affected tests\n\nSigned-off-by: Peter Zaoral <pzaoral@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4MzgxNTMy", "url": "https://github.com/keycloak/keycloak/pull/7516#pullrequestreview-538381532", "createdAt": "2020-11-25T11:00:56Z", "commit": {"oid": "a9e35cd156c5e40e88b80e54be795f7835871b23"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQyODE3Mjc5", "url": "https://github.com/keycloak/keycloak/pull/7516#pullrequestreview-542817279", "createdAt": "2020-12-02T13:09:26Z", "commit": {"oid": "a9e35cd156c5e40e88b80e54be795f7835871b23"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0MDQxODEw", "url": "https://github.com/keycloak/keycloak/pull/7516#pullrequestreview-544041810", "createdAt": "2020-12-03T15:00:26Z", "commit": {"oid": "a9e35cd156c5e40e88b80e54be795f7835871b23"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3361, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}