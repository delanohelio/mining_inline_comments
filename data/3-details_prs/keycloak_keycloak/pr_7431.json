{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg5NDAyMjYx", "number": 7431, "title": "KEYCLOAK-15522 Use AbstractStorageManager in UserStorageManager", "bodyText": "", "createdAt": "2020-09-18T15:53:44Z", "url": "https://github.com/keycloak/keycloak/pull/7431", "merged": true, "mergeCommit": {"oid": "4556e858ad698eabc6924f450a4ccc42c79df4db"}, "closed": true, "closedAt": "2020-10-15T18:41:14Z", "author": {"login": "mhajas"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdLtVo9ABqjM3OTgzNzkxMDg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdS2QYHAFqTUwOTY2Njg2Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5a8bd8eb2adf023be3a6dceeaed60e2550ed1777", "author": {"user": {"login": "mhajas", "name": "Michal Hajas"}}, "url": "https://github.com/keycloak/keycloak/commit/5a8bd8eb2adf023be3a6dceeaed60e2550ed1777", "committedDate": "2020-09-22T08:44:51Z", "message": "KEYCLOAK-15522 Do not time bound write operations on storage providers"}, "afterCommit": {"oid": "a335c8907c059ca9272ecd937e4d0862f60d1adf", "author": {"user": {"login": "mhajas", "name": "Michal Hajas"}}, "url": "https://github.com/keycloak/keycloak/commit/a335c8907c059ca9272ecd937e4d0862f60d1adf", "committedDate": "2020-09-23T14:19:36Z", "message": "KEYCLOAK-15522 Run time bounded execution in main thread"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a335c8907c059ca9272ecd937e4d0862f60d1adf", "author": {"user": {"login": "mhajas", "name": "Michal Hajas"}}, "url": "https://github.com/keycloak/keycloak/commit/a335c8907c059ca9272ecd937e4d0862f60d1adf", "committedDate": "2020-09-23T14:19:36Z", "message": "KEYCLOAK-15522 Run time bounded execution in main thread"}, "afterCommit": {"oid": "957a4867048e3856d50ace91e69cab2886b4a9dc", "author": {"user": {"login": "mhajas", "name": "Michal Hajas"}}, "url": "https://github.com/keycloak/keycloak/commit/957a4867048e3856d50ace91e69cab2886b4a9dc", "committedDate": "2020-10-01T15:45:28Z", "message": "KEYCLOAK-15522 Run time bounded execution in main thread"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "957a4867048e3856d50ace91e69cab2886b4a9dc", "author": {"user": {"login": "mhajas", "name": "Michal Hajas"}}, "url": "https://github.com/keycloak/keycloak/commit/957a4867048e3856d50ace91e69cab2886b4a9dc", "committedDate": "2020-10-01T15:45:28Z", "message": "KEYCLOAK-15522 Run time bounded execution in main thread"}, "afterCommit": {"oid": "eb5e9e26e5a1941a8aab4bd17ef454f2f062a1fc", "author": {"user": {"login": "mhajas", "name": "Michal Hajas"}}, "url": "https://github.com/keycloak/keycloak/commit/eb5e9e26e5a1941a8aab4bd17ef454f2f062a1fc", "committedDate": "2020-10-02T07:27:42Z", "message": "KEYCLOAK-15522 Use AbstractStorageManager in UserStorageManager"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzMjY1NjA3", "url": "https://github.com/keycloak/keycloak/pull/7431#pullrequestreview-503265607", "createdAt": "2020-10-06T18:53:00Z", "commit": {"oid": "eb5e9e26e5a1941a8aab4bd17ef454f2f062a1fc"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxODo1MzowMVrOHdVmXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxODo1MzozOVrOHdVnuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDUyNDYzNg==", "bodyText": "With Realms, Roles, etc, we are doing the other way around - adding the stream variant and making the old list-based methods. Are we changing this?", "url": "https://github.com/keycloak/keycloak/pull/7431#discussion_r500524636", "createdAt": "2020-10-06T18:53:01Z", "author": {"login": "sguilhen"}, "path": "server-spi/src/main/java/org/keycloak/models/UserProvider.java", "diffHunk": "@@ -57,6 +58,9 @@\n \n     UserModel getServiceAccount(ClientModel client);\n     List<UserModel> getUsers(RealmModel realm, boolean includeServiceAccounts);\n+    default Stream<UserModel> getUsersStream(RealmModel realm, boolean includeServiceAccounts) {\n+        return getUsers(realm, includeServiceAccounts).stream();\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb5e9e26e5a1941a8aab4bd17ef454f2f062a1fc"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDUyNDk4NQ==", "bodyText": "Same... I think we should settle to a single way of doing things, this is getting confusing.", "url": "https://github.com/keycloak/keycloak/pull/7431#discussion_r500524985", "createdAt": "2020-10-06T18:53:39Z", "author": {"login": "sguilhen"}, "path": "server-spi/src/main/java/org/keycloak/storage/federated/UserAttributeFederatedStorage.java", "diffHunk": "@@ -31,4 +32,7 @@\n     void removeAttribute(RealmModel realm, String userId, String name);\n     MultivaluedHashMap<String, String> getAttributes(RealmModel realm, String userId);\n     List<String> getUsersByUserAttribute(RealmModel realm, String name, String value);\n+    default Stream<String> getUsersByUserAttributeStream(RealmModel realm, String name, String value) {\n+        return getUsersByUserAttribute(realm, name, value).stream();\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb5e9e26e5a1941a8aab4bd17ef454f2f062a1fc"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2MzQ3MDIy", "url": "https://github.com/keycloak/keycloak/pull/7431#pullrequestreview-506347022", "createdAt": "2020-10-12T07:12:34Z", "commit": {"oid": "eb5e9e26e5a1941a8aab4bd17ef454f2f062a1fc"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwNzoxMjozNFrOHfxufg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwNzoyNTozOVrOHfyHQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA4MjYyMg==", "bodyText": "Are we going to add javadoc for the default methods?", "url": "https://github.com/keycloak/keycloak/pull/7431#discussion_r503082622", "createdAt": "2020-10-12T07:12:34Z", "author": {"login": "vramik"}, "path": "server-spi/src/main/java/org/keycloak/storage/user/UserQueryProvider.java", "diffHunk": "@@ -144,6 +145,10 @@ default int getUsersCount(RealmModel realm, boolean includeServiceAccount) {\n     }\n \n     List<UserModel> getUsers(RealmModel realm);\n+    default Stream<UserModel> getUsersStream(RealmModel realm) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb5e9e26e5a1941a8aab4bd17ef454f2f062a1fc"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA4ODk2Mw==", "bodyText": "The same: should we add a java-doc here?", "url": "https://github.com/keycloak/keycloak/pull/7431#discussion_r503088963", "createdAt": "2020-10-12T07:25:39Z", "author": {"login": "vramik"}, "path": "server-spi/src/main/java/org/keycloak/storage/federated/UserGroupMembershipFederatedStorage.java", "diffHunk": "@@ -39,5 +39,8 @@\n     void joinGroup(RealmModel realm, String userId, GroupModel group);\n     void leaveGroup(RealmModel realm, String userId, GroupModel group);\n     List<String> getMembership(RealmModel realm, GroupModel group, int firstResult, int max);\n+    default Stream<String> getMembershipStream(RealmModel realm, GroupModel group, int firstResult, int max) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eb5e9e26e5a1941a8aab4bd17ef454f2f062a1fc"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eb5e9e26e5a1941a8aab4bd17ef454f2f062a1fc", "author": {"user": {"login": "mhajas", "name": "Michal Hajas"}}, "url": "https://github.com/keycloak/keycloak/commit/eb5e9e26e5a1941a8aab4bd17ef454f2f062a1fc", "committedDate": "2020-10-02T07:27:42Z", "message": "KEYCLOAK-15522 Use AbstractStorageManager in UserStorageManager"}, "afterCommit": {"oid": "262747980c6e0971c58f29d567cdcf50b8f17f96", "author": {"user": {"login": "mhajas", "name": "Michal Hajas"}}, "url": "https://github.com/keycloak/keycloak/commit/262747980c6e0971c58f29d567cdcf50b8f17f96", "committedDate": "2020-10-12T11:56:42Z", "message": "KEYCLOAK-15522 Use AbstractStorageManager in UserStorageManager"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "262747980c6e0971c58f29d567cdcf50b8f17f96", "author": {"user": {"login": "mhajas", "name": "Michal Hajas"}}, "url": "https://github.com/keycloak/keycloak/commit/262747980c6e0971c58f29d567cdcf50b8f17f96", "committedDate": "2020-10-12T11:56:42Z", "message": "KEYCLOAK-15522 Use AbstractStorageManager in UserStorageManager"}, "afterCommit": {"oid": "7fd9bbdf2e9667a6d2cb8e38eb094c8739a0f7db", "author": {"user": {"login": "mhajas", "name": "Michal Hajas"}}, "url": "https://github.com/keycloak/keycloak/commit/7fd9bbdf2e9667a6d2cb8e38eb094c8739a0f7db", "committedDate": "2020-10-12T14:49:38Z", "message": "KEYCLOAK-15522 Use AbstractStorageManager in UserStorageManager"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7fd9bbdf2e9667a6d2cb8e38eb094c8739a0f7db", "author": {"user": {"login": "mhajas", "name": "Michal Hajas"}}, "url": "https://github.com/keycloak/keycloak/commit/7fd9bbdf2e9667a6d2cb8e38eb094c8739a0f7db", "committedDate": "2020-10-12T14:49:38Z", "message": "KEYCLOAK-15522 Use AbstractStorageManager in UserStorageManager"}, "afterCommit": {"oid": "2cc2edc54b074550e72ad8d5a70e3aae17bb7c18", "author": {"user": {"login": "mhajas", "name": "Michal Hajas"}}, "url": "https://github.com/keycloak/keycloak/commit/2cc2edc54b074550e72ad8d5a70e3aae17bb7c18", "committedDate": "2020-10-14T07:13:32Z", "message": "KEYCLOAK-15522 Use AbstractStorageManager in UserStorageManager"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2cc2edc54b074550e72ad8d5a70e3aae17bb7c18", "author": {"user": {"login": "mhajas", "name": "Michal Hajas"}}, "url": "https://github.com/keycloak/keycloak/commit/2cc2edc54b074550e72ad8d5a70e3aae17bb7c18", "committedDate": "2020-10-14T07:13:32Z", "message": "KEYCLOAK-15522 Use AbstractStorageManager in UserStorageManager"}, "afterCommit": {"oid": "42b8022dd32be41e553171500e3bdd94015e195f", "author": {"user": {"login": "mhajas", "name": "Michal Hajas"}}, "url": "https://github.com/keycloak/keycloak/commit/42b8022dd32be41e553171500e3bdd94015e195f", "committedDate": "2020-10-15T08:14:12Z", "message": "KEYCLOAK-15522 Use AbstractStorageManager in UserStorageManager"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f468ce9151614236dd7f1a47b0c939c0370344a", "author": {"user": {"login": "mhajas", "name": "Michal Hajas"}}, "url": "https://github.com/keycloak/keycloak/commit/3f468ce9151614236dd7f1a47b0c939c0370344a", "committedDate": "2020-10-15T14:20:58Z", "message": "KEYCLOAK-15522 Use AbstractStorageManager in UserStorageManager"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "42b8022dd32be41e553171500e3bdd94015e195f", "author": {"user": {"login": "mhajas", "name": "Michal Hajas"}}, "url": "https://github.com/keycloak/keycloak/commit/42b8022dd32be41e553171500e3bdd94015e195f", "committedDate": "2020-10-15T08:14:12Z", "message": "KEYCLOAK-15522 Use AbstractStorageManager in UserStorageManager"}, "afterCommit": {"oid": "3f468ce9151614236dd7f1a47b0c939c0370344a", "author": {"user": {"login": "mhajas", "name": "Michal Hajas"}}, "url": "https://github.com/keycloak/keycloak/commit/3f468ce9151614236dd7f1a47b0c939c0370344a", "committedDate": "2020-10-15T14:20:58Z", "message": "KEYCLOAK-15522 Use AbstractStorageManager in UserStorageManager"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5NjY2ODY3", "url": "https://github.com/keycloak/keycloak/pull/7431#pullrequestreview-509666867", "createdAt": "2020-10-15T18:40:38Z", "commit": {"oid": "3f468ce9151614236dd7f1a47b0c939c0370344a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2826, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}