{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg1MTY3ODk1", "number": 7415, "title": "KEYCLOAK-3365 Configure required actions for LDAP in READ_ONLY mode", "bodyText": "", "createdAt": "2020-09-11T15:03:30Z", "url": "https://github.com/keycloak/keycloak/pull/7415", "merged": true, "mergeCommit": {"oid": "eb002c7ecde6ebefeafb7828a582b5f185bcbc86"}, "closed": true, "closedAt": "2020-10-15T06:43:32Z", "author": {"login": "sventorben"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdR29eTAH2gAyNDg1MTY3ODk1Ojg0MzlmNzNjZGZmOWM4MDY4YzRiOWRlMDkyYmM0NmJlNjE1MTM0MTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSfs1ZAFqTUwODUyMTQ5NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8439f73cdff9c8068c4b9de092bc46be61513412", "author": {"user": {"login": "sventorben", "name": "Sven-Torben Janus"}}, "url": "https://github.com/keycloak/keycloak/commit/8439f73cdff9c8068c4b9de092bc46be61513412", "committedDate": "2020-10-12T16:55:58Z", "message": "KEYCLOAK-3365 Configure required actions for LDAP in READ_ONLY mode"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c40b82dee08237351e7f2d595c88406806d9eb0e", "author": {"user": {"login": "sventorben", "name": "Sven-Torben Janus"}}, "url": "https://github.com/keycloak/keycloak/commit/c40b82dee08237351e7f2d595c88406806d9eb0e", "committedDate": "2020-10-13T20:29:30Z", "message": "KEYCLOAK-3365 Add test case"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "89c7adcf1e7783728a84dc8e0545d2b03a8cbe8b", "author": {"user": {"login": "sventorben", "name": "Sven-Torben Janus"}}, "url": "https://github.com/keycloak/keycloak/commit/89c7adcf1e7783728a84dc8e0545d2b03a8cbe8b", "committedDate": "2020-09-11T15:00:07Z", "message": "KEYCLOAK-3365 Configure required actions for LDAP in READ_ONLY mode"}, "afterCommit": {"oid": "c40b82dee08237351e7f2d595c88406806d9eb0e", "author": {"user": {"login": "sventorben", "name": "Sven-Torben Janus"}}, "url": "https://github.com/keycloak/keycloak/commit/c40b82dee08237351e7f2d595c88406806d9eb0e", "committedDate": "2020-10-13T20:29:30Z", "message": "KEYCLOAK-3365 Add test case"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4MDQxODI2", "url": "https://github.com/keycloak/keycloak/pull/7415#pullrequestreview-508041826", "createdAt": "2020-10-14T06:51:00Z", "commit": {"oid": "c40b82dee08237351e7f2d595c88406806d9eb0e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQwNjo1MTowMVrOHhEniA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQwNjo1MTowMVrOHhEniA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDQ0MDcxMg==", "bodyText": "Do you please have a chance to update this test a bit and test that requiredAction add/remove works? As I believe that is the main reason why you created this PR. I mean something similar to this:\n        UserResource user = ApiUtil.findUserByUsernameId(testRealm(), \"johnkeycloak\");\n        UserRepresentation userRepresentation = user.toRepresentation();\n        user.setRequiredActions(Collections.singletonList(UserModel.RequiredAction.CONFIGURE_TOTP.toString());\n        user.update(userRepresentation);\n\n        // Check and revert required action\n        userRepresentation = user.toRepresentation();\n        Assert.assertEquals(user.toRepresentation().getRequiredActions().getSize(), 1);\n        Assert.assertEquals(user.toRepresentation().getRequiredActions().get(0), UserModel.RequiredAction.CONFIGURE_TOTP.toString());\n        user.setRequiredActions(Collections.emptyList());\n        user.update(userRepresentation);", "url": "https://github.com/keycloak/keycloak/pull/7415#discussion_r504440712", "createdAt": "2020-10-14T06:51:01Z", "author": {"login": "mposolda"}, "path": "testsuite/integration-arquillian/tests/base/src/test/java/org/keycloak/testsuite/federation/ldap/LDAPReadOnlyTest.java", "diffHunk": "@@ -125,6 +127,23 @@ public void testReadOnlyWithTOTPEnabled() {\n         user.removeCredential(totpCredentialId);\n     }\n \n+    // KEYCLOAK-3365\n+    @Test\n+    public void testReadOnlyUserDoesNotThrowIfUnchanged() {\n+        UserResource user = ApiUtil.findUserByUsernameId(testRealm(), \"johnkeycloak\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c40b82dee08237351e7f2d595c88406806d9eb0e"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6e1befc34472514750cff73586db8c107e3e186", "author": {"user": {"login": "sventorben", "name": "Sven-Torben Janus"}}, "url": "https://github.com/keycloak/keycloak/commit/b6e1befc34472514750cff73586db8c107e3e186", "committedDate": "2020-10-14T10:41:20Z", "message": "KEYCLOAK-3365 Extend test case"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NTIxNDk1", "url": "https://github.com/keycloak/keycloak/pull/7415#pullrequestreview-508521495", "createdAt": "2020-10-14T16:23:54Z", "commit": {"oid": "b6e1befc34472514750cff73586db8c107e3e186"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2815, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}