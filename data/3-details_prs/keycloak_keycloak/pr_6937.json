{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0NDE0NDQ5", "number": 6937, "title": "KEYCLOAK-13442 Backwards compatibility in users searching. searchForU\u2026", "bodyText": "\u2026ser(String, RealmModel, int, int) is no longer called when searching users from the admin console", "createdAt": "2020-03-26T20:48:41Z", "url": "https://github.com/keycloak/keycloak/pull/6937", "merged": true, "mergeCommit": {"oid": "6f62c0ed9853bb6b70847c5ca2ac8b96b9dfdec9"}, "closed": true, "closedAt": "2020-03-27T12:29:57Z", "author": {"login": "mposolda"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRj1P5AFqTM4MjQ2NDY1OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRvw39gFqTM4MjgwODQwNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyNDY0NjU4", "url": "https://github.com/keycloak/keycloak/pull/6937#pullrequestreview-382464658", "createdAt": "2020-03-26T22:27:32Z", "commit": {"oid": "b968d092a96cbd377c662dc041840b3b69a5896f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMjoyNzozMlrOF8cwdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMjoyNzozMlrOF8cwdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkzMDAzNg==", "bodyText": "Instead of all these changes to UsersResource isn't better to just change org.keycloak.storage.UserStorageManager#searchForUser and call the expected method depending on the SEARCH filter? Something like this:\nif (attributes.containsKey(UserModel.SEARCH)) {\n                    return ((UserQueryProvider)provider).searchForUser(attributes.get(UserModel.SEARCH), realm, first, max);\n                } else {\n                    return ((UserQueryProvider)provider).searchForUser(attributes, realm, first, max);                    \n                }", "url": "https://github.com/keycloak/keycloak/pull/6937#discussion_r398930036", "createdAt": "2020-03-26T22:27:32Z", "author": {"login": "pedroigor"}, "path": "services/src/main/java/org/keycloak/services/resources/admin/UsersResource.java", "diffHunk": "@@ -325,7 +338,7 @@ public Integer getUsersCount(@QueryParam(\"search\") String search,\n             }\n         }\n \n-        List<UserModel> userModels = session.users().searchForUser(attributes, realm, firstResult, maxResults);\n+        List<UserModel> userModels = searchImpl.get();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b968d092a96cbd377c662dc041840b3b69a5896f"}, "originalPosition": 45}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b968d092a96cbd377c662dc041840b3b69a5896f", "author": {"user": {"login": "mposolda", "name": "Marek Posolda"}}, "url": "https://github.com/keycloak/keycloak/commit/b968d092a96cbd377c662dc041840b3b69a5896f", "committedDate": "2020-03-26T20:47:40Z", "message": "KEYCLOAK-13442 Backwards compatibility in users searching. searchForUser(String, RealmModel, int, int) is no longer called when searching users from the admin console"}, "afterCommit": {"oid": "a47de813a402c54cdafffe5d22f45ba42d1e2e4d", "author": {"user": {"login": "mposolda", "name": "Marek Posolda"}}, "url": "https://github.com/keycloak/keycloak/commit/a47de813a402c54cdafffe5d22f45ba42d1e2e4d", "committedDate": "2020-03-27T08:39:52Z", "message": "KEYCLOAK-13442 Backwards compatibility in users searching. searchForUser(String, RealmModel, int, int) is no longer called when searching users from the admin console"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a47de813a402c54cdafffe5d22f45ba42d1e2e4d", "author": {"user": {"login": "mposolda", "name": "Marek Posolda"}}, "url": "https://github.com/keycloak/keycloak/commit/a47de813a402c54cdafffe5d22f45ba42d1e2e4d", "committedDate": "2020-03-27T08:39:52Z", "message": "KEYCLOAK-13442 Backwards compatibility in users searching. searchForUser(String, RealmModel, int, int) is no longer called when searching users from the admin console"}, "afterCommit": {"oid": "04895150bbea256600b1c619d19cccea7f0972eb", "author": {"user": {"login": "mposolda", "name": "Marek Posolda"}}, "url": "https://github.com/keycloak/keycloak/commit/04895150bbea256600b1c619d19cccea7f0972eb", "committedDate": "2020-03-27T08:53:31Z", "message": "KEYCLOAK-13442 Backwards compatibility in users searching. searchForUser(String, RealmModel, int, int) is no longer called when searching users from the admin console"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyNzU3Njk4", "url": "https://github.com/keycloak/keycloak/pull/6937#pullrequestreview-382757698", "createdAt": "2020-03-27T10:57:33Z", "commit": {"oid": "04895150bbea256600b1c619d19cccea7f0972eb"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d5933a363cc3f46813a69552cc00e2b29df6379", "author": {"user": {"login": "mposolda", "name": "Marek Posolda"}}, "url": "https://github.com/keycloak/keycloak/commit/8d5933a363cc3f46813a69552cc00e2b29df6379", "committedDate": "2020-03-27T11:16:43Z", "message": "KEYCLOAK-13442 Backwards compatibility in users searching. searchForUser(String, RealmModel, int, int) is no longer called when searching users from the admin console"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "04895150bbea256600b1c619d19cccea7f0972eb", "author": {"user": {"login": "mposolda", "name": "Marek Posolda"}}, "url": "https://github.com/keycloak/keycloak/commit/04895150bbea256600b1c619d19cccea7f0972eb", "committedDate": "2020-03-27T08:53:31Z", "message": "KEYCLOAK-13442 Backwards compatibility in users searching. searchForUser(String, RealmModel, int, int) is no longer called when searching users from the admin console"}, "afterCommit": {"oid": "8d5933a363cc3f46813a69552cc00e2b29df6379", "author": {"user": {"login": "mposolda", "name": "Marek Posolda"}}, "url": "https://github.com/keycloak/keycloak/commit/8d5933a363cc3f46813a69552cc00e2b29df6379", "committedDate": "2020-03-27T11:16:43Z", "message": "KEYCLOAK-13442 Backwards compatibility in users searching. searchForUser(String, RealmModel, int, int) is no longer called when searching users from the admin console"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyODAxMzM2", "url": "https://github.com/keycloak/keycloak/pull/6937#pullrequestreview-382801336", "createdAt": "2020-03-27T12:10:23Z", "commit": {"oid": "8d5933a363cc3f46813a69552cc00e2b29df6379"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyODA3MDE3", "url": "https://github.com/keycloak/keycloak/pull/6937#pullrequestreview-382807017", "createdAt": "2020-03-27T12:19:30Z", "commit": {"oid": "8d5933a363cc3f46813a69552cc00e2b29df6379"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyODA4NDA0", "url": "https://github.com/keycloak/keycloak/pull/6937#pullrequestreview-382808404", "createdAt": "2020-03-27T12:21:43Z", "commit": {"oid": "8d5933a363cc3f46813a69552cc00e2b29df6379"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3116, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}