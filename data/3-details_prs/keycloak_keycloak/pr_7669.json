{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0NDczNjY2", "number": 7669, "title": "KEYCLOAK-16566 Display Id Provider DisplayName instead of Alias on login-idp-link-*.ftl", "bodyText": "The login-idp-link-confirm.ftl and login-idp-link-email.ftl page shows idpAlias as Title. It should be possible to show the user friendly DisplayName of IdentityProviders.", "createdAt": "2020-12-08T14:05:25Z", "url": "https://github.com/keycloak/keycloak/pull/7669", "merged": true, "mergeCommit": {"oid": "70a20ef50d23fce0f943948ff354f2aec858cfe2"}, "closed": true, "closedAt": "2021-01-12T19:56:20Z", "author": {"login": "loaded02"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkMxTGgBqjQwODU2NDQ0NTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdvgrFjAFqTU2NjY0MDQzMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "952062a96ec81ab1ed4e76a7301d2025a3054b3d", "author": {"user": null}, "url": "https://github.com/keycloak/keycloak/commit/952062a96ec81ab1ed4e76a7301d2025a3054b3d", "committedDate": "2020-12-08T16:28:08Z", "message": "display idp displayName if available"}, "afterCommit": {"oid": "dd614c0645114b4eedc64c77be7aa4a861dad376", "author": {"user": null}, "url": "https://github.com/keycloak/keycloak/commit/dd614c0645114b4eedc64c77be7aa4a861dad376", "committedDate": "2020-12-08T16:30:29Z", "message": "display idp displayName if available"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dd614c0645114b4eedc64c77be7aa4a861dad376", "author": {"user": null}, "url": "https://github.com/keycloak/keycloak/commit/dd614c0645114b4eedc64c77be7aa4a861dad376", "committedDate": "2020-12-08T16:30:29Z", "message": "display idp displayName if available"}, "afterCommit": {"oid": "fe597c79d6ee89505f71d88b2192e1f3640770a6", "author": {"user": null}, "url": "https://github.com/keycloak/keycloak/commit/fe597c79d6ee89505f71d88b2192e1f3640770a6", "committedDate": "2020-12-09T07:47:14Z", "message": "KEYCLOAK-16566 Display Idp displayName if available"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4NTk5MjUy", "url": "https://github.com/keycloak/keycloak/pull/7669#pullrequestreview-548599252", "createdAt": "2020-12-09T20:53:09Z", "commit": {"oid": "fe597c79d6ee89505f71d88b2192e1f3640770a6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQyMDo1MzoxMFrOICo-lg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQyMDo1MzoxMFrOICo-lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTYzOTQ0Ng==", "bodyText": "This would give misleading information to the attributes. idpAlias must contain identity provider alias. You can however add another attribute, e.g. idpDisplayName, that would be display name (if set) or alias (if displayname unset), and use that in the template.", "url": "https://github.com/keycloak/keycloak/pull/7669#discussion_r539639446", "createdAt": "2020-12-09T20:53:10Z", "author": {"login": "hmlnarik"}, "path": "services/src/main/java/org/keycloak/forms/login/freemarker/FreeMarkerLoginFormsProvider.java", "diffHunk": "@@ -209,6 +209,9 @@ protected Response createResponse(LoginFormsPages page) {\n                 BrokeredIdentityContext brokerContext = (BrokeredIdentityContext) this.attributes.get(IDENTITY_PROVIDER_BROKER_CONTEXT);\n                 String idpAlias = brokerContext.getIdpConfig().getAlias();\n                 idpAlias = ObjectUtil.capitalize(idpAlias);\n+                if (!ObjectUtil.isBlank(brokerContext.getIdpConfig().getDisplayName())) {\n+                    idpAlias = brokerContext.getIdpConfig().getDisplayName();\n+                }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe597c79d6ee89505f71d88b2192e1f3640770a6"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fe597c79d6ee89505f71d88b2192e1f3640770a6", "author": {"user": null}, "url": "https://github.com/keycloak/keycloak/commit/fe597c79d6ee89505f71d88b2192e1f3640770a6", "committedDate": "2020-12-09T07:47:14Z", "message": "KEYCLOAK-16566 Display Idp displayName if available"}, "afterCommit": {"oid": "c28b7ae38d6f11f23e8d914df7aae95a037075b2", "author": {"user": null}, "url": "https://github.com/keycloak/keycloak/commit/c28b7ae38d6f11f23e8d914df7aae95a037075b2", "committedDate": "2020-12-12T09:57:15Z", "message": "KEYCLOAK-16566 Display Idp displayName if available"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwNzA3MTU3", "url": "https://github.com/keycloak/keycloak/pull/7669#pullrequestreview-550707157", "createdAt": "2020-12-12T09:59:15Z", "commit": {"oid": "c28b7ae38d6f11f23e8d914df7aae95a037075b2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMlQwOTo1OToxNVrOIEdTCw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMlQwOTo1OToxNVrOIEdTCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTU0NTIyNw==", "bodyText": "Hi @hmlnarik, please check again, if I understood it correctly.", "url": "https://github.com/keycloak/keycloak/pull/7669#discussion_r541545227", "createdAt": "2020-12-12T09:59:15Z", "author": {"login": "loaded02"}, "path": "services/src/main/java/org/keycloak/forms/login/freemarker/FreeMarkerLoginFormsProvider.java", "diffHunk": "@@ -209,6 +209,9 @@ protected Response createResponse(LoginFormsPages page) {\n                 BrokeredIdentityContext brokerContext = (BrokeredIdentityContext) this.attributes.get(IDENTITY_PROVIDER_BROKER_CONTEXT);\n                 String idpAlias = brokerContext.getIdpConfig().getAlias();\n                 idpAlias = ObjectUtil.capitalize(idpAlias);\n+                if (!ObjectUtil.isBlank(brokerContext.getIdpConfig().getDisplayName())) {\n+                    idpAlias = brokerContext.getIdpConfig().getDisplayName();\n+                }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTYzOTQ0Ng=="}, "originalCommit": {"oid": "fe597c79d6ee89505f71d88b2192e1f3640770a6"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUzNjE4MjU1", "url": "https://github.com/keycloak/keycloak/pull/7669#pullrequestreview-553618255", "createdAt": "2020-12-16T12:00:17Z", "commit": {"oid": "c28b7ae38d6f11f23e8d914df7aae95a037075b2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxMjowMDoxOFrOIHB44g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxMjowMTozNVrOIHB7ow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDI0MTg5MA==", "bodyText": "idpAlias must be retained, idpDisplayName is a new attribute", "url": "https://github.com/keycloak/keycloak/pull/7669#discussion_r544241890", "createdAt": "2020-12-16T12:00:18Z", "author": {"login": "hmlnarik"}, "path": "services/src/main/java/org/keycloak/forms/login/freemarker/FreeMarkerLoginFormsProvider.java", "diffHunk": "@@ -209,9 +209,13 @@ protected Response createResponse(LoginFormsPages page) {\n                 BrokeredIdentityContext brokerContext = (BrokeredIdentityContext) this.attributes.get(IDENTITY_PROVIDER_BROKER_CONTEXT);\n                 String idpAlias = brokerContext.getIdpConfig().getAlias();\n                 idpAlias = ObjectUtil.capitalize(idpAlias);\n+                String displayName = idpAlias;\n+                if (!ObjectUtil.isBlank(brokerContext.getIdpConfig().getDisplayName())) {\n+                    displayName = brokerContext.getIdpConfig().getDisplayName();\n+                }\n \n                 attributes.put(\"brokerContext\", brokerContext);\n-                attributes.put(\"idpAlias\", idpAlias);\n+                attributes.put(\"idpDisplayName\", displayName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c28b7ae38d6f11f23e8d914df7aae95a037075b2"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDI0MjU5NQ==", "bodyText": "This part is correct, yet see below", "url": "https://github.com/keycloak/keycloak/pull/7669#discussion_r544242595", "createdAt": "2020-12-16T12:01:35Z", "author": {"login": "hmlnarik"}, "path": "services/src/main/java/org/keycloak/forms/login/freemarker/FreeMarkerLoginFormsProvider.java", "diffHunk": "@@ -209,6 +209,9 @@ protected Response createResponse(LoginFormsPages page) {\n                 BrokeredIdentityContext brokerContext = (BrokeredIdentityContext) this.attributes.get(IDENTITY_PROVIDER_BROKER_CONTEXT);\n                 String idpAlias = brokerContext.getIdpConfig().getAlias();\n                 idpAlias = ObjectUtil.capitalize(idpAlias);\n+                if (!ObjectUtil.isBlank(brokerContext.getIdpConfig().getDisplayName())) {\n+                    idpAlias = brokerContext.getIdpConfig().getDisplayName();\n+                }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTYzOTQ0Ng=="}, "originalCommit": {"oid": "fe597c79d6ee89505f71d88b2192e1f3640770a6"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b574f772f4b0d9a1dddeac07a4f60f96b38a6a96", "author": {"user": null}, "url": "https://github.com/keycloak/keycloak/commit/b574f772f4b0d9a1dddeac07a4f60f96b38a6a96", "committedDate": "2020-12-16T15:40:16Z", "message": "KEYCLOAK-16566 Display Idp displayName if available"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c28b7ae38d6f11f23e8d914df7aae95a037075b2", "author": {"user": null}, "url": "https://github.com/keycloak/keycloak/commit/c28b7ae38d6f11f23e8d914df7aae95a037075b2", "committedDate": "2020-12-12T09:57:15Z", "message": "KEYCLOAK-16566 Display Idp displayName if available"}, "afterCommit": {"oid": "b574f772f4b0d9a1dddeac07a4f60f96b38a6a96", "author": {"user": null}, "url": "https://github.com/keycloak/keycloak/commit/b574f772f4b0d9a1dddeac07a4f60f96b38a6a96", "committedDate": "2020-12-16T15:40:16Z", "message": "KEYCLOAK-16566 Display Idp displayName if available"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY2NjQwNDMz", "url": "https://github.com/keycloak/keycloak/pull/7669#pullrequestreview-566640433", "createdAt": "2021-01-12T19:55:42Z", "commit": {"oid": "b574f772f4b0d9a1dddeac07a4f60f96b38a6a96"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3311, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}