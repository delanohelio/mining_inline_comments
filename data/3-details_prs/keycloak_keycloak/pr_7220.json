{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQyNTM0ODc0", "number": 7220, "title": "KEYCLOAK-13983 Include algorithm parameters", "bodyText": "Adds the capacity to add both public and secret algorithm\nspecific data to a PasswordCredentialModel. The default\nway to create the models in maintained to minimize the change\nimpact for the default hash infrastructure.\nPublishes the PasswordCredentialModel constructor to\nease in building such extended credential models.", "createdAt": "2020-07-01T08:35:08Z", "url": "https://github.com/keycloak/keycloak/pull/7220", "merged": true, "mergeCommit": {"oid": "73564c5815436e803b9d009e6efc25b3eb8e8335"}, "closed": true, "closedAt": "2020-10-12T08:12:02Z", "author": {"login": "Norwae"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwmBv8gH2gAyNDQyNTM0ODc0OjcxMjdmZmE0OGJiZjdiY2NmNDQ3ZDM4ODYxYmZlYTYxNTllMDQ0MGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdRvdoVgFqTUwNjM4ODQzNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7127ffa48bbf7bccf447d38861bfea6159e0440c", "author": {"user": {"login": "Norwae", "name": null}}, "url": "https://github.com/keycloak/keycloak/commit/7127ffa48bbf7bccf447d38861bfea6159e0440c", "committedDate": "2020-07-01T08:32:45Z", "message": "KEYCLOAK-13983 Include algorithm parameters\n\nAdds the capacity to add both public and secret algorithm\nspecific data to a PasswordCredentialModel. The default\nway to create the models in maintained to minimize the change\nimpact for the default hash infrastructure.\n\nPublishes the PasswordCredentialModel constructor to\nease in building such extended credential models."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2Nzc2NDQz", "url": "https://github.com/keycloak/keycloak/pull/7220#pullrequestreview-456776443", "createdAt": "2020-07-28T15:53:49Z", "commit": {"oid": "7127ffa48bbf7bccf447d38861bfea6159e0440c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3MjM1NDYw", "url": "https://github.com/keycloak/keycloak/pull/7220#pullrequestreview-457235460", "createdAt": "2020-07-29T06:44:00Z", "commit": {"oid": "7127ffa48bbf7bccf447d38861bfea6159e0440c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwNjo0NDowMFrOG4qt3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOVQwNjo0NDowMFrOG4qt3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjA3MzMwOA==", "bodyText": "Just for the sake of compatibility with other implementations, could we keep the constructor private and instead introduce other static method like for example:\npublic static PasswordCredentialModel createFromValues(String algorithm, byte[] salt, int hashIterations, String \nencodedPassword, MultivaluedHashMap<String, String> otherCredentialData,, MultivaluedHashMap<String, String> otherSecretData)\n\nThe current method signature \"createFromValues\" needs to be kept as well for the backwards compatibility, but it can just call the new method. Something like:\npublic static PasswordCredentialModel createFromValues(String algorithm, byte[] salt, int hashIterations, String encodedPassword) {\n    createFromValues(algorithm, salt, hashIterations, encodedPassword, Collections.emptyMap(), Collections.emptyMap());\n}", "url": "https://github.com/keycloak/keycloak/pull/7220#discussion_r462073308", "createdAt": "2020-07-29T06:44:00Z", "author": {"login": "mposolda"}, "path": "server-spi/src/main/java/org/keycloak/models/credential/PasswordCredentialModel.java", "diffHunk": "@@ -15,7 +15,7 @@\n     private final PasswordCredentialData credentialData;\n     private final PasswordSecretData secretData;\n \n-    private PasswordCredentialModel(PasswordCredentialData credentialData, PasswordSecretData secretData) {\n+    public PasswordCredentialModel(PasswordCredentialData credentialData, PasswordSecretData secretData) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7127ffa48bbf7bccf447d38861bfea6159e0440c"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04c267537b41902e3cad8f11b7068eb6603ead51", "author": {"user": null}, "url": "https://github.com/keycloak/keycloak/commit/04c267537b41902e3cad8f11b7068eb6603ead51", "committedDate": "2020-08-04T08:13:08Z", "message": "KEYCLOAK-13983 Include algorithm parameters\n\nInclude suggestions made by @mposolda to enable more generic\nusage"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwNzM4Njk3", "url": "https://github.com/keycloak/keycloak/pull/7220#pullrequestreview-460738697", "createdAt": "2020-08-04T11:49:23Z", "commit": {"oid": "04c267537b41902e3cad8f11b7068eb6603ead51"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxMTo0OToyM1rOG7c42A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxMTo1MjoyMlrOG7c_Jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk5MjQ3Mg==", "bodyText": "Could you lazily create the instance on the getter method and avoid creating this instance every time an instance is created? We are working on reducing footprint and small changes like will help.", "url": "https://github.com/keycloak/keycloak/pull/7220#discussion_r464992472", "createdAt": "2020-08-04T11:49:23Z", "author": {"login": "pedroigor"}, "path": "server-spi/src/main/java/org/keycloak/models/credential/dto/PasswordSecretData.java", "diffHunk": "@@ -26,9 +40,15 @@ public PasswordSecretData(@JsonProperty(\"value\") String value, @JsonProperty(\"sa\n         }\n     }\n \n+    /**\n+     * Default creator (Secret consists only of a value and a single salt)\n+     * @param value hash value\n+     * @param salt salt\n+     */\n     public PasswordSecretData(String value, byte[] salt) {\n         this.value = value;\n         this.salt = salt;\n+        this.additionalParameters = new MultivaluedHashMap<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04c267537b41902e3cad8f11b7068eb6603ead51"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk5NDA4Nw==", "bodyText": "Can we remove this change from this PR? It looks OK, but I would prefer making theme related changes in a separate PR. Otherwise, we are going to need to include a few more people to the review :)", "url": "https://github.com/keycloak/keycloak/pull/7220#discussion_r464994087", "createdAt": "2020-08-04T11:52:22Z", "author": {"login": "pedroigor"}, "path": "themes/src/main/resources/theme/keycloak/common/resources/node_modules/rcue/dist/img/git-logo.svg", "diffHunk": "@@ -1,21 +0,0 @@\n-<?xml version=\"1.0\" encoding=\"utf-8\"?>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04c267537b41902e3cad8f11b7068eb6603ead51"}, "originalPosition": 1}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e178af1213bc99277dddd8d23a97062e01bf926", "author": {"user": null}, "url": "https://github.com/keycloak/keycloak/commit/7e178af1213bc99277dddd8d23a97062e01bf926", "committedDate": "2020-08-04T13:25:41Z", "message": "KEYCLOAK-13983 Include algorithm parameters\n\nRestore accidental change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9a03510e57adaeae1d725a100630f3a6a098ba2", "author": {"user": null}, "url": "https://github.com/keycloak/keycloak/commit/a9a03510e57adaeae1d725a100630f3a6a098ba2", "committedDate": "2020-08-07T09:27:10Z", "message": "KEYCLOAK-13983 Include algorithm parameters\n\nLazy initialization of additional parameters"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzMjU2MTA2", "url": "https://github.com/keycloak/keycloak/pull/7220#pullrequestreview-463256106", "createdAt": "2020-08-07T12:02:15Z", "commit": {"oid": "a9a03510e57adaeae1d725a100630f3a6a098ba2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2Mzg4NDM3", "url": "https://github.com/keycloak/keycloak/pull/7220#pullrequestreview-506388437", "createdAt": "2020-10-12T08:11:52Z", "commit": {"oid": "a9a03510e57adaeae1d725a100630f3a6a098ba2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3020, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}