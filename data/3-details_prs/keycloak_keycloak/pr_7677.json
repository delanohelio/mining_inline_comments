{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM5MzE4OTQ0", "number": 7677, "title": "KEYCLOAK-15695 Streamification cleanup", "bodyText": "REST endpoints cleanup (Authz skipped for now)\n Javadocs improvement\n server-spi-private cleanup\n unify first and max parameters", "createdAt": "2020-12-14T10:00:33Z", "url": "https://github.com/keycloak/keycloak/pull/7677", "merged": true, "mergeCommit": {"oid": "9f580e3ed868223a7d5c3d59481e5f9535a9e163"}, "closed": true, "closedAt": "2021-01-20T13:39:54Z", "author": {"login": "martin-kanis"}, "timelineItems": {"totalCount": 27, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdmGzKKABqjQxMDk1OTM0NTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdx-Fu5AFqTU3MjEyMDg3Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c1c7f4ffc5454bc2838ea290eb13ce6c6c325e4b", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/c1c7f4ffc5454bc2838ea290eb13ce6c6c325e4b", "committedDate": "2020-12-14T09:55:56Z", "message": "KEYCLOAK-15695 Streamification cleanup"}, "afterCommit": {"oid": "3de58c6e1b412ac1806cb037b708ef38c77df38b", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/3de58c6e1b412ac1806cb037b708ef38c77df38b", "committedDate": "2020-12-14T14:41:22Z", "message": "KEYCLOAK-15695 Streamification cleanup"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3de58c6e1b412ac1806cb037b708ef38c77df38b", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/3de58c6e1b412ac1806cb037b708ef38c77df38b", "committedDate": "2020-12-14T14:41:22Z", "message": "KEYCLOAK-15695 Streamification cleanup"}, "afterCommit": {"oid": "7de3a89f684f83edd7e140dc97148696c3e182f3", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/7de3a89f684f83edd7e140dc97148696c3e182f3", "committedDate": "2020-12-16T19:44:49Z", "message": "KEYCLOAK-15695 Streamification cleanup"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7de3a89f684f83edd7e140dc97148696c3e182f3", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/7de3a89f684f83edd7e140dc97148696c3e182f3", "committedDate": "2020-12-16T19:44:49Z", "message": "KEYCLOAK-15695 Streamification cleanup"}, "afterCommit": {"oid": "fc2d84581dcbba0831a80525373a19a241073229", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/fc2d84581dcbba0831a80525373a19a241073229", "committedDate": "2020-12-16T19:48:17Z", "message": "KEYCLOAK-15695 Streamification cleanup"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fc2d84581dcbba0831a80525373a19a241073229", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/fc2d84581dcbba0831a80525373a19a241073229", "committedDate": "2020-12-16T19:48:17Z", "message": "KEYCLOAK-15695 Streamification cleanup"}, "afterCommit": {"oid": "7beadfeca11325ba847c1d02b7a4e17a32046be6", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/7beadfeca11325ba847c1d02b7a4e17a32046be6", "committedDate": "2020-12-16T21:02:21Z", "message": "KEYCLOAK-15695 Streamification cleanup"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7beadfeca11325ba847c1d02b7a4e17a32046be6", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/7beadfeca11325ba847c1d02b7a4e17a32046be6", "committedDate": "2020-12-16T21:02:21Z", "message": "KEYCLOAK-15695 Streamification cleanup"}, "afterCommit": {"oid": "beb1f2d2e70d6077e97f488b4c2c80dd63578d6a", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/beb1f2d2e70d6077e97f488b4c2c80dd63578d6a", "committedDate": "2020-12-17T11:46:43Z", "message": "KEYCLOAK-15695 Streamification cleanup"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c29719126d8d98e0ea7f3a56d909c7a079210bae", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/c29719126d8d98e0ea7f3a56d909c7a079210bae", "committedDate": "2021-01-06T09:08:26Z", "message": "KEYCLOAK-15695 Server-spi-private cleanup"}, "afterCommit": {"oid": "410df0dc432fccc3c1f1ed9391ea151ab475218c", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/410df0dc432fccc3c1f1ed9391ea151ab475218c", "committedDate": "2021-01-06T13:58:03Z", "message": "KEYCLOAK-15695 Server-spi-private cleanup"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "410df0dc432fccc3c1f1ed9391ea151ab475218c", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/410df0dc432fccc3c1f1ed9391ea151ab475218c", "committedDate": "2021-01-06T13:58:03Z", "message": "KEYCLOAK-15695 Server-spi-private cleanup"}, "afterCommit": {"oid": "6b571f4b2ad37f9992648df079090ad1f72d9681", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/6b571f4b2ad37f9992648df079090ad1f72d9681", "committedDate": "2021-01-06T18:36:30Z", "message": "KEYCLOAK-15695 Server-spi-private cleanup"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6b571f4b2ad37f9992648df079090ad1f72d9681", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/6b571f4b2ad37f9992648df079090ad1f72d9681", "committedDate": "2021-01-06T18:36:30Z", "message": "KEYCLOAK-15695 Server-spi-private cleanup"}, "afterCommit": {"oid": "ddcf3802aa3c55ecf298151d8a6c03fe2449f330", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/ddcf3802aa3c55ecf298151d8a6c03fe2449f330", "committedDate": "2021-01-07T09:30:08Z", "message": "KEYCLOAK-15695 Server-spi-private cleanup"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "77868124bf62eb5d1d9c62f964f74552e68fc6e1", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/77868124bf62eb5d1d9c62f964f74552e68fc6e1", "committedDate": "2021-01-11T11:37:11Z", "message": "KEYCLOAK-15695 Unify first & max parameters and javadocs"}, "afterCommit": {"oid": "41ba09ac88192be33523dc4441079a35ed6cfea6", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/41ba09ac88192be33523dc4441079a35ed6cfea6", "committedDate": "2021-01-11T11:44:02Z", "message": "KEYCLOAK-15695 Unify first & max parameters and javadocs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY0ODExNzc0", "url": "https://github.com/keycloak/keycloak/pull/7677#pullrequestreview-564811774", "createdAt": "2021-01-09T21:26:21Z", "commit": {"oid": "ddcf3802aa3c55ecf298151d8a6c03fe2449f330"}, "state": "COMMENTED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOVQyMToyNjoyM1rOIQydjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOVQyMjoyMTozOVrOIQyw1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDQ3NDg5NA==", "bodyText": "What is the reason for this change? Could the distinct be rather part of the respective SQL statement?", "url": "https://github.com/keycloak/keycloak/pull/7677#discussion_r554474894", "createdAt": "2021-01-09T21:26:23Z", "author": {"login": "hmlnarik"}, "path": "model/jpa/src/main/java/org/keycloak/models/jpa/GroupAdapter.java", "diffHunk": "@@ -123,7 +123,7 @@ public void removeChild(GroupModel subGroup) {\n     public Stream<GroupModel> getSubGroupsStream() {\n         TypedQuery<String> query = em.createNamedQuery(\"getGroupIdsByParent\", String.class);\n         query.setParameter(\"parent\", group.getId());\n-        return closing(query.getResultStream().map(realm::getGroupById).filter(Objects::nonNull));\n+        return closing(query.getResultStream().map(realm::getGroupById).filter(Objects::nonNull).distinct());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ddcf3802aa3c55ecf298151d8a6c03fe2449f330"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDQ3NTA4Nw==", "bodyText": "Rather predefine a private static final Set with the classes and refer to contains method of that one instead.", "url": "https://github.com/keycloak/keycloak/pull/7677#discussion_r554475087", "createdAt": "2021-01-09T21:28:15Z", "author": {"login": "hmlnarik"}, "path": "quarkus/deployment/src/main/java/org/keycloak/quarkus/deployment/KeycloakProcessor.java", "diffHunk": "@@ -250,34 +250,30 @@ void configureDevMode(BuildProducer<HotDeploymentWatchedFileBuildItem> hotFiles)\n         ProviderManager pm = new ProviderManager(KeycloakDeploymentInfo.create().services(), new BuildClassLoader());\n         Map<Spi, Map<Class<? extends Provider>, Map<String, ProviderFactory>>> factories = new HashMap<>();\n \n-        for (Spi spi : pm.loadSpis()) {\n+        pm.loadSpis().forEach(spi -> {\n             Map<Class<? extends Provider>, Map<String, ProviderFactory>> providers = new HashMap<>();\n \n-            for (ProviderFactory factory : pm.load(spi)) {\n-                if (Arrays.asList(\n-                        JBossJtaTransactionManagerLookup.class,\n-                        DefaultJpaConnectionProviderFactory.class,\n-                        DefaultLiquibaseConnectionProvider.class,\n-                        LiquibaseJpaUpdaterProviderFactory.class).contains(factory.getClass())) {\n-                    continue;\n-                }\n-\n-                Config.Scope scope = Config.scope(spi.getName(), factory.getId());\n-\n-                if (isEnabled(factory, scope)) {\n-                    if (spi.isInternal() && !isInternal(factory)) {\n-                        ServicesLogger.LOGGER.spiMayChange(factory.getId(), factory.getClass().getName(), spi.getName());\n-                    }\n-\n-                    providers.computeIfAbsent(spi.getProviderClass(), aClass -> new HashMap<>()).put(factory.getId(),\n-                            factory);\n-                } else {\n-                    logger.debugv(\"SPI {0} provider {1} disabled\", spi.getName(), factory.getId());\n-                }\n-            }\n-\n+            pm.load(spi).filter(factory -> !Arrays.asList(\n+                            JBossJtaTransactionManagerLookup.class,\n+                            DefaultJpaConnectionProviderFactory.class,\n+                            DefaultLiquibaseConnectionProvider.class,\n+                            LiquibaseJpaUpdaterProviderFactory.class).contains(factory.getClass()))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ddcf3802aa3c55ecf298151d8a6c03fe2449f330"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDQ3NTE3Nw==", "bodyText": "I'd rather keep this class as it was.", "url": "https://github.com/keycloak/keycloak/pull/7677#discussion_r554475177", "createdAt": "2021-01-09T21:29:23Z", "author": {"login": "hmlnarik"}, "path": "quarkus/deployment/src/main/java/org/keycloak/quarkus/deployment/KeycloakProcessor.java", "diffHunk": "@@ -250,34 +250,30 @@ void configureDevMode(BuildProducer<HotDeploymentWatchedFileBuildItem> hotFiles)\n         ProviderManager pm = new ProviderManager(KeycloakDeploymentInfo.create().services(), new BuildClassLoader());\n         Map<Spi, Map<Class<? extends Provider>, Map<String, ProviderFactory>>> factories = new HashMap<>();\n \n-        for (Spi spi : pm.loadSpis()) {\n+        pm.loadSpis().forEach(spi -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ddcf3802aa3c55ecf298151d8a6c03fe2449f330"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDQ3NTUxMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public Stream<PolicyProviderFactory> getProviderFactories() {\n          \n          \n            \n                public Stream<PolicyProviderFactory> getProviderFactoriesStream() {", "url": "https://github.com/keycloak/keycloak/pull/7677#discussion_r554475513", "createdAt": "2021-01-09T21:33:19Z", "author": {"login": "hmlnarik"}, "path": "server-spi-private/src/main/java/org/keycloak/authorization/AuthorizationProvider.java", "diffHunk": "@@ -126,11 +127,11 @@ public StoreFactory getLocalStoreFactory() {\n     /**\n      * Returns the registered {@link PolicyProviderFactory}.\n      *\n-     * @return a {@link List} containing all registered {@link PolicyProviderFactory}\n+     * @return a {@link Stream} containing all registered {@link PolicyProviderFactory}\n      */\n-    public Collection<PolicyProviderFactory> getProviderFactories() {\n-        return keycloakSession.getKeycloakSessionFactory().getProviderFactories(PolicyProvider.class).stream().map(\n-                PolicyProviderFactory.class::cast).collect(Collectors.toList());\n+    public Stream<PolicyProviderFactory> getProviderFactories() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ddcf3802aa3c55ecf298151d8a6c03fe2449f330"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDQ3NTk1OA==", "bodyText": "I'd rather keep this class as is. This is not used often and stream processing here is not beneficial. This applies to dependent classes (like DefaultKeycloakSessionFactory) as well.", "url": "https://github.com/keycloak/keycloak/pull/7677#discussion_r554475958", "createdAt": "2021-01-09T21:37:51Z", "author": {"login": "hmlnarik"}, "path": "server-spi-private/src/main/java/org/keycloak/provider/ProviderLoader.java", "diffHunk": "@@ -18,6 +18,8 @@\n package org.keycloak.provider;\n \n import java.util.List;\n+import java.util.stream.Collectors;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ddcf3802aa3c55ecf298151d8a6c03fe2449f330"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDQ3NjE4NQ==", "bodyText": "I'd keep getSpis as was", "url": "https://github.com/keycloak/keycloak/pull/7677#discussion_r554476185", "createdAt": "2021-01-09T21:40:05Z", "author": {"login": "hmlnarik"}, "path": "server-spi/src/main/java/org/keycloak/models/KeycloakSessionFactory.java", "diffHunk": "@@ -32,15 +34,45 @@\n public interface KeycloakSessionFactory extends ProviderEventManager {\n     KeycloakSession create();\n \n-    Set<Spi> getSpis();\n+    /**", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ddcf3802aa3c55ecf298151d8a6c03fe2449f330"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDQ3ODk3MA==", "bodyText": "I'd rather keep this file as was", "url": "https://github.com/keycloak/keycloak/pull/7677#discussion_r554478970", "createdAt": "2021-01-09T22:11:29Z", "author": {"login": "hmlnarik"}, "path": "services/src/main/java/org/keycloak/services/resources/admin/info/ServerInfoAdminResource.java", "diffHunk": "@@ -61,13 +59,17 @@\n import javax.ws.rs.core.Context;\n import javax.ws.rs.core.MediaType;\n import java.io.IOException;\n+import java.util.Arrays;\n import java.util.Collections;\n import java.util.Comparator;\n import java.util.HashMap;\n import java.util.LinkedHashMap;\n import java.util.LinkedList;\n import java.util.List;\n import java.util.Map;\n+import java.util.function.Function;\n+import java.util.stream.Collectors;\n+import java.util.stream.Stream;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ddcf3802aa3c55ecf298151d8a6c03fe2449f330"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDQ3OTgzMQ==", "bodyText": "Can this be handled via collect() to map instead?", "url": "https://github.com/keycloak/keycloak/pull/7677#discussion_r554479831", "createdAt": "2021-01-09T22:21:39Z", "author": {"login": "hmlnarik"}, "path": "testsuite/integration-arquillian/servers/auth-server/services/testsuite-providers/src/main/java/org/keycloak/testsuite/util/FeatureDeployerUtil.java", "diffHunk": "@@ -126,17 +125,10 @@ private static KeycloakDeploymentInfo createDeploymentInfo(Map<ProviderFactory,\n         DefaultProviderLoader loader = new DefaultProviderLoader(di, classLoader);\n \n         Map<ProviderFactory, Spi> providerFactories = new HashMap<>();\n-        for (Spi spi : loader.loadSpis()) {\n-            List<ProviderFactory> currentFactories = loader.load(spi);\n-            for (ProviderFactory factory : currentFactories) {\n-                if (factory instanceof EnvironmentDependentProviderFactory) {\n-                    if (((EnvironmentDependentProviderFactory) factory).isSupported()) {\n-                        providerFactories.put(factory, spi);\n-                    }\n-                }\n-\n-            }\n-        }\n+        loader.loadSpisStream().forEach(spi -> loader.loadStream(spi)\n+                .filter(EnvironmentDependentProviderFactory.class::isInstance)\n+                .filter(factory -> ((EnvironmentDependentProviderFactory) factory).isSupported())\n+                .forEach(factory -> providerFactories.put(factory, spi)));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ddcf3802aa3c55ecf298151d8a6c03fe2449f330"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY1ODU2ODQ3", "url": "https://github.com/keycloak/keycloak/pull/7677#pullrequestreview-565856847", "createdAt": "2021-01-12T00:56:41Z", "commit": {"oid": "41ba09ac88192be33523dc4441079a35ed6cfea6"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMlQwMDo1Njo0MVrOIRtPWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xMlQwMTowNTo1MVrOIRtZ9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTQzNzkxNA==", "bodyText": "Can we use PaginationUtils.paginateQuery instead?", "url": "https://github.com/keycloak/keycloak/pull/7677#discussion_r555437914", "createdAt": "2021-01-12T00:56:41Z", "author": {"login": "vramik"}, "path": "model/jpa/src/main/java/org/keycloak/events/jpa/JpaAdminEventQuery.java", "diffHunk": "@@ -153,11 +153,11 @@ public AdminEventQuery maxResults(int maxResults) {\n \n         TypedQuery<AdminEventEntity> query = em.createQuery(cq);\n \n-        if (firstResult != null) {\n+        if (firstResult != null && firstResult > 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41ba09ac88192be33523dc4441079a35ed6cfea6"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTQzODAzOA==", "bodyText": "same here", "url": "https://github.com/keycloak/keycloak/pull/7677#discussion_r555438038", "createdAt": "2021-01-12T00:57:02Z", "author": {"login": "vramik"}, "path": "model/jpa/src/main/java/org/keycloak/events/jpa/JpaEventQuery.java", "diffHunk": "@@ -127,11 +127,11 @@ public EventQuery maxResults(int maxResults) {\n \n         TypedQuery<EventEntity> query = em.createQuery(cq);\n \n-        if (firstResult != null) {\n+        if (firstResult != null && firstResult > 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41ba09ac88192be33523dc4441079a35ed6cfea6"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTQ0MDYzMQ==", "bodyText": "I found out the meaning of expanded roles term only from javadoc above. Maybe it'd be worth to rewrite this javadoc to include the info that it returns all roles included composite ones, wdyt?", "url": "https://github.com/keycloak/keycloak/pull/7677#discussion_r555440631", "createdAt": "2021-01-12T01:05:51Z", "author": {"login": "vramik"}, "path": "server-spi/src/main/java/org/keycloak/models/ClientSessionContext.java", "diffHunk": "@@ -43,18 +43,23 @@\n \n     /**\n      * Returns client scopes as a stream.\n-     * @return Stream of client scopes.\n+     * @return Stream of client scopes. Never returns {@code null}.\n      */\n     Stream<ClientScopeModel> getClientScopesStream();\n \n     /**\n+     * @deprecated Use {@link #getRolesStream() getRolesStream} instead.\n      * @return expanded roles (composite roles already applied)\n      */\n     @Deprecated\n     default Set<RoleModel> getRoles() {\n         return getRolesStream().collect(Collectors.toSet());\n     }\n \n+    /**\n+     * Returns expanded roles as a stream.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "41ba09ac88192be33523dc4441079a35ed6cfea6"}, "originalPosition": 19}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "41ba09ac88192be33523dc4441079a35ed6cfea6", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/41ba09ac88192be33523dc4441079a35ed6cfea6", "committedDate": "2021-01-11T11:44:02Z", "message": "KEYCLOAK-15695 Unify first & max parameters and javadocs"}, "afterCommit": {"oid": "48c917a6ae05281830cda26b64137061cf7745f2", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/48c917a6ae05281830cda26b64137061cf7745f2", "committedDate": "2021-01-12T09:32:19Z", "message": "KEYCLOAK-15695 Unify first & max parameters and javadocs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "48c917a6ae05281830cda26b64137061cf7745f2", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/48c917a6ae05281830cda26b64137061cf7745f2", "committedDate": "2021-01-12T09:32:19Z", "message": "KEYCLOAK-15695 Unify first & max parameters and javadocs"}, "afterCommit": {"oid": "745b225cf2f0534fb1dc38daa7eaa29db770d8d3", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/745b225cf2f0534fb1dc38daa7eaa29db770d8d3", "committedDate": "2021-01-12T09:34:46Z", "message": "KEYCLOAK-15695 Unify first & max parameters and javadocs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "745b225cf2f0534fb1dc38daa7eaa29db770d8d3", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/745b225cf2f0534fb1dc38daa7eaa29db770d8d3", "committedDate": "2021-01-12T09:34:46Z", "message": "KEYCLOAK-15695 Unify first & max parameters and javadocs"}, "afterCommit": {"oid": "05a25b5ab5cbd65c679b52fb0a15cdb438a98959", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/05a25b5ab5cbd65c679b52fb0a15cdb438a98959", "committedDate": "2021-01-18T19:07:58Z", "message": "KEYCLOAK-15695 Unify first & max parameters and javadocs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcxMTc1NzU3", "url": "https://github.com/keycloak/keycloak/pull/7677#pullrequestreview-571175757", "createdAt": "2021-01-19T12:01:21Z", "commit": {"oid": "05a25b5ab5cbd65c679b52fb0a15cdb438a98959"}, "state": "COMMENTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xOVQxMjowMToyMVrOIWLbyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xOVQxMjozMjoxOVrOIWMdIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDEyNjkyMw==", "bodyText": "Ca you please explain this change for me?", "url": "https://github.com/keycloak/keycloak/pull/7677#discussion_r560126923", "createdAt": "2021-01-19T12:01:21Z", "author": {"login": "vramik"}, "path": "model/jpa/src/main/java/org/keycloak/models/jpa/GroupAdapter.java", "diffHunk": "@@ -247,7 +247,7 @@ public void grantRole(RoleModel role) {\n         // even if we're getting just the id.\n         TypedQuery<String> query = em.createNamedQuery(\"groupRoleMappingIds\", String.class);\n         query.setParameter(\"group\", getEntity());\n-        return closing(query.getResultStream().map(realm::getRoleById).filter(Objects::nonNull));\n+        return closing(query.getResultStream().map(realm::getRoleById).filter(Objects::nonNull).distinct());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "05a25b5ab5cbd65c679b52fb0a15cdb438a98959"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDEzMTYyOA==", "bodyText": "I wonder if we should add a javadoc to all methods from this interface, wdyt?", "url": "https://github.com/keycloak/keycloak/pull/7677#discussion_r560131628", "createdAt": "2021-01-19T12:10:20Z", "author": {"login": "vramik"}, "path": "server-spi/src/main/java/org/keycloak/models/RealmModel.java", "diffHunk": "@@ -460,6 +523,11 @@\n         return getIdentityProviderMappersByAliasStream(brokerAlias).collect(Collectors.toSet());\n     }\n \n+    /**\n+     * Returns identity provider mappers by the provided alias as a stream.\n+     * @param brokerAlias {@code String} Broker's alias to filter results.\n+     * @return Stream of {@link IdentityProviderMapperModel} Never returns {@code null}.\n+     */\n     Stream<IdentityProviderMapperModel> getIdentityProviderMappersByAliasStream(String brokerAlias);\n \n     IdentityProviderMapperModel addIdentityProviderMapper(IdentityProviderMapperModel model);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "05a25b5ab5cbd65c679b52fb0a15cdb438a98959"}, "originalPosition": 203}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDEzMjE1OA==", "bodyText": "same here, shouldn't we add javadoc to all?", "url": "https://github.com/keycloak/keycloak/pull/7677#discussion_r560132158", "createdAt": "2021-01-19T12:11:22Z", "author": {"login": "vramik"}, "path": "server-spi/src/main/java/org/keycloak/models/RealmProvider.java", "diffHunk": "@@ -69,13 +78,18 @@\n     void removeClientInitialAccessModel(RealmModel realm, String id);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "05a25b5ab5cbd65c679b52fb0a15cdb438a98959"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDEzMjY0MA==", "bodyText": "as well as here, should we add javadoc to all methods?", "url": "https://github.com/keycloak/keycloak/pull/7677#discussion_r560132640", "createdAt": "2021-01-19T12:12:15Z", "author": {"login": "vramik"}, "path": "server-spi/src/main/java/org/keycloak/models/RoleContainerModel.java", "diffHunk": "@@ -49,25 +49,51 @@\n \n     boolean removeRole(RoleModel role);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "05a25b5ab5cbd65c679b52fb0a15cdb438a98959"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDEzMzUxMg==", "bodyText": "same here", "url": "https://github.com/keycloak/keycloak/pull/7677#discussion_r560133512", "createdAt": "2021-01-19T12:13:58Z", "author": {"login": "vramik"}, "path": "server-spi/src/main/java/org/keycloak/models/RoleModel.java", "diffHunk": "@@ -44,11 +44,18 @@\n \n     void removeCompositeRole(RoleModel role);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "05a25b5ab5cbd65c679b52fb0a15cdb438a98959"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDEzNjkzNw==", "bodyText": "Is there any benefit to change it to forEach?", "url": "https://github.com/keycloak/keycloak/pull/7677#discussion_r560136937", "createdAt": "2021-01-19T12:20:11Z", "author": {"login": "vramik"}, "path": "services/src/main/java/org/keycloak/services/DefaultKeycloakSessionFactory.java", "diffHunk": "@@ -253,20 +254,19 @@ protected void checkProvider() {\n                 }\n \n             } else {\n-                for (ProviderFactory factory : pm.load(spi)) {\n+                pm.load(spi).forEach(factory -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "05a25b5ab5cbd65c679b52fb0a15cdb438a98959"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDE0MzY1MA==", "bodyText": "nit: Maybe we could create private method\nprivate ClientScopeRepresentation toRepresentation(ClientScopeModel clientScopeModel) {\n    ClientScopeRepresentation rep = new ClientScopeRepresentation();\n    rep.setId(clientScopeModel.getId());\n    rep.setName(clientScopeModel.getName());\n    return rep;\n}\n\nthen we could use\nreturn client.getClientScopes(defaultScope, true).values().stream()\n    .map(this::toRepresentation);\n\nwdyt?", "url": "https://github.com/keycloak/keycloak/pull/7677#discussion_r560143650", "createdAt": "2021-01-19T12:32:19Z", "author": {"login": "vramik"}, "path": "services/src/main/java/org/keycloak/services/resources/admin/ClientResource.java", "diffHunk": "@@ -298,21 +296,20 @@ public RoleContainerResource getRoleContainerResource() {\n     @NoCache\n     @Produces(MediaType.APPLICATION_JSON)\n     @Path(\"default-client-scopes\")\n-    public List<ClientScopeRepresentation> getDefaultClientScopes() {\n+    public Stream<ClientScopeRepresentation> getDefaultClientScopes() {\n         return getDefaultClientScopes(true);\n     }\n \n-    private List<ClientScopeRepresentation> getDefaultClientScopes(boolean defaultScope) {\n+    private Stream<ClientScopeRepresentation> getDefaultClientScopes(boolean defaultScope) {\n         auth.clients().requireView(client);\n \n-        List<ClientScopeRepresentation> defaults = new LinkedList<>();\n-        for (ClientScopeModel clientScope : client.getClientScopes(defaultScope, true).values()) {\n-            ClientScopeRepresentation rep = new ClientScopeRepresentation();\n-            rep.setId(clientScope.getId());\n-            rep.setName(clientScope.getName());\n-            defaults.add(rep);\n-        }\n-        return defaults;\n+        return client.getClientScopes(defaultScope, true).values().stream()\n+                .map(clientScope -> {\n+                    ClientScopeRepresentation rep = new ClientScopeRepresentation();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "05a25b5ab5cbd65c679b52fb0a15cdb438a98959"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcxMjY0NTI5", "url": "https://github.com/keycloak/keycloak/pull/7677#pullrequestreview-571264529", "createdAt": "2021-01-19T13:56:29Z", "commit": {"oid": "05a25b5ab5cbd65c679b52fb0a15cdb438a98959"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xOVQxMzo1NjozMFrOIWPcEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xOVQxNDoyNDoyMFrOIWQnZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDE5MjUzMQ==", "bodyText": "I'm assuming this is being reverted as well?", "url": "https://github.com/keycloak/keycloak/pull/7677#discussion_r560192531", "createdAt": "2021-01-19T13:56:30Z", "author": {"login": "sguilhen"}, "path": "model/jpa/src/main/java/org/keycloak/models/jpa/UserAdapter.java", "diffHunk": "@@ -467,7 +467,7 @@ public void grantRoleImpl(RoleModel role) {\n         // even if we're getting just the id.\n         TypedQuery<String> query = em.createNamedQuery(\"userRoleMappingIds\", String.class);\n         query.setParameter(\"user\", getEntity());\n-        return closing(query.getResultStream().map(realm::getRoleById).filter(Objects::nonNull));\n+        return closing(query.getResultStream().map(realm::getRoleById).filter(Objects::nonNull).distinct());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "05a25b5ab5cbd65c679b52fb0a15cdb438a98959"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDIwNzI5Mw==", "bodyText": "Think we need some consensus on spacing - I usually leave a blank line between the method's description and parameters (much like the javadocs in the Java API classes) while this removes the blank line. The processed javadoc is identical but I wonder if we shouldn't pick one way of doing it and sticking to it.", "url": "https://github.com/keycloak/keycloak/pull/7677#discussion_r560207293", "createdAt": "2021-01-19T14:18:12Z", "author": {"login": "sguilhen"}, "path": "server-spi-private/src/main/java/org/keycloak/provider/ProviderLoader.java", "diffHunk": "@@ -26,17 +26,14 @@\n \n     /**\n      * Load the SPI definitions themselves.\n-     *", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "05a25b5ab5cbd65c679b52fb0a15cdb438a98959"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDIwOTgyOQ==", "bodyText": "For the purpose of the streamification work I would leave those non-documented methods alone. I agree that every method in the SPI should be properly documented but at the same time I think this task warrants its own tracker. So to me this kind of thing falls out of the scope of the streamification work.", "url": "https://github.com/keycloak/keycloak/pull/7677#discussion_r560209829", "createdAt": "2021-01-19T14:21:37Z", "author": {"login": "sguilhen"}, "path": "server-spi/src/main/java/org/keycloak/models/RealmModel.java", "diffHunk": "@@ -460,6 +523,11 @@\n         return getIdentityProviderMappersByAliasStream(brokerAlias).collect(Collectors.toSet());\n     }\n \n+    /**\n+     * Returns identity provider mappers by the provided alias as a stream.\n+     * @param brokerAlias {@code String} Broker's alias to filter results.\n+     * @return Stream of {@link IdentityProviderMapperModel} Never returns {@code null}.\n+     */\n     Stream<IdentityProviderMapperModel> getIdentityProviderMappersByAliasStream(String brokerAlias);\n \n     IdentityProviderMapperModel addIdentityProviderMapper(IdentityProviderMapperModel model);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDEzMTYyOA=="}, "originalCommit": {"oid": "05a25b5ab5cbd65c679b52fb0a15cdb438a98959"}, "originalPosition": 203}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDIxMTgxNA==", "bodyText": "I think we again need some consensus on the description of the returned stream. When I documented I used a wording along the lines of \"@return a non-null {@link Stream} of realm roles\" whereas in this case the fact that the stream can't be null is communicated in a different way. Not a deal breaker for this particular PR, just something we might want to make consistent as part of a follow-up documentation Jira, for example.", "url": "https://github.com/keycloak/keycloak/pull/7677#discussion_r560211814", "createdAt": "2021-01-19T14:24:20Z", "author": {"login": "sguilhen"}, "path": "server-spi/src/main/java/org/keycloak/models/RoleMapperModel.java", "diffHunk": "@@ -29,14 +29,14 @@\n     /**\n      * Returns set of realm roles that are directly set to this object.\n      * @return see description\n-     * @deprecated Use {@link #getRealmRoleMappingsStream()} getRealmRoleMappingsStream} instead.\n+     * @deprecated Use {@link #getRealmRoleMappingsStream() getRealmRoleMappingsStream} instead.\n      */\n     @Deprecated\n     Set<RoleModel> getRealmRoleMappings();\n \n     /**\n      * Returns stream of realm roles that are directly set to this object.\n-     * @return stream of {@link RoleModel}\n+     * @return Stream of {@link RoleModel}. Never returns {@code null}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "05a25b5ab5cbd65c679b52fb0a15cdb438a98959"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "632b3f6bc01fbb468e364b5daf5f0bb8f9c5d931", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/632b3f6bc01fbb468e364b5daf5f0bb8f9c5d931", "committedDate": "2021-01-19T14:24:41Z", "message": "KEYCLOAK-15695 Addressing Hynek's and Vlasta's comments, closing streams in authz, removing redundant checks with JpaAdminEventQuery.getResultStream and JpaEventQuery.getResultStream"}, "afterCommit": {"oid": "92b46bd8bcddfb92af140959377312ed3eb38f2c", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/92b46bd8bcddfb92af140959377312ed3eb38f2c", "committedDate": "2021-01-19T16:08:31Z", "message": "KEYCLOAK-15695 Addressing Hynek's and Vlasta's comments, closing streams in authz, removing redundant checks with JpaAdminEventQuery.getResultStream and JpaEventQuery.getResultStream"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "92b46bd8bcddfb92af140959377312ed3eb38f2c", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/92b46bd8bcddfb92af140959377312ed3eb38f2c", "committedDate": "2021-01-19T16:08:31Z", "message": "KEYCLOAK-15695 Addressing Hynek's and Vlasta's comments, closing streams in authz, removing redundant checks with JpaAdminEventQuery.getResultStream and JpaEventQuery.getResultStream"}, "afterCommit": {"oid": "d94f9acd553013c02f9abe44ba366f52185814fb", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/d94f9acd553013c02f9abe44ba366f52185814fb", "committedDate": "2021-01-19T16:26:52Z", "message": "KEYCLOAK-15695 Addressing Hynek's and Vlasta's comments, closing streams in authz, removing redundant checks with JpaAdminEventQuery.getResultStream and JpaEventQuery.getResultStream"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d94f9acd553013c02f9abe44ba366f52185814fb", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/d94f9acd553013c02f9abe44ba366f52185814fb", "committedDate": "2021-01-19T16:26:52Z", "message": "KEYCLOAK-15695 Addressing Hynek's and Vlasta's comments, closing streams in authz, removing redundant checks with JpaAdminEventQuery.getResultStream and JpaEventQuery.getResultStream"}, "afterCommit": {"oid": "5c4a0f692a6105cbba95f0736ea1a24e0c3caaa6", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/5c4a0f692a6105cbba95f0736ea1a24e0c3caaa6", "committedDate": "2021-01-19T18:22:39Z", "message": "KEYCLOAK-15695 Addressing Hynek's and Vlasta's comments, closing streams in authz, removing redundant checks with JpaAdminEventQuery.getResultStream and JpaEventQuery.getResultStream"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5c4a0f692a6105cbba95f0736ea1a24e0c3caaa6", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/5c4a0f692a6105cbba95f0736ea1a24e0c3caaa6", "committedDate": "2021-01-19T18:22:39Z", "message": "KEYCLOAK-15695 Addressing Hynek's and Vlasta's comments, closing streams in authz, removing redundant checks with JpaAdminEventQuery.getResultStream and JpaEventQuery.getResultStream"}, "afterCommit": {"oid": "599e5d6017467aa09606ae69ad2f8cf3f83d17e0", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/599e5d6017467aa09606ae69ad2f8cf3f83d17e0", "committedDate": "2021-01-20T06:57:46Z", "message": "KEYCLOAK-15695 Addressing Hynek's and Vlasta's comments, closing streams in authz"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "599e5d6017467aa09606ae69ad2f8cf3f83d17e0", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/599e5d6017467aa09606ae69ad2f8cf3f83d17e0", "committedDate": "2021-01-20T06:57:46Z", "message": "KEYCLOAK-15695 Addressing Hynek's and Vlasta's comments, closing streams in authz"}, "afterCommit": {"oid": "ea81acc9c4659d69365d9a0665fde669beb0145a", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/ea81acc9c4659d69365d9a0665fde669beb0145a", "committedDate": "2021-01-20T08:16:13Z", "message": "KEYCLOAK-15695 Streamification cleanup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcxOTQyOTY5", "url": "https://github.com/keycloak/keycloak/pull/7677#pullrequestreview-571942969", "createdAt": "2021-01-20T07:48:12Z", "commit": {"oid": "599e5d6017467aa09606ae69ad2f8cf3f83d17e0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yMFQwNzo0ODoxMlrOIWw04g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yMFQwNzo0ODoxMlrOIWw04g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDczOTU1NA==", "bodyText": "This could probably remain int. We call it only from one place and it is always int. This method doesn't make sense with limit == null.", "url": "https://github.com/keycloak/keycloak/pull/7677#discussion_r560739554", "createdAt": "2021-01-20T07:48:12Z", "author": {"login": "mhajas"}, "path": "server-spi-private/src/main/java/org/keycloak/policy/HistoryPasswordPolicyProvider.java", "diffHunk": "@@ -80,7 +78,7 @@ public PolicyError validate(RealmModel realm, UserModel user, String password) {\n         return null;\n     }\n \n-    private Stream<CredentialModel> getRecent(Stream<CredentialModel> passwordHistory, int limit) {\n+    private Stream<CredentialModel> getRecent(Stream<CredentialModel> passwordHistory, Integer limit) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "599e5d6017467aa09606ae69ad2f8cf3f83d17e0"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b6337f41b0c31821eea6c8b20f8840bcba91705", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/7b6337f41b0c31821eea6c8b20f8840bcba91705", "committedDate": "2021-01-20T08:33:38Z", "message": "KEYCLOAK-15695 Streamification cleanup"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ea81acc9c4659d69365d9a0665fde669beb0145a", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/ea81acc9c4659d69365d9a0665fde669beb0145a", "committedDate": "2021-01-20T08:16:13Z", "message": "KEYCLOAK-15695 Streamification cleanup"}, "afterCommit": {"oid": "7b6337f41b0c31821eea6c8b20f8840bcba91705", "author": {"user": {"login": "martin-kanis", "name": "Martin Kanis"}}, "url": "https://github.com/keycloak/keycloak/commit/7b6337f41b0c31821eea6c8b20f8840bcba91705", "committedDate": "2021-01-20T08:33:38Z", "message": "KEYCLOAK-15695 Streamification cleanup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcxOTc3NDk2", "url": "https://github.com/keycloak/keycloak/pull/7677#pullrequestreview-571977496", "createdAt": "2021-01-20T08:37:58Z", "commit": {"oid": "7b6337f41b0c31821eea6c8b20f8840bcba91705"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcyMDczNDc4", "url": "https://github.com/keycloak/keycloak/pull/7677#pullrequestreview-572073478", "createdAt": "2021-01-20T10:22:08Z", "commit": {"oid": "7b6337f41b0c31821eea6c8b20f8840bcba91705"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcyMTIwODcy", "url": "https://github.com/keycloak/keycloak/pull/7677#pullrequestreview-572120872", "createdAt": "2021-01-20T11:19:54Z", "commit": {"oid": "7b6337f41b0c31821eea6c8b20f8840bcba91705"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3331, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}