{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyNTkzNTYz", "number": 7035, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxMTo0ODoxOFrOEmC5-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQyMDo1NTo1OFrOEmQvcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4MzI4OTU1OnYy", "diffSide": "RIGHT", "path": "themes/src/main/resources/theme/base/admin/resources/partials/user-detail.html", "isResolved": true, "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxMTo0ODoxOFrOHV2Mlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNzowNzo1MlrOHXkgiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjY3MDEwMg==", "bodyText": "I'm no UX expert but I'm not sure this is ok from the UX PoV. You have a search field and then you have a table below with selected values. Both have a remove button, one as a cross symbol, the other as a bigger button with text:\n\nThis feels to me a bit confusing and even inconsistent with other places.\nCouldn't we use the same approach as with e.g. Required Actions?", "url": "https://github.com/keycloak/keycloak/pull/7035#discussion_r492670102", "createdAt": "2020-09-22T11:48:18Z", "author": {"login": "vmuzikar"}, "path": "themes/src/main/resources/theme/base/admin/resources/partials/user-detail.html", "diffHunk": "@@ -97,6 +97,42 @@\n                 </div>\n                 <kc-tooltip>{{:: 'email-verified.tooltip' | translate}}</kc-tooltip>\n             </div>\n+            <div class=\"form-group clearfix block\" data-ng-if=\"create\">\n+                <label class=\"col-md-2 control-label\" for=\"selected-groups\">{{:: 'groups-joining' | translate}}</label>\n+                <div class=\"col-sm-6\">\n+                    <table class=\"table table-striped table-bordered\" style=\"margin-top: 0px\" id=\"selected-groups\">\n+                        <thead>\n+                        <tr>\n+                            <th class=\"kc-table-actions\" colspan=\"2\">\n+                                <div class=\"form-inline col-md-12\" style=\"width: 107%\">\n+                                    <div class=\"form-group\" style=\"width: 100%\">\n+                                        <div class=\"input-group\" style=\"width: 100%\">\n+                                            <input type=\"hidden\" ui-select2=\"groupsUiSelect\" id=\"groups\" data-ng-change=\"selectGroup(selectedGroup);\" data-ng-model=\"selectedGroup\" data-placeholder=\"{{:: 'groups-joining-select.placeholder' | translate}}...\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "118f9a766c5e5ddf536043c7914c4aff5182e9fe"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc2NDg0MA==", "bodyText": "I've copy-pasted a component used in Permissions UI:\n\nIMO, a tabular view better highlights groups hierarchy, compared to a \"tags input\".", "url": "https://github.com/keycloak/keycloak/pull/7035#discussion_r492764840", "createdAt": "2020-09-22T14:09:11Z", "author": {"login": "clementcur"}, "path": "themes/src/main/resources/theme/base/admin/resources/partials/user-detail.html", "diffHunk": "@@ -97,6 +97,42 @@\n                 </div>\n                 <kc-tooltip>{{:: 'email-verified.tooltip' | translate}}</kc-tooltip>\n             </div>\n+            <div class=\"form-group clearfix block\" data-ng-if=\"create\">\n+                <label class=\"col-md-2 control-label\" for=\"selected-groups\">{{:: 'groups-joining' | translate}}</label>\n+                <div class=\"col-sm-6\">\n+                    <table class=\"table table-striped table-bordered\" style=\"margin-top: 0px\" id=\"selected-groups\">\n+                        <thead>\n+                        <tr>\n+                            <th class=\"kc-table-actions\" colspan=\"2\">\n+                                <div class=\"form-inline col-md-12\" style=\"width: 107%\">\n+                                    <div class=\"form-group\" style=\"width: 100%\">\n+                                        <div class=\"input-group\" style=\"width: 100%\">\n+                                            <input type=\"hidden\" ui-select2=\"groupsUiSelect\" id=\"groups\" data-ng-change=\"selectGroup(selectedGroup);\" data-ng-model=\"selectedGroup\" data-placeholder=\"{{:: 'groups-joining-select.placeholder' | translate}}...\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjY3MDEwMg=="}, "originalCommit": {"oid": "118f9a766c5e5ddf536043c7914c4aff5182e9fe"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjgwMjA2MA==", "bodyText": "Yes, you're correct. But there it works a bit differently. Once you've clicked a policy in the search bar, it appears in the table below and the search bar is cleared. There are no duplicit \"remove\" buttons.", "url": "https://github.com/keycloak/keycloak/pull/7035#discussion_r492802060", "createdAt": "2020-09-22T14:54:54Z", "author": {"login": "vmuzikar"}, "path": "themes/src/main/resources/theme/base/admin/resources/partials/user-detail.html", "diffHunk": "@@ -97,6 +97,42 @@\n                 </div>\n                 <kc-tooltip>{{:: 'email-verified.tooltip' | translate}}</kc-tooltip>\n             </div>\n+            <div class=\"form-group clearfix block\" data-ng-if=\"create\">\n+                <label class=\"col-md-2 control-label\" for=\"selected-groups\">{{:: 'groups-joining' | translate}}</label>\n+                <div class=\"col-sm-6\">\n+                    <table class=\"table table-striped table-bordered\" style=\"margin-top: 0px\" id=\"selected-groups\">\n+                        <thead>\n+                        <tr>\n+                            <th class=\"kc-table-actions\" colspan=\"2\">\n+                                <div class=\"form-inline col-md-12\" style=\"width: 107%\">\n+                                    <div class=\"form-group\" style=\"width: 100%\">\n+                                        <div class=\"input-group\" style=\"width: 100%\">\n+                                            <input type=\"hidden\" ui-select2=\"groupsUiSelect\" id=\"groups\" data-ng-change=\"selectGroup(selectedGroup);\" data-ng-model=\"selectedGroup\" data-placeholder=\"{{:: 'groups-joining-select.placeholder' | translate}}...\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjY3MDEwMg=="}, "originalCommit": {"oid": "118f9a766c5e5ddf536043c7914c4aff5182e9fe"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzAxNjY1MQ==", "bodyText": "@vmuzikar The x means \"clear the field\".  That's different from remove and it's the way PatternFly does it.\nThe Required Actions solution uses chip groups, which are not appropriate here because chip groups get very hard to manage when you have more than a few items.  See the Login Events Settings for a really horrific example of this.", "url": "https://github.com/keycloak/keycloak/pull/7035#discussion_r493016651", "createdAt": "2020-09-22T20:34:15Z", "author": {"login": "ssilvert"}, "path": "themes/src/main/resources/theme/base/admin/resources/partials/user-detail.html", "diffHunk": "@@ -97,6 +97,42 @@\n                 </div>\n                 <kc-tooltip>{{:: 'email-verified.tooltip' | translate}}</kc-tooltip>\n             </div>\n+            <div class=\"form-group clearfix block\" data-ng-if=\"create\">\n+                <label class=\"col-md-2 control-label\" for=\"selected-groups\">{{:: 'groups-joining' | translate}}</label>\n+                <div class=\"col-sm-6\">\n+                    <table class=\"table table-striped table-bordered\" style=\"margin-top: 0px\" id=\"selected-groups\">\n+                        <thead>\n+                        <tr>\n+                            <th class=\"kc-table-actions\" colspan=\"2\">\n+                                <div class=\"form-inline col-md-12\" style=\"width: 107%\">\n+                                    <div class=\"form-group\" style=\"width: 100%\">\n+                                        <div class=\"input-group\" style=\"width: 100%\">\n+                                            <input type=\"hidden\" ui-select2=\"groupsUiSelect\" id=\"groups\" data-ng-change=\"selectGroup(selectedGroup);\" data-ng-model=\"selectedGroup\" data-placeholder=\"{{:: 'groups-joining-select.placeholder' | translate}}...\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjY3MDEwMg=="}, "originalCommit": {"oid": "118f9a766c5e5ddf536043c7914c4aff5182e9fe"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzA1MjQwOA==", "bodyText": "The group selector is still not quite working right.  For instance, here there is no \"s\" in /group1, but it shows that group anyway.  Looks like it's because it has a subgroup with an \"s\" in it.", "url": "https://github.com/keycloak/keycloak/pull/7035#discussion_r493052408", "createdAt": "2020-09-22T21:46:58Z", "author": {"login": "ssilvert"}, "path": "themes/src/main/resources/theme/base/admin/resources/partials/user-detail.html", "diffHunk": "@@ -97,6 +97,42 @@\n                 </div>\n                 <kc-tooltip>{{:: 'email-verified.tooltip' | translate}}</kc-tooltip>\n             </div>\n+            <div class=\"form-group clearfix block\" data-ng-if=\"create\">\n+                <label class=\"col-md-2 control-label\" for=\"selected-groups\">{{:: 'groups-joining' | translate}}</label>\n+                <div class=\"col-sm-6\">\n+                    <table class=\"table table-striped table-bordered\" style=\"margin-top: 0px\" id=\"selected-groups\">\n+                        <thead>\n+                        <tr>\n+                            <th class=\"kc-table-actions\" colspan=\"2\">\n+                                <div class=\"form-inline col-md-12\" style=\"width: 107%\">\n+                                    <div class=\"form-group\" style=\"width: 100%\">\n+                                        <div class=\"input-group\" style=\"width: 100%\">\n+                                            <input type=\"hidden\" ui-select2=\"groupsUiSelect\" id=\"groups\" data-ng-change=\"selectGroup(selectedGroup);\" data-ng-model=\"selectedGroup\" data-placeholder=\"{{:: 'groups-joining-select.placeholder' | translate}}...\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjY3MDEwMg=="}, "originalCommit": {"oid": "118f9a766c5e5ddf536043c7914c4aff5182e9fe"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzI0OTc0Mw==", "bodyText": "@vmuzikar The x means \"clear the field\". That's different from remove and it's the way PatternFly does it.\n\n@ssilvert Yes, I know what the \"X\" does but that might not be the case with the user. It might give the impression that the \"X\" removes the selection and therefore user might be unaware that this is a multi-select box.\n\nThe Required Actions solution uses chip groups, which are not appropriate here because chip groups get very hard to manage when you have more than a few items. See the Login Events Settings for a really horrific example of this.\n\nI assumed that no more than \u2013 let's say \u2013\u00a03 groups would be added here. It's still a manual process and IMHO doesn't make much sense for the admin to add tens of groups for just one user. But ok, the chip groups might not be the best solution.\nI believe we should at least unify it with the Permissions UI \u2013 clear the search box after selection.", "url": "https://github.com/keycloak/keycloak/pull/7035#discussion_r493249743", "createdAt": "2020-09-23T07:16:00Z", "author": {"login": "vmuzikar"}, "path": "themes/src/main/resources/theme/base/admin/resources/partials/user-detail.html", "diffHunk": "@@ -97,6 +97,42 @@\n                 </div>\n                 <kc-tooltip>{{:: 'email-verified.tooltip' | translate}}</kc-tooltip>\n             </div>\n+            <div class=\"form-group clearfix block\" data-ng-if=\"create\">\n+                <label class=\"col-md-2 control-label\" for=\"selected-groups\">{{:: 'groups-joining' | translate}}</label>\n+                <div class=\"col-sm-6\">\n+                    <table class=\"table table-striped table-bordered\" style=\"margin-top: 0px\" id=\"selected-groups\">\n+                        <thead>\n+                        <tr>\n+                            <th class=\"kc-table-actions\" colspan=\"2\">\n+                                <div class=\"form-inline col-md-12\" style=\"width: 107%\">\n+                                    <div class=\"form-group\" style=\"width: 100%\">\n+                                        <div class=\"input-group\" style=\"width: 100%\">\n+                                            <input type=\"hidden\" ui-select2=\"groupsUiSelect\" id=\"groups\" data-ng-change=\"selectGroup(selectedGroup);\" data-ng-model=\"selectedGroup\" data-placeholder=\"{{:: 'groups-joining-select.placeholder' | translate}}...\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjY3MDEwMg=="}, "originalCommit": {"oid": "118f9a766c5e5ddf536043c7914c4aff5182e9fe"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzI1MzY5MQ==", "bodyText": "The group selector is still not quite working right. For instance, here there is no \"s\" in /group1, but it shows that group anyway. Looks like it's because it has a subgroup with an \"s\" in it.\n\nThis is what our REST API returns so I'd say it is out of scope of this PR. It's probably implemented like that because of the \"tree\" UI the Groups section uses. When you search for a group, you need to see all its parents to be able to properly display the tree.\nMaybe we could do some filtering at the UI side but I'm not sure that's the correct approach.", "url": "https://github.com/keycloak/keycloak/pull/7035#discussion_r493253691", "createdAt": "2020-09-23T07:23:21Z", "author": {"login": "vmuzikar"}, "path": "themes/src/main/resources/theme/base/admin/resources/partials/user-detail.html", "diffHunk": "@@ -97,6 +97,42 @@\n                 </div>\n                 <kc-tooltip>{{:: 'email-verified.tooltip' | translate}}</kc-tooltip>\n             </div>\n+            <div class=\"form-group clearfix block\" data-ng-if=\"create\">\n+                <label class=\"col-md-2 control-label\" for=\"selected-groups\">{{:: 'groups-joining' | translate}}</label>\n+                <div class=\"col-sm-6\">\n+                    <table class=\"table table-striped table-bordered\" style=\"margin-top: 0px\" id=\"selected-groups\">\n+                        <thead>\n+                        <tr>\n+                            <th class=\"kc-table-actions\" colspan=\"2\">\n+                                <div class=\"form-inline col-md-12\" style=\"width: 107%\">\n+                                    <div class=\"form-group\" style=\"width: 100%\">\n+                                        <div class=\"input-group\" style=\"width: 100%\">\n+                                            <input type=\"hidden\" ui-select2=\"groupsUiSelect\" id=\"groups\" data-ng-change=\"selectGroup(selectedGroup);\" data-ng-model=\"selectedGroup\" data-placeholder=\"{{:: 'groups-joining-select.placeholder' | translate}}...\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjY3MDEwMg=="}, "originalCommit": {"oid": "118f9a766c5e5ddf536043c7914c4aff5182e9fe"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ3NzQ1MQ==", "bodyText": "I've flatten and filtered out searched groups in latest commit. Also, I made sure the input is cleared after selection, so there's no confusion.", "url": "https://github.com/keycloak/keycloak/pull/7035#discussion_r494477451", "createdAt": "2020-09-24T17:07:52Z", "author": {"login": "clementcur"}, "path": "themes/src/main/resources/theme/base/admin/resources/partials/user-detail.html", "diffHunk": "@@ -97,6 +97,42 @@\n                 </div>\n                 <kc-tooltip>{{:: 'email-verified.tooltip' | translate}}</kc-tooltip>\n             </div>\n+            <div class=\"form-group clearfix block\" data-ng-if=\"create\">\n+                <label class=\"col-md-2 control-label\" for=\"selected-groups\">{{:: 'groups-joining' | translate}}</label>\n+                <div class=\"col-sm-6\">\n+                    <table class=\"table table-striped table-bordered\" style=\"margin-top: 0px\" id=\"selected-groups\">\n+                        <thead>\n+                        <tr>\n+                            <th class=\"kc-table-actions\" colspan=\"2\">\n+                                <div class=\"form-inline col-md-12\" style=\"width: 107%\">\n+                                    <div class=\"form-group\" style=\"width: 100%\">\n+                                        <div class=\"input-group\" style=\"width: 100%\">\n+                                            <input type=\"hidden\" ui-select2=\"groupsUiSelect\" id=\"groups\" data-ng-change=\"selectGroup(selectedGroup);\" data-ng-model=\"selectedGroup\" data-placeholder=\"{{:: 'groups-joining-select.placeholder' | translate}}...\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjY3MDEwMg=="}, "originalCommit": {"oid": "118f9a766c5e5ddf536043c7914c4aff5182e9fe"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4MzMwNDI1OnYy", "diffSide": "RIGHT", "path": "themes/src/main/resources/theme/base/admin/resources/partials/user-detail.html", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxMTo1MjozNFrOHV2VeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNzowNjozMFrOHXkdjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjY3MjM3Nw==", "bodyText": "The search field is not aligned correctly with the table header on Chrome and Safari. Please see the screenshot above.", "url": "https://github.com/keycloak/keycloak/pull/7035#discussion_r492672377", "createdAt": "2020-09-22T11:52:34Z", "author": {"login": "vmuzikar"}, "path": "themes/src/main/resources/theme/base/admin/resources/partials/user-detail.html", "diffHunk": "@@ -97,6 +97,42 @@\n                 </div>\n                 <kc-tooltip>{{:: 'email-verified.tooltip' | translate}}</kc-tooltip>\n             </div>\n+            <div class=\"form-group clearfix block\" data-ng-if=\"create\">\n+                <label class=\"col-md-2 control-label\" for=\"selected-groups\">{{:: 'groups-joining' | translate}}</label>\n+                <div class=\"col-sm-6\">\n+                    <table class=\"table table-striped table-bordered\" style=\"margin-top: 0px\" id=\"selected-groups\">\n+                        <thead>\n+                        <tr>\n+                            <th class=\"kc-table-actions\" colspan=\"2\">\n+                                <div class=\"form-inline col-md-12\" style=\"width: 107%\">\n+                                    <div class=\"form-group\" style=\"width: 100%\">\n+                                        <div class=\"input-group\" style=\"width: 100%\">\n+                                            <input type=\"hidden\" ui-select2=\"groupsUiSelect\" id=\"groups\" data-ng-change=\"selectGroup(selectedGroup);\" data-ng-model=\"selectedGroup\" data-placeholder=\"{{:: 'groups-joining-select.placeholder' | translate}}...\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "118f9a766c5e5ddf536043c7914c4aff5182e9fe"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzM2OTM1OA==", "bodyText": "It's correctly aligned on my side and seems OK on ssilvert's screenshot too. Maybe check if you're not zoomed in.\nThe html code is strictly copy-pasted from the Permissions UI.", "url": "https://github.com/keycloak/keycloak/pull/7035#discussion_r493369358", "createdAt": "2020-09-23T09:31:24Z", "author": {"login": "clementcur"}, "path": "themes/src/main/resources/theme/base/admin/resources/partials/user-detail.html", "diffHunk": "@@ -97,6 +97,42 @@\n                 </div>\n                 <kc-tooltip>{{:: 'email-verified.tooltip' | translate}}</kc-tooltip>\n             </div>\n+            <div class=\"form-group clearfix block\" data-ng-if=\"create\">\n+                <label class=\"col-md-2 control-label\" for=\"selected-groups\">{{:: 'groups-joining' | translate}}</label>\n+                <div class=\"col-sm-6\">\n+                    <table class=\"table table-striped table-bordered\" style=\"margin-top: 0px\" id=\"selected-groups\">\n+                        <thead>\n+                        <tr>\n+                            <th class=\"kc-table-actions\" colspan=\"2\">\n+                                <div class=\"form-inline col-md-12\" style=\"width: 107%\">\n+                                    <div class=\"form-group\" style=\"width: 100%\">\n+                                        <div class=\"input-group\" style=\"width: 100%\">\n+                                            <input type=\"hidden\" ui-select2=\"groupsUiSelect\" id=\"groups\" data-ng-change=\"selectGroup(selectedGroup);\" data-ng-model=\"selectedGroup\" data-placeholder=\"{{:: 'groups-joining-select.placeholder' | translate}}...\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjY3MjM3Nw=="}, "originalCommit": {"oid": "118f9a766c5e5ddf536043c7914c4aff5182e9fe"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzM3ODI1NQ==", "bodyText": "I'm not zoomed in. :) It's ok in Firefox, misaligned in Chrome and Safari.", "url": "https://github.com/keycloak/keycloak/pull/7035#discussion_r493378255", "createdAt": "2020-09-23T09:40:32Z", "author": {"login": "vmuzikar"}, "path": "themes/src/main/resources/theme/base/admin/resources/partials/user-detail.html", "diffHunk": "@@ -97,6 +97,42 @@\n                 </div>\n                 <kc-tooltip>{{:: 'email-verified.tooltip' | translate}}</kc-tooltip>\n             </div>\n+            <div class=\"form-group clearfix block\" data-ng-if=\"create\">\n+                <label class=\"col-md-2 control-label\" for=\"selected-groups\">{{:: 'groups-joining' | translate}}</label>\n+                <div class=\"col-sm-6\">\n+                    <table class=\"table table-striped table-bordered\" style=\"margin-top: 0px\" id=\"selected-groups\">\n+                        <thead>\n+                        <tr>\n+                            <th class=\"kc-table-actions\" colspan=\"2\">\n+                                <div class=\"form-inline col-md-12\" style=\"width: 107%\">\n+                                    <div class=\"form-group\" style=\"width: 100%\">\n+                                        <div class=\"input-group\" style=\"width: 100%\">\n+                                            <input type=\"hidden\" ui-select2=\"groupsUiSelect\" id=\"groups\" data-ng-change=\"selectGroup(selectedGroup);\" data-ng-model=\"selectedGroup\" data-placeholder=\"{{:: 'groups-joining-select.placeholder' | translate}}...\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjY3MjM3Nw=="}, "originalCommit": {"oid": "118f9a766c5e5ddf536043c7914c4aff5182e9fe"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ3NjY4Nw==", "bodyText": "I've fixed the alignment in the latest commit.", "url": "https://github.com/keycloak/keycloak/pull/7035#discussion_r494476687", "createdAt": "2020-09-24T17:06:30Z", "author": {"login": "clementcur"}, "path": "themes/src/main/resources/theme/base/admin/resources/partials/user-detail.html", "diffHunk": "@@ -97,6 +97,42 @@\n                 </div>\n                 <kc-tooltip>{{:: 'email-verified.tooltip' | translate}}</kc-tooltip>\n             </div>\n+            <div class=\"form-group clearfix block\" data-ng-if=\"create\">\n+                <label class=\"col-md-2 control-label\" for=\"selected-groups\">{{:: 'groups-joining' | translate}}</label>\n+                <div class=\"col-sm-6\">\n+                    <table class=\"table table-striped table-bordered\" style=\"margin-top: 0px\" id=\"selected-groups\">\n+                        <thead>\n+                        <tr>\n+                            <th class=\"kc-table-actions\" colspan=\"2\">\n+                                <div class=\"form-inline col-md-12\" style=\"width: 107%\">\n+                                    <div class=\"form-group\" style=\"width: 100%\">\n+                                        <div class=\"input-group\" style=\"width: 100%\">\n+                                            <input type=\"hidden\" ui-select2=\"groupsUiSelect\" id=\"groups\" data-ng-change=\"selectGroup(selectedGroup);\" data-ng-model=\"selectedGroup\" data-placeholder=\"{{:: 'groups-joining-select.placeholder' | translate}}...\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjY3MjM3Nw=="}, "originalCommit": {"oid": "118f9a766c5e5ddf536043c7914c4aff5182e9fe"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4MzM3ODMwOnYy", "diffSide": "RIGHT", "path": "themes/src/main/resources/theme/base/admin/resources/js/controllers/users.js", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxMjoxMzozOFrOHV3CMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNzowOTo0OFrOHXkk6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjY4MzgyNQ==", "bodyText": "It is possible to add a user to both child and parent group at the same time. It should be possible to add them only to one of the roles with the parent roles added transiently.\nThis is issue, however, concerns the underlaying REST API as well so maybe it is out of scope of this PR? @stianst?", "url": "https://github.com/keycloak/keycloak/pull/7035#discussion_r492683825", "createdAt": "2020-09-22T12:13:38Z", "author": {"login": "vmuzikar"}, "path": "themes/src/main/resources/theme/base/admin/resources/js/controllers/users.js", "diffHunk": "@@ -513,6 +515,39 @@ module.controller('UserDetailCtrl', function($scope, realm, user, BruteForceUser\n         }\n     }\n \n+    function pushSelectedGroupsToUser() {\n+        var groups = $scope.user.groups;\n+        if ($scope.selectedGroups) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "118f9a766c5e5ddf536043c7914c4aff5182e9fe"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc2ODE3OQ==", "bodyText": "This UI is driven by the REST Admin API. If we want a special behavior, we'll need to change that in the API itself. IMO, this is a different topic.", "url": "https://github.com/keycloak/keycloak/pull/7035#discussion_r492768179", "createdAt": "2020-09-22T14:13:15Z", "author": {"login": "clementcur"}, "path": "themes/src/main/resources/theme/base/admin/resources/js/controllers/users.js", "diffHunk": "@@ -513,6 +515,39 @@ module.controller('UserDetailCtrl', function($scope, realm, user, BruteForceUser\n         }\n     }\n \n+    function pushSelectedGroupsToUser() {\n+        var groups = $scope.user.groups;\n+        if ($scope.selectedGroups) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjY4MzgyNQ=="}, "originalCommit": {"oid": "118f9a766c5e5ddf536043c7914c4aff5182e9fe"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ3ODU3MQ==", "bodyText": "Since every node of the groups tree is now listed in search results, it's possible to add both parent and child groups.", "url": "https://github.com/keycloak/keycloak/pull/7035#discussion_r494478571", "createdAt": "2020-09-24T17:09:48Z", "author": {"login": "clementcur"}, "path": "themes/src/main/resources/theme/base/admin/resources/js/controllers/users.js", "diffHunk": "@@ -513,6 +515,39 @@ module.controller('UserDetailCtrl', function($scope, realm, user, BruteForceUser\n         }\n     }\n \n+    function pushSelectedGroupsToUser() {\n+        var groups = $scope.user.groups;\n+        if ($scope.selectedGroups) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjY4MzgyNQ=="}, "originalCommit": {"oid": "118f9a766c5e5ddf536043c7914c4aff5182e9fe"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4MzM5NzI5OnYy", "diffSide": "RIGHT", "path": "testsuite/integration-arquillian/tests/other/console/src/test/java/org/keycloak/testsuite/console/users/UserAttributesTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxMjoxODo1MFrOHV3Niw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxMjoxODo1MFrOHV3Niw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjY4NjczMQ==", "bodyText": "Strictly speaking, a user test shouldn't also test creating of groups. A better approach would be to just use the REST API to create the group. But since you already implemented that, let's leave it as is. :)", "url": "https://github.com/keycloak/keycloak/pull/7035#discussion_r492686731", "createdAt": "2020-09-22T12:18:50Z", "author": {"login": "vmuzikar"}, "path": "testsuite/integration-arquillian/tests/other/console/src/test/java/org/keycloak/testsuite/console/users/UserAttributesTest.java", "diffHunk": "@@ -99,4 +112,31 @@ public void disabledUser() {\n         // TODO try to log in\n     }\n \n+    @Test\n+    public void createUserWithGroups() {\n+        GroupRepresentation newGroup = new GroupRepresentation();\n+        newGroup.setName(\"mygroup\");\n+\n+        // navigate to Groups creation page\n+        groupsPage.navigateTo();\n+        assertCurrentUrlEquals(groupsPage);\n+        groupsPage.table().addGroup();\n+        assertCurrentUrlStartsWith(createGroupPage);\n+\n+        // create the group\n+        createGroupPage.form().setValues(newGroup);\n+        createGroupPage.form().save();\n+        assertAlertSuccess();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "118f9a766c5e5ddf536043c7914c4aff5182e9fe"}, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4MzU5NjUyOnYy", "diffSide": "RIGHT", "path": "testsuite/integration-arquillian/tests/other/console/src/test/java/org/keycloak/testsuite/console/groups/AbstractGroupTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxMzowNzoxM1rOHV5GoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxMzowNzoxM1rOHV5GoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjcxNzcyOQ==", "bodyText": "Even though this is out of scope of this PR, thanks for adding it. It's a shame we didn't have UI tests for groups. :(", "url": "https://github.com/keycloak/keycloak/pull/7035#discussion_r492717729", "createdAt": "2020-09-22T13:07:13Z", "author": {"login": "vmuzikar"}, "path": "testsuite/integration-arquillian/tests/other/console/src/test/java/org/keycloak/testsuite/console/groups/AbstractGroupTest.java", "diffHunk": "@@ -0,0 +1,40 @@\n+package org.keycloak.testsuite.console.groups;\n+\n+import org.jboss.arquillian.graphene.page.Page;\n+import org.junit.Before;\n+import org.keycloak.admin.client.resource.GroupResource;\n+import org.keycloak.admin.client.resource.GroupsResource;\n+import org.keycloak.representations.idm.GroupRepresentation;\n+import org.keycloak.testsuite.console.AbstractConsoleTest;\n+import org.keycloak.testsuite.console.page.groups.CreateGroup;\n+import org.keycloak.testsuite.console.page.groups.Groups;\n+\n+import static org.keycloak.testsuite.util.URLAssert.assertCurrentUrlEquals;\n+import static org.keycloak.testsuite.util.URLAssert.assertCurrentUrlStartsWith;\n+\n+/**\n+ *\n+ * @author clementcur\n+ */\n+public abstract class AbstractGroupTest extends AbstractConsoleTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "118f9a766c5e5ddf536043c7914c4aff5182e9fe"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4MzYzODA1OnYy", "diffSide": "RIGHT", "path": "testsuite/integration-arquillian/tests/other/console/src/main/java/org/keycloak/testsuite/console/page/users/UserAttributesForm.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxMzoxNjo0M1rOHV5gsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxMDoyNzozNVrOHX-FRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjcyNDQwMQ==", "bodyText": "I'm getting some compilation errors here. The tests need to be passing with Java 8 (which is used by our CI).", "url": "https://github.com/keycloak/keycloak/pull/7035#discussion_r492724401", "createdAt": "2020-09-22T13:16:43Z", "author": {"login": "vmuzikar"}, "path": "testsuite/integration-arquillian/tests/other/console/src/main/java/org/keycloak/testsuite/console/page/users/UserAttributesForm.java", "diffHunk": "@@ -121,8 +126,40 @@ public void setValues(UserRepresentation user) {\n         setLastName(user.getLastName());\n         if (user.isEnabled() != null) setEnabled(user.isEnabled());\n         if (user.isEmailVerified() != null) setEmailVerified(user.isEmailVerified());\n+        if (user.getGroups() != null && user.getGroups().length > 0) setGroups(new HashSet<String>(user.getGroups()));\n         if (user.getRequiredActions() != null) setRequiredActions(new HashSet<>(user.getRequiredActions()));\n     }\n \n     // TODO Contact Information section\n+\n+    public class GroupSelect extends MultipleStringSelect2 {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "118f9a766c5e5ddf536043c7914c4aff5182e9fe"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDg5NjQ1NA==", "bodyText": "fixed in latest commit", "url": "https://github.com/keycloak/keycloak/pull/7035#discussion_r494896454", "createdAt": "2020-09-25T10:27:35Z", "author": {"login": "clementcur"}, "path": "testsuite/integration-arquillian/tests/other/console/src/main/java/org/keycloak/testsuite/console/page/users/UserAttributesForm.java", "diffHunk": "@@ -121,8 +126,40 @@ public void setValues(UserRepresentation user) {\n         setLastName(user.getLastName());\n         if (user.isEnabled() != null) setEnabled(user.isEnabled());\n         if (user.isEmailVerified() != null) setEmailVerified(user.isEmailVerified());\n+        if (user.getGroups() != null && user.getGroups().length > 0) setGroups(new HashSet<String>(user.getGroups()));\n         if (user.getRequiredActions() != null) setRequiredActions(new HashSet<>(user.getRequiredActions()));\n     }\n \n     // TODO Contact Information section\n+\n+    public class GroupSelect extends MultipleStringSelect2 {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjcyNDQwMQ=="}, "originalCommit": {"oid": "118f9a766c5e5ddf536043c7914c4aff5182e9fe"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4MzY1NjM4OnYy", "diffSide": "RIGHT", "path": "testsuite/integration-arquillian/tests/other/console/src/test/java/org/keycloak/testsuite/console/groups/GroupTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxMzoyMDo1M1rOHV5sLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxMDoyNzo0MVrOHX-FhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjcyNzM0MA==", "bodyText": "This test seem to be failing. Needs to be passing with FF and Chrome.", "url": "https://github.com/keycloak/keycloak/pull/7035#discussion_r492727340", "createdAt": "2020-09-22T13:20:53Z", "author": {"login": "vmuzikar"}, "path": "testsuite/integration-arquillian/tests/other/console/src/test/java/org/keycloak/testsuite/console/groups/GroupTest.java", "diffHunk": "@@ -0,0 +1,48 @@\n+/*\n+ * JBoss, Home of Professional Open Source\n+ *\n+ * Copyright 2013 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.keycloak.testsuite.console.groups;\n+\n+import org.jboss.arquillian.graphene.page.Page;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.keycloak.representations.idm.GroupRepresentation;\n+import org.keycloak.testsuite.console.page.groups.CreateGroup;\n+\n+import static org.junit.Assert.*;\n+\n+/**\n+ *\n+ * @author clementcur\n+ */\n+public class GroupTest extends AbstractGroupTest {\n+\n+    @Page\n+    private CreateGroup createGroupPage;\n+\n+    @Before\n+    public void beforeCreateGroupTest() {\n+        groupsPage.navigateTo();\n+    }\n+\n+    @Test\n+    public void createAGroup() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "118f9a766c5e5ddf536043c7914c4aff5182e9fe"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDg5NjUxNg==", "bodyText": "fixed in latest commit", "url": "https://github.com/keycloak/keycloak/pull/7035#discussion_r494896516", "createdAt": "2020-09-25T10:27:41Z", "author": {"login": "clementcur"}, "path": "testsuite/integration-arquillian/tests/other/console/src/test/java/org/keycloak/testsuite/console/groups/GroupTest.java", "diffHunk": "@@ -0,0 +1,48 @@\n+/*\n+ * JBoss, Home of Professional Open Source\n+ *\n+ * Copyright 2013 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.keycloak.testsuite.console.groups;\n+\n+import org.jboss.arquillian.graphene.page.Page;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.keycloak.representations.idm.GroupRepresentation;\n+import org.keycloak.testsuite.console.page.groups.CreateGroup;\n+\n+import static org.junit.Assert.*;\n+\n+/**\n+ *\n+ * @author clementcur\n+ */\n+public class GroupTest extends AbstractGroupTest {\n+\n+    @Page\n+    private CreateGroup createGroupPage;\n+\n+    @Before\n+    public void beforeCreateGroupTest() {\n+        groupsPage.navigateTo();\n+    }\n+\n+    @Test\n+    public void createAGroup() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjcyNzM0MA=="}, "originalCommit": {"oid": "118f9a766c5e5ddf536043c7914c4aff5182e9fe"}, "originalPosition": 43}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4MzY1Nzg4OnYy", "diffSide": "RIGHT", "path": "testsuite/integration-arquillian/tests/other/console/src/test/java/org/keycloak/testsuite/console/users/UserAttributesTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQxMzoyMToxNFrOHV5tKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxMDoyNzo0OVrOHX-Fzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjcyNzU5NA==", "bodyText": "This test seem to be failing. Needs to be passing with FF and Chrome.", "url": "https://github.com/keycloak/keycloak/pull/7035#discussion_r492727594", "createdAt": "2020-09-22T13:21:14Z", "author": {"login": "vmuzikar"}, "path": "testsuite/integration-arquillian/tests/other/console/src/test/java/org/keycloak/testsuite/console/users/UserAttributesTest.java", "diffHunk": "@@ -99,4 +112,31 @@ public void disabledUser() {\n         // TODO try to log in\n     }\n \n+    @Test\n+    public void createUserWithGroups() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "118f9a766c5e5ddf536043c7914c4aff5182e9fe"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDg5NjU5MA==", "bodyText": "fixed in latest commit", "url": "https://github.com/keycloak/keycloak/pull/7035#discussion_r494896590", "createdAt": "2020-09-25T10:27:49Z", "author": {"login": "clementcur"}, "path": "testsuite/integration-arquillian/tests/other/console/src/test/java/org/keycloak/testsuite/console/users/UserAttributesTest.java", "diffHunk": "@@ -99,4 +112,31 @@ public void disabledUser() {\n         // TODO try to log in\n     }\n \n+    @Test\n+    public void createUserWithGroups() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjcyNzU5NA=="}, "originalCommit": {"oid": "118f9a766c5e5ddf536043c7914c4aff5182e9fe"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA4NTU1NjMzOnYy", "diffSide": "RIGHT", "path": "themes/src/main/resources/theme/base/admin/resources/js/controllers/users.js", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQyMDo1NTo1OFrOHWMEAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQxNzoxMDoxNVrOHXkmBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzAyODM1Mg==", "bodyText": "I don't think you need to pass in \"subGroups\".  I don't think that value can ever change.", "url": "https://github.com/keycloak/keycloak/pull/7035#discussion_r493028352", "createdAt": "2020-09-22T20:55:58Z", "author": {"login": "ssilvert"}, "path": "themes/src/main/resources/theme/base/admin/resources/js/controllers/users.js", "diffHunk": "@@ -527,6 +527,27 @@ module.controller('UserDetailCtrl', function($scope, realm, user, BruteForceUser\n         }\n     }\n \n+    function bfs(tree, key, collection) {\n+    \tif (!tree[key] || tree[key].length === 0) return;\n+    \tfor (var i=0; i < tree[key].length; i++) {\n+    \t\tvar child = tree[key][i]\n+    \t\tcollection.push(child);\n+    \t\tbfs(child, key, collection);\n+    \t}\n+    \treturn;\n+    }\n+\n+    function flattenGroups(groups) {\n+        var flattenedGroups = [];\n+        if (!groups || groups.length === 0) return groups;\n+        for (var i=0; i < groups.length; i++) {\n+            flattenedGroups.push(groups[i]);\n+            bfs(groups[i], \"subGroups\", flattenedGroups);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "118f9a766c5e5ddf536043c7914c4aff5182e9fe"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ3ODg1NQ==", "bodyText": "Fixed in my latest commit.", "url": "https://github.com/keycloak/keycloak/pull/7035#discussion_r494478855", "createdAt": "2020-09-24T17:10:15Z", "author": {"login": "clementcur"}, "path": "themes/src/main/resources/theme/base/admin/resources/js/controllers/users.js", "diffHunk": "@@ -527,6 +527,27 @@ module.controller('UserDetailCtrl', function($scope, realm, user, BruteForceUser\n         }\n     }\n \n+    function bfs(tree, key, collection) {\n+    \tif (!tree[key] || tree[key].length === 0) return;\n+    \tfor (var i=0; i < tree[key].length; i++) {\n+    \t\tvar child = tree[key][i]\n+    \t\tcollection.push(child);\n+    \t\tbfs(child, key, collection);\n+    \t}\n+    \treturn;\n+    }\n+\n+    function flattenGroups(groups) {\n+        var flattenedGroups = [];\n+        if (!groups || groups.length === 0) return groups;\n+        for (var i=0; i < groups.length; i++) {\n+            flattenedGroups.push(groups[i]);\n+            bfs(groups[i], \"subGroups\", flattenedGroups);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzAyODM1Mg=="}, "originalCommit": {"oid": "118f9a766c5e5ddf536043c7914c4aff5182e9fe"}, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3612, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}