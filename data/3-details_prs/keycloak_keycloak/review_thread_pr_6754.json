{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyNDkyMDY5", "number": 6754, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwNzo1Mzo0M1rODjXKkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNTozNjoyMFrODleIjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4NDA2MjkxOnYy", "diffSide": "RIGHT", "path": "distribution/server-x/pom.xml", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwNzo1Mzo0M1rOFvIJZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxMzo1ODoxNFrOFyUfnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk2MDg3MQ==", "bodyText": "There shouldn't be an exclude here for things in the themes jar. If there is anything in the themes jar that shouldn't be there it should be fixed in themes module, not here", "url": "https://github.com/keycloak/keycloak/pull/6754#discussion_r384960871", "createdAt": "2020-02-27T07:53:43Z", "author": {"login": "stianst"}, "path": "distribution/server-x/pom.xml", "diffHunk": "@@ -71,6 +71,7 @@\n                                     <groupId>org.keycloak</groupId>\n                                     <artifactId>keycloak-themes</artifactId>\n                                     <outputDirectory>target/unpacked-themes</outputDirectory>\n+                                    <excludes>**/node_modules/**,**/node/**</excludes>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1deadbe416d4cc15bcd620334e1f9dde02b99bf"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTExOTg2OA==", "bodyText": "I did not want to touch the main distribution so I thought to remove this from here. I think that centralize changes in Quarkus dist (even though they may not be the best) will help us in the future when reviewing what we have done.", "url": "https://github.com/keycloak/keycloak/pull/6754#discussion_r385119868", "createdAt": "2020-02-27T13:19:21Z", "author": {"login": "pedroigor"}, "path": "distribution/server-x/pom.xml", "diffHunk": "@@ -71,6 +71,7 @@\n                                     <groupId>org.keycloak</groupId>\n                                     <artifactId>keycloak-themes</artifactId>\n                                     <outputDirectory>target/unpacked-themes</outputDirectory>\n+                                    <excludes>**/node_modules/**,**/node/**</excludes>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk2MDg3MQ=="}, "originalCommit": {"oid": "b1deadbe416d4cc15bcd620334e1f9dde02b99bf"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODI3ODIzMg==", "bodyText": "Not sure why \"node\" is there in themes jar. That is a bug if it is.\nThere's node_modules that should be in the dist, and without it things won't actually work.", "url": "https://github.com/keycloak/keycloak/pull/6754#discussion_r388278232", "createdAt": "2020-03-05T13:01:47Z", "author": {"login": "stianst"}, "path": "distribution/server-x/pom.xml", "diffHunk": "@@ -71,6 +71,7 @@\n                                     <groupId>org.keycloak</groupId>\n                                     <artifactId>keycloak-themes</artifactId>\n                                     <outputDirectory>target/unpacked-themes</outputDirectory>\n+                                    <excludes>**/node_modules/**,**/node/**</excludes>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk2MDg3MQ=="}, "originalCommit": {"oid": "b1deadbe416d4cc15bcd620334e1f9dde02b99bf"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODI4NjUzOQ==", "bodyText": "Just tried building from master, and I don't have any \"node\" directories within the server-x distro, and I only have the expected node_modules directories:\nfind -name node_modules\n./keycloak-preview/account/resources/node_modules\n./keycloak/common/resources/node_modules", "url": "https://github.com/keycloak/keycloak/pull/6754#discussion_r388286539", "createdAt": "2020-03-05T13:18:41Z", "author": {"login": "stianst"}, "path": "distribution/server-x/pom.xml", "diffHunk": "@@ -71,6 +71,7 @@\n                                     <groupId>org.keycloak</groupId>\n                                     <artifactId>keycloak-themes</artifactId>\n                                     <outputDirectory>target/unpacked-themes</outputDirectory>\n+                                    <excludes>**/node_modules/**,**/node/**</excludes>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk2MDg3MQ=="}, "originalCommit": {"oid": "b1deadbe416d4cc15bcd620334e1f9dde02b99bf"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODMwODg5NQ==", "bodyText": "Maybe something that was fixed. I'm going to remove.", "url": "https://github.com/keycloak/keycloak/pull/6754#discussion_r388308895", "createdAt": "2020-03-05T13:58:14Z", "author": {"login": "pedroigor"}, "path": "distribution/server-x/pom.xml", "diffHunk": "@@ -71,6 +71,7 @@\n                                     <groupId>org.keycloak</groupId>\n                                     <artifactId>keycloak-themes</artifactId>\n                                     <outputDirectory>target/unpacked-themes</outputDirectory>\n+                                    <excludes>**/node_modules/**,**/node/**</excludes>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk2MDg3MQ=="}, "originalCommit": {"oid": "b1deadbe416d4cc15bcd620334e1f9dde02b99bf"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4NDA2Mzc5OnYy", "diffSide": "RIGHT", "path": "distribution/server-x/src/main/content/bin/kc.sh", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwNzo1NDowMFrOFvIJ2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxMzoxMzowM1rOFvRp_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk2MDk4Ng==", "bodyText": "Why is this being added? Looks like it's not used?", "url": "https://github.com/keycloak/keycloak/pull/6754#discussion_r384960986", "createdAt": "2020-02-27T07:54:00Z", "author": {"login": "stianst"}, "path": "distribution/server-x/src/main/content/bin/kc.sh", "diffHunk": "@@ -20,6 +20,7 @@ if [ \"x$RESOLVED_NAME\" = \"x\" ]; then\n     RESOLVED_NAME=\"$0\"\n fi\n \n+GREP=\"grep\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1deadbe416d4cc15bcd620334e1f9dde02b99bf"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTExNTA2NQ==", "bodyText": "Yes, it is. See line #62.", "url": "https://github.com/keycloak/keycloak/pull/6754#discussion_r385115065", "createdAt": "2020-02-27T13:09:53Z", "author": {"login": "pedroigor"}, "path": "distribution/server-x/src/main/content/bin/kc.sh", "diffHunk": "@@ -20,6 +20,7 @@ if [ \"x$RESOLVED_NAME\" = \"x\" ]; then\n     RESOLVED_NAME=\"$0\"\n fi\n \n+GREP=\"grep\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk2MDk4Ng=="}, "originalCommit": {"oid": "b1deadbe416d4cc15bcd620334e1f9dde02b99bf"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTExNjY3MQ==", "bodyText": "I see. So it was missing ;)", "url": "https://github.com/keycloak/keycloak/pull/6754#discussion_r385116671", "createdAt": "2020-02-27T13:13:03Z", "author": {"login": "stianst"}, "path": "distribution/server-x/src/main/content/bin/kc.sh", "diffHunk": "@@ -20,6 +20,7 @@ if [ \"x$RESOLVED_NAME\" = \"x\" ]; then\n     RESOLVED_NAME=\"$0\"\n fi\n \n+GREP=\"grep\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk2MDk4Ng=="}, "originalCommit": {"oid": "b1deadbe416d4cc15bcd620334e1f9dde02b99bf"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4NDA3NjIzOnYy", "diffSide": "RIGHT", "path": "quarkus/server/src/main/resources/application.properties", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwNzo1ODo0N1rOFvIRBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwNzo1ODo0N1rOFvIRBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk2MjgyMA==", "bodyText": "Added https://issues.redhat.com/browse/KEYCLOAK-13108 to change this back when we can", "url": "https://github.com/keycloak/keycloak/pull/6754#discussion_r384962820", "createdAt": "2020-02-27T07:58:47Z", "author": {"login": "stianst"}, "path": "quarkus/server/src/main/resources/application.properties", "diffHunk": "@@ -1,6 +1,6 @@\n #quarkus.log.level = DEBUG\n \n quarkus.application.name=Keycloak\n-quarkus.servlet.context-path = /\n+quarkus.http.root-path = /auth", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1deadbe416d4cc15bcd620334e1f9dde02b99bf"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4NDA3ODEyOnYy", "diffSide": "RIGHT", "path": "services/src/main/java/org/keycloak/authentication/authenticators/challenge/NoCookieFlowRedirectAuthenticator.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwNzo1OTozNVrOFvISKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxMzowODoyM1rOFyS0Ag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk2MzExMg==", "bodyText": "We should create a bug report for this and handle in a separate PR", "url": "https://github.com/keycloak/keycloak/pull/6754#discussion_r384963112", "createdAt": "2020-02-27T07:59:35Z", "author": {"login": "stianst"}, "path": "services/src/main/java/org/keycloak/authentication/authenticators/challenge/NoCookieFlowRedirectAuthenticator.java", "diffHunk": "@@ -45,7 +46,8 @@ public void authenticate(AuthenticationFlowContext context) {\n \n         // only do redirects for GET requests\n         if (HttpMethod.GET.equalsIgnoreCase(httpRequest.getHttpMethod())) {\n-            if (!httpRequest.getUri().getQueryParameters().containsKey(LoginActionsService.AUTH_SESSION_ID)) {\n+            KeycloakUriInfo uriInfo = context.getSession().getContext().getUri();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1deadbe416d4cc15bcd620334e1f9dde02b99bf"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTExODMxNQ==", "bodyText": "I can send a separate PR, I thought that this change was too simple to deserve one.\nBasically, we get some errors when calling getUri on the httpRequest when running Quarkus. I did not investigate further the reasons but I suspect some mismatch in resteasy versions.", "url": "https://github.com/keycloak/keycloak/pull/6754#discussion_r385118315", "createdAt": "2020-02-27T13:16:22Z", "author": {"login": "pedroigor"}, "path": "services/src/main/java/org/keycloak/authentication/authenticators/challenge/NoCookieFlowRedirectAuthenticator.java", "diffHunk": "@@ -45,7 +46,8 @@ public void authenticate(AuthenticationFlowContext context) {\n \n         // only do redirects for GET requests\n         if (HttpMethod.GET.equalsIgnoreCase(httpRequest.getHttpMethod())) {\n-            if (!httpRequest.getUri().getQueryParameters().containsKey(LoginActionsService.AUTH_SESSION_ID)) {\n+            KeycloakUriInfo uriInfo = context.getSession().getContext().getUri();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk2MzExMg=="}, "originalCommit": {"oid": "b1deadbe416d4cc15bcd620334e1f9dde02b99bf"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODI4MTM0Ng==", "bodyText": "OK", "url": "https://github.com/keycloak/keycloak/pull/6754#discussion_r388281346", "createdAt": "2020-03-05T13:08:23Z", "author": {"login": "stianst"}, "path": "services/src/main/java/org/keycloak/authentication/authenticators/challenge/NoCookieFlowRedirectAuthenticator.java", "diffHunk": "@@ -45,7 +46,8 @@ public void authenticate(AuthenticationFlowContext context) {\n \n         // only do redirects for GET requests\n         if (HttpMethod.GET.equalsIgnoreCase(httpRequest.getHttpMethod())) {\n-            if (!httpRequest.getUri().getQueryParameters().containsKey(LoginActionsService.AUTH_SESSION_ID)) {\n+            KeycloakUriInfo uriInfo = context.getSession().getContext().getUri();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk2MzExMg=="}, "originalCommit": {"oid": "b1deadbe416d4cc15bcd620334e1f9dde02b99bf"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNjE0OTAwOnYy", "diffSide": "RIGHT", "path": "quarkus/server/pom.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNToyOTo1OVrOFyYKoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNToyOTo1OVrOFyYKoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODM2OTA1Ng==", "bodyText": "we have this one in the POM already (see line 204)", "url": "https://github.com/keycloak/keycloak/pull/6754#discussion_r388369056", "createdAt": "2020-03-05T15:29:59Z", "author": {"login": "dteleguin"}, "path": "quarkus/server/pom.xml", "diffHunk": "@@ -402,6 +402,30 @@\n                 </exclusion>\n             </exclusions>\n         </dependency>\n+        <dependency>\n+            <groupId>com.sun.mail</groupId>\n+            <artifactId>jakarta.mail</artifactId>\n+            <version>${jakarta.mail.version}</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.jboss.logging</groupId>\n+            <artifactId>commons-logging-jboss-logging</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac122b9c4094e6130abcf193d0b3ca9e93c05898"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNjE1MDM0OnYy", "diffSide": "RIGHT", "path": "quarkus/server/pom.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNTozMDoxOVrOFyYLiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNTozMDoxOVrOFyYLiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODM2OTI4OQ==", "bodyText": "same here (line 200)", "url": "https://github.com/keycloak/keycloak/pull/6754#discussion_r388369289", "createdAt": "2020-03-05T15:30:19Z", "author": {"login": "dteleguin"}, "path": "quarkus/server/pom.xml", "diffHunk": "@@ -402,6 +402,30 @@\n                 </exclusion>\n             </exclusions>\n         </dependency>\n+        <dependency>\n+            <groupId>com.sun.mail</groupId>\n+            <artifactId>jakarta.mail</artifactId>\n+            <version>${jakarta.mail.version}</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.jboss.logging</groupId>\n+            <artifactId>commons-logging-jboss-logging</artifactId>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.jboss.resteasy</groupId>\n+            <artifactId>resteasy-multipart-provider</artifactId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac122b9c4094e6130abcf193d0b3ca9e93c05898"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNjE3NjE0OnYy", "diffSide": "RIGHT", "path": "testsuite/integration-arquillian/servers/auth-server/quarkus/pom.xml", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNTozNjoyMFrOFyYbfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNTozNjoyMFrOFyYbfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODM3MzM3NQ==", "bodyText": "need to bump version after rebase?", "url": "https://github.com/keycloak/keycloak/pull/6754#discussion_r388373375", "createdAt": "2020-03-05T15:36:20Z", "author": {"login": "dteleguin"}, "path": "testsuite/integration-arquillian/servers/auth-server/quarkus/pom.xml", "diffHunk": "@@ -0,0 +1,106 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <parent>\n+        <artifactId>integration-arquillian-servers-auth-server</artifactId>\n+        <groupId>org.keycloak.testsuite</groupId>\n+        <version>9.0.0-SNAPSHOT</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac122b9c4094e6130abcf193d0b3ca9e93c05898"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3887, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}