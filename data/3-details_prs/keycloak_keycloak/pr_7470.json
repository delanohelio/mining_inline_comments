{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4NTMwMjg4", "number": 7470, "title": "[KEYCLOAK-14139] Upgrade login screen to PF4", "bodyText": "JIRA: KEYCLOAK-14139\nDesign of new login screen with PF4 components. If there are less or equal than 4 identity providers, they are shown with full width as you can see below in mobile version. Title was changed to 'Log in to your account', because there would be 3 times title 'Log in' in a column. WDYT?\n\nMobile version:\n\nCustom icons for identity providers can be provided in theme.properties.\nYou can see custom identity provider above with name my-oidc, so if you would like to add icon for that, just add line, like below, to theme.properties in login folder with pattern kcLogoIdP-{alias}. You can choose icons from PF4 icons website.\nf.e kcLogoIdP-my-oidc = fa fa-bell\nWe are trying to complete task with PF4 upgrade ASAP (to the end of the current sprint). So, some design changes should be solved in a follow-up tasks.\nPlease @Pepo48, @vmuzikar , @ssilvert, could your review this? Thank you.", "createdAt": "2020-10-06T13:04:30Z", "url": "https://github.com/keycloak/keycloak/pull/7470", "merged": true, "mergeCommit": {"oid": "a8df7d88a1c9a223ec4a5f07999986d8a352b2be"}, "closed": true, "closedAt": "2020-10-27T19:24:08Z", "author": {"login": "mabartos"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQMBCWgFqTUwMzgwNDA2Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWuEAtgFqTUxODA2MjYxOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzODA0MDY2", "url": "https://github.com/keycloak/keycloak/pull/7470#pullrequestreview-503804066", "createdAt": "2020-10-07T12:02:51Z", "commit": {"oid": "fd30a9ce25b69baaa470b26bfb9c301d2b0485f5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxMjowMjo1MVrOHdv5QQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxMjowMzoyNFrOHdv6bg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDk1NTQ1Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            loginAccountTitle=Log in to your account\n          \n          \n            \n            loginAccountTitle=Sign in to your account", "url": "https://github.com/keycloak/keycloak/pull/7470#discussion_r500955457", "createdAt": "2020-10-07T12:02:51Z", "author": {"login": "ssilvert"}, "path": "themes/src/main/resources/theme/base/login/messages/messages_en.properties", "diffHunk": "@@ -19,6 +19,7 @@ kerberosNotConfiguredTitle=Kerberos Not Configured\n bypassKerberosDetail=Either you are not logged in by Kerberos or your browser is not set up for Kerberos login.  Please click continue to login in through other means\n kerberosNotSetUp=Kerberos is not set up.  You cannot login.\n registerTitle=Register\n+loginAccountTitle=Log in to your account", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd30a9ce25b69baaa470b26bfb9c301d2b0485f5"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDk1NTYwMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            loginTitle=Log in to {0}\n          \n          \n            \n            loginTitle=Sign in to {0}", "url": "https://github.com/keycloak/keycloak/pull/7470#discussion_r500955602", "createdAt": "2020-10-07T12:03:08Z", "author": {"login": "ssilvert"}, "path": "themes/src/main/resources/theme/base/login/messages/messages_en.properties", "diffHunk": "@@ -19,6 +19,7 @@ kerberosNotConfiguredTitle=Kerberos Not Configured\n bypassKerberosDetail=Either you are not logged in by Kerberos or your browser is not set up for Kerberos login.  Please click continue to login in through other means\n kerberosNotSetUp=Kerberos is not set up.  You cannot login.\n registerTitle=Register\n+loginAccountTitle=Log in to your account\n loginTitle=Log in to {0}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd30a9ce25b69baaa470b26bfb9c301d2b0485f5"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDk1NTc1OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            identity-provider-login-label=Or log in with\n          \n          \n            \n            identity-provider-login-label=Or sign in with", "url": "https://github.com/keycloak/keycloak/pull/7470#discussion_r500955758", "createdAt": "2020-10-07T12:03:24Z", "author": {"login": "ssilvert"}, "path": "themes/src/main/resources/theme/base/login/messages/messages_en.properties", "diffHunk": "@@ -373,5 +374,7 @@ webauthn-error-auth-verification=Security key authentication result is invalid.\n webauthn-error-register-verification=Security key registration result is invalid.\n webauthn-error-user-not-found=Unknown user authenticated by the Security key.\n \n+# Identity provider\n identity-provider-redirector=Connect with another Identity Provider\n+identity-provider-login-label=Or log in with", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd30a9ce25b69baaa470b26bfb9c301d2b0485f5"}, "originalPosition": 14}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fd30a9ce25b69baaa470b26bfb9c301d2b0485f5", "author": {"user": {"login": "mabartos", "name": "Martin Barto\u0161"}}, "url": "https://github.com/keycloak/keycloak/commit/fd30a9ce25b69baaa470b26bfb9c301d2b0485f5", "committedDate": "2020-10-06T12:29:43Z", "message": "[KEYCLOAK-14139] Upgrade login screen to PF4"}, "afterCommit": {"oid": "2ea1c129aa6c732d73130f5dc565814a21843452", "author": {"user": {"login": "mabartos", "name": "Martin Barto\u0161"}}, "url": "https://github.com/keycloak/keycloak/commit/2ea1c129aa6c732d73130f5dc565814a21843452", "committedDate": "2020-10-07T13:55:22Z", "message": "[KEYCLOAK-14139] Upgrade login screen to PF4"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2ea1c129aa6c732d73130f5dc565814a21843452", "author": {"user": {"login": "mabartos", "name": "Martin Barto\u0161"}}, "url": "https://github.com/keycloak/keycloak/commit/2ea1c129aa6c732d73130f5dc565814a21843452", "committedDate": "2020-10-07T13:55:22Z", "message": "[KEYCLOAK-14139] Upgrade login screen to PF4"}, "afterCommit": {"oid": "77e3875b73c4e977277a5896509f91cfac363699", "author": {"user": {"login": "mabartos", "name": "Martin Barto\u0161"}}, "url": "https://github.com/keycloak/keycloak/commit/77e3875b73c4e977277a5896509f91cfac363699", "committedDate": "2020-10-08T07:31:13Z", "message": "[KEYCLOAK-14139] Upgrade login screen to PF4"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2NzM3Mjk4", "url": "https://github.com/keycloak/keycloak/pull/7470#pullrequestreview-506737298", "createdAt": "2020-10-12T15:51:56Z", "commit": {"oid": "77e3875b73c4e977277a5896509f91cfac363699"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxNTo1MTo1NlrOHgEQig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxNzowODo0MVrOHgGwIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzM4NjI1MA==", "bodyText": "A comment unrelated to this file.\n\nJust a few nit picks on the OTP registration form:\n\nThe \"Device Name\" input field looks different from the input field above. Isn't it perhaps missing some CSS class?\nWhen the content is too long and needs to be scrolled, the background is acting somewhat weird. But this issue was present even before so maybe it's out of scope of this PR.", "url": "https://github.com/keycloak/keycloak/pull/7470#discussion_r503386250", "createdAt": "2020-10-12T15:51:56Z", "author": {"login": "vmuzikar"}, "path": "themes/src/main/resources/theme/base/login/login.ftl", "diffHunk": "@@ -1,10 +1,10 @@\n <#import \"template.ftl\" as layout>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77e3875b73c4e977277a5896509f91cfac363699"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzM5MTQzNg==", "bodyText": "I'm not sure this is intentional but there's a grey rectangle always present in the footer of the login dialog. If registration is enabled, the registration link is present there. But when disabled, it's just empty. Not sure if this is intended?", "url": "https://github.com/keycloak/keycloak/pull/7470#discussion_r503391436", "createdAt": "2020-10-12T16:00:25Z", "author": {"login": "vmuzikar"}, "path": "themes/src/main/resources/theme/base/login/template.ftl", "diffHunk": "@@ -1,4 +1,4 @@\n-<#macro registrationLayout bodyClass=\"\" displayInfo=false displayMessage=true displayRequiredFields=false displayWide=false showAnotherWayIfPresent=true>\n+<#macro registrationLayout bodyClass=\"\" displayInfo=false displayMessage=true displayRequiredFields=false showAnotherWayIfPresent=true>\n <!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"  \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77e3875b73c4e977277a5896509f91cfac363699"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzM5MzU0MQ==", "bodyText": "The page is completely broken in IE. We're starting to drop IE support, but not sure if we're ready to do so on something as elementary as the login screen. @pdrozd @stianst?", "url": "https://github.com/keycloak/keycloak/pull/7470#discussion_r503393541", "createdAt": "2020-10-12T16:04:08Z", "author": {"login": "vmuzikar"}, "path": "themes/src/main/resources/theme/base/login/template.ftl", "diffHunk": "@@ -1,4 +1,4 @@\n-<#macro registrationLayout bodyClass=\"\" displayInfo=false displayMessage=true displayRequiredFields=false displayWide=false showAnotherWayIfPresent=true>\n+<#macro registrationLayout bodyClass=\"\" displayInfo=false displayMessage=true displayRequiredFields=false showAnotherWayIfPresent=true>\n <!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"  \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77e3875b73c4e977277a5896509f91cfac363699"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQwMTQ3Mg==", "bodyText": "Found a few notification nitpicks:\n\nThe font size is much bigger than the rest of the text. They should be probably matching but the other text is maybe too small? Maybe they could meet somewhere in the middle, a compromise?\nThe notification box is probably missing some bottom margin.", "url": "https://github.com/keycloak/keycloak/pull/7470#discussion_r503401472", "createdAt": "2020-10-12T16:18:42Z", "author": {"login": "vmuzikar"}, "path": "themes/src/main/resources/theme/base/login/template.ftl", "diffHunk": "@@ -113,27 +110,28 @@\n           <#-- App-initiated actions should not see warning messages about the need to complete the action -->\n           <#-- during login.                                                                               -->\n           <#if displayMessage && message?has_content && (message.type != 'warning' || !isAppInitiatedAction??)>\n-              <div class=\"alert alert-${message.type}\">\n-                  <#if message.type = 'success'><span class=\"${properties.kcFeedbackSuccessIcon!}\"></span></#if>\n-                  <#if message.type = 'warning'><span class=\"${properties.kcFeedbackWarningIcon!}\"></span></#if>\n-                  <#if message.type = 'error'><span class=\"${properties.kcFeedbackErrorIcon!}\"></span></#if>\n-                  <#if message.type = 'info'><span class=\"${properties.kcFeedbackInfoIcon!}\"></span></#if>\n-                  <span class=\"kc-feedback-text\">${kcSanitize(message.summary)?no_esc}</span>\n+              <div class=\"alert-${message.type} ${properties.kcAlertClass} pf-m-<#if message.type = 'error'>danger<#else>${message.type}</#if>\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77e3875b73c4e977277a5896509f91cfac363699"}, "originalPosition": 100}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQwNTQ1OQ==", "bodyText": "The page weirdly stretches itself at ~840px width (before switching to mobile layout at ~760 px).", "url": "https://github.com/keycloak/keycloak/pull/7470#discussion_r503405459", "createdAt": "2020-10-12T16:26:21Z", "author": {"login": "vmuzikar"}, "path": "themes/src/main/resources/theme/base/login/login.ftl", "diffHunk": "@@ -1,10 +1,10 @@\n <#import \"template.ftl\" as layout>\n-<@layout.registrationLayout displayInfo=social.displayInfo displayWide=(realm.password && social.providers??); section>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77e3875b73c4e977277a5896509f91cfac363699"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQxNTIyMw==", "bodyText": "Please use getTextFromElement as it contains some workarounds.", "url": "https://github.com/keycloak/keycloak/pull/7470#discussion_r503415223", "createdAt": "2020-10-12T16:45:17Z", "author": {"login": "vmuzikar"}, "path": "testsuite/integration-arquillian/tests/base/src/main/java/org/keycloak/testsuite/auth/page/login/FeedbackMessage.java", "diffHunk": "@@ -29,46 +29,71 @@\n \n /**\n  * @author Vaclav Muzikar <vmuzikar@redhat.com>\n+ * @author Martin Bartos <mabartos@redhat.com>\n  */\n public class FeedbackMessage {\n-    @FindBy(css = \".alert\")\n+\n+    private final String SUCCESS = \"success\";\n+    private final String WARNING = \"warning\";\n+    private final String ERROR = \"error\";\n+    private final String INFO = \"info\";\n+\n+    @FindBy(css = \"div[class^='alert']\")\n     private WebElement alertRoot;\n \n+    @FindBy(css = \"span[id^='input-error']\")\n+    private WebElement inputErrorRoot;\n+\n     public boolean isPresent() {\n         try {\n             return alertRoot.isDisplayed();\n+        } catch (NoSuchElementException e) {\n+            return getInputError() != null && !getInputError().isEmpty();\n         }\n-        catch (NoSuchElementException e) {\n-            return false;\n+    }\n+\n+    public String getInputError() {\n+        try {\n+            return inputErrorRoot != null ? inputErrorRoot.getText() : null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77e3875b73c4e977277a5896509f91cfac363699"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQxODE2OQ==", "bodyText": "The WebElements injected by Selenium will never be null.", "url": "https://github.com/keycloak/keycloak/pull/7470#discussion_r503418169", "createdAt": "2020-10-12T16:51:06Z", "author": {"login": "vmuzikar"}, "path": "testsuite/integration-arquillian/tests/base/src/main/java/org/keycloak/testsuite/auth/page/login/FeedbackMessage.java", "diffHunk": "@@ -29,46 +29,71 @@\n \n /**\n  * @author Vaclav Muzikar <vmuzikar@redhat.com>\n+ * @author Martin Bartos <mabartos@redhat.com>\n  */\n public class FeedbackMessage {\n-    @FindBy(css = \".alert\")\n+\n+    private final String SUCCESS = \"success\";\n+    private final String WARNING = \"warning\";\n+    private final String ERROR = \"error\";\n+    private final String INFO = \"info\";\n+\n+    @FindBy(css = \"div[class^='alert']\")\n     private WebElement alertRoot;\n \n+    @FindBy(css = \"span[id^='input-error']\")\n+    private WebElement inputErrorRoot;\n+\n     public boolean isPresent() {\n         try {\n             return alertRoot.isDisplayed();\n+        } catch (NoSuchElementException e) {\n+            return getInputError() != null && !getInputError().isEmpty();\n         }\n-        catch (NoSuchElementException e) {\n-            return false;\n+    }\n+\n+    public String getInputError() {\n+        try {\n+            return inputErrorRoot != null ? inputErrorRoot.getText() : null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77e3875b73c4e977277a5896509f91cfac363699"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQxODQ2MA==", "bodyText": "The WebElements injected by Selenium will never be null.", "url": "https://github.com/keycloak/keycloak/pull/7470#discussion_r503418460", "createdAt": "2020-10-12T16:51:36Z", "author": {"login": "vmuzikar"}, "path": "testsuite/integration-arquillian/tests/base/src/main/java/org/keycloak/testsuite/pages/LoginPage.java", "diffHunk": "@@ -124,8 +128,20 @@ public void cancel() {\n         cancelButton.click();\n     }\n \n+    public String getInputError() {\n+        try {\n+            return inputError != null ? inputError.getText() : null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77e3875b73c4e977277a5896509f91cfac363699"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQxODkwNA==", "bodyText": "The WebElements injected by Selenium will never be null.", "url": "https://github.com/keycloak/keycloak/pull/7470#discussion_r503418904", "createdAt": "2020-10-12T16:52:20Z", "author": {"login": "vmuzikar"}, "path": "testsuite/integration-arquillian/tests/base/src/main/java/org/keycloak/testsuite/pages/LoginPage.java", "diffHunk": "@@ -124,8 +128,20 @@ public void cancel() {\n         cancelButton.click();\n     }\n \n+    public String getInputError() {\n+        try {\n+            return inputError != null ? inputError.getText() : null;\n+        } catch (NoSuchElementException e) {\n+            return null;\n+        }\n+    }\n+\n     public String getError() {\n-        return loginErrorMessage != null ? loginErrorMessage.getText() : null;\n+        try {\n+            return loginErrorMessage != null ? loginErrorMessage.getText() : getInputError();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77e3875b73c4e977277a5896509f91cfac363699"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQxOTAyNg==", "bodyText": "The WebElements injected by Selenium will never be null.", "url": "https://github.com/keycloak/keycloak/pull/7470#discussion_r503419026", "createdAt": "2020-10-12T16:52:36Z", "author": {"login": "vmuzikar"}, "path": "testsuite/integration-arquillian/tests/base/src/main/java/org/keycloak/testsuite/pages/LoginPasswordResetPage.java", "diffHunk": "@@ -62,8 +66,20 @@ public String getSuccessMessage() {\n         return emailSuccessMessage != null ? emailSuccessMessage.getText() : null;\n     }\n \n+    public String getUsernameError() {\n+        try {\n+            return usernameError != null ? usernameError.getText() : null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77e3875b73c4e977277a5896509f91cfac363699"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQxOTE0NQ==", "bodyText": "The WebElements injected by Selenium will never be null.", "url": "https://github.com/keycloak/keycloak/pull/7470#discussion_r503419145", "createdAt": "2020-10-12T16:52:49Z", "author": {"login": "vmuzikar"}, "path": "testsuite/integration-arquillian/tests/base/src/main/java/org/keycloak/testsuite/pages/LoginPasswordResetPage.java", "diffHunk": "@@ -62,8 +66,20 @@ public String getSuccessMessage() {\n         return emailSuccessMessage != null ? emailSuccessMessage.getText() : null;\n     }\n \n+    public String getUsernameError() {\n+        try {\n+            return usernameError != null ? usernameError.getText() : null;\n+        } catch (NoSuchElementException e) {\n+            return null;\n+        }\n+    }\n+\n     public String getErrorMessage() {\n-        return emailErrorMessage != null ? emailErrorMessage.getText() : null;\n+        try {\n+            return emailErrorMessage != null ? emailErrorMessage.getText() : getUsernameError();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77e3875b73c4e977277a5896509f91cfac363699"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQxOTM2Mg==", "bodyText": "The WebElements injected by Selenium will never be null.", "url": "https://github.com/keycloak/keycloak/pull/7470#discussion_r503419362", "createdAt": "2020-10-12T16:53:11Z", "author": {"login": "vmuzikar"}, "path": "testsuite/integration-arquillian/tests/base/src/main/java/org/keycloak/testsuite/pages/LoginUsernameOnlyPage.java", "diffHunk": "@@ -19,10 +23,26 @@ public void login(String username) {\n         submitButton.click();\n     }\n \n+    public String getUsernameError() {\n+        try {\n+            return usernameError != null ? usernameError.getText() : null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77e3875b73c4e977277a5896509f91cfac363699"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQyMjgxMg==", "bodyText": "I'm not sure we should do it this way. The test should be deterministic and should know whether it's fetching the error message from the notification or from the field. What if the error is displayed as field error whereas it should be a notification? And vice versa.", "url": "https://github.com/keycloak/keycloak/pull/7470#discussion_r503422812", "createdAt": "2020-10-12T16:59:44Z", "author": {"login": "vmuzikar"}, "path": "testsuite/integration-arquillian/tests/base/src/main/java/org/keycloak/testsuite/pages/LoginUsernameOnlyPage.java", "diffHunk": "@@ -19,10 +23,26 @@ public void login(String username) {\n         submitButton.click();\n     }\n \n+    public String getUsernameError() {\n+        try {\n+            return usernameError != null ? usernameError.getText() : null;\n+        } catch (NoSuchElementException e) {\n+            return null;\n+        }\n+    }\n \n+    @Override\n+    public String getError() {\n+        try {\n+            return super.getError() != null ? super.getError() : getUsernameError();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77e3875b73c4e977277a5896509f91cfac363699"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQyMzEzMg==", "bodyText": "The test should be deterministic and should know whether it's fetching the error message from the notification or from the field.", "url": "https://github.com/keycloak/keycloak/pull/7470#discussion_r503423132", "createdAt": "2020-10-12T17:00:17Z", "author": {"login": "vmuzikar"}, "path": "testsuite/integration-arquillian/tests/base/src/main/java/org/keycloak/testsuite/pages/LoginPasswordResetPage.java", "diffHunk": "@@ -62,8 +66,20 @@ public String getSuccessMessage() {\n         return emailSuccessMessage != null ? emailSuccessMessage.getText() : null;\n     }\n \n+    public String getUsernameError() {\n+        try {\n+            return usernameError != null ? usernameError.getText() : null;\n+        } catch (NoSuchElementException e) {\n+            return null;\n+        }\n+    }\n+\n     public String getErrorMessage() {\n-        return emailErrorMessage != null ? emailErrorMessage.getText() : null;\n+        try {\n+            return emailErrorMessage != null ? emailErrorMessage.getText() : getUsernameError();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77e3875b73c4e977277a5896509f91cfac363699"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQyMzI2Nw==", "bodyText": "The test should be deterministic and should know whether it's fetching the error message from the notification or from the field.", "url": "https://github.com/keycloak/keycloak/pull/7470#discussion_r503423267", "createdAt": "2020-10-12T17:00:35Z", "author": {"login": "vmuzikar"}, "path": "testsuite/integration-arquillian/tests/base/src/main/java/org/keycloak/testsuite/pages/LoginPage.java", "diffHunk": "@@ -124,8 +128,20 @@ public void cancel() {\n         cancelButton.click();\n     }\n \n+    public String getInputError() {\n+        try {\n+            return inputError != null ? inputError.getText() : null;\n+        } catch (NoSuchElementException e) {\n+            return null;\n+        }\n+    }\n+\n     public String getError() {\n-        return loginErrorMessage != null ? loginErrorMessage.getText() : null;\n+        try {\n+            return loginErrorMessage != null ? loginErrorMessage.getText() : getInputError();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77e3875b73c4e977277a5896509f91cfac363699"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQyMzY0NA==", "bodyText": "The test should be deterministic and should know whether it's fetching the error message from the notification or from the field.", "url": "https://github.com/keycloak/keycloak/pull/7470#discussion_r503423644", "createdAt": "2020-10-12T17:01:27Z", "author": {"login": "vmuzikar"}, "path": "testsuite/integration-arquillian/tests/base/src/main/java/org/keycloak/testsuite/pages/PasswordPage.java", "diffHunk": "@@ -46,8 +49,20 @@ public String getPassword() {\n         return passwordInput.getAttribute(\"value\");\n     }\n \n+    public String getPasswordError() {\n+        try {\n+            return passwordError != null ? passwordError.getText() : null;\n+        } catch (NoSuchElementException e) {\n+            return null;\n+        }\n+    }\n+\n     public String getError() {\n-        return loginErrorMessage != null ? loginErrorMessage.getText() : null;\n+        try {\n+            return loginErrorMessage != null ? loginErrorMessage.getText() : getPasswordError();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77e3875b73c4e977277a5896509f91cfac363699"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQyNDY5Ng==", "bodyText": "Should this really be a field error? I mean a disabled account is not an input error, so why it should be assigned to a field?", "url": "https://github.com/keycloak/keycloak/pull/7470#discussion_r503424696", "createdAt": "2020-10-12T17:03:36Z", "author": {"login": "vmuzikar"}, "path": "services/src/main/java/org/keycloak/authentication/authenticators/browser/AbstractUsernameFormAuthenticator.java", "diffHunk": "@@ -113,7 +127,7 @@ public boolean enabledUser(AuthenticationFlowContext context, UserModel user) {\n         if (!user.isEnabled()) {\n             context.getEvent().user(user);\n             context.getEvent().error(Errors.USER_DISABLED);\n-            Response challengeResponse = challenge(context, Messages.ACCOUNT_DISABLED);\n+            Response challengeResponse = challenge(context, Messages.ACCOUNT_DISABLED, FIELD_USERNAME);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77e3875b73c4e977277a5896509f91cfac363699"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQyNzEwNQ==", "bodyText": "The WebElements injected by Selenium will never be null.", "url": "https://github.com/keycloak/keycloak/pull/7470#discussion_r503427105", "createdAt": "2020-10-12T17:08:41Z", "author": {"login": "vmuzikar"}, "path": "testsuite/integration-arquillian/tests/base/src/main/java/org/keycloak/testsuite/pages/PasswordPage.java", "diffHunk": "@@ -46,8 +49,20 @@ public String getPassword() {\n         return passwordInput.getAttribute(\"value\");\n     }\n \n+    public String getPasswordError() {\n+        try {\n+            return passwordError != null ? passwordError.getText() : null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "77e3875b73c4e977277a5896509f91cfac363699"}, "originalPosition": 16}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "77e3875b73c4e977277a5896509f91cfac363699", "author": {"user": {"login": "mabartos", "name": "Martin Barto\u0161"}}, "url": "https://github.com/keycloak/keycloak/commit/77e3875b73c4e977277a5896509f91cfac363699", "committedDate": "2020-10-08T07:31:13Z", "message": "[KEYCLOAK-14139] Upgrade login screen to PF4"}, "afterCommit": {"oid": "87ba8d16bc20c259e4acf1b4c336911c961306be", "author": {"user": {"login": "mabartos", "name": "Martin Barto\u0161"}}, "url": "https://github.com/keycloak/keycloak/commit/87ba8d16bc20c259e4acf1b4c336911c961306be", "committedDate": "2020-10-13T06:56:04Z", "message": "[KEYCLOAK-14139] Upgrade login screen to PF4"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3MTQzOTU0", "url": "https://github.com/keycloak/keycloak/pull/7470#pullrequestreview-507143954", "createdAt": "2020-10-13T07:31:34Z", "commit": {"oid": "87ba8d16bc20c259e4acf1b4c336911c961306be"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "87ba8d16bc20c259e4acf1b4c336911c961306be", "author": {"user": {"login": "mabartos", "name": "Martin Barto\u0161"}}, "url": "https://github.com/keycloak/keycloak/commit/87ba8d16bc20c259e4acf1b4c336911c961306be", "committedDate": "2020-10-13T06:56:04Z", "message": "[KEYCLOAK-14139] Upgrade login screen to PF4"}, "afterCommit": {"oid": "84ce047f44d018b2c9423f0ca01b4f199d50d51f", "author": {"user": {"login": "mabartos", "name": "Martin Barto\u0161"}}, "url": "https://github.com/keycloak/keycloak/commit/84ce047f44d018b2c9423f0ca01b4f199d50d51f", "committedDate": "2020-10-13T11:18:34Z", "message": "[KEYCLOAK-14139] Upgrade login screen to PF4"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "84ce047f44d018b2c9423f0ca01b4f199d50d51f", "author": {"user": {"login": "mabartos", "name": "Martin Barto\u0161"}}, "url": "https://github.com/keycloak/keycloak/commit/84ce047f44d018b2c9423f0ca01b4f199d50d51f", "committedDate": "2020-10-13T11:18:34Z", "message": "[KEYCLOAK-14139] Upgrade login screen to PF4"}, "afterCommit": {"oid": "8ff8002f028dc6a9a72e5c19d458bfbbfb0b4140", "author": {"user": {"login": "mabartos", "name": "Martin Barto\u0161"}}, "url": "https://github.com/keycloak/keycloak/commit/8ff8002f028dc6a9a72e5c19d458bfbbfb0b4140", "committedDate": "2020-10-13T12:00:05Z", "message": "[KEYCLOAK-14139] Upgrade login screen to PF4"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8ff8002f028dc6a9a72e5c19d458bfbbfb0b4140", "author": {"user": {"login": "mabartos", "name": "Martin Barto\u0161"}}, "url": "https://github.com/keycloak/keycloak/commit/8ff8002f028dc6a9a72e5c19d458bfbbfb0b4140", "committedDate": "2020-10-13T12:00:05Z", "message": "[KEYCLOAK-14139] Upgrade login screen to PF4"}, "afterCommit": {"oid": "65431bfda59902303d3034566a02b81610e99bf5", "author": {"user": {"login": "mabartos", "name": "Martin Barto\u0161"}}, "url": "https://github.com/keycloak/keycloak/commit/65431bfda59902303d3034566a02b81610e99bf5", "committedDate": "2020-10-15T07:50:21Z", "message": "[KEYCLOAK-14139] Upgrade login screen to PF4"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "65431bfda59902303d3034566a02b81610e99bf5", "author": {"user": {"login": "mabartos", "name": "Martin Barto\u0161"}}, "url": "https://github.com/keycloak/keycloak/commit/65431bfda59902303d3034566a02b81610e99bf5", "committedDate": "2020-10-15T07:50:21Z", "message": "[KEYCLOAK-14139] Upgrade login screen to PF4"}, "afterCommit": {"oid": "7c38b062a0db4923a85e4567f15fba5b30b34c27", "author": {"user": {"login": "mabartos", "name": "Martin Barto\u0161"}}, "url": "https://github.com/keycloak/keycloak/commit/7c38b062a0db4923a85e4567f15fba5b30b34c27", "committedDate": "2020-10-19T12:28:30Z", "message": "[KEYCLOAK-14139] Upgrade login screen to PF4"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7c38b062a0db4923a85e4567f15fba5b30b34c27", "author": {"user": {"login": "mabartos", "name": "Martin Barto\u0161"}}, "url": "https://github.com/keycloak/keycloak/commit/7c38b062a0db4923a85e4567f15fba5b30b34c27", "committedDate": "2020-10-19T12:28:30Z", "message": "[KEYCLOAK-14139] Upgrade login screen to PF4"}, "afterCommit": {"oid": "10a0829f55808ae74ee1e5f0643007134a8ebea1", "author": {"user": {"login": "mabartos", "name": "Martin Barto\u0161"}}, "url": "https://github.com/keycloak/keycloak/commit/10a0829f55808ae74ee1e5f0643007134a8ebea1", "committedDate": "2020-10-26T11:35:02Z", "message": "[KEYCLOAK-14139] Upgrade login screen to PF4"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "10a0829f55808ae74ee1e5f0643007134a8ebea1", "author": {"user": {"login": "mabartos", "name": "Martin Barto\u0161"}}, "url": "https://github.com/keycloak/keycloak/commit/10a0829f55808ae74ee1e5f0643007134a8ebea1", "committedDate": "2020-10-26T11:35:02Z", "message": "[KEYCLOAK-14139] Upgrade login screen to PF4"}, "afterCommit": {"oid": "785fbe457dfde34318c4d3e80e322f0fb57c1ecf", "author": {"user": {"login": "mabartos", "name": "Martin Barto\u0161"}}, "url": "https://github.com/keycloak/keycloak/commit/785fbe457dfde34318c4d3e80e322f0fb57c1ecf", "committedDate": "2020-10-26T11:45:09Z", "message": "[KEYCLOAK-14139] Upgrade login screen to PF4"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "785fbe457dfde34318c4d3e80e322f0fb57c1ecf", "author": {"user": {"login": "mabartos", "name": "Martin Barto\u0161"}}, "url": "https://github.com/keycloak/keycloak/commit/785fbe457dfde34318c4d3e80e322f0fb57c1ecf", "committedDate": "2020-10-26T11:45:09Z", "message": "[KEYCLOAK-14139] Upgrade login screen to PF4"}, "afterCommit": {"oid": "038578b1afe232da034c1c0027f2a49e5c74ff97", "author": {"user": {"login": "mabartos", "name": "Martin Barto\u0161"}}, "url": "https://github.com/keycloak/keycloak/commit/038578b1afe232da034c1c0027f2a49e5c74ff97", "committedDate": "2020-10-26T11:55:33Z", "message": "[KEYCLOAK-14139] Upgrade login screen to PF4"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f067aa2e90921e0ab8a84fd628c38305e7936203", "author": {"user": {"login": "mabartos", "name": "Martin Barto\u0161"}}, "url": "https://github.com/keycloak/keycloak/commit/f067aa2e90921e0ab8a84fd628c38305e7936203", "committedDate": "2020-10-27T12:41:13Z", "message": "[KEYCLOAK-14139] Upgrade login screen to PF4"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "038578b1afe232da034c1c0027f2a49e5c74ff97", "author": {"user": {"login": "mabartos", "name": "Martin Barto\u0161"}}, "url": "https://github.com/keycloak/keycloak/commit/038578b1afe232da034c1c0027f2a49e5c74ff97", "committedDate": "2020-10-26T11:55:33Z", "message": "[KEYCLOAK-14139] Upgrade login screen to PF4"}, "afterCommit": {"oid": "f067aa2e90921e0ab8a84fd628c38305e7936203", "author": {"user": {"login": "mabartos", "name": "Martin Barto\u0161"}}, "url": "https://github.com/keycloak/keycloak/commit/f067aa2e90921e0ab8a84fd628c38305e7936203", "committedDate": "2020-10-27T12:41:13Z", "message": "[KEYCLOAK-14139] Upgrade login screen to PF4"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3NzcyMzkx", "url": "https://github.com/keycloak/keycloak/pull/7470#pullrequestreview-517772391", "createdAt": "2020-10-27T14:33:00Z", "commit": {"oid": "f067aa2e90921e0ab8a84fd628c38305e7936203"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4MDYyNjE4", "url": "https://github.com/keycloak/keycloak/pull/7470#pullrequestreview-518062618", "createdAt": "2020-10-27T19:23:35Z", "commit": {"oid": "f067aa2e90921e0ab8a84fd628c38305e7936203"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3462, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}