{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc0NzM4NjM1", "number": 10469, "title": "Set build variables on the node instead of setup node", "bodyText": "Set freemarkers, boot_jdk and git cache on the node for correct\ninterpolation and update commands accordingly.\nCheck if locations exist.\n[ci skip]\nSigned-off-by: Violeta Sebe vsebe@ca.ibm.com", "createdAt": "2020-08-27T14:27:00Z", "url": "https://github.com/eclipse-openj9/openj9/pull/10469", "merged": true, "mergeCommit": {"oid": "68888bea4be8d00daed2a6e2135e2725411d76f3"}, "closed": true, "closedAt": "2020-08-27T20:38:10Z", "author": {"login": "vsebe"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdDDVU2gFqTQ3NjkwNzkzMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdDGkS8gFqTQ3NzA2MzI3NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2OTA3OTMw", "url": "https://github.com/eclipse-openj9/openj9/pull/10469#pullrequestreview-476907930", "createdAt": "2020-08-27T16:52:01Z", "commit": {"oid": "d0f6fe7111922b6a8403e494c668a5dfdb8e26c8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxNjo1MjowMVrOHIY_3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxNjo1MjowMVrOHIY_3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODU2MDIyMA==", "bodyText": "This only gets executed on the nodes themselves correct, not on master?", "url": "https://github.com/eclipse-openj9/openj9/pull/10469#discussion_r478560220", "createdAt": "2020-08-27T16:52:01Z", "author": {"login": "jdekonin"}, "path": "buildenv/jenkins/common/variables-functions.groovy", "diffHunk": "@@ -1436,4 +1433,31 @@ def create_job(JOB_NAME, SDK_VERSION, SPEC, downstreamJobType, id) {\n         3, 120)\n }\n \n+def set_build_variables_per_node() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d0f6fe7111922b6a8403e494c668a5dfdb8e26c8"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2OTEzNzU4", "url": "https://github.com/eclipse-openj9/openj9/pull/10469#pullrequestreview-476913758", "createdAt": "2020-08-27T16:59:31Z", "commit": {"oid": "d0f6fe7111922b6a8403e494c668a5dfdb8e26c8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxNjo1OTozMVrOHIZQ-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxNjo1OTozMVrOHIZQ-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODU2NDYwMA==", "bodyText": "Do we want to have a slightly more detailed message here instead of just blank?  Maybe a 'not configured for this node' to be more meaningful if its not present?", "url": "https://github.com/eclipse-openj9/openj9/pull/10469#discussion_r478564600", "createdAt": "2020-08-27T16:59:31Z", "author": {"login": "jdekonin"}, "path": "buildenv/jenkins/common/variables-functions.groovy", "diffHunk": "@@ -1436,4 +1433,31 @@ def create_job(JOB_NAME, SDK_VERSION, SPEC, downstreamJobType, id) {\n         3, 120)\n }\n \n+def set_build_variables_per_node() {\n+    BOOT_JDK = check_path(buildspec.getScalarField('boot_jdk', SDK_VERSION), true)\n+    println(\"BOOT_JDK: ${BOOT_JDK}\")\n+    if (!BOOT_JDK) {\n+        error(\"BOOT_JDK: ${BOOT_JDK} does not exist!\")\n+    }\n+\n+    def freemarkerPath = buildspec.getScalarField('freemarker', SDK_VERSION)\n+    FREEMARKER = check_path(buildspec.getScalarField('freemarker', SDK_VERSION), false)\n+    println(\"FREEMARKER: ${FREEMARKER}\")\n+    if (!FREEMARKER) {\n+        error(\"FREEMARKER: ${FREEMARKER} does not exist!\")\n+    }\n+\n+    OPENJDK_REFERENCE_REPO = check_path(buildspec.getScalarField(\"openjdk_reference_repo\", SDK_VERSION), true)\n+    println(\"OPENJDK_REFERENCE_REPO: ${OPENJDK_REFERENCE_REPO}\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d0f6fe7111922b6a8403e494c668a5dfdb8e26c8"}, "originalPosition": 29}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d0f6fe7111922b6a8403e494c668a5dfdb8e26c8", "author": {"user": {"login": "vsebe", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/d0f6fe7111922b6a8403e494c668a5dfdb8e26c8", "committedDate": "2020-08-26T19:38:21Z", "message": "Set build variables on the node instead of setup node\n\nSet freemarkers, boot_jdk and git cache on the node for correct\ninterpolation and update commands accordingly.\nCheck if locations exist.\n\n[ci skip]\n\nSigned-off-by: Violeta Sebe <vsebe@ca.ibm.com>"}, "afterCommit": {"oid": "8445514c2164b365c5d024157898cde096705c09", "author": {"user": {"login": "vsebe", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/8445514c2164b365c5d024157898cde096705c09", "committedDate": "2020-08-27T17:49:17Z", "message": "Set build variables on the node instead of setup node\n\nSet freemarkers, boot_jdk and git cache on the node for correct\ninterpolation and update commands accordingly.\nCheck if locations exist.\n\n[ci skip]\n\nSigned-off-by: Violeta Sebe <vsebe@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8445514c2164b365c5d024157898cde096705c09", "author": {"user": {"login": "vsebe", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/8445514c2164b365c5d024157898cde096705c09", "committedDate": "2020-08-27T17:49:17Z", "message": "Set build variables on the node instead of setup node\n\nSet freemarkers, boot_jdk and git cache on the node for correct\ninterpolation and update commands accordingly.\nCheck if locations exist.\n\n[ci skip]\n\nSigned-off-by: Violeta Sebe <vsebe@ca.ibm.com>"}, "afterCommit": {"oid": "c0a75e57c9ccc60fbdb08b99499212b769bf0192", "author": {"user": {"login": "vsebe", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c0a75e57c9ccc60fbdb08b99499212b769bf0192", "committedDate": "2020-08-27T18:11:56Z", "message": "Set build variables on the node instead of setup node\n\nSet freemarkers, boot_jdk and git cache on the node for correct\ninterpolation and update commands accordingly.\nCheck if locations exist.\n\n[ci skip]\n\nSigned-off-by: Violeta Sebe <vsebe@ca.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "584441beeeeb1073fbf79dff739012bc1a0ac451", "author": {"user": {"login": "vsebe", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/584441beeeeb1073fbf79dff739012bc1a0ac451", "committedDate": "2020-08-27T18:16:56Z", "message": "Set build variables on the node instead of setup node\n\nSet freemarkers, boot_jdk and git cache on the node for correct\ninterpolation and update commands accordingly.\nCheck if locations exist.\n\n[ci skip]\n\nSigned-off-by: Violeta Sebe <vsebe@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c0a75e57c9ccc60fbdb08b99499212b769bf0192", "author": {"user": {"login": "vsebe", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c0a75e57c9ccc60fbdb08b99499212b769bf0192", "committedDate": "2020-08-27T18:11:56Z", "message": "Set build variables on the node instead of setup node\n\nSet freemarkers, boot_jdk and git cache on the node for correct\ninterpolation and update commands accordingly.\nCheck if locations exist.\n\n[ci skip]\n\nSigned-off-by: Violeta Sebe <vsebe@ca.ibm.com>"}, "afterCommit": {"oid": "584441beeeeb1073fbf79dff739012bc1a0ac451", "author": {"user": {"login": "vsebe", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/584441beeeeb1073fbf79dff739012bc1a0ac451", "committedDate": "2020-08-27T18:16:56Z", "message": "Set build variables on the node instead of setup node\n\nSet freemarkers, boot_jdk and git cache on the node for correct\ninterpolation and update commands accordingly.\nCheck if locations exist.\n\n[ci skip]\n\nSigned-off-by: Violeta Sebe <vsebe@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2OTgyMDk5", "url": "https://github.com/eclipse-openj9/openj9/pull/10469#pullrequestreview-476982099", "createdAt": "2020-08-27T18:35:02Z", "commit": {"oid": "584441beeeeb1073fbf79dff739012bc1a0ac451"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3MDYzMjc0", "url": "https://github.com/eclipse-openj9/openj9/pull/10469#pullrequestreview-477063274", "createdAt": "2020-08-27T20:38:05Z", "commit": {"oid": "584441beeeeb1073fbf79dff739012bc1a0ac451"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 237, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}