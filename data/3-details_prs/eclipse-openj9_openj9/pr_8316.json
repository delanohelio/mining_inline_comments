{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYzMzMxNTk4", "number": 8316, "title": "CMake: Update atomic configuration", "bodyText": "Add J9VM_INTERP_ATOMIC_FREE_JNI_USES_FLUSH option\nAdd J9VM_INTERP_TWO_PASS_EXCLUSIVE\nEnable both on all cmake builds\nEnable J9VM_INTERP_ATOMIC_FREE_JNI on all cmake builds\n\nSigned-off-by: Devin Nakamura devinn@ca.ibm.com", "createdAt": "2020-01-15T20:50:20Z", "url": "https://github.com/eclipse-openj9/openj9/pull/8316", "merged": true, "mergeCommit": {"oid": "8acaaba129db63c177c1822b363a02d3ee46ce28"}, "closed": true, "closedAt": "2020-03-05T15:48:43Z", "author": {"login": "dnakamura"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb68sjJABqjI5NTUyMDQ0OTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcJxUV1ABqjMwODg5NTczOTQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "387806208e985dad1741bf54ffcdcf8cdf4b4b28", "author": {"user": {"login": "dnakamura", "name": "Devin Nakamura"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/387806208e985dad1741bf54ffcdcf8cdf4b4b28", "committedDate": "2020-01-15T20:49:15Z", "message": "CMake: Update atomic configuration\n\n- Add J9VM_INTERP_ATOMIC_FREE_JNI_USES_FLUSH option\n- Add J9VM_INTERP_TWO_PASS_EXCLUSIVE\n- Enable both on all cmake builds\n- Enable J9VM_INTERP_ATOMIC_FREE_JNI on all cmake builds\n\nSigned-off-by: Devin Nakamura <devinn@ca.ibm.com>"}, "afterCommit": {"oid": "e6cb192d063e1b0cafd19832c59fa6af8059a585", "author": {"user": {"login": "dnakamura", "name": "Devin Nakamura"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e6cb192d063e1b0cafd19832c59fa6af8059a585", "committedDate": "2020-01-16T16:25:20Z", "message": "CMake: Update atomic configuration\n\n- Add J9VM_INTERP_ATOMIC_FREE_JNI_USES_FLUSH option\n- Add J9VM_INTERP_TWO_PASS_EXCLUSIVE\n- Enable both on all cmake builds\n- Enable J9VM_INTERP_ATOMIC_FREE_JNI on all cmake builds\n\nSigned-off-by: Devin Nakamura <devinn@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e6cb192d063e1b0cafd19832c59fa6af8059a585", "author": {"user": {"login": "dnakamura", "name": "Devin Nakamura"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e6cb192d063e1b0cafd19832c59fa6af8059a585", "committedDate": "2020-01-16T16:25:20Z", "message": "CMake: Update atomic configuration\n\n- Add J9VM_INTERP_ATOMIC_FREE_JNI_USES_FLUSH option\n- Add J9VM_INTERP_TWO_PASS_EXCLUSIVE\n- Enable both on all cmake builds\n- Enable J9VM_INTERP_ATOMIC_FREE_JNI on all cmake builds\n\nSigned-off-by: Devin Nakamura <devinn@ca.ibm.com>"}, "afterCommit": {"oid": "97aae240bf4782a04d87fb0a344d39ee0882f1fa", "author": {"user": {"login": "dnakamura", "name": "Devin Nakamura"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/97aae240bf4782a04d87fb0a344d39ee0882f1fa", "committedDate": "2020-01-16T18:32:14Z", "message": "CMake: Update atomic configuration\n\n- Add J9VM_INTERP_ATOMIC_FREE_JNI_USES_FLUSH option\n- Add J9VM_INTERP_TWO_PASS_EXCLUSIVE\n- Enable both on all cmake builds\n- Enable J9VM_INTERP_ATOMIC_FREE_JNI on all cmake builds\n\nSigned-off-by: Devin Nakamura <devinn@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0MTcyNTk0", "url": "https://github.com/eclipse-openj9/openj9/pull/8316#pullrequestreview-344172594", "createdAt": "2020-01-16T19:49:19Z", "commit": {"oid": "97aae240bf4782a04d87fb0a344d39ee0882f1fa"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQxOTo0OToxOVrOFeliUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQxOTo1NzowMVrOFelvRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzYxNjU5Mw==", "bodyText": "This change looks to be gratuitous.  Unintentional?", "url": "https://github.com/eclipse-openj9/openj9/pull/8316#discussion_r367616593", "createdAt": "2020-01-16T19:49:19Z", "author": {"login": "DanHeidinga"}, "path": "buildspecs/j9.flags", "diffHunk": "@@ -1003,14 +1003,14 @@ all data is stored in their own region. It additionaly reduces footprint, mainly\n \t\t<description>DEBUGGING FEATURE.  Determines if the interpreter produces debug information at every bytecode.</description>\n \t\t<ifRemoved>No full trace available.</ifRemoved>\n \t</flag>\n-\t<flag id=\"interp_updateVMCTracing\">\n-\t\t<description>Debug mode for tracing uses of updateVMStruct</description>\n-\t\t<ifRemoved>No tracing of updateVMStruct helpers</ifRemoved>\n-\t</flag>\n \t<flag id=\"interp_twoPassExclusive\">\n \t\t<description>Exclusive VM access - Set halt bit in one pass, count responders in another pass</description>\n \t\t<ifRemoved>Set and count in a single pass</ifRemoved>\n \t</flag>\n+\t<flag id=\"interp_updateVMCTracing\">\n+\t\t<description>Debug mode for tracing uses of updateVMStruct</description>\n+\t\t<ifRemoved>No tracing of updateVMStruct helpers</ifRemoved>\n+\t</flag>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97aae240bf4782a04d87fb0a344d39ee0882f1fa"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzYxOTkxMQ==", "bodyText": "two pass exclusive isn't enabled for all specs in the UMA world.  Should this be gated with per-platform checks in the same way?  Similar concern about the other two options", "url": "https://github.com/eclipse-openj9/openj9/pull/8316#discussion_r367619911", "createdAt": "2020-01-16T19:57:01Z", "author": {"login": "DanHeidinga"}, "path": "runtime/cmake/caches/common.cmake", "diffHunk": "@@ -170,6 +172,7 @@ set(J9VM_INTERP_NEW_HEADER_SHAPE ON CACHE BOOL \"\")\n set(J9VM_INTERP_PROFILING_BYTECODES ON CACHE BOOL \"\")\n set(J9VM_INTERP_SIG_QUIT_THREAD ON CACHE BOOL \"\")\n set(J9VM_INTERP_SIG_QUIT_THREAD_USES_SEMAPHORES ON CACHE BOOL \"\")\n+set(J9VM_TWO_PASS_EXCLUSIVE ON CACHE BOOL \"\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "97aae240bf4782a04d87fb0a344d39ee0882f1fa"}, "originalPosition": 20}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "97aae240bf4782a04d87fb0a344d39ee0882f1fa", "author": {"user": {"login": "dnakamura", "name": "Devin Nakamura"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/97aae240bf4782a04d87fb0a344d39ee0882f1fa", "committedDate": "2020-01-16T18:32:14Z", "message": "CMake: Update atomic configuration\n\n- Add J9VM_INTERP_ATOMIC_FREE_JNI_USES_FLUSH option\n- Add J9VM_INTERP_TWO_PASS_EXCLUSIVE\n- Enable both on all cmake builds\n- Enable J9VM_INTERP_ATOMIC_FREE_JNI on all cmake builds\n\nSigned-off-by: Devin Nakamura <devinn@ca.ibm.com>"}, "afterCommit": {"oid": "d86a52d5f05841d8fb97947833d4ffc7b2eba321", "author": {"user": {"login": "dnakamura", "name": "Devin Nakamura"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/d86a52d5f05841d8fb97947833d4ffc7b2eba321", "committedDate": "2020-01-23T18:16:35Z", "message": "CMake: Update atomic configuration\n\n- Add J9VM_INTERP_ATOMIC_FREE_JNI_USES_FLUSH option\n- Add J9VM_INTERP_TWO_PASS_EXCLUSIVE\n- Enable both on all cmake builds\n- Enable J9VM_INTERP_ATOMIC_FREE_JNI on all cmake builds\n\nSigned-off-by: Devin Nakamura <devinn@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d86a52d5f05841d8fb97947833d4ffc7b2eba321", "author": {"user": {"login": "dnakamura", "name": "Devin Nakamura"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/d86a52d5f05841d8fb97947833d4ffc7b2eba321", "committedDate": "2020-01-23T18:16:35Z", "message": "CMake: Update atomic configuration\n\n- Add J9VM_INTERP_ATOMIC_FREE_JNI_USES_FLUSH option\n- Add J9VM_INTERP_TWO_PASS_EXCLUSIVE\n- Enable both on all cmake builds\n- Enable J9VM_INTERP_ATOMIC_FREE_JNI on all cmake builds\n\nSigned-off-by: Devin Nakamura <devinn@ca.ibm.com>"}, "afterCommit": {"oid": "f896a1f7bfaaf58faf19ddd1d6014a4c39036c24", "author": {"user": {"login": "dnakamura", "name": "Devin Nakamura"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/f896a1f7bfaaf58faf19ddd1d6014a4c39036c24", "committedDate": "2020-01-23T18:20:15Z", "message": "CMake: Update atomic configuration\n\n- Add J9VM_INTERP_ATOMIC_FREE_JNI_USES_FLUSH option\n- Add J9VM_INTERP_TWO_PASS_EXCLUSIVE\n- Enable both on all cmake builds\n- Enable J9VM_INTERP_ATOMIC_FREE_JNI on all cmake builds\n\nSigned-off-by: Devin Nakamura <devinn@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4OTM3NTc5", "url": "https://github.com/eclipse-openj9/openj9/pull/8316#pullrequestreview-348937579", "createdAt": "2020-01-27T20:01:30Z", "commit": {"oid": "f896a1f7bfaaf58faf19ddd1d6014a4c39036c24"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee4ef1363b213f018d002adbe7162fae92e8a38e", "author": {"user": {"login": "dnakamura", "name": "Devin Nakamura"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/ee4ef1363b213f018d002adbe7162fae92e8a38e", "committedDate": "2020-03-02T17:37:38Z", "message": "CMake: Update atomic configuration\n\n- Add J9VM_INTERP_ATOMIC_FREE_JNI_USES_FLUSH option\n- Add J9VM_INTERP_TWO_PASS_EXCLUSIVE\n- Enable both on all cmake builds\n- Enable J9VM_INTERP_ATOMIC_FREE_JNI on all cmake builds\n\nSigned-off-by: Devin Nakamura <devinn@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f896a1f7bfaaf58faf19ddd1d6014a4c39036c24", "author": {"user": {"login": "dnakamura", "name": "Devin Nakamura"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/f896a1f7bfaaf58faf19ddd1d6014a4c39036c24", "committedDate": "2020-01-23T18:20:15Z", "message": "CMake: Update atomic configuration\n\n- Add J9VM_INTERP_ATOMIC_FREE_JNI_USES_FLUSH option\n- Add J9VM_INTERP_TWO_PASS_EXCLUSIVE\n- Enable both on all cmake builds\n- Enable J9VM_INTERP_ATOMIC_FREE_JNI on all cmake builds\n\nSigned-off-by: Devin Nakamura <devinn@ca.ibm.com>"}, "afterCommit": {"oid": "ee4ef1363b213f018d002adbe7162fae92e8a38e", "author": {"user": {"login": "dnakamura", "name": "Devin Nakamura"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/ee4ef1363b213f018d002adbe7162fae92e8a38e", "committedDate": "2020-03-02T17:37:38Z", "message": "CMake: Update atomic configuration\n\n- Add J9VM_INTERP_ATOMIC_FREE_JNI_USES_FLUSH option\n- Add J9VM_INTERP_TWO_PASS_EXCLUSIVE\n- Enable both on all cmake builds\n- Enable J9VM_INTERP_ATOMIC_FREE_JNI on all cmake builds\n\nSigned-off-by: Devin Nakamura <devinn@ca.ibm.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 863, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}