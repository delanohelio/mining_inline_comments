{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI3NjQ2MTE1", "number": 11276, "title": "Improve error message on duplicate class definition", "bodyText": "Add an error message on LinkageError when a duplicate class\ndefinition is found.\nChange setCurrentExceptionNLSWithArgs() to pass in NULL rather\nthan an empty string as the default message.\nj9nls_lookup_message() directly returns the default message when it\nis not NULL and the locale is English, making the message in\nsetCurrentExceptionNLSWithArgs() always to be the default empty string.\n\nFixes #11243\nSigned-off-by: Hang Shao hangshao@ca.ibm.com", "createdAt": "2020-11-25T19:13:43Z", "url": "https://github.com/eclipse-openj9/openj9/pull/11276", "merged": true, "mergeCommit": {"oid": "dfb2032c5f62f1ec5d2c5d6510f90e7f0af691a0"}, "closed": true, "closedAt": "2020-11-26T03:42:55Z", "author": {"login": "hangshao0"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdgDYQIgFqTUzODc4NzczNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdgKk7iAFqTUzODk3NDIzMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4Nzg3NzM3", "url": "https://github.com/eclipse-openj9/openj9/pull/11276#pullrequestreview-538787737", "createdAt": "2020-11-25T19:19:00Z", "commit": {"oid": "f25cd1130c870af6ec71f420b3b528e913b31ca2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxOToxOTowMVrOH6A7-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxOToxOTowMVrOH6A7-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDU5NDgxMQ==", "bodyText": "There isn't necessary anything wrong with the classfile, this message needs to be updated.", "url": "https://github.com/eclipse-openj9/openj9/pull/11276#discussion_r530594811", "createdAt": "2020-11-25T19:19:01Z", "author": {"login": "pshipton"}, "path": "runtime/nls/j9cl/j9jcl.nls", "diffHunk": "@@ -436,3 +436,11 @@ J9NLS_JCL_NEST_MEMBER_CLAIMS_DIFFERENT_NEST_HOST.system_action=The JVM will thro\n J9NLS_JCL_NEST_MEMBER_CLAIMS_DIFFERENT_NEST_HOST.user_response=Contact the provider of the classfile for a corrected version.\n # END NON-TRANSLATABLE\n \n+J9NLS_JCL_DUPLICATE_CLASS_DEFINITION=A duplicate class definition for %2$.*1$s is found\n+# START NON-TRANSLATABLE\n+J9NLS_JCL_DUPLICATE_CLASS_DEFINITION.sample_input_1=3\n+J9NLS_JCL_DUPLICATE_CLASS_DEFINITION.sample_input_2=Foo\n+J9NLS_JCL_DUPLICATE_CLASS_DEFINITION.explanation=A duplicated class definition is found.\n+J9NLS_JCL_DUPLICATE_CLASS_DEFINITION.system_action=The JVM will throw a LinkageError\n+J9NLS_JCL_DUPLICATE_CLASS_DEFINITION.user_response=Contact the provider of the classfile for a corrected version.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f25cd1130c870af6ec71f420b3b528e913b31ca2"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb4734213d56d2cd69e5d56f72eaa2a6c0d1940a", "author": {"user": {"login": "hangshao0", "name": "Hang Shao"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/bb4734213d56d2cd69e5d56f72eaa2a6c0d1940a", "committedDate": "2020-11-25T19:30:35Z", "message": "Improve error message on duplicate class definition\n\n1. Add an error message on LinkageError when a duplicate class \ndefinition is found.\n2. Change setCurrentExceptionNLSWithArgs() to pass in NULL rather \nthan an empty string as the default message.\nj9nls_lookup_message() directly returns the default message when it \nis not NULL and the locale is English, making the message in\nsetCurrentExceptionNLSWithArgs() always to be the default empty string.\n\nFixes #11243\n\nSigned-off-by: Hang Shao <hangshao@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f25cd1130c870af6ec71f420b3b528e913b31ca2", "author": {"user": {"login": "hangshao0", "name": "Hang Shao"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/f25cd1130c870af6ec71f420b3b528e913b31ca2", "committedDate": "2020-11-25T19:12:07Z", "message": "Improve error message on duplicate class definition\n\n1. Add an error message on LinkageError when a duplicate class \ndefinition is found.\n2. Change setCurrentExceptionNLSWithArgs() to pass in NULL rather \nthan an empty string as the default message.\nj9nls_lookup_message() directly returns the default message when it \nis not NULL and the locale is English, making the message in\nsetCurrentExceptionNLSWithArgs() always to be the default empty string.\n\nFixes #11243\n\nSigned-off-by: Hang Shao <hangshao@ca.ibm.com>"}, "afterCommit": {"oid": "bb4734213d56d2cd69e5d56f72eaa2a6c0d1940a", "author": {"user": {"login": "hangshao0", "name": "Hang Shao"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/bb4734213d56d2cd69e5d56f72eaa2a6c0d1940a", "committedDate": "2020-11-25T19:30:35Z", "message": "Improve error message on duplicate class definition\n\n1. Add an error message on LinkageError when a duplicate class \ndefinition is found.\n2. Change setCurrentExceptionNLSWithArgs() to pass in NULL rather \nthan an empty string as the default message.\nj9nls_lookup_message() directly returns the default message when it \nis not NULL and the locale is English, making the message in\nsetCurrentExceptionNLSWithArgs() always to be the default empty string.\n\nFixes #11243\n\nSigned-off-by: Hang Shao <hangshao@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4Nzk5Njc3", "url": "https://github.com/eclipse-openj9/openj9/pull/11276#pullrequestreview-538799677", "createdAt": "2020-11-25T19:39:37Z", "commit": {"oid": "bb4734213d56d2cd69e5d56f72eaa2a6c0d1940a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxOTozOTozN1rOH6BhuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxOTozOTozN1rOH6BhuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDYwNDQ3Mg==", "bodyText": "We can't return NULL here as the nlsMsgFormat is used as the format string to the j9str_vprintf which doesn't check it for null.", "url": "https://github.com/eclipse-openj9/openj9/pull/11276#discussion_r530604472", "createdAt": "2020-11-25T19:39:37Z", "author": {"login": "DanHeidinga"}, "path": "runtime/vm/exceptionsupport.c", "diffHunk": "@@ -135,7 +135,7 @@ setCurrentExceptionNLSWithArgs(J9VMThread * vmThread, U_32 nlsModule, U_32 nlsID\n \tnlsMsgFormat = omrnls_lookup_message(J9NLS_DO_NOT_PRINT_MESSAGE_TAG | J9NLS_DO_NOT_APPEND_NEWLINE,\n \t\t\tnlsModule,\n \t\t\tnlsID,\n-\t\t\t\"\");\n+\t\t\tNULL);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bb4734213d56d2cd69e5d56f72eaa2a6c0d1940a"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4OTY5MDEw", "url": "https://github.com/eclipse-openj9/openj9/pull/11276#pullrequestreview-538969010", "createdAt": "2020-11-26T03:22:29Z", "commit": {"oid": "bb4734213d56d2cd69e5d56f72eaa2a6c0d1940a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4OTc0MjMz", "url": "https://github.com/eclipse-openj9/openj9/pull/11276#pullrequestreview-538974233", "createdAt": "2020-11-26T03:42:12Z", "commit": {"oid": "bb4734213d56d2cd69e5d56f72eaa2a6c0d1940a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1654, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}