{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1NDc3NTEx", "number": 8361, "title": "Skip zero init of Matcher internal arrays", "bodyText": "The implementation of java/util/regex/Matcher uses two int arrays internally\nto track matched regions. These arrays are created and then all elements are\nset to -1. This changes skips the zero init of the int arrays at allocation-\ntime as the arrays will be immediately overwritten with -1s.\nSigned-off-by: Andrew Craik ajcraik@ca.ibm.com", "createdAt": "2020-01-21T19:44:04Z", "url": "https://github.com/eclipse-openj9/openj9/pull/8361", "merged": true, "mergeCommit": {"oid": "3030d060f65bffd9d8b8f6254078112792a073ae"}, "closed": true, "closedAt": "2020-02-11T17:31:54Z", "author": {"login": "andrewcraik"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb8mhntAH2gAyMzY1NDc3NTExOjEwN2JhYzUyYmE2MjY4ZDk5YWViZjg0ZjhkYzg1ZWM3MTZjN2ViOGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDVOiAAFqTM1Njg1MzMyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "107bac52ba6268d99aebf84f8dc85ec716c7eb8a", "author": {"user": {"login": "andrewcraik", "name": "Andrew Craik"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/107bac52ba6268d99aebf84f8dc85ec716c7eb8a", "committedDate": "2020-01-21T19:43:30Z", "message": "Skip zero init of Matcher internal arrays\n\nThe implementation of java/util/regex/Matcher uses two int arrays internally\nto track matched regions. These arrays are created and then all elements are\nset to -1. This changes skips the zero init of the int arrays at allocation-\ntime as the arrays will be immediately overwritten with -1s.\n\nSigned-off-by: Andrew Craik <ajcraik@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzMjIyOTEw", "url": "https://github.com/eclipse-openj9/openj9/pull/8361#pullrequestreview-353222910", "createdAt": "2020-02-04T18:59:55Z", "commit": {"oid": "107bac52ba6268d99aebf84f8dc85ec716c7eb8a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxODo1OTo1NVrOFlfvgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQxODo1OTo1NVrOFlfvgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDg2MTY5Nw==", "bodyText": "Will this change work for JDK11 which has a third array which is of type IntHashSet[]? In the reset() method we call the clear() API if the array index is non-null [2]. This means if we are not zero initializing the array, then it could have garbage data in there and we would try to call the clear() method on a garbage object.\n[1] https://github.com/ibmruntimes/openj9-openjdk-jdk11/blob/c9bd6c8ae0bee2fb301c6af09cb7a23099f4cd16/src/java.base/share/classes/java/util/regex/Matcher.java#L250\n[2] https://github.com/ibmruntimes/openj9-openjdk-jdk11/blob/c9bd6c8ae0bee2fb301c6af09cb7a23099f4cd16/src/java.base/share/classes/java/util/regex/Matcher.java#L410-L413", "url": "https://github.com/eclipse-openj9/openj9/pull/8361#discussion_r374861697", "createdAt": "2020-02-04T18:59:55Z", "author": {"login": "fjeremic"}, "path": "runtime/compiler/env/j9method.cpp", "diffHunk": "@@ -4166,6 +4166,13 @@ void TR_ResolvedJ9Method::construct()\n       {  TR::unknownMethod},\n       };\n \n+   static X JavaUtilRegexMatcherMethods [] =\n+      {\n+      {x(TR::java_util_regex_Matcher_init, \"<init>\", \"(Ljava/util/regex/Pattern;Ljava/lang/CharSequence;)V\")},", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "107bac52ba6268d99aebf84f8dc85ec716c7eb8a"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2ODUzMzIz", "url": "https://github.com/eclipse-openj9/openj9/pull/8361#pullrequestreview-356853323", "createdAt": "2020-02-11T17:31:44Z", "commit": {"oid": "107bac52ba6268d99aebf84f8dc85ec716c7eb8a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 897, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}