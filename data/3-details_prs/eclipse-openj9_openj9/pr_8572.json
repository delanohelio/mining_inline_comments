{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc0OTczMTYy", "number": 8572, "title": "Support new escape sequences introduced in JDK 14 (JEP 368)", "bodyText": "In JDK 14, two new escape sequences have been introduced by JEP 368: Text Blocks (Second Preview):\n\n\\s: space\n\\<line-terminator>: continuation (<line-terminator> can be '\\n', '\\r', \u2018\\r\\n\u2019)\n\nThese escape sequences are now supported by String.translateEscapes().\nFixes: #8563\nTesting:\nBUILD_LIST openjdk\nTARGET jdk_custom\nCUSTOM_TARGET test/jdk/java/lang/String/TranslateEscapes.java\nThis test is part of the jdk_lang target.", "createdAt": "2020-02-13T16:39:17Z", "url": "https://github.com/eclipse-openj9/openj9/pull/8572", "merged": true, "mergeCommit": {"oid": "c97ca850466762d0e473644303a0287eac59c773"}, "closed": true, "closedAt": "2020-02-14T04:08:51Z", "author": {"login": "sharon-wang"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcD94I7gFqTM1ODM4MTQwNg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcEQpS9AFqTM1ODk4OTM0Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4MzgxNDA2", "url": "https://github.com/eclipse-openj9/openj9/pull/8572#pullrequestreview-358381406", "createdAt": "2020-02-13T16:48:59Z", "commit": {"oid": "be5eca83feffb544854143c406428e859bb1acef"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxNjo0ODo1OVrOFpbceg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QxNjo1MzoxMFrOFpbmtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODk4NTU5NA==", "bodyText": "I am not sure if this \\r case is required as all newline character (\\r, \\n, \\r\\n) should be normalized to \\n during stripIndent() call before this method is called. (line 8441 in this file)", "url": "https://github.com/eclipse-openj9/openj9/pull/8572#discussion_r378985594", "createdAt": "2020-02-13T16:48:59Z", "author": {"login": "fengxue-IS"}, "path": "jcl/src/java.base/share/classes/java/lang/String.java", "diffHunk": "@@ -8521,6 +8524,14 @@ public String translateEscapes() {\n \t\t\t\t\t}\n \t\t\t\t\tbuilder.append((char)octal);\n \t\t\t\t\tbreak;\n+\t\t\t\tcase '\\r':", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be5eca83feffb544854143c406428e859bb1acef"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODk4ODIxMg==", "bodyText": "maybe add a comment for why ignoring \\n here?", "url": "https://github.com/eclipse-openj9/openj9/pull/8572#discussion_r378988212", "createdAt": "2020-02-13T16:53:10Z", "author": {"login": "fengxue-IS"}, "path": "jcl/src/java.base/share/classes/java/lang/String.java", "diffHunk": "@@ -8521,6 +8524,14 @@ public String translateEscapes() {\n \t\t\t\t\t}\n \t\t\t\t\tbuilder.append((char)octal);\n \t\t\t\t\tbreak;\n+\t\t\t\tcase '\\r':\n+\t\t\t\t\t/* Check if the next character is the newline character, i.e. case \"\\r\\n\" */\n+\t\t\t\t\tif (((index + 1) < strLength) && ('\\n' == charArray[index + 1])) {\n+\t\t\t\t\t\tindex++;\n+\t\t\t\t\t}\n+\t\t\t\t\tbreak;\n+\t\t\t\tcase '\\n':", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be5eca83feffb544854143c406428e859bb1acef"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bbbdfab11a3cab5780bfba235bd8ede3b772d0d7", "author": {"user": {"login": "sharon-wang", "name": "Sharon Wang"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/bbbdfab11a3cab5780bfba235bd8ede3b772d0d7", "committedDate": "2020-02-13T22:19:51Z", "message": "Support new escape sequences introduced in JDK 14 (JEP 368)\n\njava.lang.String.translateEscapes() now supports:\n`\\s`: space\n`\\<line-terminator>`: continuation\n\n<line-terminator> can be '\\n', '\\r', '\\r\\n'\n\nFor reference:\nhttps://openjdk.java.net/jeps/368#New-escape-sequences\nhttp://cr.openjdk.java.net/~iris/se/14/build/latest/api/java.base/java/lang/String.html#translateEscapes()\n\nSigned-off-by: Sharon Wang <sharon-wang-cpsc@outlook.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "be5eca83feffb544854143c406428e859bb1acef", "author": {"user": {"login": "sharon-wang", "name": "Sharon Wang"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/be5eca83feffb544854143c406428e859bb1acef", "committedDate": "2020-02-13T16:38:11Z", "message": "Support new escape sequences introduced in JDK 14 (JEP 368)\n\njava.lang.String.translateEscapes() now supports:\n`\\s`: space\n`\\<line-terminator>`: continuation\n\n<line-terminator> can be '\\n', '\\r', '\\r\\n'\n\nFor reference:\nhttps://openjdk.java.net/jeps/368#New-escape-sequences\nhttp://cr.openjdk.java.net/~iris/se/14/build/latest/api/java.base/java/lang/String.html#translateEscapes()\n\nSigned-off-by: Sharon Wang <sharon-wang-cpsc@outlook.com>"}, "afterCommit": {"oid": "bbbdfab11a3cab5780bfba235bd8ede3b772d0d7", "author": {"user": {"login": "sharon-wang", "name": "Sharon Wang"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/bbbdfab11a3cab5780bfba235bd8ede3b772d0d7", "committedDate": "2020-02-13T22:19:51Z", "message": "Support new escape sequences introduced in JDK 14 (JEP 368)\n\njava.lang.String.translateEscapes() now supports:\n`\\s`: space\n`\\<line-terminator>`: continuation\n\n<line-terminator> can be '\\n', '\\r', '\\r\\n'\n\nFor reference:\nhttps://openjdk.java.net/jeps/368#New-escape-sequences\nhttp://cr.openjdk.java.net/~iris/se/14/build/latest/api/java.base/java/lang/String.html#translateEscapes()\n\nSigned-off-by: Sharon Wang <sharon-wang-cpsc@outlook.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4NTk0NTM3", "url": "https://github.com/eclipse-openj9/openj9/pull/8572#pullrequestreview-358594537", "createdAt": "2020-02-13T22:21:28Z", "commit": {"oid": "bbbdfab11a3cab5780bfba235bd8ede3b772d0d7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QyMjoyMToyOFrOFplnsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QyMjoyMToyOFrOFplnsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTE1MjMwNw==", "bodyText": "@fengxue-IS this is the added comment to explain why we're ignoring the line terminators", "url": "https://github.com/eclipse-openj9/openj9/pull/8572#discussion_r379152307", "createdAt": "2020-02-13T22:21:28Z", "author": {"login": "sharon-wang"}, "path": "jcl/src/java.base/share/classes/java/lang/String.java", "diffHunk": "@@ -8521,6 +8524,19 @@ public String translateEscapes() {\n \t\t\t\t\t}\n \t\t\t\t\tbuilder.append((char)octal);\n \t\t\t\t\tbreak;\n+\t\t\t\t/**\n+\t\t\t\t * JEP 368: Text Blocks (Second Preview)\n+\t\t\t\t * '\\r', \"\\r\\n\" and '\\n' are ignored as per new continuation \\<line-terminator> escape sequence \n+\t\t\t\t * i.e. ignore line terminator and continue line\n+\t\t\t\t * */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bbbdfab11a3cab5780bfba235bd8ede3b772d0d7"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4NTk1MzE2", "url": "https://github.com/eclipse-openj9/openj9/pull/8572#pullrequestreview-358595316", "createdAt": "2020-02-13T22:22:57Z", "commit": {"oid": "bbbdfab11a3cab5780bfba235bd8ede3b772d0d7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4NzAyMjAw", "url": "https://github.com/eclipse-openj9/openj9/pull/8572#pullrequestreview-358702200", "createdAt": "2020-02-14T04:06:55Z", "commit": {"oid": "bbbdfab11a3cab5780bfba235bd8ede3b772d0d7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4OTg5MzQz", "url": "https://github.com/eclipse-openj9/openj9/pull/8572#pullrequestreview-358989343", "createdAt": "2020-02-14T14:45:22Z", "commit": {"oid": "bbbdfab11a3cab5780bfba235bd8ede3b772d0d7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxNDo0NToyMlrOFp43cA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQxNDo0NToyMlrOFp43cA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTQ2NzYzMg==", "bodyText": "Shouldn't this be guarded by /*[IF Java14]*/?", "url": "https://github.com/eclipse-openj9/openj9/pull/8572#discussion_r379467632", "createdAt": "2020-02-14T14:45:22Z", "author": {"login": "keithc-ca"}, "path": "jcl/src/java.base/share/classes/java/lang/String.java", "diffHunk": "@@ -8487,6 +8487,9 @@ public String translateEscapes() {\n \t\t\t\tcase 'r':\n \t\t\t\t\tbuilder.append('\\r');\n \t\t\t\t\tbreak;\n+\t\t\t\tcase 's':", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bbbdfab11a3cab5780bfba235bd8ede3b772d0d7"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 794, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}