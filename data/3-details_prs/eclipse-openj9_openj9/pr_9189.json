{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxMDgxNjg3", "number": 9189, "title": "Disable runtime assumption table on JITServer", "bodyText": "JITServer should not create any runtime assumptions, instead it\nshould buffer them and send them to the client. In order to catch\nall mistakes, it's better to disable RuntimeAssumptionTable on JITServer\nso any misuses will be caught by crashes.\nIssue: #8029\nSigned-off-by: Harry Yu harryyu1994@gmail.com", "createdAt": "2020-04-08T21:08:37Z", "url": "https://github.com/eclipse-openj9/openj9/pull/9189", "merged": true, "mergeCommit": {"oid": "a429b60edbbcc95b3eab0f0975550c8f6d63e983"}, "closed": true, "closedAt": "2020-04-14T16:40:19Z", "author": {"login": "harryyu1994"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVuy4XABqjMyMTU5MzQyNDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcXhH-TgFqTM5MjgwODY0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0e2baa78c4acfa0ded9b6de59c9e6c53f02bd478", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/0e2baa78c4acfa0ded9b6de59c9e6c53f02bd478", "committedDate": "2020-04-08T17:42:33Z", "message": "Disable runtime assumption table on JITServer\n\nJITServer should not create any runtime assumptions, instead it\nshould buffer them and send them to the client. In order to catch\nall mistakes, it's better to disable RuntimeAssumptionTable on JITServer\nso any misuses will be caught by crashes.\n\nIssue: #8029\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "fe2f9b282a1de2d3bd230d18e41d9fcd0900137a", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/fe2f9b282a1de2d3bd230d18e41d9fcd0900137a", "committedDate": "2020-04-08T21:29:27Z", "message": "Disable runtime assumption table on JITServer\n\nJITServer should not create any runtime assumptions, instead it\nshould buffer them and send them to the client. In order to catch\nall mistakes, it's better to disable RuntimeAssumptionTable on JITServer\nso any misuses will be caught by crashes.\n\nIssue: #8029\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fe2f9b282a1de2d3bd230d18e41d9fcd0900137a", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/fe2f9b282a1de2d3bd230d18e41d9fcd0900137a", "committedDate": "2020-04-08T21:29:27Z", "message": "Disable runtime assumption table on JITServer\n\nJITServer should not create any runtime assumptions, instead it\nshould buffer them and send them to the client. In order to catch\nall mistakes, it's better to disable RuntimeAssumptionTable on JITServer\nso any misuses will be caught by crashes.\n\nIssue: #8029\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "9d0508a3b1439496c5a73e2a3fd7b7993b970edd", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/9d0508a3b1439496c5a73e2a3fd7b7993b970edd", "committedDate": "2020-04-08T21:33:23Z", "message": "Disable runtime assumption table on JITServer\n\nJITServer should not create any runtime assumptions, instead it\nshould buffer them and send them to the client. In order to catch\nall mistakes, it's better to disable RuntimeAssumptionTable on JITServer\nso any misuses will be caught by crashes.\n\nIssue: #8029\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9d0508a3b1439496c5a73e2a3fd7b7993b970edd", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/9d0508a3b1439496c5a73e2a3fd7b7993b970edd", "committedDate": "2020-04-08T21:33:23Z", "message": "Disable runtime assumption table on JITServer\n\nJITServer should not create any runtime assumptions, instead it\nshould buffer them and send them to the client. In order to catch\nall mistakes, it's better to disable RuntimeAssumptionTable on JITServer\nso any misuses will be caught by crashes.\n\nIssue: #8029\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "e89e865520e4d4b2bcab40f762b166aca5c8a5a9", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e89e865520e4d4b2bcab40f762b166aca5c8a5a9", "committedDate": "2020-04-08T21:59:55Z", "message": "Disable runtime assumption table on JITServer\n\nJITServer should not create any runtime assumptions, instead it\nshould buffer them and send them to the client. In order to catch\nall mistakes, it's better to disable RuntimeAssumptionTable on JITServer\nso any misuses will be caught by crashes.\n\nIssue: #8029\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e89e865520e4d4b2bcab40f762b166aca5c8a5a9", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e89e865520e4d4b2bcab40f762b166aca5c8a5a9", "committedDate": "2020-04-08T21:59:55Z", "message": "Disable runtime assumption table on JITServer\n\nJITServer should not create any runtime assumptions, instead it\nshould buffer them and send them to the client. In order to catch\nall mistakes, it's better to disable RuntimeAssumptionTable on JITServer\nso any misuses will be caught by crashes.\n\nIssue: #8029\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "7d96f99431c5035cfac107b7ff9aecf3350adf17", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/7d96f99431c5035cfac107b7ff9aecf3350adf17", "committedDate": "2020-04-08T22:17:13Z", "message": "Disable runtime assumption table on JITServer\n\nJITServer should not create any runtime assumptions, instead it\nshould buffer them and send them to the client. In order to catch\nall mistakes, it's better to disable RuntimeAssumptionTable on JITServer\nso any misuses will be caught by crashes.\n\nIssue: #8029\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7d96f99431c5035cfac107b7ff9aecf3350adf17", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/7d96f99431c5035cfac107b7ff9aecf3350adf17", "committedDate": "2020-04-08T22:17:13Z", "message": "Disable runtime assumption table on JITServer\n\nJITServer should not create any runtime assumptions, instead it\nshould buffer them and send them to the client. In order to catch\nall mistakes, it's better to disable RuntimeAssumptionTable on JITServer\nso any misuses will be caught by crashes.\n\nIssue: #8029\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "67e71ba0f55d24e6efae710fae7ecbdd376f1428", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/67e71ba0f55d24e6efae710fae7ecbdd376f1428", "committedDate": "2020-04-08T22:23:53Z", "message": "Disable runtime assumption table on JITServer\n\nJITServer should not create any runtime assumptions, instead it\nshould buffer them and send them to the client. In order to catch\nall mistakes, it's better to disable RuntimeAssumptionTable on JITServer\nso any misuses will be caught by crashes.\n\nIssue: #8029\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "67e71ba0f55d24e6efae710fae7ecbdd376f1428", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/67e71ba0f55d24e6efae710fae7ecbdd376f1428", "committedDate": "2020-04-08T22:23:53Z", "message": "Disable runtime assumption table on JITServer\n\nJITServer should not create any runtime assumptions, instead it\nshould buffer them and send them to the client. In order to catch\nall mistakes, it's better to disable RuntimeAssumptionTable on JITServer\nso any misuses will be caught by crashes.\n\nIssue: #8029\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "6ba79f78b4f270b41810882976c9807c306ca999", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/6ba79f78b4f270b41810882976c9807c306ca999", "committedDate": "2020-04-08T22:48:23Z", "message": "Disable runtime assumption table on JITServer\n\nJITServer should not create any runtime assumptions, instead it\nshould buffer them and send them to the client. In order to catch\nall mistakes, it's better to disable RuntimeAssumptionTable on JITServer\nso any misuses will be caught by crashes.\n\nIssue: #8029\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwNzU2OTA2", "url": "https://github.com/eclipse-openj9/openj9/pull/9189#pullrequestreview-390756906", "createdAt": "2020-04-09T12:43:58Z", "commit": {"oid": "6ba79f78b4f270b41810882976c9807c306ca999"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxMjo0Mzo1OFrOGDXEBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQxMjo0NTozOFrOGDXHhg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE3Njc3Mg==", "bodyText": "If we take this path at the server something is wrong.\nThus, i would rather place an ASSERT_FATAL here.", "url": "https://github.com/eclipse-openj9/openj9/pull/9189#discussion_r406176772", "createdAt": "2020-04-09T12:43:58Z", "author": {"login": "mpirvu"}, "path": "runtime/compiler/control/HookedByTheJit.cpp", "diffHunk": "@@ -3146,8 +3146,13 @@ void jitIllegalFinalFieldModification(J9VMThread *currentThread, J9Class *fieldC\n    reportHook(currentThread, \"jitIllegalFinalFieldModification\", \"class %p %.*s\", fieldClass, length, className);\n \n    TR::CompilationInfo * compInfo = TR::CompilationInfo::get(jitConfig);\n+\n    TR_RuntimeAssumptionTable * rat = compInfo->getPersistentInfo()->getRuntimeAssumptionTable();\n-   if (rat)\n+   if (rat\n+#if defined(J9VM_OPT_JITSERVER)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ba79f78b4f270b41810882976c9807c306ca999"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE3NzY3MA==", "bodyText": "Why is this code removed. The idea is that, we don't want to update the CHTable at the server because it is not used for compilation anyway.", "url": "https://github.com/eclipse-openj9/openj9/pull/9189#discussion_r406177670", "createdAt": "2020-04-09T12:45:38Z", "author": {"login": "mpirvu"}, "path": "runtime/compiler/control/HookedByTheJit.cpp", "diffHunk": "@@ -3550,9 +3555,6 @@ static bool updateCHTable(J9VMThread * vmThread, J9Class  * cl)\n    TR_PersistentCHTable * table = 0;\n    if (TR::Options::getCmdLineOptions()->allowRecompilation()\n       && !TR::Options::getCmdLineOptions()->getOption(TR_DisableCHOpts)\n-#if defined(J9VM_OPT_JITSERVER)\n-      && compInfo->getPersistentInfo()->getRemoteCompilationMode() != JITServer::SERVER", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6ba79f78b4f270b41810882976c9807c306ca999"}, "originalPosition": 20}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6ba79f78b4f270b41810882976c9807c306ca999", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/6ba79f78b4f270b41810882976c9807c306ca999", "committedDate": "2020-04-08T22:48:23Z", "message": "Disable runtime assumption table on JITServer\n\nJITServer should not create any runtime assumptions, instead it\nshould buffer them and send them to the client. In order to catch\nall mistakes, it's better to disable RuntimeAssumptionTable on JITServer\nso any misuses will be caught by crashes.\n\nIssue: #8029\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "6276941c3ff42a22b68f64e8216d810819ef227c", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/6276941c3ff42a22b68f64e8216d810819ef227c", "committedDate": "2020-04-13T18:43:12Z", "message": "Disable runtime assumption table on JITServer\n\nJITServer should not create any runtime assumptions, instead it\nshould buffer them and send them to the client. In order to catch\nall mistakes, it's better to disable RuntimeAssumptionTable on JITServer\nso any misuses will be caught by crashes.\n\nIssue: #8029\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyMzk5NTI5", "url": "https://github.com/eclipse-openj9/openj9/pull/9189#pullrequestreview-392399529", "createdAt": "2020-04-13T20:03:23Z", "commit": {"oid": "6276941c3ff42a22b68f64e8216d810819ef227c"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QyMDowMzoyM1rOGEzTrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QyMDowNTowNlrOGEzW9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY4ODExMA==", "bodyText": "compInfo is not defined at this point", "url": "https://github.com/eclipse-openj9/openj9/pull/9189#discussion_r407688110", "createdAt": "2020-04-13T20:03:23Z", "author": {"login": "mpirvu"}, "path": "runtime/compiler/control/HookedByTheJit.cpp", "diffHunk": "@@ -3136,6 +3136,15 @@ void jitMethodBreakpointed(J9VMThread * vmThread, J9Method *j9method)\n  */\n void jitIllegalFinalFieldModification(J9VMThread *currentThread, J9Class *fieldClass)\n    {\n+#if defined(J9VM_OPT_JITSERVER)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6276941c3ff42a22b68f64e8216d810819ef227c"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY4ODk0OQ==", "bodyText": "To be sure let's add an ASSERT_FATAL", "url": "https://github.com/eclipse-openj9/openj9/pull/9189#discussion_r407688949", "createdAt": "2020-04-13T20:05:06Z", "author": {"login": "mpirvu"}, "path": "runtime/compiler/control/HookedByTheJit.cpp", "diffHunk": "@@ -3550,9 +3555,6 @@ static bool updateCHTable(J9VMThread * vmThread, J9Class  * cl)\n    TR_PersistentCHTable * table = 0;\n    if (TR::Options::getCmdLineOptions()->allowRecompilation()\n       && !TR::Options::getCmdLineOptions()->getOption(TR_DisableCHOpts)\n-#if defined(J9VM_OPT_JITSERVER)\n-      && compInfo->getPersistentInfo()->getRemoteCompilationMode() != JITServer::SERVER", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE3NzY3MA=="}, "originalCommit": {"oid": "6ba79f78b4f270b41810882976c9807c306ca999"}, "originalPosition": 20}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6276941c3ff42a22b68f64e8216d810819ef227c", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/6276941c3ff42a22b68f64e8216d810819ef227c", "committedDate": "2020-04-13T18:43:12Z", "message": "Disable runtime assumption table on JITServer\n\nJITServer should not create any runtime assumptions, instead it\nshould buffer them and send them to the client. In order to catch\nall mistakes, it's better to disable RuntimeAssumptionTable on JITServer\nso any misuses will be caught by crashes.\n\nIssue: #8029\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "ed07d6dacf76c41fd343c2a6619bb9c742bff70c", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/ed07d6dacf76c41fd343c2a6619bb9c742bff70c", "committedDate": "2020-04-13T20:15:15Z", "message": "Disable runtime assumption table on JITServer\n\nJITServer should not create any runtime assumptions, instead it\nshould buffer them and send them to the client. In order to catch\nall mistakes, it's better to disable RuntimeAssumptionTable on JITServer\nso any misuses will be caught by crashes.\n\nIssue: #8029\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ed07d6dacf76c41fd343c2a6619bb9c742bff70c", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/ed07d6dacf76c41fd343c2a6619bb9c742bff70c", "committedDate": "2020-04-13T20:15:15Z", "message": "Disable runtime assumption table on JITServer\n\nJITServer should not create any runtime assumptions, instead it\nshould buffer them and send them to the client. In order to catch\nall mistakes, it's better to disable RuntimeAssumptionTable on JITServer\nso any misuses will be caught by crashes.\n\nIssue: #8029\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "74a30fb8d6e6ff8d47ba21cb2d2b65f1ec36ec81", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/74a30fb8d6e6ff8d47ba21cb2d2b65f1ec36ec81", "committedDate": "2020-04-13T21:32:53Z", "message": "Disable runtime assumption table on JITServer\n\nJITServer should not create any runtime assumptions, instead it\nshould buffer them and send them to the client. In order to catch\nall mistakes, it's better to disable RuntimeAssumptionTable on JITServer\nso any misuses will be caught by crashes.\n\nIssue: #8029\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f08ddfa7d3daa9b0786ddc569bdf0333b0edc0f", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/1f08ddfa7d3daa9b0786ddc569bdf0333b0edc0f", "committedDate": "2020-04-14T05:34:37Z", "message": "Disable runtime assumption table on JITServer\n\nJITServer should not create any runtime assumptions, instead it\nshould buffer them and send them to the client. In order to catch\nall mistakes, it's better to disable RuntimeAssumptionTable on JITServer\nso any misuses will be caught by crashes.\n\nIssue: #8029\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "74a30fb8d6e6ff8d47ba21cb2d2b65f1ec36ec81", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/74a30fb8d6e6ff8d47ba21cb2d2b65f1ec36ec81", "committedDate": "2020-04-13T21:32:53Z", "message": "Disable runtime assumption table on JITServer\n\nJITServer should not create any runtime assumptions, instead it\nshould buffer them and send them to the client. In order to catch\nall mistakes, it's better to disable RuntimeAssumptionTable on JITServer\nso any misuses will be caught by crashes.\n\nIssue: #8029\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "1f08ddfa7d3daa9b0786ddc569bdf0333b0edc0f", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/1f08ddfa7d3daa9b0786ddc569bdf0333b0edc0f", "committedDate": "2020-04-14T05:34:37Z", "message": "Disable runtime assumption table on JITServer\n\nJITServer should not create any runtime assumptions, instead it\nshould buffer them and send them to the client. In order to catch\nall mistakes, it's better to disable RuntimeAssumptionTable on JITServer\nso any misuses will be caught by crashes.\n\nIssue: #8029\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyODA4NjQ0", "url": "https://github.com/eclipse-openj9/openj9/pull/9189#pullrequestreview-392808644", "createdAt": "2020-04-14T10:41:55Z", "commit": {"oid": "1f08ddfa7d3daa9b0786ddc569bdf0333b0edc0f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1232, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}