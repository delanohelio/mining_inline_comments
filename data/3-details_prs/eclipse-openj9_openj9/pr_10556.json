{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgzMjU5Mjc5", "number": 10556, "title": "Unsafe copySwapMemory: no memory addresses overlap for different objects", "bodyText": "Fixed memOverlapIsNone to return JNI_TRUE for different objects assuming no memory addresses overlap.\nNote: this PR passes the testcase in #10150, and also tested in a personal build (Java 8/11/15 xa64 sanity.functional).\ncloses: #10150\nSigned-off-by: Jason Feng fengj@ca.ibm.com", "createdAt": "2020-09-10T01:26:43Z", "url": "https://github.com/eclipse-openj9/openj9/pull/10556", "merged": true, "mergeCommit": {"oid": "adda8032110a449a8c96bb1901c0996900555697"}, "closed": true, "closedAt": "2020-09-10T17:08:44Z", "author": {"login": "JasonFengJ9"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHSAyBgH2gAyNDgzMjU5Mjc5OjQwOWY0MzA4ZGM4ZDg4MDU1YTRlYzIwYTA0MDA1ZTEwNTU5NWVkYTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHgpaXAFqTQ4NTkxNzczMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "409f4308dc8d88055a4ec20a04005e105595eda0", "author": {"user": {"login": "JasonFengJ9", "name": "Jason Feng"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/409f4308dc8d88055a4ec20a04005e105595eda0", "committedDate": "2020-09-09T20:13:51Z", "message": "Unsafe copySwapMemory: no memory addresses overlap for different objects\n\nFixed memOverlapIsNone to return JNI_TRUE for different objects assuming\nno memory addresses overlap.\n\nSigned-off-by: Jason Feng <fengj@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1OTE3NzMz", "url": "https://github.com/eclipse-openj9/openj9/pull/10556#pullrequestreview-485917733", "createdAt": "2020-09-10T13:16:42Z", "commit": {"oid": "409f4308dc8d88055a4ec20a04005e105595eda0"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMzoxNjo0MlrOHPzD1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxMzoxNjo0MlrOHPzD1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjMyNzI1Mg==", "bodyText": "This is a conservative approach in that it leaves out the case where the objects are the same but the copied regions don't overlap.\nI'm ok with this approach for JDK15 but we might want to dig further into whether it should be made less conservative.", "url": "https://github.com/eclipse-openj9/openj9/pull/10556#discussion_r486327252", "createdAt": "2020-09-10T13:16:42Z", "author": {"login": "DanHeidinga"}, "path": "runtime/jcl/common/sun_misc_Unsafe.cpp", "diffHunk": "@@ -1129,7 +1129,9 @@ Java_jdk_internal_misc_Unsafe_registerNatives(JNIEnv *env, jclass clazz)\n jboolean\n  memOverlapIsNone(j9object_t sourceObject, UDATA sourceOffset, j9object_t destObject, UDATA destOffset, UDATA actualCopySize) {\n \tjboolean result = JNI_FALSE;\n-\tif ((sourceObject == NULL) && (destObject == NULL)) {\n+\tif (sourceObject != destObject) {\n+\t\tresult = JNI_TRUE;\n+\t} else if ((sourceObject == NULL) && (destObject == NULL)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "409f4308dc8d88055a4ec20a04005e105595eda0"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4974, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}