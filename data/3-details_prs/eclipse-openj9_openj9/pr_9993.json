{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM4ODQ4MjEw", "number": 9993, "title": "Enable portable AOT on x86", "bodyText": "Added \"-XX:+PortableSharedCache\" and \"-XX:-PortableSharedCache\"\nAdded container detection. By default we enable portableAOT in containers.\n\"-XX:-PortableSharedCache\" will disable portableAOT in containers as well.\nThe set of cpu features employed by the SCC is displayed with \"-Xshareclasses:printStats\"\nAdded tests for \"-XX:+PortableSharedCache\" and \"-XX:-PortableSharedCache\" as well as printStats processor feature output\n\ndepends on: eclipse/omr#5403\nIssue: #7966\nDoc issue eclipse-openj9/openj9-docs#582\nSigned-off-by: Harry Yu harryyu1994@gmail.com", "createdAt": "2020-06-23T22:08:11Z", "url": "https://github.com/eclipse-openj9/openj9/pull/9993", "merged": true, "mergeCommit": {"oid": "dc7cbe4bddb2aa5b513b1c088dbb6aded66d4f4a"}, "closed": true, "closedAt": "2020-07-29T20:04:21Z", "author": {"login": "harryyu1994"}, "timelineItems": {"totalCount": 78, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1NzUIgBqjM1NDk0OTQ1MTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5vwXgABqjM2MDA0MDk4Nzc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0d839af4fab24d7ae4ab0b26dc682b93b3931e45", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/0d839af4fab24d7ae4ab0b26dc682b93b3931e45", "committedDate": "2020-07-14T22:11:44Z", "message": "change to portable shared cache"}, "afterCommit": {"oid": "7499cdd152eb02fa39cb1393882a0d1b8b440f92", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/7499cdd152eb02fa39cb1393882a0d1b8b440f92", "committedDate": "2020-07-15T17:06:09Z", "message": "change to portable shared cache"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7499cdd152eb02fa39cb1393882a0d1b8b440f92", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/7499cdd152eb02fa39cb1393882a0d1b8b440f92", "committedDate": "2020-07-15T17:06:09Z", "message": "change to portable shared cache"}, "afterCommit": {"oid": "b002af2116515ffddea247b3376795c48ba33d3d", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/b002af2116515ffddea247b3376795c48ba33d3d", "committedDate": "2020-07-16T15:45:53Z", "message": "change to portable shared cache"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b002af2116515ffddea247b3376795c48ba33d3d", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/b002af2116515ffddea247b3376795c48ba33d3d", "committedDate": "2020-07-16T15:45:53Z", "message": "change to portable shared cache"}, "afterCommit": {"oid": "d84df1af9a7f3c18c3e65a59c9b7150cd616c429", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/d84df1af9a7f3c18c3e65a59c9b7150cd616c429", "committedDate": "2020-07-16T16:09:05Z", "message": "change to portable shared cache"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d84df1af9a7f3c18c3e65a59c9b7150cd616c429", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/d84df1af9a7f3c18c3e65a59c9b7150cd616c429", "committedDate": "2020-07-16T16:09:05Z", "message": "change to portable shared cache"}, "afterCommit": {"oid": "436bc4abd7b861b614197b2d13e993b6968a9976", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/436bc4abd7b861b614197b2d13e993b6968a9976", "committedDate": "2020-07-16T18:57:16Z", "message": "change to portable shared cache"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2671e5650dc78be15f5132b5a73d6400316ba071", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/2671e5650dc78be15f5132b5a73d6400316ba071", "committedDate": "2020-07-16T19:39:05Z", "message": "fix"}, "afterCommit": {"oid": "73cc9b5d1c0d2d4f9a07dfcf6efef78417968316", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/73cc9b5d1c0d2d4f9a07dfcf6efef78417968316", "committedDate": "2020-07-16T19:54:17Z", "message": "fix"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d15e9718f574c50feb8c1ff08f2eedffa9aed101", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/d15e9718f574c50feb8c1ff08f2eedffa9aed101", "committedDate": "2020-07-18T02:14:13Z", "message": "fixes"}, "afterCommit": {"oid": "c98103a3636171a8b79c8d2373daa958494b7b00", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c98103a3636171a8b79c8d2373daa958494b7b00", "committedDate": "2020-07-18T02:35:11Z", "message": "Enable portable AOT on x86\n\n- Added \"-XX:+PortableSharedCache\" and \"-XX:-PortableSharedCache\"\n- Added container detection. By default we enable portableAOT in containers.\n- \"-XX:-PortableSharedCache\" will disable portableAOT in containers as well.\n- The set of cpu features employed by the SCC can be displayed with \"-Xshareclasses:printStats\"\n\nIssue: #7966\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c98103a3636171a8b79c8d2373daa958494b7b00", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c98103a3636171a8b79c8d2373daa958494b7b00", "committedDate": "2020-07-18T02:35:11Z", "message": "Enable portable AOT on x86\n\n- Added \"-XX:+PortableSharedCache\" and \"-XX:-PortableSharedCache\"\n- Added container detection. By default we enable portableAOT in containers.\n- \"-XX:-PortableSharedCache\" will disable portableAOT in containers as well.\n- The set of cpu features employed by the SCC can be displayed with \"-Xshareclasses:printStats\"\n\nIssue: #7966\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "9d3e037ee575562f607c649f3b3410f3366c012f", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/9d3e037ee575562f607c649f3b3410f3366c012f", "committedDate": "2020-07-18T02:41:28Z", "message": "Enable portable AOT on x86\n\n- Added \"-XX:+PortableSharedCache\" and \"-XX:-PortableSharedCache\"\n- Added container detection. By default we enable portableAOT in containers.\n- \"-XX:-PortableSharedCache\" will disable portableAOT in containers as well.\n- The set of cpu features employed by the SCC can be displayed with \"-Xshareclasses:printStats\"\n\nIssue: #7966\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9c28033d0f3be05d069e89f9e81604c93c985b39", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/9c28033d0f3be05d069e89f9e81604c93c985b39", "committedDate": "2020-07-20T19:52:22Z", "message": "sss"}, "afterCommit": {"oid": "dda8822fe54371b63eeb359d86fe5d183c2eae7a", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/dda8822fe54371b63eeb359d86fe5d183c2eae7a", "committedDate": "2020-07-20T20:05:22Z", "message": "Reformat the processor feature string\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyODMxMjg5", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#pullrequestreview-452831289", "createdAt": "2020-07-21T21:09:58Z", "commit": {"oid": "dda8822fe54371b63eeb359d86fe5d183c2eae7a"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQyMTowOTo1OFrOG1J4PQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQyMToxNzoxMVrOG1KGkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODM4OTU2NQ==", "bodyText": "I guess line 5194 to line 5198 can all be moved into printAOTHeader().", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#discussion_r458389565", "createdAt": "2020-07-21T21:09:58Z", "author": {"login": "hangshao0"}, "path": "runtime/shared_common/CacheMap.cpp", "diffHunk": "@@ -5191,6 +5191,14 @@ SH_CacheMap::printCacheStatsTopLayerStatsHelper(J9VMThread* currentThread, UDATA\n \t\tCACHEMAP_PRINT1(J9NLS_DO_NOT_PRINT_MESSAGE_TAG, J9NLS_SHRC_CM_PRINTSTATS_FEATURE, \"default\");\n \t}\n \n+\tj9tty_printf(_portlib, \"\\t\");\n+\tJ9SharedDataDescriptor firstDescriptor;\n+\tfirstDescriptor.address = NULL;\n+\tfindSharedData(currentThread, \"J9AOTHeader\", sizeof(\"J9AOTHeader\") - 1, J9SHR_DATA_TYPE_AOTHEADER, FALSE, &firstDescriptor, NULL);\n+\tchar buff[500];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dda8822fe54371b63eeb359d86fe5d183c2eae7a"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODM5MDI0NA==", "bodyText": "You may want to do a null check on currentThread->javaVM->jitConfig first.", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#discussion_r458390244", "createdAt": "2020-07-21T21:11:18Z", "author": {"login": "hangshao0"}, "path": "runtime/shared_common/CacheMap.cpp", "diffHunk": "@@ -5191,6 +5191,14 @@ SH_CacheMap::printCacheStatsTopLayerStatsHelper(J9VMThread* currentThread, UDATA\n \t\tCACHEMAP_PRINT1(J9NLS_DO_NOT_PRINT_MESSAGE_TAG, J9NLS_SHRC_CM_PRINTSTATS_FEATURE, \"default\");\n \t}\n \n+\tj9tty_printf(_portlib, \"\\t\");\n+\tJ9SharedDataDescriptor firstDescriptor;\n+\tfirstDescriptor.address = NULL;\n+\tfindSharedData(currentThread, \"J9AOTHeader\", sizeof(\"J9AOTHeader\") - 1, J9SHR_DATA_TYPE_AOTHEADER, FALSE, &firstDescriptor, NULL);\n+\tchar buff[500];\n+\tcurrentThread->javaVM->jitConfig->printAOTHeader(firstDescriptor.address, buff, 500);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dda8822fe54371b63eeb359d86fe5d183c2eae7a"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODM5MzIzNQ==", "bodyText": "Is the JIT code that checks sharedCachePortable inside #if defined(J9X86) ? If not, you may want to put these 2 FIND_AND_CONSUME_ARG calls inside #if defined(J9X86)", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#discussion_r458393235", "createdAt": "2020-07-21T21:17:11Z", "author": {"login": "hangshao0"}, "path": "runtime/shared/shrclssup.c", "diffHunk": "@@ -141,6 +141,23 @@ IDATA J9VMDllMain(J9JavaVM* vm, IDATA stage, void* reserved)\n \t\t\t\t\truntimeFlags |= J9SHR_RUNTIMEFLAG_DISABLE_BCI;\n \t\t\t\t}\n \n+\t\t\t\t/* Check for -XX:+PortableSharedCache and -XX:-PortableSharedCache; whichever comes later wins.\n+\t\t\t\t * These options should be checked before parseArgs() to allow -Xshareclasses:portable to override this option.\n+\t\t\t\t * \n+\t\t\t\t * Note: Please also change the function checkArgsConsumed() in runtime/vm/jvminit.c when adding new options,\n+\t\t\t\t * in order to quietly consume the options if it is used without -Xshareclasses\n+\t\t\t\t */\n+\t\t\t\targIndex1 = FIND_AND_CONSUME_ARG(EXACT_MATCH, VMOPT_XXPORTABLESHAREDCACHE, NULL);\n+\t\t\t\targIndex2 = FIND_AND_CONSUME_ARG(EXACT_MATCH, VMOPT_XXNOPORTABLESHAREDCACHE, NULL);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dda8822fe54371b63eeb359d86fe5d183c2eae7a"}, "originalPosition": 18}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dda8822fe54371b63eeb359d86fe5d183c2eae7a", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/dda8822fe54371b63eeb359d86fe5d183c2eae7a", "committedDate": "2020-07-20T20:05:22Z", "message": "Reformat the processor feature string\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "ee215ef29e30316f7c5b95cc2d8ff819d3d4cf81", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/ee215ef29e30316f7c5b95cc2d8ff819d3d4cf81", "committedDate": "2020-07-21T21:51:17Z", "message": "Reformat the processor feature string\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ee215ef29e30316f7c5b95cc2d8ff819d3d4cf81", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/ee215ef29e30316f7c5b95cc2d8ff819d3d4cf81", "committedDate": "2020-07-21T21:51:17Z", "message": "Reformat the processor feature string\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "3a112d3b7e5f56c58532e5f1861c4ab4043db851", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/3a112d3b7e5f56c58532e5f1861c4ab4043db851", "committedDate": "2020-07-21T21:54:54Z", "message": "Reformat the processor feature string\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzNDE2MjA1", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#pullrequestreview-453416205", "createdAt": "2020-07-22T15:11:41Z", "commit": {"oid": "3a112d3b7e5f56c58532e5f1861c4ab4043db851"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNToxMTo0MVrOG1nDcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNToxMTo0MVrOG1nDcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg2NzU3MQ==", "bodyText": "Please add /* defined(J9X86) */ after endif.", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#discussion_r458867571", "createdAt": "2020-07-22T15:11:41Z", "author": {"login": "hangshao0"}, "path": "runtime/shared/shrclssup.c", "diffHunk": "@@ -141,6 +141,25 @@ IDATA J9VMDllMain(J9JavaVM* vm, IDATA stage, void* reserved)\n \t\t\t\t\truntimeFlags |= J9SHR_RUNTIMEFLAG_DISABLE_BCI;\n \t\t\t\t}\n \n+#if defined(J9X86)\n+\t\t\t\t/* Check for -XX:+PortableSharedCache and -XX:-PortableSharedCache; whichever comes later wins.\n+\t\t\t\t * These options should be checked before parseArgs() to allow -Xshareclasses:portable to override this option.\n+\t\t\t\t * \n+\t\t\t\t * Note: Please also change the function checkArgsConsumed() in runtime/vm/jvminit.c when adding new options,\n+\t\t\t\t * in order to quietly consume the options if it is used without -Xshareclasses\n+\t\t\t\t */\n+\t\t\t\targIndex1 = FIND_AND_CONSUME_ARG(EXACT_MATCH, VMOPT_XXPORTABLESHAREDCACHE, NULL);\n+\t\t\t\targIndex2 = FIND_AND_CONSUME_ARG(EXACT_MATCH, VMOPT_XXNOPORTABLESHAREDCACHE, NULL);\n+\t\t\t\tif (argIndex2 > argIndex1) {\n+\t\t\t\t\tvm->sharedCacheAPI->sharedCachePortable = FALSE;\n+\t\t\t\t} else if (argIndex1 > argIndex2) {\n+\t\t\t\t\tvm->sharedCacheAPI->sharedCachePortable = TRUE;\n+\t\t\t\t} else {\n+\t\t\t\t\tOMRPORT_ACCESS_FROM_J9PORT(vm->portLibrary);\n+\t\t\t\t\tvm->sharedCacheAPI->sharedCachePortable = omrsysinfo_is_running_in_container();\n+\t\t\t\t}\n+#endif", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a112d3b7e5f56c58532e5f1861c4ab4043db851"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzNDE4NDYw", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#pullrequestreview-453418460", "createdAt": "2020-07-22T15:13:57Z", "commit": {"oid": "3a112d3b7e5f56c58532e5f1861c4ab4043db851"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNToxMzo1OFrOG1nKCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMlQxNToxMzo1OFrOG1nKCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg2OTI1Ng==", "bodyText": "I see there are only blank line and copy right date change for this file. Please remove this file from this PR.", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#discussion_r458869256", "createdAt": "2020-07-22T15:13:58Z", "author": {"login": "hangshao0"}, "path": "runtime/shared_common/ByteDataManagerImpl.cpp", "diffHunk": "@@ -354,7 +354,6 @@ SH_ByteDataManagerImpl::find(J9VMThread* currentThread, const char* key, UDATA k\n \t}\t\n \n \tTrc_SHR_BDMI_find_Exit(currentThread, resultCntr);\n-\t\t", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a112d3b7e5f56c58532e5f1861c4ab4043db851"}, "originalPosition": 11}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3a112d3b7e5f56c58532e5f1861c4ab4043db851", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/3a112d3b7e5f56c58532e5f1861c4ab4043db851", "committedDate": "2020-07-21T21:54:54Z", "message": "Reformat the processor feature string\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "2217a6411b91c67f31c0c75f4cc48d2d982d8f61", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/2217a6411b91c67f31c0c75f4cc48d2d982d8f61", "committedDate": "2020-07-22T16:48:02Z", "message": "Reformat the processor feature string\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2217a6411b91c67f31c0c75f4cc48d2d982d8f61", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/2217a6411b91c67f31c0c75f4cc48d2d982d8f61", "committedDate": "2020-07-22T16:48:02Z", "message": "Reformat the processor feature string\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "875f6abf47455dcb67ea778177bfd28ccdb154e2", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/875f6abf47455dcb67ea778177bfd28ccdb154e2", "committedDate": "2020-07-22T16:53:09Z", "message": "Reformat the processor feature string\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "875f6abf47455dcb67ea778177bfd28ccdb154e2", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/875f6abf47455dcb67ea778177bfd28ccdb154e2", "committedDate": "2020-07-22T16:53:09Z", "message": "Reformat the processor feature string\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "b08d632bf8c7ac3e240ad7ddfbddc666b4d16786", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/b08d632bf8c7ac3e240ad7ddfbddc666b4d16786", "committedDate": "2020-07-22T16:54:27Z", "message": "Reformat the processor feature string\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b08d632bf8c7ac3e240ad7ddfbddc666b4d16786", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/b08d632bf8c7ac3e240ad7ddfbddc666b4d16786", "committedDate": "2020-07-22T16:54:27Z", "message": "Reformat the processor feature string\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "538c5cd76f3e98d787d44cc95477f038ed284b1f", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/538c5cd76f3e98d787d44cc95477f038ed284b1f", "committedDate": "2020-07-22T18:15:47Z", "message": "Enable portable AOT on x86\n\n- Added \"-XX:+PortableSharedCache\" and \"-XX:-PortableSharedCache\"\n- Added container detection. By default we enable portableAOT in containers.\n- \"-XX:-PortableSharedCache\" will disable portableAOT in containers as well.\n- The set of cpu features employed by the SCC can be displayed with \"-Xshareclasses:printStats\"\n\nIssue: #7966\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "538c5cd76f3e98d787d44cc95477f038ed284b1f", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/538c5cd76f3e98d787d44cc95477f038ed284b1f", "committedDate": "2020-07-22T18:15:47Z", "message": "Enable portable AOT on x86\n\n- Added \"-XX:+PortableSharedCache\" and \"-XX:-PortableSharedCache\"\n- Added container detection. By default we enable portableAOT in containers.\n- \"-XX:-PortableSharedCache\" will disable portableAOT in containers as well.\n- The set of cpu features employed by the SCC can be displayed with \"-Xshareclasses:printStats\"\n\nIssue: #7966\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "469ab7c1e89ebdd9dba49cb0e4db7e1824e1215c", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/469ab7c1e89ebdd9dba49cb0e4db7e1824e1215c", "committedDate": "2020-07-22T18:17:50Z", "message": "Enable portable AOT on x86\n\n- Added \"-XX:+PortableSharedCache\" and \"-XX:-PortableSharedCache\"\n- Added container detection. By default we enable portableAOT in containers.\n- \"-XX:-PortableSharedCache\" will disable portableAOT in containers as well.\n- The set of cpu features employed by the SCC can be displayed with \"-Xshareclasses:printStats\"\n\nIssue: #7966\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzNjg5NjM4", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#pullrequestreview-453689638", "createdAt": "2020-07-22T21:13:29Z", "commit": {"oid": "469ab7c1e89ebdd9dba49cb0e4db7e1824e1215c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0NDAzNDkw", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#pullrequestreview-454403490", "createdAt": "2020-07-23T18:45:09Z", "commit": {"oid": "469ab7c1e89ebdd9dba49cb0e4db7e1824e1215c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxODo0NTowOVrOG2XJBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxODo0NTowOVrOG2XJBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY1NTQyOQ==", "bodyText": "Is this going to work on platforms other than X86?", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#discussion_r459655429", "createdAt": "2020-07-23T18:45:09Z", "author": {"login": "pshipton"}, "path": "runtime/shared_common/CacheMap.cpp", "diffHunk": "@@ -5191,6 +5191,16 @@ SH_CacheMap::printCacheStatsTopLayerStatsHelper(J9VMThread* currentThread, UDATA\n \t\tCACHEMAP_PRINT1(J9NLS_DO_NOT_PRINT_MESSAGE_TAG, J9NLS_SHRC_CM_PRINTSTATS_FEATURE, \"default\");\n \t}\n \n+\tif (currentThread->javaVM->jitConfig) {\n+\t\tj9tty_printf(_portlib, \"\\t\");\n+\t\tJ9SharedDataDescriptor firstDescriptor;\n+\t\tfirstDescriptor.address = NULL;\n+\t\tfindSharedData(currentThread, \"J9AOTHeader\", sizeof(\"J9AOTHeader\") - 1, J9SHR_DATA_TYPE_AOTHEADER, FALSE, &firstDescriptor, NULL);\n+\t\tchar processorFeatures[500];\n+\t\tcurrentThread->javaVM->jitConfig->printAOTHeader(firstDescriptor.address, processorFeatures, 500);\n+\t\tCACHEMAP_PRINT1(J9NLS_DO_NOT_PRINT_MESSAGE_TAG, J9NLS_SHRC_CM_PRINTSTATS_PROCESSOR_FEATURES, processorFeatures);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "469ab7c1e89ebdd9dba49cb0e4db7e1824e1215c"}, "originalPosition": 20}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "469ab7c1e89ebdd9dba49cb0e4db7e1824e1215c", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/469ab7c1e89ebdd9dba49cb0e4db7e1824e1215c", "committedDate": "2020-07-22T18:17:50Z", "message": "Enable portable AOT on x86\n\n- Added \"-XX:+PortableSharedCache\" and \"-XX:-PortableSharedCache\"\n- Added container detection. By default we enable portableAOT in containers.\n- \"-XX:-PortableSharedCache\" will disable portableAOT in containers as well.\n- The set of cpu features employed by the SCC can be displayed with \"-Xshareclasses:printStats\"\n\nIssue: #7966\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "e3837db8895449801aa87fee1bde5cbb9d7ae36f", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e3837db8895449801aa87fee1bde5cbb9d7ae36f", "committedDate": "2020-07-23T19:02:39Z", "message": "Enable portable AOT on x86\n\n- Added \"-XX:+PortableSharedCache\" and \"-XX:-PortableSharedCache\"\n- Added container detection. By default we enable portableAOT in containers.\n- \"-XX:-PortableSharedCache\" will disable portableAOT in containers as well.\n- The set of cpu features employed by the SCC can be displayed with \"-Xshareclasses:printStats\"\n\nIssue: #7966\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0NDQ3MjE1", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#pullrequestreview-454447215", "createdAt": "2020-07-23T19:51:05Z", "commit": {"oid": "e3837db8895449801aa87fee1bde5cbb9d7ae36f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxOTo1MTowNVrOG2ZPgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QyMDowMzoxM1rOG2ZoGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY4OTg1OQ==", "bodyText": "nitpick, keep this next to PORT_ACCESS_FROM_PORT", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#discussion_r459689859", "createdAt": "2020-07-23T19:51:05Z", "author": {"login": "dsouzai"}, "path": "runtime/compiler/runtime/RelocationRuntime.cpp", "diffHunk": "@@ -1404,3 +1404,44 @@ TR_JITServerRelocationRuntime::copyDataToCodeCache(const void *startAddress, siz\n    return coldCodeStart;\n    }\n #endif /* defined(J9VM_OPT_JITSERVER) */\n+\n+void\n+printAOTHeader(const void* aotHeaderAddress, char * buff, size_t buffSize)\n+   {\n+   if (!aotHeaderAddress)\n+      {\n+      strncat(buff, \"null\", buffSize);\n+      return;\n+      }\n+\n+   PORT_ACCESS_FROM_PORT(TR::Compiler->portLib);\n+   TR_AOTHeader * hdrInCache = (TR_AOTHeader *)aotHeaderAddress;\n+\n+   OMRProcessorDesc processorDescription = hdrInCache->processorDescription;\n+   OMRPORT_ACCESS_FROM_OMRPORT(TR::Compiler->omrPortLib);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3837db8895449801aa87fee1bde5cbb9d7ae36f"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY5NjE1NQ==", "bodyText": "I think you should keep track of the return value of strncat so that you don't overrun buff.", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#discussion_r459696155", "createdAt": "2020-07-23T20:03:13Z", "author": {"login": "dsouzai"}, "path": "runtime/compiler/runtime/RelocationRuntime.cpp", "diffHunk": "@@ -1404,3 +1404,44 @@ TR_JITServerRelocationRuntime::copyDataToCodeCache(const void *startAddress, siz\n    return coldCodeStart;\n    }\n #endif /* defined(J9VM_OPT_JITSERVER) */\n+\n+void\n+printAOTHeader(const void* aotHeaderAddress, char * buff, size_t buffSize)\n+   {\n+   if (!aotHeaderAddress)\n+      {\n+      strncat(buff, \"null\", buffSize);\n+      return;\n+      }\n+\n+   PORT_ACCESS_FROM_PORT(TR::Compiler->portLib);\n+   TR_AOTHeader * hdrInCache = (TR_AOTHeader *)aotHeaderAddress;\n+\n+   OMRProcessorDesc processorDescription = hdrInCache->processorDescription;\n+   OMRPORT_ACCESS_FROM_OMRPORT(TR::Compiler->omrPortLib);\n+   int length = 0;\n+   for (size_t i = 0; i < OMRPORT_SYSINFO_FEATURES_SIZE; i++)\n+      {\n+      for (int j = 0; j < 32; j++) \n+         {\n+         if (processorDescription.features[i] & (1<<j))\n+            {\n+            if (length >= 20)\n+               {\n+               strncat(buff, \"\\n\\t                                       \", buffSize);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3837db8895449801aa87fee1bde5cbb9d7ae36f"}, "originalPosition": 37}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e3837db8895449801aa87fee1bde5cbb9d7ae36f", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e3837db8895449801aa87fee1bde5cbb9d7ae36f", "committedDate": "2020-07-23T19:02:39Z", "message": "Enable portable AOT on x86\n\n- Added \"-XX:+PortableSharedCache\" and \"-XX:-PortableSharedCache\"\n- Added container detection. By default we enable portableAOT in containers.\n- \"-XX:-PortableSharedCache\" will disable portableAOT in containers as well.\n- The set of cpu features employed by the SCC can be displayed with \"-Xshareclasses:printStats\"\n\nIssue: #7966\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "e0f4010bb1ade7aae6bdfaabd7bdbe3f8624cff2", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e0f4010bb1ade7aae6bdfaabd7bdbe3f8624cff2", "committedDate": "2020-07-23T20:36:26Z", "message": "Enable portable AOT on x86\n\n- Added \"-XX:+PortableSharedCache\" and \"-XX:-PortableSharedCache\"\n- Added container detection. By default we enable portableAOT in containers.\n- \"-XX:-PortableSharedCache\" will disable portableAOT in containers as well.\n- The set of cpu features employed by the SCC is displayed with \"-Xshareclasses:printStats\"\n\nIssue: #7966\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0NDc5ODU1", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#pullrequestreview-454479855", "createdAt": "2020-07-23T20:41:42Z", "commit": {"oid": "e0f4010bb1ade7aae6bdfaabd7bdbe3f8624cff2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QyMDo0MTo0MlrOG2a1Gw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QyMDo1MDowOVrOG2bFTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTcxNTg2Nw==", "bodyText": "Should be BUFF_SIZE", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#discussion_r459715867", "createdAt": "2020-07-23T20:41:42Z", "author": {"login": "dsouzai"}, "path": "runtime/compiler/runtime/RelocationRuntime.cpp", "diffHunk": "@@ -1404,3 +1404,44 @@ TR_JITServerRelocationRuntime::copyDataToCodeCache(const void *startAddress, siz\n    return coldCodeStart;\n    }\n #endif /* defined(J9VM_OPT_JITSERVER) */\n+\n+void\n+printAOTHeader(const void* aotHeaderAddress, char * buff, const size_t BUFF_SIZE)\n+   {\n+   if (!aotHeaderAddress)\n+      {\n+      strncat(buff, \"null\", buffSize);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0f4010bb1ade7aae6bdfaabd7bdbe3f8624cff2"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTcyMDAxMw==", "bodyText": "You should memset buff to 0 before entering the outermost for loop. Otherwise, depending on the stack, the first time you call strlen(buff) you might not get 0.", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#discussion_r459720013", "createdAt": "2020-07-23T20:50:09Z", "author": {"login": "dsouzai"}, "path": "runtime/compiler/runtime/RelocationRuntime.cpp", "diffHunk": "@@ -1404,3 +1404,44 @@ TR_JITServerRelocationRuntime::copyDataToCodeCache(const void *startAddress, siz\n    return coldCodeStart;\n    }\n #endif /* defined(J9VM_OPT_JITSERVER) */\n+\n+void\n+printAOTHeader(const void* aotHeaderAddress, char * buff, const size_t BUFF_SIZE)\n+   {\n+   if (!aotHeaderAddress)\n+      {\n+      strncat(buff, \"null\", buffSize);\n+      return;\n+      }\n+\n+   PORT_ACCESS_FROM_PORT(TR::Compiler->portLib);\n+   OMRPORT_ACCESS_FROM_OMRPORT(TR::Compiler->omrPortLib);\n+   TR_AOTHeader * hdrInCache = (TR_AOTHeader *)aotHeaderAddress;\n+   OMRProcessorDesc processorDescription = hdrInCache->processorDescription;\n+\n+   int rowLength = 0;\n+   for (size_t i = 0; i < OMRPORT_SYSINFO_FEATURES_SIZE; i++)\n+      {\n+      for (int j = 0; j < 32; j++) \n+         {\n+         if (processorDescription.features[i] & (1<<j))\n+            {\n+            if (rowLength >= 20)\n+               {\n+               strncat(buff, \"\\n\\t                                       \", BUFF_SIZE - strlen(buff) - 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0f4010bb1ade7aae6bdfaabd7bdbe3f8624cff2"}, "originalPosition": 37}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e0f4010bb1ade7aae6bdfaabd7bdbe3f8624cff2", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e0f4010bb1ade7aae6bdfaabd7bdbe3f8624cff2", "committedDate": "2020-07-23T20:36:26Z", "message": "Enable portable AOT on x86\n\n- Added \"-XX:+PortableSharedCache\" and \"-XX:-PortableSharedCache\"\n- Added container detection. By default we enable portableAOT in containers.\n- \"-XX:-PortableSharedCache\" will disable portableAOT in containers as well.\n- The set of cpu features employed by the SCC is displayed with \"-Xshareclasses:printStats\"\n\nIssue: #7966\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "60fb5a31926f81d591d6a5bc861db91f40205e4c", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/60fb5a31926f81d591d6a5bc861db91f40205e4c", "committedDate": "2020-07-23T21:22:38Z", "message": "Enable portable AOT on x86\n\n- Added \"-XX:+PortableSharedCache\" and \"-XX:-PortableSharedCache\"\n- Added container detection. By default we enable portableAOT in containers.\n- \"-XX:-PortableSharedCache\" will disable portableAOT in containers as well.\n- The set of cpu features employed by the SCC is displayed with \"-Xshareclasses:printStats\"\n\nIssue: #7966\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0NzAwODQ1", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#pullrequestreview-454700845", "createdAt": "2020-07-24T08:03:38Z", "commit": {"oid": "60fb5a31926f81d591d6a5bc861db91f40205e4c"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQwODowMzozOFrOG2mijA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQwODo0NTo0M1rOG2ntzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTkwNzcyNA==", "bodyText": "Is it possible to add some comments with the intent of this code?", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#discussion_r459907724", "createdAt": "2020-07-24T08:03:38Z", "author": {"login": "mpirvu"}, "path": "runtime/compiler/runtime/RelocationRuntime.cpp", "diffHunk": "@@ -1404,3 +1404,45 @@ TR_JITServerRelocationRuntime::copyDataToCodeCache(const void *startAddress, siz\n    return coldCodeStart;\n    }\n #endif /* defined(J9VM_OPT_JITSERVER) */\n+\n+void\n+printAOTHeader(const void* aotHeaderAddress, char * buff, const size_t BUFF_SIZE)\n+   {\n+   memset(buff, 0, BUFF_SIZE*sizeof(char));\n+   if (!aotHeaderAddress)\n+      {\n+      strncat(buff, \"null\", BUFF_SIZE - strlen(buff) - 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60fb5a31926f81d591d6a5bc861db91f40205e4c"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTkwOTIyOQ==", "bodyText": "Is it possible do change the first parameter to TR_AOTHeader *aotHeaderAddress to avoid this cast. You would need to predeclare struct TR_AOTHeader in the file where printAOTHeader is used.", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#discussion_r459909229", "createdAt": "2020-07-24T08:07:04Z", "author": {"login": "mpirvu"}, "path": "runtime/compiler/runtime/RelocationRuntime.cpp", "diffHunk": "@@ -1404,3 +1404,45 @@ TR_JITServerRelocationRuntime::copyDataToCodeCache(const void *startAddress, siz\n    return coldCodeStart;\n    }\n #endif /* defined(J9VM_OPT_JITSERVER) */\n+\n+void\n+printAOTHeader(const void* aotHeaderAddress, char * buff, const size_t BUFF_SIZE)\n+   {\n+   memset(buff, 0, BUFF_SIZE*sizeof(char));\n+   if (!aotHeaderAddress)\n+      {\n+      strncat(buff, \"null\", BUFF_SIZE - strlen(buff) - 1);\n+      return;\n+      }\n+\n+   PORT_ACCESS_FROM_PORT(TR::Compiler->portLib);\n+   OMRPORT_ACCESS_FROM_OMRPORT(TR::Compiler->omrPortLib);\n+   TR_AOTHeader * hdrInCache = (TR_AOTHeader *)aotHeaderAddress;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60fb5a31926f81d591d6a5bc861db91f40205e4c"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTkyMTU0MA==", "bodyText": "What is the point of adding these long lines full of blanks?", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#discussion_r459921540", "createdAt": "2020-07-24T08:33:29Z", "author": {"login": "mpirvu"}, "path": "runtime/compiler/runtime/RelocationRuntime.cpp", "diffHunk": "@@ -1404,3 +1404,45 @@ TR_JITServerRelocationRuntime::copyDataToCodeCache(const void *startAddress, siz\n    return coldCodeStart;\n    }\n #endif /* defined(J9VM_OPT_JITSERVER) */\n+\n+void\n+printAOTHeader(const void* aotHeaderAddress, char * buff, const size_t BUFF_SIZE)\n+   {\n+   memset(buff, 0, BUFF_SIZE*sizeof(char));\n+   if (!aotHeaderAddress)\n+      {\n+      strncat(buff, \"null\", BUFF_SIZE - strlen(buff) - 1);\n+      return;\n+      }\n+\n+   PORT_ACCESS_FROM_PORT(TR::Compiler->portLib);\n+   OMRPORT_ACCESS_FROM_OMRPORT(TR::Compiler->omrPortLib);\n+   TR_AOTHeader * hdrInCache = (TR_AOTHeader *)aotHeaderAddress;\n+   OMRProcessorDesc processorDescription = hdrInCache->processorDescription;\n+\n+   int rowLength = 0;\n+   for (size_t i = 0; i < OMRPORT_SYSINFO_FEATURES_SIZE; i++)\n+      {\n+      for (int j = 0; j < 32; j++) \n+         {\n+         if (processorDescription.features[i] & (1<<j))\n+            {\n+            if (rowLength >= 20)\n+               {\n+               strncat(buff, \"\\n\\t                                       \", BUFF_SIZE - strlen(buff) - 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60fb5a31926f81d591d6a5bc861db91f40205e4c"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTkyNjk5MQ==", "bodyText": "Can we use something symbolic for this 32 value? sizeof(*processorDescription.features)", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#discussion_r459926991", "createdAt": "2020-07-24T08:45:43Z", "author": {"login": "mpirvu"}, "path": "runtime/compiler/runtime/RelocationRuntime.cpp", "diffHunk": "@@ -1404,3 +1404,45 @@ TR_JITServerRelocationRuntime::copyDataToCodeCache(const void *startAddress, siz\n    return coldCodeStart;\n    }\n #endif /* defined(J9VM_OPT_JITSERVER) */\n+\n+void\n+printAOTHeader(const void* aotHeaderAddress, char * buff, const size_t BUFF_SIZE)\n+   {\n+   memset(buff, 0, BUFF_SIZE*sizeof(char));\n+   if (!aotHeaderAddress)\n+      {\n+      strncat(buff, \"null\", BUFF_SIZE - strlen(buff) - 1);\n+      return;\n+      }\n+\n+   PORT_ACCESS_FROM_PORT(TR::Compiler->portLib);\n+   OMRPORT_ACCESS_FROM_OMRPORT(TR::Compiler->omrPortLib);\n+   TR_AOTHeader * hdrInCache = (TR_AOTHeader *)aotHeaderAddress;\n+   OMRProcessorDesc processorDescription = hdrInCache->processorDescription;\n+\n+   int rowLength = 0;\n+   for (size_t i = 0; i < OMRPORT_SYSINFO_FEATURES_SIZE; i++)\n+      {\n+      for (int j = 0; j < 32; j++) ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60fb5a31926f81d591d6a5bc861db91f40205e4c"}, "originalPosition": 32}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "60fb5a31926f81d591d6a5bc861db91f40205e4c", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/60fb5a31926f81d591d6a5bc861db91f40205e4c", "committedDate": "2020-07-23T21:22:38Z", "message": "Enable portable AOT on x86\n\n- Added \"-XX:+PortableSharedCache\" and \"-XX:-PortableSharedCache\"\n- Added container detection. By default we enable portableAOT in containers.\n- \"-XX:-PortableSharedCache\" will disable portableAOT in containers as well.\n- The set of cpu features employed by the SCC is displayed with \"-Xshareclasses:printStats\"\n\nIssue: #7966\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "d576ed5fbd637019aeb8a9ed694e98c4987f86d6", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/d576ed5fbd637019aeb8a9ed694e98c4987f86d6", "committedDate": "2020-07-24T18:29:08Z", "message": "Enable portable AOT on x86\n\n- Added \"-XX:+PortableSharedCache\" and \"-XX:-PortableSharedCache\"\n- Added container detection. By default we enable portableAOT in containers.\n- \"-XX:-PortableSharedCache\" will disable portableAOT in containers as well.\n- The set of cpu features employed by the SCC is displayed with \"-Xshareclasses:printStats\"\n\nIssue: #7966\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MTQyMjM1", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#pullrequestreview-455142235", "createdAt": "2020-07-24T19:42:12Z", "commit": {"oid": "ddd80a3b38b8e2ea9e0537d87798ab4824ece58f"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MTYzMDQx", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#pullrequestreview-455163041", "createdAt": "2020-07-24T20:21:48Z", "commit": {"oid": "ddd80a3b38b8e2ea9e0537d87798ab4824ece58f"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e23fe467b1729038b0f26adc8aeb94bcc9fd7249", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e23fe467b1729038b0f26adc8aeb94bcc9fd7249", "committedDate": "2020-07-27T20:01:56Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "9ac9311a610dd68215c661f987788bc5311fbccc", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/9ac9311a610dd68215c661f987788bc5311fbccc", "committedDate": "2020-07-27T20:12:20Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9ac9311a610dd68215c661f987788bc5311fbccc", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/9ac9311a610dd68215c661f987788bc5311fbccc", "committedDate": "2020-07-27T20:12:20Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "81ca8653f323f3bfce3d3ea7faa5bdb0d0ad8c79", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/81ca8653f323f3bfce3d3ea7faa5bdb0d0ad8c79", "committedDate": "2020-07-27T20:27:17Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "81ca8653f323f3bfce3d3ea7faa5bdb0d0ad8c79", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/81ca8653f323f3bfce3d3ea7faa5bdb0d0ad8c79", "committedDate": "2020-07-27T20:27:17Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "e58a0804ea35201d63638369335190835465f683", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e58a0804ea35201d63638369335190835465f683", "committedDate": "2020-07-27T20:36:20Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e58a0804ea35201d63638369335190835465f683", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e58a0804ea35201d63638369335190835465f683", "committedDate": "2020-07-27T20:36:20Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "44424a10023a056657f6c417a76afcdbbd75f6c6", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/44424a10023a056657f6c417a76afcdbbd75f6c6", "committedDate": "2020-07-27T21:15:32Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2MTQ4NzEy", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#pullrequestreview-456148712", "createdAt": "2020-07-27T21:28:57Z", "commit": {"oid": "44424a10023a056657f6c417a76afcdbbd75f6c6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMToyODo1N1rOG30Qkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMToyODo1N1rOG30Qkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE4MTA3NQ==", "bodyText": "@pshipton Hi Peter, I have a question about tracepoints. When I tried ./java -Xtrace:print=j9jit.88 -XX:+PortableSharedCache -XX:-PortableSharedCache -version\nthe message doesn't get printed. Is there anything missing in my change?\n(I grepped for Trc_JIT_portableSharedCache_enabled_or_disabled to find the tracepoint number after I compiled the code. And it appears to be 88)\nI tried the same with ./java -Xtrace:print=j9jit.0 which corresponds to Trc_JIT_VMInitStages_Event1(curThread); and it's working fine.", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#discussion_r461181075", "createdAt": "2020-07-27T21:28:57Z", "author": {"login": "harryyu1994"}, "path": "runtime/compiler/control/rossa.cpp", "diffHunk": "@@ -1971,6 +1974,10 @@ aboutToBootstrap(J9JavaVM * javaVM, J9JITConfig * jitConfig)\n       hwProfiler->turnBufferProcessingOffTemporarily();\n       }\n \n+   printf (\"portable shared cache called\\n\");\n+   Trc_JIT_portableSharedCache_enabled_or_disabled(curThread, javaVM->sharedCacheAPI->sharedCachePortable);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44424a10023a056657f6c417a76afcdbbd75f6c6"}, "originalPosition": 22}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "44424a10023a056657f6c417a76afcdbbd75f6c6", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/44424a10023a056657f6c417a76afcdbbd75f6c6", "committedDate": "2020-07-27T21:15:32Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "42365b5f285be3a84bd50162dfefd5e031d1f4cf", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/42365b5f285be3a84bd50162dfefd5e031d1f4cf", "committedDate": "2020-07-27T21:42:13Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2MTczMzE0", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#pullrequestreview-456173314", "createdAt": "2020-07-27T22:16:09Z", "commit": {"oid": "42365b5f285be3a84bd50162dfefd5e031d1f4cf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMjoxNjowOVrOG31hZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMjoxNjowOVrOG31hZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTIwMTc2Nw==", "bodyText": "test this with make _cmdLineTest_J9test_extended", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#discussion_r461201767", "createdAt": "2020-07-27T22:16:09Z", "author": {"login": "harryyu1994"}, "path": "test/functional/cmdLineTests/cmdLineTest_J9tests/j9tests.xml", "diffHunk": "@@ -91,5 +91,17 @@ SPDX-License-Identifier: EPL-2.0 OR Apache-2.0 OR GPL-2.0 WITH Classpath-excepti\n         <output type=\"failure\" caseSensitive=\"yes\" regex=\"no\">dump written to</output>\n         <output type=\"success\" caseSensitive=\"yes\" regex=\"no\">VM is shutting down. Reason: java/lang/OutOfMemoryError</output>\n     </test>\n+\n+    <!-- -XX:+PortableSharedCache -XX:-PortableSharedCache -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "42365b5f285be3a84bd50162dfefd5e031d1f4cf"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2MTc0MDg1", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#pullrequestreview-456174085", "createdAt": "2020-07-27T22:17:51Z", "commit": {"oid": "065e4526a1d18ccf165c57e2ca3ed3122fc87226"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMjoxNzo1MlrOG31j7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QyMjoxNzo1MlrOG31j7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTIwMjQxMg==", "bodyText": "test this with make _testSCCMLTests1_openj9", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#discussion_r461202412", "createdAt": "2020-07-27T22:17:52Z", "author": {"login": "harryyu1994"}, "path": "test/functional/cmdLineTests/shareClassTests/SCCMLTests/ShareClassesCMLTests-1.xml", "diffHunk": "@@ -1406,6 +1406,12 @@\n \t\t<output type=\"failure\" caseSensitive=\"yes\" regex=\"no\">Processing dump event</output>\n \t</test>\n \n+\t<test id=\"Test 66: Processor Features PrintStats Test : Ensure -Xshareclasses:printStats cache contains processor feature info\" timeout=\"600\" runPath=\".\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "065e4526a1d18ccf165c57e2ca3ed3122fc87226"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "065e4526a1d18ccf165c57e2ca3ed3122fc87226", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/065e4526a1d18ccf165c57e2ca3ed3122fc87226", "committedDate": "2020-07-27T22:00:46Z", "message": "Add test for processor features in -Xshareclasses:printStats\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "c3894487e65e70fc0be2e00ce2b095685d141dad", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c3894487e65e70fc0be2e00ce2b095685d141dad", "committedDate": "2020-07-27T22:24:27Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c3894487e65e70fc0be2e00ce2b095685d141dad", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c3894487e65e70fc0be2e00ce2b095685d141dad", "committedDate": "2020-07-27T22:24:27Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "a100800d32e99591c8483207c28f37bae3f0d364", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/a100800d32e99591c8483207c28f37bae3f0d364", "committedDate": "2020-07-27T22:25:50Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a100800d32e99591c8483207c28f37bae3f0d364", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/a100800d32e99591c8483207c28f37bae3f0d364", "committedDate": "2020-07-27T22:25:50Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "b3b05d1fa4ce947b3846bb2a2077addca234c96b", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/b3b05d1fa4ce947b3846bb2a2077addca234c96b", "committedDate": "2020-07-27T22:33:04Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b3b05d1fa4ce947b3846bb2a2077addca234c96b", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/b3b05d1fa4ce947b3846bb2a2077addca234c96b", "committedDate": "2020-07-27T22:33:04Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "4321cf3b59b8039b37753a91358e550b0709f715", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/4321cf3b59b8039b37753a91358e550b0709f715", "committedDate": "2020-07-27T22:35:17Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4321cf3b59b8039b37753a91358e550b0709f715", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/4321cf3b59b8039b37753a91358e550b0709f715", "committedDate": "2020-07-27T22:35:17Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "e953982941bf97a3feb07cb6385b796fc40ac3e7", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e953982941bf97a3feb07cb6385b796fc40ac3e7", "committedDate": "2020-07-27T22:37:40Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e953982941bf97a3feb07cb6385b796fc40ac3e7", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e953982941bf97a3feb07cb6385b796fc40ac3e7", "committedDate": "2020-07-27T22:37:40Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "85c3637fae17f6b99b9be1ef53618955ac428b93", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/85c3637fae17f6b99b9be1ef53618955ac428b93", "committedDate": "2020-07-27T22:41:05Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "85c3637fae17f6b99b9be1ef53618955ac428b93", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/85c3637fae17f6b99b9be1ef53618955ac428b93", "committedDate": "2020-07-27T22:41:05Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "143e0f796b5383d05d241af48a9cdfef044aa861", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/143e0f796b5383d05d241af48a9cdfef044aa861", "committedDate": "2020-07-27T22:48:43Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3c2f12724dfd458abca415278416dd55cec7100b", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/3c2f12724dfd458abca415278416dd55cec7100b", "committedDate": "2020-07-28T15:38:54Z", "message": "debug"}, "afterCommit": {"oid": "dbe1904b147b6feceda6d8d5436b673b158b5cfe", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/dbe1904b147b6feceda6d8d5436b673b158b5cfe", "committedDate": "2020-07-28T15:47:32Z", "message": "stuff"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dbe1904b147b6feceda6d8d5436b673b158b5cfe", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/dbe1904b147b6feceda6d8d5436b673b158b5cfe", "committedDate": "2020-07-28T15:47:32Z", "message": "stuff"}, "afterCommit": {"oid": "ce7b0139921d822a46fe8c1b844c82ef30504f00", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/ce7b0139921d822a46fe8c1b844c82ef30504f00", "committedDate": "2020-07-28T15:49:24Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU2Nzg4NjYw", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#pullrequestreview-456788660", "createdAt": "2020-07-28T16:07:16Z", "commit": {"oid": "ce7b0139921d822a46fe8c1b844c82ef30504f00"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNjowNzoxNlrOG4T6aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQxNjowNzoxNlrOG4T6aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTY5OTY5MQ==", "bodyText": "These tests are only going to work on x86 platforms, they need to be restricted to these platforms. There is a way to do this, look for an example in the ShareClassesCMLTests-*.xml files", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#discussion_r461699691", "createdAt": "2020-07-28T16:07:16Z", "author": {"login": "pshipton"}, "path": "test/functional/cmdLineTests/shareClassTests/SCCMLTests/ShareClassesCMLTests-1.xml", "diffHunk": "@@ -1406,6 +1406,12 @@\n \t\t<output type=\"failure\" caseSensitive=\"yes\" regex=\"no\">Processing dump event</output>\n \t</test>\n \n+\t<test id=\"Test 66: Processor Features PrintStats Test : Ensure -Xshareclasses:printStats cache contains processor feature info\" timeout=\"600\" runPath=\".\">\n+\t\t<command>$JAVA_EXE$ $currentMode$,printStats -version</command>\n+\t\t<output type=\"failure\" caseSensitive=\"yes\" regex=\"yes\" javaUtilPattern=\"yes\" showMatch=\"yes\">Processor Features[\\s]*= null</output>\n+\t\t<output type=\"success\" caseSensitive=\"yes\" regex=\"yes\" javaUtilPattern=\"yes\" showMatch=\"yes\">Processor Features[\\s]*= .*</output>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce7b0139921d822a46fe8c1b844c82ef30504f00"}, "originalPosition": 16}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ce7b0139921d822a46fe8c1b844c82ef30504f00", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/ce7b0139921d822a46fe8c1b844c82ef30504f00", "committedDate": "2020-07-28T15:49:24Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "d5d5391c6b27e4768f94a524fea826e292650b5d", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/d5d5391c6b27e4768f94a524fea826e292650b5d", "committedDate": "2020-07-28T16:58:58Z", "message": "Add test for processor features in -Xshareclasses:printStats\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d5d5391c6b27e4768f94a524fea826e292650b5d", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/d5d5391c6b27e4768f94a524fea826e292650b5d", "committedDate": "2020-07-28T16:58:58Z", "message": "Add test for processor features in -Xshareclasses:printStats\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "926124170cffdbd3200414e6ac743b63214bb77b", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/926124170cffdbd3200414e6ac743b63214bb77b", "committedDate": "2020-07-28T17:05:02Z", "message": "Add test for processor features in -Xshareclasses:printStats\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "926124170cffdbd3200414e6ac743b63214bb77b", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/926124170cffdbd3200414e6ac743b63214bb77b", "committedDate": "2020-07-28T17:05:02Z", "message": "Add test for processor features in -Xshareclasses:printStats\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "035366c23710bd55a5440fa5f762a5754dad3275", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/035366c23710bd55a5440fa5f762a5754dad3275", "committedDate": "2020-07-28T17:19:52Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "035366c23710bd55a5440fa5f762a5754dad3275", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/035366c23710bd55a5440fa5f762a5754dad3275", "committedDate": "2020-07-28T17:19:52Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "48667ff3b05fd8f6d588ac6bd313c9c904c4ac30", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/48667ff3b05fd8f6d588ac6bd313c9c904c4ac30", "committedDate": "2020-07-28T17:47:21Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "48667ff3b05fd8f6d588ac6bd313c9c904c4ac30", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/48667ff3b05fd8f6d588ac6bd313c9c904c4ac30", "committedDate": "2020-07-28T17:47:21Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "5c3888e79ab75bd696239d8b0f52ab651f2cae03", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/5c3888e79ab75bd696239d8b0f52ab651f2cae03", "committedDate": "2020-07-28T17:54:49Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5c3888e79ab75bd696239d8b0f52ab651f2cae03", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/5c3888e79ab75bd696239d8b0f52ab651f2cae03", "committedDate": "2020-07-28T17:54:49Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "abedabe94c57de11eeec99cf8a3739b2254739a6", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/abedabe94c57de11eeec99cf8a3739b2254739a6", "committedDate": "2020-07-28T18:04:57Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "abedabe94c57de11eeec99cf8a3739b2254739a6", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/abedabe94c57de11eeec99cf8a3739b2254739a6", "committedDate": "2020-07-28T18:04:57Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "ed33b2d4c3f622d05ac88d33c92367d966c3b2f2", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/ed33b2d4c3f622d05ac88d33c92367d966c3b2f2", "committedDate": "2020-07-28T18:27:41Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ed33b2d4c3f622d05ac88d33c92367d966c3b2f2", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/ed33b2d4c3f622d05ac88d33c92367d966c3b2f2", "committedDate": "2020-07-28T18:27:41Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "ccdb359365fc37f910a013ed61a24a9abeb67f3d", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/ccdb359365fc37f910a013ed61a24a9abeb67f3d", "committedDate": "2020-07-28T18:34:57Z", "message": "Add test for processor features in -Xshareclasses:printStats\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ccdb359365fc37f910a013ed61a24a9abeb67f3d", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/ccdb359365fc37f910a013ed61a24a9abeb67f3d", "committedDate": "2020-07-28T18:34:57Z", "message": "Add test for processor features in -Xshareclasses:printStats\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "ba429eed3d46ef40ddccae120a31d65ca6c97ecf", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/ba429eed3d46ef40ddccae120a31d65ca6c97ecf", "committedDate": "2020-07-28T19:52:53Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ba429eed3d46ef40ddccae120a31d65ca6c97ecf", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/ba429eed3d46ef40ddccae120a31d65ca6c97ecf", "committedDate": "2020-07-28T19:52:53Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "d97d5c7d5631923bf81a443112d734c856b1d5bf", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/d97d5c7d5631923bf81a443112d734c856b1d5bf", "committedDate": "2020-07-28T20:00:32Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d97d5c7d5631923bf81a443112d734c856b1d5bf", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/d97d5c7d5631923bf81a443112d734c856b1d5bf", "committedDate": "2020-07-28T20:00:32Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "b868473f52edf40ff1e8c8ee0a26bf993a7dbfd8", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/b868473f52edf40ff1e8c8ee0a26bf993a7dbfd8", "committedDate": "2020-07-28T20:07:56Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b868473f52edf40ff1e8c8ee0a26bf993a7dbfd8", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/b868473f52edf40ff1e8c8ee0a26bf993a7dbfd8", "committedDate": "2020-07-28T20:07:56Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "bb27d6787ae916bf1bc7961ec2a1c69dad951533", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/bb27d6787ae916bf1bc7961ec2a1c69dad951533", "committedDate": "2020-07-28T20:17:40Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bb27d6787ae916bf1bc7961ec2a1c69dad951533", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/bb27d6787ae916bf1bc7961ec2a1c69dad951533", "committedDate": "2020-07-28T20:17:40Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "44a73a0fd72700cd37584c5734ff5085959264c6", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/44a73a0fd72700cd37584c5734ff5085959264c6", "committedDate": "2020-07-28T20:30:58Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "44a73a0fd72700cd37584c5734ff5085959264c6", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/44a73a0fd72700cd37584c5734ff5085959264c6", "committedDate": "2020-07-28T20:30:58Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "1ddfbbce3d26ba21e0eed99a6ceea09f0eac6642", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/1ddfbbce3d26ba21e0eed99a6ceea09f0eac6642", "committedDate": "2020-07-28T20:36:25Z", "message": "Add test for processor features in -Xshareclasses:printStats\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1ddfbbce3d26ba21e0eed99a6ceea09f0eac6642", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/1ddfbbce3d26ba21e0eed99a6ceea09f0eac6642", "committedDate": "2020-07-28T20:36:25Z", "message": "Add test for processor features in -Xshareclasses:printStats\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "92a410cdee94b65fb8937cd00af11326e5cca244", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/92a410cdee94b65fb8937cd00af11326e5cca244", "committedDate": "2020-07-28T20:56:04Z", "message": "Add test for processor features in -Xshareclasses:printStats\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "92a410cdee94b65fb8937cd00af11326e5cca244", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/92a410cdee94b65fb8937cd00af11326e5cca244", "committedDate": "2020-07-28T20:56:04Z", "message": "Add test for processor features in -Xshareclasses:printStats\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "74439ddf5aec6db2c154be5e1c70ff1019108b64", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/74439ddf5aec6db2c154be5e1c70ff1019108b64", "committedDate": "2020-07-28T21:05:15Z", "message": "Add test for processor features in -Xshareclasses:printStats\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3MDQ5MzEz", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#pullrequestreview-457049313", "createdAt": "2020-07-28T21:41:39Z", "commit": {"oid": "74439ddf5aec6db2c154be5e1c70ff1019108b64"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMTo0MTozOVrOG4f9qg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMTo0MTozOVrOG4f9qg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg5NzEzMA==", "bodyText": "Pls add a newline at the end of the last line.", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#discussion_r461897130", "createdAt": "2020-07-28T21:41:39Z", "author": {"login": "pshipton"}, "path": "test/functional/cmdLineTests/cmdLineTest_J9tests/j9tests.xml", "diffHunk": "@@ -91,5 +91,18 @@ SPDX-License-Identifier: EPL-2.0 OR Apache-2.0 OR GPL-2.0 WITH Classpath-excepti\n         <output type=\"failure\" caseSensitive=\"yes\" regex=\"no\">dump written to</output>\n         <output type=\"success\" caseSensitive=\"yes\" regex=\"no\">VM is shutting down. Reason: java/lang/OutOfMemoryError</output>\n     </test>\n-</suite>\n \n+    <!-- -XX:+PortableSharedCache -XX:-PortableSharedCache -->\n+    <test id=\"Verify -XX:+PortableSharedCache -XX:-PortableSharedCache behaves as expected with the portable shared cache feature disabled\">\n+        <command>$EXE$ -Xshareclasses -Xtrace:print=j9jit.88 -XX:+PortableSharedCache -XX:-PortableSharedCache -version</command>\n+        <output type=\"success\" caseSensitive=\"yes\" regex=\"no\">PortableSharedCache is 0</output>\n+        <output type=\"failure\" caseSensitive=\"yes\" regex=\"no\">PortableSharedCache is 1</output>\n+    </test>\n+\n+    <!-- -XX:+PortableSharedCache -XX:-PortableSharedCache -->\n+    <test id=\"Verify -XX:-PortableSharedCache -XX:+PortableSharedCache behaves as expected with the portable shared cache feature enabled\">\n+        <command>$EXE$ -Xshareclasses -Xtrace:print=j9jit.88 -XX:-PortableSharedCache -XX:+PortableSharedCache -version</command>\n+        <output type=\"success\" caseSensitive=\"yes\" regex=\"no\">PortableSharedCache is 1</output>\n+        <output type=\"failure\" caseSensitive=\"yes\" regex=\"no\">PortableSharedCache is 0</output>\n+    </test>\n+</suite>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74439ddf5aec6db2c154be5e1c70ff1019108b64"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3MDQ5Mzk3", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#pullrequestreview-457049397", "createdAt": "2020-07-28T21:41:48Z", "commit": {"oid": "74439ddf5aec6db2c154be5e1c70ff1019108b64"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMTo0MTo0OVrOG4f-Pw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yOFQyMTo0MTo0OVrOG4f-Pw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg5NzI3OQ==", "bodyText": "Pls add a newline at the end of the last line.", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#discussion_r461897279", "createdAt": "2020-07-28T21:41:49Z", "author": {"login": "pshipton"}, "path": "test/functional/cmdLineTests/cmdLineTest_J9tests/j9tests_exclude.xml", "diffHunk": "@@ -68,4 +68,7 @@\n <include id=\"-Xaggressive\" platform=\"linux.*\" shouldFix=\"false\"><reason>Only available on Linux platforms</reason></include>\n <include id=\"defaultBehaviourOfCFS\" platform=\"linux.*\" shouldFix=\"false\"><reason>Only available on Linux platforms</reason></include>\n \n+<include id=\"Verify -XX:+PortableSharedCache -XX:-PortableSharedCache behaves as expected with the portable shared cache feature disabled\" platform=\".*x86.*\" shouldFix=\"false\"><reason>Only available on x86 platforms</reason></include>\n+<include id=\"Verify -XX:-PortableSharedCache -XX:+PortableSharedCache behaves as expected with the portable shared cache feature enabled\" platform=\".*x86.*\" shouldFix=\"false\"><reason>Only available on x86 platforms</reason></include>\n+\n </suite>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74439ddf5aec6db2c154be5e1c70ff1019108b64"}, "originalPosition": 16}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "74439ddf5aec6db2c154be5e1c70ff1019108b64", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/74439ddf5aec6db2c154be5e1c70ff1019108b64", "committedDate": "2020-07-28T21:05:15Z", "message": "Add test for processor features in -Xshareclasses:printStats\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "a053c7c1a034f13adc70c3cc545ddba947fe530c", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/a053c7c1a034f13adc70c3cc545ddba947fe530c", "committedDate": "2020-07-29T01:13:17Z", "message": "container"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a053c7c1a034f13adc70c3cc545ddba947fe530c", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/a053c7c1a034f13adc70c3cc545ddba947fe530c", "committedDate": "2020-07-29T01:13:17Z", "message": "container"}, "afterCommit": {"oid": "6518e8a686c2829d63df6c49857ae7c1434407f6", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/6518e8a686c2829d63df6c49857ae7c1434407f6", "committedDate": "2020-07-29T01:29:50Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6518e8a686c2829d63df6c49857ae7c1434407f6", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/6518e8a686c2829d63df6c49857ae7c1434407f6", "committedDate": "2020-07-29T01:29:50Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "9b4d8ca5e4d9e153f907df3387b43ca86e938f22", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/9b4d8ca5e4d9e153f907df3387b43ca86e938f22", "committedDate": "2020-07-29T01:31:38Z", "message": "Add test for processor features in -Xshareclasses:printStats\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9b4d8ca5e4d9e153f907df3387b43ca86e938f22", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/9b4d8ca5e4d9e153f907df3387b43ca86e938f22", "committedDate": "2020-07-29T01:31:38Z", "message": "Add test for processor features in -Xshareclasses:printStats\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "daf6be84b718a8bc4d7bbecc54b82f727f73123a", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/daf6be84b718a8bc4d7bbecc54b82f727f73123a", "committedDate": "2020-07-29T02:07:18Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "daf6be84b718a8bc4d7bbecc54b82f727f73123a", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/daf6be84b718a8bc4d7bbecc54b82f727f73123a", "committedDate": "2020-07-29T02:07:18Z", "message": "Add test for -XX:[+|-]PortableSharedCache\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "c2371b065f8bf3b2ca46d8de376a0e500f1b2ba5", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c2371b065f8bf3b2ca46d8de376a0e500f1b2ba5", "committedDate": "2020-07-29T02:58:59Z", "message": "Add test for processor features in -Xshareclasses:printStats\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c2371b065f8bf3b2ca46d8de376a0e500f1b2ba5", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c2371b065f8bf3b2ca46d8de376a0e500f1b2ba5", "committedDate": "2020-07-29T02:58:59Z", "message": "Add test for processor features in -Xshareclasses:printStats\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "16f87fb76fcd8746588e367f164db9a252d99cb8", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/16f87fb76fcd8746588e367f164db9a252d99cb8", "committedDate": "2020-07-29T03:09:51Z", "message": "Add test for processor features in -Xshareclasses:printStats\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "16f87fb76fcd8746588e367f164db9a252d99cb8", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/16f87fb76fcd8746588e367f164db9a252d99cb8", "committedDate": "2020-07-29T03:09:51Z", "message": "Add test for processor features in -Xshareclasses:printStats\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "b151cb396a2d3601846f80b561110480a3fee847", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/b151cb396a2d3601846f80b561110480a3fee847", "committedDate": "2020-07-29T06:29:46Z", "message": "Add test for processor features in -Xshareclasses:printStats\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b151cb396a2d3601846f80b561110480a3fee847", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/b151cb396a2d3601846f80b561110480a3fee847", "committedDate": "2020-07-29T06:29:46Z", "message": "Add test for processor features in -Xshareclasses:printStats\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "a0decb8abbc8b0aeb87b4bc6118d359495f5093b", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/a0decb8abbc8b0aeb87b4bc6118d359495f5093b", "committedDate": "2020-07-29T06:39:26Z", "message": "Add test for processor features in -Xshareclasses:printStats\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3Njg2NTI4", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#pullrequestreview-457686528", "createdAt": "2020-07-29T16:23:17Z", "commit": {"oid": "74439ddf5aec6db2c154be5e1c70ff1019108b64"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU3NzcyMTg1", "url": "https://github.com/eclipse-openj9/openj9/pull/9993#pullrequestreview-457772185", "createdAt": "2020-07-29T18:15:07Z", "commit": {"oid": "a0decb8abbc8b0aeb87b4bc6118d359495f5093b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2645a3f44ea3f8a0c1775c8843658650b2af247e", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/2645a3f44ea3f8a0c1775c8843658650b2af247e", "committedDate": "2020-07-29T18:56:39Z", "message": "Enable portable AOT on x86\n\n- Added \"-XX:+PortableSharedCache\" and \"-XX:-PortableSharedCache\"\n- Added container detection. By default we enable portableAOT in containers.\n- \"-XX:-PortableSharedCache\" will disable portableAOT in containers as well.\n- The set of cpu features employed by the SCC is displayed with \"-Xshareclasses:printStats\"\n\nIssue: #7966\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fcf86103e19810ca00b78673e14718629d3fde73", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/fcf86103e19810ca00b78673e14718629d3fde73", "committedDate": "2020-07-29T18:57:23Z", "message": "Add test for -XX:[+|-]PortableSharedCache and -Xshareclasses:printStats\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a0decb8abbc8b0aeb87b4bc6118d359495f5093b", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/a0decb8abbc8b0aeb87b4bc6118d359495f5093b", "committedDate": "2020-07-29T06:39:26Z", "message": "Add test for processor features in -Xshareclasses:printStats\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "fcf86103e19810ca00b78673e14718629d3fde73", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/fcf86103e19810ca00b78673e14718629d3fde73", "committedDate": "2020-07-29T18:57:23Z", "message": "Add test for -XX:[+|-]PortableSharedCache and -Xshareclasses:printStats\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 598, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}