{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyMjQ0NTQx", "number": 9431, "title": "Replace CPU APIs on Z", "bodyText": "depends on: eclipse/omr#5153\nSigned-off-by: Harry Yu harryyu1994@gmail.com", "createdAt": "2020-05-01T18:28:41Z", "url": "https://github.com/eclipse-openj9/openj9/pull/9431", "merged": true, "mergeCommit": {"oid": "7fcc41a3ad6c3e292890a2213020845a45211c0b"}, "closed": true, "closedAt": "2020-06-01T15:55:58Z", "author": {"login": "harryyu1994"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABci5nsRgBqjMzNTMzODEzNjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcmKhUhgBqjMzODkwODgyNTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b5dcba5f2d421bf9427bf4adbbaaed625f570e18", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/b5dcba5f2d421bf9427bf4adbbaaed625f570e18", "committedDate": "2020-05-01T18:25:49Z", "message": "Replace old Z cpu APIs with new ones\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "ff743ab68d2b552bd5c8f17dfb5ac7a92fecc041", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/ff743ab68d2b552bd5c8f17dfb5ac7a92fecc041", "committedDate": "2020-05-19T19:26:59Z", "message": "Replace CPU APIs on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NzY5NjM5", "url": "https://github.com/eclipse-openj9/openj9/pull/9431#pullrequestreview-414769639", "createdAt": "2020-05-19T19:46:27Z", "commit": {"oid": "ff743ab68d2b552bd5c8f17dfb5ac7a92fecc041"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxOTo0NjoyN1rOGXwBQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxOTo0NjoyN1rOGXwBQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU1NzE4Ng==", "bodyText": "@fjeremic Issue here: options get initialized after CompilerEnv gets initialized. as a result, by the time our cpu::detect() function is called , we won't have the command line options ready. So these feature/processor intiailizations have to be done afterwards. The workaround I have here is an applyUserOptions() api that will be called somewhere after the options are ready. (I picked the place that the old processor detection system uses to be safe). I thought about moving the detect function somewhere else, still think the current location is most idea. I also don't want our cpu::detect() function to have dependency on options initialization.", "url": "https://github.com/eclipse-openj9/openj9/pull/9431#discussion_r427557186", "createdAt": "2020-05-19T19:46:27Z", "author": {"login": "harryyu1994"}, "path": "runtime/compiler/z/env/J9CPU.cpp", "diffHunk": "@@ -43,14 +43,85 @@\n \n extern J9JITConfig * jitConfig;\n \n-namespace J9\n-{\n+void\n+J9::Z::CPU::applyUserOptions()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff743ab68d2b552bd5c8f17dfb5ac7a92fecc041"}, "originalPosition": 7}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ff743ab68d2b552bd5c8f17dfb5ac7a92fecc041", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/ff743ab68d2b552bd5c8f17dfb5ac7a92fecc041", "committedDate": "2020-05-19T19:26:59Z", "message": "Replace CPU APIs on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "d7ee5bd87b2b0b810d9c237acd16077e71caade7", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/d7ee5bd87b2b0b810d9c237acd16077e71caade7", "committedDate": "2020-05-21T02:52:58Z", "message": "Replace CPU APIs on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a78b50f3e33cdb53ed200089269714ba11173058", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/a78b50f3e33cdb53ed200089269714ba11173058", "committedDate": "2020-05-21T20:45:40Z", "message": "fix"}, "afterCommit": {"oid": "9df38930e88bf6eb00b06b4688f9f117dafc710a", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/9df38930e88bf6eb00b06b4688f9f117dafc710a", "committedDate": "2020-05-22T17:03:12Z", "message": "Replace CPU APIs on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3d08ac6fa440e598a32f59f126d23f0113ef89d3", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/3d08ac6fa440e598a32f59f126d23f0113ef89d3", "committedDate": "2020-05-22T20:38:56Z", "message": "fix"}, "afterCommit": {"oid": "3ca46cffeee220874d15fb054c58e10a097d7600", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/3ca46cffeee220874d15fb054c58e10a097d7600", "committedDate": "2020-05-23T03:12:51Z", "message": "Replace CPU APIs on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3ca46cffeee220874d15fb054c58e10a097d7600", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/3ca46cffeee220874d15fb054c58e10a097d7600", "committedDate": "2020-05-23T03:12:51Z", "message": "Replace CPU APIs on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "ae9efef0841ccd06b525a40779a6c4ae891e1c34", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/ae9efef0841ccd06b525a40779a6c4ae891e1c34", "committedDate": "2020-05-23T03:15:24Z", "message": "Replace CPU APIs on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ae9efef0841ccd06b525a40779a6c4ae891e1c34", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/ae9efef0841ccd06b525a40779a6c4ae891e1c34", "committedDate": "2020-05-23T03:15:24Z", "message": "Replace CPU APIs on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "099de8ddac0e7242013c8731ada0b547627c49e0", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/099de8ddac0e7242013c8731ada0b547627c49e0", "committedDate": "2020-05-28T20:53:01Z", "message": "Replace CPU APIs on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "099de8ddac0e7242013c8731ada0b547627c49e0", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/099de8ddac0e7242013c8731ada0b547627c49e0", "committedDate": "2020-05-28T20:53:01Z", "message": "Replace CPU APIs on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "7ae31004f21d15a823039163eeec9ece28097de9", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/7ae31004f21d15a823039163eeec9ece28097de9", "committedDate": "2020-05-29T04:23:32Z", "message": "Replace CPU APIs on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMDA0ODk5", "url": "https://github.com/eclipse-openj9/openj9/pull/9431#pullrequestreview-421004899", "createdAt": "2020-05-29T14:25:08Z", "commit": {"oid": "7ae31004f21d15a823039163eeec9ece28097de9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMDQ1OTA5", "url": "https://github.com/eclipse-openj9/openj9/pull/9431#pullrequestreview-421045909", "createdAt": "2020-05-29T15:12:28Z", "commit": {"oid": "7ae31004f21d15a823039163eeec9ece28097de9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6150411cf30162e32a9a5d3dabc2be5523f10ce3", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/6150411cf30162e32a9a5d3dabc2be5523f10ce3", "committedDate": "2020-05-29T22:45:01Z", "message": "Replace CPU APIs on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7ae31004f21d15a823039163eeec9ece28097de9", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/7ae31004f21d15a823039163eeec9ece28097de9", "committedDate": "2020-05-29T04:23:32Z", "message": "Replace CPU APIs on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "6150411cf30162e32a9a5d3dabc2be5523f10ce3", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/6150411cf30162e32a9a5d3dabc2be5523f10ce3", "committedDate": "2020-05-29T22:45:01Z", "message": "Replace CPU APIs on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1152, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}