{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYyNDM5OTM0", "number": 8295, "title": "Fix the issue with the dangling pointer at shutdown", "bodyText": "The change is to ensure the allocated memory in each\nelement of the linked list plus the element itself\nis safely released at the shutdown of SCC.\nFixes: #8140\nSigned-off-by: Cheng Jin jincheng@ca.ibm.com", "createdAt": "2020-01-14T04:37:57Z", "url": "https://github.com/eclipse-openj9/openj9/pull/8295", "merged": true, "mergeCommit": {"oid": "83fda17c0581d69e9916e0070fea35965c2b8655"}, "closed": true, "closedAt": "2020-01-14T19:20:33Z", "author": {"login": "ChengJin01"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb6JfIQgBqjI5NDU2NTk2OTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb6VnlngFqTM0Mjc2MTM4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4344eff7ceecc876d6ece62231cbb34df0772e99", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/4344eff7ceecc876d6ece62231cbb34df0772e99", "committedDate": "2020-01-14T04:23:43Z", "message": "Fix the issue with the dangling pointer at shutdown\n\nThe change is to ensure the allocated memory in each \nelement of the linked list plus the element itself\nis safely released at the shutdown of SCC.\n\nFixes: #8140\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}, "afterCommit": {"oid": "99d34332bcdb61f1e5bc8a1a32124084119f91bf", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/99d34332bcdb61f1e5bc8a1a32124084119f91bf", "committedDate": "2020-01-14T04:45:20Z", "message": "Fix the issue with the dangling pointer at shutdown\n\nThe change is to ensure the allocated memory in each \nelement of the linked list plus the element itself\nis safely released at the shutdown of SCC.\n\nFixes: #8140\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyMzE1ODMw", "url": "https://github.com/eclipse-openj9/openj9/pull/8295#pullrequestreview-342315830", "createdAt": "2020-01-14T06:40:36Z", "commit": {"oid": "99d34332bcdb61f1e5bc8a1a32124084119f91bf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwNjo0MDozN1rOFdNXwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwNjo0MDozN1rOFdNXwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjE3MjA5OA==", "bodyText": "Can this line be moved before the call to cleanup()?   Fetching the next before doing the cleanup ensures that future changes to cleanup don't mess this up", "url": "https://github.com/eclipse-openj9/openj9/pull/8295#discussion_r366172098", "createdAt": "2020-01-14T06:40:37Z", "author": {"login": "DanHeidinga"}, "path": "runtime/shared_common/CacheMap.cpp", "diffHunk": "@@ -375,11 +375,12 @@ SH_CacheMap::cleanup(J9VMThread* currentThread)\n \t}\n \twhile (theCC) {\n \t\ttheCC->cleanup(currentThread);\n-\t\ttheCC = theCC->getNext();\n+\t\tSH_CompositeCacheImpl* nextCC = theCC->getNext();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99d34332bcdb61f1e5bc8a1a32124084119f91bf"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57c54a1222974395d0311c4106fc2bdd3b5d29b3", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/57c54a1222974395d0311c4106fc2bdd3b5d29b3", "committedDate": "2020-01-14T14:06:32Z", "message": "Fix the issue with the dangling pointer at shutdown\n\nThe change is to ensure the allocated memory in each \nelement of the linked list plus the element itself\nis safely released at the shutdown of SCC.\n\nFixes: #8140\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "99d34332bcdb61f1e5bc8a1a32124084119f91bf", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/99d34332bcdb61f1e5bc8a1a32124084119f91bf", "committedDate": "2020-01-14T04:45:20Z", "message": "Fix the issue with the dangling pointer at shutdown\n\nThe change is to ensure the allocated memory in each \nelement of the linked list plus the element itself\nis safely released at the shutdown of SCC.\n\nFixes: #8140\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}, "afterCommit": {"oid": "57c54a1222974395d0311c4106fc2bdd3b5d29b3", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/57c54a1222974395d0311c4106fc2bdd3b5d29b3", "committedDate": "2020-01-14T14:06:32Z", "message": "Fix the issue with the dangling pointer at shutdown\n\nThe change is to ensure the allocated memory in each \nelement of the linked list plus the element itself\nis safely released at the shutdown of SCC.\n\nFixes: #8140\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyNTYyNjE3", "url": "https://github.com/eclipse-openj9/openj9/pull/8295#pullrequestreview-342562617", "createdAt": "2020-01-14T14:16:36Z", "commit": {"oid": "57c54a1222974395d0311c4106fc2bdd3b5d29b3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyNzUxMjg5", "url": "https://github.com/eclipse-openj9/openj9/pull/8295#pullrequestreview-342751289", "createdAt": "2020-01-14T18:38:10Z", "commit": {"oid": "57c54a1222974395d0311c4106fc2bdd3b5d29b3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyNzYxMzg5", "url": "https://github.com/eclipse-openj9/openj9/pull/8295#pullrequestreview-342761389", "createdAt": "2020-01-14T18:53:47Z", "commit": {"oid": "57c54a1222974395d0311c4106fc2bdd3b5d29b3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 850, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}