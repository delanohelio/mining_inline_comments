{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzNDY3MTI5", "number": 9701, "title": "Mac: set compatibility and current version of dylib's to 1.0.0", "bodyText": "For compatibility with OpenJDK.\nRemoved obsolete -install_name setting for j9thr29.dylib since this is\nset by OMR.\nhttps://github.com/eclipse/omr/blob/master/omrmakefiles/rules.osx.mk#L125\nFixes #9676", "createdAt": "2020-05-26T21:13:59Z", "url": "https://github.com/eclipse-openj9/openj9/pull/9701", "merged": true, "mergeCommit": {"oid": "7f9ac94d69d250ba88fa57dc2292f28511a879bb"}, "closed": true, "closedAt": "2020-05-27T21:14:43Z", "author": {"login": "pshipton"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclL0pAAFqTQxODcwMjkzNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABclf0aRgFqTQxOTYwNzk0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NzAyOTM0", "url": "https://github.com/eclipse-openj9/openj9/pull/9701#pullrequestreview-418702934", "createdAt": "2020-05-26T21:47:44Z", "commit": {"oid": "7f6a8da6f02510e6429fedff8c8ea9a36aebca26"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQyMTo0Nzo0NFrOGaxeDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQyMTo0Nzo0NFrOGaxeDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDcyNjY3MA==", "bodyText": "if you change this to\nset(CMAKE_SHARED_LINKER_FLAGS \"${CMAKE_SHARED_LINKER_FLAGS} -Wl,-compatibility_version,1.0.0,-current_version,1.0.0\" )  I think you would get something which works. I'll do some digging to see if there is a more natural way to do this in cmake, but this should work for now.", "url": "https://github.com/eclipse-openj9/openj9/pull/9701#discussion_r430726670", "createdAt": "2020-05-26T21:47:44Z", "author": {"login": "dnakamura"}, "path": "runtime/cmake/platform/os/osx.cmake", "diffHunk": "@@ -0,0 +1,24 @@\n+################################################################################\n+# Copyright (c) 2020, 2020 IBM Corp. and others\n+#\n+# This program and the accompanying materials are made available under\n+# the terms of the Eclipse Public License 2.0 which accompanies this\n+# distribution and is available at https://www.eclipse.org/legal/epl-2.0/\n+# or the Apache License, Version 2.0 which accompanies this distribution and\n+# is available at https://www.apache.org/licenses/LICENSE-2.0.\n+#\n+# This Source Code may also be made available under the following\n+# Secondary Licenses when the conditions for such availability set\n+# forth in the Eclipse Public License, v. 2.0 are satisfied: GNU\n+# General Public License, version 2 with the GNU Classpath\n+# Exception [1] and GNU General Public License, version 2 with the\n+# OpenJDK Assembly Exception [2].\n+#\n+# [1] https://www.gnu.org/software/classpath/license.html\n+# [2] http://openjdk.java.net/legal/assembly-exception.html\n+#\n+# SPDX-License-Identifier: EPL-2.0 OR Apache-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR LicenseRef-GPL-2.0 WITH Assembly-exception\n+################################################################################\n+\n+# set OpenJ9 library versions\n+set(LDFLAGS \"${LDFLAGS} -compatibility_version 1.0.0 -current_version 1.0.0\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7f6a8da6f02510e6429fedff8c8ea9a36aebca26"}, "originalPosition": 24}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7f6a8da6f02510e6429fedff8c8ea9a36aebca26", "author": {"user": {"login": "pshipton", "name": "Peter Shipton"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/7f6a8da6f02510e6429fedff8c8ea9a36aebca26", "committedDate": "2020-05-26T21:12:52Z", "message": "Mac: set compatibility and current version of dylib's to 1.0.0\n\nFor compatibility with OpenJDK\n\n[ci skip]\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>"}, "afterCommit": {"oid": "02d58ddc1ff3e778b1968e8ca31c500495bb55ba", "author": {"user": {"login": "pshipton", "name": "Peter Shipton"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/02d58ddc1ff3e778b1968e8ca31c500495bb55ba", "committedDate": "2020-05-26T21:59:59Z", "message": "Mac: set compatibility and current version of dylib's to 1.0.0\n\nFor compatibility with OpenJDK\n\n[ci skip]\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "02d58ddc1ff3e778b1968e8ca31c500495bb55ba", "author": {"user": {"login": "pshipton", "name": "Peter Shipton"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/02d58ddc1ff3e778b1968e8ca31c500495bb55ba", "committedDate": "2020-05-26T21:59:59Z", "message": "Mac: set compatibility and current version of dylib's to 1.0.0\n\nFor compatibility with OpenJDK\n\n[ci skip]\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>"}, "afterCommit": {"oid": "c86fe9c5f0f76f89800f573d268c6c9e24e9a17e", "author": {"user": {"login": "pshipton", "name": "Peter Shipton"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c86fe9c5f0f76f89800f573d268c6c9e24e9a17e", "committedDate": "2020-05-27T18:52:12Z", "message": "Mac: set compatibility and current version of dylib's to 1.0.0\n\nFor compatibility with OpenJDK\n\n[ci skip]\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c86fe9c5f0f76f89800f573d268c6c9e24e9a17e", "author": {"user": {"login": "pshipton", "name": "Peter Shipton"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c86fe9c5f0f76f89800f573d268c6c9e24e9a17e", "committedDate": "2020-05-27T18:52:12Z", "message": "Mac: set compatibility and current version of dylib's to 1.0.0\n\nFor compatibility with OpenJDK\n\n[ci skip]\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>"}, "afterCommit": {"oid": "db3616bf32bbfb5f018851fd0f5c990b89f59af5", "author": {"user": {"login": "pshipton", "name": "Peter Shipton"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/db3616bf32bbfb5f018851fd0f5c990b89f59af5", "committedDate": "2020-05-27T19:03:44Z", "message": "Mac: set compatibility and current version of dylib's to 1.0.0\n\nFor compatibility with OpenJDK\n\n[ci skip]\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "db3616bf32bbfb5f018851fd0f5c990b89f59af5", "author": {"user": {"login": "pshipton", "name": "Peter Shipton"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/db3616bf32bbfb5f018851fd0f5c990b89f59af5", "committedDate": "2020-05-27T19:03:44Z", "message": "Mac: set compatibility and current version of dylib's to 1.0.0\n\nFor compatibility with OpenJDK\n\n[ci skip]\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>"}, "afterCommit": {"oid": "f8a04923de62c86b8d79e3352a85c41cb493aeee", "author": {"user": {"login": "pshipton", "name": "Peter Shipton"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/f8a04923de62c86b8d79e3352a85c41cb493aeee", "committedDate": "2020-05-27T19:20:45Z", "message": "Mac: set compatibility and current version of dylib's to 1.0.0\n\nFor compatibility with OpenJDK\n\n[ci skip]\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f8a04923de62c86b8d79e3352a85c41cb493aeee", "author": {"user": {"login": "pshipton", "name": "Peter Shipton"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/f8a04923de62c86b8d79e3352a85c41cb493aeee", "committedDate": "2020-05-27T19:20:45Z", "message": "Mac: set compatibility and current version of dylib's to 1.0.0\n\nFor compatibility with OpenJDK\n\n[ci skip]\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>"}, "afterCommit": {"oid": "e3e0885c53372bb4f0fa183731156e402dabfde5", "author": {"user": {"login": "pshipton", "name": "Peter Shipton"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e3e0885c53372bb4f0fa183731156e402dabfde5", "committedDate": "2020-05-27T19:58:19Z", "message": "Mac: set compatibility and current version of dylib's to 1.0.0\n\nFor compatibility with OpenJDK\n\n[ci skip]\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NTk4MTM4", "url": "https://github.com/eclipse-openj9/openj9/pull/9701#pullrequestreview-419598138", "createdAt": "2020-05-27T20:51:09Z", "commit": {"oid": "e3e0885c53372bb4f0fa183731156e402dabfde5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMDo1MTowOVrOGbcp4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMDo1MTowOVrOGbcp4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQzNDIxMA==", "bodyText": "All of this should be removed: the -install_name option is superseded by OMR (e.g. here) and the version options are handled by eclipse/omr#5251.", "url": "https://github.com/eclipse-openj9/openj9/pull/9701#discussion_r431434210", "createdAt": "2020-05-27T20:51:09Z", "author": {"login": "keithc-ca"}, "path": "runtime/thread/threadshared.mk.ftl", "diffHunk": "@@ -95,6 +95,7 @@ endif # Linux\n \n ifeq (osx,$(OMR_HOST_OS))\n GLOBAL_LDFLAGS += -install_name lib$(MODULE_NAME).dylib\n+GLOBAL_LDFLAGS += -compatibility_version 1.0.0 -current_version 1.0.0\n endif # OSX", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3e0885c53372bb4f0fa183731156e402dabfde5"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NTk4OTI1", "url": "https://github.com/eclipse-openj9/openj9/pull/9701#pullrequestreview-419598925", "createdAt": "2020-05-27T20:52:17Z", "commit": {"oid": "e3e0885c53372bb4f0fa183731156e402dabfde5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMDo1MjoxOFrOGbcsEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMDo1MjoxOFrOGbcsEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQzNDc2OQ==", "bodyText": "This change will not be necessary once eclipse/omr#5251 lands.", "url": "https://github.com/eclipse-openj9/openj9/pull/9701#discussion_r431434769", "createdAt": "2020-05-27T20:52:18Z", "author": {"login": "keithc-ca"}, "path": "runtime/hookable/hookableshared.mk.ftl", "diffHunk": "@@ -61,6 +61,10 @@ EXPORT_FUNCTIONS_FILE := $(HOOKABLE_SRCDIR)hookable.exportlist\n MODULE_STATIC_LIBS += j9utilcore j9pool\n MODULE_SHARED_LIBS += j9thr${uma.buildinfo.version.major}${uma.buildinfo.version.minor}\n \n+ifeq (osx,$(OMR_HOST_OS))\n+GLOBAL_LDFLAGS += -compatibility_version 1.0.0 -current_version 1.0.0\n+endif # OSX\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e3e0885c53372bb4f0fa183731156e402dabfde5"}, "originalPosition": 14}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e3e0885c53372bb4f0fa183731156e402dabfde5", "author": {"user": {"login": "pshipton", "name": "Peter Shipton"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e3e0885c53372bb4f0fa183731156e402dabfde5", "committedDate": "2020-05-27T19:58:19Z", "message": "Mac: set compatibility and current version of dylib's to 1.0.0\n\nFor compatibility with OpenJDK\n\n[ci skip]\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>"}, "afterCommit": {"oid": "9c62c83420eda663853e1500e583fe9efa497baf", "author": {"user": {"login": "pshipton", "name": "Peter Shipton"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/9c62c83420eda663853e1500e583fe9efa497baf", "committedDate": "2020-05-27T20:55:46Z", "message": "Mac: set compatibility and current version of dylib's to 1.0.0\n\nFor compatibility with OpenJDK\n\n[ci skip]\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9c62c83420eda663853e1500e583fe9efa497baf", "author": {"user": {"login": "pshipton", "name": "Peter Shipton"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/9c62c83420eda663853e1500e583fe9efa497baf", "committedDate": "2020-05-27T20:55:46Z", "message": "Mac: set compatibility and current version of dylib's to 1.0.0\n\nFor compatibility with OpenJDK\n\n[ci skip]\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>"}, "afterCommit": {"oid": "64c2dde9393345fff49ff4006b46051adce5f5cb", "author": {"user": {"login": "pshipton", "name": "Peter Shipton"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/64c2dde9393345fff49ff4006b46051adce5f5cb", "committedDate": "2020-05-27T21:00:05Z", "message": "Mac: set compatibility and current version of dylib's to 1.0.0\n\nFor compatibility with OpenJDK.\nRemoved obsolete -install_name setting for j9thr29.dylib since this is\nset by OMR.\nhttps://github.com/eclipse/omr/blob/master/omrmakefiles/rules.osx.mk#L125\n\n[ci skip]\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NjA1NzE0", "url": "https://github.com/eclipse-openj9/openj9/pull/9701#pullrequestreview-419605714", "createdAt": "2020-05-27T21:02:09Z", "commit": {"oid": "64c2dde9393345fff49ff4006b46051adce5f5cb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMTowMjowOVrOGbdAlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QyMTowMjowOVrOGbdAlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ0MDAyMQ==", "bodyText": "This file isn't changing, so the copyright date need not change.", "url": "https://github.com/eclipse-openj9/openj9/pull/9701#discussion_r431440021", "createdAt": "2020-05-27T21:02:09Z", "author": {"login": "keithc-ca"}, "path": "runtime/hookable/hookableshared.mk.ftl", "diffHunk": "@@ -1,5 +1,5 @@\n ###############################################################################\n-# Copyright (c) 2016, 2017 IBM Corp. and others\n+# Copyright (c) 2016, 2020 IBM Corp. and others", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64c2dde9393345fff49ff4006b46051adce5f5cb"}, "originalPosition": 3}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0f22c8e90ccaf9c3231eec92634ddff96c11574", "author": {"user": {"login": "pshipton", "name": "Peter Shipton"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/a0f22c8e90ccaf9c3231eec92634ddff96c11574", "committedDate": "2020-05-27T21:04:18Z", "message": "Mac: set compatibility and current version of dylib's to 1.0.0\n\nFor compatibility with OpenJDK.\nRemoved obsolete -install_name setting for j9thr29.dylib since this is\nset by OMR.\nhttps://github.com/eclipse/omr/blob/master/omrmakefiles/rules.osx.mk#L125\n\n[ci skip]\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "64c2dde9393345fff49ff4006b46051adce5f5cb", "author": {"user": {"login": "pshipton", "name": "Peter Shipton"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/64c2dde9393345fff49ff4006b46051adce5f5cb", "committedDate": "2020-05-27T21:00:05Z", "message": "Mac: set compatibility and current version of dylib's to 1.0.0\n\nFor compatibility with OpenJDK.\nRemoved obsolete -install_name setting for j9thr29.dylib since this is\nset by OMR.\nhttps://github.com/eclipse/omr/blob/master/omrmakefiles/rules.osx.mk#L125\n\n[ci skip]\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>"}, "afterCommit": {"oid": "a0f22c8e90ccaf9c3231eec92634ddff96c11574", "author": {"user": {"login": "pshipton", "name": "Peter Shipton"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/a0f22c8e90ccaf9c3231eec92634ddff96c11574", "committedDate": "2020-05-27T21:04:18Z", "message": "Mac: set compatibility and current version of dylib's to 1.0.0\n\nFor compatibility with OpenJDK.\nRemoved obsolete -install_name setting for j9thr29.dylib since this is\nset by OMR.\nhttps://github.com/eclipse/omr/blob/master/omrmakefiles/rules.osx.mk#L125\n\n[ci skip]\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NjA3OTQ0", "url": "https://github.com/eclipse-openj9/openj9/pull/9701#pullrequestreview-419607944", "createdAt": "2020-05-27T21:05:35Z", "commit": {"oid": "a0f22c8e90ccaf9c3231eec92634ddff96c11574"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 770, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}