{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2NDE3MjY2", "number": 10121, "title": "Support JDK15 new field java.lang.reflect.Field.trustedFinal", "bodyText": "Set it to TRUE if the field is static & final.\nSigned-off-by: Jason Feng fengj@ca.ibm.com", "createdAt": "2020-07-08T18:38:19Z", "url": "https://github.com/eclipse-openj9/openj9/pull/10121", "merged": true, "mergeCommit": {"oid": "b824c30229dba10e27a83ea129dc90832b2f57ad"}, "closed": true, "closedAt": "2020-07-09T15:37:50Z", "author": {"login": "JasonFengJ9"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczGXNWAFqTQ0NTI2MjExMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABczMz6bgBqjM1MjkxMzUzMjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1MjYyMTEy", "url": "https://github.com/eclipse-openj9/openj9/pull/10121#pullrequestreview-445262112", "createdAt": "2020-07-09T03:13:47Z", "commit": {"oid": "7938b1112fc50c032c73ddd103d77e30447c1fca"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQwMzoxMzo0N1rOGvANYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQwMzoyMDozOVrOGvAUEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTkzOTY4Mg==", "bodyText": "The ANY bit test macro is defined as:\n#define OMR_ARE_ANY_BITS_SET(value, bits) (0 != ((value) & (bits)))\n\nwhich means this can be a single test.  Though, I think it should be ALL_BITS, not ANY:\n#define OMR_ARE_ALL_BITS_SET(value, bits) ((bits) == ((value) & (bits)))\n\nAs we want to test for both FINAL and STATIC:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tif (J9_ARE_ANY_BITS_SET(j9FieldID->field->modifiers, J9AccFinal)\n          \n          \n            \n            \t\t&& J9_ARE_ANY_BITS_SET(j9FieldID->field->modifiers, J9AccStatic)\n          \n          \n            \n            \tif (J9_ARE_ALL_BITS_SET(j9FieldID->field->modifiers, J9AccFinal | J9AccStatic)", "url": "https://github.com/eclipse-openj9/openj9/pull/10121#discussion_r451939682", "createdAt": "2020-07-09T03:13:47Z", "author": {"login": "DanHeidinga"}, "path": "runtime/jcl/common/reflecthelp.c", "diffHunk": "@@ -829,6 +829,13 @@ createField(struct J9VMThread *vmThread, jfieldID fieldID)\n \tJ9VMJAVALANGREFLECTFIELD_SET_DECLARINGCLASS(vmThread, fieldObject, J9VM_J9CLASS_TO_HEAPCLASS(j9FieldID->declaringClass));\n #if defined(USE_SUN_REFLECT)\n \tJ9VMJAVALANGREFLECTFIELD_SET_MODIFIERS(vmThread, fieldObject, j9FieldID->field->modifiers & CFR_FIELD_ACCESS_MASK);\n+#if JAVA_SPEC_VERSION >= 15\n+\tif (J9_ARE_ANY_BITS_SET(j9FieldID->field->modifiers, J9AccFinal)\n+\t\t&& J9_ARE_ANY_BITS_SET(j9FieldID->field->modifiers, J9AccStatic)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7938b1112fc50c032c73ddd103d77e30447c1fca"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTk0MTM5NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\tJ9VMJAVALANGREFLECTFIELD_SET_TRUSTEDFINAL(vmThread, fieldObject, TRUE);\n          \n          \n            \n            \t\tJ9VMJAVALANGREFLECTFIELD_SET_TRUSTEDFINAL(vmThread, fieldObject, JNI_TRUE);", "url": "https://github.com/eclipse-openj9/openj9/pull/10121#discussion_r451941395", "createdAt": "2020-07-09T03:20:39Z", "author": {"login": "DanHeidinga"}, "path": "runtime/jcl/common/reflecthelp.c", "diffHunk": "@@ -829,6 +829,13 @@ createField(struct J9VMThread *vmThread, jfieldID fieldID)\n \tJ9VMJAVALANGREFLECTFIELD_SET_DECLARINGCLASS(vmThread, fieldObject, J9VM_J9CLASS_TO_HEAPCLASS(j9FieldID->declaringClass));\n #if defined(USE_SUN_REFLECT)\n \tJ9VMJAVALANGREFLECTFIELD_SET_MODIFIERS(vmThread, fieldObject, j9FieldID->field->modifiers & CFR_FIELD_ACCESS_MASK);\n+#if JAVA_SPEC_VERSION >= 15\n+\tif (J9_ARE_ANY_BITS_SET(j9FieldID->field->modifiers, J9AccFinal)\n+\t\t&& J9_ARE_ANY_BITS_SET(j9FieldID->field->modifiers, J9AccStatic)\n+\t) {\n+\t\tJ9VMJAVALANGREFLECTFIELD_SET_TRUSTEDFINAL(vmThread, fieldObject, TRUE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7938b1112fc50c032c73ddd103d77e30447c1fca"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13fdbc88846a26d80406152785b92bdaa5e63b61", "author": {"user": {"login": "JasonFengJ9", "name": "Jason Feng"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/13fdbc88846a26d80406152785b92bdaa5e63b61", "committedDate": "2020-07-09T10:51:20Z", "message": "Support JDK15 new field java.lang.reflect.Field.trustedFinal\n\nSet it to TRUE if the field is static & final.\n\nSigned-off-by: Jason Feng <fengj@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7938b1112fc50c032c73ddd103d77e30447c1fca", "author": {"user": {"login": "JasonFengJ9", "name": "Jason Feng"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/7938b1112fc50c032c73ddd103d77e30447c1fca", "committedDate": "2020-07-08T18:35:27Z", "message": "Support JDK15 new field java.lang.reflect.Field.trustedFinal\n\nSet it to TRUE if the field is static & final.\n\nSigned-off-by: Jason Feng <fengj@ca.ibm.com>"}, "afterCommit": {"oid": "13fdbc88846a26d80406152785b92bdaa5e63b61", "author": {"user": {"login": "JasonFengJ9", "name": "Jason Feng"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/13fdbc88846a26d80406152785b92bdaa5e63b61", "committedDate": "2020-07-09T10:51:20Z", "message": "Support JDK15 new field java.lang.reflect.Field.trustedFinal\n\nSet it to TRUE if the field is static & final.\n\nSigned-off-by: Jason Feng <fengj@ca.ibm.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 541, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}