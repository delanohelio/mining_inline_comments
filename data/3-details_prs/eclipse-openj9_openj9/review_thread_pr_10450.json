{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDczMjE3MjY5", "number": 10450, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMzo0Nzo0M1rOEc0Dqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxNDo0NjozN1rOEdQaOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk4NjQ4NDkwOnYy", "diffSide": "RIGHT", "path": "jcl/src/openj9.gpu/share/classes/com/ibm/gpu/Maths.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMzo0Nzo0M1rOHHkh6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMzo0Nzo0M1rOHHkh6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzcwMDU4Nw==", "bodyText": "I only see static methods on this class.  Why provide a public constructor?  I'd be tempted to make the class final as well.", "url": "https://github.com/eclipse-openj9/openj9/pull/10450#discussion_r477700587", "createdAt": "2020-08-26T23:47:43Z", "author": {"login": "DanHeidinga"}, "path": "jcl/src/openj9.gpu/share/classes/com/ibm/gpu/Maths.java", "diffHunk": "@@ -32,6 +32,13 @@\n  */\n public class Maths {\n \n+\t/**\n+\t * Construct a new instance.\n+\t */\n+\tpublic Maths() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1ee78e06c1ac5b699379cded2e1ec62af57b353"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk4NjQ5NTcwOnYy", "diffSide": "RIGHT", "path": "jcl/src/openj9.gpu/share/classes/com/ibm/gpu/Version.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMzo0OTowMVrOHHkpWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMzo0OTowMVrOHHkpWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzcwMjQ4OA==", "bodyText": "Is there a reason to have a public constructor?  I also wonder about making this final", "url": "https://github.com/eclipse-openj9/openj9/pull/10450#discussion_r477702488", "createdAt": "2020-08-26T23:49:01Z", "author": {"login": "DanHeidinga"}, "path": "jcl/src/openj9.gpu/share/classes/com/ibm/gpu/Version.java", "diffHunk": "@@ -29,6 +29,13 @@\n  */\n public class Version {\n \n+\t/**\n+\t * Construct a new instance.\n+\t */\n+\tpublic Version() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1ee78e06c1ac5b699379cded2e1ec62af57b353"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5MDc3MzU3OnYy", "diffSide": "RIGHT", "path": "jcl/src/openj9.jvm/share/classes/com/ibm/jvm/Stats.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxMzoyODozMFrOHIQYFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxMzoyODozMFrOHIQYFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQxODk2Ng==", "bodyText": "The variables are automatically initialized to zero without adding the bytecodes to explicitly do this. We've removed code like this from other places in the past to (slightly) reduce the code size and improve execution speed.", "url": "https://github.com/eclipse-openj9/openj9/pull/10450#discussion_r478418966", "createdAt": "2020-08-27T13:28:30Z", "author": {"login": "pshipton"}, "path": "jcl/src/openj9.jvm/share/classes/com/ibm/jvm/Stats.java", "diffHunk": "@@ -21,33 +20,49 @@\n  *\n  * SPDX-License-Identifier: EPL-2.0 OR Apache-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR LicenseRef-GPL-2.0 WITH Assembly-exception\n  *******************************************************************************/\n-\n package com.ibm.jvm;\n \n /**\n  * This class is used provide the following java heap and system statistics:\n- * <ul> committed heap memory\n- * <ul> used heap memory\n- * <ul> max heap memory\n- * <ul> softmx heap memory\n- * <ul> free physical memory\n- * <ul> total physical memory\n- * All this info is retrieved without any allocation of new objects\n+ * <ul>\n+ * <li>committed heap memory</li>\n+ * <li>used heap memory</li>\n+ * <li>max heap memory</li>\n+ * <li>softmx heap memory</li>\n+ * <li>free physical memory</li>\n+ * <li>total physical memory</li>\n+ * </ul>\n+ * All this info is retrieved without any allocation of new objects.\n  */\n public class Stats {\n-\tprivate long committedHeap = 0L;\n-\tprivate long usedHeap = 0L;\n-\tprivate long maxHeap = 0L;\n-\tprivate long softmxHeap = 0L;\n-\tprivate long freePhysicalMem = 0L;\n-\tprivate long totPhysicalMem = 0L;\n-\tprivate double sysLoadAvg = 0.0;\n-\tprivate long cpuTime = 0L;\n+\tprivate long committedHeap;\n+\tprivate long usedHeap;\n+\tprivate long maxHeap;\n+\tprivate long softmxHeap;\n+\tprivate long freePhysicalMem;\n+\tprivate long totPhysicalMem;\n+\tprivate double sysLoadAvg;\n+\tprivate long cpuTime;\n+\n+\t/**\n+\t * Construct a new instance.\n+\t */\n+\tpublic Stats() {\n+\t\tsuper();\n+\t\tthis.committedHeap = 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e1ee78e06c1ac5b699379cded2e1ec62af57b353"}, "originalPosition": 58}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5MTEyMzI5OnYy", "diffSide": "RIGHT", "path": "jcl/src/openj9.gpu/share/classes/com/ibm/gpu/Maths.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxNDo0NToxM1rOHITw-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxNjoxMDo0NlrOHIXdXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQ3NDQ4OA==", "bodyText": "I'm iffy on duplicating the class definition.  How do you feel about something like:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            /*[IF Java16]*/\n          \n          \n            \n            public final class Maths {\n          \n          \n            \n            \n          \n          \n            \n            \tprivate Maths() {\n          \n          \n            \n            \t\tsuper();\n          \n          \n            \n            \t}\n          \n          \n            \n            /*[ELSE] Java16\n          \n          \n            \n            public class Maths {\n          \n          \n            \n            /*[ENDIF] Java16*/\n          \n          \n            \n            public \n          \n          \n            \n            /*[IF Java16]*/\n          \n          \n            \n            final \n          \n          \n            \n            /*[ENDIF] Java16*/\n          \n          \n            \n            class Maths {\n          \n          \n            \n            \n          \n          \n            \n            /*[IF Java16]*/\n          \n          \n            \n            \tprivate Maths() {\n          \n          \n            \n            \t\tsuper();\n          \n          \n            \n            \t}\n          \n          \n            \n            /*[ENDIF] Java16*/", "url": "https://github.com/eclipse-openj9/openj9/pull/10450#discussion_r478474488", "createdAt": "2020-08-27T14:45:13Z", "author": {"login": "DanHeidinga"}, "path": "jcl/src/openj9.gpu/share/classes/com/ibm/gpu/Maths.java", "diffHunk": "@@ -30,7 +30,15 @@\n  * on any connected CUDA GPU. A successful sort operation\n  * results in the array being sorted in ascending order.\n  */\n+/*[IF Java16]*/\n+public final class Maths {\n+\n+\tprivate Maths() {\n+\t\tsuper();\n+\t}\n+/*[ELSE] Java16\n public class Maths {\n+/*[ENDIF] Java16*/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "027af0651c4789e9b2f9d7cfb6d46e9df3271408"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQ4MzczMg==", "bodyText": "I tried that first but rejected it for two reasons:\n\nit involves repeating the condition\nI didn't like the formatted result (which ends up in src.zip):\n\npublic\nfinal\nclass Maths {", "url": "https://github.com/eclipse-openj9/openj9/pull/10450#discussion_r478483732", "createdAt": "2020-08-27T14:57:20Z", "author": {"login": "keithc-ca"}, "path": "jcl/src/openj9.gpu/share/classes/com/ibm/gpu/Maths.java", "diffHunk": "@@ -30,7 +30,15 @@\n  * on any connected CUDA GPU. A successful sort operation\n  * results in the array being sorted in ascending order.\n  */\n+/*[IF Java16]*/\n+public final class Maths {\n+\n+\tprivate Maths() {\n+\t\tsuper();\n+\t}\n+/*[ELSE] Java16\n public class Maths {\n+/*[ENDIF] Java16*/", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQ3NDQ4OA=="}, "originalCommit": {"oid": "027af0651c4789e9b2f9d7cfb6d46e9df3271408"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODUzNTAwNA==", "bodyText": "Neither is great.   I don't have a firm objection.", "url": "https://github.com/eclipse-openj9/openj9/pull/10450#discussion_r478535004", "createdAt": "2020-08-27T16:10:46Z", "author": {"login": "DanHeidinga"}, "path": "jcl/src/openj9.gpu/share/classes/com/ibm/gpu/Maths.java", "diffHunk": "@@ -30,7 +30,15 @@\n  * on any connected CUDA GPU. A successful sort operation\n  * results in the array being sorted in ascending order.\n  */\n+/*[IF Java16]*/\n+public final class Maths {\n+\n+\tprivate Maths() {\n+\t\tsuper();\n+\t}\n+/*[ELSE] Java16\n public class Maths {\n+/*[ENDIF] Java16*/", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQ3NDQ4OA=="}, "originalCommit": {"oid": "027af0651c4789e9b2f9d7cfb6d46e9df3271408"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5MTEzMDE5OnYy", "diffSide": "RIGHT", "path": "jcl/src/openj9.gpu/share/classes/com/ibm/gpu/Version.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxNDo0NjozN1rOHIT1Gw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxNDo0NjozN1rOHIT1Gw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQ3NTU0Nw==", "bodyText": "Same question about formatting as above.  I won't repeat it here but we should do the same with all copies of the pattern", "url": "https://github.com/eclipse-openj9/openj9/pull/10450#discussion_r478475547", "createdAt": "2020-08-27T14:46:37Z", "author": {"login": "DanHeidinga"}, "path": "jcl/src/openj9.gpu/share/classes/com/ibm/gpu/Version.java", "diffHunk": "@@ -27,7 +27,15 @@\n  * The main method can be launched from the command line, which will print\n  * the current level to stdout.\n  */\n+/*[IF Java16]*/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "027af0651c4789e9b2f9d7cfb6d46e9df3271408"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4731, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}