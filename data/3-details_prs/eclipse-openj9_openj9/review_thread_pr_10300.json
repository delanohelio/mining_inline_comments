{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU5MzE0Nzg1", "number": 10300, "reviewThreads": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxMzoxMTowN1rOEVaB5g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxODo0NjoyMlrOEV8yJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwODgyMDIyOnYy", "diffSide": "RIGHT", "path": "runtime/bcutil/ROMClassCreationContext.hpp", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxMzoxMTowN1rOG8I_Yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxODozNDoxMlrOG8Vx1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTcxNTA0Mg==", "bodyText": "Hidden classes have the same lifecycle as the classloader they are loaded in.  Why do they need UTF8 interning disabled?", "url": "https://github.com/eclipse-openj9/openj9/pull/10300#discussion_r465715042", "createdAt": "2020-08-05T13:11:07Z", "author": {"login": "DanHeidinga"}, "path": "runtime/bcutil/ROMClassCreationContext.hpp", "diffHunk": "@@ -162,7 +162,7 @@ class ROMClassCreationContext\n \t\t\t_loadLocation = localBuffer->loadLocationType;\n \t\t\t_patchMap = localBuffer->patchMap;\n \t\t\t_sharedStringInternTable = _javaVM->sharedInvariantInternTable;\n-\t\t\t_interningEnabled = J9_ARE_ALL_BITS_SET(_bcuFlags, BCU_ENABLE_INVARIANT_INTERNING) && J9_ARE_NO_BITS_SET(_findClassFlags, J9_FINDCLASS_FLAG_ANON);\n+\t\t\t_interningEnabled = J9_ARE_ALL_BITS_SET(_bcuFlags, BCU_ENABLE_INVARIANT_INTERNING) && J9_ARE_NO_BITS_SET(_findClassFlags, J9_FINDCLASS_FLAG_ANON | J9_FINDCLASS_FLAG_HIDDEN);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a451f72c074a9e3d5a1daf07af3101738f57eb2"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkyNDU2NA==", "bodyText": "You are right. Intern should be enabled for hidden classes that have the same life cycle with its loader. As we set J9_FINDCLASS_FLAG_ANON for hidden classes that will be unloaded individually, it is not set for hidden classes that will be unloaded with its loaded. Checking J9_FINDCLASS_FLAG_ANON is enough. Updated.", "url": "https://github.com/eclipse-openj9/openj9/pull/10300#discussion_r465924564", "createdAt": "2020-08-05T18:34:12Z", "author": {"login": "hangshao0"}, "path": "runtime/bcutil/ROMClassCreationContext.hpp", "diffHunk": "@@ -162,7 +162,7 @@ class ROMClassCreationContext\n \t\t\t_loadLocation = localBuffer->loadLocationType;\n \t\t\t_patchMap = localBuffer->patchMap;\n \t\t\t_sharedStringInternTable = _javaVM->sharedInvariantInternTable;\n-\t\t\t_interningEnabled = J9_ARE_ALL_BITS_SET(_bcuFlags, BCU_ENABLE_INVARIANT_INTERNING) && J9_ARE_NO_BITS_SET(_findClassFlags, J9_FINDCLASS_FLAG_ANON);\n+\t\t\t_interningEnabled = J9_ARE_ALL_BITS_SET(_bcuFlags, BCU_ENABLE_INVARIANT_INTERNING) && J9_ARE_NO_BITS_SET(_findClassFlags, J9_FINDCLASS_FLAG_ANON | J9_FINDCLASS_FLAG_HIDDEN);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTcxNTA0Mg=="}, "originalCommit": {"oid": "5a451f72c074a9e3d5a1daf07af3101738f57eb2"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwODg1MDMyOnYy", "diffSide": "RIGHT", "path": "runtime/oti/vm_api.h", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxMzoxODo1NVrOG8JSHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxODozNTozNFrOG8V03Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTcxOTgzOA==", "bodyText": "Can you fill in this comment with content?  I know existing code does a poor job of this but new functions should get proper docs", "url": "https://github.com/eclipse-openj9/openj9/pull/10300#discussion_r465719838", "createdAt": "2020-08-05T13:18:55Z", "author": {"login": "DanHeidinga"}, "path": "runtime/oti/vm_api.h", "diffHunk": "@@ -1768,6 +1768,17 @@ hashClassTableFree(J9ClassLoader* classLoader);\n J9Class *\n hashClassTableAt(J9ClassLoader *classLoader, U_8 *className, UDATA classNameLength);\n \n+/**\n+* @brief", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a451f72c074a9e3d5a1daf07af3101738f57eb2"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkyNTM0MQ==", "bodyText": "Fixed.", "url": "https://github.com/eclipse-openj9/openj9/pull/10300#discussion_r465925341", "createdAt": "2020-08-05T18:35:34Z", "author": {"login": "hangshao0"}, "path": "runtime/oti/vm_api.h", "diffHunk": "@@ -1768,6 +1768,17 @@ hashClassTableFree(J9ClassLoader* classLoader);\n J9Class *\n hashClassTableAt(J9ClassLoader *classLoader, U_8 *className, UDATA classNameLength);\n \n+/**\n+* @brief", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTcxOTgzOA=="}, "originalCommit": {"oid": "5a451f72c074a9e3d5a1daf07af3101738f57eb2"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwODg3NDYzOnYy", "diffSide": "RIGHT", "path": "runtime/vm/KeyHashTable.c", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxMzoyNDo0OVrOG8JhDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxODozNTo1M1rOG8V1Zg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTcyMzY2Mw==", "bodyText": "Nitpick: changing the formatting like this makes the code slightly clearer as it removes an extra set of brackets and ensures there is no path that continues after this code\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tif (J9_ARE_ALL_BITS_SET(flag, HASHTABLE_FIND_FLAG_INCLUDE_HIDDEN)) {\n          \n          \n            \n            \t\t\t\treturn clazz;\n          \n          \n            \n            \t\t\t} else {\n          \n          \n            \n            \t\t\t\treturn NULL;\n          \n          \n            \n            \t\t\t}\n          \n          \n            \n            \t\t\tif (J9_ARE_ALL_BITS_SET(flag, HASHTABLE_FIND_FLAG_INCLUDE_HIDDEN)) {\n          \n          \n            \n            \t\t\t\treturn clazz;\n          \n          \n            \n            \t\t\t}\n          \n          \n            \n            \t\t\treturn NULL;", "url": "https://github.com/eclipse-openj9/openj9/pull/10300#discussion_r465723663", "createdAt": "2020-08-05T13:24:49Z", "author": {"login": "DanHeidinga"}, "path": "runtime/vm/KeyHashTable.c", "diffHunk": "@@ -286,12 +286,26 @@ hashClassTableAt(J9ClassLoader *classLoader, U_8 *className, UDATA classNameLeng\n \tif (NULL != result) {\n \t\tJ9Class *clazz = result->ramClass;\n \t\tAssert_VM_false(J9_ARE_ANY_BITS_SET((UDATA)clazz, J9_REQUIRED_CLASS_ALIGNMENT - 1));\n-\t\treturn clazz;\n+\t\tif (J9ROMCLASS_IS_HIDDEN(clazz->romClass)) {\n+\t\t\tif (J9_ARE_ALL_BITS_SET(flag, HASHTABLE_FIND_FLAG_INCLUDE_HIDDEN)) {\n+\t\t\t\treturn clazz;\n+\t\t\t} else {\n+\t\t\t\treturn NULL;\n+\t\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a451f72c074a9e3d5a1daf07af3101738f57eb2"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkyNTQ3OA==", "bodyText": "Fixed.", "url": "https://github.com/eclipse-openj9/openj9/pull/10300#discussion_r465925478", "createdAt": "2020-08-05T18:35:53Z", "author": {"login": "hangshao0"}, "path": "runtime/vm/KeyHashTable.c", "diffHunk": "@@ -286,12 +286,26 @@ hashClassTableAt(J9ClassLoader *classLoader, U_8 *className, UDATA classNameLeng\n \tif (NULL != result) {\n \t\tJ9Class *clazz = result->ramClass;\n \t\tAssert_VM_false(J9_ARE_ANY_BITS_SET((UDATA)clazz, J9_REQUIRED_CLASS_ALIGNMENT - 1));\n-\t\treturn clazz;\n+\t\tif (J9ROMCLASS_IS_HIDDEN(clazz->romClass)) {\n+\t\t\tif (J9_ARE_ALL_BITS_SET(flag, HASHTABLE_FIND_FLAG_INCLUDE_HIDDEN)) {\n+\t\t\t\treturn clazz;\n+\t\t\t} else {\n+\t\t\t\treturn NULL;\n+\t\t\t}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTcyMzY2Mw=="}, "originalCommit": {"oid": "5a451f72c074a9e3d5a1daf07af3101738f57eb2"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwODg3OTM2OnYy", "diffSide": "RIGHT", "path": "runtime/vm/KeyHashTable.c", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxMzoyNTo1NFrOG8JkAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxODozNjoxOFrOG8V2Tg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTcyNDQxNw==", "bodyText": "Given we're reserving a U_32 for the flags, let's call it flags so it's clear there may be others in the future\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            hashClassTableAtWithFlag(J9ClassLoader *classLoader, U_8 *className, UDATA classNameLength, U_32 flag)\n          \n          \n            \n            hashClassTableAtWithFlag(J9ClassLoader *classLoader, U_8 *className, UDATA classNameLength, U_32 flags)", "url": "https://github.com/eclipse-openj9/openj9/pull/10300#discussion_r465724417", "createdAt": "2020-08-05T13:25:54Z", "author": {"login": "DanHeidinga"}, "path": "runtime/vm/KeyHashTable.c", "diffHunk": "@@ -273,7 +273,7 @@ hashClassTableNew(J9JavaVM *javaVM, U_32 initialSize)\n }\n \n J9Class *\n-hashClassTableAt(J9ClassLoader *classLoader, U_8 *className, UDATA classNameLength)\n+hashClassTableAtWithFlag(J9ClassLoader *classLoader, U_8 *className, UDATA classNameLength, U_32 flag)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a451f72c074a9e3d5a1daf07af3101738f57eb2"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkyNTcxMA==", "bodyText": "Changed to flags.", "url": "https://github.com/eclipse-openj9/openj9/pull/10300#discussion_r465925710", "createdAt": "2020-08-05T18:36:18Z", "author": {"login": "hangshao0"}, "path": "runtime/vm/KeyHashTable.c", "diffHunk": "@@ -273,7 +273,7 @@ hashClassTableNew(J9JavaVM *javaVM, U_32 initialSize)\n }\n \n J9Class *\n-hashClassTableAt(J9ClassLoader *classLoader, U_8 *className, UDATA classNameLength)\n+hashClassTableAtWithFlag(J9ClassLoader *classLoader, U_8 *className, UDATA classNameLength, U_32 flag)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTcyNDQxNw=="}, "originalCommit": {"oid": "5a451f72c074a9e3d5a1daf07af3101738f57eb2"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwODg4OTIzOnYy", "diffSide": "RIGHT", "path": "runtime/vm/KeyHashTable.c", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxMzoyODowOVrOG8JqHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxODozNjozNlrOG8V2yw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTcyNTk4MA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            hashClassTableAtStringWithFlag(J9ClassLoader *classLoader, j9object_t stringObject, U_32 flag)\n          \n          \n            \n            hashClassTableAtStringWithFlag(J9ClassLoader *classLoader, j9object_t stringObject, U_32 flags)", "url": "https://github.com/eclipse-openj9/openj9/pull/10300#discussion_r465725980", "createdAt": "2020-08-05T13:28:09Z", "author": {"login": "DanHeidinga"}, "path": "runtime/vm/KeyHashTable.c", "diffHunk": "@@ -524,7 +538,7 @@ hashPkgTableNextDo(J9HashTableState *walkState)\n }\n \n J9Class *\n-hashClassTableAtString(J9ClassLoader *classLoader, j9object_t stringObject)\n+hashClassTableAtStringWithFlag(J9ClassLoader *classLoader, j9object_t stringObject, U_32 flag)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a451f72c074a9e3d5a1daf07af3101738f57eb2"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkyNTgzNQ==", "bodyText": "Fixed.", "url": "https://github.com/eclipse-openj9/openj9/pull/10300#discussion_r465925835", "createdAt": "2020-08-05T18:36:36Z", "author": {"login": "hangshao0"}, "path": "runtime/vm/KeyHashTable.c", "diffHunk": "@@ -524,7 +538,7 @@ hashPkgTableNextDo(J9HashTableState *walkState)\n }\n \n J9Class *\n-hashClassTableAtString(J9ClassLoader *classLoader, j9object_t stringObject)\n+hashClassTableAtStringWithFlag(J9ClassLoader *classLoader, j9object_t stringObject, U_32 flag)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTcyNTk4MA=="}, "originalCommit": {"oid": "5a451f72c074a9e3d5a1daf07af3101738f57eb2"}, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwODg5MDQwOnYy", "diffSide": "RIGHT", "path": "runtime/vm/KeyHashTable.c", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxMzoyODoyN1rOG8Jq6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxODozNjo0OFrOG8V3MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTcyNjE4NA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tif (J9_ARE_ALL_BITS_SET(flag, HASHTABLE_FIND_FLAG_INCLUDE_HIDDEN)) {\n          \n          \n            \n            \t\t\t\treturn clazz;\n          \n          \n            \n            \t\t\t} else {\n          \n          \n            \n            \t\t\t\treturn NULL;\n          \n          \n            \n            \t\t\t}\n          \n          \n            \n            \t\t\tif (J9_ARE_ALL_BITS_SET(flag, HASHTABLE_FIND_FLAG_INCLUDE_HIDDEN)) {\n          \n          \n            \n            \t\t\t\treturn clazz;\n          \n          \n            \n            \t\t\t}\n          \n          \n            \n            \t\t\treturn NULL;", "url": "https://github.com/eclipse-openj9/openj9/pull/10300#discussion_r465726184", "createdAt": "2020-08-05T13:28:27Z", "author": {"login": "DanHeidinga"}, "path": "runtime/vm/KeyHashTable.c", "diffHunk": "@@ -536,11 +550,25 @@ hashClassTableAtString(J9ClassLoader *classLoader, j9object_t stringObject)\n \tif (NULL != result) {\n \t\tJ9Class *clazz = result->ramClass;\n \t\tAssert_VM_false(J9_ARE_ANY_BITS_SET((UDATA)clazz, J9_REQUIRED_CLASS_ALIGNMENT - 1));\n-\t\treturn clazz;\n+\t\tif (J9ROMCLASS_IS_HIDDEN(clazz->romClass)) {\n+\t\t\tif (J9_ARE_ALL_BITS_SET(flag, HASHTABLE_FIND_FLAG_INCLUDE_HIDDEN)) {\n+\t\t\t\treturn clazz;\n+\t\t\t} else {\n+\t\t\t\treturn NULL;\n+\t\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a451f72c074a9e3d5a1daf07af3101738f57eb2"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkyNTkzNg==", "bodyText": "Fixed.", "url": "https://github.com/eclipse-openj9/openj9/pull/10300#discussion_r465925936", "createdAt": "2020-08-05T18:36:48Z", "author": {"login": "hangshao0"}, "path": "runtime/vm/KeyHashTable.c", "diffHunk": "@@ -536,11 +550,25 @@ hashClassTableAtString(J9ClassLoader *classLoader, j9object_t stringObject)\n \tif (NULL != result) {\n \t\tJ9Class *clazz = result->ramClass;\n \t\tAssert_VM_false(J9_ARE_ANY_BITS_SET((UDATA)clazz, J9_REQUIRED_CLASS_ALIGNMENT - 1));\n-\t\treturn clazz;\n+\t\tif (J9ROMCLASS_IS_HIDDEN(clazz->romClass)) {\n+\t\t\tif (J9_ARE_ALL_BITS_SET(flag, HASHTABLE_FIND_FLAG_INCLUDE_HIDDEN)) {\n+\t\t\t\treturn clazz;\n+\t\t\t} else {\n+\t\t\t\treturn NULL;\n+\t\t\t}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTcyNjE4NA=="}, "originalCommit": {"oid": "5a451f72c074a9e3d5a1daf07af3101738f57eb2"}, "originalPosition": 63}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwODk0ODY2OnYy", "diffSide": "RIGHT", "path": "runtime/vm/createramclass.cpp", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxMzo0Mjo1MFrOG8KQAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxODozNzozOFrOG8V41g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTczNTY4Mg==", "bodyText": "unnecessary change", "url": "https://github.com/eclipse-openj9/openj9/pull/10300#discussion_r465735682", "createdAt": "2020-08-05T13:42:50Z", "author": {"login": "DanHeidinga"}, "path": "runtime/vm/createramclass.cpp", "diffHunk": "@@ -2035,7 +2035,7 @@ internalCreateRAMClassDone(J9VMThread *vmThread, J9ClassLoader *classLoader, J9R\n \t\t\t\tomrthread_monitor_exit(javaVM->classTableMutex);\n \t\t\t\tjavaVM->memoryManagerFunctions->j9gc_modron_global_collect_with_overrides(vmThread, J9MMCONSTANT_EXPLICIT_GC_NATIVE_OUT_OF_MEMORY);\n \t\t\t\tomrthread_monitor_enter(javaVM->classTableMutex);\n-\n+\t\t\t\t", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a451f72c074a9e3d5a1daf07af3101738f57eb2"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkyNjM1OA==", "bodyText": "Removed.", "url": "https://github.com/eclipse-openj9/openj9/pull/10300#discussion_r465926358", "createdAt": "2020-08-05T18:37:38Z", "author": {"login": "hangshao0"}, "path": "runtime/vm/createramclass.cpp", "diffHunk": "@@ -2035,7 +2035,7 @@ internalCreateRAMClassDone(J9VMThread *vmThread, J9ClassLoader *classLoader, J9R\n \t\t\t\tomrthread_monitor_exit(javaVM->classTableMutex);\n \t\t\t\tjavaVM->memoryManagerFunctions->j9gc_modron_global_collect_with_overrides(vmThread, J9MMCONSTANT_EXPLICIT_GC_NATIVE_OUT_OF_MEMORY);\n \t\t\t\tomrthread_monitor_enter(javaVM->classTableMutex);\n-\n+\t\t\t\t", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTczNTY4Mg=="}, "originalCommit": {"oid": "5a451f72c074a9e3d5a1daf07af3101738f57eb2"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwODk0OTA3OnYy", "diffSide": "RIGHT", "path": "runtime/vm/createramclass.cpp", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxMzo0Mjo1NVrOG8KQRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxODozNzo0NVrOG8V5Jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTczNTc1MQ==", "bodyText": "unnecessary change", "url": "https://github.com/eclipse-openj9/openj9/pull/10300#discussion_r465735751", "createdAt": "2020-08-05T13:42:55Z", "author": {"login": "DanHeidinga"}, "path": "runtime/vm/createramclass.cpp", "diffHunk": "@@ -2045,7 +2045,7 @@ internalCreateRAMClassDone(J9VMThread *vmThread, J9ClassLoader *classLoader, J9R\n \t\t\t\tif (alreadyLoadedClass != NULL) {\n \t\t\t\t\tgoto alreadyLoaded;\n \t\t\t\t}\n-\n+\t", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a451f72c074a9e3d5a1daf07af3101738f57eb2"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkyNjQzOQ==", "bodyText": "Removed.", "url": "https://github.com/eclipse-openj9/openj9/pull/10300#discussion_r465926439", "createdAt": "2020-08-05T18:37:45Z", "author": {"login": "hangshao0"}, "path": "runtime/vm/createramclass.cpp", "diffHunk": "@@ -2045,7 +2045,7 @@ internalCreateRAMClassDone(J9VMThread *vmThread, J9ClassLoader *classLoader, J9R\n \t\t\t\tif (alreadyLoadedClass != NULL) {\n \t\t\t\t\tgoto alreadyLoaded;\n \t\t\t\t}\n-\n+\t", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTczNTc1MQ=="}, "originalCommit": {"oid": "5a451f72c074a9e3d5a1daf07af3101738f57eb2"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkwOTIzNTUzOnYy", "diffSide": "RIGHT", "path": "runtime/bcutil/defineclass.c", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxNDo0Njo0MVrOG8NEeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxODozNzoyNlrOG8V4Zw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTc4MTg4Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tif ((!isAnonFlagSet) \n          \n          \n            \n            \t\t&& (!isHiddenFlagSet)\n          \n          \n            \n            \t) {\n          \n          \n            \n            \tif (!isAnonFlagSet && !isHiddenFlagSet) {", "url": "https://github.com/eclipse-openj9/openj9/pull/10300#discussion_r465781882", "createdAt": "2020-08-05T14:46:41Z", "author": {"login": "DanHeidinga"}, "path": "runtime/bcutil/defineclass.c", "diffHunk": "@@ -117,7 +115,9 @@ internalDefineClass(\n \t\t}\n \t}\n \n-\tif (!isAnonFlagSet) {\n+\tif ((!isAnonFlagSet) \n+\t\t&& (!isHiddenFlagSet)\n+\t) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a451f72c074a9e3d5a1daf07af3101738f57eb2"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkyNjI0Nw==", "bodyText": "Fixed.", "url": "https://github.com/eclipse-openj9/openj9/pull/10300#discussion_r465926247", "createdAt": "2020-08-05T18:37:26Z", "author": {"login": "hangshao0"}, "path": "runtime/bcutil/defineclass.c", "diffHunk": "@@ -117,7 +115,9 @@ internalDefineClass(\n \t\t}\n \t}\n \n-\tif (!isAnonFlagSet) {\n+\tif ((!isAnonFlagSet) \n+\t\t&& (!isHiddenFlagSet)\n+\t) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTc4MTg4Mg=="}, "originalCommit": {"oid": "5a451f72c074a9e3d5a1daf07af3101738f57eb2"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxMDMwNDA1OnYy", "diffSide": "RIGHT", "path": "runtime/oti/j9nonbuilder.h", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxOTozMTo1MVrOG8Xpnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxOTo0MTozMFrOG8X8rQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTk1NTIzMQ==", "bodyText": "Flags should probably be UDATA.", "url": "https://github.com/eclipse-openj9/openj9/pull/10300#discussion_r465955231", "createdAt": "2020-08-05T19:31:51Z", "author": {"login": "gacholio"}, "path": "runtime/oti/j9nonbuilder.h", "diffHunk": "@@ -4239,6 +4239,7 @@ typedef struct J9InternalVMFunctions {\n \tstruct J9Class*  ( *internalFindClassInModule)(struct J9VMThread *currentThread, struct J9Module *j9module, U_8 *className, UDATA classNameLength, struct J9ClassLoader *classLoader, UDATA options) ;\n \tstruct J9Class*  ( *internalFindClassString)(struct J9VMThread* currentThread, j9object_t moduleName, j9object_t className, struct J9ClassLoader* classLoader, UDATA options, UDATA allowedBitsForClassName) ;\n \tstruct J9Class*  ( *hashClassTableAt)(struct J9ClassLoader *classLoader, U_8 *className, UDATA classNameLength) ;\n+\tstruct J9Class*  ( *hashClassTableAtWithFlag)(struct J9ClassLoader *classLoader, U_8 *className, UDATA classNameLength, U_32 flags) ;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "155506878cedfecfe95d65f1c66561cc712f393d"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTk2MDEwOQ==", "bodyText": "Changed to UDATA.", "url": "https://github.com/eclipse-openj9/openj9/pull/10300#discussion_r465960109", "createdAt": "2020-08-05T19:41:30Z", "author": {"login": "hangshao0"}, "path": "runtime/oti/j9nonbuilder.h", "diffHunk": "@@ -4239,6 +4239,7 @@ typedef struct J9InternalVMFunctions {\n \tstruct J9Class*  ( *internalFindClassInModule)(struct J9VMThread *currentThread, struct J9Module *j9module, U_8 *className, UDATA classNameLength, struct J9ClassLoader *classLoader, UDATA options) ;\n \tstruct J9Class*  ( *internalFindClassString)(struct J9VMThread* currentThread, j9object_t moduleName, j9object_t className, struct J9ClassLoader* classLoader, UDATA options, UDATA allowedBitsForClassName) ;\n \tstruct J9Class*  ( *hashClassTableAt)(struct J9ClassLoader *classLoader, U_8 *className, UDATA classNameLength) ;\n+\tstruct J9Class*  ( *hashClassTableAtWithFlag)(struct J9ClassLoader *classLoader, U_8 *className, UDATA classNameLength, U_32 flags) ;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTk1NTIzMQ=="}, "originalCommit": {"oid": "155506878cedfecfe95d65f1c66561cc712f393d"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkxNDUxNDMwOnYy", "diffSide": "RIGHT", "path": "runtime/oti/vm_api.h", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxODo0NjoyMlrOG8_8LA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxOToxMjo0N1rOG9AzGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjYxNTM0MA==", "bodyText": "Please document the purpose of the flag, and I think it would make sense for the constant to be prefixed by J9_", "url": "https://github.com/eclipse-openj9/openj9/pull/10300#discussion_r466615340", "createdAt": "2020-08-06T18:46:22Z", "author": {"login": "gacholio"}, "path": "runtime/oti/vm_api.h", "diffHunk": "@@ -1738,6 +1738,8 @@ setExceptionForErroredRomClass( J9ROMClass *romClass, J9VMThread *vmThread );\n \n /* ---------------- KeyHashTable.c ---------------- */\n \n+#define HASH_TABLE_STATE_ITER_FLAG_SKIP_HIDDEN 1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "618bab6fe0adf113b1c472395e7b6ffbad41ac9c"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjYyOTQwMw==", "bodyText": "Added documentation and J9_ prefix. Also removed ITER_ from the name.", "url": "https://github.com/eclipse-openj9/openj9/pull/10300#discussion_r466629403", "createdAt": "2020-08-06T19:12:47Z", "author": {"login": "hangshao0"}, "path": "runtime/oti/vm_api.h", "diffHunk": "@@ -1738,6 +1738,8 @@ setExceptionForErroredRomClass( J9ROMClass *romClass, J9VMThread *vmThread );\n \n /* ---------------- KeyHashTable.c ---------------- */\n \n+#define HASH_TABLE_STATE_ITER_FLAG_SKIP_HIDDEN 1", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjYxNTM0MA=="}, "originalCommit": {"oid": "618bab6fe0adf113b1c472395e7b6ffbad41ac9c"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4851, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}