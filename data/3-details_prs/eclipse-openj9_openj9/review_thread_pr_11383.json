{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzODA2ODM5", "number": 11383, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxODozOToxM1rOFGVx6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxODozOToxM1rOFGVx6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyMTkyNjE4OnYy", "diffSide": "RIGHT", "path": "runtime/compiler/ilgen/Walker.cpp", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxODozOToxM1rOIHTsdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QxMzozNzoyNFrOIH19tA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDUzMzYyMg==", "bodyText": "How come we don't check if the array element is value type first and then if it's flattened before going down this path to call VM helper to load flattened array element?", "url": "https://github.com/eclipse-openj9/openj9/pull/11383#discussion_r544533622", "createdAt": "2020-12-16T18:39:13Z", "author": {"login": "a7ehuo"}, "path": "runtime/compiler/ilgen/Walker.cpp", "diffHunk": "@@ -6079,6 +6079,22 @@ TR_J9ByteCodeIlGenerator::loadFromCallSiteTable(int32_t callSiteIndex)\n void\n TR_J9ByteCodeIlGenerator::loadArrayElement(TR::DataType dataType, TR::ILOpCodes nodeop, bool checks)\n    {\n+   if (TR::Compiler->om.areValueTypesEnabled() && dataType == TR::Address)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0843bc8479267e034aa4bd707a899cbdc411d328"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTA5NTA5Mg==", "bodyText": "aaload and aastore don't use the constant pool, so the type of array elements is not known (at least, not without some dataflow analysis). The only thing that's known is that it's an array of some object type.", "url": "https://github.com/eclipse-openj9/openj9/pull/11383#discussion_r545095092", "createdAt": "2020-12-17T13:37:24Z", "author": {"login": "Leonardo2718"}, "path": "runtime/compiler/ilgen/Walker.cpp", "diffHunk": "@@ -6079,6 +6079,22 @@ TR_J9ByteCodeIlGenerator::loadFromCallSiteTable(int32_t callSiteIndex)\n void\n TR_J9ByteCodeIlGenerator::loadArrayElement(TR::DataType dataType, TR::ILOpCodes nodeop, bool checks)\n    {\n+   if (TR::Compiler->om.areValueTypesEnabled() && dataType == TR::Address)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDUzMzYyMg=="}, "originalCommit": {"oid": "0843bc8479267e034aa4bd707a899cbdc411d328"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 846, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}