{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0MjAyMjQx", "number": 9476, "title": "Add cmdline opts to toggle array flattening", "bodyText": "Add cmdline opts to toggle array flattening\nDefault is array flattening disable.\n-XX:+EnableArrayFlattening to enable\n-XX:-EnableArrayFlattening to disable\nSigned-off-by: Tobi Ajila atobia@ca.ibm.com", "createdAt": "2020-05-06T16:27:32Z", "url": "https://github.com/eclipse-openj9/openj9/pull/9476", "merged": true, "mergeCommit": {"oid": "56d717e1a60cdfbe4a25f25b9035a1570f0e5579"}, "closed": true, "closedAt": "2020-05-06T23:33:58Z", "author": {"login": "tajila"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcerQ2cABqjMzMDkyOTI2OTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABceu7WQABqjMzMTAyMjM0NzQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7e8c0a835601e486152341b7ba7f2d1e6debc8f2", "author": {"user": {"login": "tajila", "name": "Tobi"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/7e8c0a835601e486152341b7ba7f2d1e6debc8f2", "committedDate": "2020-05-06T16:26:25Z", "message": "Add cmdline opts to toggle array flattening\n\nDefault is is array flattening disable.\n\nSigned-off-by: Tobi Ajila <atobia@ca.ibm.com>"}, "afterCommit": {"oid": "5445466a75e5817a15a7c7962d1722ca4e4cdf4d", "author": {"user": {"login": "tajila", "name": "Tobi"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/5445466a75e5817a15a7c7962d1722ca4e4cdf4d", "committedDate": "2020-05-06T16:27:59Z", "message": "Add cmdline opts to toggle array flattening\n\nDefault is is array flattening disable.\n\nSigned-off-by: Tobi Ajila <atobia@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2ODcwNjk1", "url": "https://github.com/eclipse-openj9/openj9/pull/9476#pullrequestreview-406870695", "createdAt": "2020-05-06T18:17:44Z", "commit": {"oid": "5445466a75e5817a15a7c7962d1722ca4e4cdf4d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxODoxNzo0NFrOGRfl2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxODoxNzo0NFrOGRfl2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDk5NjU3MQ==", "bodyText": "What's the consequence of this change? Is this a bug fix rolled into this PR?", "url": "https://github.com/eclipse-openj9/openj9/pull/9476#discussion_r420996571", "createdAt": "2020-05-06T18:17:44Z", "author": {"login": "gacholio"}, "path": "runtime/vm/createramclass.cpp", "diffHunk": "@@ -2901,14 +2907,15 @@ internalCreateRAMClassFromROMClassImpl(J9VMThread *vmThread, J9ClassLoader *clas\n \t\t\t\t\t * properties from the leafComponentType. A 2D array is an array of references so it can never be flattened, however, its\n \t\t\t\t\t * elements may be flattened arrays.\n \t\t\t\t\t */\n-\t\t\t\t\tramArrayClass->classFlags |= (elementClass->classFlags & (J9ClassIsFlattened | J9ClassLargestAlignmentConstraintReference | J9ClassLargestAlignmentConstraintDouble));\n+\t\t\t\t\tramArrayClass->classFlags |= (elementClass->classFlags & arrayFlags);\n+\n \t\t\t\t}\n \t\t\t\tramArrayClass->leafComponentType = leafComponentType;\n \t\t\t\tramArrayClass->arity = arity;\n \t\t\t\tramArrayClass->componentType = elementClass;\n \t\t\t\tramArrayClass->module = leafComponentType->module;\n \n-\t\t\t\tif (J9_IS_J9CLASS_FLATTENED(elementClass)) {\n+\t\t\t\tif (J9_IS_J9CLASS_FLATTENED(ramArrayClass)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5445466a75e5817a15a7c7962d1722ca4e4cdf4d"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2OTE1NjA4", "url": "https://github.com/eclipse-openj9/openj9/pull/9476#pullrequestreview-406915608", "createdAt": "2020-05-06T19:19:30Z", "commit": {"oid": "5445466a75e5817a15a7c7962d1722ca4e4cdf4d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0dd1369c70f505e54737e89175623fd3b5ef2d12", "author": {"user": {"login": "tajila", "name": "Tobi"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/0dd1369c70f505e54737e89175623fd3b5ef2d12", "committedDate": "2020-05-06T20:44:06Z", "message": "Add cmdline opts to toggle array flattening\n\nDefault is is array flattening disable.\n\nSigned-off-by: Tobi Ajila <atobia@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5445466a75e5817a15a7c7962d1722ca4e4cdf4d", "author": {"user": {"login": "tajila", "name": "Tobi"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/5445466a75e5817a15a7c7962d1722ca4e4cdf4d", "committedDate": "2020-05-06T16:27:59Z", "message": "Add cmdline opts to toggle array flattening\n\nDefault is is array flattening disable.\n\nSigned-off-by: Tobi Ajila <atobia@ca.ibm.com>"}, "afterCommit": {"oid": "0dd1369c70f505e54737e89175623fd3b5ef2d12", "author": {"user": {"login": "tajila", "name": "Tobi"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/0dd1369c70f505e54737e89175623fd3b5ef2d12", "committedDate": "2020-05-06T20:44:06Z", "message": "Add cmdline opts to toggle array flattening\n\nDefault is is array flattening disable.\n\nSigned-off-by: Tobi Ajila <atobia@ca.ibm.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 878, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}