{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwNTc0Mzk5", "number": 8906, "title": "Runtime compressed refs work", "bodyText": "Correctly store the alternateLockword when inflating a monitor. The\nfield is typed as j9objectmonitor_t, but must be treated like object\nlockwords (store U32 or UDATA, not j9objectmonitor_t).\n[ci skip]\nSigned-off-by: Graham Chapman graham_chapman@ca.ibm.com", "createdAt": "2020-03-18T17:37:48Z", "url": "https://github.com/eclipse-openj9/openj9/pull/8906", "merged": true, "mergeCommit": {"oid": "760175dbb3ab47401e6d7c8a68a23adc1e265344"}, "closed": true, "closedAt": "2020-03-19T00:38:39Z", "author": {"login": "gacholio"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcO6qlpAH2gAyMzkwNTc0Mzk5Ojk0OTc4Y2Y3MzI1ZWUyNmJhMjk5YTQ1ZGI1NDFhZmIyZjZiMDA0OGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcO7ceBgFqTM3NzEyMTkxNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "94978cf7325ee26ba299a45db541afb2f6b0048b", "author": {"user": {"login": "gacholio", "name": "Graham Chapman"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/94978cf7325ee26ba299a45db541afb2f6b0048b", "committedDate": "2020-03-18T17:22:02Z", "message": "Runtime compressed refs work\n\nCorrectly store the alternateLockword when inflating a monitor. The\nfield is typed as j9objectmonitor_t, but must be treated like object\nlockwords (store U32 or UDATA, not j9objectmonitor_t).\n\n[ci skip]\n\nSigned-off-by: Graham Chapman <graham_chapman@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MTAyNzg0", "url": "https://github.com/eclipse-openj9/openj9/pull/8906#pullrequestreview-377102784", "createdAt": "2020-03-18T17:51:10Z", "commit": {"oid": "94978cf7325ee26ba299a45db541afb2f6b0048b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNzo1MToxMFrOF4QdDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNzo1MToxMFrOF4QdDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDUzNDE1OA==", "bodyText": "I assume this is required because of the use of J9_LOAD_LOCKWORD... macros?\nLike: https://github.com/eclipse/openj9/blob/51d9fc6a3da153f5b22a30dce3dc661574f5acce/runtime/util/moninfo.c#L70", "url": "https://github.com/eclipse-openj9/openj9/pull/8906#discussion_r394534158", "createdAt": "2020-03-18T17:51:10Z", "author": {"login": "DanHeidinga"}, "path": "runtime/vm/monhelpers.c", "diffHunk": "@@ -257,7 +257,7 @@ objectMonitorInflate(J9VMThread* vmStruct, j9object_t object, UDATA lock)\n \t((J9ThreadAbstractMonitor*)monitor)->count = J9_FLATLOCK_COUNT(lock);\t\n \n \tif (!LN_HAS_LOCKWORD(vmStruct,object)) {\n-\t\tobjectMonitor->alternateLockword = (j9objectmonitor_t)((UDATA)objectMonitor | OBJECT_HEADER_LOCK_INFLATED);\n+\t\tJ9_STORE_LOCKWORD(vmStruct, &objectMonitor->alternateLockword, (j9objectmonitor_t)((UDATA)objectMonitor | OBJECT_HEADER_LOCK_INFLATED));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94978cf7325ee26ba299a45db541afb2f6b0048b"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3MTIxOTE0", "url": "https://github.com/eclipse-openj9/openj9/pull/8906#pullrequestreview-377121914", "createdAt": "2020-03-18T18:16:31Z", "commit": {"oid": "94978cf7325ee26ba299a45db541afb2f6b0048b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 520, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}