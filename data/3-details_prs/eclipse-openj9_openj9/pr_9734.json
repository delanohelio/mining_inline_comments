{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0NjU4Nzg1", "number": 9734, "title": "Create query to determine the SCC mode", "bodyText": "Added query to determine is SCC is the default SCC, returns TRUE is SCC is the default and FALSE otherwise. Closes #6826", "createdAt": "2020-05-28T18:29:50Z", "url": "https://github.com/eclipse-openj9/openj9/pull/9734", "merged": true, "mergeCommit": {"oid": "d89764f909755360950848a474c75c3ba8bb791f"}, "closed": true, "closedAt": "2020-06-16T20:35:17Z", "author": {"login": "Samantha-Rempel"}, "timelineItems": {"totalCount": 25, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcl0FaFgBqjMzODQ1Nzc4NDg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcr7W6VgFqTQzMTg3MDM2Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "114742812928ef0327334f70d10fb9d14911ca63", "author": {"user": {"login": "Samantha-Rempel", "name": "Samantha-Rempel"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/114742812928ef0327334f70d10fb9d14911ca63", "committedDate": "2020-05-28T18:58:20Z", "message": "Merge branch 'master' of https://github.com/Samantha-Rempel/openj9"}, "afterCommit": {"oid": "9e0dd713c2923584e3252926cd66a9115c99a8b3", "author": {"user": {"login": "Samantha-Rempel", "name": "Samantha-Rempel"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/9e0dd713c2923584e3252926cd66a9115c99a8b3", "committedDate": "2020-05-28T18:57:00Z", "message": "Added query to determine is SCC is the default SCC, returns TRUE is SCC is the default and FALSE otherwise.\n\nSigned-off-by: Samantha Rempel <Samantha.Rempel@ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0NzIzMDEy", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#pullrequestreview-424723012", "createdAt": "2020-06-04T18:30:17Z", "commit": {"oid": "855734cc4ef892782e80bc5d668782fb79ead2b9"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxODozMDoxN1rOGfSsSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxODozNjo0MlrOGfS9hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQ2NTI4OQ==", "bodyText": "Can you change \"isSCCDefault\" to \"isSharedClassEnabledByDefault\" ?", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#discussion_r435465289", "createdAt": "2020-06-04T18:30:17Z", "author": {"login": "hangshao0"}, "path": "runtime/oti/j9nonbuilder.h", "diffHunk": "@@ -1227,6 +1227,7 @@ typedef struct J9SharedClassConfig {\n \tconst char* ctrlDirName;\n \tUDATA  ( *getCacheSizeBytes)(struct J9JavaVM* vm) ;\n \tUDATA  ( *getTotalUsableCacheBytes)(struct J9JavaVM* vm);\n+\tBOOLEAN  ( *isSCCDefault)(struct J9JavaVM* vm);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "855734cc4ef892782e80bc5d668782fb79ead2b9"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQ2NTY2OQ==", "bodyText": "Also rename here to j9shr_isSharedClassEnabledByDefault.", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#discussion_r435465669", "createdAt": "2020-06-04T18:30:56Z", "author": {"login": "hangshao0"}, "path": "runtime/shared_common/shrinit.cpp", "diffHunk": "@@ -3516,6 +3516,7 @@ j9shr_init(J9JavaVM *vm, UDATA loadFlags, UDATA* nonfatal)\n \t\t}\n \n \t\tconfig->getCacheSizeBytes = j9shr_getCacheSizeBytes;\n+\t\tconfig->isSCCDefault = j9shr_isSCCDefault;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "855734cc4ef892782e80bc5d668782fb79ead2b9"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQ2ODY2MQ==", "bodyText": "Better to say \"Check if the shared cache is enabled by default or using \"-Xshareclasses\" in the command line. \"", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#discussion_r435468661", "createdAt": "2020-06-04T18:35:18Z", "author": {"login": "hangshao0"}, "path": "runtime/shared_common/shrinit.cpp", "diffHunk": "@@ -3952,6 +3953,25 @@ j9shr_getCacheSizeBytes(J9JavaVM *vm)\n \treturn ret;\n }\n \n+/**\n+ * check if SCC is the default SSC (was enabled b/c of -Xshareclasses)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "855734cc4ef892782e80bc5d668782fb79ead2b9"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQ2ODg5Mg==", "bodyText": "This comment is incorrect.", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#discussion_r435468892", "createdAt": "2020-06-04T18:35:38Z", "author": {"login": "hangshao0"}, "path": "runtime/shared_common/shrinit.cpp", "diffHunk": "@@ -3952,6 +3953,25 @@ j9shr_getCacheSizeBytes(J9JavaVM *vm)\n \treturn ret;\n }\n \n+/**\n+ * check if SCC is the default SSC (was enabled b/c of -Xshareclasses)\n+ *\n+ * @param [in] vm Pointer to the VM structure for the JVM\n+ *\n+ * @return The softmx bytes or the total usable cache size.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "855734cc4ef892782e80bc5d668782fb79ead2b9"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQ2OTE0NQ==", "bodyText": "Please remove this comment.", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#discussion_r435469145", "createdAt": "2020-06-04T18:35:56Z", "author": {"login": "hangshao0"}, "path": "runtime/shared_common/shrinit.cpp", "diffHunk": "@@ -3952,6 +3953,25 @@ j9shr_getCacheSizeBytes(J9JavaVM *vm)\n \treturn ret;\n }\n \n+/**\n+ * check if SCC is the default SSC (was enabled b/c of -Xshareclasses)\n+ *\n+ * @param [in] vm Pointer to the VM structure for the JVM\n+ *\n+ * @return The softmx bytes or the total usable cache size.\n+ * \n+ * J9_ARE_ALL_BITS_SET(javaVM->sharedClassConfig->runtimeFlags, J9SHR_RUNTIMEFLAG_ENABLE_CACHE_NON_BOOT_CLASSES)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "855734cc4ef892782e80bc5d668782fb79ead2b9"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQ2OTcwMw==", "bodyText": "Please and a comment saying \"Only bootstrap classes are shared by default.\"", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#discussion_r435469703", "createdAt": "2020-06-04T18:36:42Z", "author": {"login": "hangshao0"}, "path": "runtime/shared_common/shrinit.cpp", "diffHunk": "@@ -3952,6 +3953,25 @@ j9shr_getCacheSizeBytes(J9JavaVM *vm)\n \treturn ret;\n }\n \n+/**\n+ * check if SCC is the default SSC (was enabled b/c of -Xshareclasses)\n+ *\n+ * @param [in] vm Pointer to the VM structure for the JVM\n+ *\n+ * @return The softmx bytes or the total usable cache size.\n+ * \n+ * J9_ARE_ALL_BITS_SET(javaVM->sharedClassConfig->runtimeFlags, J9SHR_RUNTIMEFLAG_ENABLE_CACHE_NON_BOOT_CLASSES)\n+ */\n+BOOLEAN\n+j9shr_isSCCDefault(J9JavaVM *vm)\n+{\n+\tBOOLEAN ret = FALSE;\n+\tif (J9_ARE_ALL_BITS_SET(vm->sharedClassConfig->runtimeFlags, J9SHR_RUNTIMEFLAG_ENABLE_CACHE_NON_BOOT_CLASSES)){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "855734cc4ef892782e80bc5d668782fb79ead2b9"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI0NzYxNzc4", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#pullrequestreview-424761778", "createdAt": "2020-06-04T19:26:29Z", "commit": {"oid": "aa8410084b7d18731f7216ea2022caf9de6d04af"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxOToyNjoyOVrOGfUtQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNFQxOToyNjoyOVrOGfUtQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTQ5ODMwNg==", "bodyText": "Given the description and the implementation below, this name seems wrong: j9shr_isSharedClassEnabled would be more appropriate. The VM field name should be updated to match.", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#discussion_r435498306", "createdAt": "2020-06-04T19:26:29Z", "author": {"login": "keithc-ca"}, "path": "runtime/shared_common/shrinit.cpp", "diffHunk": "@@ -3952,6 +3953,26 @@ j9shr_getCacheSizeBytes(J9JavaVM *vm)\n \treturn ret;\n }\n \n+/**\n+ * Check if the shared cache is enabled by default or by using \"-Xshareclasses\" in the command line. \n+ * \n+ * @param [in] vm Pointer to the VM structure for the JVM\n+ *\n+ * @return TRUE if shared cache is enabled by default, FALSE otherwise\n+ * \n+ */\n+BOOLEAN\n+j9shr_isSharedClassEnabledByDefault(J9JavaVM *vm)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa8410084b7d18731f7216ea2022caf9de6d04af"}, "originalPosition": 21}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "aa8410084b7d18731f7216ea2022caf9de6d04af", "author": {"user": {"login": "Samantha-Rempel", "name": "Samantha-Rempel"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/aa8410084b7d18731f7216ea2022caf9de6d04af", "committedDate": "2020-06-04T19:18:36Z", "message": "Modify if statement for true case\n\nCheck that J9SHR_RUNTIMEFLAG_ENABLE_CACHEBOOTCLASSES is set and J9SHR_RUNTIMEFLAG_ENABLE_CACHE_NON_BOOT_CLASSES is not.\n\nSigned-off-by: Samantha Rempel <Samantha.Rempel@ibm.com>"}, "afterCommit": {"oid": "58ebe8c721643a890c34a9af1342aa0b549eae06", "author": {"user": {"login": "0xdaryl", "name": "Daryl Maier"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/58ebe8c721643a890c34a9af1342aa0b549eae06", "committedDate": "2020-06-05T13:05:37Z", "message": "Merge pull request #9765 from knn-k/aarch64recomp2\n\nAArch64: Implement Recomp.cpp"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "18a988d3eed5dfb18617f348fb8a852fe7971b26", "author": {"user": {"login": "Samantha-Rempel", "name": "Samantha-Rempel"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/18a988d3eed5dfb18617f348fb8a852fe7971b26", "committedDate": "2020-06-05T15:03:34Z", "message": "Add query to determine is Shared Classis the default SCC, returns TRUE is SCC is the default and FALSE otherwise.\n\nModified shrinit.h, shrinit,cpp and j9nonbuilder.h to add query that returns TRUE if Shared Class was enabled by default and FALSE if it was enabled via the command line.\n\nSigned-off-by: Samantha Rempel <Samantha.Rempel@ibm.com>"}, "afterCommit": {"oid": "49505d71b34b973f3b2791d7a3ecc2dca188dd7e", "author": {"user": {"login": "Samantha-Rempel", "name": "Samantha-Rempel"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/49505d71b34b973f3b2791d7a3ecc2dca188dd7e", "committedDate": "2020-06-11T13:54:09Z", "message": "Add query to determine is Shared Classis the default SCC, returns TRUE is SCC is the default and FALSE otherwise.\n\nModified shrinit.h, shrinit,cpp and j9nonbuilder.h to add query that returns TRUE if Shared Class was enabled by default and FALSE if it was enabled via the command line.\n\nSigned-off-by: Samantha Rempel <Samantha.Rempel@ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4OTY3MDIy", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#pullrequestreview-428967022", "createdAt": "2020-06-11T14:26:42Z", "commit": {"oid": "49505d71b34b973f3b2791d7a3ecc2dca188dd7e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNDoyNjo0MlrOGif4Lw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNDoyOToyMVrOGif_tA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODgyNzA1NQ==", "bodyText": "don't use anonymous types\nthere's no need to explicitly assign values to the literals\nall these names live in the global namespace and need to be more specific\nthis should include a value indicating the SCC is disabled (by default)\n\nWe want something more like this:\ntypedef enum J9SharedClassCacheMode {\n    J9SharedClassCacheDisabled,\n    J9SharedClassCacheBootstrapOnly,\n    J9SharedClassCacheBoostrapAndExtension,\n    J9SharedClassCacheUserDefined\n} J9SharedClassCacheMode;", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#discussion_r438827055", "createdAt": "2020-06-11T14:26:42Z", "author": {"login": "keithc-ca"}, "path": "runtime/oti/j9nonbuilder.h", "diffHunk": "@@ -262,6 +262,12 @@ typedef enum {\n \tJ9FlushCompQueueDataBreakpoint\n } J9JITFlushCompilationQueueReason;\n \n+typedef enum {\n+   BootstrapOnly               = 0,\n+   BoostrapAndExtension        = 1,\n+   UserDefined                 = 2\n+} SharedClassCacheMode;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49505d71b34b973f3b2791d7a3ecc2dca188dd7e"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODgyODQxNQ==", "bodyText": "The field is getSharedClassCacheMode and the function is j9shr_getSharedClassCacheMode .", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#discussion_r438828415", "createdAt": "2020-06-11T14:28:35Z", "author": {"login": "keithc-ca"}, "path": "runtime/shared_common/shrinit.cpp", "diffHunk": "@@ -3516,6 +3516,7 @@ j9shr_init(J9JavaVM *vm, UDATA loadFlags, UDATA* nonfatal)\n \t\t}\n \n \t\tconfig->getCacheSizeBytes = j9shr_getCacheSizeBytes;\n+\t\tconfig->isSharedClassEnabledByDefault = j9shr_isSharedClassEnabledByDefault;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49505d71b34b973f3b2791d7a3ecc2dca188dd7e"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODgyODk4MA==", "bodyText": "I expect you meant:\n  SharedClassCacheMode ret = UserDefined;", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#discussion_r438828980", "createdAt": "2020-06-11T14:29:21Z", "author": {"login": "keithc-ca"}, "path": "runtime/shared_common/shrinit.cpp", "diffHunk": "@@ -3952,6 +3953,30 @@ j9shr_getCacheSizeBytes(J9JavaVM *vm)\n \treturn ret;\n }\n \n+/**\n+ * Check if the shared cache is enabled by default or by using \"-Xshareclasses\" in the command line. \n+ * \n+ * @param [in] vm Pointer to the VM structure for the JVM\n+ *\n+ * @return TRUE if shared cache is enabled by default, FALSE otherwise\n+ * \n+ */\n+SharedClassCacheMode\n+j9shr_getSharedClassCacheMode(J9JavaVM *vm)\n+{\n+\tSharedClassCacheMode UserDefined;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49505d71b34b973f3b2791d7a3ecc2dca188dd7e"}, "originalPosition": 23}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "49505d71b34b973f3b2791d7a3ecc2dca188dd7e", "author": {"user": {"login": "Samantha-Rempel", "name": "Samantha-Rempel"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/49505d71b34b973f3b2791d7a3ecc2dca188dd7e", "committedDate": "2020-06-11T13:54:09Z", "message": "Add query to determine is Shared Classis the default SCC, returns TRUE is SCC is the default and FALSE otherwise.\n\nModified shrinit.h, shrinit,cpp and j9nonbuilder.h to add query that returns TRUE if Shared Class was enabled by default and FALSE if it was enabled via the command line.\n\nSigned-off-by: Samantha Rempel <Samantha.Rempel@ibm.com>"}, "afterCommit": {"oid": "80965e5743219f4c18104dd88e47a4052cccedbd", "author": {"user": {"login": "Samantha-Rempel", "name": "Samantha-Rempel"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/80965e5743219f4c18104dd88e47a4052cccedbd", "committedDate": "2020-06-11T15:19:12Z", "message": "Add query to determine is Shared Classis the default SCC, returns TRUE is SCC is the default and FALSE otherwise.\n\nModified shrinit.h, shrinit,cpp and j9nonbuilder.h to add query that returns TRUE if Shared Class was enabled by default and FALSE if it was enabled via the command line.\n\nSigned-off-by: Samantha Rempel <Samantha.Rempel@ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "80965e5743219f4c18104dd88e47a4052cccedbd", "author": {"user": {"login": "Samantha-Rempel", "name": "Samantha-Rempel"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/80965e5743219f4c18104dd88e47a4052cccedbd", "committedDate": "2020-06-11T15:19:12Z", "message": "Add query to determine is Shared Classis the default SCC, returns TRUE is SCC is the default and FALSE otherwise.\n\nModified shrinit.h, shrinit,cpp and j9nonbuilder.h to add query that returns TRUE if Shared Class was enabled by default and FALSE if it was enabled via the command line.\n\nSigned-off-by: Samantha Rempel <Samantha.Rempel@ibm.com>"}, "afterCommit": {"oid": "a92b8d107c19879de86da57536306061c3d85ca6", "author": {"user": {"login": "Samantha-Rempel", "name": "Samantha-Rempel"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/a92b8d107c19879de86da57536306061c3d85ca6", "committedDate": "2020-06-11T17:51:30Z", "message": "Add query to determine is Shared Classis the default SCC, returns TRUE is SCC is the default and FALSE otherwise.\n\nModified shrinit.h, shrinit,cpp and j9nonbuilder.h to add query that returns TRUE if Shared Class was enabled by default and FALSE if it was enabled via the command line.\n\nSigned-off-by: Samantha Rempel <Samantha.Rempel@ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5MTY0MTA4", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#pullrequestreview-429164108", "createdAt": "2020-06-11T18:05:01Z", "commit": {"oid": "a92b8d107c19879de86da57536306061c3d85ca6"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxODowNTowMVrOGio-aA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxODoxMDo0OFrOGipKlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk3NjEwNA==", "bodyText": "Please indent with tabs like the rest of this file.", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#discussion_r438976104", "createdAt": "2020-06-11T18:05:01Z", "author": {"login": "keithc-ca"}, "path": "runtime/oti/j9nonbuilder.h", "diffHunk": "@@ -262,6 +262,12 @@ typedef enum {\n \tJ9FlushCompQueueDataBreakpoint\n } J9JITFlushCompilationQueueReason;\n \n+typedef enum J9SharedClassCacheMode {\n+    J9SharedClassCacheBootstrapOnly,\n+    J9SharedClassCacheBoostrapAndExtension,\n+    J9SharedClassCacheUserDefined", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a92b8d107c19879de86da57536306061c3d85ca6"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk3OTIyMQ==", "bodyText": "This needs only check J9SHR_RUNTIMEFLAG_ENABLE_CACHEBOOTCLASSES once:\n    if (J9_ARE_ALL_BITS_SET(vm->sharedClassConfig->runtimeFlags, J9SHR_RUNTIMEFLAG_ENABLE_CACHEBOOTCLASSES)) {\n        if (J9_ARE_ALL_BITS_SET(vm->sharedClassConfig->runtimeFlags, J9SHR_RUNTIMEFLAG_ENABLE_CACHE_NON_BOOT_CLASSES)) {\n            ret = J9SharedClassCacheUserDefined;\n        } else {\n            ret = J9SharedClassCacheBootstrapOnly;\n        }\n    }\n\nAlso notice } and else belong on the same line.", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#discussion_r438979221", "createdAt": "2020-06-11T18:10:48Z", "author": {"login": "keithc-ca"}, "path": "runtime/shared_common/shrinit.cpp", "diffHunk": "@@ -3952,6 +3953,30 @@ j9shr_getCacheSizeBytes(J9JavaVM *vm)\n \treturn ret;\n }\n \n+/**\n+ * Check if the shared cache is enabled by default or by using \"-Xshareclasses\" in the command line. \n+ * \n+ * @param [in] vm Pointer to the VM structure for the JVM\n+ *\n+ * @return TRUE if shared cache is enabled by default, FALSE otherwise\n+ * \n+ */\n+J9SharedClassCacheMode\n+j9shr_getSharedClassCacheMode(J9JavaVM *vm)\n+{\n+\tJ9SharedClassCacheMode ret = JJ9SharedClassCacheUserDefined;\n+\t/* Only bootstrap classes are shared by default */\n+\tif (J9_ARE_ALL_BITS_SET(vm->sharedClassConfig->runtimeFlags, J9SHR_RUNTIMEFLAG_ENABLE_CACHEBOOTCLASSES) && \n+\t\tJ9_ARE_NO_BITS_SET(vm->sharedClassConfig->runtimeFlags, J9SHR_RUNTIMEFLAG_ENABLE_CACHE_NON_BOOT_CLASSES)) {\n+\t\tret = J9SharedClassCacheBootstrapOnly;\n+\t}\n+\telse if (J9_ARE_ALL_BITS_SET(vm->sharedClassConfig->runtimeFlags, J9SHR_RUNTIMEFLAG_ENABLE_CACHEBOOTCLASSES) && \n+\t\tJ9_ARE_ALL_BITS_SET(vm->sharedClassConfig->runtimeFlags, J9SHR_RUNTIMEFLAG_ENABLE_CACHE_NON_BOOT_CLASSES)) {\n+\t\tret = J9SharedClassCacheUserDefined;\n+\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a92b8d107c19879de86da57536306061c3d85ca6"}, "originalPosition": 32}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a92b8d107c19879de86da57536306061c3d85ca6", "author": {"user": {"login": "Samantha-Rempel", "name": "Samantha-Rempel"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/a92b8d107c19879de86da57536306061c3d85ca6", "committedDate": "2020-06-11T17:51:30Z", "message": "Add query to determine is Shared Classis the default SCC, returns TRUE is SCC is the default and FALSE otherwise.\n\nModified shrinit.h, shrinit,cpp and j9nonbuilder.h to add query that returns TRUE if Shared Class was enabled by default and FALSE if it was enabled via the command line.\n\nSigned-off-by: Samantha Rempel <Samantha.Rempel@ibm.com>"}, "afterCommit": {"oid": "9dd3e2faefa104d4dc5171ea4c681a1c80a1b9a1", "author": {"user": {"login": "Samantha-Rempel", "name": "Samantha-Rempel"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/9dd3e2faefa104d4dc5171ea4c681a1c80a1b9a1", "committedDate": "2020-06-11T18:15:27Z", "message": "Add query to determine is Shared Classis the default SCC, returns TRUE is SCC is the default and FALSE otherwise.\n\nModified shrinit.h, shrinit,cpp and j9nonbuilder.h to add query that returns TRUE if Shared Class was enabled by default and FALSE if it was enabled via the command line.\n\nSigned-off-by: Samantha Rempel <Samantha.Rempel@ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9dd3e2faefa104d4dc5171ea4c681a1c80a1b9a1", "author": {"user": {"login": "Samantha-Rempel", "name": "Samantha-Rempel"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/9dd3e2faefa104d4dc5171ea4c681a1c80a1b9a1", "committedDate": "2020-06-11T18:15:27Z", "message": "Add query to determine is Shared Classis the default SCC, returns TRUE is SCC is the default and FALSE otherwise.\n\nModified shrinit.h, shrinit,cpp and j9nonbuilder.h to add query that returns TRUE if Shared Class was enabled by default and FALSE if it was enabled via the command line.\n\nSigned-off-by: Samantha Rempel <Samantha.Rempel@ibm.com>"}, "afterCommit": {"oid": "44e31c921fca5d042e02cd402be7dc2c3172a931", "author": {"user": {"login": "Samantha-Rempel", "name": "Samantha-Rempel"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/44e31c921fca5d042e02cd402be7dc2c3172a931", "committedDate": "2020-06-11T18:23:16Z", "message": "Add query to determine is Shared Classis the default SCC, returns TRUE is SCC is the default and FALSE otherwise.\n\nModified shrinit.h, shrinit,cpp and j9nonbuilder.h to add query that returns TRUE if Shared Class was enabled by default and FALSE if it was enabled via the command line.\n\nSigned-off-by: Samantha Rempel <Samantha.Rempel@ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5MjAxNDAw", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#pullrequestreview-429201400", "createdAt": "2020-06-11T18:59:51Z", "commit": {"oid": "44e31c921fca5d042e02cd402be7dc2c3172a931"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxODo1OTo1MVrOGiqvgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxOTowMzoyN1rOGiq2zw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTAwNTA1OQ==", "bodyText": "This comment needs to be updated.", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#discussion_r439005059", "createdAt": "2020-06-11T18:59:51Z", "author": {"login": "hangshao0"}, "path": "runtime/shared_common/shrinit.cpp", "diffHunk": "@@ -3952,6 +3953,29 @@ j9shr_getCacheSizeBytes(J9JavaVM *vm)\n \treturn ret;\n }\n \n+/**\n+ * Check if the shared cache is enabled by default or by using \"-Xshareclasses\" in the command line. ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44e31c921fca5d042e02cd402be7dc2c3172a931"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTAwNTEzNQ==", "bodyText": "This comment also needs to be updated.", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#discussion_r439005135", "createdAt": "2020-06-11T19:00:00Z", "author": {"login": "hangshao0"}, "path": "runtime/shared_common/shrinit.cpp", "diffHunk": "@@ -3952,6 +3953,29 @@ j9shr_getCacheSizeBytes(J9JavaVM *vm)\n \treturn ret;\n }\n \n+/**\n+ * Check if the shared cache is enabled by default or by using \"-Xshareclasses\" in the command line. \n+ * \n+ * @param [in] vm Pointer to the VM structure for the JVM\n+ *\n+ * @return TRUE if shared cache is enabled by default, FALSE otherwise", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44e31c921fca5d042e02cd402be7dc2c3172a931"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTAwNjkyNw==", "bodyText": "We have\n#if defined(J9VM_OPT_SHARED_CLASSES)\nin this file.\nCan you move J9SharedClassCacheMode inside the #if defined(J9VM_OPT_SHARED_CLASSES)", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#discussion_r439006927", "createdAt": "2020-06-11T19:03:27Z", "author": {"login": "hangshao0"}, "path": "runtime/oti/j9nonbuilder.h", "diffHunk": "@@ -262,6 +262,12 @@ typedef enum {\n \tJ9FlushCompQueueDataBreakpoint\n } J9JITFlushCompilationQueueReason;\n \n+typedef enum J9SharedClassCacheMode {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44e31c921fca5d042e02cd402be7dc2c3172a931"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "44e31c921fca5d042e02cd402be7dc2c3172a931", "author": {"user": {"login": "Samantha-Rempel", "name": "Samantha-Rempel"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/44e31c921fca5d042e02cd402be7dc2c3172a931", "committedDate": "2020-06-11T18:23:16Z", "message": "Add query to determine is Shared Classis the default SCC, returns TRUE is SCC is the default and FALSE otherwise.\n\nModified shrinit.h, shrinit,cpp and j9nonbuilder.h to add query that returns TRUE if Shared Class was enabled by default and FALSE if it was enabled via the command line.\n\nSigned-off-by: Samantha Rempel <Samantha.Rempel@ibm.com>"}, "afterCommit": {"oid": "e8bf2dcc2af869e4816233cab2a9d74274d7877c", "author": {"user": {"login": "Samantha-Rempel", "name": "Samantha-Rempel"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e8bf2dcc2af869e4816233cab2a9d74274d7877c", "committedDate": "2020-06-12T12:44:22Z", "message": "Add query to determine is Shared Classis the default SCC, returns TRUE is SCC is the default and FALSE otherwise.\n\nModified shrinit.h, shrinit,cpp and j9nonbuilder.h to add query that returns TRUE if Shared Class was enabled by default and FALSE if it was enabled via the command line.\n\nSigned-off-by: Samantha Rempel <Samantha.Rempel@ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5NzkxNDQx", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#pullrequestreview-429791441", "createdAt": "2020-06-12T14:32:50Z", "commit": {"oid": "e8bf2dcc2af869e4816233cab2a9d74274d7877c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxNDozMjo1MFrOGjGQhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxNDozMjo1MFrOGjGQhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTQ1NTg3OQ==", "bodyText": "I think spaces are being used here instead of tabs.", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#discussion_r439455879", "createdAt": "2020-06-12T14:32:50Z", "author": {"login": "dsouzai"}, "path": "runtime/shared_common/shrinit.cpp", "diffHunk": "@@ -3952,6 +3953,30 @@ j9shr_getCacheSizeBytes(J9JavaVM *vm)\n \treturn ret;\n }\n \n+/**\n+ * Determine the type of shared class cache that is enabled. Either the current default, \n+ * Bootstrap Classes Only, or user defined shared cache, enabled via \"-Xshareclasses\" on the command line. \n+ * \n+ * @param [in] vm Pointer to the VM structure for the JVM\n+ *\n+ * @return J9SharedClassCacheMode enum that idicates the Shared Cache Class that is in effect\n+ * \n+ */\n+J9SharedClassCacheMode\n+j9shr_getSharedClassCacheMode(J9JavaVM *vm)\n+{\n+\tJ9SharedClassCacheMode ret = J9SharedClassCacheUserDefined;\n+\t/* Only bootstrap classes are shared by default */\n+\tif (J9_ARE_ALL_BITS_SET(vm->sharedClassConfig->runtimeFlags, J9SHR_RUNTIMEFLAG_ENABLE_CACHEBOOTCLASSES)) {\n+        if (J9_ARE_ALL_BITS_SET(vm->sharedClassConfig->runtimeFlags, J9SHR_RUNTIMEFLAG_ENABLE_CACHE_NON_BOOT_CLASSES)) {\n+            ret = J9SharedClassCacheUserDefined;\n+        } else {\n+            ret = J9SharedClassCacheBootstrapOnly;\n+        }\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e8bf2dcc2af869e4816233cab2a9d74274d7877c"}, "originalPosition": 32}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e8bf2dcc2af869e4816233cab2a9d74274d7877c", "author": {"user": {"login": "Samantha-Rempel", "name": "Samantha-Rempel"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e8bf2dcc2af869e4816233cab2a9d74274d7877c", "committedDate": "2020-06-12T12:44:22Z", "message": "Add query to determine is Shared Classis the default SCC, returns TRUE is SCC is the default and FALSE otherwise.\n\nModified shrinit.h, shrinit,cpp and j9nonbuilder.h to add query that returns TRUE if Shared Class was enabled by default and FALSE if it was enabled via the command line.\n\nSigned-off-by: Samantha Rempel <Samantha.Rempel@ibm.com>"}, "afterCommit": {"oid": "05d9b0a5a988cc7f2b8dae05d5a06555f1e521a9", "author": {"user": {"login": "Samantha-Rempel", "name": "Samantha-Rempel"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/05d9b0a5a988cc7f2b8dae05d5a06555f1e521a9", "committedDate": "2020-06-12T15:04:34Z", "message": "Add query to determine is Shared Classis the default SCC, returns TRUE is SCC is the default and FALSE otherwise.\n\nModified shrinit.h, shrinit,cpp and j9nonbuilder.h to add query that returns TRUE if Shared Class was enabled by default and FALSE if it was enabled via the command line.\n\nSigned-off-by: Samantha Rempel <Samantha.Rempel@ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5ODI1ODgw", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#pullrequestreview-429825880", "createdAt": "2020-06-12T15:15:30Z", "commit": {"oid": "05d9b0a5a988cc7f2b8dae05d5a06555f1e521a9"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxNToxNTozMFrOGjH0Ng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxNToxNTozMFrOGjH0Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTQ4MTM5OA==", "bodyText": "\"Shared Cache Class\" should be \"Shared Class Cache\".", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#discussion_r439481398", "createdAt": "2020-06-12T15:15:30Z", "author": {"login": "hangshao0"}, "path": "runtime/shared_common/shrinit.cpp", "diffHunk": "@@ -3952,6 +3953,30 @@ j9shr_getCacheSizeBytes(J9JavaVM *vm)\n \treturn ret;\n }\n \n+/**\n+ * Determine the type of shared class cache that is enabled. Either the current default, \n+ * Bootstrap Classes Only, or user defined shared cache, enabled via \"-Xshareclasses\" on the command line. \n+ * \n+ * @param [in] vm Pointer to the VM structure for the JVM\n+ *\n+ * @return J9SharedClassCacheMode enum that idicates the Shared Cache Class that is in effect", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "05d9b0a5a988cc7f2b8dae05d5a06555f1e521a9"}, "originalPosition": 18}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "05d9b0a5a988cc7f2b8dae05d5a06555f1e521a9", "author": {"user": {"login": "Samantha-Rempel", "name": "Samantha-Rempel"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/05d9b0a5a988cc7f2b8dae05d5a06555f1e521a9", "committedDate": "2020-06-12T15:04:34Z", "message": "Add query to determine is Shared Classis the default SCC, returns TRUE is SCC is the default and FALSE otherwise.\n\nModified shrinit.h, shrinit,cpp and j9nonbuilder.h to add query that returns TRUE if Shared Class was enabled by default and FALSE if it was enabled via the command line.\n\nSigned-off-by: Samantha Rempel <Samantha.Rempel@ibm.com>"}, "afterCommit": {"oid": "fd3c685c0858a296f1207e791af6e1d12742cecb", "author": {"user": {"login": "Samantha-Rempel", "name": "Samantha-Rempel"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/fd3c685c0858a296f1207e791af6e1d12742cecb", "committedDate": "2020-06-12T15:23:03Z", "message": "Add query to determine is Shared Classis the default SCC, returns TRUE is SCC is the default and FALSE otherwise.\n\nModified shrinit.h, shrinit,cpp and j9nonbuilder.h to add query that returns TRUE if Shared Class was enabled by default and FALSE if it was enabled via the command line.\n\nSigned-off-by: Samantha Rempel <Samantha.Rempel@ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fd3c685c0858a296f1207e791af6e1d12742cecb", "author": {"user": {"login": "Samantha-Rempel", "name": "Samantha-Rempel"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/fd3c685c0858a296f1207e791af6e1d12742cecb", "committedDate": "2020-06-12T15:23:03Z", "message": "Add query to determine is Shared Classis the default SCC, returns TRUE is SCC is the default and FALSE otherwise.\n\nModified shrinit.h, shrinit,cpp and j9nonbuilder.h to add query that returns TRUE if Shared Class was enabled by default and FALSE if it was enabled via the command line.\n\nSigned-off-by: Samantha Rempel <Samantha.Rempel@ibm.com>"}, "afterCommit": {"oid": "adeb297c0ac00ebcd37c380c42e0de198f9adc3b", "author": {"user": {"login": "Samantha-Rempel", "name": "Samantha-Rempel"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/adeb297c0ac00ebcd37c380c42e0de198f9adc3b", "committedDate": "2020-06-12T15:28:28Z", "message": "Add query that returns an enum indicating the Shared Class Cache that is in effect.\n\nModified shrinit.h, shrinit,cpp and j9nonbuilder.h to add query that returns enum J9SharedClassCacheBootstrapOnly for the default SCC and J9SharedClassCacheUserDefined if it was enabled via the command line.\n\nSigned-off-by: Samantha Rempel <Samantha.Rempel@ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwOTQ2NTE5", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#pullrequestreview-430946519", "createdAt": "2020-06-15T19:52:57Z", "commit": {"oid": "adeb297c0ac00ebcd37c380c42e0de198f9adc3b"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxOTo1Mjo1N1rOGkAglw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxOTo1Mzo0M1rOGkAiCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQxMDI2Mw==", "bodyText": "I believe, as your comment says, only bootstrap classes are shared by default, so shouldn't ret be initialized to J9SharedClassCacheBootstrapOnly? There are three possible values, yet this can't return J9SharedClassCacheBoostrapAndExtension; that doesn't seem right.\n@hangshao0 Please comment.", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#discussion_r440410263", "createdAt": "2020-06-15T19:52:57Z", "author": {"login": "keithc-ca"}, "path": "runtime/shared_common/shrinit.cpp", "diffHunk": "@@ -3952,6 +3953,30 @@ j9shr_getCacheSizeBytes(J9JavaVM *vm)\n \treturn ret;\n }\n \n+/**\n+ * Determine the type of shared class cache that is enabled. Either the current default, \n+ * Bootstrap Classes Only, or user defined shared cache, enabled via \"-Xshareclasses\" on the command line. \n+ * \n+ * @param [in] vm Pointer to the VM structure for the JVM\n+ *\n+ * @return J9SharedClassCacheMode enum that idicates the Shared Class Cache that is in effect\n+ * \n+ */\n+J9SharedClassCacheMode\n+j9shr_getSharedClassCacheMode(J9JavaVM *vm)\n+{\n+\tJ9SharedClassCacheMode ret = J9SharedClassCacheUserDefined;\n+\t/* Only bootstrap classes are shared by default */\n+\tif (J9_ARE_ALL_BITS_SET(vm->sharedClassConfig->runtimeFlags, J9SHR_RUNTIMEFLAG_ENABLE_CACHEBOOTCLASSES)) {\n+\t\tif (J9_ARE_ALL_BITS_SET(vm->sharedClassConfig->runtimeFlags, J9SHR_RUNTIMEFLAG_ENABLE_CACHE_NON_BOOT_CLASSES)) {\n+\t\t\tret = J9SharedClassCacheUserDefined;\n+\t\t} else {\n+\t\t\tret = J9SharedClassCacheBootstrapOnly;\n+\t\t}\n+\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adeb297c0ac00ebcd37c380c42e0de198f9adc3b"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQxMDYzMw==", "bodyText": "typo: idicates -> indicates", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#discussion_r440410633", "createdAt": "2020-06-15T19:53:43Z", "author": {"login": "keithc-ca"}, "path": "runtime/shared_common/shrinit.cpp", "diffHunk": "@@ -3952,6 +3953,30 @@ j9shr_getCacheSizeBytes(J9JavaVM *vm)\n \treturn ret;\n }\n \n+/**\n+ * Determine the type of shared class cache that is enabled. Either the current default, \n+ * Bootstrap Classes Only, or user defined shared cache, enabled via \"-Xshareclasses\" on the command line. \n+ * \n+ * @param [in] vm Pointer to the VM structure for the JVM\n+ *\n+ * @return J9SharedClassCacheMode enum that idicates the Shared Class Cache that is in effect", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adeb297c0ac00ebcd37c380c42e0de198f9adc3b"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwOTU4NTky", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#pullrequestreview-430958592", "createdAt": "2020-06-15T20:12:01Z", "commit": {"oid": "adeb297c0ac00ebcd37c380c42e0de198f9adc3b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQyMDoxMjowMVrOGkBFoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQyMDoxMjowMVrOGkBFoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQxOTc0NA==", "bodyText": "\"Either the current default, Bootstrap Classes Only, or user defined shared cache\" should be something like:\n\"Either the current default (Bootstrap Classes Only), or user defined shared cache\"", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#discussion_r440419744", "createdAt": "2020-06-15T20:12:01Z", "author": {"login": "hangshao0"}, "path": "runtime/shared_common/shrinit.cpp", "diffHunk": "@@ -3952,6 +3953,30 @@ j9shr_getCacheSizeBytes(J9JavaVM *vm)\n \treturn ret;\n }\n \n+/**\n+ * Determine the type of shared class cache that is enabled. Either the current default, ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "adeb297c0ac00ebcd37c380c42e0de198f9adc3b"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "adeb297c0ac00ebcd37c380c42e0de198f9adc3b", "author": {"user": {"login": "Samantha-Rempel", "name": "Samantha-Rempel"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/adeb297c0ac00ebcd37c380c42e0de198f9adc3b", "committedDate": "2020-06-12T15:28:28Z", "message": "Add query that returns an enum indicating the Shared Class Cache that is in effect.\n\nModified shrinit.h, shrinit,cpp and j9nonbuilder.h to add query that returns enum J9SharedClassCacheBootstrapOnly for the default SCC and J9SharedClassCacheUserDefined if it was enabled via the command line.\n\nSigned-off-by: Samantha Rempel <Samantha.Rempel@ibm.com>"}, "afterCommit": {"oid": "671a9d9a07451a010238e9bd10271ef78204cd80", "author": {"user": {"login": "Samantha-Rempel", "name": "Samantha-Rempel"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/671a9d9a07451a010238e9bd10271ef78204cd80", "committedDate": "2020-06-16T13:24:30Z", "message": "Add query that returns an enum indicating the Shared Class Cache that is in effect.\n\nModified shrinit.h, shrinit,cpp and j9nonbuilder.h to add query that returns enum J9SharedClassCacheBootstrapOnly for the default SCC and J9SharedClassCacheUserDefined if it was enabled via the command line.\n\nSigned-off-by: Samantha Rempel <Samantha.Rempel@ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxNzYxMTYz", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#pullrequestreview-431761163", "createdAt": "2020-06-16T18:03:37Z", "commit": {"oid": "671a9d9a07451a010238e9bd10271ef78204cd80"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxODowMzozN1rOGknEkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxODowMzozN1rOGknEkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA0MjA2Ng==", "bodyText": "It's easier to see that all fields are initialized if they are set in the same order as they are declared. Please swap these two lines.", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#discussion_r441042066", "createdAt": "2020-06-16T18:03:37Z", "author": {"login": "keithc-ca"}, "path": "runtime/shared_common/shrinit.cpp", "diffHunk": "@@ -3516,6 +3516,7 @@ j9shr_init(J9JavaVM *vm, UDATA loadFlags, UDATA* nonfatal)\n \t\t}\n \n \t\tconfig->getCacheSizeBytes = j9shr_getCacheSizeBytes;\n+\t\tconfig->getSharedClassCacheMode = j9shr_getSharedClassCacheMode;\n \t\tconfig->getTotalUsableCacheBytes = j9shr_getTotalUsableCacheBytes;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "671a9d9a07451a010238e9bd10271ef78204cd80"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "363a8870fc0481e72d0efc1e6e3a82095c89d7fe", "author": {"user": {"login": "Samantha-Rempel", "name": "Samantha-Rempel"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/363a8870fc0481e72d0efc1e6e3a82095c89d7fe", "committedDate": "2020-06-16T18:19:40Z", "message": "Add query that returns an enum indicating the Shared Class Cache that is in effect.\n\nModified shrinit.h, shrinit,cpp and j9nonbuilder.h to add query that returns enum J9SharedClassCacheBootstrapOnly for the default SCC and J9SharedClassCacheUserDefined if it was enabled via the command line.\n\nSigned-off-by: Samantha Rempel <Samantha.Rempel@ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "671a9d9a07451a010238e9bd10271ef78204cd80", "author": {"user": {"login": "Samantha-Rempel", "name": "Samantha-Rempel"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/671a9d9a07451a010238e9bd10271ef78204cd80", "committedDate": "2020-06-16T13:24:30Z", "message": "Add query that returns an enum indicating the Shared Class Cache that is in effect.\n\nModified shrinit.h, shrinit,cpp and j9nonbuilder.h to add query that returns enum J9SharedClassCacheBootstrapOnly for the default SCC and J9SharedClassCacheUserDefined if it was enabled via the command line.\n\nSigned-off-by: Samantha Rempel <Samantha.Rempel@ibm.com>"}, "afterCommit": {"oid": "363a8870fc0481e72d0efc1e6e3a82095c89d7fe", "author": {"user": {"login": "Samantha-Rempel", "name": "Samantha-Rempel"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/363a8870fc0481e72d0efc1e6e3a82095c89d7fe", "committedDate": "2020-06-16T18:19:40Z", "message": "Add query that returns an enum indicating the Shared Class Cache that is in effect.\n\nModified shrinit.h, shrinit,cpp and j9nonbuilder.h to add query that returns enum J9SharedClassCacheBootstrapOnly for the default SCC and J9SharedClassCacheUserDefined if it was enabled via the command line.\n\nSigned-off-by: Samantha Rempel <Samantha.Rempel@ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxODcwMzY2", "url": "https://github.com/eclipse-openj9/openj9/pull/9734#pullrequestreview-431870366", "createdAt": "2020-06-16T20:34:15Z", "commit": {"oid": "363a8870fc0481e72d0efc1e6e3a82095c89d7fe"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 817, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}