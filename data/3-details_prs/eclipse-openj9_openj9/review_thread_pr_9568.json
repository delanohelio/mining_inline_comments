{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4MjEzNTIw", "number": 9568, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxOTo1MzoxN1rOD8oIXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwMjowNTowOVrOD8tQTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0ODk4NjUzOnYy", "diffSide": "RIGHT", "path": "runtime/oti/j9nonbuilder.h", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxOTo1MzoxN1rOGVr49Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQyMTowOTo0OVrOGVuUsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM5MjM3Mw==", "bodyText": "@cathyzhyi Is this helper fine?", "url": "https://github.com/eclipse-openj9/openj9/pull/9568#discussion_r425392373", "createdAt": "2020-05-14T19:53:17Z", "author": {"login": "tajila"}, "path": "runtime/oti/j9nonbuilder.h", "diffHunk": "@@ -4535,6 +4535,7 @@ typedef struct J9InternalVMFunctions {\n #endif /* J9VM_OPT_JITSERVER */\n \tIDATA ( *createJoinableThreadWithCategory)(omrthread_t* handle, UDATA stacksize, UDATA priority, UDATA suspend, omrthread_entrypoint_t entrypoint, void* entryarg, U_32 category) ;\n \tBOOLEAN ( *valueTypeCapableAcmp)(struct J9VMThread *currentThread, j9object_t lhs, j9object_t rhs) ;\n+\tBOOLEAN ( *isClassRefQtypeHelper)(struct J9Class *cpContextClass, U_16 cpIndex) ;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4476f0740986b53ecac8ae32c5e470a6c87829b"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQzMjI0MA==", "bodyText": "Yes, it works for us. Thanks!", "url": "https://github.com/eclipse-openj9/openj9/pull/9568#discussion_r425432240", "createdAt": "2020-05-14T21:09:49Z", "author": {"login": "cathyzhyi"}, "path": "runtime/oti/j9nonbuilder.h", "diffHunk": "@@ -4535,6 +4535,7 @@ typedef struct J9InternalVMFunctions {\n #endif /* J9VM_OPT_JITSERVER */\n \tIDATA ( *createJoinableThreadWithCategory)(omrthread_t* handle, UDATA stacksize, UDATA priority, UDATA suspend, omrthread_entrypoint_t entrypoint, void* entryarg, U_32 category) ;\n \tBOOLEAN ( *valueTypeCapableAcmp)(struct J9VMThread *currentThread, j9object_t lhs, j9object_t rhs) ;\n+\tBOOLEAN ( *isClassRefQtypeHelper)(struct J9Class *cpContextClass, U_16 cpIndex) ;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTM5MjM3Mw=="}, "originalCommit": {"oid": "e4476f0740986b53ecac8ae32c5e470a6c87829b"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0OTM2NzM0OnYy", "diffSide": "RIGHT", "path": "runtime/vm/ValueTypeHelpers.cpp", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQyMTo1NzoxNlrOGVvp8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQyMTo1NzoxNlrOGVvp8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ1NDA2NA==", "bodyText": "I'd rather this wasn't named \"helper\" - I don't think there would be a conflict with the inline C++ version.", "url": "https://github.com/eclipse-openj9/openj9/pull/9568#discussion_r425454064", "createdAt": "2020-05-14T21:57:16Z", "author": {"login": "gacholio"}, "path": "runtime/vm/ValueTypeHelpers.cpp", "diffHunk": "@@ -63,4 +63,10 @@ valueTypeCapableAcmp(J9VMThread *currentThread, j9object_t lhs, j9object_t rhs)\n \tMM_ObjectAccessBarrierAPI objectAccessBarrier(currentThread);\n \treturn VM_ValueTypeHelpers::acmp(currentThread, objectAccessBarrier, lhs, rhs);\n }\n+\n+BOOLEAN\n+isClassRefQtypeHelper(J9Class *cpContextClass, U_16 cpIndex)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4476f0740986b53ecac8ae32c5e470a6c87829b"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0OTgyNjA2OnYy", "diffSide": "RIGHT", "path": "runtime/vm/ValueTypeHelpers.hpp", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwMjowNTowOVrOGV0Chw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxMzowMzo0MVrOGWD8lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTUyNTg5NQ==", "bodyText": "Is there a verifier constraint that the length will never be 0?", "url": "https://github.com/eclipse-openj9/openj9/pull/9568#discussion_r425525895", "createdAt": "2020-05-15T02:05:09Z", "author": {"login": "gacholio"}, "path": "runtime/vm/ValueTypeHelpers.hpp", "diffHunk": "@@ -236,6 +236,24 @@ class VM_ValueTypeHelpers {\n \t\treturn acmpResult;\n \t}\n \n+\tstatic VMINLINE bool\n+\tisClassRefQtype(J9ConstantPool *ramCP, U_16 cpIndex)\n+\t{\n+\t\tJ9ROMStringRef *romStringRef = (J9ROMStringRef *)&ramCP->romConstantPool[cpIndex];\n+\t\tJ9UTF8 *classNameWrapper = J9ROMSTRINGREF_UTF8DATA(romStringRef);\n+\t\tU_16 classNameLength = J9UTF8_LENGTH(classNameWrapper);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4476f0740986b53ecac8ae32c5e470a6c87829b"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc4NjUxOA==", "bodyText": "yes checkNameImpl via bcvCheckClassName verifies that name length is not zero", "url": "https://github.com/eclipse-openj9/openj9/pull/9568#discussion_r425786518", "createdAt": "2020-05-15T13:03:41Z", "author": {"login": "tajila"}, "path": "runtime/vm/ValueTypeHelpers.hpp", "diffHunk": "@@ -236,6 +236,24 @@ class VM_ValueTypeHelpers {\n \t\treturn acmpResult;\n \t}\n \n+\tstatic VMINLINE bool\n+\tisClassRefQtype(J9ConstantPool *ramCP, U_16 cpIndex)\n+\t{\n+\t\tJ9ROMStringRef *romStringRef = (J9ROMStringRef *)&ramCP->romConstantPool[cpIndex];\n+\t\tJ9UTF8 *classNameWrapper = J9ROMSTRINGREF_UTF8DATA(romStringRef);\n+\t\tU_16 classNameLength = J9UTF8_LENGTH(classNameWrapper);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTUyNTg5NQ=="}, "originalCommit": {"oid": "e4476f0740986b53ecac8ae32c5e470a6c87829b"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 166, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}