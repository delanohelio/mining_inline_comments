{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3Mzg3MTI4", "number": 8416, "title": "AArch64: Add code for compressed refs - evaluateNULLCHKWithPossibleResolve", "bodyText": "This commit adds code to evaluateNULLCHKWithPossibleResolve to support\ncompressed references for aarch64.\nSigned-off-by: Akira Saitoh saiaki@jp.ibm.com", "createdAt": "2020-01-27T09:21:08Z", "url": "https://github.com/eclipse-openj9/openj9/pull/8416", "merged": true, "mergeCommit": {"oid": "3005ee1ebca3254fd1810fc50356048323476368"}, "closed": true, "closedAt": "2020-01-29T07:40:06Z", "author": {"login": "Akira1Saitoh"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb--_vPAFqTM0OTg2Nzg3NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-_KKOgBqjI5ODgyMjkwMzI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5ODY3ODc1", "url": "https://github.com/eclipse-openj9/openj9/pull/8416#pullrequestreview-349867875", "createdAt": "2020-01-29T05:21:57Z", "commit": {"oid": "69a14258c3559f8af2eb75881311324a5c4731ad"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQwNToyMTo1OFrOFi829g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQwNToyMTo1OFrOFi829g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjE5MzAxNA==", "bodyText": "This variable n is used only in the following if (comp->useCompressedPointers() && ... ) { ... } block.\nCan you move the variable into the block?", "url": "https://github.com/eclipse-openj9/openj9/pull/8416#discussion_r372193014", "createdAt": "2020-01-29T05:21:58Z", "author": {"login": "knn-k"}, "path": "runtime/compiler/aarch64/codegen/J9TreeEvaluator.cpp", "diffHunk": "@@ -971,11 +970,28 @@ J9::ARM64::TreeEvaluator::evaluateNULLCHKWithPossibleResolve(TR::Node *node, boo\n    TR::Snippet *snippet = new (cg->trHeapMemory()) TR::ARM64HelperCallSnippet(cg, node, snippetLabel, node->getSymbolReference(), NULL);\n    cg->addSnippet(snippet);\n    TR::Register *referenceReg = cg->evaluate(reference);\n-   TR::InstOpCode::Mnemonic compareOp = useCompressedPointers ? TR::InstOpCode::cbzw : TR::InstOpCode::cbzx;\n-   TR::Instruction *cbzInstruction = generateCompareBranchInstruction(cg, compareOp, node, referenceReg, snippetLabel, NULL);\n+   TR::Instruction *cbzInstruction = generateCompareBranchInstruction(cg, TR::InstOpCode::cbzx, node, referenceReg, snippetLabel, NULL);\n    cbzInstruction->setNeedsGCMap(0xffffffff);\n    snippet->gcMap().setGCRegisterMask(0xffffffff);\n \n+   TR::Node *n = NULL;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69a14258c3559f8af2eb75881311324a5c4731ad"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1e3533f6d12fc3e2d760ac29109b554b11f34d4", "author": {"user": {"login": "Akira1Saitoh", "name": "Akira Saito"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c1e3533f6d12fc3e2d760ac29109b554b11f34d4", "committedDate": "2020-01-29T05:32:57Z", "message": "AArch64: Add code for compressed refs - evaluateNULLCHKWithPossibleResolve\n\nThis commit adds code to `evaluateNULLCHKWithPossibleResolve` to support\ncompressed references for aarch64.\n\nSigned-off-by: Akira Saitoh <saiaki@jp.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "69a14258c3559f8af2eb75881311324a5c4731ad", "author": {"user": {"login": "Akira1Saitoh", "name": "Akira Saito"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/69a14258c3559f8af2eb75881311324a5c4731ad", "committedDate": "2020-01-27T09:19:52Z", "message": "AArch64: Add code for compressed refs - evaluateNULLCHKWithPossibleResolve\n\nThis commit adds code to `evaluateNULLCHKWithPossibleResolve` to support\ncompressed references for aarch64.\n\nSigned-off-by: Akira Saitoh <saiaki@jp.ibm.com>"}, "afterCommit": {"oid": "c1e3533f6d12fc3e2d760ac29109b554b11f34d4", "author": {"user": {"login": "Akira1Saitoh", "name": "Akira Saito"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c1e3533f6d12fc3e2d760ac29109b554b11f34d4", "committedDate": "2020-01-29T05:32:57Z", "message": "AArch64: Add code for compressed refs - evaluateNULLCHKWithPossibleResolve\n\nThis commit adds code to `evaluateNULLCHKWithPossibleResolve` to support\ncompressed references for aarch64.\n\nSigned-off-by: Akira Saitoh <saiaki@jp.ibm.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 677, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}