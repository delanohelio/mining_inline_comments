{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAyNjU1Mzk5", "number": 10873, "title": "Support -Xsyslog and -XX:+/-LegacyXlogOption", "bodyText": "-Xsyslog is the replacement for the -Xlog option. If\n-XX:-LegacyXlogOption is specified, no processing of -Xlog is done.\nIssue #10799\nDoc issue eclipse-openj9/openj9-docs#658", "createdAt": "2020-10-13T18:11:33Z", "url": "https://github.com/eclipse-openj9/openj9/pull/10873", "merged": true, "mergeCommit": {"oid": "4f6066d6325e1b9556bb6a9a1e4b68838d7a03c5"}, "closed": true, "closedAt": "2020-10-14T17:26:16Z", "author": {"login": "pshipton"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSPQHXgH2gAyNTAyNjU1Mzk5OjZmOGRmZjMzN2Q1MjYxYTk0MTg4NzM3ZjlmNjBkYjZhMzVhMmI5MTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSgljRgFqTUwODU3MTUxNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6f8dff337d5261a94188737f9f60db6a35a2b910", "author": {"user": {"login": "pshipton", "name": "Peter Shipton"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/6f8dff337d5261a94188737f9f60db6a35a2b910", "committedDate": "2020-10-13T21:14:03Z", "message": "Support -Xsyslog and -XX:+/-LegacyXlogOption\n\n-Xsyslog is the replacement for the -Xlog option. If\n-XX:-LegacyXlogOption is specified, no processing of -Xlog is done.\n\nIssue https://github.com/eclipse/openj9/issues/10799\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b8d605b1659ca3f4560d69d7a58a2954e70807dc", "author": {"user": {"login": "pshipton", "name": "Peter Shipton"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/b8d605b1659ca3f4560d69d7a58a2954e70807dc", "committedDate": "2020-10-13T18:08:53Z", "message": "Update -Xlog nls messages to use -XOSlog\n\nIssue https://github.com/eclipse/openj9/issues/10799\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>"}, "afterCommit": {"oid": "f96d8e5b573d971b205bfb9d30aa5b10f51bbc86", "author": {"user": {"login": "pshipton", "name": "Peter Shipton"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/f96d8e5b573d971b205bfb9d30aa5b10f51bbc86", "committedDate": "2020-10-13T21:14:16Z", "message": "Update -Xlog nls messages to use -Xsyslog\n\nIssue https://github.com/eclipse/openj9/issues/10799\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4Mjg1MDEz", "url": "https://github.com/eclipse-openj9/openj9/pull/10873#pullrequestreview-508285013", "createdAt": "2020-10-14T12:20:13Z", "commit": {"oid": "f96d8e5b573d971b205bfb9d30aa5b10f51bbc86"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMjoyMDoxM1rOHhQMwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMjoyMToxOVrOHhQPPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDYzMDQ2NQ==", "bodyText": "This should say 'Print JVM -Xsyslog help.'; all *.nls files seem to be missing that change.", "url": "https://github.com/eclipse-openj9/openj9/pull/10873#discussion_r504630465", "createdAt": "2020-10-14T12:20:13Z", "author": {"login": "keithc-ca"}, "path": "runtime/nls/j9vm/j9vm.nls", "diffHunk": "@@ -970,72 +970,72 @@ J9NLS_VM_XSCDMX_IGNORED.system_action=-Xscdmx will be ignored.\n J9NLS_VM_XSCDMX_IGNORED.user_response=Ignore this message, remove -Xscdmx, or enable -Xshareclasses.\n # END NON-TRANSLATABLE\n \n-# Help text for the -Xlog option. Note: please do not translate the text of the option flags: help, all, none, warn, error, info, config, vital\n+# Help text for the -Xsyslog option. Note: please do not translate the text of the option flags: help, all, none, warn, error, info, config, vital\n J9NLS_VM_XLOG_HELP01=\\nUsage:\\n\n # START NON-TRANSLATABLE\n J9NLS_VM_XLOG_HELP01.explanation=NOTAG\n J9NLS_VM_XLOG_HELP01.system_action=\n J9NLS_VM_XLOG_HELP01.user_response=\n # END NON-TRANSLATABLE\n \n-# -Xlog:help is not translatable\n-J9NLS_VM_XLOG_HELP02=  -Xlog:help              Print JVM -Xlog help.\n+# -Xsyslog:help is not translatable\n+J9NLS_VM_XLOG_HELP02=  -Xsyslog:help              Print JVM -Xlog help.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f96d8e5b573d971b205bfb9d30aa5b10f51bbc86"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDYzMTEwMw==", "bodyText": "Why is this buffer needed (it wasn't before)?", "url": "https://github.com/eclipse-openj9/openj9/pull/10873#discussion_r504631103", "createdAt": "2020-10-14T12:21:19Z", "author": {"login": "keithc-ca"}, "path": "runtime/vm/logsupport.c", "diffHunk": "@@ -264,42 +265,39 @@ parseLogOptions(char *options, UDATA *optionsFlags, UDATA *parseSucceeded)\n jint\n processXLogOptions(J9JavaVM * vm)\n {\n-\tIDATA xlogindex;\n-\tUDATA xlogflags, printhelp, tempflags;\n+\tIDATA xlogindex = FIND_ARG_IN_VMARGS_FORWARD(OPTIONAL_LIST_MATCH, VMOPT_XSYSLOG_OPT, NULL);\n+\t/* The default for -Xsyslog is to be turned on and capture 'error' and 'vital' type messages */\n+\tUDATA xlogflags = defaultLogOptions;\n+\tUDATA printhelp = FALSE;\n+\tUDATA tempflags = 0;\n \tjint rc = JNI_OK;\n \tJ9VMInitArgs* j9vm_args = vm->vmArgsArray;\n \n \tPORT_ACCESS_FROM_JAVAVM(vm);\n \n-\tprinthelp = FALSE;\n-\n-\t/* The default for -Xlog is to be turned on and capture 'error' and 'vital' type messages */\n-\txlogflags = defaultLogOptions;\n-\n-\txlogindex = FIND_ARG_IN_VMARGS_FORWARD(OPTIONAL_LIST_MATCH, XLOG_OPT, NULL);\n-\n \t/* If xlogindex == -1 nothing was specified, so use the default setting from above */\n \n \twhile (xlogindex >= 0) {\n-\t\tIDATA optionsfound;\n+\t\tIDATA optionsfound = 0;\n \t\tUDATA optionsparsed = FALSE;\n-\t\tchar *xlogoptions = NULL;\n+\t\tchar xlogoptionsbuf[SMALL_STRING_BUF_SIZE];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f96d8e5b573d971b205bfb9d30aa5b10f51bbc86"}, "originalPosition": 47}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78944999797428229f6febd3618a9fe81164f3c5", "author": {"user": {"login": "pshipton", "name": "Peter Shipton"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/78944999797428229f6febd3618a9fe81164f3c5", "committedDate": "2020-10-14T13:58:31Z", "message": "Update -Xlog nls messages to use -Xsyslog\n\nIssue https://github.com/eclipse/openj9/issues/10799\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f96d8e5b573d971b205bfb9d30aa5b10f51bbc86", "author": {"user": {"login": "pshipton", "name": "Peter Shipton"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/f96d8e5b573d971b205bfb9d30aa5b10f51bbc86", "committedDate": "2020-10-13T21:14:16Z", "message": "Update -Xlog nls messages to use -Xsyslog\n\nIssue https://github.com/eclipse/openj9/issues/10799\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>"}, "afterCommit": {"oid": "78944999797428229f6febd3618a9fe81164f3c5", "author": {"user": {"login": "pshipton", "name": "Peter Shipton"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/78944999797428229f6febd3618a9fe81164f3c5", "committedDate": "2020-10-14T13:58:31Z", "message": "Update -Xlog nls messages to use -Xsyslog\n\nIssue https://github.com/eclipse/openj9/issues/10799\n\nSigned-off-by: Peter Shipton <Peter_Shipton@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4NTcxNTE2", "url": "https://github.com/eclipse-openj9/openj9/pull/10873#pullrequestreview-508571516", "createdAt": "2020-10-14T17:25:51Z", "commit": {"oid": "78944999797428229f6febd3618a9fe81164f3c5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 155, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}