{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk2MzI2MTQx", "number": 9039, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNToxOToyOFrODtKOzA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNToxOToyOFrODtKOzA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4NjgwMTQwOnYy", "diffSide": "RIGHT", "path": "runtime/vm/classseg.c", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNToxOToyOFrOF-bCIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMVQxNTo1ODo0MFrOF-c4jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk5ODk0NA==", "bodyText": "May as well assign this in the declaration - if THR_PREEMPTIVE is off (which it never is), the code would fail to compile because of an unused variable. Suggest getting rid of the ifdefs while you're here.", "url": "https://github.com/eclipse-openj9/openj9/pull/9039#discussion_r400998944", "createdAt": "2020-03-31T15:19:28Z", "author": {"login": "gacholio"}, "path": "runtime/vm/classseg.c", "diffHunk": "@@ -108,10 +107,12 @@ allocateClassMemorySegment(J9JavaVM *javaVM, UDATA requiredSize, UDATA segmentTy\n {\n \tUDATA appropriateSize = 0;\n \tJ9MemorySegment *memorySegment = NULL;\n+\tomrthread_monitor_t segmentMutex = NULL;\n \t\n #if defined(J9VM_THR_PREEMPTIVE)\n-\tif (javaVM->classMemorySegments->segmentMutex) {\n-\t\tomrthread_monitor_enter(javaVM->classMemorySegments->segmentMutex);\n+\tsegmentMutex = javaVM->classMemorySegments->segmentMutex;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3004583de55fab81740d09aa54e13212daee9221"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTAyOTI2Mw==", "bodyText": "Updated as suggested", "url": "https://github.com/eclipse-openj9/openj9/pull/9039#discussion_r401029263", "createdAt": "2020-03-31T15:58:40Z", "author": {"login": "DanHeidinga"}, "path": "runtime/vm/classseg.c", "diffHunk": "@@ -108,10 +107,12 @@ allocateClassMemorySegment(J9JavaVM *javaVM, UDATA requiredSize, UDATA segmentTy\n {\n \tUDATA appropriateSize = 0;\n \tJ9MemorySegment *memorySegment = NULL;\n+\tomrthread_monitor_t segmentMutex = NULL;\n \t\n #if defined(J9VM_THR_PREEMPTIVE)\n-\tif (javaVM->classMemorySegments->segmentMutex) {\n-\t\tomrthread_monitor_enter(javaVM->classMemorySegments->segmentMutex);\n+\tsegmentMutex = javaVM->classMemorySegments->segmentMutex;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk5ODk0NA=="}, "originalCommit": {"oid": "3004583de55fab81740d09aa54e13212daee9221"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 458, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}