{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwODgyNjAw", "number": 11010, "title": "Call correct API in the snapshot mode to get gpuCode", "bodyText": "In snapshot mode, we store the gpuCodeOffset in J9JITExceptionTable instead of pointer to gpuCode. Use API to get the pointer from the given offset to get the gpuCode pointer.\nSigned-off-by: Rahil Shah rahil@ca.ibm.com", "createdAt": "2020-10-27T16:22:56Z", "url": "https://github.com/eclipse-openj9/openj9/pull/11010", "merged": true, "mergeCommit": {"oid": "a2f514f9692a2b592ff109e256ebb4d26c003582"}, "closed": true, "closedAt": "2020-10-28T13:30:42Z", "author": {"login": "r30shah"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWrz0MgFqTUxNzkyMTM5Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWsG54AFqTUxNzk0MTk3MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3OTIxMzky", "url": "https://github.com/eclipse-openj9/openj9/pull/11010#pullrequestreview-517921392", "createdAt": "2020-10-27T16:45:50Z", "commit": {"oid": "9c44eed9f5b8ca00f0928f924fa08d1eca801a75"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNjo0NTo1MVrOHpGPvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QxNjo0NTo1MVrOHpGPvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjg1NTk5Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            #if defined(J9VM_OPT_SNAPSHOTS)\n          \n          \n            \n                  return J9JIT_DATACACHE_OFFSET_TO_PTR(metaData->gpuCodeOffset, GpuMetaData);\n          \n          \n            \n            #else /* defined(J9VM_OPT_SNAPSHOT) */\n          \n          \n            \n                  return (GpuMetaData*)metaData->gpuCode;\n          \n          \n            \n            #endif\n          \n          \n            \n                  return (GpuMetaData*)J9JITEXCEPTIONTABLE_GPUCODE_GET(metaData);", "url": "https://github.com/eclipse-openj9/openj9/pull/11010#discussion_r512855997", "createdAt": "2020-10-27T16:45:51Z", "author": {"login": "ymanton"}, "path": "runtime/compiler/runtime/GPUHelpers.cpp", "diffHunk": "@@ -1097,7 +1097,11 @@ static GpuMetaData* getGPUMetaData(uint8_t* startPC)\n    {\n       J9VMThread *vmThread = jitConfig->javaVM->internalVMFunctions->currentVMThread(jitConfig->javaVM);\n       TR_MethodMetaData * metaData = jitConfig->jitGetExceptionTableFromPC(vmThread, (UDATA)startPC);\n+#if defined(J9VM_OPT_SNAPSHOTS)\n+      return J9JIT_DATACACHE_OFFSET_TO_PTR(metaData->gpuCodeOffset, GpuMetaData);\n+#else /* defined(J9VM_OPT_SNAPSHOT) */\n       return (GpuMetaData*)metaData->gpuCode;\n+#endif", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c44eed9f5b8ca00f0928f924fa08d1eca801a75"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd6b80febcdf82c159e03c19bf3a27ce611ee83b", "author": {"user": {"login": "r30shah", "name": "Rahil Shah"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/fd6b80febcdf82c159e03c19bf3a27ce611ee83b", "committedDate": "2020-10-27T16:57:13Z", "message": "Call correct API in the snapshot mode to get gpuCode\n\nIn snapshot mode, we store the gpuCodeOffset in J9JITExceptionTable\ninstead of pointer to gpuCode. Use API to get the pointer from the given\noffset to get the gpuCode pointer.\n\nSigned-off-by: Rahil Shah <rahil@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9c44eed9f5b8ca00f0928f924fa08d1eca801a75", "author": {"user": {"login": "r30shah", "name": "Rahil Shah"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/9c44eed9f5b8ca00f0928f924fa08d1eca801a75", "committedDate": "2020-10-27T16:22:15Z", "message": "Call correct API in the snapshot mode to get gpuCode\n\nIn snapshot mode, we store the gpuCodeOffset in J9JITExceptionTable\ninstead of pointer to gpuCode. Use API to get the pointer from the given\noffset to get the gpuCode pointer.\n\nSigned-off-by: Rahil Shah <rahil@ca.ibm.com>"}, "afterCommit": {"oid": "fd6b80febcdf82c159e03c19bf3a27ce611ee83b", "author": {"user": {"login": "r30shah", "name": "Rahil Shah"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/fd6b80febcdf82c159e03c19bf3a27ce611ee83b", "committedDate": "2020-10-27T16:57:13Z", "message": "Call correct API in the snapshot mode to get gpuCode\n\nIn snapshot mode, we store the gpuCodeOffset in J9JITExceptionTable\ninstead of pointer to gpuCode. Use API to get the pointer from the given\noffset to get the gpuCode pointer.\n\nSigned-off-by: Rahil Shah <rahil@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3OTQxOTcw", "url": "https://github.com/eclipse-openj9/openj9/pull/11010#pullrequestreview-517941970", "createdAt": "2020-10-27T17:06:56Z", "commit": {"oid": "fd6b80febcdf82c159e03c19bf3a27ce611ee83b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 11, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}