{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE5NDU0NDY5", "number": 11156, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQyMTozNzowNVrOE34h6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwMDo0NTo1NlrOE37_7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI3MDMzMzIwOnYy", "diffSide": "RIGHT", "path": "runtime/vm/vmprops.c", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQyMTozNzowNVrOHxfLcA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQyMTo1NjowMVrOHxfvSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTY1MzEwNA==", "bodyText": "This is incorrect - should be pool_removeElement.", "url": "https://github.com/eclipse-openj9/openj9/pull/11156#discussion_r521653104", "createdAt": "2020-11-11T21:37:05Z", "author": {"login": "gacholio"}, "path": "runtime/vm/vmprops.c", "diffHunk": "@@ -1040,13 +1040,22 @@ getJ9VMVersionString(J9JavaVM *vm) {\n UDATA\n addSystemProperty(J9JavaVM * vm, const char* propName,  const char* propValue, UDATA flags)\n {\n+\tchar *convertedPropValue = NULL;\n \tJ9VMSystemProperty* newProp = pool_newElement(vm->systemProperties);\n \tif (NULL == newProp) {\n \t\treturn J9SYSPROP_ERROR_OUT_OF_MEMORY;\n \t}\n \n+\t/* Convert the value string from the platform encoding to the modified UTF8 */\n+\tconvertedPropValue = (char *)getMUtf8String(vm, propValue, strlen(propValue));\n+\tif (NULL == convertedPropValue) {\n+\t\tPORT_ACCESS_FROM_JAVAVM(vm);\n+\t\tj9mem_free_memory(newProp);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8fc5773e427a2df3f8afb9392694e3a0545ce4d8"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTY2MjI4MQ==", "bodyText": "The fix here will to be moved out as suggested by Pete.", "url": "https://github.com/eclipse-openj9/openj9/pull/11156#discussion_r521662281", "createdAt": "2020-11-11T21:56:01Z", "author": {"login": "ChengJin01"}, "path": "runtime/vm/vmprops.c", "diffHunk": "@@ -1040,13 +1040,22 @@ getJ9VMVersionString(J9JavaVM *vm) {\n UDATA\n addSystemProperty(J9JavaVM * vm, const char* propName,  const char* propValue, UDATA flags)\n {\n+\tchar *convertedPropValue = NULL;\n \tJ9VMSystemProperty* newProp = pool_newElement(vm->systemProperties);\n \tif (NULL == newProp) {\n \t\treturn J9SYSPROP_ERROR_OUT_OF_MEMORY;\n \t}\n \n+\t/* Convert the value string from the platform encoding to the modified UTF8 */\n+\tconvertedPropValue = (char *)getMUtf8String(vm, propValue, strlen(propValue));\n+\tif (NULL == convertedPropValue) {\n+\t\tPORT_ACCESS_FROM_JAVAVM(vm);\n+\t\tj9mem_free_memory(newProp);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTY1MzEwNA=="}, "originalCommit": {"oid": "8fc5773e427a2df3f8afb9392694e3a0545ce4d8"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI3MDMzNTE1OnYy", "diffSide": "RIGHT", "path": "runtime/vm/vmprops.c", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQyMTozNzoyOFrOHxfMdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQyMjoyMDo1M1rOHxgaRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTY1MzM2Nw==", "bodyText": "This is going to be a little trickier. Sometimes the arguments to addSystemProperty() are already converted to utf8.\nSee https://github.com/eclipse/openj9/blob/master/runtime/vm/vmprops.c#L856-L861\nand https://github.com/eclipse/openj9/blob/master/runtime/vm/vmprops.c#L907\nEither the callers of addSystemProperty() need to pass in a new argument to indicate the value should be converted, or the conversion needs to be done elsewhere before addSystemProperty() is called.", "url": "https://github.com/eclipse-openj9/openj9/pull/11156#discussion_r521653367", "createdAt": "2020-11-11T21:37:28Z", "author": {"login": "pshipton"}, "path": "runtime/vm/vmprops.c", "diffHunk": "@@ -1040,13 +1040,22 @@ getJ9VMVersionString(J9JavaVM *vm) {\n UDATA\n addSystemProperty(J9JavaVM * vm, const char* propName,  const char* propValue, UDATA flags)\n {\n+\tchar *convertedPropValue = NULL;\n \tJ9VMSystemProperty* newProp = pool_newElement(vm->systemProperties);\n \tif (NULL == newProp) {\n \t\treturn J9SYSPROP_ERROR_OUT_OF_MEMORY;\n \t}\n \n+\t/* Convert the value string from the platform encoding to the modified UTF8 */\n+\tconvertedPropValue = (char *)getMUtf8String(vm, propValue, strlen(propValue));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8fc5773e427a2df3f8afb9392694e3a0545ce4d8"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTY2NjI0Ng==", "bodyText": "As discussed with @pshipton offline, the fix above will be moved to getOptionArg to ensure all functions in addModularitySystemProperties including addPropertiesForOptionWithAssignArg are fixed in the same way to address all these cases for the platform setting.", "url": "https://github.com/eclipse-openj9/openj9/pull/11156#discussion_r521666246", "createdAt": "2020-11-11T22:04:59Z", "author": {"login": "ChengJin01"}, "path": "runtime/vm/vmprops.c", "diffHunk": "@@ -1040,13 +1040,22 @@ getJ9VMVersionString(J9JavaVM *vm) {\n UDATA\n addSystemProperty(J9JavaVM * vm, const char* propName,  const char* propValue, UDATA flags)\n {\n+\tchar *convertedPropValue = NULL;\n \tJ9VMSystemProperty* newProp = pool_newElement(vm->systemProperties);\n \tif (NULL == newProp) {\n \t\treturn J9SYSPROP_ERROR_OUT_OF_MEMORY;\n \t}\n \n+\t/* Convert the value string from the platform encoding to the modified UTF8 */\n+\tconvertedPropValue = (char *)getMUtf8String(vm, propValue, strlen(propValue));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTY1MzM2Nw=="}, "originalCommit": {"oid": "8fc5773e427a2df3f8afb9392694e3a0545ce4d8"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTY3MzI4NQ==", "bodyText": "The code has been updated at 3032987. Will compile a build locally with the fix to see whether it still works good as expected.", "url": "https://github.com/eclipse-openj9/openj9/pull/11156#discussion_r521673285", "createdAt": "2020-11-11T22:20:53Z", "author": {"login": "ChengJin01"}, "path": "runtime/vm/vmprops.c", "diffHunk": "@@ -1040,13 +1040,22 @@ getJ9VMVersionString(J9JavaVM *vm) {\n UDATA\n addSystemProperty(J9JavaVM * vm, const char* propName,  const char* propValue, UDATA flags)\n {\n+\tchar *convertedPropValue = NULL;\n \tJ9VMSystemProperty* newProp = pool_newElement(vm->systemProperties);\n \tif (NULL == newProp) {\n \t\treturn J9SYSPROP_ERROR_OUT_OF_MEMORY;\n \t}\n \n+\t/* Convert the value string from the platform encoding to the modified UTF8 */\n+\tconvertedPropValue = (char *)getMUtf8String(vm, propValue, strlen(propValue));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTY1MzM2Nw=="}, "originalCommit": {"oid": "8fc5773e427a2df3f8afb9392694e3a0545ce4d8"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI3MDU1NDA3OnYy", "diffSide": "RIGHT", "path": "runtime/vm/vmprops.c", "isResolved": true, "comments": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQyMjo1MzozNVrOHxhOEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwMTowNTozNVrOHxlSNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTY4NjU0Ng==", "bodyText": "The places that use this need to pass the J9SYSPROP_FLAG_VALUE_ALLOCATED flag to addSystemProperty() so the memory is freed.", "url": "https://github.com/eclipse-openj9/openj9/pull/11156#discussion_r521686546", "createdAt": "2020-11-11T22:53:35Z", "author": {"login": "pshipton"}, "path": "runtime/vm/vmprops.c", "diffHunk": "@@ -152,6 +152,11 @@ getOptionArg(J9JavaVM *vm, IDATA argIndex, UDATA optionNameLen)\n \t}\n \n _end:\n+\tif (NULL != optionArg) {\n+\t\t/* Convert the value string from the platform encoding to the modified UTF8 */\n+\t\toptionArg = (char *)getMUtf8String(vm, optionArg, strlen(optionArg));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "30329871ee1a60edf626ffa8e542638851913045"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTY4NzQxNw==", "bodyText": "and addPropertyForOptionWithModuleListArg() should free the memory.", "url": "https://github.com/eclipse-openj9/openj9/pull/11156#discussion_r521687417", "createdAt": "2020-11-11T22:55:50Z", "author": {"login": "pshipton"}, "path": "runtime/vm/vmprops.c", "diffHunk": "@@ -152,6 +152,11 @@ getOptionArg(J9JavaVM *vm, IDATA argIndex, UDATA optionNameLen)\n \t}\n \n _end:\n+\tif (NULL != optionArg) {\n+\t\t/* Convert the value string from the platform encoding to the modified UTF8 */\n+\t\toptionArg = (char *)getMUtf8String(vm, optionArg, strlen(optionArg));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTY4NjU0Ng=="}, "originalCommit": {"oid": "30329871ee1a60edf626ffa8e542638851913045"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTY4NzY2Ng==", "bodyText": "Also, pls add a function comment for this function which mentions the return value is allocated and needs to be freed.", "url": "https://github.com/eclipse-openj9/openj9/pull/11156#discussion_r521687666", "createdAt": "2020-11-11T22:56:33Z", "author": {"login": "pshipton"}, "path": "runtime/vm/vmprops.c", "diffHunk": "@@ -152,6 +152,11 @@ getOptionArg(J9JavaVM *vm, IDATA argIndex, UDATA optionNameLen)\n \t}\n \n _end:\n+\tif (NULL != optionArg) {\n+\t\t/* Convert the value string from the platform encoding to the modified UTF8 */\n+\t\toptionArg = (char *)getMUtf8String(vm, optionArg, strlen(optionArg));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTY4NjU0Ng=="}, "originalCommit": {"oid": "30329871ee1a60edf626ffa8e542638851913045"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTY5MjUwMA==", "bodyText": "Updated the code against the suggestions above.", "url": "https://github.com/eclipse-openj9/openj9/pull/11156#discussion_r521692500", "createdAt": "2020-11-11T23:10:23Z", "author": {"login": "ChengJin01"}, "path": "runtime/vm/vmprops.c", "diffHunk": "@@ -152,6 +152,11 @@ getOptionArg(J9JavaVM *vm, IDATA argIndex, UDATA optionNameLen)\n \t}\n \n _end:\n+\tif (NULL != optionArg) {\n+\t\t/* Convert the value string from the platform encoding to the modified UTF8 */\n+\t\toptionArg = (char *)getMUtf8String(vm, optionArg, strlen(optionArg));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTY4NjU0Ng=="}, "originalCommit": {"oid": "30329871ee1a60edf626ffa8e542638851913045"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTY5OTE5OA==", "bodyText": "addPropertyForOptionWithModuleListArg() needs to free the memory, and addPropertiesForOptionWithAssignArg needs to pass J9SYSPROP_FLAG_VALUE_ALLOCATED as well.", "url": "https://github.com/eclipse-openj9/openj9/pull/11156#discussion_r521699198", "createdAt": "2020-11-11T23:24:00Z", "author": {"login": "pshipton"}, "path": "runtime/vm/vmprops.c", "diffHunk": "@@ -152,6 +152,11 @@ getOptionArg(J9JavaVM *vm, IDATA argIndex, UDATA optionNameLen)\n \t}\n \n _end:\n+\tif (NULL != optionArg) {\n+\t\t/* Convert the value string from the platform encoding to the modified UTF8 */\n+\t\toptionArg = (char *)getMUtf8String(vm, optionArg, strlen(optionArg));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTY4NjU0Ng=="}, "originalCommit": {"oid": "30329871ee1a60edf626ffa8e542638851913045"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTcwNjk4MQ==", "bodyText": "Added code j9mem_free_memory(optionArg) in the loop in addPropertyForOptionWithModuleListArg().", "url": "https://github.com/eclipse-openj9/openj9/pull/11156#discussion_r521706981", "createdAt": "2020-11-11T23:40:55Z", "author": {"login": "ChengJin01"}, "path": "runtime/vm/vmprops.c", "diffHunk": "@@ -152,6 +152,11 @@ getOptionArg(J9JavaVM *vm, IDATA argIndex, UDATA optionNameLen)\n \t}\n \n _end:\n+\tif (NULL != optionArg) {\n+\t\t/* Convert the value string from the platform encoding to the modified UTF8 */\n+\t\toptionArg = (char *)getMUtf8String(vm, optionArg, strlen(optionArg));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTY4NjU0Ng=="}, "originalCommit": {"oid": "30329871ee1a60edf626ffa8e542638851913045"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTcwOTg0OA==", "bodyText": "Added J9SYSPROP_FLAG_VALUE_ALLOCATED to addPropertiesForOptionWithAssignArg given only J9SYSPROP_FLAG_NAME_ALLOCATED is passed to addSystemProperty in there.", "url": "https://github.com/eclipse-openj9/openj9/pull/11156#discussion_r521709848", "createdAt": "2020-11-11T23:49:46Z", "author": {"login": "ChengJin01"}, "path": "runtime/vm/vmprops.c", "diffHunk": "@@ -152,6 +152,11 @@ getOptionArg(J9JavaVM *vm, IDATA argIndex, UDATA optionNameLen)\n \t}\n \n _end:\n+\tif (NULL != optionArg) {\n+\t\t/* Convert the value string from the platform encoding to the modified UTF8 */\n+\t\toptionArg = (char *)getMUtf8String(vm, optionArg, strlen(optionArg));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTY4NjU0Ng=="}, "originalCommit": {"oid": "30329871ee1a60edf626ffa8e542638851913045"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTcxMDgyNQ==", "bodyText": "Ok, and pls add a function comment for this function which mentions the return value is allocated and needs to be freed.", "url": "https://github.com/eclipse-openj9/openj9/pull/11156#discussion_r521710825", "createdAt": "2020-11-11T23:52:59Z", "author": {"login": "pshipton"}, "path": "runtime/vm/vmprops.c", "diffHunk": "@@ -152,6 +152,11 @@ getOptionArg(J9JavaVM *vm, IDATA argIndex, UDATA optionNameLen)\n \t}\n \n _end:\n+\tif (NULL != optionArg) {\n+\t\t/* Convert the value string from the platform encoding to the modified UTF8 */\n+\t\toptionArg = (char *)getMUtf8String(vm, optionArg, strlen(optionArg));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTY4NjU0Ng=="}, "originalCommit": {"oid": "30329871ee1a60edf626ffa8e542638851913045"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTcxNzAzNw==", "bodyText": "Added comment for optionArg in addPropertiesForOptionWithAssignArg.", "url": "https://github.com/eclipse-openj9/openj9/pull/11156#discussion_r521717037", "createdAt": "2020-11-12T00:03:32Z", "author": {"login": "ChengJin01"}, "path": "runtime/vm/vmprops.c", "diffHunk": "@@ -152,6 +152,11 @@ getOptionArg(J9JavaVM *vm, IDATA argIndex, UDATA optionNameLen)\n \t}\n \n _end:\n+\tif (NULL != optionArg) {\n+\t\t/* Convert the value string from the platform encoding to the modified UTF8 */\n+\t\toptionArg = (char *)getMUtf8String(vm, optionArg, strlen(optionArg));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTY4NjU0Ng=="}, "originalCommit": {"oid": "30329871ee1a60edf626ffa8e542638851913045"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTc0MTQ4Mw==", "bodyText": "I'm asking for a function comment to be added to getOptionArg().", "url": "https://github.com/eclipse-openj9/openj9/pull/11156#discussion_r521741483", "createdAt": "2020-11-12T00:45:28Z", "author": {"login": "pshipton"}, "path": "runtime/vm/vmprops.c", "diffHunk": "@@ -152,6 +152,11 @@ getOptionArg(J9JavaVM *vm, IDATA argIndex, UDATA optionNameLen)\n \t}\n \n _end:\n+\tif (NULL != optionArg) {\n+\t\t/* Convert the value string from the platform encoding to the modified UTF8 */\n+\t\toptionArg = (char *)getMUtf8String(vm, optionArg, strlen(optionArg));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTY4NjU0Ng=="}, "originalCommit": {"oid": "30329871ee1a60edf626ffa8e542638851913045"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTc1MzE0Mw==", "bodyText": "Added the function comment to getOptionArg() as suggested above.", "url": "https://github.com/eclipse-openj9/openj9/pull/11156#discussion_r521753143", "createdAt": "2020-11-12T01:05:35Z", "author": {"login": "ChengJin01"}, "path": "runtime/vm/vmprops.c", "diffHunk": "@@ -152,6 +152,11 @@ getOptionArg(J9JavaVM *vm, IDATA argIndex, UDATA optionNameLen)\n \t}\n \n _end:\n+\tif (NULL != optionArg) {\n+\t\t/* Convert the value string from the platform encoding to the modified UTF8 */\n+\t\toptionArg = (char *)getMUtf8String(vm, optionArg, strlen(optionArg));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTY4NjU0Ng=="}, "originalCommit": {"oid": "30329871ee1a60edf626ffa8e542638851913045"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI3MDcwOTA4OnYy", "diffSide": "RIGHT", "path": "runtime/vm/vmprops.c", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQyMzo1MjowMFrOHxir4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwMDowMzo1NlrOHxjF-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTcxMDU2Mg==", "bodyText": "Above there is a case that does goto _end which needs to free optionArg", "url": "https://github.com/eclipse-openj9/openj9/pull/11156#discussion_r521710562", "createdAt": "2020-11-11T23:52:00Z", "author": {"login": "pshipton"}, "path": "runtime/vm/vmprops.c", "diffHunk": "@@ -309,6 +316,8 @@ addPropertyForOptionWithModuleListArg(J9JavaVM *vm, const char *optionName, IDAT\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\tCONSUME_ARG(j9vm_args, argIndex);\n+\n+\t\t\t\tj9mem_free_memory(optionArg);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b2e824030689adfa86045ba633c9b28b27fea9b"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTcxMDY5Mw==", "bodyText": "two cases actually", "url": "https://github.com/eclipse-openj9/openj9/pull/11156#discussion_r521710693", "createdAt": "2020-11-11T23:52:22Z", "author": {"login": "pshipton"}, "path": "runtime/vm/vmprops.c", "diffHunk": "@@ -309,6 +316,8 @@ addPropertyForOptionWithModuleListArg(J9JavaVM *vm, const char *optionName, IDAT\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\tCONSUME_ARG(j9vm_args, argIndex);\n+\n+\t\t\t\tj9mem_free_memory(optionArg);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTcxMDU2Mg=="}, "originalCommit": {"oid": "7b2e824030689adfa86045ba633c9b28b27fea9b"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTcxNzI0Mg==", "bodyText": "Fixed the cases as mentioned above.", "url": "https://github.com/eclipse-openj9/openj9/pull/11156#discussion_r521717242", "createdAt": "2020-11-12T00:03:56Z", "author": {"login": "ChengJin01"}, "path": "runtime/vm/vmprops.c", "diffHunk": "@@ -309,6 +316,8 @@ addPropertyForOptionWithModuleListArg(J9JavaVM *vm, const char *optionName, IDAT\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\tCONSUME_ARG(j9vm_args, argIndex);\n+\n+\t\t\t\tj9mem_free_memory(optionArg);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTcxMDU2Mg=="}, "originalCommit": {"oid": "7b2e824030689adfa86045ba633c9b28b27fea9b"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI3MDkwMTU5OnYy", "diffSide": "RIGHT", "path": "runtime/vm/vmprops.c", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwMDo0NTo1NlrOHxklrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwMTowNjoxM1rOHxlThA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTc0MTc0Mg==", "bodyText": "There are 4 places calling this, why only comment one of them?", "url": "https://github.com/eclipse-openj9/openj9/pull/11156#discussion_r521741742", "createdAt": "2020-11-12T00:45:56Z", "author": {"login": "pshipton"}, "path": "runtime/vm/vmprops.c", "diffHunk": "@@ -370,6 +381,7 @@ addPropertiesForOptionWithAssignArg(J9JavaVM *vm, const char *optionName, UDATA\n \t\tUDATA indexLen = 1;\n \n \t\tdo {\n+\t\t\t/* The allocated return value for optionArg needs to be freed after use */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c59946fdbc16ad2ac90c0a476c45b253b2edad1"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTc1MzQ3Ng==", "bodyText": "Added the function comment for getOptionArg.", "url": "https://github.com/eclipse-openj9/openj9/pull/11156#discussion_r521753476", "createdAt": "2020-11-12T01:06:13Z", "author": {"login": "ChengJin01"}, "path": "runtime/vm/vmprops.c", "diffHunk": "@@ -370,6 +381,7 @@ addPropertiesForOptionWithAssignArg(J9JavaVM *vm, const char *optionName, UDATA\n \t\tUDATA indexLen = 1;\n \n \t\tdo {\n+\t\t\t/* The allocated return value for optionArg needs to be freed after use */", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTc0MTc0Mg=="}, "originalCommit": {"oid": "0c59946fdbc16ad2ac90c0a476c45b253b2edad1"}, "originalPosition": 67}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 896, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}