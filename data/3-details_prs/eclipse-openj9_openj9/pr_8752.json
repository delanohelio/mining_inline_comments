{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgzOTM4NDE0", "number": 8752, "title": "Fix stackmap always marking ConstantDynamic as objects", "bodyText": "Check Condy return type before marking stack slot\n\nSigned-off-by: Jack Lu Jack.S.Lu@ibm.com", "createdAt": "2020-03-04T22:35:39Z", "url": "https://github.com/eclipse-openj9/openj9/pull/8752", "merged": true, "mergeCommit": {"oid": "b4d5d32438dd749e55d1223efcbf8dd38ac3ee08"}, "closed": true, "closedAt": "2020-03-09T12:56:06Z", "author": {"login": "fengxue-IS"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcKfEmCAFqTM2OTE4NjAyNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcKlydwAFqTM2OTMyNzYyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5MTg2MDI1", "url": "https://github.com/eclipse-openj9/openj9/pull/8752#pullrequestreview-369186025", "createdAt": "2020-03-04T22:57:23Z", "commit": {"oid": "5cdffa99129e5a20a53953ac0f6fac38e0210919"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQyMjo1NzoyM1rOFyAtYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNFQyMjo1NzoyM1rOFyAtYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzk4NDczNw==", "bodyText": "Do not use implicit zero comparisons. Also, strictly speaking the constant should be on the left of the comparison.", "url": "https://github.com/eclipse-openj9/openj9/pull/8752#discussion_r387984737", "createdAt": "2020-03-04T22:57:23Z", "author": {"login": "gacholio"}, "path": "runtime/stackmap/stackmap.c", "diffHunk": "@@ -350,7 +350,14 @@ mapStack(UDATA *scratch, UDATA totalStack, U_8 * map, J9ROMClass * romClass, J9R\n \t\t\t\t}\n \n \t\t\t\tif (pool[index].slot2) {\n-\t\t\t\t\tPUSH(OBJ);\n+\t\t\t\t\t/* Check for primitive values resolved from ConstantDynamic */\n+\t\t\t\t\tif (((pool[index].slot2 & J9DescriptionCpTypeMask) == J9DescriptionCpTypeConstantDynamic)\n+\t\t\t\t\t&& (pool[index].slot2 >> J9DescriptionReturnTypeShift)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5cdffa99129e5a20a53953ac0f6fac38e0210919"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f635f8d501ea3fb36b95f6c0c5f81dda18e41a7d", "author": {"user": {"login": "fengxue-IS", "name": "Jack Lu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/f635f8d501ea3fb36b95f6c0c5f81dda18e41a7d", "committedDate": "2020-03-04T23:00:58Z", "message": "Fix stackmap always marking ConstantDynamic as objects\n\n- Check Condy return type before marking stack slot\n\nSigned-off-by: Jack Lu <Jack.S.Lu@ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5cdffa99129e5a20a53953ac0f6fac38e0210919", "author": {"user": {"login": "fengxue-IS", "name": "Jack Lu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/5cdffa99129e5a20a53953ac0f6fac38e0210919", "committedDate": "2020-03-04T22:35:08Z", "message": "Fix stackmap always marking ConstantDynamic as objects\n\n- Check Condy return type before marking stack slot\n\nSigned-off-by: Jack Lu <Jack.S.Lu@ibm.com>"}, "afterCommit": {"oid": "f635f8d501ea3fb36b95f6c0c5f81dda18e41a7d", "author": {"user": {"login": "fengxue-IS", "name": "Jack Lu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/f635f8d501ea3fb36b95f6c0c5f81dda18e41a7d", "committedDate": "2020-03-04T23:00:58Z", "message": "Fix stackmap always marking ConstantDynamic as objects\n\n- Check Condy return type before marking stack slot\n\nSigned-off-by: Jack Lu <Jack.S.Lu@ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5Mjg2MTM0", "url": "https://github.com/eclipse-openj9/openj9/pull/8752#pullrequestreview-369286134", "createdAt": "2020-03-05T04:16:26Z", "commit": {"oid": "f635f8d501ea3fb36b95f6c0c5f81dda18e41a7d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5MzI3NjIz", "url": "https://github.com/eclipse-openj9/openj9/pull/8752#pullrequestreview-369327623", "createdAt": "2020-03-05T06:46:56Z", "commit": {"oid": "f635f8d501ea3fb36b95f6c0c5f81dda18e41a7d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 662, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}