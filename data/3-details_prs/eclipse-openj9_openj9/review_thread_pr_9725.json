{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0NTI4NDUz", "number": 9725, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxNDozNzowMlrOEAibRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxNDo1NzozMlrOEAjE0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4OTk5NDkyOnYy", "diffSide": "RIGHT", "path": "runtime/vm/jvminit.c", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxNDozNzowMlrOGb4R5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxNDo0ODo0MFrOGb45LA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTg4NjgyMQ==", "bodyText": "Can you add a comment here in the code explaining why this option is different and prints to stdout when everything else goes to stderr?\nI have reservations about making this change as it contradicts all of our existing options direction.", "url": "https://github.com/eclipse-openj9/openj9/pull/9725#discussion_r431886821", "createdAt": "2020-05-28T14:37:02Z", "author": {"login": "DanHeidinga"}, "path": "runtime/vm/jvminit.c", "diffHunk": "@@ -6368,19 +6368,19 @@ protectedInitializeJavaVM(J9PortLibrary* portLibrary, void * userData)\n \t\t\t * as \"size_t\" type.\n \t\t\t */\n \n-\t\t\tj9tty_printf(PORTLIB, \"[Global flags]\\n\");\n+\t\t\tj9file_printf(PORTLIB, J9PORT_TTY_OUT, \"[Global flags]\\n\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0be7529151094ec69ded53c82962361329a8f9a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTg5MzE4MQ==", "bodyText": "There isn't really an alternative if we want to support PrintFlagsFinal: the output has been produced by Hotspot for many years on stdout and is expected on stdout.\nelasticsearch specifically does not see it if it's produced on stderr.", "url": "https://github.com/eclipse-openj9/openj9/pull/9725#discussion_r431893181", "createdAt": "2020-05-28T14:44:14Z", "author": {"login": "mstoodle"}, "path": "runtime/vm/jvminit.c", "diffHunk": "@@ -6368,19 +6368,19 @@ protectedInitializeJavaVM(J9PortLibrary* portLibrary, void * userData)\n \t\t\t * as \"size_t\" type.\n \t\t\t */\n \n-\t\t\tj9tty_printf(PORTLIB, \"[Global flags]\\n\");\n+\t\t\tj9file_printf(PORTLIB, J9PORT_TTY_OUT, \"[Global flags]\\n\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTg4NjgyMQ=="}, "originalCommit": {"oid": "c0be7529151094ec69ded53c82962361329a8f9a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTg5MzkxOQ==", "bodyText": "I've added a new line to the main comment that introduces the output that's desired.", "url": "https://github.com/eclipse-openj9/openj9/pull/9725#discussion_r431893919", "createdAt": "2020-05-28T14:45:06Z", "author": {"login": "mstoodle"}, "path": "runtime/vm/jvminit.c", "diffHunk": "@@ -6368,19 +6368,19 @@ protectedInitializeJavaVM(J9PortLibrary* portLibrary, void * userData)\n \t\t\t * as \"size_t\" type.\n \t\t\t */\n \n-\t\t\tj9tty_printf(PORTLIB, \"[Global flags]\\n\");\n+\t\t\tj9file_printf(PORTLIB, J9PORT_TTY_OUT, \"[Global flags]\\n\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTg4NjgyMQ=="}, "originalCommit": {"oid": "c0be7529151094ec69ded53c82962361329a8f9a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTg5Njg3Ng==", "bodyText": "Understood.  I dislike adding the inconsistency in our output strategy as it means understanding and explaining when it's OK to send to stdout rather than stderr.  The comment you've added helps to clarify that.", "url": "https://github.com/eclipse-openj9/openj9/pull/9725#discussion_r431896876", "createdAt": "2020-05-28T14:48:40Z", "author": {"login": "DanHeidinga"}, "path": "runtime/vm/jvminit.c", "diffHunk": "@@ -6368,19 +6368,19 @@ protectedInitializeJavaVM(J9PortLibrary* portLibrary, void * userData)\n \t\t\t * as \"size_t\" type.\n \t\t\t */\n \n-\t\t\tj9tty_printf(PORTLIB, \"[Global flags]\\n\");\n+\t\t\tj9file_printf(PORTLIB, J9PORT_TTY_OUT, \"[Global flags]\\n\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTg4NjgyMQ=="}, "originalCommit": {"oid": "c0be7529151094ec69ded53c82962361329a8f9a"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5MDA0MjE1OnYy", "diffSide": "RIGHT", "path": "runtime/vm/jvminit.c", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxNDo0NTozNFrOGb4vJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxNDo0NzowM1rOGb4z6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTg5NDMwOA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t * NOTE that Hotspot produces this output on STDOUT, which means this\n          \n          \n            \n            \t\t\t * NOTE that Hotspot produces this output on STDOUT, and applications expect to parse it there,\n          \n          \n            \n            \t\t\t * which means this ....", "url": "https://github.com/eclipse-openj9/openj9/pull/9725#discussion_r431894308", "createdAt": "2020-05-28T14:45:34Z", "author": {"login": "DanHeidinga"}, "path": "runtime/vm/jvminit.c", "diffHunk": "@@ -6366,21 +6366,25 @@ protectedInitializeJavaVM(J9PortLibrary* portLibrary, void * userData)\n \t\t\t *\n \t\t\t * OpenJ9 stores both of these values as UDATA, so they will both be printed\n \t\t\t * as \"size_t\" type.\n+\t\t\t *\n+\t\t\t * NOTE that Hotspot produces this output on STDOUT, which means this", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44255e37137977cedccec21346dc122a27ee0c5a"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTg5NTUzMQ==", "bodyText": "In my mind, the more important part is that apps expect it to be output to stdout for parsing.  Does Hotspot produce all their output to stdout?  That wouldn't be sufficient to move everything from stderr -> stdout :)", "url": "https://github.com/eclipse-openj9/openj9/pull/9725#discussion_r431895531", "createdAt": "2020-05-28T14:47:03Z", "author": {"login": "DanHeidinga"}, "path": "runtime/vm/jvminit.c", "diffHunk": "@@ -6366,21 +6366,25 @@ protectedInitializeJavaVM(J9PortLibrary* portLibrary, void * userData)\n \t\t\t *\n \t\t\t * OpenJ9 stores both of these values as UDATA, so they will both be printed\n \t\t\t * as \"size_t\" type.\n+\t\t\t *\n+\t\t\t * NOTE that Hotspot produces this output on STDOUT, which means this", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTg5NDMwOA=="}, "originalCommit": {"oid": "44255e37137977cedccec21346dc122a27ee0c5a"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY5MDEwMTI4OnYy", "diffSide": "RIGHT", "path": "runtime/vm/jvminit.c", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxNDo1NzozMlrOGb5UNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxNTowNjo0OVrOGb5uEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTkwMzc5OA==", "bodyText": "Thanks Mark.  I agree it doesn't make sense to take the principled stand here.\nSorry to make another request, but can you reflow the comment so the lines are consistent lengths?  I was lazy in how I posted the suggested change and used .... (which should be removed) rather than reflowing the full comment.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t *\n          \n          \n            \n            \t\t\t * NOTE that Hotspot produces this output on STDOUT, and applications expect to parse it there,\n          \n          \n            \n            \t\t\t * which means this ....\n          \n          \n            \n            \t\t\t * code does not use j9tty_printf like most of the VM (which prints to\n          \n          \n            \n            \t\t\t * STDERR). Instead, j9file_printf(PORTLIB, J9PORT_TTY_OUT, ...) is used.\n          \n          \n            \n            \t\t\t *\n          \n          \n            \n            \t\t\t * NOTE that Hotspot produces this output on STDOUT, and applications\n          \n          \n            \n            \t\t\t * expect to parse it there, which means this code does not use j9tty_printf\n          \n          \n            \n            \t\t\t * like most of the VM (which prints to STDERR). Instead, \n          \n          \n            \n            \t\t\t * j9file_printf(PORTLIB, J9PORT_TTY_OUT, ...) is used.", "url": "https://github.com/eclipse-openj9/openj9/pull/9725#discussion_r431903798", "createdAt": "2020-05-28T14:57:32Z", "author": {"login": "DanHeidinga"}, "path": "runtime/vm/jvminit.c", "diffHunk": "@@ -6366,21 +6366,26 @@ protectedInitializeJavaVM(J9PortLibrary* portLibrary, void * userData)\n \t\t\t *\n \t\t\t * OpenJ9 stores both of these values as UDATA, so they will both be printed\n \t\t\t * as \"size_t\" type.\n+\t\t\t *\n+\t\t\t * NOTE that Hotspot produces this output on STDOUT, and applications expect to parse it there,\n+\t\t\t * which means this ....\n+\t\t\t * code does not use j9tty_printf like most of the VM (which prints to\n+\t\t\t * STDERR). Instead, j9file_printf(PORTLIB, J9PORT_TTY_OUT, ...) is used.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5a3a06d20a99c005393a318152c538b20fb916c"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTkxMDQxNw==", "bodyText": "I'll fix it and then squash. Thanks for the suggestion; sorry for not paying close enough attention to your suggested change.", "url": "https://github.com/eclipse-openj9/openj9/pull/9725#discussion_r431910417", "createdAt": "2020-05-28T15:06:49Z", "author": {"login": "mstoodle"}, "path": "runtime/vm/jvminit.c", "diffHunk": "@@ -6366,21 +6366,26 @@ protectedInitializeJavaVM(J9PortLibrary* portLibrary, void * userData)\n \t\t\t *\n \t\t\t * OpenJ9 stores both of these values as UDATA, so they will both be printed\n \t\t\t * as \"size_t\" type.\n+\t\t\t *\n+\t\t\t * NOTE that Hotspot produces this output on STDOUT, and applications expect to parse it there,\n+\t\t\t * which means this ....\n+\t\t\t * code does not use j9tty_printf like most of the VM (which prints to\n+\t\t\t * STDERR). Instead, j9file_printf(PORTLIB, J9PORT_TTY_OUT, ...) is used.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTkwMzc5OA=="}, "originalCommit": {"oid": "f5a3a06d20a99c005393a318152c538b20fb916c"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 80, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}