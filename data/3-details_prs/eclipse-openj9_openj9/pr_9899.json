{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1MjcyODY1", "number": 9899, "title": "[Test] Disable the timeout setting on RISC-V", "bodyText": "The code change is to disable the timeout setting due to the lack\nof JIT on RISC-V.\nSigned-off-by: Cheng Jin jincheng@ca.ibm.com", "createdAt": "2020-06-16T14:56:26Z", "url": "https://github.com/eclipse-openj9/openj9/pull/9899", "merged": true, "mergeCommit": {"oid": "efdb86514d722cf83747d9d8badc449fe6121658"}, "closed": true, "closedAt": "2020-06-19T00:24:20Z", "author": {"login": "ChengJin01"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcr7CeuAFqTQzMTg1NTIwOQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcsn2EHAFqTQzMzcyODQ5MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxODU1MjA5", "url": "https://github.com/eclipse-openj9/openj9/pull/9899#pullrequestreview-431855209", "createdAt": "2020-06-16T20:11:56Z", "commit": {"oid": "5b2da262f1fe15edd90c590a8c3ebef94d08b272"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQyMDoxMTo1NlrOGkrcBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQyMDoxMTo1NlrOGkrcBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTExMzYwNg==", "bodyText": "This is going to break Linux.", "url": "https://github.com/eclipse-openj9/openj9/pull/9899#discussion_r441113606", "createdAt": "2020-06-16T20:11:56Z", "author": {"login": "pshipton"}, "path": "test/functional/cmdline_options_tester/src/Test.java", "diffHunk": "@@ -409,7 +409,9 @@ public void dumpVerboseOutput(boolean result) {\n \n \tpublic static int getUnixPID(Process process) throws Exception {\n \t\tClass<?> cl = process.getClass();\n-\t\tif (!cl.getName().equals(\"java.lang.UNIXProcess\")) {\n+\t\tif (!cl.getName().equals(\"java.lang.UNIXProcess\") \n+\t\t|| !cl.getName().equals(\"java.lang.ProcessImpl\")  /* intended for Fedora_Linux/RISC-V */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5b2da262f1fe15edd90c590a8c3ebef94d08b272"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5b2da262f1fe15edd90c590a8c3ebef94d08b272", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/5b2da262f1fe15edd90c590a8c3ebef94d08b272", "committedDate": "2020-06-16T14:55:26Z", "message": "[Test] Disable JIT & the timeout setting on RISC-V\n\nThe code change is to disable JIT in test code\nand disable the timeout setting due to the lack\nof JIT on RISC-V.\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}, "afterCommit": {"oid": "906724f52764099452146c022619d9b0595242a2", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/906724f52764099452146c022619d9b0595242a2", "committedDate": "2020-06-16T20:45:16Z", "message": "[Test] Disable JIT & the timeout setting on RISC-V\n\nThe code change is to disable JIT in test code\nand disable the timeout setting due to the lack\nof JIT on RISC-V.\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxODkzNzAz", "url": "https://github.com/eclipse-openj9/openj9/pull/9899#pullrequestreview-431893703", "createdAt": "2020-06-16T21:09:43Z", "commit": {"oid": "906724f52764099452146c022619d9b0595242a2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQyMTowOTo0M1rOGktRUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQyMTowOTo0M1rOGktRUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTE0MzYzNQ==", "bodyText": "The check against ProcessImpl is not needed and is confusing, pls use if (!cl.getName().equals(\"java.lang.UNIXProcess\") || isRiscv)", "url": "https://github.com/eclipse-openj9/openj9/pull/9899#discussion_r441143635", "createdAt": "2020-06-16T21:09:43Z", "author": {"login": "pshipton"}, "path": "test/functional/cmdline_options_tester/src/Test.java", "diffHunk": "@@ -409,7 +412,9 @@ public void dumpVerboseOutput(boolean result) {\n \n \tpublic static int getUnixPID(Process process) throws Exception {\n \t\tClass<?> cl = process.getClass();\n-\t\tif (!cl.getName().equals(\"java.lang.UNIXProcess\")) {\n+\t\tif (!cl.getName().equals(\"java.lang.UNIXProcess\") \n+\t\t|| (!cl.getName().equals(\"java.lang.ProcessImpl\") && isRiscv)  /* intended for Fedora_Linux/RISC-V */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "906724f52764099452146c022619d9b0595242a2"}, "originalPosition": 23}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "906724f52764099452146c022619d9b0595242a2", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/906724f52764099452146c022619d9b0595242a2", "committedDate": "2020-06-16T20:45:16Z", "message": "[Test] Disable JIT & the timeout setting on RISC-V\n\nThe code change is to disable JIT in test code\nand disable the timeout setting due to the lack\nof JIT on RISC-V.\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}, "afterCommit": {"oid": "9b6753fff9b540464ef59be5dbefc828e784bd5d", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/9b6753fff9b540464ef59be5dbefc828e784bd5d", "committedDate": "2020-06-16T21:34:41Z", "message": "[Test] Disable JIT & the timeout setting on RISC-V\n\nThe code change is to disable JIT in test code\nand disable the timeout setting due to the lack\nof JIT on RISC-V.\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9b6753fff9b540464ef59be5dbefc828e784bd5d", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/9b6753fff9b540464ef59be5dbefc828e784bd5d", "committedDate": "2020-06-16T21:34:41Z", "message": "[Test] Disable JIT & the timeout setting on RISC-V\n\nThe code change is to disable JIT in test code\nand disable the timeout setting due to the lack\nof JIT on RISC-V.\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}, "afterCommit": {"oid": "5fbda2da49fa44897add6b4f1d92dec280777a5c", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/5fbda2da49fa44897add6b4f1d92dec280777a5c", "committedDate": "2020-06-16T21:35:33Z", "message": "[Test] Disable JIT & the timeout setting on RISC-V\n\nThe code change is to disable JIT in test code\nand disable the timeout setting due to the lack\nof JIT on RISC-V.\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5fbda2da49fa44897add6b4f1d92dec280777a5c", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/5fbda2da49fa44897add6b4f1d92dec280777a5c", "committedDate": "2020-06-16T21:35:33Z", "message": "[Test] Disable JIT & the timeout setting on RISC-V\n\nThe code change is to disable JIT in test code\nand disable the timeout setting due to the lack\nof JIT on RISC-V.\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}, "afterCommit": {"oid": "5cb219337b7be53bb20b2484444152bbf1a07fd8", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/5cb219337b7be53bb20b2484444152bbf1a07fd8", "committedDate": "2020-06-17T16:57:29Z", "message": "[Test] Disable JIT & the timeout setting on RISC-V\n\nThe code change is to disable JIT in test code\nand disable the timeout setting due to the lack\nof JIT on RISC-V.\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyNzA1MDEw", "url": "https://github.com/eclipse-openj9/openj9/pull/9899#pullrequestreview-432705010", "createdAt": "2020-06-17T19:21:47Z", "commit": {"oid": "5cb219337b7be53bb20b2484444152bbf1a07fd8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxOToyMTo0N1rOGlUFsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxOToyMTo0N1rOGlUFsw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc3OTYzNQ==", "bodyText": "Is it better to change the default timeout when testing on riscv rather than modifying the test framework?", "url": "https://github.com/eclipse-openj9/openj9/pull/9899#discussion_r441779635", "createdAt": "2020-06-17T19:21:47Z", "author": {"login": "pshipton"}, "path": "test/functional/cmdline_options_tester/src/Test.java", "diffHunk": "@@ -546,7 +549,10 @@ public ProcessKiller(Process proc, long timeout, String exeToDebug) {\n \t\tpublic synchronized void run() {\n \t\t\tfinal long endTime = System.currentTimeMillis() + _procTimeout;\n \t\t\twhile (_proc.isAlive()) {\n-\t\t\t\tlong currTimeout = endTime - System.currentTimeMillis();\n+\t\t\t\t/* Set up a fixed timer without timeout for test on RISC-V\n+\t\t\t\t * as it is pretty slow without JIT support for now.\n+\t\t\t\t */\n+\t\t\t\tlong currTimeout = (isRiscv) ? _procTimeout : (endTime - System.currentTimeMillis());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5cb219337b7be53bb20b2484444152bbf1a07fd8"}, "originalPosition": 34}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5cb219337b7be53bb20b2484444152bbf1a07fd8", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/5cb219337b7be53bb20b2484444152bbf1a07fd8", "committedDate": "2020-06-17T16:57:29Z", "message": "[Test] Disable JIT & the timeout setting on RISC-V\n\nThe code change is to disable JIT in test code\nand disable the timeout setting due to the lack\nof JIT on RISC-V.\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}, "afterCommit": {"oid": "bdf780e908a326200bcc41972bc4d1a3044330c2", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/bdf780e908a326200bcc41972bc4d1a3044330c2", "committedDate": "2020-06-17T20:41:00Z", "message": "[Test] Disable the timeout setting on RISC-V\n\nThe code change is to disable the timeout setting\ndue to the lack of JIT on RISC-V.\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bdf780e908a326200bcc41972bc4d1a3044330c2", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/bdf780e908a326200bcc41972bc4d1a3044330c2", "committedDate": "2020-06-17T20:41:00Z", "message": "[Test] Disable the timeout setting on RISC-V\n\nThe code change is to disable the timeout setting\ndue to the lack of JIT on RISC-V.\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}, "afterCommit": {"oid": "7b87d806a30144707bfc729ac078ecdb9eee38ae", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/7b87d806a30144707bfc729ac078ecdb9eee38ae", "committedDate": "2020-06-17T22:41:17Z", "message": "[Test] Disable the timeout setting on RISC-V\n\nThe code change is to disable the timeout setting\ndue to the lack of JIT on RISC-V.\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyOTAyMTUz", "url": "https://github.com/eclipse-openj9/openj9/pull/9899#pullrequestreview-432902153", "createdAt": "2020-06-18T02:42:06Z", "commit": {"oid": "7b87d806a30144707bfc729ac078ecdb9eee38ae"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQwMjo0MjowNlrOGldqkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQwMjo0MjowNlrOGldqkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTkzNjUzMA==", "bodyText": "Seems a little excessive for a single test to run for 10 days.", "url": "https://github.com/eclipse-openj9/openj9/pull/9899#discussion_r441936530", "createdAt": "2020-06-18T02:42:06Z", "author": {"login": "pshipton"}, "path": "test/functional/cmdline_options_tester/src/TestConfigParser.java", "diffHunk": "@@ -156,6 +159,10 @@ public void xmlStartElement(String elementName, Hashtable attributes) {\n \t\t\t\t\tString modeHints = (String)attributes.get(\"modeHints\");\n \t\t\t\t\tif (hasAllowedHints(modeHints)) {\n \t\t\t\t\t\tString timeout = (String)attributes.get(\"timeout\");\n+\t\t\t\t\t\t\n+\t\t\t\t\t\t/* Set 10 days (864000 secs) for timeout on RISC-V due to the lack of JIT */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b87d806a30144707bfc729ac078ecdb9eee38ae"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c18c7f8c23dd1098ce9daf9128f4013c7f17e127", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c18c7f8c23dd1098ce9daf9128f4013c7f17e127", "committedDate": "2020-06-18T03:58:58Z", "message": "[Test] Disable the timeout setting on RISC-V\n\nThe code change is to disable the timeout setting\ndue to the lack of JIT on RISC-V.\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7b87d806a30144707bfc729ac078ecdb9eee38ae", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/7b87d806a30144707bfc729ac078ecdb9eee38ae", "committedDate": "2020-06-17T22:41:17Z", "message": "[Test] Disable the timeout setting on RISC-V\n\nThe code change is to disable the timeout setting\ndue to the lack of JIT on RISC-V.\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}, "afterCommit": {"oid": "c18c7f8c23dd1098ce9daf9128f4013c7f17e127", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c18c7f8c23dd1098ce9daf9128f4013c7f17e127", "committedDate": "2020-06-18T03:58:58Z", "message": "[Test] Disable the timeout setting on RISC-V\n\nThe code change is to disable the timeout setting\ndue to the lack of JIT on RISC-V.\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNzI4NDkx", "url": "https://github.com/eclipse-openj9/openj9/pull/9899#pullrequestreview-433728491", "createdAt": "2020-06-19T00:24:06Z", "commit": {"oid": "c18c7f8c23dd1098ce9daf9128f4013c7f17e127"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 697, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}