{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU5NjI4NTcy", "number": 10305, "title": "Handle -XX:[+|-]PortableSharedCache in the VM init module", "bodyText": "Move the parsing of -XX:[+|-]PortableSharedCache to an earlier point in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE and J9_EXTENDED_RUNTIME2_ENABLE_AOT to cache the parsing results of -XX:[+|-]PortableSharedCache and -Xaot/-Xnoaot\nSet Compressed reference shift to 3 (low memory heap ceiling shift) by default in containers\n\nIssue: #7965\nDepnds on: eclipse/omr#5436\nSigned-off-by: Harry Yu harryyu1994@gmail.com", "createdAt": "2020-07-30T21:59:32Z", "url": "https://github.com/eclipse-openj9/openj9/pull/10305", "merged": true, "mergeCommit": {"oid": "1b58a7248a2a8f8acac8fbcbcd29e45dfdbf18f8"}, "closed": true, "closedAt": "2020-09-08T16:38:08Z", "author": {"login": "harryyu1994"}, "timelineItems": {"totalCount": 54, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc6HXDGABqjM2MDYwNTAwNDM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdGvtnygBqjM3Mzg5OTUyNjE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0829b3ab430db1c0a3a56281ca50dae6dde3a0e7", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/0829b3ab430db1c0a3a56281ca50dae6dde3a0e7", "committedDate": "2020-07-30T21:52:15Z", "message": "Fix compressedref shift to 3 for portable SCC\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "fd33010ab81c3a083c106ca0e31959a1bbe6f3ff", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/fd33010ab81c3a083c106ca0e31959a1bbe6f3ff", "committedDate": "2020-07-30T22:27:58Z", "message": "Fix compressedref shift to 3 for portable SCC\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxMDQyOTQ0", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#pullrequestreview-461042944", "createdAt": "2020-08-04T17:57:39Z", "commit": {"oid": "fd33010ab81c3a083c106ca0e31959a1bbe6f3ff"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNzo1NzozOVrOG7rXjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxNzo1NzozOVrOG7rXjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTIyOTcxMA==", "bodyText": "I don't like style portableSharedCacheIndex == noportableSharedCacheIndex means both not found.\nIt is hard to read. Please be explicit.\nAlso this change means we always will run with shift 3 in any container run by default.\n@DanHeidinga @vijaysun-omr Most of container runs uses small heap so use bit shift 0. Do we want to change this behaviour for all runs in container? 0-shift has better performance\nAlso please change formatting. Should be\n    if (....) {\n        ....\n    } else if () {\n        ....\n    } else if () {\n        ....\n    } else {\n        ....\n    }", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r465229710", "createdAt": "2020-08-04T17:57:39Z", "author": {"login": "dmitripivkine"}, "path": "runtime/gc_modron_startup/mmparse.cpp", "diffHunk": "@@ -1247,6 +1247,25 @@ gcParseXXArguments(J9JavaVM *vm)\n \t\t}\n \t}\n \n+\t{\n+\t\tIDATA portableSharedCacheIndex = FIND_ARG_IN_VMARGS(EXACT_MATCH, VMOPT_XXPORTABLESHAREDCACHE, NULL);\n+\t\tIDATA noportableSharedCacheIndex = FIND_ARG_IN_VMARGS(EXACT_MATCH, VMOPT_XXNOPORTABLESHAREDCACHE, NULL);\n+\t\tif (portableSharedCacheIndex > noportableSharedCacheIndex) {\n+\t\t\textensions->shouldForceToLowMemoryHeapCeilingShiftIfPossible = true;\n+\t\t}\n+\t\telse if (portableSharedCacheIndex < noportableSharedCacheIndex) {\n+\t\t\textensions->shouldForceToLowMemoryHeapCeilingShiftIfPossible = false;\n+\t\t}\n+\t\telse {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd33010ab81c3a083c106ca0e31959a1bbe6f3ff"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fd33010ab81c3a083c106ca0e31959a1bbe6f3ff", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/fd33010ab81c3a083c106ca0e31959a1bbe6f3ff", "committedDate": "2020-07-30T22:27:58Z", "message": "Fix compressedref shift to 3 for portable SCC\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "876a329510aba7792439a9109ca5fbf700cbf8e6", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/876a329510aba7792439a9109ca5fbf700cbf8e6", "committedDate": "2020-08-04T18:50:02Z", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxMDg3OTI3", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#pullrequestreview-461087927", "createdAt": "2020-08-04T19:03:54Z", "commit": {"oid": "876a329510aba7792439a9109ca5fbf700cbf8e6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxOTowMzo1NFrOG7tj0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQxOTowMzo1NFrOG7tj0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTI2NTYxNw==", "bodyText": "please join two lines to one:\n    } else {", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r465265617", "createdAt": "2020-08-04T19:03:54Z", "author": {"login": "dmitripivkine"}, "path": "runtime/gc_modron_startup/mmparse.cpp", "diffHunk": "@@ -1247,6 +1247,19 @@ gcParseXXArguments(J9JavaVM *vm)\n \t\t}\n \t}\n \n+\t{\n+\t\tIDATA portableSharedCacheIndex = FIND_ARG_IN_VMARGS(EXACT_MATCH, VMOPT_XXPORTABLESHAREDCACHE, NULL);\n+\t\tIDATA noportableSharedCacheIndex = FIND_ARG_IN_VMARGS(EXACT_MATCH, VMOPT_XXNOPORTABLESHAREDCACHE, NULL);\n+\t\tif (portableSharedCacheIndex != noportableSharedCacheIndex) {\n+\t\t\t/* At least one option is set. Find the right most one. */\n+\t\t\tif (portableSharedCacheIndex > noportableSharedCacheIndex) {\n+\t\t\t\textensions->portableSharedCacheEnabled = true;\n+\t\t\t}\n+\t\t\telse {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "876a329510aba7792439a9109ca5fbf700cbf8e6"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "876a329510aba7792439a9109ca5fbf700cbf8e6", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/876a329510aba7792439a9109ca5fbf700cbf8e6", "committedDate": "2020-08-04T18:50:02Z", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "9cd72575ca91a78b6a410d6b0c44648a4b949301", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/9cd72575ca91a78b6a410d6b0c44648a4b949301", "committedDate": "2020-08-04T19:06:24Z", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9cd72575ca91a78b6a410d6b0c44648a4b949301", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/9cd72575ca91a78b6a410d6b0c44648a4b949301", "committedDate": "2020-08-04T19:06:24Z", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "e21fb16a29b0dd7daf2b7747276424e5b2b8e861", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e21fb16a29b0dd7daf2b7747276424e5b2b8e861", "committedDate": "2020-08-04T22:31:39Z", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e21fb16a29b0dd7daf2b7747276424e5b2b8e861", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e21fb16a29b0dd7daf2b7747276424e5b2b8e861", "committedDate": "2020-08-04T22:31:39Z", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "a27cff8036e66ba151ea3fb2dee5bc86106bb841", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/a27cff8036e66ba151ea3fb2dee5bc86106bb841", "committedDate": "2020-08-05T21:15:00Z", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a27cff8036e66ba151ea3fb2dee5bc86106bb841", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/a27cff8036e66ba151ea3fb2dee5bc86106bb841", "committedDate": "2020-08-05T21:15:00Z", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "db7f5f8a1f279d772cea1202fb5e8cb0b1f481f1", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/db7f5f8a1f279d772cea1202fb5e8cb0b1f481f1", "committedDate": "2020-08-05T21:31:15Z", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "db7f5f8a1f279d772cea1202fb5e8cb0b1f481f1", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/db7f5f8a1f279d772cea1202fb5e8cb0b1f481f1", "committedDate": "2020-08-05T21:31:15Z", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "eebf4e5f3f35329d4293d7d45ca7aaf265dae4e9", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/eebf4e5f3f35329d4293d7d45ca7aaf265dae4e9", "committedDate": "2020-08-05T22:00:09Z", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNzM1NTM2", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#pullrequestreview-462735536", "createdAt": "2020-08-06T17:34:27Z", "commit": {"oid": "eebf4e5f3f35329d4293d7d45ca7aaf265dae4e9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNzozNDoyOFrOG89iHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNzozNDoyOFrOG89iHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjU3NTkwMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tchar optionsBuffer[2*EsMaxPath];\n          \n          \n            \n            \t\t\tchar optionsBuffer[2 * EsMaxPath];", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r466575900", "createdAt": "2020-08-06T17:34:28Z", "author": {"login": "dmitripivkine"}, "path": "runtime/gc_modron_startup/mmparse.cpp", "diffHunk": "@@ -1247,6 +1247,42 @@ gcParseXXArguments(J9JavaVM *vm)\n \t\t}\n \t}\n \n+\t{\n+#if defined(J9VM_ARCH_X86)\n+\t\tIDATA portableSharedCacheIndex = FIND_ARG_IN_VMARGS(EXACT_MATCH, VMOPT_XXPORTABLESHAREDCACHE, NULL);\n+\t\tIDATA noportableSharedCacheIndex = FIND_ARG_IN_VMARGS(EXACT_MATCH, VMOPT_XXNOPORTABLESHAREDCACHE, NULL);\n+\t\tif (portableSharedCacheIndex != noportableSharedCacheIndex) {\n+\t\t\t/* At least one option is set. Find the right most one. */\n+\t\t\tif (portableSharedCacheIndex > noportableSharedCacheIndex) {\n+\t\t\t\textensions->portableSharedCacheEnabled = true;\n+\t\t\t} else {\n+\t\t\t\textensions->portableSharedCacheEnabled = false;\n+\t\t\t}\n+\t\t} else {\n+\t\t\textensions->shouldForceCeilingShiftForContainers = true;\n+\t\t}\n+\n+\t\tIDATA shareClassesIndex = FIND_ARG_IN_VMARGS(OPTIONAL_LIST_MATCH, \"-Xshareclasses\", NULL);\n+\t\tif (shareClassesIndex >= 0) {\n+\t\t\tchar optionsBuffer[2*EsMaxPath];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eebf4e5f3f35329d4293d7d45ca7aaf265dae4e9"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNzM1Nzc4", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#pullrequestreview-462735778", "createdAt": "2020-08-06T17:34:48Z", "commit": {"oid": "eebf4e5f3f35329d4293d7d45ca7aaf265dae4e9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNzozNDo0OFrOG89i3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxNzozNDo0OFrOG89i3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjU3NjA5Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tif (GET_OPTION_VALUES(shareClassesIndex, ':', ',', &optionsBufferPtr, 2*EsMaxPath) == OPTION_OK) {\n          \n          \n            \n            \t\t\tif (GET_OPTION_VALUES(shareClassesIndex, ':', ',', &optionsBufferPtr, 2 * EsMaxPath) == OPTION_OK) {", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r466576092", "createdAt": "2020-08-06T17:34:48Z", "author": {"login": "dmitripivkine"}, "path": "runtime/gc_modron_startup/mmparse.cpp", "diffHunk": "@@ -1247,6 +1247,42 @@ gcParseXXArguments(J9JavaVM *vm)\n \t\t}\n \t}\n \n+\t{\n+#if defined(J9VM_ARCH_X86)\n+\t\tIDATA portableSharedCacheIndex = FIND_ARG_IN_VMARGS(EXACT_MATCH, VMOPT_XXPORTABLESHAREDCACHE, NULL);\n+\t\tIDATA noportableSharedCacheIndex = FIND_ARG_IN_VMARGS(EXACT_MATCH, VMOPT_XXNOPORTABLESHAREDCACHE, NULL);\n+\t\tif (portableSharedCacheIndex != noportableSharedCacheIndex) {\n+\t\t\t/* At least one option is set. Find the right most one. */\n+\t\t\tif (portableSharedCacheIndex > noportableSharedCacheIndex) {\n+\t\t\t\textensions->portableSharedCacheEnabled = true;\n+\t\t\t} else {\n+\t\t\t\textensions->portableSharedCacheEnabled = false;\n+\t\t\t}\n+\t\t} else {\n+\t\t\textensions->shouldForceCeilingShiftForContainers = true;\n+\t\t}\n+\n+\t\tIDATA shareClassesIndex = FIND_ARG_IN_VMARGS(OPTIONAL_LIST_MATCH, \"-Xshareclasses\", NULL);\n+\t\tif (shareClassesIndex >= 0) {\n+\t\t\tchar optionsBuffer[2*EsMaxPath];\n+\t\t\tchar* optionsBufferPtr = (char*)optionsBuffer;\n+\n+\t\t\tif (GET_OPTION_VALUES(shareClassesIndex, ':', ',', &optionsBufferPtr, 2*EsMaxPath) == OPTION_OK) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eebf4e5f3f35329d4293d7d45ca7aaf265dae4e9"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyODY1ODA4", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#pullrequestreview-462865808", "createdAt": "2020-08-06T20:48:20Z", "commit": {"oid": "eebf4e5f3f35329d4293d7d45ca7aaf265dae4e9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQyMDo0ODoyMFrOG9DvRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQyMDo0ODoyMFrOG9DvRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY3NzU3NQ==", "bodyText": "we can skip code below if extensions->shouldForceCeilingShiftForContainers is not set to true", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r466677575", "createdAt": "2020-08-06T20:48:20Z", "author": {"login": "dmitripivkine"}, "path": "runtime/gc_modron_startup/mmparse.cpp", "diffHunk": "@@ -1247,6 +1247,42 @@ gcParseXXArguments(J9JavaVM *vm)\n \t\t}\n \t}\n \n+\t{\n+#if defined(J9VM_ARCH_X86)\n+\t\tIDATA portableSharedCacheIndex = FIND_ARG_IN_VMARGS(EXACT_MATCH, VMOPT_XXPORTABLESHAREDCACHE, NULL);\n+\t\tIDATA noportableSharedCacheIndex = FIND_ARG_IN_VMARGS(EXACT_MATCH, VMOPT_XXNOPORTABLESHAREDCACHE, NULL);\n+\t\tif (portableSharedCacheIndex != noportableSharedCacheIndex) {\n+\t\t\t/* At least one option is set. Find the right most one. */\n+\t\t\tif (portableSharedCacheIndex > noportableSharedCacheIndex) {\n+\t\t\t\textensions->portableSharedCacheEnabled = true;\n+\t\t\t} else {\n+\t\t\t\textensions->portableSharedCacheEnabled = false;\n+\t\t\t}\n+\t\t} else {\n+\t\t\textensions->shouldForceCeilingShiftForContainers = true;\n+\t\t}\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eebf4e5f3f35329d4293d7d45ca7aaf265dae4e9"}, "originalPosition": 18}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eebf4e5f3f35329d4293d7d45ca7aaf265dae4e9", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/eebf4e5f3f35329d4293d7d45ca7aaf265dae4e9", "committedDate": "2020-08-05T22:00:09Z", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "80bbf9f95ddd19db7a727a0cc8342a4587600d1c", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/80bbf9f95ddd19db7a727a0cc8342a4587600d1c", "committedDate": "2020-08-10T17:59:45Z", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "80bbf9f95ddd19db7a727a0cc8342a4587600d1c", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/80bbf9f95ddd19db7a727a0cc8342a4587600d1c", "committedDate": "2020-08-10T17:59:45Z", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "2e47b4d2de1ea7e2d8d67a620ece3efb755c7a97", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/2e47b4d2de1ea7e2d8d67a620ece3efb755c7a97", "committedDate": "2020-08-25T19:21:49Z", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2e47b4d2de1ea7e2d8d67a620ece3efb755c7a97", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/2e47b4d2de1ea7e2d8d67a620ece3efb755c7a97", "committedDate": "2020-08-25T19:21:49Z", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "0376436a2059c9251b52811c4a9e79f476318c35", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/0376436a2059c9251b52811c4a9e79f476318c35", "committedDate": "2020-08-25T19:23:05Z", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0376436a2059c9251b52811c4a9e79f476318c35", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/0376436a2059c9251b52811c4a9e79f476318c35", "committedDate": "2020-08-25T19:23:05Z", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "1b7dee748b18e1fe61a396092df0aac803661828", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/1b7dee748b18e1fe61a396092df0aac803661828", "committedDate": "2020-08-25T19:26:54Z", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1b7dee748b18e1fe61a396092df0aac803661828", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/1b7dee748b18e1fe61a396092df0aac803661828", "committedDate": "2020-08-25T19:26:54Z", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "1fbcd7669a3f0d08bad161699223c80ecc500faf", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/1fbcd7669a3f0d08bad161699223c80ecc500faf", "committedDate": "2020-08-25T19:54:18Z", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1fbcd7669a3f0d08bad161699223c80ecc500faf", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/1fbcd7669a3f0d08bad161699223c80ecc500faf", "committedDate": "2020-08-25T19:54:18Z", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "bd58a72463b64839745e76ef44ebff229f2a1b6a", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/bd58a72463b64839745e76ef44ebff229f2a1b6a", "committedDate": "2020-08-25T20:05:30Z", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bd58a72463b64839745e76ef44ebff229f2a1b6a", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/bd58a72463b64839745e76ef44ebff229f2a1b6a", "committedDate": "2020-08-25T20:05:30Z", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "2ff061a8a6d8879ebd9d9c837c19b4a28bbeeeb1", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/2ff061a8a6d8879ebd9d9c837c19b4a28bbeeeb1", "committedDate": "2020-08-25T20:25:22Z", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2ff061a8a6d8879ebd9d9c837c19b4a28bbeeeb1", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/2ff061a8a6d8879ebd9d9c837c19b4a28bbeeeb1", "committedDate": "2020-08-25T20:25:22Z", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "6b2f5f0082da4189dfe9d1a777efb7ea060393a3", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/6b2f5f0082da4189dfe9d1a777efb7ea060393a3", "committedDate": "2020-08-25T20:29:07Z", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1NTAxODY5", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#pullrequestreview-475501869", "createdAt": "2020-08-26T13:43:30Z", "commit": {"oid": "6b2f5f0082da4189dfe9d1a777efb7ea060393a3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxMzo0MzozMFrOHHMvFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxMzo0MzozMFrOHHMvFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzMxMDc0MQ==", "bodyText": "There are a few things I have problem with:\n\nIf we want to enable feature for x86 platforms only we should have boolean responsible to enable/disable feature.\nAn initialization of this variable should be only place where #if defined(J9VM_ARCH_X86) is used. All other related code should be platform independent (should exist for all platforms and not for x86 only). This helps in future to expand feature to other platforms.\nThere is a parsing of options parsed earlier. Would be better to reuse result of previous parsing (and maybe even deeper - results of logical analysis made based on previous parsing)\nParsing of options under logical condition might lead to potential existence of cases with unconsumed arguments. Parsing of provided options should be done regardless of applicability of them. I understand this is second parsing, so see previous bullet\nLast but not least this is absolutely wrong place to set extensions->shouldForceCeilingShiftForContainers in case if none of the options are discovered. This new value for variable must be initialized as default before this parsing in a proper place.\n\nI believe this is wrong place for this code. I suggest:\n\ncreate required booleans somewhere in VM substructure (find a right place)\ninitialize them properly at the time of first options parsing in jvminit.c\nif it is possible to add such booleans visible from OMR code you don't need these booleans in GCExtensionsBase. Use OMR VM variables instead directly.\nif such booleans are visible from OpenJ9 only you still need new variables in GCExtensionsBase. These variables should be initialized properly for standalone OMR and be set at OpenJ9 side accordinly (somewhere in mminit.cpp I guess)\n\nSo I believe we don't need any change in this file at all. This is wrong place to do it. There is a much better way to do it.", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r477310741", "createdAt": "2020-08-26T13:43:30Z", "author": {"login": "dmitripivkine"}, "path": "runtime/gc_modron_startup/mmparse.cpp", "diffHunk": "@@ -1260,6 +1260,29 @@ gcParseXXArguments(J9JavaVM *vm)\n \t\t}\n \t}\n \n+#if defined(J9VM_ARCH_X86)\n+\t{\n+\t\tif (NULL != vm->sharedClassPreinitConfig) {\n+\t\t\tIDATA argIndexXaot = FIND_ARG_IN_VMARGS(OPTIONAL_LIST_MATCH, \"-Xaot\", 0);\n+\t\t\tIDATA argIndexXnoaot = FIND_ARG_IN_VMARGS(OPTIONAL_LIST_MATCH, \"-Xnoaot\", 0);\n+\t\t\tif (argIndexXaot >= argIndexXnoaot) { \n+\t\t\t\tIDATA portableSharedCacheIndex = FIND_ARG_IN_VMARGS(EXACT_MATCH, VMOPT_XXPORTABLESHAREDCACHE, NULL);\n+\t\t\t\tIDATA noportableSharedCacheIndex = FIND_ARG_IN_VMARGS(EXACT_MATCH, VMOPT_XXNOPORTABLESHAREDCACHE, NULL);\n+\t\t\t\tif (portableSharedCacheIndex != noportableSharedCacheIndex) {\n+\t\t\t\t\t/* At least one option is set. Find the right most one. */\n+\t\t\t\t\tif (portableSharedCacheIndex > noportableSharedCacheIndex) {\n+\t\t\t\t\t\textensions->portableSharedCacheEnabled = true;\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\textensions->portableSharedCacheEnabled = false;\n+\t\t\t\t\t}\n+\t\t\t\t} else {\n+\t\t\t\t\textensions->shouldForceCeilingShiftForContainers = true;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t}\n+#endif /* defined(J9VM_ARCH_X86) */\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6b2f5f0082da4189dfe9d1a777efb7ea060393a3"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1NTAyNTcy", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#pullrequestreview-475502572", "createdAt": "2020-08-26T13:44:15Z", "commit": {"oid": "6b2f5f0082da4189dfe9d1a777efb7ea060393a3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6b2f5f0082da4189dfe9d1a777efb7ea060393a3", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/6b2f5f0082da4189dfe9d1a777efb7ea060393a3", "committedDate": "2020-08-25T20:29:07Z", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "8fc03ce22430ef64c5775421313e570ce1a40d29", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/8fc03ce22430ef64c5775421313e570ce1a40d29", "committedDate": "2020-08-26T20:46:34Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8fc03ce22430ef64c5775421313e570ce1a40d29", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/8fc03ce22430ef64c5775421313e570ce1a40d29", "committedDate": "2020-08-26T20:46:34Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "16dfdc4176572c4cc9f775e5c33c32ac64ad985f", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/16dfdc4176572c4cc9f775e5c33c32ac64ad985f", "committedDate": "2020-08-26T20:49:30Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "16dfdc4176572c4cc9f775e5c33c32ac64ad985f", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/16dfdc4176572c4cc9f775e5c33c32ac64ad985f", "committedDate": "2020-08-26T20:49:30Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "7a33796c880f03f20934b99942562f98475b8bb6", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/7a33796c880f03f20934b99942562f98475b8bb6", "committedDate": "2020-08-26T20:54:53Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7a33796c880f03f20934b99942562f98475b8bb6", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/7a33796c880f03f20934b99942562f98475b8bb6", "committedDate": "2020-08-26T20:54:53Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "c505da6d1d9b505d28f43c2ced9794388ac1bd53", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c505da6d1d9b505d28f43c2ced9794388ac1bd53", "committedDate": "2020-08-26T21:04:11Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c505da6d1d9b505d28f43c2ced9794388ac1bd53", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c505da6d1d9b505d28f43c2ced9794388ac1bd53", "committedDate": "2020-08-26T21:04:11Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "a366256c07207d9428299f383973da374be6ca3b", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/a366256c07207d9428299f383973da374be6ca3b", "committedDate": "2020-08-26T21:23:14Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a366256c07207d9428299f383973da374be6ca3b", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/a366256c07207d9428299f383973da374be6ca3b", "committedDate": "2020-08-26T21:23:14Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "f2d328e54a99497cf6e91f9a382c5c22e32f19b6", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/f2d328e54a99497cf6e91f9a382c5c22e32f19b6", "committedDate": "2020-08-26T21:24:23Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f2d328e54a99497cf6e91f9a382c5c22e32f19b6", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/f2d328e54a99497cf6e91f9a382c5c22e32f19b6", "committedDate": "2020-08-26T21:24:23Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "03606c73d02e506509960a5c7e23265835ddbccf", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/03606c73d02e506509960a5c7e23265835ddbccf", "committedDate": "2020-08-26T21:29:41Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1ODgxMzc1", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#pullrequestreview-475881375", "createdAt": "2020-08-26T21:45:13Z", "commit": {"oid": "03606c73d02e506509960a5c7e23265835ddbccf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMTo0NToxM1rOHHe1rg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMTo0NToxM1rOHHe1rg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzYwNzM0Mg==", "bodyText": "it is much better but I still don't like #if defined(J9VM_ARCH_X86) here. This is not clear connection why shift should be forced for x86 only (something else hidden here happen somewhere, right?) I believe would be better to have global feature control boolean and use it here instead of true. Or you can just set bit for x86 only if it is fits better to your logic.", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r477607342", "createdAt": "2020-08-26T21:45:13Z", "author": {"login": "dmitripivkine"}, "path": "runtime/gc_modron_startup/mminit.cpp", "diffHunk": "@@ -492,6 +492,12 @@ j9gc_initialize_heap(J9JavaVM *vm, IDATA *memoryParameterTable, UDATA heapBytesR\n \t}\n #endif\n \n+#if defined(J9VM_ARCH_X86)\n+\tif (J9_ARE_ANY_BITS_SET(vm->extendedRuntimeFlags2, J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE)) {\n+\t\textensions->shouldForceLowMemoryHeapCeilingShiftIfPossible = true;\n+\t}\n+#endif /* defined(J9VM_ARCH_X86) */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03606c73d02e506509960a5c7e23265835ddbccf"}, "originalPosition": 8}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "03606c73d02e506509960a5c7e23265835ddbccf", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/03606c73d02e506509960a5c7e23265835ddbccf", "committedDate": "2020-08-26T21:29:41Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "f7b54e8d620b7e0f39aabe4f9a517ad5cfdc011d", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/f7b54e8d620b7e0f39aabe4f9a517ad5cfdc011d", "committedDate": "2020-08-26T22:30:13Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f7b54e8d620b7e0f39aabe4f9a517ad5cfdc011d", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/f7b54e8d620b7e0f39aabe4f9a517ad5cfdc011d", "committedDate": "2020-08-26T22:30:13Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "e6a41e9de079f5a76f0adb1e6df1020cb992ae57", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e6a41e9de079f5a76f0adb1e6df1020cb992ae57", "committedDate": "2020-08-26T22:35:56Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2MDQ2ODcx", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#pullrequestreview-476046871", "createdAt": "2020-08-26T23:08:11Z", "commit": {"oid": "e6a41e9de079f5a76f0adb1e6df1020cb992ae57"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMzowODoxMlrOHHhakg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQyMzoxMToxN1rOHHhoEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzY0OTU1NA==", "bodyText": "J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE may set even if AOT is off. I would put this code in the same block that sets vm->extendedRuntimeFlags2 |= J9_EXTENDED_RUNTIME2_ENABLE_AOT; because only if AOT is enabled make sense to generate portable code.", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r477649554", "createdAt": "2020-08-26T23:08:12Z", "author": {"login": "mpirvu"}, "path": "runtime/vm/jvminit.c", "diffHunk": "@@ -1766,7 +1788,22 @@ IDATA VMInitStages(J9JavaVM *vm, IDATA stage, void* reserved) {\n \t\t\t\t\t}\n \t\t\t\t\tpiConfig->sharedClassReadWriteBytes = -1;\t\t\t\t\t/* -1 == proportion of cache size */\n \t\t\t\t\tvm->sharedClassPreinitConfig = piConfig;\n-\t\t\t\t}\n+\n+\t\t\t\t\tif (argIndexXaot >= argIndexXnoaot) {\n+\t\t\t\t\t\tvm->extendedRuntimeFlags2 |= J9_EXTENDED_RUNTIME2_ENABLE_AOT;\n+\t\t\t\t\t}\n+\n+#if defined(J9VM_ARCH_X86)\n+\t\t\t\t\tif (argIndexXXPortableSharedCache > argIndexXXNoPortableSharedCache) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e6a41e9de079f5a76f0adb1e6df1020cb992ae57"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzY1MzAwOQ==", "bodyText": "Just curious: what does this do? Emits a trace point that specifies the enablement of the portable AOT?", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r477653009", "createdAt": "2020-08-26T23:11:17Z", "author": {"login": "mpirvu"}, "path": "runtime/compiler/control/rossa.cpp", "diffHunk": "@@ -1976,7 +1976,7 @@ aboutToBootstrap(J9JavaVM * javaVM, J9JITConfig * jitConfig)\n \n    UT_MODULE_LOADED(J9_UTINTERFACE_FROM_VM(javaVM));\n    Trc_JIT_VMInitStages_Event1(curThread);\n-   Trc_JIT_portableSharedCache_enabled_or_disabled(curThread, TRUE == javaVM->sharedCacheAPI->sharedCachePortable ? 1 : 0);\n+   Trc_JIT_portableSharedCache_enabled_or_disabled(curThread, J9_ARE_ANY_BITS_SET(javaVM->extendedRuntimeFlags2, J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE) ? 1 : 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e6a41e9de079f5a76f0adb1e6df1020cb992ae57"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e6a41e9de079f5a76f0adb1e6df1020cb992ae57", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e6a41e9de079f5a76f0adb1e6df1020cb992ae57", "committedDate": "2020-08-26T22:35:56Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "5b8479c1d11d921d3b011796377855dd4feb7608", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/5b8479c1d11d921d3b011796377855dd4feb7608", "committedDate": "2020-08-27T14:50:46Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5b8479c1d11d921d3b011796377855dd4feb7608", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/5b8479c1d11d921d3b011796377855dd4feb7608", "committedDate": "2020-08-27T14:50:46Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "c34f33974b017dd6c33d810287536ca208258df3", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c34f33974b017dd6c33d810287536ca208258df3", "committedDate": "2020-08-27T14:53:26Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE and J9_EXTENDED_RUNTIME2_ENABLE_AOT\nto cache the parsed results of -XX:[+|-]PortableSharedCache and -Xaot\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c34f33974b017dd6c33d810287536ca208258df3", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c34f33974b017dd6c33d810287536ca208258df3", "committedDate": "2020-08-27T14:53:26Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE and J9_EXTENDED_RUNTIME2_ENABLE_AOT\nto cache the parsed results of -XX:[+|-]PortableSharedCache and -Xaot\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "f2b6c37c973899a98e425c57fd84d29063b80003", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/f2b6c37c973899a98e425c57fd84d29063b80003", "committedDate": "2020-08-27T14:57:30Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache and -Xaot to an earlier\npoint in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE\nand J9_EXTENDED_RUNTIME2_ENABLE_AOT to cache the parsing results\nof -XX:[+|-]PortableSharedCache and -Xaot\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2ODgyMTQ4", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#pullrequestreview-476882148", "createdAt": "2020-08-27T16:19:26Z", "commit": {"oid": "f2b6c37c973899a98e425c57fd84d29063b80003"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2ODkzMjcy", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#pullrequestreview-476893272", "createdAt": "2020-08-27T16:33:10Z", "commit": {"oid": "f2b6c37c973899a98e425c57fd84d29063b80003"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3MDQzMjI2", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#pullrequestreview-477043226", "createdAt": "2020-08-27T20:07:35Z", "commit": {"oid": "f2b6c37c973899a98e425c57fd84d29063b80003"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QyMDowNzozNlrOHIfeFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QyMDoyMDo1OFrOHIf48g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODY2NjI2Mg==", "bodyText": "Please define one variable each line and initialize them to 0.", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r478666262", "createdAt": "2020-08-27T20:07:36Z", "author": {"login": "hangshao0"}, "path": "runtime/vm/jvminit.c", "diffHunk": "@@ -1675,10 +1675,27 @@ IDATA VMInitStages(J9JavaVM *vm, IDATA stage, void* reserved) {\n \t\t\t{\n \t\t\t\tIDATA argIndex3, argIndex4, argIndex5, argIndex6, argIndex7, argIndex8;\n \t\t\t\tIDATA argIndex9 = 0;\n+\t\t\t\tBOOLEAN sharedClassDisabled = FALSE;\n+\t\t\t\tIDATA argIndexXXPortableSharedCache, argIndexXXNoPortableSharedCache, argIndexXaot, argIndexXnoaot;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2b6c37c973899a98e425c57fd84d29063b80003"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODY2NjgzMw==", "bodyText": "Missing spaces before and after \"+\".", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r478666833", "createdAt": "2020-08-27T20:08:35Z", "author": {"login": "hangshao0"}, "path": "runtime/vm/jvminit.c", "diffHunk": "@@ -1675,10 +1675,27 @@ IDATA VMInitStages(J9JavaVM *vm, IDATA stage, void* reserved) {\n \t\t\t{\n \t\t\t\tIDATA argIndex3, argIndex4, argIndex5, argIndex6, argIndex7, argIndex8;\n \t\t\t\tIDATA argIndex9 = 0;\n+\t\t\t\tBOOLEAN sharedClassDisabled = FALSE;\n+\t\t\t\tIDATA argIndexXXPortableSharedCache, argIndexXXNoPortableSharedCache, argIndexXaot, argIndexXnoaot;\n \n \t\t\t\tvm->sharedClassPreinitConfig = NULL;\n \n \t\t\t\targIndex = FIND_ARG_IN_VMARGS(OPTIONAL_LIST_MATCH, VMOPT_XSHARECLASSES, NULL);\n+\t\t\t\tif (argIndex >= 0) {\n+\t\t\t\t\tchar optionsBuffer[2 * J9SH_MAXPATH];\n+\t\t\t\t\tchar* optionsBufferPtr = (char*)optionsBuffer;\n+\n+\t\t\t\t\tif (GET_OPTION_VALUES(argIndex, ':', ',', &optionsBufferPtr, 2 * J9SH_MAXPATH) == OPTION_OK) {\n+\t\t\t\t\t\twhile (*optionsBufferPtr) {\n+\t\t\t\t\t\t\tif (try_scan(&optionsBufferPtr, OPT_NONE)) {\n+\t\t\t\t\t\t\t\tsharedClassDisabled = TRUE;\n+\t\t\t\t\t\t\t\tbreak;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\toptionsBufferPtr += strlen(optionsBufferPtr)+1;\n+\t\t\t\t\t\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2b6c37c973899a98e425c57fd84d29063b80003"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODY3MzEzOA==", "bodyText": "Does this == case mean that these options are not found in the command line ?", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r478673138", "createdAt": "2020-08-27T20:20:58Z", "author": {"login": "hangshao0"}, "path": "runtime/vm/jvminit.c", "diffHunk": "@@ -1766,7 +1788,24 @@ IDATA VMInitStages(J9JavaVM *vm, IDATA stage, void* reserved) {\n \t\t\t\t\t}\n \t\t\t\t\tpiConfig->sharedClassReadWriteBytes = -1;\t\t\t\t\t/* -1 == proportion of cache size */\n \t\t\t\t\tvm->sharedClassPreinitConfig = piConfig;\n+\n+\t\t\t\t\tif (argIndexXaot >= argIndexXnoaot) {\n+\t\t\t\t\t\tvm->extendedRuntimeFlags2 |= J9_EXTENDED_RUNTIME2_ENABLE_AOT;\n+#if defined(J9VM_ARCH_X86)\n+\t\t\t\t\t\tif (argIndexXXPortableSharedCache > argIndexXXNoPortableSharedCache) {\n+\t\t\t\t\t\t\tvm->extendedRuntimeFlags2 |= J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE;\n+\t\t\t\t\t\t} else if (argIndexXXPortableSharedCache == argIndexXXNoPortableSharedCache) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f2b6c37c973899a98e425c57fd84d29063b80003"}, "originalPosition": 59}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f2b6c37c973899a98e425c57fd84d29063b80003", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/f2b6c37c973899a98e425c57fd84d29063b80003", "committedDate": "2020-08-27T14:57:30Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache and -Xaot to an earlier\npoint in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE\nand J9_EXTENDED_RUNTIME2_ENABLE_AOT to cache the parsing results\nof -XX:[+|-]PortableSharedCache and -Xaot\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "8e479dd87a361d7eb9eba7ada381fcafad24d07c", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/8e479dd87a361d7eb9eba7ada381fcafad24d07c", "committedDate": "2020-08-27T20:25:49Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache and -Xaot to an earlier\npoint in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE\nand J9_EXTENDED_RUNTIME2_ENABLE_AOT to cache the parsing results\nof -XX:[+|-]PortableSharedCache and -Xaot\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8e479dd87a361d7eb9eba7ada381fcafad24d07c", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/8e479dd87a361d7eb9eba7ada381fcafad24d07c", "committedDate": "2020-08-27T20:25:49Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache and -Xaot to an earlier\npoint in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE\nand J9_EXTENDED_RUNTIME2_ENABLE_AOT to cache the parsing results\nof -XX:[+|-]PortableSharedCache and -Xaot\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "2cb1b442d1acb220c2038a10bc34cb2a9c3319cd", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/2cb1b442d1acb220c2038a10bc34cb2a9c3319cd", "committedDate": "2020-08-27T20:27:47Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache and -Xaot to an earlier\npoint in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE\nand J9_EXTENDED_RUNTIME2_ENABLE_AOT to cache the parsing results\nof -XX:[+|-]PortableSharedCache and -Xaot\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3MDYyNjAx", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#pullrequestreview-477062601", "createdAt": "2020-08-27T20:37:00Z", "commit": {"oid": "2cb1b442d1acb220c2038a10bc34cb2a9c3319cd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QyMDozNzowMFrOHIgX9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QyMDozNzowMFrOHIgX9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODY4MTA3OA==", "bodyText": "Is this correct ? setting J9_EXTENDED_RUNTIME2_ENABLE_AOT when xnoaot is found.", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r478681078", "createdAt": "2020-08-27T20:37:00Z", "author": {"login": "hangshao0"}, "path": "runtime/vm/jvminit.c", "diffHunk": "@@ -2866,6 +2906,7 @@ modifyDllLoadTable(J9JavaVM * vm, J9Pool* loadTable, J9VMInitArgs* j9vm_args)\n \t\tJVMINIT_VERBOSE_INIT_VM_TRACE(vm, \"-Xint set\\n\");\n \t}\n \tif (xnoaot) {\n+\t\tvm->extendedRuntimeFlags2 |= J9_EXTENDED_RUNTIME2_ENABLE_AOT;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2cb1b442d1acb220c2038a10bc34cb2a9c3319cd"}, "originalPosition": 92}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2cb1b442d1acb220c2038a10bc34cb2a9c3319cd", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/2cb1b442d1acb220c2038a10bc34cb2a9c3319cd", "committedDate": "2020-08-27T20:27:47Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache and -Xaot to an earlier\npoint in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE\nand J9_EXTENDED_RUNTIME2_ENABLE_AOT to cache the parsing results\nof -XX:[+|-]PortableSharedCache and -Xaot\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "cc32ccb979d36f8344f4087251c680279b62372b", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/cc32ccb979d36f8344f4087251c680279b62372b", "committedDate": "2020-08-27T20:37:23Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache and -Xaot to an earlier\npoint in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE\nand J9_EXTENDED_RUNTIME2_ENABLE_AOT to cache the parsing results\nof -XX:[+|-]PortableSharedCache and -Xaot\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cc32ccb979d36f8344f4087251c680279b62372b", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/cc32ccb979d36f8344f4087251c680279b62372b", "committedDate": "2020-08-27T20:37:23Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache and -Xaot to an earlier\npoint in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE\nand J9_EXTENDED_RUNTIME2_ENABLE_AOT to cache the parsing results\nof -XX:[+|-]PortableSharedCache and -Xaot\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "b51e01d23fb1365eb254454ea7f5c7ad3ae570f2", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/b51e01d23fb1365eb254454ea7f5c7ad3ae570f2", "committedDate": "2020-08-27T20:44:37Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache and -Xaot to an earlier\npoint in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE\nand J9_EXTENDED_RUNTIME2_ENABLE_AOT to cache the parsing results\nof -XX:[+|-]PortableSharedCache and -Xaot\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b51e01d23fb1365eb254454ea7f5c7ad3ae570f2", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/b51e01d23fb1365eb254454ea7f5c7ad3ae570f2", "committedDate": "2020-08-27T20:44:37Z", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache and -Xaot to an earlier\npoint in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE\nand J9_EXTENDED_RUNTIME2_ENABLE_AOT to cache the parsing results\nof -XX:[+|-]PortableSharedCache and -Xaot\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "2d85c4176d6fe479336ace0c58739d54ef4a0d86", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/2d85c4176d6fe479336ace0c58739d54ef4a0d86", "committedDate": "2020-08-27T20:49:01Z", "message": "Handle -XX:[+|-]PortableSharedCache in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache to an earlier\npoint in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE\nand J9_EXTENDED_RUNTIME2_ENABLE_AOT to cache the parsing results\nof -XX:[+|-]PortableSharedCache and -Xaot/-Xnoaot\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2d85c4176d6fe479336ace0c58739d54ef4a0d86", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/2d85c4176d6fe479336ace0c58739d54ef4a0d86", "committedDate": "2020-08-27T20:49:01Z", "message": "Handle -XX:[+|-]PortableSharedCache in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache to an earlier\npoint in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE\nand J9_EXTENDED_RUNTIME2_ENABLE_AOT to cache the parsing results\nof -XX:[+|-]PortableSharedCache and -Xaot/-Xnoaot\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "82e56fe63f789a26f876a21e58e794199e9882a7", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/82e56fe63f789a26f876a21e58e794199e9882a7", "committedDate": "2020-08-27T20:58:25Z", "message": "Handle -XX:[+|-]PortableSharedCache in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache to an earlier point in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE and J9_EXTENDED_RUNTIME2_ENABLE_AOT i\nto cache the parsing results of -XX:[+|-]PortableSharedCache and -Xaot/-Xnoaot\nSet Compressed reference shift to 3 (low memory heap ceiling shift) by default in containers\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "82e56fe63f789a26f876a21e58e794199e9882a7", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/82e56fe63f789a26f876a21e58e794199e9882a7", "committedDate": "2020-08-27T20:58:25Z", "message": "Handle -XX:[+|-]PortableSharedCache in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache to an earlier point in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE and J9_EXTENDED_RUNTIME2_ENABLE_AOT i\nto cache the parsing results of -XX:[+|-]PortableSharedCache and -Xaot/-Xnoaot\nSet Compressed reference shift to 3 (low memory heap ceiling shift) by default in containers\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "3d5d5279b14fe401213f1ddfb019a926bc452de9", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/3d5d5279b14fe401213f1ddfb019a926bc452de9", "committedDate": "2020-08-27T22:04:02Z", "message": "Handle -XX:[+|-]PortableSharedCache in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache to an earlier point in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE and J9_EXTENDED_RUNTIME2_ENABLE_AOT i\nto cache the parsing results of -XX:[+|-]PortableSharedCache and -Xaot/-Xnoaot\nSet Compressed reference shift to 3 (low memory heap ceiling shift) by default in containers\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3d5d5279b14fe401213f1ddfb019a926bc452de9", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/3d5d5279b14fe401213f1ddfb019a926bc452de9", "committedDate": "2020-08-27T22:04:02Z", "message": "Handle -XX:[+|-]PortableSharedCache in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache to an earlier point in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE and J9_EXTENDED_RUNTIME2_ENABLE_AOT i\nto cache the parsing results of -XX:[+|-]PortableSharedCache and -Xaot/-Xnoaot\nSet Compressed reference shift to 3 (low memory heap ceiling shift) by default in containers\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "13197744c78a3a92a24572ce8d7aa2a37ab957e7", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/13197744c78a3a92a24572ce8d7aa2a37ab957e7", "committedDate": "2020-08-27T22:36:04Z", "message": "Handle -XX:[+|-]PortableSharedCache in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache to an earlier point in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE and J9_EXTENDED_RUNTIME2_ENABLE_AOT i\nto cache the parsing results of -XX:[+|-]PortableSharedCache and -Xaot/-Xnoaot\nSet Compressed reference shift to 3 (low memory heap ceiling shift) by default in containers\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3MTQ5NDg5", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#pullrequestreview-477149489", "createdAt": "2020-08-27T23:29:34Z", "commit": {"oid": "13197744c78a3a92a24572ce8d7aa2a37ab957e7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3ODA0NDc5", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#pullrequestreview-477804479", "createdAt": "2020-08-28T15:04:16Z", "commit": {"oid": "13197744c78a3a92a24572ce8d7aa2a37ab957e7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "77921b0930df8567d8bd2ad5578fdc42ec7ece2e", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/77921b0930df8567d8bd2ad5578fdc42ec7ece2e", "committedDate": "2020-08-28T17:14:15Z", "message": "Consume -Xaot:* during parsing\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "fc5c0ce6aecac648ac6dc8e475a77cdaee441006", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/fc5c0ce6aecac648ac6dc8e475a77cdaee441006", "committedDate": "2020-08-31T18:59:49Z", "message": "Handle -XX:[+|-]PortableSharedCache in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache to an earlier point in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE and J9_EXTENDED_RUNTIME2_ENABLE_AOT i\nto cache the parsing results of -XX:[+|-]PortableSharedCache and -Xaot/-Xnoaot\nSet Compressed reference shift to 3 (low memory heap ceiling shift) by default in containers\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fc5c0ce6aecac648ac6dc8e475a77cdaee441006", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/fc5c0ce6aecac648ac6dc8e475a77cdaee441006", "committedDate": "2020-08-31T18:59:49Z", "message": "Handle -XX:[+|-]PortableSharedCache in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache to an earlier point in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE and J9_EXTENDED_RUNTIME2_ENABLE_AOT i\nto cache the parsing results of -XX:[+|-]PortableSharedCache and -Xaot/-Xnoaot\nSet Compressed reference shift to 3 (low memory heap ceiling shift) by default in containers\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "73d65fac67f555044aa5646f3501a0651df6770a", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/73d65fac67f555044aa5646f3501a0651df6770a", "committedDate": "2020-08-31T19:16:19Z", "message": "Handle -XX:[+|-]PortableSharedCache in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache to an earlier point in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE and J9_EXTENDED_RUNTIME2_ENABLE_AOT i\nto cache the parsing results of -XX:[+|-]PortableSharedCache and -Xaot/-Xnoaot\nSet Compressed reference shift to 3 (low memory heap ceiling shift) by default in containers\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55468e90bcb2944aa2510fda9cfc44e1a638a107", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/55468e90bcb2944aa2510fda9cfc44e1a638a107", "committedDate": "2020-09-08T04:15:55Z", "message": "Handle -XX:[+|-]PortableSharedCache in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache to an earlier point in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE and J9_EXTENDED_RUNTIME2_ENABLE_AOT i\nto cache the parsing results of -XX:[+|-]PortableSharedCache and -Xaot/-Xnoaot\nSet Compressed reference shift to 3 (low memory heap ceiling shift) by default in containers\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "73d65fac67f555044aa5646f3501a0651df6770a", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/73d65fac67f555044aa5646f3501a0651df6770a", "committedDate": "2020-08-31T19:16:19Z", "message": "Handle -XX:[+|-]PortableSharedCache in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache to an earlier point in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE and J9_EXTENDED_RUNTIME2_ENABLE_AOT i\nto cache the parsing results of -XX:[+|-]PortableSharedCache and -Xaot/-Xnoaot\nSet Compressed reference shift to 3 (low memory heap ceiling shift) by default in containers\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "55468e90bcb2944aa2510fda9cfc44e1a638a107", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/55468e90bcb2944aa2510fda9cfc44e1a638a107", "committedDate": "2020-09-08T04:15:55Z", "message": "Handle -XX:[+|-]PortableSharedCache in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache to an earlier point in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE and J9_EXTENDED_RUNTIME2_ENABLE_AOT i\nto cache the parsing results of -XX:[+|-]PortableSharedCache and -Xaot/-Xnoaot\nSet Compressed reference shift to 3 (low memory heap ceiling shift) by default in containers\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 431, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}