{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0NTI4NDUz", "number": 9725, "title": "PrintFlagsFinal output needs to be on stdout", "bodyText": "Current code uses j9tty_printf which outputs to stderr, but\nHotspot outputs on stdout and elasticsearch (for which\nPrintFlagsFinal support was added) depends on it being there.\nFixes: #7764\nSigned-off-by: Mark Stoodley mstoodle@ca.ibm.com", "createdAt": "2020-05-28T14:29:17Z", "url": "https://github.com/eclipse-openj9/openj9/pull/9725", "merged": true, "mergeCommit": {"oid": "197b974146cb803475aad21b62407efd92718f4f"}, "closed": true, "closedAt": "2020-05-29T13:59:49Z", "author": {"login": "mstoodle"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclu3GlAFqTQyMDE3ODYxNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABclyPGzABqjMzODQxMTE4MDM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwMTc4NjE1", "url": "https://github.com/eclipse-openj9/openj9/pull/9725#pullrequestreview-420178615", "createdAt": "2020-05-28T14:37:01Z", "commit": {"oid": "c0be7529151094ec69ded53c82962361329a8f9a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxNDozNzowMlrOGb4R5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxNDozNzowMlrOGb4R5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTg4NjgyMQ==", "bodyText": "Can you add a comment here in the code explaining why this option is different and prints to stdout when everything else goes to stderr?\nI have reservations about making this change as it contradicts all of our existing options direction.", "url": "https://github.com/eclipse-openj9/openj9/pull/9725#discussion_r431886821", "createdAt": "2020-05-28T14:37:02Z", "author": {"login": "DanHeidinga"}, "path": "runtime/vm/jvminit.c", "diffHunk": "@@ -6368,19 +6368,19 @@ protectedInitializeJavaVM(J9PortLibrary* portLibrary, void * userData)\n \t\t\t * as \"size_t\" type.\n \t\t\t */\n \n-\t\t\tj9tty_printf(PORTLIB, \"[Global flags]\\n\");\n+\t\t\tj9file_printf(PORTLIB, J9PORT_TTY_OUT, \"[Global flags]\\n\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0be7529151094ec69ded53c82962361329a8f9a"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c0be7529151094ec69ded53c82962361329a8f9a", "author": {"user": {"login": "mstoodle", "name": "Mark Stoodley"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c0be7529151094ec69ded53c82962361329a8f9a", "committedDate": "2020-05-28T14:27:01Z", "message": "PrintFlagsFinal output needs to be on stdout\n\nCurrent support uses j9tty_printf which outputs to stderr, but\nHotspot outputs on stdout and elasticsearch (for which\nPrintFlagsFinal support was added) depends on it being there.\n\nSigned-off-by: Mark Stoodley <mstoodle@ca.ibm.com>"}, "afterCommit": {"oid": "44255e37137977cedccec21346dc122a27ee0c5a", "author": {"user": {"login": "mstoodle", "name": "Mark Stoodley"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/44255e37137977cedccec21346dc122a27ee0c5a", "committedDate": "2020-05-28T14:41:50Z", "message": "PrintFlagsFinal output needs to be on stdout\n\nCurrent support uses j9tty_printf which outputs to stderr, but\nHotspot outputs on stdout and elasticsearch (for which\nPrintFlagsFinal support was added) depends on it being there.\n\nSigned-off-by: Mark Stoodley <mstoodle@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwMTg3MTcz", "url": "https://github.com/eclipse-openj9/openj9/pull/9725#pullrequestreview-420187173", "createdAt": "2020-05-28T14:45:34Z", "commit": {"oid": "44255e37137977cedccec21346dc122a27ee0c5a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxNDo0NTozNFrOGb4vJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxNDo0NTozNFrOGb4vJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTg5NDMwOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t * NOTE that Hotspot produces this output on STDOUT, which means this\n          \n          \n            \n            \t\t\t * NOTE that Hotspot produces this output on STDOUT, and applications expect to parse it there,\n          \n          \n            \n            \t\t\t * which means this ....", "url": "https://github.com/eclipse-openj9/openj9/pull/9725#discussion_r431894308", "createdAt": "2020-05-28T14:45:34Z", "author": {"login": "DanHeidinga"}, "path": "runtime/vm/jvminit.c", "diffHunk": "@@ -6366,21 +6366,25 @@ protectedInitializeJavaVM(J9PortLibrary* portLibrary, void * userData)\n \t\t\t *\n \t\t\t * OpenJ9 stores both of these values as UDATA, so they will both be printed\n \t\t\t * as \"size_t\" type.\n+\t\t\t *\n+\t\t\t * NOTE that Hotspot produces this output on STDOUT, which means this", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44255e37137977cedccec21346dc122a27ee0c5a"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwMTk5NjE4", "url": "https://github.com/eclipse-openj9/openj9/pull/9725#pullrequestreview-420199618", "createdAt": "2020-05-28T14:57:32Z", "commit": {"oid": "f5a3a06d20a99c005393a318152c538b20fb916c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxNDo1NzozMlrOGb5UNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxNDo1NzozMlrOGb5UNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTkwMzc5OA==", "bodyText": "Thanks Mark.  I agree it doesn't make sense to take the principled stand here.\nSorry to make another request, but can you reflow the comment so the lines are consistent lengths?  I was lazy in how I posted the suggested change and used .... (which should be removed) rather than reflowing the full comment.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t *\n          \n          \n            \n            \t\t\t * NOTE that Hotspot produces this output on STDOUT, and applications expect to parse it there,\n          \n          \n            \n            \t\t\t * which means this ....\n          \n          \n            \n            \t\t\t * code does not use j9tty_printf like most of the VM (which prints to\n          \n          \n            \n            \t\t\t * STDERR). Instead, j9file_printf(PORTLIB, J9PORT_TTY_OUT, ...) is used.\n          \n          \n            \n            \t\t\t *\n          \n          \n            \n            \t\t\t * NOTE that Hotspot produces this output on STDOUT, and applications\n          \n          \n            \n            \t\t\t * expect to parse it there, which means this code does not use j9tty_printf\n          \n          \n            \n            \t\t\t * like most of the VM (which prints to STDERR). Instead, \n          \n          \n            \n            \t\t\t * j9file_printf(PORTLIB, J9PORT_TTY_OUT, ...) is used.", "url": "https://github.com/eclipse-openj9/openj9/pull/9725#discussion_r431903798", "createdAt": "2020-05-28T14:57:32Z", "author": {"login": "DanHeidinga"}, "path": "runtime/vm/jvminit.c", "diffHunk": "@@ -6366,21 +6366,26 @@ protectedInitializeJavaVM(J9PortLibrary* portLibrary, void * userData)\n \t\t\t *\n \t\t\t * OpenJ9 stores both of these values as UDATA, so they will both be printed\n \t\t\t * as \"size_t\" type.\n+\t\t\t *\n+\t\t\t * NOTE that Hotspot produces this output on STDOUT, and applications expect to parse it there,\n+\t\t\t * which means this ....\n+\t\t\t * code does not use j9tty_printf like most of the VM (which prints to\n+\t\t\t * STDERR). Instead, j9file_printf(PORTLIB, J9PORT_TTY_OUT, ...) is used.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5a3a06d20a99c005393a318152c538b20fb916c"}, "originalPosition": 8}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f5a3a06d20a99c005393a318152c538b20fb916c", "author": {"user": {"login": "mstoodle", "name": "Mark Stoodley"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/f5a3a06d20a99c005393a318152c538b20fb916c", "committedDate": "2020-05-28T14:47:01Z", "message": "Update runtime/vm/jvminit.c\r\n\r\naugment comment\n\nCo-authored-by: Dan Heidinga <daniel_heidinga@ca.ibm.com>"}, "afterCommit": {"oid": "e72929555f0ee874c0a8edc65718fcc2da459f92", "author": {"user": {"login": "mstoodle", "name": "Mark Stoodley"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e72929555f0ee874c0a8edc65718fcc2da459f92", "committedDate": "2020-05-28T15:04:17Z", "message": "PrintFlagsFinal output needs to be on stdout\n\nCurrent support uses j9tty_printf which outputs to stderr, but\nHotspot outputs on stdout and elasticsearch (for which\nPrintFlagsFinal support was added) depends on it being there.\n\nSigned-off-by: Mark Stoodley <mstoodle@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e72929555f0ee874c0a8edc65718fcc2da459f92", "author": {"user": {"login": "mstoodle", "name": "Mark Stoodley"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e72929555f0ee874c0a8edc65718fcc2da459f92", "committedDate": "2020-05-28T15:04:17Z", "message": "PrintFlagsFinal output needs to be on stdout\n\nCurrent support uses j9tty_printf which outputs to stderr, but\nHotspot outputs on stdout and elasticsearch (for which\nPrintFlagsFinal support was added) depends on it being there.\n\nSigned-off-by: Mark Stoodley <mstoodle@ca.ibm.com>"}, "afterCommit": {"oid": "2ef2ec24225a74eef9a31bfb1ce1147412fc4e06", "author": {"user": {"login": "mstoodle", "name": "Mark Stoodley"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/2ef2ec24225a74eef9a31bfb1ce1147412fc4e06", "committedDate": "2020-05-28T15:04:45Z", "message": "PrintFlagsFinal output needs to be on stdout\n\nCurrent support uses j9tty_printf which outputs to stderr, but\nHotspot outputs on stdout and elasticsearch (for which\nPrintFlagsFinal support was added) depends on it being there.\n\nFixes: #7764\n\nSigned-off-by: Mark Stoodley <mstoodle@ca.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a33c82664bdc5c0ac8860c85ab8fdcf18bee1ec", "author": {"user": {"login": "mstoodle", "name": "Mark Stoodley"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/6a33c82664bdc5c0ac8860c85ab8fdcf18bee1ec", "committedDate": "2020-05-28T18:32:31Z", "message": "PrintFlagsFinal output needs to be on stdout\n\nCurrent support uses j9tty_printf which outputs to stderr, but\nHotspot outputs on stdout and elasticsearch (for which\nPrintFlagsFinal support was added) depends on it being there.\n\nFixes: #7764\n\nSigned-off-by: Mark Stoodley <mstoodle@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2ef2ec24225a74eef9a31bfb1ce1147412fc4e06", "author": {"user": {"login": "mstoodle", "name": "Mark Stoodley"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/2ef2ec24225a74eef9a31bfb1ce1147412fc4e06", "committedDate": "2020-05-28T15:04:45Z", "message": "PrintFlagsFinal output needs to be on stdout\n\nCurrent support uses j9tty_printf which outputs to stderr, but\nHotspot outputs on stdout and elasticsearch (for which\nPrintFlagsFinal support was added) depends on it being there.\n\nFixes: #7764\n\nSigned-off-by: Mark Stoodley <mstoodle@ca.ibm.com>"}, "afterCommit": {"oid": "6a33c82664bdc5c0ac8860c85ab8fdcf18bee1ec", "author": {"user": {"login": "mstoodle", "name": "Mark Stoodley"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/6a33c82664bdc5c0ac8860c85ab8fdcf18bee1ec", "committedDate": "2020-05-28T18:32:31Z", "message": "PrintFlagsFinal output needs to be on stdout\n\nCurrent support uses j9tty_printf which outputs to stderr, but\nHotspot outputs on stdout and elasticsearch (for which\nPrintFlagsFinal support was added) depends on it being there.\n\nFixes: #7764\n\nSigned-off-by: Mark Stoodley <mstoodle@ca.ibm.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 797, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}