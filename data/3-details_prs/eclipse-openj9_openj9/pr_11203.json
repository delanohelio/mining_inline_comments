{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIyMTUyMDE2", "number": 11203, "title": "Enable the check for sealed classes for Java 16", "bodyText": "The change is enable the check for sealed classes\nfor Java 16 during the static verification.\nSigned-off-by: Cheng Jin jincheng@ca.ibm.com", "createdAt": "2020-11-17T05:33:50Z", "url": "https://github.com/eclipse-openj9/openj9/pull/11203", "merged": true, "mergeCommit": {"oid": "33d30b17a7c6329c55546a46c42e5fdae0ac8585"}, "closed": true, "closedAt": "2020-11-17T19:59:46Z", "author": {"login": "ChengJin01"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddZs9_gFqTUzMjM2NTU1NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdddVPOgBqjQwMDY3NjczOTg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyMzY1NTU0", "url": "https://github.com/eclipse-openj9/openj9/pull/11203#pullrequestreview-532365554", "createdAt": "2020-11-17T13:36:43Z", "commit": {"oid": "731f73fac39a032ef302ff526481e59efb4354de"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxMzozNjo0NFrOH01DjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxMzozNzowMlrOH01EWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTE1NzI2MA==", "bodyText": "59 is Java 15, correct?  Shouldn't this be >59 (Java 16) then?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tif (_classFile->majorVersion >= 59) {\n          \n          \n            \n            \t\t\tif (_classFile->majorVersion > 59) {", "url": "https://github.com/eclipse-openj9/openj9/pull/11203#discussion_r525157260", "createdAt": "2020-11-17T13:36:44Z", "author": {"login": "DanHeidinga"}, "path": "runtime/bcutil/ClassFileOracle.cpp", "diffHunk": "@@ -502,9 +502,8 @@ ClassFileOracle::walkAttributes()\n \t\t\tbreak;\n \t\t}\n \t\tcase CFR_ATTRIBUTE_PermittedSubclasses: {\n-\t\t\t/* PermittedSubclasses verification is for Java 15 preview only. Don't record the attribute for other class versions\n-\t\t\t * since it may be corrupt. */\n-\t\t\tif ((59 == _classFile->majorVersion) && (0 < _classFile->minorVersion)) {\n+\t\t\t/* PermittedSubclasses verification is for Java version >= 15 */\n+\t\t\tif (_classFile->majorVersion >= 59) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "731f73fac39a032ef302ff526481e59efb4354de"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTE1NzQ2Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t/* PermittedSubclasses verification is for Java version >= 15 */\n          \n          \n            \n            \t\t\tif (classfile->majorVersion >= 59) {\n          \n          \n            \n            \t\t\t/* PermittedSubclasses verification is for Java version > 15 */\n          \n          \n            \n            \t\t\tif (classfile->majorVersion > 59) {", "url": "https://github.com/eclipse-openj9/openj9/pull/11203#discussion_r525157466", "createdAt": "2020-11-17T13:37:02Z", "author": {"login": "DanHeidinga"}, "path": "runtime/bcutil/cfreader.c", "diffHunk": "@@ -2376,8 +2376,8 @@ checkAttributes(J9PortLibrary* portLib, J9CfrClassFile* classfile, J9CfrAttribut\n \t\t\tbreak;\n \n \t\tcase CFR_ATTRIBUTE_PermittedSubclasses:\n-\t\t\t/* PermittedSubclasses verification is for Java 15 preview only. */\n-\t\t\tif ((59 == classfile->majorVersion) && (0 < classfile->minorVersion)) {\n+\t\t\t/* PermittedSubclasses verification is for Java version >= 15 */\n+\t\t\tif (classfile->majorVersion >= 59) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "731f73fac39a032ef302ff526481e59efb4354de"}, "originalPosition": 7}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "731f73fac39a032ef302ff526481e59efb4354de", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/731f73fac39a032ef302ff526481e59efb4354de", "committedDate": "2020-11-16T21:20:34Z", "message": "Enable the check for sealed classes for Java 16\n\nThe change is enable the check for sealed classes\nfor Java 16 during the static verification.\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}, "afterCommit": {"oid": "fede363358640bd92eec2cee8a727e493ba443ae", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/fede363358640bd92eec2cee8a727e493ba443ae", "committedDate": "2020-11-17T15:06:33Z", "message": "Enable the check for sealed classes for Java 16\n\nThe change is enable the check for sealed classes\nfor Java 16 during the static verification.\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyNDY4ODE0", "url": "https://github.com/eclipse-openj9/openj9/pull/11203#pullrequestreview-532468814", "createdAt": "2020-11-17T15:15:52Z", "commit": {"oid": "fede363358640bd92eec2cee8a727e493ba443ae"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNToxNTo1MlrOH05zfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNToxNTo1MlrOH05zfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTIzNTA2OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tif (_classFile->majorVersion > 59) {\n          \n          \n            \n            \t\t\tif ((_classFile->majorVersion > 59) \n          \n          \n            \n            \t\t\t|| ((59 == _classFile->majorVersion) && (0 < _classFile->minorVersion))\n          \n          \n            \n            \t\t\t) {\n          \n      \n    \n    \n  \n\nSorry, I spoke too quick.  We need to keep both the check for the preview version for the next release as that release includes jdk15.  Something like the above will cover us.\nNeeds to be applied both here and below", "url": "https://github.com/eclipse-openj9/openj9/pull/11203#discussion_r525235069", "createdAt": "2020-11-17T15:15:52Z", "author": {"login": "DanHeidinga"}, "path": "runtime/bcutil/ClassFileOracle.cpp", "diffHunk": "@@ -502,9 +502,8 @@ ClassFileOracle::walkAttributes()\n \t\t\tbreak;\n \t\t}\n \t\tcase CFR_ATTRIBUTE_PermittedSubclasses: {\n-\t\t\t/* PermittedSubclasses verification is for Java 15 preview only. Don't record the attribute for other class versions\n-\t\t\t * since it may be corrupt. */\n-\t\t\tif ((59 == _classFile->majorVersion) && (0 < _classFile->minorVersion)) {\n+\t\t\t/* PermittedSubclasses verification is for Java version > 15 */\n+\t\t\tif (_classFile->majorVersion > 59) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fede363358640bd92eec2cee8a727e493ba443ae"}, "originalPosition": 8}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fede363358640bd92eec2cee8a727e493ba443ae", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/fede363358640bd92eec2cee8a727e493ba443ae", "committedDate": "2020-11-17T15:06:33Z", "message": "Enable the check for sealed classes for Java 16\n\nThe change is enable the check for sealed classes\nfor Java 16 during the static verification.\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}, "afterCommit": {"oid": "80c2f5beaf237a0f47349fbc1fbe33886c9393dc", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/80c2f5beaf237a0f47349fbc1fbe33886c9393dc", "committedDate": "2020-11-17T15:27:45Z", "message": "Enable the check for sealed classes for Java 16\n\nThe change is enable the check for sealed classes\nfor Java 16 during the static verification.\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyNTE4NDAx", "url": "https://github.com/eclipse-openj9/openj9/pull/11203#pullrequestreview-532518401", "createdAt": "2020-11-17T15:55:06Z", "commit": {"oid": "80c2f5beaf237a0f47349fbc1fbe33886c9393dc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNTo1NTowNlrOH08Lfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNTo1NTowNlrOH08Lfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTI3Mzk4Mw==", "bodyText": "Please dont use 0 < - it just makes things harder to read.", "url": "https://github.com/eclipse-openj9/openj9/pull/11203#discussion_r525273983", "createdAt": "2020-11-17T15:55:06Z", "author": {"login": "gacholio"}, "path": "runtime/bcutil/ClassFileOracle.cpp", "diffHunk": "@@ -502,9 +502,10 @@ ClassFileOracle::walkAttributes()\n \t\t\tbreak;\n \t\t}\n \t\tcase CFR_ATTRIBUTE_PermittedSubclasses: {\n-\t\t\t/* PermittedSubclasses verification is for Java 15 preview only. Don't record the attribute for other class versions\n-\t\t\t * since it may be corrupt. */\n-\t\t\tif ((59 == _classFile->majorVersion) && (0 < _classFile->minorVersion)) {\n+\t\t\t/* PermittedSubclasses verification is for Java version >= 15 */\n+\t\t\tif ((classfile->majorVersion > 59)\n+\t\t\t|| ((59 == classfile->majorVersion) && (0 < classfile->minorVersion))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80c2f5beaf237a0f47349fbc1fbe33886c9393dc"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyNTE4NzQy", "url": "https://github.com/eclipse-openj9/openj9/pull/11203#pullrequestreview-532518742", "createdAt": "2020-11-17T15:55:24Z", "commit": {"oid": "80c2f5beaf237a0f47349fbc1fbe33886c9393dc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNTo1NToyNFrOH08MZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxNTo1NToyNFrOH08MZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTI3NDIxNA==", "bodyText": "Same comment as above.", "url": "https://github.com/eclipse-openj9/openj9/pull/11203#discussion_r525274214", "createdAt": "2020-11-17T15:55:24Z", "author": {"login": "gacholio"}, "path": "runtime/bcutil/cfreader.c", "diffHunk": "@@ -2376,8 +2376,10 @@ checkAttributes(J9PortLibrary* portLib, J9CfrClassFile* classfile, J9CfrAttribut\n \t\t\tbreak;\n \n \t\tcase CFR_ATTRIBUTE_PermittedSubclasses:\n-\t\t\t/* PermittedSubclasses verification is for Java 15 preview only. */\n-\t\t\tif ((59 == classfile->majorVersion) && (0 < classfile->minorVersion)) {\n+\t\t\t/* PermittedSubclasses verification is for Java version >= 15 */\n+\t\t\tif ((classfile->majorVersion > 59) \n+\t\t\t|| ((59 == classfile->majorVersion) && (0 < classfile->minorVersion))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80c2f5beaf237a0f47349fbc1fbe33886c9393dc"}, "originalPosition": 8}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "80c2f5beaf237a0f47349fbc1fbe33886c9393dc", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/80c2f5beaf237a0f47349fbc1fbe33886c9393dc", "committedDate": "2020-11-17T15:27:45Z", "message": "Enable the check for sealed classes for Java 16\n\nThe change is enable the check for sealed classes\nfor Java 16 during the static verification.\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}, "afterCommit": {"oid": "daf16db2240e0a475299608b3fe0dfc045b6c86a", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/daf16db2240e0a475299608b3fe0dfc045b6c86a", "committedDate": "2020-11-17T17:19:28Z", "message": "Enable the check for sealed classes for Java 16\n\nThe change is enable the check for sealed classes\nfor Java 16 during the static verification.\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyNjE0NTU2", "url": "https://github.com/eclipse-openj9/openj9/pull/11203#pullrequestreview-532614556", "createdAt": "2020-11-17T17:26:55Z", "commit": {"oid": "daf16db2240e0a475299608b3fe0dfc045b6c86a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76390995ec1d05ff7fb56e6da08833d2312b983a", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/76390995ec1d05ff7fb56e6da08833d2312b983a", "committedDate": "2020-11-17T17:51:09Z", "message": "Enable the check for sealed classes for Java 16\n\nThe change is enable the check for sealed classes\nfor Java 16 during the static verification.\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "daf16db2240e0a475299608b3fe0dfc045b6c86a", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/daf16db2240e0a475299608b3fe0dfc045b6c86a", "committedDate": "2020-11-17T17:19:28Z", "message": "Enable the check for sealed classes for Java 16\n\nThe change is enable the check for sealed classes\nfor Java 16 during the static verification.\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}, "afterCommit": {"oid": "76390995ec1d05ff7fb56e6da08833d2312b983a", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/76390995ec1d05ff7fb56e6da08833d2312b983a", "committedDate": "2020-11-17T17:51:09Z", "message": "Enable the check for sealed classes for Java 16\n\nThe change is enable the check for sealed classes\nfor Java 16 during the static verification.\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1585, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}