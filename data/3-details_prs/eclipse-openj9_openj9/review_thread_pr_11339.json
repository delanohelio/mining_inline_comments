{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxMjIwOTMx", "number": 11339, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMTo0MDo0NlrOE_4tlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNTozNDozM1rOFAUDaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1NDI0OTE5OnYy", "diffSide": "RIGHT", "path": "runtime/vm/resolvesupport.cpp", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QwMTo0MDo0NlrOH91jWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNjowMjoxOFrOH-kFPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDYwMjU4NQ==", "bodyText": "C++ file, so you can declare the variable when it is assigned below.", "url": "https://github.com/eclipse-openj9/openj9/pull/11339#discussion_r534602585", "createdAt": "2020-12-03T01:40:46Z", "author": {"login": "gacholio"}, "path": "runtime/vm/resolvesupport.cpp", "diffHunk": "@@ -931,6 +931,7 @@ resolveInstanceFieldRefInto(J9VMThread *vmStruct, J9Method *method, J9ConstantPo\n \t\tJ9Class *flattenableClass = NULL;\n \t\tJ9FlattenedClassCache *flattenedClassCache = NULL;\n #endif\t\t\n+\t\tbool isWithField = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e95ba88f0111b4fadd3c1eebeaaf0a4c7bdc891"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM0NTEzNw==", "bodyText": "If I move the declaration to where it is assigned below, I get a compilation error. There is a goto illegalAccess before the assignment.", "url": "https://github.com/eclipse-openj9/openj9/pull/11339#discussion_r535345137", "createdAt": "2020-12-03T15:41:22Z", "author": {"login": "hangshao0"}, "path": "runtime/vm/resolvesupport.cpp", "diffHunk": "@@ -931,6 +931,7 @@ resolveInstanceFieldRefInto(J9VMThread *vmStruct, J9Method *method, J9ConstantPo\n \t\tJ9Class *flattenableClass = NULL;\n \t\tJ9FlattenedClassCache *flattenedClassCache = NULL;\n #endif\t\t\n+\t\tbool isWithField = false;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDYwMjU4NQ=="}, "originalCommit": {"oid": "5e95ba88f0111b4fadd3c1eebeaaf0a4c7bdc891"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM2NDkyNA==", "bodyText": "OK.", "url": "https://github.com/eclipse-openj9/openj9/pull/11339#discussion_r535364924", "createdAt": "2020-12-03T16:02:18Z", "author": {"login": "gacholio"}, "path": "runtime/vm/resolvesupport.cpp", "diffHunk": "@@ -931,6 +931,7 @@ resolveInstanceFieldRefInto(J9VMThread *vmStruct, J9Method *method, J9ConstantPo\n \t\tJ9Class *flattenableClass = NULL;\n \t\tJ9FlattenedClassCache *flattenedClassCache = NULL;\n #endif\t\t\n+\t\tbool isWithField = false;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDYwMjU4NQ=="}, "originalCommit": {"oid": "5e95ba88f0111b4fadd3c1eebeaaf0a4c7bdc891"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1ODcyODc1OnYy", "diffSide": "LEFT", "path": "runtime/vm/BytecodeInterpreter.hpp", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNTozNDozM1rOH-ibSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODo1NzowMVrOH-sMoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTMzNzgwMw==", "bodyText": "why is the J9FieldFlagPutResolved check removed", "url": "https://github.com/eclipse-openj9/openj9/pull/11339#discussion_r535337803", "createdAt": "2020-12-03T15:34:33Z", "author": {"login": "tajila"}, "path": "runtime/vm/BytecodeInterpreter.hpp", "diffHunk": "@@ -8674,12 +8674,12 @@ class INTERPRETER_CLASS\n \t\t * a field ref as resolved if only one of the two values has been set (by\n \t\t * another thread that is in the middle of a resolve).\n \t\t */\n-\t\tif (J9_UNEXPECTED((flags <= valueOffset) || J9_ARE_NO_BITS_SET(flags, J9FieldFlagPutResolved))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e95ba88f0111b4fadd3c1eebeaaf0a4c7bdc891"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTMzOTk4Ng==", "bodyText": "ah I see, its only set with the J9_RESOLVE_FLAG_FIELD_SETTER flag", "url": "https://github.com/eclipse-openj9/openj9/pull/11339#discussion_r535339986", "createdAt": "2020-12-03T15:36:33Z", "author": {"login": "tajila"}, "path": "runtime/vm/BytecodeInterpreter.hpp", "diffHunk": "@@ -8674,12 +8674,12 @@ class INTERPRETER_CLASS\n \t\t * a field ref as resolved if only one of the two values has been set (by\n \t\t * another thread that is in the middle of a resolve).\n \t\t */\n-\t\tif (J9_UNEXPECTED((flags <= valueOffset) || J9_ARE_NO_BITS_SET(flags, J9FieldFlagPutResolved))) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTMzNzgwMw=="}, "originalCommit": {"oid": "5e95ba88f0111b4fadd3c1eebeaaf0a4c7bdc891"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTM0OTg0OA==", "bodyText": "Minor: we can start using !VM_VMHelpers::instanceFieldRefIsResolved(flags, valueOffset) for this check", "url": "https://github.com/eclipse-openj9/openj9/pull/11339#discussion_r535349848", "createdAt": "2020-12-03T15:45:45Z", "author": {"login": "tajila"}, "path": "runtime/vm/BytecodeInterpreter.hpp", "diffHunk": "@@ -8674,12 +8674,12 @@ class INTERPRETER_CLASS\n \t\t * a field ref as resolved if only one of the two values has been set (by\n \t\t * another thread that is in the middle of a resolve).\n \t\t */\n-\t\tif (J9_UNEXPECTED((flags <= valueOffset) || J9_ARE_NO_BITS_SET(flags, J9FieldFlagPutResolved))) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTMzNzgwMw=="}, "originalCommit": {"oid": "5e95ba88f0111b4fadd3c1eebeaaf0a4c7bdc891"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQ5Nzg4OQ==", "bodyText": "Updated.", "url": "https://github.com/eclipse-openj9/openj9/pull/11339#discussion_r535497889", "createdAt": "2020-12-03T18:57:01Z", "author": {"login": "hangshao0"}, "path": "runtime/vm/BytecodeInterpreter.hpp", "diffHunk": "@@ -8674,12 +8674,12 @@ class INTERPRETER_CLASS\n \t\t * a field ref as resolved if only one of the two values has been set (by\n \t\t * another thread that is in the middle of a resolve).\n \t\t */\n-\t\tif (J9_UNEXPECTED((flags <= valueOffset) || J9_ARE_NO_BITS_SET(flags, J9FieldFlagPutResolved))) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTMzNzgwMw=="}, "originalCommit": {"oid": "5e95ba88f0111b4fadd3c1eebeaaf0a4c7bdc891"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 999, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}