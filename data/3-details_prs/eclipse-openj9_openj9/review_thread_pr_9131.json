{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk5NjQ2Nzc1", "number": 9131, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQwMzo0Nzo0MVrODv0nCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQwMjowODo0MlrODwOqQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxNDcxNjI2OnYy", "diffSide": "RIGHT", "path": "runtime/jvmti/jvmtiCapability.c", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQwMzo0Nzo0MVrOGCeAdg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxMjowNTo1NVrOGCsHBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTI0MTk3NA==", "bodyText": "Should the can_generate_sampled_object_alloc_events event be removed from the potential set of capabilities when running with metronome or balanced? ie https://github.com/eclipse/openj9/blob/e363d8001fcfa8eef2641b326b194ec9503959c7/runtime/jvmti/jvmtiCapability.c#L178", "url": "https://github.com/eclipse-openj9/openj9/pull/9131#discussion_r405241974", "createdAt": "2020-04-08T03:47:41Z", "author": {"login": "DanHeidinga"}, "path": "runtime/jvmti/jvmtiCapability.c", "diffHunk": "@@ -373,7 +373,10 @@ jvmtiAddCapabilities(jvmtiEnv* env,\n \n #if JAVA_SPEC_VERSION >= 11\n \t\tif (newCapabilities.can_generate_sampled_object_alloc_events) {\n-\t\t\tif (J9_ARE_ANY_BITS_SET(jvmtiData->flags, J9JVMTI_FLAG_SAMPLED_OBJECT_ALLOC_ENABLED)) {\n+\t\t\tif (J9_ARE_ANY_BITS_SET(jvmtiData->flags, J9JVMTI_FLAG_SAMPLED_OBJECT_ALLOC_ENABLED)\n+\t\t\t\t|| (J9_GC_POLICY_METRONOME == vm->gcPolicy)\n+\t\t\t\t|| (J9_GC_POLICY_BALANCED == vm->gcPolicy)\n+\t\t\t) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e363d8001fcfa8eef2641b326b194ec9503959c7"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTQ3MzAzMA==", "bodyText": "yeah, this is the right place. Thanks @DanHeidinga , PR is updated, please have another look.", "url": "https://github.com/eclipse-openj9/openj9/pull/9131#discussion_r405473030", "createdAt": "2020-04-08T12:05:55Z", "author": {"login": "JasonFengJ9"}, "path": "runtime/jvmti/jvmtiCapability.c", "diffHunk": "@@ -373,7 +373,10 @@ jvmtiAddCapabilities(jvmtiEnv* env,\n \n #if JAVA_SPEC_VERSION >= 11\n \t\tif (newCapabilities.can_generate_sampled_object_alloc_events) {\n-\t\t\tif (J9_ARE_ANY_BITS_SET(jvmtiData->flags, J9JVMTI_FLAG_SAMPLED_OBJECT_ALLOC_ENABLED)) {\n+\t\t\tif (J9_ARE_ANY_BITS_SET(jvmtiData->flags, J9JVMTI_FLAG_SAMPLED_OBJECT_ALLOC_ENABLED)\n+\t\t\t\t|| (J9_GC_POLICY_METRONOME == vm->gcPolicy)\n+\t\t\t\t|| (J9_GC_POLICY_BALANCED == vm->gcPolicy)\n+\t\t\t) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTI0MTk3NA=="}, "originalCommit": {"oid": "e363d8001fcfa8eef2641b326b194ec9503959c7"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxODk4NDM1OnYy", "diffSide": "RIGHT", "path": "runtime/tests/jvmtitests/src/com/ibm/jvmti/tests/getPotentialCapabilities/gpc001.c", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQwMjowODo0M1rOGDHJZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOVQwMjozODo0NFrOGDHnoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTkxNjAwNQ==", "bodyText": "We greatly prefer -= 1", "url": "https://github.com/eclipse-openj9/openj9/pull/9131#discussion_r405916005", "createdAt": "2020-04-09T02:08:43Z", "author": {"login": "gacholio"}, "path": "runtime/tests/jvmtitests/src/com/ibm/jvmti/tests/getPotentialCapabilities/gpc001.c", "diffHunk": "@@ -153,6 +153,11 @@ Java_com_ibm_jvmti_tests_getPotentialCapabilities_gpc001_verifyOnLoadCapabilitie\n \t\tunavailableCount--;\n \t}\n \n+\t/* GC policies Metronome & Balanced don't support this event */\n+\tif (!initialCapabilities.can_generate_sampled_object_alloc_events) {\n+\t\tunavailableCount--;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70384a3022728add8b1cf9b25ecc296911a7d1db"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTkyMzc0NQ==", "bodyText": "Updated this and other occurrences in same method.", "url": "https://github.com/eclipse-openj9/openj9/pull/9131#discussion_r405923745", "createdAt": "2020-04-09T02:38:44Z", "author": {"login": "JasonFengJ9"}, "path": "runtime/tests/jvmtitests/src/com/ibm/jvmti/tests/getPotentialCapabilities/gpc001.c", "diffHunk": "@@ -153,6 +153,11 @@ Java_com_ibm_jvmti_tests_getPotentialCapabilities_gpc001_verifyOnLoadCapabilitie\n \t\tunavailableCount--;\n \t}\n \n+\t/* GC policies Metronome & Balanced don't support this event */\n+\tif (!initialCapabilities.can_generate_sampled_object_alloc_events) {\n+\t\tunavailableCount--;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTkxNjAwNQ=="}, "originalCommit": {"oid": "70384a3022728add8b1cf9b25ecc296911a7d1db"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 340, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}