{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzNTkxODYx", "number": 10891, "title": "Added CDSAdaptorTest with updated osgi verison", "bodyText": "Port CDSAdaptorTest from vmfarm\nupdated osgi from 2012 to 2020 version, download from tkg repo\nenabled this test for all jdk versions\nmodified Testbundle and Weavinghook from jar to source and manifest\nremoved outdated cds jars\nRelated to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang longyu.zhang@ibm.com", "createdAt": "2020-10-14T19:30:03Z", "url": "https://github.com/eclipse-openj9/openj9/pull/10891", "merged": true, "mergeCommit": {"oid": "498e89d4d284b0a79badf064e827b599bd17f245"}, "closed": true, "closedAt": "2020-11-13T15:28:59Z", "author": {"login": "LongyuZhang"}, "timelineItems": {"totalCount": 25, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSihCmABqjM4NzgyMjY1ODk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdcI4HfgFqTUzMDE1Njc5OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0211b6f70dbd912aed1a240545429d0c6274c575", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/0211b6f70dbd912aed1a240545429d0c6274c575", "committedDate": "2020-10-14T19:27:07Z", "message": "Added CDSAdaptorTest\n- Port CDSAdaptorTest from vmfarm\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}, "afterCommit": {"oid": "10d0b169f3fde3f9d27fd510ab9c82a56c46986e", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/10d0b169f3fde3f9d27fd510ab9c82a56c46986e", "committedDate": "2020-10-14T19:40:32Z", "message": "Added CDSAdaptorTest\n- Port CDSAdaptorTest from vmfarm\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "10d0b169f3fde3f9d27fd510ab9c82a56c46986e", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/10d0b169f3fde3f9d27fd510ab9c82a56c46986e", "committedDate": "2020-10-14T19:40:32Z", "message": "Added CDSAdaptorTest\n- Port CDSAdaptorTest from vmfarm\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}, "afterCommit": {"oid": "2a4ff972f3678bd46b7d4e0e24ff1228c7453c24", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/2a4ff972f3678bd46b7d4e0e24ff1228c7453c24", "committedDate": "2020-11-10T03:56:24Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2a4ff972f3678bd46b7d4e0e24ff1228c7453c24", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/2a4ff972f3678bd46b7d4e0e24ff1228c7453c24", "committedDate": "2020-11-10T03:56:24Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}, "afterCommit": {"oid": "cead955c97f20c8574ee1668d55bc9cd0787885b", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/cead955c97f20c8574ee1668d55bc9cd0787885b", "committedDate": "2020-11-10T04:20:16Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cead955c97f20c8574ee1668d55bc9cd0787885b", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/cead955c97f20c8574ee1668d55bc9cd0787885b", "committedDate": "2020-11-10T04:20:16Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}, "afterCommit": {"oid": "2d3a5fd938a347685fff69672aafebea8f539375", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/2d3a5fd938a347685fff69672aafebea8f539375", "committedDate": "2020-11-10T06:35:21Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2d3a5fd938a347685fff69672aafebea8f539375", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/2d3a5fd938a347685fff69672aafebea8f539375", "committedDate": "2020-11-10T06:35:21Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}, "afterCommit": {"oid": "ff0362deeb1be70b6002624ffb15ae4dbf7b63b6", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/ff0362deeb1be70b6002624ffb15ae4dbf7b63b6", "committedDate": "2020-11-10T07:27:29Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ff0362deeb1be70b6002624ffb15ae4dbf7b63b6", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/ff0362deeb1be70b6002624ffb15ae4dbf7b63b6", "committedDate": "2020-11-10T07:27:29Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}, "afterCommit": {"oid": "830638a2b93203ffc11726a1a9b0490b4435ebdf", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/830638a2b93203ffc11726a1a9b0490b4435ebdf", "committedDate": "2020-11-10T08:05:04Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version, download from tkg repo\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "830638a2b93203ffc11726a1a9b0490b4435ebdf", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/830638a2b93203ffc11726a1a9b0490b4435ebdf", "committedDate": "2020-11-10T08:05:04Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version, download from tkg repo\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}, "afterCommit": {"oid": "1bb99e8afe7d251a6bbacfced39647e484d60649", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/1bb99e8afe7d251a6bbacfced39647e484d60649", "committedDate": "2020-11-10T08:13:10Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version, download from tkg repo\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1bb99e8afe7d251a6bbacfced39647e484d60649", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/1bb99e8afe7d251a6bbacfced39647e484d60649", "committedDate": "2020-11-10T08:13:10Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version, download from tkg repo\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}, "afterCommit": {"oid": "abe36606e669870e0ade7e18187e8c6b5c4226e8", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/abe36606e669870e0ade7e18187e8c6b5c4226e8", "committedDate": "2020-11-10T15:08:12Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "abe36606e669870e0ade7e18187e8c6b5c4226e8", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/abe36606e669870e0ade7e18187e8c6b5c4226e8", "committedDate": "2020-11-10T15:08:12Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}, "afterCommit": {"oid": "46a575ac2a5e99544a61aca03b3de7d56c69e699", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/46a575ac2a5e99544a61aca03b3de7d56c69e699", "committedDate": "2020-11-10T15:14:11Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3MzgzNDIy", "url": "https://github.com/eclipse-openj9/openj9/pull/10891#pullrequestreview-527383422", "createdAt": "2020-11-10T16:29:06Z", "commit": {"oid": "46a575ac2a5e99544a61aca03b3de7d56c69e699"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxNjoyOTowNlrOHwk6Xg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQxNjo0NDowM1rOHwlkvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDY5ODQ2Mg==", "bodyText": "Please fix the indentation.", "url": "https://github.com/eclipse-openj9/openj9/pull/10891#discussion_r520698462", "createdAt": "2020-11-10T16:29:06Z", "author": {"login": "llxia"}, "path": "test/functional/cmdLineTests/CDSAdaptorTest/build.xml", "diffHunk": "@@ -0,0 +1,111 @@\n+<?xml version=\"1.0\"?>\n+\n+<!--\n+  Copyright (c) 2020, 2020 IBM Corp. and others\n+\n+  This program and the accompanying materials are made available under\n+  the terms of the Eclipse Public License 2.0 which accompanies this\n+  distribution and is available at https://www.eclipse.org/legal/epl-2.0/\n+  or the Apache License, Version 2.0 which accompanies this distribution and\n+  is available at https://www.apache.org/licenses/LICENSE-2.0.\n+\n+  This Source Code may also be made available under the following\n+  Secondary Licenses when the conditions for such availability set\n+  forth in the Eclipse Public License, v. 2.0 are satisfied: GNU\n+  General Public License, version 2 with the GNU Classpath\n+  Exception [1] and GNU General Public License, version 2 with the\n+  OpenJDK Assembly Exception [2].\n+\n+  [1] https://www.gnu.org/software/classpath/license.html\n+  [2] http://openjdk.java.net/legal/assembly-exception.html\n+\n+  SPDX-License-Identifier: EPL-2.0 OR Apache-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR LicenseRef-GPL-2.0 WITH Assembly-exception\n+-->\n+\n+<project name=\"CDS Adaptor Tests\" default=\"clean\" basedir=\".\">\n+\t<taskdef resource='net/sf/antcontrib/antlib.xml'/>\n+    <description>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46a575ac2a5e99544a61aca03b3de7d56c69e699"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDY5ODg1OQ==", "bodyText": "Please remove above lines", "url": "https://github.com/eclipse-openj9/openj9/pull/10891#discussion_r520698859", "createdAt": "2020-11-10T16:29:34Z", "author": {"login": "llxia"}, "path": "test/functional/cmdLineTests/CDSAdaptorTest/build.xml", "diffHunk": "@@ -0,0 +1,111 @@\n+<?xml version=\"1.0\"?>\n+\n+<!--\n+  Copyright (c) 2020, 2020 IBM Corp. and others\n+\n+  This program and the accompanying materials are made available under\n+  the terms of the Eclipse Public License 2.0 which accompanies this\n+  distribution and is available at https://www.eclipse.org/legal/epl-2.0/\n+  or the Apache License, Version 2.0 which accompanies this distribution and\n+  is available at https://www.apache.org/licenses/LICENSE-2.0.\n+\n+  This Source Code may also be made available under the following\n+  Secondary Licenses when the conditions for such availability set\n+  forth in the Eclipse Public License, v. 2.0 are satisfied: GNU\n+  General Public License, version 2 with the GNU Classpath\n+  Exception [1] and GNU General Public License, version 2 with the\n+  OpenJDK Assembly Exception [2].\n+\n+  [1] https://www.gnu.org/software/classpath/license.html\n+  [2] http://openjdk.java.net/legal/assembly-exception.html\n+\n+  SPDX-License-Identifier: EPL-2.0 OR Apache-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR LicenseRef-GPL-2.0 WITH Assembly-exception\n+-->\n+\n+<project name=\"CDS Adaptor Tests\" default=\"clean\" basedir=\".\">\n+\t<taskdef resource='net/sf/antcontrib/antlib.xml'/>\n+    <description>\n+       Build CDSAdaptorTest \n+    </description>\n+\t\n+\t<!-- set global properties for this build -->\n+\t<property name=\"DEST\" value=\"${BUILD_ROOT}/functional/cmdLineTests/CDSAdaptorTest\" />\n+\t<property name=\"dist\" location=\"${DEST}\"/>\n+\t<!--Properties for this particular build-->\n+\t<property name=\"src\" location=\"./src\"/>\n+\t<property name=\"src_resources_testBundle\" location=\"./resources/TestBundle/src\"/>\n+\t<property name=\"src_resources_weavinghookTest\" location=\"./resources/WeavinghookTest/src\"/>\n+\t<property name=\"build\" location=\"./bin\"/>\n+\t<property name=\"build_resource_testBundle\" location=\"./bin_resource_testBundle\"/>\n+\t<property name=\"build_resource_weavinghookTest\" location=\"./bin_resource_weavinghookTest\"/>\n+\t<property name=\"resources\" location=\"./resources\"/>\n+\t<!-- <property name=\"src.level\" value=\"1.5\"/>\n+\t<property name=\"target.level\" value=\"1.5\"/> -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46a575ac2a5e99544a61aca03b3de7d56c69e699"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDcwMTU5MA==", "bodyText": "Does this test only work for java8?", "url": "https://github.com/eclipse-openj9/openj9/pull/10891#discussion_r520701590", "createdAt": "2020-11-10T16:33:23Z", "author": {"login": "llxia"}, "path": "test/functional/cmdLineTests/CDSAdaptorTest/playlist.xml", "diffHunk": "@@ -0,0 +1,55 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Copyright (c) 2020, 2020 IBM Corp. and others\n+\n+This program and the accompanying materials are made available under\n+the terms of the Eclipse Public License 2.0 which accompanies this\n+distribution and is available at https://www.eclipse.org/legal/epl-2.0/\n+or the Apache License, Version 2.0 which accompanies this distribution and\n+is available at https://www.apache.org/licenses/LICENSE-2.0.\n+\n+This Source Code may also be made available under the following\n+Secondary Licenses when the conditions for such availability set\n+forth in the Eclipse Public License, v. 2.0 are satisfied: GNU\n+General Public License, version 2 with the GNU Classpath\n+Exception [1] and GNU General Public License, version 2 with the\n+OpenJDK Assembly Exception [2].\n+\n+[1] https://www.gnu.org/software/classpath/license.html\n+[2] http://openjdk.java.net/legal/assembly-exception.html\n+\n+SPDX-License-Identifier: EPL-2.0 OR Apache-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR LicenseRef-GPL-2.0 WITH Assembly-exception\n+-->\n+<playlist xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"../../../TKG/playlist.xsd\">\n+\t<test>\n+\t\t<testCaseName>CDSAdaptorTest</testCaseName>\n+\t\t<variations>\n+\t\t\t<variation>NoOptions</variation>\n+\t\t</variations>\n+\t\t<command>cp $(Q)$(TEST_RESROOT)$(D)cdsadaptortest.jar$(Q) .; \\\n+\t\tcp $(Q)$(LIB_DIR)$(D)org.eclipse.osgi_3.16.100.v20200904-1304.jar$(Q) .; \\\n+\t\ttrue CacheManagement.jar ; \\\n+\t\t$(Q)$(TEST_JDK_HOME)$(D)bin$(D)jar$(EXECUTABLE_SUFFIX)$(Q) xf cdsadaptortest.jar; \\\n+\t\t$(CONVERT_TO_EBCDIC_CMD) \\\n+\t\t$(JAVA_COMMAND) $(JVM_OPTIONS) \\\n+\t\t-DJARPATH=$(Q)$(TEST_RESROOT)$(D)cdsadaptortest.jar$(Q) \\\n+\t\t-DEXE=$(SQ)$(JAVA_COMMAND) $(JVM_OPTIONS) $(SQ) \\\n+\t\t-DCPDL=$(Q)$(P)$(Q) -DPATHSEP=$(Q)$(D)$(Q) \\\n+\t\t-jar $(CMDLINETESTER_JAR) -config $(Q)$(TEST_RESROOT)$(D)cdsadaptortest.xml$(Q) \\\n+\t\t-verbose -nonZeroExitWhenError; \\\n+\t\t$(TEST_STATUS)</command>\n+\t\t<subsets>\n+\t\t\t<subset>8</subset>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46a575ac2a5e99544a61aca03b3de7d56c69e699"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDcwNTI1Mw==", "bodyText": "Instead of coping the jar into current dir, can we just directly point to the jar under $(LIB_DIR) in cdsadaptortest.xml?\nIs it possible to do the same for jars in cdsadaptortest.jar? It seems that we jar it in build.xml and unjar it in playlist.xml. It would be nice if we can avoid this by not jarring it at all.", "url": "https://github.com/eclipse-openj9/openj9/pull/10891#discussion_r520705253", "createdAt": "2020-11-10T16:38:22Z", "author": {"login": "llxia"}, "path": "test/functional/cmdLineTests/CDSAdaptorTest/playlist.xml", "diffHunk": "@@ -0,0 +1,55 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Copyright (c) 2020, 2020 IBM Corp. and others\n+\n+This program and the accompanying materials are made available under\n+the terms of the Eclipse Public License 2.0 which accompanies this\n+distribution and is available at https://www.eclipse.org/legal/epl-2.0/\n+or the Apache License, Version 2.0 which accompanies this distribution and\n+is available at https://www.apache.org/licenses/LICENSE-2.0.\n+\n+This Source Code may also be made available under the following\n+Secondary Licenses when the conditions for such availability set\n+forth in the Eclipse Public License, v. 2.0 are satisfied: GNU\n+General Public License, version 2 with the GNU Classpath\n+Exception [1] and GNU General Public License, version 2 with the\n+OpenJDK Assembly Exception [2].\n+\n+[1] https://www.gnu.org/software/classpath/license.html\n+[2] http://openjdk.java.net/legal/assembly-exception.html\n+\n+SPDX-License-Identifier: EPL-2.0 OR Apache-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR LicenseRef-GPL-2.0 WITH Assembly-exception\n+-->\n+<playlist xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"../../../TKG/playlist.xsd\">\n+\t<test>\n+\t\t<testCaseName>CDSAdaptorTest</testCaseName>\n+\t\t<variations>\n+\t\t\t<variation>NoOptions</variation>\n+\t\t</variations>\n+\t\t<command>cp $(Q)$(TEST_RESROOT)$(D)cdsadaptortest.jar$(Q) .; \\\n+\t\tcp $(Q)$(LIB_DIR)$(D)org.eclipse.osgi_3.16.100.v20200904-1304.jar$(Q) .; \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46a575ac2a5e99544a61aca03b3de7d56c69e699"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDcwOTMxMA==", "bodyText": "Did the JARPATH get used?", "url": "https://github.com/eclipse-openj9/openj9/pull/10891#discussion_r520709310", "createdAt": "2020-11-10T16:44:03Z", "author": {"login": "llxia"}, "path": "test/functional/cmdLineTests/CDSAdaptorTest/playlist.xml", "diffHunk": "@@ -0,0 +1,55 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Copyright (c) 2020, 2020 IBM Corp. and others\n+\n+This program and the accompanying materials are made available under\n+the terms of the Eclipse Public License 2.0 which accompanies this\n+distribution and is available at https://www.eclipse.org/legal/epl-2.0/\n+or the Apache License, Version 2.0 which accompanies this distribution and\n+is available at https://www.apache.org/licenses/LICENSE-2.0.\n+\n+This Source Code may also be made available under the following\n+Secondary Licenses when the conditions for such availability set\n+forth in the Eclipse Public License, v. 2.0 are satisfied: GNU\n+General Public License, version 2 with the GNU Classpath\n+Exception [1] and GNU General Public License, version 2 with the\n+OpenJDK Assembly Exception [2].\n+\n+[1] https://www.gnu.org/software/classpath/license.html\n+[2] http://openjdk.java.net/legal/assembly-exception.html\n+\n+SPDX-License-Identifier: EPL-2.0 OR Apache-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR LicenseRef-GPL-2.0 WITH Assembly-exception\n+-->\n+<playlist xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"../../../TKG/playlist.xsd\">\n+\t<test>\n+\t\t<testCaseName>CDSAdaptorTest</testCaseName>\n+\t\t<variations>\n+\t\t\t<variation>NoOptions</variation>\n+\t\t</variations>\n+\t\t<command>cp $(Q)$(TEST_RESROOT)$(D)cdsadaptortest.jar$(Q) .; \\\n+\t\tcp $(Q)$(LIB_DIR)$(D)org.eclipse.osgi_3.16.100.v20200904-1304.jar$(Q) .; \\\n+\t\ttrue CacheManagement.jar ; \\\n+\t\t$(Q)$(TEST_JDK_HOME)$(D)bin$(D)jar$(EXECUTABLE_SUFFIX)$(Q) xf cdsadaptortest.jar; \\\n+\t\t$(CONVERT_TO_EBCDIC_CMD) \\\n+\t\t$(JAVA_COMMAND) $(JVM_OPTIONS) \\\n+\t\t-DJARPATH=$(Q)$(TEST_RESROOT)$(D)cdsadaptortest.jar$(Q) \\", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "46a575ac2a5e99544a61aca03b3de7d56c69e699"}, "originalPosition": 35}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "46a575ac2a5e99544a61aca03b3de7d56c69e699", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/46a575ac2a5e99544a61aca03b3de7d56c69e699", "committedDate": "2020-11-10T15:14:11Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}, "afterCommit": {"oid": "b0f49ad5ad23716935353c134441e1eaa4aa1739", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/b0f49ad5ad23716935353c134441e1eaa4aa1739", "committedDate": "2020-11-11T00:01:15Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b0f49ad5ad23716935353c134441e1eaa4aa1739", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/b0f49ad5ad23716935353c134441e1eaa4aa1739", "committedDate": "2020-11-11T00:01:15Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}, "afterCommit": {"oid": "4ed5883cf88bf049bc2a3a1972ca3839b9096757", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/4ed5883cf88bf049bc2a3a1972ca3839b9096757", "committedDate": "2020-11-11T00:13:31Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4ed5883cf88bf049bc2a3a1972ca3839b9096757", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/4ed5883cf88bf049bc2a3a1972ca3839b9096757", "committedDate": "2020-11-11T00:13:31Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}, "afterCommit": {"oid": "b9c661dd7c74e018cc622c43d54efed19ee19fc0", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/b9c661dd7c74e018cc622c43d54efed19ee19fc0", "committedDate": "2020-11-11T02:00:44Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f73eaaa3887c5e28fc9c00f2d19e3be692a60a2", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/4f73eaaa3887c5e28fc9c00f2d19e3be692a60a2", "committedDate": "2020-11-11T16:53:03Z", "message": "Ported CDSAdaptorTest original scripts\n- Port CDSAdaptorTest original scripts from vmfarm\n- this commit cannot run due to osgi update\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b9c661dd7c74e018cc622c43d54efed19ee19fc0", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/b9c661dd7c74e018cc622c43d54efed19ee19fc0", "committedDate": "2020-11-11T02:00:44Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- Port CDSAdaptorTest from vmfarm\n- updated osgi from 2012 to 2020 version\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}, "afterCommit": {"oid": "bbe2d977aa8d45cb28d0d2d3e7e77ebf670928a3", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/bbe2d977aa8d45cb28d0d2d3e7e77ebf670928a3", "committedDate": "2020-11-11T17:02:38Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- updated osgi from 2012 to 2020 version\n- enabled for all jdk versions\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4Mzg2ODUy", "url": "https://github.com/eclipse-openj9/openj9/pull/10891#pullrequestreview-528386852", "createdAt": "2020-11-11T17:30:08Z", "commit": {"oid": "bbe2d977aa8d45cb28d0d2d3e7e77ebf670928a3"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNzozMDowOFrOHxXISQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQxNzozNzo1NlrOHxXc4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTUyMTIyNQ==", "bodyText": "This author annotation can be removed.", "url": "https://github.com/eclipse-openj9/openj9/pull/10891#discussion_r521521225", "createdAt": "2020-11-11T17:30:08Z", "author": {"login": "hangshao0"}, "path": "test/functional/cmdLineTests/CDSAdaptorTest/resources/TestBundle/src/com/ibm/testbundle/SomeMessageV1.java", "diffHunk": "@@ -1,17 +1,39 @@\n-package com.ibm.testbundle;\r\n-\r\n-/**\r\n- * A dummy program to print some message\r\n- *  \r\n- * @author administrator\r\n- *\r\n- */\r\n-public class SomeMessageV1 {\r\n-\r\n-\t/* If weaving hook bundle (com.ibm.weavinghooktest) is installed and running, \r\n-\t * it will replace the class bytes of this class with that of SomeMessageV2.\r\n-\t */\r\n-\tpublic void printMessage() {\r\n-\t\tSystem.out.println(\"A message from original class\");\r\n-\t}\r\n-}\r\n+/*******************************************************************************\n+ * Copyright (c) 2001, 2020 IBM Corp. and others\n+ *\n+ * This program and the accompanying materials are made available under\n+ * the terms of the Eclipse Public License 2.0 which accompanies this\n+ * distribution and is available at https://www.eclipse.org/legal/epl-2.0/\n+ * or the Apache License, Version 2.0 which accompanies this distribution and\n+ * is available at https://www.apache.org/licenses/LICENSE-2.0.\n+ *\n+ * This Source Code may also be made available under the following\n+ * Secondary Licenses when the conditions for such availability set\n+ * forth in the Eclipse Public License, v. 2.0 are satisfied: GNU\n+ * General Public License, version 2 with the GNU Classpath\n+ * Exception [1] and GNU General Public License, version 2 with the\n+ * OpenJDK Assembly Exception [2].\n+ *\n+ * [1] https://www.gnu.org/software/classpath/license.html\n+ * [2] http://openjdk.java.net/legal/assembly-exception.html\n+ *\n+ * SPDX-License-Identifier: EPL-2.0 OR Apache-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR LicenseRef-GPL-2.0 WITH Assembly-exception\n+ *******************************************************************************/\n+\n+package com.ibm.testbundle;\n+\n+/**\n+ * A dummy program to print some message\n+ *  \n+ * @author administrator", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bbe2d977aa8d45cb28d0d2d3e7e77ebf670928a3"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTUyMTQ5MQ==", "bodyText": "This author annotation can be removed.", "url": "https://github.com/eclipse-openj9/openj9/pull/10891#discussion_r521521491", "createdAt": "2020-11-11T17:30:40Z", "author": {"login": "hangshao0"}, "path": "test/functional/cmdLineTests/CDSAdaptorTest/resources/WeavinghookTest/src/com/ibm/weavinghooktest/Util.java", "diffHunk": "@@ -1,100 +1,122 @@\n-package com.ibm.weavinghooktest;\r\n-\r\n-import java.io.ByteArrayOutputStream;\r\n-import java.io.IOException;\r\n-import java.io.InputStream;\r\n-import java.io.UnsupportedEncodingException;\r\n-import java.net.URL;\r\n-\r\n-import org.osgi.framework.Bundle;\r\n-\r\n-/**\r\n- * A utility class used by Weaving Hook to redefine class bytes of a given class\r\n- * \r\n- * @author administrator\r\n- */\r\n-public class Util {\r\n-\t\r\n-\t/*\r\n-\t * Returns class bytes of a specified class present in the specified bundle.\r\n-\t */\r\n-\tpublic static byte[] getClassBytes(Bundle bundle, String className) {\r\n-\t\tbyte classBytes[];\r\n-\t\t\r\n-\t\ttry {\r\n-\t\t\tString qualifiedClassName = className.replace('.', '/') + \".class\";\r\n-\t\t\tURL url = bundle.getEntry(qualifiedClassName);\r\n-\t\t\tif (url != null) {\r\n-\t\t\t\tInputStream in = url.openStream();\r\n-\t\t\t\tByteArrayOutputStream out = new ByteArrayOutputStream();\r\n-\t\t\t\tint b;\r\n-\t\t\t\twhile ((b = in.read()) != -1) {\r\n-\t\t\t\t\tout.write(b);\r\n-\t\t\t\t}\r\n-\t\t\t\tin.close();\r\n-\t\t\t\tclassBytes = out.toByteArray();\r\n-\t\t\t} else {\r\n-\t\t\t\tclassBytes = null;\r\n-\t\t\t}\r\n-\t\t} catch (IOException e) {\t\t\t\r\n-\t\t\te.printStackTrace();\r\n-\t\t\treturn null;\r\n-\t\t}\r\n-\t\t\r\n-\t\treturn classBytes;\r\n-\t}\r\n-\t\r\n-\t// returns the index >= offset of the first occurrence of sequence in buffer\r\n-\tpublic static int indexOf(byte[] buffer, int offset, byte[] sequence)\r\n-\t{\r\n-\t\twhile (buffer.length - offset >= sequence.length) {\r\n-\t\t\tfor (int i = 0; i < sequence.length; i++) {\r\n-\t\t\t\tif (buffer[offset + i] != sequence[i]) {\r\n-\t\t\t\t\tbreak;\r\n-\t\t\t\t}\r\n-\t\t\t\tif (i == sequence.length - 1) {\r\n-\t\t\t\t\treturn offset;\r\n-\t\t\t\t}\r\n-\t\t\t}\r\n-\t\t\toffset++;\r\n-\t\t}\r\n-\t\treturn -1;\r\n-\t}\r\n-\r\n-\t// replaces all occurrences of seq1 in original buffer with seq2\r\n-\tpublic static byte[] replaceAll(byte[] buffer, byte[] seq1, byte[] seq2) {\r\n-\t\tByteArrayOutputStream out = new ByteArrayOutputStream();\r\n-\t\tint index, offset = 0;\r\n-\t\twhile ((index = indexOf(buffer, offset, seq1)) != -1) {\r\n-\t\t\tif (index - offset != 0) {\r\n-\t\t\t\tout.write(buffer, offset, index - offset);\r\n-\t\t\t}\r\n-\t\t\tout.write(seq2, 0, seq2.length);\r\n-\t\t\toffset = index + seq1.length;\r\n-\t\t}\r\n-\t\tif (offset < buffer.length) {\r\n-\t\t\tout.write(buffer, offset, buffer.length - offset);\r\n-\t\t}\r\n-\t\treturn out.toByteArray();\r\n-\t}\r\n-\t\r\n-\tpublic static byte[] replaceClassNames(byte[] classBytes, String originalClassName, String redefinedClassName) {\r\n-\t\t// replace all occurrences of the redefined class name with the original class name\r\n-\t\ttry {\r\n-\t\t\tbyte[] r = redefinedClassName.getBytes(\"UTF-8\");\r\n-\t\t\tbyte[] o = originalClassName.getBytes(\"UTF-8\");\r\n-\t\t\t// since this is a naive search and replace that doesn't\r\n-\t\t\t// take into account the structure of the class file, and\r\n-\t\t\t// hence would not update length fields, the two names must\r\n-\t\t\t// be of the same length\r\n-\t\t\tif (r.length != o.length) {\r\n-\t\t\t\treturn null;\r\n-\t\t\t}\r\n-\t\t\tclassBytes = Util.replaceAll(classBytes, r, o);\r\n-\t\t} catch (UnsupportedEncodingException e) {\r\n-\t\t\te.printStackTrace();\r\n-\t\t\treturn null;\r\n-\t\t}\r\n-\t\treturn classBytes;\r\n-\t}\r\n-}\r\n+/*******************************************************************************\n+ * Copyright (c) 2001, 2020 IBM Corp. and others\n+ *\n+ * This program and the accompanying materials are made available under\n+ * the terms of the Eclipse Public License 2.0 which accompanies this\n+ * distribution and is available at https://www.eclipse.org/legal/epl-2.0/\n+ * or the Apache License, Version 2.0 which accompanies this distribution and\n+ * is available at https://www.apache.org/licenses/LICENSE-2.0.\n+ *\n+ * This Source Code may also be made available under the following\n+ * Secondary Licenses when the conditions for such availability set\n+ * forth in the Eclipse Public License, v. 2.0 are satisfied: GNU\n+ * General Public License, version 2 with the GNU Classpath\n+ * Exception [1] and GNU General Public License, version 2 with the\n+ * OpenJDK Assembly Exception [2].\n+ *\n+ * [1] https://www.gnu.org/software/classpath/license.html\n+ * [2] http://openjdk.java.net/legal/assembly-exception.html\n+ *\n+ * SPDX-License-Identifier: EPL-2.0 OR Apache-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR LicenseRef-GPL-2.0 WITH Assembly-exception\n+ *******************************************************************************/\n+\n+package com.ibm.weavinghooktest;\n+\n+import java.io.ByteArrayOutputStream;\n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.io.UnsupportedEncodingException;\n+import java.net.URL;\n+\n+import org.osgi.framework.Bundle;\n+\n+/**\n+ * A utility class used by Weaving Hook to redefine class bytes of a given class\n+ * \n+ * @author administrator", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bbe2d977aa8d45cb28d0d2d3e7e77ebf670928a3"}, "originalPosition": 136}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTUyMjc4NQ==", "bodyText": "In line 48, org.eclipse.osgi_<version>.jar: ......, probably you can mention cds adaptor is inside this jar.", "url": "https://github.com/eclipse-openj9/openj9/pull/10891#discussion_r521522785", "createdAt": "2020-11-11T17:32:58Z", "author": {"login": "hangshao0"}, "path": "test/functional/cmdLineTests/CDSAdaptorTest/readme.txt", "diffHunk": "@@ -25,11 +47,11 @@ Few guidelines/assumptions when writing/updating tests placed in this project:\n \t|\n \t|--org.eclipse.osgi_<version>.jar: this is Equinox jar file, an OSGi framework implementation.\n \t|\n-\t|--Test1Bundles: this directory contains bundles required by java class Test1.\n+\t|--TestBundle: this directory contains bundle source code required by java class TestBundle.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bbe2d977aa8d45cb28d0d2d3e7e77ebf670928a3"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTUyNjQ5OA==", "bodyText": "I see the package name is com.ibm.*, do we want to change that to something like org.openj9.* ? @llxia", "url": "https://github.com/eclipse-openj9/openj9/pull/10891#discussion_r521526498", "createdAt": "2020-11-11T17:37:56Z", "author": {"login": "hangshao0"}, "path": "test/functional/cmdLineTests/CDSAdaptorTest/resources/TestBundle/src/com/ibm/testbundle/Activator.java", "diffHunk": "@@ -1,52 +1,74 @@\n-package com.ibm.testbundle;\r\n-\r\n-import org.osgi.framework.Bundle;\r\n-import org.osgi.framework.BundleActivator;\r\n-import org.osgi.framework.BundleContext;\r\n-\r\n-public class Activator implements BundleActivator {\r\n-\r\n-\tpublic static final String WEAVING_HOOK_BUNDLE_SYMBOLIC_NAME = \"com.ibm.weavinghooktest\";\r\n-\t\r\n-\tprivate static BundleContext context;\r\n-\t\r\n-\tstatic BundleContext getContext() {\r\n-\t\treturn context;\r\n-\t}\r\n-\r\n-\t/*\r\n-\t * (non-Javadoc)\r\n-\t * @see org.osgi.framework.BundleActivator#start(org.osgi.framework.BundleContext)\r\n-\t */\r\n-\tpublic void start(BundleContext bundleContext) throws Exception {\r\n-\t\tActivator.context = bundleContext;\r\n-\t\t\r\n-\t\tBundle[] bundleList = bundleContext.getBundles();\r\n-\t\tBundle weavingHookBundle = null;\r\n-\t\t/* If weaving hook bundle is installed and not yet started, \r\n-\t\t * start it now before accessing SomeMessageV1 class \r\n-\t\t */ \r\n-\t\tfor (int i = 0; i < bundleList.length; i++) {\r\n-\t\t\tString symbolicName = bundleList[i].getSymbolicName();\r\n-\t\t\tif (symbolicName.equals(WEAVING_HOOK_BUNDLE_SYMBOLIC_NAME)) {\r\n-\t\t\t\tweavingHookBundle = bundleList[i];\r\n-\t\t\t\tbreak;\r\n-\t\t\t}\r\n-\t\t}\r\n-\t\tif ((weavingHookBundle != null) && (weavingHookBundle.getState() == Bundle.RESOLVED)) {\r\n-\t\t\tweavingHookBundle.start();\r\n-\t\t}\r\n-\t\t\r\n-\t\tSomeMessageV1 obj = new SomeMessageV1();\r\n-\t\tobj.printMessage();\r\n-\t}\r\n-\r\n-\t/*\r\n-\t * (non-Javadoc)\r\n-\t * @see org.osgi.framework.BundleActivator#stop(org.osgi.framework.BundleContext)\r\n-\t */\r\n-\tpublic void stop(BundleContext bundleContext) throws Exception {\r\n-\t\tActivator.context = null;\r\n-\t}\r\n-\r\n-}\r\n+/*******************************************************************************\n+ * Copyright (c) 2001, 2020 IBM Corp. and others\n+ *\n+ * This program and the accompanying materials are made available under\n+ * the terms of the Eclipse Public License 2.0 which accompanies this\n+ * distribution and is available at https://www.eclipse.org/legal/epl-2.0/\n+ * or the Apache License, Version 2.0 which accompanies this distribution and\n+ * is available at https://www.apache.org/licenses/LICENSE-2.0.\n+ *\n+ * This Source Code may also be made available under the following\n+ * Secondary Licenses when the conditions for such availability set\n+ * forth in the Eclipse Public License, v. 2.0 are satisfied: GNU\n+ * General Public License, version 2 with the GNU Classpath\n+ * Exception [1] and GNU General Public License, version 2 with the\n+ * OpenJDK Assembly Exception [2].\n+ *\n+ * [1] https://www.gnu.org/software/classpath/license.html\n+ * [2] http://openjdk.java.net/legal/assembly-exception.html\n+ *\n+ * SPDX-License-Identifier: EPL-2.0 OR Apache-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR LicenseRef-GPL-2.0 WITH Assembly-exception\n+ *******************************************************************************/\n+\n+package com.ibm.testbundle;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bbe2d977aa8d45cb28d0d2d3e7e77ebf670928a3"}, "originalPosition": 75}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bbe2d977aa8d45cb28d0d2d3e7e77ebf670928a3", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/bbe2d977aa8d45cb28d0d2d3e7e77ebf670928a3", "committedDate": "2020-11-11T17:02:38Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- updated osgi from 2012 to 2020 version\n- enabled for all jdk versions\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}, "afterCommit": {"oid": "ec9b3b92d59709fe4f066aac979858ebb36204a3", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/ec9b3b92d59709fe4f066aac979858ebb36204a3", "committedDate": "2020-11-11T21:29:14Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- updated osgi from 2012 to 2020 version\n- enabled for all jdk versions\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ec9b3b92d59709fe4f066aac979858ebb36204a3", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/ec9b3b92d59709fe4f066aac979858ebb36204a3", "committedDate": "2020-11-11T21:29:14Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- updated osgi from 2012 to 2020 version\n- enabled for all jdk versions\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}, "afterCommit": {"oid": "c2cc35884ba725e2986c271581b8d4931952ed1f", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c2cc35884ba725e2986c271581b8d4931952ed1f", "committedDate": "2020-11-11T22:18:02Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- updated osgi from 2012 to 2020 version\n- enabled for all jdk versions\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c2cc35884ba725e2986c271581b8d4931952ed1f", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c2cc35884ba725e2986c271581b8d4931952ed1f", "committedDate": "2020-11-11T22:18:02Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- updated osgi from 2012 to 2020 version\n- enabled for all jdk versions\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}, "afterCommit": {"oid": "a3dd49a5f39207d44b1b6192ad1f71055587a133", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/a3dd49a5f39207d44b1b6192ad1f71055587a133", "committedDate": "2020-11-12T02:16:15Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- updated osgi from 2012 to 2020 version\n- enabled for all jdk versions\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5MjU3NzQ4", "url": "https://github.com/eclipse-openj9/openj9/pull/10891#pullrequestreview-529257748", "createdAt": "2020-11-12T16:21:42Z", "commit": {"oid": "a3dd49a5f39207d44b1b6192ad1f71055587a133"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a3dd49a5f39207d44b1b6192ad1f71055587a133", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/a3dd49a5f39207d44b1b6192ad1f71055587a133", "committedDate": "2020-11-12T02:16:15Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- updated osgi from 2012 to 2020 version\n- enabled for all jdk versions\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}, "afterCommit": {"oid": "1cceabb0675fb96732e71879b441436108c2216e", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/1cceabb0675fb96732e71879b441436108c2216e", "committedDate": "2020-11-12T16:40:22Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- updated osgi from 2012 to 2020 version\n- enabled for all jdk versions\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- modified com.ibm.* to org.openj9.test.*\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1cceabb0675fb96732e71879b441436108c2216e", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/1cceabb0675fb96732e71879b441436108c2216e", "committedDate": "2020-11-12T16:40:22Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- updated osgi from 2012 to 2020 version\n- enabled for all jdk versions\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- modified com.ibm.* to org.openj9.test.*\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}, "afterCommit": {"oid": "60f3b640a619c54d97e814b6f86c11a65553d0fe", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/60f3b640a619c54d97e814b6f86c11a65553d0fe", "committedDate": "2020-11-12T20:55:22Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- updated osgi from 2012 to 2020 version\n- enabled for all jdk versions\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- modified com.ibm.* to org.openj9.test.*\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc544bf6a03fa203ee645936835bd1aac961caf4", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/fc544bf6a03fa203ee645936835bd1aac961caf4", "committedDate": "2020-11-12T21:45:52Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- updated osgi from 2012 to 2020 version\n- enabled for all jdk versions\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- modified com.ibm.* to org.openj9.test.*\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "60f3b640a619c54d97e814b6f86c11a65553d0fe", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/60f3b640a619c54d97e814b6f86c11a65553d0fe", "committedDate": "2020-11-12T20:55:22Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- updated osgi from 2012 to 2020 version\n- enabled for all jdk versions\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- modified com.ibm.* to org.openj9.test.*\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}, "afterCommit": {"oid": "fc544bf6a03fa203ee645936835bd1aac961caf4", "author": {"user": {"login": "LongyuZhang", "name": null}}, "url": "https://github.com/eclipse-openj9/openj9/commit/fc544bf6a03fa203ee645936835bd1aac961caf4", "committedDate": "2020-11-12T21:45:52Z", "message": "Added CDSAdaptorTest with updated osgi verison\n- updated osgi from 2012 to 2020 version\n- enabled for all jdk versions\n- modified Testbundle and Weavinghook from jar to source and manifest\n- removed outdated cds jars\n- modified com.ibm.* to org.openj9.test.*\n- Related to issue: runtimes/backlog 394\n\n[ci skip]\nSigned-off-by: Longyu Zhang <longyu.zhang@ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwMTU2Nzk4", "url": "https://github.com/eclipse-openj9/openj9/pull/10891#pullrequestreview-530156798", "createdAt": "2020-11-13T15:27:39Z", "commit": {"oid": "fc544bf6a03fa203ee645936835bd1aac961caf4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 179, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}