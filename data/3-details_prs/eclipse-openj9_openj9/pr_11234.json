{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI0MjU0ODEy", "number": 11234, "title": "Move native Thread.setNameImpl method after Thread initialize()", "bodyText": "To ensure proper Thread/ClassLoader initialization before binding the native method java.lang.Thread.setNameImpl(threadRef, threadName), move it after initialize(booting, threadGroup, null, null, true) within the Thread constructor.\nfixes #11181\nSigned-off-by: Jason Feng fengj@ca.ibm.com", "createdAt": "2020-11-19T21:51:07Z", "url": "https://github.com/eclipse-openj9/openj9/pull/11234", "merged": true, "mergeCommit": {"oid": "969207defded379374311da3c028d9324458e113"}, "closed": true, "closedAt": "2020-11-21T02:58:09Z", "author": {"login": "JasonFengJ9"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdeMHhBABqjQwMTg1MDQ1NDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdei8lzgFqTUzNTg3NzAyNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a50ddee286dff30ea0a4d81529563271bf0cfc71", "author": {"user": {"login": "JasonFengJ9", "name": "Jason Feng"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/a50ddee286dff30ea0a4d81529563271bf0cfc71", "committedDate": "2020-11-19T21:50:01Z", "message": "Move native Thread.setNameImpl method after Thread initialize()\n\nTo ensure proper Thread/ClassLoader initialization before binding the\nnative method java.lang.Thread.setNameImpl(threadRef, threadName), move\nit after initialize(booting, threadGroup, null, null, true) within the\nThread constructor.\n\n\nSigned-off-by: Jason Feng <fengj@ca.ibm.com>"}, "afterCommit": {"oid": "0b7cf926713981340ec44bf069ad3d8852d86556", "author": {"user": {"login": "JasonFengJ9", "name": "Jason Feng"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/0b7cf926713981340ec44bf069ad3d8852d86556", "committedDate": "2020-11-20T00:19:14Z", "message": "Move native Thread.setNameImpl method after Thread initialize()\n\nTo ensure proper Thread/ClassLoader initialization before binding the\nnative method java.lang.Thread.setNameImpl(threadRef, threadName), move\nit after initialize(booting, threadGroup, null, null, true) within the\nThread constructor;\nLimit the change to JDK15+.\n\n\nSigned-off-by: Jason Feng <fengj@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0b7cf926713981340ec44bf069ad3d8852d86556", "author": {"user": {"login": "JasonFengJ9", "name": "Jason Feng"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/0b7cf926713981340ec44bf069ad3d8852d86556", "committedDate": "2020-11-20T00:19:14Z", "message": "Move native Thread.setNameImpl method after Thread initialize()\n\nTo ensure proper Thread/ClassLoader initialization before binding the\nnative method java.lang.Thread.setNameImpl(threadRef, threadName), move\nit after initialize(booting, threadGroup, null, null, true) within the\nThread constructor;\nLimit the change to JDK15+.\n\n\nSigned-off-by: Jason Feng <fengj@ca.ibm.com>"}, "afterCommit": {"oid": "44b07827802a5dd25e815640308eb4131001eb66", "author": {"user": {"login": "JasonFengJ9", "name": "Jason Feng"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/44b07827802a5dd25e815640308eb4131001eb66", "committedDate": "2020-11-20T13:00:15Z", "message": "Move native Thread.setNameImpl method after Thread initialize()\n\nTo ensure proper Thread/ClassLoader initialization before binding the\nnative method java.lang.Thread.setNameImpl(threadRef, threadName), move\nit after initialize(booting, threadGroup, null, null, true) within the\nThread constructor;\nLimit the change to JDK15+ booting stage.\n\n\nSigned-off-by: Jason Feng <fengj@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1NDc5OTE3", "url": "https://github.com/eclipse-openj9/openj9/pull/11234#pullrequestreview-535479917", "createdAt": "2020-11-20T14:35:15Z", "commit": {"oid": "44b07827802a5dd25e815640308eb4131001eb66"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQxNDozNToxNVrOH3SQIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQxNDozNToxNVrOH3SQIQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzczMjc2OQ==", "bodyText": "Eventually we want to eliminate all the JavaNN flags in favour of using JAVA_SPEC_VERSION.\nRather than add new references to Java15, could you express this as:\n/*[IF JAVA_SPEC_VERSION < 15]*/", "url": "https://github.com/eclipse-openj9/openj9/pull/11234#discussion_r527732769", "createdAt": "2020-11-20T14:35:15Z", "author": {"login": "keithc-ca"}, "path": "jcl/src/java.base/share/classes/java/lang/Thread.java", "diffHunk": "@@ -156,7 +156,9 @@ private Thread(String vmName, Object vmThreadGroup, int vmPriority, boolean vmIs\n \tsuper();\n \n \tString threadName = (vmName == null) ? newName() : vmName;\n+\t/*[IF !Java15]*/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "44b07827802a5dd25e815640308eb4131001eb66"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "44b07827802a5dd25e815640308eb4131001eb66", "author": {"user": {"login": "JasonFengJ9", "name": "Jason Feng"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/44b07827802a5dd25e815640308eb4131001eb66", "committedDate": "2020-11-20T13:00:15Z", "message": "Move native Thread.setNameImpl method after Thread initialize()\n\nTo ensure proper Thread/ClassLoader initialization before binding the\nnative method java.lang.Thread.setNameImpl(threadRef, threadName), move\nit after initialize(booting, threadGroup, null, null, true) within the\nThread constructor;\nLimit the change to JDK15+ booting stage.\n\n\nSigned-off-by: Jason Feng <fengj@ca.ibm.com>"}, "afterCommit": {"oid": "4350e06cea37e9fa64248242147f0e722e0988bf", "author": {"user": {"login": "JasonFengJ9", "name": "Jason Feng"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/4350e06cea37e9fa64248242147f0e722e0988bf", "committedDate": "2020-11-20T14:46:41Z", "message": "Move native Thread.setNameImpl method after Thread initialize()\n\nTo ensure proper Thread/ClassLoader initialization before binding the\nnative method java.lang.Thread.setNameImpl(threadRef, threadName), move\nit after initialize(booting, threadGroup, null, null, true) within the\nThread constructor;\nLimit the change to JDK15+ booting stage.\n\n\nSigned-off-by: Jason Feng <fengj@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1NTgzMzE2", "url": "https://github.com/eclipse-openj9/openj9/pull/11234#pullrequestreview-535583316", "createdAt": "2020-11-20T16:33:13Z", "commit": {"oid": "4350e06cea37e9fa64248242147f0e722e0988bf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQxNjozMzoxM1rOH3XB9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMFQxNjozMzoxM1rOH3XB9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzgxMTA2MA==", "bodyText": "Sorry, one more thing. Please add a comment to explain why the Java 15 code is different.", "url": "https://github.com/eclipse-openj9/openj9/pull/11234#discussion_r527811060", "createdAt": "2020-11-20T16:33:13Z", "author": {"login": "pshipton"}, "path": "jcl/src/java.base/share/classes/java/lang/Thread.java", "diffHunk": "@@ -180,6 +186,9 @@ private Thread(String vmName, Object vmThreadGroup, int vmPriority, boolean vmIs\n  \t\n \t/*[PR 100718] Initialize System.in after the main thread */\n \tif (booting) {\n+\t\t/*[IF JAVA_SPEC_VERSION >= 15]*/\n+\t\tsetNameImpl(threadRef, threadName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4350e06cea37e9fa64248242147f0e722e0988bf"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6702918104a97dd0c9bc1996c910b955d25b091", "author": {"user": {"login": "JasonFengJ9", "name": "Jason Feng"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c6702918104a97dd0c9bc1996c910b955d25b091", "committedDate": "2020-11-20T17:04:17Z", "message": "Move native Thread.setNameImpl method after Thread initialize()\n\nTo ensure proper Thread/ClassLoader initialization before binding the\nnative method java.lang.Thread.setNameImpl(threadRef, threadName), move\nit after initialize(booting, threadGroup, null, null, true) within the\nThread constructor;\nLimit the change to JDK15+ booting stage.\n\n\nSigned-off-by: Jason Feng <fengj@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4350e06cea37e9fa64248242147f0e722e0988bf", "author": {"user": {"login": "JasonFengJ9", "name": "Jason Feng"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/4350e06cea37e9fa64248242147f0e722e0988bf", "committedDate": "2020-11-20T14:46:41Z", "message": "Move native Thread.setNameImpl method after Thread initialize()\n\nTo ensure proper Thread/ClassLoader initialization before binding the\nnative method java.lang.Thread.setNameImpl(threadRef, threadName), move\nit after initialize(booting, threadGroup, null, null, true) within the\nThread constructor;\nLimit the change to JDK15+ booting stage.\n\n\nSigned-off-by: Jason Feng <fengj@ca.ibm.com>"}, "afterCommit": {"oid": "c6702918104a97dd0c9bc1996c910b955d25b091", "author": {"user": {"login": "JasonFengJ9", "name": "Jason Feng"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c6702918104a97dd0c9bc1996c910b955d25b091", "committedDate": "2020-11-20T17:04:17Z", "message": "Move native Thread.setNameImpl method after Thread initialize()\n\nTo ensure proper Thread/ClassLoader initialization before binding the\nnative method java.lang.Thread.setNameImpl(threadRef, threadName), move\nit after initialize(booting, threadGroup, null, null, true) within the\nThread constructor;\nLimit the change to JDK15+ booting stage.\n\n\nSigned-off-by: Jason Feng <fengj@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM1ODc3MDI2", "url": "https://github.com/eclipse-openj9/openj9/pull/11234#pullrequestreview-535877026", "createdAt": "2020-11-21T02:57:55Z", "commit": {"oid": "4350e06cea37e9fa64248242147f0e722e0988bf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1619, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}