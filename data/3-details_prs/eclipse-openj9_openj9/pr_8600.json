{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2Njk0OTM5", "number": 8600, "title": "Add jit helper stub for acmp", "bodyText": "Add jit helper stub for acmp\nDepends on eclipse/omr#4841\nSigned-off-by: Tobi Ajila atobia@ca.ibm.com", "createdAt": "2020-02-18T15:51:39Z", "url": "https://github.com/eclipse-openj9/openj9/pull/8600", "merged": true, "mergeCommit": {"oid": "77921b82659f704e4efdda2071744ddd92009ffa"}, "closed": true, "closedAt": "2020-02-20T14:57:38Z", "author": {"login": "tajila"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcFkDHEgBqjMwNDc3MzU1Mzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFmq8SAFqTM2MDU5MTg2OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a0193319ab168cb5755c49a151b94c812c8268e0", "author": {"user": {"login": "tajila", "name": "Tobi"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/a0193319ab168cb5755c49a151b94c812c8268e0", "committedDate": "2020-02-17T21:58:30Z", "message": "Add jit helper stub for acmp\n\nSigned-off-by: Tobi Ajila <atobia@ca.ibm.com>"}, "afterCommit": {"oid": "844e6f71c0b88072d7509dd38d2e09f167acec4c", "author": {"user": {"login": "tajila", "name": "Tobi"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/844e6f71c0b88072d7509dd38d2e09f167acec4c", "committedDate": "2020-02-18T15:55:34Z", "message": "Add jit helper stub for acmp\n\nDepends on https://github.com/eclipse/omr/pull/4841\n\nSigned-off-by: Tobi Ajila <atobia@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "844e6f71c0b88072d7509dd38d2e09f167acec4c", "author": {"user": {"login": "tajila", "name": "Tobi"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/844e6f71c0b88072d7509dd38d2e09f167acec4c", "committedDate": "2020-02-18T15:55:34Z", "message": "Add jit helper stub for acmp\n\nDepends on https://github.com/eclipse/omr/pull/4841\n\nSigned-off-by: Tobi Ajila <atobia@ca.ibm.com>"}, "afterCommit": {"oid": "b4a1a5726b15fde0dc1dff42fa2a5e3faef161df", "author": {"user": {"login": "tajila", "name": "Tobi"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/b4a1a5726b15fde0dc1dff42fa2a5e3faef161df", "committedDate": "2020-02-18T15:58:15Z", "message": "Add jit helper stub for acmp\n\nDepends on https://github.com/eclipse/omr/pull/4841\n\nSigned-off-by: Tobi Ajila <atobia@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNDcxNDc5", "url": "https://github.com/eclipse-openj9/openj9/pull/8600#pullrequestreview-360471479", "createdAt": "2020-02-18T16:12:01Z", "commit": {"oid": "b4a1a5726b15fde0dc1dff42fa2a5e3faef161df"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNjoxMjowMVrOFrIsjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNjoxMjowMVrOFrIsjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDc3NTU2NQ==", "bodyText": "I don't think this needs a return value.", "url": "https://github.com/eclipse-openj9/openj9/pull/8600#discussion_r380775565", "createdAt": "2020-02-18T16:12:01Z", "author": {"login": "gacholio"}, "path": "runtime/codert_vm/cnathelp.cpp", "diffHunk": "@@ -2250,6 +2250,18 @@ old_fast_jitTypeCheckArrayStoreWithNullCheck(J9VMThread *currentThread)\n \treturn slowPath;\n }\n \n+void* J9FASTCALL", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4a1a5726b15fde0dc1dff42fa2a5e3faef161df"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNDcyMjk1", "url": "https://github.com/eclipse-openj9/openj9/pull/8600#pullrequestreview-360472295", "createdAt": "2020-02-18T16:12:58Z", "commit": {"oid": "b4a1a5726b15fde0dc1dff42fa2a5e3faef161df"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNjoxMjo1OFrOFrIvAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNjoxMjo1OFrOFrIvAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDc3NjE5NA==", "bodyText": "If this is the direct call version, you need to return the value from the function, not use the macro.", "url": "https://github.com/eclipse-openj9/openj9/pull/8600#discussion_r380776194", "createdAt": "2020-02-18T16:12:58Z", "author": {"login": "gacholio"}, "path": "runtime/codert_vm/cnathelp.cpp", "diffHunk": "@@ -3102,6 +3114,21 @@ fast_jitTypeCheckArrayStoreWithNullCheck(J9VMThread *currentThread, j9object_t d\n \treturn slowPath;\n }\n \n+void* J9FASTCALL", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4a1a5726b15fde0dc1dff42fa2a5e3faef161df"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNDcyOTQ5", "url": "https://github.com/eclipse-openj9/openj9/pull/8600#pullrequestreview-360472949", "createdAt": "2020-02-18T16:13:42Z", "commit": {"oid": "b4a1a5726b15fde0dc1dff42fa2a5e3faef161df"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNjoxMzo0M1rOFrIw-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNjoxMzo0M1rOFrIw-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDc3NjY5OA==", "bodyText": "Does not need a table entry.", "url": "https://github.com/eclipse-openj9/openj9/pull/8600#discussion_r380776698", "createdAt": "2020-02-18T16:13:43Z", "author": {"login": "gacholio"}, "path": "runtime/codert_vm/cnathelp.cpp", "diffHunk": "@@ -3357,6 +3384,8 @@ initPureCFunctionTable(J9JavaVM *vm)\n \tjitConfig->old_slow_jitNewInstanceImplAccessCheck = (void*)old_slow_jitNewInstanceImplAccessCheck;\n \tjitConfig->old_slow_jitTranslateNewInstanceMethod = (void*)old_slow_jitTranslateNewInstanceMethod;\n \tjitConfig->old_slow_jitReportFinalFieldModified = (void*)old_slow_jitReportFinalFieldModified;\n+\tjitConfig->fast_jitAcmpHelper = (void*)fast_jitAcmpHelper;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4a1a5726b15fde0dc1dff42fa2a5e3faef161df"}, "originalPosition": 52}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNDczNDg0", "url": "https://github.com/eclipse-openj9/openj9/pull/8600#pullrequestreview-360473484", "createdAt": "2020-02-18T16:14:23Z", "commit": {"oid": "b4a1a5726b15fde0dc1dff42fa2a5e3faef161df"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNjoxNDoyM1rOFrIyuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNjoxNDoyM1rOFrIyuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDc3NzE0Nw==", "bodyText": "Not needed.", "url": "https://github.com/eclipse-openj9/openj9/pull/8600#discussion_r380777147", "createdAt": "2020-02-18T16:14:23Z", "author": {"login": "gacholio"}, "path": "runtime/jilgen/jilconsts.c", "diffHunk": "@@ -632,6 +632,8 @@ writeConstants(OMRPortLibrary *OMRPORTLIB, IDATA fd)\n \t\t\twriteConstant(OMRPORTLIB, fd, \"J9TR_JitConfig_old_slow_jitReportStaticFieldRead\", offsetof(J9JITConfig, old_slow_jitReportStaticFieldRead)) |\n \t\t\twriteConstant(OMRPORTLIB, fd, \"J9TR_JitConfig_old_slow_jitReportStaticFieldWrite\", offsetof(J9JITConfig, old_slow_jitReportStaticFieldWrite)) |\n \n+\t\t\twriteConstant(OMRPORTLIB, fd, \"J9TR_JitConfig_fast_jitAcmpHelper\", offsetof(J9JITConfig, fast_jitAcmpHelper)) |", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4a1a5726b15fde0dc1dff42fa2a5e3faef161df"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNDczNjIw", "url": "https://github.com/eclipse-openj9/openj9/pull/8600#pullrequestreview-360473620", "createdAt": "2020-02-18T16:14:33Z", "commit": {"oid": "b4a1a5726b15fde0dc1dff42fa2a5e3faef161df"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNjoxNDozM1rOFrIzKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNjoxNDozM1rOFrIzKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDc3NzI1Nw==", "bodyText": "Not needed.", "url": "https://github.com/eclipse-openj9/openj9/pull/8600#discussion_r380777257", "createdAt": "2020-02-18T16:14:33Z", "author": {"login": "gacholio"}, "path": "runtime/oti/j9nonbuilder.h", "diffHunk": "@@ -3504,6 +3504,8 @@ typedef struct J9JITConfig {\n \tvoid *old_slow_jitNewInstanceImplAccessCheck;\n \tvoid *old_slow_jitTranslateNewInstanceMethod;\n \tvoid *old_slow_jitReportFinalFieldModified;\n+\tvoid *fast_jitAcmpHelper;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4a1a5726b15fde0dc1dff42fa2a5e3faef161df"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNDc1MDk4", "url": "https://github.com/eclipse-openj9/openj9/pull/8600#pullrequestreview-360475098", "createdAt": "2020-02-18T16:16:18Z", "commit": {"oid": "b4a1a5726b15fde0dc1dff42fa2a5e3faef161df"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNjoxNjoxOFrOFrI31w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNjoxNjoxOFrOFrI31w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDc3ODQ1NQ==", "bodyText": "Maybe write this as an else followed by the if, which wraps the class fetch/call.", "url": "https://github.com/eclipse-openj9/openj9/pull/8600#discussion_r380778455", "createdAt": "2020-02-18T16:16:18Z", "author": {"login": "gacholio"}, "path": "runtime/vm/valueTypeHelpers.cpp", "diffHunk": "@@ -54,4 +54,29 @@ defaultValueWithUnflattenedFlattenables(J9VMThread *currentThread, J9Class *claz\n                 }\n         }\n }\n+\n+BOOLEAN\n+valueTypeCapableAcmp(J9VMThread *currentThread, j9object_t lhs, j9object_t rhs)\n+{\n+#if defined(J9VM_OPT_VALHALLA_VALUE_TYPES)\n+\t\tbool acmpResult = false;\n+\t\tif (rhs == lhs) {\n+\t\t\tacmpResult = true;\n+\t\t} else if ((NULL == rhs) || (NULL == lhs)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b4a1a5726b15fde0dc1dff42fa2a5e3faef161df"}, "originalPosition": 19}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b4a1a5726b15fde0dc1dff42fa2a5e3faef161df", "author": {"user": {"login": "tajila", "name": "Tobi"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/b4a1a5726b15fde0dc1dff42fa2a5e3faef161df", "committedDate": "2020-02-18T15:58:15Z", "message": "Add jit helper stub for acmp\n\nDepends on https://github.com/eclipse/omr/pull/4841\n\nSigned-off-by: Tobi Ajila <atobia@ca.ibm.com>"}, "afterCommit": {"oid": "08da81b0067e5d73fe287e63dc9ebc7e21913580", "author": {"user": {"login": "tajila", "name": "Tobi"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/08da81b0067e5d73fe287e63dc9ebc7e21913580", "committedDate": "2020-02-18T16:41:26Z", "message": "Add jit helper stub for acmp\n\nDepends on https://github.com/eclipse/omr/pull/4841\n\nSigned-off-by: Tobi Ajila <atobia@ca.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18d87fe60ea7b2b652505fa425c005c651c375e8", "author": {"user": {"login": "tajila", "name": "Tobi"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/18d87fe60ea7b2b652505fa425c005c651c375e8", "committedDate": "2020-02-18T16:52:36Z", "message": "Add jit helper stub for acmp\n\nDepends on https://github.com/eclipse/omr/pull/4841\n\nSigned-off-by: Tobi Ajila <atobia@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "08da81b0067e5d73fe287e63dc9ebc7e21913580", "author": {"user": {"login": "tajila", "name": "Tobi"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/08da81b0067e5d73fe287e63dc9ebc7e21913580", "committedDate": "2020-02-18T16:41:26Z", "message": "Add jit helper stub for acmp\n\nDepends on https://github.com/eclipse/omr/pull/4841\n\nSigned-off-by: Tobi Ajila <atobia@ca.ibm.com>"}, "afterCommit": {"oid": "18d87fe60ea7b2b652505fa425c005c651c375e8", "author": {"user": {"login": "tajila", "name": "Tobi"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/18d87fe60ea7b2b652505fa425c005c651c375e8", "committedDate": "2020-02-18T16:52:36Z", "message": "Add jit helper stub for acmp\n\nDepends on https://github.com/eclipse/omr/pull/4841\n\nSigned-off-by: Tobi Ajila <atobia@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNTkxODY4", "url": "https://github.com/eclipse-openj9/openj9/pull/8600#pullrequestreview-360591868", "createdAt": "2020-02-18T18:59:00Z", "commit": {"oid": "18d87fe60ea7b2b652505fa425c005c651c375e8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 552, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}