{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0NDk1ODEw", "number": 11086, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwNTo1NDoxN1rOE0qqAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxNDoxMjozOFrOE00whg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzNjYwMjg5OnYy", "diffSide": "RIGHT", "path": "runtime/makelib/targets.mk.linux.inc.ftl", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwNTo1NDoxN1rOHsg_2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwNjoxNjozNlrOHshU1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjQ0MDAyNQ==", "bodyText": "I don't think this should be inside the USE_PPC_GCC check, it is unrelated. Also, it should be restricted to plinux LE, unless the problem has been seen on BE (which uses a different compiler).", "url": "https://github.com/eclipse-openj9/openj9/pull/11086#discussion_r516440025", "createdAt": "2020-11-03T05:54:17Z", "author": {"login": "pshipton"}, "path": "runtime/makelib/targets.mk.linux.inc.ftl", "diffHunk": "@@ -539,6 +539,10 @@ MHInterpreterFull$(UMA_DOT_O) : MHInterpreterFull.cpp\n MHInterpreterCompressed$(UMA_DOT_O) : MHInterpreterCompressed.cpp\n \t$(PPC_GCC_CXX) $(PPC_GCC_CXXFLAGS) -c $<\n \n+# special handling bcverify.c for unexpected crash due to over-optimization in compilation\n+bcverify$(UMA_DOT_O) : bcverify.c\n+\t$(CC) $(CFLAGS) -O2 -c -o $@ $<", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f92d7175414de899543a86392ffba021e40d1c6b"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjQ0MTY5Mw==", "bodyText": "While the problem and fix is related to using gcc, that isn't what the USE_PPC_GCC flag is about. It's about using gcc to compile the above files even when the main compiler is different (xlc).", "url": "https://github.com/eclipse-openj9/openj9/pull/11086#discussion_r516441693", "createdAt": "2020-11-03T06:01:20Z", "author": {"login": "pshipton"}, "path": "runtime/makelib/targets.mk.linux.inc.ftl", "diffHunk": "@@ -539,6 +539,10 @@ MHInterpreterFull$(UMA_DOT_O) : MHInterpreterFull.cpp\n MHInterpreterCompressed$(UMA_DOT_O) : MHInterpreterCompressed.cpp\n \t$(PPC_GCC_CXX) $(PPC_GCC_CXXFLAGS) -c $<\n \n+# special handling bcverify.c for unexpected crash due to over-optimization in compilation\n+bcverify$(UMA_DOT_O) : bcverify.c\n+\t$(CC) $(CFLAGS) -O2 -c -o $@ $<", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjQ0MDAyNQ=="}, "originalCommit": {"oid": "f92d7175414de899543a86392ffba021e40d1c6b"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjQ0NTM5Ng==", "bodyText": "Agreed and updated the setting against the suggestion above (restricted to: ppcle64bit_linux & gcc)", "url": "https://github.com/eclipse-openj9/openj9/pull/11086#discussion_r516445396", "createdAt": "2020-11-03T06:16:36Z", "author": {"login": "ChengJin01"}, "path": "runtime/makelib/targets.mk.linux.inc.ftl", "diffHunk": "@@ -539,6 +539,10 @@ MHInterpreterFull$(UMA_DOT_O) : MHInterpreterFull.cpp\n MHInterpreterCompressed$(UMA_DOT_O) : MHInterpreterCompressed.cpp\n \t$(PPC_GCC_CXX) $(PPC_GCC_CXXFLAGS) -c $<\n \n+# special handling bcverify.c for unexpected crash due to over-optimization in compilation\n+bcverify$(UMA_DOT_O) : bcverify.c\n+\t$(CC) $(CFLAGS) -O2 -c -o $@ $<", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjQ0MDAyNQ=="}, "originalCommit": {"oid": "f92d7175414de899543a86392ffba021e40d1c6b"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzODI1Nzk4OnYy", "diffSide": "RIGHT", "path": "runtime/makelib/targets.mk.linux.inc.ftl", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxNDoxMjozOFrOHswjPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxNDoxNTo0NlrOHswr9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjY5NDg0NA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # special handling bcverify.c for unexpected crash due to over-optimization in compilation\n          \n          \n            \n            # special handling bcverify.c to deal with ppcle64-specific crash when compiling with gcc 7.5", "url": "https://github.com/eclipse-openj9/openj9/pull/11086#discussion_r516694844", "createdAt": "2020-11-03T14:12:38Z", "author": {"login": "DanHeidinga"}, "path": "runtime/makelib/targets.mk.linux.inc.ftl", "diffHunk": "@@ -517,6 +517,13 @@ endif\n </#if>\n \n <#if uma.spec.processor.ppc && !uma.spec.type.aix>\n+\n+<#if uma.spec.flags.env_littleEndian.enabled && uma.spec.flags.env_gcc.enabled>\n+# special handling bcverify.c for unexpected crash due to over-optimization in compilation", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9350289b165370759328f32ffa962d9c177aa082"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjY5NzA3Ng==", "bodyText": "Updated the comment against the suggestion above.", "url": "https://github.com/eclipse-openj9/openj9/pull/11086#discussion_r516697076", "createdAt": "2020-11-03T14:15:46Z", "author": {"login": "ChengJin01"}, "path": "runtime/makelib/targets.mk.linux.inc.ftl", "diffHunk": "@@ -517,6 +517,13 @@ endif\n </#if>\n \n <#if uma.spec.processor.ppc && !uma.spec.type.aix>\n+\n+<#if uma.spec.flags.env_littleEndian.enabled && uma.spec.flags.env_gcc.enabled>\n+# special handling bcverify.c for unexpected crash due to over-optimization in compilation", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjY5NDg0NA=="}, "originalCommit": {"oid": "9350289b165370759328f32ffa962d9c177aa082"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1069, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}