{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI4MDQwNDE5", "number": 9804, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQyMDo1NzoyNVrOEDn-WQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxNjowMToyNVrOEFHERg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyMjM2MTIxOnYy", "diffSide": "RIGHT", "path": "runtime/oti/VMHelpers.hpp", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQyMDo1NzoyNVrOGgwJaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQyMDo1NzoyNVrOGgwJaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjk5NjQ1Ng==", "bodyText": "Add a comment saying \"unflattened class that contain the J9ClassContainsUnflattenedFlattenables flag will return NULL\"", "url": "https://github.com/eclipse-openj9/openj9/pull/9804#discussion_r436996456", "createdAt": "2020-06-08T20:57:25Z", "author": {"login": "tajila"}, "path": "runtime/oti/VMHelpers.hpp", "diffHunk": "@@ -768,6 +768,36 @@ class VM_VMHelpers\n \t{\n \t\tj9object_t instance = NULL;\n \n+\t\tinstance = inlineAllocateIndexableObject(currentThread, objectAllocate, arrayClass, size, initializeSlots, memoryBarrier, sizeCheck);\n+\n+\t\tif (NULL == instance) {\n+\t\t\tinstance = currentThread->javaVM->memoryManagerFunctions->J9AllocateIndexableObject(currentThread, arrayClass, size, J9_GC_ALLOCATE_OBJECT_NON_INSTRUMENTABLE);\n+\t\t\tif (J9_UNEXPECTED(NULL == instance)) {\n+\t\t\t\tsetHeapOutOfMemoryError(currentThread);\n+\t\t\t}\n+\t\t}\n+\t\treturn instance;\n+\t}\n+\n+\t/**\n+\t *\n+\t * Perform a non-instrumentable allocation of an indexable flattened or unflattened class.\n+\t *", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e34a9f57fcff5bd6ef1cc48e7359d6a0bd224d73"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyOTc2NjkzOnYy", "diffSide": "RIGHT", "path": "runtime/oti/VMHelpers.hpp", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNDo0OTozMlrOGh4l2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxNDo0OTozMlrOGh4l2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODE4MzM4NQ==", "bodyText": "this comment should be moved to the inlineAllocateIndexableObject header.\nAlso, minor nitpick: Perhaps re-word as Unflattened array classes that contain", "url": "https://github.com/eclipse-openj9/openj9/pull/9804#discussion_r438183385", "createdAt": "2020-06-10T14:49:32Z", "author": {"login": "tajila"}, "path": "runtime/oti/VMHelpers.hpp", "diffHunk": "@@ -753,6 +753,8 @@ class VM_VMHelpers\n \t *\n \t * If allocation fails, a heap OutOfMemory error is set pending on the thread.\n \t *\n+\t * Unflattened class that contain the J9ClassContainsUnflattenedFlattenables flag will return NULL", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "363cb41b0da3a9b51f98d976293d72459864af91"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczNzg4MTUyOnYy", "diffSide": "RIGHT", "path": "runtime/oti/VMHelpers.hpp", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxNTo0MzoyMVrOGjIwAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxNTo0MzoyMVrOGjIwAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTQ5NjcwNA==", "bodyText": "avoid whitespace changes", "url": "https://github.com/eclipse-openj9/openj9/pull/9804#discussion_r439496704", "createdAt": "2020-06-12T15:43:21Z", "author": {"login": "tajila"}, "path": "runtime/oti/VMHelpers.hpp", "diffHunk": "@@ -752,7 +752,7 @@ class VM_VMHelpers\n \t * This function assumes that the stack and live values are in a valid state for GC.\n \t *\n \t * If allocation fails, a heap OutOfMemory error is set pending on the thread.\n-\t *\n+\t * ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d81612a59d6bfd4c1ebb9f2f48500662b7aa33b"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczNzk0MTE4OnYy", "diffSide": "LEFT", "path": "runtime/oti/VMHelpers.hpp", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxNjowMToyNVrOGjJV3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxNjowMToyNVrOGjJV3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUwNjM5Ng==", "bodyText": "undo this change completely", "url": "https://github.com/eclipse-openj9/openj9/pull/9804#discussion_r439506396", "createdAt": "2020-06-12T16:01:25Z", "author": {"login": "tajila"}, "path": "runtime/oti/VMHelpers.hpp", "diffHunk": "@@ -752,7 +752,6 @@ class VM_VMHelpers\n \t * This function assumes that the stack and live values are in a valid state for GC.\n \t *\n \t * If allocation fails, a heap OutOfMemory error is set pending on the thread.\n-\t *", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dd05e55956079e649778d8a4b16aad991686c480"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4970, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}