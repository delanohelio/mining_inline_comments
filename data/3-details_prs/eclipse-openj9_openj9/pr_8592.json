{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1ODQ2MzQw", "number": 8592, "title": "Update double map call to use new API", "bodyText": "Introduce new flags to control if heap should be created using double mapping. Note that memfd_create is only available starting at glibc version 2.27\nRegarding this change there are some scenarios that could happen when it comes to using memfd_create:\n\nSystem does NOT have glibc version 2.27 or later\nDouble map will NOT be supported.\nSystem does have glibc version 2.27 or later\nDouble map will be supported. Double map will also support systems that supports huge pages.\n\nDepends on: eclipse/omr#4839\nFixes: #9259\nSigned-off-by: Igor Braga higorb1@gmail.com", "createdAt": "2020-02-16T16:43:31Z", "url": "https://github.com/eclipse-openj9/openj9/pull/8592", "merged": true, "mergeCommit": {"oid": "ed768ea83165e14b9501d90d7dae84638737cb8a"}, "closed": true, "closedAt": "2020-04-17T00:43:46Z", "author": {"login": "bragaigor"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcE7lY4gBqjMwNDE2ODE2MTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcYWXTpAFqTM5NTA5MTIwNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8e4fb5fb7ca42558af204a7461906640b70a3e65", "author": {"user": {"login": "bragaigor", "name": "Igor Braga"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/8e4fb5fb7ca42558af204a7461906640b70a3e65", "committedDate": "2020-02-15T22:05:08Z", "message": "Add functionality to allow double map with huge pages\n\nIntroduce new flags to control if heap should be created\nusing memfd_create or shm_get in case of double mapping.\nNote that memfd_create is only available starting at\nglibc version 2.27\n\nSigned-off-by: Igor Braga <higorb1@gmail.com>"}, "afterCommit": {"oid": "d9f7c93dc4938f2c5d79a547fcec8566e15d305a", "author": {"user": {"login": "bragaigor", "name": "Igor Braga"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/d9f7c93dc4938f2c5d79a547fcec8566e15d305a", "committedDate": "2020-02-16T16:46:23Z", "message": "Add functionality to allow double map with huge pages\n\nIntroduce new flags to control if heap should be created\nusing memfd_create or shm_get in case of double mapping.\nNote that memfd_create is only available starting at\nglibc version 2.27\n\nSigned-off-by: Igor Braga <higorb1@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d9f7c93dc4938f2c5d79a547fcec8566e15d305a", "author": {"user": {"login": "bragaigor", "name": "Igor Braga"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/d9f7c93dc4938f2c5d79a547fcec8566e15d305a", "committedDate": "2020-02-16T16:46:23Z", "message": "Add functionality to allow double map with huge pages\n\nIntroduce new flags to control if heap should be created\nusing memfd_create or shm_get in case of double mapping.\nNote that memfd_create is only available starting at\nglibc version 2.27\n\nSigned-off-by: Igor Braga <higorb1@gmail.com>"}, "afterCommit": {"oid": "ff143414f436a9a36e52e6f526116ee23f85c169", "author": {"user": null}, "url": "https://github.com/eclipse-openj9/openj9/commit/ff143414f436a9a36e52e6f526116ee23f85c169", "committedDate": "2020-03-13T00:59:50Z", "message": "Update double map API to only be available in newer versions\n\nDouble map will only be available in systems that support\nglibc versions 2.27 or newwer due to new API that's being\nused\n\nSigned-off-by: Igor Braga <higorb1@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ff143414f436a9a36e52e6f526116ee23f85c169", "author": {"user": null}, "url": "https://github.com/eclipse-openj9/openj9/commit/ff143414f436a9a36e52e6f526116ee23f85c169", "committedDate": "2020-03-13T00:59:50Z", "message": "Update double map API to only be available in newer versions\n\nDouble map will only be available in systems that support\nglibc versions 2.27 or newwer due to new API that's being\nused\n\nSigned-off-by: Igor Braga <higorb1@gmail.com>"}, "afterCommit": {"oid": "fd802dd9000b1c82120edb60592ddd754986b902", "author": {"user": null}, "url": "https://github.com/eclipse-openj9/openj9/commit/fd802dd9000b1c82120edb60592ddd754986b902", "committedDate": "2020-03-13T01:08:48Z", "message": "Update double map API to only be available in newer versions\n\nDouble map will only be available in systems that support\nglibc versions 2.27 or newwer due to new API that's being\nused\n\nSigned-off-by: Igor Braga <higorb1@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5df2459df0e0f70ce3d3cb535d8857f3bceaba8e", "author": {"user": {"login": "bragaigor", "name": "Igor Braga"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/5df2459df0e0f70ce3d3cb535d8857f3bceaba8e", "committedDate": "2020-03-20T17:57:16Z", "message": "Add double map API constraint\n\nOnly enable double map if and only if the API\nrequired by it is available in the running\nsystem.\n\nSigned-off-by: Igor Braga <higorb1@gmail.com>"}, "afterCommit": {"oid": "e103e223ca94f5f62c41ed37ca41ac7900374f73", "author": {"user": {"login": "bragaigor", "name": "Igor Braga"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e103e223ca94f5f62c41ed37ca41ac7900374f73", "committedDate": "2020-03-20T23:15:10Z", "message": "Update double map API to only be available in newer versions\n\nDouble map will only be available in systems that support\nglibc versions 2.27 or newwer due to new API that's being\nused\n\nAdd double map trace points\n\nSigned-off-by: Igor Braga <higorb1@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e103e223ca94f5f62c41ed37ca41ac7900374f73", "author": {"user": {"login": "bragaigor", "name": "Igor Braga"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e103e223ca94f5f62c41ed37ca41ac7900374f73", "committedDate": "2020-03-20T23:15:10Z", "message": "Update double map API to only be available in newer versions\n\nDouble map will only be available in systems that support\nglibc versions 2.27 or newwer due to new API that's being\nused\n\nAdd double map trace points\n\nSigned-off-by: Igor Braga <higorb1@gmail.com>"}, "afterCommit": {"oid": "94a542e17e65e14e1129ded46b989f8f20303f8c", "author": {"user": {"login": "bragaigor", "name": "Igor Braga"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/94a542e17e65e14e1129ded46b989f8f20303f8c", "committedDate": "2020-03-22T20:03:46Z", "message": "Update double map API to only be available in newer versions\n\nDouble map will only be available in systems that support\nglibc versions 2.27 or newwer due to new API that's being\nused\n\nAdd double map trace points\n\nSigned-off-by: Igor Braga <higorb1@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxMzQ0MDcw", "url": "https://github.com/eclipse-openj9/openj9/pull/8592#pullrequestreview-381344070", "createdAt": "2020-03-25T16:52:59Z", "commit": {"oid": "aa8c62397aa33259877fdba6585b436372a251ea"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNjo1Mjo1OVrOF7kuZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNjo1Mjo1OVrOF7kuZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODAxMjAwNg==", "bodyText": "Naming of options in this file isn't completely consistent. Sometimes there is 'use', sometimes there is 'enable', sometimes there is nothing (for example for TransparentHugePage). I personally prefer 'nothing' since '+' and '-' serve the purpose of words 'enable' and 'disable'.", "url": "https://github.com/eclipse-openj9/openj9/pull/8592#discussion_r398012006", "createdAt": "2020-03-25T16:52:59Z", "author": {"login": "amicic"}, "path": "runtime/oti/jvminit.h", "diffHunk": "@@ -452,6 +452,9 @@ enum INIT_STAGE {\n #define VMOPT_XXUSECONTAINERSUPPORT \"-XX:+UseContainerSupport\"\n #define VMOPT_XXNOUSECONTAINERSUPPORT \"-XX:-UseContainerSupport\"\n \n+#define VMOPT_PORT_VMEM_HUGE_PAGES_MMAP_ENABLED \"-XX:+enableHugePagesWithMmap\"\n+#define VMOPT_PORT_VMEM_HUGE_PAGES_MMAP_DISABLED \"-XX:-enableHugePagesWithMmap\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa8c62397aa33259877fdba6585b436372a251ea"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7f531db9caa8a8eb7acb3ee661f7ab11bf30033c", "author": {"user": {"login": "bragaigor", "name": "Igor Braga"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/7f531db9caa8a8eb7acb3ee661f7ab11bf30033c", "committedDate": "2020-03-25T19:49:44Z", "message": "Update command line name for huge pages with mmap\n\nSigned-off-by: Igor Braga <higorb1@gmail.com>"}, "afterCommit": {"oid": "b0f9b0a02401cf7a8e5a0977b078ab201b6b4379", "author": {"user": {"login": "bragaigor", "name": "Igor Braga"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/b0f9b0a02401cf7a8e5a0977b078ab201b6b4379", "committedDate": "2020-03-26T02:55:51Z", "message": "Update command line name for huge pages with mmap\n\nSigned-off-by: Igor Braga <higorb1@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b0f9b0a02401cf7a8e5a0977b078ab201b6b4379", "author": {"user": {"login": "bragaigor", "name": "Igor Braga"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/b0f9b0a02401cf7a8e5a0977b078ab201b6b4379", "committedDate": "2020-03-26T02:55:51Z", "message": "Update command line name for huge pages with mmap\n\nSigned-off-by: Igor Braga <higorb1@gmail.com>"}, "afterCommit": {"oid": "bec9976814c27eea614434363602feb6cec421b9", "author": {"user": {"login": "bragaigor", "name": "Igor Braga"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/bec9976814c27eea614434363602feb6cec421b9", "committedDate": "2020-03-31T01:47:52Z", "message": "Update command line name for huge pages with mmap\n\nSigned-off-by: Igor Braga <higorb1@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bec9976814c27eea614434363602feb6cec421b9", "author": {"user": {"login": "bragaigor", "name": "Igor Braga"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/bec9976814c27eea614434363602feb6cec421b9", "committedDate": "2020-03-31T01:47:52Z", "message": "Update command line name for huge pages with mmap\n\nSigned-off-by: Igor Braga <higorb1@gmail.com>"}, "afterCommit": {"oid": "4fefa12cad2d0beed17925ba151f23e891c1e741", "author": {"user": {"login": "bragaigor", "name": "Igor Braga"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/4fefa12cad2d0beed17925ba151f23e891c1e741", "committedDate": "2020-04-14T18:36:09Z", "message": "Update double map API to only be available in newer versions\n\nDouble map will only be available in systems that support\nglibc versions 2.27 or newwer due to new API that's being\nused\n\nAdd double map trace points\n\nSigned-off-by: Igor Braga <higorb1@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ce0eaa4c789d07c55469dacd8f25b301056c36a", "author": {"user": {"login": "bragaigor", "name": "Igor Braga"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/0ce0eaa4c789d07c55469dacd8f25b301056c36a", "committedDate": "2020-04-16T13:31:00Z", "message": "Update double map API to only be available in newer versions\n\nDouble map will only be available in systems that support\nglibc versions 2.27 or newwer due to new API that's being\nused\n\nAdd double map trace points\n\nSigned-off-by: Igor Braga <higorb1@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4fefa12cad2d0beed17925ba151f23e891c1e741", "author": {"user": {"login": "bragaigor", "name": "Igor Braga"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/4fefa12cad2d0beed17925ba151f23e891c1e741", "committedDate": "2020-04-14T18:36:09Z", "message": "Update double map API to only be available in newer versions\n\nDouble map will only be available in systems that support\nglibc versions 2.27 or newwer due to new API that's being\nused\n\nAdd double map trace points\n\nSigned-off-by: Igor Braga <higorb1@gmail.com>"}, "afterCommit": {"oid": "0ce0eaa4c789d07c55469dacd8f25b301056c36a", "author": {"user": {"login": "bragaigor", "name": "Igor Braga"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/0ce0eaa4c789d07c55469dacd8f25b301056c36a", "committedDate": "2020-04-16T13:31:00Z", "message": "Update double map API to only be available in newer versions\n\nDouble map will only be available in systems that support\nglibc versions 2.27 or newwer due to new API that's being\nused\n\nAdd double map trace points\n\nSigned-off-by: Igor Braga <higorb1@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0NjQ0Nzk3", "url": "https://github.com/eclipse-openj9/openj9/pull/8592#pullrequestreview-394644797", "createdAt": "2020-04-16T13:42:44Z", "commit": {"oid": "0ce0eaa4c789d07c55469dacd8f25b301056c36a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0NjYzOTg3", "url": "https://github.com/eclipse-openj9/openj9/pull/8592#pullrequestreview-394663987", "createdAt": "2020-04-16T14:02:24Z", "commit": {"oid": "0ce0eaa4c789d07c55469dacd8f25b301056c36a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1MDkxMjA1", "url": "https://github.com/eclipse-openj9/openj9/pull/8592#pullrequestreview-395091205", "createdAt": "2020-04-17T00:43:38Z", "commit": {"oid": "0ce0eaa4c789d07c55469dacd8f25b301056c36a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 545, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}