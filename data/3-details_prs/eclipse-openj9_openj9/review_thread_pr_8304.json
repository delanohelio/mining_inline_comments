{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYyOTc2OTgx", "number": 8304, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwMzoxNjoxOVrODYYFcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwMzoxNjoxOVrODYYFcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2ODg3MDI3OnYy", "diffSide": "RIGHT", "path": "runtime/compiler/aarch64/codegen/ARM64PrivateLinkage.cpp", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwMzoxNjoxOVrOFeM6Jg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwNDo1NToyOFrOFeN-DA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzIxMzA5NA==", "bodyText": "Do you need to execute this loop with parmIterator when parmsHaveBeenStored is true?", "url": "https://github.com/eclipse-openj9/openj9/pull/8304#discussion_r367213094", "createdAt": "2020-01-16T03:16:19Z", "author": {"login": "knn-k"}, "path": "runtime/compiler/aarch64/codegen/ARM64PrivateLinkage.cpp", "diffHunk": "@@ -1353,6 +1358,55 @@ J9::ARM64::PrivateLinkage::copyParametersToHomeLocation(TR::Instruction *cursor)\n    return cursor;\n    }\n \n+/**\n+ * A more optimal implementation of this function will be required when GRA is enabled.\n+ * See OpenJ9 issue #6657.  Also consider merging with loadStackParametersToLinkageRegisters.\n+ */\n+TR::Instruction *\n+J9::ARM64::PrivateLinkage::copyParametersToHomeLocation(TR::Instruction *cursor, bool parmsHaveBeenStored)\n+   {\n+   TR::Machine *machine = cg()->machine();\n+   TR::ARM64LinkageProperties& properties = getProperties();\n+   TR::RealRegister *javaSP = machine->getRealRegister(properties.getStackPointerRegister());       // x20\n+\n+   TR::ResolvedMethodSymbol *bodySymbol = comp()->getJittedMethodSymbol();\n+   ListIterator<TR::ParameterSymbol> parmIterator(&(bodySymbol->getParameterList()));\n+   TR::ParameterSymbol *parmCursor;\n+\n+   // Store to stack all parameters passed in linkage registers\n+   //\n+   for (parmCursor = parmIterator.getFirst();\n+        parmCursor != NULL;\n+        parmCursor = parmIterator.getNext())\n+      {\n+      if (parmCursor->isParmPassedInRegister())\n+         {\n+         if (!parmsHaveBeenStored)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af9d74506570cc6572e780254661e621e8a71a1a"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzIyNjUwMg==", "bodyText": "I think that we will add more logic inside this loop when implementing GRA. Please see x version: https://github.com/eclipse/openj9/blob/99a64d22d23429b6cced01f7757b86cdea0baa9c/runtime/compiler/x/codegen/X86PrivateLinkage.cpp#L252-L337", "url": "https://github.com/eclipse-openj9/openj9/pull/8304#discussion_r367226502", "createdAt": "2020-01-16T04:32:53Z", "author": {"login": "Akira1Saitoh"}, "path": "runtime/compiler/aarch64/codegen/ARM64PrivateLinkage.cpp", "diffHunk": "@@ -1353,6 +1358,55 @@ J9::ARM64::PrivateLinkage::copyParametersToHomeLocation(TR::Instruction *cursor)\n    return cursor;\n    }\n \n+/**\n+ * A more optimal implementation of this function will be required when GRA is enabled.\n+ * See OpenJ9 issue #6657.  Also consider merging with loadStackParametersToLinkageRegisters.\n+ */\n+TR::Instruction *\n+J9::ARM64::PrivateLinkage::copyParametersToHomeLocation(TR::Instruction *cursor, bool parmsHaveBeenStored)\n+   {\n+   TR::Machine *machine = cg()->machine();\n+   TR::ARM64LinkageProperties& properties = getProperties();\n+   TR::RealRegister *javaSP = machine->getRealRegister(properties.getStackPointerRegister());       // x20\n+\n+   TR::ResolvedMethodSymbol *bodySymbol = comp()->getJittedMethodSymbol();\n+   ListIterator<TR::ParameterSymbol> parmIterator(&(bodySymbol->getParameterList()));\n+   TR::ParameterSymbol *parmCursor;\n+\n+   // Store to stack all parameters passed in linkage registers\n+   //\n+   for (parmCursor = parmIterator.getFirst();\n+        parmCursor != NULL;\n+        parmCursor = parmIterator.getNext())\n+      {\n+      if (parmCursor->isParmPassedInRegister())\n+         {\n+         if (!parmsHaveBeenStored)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzIxMzA5NA=="}, "originalCommit": {"oid": "af9d74506570cc6572e780254661e621e8a71a1a"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzIzMDQ3Ng==", "bodyText": "OK, I understand.", "url": "https://github.com/eclipse-openj9/openj9/pull/8304#discussion_r367230476", "createdAt": "2020-01-16T04:55:28Z", "author": {"login": "knn-k"}, "path": "runtime/compiler/aarch64/codegen/ARM64PrivateLinkage.cpp", "diffHunk": "@@ -1353,6 +1358,55 @@ J9::ARM64::PrivateLinkage::copyParametersToHomeLocation(TR::Instruction *cursor)\n    return cursor;\n    }\n \n+/**\n+ * A more optimal implementation of this function will be required when GRA is enabled.\n+ * See OpenJ9 issue #6657.  Also consider merging with loadStackParametersToLinkageRegisters.\n+ */\n+TR::Instruction *\n+J9::ARM64::PrivateLinkage::copyParametersToHomeLocation(TR::Instruction *cursor, bool parmsHaveBeenStored)\n+   {\n+   TR::Machine *machine = cg()->machine();\n+   TR::ARM64LinkageProperties& properties = getProperties();\n+   TR::RealRegister *javaSP = machine->getRealRegister(properties.getStackPointerRegister());       // x20\n+\n+   TR::ResolvedMethodSymbol *bodySymbol = comp()->getJittedMethodSymbol();\n+   ListIterator<TR::ParameterSymbol> parmIterator(&(bodySymbol->getParameterList()));\n+   TR::ParameterSymbol *parmCursor;\n+\n+   // Store to stack all parameters passed in linkage registers\n+   //\n+   for (parmCursor = parmIterator.getFirst();\n+        parmCursor != NULL;\n+        parmCursor = parmIterator.getNext())\n+      {\n+      if (parmCursor->isParmPassedInRegister())\n+         {\n+         if (!parmsHaveBeenStored)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzIxMzA5NA=="}, "originalCommit": {"oid": "af9d74506570cc6572e780254661e621e8a71a1a"}, "originalPosition": 73}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 753, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}