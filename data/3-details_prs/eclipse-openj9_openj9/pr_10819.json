{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5NDI1OTYy", "number": 10819, "title": "Add hidden classes to shared classes cache", "bodyText": "Enable class sharing for hidden classes.\nDifferent hidden classes in different runs may have the same\nclass name, so use 0xromaddress instead of class name as hash key\nin classLoader->classHashTable for hidden classes.\nFor lambda classes, move class file size comparison to\nROMClassBuilder::compareROMClassForEquality().\nRe-enable SCC lambda class tests in Java 15 and up.\n\nCloses #10534\nDoc issue eclipse-openj9/openj9-docs#656\nSigned-off-by: Hang Shao hangshao@ca.ibm.com", "createdAt": "2020-10-07T18:06:07Z", "url": "https://github.com/eclipse-openj9/openj9/pull/10819", "merged": true, "mergeCommit": {"oid": "f9d47f5b14a563192612bc2fbe7066221114de4c"}, "closed": true, "closedAt": "2020-10-13T14:29:55Z", "author": {"login": "hangshao0"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQRAGRgBqjM4NTE4Njc0NzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSJd79gFqTUwNzQ5ODk5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a95b097b8c73b938c7fd91088c97b38cfbc30c70", "author": {"user": {"login": "hangshao0", "name": "Hang Shao"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/a95b097b8c73b938c7fd91088c97b38cfbc30c70", "committedDate": "2020-10-07T18:04:39Z", "message": "Add hidden classes to shared classes cache.\n\n1. Enable class sharing for hidden classes.\n2. Different hidden classes in different runs may have the same \nclass name, so use 0xromaddress instead of class name as hash key \nin classLoader->classHashTable for hidden classes.\n3. For lambda classes, move class file size comparison to\nROMClassBuilder::compareROMClassForEquality().\n4. Re-enable SCC lambda class tests in Java 15 and up.\n\nCloses #10534\n\nSigned-off-by: Hang Shao <hangshao@ca.ibm.com>"}, "afterCommit": {"oid": "8ccae39849c5b6515ea01f4341263f3b16de78c6", "author": {"user": {"login": "hangshao0", "name": "Hang Shao"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/8ccae39849c5b6515ea01f4341263f3b16de78c6", "committedDate": "2020-10-07T18:08:16Z", "message": "Add hidden classes to shared classes cache.\n\n1. Enable class sharing for hidden classes.\n2. Different hidden classes in different runs may have the same \nclass name, so use 0xromaddress instead of class name as hash key \nin classLoader->classHashTable for hidden classes.\n3. For lambda classes, move class file size comparison to\nROMClassBuilder::compareROMClassForEquality().\n4. Re-enable SCC lambda class tests in Java 15 and up.\n\nCloses #10534\n\nSigned-off-by: Hang Shao <hangshao@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0MjUyOTIx", "url": "https://github.com/eclipse-openj9/openj9/pull/10819#pullrequestreview-504252921", "createdAt": "2020-10-07T20:45:09Z", "commit": {"oid": "8ccae39849c5b6515ea01f4341263f3b16de78c6"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMDo0NToxMFrOHeE23A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMDo0NjozNVrOHeE6AQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTI5ODkwOA==", "bodyText": "Rather than doing the next line, this could copy ROM_ADDRESS_LENGTH + 1, since buf will be null terminated.", "url": "https://github.com/eclipse-openj9/openj9/pull/10819#discussion_r501298908", "createdAt": "2020-10-07T20:45:10Z", "author": {"login": "pshipton"}, "path": "runtime/bcutil/ROMClassBuilder.cpp", "diffHunk": "@@ -338,8 +339,13 @@ ROMClassBuilder::handleAnonClassName(J9CfrClassFile *classfile, bool *isLambda,\n \t}\n \tmemcpy (constantPool[newUtfCPEntry].bytes + newHostPackageLength, originalStringBytes, originalStringLength);\n \t*(U_8*)((UDATA) constantPool[newUtfCPEntry].bytes + newHostPackageLength + originalStringLength) = ANON_CLASSNAME_CHARACTER_SEPARATOR;\n-\tmemset(constantPool[newUtfCPEntry].bytes + newHostPackageLength + originalStringLength + 1, '0', ROM_ADDRESS_LENGTH);\n-\t*(U_8*)((UDATA) constantPool[newUtfCPEntry].bytes + newHostPackageLength + originalStringLength + 1 + ROM_ADDRESS_LENGTH) = '\\0';\n+\t/* \n+\t * 0x<romAddress> will be appended to anon/hidden class name.\n+\t * Initialize the 0x<romAddress> part to 0x00000000 or 0x0000000000000000 (depending on the platforms).\n+\t */\n+\tj9str_printf(PORTLIB, buf, ROM_ADDRESS_LENGTH + 1, ROM_ADDRESS_FORMAT, 0);\n+\tmemcpy(constantPool[newUtfCPEntry].bytes + newHostPackageLength + originalStringLength + 1, buf, ROM_ADDRESS_LENGTH);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8ccae39849c5b6515ea01f4341263f3b16de78c6"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTI5OTcxMw==", "bodyText": "Pls remove the trailing whitespace.", "url": "https://github.com/eclipse-openj9/openj9/pull/10819#discussion_r501299713", "createdAt": "2020-10-07T20:46:35Z", "author": {"login": "pshipton"}, "path": "runtime/bcutil/ROMClassBuilder.cpp", "diffHunk": "@@ -499,10 +509,10 @@ ROMClassBuilder::prepareAndLaydown( BufferManager *bufferManager, ClassFileParse\n \t\t * previously, or for ROMClass comparison on behalf of dyntest.\n \t\t */\n \t\tJ9ROMClass *romClass = context->romClass();\n-\t\tbool romClassIsShared = (j9shr_Query_IsAddressInCache(_javaVM, romClass, romClass->romSize) ? true : false);\n+\t\tbool romClassIsShared = (j9shr_Query_IsAddressInCache(_javaVM, romClass, romClass->romSize) ? true : false);\t\t", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8ccae39849c5b6515ea01f4341263f3b16de78c6"}, "originalPosition": 47}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0MjcwNDcy", "url": "https://github.com/eclipse-openj9/openj9/pull/10819#pullrequestreview-504270472", "createdAt": "2020-10-07T21:11:21Z", "commit": {"oid": "8ccae39849c5b6515ea01f4341263f3b16de78c6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMToxMToyMVrOHeFr0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QyMToxMToyMVrOHeFr0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMxMjQ2NQ==", "bodyText": "J9UTF8_DATA_EQUALS returns a boolean, pls use ! instead of 0 ==", "url": "https://github.com/eclipse-openj9/openj9/pull/10819#discussion_r501312465", "createdAt": "2020-10-07T21:11:21Z", "author": {"login": "pshipton"}, "path": "runtime/bcutil/ROMClassCreationContext.hpp", "diffHunk": "@@ -384,11 +399,38 @@ class ROMClassCreationContext\n \t{\n \t\tif (!isRedefining() && !isRetransforming()) {\n \t\t\tif (NULL != _className) {\n+\t\t\t\tU_16 classNameLenToCompare0 = _classNameLength;\n+\t\t\t\tU_16 classNameLenToCompare1 = classNameLength;\n+\t\t\t\tBOOLEAN misMatch = FALSE;\n \t\t\t\tif (isClassHidden()) {\n-\t\t\t\t\t/* for hidden class className has ROM address appended at the end, _className does not have that */\n-\t\t\t\t\tclassNameLength = (U_16)_classNameLength;\n+\t\t\t\t\tif (isROMClassShareable()) {\n+\t\t\t\t\t\tU_8* lambdaClass0 = (U_8*)getLastDollarSignOfLambdaClassName((const char*)_className, _classNameLength);\n+\t\t\t\t\t\tU_8* lambdaClass1 = (U_8*)getLastDollarSignOfLambdaClassName((const char*)className, classNameLength);\n+\t\t\t\t\t\tif ((NULL != lambdaClass0) \n+\t\t\t\t\t\t\t&& (NULL != lambdaClass1)\n+\t\t\t\t\t\t) {\n+\t\t\t\t\t\t\t/**\n+\t\t\t\t\t\t\t * Lambda class has class name: HostClassName$$Lambda$<IndexNumber>/0x0000000000000000. \n+\t\t\t\t\t\t\t * Do not need to compare the IndexNumber as it can be different from run to run.\n+\t\t\t\t\t\t\t */\n+\t\t\t\t\t\t\tclassNameLenToCompare0 = (U_16)(lambdaClass0 - _className + 1);\n+\t\t\t\t\t\t\tclassNameLenToCompare1 = (U_16)(lambdaClass1 - className + 1);\n+\t\t\t\t\t\t} else if ((NULL == lambdaClass0)\n+\t\t\t\t\t\t\t\t&& (NULL == lambdaClass1)\n+\t\t\t\t\t\t) {\n+\t\t\t\t\t\t\t/* for hidden class className has ROM address appended at the end, _className does not have that */\n+\t\t\t\t\t\t\tclassNameLenToCompare1 = (U_16)_classNameLength;\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tmisMatch = TRUE;\n+\t\t\t\t\t\t}\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\t/* for hidden class className has ROM address appended at the end, _className does not have that */\n+\t\t\t\t\t\tclassNameLenToCompare1 = (U_16)_classNameLength;\n+\t\t\t\t\t}\n \t\t\t\t}\n-\t\t\t\tif ((0 == J9UTF8_DATA_EQUALS(_className, _classNameLength, className, classNameLength))) {\n+\t\t\t\tif (misMatch || \n+\t\t\t\t\t(0 == J9UTF8_DATA_EQUALS(_className, classNameLenToCompare0, className, classNameLenToCompare1))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8ccae39849c5b6515ea01f4341263f3b16de78c6"}, "originalPosition": 78}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8ccae39849c5b6515ea01f4341263f3b16de78c6", "author": {"user": {"login": "hangshao0", "name": "Hang Shao"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/8ccae39849c5b6515ea01f4341263f3b16de78c6", "committedDate": "2020-10-07T18:08:16Z", "message": "Add hidden classes to shared classes cache.\n\n1. Enable class sharing for hidden classes.\n2. Different hidden classes in different runs may have the same \nclass name, so use 0xromaddress instead of class name as hash key \nin classLoader->classHashTable for hidden classes.\n3. For lambda classes, move class file size comparison to\nROMClassBuilder::compareROMClassForEquality().\n4. Re-enable SCC lambda class tests in Java 15 and up.\n\nCloses #10534\n\nSigned-off-by: Hang Shao <hangshao@ca.ibm.com>"}, "afterCommit": {"oid": "3cedbf5388b9899bf809bfec3897b48d8b2449a3", "author": {"user": {"login": "hangshao0", "name": "Hang Shao"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/3cedbf5388b9899bf809bfec3897b48d8b2449a3", "committedDate": "2020-10-08T15:28:39Z", "message": "Add hidden classes to shared classes cache.\n\n1. Enable class sharing for hidden classes.\n2. Different hidden classes in different runs may have the same \nclass name, so use 0xromaddress instead of class name as hash key \nin classLoader->classHashTable for hidden classes.\n3. For lambda classes, move class file size comparison to\nROMClassBuilder::compareROMClassForEquality().\n4. Re-enable SCC lambda class tests in Java 15 and up.\n\nCloses #10534\n\nSigned-off-by: Hang Shao <hangshao@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1MDM3MjM5", "url": "https://github.com/eclipse-openj9/openj9/pull/10819#pullrequestreview-505037239", "createdAt": "2020-10-08T18:04:26Z", "commit": {"oid": "3cedbf5388b9899bf809bfec3897b48d8b2449a3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxODowNDoyN1rOHeqXTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxODowNDoyN1rOHeqXTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkxMzQyMA==", "bodyText": "Why did this change to U32 from U64? Also, the use of abs seems questionable (I realize it was there before).", "url": "https://github.com/eclipse-openj9/openj9/pull/10819#discussion_r501913420", "createdAt": "2020-10-08T18:04:27Z", "author": {"login": "gacholio"}, "path": "runtime/bcutil/ROMClassBuilder.cpp", "diffHunk": "@@ -1306,22 +1317,24 @@ bool\n ROMClassBuilder::compareROMClassForEquality(U_8 *romClass,bool romClassIsShared,\n \t\tROMClassWriter *romClassWriter, SRPOffsetTable *srpOffsetTable, SRPKeyProducer *srpKeyProducer,\n \t\tClassFileOracle *classFileOracle, U_32 modifiers, U_32 extraModifiers, U_32 optionalFlags,\n-\t\tROMClassCreationContext * context, U_32 romSize, bool isLambda)\n+\t\tROMClassCreationContext * context, U_32 sizeToCompareForLambda, bool isLambda)\n {\n \tbool ret = false;\n \n \tif (isLambda) {\n-\t\tif (sizeof(U_64) < abs((int)(romSize - ((J9ROMClass *)romClass)->romSize))) {\n-\t\t\t/* If the class is a lambda class, we compare the romSizes first to save time. Lambda class names are in the format of\n-\t\t\t * HostClassName$$Lambda$<IndexNumber>/0x0000000000000000. When we reach this check, the host class names will be the\n-\t\t\t * same for both the classes because of the hash key check earlier so the only difference in the size will be the\n-\t\t\t * difference between the number of digits of the index number. The same lambda class might have a different index\n-\t\t\t * number from run to run and when the number of digits of the index number increases by 1, romSize increases by 2.\n-\t\t\t * We check if the difference between romSizes is bigger than sizeof(U_64) because this will allow at least 4 but up\n-\t\t\t * to 7 (because romSize has padding and is always multiples of 8) digits difference. (eg. HostClassName$$Lambda$[1-9]\n-\t\t\t * can get matched at least up to HostClassName$$Lambda$99999, HostClassName$$Lambda$[10-99] can get matched at least\n-\t\t\t * up to HostClassName$$Lambda$999999) This check is different than the classFileSize check because when the number of\n-\t\t\t * digits of the index number increases by 1, romSize increases by 2 but classFileSize increases by 1.\n+\t\tif (sizeof(U_32) < abs((int)(sizeToCompareForLambda - ((J9ROMClass *)romClass)->classFileSize))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3cedbf5388b9899bf809bfec3897b48d8b2449a3"}, "originalPosition": 91}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1MDM5MDQ4", "url": "https://github.com/eclipse-openj9/openj9/pull/10819#pullrequestreview-505039048", "createdAt": "2020-10-08T18:06:43Z", "commit": {"oid": "3cedbf5388b9899bf809bfec3897b48d8b2449a3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxODowNjo0M1rOHeqc9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQxODowNjo0M1rOHeqc9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkxNDg3MA==", "bodyText": "I see no good reason to use a multi-line if here.", "url": "https://github.com/eclipse-openj9/openj9/pull/10819#discussion_r501914870", "createdAt": "2020-10-08T18:06:43Z", "author": {"login": "gacholio"}, "path": "runtime/bcutil/ROMClassCreationContext.hpp", "diffHunk": "@@ -384,11 +399,38 @@ class ROMClassCreationContext\n \t{\n \t\tif (!isRedefining() && !isRetransforming()) {\n \t\t\tif (NULL != _className) {\n+\t\t\t\tU_16 classNameLenToCompare0 = (U_16)_classNameLength;\n+\t\t\t\tU_16 classNameLenToCompare1 = classNameLength;\n+\t\t\t\tBOOLEAN misMatch = FALSE;\n \t\t\t\tif (isClassHidden()) {\n-\t\t\t\t\t/* for hidden class className has ROM address appended at the end, _className does not have that */\n-\t\t\t\t\tclassNameLength = (U_16)_classNameLength;\n+\t\t\t\t\tif (isROMClassShareable()) {\n+\t\t\t\t\t\tU_8* lambdaClass0 = (U_8*)getLastDollarSignOfLambdaClassName((const char*)_className, _classNameLength);\n+\t\t\t\t\t\tU_8* lambdaClass1 = (U_8*)getLastDollarSignOfLambdaClassName((const char*)className, classNameLength);\n+\t\t\t\t\t\tif ((NULL != lambdaClass0) \n+\t\t\t\t\t\t\t&& (NULL != lambdaClass1)\n+\t\t\t\t\t\t) {\n+\t\t\t\t\t\t\t/**\n+\t\t\t\t\t\t\t * Lambda class has class name: HostClassName$$Lambda$<IndexNumber>/0x0000000000000000. \n+\t\t\t\t\t\t\t * Do not need to compare the IndexNumber as it can be different from run to run.\n+\t\t\t\t\t\t\t */\n+\t\t\t\t\t\t\tclassNameLenToCompare0 = (U_16)(lambdaClass0 - _className + 1);\n+\t\t\t\t\t\t\tclassNameLenToCompare1 = (U_16)(lambdaClass1 - className + 1);\n+\t\t\t\t\t\t} else if ((NULL == lambdaClass0)\n+\t\t\t\t\t\t\t\t&& (NULL == lambdaClass1)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3cedbf5388b9899bf809bfec3897b48d8b2449a3"}, "originalPosition": 64}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3cedbf5388b9899bf809bfec3897b48d8b2449a3", "author": {"user": {"login": "hangshao0", "name": "Hang Shao"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/3cedbf5388b9899bf809bfec3897b48d8b2449a3", "committedDate": "2020-10-08T15:28:39Z", "message": "Add hidden classes to shared classes cache.\n\n1. Enable class sharing for hidden classes.\n2. Different hidden classes in different runs may have the same \nclass name, so use 0xromaddress instead of class name as hash key \nin classLoader->classHashTable for hidden classes.\n3. For lambda classes, move class file size comparison to\nROMClassBuilder::compareROMClassForEquality().\n4. Re-enable SCC lambda class tests in Java 15 and up.\n\nCloses #10534\n\nSigned-off-by: Hang Shao <hangshao@ca.ibm.com>"}, "afterCommit": {"oid": "c2bf2cb7ea91febbc776b9c9c3f204e9b99b5f63", "author": {"user": {"login": "hangshao0", "name": "Hang Shao"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c2bf2cb7ea91febbc776b9c9c3f204e9b99b5f63", "committedDate": "2020-10-08T18:51:28Z", "message": "Add hidden classes to shared classes cache.\n\n1. Enable class sharing for hidden classes.\n2. Different hidden classes in different runs may have the same \nclass name, so use 0xromaddress instead of class name as hash key \nin classLoader->classHashTable for hidden classes.\n3. For lambda classes, move class file size comparison to\nROMClassBuilder::compareROMClassForEquality().\n4. Re-enable SCC lambda class tests in Java 15 and up.\n\nCloses #10534\n\nSigned-off-by: Hang Shao <hangshao@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c2bf2cb7ea91febbc776b9c9c3f204e9b99b5f63", "author": {"user": {"login": "hangshao0", "name": "Hang Shao"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c2bf2cb7ea91febbc776b9c9c3f204e9b99b5f63", "committedDate": "2020-10-08T18:51:28Z", "message": "Add hidden classes to shared classes cache.\n\n1. Enable class sharing for hidden classes.\n2. Different hidden classes in different runs may have the same \nclass name, so use 0xromaddress instead of class name as hash key \nin classLoader->classHashTable for hidden classes.\n3. For lambda classes, move class file size comparison to\nROMClassBuilder::compareROMClassForEquality().\n4. Re-enable SCC lambda class tests in Java 15 and up.\n\nCloses #10534\n\nSigned-off-by: Hang Shao <hangshao@ca.ibm.com>"}, "afterCommit": {"oid": "49c082ea459f9733f22867a7c5a0ecc82ec89fad", "author": {"user": {"login": "hangshao0", "name": "Hang Shao"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/49c082ea459f9733f22867a7c5a0ecc82ec89fad", "committedDate": "2020-10-08T19:35:01Z", "message": "Add hidden classes to shared classes cache.\n\n1. Enable class sharing for hidden classes.\n2. Different hidden classes in different runs may have the same \nclass name, so use 0xromaddress instead of class name as hash key \nin classLoader->classHashTable for hidden classes.\n3. For lambda classes, move class file size comparison to\nROMClassBuilder::compareROMClassForEquality().\n4. Re-enable SCC lambda class tests in Java 15 and up.\n\nCloses #10534\n\nSigned-off-by: Hang Shao <hangshao@ca.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07bb9ea3c2dbc23695f95ece76d20a64c3e68881", "author": {"user": {"login": "hangshao0", "name": "Hang Shao"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/07bb9ea3c2dbc23695f95ece76d20a64c3e68881", "committedDate": "2020-10-08T19:44:14Z", "message": "Add hidden classes to shared classes cache.\n\n1. Enable class sharing for hidden classes.\n2. Different hidden classes in different runs may have the same \nclass name, so use 0xromaddress instead of class name as hash key \nin classLoader->classHashTable for hidden classes.\n3. For lambda classes, move class file size comparison to\nROMClassBuilder::compareROMClassForEquality().\n4. Re-enable SCC lambda class tests in Java 15 and up.\n\nCloses #10534\n\nSigned-off-by: Hang Shao <hangshao@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "49c082ea459f9733f22867a7c5a0ecc82ec89fad", "author": {"user": {"login": "hangshao0", "name": "Hang Shao"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/49c082ea459f9733f22867a7c5a0ecc82ec89fad", "committedDate": "2020-10-08T19:35:01Z", "message": "Add hidden classes to shared classes cache.\n\n1. Enable class sharing for hidden classes.\n2. Different hidden classes in different runs may have the same \nclass name, so use 0xromaddress instead of class name as hash key \nin classLoader->classHashTable for hidden classes.\n3. For lambda classes, move class file size comparison to\nROMClassBuilder::compareROMClassForEquality().\n4. Re-enable SCC lambda class tests in Java 15 and up.\n\nCloses #10534\n\nSigned-off-by: Hang Shao <hangshao@ca.ibm.com>"}, "afterCommit": {"oid": "07bb9ea3c2dbc23695f95ece76d20a64c3e68881", "author": {"user": {"login": "hangshao0", "name": "Hang Shao"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/07bb9ea3c2dbc23695f95ece76d20a64c3e68881", "committedDate": "2020-10-08T19:44:14Z", "message": "Add hidden classes to shared classes cache.\n\n1. Enable class sharing for hidden classes.\n2. Different hidden classes in different runs may have the same \nclass name, so use 0xromaddress instead of class name as hash key \nin classLoader->classHashTable for hidden classes.\n3. For lambda classes, move class file size comparison to\nROMClassBuilder::compareROMClassForEquality().\n4. Re-enable SCC lambda class tests in Java 15 and up.\n\nCloses #10534\n\nSigned-off-by: Hang Shao <hangshao@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1MTEyMTMw", "url": "https://github.com/eclipse-openj9/openj9/pull/10819#pullrequestreview-505112130", "createdAt": "2020-10-08T19:45:48Z", "commit": {"oid": "07bb9ea3c2dbc23695f95ece76d20a64c3e68881"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NDk4OTkz", "url": "https://github.com/eclipse-openj9/openj9/pull/10819#pullrequestreview-507498993", "createdAt": "2020-10-13T14:29:43Z", "commit": {"oid": "07bb9ea3c2dbc23695f95ece76d20a64c3e68881"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 396, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}