{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMyNzY0MDcw", "number": 11370, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQyMDoyNTozNFrOFA908g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQyMDoyNTozNFrOFA908g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM2NTU3Mjk4OnYy", "diffSide": "RIGHT", "path": "jcl/src/java.base/share/classes/java/lang/Class.java", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQyMDoyNTozNFrOH_gz5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQyMToyNDo1NlrOH_iimw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjM1OTkwOQ==", "bodyText": "Since we are here, please use SharedSecrets.getJavaLangAccess() instead new an instance for every call.", "url": "https://github.com/eclipse-openj9/openj9/pull/11370#discussion_r536359909", "createdAt": "2020-12-04T20:25:34Z", "author": {"login": "JasonFengJ9"}, "path": "jcl/src/java.base/share/classes/java/lang/Class.java", "diffHunk": "@@ -4670,10 +4670,11 @@ Object setMethodHandleCache(Object cache) {\n \treturn result;\n }\n \n-/*[IF Sidecar19-SE]*/\n ConstantPool getConstantPool() {\n \treturn new Access().getConstantPool(this);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c83d092e423a71709b2438ef580ba50677f84c3"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjM2MTY3OA==", "bodyText": "Sure, I will change that. Do we want to make the same change here?\nhttps://github.com/eclipse/openj9/blob/2c83d092e423a71709b2438ef580ba50677f84c3/jcl/src/java.base/share/classes/java/lang/Class.java#L3111-L3114", "url": "https://github.com/eclipse-openj9/openj9/pull/11370#discussion_r536361678", "createdAt": "2020-12-04T20:29:00Z", "author": {"login": "sharon-wang"}, "path": "jcl/src/java.base/share/classes/java/lang/Class.java", "diffHunk": "@@ -4670,10 +4670,11 @@ Object setMethodHandleCache(Object cache) {\n \treturn result;\n }\n \n-/*[IF Sidecar19-SE]*/\n ConstantPool getConstantPool() {\n \treturn new Access().getConstantPool(this);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjM1OTkwOQ=="}, "originalCommit": {"oid": "2c83d092e423a71709b2438ef580ba50677f84c3"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjM2MzYyMA==", "bodyText": "Or perhaps replace new Access().getConstantPool(this) with getConstantPool()", "url": "https://github.com/eclipse-openj9/openj9/pull/11370#discussion_r536363620", "createdAt": "2020-12-04T20:33:15Z", "author": {"login": "sharon-wang"}, "path": "jcl/src/java.base/share/classes/java/lang/Class.java", "diffHunk": "@@ -4670,10 +4670,11 @@ Object setMethodHandleCache(Object cache) {\n \treturn result;\n }\n \n-/*[IF Sidecar19-SE]*/\n ConstantPool getConstantPool() {\n \treturn new Access().getConstantPool(this);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjM1OTkwOQ=="}, "originalCommit": {"oid": "2c83d092e423a71709b2438ef580ba50677f84c3"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjM3MTM4Nw==", "bodyText": "SharedSecrets.getJavaLangAccess() saves one level method call though it is negligible after JIT.\nAnother option is to change the method Access.getConstantPool() to static, but I will let that to you.\nNever mind, sun.misc.JavaLangAccess.getConstantPool(Class<?> klass) is not static, the implementation can't be either.", "url": "https://github.com/eclipse-openj9/openj9/pull/11370#discussion_r536371387", "createdAt": "2020-12-04T20:49:30Z", "author": {"login": "JasonFengJ9"}, "path": "jcl/src/java.base/share/classes/java/lang/Class.java", "diffHunk": "@@ -4670,10 +4670,11 @@ Object setMethodHandleCache(Object cache) {\n \treturn result;\n }\n \n-/*[IF Sidecar19-SE]*/\n ConstantPool getConstantPool() {\n \treturn new Access().getConstantPool(this);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjM1OTkwOQ=="}, "originalCommit": {"oid": "2c83d092e423a71709b2438ef580ba50677f84c3"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjM3OTk4Nw==", "bodyText": "Pushed the changes.", "url": "https://github.com/eclipse-openj9/openj9/pull/11370#discussion_r536379987", "createdAt": "2020-12-04T21:07:28Z", "author": {"login": "sharon-wang"}, "path": "jcl/src/java.base/share/classes/java/lang/Class.java", "diffHunk": "@@ -4670,10 +4670,11 @@ Object setMethodHandleCache(Object cache) {\n \treturn result;\n }\n \n-/*[IF Sidecar19-SE]*/\n ConstantPool getConstantPool() {\n \treturn new Access().getConstantPool(this);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjM1OTkwOQ=="}, "originalCommit": {"oid": "2c83d092e423a71709b2438ef580ba50677f84c3"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjM4ODI1MQ==", "bodyText": "SharedSecrets is in jdk.internal.access for JDK9+, sun.misc prior to that. Will add in both imports ifdeffed on the Java version.", "url": "https://github.com/eclipse-openj9/openj9/pull/11370#discussion_r536388251", "createdAt": "2020-12-04T21:24:56Z", "author": {"login": "sharon-wang"}, "path": "jcl/src/java.base/share/classes/java/lang/Class.java", "diffHunk": "@@ -4670,10 +4670,11 @@ Object setMethodHandleCache(Object cache) {\n \treturn result;\n }\n \n-/*[IF Sidecar19-SE]*/\n ConstantPool getConstantPool() {\n \treturn new Access().getConstantPool(this);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjM1OTkwOQ=="}, "originalCommit": {"oid": "2c83d092e423a71709b2438ef580ba50677f84c3"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 833, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}