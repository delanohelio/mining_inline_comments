{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwNTc0Mzk5", "number": 8906, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNzo1MToxMFrODpN9JQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNzo1MToxMFrODpN9JQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ0NTQ2ODUzOnYy", "diffSide": "RIGHT", "path": "runtime/vm/monhelpers.c", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNzo1MToxMFrOF4QdDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQxNzo1ODo0NVrOF4QvCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDUzNDE1OA==", "bodyText": "I assume this is required because of the use of J9_LOAD_LOCKWORD... macros?\nLike: https://github.com/eclipse/openj9/blob/51d9fc6a3da153f5b22a30dce3dc661574f5acce/runtime/util/moninfo.c#L70", "url": "https://github.com/eclipse-openj9/openj9/pull/8906#discussion_r394534158", "createdAt": "2020-03-18T17:51:10Z", "author": {"login": "DanHeidinga"}, "path": "runtime/vm/monhelpers.c", "diffHunk": "@@ -257,7 +257,7 @@ objectMonitorInflate(J9VMThread* vmStruct, j9object_t object, UDATA lock)\n \t((J9ThreadAbstractMonitor*)monitor)->count = J9_FLATLOCK_COUNT(lock);\t\n \n \tif (!LN_HAS_LOCKWORD(vmStruct,object)) {\n-\t\tobjectMonitor->alternateLockword = (j9objectmonitor_t)((UDATA)objectMonitor | OBJECT_HEADER_LOCK_INFLATED);\n+\t\tJ9_STORE_LOCKWORD(vmStruct, &objectMonitor->alternateLockword, (j9objectmonitor_t)((UDATA)objectMonitor | OBJECT_HEADER_LOCK_INFLATED));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "94978cf7325ee26ba299a45db541afb2f6b0048b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDUzODc2Mg==", "bodyText": "Yes, the lockword location is treated as if it were in the object, so the load/store macros must always be used. Again, this works on X because of endian.", "url": "https://github.com/eclipse-openj9/openj9/pull/8906#discussion_r394538762", "createdAt": "2020-03-18T17:58:45Z", "author": {"login": "gacholio"}, "path": "runtime/vm/monhelpers.c", "diffHunk": "@@ -257,7 +257,7 @@ objectMonitorInflate(J9VMThread* vmStruct, j9object_t object, UDATA lock)\n \t((J9ThreadAbstractMonitor*)monitor)->count = J9_FLATLOCK_COUNT(lock);\t\n \n \tif (!LN_HAS_LOCKWORD(vmStruct,object)) {\n-\t\tobjectMonitor->alternateLockword = (j9objectmonitor_t)((UDATA)objectMonitor | OBJECT_HEADER_LOCK_INFLATED);\n+\t\tJ9_STORE_LOCKWORD(vmStruct, &objectMonitor->alternateLockword, (j9objectmonitor_t)((UDATA)objectMonitor | OBJECT_HEADER_LOCK_INFLATED));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDUzNDE1OA=="}, "originalCommit": {"oid": "94978cf7325ee26ba299a45db541afb2f6b0048b"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 559, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}