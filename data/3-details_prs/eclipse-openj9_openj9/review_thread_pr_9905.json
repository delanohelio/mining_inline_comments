{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1MzU5ODE2", "number": 9905, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxODo1NzozM1rOEGEbCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMzo0NTowMlrOEGW1dw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0Nzk5MzY4OnYy", "diffSide": "RIGHT", "path": "runtime/include/jvmti.h.m4", "isResolved": true, "comments": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQxODo1NzozM1rOGkpEHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QwMTozNTo0N1rOGkyncw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA3NDcxNg==", "bodyText": "Does this mean that Java 8 is incorrect?", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441074716", "createdAt": "2020-06-16T18:57:33Z", "author": {"login": "pshipton"}, "path": "runtime/include/jvmti.h.m4", "diffHunk": "@@ -47,8 +47,9 @@ JNIEXPORT jint JNICALL Agent_OnAttach(JavaVM* vm, char *options, void *reserved)\n #define JVMTI_VERSION_1 (JVMTI_VERSION_1_0)\n #define JVMTI_VERSION_9  0x30090000\n #define JVMTI_VERSION_11 0x300b0000\n+#define JVMTI_VERSION_15 0x300f0000\n \n-#define JVMTI_VERSION JVMTI_VERSION_11\n+ifelse(eval(JAVA_SPEC_VERSION >= 15), 1, [#define JVMTI_VERSION JVMTI_VERSION_15], [#define JVMTI_VERSION JVMTI_VERSION_11])", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "666dc98d542e250834044667179ae2093a8fc030"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA3Njg4OQ==", "bodyText": "It doesn't match Oracle - there is no java 8 specific version, it was still 1.something at that point, I think.", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441076889", "createdAt": "2020-06-16T19:01:30Z", "author": {"login": "gacholio"}, "path": "runtime/include/jvmti.h.m4", "diffHunk": "@@ -47,8 +47,9 @@ JNIEXPORT jint JNICALL Agent_OnAttach(JavaVM* vm, char *options, void *reserved)\n #define JVMTI_VERSION_1 (JVMTI_VERSION_1_0)\n #define JVMTI_VERSION_9  0x30090000\n #define JVMTI_VERSION_11 0x300b0000\n+#define JVMTI_VERSION_15 0x300f0000\n \n-#define JVMTI_VERSION JVMTI_VERSION_11\n+ifelse(eval(JAVA_SPEC_VERSION >= 15), 1, [#define JVMTI_VERSION JVMTI_VERSION_15], [#define JVMTI_VERSION JVMTI_VERSION_11])", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA3NDcxNg=="}, "originalCommit": {"oid": "666dc98d542e250834044667179ae2093a8fc030"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA3ODEwMg==", "bodyText": "JVMTI_VERSION does exist in Oracle JDK8.", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441078102", "createdAt": "2020-06-16T19:03:42Z", "author": {"login": "gacholio"}, "path": "runtime/include/jvmti.h.m4", "diffHunk": "@@ -47,8 +47,9 @@ JNIEXPORT jint JNICALL Agent_OnAttach(JavaVM* vm, char *options, void *reserved)\n #define JVMTI_VERSION_1 (JVMTI_VERSION_1_0)\n #define JVMTI_VERSION_9  0x30090000\n #define JVMTI_VERSION_11 0x300b0000\n+#define JVMTI_VERSION_15 0x300f0000\n \n-#define JVMTI_VERSION JVMTI_VERSION_11\n+ifelse(eval(JAVA_SPEC_VERSION >= 15), 1, [#define JVMTI_VERSION JVMTI_VERSION_15], [#define JVMTI_VERSION JVMTI_VERSION_11])", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA3NDcxNg=="}, "originalCommit": {"oid": "666dc98d542e250834044667179ae2093a8fc030"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA3ODg2MQ==", "bodyText": "JDK8 didn't need special handling and worked with #define JVMTI_VERSION JVMTI_VERSION_11. I think JDK8 JCL jdwp native doesn't use JVMTI_VERSION.", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441078861", "createdAt": "2020-06-16T19:05:08Z", "author": {"login": "JasonFengJ9"}, "path": "runtime/include/jvmti.h.m4", "diffHunk": "@@ -47,8 +47,9 @@ JNIEXPORT jint JNICALL Agent_OnAttach(JavaVM* vm, char *options, void *reserved)\n #define JVMTI_VERSION_1 (JVMTI_VERSION_1_0)\n #define JVMTI_VERSION_9  0x30090000\n #define JVMTI_VERSION_11 0x300b0000\n+#define JVMTI_VERSION_15 0x300f0000\n \n-#define JVMTI_VERSION JVMTI_VERSION_11\n+ifelse(eval(JAVA_SPEC_VERSION >= 15), 1, [#define JVMTI_VERSION JVMTI_VERSION_15], [#define JVMTI_VERSION JVMTI_VERSION_11])", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA3NDcxNg=="}, "originalCommit": {"oid": "666dc98d542e250834044667179ae2093a8fc030"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA3OTk5Nw==", "bodyText": "I think it needs to be fixed for Java 8, it should be 1.2.1.\nSeems OpenJ9 Java 8 builds use OpenJDK jvmti.h, so it's correct there, but other builds (uhm IBM) have the wrong value.", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441079997", "createdAt": "2020-06-16T19:07:13Z", "author": {"login": "pshipton"}, "path": "runtime/include/jvmti.h.m4", "diffHunk": "@@ -47,8 +47,9 @@ JNIEXPORT jint JNICALL Agent_OnAttach(JavaVM* vm, char *options, void *reserved)\n #define JVMTI_VERSION_1 (JVMTI_VERSION_1_0)\n #define JVMTI_VERSION_9  0x30090000\n #define JVMTI_VERSION_11 0x300b0000\n+#define JVMTI_VERSION_15 0x300f0000\n \n-#define JVMTI_VERSION JVMTI_VERSION_11\n+ifelse(eval(JAVA_SPEC_VERSION >= 15), 1, [#define JVMTI_VERSION JVMTI_VERSION_15], [#define JVMTI_VERSION JVMTI_VERSION_11])", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA3NDcxNg=="}, "originalCommit": {"oid": "666dc98d542e250834044667179ae2093a8fc030"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA4ODc1OQ==", "bodyText": "I think it needs to be fixed for Java 8, it should be 1.2.1.\n\nIs it to correct the jvmti.h file only? I assume there is no functional difference for IBM JDK8 itself since current JVMTI_VERSION value has been defined since it was introduced by JDK11.", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441088759", "createdAt": "2020-06-16T19:23:26Z", "author": {"login": "JasonFengJ9"}, "path": "runtime/include/jvmti.h.m4", "diffHunk": "@@ -47,8 +47,9 @@ JNIEXPORT jint JNICALL Agent_OnAttach(JavaVM* vm, char *options, void *reserved)\n #define JVMTI_VERSION_1 (JVMTI_VERSION_1_0)\n #define JVMTI_VERSION_9  0x30090000\n #define JVMTI_VERSION_11 0x300b0000\n+#define JVMTI_VERSION_15 0x300f0000\n \n-#define JVMTI_VERSION JVMTI_VERSION_11\n+ifelse(eval(JAVA_SPEC_VERSION >= 15), 1, [#define JVMTI_VERSION JVMTI_VERSION_15], [#define JVMTI_VERSION JVMTI_VERSION_11])", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA3NDcxNg=="}, "originalCommit": {"oid": "666dc98d542e250834044667179ae2093a8fc030"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA5MTc4MQ==", "bodyText": "Others may be lazy in their agents and use the constant (this is extremely foolish, since you have to know what verison of TI you need to get any use out of it - you'd have to be using the lowest possible version of TI for this  to work at all).", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441091781", "createdAt": "2020-06-16T19:29:12Z", "author": {"login": "gacholio"}, "path": "runtime/include/jvmti.h.m4", "diffHunk": "@@ -47,8 +47,9 @@ JNIEXPORT jint JNICALL Agent_OnAttach(JavaVM* vm, char *options, void *reserved)\n #define JVMTI_VERSION_1 (JVMTI_VERSION_1_0)\n #define JVMTI_VERSION_9  0x30090000\n #define JVMTI_VERSION_11 0x300b0000\n+#define JVMTI_VERSION_15 0x300f0000\n \n-#define JVMTI_VERSION JVMTI_VERSION_11\n+ifelse(eval(JAVA_SPEC_VERSION >= 15), 1, [#define JVMTI_VERSION JVMTI_VERSION_15], [#define JVMTI_VERSION JVMTI_VERSION_11])", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA3NDcxNg=="}, "originalCommit": {"oid": "666dc98d542e250834044667179ae2093a8fc030"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA5NDc2OQ==", "bodyText": "Is it to correct the jvmti.h file only?\n\nYes, it's clearly wrong for Java 8.  Anything using that constant won't necessarily run on Java 8. Agreed it won't make any functional difference to Java 8. Not sure why the IBM testing doesn't have any issue.", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441094769", "createdAt": "2020-06-16T19:35:03Z", "author": {"login": "pshipton"}, "path": "runtime/include/jvmti.h.m4", "diffHunk": "@@ -47,8 +47,9 @@ JNIEXPORT jint JNICALL Agent_OnAttach(JavaVM* vm, char *options, void *reserved)\n #define JVMTI_VERSION_1 (JVMTI_VERSION_1_0)\n #define JVMTI_VERSION_9  0x30090000\n #define JVMTI_VERSION_11 0x300b0000\n+#define JVMTI_VERSION_15 0x300f0000\n \n-#define JVMTI_VERSION JVMTI_VERSION_11\n+ifelse(eval(JAVA_SPEC_VERSION >= 15), 1, [#define JVMTI_VERSION JVMTI_VERSION_15], [#define JVMTI_VERSION JVMTI_VERSION_11])", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA3NDcxNg=="}, "originalCommit": {"oid": "666dc98d542e250834044667179ae2093a8fc030"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTEzMDQzNA==", "bodyText": "Currently OpenJ9 JDK8 returns JVMTI_1_2_3_SPEC_VERSION (1.2.3).\nhttps://github.com/eclipse/openj9/blob/d89764f909755360950848a474c75c3ba8bb791f/runtime/jvmti/jvmtiGeneral.c#L182\nShould it be changed to JVMTI_1_2_SPEC_VERSION (1.2.1) to match RI instead?", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441130434", "createdAt": "2020-06-16T20:43:47Z", "author": {"login": "JasonFengJ9"}, "path": "runtime/include/jvmti.h.m4", "diffHunk": "@@ -47,8 +47,9 @@ JNIEXPORT jint JNICALL Agent_OnAttach(JavaVM* vm, char *options, void *reserved)\n #define JVMTI_VERSION_1 (JVMTI_VERSION_1_0)\n #define JVMTI_VERSION_9  0x30090000\n #define JVMTI_VERSION_11 0x300b0000\n+#define JVMTI_VERSION_15 0x300f0000\n \n-#define JVMTI_VERSION JVMTI_VERSION_11\n+ifelse(eval(JAVA_SPEC_VERSION >= 15), 1, [#define JVMTI_VERSION JVMTI_VERSION_15], [#define JVMTI_VERSION JVMTI_VERSION_11])", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA3NDcxNg=="}, "originalCommit": {"oid": "666dc98d542e250834044667179ae2093a8fc030"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTE1MTI0NA==", "bodyText": "Seems a good idea to match the RI. This can't have much field impact, I note it was version 9 since 2016 before it changed to version 11.", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441151244", "createdAt": "2020-06-16T21:25:25Z", "author": {"login": "pshipton"}, "path": "runtime/include/jvmti.h.m4", "diffHunk": "@@ -47,8 +47,9 @@ JNIEXPORT jint JNICALL Agent_OnAttach(JavaVM* vm, char *options, void *reserved)\n #define JVMTI_VERSION_1 (JVMTI_VERSION_1_0)\n #define JVMTI_VERSION_9  0x30090000\n #define JVMTI_VERSION_11 0x300b0000\n+#define JVMTI_VERSION_15 0x300f0000\n \n-#define JVMTI_VERSION JVMTI_VERSION_11\n+ifelse(eval(JAVA_SPEC_VERSION >= 15), 1, [#define JVMTI_VERSION JVMTI_VERSION_15], [#define JVMTI_VERSION JVMTI_VERSION_11])", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA3NDcxNg=="}, "originalCommit": {"oid": "666dc98d542e250834044667179ae2093a8fc030"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTE2NzE1Ng==", "bodyText": "Sorry, I have to change the request.\nIt is clear that JVMTI_VERSION is 1.2.1 with value of 0x30010201. However I run this same JVM to against a simple testcase invoking jvmti->GetVersionNumber(version_ptr), and got 0x30010203 which is 1.2.3, i.e., JVMTI_1_2_3_SPEC_VERSION currently returned by OpenJ9, so this was to match RI behaviour, and should keep that way instead.\nIt appears there is an internal define within RI.", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441167156", "createdAt": "2020-06-16T22:01:31Z", "author": {"login": "JasonFengJ9"}, "path": "runtime/include/jvmti.h.m4", "diffHunk": "@@ -47,8 +47,9 @@ JNIEXPORT jint JNICALL Agent_OnAttach(JavaVM* vm, char *options, void *reserved)\n #define JVMTI_VERSION_1 (JVMTI_VERSION_1_0)\n #define JVMTI_VERSION_9  0x30090000\n #define JVMTI_VERSION_11 0x300b0000\n+#define JVMTI_VERSION_15 0x300f0000\n \n-#define JVMTI_VERSION JVMTI_VERSION_11\n+ifelse(eval(JAVA_SPEC_VERSION >= 15), 1, [#define JVMTI_VERSION JVMTI_VERSION_15], [#define JVMTI_VERSION JVMTI_VERSION_11])", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA3NDcxNg=="}, "originalCommit": {"oid": "666dc98d542e250834044667179ae2093a8fc030"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIzMTIxOQ==", "bodyText": "Limited JVMTI_VERSION_15 for JDK15, JVMTI_VERSION_11 for JDK11+,\nJVMTI_VERSION_9 for JDK9+, also defined JVMTI_VERSION accordingly.\nPlease re-review.", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441231219", "createdAt": "2020-06-17T01:35:47Z", "author": {"login": "JasonFengJ9"}, "path": "runtime/include/jvmti.h.m4", "diffHunk": "@@ -47,8 +47,9 @@ JNIEXPORT jint JNICALL Agent_OnAttach(JavaVM* vm, char *options, void *reserved)\n #define JVMTI_VERSION_1 (JVMTI_VERSION_1_0)\n #define JVMTI_VERSION_9  0x30090000\n #define JVMTI_VERSION_11 0x300b0000\n+#define JVMTI_VERSION_15 0x300f0000\n \n-#define JVMTI_VERSION JVMTI_VERSION_11\n+ifelse(eval(JAVA_SPEC_VERSION >= 15), 1, [#define JVMTI_VERSION JVMTI_VERSION_15], [#define JVMTI_VERSION JVMTI_VERSION_11])", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA3NDcxNg=="}, "originalCommit": {"oid": "666dc98d542e250834044667179ae2093a8fc030"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0ODk4MzExOnYy", "diffSide": "RIGHT", "path": "runtime/include/jvmti.h.m4", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QwMTozODowMlrOGkypvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QwMjozMDowOVrOGkze8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIzMTgwNA==", "bodyText": "Pls remove the blank line", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441231804", "createdAt": "2020-06-17T01:38:02Z", "author": {"login": "pshipton"}, "path": "runtime/include/jvmti.h.m4", "diffHunk": "@@ -45,16 +45,20 @@ JNIEXPORT jint JNICALL Agent_OnAttach(JavaVM* vm, char *options, void *reserved)\n #define JVMTI_VERSION_1_1 0x30010100\n #define JVMTI_VERSION_1_2 0x30010200\n #define JVMTI_VERSION_1 (JVMTI_VERSION_1_0)\n-#define JVMTI_VERSION_9  0x30090000\n-#define JVMTI_VERSION_11 0x300b0000\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c088833a093e2a16d9f4354f0add3c4c2693640a"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI0NTQyNw==", "bodyText": "Removed.", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441245427", "createdAt": "2020-06-17T02:30:09Z", "author": {"login": "JasonFengJ9"}, "path": "runtime/include/jvmti.h.m4", "diffHunk": "@@ -45,16 +45,20 @@ JNIEXPORT jint JNICALL Agent_OnAttach(JavaVM* vm, char *options, void *reserved)\n #define JVMTI_VERSION_1_1 0x30010100\n #define JVMTI_VERSION_1_2 0x30010200\n #define JVMTI_VERSION_1 (JVMTI_VERSION_1_0)\n-#define JVMTI_VERSION_9  0x30090000\n-#define JVMTI_VERSION_11 0x300b0000\n ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIzMTgwNA=="}, "originalCommit": {"oid": "c088833a093e2a16d9f4354f0add3c4c2693640a"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0ODk4Mzk2OnYy", "diffSide": "RIGHT", "path": "runtime/include/jvmti.h.m4", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QwMTozODozNlrOGkyqSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QwMjozMDoyNFrOGkzfMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIzMTk0NQ==", "bodyText": "Since 9 & 10 aren't supported, this could be 11.", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441231945", "createdAt": "2020-06-17T01:38:36Z", "author": {"login": "pshipton"}, "path": "runtime/include/jvmti.h.m4", "diffHunk": "@@ -45,16 +45,20 @@ JNIEXPORT jint JNICALL Agent_OnAttach(JavaVM* vm, char *options, void *reserved)\n #define JVMTI_VERSION_1_1 0x30010100\n #define JVMTI_VERSION_1_2 0x30010200\n #define JVMTI_VERSION_1 (JVMTI_VERSION_1_0)\n-#define JVMTI_VERSION_9  0x30090000\n-#define JVMTI_VERSION_11 0x300b0000\n \n-#define JVMTI_VERSION JVMTI_VERSION_11\n+ifelse(eval(JAVA_SPEC_VERSION >= 9), 1, [#define JVMTI_VERSION_9  0x30090000", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c088833a093e2a16d9f4354f0add3c4c2693640a"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIzMjk5MA==", "bodyText": "Or > 8", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441232990", "createdAt": "2020-06-17T01:42:26Z", "author": {"login": "pshipton"}, "path": "runtime/include/jvmti.h.m4", "diffHunk": "@@ -45,16 +45,20 @@ JNIEXPORT jint JNICALL Agent_OnAttach(JavaVM* vm, char *options, void *reserved)\n #define JVMTI_VERSION_1_1 0x30010100\n #define JVMTI_VERSION_1_2 0x30010200\n #define JVMTI_VERSION_1 (JVMTI_VERSION_1_0)\n-#define JVMTI_VERSION_9  0x30090000\n-#define JVMTI_VERSION_11 0x300b0000\n \n-#define JVMTI_VERSION JVMTI_VERSION_11\n+ifelse(eval(JAVA_SPEC_VERSION >= 9), 1, [#define JVMTI_VERSION_9  0x30090000", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIzMTk0NQ=="}, "originalCommit": {"oid": "c088833a093e2a16d9f4354f0add3c4c2693640a"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI0NTQ5MQ==", "bodyText": "sure, dropped the support of JDK 9/10.", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441245491", "createdAt": "2020-06-17T02:30:24Z", "author": {"login": "JasonFengJ9"}, "path": "runtime/include/jvmti.h.m4", "diffHunk": "@@ -45,16 +45,20 @@ JNIEXPORT jint JNICALL Agent_OnAttach(JavaVM* vm, char *options, void *reserved)\n #define JVMTI_VERSION_1_1 0x30010100\n #define JVMTI_VERSION_1_2 0x30010200\n #define JVMTI_VERSION_1 (JVMTI_VERSION_1_0)\n-#define JVMTI_VERSION_9  0x30090000\n-#define JVMTI_VERSION_11 0x300b0000\n \n-#define JVMTI_VERSION JVMTI_VERSION_11\n+ifelse(eval(JAVA_SPEC_VERSION >= 9), 1, [#define JVMTI_VERSION_9  0x30090000", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIzMTk0NQ=="}, "originalCommit": {"oid": "c088833a093e2a16d9f4354f0add3c4c2693640a"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0ODk4NDY4OnYy", "diffSide": "RIGHT", "path": "runtime/include/jvmti.h.m4", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QwMTozOTowMFrOGkyqvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QwMjozMDozMlrOGkzfUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIzMjA2Mw==", "bodyText": "9 is not supported, pls remove this.", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441232063", "createdAt": "2020-06-17T01:39:00Z", "author": {"login": "pshipton"}, "path": "runtime/include/jvmti.h.m4", "diffHunk": "@@ -45,16 +45,20 @@ JNIEXPORT jint JNICALL Agent_OnAttach(JavaVM* vm, char *options, void *reserved)\n #define JVMTI_VERSION_1_1 0x30010100\n #define JVMTI_VERSION_1_2 0x30010200\n #define JVMTI_VERSION_1 (JVMTI_VERSION_1_0)\n-#define JVMTI_VERSION_9  0x30090000\n-#define JVMTI_VERSION_11 0x300b0000\n \n-#define JVMTI_VERSION JVMTI_VERSION_11\n+ifelse(eval(JAVA_SPEC_VERSION >= 9), 1, [#define JVMTI_VERSION_9  0x30090000\n+ifelse(eval(JAVA_SPEC_VERSION >= 11), 1, [#define JVMTI_VERSION_11 0x300b0000\n+ifelse(eval(JAVA_SPEC_VERSION >= 15), 1, [#define JVMTI_VERSION_15 0x300f0000], [dnl])], [dnl])], [dnl])\n \n #define JVMTI_1_0_SPEC_VERSION           (JVMTI_VERSION_1_0 + 37)\t/* Spec version is 1.0.37 */\n #define JVMTI_1_1_SPEC_VERSION           (JVMTI_VERSION_1_1 + 102)\t/* Spec version is 1.1.102 */\n #define JVMTI_1_2_SPEC_VERSION           (JVMTI_VERSION_1_2 + 1)\t/* Spec version is 1.2.1 */\n #define JVMTI_1_2_3_SPEC_VERSION         (JVMTI_VERSION_1_2 + 3)  /* Spec version is 1.2.3 */\n \n+ifelse(eval(JAVA_SPEC_VERSION >= 15), 1, [#define JVMTI_VERSION JVMTI_VERSION_15], [\n+ifelse(eval(JAVA_SPEC_VERSION >= 11), 1, [#define JVMTI_VERSION JVMTI_VERSION_11], [\n+ifelse(eval(JAVA_SPEC_VERSION >= 9), 1, [#define JVMTI_VERSION JVMTI_VERSION_9], [", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c088833a093e2a16d9f4354f0add3c4c2693640a"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI0NTUyMQ==", "bodyText": "Removed.", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441245521", "createdAt": "2020-06-17T02:30:32Z", "author": {"login": "JasonFengJ9"}, "path": "runtime/include/jvmti.h.m4", "diffHunk": "@@ -45,16 +45,20 @@ JNIEXPORT jint JNICALL Agent_OnAttach(JavaVM* vm, char *options, void *reserved)\n #define JVMTI_VERSION_1_1 0x30010100\n #define JVMTI_VERSION_1_2 0x30010200\n #define JVMTI_VERSION_1 (JVMTI_VERSION_1_0)\n-#define JVMTI_VERSION_9  0x30090000\n-#define JVMTI_VERSION_11 0x300b0000\n \n-#define JVMTI_VERSION JVMTI_VERSION_11\n+ifelse(eval(JAVA_SPEC_VERSION >= 9), 1, [#define JVMTI_VERSION_9  0x30090000\n+ifelse(eval(JAVA_SPEC_VERSION >= 11), 1, [#define JVMTI_VERSION_11 0x300b0000\n+ifelse(eval(JAVA_SPEC_VERSION >= 15), 1, [#define JVMTI_VERSION_15 0x300f0000], [dnl])], [dnl])], [dnl])\n \n #define JVMTI_1_0_SPEC_VERSION           (JVMTI_VERSION_1_0 + 37)\t/* Spec version is 1.0.37 */\n #define JVMTI_1_1_SPEC_VERSION           (JVMTI_VERSION_1_1 + 102)\t/* Spec version is 1.1.102 */\n #define JVMTI_1_2_SPEC_VERSION           (JVMTI_VERSION_1_2 + 1)\t/* Spec version is 1.2.1 */\n #define JVMTI_1_2_3_SPEC_VERSION         (JVMTI_VERSION_1_2 + 3)  /* Spec version is 1.2.3 */\n \n+ifelse(eval(JAVA_SPEC_VERSION >= 15), 1, [#define JVMTI_VERSION JVMTI_VERSION_15], [\n+ifelse(eval(JAVA_SPEC_VERSION >= 11), 1, [#define JVMTI_VERSION JVMTI_VERSION_11], [\n+ifelse(eval(JAVA_SPEC_VERSION >= 9), 1, [#define JVMTI_VERSION JVMTI_VERSION_9], [", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIzMjA2Mw=="}, "originalCommit": {"oid": "c088833a093e2a16d9f4354f0add3c4c2693640a"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc0OTE3Nzk0OnYy", "diffSide": "RIGHT", "path": "runtime/include/jvmti.h.m4", "isResolved": true, "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QwMzozOTozOVrOGk0g2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMzoyNToxM1rOGlFmIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI2MjI5Nw==", "bodyText": "9 inside the 11 ifdef seems odd.", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441262297", "createdAt": "2020-06-17T03:39:39Z", "author": {"login": "gacholio"}, "path": "runtime/include/jvmti.h.m4", "diffHunk": "@@ -45,16 +45,18 @@ JNIEXPORT jint JNICALL Agent_OnAttach(JavaVM* vm, char *options, void *reserved)\n #define JVMTI_VERSION_1_1 0x30010100\n #define JVMTI_VERSION_1_2 0x30010200\n #define JVMTI_VERSION_1 (JVMTI_VERSION_1_0)\n-#define JVMTI_VERSION_9  0x30090000\n+ifelse(eval(JAVA_SPEC_VERSION >= 11), 1, [#define JVMTI_VERSION_9  0x30090000", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "514107c7e4d77705a92112ca5eae5796573e1f60"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQ2MDI3Mw==", "bodyText": "JVMTI_VERSION_9 is supported by LTS JDK 11 but not JDK 8, this define should not appear within JDK 8 jvmti.h, since JDK 9/10 are out of service, its home becomes JDK11 instead. I guess this is the state of new Java version scheme.", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441460273", "createdAt": "2020-06-17T10:56:31Z", "author": {"login": "JasonFengJ9"}, "path": "runtime/include/jvmti.h.m4", "diffHunk": "@@ -45,16 +45,18 @@ JNIEXPORT jint JNICALL Agent_OnAttach(JavaVM* vm, char *options, void *reserved)\n #define JVMTI_VERSION_1_1 0x30010100\n #define JVMTI_VERSION_1_2 0x30010200\n #define JVMTI_VERSION_1 (JVMTI_VERSION_1_0)\n-#define JVMTI_VERSION_9  0x30090000\n+ifelse(eval(JAVA_SPEC_VERSION >= 11), 1, [#define JVMTI_VERSION_9  0x30090000", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI2MjI5Nw=="}, "originalCommit": {"oid": "514107c7e4d77705a92112ca5eae5796573e1f60"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTUyNjMzMQ==", "bodyText": "The less odd way is > 8, but either way is fine with me.", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441526331", "createdAt": "2020-06-17T13:01:39Z", "author": {"login": "pshipton"}, "path": "runtime/include/jvmti.h.m4", "diffHunk": "@@ -45,16 +45,18 @@ JNIEXPORT jint JNICALL Agent_OnAttach(JavaVM* vm, char *options, void *reserved)\n #define JVMTI_VERSION_1_1 0x30010100\n #define JVMTI_VERSION_1_2 0x30010200\n #define JVMTI_VERSION_1 (JVMTI_VERSION_1_0)\n-#define JVMTI_VERSION_9  0x30090000\n+ifelse(eval(JAVA_SPEC_VERSION >= 11), 1, [#define JVMTI_VERSION_9  0x30090000", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI2MjI5Nw=="}, "originalCommit": {"oid": "514107c7e4d77705a92112ca5eae5796573e1f60"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTUzMjEyMw==", "bodyText": "I do think it's better as it is now.", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441532123", "createdAt": "2020-06-17T13:10:36Z", "author": {"login": "pshipton"}, "path": "runtime/include/jvmti.h.m4", "diffHunk": "@@ -45,16 +45,18 @@ JNIEXPORT jint JNICALL Agent_OnAttach(JavaVM* vm, char *options, void *reserved)\n #define JVMTI_VERSION_1_1 0x30010100\n #define JVMTI_VERSION_1_2 0x30010200\n #define JVMTI_VERSION_1 (JVMTI_VERSION_1_0)\n-#define JVMTI_VERSION_9  0x30090000\n+ifelse(eval(JAVA_SPEC_VERSION >= 11), 1, [#define JVMTI_VERSION_9  0x30090000", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI2MjI5Nw=="}, "originalCommit": {"oid": "514107c7e4d77705a92112ca5eae5796573e1f60"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTUzNTgxNg==", "bodyText": "ah, just changed to eval(JAVA_SPEC_VERSION > 8), please confirm if you want previous >=11 version.", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441535816", "createdAt": "2020-06-17T13:16:12Z", "author": {"login": "JasonFengJ9"}, "path": "runtime/include/jvmti.h.m4", "diffHunk": "@@ -45,16 +45,18 @@ JNIEXPORT jint JNICALL Agent_OnAttach(JavaVM* vm, char *options, void *reserved)\n #define JVMTI_VERSION_1_1 0x30010100\n #define JVMTI_VERSION_1_2 0x30010200\n #define JVMTI_VERSION_1 (JVMTI_VERSION_1_0)\n-#define JVMTI_VERSION_9  0x30090000\n+ifelse(eval(JAVA_SPEC_VERSION >= 11), 1, [#define JVMTI_VERSION_9  0x30090000", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI2MjI5Nw=="}, "originalCommit": {"oid": "514107c7e4d77705a92112ca5eae5796573e1f60"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTUzOTAwNA==", "bodyText": "GAC can decide.", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441539004", "createdAt": "2020-06-17T13:20:56Z", "author": {"login": "pshipton"}, "path": "runtime/include/jvmti.h.m4", "diffHunk": "@@ -45,16 +45,18 @@ JNIEXPORT jint JNICALL Agent_OnAttach(JavaVM* vm, char *options, void *reserved)\n #define JVMTI_VERSION_1_1 0x30010100\n #define JVMTI_VERSION_1_2 0x30010200\n #define JVMTI_VERSION_1 (JVMTI_VERSION_1_0)\n-#define JVMTI_VERSION_9  0x30090000\n+ifelse(eval(JAVA_SPEC_VERSION >= 11), 1, [#define JVMTI_VERSION_9  0x30090000", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI2MjI5Nw=="}, "originalCommit": {"oid": "514107c7e4d77705a92112ca5eae5796573e1f60"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTU0MjE3OA==", "bodyText": "I am taking JAVA_SPEC_VERSION > 8 for now which is consistent with the other checks in this PR for JVMTI_VERSION_9 cases.", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441542178", "createdAt": "2020-06-17T13:25:13Z", "author": {"login": "JasonFengJ9"}, "path": "runtime/include/jvmti.h.m4", "diffHunk": "@@ -45,16 +45,18 @@ JNIEXPORT jint JNICALL Agent_OnAttach(JavaVM* vm, char *options, void *reserved)\n #define JVMTI_VERSION_1_1 0x30010100\n #define JVMTI_VERSION_1_2 0x30010200\n #define JVMTI_VERSION_1 (JVMTI_VERSION_1_0)\n-#define JVMTI_VERSION_9  0x30090000\n+ifelse(eval(JAVA_SPEC_VERSION >= 11), 1, [#define JVMTI_VERSION_9  0x30090000", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI2MjI5Nw=="}, "originalCommit": {"oid": "514107c7e4d77705a92112ca5eae5796573e1f60"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MDg1MzY0OnYy", "diffSide": "RIGHT", "path": "runtime/tests/jvmtitests/agent/version.c", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMzowODozOVrOGlE5uQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMzozMDowNVrOGlFzxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTUzMDgwOQ==", "bodyText": "The switch uses value version & ~JVMTI_VERSION_MASK_MICRO so this case will never occur.", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441530809", "createdAt": "2020-06-17T13:08:39Z", "author": {"login": "pshipton"}, "path": "runtime/tests/jvmtitests/agent/version.c", "diffHunk": "@@ -60,10 +62,20 @@ getVersionName(agentEnv * agent_env, jint version)\n \t\t\treturn versionNames[1];\n \t\tcase JVMTI_VERSION_1_2:\n \t\t\treturn versionNames[2];\n-\t\tcase JVMTI_VERSION_9:\n+\t\tcase JVMTI_1_2_SPEC_VERSION:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "514107c7e4d77705a92112ca5eae5796573e1f60"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTU0NTY3MA==", "bodyText": "Agreed, this is same as the condition value within jvmtiHookGetEnv(), removed JVMTI_1_2_SPEC_VERSION.", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441545670", "createdAt": "2020-06-17T13:30:05Z", "author": {"login": "JasonFengJ9"}, "path": "runtime/tests/jvmtitests/agent/version.c", "diffHunk": "@@ -60,10 +62,20 @@ getVersionName(agentEnv * agent_env, jint version)\n \t\t\treturn versionNames[1];\n \t\tcase JVMTI_VERSION_1_2:\n \t\t\treturn versionNames[2];\n-\t\tcase JVMTI_VERSION_9:\n+\t\tcase JVMTI_1_2_SPEC_VERSION:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTUzMDgwOQ=="}, "originalCommit": {"oid": "514107c7e4d77705a92112ca5eae5796573e1f60"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MTAwOTUyOnYy", "diffSide": "RIGHT", "path": "runtime/jvmti/jvmtiHook.c", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMzo0NDo0OFrOGlGdbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxNDozMDozMVrOGlIjKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTU1NjMzNQ==", "bodyText": "To be consistent with jvmti.h.m4, this check could be removed.", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441556335", "createdAt": "2020-06-17T13:44:48Z", "author": {"login": "pshipton"}, "path": "runtime/jvmti/jvmtiHook.c", "diffHunk": "@@ -1582,20 +1582,24 @@ jvmtiHookGetEnv(J9HookInterface** hook, UDATA eventNum, void* eventData, void* u\n \tif (data->rc == JNI_EVERSION) {\n \t\tjint version = data->version & ~JVMTI_VERSION_MASK_MICRO;\n \n-\t\tif ((version == JVMTI_VERSION_1_0) \n-\t\t\t|| (version == JVMTI_VERSION_1_1) \n-\t\t\t|| (version == JVMTI_VERSION_1_2) \n-\t\t\t|| (version == JVMTI_VERSION_9)\n-\t\t\t|| (version == JVMTI_VERSION_11)\n+\t\tif ((JVMTI_VERSION_1_0 == version)\n+\t\t\t|| (JVMTI_VERSION_1_1 == version)\n+\t\t\t|| (JVMTI_VERSION_1_2 == version)\n+#if JAVA_SPEC_VERSION > 8\n+\t\t\t|| (JVMTI_VERSION_9 == version)\n+#if JAVA_SPEC_VERSION >= 11", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07a12766a0db3912754d39d618c6dfff84f5e7e6"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTU5MDU3MQ==", "bodyText": "Agreed, removed it.", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441590571", "createdAt": "2020-06-17T14:30:31Z", "author": {"login": "JasonFengJ9"}, "path": "runtime/jvmti/jvmtiHook.c", "diffHunk": "@@ -1582,20 +1582,24 @@ jvmtiHookGetEnv(J9HookInterface** hook, UDATA eventNum, void* eventData, void* u\n \tif (data->rc == JNI_EVERSION) {\n \t\tjint version = data->version & ~JVMTI_VERSION_MASK_MICRO;\n \n-\t\tif ((version == JVMTI_VERSION_1_0) \n-\t\t\t|| (version == JVMTI_VERSION_1_1) \n-\t\t\t|| (version == JVMTI_VERSION_1_2) \n-\t\t\t|| (version == JVMTI_VERSION_9)\n-\t\t\t|| (version == JVMTI_VERSION_11)\n+\t\tif ((JVMTI_VERSION_1_0 == version)\n+\t\t\t|| (JVMTI_VERSION_1_1 == version)\n+\t\t\t|| (JVMTI_VERSION_1_2 == version)\n+#if JAVA_SPEC_VERSION > 8\n+\t\t\t|| (JVMTI_VERSION_9 == version)\n+#if JAVA_SPEC_VERSION >= 11", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTU1NjMzNQ=="}, "originalCommit": {"oid": "07a12766a0db3912754d39d618c6dfff84f5e7e6"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MTAxMDQ3OnYy", "diffSide": "RIGHT", "path": "runtime/tests/jvmtitests/agent/version.c", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMzo0NTowMlrOGlGeEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxNDozMDo0NFrOGlIj1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTU1NjQ5OQ==", "bodyText": "This one as well.", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441556499", "createdAt": "2020-06-17T13:45:02Z", "author": {"login": "pshipton"}, "path": "runtime/tests/jvmtitests/agent/version.c", "diffHunk": "@@ -60,10 +61,18 @@ getVersionName(agentEnv * agent_env, jint version)\n \t\t\treturn versionNames[1];\n \t\tcase JVMTI_VERSION_1_2:\n \t\t\treturn versionNames[2];\n+#if JAVA_SPEC_VERSION > 8\n \t\tcase JVMTI_VERSION_9:\n \t\t\treturn versionNames[3];\n+#if JAVA_SPEC_VERSION >= 11", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07a12766a0db3912754d39d618c6dfff84f5e7e6"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTU5MDc0MA==", "bodyText": "Same here.", "url": "https://github.com/eclipse-openj9/openj9/pull/9905#discussion_r441590740", "createdAt": "2020-06-17T14:30:44Z", "author": {"login": "JasonFengJ9"}, "path": "runtime/tests/jvmtitests/agent/version.c", "diffHunk": "@@ -60,10 +61,18 @@ getVersionName(agentEnv * agent_env, jint version)\n \t\t\treturn versionNames[1];\n \t\tcase JVMTI_VERSION_1_2:\n \t\t\treturn versionNames[2];\n+#if JAVA_SPEC_VERSION > 8\n \t\tcase JVMTI_VERSION_9:\n \t\t\treturn versionNames[3];\n+#if JAVA_SPEC_VERSION >= 11", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTU1NjQ5OQ=="}, "originalCommit": {"oid": "07a12766a0db3912754d39d618c6dfff84f5e7e6"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 29, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}