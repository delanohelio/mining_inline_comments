{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc5MjE3MDA0", "number": 10521, "title": "Add Portable AOT Support on Z", "bodyText": "Use Z10 as the portable cpu processor\nAOT compilation will use Z10 when Portable AOT is enabled and will use host cpu when Portable AOT is not enabled\nNeed to disable GS HW support for Portable AOT on Z as it is a Z14 or newer feature\nEnable Portable AOT on Z, compressed reference shift on Z will be fixed to 3 if Portable AOT is enabled\nPortable AOT is controlled by [+|-]PortableSharedCache (enabled by default in containers and disabled by default outside of containers)\n\nSigned-off-by: Harry Yu harryyu1994@gmail.com", "createdAt": "2020-09-04T02:56:05Z", "url": "https://github.com/eclipse-openj9/openj9/pull/10521", "merged": true, "mergeCommit": {"oid": "0c1db29ea4c4f65bc63e6c4613e9b6ccd4d5167a"}, "closed": true, "closedAt": "2020-09-23T19:02:44Z", "author": {"login": "harryyu1994"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdFcLz9ABqjM3Mjc2MjY0MzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLuVe5AFqTQ5NDc4NjU1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fd8ba890b003b13283efcb46abcb1c5674946377", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/fd8ba890b003b13283efcb46abcb1c5674946377", "committedDate": "2020-09-04T02:55:40Z", "message": "Add Portable AOT Support on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "a142caeec4c086ff9470f5761c38ddfa2500a5f0", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/a142caeec4c086ff9470f5761c38ddfa2500a5f0", "committedDate": "2020-09-04T02:56:54Z", "message": "Add Portable AOT Support on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a142caeec4c086ff9470f5761c38ddfa2500a5f0", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/a142caeec4c086ff9470f5761c38ddfa2500a5f0", "committedDate": "2020-09-04T02:56:54Z", "message": "Add Portable AOT Support on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "2322c3e73aa05c287a1100fb59c20ce7c3de8be7", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/2322c3e73aa05c287a1100fb59c20ce7c3de8be7", "committedDate": "2020-09-04T06:21:39Z", "message": "Add Portable AOT Support on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2322c3e73aa05c287a1100fb59c20ce7c3de8be7", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/2322c3e73aa05c287a1100fb59c20ce7c3de8be7", "committedDate": "2020-09-04T06:21:39Z", "message": "Add Portable AOT Support on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "9f5a1508e2e682bd2d514ea290a0fba23a6aa60b", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/9f5a1508e2e682bd2d514ea290a0fba23a6aa60b", "committedDate": "2020-09-10T15:29:28Z", "message": "Add Portable AOT Support on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9f5a1508e2e682bd2d514ea290a0fba23a6aa60b", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/9f5a1508e2e682bd2d514ea290a0fba23a6aa60b", "committedDate": "2020-09-10T15:29:28Z", "message": "Add Portable AOT Support on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "e25ca770bc25202dac186bab91c7b950ac673327", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e25ca770bc25202dac186bab91c7b950ac673327", "committedDate": "2020-09-10T15:47:00Z", "message": "Add Portable AOT Support on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e25ca770bc25202dac186bab91c7b950ac673327", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e25ca770bc25202dac186bab91c7b950ac673327", "committedDate": "2020-09-10T15:47:00Z", "message": "Add Portable AOT Support on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "d742d8cf67e9ff8b883ab6a10527a9eeb59e5c65", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/d742d8cf67e9ff8b883ab6a10527a9eeb59e5c65", "committedDate": "2020-09-10T15:58:30Z", "message": "Add Portable AOT Support on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d742d8cf67e9ff8b883ab6a10527a9eeb59e5c65", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/d742d8cf67e9ff8b883ab6a10527a9eeb59e5c65", "committedDate": "2020-09-10T15:58:30Z", "message": "Add Portable AOT Support on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "e084c28e3f71aeb792f9104d076d09274e32d639", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e084c28e3f71aeb792f9104d076d09274e32d639", "committedDate": "2020-09-10T16:08:00Z", "message": "Add Portable AOT Support on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e084c28e3f71aeb792f9104d076d09274e32d639", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e084c28e3f71aeb792f9104d076d09274e32d639", "committedDate": "2020-09-10T16:08:00Z", "message": "Add Portable AOT Support on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "9115c19df6c7d4afadcae6adafbb20d8a6155f4e", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/9115c19df6c7d4afadcae6adafbb20d8a6155f4e", "committedDate": "2020-09-10T16:13:35Z", "message": "Add Portable AOT Support on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9115c19df6c7d4afadcae6adafbb20d8a6155f4e", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/9115c19df6c7d4afadcae6adafbb20d8a6155f4e", "committedDate": "2020-09-10T16:13:35Z", "message": "Add Portable AOT Support on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "8fceaa69cd53dae997aca9a5608c6e8856f1cd92", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/8fceaa69cd53dae997aca9a5608c6e8856f1cd92", "committedDate": "2020-09-10T16:16:38Z", "message": "Add Portable AOT Support on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8fceaa69cd53dae997aca9a5608c6e8856f1cd92", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/8fceaa69cd53dae997aca9a5608c6e8856f1cd92", "committedDate": "2020-09-10T16:16:38Z", "message": "Add Portable AOT Support on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "1037e7e698cd948c2b958789c35a8a6e8b2a1bc6", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/1037e7e698cd948c2b958789c35a8a6e8b2a1bc6", "committedDate": "2020-09-10T16:29:36Z", "message": "Add Portable AOT Support on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "576cc82d44a21547cefd19f8e499f9474ca1b4aa", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/576cc82d44a21547cefd19f8e499f9474ca1b4aa", "committedDate": "2020-09-10T22:02:10Z", "message": "debug"}, "afterCommit": {"oid": "1ea8a57391e1987615da2c6029ef63f3dd179fa3", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/1ea8a57391e1987615da2c6029ef63f3dd179fa3", "committedDate": "2020-09-11T21:12:13Z", "message": "Add Portable AOT Support on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1ea8a57391e1987615da2c6029ef63f3dd179fa3", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/1ea8a57391e1987615da2c6029ef63f3dd179fa3", "committedDate": "2020-09-11T21:12:13Z", "message": "Add Portable AOT Support on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "8a71fe6221aa1f420f28cca7d104274e6c230e2e", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/8a71fe6221aa1f420f28cca7d104274e6c230e2e", "committedDate": "2020-09-14T17:01:07Z", "message": "Add Portable AOT Support on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "86a2ef30b1a9dcb5f150958a5b19c939fd557966", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/86a2ef30b1a9dcb5f150958a5b19c939fd557966", "committedDate": "2020-09-16T19:01:24Z", "message": "debug"}, "afterCommit": {"oid": "ab7ef1c8e9f3fadba590132d136d4871346376da", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/ab7ef1c8e9f3fadba590132d136d4871346376da", "committedDate": "2020-09-17T21:39:57Z", "message": "Enable -XX:[+|-]PortableSharedCache for Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxNDg4MDY1", "url": "https://github.com/eclipse-openj9/openj9/pull/10521#pullrequestreview-491488065", "createdAt": "2020-09-18T13:54:58Z", "commit": {"oid": "ab7ef1c8e9f3fadba590132d136d4871346376da"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxMzo1NDo1OFrOHUOM_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxMzo1NDo1OFrOHUOM_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDk2NjI2OA==", "bodyText": "I would use explicit list of supported platforms rather than use \"all except Power\". What about ARM, RiscV, ZTPF etc?", "url": "https://github.com/eclipse-openj9/openj9/pull/10521#discussion_r490966268", "createdAt": "2020-09-18T13:54:58Z", "author": {"login": "dmitripivkine"}, "path": "runtime/vm/jvminit.c", "diffHunk": "@@ -1682,10 +1682,10 @@ IDATA VMInitStages(J9JavaVM *vm, IDATA stage, void* reserved) {\n \t\t\t\tIDATA argIndex9 = 0;\n \t\t\t\tBOOLEAN sharedClassDisabled = FALSE;\n \n-#if defined(J9VM_ARCH_X86)\n+#if !defined(J9VM_ARCH_POWER)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ab7ef1c8e9f3fadba590132d136d4871346376da"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxNDk2MjEz", "url": "https://github.com/eclipse-openj9/openj9/pull/10521#pullrequestreview-491496213", "createdAt": "2020-09-18T14:04:13Z", "commit": {"oid": "ab7ef1c8e9f3fadba590132d136d4871346376da"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxNDowNDoxM1rOHUOkkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxNDowNDoxM1rOHUOkkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDk3MjMwNg==", "bodyText": "Does this code change the behavior when AOT is enabled? We want a change in behavior if AOT and portableAOT enabled.", "url": "https://github.com/eclipse-openj9/openj9/pull/10521#discussion_r490972306", "createdAt": "2020-09-18T14:04:13Z", "author": {"login": "mpirvu"}, "path": "runtime/gc_modron_startup/mminit.cpp", "diffHunk": "@@ -2927,7 +2927,7 @@ gcInitializeDefaults(J9JavaVM* vm)\n \n \t\t\t\tif (hwSupported) {\n \t\t\t\t\t/* Software Barrier request overwrites HW usage on supported HW */\n-\t\t\t\t\textensions->concurrentScavengerHWSupport = hwSupported && !extensions->softwareRangeCheckReadBarrier;\n+\t\t\t\t\textensions->concurrentScavengerHWSupport = hwSupported && !extensions->softwareRangeCheckReadBarrier && !J9_ARE_ANY_BITS_SET(vm->extendedRuntimeFlags2, J9_EXTENDED_RUNTIME2_ENABLE_AOT);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ab7ef1c8e9f3fadba590132d136d4871346376da"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd9d99577fb53d8dab78022cd61e1b2c57c905e9", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/dd9d99577fb53d8dab78022cd61e1b2c57c905e9", "committedDate": "2020-09-21T15:28:03Z", "message": "Add Portable AOT Support on Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ab7ef1c8e9f3fadba590132d136d4871346376da", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/ab7ef1c8e9f3fadba590132d136d4871346376da", "committedDate": "2020-09-17T21:39:57Z", "message": "Enable -XX:[+|-]PortableSharedCache for Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "38daf9579f031a2cd8ebdff1a91250f5ed4452f8", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/38daf9579f031a2cd8ebdff1a91250f5ed4452f8", "committedDate": "2020-09-21T15:28:03Z", "message": "Enable -XX:[+|-]PortableSharedCache for Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5af65d0a44e81f9a9bef0e37bdac3a483d316a38", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/5af65d0a44e81f9a9bef0e37bdac3a483d316a38", "committedDate": "2020-09-21T15:38:48Z", "message": "Enable -XX:[+|-]PortableSharedCache for Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "38daf9579f031a2cd8ebdff1a91250f5ed4452f8", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/38daf9579f031a2cd8ebdff1a91250f5ed4452f8", "committedDate": "2020-09-21T15:28:03Z", "message": "Enable -XX:[+|-]PortableSharedCache for Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}, "afterCommit": {"oid": "5af65d0a44e81f9a9bef0e37bdac3a483d316a38", "author": {"user": {"login": "harryyu1994", "name": "Harry Yu"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/5af65d0a44e81f9a9bef0e37bdac3a483d316a38", "committedDate": "2020-09-21T15:38:48Z", "message": "Enable -XX:[+|-]PortableSharedCache for Z\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzNjYyMjI2", "url": "https://github.com/eclipse-openj9/openj9/pull/10521#pullrequestreview-493662226", "createdAt": "2020-09-22T16:51:29Z", "commit": {"oid": "5af65d0a44e81f9a9bef0e37bdac3a483d316a38"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzNzE1ODI1", "url": "https://github.com/eclipse-openj9/openj9/pull/10521#pullrequestreview-493715825", "createdAt": "2020-09-22T18:00:40Z", "commit": {"oid": "5af65d0a44e81f9a9bef0e37bdac3a483d316a38"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0Nzg2NTUx", "url": "https://github.com/eclipse-openj9/openj9/pull/10521#pullrequestreview-494786551", "createdAt": "2020-09-23T15:29:30Z", "commit": {"oid": "5af65d0a44e81f9a9bef0e37bdac3a483d316a38"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4944, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}