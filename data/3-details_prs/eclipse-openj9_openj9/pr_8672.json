{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwNjQzOTU1", "number": 8672, "title": "AArch64: Fix for monitorEnter/monitorExit snippets", "bodyText": "This code fixes the code generation of monitorEnter/monitorExit\nsnippets for AArch64.\n\nEncoding of the immediate value for the andimmx instruction was wrong\nThe mask used in monitorExit was wrong\n\nAlso fixing some typos.\nSigned-off-by: KONNO Kazuhiro konno@jp.ibm.com", "createdAt": "2020-02-27T05:22:39Z", "url": "https://github.com/eclipse-openj9/openj9/pull/8672", "merged": true, "mergeCommit": {"oid": "b25d2d63793c8d12bba32f97c3848e4cb16409b7"}, "closed": true, "closedAt": "2020-02-28T12:38:36Z", "author": {"login": "knn-k"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIU3iDABqjMwNzY0OTk1NTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIvNvCgFqTM2NjM2NzUwMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c63b408c41a9392c2e5eba76024a3f44c249a444", "author": {"user": {"login": "knn-k", "name": "KONNO Kazuhiro"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c63b408c41a9392c2e5eba76024a3f44c249a444", "committedDate": "2020-02-27T05:21:11Z", "message": "AArch64: Fix for monitorEnter/monitorExit snippets\n\nThis code fixes the code generation of monitorEnter/monitorExit\nsnippets for AArch64.  Encoding of the immediate value for the\nandimmx instruction was wrong.\n\nSigned-off-by: KONNO Kazuhiro <konno@jp.ibm.com>"}, "afterCommit": {"oid": "05d9de855c59a2ea9ea91f5dd3bc1a0359f43a46", "author": {"user": {"login": "knn-k", "name": "KONNO Kazuhiro"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/05d9de855c59a2ea9ea91f5dd3bc1a0359f43a46", "committedDate": "2020-02-27T05:55:26Z", "message": "AArch64: Fix for monitorEnter/monitorExit snippets\n\nThis code fixes the code generation of monitorEnter/monitorExit\nsnippets for AArch64.  Encoding of the immediate value for the\nandimmx instruction was wrong.\n\nAlso fixing some typos.\n\nSigned-off-by: KONNO Kazuhiro <konno@jp.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "05d9de855c59a2ea9ea91f5dd3bc1a0359f43a46", "author": {"user": {"login": "knn-k", "name": "KONNO Kazuhiro"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/05d9de855c59a2ea9ea91f5dd3bc1a0359f43a46", "committedDate": "2020-02-27T05:55:26Z", "message": "AArch64: Fix for monitorEnter/monitorExit snippets\n\nThis code fixes the code generation of monitorEnter/monitorExit\nsnippets for AArch64.  Encoding of the immediate value for the\nandimmx instruction was wrong.\n\nAlso fixing some typos.\n\nSigned-off-by: KONNO Kazuhiro <konno@jp.ibm.com>"}, "afterCommit": {"oid": "22faf7971cc3c008442f256274c8e97ae12a1044", "author": {"user": {"login": "knn-k", "name": "KONNO Kazuhiro"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/22faf7971cc3c008442f256274c8e97ae12a1044", "committedDate": "2020-02-27T07:39:31Z", "message": "AArch64: Fix for monitorEnter/monitorExit snippets\n\nThis code fixes the code generation of monitorEnter/monitorExit\nsnippets for AArch64.  Encoding of the immediate value for the\nandimmx instruction was wrong.\n\nAlso fixing some typos.\n\nSigned-off-by: KONNO Kazuhiro <konno@jp.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MTAwODI1", "url": "https://github.com/eclipse-openj9/openj9/pull/8672#pullrequestreview-366100825", "createdAt": "2020-02-28T00:54:54Z", "commit": {"oid": "22faf7971cc3c008442f256274c8e97ae12a1044"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwMDo1NDo1NFrOFvmT3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQwMDo1NDo1NFrOFvmT3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTQ1NTA3MQ==", "bodyText": "ppc uses ~OBJECT_HEADER_LOCK_RECURSION_MASK which is ~0xF8 for masking.\nhttps://github.com/eclipse/openj9/blob/944f9dd6edf869c6409db6ba367a360cad0dbee7/runtime/compiler/p/codegen/J9TreeEvaluator.cpp#L5925-L5948", "url": "https://github.com/eclipse-openj9/openj9/pull/8672#discussion_r385455071", "createdAt": "2020-02-28T00:54:54Z", "author": {"login": "Akira1Saitoh"}, "path": "runtime/compiler/aarch64/codegen/J9ARM64Snippet.cpp", "diffHunk": "@@ -74,7 +74,7 @@ TR::ARM64MonitorEnterSnippet::emitSnippetBody()\n    *(int32_t *)buffer = TR::InstOpCode::getOpCodeBinaryEncoding(TR::InstOpCode::andimmx);\n    tempReg->setRegisterFieldRD((uint32_t *)buffer);\n    dataReg->setRegisterFieldRN((uint32_t *)buffer);\n-   *(int32_t *)buffer |= 0x196000; // immr=25, imms=24 for 0xFFFFFF80\n+   *(int32_t *)buffer |= 0x79E000; // immr=57, imms=56 for 0xFFFFFFFFFFFFFF80", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22faf7971cc3c008442f256274c8e97ae12a1044"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "22faf7971cc3c008442f256274c8e97ae12a1044", "author": {"user": {"login": "knn-k", "name": "KONNO Kazuhiro"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/22faf7971cc3c008442f256274c8e97ae12a1044", "committedDate": "2020-02-27T07:39:31Z", "message": "AArch64: Fix for monitorEnter/monitorExit snippets\n\nThis code fixes the code generation of monitorEnter/monitorExit\nsnippets for AArch64.  Encoding of the immediate value for the\nandimmx instruction was wrong.\n\nAlso fixing some typos.\n\nSigned-off-by: KONNO Kazuhiro <konno@jp.ibm.com>"}, "afterCommit": {"oid": "9746a65575bd6995b065ed386bacbfa6cc3d1a26", "author": {"user": {"login": "knn-k", "name": "KONNO Kazuhiro"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/9746a65575bd6995b065ed386bacbfa6cc3d1a26", "committedDate": "2020-02-28T02:40:09Z", "message": "AArch64: Fix for monitorEnter/monitorExit snippets\n\nThis code fixes the code generation of monitorEnter/monitorExit\nsnippets for AArch64.\n\n- Encoding of the immediate value for the andimmx instruction was wrong\n- The mask used in monitorExit was wrong\n\nAlso fixing some typos.\n\nSigned-off-by: KONNO Kazuhiro <konno@jp.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "60400e1625624be9cb5b847b131ea3c6e921f4c3", "author": {"user": {"login": "knn-k", "name": "KONNO Kazuhiro"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/60400e1625624be9cb5b847b131ea3c6e921f4c3", "committedDate": "2020-02-28T02:51:02Z", "message": "AArch64: Fix for monitorEnter/monitorExit snippets\n\nThis code fixes the code generation of monitorEnter/monitorExit\nsnippets for AArch64.\n\n- Encoding of the immediate value for the andimmx instruction was wrong\n- The mask used in monitorExit was wrong\n\nAlso fixing some typos.\n\nSigned-off-by: KONNO Kazuhiro <konno@jp.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9746a65575bd6995b065ed386bacbfa6cc3d1a26", "author": {"user": {"login": "knn-k", "name": "KONNO Kazuhiro"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/9746a65575bd6995b065ed386bacbfa6cc3d1a26", "committedDate": "2020-02-28T02:40:09Z", "message": "AArch64: Fix for monitorEnter/monitorExit snippets\n\nThis code fixes the code generation of monitorEnter/monitorExit\nsnippets for AArch64.\n\n- Encoding of the immediate value for the andimmx instruction was wrong\n- The mask used in monitorExit was wrong\n\nAlso fixing some typos.\n\nSigned-off-by: KONNO Kazuhiro <konno@jp.ibm.com>"}, "afterCommit": {"oid": "60400e1625624be9cb5b847b131ea3c6e921f4c3", "author": {"user": {"login": "knn-k", "name": "KONNO Kazuhiro"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/60400e1625624be9cb5b847b131ea3c6e921f4c3", "committedDate": "2020-02-28T02:51:02Z", "message": "AArch64: Fix for monitorEnter/monitorExit snippets\n\nThis code fixes the code generation of monitorEnter/monitorExit\nsnippets for AArch64.\n\n- Encoding of the immediate value for the andimmx instruction was wrong\n- The mask used in monitorExit was wrong\n\nAlso fixing some typos.\n\nSigned-off-by: KONNO Kazuhiro <konno@jp.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MzY3NTAy", "url": "https://github.com/eclipse-openj9/openj9/pull/8672#pullrequestreview-366367502", "createdAt": "2020-02-28T12:38:01Z", "commit": {"oid": "60400e1625624be9cb5b847b131ea3c6e921f4c3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 607, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}