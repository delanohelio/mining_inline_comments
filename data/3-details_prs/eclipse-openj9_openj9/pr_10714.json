{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkzNjE5MTM2", "number": 10714, "title": "Add double map API to OSX", "bodyText": "Update call to double map API\nDepends on: eclipse/omr#5580\nSigned-off-by: Igor Braga higorb1@gmail.com", "createdAt": "2020-09-26T19:36:04Z", "url": "https://github.com/eclipse-openj9/openj9/pull/10714", "merged": true, "mergeCommit": {"oid": "71c942fe2e9f673f2ab85534a065e0734c88f94b"}, "closed": true, "closedAt": "2020-11-03T14:46:40Z", "author": {"login": "bragaigor"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdVYjYqgFqTUxNTc5MzAzMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXptSYABqjM5NDIxODA1MjU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1NzkzMDMy", "url": "https://github.com/eclipse-openj9/openj9/pull/10714#pullrequestreview-515793032", "createdAt": "2020-10-23T15:46:00Z", "commit": {"oid": "b95e6075546b06f53d3dcf1b57b0c7b308cff383"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxNTo0NjowMVrOHnThow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QxNTo0NjowMVrOHnThow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDk3NjQxOQ==", "bodyText": "spelling: preferred", "url": "https://github.com/eclipse-openj9/openj9/pull/10714#discussion_r510976419", "createdAt": "2020-10-23T15:46:01Z", "author": {"login": "amicic"}, "path": "runtime/gc_base/IndexableObjectAllocationModel.cpp", "diffHunk": "@@ -305,12 +305,12 @@ MM_IndexableObjectAllocationModel::layoutDiscontiguousArraylet(MM_EnvironmentBas\n }\n \n #if defined(J9VM_GC_ENABLE_DOUBLE_MAP)\n-#if !(defined(LINUX) && defined(J9VM_ENV_DATA64))\n+#if !((defined(LINUX) || defined(OSX)) && defined(J9VM_ENV_DATA64))\n /* Double map is only supported on LINUX 64 bit Systems for now */\n #error \"Platform not supported by Double Map API\"\n-#endif /* !(defined(LINUX) && defined(J9VM_ENV_DATA64)) */\n+#endif /* !((defined(LINUX) || defined(OSX)) && defined(J9VM_ENV_DATA64)) */\n void * \n-MM_IndexableObjectAllocationModel::doubleMapArraylets(MM_EnvironmentBase *env, J9Object *objectPtr) \n+MM_IndexableObjectAllocationModel::doubleMapArraylets(MM_EnvironmentBase *env, J9Object *objectPtr, void *preferedAddress)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b95e6075546b06f53d3dcf1b57b0c7b308cff383"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1Nzk0MDg2", "url": "https://github.com/eclipse-openj9/openj9/pull/10714#pullrequestreview-515794086", "createdAt": "2020-10-23T15:47:16Z", "commit": {"oid": "b95e6075546b06f53d3dcf1b57b0c7b308cff383"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "90826e40191bbdfa04fe442d143909c220f31664", "author": {"user": {"login": "bragaigor", "name": "Igor Braga"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/90826e40191bbdfa04fe442d143909c220f31664", "committedDate": "2020-10-28T23:14:39Z", "message": "Fix spelling\n\nSigned-off-by: Igor Braga <higorb1@gmail.com>"}, "afterCommit": {"oid": "2a1e7508ad0c13c306717743d6a5bd0875fceef0", "author": {"user": {"login": "bragaigor", "name": "Igor Braga"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/2a1e7508ad0c13c306717743d6a5bd0875fceef0", "committedDate": "2020-10-28T23:32:57Z", "message": "Fix spelling\n\nSigned-off-by: Igor Braga <higorb1@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2a1e7508ad0c13c306717743d6a5bd0875fceef0", "author": {"user": {"login": "bragaigor", "name": "Igor Braga"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/2a1e7508ad0c13c306717743d6a5bd0875fceef0", "committedDate": "2020-10-28T23:32:57Z", "message": "Fix spelling\n\nSigned-off-by: Igor Braga <higorb1@gmail.com>"}, "afterCommit": {"oid": "1caf1aaf622cc771f79cd4da656c78acd14b6262", "author": {"user": {"login": "bragaigor", "name": "Igor Braga"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/1caf1aaf622cc771f79cd4da656c78acd14b6262", "committedDate": "2020-10-29T18:15:32Z", "message": "Add double map API to OSX\n\nUpdate call to double map API\n\nDepends on: https://github.com/eclipse/omr/pull/5580\n\nSigned-off-by: Igor Braga <higorb1@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwNzMxNTY3", "url": "https://github.com/eclipse-openj9/openj9/pull/10714#pullrequestreview-520731567", "createdAt": "2020-10-30T14:39:09Z", "commit": {"oid": "1caf1aaf622cc771f79cd4da656c78acd14b6262"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxNDozOToxMFrOHrR99Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxNDozOToxMFrOHrR99Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTE0NTIwNQ==", "bodyText": "Minor rant.... This mapping is probably unnecessary, since at the call site we could create OMR PortLib instance and call OMR API directly .\nWe already have many instances in OpenJ9 code that we do such things (use directly OMR API of different sorts), but we also have already pre-existing OpenJ9-to-OMR mapping in this file.\nI don't know what's a preferred way with newly introduced APIs. I prefer simplicity (and avoid this mapping). @pshipton @DanHeidinga, opinion?", "url": "https://github.com/eclipse-openj9/openj9/pull/10714#discussion_r515145205", "createdAt": "2020-10-30T14:39:10Z", "author": {"login": "amicic"}, "path": "runtime/oti/j9port_generated.h", "diffHunk": "@@ -582,6 +582,7 @@ extern J9_CFUNC int32_t j9port_isCompatible(struct J9PortLibraryVersion *expecte\n #define j9vmem_commit_memory(param1,param2,param3) OMRPORT_FROM_J9PORT(privatePortLibrary)->vmem_commit_memory(OMRPORT_FROM_J9PORT(privatePortLibrary),param1,param2,param3)\n #define j9vmem_decommit_memory(param1,param2,param3) OMRPORT_FROM_J9PORT(privatePortLibrary)->vmem_decommit_memory(OMRPORT_FROM_J9PORT(privatePortLibrary),param1,param2,param3)\n #define j9vmem_free_memory(param1,param2,param3) OMRPORT_FROM_J9PORT(privatePortLibrary)->vmem_free_memory(OMRPORT_FROM_J9PORT(privatePortLibrary),param1,param2,param3)\n+#define j9vmem_release_double_mapped_region(param1,param2,param3) OMRPORT_FROM_J9PORT(privatePortLibrary)->vmem_release_double_mapped_region(OMRPORT_FROM_J9PORT(privatePortLibrary),param1,param2,param3)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1caf1aaf622cc771f79cd4da656c78acd14b6262"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3254aea5f06804a186ad3f96b16d4b23529b242", "author": {"user": {"login": "bragaigor", "name": "Igor Braga"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c3254aea5f06804a186ad3f96b16d4b23529b242", "committedDate": "2020-10-30T16:52:12Z", "message": "Add double map API to OSX\n\nUpdate call to double map API\n\nDepends on: https://github.com/eclipse/omr/pull/5580\n\nSigned-off-by: Igor Braga <higorb1@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1caf1aaf622cc771f79cd4da656c78acd14b6262", "author": {"user": {"login": "bragaigor", "name": "Igor Braga"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/1caf1aaf622cc771f79cd4da656c78acd14b6262", "committedDate": "2020-10-29T18:15:32Z", "message": "Add double map API to OSX\n\nUpdate call to double map API\n\nDepends on: https://github.com/eclipse/omr/pull/5580\n\nSigned-off-by: Igor Braga <higorb1@gmail.com>"}, "afterCommit": {"oid": "c3254aea5f06804a186ad3f96b16d4b23529b242", "author": {"user": {"login": "bragaigor", "name": "Igor Braga"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c3254aea5f06804a186ad3f96b16d4b23529b242", "committedDate": "2020-10-30T16:52:12Z", "message": "Add double map API to OSX\n\nUpdate call to double map API\n\nDepends on: https://github.com/eclipse/omr/pull/5580\n\nSigned-off-by: Igor Braga <higorb1@gmail.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 319, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}