{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0MjAzOTgy", "number": 10351, "title": "Selectively enforce lookup class package check", "bodyText": "Only following APIs are subject to lookup class package check (matching RI behaviours):\nMethodHandles.Lookup.in\u200b(Class<?> lookupClass)\nMethodHandles.Lookup.dropLookupMode\u200b(int modeToDrop)\nMethodHandles.Lookup.privateLookupIn\u200b(Class<?> targetClass, MethodHandles.Lookup caller)\n\nThe change only applies to JDK15+. The package check stays same for pre-JDK15 levels.\nSigned-off-by: Jason Feng fengj@ca.ibm.com", "createdAt": "2020-08-06T18:48:49Z", "url": "https://github.com/eclipse-openj9/openj9/pull/10351", "merged": true, "mergeCommit": {"oid": "f5d1b83ff3068da44d45ca6121756e742d3a5a33"}, "closed": true, "closedAt": "2020-08-08T20:21:17Z", "author": {"login": "JasonFengJ9"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8kCFkAFqTQ2MzI5MTA5Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc84Ni4gFqTQ2MzgwMDI1OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzMjkxMDky", "url": "https://github.com/eclipse-openj9/openj9/pull/10351#pullrequestreview-463291092", "createdAt": "2020-08-07T12:59:09Z", "commit": {"oid": "569fcd3b508b99def7c95a2592303379fe228ddf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxMjo1OTowOVrOG9Y5Aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wN1QxMjo1OTowOVrOG9Y5Aw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzAyNDEzMQ==", "bodyText": "@JasonFengJ9 I would rather the callers of the Lookup ctors made an explicit choice to either pass the default or set the as required for their call.\nA method that passes thru and drops the argument is confusing and makes the code harder to reason about.\nThis method should be to get the default for the release - that's why it has Default in it's name :)\nprivate static boolean lookupJLIPackageCheckDefault()", "url": "https://github.com/eclipse-openj9/openj9/pull/10351#discussion_r467024131", "createdAt": "2020-08-07T12:59:09Z", "author": {"login": "DanHeidinga"}, "path": "jcl/src/java.base/share/classes/java/lang/invoke/MethodHandles.java", "diffHunk": "@@ -215,12 +215,23 @@\n \t\t\taccessMode = lookupMode;\n \t\t}\n \t\t\n+\t\t/* For Java 15, the default is not to check for the \"java.lang.invoke\" package.\n+\t\t * For earlier releases, these lookups are illegal\n+\t\t  */\n+\t\tprivate static boolean lookupJLIPackageCheckDefault(boolean doCheck) {\n+\t\t\t/*[IF Java15]\n+\t\t\treturn false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "569fcd3b508b99def7c95a2592303379fe228ddf"}, "originalPosition": 9}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "569fcd3b508b99def7c95a2592303379fe228ddf", "author": {"user": {"login": "JasonFengJ9", "name": "Jason Feng"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/569fcd3b508b99def7c95a2592303379fe228ddf", "committedDate": "2020-08-06T18:47:02Z", "message": "Selectively enforce lookup class package check\n\nOnly following APIs are subject to lookup class package check (matching\nRI behaviours):\n\nMethodHandles.Lookup.in\u200b(Class<?> lookupClass)\nMethodHandles.Lookup.dropLookupMode\u200b(int modeToDrop)\nMethodHandles.Lookup.privateLookupIn\u200b(Class<?> targetClass,\nMethodHandles.Lookup caller)\nThe change only applies to JDK15. The package check stays same for\npre-JDK15 levels.\n\nSigned-off-by: Jason Feng <fengj@ca.ibm.com>"}, "afterCommit": {"oid": "35641b4a37a92a9de01f912a5d779d759ea38ec9", "author": {"user": {"login": "JasonFengJ9", "name": "Jason Feng"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/35641b4a37a92a9de01f912a5d779d759ea38ec9", "committedDate": "2020-08-07T14:03:37Z", "message": "Selectively enforce lookup class package check\n\nOnly following APIs are subject to lookup class package check (matching\nRI behaviours):\n\nMethodHandles.Lookup.in\u200b(Class<?> lookupClass)\nMethodHandles.Lookup.dropLookupMode\u200b(int modeToDrop)\nMethodHandles.Lookup.privateLookupIn\u200b(Class<?> targetClass,\nMethodHandles.Lookup caller)\nThe change only applies to JDK15. The package check stays same for\npre-JDK15 levels.\n\nSigned-off-by: Jason Feng <fengj@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzMzUyMjUx", "url": "https://github.com/eclipse-openj9/openj9/pull/10351#pullrequestreview-463352251", "createdAt": "2020-08-07T14:20:41Z", "commit": {"oid": "35641b4a37a92a9de01f912a5d779d759ea38ec9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "514b23b3dae59d5dae3916dddbaa1b2abc86722b", "author": {"user": {"login": "JasonFengJ9", "name": "Jason Feng"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/514b23b3dae59d5dae3916dddbaa1b2abc86722b", "committedDate": "2020-08-07T18:35:35Z", "message": "Selectively enforce lookup class package check\n\nOnly following APIs are subject to lookup class package check (matching\nRI behaviours):\n\nMethodHandles.Lookup.in\u200b(Class<?> lookupClass)\nMethodHandles.Lookup.dropLookupMode\u200b(int modeToDrop)\nMethodHandles.Lookup.privateLookupIn\u200b(Class<?> targetClass,\nMethodHandles.Lookup caller)\nThe change only applies to JDK15. The package check stays same for\npre-JDK15 levels.\n\nSigned-off-by: Jason Feng <fengj@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "35641b4a37a92a9de01f912a5d779d759ea38ec9", "author": {"user": {"login": "JasonFengJ9", "name": "Jason Feng"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/35641b4a37a92a9de01f912a5d779d759ea38ec9", "committedDate": "2020-08-07T14:03:37Z", "message": "Selectively enforce lookup class package check\n\nOnly following APIs are subject to lookup class package check (matching\nRI behaviours):\n\nMethodHandles.Lookup.in\u200b(Class<?> lookupClass)\nMethodHandles.Lookup.dropLookupMode\u200b(int modeToDrop)\nMethodHandles.Lookup.privateLookupIn\u200b(Class<?> targetClass,\nMethodHandles.Lookup caller)\nThe change only applies to JDK15. The package check stays same for\npre-JDK15 levels.\n\nSigned-off-by: Jason Feng <fengj@ca.ibm.com>"}, "afterCommit": {"oid": "514b23b3dae59d5dae3916dddbaa1b2abc86722b", "author": {"user": {"login": "JasonFengJ9", "name": "Jason Feng"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/514b23b3dae59d5dae3916dddbaa1b2abc86722b", "committedDate": "2020-08-07T18:35:35Z", "message": "Selectively enforce lookup class package check\n\nOnly following APIs are subject to lookup class package check (matching\nRI behaviours):\n\nMethodHandles.Lookup.in\u200b(Class<?> lookupClass)\nMethodHandles.Lookup.dropLookupMode\u200b(int modeToDrop)\nMethodHandles.Lookup.privateLookupIn\u200b(Class<?> targetClass,\nMethodHandles.Lookup caller)\nThe change only applies to JDK15. The package check stays same for\npre-JDK15 levels.\n\nSigned-off-by: Jason Feng <fengj@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzODAwMjU5", "url": "https://github.com/eclipse-openj9/openj9/pull/10351#pullrequestreview-463800259", "createdAt": "2020-08-08T12:31:01Z", "commit": {"oid": "514b23b3dae59d5dae3916dddbaa1b2abc86722b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 99, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}