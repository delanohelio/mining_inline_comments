{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2ODA5Nzg0", "number": 9530, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxMzoxMzo1MlrOEAFeEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxMzoxMzo1MlrOEAFeEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY4NTI1MDcyOnYy", "diffSide": "RIGHT", "path": "runtime/compiler/env/ProcessorDetection.cpp", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxMzoxMzo1MlrOGbJOEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxMzoyMTowOFrOGbJxjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTExNTc5Mw==", "bodyText": "older version of OpenJ9 cannot recognize P10 such that it is only an Unknown processor (i.e. DefaultProcessor). This code on P10Processor never kicks in anyway such that It is unnecessary.", "url": "https://github.com/eclipse-openj9/openj9/pull/9530#discussion_r431115793", "createdAt": "2020-05-27T13:13:52Z", "author": {"login": "zl-wang"}, "path": "runtime/compiler/env/ProcessorDetection.cpp", "diffHunk": "@@ -269,6 +269,20 @@ TR_Processor mapJ9Processor(J9ProcessorArchitecture j9processor)\n       case PROCESSOR_PPC_P9:\n          tp = TR_PPCp9;\n          break;\n+      case PROCESSOR_PPC_P10:\n+         // P10 support is not yet well-tested, so it's currently gated behind an environment\n+         // variable to prevent it from being used by accident by users who use old versions of\n+         // OpenJ9 once P10 chips become available.\n+         if (jitConfig)\n+            {\n+            static bool enableP10 = feGetEnv(\"TR_EnableExperimentalPower10Support\");\n+            tp = enableP10 ? TR_PPCp10 : TR_PPCp9;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3df7c5c4ffc50de9051f6e04a6d83609cd65c816"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTEyMzgzMg==", "bodyText": "Sorry, I should clarify: by \"older versions\", I'm referring to versions that will be released between when this PR is merged and when the P10 support is fully tested and verified. If a user were to try and use one of those builds on a newer machine with a POWER10 chip, OpenJ9 would recognize it and enable the new features, despite them having not yet undergone testing.", "url": "https://github.com/eclipse-openj9/openj9/pull/9530#discussion_r431123832", "createdAt": "2020-05-27T13:20:19Z", "author": {"login": "aviansie-ben"}, "path": "runtime/compiler/env/ProcessorDetection.cpp", "diffHunk": "@@ -269,6 +269,20 @@ TR_Processor mapJ9Processor(J9ProcessorArchitecture j9processor)\n       case PROCESSOR_PPC_P9:\n          tp = TR_PPCp9;\n          break;\n+      case PROCESSOR_PPC_P10:\n+         // P10 support is not yet well-tested, so it's currently gated behind an environment\n+         // variable to prevent it from being used by accident by users who use old versions of\n+         // OpenJ9 once P10 chips become available.\n+         if (jitConfig)\n+            {\n+            static bool enableP10 = feGetEnv(\"TR_EnableExperimentalPower10Support\");\n+            tp = enableP10 ? TR_PPCp10 : TR_PPCp9;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTExNTc5Mw=="}, "originalCommit": {"oid": "3df7c5c4ffc50de9051f6e04a6d83609cd65c816"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTEyNDg3Nw==", "bodyText": "providing a testing knob might make more senses, before it is enabled by default.", "url": "https://github.com/eclipse-openj9/openj9/pull/9530#discussion_r431124877", "createdAt": "2020-05-27T13:21:08Z", "author": {"login": "zl-wang"}, "path": "runtime/compiler/env/ProcessorDetection.cpp", "diffHunk": "@@ -269,6 +269,20 @@ TR_Processor mapJ9Processor(J9ProcessorArchitecture j9processor)\n       case PROCESSOR_PPC_P9:\n          tp = TR_PPCp9;\n          break;\n+      case PROCESSOR_PPC_P10:\n+         // P10 support is not yet well-tested, so it's currently gated behind an environment\n+         // variable to prevent it from being used by accident by users who use old versions of\n+         // OpenJ9 once P10 chips become available.\n+         if (jitConfig)\n+            {\n+            static bool enableP10 = feGetEnv(\"TR_EnableExperimentalPower10Support\");\n+            tp = enableP10 ? TR_PPCp10 : TR_PPCp9;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTExNTc5Mw=="}, "originalCommit": {"oid": "3df7c5c4ffc50de9051f6e04a6d83609cd65c816"}, "originalPosition": 11}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 148, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}