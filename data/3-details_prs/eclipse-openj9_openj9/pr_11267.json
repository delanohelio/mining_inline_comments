{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI2Nzg4Mjk0", "number": 11267, "title": "Add a stub for NativeMethodHandle in JDK16", "bodyText": "fixes: #11255\nSigned-off-by: Babneet Singh sbabneet@ca.ibm.com", "createdAt": "2020-11-24T21:09:42Z", "url": "https://github.com/eclipse-openj9/openj9/pull/11267", "merged": true, "mergeCommit": {"oid": "a3d9657d62fdb4ec05c4b945d2ca335677981ecc"}, "closed": true, "closedAt": "2020-11-25T16:17:29Z", "author": {"login": "babsingh"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdfxOhjAFqTUzODAwNzM1Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdf--QSAFqTUzODUzMDI5Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4MDA3MzU2", "url": "https://github.com/eclipse-openj9/openj9/pull/11267#pullrequestreview-538007356", "createdAt": "2020-11-24T22:07:53Z", "commit": {"oid": "12dd2aa48fe20f5eb77893b0d99e4a08dcece337"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQyMjowNzo1M1rOH5Xxlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQyMjowOTo1M1rOH5X6HA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTkyMDQwNg==", "bodyText": "All uses of OpenJDKCompileStubThrowError() should be in a throw statement:\n  throw OpenJDKCompileStub.OpenJDKCompileStubThrowError();", "url": "https://github.com/eclipse-openj9/openj9/pull/11267#discussion_r529920406", "createdAt": "2020-11-24T22:07:53Z", "author": {"login": "keithc-ca"}, "path": "jcl/src/java.base/share/classes/java/lang/invoke/NativeMethodHandle.java", "diffHunk": "@@ -112,3 +113,25 @@ void compareWithNative(NativeMethodHandle left, Comparator c) {\n \t\tc.compareStructuralParameter(left.vmSlot, this.vmSlot);\n \t}\n }\n+/*[ELSE]*/\n+import java.util.List;\n+import jdk.internal.invoke.NativeEntryPoint;\n+\n+class NativeMethodHandle extends MethodHandle {\n+\tpublic static MethodHandle make(NativeEntryPoint entryPoint, MethodHandle mh) {\n+\t\tOpenJDKCompileStub.OpenJDKCompileStubThrowError();\n+\t\treturn null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12dd2aa48fe20f5eb77893b0d99e4a08dcece337"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTkyMTAzMw==", "bodyText": "This should repeat the condition:\n/*[ELSE] Panama */", "url": "https://github.com/eclipse-openj9/openj9/pull/11267#discussion_r529921033", "createdAt": "2020-11-24T22:08:30Z", "author": {"login": "keithc-ca"}, "path": "jcl/src/java.base/share/classes/java/lang/invoke/NativeMethodHandle.java", "diffHunk": "@@ -112,3 +113,25 @@ void compareWithNative(NativeMethodHandle left, Comparator c) {\n \t\tc.compareStructuralParameter(left.vmSlot, this.vmSlot);\n \t}\n }\n+/*[ELSE]*/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12dd2aa48fe20f5eb77893b0d99e4a08dcece337"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTkyMjU4OA==", "bodyText": "Please use spaces around binary operators, just like you would in C code:\n/*[INCLUDE-IF Panama | (JAVA_SPEC_VERSION >= 16)]*/", "url": "https://github.com/eclipse-openj9/openj9/pull/11267#discussion_r529922588", "createdAt": "2020-11-24T22:09:53Z", "author": {"login": "keithc-ca"}, "path": "jcl/src/java.base/share/classes/java/lang/invoke/NativeMethodHandle.java", "diffHunk": "@@ -1,4 +1,4 @@\n-/*[INCLUDE-IF Panama]*/\n+/*[INCLUDE-IF Panama|(JAVA_SPEC_VERSION >= 16)]*/", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12dd2aa48fe20f5eb77893b0d99e4a08dcece337"}, "originalPosition": 2}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "12dd2aa48fe20f5eb77893b0d99e4a08dcece337", "author": {"user": {"login": "babsingh", "name": "Babneet Singh"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/12dd2aa48fe20f5eb77893b0d99e4a08dcece337", "committedDate": "2020-11-24T20:50:05Z", "message": "Add a stub for NativeMethodHandle in JDK16\n\nfixes: https://github.com/eclipse/openj9/issues/11255\n\nSigned-off-by: Babneet Singh <sbabneet@ca.ibm.com>"}, "afterCommit": {"oid": "6d80b3b73bce482ba5a67177dd4bd7e752515161", "author": {"user": {"login": "babsingh", "name": "Babneet Singh"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/6d80b3b73bce482ba5a67177dd4bd7e752515161", "committedDate": "2020-11-24T22:53:55Z", "message": "Add a stub for NativeMethodHandle in JDK16\n\nfixes: https://github.com/eclipse/openj9/issues/11255\n\nSigned-off-by: Babneet Singh <sbabneet@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4MDM0OTY3", "url": "https://github.com/eclipse-openj9/openj9/pull/11267#pullrequestreview-538034967", "createdAt": "2020-11-24T22:58:28Z", "commit": {"oid": "6d80b3b73bce482ba5a67177dd4bd7e752515161"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQyMjo1ODoyOVrOH5bBUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNFQyMjo1ODoyOVrOH5bBUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTk3MzU4NA==", "bodyText": "This won't compile: the return here (and in addRelatedMHs()) is unreachable.", "url": "https://github.com/eclipse-openj9/openj9/pull/11267#discussion_r529973584", "createdAt": "2020-11-24T22:58:29Z", "author": {"login": "keithc-ca"}, "path": "jcl/src/java.base/share/classes/java/lang/invoke/NativeMethodHandle.java", "diffHunk": "@@ -112,3 +113,25 @@ void compareWithNative(NativeMethodHandle left, Comparator c) {\n \t\tc.compareStructuralParameter(left.vmSlot, this.vmSlot);\n \t}\n }\n+/*[ELSE] Panama */\n+import java.util.List;\n+import jdk.internal.invoke.NativeEntryPoint;\n+\n+class NativeMethodHandle extends MethodHandle {\n+\tpublic static MethodHandle make(NativeEntryPoint entryPoint, MethodHandle mh) {\n+\t\tthrow OpenJDKCompileStub.OpenJDKCompileStubThrowError();\n+\t\treturn null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d80b3b73bce482ba5a67177dd4bd7e752515161"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "790c0ef24012b61437f914dfbd0c198ae5861ab2", "author": {"user": {"login": "babsingh", "name": "Babneet Singh"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/790c0ef24012b61437f914dfbd0c198ae5861ab2", "committedDate": "2020-11-24T23:09:01Z", "message": "Add a stub for NativeMethodHandle in JDK16\n\nfixes: https://github.com/eclipse/openj9/issues/11255\n\nSigned-off-by: Babneet Singh <sbabneet@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6d80b3b73bce482ba5a67177dd4bd7e752515161", "author": {"user": {"login": "babsingh", "name": "Babneet Singh"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/6d80b3b73bce482ba5a67177dd4bd7e752515161", "committedDate": "2020-11-24T22:53:55Z", "message": "Add a stub for NativeMethodHandle in JDK16\n\nfixes: https://github.com/eclipse/openj9/issues/11255\n\nSigned-off-by: Babneet Singh <sbabneet@ca.ibm.com>"}, "afterCommit": {"oid": "790c0ef24012b61437f914dfbd0c198ae5861ab2", "author": {"user": {"login": "babsingh", "name": "Babneet Singh"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/790c0ef24012b61437f914dfbd0c198ae5861ab2", "committedDate": "2020-11-24T23:09:01Z", "message": "Add a stub for NativeMethodHandle in JDK16\n\nfixes: https://github.com/eclipse/openj9/issues/11255\n\nSigned-off-by: Babneet Singh <sbabneet@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4NTMwMjk3", "url": "https://github.com/eclipse-openj9/openj9/pull/11267#pullrequestreview-538530297", "createdAt": "2020-11-25T14:11:00Z", "commit": {"oid": "790c0ef24012b61437f914dfbd0c198ae5861ab2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1651, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}