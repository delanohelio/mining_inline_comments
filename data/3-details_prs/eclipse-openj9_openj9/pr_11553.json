{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ3MDkyNzg3", "number": 11553, "title": "Add Involuntary OSR support for AOT", "bodyText": "Depends on (and therefore currently contains commits from) #11552\nSee #4849 for details, specifically about Involuntary OSR.\nThe PR adds\n\nSome refactoring changes wrt getting the AOT method entry from the SCC.\nValidation to ensure the emergency buffer for OSR is sufficient for the method to be loaded prior to loading it.", "createdAt": "2020-12-30T21:27:06Z", "url": "https://github.com/eclipse-openj9/openj9/pull/11553", "merged": true, "mergeCommit": {"oid": "eea5afd5461b62899b47e11eb3404e8a3835f78c"}, "closed": true, "closedAt": "2021-02-06T03:40:48Z", "author": {"login": "dsouzai"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdt8Rw2ABqjQxODIwNTcxMzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABd3OFtxgFqTU4NDYxMzM2Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1af0557c3ec708e84aa50f985510a24611f5682c", "author": {"user": {"login": "dsouzai", "name": "Irwin D'Souza"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/1af0557c3ec708e84aa50f985510a24611f5682c", "committedDate": "2020-12-30T21:19:08Z", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>"}, "afterCommit": {"oid": "074daa6604c50d73ad9edc7402f69cead2b4914d", "author": {"user": {"login": "dsouzai", "name": "Irwin D'Souza"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/074daa6604c50d73ad9edc7402f69cead2b4914d", "committedDate": "2021-01-07T22:04:32Z", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "074daa6604c50d73ad9edc7402f69cead2b4914d", "author": {"user": {"login": "dsouzai", "name": "Irwin D'Souza"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/074daa6604c50d73ad9edc7402f69cead2b4914d", "committedDate": "2021-01-07T22:04:32Z", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>"}, "afterCommit": {"oid": "fcd56f371a26351ad3d3cc0709bbf29762655a4f", "author": {"user": {"login": "dsouzai", "name": "Irwin D'Souza"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/fcd56f371a26351ad3d3cc0709bbf29762655a4f", "committedDate": "2021-01-08T19:04:39Z", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fcd56f371a26351ad3d3cc0709bbf29762655a4f", "author": {"user": {"login": "dsouzai", "name": "Irwin D'Souza"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/fcd56f371a26351ad3d3cc0709bbf29762655a4f", "committedDate": "2021-01-08T19:04:39Z", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>"}, "afterCommit": {"oid": "c5ec710cc2241a6bc24665ee26a781b8f66958de", "author": {"user": {"login": "dsouzai", "name": "Irwin D'Souza"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c5ec710cc2241a6bc24665ee26a781b8f66958de", "committedDate": "2021-01-14T16:38:06Z", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c5ec710cc2241a6bc24665ee26a781b8f66958de", "author": {"user": {"login": "dsouzai", "name": "Irwin D'Souza"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/c5ec710cc2241a6bc24665ee26a781b8f66958de", "committedDate": "2021-01-14T16:38:06Z", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>"}, "afterCommit": {"oid": "d090f66fd4bb8949db993d3a845e9fc9f0601345", "author": {"user": {"login": "dsouzai", "name": "Irwin D'Souza"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/d090f66fd4bb8949db993d3a845e9fc9f0601345", "committedDate": "2021-01-14T17:12:29Z", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d090f66fd4bb8949db993d3a845e9fc9f0601345", "author": {"user": {"login": "dsouzai", "name": "Irwin D'Souza"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/d090f66fd4bb8949db993d3a845e9fc9f0601345", "committedDate": "2021-01-14T17:12:29Z", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>"}, "afterCommit": {"oid": "3613dc0d9495ed9bcec54ec400076c9be3f603b6", "author": {"user": {"login": "dsouzai", "name": "Irwin D'Souza"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/3613dc0d9495ed9bcec54ec400076c9be3f603b6", "committedDate": "2021-01-15T22:00:16Z", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3613dc0d9495ed9bcec54ec400076c9be3f603b6", "author": {"user": {"login": "dsouzai", "name": "Irwin D'Souza"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/3613dc0d9495ed9bcec54ec400076c9be3f603b6", "committedDate": "2021-01-15T22:00:16Z", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>"}, "afterCommit": {"oid": "944bb812d11aaf8c116644fba1f0d34a06d9e04e", "author": {"user": {"login": "dsouzai", "name": "Irwin D'Souza"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/944bb812d11aaf8c116644fba1f0d34a06d9e04e", "committedDate": "2021-01-15T22:09:57Z", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "944bb812d11aaf8c116644fba1f0d34a06d9e04e", "author": {"user": {"login": "dsouzai", "name": "Irwin D'Souza"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/944bb812d11aaf8c116644fba1f0d34a06d9e04e", "committedDate": "2021-01-15T22:09:57Z", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>"}, "afterCommit": {"oid": "e7f086c97a258224d22dffafe8880526f7a8fda9", "author": {"user": {"login": "dsouzai", "name": "Irwin D'Souza"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e7f086c97a258224d22dffafe8880526f7a8fda9", "committedDate": "2021-01-20T16:25:34Z", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e7f086c97a258224d22dffafe8880526f7a8fda9", "author": {"user": {"login": "dsouzai", "name": "Irwin D'Souza"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/e7f086c97a258224d22dffafe8880526f7a8fda9", "committedDate": "2021-01-20T16:25:34Z", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>"}, "afterCommit": {"oid": "0175e0e1075c73e7be40ed448940c2f5e6b1ce11", "author": {"user": {"login": "dsouzai", "name": "Irwin D'Souza"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/0175e0e1075c73e7be40ed448940c2f5e6b1ce11", "committedDate": "2021-01-21T22:49:41Z", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0175e0e1075c73e7be40ed448940c2f5e6b1ce11", "author": {"user": {"login": "dsouzai", "name": "Irwin D'Souza"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/0175e0e1075c73e7be40ed448940c2f5e6b1ce11", "committedDate": "2021-01-21T22:49:41Z", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>"}, "afterCommit": {"oid": "2f47c96feaa82ee69bdea831595fe1cfb9e048de", "author": {"user": {"login": "dsouzai", "name": "Irwin D'Souza"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/2f47c96feaa82ee69bdea831595fe1cfb9e048de", "committedDate": "2021-01-25T15:39:42Z", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd8ebe5509b269c515f594b81950542c83d86db2", "author": {"user": {"login": "dsouzai", "name": "Irwin D'Souza"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/fd8ebe5509b269c515f594b81950542c83d86db2", "committedDate": "2021-01-29T15:15:19Z", "message": "Add API to get the AOT method header entry\n\nAdd an API to prevent doing manual pointer manipulation to get the AOT\nmethod header entry from the SCC.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9feaad57ad5af48fe2cf4de1001bec69f69bd146", "author": {"user": {"login": "dsouzai", "name": "Irwin D'Souza"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/9feaad57ad5af48fe2cf4de1001bec69f69bd146", "committedDate": "2021-01-29T15:15:19Z", "message": "Use new API when getting the AOT method entry from the SCC\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2f47c96feaa82ee69bdea831595fe1cfb9e048de", "author": {"user": {"login": "dsouzai", "name": "Irwin D'Souza"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/2f47c96feaa82ee69bdea831595fe1cfb9e048de", "committedDate": "2021-01-25T15:39:42Z", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>"}, "afterCommit": {"oid": "291e49fd005f26d30688d41a682935fdba8877f1", "author": {"user": {"login": "dsouzai", "name": "Irwin D'Souza"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/291e49fd005f26d30688d41a682935fdba8877f1", "committedDate": "2021-01-29T15:15:19Z", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTg0NTg1ODA0", "url": "https://github.com/eclipse-openj9/openj9/pull/11553#pullrequestreview-584585804", "createdAt": "2021-02-05T18:11:05Z", "commit": {"oid": "2b53456aaf48c4cd319944ec0d9f58249c25eea4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wNVQxODoxMTowNVrOIgsn1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wNVQxODoxMTowNVrOIgsn1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MTE1NjQzNg==", "bodyText": "Do you why the unused exists? can be eliminated?\nAlso, for better packing and smaller headers we should probably move the flags after the last uint32_t entry.\nAlso, I think we need to bump TR_AOTMethodHeader_MajorVersion since its structure has changed.", "url": "https://github.com/eclipse-openj9/openj9/pull/11553#discussion_r571156436", "createdAt": "2021-02-05T18:11:05Z", "author": {"login": "mpirvu"}, "path": "runtime/compiler/runtime/J9Runtime.hpp", "diffHunk": "@@ -169,6 +169,12 @@ typedef struct TR_AOTMethodHeader {\n    uintptr_t compileMethodDataSize;\n    uintptr_t unused;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b53456aaf48c4cd319944ec0d9f58249c25eea4"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bdb38ad0a2b6742cd4158353d86256f1a624db3", "author": {"user": {"login": "dsouzai", "name": "Irwin D'Souza"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/2bdb38ad0a2b6742cd4158353d86256f1a624db3", "committedDate": "2021-02-05T18:32:49Z", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ae967372af0bfd04770cc30da41248f084756bd", "author": {"user": {"login": "dsouzai", "name": "Irwin D'Souza"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/2ae967372af0bfd04770cc30da41248f084756bd", "committedDate": "2021-02-05T18:33:58Z", "message": "Increment JITServer Minor Version\n\nChange in relocation requires a change to the minor version.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83455b031f1ee6f852f4e047c36603ee1888cd6a", "author": {"user": {"login": "dsouzai", "name": "Irwin D'Souza"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/83455b031f1ee6f852f4e047c36603ee1888cd6a", "committedDate": "2021-02-05T18:34:15Z", "message": "Update copyrights\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2b53456aaf48c4cd319944ec0d9f58249c25eea4", "author": {"user": {"login": "dsouzai", "name": "Irwin D'Souza"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/2b53456aaf48c4cd319944ec0d9f58249c25eea4", "committedDate": "2021-01-29T15:23:52Z", "message": "Update copyrights\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>"}, "afterCommit": {"oid": "83455b031f1ee6f852f4e047c36603ee1888cd6a", "author": {"user": {"login": "dsouzai", "name": "Irwin D'Souza"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/83455b031f1ee6f852f4e047c36603ee1888cd6a", "committedDate": "2021-02-05T18:34:15Z", "message": "Update copyrights\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTg0NjEzMzYz", "url": "https://github.com/eclipse-openj9/openj9/pull/11553#pullrequestreview-584613363", "createdAt": "2021-02-05T18:47:59Z", "commit": {"oid": "83455b031f1ee6f852f4e047c36603ee1888cd6a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1422, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}