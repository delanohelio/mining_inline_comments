{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkzMTEzODQ2", "number": 10700, "title": "Fix isConstructor for value type factory method", "bodyText": "Inline class values are created with static factory methods with method name <init>. <init> is also the method name for identity class constructor name. isConstructor() should return false for inline class value factory method.\nThanks to @hzongaro for helping find the incorrect return type info setup.", "createdAt": "2020-09-25T14:27:09Z", "url": "https://github.com/eclipse-openj9/openj9/pull/10700", "merged": true, "mergeCommit": {"oid": "ceb2c2d32c0c0b04946d2dacd47c5257bbb9bf22"}, "closed": true, "closedAt": "2020-10-01T14:41:36Z", "author": {"login": "a7ehuo"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdMXmoGAFqTQ5NjUzMTMzOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdN8vwXgFqTQ5OTQyNTQzOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2NTMxMzM4", "url": "https://github.com/eclipse-openj9/openj9/pull/10700#pullrequestreview-496531338", "createdAt": "2020-09-25T15:34:20Z", "commit": {"oid": "332076fcfbc65b9e7fc99c63fa8a8bcd2aa80895"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxNTozNDoyMFrOHYInlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQxNTozNDoyMFrOHYInlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTA2OTA3OA==", "bodyText": "do we need to case this? I would have thought these tests would always work for constructors? It might make sense from a compile-time perspective to do something like the strncmp last?", "url": "https://github.com/eclipse-openj9/openj9/pull/10700#discussion_r495069078", "createdAt": "2020-09-25T15:34:20Z", "author": {"login": "andrewcraik"}, "path": "runtime/compiler/env/j9method.cpp", "diffHunk": "@@ -5122,7 +5122,10 @@ TR_ResolvedJ9Method::methodModifiers()\n bool\n TR_ResolvedJ9Method::isConstructor()\n    {\n-   return nameLength()==6 && !strncmp(nameChars(), \"<init>\", 6);\n+   if (!TR::Compiler->om.areValueTypesEnabled())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "332076fcfbc65b9e7fc99c63fa8a8bcd2aa80895"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "332076fcfbc65b9e7fc99c63fa8a8bcd2aa80895", "author": {"user": {"login": "a7ehuo", "name": "Annabelle Huo"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/332076fcfbc65b9e7fc99c63fa8a8bcd2aa80895", "committedDate": "2020-09-24T19:26:12Z", "message": "Fix isConstructor for value type factory method\n\nInline class values are created with static factory\nmethods with method name <init>. <init> is also the method\nname for identity class constructor name. isConstructor()\nshould return false for inline class value factory method.\n\nSigned-off-by: Annabelle Huo <Annabelle.Huo@ibm.com>"}, "afterCommit": {"oid": "77eee88c3c4de378d26ea4ced69790e73e343f56", "author": {"user": {"login": "a7ehuo", "name": "Annabelle Huo"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/77eee88c3c4de378d26ea4ced69790e73e343f56", "committedDate": "2020-09-25T16:04:58Z", "message": "Fix isConstructor for value type factory method\n\nInline class values are created with static factory\nmethods with method name <init>. <init> is also the method\nname for identity class constructor name. isConstructor()\nshould return false for inline class value factory method.\n\nSigned-off-by: Annabelle Huo <Annabelle.Huo@ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2NTg0ODc1", "url": "https://github.com/eclipse-openj9/openj9/pull/10700#pullrequestreview-496584875", "createdAt": "2020-09-25T16:46:50Z", "commit": {"oid": "77eee88c3c4de378d26ea4ced69790e73e343f56"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2ODYxNDEy", "url": "https://github.com/eclipse-openj9/openj9/pull/10700#pullrequestreview-496861412", "createdAt": "2020-09-25T21:03:47Z", "commit": {"oid": "77eee88c3c4de378d26ea4ced69790e73e343f56"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8db2c30445fc2f4cc8e5ae7740aa18bb8740de3e", "author": {"user": {"login": "a7ehuo", "name": "Annabelle Huo"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/8db2c30445fc2f4cc8e5ae7740aa18bb8740de3e", "committedDate": "2020-09-28T20:53:21Z", "message": "Fix isConstructor for value type factory method\n\nInline class values are created with static factory\nmethods with method name <init>. <init> is also the method\nname for identity class constructor name. isConstructor()\nshould return false for inline class value factory method.\n\nSigned-off-by: Annabelle Huo <Annabelle.Huo@ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "77eee88c3c4de378d26ea4ced69790e73e343f56", "author": {"user": {"login": "a7ehuo", "name": "Annabelle Huo"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/77eee88c3c4de378d26ea4ced69790e73e343f56", "committedDate": "2020-09-25T16:04:58Z", "message": "Fix isConstructor for value type factory method\n\nInline class values are created with static factory\nmethods with method name <init>. <init> is also the method\nname for identity class constructor name. isConstructor()\nshould return false for inline class value factory method.\n\nSigned-off-by: Annabelle Huo <Annabelle.Huo@ibm.com>"}, "afterCommit": {"oid": "8db2c30445fc2f4cc8e5ae7740aa18bb8740de3e", "author": {"user": {"login": "a7ehuo", "name": "Annabelle Huo"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/8db2c30445fc2f4cc8e5ae7740aa18bb8740de3e", "committedDate": "2020-09-28T20:53:21Z", "message": "Fix isConstructor for value type factory method\n\nInline class values are created with static factory\nmethods with method name <init>. <init> is also the method\nname for identity class constructor name. isConstructor()\nshould return false for inline class value factory method.\n\nSigned-off-by: Annabelle Huo <Annabelle.Huo@ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5NDI1NDM5", "url": "https://github.com/eclipse-openj9/openj9/pull/10700#pullrequestreview-499425439", "createdAt": "2020-09-30T13:24:43Z", "commit": {"oid": "8db2c30445fc2f4cc8e5ae7740aa18bb8740de3e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 313, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}