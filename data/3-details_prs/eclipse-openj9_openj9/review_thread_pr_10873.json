{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAyNjU1Mzk5", "number": 10873, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMjoyMDoxM1rOEtdL9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMjoyMToxOVrOEtdNlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE2MDk5NTczOnYy", "diffSide": "RIGHT", "path": "runtime/nls/j9vm/j9vm.nls", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMjoyMDoxM1rOHhQMwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxNDoxNzowOVrOHhVWFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDYzMDQ2NQ==", "bodyText": "This should say 'Print JVM -Xsyslog help.'; all *.nls files seem to be missing that change.", "url": "https://github.com/eclipse-openj9/openj9/pull/10873#discussion_r504630465", "createdAt": "2020-10-14T12:20:13Z", "author": {"login": "keithc-ca"}, "path": "runtime/nls/j9vm/j9vm.nls", "diffHunk": "@@ -970,72 +970,72 @@ J9NLS_VM_XSCDMX_IGNORED.system_action=-Xscdmx will be ignored.\n J9NLS_VM_XSCDMX_IGNORED.user_response=Ignore this message, remove -Xscdmx, or enable -Xshareclasses.\n # END NON-TRANSLATABLE\n \n-# Help text for the -Xlog option. Note: please do not translate the text of the option flags: help, all, none, warn, error, info, config, vital\n+# Help text for the -Xsyslog option. Note: please do not translate the text of the option flags: help, all, none, warn, error, info, config, vital\n J9NLS_VM_XLOG_HELP01=\\nUsage:\\n\n # START NON-TRANSLATABLE\n J9NLS_VM_XLOG_HELP01.explanation=NOTAG\n J9NLS_VM_XLOG_HELP01.system_action=\n J9NLS_VM_XLOG_HELP01.user_response=\n # END NON-TRANSLATABLE\n \n-# -Xlog:help is not translatable\n-J9NLS_VM_XLOG_HELP02=  -Xlog:help              Print JVM -Xlog help.\n+# -Xsyslog:help is not translatable\n+J9NLS_VM_XLOG_HELP02=  -Xsyslog:help              Print JVM -Xlog help.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f96d8e5b573d971b205bfb9d30aa5b10f51bbc86"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDcxNDc3Mw==", "bodyText": "Updated", "url": "https://github.com/eclipse-openj9/openj9/pull/10873#discussion_r504714773", "createdAt": "2020-10-14T14:17:09Z", "author": {"login": "pshipton"}, "path": "runtime/nls/j9vm/j9vm.nls", "diffHunk": "@@ -970,72 +970,72 @@ J9NLS_VM_XSCDMX_IGNORED.system_action=-Xscdmx will be ignored.\n J9NLS_VM_XSCDMX_IGNORED.user_response=Ignore this message, remove -Xscdmx, or enable -Xshareclasses.\n # END NON-TRANSLATABLE\n \n-# Help text for the -Xlog option. Note: please do not translate the text of the option flags: help, all, none, warn, error, info, config, vital\n+# Help text for the -Xsyslog option. Note: please do not translate the text of the option flags: help, all, none, warn, error, info, config, vital\n J9NLS_VM_XLOG_HELP01=\\nUsage:\\n\n # START NON-TRANSLATABLE\n J9NLS_VM_XLOG_HELP01.explanation=NOTAG\n J9NLS_VM_XLOG_HELP01.system_action=\n J9NLS_VM_XLOG_HELP01.user_response=\n # END NON-TRANSLATABLE\n \n-# -Xlog:help is not translatable\n-J9NLS_VM_XLOG_HELP02=  -Xlog:help              Print JVM -Xlog help.\n+# -Xsyslog:help is not translatable\n+J9NLS_VM_XLOG_HELP02=  -Xsyslog:help              Print JVM -Xlog help.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDYzMDQ2NQ=="}, "originalCommit": {"oid": "f96d8e5b573d971b205bfb9d30aa5b10f51bbc86"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE2MDk5OTkxOnYy", "diffSide": "RIGHT", "path": "runtime/vm/logsupport.c", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMjoyMToxOVrOHhQPPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMzozODo0N1rOHhTd-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDYzMTEwMw==", "bodyText": "Why is this buffer needed (it wasn't before)?", "url": "https://github.com/eclipse-openj9/openj9/pull/10873#discussion_r504631103", "createdAt": "2020-10-14T12:21:19Z", "author": {"login": "keithc-ca"}, "path": "runtime/vm/logsupport.c", "diffHunk": "@@ -264,42 +265,39 @@ parseLogOptions(char *options, UDATA *optionsFlags, UDATA *parseSucceeded)\n jint\n processXLogOptions(J9JavaVM * vm)\n {\n-\tIDATA xlogindex;\n-\tUDATA xlogflags, printhelp, tempflags;\n+\tIDATA xlogindex = FIND_ARG_IN_VMARGS_FORWARD(OPTIONAL_LIST_MATCH, VMOPT_XSYSLOG_OPT, NULL);\n+\t/* The default for -Xsyslog is to be turned on and capture 'error' and 'vital' type messages */\n+\tUDATA xlogflags = defaultLogOptions;\n+\tUDATA printhelp = FALSE;\n+\tUDATA tempflags = 0;\n \tjint rc = JNI_OK;\n \tJ9VMInitArgs* j9vm_args = vm->vmArgsArray;\n \n \tPORT_ACCESS_FROM_JAVAVM(vm);\n \n-\tprinthelp = FALSE;\n-\n-\t/* The default for -Xlog is to be turned on and capture 'error' and 'vital' type messages */\n-\txlogflags = defaultLogOptions;\n-\n-\txlogindex = FIND_ARG_IN_VMARGS_FORWARD(OPTIONAL_LIST_MATCH, XLOG_OPT, NULL);\n-\n \t/* If xlogindex == -1 nothing was specified, so use the default setting from above */\n \n \twhile (xlogindex >= 0) {\n-\t\tIDATA optionsfound;\n+\t\tIDATA optionsfound = 0;\n \t\tUDATA optionsparsed = FALSE;\n-\t\tchar *xlogoptions = NULL;\n+\t\tchar xlogoptionsbuf[SMALL_STRING_BUF_SIZE];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f96d8e5b573d971b205bfb9d30aa5b10f51bbc86"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDY4NDAyNg==", "bodyText": "In order to be compatible with mapped options, the code was changed to use COPY_OPTION_VALUE(), which requires a buffer, instead of GET_OPTION_VALUE().", "url": "https://github.com/eclipse-openj9/openj9/pull/10873#discussion_r504684026", "createdAt": "2020-10-14T13:38:47Z", "author": {"login": "pshipton"}, "path": "runtime/vm/logsupport.c", "diffHunk": "@@ -264,42 +265,39 @@ parseLogOptions(char *options, UDATA *optionsFlags, UDATA *parseSucceeded)\n jint\n processXLogOptions(J9JavaVM * vm)\n {\n-\tIDATA xlogindex;\n-\tUDATA xlogflags, printhelp, tempflags;\n+\tIDATA xlogindex = FIND_ARG_IN_VMARGS_FORWARD(OPTIONAL_LIST_MATCH, VMOPT_XSYSLOG_OPT, NULL);\n+\t/* The default for -Xsyslog is to be turned on and capture 'error' and 'vital' type messages */\n+\tUDATA xlogflags = defaultLogOptions;\n+\tUDATA printhelp = FALSE;\n+\tUDATA tempflags = 0;\n \tjint rc = JNI_OK;\n \tJ9VMInitArgs* j9vm_args = vm->vmArgsArray;\n \n \tPORT_ACCESS_FROM_JAVAVM(vm);\n \n-\tprinthelp = FALSE;\n-\n-\t/* The default for -Xlog is to be turned on and capture 'error' and 'vital' type messages */\n-\txlogflags = defaultLogOptions;\n-\n-\txlogindex = FIND_ARG_IN_VMARGS_FORWARD(OPTIONAL_LIST_MATCH, XLOG_OPT, NULL);\n-\n \t/* If xlogindex == -1 nothing was specified, so use the default setting from above */\n \n \twhile (xlogindex >= 0) {\n-\t\tIDATA optionsfound;\n+\t\tIDATA optionsfound = 0;\n \t\tUDATA optionsparsed = FALSE;\n-\t\tchar *xlogoptions = NULL;\n+\t\tchar xlogoptionsbuf[SMALL_STRING_BUF_SIZE];", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDYzMTEwMw=="}, "originalCommit": {"oid": "f96d8e5b573d971b205bfb9d30aa5b10f51bbc86"}, "originalPosition": 47}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1133, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}