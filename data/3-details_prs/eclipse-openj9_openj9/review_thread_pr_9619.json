{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwNDYwNDQ0", "number": 9619, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQyMTozMzo1MFrOD-wlQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxODo0Njo1MlrOD_Cofw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3MTM0Mjc0OnYy", "diffSide": "RIGHT", "path": "runtime/cmake/J9vmTargetSupport.cmake", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQyMTozMzo1MFrOGZDtew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQyMTozMzo1MFrOGZDtew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkyODM3OQ==", "bodyText": "typo: arroung -> around", "url": "https://github.com/eclipse-openj9/openj9/pull/9619#discussion_r428928379", "createdAt": "2020-05-21T21:33:50Z", "author": {"login": "keithc-ca"}, "path": "runtime/cmake/J9vmTargetSupport.cmake", "diffHunk": "@@ -20,15 +20,50 @@\n # SPDX-License-Identifier: EPL-2.0 OR Apache-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR LicenseRef-GPL-2.0 WITH Assembly-exception\n ################################################################################\n \n+if(J9VM_TARGET_SUPPORT)\n+\treturn()\n+endif()\n+set(J9VM_TARGET_SUPPORT 1)\n+\n include(OmrTargetSupport)\n \n-# Currently j9vm_add_library and j9vm_add_executable just call\n-# omr_add_library and omr_add_executable, but have them so that we can add\n-# functionality in the future, without having to hunt down all the \n-# add_library/add_executable calls.\n+# Currently j9vm_add_library and j9vm_add_executable are wrappers arroung", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e846aa3ddce9aa196ada5571e2ea58755c3d62a7"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3MTM0ODY5OnYy", "diffSide": "RIGHT", "path": "runtime/cmake/J9vmTargetSupport.cmake", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQyMTozNToxNFrOGZDwsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQyMTozNToxNFrOGZDwsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkyOTIwMg==", "bodyText": "For libraries other than shared libraries this loses OUTPUT_NAME if specified.", "url": "https://github.com/eclipse-openj9/openj9/pull/9619#discussion_r428929202", "createdAt": "2020-05-21T21:35:14Z", "author": {"login": "keithc-ca"}, "path": "runtime/cmake/J9vmTargetSupport.cmake", "diffHunk": "@@ -20,15 +20,50 @@\n # SPDX-License-Identifier: EPL-2.0 OR Apache-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR LicenseRef-GPL-2.0 WITH Assembly-exception\n ################################################################################\n \n+if(J9VM_TARGET_SUPPORT)\n+\treturn()\n+endif()\n+set(J9VM_TARGET_SUPPORT 1)\n+\n include(OmrTargetSupport)\n \n-# Currently j9vm_add_library and j9vm_add_executable just call\n-# omr_add_library and omr_add_executable, but have them so that we can add\n-# functionality in the future, without having to hunt down all the \n-# add_library/add_executable calls.\n+# Currently j9vm_add_library and j9vm_add_executable are wrappers arroung\n+# omr_add_library and omr_add_executable. Here we only document the additional\n+# functionality provided. For full information see cmake/moudles/OmrTargetSupport.cmake\n+# from omr\n+\n+# j9vm_add_library(<target_name> <library_type> [options ...] [source ...] )\n+#  NO_VERSION_SUFFIX  - Don't append a version suffix  (eg 29) on the output file name.\n+#                       Note: Only applies to SHARED libraries\n+function(j9vm_add_library name type)\n+\tset(options NO_VERSION_SUFFIX)\n+\tset(oneValueArgs OUTPUT_NAME)\n+\tset(multiValueArgs)\n+\tcmake_parse_arguments(opt \"${options}\" \"${oneValueArgs}\" \"${multiValueArgs}\" ${ARGN})\n+\n+\t# Check if we need to append a version suffix eg '29'\n+\tset(output_name_args)\n+\tif(type STREQUAL \"SHARED\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e846aa3ddce9aa196ada5571e2ea58755c3d62a7"}, "originalPosition": 31}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3MTM1MjMyOnYy", "diffSide": "RIGHT", "path": "runtime/cmake/J9vmTargetSupport.cmake", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQyMTozNjoyMVrOGZDy5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQyMTozNjoyMVrOGZDy5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkyOTc2NQ==", "bodyText": "If OUTPUT_NAME is explicitly specified, I don't think the version suffix should be added even if NO_VERSION_SUFFIX was not specified.", "url": "https://github.com/eclipse-openj9/openj9/pull/9619#discussion_r428929765", "createdAt": "2020-05-21T21:36:21Z", "author": {"login": "keithc-ca"}, "path": "runtime/cmake/J9vmTargetSupport.cmake", "diffHunk": "@@ -20,15 +20,50 @@\n # SPDX-License-Identifier: EPL-2.0 OR Apache-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR LicenseRef-GPL-2.0 WITH Assembly-exception\n ################################################################################\n \n+if(J9VM_TARGET_SUPPORT)\n+\treturn()\n+endif()\n+set(J9VM_TARGET_SUPPORT 1)\n+\n include(OmrTargetSupport)\n \n-# Currently j9vm_add_library and j9vm_add_executable just call\n-# omr_add_library and omr_add_executable, but have them so that we can add\n-# functionality in the future, without having to hunt down all the \n-# add_library/add_executable calls.\n+# Currently j9vm_add_library and j9vm_add_executable are wrappers arroung\n+# omr_add_library and omr_add_executable. Here we only document the additional\n+# functionality provided. For full information see cmake/moudles/OmrTargetSupport.cmake\n+# from omr\n+\n+# j9vm_add_library(<target_name> <library_type> [options ...] [source ...] )\n+#  NO_VERSION_SUFFIX  - Don't append a version suffix  (eg 29) on the output file name.\n+#                       Note: Only applies to SHARED libraries\n+function(j9vm_add_library name type)\n+\tset(options NO_VERSION_SUFFIX)\n+\tset(oneValueArgs OUTPUT_NAME)\n+\tset(multiValueArgs)\n+\tcmake_parse_arguments(opt \"${options}\" \"${oneValueArgs}\" \"${multiValueArgs}\" ${ARGN})\n+\n+\t# Check if we need to append a version suffix eg '29'\n+\tset(output_name_args)\n+\tif(type STREQUAL \"SHARED\")\n+\t\t# If OUTPUT_NAME is specified, use that as the starting name\n+\t\t# otherwise the name of the cmake target is our starting point\n+\t\tif(opt_OUTPUT_NAME)\n+\t\t\tset(output_name \"${opt_OUTPUT_NAME}\")\n+\t\telse()\n+\t\t\tset(output_name \"${name}\")\n+\t\tendif()\n+\n+\t\t# Default to appending a version suffix, unless we are told not to\n+\t\tif(NOT opt_NO_VERSION_SUFFIX)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e846aa3ddce9aa196ada5571e2ea58755c3d62a7"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3MTM3MzAwOnYy", "diffSide": "RIGHT", "path": "runtime/cmake/J9vmTargetSupport.cmake", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQyMTo0Mzo1MlrOGZD_mg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQyMTo0Mzo1MlrOGZD_mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODkzMzAxOA==", "bodyText": "typo: moudles -> modules", "url": "https://github.com/eclipse-openj9/openj9/pull/9619#discussion_r428933018", "createdAt": "2020-05-21T21:43:52Z", "author": {"login": "keithc-ca"}, "path": "runtime/cmake/J9vmTargetSupport.cmake", "diffHunk": "@@ -20,15 +20,50 @@\n # SPDX-License-Identifier: EPL-2.0 OR Apache-2.0 OR GPL-2.0 WITH Classpath-exception-2.0 OR LicenseRef-GPL-2.0 WITH Assembly-exception\n ################################################################################\n \n+if(J9VM_TARGET_SUPPORT)\n+\treturn()\n+endif()\n+set(J9VM_TARGET_SUPPORT 1)\n+\n include(OmrTargetSupport)\n \n-# Currently j9vm_add_library and j9vm_add_executable just call\n-# omr_add_library and omr_add_executable, but have them so that we can add\n-# functionality in the future, without having to hunt down all the \n-# add_library/add_executable calls.\n+# Currently j9vm_add_library and j9vm_add_executable are wrappers arroung\n+# omr_add_library and omr_add_executable. Here we only document the additional\n+# functionality provided. For full information see cmake/moudles/OmrTargetSupport.cmake", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e846aa3ddce9aa196ada5571e2ea58755c3d62a7"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NDI1MzM3OnYy", "diffSide": "RIGHT", "path": "runtime/rastrace/CMakeLists.txt", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxODoyNzo1MlrOGZgMtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxODoyNzo1MlrOGZgMtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM5NTEyNw==", "bodyText": "This should be j9trc${J9VM_VERSION_SUFFIX}.", "url": "https://github.com/eclipse-openj9/openj9/pull/9619#discussion_r429395127", "createdAt": "2020-05-22T18:27:52Z", "author": {"login": "keithc-ca"}, "path": "runtime/rastrace/CMakeLists.txt", "diffHunk": "@@ -26,6 +26,7 @@ add_tracegen(j9trc_aux.tdf)\n add_tracegen(mt.tdf)\n \n j9vm_add_library(j9trc SHARED\n+\tOUTPUT_NAME j9trc", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "78571f54f2a3b7866ab06274298a43907b35bb0b"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NDI5MjQxOnYy", "diffSide": "RIGHT", "path": "runtime/redirector/CMakeLists.txt", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxODo0MzozNlrOGZglfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxODo0MzozNlrOGZglfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQwMTQ2OA==", "bodyText": "The lines above should be removed:\n# Don't append version suffix.\nset(CMAKE_SHARED_LIBRARY_SUFFIX ${J9VM_OLD_SHARED_SUFFIX})", "url": "https://github.com/eclipse-openj9/openj9/pull/9619#discussion_r429401468", "createdAt": "2020-05-22T18:43:36Z", "author": {"login": "keithc-ca"}, "path": "runtime/redirector/CMakeLists.txt", "diffHunk": "@@ -28,7 +28,10 @@ set_source_files_properties(\"${CMAKE_CURRENT_BINARY_DIR}/generated.c\" PROPERTIES\n ################################################################################\n # Redirector\n ################################################################################\n-j9vm_add_library(jvm_redirect SHARED\n+j9vm_add_library(jvm_redirect", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "78571f54f2a3b7866ab06274298a43907b35bb0b"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NDMwMDE1OnYy", "diffSide": "RIGHT", "path": "runtime/tests/thread/CMakeLists.txt", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxODo0Njo1MlrOGZgqeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxODo0Njo1MlrOGZgqeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQwMjc0NQ==", "bodyText": "The lines above should be removed:\n#re-enable version num suffix\nset(CMAKE_SHARED_LIBRARY_SUFFIX ${J9VM_SHARED_LIBRARY_SUFFIX})", "url": "https://github.com/eclipse-openj9/openj9/pull/9619#discussion_r429402745", "createdAt": "2020-05-22T18:46:52Z", "author": {"login": "keithc-ca"}, "path": "runtime/tests/thread/CMakeLists.txt", "diffHunk": "@@ -45,6 +45,7 @@ target_link_libraries(thread_cutest_harness\n \n \n j9vm_add_library(j9thrtestnatives SHARED\n+\tOUTPUT_NAME j9thrtestnatives${J9VM_VERSION_SUFFIX}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "78571f54f2a3b7866ab06274298a43907b35bb0b"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 197, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}