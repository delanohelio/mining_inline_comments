{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIwNzQ5ODc0", "number": 11183, "title": "JDK15 enable NPE extended message by default", "bodyText": "As per earlier discussion #10296 (comment)\nThe cost of retrieving the extended NPE message applies when NullPointerException.getMessage() is invoked, otherwise it is same as previous Java version.\nIf the exception is caught with no logging, there won't be any penalty.\nThere is no references to NullPointerException.getMessage() within OpenJ9 JCL code, there are a few Throwable.getMessage() which might invoke NPE message if the Throwable in question is a NullPointerException.\nMethodHandles.java\n729: e.getCause().getMessage()); \nhttps://github.com/eclipse/openj9/blob/0aec295571c6c25927af41a629bc915c2129642e/jcl/src/java.base/share/classes/java/lang/invoke/MethodHandles.java#L726-L729\nMethodType.java\n404: NoClassDefFoundError noClassDefFoundError = new NoClassDefFoundError(cause.getMessage()); \nhttps://github.com/eclipse/openj9/blob/0aec295571c6c25927af41a629bc915c2129642e/jcl/src/java.base/share/classes/java/lang/invoke/MethodType.java#L403-L404\nMethodTypeHelper.java\n274: NoClassDefFoundError noClassDefFoundError = new NoClassDefFoundError(cause.getMessage()); \nhttps://github.com/eclipse/openj9/blob/0aec295571c6c25927af41a629bc915c2129642e/jcl/src/java.base/share/classes/java/lang/invoke/MethodTypeHelper.java#L273-L274\n\nAlso searched OpenJDK java.base code, there is no reference to NullPointerException.getMessage() either. Similarly there are references to Throwable.getMessage() , Exception.getMessage().\nTested in person builds with this PR and no issue found.\ncloses #10296\nrelated #8450\nSigned-off-by: Jason Feng fengj@ca.ibm.com", "createdAt": "2020-11-13T18:10:28Z", "url": "https://github.com/eclipse-openj9/openj9/pull/11183", "merged": true, "mergeCommit": {"oid": "d48227371b9ad109f1971645d930e51a88afd794"}, "closed": true, "closedAt": "2020-11-13T20:25:16Z", "author": {"login": "JasonFengJ9"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdcLH4qgH2gAyNTIwNzQ5ODc0OjRhMjgzNzI1YjI0YWZlYmY2NjA2ZDQ1ZTQxY2M4MGMxMTAzNDYyNjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdcLgZBgFqTUzMDMwOTc4Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4a283725b24afebf6606d45e41cc80c110346260", "author": {"user": {"login": "JasonFengJ9", "name": "Jason Feng"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/4a283725b24afebf6606d45e41cc80c110346260", "committedDate": "2020-11-13T18:04:41Z", "message": "JDK15 enable NPE extended message by default\n\nSigned-off-by: Jason Feng <fengj@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwMzA1Nzk1", "url": "https://github.com/eclipse-openj9/openj9/pull/11183#pullrequestreview-530305795", "createdAt": "2020-11-13T18:25:36Z", "commit": {"oid": "4a283725b24afebf6606d45e41cc80c110346260"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMwMzA5Nzg3", "url": "https://github.com/eclipse-openj9/openj9/pull/11183#pullrequestreview-530309787", "createdAt": "2020-11-13T18:31:27Z", "commit": {"oid": "4a283725b24afebf6606d45e41cc80c110346260"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxODozMToyN1rOHy6XjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xM1QxODozMToyN1rOHy6XjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzE0NzE0OA==", "bodyText": "Does this feature need to be restricted to jdk15? If not, turning it on via the option should be allowed for all versions.", "url": "https://github.com/eclipse-openj9/openj9/pull/11183#discussion_r523147148", "createdAt": "2020-11-13T18:31:27Z", "author": {"login": "pshipton"}, "path": "runtime/vm/jvminit.c", "diffHunk": "@@ -2150,13 +2150,14 @@ IDATA VMInitStages(J9JavaVM *vm, IDATA stage, void* reserved) {\n \t\t\t\tj9port_control(OMRPORT_CTLDATA_VMEM_PERFORM_FULL_MEMORY_SEARCH, 0);\n \t\t\t}\n \n+#if JAVA_SPEC_VERSION >= 15", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a283725b24afebf6606d45e41cc80c110346260"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1572, "cost": 1, "resetAt": "2021-10-28T17:48:14Z"}}}