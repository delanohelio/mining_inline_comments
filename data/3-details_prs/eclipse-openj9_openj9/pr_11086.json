{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0NDk1ODEw", "number": 11086, "title": "Reduce the optimization level of bcverify.c in compilation", "bodyText": "The change is to reduce the optimization level in compilation\non PowerPC LE 64bit platform so as to avoid unexpected crash\ndue to the over-optimization on the verifier-related variables\nin creating stackmaps.\nFixes: #10947\nSigned-off-by: Cheng Jin jincheng@ca.ibm.com", "createdAt": "2020-11-03T05:42:18Z", "url": "https://github.com/eclipse-openj9/openj9/pull/11086", "merged": true, "mergeCommit": {"oid": "be9a71642cfdf8c1311ccc6179f5c8c705e2a9ab"}, "closed": true, "closedAt": "2020-11-05T20:18:53Z", "author": {"login": "ChengJin01"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdYyrlygFqTUyMjIwMzMxNQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZoMRegFqTUyNDYzMTc1OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyMjAzMzE1", "url": "https://github.com/eclipse-openj9/openj9/pull/11086#pullrequestreview-522203315", "createdAt": "2020-11-03T05:54:16Z", "commit": {"oid": "f92d7175414de899543a86392ffba021e40d1c6b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwNTo1NDoxN1rOHsg_2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwNTo1NDoxN1rOHsg_2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjQ0MDAyNQ==", "bodyText": "I don't think this should be inside the USE_PPC_GCC check, it is unrelated. Also, it should be restricted to plinux LE, unless the problem has been seen on BE (which uses a different compiler).", "url": "https://github.com/eclipse-openj9/openj9/pull/11086#discussion_r516440025", "createdAt": "2020-11-03T05:54:17Z", "author": {"login": "pshipton"}, "path": "runtime/makelib/targets.mk.linux.inc.ftl", "diffHunk": "@@ -539,6 +539,10 @@ MHInterpreterFull$(UMA_DOT_O) : MHInterpreterFull.cpp\n MHInterpreterCompressed$(UMA_DOT_O) : MHInterpreterCompressed.cpp\n \t$(PPC_GCC_CXX) $(PPC_GCC_CXXFLAGS) -c $<\n \n+# special handling bcverify.c for unexpected crash due to over-optimization in compilation\n+bcverify$(UMA_DOT_O) : bcverify.c\n+\t$(CC) $(CFLAGS) -O2 -c -o $@ $<", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f92d7175414de899543a86392ffba021e40d1c6b"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f92d7175414de899543a86392ffba021e40d1c6b", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/f92d7175414de899543a86392ffba021e40d1c6b", "committedDate": "2020-11-03T05:41:13Z", "message": "Reduce the optimization level of bcverify.c in compilation\n\nThe change is to reduce the optimization level in compilation\non PowerPC 64bit platform so as to avoid unexpected crash\ndue to the over-optimization on the verifier-related variables\nin creating stackmaps.\n\nFixes: #10947\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}, "afterCommit": {"oid": "d87fdec721bc1741d717dd0f9ad2614de335b5a8", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/d87fdec721bc1741d717dd0f9ad2614de335b5a8", "committedDate": "2020-11-03T06:15:57Z", "message": "Reduce the optimization level of bcverify.c in compilation\n\nThe change is to reduce the optimization level in compilation\non PowerPC 64bit platform so as to avoid unexpected crash\ndue to the over-optimization on the verifier-related variables\nin creating stackmaps.\n\nFixes: #10947\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d87fdec721bc1741d717dd0f9ad2614de335b5a8", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/d87fdec721bc1741d717dd0f9ad2614de335b5a8", "committedDate": "2020-11-03T06:15:57Z", "message": "Reduce the optimization level of bcverify.c in compilation\n\nThe change is to reduce the optimization level in compilation\non PowerPC 64bit platform so as to avoid unexpected crash\ndue to the over-optimization on the verifier-related variables\nin creating stackmaps.\n\nFixes: #10947\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}, "afterCommit": {"oid": "9350289b165370759328f32ffa962d9c177aa082", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/9350289b165370759328f32ffa962d9c177aa082", "committedDate": "2020-11-03T06:38:50Z", "message": "Reduce the optimization level of bcverify.c in compilation\n\nThe change is to reduce the optimization level in compilation\non PowerPC LE 64bit platform so as to avoid unexpected crash\ndue to the over-optimization on the verifier-related variables\nin creating stackmaps.\n\nFixes: #10947\n\n[ci skip]\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyNTMzMTE0", "url": "https://github.com/eclipse-openj9/openj9/pull/11086#pullrequestreview-522533114", "createdAt": "2020-11-03T14:12:38Z", "commit": {"oid": "9350289b165370759328f32ffa962d9c177aa082"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxNDoxMjozOFrOHswjPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QxNDoxMjozOFrOHswjPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjY5NDg0NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # special handling bcverify.c for unexpected crash due to over-optimization in compilation\n          \n          \n            \n            # special handling bcverify.c to deal with ppcle64-specific crash when compiling with gcc 7.5", "url": "https://github.com/eclipse-openj9/openj9/pull/11086#discussion_r516694844", "createdAt": "2020-11-03T14:12:38Z", "author": {"login": "DanHeidinga"}, "path": "runtime/makelib/targets.mk.linux.inc.ftl", "diffHunk": "@@ -517,6 +517,13 @@ endif\n </#if>\n \n <#if uma.spec.processor.ppc && !uma.spec.type.aix>\n+\n+<#if uma.spec.flags.env_littleEndian.enabled && uma.spec.flags.env_gcc.enabled>\n+# special handling bcverify.c for unexpected crash due to over-optimization in compilation", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9350289b165370759328f32ffa962d9c177aa082"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9350289b165370759328f32ffa962d9c177aa082", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/9350289b165370759328f32ffa962d9c177aa082", "committedDate": "2020-11-03T06:38:50Z", "message": "Reduce the optimization level of bcverify.c in compilation\n\nThe change is to reduce the optimization level in compilation\non PowerPC LE 64bit platform so as to avoid unexpected crash\ndue to the over-optimization on the verifier-related variables\nin creating stackmaps.\n\nFixes: #10947\n\n[ci skip]\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}, "afterCommit": {"oid": "58164aeef55adeb3d472c7c877081402e3433c32", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/58164aeef55adeb3d472c7c877081402e3433c32", "committedDate": "2020-11-03T14:14:53Z", "message": "Reduce the optimization level of bcverify.c in compilation\n\nThe change is to reduce the optimization level in compilation\non PowerPC LE 64bit platform so as to avoid unexpected crash\ndue to the over-optimization on the verifier-related variables\nin creating stackmaps.\n\nFixes: #10947\n\n[ci skip]\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "669dba491c44f3de4945525e2515a80c98f640b9", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/669dba491c44f3de4945525e2515a80c98f640b9", "committedDate": "2020-11-03T17:24:06Z", "message": "Reduce the optimization level of bcverify.c in compilation\n\nThe change is to reduce the optimization level in compilation\non PowerPC LE 64bit platform so as to avoid unexpected crash\ndue to the over-optimization on the verifier-related variables\nin creating stackmaps.\n\nFixes: #10947\n\n[ci skip]\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "58164aeef55adeb3d472c7c877081402e3433c32", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/58164aeef55adeb3d472c7c877081402e3433c32", "committedDate": "2020-11-03T14:14:53Z", "message": "Reduce the optimization level of bcverify.c in compilation\n\nThe change is to reduce the optimization level in compilation\non PowerPC LE 64bit platform so as to avoid unexpected crash\ndue to the over-optimization on the verifier-related variables\nin creating stackmaps.\n\nFixes: #10947\n\n[ci skip]\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}, "afterCommit": {"oid": "669dba491c44f3de4945525e2515a80c98f640b9", "author": {"user": {"login": "ChengJin01", "name": "Cheng Jin"}}, "url": "https://github.com/eclipse-openj9/openj9/commit/669dba491c44f3de4945525e2515a80c98f640b9", "committedDate": "2020-11-03T17:24:06Z", "message": "Reduce the optimization level of bcverify.c in compilation\n\nThe change is to reduce the optimization level in compilation\non PowerPC LE 64bit platform so as to avoid unexpected crash\ndue to the over-optimization on the verifier-related variables\nin creating stackmaps.\n\nFixes: #10947\n\n[ci skip]\n\nSigned-off-by: Cheng Jin <jincheng@ca.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0NTk3MjU2", "url": "https://github.com/eclipse-openj9/openj9/pull/11086#pullrequestreview-524597256", "createdAt": "2020-11-05T19:26:28Z", "commit": {"oid": "669dba491c44f3de4945525e2515a80c98f640b9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0NjMxNzU4", "url": "https://github.com/eclipse-openj9/openj9/pull/11086#pullrequestreview-524631758", "createdAt": "2020-11-05T20:14:57Z", "commit": {"oid": "669dba491c44f3de4945525e2515a80c98f640b9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 83, "cost": 1, "resetAt": "2021-10-28T18:00:02Z"}}}