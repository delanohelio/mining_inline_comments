{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzMDY4NDE5", "number": 10879, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxNTowNzo1M1rOEtiBrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQyMTowNToyN1rOEzACtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE2MTc4ODYwOnYy", "diffSide": "RIGHT", "path": "runtime/gc_verbose_java/VerboseHandlerJava.cpp", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxNTowNzo1M1rOHhX2LA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxNTowNzo1M1rOHhX2LA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDc1NTc1Ng==", "bodyText": "Is this function still needed?", "url": "https://github.com/eclipse-openj9/openj9/pull/10879#discussion_r504755756", "createdAt": "2020-10-14T15:07:53Z", "author": {"login": "RSalman"}, "path": "runtime/gc_verbose_java/VerboseHandlerJava.cpp", "diffHunk": "@@ -62,6 +63,26 @@ MM_VerboseHandlerJava::getThreadName(char *buf, UDATA bufLen, OMR_VMThread *omrT\n \treturn consumedEntireString;\n }\n \n+void\n+MM_VerboseHandlerJava::writeVmArgs(MM_EnvironmentBase* env, MM_VerboseBuffer * buffer, J9JavaVM *vm)\n+{\n+\tPORT_ACCESS_FROM_JAVAVM(vm);\n+\tJavaVMInitArgs* vmArgs = vm->vmArgsArray->actualVMArgs;\n+\tbuffer->formatAndOutput(env,  1, \"<vmargs>\");\n+\tfor (jint i = 0; i < vmArgs->nOptions; ++i) {\n+\t\tchar escapedXMLString[128];\n+\t\tUDATA optLen = strlen(vmArgs->options[i].optionString);\n+\t\tUDATA escapeConsumed = escapeXMLString(OMRPORT_FROM_J9PORT(PORTLIB), escapedXMLString, sizeof(escapedXMLString), vmArgs->options[i].optionString, optLen);\n+\t\tconst char* dots = (escapeConsumed < optLen) ? \"...\" : \"\";\n+\t\tif (NULL == vmArgs->options[i].extraInfo) {\n+\t\t\tbuffer->formatAndOutput(env,  2, \"<vmarg name=\\\"%s%s\\\" />\", escapedXMLString, dots);\n+\t\t} else {\n+\t\t\tbuffer->formatAndOutput(env,  2, \"<vmarg name=\\\"%s%s\\\" value=\\\"%p\\\" />\", escapedXMLString, dots, vmArgs->options[i].extraInfo);\n+\t\t}\n+\t}\n+\tbuffer->formatAndOutput(env,  1, \"</vmargs>\");\n+}\n+\n void\n MM_VerboseHandlerJava::writeVmArgs(MM_VerboseManager *manager, MM_EnvironmentBase* env, J9JavaVM *vm)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e66561ab8de5c84f27298d54692c98f1f5eca99"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE2MTc5OTE3OnYy", "diffSide": "RIGHT", "path": "runtime/gc_verbose_handler_realtime/VerboseHandlerOutputRealtime.cpp", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxNToxMDowNVrOHhX83Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxNToxMDowNVrOHhX83Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDc1NzQ2OQ==", "bodyText": "New line isn't needed here", "url": "https://github.com/eclipse-openj9/openj9/pull/10879#discussion_r504757469", "createdAt": "2020-10-14T15:10:05Z", "author": {"login": "RSalman"}, "path": "runtime/gc_verbose_handler_realtime/VerboseHandlerOutputRealtime.cpp", "diffHunk": "@@ -35,6 +37,7 @@\n #include \"mmhook.h\"\n #include \"mmprivatehook.h\"\n \n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e66561ab8de5c84f27298d54692c98f1f5eca99"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE2ODc3NTIxOnYy", "diffSide": "RIGHT", "path": "runtime/gc_verbose_handler_realtime/VerboseHandlerOutputRealtime.cpp", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQyMTo1MToyMVrOHicyYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQyMTo1MToyMVrOHicyYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTg4NTI4MQ==", "bodyText": "Please look into if this needs to be changed to use buffer. I think it does like outputInitializedInnerStanza is", "url": "https://github.com/eclipse-openj9/openj9/pull/10879#discussion_r505885281", "createdAt": "2020-10-15T21:51:21Z", "author": {"login": "RSalman"}, "path": "runtime/gc_verbose_handler_realtime/VerboseHandlerOutputRealtime.cpp", "diffHunk": "@@ -173,22 +175,24 @@ MM_VerboseHandlerOutputRealtime::getCycleType(UDATA type)\n \treturn cycleType;\n }\n \n+void\n+MM_VerboseHandlerOutputRealtime::outputInitializedInnerStanza(MM_EnvironmentBase *env, MM_VerboseBuffer *buffer){\n+\tMM_GCExtensionsBase *extension = env->getExtensions();\n+\tbuffer->formatAndOutput(env, 1, \"<metronome>\");\t\n+\tbuffer->formatAndOutput(env, 2, \"<attribute name=\\\"beatsPerMeasure\\\" value=\\\"%zu\\\" />\", extension->beatMicro);\n+\tbuffer->formatAndOutput(env, 2, \"<attribute name=\\\"timeInterval\\\" value=\\\"%zu\\\" />\", extension->timeWindowMicro);\n+\tbuffer->formatAndOutput(env, 2, \"<attribute name=\\\"targetUtilization\\\" value=\\\"%zu\\\" />\", extension->targetUtilizationPercentage);\n+\tbuffer->formatAndOutput(env, 2, \"<attribute name=\\\"trigger\\\" value=\\\"0x%zx\\\" />\", extension->gcTrigger);\n+\tbuffer->formatAndOutput(env, 2, \"<attribute name=\\\"headRoom\\\" value=\\\"0x%zx\\\" />\", extension->headRoom);\n+\tbuffer->formatAndOutput(env, 1, \"</metronome>\");\n+}\n void\n MM_VerboseHandlerOutputRealtime::handleInitializedInnerStanzas(J9HookInterface** hook, UDATA eventNum, void* eventData)\n {\n \tMM_InitializedEvent* event = (MM_InitializedEvent*)eventData;\n-\tMM_VerboseWriterChain* writer = _manager->getWriterChain();\n \tMM_EnvironmentBase* env = MM_EnvironmentBase::getEnvironment(event->currentThread);\n-\n \thandleInitializedRegion(hook, eventNum, eventData);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f9752bbe51f8f69aba37cae78e8e86309e1d2ab6"}, "originalPosition": 51}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE4MjkzMjk2OnYy", "diffSide": "RIGHT", "path": "runtime/gc_verbose_java/VerboseHandlerJava.hpp", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQwMDowNzo0MVrOHkl6hA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMFQwMDowNzo0MVrOHkl6hA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODEzMTk3Mg==", "bodyText": "Minor formatting: space before J9JavaVM..", "url": "https://github.com/eclipse-openj9/openj9/pull/10879#discussion_r508131972", "createdAt": "2020-10-20T00:07:41Z", "author": {"login": "RSalman"}, "path": "runtime/gc_verbose_java/VerboseHandlerJava.hpp", "diffHunk": "@@ -51,7 +52,7 @@ class MM_VerboseHandlerJava : public MM_Base\n \t/**\n \t * Output Java VM arguments.\n \t */\n-\tstatic void writeVmArgs(MM_VerboseManager *manager, MM_EnvironmentBase* env, J9JavaVM *vm);\n+\tstatic void writeVmArgs(MM_EnvironmentBase* env, MM_VerboseBuffer* buffer,J9JavaVM* vm);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d82093a432ab21de10528a7db609749614d24a08"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIxOTEzNTI0OnYy", "diffSide": "RIGHT", "path": "runtime/gc_verbose_handler_realtime/VerboseHandlerOutputRealtime.cpp", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQyMTowNToyN1rOHp9acw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOFQyMTowNToyN1rOHp9acw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzc1OTg1OQ==", "bodyText": "Minor nit pick: extension to extensions", "url": "https://github.com/eclipse-openj9/openj9/pull/10879#discussion_r513759859", "createdAt": "2020-10-28T21:05:27Z", "author": {"login": "RSalman"}, "path": "runtime/gc_verbose_handler_realtime/VerboseHandlerOutputRealtime.cpp", "diffHunk": "@@ -174,21 +176,16 @@ MM_VerboseHandlerOutputRealtime::getCycleType(UDATA type)\n }\n \n void\n-MM_VerboseHandlerOutputRealtime::handleInitializedInnerStanzas(J9HookInterface** hook, UDATA eventNum, void* eventData)\n-{\n-\tMM_InitializedEvent* event = (MM_InitializedEvent*)eventData;\n-\tMM_VerboseWriterChain* writer = _manager->getWriterChain();\n-\tMM_EnvironmentBase* env = MM_EnvironmentBase::getEnvironment(event->currentThread);\n-\n-\thandleInitializedRegion(hook, eventNum, eventData);\n-\n-\twriter->formatAndOutput(env, 1, \"<metronome>\");\n-\twriter->formatAndOutput(env, 2, \"<attribute name=\\\"beatsPerMeasure\\\" value=\\\"%zu\\\" />\", event->beat);\n-\twriter->formatAndOutput(env, 2, \"<attribute name=\\\"timeInterval\\\" value=\\\"%zu\\\" />\", event->timeWindow);\n-\twriter->formatAndOutput(env, 2, \"<attribute name=\\\"targetUtilization\\\" value=\\\"%zu\\\" />\", event->targetUtilization);\n-\twriter->formatAndOutput(env, 2, \"<attribute name=\\\"trigger\\\" value=\\\"0x%zx\\\" />\", event->gcTrigger);\n-\twriter->formatAndOutput(env, 2, \"<attribute name=\\\"headRoom\\\" value=\\\"0x%zx\\\" />\", event->headRoom);\n-\twriter->formatAndOutput(env, 1, \"</metronome>\");\n+MM_VerboseHandlerOutputRealtime::outputInitializedInnerStanza(MM_EnvironmentBase *env, MM_VerboseBuffer *buffer){\n+\tMM_GCExtensionsBase *extension = env->getExtensions();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f5b1679b0299147065666de5f2bdd9d9ea292b58"}, "originalPosition": 49}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1138, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}