{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMyMzg1MzQy", "number": 530, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxMTo0Nzo1OVrOFAw1wQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwNjoyMzozOFrOFBneGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM2MzQ0NTEzOnYy", "diffSide": "RIGHT", "path": "android-json-form-wizard/src/main/java/com/vijay/jsonwizard/widgets/RepeatingGroupFactory.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxMTo0Nzo1OVrOH_NcZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxNjoxMDoxNVrOH_XouQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjA0MjU5OQ==", "bodyText": "Could you add a test to verify that all fields of the repeatingGroupCountObj are correctly populated?", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/530#discussion_r536042599", "createdAt": "2020-12-04T11:47:59Z", "author": {"login": "vincent-karuri"}, "path": "android-json-form-wizard/src/main/java/com/vijay/jsonwizard/widgets/RepeatingGroupFactory.java", "diffHunk": "@@ -152,6 +152,7 @@ private JSONObject getRepeatingGroupCountObj(WidgetArgs widgetArgs) throws JSONE\n         repeatingGroupCountObj.put(OPENMRS_ENTITY_ID, \"\");\n         repeatingGroupCountObj.put(TYPE, \"\");\n         repeatingGroupCountObj.put(TEXT, widgetArgs.getJsonObject().get(REFERENCE_EDIT_TEXT_HINT));\n+        repeatingGroupCountObj.put(VALUE, \"0\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f264b66c76b7d397b6cb4eafe7d865f3898c2cc1"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjA0MzAzNg==", "bodyText": "And in particular, to verify that the value is 0 by default and that it is always reset to zero when text is cleared.", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/530#discussion_r536043036", "createdAt": "2020-12-04T11:48:52Z", "author": {"login": "vincent-karuri"}, "path": "android-json-form-wizard/src/main/java/com/vijay/jsonwizard/widgets/RepeatingGroupFactory.java", "diffHunk": "@@ -152,6 +152,7 @@ private JSONObject getRepeatingGroupCountObj(WidgetArgs widgetArgs) throws JSONE\n         repeatingGroupCountObj.put(OPENMRS_ENTITY_ID, \"\");\n         repeatingGroupCountObj.put(TYPE, \"\");\n         repeatingGroupCountObj.put(TEXT, widgetArgs.getJsonObject().get(REFERENCE_EDIT_TEXT_HINT));\n+        repeatingGroupCountObj.put(VALUE, \"0\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjA0MjU5OQ=="}, "originalCommit": {"oid": "f264b66c76b7d397b6cb4eafe7d865f3898c2cc1"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjIwOTU5Mw==", "bodyText": "done", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/530#discussion_r536209593", "createdAt": "2020-12-04T16:10:15Z", "author": {"login": "owais-vd"}, "path": "android-json-form-wizard/src/main/java/com/vijay/jsonwizard/widgets/RepeatingGroupFactory.java", "diffHunk": "@@ -152,6 +152,7 @@ private JSONObject getRepeatingGroupCountObj(WidgetArgs widgetArgs) throws JSONE\n         repeatingGroupCountObj.put(OPENMRS_ENTITY_ID, \"\");\n         repeatingGroupCountObj.put(TYPE, \"\");\n         repeatingGroupCountObj.put(TEXT, widgetArgs.getJsonObject().get(REFERENCE_EDIT_TEXT_HINT));\n+        repeatingGroupCountObj.put(VALUE, \"0\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjA0MjU5OQ=="}, "originalCommit": {"oid": "f264b66c76b7d397b6cb4eafe7d865f3898c2cc1"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3MjM5NTc4OnYy", "diffSide": "RIGHT", "path": "android-json-form-wizard/src/test/java/com/vijay/jsonwizard/widgets/RepeatingGroupFactoryTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwNjoyMzozOFrOIAXqnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwNjo0MDoyM1rOIAYBsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzI1ODY1Mg==", "bodyText": "Could you add an intermediate step where you set the text to something else and verify that that value is updated on repeatingGroupCountObj,  then set it to blank and verify that it's reset to 0?", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/530#discussion_r537258652", "createdAt": "2020-12-07T06:23:38Z", "author": {"login": "vincent-karuri"}, "path": "android-json-form-wizard/src/test/java/com/vijay/jsonwizard/widgets/RepeatingGroupFactoryTest.java", "diffHunk": "@@ -180,6 +180,17 @@ public void testUniqueChildElementKeyGenerationShouldContainChildKeyAsComponent(\n         Assert.assertEquals(childElementKey, uniqueIdComponents[0]);\n     }\n \n+    @Test\n+    public void testRepeatingGroupDefaultCount() throws Exception {\n+        View rootLayout = invokeGetViewsFromJson().get(0);\n+\n+        JSONObject repeatingGroupCountObj = step.getJSONArray(JsonFormConstants.FIELDS).getJSONObject(0);\n+        Assert.assertEquals(\"0\", repeatingGroupCountObj.getString(JsonFormConstants.VALUE));\n+\n+        ((MaterialEditText) rootLayout.findViewById(R.id.reference_edit_text)).setText(\"\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "60efaf05a19aff40c74d1b6ed82288d1842c678d"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzI2NDU2Mg==", "bodyText": "added.", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/530#discussion_r537264562", "createdAt": "2020-12-07T06:40:23Z", "author": {"login": "owais-vd"}, "path": "android-json-form-wizard/src/test/java/com/vijay/jsonwizard/widgets/RepeatingGroupFactoryTest.java", "diffHunk": "@@ -180,6 +180,17 @@ public void testUniqueChildElementKeyGenerationShouldContainChildKeyAsComponent(\n         Assert.assertEquals(childElementKey, uniqueIdComponents[0]);\n     }\n \n+    @Test\n+    public void testRepeatingGroupDefaultCount() throws Exception {\n+        View rootLayout = invokeGetViewsFromJson().get(0);\n+\n+        JSONObject repeatingGroupCountObj = step.getJSONArray(JsonFormConstants.FIELDS).getJSONObject(0);\n+        Assert.assertEquals(\"0\", repeatingGroupCountObj.getString(JsonFormConstants.VALUE));\n+\n+        ((MaterialEditText) rootLayout.findViewById(R.id.reference_edit_text)).setText(\"\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzI1ODY1Mg=="}, "originalCommit": {"oid": "60efaf05a19aff40c74d1b6ed82288d1842c678d"}, "originalPosition": 11}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2021, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}