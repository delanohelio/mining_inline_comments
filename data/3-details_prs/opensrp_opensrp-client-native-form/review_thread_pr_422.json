{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE2NTg1ODk4", "number": 422, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMTo1ODo0MVrOD7neYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxNDo0NDo1OVrOD7r33Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzODM5MzI5OnYy", "diffSide": "RIGHT", "path": "android-json-form-wizard/src/main/java/com/vijay/jsonwizard/widgets/EditTextFactory.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMTo1ODo0MVrOGUDISA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMjoyODo1MFrOGUEK0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY3NTk3Ng==", "bodyText": "I see we've altered the access modifier here, do we intend to override it on the  implementations?", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/422#discussion_r423675976", "createdAt": "2020-05-12T11:58:41Z", "author": {"login": "ndegwamartin"}, "path": "android-json-form-wizard/src/main/java/com/vijay/jsonwizard/widgets/EditTextFactory.java", "diffHunk": "@@ -412,7 +416,7 @@ private void attachRefreshLogic(Context context, JSONObject jsonObject, Material\n         }\n     }\n \n-    private MaterialEditText getViewUsingAddress(String stepName, String fieldKey, JsonApi jsonApi) {\n+    public MaterialEditText getViewUsingAddress(String stepName, String fieldKey, JsonApi jsonApi) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1b68e98d71e6cd3b24b9e595de5f47b605b662b4"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY3NjU4Mw==", "bodyText": "Its used in mocking on the tests", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/422#discussion_r423676583", "createdAt": "2020-05-12T11:59:52Z", "author": {"login": "dubdabasoduba"}, "path": "android-json-form-wizard/src/main/java/com/vijay/jsonwizard/widgets/EditTextFactory.java", "diffHunk": "@@ -412,7 +416,7 @@ private void attachRefreshLogic(Context context, JSONObject jsonObject, Material\n         }\n     }\n \n-    private MaterialEditText getViewUsingAddress(String stepName, String fieldKey, JsonApi jsonApi) {\n+    public MaterialEditText getViewUsingAddress(String stepName, String fieldKey, JsonApi jsonApi) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY3NTk3Ng=="}, "originalCommit": {"oid": "1b68e98d71e6cd3b24b9e595de5f47b605b662b4"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY5MjUwNw==", "bodyText": "Ok, since the test is in a similar package you can give it a narrower scope and use protected instead. Also, annotate the method with @VisibleForTesting", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/422#discussion_r423692507", "createdAt": "2020-05-12T12:27:57Z", "author": {"login": "ndegwamartin"}, "path": "android-json-form-wizard/src/main/java/com/vijay/jsonwizard/widgets/EditTextFactory.java", "diffHunk": "@@ -412,7 +416,7 @@ private void attachRefreshLogic(Context context, JSONObject jsonObject, Material\n         }\n     }\n \n-    private MaterialEditText getViewUsingAddress(String stepName, String fieldKey, JsonApi jsonApi) {\n+    public MaterialEditText getViewUsingAddress(String stepName, String fieldKey, JsonApi jsonApi) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY3NTk3Ng=="}, "originalCommit": {"oid": "1b68e98d71e6cd3b24b9e595de5f47b605b662b4"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY5MzAxMQ==", "bodyText": "Yah this makes sense", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/422#discussion_r423693011", "createdAt": "2020-05-12T12:28:50Z", "author": {"login": "dubdabasoduba"}, "path": "android-json-form-wizard/src/main/java/com/vijay/jsonwizard/widgets/EditTextFactory.java", "diffHunk": "@@ -412,7 +416,7 @@ private void attachRefreshLogic(Context context, JSONObject jsonObject, Material\n         }\n     }\n \n-    private MaterialEditText getViewUsingAddress(String stepName, String fieldKey, JsonApi jsonApi) {\n+    public MaterialEditText getViewUsingAddress(String stepName, String fieldKey, JsonApi jsonApi) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY3NTk3Ng=="}, "originalCommit": {"oid": "1b68e98d71e6cd3b24b9e595de5f47b605b662b4"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzOTExMjkzOnYy", "diffSide": "RIGHT", "path": "android-json-form-wizard/src/test/java/com/vijay/jsonwizard/widgets/EditTextFactoryTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxNDo0NDo0OVrOGUKOCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxNDo0NDo0OVrOGUKOCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzc5MjEzNw==", "bodyText": "I think we are better off asserting the exact value we expect based on the input in order to cover the ceiling edge case e.g. no duplicates", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/422#discussion_r423792137", "createdAt": "2020-05-12T14:44:49Z", "author": {"login": "ndegwamartin"}, "path": "android-json-form-wizard/src/test/java/com/vijay/jsonwizard/widgets/EditTextFactoryTest.java", "diffHunk": "@@ -0,0 +1,217 @@\n+package com.vijay.jsonwizard.widgets;\n+\n+import android.content.res.Resources;\n+import android.text.Editable;\n+import android.text.SpannableStringBuilder;\n+import android.view.View;\n+import android.widget.ImageView;\n+import android.widget.RelativeLayout;\n+\n+import com.rengwuxian.materialedittext.MaterialEditText;\n+import com.vijay.jsonwizard.BaseTest;\n+import com.vijay.jsonwizard.R;\n+import com.vijay.jsonwizard.activities.JsonFormActivity;\n+import com.vijay.jsonwizard.fragments.JsonFormFragment;\n+import com.vijay.jsonwizard.interfaces.CommonListener;\n+import com.vijay.jsonwizard.interfaces.JsonApi;\n+import com.vijay.jsonwizard.utils.FormUtils;\n+\n+import org.json.JSONObject;\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.mockito.Mock;\n+import org.mockito.Mockito;\n+import org.mockito.MockitoAnnotations;\n+\n+import java.util.List;\n+\n+public class EditTextFactoryTest extends BaseTest {\n+    private EditTextFactory factory;\n+    @Mock\n+    private JsonFormActivity context;\n+\n+    @Mock\n+    private JsonFormFragment formFragment;\n+\n+    @Mock\n+    private Resources resources;\n+\n+    @Mock\n+    private CommonListener listener;\n+\n+    @Mock\n+    private RelativeLayout rootLayout;\n+\n+    @Mock\n+    private RelativeLayout editTextLayout;\n+\n+    @Mock\n+    private MaterialEditText editText;\n+\n+    @Mock\n+    private ImageView editButton;\n+\n+    @Mock\n+    private MaterialEditText totalValueEditText;\n+\n+    @Mock\n+    private MaterialEditText relatedEditText1;\n+\n+    @Mock\n+    private MaterialEditText relatedEditText2;\n+\n+    private String jsonForm = \"{\\\"encounter_type\\\":\\\"Birth Registration\\\",\\\"show_errors_on_submit\\\":true,\\\"count\\\":\\\"1\\\",\\\"display_scroll_bars\\\":true,\\\"mother\\\":{\\\"encounter_type\\\":\\\"New Woman Registration\\\"},\\\"entity_id\\\":\\\"\\\",\\\"relational_id\\\":\\\"\\\",\\\"metadata\\\":{\\\"start\\\":{\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"concept\\\",\\\"openmrs_data_type\\\":\\\"start\\\",\\\"openmrs_entity_id\\\":\\\"163137AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\\\"},\\\"end\\\":{\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"concept\\\",\\\"openmrs_data_type\\\":\\\"end\\\",\\\"openmrs_entity_id\\\":\\\"163138AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\\\"},\\\"today\\\":{\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"encounter\\\",\\\"openmrs_entity_id\\\":\\\"encounter_date\\\"},\\\"deviceid\\\":{\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"concept\\\",\\\"openmrs_data_type\\\":\\\"deviceid\\\",\\\"openmrs_entity_id\\\":\\\"163149AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\\\"},\\\"subscriberid\\\":{\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"concept\\\",\\\"openmrs_data_type\\\":\\\"subscriberid\\\",\\\"openmrs_entity_id\\\":\\\"163150AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\\\"},\\\"simserial\\\":{\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"concept\\\",\\\"openmrs_data_type\\\":\\\"simserial\\\",\\\"openmrs_entity_id\\\":\\\"163151AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\\\"},\\\"phonenumber\\\":{\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"concept\\\",\\\"openmrs_data_type\\\":\\\"phonenumber\\\",\\\"openmrs_entity_id\\\":\\\"163152AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\\\"},\\\"encounter_location\\\":\\\"\\\",\\\"look_up\\\":{\\\"entity_id\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}},\\\"step1\\\":{\\\"display_back_button\\\":\\\"true\\\",\\\"title\\\":\\\"Birth Registration\\\",\\\"fields\\\":[{\\\"key\\\":\\\"medications_other\\\",\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"\\\",\\\"openmrs_entity_id\\\":\\\"\\\",\\\"type\\\":\\\"edit_text\\\",\\\"hint\\\":\\\"Specify\\\",\\\"v_regex\\\":{\\\"value\\\":\\\"[A-Za-z\\\\\\\\s\\\\\\\\.\\\\\\\\-]*\\\",\\\"err\\\":\\\"Please enter valid content\\\"},\\\"value\\\":\\\"10\\\",\\\"relevance\\\":{\\\"step1:medications\\\":{\\\"ex-checkbox\\\":[{\\\"or\\\":[\\\"other\\\"]}]}}},{\\\"key\\\":\\\"medications_other2\\\",\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"\\\",\\\"openmrs_entity_id\\\":\\\"\\\",\\\"type\\\":\\\"edit_text\\\",\\\"hint\\\":\\\"Specify\\\",\\\"v_regex\\\":{\\\"value\\\":\\\"[A-Za-z\\\\\\\\s\\\\\\\\.\\\\\\\\-]*\\\",\\\"err\\\":\\\"Please enter valid content\\\"},\\\"value\\\":\\\"10\\\",\\\"relevance\\\":{\\\"step1:medications\\\":{\\\"ex-checkbox\\\":[{\\\"or\\\":[\\\"other\\\"]}]}}},{\\\"key\\\":\\\"medications_other3\\\",\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"\\\",\\\"openmrs_entity_id\\\":\\\"\\\",\\\"type\\\":\\\"edit_text\\\",\\\"hint\\\":\\\"Specify\\\",\\\"v_regex\\\":{\\\"value\\\":\\\"[A-Za-z\\\\\\\\s\\\\\\\\.\\\\\\\\-]*\\\",\\\"err\\\":\\\"Please enter valid content\\\"},\\\"value\\\":\\\"20\\\",\\\"relevance\\\":{\\\"step1:medications\\\":{\\\"ex-checkbox\\\":[{\\\"or\\\":[\\\"other\\\"]}]}}}]}}\";\n+    @Before\n+    public void setUp() {\n+        MockitoAnnotations.initMocks(this);\n+        factory = new EditTextFactory();\n+    }\n+\n+    @Test\n+    public void testNumberEditTextFactoryInstantiatesViewsCorrectly() throws Exception {\n+        Assert.assertNotNull(factory);\n+        EditTextFactory factorySpy = Mockito.spy(factory);\n+        Assert.assertNotNull(factorySpy);\n+\n+        FormUtils formUtils = new FormUtils();\n+        FormUtils formUtilsSpy = Mockito.spy(formUtils);\n+        Assert.assertNotNull(formUtilsSpy);\n+\n+        Mockito.doReturn(resources).when(context).getResources();\n+        Assert.assertNotNull(resources);\n+\n+        context.setTheme(R.style.NativeFormsAppTheme);\n+        Mockito.doReturn(rootLayout).when(factorySpy).getRelativeLayout(context);\n+        Assert.assertNotNull(rootLayout);\n+\n+        Mockito.doReturn(editTextLayout).when(rootLayout).findViewById(R.id.edit_text_layout);\n+        Assert.assertNotNull(editTextLayout);\n+\n+        Mockito.doReturn(editText).when(editTextLayout).findViewById(R.id.edit_text);\n+        Assert.assertNotNull(editText);\n+\n+        Mockito.doReturn(editButton).when(editTextLayout).findViewById(R.id.material_edit_text_edit_button);\n+        Assert.assertNotNull(editButton);\n+\n+        Editable editable = new SpannableStringBuilder(\"34\");\n+        Mockito.doReturn(editable).when(editText).getText();\n+\n+        String gpsString = \"{\\\"key\\\":\\\"current_weight\\\",\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"\\\",\\\"openmrs_entity_id\\\":\\\"5089\\\",\\\"type\\\":\\\"edit_text\\\",\\\"edit_text_style\\\":\\\"bordered\\\",\\\"edit_type\\\":\\\"number\\\",\\\"hint\\\":\\\"30\\\",\\\"value\\\":\\\"34\\\",\\\"label_info_text\\\":\\\"The into text\\\",\\\"label_into_title\\\":\\\"The info title\\\",\\\"v_numeric\\\":{\\\"value\\\":\\\"true\\\",\\\"err\\\":\\\"\\\"},\\\"v_numeric_integer\\\":{\\\"value\\\":\\\"true\\\",\\\"err\\\":\\\"\\\"},\\\"v_min\\\":{\\\"value\\\":\\\"30\\\",\\\"err\\\":\\\"Weight must be equal or greater than 30\\\"},\\\"v_max\\\":{\\\"value\\\":\\\"180\\\",\\\"err\\\":\\\"Weight must be equal or less than 180\\\"},\\\"v_required\\\":{\\\"value\\\":\\\"true\\\",\\\"err\\\":\\\"Please enter the current weight\\\"},\\\"calculation\\\":{\\\"rules-engine\\\":{\\\"ex-rules\\\":{\\\"rules-file\\\":\\\"sample-calculation-rules.yml\\\"}}},\\\"relevance\\\":{\\\"rules-engine\\\":{\\\"ex-rules\\\":{\\\"rules-file\\\":\\\"sample-relevance-rules.yml\\\"}}},\\\"constraints\\\":{\\\"rules-engine\\\":{\\\"ex-rules\\\":{\\\"rules-file\\\":\\\"sample-constraints-rules.yml\\\"}}}}\";\n+        List<View> viewList = factorySpy.getViewsFromJson(\"RandomStepName\", context, formFragment, new JSONObject(gpsString), listener);\n+        Assert.assertNotNull(viewList);\n+        Assert.assertTrue(viewList.size() > 0);\n+    }\n+\n+    @Test\n+    public void testNameEditTextFactoryInstantiatesViewsCorrectly() throws Exception {\n+        Assert.assertNotNull(factory);\n+        EditTextFactory factorySpy = Mockito.spy(factory);\n+        Assert.assertNotNull(factorySpy);\n+\n+        FormUtils formUtils = new FormUtils();\n+        FormUtils formUtilsSpy = Mockito.spy(formUtils);\n+        Assert.assertNotNull(formUtilsSpy);\n+\n+        Mockito.doReturn(resources).when(context).getResources();\n+        Assert.assertNotNull(resources);\n+\n+        context.setTheme(R.style.NativeFormsAppTheme);\n+        Mockito.doReturn(rootLayout).when(factorySpy).getRelativeLayout(context);\n+        Assert.assertNotNull(rootLayout);\n+\n+        Mockito.doReturn(editTextLayout).when(rootLayout).findViewById(R.id.edit_text_layout);\n+        Assert.assertNotNull(editTextLayout);\n+\n+        Mockito.doReturn(editText).when(editTextLayout).findViewById(R.id.edit_text);\n+        Assert.assertNotNull(editText);\n+\n+        Mockito.doReturn(editButton).when(editTextLayout).findViewById(R.id.material_edit_text_edit_button);\n+        Assert.assertNotNull(editButton);\n+\n+        Editable editable = new SpannableStringBuilder(\"Lifted\");\n+        Mockito.doReturn(editable).when(editText).getText();\n+\n+        String gpsString = \"{\\\"key\\\":\\\"user_last_name\\\",\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"\\\",\\\"openmrs_entity_id\\\":\\\"\\\",\\\"type\\\":\\\"edit_text\\\",\\\"hint\\\":\\\"User Last name\\\",\\\"edit_type\\\":\\\"name\\\",\\\"value\\\":\\\"Lifted\\\",\\\"v_min_length\\\":{\\\"value\\\":\\\"6\\\",\\\"err\\\":\\\"Please enter a valid name\\\"},\\\"v_max_length\\\":{\\\"value\\\":\\\"10\\\",\\\"is_fixed_size\\\":\\\"true\\\",\\\"err\\\":\\\"Please enter a valid name\\\"},\\\"v_required\\\":{\\\"value\\\":\\\"true\\\",\\\"err\\\":\\\"Please enter the last name\\\"},\\\"v_regex\\\":{\\\"value\\\":\\\"[A-Za-z\\\\\\\\s\\\\\\\\.\\\\\\\\-]*\\\",\\\"err\\\":\\\"Please enter a valid name\\\"},\\\"v_url\\\":{\\\"value\\\":\\\"true\\\",\\\"err\\\":\\\"Please enter a valid name\\\"},\\\"v_email\\\":{\\\"value\\\":\\\"true\\\",\\\"err\\\":\\\"Please enter a valid name\\\"},\\\"relevance\\\":{\\\"step1:user_first_name\\\":{\\\"type\\\":\\\"string\\\",\\\"ex\\\":\\\"equalTo(., \\\\\\\"test\\\\\\\")\\\"}}}\";\n+        List<View> viewList = factorySpy.getViewsFromJson(\"RandomStepName\", context, formFragment, new JSONObject(gpsString), listener);\n+        Assert.assertNotNull(viewList);\n+        Assert.assertTrue(viewList.size() > 0);\n+    }\n+\n+    @Test\n+    public void testNameWithRelativeNumericIntegerEditTextFactoryInstantiatesViewsCorrectly() throws Exception {\n+        Assert.assertNotNull(factory);\n+        EditTextFactory factorySpy = Mockito.spy(factory);\n+        Assert.assertNotNull(factorySpy);\n+\n+        FormUtils formUtils = new FormUtils();\n+        FormUtils formUtilsSpy = Mockito.spy(formUtils);\n+        Assert.assertNotNull(formUtilsSpy);\n+\n+        Mockito.doReturn(resources).when(context).getResources();\n+        Assert.assertNotNull(resources);\n+\n+        context.setTheme(R.style.NativeFormsAppTheme);\n+        Mockito.doReturn(rootLayout).when(factorySpy).getRelativeLayout(context);\n+        Assert.assertNotNull(rootLayout);\n+\n+        Mockito.doReturn(editTextLayout).when(rootLayout).findViewById(R.id.edit_text_layout);\n+        Assert.assertNotNull(editTextLayout);\n+\n+        Mockito.doReturn(editText).when(editTextLayout).findViewById(R.id.edit_text);\n+        Assert.assertNotNull(editText);\n+\n+        Mockito.doReturn(editButton).when(editTextLayout).findViewById(R.id.material_edit_text_edit_button);\n+        Assert.assertNotNull(editButton);\n+\n+        Editable editable = new SpannableStringBuilder(\"Lifted\");\n+        Mockito.doReturn(editable).when(editText).getText();\n+\n+        Mockito.doReturn(jsonForm).when(formFragment).getCurrentJsonState();\n+\n+        String gpsString = \"{\\\"key\\\":\\\"user_last_name\\\",\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"\\\",\\\"openmrs_entity_id\\\":\\\"\\\",\\\"type\\\":\\\"edit_text\\\",\\\"hint\\\":\\\"User Last name\\\",\\\"edit_type\\\":\\\"name\\\",\\\"value\\\":\\\"Lifted\\\",\\\"v_min_length\\\":{\\\"value\\\":\\\"6\\\",\\\"err\\\":\\\"Please enter a valid name\\\"},\\\"v_max_length\\\":{\\\"value\\\":\\\"10\\\",\\\"is_fixed_size\\\":\\\"true\\\",\\\"err\\\":\\\"Please enter a valid name\\\"},\\\"v_required\\\":{\\\"value\\\":\\\"true\\\",\\\"err\\\":\\\"Please enter the last name\\\"},\\\"v_relative_max\\\":{\\\"value\\\":\\\"medications_other3\\\",\\\"err\\\":\\\"Enter required fields\\\"}}\";\n+        List<View> viewList = factorySpy.getViewsFromJson(\"RandomStepName\", context, formFragment, new JSONObject(gpsString), listener);\n+        Assert.assertNotNull(viewList);\n+        Assert.assertTrue(viewList.size() > 0);\n+    }\n+    @Test\n+    public void testNameWithCumulativeTotalValidatorEditTextFactoryInstantiatesViewsCorrectly() throws Exception {\n+        Assert.assertNotNull(factory);\n+        EditTextFactory factorySpy = Mockito.spy(factory);\n+        Assert.assertNotNull(factorySpy);\n+\n+        FormUtils formUtils = new FormUtils();\n+        FormUtils formUtilsSpy = Mockito.spy(formUtils);\n+        Assert.assertNotNull(formUtilsSpy);\n+\n+        Mockito.doReturn(resources).when(context).getResources();\n+        Assert.assertNotNull(resources);\n+\n+        context.setTheme(R.style.NativeFormsAppTheme);\n+        Mockito.doReturn(rootLayout).when(factorySpy).getRelativeLayout(context);\n+        Assert.assertNotNull(rootLayout);\n+\n+        Mockito.doReturn(editTextLayout).when(rootLayout).findViewById(R.id.edit_text_layout);\n+        Assert.assertNotNull(editTextLayout);\n+\n+        Mockito.doReturn(editText).when(editTextLayout).findViewById(R.id.edit_text);\n+        Assert.assertNotNull(editText);\n+\n+        Mockito.doReturn(editButton).when(editTextLayout).findViewById(R.id.material_edit_text_edit_button);\n+        Assert.assertNotNull(editButton);\n+\n+        Editable editable = new SpannableStringBuilder(\"Lifted\");\n+        Mockito.doReturn(editable).when(editText).getText();\n+\n+        Mockito.doReturn(jsonForm).when(formFragment).getCurrentJsonState();\n+\n+        Mockito.doReturn(relatedEditText1).when((JsonApi) context).getFormDataView(\"step1:medications_other\");\n+        Mockito.doReturn(relatedEditText2).when((JsonApi) context).getFormDataView(\"step1:medications_other2\");\n+        Mockito.doReturn(totalValueEditText).when((JsonApi) context).getFormDataView(\"step1:medications_other3\");\n+\n+        String gpsString = \"{\\\"key\\\":\\\"user_last_name\\\",\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"\\\",\\\"openmrs_entity_id\\\":\\\"\\\",\\\"type\\\":\\\"edit_text\\\",\\\"hint\\\":\\\"User Last name\\\",\\\"edit_type\\\":\\\"name\\\",\\\"value\\\":\\\"Lifted\\\",\\\"v_min_length\\\":{\\\"value\\\":\\\"6\\\",\\\"err\\\":\\\"Please enter a valid name\\\"},\\\"v_max_length\\\":{\\\"value\\\":\\\"10\\\",\\\"is_fixed_size\\\":\\\"true\\\",\\\"err\\\":\\\"Please enter a valid name\\\"},\\\"v_required\\\":{\\\"value\\\":\\\"true\\\",\\\"err\\\":\\\"Please enter the last name\\\"},\\\"v_cumulative_total\\\":{\\\"value\\\":\\\"medications_other3\\\",\\\"err\\\":\\\"Enter required fields\\\",\\\"related_fields\\\":[\\\"medications_other\\\",\\\"medications_other2\\\"]}}\";\n+        List<View> viewList = factorySpy.getViewsFromJson(\"step1\", context, formFragment, new JSONObject(gpsString), listener);\n+        Assert.assertNotNull(viewList);\n+        Assert.assertTrue(viewList.size() > 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c3f2275dec65e29d68f3f345490cc64a169f8c2"}, "originalPosition": 215}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzOTExMzQ5OnYy", "diffSide": "RIGHT", "path": "android-json-form-wizard/src/test/java/com/vijay/jsonwizard/widgets/EditTextFactoryTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxNDo0NDo1NVrOGUKOWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxNDo0NDo1NVrOGUKOWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzc5MjIxOA==", "bodyText": "I think we are better off asserting the exact value we expect based on the input in order to cover the ceiling edge case e.g. no duplicates", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/422#discussion_r423792218", "createdAt": "2020-05-12T14:44:55Z", "author": {"login": "ndegwamartin"}, "path": "android-json-form-wizard/src/test/java/com/vijay/jsonwizard/widgets/EditTextFactoryTest.java", "diffHunk": "@@ -0,0 +1,217 @@\n+package com.vijay.jsonwizard.widgets;\n+\n+import android.content.res.Resources;\n+import android.text.Editable;\n+import android.text.SpannableStringBuilder;\n+import android.view.View;\n+import android.widget.ImageView;\n+import android.widget.RelativeLayout;\n+\n+import com.rengwuxian.materialedittext.MaterialEditText;\n+import com.vijay.jsonwizard.BaseTest;\n+import com.vijay.jsonwizard.R;\n+import com.vijay.jsonwizard.activities.JsonFormActivity;\n+import com.vijay.jsonwizard.fragments.JsonFormFragment;\n+import com.vijay.jsonwizard.interfaces.CommonListener;\n+import com.vijay.jsonwizard.interfaces.JsonApi;\n+import com.vijay.jsonwizard.utils.FormUtils;\n+\n+import org.json.JSONObject;\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.mockito.Mock;\n+import org.mockito.Mockito;\n+import org.mockito.MockitoAnnotations;\n+\n+import java.util.List;\n+\n+public class EditTextFactoryTest extends BaseTest {\n+    private EditTextFactory factory;\n+    @Mock\n+    private JsonFormActivity context;\n+\n+    @Mock\n+    private JsonFormFragment formFragment;\n+\n+    @Mock\n+    private Resources resources;\n+\n+    @Mock\n+    private CommonListener listener;\n+\n+    @Mock\n+    private RelativeLayout rootLayout;\n+\n+    @Mock\n+    private RelativeLayout editTextLayout;\n+\n+    @Mock\n+    private MaterialEditText editText;\n+\n+    @Mock\n+    private ImageView editButton;\n+\n+    @Mock\n+    private MaterialEditText totalValueEditText;\n+\n+    @Mock\n+    private MaterialEditText relatedEditText1;\n+\n+    @Mock\n+    private MaterialEditText relatedEditText2;\n+\n+    private String jsonForm = \"{\\\"encounter_type\\\":\\\"Birth Registration\\\",\\\"show_errors_on_submit\\\":true,\\\"count\\\":\\\"1\\\",\\\"display_scroll_bars\\\":true,\\\"mother\\\":{\\\"encounter_type\\\":\\\"New Woman Registration\\\"},\\\"entity_id\\\":\\\"\\\",\\\"relational_id\\\":\\\"\\\",\\\"metadata\\\":{\\\"start\\\":{\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"concept\\\",\\\"openmrs_data_type\\\":\\\"start\\\",\\\"openmrs_entity_id\\\":\\\"163137AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\\\"},\\\"end\\\":{\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"concept\\\",\\\"openmrs_data_type\\\":\\\"end\\\",\\\"openmrs_entity_id\\\":\\\"163138AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\\\"},\\\"today\\\":{\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"encounter\\\",\\\"openmrs_entity_id\\\":\\\"encounter_date\\\"},\\\"deviceid\\\":{\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"concept\\\",\\\"openmrs_data_type\\\":\\\"deviceid\\\",\\\"openmrs_entity_id\\\":\\\"163149AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\\\"},\\\"subscriberid\\\":{\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"concept\\\",\\\"openmrs_data_type\\\":\\\"subscriberid\\\",\\\"openmrs_entity_id\\\":\\\"163150AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\\\"},\\\"simserial\\\":{\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"concept\\\",\\\"openmrs_data_type\\\":\\\"simserial\\\",\\\"openmrs_entity_id\\\":\\\"163151AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\\\"},\\\"phonenumber\\\":{\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"concept\\\",\\\"openmrs_data_type\\\":\\\"phonenumber\\\",\\\"openmrs_entity_id\\\":\\\"163152AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\\\"},\\\"encounter_location\\\":\\\"\\\",\\\"look_up\\\":{\\\"entity_id\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}},\\\"step1\\\":{\\\"display_back_button\\\":\\\"true\\\",\\\"title\\\":\\\"Birth Registration\\\",\\\"fields\\\":[{\\\"key\\\":\\\"medications_other\\\",\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"\\\",\\\"openmrs_entity_id\\\":\\\"\\\",\\\"type\\\":\\\"edit_text\\\",\\\"hint\\\":\\\"Specify\\\",\\\"v_regex\\\":{\\\"value\\\":\\\"[A-Za-z\\\\\\\\s\\\\\\\\.\\\\\\\\-]*\\\",\\\"err\\\":\\\"Please enter valid content\\\"},\\\"value\\\":\\\"10\\\",\\\"relevance\\\":{\\\"step1:medications\\\":{\\\"ex-checkbox\\\":[{\\\"or\\\":[\\\"other\\\"]}]}}},{\\\"key\\\":\\\"medications_other2\\\",\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"\\\",\\\"openmrs_entity_id\\\":\\\"\\\",\\\"type\\\":\\\"edit_text\\\",\\\"hint\\\":\\\"Specify\\\",\\\"v_regex\\\":{\\\"value\\\":\\\"[A-Za-z\\\\\\\\s\\\\\\\\.\\\\\\\\-]*\\\",\\\"err\\\":\\\"Please enter valid content\\\"},\\\"value\\\":\\\"10\\\",\\\"relevance\\\":{\\\"step1:medications\\\":{\\\"ex-checkbox\\\":[{\\\"or\\\":[\\\"other\\\"]}]}}},{\\\"key\\\":\\\"medications_other3\\\",\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"\\\",\\\"openmrs_entity_id\\\":\\\"\\\",\\\"type\\\":\\\"edit_text\\\",\\\"hint\\\":\\\"Specify\\\",\\\"v_regex\\\":{\\\"value\\\":\\\"[A-Za-z\\\\\\\\s\\\\\\\\.\\\\\\\\-]*\\\",\\\"err\\\":\\\"Please enter valid content\\\"},\\\"value\\\":\\\"20\\\",\\\"relevance\\\":{\\\"step1:medications\\\":{\\\"ex-checkbox\\\":[{\\\"or\\\":[\\\"other\\\"]}]}}}]}}\";\n+    @Before\n+    public void setUp() {\n+        MockitoAnnotations.initMocks(this);\n+        factory = new EditTextFactory();\n+    }\n+\n+    @Test\n+    public void testNumberEditTextFactoryInstantiatesViewsCorrectly() throws Exception {\n+        Assert.assertNotNull(factory);\n+        EditTextFactory factorySpy = Mockito.spy(factory);\n+        Assert.assertNotNull(factorySpy);\n+\n+        FormUtils formUtils = new FormUtils();\n+        FormUtils formUtilsSpy = Mockito.spy(formUtils);\n+        Assert.assertNotNull(formUtilsSpy);\n+\n+        Mockito.doReturn(resources).when(context).getResources();\n+        Assert.assertNotNull(resources);\n+\n+        context.setTheme(R.style.NativeFormsAppTheme);\n+        Mockito.doReturn(rootLayout).when(factorySpy).getRelativeLayout(context);\n+        Assert.assertNotNull(rootLayout);\n+\n+        Mockito.doReturn(editTextLayout).when(rootLayout).findViewById(R.id.edit_text_layout);\n+        Assert.assertNotNull(editTextLayout);\n+\n+        Mockito.doReturn(editText).when(editTextLayout).findViewById(R.id.edit_text);\n+        Assert.assertNotNull(editText);\n+\n+        Mockito.doReturn(editButton).when(editTextLayout).findViewById(R.id.material_edit_text_edit_button);\n+        Assert.assertNotNull(editButton);\n+\n+        Editable editable = new SpannableStringBuilder(\"34\");\n+        Mockito.doReturn(editable).when(editText).getText();\n+\n+        String gpsString = \"{\\\"key\\\":\\\"current_weight\\\",\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"\\\",\\\"openmrs_entity_id\\\":\\\"5089\\\",\\\"type\\\":\\\"edit_text\\\",\\\"edit_text_style\\\":\\\"bordered\\\",\\\"edit_type\\\":\\\"number\\\",\\\"hint\\\":\\\"30\\\",\\\"value\\\":\\\"34\\\",\\\"label_info_text\\\":\\\"The into text\\\",\\\"label_into_title\\\":\\\"The info title\\\",\\\"v_numeric\\\":{\\\"value\\\":\\\"true\\\",\\\"err\\\":\\\"\\\"},\\\"v_numeric_integer\\\":{\\\"value\\\":\\\"true\\\",\\\"err\\\":\\\"\\\"},\\\"v_min\\\":{\\\"value\\\":\\\"30\\\",\\\"err\\\":\\\"Weight must be equal or greater than 30\\\"},\\\"v_max\\\":{\\\"value\\\":\\\"180\\\",\\\"err\\\":\\\"Weight must be equal or less than 180\\\"},\\\"v_required\\\":{\\\"value\\\":\\\"true\\\",\\\"err\\\":\\\"Please enter the current weight\\\"},\\\"calculation\\\":{\\\"rules-engine\\\":{\\\"ex-rules\\\":{\\\"rules-file\\\":\\\"sample-calculation-rules.yml\\\"}}},\\\"relevance\\\":{\\\"rules-engine\\\":{\\\"ex-rules\\\":{\\\"rules-file\\\":\\\"sample-relevance-rules.yml\\\"}}},\\\"constraints\\\":{\\\"rules-engine\\\":{\\\"ex-rules\\\":{\\\"rules-file\\\":\\\"sample-constraints-rules.yml\\\"}}}}\";\n+        List<View> viewList = factorySpy.getViewsFromJson(\"RandomStepName\", context, formFragment, new JSONObject(gpsString), listener);\n+        Assert.assertNotNull(viewList);\n+        Assert.assertTrue(viewList.size() > 0);\n+    }\n+\n+    @Test\n+    public void testNameEditTextFactoryInstantiatesViewsCorrectly() throws Exception {\n+        Assert.assertNotNull(factory);\n+        EditTextFactory factorySpy = Mockito.spy(factory);\n+        Assert.assertNotNull(factorySpy);\n+\n+        FormUtils formUtils = new FormUtils();\n+        FormUtils formUtilsSpy = Mockito.spy(formUtils);\n+        Assert.assertNotNull(formUtilsSpy);\n+\n+        Mockito.doReturn(resources).when(context).getResources();\n+        Assert.assertNotNull(resources);\n+\n+        context.setTheme(R.style.NativeFormsAppTheme);\n+        Mockito.doReturn(rootLayout).when(factorySpy).getRelativeLayout(context);\n+        Assert.assertNotNull(rootLayout);\n+\n+        Mockito.doReturn(editTextLayout).when(rootLayout).findViewById(R.id.edit_text_layout);\n+        Assert.assertNotNull(editTextLayout);\n+\n+        Mockito.doReturn(editText).when(editTextLayout).findViewById(R.id.edit_text);\n+        Assert.assertNotNull(editText);\n+\n+        Mockito.doReturn(editButton).when(editTextLayout).findViewById(R.id.material_edit_text_edit_button);\n+        Assert.assertNotNull(editButton);\n+\n+        Editable editable = new SpannableStringBuilder(\"Lifted\");\n+        Mockito.doReturn(editable).when(editText).getText();\n+\n+        String gpsString = \"{\\\"key\\\":\\\"user_last_name\\\",\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"\\\",\\\"openmrs_entity_id\\\":\\\"\\\",\\\"type\\\":\\\"edit_text\\\",\\\"hint\\\":\\\"User Last name\\\",\\\"edit_type\\\":\\\"name\\\",\\\"value\\\":\\\"Lifted\\\",\\\"v_min_length\\\":{\\\"value\\\":\\\"6\\\",\\\"err\\\":\\\"Please enter a valid name\\\"},\\\"v_max_length\\\":{\\\"value\\\":\\\"10\\\",\\\"is_fixed_size\\\":\\\"true\\\",\\\"err\\\":\\\"Please enter a valid name\\\"},\\\"v_required\\\":{\\\"value\\\":\\\"true\\\",\\\"err\\\":\\\"Please enter the last name\\\"},\\\"v_regex\\\":{\\\"value\\\":\\\"[A-Za-z\\\\\\\\s\\\\\\\\.\\\\\\\\-]*\\\",\\\"err\\\":\\\"Please enter a valid name\\\"},\\\"v_url\\\":{\\\"value\\\":\\\"true\\\",\\\"err\\\":\\\"Please enter a valid name\\\"},\\\"v_email\\\":{\\\"value\\\":\\\"true\\\",\\\"err\\\":\\\"Please enter a valid name\\\"},\\\"relevance\\\":{\\\"step1:user_first_name\\\":{\\\"type\\\":\\\"string\\\",\\\"ex\\\":\\\"equalTo(., \\\\\\\"test\\\\\\\")\\\"}}}\";\n+        List<View> viewList = factorySpy.getViewsFromJson(\"RandomStepName\", context, formFragment, new JSONObject(gpsString), listener);\n+        Assert.assertNotNull(viewList);\n+        Assert.assertTrue(viewList.size() > 0);\n+    }\n+\n+    @Test\n+    public void testNameWithRelativeNumericIntegerEditTextFactoryInstantiatesViewsCorrectly() throws Exception {\n+        Assert.assertNotNull(factory);\n+        EditTextFactory factorySpy = Mockito.spy(factory);\n+        Assert.assertNotNull(factorySpy);\n+\n+        FormUtils formUtils = new FormUtils();\n+        FormUtils formUtilsSpy = Mockito.spy(formUtils);\n+        Assert.assertNotNull(formUtilsSpy);\n+\n+        Mockito.doReturn(resources).when(context).getResources();\n+        Assert.assertNotNull(resources);\n+\n+        context.setTheme(R.style.NativeFormsAppTheme);\n+        Mockito.doReturn(rootLayout).when(factorySpy).getRelativeLayout(context);\n+        Assert.assertNotNull(rootLayout);\n+\n+        Mockito.doReturn(editTextLayout).when(rootLayout).findViewById(R.id.edit_text_layout);\n+        Assert.assertNotNull(editTextLayout);\n+\n+        Mockito.doReturn(editText).when(editTextLayout).findViewById(R.id.edit_text);\n+        Assert.assertNotNull(editText);\n+\n+        Mockito.doReturn(editButton).when(editTextLayout).findViewById(R.id.material_edit_text_edit_button);\n+        Assert.assertNotNull(editButton);\n+\n+        Editable editable = new SpannableStringBuilder(\"Lifted\");\n+        Mockito.doReturn(editable).when(editText).getText();\n+\n+        Mockito.doReturn(jsonForm).when(formFragment).getCurrentJsonState();\n+\n+        String gpsString = \"{\\\"key\\\":\\\"user_last_name\\\",\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"\\\",\\\"openmrs_entity_id\\\":\\\"\\\",\\\"type\\\":\\\"edit_text\\\",\\\"hint\\\":\\\"User Last name\\\",\\\"edit_type\\\":\\\"name\\\",\\\"value\\\":\\\"Lifted\\\",\\\"v_min_length\\\":{\\\"value\\\":\\\"6\\\",\\\"err\\\":\\\"Please enter a valid name\\\"},\\\"v_max_length\\\":{\\\"value\\\":\\\"10\\\",\\\"is_fixed_size\\\":\\\"true\\\",\\\"err\\\":\\\"Please enter a valid name\\\"},\\\"v_required\\\":{\\\"value\\\":\\\"true\\\",\\\"err\\\":\\\"Please enter the last name\\\"},\\\"v_relative_max\\\":{\\\"value\\\":\\\"medications_other3\\\",\\\"err\\\":\\\"Enter required fields\\\"}}\";\n+        List<View> viewList = factorySpy.getViewsFromJson(\"RandomStepName\", context, formFragment, new JSONObject(gpsString), listener);\n+        Assert.assertNotNull(viewList);\n+        Assert.assertTrue(viewList.size() > 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c3f2275dec65e29d68f3f345490cc64a169f8c2"}, "originalPosition": 175}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYzOTExMzg5OnYy", "diffSide": "RIGHT", "path": "android-json-form-wizard/src/test/java/com/vijay/jsonwizard/widgets/EditTextFactoryTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxNDo0NDo1OVrOGUKOlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxNDo0NDo1OVrOGUKOlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzc5MjI3OA==", "bodyText": "I think we are better off asserting the exact value we expect based on the input in order to cover the ceiling edge case e.g. no duplicates", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/422#discussion_r423792278", "createdAt": "2020-05-12T14:44:59Z", "author": {"login": "ndegwamartin"}, "path": "android-json-form-wizard/src/test/java/com/vijay/jsonwizard/widgets/EditTextFactoryTest.java", "diffHunk": "@@ -0,0 +1,217 @@\n+package com.vijay.jsonwizard.widgets;\n+\n+import android.content.res.Resources;\n+import android.text.Editable;\n+import android.text.SpannableStringBuilder;\n+import android.view.View;\n+import android.widget.ImageView;\n+import android.widget.RelativeLayout;\n+\n+import com.rengwuxian.materialedittext.MaterialEditText;\n+import com.vijay.jsonwizard.BaseTest;\n+import com.vijay.jsonwizard.R;\n+import com.vijay.jsonwizard.activities.JsonFormActivity;\n+import com.vijay.jsonwizard.fragments.JsonFormFragment;\n+import com.vijay.jsonwizard.interfaces.CommonListener;\n+import com.vijay.jsonwizard.interfaces.JsonApi;\n+import com.vijay.jsonwizard.utils.FormUtils;\n+\n+import org.json.JSONObject;\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.mockito.Mock;\n+import org.mockito.Mockito;\n+import org.mockito.MockitoAnnotations;\n+\n+import java.util.List;\n+\n+public class EditTextFactoryTest extends BaseTest {\n+    private EditTextFactory factory;\n+    @Mock\n+    private JsonFormActivity context;\n+\n+    @Mock\n+    private JsonFormFragment formFragment;\n+\n+    @Mock\n+    private Resources resources;\n+\n+    @Mock\n+    private CommonListener listener;\n+\n+    @Mock\n+    private RelativeLayout rootLayout;\n+\n+    @Mock\n+    private RelativeLayout editTextLayout;\n+\n+    @Mock\n+    private MaterialEditText editText;\n+\n+    @Mock\n+    private ImageView editButton;\n+\n+    @Mock\n+    private MaterialEditText totalValueEditText;\n+\n+    @Mock\n+    private MaterialEditText relatedEditText1;\n+\n+    @Mock\n+    private MaterialEditText relatedEditText2;\n+\n+    private String jsonForm = \"{\\\"encounter_type\\\":\\\"Birth Registration\\\",\\\"show_errors_on_submit\\\":true,\\\"count\\\":\\\"1\\\",\\\"display_scroll_bars\\\":true,\\\"mother\\\":{\\\"encounter_type\\\":\\\"New Woman Registration\\\"},\\\"entity_id\\\":\\\"\\\",\\\"relational_id\\\":\\\"\\\",\\\"metadata\\\":{\\\"start\\\":{\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"concept\\\",\\\"openmrs_data_type\\\":\\\"start\\\",\\\"openmrs_entity_id\\\":\\\"163137AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\\\"},\\\"end\\\":{\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"concept\\\",\\\"openmrs_data_type\\\":\\\"end\\\",\\\"openmrs_entity_id\\\":\\\"163138AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\\\"},\\\"today\\\":{\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"encounter\\\",\\\"openmrs_entity_id\\\":\\\"encounter_date\\\"},\\\"deviceid\\\":{\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"concept\\\",\\\"openmrs_data_type\\\":\\\"deviceid\\\",\\\"openmrs_entity_id\\\":\\\"163149AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\\\"},\\\"subscriberid\\\":{\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"concept\\\",\\\"openmrs_data_type\\\":\\\"subscriberid\\\",\\\"openmrs_entity_id\\\":\\\"163150AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\\\"},\\\"simserial\\\":{\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"concept\\\",\\\"openmrs_data_type\\\":\\\"simserial\\\",\\\"openmrs_entity_id\\\":\\\"163151AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\\\"},\\\"phonenumber\\\":{\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"concept\\\",\\\"openmrs_data_type\\\":\\\"phonenumber\\\",\\\"openmrs_entity_id\\\":\\\"163152AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\\\"},\\\"encounter_location\\\":\\\"\\\",\\\"look_up\\\":{\\\"entity_id\\\":\\\"\\\",\\\"value\\\":\\\"\\\"}},\\\"step1\\\":{\\\"display_back_button\\\":\\\"true\\\",\\\"title\\\":\\\"Birth Registration\\\",\\\"fields\\\":[{\\\"key\\\":\\\"medications_other\\\",\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"\\\",\\\"openmrs_entity_id\\\":\\\"\\\",\\\"type\\\":\\\"edit_text\\\",\\\"hint\\\":\\\"Specify\\\",\\\"v_regex\\\":{\\\"value\\\":\\\"[A-Za-z\\\\\\\\s\\\\\\\\.\\\\\\\\-]*\\\",\\\"err\\\":\\\"Please enter valid content\\\"},\\\"value\\\":\\\"10\\\",\\\"relevance\\\":{\\\"step1:medications\\\":{\\\"ex-checkbox\\\":[{\\\"or\\\":[\\\"other\\\"]}]}}},{\\\"key\\\":\\\"medications_other2\\\",\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"\\\",\\\"openmrs_entity_id\\\":\\\"\\\",\\\"type\\\":\\\"edit_text\\\",\\\"hint\\\":\\\"Specify\\\",\\\"v_regex\\\":{\\\"value\\\":\\\"[A-Za-z\\\\\\\\s\\\\\\\\.\\\\\\\\-]*\\\",\\\"err\\\":\\\"Please enter valid content\\\"},\\\"value\\\":\\\"10\\\",\\\"relevance\\\":{\\\"step1:medications\\\":{\\\"ex-checkbox\\\":[{\\\"or\\\":[\\\"other\\\"]}]}}},{\\\"key\\\":\\\"medications_other3\\\",\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"\\\",\\\"openmrs_entity_id\\\":\\\"\\\",\\\"type\\\":\\\"edit_text\\\",\\\"hint\\\":\\\"Specify\\\",\\\"v_regex\\\":{\\\"value\\\":\\\"[A-Za-z\\\\\\\\s\\\\\\\\.\\\\\\\\-]*\\\",\\\"err\\\":\\\"Please enter valid content\\\"},\\\"value\\\":\\\"20\\\",\\\"relevance\\\":{\\\"step1:medications\\\":{\\\"ex-checkbox\\\":[{\\\"or\\\":[\\\"other\\\"]}]}}}]}}\";\n+    @Before\n+    public void setUp() {\n+        MockitoAnnotations.initMocks(this);\n+        factory = new EditTextFactory();\n+    }\n+\n+    @Test\n+    public void testNumberEditTextFactoryInstantiatesViewsCorrectly() throws Exception {\n+        Assert.assertNotNull(factory);\n+        EditTextFactory factorySpy = Mockito.spy(factory);\n+        Assert.assertNotNull(factorySpy);\n+\n+        FormUtils formUtils = new FormUtils();\n+        FormUtils formUtilsSpy = Mockito.spy(formUtils);\n+        Assert.assertNotNull(formUtilsSpy);\n+\n+        Mockito.doReturn(resources).when(context).getResources();\n+        Assert.assertNotNull(resources);\n+\n+        context.setTheme(R.style.NativeFormsAppTheme);\n+        Mockito.doReturn(rootLayout).when(factorySpy).getRelativeLayout(context);\n+        Assert.assertNotNull(rootLayout);\n+\n+        Mockito.doReturn(editTextLayout).when(rootLayout).findViewById(R.id.edit_text_layout);\n+        Assert.assertNotNull(editTextLayout);\n+\n+        Mockito.doReturn(editText).when(editTextLayout).findViewById(R.id.edit_text);\n+        Assert.assertNotNull(editText);\n+\n+        Mockito.doReturn(editButton).when(editTextLayout).findViewById(R.id.material_edit_text_edit_button);\n+        Assert.assertNotNull(editButton);\n+\n+        Editable editable = new SpannableStringBuilder(\"34\");\n+        Mockito.doReturn(editable).when(editText).getText();\n+\n+        String gpsString = \"{\\\"key\\\":\\\"current_weight\\\",\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"\\\",\\\"openmrs_entity_id\\\":\\\"5089\\\",\\\"type\\\":\\\"edit_text\\\",\\\"edit_text_style\\\":\\\"bordered\\\",\\\"edit_type\\\":\\\"number\\\",\\\"hint\\\":\\\"30\\\",\\\"value\\\":\\\"34\\\",\\\"label_info_text\\\":\\\"The into text\\\",\\\"label_into_title\\\":\\\"The info title\\\",\\\"v_numeric\\\":{\\\"value\\\":\\\"true\\\",\\\"err\\\":\\\"\\\"},\\\"v_numeric_integer\\\":{\\\"value\\\":\\\"true\\\",\\\"err\\\":\\\"\\\"},\\\"v_min\\\":{\\\"value\\\":\\\"30\\\",\\\"err\\\":\\\"Weight must be equal or greater than 30\\\"},\\\"v_max\\\":{\\\"value\\\":\\\"180\\\",\\\"err\\\":\\\"Weight must be equal or less than 180\\\"},\\\"v_required\\\":{\\\"value\\\":\\\"true\\\",\\\"err\\\":\\\"Please enter the current weight\\\"},\\\"calculation\\\":{\\\"rules-engine\\\":{\\\"ex-rules\\\":{\\\"rules-file\\\":\\\"sample-calculation-rules.yml\\\"}}},\\\"relevance\\\":{\\\"rules-engine\\\":{\\\"ex-rules\\\":{\\\"rules-file\\\":\\\"sample-relevance-rules.yml\\\"}}},\\\"constraints\\\":{\\\"rules-engine\\\":{\\\"ex-rules\\\":{\\\"rules-file\\\":\\\"sample-constraints-rules.yml\\\"}}}}\";\n+        List<View> viewList = factorySpy.getViewsFromJson(\"RandomStepName\", context, formFragment, new JSONObject(gpsString), listener);\n+        Assert.assertNotNull(viewList);\n+        Assert.assertTrue(viewList.size() > 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c3f2275dec65e29d68f3f345490cc64a169f8c2"}, "originalPosition": 103}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2053, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}