{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3Mzk3Mjg1", "number": 346, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxMzo1OTo1NFrODa4sxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxNDowMDowMFrODa4s6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5NTE4NTM1OnYy", "diffSide": "RIGHT", "path": "android-json-form-wizard/src/main/java/com/vijay/jsonwizard/utils/FormUtils.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxMzo1OTo1NFrOFiDjnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxMzo1OTo1NFrOFiDjnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTI1NDE3Mg==", "bodyText": "Catch a less generic exception", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/346#discussion_r371254172", "createdAt": "2020-01-27T13:59:54Z", "author": {"login": "bennsimon"}, "path": "android-json-form-wizard/src/main/java/com/vijay/jsonwizard/utils/FormUtils.java", "diffHunk": "@@ -1315,6 +1457,93 @@ public void getOptionsOpenMRSAttributes(JSONObject item, JSONArray valueOpenMRSA\n         }\n     }\n \n+    public String getOptionsValueRadioButton(String value, JSONArray options) throws JSONException {\n+        String secondaryValue = \"\";\n+        if (!TextUtils.isEmpty(value)) {\n+            for (int i = 0; i < options.length(); i++) {\n+                JSONObject option = options.getJSONObject(i);\n+                if (option.has(JsonFormConstants.KEY) && value.equals(option.getString(JsonFormConstants.KEY))) {\n+                    String key = option.getString(JsonFormConstants.KEY);\n+                    String text = option.getString(JsonFormConstants.TEXT);\n+                    secondaryValue = key + \":\" + text;\n+                }\n+            }\n+        }\n+        return secondaryValue;\n+    }\n+\n+    public void getSpinnerValueOpenMRSAttributes(JSONObject item, JSONArray valueOpenMRSAttributes) throws JSONException {\n+        if (item != null && item.equals(JsonFormConstants.SPINNER) && item.has(JsonFormConstants.OPENMRS_CHOICE_IDS)) {\n+            JSONObject openMRSChoiceIds = item.getJSONObject(JsonFormConstants.OPENMRS_CHOICE_IDS);\n+            String value = item.getString(JsonFormConstants.VALUE);\n+            Iterator<String> keys = openMRSChoiceIds.keys();\n+            while (keys.hasNext()) {\n+                String key = keys.next();\n+                if (value.equals(key)) {\n+                    JSONObject jsonObject = new JSONObject();\n+                    String optionOpenMRSConceptId = openMRSChoiceIds.get(key).toString();\n+                    jsonObject.put(JsonFormConstants.KEY, item.getString(JsonFormConstants.KEY));\n+                    jsonObject.put(JsonFormConstants.OPENMRS_ENTITY_PARENT,\n+                            item.getString(JsonFormConstants.OPENMRS_ENTITY_PARENT));\n+                    jsonObject.put(JsonFormConstants.OPENMRS_ENTITY, item.getString(JsonFormConstants.OPENMRS_ENTITY));\n+                    jsonObject.put(JsonFormConstants.OPENMRS_ENTITY_ID, optionOpenMRSConceptId);\n+\n+                    valueOpenMRSAttributes.put(jsonObject);\n+                }\n+\n+            }\n+        }\n+    }\n+\n+    private JSONObject createValueObject(String key, String type, String label, int index, JSONArray values, JSONObject openMRSAttributes, JSONArray valueOpenMRSAttributes) {\n+        JSONObject jsonObject = new JSONObject();\n+        try {\n+            if (values.length() > 0) {\n+                jsonObject.put(JsonFormConstants.KEY, key);\n+                jsonObject.put(JsonFormConstants.TYPE, type);\n+                jsonObject.put(JsonFormConstants.LABEL, label);\n+                jsonObject.put(JsonFormConstants.INDEX, index);\n+                jsonObject.put(JsonFormConstants.VALUES, values);\n+                jsonObject.put(JsonFormConstants.OPENMRS_ATTRIBUTES, openMRSAttributes);\n+                if (valueOpenMRSAttributes.length() > 0) {\n+                    jsonObject.put(JsonFormConstants.VALUE_OPENMRS_ATTRIBUTES, valueOpenMRSAttributes);\n+                }\n+            }\n+        } catch (Exception e) {\n+            Timber.e(e, \" --> createValueObject\");\n+\n+        }\n+        return jsonObject;\n+    }\n+\n+    /**\n+     * @param key\n+     * @param type\n+     * @param values\n+     * @param openMRSAttributes\n+     * @param valueOpenMRSAttributes\n+     * @return\n+     */\n+    public JSONObject createSecondaryValueObject(String key, String type, JSONArray values, JSONObject openMRSAttributes,\n+                                                 JSONArray valueOpenMRSAttributes) {\n+        JSONObject jsonObject = new JSONObject();\n+        try {\n+            if (values.length() > 0) {\n+                jsonObject.put(JsonFormConstants.KEY, key);\n+                jsonObject.put(JsonFormConstants.TYPE, type);\n+                jsonObject.put(JsonFormConstants.VALUES, values);\n+                jsonObject.put(JsonFormConstants.OPENMRS_ATTRIBUTES, openMRSAttributes);\n+                if (valueOpenMRSAttributes.length() > 0) {\n+                    jsonObject.put(JsonFormConstants.VALUE_OPENMRS_ATTRIBUTES, valueOpenMRSAttributes);\n+                }\n+            }\n+        } catch (Exception e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de8e6ccb0e21f5327da9f9b1d910209e47d9f86f"}, "originalPosition": 247}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5NTE4NTY5OnYy", "diffSide": "RIGHT", "path": "android-json-form-wizard/src/main/java/com/vijay/jsonwizard/utils/FormUtils.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxNDowMDowMFrOFiDjzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxNDowMDowMFrOFiDjzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTI1NDIyMw==", "bodyText": "Catch a less generic exception", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/346#discussion_r371254223", "createdAt": "2020-01-27T14:00:00Z", "author": {"login": "bennsimon"}, "path": "android-json-form-wizard/src/main/java/com/vijay/jsonwizard/utils/FormUtils.java", "diffHunk": "@@ -1315,6 +1457,93 @@ public void getOptionsOpenMRSAttributes(JSONObject item, JSONArray valueOpenMRSA\n         }\n     }\n \n+    public String getOptionsValueRadioButton(String value, JSONArray options) throws JSONException {\n+        String secondaryValue = \"\";\n+        if (!TextUtils.isEmpty(value)) {\n+            for (int i = 0; i < options.length(); i++) {\n+                JSONObject option = options.getJSONObject(i);\n+                if (option.has(JsonFormConstants.KEY) && value.equals(option.getString(JsonFormConstants.KEY))) {\n+                    String key = option.getString(JsonFormConstants.KEY);\n+                    String text = option.getString(JsonFormConstants.TEXT);\n+                    secondaryValue = key + \":\" + text;\n+                }\n+            }\n+        }\n+        return secondaryValue;\n+    }\n+\n+    public void getSpinnerValueOpenMRSAttributes(JSONObject item, JSONArray valueOpenMRSAttributes) throws JSONException {\n+        if (item != null && item.equals(JsonFormConstants.SPINNER) && item.has(JsonFormConstants.OPENMRS_CHOICE_IDS)) {\n+            JSONObject openMRSChoiceIds = item.getJSONObject(JsonFormConstants.OPENMRS_CHOICE_IDS);\n+            String value = item.getString(JsonFormConstants.VALUE);\n+            Iterator<String> keys = openMRSChoiceIds.keys();\n+            while (keys.hasNext()) {\n+                String key = keys.next();\n+                if (value.equals(key)) {\n+                    JSONObject jsonObject = new JSONObject();\n+                    String optionOpenMRSConceptId = openMRSChoiceIds.get(key).toString();\n+                    jsonObject.put(JsonFormConstants.KEY, item.getString(JsonFormConstants.KEY));\n+                    jsonObject.put(JsonFormConstants.OPENMRS_ENTITY_PARENT,\n+                            item.getString(JsonFormConstants.OPENMRS_ENTITY_PARENT));\n+                    jsonObject.put(JsonFormConstants.OPENMRS_ENTITY, item.getString(JsonFormConstants.OPENMRS_ENTITY));\n+                    jsonObject.put(JsonFormConstants.OPENMRS_ENTITY_ID, optionOpenMRSConceptId);\n+\n+                    valueOpenMRSAttributes.put(jsonObject);\n+                }\n+\n+            }\n+        }\n+    }\n+\n+    private JSONObject createValueObject(String key, String type, String label, int index, JSONArray values, JSONObject openMRSAttributes, JSONArray valueOpenMRSAttributes) {\n+        JSONObject jsonObject = new JSONObject();\n+        try {\n+            if (values.length() > 0) {\n+                jsonObject.put(JsonFormConstants.KEY, key);\n+                jsonObject.put(JsonFormConstants.TYPE, type);\n+                jsonObject.put(JsonFormConstants.LABEL, label);\n+                jsonObject.put(JsonFormConstants.INDEX, index);\n+                jsonObject.put(JsonFormConstants.VALUES, values);\n+                jsonObject.put(JsonFormConstants.OPENMRS_ATTRIBUTES, openMRSAttributes);\n+                if (valueOpenMRSAttributes.length() > 0) {\n+                    jsonObject.put(JsonFormConstants.VALUE_OPENMRS_ATTRIBUTES, valueOpenMRSAttributes);\n+                }\n+            }\n+        } catch (Exception e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de8e6ccb0e21f5327da9f9b1d910209e47d9f86f"}, "originalPosition": 219}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2076, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}