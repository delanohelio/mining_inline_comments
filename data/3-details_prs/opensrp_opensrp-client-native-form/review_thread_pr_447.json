{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ1MjY5NTc3", "number": 447, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwOTo0Nzo1M1rOEMAQng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwOTo0OTo1NVrOEMATtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxMDIyNjIyOnYy", "diffSide": "RIGHT", "path": "android-json-form-wizard/src/test/java/com/vijay/jsonwizard/widgets/BasicRDTCaptureFactoryTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwOTo0Nzo1M1rOGt3LQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwOTo0Nzo1M1rOGt3LQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDc0MzEwNg==", "bodyText": "Are these necessary?", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/447#discussion_r450743106", "createdAt": "2020-07-07T09:47:53Z", "author": {"login": "bennsimon"}, "path": "android-json-form-wizard/src/test/java/com/vijay/jsonwizard/widgets/BasicRDTCaptureFactoryTest.java", "diffHunk": "@@ -0,0 +1,64 @@\n+package com.vijay.jsonwizard.widgets;\n+\n+import android.view.View;\n+\n+import com.vijay.jsonwizard.BaseTest;\n+import com.vijay.jsonwizard.activities.JsonFormActivity;\n+import com.vijay.jsonwizard.fragments.JsonFormFragment;\n+import com.vijay.jsonwizard.interfaces.CommonListener;\n+\n+import org.json.JSONObject;\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.mockito.Mock;\n+import org.mockito.Mockito;\n+import org.mockito.MockitoAnnotations;\n+\n+import java.util.List;\n+import java.util.Set;\n+\n+public class BasicRDTCaptureFactoryTest extends BaseTest {\n+    private BasicRDTCaptureFactory factory;\n+    @Mock\n+    private JsonFormActivity context;\n+    @Mock\n+    private JsonFormFragment formFragment;\n+    @Mock\n+    private CommonListener listener;\n+    @Mock\n+    private View rootLayout;\n+\n+    @Before\n+    public void setUp() {\n+        MockitoAnnotations.initMocks(this);\n+        factory = new BasicRDTCaptureFactory();\n+    }\n+\n+    @Test\n+    public void testRDTCaptureFactoryInstantiatesViewsCorrectly() throws Exception {\n+        String rdtCaptureString = \"{\\\"key\\\":\\\"rdt_capture\\\",\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"\\\",\\\"openmrs_entity_id\\\":\\\"\\\",\\\"type\\\":\\\"rdt_capture\\\",\\\"calculation\\\":{\\\"rules-engine\\\":{\\\"ex-rules\\\":{\\\"rules-file\\\":\\\"sample-calculation-rules.yml\\\"}}},\\\"relevance\\\":{\\\"rules-engine\\\":{\\\"ex-rules\\\":{\\\"rules-file\\\":\\\"sample-relevance-rules.yml\\\"}}},\\\"constraints\\\":{\\\"rules-engine\\\":{\\\"ex-rules\\\":{\\\"rules-file\\\":\\\"sample-constraints-rules.yml\\\"}}}}\";\n+        JSONObject rdtCapture = new JSONObject(rdtCaptureString);\n+        Assert.assertNotNull(rdtCapture);\n+\n+        Assert.assertNotNull(factory);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b79d278f83268b7350434ddc21c4b2d2f25021f"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxMDIyODIxOnYy", "diffSide": "RIGHT", "path": "android-json-form-wizard/src/test/java/com/vijay/jsonwizard/widgets/BasicRDTCaptureFactoryTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwOTo0ODoyN1rOGt3MgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwOTo0ODoyN1rOGt3MgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDc0MzQyNQ==", "bodyText": "Is this necessary", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/447#discussion_r450743425", "createdAt": "2020-07-07T09:48:27Z", "author": {"login": "bennsimon"}, "path": "android-json-form-wizard/src/test/java/com/vijay/jsonwizard/widgets/BasicRDTCaptureFactoryTest.java", "diffHunk": "@@ -0,0 +1,64 @@\n+package com.vijay.jsonwizard.widgets;\n+\n+import android.view.View;\n+\n+import com.vijay.jsonwizard.BaseTest;\n+import com.vijay.jsonwizard.activities.JsonFormActivity;\n+import com.vijay.jsonwizard.fragments.JsonFormFragment;\n+import com.vijay.jsonwizard.interfaces.CommonListener;\n+\n+import org.json.JSONObject;\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.mockito.Mock;\n+import org.mockito.Mockito;\n+import org.mockito.MockitoAnnotations;\n+\n+import java.util.List;\n+import java.util.Set;\n+\n+public class BasicRDTCaptureFactoryTest extends BaseTest {\n+    private BasicRDTCaptureFactory factory;\n+    @Mock\n+    private JsonFormActivity context;\n+    @Mock\n+    private JsonFormFragment formFragment;\n+    @Mock\n+    private CommonListener listener;\n+    @Mock\n+    private View rootLayout;\n+\n+    @Before\n+    public void setUp() {\n+        MockitoAnnotations.initMocks(this);\n+        factory = new BasicRDTCaptureFactory();\n+    }\n+\n+    @Test\n+    public void testRDTCaptureFactoryInstantiatesViewsCorrectly() throws Exception {\n+        String rdtCaptureString = \"{\\\"key\\\":\\\"rdt_capture\\\",\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"\\\",\\\"openmrs_entity_id\\\":\\\"\\\",\\\"type\\\":\\\"rdt_capture\\\",\\\"calculation\\\":{\\\"rules-engine\\\":{\\\"ex-rules\\\":{\\\"rules-file\\\":\\\"sample-calculation-rules.yml\\\"}}},\\\"relevance\\\":{\\\"rules-engine\\\":{\\\"ex-rules\\\":{\\\"rules-file\\\":\\\"sample-relevance-rules.yml\\\"}}},\\\"constraints\\\":{\\\"rules-engine\\\":{\\\"ex-rules\\\":{\\\"rules-file\\\":\\\"sample-constraints-rules.yml\\\"}}}}\";\n+        JSONObject rdtCapture = new JSONObject(rdtCaptureString);\n+        Assert.assertNotNull(rdtCapture);\n+\n+        Assert.assertNotNull(factory);\n+        BasicRDTCaptureFactory factorySpy = Mockito.spy(factory);\n+        Assert.assertNotNull(factorySpy);\n+\n+        Mockito.doReturn(rootLayout).when(factorySpy).getRootLayout(context);\n+        Mockito.doReturn(false).when(factorySpy).isPermissionGiven();\n+\n+        List<View> viewList = factorySpy.getViewsFromJson(\"RandomStepName\", context, formFragment, rdtCapture, listener);\n+        Assert.assertNotNull(viewList);\n+        Assert.assertEquals(viewList.size(), 1);\n+    }\n+\n+    @Test\n+    public void testGetCustomTranslatableWidgetFields() {\n+        Assert.assertNotNull(factory);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b79d278f83268b7350434ddc21c4b2d2f25021f"}, "originalPosition": 58}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxMDIyOTYxOnYy", "diffSide": "RIGHT", "path": "android-json-form-wizard/src/test/java/com/vijay/jsonwizard/widgets/NumberSelectorFactoryTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwOTo0ODo0NlrOGt3NWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwOTo0ODo0NlrOGt3NWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDc0MzY0Mw==", "bodyText": "Are these necessary?", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/447#discussion_r450743643", "createdAt": "2020-07-07T09:48:46Z", "author": {"login": "bennsimon"}, "path": "android-json-form-wizard/src/test/java/com/vijay/jsonwizard/widgets/NumberSelectorFactoryTest.java", "diffHunk": "@@ -1,17 +1,66 @@\n package com.vijay.jsonwizard.widgets;\n \n+import android.content.res.Resources;\n+import android.view.View;\n+import android.widget.LinearLayout;\n+\n import com.vijay.jsonwizard.BaseTest;\n+import com.vijay.jsonwizard.activities.JsonFormActivity;\n+import com.vijay.jsonwizard.fragments.JsonFormFragment;\n+import com.vijay.jsonwizard.interfaces.CommonListener;\n+import com.vijay.jsonwizard.views.CustomTextView;\n \n+import org.json.JSONObject;\n import org.junit.Assert;\n import org.junit.Before;\n import org.junit.Test;\n+import org.mockito.ArgumentMatchers;\n+import org.mockito.Mock;\n import org.mockito.Mockito;\n import org.mockito.MockitoAnnotations;\n \n+import java.util.List;\n+import java.util.Set;\n+\n public class NumberSelectorFactoryTest extends BaseTest {\n+    private NumberSelectorFactory factory;\n+    @Mock\n+    private JsonFormActivity context;\n+    @Mock\n+    private JsonFormFragment formFragment;\n+    @Mock\n+    private CommonListener listener;\n+    @Mock\n+    private LinearLayout rootLayout;\n+    @Mock\n+    private CustomTextView customTextView;\n+    @Mock\n+    private Resources resources;\n+\n     @Before\n     public void setUp() {\n         MockitoAnnotations.initMocks(this);\n+        factory = new NumberSelectorFactory();\n+    }\n+\n+    @Test\n+    public void testNumberSelectorFactoryInstantiatesViewsCorrectly() throws Exception {\n+        String numberSelectorFactoryString = \"{\\\"key\\\":\\\"user_form\\\",\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"\\\",\\\"openmrs_entity_id\\\":\\\"\\\",\\\"type\\\":\\\"numbers_selector\\\",\\\"number_of_selectors\\\":\\\"5\\\",\\\"start_number\\\":\\\"1\\\",\\\"max_value\\\":\\\"15\\\",\\\"text_size\\\":\\\"16px\\\",\\\"text_color\\\":\\\"#000000\\\",\\\"selected_text_color\\\":\\\"#ffffff\\\",\\\"v_required\\\":{\\\"value\\\":true},\\\"calculation\\\":{\\\"rules-engine\\\":{\\\"ex-rules\\\":{\\\"rules-file\\\":\\\"sample-calculation-rules.yml\\\"}}},\\\"relevance\\\":{\\\"rules-engine\\\":{\\\"ex-rules\\\":{\\\"rules-file\\\":\\\"sample-relevance-rules.yml\\\"}}},\\\"constraints\\\":{\\\"rules-engine\\\":{\\\"ex-rules\\\":{\\\"rules-file\\\":\\\"sample-constraints-rules.yml\\\"}}}}\";\n+        JSONObject numberSelectorObject = new JSONObject(numberSelectorFactoryString);\n+        Assert.assertNotNull(numberSelectorFactoryString);\n+\n+        Assert.assertNotNull(factory);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b79d278f83268b7350434ddc21c4b2d2f25021f"}, "originalPosition": 52}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxMDIzMjE0OnYy", "diffSide": "RIGHT", "path": "android-json-form-wizard/src/test/java/com/vijay/jsonwizard/widgets/NumberSelectorFactoryTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwOTo0OToyN1rOGt3O4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwOTo0OToyN1rOGt3O4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDc0NDAzMw==", "bodyText": "its supposed to be the other way round", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/447#discussion_r450744033", "createdAt": "2020-07-07T09:49:27Z", "author": {"login": "bennsimon"}, "path": "android-json-form-wizard/src/test/java/com/vijay/jsonwizard/widgets/NumberSelectorFactoryTest.java", "diffHunk": "@@ -1,17 +1,66 @@\n package com.vijay.jsonwizard.widgets;\n \n+import android.content.res.Resources;\n+import android.view.View;\n+import android.widget.LinearLayout;\n+\n import com.vijay.jsonwizard.BaseTest;\n+import com.vijay.jsonwizard.activities.JsonFormActivity;\n+import com.vijay.jsonwizard.fragments.JsonFormFragment;\n+import com.vijay.jsonwizard.interfaces.CommonListener;\n+import com.vijay.jsonwizard.views.CustomTextView;\n \n+import org.json.JSONObject;\n import org.junit.Assert;\n import org.junit.Before;\n import org.junit.Test;\n+import org.mockito.ArgumentMatchers;\n+import org.mockito.Mock;\n import org.mockito.Mockito;\n import org.mockito.MockitoAnnotations;\n \n+import java.util.List;\n+import java.util.Set;\n+\n public class NumberSelectorFactoryTest extends BaseTest {\n+    private NumberSelectorFactory factory;\n+    @Mock\n+    private JsonFormActivity context;\n+    @Mock\n+    private JsonFormFragment formFragment;\n+    @Mock\n+    private CommonListener listener;\n+    @Mock\n+    private LinearLayout rootLayout;\n+    @Mock\n+    private CustomTextView customTextView;\n+    @Mock\n+    private Resources resources;\n+\n     @Before\n     public void setUp() {\n         MockitoAnnotations.initMocks(this);\n+        factory = new NumberSelectorFactory();\n+    }\n+\n+    @Test\n+    public void testNumberSelectorFactoryInstantiatesViewsCorrectly() throws Exception {\n+        String numberSelectorFactoryString = \"{\\\"key\\\":\\\"user_form\\\",\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"\\\",\\\"openmrs_entity_id\\\":\\\"\\\",\\\"type\\\":\\\"numbers_selector\\\",\\\"number_of_selectors\\\":\\\"5\\\",\\\"start_number\\\":\\\"1\\\",\\\"max_value\\\":\\\"15\\\",\\\"text_size\\\":\\\"16px\\\",\\\"text_color\\\":\\\"#000000\\\",\\\"selected_text_color\\\":\\\"#ffffff\\\",\\\"v_required\\\":{\\\"value\\\":true},\\\"calculation\\\":{\\\"rules-engine\\\":{\\\"ex-rules\\\":{\\\"rules-file\\\":\\\"sample-calculation-rules.yml\\\"}}},\\\"relevance\\\":{\\\"rules-engine\\\":{\\\"ex-rules\\\":{\\\"rules-file\\\":\\\"sample-relevance-rules.yml\\\"}}},\\\"constraints\\\":{\\\"rules-engine\\\":{\\\"ex-rules\\\":{\\\"rules-file\\\":\\\"sample-constraints-rules.yml\\\"}}}}\";\n+        JSONObject numberSelectorObject = new JSONObject(numberSelectorFactoryString);\n+        Assert.assertNotNull(numberSelectorFactoryString);\n+\n+        Assert.assertNotNull(factory);\n+        NumberSelectorFactory factorySpy = Mockito.spy(factory);\n+        Assert.assertNotNull(factorySpy);\n+\n+        Mockito.doReturn(rootLayout).when(factorySpy).getRootLayout(context);\n+        Mockito.doReturn(customTextView).when(factorySpy).getCustomTextView(ArgumentMatchers.eq(context), ArgumentMatchers.eq(numberSelectorObject), ArgumentMatchers.anyInt(), ArgumentMatchers.anyInt());\n+        Mockito.doReturn(resources).when(context).getResources();\n+        Mockito.doReturn(\"2\").when(customTextView).getText();\n+\n+        List<View> viewList = factorySpy.getViewsFromJson(\"RandomStepName\", context, formFragment, numberSelectorObject, listener);\n+        Assert.assertNotNull(viewList);\n+        Assert.assertEquals(viewList.size(), 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b79d278f83268b7350434ddc21c4b2d2f25021f"}, "originalPosition": 63}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxMDIzNDE0OnYy", "diffSide": "RIGHT", "path": "android-json-form-wizard/src/test/java/com/vijay/jsonwizard/widgets/BasicRDTCaptureFactoryTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwOTo0OTo1NVrOGt3QIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwOTo0OTo1NVrOGt3QIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDc0NDM1Mg==", "bodyText": "its supposed to be the other way round", "url": "https://github.com/opensrp/opensrp-client-native-form/pull/447#discussion_r450744352", "createdAt": "2020-07-07T09:49:55Z", "author": {"login": "bennsimon"}, "path": "android-json-form-wizard/src/test/java/com/vijay/jsonwizard/widgets/BasicRDTCaptureFactoryTest.java", "diffHunk": "@@ -0,0 +1,64 @@\n+package com.vijay.jsonwizard.widgets;\n+\n+import android.view.View;\n+\n+import com.vijay.jsonwizard.BaseTest;\n+import com.vijay.jsonwizard.activities.JsonFormActivity;\n+import com.vijay.jsonwizard.fragments.JsonFormFragment;\n+import com.vijay.jsonwizard.interfaces.CommonListener;\n+\n+import org.json.JSONObject;\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.mockito.Mock;\n+import org.mockito.Mockito;\n+import org.mockito.MockitoAnnotations;\n+\n+import java.util.List;\n+import java.util.Set;\n+\n+public class BasicRDTCaptureFactoryTest extends BaseTest {\n+    private BasicRDTCaptureFactory factory;\n+    @Mock\n+    private JsonFormActivity context;\n+    @Mock\n+    private JsonFormFragment formFragment;\n+    @Mock\n+    private CommonListener listener;\n+    @Mock\n+    private View rootLayout;\n+\n+    @Before\n+    public void setUp() {\n+        MockitoAnnotations.initMocks(this);\n+        factory = new BasicRDTCaptureFactory();\n+    }\n+\n+    @Test\n+    public void testRDTCaptureFactoryInstantiatesViewsCorrectly() throws Exception {\n+        String rdtCaptureString = \"{\\\"key\\\":\\\"rdt_capture\\\",\\\"openmrs_entity_parent\\\":\\\"\\\",\\\"openmrs_entity\\\":\\\"\\\",\\\"openmrs_entity_id\\\":\\\"\\\",\\\"type\\\":\\\"rdt_capture\\\",\\\"calculation\\\":{\\\"rules-engine\\\":{\\\"ex-rules\\\":{\\\"rules-file\\\":\\\"sample-calculation-rules.yml\\\"}}},\\\"relevance\\\":{\\\"rules-engine\\\":{\\\"ex-rules\\\":{\\\"rules-file\\\":\\\"sample-relevance-rules.yml\\\"}}},\\\"constraints\\\":{\\\"rules-engine\\\":{\\\"ex-rules\\\":{\\\"rules-file\\\":\\\"sample-constraints-rules.yml\\\"}}}}\";\n+        JSONObject rdtCapture = new JSONObject(rdtCaptureString);\n+        Assert.assertNotNull(rdtCapture);\n+\n+        Assert.assertNotNull(factory);\n+        BasicRDTCaptureFactory factorySpy = Mockito.spy(factory);\n+        Assert.assertNotNull(factorySpy);\n+\n+        Mockito.doReturn(rootLayout).when(factorySpy).getRootLayout(context);\n+        Mockito.doReturn(false).when(factorySpy).isPermissionGiven();\n+\n+        List<View> viewList = factorySpy.getViewsFromJson(\"RandomStepName\", context, formFragment, rdtCapture, listener);\n+        Assert.assertNotNull(viewList);\n+        Assert.assertEquals(viewList.size(), 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9b79d278f83268b7350434ddc21c4b2d2f25021f"}, "originalPosition": 53}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2059, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}