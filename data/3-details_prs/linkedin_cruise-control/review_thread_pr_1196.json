{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwNTE0OTU1", "number": 1196, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxODoxMzowM1rOD-Vaqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxOTowOTo0NlrOD-WzHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2Njg5MTk1OnYy", "diffSide": "RIGHT", "path": "cruise-control/src/main/java/com/linkedin/kafka/cruisecontrol/executor/Executor.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxODoxMzowM1rOGYX-OQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxODoxMzowM1rOGYX-OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODIxMTc2OQ==", "bodyText": "should we apply the same exception handling logic to isOngoingIntraBrokerReplicaMovement() ? currently in side that method we ignore these exception.", "url": "https://github.com/linkedin/cruise-control/pull/1196#discussion_r428211769", "createdAt": "2020-05-20T18:13:03Z", "author": {"login": "kidkun"}, "path": "cruise-control/src/main/java/com/linkedin/kafka/cruisecontrol/executor/Executor.java", "diffHunk": "@@ -573,8 +576,15 @@ private void startExecution(LoadMonitor loadMonitor,\n    * Sanity check whether there are ongoing (1) inter-broker or intra-broker replica movements or (2) leadership movements.\n    */\n   private void sanityCheckOngoingMovement() throws OngoingExecutionException {\n+    boolean hasOngoingPartitionReassignments;\n+    try {\n+      hasOngoingPartitionReassignments = hasOngoingPartitionReassignments();\n+    } catch (TimeoutException | InterruptedException | ExecutionException e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc5b844a126df2f46e3b13004fefed6dc6de8583"}, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2Njk5ODcxOnYy", "diffSide": "RIGHT", "path": "cruise-control/src/main/java/com/linkedin/kafka/cruisecontrol/executor/Executor.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxODozODoxMFrOGYY_1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxODozODoxMFrOGYY_1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODIyODU2Nw==", "bodyText": "nit: update Javadoc of this method.\nalso the description seems inaccurate, we are checking the latest metadata instead of zookeeper for task finish status.", "url": "https://github.com/linkedin/cruise-control/pull/1196#discussion_r428228567", "createdAt": "2020-05-20T18:38:10Z", "author": {"login": "kidkun"}, "path": "cruise-control/src/main/java/com/linkedin/kafka/cruisecontrol/executor/Executor.java", "diffHunk": "@@ -1157,7 +1167,8 @@ private void deleteZNodesToStopExecution() {\n     /**\n      * This method periodically checks ZooKeeper to see if (1) partition or (2) leadership reassignment has finished or not.\n      */\n-    private List<ExecutionTask> waitForExecutionTaskToFinish() {\n+    private List<ExecutionTask> waitForExecutionTaskToFinish(AlterPartitionReassignmentsResult result)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc5b844a126df2f46e3b13004fefed6dc6de8583"}, "originalPosition": 196}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2NzA3NDIwOnYy", "diffSide": "RIGHT", "path": "cruise-control/src/main/java/com/linkedin/kafka/cruisecontrol/executor/Executor.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxODo1Nzo1M1rOGYZuNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxODo1Nzo1M1rOGYZuNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODI0MDQzOQ==", "bodyText": "Should we add a timeout here?", "url": "https://github.com/linkedin/cruise-control/pull/1196#discussion_r428240439", "createdAt": "2020-05-20T18:57:53Z", "author": {"login": "kidkun"}, "path": "cruise-control/src/main/java/com/linkedin/kafka/cruisecontrol/executor/Executor.java", "diffHunk": "@@ -1403,6 +1417,17 @@ private boolean maybeMarkTaskAsDeadOrAborting(Cluster cluster,\n       return false;\n     }\n \n+    private boolean verifyFutureError(Future<?> future, Class<? extends Throwable> exceptionClass) {\n+      try {\n+        future.get();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc5b844a126df2f46e3b13004fefed6dc6de8583"}, "originalPosition": 323}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2NzEwNjY1OnYy", "diffSide": "RIGHT", "path": "cruise-control/src/main/scala/com/linkedin/kafka/cruisecontrol/executor/ExecutorUtils.scala", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxOTowNjo0NVrOGYaCXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQyMTo1MDozMVrOGYfEhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODI0NTU5OA==", "bodyText": "After switch to use admin client, this method seems redundant. should remove this one?", "url": "https://github.com/linkedin/cruise-control/pull/1196#discussion_r428245598", "createdAt": "2020-05-20T19:06:45Z", "author": {"login": "kidkun"}, "path": "cruise-control/src/main/scala/com/linkedin/kafka/cruisecontrol/executor/ExecutorUtils.scala", "diffHunk": "@@ -26,16 +26,16 @@ object ExecutorUtils {\n    * within the cluster, (2) introduce a new replica to the cluster (3) remove an existing replica from the cluster.\n    *\n    * @param kafkaZkClient the KafkaZkClient class to use for partition reassignment.\n-   * @param reassignmentTasks Replica reassignment tasks to be executed.\n+   * @param tasksToExecute Replica reassignment tasks to be executed.\n    */\n   def executeReplicaReassignmentTasks(kafkaZkClient: KafkaZkClient,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc5b844a126df2f46e3b13004fefed6dc6de8583"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODMyODA3MQ==", "bodyText": "Marked as deprecated -- thanks!", "url": "https://github.com/linkedin/cruise-control/pull/1196#discussion_r428328071", "createdAt": "2020-05-20T21:50:31Z", "author": {"login": "efeg"}, "path": "cruise-control/src/main/scala/com/linkedin/kafka/cruisecontrol/executor/ExecutorUtils.scala", "diffHunk": "@@ -26,16 +26,16 @@ object ExecutorUtils {\n    * within the cluster, (2) introduce a new replica to the cluster (3) remove an existing replica from the cluster.\n    *\n    * @param kafkaZkClient the KafkaZkClient class to use for partition reassignment.\n-   * @param reassignmentTasks Replica reassignment tasks to be executed.\n+   * @param tasksToExecute Replica reassignment tasks to be executed.\n    */\n   def executeReplicaReassignmentTasks(kafkaZkClient: KafkaZkClient,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODI0NTU5OA=="}, "originalCommit": {"oid": "dc5b844a126df2f46e3b13004fefed6dc6de8583"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2NzExODM5OnYy", "diffSide": "RIGHT", "path": "cruise-control-metrics-reporter/src/test/java/com/linkedin/kafka/cruisecontrol/metricsreporter/utils/CCEmbeddedBroker.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxOTowOTo0NlrOGYaJew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQxOTowOTo0NlrOGYaJew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODI0NzQxOQ==", "bodyText": "This method seems not used?", "url": "https://github.com/linkedin/cruise-control/pull/1196#discussion_r428247419", "createdAt": "2020-05-20T19:09:46Z", "author": {"login": "kidkun"}, "path": "cruise-control-metrics-reporter/src/test/java/com/linkedin/kafka/cruisecontrol/metricsreporter/utils/CCEmbeddedBroker.java", "diffHunk": "@@ -99,6 +99,10 @@ public void awaitShutdown() {\n     _kafkaServer.awaitShutdown();\n   }\n \n+  public KafkaServer kafkaServer() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc5b844a126df2f46e3b13004fefed6dc6de8583"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 833, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}