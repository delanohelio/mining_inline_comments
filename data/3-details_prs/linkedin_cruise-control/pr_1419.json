{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1NTkxNzk2", "number": 1419, "title": "Handle non-existent topic while setting/removing throttled replicas for a topic", "bodyText": "This PR resolves #1318.", "createdAt": "2020-12-10T02:28:10Z", "url": "https://github.com/linkedin/cruise-control/pull/1419", "merged": true, "mergeCommit": {"oid": "fd164c9a4ef492ab59611f617b9dca144d89e097"}, "closed": true, "closedAt": "2020-12-10T23:27:07Z", "author": {"login": "Lincong"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkpfGPgH2gAyNTM1NTkxNzk2Ojk3NTg3ZGY1MDA3YWViN2NlYzg3MmU1MzAxMWI3M2U5ZjBmODk4MWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdk7dQmAFqTU0OTY3NzE1OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "97587df5007aeb7cec872e53011b73e9f0f8981c", "author": {"user": {"login": "Lincong", "name": "Lincong Li"}}, "url": "https://github.com/linkedin/cruise-control/commit/97587df5007aeb7cec872e53011b73e9f0f8981c", "committedDate": "2020-12-10T01:58:35Z", "message": "Handle non-existent topic while setting/removing throttled replicas for a topic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb4cb692388e835524196e088d738abbc6cbe920", "author": {"user": {"login": "Lincong", "name": "Lincong Li"}}, "url": "https://github.com/linkedin/cruise-control/commit/fb4cb692388e835524196e088d738abbc6cbe920", "committedDate": "2020-12-10T01:58:35Z", "message": "Add check for changeTopicConfigs(...)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4bd36db185cba26356847e64cc154ce34be9701d", "author": {"user": {"login": "Lincong", "name": "Lincong Li"}}, "url": "https://github.com/linkedin/cruise-control/commit/4bd36db185cba26356847e64cc154ce34be9701d", "committedDate": "2020-12-10T01:58:35Z", "message": "Replace warn log with debug log"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a15c7d4548974db892b7a4829f1395e742fea101", "author": {"user": {"login": "Lincong", "name": "Lincong Li"}}, "url": "https://github.com/linkedin/cruise-control/commit/a15c7d4548974db892b7a4829f1395e742fea101", "committedDate": "2020-12-10T01:58:35Z", "message": "Remove unused import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "900fae820cbf9e2cdccbc490ffa1a1d1966740c3", "author": {"user": {"login": "Lincong", "name": "Lincong Li"}}, "url": "https://github.com/linkedin/cruise-control/commit/900fae820cbf9e2cdccbc490ffa1a1d1966740c3", "committedDate": "2020-12-10T01:58:35Z", "message": "[WIP] Add unit test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b731f4ddc4f5fce9e58c758f0ec05225ce2c88e", "author": {"user": {"login": "Lincong", "name": "Lincong Li"}}, "url": "https://github.com/linkedin/cruise-control/commit/3b731f4ddc4f5fce9e58c758f0ec05225ce2c88e", "committedDate": "2020-12-10T01:58:35Z", "message": "Add an unit test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "33923bcbc6ccda831f6ccf98bc9a2c9bcb8a519a", "author": {"user": {"login": "Lincong", "name": "Lincong Li"}}, "url": "https://github.com/linkedin/cruise-control/commit/33923bcbc6ccda831f6ccf98bc9a2c9bcb8a519a", "committedDate": "2020-12-10T02:25:37Z", "message": "Fix failed unit tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4NzkyNjM0", "url": "https://github.com/linkedin/cruise-control/pull/1419#pullrequestreview-548792634", "createdAt": "2020-12-10T03:29:53Z", "commit": {"oid": "33923bcbc6ccda831f6ccf98bc9a2c9bcb8a519a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwMzoyOTo1M1rOICz4Gw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQwNDoxMDozNFrOIC0qZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTgxODAxMQ==", "bodyText": "Why do we need this change?\n\nWould getEntityConfigs ever expected to return null and if so, would null response imply that the topic does not exist?\nWhat do we gain by checking the topic existence here even if topic config does not exist? What happens if we just read the empty topic configs and continue with the rest of the code as before? Don't we check for topic existence in case of a failure to update the topic configs later in the code below? For cases, where topic exists, wouldn't this redundant call cause an extra network overhead to communicate with ZK?\n... means means topic does not exist -> means x2", "url": "https://github.com/linkedin/cruise-control/pull/1419#discussion_r539818011", "createdAt": "2020-12-10T03:29:53Z", "author": {"login": "efeg"}, "path": "cruise-control/src/main/java/com/linkedin/kafka/cruisecontrol/executor/ReplicationThrottleHelper.java", "diffHunk": "@@ -176,9 +176,18 @@ private void setFollowerThrottledReplicas(String topic, Set<String> replicas) {\n \n   private void setThrottledReplicas(String topic, Set<String> replicas, boolean throttleLeaderReplica) {\n     String replicaThrottleConfigKey = throttleLeaderReplica ? LEADER_THROTTLED_REPLICAS : FOLLOWER_THROTTLED_REPLICAS;\n-\n-    Properties config = _kafkaZkClient.getEntityConfigs(ConfigType.Topic(), topic);\n-    String currThrottledReplicas = config.getProperty(replicaThrottleConfigKey);\n+    Properties topicConfigs = _kafkaZkClient.getEntityConfigs(ConfigType.Topic(), topic);\n+    if (topicConfigs == null || topicConfigs.isEmpty()) {\n+      // Not assume that no topic config means means topic does not exist. Always check topic existence in this situation\n+      if (!_kafkaZkClient.topicExists(topic)) {\n+        LOG.debug(\"Skip setting throttled replicas {} for topic {} since topic does not exist\", String.join(\",\", replicas), topic);\n+        return;\n+      }\n+      if (topicConfigs == null) {\n+        topicConfigs = new Properties();\n+      }\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33923bcbc6ccda831f6ccf98bc9a2c9bcb8a519a"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTgxOTI0OA==", "bodyText": "In case of a failure due to a non-existing topic, this call is expected to get AdminOperationException. Why don't we catch this specific exception rather than Exception, which is too broad?", "url": "https://github.com/linkedin/cruise-control/pull/1419#discussion_r539819248", "createdAt": "2020-12-10T03:33:20Z", "author": {"login": "efeg"}, "path": "cruise-control/src/main/java/com/linkedin/kafka/cruisecontrol/executor/ReplicationThrottleHelper.java", "diffHunk": "@@ -189,8 +198,26 @@ private void setThrottledReplicas(String topic, Set<String> replicas, boolean th\n     if (currThrottledReplicas != null) {\n       newThrottledReplicas.addAll(Arrays.asList(currThrottledReplicas.split(\",\")));\n     }\n-    config.setProperty(replicaThrottleConfigKey, String.join(\",\", newThrottledReplicas));\n-    ExecutorUtils.changeTopicConfig(_adminZkClient, topic, config);\n+    topicConfigs.setProperty(replicaThrottleConfigKey, String.join(\",\", newThrottledReplicas));\n+    changeTopicConfigs(topic, topicConfigs);\n+  }\n+\n+  /**\n+   * Update topic configuration properties if a topic exist. No-op for non-existent topic\n+   *\n+   * @param topicName topic name\n+   * @param topicConfigs configuration properties to update\n+   */\n+  private void changeTopicConfigs(String topicName, Properties topicConfigs) {\n+    try {\n+      ExecutorUtils.changeTopicConfig(_adminZkClient, topicName, topicConfigs);\n+    } catch (Exception e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33923bcbc6ccda831f6ccf98bc9a2c9bcb8a519a"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTgyMTAzMA==", "bodyText": "Nit: Change no configs for -> Failed to change configs for.", "url": "https://github.com/linkedin/cruise-control/pull/1419#discussion_r539821030", "createdAt": "2020-12-10T03:38:33Z", "author": {"login": "efeg"}, "path": "cruise-control/src/main/java/com/linkedin/kafka/cruisecontrol/executor/ReplicationThrottleHelper.java", "diffHunk": "@@ -189,8 +198,26 @@ private void setThrottledReplicas(String topic, Set<String> replicas, boolean th\n     if (currThrottledReplicas != null) {\n       newThrottledReplicas.addAll(Arrays.asList(currThrottledReplicas.split(\",\")));\n     }\n-    config.setProperty(replicaThrottleConfigKey, String.join(\",\", newThrottledReplicas));\n-    ExecutorUtils.changeTopicConfig(_adminZkClient, topic, config);\n+    topicConfigs.setProperty(replicaThrottleConfigKey, String.join(\",\", newThrottledReplicas));\n+    changeTopicConfigs(topic, topicConfigs);\n+  }\n+\n+  /**\n+   * Update topic configuration properties if a topic exist. No-op for non-existent topic\n+   *\n+   * @param topicName topic name\n+   * @param topicConfigs configuration properties to update\n+   */\n+  private void changeTopicConfigs(String topicName, Properties topicConfigs) {\n+    try {\n+      ExecutorUtils.changeTopicConfig(_adminZkClient, topicName, topicConfigs);\n+    } catch (Exception e) {\n+      if (!_kafkaZkClient.topicExists(topicName)) {\n+        LOG.debug(\"Change no configs for topic {} since it does not exist\", topicName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33923bcbc6ccda831f6ccf98bc9a2c9bcb8a519a"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTgyMTc3Mg==", "bodyText": "Can this ever be null?", "url": "https://github.com/linkedin/cruise-control/pull/1419#discussion_r539821772", "createdAt": "2020-12-10T03:40:58Z", "author": {"login": "efeg"}, "path": "cruise-control/src/main/java/com/linkedin/kafka/cruisecontrol/executor/ReplicationThrottleHelper.java", "diffHunk": "@@ -260,12 +287,16 @@ private boolean removeFollowerThrottledReplicasFromTopic(Properties config, Stri\n   }\n \n   private void removeThrottledReplicasFromTopic(String topic, Set<String> replicas) {\n-    Properties config = _kafkaZkClient.getEntityConfigs(ConfigType.Topic(), topic);\n-    boolean removedLeaderThrottle = removeLeaderThrottledReplicasFromTopic(config, topic, replicas);\n-    boolean removedFollowerThrottle = removeFollowerThrottledReplicasFromTopic(config, topic, replicas);\n+    Properties topicConfigs = _kafkaZkClient.getEntityConfigs(ConfigType.Topic(), topic);\n+    if (topicConfigs == null || topicConfigs.isEmpty()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33923bcbc6ccda831f6ccf98bc9a2c9bcb8a519a"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTgyNzc5MA==", "bodyText": "When would this be expected to happen?\nHere are some scenarios that I can think of:\n(1) a topic is deleted and then shortly after recreated with the same name with no config,\n(2) someone externally overrides the configs,\n(3) a programming error\nIf it happens due to (1) or (2), are users expected to do anything if they see this warning log? Does the way we handle it suffice to provide the right behavior?\nAssuming that we have proper testing so that (3) is unlikely, should we make this a debug level log so that we don't cause extra logs that are not actionable?", "url": "https://github.com/linkedin/cruise-control/pull/1419#discussion_r539827790", "createdAt": "2020-12-10T04:00:23Z", "author": {"login": "efeg"}, "path": "cruise-control/src/main/java/com/linkedin/kafka/cruisecontrol/executor/ReplicationThrottleHelper.java", "diffHunk": "@@ -260,12 +287,16 @@ private boolean removeFollowerThrottledReplicasFromTopic(Properties config, Stri\n   }\n \n   private void removeThrottledReplicasFromTopic(String topic, Set<String> replicas) {\n-    Properties config = _kafkaZkClient.getEntityConfigs(ConfigType.Topic(), topic);\n-    boolean removedLeaderThrottle = removeLeaderThrottledReplicasFromTopic(config, topic, replicas);\n-    boolean removedFollowerThrottle = removeFollowerThrottledReplicasFromTopic(config, topic, replicas);\n+    Properties topicConfigs = _kafkaZkClient.getEntityConfigs(ConfigType.Topic(), topic);\n+    if (topicConfigs == null || topicConfigs.isEmpty()) {\n+      LOG.warn(\"Skip removing throttled replicas {} from topic {} since no configs can be read\", String.join(\",\", replicas), topic);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33923bcbc6ccda831f6ccf98bc9a2c9bcb8a519a"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTgyODU3OQ==", "bodyText": "Nit: ... -> new Properties(2);?", "url": "https://github.com/linkedin/cruise-control/pull/1419#discussion_r539828579", "createdAt": "2020-12-10T04:03:05Z", "author": {"login": "efeg"}, "path": "cruise-control/src/test/java/com/linkedin/kafka/cruisecontrol/executor/ReplicationThrottleHelperTest.java", "diffHunk": "@@ -101,6 +101,57 @@ public void testIsNoOpWhenThrottleIsNull() {\n     throttleHelper.clearThrottles(Collections.singletonList(task), Collections.emptyList());\n   }\n \n+  @Test\n+  public void testSetThrottleOnNonExistentTopic() {\n+    final long throttleRate = 100L;\n+    final int brokerId0 = 0;\n+    final int brokerId1 = 1;\n+    final int brokerId2 = 2;\n+    final int partitionId = 0;\n+    // A proposal to move a partition with 2 replicas from broker 0 and 1 to broker 0 and 2\n+    ExecutionProposal proposal = new ExecutionProposal(new TopicPartition(TOPIC0, partitionId),\n+                                           100,\n+                                                       new ReplicaPlacementInfo(brokerId0),\n+                                                       Arrays.asList(new ReplicaPlacementInfo(brokerId0), new ReplicaPlacementInfo(brokerId1)),\n+                                                       Arrays.asList(new ReplicaPlacementInfo(brokerId0), new ReplicaPlacementInfo(brokerId2)));\n+\n+    KafkaZkClient mockKafkaZkClient = EasyMock.mock(KafkaZkClient.class);\n+    prepareKafkaZkClientMockWithBrokerConfigs(mockKafkaZkClient);\n+    // Case 1: a situation where Topic0 does not exist. Hence no property is returned upon read.\n+    EasyMock.expect(mockKafkaZkClient.getEntityConfigs(ConfigType.Topic(), TOPIC0)).andReturn(new Properties()).times(2);\n+    EasyMock.expect(mockKafkaZkClient.topicExists(TOPIC0)).andReturn(false).times(2);\n+    EasyMock.replay(mockKafkaZkClient);\n+    ReplicationThrottleHelper throttleHelper = new ReplicationThrottleHelper(mockKafkaZkClient, throttleRate);\n+\n+    throttleHelper.setThrottles(Collections.singletonList(proposal));\n+    EasyMock.verify(mockKafkaZkClient);\n+\n+    // Case 2: a situation where Topic0 gets deleted after its configs were read. Change configs should not fail.\n+    EasyMock.reset(mockKafkaZkClient);\n+    prepareKafkaZkClientMockWithBrokerConfigs(mockKafkaZkClient);\n+    Properties topicConfigProps = new Properties();\n+    String throttledReplicas = brokerId0 + \",\" + brokerId1;\n+    topicConfigProps.put(ReplicationThrottleHelper.LEADER_THROTTLED_REPLICAS, throttledReplicas);\n+    topicConfigProps.put(ReplicationThrottleHelper.FOLLOWER_THROTTLED_REPLICAS, throttledReplicas);\n+    EasyMock.expect(mockKafkaZkClient.getEntityConfigs(ConfigType.Topic(), TOPIC0)).andReturn(topicConfigProps).times(2);\n+    EasyMock.expect(mockKafkaZkClient.topicExists(TOPIC0)).andReturn(false).times(4);\n+    EasyMock.replay(mockKafkaZkClient);\n+\n+    throttleHelper.setThrottles(Collections.singletonList(proposal));\n+    EasyMock.verify(mockKafkaZkClient);\n+  }\n+\n+  private void prepareKafkaZkClientMockWithBrokerConfigs(KafkaZkClient mockKafkaZkClient) {\n+    // All participating brokers have throttled rate set already\n+    Properties brokerThrottledRateProps = new Properties();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33923bcbc6ccda831f6ccf98bc9a2c9bcb8a519a"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTgyOTY3Mw==", "bodyText": "Nit: ... -> new Properties(2);?", "url": "https://github.com/linkedin/cruise-control/pull/1419#discussion_r539829673", "createdAt": "2020-12-10T04:06:44Z", "author": {"login": "efeg"}, "path": "cruise-control/src/test/java/com/linkedin/kafka/cruisecontrol/executor/ReplicationThrottleHelperTest.java", "diffHunk": "@@ -101,6 +101,57 @@ public void testIsNoOpWhenThrottleIsNull() {\n     throttleHelper.clearThrottles(Collections.singletonList(task), Collections.emptyList());\n   }\n \n+  @Test\n+  public void testSetThrottleOnNonExistentTopic() {\n+    final long throttleRate = 100L;\n+    final int brokerId0 = 0;\n+    final int brokerId1 = 1;\n+    final int brokerId2 = 2;\n+    final int partitionId = 0;\n+    // A proposal to move a partition with 2 replicas from broker 0 and 1 to broker 0 and 2\n+    ExecutionProposal proposal = new ExecutionProposal(new TopicPartition(TOPIC0, partitionId),\n+                                           100,\n+                                                       new ReplicaPlacementInfo(brokerId0),\n+                                                       Arrays.asList(new ReplicaPlacementInfo(brokerId0), new ReplicaPlacementInfo(brokerId1)),\n+                                                       Arrays.asList(new ReplicaPlacementInfo(brokerId0), new ReplicaPlacementInfo(brokerId2)));\n+\n+    KafkaZkClient mockKafkaZkClient = EasyMock.mock(KafkaZkClient.class);\n+    prepareKafkaZkClientMockWithBrokerConfigs(mockKafkaZkClient);\n+    // Case 1: a situation where Topic0 does not exist. Hence no property is returned upon read.\n+    EasyMock.expect(mockKafkaZkClient.getEntityConfigs(ConfigType.Topic(), TOPIC0)).andReturn(new Properties()).times(2);\n+    EasyMock.expect(mockKafkaZkClient.topicExists(TOPIC0)).andReturn(false).times(2);\n+    EasyMock.replay(mockKafkaZkClient);\n+    ReplicationThrottleHelper throttleHelper = new ReplicationThrottleHelper(mockKafkaZkClient, throttleRate);\n+\n+    throttleHelper.setThrottles(Collections.singletonList(proposal));\n+    EasyMock.verify(mockKafkaZkClient);\n+\n+    // Case 2: a situation where Topic0 gets deleted after its configs were read. Change configs should not fail.\n+    EasyMock.reset(mockKafkaZkClient);\n+    prepareKafkaZkClientMockWithBrokerConfigs(mockKafkaZkClient);\n+    Properties topicConfigProps = new Properties();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33923bcbc6ccda831f6ccf98bc9a2c9bcb8a519a"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTgzMDg4Nw==", "bodyText": "Should we test the changes in removeThrottledReplicasFromTopic, too?", "url": "https://github.com/linkedin/cruise-control/pull/1419#discussion_r539830887", "createdAt": "2020-12-10T04:10:34Z", "author": {"login": "efeg"}, "path": "cruise-control/src/test/java/com/linkedin/kafka/cruisecontrol/executor/ReplicationThrottleHelperTest.java", "diffHunk": "@@ -101,6 +101,57 @@ public void testIsNoOpWhenThrottleIsNull() {\n     throttleHelper.clearThrottles(Collections.singletonList(task), Collections.emptyList());\n   }\n \n+  @Test\n+  public void testSetThrottleOnNonExistentTopic() {\n+    final long throttleRate = 100L;\n+    final int brokerId0 = 0;\n+    final int brokerId1 = 1;\n+    final int brokerId2 = 2;\n+    final int partitionId = 0;\n+    // A proposal to move a partition with 2 replicas from broker 0 and 1 to broker 0 and 2\n+    ExecutionProposal proposal = new ExecutionProposal(new TopicPartition(TOPIC0, partitionId),\n+                                           100,\n+                                                       new ReplicaPlacementInfo(brokerId0),\n+                                                       Arrays.asList(new ReplicaPlacementInfo(brokerId0), new ReplicaPlacementInfo(brokerId1)),\n+                                                       Arrays.asList(new ReplicaPlacementInfo(brokerId0), new ReplicaPlacementInfo(brokerId2)));\n+\n+    KafkaZkClient mockKafkaZkClient = EasyMock.mock(KafkaZkClient.class);\n+    prepareKafkaZkClientMockWithBrokerConfigs(mockKafkaZkClient);\n+    // Case 1: a situation where Topic0 does not exist. Hence no property is returned upon read.\n+    EasyMock.expect(mockKafkaZkClient.getEntityConfigs(ConfigType.Topic(), TOPIC0)).andReturn(new Properties()).times(2);\n+    EasyMock.expect(mockKafkaZkClient.topicExists(TOPIC0)).andReturn(false).times(2);\n+    EasyMock.replay(mockKafkaZkClient);\n+    ReplicationThrottleHelper throttleHelper = new ReplicationThrottleHelper(mockKafkaZkClient, throttleRate);\n+\n+    throttleHelper.setThrottles(Collections.singletonList(proposal));\n+    EasyMock.verify(mockKafkaZkClient);\n+\n+    // Case 2: a situation where Topic0 gets deleted after its configs were read. Change configs should not fail.\n+    EasyMock.reset(mockKafkaZkClient);\n+    prepareKafkaZkClientMockWithBrokerConfigs(mockKafkaZkClient);\n+    Properties topicConfigProps = new Properties();\n+    String throttledReplicas = brokerId0 + \",\" + brokerId1;\n+    topicConfigProps.put(ReplicationThrottleHelper.LEADER_THROTTLED_REPLICAS, throttledReplicas);\n+    topicConfigProps.put(ReplicationThrottleHelper.FOLLOWER_THROTTLED_REPLICAS, throttledReplicas);\n+    EasyMock.expect(mockKafkaZkClient.getEntityConfigs(ConfigType.Topic(), TOPIC0)).andReturn(topicConfigProps).times(2);\n+    EasyMock.expect(mockKafkaZkClient.topicExists(TOPIC0)).andReturn(false).times(4);\n+    EasyMock.replay(mockKafkaZkClient);\n+\n+    throttleHelper.setThrottles(Collections.singletonList(proposal));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "33923bcbc6ccda831f6ccf98bc9a2c9bcb8a519a"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ab672c3d246c28d46c3c4aa57ce3487a75c20fa", "author": {"user": {"login": "Lincong", "name": "Lincong Li"}}, "url": "https://github.com/linkedin/cruise-control/commit/1ab672c3d246c28d46c3c4aa57ce3487a75c20fa", "committedDate": "2020-12-10T06:06:54Z", "message": "Add test for removeThrottledReplicasFromTopic method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ec830d8362ab85fa5e76209b17c8de7930d14f4", "author": {"user": {"login": "Lincong", "name": "Lincong Li"}}, "url": "https://github.com/linkedin/cruise-control/commit/1ec830d8362ab85fa5e76209b17c8de7930d14f4", "committedDate": "2020-12-10T18:30:22Z", "message": "Remove null handling of ZkClient returned topic configs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5Njc3MTU5", "url": "https://github.com/linkedin/cruise-control/pull/1419#pullrequestreview-549677159", "createdAt": "2020-12-10T22:54:52Z", "commit": {"oid": "1ec830d8362ab85fa5e76209b17c8de7930d14f4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 129, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}