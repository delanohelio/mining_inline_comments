{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2MzE0NTkz", "number": 1223, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwNToyMzoyMlrOEBmP2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwNToyMzoyMlrOEBmP2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwMTEwNjgxOnYy", "diffSide": "RIGHT", "path": "cruise-control/src/main/java/com/linkedin/kafka/cruisecontrol/servlet/handler/async/runnable/RunnableUtils.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwNToyMzoyMlrOGdieag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQwNzo0OTo1NlrOGdmCdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYyNjczMA==", "bodyText": "I'm not sure Set.toString() will always convert all the topics toString, it's behavior is not stable between different versions of Java.", "url": "https://github.com/linkedin/cruise-control/pull/1223#discussion_r433626730", "createdAt": "2020-06-02T05:23:22Z", "author": {"login": "smccauliff"}, "path": "cruise-control/src/main/java/com/linkedin/kafka/cruisecontrol/servlet/handler/async/runnable/RunnableUtils.java", "diffHunk": "@@ -93,7 +93,11 @@ public static void populateRackInfoForReplicationFactorChange(Map<Short, Set<Str\n     }\n \n     topicsByReplicationFactor.forEach((replicationFactor, topics) -> {\n-      if (replicationFactor > brokersByRack.size()) {\n+      if (replicationFactor > rackByBroker.size()) {\n+        throw new RuntimeException(String.format(\"Unable to change replication factor (RF) of topics %s to %d since there are only %d \"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a8f45de15d8e95f4ee7afb5fef6e754479ff9039"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzY0MjU5NQ==", "bodyText": "I can't recall observing issues related to toString() call on Sets using openjdk-jdk8, openjdk-jdk11, or zulu 8. That being said, our repo has been using ootb set implementations , such as HashSet, TreeSet, and LinkedHashSet -- and openJDK implementation for their toString() implementation in AbstractCollection.java hasn't changed from 8 to 11.\nHave you observed issues in specific implementations / versions of Java or specific implementation of collections?", "url": "https://github.com/linkedin/cruise-control/pull/1223#discussion_r433642595", "createdAt": "2020-06-02T06:15:05Z", "author": {"login": "efeg"}, "path": "cruise-control/src/main/java/com/linkedin/kafka/cruisecontrol/servlet/handler/async/runnable/RunnableUtils.java", "diffHunk": "@@ -93,7 +93,11 @@ public static void populateRackInfoForReplicationFactorChange(Map<Short, Set<Str\n     }\n \n     topicsByReplicationFactor.forEach((replicationFactor, topics) -> {\n-      if (replicationFactor > brokersByRack.size()) {\n+      if (replicationFactor > rackByBroker.size()) {\n+        throw new RuntimeException(String.format(\"Unable to change replication factor (RF) of topics %s to %d since there are only %d \"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYyNjczMA=="}, "originalCommit": {"oid": "a8f45de15d8e95f4ee7afb5fef6e754479ff9039"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzY4NTExMQ==", "bodyText": "Never mind.  It's some trauma I experienced in some previous version of Java.  This program never truncates; even for very large numbers and different Set implementations.\nimport java.util.*;\n\nclass tostring {\n   public static void main(String[] argv) throws Exception {\n        Set<Integer> s = new TreeSet<>();\n        int count = Integer.parseInt(argv[0]);\n        for (int i =0; i < count; i++) {\n           s.add(i);\n        }\n        \n        System.out.println(s);\n   }\n}", "url": "https://github.com/linkedin/cruise-control/pull/1223#discussion_r433685111", "createdAt": "2020-06-02T07:49:56Z", "author": {"login": "smccauliff"}, "path": "cruise-control/src/main/java/com/linkedin/kafka/cruisecontrol/servlet/handler/async/runnable/RunnableUtils.java", "diffHunk": "@@ -93,7 +93,11 @@ public static void populateRackInfoForReplicationFactorChange(Map<Short, Set<Str\n     }\n \n     topicsByReplicationFactor.forEach((replicationFactor, topics) -> {\n-      if (replicationFactor > brokersByRack.size()) {\n+      if (replicationFactor > rackByBroker.size()) {\n+        throw new RuntimeException(String.format(\"Unable to change replication factor (RF) of topics %s to %d since there are only %d \"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzYyNjczMA=="}, "originalCommit": {"oid": "a8f45de15d8e95f4ee7afb5fef6e754479ff9039"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 851, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}