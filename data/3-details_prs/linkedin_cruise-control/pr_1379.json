{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE1NjE2MDgz", "number": 1379, "title": "Replace hardcoded millis value with the TimeUnit lib method", "bodyText": "This PR resolves #1378.", "createdAt": "2020-11-04T20:15:28Z", "url": "https://github.com/linkedin/cruise-control/pull/1379", "merged": true, "mergeCommit": {"oid": "021bd90badf798e09f80379b21c2df9c4cad1302"}, "closed": true, "closedAt": "2020-11-06T01:03:19Z", "author": {"login": "Lincong"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZTi7EgH2gAyNTE1NjE2MDgzOjgwNDMwZDU2MGY2MTFiZTRiNDc4NzZlMTM1YmU5Y2YzY2FlY2MzNmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZr2nhgH2gAyNTE1NjE2MDgzOmUzNDJiY2ViOTBmYWQ3YzRiZWI0MTFmZjRlNzRjNzk4ZGUzODg2MjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "80430d560f611be4b47876e135be9cf3caecc36d", "author": {"user": {"login": "Lincong", "name": "Lincong Li"}}, "url": "https://github.com/linkedin/cruise-control/commit/80430d560f611be4b47876e135be9cf3caecc36d", "committedDate": "2020-11-04T20:11:41Z", "message": "Replace hardcoded millis value with the TimeUnit lib method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzNzYxMjk1", "url": "https://github.com/linkedin/cruise-control/pull/1379#pullrequestreview-523761295", "createdAt": "2020-11-04T21:51:09Z", "commit": {"oid": "80430d560f611be4b47876e135be9cf3caecc36d"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d02ad242a30a11f55493411a01bb98911101bf4", "author": {"user": {"login": "Lincong", "name": "Lincong Li"}}, "url": "https://github.com/linkedin/cruise-control/commit/5d02ad242a30a11f55493411a01bb98911101bf4", "committedDate": "2020-11-04T22:07:46Z", "message": "Fix several missing places"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b33f936caf75edaa6f0f5807fadbdf439f5c76d9", "author": {"user": {"login": "Lincong", "name": "Lincong Li"}}, "url": "https://github.com/linkedin/cruise-control/commit/b33f936caf75edaa6f0f5807fadbdf439f5c76d9", "committedDate": "2020-11-04T22:13:34Z", "message": "More places replaced"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIzODI4Njc5", "url": "https://github.com/linkedin/cruise-control/pull/1379#pullrequestreview-523828679", "createdAt": "2020-11-05T00:17:03Z", "commit": {"oid": "b33f936caf75edaa6f0f5807fadbdf439f5c76d9"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQwMDoxNzowNFrOHtuWxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNVQwMDo0MDo0M1rOHtuyAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzcwNzQ2MA==", "bodyText": "Nit (multiple occurrences in this class): Can we\n\nMove the hardcoded TimeUnit.SECONDS.toMillis(30) value to some static variable?\nUpdate the comments such as Check in 30 seconds to see... to avoid mentioning hardcoded times and refer to the static variable?", "url": "https://github.com/linkedin/cruise-control/pull/1379#discussion_r517707460", "createdAt": "2020-11-05T00:17:04Z", "author": {"login": "efeg"}, "path": "cruise-control/src/main/java/com/linkedin/kafka/cruisecontrol/analyzer/GoalOptimizer.java", "diffHunk": "@@ -143,11 +143,11 @@ public void run() {\n       if (loadMonitorTaskRunnerState == LOADING || loadMonitorTaskRunnerState == BOOTSTRAPPING) {\n         LOG.info(\"Skipping proposal precomputing because load monitor is in \" + loadMonitorTaskRunnerState + \" state.\");\n         // Check in 30 seconds to see if the load monitor state has changed.\n-        sleepTime = 30000L;\n+        sleepTime = TimeUnit.SECONDS.toMillis(30);\n       } else if (!_loadMonitor.meetCompletenessRequirements(_requirementsWithAvailableValidWindows)) {\n         LOG.info(\"Skipping proposal precomputing because load monitor does not have enough snapshots.\");\n         // Check in 30 seconds to see if the load monitor has sufficient number of snapshots.\n-        sleepTime = 30000L;\n+        sleepTime = TimeUnit.SECONDS.toMillis(30);\n       } else {\n         try {\n           if (!validCachedProposal()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b33f936caf75edaa6f0f5807fadbdf439f5c76d9"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzcxMzY5OA==", "bodyText": "Should we use hours?", "url": "https://github.com/linkedin/cruise-control/pull/1379#discussion_r517713698", "createdAt": "2020-11-05T00:38:15Z", "author": {"login": "efeg"}, "path": "cruise-control/src/main/java/com/linkedin/kafka/cruisecontrol/monitor/sampling/KafkaSampleStore.java", "diffHunk": "@@ -92,8 +92,8 @@\n   protected static final short DEFAULT_SAMPLE_STORE_TOPIC_REPLICATION_FACTOR = 2;\n   protected static final int DEFAULT_PARTITION_SAMPLE_STORE_TOPIC_PARTITION_COUNT = 32;\n   protected static final int DEFAULT_BROKER_SAMPLE_STORE_TOPIC_PARTITION_COUNT = 32;\n-  protected static final long DEFAULT_MIN_PARTITION_SAMPLE_STORE_TOPIC_RETENTION_TIME_MS = 3600000L;\n-  protected static final long DEFAULT_MIN_BROKER_SAMPLE_STORE_TOPIC_RETENTION_TIME_MS = 3600000L;\n+  protected static final long DEFAULT_MIN_PARTITION_SAMPLE_STORE_TOPIC_RETENTION_TIME_MS = TimeUnit.MINUTES.toMillis(60);\n+  protected static final long DEFAULT_MIN_BROKER_SAMPLE_STORE_TOPIC_RETENTION_TIME_MS = TimeUnit.MINUTES.toMillis(60);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b33f936caf75edaa6f0f5807fadbdf439f5c76d9"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzcxNDQzNQ==", "bodyText": "(Not introduced in this patch): Can we rename this private variable to SAMPLING_INTERVAL_MS?", "url": "https://github.com/linkedin/cruise-control/pull/1379#discussion_r517714435", "createdAt": "2020-11-05T00:40:43Z", "author": {"login": "efeg"}, "path": "cruise-control/src/test/java/com/linkedin/kafka/cruisecontrol/monitor/task/LoadMonitorTaskRunnerTest.java", "diffHunk": "@@ -57,11 +57,11 @@\n  * The unit test for metric fetcher manager.\n  */\n public class LoadMonitorTaskRunnerTest extends CCKafkaIntegrationTestHarness {\n-  private static final long WINDOW_MS = 10000L;\n+  private static final long WINDOW_MS = TimeUnit.SECONDS.toMillis(10);\n   private static final int NUM_WINDOWS = 5;\n   private static final int NUM_TOPICS = 100;\n   private static final int NUM_PARTITIONS = 4;\n-  private static final long SAMPLING_INTERVAL = 100000L;\n+  private static final long SAMPLING_INTERVAL = TimeUnit.SECONDS.toMillis(100);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b33f936caf75edaa6f0f5807fadbdf439f5c76d9"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "093956e0d25674a19b90ef5b2313ac49f1da3f3a", "author": {"user": {"login": "Lincong", "name": "Lincong Li"}}, "url": "https://github.com/linkedin/cruise-control/commit/093956e0d25674a19b90ef5b2313ac49f1da3f3a", "committedDate": "2020-11-05T21:32:17Z", "message": "Fixed several more"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI0NzcxNDY4", "url": "https://github.com/linkedin/cruise-control/pull/1379#pullrequestreview-524771468", "createdAt": "2020-11-06T00:18:49Z", "commit": {"oid": "093956e0d25674a19b90ef5b2313ac49f1da3f3a"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwMDoxODo0OVrOHubohw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQwMDoxODo0OVrOHubohw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODQ0OTI4Nw==", "bodyText": "Nit: For variables in this package, we use the following naming convention:\n<config>_CONFIG\nDEAFULT_<config>\n<config>_DOC\n\nAdding this suffix only to the default value violates this convention.\nCan we either (1) apply the same suffix to the METADATA_MAX_AGE_CONFIG and METADATA_MAX_AGE_DOC or (2) rollback the name change?", "url": "https://github.com/linkedin/cruise-control/pull/1379#discussion_r518449287", "createdAt": "2020-11-06T00:18:49Z", "author": {"login": "efeg"}, "path": "cruise-control/src/main/java/com/linkedin/kafka/cruisecontrol/config/constants/MonitorConfig.java", "diffHunk": "@@ -44,7 +44,7 @@ private MonitorConfig() {\n    * <code>metadata.max.age.ms</code>\n    */\n   public static final String METADATA_MAX_AGE_CONFIG = CommonClientConfigs.METADATA_MAX_AGE_CONFIG;\n-  public static final long DEFAULT_METADATA_MAX_AGE = 55000L;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "093956e0d25674a19b90ef5b2313ac49f1da3f3a"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e342bceb90fad7c4beb411ff4e74c798de388620", "author": {"user": {"login": "Lincong", "name": "Lincong Li"}}, "url": "https://github.com/linkedin/cruise-control/commit/e342bceb90fad7c4beb411ff4e74c798de388620", "committedDate": "2020-11-06T00:30:55Z", "message": "Change metadata max age variable names"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 100, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}