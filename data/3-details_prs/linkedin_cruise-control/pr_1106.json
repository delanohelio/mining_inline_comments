{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2NzUyNTM0", "number": 1106, "title": "Add capacity config documentation and expose hardcoded defaults for optional configs.", "bodyText": "Addresses the issue #1012 and adds documentation on capacity config.", "createdAt": "2020-02-18T17:48:07Z", "url": "https://github.com/linkedin/cruise-control/pull/1106", "merged": true, "mergeCommit": {"oid": "0a1b098240740102ceb83bcf66bbf8fca86755e8"}, "closed": true, "closedAt": "2020-02-20T22:43:08Z", "author": {"login": "efeg"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcFlmM3gH2gAyMzc2NzUyNTM0OjU2NzQyNjVjODllZDYwYWNlYzUxNDA5NzM5OGExMjIzMzBhYmNjZDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcGTDE1gFqTM2MjI4NzAyMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5674265c89ed60acec514097398a122330abccd1", "author": {"user": null}, "url": "https://github.com/linkedin/cruise-control/commit/5674265c89ed60acec514097398a122330abccd1", "committedDate": "2020-02-18T17:43:55Z", "message": "Add capacity config documentation and expose hardcoded defaults for optional configs."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNzg4MDg5", "url": "https://github.com/linkedin/cruise-control/pull/1106#pullrequestreview-360788089", "createdAt": "2020-02-19T01:27:14Z", "commit": {"oid": "5674265c89ed60acec514097398a122330abccd1"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwMToyNzoxNFrOFrYQGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQwMTozMzowOVrOFrYWiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTAzMDQyNg==", "bodyText": "nit: capacity.config.file= -> capacity.config.file", "url": "https://github.com/linkedin/cruise-control/pull/1106#discussion_r381030426", "createdAt": "2020-02-19T01:27:14Z", "author": {"login": "kidkun"}, "path": "docs/wiki/User Guide/Configurations.md", "diffHunk": "@@ -208,9 +208,29 @@ We are still trying to improve cruise control. And following are some configurat\n | skip.sample.store.topic.rack.awareness.check    | Boolean |  N         |   false           | The config to skip rack awareness sanity check for sample store topics  |\n \n ### BrokerCapacityConfigurationFileResolver configurations\n-| Name                 | Type   | Required? | Default Value | Description                                                                        |\n-|----------------------|--------|-----------|---------------|------------------------------------------------------------------------------------|\n-| capacity.config.file | String | Y         |               | The path to the configuration JSON file that provides the capacity of the brokers. |\n+| Name                 | Type   | Required? | Default Value             | Description                                                                        |\n+|----------------------|--------|-----------|---------------------------|------------------------------------------------------------------------------------|\n+| capacity.config.file | String | Y         | config/capacityJBOD.json  | The path to the configuration JSON file that provides the capacity of the brokers. |\n+\n+#### Populating the Capacity Config File\n+`Option-1`: The following steps allow users to set the initial broker capacities or update capacities upon addition of \n+new brokers out-of-the-box:\n+1. Check `cruisecontrol.properties` file to verify that the `capacity.config.file=` config points to the file you are modifying.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5674265c89ed60acec514097398a122330abccd1"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTAzMjA3Mw==", "bodyText": "I feel some context is missing here. option-1 is only relevant with the default implementation mentioned in option-2, should we first give some background first, then list two options\n\nstick with default resolver and config the capacity files.\nimplement your own resolver.", "url": "https://github.com/linkedin/cruise-control/pull/1106#discussion_r381032073", "createdAt": "2020-02-19T01:33:09Z", "author": {"login": "kidkun"}, "path": "docs/wiki/User Guide/Configurations.md", "diffHunk": "@@ -208,9 +208,29 @@ We are still trying to improve cruise control. And following are some configurat\n | skip.sample.store.topic.rack.awareness.check    | Boolean |  N         |   false           | The config to skip rack awareness sanity check for sample store topics  |\n \n ### BrokerCapacityConfigurationFileResolver configurations\n-| Name                 | Type   | Required? | Default Value | Description                                                                        |\n-|----------------------|--------|-----------|---------------|------------------------------------------------------------------------------------|\n-| capacity.config.file | String | Y         |               | The path to the configuration JSON file that provides the capacity of the brokers. |\n+| Name                 | Type   | Required? | Default Value             | Description                                                                        |\n+|----------------------|--------|-----------|---------------------------|------------------------------------------------------------------------------------|\n+| capacity.config.file | String | Y         | config/capacityJBOD.json  | The path to the configuration JSON file that provides the capacity of the brokers. |\n+\n+#### Populating the Capacity Config File\n+`Option-1`: The following steps allow users to set the initial broker capacities or update capacities upon addition of \n+new brokers out-of-the-box:\n+1. Check `cruisecontrol.properties` file to verify that the `capacity.config.file=` config points to the file you are modifying.\n+By default, this config is set to use `config/capacityJBOD.json`. If you have \n+    * a non-JBOD deployment, where each broker has the same number of cores, you may use `config/capacity.json`, or\n+    * a non-JBOD deployment, where brokers may have varying number of cores, you may use `config/capacityCores.json`\n+ and modify this file.\n+2. Ensure that the capacity file picked in `step-1` contains either a default capacity for missing broker ids, or \n+explicitly specifies capacities for brokers with specific ids provided by user.\n+3. Finally, bounce your Cruise Control instance.\n+\n+`Option-2`: `BrokerCapacityConfigResolver` is a pluggable component. Hence, you can write your own pluggable capacity ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5674265c89ed60acec514097398a122330abccd1"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6104099d304a4b41e67cbd9aadd27c2011d56207", "author": {"user": {"login": "efeg", "name": "Adem Efe Gencer"}}, "url": "https://github.com/linkedin/cruise-control/commit/6104099d304a4b41e67cbd9aadd27c2011d56207", "committedDate": "2020-02-20T22:38:04Z", "message": "Address the feedback."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyMjg3MDIy", "url": "https://github.com/linkedin/cruise-control/pull/1106#pullrequestreview-362287022", "createdAt": "2020-02-20T22:41:11Z", "commit": {"oid": "6104099d304a4b41e67cbd9aadd27c2011d56207"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 162, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}