{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwNDQyODEx", "number": 1119, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxOToyOTowMlrODjNXXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxOToyOTowMlrODjNXXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4MjQ1NzI2OnYy", "diffSide": "RIGHT", "path": "cruise-control/src/main/java/com/linkedin/kafka/cruisecontrol/detector/SlowBrokerFinder.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxOToyOTowM1rOFu5DIw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxOToyOTowM1rOFu5DIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDcxMzUwNw==", "bodyText": "If this loop only uses the key of the _brokerSlownessScore map, why does it iterate over its entries rather than its keys?", "url": "https://github.com/linkedin/cruise-control/pull/1119#discussion_r384713507", "createdAt": "2020-02-26T19:29:03Z", "author": {"login": "efeg"}, "path": "cruise-control/src/main/java/com/linkedin/kafka/cruisecontrol/detector/SlowBrokerFinder.java", "diffHunk": "@@ -235,17 +235,21 @@ private void updateBrokerSlownessScore(Set<BrokerEntity> detectedMetricAnomalies\n     }\n     // For brokers which are previously detected as slow brokers, decrease their slowness score if their metrics has\n     // recovered back to normal range.\n+    Set<BrokerEntity> brokersRecovered = new HashSet<>();\n     for (Map.Entry<BrokerEntity, Integer> entry : _brokerSlownessScore.entrySet()) {\n       BrokerEntity broker = entry.getKey();\n       if (!detectedMetricAnomalies.contains(broker)) {\n         Integer score = _brokerSlownessScore.get(broker);\n-        // If the score reaches zero, remove its suspicion.\n         if (score != null && --score == 0) {\n-          _brokerSlownessScore.remove(broker);\n-          _detectedSlowBrokers.remove(broker);\n+          brokersRecovered.add(broker);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c5254643d9fda141ee506f8a0a42f4a3b93229bc"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 787, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}