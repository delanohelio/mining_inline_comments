{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1NTU5MzIw", "number": 1241, "title": "Add support to retrieve capacity only via load endpoint.", "bodyText": "This PR resolves #1191.\n--\nExample plaintext response, where values are defined for entries in <...>:\n           HOST         BROKER      RACK         DISK_CAP(MB)            DISK(MB)/_(%)_            CORE_NUM         CPU(%)          NW_IN_CAP(KB/s)       LEADER_NW_IN(KB/s)     FOLLOWER_NW_IN(KB/s)         NW_OUT_CAP(KB/s)        NW_OUT(KB/s)       PNW_OUT(KB/s)    LEADERS/REPLICAS\n<hostname-here>,          <id>,     <id>,        <diskCap-mb>,              0.000/00.00,            <cores>,         0.000,              <capacity>,                   0.000,                   0.000,              <capacity>,              0.000,              0.000,             0/0\n<hostname-here>,          <id>,     <id>,        <diskCap-mb>,              0.000/00.00,            <cores>,         0.000,              <capacity>,                   0.000,                   0.000,              <capacity>,              0.000,              0.000,             0/0\n...\n<hostname-here>,          <id>,     <id>,        <diskCap-mb>,              0.000/00.00,            <cores>,         0.000,              <capacity>,                   0.000,                   0.000,              <capacity>,              0.000,              0.000,             0/0", "createdAt": "2020-06-17T02:10:01Z", "url": "https://github.com/linkedin/cruise-control/pull/1241", "merged": true, "mergeCommit": {"oid": "f522db3f37cff1a98d5fc42ae2e36fbb230a0ad2"}, "closed": true, "closedAt": "2020-06-17T17:25:57Z", "author": {"login": "efeg"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcr_nRAAH2gAyNDM1NTU5MzIwOmQ1MjU2MzljNDk0ZmI2YjAyOGVhYjU1OThmYjg5NmNhNTQxOGJhODA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcsNKxggH2gAyNDM1NTU5MzIwOmFkZDUyMDc0Mzc1MWVjZGVjMDhjZTk4MzMyM2JjMGFkYjZmYmFmYzE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d525639c494fb6b028eab5598fb896ca5418ba80", "author": {"user": null}, "url": "https://github.com/linkedin/cruise-control/commit/d525639c494fb6b028eab5598fb896ca5418ba80", "committedDate": "2020-06-17T01:31:44Z", "message": "Add support to retrieve capacity only via load endpoint."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyMDMyODc4", "url": "https://github.com/linkedin/cruise-control/pull/1241#pullrequestreview-432032878", "createdAt": "2020-06-17T03:27:51Z", "commit": {"oid": "d525639c494fb6b028eab5598fb896ca5418ba80"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QwMzoyNzo1MVrOGk0WEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QwMzozMDoxM1rOGk0YHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI1OTUzNw==", "bodyText": "Why do we remove this method? I did a code search and I guess it is not related to this patch but because it is not used anywhere, right?", "url": "https://github.com/linkedin/cruise-control/pull/1241#discussion_r441259537", "createdAt": "2020-06-17T03:27:51Z", "author": {"login": "hzxa21"}, "path": "cruise-control/src/main/java/com/linkedin/kafka/cruisecontrol/model/ClusterModel.java", "diffHunk": "@@ -1242,23 +1238,6 @@ public BrokerStats brokerStats(KafkaCruiseControlConfig config) {\n     return brokerStats;\n   }\n \n-  /**\n-   * The variance of the derived resources.\n-   * @return A non-null array where the ith index is the variance of RawAndDerivedResource.ordinal().\n-   */\n-  public double[] variance() {\n-    RawAndDerivedResource[] resources = RawAndDerivedResource.values();\n-    double[][] utilization = utilizationMatrix();\n-\n-    double[] variance = new double[resources.length];\n-\n-    for (int resourceIndex = 0; resourceIndex < resources.length; resourceIndex++) {\n-      Variance varianceCalculator = new Variance();\n-      variance[resourceIndex] = varianceCalculator.evaluate(utilization[resourceIndex]);\n-    }\n-    return variance;\n-  }\n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d525639c494fb6b028eab5598fb896ca5418ba80"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI2MDA2Mw==", "bodyText": "Why do we remove this method? I did a code search and I guess it is not related to this patch but because it is not used anywhere, right?\nI noticed that writeTo method exists in Replica, Broker, Load, Rack, Disk and Host. Should we also keep it in ClusterModel?", "url": "https://github.com/linkedin/cruise-control/pull/1241#discussion_r441260063", "createdAt": "2020-06-17T03:30:13Z", "author": {"login": "hzxa21"}, "path": "cruise-control/src/main/java/com/linkedin/kafka/cruisecontrol/model/ClusterModel.java", "diffHunk": "@@ -1299,20 +1278,6 @@ public BrokerStats brokerStats(KafkaCruiseControlConfig config) {\n     return utilization;\n   }\n \n-  /**\n-   * Write to the given output stream.\n-   *\n-   * @param out Output stream.\n-   */\n-  public void writeTo(OutputStream out) throws IOException {\n-    String cluster = String.format(\"<Cluster maxPartitionReplicationFactor=\\\"%d\\\">%n\", _maxReplicationFactor);\n-    out.write(cluster.getBytes(StandardCharsets.UTF_8));\n-    for (Rack rack : _racksById.values()) {\n-      rack.writeTo(out);\n-    }\n-    out.write(\"</Cluster>\".getBytes(StandardCharsets.UTF_8));\n-  }\n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d525639c494fb6b028eab5598fb896ca5418ba80"}, "originalPosition": 60}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "add520743751ecdec08ce983323bc0adb6fbafc1", "author": {"user": null}, "url": "https://github.com/linkedin/cruise-control/commit/add520743751ecdec08ce983323bc0adb6fbafc1", "committedDate": "2020-06-17T17:19:17Z", "message": "Address the feedback."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 256, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}