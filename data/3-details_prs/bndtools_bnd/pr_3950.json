{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2NjY5NTQy", "number": 3950, "title": "[workspace] Canonicalize paths in getProjectFromDir", "bodyText": "In a test, the ws had '..' in the path and therefore failed to find that a project dir pointed to a directory.\nThis patch canonicalizes both paths.\nSigned-off-by: Peter Kriens Peter.Kriens@aqute.biz", "createdAt": "2020-04-21T13:19:41Z", "url": "https://github.com/bndtools/bnd/pull/3950", "merged": true, "mergeCommit": {"oid": "0e15f90ad4e98e1c12470063a5f84710fa016d15"}, "closed": true, "closedAt": "2020-04-22T08:34:50Z", "author": {"login": "pkriens"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcZzkcMgH2gAyNDA2NjY5NTQyOjU5Njc2MDAxMjZjNzY3NGU2MGMyNTM2NTc2MjEwYThkYjc5NTk4M2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZ0UtEAFqTM5NzM3MDY4OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5967600126c7674e60c2536576210a8db795983d", "author": {"user": {"login": "pkriens", "name": "Peter Kriens"}}, "url": "https://github.com/bndtools/bnd/commit/5967600126c7674e60c2536576210a8db795983d", "committedDate": "2020-04-21T13:19:09Z", "message": "[workspace] Canonicalize paths in getProjectFromDir\n\nIn a test, the ws had '..' in the path and therefore failed to find that a project dir pointed to a directory.\n\nThis patch canonicalizes both paths.\n\nSigned-off-by: Peter Kriens <Peter.Kriens@aqute.biz>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3MzcwNjg4", "url": "https://github.com/bndtools/bnd/pull/3950#pullrequestreview-397370688", "createdAt": "2020-04-21T14:11:51Z", "commit": {"oid": "5967600126c7674e60c2536576210a8db795983d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxNDoxMTo1MVrOGJH7XQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQxNDoxMTo1MVrOGJH7XQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjIyMDI1Mw==", "bodyText": "Wouldn't be better to make sure Processor always stores it's base as a canonical file? Or does that mess up symlinks?", "url": "https://github.com/bndtools/bnd/pull/3950#discussion_r412220253", "createdAt": "2020-04-21T14:11:51Z", "author": {"login": "bjhargrave"}, "path": "biz.aQute.bndlib/src/aQute/bnd/build/Workspace.java", "diffHunk": "@@ -320,13 +321,18 @@ public void setFileSystem(File workspaceDir, String bndDir) throws Exception {\n \t}\n \n \tpublic Project getProjectFromFile(File projectDir) {\n-\t\tprojectDir = projectDir.getAbsoluteFile();\n-\t\tassert projectDir.isDirectory();\n+\t\ttry {\n+\t\t\tprojectDir = projectDir.getCanonicalFile();\n+\t\t\tassert projectDir.isDirectory();\n \n-\t\tif (getBase().equals(projectDir.getParentFile())) {\n-\t\t\treturn getProject(projectDir.getName());\n+\t\t\tif (getBase().getCanonicalFile()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5967600126c7674e60c2536576210a8db795983d"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3039, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}