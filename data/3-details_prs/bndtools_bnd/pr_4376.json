{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwMjE1NDY4", "number": 4376, "title": "fix: Run was not closed after export in ProjectBuilder", "bodyText": "Signed-off-by: Juergen Albert j.albert@data-in-motion.biz", "createdAt": "2020-10-26T18:10:12Z", "url": "https://github.com/bndtools/bnd/pull/4376", "merged": true, "mergeCommit": {"oid": "1fb0ca182d16576bb37210d0a85c08cdb1ad6469"}, "closed": true, "closedAt": "2020-10-27T12:51:59Z", "author": {"login": "juergen-albert"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWZQwhAFqTUxNzA5NDI5Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWoJSbgFqTUxNzY0ODk3OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3MDk0Mjky", "url": "https://github.com/bndtools/bnd/pull/4376#pullrequestreview-517094292", "createdAt": "2020-10-26T19:09:14Z", "commit": {"oid": "6208e40d8eef4d005d09a9d672dba26faf3ddf6e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxOTowOToxNFrOHoechA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxOTowOToxNFrOHoechA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjIwMzkwOA==", "bodyText": "Run is a Closeable, so use a try-with-resources statement here to close the Run.\ntry (Run run = Run.createRun(getProject().getWorkspace(), file)) {\n  ...\n}", "url": "https://github.com/bndtools/bnd/pull/4376#discussion_r512203908", "createdAt": "2020-10-26T19:09:14Z", "author": {"login": "bjhargrave"}, "path": "biz.aQute.bndlib/src/aQute/bnd/build/ProjectBuilder.java", "diffHunk": "@@ -670,18 +670,18 @@ public String toString() {\n \t\treturn runs;\n \t}\n \n-\tMap<File, Resource> doExports(Map<File, List<Attrs>> entries) {\n+\tMap<File, Resource> doExports(Map<File, List<Attrs>> entries) throws Exception {\n \t\tMap<File, Resource> result = new LinkedHashMap<>();\n \n \t\tfor (Entry<File, List<Attrs>> e : entries.entrySet()) {\n \n \t\t\tfor (Attrs attrs : e.getValue()) {\n \n \t\t\t\tFile file = e.getKey();\n+\t\t\t\tRun run = null;\n \t\t\t\ttry {\n \n-\t\t\t\t\tRun run = Run.createRun(getProject().getWorkspace(), file);\n-\n+\t\t\t\t\trun = Run.createRun(getProject().getWorkspace(), file);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6208e40d8eef4d005d09a9d672dba26faf3ddf6e"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c3b5efa25445d11630c3654fd87a7f5cdab8575", "author": {"user": {"login": "juergen-albert", "name": "J\u00fcrgen Albert"}}, "url": "https://github.com/bndtools/bnd/commit/3c3b5efa25445d11630c3654fd87a7f5cdab8575", "committedDate": "2020-10-27T09:02:15Z", "message": "fix: Run was not closed after export in ProjectBuilder\n\nSigned-off-by: Juergen Albert <j.albert@data-in-motion.biz>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6208e40d8eef4d005d09a9d672dba26faf3ddf6e", "author": {"user": {"login": "juergen-albert", "name": "J\u00fcrgen Albert"}}, "url": "https://github.com/bndtools/bnd/commit/6208e40d8eef4d005d09a9d672dba26faf3ddf6e", "committedDate": "2020-10-26T18:08:06Z", "message": "fix: Run was not closed after export in ProjectBuilder\n\nSigned-off-by: Juergen Albert <j.albert@data-in-motion.biz>"}, "afterCommit": {"oid": "3c3b5efa25445d11630c3654fd87a7f5cdab8575", "author": {"user": {"login": "juergen-albert", "name": "J\u00fcrgen Albert"}}, "url": "https://github.com/bndtools/bnd/commit/3c3b5efa25445d11630c3654fd87a7f5cdab8575", "committedDate": "2020-10-27T09:02:15Z", "message": "fix: Run was not closed after export in ProjectBuilder\n\nSigned-off-by: Juergen Albert <j.albert@data-in-motion.biz>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3NjQ4OTc5", "url": "https://github.com/bndtools/bnd/pull/4376#pullrequestreview-517648979", "createdAt": "2020-10-27T12:29:55Z", "commit": {"oid": "3c3b5efa25445d11630c3654fd87a7f5cdab8575"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3115, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}