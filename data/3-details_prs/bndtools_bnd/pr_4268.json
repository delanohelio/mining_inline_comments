{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY3ODA5NTg3", "number": 4268, "title": "[quickfix] More enhancements", "bodyText": "Disambiguate cases where there is no ambiguity (eg, my.package.name.something will not attempt to look in package \"my.package.name\" as it is clear from that context that \".name\" is a class, not a package. Enables us to reinstate most of the original tests that had not already been reinstated.\nI noticed while working with Bnd that certain types of class literal expression for missing types would not produce suggestions, even though they were literals of classes that Bnd should have been able to find. This has now been fixed.\nIf multiple problem markers produce multiple suggestions for the same bundle, the proposal for that bundle will now appear only once (previously, the proposal was repeated for each problem marker). If the proposals related to distinct types, then each of those distinct types will be listed in the proposal summary in the \"found...\" section.\nI have re-instated the integration test with some extra debugging checks to produce more diagnostics. Hopefully if/when we get another failure I'll have more information to go on.", "createdAt": "2020-08-14T06:59:04Z", "url": "https://github.com/bndtools/bnd/pull/4268", "merged": true, "mergeCommit": {"oid": "39450a4f34840062d8762ae6d99a37c447c492fc"}, "closed": true, "closedAt": "2020-08-18T13:50:10Z", "author": {"login": "kriegfrj"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc_JVWzgBqjM2NTg1MDM4MzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAHVV-gFqTQ2OTQ3NDQ5Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "30aae87421d43aca4c37062abe2533b7a3a3db04", "author": {"user": {"login": "kriegfrj", "name": "Fr Jeremy Krieg"}}, "url": "https://github.com/bndtools/bnd/commit/30aae87421d43aca4c37062abe2533b7a3a3db04", "committedDate": "2020-08-14T06:47:31Z", "message": "[quickfix] Better handling of class literals\n\nSigned-off-by: Fr Jeremy Krieg <fr.jkrieg@greekwelfaresa.org.au>"}, "afterCommit": {"oid": "2f35b2b6c19c083475fcc82ada9e0c1ac76db841", "author": {"user": {"login": "kriegfrj", "name": "Fr Jeremy Krieg"}}, "url": "https://github.com/bndtools/bnd/commit/2f35b2b6c19c083475fcc82ada9e0c1ac76db841", "committedDate": "2020-08-15T13:34:49Z", "message": "[quickfix] Better handling of class literals\n\nSigned-off-by: Fr Jeremy Krieg <fr.jkrieg@greekwelfaresa.org.au>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4NjE4NTUz", "url": "https://github.com/bndtools/bnd/pull/4268#pullrequestreview-468618553", "createdAt": "2020-08-17T16:31:56Z", "commit": {"oid": "2f35b2b6c19c083475fcc82ada9e0c1ac76db841"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxNjozMTo1N1rOHBwE7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxNjozODozOVrOHBwT2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTU5ODMxNw==", "bodyText": "Each test method should have its own tmp dir so there is no chance of side effects between tests. This should be @BeforeEach.", "url": "https://github.com/bndtools/bnd/pull/4268#discussion_r471598317", "createdAt": "2020-08-17T16:31:57Z", "author": {"login": "bjhargrave"}, "path": "biz.aQute.bndlib.tests/test/aQute/bnd/build/classindex/ClassIndexTest.java", "diffHunk": "@@ -20,50 +18,97 @@\n import aQute.libg.map.MAP.MAPX;\n \n public class ClassIndexTest {\n-\tpublic static final String\tTMPDIR\t\t= \"generated/tmp/test\";\n+\tpublic static final String\t\t\tTMPDIR\t= \"generated/tmp/test\";\n+\tprivate static File\t\t\t\t\ttestDir;\n+\tprivate static File\t\t\t\t\thome\t= IO.getFile(\"testresources/classindex\");\n+\tprivate static Workspace\t\t\tws;\n+\n \t@Rule\n-\tpublic final TestName\t\ttestName\t= new TestName();\n-\tprivate File\t\t\t\ttestDir;\n-\tprivate File\t\t\t\thome\t\t= IO.getFile(\"testresources/classindex\");\n+\tpublic final JUnitSoftAssertions\tsoftly\t= new JUnitSoftAssertions();\n \n-\t@Before\n-\tpublic void setUp() throws IOException {\n-\t\ttestDir = new File(TMPDIR, getClass().getName() + \"/\" + testName.getMethodName());\n+\t@BeforeClass\n+\tpublic static void setUp() throws Exception {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2f35b2b6c19c083475fcc82ada9e0c1ac76db841"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTYwMjEzNw==", "bodyText": "If you need parameter names, then you need to tell the compiler (javac and eclipse) to compile the parameter names in. So you probably need to make a change to this test project similar to:\n26f649a", "url": "https://github.com/bndtools/bnd/pull/4268#discussion_r471602137", "createdAt": "2020-08-17T16:38:39Z", "author": {"login": "bjhargrave"}, "path": "bndtools.core.test/src/bndtools/core/test/editors/quickfix/BuildpathQuickFixProcessorTest.java", "diffHunk": "@@ -826,8 +853,25 @@ void withFQClassLiteral_asAnnotationParameter_suggestsBundles(SoftAssertions sof\n \t\t\tsuggestsBundle(\"bndtools.core.test.fodder.iface\", \"1.0.0\", \"iface.bundle.MyInterface\"));\n \t}\n \n+\t@Disabled(\"Can't seem to make this work - binding information seems to be missing from class literal, I think this is\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2f35b2b6c19c083475fcc82ada9e0c1ac76db841"}, "originalPosition": 241}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d709df5d6e4835798af9b39cd3573d4892ad1c4", "author": {"user": {"login": "kriegfrj", "name": "Fr Jeremy Krieg"}}, "url": "https://github.com/bndtools/bnd/commit/3d709df5d6e4835798af9b39cd3573d4892ad1c4", "committedDate": "2020-08-18T02:32:50Z", "message": "[classindex] Added search variant that searches particular package\n\nSigned-off-by: Fr Jeremy Krieg <fr.jkrieg@greekwelfaresa.org.au>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b419749d759ded60505bad7636edef293971b72", "author": {"user": {"login": "kriegfrj", "name": "Fr Jeremy Krieg"}}, "url": "https://github.com/bndtools/bnd/commit/4b419749d759ded60505bad7636edef293971b72", "committedDate": "2020-08-18T02:32:51Z", "message": "[quickfix] Added more discerning checks for undefined types\n\nEliminates some possible false positives due to class/package qualifier\nambiguity.\n\nSigned-off-by: Fr Jeremy Krieg <fr.jkrieg@greekwelfaresa.org.au>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6cd6fd0b6ef484035dea0ab9f71f3cf1d1e199d", "author": {"user": {"login": "kriegfrj", "name": "Fr Jeremy Krieg"}}, "url": "https://github.com/bndtools/bnd/commit/e6cd6fd0b6ef484035dea0ab9f71f3cf1d1e199d", "committedDate": "2020-08-18T02:32:51Z", "message": "[quickfix] Better handling of class literals\n\nSigned-off-by: Fr Jeremy Krieg <fr.jkrieg@greekwelfaresa.org.au>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2f35b2b6c19c083475fcc82ada9e0c1ac76db841", "author": {"user": {"login": "kriegfrj", "name": "Fr Jeremy Krieg"}}, "url": "https://github.com/bndtools/bnd/commit/2f35b2b6c19c083475fcc82ada9e0c1ac76db841", "committedDate": "2020-08-15T13:34:49Z", "message": "[quickfix] Better handling of class literals\n\nSigned-off-by: Fr Jeremy Krieg <fr.jkrieg@greekwelfaresa.org.au>"}, "afterCommit": {"oid": "e6cd6fd0b6ef484035dea0ab9f71f3cf1d1e199d", "author": {"user": {"login": "kriegfrj", "name": "Fr Jeremy Krieg"}}, "url": "https://github.com/bndtools/bnd/commit/e6cd6fd0b6ef484035dea0ab9f71f3cf1d1e199d", "committedDate": "2020-08-18T02:32:51Z", "message": "[quickfix] Better handling of class literals\n\nSigned-off-by: Fr Jeremy Krieg <fr.jkrieg@greekwelfaresa.org.au>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5NDc0NDky", "url": "https://github.com/bndtools/bnd/pull/4268#pullrequestreview-469474492", "createdAt": "2020-08-18T13:49:53Z", "commit": {"oid": "e6cd6fd0b6ef484035dea0ab9f71f3cf1d1e199d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3182, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}