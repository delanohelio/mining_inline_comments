{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ1NzAxMzY5", "number": 4475, "title": "[builder] Improve error message for missing bnd.bnd", "bodyText": "Fixes #4422.", "createdAt": "2020-12-26T14:29:30Z", "url": "https://github.com/bndtools/bnd/pull/4475", "merged": true, "mergeCommit": {"oid": "b74399e0d50ec4a953d9ccb9e67a5d75ced76407"}, "closed": true, "closedAt": "2021-01-06T15:38:40Z", "author": {"login": "kriegfrj"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABds63EmgFqTU2MTI1NDQ4Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdthZfMAFqTU2MjgwODIwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYxMjU0NDg2", "url": "https://github.com/bndtools/bnd/pull/4475#pullrequestreview-561254486", "createdAt": "2021-01-04T18:44:27Z", "commit": {"oid": "8d753053333aed63f03b4a9087c847470adff1de"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNFQxODo0NDoyOFrOIN8u8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNFQxODo0NDoyOFrOIN8u8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTQ5NzQ1Nw==", "bodyText": "Shouldn't this be:\n} else if (!Files.isRegularFile(javaPath.resolve(Project.BNDFILE))) {", "url": "https://github.com/bndtools/bnd/pull/4475#discussion_r551497457", "createdAt": "2021-01-04T18:44:28Z", "author": {"login": "bjhargrave"}, "path": "bndtools.builder/src/org/bndtools/builder/BndtoolsBuilder.java", "diffHunk": "@@ -148,6 +148,10 @@\n \t\t\t\t\t\tif (!Files.isSameFile(javaPath.getParent(), wsPath)) {\n \t\t\t\t\t\t\tmsg = \"The project directory: \" + javaPath + \" is not a subdirectory of the bnd workspace \"\n \t\t\t\t\t\t\t\t+ wsPath;\n+\t\t\t\t\t\t} else if (!projPath.append(Project.BNDFILE)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d753053333aed63f03b4a9087c847470adff1de"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8d753053333aed63f03b4a9087c847470adff1de", "author": {"user": {"login": "kriegfrj", "name": "Fr Jeremy Krieg"}}, "url": "https://github.com/bndtools/bnd/commit/8d753053333aed63f03b4a9087c847470adff1de", "committedDate": "2020-12-26T14:26:35Z", "message": "[builder] Improve error message for missing bnd.bnd\n\nFixes #4422.\n\nSigned-off-by: Fr Jeremy Krieg <fr.jkrieg@greekwelfaresa.org.au>"}, "afterCommit": {"oid": "95eff319664794252caccc82f9513a641b49ca75", "author": {"user": {"login": "kriegfrj", "name": "Fr Jeremy Krieg"}}, "url": "https://github.com/bndtools/bnd/commit/95eff319664794252caccc82f9513a641b49ca75", "committedDate": "2021-01-05T12:58:57Z", "message": "[builder] Improve error message for missing bnd.bnd\n\nFixes #4422.\n\nSigned-off-by: Fr Jeremy Krieg <fr.jkrieg@greekwelfaresa.org.au>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYxODk3NzM2", "url": "https://github.com/bndtools/bnd/pull/4475#pullrequestreview-561897736", "createdAt": "2021-01-05T15:42:05Z", "commit": {"oid": "95eff319664794252caccc82f9513a641b49ca75"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQxNTo0MjowNVrOIOcMDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNVQxNTo0MjowNVrOIOcMDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjAxMjgxMg==", "bodyText": "This is unreachable. If the file exists and is not a directory, then it must be a regular file. There are no other choices since you follow symlinks.", "url": "https://github.com/bndtools/bnd/pull/4475#discussion_r552012812", "createdAt": "2021-01-05T15:42:05Z", "author": {"login": "bjhargrave"}, "path": "bndtools.builder/src/org/bndtools/builder/BndtoolsBuilder.java", "diffHunk": "@@ -148,13 +148,24 @@\n \t\t\t\t\t\tif (!Files.isSameFile(javaPath.getParent(), wsPath)) {\n \t\t\t\t\t\t\tmsg = \"The project directory: \" + javaPath + \" is not a subdirectory of the bnd workspace \"\n \t\t\t\t\t\t\t\t+ wsPath;\n+\t\t\t\t\t\t} else {\n+\t\t\t\t\t\t\tPath bndPath = javaPath.resolve(Project.BNDFILE);\n+\n+\t\t\t\t\t\t\tif (!Files.exists(bndPath)) {\n+\t\t\t\t\t\t\t\tmsg = \"The project does not have a \" + Project.BNDFILE + \" file\";\n+\t\t\t\t\t\t\t} else if (!Files.isReadable(bndPath)) {\n+\t\t\t\t\t\t\t\tmsg = Project.BNDFILE + \" is not readable\";\n+\t\t\t\t\t\t\t} else if (Files.isDirectory(bndPath)) {\n+\t\t\t\t\t\t\t\tmsg = Project.BNDFILE + \" is a directory\";\n+\t\t\t\t\t\t\t} else if (!Files.isRegularFile(bndPath)) {\n+\t\t\t\t\t\t\t\tmsg = Project.BNDFILE + \" is not a regular file\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95eff319664794252caccc82f9513a641b49ca75"}, "originalPosition": 14}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "95eff319664794252caccc82f9513a641b49ca75", "author": {"user": {"login": "kriegfrj", "name": "Fr Jeremy Krieg"}}, "url": "https://github.com/bndtools/bnd/commit/95eff319664794252caccc82f9513a641b49ca75", "committedDate": "2021-01-05T12:58:57Z", "message": "[builder] Improve error message for missing bnd.bnd\n\nFixes #4422.\n\nSigned-off-by: Fr Jeremy Krieg <fr.jkrieg@greekwelfaresa.org.au>"}, "afterCommit": {"oid": "96bf537250335e2868b78fe7bea7949d584ffaeb", "author": {"user": {"login": "kriegfrj", "name": "Fr Jeremy Krieg"}}, "url": "https://github.com/bndtools/bnd/commit/96bf537250335e2868b78fe7bea7949d584ffaeb", "committedDate": "2021-01-06T03:48:55Z", "message": "[builder] Improve error message for missing bnd.bnd\n\nFixes #4422.\n\nSigned-off-by: Fr Jeremy Krieg <fr.jkrieg@greekwelfaresa.org.au>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3f3634e36c3a4ab296e43d91a6157b6c8554c50", "author": {"user": {"login": "kriegfrj", "name": "Fr Jeremy Krieg"}}, "url": "https://github.com/bndtools/bnd/commit/f3f3634e36c3a4ab296e43d91a6157b6c8554c50", "committedDate": "2021-01-06T03:49:36Z", "message": "[builder] Improve error message for missing bnd.bnd\n\nFixes #4422.\n\nSigned-off-by: Fr Jeremy Krieg <fr.jkrieg@greekwelfaresa.org.au>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "96bf537250335e2868b78fe7bea7949d584ffaeb", "author": {"user": {"login": "kriegfrj", "name": "Fr Jeremy Krieg"}}, "url": "https://github.com/bndtools/bnd/commit/96bf537250335e2868b78fe7bea7949d584ffaeb", "committedDate": "2021-01-06T03:48:55Z", "message": "[builder] Improve error message for missing bnd.bnd\n\nFixes #4422.\n\nSigned-off-by: Fr Jeremy Krieg <fr.jkrieg@greekwelfaresa.org.au>"}, "afterCommit": {"oid": "f3f3634e36c3a4ab296e43d91a6157b6c8554c50", "author": {"user": {"login": "kriegfrj", "name": "Fr Jeremy Krieg"}}, "url": "https://github.com/bndtools/bnd/commit/f3f3634e36c3a4ab296e43d91a6157b6c8554c50", "committedDate": "2021-01-06T03:49:36Z", "message": "[builder] Improve error message for missing bnd.bnd\n\nFixes #4422.\n\nSigned-off-by: Fr Jeremy Krieg <fr.jkrieg@greekwelfaresa.org.au>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYyODA4MjA5", "url": "https://github.com/bndtools/bnd/pull/4475#pullrequestreview-562808209", "createdAt": "2021-01-06T15:38:33Z", "commit": {"oid": "f3f3634e36c3a4ab296e43d91a6157b6c8554c50"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3091, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}