{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzNDA3MTcz", "number": 4006, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNjozMzoyMFrOD5e86A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNjozMzoyOFrOD5e9Og==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxNjAyNTM2OnYy", "diffSide": "RIGHT", "path": "bndtools.builder/src/org/bndtools/builder/BndSourceGenerateCompilationParticipant.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNjozMzoyMVrOGQxwPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNjozMzoyMVrOGQxwPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDI0NTU2Ng==", "bodyText": "Did you mean to commit this println?", "url": "https://github.com/bndtools/bnd/pull/4006#discussion_r420245566", "createdAt": "2020-05-05T16:33:21Z", "author": {"login": "bjhargrave"}, "path": "bndtools.builder/src/org/bndtools/builder/BndSourceGenerateCompilationParticipant.java", "diffHunk": "@@ -16,26 +16,20 @@\n \tprivate static final ILogger\tlogger\t\t\t\t= Logger\n \t\t.getLogger(BndSourceGenerateCompilationParticipant.class);\n \tpublic static final String\t\tMARKER_BND_GENERATE\t= \"bndtools.builder.bndgenerate\";\n-\tprivate Project\t\t\t\t\tproject;\n \n \t@Override\n \tpublic boolean isActive(IJavaProject javaProject) {\n \t\ttry {\n \t\t\tMarkerSupport markers = new MarkerSupport(javaProject.getProject());\n-\t\t\tproject = Central.getProject(javaProject.getProject());\n+\t\t\tProject project = Central.getProject(javaProject.getProject());\n \t\t\tif (project == null)\n \t\t\t\treturn false;\n \n-\t\t\tResult<Set<File>, String> inputs = project.getGenerate()\n-\t\t\t\t.getInputs();\n-\t\t\tif (inputs.isErr()) {\n-\t\t\t\t// handle any errors\n-\t\t\t\t// in the aboutToBuild method\n-\t\t\t\treturn true;\n-\t\t\t}\n+\t\t\tboolean result = project.getGenerate()\n+\t\t\t\t.needsBuild();\n \n-\t\t\treturn !inputs.unwrap()\n-\t\t\t\t.isEmpty();\n+\t\t\tSystem.out.println(\"isActive \" + project + \" \" + result);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6d1c3992274805dece7812f8c0499838459cb03"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxNjAyNjE4OnYy", "diffSide": "RIGHT", "path": "bndtools.builder/src/org/bndtools/builder/BndSourceGenerateCompilationParticipant.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNjozMzoyOFrOGQxwsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNjo0OTozNlrOGQybTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDI0NTY4MA==", "bodyText": "Did you mean to commit this println?", "url": "https://github.com/bndtools/bnd/pull/4006#discussion_r420245680", "createdAt": "2020-05-05T16:33:28Z", "author": {"login": "bjhargrave"}, "path": "bndtools.builder/src/org/bndtools/builder/BndSourceGenerateCompilationParticipant.java", "diffHunk": "@@ -45,11 +39,16 @@ public boolean isActive(IJavaProject javaProject) {\n \t@Override\n \tpublic int aboutToBuild(IJavaProject javaProject) {\n \t\ttry {\n+\t\t\tProject project = Central.getProject(javaProject.getProject());\n+\t\t\tif (project == null)\n+\t\t\t\treturn READY_FOR_BUILD;\n+\n+\t\t\tSystem.out.println(\"aboutToBuild \" + project);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b6d1c3992274805dece7812f8c0499838459cb03"}, "originalPosition": 40}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDI1NjU4OA==", "bodyText": "nope, corrected", "url": "https://github.com/bndtools/bnd/pull/4006#discussion_r420256588", "createdAt": "2020-05-05T16:49:36Z", "author": {"login": "pkriens"}, "path": "bndtools.builder/src/org/bndtools/builder/BndSourceGenerateCompilationParticipant.java", "diffHunk": "@@ -45,11 +39,16 @@ public boolean isActive(IJavaProject javaProject) {\n \t@Override\n \tpublic int aboutToBuild(IJavaProject javaProject) {\n \t\ttry {\n+\t\t\tProject project = Central.getProject(javaProject.getProject());\n+\t\t\tif (project == null)\n+\t\t\t\treturn READY_FOR_BUILD;\n+\n+\t\t\tSystem.out.println(\"aboutToBuild \" + project);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDI0NTY4MA=="}, "originalCommit": {"oid": "b6d1c3992274805dece7812f8c0499838459cb03"}, "originalPosition": 40}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1408, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}