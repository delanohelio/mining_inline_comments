{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcwMjY4ODM4", "number": 3757, "title": "Pkriens/diverse", "bodyText": "", "createdAt": "2020-02-03T11:31:07Z", "url": "https://github.com/bndtools/bnd/pull/3757", "merged": true, "mergeCommit": {"oid": "7080ee7a3a482b03816c8d7c85218de5d04ac480"}, "closed": true, "closedAt": "2020-02-13T08:51:03Z", "author": {"login": "pkriens"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcAsd04gFqTM1MjIzMDc5MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcD18cvgBqjMwMzM3MzQyMzk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUyMjMwNzkw", "url": "https://github.com/bndtools/bnd/pull/3757#pullrequestreview-352230790", "createdAt": "2020-02-03T12:53:49Z", "commit": {"oid": "f650796cf4a0165b1c70b548fb4d8ca829591062"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMjo1Mzo0OVrOFkwW-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wM1QxMjo1NDoyM1rOFkwX8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA4NTM2OA==", "bodyText": "This is wrong. We must have version specific branches so older versions of Bndtools don't stop working when we update master for newer branches. We just forgot to update the repo for 5.0.0. (Need to add this task to the release process checklist.)", "url": "https://github.com/bndtools/bnd/pull/3757#discussion_r374085368", "createdAt": "2020-02-03T12:53:49Z", "author": {"login": "bjhargrave"}, "path": "org.bndtools.templating.gitrepo/resources/processed/org/bndtools/templating/jgit/initialrepos.txt", "diffHunk": "@@ -1 +1 @@\n-bndtools/workspace;branch=origin/${version;==;${base.version}}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f650796cf4a0165b1c70b548fb4d8ca829591062"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDA4NTYxNw==", "bodyText": "You should close this HttpClient. The old code does this.", "url": "https://github.com/bndtools/bnd/pull/3757#discussion_r374085617", "createdAt": "2020-02-03T12:54:23Z", "author": {"login": "bjhargrave"}, "path": "org.bndtools.templating.gitrepo/src/org/bndtools/templating/jgit/Cache.java", "diffHunk": "@@ -10,14 +10,21 @@\n import aQute.bnd.service.url.TaggedData;\n import aQute.lib.io.IO;\n import aQute.libg.tuple.Pair;\n+import bndtools.central.Central;\n \n public class Cache {\n \n     private final ConcurrentMap<URI, Pair<String, byte[]>> cache = new ConcurrentHashMap<>();\n \n-    public byte[] download(URI uri) throws IOException {\n+\tpublic byte[] download(URI uri) throws Exception {\n         byte[] data;\n-        try (HttpClient client = new HttpClient()) {\n+\t\ttry {\n+\t\t\tHttpClient client = Central.getWorkspace()\n+\t\t\t\t.getPlugin(HttpClient.class);\n+\n+\t\t\tif (client == null)\n+\t\t\t\tclient = new HttpClient();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f650796cf4a0165b1c70b548fb4d8ca829591062"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d1076d51cbcddec7658292326bdf6f5913852dc", "author": {"user": {"login": "pkriens", "name": "Peter Kriens"}}, "url": "https://github.com/bndtools/bnd/commit/7d1076d51cbcddec7658292326bdf6f5913852dc", "committedDate": "2020-02-13T07:38:37Z", "message": "[ui] Remove retina warning\n\nSigned-off-by: Peter Kriens <Peter.Kriens@aqute.biz>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "396832dae8d053840877c542a8a9277d14a9cb86", "author": {"user": {"login": "pkriens", "name": "Peter Kriens"}}, "url": "https://github.com/bndtools/bnd/commit/396832dae8d053840877c542a8a9277d14a9cb86", "committedDate": "2020-02-13T07:38:37Z", "message": "[runtime] Made tables more readable by turning edges in spaces\n\nSigned-off-by: Peter Kriens <Peter.Kriens@aqute.biz>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a02e37ac5f2ba72bcb908db7ed2795dff416d472", "author": {"user": {"login": "pkriens", "name": "Peter Kriens"}}, "url": "https://github.com/bndtools/bnd/commit/a02e37ac5f2ba72bcb908db7ed2795dff416d472", "committedDate": "2020-02-13T07:38:37Z", "message": "[doc] GLOB table fixed\n\nSigned-off-by: Peter Kriens <Peter.Kriens@aqute.biz>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fca3068e2508d17de3d0dd4e438ff0e83b8bc0d4", "author": {"user": {"login": "pkriens", "name": "Peter Kriens"}}, "url": "https://github.com/bndtools/bnd/commit/fca3068e2508d17de3d0dd4e438ff0e83b8bc0d4", "committedDate": "2020-02-13T07:38:37Z", "message": "[templates] Fixed Workspace Templates\n\n- The existing template used a branch that did not exist, fixed to default.\n- Added the new min workspace\n\n\nSigned-off-by: Peter Kriens <Peter.Kriens@aqute.biz>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "77a8568ba63d030a4275f77bfdf2686193b5f916", "author": {"user": {"login": "pkriens", "name": "Peter Kriens"}}, "url": "https://github.com/bndtools/bnd/commit/77a8568ba63d030a4275f77bfdf2686193b5f916", "committedDate": "2020-02-13T07:38:37Z", "message": "[templates] The Http Client in the Github cache was unconnected\n\nThe Github cache created an Http Client out of the blue. Made\nit use the one from the workspace.\n\n\nSigned-off-by: Peter Kriens <Peter.Kriens@aqute.biz>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f650796cf4a0165b1c70b548fb4d8ca829591062", "author": {"user": {"login": "pkriens", "name": "Peter Kriens"}}, "url": "https://github.com/bndtools/bnd/commit/f650796cf4a0165b1c70b548fb4d8ca829591062", "committedDate": "2020-02-03T11:28:36Z", "message": "[templates] The Http Client in the Github cache was unconnected\n\nThe Github cache created an Http Client out of the blue. Made\nit use the one from the workspace.\n\nSigned-off-by: Peter Kriens <Peter.Kriens@aqute.biz>"}, "afterCommit": {"oid": "77a8568ba63d030a4275f77bfdf2686193b5f916", "author": {"user": {"login": "pkriens", "name": "Peter Kriens"}}, "url": "https://github.com/bndtools/bnd/commit/77a8568ba63d030a4275f77bfdf2686193b5f916", "committedDate": "2020-02-13T07:38:37Z", "message": "[templates] The Http Client in the Github cache was unconnected\n\nThe Github cache created an Http Client out of the blue. Made\nit use the one from the workspace.\n\n\nSigned-off-by: Peter Kriens <Peter.Kriens@aqute.biz>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3066, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}