{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyNjU1MTM0", "number": 4155, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMDowOTo0OVrOEFLUqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMDoxMjowOFrOEFLW5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczODYzODUxOnYy", "diffSide": "RIGHT", "path": "bndtools.core/src/org/bndtools/core/resolve/CancelOperationCallback.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMDowOTo0OVrOGjQUog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMDowOTo0OVrOGjQUog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTYyMDc3MA==", "bodyText": "private final", "url": "https://github.com/bndtools/bnd/pull/4155#discussion_r439620770", "createdAt": "2020-06-12T20:09:49Z", "author": {"login": "bjhargrave"}, "path": "bndtools.core/src/org/bndtools/core/resolve/CancelOperationCallback.java", "diffHunk": "@@ -0,0 +1,27 @@\n+package org.bndtools.core.resolve;\n+\n+import java.util.List;\n+import java.util.Set;\n+\n+import org.eclipse.core.runtime.IProgressMonitor;\n+import org.osgi.resource.Capability;\n+import org.osgi.resource.Requirement;\n+\n+import biz.aQute.resolve.ResolutionCallback;\n+\n+public class CancelOperationCallback implements ResolutionCallback {\n+\n+\tprivate IProgressMonitor monitor;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3367fea2df604f6e07517b6ef3474f79537b7d9"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczODY0MzM0OnYy", "diffSide": "RIGHT", "path": "biz.aQute.resolve/src/biz/aQute/resolve/RunResolution.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMDoxMTo0NFrOGjQXpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMDoxMTo0NFrOGjQXpw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTYyMTU0Mw==", "bodyText": "I think the last argument need to be null. Otherwise the ResolverLogger is not closed.", "url": "https://github.com/bndtools/bnd/pull/4155#discussion_r439621543", "createdAt": "2020-06-12T20:11:44Z", "author": {"login": "bjhargrave"}, "path": "biz.aQute.resolve/src/biz/aQute/resolve/RunResolution.java", "diffHunk": "@@ -73,10 +73,28 @@\n \t */\n \tpublic static RunResolution resolve(Project project, Processor actualProperties,\n \t\tCollection<ResolutionCallback> callbacks) {\n+\t\treturn resolve(project, actualProperties, callbacks, new ResolverLogger());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3367fea2df604f6e07517b6ef3474f79537b7d9"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczODY0NDIzOnYy", "diffSide": "RIGHT", "path": "bndtools.core/src/bndtools/editor/BndEditor.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMDoxMjowOFrOGjQYMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxNDo1NDo1N1rOGlzPkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTYyMTY4Mw==", "bodyText": "Who closes this ResolverLogger? I have the feeling there are several code paths where it is quite unclear who, if anyone, closes the ResolverLoggers.", "url": "https://github.com/bndtools/bnd/pull/4155#discussion_r439621683", "createdAt": "2020-06-12T20:12:08Z", "author": {"login": "bjhargrave"}, "path": "bndtools.core/src/bndtools/editor/BndEditor.java", "diffHunk": "@@ -328,8 +329,9 @@ public IStatus runInUIThread(IProgressMonitor monitor) {\n \t\t\t\t\tsourcePage.commit(false);\n \t\t\t\t}\n \n+\t\t\t\tResolverLogger logger = new ResolverLogger();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3367fea2df604f6e07517b6ef3474f79537b7d9"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjI5MDA2NA==", "bodyText": "you are right, the implementation was a bit too messy. I need to keep the logger till the End, so I can instruct it not to delete the logfile if the resolver ran in circles and needed canceling.\nThe logger will will now be created for each resolve operation and will be closed when the wizard is disposed or the when we reresolve after adding optional bundles", "url": "https://github.com/bndtools/bnd/pull/4155#discussion_r442290064", "createdAt": "2020-06-18T14:54:57Z", "author": {"login": "juergen-albert"}, "path": "bndtools.core/src/bndtools/editor/BndEditor.java", "diffHunk": "@@ -328,8 +329,9 @@ public IStatus runInUIThread(IProgressMonitor monitor) {\n \t\t\t\t\tsourcePage.commit(false);\n \t\t\t\t}\n \n+\t\t\t\tResolverLogger logger = new ResolverLogger();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTYyMTY4Mw=="}, "originalCommit": {"oid": "d3367fea2df604f6e07517b6ef3474f79537b7d9"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1367, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}