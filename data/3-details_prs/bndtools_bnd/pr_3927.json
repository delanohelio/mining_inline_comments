{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA0NDcxNzkw", "number": 3927, "title": "[reporter] calculate and show Checksum the bundle", "bodyText": "", "createdAt": "2020-04-16T15:34:53Z", "url": "https://github.com/bndtools/bnd/pull/3927", "merged": true, "mergeCommit": {"oid": "fd40a62e64f6e2266e3381603e64fdadcd2b5ef4"}, "closed": true, "closedAt": "2020-04-16T16:59:44Z", "author": {"login": "stbischof"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYOkZ9ABqjMyNDA1MzgyNjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcYPucPAFqTM5NDgyNzQ2Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8f6f860df65e7a3ffa6365b50e307eae1197a44d", "author": {"user": {"login": "stbischof", "name": "Stefan Bischof"}}, "url": "https://github.com/bndtools/bnd/commit/8f6f860df65e7a3ffa6365b50e307eae1197a44d", "committedDate": "2020-04-16T15:31:16Z", "message": "[reporter] calculate and show Checksum the bundle\n\nSigned-off-by: Stefan Bischof <stbischof@bipolis.org>"}, "afterCommit": {"oid": "2db22607f0e8a6da65ec3a0ed658699c8e3295e8", "author": {"user": {"login": "stbischof", "name": "Stefan Bischof"}}, "url": "https://github.com/bndtools/bnd/commit/2db22607f0e8a6da65ec3a0ed658699c8e3295e8", "committedDate": "2020-04-16T15:38:31Z", "message": "[reporter] calculate and show Checksum the bundle\n\nSigned-off-by: Stefan Bischof <stbischof@bipolis.org>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0NzY5MzI0", "url": "https://github.com/bndtools/bnd/pull/3927#pullrequestreview-394769324", "createdAt": "2020-04-16T15:49:37Z", "commit": {"oid": "2db22607f0e8a6da65ec3a0ed658699c8e3295e8"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxNTo0OTozN1rOGGr30g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxNTo0OTozN1rOGGr30g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTY2MzQ0Mg==", "bodyText": "See the aQute.libg.cryptography package for classes to compute MD5, SHA1, SHA256. They provide a nice asHex method to return the digest value as a hex string.", "url": "https://github.com/bndtools/bnd/pull/3927#discussion_r409663442", "createdAt": "2020-04-16T15:49:37Z", "author": {"login": "bjhargrave"}, "path": "biz.aQute.bnd.reporter/src/biz/aQute/bnd/reporter/plugins/entries/bundle/ChecksumPlugin.java", "diffHunk": "@@ -0,0 +1,95 @@\n+package biz.aQute.bnd.reporter.plugins.entries.bundle;\n+\n+import java.io.File;\n+import java.nio.file.Files;\n+import java.security.MessageDigest;\n+import java.util.Collections;\n+import java.util.HashMap;\n+import java.util.Locale;\n+import java.util.Map;\n+import java.util.Objects;\n+\n+import aQute.bnd.annotation.plugin.BndPlugin;\n+import aQute.bnd.osgi.Jar;\n+import aQute.bnd.service.Plugin;\n+import aQute.bnd.service.reporter.ReportEntryPlugin;\n+import aQute.service.reporter.Reporter;\n+import biz.aQute.bnd.reporter.generator.EntryNamesReference;\n+import biz.aQute.bnd.reporter.maven.dto.ChecksumDTO;\n+\n+/**\n+ * This plugin calculates and add the checksums of the file to the report.\n+ */\n+@BndPlugin(name = \"entry.\" + EntryNamesReference.CHECKSUM)\n+public class ChecksumPlugin implements ReportEntryPlugin<Jar>, Plugin {\n+\n+\tprivate Reporter\t\t\t\t\t_reporter;\n+\tprivate final Map<String, String>\t_properties\t= new HashMap<>();\n+\n+\tpublic ChecksumPlugin() {\n+\t\t_properties.put(ReportEntryPlugin.ENTRY_NAME_PROPERTY, EntryNamesReference.CHECKSUM);\n+\t\t_properties.put(ReportEntryPlugin.SOURCE_CLASS_PROPERTY, Jar.class.getCanonicalName());\n+\t}\n+\n+\t@Override\n+\tpublic ChecksumDTO extract(final Jar jar, final Locale locale) {\n+\t\tObjects.requireNonNull(jar, \"jar\");\n+\t\tObjects.requireNonNull(locale, \"locale\");\n+\n+\t\tChecksumDTO checksumDTO = new ChecksumDTO();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2db22607f0e8a6da65ec3a0ed658699c8e3295e8"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70de08af364fade763a083863f78f09771a3a39d", "author": {"user": {"login": "stbischof", "name": "Stefan Bischof"}}, "url": "https://github.com/bndtools/bnd/commit/70de08af364fade763a083863f78f09771a3a39d", "committedDate": "2020-04-16T16:26:55Z", "message": "[libg.crypto] fix width of SHA_512  https://tools.ietf.org/html/rfc6234#section-5.2\n\nSigned-off-by: Stefan Bischof <stbischof@bipolis.org>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94d3e0376ed042a3176e1ff9514fc107b9435342", "author": {"user": {"login": "stbischof", "name": "Stefan Bischof"}}, "url": "https://github.com/bndtools/bnd/commit/94d3e0376ed042a3176e1ff9514fc107b9435342", "committedDate": "2020-04-16T16:27:07Z", "message": "[reporter] calculate and show Checksum the bundle\n\nSigned-off-by: Stefan Bischof <stbischof@bipolis.org>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2db22607f0e8a6da65ec3a0ed658699c8e3295e8", "author": {"user": {"login": "stbischof", "name": "Stefan Bischof"}}, "url": "https://github.com/bndtools/bnd/commit/2db22607f0e8a6da65ec3a0ed658699c8e3295e8", "committedDate": "2020-04-16T15:38:31Z", "message": "[reporter] calculate and show Checksum the bundle\n\nSigned-off-by: Stefan Bischof <stbischof@bipolis.org>"}, "afterCommit": {"oid": "94d3e0376ed042a3176e1ff9514fc107b9435342", "author": {"user": {"login": "stbischof", "name": "Stefan Bischof"}}, "url": "https://github.com/bndtools/bnd/commit/94d3e0376ed042a3176e1ff9514fc107b9435342", "committedDate": "2020-04-16T16:27:07Z", "message": "[reporter] calculate and show Checksum the bundle\n\nSigned-off-by: Stefan Bischof <stbischof@bipolis.org>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0ODI3NDY3", "url": "https://github.com/bndtools/bnd/pull/3927#pullrequestreview-394827467", "createdAt": "2020-04-16T16:59:34Z", "commit": {"oid": "94d3e0376ed042a3176e1ff9514fc107b9435342"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3030, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}