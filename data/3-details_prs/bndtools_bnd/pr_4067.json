{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5MjE3OTY2", "number": 4067, "title": "Copy.gavs", "bodyText": "Actions to copy GAVs from MavenBndRepository and Maven Dependencies/Workspace repositories:", "createdAt": "2020-05-18T02:08:07Z", "url": "https://github.com/bndtools/bnd/pull/4067", "merged": true, "mergeCommit": {"oid": "cadf7bbfee4992de215e5a45a183c2fedd16fbd1"}, "closed": true, "closedAt": "2020-05-28T13:31:30Z", "author": {"login": "rotty3000"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcifRzygFqTQxMzU1MTI3NQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABclhGVcABqjMzODAzMzQ1NjE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzNTUxMjc1", "url": "https://github.com/bndtools/bnd/pull/4067#pullrequestreview-413551275", "createdAt": "2020-05-18T12:36:45Z", "commit": {"oid": "c99135272d60f9c846cc2e80479c95ab485af632"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMjozNjo0NVrOGW1KtA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQxMjo0Mzo1OFrOGW1bBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjU5Mjk0OA==", "bodyText": "Since you only want the values, just do map.values().stream()", "url": "https://github.com/bndtools/bnd/pull/4067#discussion_r426592948", "createdAt": "2020-05-18T12:36:45Z", "author": {"login": "bjhargrave"}, "path": "biz.aQute.bndlib/src/aQute/bnd/osgi/repository/BridgeRepository.java", "diffHunk": "@@ -263,6 +289,17 @@ public Resource get(String bsn, Version version) throws Exception {\n \t\treturn resourceInfo.resource;\n \t}\n \n+\tpublic ResourceInfo getInfo(String bsn) throws Exception {\n+\t\tMap<Version, ResourceInfo> map = index.get(bsn);\n+\t\tif (map == null)\n+\t\t\treturn null;\n+\n+\t\treturn MapStream.of(map.entrySet())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c99135272d60f9c846cc2e80479c95ab485af632"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjU5NDY2MQ==", "bodyText": "Not sure this is wise. Did you check for any places which assume the presence of a bnd.info cap means the artifacts is NOT a bundle? You have changed things from a resource has either a osgi.identity or a bnd.info to where every resource has a bnd.info.", "url": "https://github.com/bndtools/bnd/pull/4067#discussion_r426594661", "createdAt": "2020-05-18T12:39:47Z", "author": {"login": "bjhargrave"}, "path": "biz.aQute.repository/src/aQute/bnd/repository/maven/provider/IndexFile.java", "diffHunk": "@@ -324,13 +324,11 @@ private boolean isMulti(String name) {\n \tprivate Map<Archive, Resource> parseSingle(Archive archive, File single) throws Exception {\n \t\tResourceBuilder rb = new ResourceBuilder();\n \t\tboolean hasIdentity = rb.addFile(single, single.toURI());\n-\t\tif (!hasIdentity) {\n-\t\t\tString name = archive.getWithoutVersion();\n-\t\t\tMavenVersion version = archive.revision.version;\n-\n-\t\t\tBridgeRepository.addInformationCapability(rb, name, version.getOSGiVersion(), repo.toString(),\n-\t\t\t\tConstants.NOT_A_BUNDLE_S);\n-\t\t}\n+\t\tString name = archive.getWithoutVersion();\n+\t\tMavenVersion version = archive.revision.version;\n+\t\tBridgeRepository.addInformationCapability(rb, name, version.getOSGiVersion(), repo.toString(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c99135272d60f9c846cc2e80479c95ab485af632"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjU5NTc0OQ==", "bodyText": "Is this really the formatting properties to use for POMs?", "url": "https://github.com/bndtools/bnd/pull/4067#discussion_r426595749", "createdAt": "2020-05-18T12:41:35Z", "author": {"login": "bjhargrave"}, "path": "bndtools.core/src/bndtools/central/Central.java", "diffHunk": "@@ -253,6 +258,14 @@ public static Workspace getWorkspace() throws Exception {\n \t\t\t\t\tws.addBasicPlugin(getEclipseWorkspaceRepository());\n \t\t\t\t\tws.addBasicPlugin(new JobProgress());\n \n+\t\t\t\t\tString tabulationChar = prefsService.getString(\"org.eclipse.jdt.core.prefs\",\n+\t\t\t\t\t\t\"org.eclipse.jdt.core.formatter.tabulation.char\", \"tab\", null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c99135272d60f9c846cc2e80479c95ab485af632"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjU5NjM1MA==", "bodyText": "You don't need to say .entrySet(), MapStream.of also takes a map.", "url": "https://github.com/bndtools/bnd/pull/4067#discussion_r426596350", "createdAt": "2020-05-18T12:42:38Z", "author": {"login": "bjhargrave"}, "path": "bndtools.m2e/src/bndtools/m2e/MavenDependenciesRepository.java", "diffHunk": "@@ -43,9 +49,21 @@ public String getName() {\n \t\t}\n \n \t\ttry {\n-\t\t\tMavenBndrunContainer mavenBndrunContainer = MavenBndrunContainer.getBndrunContainer(projectFacade, null, true,\n-\t\t\t\ttrue, allScopes, monitor);\n-\t\t\tmavenBndrunContainer.resolve()\n+\t\t\tMavenBndrunContainer mavenBndrunContainer = MavenBndrunContainer.getBndrunContainer(projectFacade, null,\n+\t\t\t\ttrue, true, allScopes, monitor);\n+\t\t\tMapStream.of(mavenBndrunContainer.resolve()\n+\t\t\t\t.entrySet())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c99135272d60f9c846cc2e80479c95ab485af632"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjU5NzEyNQ==", "bodyText": "I would not extend File. That is super risky. I am sure it is not meant to be subclassed.", "url": "https://github.com/bndtools/bnd/pull/4067#discussion_r426597125", "createdAt": "2020-05-18T12:43:58Z", "author": {"login": "bjhargrave"}, "path": "bndtools.m2e/src/bndtools/m2e/MavenFile.java", "diffHunk": "@@ -0,0 +1,299 @@\n+package bndtools.m2e;\n+\n+import static java.util.Objects.requireNonNull;\n+\n+import java.io.File;\n+import java.io.FileFilter;\n+import java.io.FilenameFilter;\n+import java.io.IOException;\n+import java.net.MalformedURLException;\n+import java.net.URI;\n+import java.nio.file.Path;\n+\n+@SuppressWarnings(\"serial\")\n+class MavenFile extends File {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c99135272d60f9c846cc2e80479c95ab485af632"}, "originalPosition": 14}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c99135272d60f9c846cc2e80479c95ab485af632", "author": {"user": {"login": "rotty3000", "name": "Raymond Aug\u00e9"}}, "url": "https://github.com/bndtools/bnd/commit/c99135272d60f9c846cc2e80479c95ab485af632", "committedDate": "2020-05-18T01:52:17Z", "message": "copy GAVs\n\nSigned-off-by: Raymond Aug\u00e9 <raymond.auge@liferay.com>"}, "afterCommit": {"oid": "88453e7ec64bd53cbdfe286bea8bf276e121af25", "author": {"user": {"login": "rotty3000", "name": "Raymond Aug\u00e9"}}, "url": "https://github.com/bndtools/bnd/commit/88453e7ec64bd53cbdfe286bea8bf276e121af25", "committedDate": "2020-05-18T20:31:59Z", "message": "copy GAVs repository actions\n\nSigned-off-by: Raymond Aug\u00e9 <raymond.auge@liferay.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "88453e7ec64bd53cbdfe286bea8bf276e121af25", "author": {"user": {"login": "rotty3000", "name": "Raymond Aug\u00e9"}}, "url": "https://github.com/bndtools/bnd/commit/88453e7ec64bd53cbdfe286bea8bf276e121af25", "committedDate": "2020-05-18T20:31:59Z", "message": "copy GAVs repository actions\n\nSigned-off-by: Raymond Aug\u00e9 <raymond.auge@liferay.com>"}, "afterCommit": {"oid": "4d646409769fc1e897cb209f1ceeca9db1ca4902", "author": {"user": {"login": "rotty3000", "name": "Raymond Aug\u00e9"}}, "url": "https://github.com/bndtools/bnd/commit/4d646409769fc1e897cb209f1ceeca9db1ca4902", "committedDate": "2020-05-18T20:39:33Z", "message": "copy GAVs repository actions\n\nSigned-off-by: Raymond Aug\u00e9 <raymond.auge@liferay.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzOTI2MDAw", "url": "https://github.com/bndtools/bnd/pull/4067#pullrequestreview-413926000", "createdAt": "2020-05-18T20:44:18Z", "commit": {"oid": "88453e7ec64bd53cbdfe286bea8bf276e121af25"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMDo0NDo0MVrOGXG5bg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQyMDo0ODo1MVrOGXHBAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg4MzQzOA==", "bodyText": "In the work I did to get the maven coordinate info into Container, I defined all the maven attr names to start with maven-:\n\n  \n    \n      bnd/biz.aQute.repository/src/aQute/maven/api/Program.java\n    \n    \n        Lines 165 to 166\n      in\n      7a5b449\n    \n    \n    \n    \n\n        \n          \n           attrs.put(\"maven-groupId\", group); \n        \n\n        \n          \n           attrs.put(\"maven-artifactId\", artifact); \n        \n    \n  \n\n\n\n  \n    \n      bnd/biz.aQute.repository/src/aQute/maven/api/Revision.java\n    \n    \n         Line 131\n      in\n      7a5b449\n    \n    \n    \n    \n\n        \n          \n           attrs.put(\"maven-version\", version.toString()); \n        \n    \n  \n\n\n\n  \n    \n      bnd/biz.aQute.repository/src/aQute/maven/api/Archive.java\n    \n    \n        Lines 248 to 249\n      in\n      7a5b449\n    \n    \n    \n    \n\n        \n          \n           attrs.put(\"maven-classifier\", classifier); \n        \n\n        \n          \n           attrs.put(\"maven-extension\", extension); \n        \n    \n  \n\n\nI think we should use the same attr names here. Then is very clear where the names come from.", "url": "https://github.com/bndtools/bnd/pull/4067#discussion_r426883438", "createdAt": "2020-05-18T20:44:41Z", "author": {"login": "bjhargrave"}, "path": "biz.aQute.bndlib/src/aQute/bnd/osgi/repository/BridgeRepository.java", "diffHunk": "@@ -327,6 +369,16 @@ public static void addInformationCapability(ResourceBuilder rb, String name, Ver\n \t\t\t\tc.addAttribute(\"error\", error);\n \t\t\tif (version != null)\n \t\t\t\tc.addAttribute(\"version\", version);\n+\t\t\tif (groupId != null)\n+\t\t\t\tc.addAttribute(\"groupId\", groupId);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d646409769fc1e897cb209f1ceeca9db1ca4902"}, "originalPosition": 91}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg4NTM3Ng==", "bodyText": "Instead of adding all these parameters for maven info, consider a map and passing archive.attributes()\n\n  \n    \n      bnd/biz.aQute.repository/src/aQute/maven/api/Archive.java\n    \n    \n         Line 246\n      in\n      7a5b449\n    \n    \n    \n    \n\n        \n          \n           public Map<String, String> attributes() { \n        \n    \n  \n\n\nThen you can just add the map to the cap attributes.", "url": "https://github.com/bndtools/bnd/pull/4067#discussion_r426885376", "createdAt": "2020-05-18T20:48:51Z", "author": {"login": "bjhargrave"}, "path": "biz.aQute.bndlib/src/aQute/bnd/osgi/repository/BridgeRepository.java", "diffHunk": "@@ -318,6 +354,12 @@ public static void addInformationCapability(ResourceBuilder rb, String name, Str\n \tpublic static void addInformationCapability(ResourceBuilder rb, String name, Version version, String from,\n \t\tString error) {\n \n+\t\taddInformationCapability(rb, name, version, from, error, null, null, null, null, null);\n+\t}\n+\n+\tpublic static void addInformationCapability(ResourceBuilder rb, String name, Version version, String from,\n+\t\tString error, String groupId, String artifactId, String mavenVersion, String extension, String classifier) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d646409769fc1e897cb209f1ceeca9db1ca4902"}, "originalPosition": 81}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4d646409769fc1e897cb209f1ceeca9db1ca4902", "author": {"user": {"login": "rotty3000", "name": "Raymond Aug\u00e9"}}, "url": "https://github.com/bndtools/bnd/commit/4d646409769fc1e897cb209f1ceeca9db1ca4902", "committedDate": "2020-05-18T20:39:33Z", "message": "copy GAVs repository actions\n\nSigned-off-by: Raymond Aug\u00e9 <raymond.auge@liferay.com>"}, "afterCommit": {"oid": "5e890d0c7c2a7ced4272a8e085a7a4bb3bef674d", "author": {"user": {"login": "rotty3000", "name": "Raymond Aug\u00e9"}}, "url": "https://github.com/bndtools/bnd/commit/5e890d0c7c2a7ced4272a8e085a7a4bb3bef674d", "committedDate": "2020-05-19T18:34:23Z", "message": "copy GAVs\n\nSigned-off-by: Raymond Aug\u00e9 <raymond.auge@liferay.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5e890d0c7c2a7ced4272a8e085a7a4bb3bef674d", "author": {"user": {"login": "rotty3000", "name": "Raymond Aug\u00e9"}}, "url": "https://github.com/bndtools/bnd/commit/5e890d0c7c2a7ced4272a8e085a7a4bb3bef674d", "committedDate": "2020-05-19T18:34:23Z", "message": "copy GAVs\n\nSigned-off-by: Raymond Aug\u00e9 <raymond.auge@liferay.com>"}, "afterCommit": {"oid": "e3bf7cd701f6af6d31602c48c9c3b5201374d8cb", "author": {"user": {"login": "rotty3000", "name": "Raymond Aug\u00e9"}}, "url": "https://github.com/bndtools/bnd/commit/e3bf7cd701f6af6d31602c48c9c3b5201374d8cb", "committedDate": "2020-05-19T18:36:14Z", "message": "copy GAVs\n\nSigned-off-by: Raymond Aug\u00e9 <raymond.auge@liferay.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e92cd89c0c7a585f36a4f37e9eba0ed8abaf8519", "author": {"user": {"login": "rotty3000", "name": "Raymond Aug\u00e9"}}, "url": "https://github.com/bndtools/bnd/commit/e92cd89c0c7a585f36a4f37e9eba0ed8abaf8519", "committedDate": "2020-05-19T21:15:11Z", "message": "WIP\n\nSigned-off-by: Raymond Aug\u00e9 <raymond.auge@liferay.com>"}, "afterCommit": {"oid": "a26b4796fd42d002c908fa215918235f85863f8f", "author": {"user": {"login": "rotty3000", "name": "Raymond Aug\u00e9"}}, "url": "https://github.com/bndtools/bnd/commit/a26b4796fd42d002c908fa215918235f85863f8f", "committedDate": "2020-05-25T18:56:47Z", "message": "copy GAVs\n\nSigned-off-by: Raymond Aug\u00e9 <raymond.auge@liferay.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c60947fc8ef56659aa9d1054b0e8c428611b3a1", "author": {"user": {"login": "rotty3000", "name": "Raymond Aug\u00e9"}}, "url": "https://github.com/bndtools/bnd/commit/1c60947fc8ef56659aa9d1054b0e8c428611b3a1", "committedDate": "2020-05-27T15:33:12Z", "message": "index maven metadata in repositories that support it\n\nSigned-off-by: Raymond Aug\u00e9 <raymond.auge@liferay.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a26b4796fd42d002c908fa215918235f85863f8f", "author": {"user": {"login": "rotty3000", "name": "Raymond Aug\u00e9"}}, "url": "https://github.com/bndtools/bnd/commit/a26b4796fd42d002c908fa215918235f85863f8f", "committedDate": "2020-05-25T18:56:47Z", "message": "copy GAVs\n\nSigned-off-by: Raymond Aug\u00e9 <raymond.auge@liferay.com>"}, "afterCommit": {"oid": "b32f1386617d0a1606a393538a300b1ae106f824", "author": {"user": {"login": "rotty3000", "name": "Raymond Aug\u00e9"}}, "url": "https://github.com/bndtools/bnd/commit/b32f1386617d0a1606a393538a300b1ae106f824", "committedDate": "2020-05-27T15:33:12Z", "message": "context sensitive drag and drop GAVs onto existing editors; bnd, bndrun, gradle, maven\n\nalternate syntax are available by pressing the <alt> keep before drag starts\n\nSigned-off-by: Raymond Aug\u00e9 <raymond.auge@liferay.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NDkzNjA0", "url": "https://github.com/bndtools/bnd/pull/4067#pullrequestreview-419493604", "createdAt": "2020-05-27T18:21:13Z", "commit": {"oid": "b32f1386617d0a1606a393538a300b1ae106f824"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxODoyMToxM1rOGbXmHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxODoyMjowOFrOGbXoFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTM1MTMyNQ==", "bodyText": "Perhaps we should modify the BndEditor so that you don't have to do this.  The BndEditor could override the getAdapter method and return the styledText where someone queries for Control.class", "url": "https://github.com/bndtools/bnd/pull/4067#discussion_r431351325", "createdAt": "2020-05-27T18:21:13Z", "author": {"login": "gamerson"}, "path": "bndtools.core/src/bndtools/dnd/gav/GAVIPageListener.java", "diffHunk": "@@ -0,0 +1,112 @@\n+package bndtools.dnd.gav;\n+\n+import static org.eclipse.swt.dnd.DND.DROP_COPY;\n+\n+import org.eclipse.core.runtime.CoreException;\n+import org.eclipse.core.runtime.IAdaptable;\n+import org.eclipse.core.runtime.IPath;\n+import org.eclipse.swt.custom.StyledText;\n+import org.eclipse.swt.dnd.TextTransfer;\n+import org.eclipse.swt.dnd.Transfer;\n+import org.eclipse.swt.widgets.Control;\n+import org.eclipse.ui.IEditorInput;\n+import org.eclipse.ui.IFileEditorInput;\n+import org.eclipse.ui.IPartListener;\n+import org.eclipse.ui.IStorageEditorInput;\n+import org.eclipse.ui.IWorkbenchPart;\n+import org.eclipse.ui.dnd.IDragAndDropService;\n+import org.eclipse.ui.part.EditorPart;\n+\n+import aQute.lib.exceptions.Exceptions;\n+import bndtools.editor.BndEditor;\n+\n+public class GAVIPageListener implements IPartListener {\n+\n+\tprivate final Transfer[] transfers = new Transfer[] {\n+\t\tTextTransfer.getInstance()\n+\t};\n+\n+\t@Override\n+\tpublic void partOpened(IWorkbenchPart part) {\n+\t\tIDragAndDropService dndService = part.getSite()\n+\t\t\t.getService(IDragAndDropService.class);\n+\n+\t\tif (dndService == null) {\n+\t\t\treturn;\n+\t\t}\n+\n+\t\tif (part instanceof BndEditor) {\n+\t\t\tpart = ((BndEditor) part).getSourcePage();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b32f1386617d0a1606a393538a300b1ae106f824"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTM1MTgyOA==", "bodyText": "BndEditor would need to add getAdapter support for Control.class for this to properly unmerge the dropTarget.", "url": "https://github.com/bndtools/bnd/pull/4067#discussion_r431351828", "createdAt": "2020-05-27T18:22:08Z", "author": {"login": "gamerson"}, "path": "bndtools.core/src/bndtools/dnd/gav/GAVIPageListener.java", "diffHunk": "@@ -0,0 +1,112 @@\n+package bndtools.dnd.gav;\n+\n+import static org.eclipse.swt.dnd.DND.DROP_COPY;\n+\n+import org.eclipse.core.runtime.CoreException;\n+import org.eclipse.core.runtime.IAdaptable;\n+import org.eclipse.core.runtime.IPath;\n+import org.eclipse.swt.custom.StyledText;\n+import org.eclipse.swt.dnd.TextTransfer;\n+import org.eclipse.swt.dnd.Transfer;\n+import org.eclipse.swt.widgets.Control;\n+import org.eclipse.ui.IEditorInput;\n+import org.eclipse.ui.IFileEditorInput;\n+import org.eclipse.ui.IPartListener;\n+import org.eclipse.ui.IStorageEditorInput;\n+import org.eclipse.ui.IWorkbenchPart;\n+import org.eclipse.ui.dnd.IDragAndDropService;\n+import org.eclipse.ui.part.EditorPart;\n+\n+import aQute.lib.exceptions.Exceptions;\n+import bndtools.editor.BndEditor;\n+\n+public class GAVIPageListener implements IPartListener {\n+\n+\tprivate final Transfer[] transfers = new Transfer[] {\n+\t\tTextTransfer.getInstance()\n+\t};\n+\n+\t@Override\n+\tpublic void partOpened(IWorkbenchPart part) {\n+\t\tIDragAndDropService dndService = part.getSite()\n+\t\t\t.getService(IDragAndDropService.class);\n+\n+\t\tif (dndService == null) {\n+\t\t\treturn;\n+\t\t}\n+\n+\t\tif (part instanceof BndEditor) {\n+\t\t\tpart = ((BndEditor) part).getSourcePage();\n+\t\t}\n+\n+\t\tControl control = part.getAdapter(Control.class);\n+\n+\t\tif ((control == null) || !(control instanceof StyledText)) {\n+\t\t\treturn;\n+\t\t}\n+\n+\t\tIPath file = null;\n+\n+\t\tif (part instanceof EditorPart) {\n+\t\t\tEditorPart editorPart = (EditorPart) part;\n+\n+\t\t\tIEditorInput editorInput = editorPart.getEditorInput();\n+\n+\t\t\tif (editorInput instanceof IFileEditorInput) {\n+\t\t\t\tIFileEditorInput input = (IFileEditorInput) editorInput;\n+\n+\t\t\t\tfile = input.getFile()\n+\t\t\t\t\t.getFullPath();\n+\t\t\t} else if (editorInput instanceof IStorageEditorInput) {\n+\t\t\t\tIStorageEditorInput input = (IStorageEditorInput) editorInput;\n+\n+\t\t\t\ttry {\n+\t\t\t\t\tfile = input.getStorage()\n+\t\t\t\t\t\t.getFullPath();\n+\t\t\t\t} catch (CoreException e) {\n+\t\t\t\t\tthrow Exceptions.duck(e);\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\n+\t\tif (file != null) {\n+\t\t\tString fileName = file.lastSegment();\n+\t\t\tString fileExtension = file.getFileExtension();\n+\n+\t\t\tif (\"pom.xml\".equals(fileName)) {\n+\t\t\t\tdndService.addMergedDropTarget(control, DROP_COPY, transfers,\n+\t\t\t\t\tnew MavenDropTargetListener((StyledText) control));\n+\t\t\t} else if (\"gradle\".equalsIgnoreCase(fileExtension)) {\n+\t\t\t\tdndService.addMergedDropTarget(control, DROP_COPY, transfers,\n+\t\t\t\t\tnew GradleDropTargetListener((StyledText) control));\n+\t\t\t} else if (\"bnd\".equalsIgnoreCase(fileExtension) || \"bndrun\".equalsIgnoreCase(fileExtension)) {\n+\t\t\t\tdndService.addMergedDropTarget(control, DROP_COPY, transfers,\n+\t\t\t\t\tnew BndDropTargetListener((StyledText) control));\n+\t\t\t}\n+\t\t}\n+\t}\n+\n+\t@Override\n+\tpublic void partClosed(IWorkbenchPart part) {\n+\t\tIDragAndDropService dndService = part.getSite()\n+\t\t\t.getService(IDragAndDropService.class);\n+\n+\t\tIAdaptable adapter = part;\n+\n+\t\tControl control = adapter.getAdapter(Control.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b32f1386617d0a1606a393538a300b1ae106f824"}, "originalPosition": 96}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b32f1386617d0a1606a393538a300b1ae106f824", "author": {"user": {"login": "rotty3000", "name": "Raymond Aug\u00e9"}}, "url": "https://github.com/bndtools/bnd/commit/b32f1386617d0a1606a393538a300b1ae106f824", "committedDate": "2020-05-27T15:33:12Z", "message": "context sensitive drag and drop GAVs onto existing editors; bnd, bndrun, gradle, maven\n\nalternate syntax are available by pressing the <alt> keep before drag starts\n\nSigned-off-by: Raymond Aug\u00e9 <raymond.auge@liferay.com>"}, "afterCommit": {"oid": "503bb8545687ca7ad581a2003b62724cfb8c5f97", "author": {"user": {"login": "rotty3000", "name": "Raymond Aug\u00e9"}}, "url": "https://github.com/bndtools/bnd/commit/503bb8545687ca7ad581a2003b62724cfb8c5f97", "committedDate": "2020-05-27T21:03:58Z", "message": "context sensitive drag and drop GAVs onto existing editors; bnd, bndrun, gradle, maven\n\nalternate syntax are available by pressing the <alt> keep before drag starts\n\nSigned-off-by: Raymond Aug\u00e9 <raymond.auge@liferay.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NjMyODQ5", "url": "https://github.com/bndtools/bnd/pull/4067#pullrequestreview-419632849", "createdAt": "2020-05-27T21:47:24Z", "commit": {"oid": "503bb8545687ca7ad581a2003b62724cfb8c5f97"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "503bb8545687ca7ad581a2003b62724cfb8c5f97", "author": {"user": {"login": "rotty3000", "name": "Raymond Aug\u00e9"}}, "url": "https://github.com/bndtools/bnd/commit/503bb8545687ca7ad581a2003b62724cfb8c5f97", "committedDate": "2020-05-27T21:03:58Z", "message": "context sensitive drag and drop GAVs onto existing editors; bnd, bndrun, gradle, maven\n\nalternate syntax are available by pressing the <alt> keep before drag starts\n\nSigned-off-by: Raymond Aug\u00e9 <raymond.auge@liferay.com>"}, "afterCommit": {"oid": "3639102d2d50c4479a9725c158abd0f0f1b4de86", "author": {"user": {"login": "rotty3000", "name": "Raymond Aug\u00e9"}}, "url": "https://github.com/bndtools/bnd/commit/3639102d2d50c4479a9725c158abd0f0f1b4de86", "committedDate": "2020-05-27T22:31:19Z", "message": "context sensitive drag and drop GAVs onto existing editors; bnd, bndrun, gradle, maven\n\nalternate syntax are available by pressing the <alt> keep before drag starts\n\nSigned-off-by: Raymond Aug\u00e9 <raymond.auge@liferay.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3efbbc86612e8bcf495e1fb0c41c7d5c386e07b3", "author": {"user": {"login": "rotty3000", "name": "Raymond Aug\u00e9"}}, "url": "https://github.com/bndtools/bnd/commit/3efbbc86612e8bcf495e1fb0c41c7d5c386e07b3", "committedDate": "2020-05-27T22:34:55Z", "message": "context sensitive drag and drop GAVs onto existing editors; bnd, bndrun, gradle, maven\n\nalternate syntax are available by pressing the <alt> keep before drag starts\n\nSigned-off-by: Raymond Aug\u00e9 <raymond.auge@liferay.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3639102d2d50c4479a9725c158abd0f0f1b4de86", "author": {"user": {"login": "rotty3000", "name": "Raymond Aug\u00e9"}}, "url": "https://github.com/bndtools/bnd/commit/3639102d2d50c4479a9725c158abd0f0f1b4de86", "committedDate": "2020-05-27T22:31:19Z", "message": "context sensitive drag and drop GAVs onto existing editors; bnd, bndrun, gradle, maven\n\nalternate syntax are available by pressing the <alt> keep before drag starts\n\nSigned-off-by: Raymond Aug\u00e9 <raymond.auge@liferay.com>"}, "afterCommit": {"oid": "3efbbc86612e8bcf495e1fb0c41c7d5c386e07b3", "author": {"user": {"login": "rotty3000", "name": "Raymond Aug\u00e9"}}, "url": "https://github.com/bndtools/bnd/commit/3efbbc86612e8bcf495e1fb0c41c7d5c386e07b3", "committedDate": "2020-05-27T22:34:55Z", "message": "context sensitive drag and drop GAVs onto existing editors; bnd, bndrun, gradle, maven\n\nalternate syntax are available by pressing the <alt> keep before drag starts\n\nSigned-off-by: Raymond Aug\u00e9 <raymond.auge@liferay.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3213, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}