{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0NDcyODkx", "number": 4254, "title": "[junit-platform] Added Gogo commandlet", "bodyText": "If Gogo is in the environment, then in automatic mode the tester will register a \"runtests\" command that allows you to interactively run tests from the shell.\nscope: tester\ncommand syntax: runtests :my.bsn.name my.fq.ClassName my.fqClassName#forMethod\nFixes #3812", "createdAt": "2020-08-07T08:34:24Z", "url": "https://github.com/bndtools/bnd/pull/4254", "merged": true, "mergeCommit": {"oid": "aff4541d7ada61e5608606d38b5366a283659f97"}, "closed": true, "closedAt": "2020-09-15T13:28:40Z", "author": {"login": "kriegfrj"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8hgBfgBqjM2MzI2MTE1MjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdJHz3-gFqTQ4ODY4MjEyNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1ce89e8634ae11a576172a7d6ffc8ca6d777006b", "author": {"user": {"login": "kriegfrj", "name": "Fr Jeremy Krieg"}}, "url": "https://github.com/bndtools/bnd/commit/1ce89e8634ae11a576172a7d6ffc8ca6d777006b", "committedDate": "2020-08-07T08:15:53Z", "message": "[junit-platform] Added Gogo commandlet\n\nIf Gogo is in the environment, then in automatic mode\nthe tester will register a \"runtests\" command that allows\nyou to interactively run tests from the shell.\n\nFixes #3812\n\nSigned-off-by: Fr Jeremy Krieg <fr.jkrieg@greekwelfaresa.org.au>"}, "afterCommit": {"oid": "0430d7fee27693a451db9772dac6a815b8881ba4", "author": {"user": {"login": "kriegfrj", "name": "Fr Jeremy Krieg"}}, "url": "https://github.com/bndtools/bnd/commit/0430d7fee27693a451db9772dac6a815b8881ba4", "committedDate": "2020-08-07T10:02:11Z", "message": "[junit-platform] Added Gogo commandlet\n\nIf Gogo is in the environment, then in automatic mode\nthe tester will register a \"runtests\" command that allows\nyou to interactively run tests from the shell.\n\nFixes #3812\n\nSigned-off-by: Fr Jeremy Krieg <fr.jkrieg@greekwelfaresa.org.au>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0430d7fee27693a451db9772dac6a815b8881ba4", "author": {"user": {"login": "kriegfrj", "name": "Fr Jeremy Krieg"}}, "url": "https://github.com/bndtools/bnd/commit/0430d7fee27693a451db9772dac6a815b8881ba4", "committedDate": "2020-08-07T10:02:11Z", "message": "[junit-platform] Added Gogo commandlet\n\nIf Gogo is in the environment, then in automatic mode\nthe tester will register a \"runtests\" command that allows\nyou to interactively run tests from the shell.\n\nFixes #3812\n\nSigned-off-by: Fr Jeremy Krieg <fr.jkrieg@greekwelfaresa.org.au>"}, "afterCommit": {"oid": "1f1d264f6d4d84493c863de2d6d83fdd4ebf3f74", "author": {"user": {"login": "kriegfrj", "name": "Fr Jeremy Krieg"}}, "url": "https://github.com/bndtools/bnd/commit/1f1d264f6d4d84493c863de2d6d83fdd4ebf3f74", "committedDate": "2020-09-06T13:55:21Z", "message": "[junit-platform] Added Gogo commandlet\n\nIf Gogo is in the environment, then in automatic mode\nthe tester will register a \"runtests\" command that allows\nyou to interactively run tests from the shell.\n\nFixes #3812\n\nSigned-off-by: Fr Jeremy Krieg <fr.jkrieg@greekwelfaresa.org.au>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1f1d264f6d4d84493c863de2d6d83fdd4ebf3f74", "author": {"user": {"login": "kriegfrj", "name": "Fr Jeremy Krieg"}}, "url": "https://github.com/bndtools/bnd/commit/1f1d264f6d4d84493c863de2d6d83fdd4ebf3f74", "committedDate": "2020-09-06T13:55:21Z", "message": "[junit-platform] Added Gogo commandlet\n\nIf Gogo is in the environment, then in automatic mode\nthe tester will register a \"runtests\" command that allows\nyou to interactively run tests from the shell.\n\nFixes #3812\n\nSigned-off-by: Fr Jeremy Krieg <fr.jkrieg@greekwelfaresa.org.au>"}, "afterCommit": {"oid": "62dbaa2683a50c091393821995ad2a0ccb597bc7", "author": {"user": {"login": "kriegfrj", "name": "Fr Jeremy Krieg"}}, "url": "https://github.com/bndtools/bnd/commit/62dbaa2683a50c091393821995ad2a0ccb597bc7", "committedDate": "2020-09-08T01:35:49Z", "message": "[junit-platform] Added Gogo commandlet\n\nIf Gogo is in the environment, then in automatic mode\nthe tester will register a \"runtests\" command that allows\nyou to interactively run tests from the shell.\n\nFixes #3812\n\nSigned-off-by: Fr Jeremy Krieg <fr.jkrieg@greekwelfaresa.org.au>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg0NDQ4MTA0", "url": "https://github.com/bndtools/bnd/pull/4254#pullrequestreview-484448104", "createdAt": "2020-09-08T19:54:09Z", "commit": {"oid": "62dbaa2683a50c091393821995ad2a0ccb597bc7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQxOTo1NDowOVrOHOr2VA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOFQyMDowNzowNFrOHOsP_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTE2MDUzMg==", "bodyText": "This seems wrong. You have both org.junit.jupiter.api at the eclipse version AND junit-jupiter-api at the specific version='5.6.2'. We need to pick one version and I suspect it is not 5.6.2.", "url": "https://github.com/bndtools/bnd/pull/4254#discussion_r485160532", "createdAt": "2020-09-08T19:54:09Z", "author": {"login": "bjhargrave"}, "path": "biz.aQute.tester.test/bnd.bnd", "diffHunk": "@@ -5,11 +5,12 @@\n \n -buildpath: \\\n \torg.apache.servicemix.bundles.junit;version=latest,\\\n-\torg.junit.jupiter.api;version=\"${junit.jupiter.eclipse.version}\",\\\n-\torg.junit.jupiter.params;version=\"${junit.jupiter.eclipse.version}\",\\\n+\torg.junit.jupiter.api;version='${junit.jupiter.eclipse.version}',\\\n+\torg.junit.jupiter.params;version='${junit.jupiter.eclipse.version}',\\\n \torg.opentest4j,\\\n \torg.apiguardian,\\\n-\tosgi.core;version=latest\n+\tosgi.core;version=latest,\\\n+\tjunit-jupiter-api;version='5.6.2'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62dbaa2683a50c091393821995ad2a0ccb597bc7"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTE2NjA4MA==", "bodyText": "Can you even get an NCDFE here? The only gogo type is Description which is only used as an annotation and the class loader will be happy to load the GogoCommandlet class even if the annotations are not available. So I don't think you can ever get the error.", "url": "https://github.com/bndtools/bnd/pull/4254#discussion_r485166080", "createdAt": "2020-09-08T20:05:03Z", "author": {"login": "bjhargrave"}, "path": "biz.aQute.tester.junit-platform/src/aQute/tester/junit/platform/Activator.java", "diffHunk": "@@ -295,12 +297,26 @@ public void removedBundle(Bundle bundle, BundleEvent event, Bundle object) {\n \t\t};\n \t\ttracker.open();\n \n+\t\tif (Boolean.valueOf(context.getProperty(\"launch.services\"))) {\n+\t\t\ttry {\n+\t\t\t\tGogoCommandlet cmd = new GogoCommandlet();\n+\t\t\t\tHashtable<String, Object> properties = new Hashtable<>();\n+\t\t\t\tproperties.put(\"osgi.command.function\", new String[] {\n+\t\t\t\t\t\"runTests\"\n+\t\t\t\t});\n+\t\t\t\tproperties.put(\"osgi.command.scope\", \"tester\");\n+\n+\t\t\t\ttrace(\"starting gogo commandlet\");\n+\t\t\t\tcontext.registerService(Object.class, cmd, properties);\n+\t\t\t} catch (NoClassDefFoundError e) {}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62dbaa2683a50c091393821995ad2a0ccb597bc7"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTE2NzEwMA==", "bodyText": "Perhaps this should only be registered if in continuous mode? Otherwise there is no loop watching the queue. The test case sets continuous on to get the test to work I assume.", "url": "https://github.com/bndtools/bnd/pull/4254#discussion_r485167100", "createdAt": "2020-09-08T20:07:04Z", "author": {"login": "bjhargrave"}, "path": "biz.aQute.tester.junit-platform/src/aQute/tester/junit/platform/Activator.java", "diffHunk": "@@ -295,12 +297,26 @@ public void removedBundle(Bundle bundle, BundleEvent event, Bundle object) {\n \t\t};\n \t\ttracker.open();\n \n+\t\tif (Boolean.valueOf(context.getProperty(\"launch.services\"))) {\n+\t\t\ttry {\n+\t\t\t\tGogoCommandlet cmd = new GogoCommandlet();\n+\t\t\t\tHashtable<String, Object> properties = new Hashtable<>();\n+\t\t\t\tproperties.put(\"osgi.command.function\", new String[] {\n+\t\t\t\t\t\"runTests\"\n+\t\t\t\t});\n+\t\t\t\tproperties.put(\"osgi.command.scope\", \"tester\");\n+\n+\t\t\t\ttrace(\"starting gogo commandlet\");\n+\t\t\t\tcontext.registerService(Object.class, cmd, properties);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62dbaa2683a50c091393821995ad2a0ccb597bc7"}, "originalPosition": 72}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7129730b66a5cbb0c4608a31e1ad7b4d9b0da6ba", "author": {"user": {"login": "kriegfrj", "name": "Fr Jeremy Krieg"}}, "url": "https://github.com/bndtools/bnd/commit/7129730b66a5cbb0c4608a31e1ad7b4d9b0da6ba", "committedDate": "2020-09-10T01:51:24Z", "message": "[junit-platform] Added Gogo commandlet\n\nIn continuous mode, the tester will register a \"runtests\" command that allows\nyou to interactively run tests from the shell.\n\nFixes #3812\n\nSigned-off-by: Fr Jeremy Krieg <fr.jkrieg@greekwelfaresa.org.au>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "62dbaa2683a50c091393821995ad2a0ccb597bc7", "author": {"user": {"login": "kriegfrj", "name": "Fr Jeremy Krieg"}}, "url": "https://github.com/bndtools/bnd/commit/62dbaa2683a50c091393821995ad2a0ccb597bc7", "committedDate": "2020-09-08T01:35:49Z", "message": "[junit-platform] Added Gogo commandlet\n\nIf Gogo is in the environment, then in automatic mode\nthe tester will register a \"runtests\" command that allows\nyou to interactively run tests from the shell.\n\nFixes #3812\n\nSigned-off-by: Fr Jeremy Krieg <fr.jkrieg@greekwelfaresa.org.au>"}, "afterCommit": {"oid": "7129730b66a5cbb0c4608a31e1ad7b4d9b0da6ba", "author": {"user": {"login": "kriegfrj", "name": "Fr Jeremy Krieg"}}, "url": "https://github.com/bndtools/bnd/commit/7129730b66a5cbb0c4608a31e1ad7b4d9b0da6ba", "committedDate": "2020-09-10T01:51:24Z", "message": "[junit-platform] Added Gogo commandlet\n\nIn continuous mode, the tester will register a \"runtests\" command that allows\nyou to interactively run tests from the shell.\n\nFixes #3812\n\nSigned-off-by: Fr Jeremy Krieg <fr.jkrieg@greekwelfaresa.org.au>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4NjgyMTI1", "url": "https://github.com/bndtools/bnd/pull/4254#pullrequestreview-488682125", "createdAt": "2020-09-15T13:28:33Z", "commit": {"oid": "7129730b66a5cbb0c4608a31e1ad7b4d9b0da6ba"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3176, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}