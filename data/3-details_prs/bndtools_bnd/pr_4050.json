{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3MDAyNTcy", "number": 4050, "title": "add parameterized commands for exporting and resolving bndrun files", "bodyText": "Recently I've been exporting jars using the gradle tasks because its just faster for me to type into a terminal what I need instead of fishing around the Eclipse UI for the correct bndrun file and then clicking through the \"Export Run descriptor\" wizard.\nHowever, when I run gradlew export tasks from the CLI, I often will run into the problem of both the gradle export task and Eclipse builder running at the same time (because I have auto-refresh set to true for my Eclipse workspace).  So as you can expect having two builders (eclipse and gradle) running at the same time blows up often when they try to read/write the files\nSo I decided to add a new feature to Bndtools that will make it just as fast (minimal keystrokes) for me to execute this export operation.  I did this as Eclipse Parameterized commands.\nThis works by dynamically creating an eclipse command for exporting and resolving bndrun files.  Then developers can access these commands through the most underrated feature of Eclipse, the  Quick access search feature.  So with this if I want to \"export\" or \"resolve\" a bndrun file, I can just type this from anywhere in Eclipse UI\n\nCmd + 3\ntype: bnd export jar\nselect from list of bndrun files and click enter\n\nThis command will execute on the workspace and lock the \"project\" so it will keep the Eclipse builder from executing any builds if files change.\nThen if I \"export again\" the quick access dialog has a previous entries that will be sorted to the top, so on subsequent commands  you can just do it with 2 keystrokes\n\nCmd + 3\nenter (to select the most recently selected 'command')\n\nTLDR;\nHere is a video\n\nIf you want to just type the file name of the bndrun, the 3 available commands for that filename will show up:\n\nSo far I've added the following quick commands\n\nbnd export jar (bndrun file)\nbnd export runbundles (bndrun file)\nbnd resolve (bndrun file)\n\nI asked for some advice from @rotty3000  on what these bare bones commands should execute and he suggested we start with something similar to what the maven mojos are doing.  But I would like to get some feedback as to what others would expect here.", "createdAt": "2020-05-12T22:20:37Z", "url": "https://github.com/bndtools/bnd/pull/4050", "merged": true, "mergeCommit": {"oid": "9d0a01ef2af6eeb0773f00d82fa3182dad4f2cc6"}, "closed": true, "closedAt": "2020-05-13T15:26:39Z", "author": {"login": "gamerson"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcgr8lWgFqTQxMDQ2NDQ4Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcg5bLaAH2gAyNDE3MDAyNTcyOjAzNzA5ZDlkYmNmZjc1ZWFjODAyNTYwZjU4MTUxODFiNmI5NjYyZjU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwNDY0NDgz", "url": "https://github.com/bndtools/bnd/pull/4050#pullrequestreview-410464483", "createdAt": "2020-05-12T22:22:07Z", "commit": {"oid": "ac28c31990fdc181f6d8dddde8032f4aa37def26"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQyMjoyMjowN1rOGUbCXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQyMjoyMjowN1rOGUbCXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA2NzY3Nw==", "bodyText": "@bjhargrave  this is marked as discouraged because this is not API.  Thoughts?", "url": "https://github.com/bndtools/bnd/pull/4050#discussion_r424067677", "createdAt": "2020-05-12T22:22:07Z", "author": {"login": "gamerson"}, "path": "bndtools.core/src/bndtools/command/BndExportJarHandler.java", "diffHunk": "@@ -0,0 +1,76 @@\n+package bndtools.command;\n+\n+import java.io.File;\n+import java.io.OutputStream;\n+import java.util.Collections;\n+import java.util.Map.Entry;\n+\n+import org.eclipse.core.commands.AbstractHandler;\n+import org.eclipse.core.commands.ExecutionEvent;\n+import org.eclipse.core.commands.ExecutionException;\n+import org.eclipse.core.resources.IFile;\n+import org.eclipse.core.resources.IProject;\n+import org.eclipse.core.resources.IResource;\n+import org.eclipse.core.resources.ResourcesPlugin;\n+import org.eclipse.core.resources.WorkspaceJob;\n+import org.eclipse.core.runtime.CoreException;\n+import org.eclipse.core.runtime.IProgressMonitor;\n+import org.eclipse.core.runtime.IStatus;\n+import org.eclipse.core.runtime.Path;\n+import org.eclipse.core.runtime.Status;\n+\n+import aQute.bnd.build.Project;\n+import aQute.bnd.exporter.executable.ExecutableJarExporter;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac28c31990fdc181f6d8dddde8032f4aa37def26"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c28b916f18d0c3d8b50a8456d816d4a8d2b71e6e", "author": {"user": {"login": "gamerson", "name": "Gregory Amerson"}}, "url": "https://github.com/bndtools/bnd/commit/c28b916f18d0c3d8b50a8456d816d4a8d2b71e6e", "committedDate": "2020-05-12T23:27:33Z", "message": "add parameterized commands for export and resolve\n\nSigned-off-by: Gregory Amerson <gregory.amerson@liferay.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ac28c31990fdc181f6d8dddde8032f4aa37def26", "author": {"user": {"login": "gamerson", "name": "Gregory Amerson"}}, "url": "https://github.com/bndtools/bnd/commit/ac28c31990fdc181f6d8dddde8032f4aa37def26", "committedDate": "2020-05-12T22:05:14Z", "message": "add parameterized commands for export and resolve\n\nSigned-off-by: Gregory Amerson <gregory.amerson@liferay.com>"}, "afterCommit": {"oid": "c28b916f18d0c3d8b50a8456d816d4a8d2b71e6e", "author": {"user": {"login": "gamerson", "name": "Gregory Amerson"}}, "url": "https://github.com/bndtools/bnd/commit/c28b916f18d0c3d8b50a8456d816d4a8d2b71e6e", "committedDate": "2020-05-12T23:27:33Z", "message": "add parameterized commands for export and resolve\n\nSigned-off-by: Gregory Amerson <gregory.amerson@liferay.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03709d9dbcff75eac802560f5815181b6b9662f5", "author": {"user": {"login": "gamerson", "name": "Gregory Amerson"}}, "url": "https://github.com/bndtools/bnd/commit/03709d9dbcff75eac802560f5815181b6b9662f5", "committedDate": "2020-05-13T14:05:56Z", "message": "we only care at added/removed deltas\n\nSigned-off-by: Gregory Amerson <gregory.amerson@liferay.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3205, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}