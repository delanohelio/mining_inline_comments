{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ2Mzc2MjY0", "number": 290, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQwODowOTo0OVrOFJtauQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xNVQxMDoxMDoyN1rOFPIw2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1NzI1NjI1OnYy", "diffSide": "RIGHT", "path": "nab-starter/src/main/java/ru/hh/nab/starter/ConsulService.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQwODowOTo0OVrOIMJg3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQwODowOTo0OVrOIMJg3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTYwOTY5NA==", "bodyText": "getNotEmptyFromConfig \u0438\u043b\u0438 \u0434\u0430\u0436\u0435 getNotEmpty?", "url": "https://github.com/hhru/nuts-and-bolts/pull/290#discussion_r549609694", "createdAt": "2020-12-29T08:09:49Z", "author": {"login": "pvorlov"}, "path": "nab-starter/src/main/java/ru/hh/nab/starter/ConsulService.java", "diffHunk": "@@ -118,6 +123,25 @@ public ConsulService(AgentClient agentClient, KeyValueClient kvClient,\n     }\n   }\n \n+  private int validateAndGetCacheWaitSeconds(FileSettings fileSettings, OkHttpClient httpClient) {\n+    int cacheWaitSeconds = fileSettings.getInteger(CONSUL_WEIGHT_CACHE_WATCH_INTERVAL_PROPERTY, 10);\n+    if (httpClient.readTimeoutMillis() <= TimeUnit.SECONDS.toMillis(cacheWaitSeconds)) {\n+      throw new IllegalStateException(CONSUL_WEIGHT_CACHE_WATCH_INTERVAL_PROPERTY\n+        + \" must be less than consul http read timeout=\" + httpClient.readTimeoutMillis() + \"ms. To adjust timeout use configuration key: \"\n+        + CONSUL_CLIENT_READ_TIMEOUT_PROPERTY + \")\"\n+      );\n+    }\n+    return cacheWaitSeconds;\n+  }\n+\n+  private String validateAndGetFromConfig(FileSettings fileSettings, String propertyKey) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f04f420f1bd040ab7e56170f1d1ea4df522012a2"}, "originalPosition": 69}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1NzM4MDAyOnYy", "diffSide": "RIGHT", "path": "nab-starter/src/main/java/ru/hh/nab/starter/NabProdConfig.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQwOTowOTozNFrOIMKmHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yOVQwOToxODo0MlrOIMKx1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTYyNzQyMg==", "bodyText": "\u0416\u0435\u0441\u0442\u044c \u043a\u043e\u043d\u0435\u0447\u043d\u043e, \u043d\u043e \u043f\u043e \u0434\u0440\u0443\u0433\u043e\u043c\u0443 \u043d\u0435 \u0437\u043d\u0430\u044e \u043a\u0430\u043a \u0441\u0434\u0435\u043b\u0430\u0442\u044c, \u0442\u043e\u043b\u044c\u043a\u043e \u0435\u0441\u043b\u0438 \u043d\u0430\u0448 \u0444\u043e\u0440\u043a \u0440\u0430\u0441\u0448\u0438\u0440\u044f\u0442\u044c.", "url": "https://github.com/hhru/nuts-and-bolts/pull/290#discussion_r549627422", "createdAt": "2020-12-29T09:09:34Z", "author": {"login": "pvorlov"}, "path": "nab-starter/src/main/java/ru/hh/nab/starter/NabProdConfig.java", "diffHunk": "@@ -80,14 +83,25 @@ KeyValueClient keyValueClient(Consul consul) {\n     return consul.keyValueClient();\n   }\n \n+  @Bean\n+  OkHttpClient okHttpClient(Consul consul) {\n+    return Optional.ofNullable(ReflectionUtils.findField(Consul.class, \"okHttpClient\", OkHttpClient.class))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f04f420f1bd040ab7e56170f1d1ea4df522012a2"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTYzMDQyMw==", "bodyText": "\u043f\u043e-\u0445\u043e\u0440\u043e\u0448\u0435\u043c\u0443 \u0438\u0437 \u0441\u0430\u043c\u043e\u0433\u043e \u043a\u043e\u043d\u0441\u0443\u043b\u0430 \u0431\u044b \u0432\u044b\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u044d\u0442\u0438 \u0442\u0430\u0439\u043c\u0430\u0443\u0442\u044b \u0438 \u043d\u0435 \u0441\u0432\u0435\u0442\u0438\u0442\u044c \u043d\u0430\u0440\u0443\u0436\u0443 \u044d\u0442\u043e\u0442 \u043e\u043a\u0445\u0442\u0442\u043f\n\u0430 \u0435\u0449\u0435 \u043b\u0443\u0447\u0448\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044e \u0432 \u043a\u044d\u0448, \u0447\u0442\u043e\u0431\u044b \u0435\u0433\u043e \u043d\u0435\u043b\u044c\u0437\u044f \u0431\u044b\u043b\u043e \u0437\u0430\u0432\u0435\u0441\u0442\u0438 \u043a\u0440\u0438\u0432\u043e\u0439\n\u043d\u043e \u0431\u043b\u0438\u043d - \u044d\u0442\u043e \u043d\u0430\u0434\u043e \u043f\u0440\u044f\u043c \u043b\u0435\u0437\u0442\u044c \u0432 \u043b\u0438\u0431\u0443. \u0447\u0435 \u0442 \u044f \u0445\u0437 \u043f\u043e\u043a\u0430", "url": "https://github.com/hhru/nuts-and-bolts/pull/290#discussion_r549630423", "createdAt": "2020-12-29T09:18:42Z", "author": {"login": "dzharikhin"}, "path": "nab-starter/src/main/java/ru/hh/nab/starter/NabProdConfig.java", "diffHunk": "@@ -80,14 +83,25 @@ KeyValueClient keyValueClient(Consul consul) {\n     return consul.keyValueClient();\n   }\n \n+  @Bean\n+  OkHttpClient okHttpClient(Consul consul) {\n+    return Optional.ofNullable(ReflectionUtils.findField(Consul.class, \"okHttpClient\", OkHttpClient.class))", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTYyNzQyMg=="}, "originalCommit": {"oid": "f04f420f1bd040ab7e56170f1d1ea4df522012a2"}, "originalPosition": 55}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzUxNDE2NTM4OnYy", "diffSide": "RIGHT", "path": "nab-starter/src/main/java/ru/hh/nab/starter/ConsulService.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xNVQxMDoxMDoyN1rOIUU8Tg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0xNVQxMDoxMDoyN1rOIUU8Tg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1ODE4NTU1MA==", "bodyText": "\u041c\u043e\u0436\u0435\u0442 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 fileSettings?", "url": "https://github.com/hhru/nuts-and-bolts/pull/290#discussion_r558185550", "createdAt": "2021-01-15T10:10:27Z", "author": {"login": "heruv1m"}, "path": "nab-starter/src/main/java/ru/hh/nab/starter/ConsulService.java", "diffHunk": "@@ -118,6 +120,14 @@ public ConsulService(AgentClient agentClient, KeyValueClient kvClient,\n     }\n   }\n \n+  private String getNotEmpty(FileSettings fileSettings, String propertyKey) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0b85522ea62a7a047d1e46c16dc2fcb3bbce4a3"}, "originalPosition": 39}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4313, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}