{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAwMjczMDc1", "number": 236, "title": "HH-106992 send kafka messages async", "bodyText": "https://jira.hh.ru/browse/HH-106992", "createdAt": "2020-04-07T13:37:55Z", "url": "https://github.com/hhru/nuts-and-bolts/pull/236", "merged": true, "mergeCommit": {"oid": "d2ae9fb62a94a6eb9476863ff5d0e510bdfb637c"}, "closed": true, "closedAt": "2020-04-07T14:55:52Z", "author": {"login": "genroelgvozo"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVTV9AAH2gAyNDAwMjczMDc1OmQ2MzhiZmUwYzg4ZDYwYjdmOWM2NTRlMTViNjQ1MGRhMmVmYmM5Njg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcVTwgOAFqTM4OTE0NDYwMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d638bfe0c88d60b7f9c654e15b6450da2efbc968", "author": {"user": {"login": "genroelgvozo", "name": "Oleg Negrozov"}}, "url": "https://github.com/hhru/nuts-and-bolts/commit/d638bfe0c88d60b7f9c654e15b6450da2efbc968", "committedDate": "2020-04-07T13:30:40Z", "message": "HH-106992 send kafka messages async"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5MTI2Njcw", "url": "https://github.com/hhru/nuts-and-bolts/pull/236#pullrequestreview-389126670", "createdAt": "2020-04-07T13:41:04Z", "commit": {"oid": "d638bfe0c88d60b7f9c654e15b6450da2efbc968"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxMzo0MTowNVrOGCEGNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxMzo0MTowNVrOGCEGNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDgxNzQ2Mw==", "bodyText": "\u043c\u0431 \u0441\u0442\u043e\u0438\u0442 \u0437\u0430\u0432\u0435\u0441\u0442\u0438 \u043a\u0430\u043a\u043e\u0439-\u043d \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 singleThreadExecutor \u0432\u043d\u0443\u0442\u0440\u0438 DefaultKafkaProducer?\n\u0410 \u0442\u043e, \u043e\u043d \u0431\u0443\u0434\u0435\u0442 \u0431\u0440\u0430\u0442\u044c \u0442\u0440\u0435\u0434\u044b \u0438\u0437 \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u043e\u0433\u043e \u0442\u0440\u0435\u0434\u043f\u0443\u043b\u0430. \u041d\u0435 \u0434\u0443\u043c\u0430\u044e, \u0447\u0442\u043e \u044d\u0442\u043e \u0435\u0441\u0442\u044c \u0445\u043e\u0440\u043e\u0448\u043e.", "url": "https://github.com/hhru/nuts-and-bolts/pull/236#discussion_r404817463", "createdAt": "2020-04-07T13:41:05Z", "author": {"login": "vorobey92"}, "path": "nab-kafka/src/main/java/ru/hh/nab/kafka/producer/DefaultKafkaProducer.java", "diffHunk": "@@ -19,8 +20,8 @@ public DefaultKafkaProducer(KafkaTemplate<String, Object> kafkaTemplate) {\n \n   @SuppressWarnings(\"unchecked\")\n   public <T> CompletableFuture<KafkaSendResult<T>> sendMessage(String topicName, String key, T kafkaMessage) {\n-    return kafkaTemplate.send(topicName, key, kafkaMessage)\n-        .completable()\n+    return CompletableFuture.supplyAsync(() -> kafkaTemplate.send(topicName, key, kafkaMessage))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d638bfe0c88d60b7f9c654e15b6450da2efbc968"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c443c9f281e775616ea48cacfafef4ff0628f5c", "author": {"user": {"login": "genroelgvozo", "name": "Oleg Negrozov"}}, "url": "https://github.com/hhru/nuts-and-bolts/commit/9c443c9f281e775616ea48cacfafef4ff0628f5c", "committedDate": "2020-04-07T13:58:50Z", "message": "HH-106992 review: add singleThread executor"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "235d209245191ea0429cbb0e7ef6eaf515eabc6f", "author": {"user": {"login": "genroelgvozo", "name": "Oleg Negrozov"}}, "url": "https://github.com/hhru/nuts-and-bolts/commit/235d209245191ea0429cbb0e7ef6eaf515eabc6f", "committedDate": "2020-04-07T13:57:58Z", "message": "HH-106992 review: add singleThread executor"}, "afterCommit": {"oid": "9c443c9f281e775616ea48cacfafef4ff0628f5c", "author": {"user": {"login": "genroelgvozo", "name": "Oleg Negrozov"}}, "url": "https://github.com/hhru/nuts-and-bolts/commit/9c443c9f281e775616ea48cacfafef4ff0628f5c", "committedDate": "2020-04-07T13:58:50Z", "message": "HH-106992 review: add singleThread executor"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5MTQ0NjAw", "url": "https://github.com/hhru/nuts-and-bolts/pull/236#pullrequestreview-389144600", "createdAt": "2020-04-07T13:59:40Z", "commit": {"oid": "9c443c9f281e775616ea48cacfafef4ff0628f5c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3290, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}