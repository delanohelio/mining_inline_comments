{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxODkyMDcw", "number": 247, "title": "HH-109743 remove default value from ExecuteOnDataSource.dataSourceType", "bodyText": "https://jira.hh.ru/browse/HH-109743\n\u0423\u0431\u0440\u0430\u043b \u0434\u0435\u0444\u043e\u043b\u0442\u043d\u044b\u0439 \u0442\u0438\u043f \u0434\u0430\u0442\u0430\u0441\u043e\u0440\u0441\u0430 \u0438\u0437 @ExecuteOnDataSource.\n\u0417\u0430\u043e\u0434\u043d\u043e \u043f\u043e\u043f\u0440\u0430\u0432\u0438\u043b \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0435\u0441\u0442\u0430\u0431\u0438\u043b\u044c\u043d\u044b\u0435 \u0442\u0435\u0441\u0442\u044b, \u043d\u0443 \u0438 \u043f\u043e \u043c\u0435\u043b\u043e\u0447\u0438.", "createdAt": "2020-05-22T12:27:28Z", "url": "https://github.com/hhru/nuts-and-bolts/pull/247", "merged": true, "mergeCommit": {"oid": "147d8f5490f74a7a54a292a89ac2a20f56eaf3a9"}, "closed": true, "closedAt": "2020-05-24T14:47:38Z", "author": {"login": "Powerrr"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjxSIXgH2gAyNDIxODkyMDcwOjUwOGI2NDNkOWVhZjZkN2Q0YTQzNGRjMTE4NDA5MzNmNDk0MjQ2ODk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjyYjNAFqTQxNjkxNDEzMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "508b643d9eaf6d7d4a434dc11840933f49424689", "author": {"user": {"login": "Powerrr", "name": "Roman Kozlov"}}, "url": "https://github.com/hhru/nuts-and-bolts/commit/508b643d9eaf6d7d4a434dc11840933f49424689", "committedDate": "2020-05-22T12:18:35Z", "message": "HH-109743 remove default value from ExecuteOnDataSource.dataSourceType"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c23761d2a008b5ebafd04b7e864b47d5649df8d6", "author": {"user": {"login": "Powerrr", "name": "Roman Kozlov"}}, "url": "https://github.com/hhru/nuts-and-bolts/commit/c23761d2a008b5ebafd04b7e864b47d5649df8d6", "committedDate": "2020-05-22T12:18:35Z", "message": "HH-109743 fix timeouts in kafka tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e4238eb6e0f69a98beffd1ab9455fb04bccba56", "author": {"user": {"login": "Powerrr", "name": "Roman Kozlov"}}, "url": "https://github.com/hhru/nuts-and-bolts/commit/0e4238eb6e0f69a98beffd1ab9455fb04bccba56", "committedDate": "2020-05-22T12:18:35Z", "message": "HH-109743 fix unstable test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ee09079a69a19a14e5360ec78265ba1846b0e41", "author": {"user": {"login": "Powerrr", "name": "Roman Kozlov"}}, "url": "https://github.com/hhru/nuts-and-bolts/commit/2ee09079a69a19a14e5360ec78265ba1846b0e41", "committedDate": "2020-05-22T12:18:35Z", "message": "HH-109743 skip some unneeded build steps"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2ODcxNzc5", "url": "https://github.com/hhru/nuts-and-bolts/pull/247#pullrequestreview-416871779", "createdAt": "2020-05-22T12:29:16Z", "commit": {"oid": "2ee09079a69a19a14e5360ec78265ba1846b0e41"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxMjoyOToxNlrOGZVWNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxMjoyOToxNlrOGZVWNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTIxNzMzNA==", "bodyText": "\u043d\u0435 \u0442\u043e \u0447\u0442\u043e\u0431\u044b \u044d\u0442\u043e \u0447\u0442\u043e-\u0442\u043e \u0441\u0438\u043b\u044c\u043d\u043e \u0443\u043b\u0443\u0447\u0448\u0430\u043b\u043e, \u0441\u043a\u043e\u0440\u0435\u0435 \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c, \u0447\u0442\u043e \u0442\u0430\u043a \u043c\u043e\u0436\u043d\u043e (\u0440\u0430\u0437 \u043c\u044b \u0441\u043a\u0438\u043f\u0430\u0435\u043c install \u0438 deploy, \u0442\u043e \u0438 \u0441\u043e\u0440\u0446-jar \u043d\u0435 \u043d\u0443\u0436\u0435\u043d)", "url": "https://github.com/hhru/nuts-and-bolts/pull/247#discussion_r429217334", "createdAt": "2020-05-22T12:29:16Z", "author": {"login": "Powerrr"}, "path": "nab-example/pom.xml", "diffHunk": "@@ -51,6 +51,13 @@\n                 </configuration>\n             </plugin>\n \n+            <plugin>\n+                <artifactId>maven-source-plugin</artifactId>\n+                <configuration>\n+                    <skipSource>true</skipSource>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ee09079a69a19a14e5360ec78265ba1846b0e41"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2ODcyNDg4", "url": "https://github.com/hhru/nuts-and-bolts/pull/247#pullrequestreview-416872488", "createdAt": "2020-05-22T12:30:32Z", "commit": {"oid": "2ee09079a69a19a14e5360ec78265ba1846b0e41"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxMjozMDozMlrOGZVYVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxMjozMDozMlrOGZVYVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTIxNzg3Ng==", "bodyText": "\u0434\u043e \u044d\u0442\u043e\u0433\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u044f \u043f\u0440\u043e\u0433\u043d\u0430\u043b 1000 \u0438\u0442\u0435\u0440\u0430\u0446\u0438\u0439 \u044d\u0442\u043e\u0433\u043e \u0442\u0435\u0441\u0442\u0430 - \u0443\u043f\u0430\u043b\u0438 25. \u043f\u043e\u0441\u043b\u0435 - \u043d\u0435 \u043f\u0430\u0434\u0430\u044e\u0442", "url": "https://github.com/hhru/nuts-and-bolts/pull/247#discussion_r429217876", "createdAt": "2020-05-22T12:30:32Z", "author": {"login": "Powerrr"}, "path": "nab-starter/src/test/java/ru/hh/nab/starter/server/jetty/HHServerConnectorFailFastTest.java", "diffHunk": "@@ -96,14 +96,17 @@ public void testHHServerConnectorResetsNewIncomingConnectionIfLowOnThreads() thr\n     List<Future<Integer>> statusesFutures = new ArrayList<>(REQUESTS);\n \n     for (int i=0; i < REQUESTS; i++) {\n+      if (i == REQUESTS - 1) {\n+        // make sure at least one request is made AFTER low on threads\n+        await().atMost(500, TimeUnit.MILLISECONDS).until(threadPool::isLowOnThreads);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ee09079a69a19a14e5360ec78265ba1846b0e41"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2ODczMjI4", "url": "https://github.com/hhru/nuts-and-bolts/pull/247#pullrequestreview-416873228", "createdAt": "2020-05-22T12:31:49Z", "commit": {"oid": "2ee09079a69a19a14e5360ec78265ba1846b0e41"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxMjozMTo0OVrOGZVaXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxMjozMTo0OVrOGZVaXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTIxODM5Nw==", "bodyText": "\u044d\u0442\u043e \u0434\u043b\u044f \u0442\u0430\u043a\u0438\u0445 \u043d\u0430\u0440\u043a\u043e\u043c\u0430\u043d\u043e\u0432, \u043a\u0430\u043a \u044f, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0434\u043b\u044f \u043a\u0430\u0444\u043a\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442 \u0441\u0442\u0435\u043d\u0434\u043e\u0432\u044b\u0439 \u0434\u043e\u043a\u0435\u0440 (\u0442\u0438\u043f\u0430 DOCKER_HOST='tcp://stand.pyn.ru:2375')", "url": "https://github.com/hhru/nuts-and-bolts/pull/247#discussion_r429218397", "createdAt": "2020-05-22T12:31:49Z", "author": {"login": "Powerrr"}, "path": "nab-testbase/src/main/resources/service-test.properties", "diffHunk": "@@ -11,7 +11,7 @@ kafka.producer.default.batch.size=1\n \n kafka.consumer.default.auto.offset.reset=earliest\n kafka.consumer.default.fetch.max.wait.ms=250\n-kafka.consumer.default.max.poll.interval.ms=500\n+kafka.consumer.default.max.poll.interval.ms=5000", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ee09079a69a19a14e5360ec78265ba1846b0e41"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2ODc0MDQ0", "url": "https://github.com/hhru/nuts-and-bolts/pull/247#pullrequestreview-416874044", "createdAt": "2020-05-22T12:33:10Z", "commit": {"oid": "2ee09079a69a19a14e5360ec78265ba1846b0e41"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxMjozMzoxMFrOGZVcxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxMjozMzoxMFrOGZVcxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTIxOTAxNA==", "bodyText": "\u0442\u0443\u0442 await \u043c\u043e\u0433 \u043f\u0440\u043e\u0436\u0434\u0430\u0442\u044c 3 \u0441\u0435\u043a\u0443\u043d\u0434\u044b \u0438 \u043d\u0435 \u0434\u043e\u0436\u0434\u0430\u0442\u044c\u0441\u044f. \u043a\u0430\u0436\u0435\u0442\u0441\u044f, \u043f\u043e\u0434\u0440\u0430\u0437\u0443\u043c\u0435\u0432\u0430\u043b\u043e\u0441\u044c \u0432\u0441\u0451-\u0442\u0430\u043a\u0438 \u0434\u043e\u0436\u0434\u0430\u0442\u044c\u0441\u044f (\u043d\u0438\u0436\u0435 \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u043e)", "url": "https://github.com/hhru/nuts-and-bolts/pull/247#discussion_r429219014", "createdAt": "2020-05-22T12:33:10Z", "author": {"login": "Powerrr"}, "path": "nab-tests/src/test/java/ru/hh/nab/kafka/consumer/ConsumerRecoveryAfterFailTest.java", "diffHunk": "@@ -141,7 +141,7 @@ public void testAtLeastOnceSemanticsWithBatchAck() throws Exception {\n       });\n       ack.acknowledge();\n     });\n-    fails.await(3, TimeUnit.SECONDS);\n+    assertTrue(fails.await(15, TimeUnit.SECONDS));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ee09079a69a19a14e5360ec78265ba1846b0e41"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2OTE0MTMx", "url": "https://github.com/hhru/nuts-and-bolts/pull/247#pullrequestreview-416914131", "createdAt": "2020-05-22T13:35:30Z", "commit": {"oid": "2ee09079a69a19a14e5360ec78265ba1846b0e41"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3309, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}