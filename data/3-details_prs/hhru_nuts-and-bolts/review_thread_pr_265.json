{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAyMzMxMDA2", "number": 265, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNDoyMDo1M1rOEtEIzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNDoyMDo1M1rOEtEIzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1Njg5MTY3OnYy", "diffSide": "RIGHT", "path": "nab-data-source/src/main/java/ru/hh/nab/datasource/DataSourceFactory.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNDoyMDo1M1rOHgpSAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNToxMTo0N1rOHgrwug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzk5MjgzNQ==", "bodyText": "\u043a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u044b \u0432 \u0445\u0438\u043a\u0430\u0440\u0438 \u043d\u0435\u0442?", "url": "https://github.com/hhru/nuts-and-bolts/pull/265#discussion_r503992835", "createdAt": "2020-10-13T14:20:53Z", "author": {"login": "dzharikhin"}, "path": "nab-data-source/src/main/java/ru/hh/nab/datasource/DataSourceFactory.java", "diffHunk": "@@ -72,7 +74,10 @@ private static HikariConfig createBaseHikariConfig(String dataSourceName, FileSe\n     config.setPassword(dataSourceSettings.getString(PASSWORD));\n     config.setPoolName(dataSourceName);\n     config.setReadOnly(false);\n-    config.setValidationTimeout(config.getConnectionTimeout() + DEFAULT_VALIDATION_TIMEOUT_INCREMENT_MS);\n+\n+    long validationTimeoutMs = Math.round(config.getConnectionTimeout() * DEFAULT_VALIDATION_TIMEOUT_RATIO);\n+    config.setValidationTimeout(Math.max(validationTimeoutMs, HIKARI_MIN_VALIDATION_TIMEOUT_MS));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1cba231a6fc60e74e8b14e44188a435b4556f2cd"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAzMzQ2Ng==", "bodyText": "\u043a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u043d\u0435 \u043d\u0430\u0448\u0451\u043b", "url": "https://github.com/hhru/nuts-and-bolts/pull/265#discussion_r504033466", "createdAt": "2020-10-13T15:11:47Z", "author": {"login": "Powerrr"}, "path": "nab-data-source/src/main/java/ru/hh/nab/datasource/DataSourceFactory.java", "diffHunk": "@@ -72,7 +74,10 @@ private static HikariConfig createBaseHikariConfig(String dataSourceName, FileSe\n     config.setPassword(dataSourceSettings.getString(PASSWORD));\n     config.setPoolName(dataSourceName);\n     config.setReadOnly(false);\n-    config.setValidationTimeout(config.getConnectionTimeout() + DEFAULT_VALIDATION_TIMEOUT_INCREMENT_MS);\n+\n+    long validationTimeoutMs = Math.round(config.getConnectionTimeout() * DEFAULT_VALIDATION_TIMEOUT_RATIO);\n+    config.setValidationTimeout(Math.max(validationTimeoutMs, HIKARI_MIN_VALIDATION_TIMEOUT_MS));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzk5MjgzNQ=="}, "originalCommit": {"oid": "1cba231a6fc60e74e8b14e44188a435b4556f2cd"}, "originalPosition": 25}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4273, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}