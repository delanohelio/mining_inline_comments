{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk0NjQ0NDQ0", "number": 3196, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwODo0OToyMlrOEoco6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwODo1MDoxNFrOEocqQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwODQ3NzIzOnYy", "diffSide": "RIGHT", "path": "docs/sandbox/MapboxVectorTilesApi.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwODo0OToyMlrOHZi2OQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwODo0OToyMlrOHZi2OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjU0NzM4NQ==", "bodyText": "Link to this in:\n\nmkdocs.yml\nSandbox.md", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3196#discussion_r496547385", "createdAt": "2020-09-29T08:49:22Z", "author": {"login": "t2gran"}, "path": "docs/sandbox/MapboxVectorTilesApi.md", "diffHunk": "@@ -0,0 +1,60 @@\n+# Mapbox Vector Tiles API\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d2e167a37db4bd2fd0f6f03484fae86d20c59f50"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEwODQ4MDY2OnYy", "diffSide": "RIGHT", "path": "docs/sandbox/MapboxVectorTilesApi.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwODo1MDoxNFrOHZi4aQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOVQwODo1MDoxNFrOHZi4aQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjU0Nzk0NQ==", "bodyText": "Add some doc on how to extend and move to \"core\"", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3196#discussion_r496547945", "createdAt": "2020-09-29T08:50:14Z", "author": {"login": "t2gran"}, "path": "docs/sandbox/MapboxVectorTilesApi.md", "diffHunk": "@@ -0,0 +1,60 @@\n+# Mapbox Vector Tiles API\n+\n+## Contact Info\n+- HSL, Finland\n+- Kyyti Group Oy, Finland\n+- Hannes Junnila\n+\n+\n+## Changelog\n+- Initial version of Mapbox vector tiles api API\n+\n+## Documentation\n+\n+This API produces [Mapbox vector tiles](https://docs.mapbox.com/vector-tiles/reference/), which are used by eg. [Digitransit-ui](https://github.com/HSLdevcom/digitransit-ui) to show information about public transit entities on the map.\n+\n+The tiles can be fetched from `/otp/routers/{routerId}/vectorTiles/{layers}/{z}/{x}/{y}.pbf`, where `layers is a comma separated list of layer names from the configuration.\n+\n+### Configuration\n+To enable this you need to add the feature `SandboxAPIMapboxVectorTilesApi` in `otp-config.json`.\n+\n+The feature must be configured in `router-config.json` as follows\n+ \n+```\n+{\n+  \"vectorTileLayers\": [\n+    {\n+      \"name\": \"stops\",\n+      \"type\": \"Stop\",\n+      \"mapper\": \"Digitransit\",\n+      \"maxZoom\": 20,\n+      \"minZoom\": 14,\n+      \"cacheMaxSeconds\": 600\n+    },\n+    {\n+      \"name\": \"stations\",\n+      \"type\": \"Station\",\n+      \"mapper\": \"Digitransit\",\n+      \"maxZoom\": 20,\n+      \"minZoom\": 12,\n+      \"cacheMaxSeconds\": 600\n+    },\n+    {\n+      \"name\": \"citybikes\",\n+      \"type\": \"BikeRental\",\n+      \"mapper\": \"Digitransit\",\n+      \"maxZoom\": 20,\n+      \"minZoom\": 14,\n+      \"cacheMaxSeconds\": 60\n+    }\n+  ]\n+}\n+```\n+\n+For each layer, the configuration includes,\n+ - `name` which is used in the url to fetch tiles, and as the layer name in the vector tiles.\n+ - `type` which tells the type of the layer. Currently `Stop`, `Station` and `BikeRental` are supported.\n+ - `mapper` which describes the mapper converting the properties from the OTP model entities to the vector tile properties. Currently `Digitransit` is supported for all layer types.\n+ - `minZoom` and `maxZoom` which describe the zoom levels the layer is active for.\n+ - `cacheMaxSeconds` which sets the cache header in the response. The lowest value of the layers included is selected.\n+ ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d2e167a37db4bd2fd0f6f03484fae86d20c59f50"}, "originalPosition": 60}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1689, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}