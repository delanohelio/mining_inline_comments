{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2NjQyOTYx", "number": 2980, "title": "NeTEx import: Do not add ServiceJourney if any StopPoints are not found", "bodyText": "To be completed by pull request submitter:\n\n issue: Closes #2979\n roadmap: Check the roadmap for this feature or bug. If it is not already on the roadmap, PLC will discuss as part of the review process.\n tests: Have you added relevant test coverage? Are all the tests passing on the continuous integration service (Travis CI)?\n formatting: Have you followed the suggested code style?\n documentation: If you are adding a new configuration option, have you added an explanation to the configuration documentation tables and sections?\n changelog: add a bullet point to the changelog file with description and link to the linked issue\n\nTo be completed by @opentripplanner/plc:\n\n reviews and approvals by 2 members, ideally from different organizations\n after merging: update the relevant card on the roadmap", "createdAt": "2020-02-18T14:18:19Z", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/2980", "merged": true, "mergeCommit": {"oid": "765dca3b052402b7e86a449c6479b515e9d87702"}, "closed": true, "closedAt": "2020-02-25T18:23:37Z", "author": {"login": "gmellemstrand"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcFiiegAH2gAyMzc2NjQyOTYxOjk2MzQ1NmI0NjM1MTFkOTljY2JkYjE4OTJiNzYzNzgwZmYxNGUyZTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcH2W5TAFqTM2NDM0MzE2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "963456b463511d99ccbdb1892b763780ff14e2e5", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/963456b463511d99ccbdb1892b763780ff14e2e5", "committedDate": "2020-02-18T14:10:08Z", "message": "Do not add ServiceJourney if any StopPoints are not found"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYzNjYxMDUy", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/2980#pullrequestreview-363661052", "createdAt": "2020-02-24T19:58:22Z", "commit": {"oid": "963456b463511d99ccbdb1892b763780ff14e2e5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxOTo1ODoyMlrOFtt6hw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNFQxOTo1ODoyMlrOFtt6hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzQ4MjUwMw==", "bodyText": "This only log the id of the stopPoint, maybe also log the missing stop id:  stopPoint.getScheduledStopPointRef().getValue().getRef()?\nAn while at it, the Stop not found for {} is missing the context of the id, e.g.: Stop not found for stop-point in journey pattern {}?", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/2980#discussion_r383482503", "createdAt": "2020-02-24T19:58:22Z", "author": {"login": "t2gran"}, "path": "src/main/java/org/opentripplanner/netex/loader/mapping/StopTimesMapper.java", "diffHunk": "@@ -78,6 +78,11 @@ MappedStopTimes mapToStopTimes(\n \n             StopPointInJourneyPattern stopPoint = findStopPoint(pointInJourneyPattern, journeyPattern);\n             Stop stop = lookupStop(stopPoint, quayIdByStopPointRef, stopsById);\n+            if (stop == null) {\n+                LOG.warn(\"Stop not found for {}. Trip {} will not be mapped.\",\n+                    stopPoint != null ? stopPoint.getId() : \"null\", trip.getId());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "963456b463511d99ccbdb1892b763780ff14e2e5"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5395e8adaa4a7deee71005bded67e1af42aef6b2", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/5395e8adaa4a7deee71005bded67e1af42aef6b2", "committedDate": "2020-02-25T14:33:46Z", "message": "Add more info to error message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d104d9ee4b9960ac76cec1496d569f7980b2b9af", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/d104d9ee4b9960ac76cec1496d569f7980b2b9af", "committedDate": "2020-02-25T14:34:14Z", "message": "Merge branch 'dev-2.x' into otp2_netex_handle_stoppoint_not_found"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0MzQzMTYw", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/2980#pullrequestreview-364343160", "createdAt": "2020-02-25T18:23:26Z", "commit": {"oid": "d104d9ee4b9960ac76cec1496d569f7980b2b9af"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2049, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}