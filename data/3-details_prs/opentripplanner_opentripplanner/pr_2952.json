{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcwMTg0OTk2", "number": 2952, "title": "Added ServiceLinks to NeTEx import", "bodyText": "To be completed by pull request submitter:\n\n issue: Close #2951\n roadmap: Check the roadmap for this feature or bug. If it is not already on the roadmap, PLC will discuss as part of the review process.\n tests: Test is added for the ServiceLinkMapper\n formatting: Have you followed the suggested code style?\n documentation: If you are adding a new configuration option, have you added an explanation to the configuration documentation tables and sections?\n changelog: add a bullet point to the changelog file with description and link to the linked issue\n\nTo be completed by @opentripplanner/plc:\n\n reviews and approvals by 2 members, ideally from different organizations\n after merging: update the relevant card on the roadmap\n\nThis adds ServiceLinks to the NeTEx import. From the javadoc:\nMaps NeTEx ServiceLinks til OTP ShapePoints. NeTEx defines a ServiceLink as a link between an ordered pair of Stop Points, while GTFS defines a list of ShapePoints for an entire Trip. GTFS ShapePoints contain distance travelled per point, while a NeTEX ServiceLinks only contain a distance for each link. We therefore have to divide the total distance between a pair of stops equally between all the points between them.\nBecause NeTEx ServiceLinks are defined at the JourneyPattern level, we create ShapePoints with the same ids as their corresponding JourneyPattern (only with \"JourneyPattern\" switched out with \"ServiceLink\". In the TripMapper, we then use this id to look up ShapePoint ids.", "createdAt": "2020-02-03T08:25:45Z", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/2952", "merged": true, "mergeCommit": {"oid": "6b60fd99e51d5e7231801fc0eda1e9f643cec5f4"}, "closed": true, "closedAt": "2020-02-14T09:53:37Z", "author": {"login": "gmellemstrand"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb_wpq7gH2gAyMzcwMTg0OTk2OmZmNDRlMDZmMzExMGYwMTc4MTVjMGJhZGJjYTc5ZmM1YTcwZGUxMjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcEMdcYAFqTM1ODgyNDIxOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ff44e06f3110f017815c0badbca79fc5a70de120", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/ff44e06f3110f017815c0badbca79fc5a70de120", "committedDate": "2020-01-31T15:13:07Z", "message": "Added ServiceLinks to NeTEx import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63b98f5e8bd7df884b0aa82f8ab88059b051b178", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/63b98f5e8bd7df884b0aa82f8ab88059b051b178", "committedDate": "2020-02-03T08:23:00Z", "message": "Added changelog entry"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "646910b04b7e7c28ec23933e63318d7694887afb", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/646910b04b7e7c28ec23933e63318d7694887afb", "committedDate": "2020-02-04T08:14:27Z", "message": "Merge branch 'dev-2.x' into otp2_netex_shapes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3MzIwMDM5", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/2952#pullrequestreview-357320039", "createdAt": "2020-02-12T09:58:14Z", "commit": {"oid": "646910b04b7e7c28ec23933e63318d7694887afb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQwOTo1ODoxNFrOFooO8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMlQwOTo1ODoxNFrOFooO8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODE0NjU0NA==", "bodyText": "Rename to degreesLatitudeToMeters and add comment that this does not work for longitude (overestimates).", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/2952#discussion_r378146544", "createdAt": "2020-02-12T09:58:14Z", "author": {"login": "abyrd"}, "path": "src/main/java/org/opentripplanner/common/geometry/SphericalDistanceLibrary.java", "diffHunk": "@@ -156,6 +156,10 @@ public static double metersToDegrees(double distanceMeters) {\n         return 360 * distanceMeters / (2 * Math.PI * RADIUS_OF_EARTH_IN_M);\n     }\n \n+    public static double degreesToMeters(double distanceDegrees) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "646910b04b7e7c28ec23933e63318d7694887afb"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0db18c958c870fd084c013a6084c5f0bbfdf6d69", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/0db18c958c870fd084c013a6084c5f0bbfdf6d69", "committedDate": "2020-02-12T13:18:06Z", "message": "Merge branch 'dev-2.x' into otp2_netex_shapes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b71100000250b878961ce52da0a74bb7e5d866a", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/2b71100000250b878961ce52da0a74bb7e5d866a", "committedDate": "2020-02-12T13:37:36Z", "message": "Refactor GeometryAndBlockProcessor.CreateGeometry into smaller methods"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "978cdff288b236b836a964c946adcb6b891839d2", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/978cdff288b236b836a964c946adcb6b891839d2", "committedDate": "2020-02-12T14:24:52Z", "message": "Use a more correct distance calculation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f8a20ac0d69fac3ea3fba61a7fa5a0a1a291eda", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/5f8a20ac0d69fac3ea3fba61a7fa5a0a1a291eda", "committedDate": "2020-02-14T09:41:55Z", "message": "Added javadoc about why we are combining geometries per pattern"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f57721a6017be3250271a85ccebe468bd3db86f2", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/f57721a6017be3250271a85ccebe468bd3db86f2", "committedDate": "2020-02-14T09:48:21Z", "message": "Merge branch 'dev-2.x' into otp2_netex_shapes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4ODI0MjE4", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/2952#pullrequestreview-358824218", "createdAt": "2020-02-14T09:52:48Z", "commit": {"oid": "f57721a6017be3250271a85ccebe468bd3db86f2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2199, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}