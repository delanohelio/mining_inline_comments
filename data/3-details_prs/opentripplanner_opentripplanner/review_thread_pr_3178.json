{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgzNDY1MTkz", "number": 3178, "reviewThreads": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQwODozMjo1M1rOEib3XA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwOToxMDoxMVrOEjf1IA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0NTQzNTgwOnYy", "diffSide": "RIGHT", "path": "src/main/java/org/opentripplanner/transit/raptor/api/transit/RaptorTransfer.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQwODozMjo1M1rOHQTlVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQwODo0MDozOVrOHQT12g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njg2MDExOQ==", "bodyText": "services not part of the RAPTOR algorithm, such as flex or micromobility services, used as part of this RaptorTransfer", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3178#discussion_r486860119", "createdAt": "2020-09-11T08:32:53Z", "author": {"login": "hannesj"}, "path": "src/main/java/org/opentripplanner/transit/raptor/api/transit/RaptorTransfer.java", "diffHunk": "@@ -47,4 +47,23 @@\n      */\n     int durationInSeconds();\n \n+    /**\n+     * Return the number publicly available services for this {@link RaptorTransfer}. This is used by Raptor to get the", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd76160e90888baa632466515ee1e290526c9194"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njg2Mjc4MQ==", "bodyText": "Some services involving transfers are not handled by the RAPTOR algorithm and need to be inserted into the algorithm at a specific place of the algorithm.", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3178#discussion_r486862781", "createdAt": "2020-09-11T08:37:56Z", "author": {"login": "hannesj"}, "path": "src/main/java/org/opentripplanner/transit/raptor/api/transit/RaptorTransfer.java", "diffHunk": "@@ -47,4 +47,23 @@\n      */\n     int durationInSeconds();\n \n+    /**\n+     * Return the number publicly available services for this {@link RaptorTransfer}. This is used by Raptor to get the", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njg2MDExOQ=="}, "originalCommit": {"oid": "fd76160e90888baa632466515ee1e290526c9194"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njg2MzQzMA==", "bodyText": "This method should only be overridden if an access or egress has services, such as flex, where the calculation happens outside the RAPTOR algorithm", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3178#discussion_r486863430", "createdAt": "2020-09-11T08:39:16Z", "author": {"login": "hannesj"}, "path": "src/main/java/org/opentripplanner/transit/raptor/api/transit/RaptorTransfer.java", "diffHunk": "@@ -47,4 +47,23 @@\n      */\n     int durationInSeconds();\n \n+    /**\n+     * Return the number publicly available services for this {@link RaptorTransfer}. This is used by Raptor to get the", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njg2MDExOQ=="}, "originalCommit": {"oid": "fd76160e90888baa632466515ee1e290526c9194"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njg2NDM0Ng==", "bodyText": "Add a header comment above that these methods should be used only for special cases, such as flex or micromobility", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3178#discussion_r486864346", "createdAt": "2020-09-11T08:40:39Z", "author": {"login": "hannesj"}, "path": "src/main/java/org/opentripplanner/transit/raptor/api/transit/RaptorTransfer.java", "diffHunk": "@@ -47,4 +47,23 @@\n      */\n     int durationInSeconds();\n \n+    /**\n+     * Return the number publicly available services for this {@link RaptorTransfer}. This is used by Raptor to get the", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njg2MDExOQ=="}, "originalCommit": {"oid": "fd76160e90888baa632466515ee1e290526c9194"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0NTU1Mzk4OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/opentripplanner/transit/raptor/rangeraptor/multicriteria/arrivals/AbstractStopArrival.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQwOTowMDozNFrOHQUwOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQwOTowMDozNFrOHQUwOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njg3OTI4OA==", "bodyText": "during the RAPTOR algorithm", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3178#discussion_r486879288", "createdAt": "2020-09-11T09:00:34Z", "author": {"login": "hannesj"}, "path": "src/main/java/org/opentripplanner/transit/raptor/rangeraptor/multicriteria/arrivals/AbstractStopArrival.java", "diffHunk": "@@ -60,9 +60,9 @@\n     /**\n      * Initial state - first stop visited.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "134ef832c815c1592014a7050dff42800a93ff12"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0NTU2MTM1OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/opentripplanner/transit/raptor/rangeraptor/multicriteria/arrivals/AccessStopArrival.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQwOTowMTo1OFrOHQU1gw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQwOTowMTo1OFrOHQU1gw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njg4MDY0Mw==", "bodyText": "move calculation of the round to a separate method", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3178#discussion_r486880643", "createdAt": "2020-09-11T09:01:58Z", "author": {"login": "hannesj"}, "path": "src/main/java/org/opentripplanner/transit/raptor/rangeraptor/multicriteria/arrivals/AccessStopArrival.java", "diffHunk": "@@ -15,7 +15,7 @@\n     private final RaptorTransfer access;\n \n     public AccessStopArrival(int departureTime, int cost, RaptorTransfer access) {\n-        super(access.stop(), departureTime, access.durationInSeconds(), cost);\n+        super(access.stop(), departureTime, access.durationInSeconds(), cost, access.numberOfPublicServiceLegs() * 2 - (access.connectedByPublicService() ? 1 : 0));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "134ef832c815c1592014a7050dff42800a93ff12"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0NTU4NDE5OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/opentripplanner/transit/raptor/rangeraptor/path/ForwardPathMapper.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQwOTowNjowOVrOHQVFdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQwOTowNjowOVrOHQVFdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njg4NDcyNQ==", "bodyText": "Do this in a loop, checking the tyoes in an if-elseif-construct", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3178#discussion_r486884725", "createdAt": "2020-09-11T09:06:09Z", "author": {"login": "hannesj"}, "path": "src/main/java/org/opentripplanner/transit/raptor/rangeraptor/path/ForwardPathMapper.java", "diffHunk": "@@ -39,6 +39,11 @@ private void setRangeRaptorIterationDepartureTime(int iterationDepartureTime) {\n         arrival = destinationArrival.previous();\n         lastLeg = createEgressPathLeg(destinationArrival);\n \n+        if (arrival.arrivedByTransfer()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15d52e0c6e28855bf92b440a86cc53ae7118e65d"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0NTU5OTA0OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/opentripplanner/transit/raptor/rangeraptor/RangeRaptorWorker.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQwOTowODo1MFrOHQVP6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQwOTowODo1MFrOHQVP6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njg4NzQwMg==", "bodyText": "Move this into findAllTransitForRound", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3178#discussion_r486887402", "createdAt": "2020-09-11T09:08:50Z", "author": {"login": "hannesj"}, "path": "src/main/java/org/opentripplanner/transit/raptor/rangeraptor/RangeRaptorWorker.java", "diffHunk": "@@ -156,8 +156,15 @@ private void runRaptorForMinute(int iterationDepartureTime) {\n             // as that will be rare and complicates the code\n             timerByMinuteScheduleSearch().time(this::findAllTransitForRound);\n \n+            // TODO this needs to be below transitsForRoundComplete to not clear touched stops\n+            doTransfersForAccessLegs(iterationDepartureTime, true);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd76160e90888baa632466515ee1e290526c9194"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0NTYwMDAzOnYy", "diffSide": "RIGHT", "path": "src/main/java/org/opentripplanner/transit/raptor/rangeraptor/RangeRaptorWorker.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQwOTowOTowMFrOHQVQwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQwOTowOTowMFrOHQVQwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njg4NzYxNg==", "bodyText": "Move this into transfersForRound", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3178#discussion_r486887616", "createdAt": "2020-09-11T09:09:00Z", "author": {"login": "hannesj"}, "path": "src/main/java/org/opentripplanner/transit/raptor/rangeraptor/RangeRaptorWorker.java", "diffHunk": "@@ -156,8 +156,15 @@ private void runRaptorForMinute(int iterationDepartureTime) {\n             // as that will be rare and complicates the code\n             timerByMinuteScheduleSearch().time(this::findAllTransitForRound);\n \n+            // TODO this needs to be below transitsForRoundComplete to not clear touched stops\n+            doTransfersForAccessLegs(iterationDepartureTime, true);\n+\n             timerByMinuteTransfers().time(this::transfersForRound);\n \n+            doTransfersForAccessLegs(iterationDepartureTime, false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd76160e90888baa632466515ee1e290526c9194"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1NjQ5MjQ2OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/opentripplanner/transit/raptor/api/transit/RaptorTransfer.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwODo1MDo1MFrOHR3hog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwODo1MDo1MFrOHR3hog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODQ5NzU3MA==", "bodyText": "Move default implementation here", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3178#discussion_r488497570", "createdAt": "2020-09-15T08:50:50Z", "author": {"login": "hannesj"}, "path": "src/main/java/org/opentripplanner/transit/raptor/api/transit/RaptorTransfer.java", "diffHunk": "@@ -19,6 +19,22 @@\n      */\n     int stop();\n \n+    /**\n+     * The time duration to walk or travel the leg in seconds. This is not the entire duration from the journey origin,\n+     * but just:\n+     * <ul>\n+     *     <li>Access: journey origin to first stop.\n+     *     <li>Transit: stop to stop.\n+     *     <li>Egress: last stop to journey destination.\n+     * </ul>\n+     */\n+    int durationInSeconds();\n+\n+    /* TIME-DEPENDENT ACCESS/TRANSFER/EGRESS */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "108d4c20d958e7604e76c0be0a366cc6dbb96d8a"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1NjUwMzU0OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/opentripplanner/transit/raptor/api/transit/RaptorTransfer.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwODo1MzozNFrOHR3onQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwODo1OTozMFrOHR34SQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODQ5OTM1Nw==", "bodyText": "arrives/departs", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3178#discussion_r488499357", "createdAt": "2020-09-15T08:53:34Z", "author": {"login": "hannesj"}, "path": "src/main/java/org/opentripplanner/transit/raptor/api/transit/RaptorTransfer.java", "diffHunk": "@@ -36,32 +52,34 @@\n      */\n     int latestArrivalTime(int requestedArrivalTime);\n \n-    /**\n-     * The time duration to walk or travel the leg in seconds. This is not the entire duration from the journey origin,\n-     * but just:\n-     * <ul>\n-     *     <li>Access: journey origin to first stop.\n-     *     <li>Transit: stop to stop.\n-     *     <li>Egress: last stop to journey destination.\n-     * </ul>\n-     */\n-    int durationInSeconds();\n+    /* ACCESS/TRANSFER/EGRESS CONTAINING MULTIPLE LEGS */\n+    // The methods below should be only overridden when a RaptorTransfer contains information about\n+    // public services, which were generated outside the RAPTOR algorithm. Examples of such schemes\n+    // include flexible transit service and TNC. They should not be used for regular\n+    // access/transfer/egress.\n \n     /**\n-     * Return the number publicly available services for this {@link RaptorTransfer}. This is used by Raptor to get the\n-     * number of transfers correct witch is part of the criteria used to keep optimal result. This method apply to both\n-     * access and egress, but is not used for public-transit-transfers.\n+     * Some services involving transfers are not handled by the RAPTOR algorithm and need to be\n+     * inserted into the algorithm at a specific place of the algorithm, and to be accounted for,\n+     * in order to get the number of transfers correct, witch is part of the criteria used to keep\n+     * optimal result.\n+     *\n+     * @return the number legs generated by publicly available services, generated outside the\n+     * RAPTOR algorithm for this {@link RaptorTransfer}.\n      */\n     default int numberOfPublicServiceLegs() {\n         return 0;\n     }\n \n     /**\n-     * Is this {@link RaptorTransfer} is connected to the given {@code stop} by <b>transit</b>? For access and egress\n-     * paths we allow plugging in flex and other means of transport, witch might include one or more legs onboard a\n-     * vehicle. This method should return {@code true} if the leg connecting to the given stop is `onBoard` a public\n-     * transport or riding another kind of service like a taxi. This method apply to both access and egress, but is not\n-     * used for public-transit-transfers.\n+     * Is this {@link RaptorTransfer} is connected to the given {@code stop} directly by\n+     * <b>transit</b>? For access and egress paths we allow plugging in flexible transit and other\n+     * means of transport, witch might include one or more legs onboard a vehicle. This method\n+     * should return {@code true} if the leg connecting to the given stop arrives `onBoard` a public", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "108d4c20d958e7604e76c0be0a366cc6dbb96d8a"}, "originalPosition": 68}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODUwMzM2OQ==", "bodyText": "remove public service and replace with numberOfLegs with default one", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3178#discussion_r488503369", "createdAt": "2020-09-15T08:59:30Z", "author": {"login": "hannesj"}, "path": "src/main/java/org/opentripplanner/transit/raptor/api/transit/RaptorTransfer.java", "diffHunk": "@@ -36,32 +52,34 @@\n      */\n     int latestArrivalTime(int requestedArrivalTime);\n \n-    /**\n-     * The time duration to walk or travel the leg in seconds. This is not the entire duration from the journey origin,\n-     * but just:\n-     * <ul>\n-     *     <li>Access: journey origin to first stop.\n-     *     <li>Transit: stop to stop.\n-     *     <li>Egress: last stop to journey destination.\n-     * </ul>\n-     */\n-    int durationInSeconds();\n+    /* ACCESS/TRANSFER/EGRESS CONTAINING MULTIPLE LEGS */\n+    // The methods below should be only overridden when a RaptorTransfer contains information about\n+    // public services, which were generated outside the RAPTOR algorithm. Examples of such schemes\n+    // include flexible transit service and TNC. They should not be used for regular\n+    // access/transfer/egress.\n \n     /**\n-     * Return the number publicly available services for this {@link RaptorTransfer}. This is used by Raptor to get the\n-     * number of transfers correct witch is part of the criteria used to keep optimal result. This method apply to both\n-     * access and egress, but is not used for public-transit-transfers.\n+     * Some services involving transfers are not handled by the RAPTOR algorithm and need to be\n+     * inserted into the algorithm at a specific place of the algorithm, and to be accounted for,\n+     * in order to get the number of transfers correct, witch is part of the criteria used to keep\n+     * optimal result.\n+     *\n+     * @return the number legs generated by publicly available services, generated outside the\n+     * RAPTOR algorithm for this {@link RaptorTransfer}.\n      */\n     default int numberOfPublicServiceLegs() {\n         return 0;\n     }\n \n     /**\n-     * Is this {@link RaptorTransfer} is connected to the given {@code stop} by <b>transit</b>? For access and egress\n-     * paths we allow plugging in flex and other means of transport, witch might include one or more legs onboard a\n-     * vehicle. This method should return {@code true} if the leg connecting to the given stop is `onBoard` a public\n-     * transport or riding another kind of service like a taxi. This method apply to both access and egress, but is not\n-     * used for public-transit-transfers.\n+     * Is this {@link RaptorTransfer} is connected to the given {@code stop} directly by\n+     * <b>transit</b>? For access and egress paths we allow plugging in flexible transit and other\n+     * means of transport, witch might include one or more legs onboard a vehicle. This method\n+     * should return {@code true} if the leg connecting to the given stop arrives `onBoard` a public", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODQ5OTM1Nw=="}, "originalCommit": {"oid": "108d4c20d958e7604e76c0be0a366cc6dbb96d8a"}, "originalPosition": 68}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1NjU1Mzc5OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/opentripplanner/transit/raptor/rangeraptor/RangeRaptorWorker.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwOTowNToyOFrOHR4HUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwOTowNToyOFrOHR4HUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODUwNzIxOQ==", "bodyText": "Move iterationDepartureTime  to be a field on RangeRaptorWorker", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3178#discussion_r488507219", "createdAt": "2020-09-15T09:05:28Z", "author": {"login": "hannesj"}, "path": "src/main/java/org/opentripplanner/transit/raptor/rangeraptor/RangeRaptorWorker.java", "diffHunk": "@@ -154,16 +154,9 @@ private void runRaptorForMinute(int iterationDepartureTime) {\n \n             // NB since we have transfer limiting not bothering to cut off search when there are no more transfers\n             // as that will be rare and complicates the code\n-            timerByMinuteScheduleSearch().time(this::findAllTransitForRound);\n+            timerByMinuteScheduleSearch().time(() -> findAllTransitForRound(iterationDepartureTime));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "108d4c20d958e7604e76c0be0a366cc6dbb96d8a"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1NjU3MTIwOnYy", "diffSide": "RIGHT", "path": "src/main/java/org/opentripplanner/transit/raptor/rangeraptor/multicriteria/arrivals/AbstractStopArrival.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwOToxMDoxMVrOHR4SMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwOToxMDoxMVrOHR4SMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODUxMDAwMw==", "bodyText": "Move to RoundTracker", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3178#discussion_r488510003", "createdAt": "2020-09-15T09:10:11Z", "author": {"login": "hannesj"}, "path": "src/main/java/org/opentripplanner/transit/raptor/rangeraptor/multicriteria/arrivals/AbstractStopArrival.java", "diffHunk": "@@ -22,6 +23,15 @@\n         return (l, r) -> l.arrivalTime < r.arrivalTime || l.paretoRound < r.paretoRound;\n     }\n \n+    /**\n+     * Return the number of paretoRounds a RaptorTransfer should take. This is used for computing\n+     * the correct paretoRound for accesses and egresses, which contain public service legs, which\n+     * originate outside the RAPTOR algorithm.\n+     */\n+    public static int getParetoRounds(RaptorTransfer access) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "108d4c20d958e7604e76c0be0a366cc6dbb96d8a"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1677, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}