{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0NTA2NDA2", "number": 3284, "title": "bugfix: NPE when generating TripPatterns in TripPatternCache", "bodyText": "If a RealTime update do not match an existing TripPattern a new one is generated, but there is a NullPointerException in when the new id is generated.\nTo fix this, the internal model is also cleaned up a bit, by making the directionId a numeric field, not a string. GTFS uses 0 and 1, while Netex have 1,2,3 and 4 legal values.\nTo be completed by pull request submitter:\n\n issue: No.\n roadmap: No\n tests: No\n formatting: Yes\n documentation: No\n changelog: Yes\n\nTo be completed by @opentripplanner/plc:\n\n reviews and approvals by 2 members, ideally from different organizations\n after merging: update the relevant card on the roadmap", "createdAt": "2020-12-08T14:55:18Z", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3284", "merged": true, "mergeCommit": {"oid": "9c21f1cffbf87b7ce05b062c93d9551bf86c6954"}, "closed": true, "closedAt": "2020-12-15T15:21:58Z", "author": {"login": "t2gran"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkLPWjAH2gAyNTM0NTA2NDA2OmM5N2Y0YjZkYzY5MDUyNmM3NDRkZGJhODQ0MDNkNzQ0ZTQxNWU5ODE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmb2fpgFqTU1MjU2MjI4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c97f4b6dc690526c744ddba84403d744e415e981", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/c97f4b6dc690526c744ddba84403d744e415e981", "committedDate": "2020-12-08T14:44:14Z", "message": "bugfix: NPE when generating TripPatterns in TripPatternCache"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00af819b055a048030b53d75a1829a366295aaef", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/00af819b055a048030b53d75a1829a366295aaef", "committedDate": "2020-12-08T14:59:51Z", "message": "Add changelog item"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3MzUwMTk5", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3284#pullrequestreview-547350199", "createdAt": "2020-12-08T15:33:15Z", "commit": {"oid": "00af819b055a048030b53d75a1829a366295aaef"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3MzUxMjg1", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3284#pullrequestreview-547351285", "createdAt": "2020-12-08T15:34:17Z", "commit": {"oid": "00af819b055a048030b53d75a1829a366295aaef"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNTozNDoxN1rOIBjwxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxNTozNDoxN1rOIBjwxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODUwNTQxNQ==", "bodyText": "Method name does not reflect the new parameter type", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3284#discussion_r538505415", "createdAt": "2020-12-08T15:34:17Z", "author": {"login": "gmellemstrand"}, "path": "src/ext/java/org/opentripplanner/ext/transmodelapi/model/timetable/ServiceJourneyType.java", "diffHunk": "@@ -210,11 +210,7 @@ private static Trip trip(DataFetchingEnvironment environment) {\n     return environment.getSource();\n   }\n \n-  private static int directIdStringToInt(String directionId) {\n-    try {\n-      return Integer.parseInt(directionId);\n-    } catch (NumberFormatException nfe) {\n-      return -1;\n-    }\n+  private static int directIdStringToInt(Integer directionId) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "00af819b055a048030b53d75a1829a366295aaef"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyMjI3NDIw", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3284#pullrequestreview-552227420", "createdAt": "2020-12-15T08:54:02Z", "commit": {"oid": "00af819b055a048030b53d75a1829a366295aaef"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a33100ecf1821238f924073a8ca91fa69f222348", "author": {"user": {"login": "abyrd", "name": "Andrew Byrd"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/a33100ecf1821238f924073a8ca91fa69f222348", "committedDate": "2020-12-15T08:54:15Z", "message": "Merge branch 'dev-2.x' into otp2_npe_trippatterncache"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "836e85432e05cfdd4be7e5dafeb2926fdbc0fcee", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/836e85432e05cfdd4be7e5dafeb2926fdbc0fcee", "committedDate": "2020-12-15T10:37:15Z", "message": "review: Rename method for mapping directionId to Netex directionType (via int)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "238dcafc49dcc1a07e70e8a7db2dfb46b3805dbf", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/238dcafc49dcc1a07e70e8a7db2dfb46b3805dbf", "committedDate": "2020-12-15T10:38:33Z", "message": "Merge branch 'dev-2.x' into otp2_npe_trippatterncache"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUyNTYyMjg1", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3284#pullrequestreview-552562285", "createdAt": "2020-12-15T15:13:19Z", "commit": {"oid": "238dcafc49dcc1a07e70e8a7db2dfb46b3805dbf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2034, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}