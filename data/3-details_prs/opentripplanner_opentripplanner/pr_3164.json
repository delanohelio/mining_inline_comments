{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc0NjA4NTg4", "number": 3164, "title": "Otp2 remove legswitch and cleanup unused Astar code", "bodyText": "To be completed by pull request submitter:\n\n issue: Closes #3158\n roadmap: Check the roadmap for this feature or bug. If it is not already on the roadmap, PLC will discuss as part of the review process.\n tests: Have you added relevant test coverage? Are all the tests passing on the continuous integration service (Travis CI)?\n formatting: Have you followed the suggested code style?\n documentation: If you are adding a new configuration option, have you added an explanation to the configuration documentation tables and sections?\n changelog: add a bullet point to the changelog file with description and link to the linked issue\n\nTo be completed by @opentripplanner/plc:\n\n reviews and approvals by 2 members, ideally from different organizations\n after merging: update the relevant card on the roadmap\n\nThis PR does the following:\n\nRemove LegSwitchEdge and the LegSwitch mode which were only needed for the intermediate places search.\nRemove the unused intermediate places search from the GraphPathFinder.\nOverride the getName method of the TransitStopVertex, so that the itinerary->fromPlace->name will actually give you the name of the stop.\nRemove obsolete and unused edges and vertices\nRemove the 1 second added when traversing StreetTransitLink.\n\nI have tested this on the Norwegian graph with both the built-in client and the transmodel API.", "createdAt": "2020-08-27T10:35:23Z", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3164", "merged": true, "mergeCommit": {"oid": "6b59a28d000fd818b346ae7a1c0c2a60810281a9"}, "closed": true, "closedAt": "2020-09-02T15:03:10Z", "author": {"login": "gmellemstrand"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdC9AT9AH2gAyNDc0NjA4NTg4OjQ2YTczY2IyNGEzNDgyYmZjMDY4NjA1ODQyMzg0MjE3N2E3NTVhNzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdE9VFJAFqTQ4MDkxMTI4OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "46a73cb24a3482bfc0686058423842177a755a79", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/46a73cb24a3482bfc0686058423842177a755a79", "committedDate": "2020-08-27T09:29:38Z", "message": "Remove LegSwitchEdge and AStar intermediate places search"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88d6713c4bac0d7b04c7832addfdbfc212068aae", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/88d6713c4bac0d7b04c7832addfdbfc212068aae", "committedDate": "2020-08-27T09:54:03Z", "message": "Override getName method for TransitStopVertex"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf014eb3df7f5c7b9683514ae36ac62d92a5a5c3", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/cf014eb3df7f5c7b9683514ae36ac62d92a5a5c3", "committedDate": "2020-08-27T10:05:17Z", "message": "Remove obsolete astar code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9073a5bb93d38524c74e9d97a4cac4eddcc81468", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/9073a5bb93d38524c74e9d97a4cac4eddcc81468", "committedDate": "2020-08-27T10:12:07Z", "message": "Do not add 1 second when traversing StreetTransitLink"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2NjE5NjY2", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3164#pullrequestreview-476619666", "createdAt": "2020-08-27T11:19:02Z", "commit": {"oid": "9073a5bb93d38524c74e9d97a4cac4eddcc81468"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxMToxOTowMlrOHILpXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxMToxOTowMlrOHILpXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODM0MTQ3MQ==", "bodyText": "PatternInterlineDwell edges should not exist anymore", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3164#discussion_r478341471", "createdAt": "2020-08-27T11:19:02Z", "author": {"login": "hannesj"}, "path": "src/main/java/org/opentripplanner/routing/algorithm/mapping/GraphPathToItineraryMapper.java", "diffHunk": "@@ -176,9 +176,8 @@ private static CoordinateArrayListSequence makeCoordinates(Edge[] edges) {\n \n     /**\n      * Slice a {@link State} array at the leg boundaries. Leg switches occur when:\n-     * 1. A LEG_SWITCH mode (which itself isn't part of any leg) is seen\n-     * 2. The mode changes otherwise, for instance from BICYCLE to WALK\n-     * 3. A PatternInterlineDwell edge (i.e. interlining) is seen\n+     * 1. The mode changes otherwise, for instance from BICYCLE to WALK\n+     * 2. A PatternInterlineDwell edge (i.e. interlining) is seen", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9073a5bb93d38524c74e9d97a4cac4eddcc81468"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2NzIzNDIy", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3164#pullrequestreview-476723422", "createdAt": "2020-08-27T13:32:15Z", "commit": {"oid": "9073a5bb93d38524c74e9d97a4cac4eddcc81468"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxMzozMjoxNVrOHIQiGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yN1QxMzozMjoxNVrOHIQiGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQyMTUyOA==", "bodyText": "We will want to test that paths containing a park and ride transition are still properly broken into legs after these changes. It seems like they would be, but probably worth testing.", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3164#discussion_r478421528", "createdAt": "2020-08-27T13:32:15Z", "author": {"login": "abyrd"}, "path": "src/main/java/org/opentripplanner/routing/edgetype/ParkAndRideEdge.java", "diffHunk": "@@ -51,7 +51,6 @@ public State traverse(State s0) {\n             s1.incrementWeight(time);\n             s1.incrementTimeInSeconds(time);\n             s1.setCarParked(false);\n-            s1.setBackMode(TraverseMode.LEG_SWITCH);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9073a5bb93d38524c74e9d97a4cac4eddcc81468"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b7d143351c260f8a079c3bdf0104dafc7c8f082", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/2b7d143351c260f8a079c3bdf0104dafc7c8f082", "committedDate": "2020-08-28T07:56:58Z", "message": "Remove PatternInterlineDwell from javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e8170abe4de9e2684d0a7a1f3b5cc48369ae7b5f", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/e8170abe4de9e2684d0a7a1f3b5cc48369ae7b5f", "committedDate": "2020-08-28T08:19:21Z", "message": "Merge branch 'dev-2.x' into otp2_remove_legswitch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "03b1b1e1b4129ee69133c53d329f13675db31dc9", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/03b1b1e1b4129ee69133c53d329f13675db31dc9", "committedDate": "2020-08-28T08:33:19Z", "message": "Remove unused SampleVertex"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c55be417b0b095486554dd6dbda46bbae953663", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/3c55be417b0b095486554dd6dbda46bbae953663", "committedDate": "2020-09-01T09:15:38Z", "message": "Merge branch 'dev-2.x' into otp2_remove_legswitch"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d909eec9583e1de023d686b531515ca05ff231c6", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/d909eec9583e1de023d686b531515ca05ff231c6", "committedDate": "2020-09-01T15:07:16Z", "message": "Merge branch 'dev-2.x' into otp2_remove_legswitch"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwNTYyMDM1", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3164#pullrequestreview-480562035", "createdAt": "2020-09-02T07:42:20Z", "commit": {"oid": "d909eec9583e1de023d686b531515ca05ff231c6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQwNzo0MjoyMFrOHLhUgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQwNzo0MjoyMFrOHLhUgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTg0MjMwNw==", "bodyText": "Now this is returned in the walking instructions, should we try to generate a more descriptive name? Just return the name of the stop?", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3164#discussion_r481842307", "createdAt": "2020-09-02T07:42:20Z", "author": {"login": "hannesj"}, "path": "src/main/java/org/opentripplanner/routing/edgetype/StreetTransitLink.java", "diffHunk": "@@ -54,10 +54,6 @@ public LineString getGeometry() {\n         return GeometryUtils.getGeometryFactory().createLineString(coordinates);\n     }\n \n-    public TraverseMode getMode() {\n-        return TraverseMode.LEG_SWITCH;\n-    }\n-\n     public String getName() {\n         return \"street transit link\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d909eec9583e1de023d686b531515ca05ff231c6"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1d56f9e305aec31c0e449b1911c72fd808a29ef", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/c1d56f9e305aec31c0e449b1911c72fd808a29ef", "committedDate": "2020-09-02T11:12:37Z", "message": "Return name of stop for StreeTransitLink. Used for walk steps."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwODE4MjMz", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3164#pullrequestreview-480818233", "createdAt": "2020-09-02T13:27:59Z", "commit": {"oid": "c1d56f9e305aec31c0e449b1911c72fd808a29ef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e2f6a822613c3b40059fc967951f3684f564601", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/3e2f6a822613c3b40059fc967951f3684f564601", "committedDate": "2020-09-02T13:32:04Z", "message": "Merge branch 'dev-2.x' into otp2_remove_legswitch"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwOTExMjg4", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3164#pullrequestreview-480911288", "createdAt": "2020-09-02T15:00:10Z", "commit": {"oid": "3e2f6a822613c3b40059fc967951f3684f564601"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1952, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}