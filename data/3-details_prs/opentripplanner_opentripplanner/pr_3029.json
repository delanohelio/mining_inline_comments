{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk4MDc0NDMw", "number": 3029, "title": "Bugfix: logging of unused parameters", "bodyText": "The unused parameters node adapter stored children in a set, but the equals and hashCode was not correct implemented. So, for nested config, only the first child would be listed. When printing unused parameters only the first child would be reported from.\n\nRename logUnusedParameters to logAllUnusedParameters and a JavaDoc to\nclarify that this traverse the hole node three by recursion.\n\nTo be completed by pull request submitter:\n\n issue: No issue - bugfix\n roadmap: No\n tests: No\n formatting: Yes\n documentation: JavaDoc updated\n changelog: No\n\nTo be completed by @opentripplanner/plc:\n\n reviews and approvals by 2 members, ideally from different organizations\n after merging: update the relevant card on the roadmap", "createdAt": "2020-04-03T09:51:40Z", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3029", "merged": true, "mergeCommit": {"oid": "2453008c3cca9429b295d0eba2823046ff098ff5"}, "closed": true, "closedAt": "2020-04-14T09:40:30Z", "author": {"login": "t2gran"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcT9v3WAH2gAyMzk4MDc0NDMwOjFiODA0ZWVmMThlOTAzYjE4MmQ4MzYxNjNkMzZmYzRlM2Q0YTFlYmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcXgM1JgFqTM5Mjc2Mjc4Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1b804eef18e903b182d836163d36fc4e3d4a1ebd", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/1b804eef18e903b182d836163d36fc4e3d4a1ebd", "committedDate": "2020-04-03T09:47:08Z", "message": "Bugfix of unused parameters logging. The unused parameters node adapter stored\nchildren in a set, but the equals and hashCode was not correct implemented. So,\nfor nested config, only the first child would be listed. When printing unused\nparameters only the first child would be reported from.\n - Rename `logUnusedParameters` to `logAllUnusedParameters` and a JavaDoc to\n   clarify that this traverse the hole node three by recursion."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyNzM1NjQ0", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3029#pullrequestreview-392735644", "createdAt": "2020-04-14T09:01:38Z", "commit": {"oid": "1b804eef18e903b182d836163d36fc4e3d4a1ebd"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwOTowMTozOFrOGFFBKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwOTowMzozN1rOGFFF0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzk3ODI4Mw==", "bodyText": "This adds a logger to the class, but apparently no uses of that logger.", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3029#discussion_r407978283", "createdAt": "2020-04-14T09:01:38Z", "author": {"login": "abyrd"}, "path": "src/main/java/org/opentripplanner/standalone/config/TransitRoutingConfig.java", "diffHunk": "@@ -2,12 +2,16 @@\n \n import org.opentripplanner.transit.raptor.api.request.DynamicSearchWindowCoefficients;\n import org.opentripplanner.transit.raptor.api.request.RaptorTuningParameters;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n \n /**\n  * @see RaptorTuningParameters for documentaion of tuning parameters.\n  */\n public final class TransitRoutingConfig implements RaptorTuningParameters {\n \n+    private static final Logger LOG = LoggerFactory.getLogger(TransitRoutingConfig.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1b804eef18e903b182d836163d36fc4e3d4a1ebd"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzk3ODY0NQ==", "bodyText": "This adds a logger to the class, but apparently no uses of that logger.", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3029#discussion_r407978645", "createdAt": "2020-04-14T09:02:13Z", "author": {"login": "abyrd"}, "path": "src/main/java/org/opentripplanner/standalone/config/StorageConfig.java", "diffHunk": "@@ -39,6 +42,8 @@\n  */\n public class StorageConfig {\n \n+    private static final Logger LOG = LoggerFactory.getLogger(StorageConfig.class);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1b804eef18e903b182d836163d36fc4e3d4a1ebd"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzk3OTQ3Mg==", "bodyText": "This does correct the behavior of equals and hashcode, but since we're putting them in a list we probably don't even need semantic equality. Less stuff to maintain if we can determine they are not even needed...", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3029#discussion_r407979472", "createdAt": "2020-04-14T09:03:37Z", "author": {"login": "abyrd"}, "path": "src/main/java/org/opentripplanner/standalone/config/NodeAdapter.java", "diffHunk": "@@ -335,13 +342,14 @@ public void logUnusedParameters(Logger log) {\n     public boolean equals(Object o) {\n         if (this == o) { return true; }\n         if (o == null || getClass() != o.getClass()) { return false; }\n-        NodeAdapter adapter = (NodeAdapter) o;\n-        return source.equals(adapter.source);\n+        NodeAdapter other = (NodeAdapter) o;\n+        return Objects.equals(source, other.source)\n+                && Objects.equals(contextPath, other.contextPath);\n     }\n \n     @Override\n     public int hashCode() {\n-        return Objects.hash(source);\n+        return Objects.hash(source, contextPath);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1b804eef18e903b182d836163d36fc4e3d4a1ebd"}, "originalPosition": 73}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cd982113ef7c315870092815e0a6029e03949a2", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/2cd982113ef7c315870092815e0a6029e03949a2", "committedDate": "2020-04-14T09:20:26Z", "message": "Code review - Remove unused LOGs and remove hashCode and equals in NodeAdapter."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a0c05de89d5e6bf0f5ee3a8d8669f30e596ff289", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/a0c05de89d5e6bf0f5ee3a8d8669f30e596ff289", "committedDate": "2020-04-14T09:36:10Z", "message": "Merge branch 'dev-2.x' into otp2_improve_config_loading_by_logging_unused_parameters"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyNzYyNzg3", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3029#pullrequestreview-392762787", "createdAt": "2020-04-14T09:37:19Z", "commit": {"oid": "a0c05de89d5e6bf0f5ee3a8d8669f30e596ff289"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2093, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}