{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzMDkzMTk5", "number": 3084, "title": "Otp2 div filter updates", "bodyText": "To be completed by pull request submitter:\n\n issue: Link to or create an issue that describes the relevant feature or bug. Add GitHub keywords to this PR's description (e.g., closes #45).\n roadmap: Check the roadmap for this feature or bug. If it is not already on the roadmap, PLC will discuss as part of the review process.\n tests: Have you added relevant test coverage? Are all the tests passing on the continuous integration service (Travis CI)?\n formatting: Have you followed the suggested code style?\n documentation: If you are adding a new configuration option, have you added an explanation to the configuration documentation tables and sections?\n changelog: add a bullet point to the changelog file with description and link to the linked issue\n\nTo be completed by @opentripplanner/plc:\n\n reviews and approvals by 2 members, ideally from different organizations\n after merging: update the relevant card on the roadmap", "createdAt": "2020-05-26T09:34:20Z", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3084", "merged": true, "mergeCommit": {"oid": "53c93c8985f92495f872b42f06d4575bbdb3817b"}, "closed": true, "closedAt": "2020-06-02T09:54:27Z", "author": {"login": "t2gran"}, "timelineItems": {"totalCount": 25, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjHOa1gH2gAyNDIzMDkzMTk5OjgzZTY3YWI5ZWQ0MTU4YzZhOWRlNDUxNmY1YzVjMjIxZGYzOWNjZTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcnRz5aAFqTQyMjUyMTcwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "83e67ab9ed4158c6a9de4516f5c5c221df39cce7", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/83e67ab9ed4158c6a9de4516f5c5c221df39cce7", "committedDate": "2020-05-20T11:18:31Z", "message": "Clean code - A few spelling errors in the documentation is fixed."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "18fd69f61faafd50271172d04c559e677193e518", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/18fd69f61faafd50271172d04c559e677193e518", "committedDate": "2020-05-20T11:24:32Z", "message": "Add \"Transit, No Airplane\" to the list of available modes to choose from in the OTP Client. Only Norwegian translation is added."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "836477f1d34418ff7c606d27fc40210f9d151c0c", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/836477f1d34418ff7c606d27fc40210f9d151c0c", "committedDate": "2020-05-20T12:42:20Z", "message": "Add utility method to calculate distance between to locations to GeometryUtils."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2730851ffb662cde56c43616aefa086b1f69f1e2", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/2730851ffb662cde56c43616aefa086b1f69f1e2", "committedDate": "2020-05-24T23:33:52Z", "message": "Clean code - Minor refactorings and toString() improvements."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cc83a8a28a2d864b481ad3b0ad16dae45bdb338", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/8cc83a8a28a2d864b481ad3b0ad16dae45bdb338", "committedDate": "2020-05-25T00:01:39Z", "message": "Remove all transit itineraries with cost higher than the best street-only itinerary.\nThis replaces the existing LongTransitWalkingFilter, witch solved a narrower set of\nuse-cases."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e90947460f413b91812520f37952e064886729a", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/6e90947460f413b91812520f37952e064886729a", "committedDate": "2020-05-25T00:01:52Z", "message": "Itinerary sort order\n- Arrive by: STREET_ONLY, departure-time(latest-first), generalized-cost, num-of-transfers, arrival-time.\n- Depart after: STREET_ONLY, arrival-time, generalized-cost, num-of-transfers, departure-time.\n- Prepare OtpDefaultSortOrder to be configurable by making it more reusable."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac227bb1802b4ac1314e429091d748e24b9862fb", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/ac227bb1802b4ac1314e429091d748e24b9862fb", "committedDate": "2020-05-25T00:01:52Z", "message": "Clean code - Add Itinerary.toStr(..) method and a new TestItineraryBuilder to simplify unit-testing\nand improve readability."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MTQwNDQ5", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3084#pullrequestreview-418140449", "createdAt": "2020-05-26T09:49:06Z", "commit": {"oid": "18fd69f61faafd50271172d04c559e677193e518"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwOTo0OTowNlrOGaW3oQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwOTo0OTowNlrOGaW3oQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDI5MDg0OQ==", "bodyText": "Move this comment back to, and change the comment to:\nTRANSLATORS: Used in selection in Travel Options widgets", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3084#discussion_r430290849", "createdAt": "2020-05-26T09:49:06Z", "author": {"login": "t2gran"}, "path": "src/client/js/otp/config.js", "diffHunk": "@@ -291,49 +291,25 @@ i18n.init(options, function(t) {\n \n });\n \n+//TRANSLATORS: Travel by: mode of transport (Used in selection in Travel\n+//Options widgets)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "18fd69f61faafd50271172d04c559e677193e518"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MTU2ODg4", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3084#pullrequestreview-418156888", "createdAt": "2020-05-26T10:12:05Z", "commit": {"oid": "836477f1d34418ff7c606d27fc40210f9d151c0c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMDoxMjowNlrOGaXqUw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMDoxMjowNlrOGaXqUw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDMwMzgyNw==", "bodyText": "Doc:\nhttps://upload.wikimedia.org/wikipedia/commons/3/3e/WGS84_mean_Earth_radius.svg\nHannes Junnila12:07\nhttps://www.cambridge.org/core/journals/journal-of-navigation/article/sphere-to-spheroid-comparisons/E757B940C8C622A064276AC33CDC15C0\nhttps://www.cambridge.org/core/journals/journal-of-navigation/article/sphere-to-spheroid-comparisons/E757B940C8C622A064276AC33CDC15C0/core-reader", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3084#discussion_r430303827", "createdAt": "2020-05-26T10:12:06Z", "author": {"login": "t2gran"}, "path": "src/main/java/org/opentripplanner/common/geometry/GeometryUtils.java", "diffHunk": "@@ -153,6 +156,23 @@ else if (r > 1.0)\n         return r;\n     }\n \n+\n+    /**\n+    */\n+    public static double calculateDistance(Coordinate from, Coordinate to) {\n+        try {\n+            // the following code is based on JTS.orthodromicDistance( start, end, crs )\n+            GeodeticCalculator gc = new GeodeticCalculator(WGS84_XY);\n+            gc.setStartingPosition(JTS.toDirectPosition(from, WGS84_XY));\n+            gc.setDestinationPosition(JTS.toDirectPosition(to, WGS84_XY));\n+\n+            return gc.getOrthodromicDistance();\n+        }\n+        catch (TransformException e) {\n+            throw new IllegalStateException(e.getMessage(), e);\n+        }\n+    }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "836477f1d34418ff7c606d27fc40210f9d151c0c"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MTg1OTc5", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3084#pullrequestreview-418185979", "createdAt": "2020-05-26T10:55:59Z", "commit": {"oid": "8cc83a8a28a2d864b481ad3b0ad16dae45bdb338"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMDo1NTo1OVrOGaZDTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMDo1NTo1OVrOGaZDTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDMyNjYwNA==", "bodyText": "Check the mode LegSwitch, is it street or transit, none or both?", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3084#discussion_r430326604", "createdAt": "2020-05-26T10:55:59Z", "author": {"login": "t2gran"}, "path": "src/main/java/org/opentripplanner/model/plan/ItinerariesCalculateLegTotals.java", "diffHunk": "@@ -39,6 +41,9 @@ else if(leg.isOnStreetNonTransit()) {\n             if(!leg.isWalkingLeg()) {\n                 walkOnly = false;\n             }\n+            if(leg.isTransitLeg()) {\n+              this.streetOnly = false;\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8cc83a8a28a2d864b481ad3b0ad16dae45bdb338"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MTg5MzYx", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3084#pullrequestreview-418189361", "createdAt": "2020-05-26T11:01:16Z", "commit": {"oid": "8cc83a8a28a2d864b481ad3b0ad16dae45bdb338"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMTowMToxNlrOGaZNxg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMTowMToxNlrOGaZNxg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDMyOTI4Ng==", "bodyText": "Maybe use \"true\" as default value.", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3084#discussion_r430329286", "createdAt": "2020-05-26T11:01:16Z", "author": {"login": "t2gran"}, "path": "src/main/java/org/opentripplanner/routing/algorithm/filterchain/ItineraryFilterChainBuilder.java", "diffHunk": "@@ -28,6 +28,7 @@\n     private int maxLimit = 20;\n     private int groupByTransferCost = 10 * 60;\n     private Instant latestDepartureTimeLimit = null;\n+    private boolean removeTransitWithHigherCostThenWalkOnly = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8cc83a8a28a2d864b481ad3b0ad16dae45bdb338"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MTkwMjE4", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3084#pullrequestreview-418190218", "createdAt": "2020-05-26T11:02:33Z", "commit": {"oid": "8cc83a8a28a2d864b481ad3b0ad16dae45bdb338"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMTowMjozM1rOGaZQYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMTowMjozM1rOGaZQYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDMyOTk1Mg==", "bodyText": "Reanme to \"StreetOnly\" and update the JavaDoc", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3084#discussion_r430329952", "createdAt": "2020-05-26T11:02:33Z", "author": {"login": "t2gran"}, "path": "src/main/java/org/opentripplanner/routing/algorithm/filterchain/ItineraryFilterChainBuilder.java", "diffHunk": "@@ -94,6 +95,21 @@ public void setGroupByTransferCost(int cost) {\n     public void setMaxLimitReachedSubscriber(Consumer<Itinerary> maxLimitReachedSubscriber) {\n         this.maxLimitReachedSubscriber = maxLimitReachedSubscriber;\n     }\n+    /**\n+     * The direct street search(walking) is not pruning the transit search, so in some cases we get\n+     * \"silly\" transit itineraries that is marginally better on travel-duration compared with a\n+     * walking-all-the-way itinerary. Calling this method will enable the filter witch remove all\n+     * itineraries with a generalized-cost that is higher than the best on-street-all-the-way\n+     * itinerary.\n+     * <p>\n+     * The default is NOT to include this filter.\n+     * <p>\n+     * This filter only have an effect, if an on-street-all-the-way(WALK, BICYCLE, CAR) itinerary\n+     * exist.\n+     */\n+    public void removeTransitWithHigherCostThenWalkOnly() {\n+        this.removeTransitWithHigherCostThenWalkOnly = true;\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8cc83a8a28a2d864b481ad3b0ad16dae45bdb338"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MTkyODgw", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3084#pullrequestreview-418192880", "createdAt": "2020-05-26T11:06:38Z", "commit": {"oid": "8cc83a8a28a2d864b481ad3b0ad16dae45bdb338"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMTowNjozOVrOGaZYmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMTowNjozOVrOGaZYmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDMzMjA1OA==", "bodyText": "Still walk in the javadoc.", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3084#discussion_r430332058", "createdAt": "2020-05-26T11:06:39Z", "author": {"login": "t2gran"}, "path": "src/main/java/org/opentripplanner/routing/algorithm/filterchain/filters/RemoveTransitIfStreetOnlyIsBetterFilter.java", "diffHunk": "@@ -0,0 +1,48 @@\n+package org.opentripplanner.routing.algorithm.filterchain.filters;\n+\n+import org.opentripplanner.model.plan.Itinerary;\n+import org.opentripplanner.routing.algorithm.filterchain.ItineraryFilter;\n+\n+import java.util.Comparator;\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * Filter itineraries based on duration, compared with a walk-all-the-way itinerary(if it exist).\n+ * If an itinerary is not faster than the walk-all-the-way minus a given slack, then the transit\n+ * itinerary is removed.\n+ *\n+ */\n+public class RemoveTransitIfStreetOnlyIsBetterFilter implements ItineraryFilter {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8cc83a8a28a2d864b481ad3b0ad16dae45bdb338"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MTkzMTEz", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3084#pullrequestreview-418193113", "createdAt": "2020-05-26T11:07:01Z", "commit": {"oid": "8cc83a8a28a2d864b481ad3b0ad16dae45bdb338"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMTowNzowMVrOGaZZVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQxMTowNzowMVrOGaZZVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDMzMjI0Nw==", "bodyText": "indentation", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3084#discussion_r430332247", "createdAt": "2020-05-26T11:07:01Z", "author": {"login": "t2gran"}, "path": "src/main/java/org/opentripplanner/routing/algorithm/filterchain/filters/RemoveTransitIfStreetOnlyIsBetterFilter.java", "diffHunk": "@@ -0,0 +1,48 @@\n+package org.opentripplanner.routing.algorithm.filterchain.filters;\n+\n+import org.opentripplanner.model.plan.Itinerary;\n+import org.opentripplanner.routing.algorithm.filterchain.ItineraryFilter;\n+\n+import java.util.Comparator;\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * Filter itineraries based on duration, compared with a walk-all-the-way itinerary(if it exist).\n+ * If an itinerary is not faster than the walk-all-the-way minus a given slack, then the transit\n+ * itinerary is removed.\n+ *\n+ */\n+public class RemoveTransitIfStreetOnlyIsBetterFilter implements ItineraryFilter {\n+\n+    @Override\n+    public String name() {\n+        return \"transit-vs-street-filter\";\n+    }\n+\n+    @Override\n+    public List<Itinerary> filter(List<Itinerary> itineraries) {\n+        // Find the best walk-all-the-way option\n+        Optional<Itinerary> bestStreetOp = itineraries\n+                .stream()\n+            .filter(Itinerary::isOnStreetAllTheWay)\n+            .min(Comparator.comparingInt(l -> l.generalizedCost));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8cc83a8a28a2d864b481ad3b0ad16dae45bdb338"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7dc8d30c74c45c3e5cea26539b2fc0c77af16701", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/7dc8d30c74c45c3e5cea26539b2fc0c77af16701", "committedDate": "2020-05-27T22:53:58Z", "message": "Add back the translators context comment removed in 18fd69f6."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c63529c9684c9a90cb34dd85bfec7ecca1156f5", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/6c63529c9684c9a90cb34dd85bfec7ecca1156f5", "committedDate": "2020-05-27T22:59:20Z", "message": "Revert \"Add utility method to calculate distance between to locations to GeometryUtils.\nThis functionality exist in the SphericalDistanceLibrary\". This reverts part of commit\n836477f1."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dfb3305021d66cb1da9ed98497376c524b0333f6", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/dfb3305021d66cb1da9ed98497376c524b0333f6", "committedDate": "2020-05-27T23:12:47Z", "message": "Exclude LEG_SWITCH from aggregation of itinerary flag and totals."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "482b39f3e09887e2f76fbcfffd9d743e4e1948e2", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/482b39f3e09887e2f76fbcfffd9d743e4e1948e2", "committedDate": "2020-05-27T23:31:31Z", "message": "Enable RemoveTransitIfStreetOnlyIsBetterFilter by default."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d918a277e8ca025568de4693a74c2e1ad6835b85", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/d918a277e8ca025568de4693a74c2e1ad6835b85", "committedDate": "2020-05-26T09:28:40Z", "message": "Temp"}, "afterCommit": {"oid": "482b39f3e09887e2f76fbcfffd9d743e4e1948e2", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/482b39f3e09887e2f76fbcfffd9d743e4e1948e2", "committedDate": "2020-05-27T23:31:31Z", "message": "Enable RemoveTransitIfStreetOnlyIsBetterFilter by default."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "632f27bd1a8edba9f06bce59ffe7eb9e62f8bb46", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/632f27bd1a8edba9f06bce59ffe7eb9e62f8bb46", "committedDate": "2020-05-28T01:00:44Z", "message": "Clean Code - Remove duplicate test itinerary factory - FilterChainTestData.\nMigrate all test using the FilterChainTestData to use TestItineraryBuilder instead."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd291c7d15d5cf21a785354e984494f3f5ce3256", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/cd291c7d15d5cf21a785354e984494f3f5ce3256", "committedDate": "2020-05-28T13:40:58Z", "message": "Clean code/bugfix in DebugFilterWrapper\n - The DebugFilterWrapper was not working properly; Deleted itineraries was not added to the list\n   of deleted itineraries, with the result that the next filter-in-chain would also \"see\" the deleted\n   itinerary. This could then influence the result of the reminding filters.\n - Clean code: Some code cleanup like making methods `final` to prevent overriding, forcing all filters\n   to override the `removeItineraries()` method. Also, sort on `cost` then `number-of-transfers` in the\n   SortOnGeneralizedCost filter. Simplify the GroupByFilter and merging group-ids."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26a066a2a44e43b4b8d0d84b6f9ac90d88cad4fb", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/26a066a2a44e43b4b8d0d84b6f9ac90d88cad4fb", "committedDate": "2020-05-28T13:46:52Z", "message": "SameTripsHigherCostFilter - Remove short(<10% of distance) first/last legs and then group  the itineraries by the main trips. Then remove all, but one leg based on generalized-cost  for each group. This filter removes some of the variation cased by the timetable-view."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "380ce4b3f204420dd9958fd42b82bcfcaf8c6d95", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/380ce4b3f204420dd9958fd42b82bcfcaf8c6d95", "committedDate": "2020-05-28T14:10:34Z", "message": "Merge remote-tracking branch 'otp/dev-2.x' into otp2_div_filter_updates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4702a24fa7ee71852a646a374ae20c87a2dca05d", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/4702a24fa7ee71852a646a374ae20c87a2dca05d", "committedDate": "2020-06-02T09:48:01Z", "message": "Merge branch 'dev-2.x' into otp2_div_filter_updates"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyNTIxNzA5", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3084#pullrequestreview-422521709", "createdAt": "2020-06-02T09:54:12Z", "commit": {"oid": "4702a24fa7ee71852a646a374ae20c87a2dca05d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2125, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}