{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk5MjA1NDAw", "number": 3207, "title": "Do not throw NPEs when routing without OSM data", "bodyText": "To be completed by pull request submitter:\n\n\n issue: #3204 - This PR do not fix the issue, but prevent the server from craching.\n\n\n roadmap: No\n\n\n tests: No\n\n\n formatting: Yes\n\n\n documentation: No\n\n\n changelog: No\n\n\nTo be completed by @opentripplanner/plc:\n\n reviews and approvals by 2 members, ideally from different organizations\n after merging: update the relevant card on the roadmap\n\nThis is the minimal amount of changes to make transit routing work on graphs that were built without OSM data. The AccessEgressRouter will currently only snap to the nearest stop (with no walk time). This can result in not finding any routes, if it snaps to the wrong stop.\nA more complete fix will involve refactoring the NearbyStopFinder, so that the AccessEgressRouter does not call the findNearbyStopsViaStreets method directly. This will also involve making the findNearbyStops method work with multiple start vertices.\nWe can discuss in the meeting tomorrow whether this should be merged or not.", "createdAt": "2020-10-07T12:15:12Z", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3207", "merged": true, "mergeCommit": {"oid": "d33485fa232465b6d3c6b0bae368f26aa017964a"}, "closed": true, "closedAt": "2020-10-08T09:54:10Z", "author": {"login": "gmellemstrand"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdQK_g_gH2gAyNDk5MjA1NDAwOjgxMDk4ODgxNTgwMGRmY2VkYmY4ZmUwMzExOTIzZTMwMDJhMGM3YmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQeTkagFqTUwNDYwMjg0NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "810988815800dfcedbf8fe0311923e3002a0c7bb", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/810988815800dfcedbf8fe0311923e3002a0c7bb", "committedDate": "2020-10-07T11:08:27Z", "message": "Do not throw NPEs when routing without OSM data"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0NTgzNzc2", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3207#pullrequestreview-504583776", "createdAt": "2020-10-08T09:15:16Z", "commit": {"oid": "810988815800dfcedbf8fe0311923e3002a0c7bb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwOToxNToxNlrOHeVVFw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOFQwOToxNToxNlrOHeVVFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTU2ODc5MQ==", "bodyText": "We have the approximate distance, we could use that?", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3207#discussion_r501568791", "createdAt": "2020-10-08T09:15:16Z", "author": {"login": "t2gran"}, "path": "src/main/java/org/opentripplanner/routing/algorithm/raptor/transit/Transfer.java", "diffHunk": "@@ -45,7 +46,7 @@ public int getEffectiveWalkDistanceMeters() {\n     }\n \n     public int getDistanceMeters() {\n-        return (int)edges.stream().mapToDouble(Edge::getDistanceMeters).sum();\n+        return edges != null ? (int)edges.stream().mapToDouble(Edge::getDistanceMeters).sum() : 0;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "810988815800dfcedbf8fe0311923e3002a0c7bb"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5b6e5771557717f2430ae6f67fc5837e18f360bf", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/5b6e5771557717f2430ae6f67fc5837e18f360bf", "committedDate": "2020-10-08T09:17:08Z", "message": "Return effectiveWalkDistance from transfers when no edges are available"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0NjAyODQ0", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3207#pullrequestreview-504602844", "createdAt": "2020-10-08T09:38:33Z", "commit": {"oid": "5b6e5771557717f2430ae6f67fc5837e18f360bf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1990, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}