{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE5ODEyNjI5", "number": 3245, "title": "Avoid system default locale in unit tests", "bodyText": "Avoid system default locale in unit tests to make tests pass regardless of system settings. OTP as server software should avoid using system locale settings, but locale defaults are configurable as explained in docs/Configuration.md\n\n issue: Closes #3214\n roadmap: Check the roadmap for this feature or bug. If it is not already on the roadmap, PLC will discuss as part of the review process.\n tests: Have you added relevant test coverage? Are all the tests passing on the continuous integration service (Travis CI)?\n formatting: Have you followed the suggested code style?\n documentation: If you are adding a new configuration option, have you added an explanation to the configuration documentation tables and sections?\n changelog: add a bullet point to the changelog file with description and link to the linked issue\n\nTo be completed by @opentripplanner/plc:\n\n reviews and approvals by 2 members, ideally from different organizations\n after merging: update the relevant card on the roadmap", "createdAt": "2020-11-12T11:17:26Z", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3245", "merged": true, "mergeCommit": {"oid": "cc7de54e949771dca9cb7e91b1f0456ae141e9b6"}, "closed": true, "closedAt": "2020-11-17T10:26:54Z", "author": {"login": "tvainika"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbz7JOgFqTUyOTE3NTk1Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABddW9VwgFqTUzMjIyMDI0Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5MTc1OTU2", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3245#pullrequestreview-529175956", "createdAt": "2020-11-12T15:02:56Z", "commit": {"oid": "91e5c4085b4a19246ba14fa2cf1cd587baa2bcc7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNTowMjo1NlrOHx-8Fw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQxNTowMjo1NlrOHx-8Fw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjE3MzQ2Mw==", "bodyText": "I would like to se a tearDown method where you set the default locale back. The reason is that if another test have the same issue as this on it might run ok/not ok depending on running before or after this test. Vi do not want to set the locale for every test - witch also solve it.", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3245#discussion_r522173463", "createdAt": "2020-11-12T15:02:56Z", "author": {"login": "t2gran"}, "path": "src/test/java/org/opentripplanner/graph_builder/module/osm/TestOpenStreetMapGraphBuilder.java", "diffHunk": "@@ -39,6 +39,7 @@\n     @Before\n     public void setUp() {\n         extra = new HashMap<>();\n+        Locale.setDefault(new Locale(\"en\", \"US\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "91e5c4085b4a19246ba14fa2cf1cd587baa2bcc7"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI5MTg0NjM4", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3245#pullrequestreview-529184638", "createdAt": "2020-11-12T15:11:03Z", "commit": {"oid": "91e5c4085b4a19246ba14fa2cf1cd587baa2bcc7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38b557a8f6b20b823cc9ac42788b897b339335d6", "author": {"user": {"login": "tvainika", "name": "Tommi Vainikainen"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/38b557a8f6b20b823cc9ac42788b897b339335d6", "committedDate": "2020-11-13T14:39:25Z", "message": "Don't use system default locale in unit tests\n\nFixes #3214"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "91e5c4085b4a19246ba14fa2cf1cd587baa2bcc7", "author": {"user": {"login": "tvainika", "name": "Tommi Vainikainen"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/91e5c4085b4a19246ba14fa2cf1cd587baa2bcc7", "committedDate": "2020-11-12T11:09:43Z", "message": "Set default locale en-US for unit tests\n\nFixes #3214"}, "afterCommit": {"oid": "38b557a8f6b20b823cc9ac42788b897b339335d6", "author": {"user": {"login": "tvainika", "name": "Tommi Vainikainen"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/38b557a8f6b20b823cc9ac42788b897b339335d6", "committedDate": "2020-11-13T14:39:25Z", "message": "Don't use system default locale in unit tests\n\nFixes #3214"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df7a33d115a03c1ef65f140ee292c98a4cad7331", "author": {"user": {"login": "tvainika", "name": "Tommi Vainikainen"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/df7a33d115a03c1ef65f140ee292c98a4cad7331", "committedDate": "2020-11-13T14:47:06Z", "message": "Merge branch 'dev-2.x' into test-set-default-locale"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyMjIwMjQ2", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3245#pullrequestreview-532220246", "createdAt": "2020-11-17T10:25:57Z", "commit": {"oid": "df7a33d115a03c1ef65f140ee292c98a4cad7331"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2018, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}