{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMxMTU0NzE4", "number": 3093, "title": "Updates to Entur sandbox modules: mode documentation, SiriSXUpdater bugfix, bikeRentalStations filter by id", "bodyText": "To be completed by pull request submitter:\n\n issue: Link to or create an issue that describes the relevant feature or bug. Add GitHub keywords to this PR's description (e.g., closes #45).\n roadmap: Check the roadmap for this feature or bug. If it is not already on the roadmap, PLC will discuss as part of the review process.\n tests: Have you added relevant test coverage? Are all the tests passing on the continuous integration service (Travis CI)?\n formatting: Have you followed the suggested code style?\n documentation: If you are adding a new configuration option, have you added an explanation to the configuration documentation tables and sections?\n changelog: add a bullet point to the changelog file with description and link to the linked issue\n\nTo be completed by @opentripplanner/plc:\n\n reviews and approvals by 2 members, ideally from different organizations\n after merging: update the relevant card on the roadmap\n\nThis contains a few fixes to Entur's sandbox features to make them work in the Entur client.", "createdAt": "2020-06-08T13:50:12Z", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3093", "merged": true, "mergeCommit": {"oid": "5dba8d682121fbde648d6601448d4f25c24f12c9"}, "closed": true, "closedAt": "2020-06-17T12:04:23Z", "author": {"login": "gmellemstrand"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcpQvHJgH2gAyNDMxMTU0NzE4OmM0MTUzMGExYzA3ODllZTUzNjM2ZDFkOWQ5NGY5YzQ4OWEzOGRlYmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcsIjAzAFqTQzMjMyNjE4Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c41530a1c0789ee53636d1d9d94f9c489a38deba", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/c41530a1c0789ee53636d1d9d94f9c489a38deba", "committedDate": "2020-06-08T13:46:55Z", "message": "Add graphql fields required for Entur client"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db35dfe88600436b48f5f2b809efe01c1a612abe", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/db35dfe88600436b48f5f2b809efe01c1a612abe", "committedDate": "2020-06-08T13:46:55Z", "message": "Fix SiriSX AlertPatchService not being initalized"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2755f41e6aeae6291c551229547d58700cab0c9e", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/2755f41e6aeae6291c551229547d58700cab0c9e", "committedDate": "2020-06-09T10:11:41Z", "message": "Updated transmodel api doc"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d5b7776330a4ddbe436952c603472af98a121f7b", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/d5b7776330a4ddbe436952c603472af98a121f7b", "committedDate": "2020-06-09T09:01:09Z", "message": "Updated transmodel api doc"}, "afterCommit": {"oid": "2755f41e6aeae6291c551229547d58700cab0c9e", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/2755f41e6aeae6291c551229547d58700cab0c9e", "committedDate": "2020-06-09T10:11:41Z", "message": "Updated transmodel api doc"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4OTYyNzU0", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3093#pullrequestreview-428962754", "createdAt": "2020-06-11T14:22:10Z", "commit": {"oid": "2755f41e6aeae6291c551229547d58700cab0c9e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNDoyMjoxMFrOGifroQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNDoyMjoxMFrOGifroQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODgyMzg0MQ==", "bodyText": "No need to use a local variable here?", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3093#discussion_r438823841", "createdAt": "2020-06-11T14:22:10Z", "author": {"login": "t2gran"}, "path": "src/ext/java/org/opentripplanner/ext/siri/updater/SiriSXUpdater.java", "diffHunk": "@@ -82,6 +82,7 @@ public void setGraphUpdaterManager(GraphUpdaterManager updaterManager) {\n     @Override\n     public void setup(Graph graph) {\n         AlertPatchService alertPatchService = new AlertPatchServiceImpl(graph);\n+        this.alertPatchService = alertPatchService;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2755f41e6aeae6291c551229547d58700cab0c9e"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1e2a48c6d2c6e057d773c157d6046d10d23ed59", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/c1e2a48c6d2c6e057d773c157d6046d10d23ed59", "committedDate": "2020-06-12T09:36:19Z", "message": "Remove redundant local variable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5aa61e5a6f948b7127f0d36ffe003ca5a50abb82", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/5aa61e5a6f948b7127f0d36ffe003ca5a50abb82", "committedDate": "2020-06-12T11:57:26Z", "message": "Merge branch 'dev-2.x' into otp2_sandbox_fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c33ed322aeae7d622417a8613ffb5f0cccbb10b9", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/c33ed322aeae7d622417a8613ffb5f0cccbb10b9", "committedDate": "2020-06-17T10:03:46Z", "message": "Add filtering by id to bikeRentalStations API call"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56194b8841f899160ca5afcd95b77a61ee068bb2", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/56194b8841f899160ca5afcd95b77a61ee068bb2", "committedDate": "2020-06-17T11:25:56Z", "message": "Merge branch 'dev-2.x' into otp2_sandbox_fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyMzA3NTYx", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3093#pullrequestreview-432307561", "createdAt": "2020-06-17T11:28:10Z", "commit": {"oid": "56194b8841f899160ca5afcd95b77a61ee068bb2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMToyODoxMFrOGlBgpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMToyODoxMFrOGlBgpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQ3NTIzNg==", "bodyText": "Double ;;", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3093#discussion_r441475236", "createdAt": "2020-06-17T11:28:10Z", "author": {"login": "t2gran"}, "path": "src/ext/java/org/opentripplanner/ext/siri/updater/SiriSXUpdater.java", "diffHunk": "@@ -81,7 +81,7 @@ public void setGraphUpdaterManager(GraphUpdaterManager updaterManager) {\n \n     @Override\n     public void setup(Graph graph) {\n-        AlertPatchService alertPatchService = new AlertPatchServiceImpl(graph);\n+        this.alertPatchService = new AlertPatchServiceImpl(graph);;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56194b8841f899160ca5afcd95b77a61ee068bb2"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyMzA5MDY2", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3093#pullrequestreview-432309066", "createdAt": "2020-06-17T11:30:21Z", "commit": {"oid": "56194b8841f899160ca5afcd95b77a61ee068bb2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMTozMDoyMVrOGlBkpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMTozMDoyMVrOGlBkpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQ3NjI2MQ==", "bodyText": "FYI: This code is deleted in my PR - it is deprecated", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3093#discussion_r441476261", "createdAt": "2020-06-17T11:30:21Z", "author": {"login": "t2gran"}, "path": "src/ext/java/org/opentripplanner/ext/transmodelapi/TransmodelIndexGraphQLSchema.java", "diffHunk": "@@ -1169,6 +1187,13 @@ public TransmodelIndexGraphQLSchema(Graph graph, RoutingRequest defaultRequest)\n                             }\n                         })\n                         .build())\n+                .field(GraphQLFieldDefinition.newFieldDefinition()\n+                        .name(\"infoLink\")\n+                        .type(Scalars.GraphQLString)\n+                        .deprecate(\"Use the attribute infoLinks instead.\")\n+                        .description(\"Url with more information\")\n+                        .dataFetcher(environment -> ((AlertPatch) environment.getSource()).getAlert().alertUrl)\n+                        .build())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56194b8841f899160ca5afcd95b77a61ee068bb2"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyMzA5NTQ5", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3093#pullrequestreview-432309549", "createdAt": "2020-06-17T11:31:06Z", "commit": {"oid": "56194b8841f899160ca5afcd95b77a61ee068bb2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMTozMTowNlrOGlBmEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMTozMTowNlrOGlBmEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQ3NjYyNw==", "bodyText": "FYI: This code is deleted in my PR - it is deprecated", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3093#discussion_r441476627", "createdAt": "2020-06-17T11:31:06Z", "author": {"login": "t2gran"}, "path": "src/ext/java/org/opentripplanner/ext/transmodelapi/TransmodelIndexGraphQLSchema.java", "diffHunk": "@@ -1153,6 +1154,23 @@ public TransmodelIndexGraphQLSchema(Graph graph, RoutingRequest defaultRequest)\n                             }\n                         })\n                         .build())\n+                .field(GraphQLFieldDefinition.newFieldDefinition()\n+                        .name(\"detail\")\n+                        .type(new GraphQLNonNull(new GraphQLList(new GraphQLNonNull(multilingualStringType))))\n+                        .description(\"Details of situation in all different translations available\")\n+                        .deprecate(\"Not allowed according to profile. Use \u00b4advice\u00b4 instead.\")\n+                        .dataFetcher(environment -> {\n+                            AlertPatch alertPatch = environment.getSource();\n+                            Alert alert = alertPatch.getAlert();\n+                            if (alert.alertDetailText instanceof TranslatedString) {\n+                                return ((TranslatedString) alert.alertDetailText).getTranslations();\n+                            } else if (alert.alertDetailText != null) {\n+                                return Arrays.asList(new AbstractMap.SimpleEntry<>(null, alert.alertDetailText.toString()));\n+                            } else {\n+                                return emptyList();\n+                            }\n+                        })\n+                        .build())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "56194b8841f899160ca5afcd95b77a61ee068bb2"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyMzEyMzM1", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3093#pullrequestreview-432312335", "createdAt": "2020-06-17T11:35:20Z", "commit": {"oid": "56194b8841f899160ca5afcd95b77a61ee068bb2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6b7bd6d1c15093703b61811bd4b2048ee36cc63", "author": {"user": {"login": "gmellemstrand", "name": null}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/d6b7bd6d1c15093703b61811bd4b2048ee36cc63", "committedDate": "2020-06-17T11:46:56Z", "message": "Merge fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyMzI2MTg2", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3093#pullrequestreview-432326186", "createdAt": "2020-06-17T11:56:14Z", "commit": {"oid": "d6b7bd6d1c15093703b61811bd4b2048ee36cc63"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2135, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}