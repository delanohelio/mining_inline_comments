{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM4NDkxOTUx", "number": 3111, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxMDowNDowMlrOEb_4oQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxMDowNDowMlrOEb_4oQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk3NzkzNjk3OnYy", "diffSide": "RIGHT", "path": "src/main/java/org/opentripplanner/model/TripPattern.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxMDowNDowMlrOHGRBRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQxMjoyNToxOFrOHGVm4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjMzMjM1Nw==", "bodyText": "Should be sufficient to just add a comment here explaining why a length mismatch would occur (realtime update adding stops) and clarifying that this will only preserve geometry up to the added stop, at which point it will fall back on straight lines.", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3111#discussion_r476332357", "createdAt": "2020-08-25T10:04:02Z", "author": {"login": "abyrd"}, "path": "src/main/java/org/opentripplanner/model/TripPattern.java", "diffHunk": "@@ -159,7 +159,11 @@ public void setHopGeometry(int i, LineString hopGeometry) {\n      */\n     public void setHopGeometriesFromPattern(TripPattern other) {\n         this.hopGeometries = new byte[this.getStops().size() - 1][];\n-        for (int i = 0; i < other.getStops().size() - 1; i++) {\n+\n+        // Gets the size of the shortest of the two trip patterns\n+        int sizeOfShortestPattern = Math.min(this.getStops().size(), other.getStops().size());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8453756838418411023d3dcec42c2307f37301b2"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQwNzUyMg==", "bodyText": "I have added the comment now.", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3111#discussion_r476407522", "createdAt": "2020-08-25T12:25:18Z", "author": {"login": "gmellemstrand"}, "path": "src/main/java/org/opentripplanner/model/TripPattern.java", "diffHunk": "@@ -159,7 +159,11 @@ public void setHopGeometry(int i, LineString hopGeometry) {\n      */\n     public void setHopGeometriesFromPattern(TripPattern other) {\n         this.hopGeometries = new byte[this.getStops().size() - 1][];\n-        for (int i = 0; i < other.getStops().size() - 1; i++) {\n+\n+        // Gets the size of the shortest of the two trip patterns\n+        int sizeOfShortestPattern = Math.min(this.getStops().size(), other.getStops().size());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjMzMjM1Nw=="}, "originalCommit": {"oid": "8453756838418411023d3dcec42c2307f37301b2"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1855, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}