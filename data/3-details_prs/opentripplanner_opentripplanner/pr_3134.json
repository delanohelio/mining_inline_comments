{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ1Mzg2MTE4", "number": 3134, "title": "Remove AlertPatcher", "bodyText": "There are some todos left in the SIRI-SX updater, as well as tests.\nTo be completed by pull request submitter:\n\n issue: Fixes #3114\n roadmap: Check the roadmap for this feature or bug. If it is not already on the roadmap, PLC will discuss as part of the review process.\n tests: Have you added relevant test coverage? Are all the tests passing on the continuous integration service (Travis CI)?\n formatting: Have you followed the suggested code style?\n documentation: If you are adding a new configuration option, have you added an explanation to the configuration documentation tables and sections?\n changelog: add a bullet point to the changelog file with description and link to the linked issue\n\nTo be completed by @opentripplanner/plc:\n\n reviews and approvals by 2 members, ideally from different organizations\n after merging: update the relevant card on the roadmap", "createdAt": "2020-07-07T12:39:43Z", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3134", "merged": true, "mergeCommit": {"oid": "ae1999078e581c94296a75391e2e34f77135dc48"}, "closed": true, "closedAt": "2020-08-27T08:42:43Z", "author": {"login": "hannesj"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcyP-JQgH2gAyNDQ1Mzg2MTE4OjU1YWRkYTQyYmMzYjY5YmFhZjI0ODY3Nzk4Yzc5NTk0OGJhZDM3MTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdC8TyWAFqTQ3NjUwNzM2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "55adda42bc3b69baaf24867798c795948bad3718", "author": {"user": {"login": "hannesj", "name": "Hannes Junnila"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/55adda42bc3b69baaf24867798c795948bad3718", "committedDate": "2020-07-06T11:58:45Z", "message": "Remove unused xml serialization references"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8632f824deb698e86a6fd54fd37a15caee5be15", "author": {"user": {"login": "hannesj", "name": "Hannes Junnila"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/c8632f824deb698e86a6fd54fd37a15caee5be15", "committedDate": "2020-07-06T12:00:53Z", "message": "remove createPatches"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4fa84276e315176718e8cb02f993f9170f2d4bb", "author": {"user": {"login": "hannesj", "name": "Hannes Junnila"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/c4fa84276e315176718e8cb02f993f9170f2d4bb", "committedDate": "2020-07-06T12:01:07Z", "message": "Move apiAlert"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "810e513757c1dbffcc808fa6caf7aa449551264a", "author": {"user": {"login": "hannesj", "name": "Hannes Junnila"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/810e513757c1dbffcc808fa6caf7aa449551264a", "committedDate": "2020-07-06T12:07:48Z", "message": "Remove role handling\n\nAs there are no sensitive services anymore"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0be2ceda2b60264965ebb2224663ed71e0165cc1", "author": {"user": {"login": "hannesj", "name": "Hannes Junnila"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/0be2ceda2b60264965ebb2224663ed71e0165cc1", "committedDate": "2020-07-06T12:13:56Z", "message": "Remove multipart handling\n\nAnd documentation to scripting and analyst, which were using it"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4cc3f24b514b304423d665dc15e9a29ee17c065", "author": {"user": {"login": "hannesj", "name": "Hannes Junnila"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/d4cc3f24b514b304423d665dc15e9a29ee17c065", "committedDate": "2020-07-06T13:55:07Z", "message": "Remove unused alertPatches from graph"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0cbb130ae87f57841a1d3319e02d29296a2b339", "author": {"user": {"login": "hannesj", "name": "Hannes Junnila"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/d0cbb130ae87f57841a1d3319e02d29296a2b339", "committedDate": "2020-07-06T14:03:55Z", "message": "Remove old tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5115a784a901423ad36a1baf149e098113a9902", "author": {"user": {"login": "hannesj", "name": "Hannes Junnila"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/d5115a784a901423ad36a1baf149e098113a9902", "committedDate": "2020-07-06T14:36:06Z", "message": "Split StreetNote separate from Alert"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4bee8e3b5c1cd495c383c959655f5de304f52297", "author": {"user": {"login": "hannesj", "name": "Hannes Junnila"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/4bee8e3b5c1cd495c383c959655f5de304f52297", "committedDate": "2020-07-08T11:59:20Z", "message": "Remove AlertPatch and move logic to TransitAlert"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13178d329b9ba7cb69701c7abaf79575a9811d90", "author": {"user": {"login": "hannesj", "name": "Hannes Junnila"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/13178d329b9ba7cb69701c7abaf79575a9811d90", "committedDate": "2020-07-08T11:59:20Z", "message": "Make street note serializable"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d92c000561eab9e8680fd70d2e9f429cab8251c7", "author": {"user": {"login": "hannesj", "name": "Hannes Junnila"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/d92c000561eab9e8680fd70d2e9f429cab8251c7", "committedDate": "2020-07-07T12:35:56Z", "message": "Remove AlertPatch and move logic to TransitAlert"}, "afterCommit": {"oid": "13178d329b9ba7cb69701c7abaf79575a9811d90", "author": {"user": {"login": "hannesj", "name": "Hannes Junnila"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/13178d329b9ba7cb69701c7abaf79575a9811d90", "committedDate": "2020-07-08T11:59:20Z", "message": "Make street note serializable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3269f2fd11d86dcc3d6ee3f7b87c487ee94e6d36", "author": {"user": {"login": "hannesj", "name": "Hannes Junnila"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/3269f2fd11d86dcc3d6ee3f7b87c487ee94e6d36", "committedDate": "2020-07-09T08:07:33Z", "message": "Update documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9b678caf40ec2cd54485a207000c917088956dd", "author": {"user": {"login": "hannesj", "name": "Hannes Junnila"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/f9b678caf40ec2cd54485a207000c917088956dd", "committedDate": "2020-07-09T08:12:34Z", "message": "Add missing methods from Index API"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20fcf27b9545e43d595be93c9a39d8ded8089c84", "author": {"user": {"login": "hannesj", "name": "Hannes Junnila"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/20fcf27b9545e43d595be93c9a39d8ded8089c84", "committedDate": "2020-08-03T09:07:56Z", "message": "Merge branch 'dev-2.x' into remove-alert-patcher"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4baed481d8a38d4eb5e5d4485814743db8e7bf5d", "author": {"user": {"login": "hannesj", "name": "Hannes Junnila"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/4baed481d8a38d4eb5e5d4485814743db8e7bf5d", "committedDate": "2020-08-06T16:33:01Z", "message": "Merge branch 'legacygraphql' into remove-alert-patcher"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa7cb0191e2573191bb057216760f3bfab157d4f", "author": {"user": {"login": "hannesj", "name": "Hannes Junnila"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/fa7cb0191e2573191bb057216760f3bfab157d4f", "committedDate": "2020-08-06T16:33:14Z", "message": "Merge branch 'dev-2.x' of github.com:opentripplanner/OpenTripPlanner into remove-alert-patcher"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1NDg5OTQ1", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3134#pullrequestreview-475489945", "createdAt": "2020-08-26T13:30:51Z", "commit": {"oid": "fa7cb0191e2573191bb057216760f3bfab157d4f"}, "state": "DISMISSED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxMzozMDo1MlrOHHMLKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQxMzozNzozMlrOHHMd0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzMwMTU0Nw==", "bodyText": "Should this be mentioned in the migration guide?", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3134#discussion_r477301547", "createdAt": "2020-08-26T13:30:52Z", "author": {"login": "t2gran"}, "path": "src/main/java/org/opentripplanner/api/model/ApiAlert.java", "diffHunk": "@@ -8,4 +8,5 @@\n     public String alertUrl;\n     /** null means unknown */\n     public Date effectiveStartDate;\n+    public Date effectiveEndDate;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa7cb0191e2573191bb057216760f3bfab157d4f"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzMwNTE5OA==", "bodyText": "I expect there to be merge conflicts with the current dev-2.x branch for this file. It is ok to accept what ever is in the dev-2.x branch and just comment out the sections that do not compile. We (Entur) can fixit after it is merged.", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3134#discussion_r477305198", "createdAt": "2020-08-26T13:35:51Z", "author": {"login": "t2gran"}, "path": "src/ext/java/org/opentripplanner/ext/transmodelapi/TransmodelIndexGraphQLSchema.java", "diffHunk": "@@ -1080,32 +1080,55 @@ public TransmodelIndexGraphQLSchema(Graph graph, RoutingRequest defaultRequest)\n                         .name(\"id\")\n                         .type(new GraphQLNonNull(Scalars.GraphQLID))\n                         .dataFetcher(environment -> relay.toGlobalId(\n-                                ptSituationElementType.getName(), ((AlertPatch) environment.getSource()).getId()))\n+                                ptSituationElementType.getName(), ((TransitAlert) environment.getSource()).getId()))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa7cb0191e2573191bb057216760f3bfab157d4f"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzMwNjMyMA==", "bodyText": "@lassetyr Would you mind to review this part? The changes to the Siri updaters.", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3134#discussion_r477306320", "createdAt": "2020-08-26T13:37:32Z", "author": {"login": "t2gran"}, "path": "src/ext/java/org/opentripplanner/ext/siri/SiriAlertsUpdateHandler.java", "diffHunk": "@@ -1,12 +1,15 @@\n package org.opentripplanner.ext.siri;\n \n-import org.apache.commons.lang3.tuple.Pair;\n import org.opentripplanner.model.FeedScopedId;\n import org.opentripplanner.model.Route;\n import org.opentripplanner.model.calendar.ServiceDate;\n-import org.opentripplanner.routing.alertpatch.*;\n+import org.opentripplanner.routing.alertpatch.AlertUrl;\n+import org.opentripplanner.routing.alertpatch.EntitySelector;\n+import org.opentripplanner.routing.alertpatch.StopCondition;\n+import org.opentripplanner.routing.alertpatch.TimePeriod;\n+import org.opentripplanner.routing.alertpatch.TransitAlert;\n import org.opentripplanner.routing.core.TraverseMode;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fa7cb0191e2573191bb057216760f3bfab157d4f"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cf82a6098e83ea38e1d96af636dd1ac062a8cbe5", "author": {"user": {"login": "hannesj", "name": "Hannes Junnila"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/cf82a6098e83ea38e1d96af636dd1ac062a8cbe5", "committedDate": "2020-08-27T07:20:27Z", "message": "Merge branch 'dev-2.x' of github.com:opentripplanner/OpenTripPlanner into remove-alert-patcher"}, "afterCommit": {"oid": "9b796fb9ac9876ff719137ef3bc692d0c81d91e3", "author": {"user": {"login": "hannesj", "name": "Hannes Junnila"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/9b796fb9ac9876ff719137ef3bc692d0c81d91e3", "committedDate": "2020-08-27T07:26:16Z", "message": "Merge branch 'dev-2.x' of github.com:opentripplanner/OpenTripPlanner into remove-alert-patcher"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7402dae06c3af2c1c0799f6d1ccbe631fbef48f9", "author": {"user": {"login": "hannesj", "name": "Hannes Junnila"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/7402dae06c3af2c1c0799f6d1ccbe631fbef48f9", "committedDate": "2020-08-27T07:28:43Z", "message": "Merge branch 'dev-2.x' of github.com:opentripplanner/OpenTripPlanner into remove-alert-patcher"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9b796fb9ac9876ff719137ef3bc692d0c81d91e3", "author": {"user": {"login": "hannesj", "name": "Hannes Junnila"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/9b796fb9ac9876ff719137ef3bc692d0c81d91e3", "committedDate": "2020-08-27T07:26:16Z", "message": "Merge branch 'dev-2.x' of github.com:opentripplanner/OpenTripPlanner into remove-alert-patcher"}, "afterCommit": {"oid": "7402dae06c3af2c1c0799f6d1ccbe631fbef48f9", "author": {"user": {"login": "hannesj", "name": "Hannes Junnila"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/7402dae06c3af2c1c0799f6d1ccbe631fbef48f9", "committedDate": "2020-08-27T07:28:43Z", "message": "Merge branch 'dev-2.x' of github.com:opentripplanner/OpenTripPlanner into remove-alert-patcher"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c707f42c419b77df82c2707dd7b663fbdeeb10b", "author": {"user": {"login": "hannesj", "name": "Hannes Junnila"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/5c707f42c419b77df82c2707dd7b663fbdeeb10b", "committedDate": "2020-08-27T08:18:09Z", "message": "Add note about changed alert type"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc2NTA3MzY1", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/3134#pullrequestreview-476507365", "createdAt": "2020-08-27T08:41:00Z", "commit": {"oid": "5c707f42c419b77df82c2707dd7b663fbdeeb10b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2176, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}