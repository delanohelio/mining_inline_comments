{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc0ODUzOTk2", "number": 2975, "title": "Otp2 speed test add options", "bodyText": "This PR only modify the SpeedTest.\nThis PR add the possibility to configure the SpeedTest using a config file speed-test-config.json. The only configurable property added is the testDate. The testDate is used to set witch date all test cases travel requests are made. This was previously hardcoded in the code. We want this to be configurable and follow the test input. It is important to run the test for a given date to get consistent results (regression testing). This also allow for creating multiple set setups with different cases and data.\nAn alternative was to make the date part each test case travelSearch.csv, but this would be harder to maintain when the graph is updated and you want to run the test for a different day. If needed we could add date the the  travelSearch.csv later and used the config value as a default.\n\n issue: No - SpeedTest update only.\n roadmap: The SpeedTest is essencial to regression test the Raptor implementaion.\n tests: This is the test.\n formatting: yes.\n documentation: The example README.md is updated.\n changelog: No, the SpeedTest is added as part of the new Raptor implementation, witch has a changelog entry already.\n\nTo be completed by @opentripplanner/plc:\n\n reviews and approvals by 2 members, ideally from different organizations\n after merging: update the relevant card on the roadmap", "createdAt": "2020-02-13T12:58:38Z", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/2975", "merged": true, "mergeCommit": {"oid": "299f889d488b82c35fcb4cd9e0a84d12f72845f2"}, "closed": true, "closedAt": "2020-02-14T09:31:18Z", "author": {"login": "t2gran"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcD5JwZAH2gAyMzc0ODUzOTk2OmI2NmVkN2FmN2U3ZTA4OGZiYmM1YzY4Y2MxOTYwMzU5ZTA1MTJlYWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcEMBw5AFqTM1ODgwNTE0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b66ed7af7e7e088fbbc5c68cc1960359e0512eaf", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/b66ed7af7e7e088fbbc5c68cc1960359e0512eaf", "committedDate": "2020-02-13T11:23:06Z", "message": "Renamed package cli to options"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dfb8e2a793ea0a5c85b34205719b2f91bc1f46fb", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/dfb8e2a793ea0a5c85b34205719b2f91bc1f46fb", "committedDate": "2020-02-13T12:56:08Z", "message": "Added the ability to configure the speed test using a config file: speed-test-config.json"}, "afterCommit": {"oid": "339a446765b6140972217d4006192ec0fbda061f", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/339a446765b6140972217d4006192ec0fbda061f", "committedDate": "2020-02-13T13:04:33Z", "message": "Added the ability to configure the speed test using a config file: speed-test-config.json"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5720a27099a607379f9d551cb620eeba9124ae3f", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/5720a27099a607379f9d551cb620eeba9124ae3f", "committedDate": "2020-02-13T13:08:28Z", "message": "Added the ability to configure the speed test using a config file: speed-test-config.json"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "339a446765b6140972217d4006192ec0fbda061f", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/339a446765b6140972217d4006192ec0fbda061f", "committedDate": "2020-02-13T13:04:33Z", "message": "Added the ability to configure the speed test using a config file: speed-test-config.json"}, "afterCommit": {"oid": "5720a27099a607379f9d551cb620eeba9124ae3f", "author": {"user": {"login": "t2gran", "name": "Thomas Gran"}}, "url": "https://github.com/opentripplanner/OpenTripPlanner/commit/5720a27099a607379f9d551cb620eeba9124ae3f", "committedDate": "2020-02-13T13:08:28Z", "message": "Added the ability to configure the speed test using a config file: speed-test-config.json"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4ODA1MTQw", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/2975#pullrequestreview-358805140", "createdAt": "2020-02-14T09:21:52Z", "commit": {"oid": "5720a27099a607379f9d551cb620eeba9124ae3f"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQwOToyMTo1M1rOFpwIkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNFQwOToyMTo1M1rOFpwIkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTMyNDU2Mw==", "bodyText": "Checked with @t2gran, this method is just moved, not changed.", "url": "https://github.com/opentripplanner/OpenTripPlanner/pull/2975#discussion_r379324563", "createdAt": "2020-02-14T09:21:53Z", "author": {"login": "abyrd"}, "path": "src/test/java/org/opentripplanner/transit/raptor/speed_test/options/SpeedTestCmdLineOpts.java", "diffHunk": "@@ -153,6 +125,34 @@ public boolean compareHeuristics() {\n         return parseCSVList(TEST_CASES);\n     }\n \n+    private Options options() {\n+        Options options = new Options();\n+\n+        // General options\n+        options.addOption(HELP, \"help\", false, \"Print all command line options, then exit. (Optional)\");\n+        options.addOption(VERBOSE, \"verbose\", false, \"Verbose output, print itineraries.\");\n+        options.addOption(ROOT_DIR, \"dir\", true, \"The directory where network and input files are located. (Optional)\");\n+\n+        // Search options\n+        options.addOption(PROFILES, \"profiles\", true, \"A coma separated list of configuration profiles:\\n\" + String.join(\"\\n\", SpeedTestProfile.options()));\n+        options.addOption(TEST_CASES, \"testCases\", true, \"A coma separated list of test case ids to run.\");\n+        options.addOption(SAMPLE_TEST_N_TIMES, \"sampleTestNTimes\", true, \"Repeat the test N times. Profiles are altered in a round robin fashion.\");\n+        options.addOption(NUM_OF_ADD_TRANSFERS, \"nExtraTransfers\", true, \"The maximum number of extra transfers allowed relative to the path with the fewest transfers.\");\n+\n+        // Result options\n+        options.addOption(NUM_OF_ITINERARIES, \"numOfItineraries\", true, \"Number of itineraries to return.\");\n+        options.addOption(COMPARE_HEURISTICS, \"compare\", false, \"Compare heuristics for the listed profiles. The 1st profile is compared with 2..n listed profiles.\");\n+\n+        // Debug options\n+        options.addOption(DEBUG, \"debug\", false, \"Enable debug info.\");\n+        options.addOption(DEBUG_STOPS, \"debugStops\", true, \"A coma separated list of stops to debug.\");\n+        options.addOption(DEBUG_PATH, \"debugPath\", true, \"A coma separated list of stops representing a trip/path to debug. \" +\n+                \"Use a '*' to indicate where to start debugging. For example '1,*2,3' will print event at stop 2 and 3, \" +\n+                \"but not stop 1 for all trips starting with the given stop sequence.\");\n+        options.addOption(DEBUG_REQUEST, \"debugRequest\", false, \"Debug request.\");\n+        return options;\n+   }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5720a27099a607379f9d551cb620eeba9124ae3f"}, "originalPosition": 74}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2211, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}