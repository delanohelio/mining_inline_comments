{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwMDEyMDAz", "number": 1419, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwOToxODo0NlrOD5Ud6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwOToyMDo0N1rOD5Ugzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxNDMwNzYzOnYy", "diffSide": "RIGHT", "path": "org.eclipse.xtext.xtext.ui.tests/src/org/eclipse/xtext/xtext/ui/editor/SemanticHighlightingTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwOToxODo0NlrOGQhDmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwOTo0NDo0OFrOGQh9Gg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk3MTk5NA==", "bodyText": "You can override setInjector() and mark it with @Inject which would allow to remove the injector field above.", "url": "https://github.com/eclipse/xtext-eclipse/pull/1419#discussion_r419971994", "createdAt": "2020-05-05T09:18:46Z", "author": {"login": "szarnekow"}, "path": "org.eclipse.xtext.xtext.ui.tests/src/org/eclipse/xtext/xtext/ui/editor/SemanticHighlightingTest.java", "diffHunk": "@@ -11,49 +11,49 @@\n import java.util.Set;\n \n import org.eclipse.jface.text.TypedRegion;\n-import org.eclipse.xtext.XtextRuntimeModule;\n-import org.eclipse.xtext.XtextStandaloneSetup;\n import org.eclipse.xtext.ide.editor.syntaxcoloring.IHighlightedPositionAcceptor;\n import org.eclipse.xtext.ide.editor.syntaxcoloring.ISemanticHighlightingCalculator;\n import org.eclipse.xtext.junit4.AbstractXtextTests;\n import org.eclipse.xtext.resource.XtextResource;\n-import org.eclipse.xtext.ui.shared.SharedStateModule;\n+import org.eclipse.xtext.testing.InjectWith;\n+import org.eclipse.xtext.testing.XtextRunner;\n import org.eclipse.xtext.util.CancelIndicator;\n-import org.eclipse.xtext.util.Modules2;\n-import org.eclipse.xtext.xtext.ui.Activator;\n+import org.eclipse.xtext.xtext.ui.XtextUiInjectorProvider;\n import org.eclipse.xtext.xtext.ui.editor.syntaxcoloring.SemanticHighlightingConfiguration;\n-import org.eclipse.xtext.xtext.ui.internal.XtextUIModuleInternal;\n import org.junit.Test;\n+import org.junit.runner.RunWith;\n \n import com.google.common.collect.Sets;\n-import com.google.inject.Guice;\n+import com.google.inject.Inject;\n import com.google.inject.Injector;\n \n /**\n  * @author Sebastian Zarnekow - Initial contribution and API\n  */\n+@RunWith(XtextRunner.class)\n+@InjectWith(XtextUiInjectorProvider.class)\n public class SemanticHighlightingTest extends AbstractXtextTests implements IHighlightedPositionAcceptor {\n-\t\n+\n+\t@Inject\n+\tprivate Injector injector;\n+\n+\t@Inject\n+\tprivate ISemanticHighlightingCalculator calculator;\n+\n \tprivate Set<TypedRegion> expectedRegions;\n-\t\n+\n \t@Override\n \tpublic void setUp() throws Exception {\n \t\tsuper.setUp();\n-\t\twith(new XtextStandaloneSetup() {\n-\t\t\t@Override\n-\t\t\tpublic Injector createInjector() {\n-\t\t\t\treturn Guice.createInjector(Modules2.mixin(new XtextRuntimeModule(),new XtextUIModuleInternal(Activator.getDefault()), new SharedStateModule()));\n-\t\t\t}\n-\t\t});\n \t\texpectedRegions = Sets.newLinkedHashSet();\n+\t\tsetInjector(injector);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65275889d154cf0a91cdcc31d0cf44d3ba9c2c9f"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk4NjcxNA==", "bodyText": "Fixed.", "url": "https://github.com/eclipse/xtext-eclipse/pull/1419#discussion_r419986714", "createdAt": "2020-05-05T09:44:48Z", "author": {"login": "miklossy"}, "path": "org.eclipse.xtext.xtext.ui.tests/src/org/eclipse/xtext/xtext/ui/editor/SemanticHighlightingTest.java", "diffHunk": "@@ -11,49 +11,49 @@\n import java.util.Set;\n \n import org.eclipse.jface.text.TypedRegion;\n-import org.eclipse.xtext.XtextRuntimeModule;\n-import org.eclipse.xtext.XtextStandaloneSetup;\n import org.eclipse.xtext.ide.editor.syntaxcoloring.IHighlightedPositionAcceptor;\n import org.eclipse.xtext.ide.editor.syntaxcoloring.ISemanticHighlightingCalculator;\n import org.eclipse.xtext.junit4.AbstractXtextTests;\n import org.eclipse.xtext.resource.XtextResource;\n-import org.eclipse.xtext.ui.shared.SharedStateModule;\n+import org.eclipse.xtext.testing.InjectWith;\n+import org.eclipse.xtext.testing.XtextRunner;\n import org.eclipse.xtext.util.CancelIndicator;\n-import org.eclipse.xtext.util.Modules2;\n-import org.eclipse.xtext.xtext.ui.Activator;\n+import org.eclipse.xtext.xtext.ui.XtextUiInjectorProvider;\n import org.eclipse.xtext.xtext.ui.editor.syntaxcoloring.SemanticHighlightingConfiguration;\n-import org.eclipse.xtext.xtext.ui.internal.XtextUIModuleInternal;\n import org.junit.Test;\n+import org.junit.runner.RunWith;\n \n import com.google.common.collect.Sets;\n-import com.google.inject.Guice;\n+import com.google.inject.Inject;\n import com.google.inject.Injector;\n \n /**\n  * @author Sebastian Zarnekow - Initial contribution and API\n  */\n+@RunWith(XtextRunner.class)\n+@InjectWith(XtextUiInjectorProvider.class)\n public class SemanticHighlightingTest extends AbstractXtextTests implements IHighlightedPositionAcceptor {\n-\t\n+\n+\t@Inject\n+\tprivate Injector injector;\n+\n+\t@Inject\n+\tprivate ISemanticHighlightingCalculator calculator;\n+\n \tprivate Set<TypedRegion> expectedRegions;\n-\t\n+\n \t@Override\n \tpublic void setUp() throws Exception {\n \t\tsuper.setUp();\n-\t\twith(new XtextStandaloneSetup() {\n-\t\t\t@Override\n-\t\t\tpublic Injector createInjector() {\n-\t\t\t\treturn Guice.createInjector(Modules2.mixin(new XtextRuntimeModule(),new XtextUIModuleInternal(Activator.getDefault()), new SharedStateModule()));\n-\t\t\t}\n-\t\t});\n \t\texpectedRegions = Sets.newLinkedHashSet();\n+\t\tsetInjector(injector);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk3MTk5NA=="}, "originalCommit": {"oid": "65275889d154cf0a91cdcc31d0cf44d3ba9c2c9f"}, "originalPosition": 61}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxNDMxNTAzOnYy", "diffSide": "RIGHT", "path": "org.eclipse.xtext.xtext.ui.tests/src/org/eclipse/xtext/xtext/ui/editor/outline/XtextOutlineTreeProviderTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwOToyMDo0N1rOGQhH9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwOTo0NDo1NVrOGQh9YA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk3MzExMA==", "bodyText": "I'd rather not keep a reference to the document. Please use a Provider<XtextDocument> to ensure that two subsequent calls to assertNotException(..) do not interfere with each other.", "url": "https://github.com/eclipse/xtext-eclipse/pull/1419#discussion_r419973110", "createdAt": "2020-05-05T09:20:47Z", "author": {"login": "szarnekow"}, "path": "org.eclipse.xtext.xtext.ui.tests/src/org/eclipse/xtext/xtext/ui/editor/outline/XtextOutlineTreeProviderTest.java", "diffHunk": "@@ -10,37 +10,42 @@\n \n import java.util.List;\n \n-import org.eclipse.xtext.ISetup;\n import org.eclipse.xtext.junit4.AbstractXtextTests;\n import org.eclipse.xtext.resource.XtextResource;\n+import org.eclipse.xtext.testing.InjectWith;\n+import org.eclipse.xtext.testing.XtextRunner;\n import org.eclipse.xtext.ui.editor.model.XtextDocument;\n import org.eclipse.xtext.ui.editor.outline.IOutlineNode;\n import org.eclipse.xtext.ui.editor.outline.impl.OutlineMode;\n import org.eclipse.xtext.util.ITextRegion;\n import org.eclipse.xtext.util.StringInputStream;\n-import org.eclipse.xtext.xtext.ui.Activator;\n+import org.eclipse.xtext.xtext.ui.XtextUiInjectorProvider;\n import org.junit.Test;\n+import org.junit.runner.RunWith;\n \n+import com.google.inject.Inject;\n import com.google.inject.Injector;\n \n /**\n  * @author Jan Koehnlein - Initial contribution and API\n  */\n+@RunWith(XtextRunner.class)\n+@InjectWith(XtextUiInjectorProvider.class)\n public class XtextOutlineTreeProviderTest extends AbstractXtextTests {\n \n+\t@Inject\n+\tprivate Injector injector;\n+\n+\t@Inject\n \tprivate XtextOutlineTreeProvider treeProvider;\n \n+\t@Inject", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65275889d154cf0a91cdcc31d0cf44d3ba9c2c9f"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk4Njc4NA==", "bodyText": "Fixed.", "url": "https://github.com/eclipse/xtext-eclipse/pull/1419#discussion_r419986784", "createdAt": "2020-05-05T09:44:55Z", "author": {"login": "miklossy"}, "path": "org.eclipse.xtext.xtext.ui.tests/src/org/eclipse/xtext/xtext/ui/editor/outline/XtextOutlineTreeProviderTest.java", "diffHunk": "@@ -10,37 +10,42 @@\n \n import java.util.List;\n \n-import org.eclipse.xtext.ISetup;\n import org.eclipse.xtext.junit4.AbstractXtextTests;\n import org.eclipse.xtext.resource.XtextResource;\n+import org.eclipse.xtext.testing.InjectWith;\n+import org.eclipse.xtext.testing.XtextRunner;\n import org.eclipse.xtext.ui.editor.model.XtextDocument;\n import org.eclipse.xtext.ui.editor.outline.IOutlineNode;\n import org.eclipse.xtext.ui.editor.outline.impl.OutlineMode;\n import org.eclipse.xtext.util.ITextRegion;\n import org.eclipse.xtext.util.StringInputStream;\n-import org.eclipse.xtext.xtext.ui.Activator;\n+import org.eclipse.xtext.xtext.ui.XtextUiInjectorProvider;\n import org.junit.Test;\n+import org.junit.runner.RunWith;\n \n+import com.google.inject.Inject;\n import com.google.inject.Injector;\n \n /**\n  * @author Jan Koehnlein - Initial contribution and API\n  */\n+@RunWith(XtextRunner.class)\n+@InjectWith(XtextUiInjectorProvider.class)\n public class XtextOutlineTreeProviderTest extends AbstractXtextTests {\n \n+\t@Inject\n+\tprivate Injector injector;\n+\n+\t@Inject\n \tprivate XtextOutlineTreeProvider treeProvider;\n \n+\t@Inject", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk3MzExMA=="}, "originalCommit": {"oid": "65275889d154cf0a91cdcc31d0cf44d3ba9c2c9f"}, "originalPosition": 42}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 844, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}