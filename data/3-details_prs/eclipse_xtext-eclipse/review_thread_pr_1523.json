{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1MTY5OTUy", "number": 1523, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQwNjozNzozOVrOEdfn6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQwNjozNzozOVrOEdfn6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk5MzYyMjgyOnYy", "diffSide": "RIGHT", "path": "org.eclipse.xtext.ui/src/org/eclipse/xtext/ui/editor/handler/ValidateActionHandler.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQwNjozNzozOVrOHIrXCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQwNjo0MzoyNFrOHIrfOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODg2MTA2Ng==", "bodyText": "Theoretically we'd need to do a SubMonitor.convert(monitor) with two ticks such that we can pass the monitor consistently into the child processors. Not sure if it matters a lot, though.", "url": "https://github.com/eclipse/xtext-eclipse/pull/1523#discussion_r478861066", "createdAt": "2020-08-28T06:37:39Z", "author": {"login": "szarnekow"}, "path": "org.eclipse.xtext.ui/src/org/eclipse/xtext/ui/editor/handler/ValidateActionHandler.java", "diffHunk": "@@ -47,17 +53,36 @@\n \tpublic Object execute(ExecutionEvent event) throws ExecutionException {\n \t\tXtextEditor xtextEditor = EditorUtils.getActiveXtextEditor(event);\n \t\tif (xtextEditor != null) {\n-\t\t\tIValidationIssueProcessor issueProcessor;\n \t\t\tIXtextDocument xtextDocument = xtextEditor.getDocument();\n \t\t\tIResource resource = xtextEditor.getResource();\n-\t\t\tif(resource != null)\n-\t\t\t\tissueProcessor = new MarkerIssueProcessor(resource, xtextEditor.getInternalSourceViewer().getAnnotationModel(), markerCreator, markerTypeProvider);\n-\t\t\telse\n-\t\t\t\tissueProcessor = new AnnotationIssueProcessor(xtextDocument, xtextEditor.getInternalSourceViewer().getAnnotationModel(), issueResolutionProvider);\n-\t\t\tValidationJob validationJob = new ValidationJob(resourceValidator, xtextDocument, issueProcessor,\n-\t\t\t\t\tCheckMode.ALL);\n-\t\t\tvalidationJob.schedule();\n+\t\t\tif(resource != null) {\n+\t\t\t\tIValidationIssueProcessor issueProcessor = new MarkerIssueProcessor(resource, xtextEditor.getInternalSourceViewer().getAnnotationModel(), markerCreator, markerTypeProvider);\n+\t\t\t\tIValidationIssueProcessor issueProcessorFastIssues = new AnnotationIssueProcessor(xtextDocument, xtextEditor.getInternalSourceViewer().getAnnotationModel(), issueResolutionProvider);\n+\t\t\t\tValidationJob validationJob = new ValidationJob(resourceValidator, xtextDocument, new IValidationIssueProcessor() {\n+\t\t\t\t\t\n+\t\t\t\t\t@Override\n+\t\t\t\t\tpublic void processIssues(List<Issue> issues, IProgressMonitor monitor) {\n+\t\t\t\t\t\tList<Issue> fast = new ArrayList<Issue>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "96e6897e2310f1b921aee065e5c5b9e1e21b7a86"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODg2MTU0Mg==", "bodyText": "you mean 4 ticks split 3/1?", "url": "https://github.com/eclipse/xtext-eclipse/pull/1523#discussion_r478861542", "createdAt": "2020-08-28T06:39:04Z", "author": {"login": "cdietrich"}, "path": "org.eclipse.xtext.ui/src/org/eclipse/xtext/ui/editor/handler/ValidateActionHandler.java", "diffHunk": "@@ -47,17 +53,36 @@\n \tpublic Object execute(ExecutionEvent event) throws ExecutionException {\n \t\tXtextEditor xtextEditor = EditorUtils.getActiveXtextEditor(event);\n \t\tif (xtextEditor != null) {\n-\t\t\tIValidationIssueProcessor issueProcessor;\n \t\t\tIXtextDocument xtextDocument = xtextEditor.getDocument();\n \t\t\tIResource resource = xtextEditor.getResource();\n-\t\t\tif(resource != null)\n-\t\t\t\tissueProcessor = new MarkerIssueProcessor(resource, xtextEditor.getInternalSourceViewer().getAnnotationModel(), markerCreator, markerTypeProvider);\n-\t\t\telse\n-\t\t\t\tissueProcessor = new AnnotationIssueProcessor(xtextDocument, xtextEditor.getInternalSourceViewer().getAnnotationModel(), issueResolutionProvider);\n-\t\t\tValidationJob validationJob = new ValidationJob(resourceValidator, xtextDocument, issueProcessor,\n-\t\t\t\t\tCheckMode.ALL);\n-\t\t\tvalidationJob.schedule();\n+\t\t\tif(resource != null) {\n+\t\t\t\tIValidationIssueProcessor issueProcessor = new MarkerIssueProcessor(resource, xtextEditor.getInternalSourceViewer().getAnnotationModel(), markerCreator, markerTypeProvider);\n+\t\t\t\tIValidationIssueProcessor issueProcessorFastIssues = new AnnotationIssueProcessor(xtextDocument, xtextEditor.getInternalSourceViewer().getAnnotationModel(), issueResolutionProvider);\n+\t\t\t\tValidationJob validationJob = new ValidationJob(resourceValidator, xtextDocument, new IValidationIssueProcessor() {\n+\t\t\t\t\t\n+\t\t\t\t\t@Override\n+\t\t\t\t\tpublic void processIssues(List<Issue> issues, IProgressMonitor monitor) {\n+\t\t\t\t\t\tList<Issue> fast = new ArrayList<Issue>();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODg2MTA2Ng=="}, "originalCommit": {"oid": "96e6897e2310f1b921aee065e5c5b9e1e21b7a86"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODg2MjY4Nw==", "bodyText": "I'd be ok with a 1:1 split since I assume that both list will almost always have the same number or at least almost the same number of entries (most validations are FAST).", "url": "https://github.com/eclipse/xtext-eclipse/pull/1523#discussion_r478862687", "createdAt": "2020-08-28T06:42:04Z", "author": {"login": "szarnekow"}, "path": "org.eclipse.xtext.ui/src/org/eclipse/xtext/ui/editor/handler/ValidateActionHandler.java", "diffHunk": "@@ -47,17 +53,36 @@\n \tpublic Object execute(ExecutionEvent event) throws ExecutionException {\n \t\tXtextEditor xtextEditor = EditorUtils.getActiveXtextEditor(event);\n \t\tif (xtextEditor != null) {\n-\t\t\tIValidationIssueProcessor issueProcessor;\n \t\t\tIXtextDocument xtextDocument = xtextEditor.getDocument();\n \t\t\tIResource resource = xtextEditor.getResource();\n-\t\t\tif(resource != null)\n-\t\t\t\tissueProcessor = new MarkerIssueProcessor(resource, xtextEditor.getInternalSourceViewer().getAnnotationModel(), markerCreator, markerTypeProvider);\n-\t\t\telse\n-\t\t\t\tissueProcessor = new AnnotationIssueProcessor(xtextDocument, xtextEditor.getInternalSourceViewer().getAnnotationModel(), issueResolutionProvider);\n-\t\t\tValidationJob validationJob = new ValidationJob(resourceValidator, xtextDocument, issueProcessor,\n-\t\t\t\t\tCheckMode.ALL);\n-\t\t\tvalidationJob.schedule();\n+\t\t\tif(resource != null) {\n+\t\t\t\tIValidationIssueProcessor issueProcessor = new MarkerIssueProcessor(resource, xtextEditor.getInternalSourceViewer().getAnnotationModel(), markerCreator, markerTypeProvider);\n+\t\t\t\tIValidationIssueProcessor issueProcessorFastIssues = new AnnotationIssueProcessor(xtextDocument, xtextEditor.getInternalSourceViewer().getAnnotationModel(), issueResolutionProvider);\n+\t\t\t\tValidationJob validationJob = new ValidationJob(resourceValidator, xtextDocument, new IValidationIssueProcessor() {\n+\t\t\t\t\t\n+\t\t\t\t\t@Override\n+\t\t\t\t\tpublic void processIssues(List<Issue> issues, IProgressMonitor monitor) {\n+\t\t\t\t\t\tList<Issue> fast = new ArrayList<Issue>();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODg2MTA2Ng=="}, "originalCommit": {"oid": "96e6897e2310f1b921aee065e5c5b9e1e21b7a86"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODg2MzEzMQ==", "bodyText": "If we want to go all-in, that we use the combined sizes of both lists as the number of ticks.", "url": "https://github.com/eclipse/xtext-eclipse/pull/1523#discussion_r478863131", "createdAt": "2020-08-28T06:43:20Z", "author": {"login": "szarnekow"}, "path": "org.eclipse.xtext.ui/src/org/eclipse/xtext/ui/editor/handler/ValidateActionHandler.java", "diffHunk": "@@ -47,17 +53,36 @@\n \tpublic Object execute(ExecutionEvent event) throws ExecutionException {\n \t\tXtextEditor xtextEditor = EditorUtils.getActiveXtextEditor(event);\n \t\tif (xtextEditor != null) {\n-\t\t\tIValidationIssueProcessor issueProcessor;\n \t\t\tIXtextDocument xtextDocument = xtextEditor.getDocument();\n \t\t\tIResource resource = xtextEditor.getResource();\n-\t\t\tif(resource != null)\n-\t\t\t\tissueProcessor = new MarkerIssueProcessor(resource, xtextEditor.getInternalSourceViewer().getAnnotationModel(), markerCreator, markerTypeProvider);\n-\t\t\telse\n-\t\t\t\tissueProcessor = new AnnotationIssueProcessor(xtextDocument, xtextEditor.getInternalSourceViewer().getAnnotationModel(), issueResolutionProvider);\n-\t\t\tValidationJob validationJob = new ValidationJob(resourceValidator, xtextDocument, issueProcessor,\n-\t\t\t\t\tCheckMode.ALL);\n-\t\t\tvalidationJob.schedule();\n+\t\t\tif(resource != null) {\n+\t\t\t\tIValidationIssueProcessor issueProcessor = new MarkerIssueProcessor(resource, xtextEditor.getInternalSourceViewer().getAnnotationModel(), markerCreator, markerTypeProvider);\n+\t\t\t\tIValidationIssueProcessor issueProcessorFastIssues = new AnnotationIssueProcessor(xtextDocument, xtextEditor.getInternalSourceViewer().getAnnotationModel(), issueResolutionProvider);\n+\t\t\t\tValidationJob validationJob = new ValidationJob(resourceValidator, xtextDocument, new IValidationIssueProcessor() {\n+\t\t\t\t\t\n+\t\t\t\t\t@Override\n+\t\t\t\t\tpublic void processIssues(List<Issue> issues, IProgressMonitor monitor) {\n+\t\t\t\t\t\tList<Issue> fast = new ArrayList<Issue>();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODg2MTA2Ng=="}, "originalCommit": {"oid": "96e6897e2310f1b921aee065e5c5b9e1e21b7a86"}, "originalPosition": 53}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODg2MzE2Mw==", "bodyText": "updated", "url": "https://github.com/eclipse/xtext-eclipse/pull/1523#discussion_r478863163", "createdAt": "2020-08-28T06:43:24Z", "author": {"login": "cdietrich"}, "path": "org.eclipse.xtext.ui/src/org/eclipse/xtext/ui/editor/handler/ValidateActionHandler.java", "diffHunk": "@@ -47,17 +53,36 @@\n \tpublic Object execute(ExecutionEvent event) throws ExecutionException {\n \t\tXtextEditor xtextEditor = EditorUtils.getActiveXtextEditor(event);\n \t\tif (xtextEditor != null) {\n-\t\t\tIValidationIssueProcessor issueProcessor;\n \t\t\tIXtextDocument xtextDocument = xtextEditor.getDocument();\n \t\t\tIResource resource = xtextEditor.getResource();\n-\t\t\tif(resource != null)\n-\t\t\t\tissueProcessor = new MarkerIssueProcessor(resource, xtextEditor.getInternalSourceViewer().getAnnotationModel(), markerCreator, markerTypeProvider);\n-\t\t\telse\n-\t\t\t\tissueProcessor = new AnnotationIssueProcessor(xtextDocument, xtextEditor.getInternalSourceViewer().getAnnotationModel(), issueResolutionProvider);\n-\t\t\tValidationJob validationJob = new ValidationJob(resourceValidator, xtextDocument, issueProcessor,\n-\t\t\t\t\tCheckMode.ALL);\n-\t\t\tvalidationJob.schedule();\n+\t\t\tif(resource != null) {\n+\t\t\t\tIValidationIssueProcessor issueProcessor = new MarkerIssueProcessor(resource, xtextEditor.getInternalSourceViewer().getAnnotationModel(), markerCreator, markerTypeProvider);\n+\t\t\t\tIValidationIssueProcessor issueProcessorFastIssues = new AnnotationIssueProcessor(xtextDocument, xtextEditor.getInternalSourceViewer().getAnnotationModel(), issueResolutionProvider);\n+\t\t\t\tValidationJob validationJob = new ValidationJob(resourceValidator, xtextDocument, new IValidationIssueProcessor() {\n+\t\t\t\t\t\n+\t\t\t\t\t@Override\n+\t\t\t\t\tpublic void processIssues(List<Issue> issues, IProgressMonitor monitor) {\n+\t\t\t\t\t\tList<Issue> fast = new ArrayList<Issue>();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODg2MTA2Ng=="}, "originalCommit": {"oid": "96e6897e2310f1b921aee065e5c5b9e1e21b7a86"}, "originalPosition": 53}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 755, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}