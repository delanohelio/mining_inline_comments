{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwMDEyMDAz", "number": 1419, "title": "Refactoring the org.eclipse.xtext.xtext.ui test cases.", "bodyText": "Reusing the recently introduced XtextUiInjectorProvider class.\nReusing the inherited code from the org.eclipse.xtext.ui.testing\ninfrastructure.\n\nSigned-off-by: Tamas Miklossy miklossy@itemis.de", "createdAt": "2020-04-28T09:58:55Z", "url": "https://github.com/eclipse/xtext-eclipse/pull/1419", "merged": true, "mergeCommit": {"oid": "031312a0b35731b0e04097d41efaf00d80edf240"}, "closed": true, "closedAt": "2020-05-05T10:48:24Z", "author": {"login": "miklossy"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABceQhZPAFqTQwNTYxOTczNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABceQ8V2AFqTQwNTYzOTUyNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1NjE5NzM3", "url": "https://github.com/eclipse/xtext-eclipse/pull/1419#pullrequestreview-405619737", "createdAt": "2020-05-05T09:18:46Z", "commit": {"oid": "65275889d154cf0a91cdcc31d0cf44d3ba9c2c9f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwOToxODo0NlrOGQhDmg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwOToxODo0NlrOGQhDmg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk3MTk5NA==", "bodyText": "You can override setInjector() and mark it with @Inject which would allow to remove the injector field above.", "url": "https://github.com/eclipse/xtext-eclipse/pull/1419#discussion_r419971994", "createdAt": "2020-05-05T09:18:46Z", "author": {"login": "szarnekow"}, "path": "org.eclipse.xtext.xtext.ui.tests/src/org/eclipse/xtext/xtext/ui/editor/SemanticHighlightingTest.java", "diffHunk": "@@ -11,49 +11,49 @@\n import java.util.Set;\n \n import org.eclipse.jface.text.TypedRegion;\n-import org.eclipse.xtext.XtextRuntimeModule;\n-import org.eclipse.xtext.XtextStandaloneSetup;\n import org.eclipse.xtext.ide.editor.syntaxcoloring.IHighlightedPositionAcceptor;\n import org.eclipse.xtext.ide.editor.syntaxcoloring.ISemanticHighlightingCalculator;\n import org.eclipse.xtext.junit4.AbstractXtextTests;\n import org.eclipse.xtext.resource.XtextResource;\n-import org.eclipse.xtext.ui.shared.SharedStateModule;\n+import org.eclipse.xtext.testing.InjectWith;\n+import org.eclipse.xtext.testing.XtextRunner;\n import org.eclipse.xtext.util.CancelIndicator;\n-import org.eclipse.xtext.util.Modules2;\n-import org.eclipse.xtext.xtext.ui.Activator;\n+import org.eclipse.xtext.xtext.ui.XtextUiInjectorProvider;\n import org.eclipse.xtext.xtext.ui.editor.syntaxcoloring.SemanticHighlightingConfiguration;\n-import org.eclipse.xtext.xtext.ui.internal.XtextUIModuleInternal;\n import org.junit.Test;\n+import org.junit.runner.RunWith;\n \n import com.google.common.collect.Sets;\n-import com.google.inject.Guice;\n+import com.google.inject.Inject;\n import com.google.inject.Injector;\n \n /**\n  * @author Sebastian Zarnekow - Initial contribution and API\n  */\n+@RunWith(XtextRunner.class)\n+@InjectWith(XtextUiInjectorProvider.class)\n public class SemanticHighlightingTest extends AbstractXtextTests implements IHighlightedPositionAcceptor {\n-\t\n+\n+\t@Inject\n+\tprivate Injector injector;\n+\n+\t@Inject\n+\tprivate ISemanticHighlightingCalculator calculator;\n+\n \tprivate Set<TypedRegion> expectedRegions;\n-\t\n+\n \t@Override\n \tpublic void setUp() throws Exception {\n \t\tsuper.setUp();\n-\t\twith(new XtextStandaloneSetup() {\n-\t\t\t@Override\n-\t\t\tpublic Injector createInjector() {\n-\t\t\t\treturn Guice.createInjector(Modules2.mixin(new XtextRuntimeModule(),new XtextUIModuleInternal(Activator.getDefault()), new SharedStateModule()));\n-\t\t\t}\n-\t\t});\n \t\texpectedRegions = Sets.newLinkedHashSet();\n+\t\tsetInjector(injector);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65275889d154cf0a91cdcc31d0cf44d3ba9c2c9f"}, "originalPosition": 61}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1NjIxMDc2", "url": "https://github.com/eclipse/xtext-eclipse/pull/1419#pullrequestreview-405621076", "createdAt": "2020-05-05T09:20:47Z", "commit": {"oid": "65275889d154cf0a91cdcc31d0cf44d3ba9c2c9f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwOToyMDo0N1rOGQhH9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwOToyMDo0N1rOGQhH9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk3MzExMA==", "bodyText": "I'd rather not keep a reference to the document. Please use a Provider<XtextDocument> to ensure that two subsequent calls to assertNotException(..) do not interfere with each other.", "url": "https://github.com/eclipse/xtext-eclipse/pull/1419#discussion_r419973110", "createdAt": "2020-05-05T09:20:47Z", "author": {"login": "szarnekow"}, "path": "org.eclipse.xtext.xtext.ui.tests/src/org/eclipse/xtext/xtext/ui/editor/outline/XtextOutlineTreeProviderTest.java", "diffHunk": "@@ -10,37 +10,42 @@\n \n import java.util.List;\n \n-import org.eclipse.xtext.ISetup;\n import org.eclipse.xtext.junit4.AbstractXtextTests;\n import org.eclipse.xtext.resource.XtextResource;\n+import org.eclipse.xtext.testing.InjectWith;\n+import org.eclipse.xtext.testing.XtextRunner;\n import org.eclipse.xtext.ui.editor.model.XtextDocument;\n import org.eclipse.xtext.ui.editor.outline.IOutlineNode;\n import org.eclipse.xtext.ui.editor.outline.impl.OutlineMode;\n import org.eclipse.xtext.util.ITextRegion;\n import org.eclipse.xtext.util.StringInputStream;\n-import org.eclipse.xtext.xtext.ui.Activator;\n+import org.eclipse.xtext.xtext.ui.XtextUiInjectorProvider;\n import org.junit.Test;\n+import org.junit.runner.RunWith;\n \n+import com.google.inject.Inject;\n import com.google.inject.Injector;\n \n /**\n  * @author Jan Koehnlein - Initial contribution and API\n  */\n+@RunWith(XtextRunner.class)\n+@InjectWith(XtextUiInjectorProvider.class)\n public class XtextOutlineTreeProviderTest extends AbstractXtextTests {\n \n+\t@Inject\n+\tprivate Injector injector;\n+\n+\t@Inject\n \tprivate XtextOutlineTreeProvider treeProvider;\n \n+\t@Inject", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65275889d154cf0a91cdcc31d0cf44d3ba9c2c9f"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1NjIyMDk3", "url": "https://github.com/eclipse/xtext-eclipse/pull/1419#pullrequestreview-405622097", "createdAt": "2020-05-05T09:22:17Z", "commit": {"oid": "65275889d154cf0a91cdcc31d0cf44d3ba9c2c9f"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64e8959167f87b28a337824b7b51bc1c485246fa", "author": {"user": {"login": "miklossy", "name": "Tamas Miklossy"}}, "url": "https://github.com/eclipse/xtext-eclipse/commit/64e8959167f87b28a337824b7b51bc1c485246fa", "committedDate": "2020-05-05T09:42:33Z", "message": "Refactoring the org.eclipse.xtext.xtext.ui test cases.\n\n- Reusing the recently introduced XtextUiInjectorProvider class.\n- Reusing the inherited code from the org.eclipse.xtext.ui.testing\ninfrastructure.\n\nSigned-off-by: Tamas Miklossy <miklossy@itemis.de>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "65275889d154cf0a91cdcc31d0cf44d3ba9c2c9f", "author": {"user": {"login": "miklossy", "name": "Tamas Miklossy"}}, "url": "https://github.com/eclipse/xtext-eclipse/commit/65275889d154cf0a91cdcc31d0cf44d3ba9c2c9f", "committedDate": "2020-04-28T09:49:40Z", "message": "Refactoring the org.eclipse.xtext.xtext.ui test cases.\n\n- Reusing the recently introduced XtextUiInjectorProvider class.\n- Reusing the inherited code from the org.eclipse.xtext.ui.testing\ninfrastructure.\n\nSigned-off-by: Tamas Miklossy <miklossy@itemis.de>"}, "afterCommit": {"oid": "64e8959167f87b28a337824b7b51bc1c485246fa", "author": {"user": {"login": "miklossy", "name": "Tamas Miklossy"}}, "url": "https://github.com/eclipse/xtext-eclipse/commit/64e8959167f87b28a337824b7b51bc1c485246fa", "committedDate": "2020-05-05T09:42:33Z", "message": "Refactoring the org.eclipse.xtext.xtext.ui test cases.\n\n- Reusing the recently introduced XtextUiInjectorProvider class.\n- Reusing the inherited code from the org.eclipse.xtext.ui.testing\ninfrastructure.\n\nSigned-off-by: Tamas Miklossy <miklossy@itemis.de>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1NjM5NTI3", "url": "https://github.com/eclipse/xtext-eclipse/pull/1419#pullrequestreview-405639527", "createdAt": "2020-05-05T09:48:12Z", "commit": {"oid": "64e8959167f87b28a337824b7b51bc1c485246fa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4518, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}