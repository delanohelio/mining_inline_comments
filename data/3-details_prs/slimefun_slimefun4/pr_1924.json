{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxNjk0NjA2", "number": 1924, "title": "Fix compatibility with other plugins / Explosive Pickaxe", "bodyText": "Description\nFix compatibility with other plugins firing bukkit explosion event to do not drop near blocks on pickaxe area if the block was removed from explosion event.\nChanges\nInstead to check only for block break, fire explosion event using the blocks from explosive pickaxe area.\nRelated Issues\nNot open already, as i am a developer of the plugin usim together SlimeFun and done fixing before open an issue.\nChecklist\n\n I have fully tested the proposed changes and promise that they will not break everything into chaos.\n I have also tested the proposed changes in combination with various popular addons and can confirm my changes do not break them.\n I followed the existing code standards and didn't mess up the formatting.\n I did my best to add documentation to any public classes or methods I added.\n I added sufficient Unit Tests to cover my code.", "createdAt": "2020-05-22T03:30:24Z", "url": "https://github.com/Slimefun/Slimefun4/pull/1924", "merged": true, "mergeCommit": {"oid": "531b858973291563af36c79c471f83974c136fc8"}, "closed": true, "closedAt": "2020-05-22T10:11:59Z", "author": {"login": "FabioZumbi12"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjpo-tAH2gAyNDIxNjk0NjA2OjM4OGVkMjU1Yjg5YzRlY2Y5ZGFkYTM5OTdhOTVjZmVmMGYyYjY1MjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjuUOEgFqTQxNjc1MTQzMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "388ed255b89c4ecf9dada3997a95cfef0f2b6526", "author": {"user": {"login": "FabioZumbi12", "name": "FabioZumbi12"}}, "url": "https://github.com/Slimefun/Slimefun4/commit/388ed255b89c4ecf9dada3997a95cfef0f2b6526", "committedDate": "2020-05-22T03:24:18Z", "message": "Fix compatibility with other plugins firing bukkit explosion event to do not drop near blocks on pickaxe area if the block was removed from explosion event."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2NjI3NjMx", "url": "https://github.com/Slimefun/Slimefun4/pull/1924#pullrequestreview-416627631", "createdAt": "2020-05-22T03:36:24Z", "commit": {"oid": "388ed255b89c4ecf9dada3997a95cfef0f2b6526"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwMzozNjoyNFrOGZJqrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwMzo1MTozMFrOGZJ2PA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTAyNTk2NA==", "bodyText": "Not a fan of EntityExplodeEvent, this should b BlockExplodeEvent with the actual broken block.\nThis is gonna lead to weird behaviour by plugins.", "url": "https://github.com/Slimefun/Slimefun4/pull/1924#discussion_r429025964", "createdAt": "2020-05-22T03:36:24Z", "author": {"login": "WalshyDev"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/tools/ExplosivePickaxe.java", "diffHunk": "@@ -63,11 +67,18 @@ public boolean onBlockBreak(BlockBreakEvent e, ItemStack item, int fortune, List\n                                         continue;\n                                     }\n \n-                                    Block b = e.getBlock().getRelative(x, y, z);\n-                                    breakBlock(e.getPlayer(), item, b, fortune, drops);\n+                                    blocks.add(e.getBlock().getRelative(x, y, z));\n                                 }\n                             }\n                         }\n+\n+                        EntityExplodeEvent entityExplodeEvent = new EntityExplodeEvent(e.getPlayer(), e.getBlock().getLocation(), blocks, 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "388ed255b89c4ecf9dada3997a95cfef0f2b6526"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTAyODkyNA==", "bodyText": "Shouldn't use curly brace for lambda with one line.", "url": "https://github.com/Slimefun/Slimefun4/pull/1924#discussion_r429028924", "createdAt": "2020-05-22T03:51:30Z", "author": {"login": "WalshyDev"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/tools/ExplosivePickaxe.java", "diffHunk": "@@ -63,11 +67,18 @@ public boolean onBlockBreak(BlockBreakEvent e, ItemStack item, int fortune, List\n                                         continue;\n                                     }\n \n-                                    Block b = e.getBlock().getRelative(x, y, z);\n-                                    breakBlock(e.getPlayer(), item, b, fortune, drops);\n+                                    blocks.add(e.getBlock().getRelative(x, y, z));\n                                 }\n                             }\n                         }\n+\n+                        EntityExplodeEvent entityExplodeEvent = new EntityExplodeEvent(e.getPlayer(), e.getBlock().getLocation(), blocks, 0);\n+                        Bukkit.getServer().getPluginManager().callEvent(entityExplodeEvent);\n+                        if (!entityExplodeEvent.isCancelled()) {\n+                            entityExplodeEvent.blockList().forEach(b -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "388ed255b89c4ecf9dada3997a95cfef0f2b6526"}, "originalPosition": 39}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1a968d4ff48b20ade2d14f9f71e2d11b94a000d", "author": {"user": {"login": "FabioZumbi12", "name": "FabioZumbi12"}}, "url": "https://github.com/Slimefun/Slimefun4/commit/d1a968d4ff48b20ade2d14f9f71e2d11b94a000d", "committedDate": "2020-05-22T04:07:20Z", "message": "Changed to Block explode, and added the event to Explosive Shovel"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2NjM2MDQx", "url": "https://github.com/Slimefun/Slimefun4/pull/1924#pullrequestreview-416636041", "createdAt": "2020-05-22T04:10:43Z", "commit": {"oid": "d1a968d4ff48b20ade2d14f9f71e2d11b94a000d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwNDoxMDo0NFrOGZKFtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQwNDoxMDo0NFrOGZKFtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTAzMjg4Nw==", "bodyText": "Missing space at start of line", "url": "https://github.com/Slimefun/Slimefun4/pull/1924#discussion_r429032887", "createdAt": "2020-05-22T04:10:44Z", "author": {"login": "WalshyDev"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/tools/ExplosiveShovel.java", "diffHunk": "@@ -57,31 +61,38 @@ public boolean onBlockBreak(BlockBreakEvent e, ItemStack item, int fortune, List\n                         e.getBlock().getWorld().createExplosion(e.getBlock().getLocation(), 0.0F);\n                         e.getBlock().getWorld().playSound(e.getBlock().getLocation(), Sound.ENTITY_GENERIC_EXPLODE, 0.3F, 1F);\n \n+                        List<Block> blocks = new ArrayList<>();\n                         for (int x = -1; x <= 1; x++) {\n                             for (int y = -1; y <= 1; y++) {\n                                 for (int z = -1; z <= 1; z++) {\n                                     if (x == 0 && y == 0 && z == 0) {\n                                         continue;\n                                     }\n \n-                                    Block b = e.getBlock().getRelative(x, y, z);\n+                                   blocks.add(e.getBlock().getRelative(x, y, z));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1a968d4ff48b20ade2d14f9f71e2d11b94a000d"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a6e6cd8ebbeb2a2c683637f65c0d6b5d6b59dc1", "author": {"user": {"login": "FabioZumbi12", "name": "FabioZumbi12"}}, "url": "https://github.com/Slimefun/Slimefun4/commit/7a6e6cd8ebbeb2a2c683637f65c0d6b5d6b59dc1", "committedDate": "2020-05-22T04:13:59Z", "message": "Missing space on line"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2NzUxNDMx", "url": "https://github.com/Slimefun/Slimefun4/pull/1924#pullrequestreview-416751431", "createdAt": "2020-05-22T08:51:09Z", "commit": {"oid": "7a6e6cd8ebbeb2a2c683637f65c0d6b5d6b59dc1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2534, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}