{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk3ODM3MDQw", "number": 2394, "title": "Improve magical zombie pills", "bodyText": "Description\nAdd the possibility to convert Zombified Piglins to Piglins using Magical Zombie Pills (as suggested and approved on the Discord)\nChanges\n\nAdd the possibility to convert Zombified Piglins to Piglins\nUpdate the items lore\n\nChecklist\n\n I have fully tested the proposed changes and promise that they will not break everything into chaos.\n I have also tested the proposed changes in combination with various popular addons and can confirm my changes do not break them.\n I followed the existing code standards and didn't mess up the formatting.\n I have added Nonnull and Nullable annotations to my methods to indicate their behaviour for null values\n\n\nN/A\n\n I did my best to add documentation to any public classes or methods I added.\n I added sufficient Unit Tests to cover my code.", "createdAt": "2020-10-05T13:01:09Z", "url": "https://github.com/Slimefun/Slimefun4/pull/2394", "merged": true, "mergeCommit": {"oid": "cdff86fdd694ad65522863d592732daf87b9d304"}, "closed": true, "closedAt": "2020-10-05T20:50:48Z", "author": {"login": "svr333"}, "timelineItems": {"totalCount": 32, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdPi0-WAH2gAyNDk3ODM3MDQwOjVlYzYzZjYzMmYwNDgwZDcwZTYxZDU3NzRiY2E1MWU3OTM0NDE5YmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdPqAvJgFqTUwMjQwNTI3Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5ec63f632f0480d70e61d5774bca51e7934419bf", "author": {"user": {"login": "svr333", "name": "svr333"}}, "url": "https://github.com/Slimefun/Slimefun4/commit/5ec63f632f0480d70e61d5774bca51e7934419bf", "committedDate": "2020-10-05T12:20:44Z", "message": "Update lore"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1488c0811997a083f01cd51bdcf94e258e27d90", "author": {"user": {"login": "svr333", "name": "svr333"}}, "url": "https://github.com/Slimefun/Slimefun4/commit/e1488c0811997a083f01cd51bdcf94e258e27d90", "committedDate": "2020-10-05T12:56:40Z", "message": "Add Zombified piglin conversion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab92df7693381606df98e459f4787d624b836371", "author": {"user": {"login": "svr333", "name": "svr333"}}, "url": "https://github.com/Slimefun/Slimefun4/commit/ab92df7693381606df98e459f4787d624b836371", "committedDate": "2020-10-05T12:58:53Z", "message": "Fix imports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21bf7cf60704eee6da3dfaf9ebaae223f305e48f", "author": {"user": {"login": "svr333", "name": "svr333"}}, "url": "https://github.com/Slimefun/Slimefun4/commit/21bf7cf60704eee6da3dfaf9ebaae223f305e48f", "committedDate": "2020-10-05T13:00:21Z", "message": "Refactor slightly"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyMDM4MDUx", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#pullrequestreview-502038051", "createdAt": "2020-10-05T13:09:59Z", "commit": {"oid": "21bf7cf60704eee6da3dfaf9ebaae223f305e48f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMzowOTo1OVrOHccStg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMzowOTo1OVrOHccStg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTU4NTcxOA==", "bodyText": "This is pretty redundant with the above, there's probably lots of ways to refactor this.", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#discussion_r499585718", "createdAt": "2020-10-05T13:09:59Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/MagicalZombiePills.java", "diffHunk": "@@ -63,6 +64,20 @@ public EntityInteractHandler getItemHandler() {\n                     zombieVillager.setConversionPlayer(p);\n                 }\n             }\n+            else if (SlimefunPlugin.getMinecraftVersion().isAtLeast(MinecraftVersion.MINECRAFT_1_16)\n+                    && entity.getType() == EntityType.ZOMBIFIED_PIGLIN) {\n+                Player p = e.getPlayer();\n+\n+                if (p.getGameMode() != GameMode.CREATIVE) {\n+                    ItemUtils.consumeItem(item, false);\n+                }\n+\n+                Location loc = entity.getLocation();\n+                p.playSound(loc, Sound.ENTITY_ZOMBIE_VILLAGER_CONVERTED, 1, 1);\n+\n+                entity.remove();\n+                loc.getWorld().spawnEntity(loc, EntityType.PIGLIN);\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "21bf7cf60704eee6da3dfaf9ebaae223f305e48f"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyMDQ0MjY0", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#pullrequestreview-502044264", "createdAt": "2020-10-05T13:16:47Z", "commit": {"oid": "21bf7cf60704eee6da3dfaf9ebaae223f305e48f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMzoxNjo0OFrOHccjvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMzoyMDowOVrOHcctBQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTU5MDA3OQ==", "bodyText": "I'm not sure about the lore change here. It may break some items in some servers.", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#discussion_r499590079", "createdAt": "2020-10-05T13:16:48Z", "author": {"login": "LinoxGH"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/SlimefunItems.java", "diffHunk": "@@ -63,7 +63,7 @@ private SlimefunItems() {}\n     public static final SlimefunItemStack SPLINT = new SlimefunItemStack(\"SPLINT\", Material.STICK, \"&cSplint\", \"\", \"&aLevel I - Medical Supply\", \"\", \"&fRestores 2 Hearts\", \"\", LoreBuilder.RIGHT_CLICK_TO_USE);\n     public static final SlimefunItemStack VITAMINS = new SlimefunItemStack(\"VITAMINS\", Material.NETHER_WART, \"&cVitamins\", \"\", \"&aLevel III - Medical Supply\", \"\", \"&fRestores 4 Hearts\", \"&fExtinguishes Fire\", \"&fCures Poison/Wither/Radiation\", \"\", LoreBuilder.RIGHT_CLICK_TO_USE);\n     public static final SlimefunItemStack MEDICINE = new SlimefunItemStack(\"MEDICINE\", Material.POTION, Color.RED, \"&cMedicine\", \"\", \"&aLevel III - Medical Supply\", \"\", \"&fRestores 4 Hearts\", \"&fExtinguishes Fire\", \"&fCures Poison/Wither/Radiation\");\n-    public static final SlimefunItemStack MAGICAL_ZOMBIE_PILLS = new SlimefunItemStack(\"MAGICAL_ZOMBIE_PILLS\", Material.NETHER_WART, \"&6Magical Zombie Pills\", \"\", \"&eRight Click &7a Zombified Villager to\", \"&7instantly cure it from its curse\");\n+    public static final SlimefunItemStack MAGICAL_ZOMBIE_PILLS = new SlimefunItemStack(\"MAGICAL_ZOMBIE_PILLS\", Material.NETHER_WART, \"&6Magical Zombie Pills\", \"\", \"&eRight Click &7a Zombified Villager\", \"&eor &7a Zombified Piglin to\", \"&7instantly cure it from its curse\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "21bf7cf60704eee6da3dfaf9ebaae223f305e48f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTU5MjQ1Mw==", "bodyText": "This part is now a duplicate of the code above. Instead move this to a private method and call it. For both entity types. I am not sure if this is still possible. Though it's worth a try.", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#discussion_r499592453", "createdAt": "2020-10-05T13:20:09Z", "author": {"login": "LinoxGH"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/MagicalZombiePills.java", "diffHunk": "@@ -63,6 +64,20 @@ public EntityInteractHandler getItemHandler() {\n                     zombieVillager.setConversionPlayer(p);\n                 }\n             }\n+            else if (SlimefunPlugin.getMinecraftVersion().isAtLeast(MinecraftVersion.MINECRAFT_1_16)\n+                    && entity.getType() == EntityType.ZOMBIFIED_PIGLIN) {\n+                Player p = e.getPlayer();\n+\n+                if (p.getGameMode() != GameMode.CREATIVE) {\n+                    ItemUtils.consumeItem(item, false);\n+                }\n+\n+                Location loc = entity.getLocation();\n+                p.playSound(loc, Sound.ENTITY_ZOMBIE_VILLAGER_CONVERTED, 1, 1);\n+\n+                entity.remove();\n+                loc.getWorld().spawnEntity(loc, EntityType.PIGLIN);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "21bf7cf60704eee6da3dfaf9ebaae223f305e48f"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a01d33fea317b73611fa29092bfc3e2f88709204", "author": {"user": {"login": "svr333", "name": "svr333"}}, "url": "https://github.com/Slimefun/Slimefun4/commit/a01d33fea317b73611fa29092bfc3e2f88709204", "committedDate": "2020-10-05T13:25:11Z", "message": "Refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2fb390a8ec8bb0985b9b135bd3926a416011fae", "author": {"user": {"login": "svr333", "name": "svr333"}}, "url": "https://github.com/Slimefun/Slimefun4/commit/a2fb390a8ec8bb0985b9b135bd3926a416011fae", "committedDate": "2020-10-05T13:28:43Z", "message": "Extra code to separate methods"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e65341eb0b2f6cd32c22ffe0d39f946cad9e0068", "author": {"user": {"login": "svr333", "name": "svr333"}}, "url": "https://github.com/Slimefun/Slimefun4/commit/e65341eb0b2f6cd32c22ffe0d39f946cad9e0068", "committedDate": "2020-10-05T13:29:02Z", "message": "Add newline"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab5251021ad654f49f570a024172e2c6c129c7ad", "author": {"user": {"login": "svr333", "name": "svr333"}}, "url": "https://github.com/Slimefun/Slimefun4/commit/ab5251021ad654f49f570a024172e2c6c129c7ad", "committedDate": "2020-10-05T13:30:23Z", "message": "Fix compile error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyMDU3NTc2", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#pullrequestreview-502057576", "createdAt": "2020-10-05T13:30:51Z", "commit": {"oid": "ab5251021ad654f49f570a024172e2c6c129c7ad"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMzozMDo1MVrOHcdKXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMzozMTozNlrOHcdMMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTU5OTk2Ng==", "bodyText": "@Nonnull \ud83d\udc40", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#discussion_r499599966", "createdAt": "2020-10-05T13:30:51Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/MagicalZombiePills.java", "diffHunk": "@@ -74,4 +76,19 @@ public EntityInteractHandler getItemHandler() {\n     public ItemUseHandler onRightClick() {\n         return PlayerRightClickEvent::cancel;\n     }\n-}\n\\ No newline at end of file\n+\n+    private void healZombieVillager(ZombieVillager zombieVillager, Player p) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ab5251021ad654f49f570a024172e2c6c129c7ad"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTYwMDAxOQ==", "bodyText": "@Nonnull \ud83d\udc40", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#discussion_r499600019", "createdAt": "2020-10-05T13:30:55Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/MagicalZombiePills.java", "diffHunk": "@@ -74,4 +76,19 @@ public EntityInteractHandler getItemHandler() {\n     public ItemUseHandler onRightClick() {\n         return PlayerRightClickEvent::cancel;\n     }\n-}\n\\ No newline at end of file\n+\n+    private void healZombieVillager(ZombieVillager zombieVillager, Player p) {\n+        zombieVillager.setConversionTime(1);\n+\n+        if (SlimefunPlugin.getMinecraftVersion().isAtLeast(MinecraftVersion.MINECRAFT_1_15)) {\n+            zombieVillager.setConversionPlayer(p);\n+        }\n+    }\n+\n+    private void healZombifiedPiglin(Entity zombiePiglin) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ab5251021ad654f49f570a024172e2c6c129c7ad"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTYwMDQzMw==", "bodyText": "Also, while this should not cause any probems as it is, it could be a better practice to do an instanceof check here instead because you are doing a class cast, just in case.", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#discussion_r499600433", "createdAt": "2020-10-05T13:31:36Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/MagicalZombiePills.java", "diffHunk": "@@ -56,11 +57,12 @@ public EntityInteractHandler getItemHandler() {\n \n                 p.playSound(p.getLocation(), Sound.ENTITY_ZOMBIE_VILLAGER_CONVERTED, 1, 1);\n \n-                ZombieVillager zombieVillager = (ZombieVillager) entity;\n-                zombieVillager.setConversionTime(1);\n+                if (entity.getType() == EntityType.ZOMBIE_VILLAGER) {\n+                    healZombieVillager((ZombieVillager) entity, p);\n+                }\n \n-                if (SlimefunPlugin.getMinecraftVersion().isAtLeast(MinecraftVersion.MINECRAFT_1_15)) {\n-                    zombieVillager.setConversionPlayer(p);\n+                else if (entity.getType() == EntityType.ZOMBIFIED_PIGLIN) {\n+                    healZombifiedPiglin(entity);\n                 }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ab5251021ad654f49f570a024172e2c6c129c7ad"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ca6e612cc77e3c8202057c80ffc0302004671bb", "author": {"user": {"login": "svr333", "name": "svr333"}}, "url": "https://github.com/Slimefun/Slimefun4/commit/3ca6e612cc77e3c8202057c80ffc0302004671bb", "committedDate": "2020-10-05T13:33:48Z", "message": "Add @nonnull"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d3f432158cb58d620b4f607231341e1090150fa", "author": {"user": {"login": "svr333", "name": "svr333"}}, "url": "https://github.com/Slimefun/Slimefun4/commit/8d3f432158cb58d620b4f607231341e1090150fa", "committedDate": "2020-10-05T13:37:45Z", "message": "Use instanceof"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c568bd7d15c018737fbca1e9dea629621087ec3", "author": {"user": {"login": "svr333", "name": "svr333"}}, "url": "https://github.com/Slimefun/Slimefun4/commit/6c568bd7d15c018737fbca1e9dea629621087ec3", "committedDate": "2020-10-05T13:38:21Z", "message": "Fix imports"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyMDY2MTE2", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#pullrequestreview-502066116", "createdAt": "2020-10-05T13:39:51Z", "commit": {"oid": "8d3f432158cb58d620b4f607231341e1090150fa"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMzozOTo1MVrOHcdiNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMzozOTo1MVrOHcdiNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTYwNjA2OQ==", "bodyText": "No star imports!", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#discussion_r499606069", "createdAt": "2020-10-05T13:39:51Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/MagicalZombiePills.java", "diffHunk": "@@ -3,11 +3,7 @@\n import org.bukkit.GameMode;\n import org.bukkit.Location;\n import org.bukkit.Sound;\n-import org.bukkit.entity.Entity;\n-import org.bukkit.entity.EntityType;\n-import org.bukkit.entity.Player;\n-import org.bukkit.entity.Villager;\n-import org.bukkit.entity.ZombieVillager;\n+import org.bukkit.entity.*;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d3f432158cb58d620b4f607231341e1090150fa"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8c2c97766abc475e12ea9aa8fc7b010acdffcec", "author": {"user": {"login": "svr333", "name": "svr333"}}, "url": "https://github.com/Slimefun/Slimefun4/commit/b8c2c97766abc475e12ea9aa8fc7b010acdffcec", "committedDate": "2020-10-05T13:43:24Z", "message": "Add missing import"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyMDcxMjY4", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#pullrequestreview-502071268", "createdAt": "2020-10-05T13:45:15Z", "commit": {"oid": "b8c2c97766abc475e12ea9aa8fc7b010acdffcec"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMzo0NToxNlrOHcdwtQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxMzo0NToxNlrOHcdwtQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTYwOTc4MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private void healZombifiedPiglin(@Nonnull Entity zombiePiglin) {\n          \n          \n            \n                private void healZombifiedPiglin(@Nonnull PigZombie zombiePiglin) {", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#discussion_r499609781", "createdAt": "2020-10-05T13:45:16Z", "author": {"login": "LinoxGH"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/MagicalZombiePills.java", "diffHunk": "@@ -74,4 +79,19 @@ public EntityInteractHandler getItemHandler() {\n     public ItemUseHandler onRightClick() {\n         return PlayerRightClickEvent::cancel;\n     }\n-}\n\\ No newline at end of file\n+\n+    private void healZombieVillager(@Nonnull ZombieVillager zombieVillager, @Nonnull Player p) {\n+        zombieVillager.setConversionTime(1);\n+\n+        if (SlimefunPlugin.getMinecraftVersion().isAtLeast(MinecraftVersion.MINECRAFT_1_15)) {\n+            zombieVillager.setConversionPlayer(p);\n+        }\n+    }\n+\n+    private void healZombifiedPiglin(@Nonnull Entity zombiePiglin) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b8c2c97766abc475e12ea9aa8fc7b010acdffcec"}, "originalPosition": 65}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a19f767872159d6cb963230c81da0bfa403e89c", "author": {"user": {"login": "svr333", "name": "svr333"}}, "url": "https://github.com/Slimefun/Slimefun4/commit/0a19f767872159d6cb963230c81da0bfa403e89c", "committedDate": "2020-10-05T13:56:54Z", "message": "Use PigZombie over Entity"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyMDg5NDcx", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#pullrequestreview-502089471", "createdAt": "2020-10-05T14:03:45Z", "commit": {"oid": "0a19f767872159d6cb963230c81da0bfa403e89c"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyMTg4ODA4", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#pullrequestreview-502188808", "createdAt": "2020-10-05T15:45:11Z", "commit": {"oid": "0a19f767872159d6cb963230c81da0bfa403e89c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxNTo0NToxMVrOHcjE0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxNTo0NToxMVrOHcjE0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTY5Njg1MA==", "bodyText": "Can you please remove this empty line here?", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#discussion_r499696850", "createdAt": "2020-10-05T15:45:11Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/MagicalZombiePills.java", "diffHunk": "@@ -56,11 +60,12 @@ public EntityInteractHandler getItemHandler() {\n \n                 p.playSound(p.getLocation(), Sound.ENTITY_ZOMBIE_VILLAGER_CONVERTED, 1, 1);\n \n-                ZombieVillager zombieVillager = (ZombieVillager) entity;\n-                zombieVillager.setConversionTime(1);\n+                if (entity instanceof ZombieVillager) {\n+                    healZombieVillager((ZombieVillager) entity, p);\n+                }\n ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0a19f767872159d6cb963230c81da0bfa403e89c"}, "originalPosition": 42}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe50d962700c5093a9534d2a6fac092e150f1e2f", "author": {"user": {"login": "svr333", "name": "svr333"}}, "url": "https://github.com/Slimefun/Slimefun4/commit/fe50d962700c5093a9534d2a6fac092e150f1e2f", "committedDate": "2020-10-05T16:38:58Z", "message": "Remove empty line"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyMjQ1OTU0", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#pullrequestreview-502245954", "createdAt": "2020-10-05T16:54:49Z", "commit": {"oid": "fe50d962700c5093a9534d2a6fac092e150f1e2f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxNjo1NDo0OVrOHclt1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxNjo1NDo0OVrOHclt1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc0MDExOQ==", "bodyText": "Wait a second, I only just realized that you removed the 1.16 version check? O_O", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#discussion_r499740119", "createdAt": "2020-10-05T16:54:49Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/MagicalZombiePills.java", "diffHunk": "@@ -74,4 +78,19 @@ public EntityInteractHandler getItemHandler() {\n     public ItemUseHandler onRightClick() {\n         return PlayerRightClickEvent::cancel;\n     }\n-}\n\\ No newline at end of file\n+\n+    private void healZombieVillager(@Nonnull ZombieVillager zombieVillager, @Nonnull Player p) {\n+        zombieVillager.setConversionTime(1);\n+\n+        if (SlimefunPlugin.getMinecraftVersion().isAtLeast(MinecraftVersion.MINECRAFT_1_15)) {\n+            zombieVillager.setConversionPlayer(p);\n+        }\n+    }\n+\n+    private void healZombifiedPiglin(@Nonnull PigZombie zombiePiglin) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe50d962700c5093a9534d2a6fac092e150f1e2f"}, "originalPosition": 65}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyMjQ5MjE5", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#pullrequestreview-502249219", "createdAt": "2020-10-05T16:59:06Z", "commit": {"oid": "fe50d962700c5093a9534d2a6fac092e150f1e2f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxNjo1OTowN1rOHcl3gw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxNzowOTozNFrOHcmNkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc0MjU5NQ==", "bodyText": "This else if is redundant, it could be simply an else.", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#discussion_r499742595", "createdAt": "2020-10-05T16:59:07Z", "author": {"login": "poma123"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/MagicalZombiePills.java", "diffHunk": "@@ -56,11 +60,11 @@ public EntityInteractHandler getItemHandler() {\n \n                 p.playSound(p.getLocation(), Sound.ENTITY_ZOMBIE_VILLAGER_CONVERTED, 1, 1);\n \n-                ZombieVillager zombieVillager = (ZombieVillager) entity;\n-                zombieVillager.setConversionTime(1);\n-\n-                if (SlimefunPlugin.getMinecraftVersion().isAtLeast(MinecraftVersion.MINECRAFT_1_15)) {\n-                    zombieVillager.setConversionPlayer(p);\n+                if (entity instanceof ZombieVillager) {\n+                    healZombieVillager((ZombieVillager) entity, p);\n+                }\n+                else if (entity instanceof PigZombie) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe50d962700c5093a9534d2a6fac092e150f1e2f"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc0ODI0Mw==", "bodyText": "Also, why are we using PigZombie instead of Piglin? Then the version check should be a bit different.\nIs a zombified piglin entity really an instance of PigZombie?", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#discussion_r499748243", "createdAt": "2020-10-05T17:09:34Z", "author": {"login": "poma123"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/MagicalZombiePills.java", "diffHunk": "@@ -47,7 +51,7 @@ public EntityInteractHandler getItemHandler() {\n         return (e, item, offhand) -> {\n             Entity entity = e.getRightClicked();\n \n-            if (entity.getType() == EntityType.ZOMBIE_VILLAGER) {\n+            if (entity instanceof ZombieVillager || entity instanceof PigZombie) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe50d962700c5093a9534d2a6fac092e150f1e2f"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b237d076bffb17ac319027563c717a79982490a1", "author": {"user": {"login": "svr333", "name": "svr333"}}, "url": "https://github.com/Slimefun/Slimefun4/commit/b237d076bffb17ac319027563c717a79982490a1", "committedDate": "2020-10-05T17:34:00Z", "message": "Add version check"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "868a7e566b0be9358354343e32638b1ccb7337ee", "author": {"user": {"login": "svr333", "name": "svr333"}}, "url": "https://github.com/Slimefun/Slimefun4/commit/868a7e566b0be9358354343e32638b1ccb7337ee", "committedDate": "2020-10-05T17:34:26Z", "message": "Change else if to else"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyMjgyMDI5", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#pullrequestreview-502282029", "createdAt": "2020-10-05T17:44:43Z", "commit": {"oid": "868a7e566b0be9358354343e32638b1ccb7337ee"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxNzo0NDo0M1rOHcnX3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxNzo0NDo0M1rOHcnX3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc2NzI2MQ==", "bodyText": "Please change this back to an else if as stated here D:", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#discussion_r499767261", "createdAt": "2020-10-05T17:44:43Z", "author": {"login": "poma123"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/MagicalZombiePills.java", "diffHunk": "@@ -56,11 +61,11 @@ public EntityInteractHandler getItemHandler() {\n \n                 p.playSound(p.getLocation(), Sound.ENTITY_ZOMBIE_VILLAGER_CONVERTED, 1, 1);\n \n-                ZombieVillager zombieVillager = (ZombieVillager) entity;\n-                zombieVillager.setConversionTime(1);\n-\n-                if (SlimefunPlugin.getMinecraftVersion().isAtLeast(MinecraftVersion.MINECRAFT_1_15)) {\n-                    zombieVillager.setConversionPlayer(p);\n+                if (entity instanceof ZombieVillager) {\n+                    healZombieVillager((ZombieVillager) entity, p);\n+                }\n+                else {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "868a7e566b0be9358354343e32638b1ccb7337ee"}, "originalPosition": 46}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyMjgwODg0", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#pullrequestreview-502280884", "createdAt": "2020-10-05T17:43:08Z", "commit": {"oid": "868a7e566b0be9358354343e32638b1ccb7337ee"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxNzo0MzowOFrOHcnUqQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNVQxNzo0NTo0N1rOHcnaCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc2NjQ0MQ==", "bodyText": "Not a fan of this line here, it's really messy and redundant with the two if statements below.\nI'll suggest an alternative below", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#discussion_r499766441", "createdAt": "2020-10-05T17:43:08Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/MagicalZombiePills.java", "diffHunk": "@@ -47,7 +51,8 @@ public EntityInteractHandler getItemHandler() {\n         return (e, item, offhand) -> {\n             Entity entity = e.getRightClicked();\n \n-            if (entity.getType() == EntityType.ZOMBIE_VILLAGER) {\n+            if (SlimefunPlugin.getMinecraftVersion().isAtLeast(MinecraftVersion.MINECRAFT_1_16) && entity instanceof PigZombie\n+                    || entity instanceof ZombieVillager) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "868a7e566b0be9358354343e32638b1ccb7337ee"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc2NzUyOQ==", "bodyText": "What if you put Line 56-62 into a seperate method like useItem or whatever and then just call this method before the specific heal method, this way we save redundancy even further because we no longer need two different if statements for the same check.", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#discussion_r499767529", "createdAt": "2020-10-05T17:45:13Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/MagicalZombiePills.java", "diffHunk": "@@ -47,7 +51,8 @@ public EntityInteractHandler getItemHandler() {\n         return (e, item, offhand) -> {\n             Entity entity = e.getRightClicked();\n \n-            if (entity.getType() == EntityType.ZOMBIE_VILLAGER) {\n+            if (SlimefunPlugin.getMinecraftVersion().isAtLeast(MinecraftVersion.MINECRAFT_1_16) && entity instanceof PigZombie\n+                    || entity instanceof ZombieVillager) {\n                 Player p = e.getPlayer();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "868a7e566b0be9358354343e32638b1ccb7337ee"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc2NzgxNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            else {\n          \n          \n            \n                            else if (SlimefunPlugin.getMinecraftVersion().isAtLeast(MinecraftVersion.MINECRAFT_1_16) && entity instanceof PigZombie) {", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#discussion_r499767817", "createdAt": "2020-10-05T17:45:47Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/MagicalZombiePills.java", "diffHunk": "@@ -56,11 +61,11 @@ public EntityInteractHandler getItemHandler() {\n \n                 p.playSound(p.getLocation(), Sound.ENTITY_ZOMBIE_VILLAGER_CONVERTED, 1, 1);\n \n-                ZombieVillager zombieVillager = (ZombieVillager) entity;\n-                zombieVillager.setConversionTime(1);\n-\n-                if (SlimefunPlugin.getMinecraftVersion().isAtLeast(MinecraftVersion.MINECRAFT_1_15)) {\n-                    zombieVillager.setConversionPlayer(p);\n+                if (entity instanceof ZombieVillager) {\n+                    healZombieVillager((ZombieVillager) entity, p);\n+                }\n+                else {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "868a7e566b0be9358354343e32638b1ccb7337ee"}, "originalPosition": 46}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94c5068cc2dffa47b0111a96da36cd5bc0f75d51", "author": {"user": {"login": "svr333", "name": "svr333"}}, "url": "https://github.com/Slimefun/Slimefun4/commit/94c5068cc2dffa47b0111a96da36cd5bc0f75d51", "committedDate": "2020-10-05T18:03:50Z", "message": "Move version check\n\nCo-authored-by: TheBusyBiscuit <TheBusyBiscuit@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "997dce897033e82ec57e3036c29d7e1b27ecda51", "author": {"user": {"login": "svr333", "name": "svr333"}}, "url": "https://github.com/Slimefun/Slimefun4/commit/997dce897033e82ec57e3036c29d7e1b27ecda51", "committedDate": "2020-10-05T18:07:56Z", "message": "Extract to method && remove redundant if statement"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyMzc4MTI2", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#pullrequestreview-502378126", "createdAt": "2020-10-05T20:01:49Z", "commit": {"oid": "997dce897033e82ec57e3036c29d7e1b27ecda51"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyMzgwNzE2", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#pullrequestreview-502380716", "createdAt": "2020-10-05T20:05:43Z", "commit": {"oid": "997dce897033e82ec57e3036c29d7e1b27ecda51"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNDA1Mjc2", "url": "https://github.com/Slimefun/Slimefun4/pull/2394#pullrequestreview-502405276", "createdAt": "2020-10-05T20:42:55Z", "commit": {"oid": "997dce897033e82ec57e3036c29d7e1b27ecda51"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2365, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}