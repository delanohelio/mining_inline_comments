{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzODg2ODU2", "number": 1981, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMjowNDoyNlrOEFM1bg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMjoxMzowOFrOEFM7Eg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczODg4NjIyOnYy", "diffSide": "RIGHT", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/core/services/CustomItemDataService.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMjowNDoyNlrOGjSu1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMjowNDoyNlrOGjSu1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2MDI0Nw==", "bodyText": "You should do .hasItemMeta() here (and maybe also add a null-check for the given ItemStack parameter as pointed out before), otherwise you won't gain any performance benefit from this here, since #getItemMeta() (for normal ItemStacks) will create a new instance of ItemMeta and perform a clone operation which is very costly.\nAs Walshy also pointed out, even for ItemStackWrappers this will throw an UnsupportedOperationException now...", "url": "https://github.com/Slimefun/Slimefun4/pull/1981#discussion_r439660247", "createdAt": "2020-06-12T22:04:26Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/core/services/CustomItemDataService.java", "diffHunk": "@@ -45,6 +45,9 @@ public void setItemData(ItemMeta im, String id) {\n     }\n \n     public Optional<String> getItemData(ItemStack item) {\n+        if (item.getItemMeta() == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e989969713d0fc700dd0eba7da148674c7dcb65d"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczODg4NjU1OnYy", "diffSide": "RIGHT", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/core/services/CustomItemDataService.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMjowNDo0MFrOGjSvEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMjowNDo0MFrOGjSvEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2MDMwNw==", "bodyText": "You should check hasItemMeta, just like your exception in getItemMeta says ;)", "url": "https://github.com/Slimefun/Slimefun4/pull/1981#discussion_r439660307", "createdAt": "2020-06-12T22:04:40Z", "author": {"login": "WalshyDev"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/core/services/CustomItemDataService.java", "diffHunk": "@@ -45,6 +45,9 @@ public void setItemData(ItemMeta im, String id) {\n     }\n \n     public Optional<String> getItemData(ItemStack item) {\n+        if (item.getItemMeta() == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e989969713d0fc700dd0eba7da148674c7dcb65d"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczODkwMDE5OnYy", "diffSide": "RIGHT", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/core/services/CustomItemDataService.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMjoxMjo0OFrOGjS3kQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMjoyMzowMVrOGjTCFw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2MjQ4MQ==", "bodyText": "This is redundant, ItemStack#getItemMeta() will never return null, except for ItemStackWrappers but we already handled these in the previous condition. The null-check I suggested was about the ItemStack, not the meta.\nif (item == null || !item.hasItemMeta())", "url": "https://github.com/Slimefun/Slimefun4/pull/1981#discussion_r439662481", "createdAt": "2020-06-12T22:12:48Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/core/services/CustomItemDataService.java", "diffHunk": "@@ -45,7 +45,14 @@ public void setItemData(ItemMeta im, String id) {\n     }\n \n     public Optional<String> getItemData(ItemStack item) {\n-        return getItemData(item.getItemMeta());\n+        if (!item.hasItemMeta()) {\n+            return Optional.empty();\n+        }\n+        ItemMeta meta = item.getItemMeta();\n+        if (meta == null) {\n+            return Optional.empty();\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a232d8285141d86f76f0f3c899c04a99acc5cbe3"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2MzE0Ng==", "bodyText": "why would the item be null", "url": "https://github.com/Slimefun/Slimefun4/pull/1981#discussion_r439663146", "createdAt": "2020-06-12T22:15:29Z", "author": {"login": "PhanaticD"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/core/services/CustomItemDataService.java", "diffHunk": "@@ -45,7 +45,14 @@ public void setItemData(ItemMeta im, String id) {\n     }\n \n     public Optional<String> getItemData(ItemStack item) {\n-        return getItemData(item.getItemMeta());\n+        if (!item.hasItemMeta()) {\n+            return Optional.empty();\n+        }\n+        ItemMeta meta = item.getItemMeta();\n+        if (meta == null) {\n+            return Optional.empty();\n+        }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2MjQ4MQ=="}, "originalCommit": {"oid": "a232d8285141d86f76f0f3c899c04a99acc5cbe3"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2MzQ2OQ==", "bodyText": "If I do .getItemData(null) the ItemStack will be null.", "url": "https://github.com/Slimefun/Slimefun4/pull/1981#discussion_r439663469", "createdAt": "2020-06-12T22:16:42Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/core/services/CustomItemDataService.java", "diffHunk": "@@ -45,7 +45,14 @@ public void setItemData(ItemMeta im, String id) {\n     }\n \n     public Optional<String> getItemData(ItemStack item) {\n-        return getItemData(item.getItemMeta());\n+        if (!item.hasItemMeta()) {\n+            return Optional.empty();\n+        }\n+        ItemMeta meta = item.getItemMeta();\n+        if (meta == null) {\n+            return Optional.empty();\n+        }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2MjQ4MQ=="}, "originalCommit": {"oid": "a232d8285141d86f76f0f3c899c04a99acc5cbe3"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2NDA3MQ==", "bodyText": "it did not have a null check for however long this class has existed before, that seems out of the scope of this PR to change", "url": "https://github.com/Slimefun/Slimefun4/pull/1981#discussion_r439664071", "createdAt": "2020-06-12T22:19:02Z", "author": {"login": "PhanaticD"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/core/services/CustomItemDataService.java", "diffHunk": "@@ -45,7 +45,14 @@ public void setItemData(ItemMeta im, String id) {\n     }\n \n     public Optional<String> getItemData(ItemStack item) {\n-        return getItemData(item.getItemMeta());\n+        if (!item.hasItemMeta()) {\n+            return Optional.empty();\n+        }\n+        ItemMeta meta = item.getItemMeta();\n+        if (meta == null) {\n+            return Optional.empty();\n+        }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2MjQ4MQ=="}, "originalCommit": {"oid": "a232d8285141d86f76f0f3c899c04a99acc5cbe3"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2NTE3NQ==", "bodyText": "Something being broken for a long time doesn't mean you shouldn't fix it.\nAnd it is very well in scope of this PR since your change broke this method. It's only logical to fully fix this then, rather than doing a half-hearted job and fixing it only halfway through, otherwise the issue will only be delayed to a more distant point in time.", "url": "https://github.com/Slimefun/Slimefun4/pull/1981#discussion_r439665175", "createdAt": "2020-06-12T22:23:01Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/core/services/CustomItemDataService.java", "diffHunk": "@@ -45,7 +45,14 @@ public void setItemData(ItemMeta im, String id) {\n     }\n \n     public Optional<String> getItemData(ItemStack item) {\n-        return getItemData(item.getItemMeta());\n+        if (!item.hasItemMeta()) {\n+            return Optional.empty();\n+        }\n+        ItemMeta meta = item.getItemMeta();\n+        if (meta == null) {\n+            return Optional.empty();\n+        }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2MjQ4MQ=="}, "originalCommit": {"oid": "a232d8285141d86f76f0f3c899c04a99acc5cbe3"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczODkwMDY2OnYy", "diffSide": "RIGHT", "path": "src/main/java/io/github/thebusybiscuit/slimefun4/core/services/CustomItemDataService.java", "isResolved": false, "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMjoxMzowOFrOGjS34w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQyMjoyNToxM1rOGjTEBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2MjU2Mw==", "bodyText": "This isn't ever null", "url": "https://github.com/Slimefun/Slimefun4/pull/1981#discussion_r439662563", "createdAt": "2020-06-12T22:13:08Z", "author": {"login": "WalshyDev"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/core/services/CustomItemDataService.java", "diffHunk": "@@ -45,7 +45,14 @@ public void setItemData(ItemMeta im, String id) {\n     }\n \n     public Optional<String> getItemData(ItemStack item) {\n-        return getItemData(item.getItemMeta());\n+        if (!item.hasItemMeta()) {\n+            return Optional.empty();\n+        }\n+        ItemMeta meta = item.getItemMeta();\n+        if (meta == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a232d8285141d86f76f0f3c899c04a99acc5cbe3"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2MzE4MA==", "bodyText": "it could be for wrappers", "url": "https://github.com/Slimefun/Slimefun4/pull/1981#discussion_r439663180", "createdAt": "2020-06-12T22:15:37Z", "author": {"login": "PhanaticD"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/core/services/CustomItemDataService.java", "diffHunk": "@@ -45,7 +45,14 @@ public void setItemData(ItemMeta im, String id) {\n     }\n \n     public Optional<String> getItemData(ItemStack item) {\n-        return getItemData(item.getItemMeta());\n+        if (!item.hasItemMeta()) {\n+            return Optional.empty();\n+        }\n+        ItemMeta meta = item.getItemMeta();\n+        if (meta == null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2MjU2Mw=="}, "originalCommit": {"oid": "a232d8285141d86f76f0f3c899c04a99acc5cbe3"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2MzQ0OQ==", "bodyText": "No in the wrapper you throw an exception now", "url": "https://github.com/Slimefun/Slimefun4/pull/1981#discussion_r439663449", "createdAt": "2020-06-12T22:16:38Z", "author": {"login": "WalshyDev"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/core/services/CustomItemDataService.java", "diffHunk": "@@ -45,7 +45,14 @@ public void setItemData(ItemMeta im, String id) {\n     }\n \n     public Optional<String> getItemData(ItemStack item) {\n-        return getItemData(item.getItemMeta());\n+        if (!item.hasItemMeta()) {\n+            return Optional.empty();\n+        }\n+        ItemMeta meta = item.getItemMeta();\n+        if (meta == null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2MjU2Mw=="}, "originalCommit": {"oid": "a232d8285141d86f76f0f3c899c04a99acc5cbe3"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2MzY0MA==", "bodyText": "In that case this code won't even be reached though since we prevent this from ever being called due to the #hasItemMeta() check from before.", "url": "https://github.com/Slimefun/Slimefun4/pull/1981#discussion_r439663640", "createdAt": "2020-06-12T22:17:20Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/core/services/CustomItemDataService.java", "diffHunk": "@@ -45,7 +45,14 @@ public void setItemData(ItemMeta im, String id) {\n     }\n \n     public Optional<String> getItemData(ItemStack item) {\n-        return getItemData(item.getItemMeta());\n+        if (!item.hasItemMeta()) {\n+            return Optional.empty();\n+        }\n+        ItemMeta meta = item.getItemMeta();\n+        if (meta == null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2MjU2Mw=="}, "originalCommit": {"oid": "a232d8285141d86f76f0f3c899c04a99acc5cbe3"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2MzcxMA==", "bodyText": "busybiscuit told me to explicitly add a check here, that is the only reason I put it", "url": "https://github.com/Slimefun/Slimefun4/pull/1981#discussion_r439663710", "createdAt": "2020-06-12T22:17:36Z", "author": {"login": "PhanaticD"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/core/services/CustomItemDataService.java", "diffHunk": "@@ -45,7 +45,14 @@ public void setItemData(ItemMeta im, String id) {\n     }\n \n     public Optional<String> getItemData(ItemStack item) {\n-        return getItemData(item.getItemMeta());\n+        if (!item.hasItemMeta()) {\n+            return Optional.empty();\n+        }\n+        ItemMeta meta = item.getItemMeta();\n+        if (meta == null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2MjU2Mw=="}, "originalCommit": {"oid": "a232d8285141d86f76f0f3c899c04a99acc5cbe3"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2NDIzOA==", "bodyText": "You only seem to read half of our comments then, I already told you this is redundant and that it isn't nullable. Only the actual ItemStack is.", "url": "https://github.com/Slimefun/Slimefun4/pull/1981#discussion_r439664238", "createdAt": "2020-06-12T22:19:46Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/core/services/CustomItemDataService.java", "diffHunk": "@@ -45,7 +45,14 @@ public void setItemData(ItemMeta im, String id) {\n     }\n \n     public Optional<String> getItemData(ItemStack item) {\n-        return getItemData(item.getItemMeta());\n+        if (!item.hasItemMeta()) {\n+            return Optional.empty();\n+        }\n+        ItemMeta meta = item.getItemMeta();\n+        if (meta == null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2MjU2Mw=="}, "originalCommit": {"oid": "a232d8285141d86f76f0f3c899c04a99acc5cbe3"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2NDg0NA==", "bodyText": "I am reading all your comments, you are just confusing, edits are enabled for maintainers, please change the PR to be as you see fit", "url": "https://github.com/Slimefun/Slimefun4/pull/1981#discussion_r439664844", "createdAt": "2020-06-12T22:21:48Z", "author": {"login": "PhanaticD"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/core/services/CustomItemDataService.java", "diffHunk": "@@ -45,7 +45,14 @@ public void setItemData(ItemMeta im, String id) {\n     }\n \n     public Optional<String> getItemData(ItemStack item) {\n-        return getItemData(item.getItemMeta());\n+        if (!item.hasItemMeta()) {\n+            return Optional.empty();\n+        }\n+        ItemMeta meta = item.getItemMeta();\n+        if (meta == null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2MjU2Mw=="}, "originalCommit": {"oid": "a232d8285141d86f76f0f3c899c04a99acc5cbe3"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2NTY3MA==", "bodyText": "Tell us what's unclear then. There is nothing that can't be discussed or cleared up.", "url": "https://github.com/Slimefun/Slimefun4/pull/1981#discussion_r439665670", "createdAt": "2020-06-12T22:25:13Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/core/services/CustomItemDataService.java", "diffHunk": "@@ -45,7 +45,14 @@ public void setItemData(ItemMeta im, String id) {\n     }\n \n     public Optional<String> getItemData(ItemStack item) {\n-        return getItemData(item.getItemMeta());\n+        if (!item.hasItemMeta()) {\n+            return Optional.empty();\n+        }\n+        ItemMeta meta = item.getItemMeta();\n+        if (meta == null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTY2MjU2Mw=="}, "originalCommit": {"oid": "a232d8285141d86f76f0f3c899c04a99acc5cbe3"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 467, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}