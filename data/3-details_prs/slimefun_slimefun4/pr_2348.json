{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkzNjAxMDE2", "number": 2348, "title": "Pull request for an additional customizable option in grappling hooks", "bodyText": "[+] Added a setting to allow the grappling hook to stay in inventory instead of being dropped on the floor on use\nDescription\nI added an item setting to allow players to set if they want the grappling hook to drop on the floor on use or just stay in the inventory. I did this because I use slimefun on a small server with friends and they complained about the grappling hooks dropping on the floor as annoying\nChanges\n[+] Item Setting named \"stay-in-inv-on-use\"\nRelated Issues\nNone\nChecklist\n\n\n\n I have fully tested the proposed changes and promise that they will not break everything into chaos.\n I have also tested the proposed changes in combination with various popular addons and can confirm my changes do not break them.\n I followed the existing code standards and didn't mess up the formatting.\n I did my best to add documentation to any public classes or methods I added.\n I have added Nonnull and Nullable annotations to my methods to indicate their behaviour for null values\n I added sufficient Unit Tests to cover my code.", "createdAt": "2020-09-26T16:55:32Z", "url": "https://github.com/Slimefun/Slimefun4/pull/2348", "merged": true, "mergeCommit": {"oid": "89ff9d8dc219a4e778f6dddb512b34f275e6693b"}, "closed": true, "closedAt": "2020-09-27T18:13:58Z", "author": {"login": "flaxeneel2"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdMqY8VgH2gAyNDkzNjAxMDE2OmVhYzMxMTc1NDc0N2I3MzdiNWU4Njg4MjAwNmJmMjcwZmE3NGUwNTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNCXt7AFqTQ5NzA5NjgzMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "eac311754747b737b5e86882006bf270fa74e056", "author": {"user": {"login": "flaxeneel2", "name": null}}, "url": "https://github.com/Slimefun/Slimefun4/commit/eac311754747b737b5e86882006bf270fa74e056", "committedDate": "2020-09-26T13:27:35Z", "message": "Grappling hook edit\n\n[+] Added a setting to allow the grappling hook to stay in inventory instead of being dropped on the floor on use"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87eb9cb75ed172e8af0273ad3305fbc69bb722da", "author": {"user": {"login": "flaxeneel2", "name": null}}, "url": "https://github.com/Slimefun/Slimefun4/commit/87eb9cb75ed172e8af0273ad3305fbc69bb722da", "committedDate": "2020-09-26T16:53:36Z", "message": "final commit\n\n[+] desired feature fully implemented\n[+] set the default value to false\n[+] now added option does not mess with despawn-seconds\n[+] added keepinv boolean to the functions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MDE3OTM0", "url": "https://github.com/Slimefun/Slimefun4/pull/2348#pullrequestreview-497017934", "createdAt": "2020-09-26T17:02:27Z", "commit": {"oid": "87eb9cb75ed172e8af0273ad3305fbc69bb722da"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNlQxNzowMjoyN1rOHYhbnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNlQxNzowMzo1MVrOHYhcDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ3NTYxMg==", "bodyText": "Please follow the naming convention for fields, this should be in \"pascal case\", so \"stayInInvOnUse\".\nOther than that I think the name is a little confusing, I think something like consumeOnUse (which would actually be the opposite here) would make more sense and is much more user-friendly.", "url": "https://github.com/Slimefun/Slimefun4/pull/2348#discussion_r495475612", "createdAt": "2020-09-26T17:02:27Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/tools/GrapplingHook.java", "diffHunk": "@@ -22,19 +22,22 @@\n \n public class GrapplingHook extends SimpleSlimefunItem<ItemUseHandler> {\n \n+    private final ItemSetting<Boolean> stayininvonuse = new ItemSetting<>(\"stay-in-inv-on-use\", false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87eb9cb75ed172e8af0273ad3305fbc69bb722da"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ3NTY2OQ==", "bodyText": "Please don't use the boxed Boolean class, use the primitive boolean instead.", "url": "https://github.com/Slimefun/Slimefun4/pull/2348#discussion_r495475669", "createdAt": "2020-09-26T17:03:10Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/tools/GrapplingHook.java", "diffHunk": "@@ -22,19 +22,22 @@\n \n public class GrapplingHook extends SimpleSlimefunItem<ItemUseHandler> {\n \n+    private final ItemSetting<Boolean> stayininvonuse = new ItemSetting<>(\"stay-in-inv-on-use\", false);\n     private final ItemSetting<Integer> despawnTicks = new ItemSetting<>(\"despawn-seconds\", 60);\n \n     public GrapplingHook(Category category, SlimefunItemStack item, RecipeType recipeType, ItemStack[] recipe) {\n         super(category, item, recipeType, recipe);\n \n         addItemSetting(despawnTicks);\n+        addItemSetting(stayininvonuse);\n     }\n \n     @Override\n     public ItemUseHandler getItemHandler() {\n         return e -> {\n             Player p = e.getPlayer();\n             UUID uuid = p.getUniqueId();\n+            Boolean keepininv = stayininvonuse.getValue();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87eb9cb75ed172e8af0273ad3305fbc69bb722da"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ3NTcyNA==", "bodyText": "Pascal case, so keepInInv, or with the suggested reversal: wasConsumed may be more fitting.", "url": "https://github.com/Slimefun/Slimefun4/pull/2348#discussion_r495475724", "createdAt": "2020-09-26T17:03:51Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/GrapplingHookEntity.java", "diffHunk": "@@ -15,13 +15,14 @@\n final class GrapplingHookEntity {\n \n     private final boolean dropItem;\n-\n+    private final boolean keepininv;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87eb9cb75ed172e8af0273ad3305fbc69bb722da"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MDUxODYy", "url": "https://github.com/Slimefun/Slimefun4/pull/2348#pullrequestreview-497051862", "createdAt": "2020-09-27T05:13:33Z", "commit": {"oid": "87eb9cb75ed172e8af0273ad3305fbc69bb722da"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "518f3c2ebcbe6cc4c7c3cd446249b1d160167f0c", "author": {"user": {"login": "flaxeneel2", "name": null}}, "url": "https://github.com/Slimefun/Slimefun4/commit/518f3c2ebcbe6cc4c7c3cd446249b1d160167f0c", "committedDate": "2020-09-27T12:54:35Z", "message": "Made requested changes\n\n[+] Used a better name for the boolean\n[+] replaced Boolean with primitive boolean\n[+] Used pascal naming system"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MDgzMDM2", "url": "https://github.com/Slimefun/Slimefun4/pull/2348#pullrequestreview-497083036", "createdAt": "2020-09-27T13:51:34Z", "commit": {"oid": "518f3c2ebcbe6cc4c7c3cd446249b1d160167f0c"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MDk1MDQ1", "url": "https://github.com/Slimefun/Slimefun4/pull/2348#pullrequestreview-497095045", "createdAt": "2020-09-27T16:56:16Z", "commit": {"oid": "518f3c2ebcbe6cc4c7c3cd446249b1d160167f0c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yN1QxNjo1NjoxN1rOHYokew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yN1QxNjo1Njo1MlrOHYoksA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTU5MjU3MQ==", "bodyText": "Comments should be made on the line above the code, never right next to it.", "url": "https://github.com/Slimefun/Slimefun4/pull/2348#discussion_r495592571", "createdAt": "2020-09-27T16:56:17Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/tools/GrapplingHook.java", "diffHunk": "@@ -47,7 +50,9 @@ public ItemUseHandler getItemHandler() {\n                 ItemStack item = e.getItem();\n \n                 if (item.getType() == Material.LEAD) {\n-                    item.setAmount(item.getAmount() - 1);\n+                    if (consumeOnUseValue) {\n+                        item.setAmount(item.getAmount() - 1); //If consume on use is enabled, this line will take 1 grappling hook out of player's hand", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "518f3c2ebcbe6cc4c7c3cd446249b1d160167f0c"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTU5MjYyNA==", "bodyText": "This comment should be made above the if-statement or inside of it.", "url": "https://github.com/Slimefun/Slimefun4/pull/2348#discussion_r495592624", "createdAt": "2020-09-27T16:56:52Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/listeners/GrapplingHookEntity.java", "diffHunk": "@@ -33,8 +34,10 @@ public Arrow getArrow() {\n \n     public void drop(@Nonnull Location l) {\n         if (dropItem) {\n-            Item item = l.getWorld().dropItem(l, SlimefunItems.GRAPPLING_HOOK.clone());\n-            item.setPickupDelay(16);\n+            if (wasConsumed) {\n+                Item item = l.getWorld().dropItem(l, SlimefunItems.GRAPPLING_HOOK.clone());\n+                item.setPickupDelay(16);\n+            } //If a grappling hook was consumed, then this will drop one on the floor", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "518f3c2ebcbe6cc4c7c3cd446249b1d160167f0c"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a82680b9fa1a0d8d57eaad74438f4dc6e3c7777e", "author": {"user": {"login": "flaxeneel2", "name": null}}, "url": "https://github.com/Slimefun/Slimefun4/commit/a82680b9fa1a0d8d57eaad74438f4dc6e3c7777e", "committedDate": "2020-09-27T17:16:28Z", "message": "commenting fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MDk2Mzcz", "url": "https://github.com/Slimefun/Slimefun4/pull/2348#pullrequestreview-497096373", "createdAt": "2020-09-27T17:17:12Z", "commit": {"oid": "a82680b9fa1a0d8d57eaad74438f4dc6e3c7777e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MDk2ODMw", "url": "https://github.com/Slimefun/Slimefun4/pull/2348#pullrequestreview-497096830", "createdAt": "2020-09-27T17:23:58Z", "commit": {"oid": "a82680b9fa1a0d8d57eaad74438f4dc6e3c7777e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2327, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}