{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzNTA0NDc0", "number": 2473, "title": "Fixes ArmorForge", "bodyText": "Description\n\n#2469 Crafted Elytra Cap in ArmorForge\nhttps://streamable.com/p28b4f\nChanges\n\nMade ArmorForge extend BackpackCrafter instead of MultiBlockMachine\nUsed EnchancedCraftingTable.java as Reference to make further changes\nRelated Issues\n\n\nResolves #2469\nChecklist\n\n\n\n I have fully tested the proposed changes and promise that they will not break everything into chaos.\n I have also tested the proposed changes in combination with various popular addons and can confirm my changes do not break them.\n I followed the existing code standards and didn't mess up the formatting.\n I did my best to add documentation to any public classes or methods I added.\n I have added Nonnull and Nullable annotations to my methods to indicate their behaviour for null values\n I added sufficient Unit Tests to cover my code.", "createdAt": "2020-10-14T16:42:23Z", "url": "https://github.com/Slimefun/Slimefun4/pull/2473", "merged": true, "mergeCommit": {"oid": "28dda7caea8c93e1bc3f37422d37c4bfa4e8239a"}, "closed": true, "closedAt": "2020-10-28T11:15:35Z", "author": {"login": "CURVX"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSfbfCgH2gAyNTAzNTA0NDc0OjE0MzdhOGQ1NTU1MGY4NDFiOThmNDUyOWM2NjkyOWU4ZjJmMjhlZjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdW7OIOAFqTUxODUyOTgxOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1437a8d55550f841b98f4529c66929e8f2f28ef2", "author": {"user": {"login": "CURVX", "name": null}}, "url": "https://github.com/Slimefun/Slimefun4/commit/1437a8d55550f841b98f4529c66929e8f2f28ef2", "committedDate": "2020-10-14T16:04:57Z", "message": "Added FakeInv in ArmorForge"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "35fc23c428a7bbeefde12f3e4c7c263a09bbd281", "author": {"user": {"login": "CURVX", "name": null}}, "url": "https://github.com/Slimefun/Slimefun4/commit/35fc23c428a7bbeefde12f3e4c7c263a09bbd281", "committedDate": "2020-10-14T16:10:49Z", "message": "Redundant import"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExNjM1MjU0", "url": "https://github.com/Slimefun/Slimefun4/pull/2473#pullrequestreview-511635254", "createdAt": "2020-10-19T10:47:33Z", "commit": {"oid": "35fc23c428a7bbeefde12f3e4c7c263a09bbd281"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMDo0NzozNFrOHkIglA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMDo0ODozNVrOHkIi1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzY1MDE5Ng==", "bodyText": "This could use some annotations.", "url": "https://github.com/Slimefun/Slimefun4/pull/2473#discussion_r507650196", "createdAt": "2020-10-19T10:47:34Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/multiblocks/ArmorForge.java", "diffHunk": "@@ -71,26 +66,51 @@ private boolean isCraftable(Inventory inv, ItemStack[] recipe) {\n         return true;\n     }\n \n-    private void craft(Player p, ItemStack output, Inventory inv, Inventory outputInv) {\n-        for (int j = 0; j < 9; j++) {\n-            ItemStack item = inv.getContents()[j];\n+    private Inventory createVirtualInventory(Inventory inv) {\n+        Inventory fakeInv = Bukkit.createInventory(null, 9, \"Fake Inventory\");\n+\n+        for (int j = 0; j < inv.getContents().length; j++) {\n+            ItemStack stack = inv.getContents()[j];\n \n-            if (item != null && item.getType() != Material.AIR) {\n-                ItemUtils.consumeItem(item, true);\n+            if (stack != null) {\n+                stack = stack.clone();\n+                ItemUtils.consumeItem(stack, true);\n             }\n+\n+            fakeInv.setItem(j, stack);\n         }\n \n-        for (int j = 0; j < 4; j++) {\n-            int current = j;\n+        return fakeInv;\n+    }\n+\n+    private void craft(Player p, ItemStack output, Inventory inv, Block dispenser) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35fc23c428a7bbeefde12f3e4c7c263a09bbd281"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzY1MDc3NQ==", "bodyText": "Is this method copied from anywhere?\nI think it would make sense to make it a static utility method or so since we would otherwise face a lot of redundancies and duplications.", "url": "https://github.com/Slimefun/Slimefun4/pull/2473#discussion_r507650775", "createdAt": "2020-10-19T10:48:35Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/multiblocks/ArmorForge.java", "diffHunk": "@@ -71,26 +66,51 @@ private boolean isCraftable(Inventory inv, ItemStack[] recipe) {\n         return true;\n     }\n \n-    private void craft(Player p, ItemStack output, Inventory inv, Inventory outputInv) {\n-        for (int j = 0; j < 9; j++) {\n-            ItemStack item = inv.getContents()[j];\n+    private Inventory createVirtualInventory(Inventory inv) {\n+        Inventory fakeInv = Bukkit.createInventory(null, 9, \"Fake Inventory\");\n+\n+        for (int j = 0; j < inv.getContents().length; j++) {\n+            ItemStack stack = inv.getContents()[j];\n \n-            if (item != null && item.getType() != Material.AIR) {\n-                ItemUtils.consumeItem(item, true);\n+            if (stack != null) {\n+                stack = stack.clone();\n+                ItemUtils.consumeItem(stack, true);\n             }\n+\n+            fakeInv.setItem(j, stack);\n         }\n \n-        for (int j = 0; j < 4; j++) {\n-            int current = j;\n+        return fakeInv;\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35fc23c428a7bbeefde12f3e4c7c263a09bbd281"}, "originalPosition": 60}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f651f960c0bf36fb8fc05cab09a61985e07c1343", "author": {"user": {"login": "CURVX", "name": null}}, "url": "https://github.com/Slimefun/Slimefun4/commit/f651f960c0bf36fb8fc05cab09a61985e07c1343", "committedDate": "2020-10-19T17:26:14Z", "message": "Made ArmorForge extend BackpackCrafter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71ca1458fef2837b77871aaa91e457293981770e", "author": {"user": {"login": "CURVX", "name": null}}, "url": "https://github.com/Slimefun/Slimefun4/commit/71ca1458fef2837b77871aaa91e457293981770e", "committedDate": "2020-10-19T19:02:20Z", "message": "Changes req. by TTB"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4NTI3MDk5", "url": "https://github.com/Slimefun/Slimefun4/pull/2473#pullrequestreview-518527099", "createdAt": "2020-10-28T10:39:59Z", "commit": {"oid": "71ca1458fef2837b77871aaa91e457293981770e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE4NTI5ODE4", "url": "https://github.com/Slimefun/Slimefun4/pull/2473#pullrequestreview-518529818", "createdAt": "2020-10-28T10:43:25Z", "commit": {"oid": "71ca1458fef2837b77871aaa91e457293981770e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2406, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}