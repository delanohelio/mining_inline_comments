{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM4NzQyNzM3", "number": 2015, "title": "Added Magic Pills. The Edited Version", "bodyText": "Description\n\nAdded Magic Pills which are used to cure zombie villagers.\nApproved suggestion #178\nChanges\n\nAdded a new magical gadget called \"Magic Pills\".\nAdded a new recipe for Magic Workbench.\nAdded a new listener for PlayerInteractAtEntityEvent.\nAdded a new handler for the listener mentioned above.\nRelated Issues\n\n\nN/A\nChecklist\n\n\n\n I have fully tested the proposed changes and promise that they will not break everything into chaos.\n I have also tested the proposed changes in combination with various popular addons and can confirm my changes do not break them.\n I followed the existing code standards and didn't mess up the formatting.\n I did my best to add documentation to any public classes or methods I added.\n I added sufficient Unit Tests to cover my code.", "createdAt": "2020-06-23T18:23:56Z", "url": "https://github.com/Slimefun/Slimefun4/pull/2015", "merged": true, "mergeCommit": {"oid": "cccc8f2162e1d421ad6ed56943ae57b538cdb4db"}, "closed": true, "closedAt": "2020-06-24T19:11:31Z", "author": {"login": "LinoxGH"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcuJgZmAH2gAyNDM4NzQyNzM3OjkyMDViMTQzZWRlMjljMmMwYTk1OGYyNjQ0MWZmOTExMzA4MDJkZDI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcub4eJgFqTQzNjc2ODM3MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9205b143ede29c2c0a958f26441ff91130802dd2", "author": {"user": {"login": "LinoxGH", "name": null}}, "url": "https://github.com/Slimefun/Slimefun4/commit/9205b143ede29c2c0a958f26441ff91130802dd2", "committedDate": "2020-06-23T18:11:08Z", "message": "Added Magic Pills.\n\nAdded Magic Pills which are used to cure zombie villagers.\nApproved suggestion #178"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2MTc4Mzk5", "url": "https://github.com/Slimefun/Slimefun4/pull/2015#pullrequestreview-436178399", "createdAt": "2020-06-23T21:40:55Z", "commit": {"oid": "9205b143ede29c2c0a958f26441ff91130802dd2"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMTo0MDo1NVrOGn7odQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yM1QyMTo0NDoxMlrOGn7t0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUyNDY2MQ==", "bodyText": "I think we should include the Entity rather than the Event as the parameter for simplicity.", "url": "https://github.com/Slimefun/Slimefun4/pull/2015#discussion_r444524661", "createdAt": "2020-06-23T21:40:55Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/me/mrCookieSlime/Slimefun/Objects/handlers/EntityInteractHandler.java", "diffHunk": "@@ -0,0 +1,36 @@\n+package me.mrCookieSlime.Slimefun.Objects.handlers;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.entity.Player;\n+import org.bukkit.event.player.PlayerInteractAtEntityEvent;\n+import org.bukkit.inventory.ItemStack;\n+\n+import me.mrCookieSlime.Slimefun.Objects.SlimefunItem.SimpleSlimefunItem;\n+import me.mrCookieSlime.Slimefun.Objects.SlimefunItem.SlimefunItem;\n+\n+/**\n+ * This is triggered when a {@link Player} interacts with an {@link Entity}.\n+ *\n+ * @author Linox\n+ *\n+ * @see ItemHandler\n+ * @see SimpleSlimefunItem\n+ *\n+ */\n+@FunctionalInterface\n+public interface EntityInteractHandler extends ItemHandler {\n+\n+    /**\n+     * This function is triggered when a {@link Player} right clicks with the assigned {@link SlimefunItem}\n+     * in his hand.\n+     *\n+     * @param e\n+     *            The {@link PlayerInteractAtEntityEvent} that was triggered\n+     */\n+    void onInteract(PlayerInteractAtEntityEvent e, ItemStack item);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9205b143ede29c2c0a958f26441ff91130802dd2"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUyNDY3NQ==", "bodyText": "Missing @param for the ItemStack", "url": "https://github.com/Slimefun/Slimefun4/pull/2015#discussion_r444524675", "createdAt": "2020-06-23T21:40:58Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/me/mrCookieSlime/Slimefun/Objects/handlers/EntityInteractHandler.java", "diffHunk": "@@ -0,0 +1,36 @@\n+package me.mrCookieSlime.Slimefun.Objects.handlers;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.entity.Player;\n+import org.bukkit.event.player.PlayerInteractAtEntityEvent;\n+import org.bukkit.inventory.ItemStack;\n+\n+import me.mrCookieSlime.Slimefun.Objects.SlimefunItem.SimpleSlimefunItem;\n+import me.mrCookieSlime.Slimefun.Objects.SlimefunItem.SlimefunItem;\n+\n+/**\n+ * This is triggered when a {@link Player} interacts with an {@link Entity}.\n+ *\n+ * @author Linox\n+ *\n+ * @see ItemHandler\n+ * @see SimpleSlimefunItem\n+ *\n+ */\n+@FunctionalInterface\n+public interface EntityInteractHandler extends ItemHandler {\n+\n+    /**\n+     * This function is triggered when a {@link Player} right clicks with the assigned {@link SlimefunItem}\n+     * in his hand.\n+     *\n+     * @param e\n+     *            The {@link PlayerInteractAtEntityEvent} that was triggered", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9205b143ede29c2c0a958f26441ff91130802dd2"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUyNDgzMA==", "bodyText": "Should probably mention the PlayerInteractAtEntityEvent in the description too.", "url": "https://github.com/Slimefun/Slimefun4/pull/2015#discussion_r444524830", "createdAt": "2020-06-23T21:41:23Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/me/mrCookieSlime/Slimefun/Objects/handlers/EntityInteractHandler.java", "diffHunk": "@@ -0,0 +1,36 @@\n+package me.mrCookieSlime.Slimefun.Objects.handlers;\n+\n+import org.bukkit.entity.Entity;\n+import org.bukkit.entity.Player;\n+import org.bukkit.event.player.PlayerInteractAtEntityEvent;\n+import org.bukkit.inventory.ItemStack;\n+\n+import me.mrCookieSlime.Slimefun.Objects.SlimefunItem.SimpleSlimefunItem;\n+import me.mrCookieSlime.Slimefun.Objects.SlimefunItem.SlimefunItem;\n+\n+/**\n+ * This is triggered when a {@link Player} interacts with an {@link Entity}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9205b143ede29c2c0a958f26441ff91130802dd2"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUyNTI4Mg==", "bodyText": "Why is this 1.14 only?", "url": "https://github.com/Slimefun/Slimefun4/pull/2015#discussion_r444525282", "createdAt": "2020-06-23T21:42:20Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/setup/SlimefunItemSetup.java", "diffHunk": "@@ -775,6 +779,17 @@ public static void setup(SlimefunPlugin plugin) {\n \t\t    .register(plugin);\n \t\t}\n \n+\t\tif (SlimefunPlugin.getMinecraftVersion().isAtLeast(MinecraftVersion.MINECRAFT_1_14)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9205b143ede29c2c0a958f26441ff91130802dd2"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUyNTY0Mg==", "bodyText": "We got ItemUtils.consumeItem... for this", "url": "https://github.com/Slimefun/Slimefun4/pull/2015#discussion_r444525642", "createdAt": "2020-06-23T21:43:09Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/items/magical/MagicPills.java", "diffHunk": "@@ -0,0 +1,59 @@\n+package io.github.thebusybiscuit.slimefun4.implementation.items.magical;\n+\n+import org.bukkit.Sound;\n+import org.bukkit.entity.EntityType;\n+import org.bukkit.entity.Player;\n+import org.bukkit.entity.Villager;\n+import org.bukkit.entity.ZombieVillager;\n+import org.bukkit.inventory.EquipmentSlot;\n+import org.bukkit.inventory.ItemStack;\n+\n+import io.github.thebusybiscuit.slimefun4.api.MinecraftVersion;\n+import me.mrCookieSlime.Slimefun.Lists.RecipeType;\n+import me.mrCookieSlime.Slimefun.Objects.Category;\n+import me.mrCookieSlime.Slimefun.Objects.SlimefunItem.SimpleSlimefunItem;\n+import me.mrCookieSlime.Slimefun.Objects.SlimefunItem.SlimefunItem;\n+import me.mrCookieSlime.Slimefun.Objects.handlers.EntityInteractHandler;\n+import me.mrCookieSlime.Slimefun.SlimefunPlugin;\n+import me.mrCookieSlime.Slimefun.api.SlimefunItemStack;\n+\n+/**\n+ * This {@link SlimefunItem} allows you to convert any {@link ZombieVillager} to\n+ * their {@link Villager} variant.\n+ *\n+ * @author Linox\n+ *\n+ * @see EntityInteractHandler\n+ *\n+ */\n+public class MagicPills extends SimpleSlimefunItem<EntityInteractHandler> {\n+\n+    public MagicPills(Category category, SlimefunItemStack item, RecipeType recipeType, ItemStack[] recipe, ItemStack recipeOutput) {\n+        super(category, item, recipeType, recipe, recipeOutput);\n+    }\n+\n+    @Override\n+    public EntityInteractHandler getItemHandler() {\n+        return (e, item) -> {\n+            if (e.getRightClicked().getType() == EntityType.ZOMBIE_VILLAGER) {\n+                Player p = e.getPlayer();\n+\n+                item.setAmount(item.getAmount() - 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9205b143ede29c2c0a958f26441ff91130802dd2"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDUyNjAzMw==", "bodyText": "This needs to be added to the researches_en.yml translation file too!", "url": "https://github.com/Slimefun/Slimefun4/pull/2015#discussion_r444526033", "createdAt": "2020-06-23T21:44:12Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/implementation/setup/ResearchSetup.java", "diffHunk": "@@ -265,6 +265,7 @@ public static void setupResearches() {\n         register(\"tree_growth_accelerator\", 256, \"Faster Trees\", 18, SlimefunItems.TREE_GROWTH_ACCELERATOR);\n         register(\"industrial_miner\", 95, \"Industrial Mining\", 28, SlimefunItems.INDUSTRIAL_MINER);\n         register(\"advanced_industrial_miner\", 98, \"Better Mining\", 36, SlimefunItems.ADVANCED_INDUSTRIAL_MINER);\n+        register(\"magic_pills\", 257, \"De-Zombification\", 22, SlimefunItems.MAGIC_PILLS);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9205b143ede29c2c0a958f26441ff91130802dd2"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32784574417221684c4931777b7ed168e76dc236", "author": {"user": {"login": "LinoxGH", "name": null}}, "url": "https://github.com/Slimefun/Slimefun4/commit/32784574417221684c4931777b7ed168e76dc236", "committedDate": "2020-06-23T22:06:48Z", "message": "Did the requested changes."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "573068283a16077310aa7bc75d387d979bff0b9f", "author": {"user": {"login": "LinoxGH", "name": null}}, "url": "https://github.com/Slimefun/Slimefun4/commit/573068283a16077310aa7bc75d387d979bff0b9f", "committedDate": "2020-06-23T22:17:14Z", "message": "Added the support for 1.13"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2NzY4Mzcw", "url": "https://github.com/Slimefun/Slimefun4/pull/2015#pullrequestreview-436768370", "createdAt": "2020-06-24T15:35:43Z", "commit": {"oid": "573068283a16077310aa7bc75d387d979bff0b9f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2481, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}