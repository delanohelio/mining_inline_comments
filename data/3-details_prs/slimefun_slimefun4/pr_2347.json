{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkzNTg2NDQz", "number": 2347, "title": "Fixed CargoNetworkTask not checking for other slots before dropping i\u2026", "bodyText": "\u2026tems on ground\nDescription\n\nI added a check for other slots for the CargoNetworkTask before items are dropped. It was necessary as it conflicted with storage units from WildChests, as they always return the item of the storage for the same slot.\nChanges\n\nInstead of dropping the items, I also added a check to add items to the source inventory before dropping them.\nRelated Issues\n\n\nNone\nChecklist\n\n\n\n I have fully tested the proposed changes and promise that they will not break everything into chaos.\n I have also tested the proposed changes in combination with various popular addons and can confirm my changes do not break them.\n I followed the existing code standards and didn't mess up the formatting.\n I did my best to add documentation to any public classes or methods I added.\n I have added Nonnull and Nullable annotations to my methods to indicate their behaviour for null values\n I added sufficient Unit Tests to cover my code.", "createdAt": "2020-09-26T14:51:39Z", "url": "https://github.com/Slimefun/Slimefun4/pull/2347", "merged": true, "mergeCommit": {"oid": "17e324fc8802a57fb591ddc6a413123dc14556f9"}, "closed": true, "closedAt": "2020-09-26T20:55:00Z", "author": {"login": "OmerBenGera"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdMraocAH2gAyNDkzNTg2NDQzOjRkNDllMWVjOGZjNDFlNDdiMWQxNzNmZjUxYjk4NWJkODQyNjhkOTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdMwV9GgFqTQ5NzAyODk0MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4d49e1ec8fc41e47b1d173ff51b985bd84268d94", "author": {"user": {"login": "OmerBenGera", "name": "Ome_R"}}, "url": "https://github.com/Slimefun/Slimefun4/commit/4d49e1ec8fc41e47b1d173ff51b985bd84268d94", "committedDate": "2020-09-26T14:39:20Z", "message": "Fixed CargoNetworkTask not checking for other slots before dropping items on ground"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MDEwMDgz", "url": "https://github.com/Slimefun/Slimefun4/pull/2347#pullrequestreview-497010083", "createdAt": "2020-09-26T14:56:08Z", "commit": {"oid": "4d49e1ec8fc41e47b1d173ff51b985bd84268d94"}, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNlQxNDo1NjowOFrOHYgwHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNlQxNDo1NjowOFrOHYgwHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ2NDQ3Nw==", "bodyText": "This could lead to an IndexOutOfBoundsException. So doing .isEmpty() on the returned map instead would be much safer.", "url": "https://github.com/Slimefun/Slimefun4/pull/2347#discussion_r495464477", "createdAt": "2020-09-26T14:56:08Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/core/networks/cargo/CargoNetworkTask.java", "diffHunk": "@@ -111,7 +111,8 @@ private void routeItems(Location inputNode, Block inputTarget, int frequency, Ma\n                 if (inv.getItem(previousSlot) == null) {\n                     inv.setItem(previousSlot, stack);\n                 }\n-                else {\n+                // Making sure the item cannot be added to another slot before dropping it on ground\n+                else if((stack = inv.addItem(stack).get(0)) != null){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d49e1ec8fc41e47b1d173ff51b985bd84268d94"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MDEwMTg2", "url": "https://github.com/Slimefun/Slimefun4/pull/2347#pullrequestreview-497010186", "createdAt": "2020-09-26T14:57:34Z", "commit": {"oid": "4d49e1ec8fc41e47b1d173ff51b985bd84268d94"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNlQxNDo1NzozNFrOHYgwlg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNlQxNDo1NzozNFrOHYgwlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ2NDU5OA==", "bodyText": "nitpick: Space after if and after the ending closing bracket", "url": "https://github.com/Slimefun/Slimefun4/pull/2347#discussion_r495464598", "createdAt": "2020-09-26T14:57:34Z", "author": {"login": "WalshyDev"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/core/networks/cargo/CargoNetworkTask.java", "diffHunk": "@@ -111,7 +111,8 @@ private void routeItems(Location inputNode, Block inputTarget, int frequency, Ma\n                 if (inv.getItem(previousSlot) == null) {\n                     inv.setItem(previousSlot, stack);\n                 }\n-                else {\n+                // Making sure the item cannot be added to another slot before dropping it on ground\n+                else if((stack = inv.addItem(stack).get(0)) != null){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d49e1ec8fc41e47b1d173ff51b985bd84268d94"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MDExNTEz", "url": "https://github.com/Slimefun/Slimefun4/pull/2347#pullrequestreview-497011513", "createdAt": "2020-09-26T15:18:08Z", "commit": {"oid": "4d49e1ec8fc41e47b1d173ff51b985bd84268d94"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNlQxNToxODowOFrOHYg3lw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNlQxNToxODowOFrOHYg3lw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ2NjM5MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            else if((stack = inv.addItem(stack).get(0)) != null){\n          \n          \n            \n                            else if (!inv.addItem(stack).isEmpty()) {", "url": "https://github.com/Slimefun/Slimefun4/pull/2347#discussion_r495466391", "createdAt": "2020-09-26T15:18:08Z", "author": {"login": "TheBusyBiscuit"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/core/networks/cargo/CargoNetworkTask.java", "diffHunk": "@@ -111,7 +111,8 @@ private void routeItems(Location inputNode, Block inputTarget, int frequency, Ma\n                 if (inv.getItem(previousSlot) == null) {\n                     inv.setItem(previousSlot, stack);\n                 }\n-                else {\n+                // Making sure the item cannot be added to another slot before dropping it on ground\n+                else if((stack = inv.addItem(stack).get(0)) != null){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d49e1ec8fc41e47b1d173ff51b985bd84268d94"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MDE0NDg5", "url": "https://github.com/Slimefun/Slimefun4/pull/2347#pullrequestreview-497014489", "createdAt": "2020-09-26T16:04:50Z", "commit": {"oid": "4d49e1ec8fc41e47b1d173ff51b985bd84268d94"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNlQxNjowNDo1MFrOHYhH8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNlQxNjowNDo1MFrOHYhH8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ3MDU3Nw==", "bodyText": "I think this is a bit messy. Maybe create a variable of inv.addItem().get() and then check if it's null. I don't quite understand how checking if the inventory is empty can duplicate the item though.", "url": "https://github.com/Slimefun/Slimefun4/pull/2347#discussion_r495470577", "createdAt": "2020-09-26T16:04:50Z", "author": {"login": "LinoxGH"}, "path": "src/main/java/io/github/thebusybiscuit/slimefun4/core/networks/cargo/CargoNetworkTask.java", "diffHunk": "@@ -111,7 +111,8 @@ private void routeItems(Location inputNode, Block inputTarget, int frequency, Ma\n                 if (inv.getItem(previousSlot) == null) {\n                     inv.setItem(previousSlot, stack);\n                 }\n-                else {\n+                // Making sure the item cannot be added to another slot before dropping it on ground\n+                else if((stack = inv.addItem(stack).get(0)) != null){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d49e1ec8fc41e47b1d173ff51b985bd84268d94"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MDE1MzMy", "url": "https://github.com/Slimefun/Slimefun4/pull/2347#pullrequestreview-497015332", "createdAt": "2020-09-26T16:17:31Z", "commit": {"oid": "4d49e1ec8fc41e47b1d173ff51b985bd84268d94"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75da0b883a576ab41c9c2829950a91187c6c549f", "author": {"user": {"login": "TheBusyBiscuit", "name": "TheBusyBiscuit"}}, "url": "https://github.com/Slimefun/Slimefun4/commit/75da0b883a576ab41c9c2829950a91187c6c549f", "committedDate": "2020-09-26T20:05:47Z", "message": "Refactored code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MDI4NDEw", "url": "https://github.com/Slimefun/Slimefun4/pull/2347#pullrequestreview-497028410", "createdAt": "2020-09-26T20:13:38Z", "commit": {"oid": "75da0b883a576ab41c9c2829950a91187c6c549f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MDI4OTQx", "url": "https://github.com/Slimefun/Slimefun4/pull/2347#pullrequestreview-497028941", "createdAt": "2020-09-26T20:23:45Z", "commit": {"oid": "75da0b883a576ab41c9c2829950a91187c6c549f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2326, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}