{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQzNzk1NTY4", "number": 8485, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQwNTowNzoxMVrOFIBnWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQxOTozNjoyN1rOFJDErQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzOTU5Mzg0OnYy", "diffSide": "RIGHT", "path": "game-headless/src/main/java/org/triplea/game/server/HeadlessGameRunner.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMlQwNTowNzoxMVrOIJuh_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQxNzozMDoyMFrOILOdaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzA3MDQ2Mw==", "bodyText": "Bots are not able to use AI players, does this make sense to have?", "url": "https://github.com/triplea-game/triplea/pull/8485#discussion_r547070463", "createdAt": "2020-12-22T05:07:11Z", "author": {"login": "DanVanAtta"}, "path": "game-headless/src/main/java/org/triplea/game/server/HeadlessGameRunner.java", "diffHunk": "@@ -17,6 +26,20 @@ public static void main(final String[] args) {\n   }\n \n   private static Injections constructInjections() {\n-    return Injections.builder().engineVersion(new ProductVersionReader().getVersion()).build();\n+    return Injections.builder()\n+        .engineVersion(new ProductVersionReader().getVersion())\n+        .playerTypes(gatherPlayerTypes())\n+        .build();\n+  }\n+\n+  private static Collection<PlayerTypes.Type> gatherPlayerTypes() {\n+    return Stream.of(\n+            PlayerTypes.getBuiltInPlayerTypes(),\n+            List.of(new PlayerTypes.AiType(new DoesNothingAiProvider())),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bba5ba4681c707e88a6219e1a0f0843075a8e83b"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzA3NDEwMg==", "bodyText": "I don't know.  The DoesNothingAi existed in the Headless game before this change so I'm not adding anything new.  I could remove it but I'm not sure how to test to ensure that it isn't actually used.  I do know that PlayerSelectorRow#setDefaultPlayerType requires the DoesNothingAi.  Is that method ever called in the Headless code paths?", "url": "https://github.com/triplea-game/triplea/pull/8485#discussion_r547074102", "createdAt": "2020-12-22T05:22:04Z", "author": {"login": "trevan"}, "path": "game-headless/src/main/java/org/triplea/game/server/HeadlessGameRunner.java", "diffHunk": "@@ -17,6 +26,20 @@ public static void main(final String[] args) {\n   }\n \n   private static Injections constructInjections() {\n-    return Injections.builder().engineVersion(new ProductVersionReader().getVersion()).build();\n+    return Injections.builder()\n+        .engineVersion(new ProductVersionReader().getVersion())\n+        .playerTypes(gatherPlayerTypes())\n+        .build();\n+  }\n+\n+  private static Collection<PlayerTypes.Type> gatherPlayerTypes() {\n+    return Stream.of(\n+            PlayerTypes.getBuiltInPlayerTypes(),\n+            List.of(new PlayerTypes.AiType(new DoesNothingAiProvider())),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzA3MDQ2Mw=="}, "originalCommit": {"oid": "bba5ba4681c707e88a6219e1a0f0843075a8e83b"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODM4MjU1MQ==", "bodyText": "Let's see if this is really needed before merging.", "url": "https://github.com/triplea-game/triplea/pull/8485#discussion_r548382551", "createdAt": "2020-12-24T04:58:40Z", "author": {"login": "DanVanAtta"}, "path": "game-headless/src/main/java/org/triplea/game/server/HeadlessGameRunner.java", "diffHunk": "@@ -17,6 +26,20 @@ public static void main(final String[] args) {\n   }\n \n   private static Injections constructInjections() {\n-    return Injections.builder().engineVersion(new ProductVersionReader().getVersion()).build();\n+    return Injections.builder()\n+        .engineVersion(new ProductVersionReader().getVersion())\n+        .playerTypes(gatherPlayerTypes())\n+        .build();\n+  }\n+\n+  private static Collection<PlayerTypes.Type> gatherPlayerTypes() {\n+    return Stream.of(\n+            PlayerTypes.getBuiltInPlayerTypes(),\n+            List.of(new PlayerTypes.AiType(new DoesNothingAiProvider())),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzA3MDQ2Mw=="}, "originalCommit": {"oid": "bba5ba4681c707e88a6219e1a0f0843075a8e83b"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODM4Mjc2NQ==", "bodyText": "Second question, do bots really need a selection of player types? Isn't this to support the launch screen? If this is needed, are bots broken currently without this?", "url": "https://github.com/triplea-game/triplea/pull/8485#discussion_r548382765", "createdAt": "2020-12-24T04:59:44Z", "author": {"login": "DanVanAtta"}, "path": "game-headless/src/main/java/org/triplea/game/server/HeadlessGameRunner.java", "diffHunk": "@@ -17,6 +26,20 @@ public static void main(final String[] args) {\n   }\n \n   private static Injections constructInjections() {\n-    return Injections.builder().engineVersion(new ProductVersionReader().getVersion()).build();\n+    return Injections.builder()\n+        .engineVersion(new ProductVersionReader().getVersion())\n+        .playerTypes(gatherPlayerTypes())\n+        .build();\n+  }\n+\n+  private static Collection<PlayerTypes.Type> gatherPlayerTypes() {\n+    return Stream.of(\n+            PlayerTypes.getBuiltInPlayerTypes(),\n+            List.of(new PlayerTypes.AiType(new DoesNothingAiProvider())),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzA3MDQ2Mw=="}, "originalCommit": {"oid": "bba5ba4681c707e88a6219e1a0f0843075a8e83b"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODY0MjE1Mw==", "bodyText": "Bots are currently broken as I mentioned in the testing section.\nI removed the does nothing ai line and started a bot.  It looks like it isn't complaining.  I can actually start a game now.", "url": "https://github.com/triplea-game/triplea/pull/8485#discussion_r548642153", "createdAt": "2020-12-24T17:30:20Z", "author": {"login": "trevan"}, "path": "game-headless/src/main/java/org/triplea/game/server/HeadlessGameRunner.java", "diffHunk": "@@ -17,6 +26,20 @@ public static void main(final String[] args) {\n   }\n \n   private static Injections constructInjections() {\n-    return Injections.builder().engineVersion(new ProductVersionReader().getVersion()).build();\n+    return Injections.builder()\n+        .engineVersion(new ProductVersionReader().getVersion())\n+        .playerTypes(gatherPlayerTypes())\n+        .build();\n+  }\n+\n+  private static Collection<PlayerTypes.Type> gatherPlayerTypes() {\n+    return Stream.of(\n+            PlayerTypes.getBuiltInPlayerTypes(),\n+            List.of(new PlayerTypes.AiType(new DoesNothingAiProvider())),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzA3MDQ2Mw=="}, "originalCommit": {"oid": "bba5ba4681c707e88a6219e1a0f0843075a8e83b"}, "originalPosition": 29}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ0ODA4MDgyOnYy", "diffSide": "RIGHT", "path": "game-headless/src/main/java/org/triplea/game/server/HeadlessGameRunner.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQwNDo1Nzo0OVrOIK-mpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQxNzoxNjoyMlrOILN4bg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODM4MjM3Mg==", "bodyText": "I'm quite sure we're not going to deploy custom AIs to bots, for a number of reasons:\n\nnone exist yet\nwe keep bots uniform, if something is going to be baked into the deployment it is effectively part of the code\nwe're fully responsible for bots running, any drop-in AIs are going to be us managing and debugging, at which point it really may as well be part of the main code base (a distributed code base is inherently more complex)\nAIs don't run on bots.", "url": "https://github.com/triplea-game/triplea/pull/8485#discussion_r548382372", "createdAt": "2020-12-24T04:57:49Z", "author": {"login": "DanVanAtta"}, "path": "game-headless/src/main/java/org/triplea/game/server/HeadlessGameRunner.java", "diffHunk": "@@ -17,6 +26,20 @@ public static void main(final String[] args) {\n   }\n \n   private static Injections constructInjections() {\n-    return Injections.builder().engineVersion(new ProductVersionReader().getVersion()).build();\n+    return Injections.builder()\n+        .engineVersion(new ProductVersionReader().getVersion())\n+        .playerTypes(gatherPlayerTypes())\n+        .build();\n+  }\n+\n+  private static Collection<PlayerTypes.Type> gatherPlayerTypes() {\n+    return Stream.of(\n+            PlayerTypes.getBuiltInPlayerTypes(),\n+            List.of(new PlayerTypes.AiType(new DoesNothingAiProvider())),\n+            StreamSupport.stream(ServiceLoader.load(AiProvider.class).spliterator(), false)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bba5ba4681c707e88a6219e1a0f0843075a8e83b"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODYzMjY4Ng==", "bodyText": "I've removed the service provider code.", "url": "https://github.com/triplea-game/triplea/pull/8485#discussion_r548632686", "createdAt": "2020-12-24T17:16:22Z", "author": {"login": "trevan"}, "path": "game-headless/src/main/java/org/triplea/game/server/HeadlessGameRunner.java", "diffHunk": "@@ -17,6 +26,20 @@ public static void main(final String[] args) {\n   }\n \n   private static Injections constructInjections() {\n-    return Injections.builder().engineVersion(new ProductVersionReader().getVersion()).build();\n+    return Injections.builder()\n+        .engineVersion(new ProductVersionReader().getVersion())\n+        .playerTypes(gatherPlayerTypes())\n+        .build();\n+  }\n+\n+  private static Collection<PlayerTypes.Type> gatherPlayerTypes() {\n+    return Stream.of(\n+            PlayerTypes.getBuiltInPlayerTypes(),\n+            List.of(new PlayerTypes.AiType(new DoesNothingAiProvider())),\n+            StreamSupport.stream(ServiceLoader.load(AiProvider.class).spliterator(), false)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODM4MjM3Mg=="}, "originalCommit": {"oid": "bba5ba4681c707e88a6219e1a0f0843075a8e83b"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQ1MDMxODUzOnYy", "diffSide": "RIGHT", "path": "game-headless/src/main/java/org/triplea/game/server/HeadlessGameRunner.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQxOTozNjoyN1rOILTpcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yNFQxOTo0MTowMlrOILT0og==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODcyNzE1NQ==", "bodyText": "nit, looks like it would be more concise and consistent (with   .engineVersion(new ProductVersionReader().getVersion())) to inline this method", "url": "https://github.com/triplea-game/triplea/pull/8485#discussion_r548727155", "createdAt": "2020-12-24T19:36:27Z", "author": {"login": "DanVanAtta"}, "path": "game-headless/src/main/java/org/triplea/game/server/HeadlessGameRunner.java", "diffHunk": "@@ -17,6 +19,13 @@ public static void main(final String[] args) {\n   }\n \n   private static Injections constructInjections() {\n-    return Injections.builder().engineVersion(new ProductVersionReader().getVersion()).build();\n+    return Injections.builder()\n+        .engineVersion(new ProductVersionReader().getVersion())\n+        .playerTypes(gatherPlayerTypes())\n+        .build();\n+  }\n+\n+  private static Collection<PlayerTypes.Type> gatherPlayerTypes() {\n+    return PlayerTypes.getBuiltInPlayerTypes();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cbfb56f0846a488d7b7901480bf52e3de4bd17c8"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODczMDAxOA==", "bodyText": "@DanVanAtta , I just made that change.", "url": "https://github.com/triplea-game/triplea/pull/8485#discussion_r548730018", "createdAt": "2020-12-24T19:41:02Z", "author": {"login": "trevan"}, "path": "game-headless/src/main/java/org/triplea/game/server/HeadlessGameRunner.java", "diffHunk": "@@ -17,6 +19,13 @@ public static void main(final String[] args) {\n   }\n \n   private static Injections constructInjections() {\n-    return Injections.builder().engineVersion(new ProductVersionReader().getVersion()).build();\n+    return Injections.builder()\n+        .engineVersion(new ProductVersionReader().getVersion())\n+        .playerTypes(gatherPlayerTypes())\n+        .build();\n+  }\n+\n+  private static Collection<PlayerTypes.Type> gatherPlayerTypes() {\n+    return PlayerTypes.getBuiltInPlayerTypes();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODcyNzE1NQ=="}, "originalCommit": {"oid": "cbfb56f0846a488d7b7901480bf52e3de4bd17c8"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2677, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}