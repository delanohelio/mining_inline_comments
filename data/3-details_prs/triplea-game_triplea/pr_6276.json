{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA0OTg1NDEx", "number": 6276, "title": "Casualty selector breakup", "bodyText": "Overview\n\nBreaking up casualty selector to new classes\nVery few actual code changes, should be most reviewable commit-by-commit\nAdded some new tests cases for casualty selector inner workings.\n\n\nFunctional Changes\n\n[] New map or map update\n[] New Feature\n[] Feature update or enhancement\n[] Feature Removal\n[x] Code Cleanup or refactor\n[] Configuration Change\n[] Problem fix:  \n[] Other:   \nTesting\n\ndid some smoke testing while verifying various casualty scenarios on different maps\n\n\n\n\nAdditional Review Notes\n\nplease suggest any additional new test cases that would be really good to add to the two new casualty selector tests (f825494)", "createdAt": "2020-04-17T08:06:36Z", "url": "https://github.com/triplea-game/triplea/pull/6276", "merged": true, "mergeCommit": {"oid": "af5fc7d36a17ba8cdc4713a28251e9537228c224"}, "closed": true, "closedAt": "2020-04-17T23:38:28Z", "author": {"login": "DanVanAtta"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYZDwwAH2gAyNDA0OTg1NDExOjQ3ODIyNTkyY2Y5MmU0ZjQ4MDUyZWY2OTY1MzA2NjNhNGIyZjkxYTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcYgwIeAFqTM5NTQyMDgwMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "47822592cf92e4f48052ef696530663a4b2f91a1", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/47822592cf92e4f48052ef696530663a4b2f91a1", "committedDate": "2020-04-17T03:52:00Z", "message": "Break up CasualtySelector.java, isolate functionalities (notably AA)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0d7edf1f9847c83cd9677f1b5bca49924612da79", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/0d7edf1f9847c83cd9677f1b5bca49924612da79", "committedDate": "2020-04-17T04:39:22Z", "message": "Move OrderOfLoss sorting to its own class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "067601e1d50d2e1c96d6216cdc37fb77bf8f653b", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/067601e1d50d2e1c96d6216cdc37fb77bf8f653b", "committedDate": "2020-04-17T04:40:14Z", "message": "Simplify, inline constant value parameter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6144be3addcb8f054a4cc430c83771034fcb1570", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/6144be3addcb8f054a4cc430c83771034fcb1570", "committedDate": "2020-04-17T04:45:42Z", "message": "Introduce parameter object for OOL sorting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb85c6e0bb11b6dcbfeefdedcc5edc06c6bb5e0d", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/bb85c6e0bb11b6dcbfeefdedcc5edc06c6bb5e0d", "committedDate": "2020-04-17T05:02:35Z", "message": "Use empty collection instead of nullable collection."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04c1112d6da394804c40745233589e1a17f4a2b4", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/04c1112d6da394804c40745233589e1a17f4a2b4", "committedDate": "2020-04-17T08:01:20Z", "message": "Add utility factory method to IntegerMap"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6997d3ea38cab386aca4bdb9ba91baa81fb301b", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/a6997d3ea38cab386aca4bdb9ba91baa81fb301b", "committedDate": "2020-04-17T08:01:56Z", "message": "Mark casualty selector classes as utility classes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e43af27e84ff9ffa9f7b661adecd3323642ad457", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/e43af27e84ff9ffa9f7b661adecd3323642ad457", "committedDate": "2020-04-17T08:02:35Z", "message": "Update method reference (fix) in test class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8254944a2030777ad7f36f3d1b8255c7b293644", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/f8254944a2030777ad7f36f3d1b8255c7b293644", "committedDate": "2020-04-17T08:02:40Z", "message": "Add additional test cases for casualty selector, bring in new Napoleonic_Empires test xml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d52db4428ff1ba659d66dddd51f2851ccca23cd8", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/d52db4428ff1ba659d66dddd51f2851ccca23cd8", "committedDate": "2020-04-17T08:07:24Z", "message": "Remove stray comment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1MjQ2ODUy", "url": "https://github.com/triplea-game/triplea/pull/6276#pullrequestreview-395246852", "createdAt": "2020-04-17T08:09:21Z", "commit": {"oid": "d52db4428ff1ba659d66dddd51f2851ccca23cd8"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1NDIwODAw", "url": "https://github.com/triplea-game/triplea/pull/6276#pullrequestreview-395420800", "createdAt": "2020-04-17T12:45:28Z", "commit": {"oid": "6144be3addcb8f054a4cc430c83771034fcb1570"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxMjo0NToyOFrOGHMeow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxMjo0ODoxNlrOGHMkZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDE5NzY2Nw==", "bodyText": "I'm seeing this code snippet an odd amount of times.\nThoughts about extracting this to a helper method?", "url": "https://github.com/triplea-game/triplea/pull/6276#discussion_r410197667", "createdAt": "2020-04-17T12:45:28Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/triplea/delegate/battle/casualty/CasualtyOrderOfLosses.java", "diffHunk": "@@ -276,13 +297,13 @@ static void clearOolCache() {\n       }\n       amphibHashCode *= 31;\n       key =\n-          player.getName()\n+          parameters.player.getName()\n               + \"|\"\n-              + battlesite.getName()\n+              + parameters.battlesite.getName()\n               + \"|\"\n-              + defending\n+              + parameters.defending\n               + \"|\"\n-              + amphibious\n+              + parameters.amphibious\n               + \"|\"\n               + targetsHashCode\n               + \"|\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6144be3addcb8f054a4cc430c83771034fcb1570"}, "originalPosition": 201}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDE5OTE0MQ==", "bodyText": "What is this method for and why isn't the constructor enough?", "url": "https://github.com/triplea-game/triplea/pull/6276#discussion_r410199141", "createdAt": "2020-04-17T12:48:16Z", "author": {"login": "RoiEXLab"}, "path": "java-extras/src/main/java/org/triplea/java/collections/IntegerMap.java", "diffHunk": "@@ -30,6 +30,10 @@ public IntegerMap(final IntegerMap<T> integerMap) {\n     this(integerMap.mapValues);\n   }\n \n+  public static <X> IntegerMap<X> of(final Map<X, Integer> map) {\n+    return new IntegerMap<>(map);\n+  }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04c1112d6da394804c40745233589e1a17f4a2b4"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3499, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}