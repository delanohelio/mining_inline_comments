{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxNjEyMjQz", "number": 8447, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwNToyOToyOFrOFGiElA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwNzozNTo0MVrOFGkLow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyMzk0MDA0OnYy", "diffSide": "LEFT", "path": "game-core/src/main/java/games/strategy/triplea/attachments/TerritoryAttachment.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwNToyOToyOFrOIHlVng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwNToyOToyOFrOIHlVng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDgyMjY4Ng==", "bodyText": "These checks are redundant since setCapital doesn't allow unknown player names.  So ta.getCapital() will either return a null or will return a String that is a valid player name.", "url": "https://github.com/triplea-game/triplea/pull/8447#discussion_r544822686", "createdAt": "2020-12-17T05:29:28Z", "author": {"login": "trevan"}, "path": "game-core/src/main/java/games/strategy/triplea/attachments/TerritoryAttachment.java", "diffHunk": "@@ -78,19 +80,15 @@ public static boolean doWeHaveEnoughCapitalsToProduce(\n    * we find that we don't own. If a capital has no neighbor connections, it will be sent last.\n    */\n   public static @Nullable Territory getFirstOwnedCapitalOrFirstUnownedCapital(\n-      final GamePlayer player, final GameData data) {\n+      final GamePlayer player, final GameMap gameMap) {\n     final List<Territory> capitals = new ArrayList<>();\n     final List<Territory> noNeighborCapitals = new ArrayList<>();\n-    for (final Territory current : data.getMap().getTerritories()) {\n+    for (final Territory current : gameMap.getTerritories()) {\n       final TerritoryAttachment ta = TerritoryAttachment.get(current);\n       if (ta != null && ta.getCapital() != null) {\n-        final GamePlayer whoseCapital = data.getPlayerList().getPlayerId(ta.getCapital());\n-        if (whoseCapital == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6a5f498a77b42f38161d2030ee0ec79ba1e780c"}, "originalPosition": 36}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyNDI4NTc5OnYy", "diffSide": "LEFT", "path": "game-core/src/main/java/games/strategy/triplea/TripleAPlayer.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwNzozNTo0MVrOIHoP5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xN1QwNzozNTo0MVrOIHoP5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDg3MDM3NQ==", "bodyText": "It's a bit amusing this is used almost 20 lines later.   : )\n\"Clean code\" was written in 2008, this code almost certainly predates it. Interesting to see the concept of 'good code' evolve.", "url": "https://github.com/triplea-game/triplea/pull/8447#discussion_r544870375", "createdAt": "2020-12-17T07:35:41Z", "author": {"login": "DanVanAtta"}, "path": "game-core/src/main/java/games/strategy/triplea/TripleAPlayer.java", "diffHunk": "@@ -566,7 +566,6 @@ private void endTurn() {\n     if (getPlayerBridge().isGameOver()) {\n       return;\n     }\n-    final GameData data = getGameData();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7e0d97039ca357cbd44759d0b5e44386d75a648a"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2658, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}