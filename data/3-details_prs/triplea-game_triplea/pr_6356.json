{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDExMjQ1ODQ0", "number": 6356, "title": "Simplify logging logic", "bodyText": "Follow-up to #6351\nNote that there are several ways to \"fix\" this custom logic, but I think simply throwing the first exception is a valid solution\nFunctional Changes\n\n[] New map or map update\n[] New Feature\n[] Feature update or enhancement\n[] Feature Removal\n[x] Code Cleanup or refactor\n[] Configuration Change\n[] Problem fix:  \n[] Other:   \nTesting\n\nNone", "createdAt": "2020-04-30T08:23:42Z", "url": "https://github.com/triplea-game/triplea/pull/6356", "merged": true, "mergeCommit": {"oid": "9f642e0fb9930e0e620f38d5bc41bdf1dd849031"}, "closed": true, "closedAt": "2020-05-02T19:42:25Z", "author": {"login": "RoiEXLab"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABccopz7AH2gAyNDExMjQ1ODQ0OjRhMGNmMGMwYzUxNjRiMjc0YjMwOGM4MjMzN2QwNGJjOTIzNTM4MzY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcdbpMXgFqTQwNDU1NTI2NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4a0cf0c0c5164b274b308c82337d04bc92353836", "author": {"user": {"login": "RoiEXLab", "name": "RoiEX"}}, "url": "https://github.com/triplea-game/triplea/commit/4a0cf0c0c5164b274b308c82337d04bc92353836", "committedDate": "2020-04-30T08:17:50Z", "message": "Simplify logging logic"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NTU1MjU1", "url": "https://github.com/triplea-game/triplea/pull/6356#pullrequestreview-404555255", "createdAt": "2020-05-02T19:42:12Z", "commit": {"oid": "4a0cf0c0c5164b274b308c82337d04bc92353836"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMlQxOTo0MjoxMlrOGPlsBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMlQxOTo0MjoxMlrOGPlsBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODk5OTMwMw==", "bodyText": "nit, we probably should avoid the word \"exception\" from being displayed to users. It makes enough sense, but it's not the typical parlance of a player, they're not developers. It is a odd that the audience for most exceptions/error message is not developers but players.", "url": "https://github.com/triplea-game/triplea/pull/6356#discussion_r418999303", "createdAt": "2020-05-02T19:42:12Z", "author": {"login": "DanVanAtta"}, "path": "game-core/src/main/java/games/strategy/triplea/odds/calculator/ConcurrentBattleCalculator.java", "diffHunk": "@@ -262,52 +255,20 @@ public AggregateResults calculate(\n                           bombarding,\n                           territoryEffects,\n                           retreatWhenOnlyAirLeft,\n-                          currentWorkedRunCount));\n-          list.add(workerResult);\n+                          currentWorkedRunCount)));\n         }\n         runCount -= workerRunCount;\n       }\n       // Wait for all worker futures to complete and combine results\n       final AggregateResults results = new AggregateResults(totalRunCount);\n-      final Set<InterruptedException> interruptExceptions = new HashSet<>();\n-      final Map<String, Set<ExecutionException>> executionExceptions = new HashMap<>();\n       for (final Future<AggregateResults> future : list) {\n         try {\n           final AggregateResults result = future.get();\n           results.addResults(result.getResults());\n         } catch (final InterruptedException e) {\n           Thread.currentThread().interrupt();\n-          interruptExceptions.add(e);\n         } catch (final ExecutionException e) {\n-          final String cause = e.getCause().getLocalizedMessage();\n-          Set<ExecutionException> exceptions = executionExceptions.get(cause);\n-          if (exceptions == null) {\n-            exceptions = new HashSet<>();\n-          }\n-          exceptions.add(e);\n-          executionExceptions.put(cause, exceptions);\n-        }\n-      }\n-      // we don't want to scare the user with 8+ errors all for the same thing\n-      if (!interruptExceptions.isEmpty()) {\n-        log.log(\n-            Level.SEVERE,\n-            interruptExceptions.size() + \" Battle results workers interrupted\",\n-            interruptExceptions.iterator().next());\n-      }\n-      if (!executionExceptions.isEmpty()) {\n-        Exception e = null;\n-        for (final Set<ExecutionException> entry : executionExceptions.values()) {\n-          if (!entry.isEmpty()) {\n-            e = entry.iterator().next();\n-            log.log(\n-                Level.SEVERE,\n-                entry.size() + \" Battle results workers aborted by exception\",\n-                e.getCause());\n-          }\n-        }\n-        if (e != null) {\n-          throw new IllegalStateException(e.getCause());\n+          throw new IllegalStateException(\"Battle results workers aborted by exception\", e);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a0cf0c0c5164b274b308c82337d04bc92353836"}, "originalPosition": 89}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NTU1MjY0", "url": "https://github.com/triplea-game/triplea/pull/6356#pullrequestreview-404555264", "createdAt": "2020-05-02T19:42:19Z", "commit": {"oid": "4a0cf0c0c5164b274b308c82337d04bc92353836"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3539, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}