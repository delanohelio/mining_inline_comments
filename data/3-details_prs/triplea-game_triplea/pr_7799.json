{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkzNzU5OTkz", "number": 7799, "title": "Add preliminary Dockerfile for Node-BB", "bodyText": "Allows for a container to be built\nGetting errors on run\n\nPosting as a draft, help on this branch is welcome.", "createdAt": "2020-09-27T18:40:35Z", "url": "https://github.com/triplea-game/triplea/pull/7799", "merged": true, "mergeCommit": {"oid": "27389f6a5a72460b779f212f1e365a2a9f1ce001"}, "closed": true, "closedAt": "2020-11-03T05:19:20Z", "author": {"login": "DanVanAtta"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdNDc4rgH2gAyNDkzNzU5OTkzOmU5M2UxZGI3NzI1MzE5MzdjY2FjYzUyYzFhOWFjMGQ0NDlmYmIxYzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWuRcFgH2gAyNDkzNzU5OTkzOmMxOTJiZTg2NTU5OWYyYWE2Mjg3OWQ0NGFlODgyYWE0ZjY4YTBkNjE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e93e1db772531937ccacc52c1a9ac0d449fbb1c8", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/e93e1db772531937ccacc52c1a9ac0d449fbb1c8", "committedDate": "2020-09-27T18:39:31Z", "message": "Add preliminary Dockerfile for Node-BB\n\n- Allows for a container to be built\n- Getting errors on run"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3MTMzNjA1", "url": "https://github.com/triplea-game/triplea/pull/7799#pullrequestreview-497133605", "createdAt": "2020-09-28T00:55:03Z", "commit": {"oid": "e93e1db772531937ccacc52c1a9ac0d449fbb1c8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwMDo1NTowM1rOHYrnPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQwMDo1NTowM1rOHYrnPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTY0MjQyOQ==", "bodyText": "I'm not 100% sure if \"nodebb start\" (works without specifying node because of shebang) works as expected inside docker-\nIIRC ./nodebb start just spins up a daemon service and terminates itself soon after.\nThe current systemd script runs /usr/bin/env node loader.js, which spins up the process directly.", "url": "https://github.com/triplea-game/triplea/pull/7799#discussion_r495642429", "createdAt": "2020-09-28T00:55:03Z", "author": {"login": "RoiEXLab"}, "path": "node-bb/Dockerfile", "diffHunk": "@@ -0,0 +1,23 @@\n+FROM node:lts\n+\n+RUN mkdir -p /usr/src/app\n+WORKDIR /usr/src/app\n+\n+ARG NODE_ENV\n+ENV NODE_ENV $NODE_ENV\n+\n+COPY install/package.json /usr/src/app/package.json\n+\n+RUN npm install --only=prod && \\\n+    npm cache clean --force\n+    \n+COPY . /usr/src/app\n+\n+ENV NODE_ENV=production \\\n+    daemon=false \\\n+    silent=false\n+\n+EXPOSE 4567\n+\n+CMD node ./nodebb build ;  node ./nodebb start", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e93e1db772531937ccacc52c1a9ac0d449fbb1c8"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c192be865599f2aa62879d44ae882aa4f68a0d61", "author": {"user": {"login": "bacrossland", "name": "Bryan Crossland"}}, "url": "https://github.com/triplea-game/triplea/commit/c192be865599f2aa62879d44ae882aa4f68a0d61", "committedDate": "2020-10-27T19:38:15Z", "message": "Update Node-BB Dockerfile. Add README.md, and example config.json (#7906)\n\n* NodeBB Dockerfile, README.md, and example config.json\r\n\r\n* Adding more info to the configuration section.\r\n\r\n* Updated README.md and config.json for running Mongo"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3858, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}