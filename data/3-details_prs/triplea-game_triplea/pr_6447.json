{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1NTQwNzMz", "number": 6447, "title": "Add search to moderator access log tab", "bodyText": "Commits\ncommit a1026c8\nInline access log DAO columns and delete AccessLogRecordTest\n\nInlining column names makes the DAO SQL easier to read and maintain.\nThe JDBI data type is already tested when we test the DAO, the test is\nredundant.\n\ncommit 347de6e\nAdd search capability to access log moderator toolbox\n\n\nFunctional Changes\n\n[] New map or map update\n[x] New Feature\n[] Feature update or enhancement\n[] Feature Removal\n[x] Code Cleanup or refactor\n[] Configuration Change\n[] Problem fix:  \n[] Other:   \nTesting\n\nlaunched local lobby with sample data (cd lobby-db; ./load_sample_data)\nconnected to local lobby with test:test\nopened toolbox\ndemo'd search from access log tab\n\n\n\nScreens Shots", "createdAt": "2020-05-09T08:41:47Z", "url": "https://github.com/triplea-game/triplea/pull/6447", "merged": true, "mergeCommit": {"oid": "91cace108c9ca0bfd7f1441d8d0d6cd4de8d63b5"}, "closed": true, "closedAt": "2020-05-09T22:55:57Z", "author": {"login": "DanVanAtta"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcfiWAygH2gAyNDE1NTQwNzMzOmExMDI2YzgxMGY3M2MzNWFlNzExMWU5YTU5YTFiNmQ3NTk2Mzg5Nzk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcfum1TgFqTQwODY5MDE0OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a1026c810f73c35ae7111e9a59a1b6d759638979", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/a1026c810f73c35ae7111e9a59a1b6d759638979", "committedDate": "2020-05-09T08:38:33Z", "message": "Inline access log DAO columns and delete AccessLogRecordTest\n\nInlining column names makes the DAO SQL easier to read and maintain.\nThe JDBI data type is already tested when we test the DAO, the test is\nredundant."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16a690406ba9be2fe6e4eef85883f0add4be7f59", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/16a690406ba9be2fe6e4eef85883f0add4be7f59", "committedDate": "2020-05-09T08:41:24Z", "message": "Add search capability to access log moderator toolbox"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NjI4Njcx", "url": "https://github.com/triplea-game/triplea/pull/6447#pullrequestreview-408628671", "createdAt": "2020-05-09T08:43:14Z", "commit": {"oid": "16a690406ba9be2fe6e4eef85883f0add4be7f59"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQwODo0MzoxNFrOGS5j1w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wOVQwODo0MzoxNFrOGS5j2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ3MDYxNQ==", "bodyText": "Method searchPanel has 56 lines of code (exceeds 30 allowed). Consider refactoring.", "url": "https://github.com/triplea-game/triplea/pull/6447#discussion_r422470615", "createdAt": "2020-05-09T08:43:14Z", "author": {"login": "codeclimate"}, "path": "game-core/src/main/java/games/strategy/engine/lobby/moderator/toolbox/tabs/access/log/AccessLogTab.java", "diffHunk": "@@ -74,4 +84,66 @@ private JTable buildTable(final JButton loadMoreButton) {\n     ButtonColumn.attachButtonColumn(table, 6, accessLogTabActions.banUser());\n     return table;\n   }\n+\n+  private JComponent searchPanel(final JTable table, final JButton loadMoreButton) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "16a690406ba9be2fe6e4eef85883f0add4be7f59"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjQ3MDYxNg==", "bodyText": "Method fetchAccessLogRows has 5 arguments (exceeds 4 allowed). Consider refactoring.", "url": "https://github.com/triplea-game/triplea/pull/6447#discussion_r422470616", "createdAt": "2020-05-09T08:43:14Z", "author": {"login": "codeclimate"}, "path": "http-server/src/main/java/org/triplea/db/dao/access/log/AccessLogDao.java", "diffHunk": "@@ -12,25 +12,25 @@\n public interface AccessLogDao {\n \n   @SqlQuery(\n-      \"select\\n\"\n-          + AccessLogRecord.ACCESS_TIME_COLUMN\n-          + \", \"\n-          + AccessLogRecord.USERNAME_COLUMN\n-          + \", \"\n-          + AccessLogRecord.IP_COLUMN\n-          + \", \"\n-          + AccessLogRecord.SYSTEM_ID_COLUMN\n-          + \", \"\n-          + AccessLogRecord.REGISTERED_COLUMN\n-          + \"\\n\"\n-          + \"from access_log\\n\"\n-          + \"order by \"\n-          + AccessLogRecord.ACCESS_TIME_COLUMN\n-          + \" desc\\n\"\n-          + \"offset :rowOffset rows\\n\"\n-          + \"fetch next :rowCount rows only\")\n+      \"select\"\n+          + \"    access_time,\"\n+          + \"    username,\"\n+          + \"    ip,\"\n+          + \"    system_id,\"\n+          + \"    registered\"\n+          + \"  from access_log\"\n+          + \"  where username like :username\"\n+          + \"     and host(ip) like :ip\"\n+          + \"     and system_id like :systemId\"\n+          + \"  order by access_time desc\"\n+          + \"  offset :rowOffset rows\"\n+          + \"  fetch next :rowCount rows only\")\n   List<AccessLogRecord> fetchAccessLogRows(\n-      @Bind(\"rowOffset\") int rowOffset, @Bind(\"rowCount\") int rowCount);\n+      @Bind(\"rowOffset\") int rowOffset,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "16a690406ba9be2fe6e4eef85883f0add4be7f59"}, "originalPosition": 36}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4NjkwMTQ5", "url": "https://github.com/triplea-game/triplea/pull/6447#pullrequestreview-408690149", "createdAt": "2020-05-09T22:55:47Z", "commit": {"oid": "16a690406ba9be2fe6e4eef85883f0add4be7f59"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3415, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}