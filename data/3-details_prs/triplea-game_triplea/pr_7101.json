{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ3NzI1MzAz", "number": 7101, "title": "Save game compatibility testing", "bodyText": "Adds a test that will download a sample of various save games and verify that they can be loaded. This test is to help ensure that we maintain save-game compatibility. Once we migrate to 3.x and beyond, we will have to empty the list and/or add new save games for 3.x\nImportant note, this testing is not full proof. For example we can still rename fields in GameData or any object serialized as part of GameData and it will be initialized to null when loaded. In such a case we'd only see a NPE when any corresponding code is exercised and not at time of game-data load.\nCommits\ncommit 87fc00d\nExtract test file listing utility to its own class\n\ncommit f579419\nImprove file listing test utility robustness, print folder name if not found and improve variable naming\n\ncommit dfaf707\nAdd a test that will load save-games from test/resources/save-games and tries to load them.\n\nThis test serves as a compatibility check.\n\ncommit 3b54c08\nAdd task to download save-game files from assets & add list of save-game files to be downloaded\n\ncommit 527d42c\nImprove compatibility test, assert various gameData properties are not null after load\n\nIf we change the name of an item in GameData, it will not cause a loading exception but we will get an unexpected null value. This update makes the compatibility check more robust (but still not fool-proof)\n\n\nFunctional Changes\n\n[] New map or map update\n[] New Feature\n[] Feature update or enhancement\n[] Feature Removal\n[] Code Cleanup or refactor\n[] Configuration Change\n[] Problem fix\n[x] Other: test infrastructure  \nTesting\nVerified the following scenarios failed the test:\n\nloaded a 1.9 save game\nchanged  'GameData' SerialVersionUUID\nchanged a field name in Version.java\nchanged a field name in GameData\n\n\nScreens Shots\n\nAdditional Notes to Reviewer\n\nRelease Note", "createdAt": "2020-07-11T06:00:31Z", "url": "https://github.com/triplea-game/triplea/pull/7101", "merged": true, "mergeCommit": {"oid": "ee0682185e8cfbd72a613a232ed2aa4bae033bea"}, "closed": true, "closedAt": "2020-07-11T20:30:39Z", "author": {"login": "DanVanAtta"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczxFL9AH2gAyNDQ3NzI1MzAzOjg3ZmMwMGQ4MGM3MjU2OTJmMTA0MDUxM2YzZWY0YmVhYWY5ZjY2YmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcz9fh2AFqTQ0NjgyNDE1OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "87fc00d80c725692f1040513f3ef4beaaf9f66ba", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/87fc00d80c725692f1040513f3ef4beaaf9f66ba", "committedDate": "2020-07-11T05:07:14Z", "message": "Extract test file listing utility to its own class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f579419632d8a5b8d119de7f884c873d8a9bbb3e", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/f579419632d8a5b8d119de7f884c873d8a9bbb3e", "committedDate": "2020-07-11T05:38:13Z", "message": "Improve file listing test utility robustness, print folder name if not found and improve variable naming"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dfaf707a54ba2ebab3a79f5e8c3df2d00592e210", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/dfaf707a54ba2ebab3a79f5e8c3df2d00592e210", "committedDate": "2020-07-11T05:38:15Z", "message": "Add a test that will load save-games from test/resources/save-games and tries to load them.\n\nThis test serves as a compatibility check."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b54c08e84d351d80a72fc4609f9dae47aac2a62", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/3b54c08e84d351d80a72fc4609f9dae47aac2a62", "committedDate": "2020-07-11T05:38:15Z", "message": "Add task to download save-game files from assets & add list of save-game files to be downloaded"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "527d42c2cce9e06b44d95078e3a21c37371eed47", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/527d42c2cce9e06b44d95078e3a21c37371eed47", "committedDate": "2020-07-11T05:57:57Z", "message": "Improve compatibility test, assert various gameData properties are not null after load\n\nIf we change the name of an item in GameData, it will not cause a loading exception but we will get an unexpected null value. This update makes the compatibility check more robust (but still not fool-proof)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "234208dfacb473920a6020d42b5d5d2379d09192", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/234208dfacb473920a6020d42b5d5d2379d09192", "committedDate": "2020-07-11T06:01:52Z", "message": "Add UnmatchedTest suppression to save-game-compatibility test & @Integration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "247fd5e88aba3378f3bc6d582d5a1020c50efdf8", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/247fd5e88aba3378f3bc6d582d5a1020c50efdf8", "committedDate": "2020-07-11T06:20:41Z", "message": "Add @Integration tag to compatibility test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2ODI0MTQ1", "url": "https://github.com/triplea-game/triplea/pull/7101#pullrequestreview-446824145", "createdAt": "2020-07-11T19:34:39Z", "commit": {"oid": "247fd5e88aba3378f3bc6d582d5a1020c50efdf8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMVQxOTozNDo0MFrOGwOycQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMVQxOTozNDo0MFrOGwOycQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzIyNzEyMQ==", "bodyText": "Might be overkill, but you might want to consider creating a custom ArgumentsProvider.\nIf you combine this with a meta annotation like this:\n@Target({ANNOTATION_TYPE,METHOD})\n@Retention(RUNTIME)\n@ArgumentsSource(CustomArgumentProvider.class)\npublic @interface DirectorySource {\n  String folderName;\n}\nThe ArgumentsProvider could then read out this annotation and provide the folders based on the name.\nIn my opinion a nice use of the API JUnit provides, but as mentioned already potentially overkill for just 2 methods.\nWould avoid the repeated @MethodSource code though", "url": "https://github.com/triplea-game/triplea/pull/7101#discussion_r453227121", "createdAt": "2020-07-11T19:34:40Z", "author": {"login": "RoiEXLab"}, "path": "smoke-testing/src/test/java/games/strategy/engine/data/TestDataFileLister.java", "diffHunk": "@@ -0,0 +1,35 @@\n+package games.strategy.engine.data;\n+\n+import java.io.File;\n+import java.nio.file.Paths;\n+import java.util.Arrays;\n+import java.util.Collection;\n+import java.util.Comparator;\n+import java.util.stream.Collectors;\n+import lombok.experimental.UtilityClass;\n+import org.triplea.java.Postconditions;\n+\n+@UtilityClass\n+class TestDataFileLister {\n+\n+  /**\n+   * Returns a list of files located in folder like: 'test/resources/{folder-name}'.\n+   *\n+   * @param folderName Name of the folder in 'test/resources'\n+   * @return List of all files located in specified folder.\n+   */\n+  Collection<File> listFilesInTestResourcesDirectory(final String folderName) {\n+    return Arrays.stream(findFilesInFolder(folderName).listFiles())\n+        .sorted(Comparator.comparing(File::getName))\n+        .collect(Collectors.toList());\n+  }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "247fd5e88aba3378f3bc6d582d5a1020c50efdf8"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2ODI0MTU4", "url": "https://github.com/triplea-game/triplea/pull/7101#pullrequestreview-446824158", "createdAt": "2020-07-11T19:34:52Z", "commit": {"oid": "247fd5e88aba3378f3bc6d582d5a1020c50efdf8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3213, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}