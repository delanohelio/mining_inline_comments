{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgyNTEyMjA1", "number": 7582, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQwNToyMzoxOVrOEhgruA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQwNToyMzoyMFrOEhgruQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzNTczOTQ0OnYy", "diffSide": "RIGHT", "path": "game-core/src/main/java/games/strategy/engine/data/gameparser/GameParser.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQwNToyMzoxOVrOHO3H8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQwNToyMzoxOVrOHO3H8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTM0NTI2NA==", "bodyText": "Method parseMapPropertiesAndDetails has 59 lines of code (exceeds 50 allowed). Consider refactoring.", "url": "https://github.com/triplea-game/triplea/pull/7582#discussion_r485345264", "createdAt": "2020-09-09T05:23:19Z", "author": {"login": "codeclimate"}, "path": "game-core/src/main/java/games/strategy/engine/data/gameparser/GameParser.java", "diffHunk": "@@ -118,111 +106,80 @@ private GameParser(\n         });\n   }\n \n-  @Nonnull\n-  @VisibleForTesting\n-  public static GameData parse(\n-      final String mapName,\n-      final InputStream stream,\n-      final XmlGameElementMapper xmlGameElementMapper)\n-      throws GameParseException, EngineVersionException {\n-    checkNotNull(mapName);\n-    checkNotNull(stream);\n-    checkNotNull(xmlGameElementMapper);\n-\n-    return new GameParser(new GameData(), mapName, xmlGameElementMapper).parse(stream);\n-  }\n-\n   @Nonnull\n   private GameData parse(final InputStream stream)\n       throws GameParseException, EngineVersionException {\n+\n+    final Collection<SAXParseException> errorsSax = new ArrayList<>();\n     final Element root = XmlReader.parseDom(mapName, stream, errorsSax);\n-    parseMapProperties(root);\n-    parseMapDetails(root);\n-    return data;\n-  }\n \n-  private GameParseException newGameParseException(final String message) {\n-    return newGameParseException(message, null);\n-  }\n+    if (!errorsSax.isEmpty()) {\n+      throw new GameParseException(errorsSax);\n+    }\n \n-  private GameParseException newGameParseException(\n-      final String message, final @Nullable Throwable cause) {\n-    final String gameName = data.getGameName() != null ? data.getGameName() : \"<unknown>\";\n-    return new GameParseException(\n-        String.format(\"map name: '%s', game name: '%s', %s\", mapName, gameName, message), cause);\n+    parseMapPropertiesAndDetails(root);\n+    return data;\n   }\n \n-  private void parseMapProperties(final Element root)\n+  private void parseMapPropertiesAndDetails(final Element root)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "754083366eeca81bb3f673bbebe856749a476261"}, "originalPosition": 119}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAzNTczOTQ1OnYy", "diffSide": "RIGHT", "path": "game-core/src/main/java/games/strategy/engine/data/gameparser/GameParser.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQwNToyMzoyMFrOHO3H8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wOVQwNToyMzoyMFrOHO3H8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTM0NTI2Ng==", "bodyText": "Method parseMapPropertiesAndDetails has a Cognitive Complexity of 11 (exceeds 7 allowed). Consider refactoring.", "url": "https://github.com/triplea-game/triplea/pull/7582#discussion_r485345266", "createdAt": "2020-09-09T05:23:20Z", "author": {"login": "codeclimate"}, "path": "game-core/src/main/java/games/strategy/engine/data/gameparser/GameParser.java", "diffHunk": "@@ -118,111 +106,80 @@ private GameParser(\n         });\n   }\n \n-  @Nonnull\n-  @VisibleForTesting\n-  public static GameData parse(\n-      final String mapName,\n-      final InputStream stream,\n-      final XmlGameElementMapper xmlGameElementMapper)\n-      throws GameParseException, EngineVersionException {\n-    checkNotNull(mapName);\n-    checkNotNull(stream);\n-    checkNotNull(xmlGameElementMapper);\n-\n-    return new GameParser(new GameData(), mapName, xmlGameElementMapper).parse(stream);\n-  }\n-\n   @Nonnull\n   private GameData parse(final InputStream stream)\n       throws GameParseException, EngineVersionException {\n+\n+    final Collection<SAXParseException> errorsSax = new ArrayList<>();\n     final Element root = XmlReader.parseDom(mapName, stream, errorsSax);\n-    parseMapProperties(root);\n-    parseMapDetails(root);\n-    return data;\n-  }\n \n-  private GameParseException newGameParseException(final String message) {\n-    return newGameParseException(message, null);\n-  }\n+    if (!errorsSax.isEmpty()) {\n+      throw new GameParseException(errorsSax);\n+    }\n \n-  private GameParseException newGameParseException(\n-      final String message, final @Nullable Throwable cause) {\n-    final String gameName = data.getGameName() != null ? data.getGameName() : \"<unknown>\";\n-    return new GameParseException(\n-        String.format(\"map name: '%s', game name: '%s', %s\", mapName, gameName, message), cause);\n+    parseMapPropertiesAndDetails(root);\n+    return data;\n   }\n \n-  private void parseMapProperties(final Element root)\n+  private void parseMapPropertiesAndDetails(final Element root)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "754083366eeca81bb3f673bbebe856749a476261"}, "originalPosition": 119}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2937, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}