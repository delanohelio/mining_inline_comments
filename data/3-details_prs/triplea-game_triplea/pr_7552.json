{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgwNjE0Nzkx", "number": 7552, "title": "Reduce state in GameChooser & Apply Strangler to Shallow Parsing", "bodyText": "Stop keeping tracking of a fully parsed vs shallow parsed game data in game chooser.\nInstead we'll return a fully parsed game data when requested and otherwise\nwe keep track of the shallow parsed data. It turns out the shallow parsed data is\njust the game name.\n\n\nExtract shallow parsing to its own module so that later we can swap out\nthe implementation (strangler pattern). As part of this we can simplify the API\nof shallow parsing since we only need the game data name.\n\n\nReduce severity level for invalid maps from 'SEVERE' to 'WARN'. Bad map\ndata we do want reported to users but they are not actionable bug reports\nfor us generally (users who are working on new maps would expect to see problems).\n\n\nThis update changes error handling behavior such that if a map has a parse error we do\nnot deselect it from the game chooser. This is a bit forward looking as eventually\na shallow parse will not reveal any errors anyways. It would make sense to get\na deep parse only when selecting a game map and seeing errors then.\nThis update does reduce game performance in the map selection as we do a game parse\nwhenever clicking any new game selection items. We'll need to revisit this to\nsee if and how that can and/or should be improved later.\n\nTesting\n\nScreens Shots\n\nAdditional Notes to Reviewer\n\nRelease Note", "createdAt": "2020-09-05T23:11:01Z", "url": "https://github.com/triplea-game/triplea/pull/7552", "merged": true, "mergeCommit": {"oid": "196584a03970c0fc1fb4ea4404b759da1e576663"}, "closed": true, "closedAt": "2020-09-05T23:59:05Z", "author": {"login": "DanVanAtta"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdGCDD2AH2gAyNDgwNjE0NzkxOjVlNmVhYjgwYTZhOWI2NGQ2ODYyOGQ5NjVlOGJhZjU2NjgyMjUyYWI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdH219ZgFqTQ4Njg5MjMyNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5e6eab80a6a9b64d68628d965e8baf56682252ab", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/5e6eab80a6a9b64d68628d965e8baf56682252ab", "committedDate": "2020-09-05T23:03:56Z", "message": "Reduce state in GameChooser & Apply Strangler to Shallow Parsing\n\n1. Stop keeping tracking of a fully parsed vs shallow parsed game data in game chooser.\n  Instead we'll return a fully parsed game data when requested and otherwise\n  we keep track of the shallow parsed data. It turns out the shallow parsed data is\n  just the game name.\n\n2. Extract shallow parsing to its own module so that later we can swap out\n  the implementation (strangler pattern). As part of this we can simplify the API\n  of shallow parsing since we only need the game data name.\n\n3. Reduce severity level for invalid maps from 'SEVERE' to 'WARN'. Bad map\n  data we do want reported to users but they are not actionable bug reports\n  for us generally (users who are working on new maps would expect to see problems).\n\nThis update changes error handling behavior such that if a map has a parse error we do\nnot deselect it from the game chooser. This is a bit forward looking as eventually\na shallow parse will not reveal any errors anyways. It would make sense to get\na deep parse only when selecting a game map and seeing errors then.\n\nThis update does reduce game performance in the map selection as we do a game parse\nwhenever clicking any new game selection items. We'll need to revisit this to\nsee if and how that can and/or should be improved later."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2ODkxMzc2", "url": "https://github.com/triplea-game/triplea/pull/7552#pullrequestreview-486891376", "createdAt": "2020-09-11T15:07:23Z", "commit": {"oid": "5e6eab80a6a9b64d68628d965e8baf56682252ab"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2ODkyMzI1", "url": "https://github.com/triplea-game/triplea/pull/7552#pullrequestreview-486892325", "createdAt": "2020-09-11T15:08:28Z", "commit": {"oid": "5e6eab80a6a9b64d68628d965e8baf56682252ab"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxNTowODoyOFrOHQi0OQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMVQxNTowODoyOFrOHQi0OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzEwOTY4OQ==", "bodyText": "Also a consideration:\nNow that GameChooserEntry is no longer a thing this class could get renamed", "url": "https://github.com/triplea-game/triplea/pull/7552#discussion_r487109689", "createdAt": "2020-09-11T15:08:28Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/engine/framework/ui/DefaultGameChooserEntry.java", "diffHunk": "@@ -4,126 +4,67 @@\n import games.strategy.engine.data.GameData;\n import games.strategy.engine.data.GameParseException;\n import games.strategy.engine.data.gameparser.GameParser;\n-import games.strategy.triplea.Constants;\n+import games.strategy.engine.data.gameparser.ShallowGameParser;\n import java.io.IOException;\n import java.io.InputStream;\n import java.net.URI;\n-import java.util.Objects;\n import java.util.Optional;\n import java.util.logging.Level;\n-import javax.annotation.Nonnull;\n+import lombok.EqualsAndHashCode;\n+import lombok.Getter;\n import lombok.extern.java.Log;\n import org.triplea.java.UrlStreams;\n \n @Log\n-final class DefaultGameChooserEntry implements GameChooserEntry {\n-  private final URI url;\n-  @Nonnull private GameData gameData;\n-  private boolean gameDataFullyLoaded = false;\n-  private final String gameNameAndMapNameProperty;\n+@EqualsAndHashCode(of = \"uri\")\n+@Getter\n+public class DefaultGameChooserEntry implements Comparable<DefaultGameChooserEntry> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5e6eab80a6a9b64d68628d965e8baf56682252ab"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3980, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}