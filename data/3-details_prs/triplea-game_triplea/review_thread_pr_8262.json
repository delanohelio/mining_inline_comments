{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI2OTU4NDQz", "number": 8262, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwMjo0NzoxN1rOE9dRJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwMjo1MDowOVrOE9dS6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyODc4MTE3OnYy", "diffSide": "RIGHT", "path": "game-core/src/main/java/games/strategy/engine/data/changefactory/units/BombingUnitDamageChange.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwMjo0NzoxN1rOH6KAJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwNToyNToxM1rOH6MSNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDc0MzMzMw==", "bodyText": "What is undo hits representing?", "url": "https://github.com/triplea-game/triplea/pull/8262#discussion_r530743333", "createdAt": "2020-11-26T02:47:17Z", "author": {"login": "DanVanAtta"}, "path": "game-core/src/main/java/games/strategy/engine/data/changefactory/units/BombingUnitDamageChange.java", "diffHunk": "@@ -0,0 +1,71 @@\n+package games.strategy.engine.data.changefactory.units;\n+\n+import games.strategy.engine.data.Change;\n+import games.strategy.engine.data.GameData;\n+import games.strategy.engine.data.Territory;\n+import games.strategy.engine.data.Unit;\n+import java.util.Collection;\n+import java.util.UUID;\n+import java.util.stream.Collectors;\n+import org.triplea.java.collections.IntegerMap;\n+\n+/**\n+ * A game data change that captures the damage caused to a collection of units by a bombing attack.\n+ */\n+public class BombingUnitDamageChange extends Change {\n+  private static final long serialVersionUID = 7093658184880237574L;\n+  private final IntegerMap<String> hits;\n+  private final IntegerMap<String> undoHits;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a0484e2de95f8b60b1483f87f8664d8342b2774"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDc0NTA0MQ==", "bodyText": "undoHits represents the inverse of what is happening in this change.  Each change object has an \"undo\" version of it.", "url": "https://github.com/triplea-game/triplea/pull/8262#discussion_r530745041", "createdAt": "2020-11-26T02:54:20Z", "author": {"login": "trevan"}, "path": "game-core/src/main/java/games/strategy/engine/data/changefactory/units/BombingUnitDamageChange.java", "diffHunk": "@@ -0,0 +1,71 @@\n+package games.strategy.engine.data.changefactory.units;\n+\n+import games.strategy.engine.data.Change;\n+import games.strategy.engine.data.GameData;\n+import games.strategy.engine.data.Territory;\n+import games.strategy.engine.data.Unit;\n+import java.util.Collection;\n+import java.util.UUID;\n+import java.util.stream.Collectors;\n+import org.triplea.java.collections.IntegerMap;\n+\n+/**\n+ * A game data change that captures the damage caused to a collection of units by a bombing attack.\n+ */\n+public class BombingUnitDamageChange extends Change {\n+  private static final long serialVersionUID = 7093658184880237574L;\n+  private final IntegerMap<String> hits;\n+  private final IntegerMap<String> undoHits;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDc0MzMzMw=="}, "originalCommit": {"oid": "1a0484e2de95f8b60b1483f87f8664d8342b2774"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDc0NjMyOQ==", "bodyText": "The change objects call it \"invert\".  You can see it being used in the invert method.", "url": "https://github.com/triplea-game/triplea/pull/8262#discussion_r530746329", "createdAt": "2020-11-26T02:59:14Z", "author": {"login": "trevan"}, "path": "game-core/src/main/java/games/strategy/engine/data/changefactory/units/BombingUnitDamageChange.java", "diffHunk": "@@ -0,0 +1,71 @@\n+package games.strategy.engine.data.changefactory.units;\n+\n+import games.strategy.engine.data.Change;\n+import games.strategy.engine.data.GameData;\n+import games.strategy.engine.data.Territory;\n+import games.strategy.engine.data.Unit;\n+import java.util.Collection;\n+import java.util.UUID;\n+import java.util.stream.Collectors;\n+import org.triplea.java.collections.IntegerMap;\n+\n+/**\n+ * A game data change that captures the damage caused to a collection of units by a bombing attack.\n+ */\n+public class BombingUnitDamageChange extends Change {\n+  private static final long serialVersionUID = 7093658184880237574L;\n+  private final IntegerMap<String> hits;\n+  private final IntegerMap<String> undoHits;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDc0MzMzMw=="}, "originalCommit": {"oid": "1a0484e2de95f8b60b1483f87f8664d8342b2774"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDc4MDcyNQ==", "bodyText": "What would you think to rename:\n'hits' -> 'newHits' | 'hitsAfterChange'\n'undoHits' -> 'oldHits' | 'hitsBeforeChange' | 'originalHits'\nIt looks like other change objects use 'new' & 'old' for naming. The 'undoHits' is not the best name, not really clear whether it is the original hits or a delta to compute the original hits.", "url": "https://github.com/triplea-game/triplea/pull/8262#discussion_r530780725", "createdAt": "2020-11-26T05:25:13Z", "author": {"login": "DanVanAtta"}, "path": "game-core/src/main/java/games/strategy/engine/data/changefactory/units/BombingUnitDamageChange.java", "diffHunk": "@@ -0,0 +1,71 @@\n+package games.strategy.engine.data.changefactory.units;\n+\n+import games.strategy.engine.data.Change;\n+import games.strategy.engine.data.GameData;\n+import games.strategy.engine.data.Territory;\n+import games.strategy.engine.data.Unit;\n+import java.util.Collection;\n+import java.util.UUID;\n+import java.util.stream.Collectors;\n+import org.triplea.java.collections.IntegerMap;\n+\n+/**\n+ * A game data change that captures the damage caused to a collection of units by a bombing attack.\n+ */\n+public class BombingUnitDamageChange extends Change {\n+  private static final long serialVersionUID = 7093658184880237574L;\n+  private final IntegerMap<String> hits;\n+  private final IntegerMap<String> undoHits;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDc0MzMzMw=="}, "originalCommit": {"oid": "1a0484e2de95f8b60b1483f87f8664d8342b2774"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyODc4MjIxOnYy", "diffSide": "RIGHT", "path": "game-core/src/main/java/games/strategy/engine/data/changefactory/units/BombingUnitDamageChange.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwMjo0Nzo1NlrOH6KAtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwNToyMToyMVrOH6MOXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDc0MzQ3OA==", "bodyText": "Any thoughts to use an @AllArgsConstructor(visibility = AccessLevel.PRIVATE) here to avoid the manually written out constructor?", "url": "https://github.com/triplea-game/triplea/pull/8262#discussion_r530743478", "createdAt": "2020-11-26T02:47:56Z", "author": {"login": "DanVanAtta"}, "path": "game-core/src/main/java/games/strategy/engine/data/changefactory/units/BombingUnitDamageChange.java", "diffHunk": "@@ -0,0 +1,71 @@\n+package games.strategy.engine.data.changefactory.units;\n+\n+import games.strategy.engine.data.Change;\n+import games.strategy.engine.data.GameData;\n+import games.strategy.engine.data.Territory;\n+import games.strategy.engine.data.Unit;\n+import java.util.Collection;\n+import java.util.UUID;\n+import java.util.stream.Collectors;\n+import org.triplea.java.collections.IntegerMap;\n+\n+/**\n+ * A game data change that captures the damage caused to a collection of units by a bombing attack.\n+ */\n+public class BombingUnitDamageChange extends Change {\n+  private static final long serialVersionUID = 7093658184880237574L;\n+  private final IntegerMap<String> hits;\n+  private final IntegerMap<String> undoHits;\n+  private final Collection<String> territoriesToNotify;\n+\n+  private BombingUnitDamageChange(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a0484e2de95f8b60b1483f87f8664d8342b2774"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDc0NTQxOA==", "bodyText": "I could.  This is just copied code so I didn't make any major changes except the non-primitive -> primitive change.", "url": "https://github.com/triplea-game/triplea/pull/8262#discussion_r530745418", "createdAt": "2020-11-26T02:55:45Z", "author": {"login": "trevan"}, "path": "game-core/src/main/java/games/strategy/engine/data/changefactory/units/BombingUnitDamageChange.java", "diffHunk": "@@ -0,0 +1,71 @@\n+package games.strategy.engine.data.changefactory.units;\n+\n+import games.strategy.engine.data.Change;\n+import games.strategy.engine.data.GameData;\n+import games.strategy.engine.data.Territory;\n+import games.strategy.engine.data.Unit;\n+import java.util.Collection;\n+import java.util.UUID;\n+import java.util.stream.Collectors;\n+import org.triplea.java.collections.IntegerMap;\n+\n+/**\n+ * A game data change that captures the damage caused to a collection of units by a bombing attack.\n+ */\n+public class BombingUnitDamageChange extends Change {\n+  private static final long serialVersionUID = 7093658184880237574L;\n+  private final IntegerMap<String> hits;\n+  private final IntegerMap<String> undoHits;\n+  private final Collection<String> territoriesToNotify;\n+\n+  private BombingUnitDamageChange(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDc0MzQ3OA=="}, "originalCommit": {"oid": "1a0484e2de95f8b60b1483f87f8664d8342b2774"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDc3OTc0MQ==", "bodyText": "Moving code is one thing, in this case we are re-writing and in my 2 cents treat this is as new code.", "url": "https://github.com/triplea-game/triplea/pull/8262#discussion_r530779741", "createdAt": "2020-11-26T05:21:21Z", "author": {"login": "DanVanAtta"}, "path": "game-core/src/main/java/games/strategy/engine/data/changefactory/units/BombingUnitDamageChange.java", "diffHunk": "@@ -0,0 +1,71 @@\n+package games.strategy.engine.data.changefactory.units;\n+\n+import games.strategy.engine.data.Change;\n+import games.strategy.engine.data.GameData;\n+import games.strategy.engine.data.Territory;\n+import games.strategy.engine.data.Unit;\n+import java.util.Collection;\n+import java.util.UUID;\n+import java.util.stream.Collectors;\n+import org.triplea.java.collections.IntegerMap;\n+\n+/**\n+ * A game data change that captures the damage caused to a collection of units by a bombing attack.\n+ */\n+public class BombingUnitDamageChange extends Change {\n+  private static final long serialVersionUID = 7093658184880237574L;\n+  private final IntegerMap<String> hits;\n+  private final IntegerMap<String> undoHits;\n+  private final Collection<String> territoriesToNotify;\n+\n+  private BombingUnitDamageChange(", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDc0MzQ3OA=="}, "originalCommit": {"oid": "1a0484e2de95f8b60b1483f87f8664d8342b2774"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyODc4NTY4OnYy", "diffSide": "RIGHT", "path": "game-core/src/main/java/games/strategy/engine/data/changefactory/units/BombingUnitDamageChange.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwMjo1MDowOVrOH6KCsg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNlQwNToyNzoxNFrOH6MUMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDc0Mzk4Ng==", "bodyText": "Is the 'toString' required? Is it used anywhere to print text for users? If not, is it helpful?", "url": "https://github.com/triplea-game/triplea/pull/8262#discussion_r530743986", "createdAt": "2020-11-26T02:50:09Z", "author": {"login": "DanVanAtta"}, "path": "game-core/src/main/java/games/strategy/engine/data/changefactory/units/BombingUnitDamageChange.java", "diffHunk": "@@ -0,0 +1,71 @@\n+package games.strategy.engine.data.changefactory.units;\n+\n+import games.strategy.engine.data.Change;\n+import games.strategy.engine.data.GameData;\n+import games.strategy.engine.data.Territory;\n+import games.strategy.engine.data.Unit;\n+import java.util.Collection;\n+import java.util.UUID;\n+import java.util.stream.Collectors;\n+import org.triplea.java.collections.IntegerMap;\n+\n+/**\n+ * A game data change that captures the damage caused to a collection of units by a bombing attack.\n+ */\n+public class BombingUnitDamageChange extends Change {\n+  private static final long serialVersionUID = 7093658184880237574L;\n+  private final IntegerMap<String> hits;\n+  private final IntegerMap<String> undoHits;\n+  private final Collection<String> territoriesToNotify;\n+\n+  private BombingUnitDamageChange(\n+      final IntegerMap<String> hits,\n+      final IntegerMap<String> undoHits,\n+      final Collection<String> territoriesToNotify) {\n+    this.hits = hits;\n+    this.undoHits = undoHits;\n+    this.territoriesToNotify = territoriesToNotify;\n+  }\n+\n+  public BombingUnitDamageChange(\n+      final IntegerMap<Unit> hits, final Collection<Territory> territoriesToNotify) {\n+    this.hits = new IntegerMap<>();\n+    this.undoHits = new IntegerMap<>();\n+    hits.entrySet()\n+        .forEach(\n+            entry -> {\n+              this.hits.put(entry.getKey().getId().toString(), entry.getValue());\n+              this.undoHits.put(entry.getKey().getId().toString(), entry.getKey().getUnitDamage());\n+            });\n+    this.territoriesToNotify =\n+        territoriesToNotify.stream().map(Territory::getName).collect(Collectors.toList());\n+  }\n+\n+  @Override\n+  protected void perform(final GameData data) {\n+    hits.keySet()\n+        .forEach(\n+            unitId -> {\n+              data.getUnits().get(UUID.fromString(unitId)).setUnitDamage(hits.getInt(unitId));\n+            });\n+    this.territoriesToNotify.forEach(\n+        territory -> {\n+          data.getMap().getTerritory(territory).notifyChanged();\n+        });\n+  }\n+\n+  @Override\n+  public Change invert() {\n+    return new BombingUnitDamageChange(undoHits, hits, territoriesToNotify);\n+  }\n+\n+  @Override\n+  public String toString() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a0484e2de95f8b60b1483f87f8664d8342b2774"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDc0NTQ3Ng==", "bodyText": "No idea.  Several change objects have a toString.  Several don't.", "url": "https://github.com/triplea-game/triplea/pull/8262#discussion_r530745476", "createdAt": "2020-11-26T02:56:02Z", "author": {"login": "trevan"}, "path": "game-core/src/main/java/games/strategy/engine/data/changefactory/units/BombingUnitDamageChange.java", "diffHunk": "@@ -0,0 +1,71 @@\n+package games.strategy.engine.data.changefactory.units;\n+\n+import games.strategy.engine.data.Change;\n+import games.strategy.engine.data.GameData;\n+import games.strategy.engine.data.Territory;\n+import games.strategy.engine.data.Unit;\n+import java.util.Collection;\n+import java.util.UUID;\n+import java.util.stream.Collectors;\n+import org.triplea.java.collections.IntegerMap;\n+\n+/**\n+ * A game data change that captures the damage caused to a collection of units by a bombing attack.\n+ */\n+public class BombingUnitDamageChange extends Change {\n+  private static final long serialVersionUID = 7093658184880237574L;\n+  private final IntegerMap<String> hits;\n+  private final IntegerMap<String> undoHits;\n+  private final Collection<String> territoriesToNotify;\n+\n+  private BombingUnitDamageChange(\n+      final IntegerMap<String> hits,\n+      final IntegerMap<String> undoHits,\n+      final Collection<String> territoriesToNotify) {\n+    this.hits = hits;\n+    this.undoHits = undoHits;\n+    this.territoriesToNotify = territoriesToNotify;\n+  }\n+\n+  public BombingUnitDamageChange(\n+      final IntegerMap<Unit> hits, final Collection<Territory> territoriesToNotify) {\n+    this.hits = new IntegerMap<>();\n+    this.undoHits = new IntegerMap<>();\n+    hits.entrySet()\n+        .forEach(\n+            entry -> {\n+              this.hits.put(entry.getKey().getId().toString(), entry.getValue());\n+              this.undoHits.put(entry.getKey().getId().toString(), entry.getKey().getUnitDamage());\n+            });\n+    this.territoriesToNotify =\n+        territoriesToNotify.stream().map(Territory::getName).collect(Collectors.toList());\n+  }\n+\n+  @Override\n+  protected void perform(final GameData data) {\n+    hits.keySet()\n+        .forEach(\n+            unitId -> {\n+              data.getUnits().get(UUID.fromString(unitId)).setUnitDamage(hits.getInt(unitId));\n+            });\n+    this.territoriesToNotify.forEach(\n+        territory -> {\n+          data.getMap().getTerritory(territory).notifyChanged();\n+        });\n+  }\n+\n+  @Override\n+  public Change invert() {\n+    return new BombingUnitDamageChange(undoHits, hits, territoriesToNotify);\n+  }\n+\n+  @Override\n+  public String toString() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDc0Mzk4Ng=="}, "originalCommit": {"oid": "1a0484e2de95f8b60b1483f87f8664d8342b2774"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDc4MTIzMg==", "bodyText": "A lot of 'toStrings' are included to help debugging in Eclipse that used to show the 'toString' of an object when in debug. That was before when you could inspect the values of an object and you'd see just the 'toString' value.\nIf you play a game with a break-point in this method you'll probably be able to determine if this is dead code relatively quickly. IMO we should not be porting dead-code into new code if we can help it. When we do a new release I don't think we'll want to go back and do any clean up beyond carefully deleting that which is marked for deletion.", "url": "https://github.com/triplea-game/triplea/pull/8262#discussion_r530781232", "createdAt": "2020-11-26T05:27:14Z", "author": {"login": "DanVanAtta"}, "path": "game-core/src/main/java/games/strategy/engine/data/changefactory/units/BombingUnitDamageChange.java", "diffHunk": "@@ -0,0 +1,71 @@\n+package games.strategy.engine.data.changefactory.units;\n+\n+import games.strategy.engine.data.Change;\n+import games.strategy.engine.data.GameData;\n+import games.strategy.engine.data.Territory;\n+import games.strategy.engine.data.Unit;\n+import java.util.Collection;\n+import java.util.UUID;\n+import java.util.stream.Collectors;\n+import org.triplea.java.collections.IntegerMap;\n+\n+/**\n+ * A game data change that captures the damage caused to a collection of units by a bombing attack.\n+ */\n+public class BombingUnitDamageChange extends Change {\n+  private static final long serialVersionUID = 7093658184880237574L;\n+  private final IntegerMap<String> hits;\n+  private final IntegerMap<String> undoHits;\n+  private final Collection<String> territoriesToNotify;\n+\n+  private BombingUnitDamageChange(\n+      final IntegerMap<String> hits,\n+      final IntegerMap<String> undoHits,\n+      final Collection<String> territoriesToNotify) {\n+    this.hits = hits;\n+    this.undoHits = undoHits;\n+    this.territoriesToNotify = territoriesToNotify;\n+  }\n+\n+  public BombingUnitDamageChange(\n+      final IntegerMap<Unit> hits, final Collection<Territory> territoriesToNotify) {\n+    this.hits = new IntegerMap<>();\n+    this.undoHits = new IntegerMap<>();\n+    hits.entrySet()\n+        .forEach(\n+            entry -> {\n+              this.hits.put(entry.getKey().getId().toString(), entry.getValue());\n+              this.undoHits.put(entry.getKey().getId().toString(), entry.getKey().getUnitDamage());\n+            });\n+    this.territoriesToNotify =\n+        territoriesToNotify.stream().map(Territory::getName).collect(Collectors.toList());\n+  }\n+\n+  @Override\n+  protected void perform(final GameData data) {\n+    hits.keySet()\n+        .forEach(\n+            unitId -> {\n+              data.getUnits().get(UUID.fromString(unitId)).setUnitDamage(hits.getInt(unitId));\n+            });\n+    this.territoriesToNotify.forEach(\n+        territory -> {\n+          data.getMap().getTerritory(territory).notifyChanged();\n+        });\n+  }\n+\n+  @Override\n+  public Change invert() {\n+    return new BombingUnitDamageChange(undoHits, hits, territoriesToNotify);\n+  }\n+\n+  @Override\n+  public String toString() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDc0Mzk4Ng=="}, "originalCommit": {"oid": "1a0484e2de95f8b60b1483f87f8664d8342b2774"}, "originalPosition": 63}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2707, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}