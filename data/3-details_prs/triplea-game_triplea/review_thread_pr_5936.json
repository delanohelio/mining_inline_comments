{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1NzU3MDcy", "number": 5936, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQyMTowMTo1NlrODgLVvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQyMTowMTo1N1rODgLVvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MDY2ODEyOnYy", "diffSide": "RIGHT", "path": "game-core/src/main/java/games/strategy/engine/posted/game/pbf/NodeBbForumPoster.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQyMTowMTo1NlrOFqQj7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQyMTowMTo1NlrOFqQj7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg1NTg1NQ==", "bodyText": "Identical blocks of code found in 2 locations. Consider refactoring.", "url": "https://github.com/triplea-game/triplea/pull/5936#discussion_r379855855", "createdAt": "2020-02-15T21:01:56Z", "author": {"login": "codeclimate"}, "path": "game-core/src/main/java/games/strategy/engine/posted/game/pbf/NodeBbForumPoster.java", "diffHunk": "@@ -29,24 +32,92 @@\n import org.snakeyaml.engine.v2.api.Load;\n import org.snakeyaml.engine.v2.api.LoadSettings;\n import org.triplea.awt.OpenFileUtility;\n+import org.triplea.util.Arrays;\n \n /**\n  * Posts turn summaries to a NodeBB based forum of your choice.\n  *\n  * <p>URL format is {@code https://your.forumurl.com/api/v2/topics/<topicID>}.\n  */\n @Log\n-@AllArgsConstructor(access = AccessLevel.PACKAGE)\n-abstract class NodeBbForumPoster implements IForumPoster {\n+public class NodeBbForumPoster {\n+\n+  public static final String AXIS_AND_ALLIES_ORG_DISPLAY_NAME = \"www.axisandallies.org/forums/\";\n+  public static final String TRIPLEA_FORUM_DISPLAY_NAME = \"forums.triplea-game.org\";\n \n   private final Load load = new Load(LoadSettings.builder().build());\n   private final int topicId;\n   private final String username;\n   private final String password;\n+  private final String forumUrl;\n+\n+  @Builder\n+  public static class ForumPostingParameters {\n+    @Nonnull private final Integer topicId;\n+    @Nonnull private final char[] username;\n+    @Nonnull private final char[] password;\n+    @Nonnull private final String forumUrl;\n+  }\n+\n+  private NodeBbForumPoster(final ForumPostingParameters forumPostingParameters) {\n+    this.topicId = forumPostingParameters.topicId;\n+    this.forumUrl = forumPostingParameters.forumUrl;\n+    this.username =\n+        Arrays.withSensitiveArrayAndReturn(() -> forumPostingParameters.username, String::new);\n+    this.password =\n+        Arrays.withSensitiveArrayAndReturn(() -> forumPostingParameters.password, String::new);\n+  }\n+\n+  /**\n+   * Creates a {@link NodeBbForumPoster} instance based on the given arguments and the configured\n+   * settings.\n+   */\n+  public static NodeBbForumPoster newInstanceByName(final String name, final int topicId) {\n+    switch (name) {\n+      case NodeBbForumPoster.TRIPLEA_FORUM_DISPLAY_NAME:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7d18143f2e9be2c54dfce6dda8c55c7345dd98b3"}, "originalPosition": 70}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MDY2ODEzOnYy", "diffSide": "RIGHT", "path": "game-core/src/main/java/games/strategy/engine/posted/game/pbf/NodeBbForumPoster.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQyMTowMTo1N1rOFqQj8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQyMTowMTo1N1rOFqQj8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg1NTg1Ng==", "bodyText": "Identical blocks of code found in 2 locations. Consider refactoring.", "url": "https://github.com/triplea-game/triplea/pull/5936#discussion_r379855856", "createdAt": "2020-02-15T21:01:57Z", "author": {"login": "codeclimate"}, "path": "game-core/src/main/java/games/strategy/engine/posted/game/pbf/NodeBbForumPoster.java", "diffHunk": "@@ -29,24 +32,92 @@\n import org.snakeyaml.engine.v2.api.Load;\n import org.snakeyaml.engine.v2.api.LoadSettings;\n import org.triplea.awt.OpenFileUtility;\n+import org.triplea.util.Arrays;\n \n /**\n  * Posts turn summaries to a NodeBB based forum of your choice.\n  *\n  * <p>URL format is {@code https://your.forumurl.com/api/v2/topics/<topicID>}.\n  */\n @Log\n-@AllArgsConstructor(access = AccessLevel.PACKAGE)\n-abstract class NodeBbForumPoster implements IForumPoster {\n+public class NodeBbForumPoster {\n+\n+  public static final String AXIS_AND_ALLIES_ORG_DISPLAY_NAME = \"www.axisandallies.org/forums/\";\n+  public static final String TRIPLEA_FORUM_DISPLAY_NAME = \"forums.triplea-game.org\";\n \n   private final Load load = new Load(LoadSettings.builder().build());\n   private final int topicId;\n   private final String username;\n   private final String password;\n+  private final String forumUrl;\n+\n+  @Builder\n+  public static class ForumPostingParameters {\n+    @Nonnull private final Integer topicId;\n+    @Nonnull private final char[] username;\n+    @Nonnull private final char[] password;\n+    @Nonnull private final String forumUrl;\n+  }\n+\n+  private NodeBbForumPoster(final ForumPostingParameters forumPostingParameters) {\n+    this.topicId = forumPostingParameters.topicId;\n+    this.forumUrl = forumPostingParameters.forumUrl;\n+    this.username =\n+        Arrays.withSensitiveArrayAndReturn(() -> forumPostingParameters.username, String::new);\n+    this.password =\n+        Arrays.withSensitiveArrayAndReturn(() -> forumPostingParameters.password, String::new);\n+  }\n+\n+  /**\n+   * Creates a {@link NodeBbForumPoster} instance based on the given arguments and the configured\n+   * settings.\n+   */\n+  public static NodeBbForumPoster newInstanceByName(final String name, final int topicId) {\n+    switch (name) {\n+      case NodeBbForumPoster.TRIPLEA_FORUM_DISPLAY_NAME:\n+        return new NodeBbForumPoster(\n+            ForumPostingParameters.builder()\n+                .topicId(topicId)\n+                .username(ClientSetting.tripleaForumUsername.getValueOrThrow())\n+                .password(ClientSetting.tripleaForumPassword.getValueOrThrow())\n+                .forumUrl(UrlConstants.TRIPLEA_FORUM)\n+                .build());\n+      case NodeBbForumPoster.AXIS_AND_ALLIES_ORG_DISPLAY_NAME:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7d18143f2e9be2c54dfce6dda8c55c7345dd98b3"}, "originalPosition": 78}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1MDY2ODE0OnYy", "diffSide": "RIGHT", "path": "game-core/src/main/java/games/strategy/engine/posted/game/pbf/IForumPoster.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQyMTowMTo1N1rOFqQj8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNVQyMTowMTo1N1rOFqQj8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg1NTg1Nw==", "bodyText": "TODO found", "url": "https://github.com/triplea-game/triplea/pull/5936#discussion_r379855857", "createdAt": "2020-02-15T21:01:57Z", "author": {"login": "codeclimate"}, "path": "game-core/src/main/java/games/strategy/engine/posted/game/pbf/IForumPoster.java", "diffHunk": "@@ -1,79 +1,13 @@\n package games.strategy.engine.posted.game.pbf;\n \n-import com.google.common.collect.ImmutableSet;\n-import games.strategy.triplea.settings.ClientSetting;\n-import java.nio.file.Path;\n-import java.util.concurrent.CompletableFuture;\n-import org.triplea.util.Arrays;\n-\n /**\n  * An interface for classes that can post a turn summary, the summary may also include a save game\n  * if the implementing class supports this.\n  */\n+// TODO: merge these constants into another class, perhaps GameProperties or NodeBbForumPoster", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7d18143f2e9be2c54dfce6dda8c55c7345dd98b3"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2463, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}