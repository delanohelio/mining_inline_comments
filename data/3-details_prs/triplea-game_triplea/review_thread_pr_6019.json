{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg1MTk5MjMw", "number": 6019, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QyMjozMDoxNVrODmDjgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QyMjozMToyNVrODmDjxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMjMwNzIwOnYy", "diffSide": "LEFT", "path": "game-core/src/main/java/games/strategy/triplea/ui/menubar/TripleAMenuBar.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QyMjozMDoxNVrOFzSBTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QyMjo1NTo1N1rOFzSGww==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMxNjk0Mw==", "bodyText": "Hmm I think we should have that warning on all systems", "url": "https://github.com/triplea-game/triplea/pull/6019#discussion_r389316943", "createdAt": "2020-03-07T22:30:15Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/menubar/TripleAMenuBar.java", "diffHunk": "@@ -60,60 +56,19 @@ private void createLobbyMenu(final InGameLobbyWatcherWrapper watcher) {\n    *     cancelled the operation.\n    */\n   public static File getSaveGameLocation(final Frame frame) {\n-    // For some strange reason, the only way to get a Mac OS X native-style file dialog\n-    // is to use an AWT FileDialog instead of a Swing JDialog\n-    if (SystemProperties.isMac()) {\n-      final FileDialog fileDialog = new FileDialog(frame);\n-      fileDialog.setMode(FileDialog.SAVE);\n-      fileDialog.setDirectory(ClientSetting.saveGamesFolderPath.getValueOrThrow().toString());\n-      fileDialog.setFilenameFilter((dir, name) -> GameDataFileUtils.isCandidateFileName(name));\n-      fileDialog.setVisible(true);\n+    final FileDialog fileDialog = new FileDialog(frame);\n+    fileDialog.setMode(FileDialog.SAVE);\n+    fileDialog.setDirectory(ClientSetting.saveGamesFolderPath.getValueOrThrow().toString());\n+    fileDialog.setFilenameFilter((dir, name) -> GameDataFileUtils.isCandidateFileName(name));\n+    fileDialog.setVisible(true);\n \n-      final String fileName = fileDialog.getFile();\n-      if (fileName == null) {\n-        return null;\n-      }\n-\n-      // If the user selects a filename that already exists,\n-      // the AWT Dialog on Mac OS X will ask the user for confirmation\n-      return new File(fileDialog.getDirectory(), GameDataFileUtils.addExtensionIfAbsent(fileName));\n-    }\n-\n-    // Non-Mac platforms should use the normal Swing JFileChooser\n-    final JFileChooser fileChooser = SaveGameFileChooser.getInstance();\n-    final int selectedOption = fileChooser.showSaveDialog(frame);\n-    if (selectedOption != JFileChooser.APPROVE_OPTION) {\n+    final String fileName = fileDialog.getFile();\n+    if (fileName == null) {\n       return null;\n     }\n-    File f = fileChooser.getSelectedFile();\n-    // disallow sub directories to be entered (in the form directory/name) for Windows boxes\n-    if (SystemProperties.isWindows()) {\n-      final int slashIndex = Math.min(f.getPath().lastIndexOf(\"\\\\\"), f.getPath().length());\n-      final String filePath = f.getPath().substring(0, slashIndex);\n-      if (!fileChooser.getCurrentDirectory().toString().equals(filePath)) {\n-        JOptionPane.showConfirmDialog(\n-            frame,\n-            \"Sub directories are not allowed in the file name.  Please rename it.\",\n-            \"Cancel?\",\n-            JOptionPane.DEFAULT_OPTION,\n-            JOptionPane.WARNING_MESSAGE);\n-        return null;\n-      }\n-    }\n-    f = new File(f.getParent(), GameDataFileUtils.addExtensionIfAbsent(f.getName()));\n-    // A small warning so users will not over-write a file\n-    if (f.exists()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fab8031ec87164e5ce209dbc8cfa6249724f1952"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMxNzczMA==", "bodyText": "It is at least for sure on linux, it seems to be an OS default baked in already \ud83d\udc4d", "url": "https://github.com/triplea-game/triplea/pull/6019#discussion_r389317730", "createdAt": "2020-03-07T22:44:23Z", "author": {"login": "DanVanAtta"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/menubar/TripleAMenuBar.java", "diffHunk": "@@ -60,60 +56,19 @@ private void createLobbyMenu(final InGameLobbyWatcherWrapper watcher) {\n    *     cancelled the operation.\n    */\n   public static File getSaveGameLocation(final Frame frame) {\n-    // For some strange reason, the only way to get a Mac OS X native-style file dialog\n-    // is to use an AWT FileDialog instead of a Swing JDialog\n-    if (SystemProperties.isMac()) {\n-      final FileDialog fileDialog = new FileDialog(frame);\n-      fileDialog.setMode(FileDialog.SAVE);\n-      fileDialog.setDirectory(ClientSetting.saveGamesFolderPath.getValueOrThrow().toString());\n-      fileDialog.setFilenameFilter((dir, name) -> GameDataFileUtils.isCandidateFileName(name));\n-      fileDialog.setVisible(true);\n+    final FileDialog fileDialog = new FileDialog(frame);\n+    fileDialog.setMode(FileDialog.SAVE);\n+    fileDialog.setDirectory(ClientSetting.saveGamesFolderPath.getValueOrThrow().toString());\n+    fileDialog.setFilenameFilter((dir, name) -> GameDataFileUtils.isCandidateFileName(name));\n+    fileDialog.setVisible(true);\n \n-      final String fileName = fileDialog.getFile();\n-      if (fileName == null) {\n-        return null;\n-      }\n-\n-      // If the user selects a filename that already exists,\n-      // the AWT Dialog on Mac OS X will ask the user for confirmation\n-      return new File(fileDialog.getDirectory(), GameDataFileUtils.addExtensionIfAbsent(fileName));\n-    }\n-\n-    // Non-Mac platforms should use the normal Swing JFileChooser\n-    final JFileChooser fileChooser = SaveGameFileChooser.getInstance();\n-    final int selectedOption = fileChooser.showSaveDialog(frame);\n-    if (selectedOption != JFileChooser.APPROVE_OPTION) {\n+    final String fileName = fileDialog.getFile();\n+    if (fileName == null) {\n       return null;\n     }\n-    File f = fileChooser.getSelectedFile();\n-    // disallow sub directories to be entered (in the form directory/name) for Windows boxes\n-    if (SystemProperties.isWindows()) {\n-      final int slashIndex = Math.min(f.getPath().lastIndexOf(\"\\\\\"), f.getPath().length());\n-      final String filePath = f.getPath().substring(0, slashIndex);\n-      if (!fileChooser.getCurrentDirectory().toString().equals(filePath)) {\n-        JOptionPane.showConfirmDialog(\n-            frame,\n-            \"Sub directories are not allowed in the file name.  Please rename it.\",\n-            \"Cancel?\",\n-            JOptionPane.DEFAULT_OPTION,\n-            JOptionPane.WARNING_MESSAGE);\n-        return null;\n-      }\n-    }\n-    f = new File(f.getParent(), GameDataFileUtils.addExtensionIfAbsent(f.getName()));\n-    // A small warning so users will not over-write a file\n-    if (f.exists()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMxNjk0Mw=="}, "originalCommit": {"oid": "fab8031ec87164e5ce209dbc8cfa6249724f1952"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMxODMzOQ==", "bodyText": "Good to know, just double checked if this is the case on windows as well and it is \ud83d\udc4d", "url": "https://github.com/triplea-game/triplea/pull/6019#discussion_r389318339", "createdAt": "2020-03-07T22:55:57Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/menubar/TripleAMenuBar.java", "diffHunk": "@@ -60,60 +56,19 @@ private void createLobbyMenu(final InGameLobbyWatcherWrapper watcher) {\n    *     cancelled the operation.\n    */\n   public static File getSaveGameLocation(final Frame frame) {\n-    // For some strange reason, the only way to get a Mac OS X native-style file dialog\n-    // is to use an AWT FileDialog instead of a Swing JDialog\n-    if (SystemProperties.isMac()) {\n-      final FileDialog fileDialog = new FileDialog(frame);\n-      fileDialog.setMode(FileDialog.SAVE);\n-      fileDialog.setDirectory(ClientSetting.saveGamesFolderPath.getValueOrThrow().toString());\n-      fileDialog.setFilenameFilter((dir, name) -> GameDataFileUtils.isCandidateFileName(name));\n-      fileDialog.setVisible(true);\n+    final FileDialog fileDialog = new FileDialog(frame);\n+    fileDialog.setMode(FileDialog.SAVE);\n+    fileDialog.setDirectory(ClientSetting.saveGamesFolderPath.getValueOrThrow().toString());\n+    fileDialog.setFilenameFilter((dir, name) -> GameDataFileUtils.isCandidateFileName(name));\n+    fileDialog.setVisible(true);\n \n-      final String fileName = fileDialog.getFile();\n-      if (fileName == null) {\n-        return null;\n-      }\n-\n-      // If the user selects a filename that already exists,\n-      // the AWT Dialog on Mac OS X will ask the user for confirmation\n-      return new File(fileDialog.getDirectory(), GameDataFileUtils.addExtensionIfAbsent(fileName));\n-    }\n-\n-    // Non-Mac platforms should use the normal Swing JFileChooser\n-    final JFileChooser fileChooser = SaveGameFileChooser.getInstance();\n-    final int selectedOption = fileChooser.showSaveDialog(frame);\n-    if (selectedOption != JFileChooser.APPROVE_OPTION) {\n+    final String fileName = fileDialog.getFile();\n+    if (fileName == null) {\n       return null;\n     }\n-    File f = fileChooser.getSelectedFile();\n-    // disallow sub directories to be entered (in the form directory/name) for Windows boxes\n-    if (SystemProperties.isWindows()) {\n-      final int slashIndex = Math.min(f.getPath().lastIndexOf(\"\\\\\"), f.getPath().length());\n-      final String filePath = f.getPath().substring(0, slashIndex);\n-      if (!fileChooser.getCurrentDirectory().toString().equals(filePath)) {\n-        JOptionPane.showConfirmDialog(\n-            frame,\n-            \"Sub directories are not allowed in the file name.  Please rename it.\",\n-            \"Cancel?\",\n-            JOptionPane.DEFAULT_OPTION,\n-            JOptionPane.WARNING_MESSAGE);\n-        return null;\n-      }\n-    }\n-    f = new File(f.getParent(), GameDataFileUtils.addExtensionIfAbsent(f.getName()));\n-    // A small warning so users will not over-write a file\n-    if (f.exists()) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMxNjk0Mw=="}, "originalCommit": {"oid": "fab8031ec87164e5ce209dbc8cfa6249724f1952"}, "originalPosition": 73}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxMjMwNzkxOnYy", "diffSide": "LEFT", "path": "game-core/src/main/java/games/strategy/triplea/ui/menubar/TripleAMenuBar.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QyMjozMToyNVrOFzSBng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wN1QyMjo1Njo1OVrOFzSG8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMxNzAyMg==", "bodyText": "Ok, this is a super weird thing I have never seen before.", "url": "https://github.com/triplea-game/triplea/pull/6019#discussion_r389317022", "createdAt": "2020-03-07T22:31:25Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/menubar/TripleAMenuBar.java", "diffHunk": "@@ -60,60 +56,19 @@ private void createLobbyMenu(final InGameLobbyWatcherWrapper watcher) {\n    *     cancelled the operation.\n    */\n   public static File getSaveGameLocation(final Frame frame) {\n-    // For some strange reason, the only way to get a Mac OS X native-style file dialog\n-    // is to use an AWT FileDialog instead of a Swing JDialog\n-    if (SystemProperties.isMac()) {\n-      final FileDialog fileDialog = new FileDialog(frame);\n-      fileDialog.setMode(FileDialog.SAVE);\n-      fileDialog.setDirectory(ClientSetting.saveGamesFolderPath.getValueOrThrow().toString());\n-      fileDialog.setFilenameFilter((dir, name) -> GameDataFileUtils.isCandidateFileName(name));\n-      fileDialog.setVisible(true);\n+    final FileDialog fileDialog = new FileDialog(frame);\n+    fileDialog.setMode(FileDialog.SAVE);\n+    fileDialog.setDirectory(ClientSetting.saveGamesFolderPath.getValueOrThrow().toString());\n+    fileDialog.setFilenameFilter((dir, name) -> GameDataFileUtils.isCandidateFileName(name));\n+    fileDialog.setVisible(true);\n \n-      final String fileName = fileDialog.getFile();\n-      if (fileName == null) {\n-        return null;\n-      }\n-\n-      // If the user selects a filename that already exists,\n-      // the AWT Dialog on Mac OS X will ask the user for confirmation\n-      return new File(fileDialog.getDirectory(), GameDataFileUtils.addExtensionIfAbsent(fileName));\n-    }\n-\n-    // Non-Mac platforms should use the normal Swing JFileChooser\n-    final JFileChooser fileChooser = SaveGameFileChooser.getInstance();\n-    final int selectedOption = fileChooser.showSaveDialog(frame);\n-    if (selectedOption != JFileChooser.APPROVE_OPTION) {\n+    final String fileName = fileDialog.getFile();\n+    if (fileName == null) {\n       return null;\n     }\n-    File f = fileChooser.getSelectedFile();\n-    // disallow sub directories to be entered (in the form directory/name) for Windows boxes", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fab8031ec87164e5ce209dbc8cfa6249724f1952"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMxNzcxMg==", "bodyText": "Always quite a bit of 'interesting' code to find here and there  \ud83d\ude01", "url": "https://github.com/triplea-game/triplea/pull/6019#discussion_r389317712", "createdAt": "2020-03-07T22:43:57Z", "author": {"login": "DanVanAtta"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/menubar/TripleAMenuBar.java", "diffHunk": "@@ -60,60 +56,19 @@ private void createLobbyMenu(final InGameLobbyWatcherWrapper watcher) {\n    *     cancelled the operation.\n    */\n   public static File getSaveGameLocation(final Frame frame) {\n-    // For some strange reason, the only way to get a Mac OS X native-style file dialog\n-    // is to use an AWT FileDialog instead of a Swing JDialog\n-    if (SystemProperties.isMac()) {\n-      final FileDialog fileDialog = new FileDialog(frame);\n-      fileDialog.setMode(FileDialog.SAVE);\n-      fileDialog.setDirectory(ClientSetting.saveGamesFolderPath.getValueOrThrow().toString());\n-      fileDialog.setFilenameFilter((dir, name) -> GameDataFileUtils.isCandidateFileName(name));\n-      fileDialog.setVisible(true);\n+    final FileDialog fileDialog = new FileDialog(frame);\n+    fileDialog.setMode(FileDialog.SAVE);\n+    fileDialog.setDirectory(ClientSetting.saveGamesFolderPath.getValueOrThrow().toString());\n+    fileDialog.setFilenameFilter((dir, name) -> GameDataFileUtils.isCandidateFileName(name));\n+    fileDialog.setVisible(true);\n \n-      final String fileName = fileDialog.getFile();\n-      if (fileName == null) {\n-        return null;\n-      }\n-\n-      // If the user selects a filename that already exists,\n-      // the AWT Dialog on Mac OS X will ask the user for confirmation\n-      return new File(fileDialog.getDirectory(), GameDataFileUtils.addExtensionIfAbsent(fileName));\n-    }\n-\n-    // Non-Mac platforms should use the normal Swing JFileChooser\n-    final JFileChooser fileChooser = SaveGameFileChooser.getInstance();\n-    final int selectedOption = fileChooser.showSaveDialog(frame);\n-    if (selectedOption != JFileChooser.APPROVE_OPTION) {\n+    final String fileName = fileDialog.getFile();\n+    if (fileName == null) {\n       return null;\n     }\n-    File f = fileChooser.getSelectedFile();\n-    // disallow sub directories to be entered (in the form directory/name) for Windows boxes", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMxNzAyMg=="}, "originalCommit": {"oid": "fab8031ec87164e5ce209dbc8cfa6249724f1952"}, "originalPosition": 57}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMxODM4Nw==", "bodyText": "I mean at this point I shouldn't really be surprised anymore, but it happens again and again ^^", "url": "https://github.com/triplea-game/triplea/pull/6019#discussion_r389318387", "createdAt": "2020-03-07T22:56:59Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/menubar/TripleAMenuBar.java", "diffHunk": "@@ -60,60 +56,19 @@ private void createLobbyMenu(final InGameLobbyWatcherWrapper watcher) {\n    *     cancelled the operation.\n    */\n   public static File getSaveGameLocation(final Frame frame) {\n-    // For some strange reason, the only way to get a Mac OS X native-style file dialog\n-    // is to use an AWT FileDialog instead of a Swing JDialog\n-    if (SystemProperties.isMac()) {\n-      final FileDialog fileDialog = new FileDialog(frame);\n-      fileDialog.setMode(FileDialog.SAVE);\n-      fileDialog.setDirectory(ClientSetting.saveGamesFolderPath.getValueOrThrow().toString());\n-      fileDialog.setFilenameFilter((dir, name) -> GameDataFileUtils.isCandidateFileName(name));\n-      fileDialog.setVisible(true);\n+    final FileDialog fileDialog = new FileDialog(frame);\n+    fileDialog.setMode(FileDialog.SAVE);\n+    fileDialog.setDirectory(ClientSetting.saveGamesFolderPath.getValueOrThrow().toString());\n+    fileDialog.setFilenameFilter((dir, name) -> GameDataFileUtils.isCandidateFileName(name));\n+    fileDialog.setVisible(true);\n \n-      final String fileName = fileDialog.getFile();\n-      if (fileName == null) {\n-        return null;\n-      }\n-\n-      // If the user selects a filename that already exists,\n-      // the AWT Dialog on Mac OS X will ask the user for confirmation\n-      return new File(fileDialog.getDirectory(), GameDataFileUtils.addExtensionIfAbsent(fileName));\n-    }\n-\n-    // Non-Mac platforms should use the normal Swing JFileChooser\n-    final JFileChooser fileChooser = SaveGameFileChooser.getInstance();\n-    final int selectedOption = fileChooser.showSaveDialog(frame);\n-    if (selectedOption != JFileChooser.APPROVE_OPTION) {\n+    final String fileName = fileDialog.getFile();\n+    if (fileName == null) {\n       return null;\n     }\n-    File f = fileChooser.getSelectedFile();\n-    // disallow sub directories to be entered (in the form directory/name) for Windows boxes", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTMxNzAyMg=="}, "originalCommit": {"oid": "fab8031ec87164e5ce209dbc8cfa6249724f1952"}, "originalPosition": 57}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2516, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}