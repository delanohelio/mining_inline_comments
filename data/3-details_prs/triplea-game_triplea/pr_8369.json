{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzMjg4NjAw", "number": 8369, "title": "Move BattleActions#removeCasualties to BattleState#markCasualties", "bodyText": "Remove the code that depends on the bridge to the caller so that\nmarkCasualties can be in the BattleState. The code that depends on the\nbridge is old code that will be removed once save compatibility can be\nbroken.\nModify MustFightBattle#remove to remove the units from the WaitingToDie\nlists so that markCasualties can always move the units to the\nWaitingToDie list but the caller can then also remove those units if\nneeded.\n\nTesting\n\nPlayed a save from 2.0 that was a sub battle.  Ensured that the ReturnFire was handled correctly.  Units that should return fire were left in the WaitingToDie lists and units that shouldn't return fire were removed from that list.\nPlayed a brand new sub battle to make sure that the current MarkCasualties and ClearFirstStrikeCasualties steps worked correctly together.\nScreens Shots\n\nAdditional Notes to Reviewer\n\nRelease Note", "createdAt": "2020-12-06T23:36:30Z", "url": "https://github.com/triplea-game/triplea/pull/8369", "merged": true, "mergeCommit": {"oid": "34c9b28e2fe241e4f4d16c55efb4c6c3a5e30a18"}, "closed": true, "closedAt": "2020-12-07T06:11:16Z", "author": {"login": "trevan"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdjpq5kgFqTU0NTc2MjU2Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdjvTRDAFqTU0NTg1MzUwNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1NzYyNTY2", "url": "https://github.com/triplea-game/triplea/pull/8369#pullrequestreview-545762566", "createdAt": "2020-12-06T23:37:32Z", "commit": {"oid": "2b211f9295190ae5354a75055fe5ed14af7f6b3d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQyMzozNzozMlrOIARFnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNlQyMzozNzozMlrOIARFnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzE1MDg3OQ==", "bodyText": "Which would you prefer, the javadoc on the interface, the implementation, or both?", "url": "https://github.com/triplea-game/triplea/pull/8369#discussion_r537150879", "createdAt": "2020-12-06T23:37:32Z", "author": {"login": "trevan"}, "path": "game-core/src/main/java/games/strategy/triplea/delegate/battle/BattleState.java", "diffHunk": "@@ -92,6 +92,16 @@ public boolean isFirstRound() {\n \n   Collection<Unit> removeNonCombatants(Side side);\n \n+  /**\n+   * Mark the units that will be dying\n+   *\n+   * <p>Units that are only damaged should not be passed into this method.\n+   *\n+   * @param casualties units that are dying\n+   * @param side the side the unit are on\n+   */\n+  void markCasualties(Collection<Unit> casualties, Side side);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b211f9295190ae5354a75055fe5ed14af7f6b3d"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2b211f9295190ae5354a75055fe5ed14af7f6b3d", "author": {"user": {"login": "trevan", "name": null}}, "url": "https://github.com/triplea-game/triplea/commit/2b211f9295190ae5354a75055fe5ed14af7f6b3d", "committedDate": "2020-12-06T23:33:56Z", "message": "Move BattleActions#removeCasualties to BattleState#markCasualties\n\nRemove the code that depends on the bridge to the caller so that\nmarkCasualties can be in the BattleState. The code that depends on the\nbridge is old code that will be removed once save compatibility can be\nbroken.\n\nModify MustFightBattle#remove to remove the units from the WaitingToDie\nlists so that markCasualties can always move the units to the\nWaitingToDie list but the caller can then also remove those units if\nneeded."}, "afterCommit": {"oid": "264c22da412ea7bb3144c914e03cbb78de87d037", "author": {"user": {"login": "trevan", "name": null}}, "url": "https://github.com/triplea-game/triplea/commit/264c22da412ea7bb3144c914e03cbb78de87d037", "committedDate": "2020-12-07T01:04:43Z", "message": "Move BattleActions#removeCasualties to BattleState#markCasualties\n\nRemove the code that depends on the bridge to the caller so that\nmarkCasualties can be in the BattleState. The code that depends on the\nbridge is old code that will be removed once save compatibility can be\nbroken.\n\nModify MustFightBattle#remove to remove the units from the WaitingToDie\nlists so that markCasualties can always move the units to the\nWaitingToDie list but the caller can then also remove those units if\nneeded."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a58f70e5ca5dff90572c4d8683dd213a1a1f212", "author": {"user": {"login": "trevan", "name": null}}, "url": "https://github.com/triplea-game/triplea/commit/3a58f70e5ca5dff90572c4d8683dd213a1a1f212", "committedDate": "2020-12-07T01:06:00Z", "message": "Move BattleActions#removeCasualties to BattleState#markCasualties\n\nRemove the code that depends on the bridge to the caller so that\nmarkCasualties can be in the BattleState. The code that depends on the\nbridge is old code that will be removed once save compatibility can be\nbroken.\n\nModify MustFightBattle#remove to remove the units from the WaitingToDie\nlists so that markCasualties can always move the units to the\nWaitingToDie list but the caller can then also remove those units if\nneeded."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "264c22da412ea7bb3144c914e03cbb78de87d037", "author": {"user": {"login": "trevan", "name": null}}, "url": "https://github.com/triplea-game/triplea/commit/264c22da412ea7bb3144c914e03cbb78de87d037", "committedDate": "2020-12-07T01:04:43Z", "message": "Move BattleActions#removeCasualties to BattleState#markCasualties\n\nRemove the code that depends on the bridge to the caller so that\nmarkCasualties can be in the BattleState. The code that depends on the\nbridge is old code that will be removed once save compatibility can be\nbroken.\n\nModify MustFightBattle#remove to remove the units from the WaitingToDie\nlists so that markCasualties can always move the units to the\nWaitingToDie list but the caller can then also remove those units if\nneeded."}, "afterCommit": {"oid": "3a58f70e5ca5dff90572c4d8683dd213a1a1f212", "author": {"user": {"login": "trevan", "name": null}}, "url": "https://github.com/triplea-game/triplea/commit/3a58f70e5ca5dff90572c4d8683dd213a1a1f212", "committedDate": "2020-12-07T01:06:00Z", "message": "Move BattleActions#removeCasualties to BattleState#markCasualties\n\nRemove the code that depends on the bridge to the caller so that\nmarkCasualties can be in the BattleState. The code that depends on the\nbridge is old code that will be removed once save compatibility can be\nbroken.\n\nModify MustFightBattle#remove to remove the units from the WaitingToDie\nlists so that markCasualties can always move the units to the\nWaitingToDie list but the caller can then also remove those units if\nneeded."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1ODUzNTA2", "url": "https://github.com/triplea-game/triplea/pull/8369#pullrequestreview-545853506", "createdAt": "2020-12-07T06:10:44Z", "commit": {"oid": "3a58f70e5ca5dff90572c4d8683dd213a1a1f212"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwNjoxMDo0NVrOIAXZaA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwNjoxMDo0NVrOIAXZaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzI1NDI0OA==", "bodyText": "IMO interface to explain the general contract that is expected to be provided by any implementation.", "url": "https://github.com/triplea-game/triplea/pull/8369#discussion_r537254248", "createdAt": "2020-12-07T06:10:45Z", "author": {"login": "DanVanAtta"}, "path": "game-core/src/main/java/games/strategy/triplea/delegate/battle/BattleState.java", "diffHunk": "@@ -92,6 +92,16 @@ public boolean isFirstRound() {\n \n   Collection<Unit> removeNonCombatants(Side side);\n \n+  /**\n+   * Mark the units that will be dying\n+   *\n+   * <p>Units that are only damaged should not be passed into this method.\n+   *\n+   * @param casualties units that are dying\n+   * @param side the side the unit are on\n+   */\n+  void markCasualties(Collection<Unit> casualties, Side side);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzE1MDg3OQ=="}, "originalCommit": {"oid": "2b211f9295190ae5354a75055fe5ed14af7f6b3d"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3809, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}