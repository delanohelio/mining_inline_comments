{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzODc1NTY2", "number": 6414, "title": "Moderator Mute (Front-End)", "bodyText": "Add front-end implementation for moderator mute ability.\nMutes are capped to 60 minutes.\nAdd no-op backend controller endpoint to do mutes\nRestructure BanDuration dialog to be more generic and\nrename to 'ActionDuration'\nAllow for the action duration time unit and max unit to\nbe specified per instance\nRestructure Action duration dialog to return an optional\nduration instead of automatically running an action.\nRemove the 'permanent' time-unit (it defaulted to a very\nlarge number), instead moderators can do the same and\njust ban for 10,000 months or something similar.\nAdd a confirmation prompt to both player mute and\nplayer ban actions.\n\n\nFunctional Changes\n\n[] New map or map update\n[x] New Feature\n[x] Feature update or enhancement\n[] Feature Removal\n[] Code Cleanup or refactor\n[] Configuration Change\n[] Problem fix:  \n[] Other:   \nTesting\n\nverified ban from both right click menu option and toolbox\nverified mute selection and sends request to backend (and then no-ops)\n\n\n\nScreens Shots", "createdAt": "2020-05-06T04:50:32Z", "url": "https://github.com/triplea-game/triplea/pull/6414", "merged": true, "mergeCommit": {"oid": "ab272ab1d0d691c6ef64e92a87ccd89e51a6f866"}, "closed": true, "closedAt": "2020-05-08T14:20:55Z", "author": {"login": "DanVanAtta"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcehFUMgH2gAyNDEzODc1NTY2OjcwODQ5NDMzNmFiZjg1MmU4MGFlYTYxNWFjZDYwZmM2MTExNzEwYmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcfSpBdAFqTQwODI3MzU4Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "708494336abf852e80aea615acd60fc6111710bf", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/708494336abf852e80aea615acd60fc6111710bf", "committedDate": "2020-05-06T04:36:29Z", "message": "Moderator Mute (Front-End)\n\n- Add front-end implementation for moderator mute ability.\n  Mutes are capped to 60 minutes.\n- Add no-op backend controller endpoint to do mutes\n- Restructure BanDuration dialog to be more generic and\n  rename to 'ActionDuration'\n- Allow for the action duration time unit and max unit to\n  be specified per instance\n- Restructure Action duration dialog to return an optional\n  duration instead of automatically running an action.\n- Remove the 'permanent' time-unit (it defaulted to a very\n  large number), instead moderators can do the same and\n  just ban for 10,000 months or something similar.\n- Add a confirmation prompt to both player mute and\n  player ban actions."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2MzAyNzQ4", "url": "https://github.com/triplea-game/triplea/pull/6414#pullrequestreview-406302748", "createdAt": "2020-05-06T04:52:34Z", "commit": {"oid": "708494336abf852e80aea615acd60fc6111710bf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwNDo1MjozNVrOGRD-rA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwNDo1MjozNVrOGRD-rA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDU0NDE3Mg==", "bodyText": "Method prompt has 70 lines of code (exceeds 30 allowed). Consider refactoring.", "url": "https://github.com/triplea-game/triplea/pull/6414#discussion_r420544172", "createdAt": "2020-05-06T04:52:35Z", "author": {"login": "codeclimate"}, "path": "game-core/src/main/java/games/strategy/engine/lobby/client/ui/action/ActionDurationDialog.java", "diffHunk": "@@ -0,0 +1,130 @@\n+package games.strategy.engine.lobby.client.ui.action;\n+\n+import java.awt.Frame;\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.concurrent.atomic.AtomicReference;\n+import javax.annotation.Nonnull;\n+import javax.swing.JComboBox;\n+import javax.swing.JDialog;\n+import javax.swing.JSpinner;\n+import javax.swing.SpinnerNumberModel;\n+import lombok.AllArgsConstructor;\n+import lombok.Builder;\n+import org.triplea.swing.JButtonBuilder;\n+import org.triplea.swing.JLabelBuilder;\n+import org.triplea.swing.jpanel.JPanelBuilder;\n+import org.triplea.swing.key.binding.KeyCode;\n+import org.triplea.swing.key.binding.SwingKeyBinding;\n+\n+/** A UI-Utility class that can be used to prompt the user for a timespan. */\n+@Builder\n+public final class ActionDurationDialog {\n+  private static final long serialVersionUID = 1367343948352548021L;\n+  private static final String TITLE = \"Select Timespan\";\n+\n+  @Builder.Default private int maxDuration = 10_000_000;\n+  @Builder.Default private List<ActionTimeUnit> timeUnits = List.of(ActionTimeUnit.values());\n+  @Nonnull private final ActionName actionName;\n+  @Nonnull private final Frame parent;\n+\n+  @AllArgsConstructor\n+  public enum ActionName {\n+    BAN(\"ban\"),\n+    MUTE(\"mute\");\n+    private final String label;\n+  }\n+\n+  private enum Result {\n+    OK,\n+    CANCEL\n+  }\n+\n+  /**\n+   * Prompts the user to enter a timespan. If the operation is not cancelled, the action Consumer is\n+   * run. Not that the Date passed to the consumer can be null if the user chose forever.\n+   */\n+  public Optional<ActionDuration> prompt() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "708494336abf852e80aea615acd60fc6111710bf"}, "originalPosition": 47}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "68283312f9c3cbab845a17ae61767ed377a3fd8a", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/68283312f9c3cbab845a17ae61767ed377a3fd8a", "committedDate": "2020-05-08T02:09:00Z", "message": "Merge remote-tracking branch 'origin/master' into moderator-mute-frontend-completed"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3cff6808168d5dcbeb0fc6f42ad365b43690d9b", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/a3cff6808168d5dcbeb0fc6f42ad365b43690d9b", "committedDate": "2020-05-08T02:09:44Z", "message": "Add import post-merge conflict resolution"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "39aa5571767bacd3b6a760367cd9ed86c1ba0492", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/39aa5571767bacd3b6a760367cd9ed86c1ba0492", "committedDate": "2020-05-08T06:52:10Z", "message": "Merge remote-tracking branch 'origin/master' into moderator-mute-frontend-completed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA4MjczNTg2", "url": "https://github.com/triplea-game/triplea/pull/6414#pullrequestreview-408273586", "createdAt": "2020-05-08T14:20:50Z", "commit": {"oid": "39aa5571767bacd3b6a760367cd9ed86c1ba0492"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3399, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}