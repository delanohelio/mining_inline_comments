{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5Mzk4NDAy", "number": 5980, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQyMjo0MTo1OFrODjRQ-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQyMjo0OTo1M1rODjRY9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4MzA5NjI3OnYy", "diffSide": "RIGHT", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/posted/game/pbf/ForumPosterEditorViewModel.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQyMjo0MTo1OFrOFu_FHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwMzo1MDo1NlrOFvEcGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDgxMjMxOQ==", "bodyText": "Just noticed this: It should be easily removable now that guava's Predicates#not can be replaced with Predicate#not from the standard library", "url": "https://github.com/triplea-game/triplea/pull/5980#discussion_r384812319", "createdAt": "2020-02-26T22:41:58Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/posted/game/pbf/ForumPosterEditorViewModel.java", "diffHunk": "@@ -48,6 +48,28 @@\n     populateFromGameProperties(properties);\n   }\n \n+  void setForumPassword(final char[] password) {\n+    final ClientSetting<char[]> passwordSetting =\n+        forumSelection.equals(NodeBbForumPoster.TRIPLEA_FORUM_DISPLAY_NAME)\n+            ? ClientSetting.tripleaForumPassword\n+            : ClientSetting.aaForumPassword;\n+\n+    passwordSetting.setValueAndFlush(password);\n+    forumPassword = password;\n+    readyCallback.run();\n+  }\n+\n+  void setForumUsername(final String username) {\n+    final ClientSetting<char[]> usernameSetting =\n+        forumSelection.equals(NodeBbForumPoster.TRIPLEA_FORUM_DISPLAY_NAME)\n+            ? ClientSetting.tripleaForumUsername\n+            : ClientSetting.aaForumUsername;\n+\n+    usernameSetting.setValueAndFlush(username.toCharArray());\n+    forumUsername = username;\n+    readyCallback.run();\n+  }\n+\n   @SuppressWarnings(\"Guava\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c47978aa077ac1e26ff014e677202679aef2e63"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDkwMDEyMQ==", "bodyText": "Ah, indeed, thanks. The auto-correct for the warning was giving a nasty \".negation()\"\nUpdated in: 668a0df", "url": "https://github.com/triplea-game/triplea/pull/5980#discussion_r384900121", "createdAt": "2020-02-27T03:50:56Z", "author": {"login": "DanVanAtta"}, "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/posted/game/pbf/ForumPosterEditorViewModel.java", "diffHunk": "@@ -48,6 +48,28 @@\n     populateFromGameProperties(properties);\n   }\n \n+  void setForumPassword(final char[] password) {\n+    final ClientSetting<char[]> passwordSetting =\n+        forumSelection.equals(NodeBbForumPoster.TRIPLEA_FORUM_DISPLAY_NAME)\n+            ? ClientSetting.tripleaForumPassword\n+            : ClientSetting.aaForumPassword;\n+\n+    passwordSetting.setValueAndFlush(password);\n+    forumPassword = password;\n+    readyCallback.run();\n+  }\n+\n+  void setForumUsername(final String username) {\n+    final ClientSetting<char[]> usernameSetting =\n+        forumSelection.equals(NodeBbForumPoster.TRIPLEA_FORUM_DISPLAY_NAME)\n+            ? ClientSetting.tripleaForumUsername\n+            : ClientSetting.aaForumUsername;\n+\n+    usernameSetting.setValueAndFlush(username.toCharArray());\n+    forumUsername = username;\n+    readyCallback.run();\n+  }\n+\n   @SuppressWarnings(\"Guava\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDgxMjMxOQ=="}, "originalCommit": {"oid": "4c47978aa077ac1e26ff014e677202679aef2e63"}, "originalPosition": 50}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4MzEwMjAwOnYy", "diffSide": "RIGHT", "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/posted/game/pbf/ForumPosterEditorViewModel.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQyMjo0NDoxMlrOFu_IoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwNzoyODo0NFrOFvHmYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDgxMzIxNw==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        ? ClientSetting.tripleaForumPassword.getValue().orElse(new char[] {})\n          \n          \n            \n                        : ClientSetting.aaForumPassword.getValue().orElse(new char[] {});\n          \n          \n            \n                        ? ClientSetting.tripleaForumPassword.getValue().orElse(new char[0])\n          \n          \n            \n                        : ClientSetting.aaForumPassword.getValue().orElse(new char[0]);", "url": "https://github.com/triplea-game/triplea/pull/5980#discussion_r384813217", "createdAt": "2020-02-26T22:44:12Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/posted/game/pbf/ForumPosterEditorViewModel.java", "diffHunk": "@@ -60,8 +82,14 @@ synchronized void setForumSelection(final String forumSelection) {\n         \"Forum selection is driven by a drop-down to ensure user can never set it to null, \"\n             + \"if setting to null from a game properties, we default to the first available \"\n             + \"selection entry, forum selection should never be null or empty.\");\n-    viewForumPostButtonEnabled = areFieldsValid();\n-    testForumPostButtonEnabled = areFieldsValid();\n+    forumUsername =\n+        this.forumSelection.equals(NodeBbForumPoster.TRIPLEA_FORUM_DISPLAY_NAME)\n+            ? ClientSetting.tripleaForumUsername.getValue().map(String::valueOf).orElse(\"\")\n+            : ClientSetting.aaForumUsername.getValue().map(String::valueOf).orElse(\"\");\n+    forumPassword =\n+        this.forumSelection.equals(NodeBbForumPoster.TRIPLEA_FORUM_DISPLAY_NAME)\n+            ? ClientSetting.tripleaForumPassword.getValue().orElse(new char[] {})\n+            : ClientSetting.aaForumPassword.getValue().orElse(new char[] {});", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c47978aa077ac1e26ff014e677202679aef2e63"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDg5OTYxMA==", "bodyText": "Is this just personal preference @RoiEXLab ?", "url": "https://github.com/triplea-game/triplea/pull/5980#discussion_r384899610", "createdAt": "2020-02-27T03:48:14Z", "author": {"login": "DanVanAtta"}, "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/posted/game/pbf/ForumPosterEditorViewModel.java", "diffHunk": "@@ -60,8 +82,14 @@ synchronized void setForumSelection(final String forumSelection) {\n         \"Forum selection is driven by a drop-down to ensure user can never set it to null, \"\n             + \"if setting to null from a game properties, we default to the first available \"\n             + \"selection entry, forum selection should never be null or empty.\");\n-    viewForumPostButtonEnabled = areFieldsValid();\n-    testForumPostButtonEnabled = areFieldsValid();\n+    forumUsername =\n+        this.forumSelection.equals(NodeBbForumPoster.TRIPLEA_FORUM_DISPLAY_NAME)\n+            ? ClientSetting.tripleaForumUsername.getValue().map(String::valueOf).orElse(\"\")\n+            : ClientSetting.aaForumUsername.getValue().map(String::valueOf).orElse(\"\");\n+    forumPassword =\n+        this.forumSelection.equals(NodeBbForumPoster.TRIPLEA_FORUM_DISPLAY_NAME)\n+            ? ClientSetting.tripleaForumPassword.getValue().orElse(new char[] {})\n+            : ClientSetting.aaForumPassword.getValue().orElse(new char[] {});", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDgxMzIxNw=="}, "originalCommit": {"oid": "4c47978aa077ac1e26ff014e677202679aef2e63"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDk1MTkwNg==", "bodyText": "Well yes, it's shorter and tbh I'm not really a fan of empty curly braces anywhere.\nJust a weird thing of mine", "url": "https://github.com/triplea-game/triplea/pull/5980#discussion_r384951906", "createdAt": "2020-02-27T07:28:44Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/posted/game/pbf/ForumPosterEditorViewModel.java", "diffHunk": "@@ -60,8 +82,14 @@ synchronized void setForumSelection(final String forumSelection) {\n         \"Forum selection is driven by a drop-down to ensure user can never set it to null, \"\n             + \"if setting to null from a game properties, we default to the first available \"\n             + \"selection entry, forum selection should never be null or empty.\");\n-    viewForumPostButtonEnabled = areFieldsValid();\n-    testForumPostButtonEnabled = areFieldsValid();\n+    forumUsername =\n+        this.forumSelection.equals(NodeBbForumPoster.TRIPLEA_FORUM_DISPLAY_NAME)\n+            ? ClientSetting.tripleaForumUsername.getValue().map(String::valueOf).orElse(\"\")\n+            : ClientSetting.aaForumUsername.getValue().map(String::valueOf).orElse(\"\");\n+    forumPassword =\n+        this.forumSelection.equals(NodeBbForumPoster.TRIPLEA_FORUM_DISPLAY_NAME)\n+            ? ClientSetting.tripleaForumPassword.getValue().orElse(new char[] {})\n+            : ClientSetting.aaForumPassword.getValue().orElse(new char[] {});", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDgxMzIxNw=="}, "originalCommit": {"oid": "4c47978aa077ac1e26ff014e677202679aef2e63"}, "originalPosition": 66}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4MzExNjY5OnYy", "diffSide": "RIGHT", "path": "game-core/src/test/java/games/strategy/engine/framework/startup/ui/posted/game/pbf/ForumPosterEditorViewModelTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQyMjo0OTo1M1rOFu_RuA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQyMjo0OTo1M1rOFu_RuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDgxNTU0NA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    Arguments.of(\"1\", \"\", new char[] {}));\n          \n          \n            \n                    Arguments.of(\"1\", \"\", new char[0]));\n          \n      \n    \n    \n  \n\nBut in this scenario I would be ok with keeping the initializer curly braces because of consistency", "url": "https://github.com/triplea-game/triplea/pull/5980#discussion_r384815544", "createdAt": "2020-02-26T22:49:53Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/test/java/games/strategy/engine/framework/startup/ui/posted/game/pbf/ForumPosterEditorViewModelTest.java", "diffHunk": "@@ -129,45 +131,49 @@ void viewForumPostNoOpOnInvalidData(final String forumSelection, final String to\n   }\n \n   private ForumPosterEditorViewModel givenViewModelWithInvalidFieldSettings(\n-      final String forumSelection, final String topicId) {\n+      final String topicId, final String username, final char[] password) {\n     final ForumPosterEditorViewModel viewModel = new ForumPosterEditorViewModel(() -> {});\n-    viewModel.setForumSelection(forumSelection);\n     viewModel.setTopicId(topicId);\n-    Preconditions.checkState(\n-        !viewModel.isTopicIdValid(), \"Test makes sense only if topic id is invalid\");\n+    viewModel.setForumUsername(username);\n+    viewModel.setForumPassword(password);\n     return viewModel;\n   }\n \n   @SuppressWarnings(\"unused\")\n   private static List<Arguments> invalidForumSettings() {\n     return List.of(\n-        Arguments.of(\"forumSelection\", \"not a number\"),\n-        Arguments.of(\"forumSelection\", \"\"),\n-        Arguments.of(\"forumSelection\", \"0.0\"),\n-        Arguments.of(\"forumSelection\", \"0\"),\n-        Arguments.of(\"forumSelection\", \"-1\"));\n+        // invalid topic IDs\n+        Arguments.of(\"not a number\", \"user\", new char[] {'a'}),\n+        Arguments.of(\"\", \"user\", new char[] {'a'}),\n+        Arguments.of(\"0.0\", \"user\", new char[] {'a'}),\n+        Arguments.of(\"0\", \"user\", new char[] {'a'}),\n+        Arguments.of(\"-1\", \"user\", new char[] {'a'}),\n+        // missing user\n+        Arguments.of(\"1\", \"\", new char[] {'a'}),\n+        // missing password\n+        Arguments.of(\"1\", \"\", new char[] {}));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c47978aa077ac1e26ff014e677202679aef2e63"}, "originalPosition": 66}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2481, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}