{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4NDE0NjQy", "number": 6473, "title": "Improve map not found error messaging", "bodyText": "Tell the user the name of the map that could not be found\nand the paths on file system that were searched.\n\nFunctional Changes\n\n[] New map or map update\n[] New Feature\n[x] Feature update or enhancement\n[] Feature Removal\n[] Code Cleanup or refactor\n[] Configuration Change\n[x] Problem fix: error messaging improvement \n[] Other:   \n\nBefore\n\nSEVERE: null\ngames.strategy.engine.framework.startup.launcher.MapNotFoundException\nat games.strategy.triplea.ResourceLoader.getMapResourceLoader(ResourceLoader.java:87)\nat org.triplea.util.LocalizeHtml.localizeImgLinksInHtml(LocalizeHtml.java:45)\nat games.strategy.engine.framework.ui.GameChooser.updateInfoPanel(GameChooser.java:166)\nat games.strategy.engine.framework.ui.GameChooser.lambda$setupListeners$4(GameChooser.java:195)\n\nAfter\n\nSEVERE: Could not find map: steampunk\nNot found, searched these locations:\n/home/dan/triplea/downloadedMaps/steampunk/map\n/home/dan/triplea/downloadedMaps/steampunk\n/home/dan/triplea/downloadedMaps/steampunk-master/map\n/home/dan/triplea/downloadedMaps/steampunk-master\n/home/dan/triplea/downloadedMaps/steampunk.zip\n/home/dan/triplea/downloadedMaps/steampunk-master.zip\n/home/dan/triplea/downloadedMaps/steampunk.zip", "createdAt": "2020-05-15T07:03:59Z", "url": "https://github.com/triplea-game/triplea/pull/6473", "merged": true, "mergeCommit": {"oid": "abb7c6b551ae49be6c77f5e9442fbbdb564b0bd6"}, "closed": true, "closedAt": "2020-05-16T23:08:14Z", "author": {"login": "DanVanAtta"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchckjXgH2gAyNDE4NDE0NjQyOjk0ZDMyYTJjMTMyMDc0YTU0NjhhNDM1ZjU4Y2RhNmZlYTdlNDk2ZWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABch-ocEAFqTQxMzExMzQyNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "94d32a2c132074a5468a435f58cda6fea7e496ed", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/94d32a2c132074a5468a435f58cda6fea7e496ed", "committedDate": "2020-05-15T07:02:51Z", "message": "Improve map not found error messaging\n\nTell the user the name of the map that could not be found\nand the paths on file system that were searched."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b736d453daa9e6c532b5a76515a358de6802e17e", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/b736d453daa9e6c532b5a76515a358de6802e17e", "committedDate": "2020-05-15T07:08:50Z", "message": "Further improve error message and remove unused exception constructor."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMTEzMzcz", "url": "https://github.com/triplea-game/triplea/pull/6473#pullrequestreview-413113373", "createdAt": "2020-05-16T22:42:20Z", "commit": {"oid": "b736d453daa9e6c532b5a76515a358de6802e17e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMTEzNDI2", "url": "https://github.com/triplea-game/triplea/pull/6473#pullrequestreview-413113426", "createdAt": "2020-05-16T22:43:51Z", "commit": {"oid": "b736d453daa9e6c532b5a76515a358de6802e17e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNlQyMjo0Mzo1MlrOGWdCeA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNlQyMjo0Mzo1MlrOGWdCeA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE5NzYyNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        + candidatePaths.stream().map(File::getAbsolutePath).collect(Collectors.joining(\"\\n\")));\n          \n          \n            \n                        + candidatePaths.stream().map(File::getAbsolutePath).distinct().collect(Collectors.joining(\"\\n\")));\n          \n      \n    \n    \n  \n\nIf you want to \"fix\" the issue mentioned by @Cernelius you could just add this call for now \ud83e\udd37", "url": "https://github.com/triplea-game/triplea/pull/6473#discussion_r426197624", "createdAt": "2020-05-16T22:43:52Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/engine/framework/startup/launcher/MapNotFoundException.java", "diffHunk": "@@ -1,11 +1,25 @@\n package games.strategy.engine.framework.startup.launcher;\n \n+import java.io.File;\n+import java.util.List;\n+import java.util.stream.Collectors;\n+\n /**\n  * An unchecked exception indicating the map associated with a save game was not found and must be\n  * installed before game play can begin.\n  */\n public class MapNotFoundException extends IllegalStateException {\n   private static final long serialVersionUID = -1027460394367073991L;\n \n-  public MapNotFoundException() {}\n+  public MapNotFoundException(final String mapName, final List<File> candidatePaths) {\n+    super(\n+        \"Could not find map: \"\n+            + mapName\n+            + \"\\nTypically this will be because the map is not downloaded.\"\n+            + \"\\n\\nIf you are *sure* you have the map, double check that the\"\n+            + \"\\ngame XML can be found under one of the locations listed below\"\n+            + \"\\nand the 'mapName' XML attribute in the XML file has the correct name.\"\n+            + \"\\nSearched these locations:\\n\"\n+            + candidatePaths.stream().map(File::getAbsolutePath).collect(Collectors.joining(\"\\n\")));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b736d453daa9e6c532b5a76515a358de6802e17e"}, "originalPosition": 24}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3426, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}