{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2MjM1MzYy", "number": 6713, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQwNzo1NTo1NFrOEGo-wA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQwNzo1NTo1NFrOEGo-wA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1Mzk4MzM2OnYy", "diffSide": "RIGHT", "path": "game-core/src/main/java/games/strategy/triplea/ui/UnitChooser.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQwNzo1NTo1NFrOGlj1pg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMVQxODoxNzo1M1rOGmtc0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjAzNzY3MA==", "bodyText": "Actually I think it would be better to just move initialisation and deklaration out of the loop, up one line", "url": "https://github.com/triplea-game/triplea/pull/6713#discussion_r442037670", "createdAt": "2020-06-18T07:55:54Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/UnitChooser.java", "diffHunk": "@@ -418,7 +418,9 @@ void disableMax() {\n       defaultHits = new ArrayList<>(Math.max(1, category.getHitPoints() - category.getDamaged()));\n       final int numUnits = category.getUnits().size();\n       int hitsUsedSoFar = 0;\n-      for (int i = 0; i < Math.max(1, category.getHitPoints() - category.getDamaged()); i++) {\n+      for (int i = 0, m = Math.max(1, category.getHitPoints() - category.getDamaged());\n+          i < m;\n+          i++) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "559c0eb4c4c7a14bb5e540e1d70b74147744af71"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI0MjA0Mw==", "bodyText": "IE, convert the for loop to a while loop?", "url": "https://github.com/triplea-game/triplea/pull/6713#discussion_r443242043", "createdAt": "2020-06-21T17:55:35Z", "author": {"login": "DanVanAtta"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/UnitChooser.java", "diffHunk": "@@ -418,7 +418,9 @@ void disableMax() {\n       defaultHits = new ArrayList<>(Math.max(1, category.getHitPoints() - category.getDamaged()));\n       final int numUnits = category.getUnits().size();\n       int hitsUsedSoFar = 0;\n-      for (int i = 0; i < Math.max(1, category.getHitPoints() - category.getDamaged()); i++) {\n+      for (int i = 0, m = Math.max(1, category.getHitPoints() - category.getDamaged());\n+          i < m;\n+          i++) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjAzNzY3MA=="}, "originalCommit": {"oid": "559c0eb4c4c7a14bb5e540e1d70b74147744af71"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI0MjMyMQ==", "bodyText": "Not really, just the constant variable 'm'", "url": "https://github.com/triplea-game/triplea/pull/6713#discussion_r443242321", "createdAt": "2020-06-21T17:59:30Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/UnitChooser.java", "diffHunk": "@@ -418,7 +418,9 @@ void disableMax() {\n       defaultHits = new ArrayList<>(Math.max(1, category.getHitPoints() - category.getDamaged()));\n       final int numUnits = category.getUnits().size();\n       int hitsUsedSoFar = 0;\n-      for (int i = 0; i < Math.max(1, category.getHitPoints() - category.getDamaged()); i++) {\n+      for (int i = 0, m = Math.max(1, category.getHitPoints() - category.getDamaged());\n+          i < m;\n+          i++) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjAzNzY3MA=="}, "originalCommit": {"oid": "559c0eb4c4c7a14bb5e540e1d70b74147744af71"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI0MzcyOA==", "bodyText": "That has a problem where the m gets increased scoping compared to what's needed.\nFWIW, computing loop termination conditions like this used to be quite idiomatic. PMD used to recommend it. This performance improvement I think just became less common with Java 1.5 and for-each loops as there are usually better ways to iterate and iterating with a non-constant loop condition is less common.", "url": "https://github.com/triplea-game/triplea/pull/6713#discussion_r443243728", "createdAt": "2020-06-21T18:17:53Z", "author": {"login": "DanVanAtta"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/UnitChooser.java", "diffHunk": "@@ -418,7 +418,9 @@ void disableMax() {\n       defaultHits = new ArrayList<>(Math.max(1, category.getHitPoints() - category.getDamaged()));\n       final int numUnits = category.getUnits().size();\n       int hitsUsedSoFar = 0;\n-      for (int i = 0; i < Math.max(1, category.getHitPoints() - category.getDamaged()); i++) {\n+      for (int i = 0, m = Math.max(1, category.getHitPoints() - category.getDamaged());\n+          i < m;\n+          i++) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjAzNzY3MA=="}, "originalCommit": {"oid": "559c0eb4c4c7a14bb5e540e1d70b74147744af71"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2040, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}