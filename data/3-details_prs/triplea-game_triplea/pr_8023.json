{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEzNDczODQ1", "number": 8023, "title": "Only skip giveUnitControl if the value is false or true", "bodyText": "Fixes #7990\nIn #1033, @Cernelius said to remove giveUnitControl if its values was a boolean.  But he said to leave it alone if the value wasn't a boolean.  In #7631, it was just skipped without looking at the value.  This changes it to check the value and only skip it if it is a boolean.\nI think this breaks all of the world_war_ii_global games as well as several others.\nTesting\nPlayed World War 2 Global 1940 2nd to UK_Pacific Place round, placed some units in India, finished the place round and checked that the new units are now British units.\nScreens Shots\n\nAdditional Notes to Reviewer\n\nRelease Note\n\nFIX|World War 2 Global will correctly switch unit ownership of units placed in India from UK_Pacific to British.", "createdAt": "2020-10-31T17:56:39Z", "url": "https://github.com/triplea-game/triplea/pull/8023", "merged": true, "mergeCommit": {"oid": "a3335ff010371e89044aee4490c8ce08cc396392"}, "closed": true, "closedAt": "2020-11-01T02:16:19Z", "author": {"login": "trevan"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdX_GXeAH2gAyNTEzNDczODQ1OjAyY2U4OTE1ZjAzNDUzOTgwYTNmZjU4ZGJmODQxM2EyYzk1MTU0YWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdYGXErgFqTUyMTE4Njk1OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "02ce8915f03453980a3ff58dbf8413a2c95154ae", "author": {"user": {"login": "trevan", "name": null}}, "url": "https://github.com/triplea-game/triplea/commit/02ce8915f03453980a3ff58dbf8413a2c95154ae", "committedDate": "2020-10-31T17:48:28Z", "message": "Only skip giveUnitControl if the value is false or true"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMTg0Mzgx", "url": "https://github.com/triplea-game/triplea/pull/8023#pullrequestreview-521184381", "createdAt": "2020-11-01T01:08:12Z", "commit": {"oid": "02ce8915f03453980a3ff58dbf8413a2c95154ae"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMVQwMTowODoxMlrOHrrUEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMVQwMTowODoxMlrOHrrUEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTU2MDQ2NA==", "bodyText": "Would you mind explaining why this if block is moved down @trevan ?\nIf we are going to ignore an option, why should we execute option.getValue() or option.getCount(), wouldn't those just be dead stores?", "url": "https://github.com/triplea-game/triplea/pull/8023#discussion_r515560464", "createdAt": "2020-11-01T01:08:12Z", "author": {"login": "DanVanAtta"}, "path": "game-core/src/main/java/games/strategy/engine/data/gameparser/GameParser.java", "diffHunk": "@@ -895,16 +895,16 @@ private Attachable findAttachment(\n       }\n       // decapitalize the property name for backwards compatibility\n       final String name = LegacyPropertyMapper.mapLegacyOptionName(decapitalize(option.getName()));\n-      if (LegacyPropertyMapper.ignoreOptionName(name)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "02ce8915f03453980a3ff58dbf8413a2c95154ae"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMTg0NDE3", "url": "https://github.com/triplea-game/triplea/pull/8023#pullrequestreview-521184417", "createdAt": "2020-11-01T01:08:58Z", "commit": {"oid": "02ce8915f03453980a3ff58dbf8413a2c95154ae"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMVQwMTowODo1OFrOHrrUNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMVQwMTowODo1OFrOHrrUNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTU2MDUwMQ==", "bodyText": "Are you positive that value could never be null here? I don't remember if we translate empty values to empty strings or null values.", "url": "https://github.com/triplea-game/triplea/pull/8023#discussion_r515560501", "createdAt": "2020-11-01T01:08:58Z", "author": {"login": "DanVanAtta"}, "path": "game-core/src/main/java/games/strategy/engine/data/gameparser/LegacyPropertyMapper.java", "diffHunk": "@@ -55,7 +55,9 @@ public String mapPropertyName(final String propertyName) {\n     return propertyName;\n   }\n \n-  static boolean ignoreOptionName(final String name) {\n-    return name.equalsIgnoreCase(\"takeUnitControl\") || name.equalsIgnoreCase(\"giveUnitControl\");\n+  static boolean ignoreOptionName(final String name, final String value) {\n+    return name.equalsIgnoreCase(\"takeUnitControl\")\n+        || (name.equalsIgnoreCase(\"giveUnitControl\")\n+            && (value.equals(\"false\") || value.equals(\"true\")));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "02ce8915f03453980a3ff58dbf8413a2c95154ae"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ca0fbfc85874a93cfa1fc8dd73df934fae1a41f", "author": {"user": {"login": "trevan", "name": null}}, "url": "https://github.com/triplea-game/triplea/commit/5ca0fbfc85874a93cfa1fc8dd73df934fae1a41f", "committedDate": "2020-11-01T02:01:26Z", "message": "Ignore giveUnitControl if its value is null"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxMTg2OTU4", "url": "https://github.com/triplea-game/triplea/pull/8023#pullrequestreview-521186958", "createdAt": "2020-11-01T02:16:03Z", "commit": {"oid": "5ca0fbfc85874a93cfa1fc8dd73df934fae1a41f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3906, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}