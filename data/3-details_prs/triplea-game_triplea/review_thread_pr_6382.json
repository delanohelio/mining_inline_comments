{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzMTI5Mjc4", "number": 6382, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxMTozODowOVrOD5XRFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxMTozOTozMlrOD5XS3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxNDc2NjI5OnYy", "diffSide": "RIGHT", "path": "http-server/src/main/java/org/triplea/modules/error/reporting/ErrorReportController.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxMTozODowOVrOGQla6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNzoyNTo0MlrOGQz6aA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDA0MzQ5Nw==", "bodyText": "What about checking !isTest || !configuration.isProd() or !(isTest && configuration.isProd()) instead of the if block?", "url": "https://github.com/triplea-game/triplea/pull/6382#discussion_r420043497", "createdAt": "2020-05-05T11:38:09Z", "author": {"login": "RoiEXLab"}, "path": "http-server/src/main/java/org/triplea/modules/error/reporting/ErrorReportController.java", "diffHunk": "@@ -27,15 +27,18 @@\n   private final BiFunction<String, ErrorReportRequest, ErrorReportResponse> errorReportIngestion;\n \n   public static ErrorReportController build(final AppConfig configuration, final Jdbi jdbi) {\n+    final boolean isTest = configuration.getGithubApiToken().equals(\"test\");\n+\n     final GithubIssueClient githubIssueClient =\n         GithubIssueClient.builder()\n             .uri(AppConfig.GITHUB_WEB_SERVICE_API_URL)\n             .authToken(configuration.getGithubApiToken())\n             .githubOrg(AppConfig.GITHUB_ORG)\n             .githubRepo(configuration.getGithubRepo())\n+            .isTest(isTest)\n             .build();\n \n-    if (githubIssueClient.isTest()) {\n+    if (isTest) {\n       Preconditions.checkState(!configuration.isProd());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "30a92de3743dfdadcadbb6e90a902ba4442d9d22"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDI3OTk1MA==", "bodyText": "I was/am tempted, though I'm not sure it's actually simpler to reason about.", "url": "https://github.com/triplea-game/triplea/pull/6382#discussion_r420279950", "createdAt": "2020-05-05T17:24:12Z", "author": {"login": "DanVanAtta"}, "path": "http-server/src/main/java/org/triplea/modules/error/reporting/ErrorReportController.java", "diffHunk": "@@ -27,15 +27,18 @@\n   private final BiFunction<String, ErrorReportRequest, ErrorReportResponse> errorReportIngestion;\n \n   public static ErrorReportController build(final AppConfig configuration, final Jdbi jdbi) {\n+    final boolean isTest = configuration.getGithubApiToken().equals(\"test\");\n+\n     final GithubIssueClient githubIssueClient =\n         GithubIssueClient.builder()\n             .uri(AppConfig.GITHUB_WEB_SERVICE_API_URL)\n             .authToken(configuration.getGithubApiToken())\n             .githubOrg(AppConfig.GITHUB_ORG)\n             .githubRepo(configuration.getGithubRepo())\n+            .isTest(isTest)\n             .build();\n \n-    if (githubIssueClient.isTest()) {\n+    if (isTest) {\n       Preconditions.checkState(!configuration.isProd());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDA0MzQ5Nw=="}, "originalCommit": {"oid": "30a92de3743dfdadcadbb6e90a902ba4442d9d22"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDI4MDkzNg==", "bodyText": "Same, it's kind of a weird thing to check though", "url": "https://github.com/triplea-game/triplea/pull/6382#discussion_r420280936", "createdAt": "2020-05-05T17:25:42Z", "author": {"login": "RoiEXLab"}, "path": "http-server/src/main/java/org/triplea/modules/error/reporting/ErrorReportController.java", "diffHunk": "@@ -27,15 +27,18 @@\n   private final BiFunction<String, ErrorReportRequest, ErrorReportResponse> errorReportIngestion;\n \n   public static ErrorReportController build(final AppConfig configuration, final Jdbi jdbi) {\n+    final boolean isTest = configuration.getGithubApiToken().equals(\"test\");\n+\n     final GithubIssueClient githubIssueClient =\n         GithubIssueClient.builder()\n             .uri(AppConfig.GITHUB_WEB_SERVICE_API_URL)\n             .authToken(configuration.getGithubApiToken())\n             .githubOrg(AppConfig.GITHUB_ORG)\n             .githubRepo(configuration.getGithubRepo())\n+            .isTest(isTest)\n             .build();\n \n-    if (githubIssueClient.isTest()) {\n+    if (isTest) {\n       Preconditions.checkState(!configuration.isProd());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDA0MzQ5Nw=="}, "originalCommit": {"oid": "30a92de3743dfdadcadbb6e90a902ba4442d9d22"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxNDc3MDg3OnYy", "diffSide": "RIGHT", "path": "http-clients/src/main/java/org/triplea/http/client/github/issues/CreateIssueRequest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxMTozOTozMlrOGQldmw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNzoyMzowM1rOGQzzog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDA0NDE4Nw==", "bodyText": "Is 20000 a github limit?", "url": "https://github.com/triplea-game/triplea/pull/6382#discussion_r420044187", "createdAt": "2020-05-05T11:39:32Z", "author": {"login": "RoiEXLab"}, "path": "http-clients/src/main/java/org/triplea/http/client/github/issues/CreateIssueRequest.java", "diffHunk": "@@ -0,0 +1,28 @@\n+package org.triplea.http.client.github.issues;\n+\n+import com.google.common.base.Ascii;\n+import lombok.AllArgsConstructor;\n+import lombok.Builder;\n+import lombok.EqualsAndHashCode;\n+import lombok.NoArgsConstructor;\n+import lombok.ToString;\n+\n+/** Represents request data to create a github issue. */\n+@ToString\n+@EqualsAndHashCode\n+@Builder\n+@NoArgsConstructor\n+@AllArgsConstructor\n+public class CreateIssueRequest {\n+  private String title;\n+  private String body;\n+  private String[] labels;\n+\n+  public String getTitle() {\n+    return title == null ? null : Ascii.truncate(title, 125, \"...\");\n+  }\n+\n+  public String getBody() {\n+    return body == null ? null : Ascii.truncate(body, 20000, \"...\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "30a92de3743dfdadcadbb6e90a902ba4442d9d22"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDI3OTIwMg==", "bodyText": "no, it's somewhat arbitrary. This request object is lifted from the error upload request object. Before we had the same request object between client, server, and github. So this limit is just carried forward from that previous object. The fact that they match now I'm not sure is actually important. It still might be better to document that this is an arbitrarily large number.", "url": "https://github.com/triplea-game/triplea/pull/6382#discussion_r420279202", "createdAt": "2020-05-05T17:23:03Z", "author": {"login": "DanVanAtta"}, "path": "http-clients/src/main/java/org/triplea/http/client/github/issues/CreateIssueRequest.java", "diffHunk": "@@ -0,0 +1,28 @@\n+package org.triplea.http.client.github.issues;\n+\n+import com.google.common.base.Ascii;\n+import lombok.AllArgsConstructor;\n+import lombok.Builder;\n+import lombok.EqualsAndHashCode;\n+import lombok.NoArgsConstructor;\n+import lombok.ToString;\n+\n+/** Represents request data to create a github issue. */\n+@ToString\n+@EqualsAndHashCode\n+@Builder\n+@NoArgsConstructor\n+@AllArgsConstructor\n+public class CreateIssueRequest {\n+  private String title;\n+  private String body;\n+  private String[] labels;\n+\n+  public String getTitle() {\n+    return title == null ? null : Ascii.truncate(title, 125, \"...\");\n+  }\n+\n+  public String getBody() {\n+    return body == null ? null : Ascii.truncate(body, 20000, \"...\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDA0NDE4Nw=="}, "originalCommit": {"oid": "30a92de3743dfdadcadbb6e90a902ba4442d9d22"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2332, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}