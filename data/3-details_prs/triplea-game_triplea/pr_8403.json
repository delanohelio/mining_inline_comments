{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM2NDA3MTEx", "number": 8403, "title": "Add a method to CompositeChange to return a flattened version", "bodyText": "Testing\n\nScreens Shots\n\nAdditional Notes to Reviewer\n\nRelease Note", "createdAt": "2020-12-11T02:06:03Z", "url": "https://github.com/triplea-game/triplea/pull/8403", "merged": true, "mergeCommit": {"oid": "218499a4037bb3ccd66bc73989d97b79a1022838"}, "closed": true, "closedAt": "2020-12-15T04:59:44Z", "author": {"login": "trevan"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdk-LSSgH2gAyNTM2NDA3MTExOjJjYzZjZjdmNWViMTQxNjU5MDQyODhiZTU1ZmFhOWFiOGJiMmQ1ZWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmR7JigH2gAyNTM2NDA3MTExOjZjMTFjNzI0MjFhMjY1NmUxZWI3MTUzYWRmMDY0YmQ5MmVmMjc2OGU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2cc6cf7f5eb14165904288be55faa9ab8bb2d5ee", "author": {"user": {"login": "trevan", "name": null}}, "url": "https://github.com/triplea-game/triplea/commit/2cc6cf7f5eb14165904288be55faa9ab8bb2d5ee", "committedDate": "2020-12-11T02:04:57Z", "message": "Add a method to CompositeChange to return a flattened version"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwODg0MzY4", "url": "https://github.com/triplea-game/triplea/pull/8403#pullrequestreview-550884368", "createdAt": "2020-12-13T04:44:09Z", "commit": {"oid": "2cc6cf7f5eb14165904288be55faa9ab8bb2d5ee"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QwNDo0NDowOVrOIEvg0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xM1QwNDo0NToyN1rOIEvhaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTg0MzY2NQ==", "bodyText": "Couple more test cases to consider having:\n\ntrivial case where there is a single composite change and the input is the same as output\ndeeply nested (more than 2) singleton change", "url": "https://github.com/triplea-game/triplea/pull/8403#discussion_r541843665", "createdAt": "2020-12-13T04:44:09Z", "author": {"login": "DanVanAtta"}, "path": "game-core/src/test/java/games/strategy/engine/data/CompositeChangeTest.java", "diffHunk": "@@ -0,0 +1,41 @@\n+package games.strategy.engine.data;\n+\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.hasSize;\n+import static org.mockito.Mockito.mock;\n+import static org.mockito.Mockito.when;\n+\n+import games.strategy.engine.data.changefactory.ChangeFactory;\n+import java.util.List;\n+import org.junit.jupiter.api.Test;\n+\n+class CompositeChangeTest {\n+\n+  @Test\n+  void flattenChanges() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2cc6cf7f5eb14165904288be55faa9ab8bb2d5ee"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTg0Mzc4OQ==", "bodyText": "nit: A ternary would be worth consider having here, would make the lambda syntax a bit nicer.", "url": "https://github.com/triplea-game/triplea/pull/8403#discussion_r541843789", "createdAt": "2020-12-13T04:45:12Z", "author": {"login": "DanVanAtta"}, "path": "game-core/src/main/java/games/strategy/engine/data/CompositeChange.java", "diffHunk": "@@ -22,6 +24,21 @@ public CompositeChange(final List<Change> changes) {\n     this.changes = new ArrayList<>(changes);\n   }\n \n+  public CompositeChange flatten() {\n+    return new CompositeChange(\n+        changes.stream()\n+            .map(\n+                change -> {\n+                  if (change instanceof CompositeChange) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2cc6cf7f5eb14165904288be55faa9ab8bb2d5ee"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTg0MzgxOQ==", "bodyText": "Could use a javadoc IMO, particularly considering the method is recursive.", "url": "https://github.com/triplea-game/triplea/pull/8403#discussion_r541843819", "createdAt": "2020-12-13T04:45:27Z", "author": {"login": "DanVanAtta"}, "path": "game-core/src/main/java/games/strategy/engine/data/CompositeChange.java", "diffHunk": "@@ -22,6 +24,21 @@ public CompositeChange(final List<Change> changes) {\n     this.changes = new ArrayList<>(changes);\n   }\n \n+  public CompositeChange flatten() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2cc6cf7f5eb14165904288be55faa9ab8bb2d5ee"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "96776a269191543a3fc7981b29c14e73525dd1f5", "author": {"user": {"login": "trevan", "name": null}}, "url": "https://github.com/triplea-game/triplea/commit/96776a269191543a3fc7981b29c14e73525dd1f5", "committedDate": "2020-12-14T23:58:03Z", "message": "Add additional tests and documentation"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c11c72421a2656e1eb7153adf064bd92ef2768e", "author": {"user": {"login": "trevan", "name": null}}, "url": "https://github.com/triplea-game/triplea/commit/6c11c72421a2656e1eb7153adf064bd92ef2768e", "committedDate": "2020-12-15T03:39:21Z", "message": "Add single change nested test"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3812, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}