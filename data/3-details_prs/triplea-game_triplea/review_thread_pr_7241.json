{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2NTUyMDIy", "number": 7241, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQwNDo0NTo1NFrOESBLyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQxMTo0ODoxMlrOESC4Pg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3MzI5MjI2OnYy", "diffSide": "RIGHT", "path": "game-core/src/main/java/games/strategy/triplea/ui/menubar/help/UnitStatsTable.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQwNDo0NTo1NFrOG3CbPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQwNDo0NTo1NFrOG3CbPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM2NDYwNQ==", "bodyText": "Method getUnitStatsTable has 60 lines of code (exceeds 30 allowed). Consider refactoring.", "url": "https://github.com/triplea-game/triplea/pull/7241#discussion_r460364605", "createdAt": "2020-07-25T04:45:54Z", "author": {"login": "codeclimate"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/menubar/help/UnitStatsTable.java", "diffHunk": "@@ -0,0 +1,95 @@\n+package games.strategy.triplea.ui.menubar.help;\n+\n+import games.strategy.engine.data.GameData;\n+import games.strategy.engine.data.GamePlayer;\n+import games.strategy.engine.data.ResourceCollection;\n+import games.strategy.engine.data.UnitType;\n+import games.strategy.triplea.image.UnitImageFactory;\n+import games.strategy.triplea.ui.TooltipProperties;\n+import games.strategy.triplea.ui.UiContext;\n+import games.strategy.triplea.util.TuvUtils;\n+import java.net.URL;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+import lombok.experimental.UtilityClass;\n+\n+@UtilityClass\n+public class UnitStatsTable {\n+\n+  public static String getUnitStatsTable(final GameData gameData, final UiContext uiContext) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c895c4048ecd8df243526fb2b6301f249df31b5"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3MzI5MjI3OnYy", "diffSide": "RIGHT", "path": "game-core/src/main/java/games/strategy/triplea/ui/menubar/help/MoveHelpMenu.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQwNDo0NTo1NFrOG3CbPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQwNDo0NTo1NFrOG3CbPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM2NDYwNw==", "bodyText": "Method buildMenu has 59 lines of code (exceeds 30 allowed). Consider refactoring.", "url": "https://github.com/triplea-game/triplea/pull/7241#discussion_r460364607", "createdAt": "2020-07-25T04:45:54Z", "author": {"login": "codeclimate"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/menubar/help/MoveHelpMenu.java", "diffHunk": "@@ -0,0 +1,76 @@\n+package games.strategy.triplea.ui.menubar.help;\n+\n+import javax.swing.Action;\n+import javax.swing.JEditorPane;\n+import javax.swing.JOptionPane;\n+import javax.swing.JScrollPane;\n+import lombok.experimental.UtilityClass;\n+import org.triplea.swing.SwingAction;\n+\n+@UtilityClass\n+class MoveHelpMenu {\n+  private static final String moveSelectionHelpTitle = \"Movement/Selection Help\";\n+\n+  Action buildMenu() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c895c4048ecd8df243526fb2b6301f249df31b5"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3MzI5MjI4OnYy", "diffSide": "RIGHT", "path": "game-core/src/main/java/games/strategy/triplea/ui/menubar/help/MoveHelpMenu.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQwNDo0NTo1NFrOG3CbQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQwNDo0NTo1NFrOG3CbQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM2NDYwOA==", "bodyText": "Similar blocks of code found in 2 locations. Consider refactoring.", "url": "https://github.com/triplea-game/triplea/pull/7241#discussion_r460364608", "createdAt": "2020-07-25T04:45:54Z", "author": {"login": "codeclimate"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/menubar/help/MoveHelpMenu.java", "diffHunk": "@@ -0,0 +1,76 @@\n+package games.strategy.triplea.ui.menubar.help;\n+\n+import javax.swing.Action;\n+import javax.swing.JEditorPane;\n+import javax.swing.JOptionPane;\n+import javax.swing.JScrollPane;\n+import lombok.experimental.UtilityClass;\n+import org.triplea.swing.SwingAction;\n+\n+@UtilityClass\n+class MoveHelpMenu {\n+  private static final String moveSelectionHelpTitle = \"Movement/Selection Help\";\n+\n+  Action buildMenu() {\n+    return SwingAction.of(\n+        moveSelectionHelpTitle,\n+        e -> {\n+          // html formatted string\n+          final JEditorPane editorPane = new JEditorPane();\n+          editorPane.setEditable(false);\n+          editorPane.setContentType(\"text/html\");\n+          final String hints =\n+              \"<b> Selecting Units</b><br>\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c895c4048ecd8df243526fb2b6301f249df31b5"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3MzU1OTYwOnYy", "diffSide": "RIGHT", "path": "game-core/src/main/java/games/strategy/triplea/ui/menubar/help/UnitStatsTable.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQxMTozMzoyMFrOG3EV_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQxMTo0MToxM1rOG3EYag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM5NjAyOA==", "bodyText": "Not related to this PR, but ((i & 1) == 0) is way more complicated than using i % 2 == 0", "url": "https://github.com/triplea-game/triplea/pull/7241#discussion_r460396028", "createdAt": "2020-07-25T11:33:20Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/menubar/help/UnitStatsTable.java", "diffHunk": "@@ -0,0 +1,93 @@\n+package games.strategy.triplea.ui.menubar.help;\n+\n+import games.strategy.engine.data.GameData;\n+import games.strategy.engine.data.GamePlayer;\n+import games.strategy.engine.data.ResourceCollection;\n+import games.strategy.engine.data.UnitType;\n+import games.strategy.triplea.image.UnitImageFactory;\n+import games.strategy.triplea.ui.TooltipProperties;\n+import games.strategy.triplea.ui.UiContext;\n+import games.strategy.triplea.util.TuvUtils;\n+import java.net.URL;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+\n+public class UnitStatsTable {\n+\n+  public static String getUnitStatsTable(final GameData gameData, final UiContext uiContext) {\n+    // html formatted string\n+    final StringBuilder hints = new StringBuilder();\n+    hints.append(\"<html>\");\n+    hints.append(\"<head><style>th, tr{color:black}</style></head>\");\n+    try {\n+      gameData.acquireReadLock();\n+      final Map<GamePlayer, Map<UnitType, ResourceCollection>> costs =\n+          TuvUtils.getResourceCostsForTuv(gameData, true);\n+      final Map<GamePlayer, List<UnitType>> playerUnitTypes =\n+          UnitType.getAllPlayerUnitsWithImages(gameData, uiContext, true);\n+      final String color3 = \"FEECE2\";\n+      final String color2 = \"BDBDBD\";\n+      final String color1 = \"ABABAB\";\n+      int i = 0;\n+      for (final Map.Entry<GamePlayer, List<UnitType>> entry : playerUnitTypes.entrySet()) {\n+        final GamePlayer player = entry.getKey();\n+        hints.append(\"<p><table border=\\\"1\\\" bgcolor=\\\"\" + color1 + \"\\\">\");\n+        hints\n+            .append(\n+                \"<tr><th style=\\\"font-size:120%;000000\\\" bgcolor=\\\"\" + color3 + \"\\\" colspan=\\\"4\\\">\")\n+            .append(player == null ? \"NULL\" : player.getName())\n+            .append(\" Units</th></tr>\");\n+        hints\n+            .append(\"<tr\")\n+            .append(((i & 1) == 0) ? \" bgcolor=\\\"\" + color1 + \"\\\"\" : \" bgcolor=\\\"\" + color2 + \"\\\"\")\n+            .append(\"><td>Unit</td><td>Name</td><td>Cost</td><td>Tool Tip</td></tr>\");\n+        for (final UnitType ut : entry.getValue()) {\n+          if (uiContext.getMapData().shouldDrawUnit(ut.getName())) {\n+            i++;\n+            hints\n+                .append(\"<tr\")\n+                .append(\n+                    ((i & 1) == 0) ? \" bgcolor=\\\"\" + color1 + \"\\\"\" : \" bgcolor=\\\"\" + color2 + \"\\\"\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c8fd34a3eafd56b63eeeb2bd89f54440ba26e2a"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM5NjY1MA==", "bodyText": "Another Side-Note:\nThe ternary expression could also just be used for the actual color, to avoid the duplicate bgcolor= part around it.\nRant Warning!\nWe use a lot of HTML inside swing, which makes this kind of stuff easier to layout but at the same time I think this is a place where simply going with a lot of swing objects would be the best move.\nAlso in the HTML world using stuff like bgcolor is only done for legacy browser engines, nowadays you'd just write something like\ntr {\n  background-color: /*color 1 */;\n}\ntr:nth-child(2n) {\n  background-color: /* color 2 */;\n}\n\nwhich makes the browser alternate between the colors automatically", "url": "https://github.com/triplea-game/triplea/pull/7241#discussion_r460396650", "createdAt": "2020-07-25T11:41:13Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/menubar/help/UnitStatsTable.java", "diffHunk": "@@ -0,0 +1,93 @@\n+package games.strategy.triplea.ui.menubar.help;\n+\n+import games.strategy.engine.data.GameData;\n+import games.strategy.engine.data.GamePlayer;\n+import games.strategy.engine.data.ResourceCollection;\n+import games.strategy.engine.data.UnitType;\n+import games.strategy.triplea.image.UnitImageFactory;\n+import games.strategy.triplea.ui.TooltipProperties;\n+import games.strategy.triplea.ui.UiContext;\n+import games.strategy.triplea.util.TuvUtils;\n+import java.net.URL;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+\n+public class UnitStatsTable {\n+\n+  public static String getUnitStatsTable(final GameData gameData, final UiContext uiContext) {\n+    // html formatted string\n+    final StringBuilder hints = new StringBuilder();\n+    hints.append(\"<html>\");\n+    hints.append(\"<head><style>th, tr{color:black}</style></head>\");\n+    try {\n+      gameData.acquireReadLock();\n+      final Map<GamePlayer, Map<UnitType, ResourceCollection>> costs =\n+          TuvUtils.getResourceCostsForTuv(gameData, true);\n+      final Map<GamePlayer, List<UnitType>> playerUnitTypes =\n+          UnitType.getAllPlayerUnitsWithImages(gameData, uiContext, true);\n+      final String color3 = \"FEECE2\";\n+      final String color2 = \"BDBDBD\";\n+      final String color1 = \"ABABAB\";\n+      int i = 0;\n+      for (final Map.Entry<GamePlayer, List<UnitType>> entry : playerUnitTypes.entrySet()) {\n+        final GamePlayer player = entry.getKey();\n+        hints.append(\"<p><table border=\\\"1\\\" bgcolor=\\\"\" + color1 + \"\\\">\");\n+        hints\n+            .append(\n+                \"<tr><th style=\\\"font-size:120%;000000\\\" bgcolor=\\\"\" + color3 + \"\\\" colspan=\\\"4\\\">\")\n+            .append(player == null ? \"NULL\" : player.getName())\n+            .append(\" Units</th></tr>\");\n+        hints\n+            .append(\"<tr\")\n+            .append(((i & 1) == 0) ? \" bgcolor=\\\"\" + color1 + \"\\\"\" : \" bgcolor=\\\"\" + color2 + \"\\\"\")\n+            .append(\"><td>Unit</td><td>Name</td><td>Cost</td><td>Tool Tip</td></tr>\");\n+        for (final UnitType ut : entry.getValue()) {\n+          if (uiContext.getMapData().shouldDrawUnit(ut.getName())) {\n+            i++;\n+            hints\n+                .append(\"<tr\")\n+                .append(\n+                    ((i & 1) == 0) ? \" bgcolor=\\\"\" + color1 + \"\\\"\" : \" bgcolor=\\\"\" + color2 + \"\\\"\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM5NjAyOA=="}, "originalCommit": {"oid": "0c8fd34a3eafd56b63eeeb2bd89f54440ba26e2a"}, "originalPosition": 51}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg3MzU2OTkwOnYy", "diffSide": "RIGHT", "path": "game-core/src/main/java/games/strategy/triplea/ui/menubar/help/UnitStatsTable.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQxMTo0ODoxMlrOG3EahA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQxMTo0ODoxMlrOG3EahA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM5NzE4OA==", "bodyText": "Unrelated too, I just don't get it though\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            \"<tr><th style=\\\"font-size:120%;000000\\\" bgcolor=\\\"\" + color3 + \"\\\" colspan=\\\"4\\\">\")\n          \n          \n            \n                            \"<tr><th style=\\\"font-size:120%;\\\" bgcolor=\\\"\" + color3 + \"\\\" colspan=\\\"4\\\">\")", "url": "https://github.com/triplea-game/triplea/pull/7241#discussion_r460397188", "createdAt": "2020-07-25T11:48:12Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/menubar/help/UnitStatsTable.java", "diffHunk": "@@ -0,0 +1,93 @@\n+package games.strategy.triplea.ui.menubar.help;\n+\n+import games.strategy.engine.data.GameData;\n+import games.strategy.engine.data.GamePlayer;\n+import games.strategy.engine.data.ResourceCollection;\n+import games.strategy.engine.data.UnitType;\n+import games.strategy.triplea.image.UnitImageFactory;\n+import games.strategy.triplea.ui.TooltipProperties;\n+import games.strategy.triplea.ui.UiContext;\n+import games.strategy.triplea.util.TuvUtils;\n+import java.net.URL;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+\n+public class UnitStatsTable {\n+\n+  public static String getUnitStatsTable(final GameData gameData, final UiContext uiContext) {\n+    // html formatted string\n+    final StringBuilder hints = new StringBuilder();\n+    hints.append(\"<html>\");\n+    hints.append(\"<head><style>th, tr{color:black}</style></head>\");\n+    try {\n+      gameData.acquireReadLock();\n+      final Map<GamePlayer, Map<UnitType, ResourceCollection>> costs =\n+          TuvUtils.getResourceCostsForTuv(gameData, true);\n+      final Map<GamePlayer, List<UnitType>> playerUnitTypes =\n+          UnitType.getAllPlayerUnitsWithImages(gameData, uiContext, true);\n+      final String color3 = \"FEECE2\";\n+      final String color2 = \"BDBDBD\";\n+      final String color1 = \"ABABAB\";\n+      int i = 0;\n+      for (final Map.Entry<GamePlayer, List<UnitType>> entry : playerUnitTypes.entrySet()) {\n+        final GamePlayer player = entry.getKey();\n+        hints.append(\"<p><table border=\\\"1\\\" bgcolor=\\\"\" + color1 + \"\\\">\");\n+        hints\n+            .append(\n+                \"<tr><th style=\\\"font-size:120%;000000\\\" bgcolor=\\\"\" + color3 + \"\\\" colspan=\\\"4\\\">\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c8fd34a3eafd56b63eeeb2bd89f54440ba26e2a"}, "originalPosition": 38}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2013, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}