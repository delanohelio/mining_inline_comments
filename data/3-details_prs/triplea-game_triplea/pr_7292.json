{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYxMjE3NDI1", "number": 7292, "title": "Fix monotonic sequence issue", "bodyText": "Fix #7112\nAlso added a regression test.\nFunctional Changes\n\n[] New map or map update\n[] New Feature\n[] Feature update or enhancement\n[] Feature Removal\n[] Code Cleanup or refactor\n[] Configuration Change\n[x] Problem fix\n[] Other:   \nTesting\n\nI verified everything still seems to work.\nRelease Note\n\nFIX|Fixed an issue where rarely a NonMonotonicSequenceException  could occur when planning moves", "createdAt": "2020-08-01T15:58:02Z", "url": "https://github.com/triplea-game/triplea/pull/7292", "merged": true, "mergeCommit": {"oid": "c2d5c6a33ec94465568df05b0042564051ebaa52"}, "closed": true, "closedAt": "2020-08-02T04:23:00Z", "author": {"login": "RoiEXLab"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc6qz7GgH2gAyNDYxMjE3NDI1OjNiN2MxNzE1ZjZmMTI5MGVjMDA2YTI3ZDNjN2ViNTIyYTlhNmE0NDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc6yGhaAH2gAyNDYxMjE3NDI1OjdiZjM2YWYxMTBlZTVlZmFmNDY4MGE4NzRiMTlmYjQ1NmEzYmQzZTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3b7c1715f6f1290ec006a27d3c7eb522a9a6a447", "author": {"user": {"login": "RoiEXLab", "name": "RoiEX"}}, "url": "https://github.com/triplea-game/triplea/commit/3b7c1715f6f1290ec006a27d3c7eb522a9a6a447", "committedDate": "2020-08-01T15:46:25Z", "message": "Fix monotonic sequence issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e20dcc018169cb961c81c492c698797792e90271", "author": {"user": {"login": "RoiEXLab", "name": "RoiEX"}}, "url": "https://github.com/triplea-game/triplea/commit/e20dcc018169cb961c81c492c698797792e90271", "committedDate": "2020-08-01T15:50:02Z", "message": "Rename variable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b6446594502b4405889422f449750e85054de1b", "author": {"user": {"login": "RoiEXLab", "name": "RoiEX"}}, "url": "https://github.com/triplea-game/triplea/commit/3b6446594502b4405889422f449750e85054de1b", "committedDate": "2020-08-01T15:54:48Z", "message": "Extend tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5NjAxOTMz", "url": "https://github.com/triplea-game/triplea/pull/7292#pullrequestreview-459601933", "createdAt": "2020-08-01T20:25:36Z", "commit": {"oid": "3b6446594502b4405889422f449750e85054de1b"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMVQyMDoyNTozN1rOG6gI8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMVQyMDozMjoxOVrOG6gLHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk5NzE2OA==", "bodyText": "References are good, 'required references' are not. What would happen if every test case required you to go to a different issue to understand why the test case was there? I think duplicating some of the details from the issue will be enough so that you don't have to look at the issue to understand this (though the reference being there is good nonetheless so if someone wants even more details, they can get them).", "url": "https://github.com/triplea-game/triplea/pull/7292#discussion_r463997168", "createdAt": "2020-08-01T20:25:37Z", "author": {"login": "DanVanAtta"}, "path": "game-core/src/test/java/games/strategy/triplea/ui/panels/map/MapRouteDrawerTest.java", "diffHunk": "@@ -101,4 +107,17 @@ void testCorrectParameterHandling() {\n     verify(dummyRouteDescription, times(2)).getRoute();\n     verify(dummyRouteDescription.getRoute(), atLeastOnce()).getAllTerritories();\n   }\n+\n+  /** Regression test for https://github.com/triplea-game/triplea/issues/7112 */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b6446594502b4405889422f449750e85054de1b"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk5NzcyNA==", "bodyText": "I think we might want to make this test parameterized and include more inputs. In this case we can assert that the output array is always equal in length to the input array and second the index checks can be converted to a simple for loop that verifies each element is less than the next.\nSome interesting test cases to consider:\n\nzero length array\nsingleton array (with zero)\nsingleton array with negative\nsingleton array with positive\nduplicate values other than zero\nout of order values\nmixture of positive and then negative values and then positive values (IE: -1, 1, -1, 1, 0, 1, -1, 0, -1)", "url": "https://github.com/triplea-game/triplea/pull/7292#discussion_r463997724", "createdAt": "2020-08-01T20:32:19Z", "author": {"login": "DanVanAtta"}, "path": "game-core/src/test/java/games/strategy/triplea/ui/panels/map/MapRouteDrawerTest.java", "diffHunk": "@@ -101,4 +107,17 @@ void testCorrectParameterHandling() {\n     verify(dummyRouteDescription, times(2)).getRoute();\n     verify(dummyRouteDescription.getRoute(), atLeastOnce()).getAllTerritories();\n   }\n+\n+  /** Regression test for https://github.com/triplea-game/triplea/issues/7112 */\n+  @Test\n+  void verifySequenceIsTrulyMonotonic() {\n+    final MapRouteDrawer routeDrawer = new MapRouteDrawer(mock(MapPanel.class), dummyMapData);\n+    final double[] index =\n+        routeDrawer.newParameterizedIndex(\n+            new Point2D[] {new Double(0, 0), new Double(0, 0), new Double(0, 0)});", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b6446594502b4405889422f449750e85054de1b"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1711ca6d1fff0c901116ec640f4356c1636293aa", "author": {"user": {"login": "RoiEXLab", "name": "RoiEX"}}, "url": "https://github.com/triplea-game/triplea/commit/1711ca6d1fff0c901116ec640f4356c1636293aa", "committedDate": "2020-08-01T23:25:48Z", "message": "Update javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7bf36af110ee5efaf4680a874b19fb456a3bd3e9", "author": {"user": {"login": "RoiEXLab", "name": "RoiEX"}}, "url": "https://github.com/triplea-game/triplea/commit/7bf36af110ee5efaf4680a874b19fb456a3bd3e9", "committedDate": "2020-08-02T00:16:04Z", "message": "Add some different parameters"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3256, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}