{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTExNjEyNDYy", "number": 7979, "title": "Throw exception when 10,000 rounds are hit in a battle", "bodyText": "Fixes #7848\nI think this is the last thing to fix for #7848.\nTesting\n\nRan world at war with Hard AI to turn 13 just to see if I'd hit this exception in normal game play.  The exception did not occur.\nScreens Shots\n\nAdditional Notes to Reviewer\n\nRelease Note\n\nCHANGE|An exception will be thrown if a battle ever takes more than 10,000 rounds to help figure out how that happened.", "createdAt": "2020-10-28T14:57:34Z", "url": "https://github.com/triplea-game/triplea/pull/7979", "merged": true, "mergeCommit": {"oid": "55abbef72d94c7e0630f0b0223fac2830414e52c"}, "closed": true, "closedAt": "2020-10-29T05:10:24Z", "author": {"login": "trevan"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdW0qBgAH2gAyNTExNjEyNDYyOjg0YjM0MjVjYTBlNTk3YzliZTdkOGFkNjU4OGZiNTU0YmYwZjgxOGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXKV7rAH2gAyNTExNjEyNDYyOmUxMjY0OWQ3MzhkMmE5NzQ1NWY3MDMyZDk1M2RiNTc0YzA1MDgyOGI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "84b3425ca0e597c9be7d8ad6588fb554bf0f818e", "author": {"user": {"login": "trevan", "name": null}}, "url": "https://github.com/triplea-game/triplea/commit/84b3425ca0e597c9be7d8ad6588fb554bf0f818e", "committedDate": "2020-10-28T03:04:32Z", "message": "Throw exception when 10,000 rounds are hit in a battle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5MzEzNTU3", "url": "https://github.com/triplea-game/triplea/pull/7979#pullrequestreview-519313557", "createdAt": "2020-10-29T03:47:09Z", "commit": {"oid": "84b3425ca0e597c9be7d8ad6588fb554bf0f818e"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQwMzo0NzowOVrOHqH4NQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQwMzo0Nzo0MlrOHqH6kQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzkzMTMxNw==", "bodyText": "What do you think of naming this MAX_ROUNDS instead?\n\"max infinite\" does not quite grok well for me.", "url": "https://github.com/triplea-game/triplea/pull/7979#discussion_r513931317", "createdAt": "2020-10-29T03:47:09Z", "author": {"login": "DanVanAtta"}, "path": "game-core/src/main/java/games/strategy/triplea/delegate/battle/MustFightBattle.java", "diffHunk": "@@ -106,6 +106,8 @@\n \n   private static final long serialVersionUID = 5879502298361231540L;\n \n+  private static final long MAX_INFINITE_ROUNDS = 10000;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84b3425ca0e597c9be7d8ad6588fb554bf0f818e"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzkzMTkyMQ==", "bodyText": "What do you think of adding to the message \"Please report this to TripleA\"?\nA line break between this first line and the unit listing could make it an easier message to read as well.", "url": "https://github.com/triplea-game/triplea/pull/7979#discussion_r513931921", "createdAt": "2020-10-29T03:47:42Z", "author": {"login": "DanVanAtta"}, "path": "game-core/src/main/java/games/strategy/triplea/delegate/battle/MustFightBattle.java", "diffHunk": "@@ -1699,6 +1701,25 @@ public void execute(final ExecutionStack stack, final IDelegateBridge bridge) {\n           public void execute(final ExecutionStack stack, final IDelegateBridge bridge) {\n             if (!isOver) {\n               round++;\n+              if (round > MAX_INFINITE_ROUNDS) {\n+                // the battle appears to be in an infinite loop\n+                throw new IllegalStateException(\n+                    \"Round 10,000 reached in a battle. Something must be wrong.\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "84b3425ca0e597c9be7d8ad6588fb554bf0f818e"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4105cf2f055d0ddc98d4239c9924a6cc488d692", "author": {"user": {"login": "trevan", "name": null}}, "url": "https://github.com/triplea-game/triplea/commit/f4105cf2f055d0ddc98d4239c9924a6cc488d692", "committedDate": "2020-10-29T04:01:48Z", "message": "Review feedback"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d0732b87661d43d376e5030291fd7f0c8df4275", "author": {"user": {"login": "tripleabuilderbot", "name": null}}, "url": "https://github.com/triplea-game/triplea/commit/4d0732b87661d43d376e5030291fd7f0c8df4275", "committedDate": "2020-10-29T04:03:59Z", "message": "Auto-Formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e12649d738d2a97455f7032d953db574c050828b", "author": {"user": {"login": "trevan", "name": null}}, "url": "https://github.com/triplea-game/triplea/commit/e12649d738d2a97455f7032d953db574c050828b", "committedDate": "2020-10-29T04:20:30Z", "message": "Add newline separator"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3901, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}