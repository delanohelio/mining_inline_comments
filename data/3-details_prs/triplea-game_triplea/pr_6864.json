{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwMzk3OTc1", "number": 6864, "title": "Fix PBF remember password", "bodyText": "Change the dummy password length to match users password length.\nNote, we write a dummy password to the UI to avoid having to\nwrite the real password as a string value back to the UI.\n\n\nFix PBF password being over-written by the dummy password by\ndetecting if we are over-writing using a dummy password. The UI\nwas not supposed to fire an event unless the user was typing\na real password into the password field, though UI events\ncan be fired for other reasons which will send a dummy password\nfor persistence to the back-end. Ignoring a dummy password\nvalue resolves this, otherwise the users password is overwritten.\n\n\n\nRoot cause of the bug is complexity due not trying to write a password as a String value.We probably should have caught this during testing.\n\nFunctional Changes\n\n[] New map or map update\n[] New Feature\n[] Feature update or enhancement\n[] Feature Removal\n[] Code Cleanup or refactor\n[] Configuration Change\n[x] Problem fix: https://forums.triplea-game.org/topic/2045/stuck-password-with-2-0-19993/22?page=2 \"Stuck password with 2.0.19993\"\n[] Other:   \nTesting\nProblem can be reproduced by:\n\nselecting play by forum\nenter a password (and all other required fields)\nstart a game\ncancel & click back to get to the main menu\nselect play by forum again, this time a document event is triggered after we have written a dummy password to the UI.\n\n\nScreens Shots\n\nAdditional Notes to Reviewer\n\nRelease Note\n\nFix|Fix remember password feature for play-by-forum", "createdAt": "2020-06-26T05:59:55Z", "url": "https://github.com/triplea-game/triplea/pull/6864", "merged": true, "mergeCommit": {"oid": "091e87df385fe674c2b3b39f881b37f5de7781d6"}, "closed": true, "closedAt": "2020-06-26T08:26:00Z", "author": {"login": "DanVanAtta"}, "timelineItems": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcu8xlsAH2gAyNDQwMzk3OTc1OjdjNzkzYmNiY2E4Y2EwMmRmODZlNzdhZDFlMGY4NGEzNjgxMGJlNWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcu-7qmgFqTQzODEwMTM4Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7c793bcbca8ca02df86e77ad1e0f84a36810be5f", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/7c793bcbca8ca02df86e77ad1e0f84a36810be5f", "committedDate": "2020-06-26T05:55:04Z", "message": "Fix PBF remember password\n\n1. Change the dummy password length to match users password length.\n   Note, we write a dummy password to the UI to avoid having to\n   write the real password as a string value back to the UI.\n\n2. Fix PBF password being over-written by the dummy password by\n   detecting if we are over-writing using a dummy password. The UI\n   was not supposed to fire an event unless the user was typing\n   a real password into the password field, though UI events\n   can be fired for other reasons which will send a dummy password\n   for persistence to the back-end. Ignoring a dummy password\n   value resolves this, otherwise the users password is overwritten."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MTAxMzg3", "url": "https://github.com/triplea-game/triplea/pull/6864#pullrequestreview-438101387", "createdAt": "2020-06-26T08:17:22Z", "commit": {"oid": "7c793bcbca8ca02df86e77ad1e0f84a36810be5f"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwODoxNzoyMlrOGpX-tA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwODoxNzoyMlrOGpX-tA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjAzNzY4NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                boolean dummyPassword = true;\n          \n          \n            \n                for (final Character passwordChar : password) {\n          \n          \n            \n                  if (passwordChar != '*') {\n          \n          \n            \n                    dummyPassword = false;\n          \n          \n            \n                    break;\n          \n          \n            \n                  }\n          \n          \n            \n                }\n          \n          \n            \n                return password.length > 0 && dummyPassword;\n          \n          \n            \n                return password.length > 0 && Arrays.stream(password).allMatch(c -> c == '*');", "url": "https://github.com/triplea-game/triplea/pull/6864#discussion_r446037684", "createdAt": "2020-06-26T08:17:22Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/posted/game/pbf/ForumPosterEditorViewModel.java", "diffHunk": "@@ -62,6 +71,17 @@ void setForumPassword(final char[] password) {\n     readyCallback.run();\n   }\n \n+  private boolean isDummyPassword(final char[] password) {\n+    boolean dummyPassword = true;\n+    for (final Character passwordChar : password) {\n+      if (passwordChar != '*') {\n+        dummyPassword = false;\n+        break;\n+      }\n+    }\n+    return password.length > 0 && dummyPassword;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7c793bcbca8ca02df86e77ad1e0f84a36810be5f"}, "originalPosition": 35}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3292, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}