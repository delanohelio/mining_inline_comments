{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyMTM2MDg5", "number": 6177, "title": "Apply not nice username checks", "bodyText": "This update prevents user from taking names contain a 'bad-word' entry are listed in the banned-username table.\ncommit 6addd4e\nValidate usernames do not match banned usernames or bad words\n\nThis update:\n- adds name validation to login, (it was already present\n  for account creation). Name validation asserts that\n  a given name does not contain a bad word.\n- adds banned username check to name validation. This check\n  verifies that a given name does not match a banned username.\n\ncommit 628a59a\nSplit username is already taken check from login\n\nIf we check if a username is already taken when doing\na registered login, we will see the name is always taken!\nThis update removes the username is already taken check\nfrom username validation and moves the check to anonymous\nlogin and user registration.\n\n\nFunctional Changes\n\n[] New map or map update\n[] New Feature\n[x] Feature update or enhancement\n[] Feature Removal\n[] Code Cleanup or refactor\n[] Configuration Change\n[x] Problem fix: #6173 \n[] Other:   \nTesting\nTested locally when registration and login are blocked based on data in banned usernames table or bad words (and was not previously)\n\n\n\n\nAdditional Review Notes\nWould like to comment that the extensive automated spitfire tests really helped here. I completely missed, and arguably it was not completely obvious, that the username is taken check was going to break registered logins.", "createdAt": "2020-04-11T04:02:42Z", "url": "https://github.com/triplea-game/triplea/pull/6177", "merged": true, "mergeCommit": {"oid": "917e28cd93ea8bbf45ab1b74304aeb4ab221f572"}, "closed": true, "closedAt": "2020-04-11T21:45:06Z", "author": {"login": "DanVanAtta"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcWdjX5AH2gAyNDAyMTM2MDg5OjZhZGRkNGVjZTc5Zjg0MmQyNzhlZWExNzI5OWRlYWIzNjJkYjU5YzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcWsLziAH2gAyNDAyMTM2MDg5OjNjZTUzOTIxMDNhYzNmNjI5ZGJhYjgzNmY4NWI2NjJhNTM1NWEwOWQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6addd4ece79f842d278eea17299deab362db59c5", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/6addd4ece79f842d278eea17299deab362db59c5", "committedDate": "2020-04-11T03:58:18Z", "message": "Validate usernames do not match banned usernames or bad words\n\nThis update:\n- adds name validation to login, (it was already present\n  for account creation). Name validation asserts that\n  a given name does not contain a bad word.\n- adds banned username check to name validation. This check\n  verifies that a given name does not match a banned username."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "628a59a6b584e098582e7587ce9d92f80cb8480c", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/628a59a6b584e098582e7587ce9d92f80cb8480c", "committedDate": "2020-04-11T03:58:39Z", "message": "Split username is already taken check from login\n\nIf we check if a username is already taken when doing\na registered login, we will see the name is always taken!\nThis update removes the username is already taken check\nfrom username validation and moves the check to anonymous\nlogin and user registration."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNzcyNTcw", "url": "https://github.com/triplea-game/triplea/pull/6177#pullrequestreview-391772570", "createdAt": "2020-04-11T14:50:36Z", "commit": {"oid": "6addd4ece79f842d278eea17299deab362db59c5"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMVQxNDo1MDozNlrOGENvQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMVQxNDo1Mjo1OVrOGENwTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA3MjU3Nw==", "bodyText": "Is this method still unused?", "url": "https://github.com/triplea-game/triplea/pull/6177#discussion_r407072577", "createdAt": "2020-04-11T14:50:36Z", "author": {"login": "RoiEXLab"}, "path": "http-server/src/main/java/org/triplea/modules/user/account/login/LoginModule.java", "diffHunk": "@@ -108,7 +116,6 @@ private ApiKey recordAnonymousLoginAndGenerateApiKey(\n     return recordLoginAndGenerateApiKey(loginRequest, systemId, playerChatId, ip, false);\n   }\n \n-  // TODO: Project#12 also update access log\n   @SuppressWarnings(\"unused\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6addd4ece79f842d278eea17299deab362db59c5"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzA3Mjg0NQ==", "bodyText": "I have the sneaking suspicion you forgot to remove this class \ud83d\ude09", "url": "https://github.com/triplea-game/triplea/pull/6177#discussion_r407072845", "createdAt": "2020-04-11T14:52:59Z", "author": {"login": "RoiEXLab"}, "path": "http-server/src/main/java/org/triplea/modules/user/account/login/authorizer/anonymous/AnonymousLoginFactory.java", "diffHunk": "@@ -1,21 +1,6 @@\n package org.triplea.modules.user.account.login.authorizer.anonymous;\n \n-import java.util.Optional;\n-import java.util.function.Function;\n import lombok.experimental.UtilityClass;\n-import org.jdbi.v3.core.Jdbi;\n-import org.triplea.db.dao.UserJdbiDao;\n-import org.triplea.domain.data.UserName;\n-import org.triplea.modules.chat.Chatters;\n \n @UtilityClass\n-public class AnonymousLoginFactory {\n-\n-  public static Function<UserName, Optional<String>> build(\n-      final Jdbi jdbi, final Chatters chatters) {\n-    return AnonymousLogin.builder()\n-        .chatters(chatters)\n-        .userJdbiDao(jdbi.onDemand(UserJdbiDao.class))\n-        .build();\n-  }\n-}\n+public class AnonymousLoginFactory {}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "628a59a6b584e098582e7587ce9d92f80cb8480c"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ce5392103ac3f629dbab836f85b662a5355a09d", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/3ce5392103ac3f629dbab836f85b662a5355a09d", "committedDate": "2020-04-11T21:01:08Z", "message": "Delete unused class and remove out of date warning suppression"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3650, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}