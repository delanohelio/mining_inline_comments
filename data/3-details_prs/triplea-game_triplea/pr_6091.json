{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzOTM3MjQ0", "number": 6091, "title": "Inline server side factory objects", "bodyText": "Refactor of http-server objects and how they are built.\nTo simplify and hide dependencies, delete single method factory classes\nand move factory methods to the class that is being built. Second, avoid\nbuilding nested dependencies and add a factory build method to dependencies.\n\nFunctional Changes\n\n[] New map or map update\n[] New Feature\n[] Feature update or enhancement\n[] Feature Removal\n[x] Code Cleanup or refactor\n[] Configuration Change\n[] Problem fix:  \n[] Other:", "createdAt": "2020-03-26T03:34:58Z", "url": "https://github.com/triplea-game/triplea/pull/6091", "merged": true, "mergeCommit": {"oid": "a3c058c49bb519a7ab6bdc14e1931ffe0710813e"}, "closed": true, "closedAt": "2020-03-28T18:25:11Z", "author": {"login": "DanVanAtta"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRTi83AH2gAyMzkzOTM3MjQ0OmRiMmY1MDY3Zjg4NTQ1M2MzOWVhNmRhMjBiOTM4ZThmMDQ3YmVhN2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcSJPjPgFqTM4MzMzNTA1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "db2f5067f885453c39ea6da20b938e8f047bea7d", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/db2f5067f885453c39ea6da20b938e8f047bea7d", "committedDate": "2020-03-26T03:29:10Z", "message": "Inline server side factory objects\n\nRefactor of http-server objects and how they are built.\n\nTo simplify and hide dependencies, delete single method factory classes\nand move factory methods to the class that is being built. Second, avoid\nbuilding nested dependencies and add a factory build method to dependencies."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxNjgxOTU3", "url": "https://github.com/triplea-game/triplea/pull/6091#pullrequestreview-381681957", "createdAt": "2020-03-26T03:36:30Z", "commit": {"oid": "db2f5067f885453c39ea6da20b938e8f047bea7d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQwMzozNjozMFrOF72Rhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQwMzozNjozMFrOF72Rhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODI5OTUyNw==", "bodyText": "Similar blocks of code found in 2 locations. Consider refactoring.", "url": "https://github.com/triplea-game/triplea/pull/6091#discussion_r398299527", "createdAt": "2020-03-26T03:36:30Z", "author": {"login": "codeclimate"}, "path": "http-server/src/main/java/org/triplea/modules/error/reporting/ErrorReportController.java", "diffHunk": "@@ -11,17 +12,38 @@\n import javax.ws.rs.Path;\n import javax.ws.rs.core.Context;\n import lombok.Builder;\n+import org.jdbi.v3.core.Jdbi;\n+import org.triplea.http.AppConfig;\n import org.triplea.http.HttpController;\n import org.triplea.http.client.error.report.ErrorReportClient;\n import org.triplea.http.client.error.report.ErrorReportRequest;\n import org.triplea.http.client.error.report.ErrorReportResponse;\n+import org.triplea.http.client.github.issues.GithubIssueClient;\n \n /** Http controller that binds the error upload endpoint with the error report upload handler. */\n @Builder\n public class ErrorReportController extends HttpController {\n   @Nonnull\n   private final BiFunction<String, ErrorReportRequest, ErrorReportResponse> errorReportIngestion;\n \n+  public static ErrorReportController build(final AppConfig configuration, final Jdbi jdbi) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "db2f5067f885453c39ea6da20b938e8f047bea7d"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMzM0Nzc1", "url": "https://github.com/triplea-game/triplea/pull/6091#pullrequestreview-383334775", "createdAt": "2020-03-28T17:56:28Z", "commit": {"oid": "db2f5067f885453c39ea6da20b938e8f047bea7d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQxNzo1NjoyOFrOF9LLcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQxNzo1NjoyOFrOF9LLcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTY5MDYwOQ==", "bodyText": "Its not clear to me if the variable type changed here? Should the var name be updated to chatMessagingService?", "url": "https://github.com/triplea-game/triplea/pull/6091#discussion_r399690609", "createdAt": "2020-03-28T17:56:28Z", "author": {"login": "ron-murhammer"}, "path": "http-server/src/main/java/org/triplea/http/ServerApplication.java", "diffHunk": "@@ -165,7 +160,7 @@ public void run(final AppConfig configuration, final Environment environment) {\n         .getUserProperties()\n         .put(PlayerConnectionWebSocket.GAME_LISTING_QUEUE_KEY, gameListingEventQueue);\n \n-    final var messagingService = MessagingServiceFactory.build(jdbi, chatSessions, chatters);\n+    final var messagingService = ChatMessagingService.build(jdbi, chatSessions, chatters);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "db2f5067f885453c39ea6da20b938e8f047bea7d"}, "originalPosition": 69}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMzM0OTU2", "url": "https://github.com/triplea-game/triplea/pull/6091#pullrequestreview-383334956", "createdAt": "2020-03-28T17:58:54Z", "commit": {"oid": "db2f5067f885453c39ea6da20b938e8f047bea7d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQxNzo1ODo1NFrOF9LMkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQxNzo1ODo1NFrOF9LMkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTY5MDg5OQ==", "bodyText": "Can you clarify what this block is for?", "url": "https://github.com/triplea-game/triplea/pull/6091#discussion_r399690899", "createdAt": "2020-03-28T17:58:54Z", "author": {"login": "ron-murhammer"}, "path": "http-server/src/main/java/org/triplea/modules/error/reporting/ErrorReportController.java", "diffHunk": "@@ -11,17 +12,38 @@\n import javax.ws.rs.Path;\n import javax.ws.rs.core.Context;\n import lombok.Builder;\n+import org.jdbi.v3.core.Jdbi;\n+import org.triplea.http.AppConfig;\n import org.triplea.http.HttpController;\n import org.triplea.http.client.error.report.ErrorReportClient;\n import org.triplea.http.client.error.report.ErrorReportRequest;\n import org.triplea.http.client.error.report.ErrorReportResponse;\n+import org.triplea.http.client.github.issues.GithubIssueClient;\n \n /** Http controller that binds the error upload endpoint with the error report upload handler. */\n @Builder\n public class ErrorReportController extends HttpController {\n   @Nonnull\n   private final BiFunction<String, ErrorReportRequest, ErrorReportResponse> errorReportIngestion;\n \n+  public static ErrorReportController build(final AppConfig configuration, final Jdbi jdbi) {\n+    final GithubIssueClient githubIssueClient =\n+        GithubIssueClient.builder()\n+            .uri(AppConfig.GITHUB_WEB_SERVICE_API_URL)\n+            .authToken(configuration.getGithubApiToken())\n+            .githubOrg(AppConfig.GITHUB_ORG)\n+            .githubRepo(configuration.getGithubRepo())\n+            .build();\n+\n+    if (githubIssueClient.isTest()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "db2f5067f885453c39ea6da20b938e8f047bea7d"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMzM1MDUx", "url": "https://github.com/triplea-game/triplea/pull/6091#pullrequestreview-383335051", "createdAt": "2020-03-28T18:00:06Z", "commit": {"oid": "db2f5067f885453c39ea6da20b938e8f047bea7d"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQxODowMDowNlrOF9LNHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQxODowMDowNlrOF9LNHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTY5MTAzNw==", "bodyText": "Is the // for formatting reasons?", "url": "https://github.com/triplea-game/triplea/pull/6091#discussion_r399691037", "createdAt": "2020-03-28T18:00:06Z", "author": {"login": "ron-murhammer"}, "path": "http-server/src/main/java/org/triplea/modules/game/ConnectivityController.java", "diffHunk": "@@ -26,6 +26,12 @@\n public class ConnectivityController extends HttpController {\n   @Nonnull private final Predicate<InetSocketAddress> connectivityCheck;\n \n+  public static ConnectivityController build() {\n+    return ConnectivityController.builder() //", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "db2f5067f885453c39ea6da20b938e8f047bea7d"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3605, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}