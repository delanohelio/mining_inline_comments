{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2NzI1ODQz", "number": 5876, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMjozMToxOFrODaoOHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMjozNToxMVrODaoQsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5MjQ4NTQwOnYy", "diffSide": "RIGHT", "path": "game-core/src/main/java/games/strategy/triplea/ui/BattlePanel.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMjozMToxOFrOFhsLgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMjozMToxOFrOFhsLgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg3MTE2OQ==", "bodyText": "Just a random thought:\nIf the instanceof check came before the equality check that would be a sneaky built-in null check as well", "url": "https://github.com/triplea-game/triplea/pull/5876#discussion_r370871169", "createdAt": "2020-01-24T22:31:18Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/BattlePanel.java", "diffHunk": "@@ -240,57 +240,50 @@ public void showBattle(\n             cleanUpBattleWindow();\n             currentBattleDisplayed = null;\n           }\n-          if (!getMap().getUiContext().getShowMapOnly()) {\n-            battleDisplay =\n-                new BattleDisplay(\n-                    getData(),\n-                    location,\n-                    attacker,\n-                    defender,\n-                    attackingUnits,\n-                    defendingUnits,\n-                    killedUnits,\n-                    attackingWaitingToDie,\n-                    defendingWaitingToDie,\n-                    BattlePanel.this.getMap(),\n-                    isAmphibious,\n-                    battleType,\n-                    amphibiousLandAttackers);\n-            battleFrame.setTitle(\n-                attacker.getName()\n-                    + \" attacks \"\n-                    + defender.getName()\n-                    + \" in \"\n-                    + location.getName());\n-            battleFrame.getContentPane().removeAll();\n-            battleFrame.getContentPane().add(battleDisplay);\n-            battleFrame.setMinimumSize(new Dimension(800, 600));\n-            battleFrame.setLocationRelativeTo(JOptionPane.getFrameForComponent(BattlePanel.this));\n-            PbemDiceRoller.setFocusWindow(battleFrame);\n-            boolean foundHumanInBattle = false;\n-            for (final Player gamePlayer :\n-                getMap().getUiContext().getLocalPlayers().getLocalPlayers()) {\n-              if ((gamePlayer.getGamePlayer().equals(attacker)\n-                      && gamePlayer instanceof TripleAPlayer)\n-                  || (gamePlayer.getGamePlayer().equals(defender)\n-                      && gamePlayer instanceof TripleAPlayer)) {\n-                foundHumanInBattle = true;\n-                break;\n-              }\n-            }\n-            if (ClientSetting.showBattlesWhenObserving.getValueOrThrow() || foundHumanInBattle) {\n-              battleFrame.setAlwaysOnTop(true);\n-              battleFrame.setVisible(true);\n-              battleFrame.validate();\n-              battleFrame.invalidate();\n-              battleFrame.repaint();\n-            } else {\n-              battleFrame.setVisible(false);\n+          battleDisplay =\n+              new BattleDisplay(\n+                  getData(),\n+                  location,\n+                  attacker,\n+                  defender,\n+                  attackingUnits,\n+                  defendingUnits,\n+                  killedUnits,\n+                  attackingWaitingToDie,\n+                  defendingWaitingToDie,\n+                  BattlePanel.this.getMap(),\n+                  isAmphibious,\n+                  battleType,\n+                  amphibiousLandAttackers);\n+          battleFrame.setTitle(\n+              attacker.getName() + \" attacks \" + defender.getName() + \" in \" + location.getName());\n+          battleFrame.getContentPane().removeAll();\n+          battleFrame.getContentPane().add(battleDisplay);\n+          battleFrame.setMinimumSize(new Dimension(800, 600));\n+          battleFrame.setLocationRelativeTo(JOptionPane.getFrameForComponent(BattlePanel.this));\n+          PbemDiceRoller.setFocusWindow(battleFrame);\n+          boolean foundHumanInBattle = false;\n+          for (final Player gamePlayer :\n+              getMap().getUiContext().getLocalPlayers().getLocalPlayers()) {\n+            if ((gamePlayer.getGamePlayer().equals(attacker) && gamePlayer instanceof TripleAPlayer)\n+                || (gamePlayer.getGamePlayer().equals(defender)\n+                    && gamePlayer instanceof TripleAPlayer)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99e44c5ba91593d75173773ef901edb08e81e9ca"}, "originalPosition": 77}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5MjQ5MjAxOnYy", "diffSide": "LEFT", "path": "game-core/src/main/java/games/strategy/triplea/ui/TripleAFrame.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMjozNToxMVrOFhsPxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMjo0MjowMVrOFhsXRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg3MjI2MQ==", "bodyText": "This code seems oddly familiar ^^\nI think I created a PR for this, but I don't remember what it was about \ud83d\ude05", "url": "https://github.com/triplea-game/triplea/pull/5876#discussion_r370872261", "createdAt": "2020-01-24T22:35:11Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/TripleAFrame.java", "diffHunk": "@@ -2352,58 +2321,13 @@ private void showGame() {\n     mapPanel.setRoute(null);\n   }\n \n-  private void showMapOnly() {\n-    // Are we coming from showHistory mode or showGame mode?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99e44c5ba91593d75173773ef901edb08e81e9ca"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg3Mjg2Mg==", "bodyText": "'showMapOnly' is a copy/paste of the above block, 'showCurrentGame' and also 'showHistory'.\nI wonder if that is why it is familiar, or if for other reason.", "url": "https://github.com/triplea-game/triplea/pull/5876#discussion_r370872862", "createdAt": "2020-01-24T22:37:18Z", "author": {"login": "DanVanAtta"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/TripleAFrame.java", "diffHunk": "@@ -2352,58 +2321,13 @@ private void showGame() {\n     mapPanel.setRoute(null);\n   }\n \n-  private void showMapOnly() {\n-    // Are we coming from showHistory mode or showGame mode?", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg3MjI2MQ=="}, "originalCommit": {"oid": "99e44c5ba91593d75173773ef901edb08e81e9ca"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg3NDE4MQ==", "bodyText": "I think I did a refactoring that touched all of the 3 methods.\nFound it via git blame: #4737", "url": "https://github.com/triplea-game/triplea/pull/5876#discussion_r370874181", "createdAt": "2020-01-24T22:42:01Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/TripleAFrame.java", "diffHunk": "@@ -2352,58 +2321,13 @@ private void showGame() {\n     mapPanel.setRoute(null);\n   }\n \n-  private void showMapOnly() {\n-    // Are we coming from showHistory mode or showGame mode?", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg3MjI2MQ=="}, "originalCommit": {"oid": "99e44c5ba91593d75173773ef901edb08e81e9ca"}, "originalPosition": 81}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2580, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}