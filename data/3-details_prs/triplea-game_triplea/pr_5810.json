{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU4NTAxOTc0", "number": 5810, "title": "Fix quit dialog not appearing on Mac when dismissed.", "bodyText": "Fix quit dialog not appearing on Mac when dismissed.\nWe were not calling quitResponse.cancelQuit() when quit was canceled, which was needed.\nFunctional Changes\n\n[] New map or map update\n[] New Feature\n[] Feature update or enhancement\n[] Feature Removal\n[] Code Cleanup or refactor\n[] Configuration Change\n[X] Problem fix:  #4525\n[] Other:   \nTesting\n\n[X] Manual testing done", "createdAt": "2020-01-01T16:45:07Z", "url": "https://github.com/triplea-game/triplea/pull/5810", "merged": true, "mergeCommit": {"oid": "69de2251a533960eec282a71c8ca723eb30cee55"}, "closed": true, "closedAt": "2020-01-04T00:59:04Z", "author": {"login": "asvitkine"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb2H9n2gH2gAyMzU4NTAxOTc0OjRhMmU0NThmYjk0ZTdjZDE2ZDEwNDRkOTAyYmY3NTVlMzRiZmE3ZmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb24P6LAFqTMzODMyNzQ0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4a2e458fb94e7cd16d1044d902bf755e34bfa7fb", "author": {"user": {"login": "asvitkine", "name": null}}, "url": "https://github.com/triplea-game/triplea/commit/4a2e458fb94e7cd16d1044d902bf755e34bfa7fb", "committedDate": "2020-01-01T16:43:29Z", "message": "Fix quit dialog not appearing on Mac when dismissed."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM3NDk2NzY2", "url": "https://github.com/triplea-game/triplea/pull/5810#pullrequestreview-337496766", "createdAt": "2020-01-01T17:03:42Z", "commit": {"oid": "4a2e458fb94e7cd16d1044d902bf755e34bfa7fb"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMVQxNzowMzo0MlrOFZjEcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMVQxNzoxMToxOFrOFZjFvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjMzMzI5OQ==", "bodyText": "Now that shutdown returns a boolean, shouldn't this change be unecessary?", "url": "https://github.com/triplea-game/triplea/pull/5810#discussion_r362333299", "createdAt": "2020-01-01T17:03:42Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/menubar/FileMenu.java", "diffHunk": "@@ -112,7 +112,7 @@ private void addExitMenu() {\n     // Mac OS X automatically creates a Quit menu item under the TripleA menu,\n     // so all we need to do is register that menu item with triplea's shutdown mechanism\n     if (isMac) {\n-      MacOsIntegration.setQuitHandler(frame::shutdown);\n+      MacOsIntegration.setQuitHandler(() -> frame.shutdown());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a2e458fb94e7cd16d1044d902bf755e34bfa7fb"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjMzMzQyNw==", "bodyText": "Hmm Methods returning the same objects regardless of execution path seem weird to me.\nI'd actually move this true statement up one level and keep this method returning void, or alternatively have both frames implement an QuitHandler interface for consistency or something that will then be used.", "url": "https://github.com/triplea-game/triplea/pull/5810#discussion_r362333427", "createdAt": "2020-01-01T17:06:35Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/engine/lobby/client/ui/LobbyFrame.java", "diffHunk": "@@ -140,5 +140,6 @@ public void shutdown() {\n               GameRunner.exitGameIfFinished();\n             })\n         .start();\n+    return true;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a2e458fb94e7cd16d1044d902bf755e34bfa7fb"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjMzMzYzMA==", "bodyText": "This reminds me of #5283\nAny chance if we're using the files handler the wrong way?\n#5253", "url": "https://github.com/triplea-game/triplea/pull/5810#discussion_r362333630", "createdAt": "2020-01-01T17:11:18Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/MacOsIntegration.java", "diffHunk": "@@ -40,8 +41,16 @@ public static void setOpenFileHandler(final Consumer<File> handler) {\n   }\n \n   /** Sets the specified quit handler to the application. */\n-  public static void setQuitHandler(final Runnable handler) {\n+  public static void setQuitHandler(final BooleanSupplier handler) {\n     checkNotNull(handler);\n-    Desktop.getDesktop().setQuitHandler((quitEvent, quitResponse) -> handler.run());\n+    Desktop.getDesktop()\n+        .setQuitHandler(\n+            (quitEvent, quitResponse) -> {\n+              if (handler.getAsBoolean()) {\n+                quitResponse.performQuit();\n+              } else {\n+                quitResponse.cancelQuit();\n+              }\n+            });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a2e458fb94e7cd16d1044d902bf755e34bfa7fb"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e495881c75d7d6c935579989a0bb815c8e1a6529", "author": {"user": {"login": "asvitkine", "name": null}}, "url": "https://github.com/triplea-game/triplea/commit/e495881c75d7d6c935579989a0bb815c8e1a6529", "committedDate": "2020-01-03T23:55:23Z", "message": "Add an interface"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4MzI3NDQw", "url": "https://github.com/triplea-game/triplea/pull/5810#pullrequestreview-338327440", "createdAt": "2020-01-04T00:58:54Z", "commit": {"oid": "e495881c75d7d6c935579989a0bb815c8e1a6529"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3744, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}