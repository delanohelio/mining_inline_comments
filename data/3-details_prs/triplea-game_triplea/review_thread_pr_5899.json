{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcwMTI2NDIy", "number": 5899, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNzozNDowOVrODda2Zw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNzozODo0MFrODda7zQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyMTc1MjA3OnYy", "diffSide": "RIGHT", "path": ".travis.yml", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNzozNDowOVrOFmAwgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QwMzoyNzozMlrOFmxXLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQwMjYyNQ==", "bodyText": "Hmm, I think this mix of the yaml 1.1 syntax and the newer 1.2 syntax is a little bot weird here and there.\nThis line in particular doesn't add to readability IMO, but personal preference I guess", "url": "https://github.com/triplea-game/triplea/pull/5899#discussion_r375402625", "createdAt": "2020-02-05T17:34:09Z", "author": {"login": "RoiEXLab"}, "path": ".travis.yml", "diffHunk": "@@ -1,188 +1,109 @@\n+if: tag is blank\n dist: xenial\n sudo: false\n language: java\n-if: tag is blank\n-\n-# Note: Travis generally does not allocate more than 5 VMs at once.\n-# Avoid running more than 5 jobs in parallel. Try to keep the jobs\n-# balanced so that they each take about the same amount of time.\n-\n-# Note: We download Java 11.0.5 for a few reasons:\n-# - jcenter no longer allows https TLS1.0 connection (this is seen as\n-#   a gradle failed to download plugin error)\n-# - Travis has Java 11.0.2 baked in to it, 11.0.2 does not have a\n-#   recent patch (2019-10) to allow Java 11 to use a compatible version\n-#   of TLS.\n-# To overcome this situation, we emulate the travis 'install-jdk' script\n-# and install a latest Java 11. For reference:\n-#   https://sormuras.github.io/blog/2017-12-08-install-jdk-on-travis.html\n-# Java12 does not have this issue, we do not download the Java11 script\n-# for that JVM or else we would be overriding Java12 with Java11.  \n-#\n-# Additional note: The export commands seem to not apply when extracted\n-# to a script and seemingly only work when located in the main travis config\n-# here.\n-#\n+jdk: openjdk11\n+cache: { directories: [ \"$HOME/.gradle\" , \".gradle\" ] }\n+install: skip\n \n+env:\n+  global:\n+   - REPORT_FAIL=\".travis/shared/report-build-status FAILURE\"\n+   - VERIFY_STAGE=\".travis/stages/verify\"\n+   - DEPLOY_STAGE=\".travis/stages/deploy\"\n jobs:\n   include:\n-    - stage: verify\n-      env: \"Static Verification\"\n-      jdk: openjdk11\n-      cache:\n-        directories:\n-          - '$HOME/.gradle'\n-          - '.gradle'\n-          - '~/jdk-11.0.5+10'\n-      before_install:\n-        - ./.travis/install_java_11.0.5\n-        - export JAVA_HOME=~/jdk-11.0.5+10\n-        - export PATH=${JAVA_HOME}/bin:$PATH\n-        - java --version\n-      install: skip\n-      script:\n-        ## shellcheck all shell scripts\n-        - find .travis/ -type f | xargs grep -lE \"^#\\!/bin/bash$\" | xargs shellcheck\n-        - .travis/check-links || travis_terminate 1;\n-        - .travis/find-unused-dbunit-datasets || travis_terminate 1\n-        - .travis/find-unmatched-test-packages || travis_terminate 1;\n-        - .travis/find-orphaned-tests || travis_terminate 1;\n-        - .travis/check-custom-style || travis_terminate 1;\n-        - ./gradlew --parallel validateYamls spotlessCheck checkstyleMain checkstyleTest pmdMain pmdTest\n-    - stage: verify\n-      env: \"Unit & Integration Tests\"\n-      jdk: openjdk11\n-      cache:\n-        directories:\n-          - '$HOME/.gradle'\n-          - '.gradle'\n-          - '~/jdk-11.0.5+10'\n-      addons: {postgresql: \"10\"}\n-      before_install:\n-        - ./.travis/install_java_11.0.5\n-        - export JAVA_HOME=~/jdk-11.0.5+10\n-        - export PATH=${JAVA_HOME}/bin:$PATH\n-        - java --version\n-      install: skip\n-      script:\n-        - .travis/setup_database\n-        - .travis/launch-http-server || travis_terminate 1\n-        - ./gradlew --parallel test integTest jacocoTestReport || travis_terminate 1\n-        - bash <(curl -s https://codecov.io/bash)  # upload coverage report - https://github.com/codecov/example-gradle\n-    - stage: verify\n-      env: \"Smoke Test\"\n-      jdk: openjdk11\n-      cache:\n-        directories:\n-          - '$HOME/.gradle'\n-          - '.gradle'\n-          - '~/jdk-11.0.5+10'\n+    \n+    ########################################################################\n+    # Jobs are ordered tests first and then slower jobs before faster ones.\n+  \n+    - stage: Verify\n+      name: \"Tests: Integration Test\"\n+      addons: { postgresql: \"10\" }\n+      script: [ $VERIFY_STAGE/integration-testing/run || $REPORT_FAIL ]\n+\n+    - stage: Verify\n+      name: \"Tests: Unit Test\"\n+      script: [ $VERIFY_STAGE/unit-testing/run || $REPORT_FAIL ]\n+    \n+    - stage: Verify\n+      name: \"Tests: Smoke Test\"\n       addons: {postgresql: \"10\"}\n-      before_install:\n-        - ./.travis/install_java_11.0.5\n-        - export JAVA_HOME=~/jdk-11.0.5+10\n-        - export PATH=${JAVA_HOME}/bin:$PATH\n-        - java --version\n-      install: skip\n-      script:\n-        - ./.travis/setup_database\n-        - ./.travis/run_smoke_tests\n-    - stage: deploy artifacts\n-      env: \"Upload to Github Releases\"\n+      script: [ $VERIFY_STAGE/smoke-testing/run || $REPORT_FAIL ]\n+\n+    - stage: Verify\n+      name: \"Analysis: PMD Verification\"\n+      script: [ $VERIFY_STAGE/pmd-verification/run || $REPORT_FAIL ]\n+    \n+    - stage: Verify\n+      name: \"Analysis: Checkstyle\"\n+      script: [ $VERIFY_STAGE/checkstyle/run || $REPORT_FAIL ]\n+    \n+    - stage: Verify\n+      name: \"Analysis: Java Formatting\"\n+      script: [ $VERIFY_STAGE/java-formatting/run || $REPORT_FAIL ]\n+    \n+    - stage: Verify\n+      name: \"Analysis: Check Links and YAML Syntax\"\n+      script: [ $VERIFY_STAGE/check-links-and-yaml-syntax/run || $REPORT_FAIL ]\n+      \n+    - stage: Verify\n+      name: \"Analysis: Code Convention Checks\"\n+      script: [ $VERIFY_STAGE/code-convention-checks/run || $REPORT_FAIL ]\n+\n+    - stage: Verify\n+      name: \"Analysis: Find Unused or Unmatched Tests\"\n+      script: [ $VERIFY_STAGE/find-unused-or-unmatched-tests/run || $REPORT_FAIL ]\n+\n+    ########################################################################\n+\n+    - stage: Deploy\n+      name: \"Push Map Descriptions to Website\"\n+      if: (branch = master) and (repo = 'triplea-game/triplea') and (type != 'pull_request')\n+      addons: { apt: { packages: [ python3, python3-yaml ] } }\n+      script: [ $DEPLOY_STAGE/update-maps-on-website/run || $REPORT_FAIL ]     \n+\n+    - stage: Deploy\n+      name: \"Ansible Deploy to Prerelease\"\n+      if: (branch = master) and (repo = 'triplea-game/triplea') and (type != 'pull_request')\n+      language: python\n+      python: \"3.6\"\n+      addons: { apt: { packages: [ sshpass ] } }\n+      install: [ pip install ansible ]\n+      script: [ $DEPLOY_STAGE/ansible-deploy-to-prerelease/run || $REPORT_FAIL ]\n+\n+    - stage: Deploy\n+      name: \"Build Installer Downloads & Upload to Github Releases\"\n       if: (branch = master) and (repo = 'triplea-game/triplea') and (type != 'pull_request')\n-      install: skip\n-      cache:\n-        directories:\n-          - '$HOME/.gradle'\n-          - '.gradle'\n-          - '~/jdk-11.0.5+10'\n-      before_install:\n-        - ./.travis/install_java_11.0.5\n-        - export JAVA_HOME=~/jdk-11.0.5+10\n-        - export PATH=${JAVA_HOME}/bin:$PATH\n-        - java --version\n-      script:\n-        - ./.travis/setup_gpg\n-        ## Update product version to include build number.\n-        ## EG: replace \"2.0.0\" to be \"2.0.15555\";\n-        - sed -i \"s/.0 *$/.$TRAVIS_BUILD_NUMBER/\" game-core/src/main/resources/META-INF/triplea/product.properties\n-        - ./.travis/do_release\n+      script: [ $DEPLOY_STAGE/installers/run || $REPORT_FAIL ]\n       deploy:\n+        on: { tags: false, repo: triplea-game/triplea, branch: master }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1353b9b121d93ad4275f855b2c40749f1c192437"}, "originalPosition": 181}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU5Nzc4Nw==", "bodyText": "Are you looking at this only from a web-browser, from a terminal, or from IDE?\nIn general, I found the shorter, the better for most of this, the multi-line elements lengthened the config file and stood out as most things are single line now.\nHow do you mean by mixing of the 1.1 vs 1.2 syntax, as far as I knew, the inline map syntax has always been equivalent.", "url": "https://github.com/triplea-game/triplea/pull/5899#discussion_r375597787", "createdAt": "2020-02-06T01:22:14Z", "author": {"login": "DanVanAtta"}, "path": ".travis.yml", "diffHunk": "@@ -1,188 +1,109 @@\n+if: tag is blank\n dist: xenial\n sudo: false\n language: java\n-if: tag is blank\n-\n-# Note: Travis generally does not allocate more than 5 VMs at once.\n-# Avoid running more than 5 jobs in parallel. Try to keep the jobs\n-# balanced so that they each take about the same amount of time.\n-\n-# Note: We download Java 11.0.5 for a few reasons:\n-# - jcenter no longer allows https TLS1.0 connection (this is seen as\n-#   a gradle failed to download plugin error)\n-# - Travis has Java 11.0.2 baked in to it, 11.0.2 does not have a\n-#   recent patch (2019-10) to allow Java 11 to use a compatible version\n-#   of TLS.\n-# To overcome this situation, we emulate the travis 'install-jdk' script\n-# and install a latest Java 11. For reference:\n-#   https://sormuras.github.io/blog/2017-12-08-install-jdk-on-travis.html\n-# Java12 does not have this issue, we do not download the Java11 script\n-# for that JVM or else we would be overriding Java12 with Java11.  \n-#\n-# Additional note: The export commands seem to not apply when extracted\n-# to a script and seemingly only work when located in the main travis config\n-# here.\n-#\n+jdk: openjdk11\n+cache: { directories: [ \"$HOME/.gradle\" , \".gradle\" ] }\n+install: skip\n \n+env:\n+  global:\n+   - REPORT_FAIL=\".travis/shared/report-build-status FAILURE\"\n+   - VERIFY_STAGE=\".travis/stages/verify\"\n+   - DEPLOY_STAGE=\".travis/stages/deploy\"\n jobs:\n   include:\n-    - stage: verify\n-      env: \"Static Verification\"\n-      jdk: openjdk11\n-      cache:\n-        directories:\n-          - '$HOME/.gradle'\n-          - '.gradle'\n-          - '~/jdk-11.0.5+10'\n-      before_install:\n-        - ./.travis/install_java_11.0.5\n-        - export JAVA_HOME=~/jdk-11.0.5+10\n-        - export PATH=${JAVA_HOME}/bin:$PATH\n-        - java --version\n-      install: skip\n-      script:\n-        ## shellcheck all shell scripts\n-        - find .travis/ -type f | xargs grep -lE \"^#\\!/bin/bash$\" | xargs shellcheck\n-        - .travis/check-links || travis_terminate 1;\n-        - .travis/find-unused-dbunit-datasets || travis_terminate 1\n-        - .travis/find-unmatched-test-packages || travis_terminate 1;\n-        - .travis/find-orphaned-tests || travis_terminate 1;\n-        - .travis/check-custom-style || travis_terminate 1;\n-        - ./gradlew --parallel validateYamls spotlessCheck checkstyleMain checkstyleTest pmdMain pmdTest\n-    - stage: verify\n-      env: \"Unit & Integration Tests\"\n-      jdk: openjdk11\n-      cache:\n-        directories:\n-          - '$HOME/.gradle'\n-          - '.gradle'\n-          - '~/jdk-11.0.5+10'\n-      addons: {postgresql: \"10\"}\n-      before_install:\n-        - ./.travis/install_java_11.0.5\n-        - export JAVA_HOME=~/jdk-11.0.5+10\n-        - export PATH=${JAVA_HOME}/bin:$PATH\n-        - java --version\n-      install: skip\n-      script:\n-        - .travis/setup_database\n-        - .travis/launch-http-server || travis_terminate 1\n-        - ./gradlew --parallel test integTest jacocoTestReport || travis_terminate 1\n-        - bash <(curl -s https://codecov.io/bash)  # upload coverage report - https://github.com/codecov/example-gradle\n-    - stage: verify\n-      env: \"Smoke Test\"\n-      jdk: openjdk11\n-      cache:\n-        directories:\n-          - '$HOME/.gradle'\n-          - '.gradle'\n-          - '~/jdk-11.0.5+10'\n+    \n+    ########################################################################\n+    # Jobs are ordered tests first and then slower jobs before faster ones.\n+  \n+    - stage: Verify\n+      name: \"Tests: Integration Test\"\n+      addons: { postgresql: \"10\" }\n+      script: [ $VERIFY_STAGE/integration-testing/run || $REPORT_FAIL ]\n+\n+    - stage: Verify\n+      name: \"Tests: Unit Test\"\n+      script: [ $VERIFY_STAGE/unit-testing/run || $REPORT_FAIL ]\n+    \n+    - stage: Verify\n+      name: \"Tests: Smoke Test\"\n       addons: {postgresql: \"10\"}\n-      before_install:\n-        - ./.travis/install_java_11.0.5\n-        - export JAVA_HOME=~/jdk-11.0.5+10\n-        - export PATH=${JAVA_HOME}/bin:$PATH\n-        - java --version\n-      install: skip\n-      script:\n-        - ./.travis/setup_database\n-        - ./.travis/run_smoke_tests\n-    - stage: deploy artifacts\n-      env: \"Upload to Github Releases\"\n+      script: [ $VERIFY_STAGE/smoke-testing/run || $REPORT_FAIL ]\n+\n+    - stage: Verify\n+      name: \"Analysis: PMD Verification\"\n+      script: [ $VERIFY_STAGE/pmd-verification/run || $REPORT_FAIL ]\n+    \n+    - stage: Verify\n+      name: \"Analysis: Checkstyle\"\n+      script: [ $VERIFY_STAGE/checkstyle/run || $REPORT_FAIL ]\n+    \n+    - stage: Verify\n+      name: \"Analysis: Java Formatting\"\n+      script: [ $VERIFY_STAGE/java-formatting/run || $REPORT_FAIL ]\n+    \n+    - stage: Verify\n+      name: \"Analysis: Check Links and YAML Syntax\"\n+      script: [ $VERIFY_STAGE/check-links-and-yaml-syntax/run || $REPORT_FAIL ]\n+      \n+    - stage: Verify\n+      name: \"Analysis: Code Convention Checks\"\n+      script: [ $VERIFY_STAGE/code-convention-checks/run || $REPORT_FAIL ]\n+\n+    - stage: Verify\n+      name: \"Analysis: Find Unused or Unmatched Tests\"\n+      script: [ $VERIFY_STAGE/find-unused-or-unmatched-tests/run || $REPORT_FAIL ]\n+\n+    ########################################################################\n+\n+    - stage: Deploy\n+      name: \"Push Map Descriptions to Website\"\n+      if: (branch = master) and (repo = 'triplea-game/triplea') and (type != 'pull_request')\n+      addons: { apt: { packages: [ python3, python3-yaml ] } }\n+      script: [ $DEPLOY_STAGE/update-maps-on-website/run || $REPORT_FAIL ]     \n+\n+    - stage: Deploy\n+      name: \"Ansible Deploy to Prerelease\"\n+      if: (branch = master) and (repo = 'triplea-game/triplea') and (type != 'pull_request')\n+      language: python\n+      python: \"3.6\"\n+      addons: { apt: { packages: [ sshpass ] } }\n+      install: [ pip install ansible ]\n+      script: [ $DEPLOY_STAGE/ansible-deploy-to-prerelease/run || $REPORT_FAIL ]\n+\n+    - stage: Deploy\n+      name: \"Build Installer Downloads & Upload to Github Releases\"\n       if: (branch = master) and (repo = 'triplea-game/triplea') and (type != 'pull_request')\n-      install: skip\n-      cache:\n-        directories:\n-          - '$HOME/.gradle'\n-          - '.gradle'\n-          - '~/jdk-11.0.5+10'\n-      before_install:\n-        - ./.travis/install_java_11.0.5\n-        - export JAVA_HOME=~/jdk-11.0.5+10\n-        - export PATH=${JAVA_HOME}/bin:$PATH\n-        - java --version\n-      script:\n-        - ./.travis/setup_gpg\n-        ## Update product version to include build number.\n-        ## EG: replace \"2.0.0\" to be \"2.0.15555\";\n-        - sed -i \"s/.0 *$/.$TRAVIS_BUILD_NUMBER/\" game-core/src/main/resources/META-INF/triplea/product.properties\n-        - ./.travis/do_release\n+      script: [ $DEPLOY_STAGE/installers/run || $REPORT_FAIL ]\n       deploy:\n+        on: { tags: false, repo: triplea-game/triplea, branch: master }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQwMjYyNQ=="}, "originalCommit": {"oid": "1353b9b121d93ad4275f855b2c40749f1c192437"}, "originalPosition": 181}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTY4MzQ2OA==", "bodyText": "Only the Web browser.\nI get what you were trying to achieve, but I think in this particular case (also because there are not too many deployment blocks) it doesn't really add to readability.\nBut I could live with either way, just wanted to point it out.", "url": "https://github.com/triplea-game/triplea/pull/5899#discussion_r375683468", "createdAt": "2020-02-06T07:55:53Z", "author": {"login": "RoiEXLab"}, "path": ".travis.yml", "diffHunk": "@@ -1,188 +1,109 @@\n+if: tag is blank\n dist: xenial\n sudo: false\n language: java\n-if: tag is blank\n-\n-# Note: Travis generally does not allocate more than 5 VMs at once.\n-# Avoid running more than 5 jobs in parallel. Try to keep the jobs\n-# balanced so that they each take about the same amount of time.\n-\n-# Note: We download Java 11.0.5 for a few reasons:\n-# - jcenter no longer allows https TLS1.0 connection (this is seen as\n-#   a gradle failed to download plugin error)\n-# - Travis has Java 11.0.2 baked in to it, 11.0.2 does not have a\n-#   recent patch (2019-10) to allow Java 11 to use a compatible version\n-#   of TLS.\n-# To overcome this situation, we emulate the travis 'install-jdk' script\n-# and install a latest Java 11. For reference:\n-#   https://sormuras.github.io/blog/2017-12-08-install-jdk-on-travis.html\n-# Java12 does not have this issue, we do not download the Java11 script\n-# for that JVM or else we would be overriding Java12 with Java11.  \n-#\n-# Additional note: The export commands seem to not apply when extracted\n-# to a script and seemingly only work when located in the main travis config\n-# here.\n-#\n+jdk: openjdk11\n+cache: { directories: [ \"$HOME/.gradle\" , \".gradle\" ] }\n+install: skip\n \n+env:\n+  global:\n+   - REPORT_FAIL=\".travis/shared/report-build-status FAILURE\"\n+   - VERIFY_STAGE=\".travis/stages/verify\"\n+   - DEPLOY_STAGE=\".travis/stages/deploy\"\n jobs:\n   include:\n-    - stage: verify\n-      env: \"Static Verification\"\n-      jdk: openjdk11\n-      cache:\n-        directories:\n-          - '$HOME/.gradle'\n-          - '.gradle'\n-          - '~/jdk-11.0.5+10'\n-      before_install:\n-        - ./.travis/install_java_11.0.5\n-        - export JAVA_HOME=~/jdk-11.0.5+10\n-        - export PATH=${JAVA_HOME}/bin:$PATH\n-        - java --version\n-      install: skip\n-      script:\n-        ## shellcheck all shell scripts\n-        - find .travis/ -type f | xargs grep -lE \"^#\\!/bin/bash$\" | xargs shellcheck\n-        - .travis/check-links || travis_terminate 1;\n-        - .travis/find-unused-dbunit-datasets || travis_terminate 1\n-        - .travis/find-unmatched-test-packages || travis_terminate 1;\n-        - .travis/find-orphaned-tests || travis_terminate 1;\n-        - .travis/check-custom-style || travis_terminate 1;\n-        - ./gradlew --parallel validateYamls spotlessCheck checkstyleMain checkstyleTest pmdMain pmdTest\n-    - stage: verify\n-      env: \"Unit & Integration Tests\"\n-      jdk: openjdk11\n-      cache:\n-        directories:\n-          - '$HOME/.gradle'\n-          - '.gradle'\n-          - '~/jdk-11.0.5+10'\n-      addons: {postgresql: \"10\"}\n-      before_install:\n-        - ./.travis/install_java_11.0.5\n-        - export JAVA_HOME=~/jdk-11.0.5+10\n-        - export PATH=${JAVA_HOME}/bin:$PATH\n-        - java --version\n-      install: skip\n-      script:\n-        - .travis/setup_database\n-        - .travis/launch-http-server || travis_terminate 1\n-        - ./gradlew --parallel test integTest jacocoTestReport || travis_terminate 1\n-        - bash <(curl -s https://codecov.io/bash)  # upload coverage report - https://github.com/codecov/example-gradle\n-    - stage: verify\n-      env: \"Smoke Test\"\n-      jdk: openjdk11\n-      cache:\n-        directories:\n-          - '$HOME/.gradle'\n-          - '.gradle'\n-          - '~/jdk-11.0.5+10'\n+    \n+    ########################################################################\n+    # Jobs are ordered tests first and then slower jobs before faster ones.\n+  \n+    - stage: Verify\n+      name: \"Tests: Integration Test\"\n+      addons: { postgresql: \"10\" }\n+      script: [ $VERIFY_STAGE/integration-testing/run || $REPORT_FAIL ]\n+\n+    - stage: Verify\n+      name: \"Tests: Unit Test\"\n+      script: [ $VERIFY_STAGE/unit-testing/run || $REPORT_FAIL ]\n+    \n+    - stage: Verify\n+      name: \"Tests: Smoke Test\"\n       addons: {postgresql: \"10\"}\n-      before_install:\n-        - ./.travis/install_java_11.0.5\n-        - export JAVA_HOME=~/jdk-11.0.5+10\n-        - export PATH=${JAVA_HOME}/bin:$PATH\n-        - java --version\n-      install: skip\n-      script:\n-        - ./.travis/setup_database\n-        - ./.travis/run_smoke_tests\n-    - stage: deploy artifacts\n-      env: \"Upload to Github Releases\"\n+      script: [ $VERIFY_STAGE/smoke-testing/run || $REPORT_FAIL ]\n+\n+    - stage: Verify\n+      name: \"Analysis: PMD Verification\"\n+      script: [ $VERIFY_STAGE/pmd-verification/run || $REPORT_FAIL ]\n+    \n+    - stage: Verify\n+      name: \"Analysis: Checkstyle\"\n+      script: [ $VERIFY_STAGE/checkstyle/run || $REPORT_FAIL ]\n+    \n+    - stage: Verify\n+      name: \"Analysis: Java Formatting\"\n+      script: [ $VERIFY_STAGE/java-formatting/run || $REPORT_FAIL ]\n+    \n+    - stage: Verify\n+      name: \"Analysis: Check Links and YAML Syntax\"\n+      script: [ $VERIFY_STAGE/check-links-and-yaml-syntax/run || $REPORT_FAIL ]\n+      \n+    - stage: Verify\n+      name: \"Analysis: Code Convention Checks\"\n+      script: [ $VERIFY_STAGE/code-convention-checks/run || $REPORT_FAIL ]\n+\n+    - stage: Verify\n+      name: \"Analysis: Find Unused or Unmatched Tests\"\n+      script: [ $VERIFY_STAGE/find-unused-or-unmatched-tests/run || $REPORT_FAIL ]\n+\n+    ########################################################################\n+\n+    - stage: Deploy\n+      name: \"Push Map Descriptions to Website\"\n+      if: (branch = master) and (repo = 'triplea-game/triplea') and (type != 'pull_request')\n+      addons: { apt: { packages: [ python3, python3-yaml ] } }\n+      script: [ $DEPLOY_STAGE/update-maps-on-website/run || $REPORT_FAIL ]     \n+\n+    - stage: Deploy\n+      name: \"Ansible Deploy to Prerelease\"\n+      if: (branch = master) and (repo = 'triplea-game/triplea') and (type != 'pull_request')\n+      language: python\n+      python: \"3.6\"\n+      addons: { apt: { packages: [ sshpass ] } }\n+      install: [ pip install ansible ]\n+      script: [ $DEPLOY_STAGE/ansible-deploy-to-prerelease/run || $REPORT_FAIL ]\n+\n+    - stage: Deploy\n+      name: \"Build Installer Downloads & Upload to Github Releases\"\n       if: (branch = master) and (repo = 'triplea-game/triplea') and (type != 'pull_request')\n-      install: skip\n-      cache:\n-        directories:\n-          - '$HOME/.gradle'\n-          - '.gradle'\n-          - '~/jdk-11.0.5+10'\n-      before_install:\n-        - ./.travis/install_java_11.0.5\n-        - export JAVA_HOME=~/jdk-11.0.5+10\n-        - export PATH=${JAVA_HOME}/bin:$PATH\n-        - java --version\n-      script:\n-        - ./.travis/setup_gpg\n-        ## Update product version to include build number.\n-        ## EG: replace \"2.0.0\" to be \"2.0.15555\";\n-        - sed -i \"s/.0 *$/.$TRAVIS_BUILD_NUMBER/\" game-core/src/main/resources/META-INF/triplea/product.properties\n-        - ./.travis/do_release\n+      script: [ $DEPLOY_STAGE/installers/run || $REPORT_FAIL ]\n       deploy:\n+        on: { tags: false, repo: triplea-game/triplea, branch: master }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQwMjYyNQ=="}, "originalCommit": {"oid": "1353b9b121d93ad4275f855b2c40749f1c192437"}, "originalPosition": 181}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjE5ODk1OQ==", "bodyText": "Here is a contrast:\n\n\nThe multi-line leads to the most indentation and makes nearby indentation much more important. The values specified are somewhat noisy, but also makes the file quite a bit longer. One issue IMO we developed with the travis file is it became very long, too much to really understand easily.", "url": "https://github.com/triplea-game/triplea/pull/5899#discussion_r376198959", "createdAt": "2020-02-07T03:27:32Z", "author": {"login": "DanVanAtta"}, "path": ".travis.yml", "diffHunk": "@@ -1,188 +1,109 @@\n+if: tag is blank\n dist: xenial\n sudo: false\n language: java\n-if: tag is blank\n-\n-# Note: Travis generally does not allocate more than 5 VMs at once.\n-# Avoid running more than 5 jobs in parallel. Try to keep the jobs\n-# balanced so that they each take about the same amount of time.\n-\n-# Note: We download Java 11.0.5 for a few reasons:\n-# - jcenter no longer allows https TLS1.0 connection (this is seen as\n-#   a gradle failed to download plugin error)\n-# - Travis has Java 11.0.2 baked in to it, 11.0.2 does not have a\n-#   recent patch (2019-10) to allow Java 11 to use a compatible version\n-#   of TLS.\n-# To overcome this situation, we emulate the travis 'install-jdk' script\n-# and install a latest Java 11. For reference:\n-#   https://sormuras.github.io/blog/2017-12-08-install-jdk-on-travis.html\n-# Java12 does not have this issue, we do not download the Java11 script\n-# for that JVM or else we would be overriding Java12 with Java11.  \n-#\n-# Additional note: The export commands seem to not apply when extracted\n-# to a script and seemingly only work when located in the main travis config\n-# here.\n-#\n+jdk: openjdk11\n+cache: { directories: [ \"$HOME/.gradle\" , \".gradle\" ] }\n+install: skip\n \n+env:\n+  global:\n+   - REPORT_FAIL=\".travis/shared/report-build-status FAILURE\"\n+   - VERIFY_STAGE=\".travis/stages/verify\"\n+   - DEPLOY_STAGE=\".travis/stages/deploy\"\n jobs:\n   include:\n-    - stage: verify\n-      env: \"Static Verification\"\n-      jdk: openjdk11\n-      cache:\n-        directories:\n-          - '$HOME/.gradle'\n-          - '.gradle'\n-          - '~/jdk-11.0.5+10'\n-      before_install:\n-        - ./.travis/install_java_11.0.5\n-        - export JAVA_HOME=~/jdk-11.0.5+10\n-        - export PATH=${JAVA_HOME}/bin:$PATH\n-        - java --version\n-      install: skip\n-      script:\n-        ## shellcheck all shell scripts\n-        - find .travis/ -type f | xargs grep -lE \"^#\\!/bin/bash$\" | xargs shellcheck\n-        - .travis/check-links || travis_terminate 1;\n-        - .travis/find-unused-dbunit-datasets || travis_terminate 1\n-        - .travis/find-unmatched-test-packages || travis_terminate 1;\n-        - .travis/find-orphaned-tests || travis_terminate 1;\n-        - .travis/check-custom-style || travis_terminate 1;\n-        - ./gradlew --parallel validateYamls spotlessCheck checkstyleMain checkstyleTest pmdMain pmdTest\n-    - stage: verify\n-      env: \"Unit & Integration Tests\"\n-      jdk: openjdk11\n-      cache:\n-        directories:\n-          - '$HOME/.gradle'\n-          - '.gradle'\n-          - '~/jdk-11.0.5+10'\n-      addons: {postgresql: \"10\"}\n-      before_install:\n-        - ./.travis/install_java_11.0.5\n-        - export JAVA_HOME=~/jdk-11.0.5+10\n-        - export PATH=${JAVA_HOME}/bin:$PATH\n-        - java --version\n-      install: skip\n-      script:\n-        - .travis/setup_database\n-        - .travis/launch-http-server || travis_terminate 1\n-        - ./gradlew --parallel test integTest jacocoTestReport || travis_terminate 1\n-        - bash <(curl -s https://codecov.io/bash)  # upload coverage report - https://github.com/codecov/example-gradle\n-    - stage: verify\n-      env: \"Smoke Test\"\n-      jdk: openjdk11\n-      cache:\n-        directories:\n-          - '$HOME/.gradle'\n-          - '.gradle'\n-          - '~/jdk-11.0.5+10'\n+    \n+    ########################################################################\n+    # Jobs are ordered tests first and then slower jobs before faster ones.\n+  \n+    - stage: Verify\n+      name: \"Tests: Integration Test\"\n+      addons: { postgresql: \"10\" }\n+      script: [ $VERIFY_STAGE/integration-testing/run || $REPORT_FAIL ]\n+\n+    - stage: Verify\n+      name: \"Tests: Unit Test\"\n+      script: [ $VERIFY_STAGE/unit-testing/run || $REPORT_FAIL ]\n+    \n+    - stage: Verify\n+      name: \"Tests: Smoke Test\"\n       addons: {postgresql: \"10\"}\n-      before_install:\n-        - ./.travis/install_java_11.0.5\n-        - export JAVA_HOME=~/jdk-11.0.5+10\n-        - export PATH=${JAVA_HOME}/bin:$PATH\n-        - java --version\n-      install: skip\n-      script:\n-        - ./.travis/setup_database\n-        - ./.travis/run_smoke_tests\n-    - stage: deploy artifacts\n-      env: \"Upload to Github Releases\"\n+      script: [ $VERIFY_STAGE/smoke-testing/run || $REPORT_FAIL ]\n+\n+    - stage: Verify\n+      name: \"Analysis: PMD Verification\"\n+      script: [ $VERIFY_STAGE/pmd-verification/run || $REPORT_FAIL ]\n+    \n+    - stage: Verify\n+      name: \"Analysis: Checkstyle\"\n+      script: [ $VERIFY_STAGE/checkstyle/run || $REPORT_FAIL ]\n+    \n+    - stage: Verify\n+      name: \"Analysis: Java Formatting\"\n+      script: [ $VERIFY_STAGE/java-formatting/run || $REPORT_FAIL ]\n+    \n+    - stage: Verify\n+      name: \"Analysis: Check Links and YAML Syntax\"\n+      script: [ $VERIFY_STAGE/check-links-and-yaml-syntax/run || $REPORT_FAIL ]\n+      \n+    - stage: Verify\n+      name: \"Analysis: Code Convention Checks\"\n+      script: [ $VERIFY_STAGE/code-convention-checks/run || $REPORT_FAIL ]\n+\n+    - stage: Verify\n+      name: \"Analysis: Find Unused or Unmatched Tests\"\n+      script: [ $VERIFY_STAGE/find-unused-or-unmatched-tests/run || $REPORT_FAIL ]\n+\n+    ########################################################################\n+\n+    - stage: Deploy\n+      name: \"Push Map Descriptions to Website\"\n+      if: (branch = master) and (repo = 'triplea-game/triplea') and (type != 'pull_request')\n+      addons: { apt: { packages: [ python3, python3-yaml ] } }\n+      script: [ $DEPLOY_STAGE/update-maps-on-website/run || $REPORT_FAIL ]     \n+\n+    - stage: Deploy\n+      name: \"Ansible Deploy to Prerelease\"\n+      if: (branch = master) and (repo = 'triplea-game/triplea') and (type != 'pull_request')\n+      language: python\n+      python: \"3.6\"\n+      addons: { apt: { packages: [ sshpass ] } }\n+      install: [ pip install ansible ]\n+      script: [ $DEPLOY_STAGE/ansible-deploy-to-prerelease/run || $REPORT_FAIL ]\n+\n+    - stage: Deploy\n+      name: \"Build Installer Downloads & Upload to Github Releases\"\n       if: (branch = master) and (repo = 'triplea-game/triplea') and (type != 'pull_request')\n-      install: skip\n-      cache:\n-        directories:\n-          - '$HOME/.gradle'\n-          - '.gradle'\n-          - '~/jdk-11.0.5+10'\n-      before_install:\n-        - ./.travis/install_java_11.0.5\n-        - export JAVA_HOME=~/jdk-11.0.5+10\n-        - export PATH=${JAVA_HOME}/bin:$PATH\n-        - java --version\n-      script:\n-        - ./.travis/setup_gpg\n-        ## Update product version to include build number.\n-        ## EG: replace \"2.0.0\" to be \"2.0.15555\";\n-        - sed -i \"s/.0 *$/.$TRAVIS_BUILD_NUMBER/\" game-core/src/main/resources/META-INF/triplea/product.properties\n-        - ./.travis/do_release\n+      script: [ $DEPLOY_STAGE/installers/run || $REPORT_FAIL ]\n       deploy:\n+        on: { tags: false, repo: triplea-game/triplea, branch: master }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQwMjYyNQ=="}, "originalCommit": {"oid": "1353b9b121d93ad4275f855b2c40749f1c192437"}, "originalPosition": 181}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyMTc2MjQzOnYy", "diffSide": "RIGHT", "path": ".travis.yml", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNzozNzoyNlrOFmA3Aw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QwMzo0MTowM1rOFmxhBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQwNDI5MQ==", "bodyText": "For all of the script parts: I'm pretty sure that travis doesn't care if a list or a single entry is given. After all the default value for this key should be ./gradlew check IIRC", "url": "https://github.com/triplea-game/triplea/pull/5899#discussion_r375404291", "createdAt": "2020-02-05T17:37:26Z", "author": {"login": "RoiEXLab"}, "path": ".travis.yml", "diffHunk": "@@ -1,188 +1,109 @@\n+if: tag is blank\n dist: xenial\n sudo: false\n language: java\n-if: tag is blank\n-\n-# Note: Travis generally does not allocate more than 5 VMs at once.\n-# Avoid running more than 5 jobs in parallel. Try to keep the jobs\n-# balanced so that they each take about the same amount of time.\n-\n-# Note: We download Java 11.0.5 for a few reasons:\n-# - jcenter no longer allows https TLS1.0 connection (this is seen as\n-#   a gradle failed to download plugin error)\n-# - Travis has Java 11.0.2 baked in to it, 11.0.2 does not have a\n-#   recent patch (2019-10) to allow Java 11 to use a compatible version\n-#   of TLS.\n-# To overcome this situation, we emulate the travis 'install-jdk' script\n-# and install a latest Java 11. For reference:\n-#   https://sormuras.github.io/blog/2017-12-08-install-jdk-on-travis.html\n-# Java12 does not have this issue, we do not download the Java11 script\n-# for that JVM or else we would be overriding Java12 with Java11.  \n-#\n-# Additional note: The export commands seem to not apply when extracted\n-# to a script and seemingly only work when located in the main travis config\n-# here.\n-#\n+jdk: openjdk11\n+cache: { directories: [ \"$HOME/.gradle\" , \".gradle\" ] }\n+install: skip\n \n+env:\n+  global:\n+   - REPORT_FAIL=\".travis/shared/report-build-status FAILURE\"\n+   - VERIFY_STAGE=\".travis/stages/verify\"\n+   - DEPLOY_STAGE=\".travis/stages/deploy\"\n jobs:\n   include:\n-    - stage: verify\n-      env: \"Static Verification\"\n-      jdk: openjdk11\n-      cache:\n-        directories:\n-          - '$HOME/.gradle'\n-          - '.gradle'\n-          - '~/jdk-11.0.5+10'\n-      before_install:\n-        - ./.travis/install_java_11.0.5\n-        - export JAVA_HOME=~/jdk-11.0.5+10\n-        - export PATH=${JAVA_HOME}/bin:$PATH\n-        - java --version\n-      install: skip\n-      script:\n-        ## shellcheck all shell scripts\n-        - find .travis/ -type f | xargs grep -lE \"^#\\!/bin/bash$\" | xargs shellcheck\n-        - .travis/check-links || travis_terminate 1;\n-        - .travis/find-unused-dbunit-datasets || travis_terminate 1\n-        - .travis/find-unmatched-test-packages || travis_terminate 1;\n-        - .travis/find-orphaned-tests || travis_terminate 1;\n-        - .travis/check-custom-style || travis_terminate 1;\n-        - ./gradlew --parallel validateYamls spotlessCheck checkstyleMain checkstyleTest pmdMain pmdTest\n-    - stage: verify\n-      env: \"Unit & Integration Tests\"\n-      jdk: openjdk11\n-      cache:\n-        directories:\n-          - '$HOME/.gradle'\n-          - '.gradle'\n-          - '~/jdk-11.0.5+10'\n-      addons: {postgresql: \"10\"}\n-      before_install:\n-        - ./.travis/install_java_11.0.5\n-        - export JAVA_HOME=~/jdk-11.0.5+10\n-        - export PATH=${JAVA_HOME}/bin:$PATH\n-        - java --version\n-      install: skip\n-      script:\n-        - .travis/setup_database\n-        - .travis/launch-http-server || travis_terminate 1\n-        - ./gradlew --parallel test integTest jacocoTestReport || travis_terminate 1\n-        - bash <(curl -s https://codecov.io/bash)  # upload coverage report - https://github.com/codecov/example-gradle\n-    - stage: verify\n-      env: \"Smoke Test\"\n-      jdk: openjdk11\n-      cache:\n-        directories:\n-          - '$HOME/.gradle'\n-          - '.gradle'\n-          - '~/jdk-11.0.5+10'\n+    \n+    ########################################################################\n+    # Jobs are ordered tests first and then slower jobs before faster ones.\n+  \n+    - stage: Verify\n+      name: \"Tests: Integration Test\"\n+      addons: { postgresql: \"10\" }\n+      script: [ $VERIFY_STAGE/integration-testing/run || $REPORT_FAIL ]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1353b9b121d93ad4275f855b2c40749f1c192437"}, "originalPosition": 96}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU5ODE3Ng==", "bodyText": "Hmm, not sure if this matters. If we wind up adding more, then it'll be less of a diff, on the other hand we should not be adding more lines as each item in 'script' is intentionally extracted to 'run'.", "url": "https://github.com/triplea-game/triplea/pull/5899#discussion_r375598176", "createdAt": "2020-02-06T01:23:46Z", "author": {"login": "DanVanAtta"}, "path": ".travis.yml", "diffHunk": "@@ -1,188 +1,109 @@\n+if: tag is blank\n dist: xenial\n sudo: false\n language: java\n-if: tag is blank\n-\n-# Note: Travis generally does not allocate more than 5 VMs at once.\n-# Avoid running more than 5 jobs in parallel. Try to keep the jobs\n-# balanced so that they each take about the same amount of time.\n-\n-# Note: We download Java 11.0.5 for a few reasons:\n-# - jcenter no longer allows https TLS1.0 connection (this is seen as\n-#   a gradle failed to download plugin error)\n-# - Travis has Java 11.0.2 baked in to it, 11.0.2 does not have a\n-#   recent patch (2019-10) to allow Java 11 to use a compatible version\n-#   of TLS.\n-# To overcome this situation, we emulate the travis 'install-jdk' script\n-# and install a latest Java 11. For reference:\n-#   https://sormuras.github.io/blog/2017-12-08-install-jdk-on-travis.html\n-# Java12 does not have this issue, we do not download the Java11 script\n-# for that JVM or else we would be overriding Java12 with Java11.  \n-#\n-# Additional note: The export commands seem to not apply when extracted\n-# to a script and seemingly only work when located in the main travis config\n-# here.\n-#\n+jdk: openjdk11\n+cache: { directories: [ \"$HOME/.gradle\" , \".gradle\" ] }\n+install: skip\n \n+env:\n+  global:\n+   - REPORT_FAIL=\".travis/shared/report-build-status FAILURE\"\n+   - VERIFY_STAGE=\".travis/stages/verify\"\n+   - DEPLOY_STAGE=\".travis/stages/deploy\"\n jobs:\n   include:\n-    - stage: verify\n-      env: \"Static Verification\"\n-      jdk: openjdk11\n-      cache:\n-        directories:\n-          - '$HOME/.gradle'\n-          - '.gradle'\n-          - '~/jdk-11.0.5+10'\n-      before_install:\n-        - ./.travis/install_java_11.0.5\n-        - export JAVA_HOME=~/jdk-11.0.5+10\n-        - export PATH=${JAVA_HOME}/bin:$PATH\n-        - java --version\n-      install: skip\n-      script:\n-        ## shellcheck all shell scripts\n-        - find .travis/ -type f | xargs grep -lE \"^#\\!/bin/bash$\" | xargs shellcheck\n-        - .travis/check-links || travis_terminate 1;\n-        - .travis/find-unused-dbunit-datasets || travis_terminate 1\n-        - .travis/find-unmatched-test-packages || travis_terminate 1;\n-        - .travis/find-orphaned-tests || travis_terminate 1;\n-        - .travis/check-custom-style || travis_terminate 1;\n-        - ./gradlew --parallel validateYamls spotlessCheck checkstyleMain checkstyleTest pmdMain pmdTest\n-    - stage: verify\n-      env: \"Unit & Integration Tests\"\n-      jdk: openjdk11\n-      cache:\n-        directories:\n-          - '$HOME/.gradle'\n-          - '.gradle'\n-          - '~/jdk-11.0.5+10'\n-      addons: {postgresql: \"10\"}\n-      before_install:\n-        - ./.travis/install_java_11.0.5\n-        - export JAVA_HOME=~/jdk-11.0.5+10\n-        - export PATH=${JAVA_HOME}/bin:$PATH\n-        - java --version\n-      install: skip\n-      script:\n-        - .travis/setup_database\n-        - .travis/launch-http-server || travis_terminate 1\n-        - ./gradlew --parallel test integTest jacocoTestReport || travis_terminate 1\n-        - bash <(curl -s https://codecov.io/bash)  # upload coverage report - https://github.com/codecov/example-gradle\n-    - stage: verify\n-      env: \"Smoke Test\"\n-      jdk: openjdk11\n-      cache:\n-        directories:\n-          - '$HOME/.gradle'\n-          - '.gradle'\n-          - '~/jdk-11.0.5+10'\n+    \n+    ########################################################################\n+    # Jobs are ordered tests first and then slower jobs before faster ones.\n+  \n+    - stage: Verify\n+      name: \"Tests: Integration Test\"\n+      addons: { postgresql: \"10\" }\n+      script: [ $VERIFY_STAGE/integration-testing/run || $REPORT_FAIL ]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQwNDI5MQ=="}, "originalCommit": {"oid": "1353b9b121d93ad4275f855b2c40749f1c192437"}, "originalPosition": 96}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjIwMTQ3OQ==", "bodyText": "Took a second look at this, while the list syntax is not strictly necessary, it does do a good job to visually distinguish the script step from the other labels that are scalars.", "url": "https://github.com/triplea-game/triplea/pull/5899#discussion_r376201479", "createdAt": "2020-02-07T03:41:03Z", "author": {"login": "DanVanAtta"}, "path": ".travis.yml", "diffHunk": "@@ -1,188 +1,109 @@\n+if: tag is blank\n dist: xenial\n sudo: false\n language: java\n-if: tag is blank\n-\n-# Note: Travis generally does not allocate more than 5 VMs at once.\n-# Avoid running more than 5 jobs in parallel. Try to keep the jobs\n-# balanced so that they each take about the same amount of time.\n-\n-# Note: We download Java 11.0.5 for a few reasons:\n-# - jcenter no longer allows https TLS1.0 connection (this is seen as\n-#   a gradle failed to download plugin error)\n-# - Travis has Java 11.0.2 baked in to it, 11.0.2 does not have a\n-#   recent patch (2019-10) to allow Java 11 to use a compatible version\n-#   of TLS.\n-# To overcome this situation, we emulate the travis 'install-jdk' script\n-# and install a latest Java 11. For reference:\n-#   https://sormuras.github.io/blog/2017-12-08-install-jdk-on-travis.html\n-# Java12 does not have this issue, we do not download the Java11 script\n-# for that JVM or else we would be overriding Java12 with Java11.  \n-#\n-# Additional note: The export commands seem to not apply when extracted\n-# to a script and seemingly only work when located in the main travis config\n-# here.\n-#\n+jdk: openjdk11\n+cache: { directories: [ \"$HOME/.gradle\" , \".gradle\" ] }\n+install: skip\n \n+env:\n+  global:\n+   - REPORT_FAIL=\".travis/shared/report-build-status FAILURE\"\n+   - VERIFY_STAGE=\".travis/stages/verify\"\n+   - DEPLOY_STAGE=\".travis/stages/deploy\"\n jobs:\n   include:\n-    - stage: verify\n-      env: \"Static Verification\"\n-      jdk: openjdk11\n-      cache:\n-        directories:\n-          - '$HOME/.gradle'\n-          - '.gradle'\n-          - '~/jdk-11.0.5+10'\n-      before_install:\n-        - ./.travis/install_java_11.0.5\n-        - export JAVA_HOME=~/jdk-11.0.5+10\n-        - export PATH=${JAVA_HOME}/bin:$PATH\n-        - java --version\n-      install: skip\n-      script:\n-        ## shellcheck all shell scripts\n-        - find .travis/ -type f | xargs grep -lE \"^#\\!/bin/bash$\" | xargs shellcheck\n-        - .travis/check-links || travis_terminate 1;\n-        - .travis/find-unused-dbunit-datasets || travis_terminate 1\n-        - .travis/find-unmatched-test-packages || travis_terminate 1;\n-        - .travis/find-orphaned-tests || travis_terminate 1;\n-        - .travis/check-custom-style || travis_terminate 1;\n-        - ./gradlew --parallel validateYamls spotlessCheck checkstyleMain checkstyleTest pmdMain pmdTest\n-    - stage: verify\n-      env: \"Unit & Integration Tests\"\n-      jdk: openjdk11\n-      cache:\n-        directories:\n-          - '$HOME/.gradle'\n-          - '.gradle'\n-          - '~/jdk-11.0.5+10'\n-      addons: {postgresql: \"10\"}\n-      before_install:\n-        - ./.travis/install_java_11.0.5\n-        - export JAVA_HOME=~/jdk-11.0.5+10\n-        - export PATH=${JAVA_HOME}/bin:$PATH\n-        - java --version\n-      install: skip\n-      script:\n-        - .travis/setup_database\n-        - .travis/launch-http-server || travis_terminate 1\n-        - ./gradlew --parallel test integTest jacocoTestReport || travis_terminate 1\n-        - bash <(curl -s https://codecov.io/bash)  # upload coverage report - https://github.com/codecov/example-gradle\n-    - stage: verify\n-      env: \"Smoke Test\"\n-      jdk: openjdk11\n-      cache:\n-        directories:\n-          - '$HOME/.gradle'\n-          - '.gradle'\n-          - '~/jdk-11.0.5+10'\n+    \n+    ########################################################################\n+    # Jobs are ordered tests first and then slower jobs before faster ones.\n+  \n+    - stage: Verify\n+      name: \"Tests: Integration Test\"\n+      addons: { postgresql: \"10\" }\n+      script: [ $VERIFY_STAGE/integration-testing/run || $REPORT_FAIL ]", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQwNDI5MQ=="}, "originalCommit": {"oid": "1353b9b121d93ad4275f855b2c40749f1c192437"}, "originalPosition": 96}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyMTc2NTg5OnYy", "diffSide": "RIGHT", "path": ".travis.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNzozODo0MFrOFmA5YA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNzozODo0MFrOFmA5YA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTQwNDg5Ng==", "bodyText": "The same thing here, similar to the script thingy. It shouldn't be necessary to add list brackets here.", "url": "https://github.com/triplea-game/triplea/pull/5899#discussion_r375404896", "createdAt": "2020-02-05T17:38:40Z", "author": {"login": "RoiEXLab"}, "path": ".travis.yml", "diffHunk": "@@ -1,188 +1,109 @@\n+if: tag is blank\n dist: xenial\n sudo: false\n language: java\n-if: tag is blank\n-\n-# Note: Travis generally does not allocate more than 5 VMs at once.\n-# Avoid running more than 5 jobs in parallel. Try to keep the jobs\n-# balanced so that they each take about the same amount of time.\n-\n-# Note: We download Java 11.0.5 for a few reasons:\n-# - jcenter no longer allows https TLS1.0 connection (this is seen as\n-#   a gradle failed to download plugin error)\n-# - Travis has Java 11.0.2 baked in to it, 11.0.2 does not have a\n-#   recent patch (2019-10) to allow Java 11 to use a compatible version\n-#   of TLS.\n-# To overcome this situation, we emulate the travis 'install-jdk' script\n-# and install a latest Java 11. For reference:\n-#   https://sormuras.github.io/blog/2017-12-08-install-jdk-on-travis.html\n-# Java12 does not have this issue, we do not download the Java11 script\n-# for that JVM or else we would be overriding Java12 with Java11.  \n-#\n-# Additional note: The export commands seem to not apply when extracted\n-# to a script and seemingly only work when located in the main travis config\n-# here.\n-#\n+jdk: openjdk11\n+cache: { directories: [ \"$HOME/.gradle\" , \".gradle\" ] }\n+install: skip\n \n+env:\n+  global:\n+   - REPORT_FAIL=\".travis/shared/report-build-status FAILURE\"\n+   - VERIFY_STAGE=\".travis/stages/verify\"\n+   - DEPLOY_STAGE=\".travis/stages/deploy\"\n jobs:\n   include:\n-    - stage: verify\n-      env: \"Static Verification\"\n-      jdk: openjdk11\n-      cache:\n-        directories:\n-          - '$HOME/.gradle'\n-          - '.gradle'\n-          - '~/jdk-11.0.5+10'\n-      before_install:\n-        - ./.travis/install_java_11.0.5\n-        - export JAVA_HOME=~/jdk-11.0.5+10\n-        - export PATH=${JAVA_HOME}/bin:$PATH\n-        - java --version\n-      install: skip\n-      script:\n-        ## shellcheck all shell scripts\n-        - find .travis/ -type f | xargs grep -lE \"^#\\!/bin/bash$\" | xargs shellcheck\n-        - .travis/check-links || travis_terminate 1;\n-        - .travis/find-unused-dbunit-datasets || travis_terminate 1\n-        - .travis/find-unmatched-test-packages || travis_terminate 1;\n-        - .travis/find-orphaned-tests || travis_terminate 1;\n-        - .travis/check-custom-style || travis_terminate 1;\n-        - ./gradlew --parallel validateYamls spotlessCheck checkstyleMain checkstyleTest pmdMain pmdTest\n-    - stage: verify\n-      env: \"Unit & Integration Tests\"\n-      jdk: openjdk11\n-      cache:\n-        directories:\n-          - '$HOME/.gradle'\n-          - '.gradle'\n-          - '~/jdk-11.0.5+10'\n-      addons: {postgresql: \"10\"}\n-      before_install:\n-        - ./.travis/install_java_11.0.5\n-        - export JAVA_HOME=~/jdk-11.0.5+10\n-        - export PATH=${JAVA_HOME}/bin:$PATH\n-        - java --version\n-      install: skip\n-      script:\n-        - .travis/setup_database\n-        - .travis/launch-http-server || travis_terminate 1\n-        - ./gradlew --parallel test integTest jacocoTestReport || travis_terminate 1\n-        - bash <(curl -s https://codecov.io/bash)  # upload coverage report - https://github.com/codecov/example-gradle\n-    - stage: verify\n-      env: \"Smoke Test\"\n-      jdk: openjdk11\n-      cache:\n-        directories:\n-          - '$HOME/.gradle'\n-          - '.gradle'\n-          - '~/jdk-11.0.5+10'\n+    \n+    ########################################################################\n+    # Jobs are ordered tests first and then slower jobs before faster ones.\n+  \n+    - stage: Verify\n+      name: \"Tests: Integration Test\"\n+      addons: { postgresql: \"10\" }\n+      script: [ $VERIFY_STAGE/integration-testing/run || $REPORT_FAIL ]\n+\n+    - stage: Verify\n+      name: \"Tests: Unit Test\"\n+      script: [ $VERIFY_STAGE/unit-testing/run || $REPORT_FAIL ]\n+    \n+    - stage: Verify\n+      name: \"Tests: Smoke Test\"\n       addons: {postgresql: \"10\"}\n-      before_install:\n-        - ./.travis/install_java_11.0.5\n-        - export JAVA_HOME=~/jdk-11.0.5+10\n-        - export PATH=${JAVA_HOME}/bin:$PATH\n-        - java --version\n-      install: skip\n-      script:\n-        - ./.travis/setup_database\n-        - ./.travis/run_smoke_tests\n-    - stage: deploy artifacts\n-      env: \"Upload to Github Releases\"\n+      script: [ $VERIFY_STAGE/smoke-testing/run || $REPORT_FAIL ]\n+\n+    - stage: Verify\n+      name: \"Analysis: PMD Verification\"\n+      script: [ $VERIFY_STAGE/pmd-verification/run || $REPORT_FAIL ]\n+    \n+    - stage: Verify\n+      name: \"Analysis: Checkstyle\"\n+      script: [ $VERIFY_STAGE/checkstyle/run || $REPORT_FAIL ]\n+    \n+    - stage: Verify\n+      name: \"Analysis: Java Formatting\"\n+      script: [ $VERIFY_STAGE/java-formatting/run || $REPORT_FAIL ]\n+    \n+    - stage: Verify\n+      name: \"Analysis: Check Links and YAML Syntax\"\n+      script: [ $VERIFY_STAGE/check-links-and-yaml-syntax/run || $REPORT_FAIL ]\n+      \n+    - stage: Verify\n+      name: \"Analysis: Code Convention Checks\"\n+      script: [ $VERIFY_STAGE/code-convention-checks/run || $REPORT_FAIL ]\n+\n+    - stage: Verify\n+      name: \"Analysis: Find Unused or Unmatched Tests\"\n+      script: [ $VERIFY_STAGE/find-unused-or-unmatched-tests/run || $REPORT_FAIL ]\n+\n+    ########################################################################\n+\n+    - stage: Deploy\n+      name: \"Push Map Descriptions to Website\"\n+      if: (branch = master) and (repo = 'triplea-game/triplea') and (type != 'pull_request')\n+      addons: { apt: { packages: [ python3, python3-yaml ] } }\n+      script: [ $DEPLOY_STAGE/update-maps-on-website/run || $REPORT_FAIL ]     \n+\n+    - stage: Deploy\n+      name: \"Ansible Deploy to Prerelease\"\n+      if: (branch = master) and (repo = 'triplea-game/triplea') and (type != 'pull_request')\n+      language: python\n+      python: \"3.6\"\n+      addons: { apt: { packages: [ sshpass ] } }\n+      install: [ pip install ansible ]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1353b9b121d93ad4275f855b2c40749f1c192437"}, "originalPosition": 156}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2594, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}