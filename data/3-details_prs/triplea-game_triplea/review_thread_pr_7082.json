{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2Nzg4NTM2", "number": 7082, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQyMjo0NTozMFrOENFLfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQyMjo0NTozMFrOENFLfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgyMTUxODA1OnYy", "diffSide": "RIGHT", "path": "game-core/src/main/java/games/strategy/engine/chat/ChatPlayerPanel.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQyMjo0NTozMFrOGvkPjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQwNjozNDowOFrOGvreUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjUzMDA2Mg==", "bodyText": "I was thinking about this for a while, but I think this isn't the right fix for this.\nThe stacktrace in #7034 makes it clear that this NullPointerException occurs when shutting down a game, so adjusting the preffered size just before the game is closed doesn't really make sense to me.\nThat's why I'd recommend making this method no-op if chat is null i.e.\nif (chat == null) {\n  return;\n}\nAt the start if the method", "url": "https://github.com/triplea-game/triplea/pull/7082#discussion_r452530062", "createdAt": "2020-07-09T22:45:30Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/engine/chat/ChatPlayerPanel.java", "diffHunk": "@@ -85,9 +85,11 @@ public void setChat(final Chat chat) {\n    */\n   private void setDynamicPreferredSize() {\n     int maxNameLength = 0;\n-    final FontMetrics fontMetrics = this.getFontMetrics(UIManager.getFont(\"TextField.font\"));\n-    for (final UserName onlinePlayer : chat.getOnlinePlayers()) {\n-      maxNameLength = Math.max(maxNameLength, fontMetrics.stringWidth(onlinePlayer.getValue()));\n+    if (chat != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9f64682b0011055bf50fd9ca8f1e6982f131705"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjY0ODUyOQ==", "bodyText": "Just pushed that, and verifying zero interactions with renderer mock. Was wondering if I should create more unit tests/test cases (in general) ?", "url": "https://github.com/triplea-game/triplea/pull/7082#discussion_r452648529", "createdAt": "2020-07-10T06:34:08Z", "author": {"login": "tjrbrom"}, "path": "game-core/src/main/java/games/strategy/engine/chat/ChatPlayerPanel.java", "diffHunk": "@@ -85,9 +85,11 @@ public void setChat(final Chat chat) {\n    */\n   private void setDynamicPreferredSize() {\n     int maxNameLength = 0;\n-    final FontMetrics fontMetrics = this.getFontMetrics(UIManager.getFont(\"TextField.font\"));\n-    for (final UserName onlinePlayer : chat.getOnlinePlayers()) {\n-      maxNameLength = Math.max(maxNameLength, fontMetrics.stringWidth(onlinePlayer.getValue()));\n+    if (chat != null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjUzMDA2Mg=="}, "originalCommit": {"oid": "e9f64682b0011055bf50fd9ca8f1e6982f131705"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1988, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}