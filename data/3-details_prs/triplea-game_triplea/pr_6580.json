{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2MzU1OTM4", "number": 6580, "title": "Fix NPE in auto-placement-finder when finding islands", "bodyText": "The contract of MapData#getContainedTerritoryPolygons (in javadoc)\nstates the parameter should be a sea territory. The caller passes\nall territories to this method which then results in a NPE in\nthe method. To fix, relax the contract and return an empty collection\nif the parameter is not a sea territory.\nReported in: #6469\n\nFunctional Changes\n\n[] New map or map update\n[] New Feature\n[] Feature update or enhancement\n[] Feature Removal\n[] Code Cleanup or refactor\n[] Configuration Change\n[x] Problem fix: #6469 \n[] Other:   \nTesting\nRepo by:\n\nunzip a downloaded map\nlaunch game\nlaunch map maker tools\nfind the auto-placement finder\nenter the name of the unzipped map folder name, eg: \"napoleonic_empires-master\"\nselect 'yes' on all prompts\nobserve a NPE (consistent)\n\nAfter fix verified that the auto-placement-finder could run to completion.", "createdAt": "2020-06-02T05:18:03Z", "url": "https://github.com/triplea-game/triplea/pull/6580", "merged": true, "mergeCommit": {"oid": "c921661351387e66ba053d6e4e4908d4148f9538"}, "closed": true, "closedAt": "2020-06-06T22:41:52Z", "author": {"login": "DanVanAtta"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcnN0RDgH2gAyNDI2MzU1OTM4OmYzMDVlNWM5ODMwMmNlOTc4YjEzMTAxOThkNGUzMjA4ODI4ZjM0MGM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcoudCQAH2gAyNDI2MzU1OTM4OjBlZGQyYmM1MGQyNzI0ZjYyYWQzYTA5YTAwOWM2YTNkN2IwZTNlYzE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f305e5c98302ce978b1310198d4e3208828f340c", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/f305e5c98302ce978b1310198d4e3208828f340c", "committedDate": "2020-06-02T05:14:59Z", "message": "Fix NPE in auto-placement-finder when finding islands\n\nThe contract of MapData#getContainedTerritoryPolygons (in javadoc)\nstates the parameter should be a sea territory. The caller passes\nall territories to this method which then results in a NPE in\nthe method. To fix, relax the contract and return an empty collection\nif the parameter is not a sea territory.\n\nReported in: https://github.com/triplea-game/triplea/issues/6469"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIzMTM2OTM4", "url": "https://github.com/triplea-game/triplea/pull/6580#pullrequestreview-423136938", "createdAt": "2020-06-03T00:10:03Z", "commit": {"oid": "f305e5c98302ce978b1310198d4e3208828f340c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwMDoxMDowM1rOGeH8LA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QwMDoxMDowM1rOGeH8LA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDI0MDU1Ng==", "bodyText": "What about contains.getOrDefault(territoryName, Set.of())?", "url": "https://github.com/triplea-game/triplea/pull/6580#discussion_r434240556", "createdAt": "2020-06-03T00:10:03Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/mapdata/MapData.java", "diffHunk": "@@ -515,14 +515,18 @@ public Color impassableColor() {\n   /**\n    * Returns the polygons for any territories contained within a given territory.\n    *\n-   * @param territoryName Name of the territory, expected to be a sea territory, where we will be\n-   *     checking for any contained 'island' territories.\n+   * @param territoryName Name of the territory, where we will be checking for any contained\n+   *     'island' territories.\n+   * @return Empty if the parameter is not a sea territory or contains no 'islands', otherwise\n+   *     returns any 'islands' contained within the given territory.\n    */\n   public Set<Polygon> getContainedTerritoryPolygons(final String territoryName) {\n-    return contains.get(territoryName).stream()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f305e5c98302ce978b1310198d4e3208828f340c"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0edd2bc50d2724f62ad3a09a009c6a3d7b0e3ec1", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/0edd2bc50d2724f62ad3a09a009c6a3d7b0e3ec1", "committedDate": "2020-06-06T21:50:24Z", "message": "Minor refactor: Remove if statement by operating on empty set."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3344, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}