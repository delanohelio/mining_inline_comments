{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4MTgxODE0", "number": 8143, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwMzozMDozNFrOE3CxPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwMzozMTozNlrOE3Cx2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2MTUyNTExOnYy", "diffSide": "RIGHT", "path": "game-core/src/main/java/games/strategy/triplea/delegate/power/calculator/AaPowerStrengthAndRolls.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwMzozMDozNFrOHwKYqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwMzozMDozNFrOHwKYqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI2Mzg0OA==", "bodyText": "This fixes a bug I introduced when I refactored this code.  I now have better tests around this.  This bug is in the pre-release so I didn't add any release notes for it.", "url": "https://github.com/triplea-game/triplea/pull/8143#discussion_r520263848", "createdAt": "2020-11-10T03:30:34Z", "author": {"login": "trevan"}, "path": "game-core/src/main/java/games/strategy/triplea/delegate/power/calculator/AaPowerStrengthAndRolls.java", "diffHunk": "@@ -267,14 +268,15 @@ private void addUnits(final Collection<Unit> units) {\n         .flatMap(\n             unitPowerStrengthAndRolls -> {\n               final int strength = unitPowerStrengthAndRolls.getStrength();\n-              final int diceValue = diceQueue.removeFirst();\n               return IntStream.range(0, unitPowerStrengthAndRolls.getRolls())\n                   .mapToObj(\n-                      rollNumber ->\n-                          new Die(\n-                              diceValue,\n-                              strength,\n-                              diceValue < strength ? Die.DieType.HIT : Die.DieType.MISS));\n+                      rollNumber -> {\n+                        final int diceValue = diceQueue.removeFirst();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "832c23b75b3c79e59854d1ed20a9c7c08bdfd87d"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI2MTUyNjY1OnYy", "diffSide": "RIGHT", "path": "game-core/src/test/java/games/strategy/triplea/delegate/DiceRollTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwMzozMTozNlrOHwKZnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQwMzozMTozNlrOHwKZnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI2NDA5Mg==", "bodyText": "The previous code always made the first dice roll be the \"HIT\" roll and the other be \"IGNORED\".  The new code now keeps the dice rolls in order so this test had to be updated.", "url": "https://github.com/triplea-game/triplea/pull/8143#discussion_r520264092", "createdAt": "2020-11-10T03:31:36Z", "author": {"login": "trevan"}, "path": "game-core/src/test/java/games/strategy/triplea/delegate/DiceRollTest.java", "diffHunk": "@@ -1010,8 +1010,8 @@ void testHeavyBombersLhtr2() {\n                 .gameDiceSides(testDelegateBridge.getData().getDiceSides())\n                 .territoryEffects(TerritoryEffectHelper.getEffects(germany))\n                 .build());\n-    assertThat(dice.getRolls(4).get(0).getType(), is(Die.DieType.HIT));\n-    assertThat(dice.getRolls(4).get(1).getType(), is(Die.DieType.IGNORED));\n+    assertThat(dice.getRolls(4).get(0).getType(), is(Die.DieType.IGNORED));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "832c23b75b3c79e59854d1ed20a9c7c08bdfd87d"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2701, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}