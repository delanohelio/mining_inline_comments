{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzNzk0Nzc0", "number": 7906, "title": "Update Node-BB Dockerfile. Add README.md, and example config.json", "bodyText": "Added a Dockerfile for building an image of TripleA Forums and running it in a Docker container. Also added an example config file for NodeBB and a README with instructions for building, configuring, running, and upgrading the Docker image and NodeBB.\nTesting\nI tested every command in the README.md as I wrote the file.\nAdditional Notes to Reviewer\nI did most of this work off of questions answered in the #6599 and #7799. I am not familiar with NodeBB (this is my first exposure to it). If I missed something, let me know so I can update the Dockerfile and the README.md.", "createdAt": "2020-10-15T04:35:16Z", "url": "https://github.com/triplea-game/triplea/pull/7906", "merged": true, "mergeCommit": {"oid": "c192be865599f2aa62879d44ae882aa4f68a0d61"}, "closed": true, "closedAt": "2020-10-27T19:38:15Z", "author": {"login": "bacrossland"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdSp_tXAH2gAyNTAzNzk0Nzc0OmZiMDdlZGVhZTViNTZlZWJjMzczYjM4YTk0MDI5MDE5Yjk5MjI2ZGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdVBkj2gH2gAyNTAzNzk0Nzc0OmZmNTIzYjdmZDY3NjQyMTNiNmE1NWU3Zjg2NzZlYTcxZGFjYTcwZTY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fb07edeae5b56eebc373b38a94029019b99226df", "author": {"user": {"login": "bacrossland", "name": "Bryan Crossland"}}, "url": "https://github.com/triplea-game/triplea/commit/fb07edeae5b56eebc373b38a94029019b99226df", "committedDate": "2020-10-15T04:23:34Z", "message": "NodeBB Dockerfile, README.md, and example config.json"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ebeb222b8a2818767f05a1879889afbe189e6b84", "author": {"user": {"login": "bacrossland", "name": "Bryan Crossland"}}, "url": "https://github.com/triplea-game/triplea/commit/ebeb222b8a2818767f05a1879889afbe189e6b84", "committedDate": "2020-10-16T04:38:25Z", "message": "Adding more info to the configuration section."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTExMDE3NTAz", "url": "https://github.com/triplea-game/triplea/pull/7906#pullrequestreview-511017503", "createdAt": "2020-10-17T21:51:45Z", "commit": {"oid": "ebeb222b8a2818767f05a1879889afbe189e6b84"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QyMTo1MTo0NVrOHjgFIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xN1QyMTo1NDo1OFrOHjgF9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk4NzgwOA==", "bodyText": "Which DB did you use @bacrossland ? Any thoughts to check in a docker file or a docker-compose for the DB piece too?", "url": "https://github.com/triplea-game/triplea/pull/7906#discussion_r506987808", "createdAt": "2020-10-17T21:51:45Z", "author": {"login": "DanVanAtta"}, "path": "node-bb/README.md", "diffHunk": "@@ -0,0 +1,131 @@\n+# TripleA Forums\n+\n+The software that powers the TripleA Forums is [NodeBB](https://github.com/NodeBB/NodeBB). \n+This document is instructions on how to build and run the Docker container of the forums using an \n+[official Docker container of NodeBB](https://hub.docker.com/r/nodebb/docker) as the base image.\n+\n+### Building\n+\n+1. Make a directory on your machine for where the config file and upload folder will live. ```mkdir -p /opt/triple-forums```\n+1. Make a directory for uploaded files. Inside the upload directory, create folders category, emoji, files, profile, \n+sounds, and system.\n+    ```\n+    mkdir -p /opt/triple-forums/uploads/category\n+    mkdir -p /opt/triple-forums/uploads/emoji\n+    mkdir -p /opt/triple-forums/uploads/files\n+    mkdir -p /opt/triple-forums/uploads/profile\n+    mkdir -p /opt/triple-forums/uploads/sounds\n+    mkdir -p /opt/triple-forums/uploads/system\n+    ```\n+1. Build the Docker image using the command ```docker build -t triplea-forums:latest .```\n+\n+### Running\n+\n+**First time run**\n+\n+You will need a running database. The database can be either Redis, Mongo, or Postgres. Make sure you have one of these", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebeb222b8a2818767f05a1879889afbe189e6b84"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjk4ODAyMQ==", "bodyText": "Can we mount the folder where the 'config.json' would land so that it is then stored on the file system? Is the config.json unique to the host machine that runs it? If we can't do a folder mount, I wonder if we can do a pre-fab config.json that is already ready to go.", "url": "https://github.com/triplea-game/triplea/pull/7906#discussion_r506988021", "createdAt": "2020-10-17T21:54:58Z", "author": {"login": "DanVanAtta"}, "path": "node-bb/README.md", "diffHunk": "@@ -0,0 +1,131 @@\n+# TripleA Forums\n+\n+The software that powers the TripleA Forums is [NodeBB](https://github.com/NodeBB/NodeBB). \n+This document is instructions on how to build and run the Docker container of the forums using an \n+[official Docker container of NodeBB](https://hub.docker.com/r/nodebb/docker) as the base image.\n+\n+### Building\n+\n+1. Make a directory on your machine for where the config file and upload folder will live. ```mkdir -p /opt/triple-forums```\n+1. Make a directory for uploaded files. Inside the upload directory, create folders category, emoji, files, profile, \n+sounds, and system.\n+    ```\n+    mkdir -p /opt/triple-forums/uploads/category\n+    mkdir -p /opt/triple-forums/uploads/emoji\n+    mkdir -p /opt/triple-forums/uploads/files\n+    mkdir -p /opt/triple-forums/uploads/profile\n+    mkdir -p /opt/triple-forums/uploads/sounds\n+    mkdir -p /opt/triple-forums/uploads/system\n+    ```\n+1. Build the Docker image using the command ```docker build -t triplea-forums:latest .```\n+\n+### Running\n+\n+**First time run**\n+\n+You will need a running database. The database can be either Redis, Mongo, or Postgres. Make sure you have one of these\n+installed on your machine or a Docker container running. \n+\n+1. Run the triplea-forums:latest image using the command \n+```docker run -d --rm --name triplea-forums -v /opt/triple-forums/uploads:/usr/src/app/public/uploads -p 8080:4567 triplea-forums:latest```\n+1. Navigate to http://0.0.0.0:8080/. This will be the install and configuration screen for NodeBB.\n+1. Fill out the details on the page.\n+1. Once the configuration is complete, you will need to save the config.json file off the container to the folder you ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebeb222b8a2818767f05a1879889afbe189e6b84"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29a10251afd3e57b1cd361dbb0279ed753bd45ad", "author": {"user": {"login": "bacrossland", "name": "Bryan Crossland"}}, "url": "https://github.com/triplea-game/triplea/commit/29a10251afd3e57b1cd361dbb0279ed753bd45ad", "committedDate": "2020-10-22T06:47:31Z", "message": "Updated README.md and config.json for running Mongo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3ec4e87746b8d905c7e6762349621530e063599", "author": {"user": {"login": "bacrossland", "name": "Bryan Crossland"}}, "url": "https://github.com/triplea-game/triplea/commit/c3ec4e87746b8d905c7e6762349621530e063599", "committedDate": "2020-10-22T07:09:48Z", "message": "Fixed linting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7cb23259c5653beade4d7f39e1d19c24ddebc41b", "author": {"user": {"login": "bacrossland", "name": "Bryan Crossland"}}, "url": "https://github.com/triplea-game/triplea/commit/7cb23259c5653beade4d7f39e1d19c24ddebc41b", "committedDate": "2020-10-22T07:22:59Z", "message": "Fixed more linting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f64605b2d077c41d456980350dd9145880826540", "author": {"user": {"login": "bacrossland", "name": "Bryan Crossland"}}, "url": "https://github.com/triplea-game/triplea/commit/f64605b2d077c41d456980350dd9145880826540", "committedDate": "2020-10-22T07:34:47Z", "message": "Fixed even more linting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "edcc0fbbac2135af82db67ccebe2d0c6282ee9ac", "author": {"user": {"login": "bacrossland", "name": "Bryan Crossland"}}, "url": "https://github.com/triplea-game/triplea/commit/edcc0fbbac2135af82db67ccebe2d0c6282ee9ac", "committedDate": "2020-10-22T07:46:28Z", "message": "Fixed more more linting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "077d7fddada32f21822bfca437dc650d7209324b", "author": {"user": {"login": "bacrossland", "name": "Bryan Crossland"}}, "url": "https://github.com/triplea-game/triplea/commit/077d7fddada32f21822bfca437dc650d7209324b", "committedDate": "2020-10-22T07:54:58Z", "message": "Fixed linting x3"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ba5f8c37235d95c12d0011c4c14899b98cc5404", "author": {"user": {"login": "bacrossland", "name": "Bryan Crossland"}}, "url": "https://github.com/triplea-game/triplea/commit/6ba5f8c37235d95c12d0011c4c14899b98cc5404", "committedDate": "2020-10-22T12:37:33Z", "message": "Fixed linting x4"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff523b7fd6764213b6a55e7f8676ea71daca70e6", "author": {"user": {"login": "bacrossland", "name": "Bryan Crossland"}}, "url": "https://github.com/triplea-game/triplea/commit/ff523b7fd6764213b6a55e7f8676ea71daca70e6", "committedDate": "2020-10-22T12:59:29Z", "message": "Fixed linting x5"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3897, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}