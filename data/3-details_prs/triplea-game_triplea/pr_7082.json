{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2Nzg4NTM2", "number": 7082, "title": "#7034 NPE when setting preferred size and null chat, in ChatPlayerPan\u2026", "bodyText": "\u2026el#setDynamicPreferredSize\n\nFunctional Changes\n\n[] New map or map update\n[] New Feature\n[] Feature update or enhancement\n[] Feature Removal\n[] Code Cleanup or refactor\n[] Configuration Change\n[] Problem fix\n[] Other:   \nTesting\n\nScreens Shots\n\nAdditional Notes to Reviewer\n\nRelease Note", "createdAt": "2020-07-09T11:06:02Z", "url": "https://github.com/triplea-game/triplea/pull/7082", "merged": true, "mergeCommit": {"oid": "22410f8766b9a1850916f64ddc733a264840dc87"}, "closed": true, "closedAt": "2020-07-10T12:51:44Z", "author": {"login": "tjrbrom"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczNACzAH2gAyNDQ2Nzg4NTM2OmU5ZjY0NjgyYjAwMTEwNTViZjUwZmQ5Y2E4ZjFlNjk4MmYxMzE3MDU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABczjIA3gFqTQ0NjM3NDgwNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e9f64682b0011055bf50fd9ca8f1e6982f131705", "author": {"user": {"login": "tjrbrom", "name": "Nikolaos Themelis"}}, "url": "https://github.com/triplea-game/triplea/commit/e9f64682b0011055bf50fd9ca8f1e6982f131705", "committedDate": "2020-07-09T11:05:02Z", "message": "#7034 NPE when setting preferred size and null chat, in ChatPlayerPanel#setDynamicPreferredSize"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2MDE3NDMx", "url": "https://github.com/triplea-game/triplea/pull/7082#pullrequestreview-446017431", "createdAt": "2020-07-09T22:45:30Z", "commit": {"oid": "e9f64682b0011055bf50fd9ca8f1e6982f131705"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQyMjo0NTozMFrOGvkPjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQyMjo0NTozMFrOGvkPjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjUzMDA2Mg==", "bodyText": "I was thinking about this for a while, but I think this isn't the right fix for this.\nThe stacktrace in #7034 makes it clear that this NullPointerException occurs when shutting down a game, so adjusting the preffered size just before the game is closed doesn't really make sense to me.\nThat's why I'd recommend making this method no-op if chat is null i.e.\nif (chat == null) {\n  return;\n}\nAt the start if the method", "url": "https://github.com/triplea-game/triplea/pull/7082#discussion_r452530062", "createdAt": "2020-07-09T22:45:30Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/engine/chat/ChatPlayerPanel.java", "diffHunk": "@@ -85,9 +85,11 @@ public void setChat(final Chat chat) {\n    */\n   private void setDynamicPreferredSize() {\n     int maxNameLength = 0;\n-    final FontMetrics fontMetrics = this.getFontMetrics(UIManager.getFont(\"TextField.font\"));\n-    for (final UserName onlinePlayer : chat.getOnlinePlayers()) {\n-      maxNameLength = Math.max(maxNameLength, fontMetrics.stringWidth(onlinePlayer.getValue()));\n+    if (chat != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9f64682b0011055bf50fd9ca8f1e6982f131705"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bdf33a5ad18a6454a0ed55e617cbc44a0b76c08", "author": {"user": {"login": "tjrbrom", "name": "Nikolaos Themelis"}}, "url": "https://github.com/triplea-game/triplea/commit/5bdf33a5ad18a6454a0ed55e617cbc44a0b76c08", "committedDate": "2020-07-10T06:27:18Z", "message": "#7034 if chat is null, exit without setting/calculating new dynamic preferred size"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce4b8aa521f363a72b7bf9654ba45fca3f312960", "author": {"user": {"login": "tjrbrom", "name": "Nikolaos Themelis"}}, "url": "https://github.com/triplea-game/triplea/commit/ce4b8aa521f363a72b7bf9654ba45fca3f312960", "committedDate": "2020-07-10T06:55:38Z", "message": "replace verifyNoInteractions with never"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2Mzc0ODA1", "url": "https://github.com/triplea-game/triplea/pull/7082#pullrequestreview-446374805", "createdAt": "2020-07-10T12:51:39Z", "commit": {"oid": "ce4b8aa521f363a72b7bf9654ba45fca3f312960"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3207, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}