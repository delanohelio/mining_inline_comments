{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgwMDI3ODEz", "number": 5981, "title": "Update PBEM validation to allow games without setting an email server.", "bodyText": "Enables the 'play' button on PBEM game even if email server is not\nset. This allows for games with 'verified dice' using a dice server\nand manual attachment of save games sent via email manually.\nPreviously it was required to also set email server settings which\nallowed for automatic emails to be sent.\n \nFunctional Changes\n\n[] New map or map update\n[] New Feature\n[x] Feature update or enhancement\n[] Feature Removal\n[] Code Cleanup or refactor\n[] Configuration Change\n[] Problem fix:  \n[] Other:   \nTesting\n\n[] Manual testing done\n\n\n\n\nAdditional Review Notes\n\nWorking towards resolving: #5856\nNext step (PR) will be to add email setting preferences to the PBEM screen", "createdAt": "2020-02-26T06:11:21Z", "url": "https://github.com/triplea-game/triplea/pull/5981", "merged": true, "mergeCommit": {"oid": "14b3d3676fa6d49df648a8c1db8b1567f4ff2b1d"}, "closed": true, "closedAt": "2020-02-26T22:52:23Z", "author": {"login": "DanVanAtta"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcIAQCyAH2gAyMzgwMDI3ODEzOjM3ZjA4MmFkY2YyYTY2MDU4MzNkNDEzMjBiOTkwMTExY2E1ZDI5MTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIOzNggFqTM2NTMwMzU2OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "37f082adcf2a6605833d41320b990111ca5d2916", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/37f082adcf2a6605833d41320b990111ca5d2916", "committedDate": "2020-02-26T05:55:00Z", "message": "Update PBEM validation to allow games without setting an email server.\n\nEnables the 'play' button on PBEM game even if email server is not\nset. This allows for games with 'verified dice' using a dice server\nand manual attachment of save games sent via email manually.\n\nPreviously it was required to also set email server settings which\nallowed for automatic emails to be sent."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0NjQzMjg0", "url": "https://github.com/triplea-game/triplea/pull/5981#pullrequestreview-364643284", "createdAt": "2020-02-26T06:12:55Z", "commit": {"oid": "37f082adcf2a6605833d41320b990111ca5d2916"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwNjoxMjo1NlrOFufTgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwNjoxMjo1NlrOFufTgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI5MTcxMw==", "bodyText": "Similar blocks of code found in 2 locations. Consider refactoring.", "url": "https://github.com/triplea-game/triplea/pull/5981#discussion_r384291713", "createdAt": "2020-02-26T06:12:56Z", "author": {"login": "codeclimate"}, "path": "game-core/src/main/java/games/strategy/engine/framework/startup/ui/posted/game/pbem/EmailSenderEditor.java", "diffHunk": "@@ -186,27 +189,12 @@ private void testEmail() {\n         .start();\n   }\n \n-  /** Checks if fields are set, if so enables them and returns true, false otherwise. */\n-  public boolean areFieldsValid() {\n-    final boolean setupValid =\n-        ClientSetting.emailServerHost.isSet()\n-            && ClientSetting.emailServerPort.isSet()\n-            && ClientSetting.emailServerSecurity.isSet()\n-            && ClientSetting.emailUsername.isSet();\n-\n-    final String toAddressText = toAddress.getText();\n-    final boolean addressValid =\n-        !toAddressText.isEmpty() && PlayerEmailValidation.isValid(toAddressText);\n-    SwingComponents.highlightLabelIfNotValid(addressValid, toLabel);\n-    final boolean allValid = setupValid && addressValid;\n-    testEmail.setEnabled(allValid);\n-    return allValid;\n-  }\n-\n   public void applyToGameProperties(final GameProperties properties) {\n-    properties.set(IEmailSender.SUBJECT, subject.getText());\n-    properties.set(IEmailSender.RECIPIENTS, toAddress.getText());\n-    properties.set(IEmailSender.POST_AFTER_COMBAT, alsoPostAfterCombatMove.isSelected());\n+    if (!toAddress.getText().isBlank() && PlayerEmailValidation.isValid(toAddress.getText())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "37f082adcf2a6605833d41320b990111ca5d2916"}, "originalPosition": 46}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1MzAzNTY5", "url": "https://github.com/triplea-game/triplea/pull/5981#pullrequestreview-365303569", "createdAt": "2020-02-26T22:52:05Z", "commit": {"oid": "37f082adcf2a6605833d41320b990111ca5d2916"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3700, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}