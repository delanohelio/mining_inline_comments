{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwMTc0NDY4", "number": 6851, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNDo0Njo0N1rOEJAFqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNDo0Njo0N1rOEJAFqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc3ODc0MDkwOnYy", "diffSide": "RIGHT", "path": "game-core/src/main/java/games/strategy/triplea/ai/pro/simulate/ProSimulateTurnUtils.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNDo0Njo0N1rOGpTjHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNDo0Njo0N1rOGpTjHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk2NTA4Ng==", "bodyText": "not necessary, but any thoughts to using Optional to avoid the intermediate variable?\ntransferUnit(u, unitTerritoryMap, usedUnits, toData, player).ifPresent(\nunit -> {\n:\n:\n});\nOptional return values generally work out very nicely and avoid needing to notice there is a nullable annotation and forces you (type safety) to deal with the null.", "url": "https://github.com/triplea-game/triplea/pull/6851#discussion_r445965086", "createdAt": "2020-06-26T04:46:47Z", "author": {"login": "DanVanAtta"}, "path": "game-core/src/main/java/games/strategy/triplea/ai/pro/simulate/ProSimulateTurnUtils.java", "diffHunk": "@@ -181,28 +189,34 @@ public static void simulateBattles(\n       for (final Unit u : moveMap.get(fromTerritory).getUnits()) {\n         if (!amphibUnits.contains(u)) {\n           final Unit toUnit = transferUnit(u, unitTerritoryMap, usedUnits, toData, player);\n-          patd.addUnit(toUnit);\n-          ProLogger.trace(\"---Transferring unit \" + u + \" to \" + toUnit);\n+          if (toUnit != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38bca0238ac68737e487b53b2b0b7bada9b5f9bf"}, "originalPosition": 28}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2059, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}