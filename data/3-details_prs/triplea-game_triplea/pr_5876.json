{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2NzI1ODQz", "number": 5876, "title": "Remove 'show map only'", "bodyText": "Removal reasons:\n\nFeature is very buggy and will be difficult to fix.\nFeature had a poor UX, was not clear when it was enabled and even could be used.\nFeature is largely a copy/paste of show-history, not clear it was a good idea to add\nbeyond it was 'easy' to add.\nFeature is arguably unnecessary, can be replicated by minimizing the left and right\nside-bars\n\nResolves bug #5860\n \nFunctional Changes\n\n[] New map or map update\n[] New Feature\n[] Feature update or enhancement\n[x] Feature Removal\n[] Code Cleanup or refactor\n[] Configuration Change\n[] Problem fix:  \n[] Other:   \nTesting\n\n[x] Manual testing done\n\nobserved an AI vs AI game and watched for errors.\n\n\n\n\n\nAdditional Review Notes\nSome significant whitespace changes, use this link to review with whitespace change ignored: https://github.com/triplea-game/triplea/pull/5876/files?utf8=%E2%9C%93&diff=unified&w=1", "createdAt": "2020-01-24T08:20:22Z", "url": "https://github.com/triplea-game/triplea/pull/5876", "merged": true, "mergeCommit": {"oid": "dbf638c3a49a8af9ccc57c3706eda93e3441ddc9"}, "closed": true, "closedAt": "2020-01-25T02:27:21Z", "author": {"login": "DanVanAtta"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb9agmdgH2gAyMzY2NzI1ODQzOjMzMTA0NTExMWI1MjJlYmY4ZWQwOGI4NTg4Yzk2ZTAyODJlYTZlNTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb9myNwgFqTM0ODI2MTY3MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "331045111b522ebf8ed08b8588c96e0282ea6e59", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/331045111b522ebf8ed08b8588c96e0282ea6e59", "committedDate": "2020-01-24T08:17:27Z", "message": "Remove 'show map only'\n\nRemoval reasons:\n- Feature is very buggy and will be difficult to fix.\n- Feature had a poor UX, was not clear when it was enabled and even could be used.\n- Feature is largely a copy/paste of show-history, not clear it was a good idea to add\n  beyond it was 'easy' to add.\n- Feature is arguably unnecessary, can be replicated by minimizing the left and right\n  side-bars\n\nResolves bug #5860"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "acc12f2f631898306daa06d39d3271a2d3bca4e0", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/acc12f2f631898306daa06d39d3271a2d3bca4e0", "committedDate": "2020-01-24T08:26:17Z", "message": "Elevate scope modifiers to fix test references"}, "afterCommit": {"oid": "331045111b522ebf8ed08b8588c96e0282ea6e59", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/331045111b522ebf8ed08b8588c96e0282ea6e59", "committedDate": "2020-01-24T08:17:27Z", "message": "Remove 'show map only'\n\nRemoval reasons:\n- Feature is very buggy and will be difficult to fix.\n- Feature had a poor UX, was not clear when it was enabled and even could be used.\n- Feature is largely a copy/paste of show-history, not clear it was a good idea to add\n  beyond it was 'easy' to add.\n- Feature is arguably unnecessary, can be replicated by minimizing the left and right\n  side-bars\n\nResolves bug #5860"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99e44c5ba91593d75173773ef901edb08e81e9ca", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/99e44c5ba91593d75173773ef901edb08e81e9ca", "committedDate": "2020-01-24T08:36:13Z", "message": "Remove unnecessary parens"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MjYxNjcx", "url": "https://github.com/triplea-game/triplea/pull/5876#pullrequestreview-348261671", "createdAt": "2020-01-24T22:31:18Z", "commit": {"oid": "99e44c5ba91593d75173773ef901edb08e81e9ca"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMjozMToxOFrOFhsLgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMjozNToxMVrOFhsPxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg3MTE2OQ==", "bodyText": "Just a random thought:\nIf the instanceof check came before the equality check that would be a sneaky built-in null check as well", "url": "https://github.com/triplea-game/triplea/pull/5876#discussion_r370871169", "createdAt": "2020-01-24T22:31:18Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/BattlePanel.java", "diffHunk": "@@ -240,57 +240,50 @@ public void showBattle(\n             cleanUpBattleWindow();\n             currentBattleDisplayed = null;\n           }\n-          if (!getMap().getUiContext().getShowMapOnly()) {\n-            battleDisplay =\n-                new BattleDisplay(\n-                    getData(),\n-                    location,\n-                    attacker,\n-                    defender,\n-                    attackingUnits,\n-                    defendingUnits,\n-                    killedUnits,\n-                    attackingWaitingToDie,\n-                    defendingWaitingToDie,\n-                    BattlePanel.this.getMap(),\n-                    isAmphibious,\n-                    battleType,\n-                    amphibiousLandAttackers);\n-            battleFrame.setTitle(\n-                attacker.getName()\n-                    + \" attacks \"\n-                    + defender.getName()\n-                    + \" in \"\n-                    + location.getName());\n-            battleFrame.getContentPane().removeAll();\n-            battleFrame.getContentPane().add(battleDisplay);\n-            battleFrame.setMinimumSize(new Dimension(800, 600));\n-            battleFrame.setLocationRelativeTo(JOptionPane.getFrameForComponent(BattlePanel.this));\n-            PbemDiceRoller.setFocusWindow(battleFrame);\n-            boolean foundHumanInBattle = false;\n-            for (final Player gamePlayer :\n-                getMap().getUiContext().getLocalPlayers().getLocalPlayers()) {\n-              if ((gamePlayer.getGamePlayer().equals(attacker)\n-                      && gamePlayer instanceof TripleAPlayer)\n-                  || (gamePlayer.getGamePlayer().equals(defender)\n-                      && gamePlayer instanceof TripleAPlayer)) {\n-                foundHumanInBattle = true;\n-                break;\n-              }\n-            }\n-            if (ClientSetting.showBattlesWhenObserving.getValueOrThrow() || foundHumanInBattle) {\n-              battleFrame.setAlwaysOnTop(true);\n-              battleFrame.setVisible(true);\n-              battleFrame.validate();\n-              battleFrame.invalidate();\n-              battleFrame.repaint();\n-            } else {\n-              battleFrame.setVisible(false);\n+          battleDisplay =\n+              new BattleDisplay(\n+                  getData(),\n+                  location,\n+                  attacker,\n+                  defender,\n+                  attackingUnits,\n+                  defendingUnits,\n+                  killedUnits,\n+                  attackingWaitingToDie,\n+                  defendingWaitingToDie,\n+                  BattlePanel.this.getMap(),\n+                  isAmphibious,\n+                  battleType,\n+                  amphibiousLandAttackers);\n+          battleFrame.setTitle(\n+              attacker.getName() + \" attacks \" + defender.getName() + \" in \" + location.getName());\n+          battleFrame.getContentPane().removeAll();\n+          battleFrame.getContentPane().add(battleDisplay);\n+          battleFrame.setMinimumSize(new Dimension(800, 600));\n+          battleFrame.setLocationRelativeTo(JOptionPane.getFrameForComponent(BattlePanel.this));\n+          PbemDiceRoller.setFocusWindow(battleFrame);\n+          boolean foundHumanInBattle = false;\n+          for (final Player gamePlayer :\n+              getMap().getUiContext().getLocalPlayers().getLocalPlayers()) {\n+            if ((gamePlayer.getGamePlayer().equals(attacker) && gamePlayer instanceof TripleAPlayer)\n+                || (gamePlayer.getGamePlayer().equals(defender)\n+                    && gamePlayer instanceof TripleAPlayer)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99e44c5ba91593d75173773ef901edb08e81e9ca"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg3MjI2MQ==", "bodyText": "This code seems oddly familiar ^^\nI think I created a PR for this, but I don't remember what it was about \ud83d\ude05", "url": "https://github.com/triplea-game/triplea/pull/5876#discussion_r370872261", "createdAt": "2020-01-24T22:35:11Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/TripleAFrame.java", "diffHunk": "@@ -2352,58 +2321,13 @@ private void showGame() {\n     mapPanel.setRoute(null);\n   }\n \n-  private void showMapOnly() {\n-    // Are we coming from showHistory mode or showGame mode?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99e44c5ba91593d75173773ef901edb08e81e9ca"}, "originalPosition": 81}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3769, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}