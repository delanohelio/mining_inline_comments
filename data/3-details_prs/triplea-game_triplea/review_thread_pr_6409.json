{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzODMwNzQ2", "number": 6409, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QyMjoyMDoxN1rOD6cPLA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QyMjoyMDoxN1rOD6cPLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyNjA2NjM2OnYy", "diffSide": "RIGHT", "path": "http-server/src/main/java/org/triplea/db/dao/moderator/chat/history/GameChatHistoryDao.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QyMjoyMDoxN1rOGSSUpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QyMjoyMDoxN1rOGSSUpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgyNzc1MA==", "bodyText": "Are old chat messages ever deleted?\nIf not I'm concerned that we'll run out of disk space very quickly \ud83e\udd14", "url": "https://github.com/triplea-game/triplea/pull/6409#discussion_r421827750", "createdAt": "2020-05-07T22:20:17Z", "author": {"login": "RoiEXLab"}, "path": "http-server/src/main/java/org/triplea/db/dao/moderator/chat/history/GameChatHistoryDao.java", "diffHunk": "@@ -0,0 +1,24 @@\n+package org.triplea.db.dao.moderator.chat.history;\n+\n+import java.util.List;\n+import org.jdbi.v3.sqlobject.customizer.Bind;\n+import org.jdbi.v3.sqlobject.statement.SqlQuery;\n+\n+/**\n+ * DAO to access history of in-game chat messages stored in database. Chat messages are stored for\n+ * all lobby-connected games.\n+ */\n+public interface GameChatHistoryDao {\n+\n+  @SqlQuery(\n+      \"select \"\n+          + \"    gch.date,\"\n+          + \"    gch.username,\"\n+          + \"    gch.message\"\n+          + \"  from game_chat_history gch\"\n+          + \"  join lobby_game lg on lg.id = gch.lobby_game_id\"\n+          + \"  where\"\n+          + \"    lg.game_id = :gameId\"\n+          + \"    and date > (now() - '6 hour'::interval)\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9142b1e82b109f288cd518347b62796f10c66236"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2161, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}