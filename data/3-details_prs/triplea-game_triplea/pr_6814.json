{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM5MjUzNTAz", "number": 6814, "title": "Find a location to use for BattleCalculatorPanel even if one isn't selected", "bodyText": "Fixes #6769\nThere was already code that would find a potential battle site.  This moves that code into a helper function and uses it during the setWidgetActivation call.\nFunctional Changes\n\n[] New map or map update\n[] New Feature\n[] Feature update or enhancement\n[] Feature Removal\n[] Code Cleanup or refactor\n[] Configuration Change\n[x] Problem fix\n[] Other:   \nTesting\nI was able to duplicate the issue in the battle calculator.\nScreens Shots\n\nAdditional Notes to Reviewer\n\nRelease Note\n\nFix|Game crash when calculating a sea battle with units that can bombard", "createdAt": "2020-06-24T14:41:12Z", "url": "https://github.com/triplea-game/triplea/pull/6814", "merged": true, "mergeCommit": {"oid": "8c88481108a0218010e9e131775e02e96f6ceffd"}, "closed": true, "closedAt": "2020-06-25T08:34:19Z", "author": {"login": "trevan"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcubCzlAH2gAyNDM5MjUzNTAzOjQ4NzY5ODljMmY4YzlkMWQ3ODdjYzMwMGRhMzZjM2I1MDk4M2RhYTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcugrmZgH2gAyNDM5MjUzNTAzOmI2ZmJkMTRlOGFlMzllZDI4YWZiODMwYjQyOGY2ZmI1NWYzNzcwZTU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4876989c2f8c9d1d787cc300da36c3b50983daa7", "author": {"user": {"login": "trevan", "name": null}}, "url": "https://github.com/triplea-game/triplea/commit/4876989c2f8c9d1d787cc300da36c3b50983daa7", "committedDate": "2020-06-24T14:37:06Z", "message": "Find a location to use for BattleCalculatorPanel even if one isn't selected"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2OTU3ODEy", "url": "https://github.com/triplea-game/triplea/pull/6814#pullrequestreview-436957812", "createdAt": "2020-06-24T19:51:26Z", "commit": {"oid": "4876989c2f8c9d1d787cc300da36c3b50983daa7"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxOTo1MToyN1rOGogyfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxOTo1MjoyNVrOGog0gQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTEzMzQzOA==", "bodyText": "Should we remove this comment now that we have a method?", "url": "https://github.com/triplea-game/triplea/pull/6814#discussion_r445133438", "createdAt": "2020-06-24T19:51:27Z", "author": {"login": "DanVanAtta"}, "path": "game-core/src/main/java/games/strategy/triplea/odds/calculator/BattleCalculatorPanel.java", "diffHunk": "@@ -1194,17 +1194,7 @@ private void updateStats() {\n             () -> {\n               try {\n                 // find a territory to fight in", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4876989c2f8c9d1d787cc300da36c3b50983daa7"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTEzMzk1Mw==", "bodyText": "Any chance location will already be computed? Is the instance location attached to the class still used at all, or would it be better to get rid of that state and do more on-demand computing?", "url": "https://github.com/triplea-game/triplea/pull/6814#discussion_r445133953", "createdAt": "2020-06-24T19:52:25Z", "author": {"login": "DanVanAtta"}, "path": "game-core/src/main/java/games/strategy/triplea/odds/calculator/BattleCalculatorPanel.java", "diffHunk": "@@ -1413,6 +1418,7 @@ private void setWidgetActivation() {\n       final Collection<TerritoryEffect> territoryEffects = getTerritoryEffects();\n       final IntegerMap<UnitType> costs = TuvUtils.getCostsForTuv(getAttacker(), data);\n       attackers.sort(new UnitBattleComparator(false, costs, territoryEffects, data).reversed());\n+      final Territory location = findPotentialBattleSite();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4876989c2f8c9d1d787cc300da36c3b50983daa7"}, "originalPosition": 45}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6fbd14e8ae39ed28afb830b428f6fb55f3770e5", "author": {"user": {"login": "trevan", "name": null}}, "url": "https://github.com/triplea-game/triplea/commit/b6fbd14e8ae39ed28afb830b428f6fb55f3770e5", "committedDate": "2020-06-24T21:11:11Z", "message": "Remove unneeded comment"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3277, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}