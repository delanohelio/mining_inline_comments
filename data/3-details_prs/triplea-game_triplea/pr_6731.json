{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM3NjA2NDYw", "number": 6731, "title": "Configure test coverage uploads to code climate", "bodyText": "Functional Changes\n\n[] New map or map update\n[] New Feature\n[x] Feature update or enhancement\n[] Feature Removal\n[] Code Cleanup or refactor\n[x] Configuration Change\n[] Problem fix:  \n[] Other:   \nTesting", "createdAt": "2020-06-21T21:59:04Z", "url": "https://github.com/triplea-game/triplea/pull/6731", "merged": true, "mergeCommit": {"oid": "b948678cc627f9adc33bedebdcd35d265d40a8f9"}, "closed": true, "closedAt": "2020-06-22T20:57:19Z", "author": {"login": "DanVanAtta"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABctjjtEgH2gAyNDM3NjA2NDYwOmRhNDMwMzk0MTIyOWNhZDY3YWIwNDU2MGY4ZWZkYmNlMWYxOTE2M2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABct22jWAH2gAyNDM3NjA2NDYwOmQ0YmZlMjkwZmRmYzJlODk1Nzc1NTc1ZGY5MWEzM2VmMDQxNDA2MmE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "da4303941229cad67ab04560f8efdbce1f19163d", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/da4303941229cad67ab04560f8efdbce1f19163d", "committedDate": "2020-06-21T21:58:21Z", "message": "Configure test coverage uploads to code climate"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f213b1adfea832ed1f550be58ce14e2b054bb0f", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/2f213b1adfea832ed1f550be58ce14e2b054bb0f", "committedDate": "2020-06-21T22:14:46Z", "message": "Capture test result exit code manually\n\nTRAVIS_TEST_RESULT env variable did not exist"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c04ae6de8b0740883fc1be0b3a261c757951f5eb", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/c04ae6de8b0740883fc1be0b3a261c757951f5eb", "committedDate": "2020-06-21T22:13:56Z", "message": "Capture test result exit code manually\n\nTRAVIS_TEST_RESULT env variable did not exist"}, "afterCommit": {"oid": "2f213b1adfea832ed1f550be58ce14e2b054bb0f", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/2f213b1adfea832ed1f550be58ce14e2b054bb0f", "committedDate": "2020-06-21T22:14:46Z", "message": "Capture test result exit code manually\n\nTRAVIS_TEST_RESULT env variable did not exist"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "49aede681727c160680301a8d35ee0917480c301", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/49aede681727c160680301a8d35ee0917480c301", "committedDate": "2020-06-21T22:21:35Z", "message": "Remove explicit exit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5e28344d3ed6f1534a0a21889dcb34d09fe40127", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/5e28344d3ed6f1534a0a21889dcb34d09fe40127", "committedDate": "2020-06-21T22:21:37Z", "message": "Inject explit test failure to demo test failure"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94864aae15abfa591ec26f874519f0363ff25631", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/94864aae15abfa591ec26f874519f0363ff25631", "committedDate": "2020-06-21T22:23:20Z", "message": "Fix result flag to actually be '$?'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5936dde03763ab98cb4239f8e2eec66807b56e6e", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/5936dde03763ab98cb4239f8e2eec66807b56e6e", "committedDate": "2020-06-21T22:37:10Z", "message": "Skip codecov upload if tests fail"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b455c58bdc09dd2bf70cec847b61e0c9f5668aaa", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/b455c58bdc09dd2bf70cec847b61e0c9f5668aaa", "committedDate": "2020-06-21T22:58:03Z", "message": "Remove demo test failure"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16432693474fd700b0f7caabf92b4d48a71db277", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/16432693474fd700b0f7caabf92b4d48a71db277", "committedDate": "2020-06-21T23:08:36Z", "message": "Specify jacoco report type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fed472def95f14c1766898efcd8ce2b98a739207", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/fed472def95f14c1766898efcd8ce2b98a739207", "committedDate": "2020-06-22T00:05:22Z", "message": "Updata jacoco to output XML files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06813754cfcc95fea1bea85b7691a0a1b078a709", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/06813754cfcc95fea1bea85b7691a0a1b078a709", "committedDate": "2020-06-22T00:05:33Z", "message": "Script up summing of code-climate report files\n\nThe cc-report script only works when run from the root of the source directory.\nApparently the --prefix flag that is meant to do this does not work.\nTo generate a report we CD to each source directory of each subproject\nthat generates an XML file, run the coverage formatter, and then\nas a last step we sum up each coverage file and upload."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NTQ1NTE5", "url": "https://github.com/triplea-game/triplea/pull/6731#pullrequestreview-434545519", "createdAt": "2020-06-22T00:08:16Z", "commit": {"oid": "06813754cfcc95fea1bea85b7691a0a1b078a709"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwMDowODoxNlrOGmvFqg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwMDowODoxN1rOGmvFrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI3MDU3MA==", "bodyText": "Use -print0/-0 or -exec + to allow for non-alphanumeric filenames.", "url": "https://github.com/triplea-game/triplea/pull/6731#discussion_r443270570", "createdAt": "2020-06-22T00:08:16Z", "author": {"login": "codeclimate"}, "path": ".travis/stages/verify/unit-testing/run", "diffHunk": "@@ -1,10 +1,35 @@\n #!/bin/bash\n \n-set -eEux\n+set -ux\n+\n+export CC_TEST_REPORTER_ID=\"$CODE_CLIMATE_TEST_COVERAGE_ID\"\n+\n+curl -L \\\n+  https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 \\\n+  > ./cc-test-reporter\n+\n+chmod +x ./cc-test-reporter\n+\n+./cc-test-reporter before-build\n \n-# Run Tests\n ./gradlew -x :smoke-testing:test -parallel test jacocoTestReport\n \n+result=\"$?\"\n+\n+if [ \"$result\" != 0 ]; then\n+  exit \"$result\"\n+fi\n+\n+for i in $(find -name \"jacoco.xml\" | xargs dirname | xargs dirname);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06813754cfcc95fea1bea85b7691a0a1b078a709"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI3MDU3Mg==", "bodyText": "Some finds don't have a default path. Specify '.' explicitly.", "url": "https://github.com/triplea-game/triplea/pull/6731#discussion_r443270572", "createdAt": "2020-06-22T00:08:17Z", "author": {"login": "codeclimate"}, "path": ".travis/stages/verify/unit-testing/run", "diffHunk": "@@ -1,10 +1,35 @@\n #!/bin/bash\n \n-set -eEux\n+set -ux\n+\n+export CC_TEST_REPORTER_ID=\"$CODE_CLIMATE_TEST_COVERAGE_ID\"\n+\n+curl -L \\\n+  https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 \\\n+  > ./cc-test-reporter\n+\n+chmod +x ./cc-test-reporter\n+\n+./cc-test-reporter before-build\n \n-# Run Tests\n ./gradlew -x :smoke-testing:test -parallel test jacocoTestReport\n \n+result=\"$?\"\n+\n+if [ \"$result\" != 0 ]; then\n+  exit \"$result\"\n+fi\n+\n+for i in $(find -name \"jacoco.xml\" | xargs dirname | xargs dirname);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06813754cfcc95fea1bea85b7691a0a1b078a709"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI3MDU3Mw==", "bodyText": "Use 'cd ... || exit' or 'cd ... || return' in case cd fails.", "url": "https://github.com/triplea-game/triplea/pull/6731#discussion_r443270573", "createdAt": "2020-06-22T00:08:17Z", "author": {"login": "codeclimate"}, "path": ".travis/stages/verify/unit-testing/run", "diffHunk": "@@ -1,10 +1,35 @@\n #!/bin/bash\n \n-set -eEux\n+set -ux\n+\n+export CC_TEST_REPORTER_ID=\"$CODE_CLIMATE_TEST_COVERAGE_ID\"\n+\n+curl -L \\\n+  https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 \\\n+  > ./cc-test-reporter\n+\n+chmod +x ./cc-test-reporter\n+\n+./cc-test-reporter before-build\n \n-# Run Tests\n ./gradlew -x :smoke-testing:test -parallel test jacocoTestReport\n \n+result=\"$?\"\n+\n+if [ \"$result\" != 0 ]; then\n+  exit \"$result\"\n+fi\n+\n+for i in $(find -name \"jacoco.xml\" | xargs dirname | xargs dirname);\n+do\n+(\n+  cd $i", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06813754cfcc95fea1bea85b7691a0a1b078a709"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI3MDU3NA==", "bodyText": "Double quote to prevent globbing and word splitting.", "url": "https://github.com/triplea-game/triplea/pull/6731#discussion_r443270574", "createdAt": "2020-06-22T00:08:17Z", "author": {"login": "codeclimate"}, "path": ".travis/stages/verify/unit-testing/run", "diffHunk": "@@ -1,10 +1,35 @@\n #!/bin/bash\n \n-set -eEux\n+set -ux\n+\n+export CC_TEST_REPORTER_ID=\"$CODE_CLIMATE_TEST_COVERAGE_ID\"\n+\n+curl -L \\\n+  https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 \\\n+  > ./cc-test-reporter\n+\n+chmod +x ./cc-test-reporter\n+\n+./cc-test-reporter before-build\n \n-# Run Tests\n ./gradlew -x :smoke-testing:test -parallel test jacocoTestReport\n \n+result=\"$?\"\n+\n+if [ \"$result\" != 0 ]; then\n+  exit \"$result\"\n+fi\n+\n+for i in $(find -name \"jacoco.xml\" | xargs dirname | xargs dirname);\n+do\n+(\n+  cd $i", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06813754cfcc95fea1bea85b7691a0a1b078a709"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI3MDU3NQ==", "bodyText": "Quote this to prevent word splitting.", "url": "https://github.com/triplea-game/triplea/pull/6731#discussion_r443270575", "createdAt": "2020-06-22T00:08:17Z", "author": {"login": "codeclimate"}, "path": ".travis/stages/verify/unit-testing/run", "diffHunk": "@@ -1,10 +1,35 @@\n #!/bin/bash\n \n-set -eEux\n+set -ux\n+\n+export CC_TEST_REPORTER_ID=\"$CODE_CLIMATE_TEST_COVERAGE_ID\"\n+\n+curl -L \\\n+  https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 \\\n+  > ./cc-test-reporter\n+\n+chmod +x ./cc-test-reporter\n+\n+./cc-test-reporter before-build\n \n-# Run Tests\n ./gradlew -x :smoke-testing:test -parallel test jacocoTestReport\n \n+result=\"$?\"\n+\n+if [ \"$result\" != 0 ]; then\n+  exit \"$result\"\n+fi\n+\n+for i in $(find -name \"jacoco.xml\" | xargs dirname | xargs dirname);\n+do\n+(\n+  cd $i\n+  ../../../../cc-test-reporter format-coverage -t jacoco ../../../build/jacoco.xml\n+)\n+done\n+./cc-test-reporter sum-coverage $(find . -name \"codeclimate.json\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06813754cfcc95fea1bea85b7691a0a1b078a709"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69551377d6e4a2881af02e35c816ada71c476149", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/69551377d6e4a2881af02e35c816ada71c476149", "committedDate": "2020-06-22T00:17:29Z", "message": "Fix shellchecks"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NTQ2ODc2", "url": "https://github.com/triplea-game/triplea/pull/6731#pullrequestreview-434546876", "createdAt": "2020-06-22T00:20:55Z", "commit": {"oid": "69551377d6e4a2881af02e35c816ada71c476149"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwMDoyMDo1NVrOGmvKYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwMDoyMDo1NVrOGmvKYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzI3MTc3Nw==", "bodyText": "Use -print0/-0 or -exec + to allow for non-alphanumeric filenames.", "url": "https://github.com/triplea-game/triplea/pull/6731#discussion_r443271777", "createdAt": "2020-06-22T00:20:55Z", "author": {"login": "codeclimate"}, "path": ".travis/stages/verify/unit-testing/run", "diffHunk": "@@ -1,10 +1,35 @@\n #!/bin/bash\n \n-set -eEux\n+set -ux\n+\n+export CC_TEST_REPORTER_ID=\"$CODE_CLIMATE_TEST_COVERAGE_ID\"\n+\n+curl -L \\\n+  https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 \\\n+  > ./cc-test-reporter\n+\n+chmod +x ./cc-test-reporter\n+\n+./cc-test-reporter before-build\n \n-# Run Tests\n ./gradlew -x :smoke-testing:test -parallel test jacocoTestReport\n \n+result=\"$?\"\n+\n+if [ \"$result\" != 0 ]; then\n+  exit \"$result\"\n+fi\n+\n+for i in $(find . -name \"jacoco.xml\" -exec dirname {} + | xargs dirname)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "69551377d6e4a2881af02e35c816ada71c476149"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6feb2a6849611e6774ddfdfe92f332c5c8bc71b9", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/6feb2a6849611e6774ddfdfe92f332c5c8bc71b9", "committedDate": "2020-06-22T00:44:33Z", "message": "Fix shellchecks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb9aded0bfa8d5a636f1843dbbd5f4329c027769", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/cb9aded0bfa8d5a636f1843dbbd5f4329c027769", "committedDate": "2020-06-22T01:12:21Z", "message": "Fix \"cd\""}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cfd1581de1ddd83002ea9935c039c0ced66f1a2d", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/cfd1581de1ddd83002ea9935c039c0ced66f1a2d", "committedDate": "2020-06-22T01:44:00Z", "message": "Fix empty path from find"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd1644c799d30b2e8e908a5301f88c58dfe4b2c4", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/dd1644c799d30b2e8e908a5301f88c58dfe4b2c4", "committedDate": "2020-06-22T02:17:01Z", "message": "Fix cd path"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c291aec1a45069cbdf5c62f9015dc32b4e09527", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/1c291aec1a45069cbdf5c62f9015dc32b4e09527", "committedDate": "2020-06-22T02:51:14Z", "message": "More fixes to coverage script"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3dc230451e9a9d3e354a0ba53b23181930b06ff8", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/3dc230451e9a9d3e354a0ba53b23181930b06ff8", "committedDate": "2020-06-22T03:16:45Z", "message": "Group commands into functions and add commentary"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc6ae2e4e92525855f25e759ba6b1ddb350718f4", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/fc6ae2e4e92525855f25e759ba6b1ddb350718f4", "committedDate": "2020-06-22T20:20:29Z", "message": "Organize unit test stage into functions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4bfe290fdfc2e895775575df91a33ef0414062a", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/d4bfe290fdfc2e895775575df91a33ef0414062a", "committedDate": "2020-06-22T20:27:08Z", "message": "Re-comment in codeclimate token"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3271, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}