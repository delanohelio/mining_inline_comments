{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU2NTUyMDIy", "number": 7241, "title": "Break up Help Menu & Replace About Menu Item with link to license", "bodyText": "Two notable changes:\n\nRestructure, moves HelpMenu to its own package and splits the class apart to have roughly one class per menu item.\nRemoves the 'about' menu and replaces it with a link to the game license.\n\nRe (2), from the commit messages:\nDrop AboutMenu\n\n- Engine and map information are displayed in other locations,\n  this makes most of the information in About Menu redundant\n- The about menu duplicates the license text, that is already\n  found in other locations. We can link to it instead\n- The 'license' link in the about menu is not useful, it can\n  neither be clicked nor copy-pasted\n- The menu has an incorrect title, should be \"about TripleA\"\n  rather than \"about <Game>\".\n- It is a point of maintenance, the accreditation is out of\n  date.\n\nBeyond the above, it the about menu does not contain very\nmuch information. The website link is perhaps the only\nthing beyond this..\n\nFor context, this is what an about menu looked like:\n\n\nFunctional Changes\n\n[] New map or map update\n[] New Feature\n[] Feature update or enhancement\n[x] Feature Removal\n[x] Code Cleanup or refactor\n[] Configuration Change\n[] Problem fix\n[] Other:   \nTesting\n\nScreens Shots\n\nAdditional Notes to Reviewer\n\nRelease Note\n\nUPDATE|About menu is replaced with a link to the game license.", "createdAt": "2020-07-25T02:15:52Z", "url": "https://github.com/triplea-game/triplea/pull/7241", "merged": true, "mergeCommit": {"oid": "f12f79dc8f997dba2c811a6c4bfc98da31aae800"}, "closed": true, "closedAt": "2020-07-25T11:57:27Z", "author": {"login": "DanVanAtta"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc4Ns0vAH2gAyNDU2NTUyMDIyOjM2ZWZjODU4ZWQ2M2FkMjMyNGM3ZmU4MDE1NDdhMTFlOTQ5ZDFjYmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc4XVoUgFqTQ1NTI3OTgzMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "36efc858ed63ad2324c7fe801547a11e949d1cbd", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/36efc858ed63ad2324c7fe801547a11e949d1cbd", "committedDate": "2020-07-25T00:43:34Z", "message": "Move 'HelpMenu' to its own package"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c8fd34a3eafd56b63eeeb2bd89f54440ba26e2a", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/0c8fd34a3eafd56b63eeeb2bd89f54440ba26e2a", "committedDate": "2020-07-25T02:02:11Z", "message": "Split up HelpMenu into package-protected classes per menu-item"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "96edd86d642477ab3bfbbf69f27cebbedf082cc9", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/96edd86d642477ab3bfbbf69f27cebbedf082cc9", "committedDate": "2020-07-25T02:12:36Z", "message": "Drop AboutMenu\n\n- Engine and map information are displayed in other locations,\n  this makes most of the information in About Menu redundant\n- The about menu duplicates the license text, that is already\n  found in other locations. We can link to it instead\n- The 'license' link in the about menu is not useful, it can\n  neither be clicked nor copy-pasted\n- The menu has an incorrect title, should be \"about TripleA\"\n  rather than \"about <Game>\".\n- It is a point of maintenance, the accreditation is out of\n  date.\n\nBeyond the above, it the about menu does not contain very\nmuch information. The website link is perhaps the only\nthing beyond this.."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24b78dee36ccdc42f810f96a85493567c5553a50", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/24b78dee36ccdc42f810f96a85493567c5553a50", "committedDate": "2020-07-25T02:12:36Z", "message": "Minor finishing fixes and formatting."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6fe4d466be565cf17ac85cec2a5aafc666023c96", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/6fe4d466be565cf17ac85cec2a5aafc666023c96", "committedDate": "2020-07-25T02:12:36Z", "message": "Inline bug report menu and add menu item to open the game license"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71ea73e7716af209a7c7760df8f96433dc5aa3bb", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/71ea73e7716af209a7c7760df8f96433dc5aa3bb", "committedDate": "2020-07-25T02:12:36Z", "message": "Formatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f92cb40146a5de481e5ba4392d3c55f45825034", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/3f92cb40146a5de481e5ba4392d3c55f45825034", "committedDate": "2020-07-25T04:19:20Z", "message": "Mark UnitStatsTable as @UtilityClass"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c895c4048ecd8df243526fb2b6301f249df31b5", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/2c895c4048ecd8df243526fb2b6301f249df31b5", "committedDate": "2020-07-25T04:28:59Z", "message": "Remove unnecessary extends JMenu"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1MjYwOTY3", "url": "https://github.com/triplea-game/triplea/pull/7241#pullrequestreview-455260967", "createdAt": "2020-07-25T04:45:54Z", "commit": {"oid": "2c895c4048ecd8df243526fb2b6301f249df31b5"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQwNDo0NTo1NFrOG3CbPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQwNDo0NTo1NFrOG3CbQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM2NDYwNQ==", "bodyText": "Method getUnitStatsTable has 60 lines of code (exceeds 30 allowed). Consider refactoring.", "url": "https://github.com/triplea-game/triplea/pull/7241#discussion_r460364605", "createdAt": "2020-07-25T04:45:54Z", "author": {"login": "codeclimate"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/menubar/help/UnitStatsTable.java", "diffHunk": "@@ -0,0 +1,95 @@\n+package games.strategy.triplea.ui.menubar.help;\n+\n+import games.strategy.engine.data.GameData;\n+import games.strategy.engine.data.GamePlayer;\n+import games.strategy.engine.data.ResourceCollection;\n+import games.strategy.engine.data.UnitType;\n+import games.strategy.triplea.image.UnitImageFactory;\n+import games.strategy.triplea.ui.TooltipProperties;\n+import games.strategy.triplea.ui.UiContext;\n+import games.strategy.triplea.util.TuvUtils;\n+import java.net.URL;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+import lombok.experimental.UtilityClass;\n+\n+@UtilityClass\n+public class UnitStatsTable {\n+\n+  public static String getUnitStatsTable(final GameData gameData, final UiContext uiContext) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c895c4048ecd8df243526fb2b6301f249df31b5"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM2NDYwNw==", "bodyText": "Method buildMenu has 59 lines of code (exceeds 30 allowed). Consider refactoring.", "url": "https://github.com/triplea-game/triplea/pull/7241#discussion_r460364607", "createdAt": "2020-07-25T04:45:54Z", "author": {"login": "codeclimate"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/menubar/help/MoveHelpMenu.java", "diffHunk": "@@ -0,0 +1,76 @@\n+package games.strategy.triplea.ui.menubar.help;\n+\n+import javax.swing.Action;\n+import javax.swing.JEditorPane;\n+import javax.swing.JOptionPane;\n+import javax.swing.JScrollPane;\n+import lombok.experimental.UtilityClass;\n+import org.triplea.swing.SwingAction;\n+\n+@UtilityClass\n+class MoveHelpMenu {\n+  private static final String moveSelectionHelpTitle = \"Movement/Selection Help\";\n+\n+  Action buildMenu() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c895c4048ecd8df243526fb2b6301f249df31b5"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM2NDYwOA==", "bodyText": "Similar blocks of code found in 2 locations. Consider refactoring.", "url": "https://github.com/triplea-game/triplea/pull/7241#discussion_r460364608", "createdAt": "2020-07-25T04:45:54Z", "author": {"login": "codeclimate"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/menubar/help/MoveHelpMenu.java", "diffHunk": "@@ -0,0 +1,76 @@\n+package games.strategy.triplea.ui.menubar.help;\n+\n+import javax.swing.Action;\n+import javax.swing.JEditorPane;\n+import javax.swing.JOptionPane;\n+import javax.swing.JScrollPane;\n+import lombok.experimental.UtilityClass;\n+import org.triplea.swing.SwingAction;\n+\n+@UtilityClass\n+class MoveHelpMenu {\n+  private static final String moveSelectionHelpTitle = \"Movement/Selection Help\";\n+\n+  Action buildMenu() {\n+    return SwingAction.of(\n+        moveSelectionHelpTitle,\n+        e -> {\n+          // html formatted string\n+          final JEditorPane editorPane = new JEditorPane();\n+          editorPane.setEditable(false);\n+          editorPane.setContentType(\"text/html\");\n+          final String hints =\n+              \"<b> Selecting Units</b><br>\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c895c4048ecd8df243526fb2b6301f249df31b5"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1Mjc5ODMz", "url": "https://github.com/triplea-game/triplea/pull/7241#pullrequestreview-455279833", "createdAt": "2020-07-25T11:33:19Z", "commit": {"oid": "0c8fd34a3eafd56b63eeeb2bd89f54440ba26e2a"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQxMTozMzoyMFrOG3EV_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNVQxMTo0ODoxMlrOG3EahA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM5NjAyOA==", "bodyText": "Not related to this PR, but ((i & 1) == 0) is way more complicated than using i % 2 == 0", "url": "https://github.com/triplea-game/triplea/pull/7241#discussion_r460396028", "createdAt": "2020-07-25T11:33:20Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/menubar/help/UnitStatsTable.java", "diffHunk": "@@ -0,0 +1,93 @@\n+package games.strategy.triplea.ui.menubar.help;\n+\n+import games.strategy.engine.data.GameData;\n+import games.strategy.engine.data.GamePlayer;\n+import games.strategy.engine.data.ResourceCollection;\n+import games.strategy.engine.data.UnitType;\n+import games.strategy.triplea.image.UnitImageFactory;\n+import games.strategy.triplea.ui.TooltipProperties;\n+import games.strategy.triplea.ui.UiContext;\n+import games.strategy.triplea.util.TuvUtils;\n+import java.net.URL;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+\n+public class UnitStatsTable {\n+\n+  public static String getUnitStatsTable(final GameData gameData, final UiContext uiContext) {\n+    // html formatted string\n+    final StringBuilder hints = new StringBuilder();\n+    hints.append(\"<html>\");\n+    hints.append(\"<head><style>th, tr{color:black}</style></head>\");\n+    try {\n+      gameData.acquireReadLock();\n+      final Map<GamePlayer, Map<UnitType, ResourceCollection>> costs =\n+          TuvUtils.getResourceCostsForTuv(gameData, true);\n+      final Map<GamePlayer, List<UnitType>> playerUnitTypes =\n+          UnitType.getAllPlayerUnitsWithImages(gameData, uiContext, true);\n+      final String color3 = \"FEECE2\";\n+      final String color2 = \"BDBDBD\";\n+      final String color1 = \"ABABAB\";\n+      int i = 0;\n+      for (final Map.Entry<GamePlayer, List<UnitType>> entry : playerUnitTypes.entrySet()) {\n+        final GamePlayer player = entry.getKey();\n+        hints.append(\"<p><table border=\\\"1\\\" bgcolor=\\\"\" + color1 + \"\\\">\");\n+        hints\n+            .append(\n+                \"<tr><th style=\\\"font-size:120%;000000\\\" bgcolor=\\\"\" + color3 + \"\\\" colspan=\\\"4\\\">\")\n+            .append(player == null ? \"NULL\" : player.getName())\n+            .append(\" Units</th></tr>\");\n+        hints\n+            .append(\"<tr\")\n+            .append(((i & 1) == 0) ? \" bgcolor=\\\"\" + color1 + \"\\\"\" : \" bgcolor=\\\"\" + color2 + \"\\\"\")\n+            .append(\"><td>Unit</td><td>Name</td><td>Cost</td><td>Tool Tip</td></tr>\");\n+        for (final UnitType ut : entry.getValue()) {\n+          if (uiContext.getMapData().shouldDrawUnit(ut.getName())) {\n+            i++;\n+            hints\n+                .append(\"<tr\")\n+                .append(\n+                    ((i & 1) == 0) ? \" bgcolor=\\\"\" + color1 + \"\\\"\" : \" bgcolor=\\\"\" + color2 + \"\\\"\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c8fd34a3eafd56b63eeeb2bd89f54440ba26e2a"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM5NjY1MA==", "bodyText": "Another Side-Note:\nThe ternary expression could also just be used for the actual color, to avoid the duplicate bgcolor= part around it.\nRant Warning!\nWe use a lot of HTML inside swing, which makes this kind of stuff easier to layout but at the same time I think this is a place where simply going with a lot of swing objects would be the best move.\nAlso in the HTML world using stuff like bgcolor is only done for legacy browser engines, nowadays you'd just write something like\ntr {\n  background-color: /*color 1 */;\n}\ntr:nth-child(2n) {\n  background-color: /* color 2 */;\n}\n\nwhich makes the browser alternate between the colors automatically", "url": "https://github.com/triplea-game/triplea/pull/7241#discussion_r460396650", "createdAt": "2020-07-25T11:41:13Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/menubar/help/UnitStatsTable.java", "diffHunk": "@@ -0,0 +1,93 @@\n+package games.strategy.triplea.ui.menubar.help;\n+\n+import games.strategy.engine.data.GameData;\n+import games.strategy.engine.data.GamePlayer;\n+import games.strategy.engine.data.ResourceCollection;\n+import games.strategy.engine.data.UnitType;\n+import games.strategy.triplea.image.UnitImageFactory;\n+import games.strategy.triplea.ui.TooltipProperties;\n+import games.strategy.triplea.ui.UiContext;\n+import games.strategy.triplea.util.TuvUtils;\n+import java.net.URL;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+\n+public class UnitStatsTable {\n+\n+  public static String getUnitStatsTable(final GameData gameData, final UiContext uiContext) {\n+    // html formatted string\n+    final StringBuilder hints = new StringBuilder();\n+    hints.append(\"<html>\");\n+    hints.append(\"<head><style>th, tr{color:black}</style></head>\");\n+    try {\n+      gameData.acquireReadLock();\n+      final Map<GamePlayer, Map<UnitType, ResourceCollection>> costs =\n+          TuvUtils.getResourceCostsForTuv(gameData, true);\n+      final Map<GamePlayer, List<UnitType>> playerUnitTypes =\n+          UnitType.getAllPlayerUnitsWithImages(gameData, uiContext, true);\n+      final String color3 = \"FEECE2\";\n+      final String color2 = \"BDBDBD\";\n+      final String color1 = \"ABABAB\";\n+      int i = 0;\n+      for (final Map.Entry<GamePlayer, List<UnitType>> entry : playerUnitTypes.entrySet()) {\n+        final GamePlayer player = entry.getKey();\n+        hints.append(\"<p><table border=\\\"1\\\" bgcolor=\\\"\" + color1 + \"\\\">\");\n+        hints\n+            .append(\n+                \"<tr><th style=\\\"font-size:120%;000000\\\" bgcolor=\\\"\" + color3 + \"\\\" colspan=\\\"4\\\">\")\n+            .append(player == null ? \"NULL\" : player.getName())\n+            .append(\" Units</th></tr>\");\n+        hints\n+            .append(\"<tr\")\n+            .append(((i & 1) == 0) ? \" bgcolor=\\\"\" + color1 + \"\\\"\" : \" bgcolor=\\\"\" + color2 + \"\\\"\")\n+            .append(\"><td>Unit</td><td>Name</td><td>Cost</td><td>Tool Tip</td></tr>\");\n+        for (final UnitType ut : entry.getValue()) {\n+          if (uiContext.getMapData().shouldDrawUnit(ut.getName())) {\n+            i++;\n+            hints\n+                .append(\"<tr\")\n+                .append(\n+                    ((i & 1) == 0) ? \" bgcolor=\\\"\" + color1 + \"\\\"\" : \" bgcolor=\\\"\" + color2 + \"\\\"\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM5NjAyOA=="}, "originalCommit": {"oid": "0c8fd34a3eafd56b63eeeb2bd89f54440ba26e2a"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDM5NzE4OA==", "bodyText": "Unrelated too, I just don't get it though\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            \"<tr><th style=\\\"font-size:120%;000000\\\" bgcolor=\\\"\" + color3 + \"\\\" colspan=\\\"4\\\">\")\n          \n          \n            \n                            \"<tr><th style=\\\"font-size:120%;\\\" bgcolor=\\\"\" + color3 + \"\\\" colspan=\\\"4\\\">\")", "url": "https://github.com/triplea-game/triplea/pull/7241#discussion_r460397188", "createdAt": "2020-07-25T11:48:12Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/triplea/ui/menubar/help/UnitStatsTable.java", "diffHunk": "@@ -0,0 +1,93 @@\n+package games.strategy.triplea.ui.menubar.help;\n+\n+import games.strategy.engine.data.GameData;\n+import games.strategy.engine.data.GamePlayer;\n+import games.strategy.engine.data.ResourceCollection;\n+import games.strategy.engine.data.UnitType;\n+import games.strategy.triplea.image.UnitImageFactory;\n+import games.strategy.triplea.ui.TooltipProperties;\n+import games.strategy.triplea.ui.UiContext;\n+import games.strategy.triplea.util.TuvUtils;\n+import java.net.URL;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+\n+public class UnitStatsTable {\n+\n+  public static String getUnitStatsTable(final GameData gameData, final UiContext uiContext) {\n+    // html formatted string\n+    final StringBuilder hints = new StringBuilder();\n+    hints.append(\"<html>\");\n+    hints.append(\"<head><style>th, tr{color:black}</style></head>\");\n+    try {\n+      gameData.acquireReadLock();\n+      final Map<GamePlayer, Map<UnitType, ResourceCollection>> costs =\n+          TuvUtils.getResourceCostsForTuv(gameData, true);\n+      final Map<GamePlayer, List<UnitType>> playerUnitTypes =\n+          UnitType.getAllPlayerUnitsWithImages(gameData, uiContext, true);\n+      final String color3 = \"FEECE2\";\n+      final String color2 = \"BDBDBD\";\n+      final String color1 = \"ABABAB\";\n+      int i = 0;\n+      for (final Map.Entry<GamePlayer, List<UnitType>> entry : playerUnitTypes.entrySet()) {\n+        final GamePlayer player = entry.getKey();\n+        hints.append(\"<p><table border=\\\"1\\\" bgcolor=\\\"\" + color1 + \"\\\">\");\n+        hints\n+            .append(\n+                \"<tr><th style=\\\"font-size:120%;000000\\\" bgcolor=\\\"\" + color3 + \"\\\" colspan=\\\"4\\\">\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0c8fd34a3eafd56b63eeeb2bd89f54440ba26e2a"}, "originalPosition": 38}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3236, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}