{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5MDM4OTI1", "number": 6483, "title": "Update tests for map search path 'getCandidates'", "bodyText": "Avoid using Client settings, instead pass in user maps root folder\nCheck explicitly the returned values in test.\nUpdate MapNotFoundException API to accept a collection, the exception does not\ncare what kind of collection is received (it is overspecified)\n\n\nFunctional Changes\n\n[] New map or map update\n[] New Feature\n[] Feature update or enhancement\n[] Feature Removal\n[] Code Cleanup or refactor\n[] Configuration Change\n[] Problem fix:  \n[x] Other: test improvement  \nTesting", "createdAt": "2020-05-16T23:58:09Z", "url": "https://github.com/triplea-game/triplea/pull/6483", "merged": true, "mergeCommit": {"oid": "3ef2f10a1c48f160e1f7284023d09e09d3343b01"}, "closed": true, "closedAt": "2020-05-20T02:47:09Z", "author": {"login": "DanVanAtta"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABch_2s2gH2gAyNDE5MDM4OTI1OjEyYjY2NWM0MjI1M2JmOWYwYmVlOTJiZDlhNmNkOTU5ODljODQ5NzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABci-RZ_AH2gAyNDE5MDM4OTI1OmIwMDAxYTgzNmFkMjg4NmZmZTRkMDRhZjJlYjYxNzJjODhkYzRlNjg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "12b665c42253bf9f0bee92bd9a6cd95989c84970", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/12b665c42253bf9f0bee92bd9a6cd95989c84970", "committedDate": "2020-05-17T00:09:21Z", "message": "Update tests for map search path 'getCandidates'\n\n- Avoid using Client settings, instead pass in user maps root folder\n- Check explicitly the returned values in test.\n- Update MapNotFoundException API to accept a collection, the exception does not\n  care what kind of collection is received (it is overspecified)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c1df361ccc6a80c0e2ef3ccdbefea5ab60641b8c", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/c1df361ccc6a80c0e2ef3ccdbefea5ab60641b8c", "committedDate": "2020-05-16T23:57:00Z", "message": "Update tests for map search path 'getCandidates'\n\n- Avoid using Client settings, instead pass in user maps root folder\n- Check explicitly the returned values in test.\n- Update MapNotFoundException API to accept a collection, the exception does not\n  care what kind of collection is received (it is overspecified)"}, "afterCommit": {"oid": "12b665c42253bf9f0bee92bd9a6cd95989c84970", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/12b665c42253bf9f0bee92bd9a6cd95989c84970", "committedDate": "2020-05-17T00:09:21Z", "message": "Update tests for map search path 'getCandidates'\n\n- Avoid using Client settings, instead pass in user maps root folder\n- Check explicitly the returned values in test.\n- Update MapNotFoundException API to accept a collection, the exception does not\n  care what kind of collection is received (it is overspecified)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMTQ3Njk4", "url": "https://github.com/triplea-game/triplea/pull/6483#pullrequestreview-413147698", "createdAt": "2020-05-17T10:21:53Z", "commit": {"oid": "12b665c42253bf9f0bee92bd9a6cd95989c84970"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xN1QxMDoyMTo1M1rOGWf2XA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xN1QxMDoyOTozMFrOGWf4-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjI0MzY3Ng==", "bodyText": "Thought: I we would use java.nio.file.Path instead of java.io.File we could easily use Path#of for convinience instead of coding this logic ourselves.", "url": "https://github.com/triplea-game/triplea/pull/6483#discussion_r426243676", "createdAt": "2020-05-17T10:21:53Z", "author": {"login": "RoiEXLab"}, "path": "java-extras/src/main/java/org/triplea/io/FileUtils.java", "diffHunk": "@@ -3,13 +3,26 @@\n import static com.google.common.base.Preconditions.checkNotNull;\n \n import java.io.File;\n+import java.util.ArrayList;\n import java.util.Collection;\n import java.util.List;\n import java.util.Optional;\n+import lombok.experimental.UtilityClass;\n \n /** A collection of useful methods related to files. */\n+@UtilityClass\n public final class FileUtils {\n-  private FileUtils() {}\n+\n+  /**\n+   * Creates a new file with a parent folder and any number of child folders. This is a convenience\n+   * method to concatenate the path together with an OS specific file separator.\n+   */\n+  public static File newFile(final String parentDir, final String... childDirs) {\n+    final List<String> dirs = new ArrayList<>();\n+    dirs.add(parentDir);\n+    dirs.addAll(List.of(childDirs));\n+    return new File(String.join(File.separator, dirs));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12b665c42253bf9f0bee92bd9a6cd95989c84970"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjI0Mzg4NQ==", "bodyText": "That being said, you could simplify this code to\nreturn Path.of(parentDir, chilDirs).toFile();", "url": "https://github.com/triplea-game/triplea/pull/6483#discussion_r426243885", "createdAt": "2020-05-17T10:24:19Z", "author": {"login": "RoiEXLab"}, "path": "java-extras/src/main/java/org/triplea/io/FileUtils.java", "diffHunk": "@@ -3,13 +3,26 @@\n import static com.google.common.base.Preconditions.checkNotNull;\n \n import java.io.File;\n+import java.util.ArrayList;\n import java.util.Collection;\n import java.util.List;\n import java.util.Optional;\n+import lombok.experimental.UtilityClass;\n \n /** A collection of useful methods related to files. */\n+@UtilityClass\n public final class FileUtils {\n-  private FileUtils() {}\n+\n+  /**\n+   * Creates a new file with a parent folder and any number of child folders. This is a convenience\n+   * method to concatenate the path together with an OS specific file separator.\n+   */\n+  public static File newFile(final String parentDir, final String... childDirs) {\n+    final List<String> dirs = new ArrayList<>();\n+    dirs.add(parentDir);\n+    dirs.addAll(List.of(childDirs));\n+    return new File(String.join(File.separator, dirs));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjI0MzY3Ng=="}, "originalCommit": {"oid": "12b665c42253bf9f0bee92bd9a6cd95989c84970"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjI0NDM0Ng==", "bodyText": "A question of taste, but if you want a more functional approach here, you could do\nStream.of(\n  getMapDirectoryCandidates(mapName, ClientFileSystemHelper.getUserMapsFolder()),\n  getMapZipFileCandidates(mapName, ClientFileSystemHelper.getUserMapsFolder())\n).flatMap(Collection::stream)\n.collect(Collectors.toList());\nor\nStream.concat(\n  getMapDirectoryCandidates(mapName, ClientFileSystemHelper.getUserMapsFolder()).stream(),\n  getMapZipFileCandidates(mapName, ClientFileSystemHelper.getUserMapsFolder()).stream()\n).collect(Collectors.toList());", "url": "https://github.com/triplea-game/triplea/pull/6483#discussion_r426244346", "createdAt": "2020-05-17T10:29:30Z", "author": {"login": "RoiEXLab"}, "path": "game-core/src/main/java/games/strategy/triplea/ResourceLoader.java", "diffHunk": "@@ -210,8 +209,9 @@ static String normalizeMapName(final String zipName) {\n \n   private static List<File> getCandidatePaths(final String mapName) {\n     final List<File> candidates = new ArrayList<>();\n-    candidates.addAll(getMapDirectoryCandidates(mapName));\n-    candidates.addAll(getMapZipFileCandidates(mapName));\n+    candidates.addAll(\n+        getMapDirectoryCandidates(mapName, ClientFileSystemHelper.getUserMapsFolder()));\n+    candidates.addAll(getMapZipFileCandidates(mapName, ClientFileSystemHelper.getUserMapsFolder()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "12b665c42253bf9f0bee92bd9a6cd95989c84970"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0001a836ad2886ffe4d04af2eb6172c88dc4e68", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/b0001a836ad2886ffe4d04af2eb6172c88dc4e68", "committedDate": "2020-05-20T00:52:38Z", "message": "Simplify 'FileUtils#newFile' implementation using 'Path#of'"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3428, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}