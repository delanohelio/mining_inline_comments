{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgxMDM2MTE2", "number": 7566, "title": "Simplify map loading responsibility", "bodyText": "commit 76b918d\nSimplify, consolidate error handling for game parse exception when\nbuilding game notes (for select map window)\n\ncommit a1d7e93\nSimplify, push map parsing error handling to GameParser and game loading to GameChooserModel\n\nThe push of responsibility offloads responsibility and simplifies clients.\nWe also relax the error handling to not do things like reset the default game\n\n\nTesting\n\nScreens Shots\n\nAdditional Notes to Reviewer\n\nRelease Note", "createdAt": "2020-09-07T04:30:05Z", "url": "https://github.com/triplea-game/triplea/pull/7566", "merged": true, "mergeCommit": {"oid": "92c5df58397dfc5d0b44a7d3bbda460d04b48af1"}, "closed": true, "closedAt": "2020-09-07T20:08:40Z", "author": {"login": "DanVanAtta"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdGY9vCAH2gAyNDgxMDM2MTE2Ojc2YjkxOGQwYTViZGNjYThiZWYzYzA3ZjAyYmFmZDQzNmRmMDFkYjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdGoQ2HgBqjM3MzgyNDg1NjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "76b918d0a5bdcca8bef3c07f02bafd436df01db5", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/76b918d0a5bdcca8bef3c07f02bafd436df01db5", "committedDate": "2020-09-07T01:45:56Z", "message": "Simplify, consolidate error handling for game parse exception when building game notes (for select map window)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1d7e935697675e4331b7f60da88720b51970d92", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/a1d7e935697675e4331b7f60da88720b51970d92", "committedDate": "2020-09-07T04:26:28Z", "message": "Simplify, push map parsing error handling to GameParser and game loading to GameChooserModel\n\nThe push of responsibility offloads responsibility and simplifies clients.\nWe also relax the error handling to not do things like reset the default game\non parse error."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzMjM1ODU2", "url": "https://github.com/triplea-game/triplea/pull/7566#pullrequestreview-483235856", "createdAt": "2020-09-07T04:34:38Z", "commit": {"oid": "a1d7e935697675e4331b7f60da88720b51970d92"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QwNDozNDozOFrOHNv4Ng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QwNDozNDozOFrOHNv4Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDE3Nzk3NA==", "bodyText": "Avoid too many return statements within this method.", "url": "https://github.com/triplea-game/triplea/pull/7566#discussion_r484177974", "createdAt": "2020-09-07T04:34:38Z", "author": {"login": "codeclimate"}, "path": "game-core/src/main/java/games/strategy/engine/data/gameparser/GameParser.java", "diffHunk": "@@ -99,10 +103,25 @@ private GameParser(\n    *\n    * @return A complete {@link GameData} instance that can be used to play the game.\n    */\n-  @Nonnull\n-  public static GameData parse(final String mapName, final InputStream stream)\n-      throws GameParseException, EngineVersionException {\n-    return parse(mapName, stream, new XmlGameElementMapper());\n+  public static Optional<GameData> parse(final URI mapUri) {\n+\n+    final Optional<InputStream> inputStream = UrlStreams.openStream(mapUri);\n+    if (inputStream.isEmpty()) {\n+      return Optional.empty();\n+    }\n+\n+    try (InputStream input = inputStream.get()) {\n+      return Optional.of(parse(mapUri.toString(), input, new XmlGameElementMapper()));\n+    } catch (final EngineVersionException e) {\n+      log.log(Level.WARNING, \"Game engine not compatible with: \" + mapUri, e);\n+      return Optional.empty();\n+    } catch (final GameParseException e) {\n+      log.log(Level.WARNING, \"Could not parse:\" + mapUri, e);\n+      return Optional.empty();\n+    } catch (final IOException e) {\n+      log.log(Level.SEVERE, \"Error opening file: \" + mapUri + \", \" + e.getMessage(), e);\n+      return Optional.empty();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a1d7e935697675e4331b7f60da88720b51970d92"}, "originalPosition": 51}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "922b1624e8b76ba05c439efd87a04fbb6414900b", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/922b1624e8b76ba05c439efd87a04fbb6414900b", "committedDate": "2020-09-07T04:38:57Z", "message": "Remove unused @Log"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c178f0d90d5b3cb01e80282b61ef9f08e82a385d", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/c178f0d90d5b3cb01e80282b61ef9f08e82a385d", "committedDate": "2020-09-07T19:07:09Z", "message": "Merge remote-tracking branch 'origin/master' into simplify-map-loading-responsibility"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02df22ac020348a6e06120157b5b0a528604eab8", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/02df22ac020348a6e06120157b5b0a528604eab8", "committedDate": "2020-09-07T19:08:52Z", "message": "Use 'openStream(uri, function)' API to simplify GameParser (reduce number of return statements)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "098adff6eedb0e057b3c6f9059c30ace69ec5ac4", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/098adff6eedb0e057b3c6f9059c30ace69ec5ac4", "committedDate": "2020-09-07T19:33:44Z", "message": "Fix catch, EngineVersionException no longer thrown."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "803571e84929df38d0c24f231301257e1ade7524", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/803571e84929df38d0c24f231301257e1ade7524", "committedDate": "2020-09-07T19:35:07Z", "message": "Formatting, remove unused import"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "942a801294481d0428fe7689ded8935621c3f5b6", "author": {"user": {"login": "tripleabuilderbot", "name": null}}, "url": "https://github.com/triplea-game/triplea/commit/942a801294481d0428fe7689ded8935621c3f5b6", "committedDate": "2020-09-07T19:11:10Z", "message": "Auto-Formatting"}, "afterCommit": {"oid": "803571e84929df38d0c24f231301257e1ade7524", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/803571e84929df38d0c24f231301257e1ade7524", "committedDate": "2020-09-07T19:35:07Z", "message": "Formatting, remove unused import"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3985, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}