{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg2MTIxNTE0", "number": 7637, "title": "Update: Allow unlimited default player colors & add a default for 'color.Impassable'", "bodyText": "commit 2ab5889\nRename 'DefaultColors' -> 'PlayerColors'\n\ncommit 04b7551\nAdd a utility to construct colors 'ColorUtils'\n\ncommit a1b3d02\nAllow unlimited default player colors, default the impassable player color, and ensure stable colors\n\n- Cache playerColors such that default player colors are stable. Requesting the color\n  of a player will always return the same color.\n\n- Generate default player colors if we exhaust the default player color list. Once\n  we exceed the colors on the list, start to generate colors randomly.\n\n- Generate default (random) player colors in a stable manner, always generate\n  the same random default player color per player name (use a fixed random seed\n  based on player name).\n\ncommit c4e1d36\nClean up  ColorUtils methods.\n\n\nTesting\n\nScreens Shots\n\nAdditional Notes to Reviewer\n\nRelease Note\nIt's not uncommon for map-makers to run out default player colors and run into errors. This update resolves that problem by generating additional default colors:\n\nhttps://forums.triplea-game.org/topic/1946/no-such-element-exception\nhttps://forums.triplea-game.org/topic/2201/map-not-loading-correctly\nhttps://forums.triplea-game.org/topic/2189/error-loading-my-new-ish-map\n\n\nUPDATE|Generate an unlimited number of default player colors when player colors are not specified in map.properties. Use default color '#DEB887' for the 'impassable' player color if not specified in map.properties.", "createdAt": "2020-09-13T04:28:30Z", "url": "https://github.com/triplea-game/triplea/pull/7637", "merged": true, "mergeCommit": {"oid": "92a9eee20e09fd6f9e2b1918f31e338d4cdef4af"}, "closed": true, "closedAt": "2020-09-16T00:14:45Z", "author": {"login": "DanVanAtta"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdIUm7XgH2gAyNDg2MTIxNTE0OjJhYjU4ODk2ZmYxOTJkYzRmZjFmMTVhZDRiOTE5ZDY5NjAxYWUwMTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdI_I9VAH2gAyNDg2MTIxNTE0OmRjOWQ2YjBkOWJlZjdhOGYzNDI4OTRjNGU5NTA5YmM0ZDM4OWYwYmE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2ab58896ff192dc4ff1f15ad4b919d69601ae018", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/2ab58896ff192dc4ff1f15ad4b919d69601ae018", "committedDate": "2020-09-13T01:49:15Z", "message": "Rename 'DefaultColors' -> 'PlayerColors'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04b7551b3025a8139a70182f68f7be8db7ebb627", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/04b7551b3025a8139a70182f68f7be8db7ebb627", "committedDate": "2020-09-13T04:19:05Z", "message": "Add a utility to construct colors 'ColorUtils'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1b3d0239352f61367c833c68004c9775eef0e12", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/a1b3d0239352f61367c833c68004c9775eef0e12", "committedDate": "2020-09-13T04:19:45Z", "message": "Allow unlimited default player colors, default the impassable player color, and ensure stable colors\n\n- Cache playerColors such that default player colors are stable. Requesting the color\n  of a player will always return the same color.\n\n- Generate default player colors if we exhaust the default player color list. Once\n  we exceed the colors on the list, start to generate colors randomly.\n\n- Generate default (random) player colors in a stable manner, always generate\n  the same random default player color per player name (use a fixed random seed\n  based on player name)."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4e1d366bedbda8169d0ac89edd7ab1ecbeca200", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/c4e1d366bedbda8169d0ac89edd7ab1ecbeca200", "committedDate": "2020-09-13T04:24:30Z", "message": "Clean up  ColorUtils methods."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef2dd987d4e498e037884cf16fc44e8339912494", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/ef2dd987d4e498e037884cf16fc44e8339912494", "committedDate": "2020-09-14T00:56:22Z", "message": "Preserve stack trace message in ColorUtils error handling"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg3OTAyMjY4", "url": "https://github.com/triplea-game/triplea/pull/7637#pullrequestreview-487902268", "createdAt": "2020-09-14T15:38:33Z", "commit": {"oid": "ef2dd987d4e498e037884cf16fc44e8339912494"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTozODozM1rOHRbGgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNFQxNTozODo0N1rOHRbHDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODAzMTg3NA==", "bodyText": "The name might be a bit misleading, it's more like an arbitrary number, also it doesn't look like this method is used at all.", "url": "https://github.com/triplea-game/triplea/pull/7637#discussion_r488031874", "createdAt": "2020-09-14T15:38:33Z", "author": {"login": "RoiEXLab"}, "path": "java-extras/src/main/java/org/triplea/java/ColorUtils.java", "diffHunk": "@@ -0,0 +1,41 @@\n+package org.triplea.java;\n+\n+import com.google.common.base.Preconditions;\n+import java.awt.Color;\n+import java.util.Random;\n+import lombok.experimental.UtilityClass;\n+\n+@UtilityClass\n+public class ColorUtils {\n+  /**\n+   * Returns a color parsed from the provided input hex string.\n+   *\n+   * @param colorString EG: 00FF00, FF00FF, 000000\n+   */\n+  public Color fromHexString(final String colorString) {\n+    Preconditions.checkArgument(\n+        colorString.length() == 6,\n+        \"Colors must be 6 digit hex numbers, eg FF0011, not: \" + colorString);\n+    try {\n+      return new Color(Integer.decode(\"0x\" + colorString));\n+    } catch (final NumberFormatException nfe) {\n+      throw new IllegalArgumentException(\n+          \"Colors must be 6 digit hex numbers, eg FF0011, not: \"\n+              + colorString\n+              + \", \"\n+              + nfe.getMessage(),\n+          nfe);\n+    }\n+  }\n+\n+  /** Returns a randomly generated color. */\n+  public Color randomColor() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef2dd987d4e498e037884cf16fc44e8339912494"}, "originalPosition": 32}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODAzMjAxMw==", "bodyText": "That's a really good idea \ud83d\udc4d", "url": "https://github.com/triplea-game/triplea/pull/7637#discussion_r488032013", "createdAt": "2020-09-14T15:38:47Z", "author": {"login": "RoiEXLab"}, "path": "java-extras/src/main/java/org/triplea/java/ColorUtils.java", "diffHunk": "@@ -0,0 +1,41 @@\n+package org.triplea.java;\n+\n+import com.google.common.base.Preconditions;\n+import java.awt.Color;\n+import java.util.Random;\n+import lombok.experimental.UtilityClass;\n+\n+@UtilityClass\n+public class ColorUtils {\n+  /**\n+   * Returns a color parsed from the provided input hex string.\n+   *\n+   * @param colorString EG: 00FF00, FF00FF, 000000\n+   */\n+  public Color fromHexString(final String colorString) {\n+    Preconditions.checkArgument(\n+        colorString.length() == 6,\n+        \"Colors must be 6 digit hex numbers, eg FF0011, not: \" + colorString);\n+    try {\n+      return new Color(Integer.decode(\"0x\" + colorString));\n+    } catch (final NumberFormatException nfe) {\n+      throw new IllegalArgumentException(\n+          \"Colors must be 6 digit hex numbers, eg FF0011, not: \"\n+              + colorString\n+              + \", \"\n+              + nfe.getMessage(),\n+          nfe);\n+    }\n+  }\n+\n+  /** Returns a randomly generated color. */\n+  public Color randomColor() {\n+    return randomColor(123L);\n+  }\n+\n+  /** Returns a randomly generated color using a fixed random seed. */\n+  public Color randomColor(final long randomSeed) {\n+    final Random random = new Random(randomSeed);\n+    return Color.getHSBColor(random.nextFloat(), random.nextFloat(), random.nextFloat());\n+  }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef2dd987d4e498e037884cf16fc44e8339912494"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc9d6b0d9bef7a8f342894c4e9509bc4d389f0ba", "author": {"user": {"login": "DanVanAtta", "name": "Dan Van Atta"}}, "url": "https://github.com/triplea-game/triplea/commit/dc9d6b0d9bef7a8f342894c4e9509bc4d389f0ba", "committedDate": "2020-09-15T03:22:26Z", "message": "Remove unused (and buggy) ColorUtils#randomColor"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3914, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}