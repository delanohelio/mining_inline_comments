{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0ODcwNzQy", "number": 638, "title": "Fail on invalid rest and transport categories", "bodyText": "Issue #, if available:\nDescription of changes:\n\nAddresses #324 to fail on invalid categories in the request.\nNot all the audit categories are valid for REST transport layer\nFails with 400 bad request if invalid categories are passed\n\nBy submitting this pull request, I confirm that you can use, modify, copy, and redistribute this contribution, under the terms of your choice.", "createdAt": "2020-08-07T23:09:28Z", "url": "https://github.com/opensearch-project/security/pull/638", "merged": true, "mergeCommit": {"oid": "8800783be4ba5cb425b77d910da9766659b17044"}, "closed": true, "closedAt": "2020-08-08T02:32:28Z", "author": {"login": "sujithvm"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8ujF1AFqTQ2MzcwNDk3Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc9m6iyAFqTQ2NDQ5MDc0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzNzA0OTc3", "url": "https://github.com/opensearch-project/security/pull/638#pullrequestreview-463704977", "createdAt": "2020-08-08T01:15:30Z", "commit": null, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzNzA4NTk5", "url": "https://github.com/opensearch-project/security/pull/638#pullrequestreview-463708599", "createdAt": "2020-08-08T01:52:46Z", "commit": null, "state": "DISMISSED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQwMTo1Mjo0NlrOG9smUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wOFQwMTo1Mjo0NlrOG9smUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzM0NzAyNA==", "bodyText": "nit: maybe name this DISABLED_REST_CATEGORIES so its more obvious.", "url": "https://github.com/opensearch-project/security/pull/638#discussion_r467347024", "createdAt": "2020-08-08T01:52:46Z", "author": {"login": "debjanibnrj"}, "path": "src/main/java/com/amazon/opendistroforelasticsearch/security/dlic/rest/validation/AuditValidator.java", "diffHunk": "@@ -2,12 +2,36 @@\n \n import com.amazon.opendistroforelasticsearch.security.DefaultObjectMapper;\n import com.amazon.opendistroforelasticsearch.security.auditlog.config.AuditConfig;\n+import com.amazon.opendistroforelasticsearch.security.auditlog.impl.AuditCategory;\n+import com.google.common.collect.ImmutableSet;\n import org.elasticsearch.common.bytes.BytesReference;\n import org.elasticsearch.common.settings.Settings;\n import org.elasticsearch.rest.RestRequest;\n \n+import java.util.Set;\n+\n public class AuditValidator extends AbstractConfigurationValidator {\n \n+    private static final Set<AuditCategory> REST_CATEGORIES = ImmutableSet.of(", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1db5545b76ccf27c33f529d2e09fd3ca3ac86e5", "author": {"user": {"login": "sujithvm", "name": "Sujith Vadakkepat"}}, "url": "https://github.com/opensearch-project/security/commit/f1db5545b76ccf27c33f529d2e09fd3ca3ac86e5", "committedDate": "2020-08-08T01:54:50Z", "message": "Fail on invalid rest and transport categories"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzNzEwODkw", "url": "https://github.com/opensearch-project/security/pull/638#pullrequestreview-463710890", "createdAt": "2020-08-08T02:27:52Z", "commit": {"oid": "f1db5545b76ccf27c33f529d2e09fd3ca3ac86e5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzNzExMDEy", "url": "https://github.com/opensearch-project/security/pull/638#pullrequestreview-463711012", "createdAt": "2020-08-08T02:30:02Z", "commit": {"oid": "f1db5545b76ccf27c33f529d2e09fd3ca3ac86e5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0NDc0NTM3", "url": "https://github.com/opensearch-project/security/pull/638#pullrequestreview-464474537", "createdAt": "2020-08-10T18:31:09Z", "commit": {"oid": "f1db5545b76ccf27c33f529d2e09fd3ca3ac86e5"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0NDkwNzQw", "url": "https://github.com/opensearch-project/security/pull/638#pullrequestreview-464490740", "createdAt": "2020-08-10T18:55:48Z", "commit": {"oid": "f1db5545b76ccf27c33f529d2e09fd3ca3ac86e5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxODo1NTo0OFrOG-bQVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxODo1NTo0OFrOG-bQVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODExMTQ0Ng==", "bodyText": "why these categories are disable at rest layer?\nAren't these all valid categories?", "url": "https://github.com/opensearch-project/security/pull/638#discussion_r468111446", "createdAt": "2020-08-10T18:55:48Z", "author": {"login": "hardik-k-shah"}, "path": "src/main/java/com/amazon/opendistroforelasticsearch/security/dlic/rest/validation/AuditValidator.java", "diffHunk": "@@ -2,12 +2,36 @@\n \n import com.amazon.opendistroforelasticsearch.security.DefaultObjectMapper;\n import com.amazon.opendistroforelasticsearch.security.auditlog.config.AuditConfig;\n+import com.amazon.opendistroforelasticsearch.security.auditlog.impl.AuditCategory;\n+import com.google.common.collect.ImmutableSet;\n import org.elasticsearch.common.bytes.BytesReference;\n import org.elasticsearch.common.settings.Settings;\n import org.elasticsearch.rest.RestRequest;\n \n+import java.util.Set;\n+\n public class AuditValidator extends AbstractConfigurationValidator {\n \n+    private static final Set<AuditCategory> DISABLED_REST_CATEGORIES = ImmutableSet.of(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1db5545b76ccf27c33f529d2e09fd3ca3ac86e5"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2857, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}