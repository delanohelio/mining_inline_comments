{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM5ODQ3MDY1", "number": 895, "title": "Optimize debug log enable check", "bodyText": "opendistro-for-elasticsearch/security pull request intake form\nPlease provide as much details as possible to get feedback/acceptance on your PR quickly\n\n\nCategory: (Enhancement, New feature, Bug fix, Test fix, Refactoring, Maintenance, Documentation)\nRefactoring\n\n\nGithub Issue # or roaddmap entry, if available:\nN/A\n\n\nDescription of changes:\n\n\n\nlog.isDebugEnabled() and log.isTraceEnabled() is called multiple times in the same request path or method.\nEach of the log function internally checks if it is enabled or not but enabling debug/trace logs is generally a transient change for debugging.\nRemoved some debug logs which are in addition to log.warn as warn messages will always be shown in addition to debug messages\nFixed string formatting of log messages\n\n\nWhy these changes are required?\n\n\nReused computed variables within same method context\n\n\nWhat is the old behavior before changes and new behavior after changes? (Please add any example/logs/screenshot if avaialble)\n\n\nNo changes in behavior.\n\n\n\nTesting done: (Please provide details of testing done: Unit testing, integration testing and manaual testing)\nNo functional changes. Existing automated tests are sufficient\n\n\nTO-DOs, if any: (_Please describe pending items and provide github issues# for each of them)\nN/A\n\n\nIs it backport from master branch? (If yes, please add backport PR # and commits #)\nNo\n\n\nBy submitting this pull request, I confirm that you can use, modify, copy, and redistribute this contribution, under the terms of your choice.", "createdAt": "2020-12-14T22:42:51Z", "url": "https://github.com/opensearch-project/security/pull/895", "merged": true, "mergeCommit": {"oid": "100729c5397274b3b7dfaeb2aac06520feda1285"}, "closed": true, "closedAt": "2021-03-18T21:23:33Z", "author": {"login": "sujithvm"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABd19DIXgFqTU4MDczMjk1NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABeEa2B_AFqTYxNTc2NTY1OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTgwNzMyOTU0", "url": "https://github.com/opensearch-project/security/pull/895#pullrequestreview-580732954", "createdAt": "2021-02-01T20:22:50Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wMVQyMDoyMjo1MVrOIdy-6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wMVQyMDoyMjo1MVrOIdy-6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2ODExNDkyMw==", "bodyText": "can we make these class level fields, then we can utilize them for other methods (eg: configureSSL) as well?", "url": "https://github.com/opensearch-project/security/pull/895#discussion_r568114923", "createdAt": "2021-02-01T20:22:51Z", "author": {"login": "debjanibnrj"}, "path": "src/main/java/com/amazon/dlic/auth/ldap/backend/LDAPAuthorizationBackend.java", "diffHunk": "@@ -257,9 +257,11 @@ private static Connection getConnection0(final Settings settings, final Path con\n         Connection connection = null;\n         Exception lastException = null;\n \n+        final boolean isDebugEnabled = log.isDebugEnabled();", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTgwNzM2MDM3", "url": "https://github.com/opensearch-project/security/pull/895#pullrequestreview-580736037", "createdAt": "2021-02-01T20:26:59Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wMVQyMDoyNjo1OVrOIdzIAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wMVQyMDoyNjo1OVrOIdzIAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2ODExNzI0OQ==", "bodyText": "anyway to avoid passing these in args and declare them as class variables.", "url": "https://github.com/opensearch-project/security/pull/895#discussion_r568117249", "createdAt": "2021-02-01T20:26:59Z", "author": {"login": "debjanibnrj"}, "path": "src/main/java/com/amazon/dlic/auth/ldap2/LDAPAuthorizationBackend2.java", "diffHunk": "@@ -408,12 +409,13 @@ private void fillRoles0(final User user, final AuthCredentials optionalAuthCreds\n \n     protected Set<LdapName> resolveNestedRoles(final LdapName roleDn, final Connection ldapConnection,\n                                                String userRoleName, int depth, final boolean rolesearchEnabled,\n-                                               Set<Map.Entry<String, Settings>> roleSearchBaseSettingsSet)\n+                                               Set<Map.Entry<String, Settings>> roleSearchBaseSettingsSet,\n+                                               final boolean isDebugEnabled, final boolean isTraceEnabled)", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 163}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTgwNzM2NDYz", "url": "https://github.com/opensearch-project/security/pull/895#pullrequestreview-580736463", "createdAt": "2021-02-01T20:27:35Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wMVQyMDoyNzozNVrOIdzJXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wMVQyMDoyNzozNVrOIdzJXQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2ODExNzU5Nw==", "bodyText": "do we need isDebugEnabled variable here?", "url": "https://github.com/opensearch-project/security/pull/895#discussion_r568117597", "createdAt": "2021-02-01T20:27:35Z", "author": {"login": "debjanibnrj"}, "path": "src/main/java/com/amazon/dlic/auth/ldap2/LDAPUserSearcher.java", "diffHunk": "@@ -101,7 +101,7 @@ private LdapEntry existsSearchingUntilFirstHit(Connection ldapConnection, String\n                     SearchScope.SUBTREE);\n \n             if (log.isDebugEnabled()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTgwNzM2ODAx", "url": "https://github.com/opensearch-project/security/pull/895#pullrequestreview-580736801", "createdAt": "2021-02-01T20:28:04Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wMVQyMDoyODowNFrOIdzKjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wMVQyMDoyODowNFrOIdzKjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2ODExNzkwMg==", "bodyText": "do we need isDebugEnabled variable here?", "url": "https://github.com/opensearch-project/security/pull/895#discussion_r568117902", "createdAt": "2021-02-01T20:28:04Z", "author": {"login": "debjanibnrj"}, "path": "src/main/java/com/amazon/dlic/util/SettingsBasedSSLConfigurator.java", "diffHunk": "@@ -414,7 +414,7 @@ public SSLConfig(SSLContext sslContext, String[] supportedProtocols, String[] su\n             this.effectiveKeyAlias = effectiveKeyAlias;\n \n             if (log.isDebugEnabled()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 3}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32b3677b4563476884ada33f65c77e59038de0fc", "author": {"user": {"login": "sujithvm", "name": "Sujith Vadakkepat"}}, "url": "https://github.com/opensearch-project/security/commit/32b3677b4563476884ada33f65c77e59038de0fc", "committedDate": "2021-03-11T20:27:38Z", "message": "Use smart logging and optimize debug/trace enabled checks"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjEyNjkwNzYx", "url": "https://github.com/opensearch-project/security/pull/895#pullrequestreview-612690761", "createdAt": "2021-03-15T22:21:25Z", "commit": {"oid": "32b3677b4563476884ada33f65c77e59038de0fc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjE1NzY1NjU4", "url": "https://github.com/opensearch-project/security/pull/895#pullrequestreview-615765658", "createdAt": "2021-03-18T19:00:38Z", "commit": {"oid": "32b3677b4563476884ada33f65c77e59038de0fc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2705, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}