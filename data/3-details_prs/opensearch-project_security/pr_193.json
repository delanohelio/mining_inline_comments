{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5OTAwMzA1", "number": 193, "title": "Use BASE_DIR in demo install script", "bodyText": "In install_demo_configuration.sh was hardcoded the default directory\n/usr/share/elasticsearch, this won't work if elasticsearch is\ninstalled on a custom location (or if it used from the tar.gz for\ntesting).\nUsing the BASE_DIR variable we can get more flexibility from the script.", "createdAt": "2020-01-07T09:28:16Z", "url": "https://github.com/opensearch-project/security/pull/193", "merged": true, "mergeCommit": {"oid": "5ad5e0abade3c0b2b9ee5c2a9ffe38a41fe62c77"}, "closed": true, "closedAt": "2020-01-23T22:38:56Z", "author": {"login": "epol"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb6voPtAFqTM0MzYyMjIyOQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb9SEDvAFqTM0NzY1MDkxMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQzNjIyMjI5", "url": "https://github.com/opensearch-project/security/pull/193#pullrequestreview-343622229", "createdAt": "2020-01-16T01:12:01Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwMToxMjowMVrOFeLVrQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNlQwMToxMjowMVrOFeLVrQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE4NzM3Mw==", "bodyText": "@epol Thank you for your contribution.\nThese values are already set above so I was wondering if it is possible to delete these lines instead. Thanks!", "url": "https://github.com/opensearch-project/security/pull/193#discussion_r367187373", "createdAt": "2020-01-16T01:12:01Z", "author": {"login": "sujithvm"}, "path": "tools/install_demo_configuration.sh", "diffHunk": "@@ -113,17 +113,17 @@ SUDO_CMD=\"\"\n ES_INSTALL_TYPE=\".tar.gz\"\n \n #Check if its a rpm/deb install\n-if [ -f /usr/share/elasticsearch/bin/elasticsearch ]; then\n-    ES_CONF_FILE=\"/usr/share/elasticsearch/config/elasticsearch.yml\"\n+if [ -f $BASE_DIR/bin/elasticsearch ]; then\n+    ES_CONF_FILE=\"$BASE_DIR/config/elasticsearch.yml\"\n \n     if [ ! -f \"$ES_CONF_FILE\" ]; then\n         ES_CONF_FILE=\"/etc/elasticsearch/elasticsearch.yml\"\n     fi\n \n-    ES_BIN_DIR=\"/usr/share/elasticsearch/bin\"\n-    ES_PLUGINS_DIR=\"/usr/share/elasticsearch/plugins\"\n-    ES_MODULES_DIR=\"/usr/share/elasticsearch/modules\"\n-    ES_LIB_PATH=\"/usr/share/elasticsearch/lib\"\n+    ES_BIN_DIR=\"$BASE_DIR/bin\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80f12d5aed8e26979abd0fe953ca60fa47f34d84", "author": {"user": {"login": "seacom", "name": "Seacom"}}, "url": "https://github.com/opensearch-project/security/commit/80f12d5aed8e26979abd0fe953ca60fa47f34d84", "committedDate": "2020-01-16T13:37:36Z", "message": "Fixed bad behaviour of demo install when multiple instances are present\n\nIf `/usr/share/elasticsearch/bin/elasticsearch` is present then\n`install_demo_configuration.sh` will always assume that it has been run from\na packaged version of elasticsearch. This may not be true when another instances\nis started from the tar.gz package and the security plugin is installed there.\n\nThis commit makes the install demo script check if the BASE_DIR directory is\n`/usr/share/elasticsearch` and only in this case it assumes that we are dealing\nwith a packaged installation."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "80f12d5aed8e26979abd0fe953ca60fa47f34d84", "author": {"user": {"login": "seacom", "name": "Seacom"}}, "url": "https://github.com/opensearch-project/security/commit/80f12d5aed8e26979abd0fe953ca60fa47f34d84", "committedDate": "2020-01-16T13:37:36Z", "message": "Fixed bad behaviour of demo install when multiple instances are present\n\nIf `/usr/share/elasticsearch/bin/elasticsearch` is present then\n`install_demo_configuration.sh` will always assume that it has been run from\na packaged version of elasticsearch. This may not be true when another instances\nis started from the tar.gz package and the security plugin is installed there.\n\nThis commit makes the install demo script check if the BASE_DIR directory is\n`/usr/share/elasticsearch` and only in this case it assumes that we are dealing\nwith a packaged installation."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3NjE3MzQw", "url": "https://github.com/opensearch-project/security/pull/193#pullrequestreview-347617340", "createdAt": "2020-01-23T21:24:18Z", "commit": {"oid": "80f12d5aed8e26979abd0fe953ca60fa47f34d84"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3NjUwOTEx", "url": "https://github.com/opensearch-project/security/pull/193#pullrequestreview-347650911", "createdAt": "2020-01-23T22:27:02Z", "commit": {"oid": "80f12d5aed8e26979abd0fe953ca60fa47f34d84"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2973, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}