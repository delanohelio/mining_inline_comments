{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyNDk3MzEy", "number": 620, "title": "Backport Opendistro 1.7", "bodyText": "Issue #, if available:\nDescription of changes:\nBy submitting this pull request, I confirm that you can use, modify, copy, and redistribute this contribution, under the terms of your choice.", "createdAt": "2020-08-04T02:56:23Z", "url": "https://github.com/opensearch-project/security/pull/620", "merged": true, "mergeCommit": {"oid": "a1d9f819cd74c10d3239200009e6ad1e01b23750"}, "closed": true, "closedAt": "2020-08-05T17:00:41Z", "author": {"login": "debjanibnrj"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc7r7vVgFqTQ2MTExNzA3Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc7-IfSAFqTQ2MTg0NzQ2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxMTE3MDcy", "url": "https://github.com/opensearch-project/security/pull/620#pullrequestreview-461117072", "createdAt": "2020-08-04T19:38:47Z", "commit": null, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxMTU3MTA2", "url": "https://github.com/opensearch-project/security/pull/620#pullrequestreview-461157106", "createdAt": "2020-08-04T20:40:43Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQyMDo0MDo0M1rOG7wtyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNFQyMDo0MTo1MVrOG7wwBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTMxNzMyMw==", "bodyText": "Are these changes supposed to be backported? The original PR had more changes", "url": "https://github.com/opensearch-project/security/pull/620#discussion_r465317323", "createdAt": "2020-08-04T20:40:43Z", "author": {"login": "dinusX"}, "path": "src/main/java/com/amazon/opendistroforelasticsearch/security/dlic/rest/api/AbstractApiAction.java", "diffHunk": "@@ -370,9 +387,10 @@ protected final RestChannelConsumer prepareRequest(RestRequest request, NodeClie\n \t\t// check if request is authorized\n \t\tString authError = restApiPrivilegesEvaluator.checkAccessPermissions(request, getEndpoint());\n \n+\t\tfinal User user = (User) threadPool.getThreadContext().getTransient(ConfigConstants.OPENDISTRO_SECURITY_USER);\n+\t\tfinal String userName = user == null ? null : user.getName();", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 74}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTMxNzg5Mg==", "bodyText": "Similar this one.", "url": "https://github.com/opensearch-project/security/pull/620#discussion_r465317892", "createdAt": "2020-08-04T20:41:51Z", "author": {"login": "dinusX"}, "path": "src/main/java/com/amazon/opendistroforelasticsearch/security/dlic/rest/api/AbstractApiAction.java", "diffHunk": "@@ -499,6 +517,10 @@ protected void unprocessable(RestChannel channel, String message) {\n \t\tresponse(channel, RestStatus.UNPROCESSABLE_ENTITY, message);\n \t}\n \n+\tprotected void conflict(RestChannel channel, String message) {\n+\t\tresponse(channel, RestStatus.CONFLICT, message);\n+\t}\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 88}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9673bd62ce9fb2638a30914413431e631fbf001", "author": {"user": {"login": "debjanibnrj", "name": "Debjani Banerjee"}}, "url": "https://github.com/opensearch-project/security/commit/f9673bd62ce9fb2638a30914413431e631fbf001", "committedDate": "2020-08-04T22:56:40Z", "message": "Preventing users from mapping to hidden/reserved opendistro_security_\u2026 (#486)\n\n* Preventing users from mapping to hidden/reserved opendistro_security_roles\n\n(cherry picked from commit 979d1a4a71db9f50a19428c3cd31bcc6a26a209c)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7428f7bed2f059b789220a25ac34073c089c3709", "author": {"user": {"login": "palashhedau", "name": "Palash Hedau"}}, "url": "https://github.com/opensearch-project/security/commit/7428f7bed2f059b789220a25ac34073c089c3709", "committedDate": "2020-08-04T23:11:17Z", "message": "Allow superadmin to update/delete hidden resources required for tenantinfo check. This can update the hidden roles which will be used bt tenantinfo check. (#513)\n\nAdded test cases\n\nCo-authored-by: Palash Hedau <phhedau@amazon.com>\n\n(cherry picked from commit e97d30d204c42c1a9518c85039144fcdadc0e590)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d73b94806bc220939ab24603c4ba06e43fe3826", "author": {"user": {"login": "debjanibnrj", "name": "Debjani Banerjee"}}, "url": "https://github.com/opensearch-project/security/commit/4d73b94806bc220939ab24603c4ba06e43fe3826", "committedDate": "2020-08-04T23:13:51Z", "message": "Fix: Make sure Internal users API supports adding reserved opendistrosecurityroles (by superuser). Do not filter out reserved roles in the InternalUsersModelV7\n\n(cherry picked from commit 41fcc0230eab891cbade72853787364a90c130d7)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bae9e504b4b72a4681d4b55340721552334df6c5", "author": {"user": {"login": "debjanibnrj", "name": "Debjani Banerjee"}}, "url": "https://github.com/opensearch-project/security/commit/bae9e504b4b72a4681d4b55340721552334df6c5", "committedDate": "2020-08-04T23:16:35Z", "message": "Fix failing NodesDnApiTest#testNodesDnApi\n\n(cherry picked from commit d25812bfcfb6a62d7c42555e223da10068e6b284)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4318f8b12e73440f65bad2b7ec691f115b7d50c2", "author": {"user": {"login": "debjanibnrj", "name": "Debjani Banerjee"}}, "url": "https://github.com/opensearch-project/security/commit/4318f8b12e73440f65bad2b7ec691f115b7d50c2", "committedDate": "2020-08-04T23:17:22Z", "message": "Removing hidden/reserved roles added via rolesmapping\n\nEarlier the InternalUsers API was filtering out all hidden/reserved roles. We will just restrict it to hidden/reserved roles associated via rolesmapping. This will ensure behaviour of rolesmapping and internalusers API is the same.\n\n(cherry picked from commit 4a6ed34b8788260403fe09ccd40c0d96136428d2)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b0c583ffa6a8a305216a770d748021639173849", "author": {"user": {"login": "palashhedau", "name": "Palash Hedau"}}, "url": "https://github.com/opensearch-project/security/commit/7b0c583ffa6a8a305216a770d748021639173849", "committedDate": "2020-08-04T23:27:32Z", "message": "Added kibana attribute to security config which will be used by tenantinfo api. (#514)\n\nAdded test cases\n\nCo-authored-by: Palash Hedau <phhedau@amazon.com>\n\n(cherry picked from commit 72ce765f0a767d609ad392c35bd8e72f3c03dd41)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e4fd064856a769074f63a9d075a19997f734afa", "author": {"user": {"login": "debjanibnrj", "name": "Debjani Banerjee"}}, "url": "https://github.com/opensearch-project/security/commit/1e4fd064856a769074f63a9d075a19997f734afa", "committedDate": "2020-08-04T23:31:32Z", "message": "Prevent hidden roles from being added via rolesmapping and internalusers API\n\n(cherry picked from commit 480ef0b02e736a0b605088e8a8d8510635e04423)"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": null, "afterCommit": {"oid": "1e4fd064856a769074f63a9d075a19997f734afa", "author": {"user": {"login": "debjanibnrj", "name": "Debjani Banerjee"}}, "url": "https://github.com/opensearch-project/security/commit/1e4fd064856a769074f63a9d075a19997f734afa", "committedDate": "2020-08-04T23:31:32Z", "message": "Prevent hidden roles from being added via rolesmapping and internalusers API\n\n(cherry picked from commit 480ef0b02e736a0b605088e8a8d8510635e04423)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxODMxNjA0", "url": "https://github.com/opensearch-project/security/pull/620#pullrequestreview-461831604", "createdAt": "2020-08-05T16:30:54Z", "commit": {"oid": "1e4fd064856a769074f63a9d075a19997f734afa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxODQ3NDYw", "url": "https://github.com/opensearch-project/security/pull/620#pullrequestreview-461847460", "createdAt": "2020-08-05T16:51:00Z", "commit": {"oid": "1e4fd064856a769074f63a9d075a19997f734afa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2847, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}