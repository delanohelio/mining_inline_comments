{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4NzIxOTE1", "number": 836, "title": "Security configuration for reporting and notification plugins", "bodyText": "Issue #, if available:\nDescription of changes:\nAdded system index configuration for reporting and notification plugin\nAdded default roles configuration required for reporting functionality\nUpdated demo config and example with above system index configurations\nBy submitting this pull request, I confirm that you can use, modify, copy, and redistribute this contribution, under the terms of your choice.", "createdAt": "2020-11-10T19:42:00Z", "url": "https://github.com/opensearch-project/security/pull/836", "merged": true, "mergeCommit": {"oid": "ddcda4372f29b5901494930f4a6ac61bf7eb7b54"}, "closed": true, "closedAt": "2020-11-17T05:24:18Z", "author": {"login": "akbhatta"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbPt9bAFqTUyNzU5NjAxMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABddQ7ZkAFqTUzMTk5NTAzMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NTk2MDEy", "url": "https://github.com/opensearch-project/security/pull/836#pullrequestreview-527596012", "createdAt": "2020-11-10T20:50:20Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMDo1MDoyMFrOHwvGhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMDo1MDoyMFrOHwvGhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDg2NTQxNQ==", "bodyText": "Why kibana_server role needs this permission?", "url": "https://github.com/opensearch-project/security/pull/836#discussion_r520865415", "createdAt": "2020-11-10T20:50:20Z", "author": {"login": "hardik-k-shah"}, "path": "src/main/resources/static_config/static_roles.yml", "diffHunk": "@@ -85,6 +85,8 @@ kibana_server:\n   - \"cluster:admin/xpack/monitoring*\"\n   - \"indices:admin/template*\"\n   - \"indices:data/read/scroll*\"\n+  - 'cluster:admin/opendistro/reports/*'", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3Njc5MzQw", "url": "https://github.com/opensearch-project/security/pull/836#pullrequestreview-527679340", "createdAt": "2020-11-10T23:05:47Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMzowNTo0N1rOHwzGQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMzowNTo0N1rOHwzGQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkzMDg4MA==", "bodyText": "This is example, but curious why you want to add reports to protected_indices?", "url": "https://github.com/opensearch-project/security/pull/836#discussion_r520930880", "createdAt": "2020-11-10T23:05:47Z", "author": {"login": "skkosuri-amzn"}, "path": "securityconfig/elasticsearch.yml.example", "diffHunk": "@@ -215,11 +215,11 @@ opendistro_security.audit.type: internal_elasticsearch\n # Specify a list of roles a user must be member of to touch any protected index.\n # opendistro_security.protected_indices.roles: ['all_access']\n # Specify a list of indices to mark as protected. These indices will only be visible / mutable by members of the above setting, in addition to needing permission to the index via a normal role.\n-# opendistro_security.protected_indices.indices: ['.opendistro-alerting-config', '.opendistro-ism-*']\n+# opendistro_security.protected_indices.indices: ['.opendistro-alerting-config', '.opendistro-ism-*', '.opendistro-reports-*', '.opendistro-notifications-*']", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NjgwNDY4", "url": "https://github.com/opensearch-project/security/pull/836#pullrequestreview-527680468", "createdAt": "2020-11-10T23:08:04Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMzowODowNFrOHwzJow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMzowODowNFrOHwzJow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkzMTc0Nw==", "bodyText": "What the difference betweenget and get_all ? Why we have to two API?", "url": "https://github.com/opensearch-project/security/pull/836#discussion_r520931747", "createdAt": "2020-11-10T23:08:04Z", "author": {"login": "skkosuri-amzn"}, "path": "securityconfig/roles.yml", "diffHunk": "@@ -61,3 +61,35 @@ anomaly_full_access:\n         - 'indices_monitor'\n         - 'indices:admin/aliases/get'\n         - 'indices:admin/mappings/get'\n+\n+# Allows users to read and download Reports\n+reports_instances_read_access:\n+  reserved: true\n+  cluster_permissions:\n+    - 'cluster:admin/opendistro/reports/instance/get_all'\n+    - 'cluster:admin/opendistro/reports/instance/get'", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NjgxMDMw", "url": "https://github.com/opensearch-project/security/pull/836#pullrequestreview-527681030", "createdAt": "2020-11-10T23:09:15Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMzowOToxNlrOHwzLXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMFQyMzowOToxNlrOHwzLXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDkzMjE5MA==", "bodyText": "What the difference between get and get_all ? Why we have to two API?", "url": "https://github.com/opensearch-project/security/pull/836#discussion_r520932190", "createdAt": "2020-11-10T23:09:16Z", "author": {"login": "skkosuri-amzn"}, "path": "securityconfig/roles.yml", "diffHunk": "@@ -61,3 +61,35 @@ anomaly_full_access:\n         - 'indices_monitor'\n         - 'indices:admin/aliases/get'\n         - 'indices:admin/mappings/get'\n+\n+# Allows users to read and download Reports\n+reports_instances_read_access:\n+  reserved: true\n+  cluster_permissions:\n+    - 'cluster:admin/opendistro/reports/instance/get_all'\n+    - 'cluster:admin/opendistro/reports/instance/get'\n+    - 'cluster:admin/opendistro/reports/menu/download'\n+\n+# Allows users to read and download Reports and Report-definitions\n+reports_read_access:\n+  reserved: true\n+  cluster_permissions:\n+    - 'cluster:admin/opendistro/reports/definition/get'\n+    - 'cluster:admin/opendistro/reports/definition/get_all'\n+    - 'cluster:admin/opendistro/reports/instance/get_all'\n+    - 'cluster:admin/opendistro/reports/instance/get'", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NzEwMTU2", "url": "https://github.com/opensearch-project/security/pull/836#pullrequestreview-527710156", "createdAt": "2020-11-11T00:17:14Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwMDoxNzoxNFrOHw0rHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwMDoxNzoxNFrOHw0rHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDk1NjcwMw==", "bodyText": "Can you describe each of these permissions?", "url": "https://github.com/opensearch-project/security/pull/836#discussion_r520956703", "createdAt": "2020-11-11T00:17:14Z", "author": {"login": "hardik-k-shah"}, "path": "src/main/resources/static_config/static_roles.yml", "diffHunk": "@@ -83,6 +83,10 @@ kibana_server:\n   - \"cluster_monitor\"\n   - \"cluster_composite_ops\"\n   - \"cluster:admin/xpack/monitoring*\"\n+  - \"cluster:admin/opendistro/reports/instance/poll\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NzkyOTQ5", "url": "https://github.com/opensearch-project/security/pull/836#pullrequestreview-527792949", "createdAt": "2020-11-11T02:08:28Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwMjowODoyOVrOHw4sAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwMjowODoyOVrOHw4sAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTAyMjQ2Nw==", "bodyText": "Whats the difference between instance list and get?", "url": "https://github.com/opensearch-project/security/pull/836#discussion_r521022467", "createdAt": "2020-11-11T02:08:29Z", "author": {"login": "skkosuri-amzn"}, "path": "securityconfig/roles.yml", "diffHunk": "@@ -61,3 +61,35 @@ anomaly_full_access:\n         - 'indices_monitor'\n         - 'indices:admin/aliases/get'\n         - 'indices:admin/mappings/get'\n+\n+# Allows users to read and download Reports\n+reports_instances_read_access:\n+  reserved: true\n+  cluster_permissions:\n+    - 'cluster:admin/opendistro/reports/instance/list'", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3NzkzMjE4", "url": "https://github.com/opensearch-project/security/pull/836#pullrequestreview-527793218", "createdAt": "2020-11-11T02:09:14Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwMjowOToxNFrOHw4uPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwMjowOToxNFrOHw4uPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTAyMzAzNw==", "bodyText": "similar,  definition get vs list?", "url": "https://github.com/opensearch-project/security/pull/836#discussion_r521023037", "createdAt": "2020-11-11T02:09:14Z", "author": {"login": "skkosuri-amzn"}, "path": "securityconfig/roles.yml", "diffHunk": "@@ -61,3 +61,35 @@ anomaly_full_access:\n         - 'indices_monitor'\n         - 'indices:admin/aliases/get'\n         - 'indices:admin/mappings/get'\n+\n+# Allows users to read and download Reports\n+reports_instances_read_access:\n+  reserved: true\n+  cluster_permissions:\n+    - 'cluster:admin/opendistro/reports/instance/list'\n+    - 'cluster:admin/opendistro/reports/instance/get'\n+    - 'cluster:admin/opendistro/reports/menu/download'\n+\n+# Allows users to read and download Reports and Report-definitions\n+reports_read_access:\n+  reserved: true\n+  cluster_permissions:\n+    - 'cluster:admin/opendistro/reports/definition/get'\n+    - 'cluster:admin/opendistro/reports/definition/list'", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI3Nzk0MzUw", "url": "https://github.com/opensearch-project/security/pull/836#pullrequestreview-527794350", "createdAt": "2020-11-11T02:12:30Z", "commit": null, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwMjoxMjozMFrOHw42NQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMVQwMjoxMjozMFrOHw42NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTAyNTA3Nw==", "bodyText": "Curious, why did you separate create and update?", "url": "https://github.com/opensearch-project/security/pull/836#discussion_r521025077", "createdAt": "2020-11-11T02:12:30Z", "author": {"login": "skkosuri-amzn"}, "path": "securityconfig/roles.yml", "diffHunk": "@@ -61,3 +61,35 @@ anomaly_full_access:\n         - 'indices_monitor'\n         - 'indices:admin/aliases/get'\n         - 'indices:admin/mappings/get'\n+\n+# Allows users to read and download Reports\n+reports_instances_read_access:\n+  reserved: true\n+  cluster_permissions:\n+    - 'cluster:admin/opendistro/reports/instance/list'\n+    - 'cluster:admin/opendistro/reports/instance/get'\n+    - 'cluster:admin/opendistro/reports/menu/download'\n+\n+# Allows users to read and download Reports and Report-definitions\n+reports_read_access:\n+  reserved: true\n+  cluster_permissions:\n+    - 'cluster:admin/opendistro/reports/definition/get'\n+    - 'cluster:admin/opendistro/reports/definition/list'\n+    - 'cluster:admin/opendistro/reports/instance/list'\n+    - 'cluster:admin/opendistro/reports/instance/get'\n+    - 'cluster:admin/opendistro/reports/menu/download'\n+\n+# Allows users to all Reports functionality\n+reports_full_access:\n+  reserved: true\n+  cluster_permissions:\n+    - 'cluster:admin/opendistro/reports/definition/create'\n+    - 'cluster:admin/opendistro/reports/definition/update'", "state": "SUBMITTED", "replyTo": null, "originalCommit": null, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ca6240fc595ebe68199d1b976fc1c7e362c5616", "author": {"user": {"login": "akbhatta", "name": "Anantha Krishna Bhatta"}}, "url": "https://github.com/opensearch-project/security/commit/9ca6240fc595ebe68199d1b976fc1c7e362c5616", "committedDate": "2020-11-13T01:52:19Z", "message": "Security configuration for reporting and notification plugins\n\nChanges:\nAdded system index configuration for reporting and notification plugin\nAdded default roles configuration required for reporting functionality\nUpdated demo config and example with above system index configurations"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxOTIwNzMy", "url": "https://github.com/opensearch-project/security/pull/836#pullrequestreview-531920732", "createdAt": "2020-11-17T00:05:23Z", "commit": {"oid": "9ca6240fc595ebe68199d1b976fc1c7e362c5616"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxOTk1MDMx", "url": "https://github.com/opensearch-project/security/pull/836#pullrequestreview-531995031", "createdAt": "2020-11-17T03:24:24Z", "commit": {"oid": "9ca6240fc595ebe68199d1b976fc1c7e362c5616"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2660, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}