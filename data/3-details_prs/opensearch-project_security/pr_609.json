{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU5NzY1OTQ1", "number": 609, "title": "Refactor opendistro_security_action_trace logger", "bodyText": "Issue #, if available:\nDescription of changes: Encapsulate logic of opendistro_security_action_trace Logger\nBy submitting this pull request, I confirm that you can use, modify, copy, and redistribute this contribution, under the terms of your choice.", "createdAt": "2020-07-31T04:14:36Z", "url": "https://github.com/opensearch-project/security/pull/609", "merged": true, "mergeCommit": {"oid": "7bc3e0d21d9020dddd4ae32322a92aaa91c6f0c5"}, "closed": true, "closedAt": "2020-08-10T14:59:48Z", "author": {"login": "vrozov"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc6MLRqAH2gAyNDU5NzY1OTQ1OmM2MGRmZjRlYTFkZGYzZTA5NDQwZWE4MDJhOTE4ZDExZjVmMDUwNDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8o2_GAFqTQ2MzUyNDU2NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c60dff4ea1ddf3e09440ea802a918d11f5f05040", "author": {"user": {"login": "vrozov", "name": "Vlad Rozov"}}, "url": "https://github.com/opensearch-project/security/commit/c60dff4ea1ddf3e09440ea802a918d11f5f05040", "committedDate": "2020-07-31T04:04:52Z", "message": "Refactor opendistro_security_action_trace logger"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4OTMzNTA2", "url": "https://github.com/opensearch-project/security/pull/609#pullrequestreview-458933506", "createdAt": "2020-07-31T05:59:25Z", "commit": {"oid": "c60dff4ea1ddf3e09440ea802a918d11f5f05040"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQwNTo1OToyNVrOG586qA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQwNTo1OToyNVrOG586qA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzQyMDA3Mg==", "bodyText": "Should you check here if trace is enabled ?", "url": "https://github.com/opensearch-project/security/pull/609#discussion_r463420072", "createdAt": "2020-07-31T05:59:25Z", "author": {"login": "dinusX"}, "path": "src/main/java/com/amazon/opendistroforelasticsearch/security/privileges/PrivilegesEvaluator.java", "diffHunk": "@@ -526,8 +527,8 @@ public String kibanaOpendistroRole() {\n             additionalPermissionsRequired.addAll(ConfigConstants.OPENDISTRO_SECURITY_SNAPSHOT_RESTORE_NEEDED_WRITE_PRIVILEGES);\n         }\n \n-        if(actionTrace.isTraceEnabled() && additionalPermissionsRequired.size() > 1) {\n-            actionTrace.trace((\"Additional permissions required: \"+additionalPermissionsRequired));\n+        if (additionalPermissionsRequired.size() > 1) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c60dff4ea1ddf3e09440ea802a918d11f5f05040"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5Mzk4ODQy", "url": "https://github.com/opensearch-project/security/pull/609#pullrequestreview-459398842", "createdAt": "2020-07-31T19:07:37Z", "commit": {"oid": "c60dff4ea1ddf3e09440ea802a918d11f5f05040"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMjc4NTE5", "url": "https://github.com/opensearch-project/security/pull/609#pullrequestreview-460278519", "createdAt": "2020-08-03T19:16:47Z", "commit": {"oid": "c60dff4ea1ddf3e09440ea802a918d11f5f05040"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxOToxNjo0N1rOG7Fq4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QxOToxNjo0N1rOG7Fq4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDYxMjA2Nw==", "bodyText": "Why not move to a separate class to fully encapsulate the logic ?", "url": "https://github.com/opensearch-project/security/pull/609#discussion_r464612067", "createdAt": "2020-08-03T19:16:47Z", "author": {"login": "sujithvm"}, "path": "src/main/java/com/amazon/opendistroforelasticsearch/security/OpenDistroSecurityPlugin.java", "diffHunk": "@@ -189,6 +194,18 @@\n     private volatile DlsFlsRequestValve dlsFlsValve = null;\n     private volatile Salt salt;\n \n+    public static boolean isActionTraceEnabled() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c60dff4ea1ddf3e09440ea802a918d11f5f05040"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYzNTI0NTY0", "url": "https://github.com/opensearch-project/security/pull/609#pullrequestreview-463524564", "createdAt": "2020-08-07T18:37:48Z", "commit": {"oid": "c60dff4ea1ddf3e09440ea802a918d11f5f05040"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2841, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}