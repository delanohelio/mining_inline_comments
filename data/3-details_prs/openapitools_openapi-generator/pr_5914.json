{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyNzIxMDEy", "number": 5914, "title": "[Go] Interface definitions for api functions", "bodyText": "Add golang interface definitions for api functions\n\nFix #2294 with code suggested by @partkyle\n\n\nAdd new go generator option generateInterfaces, defaulted to false.\nSlight updates to method comments in api.mustache to prettify and align better.\nUpdate go-petstore, go-petstore-withXml, and openapi3-go-petstore samples.\nVerified that the following pass:\n\nmvn clean install\nmvn -Pstatic-analysis clean install\nmvn integration-test -rf :GoPetstore in samples/client/petstore/go, both for the default go-petstore sample generation, and when generated with generateInterfaces=true.\n\n\n\nQuestions I had:\n\nI see that go-petstore-withXml has withGoCodegenComment=true as an additional option, so it looked like that might be where alternate options were being tested, so I've added generateInterfaces=true to those samples. Let me know if that should get reverted.\nIt looks like the mustache template for the go-experimental generator differs fairly significantly from the go generator, and it's not clear if I should also update go-experimental templates/samples as well.\n\n\nPR checklist\n\n Read the contribution guidelines.\n If contributing template-only or documentation-only changes which will change sample output, build the project before.\n Run the shell script(s) under ./bin/ (or Windows batch scripts under.\\bin\\windows) to update Petstore samples related to your fix. This is important, as CI jobs will verify all generator outputs of your HEAD commit, and these must match the expectations made by your contribution. You only need to run ./bin/{LANG}-petstore.sh, ./bin/openapi3/{LANG}-petstore.sh if updating the code or mustache templates for a language ({LANG}) (e.g. php, ruby, python, etc).\n File the PR against the correct branch: master, 4.3.x, 5.0.x. Default: master.\n Copy the technical committee to review the pull request if your PR is targeting a particular programming language.\n\ncc go technical committee: @antihax @bvwells @grokify @kemokemo @bkabrda", "createdAt": "2020-04-13T16:24:12Z", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5914", "merged": true, "mergeCommit": {"oid": "ab5b0fa8d41beede1dca1b444fe806be0151e3f4"}, "closed": true, "closedAt": "2020-09-01T01:43:41Z", "author": {"login": "arvindth"}, "timelineItems": {"totalCount": 42, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcXRjh2ABqjMyMjc2ODk4NDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdEdQwggFqTQ3OTI5NDU4Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e6538d342b5d3de5a462298238d995793eb506f2", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/e6538d342b5d3de5a462298238d995793eb506f2", "committedDate": "2020-04-13T16:10:10Z", "message": "Update go-petstore-withxml with new generateInterfaces option\n\n  * Verified that integration tests pass when using the interface methods"}, "afterCommit": {"oid": "70c24e1a258f2c17896718a13426d2531a989b75", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/70c24e1a258f2c17896718a13426d2531a989b75", "committedDate": "2020-04-13T16:33:15Z", "message": "Update go-petstore-withxml with new generateInterfaces option"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyMjc5MDM5", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5914#pullrequestreview-392279039", "createdAt": "2020-04-13T17:00:13Z", "commit": {"oid": "70c24e1a258f2c17896718a13426d2531a989b75"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QxNzowMDoxM1rOGEtOoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QxNzowMDoxM1rOGEtOoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzU4ODUxMg==", "bodyText": "I didn't see any reason this repeated the setWithXml from the previous line, so I think this was a bug.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5914#discussion_r407588512", "createdAt": "2020-04-13T17:00:13Z", "author": {"login": "arvindth"}, "path": "modules/openapi-generator/src/test/java/org/openapitools/codegen/go/GoClientOptionsTest.java", "diffHunk": "@@ -45,10 +45,11 @@ protected void verifyOptions() {\n         verify(clientCodegen).setPackageName(GoClientOptionsProvider.PACKAGE_NAME_VALUE);\n         verify(clientCodegen).setWithGoCodegenComment(GoClientOptionsProvider.WITH_GO_CODEGEN_COMMENT_VALUE);\n         verify(clientCodegen).setWithXml(GoClientOptionsProvider.WITH_XML_VALUE);\n-        verify(clientCodegen).setWithXml(GoClientOptionsProvider.ENUM_CLASS_PREFIX_VALUE);\n+        verify(clientCodegen).setEnumClassPrefix(GoClientOptionsProvider.ENUM_CLASS_PREFIX_VALUE);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "70c24e1a258f2c17896718a13426d2531a989b75"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "70c24e1a258f2c17896718a13426d2531a989b75", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/70c24e1a258f2c17896718a13426d2531a989b75", "committedDate": "2020-04-13T16:33:15Z", "message": "Update go-petstore-withxml with new generateInterfaces option"}, "afterCommit": {"oid": "90d444725c773b2901e84461cba77231c2486595", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/90d444725c773b2901e84461cba77231c2486595", "committedDate": "2020-04-19T17:45:45Z", "message": "Update go-petstore-withxml with new generateInterfaces option"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7742c44f3e48c3b6cb98ffb989c487f2539c6f8b", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/7742c44f3e48c3b6cb98ffb989c487f2539c6f8b", "committedDate": "2020-05-13T00:16:25Z", "message": "Add new generateInterfaces option for go-experimental\n\n  * Samples now contain interfaces, using backward incompatible method\n    signatures.\n  * Add one test for mocked methods"}, "afterCommit": {"oid": "c2ce01233473aa8c092b12c9478116beeba88fc7", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/c2ce01233473aa8c092b12c9478116beeba88fc7", "committedDate": "2020-05-14T00:16:06Z", "message": "Add new generateInterfaces option for go-experimental\n\n  * Samples now contain interfaces, using backward incompatible method\n    signatures.\n  * Add one test for mocked methods"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c2ce01233473aa8c092b12c9478116beeba88fc7", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/c2ce01233473aa8c092b12c9478116beeba88fc7", "committedDate": "2020-05-14T00:16:06Z", "message": "Add new generateInterfaces option for go-experimental\n\n  * Samples now contain interfaces, using backward incompatible method\n    signatures.\n  * Add one test for mocked methods"}, "afterCommit": {"oid": "d7586b9c2c0156de575a5345aa7a58916b7b4597", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/d7586b9c2c0156de575a5345aa7a58916b7b4597", "committedDate": "2020-05-14T19:55:13Z", "message": "Add new generateInterfaces option for go-experimental samples\n\n  * Samples now contain interfaces, using backward incompatible method\n    signatures.\n  * Add one test for mocked methods"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d7586b9c2c0156de575a5345aa7a58916b7b4597", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/d7586b9c2c0156de575a5345aa7a58916b7b4597", "committedDate": "2020-05-14T19:55:13Z", "message": "Add new generateInterfaces option for go-experimental samples\n\n  * Samples now contain interfaces, using backward incompatible method\n    signatures.\n  * Add one test for mocked methods"}, "afterCommit": {"oid": "04b8a8228c47d8bf7e4023da09f8a0b0b075600d", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/04b8a8228c47d8bf7e4023da09f8a0b0b075600d", "committedDate": "2020-05-14T21:09:32Z", "message": "Add new generateInterfaces option for go-experimental samples\n\n  * Samples now contain interfaces, using backward incompatible method\n    signatures.\n  * Add one test for mocked methods"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "04b8a8228c47d8bf7e4023da09f8a0b0b075600d", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/04b8a8228c47d8bf7e4023da09f8a0b0b075600d", "committedDate": "2020-05-14T21:09:32Z", "message": "Add new generateInterfaces option for go-experimental samples\n\n  * Samples now contain interfaces, using backward incompatible method\n    signatures.\n  * Add one test for mocked methods"}, "afterCommit": {"oid": "230f5d083ea922d1bf5afe0f600a10112b333b4d", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/230f5d083ea922d1bf5afe0f600a10112b333b4d", "committedDate": "2020-05-15T12:27:09Z", "message": "Add new generateInterfaces option for go-experimental samples\n\n  * Samples now contain interfaces, using backward incompatible method\n    signatures.\n  * Add one test for mocked methods"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "230f5d083ea922d1bf5afe0f600a10112b333b4d", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/230f5d083ea922d1bf5afe0f600a10112b333b4d", "committedDate": "2020-05-15T12:27:09Z", "message": "Add new generateInterfaces option for go-experimental samples\n\n  * Samples now contain interfaces, using backward incompatible method\n    signatures.\n  * Add one test for mocked methods"}, "afterCommit": {"oid": "248301516fc65224855ba7510a1fbb793ca14f9f", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/248301516fc65224855ba7510a1fbb793ca14f9f", "committedDate": "2020-05-15T12:29:43Z", "message": "Add new generateInterfaces option for go-experimental samples\n\n  * Samples now contain interfaces, using backward incompatible method\n    signatures.\n  * Add one test for mocked methods"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c4b310facc5928a366b5bc96114abb59a408f31c", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/c4b310facc5928a366b5bc96114abb59a408f31c", "committedDate": "2020-05-15T17:19:06Z", "message": "debug bin/go-experimental-petstore.sh failure"}, "afterCommit": {"oid": "b56472ef2a5de60f0d84b29adcf6b45cdf6c6b4b", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/b56472ef2a5de60f0d84b29adcf6b45cdf6c6b4b", "committedDate": "2020-05-16T13:24:15Z", "message": "bin/go-experimental-petstore.sh fixes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b56472ef2a5de60f0d84b29adcf6b45cdf6c6b4b", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/b56472ef2a5de60f0d84b29adcf6b45cdf6c6b4b", "committedDate": "2020-05-16T13:24:15Z", "message": "bin/go-experimental-petstore.sh fixes"}, "afterCommit": {"oid": "6c2cf187ceaa6dc46cfb96a826b806166b2cfc0d", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/6c2cf187ceaa6dc46cfb96a826b806166b2cfc0d", "committedDate": "2020-05-16T14:35:04Z", "message": "debug ensure-up-to-date"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6c2cf187ceaa6dc46cfb96a826b806166b2cfc0d", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/6c2cf187ceaa6dc46cfb96a826b806166b2cfc0d", "committedDate": "2020-05-16T14:35:04Z", "message": "debug ensure-up-to-date"}, "afterCommit": {"oid": "769c53500c017dd0fc0bdcf5c3b6004c7a714d3b", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/769c53500c017dd0fc0bdcf5c3b6004c7a714d3b", "committedDate": "2020-05-16T14:42:54Z", "message": "debug ensure-up-to-date"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6fe23b224ec4966ccef72629d0064c0765f4daf3", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/6fe23b224ec4966ccef72629d0064c0765f4daf3", "committedDate": "2020-05-17T01:42:26Z", "message": "more debug4, use latest mockgen"}, "afterCommit": {"oid": "b1f203ca22b4fb991e49578006e5d61eeb32beff", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/b1f203ca22b4fb991e49578006e5d61eeb32beff", "committedDate": "2020-05-17T02:09:55Z", "message": "more debug4, use latest mockgen"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0db74165ec411af79d660866eff6b0cdf836c415", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/0db74165ec411af79d660866eff6b0cdf836c415", "committedDate": "2020-05-17T04:10:10Z", "message": "more debug5, use latest mockgen w/o version"}, "afterCommit": {"oid": "09886ce02f018e6b5fa77e668ddb7c903676e9b5", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/09886ce02f018e6b5fa77e668ddb7c903676e9b5", "committedDate": "2020-05-17T04:18:27Z", "message": "more debug5, use latest mockgen w/o version"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "09886ce02f018e6b5fa77e668ddb7c903676e9b5", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/09886ce02f018e6b5fa77e668ddb7c903676e9b5", "committedDate": "2020-05-17T04:18:27Z", "message": "more debug5, use latest mockgen w/o version"}, "afterCommit": {"oid": "f88bd86be0530e74581acd10daa4490de61e9550", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/f88bd86be0530e74581acd10daa4490de61e9550", "committedDate": "2020-05-17T04:19:03Z", "message": "more debug5, use latest mockgen w/o version"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f88bd86be0530e74581acd10daa4490de61e9550", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/f88bd86be0530e74581acd10daa4490de61e9550", "committedDate": "2020-05-17T04:19:03Z", "message": "more debug5, use latest mockgen w/o version"}, "afterCommit": {"oid": "e54c569f1c1dd91e60e42d05905ebbd858e334e7", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/e54c569f1c1dd91e60e42d05905ebbd858e334e7", "committedDate": "2020-05-17T05:02:42Z", "message": "more debug5, use various go get mockgens"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "87759957dbb18f48ab12020eb7b5104e2860de61", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/87759957dbb18f48ab12020eb7b5104e2860de61", "committedDate": "2020-05-17T11:23:12Z", "message": "Update to newer go for circleci"}, "afterCommit": {"oid": "31e3721b08b9b8c2332f8a1dba9c9401521b92e5", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/31e3721b08b9b8c2332f8a1dba9c9401521b92e5", "committedDate": "2020-05-17T14:59:17Z", "message": "debug6 need to move this to the bin script"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "31e3721b08b9b8c2332f8a1dba9c9401521b92e5", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/31e3721b08b9b8c2332f8a1dba9c9401521b92e5", "committedDate": "2020-05-17T14:59:17Z", "message": "debug6 need to move this to the bin script"}, "afterCommit": {"oid": "078580e22df827b671f527a66363580695f0d4f7", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/078580e22df827b671f527a66363580695f0d4f7", "committedDate": "2020-05-17T15:06:50Z", "message": "debug6 need to move this to the bin script"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "078580e22df827b671f527a66363580695f0d4f7", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/078580e22df827b671f527a66363580695f0d4f7", "committedDate": "2020-05-17T15:06:50Z", "message": "debug6 need to move this to the bin script"}, "afterCommit": {"oid": "7e868a4936369d79ac92b0a1240e185cc4261150", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/7e868a4936369d79ac92b0a1240e185cc4261150", "committedDate": "2020-05-17T15:11:34Z", "message": "debug6 need to move this to the bin script"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "018af21180d09f5f98dd5b12174cea1749ed3178", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/018af21180d09f5f98dd5b12174cea1749ed3178", "committedDate": "2020-05-17T20:40:07Z", "message": "Remove debugging"}, "afterCommit": {"oid": "4769d9683c87575978e2e7fe149e0f639ef6ea8e", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/4769d9683c87575978e2e7fe149e0f639ef6ea8e", "committedDate": "2020-05-17T22:46:53Z", "message": "Enable generateInterfaces for go-experimental samples\n\n  * Samples now contain interfaces, using backward incompatible method\n    signatures.\n  * Add one test for mocked methods\n  * Switch to go 1.14 for circleci to allow generating mocks"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5NTc4OTc5", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5914#pullrequestreview-459578979", "createdAt": "2020-08-01T13:43:13Z", "commit": {"oid": "4769d9683c87575978e2e7fe149e0f639ef6ea8e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMVQxMzo0MzoxM1rOG6eE8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMVQxMzo0NDoxOVrOG6eFZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk2MzM3OA==", "bodyText": "Why is all this necessary?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5914#discussion_r463963378", "createdAt": "2020-08-01T13:43:13Z", "author": {"login": "jimschubert"}, "path": "CI/circle_parallel.sh", "diffHunk": "@@ -33,6 +33,12 @@ elif [ \"$NODE_INDEX\" = \"2\" ]; then\n   if [[ $project_version == *\"-SNAPSHOT\" ]]; then\n     echo \"Running node $NODE_INDEX to test ensure-up-to-date\"\n     java -version\n+    # Install golang version 1.14\n+    go version\n+    sudo mkdir /usr/local/go1.14\n+    wget -c https://dl.google.com/go/go1.14.linux-amd64.tar.gz -O - | sudo tar -xz -C /usr/local/go1.14", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4769d9683c87575978e2e7fe149e0f639ef6ea8e"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk2MzQ5NQ==", "bodyText": "This does not belong in the generation script.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5914#discussion_r463963495", "createdAt": "2020-08-01T13:44:19Z", "author": {"login": "jimschubert"}, "path": "bin/go-experimental-petstore.sh", "diffHunk": "@@ -34,6 +34,17 @@ rm -rf $STUB_DIR\n \n # if you've executed sbt assembly previously it will use that instead.\n export JAVA_OPTS=\"${JAVA_OPTS} -Xmx1024M -DloggerPath=conf/log4j.properties\"\n-ags=\"generate -t modules/openapi-generator/src/main/resources/$GENERATOR -i $SPEC -g $GENERATOR -o $STUB_DIR --additional-properties packageName=petstore $@\"\n+ags=\"generate -t modules/openapi-generator/src/main/resources/$GENERATOR -i $SPEC -g $GENERATOR -o $STUB_DIR --additional-properties packageName=petstore,generateInterfaces=true $@\"\n \n java $JAVA_OPTS -jar $executable $ags\n+\n+# Generate mocks for testing the samples\n+cd samples/client/petstore/go-experimental/go-petstore/\n+echo \"which go = $(which go)\"\n+go version\n+gopath=$(go env GOPATH)\n+GO111MODULE=on go get github.com/golang/mock/mockgen@v1.4.3\n+mockgencmd=\"${gopath%%:*}/bin/mockgen -source=api_pet.go -destination=mock_api_pet.go -package petstore\"\n+echo \"Running $mockgencmd\"\n+$mockgencmd\n+cd -", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4769d9683c87575978e2e7fe149e0f639ef6ea8e"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxNzcyNDI0", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5914#pullrequestreview-461772424", "createdAt": "2020-08-05T15:23:07Z", "commit": {"oid": "4769d9683c87575978e2e7fe149e0f639ef6ea8e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxNToyMzowOFrOG8OsOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNVQxNToyMzowOFrOG8OsOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTgwODQ0MA==", "bodyText": "Yeah, I deliberately put this in the last commit as a POC to showcase the usage of the mocks in the test. I can definitely take it out.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5914#discussion_r465808440", "createdAt": "2020-08-05T15:23:08Z", "author": {"login": "arvindth"}, "path": "CI/circle_parallel.sh", "diffHunk": "@@ -33,6 +33,12 @@ elif [ \"$NODE_INDEX\" = \"2\" ]; then\n   if [[ $project_version == *\"-SNAPSHOT\" ]]; then\n     echo \"Running node $NODE_INDEX to test ensure-up-to-date\"\n     java -version\n+    # Install golang version 1.14\n+    go version\n+    sudo mkdir /usr/local/go1.14\n+    wget -c https://dl.google.com/go/go1.14.linux-amd64.tar.gz -O - | sudo tar -xz -C /usr/local/go1.14", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk2MzM3OA=="}, "originalCommit": {"oid": "4769d9683c87575978e2e7fe149e0f639ef6ea8e"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf0968bbaf0ee412e5a55a6b866b4b43cd339568", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/bf0968bbaf0ee412e5a55a6b866b4b43cd339568", "committedDate": "2020-08-22T20:20:43Z", "message": "[Go]: Interface definitions for api functions\n\n * Fix #2294 with code suggested by @partkyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3454a3a6178da2ced3fb53baafaa68d2c35a1d7", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/a3454a3a6178da2ced3fb53baafaa68d2c35a1d7", "committedDate": "2020-08-22T20:20:43Z", "message": "Use interface in client struct"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b50c28ca5fb336ad1587e53b481f0455389bb41", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/1b50c28ca5fb336ad1587e53b481f0455389bb41", "committedDate": "2020-08-22T20:20:44Z", "message": "Fixups to align with current master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a06ed942f9d15ba7b1369c9f02d468877f925bb2", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/a06ed942f9d15ba7b1369c9f02d468877f925bb2", "committedDate": "2020-08-22T20:20:44Z", "message": "Replace classname with method name in method comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5abc28e28f5d0b4d1a3be3f47f8f47b81725406", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/b5abc28e28f5d0b4d1a3be3f47f8f47b81725406", "committedDate": "2020-08-22T20:20:44Z", "message": "Make method comments a bit prettier"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7bca6e019c9affab2af4ec776f645f0771c91ca7", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/7bca6e019c9affab2af4ec776f645f0771c91ca7", "committedDate": "2020-08-22T20:20:45Z", "message": "Add commandline option to enable generateInterfaces"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9822d5cf4a42b4f1a4f8735a96f0928e21331bc2", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/9822d5cf4a42b4f1a4f8735a96f0928e21331bc2", "committedDate": "2020-08-22T20:20:45Z", "message": "Update go-petstore & oa3/go-petstore samples with prettier comments\n\n  - Use default generateInterfaces=false to suppress interfaces"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4769d9683c87575978e2e7fe149e0f639ef6ea8e", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/4769d9683c87575978e2e7fe149e0f639ef6ea8e", "committedDate": "2020-05-17T22:46:53Z", "message": "Enable generateInterfaces for go-experimental samples\n\n  * Samples now contain interfaces, using backward incompatible method\n    signatures.\n  * Add one test for mocked methods\n  * Switch to go 1.14 for circleci to allow generating mocks"}, "afterCommit": {"oid": "8f1f4085832cd2686dd95320b862a1be4232750b", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/8f1f4085832cd2686dd95320b862a1be4232750b", "committedDate": "2020-08-23T13:11:37Z", "message": "Regenerate go-experimental/oas2 samples w/o interfaces"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9653a67cefe2228f66f8830f87b02e5610989c53", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/9653a67cefe2228f66f8830f87b02e5610989c53", "committedDate": "2020-08-23T18:41:18Z", "message": "Enable generateInterfaces and update samples for go-petstore-withxml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "75cfe81211408236256bb6c130e4d5a051ad5f5a", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/75cfe81211408236256bb6c130e4d5a051ad5f5a", "committedDate": "2020-08-23T18:41:37Z", "message": "Add generateInterfaces/prettier comments for go-experimental templates\n\n  * Backward incompatible since it changes the api method\n    signatures significantly.\n  * Adheres to a builder pattern more strictly. Execute now runs on the\n    req object returned by the builder, instead of the builder itself\n  * Prettify/align method comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc00c988d63ab398a0a51e4aae7e8d8a1468e4b7", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/fc00c988d63ab398a0a51e4aae7e8d8a1468e4b7", "committedDate": "2020-08-23T18:41:37Z", "message": "Method signature refactors for go-experimental (and openapi3) samples\n\n  * Also update to include prettier method comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16c2141ab56194664d8f2494868d0839439bbbcb", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/16c2141ab56194664d8f2494868d0839439bbbcb", "committedDate": "2020-08-23T18:41:38Z", "message": "Enable generateInterfaces for go-experimental samples\n\n  * Samples now contain interfaces, using backward incompatible method\n    signatures.\n  * Add one test for mocked methods\n  * Switch to go 1.14 for circleci to allow generating mocks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ac3de2f81cb79fe137bf4dd6b8d19280f5f7330", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/9ac3de2f81cb79fe137bf4dd6b8d19280f5f7330", "committedDate": "2020-08-23T18:41:38Z", "message": "Undo mock additions in CI/backward incompatibility in tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "339849280b61ec9e063436dd8fe04ee6d6898430", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/339849280b61ec9e063436dd8fe04ee6d6898430", "committedDate": "2020-08-23T18:41:39Z", "message": "Address PR comments: fix backward incompatibility in templates\n\n  - add Execute redirection from request back up to service"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4945c11ac779c829d1f7ee25da749ae9a9de69b8", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/4945c11ac779c829d1f7ee25da749ae9a9de69b8", "committedDate": "2020-08-23T18:41:59Z", "message": "Regenerate go-experimental/oas2 samples w/o interfaces"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f26eebb5fa43b57c20ec8d2b3565b811463edb04", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/f26eebb5fa43b57c20ec8d2b3565b811463edb04", "committedDate": "2020-08-23T17:00:55Z", "message": "debug ci"}, "afterCommit": {"oid": "4945c11ac779c829d1f7ee25da749ae9a9de69b8", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/4945c11ac779c829d1f7ee25da749ae9a9de69b8", "committedDate": "2020-08-23T18:41:59Z", "message": "Regenerate go-experimental/oas2 samples w/o interfaces"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fdc4599662ce8ae5366787d06bbf24c2f8a8e101", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/fdc4599662ce8ae5366787d06bbf24c2f8a8e101", "committedDate": "2020-08-23T21:01:21Z", "message": "Regenerate go-experimental/oas2 samples with interfaces"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d6ca297f8b776e7e554bc14cf566839111d7f29", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/9d6ca297f8b776e7e554bc14cf566839111d7f29", "committedDate": "2020-08-23T21:59:52Z", "message": "Add mock to test go-experimental interface"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "af471d8c47696aefde9056c0d0326de9b257b6af", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/af471d8c47696aefde9056c0d0326de9b257b6af", "committedDate": "2020-08-23T21:09:08Z", "message": "Add mock to test go-experimental interface"}, "afterCommit": {"oid": "9d6ca297f8b776e7e554bc14cf566839111d7f29", "author": {"user": {"login": "arvindth", "name": "Arvind Thirunarayanan"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/9d6ca297f8b776e7e554bc14cf566839111d7f29", "committedDate": "2020-08-23T21:59:52Z", "message": "Add mock to test go-experimental interface"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczMDQ2NTIy", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5914#pullrequestreview-473046522", "createdAt": "2020-08-23T21:17:10Z", "commit": {"oid": "af471d8c47696aefde9056c0d0326de9b257b6af"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yM1QyMToxNzoxMFrOHFQFqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yM1QyMToxNzoxMFrOHFQFqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTI2ODUyMw==", "bodyText": "Rather than requiring callers to call the new backward incompatible *Execute methods in Service directly, I've re-added the original Execute method in *Request, which just redirects the call to the Service's *Execute, in order to maintain backward compatibility.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5914#discussion_r475268523", "createdAt": "2020-08-23T21:17:10Z", "author": {"login": "arvindth"}, "path": "modules/openapi-generator/src/main/resources/go-experimental/api.mustache", "diffHunk": "@@ -15,49 +15,77 @@ import (\n var (\n \t_ _context.Context\n )\n+{{#generateInterfaces}}\n+\n+type {{classname}} interface {\n+  {{#operation}}\n+\n+  /*\n+   * {{operationId}}{{#summary}} {{{.}}}{{/summary}}{{^summary}} Method for {{operationId}}{{/summary}}\n+  {{#notes}}\n+   * {{{unescapedNotes}}}\n+  {{/notes}}\n+   * @param ctx _context.Context - for authentication, logging, cancellation, deadlines, tracing, etc. Passed from http.Request or context.Background().{{#pathParams}}\n+   * @param {{paramName}}{{#description}} {{{.}}}{{/description}}{{/pathParams}}\n+   * @return Api{{operationId}}Request\n+   */\n+  {{{nickname}}}(ctx _context.Context{{#pathParams}}, {{paramName}} {{{dataType}}}{{/pathParams}}) Api{{operationId}}Request\n+\n+  /*\n+   * {{nickname}}Execute executes the request{{#returnType}}\n+   * @return {{{.}}}{{/returnType}}\n+   */\n+  {{nickname}}Execute(r Api{{operationId}}Request) ({{#returnType}}{{{.}}}, {{/returnType}}*_nethttp.Response, error)\n+  {{/operation}}\n+}\n+{{/generateInterfaces}}\n \n // {{classname}}Service {{classname}} service\n type {{classname}}Service service\n-\n {{#operation}}\n-type api{{operationId}}Request struct {\n-\tctx _context.Context\n-\tapiService *{{classname}}Service{{#allParams}}\n-\t{{paramName}} {{^isPathParam}}*{{/isPathParam}}{{{dataType}}}{{/allParams}}\n-}\n \n+type Api{{operationId}}Request struct {\n+\tctx _context.Context{{#generateInterfaces}}\n+\tApiService {{classname}}\n+{{/generateInterfaces}}{{^generateInterfaces}}\n+\tApiService *{{classname}}Service\n+{{/generateInterfaces}}\n {{#allParams}}\n-{{^isPathParam}}\n-func (r api{{operationId}}Request) {{vendorExtensions.x-export-param-name}}({{paramName}} {{{dataType}}}) api{{operationId}}Request {\n+\t{{paramName}} {{^isPathParam}}*{{/isPathParam}}{{{dataType}}}\n+{{/allParams}}\n+}\n+{{#allParams}}{{^isPathParam}}\n+func (r Api{{operationId}}Request) {{vendorExtensions.x-export-param-name}}({{paramName}} {{{dataType}}}) Api{{operationId}}Request {\n \tr.{{paramName}} = &{{paramName}}\n \treturn r\n+}{{/isPathParam}}{{/allParams}}\n+\n+func (r Api{{operationId}}Request) Execute() ({{#returnType}}{{{.}}}, {{/returnType}}*_nethttp.Response, error) {\n+    return r.ApiService.{{nickname}}Execute(r)\n }\n-{{/isPathParam}}\n-{{/allParams}}\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "af471d8c47696aefde9056c0d0326de9b257b6af"}, "originalPosition": 62}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5Mjk0NTgz", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5914#pullrequestreview-479294583", "createdAt": "2020-09-01T01:38:29Z", "commit": {"oid": "9d6ca297f8b776e7e554bc14cf566839111d7f29"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2590, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}