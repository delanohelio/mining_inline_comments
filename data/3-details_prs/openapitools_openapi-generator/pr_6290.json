{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3NjEzOTkw", "number": 6290, "title": "[codegen][python-experimental] Composed schema with additionalProperties ", "bodyText": "Background\nAs per OAS specification:\n\nUndeclared properties should be allowed when the additionalProperties keyword is not specified, when additionalProperties: true or when additionalProperties: {}. The additionalProperties keyword can also be used to specify a schema for the undeclared properties.\nA composed schema may include the additionalProperties keyword, both as a sibling of allOf/oneOf/anyOf, and in the child schemas.\nThe value of undeclared properties may be the null value.\n\nChanges\n\nAdd disallowAdditionalPropertiesIfNotPresent CLI option to control the interpretation of the additionalProperties keyword. See below for more details.\nChange the interpretation of the additionalProperties keyword to comply with the OAS 2.0 and 3.x specifications.\n\nSpecifically, the following behavior changes have been made and are necessary to comply with the OAS spec:\n\nWhen the additionalProperties keyword is not present in the OAS document, that should be interpreted as if additionalProperties had been set to true.\nThe additional properties should be nullable, i.e. the null value should be allowed.\n\n\nSome people may have built their OAS documents with the understanding that by default, additional properties are not allowed, because they incorrectly assumed the OpenAPITools implementation was correct. To retain the legacy behavior you can set the disallowAdditionalPropertiesIfNotPresent CLI option to true, which is the default for now.\nLimitation: due to issue swagger-parser #1369, achieving OAS compliance is not possible when the input document uses the OAS 2.0 schema. For OAS 2.0 documents, the legacy behavior should be used by setting the disallowAdditionalPropertiesIfNotPresent CLI option to true.\n\n\nBy default the CLI option is set to true (i.e. non-compliant behavior, as originally implemented). Initially I wanted to change the default value to false for all code generators, but it's too much work. For now I am only enabling the compliant mode for python-experimental.\nCodegen and mustache templates were not properly processing composed schemas that have the additionalProperties keyword set. The issue is specifically resolved for python-experimental.\ncodegen: add equals and hashCode methods for SemVer class.\npython-experimental: add unit test to validate a composed schema with additionalProperties and other use cases related to the additionalProperties keyword.\npython-experimental: correctly handle the OAS nullable keyword. When a schema is nullable, the client should accept the null value in the input data.\npython-experimental: correctly handle additionalProperties which is referencing a schema with a $ref. Generate imports\npython-experimental: correctly generate the data type when additionalProperties references a schema\nAdd code comments in codegen.\n\nNote: breaking changes are introduced in this PR, but they are necessary to be compliant with the OAS specification.\nFor example:\n    Dog:\n      allOf:\n        - $ref: '#/components/schemas/Animal'\n        - type: object\n          properties:\n            breed:\n              type: string\nIn the above example, the additionalProperties keyword is not specified, which means by default undeclared properties should be allowed. This equivalent to:\n    Dog:\n      additionalProperties: true\n      allOf:\n        - $ref: '#/components/schemas/Animal'\n        - type: object\n          properties:\n            breed:\n              type: string\nRelated Issues and future work\nWhile working on this PR, the following related issues have been identified:\n\nswagger-parser #1378 swagger-v2-converter incorrectly converts 2.0 schemas that do not have the 'type' keyword\nswagger-parser #1369: additionalProperties not set correctly if omitted\nOnce the above issues have been fixed, some of the code in this PR can be disabled. Specifically it will no longer be necessary to differentiate between OAS 2.0 docs and OAS 3.0 docs.\nswagger-parser #1374: when a OAS 2.0 doc is converted, it would be helpful to retain the \"2.0\" version in a vendor extension, that would make it possible to know the original OAS doc was 2.0, not 3.x. That can help to drive some of the processing logic.\nSupport for composed schemas that use the additionalProperties keyword is limited to python-experimental for now. Significant changes may have to be done in other languages. For example, in the Java clients, single inheritance is used, that causes a conflict between inheriting the allOf parent and the HashMap parent.\nSome of the names in samples OAS documents should be changed to better reflect the intent and behavior. See discussion in this PR for more details.\nIssue #6400\n\n\nPR checklist\n\n Read the contribution guidelines.\n If contributing template-only or documentation-only changes which will change sample output, build the project before.\n Run the shell script(s) under ./bin/ (or Windows batch scripts under.\\bin\\windows) to update Petstore samples related to your fix. This is important, as CI jobs will verify all generator outputs of your HEAD commit, and these must match the expectations made by your contribution. You only need to run ./bin/{LANG}-petstore.sh, ./bin/openapi3/{LANG}-petstore.sh if updating the code or mustache templates for a language ({LANG}) (e.g. php, ruby, python, etc).\n File the PR against the correct branch: master, 4.3.x, 5.0.x. Default: master.\n Copy the technical committee to review the pull request if your PR is targeting a particular programming language.", "createdAt": "2020-05-13T21:09:10Z", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290", "merged": true, "mergeCommit": {"oid": "f7f41410e764bb8354e4f9756c9f886e1d3c03f7"}, "closed": true, "closedAt": "2020-05-28T16:40:49Z", "author": {"login": "sebastien-rosset"}, "timelineItems": {"totalCount": 163, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjVn1igH2gAyNDE3NjEzOTkwOjVmNDI4YTRiNTgyOWY3YmE3YTQxNDc1MDgzYjdkNTViZWYyODMwNGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcluJbugH2gAyNDE3NjEzOTkwOjY1ZjZjZjg0YzYyZTBhZWIzYzFmNjQ3ZWFkYzQzYzRkZWVhZGE3NzA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5f428a4b5829f7ba7a41475083b7d55bef28304d", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/5f428a4b5829f7ba7a41475083b7d55bef28304d", "committedDate": "2020-05-21T04:04:57Z", "message": "run sample scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b82711fe6630f1e36c3ecc7af9e150c97826862", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/9b82711fe6630f1e36c3ecc7af9e150c97826862", "committedDate": "2020-05-21T04:06:53Z", "message": "run sample scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b19b7f4b60787fabea995206bf3f2bde3e5e9d2", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/0b19b7f4b60787fabea995206bf3f2bde3e5e9d2", "committedDate": "2020-05-21T05:11:45Z", "message": "refactor cli option for additional properties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "006900a4f850df380fa507241020c1a66c6ebe7d", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/006900a4f850df380fa507241020c1a66c6ebe7d", "committedDate": "2020-05-21T05:35:08Z", "message": "refactor cli option for additional properties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a63f6701432c58be78c100cc498821befdcfb259", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/a63f6701432c58be78c100cc498821befdcfb259", "committedDate": "2020-05-21T05:38:23Z", "message": "run samples scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38ecb91b638fdad96c676c7620ad589c307cb095", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/38ecb91b638fdad96c676c7620ad589c307cb095", "committedDate": "2020-05-21T05:40:56Z", "message": "run sample scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66d35c5c197b1918b14fabb25e1f316e23823724", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/66d35c5c197b1918b14fabb25e1f316e23823724", "committedDate": "2020-05-21T05:43:09Z", "message": "run sample scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe87ff0d573bb53ed1576aa250aba200f85d5aaa", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/fe87ff0d573bb53ed1576aa250aba200f85d5aaa", "committedDate": "2020-05-21T05:44:46Z", "message": "run sample scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed54ab81957afc1a46cd255863c975e562c186e4", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/ed54ab81957afc1a46cd255863c975e562c186e4", "committedDate": "2020-05-21T05:46:52Z", "message": "run sample scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65d1401dcb6f621e2f0a5e00a2b9be409eb681e7", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/65d1401dcb6f621e2f0a5e00a2b9be409eb681e7", "committedDate": "2020-05-21T05:53:35Z", "message": "Add yaml comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ce0b6b6f85b47277a496201fb105b622bdbc9f6", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/0ce0b6b6f85b47277a496201fb105b622bdbc9f6", "committedDate": "2020-05-21T05:59:48Z", "message": "small refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92cb99bfa80e33c1000cd1ddbe56ec5ceabc4827", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/92cb99bfa80e33c1000cd1ddbe56ec5ceabc4827", "committedDate": "2020-05-21T06:00:57Z", "message": "small refactor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "765757f420b7baddec739f6edaa6eaa7bd382048", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/765757f420b7baddec739f6edaa6eaa7bd382048", "committedDate": "2020-05-21T06:07:08Z", "message": "run sample scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ec200306f9e3803ff525857d910b5563bbe8575c", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/ec200306f9e3803ff525857d910b5563bbe8575c", "committedDate": "2020-05-21T06:09:54Z", "message": "run sample scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d14898cadc8ae3b4ce64555288766284beadfc27", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/d14898cadc8ae3b4ce64555288766284beadfc27", "committedDate": "2020-05-21T06:31:05Z", "message": "fix unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89117b9b54879154459c08fe790586cf6e03fbb8", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/89117b9b54879154459c08fe790586cf6e03fbb8", "committedDate": "2020-05-21T13:34:06Z", "message": "Set disallowAdditionalPropertiesIfNotPresent flag"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1351fd0e9234e995a34eb3fc624b245d025d248e", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/1351fd0e9234e995a34eb3fc624b245d025d248e", "committedDate": "2020-05-21T15:20:54Z", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba6573568266660188c8e176f1cdf4aaaf376b14", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/ba6573568266660188c8e176f1cdf4aaaf376b14", "committedDate": "2020-05-22T02:19:22Z", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a0b89e18566266efb3b9d6373fc443008eb8514", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/9a0b89e18566266efb3b9d6373fc443008eb8514", "committedDate": "2020-05-22T16:01:59Z", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MDU3MDcw", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#pullrequestreview-417057070", "createdAt": "2020-05-22T16:56:03Z", "commit": {"oid": "89117b9b54879154459c08fe790586cf6e03fbb8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNjo1NjowM1rOGZdzyw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNjo1NjowM1rOGZdzyw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM1NTk3OQ==", "bodyText": "Should we also do codegenModel.imports.addAll(referencedModelNames);\nDo we have an example that uses this code? Where?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#discussion_r429355979", "createdAt": "2020-05-22T16:56:03Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/PythonClientExperimentalCodegen.java", "diffHunk": "@@ -969,14 +1007,20 @@ public String toInstantiationType(Schema property) {\n \n     @Override\n     protected void addAdditionPropertiesToCodeGenModel(CodegenModel codegenModel, Schema schema) {\n-        Schema addProps = ModelUtils.getAdditionalProperties(schema);\n-        if (addProps != null && addProps.get$ref() == null) {\n-            // if AdditionalProperties exists and is an inline definition, get its datatype and store it in m.parent\n-            String typeString = getTypeDeclaration(addProps);\n-            codegenModel.additionalPropertiesType = typeString;\n-        } else {\n-            addParentContainer(codegenModel, codegenModel.name, schema);\n+        Schema addProps = getAdditionalProperties(schema);\n+        if (addProps != null) {\n+            // if AdditionalProperties exists, get its datatype and\n+            // store it in codegenModel.additionalPropertiesType.\n+            // The 'addProps' may be a reference, getTypeDeclaration will resolve\n+            // the reference.\n+            List<String> referencedModelNames = new ArrayList<String>();\n+            codegenModel.additionalPropertiesType = getTypeString(addProps, \"\", \"\", referencedModelNames);\n+            if (referencedModelNames.size() != 0) {\n+                codegenModel.vendorExtensions.put(referencedModelNamesExtension, referencedModelNames);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89117b9b54879154459c08fe790586cf6e03fbb8"}, "originalPosition": 142}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MDU3Njc5", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#pullrequestreview-417057679", "createdAt": "2020-05-22T16:57:04Z", "commit": {"oid": "89117b9b54879154459c08fe790586cf6e03fbb8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNjo1NzowNFrOGZd1gQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNjo1NzowNFrOGZd1gQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM1NjQxNw==", "bodyText": "Why did we remove the imports check here?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#discussion_r429356417", "createdAt": "2020-05-22T16:57:04Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/test/java/org/openapitools/codegen/python/PythonClientExperimentalTest.java", "diffHunk": "@@ -289,9 +289,8 @@ public void mapModelTest() {\n         Assert.assertEquals(cm.classname, \"sample.Sample\");\n         Assert.assertEquals(cm.description, \"a map model\");\n         Assert.assertEquals(cm.vars.size(), 0);\n-        Assert.assertEquals(cm.parent, \"dict\");\n-        Assert.assertEquals(cm.imports.size(), 1);\n-        Assert.assertEquals(Sets.intersection(cm.imports, Sets.newHashSet(\"children.Children\")).size(), 1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89117b9b54879154459c08fe790586cf6e03fbb8"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c84190ef4387be4d823bd89890127b4870c453a", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/4c84190ef4387be4d823bd89890127b4870c453a", "committedDate": "2020-05-22T17:17:14Z", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f1f59ca22f49fdc59115f19fd06a95ae97d7134", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/0f1f59ca22f49fdc59115f19fd06a95ae97d7134", "committedDate": "2020-05-22T17:17:32Z", "message": "Merge branch 'master' of github.com:CiscoM31/openapi-generator into all-of-additional-properties"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MDcwNzI1", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#pullrequestreview-417070725", "createdAt": "2020-05-22T17:20:25Z", "commit": {"oid": "89117b9b54879154459c08fe790586cf6e03fbb8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNzoyMDoyNVrOGZecZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNzoyMDoyNVrOGZecZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM2NjM3NQ==", "bodyText": "Why make this separate yaml file?\nTo test disallowAdditionalPropertiesIfNotPresent=True/False?\nIf that is the case, can you make this spec much smaller, give it a file name like:\nissues_1369_1371.yaml or\nadditional_properties_spec.yaml\nand use it in DefaultCodegenTest.java?\nWe want to minimize the spec additions that we make.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#discussion_r429366375", "createdAt": "2020-05-22T17:20:25Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/test/resources/2_0/petstore-with-fake-endpoints-models-and-additional-properties-for-testing.yaml", "diffHunk": "@@ -0,0 +1,2009 @@\n+swagger: '2.0'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89117b9b54879154459c08fe790586cf6e03fbb8"}, "originalPosition": 1}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5206a30eaaec420ee4cc7ef8716e55f92fe80d37", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/5206a30eaaec420ee4cc7ef8716e55f92fe80d37", "committedDate": "2020-05-22T17:39:40Z", "message": "reduced size of test yaml file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5339ab728076ed348387f8c742ed9e7a2dfd6872", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/5339ab728076ed348387f8c742ed9e7a2dfd6872", "committedDate": "2020-05-22T17:53:51Z", "message": "simplify code and add imports directly"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MTE2NjU1", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#pullrequestreview-417116655", "createdAt": "2020-05-22T18:43:19Z", "commit": {"oid": "5339ab728076ed348387f8c742ed9e7a2dfd6872"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxODo0MzoxOVrOGZgk_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxODo0MzoxOVrOGZgk_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQwMTM0Mw==", "bodyText": "Great addition here. This is very helpful, thanks!", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#discussion_r429401343", "createdAt": "2020-05-22T18:43:19Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/test/java/org/openapitools/codegen/TestUtils.java", "diffHunk": "@@ -52,11 +53,19 @@ public static OpenAPI parseFlattenSpec(String specFilePath) {\n      * @return A \"raw\" OpenAPI document\n      */\n     public static OpenAPI parseSpec(String specFilePath) {\n-        return new OpenAPIParser().readLocation(specFilePath, null, new ParseOptions()).getOpenAPI();\n+        OpenAPI openAPI = new OpenAPIParser().readLocation(specFilePath, null, new ParseOptions()).getOpenAPI();\n+        // Invoke helper function to get the original swagger version.\n+        // See https://github.com/swagger-api/swagger-parser/pull/1374\n+        // Also see https://github.com/swagger-api/swagger-parser/issues/1369.\n+        ModelUtils.getOpenApiVersion(openAPI, specFilePath, null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5339ab728076ed348387f8c742ed9e7a2dfd6872"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MTI4NTQ0", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#pullrequestreview-417128544", "createdAt": "2020-05-22T18:59:26Z", "commit": {"oid": "5339ab728076ed348387f8c742ed9e7a2dfd6872"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxODo1OToyN1rOGZg-CA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxODo1OToyN1rOGZg-CA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQwNzc1Mg==", "bodyText": "These property names are being added, but their values disagree with their descriptions.\nCan you change them to be consistent so our users aren't confused?\n\nanytype_1 results in {str: (bool, date, datetime, dict, float, int, list, str, none_type)} how about naming it map_of_anytype_1\nanytype_2 results in bool, date, datetime, dict, float, int, list, str, none_type so how about naming it anytype_1\nanytype_3 results in {str: (bool, date, datetime, dict, float, int, list, str, none_type)} so how about naming it map_of_anytype_2\nmap_with_additional_properties results in {str: (bool, date, datetime, dict, float, int, list, str, none_type)} so how about naming it map_of_anytype_3\nmap_without_additional_properties results in bool, date, datetime, dict, float, int, list, str so how about renaming it anytype_2\n\nmap_without_additional_properties lacks none_type in its resultant data_type? Is that correct or incorrect? Isn't that incorrect?\n\nShouldn't map_without_additional_properties be a map where only certain specific key property names are allowed because additionalProperties is False?\nDo we need to convert that into a a new separate object type CodegenModel which becomes a Python ModelNormal to enforce that behavior?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#discussion_r429407752", "createdAt": "2020-05-22T18:59:27Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/test/resources/3_0/python-experimental/petstore-with-fake-endpoints-models-for-testing-with-http-signature.yaml", "diffHunk": "@@ -1539,6 +1543,22 @@ components:\n             type: object\n             additionalProperties:\n               type: string\n+        anytype_1:\n+          type: object\n+        anytype_2: {}\n+        anytype_3:\n+          type: object\n+          properties: {}\n+        map_with_additional_properties:\n+          type: object\n+          additionalProperties: true\n+        map_without_additional_properties:\n+          type: object\n+          additionalProperties: false\n+        map_string:\n+          type: object\n+          additionalProperties:\n+            type: string", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5339ab728076ed348387f8c742ed9e7a2dfd6872"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MTUxNjg5", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#pullrequestreview-417151689", "createdAt": "2020-05-22T19:46:41Z", "commit": {"oid": "5339ab728076ed348387f8c742ed9e7a2dfd6872"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxOTo0Njo0MVrOGZiJwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxOTo0Njo0MVrOGZiJwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQyNzEzNg==", "bodyText": "Do we have a test where we test this new feature with assert None == NullableClass(None) for ModelNormal, ModelSimple, and ModelComposed classes?\nWhere?\nIf we don't have it, can you add it?\nNote: this feature uses our new _nullable data source and is different than the oneOf: - \"null\" data source.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#discussion_r429427136", "createdAt": "2020-05-22T19:46:41Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_templates/classvars.mustache", "diffHunk": "@@ -100,6 +100,8 @@\n \n     additional_properties_type = {{#additionalPropertiesType}}({{{additionalPropertiesType}}},)  # noqa: E501{{/additionalPropertiesType}}{{^additionalPropertiesType}}None{{/additionalPropertiesType}}\n \n+    _nullable = {{#isNullable}}True{{/isNullable}}{{^isNullable}}False{{/isNullable}}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5339ab728076ed348387f8c742ed9e7a2dfd6872"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f014dddbb9d7855afe43f88ebec5ddc1cbd5907", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/0f014dddbb9d7855afe43f88ebec5ddc1cbd5907", "committedDate": "2020-05-22T21:41:00Z", "message": "rename some of the properties used in tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffae039487a7c5333a920eece5bea4b5a73966ab", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/ffae039487a7c5333a920eece5bea4b5a73966ab", "committedDate": "2020-05-22T23:24:00Z", "message": "Handle more scenarios for nullable types"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94ae68328b8b05a4d67f99520466f4a3ab08d091", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/94ae68328b8b05a4d67f99520466f4a3ab08d091", "committedDate": "2020-05-22T23:24:57Z", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8fdbd278fdbdf1da674206cf1ca8d337a7c26d80", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/8fdbd278fdbdf1da674206cf1ca8d337a7c26d80", "committedDate": "2020-05-22T23:25:20Z", "message": "Merge branch 'master' of github.com:CiscoM31/openapi-generator into all-of-additional-properties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aac9f5a45496cee2f092fcbbec1378a479451e9d", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/aac9f5a45496cee2f092fcbbec1378a479451e9d", "committedDate": "2020-05-23T01:16:38Z", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "248086a6ed556e32ab3c5d9410f6739eb05a7e97", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/248086a6ed556e32ab3c5d9410f6739eb05a7e97", "committedDate": "2020-05-23T01:16:57Z", "message": "Merge branch 'master' of github.com:CiscoM31/openapi-generator into all-of-additional-properties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93baa3deb70eacd53335c94970b6f0ebcb3ad4ba", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/93baa3deb70eacd53335c94970b6f0ebcb3ad4ba", "committedDate": "2020-05-23T02:37:32Z", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47e542e1c4e02c64d8d61626e7f2449b16e65c2a", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/47e542e1c4e02c64d8d61626e7f2449b16e65c2a", "committedDate": "2020-05-23T02:42:39Z", "message": "Merge branch 'master' of github.com:CiscoM31/openapi-generator into all-of-additional-properties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c313b4934037fb39067fe3f4cee27d6eb4ffae4", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/5c313b4934037fb39067fe3f4cee27d6eb4ffae4", "committedDate": "2020-05-23T14:49:07Z", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e91ad67c9ff5716abcada471cbe2a42a187363fd", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/e91ad67c9ff5716abcada471cbe2a42a187363fd", "committedDate": "2020-05-23T14:50:07Z", "message": "Merge branch 'master' of github.com:CiscoM31/openapi-generator into all-of-additional-properties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cda8898cc87009a86e6e3a6cc0ab6a22236142b5", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/cda8898cc87009a86e6e3a6cc0ab6a22236142b5", "committedDate": "2020-05-23T16:14:20Z", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MjkwOTQ0", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#pullrequestreview-417290944", "createdAt": "2020-05-23T16:27:18Z", "commit": {"oid": "e91ad67c9ff5716abcada471cbe2a42a187363fd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yM1QxNjoyNzoxOFrOGZqPRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yM1QxNjoyNzoxOFrOGZqPRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTU1OTYyMg==", "bodyText": "Are unknown_keys the same as additional properties?\nHow about changing this variable name to discard_additional_properties?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#discussion_r429559622", "createdAt": "2020-05-23T16:27:18Z", "author": {"login": "spacether"}, "path": "samples/openapi3/client/petstore/python-experimental/tests/test_discard_unknown_properties.py", "diffHunk": "@@ -36,51 +36,86 @@\n \n class DiscardUnknownPropertiesTests(unittest.TestCase):\n \n-    def test_deserialize_dog_do_not_discard_unknown_properties(self):\n-        \"\"\" deserialize str, Dog) with unknown properties, strict validation is enabled \"\"\"\n+    def test_deserialize_banana_req_do_not_discard_unknown_properties(self):\n+        \"\"\"\n+        deserialize bananaReq with unknown properties.\n+        Strict validation is enabled.\n+        Simple (non-composed) schema scenario.\n+        \"\"\"\n         config = Configuration(discard_unknown_keys=False)\n         api_client = petstore_api.ApiClient(config)\n         data = {\n-            \"class_name\": \"Dog\",\n-            \"color\": \"black\",\n-            \"breed\": \"husky\",\n-            \"unknown_property\": \"a-value\"\n+            'lengthCm': 21.3,\n+            'sweet': False,\n+            # Below are additional (undeclared) properties not specified in the bananaReq schema.\n+            'unknown_property': 'a-value'\n+        }\n+        response = MockResponse(data=json.dumps(data))\n+\n+        # Deserializing with strict validation raises an exception because the 'unknown_property'\n+        # is undeclared.\n+        with self.assertRaises(petstore_api.exceptions.ApiAttributeError) as cm:\n+            deserialized = api_client.deserialize(response, ((petstore_api.BananaReq),), True)\n+        self.assertTrue(re.match(\"BananaReq has no attribute 'unknown_property' at.*\", str(cm.exception)),\n+            'Exception message: {0}'.format(str(cm.exception)))\n+\n+\n+    def test_deserialize_isosceles_triangle_do_not_discard_unknown_properties(self):\n+        \"\"\"\n+        deserialize IsoscelesTriangle with unknown properties.\n+        Strict validation is enabled.\n+        Composed schema scenario.\n+        \"\"\"\n+        config = Configuration(discard_unknown_keys=False)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e91ad67c9ff5716abcada471cbe2a42a187363fd"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aee63b6c056bab17b64f9ce8b55f73c50f89d66f", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/aee63b6c056bab17b64f9ce8b55f73c50f89d66f", "committedDate": "2020-05-23T17:39:31Z", "message": "Merge branch 'master' of github.com:CiscoM31/openapi-generator into all-of-additional-properties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b1b487a14ca2689e06bc5760d3be3f41c63c03d9", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/b1b487a14ca2689e06bc5760d3be3f41c63c03d9", "committedDate": "2020-05-23T17:45:48Z", "message": "add code comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f7e5c1c07ccc3a3fca2a4b2d13875965faa2a43", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/1f7e5c1c07ccc3a3fca2a4b2d13875965faa2a43", "committedDate": "2020-05-24T00:58:32Z", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0339d00f03ee4434a57698c071508de0506a4e4", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/b0339d00f03ee4434a57698c071508de0506a4e4", "committedDate": "2020-05-24T00:59:30Z", "message": "Merge branch 'master' of github.com:CiscoM31/openapi-generator into all-of-additional-properties"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MzMzNzg5", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#pullrequestreview-417333789", "createdAt": "2020-05-24T07:24:47Z", "commit": {"oid": "b0339d00f03ee4434a57698c071508de0506a4e4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQwNzoyNDo0N1rOGZtLPg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNFQwNzoyNDo0N1rOGZtLPg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYwNzc0Mg==", "bodyText": "@sebastien-rosset\nplease take a look at a branch that I made here which updates banana = petstore_api.Banana(None) to raise an exception and has this test assert that the exception is raised.\nWhich do you prefer to get this working?\n\nmerging the new branch that  made into this PR or\nhaving me build a separate PR which implements _nullable?\n\nIf we make a separate _nullable PR, then I would prefer that we\n\nland the _nullable PR before this one if this contains _nullable code or\nremove the _nullable code from this one and land them separately with no requirement on which lands first", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#discussion_r429607742", "createdAt": "2020-05-24T07:24:47Z", "author": {"login": "spacether"}, "path": "samples/openapi3/client/petstore/python-experimental/test/test_fruit.py", "diffHunk": "@@ -189,5 +189,24 @@ def testFruit(self):\n             fruit._additional_properties_model_instances, []\n         )\n \n+    def testFruitNullValue(self):\n+        # Since 'apple' is nullable, validate we can create an apple with the 'null' value.\n+        apple = petstore_api.Apple(None)\n+        self.assertIsNone(apple)\n+\n+        # But 'banana' is not nullable.\n+        banana = petstore_api.Banana(None)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b0339d00f03ee4434a57698c071508de0506a4e4"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5466a8876b4c4fe2a3a243155b0a4e6b37467b5d", "author": {"user": {"login": "spacether", "name": "Justin Black"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/5466a8876b4c4fe2a3a243155b0a4e6b37467b5d", "committedDate": "2020-05-24T07:33:00Z", "message": "Adds *args input to __init__ method to fix test testFruitNullValue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7eb9c8e218fc21003fc6e92352aea7edd4d5e45b", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/7eb9c8e218fc21003fc6e92352aea7edd4d5e45b", "committedDate": "2020-05-25T15:42:29Z", "message": "Merge pull request #21 from spacether/all-of-additional-properties_jblack\n\nAdds *args input to __init__ method to fix test testFruitNullValue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bef435ed8ceed036f5de457f2d7b4b5a0a328b81", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/bef435ed8ceed036f5de457f2d7b4b5a0a328b81", "committedDate": "2020-05-25T23:54:25Z", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e5ba96751d72f0840a4f614d1c8eee1c8f768621", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/e5ba96751d72f0840a4f614d1c8eee1c8f768621", "committedDate": "2020-05-25T23:55:07Z", "message": "Merge branch 'master' of github.com:CiscoM31/openapi-generator into all-of-additional-properties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d561ad04585b760fb80cc13d659bb4039028462", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/6d561ad04585b760fb80cc13d659bb4039028462", "committedDate": "2020-05-25T23:58:03Z", "message": "Resolve merge issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e6a8275f01f872e70c26c2ca84fe58194a5bea4", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/4e6a8275f01f872e70c26c2ca84fe58194a5bea4", "committedDate": "2020-05-26T00:25:14Z", "message": "Merge branch 'all-of-additional-properties' of github.com:CiscoM31/openapi-generator into all-of-additional-properties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "768d933f508cafadbaf79fdec312c34c8b51ad5f", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/768d933f508cafadbaf79fdec312c34c8b51ad5f", "committedDate": "2020-05-26T05:10:36Z", "message": "run samples scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3283e3c696ba6cfe9dbeafcee5f2fac1b7ab4284", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/3283e3c696ba6cfe9dbeafcee5f2fac1b7ab4284", "committedDate": "2020-05-26T13:37:14Z", "message": "run doc generator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9cad3859c1acb20c586ecaa9b890343a63ee05d", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/a9cad3859c1acb20c586ecaa9b890343a63ee05d", "committedDate": "2020-05-26T17:10:01Z", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bed2f7058ee52ab0a02fefb92996ade448cc3d5", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/5bed2f7058ee52ab0a02fefb92996ade448cc3d5", "committedDate": "2020-05-26T17:10:51Z", "message": "Merge branch 'master' of github.com:CiscoM31/openapi-generator into all-of-additional-properties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "877ecfef416f48e1eb426ed0e8f5217da1bb67de", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/877ecfef416f48e1eb426ed0e8f5217da1bb67de", "committedDate": "2020-05-27T02:32:50Z", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fba480346f5d3c8ad491597755e7a526bc020903", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/fba480346f5d3c8ad491597755e7a526bc020903", "committedDate": "2020-05-27T02:33:23Z", "message": "Merge branch 'master' of github.com:CiscoM31/openapi-generator into all-of-additional-properties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c055f5d01538588d3018a22315e923d3776d81f", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/8c055f5d01538588d3018a22315e923d3776d81f", "committedDate": "2020-05-27T16:23:32Z", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NDA3NzY3", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#pullrequestreview-419407767", "createdAt": "2020-05-27T16:34:11Z", "commit": {"oid": "fba480346f5d3c8ad491597755e7a526bc020903"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d64f42192ca79f6939c69ab6301240f775ed9482", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/d64f42192ca79f6939c69ab6301240f775ed9482", "committedDate": "2020-05-28T13:40:04Z", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "408409eef9479d2f0014d1c96e0cec31cb9f32f3", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/408409eef9479d2f0014d1c96e0cec31cb9f32f3", "committedDate": "2020-05-28T13:43:20Z", "message": "resolve merge conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65f6cf84c62e0aeb3c1f647eadc43c4deeada770", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/65f6cf84c62e0aeb3c1f647eadc43c4deeada770", "committedDate": "2020-05-28T13:47:13Z", "message": "fix merge conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41e97e6d2bd817c39e0ce6593acea8b9b290ddd6", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/41e97e6d2bd817c39e0ce6593acea8b9b290ddd6", "committedDate": "2020-05-13T01:57:25Z", "message": "Mustache template should use invokerPackage tag to generate import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1760f6a2af3b67a1cd35d3c92fad53671c44caf2", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/1760f6a2af3b67a1cd35d3c92fad53671c44caf2", "committedDate": "2020-05-13T13:28:59Z", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ae466e772a3277d19b0d213719935155724aab8", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/3ae466e772a3277d19b0d213719935155724aab8", "committedDate": "2020-05-13T16:15:21Z", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b628667b1f63d7102e4cf929778053b718aa42d4", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/b628667b1f63d7102e4cf929778053b718aa42d4", "committedDate": "2020-05-13T16:44:21Z", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fca81de731bb07e0eaa65ee565374870c54aad1c", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/fca81de731bb07e0eaa65ee565374870c54aad1c", "committedDate": "2020-05-13T21:07:56Z", "message": "Add a unit test for allOf and additionalProperties"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExMzAzOTk3", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#pullrequestreview-411303997", "createdAt": "2020-05-13T21:13:45Z", "commit": {"oid": "fca81de731bb07e0eaa65ee565374870c54aad1c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMToxMzo0NlrOGVDvlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QyMToxMzo0NlrOGVDvlA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDczNDYxMg==", "bodyText": "@spacether , currently this unit test raises the following exception:\npetstore_api.exceptions.ApiValueError: Invalid input arguments input when making an instance of class Dog. Not all inputs were used. The unused input data is {'group': 'Terrier Group', 'size': 'medium'}\nIt looks like the existing code does not accept additional (undeclared) properties.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#discussion_r424734612", "createdAt": "2020-05-13T21:13:46Z", "author": {"login": "sebastien-rosset"}, "path": "samples/openapi3/client/petstore/python-experimental/tests/test_deserialization.py", "diffHunk": "@@ -176,3 +176,27 @@ def test_deserialize_fruit_null_value(self):\n \n         inst = petstore_api.FruitReq(None)\n         self.assertIsNone(inst)\n+\n+    def test_deserialize_all_of_with_additional_properties(self):\n+        \"\"\"\n+        deserialize data.\n+        \"\"\"\n+\n+        # Dog is allOf with two child schemas.\n+        # The OAS document for Dog does not specify the 'additionalProperties' keyword. \n+        # The additionalProperties keyword is used to control the handling of extra stuff,\n+        # that is, properties whose names are not listed in the properties keyword.\n+        # By default any additional properties are allowed.\n+        data = {\n+            'className': 'Dog',\n+            'color': 'brown',\n+            'breed': 'golden retriever',\n+            # Below are additional, undeclared properties\n+            'group': 'Terrier Group',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fca81de731bb07e0eaa65ee565374870c54aad1c"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13d865a04f551aa3eb2c76789e2970c2c1eceb0f", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/13d865a04f551aa3eb2c76789e2970c2c1eceb0f", "committedDate": "2020-05-13T22:10:26Z", "message": "Fix getAdditionalProperties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eed27dc4105fde10491bd455af790916b0204739", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/eed27dc4105fde10491bd455af790916b0204739", "committedDate": "2020-05-14T05:10:55Z", "message": "Add code comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "158ee579ddef524de0bc9067b9ad9feeab42ed78", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/158ee579ddef524de0bc9067b9ad9feeab42ed78", "committedDate": "2020-05-14T05:11:17Z", "message": "Add code comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24fc6c526143b4e6d33705d538de56bab5827042", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/24fc6c526143b4e6d33705d538de56bab5827042", "committedDate": "2020-05-14T05:12:05Z", "message": "set nullable for additionalproperties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c47d0972f5cd83da658f630cf1c6801e2e0a6515", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/c47d0972f5cd83da658f630cf1c6801e2e0a6515", "committedDate": "2020-05-14T05:12:42Z", "message": "add variants of additionalProperties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c889510f03e8d2493dbbf0a07203221ca8bdfb0", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/4c889510f03e8d2493dbbf0a07203221ca8bdfb0", "committedDate": "2020-05-14T05:13:27Z", "message": "Add more unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b687da90b9d7c0a5aeded43674a9fecdf58c3aa", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/9b687da90b9d7c0a5aeded43674a9fecdf58c3aa", "committedDate": "2020-05-14T05:27:06Z", "message": "Handle additionalProperties for composed schemas"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4dc915c5972e95473c4733503e8f7d790b0e3556", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/4dc915c5972e95473c4733503e8f7d790b0e3556", "committedDate": "2020-05-14T14:37:49Z", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc628a436ed8de9fbfeff080be2328bda5b9be3c", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/bc628a436ed8de9fbfeff080be2328bda5b9be3c", "committedDate": "2020-05-14T14:43:41Z", "message": "Merge branch 'master' of github.com:CiscoM31/openapi-generator into all-of-additional-properties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c603f099a8db8e056a8f948e1e8bde957045e93b", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/c603f099a8db8e056a8f948e1e8bde957045e93b", "committedDate": "2020-05-14T15:08:22Z", "message": "improve code comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a594a1a0c313ba9d73d60192b8cad4de4e34ff08", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/a594a1a0c313ba9d73d60192b8cad4de4e34ff08", "committedDate": "2020-05-14T15:29:05Z", "message": "Add code comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "068b137b33c969c2f8a070745cfbce6851e893f3", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/068b137b33c969c2f8a070745cfbce6851e893f3", "committedDate": "2020-05-14T15:42:35Z", "message": "Add code comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "524bd31683f2ca21ce5066323bcabecfcc524eaa", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/524bd31683f2ca21ce5066323bcabecfcc524eaa", "committedDate": "2020-05-14T15:48:15Z", "message": "Add code comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2e2e0869ced3b0d1d3d5edb4219ab8e86bd251c", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/e2e2e0869ced3b0d1d3d5edb4219ab8e86bd251c", "committedDate": "2020-05-14T15:51:30Z", "message": "Add code comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b62ae93b1cb610e20261ee486f2ca761e71260f2", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/b62ae93b1cb610e20261ee486f2ca761e71260f2", "committedDate": "2020-05-14T16:05:10Z", "message": "Add code comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2cadb08b0335d96940fddb70fa297e9f25cd02c", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/c2cadb08b0335d96940fddb70fa297e9f25cd02c", "committedDate": "2020-05-14T16:13:21Z", "message": "Add assertions in unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "62733880dc37140b43bd2f424a927288d715ade3", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/62733880dc37140b43bd2f424a927288d715ade3", "committedDate": "2020-05-14T16:46:49Z", "message": "Add new property to support the 'additionalProperties' keyword with composed schemas"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f32f9eb4c8052b5360e4e03139867ef304ad04c2", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/f32f9eb4c8052b5360e4e03139867ef304ad04c2", "committedDate": "2020-05-14T16:51:52Z", "message": "run sample scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87f900ff42f575c36aa6f851edba1c7badb03202", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/87f900ff42f575c36aa6f851edba1c7badb03202", "committedDate": "2020-05-14T17:32:01Z", "message": "fix unit tests to handle additionalProperties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed47df0e36add511872d8387b38e767260e8167a", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/ed47df0e36add511872d8387b38e767260e8167a", "committedDate": "2020-05-14T21:02:19Z", "message": "Handle additional properties and composed schema"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80a6f9bdc7b4b11dfd19ee742d5c77fe763dc5b9", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/80a6f9bdc7b4b11dfd19ee742d5c77fe763dc5b9", "committedDate": "2020-05-14T21:04:37Z", "message": "Handle additional properties and composed schema"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82507564a052d60c719e5199ff35ded6f147c56b", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/82507564a052d60c719e5199ff35ded6f147c56b", "committedDate": "2020-05-14T22:13:18Z", "message": "Add support for additionalProperties and composed schema"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64723518dcd26fa487430e1a6a655c702019854e", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/64723518dcd26fa487430e1a6a655c702019854e", "committedDate": "2020-05-14T22:25:56Z", "message": "Format java code"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyMjI5Mjkx", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#pullrequestreview-412229291", "createdAt": "2020-05-14T22:29:10Z", "commit": {"oid": "64723518dcd26fa487430e1a6a655c702019854e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQyMjoyOToxMFrOGVwZug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQyMjoyOToxMFrOGVwZug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTQ2NjI5OA==", "bodyText": "@spacether , can you comment on:\n\nIn Python-experimental, what is the use case for modeling additionalProperties as a parent container? What is the purpose of calling addParentContainer()? I don't understand the use case.\n\nIf I comment out the call to addParentContainer(), nothing changes in the generated output of ./bin/openapi3/python-experimental-petstore.sh and ./openapi3/python-experimental-petstore.sh\n\n\nI am guessing the intent was addParentContainer should be called only when additionalProperties is a reference. It should not be called if additionalProperties: false. Right? I.e. if addProps is null, addParentContainer() should not be called.\nDoes it really matter if the additionalProperties are defined inline versus as a $ref? Shouldn't we set codegenModel.additionalPropertiesType in both cases? Or do we really need to model a $ref additionalProperties as a parent?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#discussion_r425466298", "createdAt": "2020-05-14T22:29:10Z", "author": {"login": "sebastien-rosset"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/PythonClientExperimentalCodegen.java", "diffHunk": "@@ -970,13 +972,17 @@ public String toInstantiationType(Schema property) {\n     @Override\n     protected void addAdditionPropertiesToCodeGenModel(CodegenModel codegenModel, Schema schema) {\n         Schema addProps = ModelUtils.getAdditionalProperties(schema);\n-        if (addProps != null && addProps.get$ref() == null) {\n-            // if AdditionalProperties exists and is an inline definition, get its datatype and store it in m.parent\n-            String typeString = getTypeDeclaration(addProps);\n-            codegenModel.additionalPropertiesType = typeString;\n-        } else {\n-            addParentContainer(codegenModel, codegenModel.name, schema);\n+        if (addProps != null) {\n+            if (addProps.get$ref() == null) {\n+                // if AdditionalProperties exists and is an inline definition, get its datatype and\n+                // store it in codegenModel.additionalPropertiesType.\n+                codegenModel.additionalPropertiesType = getTypeDeclaration(addProps);;\n+            } else {\n+                addParentContainer(codegenModel, codegenModel.name, schema);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64723518dcd26fa487430e1a6a655c702019854e"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e158fef4a814f1f404c9c1bac76dda08490f3eae", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/e158fef4a814f1f404c9c1bac76dda08490f3eae", "committedDate": "2020-05-14T23:02:55Z", "message": "Add more unit tests for Python"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "250dd7cd6a82848189eb5a964977dac5bc8853d1", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/250dd7cd6a82848189eb5a964977dac5bc8853d1", "committedDate": "2020-05-15T00:32:29Z", "message": "Handle reference in additionalProperty keyword"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b4fa1fd9a59d4c70deda65ba57ed7204f9b1d32", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/6b4fa1fd9a59d4c70deda65ba57ed7204f9b1d32", "committedDate": "2020-05-15T00:32:38Z", "message": "Handle reference in additionalProperty keyword"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3b2261bc0deb3cc611c471f9714961efc173a19a", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/3b2261bc0deb3cc611c471f9714961efc173a19a", "committedDate": "2020-05-15T00:33:06Z", "message": "Add use case for additionalProperties and reference"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8b6d221aabab0c3db5b85c5f6400a645a60f834", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/b8b6d221aabab0c3db5b85c5f6400a645a60f834", "committedDate": "2020-05-15T14:52:57Z", "message": "run sample scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66ec230f74d25a22e49734e06bb39fbc7c18cfc6", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/66ec230f74d25a22e49734e06bb39fbc7c18cfc6", "committedDate": "2020-05-15T14:53:49Z", "message": "resolve schema reference"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyNzIyODgz", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#pullrequestreview-412722883", "createdAt": "2020-05-15T14:56:35Z", "commit": {"oid": "66ec230f74d25a22e49734e06bb39fbc7c18cfc6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxNDo1NjozNVrOGWIXIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQxNDo1NjozNVrOGWIXIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTg1ODg0OA==", "bodyText": "@spacether , here this is not correctly generated, it should be a reference to the Fruit class defined in ./petstore_api/models/fruit.py.\nI know the problem is in the addAdditionPropertiesToCodeGenModel function. When resolving a schema reference, the generated model name is not using the schema name because Schema.name is null. Do you have a recommendation how to fix this problem?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#discussion_r425858848", "createdAt": "2020-05-15T14:56:35Z", "author": {"login": "sebastien-rosset"}, "path": "samples/openapi3/client/petstore/python-experimental/petstore_api/models/drawing.py", "diffHunk": "@@ -69,7 +69,7 @@ class Drawing(ModelNormal):\n     validations = {\n     }\n \n-    additional_properties_type = None\n+    additional_properties_type = (one_ofapplebanana.OneOfapplebanana,)  # noqa: E501", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "66ec230f74d25a22e49734e06bb39fbc7c18cfc6"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "594332a6fc70c8320ac57cab35deab7d7bf44fa8", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/594332a6fc70c8320ac57cab35deab7d7bf44fa8", "committedDate": "2020-05-15T18:12:44Z", "message": "Add OpenAPI argument"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12c55cab66977394f144b35b0d300b8f9310e0f8", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/12c55cab66977394f144b35b0d300b8f9310e0f8", "committedDate": "2020-05-15T18:13:21Z", "message": "Add OpenAPI argument"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0b198a8ed3c1d281fa42fb604f40f5c33bbdac2", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/b0b198a8ed3c1d281fa42fb604f40f5c33bbdac2", "committedDate": "2020-05-15T18:14:07Z", "message": "Add OpenAPI argument"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "628520d636588208bc2d1caa39dd7e9505d9e97c", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/628520d636588208bc2d1caa39dd7e9505d9e97c", "committedDate": "2020-05-15T18:14:26Z", "message": "Add OpenAPI argument"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa07164010cac1dbb964e67082e55b5ef2a4522e", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/fa07164010cac1dbb964e67082e55b5ef2a4522e", "committedDate": "2020-05-15T18:14:44Z", "message": "Add OpenAPI argument"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d45636bff706df8f728258e7f628f4c2663eebb4", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/d45636bff706df8f728258e7f628f4c2663eebb4", "committedDate": "2020-05-16T01:35:32Z", "message": "Handle additional property keyword with reference"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a1c42530e414b36e91ec6329d77f9828fab4349", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/8a1c42530e414b36e91ec6329d77f9828fab4349", "committedDate": "2020-05-16T01:35:54Z", "message": "Handle additional property keyword with reference"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed36b759063b2b9a98050c3b16d1b4957f41fed4", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/ed36b759063b2b9a98050c3b16d1b4957f41fed4", "committedDate": "2020-05-16T01:36:15Z", "message": "Handle additional property keyword with reference"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "230c2b8f948f095e9cdb65b47c86bcf5196c687c", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/230c2b8f948f095e9cdb65b47c86bcf5196c687c", "committedDate": "2020-05-16T01:36:39Z", "message": "Handle additional property keyword with reference"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "726d47eab53dadda3f427a11653b8b458b14f9cb", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/726d47eab53dadda3f427a11653b8b458b14f9cb", "committedDate": "2020-05-16T01:40:46Z", "message": "add additionalproperties attribute with boolean values"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a67cc80ce4e6bb6de6f95841c3b9a8367e96dfc7", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/a67cc80ce4e6bb6de6f95841c3b9a8367e96dfc7", "committedDate": "2020-05-16T01:43:58Z", "message": "Run sample scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a207f674a8cceebb74a47b8c8474781467b6572", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/7a207f674a8cceebb74a47b8c8474781467b6572", "committedDate": "2020-05-16T04:29:37Z", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c729225a81c58038c1e776ba5acada7f2f3d1d30", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/c729225a81c58038c1e776ba5acada7f2f3d1d30", "committedDate": "2020-05-16T04:30:00Z", "message": "Merge branch 'master' of github.com:CiscoM31/openapi-generator into all-of-additional-properties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd1f8fd2c585e0a3f3f146bacad63f5ded40bc1b", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/cd1f8fd2c585e0a3f3f146bacad63f5ded40bc1b", "committedDate": "2020-05-16T04:32:25Z", "message": "handle additional properties"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMDQ3NjQ2", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#pullrequestreview-413047646", "createdAt": "2020-05-16T04:52:35Z", "commit": {"oid": "cd1f8fd2c585e0a3f3f146bacad63f5ded40bc1b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNlQwNDo1MjozNVrOGWYNXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNlQwNDo1MjozNVrOGWYNXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjExODQ5Mg==", "bodyText": "Should we handle this in a preprocessor before a v2 spec is converted to v3?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#discussion_r426118492", "createdAt": "2020-05-16T04:52:35Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/utils/ModelUtils.java", "diffHunk": "@@ -1080,12 +1080,55 @@ public static Schema unaliasSchema(OpenAPI openAPI,\n         return schema;\n     }\n \n-    public static Schema getAdditionalProperties(Schema schema) {\n-        if (schema.getAdditionalProperties() instanceof Schema) {\n-            return (Schema) schema.getAdditionalProperties();\n+    /**\n+     * Returns the additionalProperties Schema for the specified input schema.\n+     * \n+     * The additionalProperties keyword is used to control the handling of additional, undeclared\n+     * properties, that is, properties whose names are not listed in the properties keyword.\n+     * The additionalProperties keyword may be either a boolean or an object.\n+     * If additionalProperties is a boolean and set to false, no additional properties are allowed.\n+     * By default when the additionalProperties keyword is not specified in the input schema,\n+     * any additional properties are allowed. This is equivalent to setting additionalProperties\n+     * to the boolean value True or setting additionalProperties: {}\n+     * \n+     * @param openAPI the object that encapsulates the OAS document.\n+     * @param schema the input schema that may or may not have the additionalProperties keyword.\n+     * @return the Schema of the additionalProperties. The null value is returned if no additional\n+     *         properties are allowed.\n+     */\n+    public static Schema getAdditionalProperties(OpenAPI openAPI, Schema schema) {\n+        Object addProps = schema.getAdditionalProperties();\n+        if (addProps instanceof Schema) {\n+            return (Schema) addProps;\n+        }\n+        if (addProps == null) {\n+            Map<String, Object> extensions = openAPI.getExtensions();\n+            if (extensions != null) {\n+                // Get original swagger version from OAS extension.\n+                // Note openAPI.getOpenapi() is always set to 3.x even when the document\n+                // is converted from a OAS/Swagger 2.0 document.\n+                // https://github.com/swagger-api/swagger-parser/pull/1374\n+                Object ext = extensions.get(\"x-original-swagger-version\");\n+                if (ext instanceof String) {\n+                    SemVer version = new SemVer((String)ext);\n+                    if (version.major == 2) {\n+                        // The OAS version 2 parser sets Schema.additionalProperties to the null value\n+                        // even if the OAS document has additionalProperties: true|false\n+                        // So we are unable to determine if additional properties are allowed or not.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cd1f8fd2c585e0a3f3f146bacad63f5ded40bc1b"}, "originalPosition": 75}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMDYwMzQx", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#pullrequestreview-413060341", "createdAt": "2020-05-16T08:48:04Z", "commit": {"oid": "cd1f8fd2c585e0a3f3f146bacad63f5ded40bc1b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNlQwODo0ODowNVrOGWZKew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNlQwODo0ODowNVrOGWZKew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjEzNDEzOQ==", "bodyText": "Should this OAS document definition result in python classes that have identical vales for additional_properties_type? My understanding was that they should be identical for these models:\ncomponents:\n  AnyPropertiesAdditionalPropertiesOmitted:\n    type: object\n    properties:\n      name:\n        type: string\n  AnyPropertiesAdditionalPropertiesTrue:\n    type: object\n    properties:\n      name:\n        type: string\n    additionalProperties: True\n  AnyPropertiesAdditionalPropertiesEmptySchema:\n    type: object\n    properties:\n      name:\n        type: string\n    additionalProperties: {}\n  AnyPropertiesAdditionalPropertiesEmptyObject:\n    type: object\n    properties:\n      name:\n        type: string\n    additionalProperties:\n      type: object\n\nI had a misunderstanding here, I thought that AnyPropertiesAdditionalPropertiesEmptyObject was the same as the three other models:\n\nAnyPropertiesAdditionalPropertiesOmitted\nAnyPropertiesAdditionalPropertiesTrue\nAnyPropertiesAdditionalPropertiesEmptySchema\n\nBut I see from here that that interpretation is incorrect.\nHow about we update our model names and property names to convey this understanding to our users?\n/Users/justin/programming/openapi-generator/modules/openapi-generator/src/test/resources/2_0/python-client-experimental/petstore-with-fake-endpoints-models-for-testing.yaml\n\n\nHow about changing the model name AdditionalPropertiesArray to AdditionalPropertiesArrayOfMapAnytype\n\n\nHow about changing the model name AdditionalPropertiesAnyType to AdditionalPropertiesMapAnytype\n\n\nAdditionalPropertiesClass:\nmap_array_anytype:\n\nHow about changing the inner definition to {} rather than {type: object} to have the data type match this variable name?\n\nmap_map_anytype:\n\nHow about keeping the name and changing the definition to {} rather than {type: object} to have the data type match this variable name?\n\nanytype_1:\n\nHow about changing this name to map_anytype1 to have the data type match this variable name:\n\nanytype_2:\n\nI think that this should this result in the data type (bool, date, datetime, dict, float, int, list, str,)\nWhy is this data type the same as anytype_1 + anytype_3?\n\nanytype_3:\n\nHow about changing this name to map_anytype2 to have the data type match this variable name:", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#discussion_r426134139", "createdAt": "2020-05-16T08:48:05Z", "author": {"login": "spacether"}, "path": "samples/client/petstore/python-experimental/petstore_api/models/additional_properties_any_type.py", "diffHunk": "@@ -64,7 +64,7 @@ class AdditionalPropertiesAnyType(ModelNormal):\n     validations = {\n     }\n \n-    additional_properties_type = (bool, date, datetime, dict, float, int, list, str,)  # noqa: E501\n+    additional_properties_type = ({str: (bool, date, datetime, dict, float, int, list, str, none_type)},)  # noqa: E501", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cd1f8fd2c585e0a3f3f146bacad63f5ded40bc1b"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "776fba674a32e37709670a94a5a390f75c6d1e1a", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/776fba674a32e37709670a94a5a390f75c6d1e1a", "committedDate": "2020-05-18T16:11:47Z", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7773c48d0ea78dc7883fda9175600ad790f157fe", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/7773c48d0ea78dc7883fda9175600ad790f157fe", "committedDate": "2020-05-18T16:13:52Z", "message": "resolve merge conflicts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70f6207f6d7ceb75f47f8f6f2a768b568af46fa7", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/70f6207f6d7ceb75f47f8f6f2a768b568af46fa7", "committedDate": "2020-05-18T23:45:30Z", "message": "Handle additionalProperties boolean values"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4d049f26d0086b0331435b097f6fdb2deca54c0", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/c4d049f26d0086b0331435b097f6fdb2deca54c0", "committedDate": "2020-05-19T01:27:59Z", "message": "Run sample scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98e862abc3f3a0fceed4720c09c2300182054b01", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/98e862abc3f3a0fceed4720c09c2300182054b01", "committedDate": "2020-05-19T04:28:29Z", "message": "fix javadoc issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86d6733f1d24229e1cc82b0a0a812a83acbf739f", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/86d6733f1d24229e1cc82b0a0a812a83acbf739f", "committedDate": "2020-05-19T04:33:14Z", "message": "fix javadoc issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f51fb030dc53f0c55a345ecb8a8d45848759b7d", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/1f51fb030dc53f0c55a345ecb8a8d45848759b7d", "committedDate": "2020-05-19T04:42:28Z", "message": "Add Locale to String.toLowerCase"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "886d41209f384ba82455686cfa74e941640cd019", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/886d41209f384ba82455686cfa74e941640cd019", "committedDate": "2020-05-19T05:32:04Z", "message": "execute sample scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4bdf1114144164cfa95eb1bc140d21f54f0883fb", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/4bdf1114144164cfa95eb1bc140d21f54f0883fb", "committedDate": "2020-05-19T15:17:40Z", "message": "handle additional properties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3fac4347d19f6e1d80083487a5ec69dd4358428e", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/3fac4347d19f6e1d80083487a5ec69dd4358428e", "committedDate": "2020-05-19T15:25:28Z", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45bf56508291cfa881e7d8b1a7cd014ff15ebfac", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/45bf56508291cfa881e7d8b1a7cd014ff15ebfac", "committedDate": "2020-05-19T15:26:02Z", "message": "Merge branch 'master' of github.com:CiscoM31/openapi-generator into all-of-additional-properties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b05b4150b8c7e99d34bb6c6658a5da400ff2bac9", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/b05b4150b8c7e99d34bb6c6658a5da400ff2bac9", "committedDate": "2020-05-19T17:34:49Z", "message": "Add code comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NzMwNDY3", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#pullrequestreview-414730467", "createdAt": "2020-05-19T18:49:28Z", "commit": {"oid": "b05b4150b8c7e99d34bb6c6658a5da400ff2bac9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxODo0OToyOVrOGXuEKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxODo0OToyOVrOGXuEKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUyNTE2Mw==", "bodyText": "@spacether , here the model type is set in the codegenModel.additionalPropertiesType property, assigned by the addAdditionPropertiesToCodeGenModel() function. I need to add that type to the imports, otherwise Python cannot lookup the type.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#discussion_r427525163", "createdAt": "2020-05-19T18:49:29Z", "author": {"login": "sebastien-rosset"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/PythonClientExperimentalCodegen.java", "diffHunk": "@@ -907,18 +909,27 @@ private String getTypeString(Schema p, String prefix, String suffix) {\n         if (\")\".equals(suffix)) {\n             fullSuffix = \",\" + suffix;\n         }\n-        if (ModelUtils.isAnyTypeSchema(p)) {\n+        if (StringUtils.isNotEmpty(p.get$ref())) {\n+            // The input schema is a reference. If the resolved schema is\n+            // a composed schema, convert the name to a Python class.\n+            Schema s = ModelUtils.getReferencedSchema(this.openAPI, p);\n+            if (s instanceof ComposedSchema) {\n+                String modelName = ModelUtils.getSimpleRef(p.get$ref());\n+                return prefix + toModelName(modelName) + fullSuffix;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b05b4150b8c7e99d34bb6c6658a5da400ff2bac9"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f57338d2110e0694dec7c0e07c9966c914c74359", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/f57338d2110e0694dec7c0e07c9966c914c74359", "committedDate": "2020-05-19T20:34:51Z", "message": "Handle imports of referenced models in additional properties"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0ODEzMTEw", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#pullrequestreview-414813110", "createdAt": "2020-05-19T20:51:08Z", "commit": {"oid": "f57338d2110e0694dec7c0e07c9966c914c74359"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQyMDo1MTowOFrOGXyJDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQyMDo1MTowOFrOGXyJDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU5MTk1MA==", "bodyText": "Note to self: the generated openapi_types() is wrong, it should include none_type.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#discussion_r427591950", "createdAt": "2020-05-19T20:51:08Z", "author": {"login": "sebastien-rosset"}, "path": "samples/openapi3/client/petstore/python-experimental/petstore_api/models/shape_or_null.py", "diffHunk": "@@ -74,7 +74,7 @@ class ShapeOrNull(ModelComposed):\n     validations = {\n     }\n \n-    additional_properties_type = None\n+    additional_properties_type = (bool, date, datetime, dict, float, int, list, str, none_type,)  # noqa: E501\n \n     @cached_property\n     def openapi_types():", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f57338d2110e0694dec7c0e07c9966c914c74359"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be49ab4b3f75b2861c46a87e79ae9fe98affd0fa", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/be49ab4b3f75b2861c46a87e79ae9fe98affd0fa", "committedDate": "2020-05-19T22:43:39Z", "message": "Handle isNullable class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "faecafdf61dbcb04be46c7e72087106aca9b4ee3", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/faecafdf61dbcb04be46c7e72087106aca9b4ee3", "committedDate": "2020-05-20T00:17:55Z", "message": "handle nullable type"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0OTMzMDU5", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#pullrequestreview-414933059", "createdAt": "2020-05-20T01:32:22Z", "commit": {"oid": "faecafdf61dbcb04be46c7e72087106aca9b4ee3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwMTozMjoyMlrOGX4PeQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwMTozMjoyMlrOGX4PeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzY5MTg5Nw==", "bodyText": "This description is confusing to me. We are describing it as legacyAdditionalPropertiesBehavior.\nSo it sounds like True mean s use legacy behavior.\nBut then in our definition we say true is spec compliant behavior\nFalse is legacy non-compliant behavior here.\nHow about instead naming this something like:\n\nNULLABLE_ADDITIONAL_PROPERTIES_BEHAVIOR\nCOMPLIANT_ADDITIONAL_PROPERTIES_BEHAVIOR\nor keeping it:\nLEGACY_ADDITIONAL_PROPERTIES_BEHAVIOR\nbut have True be non-compliant legacy behavior, and False be compliant behavior\n\nAlso, what generator sets this to True?\nI don't see that happening outside fo the tests. Did I miss it?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6290#discussion_r427691897", "createdAt": "2020-05-20T01:32:22Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/CodegenConstants.java", "diffHunk": "@@ -359,4 +359,18 @@\n     public static final String USE_SINGLE_REQUEST_PARAMETER = \"useSingleRequestParameter\";\n     public static final String USE_SINGLE_REQUEST_PARAMETER_DESC = \"Setting this property to true will generate functions with a single argument containing all API endpoint parameters instead of one argument per parameter.\";\n \n+    // The reason this parameter exists is because there is a dependency\n+    // on swagger-api/swagger-parser issue https://github.com/swagger-api/swagger-parser/issues/1369.\n+    // When that issue is resolved, this parameter should be removed.\n+    public static final String LEGACY_ADDITIONAL_PROPERTIES_BEHAVIOR = \"legacyAdditionalPropertiesBehavior\";\n+    public static final String LEGACY_ADDITIONAL_PROPERTIES_BEHAVIOR_DESC =\n+        \"If true, the 'additionalProperties' keyword is implemented as specified in the OAS and JSON schema specifications. \" +\n+        \"Full compliance currently works with OAS 3.0 documents only. \" +\n+        \"It is not supported for 2.0 documents until issues #1369 and #1371 have been resolved in the dependent swagger-parser project. \" +\n+        \"If false, codegen uses a legacy, non-compliant interpretation of the 'additionalProperties' keyword. \" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "faecafdf61dbcb04be46c7e72087106aca9b4ee3"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cbfa01857ef4ff5b775360402695a5338dd088b3", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/cbfa01857ef4ff5b775360402695a5338dd088b3", "committedDate": "2020-05-20T02:21:11Z", "message": "improve documentation, run sample scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45959d85ae919e2e063eff0352300fdf12a44595", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/45959d85ae919e2e063eff0352300fdf12a44595", "committedDate": "2020-05-20T02:24:54Z", "message": "improve documentation, run sample scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1cc405c9858b7478976fcf963070907d905c32be", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/1cc405c9858b7478976fcf963070907d905c32be", "committedDate": "2020-05-20T13:15:28Z", "message": "execute sample scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f55c2f0dc705348f0deeacc6cdaa89ea6b94b0f5", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/f55c2f0dc705348f0deeacc6cdaa89ea6b94b0f5", "committedDate": "2020-05-20T13:19:46Z", "message": "execute sample scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a96c46b93f34b825763df703150c3611ddd5b625", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/a96c46b93f34b825763df703150c3611ddd5b625", "committedDate": "2020-05-20T13:30:30Z", "message": "Merge branch 'master' of https://github.com/OpenAPITools/openapi-generator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eeb6ed082f0401b2b500d1c6ac5e616a5bf39ce6", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/eeb6ed082f0401b2b500d1c6ac5e616a5bf39ce6", "committedDate": "2020-05-20T13:30:56Z", "message": "Merge branch 'master' of github.com:CiscoM31/openapi-generator into all-of-additional-properties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c41d5fc7278fa3ff320fa16f9ffa888343018e69", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/c41d5fc7278fa3ff320fa16f9ffa888343018e69", "committedDate": "2020-05-20T16:28:39Z", "message": "Execute sample scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cb7acd6c1c82a368f23206739dd33324d185402", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/2cb7acd6c1c82a368f23206739dd33324d185402", "committedDate": "2020-05-20T16:33:40Z", "message": "Run samples scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ddbb667407e02e40064492b0947d8d6e68cec673", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/ddbb667407e02e40064492b0947d8d6e68cec673", "committedDate": "2020-05-20T21:05:41Z", "message": "set legacyAdditionalPropertiesBehavior to true by default, except python"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f12663a61616db4287e2151c47cec4148e274769", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/f12663a61616db4287e2151c47cec4148e274769", "committedDate": "2020-05-20T21:30:16Z", "message": "create separate yaml file to avoid having lots of changes in the pr"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "88dd98fe22117a8787365e3eb5b156641f7dad18", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/88dd98fe22117a8787365e3eb5b156641f7dad18", "committedDate": "2020-05-20T21:38:16Z", "message": "create separate yaml file to avoid having lots of changes in the pr"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "782bdf6ccbaf835d003ed30e12c97c25a4e250d8", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/782bdf6ccbaf835d003ed30e12c97c25a4e250d8", "committedDate": "2020-05-20T22:02:42Z", "message": "create separate yaml file to avoid having lots of changes in the pr"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58d38c25cc839ee94526a3bc4b4047bf2b0951b0", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/58d38c25cc839ee94526a3bc4b4047bf2b0951b0", "committedDate": "2020-05-20T22:04:44Z", "message": "create separate yaml file to avoid having lots of changes in the pr"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4be1ef93ab1ac26f722500b210ddd34a4395db8a", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/4be1ef93ab1ac26f722500b210ddd34a4395db8a", "committedDate": "2020-05-20T22:07:24Z", "message": "create separate yaml file to avoid having lots of changes in the pr"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9fd0685dc0ec5c2d1c138bf6eec08c9ae450813a", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/9fd0685dc0ec5c2d1c138bf6eec08c9ae450813a", "committedDate": "2020-05-20T22:10:23Z", "message": "create separate yaml file to avoid having lots of changes in the pr"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac278121f25798eb7a6976e488c3a9c3ff04804f", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/ac278121f25798eb7a6976e488c3a9c3ff04804f", "committedDate": "2020-05-21T02:05:39Z", "message": "Change name of CLI option"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d9518f1e814db5f72d7d764f198d99ae8ea69ef5", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/d9518f1e814db5f72d7d764f198d99ae8ea69ef5", "committedDate": "2020-05-21T02:09:08Z", "message": "Generate doc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79e5ecf7edb7fa4eaf430577e5ef906e4a06c8b9", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/79e5ecf7edb7fa4eaf430577e5ef906e4a06c8b9", "committedDate": "2020-05-21T02:16:55Z", "message": "Add TODO statement"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34740a1553e0dd3f9d10a0764641dff87bd0916c", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/34740a1553e0dd3f9d10a0764641dff87bd0916c", "committedDate": "2020-05-21T02:30:37Z", "message": "add code comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "598b0e489c516bd775a2585a9dc89a2ce0137ebc", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/598b0e489c516bd775a2585a9dc89a2ce0137ebc", "committedDate": "2020-05-21T03:21:22Z", "message": "run samples scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d93337187059bf06ae66984aec7f47112b60957", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/8d93337187059bf06ae66984aec7f47112b60957", "committedDate": "2020-05-21T03:43:07Z", "message": "run sample scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7195e03be7ca6351e14746b8352615f628b80fc2", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/7195e03be7ca6351e14746b8352615f628b80fc2", "committedDate": "2020-05-21T03:45:56Z", "message": "run sample scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9212c85a7642527ae4385bc78ec3d6b6a4601d64", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/9212c85a7642527ae4385bc78ec3d6b6a4601d64", "committedDate": "2020-05-21T03:47:56Z", "message": "run sample scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc80080e232460c1ee309dbf993101963725e6df", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/cc80080e232460c1ee309dbf993101963725e6df", "committedDate": "2020-05-21T03:50:15Z", "message": "run sample scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3604c95c164bcb116061c0c28e85d9b0540e12e2", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/3604c95c164bcb116061c0c28e85d9b0540e12e2", "committedDate": "2020-05-21T03:53:37Z", "message": "run sample scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dee6dc4901ef3542d1c2c63a753fb6c5f46f3402", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/dee6dc4901ef3542d1c2c63a753fb6c5f46f3402", "committedDate": "2020-05-21T03:55:02Z", "message": "run sample scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b6797466de507cec4f10169c9911dc76016eb5b", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/0b6797466de507cec4f10169c9911dc76016eb5b", "committedDate": "2020-05-21T03:57:14Z", "message": "run sample scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22777e7e7cd274f05cf577376ecc8e6080838401", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/22777e7e7cd274f05cf577376ecc8e6080838401", "committedDate": "2020-05-21T04:02:25Z", "message": "run sample scripts"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a389e185b834933cccc880f061bee33ca2369d17", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/a389e185b834933cccc880f061bee33ca2369d17", "committedDate": "2020-05-21T04:03:31Z", "message": "run sample scripts"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2229, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}