{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyNDU0NjYy", "number": 5679, "reviewThreads": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNTowOToyNlrODrQg4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQwNDo1NjoyOFrOD1lzVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ2Njg1OTIxOnYy", "diffSide": "RIGHT", "path": "samples/client/petstore/python-asyncio/docs/FakeApi.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNTowOToyNlrOF7fwkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNVQxNTowOToyNlrOF7fwkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzkzMDY0Mg==", "bodyText": "Why is this None? Can we add a byte example here?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5679#discussion_r397930642", "createdAt": "2020-03-25T15:09:26Z", "author": {"login": "spacether"}, "path": "samples/client/petstore/python-asyncio/docs/FakeApi.md", "diffHunk": "@@ -490,7 +490,7 @@ with petstore_api.ApiClient(configuration) as api_client:\n     number = 3.4 # float | None\n double = 3.4 # float | None\n pattern_without_delimiter = 'pattern_without_delimiter_example' # str | None\n-byte = 'byte_example' # str | None\n+byte = None # bytes | None", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "90f5bb06f1e76df35bafbe85d03eefa1080a3b8e"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3MjcxMDI0OnYy", "diffSide": "RIGHT", "path": "samples/client/petstore/python-experimental/tests/test_api_exception.py", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMDoxMjo1N1rOF8Yllw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMTozMDo0MFrOF8bOSQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg2MTcxOQ==", "bodyText": "So we used to have e.body decoded here.\nYour change as-is is breaking for the python generator because you are changing the type of e.body.\nSorry, I know that in the related issue I suggested putting it in the api client but I didn't know that it wouldbe a breaking change.\nCan you move you decoding code into rest.mustache to make this a non-breaking change?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5679#discussion_r398861719", "createdAt": "2020-03-26T20:12:57Z", "author": {"login": "spacether"}, "path": "samples/client/petstore/python-experimental/tests/test_api_exception.py", "diffHunk": "@@ -50,7 +51,8 @@ def test_404_error(self):\n         except ApiException as e:\n             self.assertEqual(e.status, 404)\n             self.assertEqual(e.reason, \"Not Found\")\n-            self.checkRegex(e.body, \"Pet not found\")\n+            body = e.body.decode('utf-8') if six.PY3 else e.body\n+            self.checkRegex(body, \"Pet not found\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0969835ae47d9ce9ca0f421bd75c93da77287acb"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg3MzU2Ng==", "bodyText": "@spacether I actually tried to put the decoding in rest.py but there's no access to response_type there (which is what is used to determine if something should be decoded or not). Would adding response_type as a parameter to call_api be preferable to this method (I'm assuming both are breaking changes so I'm not sure which is the better spot)?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5679#discussion_r398873566", "createdAt": "2020-03-26T20:34:24Z", "author": {"login": "CrshOverride"}, "path": "samples/client/petstore/python-experimental/tests/test_api_exception.py", "diffHunk": "@@ -50,7 +51,8 @@ def test_404_error(self):\n         except ApiException as e:\n             self.assertEqual(e.status, 404)\n             self.assertEqual(e.reason, \"Not Found\")\n-            self.checkRegex(e.body, \"Pet not found\")\n+            body = e.body.decode('utf-8') if six.PY3 else e.body\n+            self.checkRegex(body, \"Pet not found\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg2MTcxOQ=="}, "originalCommit": {"oid": "0969835ae47d9ce9ca0f421bd75c93da77287acb"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkwNDkwNQ==", "bodyText": "Hmmm, what if we captured the raised exception in api_client:\n\ndecoded the exception body\nre-raised the exception?\n\nThen we have a non-breaking change.\nBeetlejuice beetlejuice beetle- @jimschubert @wing328 do you have feelings about\nchanging the interface here vs capturing, fixing and re-raising the exception with the decoded body?\nI prefer my proposed non-breaking change  vs a breaking interface change.\nThe breaking change is cleaner but it would delay this PR from landing until we have one with breaking changes in it.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5679#discussion_r398904905", "createdAt": "2020-03-26T21:30:40Z", "author": {"login": "spacether"}, "path": "samples/client/petstore/python-experimental/tests/test_api_exception.py", "diffHunk": "@@ -50,7 +51,8 @@ def test_404_error(self):\n         except ApiException as e:\n             self.assertEqual(e.status, 404)\n             self.assertEqual(e.reason, \"Not Found\")\n-            self.checkRegex(e.body, \"Pet not found\")\n+            body = e.body.decode('utf-8') if six.PY3 else e.body\n+            self.checkRegex(body, \"Pet not found\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg2MTcxOQ=="}, "originalCommit": {"oid": "0969835ae47d9ce9ca0f421bd75c93da77287acb"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NjgwMDM2OnYy", "diffSide": "RIGHT", "path": "samples/client/petstore/python-experimental/tests/test_deserialization.py", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNzoxNzoyMFrOGIfI_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxNzo0ODo1OFrOGIgaRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTU1MTk5OQ==", "bodyText": "Can you rename this deserialize_binary_to_str ?\nThe current name implies that we expect to receive binary data and process it as binary in downstream consumers.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5679#discussion_r411551999", "createdAt": "2020-04-20T17:17:20Z", "author": {"login": "spacether"}, "path": "samples/client/petstore/python-experimental/tests/test_deserialization.py", "diffHunk": "@@ -377,6 +380,36 @@ def get_header(name, default=None):\n         finally:\n             os.unlink(file_path)\n \n+    def test_deserialize_binary(self):", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "654f1cd47847ce57c8749ed7586de061962c643f"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTU2MDQ3OQ==", "bodyText": "Can you add a separate test where we keep the response data in bytes?\nI'm not sure if we should return an open file object if bytes are received. We chose to store them in a file object before because a file was sent. How about keeping non-file bytes in a value of type bytes?\nIf I were receiving bytes as a user I would not expect them to be stored in a file object.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5679#discussion_r411560479", "createdAt": "2020-04-20T17:30:08Z", "author": {"login": "spacether"}, "path": "samples/client/petstore/python-experimental/tests/test_deserialization.py", "diffHunk": "@@ -377,6 +380,36 @@ def get_header(name, default=None):\n         finally:\n             os.unlink(file_path)\n \n+    def test_deserialize_binary(self):", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTU1MTk5OQ=="}, "originalCommit": {"oid": "654f1cd47847ce57c8749ed7586de061962c643f"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTU3MjgwNQ==", "bodyText": "How do we know that sending bytes will work?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5679#discussion_r411572805", "createdAt": "2020-04-20T17:48:58Z", "author": {"login": "spacether"}, "path": "samples/client/petstore/python-experimental/tests/test_deserialization.py", "diffHunk": "@@ -377,6 +380,36 @@ def get_header(name, default=None):\n         finally:\n             os.unlink(file_path)\n \n+    def test_deserialize_binary(self):", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTU1MTk5OQ=="}, "originalCommit": {"oid": "654f1cd47847ce57c8749ed7586de061962c643f"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NzA4OTM0OnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/PythonClientCodegen.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxODoyNjoyMVrOGIh1tA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMDoxMjo0MlrOGIlwAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTU5NjIxMg==", "bodyText": "No longer needed because we are only concerned with bytes in the python layer when grabbing the raw response?\nThis comment also applies to lines lines 138, 139, 905-909 and to modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/PythonClientExperimentalCodegen.java", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5679#discussion_r411596212", "createdAt": "2020-04-20T18:26:21Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/PythonClientCodegen.java", "diffHunk": "@@ -119,6 +119,7 @@ public PythonClientCodegen() {\n         languageSpecificPrimitives.add(\"object\");\n         // TODO file and binary is mapped as `file`\n         languageSpecificPrimitives.add(\"file\");\n+        languageSpecificPrimitives.add(\"bytes\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce0fb7ca9ec331162774de509d98f1a5b2ba0fe6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY2MDI4OQ==", "bodyText": "Adding the type here without handling it in python-experimental means that we will have a new unhandled type.\nCan you defer this to the next PR?\nTypes are actively checked in python-experimental and I want to keep that type checking functionality. Adding bytes this way would break python-experimental type checking I think.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5679#discussion_r411660289", "createdAt": "2020-04-20T20:12:42Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/PythonClientCodegen.java", "diffHunk": "@@ -119,6 +119,7 @@ public PythonClientCodegen() {\n         languageSpecificPrimitives.add(\"object\");\n         // TODO file and binary is mapped as `file`\n         languageSpecificPrimitives.add(\"file\");\n+        languageSpecificPrimitives.add(\"bytes\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTU5NjIxMg=="}, "originalCommit": {"oid": "ce0fb7ca9ec331162774de509d98f1a5b2ba0fe6"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NzExMDEwOnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxODozMTozNlrOGIiCaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxODo1NDo0OVrOGIi6fQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTU5OTQ2NQ==", "bodyText": "Should we do this for non-file-type only now?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5679#discussion_r411599465", "createdAt": "2020-04-20T18:31:36Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "diffHunk": "@@ -186,22 +186,36 @@ class ApiClient(object):\n             # use server/host defined in path or operation instead\n             url = _host + resource_path\n \n-        # perform request and return response\n-        response_data = {{#asyncio}}await {{/asyncio}}{{#tornado}}yield {{/tornado}}self.request(\n-            method, url, query_params=query_params, headers=header_params,\n-            post_params=post_params, body=body,\n-            _preload_content=_preload_content,\n-            _request_timeout=_request_timeout)\n-\n-        self.last_response = response_data\n-\n-        return_data = response_data\n-        if _preload_content:\n-            # deserialize response data\n-            if response_type:\n-                return_data = self.deserialize(response_data, response_type)\n-            else:\n-                return_data = None\n+        try:\n+            # perform request and return response\n+            response_data = {{#asyncio}}await {{/asyncio}}{{#tornado}}yield {{/tornado}}self.request(\n+                method, url, query_params=query_params, headers=header_params,\n+                post_params=post_params, body=body,\n+                _preload_content=_preload_content,\n+                _request_timeout=_request_timeout)\n+\n+            content_type = response_data.getheader('content-type')\n+\n+            self.last_response = response_data\n+\n+            return_data = response_data\n+            if _preload_content:\n+                if six.PY3:\n+                    if response_type not in [\"file\", \"bytes\"]:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce0fb7ca9ec331162774de509d98f1a5b2ba0fe6"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYwNzc4OA==", "bodyText": "@spacether If possible, I'd like to leave the groundwork for the next PR if at all possible (if it's not hurting anything).", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5679#discussion_r411607788", "createdAt": "2020-04-20T18:45:02Z", "author": {"login": "CrshOverride"}, "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "diffHunk": "@@ -186,22 +186,36 @@ class ApiClient(object):\n             # use server/host defined in path or operation instead\n             url = _host + resource_path\n \n-        # perform request and return response\n-        response_data = {{#asyncio}}await {{/asyncio}}{{#tornado}}yield {{/tornado}}self.request(\n-            method, url, query_params=query_params, headers=header_params,\n-            post_params=post_params, body=body,\n-            _preload_content=_preload_content,\n-            _request_timeout=_request_timeout)\n-\n-        self.last_response = response_data\n-\n-        return_data = response_data\n-        if _preload_content:\n-            # deserialize response data\n-            if response_type:\n-                return_data = self.deserialize(response_data, response_type)\n-            else:\n-                return_data = None\n+        try:\n+            # perform request and return response\n+            response_data = {{#asyncio}}await {{/asyncio}}{{#tornado}}yield {{/tornado}}self.request(\n+                method, url, query_params=query_params, headers=header_params,\n+                post_params=post_params, body=body,\n+                _preload_content=_preload_content,\n+                _request_timeout=_request_timeout)\n+\n+            content_type = response_data.getheader('content-type')\n+\n+            self.last_response = response_data\n+\n+            return_data = response_data\n+            if _preload_content:\n+                if six.PY3:\n+                    if response_type not in [\"file\", \"bytes\"]:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTU5OTQ2NQ=="}, "originalCommit": {"oid": "ce0fb7ca9ec331162774de509d98f1a5b2ba0fe6"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYxMzgyMQ==", "bodyText": "As long as we remove the bytes addition from the python generator in the java files then I am fine with keeping this as-is. That would make it so we would never see this \"bytes\" type until your later PR.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5679#discussion_r411613821", "createdAt": "2020-04-20T18:54:49Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "diffHunk": "@@ -186,22 +186,36 @@ class ApiClient(object):\n             # use server/host defined in path or operation instead\n             url = _host + resource_path\n \n-        # perform request and return response\n-        response_data = {{#asyncio}}await {{/asyncio}}{{#tornado}}yield {{/tornado}}self.request(\n-            method, url, query_params=query_params, headers=header_params,\n-            post_params=post_params, body=body,\n-            _preload_content=_preload_content,\n-            _request_timeout=_request_timeout)\n-\n-        self.last_response = response_data\n-\n-        return_data = response_data\n-        if _preload_content:\n-            # deserialize response data\n-            if response_type:\n-                return_data = self.deserialize(response_data, response_type)\n-            else:\n-                return_data = None\n+        try:\n+            # perform request and return response\n+            response_data = {{#asyncio}}await {{/asyncio}}{{#tornado}}yield {{/tornado}}self.request(\n+                method, url, query_params=query_params, headers=header_params,\n+                post_params=post_params, body=body,\n+                _preload_content=_preload_content,\n+                _request_timeout=_request_timeout)\n+\n+            content_type = response_data.getheader('content-type')\n+\n+            self.last_response = response_data\n+\n+            return_data = response_data\n+            if _preload_content:\n+                if six.PY3:\n+                    if response_type not in [\"file\", \"bytes\"]:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTU5OTQ2NQ=="}, "originalCommit": {"oid": "ce0fb7ca9ec331162774de509d98f1a5b2ba0fe6"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NzIyMTQwOnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/resources/python/python-experimental/api_client.mustache", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxODo1ODo0MVrOGIjE3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQxODo1ODo0MVrOGIjE3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTYxNjQ3Ng==", "bodyText": "Style nit (not necessary to change):\nif six.PY3:\n  e.body = e.body.decode('utf-8')\n\nFor the else case we don't need to reassign the value of e.body", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5679#discussion_r411616476", "createdAt": "2020-04-20T18:58:41Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/api_client.mustache", "diffHunk": "@@ -176,26 +176,30 @@ class ApiClient(object):\n             # use server/host defined in path or operation instead\n             url = _host + resource_path\n \n-        # perform request and return response\n-        response_data = {{#asyncio}}await {{/asyncio}}{{#tornado}}yield {{/tornado}}self.request(\n-            method, url, query_params=query_params, headers=header_params,\n-            post_params=post_params, body=body,\n-            _preload_content=_preload_content,\n-            _request_timeout=_request_timeout)\n-\n-        self.last_response = response_data\n-\n-        return_data = response_data\n-        if _preload_content:\n-            # deserialize response data\n-            if response_type:\n-                return_data = self.deserialize(\n-                    response_data,\n-                    response_type,\n-                    _check_type\n-                )\n-            else:\n-                return_data = None\n+        try:\n+            # perform request and return response\n+            response_data = {{#asyncio}}await {{/asyncio}}{{#tornado}}yield {{/tornado}}self.request(\n+                method, url, query_params=query_params, headers=header_params,\n+                post_params=post_params, body=body,\n+                _preload_content=_preload_content,\n+                _request_timeout=_request_timeout)\n+\n+            self.last_response = response_data\n+\n+            return_data = response_data\n+            if _preload_content:\n+                # deserialize response data\n+                if response_type:\n+                    return_data = self.deserialize(\n+                        response_data,\n+                        response_type,\n+                        _check_type\n+                    )\n+                else:\n+                    return_data = None\n+        except ApiException as e:\n+            e.body = e.body.decode('utf-8') if six.PY3 else e.body", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce0fb7ca9ec331162774de509d98f1a5b2ba0fe6"}, "originalPosition": 55}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1NzUxMjM4OnYy", "diffSide": "LEFT", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/PythonClientCodegen.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMDoxMzoxNlrOGIlxUA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMDoxMzoxNlrOGIlxUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY2MDYyNA==", "bodyText": "Can we add these back in?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5679#discussion_r411660624", "createdAt": "2020-04-20T20:13:16Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/PythonClientCodegen.java", "diffHunk": "@@ -134,10 +135,6 @@ public PythonClientCodegen() {\n         typeMapping.put(\"DateTime\", \"datetime\");\n         typeMapping.put(\"object\", \"object\");\n         typeMapping.put(\"file\", \"file\");\n-        // TODO binary should be mapped to byte array\n-        // mapped to String as a workaround\n-        typeMapping.put(\"binary\", \"str\");\n-        typeMapping.put(\"ByteArray\", \"str\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5fe30959809aa44386f1e7fcc9872c4068607881"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1Nzc2MTI4OnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMToxNjozNlrOGIoC-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQyMToxNjozNlrOGIoC-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTY5NzkxNQ==", "bodyText": "Do we need to handle the _preload_content==False case with something like this?\nif not _preload_content:\n  return response_data\n# dedented remaining code without the if _preload_content condition\n...\nif response_type:\n  return self.deserialize(response_data, response_type)\nreturn None", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5679#discussion_r411697915", "createdAt": "2020-04-20T21:16:36Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "diffHunk": "@@ -186,22 +186,36 @@ class ApiClient(object):\n             # use server/host defined in path or operation instead\n             url = _host + resource_path\n \n-        # perform request and return response\n-        response_data = {{#asyncio}}await {{/asyncio}}{{#tornado}}yield {{/tornado}}self.request(\n-            method, url, query_params=query_params, headers=header_params,\n-            post_params=post_params, body=body,\n-            _preload_content=_preload_content,\n-            _request_timeout=_request_timeout)\n-\n-        self.last_response = response_data\n-\n-        return_data = response_data\n-        if _preload_content:\n-            # deserialize response data\n-            if response_type:\n-                return_data = self.deserialize(response_data, response_type)\n-            else:\n-                return_data = None\n+        try:\n+            # perform request and return response\n+            response_data = {{#asyncio}}await {{/asyncio}}{{#tornado}}yield {{/tornado}}self.request(\n+                method, url, query_params=query_params, headers=header_params,\n+                post_params=post_params, body=body,\n+                _preload_content=_preload_content,\n+                _request_timeout=_request_timeout)\n+\n+            content_type = response_data.getheader('content-type')\n+\n+            self.last_response = response_data\n+\n+            return_data = response_data", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "590986b519df8b34e6ee1623c29e7bdb1f44ee14"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1ODUyODIwOnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_utils.mustache", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwMTo0Mzo1MVrOGIuufQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwMzo0MzoxMFrOGIxEHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTgwNzM1Nw==", "bodyText": "Can you remove this and the bytes definition on line 37?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5679#discussion_r411807357", "createdAt": "2020-04-21T01:43:51Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_utils.mustache", "diffHunk": "@@ -25,6 +25,7 @@ if six.PY3:\n     # these are needed for when other modules import str and int from here\n     str = str\n     int = int\n+    bytes = bytes", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9edfdf7424b2da2836dfc253df67bc98a3468f0"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTgwODg3Nw==", "bodyText": "@spacether I originall put it there for consistency with the rest of the definitions (str and int). What's the reasoning not to also include bytes (and wouldn't not including here break imports in other locations)?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5679#discussion_r411808877", "createdAt": "2020-04-21T01:48:25Z", "author": {"login": "CrshOverride"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_utils.mustache", "diffHunk": "@@ -25,6 +25,7 @@ if six.PY3:\n     # these are needed for when other modules import str and int from here\n     str = str\n     int = int\n+    bytes = bytes", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTgwNzM1Nw=="}, "originalCommit": {"oid": "e9edfdf7424b2da2836dfc253df67bc98a3468f0"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTg0NTY2Mg==", "bodyText": "We aren't using this bytes definition yet though, right?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5679#discussion_r411845662", "createdAt": "2020-04-21T03:43:10Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_utils.mustache", "diffHunk": "@@ -25,6 +25,7 @@ if six.PY3:\n     # these are needed for when other modules import str and int from here\n     str = str\n     int = int\n+    bytes = bytes", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTgwNzM1Nw=="}, "originalCommit": {"oid": "e9edfdf7424b2da2836dfc253df67bc98a3468f0"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2NDcyMDAzOnYy", "diffSide": "RIGHT", "path": "samples/client/petstore/python-experimental/tests/test_deserialization.py", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwNjo1MTo1NlrOGJmOOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwNjo1MTo1NlrOGJmOOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjcxNjYwMA==", "bodyText": "The current variable name makes it sound like it should contain a binary value when it contains a string value.\nHow about changing the variable name binary to response or result or deserialized?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5679#discussion_r412716600", "createdAt": "2020-04-22T06:51:56Z", "author": {"login": "spacether"}, "path": "samples/client/petstore/python-experimental/tests/test_deserialization.py", "diffHunk": "@@ -377,6 +377,36 @@ def get_header(name, default=None):\n         finally:\n             os.unlink(file_path)\n \n+    def test_deserialize_binary_to_str(self):\n+        \"\"\"Ensures that bytes deserialization works\"\"\"\n+        response_types_mixed = (str,)\n+\n+        # sample from http://www.jtricks.com/download-text\n+        HTTPResponse = namedtuple(\n+            'urllib3_response_HTTPResponse',\n+            ['status', 'reason', 'data', 'getheaders', 'getheader']\n+        )\n+        headers = {}\n+        def get_headers():\n+            return headers\n+        def get_header(name, default=None):\n+            return headers.get(name, default)\n+        data = \"str\"\n+\n+        http_response = HTTPResponse(\n+            status=200,\n+            reason='OK',\n+            data=json.dumps(data).encode(\"utf-8\") if six.PY3 else json.dumps(data),\n+            getheaders=get_headers,\n+            getheader=get_header\n+        )\n+\n+        mock_response = RESTResponse(http_response)\n+\n+        binary = self.deserialize(mock_response, response_types_mixed, True)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d02d8843e74ea77d3ef3571d57de5e7eedadfd1"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2NDczMjQxOnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_templates/classvars.mustache", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwNjo1NToxMlrOGJmVKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQyMDozNTozOVrOGKKfjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjcxODM3Nw==", "bodyText": "Is this working?\nI am not seeing any samples have binary regex patterns.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5679#discussion_r412718377", "createdAt": "2020-04-22T06:55:12Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_templates/classvars.mustache", "diffHunk": "@@ -53,8 +53,20 @@\n {{/minimum}}\n {{#pattern}}\n             'regex': {\n+            {{#isBinary}}\n                 'pattern': r'{{{vendorExtensions.x-regex}}}',  # noqa: E501{{#vendorExtensions.x-modifiers}}\n                 {{#-first}}'flags': (re.{{.}}{{/-first}}{{^-first}}          re.{{.}}{{/-first}}{{^-last}} | {{/-last}}{{#-last}}){{/-last}}{{/vendorExtensions.x-modifiers}}\n+            {{/isBinary}}\n+            {{^isBinary}}\n+                {{#isByteArray}}\n+                'pattern': r'{{{vendorExtensions.x-regex}}}',  # noqa: E501{{#vendorExtensions.x-modifiers}}\n+                {{#-first}}'flags': (re.{{.}}{{/-first}}{{^-first}}          re.{{.}}{{/-first}}{{^-last}} | {{/-last}}{{#-last}}){{/-last}}{{/vendorExtensions.x-modifiers}}\n+                {{/isByteArray}}\n+                {{^isByteArray}}\n+                'pattern': r'{{{vendorExtensions.x-regex}}}',  # noqa: E501{{#vendorExtensions.x-modifiers}}\n+                {{#-first}}'flags': (re.{{.}}{{/-first}}{{^-first}}          re.{{.}}{{/-first}}{{^-last}} | {{/-last}}{{#-last}}){{/-last}}{{/vendorExtensions.x-modifiers}}\n+                {{/isByteArray}}\n+            {{/isBinary}}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d02d8843e74ea77d3ef3571d57de5e7eedadfd1"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzI3NzMwOA==", "bodyText": "@spacether Without any of the other bytes stuff, this isn't actually needed anymore. It's another thing kept for the sake of the next PR (so the logic/need isn't forgotten).", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5679#discussion_r413277308", "createdAt": "2020-04-22T19:51:09Z", "author": {"login": "CrshOverride"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_templates/classvars.mustache", "diffHunk": "@@ -53,8 +53,20 @@\n {{/minimum}}\n {{#pattern}}\n             'regex': {\n+            {{#isBinary}}\n                 'pattern': r'{{{vendorExtensions.x-regex}}}',  # noqa: E501{{#vendorExtensions.x-modifiers}}\n                 {{#-first}}'flags': (re.{{.}}{{/-first}}{{^-first}}          re.{{.}}{{/-first}}{{^-last}} | {{/-last}}{{#-last}}){{/-last}}{{/vendorExtensions.x-modifiers}}\n+            {{/isBinary}}\n+            {{^isBinary}}\n+                {{#isByteArray}}\n+                'pattern': r'{{{vendorExtensions.x-regex}}}',  # noqa: E501{{#vendorExtensions.x-modifiers}}\n+                {{#-first}}'flags': (re.{{.}}{{/-first}}{{^-first}}          re.{{.}}{{/-first}}{{^-last}} | {{/-last}}{{#-last}}){{/-last}}{{/vendorExtensions.x-modifiers}}\n+                {{/isByteArray}}\n+                {{^isByteArray}}\n+                'pattern': r'{{{vendorExtensions.x-regex}}}',  # noqa: E501{{#vendorExtensions.x-modifiers}}\n+                {{#-first}}'flags': (re.{{.}}{{/-first}}{{^-first}}          re.{{.}}{{/-first}}{{^-last}} | {{/-last}}{{#-last}}){{/-last}}{{/vendorExtensions.x-modifiers}}\n+                {{/isByteArray}}\n+            {{/isBinary}}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjcxODM3Nw=="}, "originalCommit": {"oid": "4d02d8843e74ea77d3ef3571d57de5e7eedadfd1"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzMxMDg2MA==", "bodyText": "When add in unused code like this, I worry that we will forget to include tests or samples that demonstrate them working. We say we will do it in the future but we may forget about it, or never get to it.\n\nIf you keep it here can you add a spec example which creates binary regex patterns in the python-experimental sample?\nOtherwise please remove this from this PR and include it in your next PR which can include tests or samples which use it", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5679#discussion_r413310860", "createdAt": "2020-04-22T20:35:39Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_templates/classvars.mustache", "diffHunk": "@@ -53,8 +53,20 @@\n {{/minimum}}\n {{#pattern}}\n             'regex': {\n+            {{#isBinary}}\n                 'pattern': r'{{{vendorExtensions.x-regex}}}',  # noqa: E501{{#vendorExtensions.x-modifiers}}\n                 {{#-first}}'flags': (re.{{.}}{{/-first}}{{^-first}}          re.{{.}}{{/-first}}{{^-last}} | {{/-last}}{{#-last}}){{/-last}}{{/vendorExtensions.x-modifiers}}\n+            {{/isBinary}}\n+            {{^isBinary}}\n+                {{#isByteArray}}\n+                'pattern': r'{{{vendorExtensions.x-regex}}}',  # noqa: E501{{#vendorExtensions.x-modifiers}}\n+                {{#-first}}'flags': (re.{{.}}{{/-first}}{{^-first}}          re.{{.}}{{/-first}}{{^-last}} | {{/-last}}{{#-last}}){{/-last}}{{/vendorExtensions.x-modifiers}}\n+                {{/isByteArray}}\n+                {{^isByteArray}}\n+                'pattern': r'{{{vendorExtensions.x-regex}}}',  # noqa: E501{{#vendorExtensions.x-modifiers}}\n+                {{#-first}}'flags': (re.{{.}}{{/-first}}{{^-first}}          re.{{.}}{{/-first}}{{^-last}} | {{/-last}}{{#-last}}){{/-last}}{{/vendorExtensions.x-modifiers}}\n+                {{/isByteArray}}\n+            {{/isBinary}}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjcxODM3Nw=="}, "originalCommit": {"oid": "4d02d8843e74ea77d3ef3571d57de5e7eedadfd1"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2ODQ5OTI4OnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQyMDoxNTo1NFrOGKJsWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQyMDoxNTo1NFrOGKJsWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzI5Nzc1Mw==", "bodyText": "Can you combine these two if statements?\nWe don't need two levels of indentation here.\nYou can just use:\nif six.PY3 and response_type not in {\"file\", \"bytes\"}:\nNote: I also switched to set definition with {} for quicker lookups.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5679#discussion_r413297753", "createdAt": "2020-04-22T20:15:54Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "diffHunk": "@@ -186,22 +186,44 @@ class ApiClient(object):\n             # use server/host defined in path or operation instead\n             url = _host + resource_path\n \n-        # perform request and return response\n-        response_data = {{#asyncio}}await {{/asyncio}}{{#tornado}}yield {{/tornado}}self.request(\n-            method, url, query_params=query_params, headers=header_params,\n-            post_params=post_params, body=body,\n-            _preload_content=_preload_content,\n-            _request_timeout=_request_timeout)\n-\n-        self.last_response = response_data\n+        try:\n+            # perform request and return response\n+            response_data = {{#asyncio}}await {{/asyncio}}{{#tornado}}yield {{/tornado}}self.request(\n+                method, url, query_params=query_params, headers=header_params,\n+                post_params=post_params, body=body,\n+                _preload_content=_preload_content,\n+                _request_timeout=_request_timeout)\n+\n+            content_type = response_data.getheader('content-type')\n+\n+            self.last_response = response_data\n+\n+            return_data = response_data\n+\n+            if not _preload_content:\n+                {{^tornado}}\n+                return return_data\n+                {{/tornado}}\n+                {{#tornado}}\n+                raise tornado.gen.Return(return_data)\n+                {{/tornado}}\n+\n+            if six.PY3:\n+                if response_type not in [\"file\", \"bytes\"]:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4d02d8843e74ea77d3ef3571d57de5e7eedadfd1"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3Mjk4Mzk2OnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxNzowMToxN1rOGKylzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxNzowMToxN1rOGKylzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk2NzgyMQ==", "bodyText": "Is this exception only raised by the self.request call?\nIf so can we move this up to be right after that call?\nThat way all of the other code can be moved out of this try block because it doesn't need to be inside it.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5679#discussion_r413967821", "createdAt": "2020-04-23T17:01:17Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "diffHunk": "@@ -186,22 +186,43 @@ class ApiClient(object):\n             # use server/host defined in path or operation instead\n             url = _host + resource_path\n \n-        # perform request and return response\n-        response_data = {{#asyncio}}await {{/asyncio}}{{#tornado}}yield {{/tornado}}self.request(\n-            method, url, query_params=query_params, headers=header_params,\n-            post_params=post_params, body=body,\n-            _preload_content=_preload_content,\n-            _request_timeout=_request_timeout)\n-\n-        self.last_response = response_data\n+        try:\n+            # perform request and return response\n+            response_data = {{#asyncio}}await {{/asyncio}}{{#tornado}}yield {{/tornado}}self.request(\n+                method, url, query_params=query_params, headers=header_params,\n+                post_params=post_params, body=body,\n+                _preload_content=_preload_content,\n+                _request_timeout=_request_timeout)\n+\n+            content_type = response_data.getheader('content-type')\n+\n+            self.last_response = response_data\n+\n+            return_data = response_data\n+\n+            if not _preload_content:\n+                {{^tornado}}\n+                return return_data\n+                {{/tornado}}\n+                {{#tornado}}\n+                raise tornado.gen.Return(return_data)\n+                {{/tornado}}\n+\n+            if six.PY3 and response_type not in [\"file\", \"bytes\"]:\n+                match = None\n+                if content_type is not None:\n+                    match = re.search(r\"charset=([a-zA-Z\\-\\d]+)[\\s\\;]?\", content_type)\n+                encoding = match.group(1) if match else \"utf-8\"\n+                response_data.data = response_data.data.decode(encoding)\n \n-        return_data = response_data\n-        if _preload_content:\n             # deserialize response data\n             if response_type:\n                 return_data = self.deserialize(response_data, response_type)\n             else:\n                 return_data = None\n+        except ApiException as e:\n+            e.body = e.body.decode('utf-8') if six.PY3 else e.body\n+            raise e", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa44de5d477d0b1ccdf37f41090c755fccfb430c"}, "originalPosition": 59}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3MzA3NTI4OnYy", "diffSide": "LEFT", "path": "samples/client/petstore/python/test/test_format_test.py", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yM1QxNzoyMTo0OFrOGKzdpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQwNTowNDo1MFrOGLGkcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk4MjExOA==", "bodyText": "Why is the binary assignment gone?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5679#discussion_r413982118", "createdAt": "2020-04-23T17:21:48Z", "author": {"login": "spacether"}, "path": "samples/client/petstore/python/test/test_format_test.py", "diffHunk": "@@ -36,19 +36,18 @@ def make_instance(self, include_optional):\n         # model = petstore_api.models.format_test.FormatTest()  # noqa: E501\n         if include_optional :\n             return FormatTest(\n-                integer = 1E+1, \n-                int32 = 2E+1, \n-                int64 = 56, \n-                number = 32.1, \n-                float = 54.3, \n-                double = 67.8, \n-                string = 'a', \n-                byte = 'YQ==', \n-                binary = bytes(b'blah'), ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa44de5d477d0b1ccdf37f41090c755fccfb430c"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDA2ODA4Mg==", "bodyText": "If we're removing returning binary, it shouldn't still be there should it?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5679#discussion_r414068082", "createdAt": "2020-04-23T19:33:09Z", "author": {"login": "CrshOverride"}, "path": "samples/client/petstore/python/test/test_format_test.py", "diffHunk": "@@ -36,19 +36,18 @@ def make_instance(self, include_optional):\n         # model = petstore_api.models.format_test.FormatTest()  # noqa: E501\n         if include_optional :\n             return FormatTest(\n-                integer = 1E+1, \n-                int32 = 2E+1, \n-                int64 = 56, \n-                number = 32.1, \n-                float = 54.3, \n-                double = 67.8, \n-                string = 'a', \n-                byte = 'YQ==', \n-                binary = bytes(b'blah'), ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk4MjExOA=="}, "originalCommit": {"oid": "aa44de5d477d0b1ccdf37f41090c755fccfb430c"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDI5NTE1NA==", "bodyText": "Let's still keep the field, but just give it a string value.\nPer here\nthe bytes variable exists in the model and accepts a string value.\nWhen you do your next PR we will see the type there change to byes, and we can update the sample value for this parameter here.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5679#discussion_r414295154", "createdAt": "2020-04-24T05:04:50Z", "author": {"login": "spacether"}, "path": "samples/client/petstore/python/test/test_format_test.py", "diffHunk": "@@ -36,19 +36,18 @@ def make_instance(self, include_optional):\n         # model = petstore_api.models.format_test.FormatTest()  # noqa: E501\n         if include_optional :\n             return FormatTest(\n-                integer = 1E+1, \n-                int32 = 2E+1, \n-                int64 = 56, \n-                number = 32.1, \n-                float = 54.3, \n-                double = 67.8, \n-                string = 'a', \n-                byte = 'YQ==', \n-                binary = bytes(b'blah'), ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk4MjExOA=="}, "originalCommit": {"oid": "aa44de5d477d0b1ccdf37f41090c755fccfb430c"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU3NTIwNDcwOnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/resources/python/python-experimental/api_client.mustache", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQwNDo1NjoyOVrOGLGaCQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQwNDo1NjoyOVrOGLGaCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDI5MjQ4OQ==", "bodyText": "It looks like we need the decoding here also for python-experimental for non-file types.\nWhat do you think?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5679#discussion_r414292489", "createdAt": "2020-04-24T04:56:29Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/api_client.mustache", "diffHunk": "@@ -176,26 +176,39 @@ class ApiClient(object):\n             # use server/host defined in path or operation instead\n             url = _host + resource_path\n \n-        # perform request and return response\n-        response_data = {{#asyncio}}await {{/asyncio}}{{#tornado}}yield {{/tornado}}self.request(\n-            method, url, query_params=query_params, headers=header_params,\n-            post_params=post_params, body=body,\n-            _preload_content=_preload_content,\n-            _request_timeout=_request_timeout)\n+        try:\n+            # perform request and return response\n+            response_data = {{#asyncio}}await {{/asyncio}}{{#tornado}}yield {{/tornado}}self.request(\n+                method, url, query_params=query_params, headers=header_params,\n+                post_params=post_params, body=body,\n+                _preload_content=_preload_content,\n+                _request_timeout=_request_timeout)\n+        except ApiException as e:\n+            e.body = e.body.decode('utf-8') if six.PY3 else e.body\n+            raise e\n \n         self.last_response = response_data\n \n         return_data = response_data\n-        if _preload_content:\n-            # deserialize response data\n-            if response_type:\n-                return_data = self.deserialize(\n-                    response_data,\n-                    response_type,\n-                    _check_type\n-                )\n-            else:\n-                return_data = None\n+\n+        if not _preload_content:\n+            {{^tornado}}\n+            return (return_data)\n+            {{/tornado}}\n+            {{#tornado}}\n+            raise tornado.gen.Return(return_data)\n+            {{/tornado}}\n+            return return_data", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8673b87f6eec2ed6745aad02910e862e4c835cda"}, "originalPosition": 51}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3690, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}