{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5NTMwODI2", "number": 5175, "title": "[go-experimental] Add model constructors to initialize non-container vars with defaults", "bodyText": "This PR adds a constructor to all models that initializes non-container vars with proper defaults. It might also be possible to do container vars in the future, but that is pretty tricky (and also not as widely used to my knowledge).\nPR checklist\n\n Read the contribution guidelines.\n If contributing template-only or documentation-only changes which will change sample output, build the project before.\n Run the shell script(s) under ./bin/ (or Windows batch scripts under.\\bin\\windows) to update Petstore samples related to your fix. This is important, as CI jobs will verify all generator outputs of your HEAD commit, and these must match the expectations made by your contribution. You only need to run ./bin/{LANG}-petstore.sh, ./bin/openapi3/{LANG}-petstore.sh if updating the code or mustache templates for a language ({LANG}) (e.g. php, ruby, python, etc).\n File the PR against the correct branch: master, 4.3.x, 5.0.x. Default: master.\n Copy the technical committee to review the pull request if your PR is targeting a particular programming language.\n\n@antihax (2017/11) @bvwells (2017/12) @grokify (2018/07) @kemokemo (2018/09) @bkabrda (2019/07)", "createdAt": "2020-01-31T11:10:42Z", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5175", "merged": true, "mergeCommit": {"oid": "010dad209a918a900fd640840d700e07ec3cdd7c"}, "closed": true, "closedAt": "2020-02-20T15:13:54Z", "author": {"login": "bkabrda"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb_tV8JgBqjI5OTY3MzUyODI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDNa9WABqjMwMjU1ODI1ODc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a7d7efcf3582dbac0aba70b68287eb635404db71", "author": {"user": {"login": "bkabrda", "name": "Slavek Kabrda"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/a7d7efcf3582dbac0aba70b68287eb635404db71", "committedDate": "2020-01-31T11:07:54Z", "message": "[go-experimental] Add model constructors to initialize non-container vars with defaults"}, "afterCommit": {"oid": "9df0d30588383359169a54e2eee6008c117619f5", "author": {"user": {"login": "bkabrda", "name": "Slavek Kabrda"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/9df0d30588383359169a54e2eee6008c117619f5", "committedDate": "2020-01-31T11:21:43Z", "message": "[go-experimental] Add model constructors to initialize non-container vars with defaults"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxNDQ0Mjkz", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5175#pullrequestreview-351444293", "createdAt": "2020-01-31T11:25:31Z", "commit": {"oid": "9df0d30588383359169a54e2eee6008c117619f5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQxMToyNTozMVrOFkIoIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQxMToyNTozMVrOFkIoIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzQzNDQwMg==", "bodyText": "can you add a docstring?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5175#discussion_r373434402", "createdAt": "2020-01-31T11:25:31Z", "author": {"login": "jirikuncar"}, "path": "modules/openapi-generator/src/main/resources/go-experimental/model.mustache", "diffHunk": "@@ -38,6 +38,19 @@ type {{classname}} struct {\n \t{{name}} {{^required}}*{{/required}}{{{dataType}}} `json:\"{{baseName}}{{^required}},omitempty{{/required}}\"{{#withXml}} xml:\"{{baseName}}{{#isXmlAttribute}},attr{{/isXmlAttribute}}\"{{/withXml}}{{#vendorExtensions.x-go-custom-tag}} {{{.}}}{{/vendorExtensions.x-go-custom-tag}}`\n {{/vars}}\n }\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9df0d30588383359169a54e2eee6008c117619f5"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxNDUwMjQ3", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5175#pullrequestreview-351450247", "createdAt": "2020-01-31T11:38:19Z", "commit": {"oid": "9df0d30588383359169a54e2eee6008c117619f5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQxMTozODoxOVrOFkI6Lw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQxMTozODoxOVrOFkI6Lw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzQzOTAyMw==", "bodyText": "Typically vars are camelCase. Types are TitleCase. So these two lines read very oddly", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5175#discussion_r373439023", "createdAt": "2020-01-31T11:38:19Z", "author": {"login": "platinummonkey"}, "path": "samples/client/petstore/go-experimental/go-petstore/model_animal.go", "diffHunk": "@@ -20,6 +20,13 @@ type Animal struct {\n \tColor *string `json:\"color,omitempty\"`\n }\n \n+func NewAnimal() *Animal {\n+    this := Animal{}\n+    var Color string = \"red\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9df0d30588383359169a54e2eee6008c117619f5"}, "originalPosition": 6}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d0da1f17ae5c40f82fd3ce8e157fe20d81f5d02a", "author": {"user": {"login": "bkabrda", "name": "Slavek Kabrda"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/d0da1f17ae5c40f82fd3ce8e157fe20d81f5d02a", "committedDate": "2020-01-31T20:43:52Z", "message": "Provide 2 different constructurs as suggested + couple fixes to generate constructors right under all circumstances"}, "afterCommit": {"oid": "d2d9dd45550ac537f468ebea70cd5d153147d487", "author": {"user": {"login": "bkabrda", "name": "Slavek Kabrda"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/d2d9dd45550ac537f468ebea70cd5d153147d487", "committedDate": "2020-02-03T13:30:52Z", "message": "Provide 2 different constructurs as suggested + couple fixes to generate constructors right under all circumstances"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUzMzAwNzE3", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5175#pullrequestreview-353300717", "createdAt": "2020-02-04T21:05:54Z", "commit": {"oid": "8661844eccbce4064a6cde9e0fd421a99077d5ff"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQyMTowNTo1NFrOFljccQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNFQyMTowNTo1NFrOFljccQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDkyMjM1Mw==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5175#discussion_r374922353", "createdAt": "2020-02-04T21:05:54Z", "author": {"login": "jirikuncar"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/GoClientExperimentalCodegen.java", "diffHunk": "@@ -122,7 +130,11 @@ public String toDefaultValue(Schema p) {\n     @Override\n     public CodegenProperty fromProperty(String name, Schema p) {\n         CodegenProperty prop = super.fromProperty(name, p);\n-        prop.nameInCamelCase = camelize(prop.name, true);\n+        String cc = camelize(prop.name, true);\n+        if (isReservedWord(cc)) {\n+            cc = escapeReservedWord(cc);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8661844eccbce4064a6cde9e0fd421a99077d5ff"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cb5c54b51719135a1c6bcc05db73b775f83669c5", "author": {"user": {"login": "bkabrda", "name": "Slavek Kabrda"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/cb5c54b51719135a1c6bcc05db73b775f83669c5", "committedDate": "2020-02-11T08:08:30Z", "message": "[go-experimental] Add model constructors to initialize non-container vars with defaults"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb7db905e73457679a392154b0d420e111ef9d5c", "author": {"user": {"login": "bkabrda", "name": "Slavek Kabrda"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/fb7db905e73457679a392154b0d420e111ef9d5c", "committedDate": "2020-02-11T08:10:37Z", "message": "Add docstring and extend model_doc to include the constructor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a02abb5ef032cb438c935a59f92c9cd7001f349d", "author": {"user": {"login": "bkabrda", "name": "Slavek Kabrda"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/a02abb5ef032cb438c935a59f92c9cd7001f349d", "committedDate": "2020-02-11T08:10:40Z", "message": "Make variable names in constructor follow Go naming guidelines"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e4e53855eafbc1d210b20ec617683b8cdb0ec7f", "author": {"user": {"login": "bkabrda", "name": "Slavek Kabrda"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/6e4e53855eafbc1d210b20ec617683b8cdb0ec7f", "committedDate": "2020-02-11T08:10:43Z", "message": "Provide 2 different constructurs as suggested + couple fixes to generate constructors right under all circumstances"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af2e0dc493877ccc9bb84b4ad73a68918aa47296", "author": {"user": {"login": "bkabrda", "name": "Slavek Kabrda"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/af2e0dc493877ccc9bb84b4ad73a68918aa47296", "committedDate": "2020-02-11T08:11:40Z", "message": "Fix defaults for enums"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8543739ca2ba37d8c4d32193e55b8b76933f027", "author": {"user": {"login": "bkabrda", "name": "Slavek Kabrda"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/f8543739ca2ba37d8c4d32193e55b8b76933f027", "committedDate": "2020-02-11T08:11:42Z", "message": "Remove erroneously added file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5298995dcc4e37606d3e21ff6420a83985c6cdd6", "author": {"user": {"login": "bkabrda", "name": "Slavek Kabrda"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/5298995dcc4e37606d3e21ff6420a83985c6cdd6", "committedDate": "2020-02-11T08:12:23Z", "message": "Properly escape vars that have reserved names"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "358648b56d285a27b5a9a77f01b156ef7adc2a46", "author": {"user": {"login": "bkabrda", "name": "Slavek Kabrda"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/358648b56d285a27b5a9a77f01b156ef7adc2a46", "committedDate": "2020-02-11T08:25:50Z", "message": "Fix after rebasing"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8661844eccbce4064a6cde9e0fd421a99077d5ff", "author": {"user": {"login": "bkabrda", "name": "Slavek Kabrda"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/8661844eccbce4064a6cde9e0fd421a99077d5ff", "committedDate": "2020-02-04T15:40:28Z", "message": "Properly escape vars that have reserved names"}, "afterCommit": {"oid": "358648b56d285a27b5a9a77f01b156ef7adc2a46", "author": {"user": {"login": "bkabrda", "name": "Slavek Kabrda"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/358648b56d285a27b5a9a77f01b156ef7adc2a46", "committedDate": "2020-02-11T08:25:50Z", "message": "Fix after rebasing"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2901, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}