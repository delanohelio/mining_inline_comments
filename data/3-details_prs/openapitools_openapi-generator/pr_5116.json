{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3MjM1NDQ2", "number": 5116, "title": "[ci][test] Modifications to static analysis contribution via Tomasbjerre", "bodyText": "This extends on submission by @tomasbjerre in #5040 by moving the PMD and Spotbugs  plugin execution to a separate profile static-analysis. This keeps CheckStyle in the default build because it added a very minimal amount of time to execution.\nOnce merged, I'd like to extend the Sonar CI GitHub Action to be a static analysis action which caches the xml reports generated by these plugins as build artifacts.  This will give us SonarCloud as a means for evaluating the static analysis, and allow for contributors to download the *.xml reports from the action. Once the GitHub action is updated, we can also close #33 as well.\nCore contributors may run static analysis with:\nmvn -Pstatic-analysis install\n\nThe analysis is separated from default functionality to reduce impact to community contributions. SpotBugs/PMD may add a non-trivial amount of time to builds on some machines.\ncc @OpenAPITools/generator-core-team\nCloses #5040\n\nPR checklist\n\n Read the contribution guidelines.\n If contributing template-only or documentation-only changes which will change sample output, build the project before.\n Run the shell script(s) under ./bin/ (or Windows batch scripts under.\\bin\\windows) to update Petstore samples related to your fix. This is important, as CI jobs will verify all generator outputs of your HEAD commit, and these must match the expectations made by your contribution. You only need to run ./bin/{LANG}-petstore.sh, ./bin/openapi3/{LANG}-petstore.sh if updating the code or mustache templates for a language ({LANG}) (e.g. php, ruby, python, etc).\n File the PR against the correct branch: master, 4.3.x, 5.0.x. Default: master.\n Copy the technical committee to review the pull request if your PR is targeting a particular programming language.", "createdAt": "2020-01-26T16:27:40Z", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5116", "merged": true, "mergeCommit": {"oid": "c0f7b472925654453d90f6ab4bf6696998b50c26"}, "closed": true, "closedAt": "2020-01-26T17:45:42Z", "author": {"login": "jimschubert"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb92Vk4gH2gAyMzY3MjM1NDQ2OjQwNTA5OTRlMzA1M2EwMDU0ZmIzMzI4Y2FkZWYxOTgwN2E0MzEwNTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-LGV5gFqTM0ODM5MjAwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4050994e3053a0054fb3328cadef19807a431051", "author": {"user": {"login": "tomasbjerre", "name": "Tomas Bjerre"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/4050994e3053a0054fb3328cadef19807a431051", "committedDate": "2020-01-25T16:42:45Z", "message": "Spotbugs, PMD and Checkstyle #33"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7c33ec0156a4a6596846fdd54f0cddd3bfe0fee", "author": {"user": {"login": "tomasbjerre", "name": "Tomas Bjerre"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/b7c33ec0156a4a6596846fdd54f0cddd3bfe0fee", "committedDate": "2020-01-25T17:56:57Z", "message": "Reducing Spotbugs effort to min #33\n\n * Also using project.parent.basedir and avoiding relative paths in pom files.\n * Filtering out samples."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80b0ec69de079b3be0761de0e0bc17cc894cf793", "author": {"user": {"login": "jimschubert", "name": "Jim Schubert"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/80b0ec69de079b3be0761de0e0bc17cc894cf793", "committedDate": "2020-01-26T16:13:25Z", "message": "Move PMD/Spotbugs to static-analysis profile\n\nThis moves the static-analysis checks to a standalone profile. Core\ncontributors may run static analysis with:\n\n```\nmvn -Pstatic-analysis install\n```\n\nThe analysis is separated from default functionality to reduce impact to\ncommunity contributions. SpotBugs/PMD may add a non-trivial amount of\ntime to builds on some machines."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MzkxOTU2", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5116#pullrequestreview-348391956", "createdAt": "2020-01-26T16:52:55Z", "commit": {"oid": "80b0ec69de079b3be0761de0e0bc17cc894cf793"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNlQxNjo1Mjo1NVrOFh05DQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNlQxNjo1Mjo1NVrOFh05DQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTAxMzkwMQ==", "bodyText": "One could argue that the generated code should also be free from issues found by static code analysis. I'm not sure about excluding samples here.\nI can see how users have different code standards and running Checkstyle and PMD is not worth the effort, but I'm not sure it is good to exclude Spotbugs here.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5116#discussion_r371013901", "createdAt": "2020-01-26T16:52:55Z", "author": {"login": "tomasbjerre"}, "path": "spotbugs-exclude.xml", "diffHunk": "@@ -0,0 +1,34 @@\n+<FindBugsFilter>\n+\n+\t<Match>\n+\t\t<Bug pattern=\"RCN_REDUNDANT_NULLCHECK_OF_NONNULL_VALUE\" />\n+\t</Match>\n+\n+\t<Match>\n+\t\t<Bug pattern=\"URF_UNREAD_PUBLIC_OR_PROTECTED_FIELD\" />\n+\t</Match>\n+\n+\t<Match>\n+\t\t<Bug pattern=\"RV_RETURN_VALUE_IGNORED_BAD_PRACTICE\" />\n+\t</Match>\n+\n+\t<Match>\n+\t\t<Bug pattern=\"URF_UNREAD_FIELD\" />\n+\t\t<Or>\n+\t\t\t<And>\n+\t\t\t\t<Class name=\"io.undertow.server.protocol.ajp.AjpRequestParseState\" />\n+\t\t\t\t<Field name=\"dataSize\" />\n+\t\t\t</And>\n+\t\t</Or>\n+\t</Match>\n+\n+\t<!-- For source/class naming, see https://spotbugs.readthedocs.io/en/stable/filter.html#java-element-name-matching -->\n+\t<Match>\n+\t\t<!-- Ignore all source files with samples in path name -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80b0ec69de079b3be0761de0e0bc17cc894cf793"}, "originalPosition": 27}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MzkyMDA5", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5116#pullrequestreview-348392009", "createdAt": "2020-01-26T16:54:06Z", "commit": {"oid": "80b0ec69de079b3be0761de0e0bc17cc894cf793"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNlQxNjo1NDowNlrOFh05UA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNlQxNjo1NDowNlrOFh05UA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTAxMzk2OA==", "bodyText": "Now that it does not run by default, perhaps it does not need to be min?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5116#discussion_r371013968", "createdAt": "2020-01-26T16:54:06Z", "author": {"login": "tomasbjerre"}, "path": "pom.xml", "diffHunk": "@@ -470,6 +542,73 @@\n                 </plugins>\n             </build>\n         </profile>\n+        <!-- CI related -->\n+        <profile>\n+            <!-- This profile will run much more in-depth static analysis checks. -->\n+            <id>static-analysis</id>\n+            <properties>\n+                <skipTests>true</skipTests>\n+                <maven.javadoc.skip>true</maven.javadoc.skip>\n+            </properties>\n+            <build>\n+                <plugins>\n+                    <plugin>\n+                        <groupId>com.github.spotbugs</groupId>\n+                        <artifactId>spotbugs-maven-plugin</artifactId>\n+                        <version>${spotbugs.plugin.version}</version>\n+                        <configuration>\n+                            <failOnError>false</failOnError>\n+                            <!-- https://spotbugs.readthedocs.io/en/stable/effort.html -->\n+                            <effort>min</effort>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80b0ec69de079b3be0761de0e0bc17cc894cf793"}, "originalPosition": 112}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2864, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}