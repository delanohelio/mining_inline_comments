{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg1MjY4NTUy", "number": 5558, "title": "[Rust Server] Run rustfmt over rust-server output", "bodyText": "If the --enable-post-process-file flag is set, run the tool given in the RUST_SERVER_POST_PROCESS_FILE environment variable to format it (defaults to rustfmt).\nNote that this isn't included in the bin/rust-server-petstore.sh example because rustfmt isn't installed by default during CI.\nAlso fix up some spurious whitespace in the template files as this breaks rustfmt\nThis fix was contributed by @mirw and reviewed by myself on behalf of @Metaswitch.\nRust Server Technical Committee\n\n@frol\n@farcaller\n@bjgill\n\nPR checklist\n\n Read the contribution guidelines.\n If contributing template-only or documentation-only changes which will change sample output, build the project before.\n Run the shell script(s) under ./bin/ (or Windows batch scripts under.\\bin\\windows) to update Petstore samples related to your fix. This is important, as CI jobs will verify all generator outputs of your HEAD commit, and these must match the expectations made by your contribution. You only need to run ./bin/{LANG}-petstore.sh, ./bin/openapi3/{LANG}-petstore.sh if updating the code or mustache templates for a language ({LANG}) (e.g. php, ruby, python, etc).\n File the PR against the correct branch: master, 4.3.x, 5.0.x. Default: master.\n Copy the technical committee to review the pull request if your PR is targeting a particular programming language.", "createdAt": "2020-03-08T13:46:01Z", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5558", "merged": true, "mergeCommit": {"oid": "28ea718004676d70b52d7402502257a4e71e23c6"}, "closed": true, "closedAt": "2020-03-24T00:09:41Z", "author": {"login": "richardwhiuk"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcLpg99AH2gAyMzg1MjY4NTUyOjIyZDRmMjA3NDVlNWExOGZkMjVjNWU4NmJlZjM0NTQ5MjdkMTkxM2M=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQi5WWgH2gAyMzg1MjY4NTUyOjc5MDQ0ZjkyNDAwY2JhMWMzMWExNWM5NzM5ZmQzYWU5MTU3MDcwMjU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "22d4f20745e5a18fd25c5e86bef3454927d1913c", "author": {"user": {"login": "richardwhiuk", "name": "Richard Whitehouse"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/22d4f20745e5a18fd25c5e86bef3454927d1913c", "committedDate": "2020-03-08T13:41:22Z", "message": "[Rust Server] Run rustfmt over rust-server output\n\nAutomatically run rustfmt over rust-server output if --enable-post-process-file is set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e17b2e43cf70d81504c05f4d1b8b53dcf37487e9", "author": {"user": {"login": "richardwhiuk", "name": "Richard Whitehouse"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/e17b2e43cf70d81504c05f4d1b8b53dcf37487e9", "committedDate": "2020-03-08T13:42:08Z", "message": "Update samples"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcwODM2ODYy", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5558#pullrequestreview-370836862", "createdAt": "2020-03-08T15:06:31Z", "commit": {"oid": "e17b2e43cf70d81504c05f4d1b8b53dcf37487e9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOFQxNTowNjozMVrOFzVu_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOFQxNTowNjozMVrOFzVu_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM3Nzc4OA==", "bodyText": "What about renaming RUST_SERVER_POST_PROCESS_FILE as RUST_POST_PROCESS_FILE to conform to other environment variable naming {lang}_POST_PROCESS_FILE (e.g. CPP_POST_PROCESS_FILE)?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5558#discussion_r389377788", "createdAt": "2020-03-08T15:06:31Z", "author": {"login": "wing328"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/RustServerCodegen.java", "diffHunk": "@@ -1561,4 +1562,31 @@ private void processParam(CodegenParameter param, CodegenOperation op) {\n             param.vendorExtensions.put(\"example\", (example != null) ? \"Some(\" + example + \")\" : \"None\");\n         }\n     }\n+\n+    @Override\n+    public void postProcessFile(File file, String fileType) {\n+        if (file == null) {\n+            return;\n+        }\n+\n+        String commandPrefix = System.getenv(\"RUST_SERVER_POST_PROCESS_FILE\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e17b2e43cf70d81504c05f4d1b8b53dcf37487e9"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13ce84492b6bf00ca04ab1daf8bfc5ce9a31e278", "author": {"user": {"login": "richardwhiuk", "name": "Richard Whitehouse"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/13ce84492b6bf00ca04ab1daf8bfc5ce9a31e278", "committedDate": "2020-03-09T18:34:19Z", "message": "Add note about configuring post processing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79044f92400cba1c31a15c9739fd3ae915707025", "author": {"user": {"login": "richardwhiuk", "name": "Richard Whitehouse"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/79044f92400cba1c31a15c9739fd3ae915707025", "committedDate": "2020-03-23T18:48:17Z", "message": "Merge branch '5.0.x' into rust-server-postprocess"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2763, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}