{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgzNTU2OTc0", "number": 5521, "title": "Allow browsers File type for files", "bodyText": "I changed the HttpFile type to Blob & { name: string } for browser platform and to Buffer & { name: string } for node platform. This is imho more convenient.\nThe upload tests now work for both default and jquery petstore samples.\nThere is also a bit of code cleanup included.\nCf. #802\nCC @TiFu", "createdAt": "2020-03-04T13:31:24Z", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5521", "merged": true, "mergeCommit": {"oid": "391a191ecf46a1159cc37d4a55efa92f01ffaebf"}, "closed": true, "closedAt": "2020-05-05T20:53:08Z", "author": {"login": "bodograumann"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcOmpuDgFqTM3NjI4MDA5Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABceRiG1gH2gAyMzgzNTU2OTc0OjNhNmMzMWM4MDAyYmYwMjBiNjM0NzAyYjhjMmU3MTZlZTFiZWRkNGY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2MjgwMDkz", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5521#pullrequestreview-376280093", "createdAt": "2020-03-17T18:02:59Z", "commit": {"oid": "c3106f9cd39f170561cb8bd03354f301574b8c7e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxODowMjo1OVrOF3n9xA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xN1QxODowMjo1OVrOF3n9xA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzg3MDc4OA==", "bodyText": "Not sure I agree that mutating the Buffer is more convenient or even more intuitive than passing a composite of {name, data}.\nWhat is the benefit of this approach?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5521#discussion_r393870788", "createdAt": "2020-03-17T18:02:59Z", "author": {"login": "amakhrov"}, "path": "samples/client/petstore/typescript/tests/default/test/api/PetApi.test.ts", "diffHunk": "@@ -120,7 +120,7 @@ describe(\"PetApi\", () =>{\n \n     it(\"uploadFile\", (done) => {\n         const image = fs.readFileSync(__dirname + \"/pet.png\")\n-        petApi.uploadFile(pet.id, \"Metadata\", { name: \"pet.png\", data: image}).then((response: any) => {\n+        petApi.uploadFile(pet.id, \"Metadata\", Object.assign(image, { name: \"pet.png\" })).then((response: any) => {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3106f9cd39f170561cb8bd03354f301574b8c7e"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "25ead3d8825b558dcae5443041e07f4249c2785e", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/25ead3d8825b558dcae5443041e07f4249c2785e", "committedDate": "2020-04-23T13:14:17Z", "message": "Fix: do not call toString on undefined"}, "afterCommit": {"oid": "c3106f9cd39f170561cb8bd03354f301574b8c7e", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/c3106f9cd39f170561cb8bd03354f301574b8c7e", "committedDate": "2020-03-04T13:04:23Z", "message": "Add test for jquery upload"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1ed4b90a448678f6bd5b8019b2fda64910bcf19", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/d1ed4b90a448678f6bd5b8019b2fda64910bcf19", "committedDate": "2020-05-05T10:21:18Z", "message": "Allow passing file parameters as File objects\n\nThis is by far the most common use case. A `File` object already\ncontains the name attribute. This commit allows that information to be\nused directly.\nWhen sending a `Blob`, in most browsers the `File` constructor can be\nused to assign a file name. In all other browsers the alternative is\n```typescript\nObject.assign(data, { name: \"foobar.txt\" });\n```\nThat is why we explicitely pass the name as third parameter to\n`FormData.append`. This `Object.assign` method also works for `Buffer`\nobjects in node.\n\nIf one really does not want to touch the data object in the browser it\nis possible to define another reference to the data with\n```typescript\nnew Blob([data], { type: data.type })\n```\nor in node via\n```typescript\nBuffer.from(data)\n```"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d766248b9eef8fc5a81f5fc061b3ddbd6c3f0eae", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/d766248b9eef8fc5a81f5fc061b3ddbd6c3f0eae", "committedDate": "2020-05-05T10:21:22Z", "message": "Add test for jquery upload"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bfb17e9e6aa59b2db7b0b71008274282298879b1", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/bfb17e9e6aa59b2db7b0b71008274282298879b1", "committedDate": "2020-05-05T10:21:23Z", "message": "Use HttpFile object for node platform"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c3106f9cd39f170561cb8bd03354f301574b8c7e", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/c3106f9cd39f170561cb8bd03354f301574b8c7e", "committedDate": "2020-03-04T13:04:23Z", "message": "Add test for jquery upload"}, "afterCommit": {"oid": "cdcb5c4d946a0e5ccf9078cea9023cfe339bb5fa", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/cdcb5c4d946a0e5ccf9078cea9023cfe339bb5fa", "committedDate": "2020-05-05T10:21:24Z", "message": "Regenerate samples"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cdcb5c4d946a0e5ccf9078cea9023cfe339bb5fa", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/cdcb5c4d946a0e5ccf9078cea9023cfe339bb5fa", "committedDate": "2020-05-05T10:21:24Z", "message": "Regenerate samples"}, "afterCommit": {"oid": "3a6c31c8002bf020b634702b8c2e716ee1bedd4f", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/3a6c31c8002bf020b634702b8c2e716ee1bedd4f", "committedDate": "2020-05-05T10:29:27Z", "message": "Regenerate samples"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3a6c31c8002bf020b634702b8c2e716ee1bedd4f", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/3a6c31c8002bf020b634702b8c2e716ee1bedd4f", "committedDate": "2020-05-05T10:29:27Z", "message": "Regenerate samples"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2740, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}