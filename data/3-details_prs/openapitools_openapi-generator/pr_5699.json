{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzMjMzNDAz", "number": 5699, "title": "Tests  for models for C-libcurl generator", "bodyText": "This PR first of all adds supports for models that contain other models as properties. In fact, this yaml could not be used with the master:\nhttps://gist.github.com/michelealbano/bd705d2bf5a1c36dde3e514a1c744f13\nMoreover, I added support for the generation of tests for the generated models.\nI had to mix template and C, since I have access to different data from the 2 environments.\nFrom C I can build a \"default\" example, and/or decorate strings with double quotes.\nTo be able to support objects into objects (a property of an \"external\" object is an \"internal\" object itself), I had to play with #ifdef and #include clauses:\n\nI scan the properties (vars) of the external object, and for each internal object I will preliminary add the prototype of the function instantiate_{{classname}} that can instantiate the object before the generating instantiate_{{classname}} of the external object. I will then call the instantiate_{{classname}} where I am instantiating the external object.\nI #include together all the test*.c files that I need, to build the a.out for the test. I will use #ifdef clauses to have just 1 main and not to repeat the function definition.\n\nI had to change the name of the test*.c to play with #include of the files.\n@ityuhui @zhemant\nBy the way, I wrote a python script to generate, compile and test a yaml file:\nhttps://gist.github.com/michelealbano/51e40ca2c403969bf98fb1ef7e2520c5\nExample of usage:\npython ../doAllTests.py /mnt/hgfs/shared/miaroba/*.yaml\nThe PR is not complete - I still have to remove printf etc - but I wanted your comments.\nPR checklist\n\n[ X ] Read the contribution guidelines.\n If contributing template-only or documentation-only changes which will change sample output, build the project before.\n[ X ] Run the shell script(s) under ./bin/ (or Windows batch scripts under.\\bin\\windows) to update Petstore samples related to your fix. This is important, as CI jobs will verify all generator outputs of your HEAD commit, and these must match the expectations made by your contribution. You only need to run ./bin/{LANG}-petstore.sh, ./bin/openapi3/{LANG}-petstore.sh if updating the code or mustache templates for a language ({LANG}) (e.g. php, ruby, python, etc).\n[ X ] File the PR against the correct branch: master, 4.3.x, 5.0.x. Default: master.\n[ X ] Copy the technical committee to review the pull request if your PR is targeting a particular programming language.", "createdAt": "2020-03-24T20:15:01Z", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5699", "merged": true, "mergeCommit": {"oid": "e9c13463867d7add51c03fce928ff11c3c6b4c9e"}, "closed": true, "closedAt": "2020-04-05T17:42:51Z", "author": {"login": "michelealbano"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQqT3fgH2gAyMzkzMjMzNDAzOjVlOTk1OTUyOWM4MDM0OTEyNDM5NjExZTFhM2Y0YjczYmY2MWNiNDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcSk0LxAH2gAyMzkzMjMzNDAzOmJjZGViNGIwY2UyZmJkZTAyNjM2MDMyZmY0NWFlMDViMDIzOTBmZjg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5e9959529c8034912439611e1a3f4b73bf61cb41", "author": {"user": {"login": "michelealbano", "name": "Michele Albano"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/5e9959529c8034912439611e1a3f4b73bf61cb41", "committedDate": "2020-03-24T03:26:35Z", "message": "First try to generate unit tests for the models of the C-libcurl client. Models into models are not supported yet."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "91a883d1efaffa19379a0c74a03dc2648f6ddf90", "author": {"user": {"login": "michelealbano", "name": "Michele Albano"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/91a883d1efaffa19379a0c74a03dc2648f6ddf90", "committedDate": "2020-03-24T04:10:34Z", "message": "Added unit tests for the modules of the C-libcurl client to the git repository."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74bbfe53c37257356f2605eb79eb190ce83cb4f9", "author": {"user": {"login": "michelealbano", "name": "Michele Albano"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/74bbfe53c37257356f2605eb79eb190ce83cb4f9", "committedDate": "2020-03-24T19:49:25Z", "message": "Support for objects having other objects as properties, for the C-libcurl client generator"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxNjg4NTI4", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5699#pullrequestreview-381688528", "createdAt": "2020-03-26T04:01:48Z", "commit": {"oid": "74bbfe53c37257356f2605eb79eb190ce83cb4f9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQwNDowMTo0OFrOF72n3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQwNDowMTo0OFrOF72n3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODMwNTI0Nw==", "bodyText": "What about putting the comments in the same line as the example value (e.g. 56, // id (primitive)) ?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5699#discussion_r398305247", "createdAt": "2020-03-26T04:01:48Z", "author": {"login": "wing328"}, "path": "samples/client/petstore/c/unit-test/test_category.c", "diffHunk": "@@ -0,0 +1,68 @@\n+#ifndef category_TEST\n+#define category_TEST\n+\n+// the following is to include only the main from the first c file\n+#ifndef TEST_MAIN\n+#define TEST_MAIN\n+#define category_MAIN\n+#endif // TEST_MAIN\n+\n+#include <stdlib.h>\n+#include <string.h>\n+#include <stdio.h>\n+#include <stdbool.h>\n+#include \"../external/cJSON.h\"\n+\n+\n+\n+#include \"../model/category.h\"\n+category_t* instantiate_category(int include_optional);\n+\n+\n+\n+category_t* instantiate_category(int include_optional) {\n+  category_t* category = NULL;\n+if (include_optional) {\n+  category = category_create(\n+56\n+//primitive\n+, // id", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74bbfe53c37257356f2605eb79eb190ce83cb4f9"}, "originalPosition": 29}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bcdeb4b0ce2fbde02636032ff45ae05b02390ff8", "author": {"user": {"login": "michelealbano", "name": "Michele Albano"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/bcdeb4b0ce2fbde02636032ff45ae05b02390ff8", "committedDate": "2020-03-30T02:10:18Z", "message": "Proper formatting of generated code"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2641, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}