{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYzNjAwNDA4", "number": 7139, "title": "[python-experimental] Fix model tests", "bodyText": "Fixes model tests by templating the classname instead of\nthe model's description.\nFor the v3 sample only, creates a tests_manual folder and moves manually written tests into them. All tests in the test folder are now autogenerated and may be deleted and generated again with no coverage loss\n\nPR checklist\n\n Read the contribution guidelines.\n Pull Request title clearly describes the work in the pull request and Pull Request description provides details about how to validate the work. Missing information here may result in delayed response from the community.\n If contributing template-only or documentation-only changes which will change sample output, build the project beforehand.\n Run the shell script ./bin/generate-samples.shto update all Petstore samples related to your fix. This is important, as CI jobs will verify all generator outputs of your HEAD commit as it would merge with master. These must match the expectations made by your contribution. You may regenerate an individual generator by passing the relevant config(s) as an argument to the script, for example ./bin/generate-samples.sh bin/configs/java*. For Windows users, please run the script in Git BASH.\n File the PR against the correct branch: master\n Copy the technical committee to review the pull request if your PR is targeting a particular programming language.", "createdAt": "2020-08-05T19:36:14Z", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7139", "merged": true, "mergeCommit": {"oid": "6653cedcc7ba83ec536467b19d51c733c3d072d4"}, "closed": true, "closedAt": "2020-08-12T01:38:59Z", "author": {"login": "timgclark"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc9jU-ZgFqTQ2NDI5NTA0OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-BRrWAFqTQ2NTUzNTAxMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0Mjk1MDQ5", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7139#pullrequestreview-464295049", "createdAt": "2020-08-10T14:45:03Z", "commit": {"oid": "1f7a9e1e894106d4a1ce9c7c555efd61929db22f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNDo0NTowM1rOG-Rrog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNDo0NTowM1rOG-Rrog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzk1NDU5NA==", "bodyText": "Python-experimental uses some python templates to generate python code and selectively uses the python-experimental templates one level deeper. Our code assumes that the entry point is the python templates folder and we manually point to the python-experimental deeper templates when needed:\nhttps://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/PythonClientExperimentalCodegen.java#L135\nWhy have you changed this?\nIf you want to only have a python-experimental template folder that is fine. To do that one would need to:\n\ncopy over the remaining missing python templates into the python-experimental templates folder\nupdate https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/PythonClientExperimentalCodegen.java#L129 to add all the required python-eXperimental templates\n\nCould that change be in a separate PR to make it easier to review if you want to make that change?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7139#discussion_r467954594", "createdAt": "2020-08-10T14:45:03Z", "author": {"login": "spacether"}, "path": "bin/configs/python-experimental.yaml", "diffHunk": "@@ -1,6 +1,6 @@\n generatorName: python-experimental\n outputDir: samples/openapi3/client/petstore/python-experimental\n inputSpec: modules/openapi-generator/src/test/resources/3_0/python-experimental/petstore-with-fake-endpoints-models-for-testing-with-http-signature.yaml\n-templateDir: modules/openapi-generator/src/main/resources/python", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f7a9e1e894106d4a1ce9c7c555efd61929db22f"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0Mjk1ODUy", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7139#pullrequestreview-464295852", "createdAt": "2020-08-10T14:45:57Z", "commit": {"oid": "1f7a9e1e894106d4a1ce9c7c555efd61929db22f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNDo0NTo1N1rOG-Rt8A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNDo0NTo1N1rOG-Rt8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzk1NTE4NA==", "bodyText": "Thank you for this fix! I missed this when I switched python-experimental to using classname.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7139#discussion_r467955184", "createdAt": "2020-08-10T14:45:57Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_test.mustache", "diffHunk": "@@ -11,22 +11,22 @@ import {{packageName}}\n {{#imports}}\n {{{.}}}\n {{/imports}}\n-from {{modelPackage}}.{{classFilename}} import {{unescapedDescription}}\n+from {{modelPackage}}.{{classFilename}} import {{classname}}\n \n \n-class Test{{unescapedDescription}}(unittest.TestCase):\n-    \"\"\"{{unescapedDescription}} unit test stubs\"\"\"\n+class Test{{classname}}(unittest.TestCase):\n+    \"\"\"{{classname}} unit test stubs\"\"\"\n \n     def setUp(self):\n         pass\n \n     def tearDown(self):\n         pass\n \n-    def test{{unescapedDescription}}(self):\n-        \"\"\"Test {{unescapedDescription}}\"\"\"\n+    def test{{classname}}(self):\n+        \"\"\"Test {{classname}}\"\"\"\n         # FIXME: construct object with mandatory attributes with example values\n-        # model = {{unescapedDescription}}()  # noqa: E501\n+        # model = {{classname}}()  # noqa: E501", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f7a9e1e894106d4a1ce9c7c555efd61929db22f"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0Mjk2Njc1", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7139#pullrequestreview-464296675", "createdAt": "2020-08-10T14:46:50Z", "commit": {"oid": "1f7a9e1e894106d4a1ce9c7c555efd61929db22f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNDo0Njo1MFrOG-RwUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNDo0Njo1MFrOG-RwUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzk1NTc5Mw==", "bodyText": "Any chance of moving your black updates into a separate PR?\nIt will make it easier to review.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7139#discussion_r467955793", "createdAt": "2020-08-10T14:46:50Z", "author": {"login": "spacether"}, "path": "samples/openapi3/client/extensions/x-auth-id-alias/python-experimental/setup.py", "diffHunk": "@@ -22,10 +22,10 @@\n # http://pypi.python.org/pypi/setuptools\n \n REQUIRES = [\n-  \"urllib3 >= 1.15\",\n-  \"certifi\",\n-  \"python-dateutil\",\n-  \"nulltype\",\n+    \"urllib3 >= 1.15\",\n+    \"certifi\",\n+    \"python-dateutil\",\n+    \"nulltype\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f7a9e1e894106d4a1ce9c7c555efd61929db22f"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0Mjk4NDY4", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7139#pullrequestreview-464298468", "createdAt": "2020-08-10T14:48:52Z", "commit": {"oid": "1f7a9e1e894106d4a1ce9c7c555efd61929db22f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNDo0ODo1MlrOG-R1yA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNDo0ODo1MlrOG-R1yA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzk1NzE5Mg==", "bodyText": "So some of the files in the test directory have real tests.\nWe see that this method test_create_instances has a manually written test in it.\nThis update is deleting those real tests.\nPlease preserve them?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7139#discussion_r467957192", "createdAt": "2020-08-10T14:48:52Z", "author": {"login": "spacether"}, "path": "samples/openapi3/client/petstore/python-experimental/test/test_drawing.py", "diffHunk": "@@ -41,130 +34,12 @@ def setUp(self):\n     def tearDown(self):\n         pass\n \n-    def test_create_instances(self):", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f7a9e1e894106d4a1ce9c7c555efd61929db22f"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0MzE0MDA2", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7139#pullrequestreview-464314006", "createdAt": "2020-08-10T15:05:30Z", "commit": {"oid": "1f7a9e1e894106d4a1ce9c7c555efd61929db22f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNTowNTozMFrOG-SlUQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQxNTowNTozMFrOG-SlUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzk2OTM2MQ==", "bodyText": "I see this change in the samples but not in the mustache file.\nDid you run black on the sample results manually?\nIf so CI will fail because the branch contents disagree with the CI file contents and there will be uncommitted changes.\nIf we want these black changes, they must be applied to our mustache files to have them show up in the samples.\nCI automatically regenerates samples and will wipe out any code changes written there that happened after generation.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7139#discussion_r467969361", "createdAt": "2020-08-10T15:05:30Z", "author": {"login": "spacether"}, "path": "samples/openapi3/client/extensions/x-auth-id-alias/python-experimental/x_auth_id_alias/api/usage_api.py", "diffHunk": "@@ -77,78 +74,61 @@ def __any_key(\n                     If the method is called asynchronously, returns the request\n                     thread.\n             \"\"\"\n-            kwargs['async_req'] = kwargs.get(\n-                'async_req', False\n+            kwargs[\"async_req\"] = kwargs.get(\"async_req\", False)\n+            kwargs[\"_return_http_data_only\"] = kwargs.get(\n+                \"_return_http_data_only\", True\n             )\n-            kwargs['_return_http_data_only'] = kwargs.get(\n-                '_return_http_data_only', True\n-            )\n-            kwargs['_preload_content'] = kwargs.get(\n-                '_preload_content', True\n-            )\n-            kwargs['_request_timeout'] = kwargs.get(\n-                '_request_timeout', None\n-            )\n-            kwargs['_check_input_type'] = kwargs.get(\n-                '_check_input_type', True\n-            )\n-            kwargs['_check_return_type'] = kwargs.get(\n-                '_check_return_type', True\n-            )\n-            kwargs['_host_index'] = kwargs.get('_host_index')\n+            kwargs[\"_preload_content\"] = kwargs.get(\"_preload_content\", True)\n+            kwargs[\"_request_timeout\"] = kwargs.get(\"_request_timeout\", None)\n+            kwargs[\"_check_input_type\"] = kwargs.get(\"_check_input_type\", True)\n+            kwargs[\"_check_return_type\"] = kwargs.get(\"_check_return_type\", True)\n+            kwargs[\"_host_index\"] = kwargs.get(\"_host_index\")\n             return self.call_with_http_info(**kwargs)\n \n         self.any_key = Endpoint(\n             settings={\n-                'response_type': ({str: (bool, date, datetime, dict, float, int, list, str, none_type)},),\n-                'auth': [\n-                    'api_key',\n-                    'api_key_query'\n-                ],\n-                'endpoint_path': '/any',\n-                'operation_id': 'any_key',\n-                'http_method': 'GET',\n-                'servers': None,\n+                \"response_type\": (\n+                    {\n+                        str: (\n+                            bool,\n+                            date,\n+                            datetime,\n+                            dict,\n+                            float,\n+                            int,\n+                            list,\n+                            str,\n+                            none_type,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1f7a9e1e894106d4a1ce9c7c555efd61929db22f"}, "originalPosition": 76}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b9bf8fa0ae70bdfdf44558550051331faed98699", "author": {"user": {"login": "timgclark", "name": "TIm Clark"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/b9bf8fa0ae70bdfdf44558550051331faed98699", "committedDate": "2020-08-10T18:24:34Z", "message": "Re-revert black changes."}, "afterCommit": {"oid": "5e884cc660f95d03033a02800ef032c529566139", "author": {"user": {"login": "timgclark", "name": "TIm Clark"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/5e884cc660f95d03033a02800ef032c529566139", "committedDate": "2020-08-10T18:42:31Z", "message": "[python-experimental] Fix model tests\n\n* Fixes model tests to template off the classname instead of\nthe model's description.\n* Move manually written tests to 'tests_manual'\n* Regenerates automatic tests from template"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5e884cc660f95d03033a02800ef032c529566139", "author": {"user": {"login": "timgclark", "name": "TIm Clark"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/5e884cc660f95d03033a02800ef032c529566139", "committedDate": "2020-08-10T18:42:31Z", "message": "[python-experimental] Fix model tests\n\n* Fixes model tests to template off the classname instead of\nthe model's description.\n* Move manually written tests to 'tests_manual'\n* Regenerates automatic tests from template"}, "afterCommit": {"oid": "6f403590dc814ba88abcd22c6f2d6d4d6cd46b40", "author": {"user": {"login": "timgclark", "name": "TIm Clark"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/6f403590dc814ba88abcd22c6f2d6d4d6cd46b40", "committedDate": "2020-08-10T18:58:21Z", "message": "[python-experimental] Fix model tests\n\n* Fixes model tests to template off the classname instead of\nthe model's description.\n* Uses python-experimental templates when generating\npython-experimental samples"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6f403590dc814ba88abcd22c6f2d6d4d6cd46b40", "author": {"user": {"login": "timgclark", "name": "TIm Clark"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/6f403590dc814ba88abcd22c6f2d6d4d6cd46b40", "committedDate": "2020-08-10T18:58:21Z", "message": "[python-experimental] Fix model tests\n\n* Fixes model tests to template off the classname instead of\nthe model's description.\n* Uses python-experimental templates when generating\npython-experimental samples"}, "afterCommit": {"oid": "870e000a3679b7d5978d5ffa5b3926c42c6b5e50", "author": {"user": {"login": "timgclark", "name": "TIm Clark"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/870e000a3679b7d5978d5ffa5b3926c42c6b5e50", "committedDate": "2020-08-10T20:26:39Z", "message": "[python-experimental] Fix model tests\n\n* Fixes model tests to template off the classname instead of\nthe model's description.\n* Uses python-experimental templates when generating\npython-experimental samples"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "870e000a3679b7d5978d5ffa5b3926c42c6b5e50", "author": {"user": {"login": "timgclark", "name": "TIm Clark"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/870e000a3679b7d5978d5ffa5b3926c42c6b5e50", "committedDate": "2020-08-10T20:26:39Z", "message": "[python-experimental] Fix model tests\n\n* Fixes model tests to template off the classname instead of\nthe model's description.\n* Uses python-experimental templates when generating\npython-experimental samples"}, "afterCommit": {"oid": "c7d9ef9c0377047920f5405e4614d47128ea081f", "author": {"user": {"login": "timgclark", "name": "TIm Clark"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/c7d9ef9c0377047920f5405e4614d47128ea081f", "committedDate": "2020-08-10T20:27:41Z", "message": "[python-experimental] Fix model tests\n\n* Fixes model tests to template off the classname instead of\nthe model's description.\n* Uses python-experimental templates when generating\npython-experimental samples"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c7d9ef9c0377047920f5405e4614d47128ea081f", "author": {"user": {"login": "timgclark", "name": "TIm Clark"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/c7d9ef9c0377047920f5405e4614d47128ea081f", "committedDate": "2020-08-10T20:27:41Z", "message": "[python-experimental] Fix model tests\n\n* Fixes model tests to template off the classname instead of\nthe model's description.\n* Uses python-experimental templates when generating\npython-experimental samples"}, "afterCommit": {"oid": "6e77edd575ffbead0e542d3058ed6ec5ff52a79e", "author": {"user": {"login": "timgclark", "name": "TIm Clark"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/6e77edd575ffbead0e542d3058ed6ec5ff52a79e", "committedDate": "2020-08-10T20:28:39Z", "message": "[python-experimental] Fix model tests\n\n* Fixes model tests to template off the classname instead of\nthe model's description.\n* Uses python-experimental templates when generating\npython-experimental samples"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8aeaee9fca2eab6a4124e677bf99932e17a6f3c", "author": {"user": {"login": "timgclark", "name": "TIm Clark"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/b8aeaee9fca2eab6a4124e677bf99932e17a6f3c", "committedDate": "2020-08-10T20:37:18Z", "message": "[python-experimental] Fix model tests\n\n* Fixes model tests to template off the classname instead of\nthe model's description.\n* Uses python-experimental templates when generating\npython-experimental samples"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6e77edd575ffbead0e542d3058ed6ec5ff52a79e", "author": {"user": {"login": "timgclark", "name": "TIm Clark"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/6e77edd575ffbead0e542d3058ed6ec5ff52a79e", "committedDate": "2020-08-10T20:28:39Z", "message": "[python-experimental] Fix model tests\n\n* Fixes model tests to template off the classname instead of\nthe model's description.\n* Uses python-experimental templates when generating\npython-experimental samples"}, "afterCommit": {"oid": "b8aeaee9fca2eab6a4124e677bf99932e17a6f3c", "author": {"user": {"login": "timgclark", "name": "TIm Clark"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/b8aeaee9fca2eab6a4124e677bf99932e17a6f3c", "committedDate": "2020-08-10T20:37:18Z", "message": "[python-experimental] Fix model tests\n\n* Fixes model tests to template off the classname instead of\nthe model's description.\n* Uses python-experimental templates when generating\npython-experimental samples"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54149697d566e5f452d6b494a946647ead7ccd60", "author": {"user": {"login": "timgclark", "name": "TIm Clark"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/54149697d566e5f452d6b494a946647ead7ccd60", "committedDate": "2020-08-10T21:46:54Z", "message": "Fix sample file manifest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1MjM4NzU5", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7139#pullrequestreview-465238759", "createdAt": "2020-08-11T16:35:00Z", "commit": {"oid": "54149697d566e5f452d6b494a946647ead7ccd60"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "04c45bbfaf1ff9c35f3d1bc1e4771b2b44febba3", "author": {"user": {"login": "timgclark", "name": "TIm Clark"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/04c45bbfaf1ff9c35f3d1bc1e4771b2b44febba3", "committedDate": "2020-08-11T18:51:00Z", "message": "Restore remaining tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1NTM1MDEw", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7139#pullrequestreview-465535010", "createdAt": "2020-08-12T01:38:36Z", "commit": {"oid": "04c45bbfaf1ff9c35f3d1bc1e4771b2b44febba3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3306, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}