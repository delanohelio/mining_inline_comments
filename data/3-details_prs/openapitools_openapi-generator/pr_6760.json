{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM4ODk5MjA4", "number": 6760, "title": "[PHP] Better handling of invalid data (array)", "bodyText": "If the $data is an invalid Json (for example, add an extra comma after the last property) or if data is not an array, php gives error:\nInvalid argument supplied for foreach() at line 257 (Now line is 262)\nThis is my fist git pull request so please pardon me if I did something wrong.\nBest Regards", "createdAt": "2020-06-24T00:58:09Z", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6760", "merged": true, "mergeCommit": {"oid": "eaa3c730fa705bd2405b1204718011b589f4bc7e"}, "closed": true, "closedAt": "2020-07-02T10:33:23Z", "author": {"login": "Herrick19"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcuPNVEAH2gAyNDM4ODk5MjA4OjQwYTAwNTIwYWVjY2U0NjM2YWMxNTI2YmYzYWYzNTMzN2Q4ZDA4N2Y=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcxn7blgFqTQ0MjYwOTU3MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "40a00520aecce4636ac1526bf3af35337d8d087f", "author": {"user": {"login": "Herrick19", "name": "Ian Lord"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/40a00520aecce4636ac1526bf3af35337d8d087f", "committedDate": "2020-06-24T00:49:44Z", "message": "Update ObjectSerializer.mustache\n\nIf the $data is a wrongly formatted Json or if data is not an array, php gives error:\r\n\r\nInvalid argument supplied for foreach() at line 257 (Now line is 262)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ede2150903f9aacaf8b6a1391492e8e7179fb163", "author": {"user": {"login": "wing328", "name": "William Cheng"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/ede2150903f9aacaf8b6a1391492e8e7179fb163", "committedDate": "2020-07-02T07:51:45Z", "message": "update samples"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNjA5NTcw", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6760#pullrequestreview-442609570", "createdAt": "2020-07-04T13:19:34Z", "commit": {"oid": "ede2150903f9aacaf8b6a1391492e8e7179fb163"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNFQxMzoxOTozNFrOGs78YQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wNFQxMzoxOTozNFrOGs78YQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc3MjY0MQ==", "bodyText": "I guess that it won't work in 99% cases because json_decode without second argument $assoc = true returns StdClass which isn't array. And my brief test confirms that:\n$data = '{\"a\":1,\"b\":2,\"c\":3,\"d\":4,\"e\":5}';\n$data = is_string($data) ? json_decode($data) : $data;\n\nif (!is_array($data)) {\n    throw new \\InvalidArgumentException(\"Invalid array '$class'\");\n}\n// throws exception because StdClass isn't array", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6760#discussion_r449772641", "createdAt": "2020-07-04T13:19:34Z", "author": {"login": "ybelenko"}, "path": "samples/client/petstore/php/OpenAPIClient-php/lib/ObjectSerializer.php", "diffHunk": "@@ -262,6 +262,11 @@ public static function deserialize($data, $class, $httpHeaders = null)\n             return null;\n         } elseif (strcasecmp(substr($class, -2), '[]') === 0) {\n             $data = is_string($data) ? json_decode($data) : $data;\n+            \n+            if (!is_array($data)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ede2150903f9aacaf8b6a1391492e8e7179fb163"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2140, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}