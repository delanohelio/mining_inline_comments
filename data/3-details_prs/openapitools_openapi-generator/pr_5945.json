{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA0MDY0NTM4", "number": 5945, "title": "[python-experimental] Minor doc update, code comments and exception handling", "bodyText": "This PR is not ready, I am opening to start discussion. I'm not sure yet what needs to be fixed.\nAn OAS document may have a schema that does not specify the \"type\" attribute.\nPet:\n  type: object\n  properties:\n    name:\n      type: string\n    annotations:\n      type: Annotations\n\nAnnotations:\n  description: an arbitrary element that can represent any JSON schema,\n     including the \"null\" type, an object, or an array.\n     Notice the \"type\" attribute has not been set.\n  nullable: true\nIn that case, the generated Python openapi_types() function will have entries such as:\n'name': (str,),  # noqa: E501\n# without nullable: true\n'annotations': (object,),  # noqa: E501\n# When nullable: true is specified:\n'annotations': (object, none_type,),  # noqa: E501     \n\nWithout this PR change, in model_utils.py, COERCION_INDEX_BY_TYPE, when the order_response_types function is invoked, it will call COERCION_INDEX_BY_TYPE[class_or_instance] where class_or_instance is 'object', and because 'object' is not in COERCION_INDEX_BY_TYPE, an exception is raised. Also, because there was not check to determine if the key exists in the COERCION_INDEX_BY_TYPE dict, the raised exception was not user-friendly.\n\n\nPR checklist\n\n Read the contribution guidelines.\n If contributing template-only or documentation-only changes which will change sample output, build the project before.\n Run the shell script(s) under ./bin/ (or Windows batch scripts under.\\bin\\windows) to update Petstore samples related to your fix. This is important, as CI jobs will verify all generator outputs of your HEAD commit, and these must match the expectations made by your contribution. You only need to run ./bin/{LANG}-petstore.sh, ./bin/openapi3/{LANG}-petstore.sh if updating the code or mustache templates for a language ({LANG}) (e.g. php, ruby, python, etc).\n File the PR against the correct branch: master, 4.3.x, 5.0.x. Default: master.\n Copy the technical committee to review the pull request if your PR is targeting a particular programming language.", "createdAt": "2020-04-16T01:15:58Z", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5945", "merged": true, "mergeCommit": {"oid": "1e01c380e85cb9fe6449528bf75287dbce07f548"}, "closed": true, "closedAt": "2020-04-24T05:59:32Z", "author": {"login": "sebastien-rosset"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcX_8YrgH2gAyNDA0MDY0NTM4OjRlMWRiYTUwMTJkZjZlYmY3MGMxZjdmODdjMTA1NjllNzY0MDg5YjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcarEjKAFqTM5OTY1OTc5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4e1dba5012df6ebf70c1f7f87c10569e764089b3", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/4e1dba5012df6ebf70c1f7f87c10569e764089b3", "committedDate": "2020-04-15T22:36:19Z", "message": "add support for any type, i.e. when 'type' attribute is not specified in OAS schema"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7fb260205e3f15c58cde3566616391d378ae4742", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/7fb260205e3f15c58cde3566616391d378ae4742", "committedDate": "2020-04-16T14:54:51Z", "message": "fix typos, add code comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78f71babbd5169ed3623f61767d13fa58c88d818", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/78f71babbd5169ed3623f61767d13fa58c88d818", "committedDate": "2020-04-16T22:04:16Z", "message": "Handle case when 'type' attribute is not present in the OAS schema"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43eecab73776fb6c4e09b0f982ce7930bb2a4f96", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/43eecab73776fb6c4e09b0f982ce7930bb2a4f96", "committedDate": "2020-04-18T18:54:15Z", "message": "fix python formatting rule"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "332d5f540b336db23fd622ec526788dbff4431d4", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/332d5f540b336db23fd622ec526788dbff4431d4", "committedDate": "2020-04-18T21:14:57Z", "message": "fix python formatting rule"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MDkyNjIz", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5945#pullrequestreview-396092623", "createdAt": "2020-04-20T01:32:23Z", "commit": {"oid": "332d5f540b336db23fd622ec526788dbff4431d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwMTozMjoyM1rOGH_5YQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMFQwMTozMjoyM1rOGH_5YQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTA0MDA5Nw==", "bodyText": "@sebastien-rosset can we discuss this over Skype?\nI am concerned with doing it this way because many python classes inherit from the object type. So if we did it this way, it would allow in a ton of other class instances that we shouldn't like set, tuple, and arbitrary other classes.\nSwagger/Openapi only allows specific types (string, int, float, dict, list, bytes, datetime, date, file_type, none_type)\nMy preference would be to instead convert these any type classes in python into a composed schema where it oneOf allows any type. As an added benefit, this could maybe be used to verify that we can have oneOf models with simple or complex types, which I'm not sure we can do.\nThings like:\noneOf:\n\nstring\nPet\n\nWhat do you think?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5945#discussion_r411040097", "createdAt": "2020-04-20T01:32:23Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_utils.mustache", "diffHunk": "@@ -84,7 +84,7 @@ COERCION_INDEX_BY_TYPE = {\n     date: 10,\n     str: 11,\n     file_type: 12,   # 'file_type' is an alias for the built-in 'file' or 'io.IOBase' type.\n-    object: 13,      # Any type, the 'type' attribute is not specified in a schema in a OAS document.\n+    object: 13,      # The 'type' attribute is not specified in the OAS schema.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "332d5f540b336db23fd622ec526788dbff4431d4"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc4696365436a91388a97bf043f3492cb1080972", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/bc4696365436a91388a97bf043f3492cb1080972", "committedDate": "2020-04-23T05:28:45Z", "message": "remove 'object' as a type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "025d87d607f0f9a3ebcb7356c986feeb696ac8cc", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/025d87d607f0f9a3ebcb7356c986feeb696ac8cc", "committedDate": "2020-04-23T05:37:00Z", "message": "Merge branch 'master' of github.com:CiscoM31/openapi-generator into python-experimental-any-type"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5NjU5Nzkz", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5945#pullrequestreview-399659793", "createdAt": "2020-04-24T05:59:00Z", "commit": {"oid": "025d87d607f0f9a3ebcb7356c986feeb696ac8cc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2433, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}