{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI5NDUxNTI0", "number": 6573, "title": "[docker] Tag latest-release for stable latest tagging", "bodyText": "Our latest tags track master. We don't currently have a stable tracking tag.\nThis github workflow runs every couple of days, gets the last known tagged release from git metadata, pulls that image from dockerhub if it exists, and creates/updates a tag which represents the latest release.\n\nopenapitools/openapi-generator-online:latest-release\nopenapitools/openapi-generator:cli-latest-release\nopenapitools/openapi-generator:online-latest-release\n\nReview github workflow docs for details on secrets usage.\nSecrets are already setup and ready for this to be merged.\nfixes #3840\ncc @OpenAPITools/generator-core-team\n\nPR checklist\n\n Read the contribution guidelines.\n If contributing template-only or documentation-only changes which will change sample output, build the project before.\n Run the shell script(s) under ./bin/ (or Windows batch scripts under.\\bin\\windows) to update Petstore samples related to your fix. This is important, as CI jobs will verify all generator outputs of your HEAD commit, and these must match the expectations made by your contribution. You only need to run ./bin/{LANG}-petstore.sh, ./bin/openapi3/{LANG}-petstore.sh if updating the code or mustache templates for a language ({LANG}) (e.g. php, ruby, python, etc).\n File the PR against the correct branch: master, 4.3.x, 5.0.x. Default: master.\n Copy the technical committee to review the pull request if your PR is targeting a particular programming language.", "createdAt": "2020-06-06T21:25:52Z", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6573", "merged": true, "mergeCommit": {"oid": "108275affef1fcf399f2b8ca98588d963dc081df"}, "closed": true, "closedAt": "2020-06-29T01:50:43Z", "author": {"login": "jimschubert"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcot_gmgH2gAyNDI5NDUxNTI0OjQ3NDlkMTliNmY3YjExMTRiMzNjNGRmOTVjYjExNjBhYWUxZjA0Yjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcvz1-PAFqTQzODgxNzEwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4749d19b6f7b1114b33c4df95cb1160aae1f04b9", "author": {"user": {"login": "jimschubert", "name": "Jim Schubert"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/4749d19b6f7b1114b33c4df95cb1160aae1f04b9", "committedDate": "2020-06-06T21:18:09Z", "message": "[docker] Tag latest-release for stable latest tagging"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NzcwMTc1", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6573#pullrequestreview-425770175", "createdAt": "2020-06-06T21:27:16Z", "commit": {"oid": "4749d19b6f7b1114b33c4df95cb1160aae1f04b9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQyMToyNzoxN1rOGgFwaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQyMToyNzoxN1rOGgFwaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjMwMTkyOQ==", "bodyText": "note to reviewer, I'd recommend trying a similar command here in a private repo to become familiar with it. This follows GitHub Workflow documentation by passing creds into supported stdin.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6573#discussion_r436301929", "createdAt": "2020-06-06T21:27:17Z", "author": {"login": "jimschubert"}, "path": ".github/workflows/docker-tag-latest-release.yml", "diffHunk": "@@ -0,0 +1,62 @@\n+name: Docker Tag latest-release\n+\n+# Run every couple of days\n+on:\n+  schedule:\n+  - cron: \"* */48 * * *\"\n+\n+jobs:\n+  # This pulls all containers for the last known release tag, and tags as latest-release or x-latest-release for shared repo\n+  tagLatestRelease:\n+    runs-on: ubuntu-latest\n+\n+    steps:\n+\n+    # Pull the code so we have git metadata\n+    - name: Checkout code\n+      uses: actions/checkout@v2\n+\n+    # This action will \"unshallow\" so we have all tag info\n+    - name: Get latest tag\n+      id: tagger\n+      uses: jimschubert/query-tag-action@v1\n+      with:\n+        include: 'v*'\n+        exclude: '*-rc*'\n+        commit-ish: 'HEAD~'\n+\n+    - name: DockerHub Login\n+      run: echo \"${{ secrets.DOCKER_PASSWORD }}\" | docker login -u \"${{ secrets.DOCKER_USERNAME }}\" --password-stdin", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4749d19b6f7b1114b33c4df95cb1160aae1f04b9"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4ODE3MTA5", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6573#pullrequestreview-438817109", "createdAt": "2020-06-28T22:04:38Z", "commit": {"oid": "4749d19b6f7b1114b33c4df95cb1160aae1f04b9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2224, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}