{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYwMDU1MjEx", "number": 4940, "title": "[go-experimental] Support aliasing of API keys", "bodyText": "Support aliasing of API keys so users of generated clients don't have to specify same value under different names.\nExample:\ncomponents:\n  securitySchemes:\n    apiKeyAuth:\n      type: apiKey\n      name: api_key\n      in: query\n      description: API Key\n    apiKeyAuthHeader:\n      type: apiKey\n      name: SECURITY-API-KEY\n      x-auth-id-alias: apiKeyAuth\n      in: header\n      description: API Key\nOne can also alias both names for compatibility reasons or simply nicer usage:\ncomponents:\n  securitySchemes:\n    apiKeyAuth:\n      type: apiKey\n      name: api_key\n      x-auth-id-alias: secret\n      in: query\n      description: API Key\n    apiKeyAuthHeader:\n      type: apiKey\n      name: SECURITY-API-KEY\n      x-auth-id-alias: secret\n      in: header\n      description: API Key\n\nPR checklist\n\n Read the contribution guidelines.\n If contributing template-only or documentation-only changes which will change sample output, build the project before.\n Run the shell script(s) under ./bin/ (or Windows batch scripts under.\\bin\\windows) to update Petstore samples related to your fix. This is important, as CI jobs will verify all generator outputs of your HEAD commit, and these must match the expectations made by your contribution. You only need to run ./bin/{LANG}-petstore.sh, ./bin/openapi3/{LANG}-petstore.sh if updating the code or mustache templates for a language ({LANG}) (e.g. php, ruby, python, etc).\n File the PR against the correct branch: master, 4.3.x, 5.0.x. Default: master.\n Copy the technical committee to review the pull request if your PR is targeting a particular programming language.\n\n@antihax (2017/11) @bvwells (2017/12) @grokify (2018/07) @kemokemo (2018/09) @bkabrda (2019/07)", "createdAt": "2020-01-07T15:58:29Z", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4940", "merged": true, "mergeCommit": {"oid": "35e90a553d846348702be8c95abb1c446f570aa6"}, "closed": true, "closedAt": "2020-03-01T08:31:37Z", "author": {"login": "jirikuncar"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4SyngAFqTMzOTc3MjM3MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcJJpckgFqTM2NjgxNTMzNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5NzcyMzcw", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4940#pullrequestreview-339772370", "createdAt": "2020-01-08T10:28:16Z", "commit": {"oid": "b13c7b5122d8e6455e9c602e0d0295679493343a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b13c7b5122d8e6455e9c602e0d0295679493343a", "author": {"user": {"login": "jirikuncar", "name": "Jiri Kuncar"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/b13c7b5122d8e6455e9c602e0d0295679493343a", "committedDate": "2020-01-08T10:25:27Z", "message": "Use {{.}} inside condition"}, "afterCommit": {"oid": "640c404145ec26e2be517742b6b048926935e2aa", "author": {"user": {"login": "jirikuncar", "name": "Jiri Kuncar"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/640c404145ec26e2be517742b6b048926935e2aa", "committedDate": "2020-01-13T16:46:20Z", "message": "Use name instead of keyParamName for lookup"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "640c404145ec26e2be517742b6b048926935e2aa", "author": {"user": {"login": "jirikuncar", "name": "Jiri Kuncar"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/640c404145ec26e2be517742b6b048926935e2aa", "committedDate": "2020-01-13T16:46:20Z", "message": "Use name instead of keyParamName for lookup"}, "afterCommit": {"oid": "b3d8d694d851037b4ee5cc28660f1160a49dcf18", "author": {"user": {"login": "jirikuncar", "name": "Jiri Kuncar"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/b3d8d694d851037b4ee5cc28660f1160a49dcf18", "committedDate": "2020-01-15T14:59:17Z", "message": "[go-experimental] Support aliasing of API keys"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "761f6e5577dbf97b3566bc8367204d8ee75e7e0f", "author": {"user": {"login": "jirikuncar", "name": "Jiri Kuncar"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/761f6e5577dbf97b3566bc8367204d8ee75e7e0f", "committedDate": "2020-01-15T15:17:01Z", "message": "[go-experimental] Support aliasing of API keys"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "639824fab6c3d7438736fb00d6172148ce564052", "author": {"user": {"login": "jirikuncar", "name": "Jiri Kuncar"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/639824fab6c3d7438736fb00d6172148ce564052", "committedDate": "2020-01-15T15:17:57Z", "message": "Use {{.}} inside condition"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d0184d2390b3f14d7dea759786477385eaa40fb", "author": {"user": {"login": "jirikuncar", "name": "Jiri Kuncar"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/5d0184d2390b3f14d7dea759786477385eaa40fb", "committedDate": "2020-01-15T15:21:16Z", "message": "Use name instead of keyParamName for lookup"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b3d8d694d851037b4ee5cc28660f1160a49dcf18", "author": {"user": {"login": "jirikuncar", "name": "Jiri Kuncar"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/b3d8d694d851037b4ee5cc28660f1160a49dcf18", "committedDate": "2020-01-15T14:59:17Z", "message": "[go-experimental] Support aliasing of API keys"}, "afterCommit": {"oid": "5d0184d2390b3f14d7dea759786477385eaa40fb", "author": {"user": {"login": "jirikuncar", "name": "Jiri Kuncar"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/5d0184d2390b3f14d7dea759786477385eaa40fb", "committedDate": "2020-01-15T15:21:16Z", "message": "Use name instead of keyParamName for lookup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0NzA1OTcz", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4940#pullrequestreview-344705973", "createdAt": "2020-01-17T16:45:34Z", "commit": {"oid": "5d0184d2390b3f14d7dea759786477385eaa40fb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxNjo0NTozNFrOFe-6oA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxNjo0NTozNFrOFe-6oA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODAzMjQxNg==", "bodyText": "It would be good to document this vendor extension somewhere. Currently the vendor extensions are listed at https://github.com/OpenAPITools/openapi-generator/wiki/Vendor-Extensions, but it does not look like only owners can make a change (?), which imo explains why vendor extensions are not well documented.\nThis new 'x-lookup' vendor extension is buried in the template, so I think very few people would know this aliasing capability exists.\nRelevant issue:\n#4976", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4940#discussion_r368032416", "createdAt": "2020-01-17T16:45:34Z", "author": {"login": "sebastien-rosset"}, "path": "modules/openapi-generator/src/main/resources/go-experimental/api.mustache", "diffHunk": "@@ -242,7 +242,7 @@ func (r api{{operationId}}Request) Execute() ({{#returnType}}{{{.}}}, {{/returnT\n \tif r.ctx != nil {\n \t\t// API Key Authentication\n \t\tif auth, ok := r.ctx.Value(ContextAPIKeys).(map[string]APIKey); ok {\n-\t\t\tif auth, ok := auth[\"{{keyParamName}}\"]; ok {\n+\t\t\tif auth, ok := auth[\"{{#vendorExtensions.x-lookup}}{{.}}{{/vendorExtensions.x-lookup}}{{^vendorExtensions.x-lookup}}{{name}}{{/vendorExtensions.x-lookup}}\"]; ok {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d0184d2390b3f14d7dea759786477385eaa40fb"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "942869a5cb2a38a13e5ac392e69126cc0e7695b0", "author": {"user": {"login": "jirikuncar", "name": "Jiri Kuncar"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/942869a5cb2a38a13e5ac392e69126cc0e7695b0", "committedDate": "2020-02-19T09:25:02Z", "message": "Merge branch 'master' into api-key-x-lookup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d88add548f6152eb33c4c78be1ccf4320de16e9a", "author": {"user": {"login": "jirikuncar", "name": "Jiri Kuncar"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/d88add548f6152eb33c4c78be1ccf4320de16e9a", "committedDate": "2020-02-19T09:27:03Z", "message": "x-lookup to x-auth-id-alias"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2ODE1MzM0", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4940#pullrequestreview-366815334", "createdAt": "2020-02-29T19:25:49Z", "commit": {"oid": "d88add548f6152eb33c4c78be1ccf4320de16e9a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1933, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}