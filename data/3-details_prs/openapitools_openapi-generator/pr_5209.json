{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcxMTYyNzgw", "number": 5209, "title": "[python] use datetime aware object", "bodyText": "Add timezone information to datetime, otherwise the calculation of UNIX time may be incorrect, depending on the platform and local time configuration.\ndatetime.now() returns the current local date and time. If optional argument tz is None or not specified, this is like today(), but, if possible, supplies more precision than can be gotten from going through a time.time() timestamp (for example, this may be possible on platforms supplying the C gettimeofday() function).\nThis means the value of now() is not deterministic across platforms unless the timezone information is provided. As a result, on some platforms the \"created\" and \"expires\" fields are set incorrectly and cause the server side to conclude the signature is incorrect.\nAlso, need to handle python 2.7 and python 3.x.\n\nPR checklist\n\n Read the contribution guidelines.\n If contributing template-only or documentation-only changes which will change sample output, build the project before.\n Run the shell script(s) under ./bin/ (or Windows batch scripts under.\\bin\\windows) to update Petstore samples related to your fix. This is important, as CI jobs will verify all generator outputs of your HEAD commit, and these must match the expectations made by your contribution. You only need to run ./bin/{LANG}-petstore.sh, ./bin/openapi3/{LANG}-petstore.sh if updating the code or mustache templates for a language ({LANG}) (e.g. php, ruby, python, etc).\n File the PR against the correct branch: master, 4.3.x, 5.0.x. Default: master.\n Copy the technical committee to review the pull request if your PR is targeting a particular programming language.", "createdAt": "2020-02-05T03:17:27Z", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5209", "merged": true, "mergeCommit": {"oid": "cc0fe06d1cf875e03a21cfa4f83259235c37701f"}, "closed": true, "closedAt": "2020-02-06T17:48:24Z", "author": {"login": "sebastien-rosset"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcBNSQngH2gAyMzcxMTYyNzgwOmQ4NjU3MThkYzZhMjRmN2Y2OTM1OTlmNjNiZGFjZWFlY2U4MTU4ZjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcBudmLAFqTM1NDY0ODczMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d865718dc6a24f7f693599f63bdaceaece8158f0", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/d865718dc6a24f7f693599f63bdaceaece8158f0", "committedDate": "2020-02-05T03:08:43Z", "message": "python use aware datetime object"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "262f8e26085afecbbb6fb421163cf7c56394a19d", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/262f8e26085afecbbb6fb421163cf7c56394a19d", "committedDate": "2020-02-05T04:49:29Z", "message": "python use aware datetime object"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2d911883803774a3217ffceb2dde6cb4c258abe", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/e2d911883803774a3217ffceb2dde6cb4c258abe", "committedDate": "2020-02-05T04:49:39Z", "message": "python use aware datetime object"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c79baecfbdf7c12de59780b96bcde5c01c4d167f", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/c79baecfbdf7c12de59780b96bcde5c01c4d167f", "committedDate": "2020-02-05T06:32:11Z", "message": "python use aware datetime object"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b2917bc6a433e7fda26f53b678fef4ba4efee78", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/1b2917bc6a433e7fda26f53b678fef4ba4efee78", "committedDate": "2020-02-05T06:48:57Z", "message": "Merge remote-tracking branch 'upstream/master'"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c2321a2952836dcff2f81b481ab18f56952d0d7", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/2c2321a2952836dcff2f81b481ab18f56952d0d7", "committedDate": "2020-02-05T06:57:48Z", "message": "python use aware datetime object"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "818473c0e6dc258544d40315e4b21136e17e3272", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/818473c0e6dc258544d40315e4b21136e17e3272", "committedDate": "2020-02-05T15:15:16Z", "message": "Merge remote-tracking branch 'origin' into python-datetime-timezone"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c3a91f41764314aa514b6ba286851ea7083ed97", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/9c3a91f41764314aa514b6ba286851ea7083ed97", "committedDate": "2020-02-05T15:16:08Z", "message": "python use aware datetime object"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0MTI4NzQz", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5209#pullrequestreview-354128743", "createdAt": "2020-02-06T00:12:01Z", "commit": {"oid": "9c3a91f41764314aa514b6ba286851ea7083ed97"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQwMDoxMjowMVrOFmLiEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQwMDoxMjowMVrOFmLiEw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTU3OTE1NQ==", "bodyText": "Should we worry about a server using non-gmt time/a specific time zone?\nAnother solution would be to add that timezone input in a later PR if (and probably when) some poor soul hits that use case.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5209#discussion_r375579155", "createdAt": "2020-02-06T00:12:01Z", "author": {"login": "spacether"}, "path": "samples/openapi3/client/petstore/python-experimental/petstore_api/signing.py", "diffHunk": "@@ -270,15 +263,16 @@ def _get_signed_header_info(self, resource_path, method, headers, body, query_pa\n         if query_params:\n             request_target += \"?\" + urlencode(query_params)\n \n-        # Get current time and generate RFC 1123 (HTTP/1.1) date/time string.\n-        now = datetime.now()\n-        stamp = mktime(now.timetuple())\n-        cdate = formatdate(timeval=stamp, localtime=False, usegmt=True)\n+        # Get UNIX time, e.g. seconds since epoch, not including leap seconds.\n+        now = time()\n+        # Format date per RFC 7231 section-7.1.1.2. An example is:\n+        # Date: Wed, 21 Oct 2015 07:28:00 GMT\n+        cdate = formatdate(timeval=now, localtime=False, usegmt=True)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c3a91f41764314aa514b6ba286851ea7083ed97"}, "originalPosition": 40}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0NjQ4NzMz", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5209#pullrequestreview-354648733", "createdAt": "2020-02-06T17:47:59Z", "commit": {"oid": "9c3a91f41764314aa514b6ba286851ea7083ed97"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2939, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}