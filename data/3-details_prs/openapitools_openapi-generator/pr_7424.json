{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg3Mjk5MzE0", "number": 7424, "title": "[Python-experimental] Don't mandate passing in required value as argument", "bodyText": "After a change done in #7274, an enum model with a default value would not have the default value used in constructor. This PR fixes that.\n\nPR checklist\n\n Read the contribution guidelines.\n Pull Request title clearly describes the work in the pull request and Pull Request description provides details about how to validate the work. Missing information here may result in delayed response from the community.\n If contributing template-only or documentation-only changes which will change sample output, build the project beforehand.\n Run the shell script ./bin/generate-samples.shto update all Petstore samples related to your fix. This is important, as CI jobs will verify all generator outputs of your HEAD commit as it would merge with master. These must match the expectations made by your contribution. You may regenerate an individual generator by passing the relevant config(s) as an argument to the script, for example ./bin/generate-samples.sh bin/configs/java*. For Windows users, please run the script in Git BASH.\n File the PR against the correct branch: master\n Copy the technical committee to review the pull request if your PR is targeting a particular programming language.\n\n@taxpon (2017/07) @frol (2017/07) @mbohlool (2017/07) @cbornet (2017/09) @kenjones-cisco (2017/11) @tomplus (2018/10) @Jyhess (2019/01) @arun-nalla (2019/11) @spacether (2019/11)", "createdAt": "2020-09-15T13:31:59Z", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7424", "merged": true, "mergeCommit": {"oid": "336521b464d9edf42002a89d956499a4f73986e4"}, "closed": true, "closedAt": "2020-09-29T17:56:53Z", "author": {"login": "bkabrda"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJH5z3AFqTQ4ODY4ODU4Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNsBv5gFqTQ5ODc0MTI0NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4Njg4NTgy", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7424#pullrequestreview-488688582", "createdAt": "2020-09-15T13:35:02Z", "commit": {"oid": "348b8c3eff1323832c127f185c70431a37b6ac3f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0579635f1061c35a63f916886e202bf65339e4c", "author": {"user": {"login": "bkabrda", "name": "Slavek Kabrda"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/c0579635f1061c35a63f916886e202bf65339e4c", "committedDate": "2020-09-18T06:27:22Z", "message": "[Python-experimental] Don't mandate passing in required value as argument"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "348b8c3eff1323832c127f185c70431a37b6ac3f", "author": {"user": {"login": "bkabrda", "name": "Slavek Kabrda"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/348b8c3eff1323832c127f185c70431a37b6ac3f", "committedDate": "2020-09-15T13:28:43Z", "message": "[Python-experimental] Use default value for model's init if available"}, "afterCommit": {"oid": "c0579635f1061c35a63f916886e202bf65339e4c", "author": {"user": {"login": "bkabrda", "name": "Slavek Kabrda"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/c0579635f1061c35a63f916886e202bf65339e4c", "committedDate": "2020-09-18T06:27:22Z", "message": "[Python-experimental] Don't mandate passing in required value as argument"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkxNjUxNDQ3", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7424#pullrequestreview-491651447", "createdAt": "2020-09-18T17:24:21Z", "commit": {"oid": "c0579635f1061c35a63f916886e202bf65339e4c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxNzoyNDoyMVrOHUVurg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xOFQxNzoyNDoyMVrOHUVurg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTA4OTU4Mg==", "bodyText": "I think that you can do this without have_value. How about this?\ndo not assign value + have_value before the if statement\n        if 'value' in kwargs:\n            value = kwargs.pop('value')\n        elif args:\n            args = list(args)\n            value = args.pop(0)\n{{#defaultValue}}\n        else:\n            value = {{{defaultValue}}}\n{{/defaultValue}}\n{{^defaultValue}}\n        else:\n            raise ApiTypeError(\n                \"value is required, but not passed in args or kwargs and doesn't have default\",\n                path_to_item=_path_to_item,\n                valid_classes=(self.__class__,),\n            )\n{{/defaultValue}}\n\nMy understanding is that all ModelSimple instances need an assigned value.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7424#discussion_r491089582", "createdAt": "2020-09-18T17:24:21Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_templates/method_init_simple.mustache", "diffHunk": "@@ -8,36 +8,47 @@\n     ])\n \n     @convert_js_args_to_python_args\n-    def __init__(self{{#hasRequired}}, value{{/hasRequired}}, *args, **kwargs):\n+    def __init__(self, *args, **kwargs):\n         \"\"\"{{classname}} - a model defined in OpenAPI\n \n-{{#hasRequired}}\n+        Note that value can be passed either in args or in kwargs, but not in both.\n+\n         Args:\n             value ({{{dataType}}}):{{#description}} {{description}}.{{/description}}{{#defaultValue}} if omitted the server will use the default value of {{{defaultValue}}}{{/defaultValue}}{{#allowableValues}}, must be one of [{{#enumVars}}{{{value}}}, {{/enumVars}}]{{/allowableValues}}  # noqa: E501\n-\n-{{/hasRequired}}\n         Keyword Args:\n-{{^hasRequired}}\n             value ({{{dataType}}}):{{#description}} {{description}}.{{/description}}{{#defaultValue}} defaults to {{{defaultValue}}}{{/defaultValue}}{{#allowableValues}}, must be one of [{{#enumVars}}{{{value}}}, {{/enumVars}}]{{/allowableValues}}  # noqa: E501\n-{{/hasRequired}}\n {{> python-experimental/model_templates/docstring_init_required_kwargs }}\n         \"\"\"\n \n-{{^hasRequired}}\n+        value = None\n+        have_value = False\n         if 'value' in kwargs:\n             value = kwargs.pop('value')\n+            have_value = True\n         elif args:\n             args = list(args)\n             value = args.pop(0)\n+            have_value = True\n+{{#defaultValue}}\n         else:\n             value = {{{defaultValue}}}\n-{{/hasRequired}}\n+            have_value = True\n+{{/defaultValue}}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0579635f1061c35a63f916886e202bf65339e4c"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMjEwNjUx", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7424#pullrequestreview-492210651", "createdAt": "2020-09-20T17:47:56Z", "commit": {"oid": "c0579635f1061c35a63f916886e202bf65339e4c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5355f802afb80dae3033d2338dd43c89dc6a4957", "author": {"user": {"login": "bkabrda", "name": "Slavek Kabrda"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/5355f802afb80dae3033d2338dd43c89dc6a4957", "committedDate": "2020-09-22T08:24:57Z", "message": "Remove usage of have_value"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e3d3a3aa4df64bec4c103797ed01bd55caf3a7e", "author": {"user": {"login": "bkabrda", "name": "Slavek Kabrda"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/0e3d3a3aa4df64bec4c103797ed01bd55caf3a7e", "committedDate": "2020-09-23T09:27:36Z", "message": "Address additional review comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5aed86ea03f11666a72f050abd3ffb25fb353c2b", "author": {"user": {"login": "bkabrda", "name": "Slavek Kabrda"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/5aed86ea03f11666a72f050abd3ffb25fb353c2b", "committedDate": "2020-09-23T09:36:34Z", "message": "Fix tests according to the code change"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2MDgwNTky", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7424#pullrequestreview-496080592", "createdAt": "2020-09-25T03:04:10Z", "commit": {"oid": "5aed86ea03f11666a72f050abd3ffb25fb353c2b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwMzowNDoxMFrOHXzXXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwMzowNDoxMFrOHXzXXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDcyMDg2Mw==", "bodyText": "Please delete this line setting value as None.\nNone may be a valid value for an instance, like nullable models, or an enum with a None option.\nBecause of that we should not set an initial value of None for the variable value.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7424#discussion_r494720863", "createdAt": "2020-09-25T03:04:10Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_templates/method_init_simple.mustache", "diffHunk": "@@ -8,30 +8,39 @@\n     ])\n \n     @convert_js_args_to_python_args\n-    def __init__(self{{#hasRequired}}, value{{/hasRequired}}, *args, **kwargs):\n+    def __init__(self, *args, **kwargs):\n         \"\"\"{{classname}} - a model defined in OpenAPI\n \n-{{#hasRequired}}\n+        Note that value can be passed either in args or in kwargs, but not in both.\n+\n         Args:\n             value ({{{dataType}}}):{{#description}} {{description}}.{{/description}}{{#defaultValue}} if omitted the server will use the default value of {{{defaultValue}}}{{/defaultValue}}{{#allowableValues}}, must be one of [{{#enumVars}}{{{value}}}, {{/enumVars}}]{{/allowableValues}}  # noqa: E501\n-\n-{{/hasRequired}}\n         Keyword Args:\n-{{^hasRequired}}\n             value ({{{dataType}}}):{{#description}} {{description}}.{{/description}}{{#defaultValue}} defaults to {{{defaultValue}}}{{/defaultValue}}{{#allowableValues}}, must be one of [{{#enumVars}}{{{value}}}, {{/enumVars}}]{{/allowableValues}}  # noqa: E501\n-{{/hasRequired}}\n {{> python-experimental/model_templates/docstring_init_required_kwargs }}\n         \"\"\"\n \n-{{^hasRequired}}\n+        value = None", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5aed86ea03f11666a72f050abd3ffb25fb353c2b"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2MDgxMjYz", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7424#pullrequestreview-496081263", "createdAt": "2020-09-25T03:06:41Z", "commit": {"oid": "5aed86ea03f11666a72f050abd3ffb25fb353c2b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwMzowNjo0MlrOHXzZrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwMzowNjo0MlrOHXzZrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDcyMTQ1NQ==", "bodyText": "Please remove this hasRequired block.\nIn this case there is no default value. There must always be an input value for modelSimple models. We don't need to filter by hasRequired any more.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7424#discussion_r494721455", "createdAt": "2020-09-25T03:06:42Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_templates/method_init_simple.mustache", "diffHunk": "@@ -8,30 +8,39 @@\n     ])\n \n     @convert_js_args_to_python_args\n-    def __init__(self{{#hasRequired}}, value{{/hasRequired}}, *args, **kwargs):\n+    def __init__(self, *args, **kwargs):\n         \"\"\"{{classname}} - a model defined in OpenAPI\n \n-{{#hasRequired}}\n+        Note that value can be passed either in args or in kwargs, but not in both.\n+\n         Args:\n             value ({{{dataType}}}):{{#description}} {{description}}.{{/description}}{{#defaultValue}} if omitted the server will use the default value of {{{defaultValue}}}{{/defaultValue}}{{#allowableValues}}, must be one of [{{#enumVars}}{{{value}}}, {{/enumVars}}]{{/allowableValues}}  # noqa: E501\n-\n-{{/hasRequired}}\n         Keyword Args:\n-{{^hasRequired}}\n             value ({{{dataType}}}):{{#description}} {{description}}.{{/description}}{{#defaultValue}} defaults to {{{defaultValue}}}{{/defaultValue}}{{#allowableValues}}, must be one of [{{#enumVars}}{{{value}}}, {{/enumVars}}]{{/allowableValues}}  # noqa: E501\n-{{/hasRequired}}\n {{> python-experimental/model_templates/docstring_init_required_kwargs }}\n         \"\"\"\n \n-{{^hasRequired}}\n+        value = None\n         if 'value' in kwargs:\n             value = kwargs.pop('value')\n         elif args:\n             args = list(args)\n             value = args.pop(0)\n+{{#defaultValue}}\n         else:\n             value = {{{defaultValue}}}\n+{{/defaultValue}}\n+{{^defaultValue}}\n+{{#hasRequired}}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5aed86ea03f11666a72f050abd3ffb25fb353c2b"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2MDgxODg2", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7424#pullrequestreview-496081886", "createdAt": "2020-09-25T03:08:51Z", "commit": {"oid": "5aed86ea03f11666a72f050abd3ffb25fb353c2b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwMzowODo1MVrOHXzbyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwMzowODo1MVrOHXzbyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDcyMTk5Mw==", "bodyText": "Can you remove value from args here, or describe it as args[0] rather than value?\nWe no longer explicitly have value in the args signature. We also define it in kwargs. The user can definitely pass it in in args[0] or kwargs['value']", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7424#discussion_r494721993", "createdAt": "2020-09-25T03:08:51Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_templates/method_init_simple.mustache", "diffHunk": "@@ -8,30 +8,39 @@\n     ])\n \n     @convert_js_args_to_python_args\n-    def __init__(self{{#hasRequired}}, value{{/hasRequired}}, *args, **kwargs):\n+    def __init__(self, *args, **kwargs):\n         \"\"\"{{classname}} - a model defined in OpenAPI\n \n-{{#hasRequired}}\n+        Note that value can be passed either in args or in kwargs, but not in both.\n+\n         Args:\n             value ({{{dataType}}}):{{#description}} {{description}}.{{/description}}{{#defaultValue}} if omitted the server will use the default value of {{{defaultValue}}}{{/defaultValue}}{{#allowableValues}}, must be one of [{{#enumVars}}{{{value}}}, {{/enumVars}}]{{/allowableValues}}  # noqa: E501", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5aed86ea03f11666a72f050abd3ffb25fb353c2b"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk2MDkxNjY4", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7424#pullrequestreview-496091668", "createdAt": "2020-09-25T03:45:42Z", "commit": {"oid": "5aed86ea03f11666a72f050abd3ffb25fb353c2b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwMzo0NTo0M1rOHXz-VA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwMzo0NTo0M1rOHXz-VA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDczMDgzNg==", "bodyText": "How about changing FROM if omitted the server will use the default value of {{{defaultValue}}} TO defaults to {{{defaultValue}}} like we have in the kwargs value definition", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7424#discussion_r494730836", "createdAt": "2020-09-25T03:45:43Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_templates/method_init_simple.mustache", "diffHunk": "@@ -8,30 +8,39 @@\n     ])\n \n     @convert_js_args_to_python_args\n-    def __init__(self{{#hasRequired}}, value{{/hasRequired}}, *args, **kwargs):\n+    def __init__(self, *args, **kwargs):\n         \"\"\"{{classname}} - a model defined in OpenAPI\n \n-{{#hasRequired}}\n+        Note that value can be passed either in args or in kwargs, but not in both.\n+\n         Args:\n             value ({{{dataType}}}):{{#description}} {{description}}.{{/description}}{{#defaultValue}} if omitted the server will use the default value of {{{defaultValue}}}{{/defaultValue}}{{#allowableValues}}, must be one of [{{#enumVars}}{{{value}}}, {{/enumVars}}]{{/allowableValues}}  # noqa: E501", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5aed86ea03f11666a72f050abd3ffb25fb353c2b"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38f258ac9eadee8e2684ea2dbc405bfc3c6edf22", "author": {"user": {"login": "spacether", "name": "Justin Black"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/38f258ac9eadee8e2684ea2dbc405bfc3c6edf22", "committedDate": "2020-09-29T16:23:44Z", "message": "Does not set None as value initial value, removes hasRequired tag usage, updates docstring"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4NzQxMjQ1", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7424#pullrequestreview-498741245", "createdAt": "2020-09-29T17:55:59Z", "commit": {"oid": "38f258ac9eadee8e2684ea2dbc405bfc3c6edf22"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3125, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}