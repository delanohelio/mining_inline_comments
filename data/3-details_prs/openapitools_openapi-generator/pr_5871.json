{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAxMTg3NTMz", "number": 5871, "title": "[Rust Server] Fix #5906 (yaml with path parameter error)", "bodyText": "#5906\nModification list\n\nFix generated code with Rust 1.39+ issue\n\nhelp: use dyn: dyn Future<Item=CallbackWithHeaderPostResponse, Error=ApiError> + Send\nerror: trait objects without an explicit dyn are deprecated\n--> output/openapi-v3/examples/server/server.rs:137:29\n|\n137 | context: &C) -> Box<Future<Item=CallbackWithHeaderPostResponse, Error=ApiError> + Send>\n| ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use dyn: dyn Future<Item=CallbackWithHeaderPostResponse, Error=ApiError> + Send\n|\n= note: -D bare-trait-objects implied by -D warnings\nerror: trait objects without an explicit dyn are deprecated\n--> output/openapi-v3/examples/server/server.rs:147:29\n|\n147 | context: &C) -> Box<Future<Item=ComplexQueryParamGetResponse, Error=ApiError> + Send>\n| ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: use dyn: dyn Future<Item=ComplexQueryParamGetResponse, Error=ApiError> + Send\n\n\n\nGenerate Rust code \"repoId\", Not \"Repoid\", and compile error.\nregex::Regex::new(r\"^/v2/repos/(?P[^/?#]*)$\")\n\n\nModify default serverPort from 80 to var \"serverPort\" with 8080, 8080 is more easy for test.\n\n\nRust Server Technical Committee\n\n@frol\n@farcaller\n@bjgill\n\nPR checklist\n\n Read the contribution guidelines.\n If contributing template-only or documentation-only changes which will change sample output, build the project before.\n Run the shell script(s) under ./bin/ (or Windows batch scripts under.\\bin\\windows) to update Petstore samples related to your fix. This is important, as CI jobs will verify all generator outputs of your HEAD commit, and these must match the expectations made by your contribution. You only need to run ./bin/{LANG}-petstore.sh, ./bin/openapi3/{LANG}-petstore.sh if updating the code or mustache templates for a language ({LANG}) (e.g. php, ruby, python, etc).\n Copy the technical committee to review the pull request if your PR is targeting a particular programming language.\n File the PR against the correct branch: master, 4.3.x, 5.0.x. Default: master.", "createdAt": "2020-04-09T03:30:44Z", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5871", "merged": true, "mergeCommit": {"oid": "c3837ca3314f90508bb6288006fb7ff2d9b282c6"}, "closed": true, "closedAt": "2020-04-15T16:19:01Z", "author": {"login": "paladinzh"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcV2WlZABqjMyMTY5MTIxMzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcX6hrOgFqTM5MzkzMDYyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "67f37488f2ae9e6ba56210989ed2433561cbe852", "author": {"user": {"login": "paladinzh", "name": "Andy.Yang.cn"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/67f37488f2ae9e6ba56210989ed2433561cbe852", "committedDate": "2020-04-09T03:21:21Z", "message": "[Rust Server] Fix Rust server side pathRegEx and baseName not match issue"}, "afterCommit": {"oid": "60b84c255c40c582b259fd5478fd0524615a331c", "author": {"user": {"login": "paladinzh", "name": "Andy.Yang.cn"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/60b84c255c40c582b259fd5478fd0524615a331c", "committedDate": "2020-04-09T06:16:41Z", "message": "[Rust Server] Fix Rust server side pathRegEx and baseName not match issue"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "60b84c255c40c582b259fd5478fd0524615a331c", "author": {"user": {"login": "paladinzh", "name": "Andy.Yang.cn"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/60b84c255c40c582b259fd5478fd0524615a331c", "committedDate": "2020-04-09T06:16:41Z", "message": "[Rust Server] Fix Rust server side pathRegEx and baseName not match issue"}, "afterCommit": {"oid": "f2b2fe5dfcebeb0f9a81db0a48de4766d234d49b", "author": {"user": {"login": "paladinzh", "name": "Andy.Yang.cn"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/f2b2fe5dfcebeb0f9a81db0a48de4766d234d49b", "committedDate": "2020-04-09T12:04:30Z", "message": "[Rust Server] Fix Rust server side pathRegEx and baseName not match issue"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f2b2fe5dfcebeb0f9a81db0a48de4766d234d49b", "author": {"user": {"login": "paladinzh", "name": "Andy.Yang.cn"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/f2b2fe5dfcebeb0f9a81db0a48de4766d234d49b", "committedDate": "2020-04-09T12:04:30Z", "message": "[Rust Server] Fix Rust server side pathRegEx and baseName not match issue"}, "afterCommit": {"oid": "142293b1d0a92d42f6dd386f5f4910e6501c90c6", "author": {"user": {"login": "paladinzh", "name": "Andy.Yang.cn"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/142293b1d0a92d42f6dd386f5f4910e6501c90c6", "committedDate": "2020-04-10T02:45:39Z", "message": "[Rust Server] Fix Rust server side pathRegEx and baseName not match issue"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxODg2MTg2", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5871#pullrequestreview-391886186", "createdAt": "2020-04-12T18:58:43Z", "commit": {"oid": "142293b1d0a92d42f6dd386f5f4910e6501c90c6"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMlQxODo1ODo0M1rOGEX47Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMlQxODo1OTo0NFrOGEX5cA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzIzODg5Mw==", "bodyText": "I think this is the wrong fix - there's a better one in 3f3cc8f", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5871#discussion_r407238893", "createdAt": "2020-04-12T18:58:43Z", "author": {"login": "richardwhiuk"}, "path": "modules/openapi-generator/src/main/resources/rust-server/Cargo.mustache", "diffHunk": "@@ -87,7 +87,7 @@ mime_multipart = {version = \"0.5\", optional = true}\n hyper_0_10 = {package = \"hyper\", version = \"0.10\", default-features = false, optional=true}\n {{/apiUsesMultipartRelated}}\n serde_ignored = {version = \"0.0.4\", optional = true}\n-tokio = {version = \"0.1.17\", optional = true}\n+tokio = {version = \"0.1.17\", optional = false}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "142293b1d0a92d42f6dd386f5f4910e6501c90c6"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzIzOTAyNA==", "bodyText": "Can you clarify what bug you are fixing here?\nCan you add a test case to modules/openapi-generator/src/test/resources/3_0/rust-server/openapi-v3.yaml which means this changes the behaviour?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5871#discussion_r407239024", "createdAt": "2020-04-12T18:59:44Z", "author": {"login": "richardwhiuk"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/RustServerCodegen.java", "diffHunk": "@@ -706,9 +706,9 @@ public CodegenOperation fromOperation(String path, String httpMethod, Operation\n             // Don't prefix with '^' so that the templates can put the\n             // basePath on the front.\n             for (CodegenParameter param : op.pathParams) {\n-                // Replace {paramName} with (?P<paramName>[^/?#]*) for regex\n+                // Replace {baseName} with (?P<baseName>[^/?#]*) for regex\n                 String paramSearch = \"{\" + param.baseName + \"}\";\n-                String paramReplace = \"(?P<\" + param.paramName + \">[^/?#]*)\";\n+                String paramReplace = \"(?P<\" + param.baseName + \">[^/?#]*)\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "142293b1d0a92d42f6dd386f5f4910e6501c90c6"}, "originalPosition": 8}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "142293b1d0a92d42f6dd386f5f4910e6501c90c6", "author": {"user": {"login": "paladinzh", "name": "Andy.Yang.cn"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/142293b1d0a92d42f6dd386f5f4910e6501c90c6", "committedDate": "2020-04-10T02:45:39Z", "message": "[Rust Server] Fix Rust server side pathRegEx and baseName not match issue"}, "afterCommit": {"oid": "111b0c7c50143f28af6a31e5522c73d60f613b1f", "author": {"user": {"login": "paladinzh", "name": "Andy.Yang.cn"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/111b0c7c50143f28af6a31e5522c73d60f613b1f", "committedDate": "2020-04-13T07:00:00Z", "message": "[Rust Server] Fix Rust server side pathRegEx and baseName not match issue"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "111b0c7c50143f28af6a31e5522c73d60f613b1f", "author": {"user": {"login": "paladinzh", "name": "Andy.Yang.cn"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/111b0c7c50143f28af6a31e5522c73d60f613b1f", "committedDate": "2020-04-13T07:00:00Z", "message": "[Rust Server] Fix Rust server side pathRegEx and baseName not match issue"}, "afterCommit": {"oid": "3c510f39401e4b51a56f4662f32ba40d64ca94c5", "author": {"user": {"login": "paladinzh", "name": "Andy.Yang.cn"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/3c510f39401e4b51a56f4662f32ba40d64ca94c5", "committedDate": "2020-04-13T08:55:21Z", "message": "[Rust Server] Add test case yaml with path parameter and multi tag."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3c510f39401e4b51a56f4662f32ba40d64ca94c5", "author": {"user": {"login": "paladinzh", "name": "Andy.Yang.cn"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/3c510f39401e4b51a56f4662f32ba40d64ca94c5", "committedDate": "2020-04-13T08:55:21Z", "message": "[Rust Server] Add test case yaml with path parameter and multi tag."}, "afterCommit": {"oid": "eb2a5c75badc11f86c94f35e6be4336f47319a8f", "author": {"user": {"login": "paladinzh", "name": "Andy.Yang.cn"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/eb2a5c75badc11f86c94f35e6be4336f47319a8f", "committedDate": "2020-04-13T09:02:06Z", "message": "[Rust Server] Add test case yaml with path parameter and multi tag."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eb2a5c75badc11f86c94f35e6be4336f47319a8f", "author": {"user": {"login": "paladinzh", "name": "Andy.Yang.cn"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/eb2a5c75badc11f86c94f35e6be4336f47319a8f", "committedDate": "2020-04-13T09:02:06Z", "message": "[Rust Server] Add test case yaml with path parameter and multi tag."}, "afterCommit": {"oid": "898540fbe2843921781c47380e36f96f3badcfdf", "author": {"user": {"login": "paladinzh", "name": "Andy.Yang.cn"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/898540fbe2843921781c47380e36f96f3badcfdf", "committedDate": "2020-04-13T09:08:52Z", "message": "[Rust Server] Add test case yaml with path parameter and multi tag."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "221d66b8414c04b3a82a3e49cc7216f13377ad2e", "author": {"user": {"login": "paladinzh", "name": "Andy.Yang.cn"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/221d66b8414c04b3a82a3e49cc7216f13377ad2e", "committedDate": "2020-04-13T12:36:39Z", "message": "[Rust Server] Fix Rust 1.39+ \"Box<Future\" and \"as &Has\" compile issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab78fa371f78aa38d34cb768d1cc682dd2afba44", "author": {"user": {"login": "paladinzh", "name": "Andy.Yang.cn"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/ab78fa371f78aa38d34cb768d1cc682dd2afba44", "committedDate": "2020-04-13T12:37:05Z", "message": "[Rust Server] Fix Rust server side pathRegEx and baseName not match issue"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "898540fbe2843921781c47380e36f96f3badcfdf", "author": {"user": {"login": "paladinzh", "name": "Andy.Yang.cn"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/898540fbe2843921781c47380e36f96f3badcfdf", "committedDate": "2020-04-13T09:08:52Z", "message": "[Rust Server] Add test case yaml with path parameter and multi tag."}, "afterCommit": {"oid": "a3e32f2a01ff460c83297822a1309096edcf513c", "author": {"user": {"login": "paladinzh", "name": "Andy.Yang.cn"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/a3e32f2a01ff460c83297822a1309096edcf513c", "committedDate": "2020-04-13T12:37:42Z", "message": "[Rust Server] Add test case yaml with path parameter and multi tag."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1321d4d9ed9e0f49c676650243e36b28761f8063", "author": {"user": {"login": "paladinzh", "name": "Andy.Yang.cn"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/1321d4d9ed9e0f49c676650243e36b28761f8063", "committedDate": "2020-04-13T14:42:43Z", "message": "[Rust Server] Add test case yaml with path parameter."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a3e32f2a01ff460c83297822a1309096edcf513c", "author": {"user": {"login": "paladinzh", "name": "Andy.Yang.cn"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/a3e32f2a01ff460c83297822a1309096edcf513c", "committedDate": "2020-04-13T12:37:42Z", "message": "[Rust Server] Add test case yaml with path parameter and multi tag."}, "afterCommit": {"oid": "1321d4d9ed9e0f49c676650243e36b28761f8063", "author": {"user": {"login": "paladinzh", "name": "Andy.Yang.cn"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/1321d4d9ed9e0f49c676650243e36b28761f8063", "committedDate": "2020-04-13T14:42:43Z", "message": "[Rust Server] Add test case yaml with path parameter."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzOTMwNjIz", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5871#pullrequestreview-393930623", "createdAt": "2020-04-15T16:17:37Z", "commit": {"oid": "1321d4d9ed9e0f49c676650243e36b28761f8063"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2571, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}