{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3NzkzODMz", "number": 5128, "title": "[typescript-angular] Import models from a single model/models.ts", "bodyText": "Fixes #5127\nThe underlying problem causing #5127 is that import paths used in api files are produced based on model class names (e.g InlineObject1), while the actual model files written by the generator take filenames based on raw model name (inline_object_1).\nPerhaps a proper way would be to eliminate this inconsistency by using the same logic in both places.\nHowever, import paths for api are assigned in DefaultGenerator, so the change can potentially have large impact on all generators.\nSo instead of fixing this inconsistency, this PR offers an alternative solution: ignore individual import paths prepared for api, and import all models from ../model/models.ts.\nThis approach is actually in line with a couple of other typescript generators: typescript-axios, typescript-fetch, typescript-jquery.\nPR checklist\n\n Read the contribution guidelines.\n If contributing template-only or documentation-only changes which will change sample output, build the project before.\n Run the shell script(s) under ./bin/ (or Windows batch scripts under.\\bin\\windows) to update Petstore samples related to your fix. This is important, as CI jobs will verify all generator outputs of your HEAD commit, and these must match the expectations made by your contribution. You only need to run ./bin/{LANG}-petstore.sh, ./bin/openapi3/{LANG}-petstore.sh if updating the code or mustache templates for a language ({LANG}) (e.g. php, ruby, python, etc).\n File the PR against the correct branch: master, 4.3.x, 5.0.x. Default: master.\n Copy the technical committee to review the pull request if your PR is targeting a particular programming language.\n\n@TiFu @taxpon @sebastianhaas @kenisteward @Vrolijkx @macjohnny @nicokoenig @topce @akehir @petejohansonxo", "createdAt": "2020-01-28T02:12:33Z", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5128", "merged": true, "mergeCommit": {"oid": "105ce99039150abfdf32b814196dc22584be6e63"}, "closed": true, "closedAt": "2020-01-28T07:23:19Z", "author": {"login": "amakhrov"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb98d4TgH2gAyMzY3NzkzODMzOjA3ODZlMzQ2NmZmYjQxNzcxODViMGZhNjM4OTNkMzBhYmYxNjdiYjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-ri7RAH2gAyMzY3NzkzODMzOjE3YzA4ODk0ZTQ1ZTU2NThlYWNkYjIyZDlhYTcxNzkzNWE4MTFlZjU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0786e3466ffb4177185b0fa63893d30abf167bb3", "author": {"user": {"login": "amakhrov", "name": "Alexey Makhrov"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/0786e3466ffb4177185b0fa63893d30abf167bb3", "committedDate": "2020-01-25T23:51:15Z", "message": "Sync with upstream. Includes fixes for typescript-angular"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b24315fea15b8ec5de1120bdbefe4088fc9272d3", "author": {"user": {"login": "amakhrov", "name": "Alexey Makhrov"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/b24315fea15b8ec5de1120bdbefe4088fc9272d3", "committedDate": "2020-01-28T02:02:10Z", "message": "Make api to models from a single model/models.ts instead of individual model files.\nFixes inconsistent usage of file names with inline models (inline-model-1, inline-model-2, ...)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4f5aecabd266329fbbdb3f1505e942c94862aff", "author": {"user": {"login": "amakhrov", "name": "Alexey Makhrov"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/d4f5aecabd266329fbbdb3f1505e942c94862aff", "committedDate": "2020-01-28T02:02:15Z", "message": "Remove additional mapped filename prop from api imports (since it's not reliable)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "644bc5d6a36a1234418e7aebf4e01931501545fa", "author": {"user": {"login": "amakhrov", "name": "Alexey Makhrov"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/644bc5d6a36a1234418e7aebf4e01931501545fa", "committedDate": "2020-01-28T02:02:15Z", "message": "Rerun ./bin/typescript-angular-petstore-all.sh"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MDk3MjU5", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5128#pullrequestreview-349097259", "createdAt": "2020-01-28T02:17:55Z", "commit": {"oid": "644bc5d6a36a1234418e7aebf4e01931501545fa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQwMjoxNzo1NVrOFiXjwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQwMjoxNzo1NVrOFiXjwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTU4MTg4OQ==", "bodyText": "NOTE: This is not actually needed for the fix.\nHowever, after the the changes in this PR this filename property is no longer used in the templates. And this is not reliable anyway in the case of inline models. So I just did this cleanup rather than accumulating it as tech debt.\nApparently, this might break some setups that use externally-provided templates (via --template-dir).\nI'm not sure what the policy is for such changes - is it safe to push to master? Should there be any changelog covering that? Or is it ok because codegen does not consider such custom properties a part of a public contract?\nOpen to suggestions here!", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5128#discussion_r371581889", "createdAt": "2020-01-28T02:17:55Z", "author": {"login": "amakhrov"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/TypeScriptAngularClientCodegen.java", "diffHunk": "@@ -448,13 +448,6 @@ public void postProcessParameter(CodegenParameter parameter) {\n \n         operations.put(\"hasSomeFormParams\", hasSomeFormParams);\n \n-        // Add additional filename information for model imports in the services\n-        List<Map<String, Object>> imports = (List<Map<String, Object>>) operations.get(\"imports\");\n-        for (Map<String, Object> im : imports) {\n-            im.put(\"filename\", im.get(\"import\"));\n-            im.put(\"classname\", im.get(\"classname\"));\n-        }\n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "644bc5d6a36a1234418e7aebf4e01931501545fa"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MTU0MDI0", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5128#pullrequestreview-349154024", "createdAt": "2020-01-28T06:37:04Z", "commit": {"oid": "644bc5d6a36a1234418e7aebf4e01931501545fa"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17c08894e45e5658eacdb22d9aa717935a811ef5", "author": {"user": {"login": "amakhrov", "name": "Alexey Makhrov"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/17c08894e45e5658eacdb22d9aa717935a811ef5", "committedDate": "2020-01-28T06:42:18Z", "message": "Restore the `filename` property passed to the templates, with a comment it's no longer used"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2867, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}