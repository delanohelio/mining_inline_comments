{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2NDA1MjYy", "number": 5094, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxOToxMjo1OFrODaSCAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMjowMDo1N1rODan3hw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4ODg0OTk0OnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxOToxMjo1OFrOFhJjxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxOToyMDo0OFrOFhJyjw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDMwMzk0MQ==", "bodyText": "after the pool is closed and joined we should unregister the atexit -  https://docs.python.org/3/library/atexit.html#atexit.unregister; this is so that we don't keep the client instance in memory until the application dies", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5094#discussion_r370303941", "createdAt": "2020-01-23T19:12:58Z", "author": {"login": "gaborbernat"}, "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "diffHunk": "@@ -75,7 +76,13 @@ class ApiClient(object):\n         self.user_agent = '{{#httpUserAgent}}{{{.}}}{{/httpUserAgent}}{{^httpUserAgent}}OpenAPI-Generator/{{{packageVersion}}}/python{{/httpUserAgent}}'\n         self.client_side_validation = configuration.client_side_validation\n \n-    def __del__(self):\n+    def __enter__(self):\n+        return self\n+\n+    def __exit__(self, exc_type, exc_value, traceback):\n+        self.close()\n+\n+    def close(self):\n         if self._pool:\n             self._pool.close()\n             self._pool.join()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ec0714980e87e8deec7c062239eb9b5d08e06da"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDMwNzcyNw==", "bodyText": "\ud83d\udc4d Makes sense", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5094#discussion_r370307727", "createdAt": "2020-01-23T19:20:48Z", "author": {"login": "fabianvf"}, "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "diffHunk": "@@ -75,7 +76,13 @@ class ApiClient(object):\n         self.user_agent = '{{#httpUserAgent}}{{{.}}}{{/httpUserAgent}}{{^httpUserAgent}}OpenAPI-Generator/{{{packageVersion}}}/python{{/httpUserAgent}}'\n         self.client_side_validation = configuration.client_side_validation\n \n-    def __del__(self):\n+    def __enter__(self):\n+        return self\n+\n+    def __exit__(self, exc_type, exc_value, traceback):\n+        self.close()\n+\n+    def close(self):\n         if self._pool:\n             self._pool.close()\n             self._pool.join()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDMwMzk0MQ=="}, "originalCommit": {"oid": "5ec0714980e87e8deec7c062239eb9b5d08e06da"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4ODk3Mjg3OnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxOTo1NDoyN1rOFhKv0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxOTo1NDoyN1rOFhKv0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDMyMzQxMQ==", "bodyText": "it looks like atexit.unregister doesn't exist in Python 2, so I added this guard", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5094#discussion_r370323411", "createdAt": "2020-01-23T19:54:27Z", "author": {"login": "fabianvf"}, "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "diffHunk": "@@ -75,18 +76,27 @@ class ApiClient(object):\n         self.user_agent = '{{#httpUserAgent}}{{{.}}}{{/httpUserAgent}}{{^httpUserAgent}}OpenAPI-Generator/{{{packageVersion}}}/python{{/httpUserAgent}}'\n         self.client_side_validation = configuration.client_side_validation\n \n-    def __del__(self):\n+    def __enter__(self):\n+        return self\n+\n+    def __exit__(self, exc_type, exc_value, traceback):\n+        self.close()\n+\n+    def close(self):\n         if self._pool:\n             self._pool.close()\n             self._pool.join()\n             self._pool = None\n+            if hasattr(atexit, 'unregister'):", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32fb9fbf7c4be74c1b68f67aeee32ee6fc95062d"}, "originalPosition": 24}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5MjQwMjMyOnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/resources/python/api_doc_example.mustache", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMTo0OTozM1rOFhrXOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMjowODoyMlrOFjZPWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg1Nzc4Nw==", "bodyText": "Can you add a line above {{#hasAuthMethods}} instantiating configuration?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5094#discussion_r370857787", "createdAt": "2020-01-24T21:49:33Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/api_doc_example.mustache", "diffHunk": "@@ -8,22 +8,26 @@ from pprint import pprint\n {{#hasAuthMethods}}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d179e03b3009c76e5977668cdaa53adff6ef979"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjY1ODAwOA==", "bodyText": "I believe configuration is instantiated in the {{> python_doc_auth_partial}} snippet", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5094#discussion_r372658008", "createdAt": "2020-01-29T22:08:22Z", "author": {"login": "fabianvf"}, "path": "modules/openapi-generator/src/main/resources/python/api_doc_example.mustache", "diffHunk": "@@ -8,22 +8,26 @@ from pprint import pprint\n {{#hasAuthMethods}}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg1Nzc4Nw=="}, "originalCommit": {"oid": "1d179e03b3009c76e5977668cdaa53adff6ef979"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5MjQxMDY1OnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/resources/python/python-experimental/api_doc_example.mustache", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMTo1MzoxNVrOFhrcSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMTo1MzoxNVrOFhrcSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg1OTA4Mg==", "bodyText": "Can you add a line above {{#hasAuthMethods}} instantiating configuration?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5094#discussion_r370859082", "createdAt": "2020-01-24T21:53:15Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/api_doc_example.mustache", "diffHunk": "@@ -7,51 +7,55 @@ from pprint import pprint\n {{#hasAuthMethods}}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d179e03b3009c76e5977668cdaa53adff6ef979"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5MjQyMjUzOnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/resources/python/api_doc_example.mustache", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMTo1ODoyNVrOFhrjsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMTo1ODoyNVrOFhrjsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg2MDk3Nw==", "bodyText": "Aren't these blocks {{#hasAuthMethods}}/{{^hasAuthMethods}} identical except for setting\nconfiguration.host?\nPlease move the identical block contents  underneath the {{/hasAuthMethods}} on line 25", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5094#discussion_r370860977", "createdAt": "2020-01-24T21:58:25Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/api_doc_example.mustache", "diffHunk": "@@ -8,22 +8,26 @@ from pprint import pprint\n {{#hasAuthMethods}}\n # Defining host is optional and default to {{{basePath}}}\n configuration.host = \"{{{basePath}}}\"\n-# Create an instance of the API class\n-api_instance = {{{packageName}}}.{{{classname}}}({{{packageName}}}.ApiClient(configuration))\n-{{#allParams}}{{paramName}} = {{{example}}} # {{{dataType}}} | {{{description}}}{{^required}} (optional){{/required}}{{#defaultValue}} (default to {{{.}}}){{/defaultValue}}\n-{{/allParams}}\n+# Enter a context with an instance of the API client", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d179e03b3009c76e5977668cdaa53adff6ef979"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5MjQyNTAxOnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/resources/python/python-experimental/README_common.mustache", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMTo1OTozN1rOFhrlPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQyMjo0ODoxNFrOFjaOvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg2MTM3Mw==", "bodyText": "Do we need to instantiate configuration here?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5094#discussion_r370861373", "createdAt": "2020-01-24T21:59:37Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/README_common.mustache", "diffHunk": "@@ -7,18 +7,20 @@ from pprint import pprint\n {{> python_doc_auth_partial}}\n # Defining host is optional and default to {{{basePath}}}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d179e03b3009c76e5977668cdaa53adff6ef979"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjY1NzIxNg==", "bodyText": "I believe configuration is instantiated in the  {{> python_doc_auth_partial}} snippet", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5094#discussion_r372657216", "createdAt": "2020-01-29T22:06:22Z", "author": {"login": "fabianvf"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/README_common.mustache", "diffHunk": "@@ -7,18 +7,20 @@ from pprint import pprint\n {{> python_doc_auth_partial}}\n # Defining host is optional and default to {{{basePath}}}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg2MTM3Mw=="}, "originalCommit": {"oid": "1d179e03b3009c76e5977668cdaa53adff6ef979"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjY3NDIzOA==", "bodyText": "actually it looks like that snippet doesn't even exit in the experimental directory...", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5094#discussion_r372674238", "createdAt": "2020-01-29T22:48:14Z", "author": {"login": "fabianvf"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/README_common.mustache", "diffHunk": "@@ -7,18 +7,20 @@ from pprint import pprint\n {{> python_doc_auth_partial}}\n # Defining host is optional and default to {{{basePath}}}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg2MTM3Mw=="}, "originalCommit": {"oid": "1d179e03b3009c76e5977668cdaa53adff6ef979"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5MjQyNzU5OnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/resources/python/python-experimental/api_doc_example.mustache", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMjowMDo1N1rOFhrm8g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQyMjowMDo1N1rOFhrm8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDg2MTgxMA==", "bodyText": "Aren't these blocks {{#hasAuthMethods}}/{{^hasAuthMethods}} identical except for setting\nconfiguration.host?\nPlease move the identical block contents  underneath the {{/hasAuthMethods}} on line 20", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5094#discussion_r370861810", "createdAt": "2020-01-24T22:00:57Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/api_doc_example.mustache", "diffHunk": "@@ -7,51 +7,55 @@ from pprint import pprint\n {{#hasAuthMethods}}\n # Defining host is optional and default to {{{basePath}}}\n configuration.host = \"{{{basePath}}}\"\n-# Create an instance of the API class\n-api_instance = {{{packageName}}}.{{{classname}}}({{{packageName}}}.ApiClient(configuration))\n+# Enter a context with an instance of the API client\n+with {{{packageName}}}.ApiClient(configuration) as api_client:\n+    # Create an instance of the API class\n+    api_instance = {{{packageName}}}.{{{classname}}}(api_client)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d179e03b3009c76e5977668cdaa53adff6ef979"}, "originalPosition": 9}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3855, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}