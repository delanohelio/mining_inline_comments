{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5MjE2Nzg0", "number": 5422, "title": "Typescript-axios: add headers from configuration object", "bodyText": "Small, but so important fix. Configuration class has baseOptions key, this is object for set any axios options, but headers from this object was ignored because they shadowing, I fixed this.", "createdAt": "2020-02-24T20:30:24Z", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5422", "merged": true, "mergeCommit": {"oid": "a4fc3195023dc0fd54944fb1cdf8f89bae0aa7ac"}, "closed": true, "closedAt": "2020-02-28T06:27:42Z", "author": {"login": "nibytes"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcHjgfVgH2gAyMzc5MjE2Nzg0Ojk2NDYzOThhMzJkNzMyZWQyMDVjN2JlNmE0ZWFjZjFiZDgwNjg4ZTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIp6l9gFqTM2NjE4MjI2OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9646398a32d732ed205c7be6a4eacf1bd80688e9", "author": {"user": {"login": "nibytes", "name": "Nikita"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/9646398a32d732ed205c7be6a4eacf1bd80688e9", "committedDate": "2020-02-24T20:25:43Z", "message": "Fix #5420 add headers from configuration object"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYzODY3Njk1", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5422#pullrequestreview-363867695", "createdAt": "2020-02-25T04:44:55Z", "commit": {"oid": "9646398a32d732ed205c7be6a4eacf1bd80688e9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQwNDo0NDo1NlrOFt4hAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQwNDo0NDo1NlrOFt4hAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzY1NjE5NQ==", "bodyText": "Based on the code above, it seems that baseOptions can be undefined - probably need null check here before accessing baseOptions.headers.\nShouldn't localVarHeaderParameter have priority over baseOptions.headers? Right now it looks like base options can override customizations specific to a particular api method", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5422#discussion_r383656195", "createdAt": "2020-02-25T04:44:56Z", "author": {"login": "amakhrov"}, "path": "modules/openapi-generator/src/main/resources/typescript-axios/apiInner.mustache", "diffHunk": "@@ -189,7 +189,7 @@ export const {{classname}}AxiosParamCreator = function (configuration?: Configur\n             localVarUrlObj.query = {...localVarUrlObj.query, ...localVarQueryParameter, ...options.query};\n             // fix override query string Detail: https://stackoverflow.com/a/7517673/1077943\n             delete localVarUrlObj.search;\n-            localVarRequestOptions.headers = {...localVarHeaderParameter, ...options.headers};\n+            localVarRequestOptions.headers = {...localVarHeaderParameter, ...baseOptions.headers, ...options.headers};", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9646398a32d732ed205c7be6a4eacf1bd80688e9"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0MTA1NjM3", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5422#pullrequestreview-364105637", "createdAt": "2020-02-25T12:34:27Z", "commit": {"oid": "9646398a32d732ed205c7be6a4eacf1bd80688e9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxMjozNDoyN1rOFuEZgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNVQxMjozNDoyN1rOFuEZgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzg1MDg4Mg==", "bodyText": "I will fix this\nI dont know, but I think localVarHeaderParameter will override baseOptions, and you can't change variables in localVarHeaderParameter in no way. So my option is allow override localVarHeaderParameter by baseOptions setted by user for all, and they overriding by options from request.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5422#discussion_r383850882", "createdAt": "2020-02-25T12:34:27Z", "author": {"login": "nibytes"}, "path": "modules/openapi-generator/src/main/resources/typescript-axios/apiInner.mustache", "diffHunk": "@@ -189,7 +189,7 @@ export const {{classname}}AxiosParamCreator = function (configuration?: Configur\n             localVarUrlObj.query = {...localVarUrlObj.query, ...localVarQueryParameter, ...options.query};\n             // fix override query string Detail: https://stackoverflow.com/a/7517673/1077943\n             delete localVarUrlObj.search;\n-            localVarRequestOptions.headers = {...localVarHeaderParameter, ...options.headers};\n+            localVarRequestOptions.headers = {...localVarHeaderParameter, ...baseOptions.headers, ...options.headers};", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzY1NjE5NQ=="}, "originalCommit": {"oid": "9646398a32d732ed205c7be6a4eacf1bd80688e9"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58fb289a9d758905feb3b2e3d24ba9b3f64012f4", "author": {"user": {"login": "nibytes", "name": "Nikita"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/58fb289a9d758905feb3b2e3d24ba9b3f64012f4", "committedDate": "2020-02-25T18:14:23Z", "message": "Add baseOptions undefined checking #5420"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1NjI0Mzc0", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5422#pullrequestreview-365624374", "createdAt": "2020-02-27T12:00:09Z", "commit": {"oid": "58fb289a9d758905feb3b2e3d24ba9b3f64012f4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxMjowMDowOVrOFvPlig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QxMjowMDowOVrOFvPlig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTA4Mjc2Mg==", "bodyText": "I think this should initialize to an empty object, right?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5422#discussion_r385082762", "createdAt": "2020-02-27T12:00:09Z", "author": {"login": "macjohnny"}, "path": "modules/openapi-generator/src/main/resources/typescript-axios/apiInner.mustache", "diffHunk": "@@ -189,7 +189,8 @@ export const {{classname}}AxiosParamCreator = function (configuration?: Configur\n             localVarUrlObj.query = {...localVarUrlObj.query, ...localVarQueryParameter, ...options.query};\n             // fix override query string Detail: https://stackoverflow.com/a/7517673/1077943\n             delete localVarUrlObj.search;\n-            localVarRequestOptions.headers = {...localVarHeaderParameter, ...options.headers};\n+            let headersFromBaseOptions = baseOptions && baseOptions.headers ? baseOptions.headers : [];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58fb289a9d758905feb3b2e3d24ba9b3f64012f4"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9193b5dc79c0e61bd41bcf0974a76f6f4ef8f39", "author": {"user": {"login": "nibytes", "name": "Nikita"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/f9193b5dc79c0e61bd41bcf0974a76f6f4ef8f39", "committedDate": "2020-02-27T21:19:45Z", "message": "Update the samples and replace array to object #5420"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b615131da6414e94faa1503601632e0f9433f57a", "author": {"user": {"login": "nibytes", "name": "Nikita"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/b615131da6414e94faa1503601632e0f9433f57a", "committedDate": "2020-02-27T22:11:06Z", "message": "Update sample"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MTgyMjY5", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5422#pullrequestreview-366182269", "createdAt": "2020-02-28T06:27:35Z", "commit": {"oid": "b615131da6414e94faa1503601632e0f9433f57a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2672, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}