{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1NzQyMDAy", "number": 5331, "title": "[Java] Generated API class has wrong dataType and does not compile Issue", "bodyText": "Details of the issue are described in #5324.\nWithout this PR, the generated code is as below. There are two problems: 1) the type of the requestBody argument is wrong (it should be SyslogPolicy, not PolicyAbstractPolicy); 2) The type of the requestBody argument uses generics.\ncreateSyslogPolicyCall(PolicyAbstractPolicy<String, Object> requestBody ....\n\nWith this PR, the generated code is as follows, it fixes both problems:\ncreateSyslogPolicyCall(SyslogPolicy requestBody ....\n\nThis is not ready to be merged, but I need a bit of guidance to make progress.\n\nPR checklist\n\n Read the contribution guidelines.\n If contributing template-only or documentation-only changes which will change sample output, build the project before.\n Run the shell script(s) under ./bin/ (or Windows batch scripts under.\\bin\\windows) to update Petstore samples related to your fix. This is important, as CI jobs will verify all generator outputs of your HEAD commit, and these must match the expectations made by your contribution. You only need to run ./bin/{LANG}-petstore.sh, ./bin/openapi3/{LANG}-petstore.sh if updating the code or mustache templates for a language ({LANG}) (e.g. php, ruby, python, etc).\n File the PR against the correct branch: master, 4.3.x, 5.0.x. Default: master.\n Copy the technical committee to review the pull request if your PR is targeting a particular programming language.", "createdAt": "2020-02-15T18:01:40Z", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5331", "merged": true, "mergeCommit": {"oid": "a16079ce7b5ba30f7315253b0adbb8e28a52cb93"}, "closed": true, "closedAt": "2020-03-17T07:37:34Z", "author": {"login": "sebastien-rosset"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcEn_tiAH2gAyMzc1NzQyMDAyOmVmYjdmMmUwMjUxNDczYzlkNGJjNDg5MGYxZWI5ZjcyMDg0NDM5YTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOQ1ergH2gAyMzc1NzQyMDAyOmYxODI2YzZkZmEyMDlmMzViODA4ODdlZWMxN2ZhZDlmMGVkNGFhMDA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "efb7f2e0251473c9d4bc4890f1eb9f72084439a9", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/efb7f2e0251473c9d4bc4890f1eb9f72084439a9", "committedDate": "2020-02-15T17:57:40Z", "message": "add unit test assertion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f30ce319397224289157b2251a286fbb68e3e2ac", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/f30ce319397224289157b2251a286fbb68e3e2ac", "committedDate": "2020-02-15T17:58:47Z", "message": "add check for composed schema"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8dfccb0b0848839d06593d6f39f81e6523836d35", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/8dfccb0b0848839d06593d6f39f81e6523836d35", "committedDate": "2020-02-17T01:28:02Z", "message": "Merge remote-tracking branch 'origin' into java-wrong-data-type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ecdf4389035bb4c5894ca38ee1623a7951d2a9a4", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/ecdf4389035bb4c5894ca38ee1623a7951d2a9a4", "committedDate": "2020-02-17T02:29:35Z", "message": "add support for x-allOf-name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee3d3acd144ecfaba7fbc5c1a443e8568028a33e", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/ee3d3acd144ecfaba7fbc5c1a443e8568028a33e", "committedDate": "2020-02-18T05:48:50Z", "message": "Merge remote-tracking branch 'origin' into java-wrong-data-type"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNDg3ODM0", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5331#pullrequestreview-360487834", "createdAt": "2020-02-18T16:31:16Z", "commit": {"oid": "ee3d3acd144ecfaba7fbc5c1a443e8568028a33e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNjozMToxNlrOFrJexQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNjozMToxNlrOFrJexQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDc4ODQyMQ==", "bodyText": "We want to standardize vendor extension naming with lower cases only separated by hyphens so what about usingx-all-of-name instead?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5331#discussion_r380788421", "createdAt": "2020-02-18T16:31:16Z", "author": {"login": "wing328"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/DefaultCodegen.java", "diffHunk": "@@ -1752,6 +1752,10 @@ public String getSchemaType(Schema schema) {\n      */\n     @SuppressWarnings(\"static-method\")\n     public String toAllOfName(List<String> names, ComposedSchema composedSchema) {\n+        Map<String, Object> exts = composedSchema.getExtensions();\n+        if (exts != null && exts.containsKey(\"x-allOf-name\")) {\n+            return (String) exts.get(\"x-allOf-name\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee3d3acd144ecfaba7fbc5c1a443e8568028a33e"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6d770cf564b25b03016c17dd3b9dc633b08bc2d", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/d6d770cf564b25b03016c17dd3b9dc633b08bc2d", "committedDate": "2020-02-18T18:18:25Z", "message": "change x-allOf-name to x-all-of-name"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1MTY4Nzc4", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5331#pullrequestreview-365168778", "createdAt": "2020-02-26T19:13:37Z", "commit": {"oid": "d6d770cf564b25b03016c17dd3b9dc633b08bc2d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxOToxMzozOFrOFu4ilA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxOToxMzozOFrOFu4ilA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDcwNTE3Mg==", "bodyText": "Do our tests cover this new code?\nThis model: https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/test/resources/2_0/petstore-with-fake-endpoints-models-for-testing.yaml#L1422\ndoes not contain x-all-of-name\nAlso doesn't this test already require that the schema not be null?\nDown below we test that the CodegenModel generated form the schema contains vars, which means that the schema had to not be null to contain those vars.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5331#discussion_r384705172", "createdAt": "2020-02-26T19:13:38Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/test/java/org/openapitools/codegen/java/JavaModelEnumTest.java", "diffHunk": "@@ -172,6 +172,7 @@ public void testEnumTestSchema() {\n         codegen.setOpenAPI(openAPI);\n \n         Schema enumTest = openAPI.getComponents().getSchemas().get(\"Enum_Test\");\n+        Assert.assertNotNull(enumTest);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d6d770cf564b25b03016c17dd3b9dc633b08bc2d"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3156f87d169d73e1e9fa588810d44ab07154c8db", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/3156f87d169d73e1e9fa588810d44ab07154c8db", "committedDate": "2020-02-29T21:22:08Z", "message": "Merge remote-tracking branch 'origin' into java-wrong-data-type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c41f700c9050e6f19ae2407335ef774087e19460", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/c41f700c9050e6f19ae2407335ef774087e19460", "committedDate": "2020-03-04T02:29:54Z", "message": "merge from master and resolve merge conflict"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0b9c5a8bf05f4dd25ba19a9d203f4d1b10c3f04", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/d0b9c5a8bf05f4dd25ba19a9d203f4d1b10c3f04", "committedDate": "2020-03-05T16:56:55Z", "message": "Merge remote-tracking branch 'origin' into java-wrong-data-type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5dc47a7ede040eefd2243f3fb583af5d5f182d7d", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/5dc47a7ede040eefd2243f3fb583af5d5f182d7d", "committedDate": "2020-03-06T18:28:59Z", "message": "Merge remote-tracking branch 'origin' into java-wrong-data-type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3327a7801d462993dbd4460c1cba8aeb3d39abab", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/3327a7801d462993dbd4460c1cba8aeb3d39abab", "committedDate": "2020-03-09T15:12:49Z", "message": "Merge remote-tracking branch 'origin' into java-wrong-data-type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1db9be5e1c3bd4c08156ec4c42544e20b69c1334", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/1db9be5e1c3bd4c08156ec4c42544e20b69c1334", "committedDate": "2020-03-09T15:13:08Z", "message": "Add more troubleshooting information"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb10e9ac1c57406f73230346481a948a538aef7e", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/eb10e9ac1c57406f73230346481a948a538aef7e", "committedDate": "2020-03-09T15:15:29Z", "message": "Add more troubleshooting information"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "422fe455352a7cd89f1b0790b813156581781ca4", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/422fe455352a7cd89f1b0790b813156581781ca4", "committedDate": "2020-03-09T15:16:02Z", "message": "Add more troubleshooting information"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3a3809075e13dd77b1c078444298486de782d7b", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/f3a3809075e13dd77b1c078444298486de782d7b", "committedDate": "2020-03-09T15:23:18Z", "message": "Add more troubleshooting information"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "82a1c2d3e8a3d63bb08a1791c137b2276c592cf7", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/82a1c2d3e8a3d63bb08a1791c137b2276c592cf7", "committedDate": "2020-03-12T21:28:27Z", "message": "Merge branch 'master' of github.com:CiscoM31/openapi-generator into java-wrong-data-type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1826c6dfa209f35b80887eec17fad9f0ed4aa00", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/f1826c6dfa209f35b80887eec17fad9f0ed4aa00", "committedDate": "2020-03-16T16:37:55Z", "message": "Merge branch 'master' of github.com:CiscoM31/openapi-generator into java-wrong-data-type"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2807, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}