{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5MjAyNzI2", "number": 6346, "title": "[php-laravel] Upgrade `php-laravel` to 7.x", "bodyText": "This upgrade Laravel from 5.6 to 7.x. 5.6 is no longer supported. I updated the source code from the main laravel/laravel repository, and updated the supported files for new/missing files. I also updated the pet store examples.\nSee also #2562\n\nPR checklist\n\n Read the contribution guidelines.\n If contributing template-only or documentation-only changes which will change sample output, build the project before.\n Run the shell script(s) under ./bin/ (or Windows batch scripts under.\\bin\\windows) to update Petstore samples related to your fix. This is important, as CI jobs will verify all generator outputs of your HEAD commit, and these must match the expectations made by your contribution. You only need to run ./bin/{LANG}-petstore.sh, ./bin/openapi3/{LANG}-petstore.sh if updating the code or mustache templates for a language ({LANG}) (e.g. php, ruby, python, etc).\n File the PR against the correct branch: master, 4.3.x, 5.0.x. Default: master.\n Copy the technical committee to review the pull request if your PR is targeting a particular programming language.", "createdAt": "2020-05-18T00:43:07Z", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6346", "merged": true, "mergeCommit": {"oid": "d433c2d42fd79fa1bb3a8fa0671599315ca152fc"}, "closed": true, "closedAt": "2020-06-30T09:22:32Z", "author": {"login": "dragonmantank"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqTO_IAFqTQyOTIwOTcxNA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwJg-ygH2gAyNDE5MjAyNzI2OmMwZTk4OTNmYjliYjUzYTcxMDJmOTE3YjhkMWUyNTFhZjUwMDBlMzE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5MjA5NzE0", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6346#pullrequestreview-429209714", "createdAt": "2020-06-11T19:12:25Z", "commit": {"oid": "727bb5439b7241c1488cbb57a90b50e87bb53e9b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxOToxMjoyNlrOGirHyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxOToxMjoyNlrOGirHyA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTAxMTI3Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                \"phpunit/phpunit\": \"^8.5\"\n          \n          \n            \n                \"phpunit/phpunit\": \"^8.5 || ^9.0\"\n          \n      \n    \n    \n  \n\nIt's better to give an option to use latest PHPUnit.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6346#discussion_r439011272", "createdAt": "2020-06-11T19:12:26Z", "author": {"login": "ybelenko"}, "path": "modules/openapi-generator/src/main/resources/php-laravel/composer.mustache", "diffHunk": "@@ -8,59 +8,56 @@\n   \"license\": \"MIT\",\n   \"type\": \"project\",\n   \"require\": {\n-    \"php\": \"^7.1.3\",\n-    \"fideloper/proxy\": \"^4.0\",\n-    \"laravel/framework\": \"5.6.*\",\n-    \"laravel/tinker\": \"^1.0\"\n+    \"php\": \"^7.2.5\",\n+    \"fideloper/proxy\": \"^4.2\",\n+    \"fruitcake/laravel-cors\": \"^1.0\",\n+    \"guzzlehttp/guzzle\": \"^6.3\",\n+    \"laravel/framework\": \"^7.0\",\n+    \"laravel/tinker\": \"^2.0\"\n   },\n   \"require-dev\": {\n-    \"filp/whoops\": \"^2.0\",\n-    \"fzaninotto/faker\": \"^1.4\",\n-    \"mockery/mockery\": \"^1.0\",\n-    \"nunomaduro/collision\": \"^2.0\",\n-    \"phpunit/phpunit\": \"^7.0\",\n-    \"phpspec/phpspec\": \"^4.2\",\n-    \"squizlabs/php_codesniffer\": \"^3.0\"\n-  },\n-  \"autoload\": {\n-    \"classmap\": [\n-      \"database/seeds\",\n-      \"database/migrations\",\n-      \"database/factories\"\n-    ],\n-    \"psr-4\": {\n-      \"App\\\\\": \"app/\",\n-      \"Tests\\\\\": \"tests/\"\n-    }\n-  },\n-  \"autoload-dev\": {\n-    \"psr-4\": {\n-      \"Tests\\\\\": \"tests/\"\n-    }\n-  },\n-  \"extra\": {\n-    \"laravel\": {\n-      \"dont-discover\": [\n-      ]\n-    }\n-  },\n-  \"scripts\": {\n-      \"post-root-package-install\": [\n-      \"@php -r \\\"file_exists('.env') || copy('.env.example', '.env');\\\"\"\n-    ],\n-      \"post-create-project-cmd\": [\n-      \"@php artisan key:generate\"\n-    ],\n-      \"post-autoload-dump\": [\n-      \"Illuminate\\\\Foundation\\\\ComposerScripts::postAutoloadDump\",\n-      \"@php artisan package:discover\"\n-    ]\n+    \"facade/ignition\": \"^2.0\",\n+    \"fzaninotto/faker\": \"^1.9.1\",\n+    \"mockery/mockery\": \"^1.3.1\",\n+    \"nunomaduro/collision\": \"^4.1\",\n+    \"phpunit/phpunit\": \"^8.5\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "727bb5439b7241c1488cbb57a90b50e87bb53e9b"}, "originalPosition": 61}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38265c3fa9a80dcd20cac5afeeca01f5a808b318", "author": {"user": {"login": "dragonmantank", "name": "Chris Tankersley"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/38265c3fa9a80dcd20cac5afeeca01f5a808b318", "committedDate": "2020-06-28T00:56:57Z", "message": "Update laravel from 5.6 to 7.0"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "940660a81d3a20932c2a4d1d665aa3c1ca860667", "author": {"user": {"login": "dragonmantank", "name": "Chris Tankersley"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/940660a81d3a20932c2a4d1d665aa3c1ca860667", "committedDate": "2020-06-28T01:11:39Z", "message": "Updated petstore example, removed missing files"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "727bb5439b7241c1488cbb57a90b50e87bb53e9b", "author": {"user": {"login": "dragonmantank", "name": "Chris Tankersley"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/727bb5439b7241c1488cbb57a90b50e87bb53e9b", "committedDate": "2020-05-18T00:38:14Z", "message": "Updated petstore example, removed missing files"}, "afterCommit": {"oid": "940660a81d3a20932c2a4d1d665aa3c1ca860667", "author": {"user": {"login": "dragonmantank", "name": "Chris Tankersley"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/940660a81d3a20932c2a4d1d665aa3c1ca860667", "committedDate": "2020-06-28T01:11:39Z", "message": "Updated petstore example, removed missing files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0acd9adda05a035142c2c6fc37a5cd0f67ee6a5f", "author": {"user": {"login": "dragonmantank", "name": "Chris Tankersley"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/0acd9adda05a035142c2c6fc37a5cd0f67ee6a5f", "committedDate": "2020-06-28T01:23:36Z", "message": "Updated PHP version to match composer.json"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25892a458d7b94a3724e30739f4b9bd28cd3536e", "author": {"user": {"login": "ybelenko", "name": "Yuriy Belenko"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/25892a458d7b94a3724e30739f4b9bd28cd3536e", "committedDate": "2020-06-28T18:51:39Z", "message": "Add samples generation config with OAS3 input spec"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4ODA1MTAy", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6346#pullrequestreview-438805102", "createdAt": "2020-06-28T19:02:15Z", "commit": {"oid": "0acd9adda05a035142c2c6fc37a5cd0f67ee6a5f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQxOTowMjoxNlrOGp_i0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOFQxOTowMjoxNlrOGp_i0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjY4NTkwNQ==", "bodyText": "I'm checking your PR locally right now.\nGeneration fails with:\nException in thread \"main\" java.lang.RuntimeException: Could not generate supporting file 'SupportingFile:\n\ttemplateFile: storage/framework/testing/.gitignore\n\tfolder: lib/storage/framework/testing\n\tcanOverwrite: true\n\tdestinationFilename: .gitignore\nDid you forget to rename templates gitignore to .gitignore?\nWhat was the purpose of that renaming?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6346#discussion_r446685905", "createdAt": "2020-06-28T19:02:16Z", "author": {"login": "ybelenko"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/PhpLaravelServerCodegen.java", "diffHunk": "@@ -186,27 +191,29 @@ public PhpLaravelServerCodegen() {\n         supportingFiles.add(new SupportingFile(\"config/session.php\", outputFolder + File.separator + \"config\", \"session.php\"));\n         supportingFiles.add(new SupportingFile(\"config/view.php\", outputFolder + File.separator + \"config\", \"view.php\"));\n \n+        // /database/\n+        supportingFiles.add(new SupportingFile(\"database/migrations/2019_08_19_000000_create_failed_jobs_table.php\", outputFolder + File.separator + \"database\" + File.separator + \"migrations\", \"2019_08_19_000000_create_failed_jobs_table.php\"));\n+\n         // /resources/\n-        supportingFiles.add(new SupportingFile(\"resources/assets/js/components/ExampleComponent.vue\", outputFolder + File.separator + \"resources\" + File.separator + \"assets\" + File.separator + \"js\" + File.separator + \"components\", \"ExampleComponent.vue\"));\n-        supportingFiles.add(new SupportingFile(\"resources/assets/js/app.js\", outputFolder + File.separator + \"resources\" + File.separator + \"assets\" + File.separator + \"js\", \"app.js\"));\n-        supportingFiles.add(new SupportingFile(\"resources/assets/js/bootstrap.js\", outputFolder + File.separator + \"resources\" + File.separator + \"assets\" + File.separator + \"js\", \"bootstrap.js\"));\n-        supportingFiles.add(new SupportingFile(\"resources/assets/sass/_variables.scss\", outputFolder + File.separator + \"resources\" + File.separator + \"assets\" + File.separator + \"sass\", \"_variables.scss\"));\n-        supportingFiles.add(new SupportingFile(\"resources/assets/sass/app.scss\", outputFolder + File.separator + \"resources\" + File.separator + \"assets\" + File.separator + \"sass\", \"app.scss\"));\n+        supportingFiles.add(new SupportingFile(\"resources/js/app.js\", outputFolder + File.separator + \"resources\" + File.separator + \"assets\" + File.separator + \"js\", \"app.js\"));\n+        supportingFiles.add(new SupportingFile(\"resources/js/bootstrap.js\", outputFolder + File.separator + \"resources\" + File.separator + \"assets\" + File.separator + \"js\", \"bootstrap.js\"));\n+        supportingFiles.add(new SupportingFile(\"resources/sass/app.scss\", outputFolder + File.separator + \"resources\" + File.separator + \"assets\" + File.separator + \"sass\", \"app.scss\"));\n         supportingFiles.add(new SupportingFile(\"resources/lang/en/auth.php\", outputFolder + File.separator + \"resources\" + File.separator + \"lang\" + File.separator + \"en\", \"auth.php\"));\n         supportingFiles.add(new SupportingFile(\"resources/lang/en/pagination.php\", outputFolder + File.separator + \"resources\" + File.separator + \"lang\" + File.separator + \"en\", \"pagination.php\"));\n         supportingFiles.add(new SupportingFile(\"resources/lang/en/passwords.php\", outputFolder + File.separator + \"resources\" + File.separator + \"lang\" + File.separator + \"en\", \"passwords.php\"));\n         supportingFiles.add(new SupportingFile(\"resources/lang/en/validation.php\", outputFolder + File.separator + \"resources\" + File.separator + \"lang\" + File.separator + \"en\", \"validation.php\"));\n         supportingFiles.add(new SupportingFile(\"resources/views/welcome.blade.php\", outputFolder + File.separator + \"resources\" + File.separator + \"views\", \"welcome.blade.php\"));\n \n         // /storage/\n-        supportingFiles.add(new SupportingFile(\"storage/app/gitignore\", outputFolder + File.separator + \"storage\" + File.separator + \"app\", \".gitignore\"));\n-        supportingFiles.add(new SupportingFile(\"storage/app/public/gitignore\", outputFolder + File.separator + \"storage\" + File.separator + \"app\" + File.separator + \"public\", \".gitignore\"));\n-        supportingFiles.add(new SupportingFile(\"storage/framework/gitignore\", outputFolder + File.separator + \"storage\" + File.separator + \"framework\", \".gitignore\"));\n-        supportingFiles.add(new SupportingFile(\"storage/framework/cache/gitignore\", outputFolder + File.separator + \"storage\" + File.separator + \"framework\" + File.separator + \"cache\", \".gitignore\"));\n-        supportingFiles.add(new SupportingFile(\"storage/framework/sessions/gitignore\", outputFolder + File.separator + \"storage\" + File.separator + \"framework\" + File.separator + \"sessions\", \".gitignore\"));\n-        supportingFiles.add(new SupportingFile(\"storage/framework/testing/gitignore\", outputFolder + File.separator + \"storage\" + File.separator + \"framework\" + File.separator + \"testing\", \".gitignore\"));\n-        supportingFiles.add(new SupportingFile(\"storage/framework/views/gitignore\", outputFolder + File.separator + \"storage\" + File.separator + \"framework\" + File.separator + \"views\", \".gitignore\"));\n-        supportingFiles.add(new SupportingFile(\"storage/logs/gitignore\", outputFolder + File.separator + \"storage\" + File.separator + \"logs\", \".gitignore\"));\n+        supportingFiles.add(new SupportingFile(\"storage/app/.gitignore\", outputFolder + File.separator + \"storage\" + File.separator + \"app\", \".gitignore\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0acd9adda05a035142c2c6fc37a5cd0f67ee6a5f"}, "originalPosition": 83}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fcec819754579f825c6f84f02fd56864910d88b9", "author": {"user": {"login": "dragonmantank", "name": "Chris Tankersley"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/fcec819754579f825c6f84f02fd56864910d88b9", "committedDate": "2020-06-29T00:47:08Z", "message": "Fixed gitignore compile errors, updated to newest petstore example"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9ad8ce469da9e94323cf4539e7f8f64ef0259b59", "author": {"user": {"login": "dragonmantank", "name": "Chris Tankersley"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/9ad8ce469da9e94323cf4539e7f8f64ef0259b59", "committedDate": "2020-06-28T19:58:33Z", "message": "Fixed gitignore compile errors, updated to newest petstore example"}, "afterCommit": {"oid": "fcec819754579f825c6f84f02fd56864910d88b9", "author": {"user": {"login": "dragonmantank", "name": "Chris Tankersley"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/fcec819754579f825c6f84f02fd56864910d88b9", "committedDate": "2020-06-29T00:47:08Z", "message": "Fixed gitignore compile errors, updated to newest petstore example"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4229edf5f854f662a6e068397b3dda8bcf3a4bb8", "author": {"user": {"login": "ybelenko", "name": "Yuriy Belenko"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/4229edf5f854f662a6e068397b3dda8bcf3a4bb8", "committedDate": "2020-06-29T19:29:21Z", "message": "Fix Circle CI pipe"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5NDQwOTgy", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6346#pullrequestreview-439440982", "createdAt": "2020-06-29T19:34:28Z", "commit": {"oid": "4229edf5f854f662a6e068397b3dda8bcf3a4bb8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10e5272a9d365a615b6930552480235e19e08db2", "author": {"user": {"login": "ybelenko", "name": "Yuriy Belenko"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/10e5272a9d365a615b6930552480235e19e08db2", "committedDate": "2020-06-29T21:10:42Z", "message": "Add composer.lock to .gitignore"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de243e661ff39f90da4ad4d365938da3629961d4", "author": {"user": {"login": "ybelenko", "name": "Yuriy Belenko"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/de243e661ff39f90da4ad4d365938da3629961d4", "committedDate": "2020-06-29T21:20:08Z", "message": "Fix generator gitignore location"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e8d379fb6e663fcb1a1ad9b7ab1e9ad57fe28ea", "author": {"user": {"login": "ybelenko", "name": "Yuriy Belenko"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/4e8d379fb6e663fcb1a1ad9b7ab1e9ad57fe28ea", "committedDate": "2020-06-29T21:50:27Z", "message": "Add integration tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cfd4c27f337925a3330c17313339ca09215d5b7d", "author": {"user": {"login": "ybelenko", "name": "Yuriy Belenko"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/cfd4c27f337925a3330c17313339ca09215d5b7d", "committedDate": "2020-06-29T21:54:23Z", "message": "Refresh samples"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46f98ea388128e5c8c51e27b66e5946e350f40bc", "author": {"user": {"login": "ybelenko", "name": "Yuriy Belenko"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/46f98ea388128e5c8c51e27b66e5946e350f40bc", "committedDate": "2020-06-29T22:29:52Z", "message": "Change phpunit argument"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c0e9893fb9bb53a7102f917b8d1e251af5000e31", "author": {"user": {"login": "ybelenko", "name": "Yuriy Belenko"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/c0e9893fb9bb53a7102f917b8d1e251af5000e31", "committedDate": "2020-06-29T23:19:37Z", "message": "Fix Circle CI again"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2264, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}