{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxMDYyNTk0", "number": 8075, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODo0Nzo0NlrOFAaDuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwMzo0ODo0MlrOFBlVCg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1OTcxMjU3OnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODo0Nzo0NlrOH-r2RA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNzo0OToxOFrOIAy4zw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQ5MjE2NA==", "bodyText": "If we keep your code as-is, then it will always ingest tuples for params.\nSo if you want to keep it as-is, please change this docstring to describe params as tuples not a dict.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/8075#discussion_r535492164", "createdAt": "2020-12-03T18:47:46Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "diffHunk": "@@ -243,6 +247,26 @@ class ApiClient(object):\n                                       response_data.getheaders()))\n {{/tornado}}\n \n+    def parameters_to_multipart(self, params, collection_types):\n+        \"\"\"Get parameters as list of tuples, formatting as json if value is collection_types\n+\n+        :param params: Parameters as dict or list of two-tuples", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3b021d16c3d02f6fbc51dbc31cbea77522d45ef"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTc5ODMwNw==", "bodyText": "@spacether ,  thank you for your feed back. Do You mean docstring should be changed as bellow, collect? just confirming before update & push.\n-                    :param params: Parameters as dict or list of two-tuples\n+                    :param params: Parameters as list of two-tuples", "url": "https://github.com/OpenAPITools/openapi-generator/pull/8075#discussion_r535798307", "createdAt": "2020-12-04T02:55:13Z", "author": {"login": "itaru2622"}, "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "diffHunk": "@@ -243,6 +247,26 @@ class ApiClient(object):\n                                       response_data.getheaders()))\n {{/tornado}}\n \n+    def parameters_to_multipart(self, params, collection_types):\n+        \"\"\"Get parameters as list of tuples, formatting as json if value is collection_types\n+\n+        :param params: Parameters as dict or list of two-tuples", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQ5MjE2NA=="}, "originalCommit": {"oid": "c3b021d16c3d02f6fbc51dbc31cbea77522d45ef"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzUyMzA2MA==", "bodyText": "docstring updated by 1f74d2e, please check it.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/8075#discussion_r537523060", "createdAt": "2020-12-07T13:54:41Z", "author": {"login": "itaru2622"}, "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "diffHunk": "@@ -243,6 +247,26 @@ class ApiClient(object):\n                                       response_data.getheaders()))\n {{/tornado}}\n \n+    def parameters_to_multipart(self, params, collection_types):\n+        \"\"\"Get parameters as list of tuples, formatting as json if value is collection_types\n+\n+        :param params: Parameters as dict or list of two-tuples", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQ5MjE2NA=="}, "originalCommit": {"oid": "c3b021d16c3d02f6fbc51dbc31cbea77522d45ef"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzcwNDY1NQ==", "bodyText": "Thank you!", "url": "https://github.com/OpenAPITools/openapi-generator/pull/8075#discussion_r537704655", "createdAt": "2020-12-07T17:49:18Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "diffHunk": "@@ -243,6 +247,26 @@ class ApiClient(object):\n                                       response_data.getheaders()))\n {{/tornado}}\n \n+    def parameters_to_multipart(self, params, collection_types):\n+        \"\"\"Get parameters as list of tuples, formatting as json if value is collection_types\n+\n+        :param params: Parameters as dict or list of two-tuples", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQ5MjE2NA=="}, "originalCommit": {"oid": "c3b021d16c3d02f6fbc51dbc31cbea77522d45ef"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM1OTcxNTk3OnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxODo0ODo0MFrOH-r4Xw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxNzo0ODo0NlrOIAy3Zg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQ5MjcwMw==", "bodyText": "How about:\nif header_params['Content-Type'].startswith(\"multipart\"):\n    post_params = self.parameters_to_multipart(post_params, (dict))\nelse:\n    post_params = self.parameters_to_tuples(post_params, collection_formats)\n\nThat way we don't run parameters_to_tuples when we don't need it.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/8075#discussion_r535492703", "createdAt": "2020-12-03T18:48:40Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "diffHunk": "@@ -169,6 +170,9 @@ class ApiClient(object):\n             post_params = self.parameters_to_tuples(post_params,\n                                                     collection_formats)\n             post_params.extend(self.files_parameters(files))\n+            if header_params['Content-Type'].startswith(\"multipart\"):\n+                post_params = self.parameters_to_multipart(post_params,\n+                                                          (dict) )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3b021d16c3d02f6fbc51dbc31cbea77522d45ef"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTgyMjgzMQ==", "bodyText": "@spacether, Your changes may not work as you expect. For example,\nnon dict parameter in multipart will be almost passthrough-ed by parameters_to_multipart(just became tuple) and not converted by parameters_to_tuples manner.\ni.e There is no csv handling in parameters_to_multipart but  parameters_to_tuples has it.\nin my code,  non dict parameter is converted by legacy manner and only if parameter is dict in multipart, it is converted to json.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/8075#discussion_r535822831", "createdAt": "2020-12-04T04:12:49Z", "author": {"login": "itaru2622"}, "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "diffHunk": "@@ -169,6 +170,9 @@ class ApiClient(object):\n             post_params = self.parameters_to_tuples(post_params,\n                                                     collection_formats)\n             post_params.extend(self.files_parameters(files))\n+            if header_params['Content-Type'].startswith(\"multipart\"):\n+                post_params = self.parameters_to_multipart(post_params,\n+                                                          (dict) )", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQ5MjcwMw=="}, "originalCommit": {"oid": "c3b021d16c3d02f6fbc51dbc31cbea77522d45ef"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjg4NTM0MQ==", "bodyText": "So we need them to always be tuples as inputs in parameters_to_multipart?\nIf so, please update the docstring there to correctly describe that params will always be tuples and will never be a dict.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/8075#discussion_r536885341", "createdAt": "2020-12-05T20:16:06Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "diffHunk": "@@ -169,6 +170,9 @@ class ApiClient(object):\n             post_params = self.parameters_to_tuples(post_params,\n                                                     collection_formats)\n             post_params.extend(self.files_parameters(files))\n+            if header_params['Content-Type'].startswith(\"multipart\"):\n+                post_params = self.parameters_to_multipart(post_params,\n+                                                          (dict) )", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQ5MjcwMw=="}, "originalCommit": {"oid": "c3b021d16c3d02f6fbc51dbc31cbea77522d45ef"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzIwOTIzMQ==", "bodyText": "@spacether, do you mean I need to change docstring more in addition to the first comment? I think the change by first comment (1f74d2e) is enough, but if you feel something lacked, I can add it in docstring.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/8075#discussion_r537209231", "createdAt": "2020-12-07T03:38:25Z", "author": {"login": "itaru2622"}, "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "diffHunk": "@@ -169,6 +170,9 @@ class ApiClient(object):\n             post_params = self.parameters_to_tuples(post_params,\n                                                     collection_formats)\n             post_params.extend(self.files_parameters(files))\n+            if header_params['Content-Type'].startswith(\"multipart\"):\n+                post_params = self.parameters_to_multipart(post_params,\n+                                                          (dict) )", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQ5MjcwMw=="}, "originalCommit": {"oid": "c3b021d16c3d02f6fbc51dbc31cbea77522d45ef"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzcwNDI5NA==", "bodyText": "Thanks. I am all set here. I wanted the change that you made:\n    def parameters_to_multipart(self, params, collection_types):\n        \"\"\"Get parameters as list of tuples, formatting as json if value is collection_types\n\n        :param params: Parameters as list of two-tuple", "url": "https://github.com/OpenAPITools/openapi-generator/pull/8075#discussion_r537704294", "createdAt": "2020-12-07T17:48:46Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "diffHunk": "@@ -169,6 +170,9 @@ class ApiClient(object):\n             post_params = self.parameters_to_tuples(post_params,\n                                                     collection_formats)\n             post_params.extend(self.files_parameters(files))\n+            if header_params['Content-Type'].startswith(\"multipart\"):\n+                post_params = self.parameters_to_multipart(post_params,\n+                                                          (dict) )", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTQ5MjcwMw=="}, "originalCommit": {"oid": "c3b021d16c3d02f6fbc51dbc31cbea77522d45ef"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3MjA0NDkwOnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QwMzo0ODo0MlrOIAU0mA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxMzo1NTo0OVrOIAn2qw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzIxMjA1Ng==", "bodyText": "I should fix my mistake about line 259, as below:\n        if collection_types is None:\n-          collection_types = (dict,list)\n+          collection_types = (dict)", "url": "https://github.com/OpenAPITools/openapi-generator/pull/8075#discussion_r537212056", "createdAt": "2020-12-07T03:48:42Z", "author": {"login": "itaru2622"}, "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "diffHunk": "@@ -243,6 +247,26 @@ class ApiClient(object):\n                                       response_data.getheaders()))\n {{/tornado}}\n \n+    def parameters_to_multipart(self, params, collection_types):\n+        \"\"\"Get parameters as list of tuples, formatting as json if value is collection_types\n+\n+        :param params: Parameters as dict or list of two-tuples\n+        :param dict collection_types: Parameter collection types\n+        :return: Parameters as list of tuple or urllib3.fields.RequestField\n+        \"\"\"\n+        new_params = []\n+        if collection_types is None:\n+            collection_types = (dict,list)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3b021d16c3d02f6fbc51dbc31cbea77522d45ef"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzUyMzg4Mw==", "bodyText": "the above is fixed by a6c8d1a.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/8075#discussion_r537523883", "createdAt": "2020-12-07T13:55:49Z", "author": {"login": "itaru2622"}, "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "diffHunk": "@@ -243,6 +247,26 @@ class ApiClient(object):\n                                       response_data.getheaders()))\n {{/tornado}}\n \n+    def parameters_to_multipart(self, params, collection_types):\n+        \"\"\"Get parameters as list of tuples, formatting as json if value is collection_types\n+\n+        :param params: Parameters as dict or list of two-tuples\n+        :param dict collection_types: Parameter collection types\n+        :return: Parameters as list of tuple or urllib3.fields.RequestField\n+        \"\"\"\n+        new_params = []\n+        if collection_types is None:\n+            collection_types = (dict,list)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzIxMjA1Ng=="}, "originalCommit": {"oid": "c3b021d16c3d02f6fbc51dbc31cbea77522d45ef"}, "originalPosition": 31}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3974, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}