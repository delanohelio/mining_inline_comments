{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2NzAwMzg5", "number": 5362, "title": "[Python] add discard_unknown_keys parameter", "bodyText": "Fix for #5351\n\nPR checklist\n\n Read the contribution guidelines.\n If contributing template-only or documentation-only changes which will change sample output, build the project before.\n Run the shell script(s) under ./bin/ (or Windows batch scripts under.\\bin\\windows) to update Petstore samples related to your fix. This is important, as CI jobs will verify all generator outputs of your HEAD commit, and these must match the expectations made by your contribution. You only need to run ./bin/{LANG}-petstore.sh, ./bin/openapi3/{LANG}-petstore.sh if updating the code or mustache templates for a language ({LANG}) (e.g. php, ruby, python, etc).\n File the PR against the correct branch: master, 4.3.x, 5.0.x. Default: master.\n Copy the technical committee to review the pull request if your PR is targeting a particular programming language.", "createdAt": "2020-02-18T16:01:38Z", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362", "merged": true, "mergeCommit": {"oid": "e08e05a2c7ff4f406f3e311e21c109f5b0249996"}, "closed": true, "closedAt": "2020-02-21T22:51:25Z", "author": {"login": "sebastien-rosset"}, "timelineItems": {"totalCount": 54, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcFkHYggH2gAyMzc2NzAwMzg5OmFhNzVkYTExNGRlYjFjMTE2OWY0MTA1MGZkMTFjNDExNTRmNTE2OTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcGnyg5AFqTM2Mjk2Mzk2Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "aa75da114deb1c1169f41050fd11c41154f51699", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/aa75da114deb1c1169f41050fd11c41154f51699", "committedDate": "2020-02-18T16:00:21Z", "message": "add discard_unknown_key parameter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "700d65ab5d1c5cc965c1a6d5df032560148cd5c3", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/700d65ab5d1c5cc965c1a6d5df032560148cd5c3", "committedDate": "2020-02-18T16:03:30Z", "message": "add discard_unknown_key parameter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6526695246c1169a2a50796f8a5a427d1ce8e513", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/6526695246c1169a2a50796f8a5a427d1ce8e513", "committedDate": "2020-02-18T16:05:08Z", "message": "add discard_unknown_key parameter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a14de3a7a0050e0919621dbc534d0bcdd50f8d16", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/a14de3a7a0050e0919621dbc534d0bcdd50f8d16", "committedDate": "2020-02-18T17:38:14Z", "message": "discard unknown keys in composed schema if configuration.discard_unknown_keys is set"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNTQ4NDg2", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#pullrequestreview-360548486", "createdAt": "2020-02-18T17:53:13Z", "commit": {"oid": "a14de3a7a0050e0919621dbc534d0bcdd50f8d16"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNzo1MzoxM1rOFrMb6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNzo1MzoxM1rOFrMb6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDgzNjg0Mw==", "bodyText": "Can you only invoke this if self._configuration is not None and self._configuration.discard_unknown_keys?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#discussion_r380836843", "createdAt": "2020-02-18T17:53:13Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_templates/method_init_composed.mustache", "diffHunk": "@@ -17,6 +17,11 @@\n         self._path_to_item = _path_to_item\n         self._configuration = _configuration\n \n+        if self._configuration.discard_unknown_keys:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a14de3a7a0050e0919621dbc534d0bcdd50f8d16"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNTQ5NzMy", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#pullrequestreview-360549732", "createdAt": "2020-02-18T17:55:02Z", "commit": {"oid": "a14de3a7a0050e0919621dbc534d0bcdd50f8d16"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNzo1NTowMlrOFrMfuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNzo1NTowMlrOFrMfuw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDgzNzgxOQ==", "bodyText": "Can you move this new code and the\n        self._data_store = {}\n        ...\n        self._configuration = _configuration\n\ninto method_init_shared?\nIt is always used together and will be defined only once if we put it there.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#discussion_r380837819", "createdAt": "2020-02-18T17:55:02Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_templates/method_init_composed.mustache", "diffHunk": "@@ -17,6 +17,11 @@\n         self._path_to_item = _path_to_item\n         self._configuration = _configuration\n \n+        if self._configuration.discard_unknown_keys:\n+            for property_name in list(kwargs.keys()):\n+                if property_name not in self.attribute_map:\n+                    del kwargs[property_name]", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a14de3a7a0050e0919621dbc534d0bcdd50f8d16"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNTUyNjI4", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#pullrequestreview-360552628", "createdAt": "2020-02-18T17:59:23Z", "commit": {"oid": "a14de3a7a0050e0919621dbc534d0bcdd50f8d16"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNzo1OToyM1rOFrMo0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxNzo1OToyM1rOFrMo0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg0MDE0Nw==", "bodyText": "Can you explain why we need this?\nI think that unused_args will be length 0 if we are dropping the extra kwargs before we invoke this method.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#discussion_r380840147", "createdAt": "2020-02-18T17:59:23Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_utils.mustache", "diffHunk": "@@ -1124,9 +1124,10 @@ def validate_get_composed_info(constant_args, model_args, self):\n                 \"class %s. Not all inputs were used. The unused input data \"\n                 \"is %s\" % (self.__class__.__name__, unused_args)\n             )\n-        for var_name, var_value in six.iteritems(unused_args):\n-            for instance in additional_properties_model_instances:\n-                setattr(instance, var_name, var_value)\n+        else:\n+            for var_name, var_value in six.iteritems(unused_args):\n+                for instance in additional_properties_model_instances:\n+                    setattr(instance, var_name, var_value)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a14de3a7a0050e0919621dbc534d0bcdd50f8d16"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a57b61d91531c901ffa04fcdd2f18134bd0cdeed", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/a57b61d91531c901ffa04fcdd2f18134bd0cdeed", "committedDate": "2020-02-18T18:04:50Z", "message": "discard unknown keys in composed schema if configuration.discard_unknown_keys is set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5337dfc6e9933162b7fa7f2ac03effe150811aff", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/5337dfc6e9933162b7fa7f2ac03effe150811aff", "committedDate": "2020-02-18T18:07:04Z", "message": "discard unknown keys in composed schema if configuration.discard_unknown_keys is set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a2c22db4d86506367f78d5a363f63b98a6ec204", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/8a2c22db4d86506367f78d5a363f63b98a6ec204", "committedDate": "2020-02-18T18:09:07Z", "message": "discard unknown keys in composed schema if configuration.discard_unknown_keys is set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e2552d4ffab271cfe7cfbc3a4b70e4f88cce6fa", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/4e2552d4ffab271cfe7cfbc3a4b70e4f88cce6fa", "committedDate": "2020-02-18T18:10:36Z", "message": "discard unknown keys in composed schema if configuration.discard_unknown_keys is set"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNTY5NTI0", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#pullrequestreview-360569524", "createdAt": "2020-02-18T18:25:24Z", "commit": {"oid": "4e2552d4ffab271cfe7cfbc3a4b70e4f88cce6fa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxODoyNToyNFrOFrNcnA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxODoyNToyNFrOFrNcnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg1MzQwNA==", "bodyText": "Can you keep the exception raising in validate_get_composed_info?\nThat makes it so we only need to look there to understand what is going wrong vs 2 or more locations.\nAlso, the model class setattr  currently automatically throws an exception when attempting to assign to an unknown variable so we should be okay here.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#discussion_r380853404", "createdAt": "2020-02-18T18:25:24Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_templates/method_init_composed.mustache", "diffHunk": "@@ -34,9 +28,23 @@\n         self._composed_instances = composed_info[0]\n         self._var_name_to_model_instances = composed_info[1]\n         self._additional_properties_model_instances = composed_info[2]\n+        unused_args = composed_info[3]\n \n {{#requiredVars}}\n         self.{{name}} = {{name}}\n {{/requiredVars}}\n         for var_name, var_value in six.iteritems(kwargs):\n-            setattr(self, var_name, var_value)\n\\ No newline at end of file\n+            if var_name in unused_args:\n+                if self._configuration is not None and self._configuration.discard_unknown_keys:\n+                    # discard variable.\n+                    pass\n+                else:\n+                    # This should not happen, any validation problem should have been raised in\n+                    # validate_get_composed_info \n+                    raise ApiValueError(\n+                        \"Invalid input arguments input when making an instance of \"\n+                        \"class %s. Not all inputs were used. The unused input data \"\n+                        \"is %s\" % (self.__class__.__name__, unused_args)\n+                    )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e2552d4ffab271cfe7cfbc3a4b70e4f88cce6fa"}, "originalPosition": 36}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e23ba45124dcd8c7954dd0f3b05ee4dd9169f976", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/e23ba45124dcd8c7954dd0f3b05ee4dd9169f976", "committedDate": "2020-02-18T18:30:52Z", "message": "discard unknown keys in composed schema if configuration.discard_unknown_keys is set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07f89b4a40f2a8ba03afd29df5f2e528144d5dbc", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/07f89b4a40f2a8ba03afd29df5f2e528144d5dbc", "committedDate": "2020-02-18T18:34:42Z", "message": "discard unknown keys in composed schema if configuration.discard_unknown_keys is set"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNTc2NzQx", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#pullrequestreview-360576741", "createdAt": "2020-02-18T18:36:38Z", "commit": {"oid": "e23ba45124dcd8c7954dd0f3b05ee4dd9169f976"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxODozNjozOFrOFrNzHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxODozNjozOFrOFrNzHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg1OTE2Nw==", "bodyText": "How about adding and not self._additional_properties_model_instances?\nThat way when we have _additional_properties_model_instances we will assign those additional props.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#discussion_r380859167", "createdAt": "2020-02-18T18:36:38Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_templates/method_init_composed.mustache", "diffHunk": "@@ -34,9 +28,14 @@\n         self._composed_instances = composed_info[0]\n         self._var_name_to_model_instances = composed_info[1]\n         self._additional_properties_model_instances = composed_info[2]\n+        unused_args = composed_info[3]\n \n {{#requiredVars}}\n         self.{{name}} = {{name}}\n {{/requiredVars}}\n         for var_name, var_value in six.iteritems(kwargs):\n+            if var_name in unused_args and self._configuration is not None and \\\n+                            self._configuration.discard_unknown_keys:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e23ba45124dcd8c7954dd0f3b05ee4dd9169f976"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "398ad1861dcf99ef334053adc74552a7973b3daf", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/398ad1861dcf99ef334053adc74552a7973b3daf", "committedDate": "2020-02-18T18:39:09Z", "message": "discard unknown keys in composed schema if configuration.discard_unknown_keys is set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "449c9b736231117402208312a17ce5bb2dffb7ce", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/449c9b736231117402208312a17ce5bb2dffb7ce", "committedDate": "2020-02-18T18:45:37Z", "message": "discard unknown keys in composed schema if configuration.discard_unknown_keys is set"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNTc2MDkz", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#pullrequestreview-360576093", "createdAt": "2020-02-18T18:35:36Z", "commit": {"oid": "07f89b4a40f2a8ba03afd29df5f2e528144d5dbc"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxODozNTozNlrOFrNxDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxODo0NTo0OFrOFrOFXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg1ODYzOA==", "bodyText": "Yes, I think that should be the behavior.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#discussion_r380858638", "createdAt": "2020-02-18T18:35:36Z", "author": {"login": "sebastien-rosset"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_utils.mustache", "diffHunk": "@@ -1124,9 +1124,10 @@ def validate_get_composed_info(constant_args, model_args, self):\n                 \"class %s. Not all inputs were used. The unused input data \"\n                 \"is %s\" % (self.__class__.__name__, unused_args)\n             )\n-        for var_name, var_value in six.iteritems(unused_args):\n-            for instance in additional_properties_model_instances:\n-                setattr(instance, var_name, var_value)\n+        else:\n+            for var_name, var_value in six.iteritems(unused_args):\n+                for instance in additional_properties_model_instances:\n+                    setattr(instance, var_name, var_value)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg0MDE0Nw=="}, "originalCommit": {"oid": "a14de3a7a0050e0919621dbc534d0bcdd50f8d16"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg2MDc2NA==", "bodyText": "I've added documentation in the configuration file to clarify. There is a difference between \"undeclared\" versus unknown.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#discussion_r380860764", "createdAt": "2020-02-18T18:39:44Z", "author": {"login": "sebastien-rosset"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_utils.mustache", "diffHunk": "@@ -1124,9 +1124,10 @@ def validate_get_composed_info(constant_args, model_args, self):\n                 \"class %s. Not all inputs were used. The unused input data \"\n                 \"is %s\" % (self.__class__.__name__, unused_args)\n             )\n-        for var_name, var_value in six.iteritems(unused_args):\n-            for instance in additional_properties_model_instances:\n-                setattr(instance, var_name, var_value)\n+        else:\n+            for var_name, var_value in six.iteritems(unused_args):\n+                for instance in additional_properties_model_instances:\n+                    setattr(instance, var_name, var_value)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg0MDE0Nw=="}, "originalCommit": {"oid": "a14de3a7a0050e0919621dbc534d0bcdd50f8d16"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg2MzgzOQ==", "bodyText": "done", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#discussion_r380863839", "createdAt": "2020-02-18T18:45:48Z", "author": {"login": "sebastien-rosset"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_templates/method_init_composed.mustache", "diffHunk": "@@ -34,9 +28,14 @@\n         self._composed_instances = composed_info[0]\n         self._var_name_to_model_instances = composed_info[1]\n         self._additional_properties_model_instances = composed_info[2]\n+        unused_args = composed_info[3]\n \n {{#requiredVars}}\n         self.{{name}} = {{name}}\n {{/requiredVars}}\n         for var_name, var_value in six.iteritems(kwargs):\n+            if var_name in unused_args and self._configuration is not None and \\\n+                            self._configuration.discard_unknown_keys:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg1OTE2Nw=="}, "originalCommit": {"oid": "e23ba45124dcd8c7954dd0f3b05ee4dd9169f976"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac1bec00c3c3285e35be5a29cbf6891e088af435", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/ac1bec00c3c3285e35be5a29cbf6891e088af435", "committedDate": "2020-02-18T18:51:43Z", "message": "discard unknown keys in composed schema if configuration.discard_unknown_keys is set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "072f1ecb837e3e2767ab34c44e85ff8d228fd8c7", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/072f1ecb837e3e2767ab34c44e85ff8d228fd8c7", "committedDate": "2020-02-18T19:02:05Z", "message": "Merge remote-tracking branch 'origin' into discard_unknown_keys"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae41d250a2556004ad5f424e1a1af4ae5ac98773", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/ae41d250a2556004ad5f424e1a1af4ae5ac98773", "committedDate": "2020-02-18T19:17:39Z", "message": "discard unknown keys in composed schema if configuration.discard_unknown_keys is set"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNjIxNTkx", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#pullrequestreview-360621591", "createdAt": "2020-02-18T19:43:49Z", "commit": {"oid": "ae41d250a2556004ad5f424e1a1af4ae5ac98773"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxOTo0Mzo0OVrOFrP8sg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxOTo0Mzo0OVrOFrP8sg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg5NDM4Ng==", "bodyText": "How about adding this if statement in the below for loop?\n            if var_name not in self.attribute_map and self._configuration is not None and \\\n                            self._configuration.discard_unknown_keys and \\\n                            self.additional_properties_type is None:\n                # discard variable.\n                pass\n\nThat will let us skip unknown keys for these non composed schema models.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#discussion_r380894386", "createdAt": "2020-02-18T19:43:49Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/resources/python/python-experimental/model_templates/method_init_normal.mustache", "diffHunk": "@@ -8,12 +8,6 @@\n \n {{> python-experimental/model_templates/method_init_shared }}\n \n-        self._data_store = {}\n-        self._check_type = _check_type\n-        self._from_server = _from_server\n-        self._path_to_item = _path_to_item\n-        self._configuration = _configuration\n-\n {{#requiredVars}}\n         self.{{name}} = {{name}}\n {{/requiredVars}}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae41d250a2556004ad5f424e1a1af4ae5ac98773"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93514aa4d78a30997d2e2ba3db53dc15f1557c19", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/93514aa4d78a30997d2e2ba3db53dc15f1557c19", "committedDate": "2020-02-18T19:58:08Z", "message": "discard unknown keys in composed schema if configuration.discard_unknown_keys is set"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNjM5OTg1", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#pullrequestreview-360639985", "createdAt": "2020-02-18T20:12:19Z", "commit": {"oid": "93514aa4d78a30997d2e2ba3db53dc15f1557c19"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7edc1eb9e1c4eaeb6a5f4525367f76703a131fd7", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/7edc1eb9e1c4eaeb6a5f4525367f76703a131fd7", "committedDate": "2020-02-18T20:48:51Z", "message": "discard unknown keys in composed schema if configuration.discard_unknown_keys is set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b59958343c904efae1d770420e5d8f8c62c02032", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/b59958343c904efae1d770420e5d8f8c62c02032", "committedDate": "2020-02-18T21:09:10Z", "message": "discard unknown keys in composed schema if configuration.discard_unknown_keys is set"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwNjk0OTMw", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#pullrequestreview-360694930", "createdAt": "2020-02-18T21:43:49Z", "commit": {"oid": "b59958343c904efae1d770420e5d8f8c62c02032"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQyMTo0Mzo0OVrOFrThNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQyMTo0Mzo0OVrOFrThNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk1Mjg4Nw==", "bodyText": "Could you move these into the python-experimental samples spec?\nThat way we can test instantiating these classes in python.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#discussion_r380952887", "createdAt": "2020-02-18T21:43:49Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/test/resources/3_0/all_of_with_additional_properties.yaml", "diffHunk": "@@ -0,0 +1,43 @@\n+openapi: 3.0.2\n+info:\n+  version: 1.0.0\n+  title: Example\n+  license:\n+    name: MIT\n+servers:\n+  - url: http://api.example.xyz/v1\n+paths:\n+  /person/display/{personId}:\n+    get:\n+      parameters:\n+        - name: personId\n+          in: path\n+          required: true\n+          description: The id of the person to retrieve\n+          schema:\n+            type: string\n+      operationId: list\n+      responses:\n+        '200':\n+          description: OK\n+          content:\n+            application/json:\n+              schema:\n+                $ref: \"#/components/schemas/Person\"\n+components:\n+  schemas:\n+    Person:\n+      description: A representation of a person\n+      type: object\n+      properties:\n+        name:\n+          type: string\n+    Adult:\n+      description: A representation of an adult\n+      additionalProperties: {}\n+      allOf:\n+      - $ref: '#/components/schemas/Person'\n+      - type: object\n+        properties:\n+          address:\n+            type: string", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b59958343c904efae1d770420e5d8f8c62c02032"}, "originalPosition": 43}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f70404376104a8b008f474b2398a73c315af163", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/5f70404376104a8b008f474b2398a73c315af163", "committedDate": "2020-02-19T04:00:20Z", "message": "discard unknown keys in composed schema if configuration.discard_unknown_keys is set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "216ff5b95eadda65a6e769624bad98452a0c3780", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/216ff5b95eadda65a6e769624bad98452a0c3780", "committedDate": "2020-02-19T04:01:53Z", "message": "discard unknown keys in composed schema if configuration.discard_unknown_keys is set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d9055e9de9520a219c4ce65ca517252ca006f4c", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/3d9055e9de9520a219c4ce65ca517252ca006f4c", "committedDate": "2020-02-19T04:02:30Z", "message": "discard unknown keys in composed schema if configuration.discard_unknown_keys is set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "243e957cbe71407082276191c5cac6378cdcf127", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/243e957cbe71407082276191c5cac6378cdcf127", "committedDate": "2020-02-19T04:09:36Z", "message": "discard unknown keys in composed schema if configuration.discard_unknown_keys is set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2706e7b51278fef7a1103c3dec6dc46f3d1574b5", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/2706e7b51278fef7a1103c3dec6dc46f3d1574b5", "committedDate": "2020-02-19T04:10:17Z", "message": "Merge remote-tracking branch 'origin' into discard_unknown_keys"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e8cdcb6e03577d1ece527856aad4d982cadc661", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/6e8cdcb6e03577d1ece527856aad4d982cadc661", "committedDate": "2020-02-19T05:00:59Z", "message": "discard unknown keys in composed schema if configuration.discard_unknown_keys is set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f9fbe939742bf3334ac920b5ca4bc4854d48ebb7", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/f9fbe939742bf3334ac920b5ca4bc4854d48ebb7", "committedDate": "2020-02-19T05:27:13Z", "message": "discard unknown keys in composed schema if configuration.discard_unknown_keys is set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28868406a40dda6559dc650747f47408ad424a07", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/28868406a40dda6559dc650747f47408ad424a07", "committedDate": "2020-02-19T05:46:33Z", "message": "discard unknown keys in composed schema if configuration.discard_unknown_keys is set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "10709b96ff9171eae014bb45b5f57c8848f58adc", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/10709b96ff9171eae014bb45b5f57c8848f58adc", "committedDate": "2020-02-19T06:03:07Z", "message": "discard unknown keys in composed schema if configuration.discard_unknown_keys is set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3dbf8e620217076d14189573f98b6437c4dd6835", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/3dbf8e620217076d14189573f98b6437c4dd6835", "committedDate": "2020-02-19T06:41:49Z", "message": "discard unknown keys in composed schema if configuration.discard_unknown_keys is set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5120d494730a009bda765700668fc548199f9b35", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/5120d494730a009bda765700668fc548199f9b35", "committedDate": "2020-02-19T07:17:22Z", "message": "discard unknown keys in composed schema if configuration.discard_unknown_keys is set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2a05272742f21553a5ce034814692db6da05c11", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/f2a05272742f21553a5ce034814692db6da05c11", "committedDate": "2020-02-19T14:01:35Z", "message": "run sample scripts for python"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0106626909bc532bfdebfec71e990c63e25de646", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/0106626909bc532bfdebfec71e990c63e25de646", "committedDate": "2020-02-19T14:10:04Z", "message": "code reformatting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d304d8cdc868ce05b4facb94fec148d9545eeb4b", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/d304d8cdc868ce05b4facb94fec148d9545eeb4b", "committedDate": "2020-02-19T16:47:56Z", "message": "execute script in bin directory"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNTc3NTQy", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#pullrequestreview-361577542", "createdAt": "2020-02-20T01:23:20Z", "commit": {"oid": "d304d8cdc868ce05b4facb94fec148d9545eeb4b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwMToyMzoyMFrOFr9raw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwMToyMzoyMFrOFr9raw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTY0MzYyNw==", "bodyText": "Can you add a test to check the value of deserialized['dog'].to_dict?\nThat would prove that the unknown properties have been discarded.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#discussion_r381643627", "createdAt": "2020-02-20T01:23:20Z", "author": {"login": "spacether"}, "path": "samples/openapi3/client/petstore/python-experimental/tests/test_discard_unknown_properties.py", "diffHunk": "@@ -0,0 +1,129 @@\n+# coding: utf-8\n+\n+# flake8: noqa\n+\n+\"\"\"\n+Run the tests.\n+$ docker pull swaggerapi/petstore\n+$ docker run -d -e SWAGGER_HOST=http://petstore.swagger.io -e SWAGGER_BASE_PATH=/v2 -p 80:8080 swaggerapi/petstore\n+$ pip install nose (optional)\n+$ cd petstore_api-python\n+$ nosetests -v\n+\"\"\"\n+from collections import namedtuple\n+import json\n+import os\n+import re\n+import shutil\n+import unittest\n+from six.moves.urllib.parse import urlencode, urlparse\n+\n+import petstore_api\n+from petstore_api import Configuration, signing\n+from petstore_api.rest import (\n+    RESTClientObject,\n+    RESTResponse\n+)\n+\n+from petstore_api.model_utils import (\n+    file_type,\n+    int,\n+    model_to_dict,\n+    str,\n+)\n+\n+MockResponse = namedtuple('MockResponse', 'data')\n+\n+class DiscardUnknownPropertiesTests(unittest.TestCase):\n+\n+    def test_deserialize_dog_do_not_discard_unknown_properties(self):\n+        \"\"\" deserialize str, Dog) with unknown properties, strict validation is enabled \"\"\"\n+        config = Configuration(discard_unknown_keys=False)\n+        api_client = petstore_api.ApiClient(config)\n+        data = {\n+            'dog': {\n+                \"class_name\": \"Dog\",\n+                \"color\": \"black\",\n+                \"breed\": \"husky\",\n+                \"unknown_property\": \"a-value\"\n+            }\n+        }\n+        response = MockResponse(data=json.dumps(data))\n+\n+        # Deserializing with strict validation raises an exception because the 'unknown_property'\n+        # is undeclared.\n+        with self.assertRaises(Exception) as cm:\n+            deserialized = api_client.deserialize(response,\n+                ({str: (petstore_api.Dog,)},), True)\n+        self.assertTrue(re.match('.*Not all inputs were used.*unknown_property.*', str(cm.exception)),\n+            'Exception message: {0}'.format(str(cm.exception)))\n+\n+    def test_deserialize_dog_discard_unknown_properties(self):\n+        \"\"\" deserialize str, Dog) with unknown properties, discard unknown properties \"\"\"\n+        config = Configuration(discard_unknown_keys=True)\n+        api_client = petstore_api.ApiClient(config)\n+        data = {\n+            'dog': {\n+                \"class_name\": \"Dog\",\n+                \"color\": \"black\",\n+                \"breed\": \"husky\",\n+                \"unknown_property\": \"a-value\",\n+                \"more-unknown\": [\n+                    \"a\"\n+                ]\n+            }\n+        }\n+        # The 'unknown_property' is undeclared, which would normally raise an exception, but\n+        # when discard_unknown_keys is set to True, the unknown properties are discarded.\n+        response = MockResponse(data=json.dumps(data))\n+        deserialized = api_client.deserialize(response,\n+            ({str: (petstore_api.Dog,)},), True)\n+        self.assertTrue(isinstance(deserialized, dict))\n+        self.assertTrue(isinstance(deserialized['dog'], petstore_api.Dog))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d304d8cdc868ce05b4facb94fec148d9545eeb4b"}, "originalPosition": 82}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNTc4MTIz", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#pullrequestreview-361578123", "createdAt": "2020-02-20T01:25:08Z", "commit": {"oid": "d304d8cdc868ce05b4facb94fec148d9545eeb4b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwMToyNTowOFrOFr9vvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwMToyNTowOFrOFr9vvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTY0NDczMw==", "bodyText": "Can you use our specific exception here rather than the general Exception? Is it petstore_api.ApiValueError?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#discussion_r381644733", "createdAt": "2020-02-20T01:25:08Z", "author": {"login": "spacether"}, "path": "samples/openapi3/client/petstore/python-experimental/tests/test_discard_unknown_properties.py", "diffHunk": "@@ -0,0 +1,129 @@\n+# coding: utf-8\n+\n+# flake8: noqa\n+\n+\"\"\"\n+Run the tests.\n+$ docker pull swaggerapi/petstore\n+$ docker run -d -e SWAGGER_HOST=http://petstore.swagger.io -e SWAGGER_BASE_PATH=/v2 -p 80:8080 swaggerapi/petstore\n+$ pip install nose (optional)\n+$ cd petstore_api-python\n+$ nosetests -v\n+\"\"\"\n+from collections import namedtuple\n+import json\n+import os\n+import re\n+import shutil\n+import unittest\n+from six.moves.urllib.parse import urlencode, urlparse\n+\n+import petstore_api\n+from petstore_api import Configuration, signing\n+from petstore_api.rest import (\n+    RESTClientObject,\n+    RESTResponse\n+)\n+\n+from petstore_api.model_utils import (\n+    file_type,\n+    int,\n+    model_to_dict,\n+    str,\n+)\n+\n+MockResponse = namedtuple('MockResponse', 'data')\n+\n+class DiscardUnknownPropertiesTests(unittest.TestCase):\n+\n+    def test_deserialize_dog_do_not_discard_unknown_properties(self):\n+        \"\"\" deserialize str, Dog) with unknown properties, strict validation is enabled \"\"\"\n+        config = Configuration(discard_unknown_keys=False)\n+        api_client = petstore_api.ApiClient(config)\n+        data = {\n+            'dog': {\n+                \"class_name\": \"Dog\",\n+                \"color\": \"black\",\n+                \"breed\": \"husky\",\n+                \"unknown_property\": \"a-value\"\n+            }\n+        }\n+        response = MockResponse(data=json.dumps(data))\n+\n+        # Deserializing with strict validation raises an exception because the 'unknown_property'\n+        # is undeclared.\n+        with self.assertRaises(Exception) as cm:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d304d8cdc868ce05b4facb94fec148d9545eeb4b"}, "originalPosition": 55}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNTc4NTI5", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#pullrequestreview-361578529", "createdAt": "2020-02-20T01:26:27Z", "commit": {"oid": "d304d8cdc868ce05b4facb94fec148d9545eeb4b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwMToyNjoyN1rOFr9y3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwMToyNjoyN1rOFr9y3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTY0NTUzNQ==", "bodyText": "If you want, you can change this data to just the dog dict.\nThat would look like:\n            deserialized = api_client.deserialize(response,\n                (petstore_api.Dog,), True)", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#discussion_r381645535", "createdAt": "2020-02-20T01:26:27Z", "author": {"login": "spacether"}, "path": "samples/openapi3/client/petstore/python-experimental/tests/test_discard_unknown_properties.py", "diffHunk": "@@ -0,0 +1,129 @@\n+# coding: utf-8\n+\n+# flake8: noqa\n+\n+\"\"\"\n+Run the tests.\n+$ docker pull swaggerapi/petstore\n+$ docker run -d -e SWAGGER_HOST=http://petstore.swagger.io -e SWAGGER_BASE_PATH=/v2 -p 80:8080 swaggerapi/petstore\n+$ pip install nose (optional)\n+$ cd petstore_api-python\n+$ nosetests -v\n+\"\"\"\n+from collections import namedtuple\n+import json\n+import os\n+import re\n+import shutil\n+import unittest\n+from six.moves.urllib.parse import urlencode, urlparse\n+\n+import petstore_api\n+from petstore_api import Configuration, signing\n+from petstore_api.rest import (\n+    RESTClientObject,\n+    RESTResponse\n+)\n+\n+from petstore_api.model_utils import (\n+    file_type,\n+    int,\n+    model_to_dict,\n+    str,\n+)\n+\n+MockResponse = namedtuple('MockResponse', 'data')\n+\n+class DiscardUnknownPropertiesTests(unittest.TestCase):\n+\n+    def test_deserialize_dog_do_not_discard_unknown_properties(self):\n+        \"\"\" deserialize str, Dog) with unknown properties, strict validation is enabled \"\"\"\n+        config = Configuration(discard_unknown_keys=False)\n+        api_client = petstore_api.ApiClient(config)\n+        data = {\n+            'dog': {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d304d8cdc868ce05b4facb94fec148d9545eeb4b"}, "originalPosition": 44}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNTc4NjI1", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#pullrequestreview-361578625", "createdAt": "2020-02-20T01:26:46Z", "commit": {"oid": "d304d8cdc868ce05b4facb94fec148d9545eeb4b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwMToyNjo0N1rOFr9zkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwMToyNjo0N1rOFr9zkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTY0NTcxMw==", "bodyText": "If you want, you can change this data to just the dog dict.\nThat would look like:\n            deserialized = api_client.deserialize(response,\n                (petstore_api.Dog,), True)", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#discussion_r381645713", "createdAt": "2020-02-20T01:26:47Z", "author": {"login": "spacether"}, "path": "samples/openapi3/client/petstore/python-experimental/tests/test_discard_unknown_properties.py", "diffHunk": "@@ -0,0 +1,129 @@\n+# coding: utf-8\n+\n+# flake8: noqa\n+\n+\"\"\"\n+Run the tests.\n+$ docker pull swaggerapi/petstore\n+$ docker run -d -e SWAGGER_HOST=http://petstore.swagger.io -e SWAGGER_BASE_PATH=/v2 -p 80:8080 swaggerapi/petstore\n+$ pip install nose (optional)\n+$ cd petstore_api-python\n+$ nosetests -v\n+\"\"\"\n+from collections import namedtuple\n+import json\n+import os\n+import re\n+import shutil\n+import unittest\n+from six.moves.urllib.parse import urlencode, urlparse\n+\n+import petstore_api\n+from petstore_api import Configuration, signing\n+from petstore_api.rest import (\n+    RESTClientObject,\n+    RESTResponse\n+)\n+\n+from petstore_api.model_utils import (\n+    file_type,\n+    int,\n+    model_to_dict,\n+    str,\n+)\n+\n+MockResponse = namedtuple('MockResponse', 'data')\n+\n+class DiscardUnknownPropertiesTests(unittest.TestCase):\n+\n+    def test_deserialize_dog_do_not_discard_unknown_properties(self):\n+        \"\"\" deserialize str, Dog) with unknown properties, strict validation is enabled \"\"\"\n+        config = Configuration(discard_unknown_keys=False)\n+        api_client = petstore_api.ApiClient(config)\n+        data = {\n+            'dog': {\n+                \"class_name\": \"Dog\",\n+                \"color\": \"black\",\n+                \"breed\": \"husky\",\n+                \"unknown_property\": \"a-value\"\n+            }\n+        }\n+        response = MockResponse(data=json.dumps(data))\n+\n+        # Deserializing with strict validation raises an exception because the 'unknown_property'\n+        # is undeclared.\n+        with self.assertRaises(Exception) as cm:\n+            deserialized = api_client.deserialize(response,\n+                ({str: (petstore_api.Dog,)},), True)\n+        self.assertTrue(re.match('.*Not all inputs were used.*unknown_property.*', str(cm.exception)),\n+            'Exception message: {0}'.format(str(cm.exception)))\n+\n+    def test_deserialize_dog_discard_unknown_properties(self):\n+        \"\"\" deserialize str, Dog) with unknown properties, discard unknown properties \"\"\"\n+        config = Configuration(discard_unknown_keys=True)\n+        api_client = petstore_api.ApiClient(config)\n+        data = {\n+            'dog': {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d304d8cdc868ce05b4facb94fec148d9545eeb4b"}, "originalPosition": 66}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNTc4OTM5", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#pullrequestreview-361578939", "createdAt": "2020-02-20T01:27:44Z", "commit": {"oid": "d304d8cdc868ce05b4facb94fec148d9545eeb4b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwMToyNzo0NFrOFr917Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwMToyNzo0NFrOFr917Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTY0NjMxNw==", "bodyText": "Same comment as above, you can strip this down to just the cat dict", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#discussion_r381646317", "createdAt": "2020-02-20T01:27:44Z", "author": {"login": "spacether"}, "path": "samples/openapi3/client/petstore/python-experimental/tests/test_discard_unknown_properties.py", "diffHunk": "@@ -0,0 +1,129 @@\n+# coding: utf-8\n+\n+# flake8: noqa\n+\n+\"\"\"\n+Run the tests.\n+$ docker pull swaggerapi/petstore\n+$ docker run -d -e SWAGGER_HOST=http://petstore.swagger.io -e SWAGGER_BASE_PATH=/v2 -p 80:8080 swaggerapi/petstore\n+$ pip install nose (optional)\n+$ cd petstore_api-python\n+$ nosetests -v\n+\"\"\"\n+from collections import namedtuple\n+import json\n+import os\n+import re\n+import shutil\n+import unittest\n+from six.moves.urllib.parse import urlencode, urlparse\n+\n+import petstore_api\n+from petstore_api import Configuration, signing\n+from petstore_api.rest import (\n+    RESTClientObject,\n+    RESTResponse\n+)\n+\n+from petstore_api.model_utils import (\n+    file_type,\n+    int,\n+    model_to_dict,\n+    str,\n+)\n+\n+MockResponse = namedtuple('MockResponse', 'data')\n+\n+class DiscardUnknownPropertiesTests(unittest.TestCase):\n+\n+    def test_deserialize_dog_do_not_discard_unknown_properties(self):\n+        \"\"\" deserialize str, Dog) with unknown properties, strict validation is enabled \"\"\"\n+        config = Configuration(discard_unknown_keys=False)\n+        api_client = petstore_api.ApiClient(config)\n+        data = {\n+            'dog': {\n+                \"class_name\": \"Dog\",\n+                \"color\": \"black\",\n+                \"breed\": \"husky\",\n+                \"unknown_property\": \"a-value\"\n+            }\n+        }\n+        response = MockResponse(data=json.dumps(data))\n+\n+        # Deserializing with strict validation raises an exception because the 'unknown_property'\n+        # is undeclared.\n+        with self.assertRaises(Exception) as cm:\n+            deserialized = api_client.deserialize(response,\n+                ({str: (petstore_api.Dog,)},), True)\n+        self.assertTrue(re.match('.*Not all inputs were used.*unknown_property.*', str(cm.exception)),\n+            'Exception message: {0}'.format(str(cm.exception)))\n+\n+    def test_deserialize_dog_discard_unknown_properties(self):\n+        \"\"\" deserialize str, Dog) with unknown properties, discard unknown properties \"\"\"\n+        config = Configuration(discard_unknown_keys=True)\n+        api_client = petstore_api.ApiClient(config)\n+        data = {\n+            'dog': {\n+                \"class_name\": \"Dog\",\n+                \"color\": \"black\",\n+                \"breed\": \"husky\",\n+                \"unknown_property\": \"a-value\",\n+                \"more-unknown\": [\n+                    \"a\"\n+                ]\n+            }\n+        }\n+        # The 'unknown_property' is undeclared, which would normally raise an exception, but\n+        # when discard_unknown_keys is set to True, the unknown properties are discarded.\n+        response = MockResponse(data=json.dumps(data))\n+        deserialized = api_client.deserialize(response,\n+            ({str: (petstore_api.Dog,)},), True)\n+        self.assertTrue(isinstance(deserialized, dict))\n+        self.assertTrue(isinstance(deserialized['dog'], petstore_api.Dog))\n+\n+    def test_deserialize_cat_do_not_discard_unknown_properties(self):\n+        \"\"\" deserialize str, Cat) with unknown properties, strict validation is enabled \"\"\"\n+        config = Configuration(discard_unknown_keys=False)\n+        api_client = petstore_api.ApiClient(config)\n+        data = {\n+            'cat': {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d304d8cdc868ce05b4facb94fec148d9545eeb4b"}, "originalPosition": 89}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNTc4OTcw", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#pullrequestreview-361578970", "createdAt": "2020-02-20T01:27:50Z", "commit": {"oid": "d304d8cdc868ce05b4facb94fec148d9545eeb4b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwMToyNzo1MFrOFr92MQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwMToyNzo1MFrOFr92MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTY0NjM4NQ==", "bodyText": "Same comment as above, you can strip this down to just the cat dict", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#discussion_r381646385", "createdAt": "2020-02-20T01:27:50Z", "author": {"login": "spacether"}, "path": "samples/openapi3/client/petstore/python-experimental/tests/test_discard_unknown_properties.py", "diffHunk": "@@ -0,0 +1,129 @@\n+# coding: utf-8\n+\n+# flake8: noqa\n+\n+\"\"\"\n+Run the tests.\n+$ docker pull swaggerapi/petstore\n+$ docker run -d -e SWAGGER_HOST=http://petstore.swagger.io -e SWAGGER_BASE_PATH=/v2 -p 80:8080 swaggerapi/petstore\n+$ pip install nose (optional)\n+$ cd petstore_api-python\n+$ nosetests -v\n+\"\"\"\n+from collections import namedtuple\n+import json\n+import os\n+import re\n+import shutil\n+import unittest\n+from six.moves.urllib.parse import urlencode, urlparse\n+\n+import petstore_api\n+from petstore_api import Configuration, signing\n+from petstore_api.rest import (\n+    RESTClientObject,\n+    RESTResponse\n+)\n+\n+from petstore_api.model_utils import (\n+    file_type,\n+    int,\n+    model_to_dict,\n+    str,\n+)\n+\n+MockResponse = namedtuple('MockResponse', 'data')\n+\n+class DiscardUnknownPropertiesTests(unittest.TestCase):\n+\n+    def test_deserialize_dog_do_not_discard_unknown_properties(self):\n+        \"\"\" deserialize str, Dog) with unknown properties, strict validation is enabled \"\"\"\n+        config = Configuration(discard_unknown_keys=False)\n+        api_client = petstore_api.ApiClient(config)\n+        data = {\n+            'dog': {\n+                \"class_name\": \"Dog\",\n+                \"color\": \"black\",\n+                \"breed\": \"husky\",\n+                \"unknown_property\": \"a-value\"\n+            }\n+        }\n+        response = MockResponse(data=json.dumps(data))\n+\n+        # Deserializing with strict validation raises an exception because the 'unknown_property'\n+        # is undeclared.\n+        with self.assertRaises(Exception) as cm:\n+            deserialized = api_client.deserialize(response,\n+                ({str: (petstore_api.Dog,)},), True)\n+        self.assertTrue(re.match('.*Not all inputs were used.*unknown_property.*', str(cm.exception)),\n+            'Exception message: {0}'.format(str(cm.exception)))\n+\n+    def test_deserialize_dog_discard_unknown_properties(self):\n+        \"\"\" deserialize str, Dog) with unknown properties, discard unknown properties \"\"\"\n+        config = Configuration(discard_unknown_keys=True)\n+        api_client = petstore_api.ApiClient(config)\n+        data = {\n+            'dog': {\n+                \"class_name\": \"Dog\",\n+                \"color\": \"black\",\n+                \"breed\": \"husky\",\n+                \"unknown_property\": \"a-value\",\n+                \"more-unknown\": [\n+                    \"a\"\n+                ]\n+            }\n+        }\n+        # The 'unknown_property' is undeclared, which would normally raise an exception, but\n+        # when discard_unknown_keys is set to True, the unknown properties are discarded.\n+        response = MockResponse(data=json.dumps(data))\n+        deserialized = api_client.deserialize(response,\n+            ({str: (petstore_api.Dog,)},), True)\n+        self.assertTrue(isinstance(deserialized, dict))\n+        self.assertTrue(isinstance(deserialized['dog'], petstore_api.Dog))\n+\n+    def test_deserialize_cat_do_not_discard_unknown_properties(self):\n+        \"\"\" deserialize str, Cat) with unknown properties, strict validation is enabled \"\"\"\n+        config = Configuration(discard_unknown_keys=False)\n+        api_client = petstore_api.ApiClient(config)\n+        data = {\n+            'cat': {\n+                \"class_name\": \"Cat\",\n+                \"color\": \"black\",\n+                \"declawed\": True,\n+                \"dynamic-property\": 12345,\n+            }\n+        }\n+        response = MockResponse(data=json.dumps(data))\n+\n+        # Deserializing with strict validation does not raise an exception because the even though\n+        # the 'dynamic-property' is undeclared, the 'Cat' schema defines the additionalProperties\n+        # attribute.\n+        deserialized = api_client.deserialize(response,\n+            ({str: (petstore_api.Cat,)},), True)\n+        self.assertTrue(isinstance(deserialized, dict))\n+        self.assertTrue(isinstance(deserialized['cat'], petstore_api.Cat))\n+        self.assertEqual(deserialized['cat']['color'], 'black')\n+\n+    def test_deserialize_cat_discard_unknown_properties(self):\n+        \"\"\" deserialize str, Cat) with unknown properties, discard unknown properties \"\"\"\n+        config = Configuration(discard_unknown_keys=True)\n+        api_client = petstore_api.ApiClient(config)\n+        data = {\n+            'cat': {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d304d8cdc868ce05b4facb94fec148d9545eeb4b"}, "originalPosition": 112}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNTc5MTUy", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#pullrequestreview-361579152", "createdAt": "2020-02-20T01:28:23Z", "commit": {"oid": "d304d8cdc868ce05b4facb94fec148d9545eeb4b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwMToyODoyNFrOFr93tA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwMToyODoyNFrOFr93tA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTY0Njc3Mg==", "bodyText": "Can you add a test to check the value of deserialized['cat'].to_dict?\nThat would prove that the unknown properties have been discarded.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#discussion_r381646772", "createdAt": "2020-02-20T01:28:24Z", "author": {"login": "spacether"}, "path": "samples/openapi3/client/petstore/python-experimental/tests/test_discard_unknown_properties.py", "diffHunk": "@@ -0,0 +1,129 @@\n+# coding: utf-8\n+\n+# flake8: noqa\n+\n+\"\"\"\n+Run the tests.\n+$ docker pull swaggerapi/petstore\n+$ docker run -d -e SWAGGER_HOST=http://petstore.swagger.io -e SWAGGER_BASE_PATH=/v2 -p 80:8080 swaggerapi/petstore\n+$ pip install nose (optional)\n+$ cd petstore_api-python\n+$ nosetests -v\n+\"\"\"\n+from collections import namedtuple\n+import json\n+import os\n+import re\n+import shutil\n+import unittest\n+from six.moves.urllib.parse import urlencode, urlparse\n+\n+import petstore_api\n+from petstore_api import Configuration, signing\n+from petstore_api.rest import (\n+    RESTClientObject,\n+    RESTResponse\n+)\n+\n+from petstore_api.model_utils import (\n+    file_type,\n+    int,\n+    model_to_dict,\n+    str,\n+)\n+\n+MockResponse = namedtuple('MockResponse', 'data')\n+\n+class DiscardUnknownPropertiesTests(unittest.TestCase):\n+\n+    def test_deserialize_dog_do_not_discard_unknown_properties(self):\n+        \"\"\" deserialize str, Dog) with unknown properties, strict validation is enabled \"\"\"\n+        config = Configuration(discard_unknown_keys=False)\n+        api_client = petstore_api.ApiClient(config)\n+        data = {\n+            'dog': {\n+                \"class_name\": \"Dog\",\n+                \"color\": \"black\",\n+                \"breed\": \"husky\",\n+                \"unknown_property\": \"a-value\"\n+            }\n+        }\n+        response = MockResponse(data=json.dumps(data))\n+\n+        # Deserializing with strict validation raises an exception because the 'unknown_property'\n+        # is undeclared.\n+        with self.assertRaises(Exception) as cm:\n+            deserialized = api_client.deserialize(response,\n+                ({str: (petstore_api.Dog,)},), True)\n+        self.assertTrue(re.match('.*Not all inputs were used.*unknown_property.*', str(cm.exception)),\n+            'Exception message: {0}'.format(str(cm.exception)))\n+\n+    def test_deserialize_dog_discard_unknown_properties(self):\n+        \"\"\" deserialize str, Dog) with unknown properties, discard unknown properties \"\"\"\n+        config = Configuration(discard_unknown_keys=True)\n+        api_client = petstore_api.ApiClient(config)\n+        data = {\n+            'dog': {\n+                \"class_name\": \"Dog\",\n+                \"color\": \"black\",\n+                \"breed\": \"husky\",\n+                \"unknown_property\": \"a-value\",\n+                \"more-unknown\": [\n+                    \"a\"\n+                ]\n+            }\n+        }\n+        # The 'unknown_property' is undeclared, which would normally raise an exception, but\n+        # when discard_unknown_keys is set to True, the unknown properties are discarded.\n+        response = MockResponse(data=json.dumps(data))\n+        deserialized = api_client.deserialize(response,\n+            ({str: (petstore_api.Dog,)},), True)\n+        self.assertTrue(isinstance(deserialized, dict))\n+        self.assertTrue(isinstance(deserialized['dog'], petstore_api.Dog))\n+\n+    def test_deserialize_cat_do_not_discard_unknown_properties(self):\n+        \"\"\" deserialize str, Cat) with unknown properties, strict validation is enabled \"\"\"\n+        config = Configuration(discard_unknown_keys=False)\n+        api_client = petstore_api.ApiClient(config)\n+        data = {\n+            'cat': {\n+                \"class_name\": \"Cat\",\n+                \"color\": \"black\",\n+                \"declawed\": True,\n+                \"dynamic-property\": 12345,\n+            }\n+        }\n+        response = MockResponse(data=json.dumps(data))\n+\n+        # Deserializing with strict validation does not raise an exception because the even though\n+        # the 'dynamic-property' is undeclared, the 'Cat' schema defines the additionalProperties\n+        # attribute.\n+        deserialized = api_client.deserialize(response,\n+            ({str: (petstore_api.Cat,)},), True)\n+        self.assertTrue(isinstance(deserialized, dict))\n+        self.assertTrue(isinstance(deserialized['cat'], petstore_api.Cat))\n+        self.assertEqual(deserialized['cat']['color'], 'black')\n+\n+    def test_deserialize_cat_discard_unknown_properties(self):\n+        \"\"\" deserialize str, Cat) with unknown properties, discard unknown properties \"\"\"\n+        config = Configuration(discard_unknown_keys=True)\n+        api_client = petstore_api.ApiClient(config)\n+        data = {\n+            'cat': {\n+                \"class_name\": \"Cat\",\n+                \"color\": \"black\",\n+                \"declawed\": True,\n+                \"unknown_property\": \"a-value\",\n+                \"more-unknown\": [\n+                    \"a\"\n+                ]\n+            }\n+        }\n+        # The 'unknown_property' is undeclared, which would normally raise an exception, but\n+        # when discard_unknown_keys is set to True, the unknown properties are discarded.\n+        response = MockResponse(data=json.dumps(data))\n+        deserialized = api_client.deserialize(response,\n+            ({str: (petstore_api.Cat,)},), True)\n+        self.assertTrue(isinstance(deserialized, dict))\n+        self.assertTrue(isinstance(deserialized['cat'], petstore_api.Cat))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d304d8cdc868ce05b4facb94fec148d9545eeb4b"}, "originalPosition": 128}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNTc5Nzc1", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#pullrequestreview-361579775", "createdAt": "2020-02-20T01:30:23Z", "commit": {"oid": "d304d8cdc868ce05b4facb94fec148d9545eeb4b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwMTozMDoyNFrOFr98Jw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwMTozMDoyNFrOFr98Jw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTY0NzkxMQ==", "bodyText": "Can you an an assertion check to confirm that cat has additionalproperties instances\nand add a comment saying that this test case tests composed schema with additionalproperties", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#discussion_r381647911", "createdAt": "2020-02-20T01:30:24Z", "author": {"login": "spacether"}, "path": "samples/openapi3/client/petstore/python-experimental/tests/test_discard_unknown_properties.py", "diffHunk": "@@ -0,0 +1,129 @@\n+# coding: utf-8\n+\n+# flake8: noqa\n+\n+\"\"\"\n+Run the tests.\n+$ docker pull swaggerapi/petstore\n+$ docker run -d -e SWAGGER_HOST=http://petstore.swagger.io -e SWAGGER_BASE_PATH=/v2 -p 80:8080 swaggerapi/petstore\n+$ pip install nose (optional)\n+$ cd petstore_api-python\n+$ nosetests -v\n+\"\"\"\n+from collections import namedtuple\n+import json\n+import os\n+import re\n+import shutil\n+import unittest\n+from six.moves.urllib.parse import urlencode, urlparse\n+\n+import petstore_api\n+from petstore_api import Configuration, signing\n+from petstore_api.rest import (\n+    RESTClientObject,\n+    RESTResponse\n+)\n+\n+from petstore_api.model_utils import (\n+    file_type,\n+    int,\n+    model_to_dict,\n+    str,\n+)\n+\n+MockResponse = namedtuple('MockResponse', 'data')\n+\n+class DiscardUnknownPropertiesTests(unittest.TestCase):\n+\n+    def test_deserialize_dog_do_not_discard_unknown_properties(self):\n+        \"\"\" deserialize str, Dog) with unknown properties, strict validation is enabled \"\"\"\n+        config = Configuration(discard_unknown_keys=False)\n+        api_client = petstore_api.ApiClient(config)\n+        data = {\n+            'dog': {\n+                \"class_name\": \"Dog\",\n+                \"color\": \"black\",\n+                \"breed\": \"husky\",\n+                \"unknown_property\": \"a-value\"\n+            }\n+        }\n+        response = MockResponse(data=json.dumps(data))\n+\n+        # Deserializing with strict validation raises an exception because the 'unknown_property'\n+        # is undeclared.\n+        with self.assertRaises(Exception) as cm:\n+            deserialized = api_client.deserialize(response,\n+                ({str: (petstore_api.Dog,)},), True)\n+        self.assertTrue(re.match('.*Not all inputs were used.*unknown_property.*', str(cm.exception)),\n+            'Exception message: {0}'.format(str(cm.exception)))\n+\n+    def test_deserialize_dog_discard_unknown_properties(self):\n+        \"\"\" deserialize str, Dog) with unknown properties, discard unknown properties \"\"\"\n+        config = Configuration(discard_unknown_keys=True)\n+        api_client = petstore_api.ApiClient(config)\n+        data = {\n+            'dog': {\n+                \"class_name\": \"Dog\",\n+                \"color\": \"black\",\n+                \"breed\": \"husky\",\n+                \"unknown_property\": \"a-value\",\n+                \"more-unknown\": [\n+                    \"a\"\n+                ]\n+            }\n+        }\n+        # The 'unknown_property' is undeclared, which would normally raise an exception, but\n+        # when discard_unknown_keys is set to True, the unknown properties are discarded.\n+        response = MockResponse(data=json.dumps(data))\n+        deserialized = api_client.deserialize(response,\n+            ({str: (petstore_api.Dog,)},), True)\n+        self.assertTrue(isinstance(deserialized, dict))\n+        self.assertTrue(isinstance(deserialized['dog'], petstore_api.Dog))\n+\n+    def test_deserialize_cat_do_not_discard_unknown_properties(self):\n+        \"\"\" deserialize str, Cat) with unknown properties, strict validation is enabled \"\"\"\n+        config = Configuration(discard_unknown_keys=False)\n+        api_client = petstore_api.ApiClient(config)\n+        data = {\n+            'cat': {\n+                \"class_name\": \"Cat\",\n+                \"color\": \"black\",\n+                \"declawed\": True,\n+                \"dynamic-property\": 12345,\n+            }\n+        }\n+        response = MockResponse(data=json.dumps(data))\n+\n+        # Deserializing with strict validation does not raise an exception because the even though\n+        # the 'dynamic-property' is undeclared, the 'Cat' schema defines the additionalProperties\n+        # attribute.\n+        deserialized = api_client.deserialize(response,\n+            ({str: (petstore_api.Cat,)},), True)\n+        self.assertTrue(isinstance(deserialized, dict))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d304d8cdc868ce05b4facb94fec148d9545eeb4b"}, "originalPosition": 103}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNTgwNzgx", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#pullrequestreview-361580781", "createdAt": "2020-02-20T01:33:36Z", "commit": {"oid": "d304d8cdc868ce05b4facb94fec148d9545eeb4b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ac99289136a198e30faa57f69e97d20d7bdd8ac", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/6ac99289136a198e30faa57f69e97d20d7bdd8ac", "committedDate": "2020-02-21T16:00:50Z", "message": "Merge remote-tracking branch 'origin' into discard_unknown_keys"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e1e2e6fc060b6d04c91a1c71e4abf64a7145f55", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/1e1e2e6fc060b6d04c91a1c71e4abf64a7145f55", "committedDate": "2020-02-21T16:30:43Z", "message": "improve unit tests for discarding properties"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyNzcxMzE1", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#pullrequestreview-362771315", "createdAt": "2020-02-21T16:52:14Z", "commit": {"oid": "1e1e2e6fc060b6d04c91a1c71e4abf64a7145f55"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyOTYzOTY2", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5362#pullrequestreview-362963966", "createdAt": "2020-02-21T22:51:06Z", "commit": {"oid": "1e1e2e6fc060b6d04c91a1c71e4abf64a7145f55"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2818, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}