{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxNDcwNTU3", "number": 5643, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwODowMjoyN1rODvccog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMVQyMjozNDo1MVrODw_X8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxMDc1NzQ2OnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/DefaultCodegen.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QwODowMjoyN1rOGB3p9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQxMzowOTo1MlrOGH3bVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDYxMzYyMQ==", "bodyText": "I wonder if you can share a minimal spec to reproduce the issue fixed by this change?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5643#discussion_r404613621", "createdAt": "2020-04-07T08:02:27Z", "author": {"login": "wing328"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/DefaultCodegen.java", "diffHunk": "@@ -5482,13 +5482,20 @@ public CodegenParameter fromRequestBody(RequestBody body, Set<String> imports, S\n             setParameterNullable(codegenParameter, codegenProperty);\n         }\n \n+        addJsonSchemaForBodyRequestInCaseItsNotPresent(codegenParameter, body);\n+\n         // set the parameter's example value\n         // should be overridden by lang codegen\n         setParameterExampleValue(codegenParameter, body);\n \n         return codegenParameter;\n     }\n \n+    private void addJsonSchemaForBodyRequestInCaseItsNotPresent(CodegenParameter codegenParameter, RequestBody body){\n+        if(codegenParameter.jsonSchema == null)\n+            codegenParameter.jsonSchema = Json.pretty(body);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bf2636d67883a8e0ccf088bea9d20027fd12f65d"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDkwMTMzNQ==", "bodyText": "I commented on my phone, and this was attached at the PR level rather than response here. I'm duplicating my response here in case you didn't see it.\nThis affects every spec. You can see the current samples, none of which display body parameter information.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5643#discussion_r410901335", "createdAt": "2020-04-19T13:09:52Z", "author": {"login": "jimschubert"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/DefaultCodegen.java", "diffHunk": "@@ -5482,13 +5482,20 @@ public CodegenParameter fromRequestBody(RequestBody body, Set<String> imports, S\n             setParameterNullable(codegenParameter, codegenProperty);\n         }\n \n+        addJsonSchemaForBodyRequestInCaseItsNotPresent(codegenParameter, body);\n+\n         // set the parameter's example value\n         // should be overridden by lang codegen\n         setParameterExampleValue(codegenParameter, body);\n \n         return codegenParameter;\n     }\n \n+    private void addJsonSchemaForBodyRequestInCaseItsNotPresent(CodegenParameter codegenParameter, RequestBody body){\n+        if(codegenParameter.jsonSchema == null)\n+            codegenParameter.jsonSchema = Json.pretty(body);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDYxMzYyMQ=="}, "originalCommit": {"oid": "bf2636d67883a8e0ccf088bea9d20027fd12f65d"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUyNjk2NTYwOnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/resources/htmlDocs2/index.mustache", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMVQyMjozNDo1MVrOGEQiGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQxMzoxMDo0OVrOGH3dQA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzExODM2Mw==", "bodyText": "This does not cover array type, e.g.:\nschema:\n  type: array\n  items:\n    ref: '#/components/schemas/Pet'\nSo I had to add one more if statement:\n...\n} else if (schema.type === 'array' && schema.items != null && schema.items.$ref != null) {\n    schema.items = defsParser.$refs.get(schema.items.$ref);\n} else {\n    // line 450\n}", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5643#discussion_r407118363", "createdAt": "2020-04-11T22:34:51Z", "author": {"login": "astoialtsev"}, "path": "modules/openapi-generator/src/main/resources/htmlDocs2/index.mustache", "diffHunk": "@@ -416,7 +441,10 @@\n                                     <script>\n                                       $(document).ready(function() {\n                                         var schemaWrapper = {{{jsonSchema}}};\n-                                        var schema = schemaWrapper.schema;\n+                                        var schema = findNode('schema',schemaWrapper).schema;\n+                                        if (!schema) {\n+                                            schema = schemaWrapper.schema;\n+                                        }\n                                         if (schema.$ref != null) {\n                                           schema = defsParser.$refs.get(schema.$ref);\n                                         } else {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bf2636d67883a8e0ccf088bea9d20027fd12f65d"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDgyMjE3Nw==", "bodyText": "You're totally right. I tested it on two different versions of the OpenApi generator and on the older one there was no issue with arrays, so I didn't cover it up, but that's a great change.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5643#discussion_r410822177", "createdAt": "2020-04-19T05:35:10Z", "author": {"login": "degath"}, "path": "modules/openapi-generator/src/main/resources/htmlDocs2/index.mustache", "diffHunk": "@@ -416,7 +441,10 @@\n                                     <script>\n                                       $(document).ready(function() {\n                                         var schemaWrapper = {{{jsonSchema}}};\n-                                        var schema = schemaWrapper.schema;\n+                                        var schema = findNode('schema',schemaWrapper).schema;\n+                                        if (!schema) {\n+                                            schema = schemaWrapper.schema;\n+                                        }\n                                         if (schema.$ref != null) {\n                                           schema = defsParser.$refs.get(schema.$ref);\n                                         } else {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzExODM2Mw=="}, "originalCommit": {"oid": "bf2636d67883a8e0ccf088bea9d20027fd12f65d"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDkwMTgyNA==", "bodyText": "I've applied the suggested fix to this branch.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5643#discussion_r410901824", "createdAt": "2020-04-19T13:10:49Z", "author": {"login": "jimschubert"}, "path": "modules/openapi-generator/src/main/resources/htmlDocs2/index.mustache", "diffHunk": "@@ -416,7 +441,10 @@\n                                     <script>\n                                       $(document).ready(function() {\n                                         var schemaWrapper = {{{jsonSchema}}};\n-                                        var schema = schemaWrapper.schema;\n+                                        var schema = findNode('schema',schemaWrapper).schema;\n+                                        if (!schema) {\n+                                            schema = schemaWrapper.schema;\n+                                        }\n                                         if (schema.$ref != null) {\n                                           schema = defsParser.$refs.get(schema.$ref);\n                                         } else {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzExODM2Mw=="}, "originalCommit": {"oid": "bf2636d67883a8e0ccf088bea9d20027fd12f65d"}, "originalPosition": 43}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3675, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}