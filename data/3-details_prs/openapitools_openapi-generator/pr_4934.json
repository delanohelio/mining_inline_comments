{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5ODQyMjYy", "number": 4934, "title": "[Golang] Add support allOf inheritance with embedded go structs", "bodyText": "This PR addresses the following:\n\nThe generated go-experimental code is not compiling in some cases.\nUse an embedded struct to model the codegen parent\nThe instantiation type of a parent of \"map\" type is incorrect\n\nIn particular, the generated samples/openapi3/client/petstore/go-experimental/go-petstore/api_fake.go file has the following code:\n t := *r.pipe\n  if reflect.TypeOf(t).Kind() == reflect.Slice {\n     ....\n  }\n  ....\n  t := *r.context\n\nAs you can see, the same variable \"t\" is defined twice, which causes a compilation error:\ngo-petstore/api_fake.go:1782:4: no new variables on left side of :=\n\nThis PR depends on #5075.\n\nPR checklist\n\n Read the contribution guidelines.\n If contributing template-only or documentation-only changes which will change sample output, build the project before.\n Run the shell script(s) under ./bin/ (or Windows batch scripts under.\\bin\\windows) to update Petstore samples related to your fix. This is important, as CI jobs will verify all generator outputs of your HEAD commit, and these must match the expectations made by your contribution. You only need to run ./bin/{LANG}-petstore.sh, ./bin/openapi3/{LANG}-petstore.sh if updating the code or mustache templates for a language ({LANG}) (e.g. php, ruby, python, etc).\n File the PR against the correct branch: master, 4.3.x, 5.0.x. Default: master.\n Copy the technical committee to review the pull request if your PR is targeting a particular programming language.", "createdAt": "2020-01-07T06:18:50Z", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4934", "merged": true, "mergeCommit": {"oid": "20e5c5d6e714218b9d8a8441163df198eb3bf24d"}, "closed": true, "closedAt": "2020-02-01T14:44:16Z", "author": {"login": "sebastien-rosset"}, "timelineItems": {"totalCount": 23, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb4SuEfAFqTMzOTc1ODA3NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcAE1HRgFqTM1MTg4NzQ5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM5NzU4MDc0", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4934#pullrequestreview-339758074", "createdAt": "2020-01-08T10:03:03Z", "commit": {"oid": "23a51b4689f4565c7d41b41a3f125012ae5865d6"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxMDowMzowNFrOFbR_rw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wOFQxMDowMzo1M1rOFbSBJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDE1MDcwMw==", "bodyText": "Could you please provide a comment here on what this method does and why it does that? I think I understand it in the context of your PR, but if I was just looking at it in the codebase, I'd probably have no idea what's happening here and why.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4934#discussion_r364150703", "createdAt": "2020-01-08T10:03:04Z", "author": {"login": "bkabrda"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/AbstractGoCodegen.java", "diffHunk": "@@ -328,6 +329,16 @@ public String getSchemaType(Schema p) {\n             type = openAPIType;\n         return type;\n     }\n+    \n+    @Override\n+    public String toInstantiationType(Schema property) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23a51b4689f4565c7d41b41a3f125012ae5865d6"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDE1MTA3OA==", "bodyText": "Why is this change necessary? Is it to make sure that the scope of variables defined in this block is limited?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4934#discussion_r364151078", "createdAt": "2020-01-08T10:03:53Z", "author": {"login": "bkabrda"}, "path": "modules/openapi-generator/src/main/resources/go-experimental/api.mustache", "diffHunk": "@@ -134,14 +134,16 @@ func (a *{{{classname}}}Service) {{{nickname}}}(ctx _context.Context{{#hasParams\n \t{{#queryParams}}\n \t{{#required}}\n \t{{#isCollectionFormatMulti}}\n-\tt:={{paramName}}\n-\tif reflect.TypeOf(t).Kind() == reflect.Slice {\n-\t\ts := reflect.ValueOf(t)\n-\t\tfor i := 0; i < s.Len(); i++ {\n-\t\t\tlocalVarQueryParams.Add(\"{{baseName}}\", parameterToString(s.Index(i), \"{{#collectionFormat}}{{collectionFormat}}{{/collectionFormat}}\"))\n+\t{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "23a51b4689f4565c7d41b41a3f125012ae5865d6"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78c5f3106982e7f82d75c370500acfe69a33bf04", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/78c5f3106982e7f82d75c370500acfe69a33bf04", "committedDate": "2020-01-08T15:39:03Z", "message": "Golang: generate embedded structs and set supportsInheritance to true"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "777482a452d6d60bce408648cfc1bf24b9487790", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/777482a452d6d60bce408648cfc1bf24b9487790", "committedDate": "2020-01-08T14:49:26Z", "message": "Merge branch 'bugfix/issue4606-2' of github.com:CiscoM31/openapi-generator into bugfix/issue4606-2"}, "afterCommit": {"oid": "78c5f3106982e7f82d75c370500acfe69a33bf04", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/78c5f3106982e7f82d75c370500acfe69a33bf04", "committedDate": "2020-01-08T15:39:03Z", "message": "Golang: generate embedded structs and set supportsInheritance to true"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c3bd4ee022ad44ea07d3366f052a67dbd11422f", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/8c3bd4ee022ad44ea07d3366f052a67dbd11422f", "committedDate": "2020-01-08T16:58:01Z", "message": "Run bin/go-experimental-petstore.sh"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ccf4a8c71d2503dc3db1fd263b76350cc47e5029", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/ccf4a8c71d2503dc3db1fd263b76350cc47e5029", "committedDate": "2020-01-13T20:11:46Z", "message": "Merge remote-tracking branch 'origin' into bugfix/issue4606-2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01d54c07dc43c7ec088d7b814e5004d38b9a4a70", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/01d54c07dc43c7ec088d7b814e5004d38b9a4a70", "committedDate": "2020-01-16T04:33:17Z", "message": "merge from master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87f2df5a5aeb4f2fd226a9d8e43d65691e08c647", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/87f2df5a5aeb4f2fd226a9d8e43d65691e08c647", "committedDate": "2020-01-16T05:27:44Z", "message": "merge from master, fix formatting issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e64194c58ba35e59ddaa45fdea5967de9f5e5e9f", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/e64194c58ba35e59ddaa45fdea5967de9f5e5e9f", "committedDate": "2020-01-16T14:30:33Z", "message": "Merge remote-tracking branch 'origin' into bugfix/issue4606-2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01691ae873543261e44b441005b2c5dc6dd1f8c5", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/01691ae873543261e44b441005b2c5dc6dd1f8c5", "committedDate": "2020-01-19T03:44:17Z", "message": "Merge remote-tracking branch 'origin' into bugfix/issue4606-2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d5e74fcdf5da4aca4d01c3cb086a3f5acc5aa2e", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/7d5e74fcdf5da4aca4d01c3cb086a3f5acc5aa2e", "committedDate": "2020-01-19T23:34:47Z", "message": "Merge remote-tracking branch 'origin' into bugfix/issue4606-2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15afab9b1e94806c0fc3e2880a8d727953d199af", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/15afab9b1e94806c0fc3e2880a8d727953d199af", "committedDate": "2020-01-20T06:32:17Z", "message": "Merge remote-tracking branch 'origin' into bugfix/issue4606-2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d33a5e964514d544c206d995132304274c015c95", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/d33a5e964514d544c206d995132304274c015c95", "committedDate": "2020-01-20T06:47:52Z", "message": "add missing else statement, merge issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c334b832bcd1264397da4efd4d1994ee9ee7852", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/9c334b832bcd1264397da4efd4d1994ee9ee7852", "committedDate": "2020-01-20T06:49:10Z", "message": "add missing else statement, merge issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47ef41b7e680e7dc75bdd4c370c809e6b297bc59", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/47ef41b7e680e7dc75bdd4c370c809e6b297bc59", "committedDate": "2020-01-20T23:02:08Z", "message": "fix go doc issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b306e19b243214d78e7574a10287b9c16d2548d", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/1b306e19b243214d78e7574a10287b9c16d2548d", "committedDate": "2020-01-21T14:27:20Z", "message": "sync from mater"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46775d55e1874122b32d11a970b85fac595d922c", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/46775d55e1874122b32d11a970b85fac595d922c", "committedDate": "2020-01-22T01:07:20Z", "message": "Merge remote-tracking branch 'origin' into bugfix/issue4606-2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2670fb414cbf5dc1d47349b52f83e47daf26eaff", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/2670fb414cbf5dc1d47349b52f83e47daf26eaff", "committedDate": "2020-01-23T17:37:31Z", "message": "Merge remote-tracking branch 'origin' into bugfix/issue4606-2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca307505282620aaef9fd136d35a5803617fd732", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/ca307505282620aaef9fd136d35a5803617fd732", "committedDate": "2020-01-24T05:24:26Z", "message": "sync from master"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1703d24c91b2ba5a3ef6e3a93ab7d2c2b20afb31", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/1703d24c91b2ba5a3ef6e3a93ab7d2c2b20afb31", "committedDate": "2020-01-24T05:24:34Z", "message": "sync from master"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5MzM0MTI5", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4934#pullrequestreview-349334129", "createdAt": "2020-01-28T12:25:14Z", "commit": {"oid": "1703d24c91b2ba5a3ef6e3a93ab7d2c2b20afb31"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "16f563c93eaab84ae755170ad37e065ae4b9d077", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/16f563c93eaab84ae755170ad37e065ae4b9d077", "committedDate": "2020-01-31T19:02:42Z", "message": "Merge remote-tracking branch 'origin' into bugfix/issue4606-2"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxODg3NDM0", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4934#pullrequestreview-351887434", "createdAt": "2020-02-01T14:42:19Z", "commit": {"oid": "16f563c93eaab84ae755170ad37e065ae4b9d077"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQxNDo0MjoxOVrOFkd7Tw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQxNDo0MjoxOVrOFkd7Tw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc4MzM3NQ==", "bodyText": "This is very cool. I'm not a pro in Go by any means, but I've just learned about field promotion in anonymous nested structs. ;)", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4934#discussion_r373783375", "createdAt": "2020-02-01T14:42:19Z", "author": {"login": "jimschubert"}, "path": "samples/client/petstore/go-experimental/go-petstore/model_dog.go", "diffHunk": "@@ -16,59 +16,10 @@ import (\n \n // Dog struct for Dog\n type Dog struct {\n-\tClassName string `json:\"className\"`\n-\tColor *string `json:\"color,omitempty\"`\n+\tAnimal", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "16f563c93eaab84ae755170ad37e065ae4b9d077"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxODg3NDk2", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4934#pullrequestreview-351887496", "createdAt": "2020-02-01T14:43:43Z", "commit": {"oid": "16f563c93eaab84ae755170ad37e065ae4b9d077"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1924, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}