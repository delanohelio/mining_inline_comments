{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYyMjQzNjA2", "number": 4988, "title": "[Python] Conditionally set auth attributes", "bodyText": "Fix for #3844:\nDo not add auth parameter in HTTP request if auth parameter is set None\nAdd attribute to control which auth schemes can be used.\nCurrently, the python client obtains the list of security schemes that have been specified in the OAS spec, and automatically adds the authentication attributes in the header, cookie or query. This happens even if the parameters are unset. For example, the \"Authorization\" header may be set with an empty Bearer token:\n'Authorization': 'Bearer '\nWith this PR, the bearer access token is no longer set if its value is None.\nTests performed:\nUse OAS spec that specifies more than one security scheme for a given operation, e.g. OAuth2 and cookie\nGenerate the Python SDK using the master branch\nWrite a Python client that sets the cookie but not the OAuth2 access token\nInvoke the client and verifies both auth attributes have been set (causing auth failure)\nGenerate the Python SDK using code from this PR\nInvoke the client again, verify the auth parameters are set conditionally.\n\nPR checklist\n\n Read the contribution guidelines.\n If contributing template-only or documentation-only changes which will change sample output, build the project before.\n Run the shell script(s) under ./bin/ (or Windows batch scripts under.\\bin\\windows) to update Petstore samples related to your fix. This is important, as CI jobs will verify all generator outputs of your HEAD commit, and these must match the expectations made by your contribution. You only need to run ./bin/{LANG}-petstore.sh, ./bin/openapi3/{LANG}-petstore.sh if updating the code or mustache templates for a language ({LANG}) (e.g. php, ruby, python, etc).\n File the PR against the correct branch: master, 4.3.x, 5.0.x. Default: master.\n Copy the technical committee to review the pull request if your PR is targeting a particular programming language.", "createdAt": "2020-01-13T17:48:56Z", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4988", "merged": true, "mergeCommit": {"oid": "fa0ef2be25564b117e9301717e66e695c179488c"}, "closed": true, "closedAt": "2020-01-16T09:42:24Z", "author": {"login": "sebastien-rosset"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb6AFVnAH2gAyMzYyMjQzNjA2OmI1MWJiN2ZjYWNmNTI5N2E3Y2I2NDRmYjY2MGYyNGQ5YWM5ZmMwNWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-g0NEgFqTM0ODg3MDA3Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b51bb7fcacf5297a7cb644fb660f24d9ac9fc05f", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/b51bb7fcacf5297a7cb644fb660f24d9ac9fc05f", "committedDate": "2020-01-13T17:48:22Z", "message": "Enhance python API keys"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37f18d90cfdddec4acd245e209b7950c3fba81b6", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/37f18d90cfdddec4acd245e209b7950c3fba81b6", "committedDate": "2020-01-13T20:04:56Z", "message": "Merge branch 'master' of github.com:CiscoM31/openapi-generator into bugfix/issue3844-2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0daf07477ca95820ac4d0d84148d6f6a9af8e52", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/f0daf07477ca95820ac4d0d84148d6f6a9af8e52", "committedDate": "2020-01-13T21:19:07Z", "message": "Run python scripts under ./bin/openapi3"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80147a4304c4113838dead2ab7632bc01f6457d6", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/80147a4304c4113838dead2ab7632bc01f6457d6", "committedDate": "2020-01-14T16:22:14Z", "message": "fix unit test issue"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84611382222951a12270b3f14a90b7006b261c60", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/84611382222951a12270b3f14a90b7006b261c60", "committedDate": "2020-01-14T16:24:44Z", "message": "Merge branch 'master' of github.com:CiscoM31/openapi-generator into bugfix/issue3844-2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e7ae1e737c6381a016120b2e2a34dd19825b589", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/8e7ae1e737c6381a016120b2e2a34dd19825b589", "committedDate": "2020-01-14T17:27:05Z", "message": "Fix unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4353202f1ad6225ff12d4e7f322b0d19205ad81b", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/4353202f1ad6225ff12d4e7f322b0d19205ad81b", "committedDate": "2020-01-14T18:00:00Z", "message": "Fix unit tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "708a76c2df29c119f0b26988e2a1627dd89713ac", "author": {"user": {"login": "sebastien-rosset", "name": "Sebastien Rosset"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/708a76c2df29c119f0b26988e2a1627dd89713ac", "committedDate": "2020-01-14T19:10:18Z", "message": "Invoke bin scripts"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQzNDU3NjMx", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4988#pullrequestreview-343457631", "createdAt": "2020-01-15T19:16:17Z", "commit": {"oid": "708a76c2df29c119f0b26988e2a1627dd89713ac"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQzNzgyNjY1", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4988#pullrequestreview-343782665", "createdAt": "2020-01-16T09:42:18Z", "commit": {"oid": "708a76c2df29c119f0b26988e2a1627dd89713ac"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4ODcwMDcz", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4988#pullrequestreview-348870073", "createdAt": "2020-01-27T18:12:13Z", "commit": {"oid": "708a76c2df29c119f0b26988e2a1627dd89713ac"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxODoxMjoxM1rOFiMbRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxODoxMjoxM1rOFiMbRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTM5OTQ5Mw==", "bodyText": "This change breaks my client using openapi-generator-cli-5.0.0-20200127.021040-34.jar\nWe have api endpoints which allow Any Auth method. This function needs an overhaul, because it simply picks the last configured setting in the array, instead of the one which has actually been specified in the Configuration instance...\nPreserving this line makes the code do the right thing...\nif not auth_setting['value']:\n                continue", "url": "https://github.com/OpenAPITools/openapi-generator/pull/4988#discussion_r371399493", "createdAt": "2020-01-27T18:12:13Z", "author": {"login": "martyzz1"}, "path": "modules/openapi-generator/src/main/resources/python/api_client.mustache", "diffHunk": "@@ -520,9 +520,7 @@ class ApiClient(object):\n         for auth in auth_settings:\n             auth_setting = self.configuration.auth_settings().get(auth)\n             if auth_setting:\n-                if not auth_setting['value']:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "708a76c2df29c119f0b26988e2a1627dd89713ac"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1984, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}