{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAxMTIxMTQ3", "number": 7647, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMVQxMTozNTowOFrOEsX7Gg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMVQxOTowMToxMlrOEsaWZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE0OTY0NzYyOnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/resources/dart2/api.mustache", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMVQxMTozNTowOFrOHfmy8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMVQxNDozNjo0OFrOHfoB7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjkwMzUzNw==", "bodyText": "lol you like yoga syntax \ud83d\ude06\ncan we put the 204 in a const variable with proper name instead creating a magic number?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7647#discussion_r502903537", "createdAt": "2020-10-11T11:35:08Z", "author": {"login": "agilob"}, "path": "modules/openapi-generator/src/main/resources/dart2/api.mustache", "diffHunk": "@@ -165,7 +165,12 @@ class {{{classname}}} {\n     if (response.statusCode >= 400) {\n       throw ApiException(response.statusCode, _decodeBodyBytes(response));\n     }\n-    if (response.body != null) {\n+\n+    // When a remote server returns no body with a status of 204, we shall not decode it.\n+    // At the time of writing this, `dart:convert` will throw an \"Unexpected end of input\"\n+    // FormatException when trying to decode an empty string.\n+    final responseBody = response.body;\n+    if (responseBody != null && (responseBody.isNotEmpty || 204 != response.statusCode)) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32278ef0e018e97a9b68ff5cd36d8f595dbd650c"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjkwMzc2NQ==", "bodyText": "or even better, an interface/class with such magic numbers we can refer to in the future\nclass HttpCodes {\nint NO_BODY = 204;\n}\nThat's probably more effort than you were aiming here, but I feel it would be an investment into code quality for future.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7647#discussion_r502903765", "createdAt": "2020-10-11T11:37:20Z", "author": {"login": "agilob"}, "path": "modules/openapi-generator/src/main/resources/dart2/api.mustache", "diffHunk": "@@ -165,7 +165,12 @@ class {{{classname}}} {\n     if (response.statusCode >= 400) {\n       throw ApiException(response.statusCode, _decodeBodyBytes(response));\n     }\n-    if (response.body != null) {\n+\n+    // When a remote server returns no body with a status of 204, we shall not decode it.\n+    // At the time of writing this, `dart:convert` will throw an \"Unexpected end of input\"\n+    // FormatException when trying to decode an empty string.\n+    final responseBody = response.body;\n+    if (responseBody != null && (responseBody.isNotEmpty || 204 != response.statusCode)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjkwMzUzNw=="}, "originalCommit": {"oid": "32278ef0e018e97a9b68ff5cd36d8f595dbd650c"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjkxOTMxNA==", "bodyText": "Oops, yes yes I do :) I'll do that.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7647#discussion_r502919314", "createdAt": "2020-10-11T14:00:06Z", "author": {"login": "noordawod"}, "path": "modules/openapi-generator/src/main/resources/dart2/api.mustache", "diffHunk": "@@ -165,7 +165,12 @@ class {{{classname}}} {\n     if (response.statusCode >= 400) {\n       throw ApiException(response.statusCode, _decodeBodyBytes(response));\n     }\n-    if (response.body != null) {\n+\n+    // When a remote server returns no body with a status of 204, we shall not decode it.\n+    // At the time of writing this, `dart:convert` will throw an \"Unexpected end of input\"\n+    // FormatException when trying to decode an empty string.\n+    final responseBody = response.body;\n+    if (responseBody != null && (responseBody.isNotEmpty || 204 != response.statusCode)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjkwMzUzNw=="}, "originalCommit": {"oid": "32278ef0e018e97a9b68ff5cd36d8f595dbd650c"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjkyMzc1OA==", "bodyText": "There already exists such a class in http/html package: HttpStatus. Refactoring...", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7647#discussion_r502923758", "createdAt": "2020-10-11T14:36:48Z", "author": {"login": "noordawod"}, "path": "modules/openapi-generator/src/main/resources/dart2/api.mustache", "diffHunk": "@@ -165,7 +165,12 @@ class {{{classname}}} {\n     if (response.statusCode >= 400) {\n       throw ApiException(response.statusCode, _decodeBodyBytes(response));\n     }\n-    if (response.body != null) {\n+\n+    // When a remote server returns no body with a status of 204, we shall not decode it.\n+    // At the time of writing this, `dart:convert` will throw an \"Unexpected end of input\"\n+    // FormatException when trying to decode an empty string.\n+    final responseBody = response.body;\n+    if (responseBody != null && (responseBody.isNotEmpty || 204 != response.statusCode)) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjkwMzUzNw=="}, "originalCommit": {"oid": "32278ef0e018e97a9b68ff5cd36d8f595dbd650c"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1MDA0NTE2OnYy", "diffSide": "LEFT", "path": "samples/client/petstore/dart2/petstore_client_lib/lib/api_helper.dart", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMVQxOTowMToxMlrOHfp0PA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQwNToxNzoyNVrOHfvUuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjk1MzAyMA==", "bodyText": "This is getting complex fast", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7647#discussion_r502953020", "createdAt": "2020-10-11T19:01:12Z", "author": {"login": "agilob"}, "path": "samples/client/petstore/dart2/petstore_client_lib/lib/api_helper.dart", "diffHunk": "@@ -56,6 +56,6 @@ String parameterToString(dynamic value) {\n String _decodeBodyBytes(Response response) {\n   final contentType = response.headers['content-type'];\n   return contentType != null && contentType.contains('application/json')\n-    ? utf8.decode(response.bodyBytes)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6464d7ad43383c42e8b436ea3b41143c54ff4c9a"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA0MzI1Ng==", "bodyText": "Hmm, I checked and it's not what you see above. Now that line shows:\n  ? response.bodyBytes == null ? null : utf8.decode(response.bodyBytes)", "url": "https://github.com/OpenAPITools/openapi-generator/pull/7647#discussion_r503043256", "createdAt": "2020-10-12T05:17:25Z", "author": {"login": "noordawod"}, "path": "samples/client/petstore/dart2/petstore_client_lib/lib/api_helper.dart", "diffHunk": "@@ -56,6 +56,6 @@ String parameterToString(dynamic value) {\n String _decodeBodyBytes(Response response) {\n   final contentType = response.headers['content-type'];\n   return contentType != null && contentType.contains('application/json')\n-    ? utf8.decode(response.bodyBytes)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjk1MzAyMA=="}, "originalCommit": {"oid": "6464d7ad43383c42e8b436ea3b41143c54ff4c9a"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4152, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}