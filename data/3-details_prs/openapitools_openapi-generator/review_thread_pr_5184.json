{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5ODQwNzIw", "number": 5184, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQwMjozNzoyNFrODcZhpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQwMjo1ODozN1rODcZk3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMTA0OTM1OnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/utils/ModelUtils.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQwMjozNzoyNFrOFkcBHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQwMjozNzoyNFrOFkcBHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc1MjA5NA==", "bodyText": "This type of warning tends to be buried among other informational log messages, but it is crucial to how codegen processes the OAS.\nAs a suggested future enhancement, the tool should generate a list of warnings that can be output to a structured format, such as JSON. The very last log message should be a summary of the warnings, with a way to get the list of warnings.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5184#discussion_r373752094", "createdAt": "2020-02-01T02:37:24Z", "author": {"login": "sebastien-rosset"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/utils/ModelUtils.java", "diffHunk": "@@ -791,15 +791,37 @@ public static Schema getSchemaFromResponse(ApiResponse response) {\n         return getSchemaFromContent(response.getContent());\n     }\n \n+    /**\n+     * Return the first Schema from a specified OAS 'content' section.\n+     * \n+     * For example, given the following OAS, this method returns the schema\n+     * for the 'application/json' content type because it is listed first in the OAS.\n+     * \n+     * responses:\n+     *   '200':\n+     *     content:\n+     *       application/json:\n+     *         schema:\n+     *           $ref: '#/components/schemas/XYZ'\n+     *       application/xml:\n+     *          ...\n+     *   \n+     * @param content a 'content' section in the OAS specification. \n+     * @return the Schema.\n+     */\n     private static Schema getSchemaFromContent(Content content) {\n         if (content == null || content.isEmpty()) {\n             return null;\n         }\n+        Map.Entry<String, MediaType> entry = content.entrySet().iterator().next();\n+        MediaType mediaType = content.values().iterator().next();\n         if (content.size() > 1) {\n-            LOGGER.warn(\"Multiple schemas found in content, returning only the first one\");\n+            // Other content types are currently ignored by codegen. If you see this warning,\n+            // reorder the OAS spec to put the desired content type first.\n+            LOGGER.warn(\"Multiple schemas found in the OAS 'content' section, returning only the first one ('\" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "36bd38bd8118f7ceb3d2b4b23ec6d0415b1e401d"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMTA1Mjk1OnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/utils/ModelUtils.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQwMjo0NzoxNFrOFkcDGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQwMjo0NzoxNFrOFkcDGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc1MjYwMA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        LOGGER.warn(\"Multiple schemas found in the OAS 'content' section, returning only the first one ('\" +\n          \n          \n            \n                        LOGGER.warn(\"Multiple schemas found in the OAS 'content' section, returning only the first one ({})\", entry.getKey());\n          \n      \n    \n    \n  \n\nUsing String.format syntax means the string isn't formatted with entry.getKey() if the log level is above warn.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5184#discussion_r373752600", "createdAt": "2020-02-01T02:47:14Z", "author": {"login": "jimschubert"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/utils/ModelUtils.java", "diffHunk": "@@ -791,15 +791,37 @@ public static Schema getSchemaFromResponse(ApiResponse response) {\n         return getSchemaFromContent(response.getContent());\n     }\n \n+    /**\n+     * Return the first Schema from a specified OAS 'content' section.\n+     * \n+     * For example, given the following OAS, this method returns the schema\n+     * for the 'application/json' content type because it is listed first in the OAS.\n+     * \n+     * responses:\n+     *   '200':\n+     *     content:\n+     *       application/json:\n+     *         schema:\n+     *           $ref: '#/components/schemas/XYZ'\n+     *       application/xml:\n+     *          ...\n+     *   \n+     * @param content a 'content' section in the OAS specification. \n+     * @return the Schema.\n+     */\n     private static Schema getSchemaFromContent(Content content) {\n         if (content == null || content.isEmpty()) {\n             return null;\n         }\n+        Map.Entry<String, MediaType> entry = content.entrySet().iterator().next();\n+        MediaType mediaType = content.values().iterator().next();\n         if (content.size() > 1) {\n-            LOGGER.warn(\"Multiple schemas found in content, returning only the first one\");\n+            // Other content types are currently ignored by codegen. If you see this warning,\n+            // reorder the OAS spec to put the desired content type first.\n+            LOGGER.warn(\"Multiple schemas found in the OAS 'content' section, returning only the first one ('\" +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "36bd38bd8118f7ceb3d2b4b23ec6d0415b1e401d"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMTA1MzAwOnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/utils/ModelUtils.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQwMjo0NzoyOVrOFkcDJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQwMjo0NzoyOVrOFkcDJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc1MjYxMg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            entry.getKey() + \"')\");\n          \n      \n    \n    \n  \n\nWrapped line isn't need if prev suggestion is accepted.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5184#discussion_r373752612", "createdAt": "2020-02-01T02:47:29Z", "author": {"login": "jimschubert"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/utils/ModelUtils.java", "diffHunk": "@@ -791,15 +791,37 @@ public static Schema getSchemaFromResponse(ApiResponse response) {\n         return getSchemaFromContent(response.getContent());\n     }\n \n+    /**\n+     * Return the first Schema from a specified OAS 'content' section.\n+     * \n+     * For example, given the following OAS, this method returns the schema\n+     * for the 'application/json' content type because it is listed first in the OAS.\n+     * \n+     * responses:\n+     *   '200':\n+     *     content:\n+     *       application/json:\n+     *         schema:\n+     *           $ref: '#/components/schemas/XYZ'\n+     *       application/xml:\n+     *          ...\n+     *   \n+     * @param content a 'content' section in the OAS specification. \n+     * @return the Schema.\n+     */\n     private static Schema getSchemaFromContent(Content content) {\n         if (content == null || content.isEmpty()) {\n             return null;\n         }\n+        Map.Entry<String, MediaType> entry = content.entrySet().iterator().next();\n+        MediaType mediaType = content.values().iterator().next();\n         if (content.size() > 1) {\n-            LOGGER.warn(\"Multiple schemas found in content, returning only the first one\");\n+            // Other content types are currently ignored by codegen. If you see this warning,\n+            // reorder the OAS spec to put the desired content type first.\n+            LOGGER.warn(\"Multiple schemas found in the OAS 'content' section, returning only the first one ('\" +\n+                entry.getKey() + \"')\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "36bd38bd8118f7ceb3d2b4b23ec6d0415b1e401d"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMTA1NzE1OnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/utils/ModelUtils.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQwMjo1Nzo0M1rOFkcFSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQwMjo1Nzo0M1rOFkcFSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc1MzE2MA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    MediaType mediaType = content.values().iterator().next();\n          \n          \n            \n                    MediaType mediaType = entry.getValue();\n          \n      \n    \n    \n  \n\nNo need for created the new collection, iterator, and iteration if you've jut done the same on the previous line ;)", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5184#discussion_r373753160", "createdAt": "2020-02-01T02:57:43Z", "author": {"login": "jimschubert"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/utils/ModelUtils.java", "diffHunk": "@@ -791,15 +791,37 @@ public static Schema getSchemaFromResponse(ApiResponse response) {\n         return getSchemaFromContent(response.getContent());\n     }\n \n+    /**\n+     * Return the first Schema from a specified OAS 'content' section.\n+     * \n+     * For example, given the following OAS, this method returns the schema\n+     * for the 'application/json' content type because it is listed first in the OAS.\n+     * \n+     * responses:\n+     *   '200':\n+     *     content:\n+     *       application/json:\n+     *         schema:\n+     *           $ref: '#/components/schemas/XYZ'\n+     *       application/xml:\n+     *          ...\n+     *   \n+     * @param content a 'content' section in the OAS specification. \n+     * @return the Schema.\n+     */\n     private static Schema getSchemaFromContent(Content content) {\n         if (content == null || content.isEmpty()) {\n             return null;\n         }\n+        Map.Entry<String, MediaType> entry = content.entrySet().iterator().next();\n+        MediaType mediaType = content.values().iterator().next();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "36bd38bd8118f7ceb3d2b4b23ec6d0415b1e401d"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMTA1NzU2OnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/utils/ModelUtils.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQwMjo1ODozN1rOFkcFeg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQwMjo1ODozN1rOFkcFeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc1MzIxMA==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return entry.getValue().getSchema();\n          \n          \n            \n                    return mediaType.getSchema();", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5184#discussion_r373753210", "createdAt": "2020-02-01T02:58:37Z", "author": {"login": "jimschubert"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/utils/ModelUtils.java", "diffHunk": "@@ -791,15 +791,37 @@ public static Schema getSchemaFromResponse(ApiResponse response) {\n         return getSchemaFromContent(response.getContent());\n     }\n \n+    /**\n+     * Return the first Schema from a specified OAS 'content' section.\n+     * \n+     * For example, given the following OAS, this method returns the schema\n+     * for the 'application/json' content type because it is listed first in the OAS.\n+     * \n+     * responses:\n+     *   '200':\n+     *     content:\n+     *       application/json:\n+     *         schema:\n+     *           $ref: '#/components/schemas/XYZ'\n+     *       application/xml:\n+     *          ...\n+     *   \n+     * @param content a 'content' section in the OAS specification. \n+     * @return the Schema.\n+     */\n     private static Schema getSchemaFromContent(Content content) {\n         if (content == null || content.isEmpty()) {\n             return null;\n         }\n+        Map.Entry<String, MediaType> entry = content.entrySet().iterator().next();\n+        MediaType mediaType = content.values().iterator().next();\n         if (content.size() > 1) {\n-            LOGGER.warn(\"Multiple schemas found in content, returning only the first one\");\n+            // Other content types are currently ignored by codegen. If you see this warning,\n+            // reorder the OAS spec to put the desired content type first.\n+            LOGGER.warn(\"Multiple schemas found in the OAS 'content' section, returning only the first one ('\" +\n+                entry.getKey() + \"')\");\n         }\n-        MediaType mediaType = content.values().iterator().next();\n-        return mediaType.getSchema();\n+        return entry.getValue().getSchema();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "36bd38bd8118f7ceb3d2b4b23ec6d0415b1e401d"}, "originalPosition": 37}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3899, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}