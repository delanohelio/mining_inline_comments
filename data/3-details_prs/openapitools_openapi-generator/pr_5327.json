{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1NjE2NDE4", "number": 5327, "title": "[Kotlin][Client] Enum toString handling", "bodyText": "I have noticed that in certain cases, the enum usage for path parameter and url query parameter is incorrectly implemented.\nIn the case I have an enum with MY_ENUM(\"MyEnum\") and I am using the enum as a path parameter. The path would look like that \"myPath/.../MY_ENUM/...\". This request would always fail. That is due to the different enum value than the server would expect.\nTo fix this issue, I suggest we add a custom toString to every enum class so that we will not use the enum var name but the value. That way the path would look like this \"myPath/.../MyEnum/...\".\nChanges made with this PR:\n\nAdded custom toString to the enum class script.\n\n\nPR checklist\n\n Read the contribution guidelines.\n If contributing template-only or documentation-only changes which will change sample output, build the project before.\n Run the shell script(s) under ./bin/ (or Windows batch scripts under.\\bin\\windows) to update Petstore samples related to your fix. This is important, as CI jobs will verify all generator outputs of your HEAD commit, and these must match the expectations made by your contribution. You only need to run ./bin/{LANG}-petstore.sh, ./bin/openapi3/{LANG}-petstore.sh if updating the code or mustache templates for a language ({LANG}) (e.g. php, ruby, python, etc).\n File the PR against the correct branch: master, 4.3.x, 5.0.x. Default: master.\n Copy the technical committee to review the pull request if your PR is targeting a particular programming language.\n\n@jimschubert (2017/09) \u2764\ufe0f, @dr4ke616 (2018/08) @karismann (2019/03) @Zomzog (2019/04) @andrewemery (2019/10) @4brunu (2019/11)", "createdAt": "2020-02-14T23:36:23Z", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5327", "merged": true, "mergeCommit": {"oid": "a7f2791783325568698c4a9e82abea0aa8a8320c"}, "closed": true, "closedAt": "2020-02-19T02:30:14Z", "author": {"login": "Mordag"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcEYGTRgH2gAyMzc1NjE2NDE4OmZlOGUyZjQ1ZGZlYWE1YmQyYzgzMmNkZjBiNTZhNDdlMzYwNWQ3NWM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFiHCpAFqTM2MDM0MzQyNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fe8e2f45dfeaa5bd2c832cdf0b56a47e3605d75c", "author": {"user": {"login": "Mordag", "name": "Alexander Eggers"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/fe8e2f45dfeaa5bd2c832cdf0b56a47e3605d75c", "committedDate": "2020-02-14T23:26:23Z", "message": "Added toString to enum_class script\n\nThis toString avoids using the enum var name and uses the enum's value instead. This will fix cases when enum var name and value are quite different."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5NDUzOTk0", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5327#pullrequestreview-359453994", "createdAt": "2020-02-17T01:49:50Z", "commit": {"oid": "fe8e2f45dfeaa5bd2c832cdf0b56a47e3605d75c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QwMTo0OTo1MFrOFqWwWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QwMTo0OTo1MFrOFqWwWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk1NzMzNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return value\n          \n          \n            \n                    return value{{^isString}}.toString(){{/isString}}", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5327#discussion_r379957337", "createdAt": "2020-02-17T01:49:50Z", "author": {"login": "jimschubert"}, "path": "modules/openapi-generator/src/main/resources/kotlin-client/enum_class.mustache", "diffHunk": "@@ -41,6 +41,14 @@ import kotlinx.serialization.internal.CommonEnumSerializer\n \n {{/enumVars}}{{/allowableValues}}\n \n+\t/**\n+\tThis override toString avoids using the enum var name and uses the actual api value instead.\n+\tIn cases the var name and value are different, the client would send incorrect enums to the server.\n+\t**/\n+\toverride fun toString(): String {\n+        return value", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe8e2f45dfeaa5bd2c832cdf0b56a47e3605d75c"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5NDU0Mzkw", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5327#pullrequestreview-359454390", "createdAt": "2020-02-17T01:52:08Z", "commit": {"oid": "fe8e2f45dfeaa5bd2c832cdf0b56a47e3605d75c"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea1f036aa16df10e232d953a354ac3236fafd887", "author": {"user": {"login": "Mordag", "name": "Alexander Eggers"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/ea1f036aa16df10e232d953a354ac3236fafd887", "committedDate": "2020-02-17T09:25:44Z", "message": "Updated enum template\n\nCo-Authored-By: Jim Schubert <james.schubert@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwMzQzNDI1", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5327#pullrequestreview-360343425", "createdAt": "2020-02-18T13:40:10Z", "commit": {"oid": "ea1f036aa16df10e232d953a354ac3236fafd887"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2803, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}