{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI1MDM2OTk5", "number": 6489, "title": "[Typescript] Support InversifyJS", "bodyText": "To be able to use the new typescript generator as a replacement for the existing typescript-inversify generator, we need to add a few things. This PR does just that.\nThis is not a 1:1 replacement. Instead I have tried to incorporate my experience with using typescript-inversify and not pollute the templates too much.\nThe option for enabling this functionality is called useInversify.\nI had to change the way the SecurityAuthentication objects are generated in order to allow injecting parameters into them.\nNormally we should depend on abstractions (interfaces), not implementations, so I added some interfaces. For <service>RequestFactory and <service>ResponseProcessor this seemed like overkill though.\nAbstract classes are used as service identifiers. This has the advantage that during binding the types can be checked automatically and they are compiled into just an empty object.\nIt would be nice to have tests here, though I'm not quite sure where to put them. Just create a new sample with useInversify enabled and copy the default test setup? @TiFu\nMy previous PR #6425, is still included here, so if that is merged I can rebase.\n\nPR checklist\n\n Read the contribution guidelines.\n If contributing template-only or documentation-only changes which will change sample output, build the project before.\n Run the shell script(s) under ./bin/ (or Windows batch scripts under.\\bin\\windows) to update Petstore samples related to your fix. This is important, as CI jobs will verify all generator outputs of your HEAD commit, and these must match the expectations made by your contribution. You only need to run ./bin/{LANG}-petstore.sh, ./bin/openapi3/{LANG}-petstore.sh if updating the code or mustache templates for a language ({LANG}) (e.g. php, ruby, python, etc).\n File the PR against the correct branch: master, 4.3.x, 5.0.x. Default: master.\n Copy the technical committee to review the pull request if your PR is targeting a particular programming language.\n\nCC @TiFu\nCC TS Committee @taxpon (2017/07) @sebastianhaas (2017/07) @kenisteward (2017/07) @Vrolijkx (2017/09) @macjohnny (2018/01) @topce (2018/10) @akehir (2019/07) @petejohansonxo (2019/11) @amakhrov (2020/02)\nPossible next steps\n\nBind to provider and dynamic import\nMore convenience method on the ApiServiceBinder", "createdAt": "2020-05-29T11:03:11Z", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6489", "merged": true, "mergeCommit": {"oid": "4608264a12096ba11698a7aaf4d076f4621a0a8f"}, "closed": true, "closedAt": "2020-06-13T19:26:08Z", "author": {"login": "bodograumann"}, "timelineItems": {"totalCount": 30, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcmIuHegFqTQyMTI3Mjc3Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcqcoo_AH2gAyNDI1MDM2OTk5OjQxZjVlM2U2NzEzZmUyYzFkYjAzYzYxNjk4MDVmMjAyN2U2MGQ2ZDA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMjcyNzc3", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6489#pullrequestreview-421272777", "createdAt": "2020-05-29T20:38:59Z", "commit": {"oid": "8a3efb049b3393e980b69f1a120fc2ad0a232834"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQyMDozODo1OVrOGcrX0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQyMDo0NDoyMFrOGcrgqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjcyMzkyMw==", "bodyText": "Is this a change from master?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6489#discussion_r432723923", "createdAt": "2020-05-29T20:38:59Z", "author": {"login": "TiFu"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/DefaultCodegen.java", "diffHunk": "@@ -333,7 +333,8 @@ public void processOpts() {\n                 .put(\"lowercase\", new LowercaseLambda().generator(this))\n                 .put(\"uppercase\", new UppercaseLambda())\n                 .put(\"titlecase\", new TitlecaseLambda())\n-                .put(\"camelcase\", new CamelCaseLambda().generator(this))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a3efb049b3393e980b69f1a120fc2ad0a232834"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjcyNjE4Nw==", "bodyText": "Is this something we can just provide in any generator? Doesn't seem to be inversify specific.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6489#discussion_r432726187", "createdAt": "2020-05-29T20:44:20Z", "author": {"login": "TiFu"}, "path": "modules/openapi-generator/src/main/resources/typescript/http/servers.mustache", "diffHunk": "@@ -55,3 +51,7 @@ export class ServerConfiguration<T> {\n {{#servers}}\n export const server{{-index}} = new ServerConfiguration<{ {{#variables}} \"{{name}}\": {{#enumValues}}\"{{.}}\"{{^-last}} | {{/-last}}{{/enumValues}}{{^enumValues}}string{{/enumValues}}{{^-last}},{{/-last}} {{/variables}} }>(\"{{url}}\", { {{#variables}} \"{{name}}\": \"{{defaultValue}}\" {{^-last}},{{/-last}}{{/variables}} })\n {{/servers}}\n+\n+{{#useInversify}}\n+export const servers = [{{#servers}}server{{-index}}{{^-last}}, {{/-last}}{{/servers}}];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a3efb049b3393e980b69f1a120fc2ad0a232834"}, "originalPosition": 61}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "709c95a23a8f6adbda967154a48a8c22b5e4f842", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/709c95a23a8f6adbda967154a48a8c22b5e4f842", "committedDate": "2020-06-08T12:33:33Z", "message": "Add config option to enable InversifyJS"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ae13a704444dd7846697ed4111eeabf39f3cddb", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/0ae13a704444dd7846697ed4111eeabf39f3cddb", "committedDate": "2020-06-08T12:33:37Z", "message": "Add pascal case lambda for mustache"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3936fcb5a5900610059bd8ad2a7e196a54ab88b", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/e3936fcb5a5900610059bd8ad2a7e196a54ab88b", "committedDate": "2020-06-08T12:42:04Z", "message": "Generate a class for each auth method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7df951158e4334a6c6ddbeaef8ae658891e50cd8", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/7df951158e4334a6c6ddbeaef8ae658891e50cd8", "committedDate": "2020-06-08T13:02:17Z", "message": "Add service identifiers and service binder helper"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5822900c406ac4ffa7c9c83db20b94caf2c284ab", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/5822900c406ac4ffa7c9c83db20b94caf2c284ab", "committedDate": "2020-06-08T13:11:38Z", "message": "Split Configuration into interface and factory\n\nThis way we don't need to import the factory everywhere to do\ntypechecking."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "22e254509b3cdd900f14c7d187f9ca5db3b2a7e7", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/22e254509b3cdd900f14c7d187f9ca5db3b2a7e7", "committedDate": "2020-06-08T13:11:42Z", "message": "Define minimal interface for ServerConfiguration"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e199ca8b5086f3f363840acc89dc707dc12689b1", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/e199ca8b5086f3f363840acc89dc707dc12689b1", "committedDate": "2020-06-08T13:18:07Z", "message": "Add annotations for inversify when enabled"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b711b092f2e979b608887f3b5597cde050ec152", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/0b711b092f2e979b608887f3b5597cde050ec152", "committedDate": "2020-06-08T13:21:49Z", "message": "Always expose list of server configurations"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8a3efb049b3393e980b69f1a120fc2ad0a232834", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/8a3efb049b3393e980b69f1a120fc2ad0a232834", "committedDate": "2020-05-29T10:36:04Z", "message": "Add annotations for inversify when enabled"}, "afterCommit": {"oid": "0b711b092f2e979b608887f3b5597cde050ec152", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/0b711b092f2e979b608887f3b5597cde050ec152", "committedDate": "2020-06-08T13:21:49Z", "message": "Always expose list of server configurations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c8caf654fd42a1f61b92630e68c4dc780b1c996", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/7c8caf654fd42a1f61b92630e68c4dc780b1c996", "committedDate": "2020-06-10T11:38:08Z", "message": "Add samples and defalt tests for useInversify"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63313bd2a0b42aaa34179f401141caeaa42d0b45", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/63313bd2a0b42aaa34179f401141caeaa42d0b45", "committedDate": "2020-06-10T11:45:57Z", "message": "Simplify sample generation script"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d744995844e2eab1ca1408d77ad5ea86336d0057", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/d744995844e2eab1ca1408d77ad5ea86336d0057", "committedDate": "2020-06-10T12:08:52Z", "message": "Fix: Add object_params arg description to help"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8568973fbb5c3202f609c3e14e72fa30d71bd815", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/8568973fbb5c3202f609c3e14e72fa30d71bd815", "committedDate": "2020-06-10T12:12:59Z", "message": "Fix: Properly enable inversify with bool property"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8919300b32634f6d241e7521980700633ddab99e", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/8919300b32634f6d241e7521980700633ddab99e", "committedDate": "2020-06-10T12:31:12Z", "message": "Build tests in pom instead of prepublish\n\nOtherwise running `npm install`, when the build failed was impossible."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f42dcf377745cc821a9eb2b202f6a252458ccde", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/2f42dcf377745cc821a9eb2b202f6a252458ccde", "committedDate": "2020-06-10T12:35:27Z", "message": "Update dependencies for inversify tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7748c3c305b315ea1e19ff22c40e585a2966e6de", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/7748c3c305b315ea1e19ff22c40e585a2966e6de", "committedDate": "2020-06-10T12:46:44Z", "message": "Test basic api service resolution"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8bcabad1f0ea8f7a011e17c0dedf72e5cf0dbacd", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/8bcabad1f0ea8f7a011e17c0dedf72e5cf0dbacd", "committedDate": "2020-06-10T13:22:15Z", "message": "Remove Promise and Observable prefix from exports"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94cab7253f593bbd19d257c0cfc39e175a924387", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/94cab7253f593bbd19d257c0cfc39e175a924387", "committedDate": "2020-06-10T13:51:39Z", "message": "Fix, RxJS: Import Observable in object params api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76ea485110a6ce7b518914c2bee5f47b2efa548d", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/76ea485110a6ce7b518914c2bee5f47b2efa548d", "committedDate": "2020-06-10T14:22:52Z", "message": "Add ioc service identifier for object param api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "abe3aa7b65a883c6792f25dd770510f211000e65", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/abe3aa7b65a883c6792f25dd770510f211000e65", "committedDate": "2020-06-10T14:23:36Z", "message": "Add hint about unimpeded development"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32041a02453be00eb00cdcc9f117747ccf82d280", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/32041a02453be00eb00cdcc9f117747ccf82d280", "committedDate": "2020-06-11T07:43:54Z", "message": "Simplify api service binder syntax"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e630e4c9f2eeabb03a03e50d4ea8517c59110e21", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/e630e4c9f2eeabb03a03e50d4ea8517c59110e21", "committedDate": "2020-06-11T07:44:13Z", "message": "Remove default tests for inversify"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "07b93ecd37fa407d2ed6e4ce68a2c4d170c29123", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/07b93ecd37fa407d2ed6e4ce68a2c4d170c29123", "committedDate": "2020-06-11T08:33:22Z", "message": "Add wrapper for easy promise based http libraries\n\nThis wrapper allows defining and injecting http libraries that do not\nneed to know anything about observables, especially when useRxJS is not\nenabled. I will employ this in the tests for InversifyJS.\n\nNot sure if we should also use this wrapper internally."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e882b25ba28d8f61b5701a3b6d7a07d3074f2451", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/e882b25ba28d8f61b5701a3b6d7a07d3074f2451", "committedDate": "2020-06-11T09:55:54Z", "message": "Add named injects for remaining auth parameters"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81660b7b58c58acf24b8f3ac8027bc5fd2ecd3f3", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/81660b7b58c58acf24b8f3ac8027bc5fd2ecd3f3", "committedDate": "2020-06-11T10:50:19Z", "message": "Directly inject promise services without RxJS"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2fcc832c115e651b5054fb3ecaed3eff6a24228f", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/2fcc832c115e651b5054fb3ecaed3eff6a24228f", "committedDate": "2020-06-11T10:51:30Z", "message": "Add tests for api service binder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fbe970513df36dca0edb95aefc1c047b10b41653", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/fbe970513df36dca0edb95aefc1c047b10b41653", "committedDate": "2020-06-11T11:40:29Z", "message": "Add convenience method to bind all api services"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f10bab1a722fd9173a9e6934ac0079f43bccb061", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/f10bab1a722fd9173a9e6934ac0079f43bccb061", "committedDate": "2020-06-12T06:08:43Z", "message": "Fix: Rename inversify test artifact"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "41f5e3e6713fe2c1db03c6169805f2027e60d6d0", "author": {"user": {"login": "bodograumann", "name": "Bodo Graumann"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/41f5e3e6713fe2c1db03c6169805f2027e60d6d0", "committedDate": "2020-06-12T06:12:38Z", "message": "Run bin/utils/copy-to-website.sh"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2172, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}