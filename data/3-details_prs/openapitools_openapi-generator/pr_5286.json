{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczNjgzODgz", "number": 5286, "title": "[kotlin][client] improve debug experience", "bodyText": "Currently when a server error occurs, it always returns a null message.\nSince the message is always null, it shows the message \"Server Error\" which it's not very helpful for debugging proposes.\nIn this PR, I propose that we return the server response instead of the null message.\nPR checklist\n\n Read the contribution guidelines.\n If contributing template-only or documentation-only changes which will change sample output, build the project before.\n Run the shell script(s) under ./bin/ (or Windows batch scripts under.\\bin\\windows) to update Petstore samples related to your fix. This is important, as CI jobs will verify all generator outputs of your HEAD commit, and these must match the expectations made by your contribution. You only need to run ./bin/{LANG}-petstore.sh, ./bin/openapi3/{LANG}-petstore.sh if updating the code or mustache templates for a language ({LANG}) (e.g. php, ruby, python, etc).\n File the PR against the correct branch: master, 4.3.x, 5.0.x. Default: master.\n Copy the technical committee to review the pull request if your PR is targeting a particular programming language.\n\n@jimschubert (2017/09) \u2764\ufe0f, @dr4ke616 (2018/08) @karismann (2019/03) @Zomzog (2019/04) @andrewemery (2019/10) @4brunu (2019/11)", "createdAt": "2020-02-11T14:17:24Z", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5286", "merged": true, "mergeCommit": {"oid": "ffb196151fba52f7402039f1b432aac1b22522bb"}, "closed": true, "closedAt": "2020-02-16T16:00:15Z", "author": {"login": "4brunu"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDSXIsgH2gAyMzczNjgzODgzOmE5OGYzZjNhNzZkNjBkM2M1OGEyYjU4ZjlmZjhmOTE0OWJjZTc4ZDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcE65SngFqTM1OTQxMjYyNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a98f3f3a76d60d3c58a2b58f9ff8f9149bce78d1", "author": {"user": {"login": "4brunu", "name": "Bruno Coelho"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/a98f3f3a76d60d3c58a2b58f9ff8f9149bce78d1", "committedDate": "2020-02-11T14:11:25Z", "message": "[kotlin][client] remove null message on server error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3ODc4ODQy", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5286#pullrequestreview-357878842", "createdAt": "2020-02-13T00:14:19Z", "commit": {"oid": "a98f3f3a76d60d3c58a2b58f9ff8f9149bce78d1"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QwMDoxNDoxOVrOFpDCgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QwMDoxNjozNlrOFpDE5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODU4NTcyOQ==", "bodyText": "I think we might want to rethink using response bodies here, as it could expose these clients to reflection and log injection attacks. I think it makes sense to expose the body of the error, but not as the message which the user is likely logging.\nI'm wondering as well, why would this ever be null and require some change here? Wouldn't it previously have been Server error?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5286#discussion_r378585729", "createdAt": "2020-02-13T00:14:19Z", "author": {"login": "jimschubert"}, "path": "modules/openapi-generator/src/main/resources/kotlin-client/api.mustache", "diffHunk": "@@ -77,7 +77,7 @@ import {{packageName}}.infrastructure.toMultiValue\n             }\n             ResponseType.ServerError -> {\n                 val localVarError = localVarResponse as ServerError<*>\n-                throw ServerException(localVarError.message ?: \"Server error\", localVarError.statusCode)\n+                throw ServerException(localVarError.body as? String ?: \"Server error\", localVarError.statusCode)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a98f3f3a76d60d3c58a2b58f9ff8f9149bce78d1"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODU4NjM0MQ==", "bodyText": "Changing this structure is a potential breaking change, as users of the generated clients may build adding these structures in the consuming code.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5286#discussion_r378586341", "createdAt": "2020-02-13T00:16:36Z", "author": {"login": "jimschubert"}, "path": "samples/client/petstore/kotlin-nullable/src/main/kotlin/org/openapitools/client/infrastructure/ApiInfrastructureResponse.kt", "diffHunk": "@@ -33,7 +33,6 @@ class ClientError<T>(\n ) : ApiInfrastructureResponse<T>(ResponseType.ClientError)\n \n class ServerError<T>(\n-    val message: String? = null,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a98f3f3a76d60d3c58a2b58f9ff8f9149bce78d1"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "825a9e4edcd85ca55110317bc4371013304c3d47", "author": {"user": {"login": "4brunu", "name": "Bruno Coelho"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/825a9e4edcd85ca55110317bc4371013304c3d47", "committedDate": "2020-02-13T08:16:45Z", "message": "[kotlin][client] avoid breaking change"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa7f3b2b6473af7c92670ac89ca7a1006b356b13", "author": {"user": {"login": "4brunu", "name": "Bruno Coelho"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/fa7f3b2b6473af7c92670ac89ca7a1006b356b13", "committedDate": "2020-02-13T22:21:07Z", "message": "[kotlin][client] add response to client and server exceptions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1488e861500b87cd11f5871e01fe01d021c97659", "author": {"user": {"login": "4brunu", "name": "Bruno Coelho"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/1488e861500b87cd11f5871e01fe01d021c97659", "committedDate": "2020-02-13T22:22:35Z", "message": "Merge branch 'master' into feature/kotlin-server-error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13c7b571914b1f95740f18b06753b20a85cecb43", "author": {"user": {"login": "4brunu", "name": "Bruno Coelho"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/13c7b571914b1f95740f18b06753b20a85cecb43", "committedDate": "2020-02-14T15:28:52Z", "message": "[kotlin][client] improve message on ClientException and ServerException"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "463d75f824fe311ca25e73e3c7678eb830e1b4c4", "author": {"user": {"login": "4brunu", "name": "Bruno Coelho"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/463d75f824fe311ca25e73e3c7678eb830e1b4c4", "committedDate": "2020-02-14T15:29:32Z", "message": "Merge branch 'master' into feature/kotlin-server-error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5NDEyNjI3", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5286#pullrequestreview-359412627", "createdAt": "2020-02-16T15:57:40Z", "commit": {"oid": "463d75f824fe311ca25e73e3c7678eb830e1b4c4"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxNTo1Nzo0MFrOFqUE3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xNlQxNTo1Nzo0MFrOFqUE3A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkxMzQzNg==", "bodyText": "note that this shouldn't be a breaking change because it's an internal type.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5286#discussion_r379913436", "createdAt": "2020-02-16T15:57:40Z", "author": {"login": "jimschubert"}, "path": "modules/openapi-generator/src/main/resources/kotlin-client/libraries/jvm-okhttp/infrastructure/ApiInfrastructureResponse.kt.mustache", "diffHunk": "@@ -27,6 +29,7 @@ package {{packageName}}.infrastructure\n ) : ApiInfrastructureResponse<T>(ResponseType.Redirection)\n \n {{#nonPublicApi}}internal {{/nonPublicApi}}class ClientError<T>(\n+    val message: String? = null,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "463d75f824fe311ca25e73e3c7678eb830e1b4c4"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2777, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}