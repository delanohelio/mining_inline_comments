{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4MzMyNDMz", "number": 5138, "title": "[typescript] Append enum suffix without model suffix", "bodyText": "Fixes #5135\nI was not able to approach this problem without introducing backward-incompatible changes.\nA new enumSuffix option is introduced to minimize migration efforts, though.\nUPDATE: actually, backward compatibility is now ensured by having v4-compat value by default for the newly introduced option\n\n(breaking change) With modelNameSuffix, only append \"Enum\" suffix but not model suffix. So instead of ResponseModelPropNameModelEnum we now get ResponseModelPropNameEnum.\nWithout modelNameSuffix, all typescript generators except typescript-angular keep the existing behavior (emit smth like ResponsePropNameEnum)\n(breaking change) typescript-angular now follows the same enum naming rules as other TS generators. It still uses its custom modelSuffix, though - so it's still possible to configure it via modelNameSuffix or modelSuffix. Both options should work the same with the updated enum naming schema.\nenumSuffix is now configurable via options. This would provide smoother migration for existing users (e.g. one can set it to \"ModelEnum\" to mimic the old behavior).\n(bonus) More robust model names generation. Previously it would be possible to have a spec with a model named error (note lowcase!), which would then emit a Typescript interface Error. This should not have been possible, because Error is a builtin class. Now all the sanity checks are done to a fully-transformed model (after being camelized, and adding prefix and suffix). This addresses a part of the problem described in #5139)\n\nPR checklist\n\n Read the contribution guidelines.\n Run the shell script(s) under ./bin/ (or Windows batch scripts under.\\bin\\windows) to update Petstore samples related to your fix. This is important, as CI jobs will verify all generator outputs of your HEAD commit, and these must match the expectations made by your contribution. You only need to run ./bin/{LANG}-petstore.sh, ./bin/openapi3/{LANG}-petstore.sh if updating the code or mustache templates for a language ({LANG}) (e.g. php, ruby, python, etc).\n File the PR against the correct branch: master, 4.3.x, 5.0.x. Default: master.\n Copy the technical committee to review the pull request if your PR is targeting a particular programming language.\n\n@TiFu @taxpon @sebastianhaas @kenisteward @Vrolijkx @macjohnny @nicokoenig @topce @akehir @petejohansonxo", "createdAt": "2020-01-29T01:45:14Z", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5138", "merged": true, "mergeCommit": {"oid": "e32a2f012135c394a128051c2e220fd3b9b2936c"}, "closed": true, "closedAt": "2020-01-31T11:17:23Z", "author": {"login": "amakhrov"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-79S5gFqTM0OTgyMDYwMw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb_qpGoAFqTM1MTM0NTE3Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ5ODIwNjAz", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5138#pullrequestreview-349820603", "createdAt": "2020-01-29T01:49:34Z", "commit": {"oid": "3f19d5419d4592450797fc1428ad5b955857c6ae"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQwMTo0OTozNVrOFi6bcQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQwMTo0OTozNVrOFi6bcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjE1MzIwMQ==", "bodyText": "This is a mapping for the OAS2 built-in file type. It's similar to the existing mapping defined in TypeScriptAngularClientCodegen.java:\ntypeMapping.put(\"file\", \"Blob\");\n\nWithout that, the updated toModelName() logic would add a bogus import for api endpoints that deal with type:file (imageUpload endpoint in PetStore)\nFrankly, I'm not sure if the old mapping in line 151 here is needed at all.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5138#discussion_r372153201", "createdAt": "2020-01-29T01:49:35Z", "author": {"login": "amakhrov"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/AbstractTypeScriptClientCodegen.java", "diffHunk": "@@ -149,11 +149,13 @@ public AbstractTypeScriptClientCodegen() {\n         typeMapping.put(\"DateTime\", \"Date\");\n         typeMapping.put(\"binary\", \"any\");\n         typeMapping.put(\"File\", \"any\");\n+        typeMapping.put(\"file\", \"any\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3f19d5419d4592450797fc1428ad5b955857c6ae"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83381cacd1663c979278df6b33c4e2abd92ff594", "author": {"user": {"login": "amakhrov", "name": "Alexey Makhrov"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/83381cacd1663c979278df6b33c4e2abd92ff594", "committedDate": "2020-01-30T20:55:32Z", "message": "[typescript] Generate enum name independently on model name, ignoring modelSuffix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3102ed496c7e7af95cb036697161b1cc89fbb73f", "author": {"user": {"login": "amakhrov", "name": "Alexey Makhrov"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/3102ed496c7e7af95cb036697161b1cc89fbb73f", "committedDate": "2020-01-30T20:55:32Z", "message": "Add `enumSufix` cli option for all typescript generators"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "592b9d84a1bdb2b4b93955662a4d0fd867db772a", "author": {"user": {"login": "amakhrov", "name": "Alexey Makhrov"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/592b9d84a1bdb2b4b93955662a4d0fd867db772a", "committedDate": "2020-01-30T20:55:32Z", "message": "Add ENUM_NAME_SUFFIX to to TypeScript***ClientOptionsProvider"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e1dafc0cdfeed5430a4addfe2d43779c77e9908", "author": {"user": {"login": "amakhrov", "name": "Alexey Makhrov"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/7e1dafc0cdfeed5430a4addfe2d43779c77e9908", "committedDate": "2020-01-30T20:55:32Z", "message": "Add a typeMapping for OAS2 built-in \"file\" type"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1be73d4e80c3936d6b517fdf80051eb948748b8e", "author": {"user": {"login": "amakhrov", "name": "Alexey Makhrov"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/1be73d4e80c3936d6b517fdf80051eb948748b8e", "committedDate": "2020-01-30T20:55:32Z", "message": "Re-generate samples"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b7034d315350863d0ae981e9b69cc3a4856d06a", "author": {"user": {"login": "amakhrov", "name": "Alexey Makhrov"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/2b7034d315350863d0ae981e9b69cc3a4856d06a", "committedDate": "2020-01-30T23:17:17Z", "message": "Introduce `v4-compat` mode for enumNamePrefix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2532cd6eb840a68ba4334b1980cd9249ee1bcd96", "author": {"user": {"login": "amakhrov", "name": "Alexey Makhrov"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/2532cd6eb840a68ba4334b1980cd9249ee1bcd96", "committedDate": "2020-01-30T23:23:10Z", "message": "Update TypeScriptFetchModelTest - make sure codegen options are processed before running assertions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "21d382dbb11398a54a213e7aa10e5ba039db9bef", "author": {"user": {"login": "amakhrov", "name": "Alexey Makhrov"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/21d382dbb11398a54a213e7aa10e5ba039db9bef", "committedDate": "2020-01-30T23:28:43Z", "message": "Regenerate samples"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "130c8ff3dbce6c146059dfad47cfecd50b1b7491", "author": {"user": {"login": "amakhrov", "name": "Alexey Makhrov"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/130c8ff3dbce6c146059dfad47cfecd50b1b7491", "committedDate": "2020-01-30T23:31:42Z", "message": "Regenerate docs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3f19d5419d4592450797fc1428ad5b955857c6ae", "author": {"user": {"login": "amakhrov", "name": "Alexey Makhrov"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/3f19d5419d4592450797fc1428ad5b955857c6ae", "committedDate": "2020-01-29T01:25:04Z", "message": "Re-generate samples"}, "afterCommit": {"oid": "130c8ff3dbce6c146059dfad47cfecd50b1b7491", "author": {"user": {"login": "amakhrov", "name": "Alexey Makhrov"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/130c8ff3dbce6c146059dfad47cfecd50b1b7491", "committedDate": "2020-01-30T23:31:42Z", "message": "Regenerate docs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da5bb5d4248c3d9b1d0432abd730dc213097cbbd", "author": {"user": {"login": "amakhrov", "name": "Alexey Makhrov"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/da5bb5d4248c3d9b1d0432abd730dc213097cbbd", "committedDate": "2020-01-31T08:00:59Z", "message": "Merge remote-tracking branch 'upstream/master' into typescript-angular-enum-suffix\n\n# Conflicts:\n#\tdocs/generators/javascript-flowtyped.md\n#\tdocs/generators/typescript-angular.md\n#\tdocs/generators/typescript-angularjs.md\n#\tdocs/generators/typescript-aurelia.md\n#\tdocs/generators/typescript-axios.md\n#\tdocs/generators/typescript-fetch.md\n#\tdocs/generators/typescript-inversify.md\n#\tdocs/generators/typescript-jquery.md\n#\tdocs/generators/typescript-node.md\n#\tdocs/generators/typescript-redux-query.md\n#\tdocs/generators/typescript-rxjs.md\n#\tmodules/openapi-generator/src/main/java/org/openapitools/codegen/languages/AbstractTypeScriptClientCodegen.java\n#\tmodules/openapi-generator/src/test/java/org/openapitools/codegen/options/TypeScriptAureliaClientOptionsProvider.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3decf24ce6ed0ec1c042b50673766c11719e9f7", "author": {"user": {"login": "amakhrov", "name": "Alexey Makhrov"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/f3decf24ce6ed0ec1c042b50673766c11719e9f7", "committedDate": "2020-01-31T08:06:11Z", "message": "Regenerate docs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxMzQ1MTc2", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5138#pullrequestreview-351345176", "createdAt": "2020-01-31T08:13:04Z", "commit": {"oid": "f3decf24ce6ed0ec1c042b50673766c11719e9f7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2876, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}