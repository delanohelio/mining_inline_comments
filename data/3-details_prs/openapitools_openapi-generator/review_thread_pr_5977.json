{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1NjA0NzM3", "number": 5977, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQxNzowNDowOVrODzbhgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQxNzowNDozM1rODzbhnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1MjU0OTE0OnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/utils/ModelUtils.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQxNzowNDowOVrOGH6OoQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQxNzowNDowOVrOGH6OoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDk0NzIzMw==", "bodyText": "This filtering prevents a NPE from happening when getParentName returns null, that's why I deleted the comment on line 1107 on the left. If I omit this filtering, the NPE is seen when we run our tests.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5977#discussion_r410947233", "createdAt": "2020-04-19T17:04:09Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/utils/ModelUtils.java", "diffHunk": "@@ -1104,9 +1104,9 @@ public static Header getHeader(OpenAPI openAPI, String name) {\n     public static Map<String, List<String>> getChildrenMap(OpenAPI openAPI) {\n         Map<String, Schema> allSchemas = getSchemas(openAPI);\n \n-        // FIXME: The collect here will throw NPE if a spec document has only a single oneOf hierarchy.\n         Map<String, List<Entry<String, Schema>>> groupedByParent = allSchemas.entrySet().stream()\n             .filter(entry -> isComposedSchema(entry.getValue()))\n+                .filter(entry -> getParentName((ComposedSchema) entry.getValue(), allSchemas)!=null)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d3e682afaf6ab73dc2ca12d11df5e3efad8ed3b"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1MjU0OTM3OnYy", "diffSide": "LEFT", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/utils/ModelUtils.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQxNzowNDoyMlrOGH6Ovg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQxNzowNDoyMlrOGH6Ovg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDk0NzI2Mg==", "bodyText": "reverted to original code", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5977#discussion_r410947262", "createdAt": "2020-04-19T17:04:22Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/utils/ModelUtils.java", "diffHunk": "@@ -1165,14 +1165,6 @@ public static String getParentName(ComposedSchema composedSchema, Map<String, Sc\n         int nullSchemaChildrenCount = 0;\n         boolean hasAmbiguousParents = false;\n         List<String> refedWithoutDiscriminator = new ArrayList<>();\n-        String schemaName = \"\";\n-        for (String thisSchemaName : allSchemas.keySet()) {\n-            Schema sc = allSchemas.get(thisSchemaName);\n-            if (isComposedSchema(sc) && (ComposedSchema) sc == composedSchema) {\n-                schemaName = thisSchemaName;\n-                break;\n-            }\n-        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d3e682afaf6ab73dc2ca12d11df5e3efad8ed3b"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU1MjU0OTQzOnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/utils/ModelUtils.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQxNzowNDozM1rOGH6Oyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQxNzowNDozM1rOGH6Oyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDk0NzI3NA==", "bodyText": "reverted to original code", "url": "https://github.com/OpenAPITools/openapi-generator/pull/5977#discussion_r410947274", "createdAt": "2020-04-19T17:04:33Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/utils/ModelUtils.java", "diffHunk": "@@ -1189,10 +1181,7 @@ public static String getParentName(ComposedSchema composedSchema, Map<String, Sc\n                     } else {\n                         // not a parent since discriminator.propertyName is not set\n                         hasAmbiguousParents = true;\n-                        boolean isNotExtractedInlineSchema = !parentName.equals(schemaName+\"_allOf\");\n-                        if (isNotExtractedInlineSchema) {\n-                            refedWithoutDiscriminator.add(parentName);\n-                        }\n+                        refedWithoutDiscriminator.add(parentName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3d3e682afaf6ab73dc2ca12d11df5e3efad8ed3b"}, "originalPosition": 34}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3563, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}