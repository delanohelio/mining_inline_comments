{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyNjg0OTAx", "number": 6153, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwMDoxOTo0NFrOD41BjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMVQxNjo0Mjo1N1rOEUTX-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwOTE1NTk3OnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/DefaultCodegen.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwMDoxOTo0NFrOGPwqdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQwMDoxOTo0NFrOGPwqdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTE3OTEyNQ==", "bodyText": "I wonder how to clone schema instance here. I need to change result of Json.pretty(schema); but keep original instance not modified.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6153#discussion_r419179125", "createdAt": "2020-05-04T00:19:44Z", "author": {"login": "ybelenko"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/DefaultCodegen.java", "diffHunk": "@@ -2129,6 +2129,25 @@ public CodegenModel fromModel(String name, Schema schema) {\n             return null;\n         }\n \n+        String modelJson = Json.pretty(schema);\n+        if (schema.getType() == null ) {\n+            Schema copy = ModelUtils.unaliasSchema(this.openAPI, schema, importMapping);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8e033b3a4e8e87685d8360ba6f471136b75470ea"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxODcwNjAyOnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/DefaultCodegen.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQwMDo1MDo0MFrOGgM4pQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQwMDo1MDo0MFrOGgM4pQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQxODcyNQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    String modelJson = Json.pretty(schema);\n          \n          \n            \n                    String modelJson;", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6153#discussion_r436418725", "createdAt": "2020-06-08T00:50:40Z", "author": {"login": "jimschubert"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/DefaultCodegen.java", "diffHunk": "@@ -2146,6 +2146,25 @@ public CodegenModel fromModel(String name, Schema schema) {\n             return null;\n         }\n \n+        String modelJson = Json.pretty(schema);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8698e0e05132922cba5ff4c8516d8ec8f0c8318e"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxODcwNjc1OnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/DefaultCodegen.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQwMDo1MTozMVrOGgM4_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQwMDo1MTozMVrOGgM4_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQxODgxNQ==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    }\n          \n          \n            \n                    } else {\n          \n          \n            \n                        modelJson = Json.pretty(schema)\n          \n          \n            \n                    }\n          \n      \n    \n    \n  \n\nThis coupled with the above solution will prevent prettifying this twice.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6153#discussion_r436418815", "createdAt": "2020-06-08T00:51:31Z", "author": {"login": "jimschubert"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/DefaultCodegen.java", "diffHunk": "@@ -2146,6 +2146,25 @@ public CodegenModel fromModel(String name, Schema schema) {\n             return null;\n         }\n \n+        String modelJson = Json.pretty(schema);\n+        if (schema.getType() == null ) {\n+            Schema copy = ModelUtils.unaliasSchema(this.openAPI, schema, importMapping);\n+            if (ModelUtils.isIntegerSchema(schema)) {\n+                copy.setType(SchemaTypeUtil.INTEGER_TYPE);\n+            } else if (ModelUtils.isNumberSchema(schema)) {\n+                copy.setType(SchemaTypeUtil.NUMBER_TYPE);\n+            } else if (ModelUtils.isStringSchema(schema)) {\n+                copy.setType(SchemaTypeUtil.STRING_TYPE);\n+            } else if (ModelUtils.isBooleanSchema(schema)) {\n+                copy.setType(SchemaTypeUtil.BOOLEAN_TYPE);\n+            } else if (ModelUtils.isArraySchema(schema)) {\n+                copy.setType(\"array\");\n+            } else if (ModelUtils.isObjectSchema(schema) || ModelUtils.isComposedSchema(schema) || ModelUtils.isMapSchema(schema)) {\n+                copy.setType(SchemaTypeUtil.OBJECT_TYPE);\n+            }\n+            modelJson = Json.pretty(copy);\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8698e0e05132922cba5ff4c8516d8ec8f0c8318e"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNTA5Nzg5OnYy", "diffSide": "RIGHT", "path": "samples/client/petstore/go-experimental/go-petstore/api/openapi.yaml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxMzo0NDozNVrOGhKkrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxMzo0NDozNVrOGhKkrw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQyOTQyMw==", "bodyText": "Here I agree type: object was missing. It it there in the original document (modules/openapi-generator/src/test/resources/2_0/petstore-with-fake-endpoints-models-for-testing.yaml), it makes sense to add it.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6153#discussion_r437429423", "createdAt": "2020-06-09T13:44:35Z", "author": {"login": "sebastien-rosset"}, "path": "samples/client/petstore/go-experimental/go-petstore/api/openapi.yaml", "diffHunk": "@@ -2090,10 +2093,12 @@ components:\n       properties:\n         breed:\n           type: string\n+      type: object", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49de85e778d5dc47b46cf493becdae27f432251b"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyNTExODI0OnYy", "diffSide": "RIGHT", "path": "samples/client/petstore/go-experimental/go-petstore/api/openapi.yaml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxMzo0Nzo0MVrOGhKxdA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQxMzo0Nzo0MVrOGhKxdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQzMjY5Mg==", "bodyText": "In JSON schema, allOf means a compliant validator must validate the payload against all of the nested schemas under allOf. Since Animal is already specified as a type: object, it's redundant and verbose to add type: object here.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6153#discussion_r437432692", "createdAt": "2020-06-09T13:47:41Z", "author": {"login": "sebastien-rosset"}, "path": "samples/client/petstore/go-experimental/go-petstore/api/openapi.yaml", "diffHunk": "@@ -1422,14 +1422,17 @@ components:\n       allOf:\n       - $ref: '#/components/schemas/Animal'\n       - $ref: '#/components/schemas/Dog_allOf'\n+      type: object", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "49de85e778d5dc47b46cf493becdae27f432251b"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczOTY0NDM1OnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/InlineModelResolver.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QxOTo1Njo1MFrOGjZH-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QxMDo0NjoxNVrOGzOcCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2NDk4NQ==", "bodyText": "I've figured out Java debugger finally and found that InlineModelResolver strips data type here. That's my fix.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6153#discussion_r439764985", "createdAt": "2020-06-13T19:56:50Z", "author": {"login": "ybelenko"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/InlineModelResolver.java", "diffHunk": "@@ -621,6 +621,9 @@ private Schema modelFromProperty(OpenAPI openAPI, Schema object, String path) {\n         XML xml = object.getXml();\n         Map<String, Schema> properties = object.getProperties();\n         Schema model = new Schema();\n+        if (object.getType() != null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "267e09078e589ea3aa26fe6f74c41a8b4a3b0c00"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjI2OTk3Ng==", "bodyText": "@ybelenko thanks for the fix. Do we need to set the format as well?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6153#discussion_r456269976", "createdAt": "2020-07-17T07:33:08Z", "author": {"login": "wing328"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/InlineModelResolver.java", "diffHunk": "@@ -621,6 +621,9 @@ private Schema modelFromProperty(OpenAPI openAPI, Schema object, String path) {\n         XML xml = object.getXml();\n         Map<String, Schema> properties = object.getProperties();\n         Schema model = new Schema();\n+        if (object.getType() != null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2NDk4NQ=="}, "originalCommit": {"oid": "267e09078e589ea3aa26fe6f74c41a8b4a3b0c00"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjI3Mzg4NA==", "bodyText": "@wing328 Yeas, I think so. It's not so critical as type, but it's weird that InlineModelResolver can cut off that field completely. I'll test it today, maybe format isn't missing.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6153#discussion_r456273884", "createdAt": "2020-07-17T07:41:24Z", "author": {"login": "ybelenko"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/InlineModelResolver.java", "diffHunk": "@@ -621,6 +621,9 @@ private Schema modelFromProperty(OpenAPI openAPI, Schema object, String path) {\n         XML xml = object.getXml();\n         Map<String, Schema> properties = object.getProperties();\n         Schema model = new Schema();\n+        if (object.getType() != null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2NDk4NQ=="}, "originalCommit": {"oid": "267e09078e589ea3aa26fe6f74c41a8b4a3b0c00"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjM2NzExMg==", "bodyText": "@wing328 Done.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6153#discussion_r456367112", "createdAt": "2020-07-17T10:46:15Z", "author": {"login": "ybelenko"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/InlineModelResolver.java", "diffHunk": "@@ -621,6 +621,9 @@ private Schema modelFromProperty(OpenAPI openAPI, Schema object, String path) {\n         XML xml = object.getXml();\n         Map<String, Schema> properties = object.getProperties();\n         Schema model = new Schema();\n+        if (object.getType() != null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2NDk4NQ=="}, "originalCommit": {"oid": "267e09078e589ea3aa26fe6f74c41a8b4a3b0c00"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5NzE3Nzk2OnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/test/resources/3_0/6150_model_json_inline.yaml", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMVQxNToxMjowM1rOG6eiQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMVQxNjo1NzoyNFrOG6fGdA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk3MDg4Mg==", "bodyText": "Can you explain the test you are exercising by adding the format keyword at the object level? In 3.0.3, the format keyword can be specified for primitive types, not for object types. See http://spec.openapis.org/oas/v3.0.3#dataTypeFormat:\n\nPrimitives have an optional modifier property: format.\n\nOr maybe you are trying to say the format keyword should not have been specified in the object type? If so, what is the reason the format keyword should not be stripped? I need to re-read the spec more carefully, but shouldn't we fail the OAI documentation validation if the format keyword is specified for an object type?\n# `format` keyword is applicable to primitive types, not object types\n\nOr did you mean to add the format keyword for the foo property?\nproperties:\n  foo:\n    format: date-time\n    type: string", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6153#discussion_r463970882", "createdAt": "2020-08-01T15:12:03Z", "author": {"login": "sebastien-rosset"}, "path": "modules/openapi-generator/src/test/resources/3_0/6150_model_json_inline.yaml", "diffHunk": "@@ -0,0 +1,77 @@\n+openapi: \"3.0.0\"\n+info:\n+  version: 1.0.0\n+  title: Test inline response model\n+  description: Test inline response model.\n+  license:\n+    name: MIT\n+paths:\n+  /foobar:\n+    get:\n+      operationId: testOperation\n+      description: No type property in modelJson of InlineResponse200\n+      responses:\n+        200:\n+          description: InlineResponse200 itself.\n+          content:\n+            application/json:\n+              schema:\n+                type: object\n+                # OAS3 spec allows to use any value in format field\n+                format: unknown\n+                properties:\n+                  foo:\n+                    type: string\n+                  bar:\n+                    type: string\n+    post:\n+      operationId: testOperationPost\n+      description: No type property in modelJson of InlineResponse200\n+      responses:\n+        400:\n+          description: InlineResponse200 itself.\n+          content:\n+            application/json:\n+              schema:\n+                title: FooBarObject\n+                type: object\n+                # wrong format just to make sure it won't be stripped\n+                format: date-time", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cdf4d35e49857e0214b8a8cf4694c61f653d09b1"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk3MTc4NA==", "bodyText": "Yeah, I know that format property is for primitives only, but my goal was to keep format and type property even in broken schemas. In other words if user declares format property in type: object by some reason he will likely expect it won't be stripped off by generator.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6153#discussion_r463971784", "createdAt": "2020-08-01T15:20:55Z", "author": {"login": "ybelenko"}, "path": "modules/openapi-generator/src/test/resources/3_0/6150_model_json_inline.yaml", "diffHunk": "@@ -0,0 +1,77 @@\n+openapi: \"3.0.0\"\n+info:\n+  version: 1.0.0\n+  title: Test inline response model\n+  description: Test inline response model.\n+  license:\n+    name: MIT\n+paths:\n+  /foobar:\n+    get:\n+      operationId: testOperation\n+      description: No type property in modelJson of InlineResponse200\n+      responses:\n+        200:\n+          description: InlineResponse200 itself.\n+          content:\n+            application/json:\n+              schema:\n+                type: object\n+                # OAS3 spec allows to use any value in format field\n+                format: unknown\n+                properties:\n+                  foo:\n+                    type: string\n+                  bar:\n+                    type: string\n+    post:\n+      operationId: testOperationPost\n+      description: No type property in modelJson of InlineResponse200\n+      responses:\n+        400:\n+          description: InlineResponse200 itself.\n+          content:\n+            application/json:\n+              schema:\n+                title: FooBarObject\n+                type: object\n+                # wrong format just to make sure it won't be stripped\n+                format: date-time", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk3MDg4Mg=="}, "originalCommit": {"oid": "cdf4d35e49857e0214b8a8cf4694c61f653d09b1"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk3Mzc3OA==", "bodyText": "Then I recommend that you rewrite the comment. Writing \"Wrong format ...\" conveys that the value of format is incorrect, it should not be date-time but some other value. That's not what you were doing here.\n# In OAS 3.0.3, the 'format' keyword can be used for primitive types, not for object types, as\n# specified in http://spec.openapis.org/oas/v3.0.3#dataTypeFormat.\n# The `format` keyword is added in this test object type to show the generator retains the format property\n# even in broken schemas.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6153#discussion_r463973778", "createdAt": "2020-08-01T15:40:43Z", "author": {"login": "sebastien-rosset"}, "path": "modules/openapi-generator/src/test/resources/3_0/6150_model_json_inline.yaml", "diffHunk": "@@ -0,0 +1,77 @@\n+openapi: \"3.0.0\"\n+info:\n+  version: 1.0.0\n+  title: Test inline response model\n+  description: Test inline response model.\n+  license:\n+    name: MIT\n+paths:\n+  /foobar:\n+    get:\n+      operationId: testOperation\n+      description: No type property in modelJson of InlineResponse200\n+      responses:\n+        200:\n+          description: InlineResponse200 itself.\n+          content:\n+            application/json:\n+              schema:\n+                type: object\n+                # OAS3 spec allows to use any value in format field\n+                format: unknown\n+                properties:\n+                  foo:\n+                    type: string\n+                  bar:\n+                    type: string\n+    post:\n+      operationId: testOperationPost\n+      description: No type property in modelJson of InlineResponse200\n+      responses:\n+        400:\n+          description: InlineResponse200 itself.\n+          content:\n+            application/json:\n+              schema:\n+                title: FooBarObject\n+                type: object\n+                # wrong format just to make sure it won't be stripped\n+                format: date-time", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk3MDg4Mg=="}, "originalCommit": {"oid": "cdf4d35e49857e0214b8a8cf4694c61f653d09b1"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk3NDIwMA==", "bodyText": "Note in the JSON schema specification, the format keyword can be used for any instance, not just primitive types. http://json-schema.org/draft/2019-09/json-schema-validation.html#rfc.section.7. In the draft 3.1, the format section still indicates the format keyword applies to primitive types.\nThe JSON schema spec does not say much about what the format keyword would mean for an object type, all defined formats apply to string instances.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6153#discussion_r463974200", "createdAt": "2020-08-01T15:45:48Z", "author": {"login": "sebastien-rosset"}, "path": "modules/openapi-generator/src/test/resources/3_0/6150_model_json_inline.yaml", "diffHunk": "@@ -0,0 +1,77 @@\n+openapi: \"3.0.0\"\n+info:\n+  version: 1.0.0\n+  title: Test inline response model\n+  description: Test inline response model.\n+  license:\n+    name: MIT\n+paths:\n+  /foobar:\n+    get:\n+      operationId: testOperation\n+      description: No type property in modelJson of InlineResponse200\n+      responses:\n+        200:\n+          description: InlineResponse200 itself.\n+          content:\n+            application/json:\n+              schema:\n+                type: object\n+                # OAS3 spec allows to use any value in format field\n+                format: unknown\n+                properties:\n+                  foo:\n+                    type: string\n+                  bar:\n+                    type: string\n+    post:\n+      operationId: testOperationPost\n+      description: No type property in modelJson of InlineResponse200\n+      responses:\n+        400:\n+          description: InlineResponse200 itself.\n+          content:\n+            application/json:\n+              schema:\n+                title: FooBarObject\n+                type: object\n+                # wrong format just to make sure it won't be stripped\n+                format: date-time", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk3MDg4Mg=="}, "originalCommit": {"oid": "cdf4d35e49857e0214b8a8cf4694c61f653d09b1"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk3OTM3NQ==", "bodyText": "title: FooBarObject\ntype: object\n# object type cannot contain format, but it still should be presented in resolved model\nformat: date-time\nSomething like that?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6153#discussion_r463979375", "createdAt": "2020-08-01T16:48:01Z", "author": {"login": "ybelenko"}, "path": "modules/openapi-generator/src/test/resources/3_0/6150_model_json_inline.yaml", "diffHunk": "@@ -0,0 +1,77 @@\n+openapi: \"3.0.0\"\n+info:\n+  version: 1.0.0\n+  title: Test inline response model\n+  description: Test inline response model.\n+  license:\n+    name: MIT\n+paths:\n+  /foobar:\n+    get:\n+      operationId: testOperation\n+      description: No type property in modelJson of InlineResponse200\n+      responses:\n+        200:\n+          description: InlineResponse200 itself.\n+          content:\n+            application/json:\n+              schema:\n+                type: object\n+                # OAS3 spec allows to use any value in format field\n+                format: unknown\n+                properties:\n+                  foo:\n+                    type: string\n+                  bar:\n+                    type: string\n+    post:\n+      operationId: testOperationPost\n+      description: No type property in modelJson of InlineResponse200\n+      responses:\n+        400:\n+          description: InlineResponse200 itself.\n+          content:\n+            application/json:\n+              schema:\n+                title: FooBarObject\n+                type: object\n+                # wrong format just to make sure it won't be stripped\n+                format: date-time", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk3MDg4Mg=="}, "originalCommit": {"oid": "cdf4d35e49857e0214b8a8cf4694c61f653d09b1"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk4MDE0OA==", "bodyText": "No because the JSON schema specification explicitly supports the format keyword for any model instance type including object. See OAI/OpenAPI-Specification#2301 I just opened related to this issue.\nI think the OAS should be slightly rephrased to clarify format applies to all types (including object), not just primitive types. Mike Ralphson seems to agree.\nSuggestion:\n# It is legal to use the `format` keyword for object types. The JSON schema specification explicitly allows this.\n# Even if in practice most OAS authors use `format` for primitive types, it should still be allowed to use format for object types.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6153#discussion_r463980148", "createdAt": "2020-08-01T16:57:24Z", "author": {"login": "sebastien-rosset"}, "path": "modules/openapi-generator/src/test/resources/3_0/6150_model_json_inline.yaml", "diffHunk": "@@ -0,0 +1,77 @@\n+openapi: \"3.0.0\"\n+info:\n+  version: 1.0.0\n+  title: Test inline response model\n+  description: Test inline response model.\n+  license:\n+    name: MIT\n+paths:\n+  /foobar:\n+    get:\n+      operationId: testOperation\n+      description: No type property in modelJson of InlineResponse200\n+      responses:\n+        200:\n+          description: InlineResponse200 itself.\n+          content:\n+            application/json:\n+              schema:\n+                type: object\n+                # OAS3 spec allows to use any value in format field\n+                format: unknown\n+                properties:\n+                  foo:\n+                    type: string\n+                  bar:\n+                    type: string\n+    post:\n+      operationId: testOperationPost\n+      description: No type property in modelJson of InlineResponse200\n+      responses:\n+        400:\n+          description: InlineResponse200 itself.\n+          content:\n+            application/json:\n+              schema:\n+                title: FooBarObject\n+                type: object\n+                # wrong format just to make sure it won't be stripped\n+                format: date-time", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk3MDg4Mg=="}, "originalCommit": {"oid": "cdf4d35e49857e0214b8a8cf4694c61f653d09b1"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5NzE4OTI2OnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/test/resources/3_0/6150_model_json_inline.yaml", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMVQxNToyNjowM1rOG6en4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMVQxNTozMjozNVrOG6eqnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk3MjMyMA==", "bodyText": "Same question/comment as what I wrote for line 39 below. What is the purpose of specifying the format keyword for an object type in your test?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6153#discussion_r463972320", "createdAt": "2020-08-01T15:26:03Z", "author": {"login": "sebastien-rosset"}, "path": "modules/openapi-generator/src/test/resources/3_0/6150_model_json_inline.yaml", "diffHunk": "@@ -0,0 +1,77 @@\n+openapi: \"3.0.0\"\n+info:\n+  version: 1.0.0\n+  title: Test inline response model\n+  description: Test inline response model.\n+  license:\n+    name: MIT\n+paths:\n+  /foobar:\n+    get:\n+      operationId: testOperation\n+      description: No type property in modelJson of InlineResponse200\n+      responses:\n+        200:\n+          description: InlineResponse200 itself.\n+          content:\n+            application/json:\n+              schema:\n+                type: object\n+                # OAS3 spec allows to use any value in format field\n+                format: unknown", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cdf4d35e49857e0214b8a8cf4694c61f653d09b1"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk3MzAyMA==", "bodyText": "Just to check that format property saved in broken schemas. On purpose.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6153#discussion_r463973020", "createdAt": "2020-08-01T15:32:35Z", "author": {"login": "ybelenko"}, "path": "modules/openapi-generator/src/test/resources/3_0/6150_model_json_inline.yaml", "diffHunk": "@@ -0,0 +1,77 @@\n+openapi: \"3.0.0\"\n+info:\n+  version: 1.0.0\n+  title: Test inline response model\n+  description: Test inline response model.\n+  license:\n+    name: MIT\n+paths:\n+  /foobar:\n+    get:\n+      operationId: testOperation\n+      description: No type property in modelJson of InlineResponse200\n+      responses:\n+        200:\n+          description: InlineResponse200 itself.\n+          content:\n+            application/json:\n+              schema:\n+                type: object\n+                # OAS3 spec allows to use any value in format field\n+                format: unknown", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk3MjMyMA=="}, "originalCommit": {"oid": "cdf4d35e49857e0214b8a8cf4694c61f653d09b1"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjg5NzI0NDExOnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/InlineModelResolver.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMVQxNjo0Mjo1N1rOG6fBuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMVQxNjo0Mjo1N1rOG6fBuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk3ODkzNw==", "bodyText": "IMO, there may be a contradiction in the OAS spec (both 3.0.3 and 3.1) versus the JSON schema specification.\nI have opened OAI/OpenAPI-Specification#2301. It would be interesting to have @wing328  and @jimschubert  opinions.\nIn any case, I suggest adding the code comments below because later it can be hard for maintainers to understand the context and why this was done.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        model.setFormat(object.getFormat());\n          \n          \n            \n                        // Even though the `format` keyword typically applies to primitive types only,\n          \n          \n            \n                        // the JSON schema specification states `format` can be used for any model type instance\n          \n          \n            \n                        // including object types.\n          \n          \n            \n                        model.setFormat(object.getFormat());", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6153#discussion_r463978937", "createdAt": "2020-08-01T16:42:57Z", "author": {"login": "sebastien-rosset"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/InlineModelResolver.java", "diffHunk": "@@ -621,6 +621,12 @@ private Schema modelFromProperty(OpenAPI openAPI, Schema object, String path) {\n         XML xml = object.getXml();\n         Map<String, Schema> properties = object.getProperties();\n         Schema model = new Schema();\n+        if (object.getType() != null) {\n+            model.setType(object.getType());\n+        }\n+        if (object.getFormat() != null) {\n+            model.setFormat(object.getFormat());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cdf4d35e49857e0214b8a8cf4694c61f653d09b1"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3493, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}