{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI5ODIzMTQx", "number": 8054, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQwMjowMzoxNVrOE-6zVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMzoxMjo1NFrOFFTkxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM0NDEwNTgzOnYy", "diffSide": "RIGHT", "path": "samples/client/petstore/python/docs/FakeApi.md", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQwMjowMzoxNVrOH8VNwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQwMjowMzoxNVrOH8VNwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzAyNDE5NA==", "bodyText": "Your update is breaking these samples.\n\nClient\nAnimalFarm\nXmlItem\n... and others\n\nCan you update your code so these work correctly?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/8054#discussion_r533024194", "createdAt": "2020-12-01T02:03:15Z", "author": {"login": "spacether"}, "path": "samples/client/petstore/python/docs/FakeApi.md", "diffHunk": "@@ -175,55 +173,7 @@ configuration = petstore_api.Configuration(\n with petstore_api.ApiClient() as api_client:\n     # Create an instance of the API class\n     api_instance = fake_api.FakeApi(api_client)\n-    xml_item = XmlItem(\n-        attribute_string=\"string\",\n-        attribute_number=1.234,\n-        attribute_integer=-2,\n-        attribute_boolean=True,\n-        wrapped_array=[\n-            1,\n-        ],\n-        name_string=\"string\",\n-        name_number=1.234,\n-        name_integer=-2,\n-        name_boolean=True,\n-        name_array=[\n-            1,\n-        ],\n-        name_wrapped_array=[\n-            1,\n-        ],\n-        prefix_string=\"string\",\n-        prefix_number=1.234,\n-        prefix_integer=-2,\n-        prefix_boolean=True,\n-        prefix_array=[\n-            1,\n-        ],\n-        prefix_wrapped_array=[\n-            1,\n-        ],\n-        namespace_string=\"string\",\n-        namespace_number=1.234,\n-        namespace_integer=-2,\n-        namespace_boolean=True,\n-        namespace_array=[\n-            1,\n-        ],\n-        namespace_wrapped_array=[\n-            1,\n-        ],\n-        prefix_ns_string=\"string\",\n-        prefix_ns_number=1.234,\n-        prefix_ns_integer=-2,\n-        prefix_ns_boolean=True,\n-        prefix_ns_array=[\n-            1,\n-        ],\n-        prefix_ns_wrapped_array=[\n-            1,\n-        ],\n-    ) # XmlItem | XmlItem Body\n+    xml_item = XmlItem(XmlItem) # XmlItem | XmlItem Body", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cacc4d62ee6333d6b419d6ef25600e9876205da6"}, "originalPosition": 64}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM0NDExMTgwOnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/PythonClientCodegen.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQwMjowNjoxM1rOH8VRGQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMzoxNToxM1rOIFw7ig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzAyNTA0OQ==", "bodyText": "Shouldn't we only add a model when we have finished generating its sample?\nWhat are our recursive base cases here for cycles?\nHow about naming them seenModels because we have not finished processing it yet.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/8054#discussion_r533025049", "createdAt": "2020-12-01T02:06:13Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/PythonClientCodegen.java", "diffHunk": "@@ -948,6 +949,18 @@ private String toExampleValueRecursive(String modelName, Schema schema, Object o\n         if (objExample != null) {\n             example = objExample.toString();\n         }\n+\n+        // check for recursive model\n+        if (processedModels.contains(modelName)) {\n+            // have already processed this model\n+            // this happens when you have recursive or circular models\n+            return fullPrefix + modelName + closeChars;\n+        } else if(modelName != null && !modelName.isEmpty()){\n+            // if the model is non-null and non-empty, add it to the set\n+            processedModels.add(modelName);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cacc4d62ee6333d6b419d6ef25600e9876205da6"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzAyNjIxMg==", "bodyText": "I'll go back and take a look at this again, thanks.  I didn't realize that the 'ran /bin/utils/ensure-up-to-date' was required and didn't pick up on the fact that my examples had changed that.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/8054#discussion_r533026212", "createdAt": "2020-12-01T02:10:05Z", "author": {"login": "fbl100"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/PythonClientCodegen.java", "diffHunk": "@@ -948,6 +949,18 @@ private String toExampleValueRecursive(String modelName, Schema schema, Object o\n         if (objExample != null) {\n             example = objExample.toString();\n         }\n+\n+        // check for recursive model\n+        if (processedModels.contains(modelName)) {\n+            // have already processed this model\n+            // this happens when you have recursive or circular models\n+            return fullPrefix + modelName + closeChars;\n+        } else if(modelName != null && !modelName.isEmpty()){\n+            // if the model is non-null and non-empty, add it to the set\n+            processedModels.add(modelName);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzAyNTA0OQ=="}, "originalCommit": {"oid": "cacc4d62ee6333d6b419d6ef25600e9876205da6"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc4MDkwNQ==", "bodyText": "@spacether Got a CircleCI build error that I'm having  a hard time interpreting.  Do you mind taking a look and providing pointers for how to reproduce locally?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/8054#discussion_r541780905", "createdAt": "2020-12-12T21:08:56Z", "author": {"login": "fbl100"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/PythonClientCodegen.java", "diffHunk": "@@ -948,6 +949,18 @@ private String toExampleValueRecursive(String modelName, Schema schema, Object o\n         if (objExample != null) {\n             example = objExample.toString();\n         }\n+\n+        // check for recursive model\n+        if (processedModels.contains(modelName)) {\n+            // have already processed this model\n+            // this happens when you have recursive or circular models\n+            return fullPrefix + modelName + closeChars;\n+        } else if(modelName != null && !modelName.isEmpty()){\n+            // if the model is non-null and non-empty, add it to the set\n+            processedModels.add(modelName);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzAyNTA0OQ=="}, "originalCommit": {"oid": "cacc4d62ee6333d6b419d6ef25600e9876205da6"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjkxNTQ2Ng==", "bodyText": "That error is unrelated. We. can ignore it.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/8054#discussion_r542915466", "createdAt": "2020-12-14T23:15:13Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/PythonClientCodegen.java", "diffHunk": "@@ -948,6 +949,18 @@ private String toExampleValueRecursive(String modelName, Schema schema, Object o\n         if (objExample != null) {\n             example = objExample.toString();\n         }\n+\n+        // check for recursive model\n+        if (processedModels.contains(modelName)) {\n+            // have already processed this model\n+            // this happens when you have recursive or circular models\n+            return fullPrefix + modelName + closeChars;\n+        } else if(modelName != null && !modelName.isEmpty()){\n+            // if the model is non-null and non-empty, add it to the set\n+            processedModels.add(modelName);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzAyNTA0OQ=="}, "originalCommit": {"oid": "cacc4d62ee6333d6b419d6ef25600e9876205da6"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQxMTA3OTA5OnYy", "diffSide": "RIGHT", "path": "modules/openapi-generator/src/test/resources/3_0/issue_8052_recursive_model_expected_value.txt", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMzoxMjo1NFrOIFw3dQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQyMzoxMjo1NFrOIFw3dQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjkxNDQyMQ==", "bodyText": "null is invalid in Python. Can you update this value? If the list is not explicitly nullable, then the example value should be [] (empty list). If it is nullable, then the example value can be None.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/8054#discussion_r542914421", "createdAt": "2020-12-14T23:12:54Z", "author": {"login": "spacether"}, "path": "modules/openapi-generator/src/test/resources/3_0/issue_8052_recursive_model_expected_value.txt", "diffHunk": "@@ -0,0 +1,9 @@\n+GeoJsonGeometry(\n+        type=\"GeometryCollection\",\n+        geometries=[\n+            GeoJsonGeometry(\n+                type=\"GeometryCollection\",\n+                geometries=null,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "47da5e52f334f4110b23dd1cd8bfa3341d311ef2"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3969, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}