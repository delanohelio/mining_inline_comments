{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1OTE0MjYw", "number": 6699, "title": "Make ApiClient in retrofit2 be able to use own OkHttpClient", "bodyText": "Description\nIf I want to set a customized okHttpClient to the adapterBuilder like this:\nval apiClient = ApiClient()\napiClient.adapterBuilder\n      .baseUrl(baseUrl)\n      .client(customizedOkHttpClient)\n\nthe client gets overwritten by this:\npublic <S> S createService(Class<S> serviceClass) {\n        return this.adapterBuilder.client(this.okBuilder.build()).build().create(serviceClass);\n    }\n\nand unfortunately this method:\npublic void configureFromOkclient(OkHttpClient okClient) {\n        this.okBuilder = okClient.newBuilder();\n        this.addAuthsToOkBuilder(this.okBuilder);\n    }\n\nis of no use to me because the okBuilder would just get the clients fields but I need/want to have the client itself respectively its instance. So I added a boolean field \"okBuilderUsed\" which checks if the okBuilder is used and if it's used then createService will return its client and if not then createService will just return the adapterBuilder:\npublic <S> S createService(Class<S> serviceClass) {\n        return this.okBuilderUsed ? this.adapterBuilder.client(this.okBuilder.build()).build().create(serviceClass) : this.adapterBuilder.build().create(serviceClass);\n    }\n\nPR checklist\n\n Read the contribution guidelines.\n If contributing template-only or documentation-only changes which will change sample output, build the project beforehand.\n Run the shell script ./bin/generate-samples.shto update all Petstore samples related to your fix. This is important, as CI jobs will verify all generator outputs of your HEAD commit as it would merge with master. These must match the expectations made by your contribution. You may regenerate an individual generator by passing the relevant config(s) as an argument to the script, for example ./bin/generate-samples.sh bin/config/java*. For Windows users, please run the script in Git BASH.\n File the PR against the correct branch: master\n Copy the technical committee to review the pull request if your PR is targeting a particular programming language.", "createdAt": "2020-06-17T15:05:48Z", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6699", "merged": true, "mergeCommit": {"oid": "38ab7383f2e2fd9fd70bf71f5d23a022e8f04716"}, "closed": true, "closedAt": "2020-07-02T07:37:58Z", "author": {"login": "tgerth"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcsJtJ6gH2gAyNDM1OTE0MjYwOmM0NmIwMjdlMzgwMTZiZGJiNzAxMTEyN2E2MWI1YTYwN2UyNjkyY2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwVhsDgH2gAyNDM1OTE0MjYwOmNjZjNjMjBmMDBkNDQzZDIzYjUwMzdlZDk1OTI4YTBkMzVjMGU0ZDY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c46b027e38016bdbb7011127a61b5a607e2692cd", "author": {"user": {"login": "tgerth", "name": null}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/c46b027e38016bdbb7011127a61b5a607e2692cd", "committedDate": "2020-06-17T13:17:13Z", "message": "Merge pull request #1 from OpenAPITools/master\n\nUpdate my fork"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b4fec1c68b0117be5541160c84815eea7070f312", "author": {"user": {"login": "tgerth", "name": null}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/b4fec1c68b0117be5541160c84815eea7070f312", "committedDate": "2020-06-17T14:49:01Z", "message": "set adapterBuilder.client() only if okBuilder was used in retrofit2"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f646db7e4e274e99f850cb67656412670380b1d", "author": {"user": {"login": "tgerth", "name": null}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/6f646db7e4e274e99f850cb67656412670380b1d", "committedDate": "2020-06-18T10:02:59Z", "message": "updated the samples"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b0855b3d38d8340a426d0cd6474aa2badbc71be6", "author": {"user": {"login": "tgerth", "name": null}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/b0855b3d38d8340a426d0cd6474aa2badbc71be6", "committedDate": "2020-06-22T14:15:35Z", "message": "added field okHttpClient and updated samples"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MTQ4MzA5", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6699#pullrequestreview-438148309", "createdAt": "2020-06-26T09:26:12Z", "commit": {"oid": "b0855b3d38d8340a426d0cd6474aa2badbc71be6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwOToyNjoxMlrOGpaHzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwOToyNjoxMlrOGpaHzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA3Mjc4Mg==", "bodyText": "May be better to throw an Exception with an explicit message if okBuilder is null ?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6699#discussion_r446072782", "createdAt": "2020-06-26T09:26:12Z", "author": {"login": "cbornet"}, "path": "modules/openapi-generator/src/main/resources/Java/libraries/retrofit2/ApiClient.mustache", "diffHunk": "@@ -357,7 +365,9 @@ public class ApiClient {\n       throw new RuntimeException(\"auth name \\\"\" + authName + \"\\\" already in api authorizations\");\n     }\n     apiAuthorizations.put(authName, authorization);\n-    okBuilder.addInterceptor(authorization);\n+    if(okBuilder != null){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b0855b3d38d8340a426d0cd6474aa2badbc71be6"}, "originalPosition": 48}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26f777ac42bf8d73041fafb71b913a341d8bf7ba", "author": {"user": {"login": "tgerth", "name": null}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/26f777ac42bf8d73041fafb71b913a341d8bf7ba", "committedDate": "2020-06-26T09:53:59Z", "message": "bug fixed, added exception if okBuilder is null"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef3a88e61184295470d69331c510a1507e8a5c58", "author": {"user": {"login": "tgerth", "name": null}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/ef3a88e61184295470d69331c510a1507e8a5c58", "committedDate": "2020-06-26T13:26:17Z", "message": "added semicolon"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MzYxNDc3", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6699#pullrequestreview-438361477", "createdAt": "2020-06-26T14:51:47Z", "commit": {"oid": "26f777ac42bf8d73041fafb71b913a341d8bf7ba"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxNDo1MTo0N1rOGpj3QQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxNDo1MTo0N1rOGpj3QQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIzMjM4NQ==", "bodyText": "space missing", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6699#discussion_r446232385", "createdAt": "2020-06-26T14:51:47Z", "author": {"login": "cbornet"}, "path": "samples/client/petstore/java/retrofit2/src/main/java/org/openapitools/client/ApiClient.java", "diffHunk": "@@ -137,7 +137,7 @@ public void createDefaultAdapter() {\n   public <S> S createService(Class<S> serviceClass) {\n     if (okHttpClient != null) {\n         return adapterBuilder.client(okHttpClient).build().create(serviceClass);\n-    else {\n+    }else {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26f777ac42bf8d73041fafb71b913a341d8bf7ba"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MzYyMTU4", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6699#pullrequestreview-438362158", "createdAt": "2020-06-26T14:52:35Z", "commit": {"oid": "26f777ac42bf8d73041fafb71b913a341d8bf7ba"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxNDo1MjozNVrOGpj5Vg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQxNDo1MjozNVrOGpj5Vg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIzMjkxOA==", "bodyText": "Use RuntimeException ? (or even better : create an ApiClientException)", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6699#discussion_r446232918", "createdAt": "2020-06-26T14:52:35Z", "author": {"login": "cbornet"}, "path": "samples/client/petstore/java/retrofit2/src/main/java/org/openapitools/client/ApiClient.java", "diffHunk": "@@ -311,9 +311,11 @@ public ApiClient addAuthorization(String authName, Interceptor authorization) {\n       throw new RuntimeException(\"auth name \\\"\" + authName + \"\\\" already in api authorizations\");\n     }\n     apiAuthorizations.put(authName, authorization);\n-    if(okBuilder != null){\n-      okBuilder.addInterceptor(authorization);\n+    if(okBuilder == null){\n+    \tthrow new Exception(\"okBuilder is null\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26f777ac42bf8d73041fafb71b913a341d8bf7ba"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7634aea28b5456166441b5fc16398ff1cc26543", "author": {"user": {"login": "tgerth", "name": null}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/d7634aea28b5456166441b5fc16398ff1cc26543", "committedDate": "2020-06-29T14:32:53Z", "message": "added space, changed Exception to RuntimeException and changed its message"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1de6b8fa206f2f3a702f64e8f2d60c343f5a4d2", "author": {"user": {"login": "tgerth", "name": null}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/d1de6b8fa206f2f3a702f64e8f2d60c343f5a4d2", "committedDate": "2020-06-29T14:50:39Z", "message": "updated the samples"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ccf3c20f00d443d23b5037ed95928a0d35c0e4d6", "author": {"user": {"login": "tgerth", "name": null}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/ccf3c20f00d443d23b5037ed95928a0d35c0e4d6", "committedDate": "2020-06-30T13:19:15Z", "message": "Merge pull request #2 from OpenAPITools/master\n\nUpdate my fork"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2100, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}