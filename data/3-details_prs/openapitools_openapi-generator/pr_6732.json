{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM3NTM1ODc3", "number": 6732, "title": "Add Deno support to typescript(experimental) generator", "bodyText": "This PR add Deno support to typescript(experimental) generator.\ncloses #3174\n\nPR checklist\n\n Read the contribution guidelines.\n If contributing template-only or documentation-only changes which will change sample output, build the project beforehand.\n Run the shell script ./bin/generate-samples.shto update all Petstore samples related to your fix. This is important, as CI jobs will verify all generator outputs of your HEAD commit as it would merge with master. These must match the expectations made by your contribution. You may regenerate an individual generator by passing the relevant config(s) as an argument to the script, for example ./bin/generate-samples.sh bin/config/java*. For Windows users, please run the script in Git BASH.\n File the PR against the correct branch: master\n Copy the technical committee to review the pull request if your PR is targeting a particular programming language.\n\n@TiFu (2017/07) @taxpon (2017/07) @sebastianhaas (2017/07) @kenisteward (2017/07) @Vrolijkx (2017/09) @macjohnny (2018/01) @topce (2018/10) @akehir (2019/07) @petejohansonxo (2019/11) @amakhrov (2020/02)", "createdAt": "2020-06-21T12:04:49Z", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6732", "merged": true, "mergeCommit": {"oid": "1f277002a1c687a4eeee556a40f0f7c90a8c657d"}, "closed": true, "closedAt": "2020-06-27T06:32:44Z", "author": {"login": "chibat"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABctRNLJgH2gAyNDM3NTM1ODc3OmI1ZmY1M2NjMGM5ZGMzMDc0OTQyZDY4YWU0YmI1MWFhOGRkMzMwM2M=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcvLISkAH2gAyNDM3NTM1ODc3OjdlNDgyOTU4MTM5MDU3YjljZGQ5ZjMzNWM3NmNiNGM4MTAwMGIyOWU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b5ff53cc0c9dc3074942d68ae4bb51aa8dd3303c", "author": {"user": {"login": "chibat", "name": "Tomofumi Chiba"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/b5ff53cc0c9dc3074942d68ae4bb51aa8dd3303c", "committedDate": "2020-06-21T00:35:27Z", "message": "add 'deno' to typescript platforms"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c426c80e6f383965ff13ec5a6e77c3d4d440e9e9", "author": {"user": {"login": "chibat", "name": "Tomofumi Chiba"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/c426c80e6f383965ff13ec5a6e77c3d4d440e9e9", "committedDate": "2020-06-21T00:55:32Z", "message": "Merge branch 'fork_origin_master' into deno"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48afe578d78a919e7a0bcd5c751a4533462698e8", "author": {"user": {"login": "chibat", "name": "Tomofumi Chiba"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/48afe578d78a919e7a0bcd5c751a4533462698e8", "committedDate": "2020-06-21T11:33:13Z", "message": "Merge remote-tracking branch 'fork_origin/master' into deno"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "393bbccd37a27baf42e4335ebc575dc7de8b4443", "author": {"user": {"login": "chibat", "name": "Tomofumi Chiba"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/393bbccd37a27baf42e4335ebc575dc7de8b4443", "committedDate": "2020-06-21T11:46:47Z", "message": "add Deno support to typescript generator"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NDk3Mzgz", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6732#pullrequestreview-434497383", "createdAt": "2020-06-21T12:30:14Z", "commit": {"oid": "393bbccd37a27baf42e4335ebc575dc7de8b4443"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMVQxMjozMDoxNVrOGmrshA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMVQxMjozODo1M1rOGmrvQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIxNDk4MA==", "bodyText": "I don't know deno at all, but why did you decide not to generate package.mustache and tsconfig.mustache for deno?\nThis makes the required dependencies intransparent.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6732#discussion_r443214980", "createdAt": "2020-06-21T12:30:15Z", "author": {"login": "TiFu"}, "path": "modules/openapi-generator/src/main/java/org/openapitools/codegen/languages/TypeScriptClientCodegen.java", "diffHunk": "@@ -792,6 +789,12 @@ public void processOpts() {\n \n         additionalProperties.putIfAbsent(FILE_CONTENT_DATA_TYPE, propPlatform.equals(\"node\") ? \"Buffer\" : \"Blob\");\n \n+        if (!propPlatform.equals(\"deno\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "393bbccd37a27baf42e4335ebc575dc7de8b4443"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzIxNTY4Mg==", "bodyText": "Could we instead create a separate module that wraps deno's URL and provides a URLParse like interface?\nWe could then import this module instead of adding all of these conditions.", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6732#discussion_r443215682", "createdAt": "2020-06-21T12:38:53Z", "author": {"login": "TiFu"}, "path": "modules/openapi-generator/src/main/resources/typescript/http/http.mustache", "diffHunk": "@@ -66,7 +74,7 @@ export type RequestBody = undefined | string | FormData;\n export class RequestContext {\n     private headers: { [key: string]: string } = {};\n     private body: RequestBody = undefined;\n-    private url: URLParse;\n+    private url: {{#platforms}}{{#deno}}URL{{/deno}}{{^deno}}URLParse{{/deno}}{{/platforms}};", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "393bbccd37a27baf42e4335ebc575dc7de8b4443"}, "originalPosition": 47}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "334f7592e9ac6d8c95046c129d68d4b00de01fd8", "author": {"user": {"login": "chibat", "name": "Tomofumi Chiba"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/334f7592e9ac6d8c95046c129d68d4b00de01fd8", "committedDate": "2020-06-21T21:55:20Z", "message": "add Deno support to typescript generator"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NjIxMDc0", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6732#pullrequestreview-434621074", "createdAt": "2020-06-22T05:56:36Z", "commit": {"oid": "334f7592e9ac6d8c95046c129d68d4b00de01fd8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwNTo1NjozNlrOGmyxyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwNTo1NjozNlrOGmyxyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMzMTAxNw==", "bodyText": "Also curious why we enforce this polyfill instead of delegating that to the end consumer (which might already have a different polyfill in their app!)\nIt's not a comment about this PR, though - it's actually about the typescript generator already in master :)", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6732#discussion_r443331017", "createdAt": "2020-06-22T05:56:36Z", "author": {"login": "amakhrov"}, "path": "modules/openapi-generator/src/main/resources/typescript/index.mustache", "diffHunk": "@@ -1,41 +1,45 @@\n+{{#platforms}}\n+{{^deno}}\n import \"es6-promise/auto\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "334f7592e9ac6d8c95046c129d68d4b00de01fd8"}, "originalPosition": 3}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NjIxNDAw", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6732#pullrequestreview-434621400", "createdAt": "2020-06-22T05:57:30Z", "commit": {"oid": "334f7592e9ac6d8c95046c129d68d4b00de01fd8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwNTo1NzozMFrOGmyyyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwNTo1NzozMFrOGmyyyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMzMTI3NA==", "bodyText": "looks like there is no intention to support inversify on the Deno platform - is that so?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6732#discussion_r443331274", "createdAt": "2020-06-22T05:57:30Z", "author": {"login": "amakhrov"}, "path": "modules/openapi-generator/src/main/resources/typescript/auth/auth.mustache", "diffHunk": "@@ -5,7 +5,7 @@\n import * as btoa from \"btoa\";\n {{/node}}\n {{/platforms}}\n-import { RequestContext } from \"../http/http\";\n+import { RequestContext } from \"../http/http{{#platforms}}{{#deno}}.ts{{/deno}}{{/platforms}}\";\n {{#useInversify}}\n import { injectable, inject, named } from \"inversify\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "334f7592e9ac6d8c95046c129d68d4b00de01fd8"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0NjIyODU4", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6732#pullrequestreview-434622858", "createdAt": "2020-06-22T06:01:14Z", "commit": {"oid": "334f7592e9ac6d8c95046c129d68d4b00de01fd8"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwNjowMToxNFrOGmy3bA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yMlQwNjowMToxNFrOGmy3bA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzMzMjQ2MA==", "bodyText": "this change looks redundant, since this whole line is not generated for Deno (which uses a built-in fetch anyway)", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6732#discussion_r443332460", "createdAt": "2020-06-22T06:01:14Z", "author": {"login": "amakhrov"}, "path": "modules/openapi-generator/src/main/resources/typescript/http/http.mustache", "diffHunk": "@@ -4,19 +4,27 @@\n import * as FormData from \"form-data\";\n {{/node}}\n {{/platforms}}\n+{{#platforms}}\n+{{^deno}}\n // typings of url-parse are incorrect...\n // @ts-ignore \n import * as URLParse from \"url-parse\";\n-import { Observable, from } from {{#useRxJS}}'rxjs'{{/useRxJS}}{{^useRxJS}}'../rxjsStub'{{/useRxJS}};\n+{{/deno}}\n+{{/platforms}}\n+import { Observable, from } from {{#useRxJS}}'rxjs'{{/useRxJS}}{{^useRxJS}}'../rxjsStub{{#platforms}}{{#deno}}.ts{{/deno}}{{/platforms}}'{{/useRxJS}};\n \n+{{#platforms}}\n+{{^deno}}\n {{#frameworks}}\n {{#fetch-api}}\n-export * from './isomorphic-fetch';\n+export * from './isomorphic-fetch{{#platforms}}{{#deno}}.ts{{/deno}}{{/platforms}}';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "334f7592e9ac6d8c95046c129d68d4b00de01fd8"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b306168c89262a64ea5a5a5c710d21d89f9206dc", "author": {"user": {"login": "chibat", "name": "Tomofumi Chiba"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/b306168c89262a64ea5a5a5c710d21d89f9206dc", "committedDate": "2020-06-22T12:29:34Z", "message": "add Deno support to typescript generator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a672059c02d94d793ae0abe406f14994261af4b", "author": {"user": {"login": "chibat", "name": "Tomofumi Chiba"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/8a672059c02d94d793ae0abe406f14994261af4b", "committedDate": "2020-06-22T21:17:36Z", "message": "add Deno support to typescript generator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d2d02e545c3cd5591f1dedbc8acf4c92a56fa9a", "author": {"user": {"login": "chibat", "name": "Tomofumi Chiba"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/9d2d02e545c3cd5591f1dedbc8acf4c92a56fa9a", "committedDate": "2020-06-23T23:35:22Z", "message": "add Deno support to typescript generator"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2NDU3OTM2", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6732#pullrequestreview-436457936", "createdAt": "2020-06-24T09:01:14Z", "commit": {"oid": "9d2d02e545c3cd5591f1dedbc8acf4c92a56fa9a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwOTowMToxNFrOGoJXWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQwOTowMToxNFrOGoJXWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc0OTY1OA==", "bodyText": "Adding conditional .ts suffixes to all imports seems very verbose to me.\nIs it possible to simply add it for all platforms?", "url": "https://github.com/OpenAPITools/openapi-generator/pull/6732#discussion_r444749658", "createdAt": "2020-06-24T09:01:14Z", "author": {"login": "bodograumann"}, "path": "modules/openapi-generator/src/main/resources/typescript/api/api.mustache", "diffHunk": "@@ -1,21 +1,21 @@\n // TODO: better import syntax?\n-import { BaseAPIRequestFactory, RequiredError } from './baseapi';\n-import {Configuration} from '../configuration';\n-import { RequestContext, HttpMethod, ResponseContext, HttpFile} from '../http/http';\n+import { BaseAPIRequestFactory, RequiredError } from './baseapi{{#platforms}}{{#deno}}.ts{{/deno}}{{/platforms}}';\n+import {Configuration} from '../configuration{{#platforms}}{{#deno}}.ts{{/deno}}{{/platforms}}';\n+import { RequestContext, HttpMethod, ResponseContext, HttpFile} from '../http/http{{#platforms}}{{#deno}}.ts{{/deno}}{{/platforms}}';", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9d2d02e545c3cd5591f1dedbc8acf4c92a56fa9a"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f23333113b82ff193f804caf762121bb0da6388", "author": {"user": {"login": "chibat", "name": "Tomofumi Chiba"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/5f23333113b82ff193f804caf762121bb0da6388", "committedDate": "2020-06-24T20:58:42Z", "message": "add extensionForDeno property for typescript generator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c2ba9d947ff7b59164550cbf8a27530741a9903", "author": {"user": {"login": "chibat", "name": "Tomofumi Chiba"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/2c2ba9d947ff7b59164550cbf8a27530741a9903", "committedDate": "2020-06-25T03:03:45Z", "message": "add URLParse Deno wrapper for typescript generator"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "717760d04daf8ecfa201b6cc8b8cbfbd4f8ba524", "author": {"user": {"login": "chibat", "name": "Tomofumi Chiba"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/717760d04daf8ecfa201b6cc8b8cbfbd4f8ba524", "committedDate": "2020-06-25T10:13:34Z", "message": "Merge remote-tracking branch 'fork_origin/master' into deno"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e482958139057b9cdd9f335c76cb4c81000b29e", "author": {"user": {"login": "chibat", "name": "Tomofumi Chiba"}}, "url": "https://github.com/OpenAPITools/openapi-generator/commit/7e482958139057b9cdd9f335c76cb4c81000b29e", "committedDate": "2020-06-26T22:38:32Z", "message": "update deno version in .travis.yml"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2118, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}