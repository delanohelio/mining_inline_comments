{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4Mzc4NDkz", "number": 5485, "title": "Fix flaky CancelWorkflowInstanceConcurrentlyTest", "bodyText": "Description\nThere was a timing issue in the multi-instance scenario, where the test\ndid not wait for both of the jobs to be created. Then when re-starting\nthe engine, reprocessing occurs including the verification of\nreprocessing which would then fail because of this inconsistency.\nBy waiting for 2 jobs to be created and then taking the 1 of the correct\ntype, instead of just waiting for the 1 job, the test has become stable.\nRelated issues\ncloses #3606\nDefinition of Done\nNot all items need to be done depending on the issue and the pull request.\nCode changes:\n\n The changes are backwards compatibility with previous versions\n If it fixes a bug then PRs are created to backport the fix to the last two minor versions\n\nTesting:\n\n There are unit/integration tests that verify all acceptance criterias of the issue\n New tests are written to ensure backwards compatibility with further versions\n The behavior is tested manually\n The impact of the changes is verified by a benchmark\n\nDocumentation:\n\n The documentation is updated (e.g. BPMN reference, configuration, examples, get-started guides, etc.)\n New content is added to the release announcement", "createdAt": "2020-10-06T08:55:13Z", "url": "https://github.com/camunda-cloud/zeebe/pull/5485", "merged": true, "mergeCommit": {"oid": "8293ce40c62dee0987896dc64bbcddebe0293cc0"}, "closed": true, "closedAt": "2020-10-07T10:36:44Z", "author": {"login": "korthout"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdP0d8QAH2gAyNDk4Mzc4NDkzOjdiNjM0OTE4ZTNiN2Y3YmU2MjU2YzVkYzU1YzNjZGZiNDI5MzkzNDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQKJi5AFqTUwMzcyNDU0MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7b634918e3b7f7be6256c5dc55c3cdfb42939341", "author": {"user": {"login": "korthout", "name": "Nico Korthout"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/7b634918e3b7f7be6256c5dc55c3cdfb42939341", "committedDate": "2020-10-06T08:53:52Z", "message": "test(engine): fix flaky CancelWorkflowInstanceConcurrentlyTest\n\nThere was a timing issue in the multi-instance scenario, where the test\ndid not wait for both of the jobs to be created. Then when re-starting\nthe engine, reprocessing occurs including the verification of\nreprocessing which would then fail because of this inconsistency.\n\nBy waiting for 2 jobs to be created and then taking the 1 of the correct\ntype, instead of just waiting for the 1 job, the test has become stable..\n\nCo-authored-by: Philipp Ossler <philipp.ossler@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81e1a932cc06f353861f33994b21bf721c6713de", "author": {"user": {"login": "korthout", "name": "Nico Korthout"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/81e1a932cc06f353861f33994b21bf721c6713de", "committedDate": "2020-10-06T09:13:32Z", "message": "chore(git): sneak in .worktree into gitignore"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyOTg5NTg5", "url": "https://github.com/camunda-cloud/zeebe/pull/5485#pullrequestreview-502989589", "createdAt": "2020-10-06T13:55:13Z", "commit": {"oid": "81e1a932cc06f353861f33994b21bf721c6713de"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxMzo1NToxM1rOHdH7mw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQxMzo1NzowOVrOHdIDKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDMwMDY5OQ==", "bodyText": "What is this ? \ud83d\ude05", "url": "https://github.com/camunda-cloud/zeebe/pull/5485#discussion_r500300699", "createdAt": "2020-10-06T13:55:13Z", "author": {"login": "Zelldon"}, "path": ".gitignore", "diffHunk": "@@ -26,6 +26,7 @@ faces-config.NavData\n *.DS_Store\n .java-version\n .gradle\n+.worktree", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81e1a932cc06f353861f33994b21bf721c6713de"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDMwMjYzNQ==", "bodyText": "Not sure whether I understand that \ud83d\ude05 Why I need to review it ? \ud83d\ude06 I thought you have discussed that with @saig0 ? \ud83d\ude05", "url": "https://github.com/camunda-cloud/zeebe/pull/5485#discussion_r500302635", "createdAt": "2020-10-06T13:57:09Z", "author": {"login": "Zelldon"}, "path": "engine/src/test/java/io/zeebe/engine/processing/workflowinstance/CancelWorkflowInstanceConcurrentlyTest.java", "diffHunk": "@@ -144,6 +144,7 @@ public void init() {\n     createdJob =\n         RecordingExporter.jobRecords(JobIntent.CREATED)\n             .withWorkflowInstanceKey(workflowInstanceKey)\n+            .limit(2)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "81e1a932cc06f353861f33994b21bf721c6713de"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzNzI0NTQw", "url": "https://github.com/camunda-cloud/zeebe/pull/5485#pullrequestreview-503724540", "createdAt": "2020-10-07T10:09:30Z", "commit": {"oid": "81e1a932cc06f353861f33994b21bf721c6713de"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2414, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}