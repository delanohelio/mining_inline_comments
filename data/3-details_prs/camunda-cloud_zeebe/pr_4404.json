{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwMjMxOTk4", "number": 4404, "title": "chore(benchmarks): add development cluster setup", "bodyText": "Description\nAdds instructions on how to setup a development cluster from scratch. I ran into this issue when migrating from Helm 2 to 3, where I had no idea how the cluster had been set up and we didn't keep track of everything in the repository.\nThis also now accurately reflects how the cluster is setup, and additionally improves things a little bit:\n\nGrafana now has a persistent disk\nGrafana now automatically provisions the Zeebe dashboard\nOption to install Istio\nOption to install linkerd\n\nPull Request Checklist\n\n All commit messages match our commit message guidelines\n The submitting code follows our code style\n If submitting code, please run mvn clean install -DskipTests locally before committing", "createdAt": "2020-04-28T16:36:06Z", "url": "https://github.com/camunda-cloud/zeebe/pull/4404", "merged": true, "mergeCommit": {"oid": "83451303638b924676b7fa0ebd54e34f35f9ebd0"}, "closed": true, "closedAt": "2020-05-14T11:26:27Z", "author": {"login": "npepinpe"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcd-SyJgBqjMyOTk1NTM0MjA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABchLfD-ABqjMzMzYwNjc5NjU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5235a439260dcaaaec031dc9a684f708052d0fbb", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/5235a439260dcaaaec031dc9a684f708052d0fbb", "committedDate": "2020-04-28T16:33:20Z", "message": "chore(benchmarks): version cluster setup"}, "afterCommit": {"oid": "07b5340c8275a814bbb95bf09d774e9a997641d5", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/07b5340c8275a814bbb95bf09d774e9a997641d5", "committedDate": "2020-05-04T12:04:16Z", "message": "chore(benchmarks): version cluster setup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3NDQyNDE2", "url": "https://github.com/camunda-cloud/zeebe/pull/4404#pullrequestreview-407442416", "createdAt": "2020-05-07T12:55:57Z", "commit": {"oid": "07b5340c8275a814bbb95bf09d774e9a997641d5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxMjo1NTo1N1rOGR9L0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxMjo1NTo1N1rOGR9L0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTQ4MTQyNQ==", "bodyText": "Thats why I havent added it the last time to the benchmark folder \ud83d\ude05", "url": "https://github.com/camunda-cloud/zeebe/pull/4404#discussion_r421481425", "createdAt": "2020-05-07T12:55:57Z", "author": {"login": "Zelldon"}, "path": "benchmarks/cluster/prometheus-operator-values.yml", "diffHunk": "@@ -0,0 +1,49 @@\n+alertmanager:\n+  enabled: false\n+\n+grafana:\n+  adminPassword: camunda", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "07b5340c8275a814bbb95bf09d774e9a997641d5"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwNjE2OTk0", "url": "https://github.com/camunda-cloud/zeebe/pull/4404#pullrequestreview-410616994", "createdAt": "2020-05-13T06:19:50Z", "commit": {"oid": "ecd20b9e6566a0f0e871ad3e604295fd8a869693"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNjQzMzgy", "url": "https://github.com/camunda-cloud/zeebe/pull/4404#pullrequestreview-411643382", "createdAt": "2020-05-14T09:50:41Z", "commit": {"oid": "ecd20b9e6566a0f0e871ad3e604295fd8a869693"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwOTo1MDo0MVrOGVUrYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwOTo1MDo0MVrOGVUrYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTAxMjA2NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            helm install metrics stable/prometheus-operator --atomic\n          \n          \n            \n            helm install metrics stable/prometheus-operator --atomic -f prometheus-operator-values.yml", "url": "https://github.com/camunda-cloud/zeebe/pull/4404#discussion_r425012065", "createdAt": "2020-05-14T09:50:41Z", "author": {"login": "npepinpe"}, "path": "benchmarks/docs/setup/README.md", "diffHunk": "@@ -1,29 +1,90 @@\n-# Setup a GCloud Cluster\n+# Setup a development cluster\n \n-As first you have to create a new cluster in the Google cloud console.\n-https://cloud.google.com/kubernetes-engine/docs/how-to/creating-a-cluster?hl=de\n-If you want to switch between clusters easily install `kubectx`.\n-On creating the new cluster and node pool make sure you are using `europe-west1-b` as zone.\n-Otherwise the cluster can be a bit limited due to our billing settings.\n+> There are a few additional steps that need to be done when setting this up with a cloud provider, such as GCP.\n+> There is a GCP specific section at the end to help you do so.\n \n-After the google cloud cluster is set up. You need to do some more initial steps to get our benchmarks\n-running.\n+In order to be able to properly test in a clustered setup, the development cluster requires\n+certain tools to be installed in it.\n \n+> The following assumes that the cluster was already created and configured locally, e.g. there\n+> a valid Kubernetes context configuration on your local machine\n \n-## Setup Tiller Service Account\n+To set up a development cluster, first ensure you are using the right Kubernetes context pointing to\n+the cluster you want to set up.\n \n+> Note that unless otherwise stated, you only need to set up a cluster for development once\n+\n+## Requirements\n+\n+The same requirements apply here as the general project (e.g. Helm v3.x.x).\n+\n+It's a good idea to update your Helm charts before proceeding.\n+\n+```sh\n+helm repo update\n+```\n+\n+## Monitoring\n+\n+To monitor your cluster, we will set up a the [Prometheus Operator helm chart](https://github.com/helm/charts/tree/master/stable/prometheus-operator),\n+which will install the following components the operator and Grafana.\n+\n+To do so, run:\n+\n+```sh\n+helm install metrics stable/prometheus-operator --atomic", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ecd20b9e6566a0f0e871ad3e604295fd8a869693"}, "originalPosition": 44}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ba48f7e7bf1c0b7b174dc256b6d68863aad86662", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/ba48f7e7bf1c0b7b174dc256b6d68863aad86662", "committedDate": "2020-05-14T11:08:20Z", "message": "chore(benchmarks): version cluster setup"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ab6c6a377d201ac99fffd64d66f3b56faf69beab", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/ab6c6a377d201ac99fffd64d66f3b56faf69beab", "committedDate": "2020-05-14T09:52:16Z", "message": "chore(benchmarks): use correct values for prom operator"}, "afterCommit": {"oid": "ba48f7e7bf1c0b7b174dc256b6d68863aad86662", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/ba48f7e7bf1c0b7b174dc256b6d68863aad86662", "committedDate": "2020-05-14T11:08:20Z", "message": "chore(benchmarks): version cluster setup"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2879, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}