{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE2NjU5MjQw", "number": 5772, "title": "[Backport 0.25] chore(ci): move the IT (Java) stage to another agent", "bodyText": "Description\nBackport of #5717\nRelated issues\nNA", "createdAt": "2020-11-06T10:41:26Z", "url": "https://github.com/camunda-cloud/zeebe/pull/5772", "merged": true, "mergeCommit": {"oid": "91e57a98ea96386f45ecaacd262337288863794b"}, "closed": true, "closedAt": "2020-11-06T13:51:20Z", "author": {"login": "korthout"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZ0jYVgH2gAyNTE2NjU5MjQwOjE3NjFhYjllZmNjMDFiYTk5MGVhYmIxMzM5OTk4MTQwZDFjMjdmMjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZ2gp6gFqTUyNTEyNDgyNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1761ab9efcc01ba990eabb1339998140d1c27f24", "author": {"user": {"login": "korthout", "name": "Nico Korthout"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/1761ab9efcc01ba990eabb1339998140d1c27f24", "committedDate": "2020-11-06T10:39:03Z", "message": "chore(ci): move the IT (Java) stage to another agent\n\n(cherry picked from commit a4a7e24bc4541da4bfec9c23dd1b00a449ca0f8f)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1MTExNDQx", "url": "https://github.com/camunda-cloud/zeebe/pull/5772#pullrequestreview-525111441", "createdAt": "2020-11-06T12:34:55Z", "commit": {"oid": "1761ab9efcc01ba990eabb1339998140d1c27f24"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxMjozNDo1NVrOHusXQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxMjozNDo1NVrOHusXQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODcyMzM5Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                        sh '.ci/scripts/docker/build_zeebe-hazelcast-exporter.sh'\n          \n      \n    \n    \n  \n\nThis file should only exist in >= 0.26.0-alpha", "url": "https://github.com/camunda-cloud/zeebe/pull/5772#discussion_r518723393", "createdAt": "2020-11-06T12:34:55Z", "author": {"login": "pihme"}, "path": "Jenkinsfile", "diffHunk": "@@ -168,11 +168,35 @@ pipeline {\n                 }\n \n                 stage('IT (Java)') {\n+                    agent {\n+                        kubernetes {\n+                            cloud 'zeebe-ci'\n+                            label \"zeebe-ci-build_${buildName}_it\"\n+                            defaultContainer 'jnlp'\n+                            yamlFile '.ci/podSpecs/distribution.yml'\n+                        }\n+                    }\n+\n                     environment {\n-                      SUREFIRE_REPORT_NAME_SUFFIX = 'it-testrun'\n+                        SUREFIRE_REPORT_NAME_SUFFIX = 'it-testrun'\n+                        NEXUS = credentials(\"camunda-nexus\")\n+                        IMAGE = \"camunda/zeebe\"\n+                        VERSION = readMavenPom(file: 'parent/pom.xml').getVersion()\n+                        TAG = 'current-test'\n                     }\n \n                     steps {\n+                        container('maven') {\n+                            configFileProvider([configFile(fileId: 'maven-nexus-settings-zeebe', variable: 'MAVEN_SETTINGS_XML')]) {\n+                                sh '.ci/scripts/distribution/prepare.sh'\n+                                sh '.ci/scripts/distribution/build-java.sh'\n+                                sh 'cp dist/target/zeebe-distribution-*.tar.gz zeebe-distribution.tar.gz'\n+                            }\n+                        }\n+                        container('docker') {\n+                            sh '.ci/scripts/docker/build.sh'\n+                            sh '.ci/scripts/docker/build_zeebe-hazelcast-exporter.sh'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1761ab9efcc01ba990eabb1339998140d1c27f24"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e386ccae8659343704c1c38eba8adafdf2293b3d", "author": {"user": {"login": "korthout", "name": "Nico Korthout"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/e386ccae8659343704c1c38eba8adafdf2293b3d", "committedDate": "2020-11-06T12:53:06Z", "message": "chore(ci): remove unnecessary build hazelcast exporter\n\nCo-authored-by: Peter Ihme <pihme@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1MTI0ODI3", "url": "https://github.com/camunda-cloud/zeebe/pull/5772#pullrequestreview-525124827", "createdAt": "2020-11-06T12:55:53Z", "commit": {"oid": "e386ccae8659343704c1c38eba8adafdf2293b3d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2350, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}