{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI4OTE0NTY0", "number": 5938, "title": "Enable opt-in junit5 parallel tests", "bodyText": "Description\nThis PR enables junit5 parallel tests for profile parallel-tests. Note that this is opt-in: by default, all tests within a class run sequentially. However, you can now annotate these classes with the @Execution annotation to opt-in and run your tests in parallel. Default configuration is to run up to half of the number of cores in parallel.\nAs such, this PR is more of a stepping stone to allow further options for parallel test execution.\nRelated issues\nrelated #5873\nDefinition of Done\nNot all items need to be done depending on the issue and the pull request.\nCode changes:\n\n The changes are backwards compatibility with previous versions\n If it fixes a bug then PRs are created to backport the fix to the last two minor versions. You can trigger a backport by assigning labels (e.g. backport stable/0.25) to the PR, in case that fails you need to create backports manually.\n\nTesting:\n\n There are unit/integration tests that verify all acceptance criterias of the issue\n New tests are written to ensure backwards compatibility with further versions\n The behavior is tested manually\n The impact of the changes is verified by a benchmark\n\nDocumentation:\n\n The documentation is updated (e.g. BPMN reference, configuration, examples, get-started guides, etc.)\n New content is added to the release announcement", "createdAt": "2020-11-28T09:01:00Z", "url": "https://github.com/camunda-cloud/zeebe/pull/5938", "merged": true, "mergeCommit": {"oid": "6906b2e667543c3878b2e7f1af1c8f9a8e3072f3"}, "closed": true, "closedAt": "2020-12-03T17:25:36Z", "author": {"login": "npepinpe"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdg4e24ABqjQwNDc4MTA0NjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdimJIzABqjQwNjg2MTMyMzc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "95013630887332d3c7e98ec3643d675ba7ecfa8a", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/95013630887332d3c7e98ec3643d675ba7ecfa8a", "committedDate": "2020-11-28T08:53:54Z", "message": "chore(parent): enable junit parallel tests\n\n- junit5 parallel tests are enabled with profile parallel-tests\n- default configuration is based on number of cores divided by 2\n- parallel tests are opt in based on annotations"}, "afterCommit": {"oid": "9d9ec75961582305b89cb2667bad9dabb7ca5f4d", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/9d9ec75961582305b89cb2667bad9dabb7ca5f4d", "committedDate": "2020-11-28T09:11:04Z", "message": "chore(parent): enable junit parallel tests\n\n- junit5 parallel tests are enabled with profile parallel-tests\n- default configuration is based on number of cores divided by 2\n- parallel tests are opt in based on annotations"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9d9ec75961582305b89cb2667bad9dabb7ca5f4d", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/9d9ec75961582305b89cb2667bad9dabb7ca5f4d", "committedDate": "2020-11-28T09:11:04Z", "message": "chore(parent): enable junit parallel tests\n\n- junit5 parallel tests are enabled with profile parallel-tests\n- default configuration is based on number of cores divided by 2\n- parallel tests are opt in based on annotations"}, "afterCommit": {"oid": "195bee686c63d3b58b095426ae3db2e546082f80", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/195bee686c63d3b58b095426ae3db2e546082f80", "committedDate": "2020-11-28T09:36:16Z", "message": "chore(parent): enable junit parallel tests\n\n- junit5 parallel tests are enabled with profile parallel-tests\n- default configuration is based on number of cores divided by 2\n- parallel tests are opt in based on annotations"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "195bee686c63d3b58b095426ae3db2e546082f80", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/195bee686c63d3b58b095426ae3db2e546082f80", "committedDate": "2020-11-28T09:36:16Z", "message": "chore(parent): enable junit parallel tests\n\n- junit5 parallel tests are enabled with profile parallel-tests\n- default configuration is based on number of cores divided by 2\n- parallel tests are opt in based on annotations"}, "afterCommit": {"oid": "9895d2de7ebb617620362cefed697a197a8b64d6", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/9895d2de7ebb617620362cefed697a197a8b64d6", "committedDate": "2020-12-02T16:56:25Z", "message": "chore(parent): enable junit parallel tests\n\n- junit5 parallel tests are enabled with profile parallel-tests\n- default configuration is based on number of cores divided by 2\n- parallel tests are opt in based on annotations"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9895d2de7ebb617620362cefed697a197a8b64d6", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/9895d2de7ebb617620362cefed697a197a8b64d6", "committedDate": "2020-12-02T16:56:25Z", "message": "chore(parent): enable junit parallel tests\n\n- junit5 parallel tests are enabled with profile parallel-tests\n- default configuration is based on number of cores divided by 2\n- parallel tests are opt in based on annotations"}, "afterCommit": {"oid": "21d28e425c21e1c33aeb110e7df2231b6891bcf4", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/21d28e425c21e1c33aeb110e7df2231b6891bcf4", "committedDate": "2020-12-03T13:14:25Z", "message": "chore(parent): enable junit parallel tests\n\n- junit5 parallel tests are enabled with profile parallel-tests\n- default configuration is based on number of cores divided by 2\n- parallel tests are opt in based on annotations"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "21d28e425c21e1c33aeb110e7df2231b6891bcf4", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/21d28e425c21e1c33aeb110e7df2231b6891bcf4", "committedDate": "2020-12-03T13:14:25Z", "message": "chore(parent): enable junit parallel tests\n\n- junit5 parallel tests are enabled with profile parallel-tests\n- default configuration is based on number of cores divided by 2\n- parallel tests are opt in based on annotations"}, "afterCommit": {"oid": "4bc7c65bd3f0cef3a40a9a3335b61ac18203077b", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/4bc7c65bd3f0cef3a40a9a3335b61ac18203077b", "committedDate": "2020-12-03T13:26:49Z", "message": "chore(parent): enable junit parallel tests\n\n- junit5 parallel tests are enabled with profile parallel-tests\n- default configuration is based on number of cores divided by 2\n- parallel tests are opt in based on annotations"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0MDU4OTQz", "url": "https://github.com/camunda-cloud/zeebe/pull/5938#pullrequestreview-544058943", "createdAt": "2020-12-03T15:16:39Z", "commit": {"oid": "4bc7c65bd3f0cef3a40a9a3335b61ac18203077b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNToxNjozOVrOH-hZ_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QxNToxNjozOVrOH-hZ_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTMyMTA4Nw==", "bodyText": "So this will take the value 6 in our ci? I think we should set this explicitly in the scripts, just like the forkCount. It helps us reason about this for each specific case", "url": "https://github.com/camunda-cloud/zeebe/pull/5938#discussion_r535321087", "createdAt": "2020-12-03T15:16:39Z", "author": {"login": "korthout"}, "path": "parent/pom.xml", "diffHunk": "@@ -1267,6 +1267,7 @@\n       <id>parallel-tests</id>\n       <properties>\n         <forkCount>0.5C</forkCount>\n+        <junitThreadCount>0.5C</junitThreadCount>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4bc7c65bd3f0cef3a40a9a3335b61ac18203077b"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0MTcxOTg2", "url": "https://github.com/camunda-cloud/zeebe/pull/5938#pullrequestreview-544171986", "createdAt": "2020-12-03T16:53:06Z", "commit": {"oid": "ac62b58c85c2acab34e77cd03a5a7fa7adb48ce1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "596ea8da309c2b1c4619f3408a3fa46b72081163", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/596ea8da309c2b1c4619f3408a3fa46b72081163", "committedDate": "2020-12-03T16:56:28Z", "message": "chore(parent): enable junit parallel tests\n\n- junit5 parallel tests are enabled with profile parallel-tests\n- default configuration is based on number of cores divided by 2\n- parallel tests are opt in based on annotations\n- junit thread count can be overriden via the property junitThreadCount"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ac62b58c85c2acab34e77cd03a5a7fa7adb48ce1", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/ac62b58c85c2acab34e77cd03a5a7fa7adb48ce1", "committedDate": "2020-12-03T15:27:35Z", "message": "chore(ci): override junitThreadCount property"}, "afterCommit": {"oid": "596ea8da309c2b1c4619f3408a3fa46b72081163", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/596ea8da309c2b1c4619f3408a3fa46b72081163", "committedDate": "2020-12-03T16:56:28Z", "message": "chore(parent): enable junit parallel tests\n\n- junit5 parallel tests are enabled with profile parallel-tests\n- default configuration is based on number of cores divided by 2\n- parallel tests are opt in based on annotations\n- junit thread count can be overriden via the property junitThreadCount"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2287, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}