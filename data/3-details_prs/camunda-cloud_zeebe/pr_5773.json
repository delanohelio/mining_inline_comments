{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE2NjYxNTc1", "number": 5773, "title": "[Backport 0.24] chore(ci): move the IT (Java) stage to another agent", "bodyText": "Description\nBackport of #5717\nRelated issues\nNA", "createdAt": "2020-11-06T10:45:44Z", "url": "https://github.com/camunda-cloud/zeebe/pull/5773", "merged": true, "mergeCommit": {"oid": "4e8aa921606380bae1a442411dd88bfd451b4f21"}, "closed": true, "closedAt": "2020-11-06T13:24:05Z", "author": {"login": "korthout"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZ0nGngH2gAyNTE2NjYxNTc1OmFlODFiZDE3OTk3MTkxY2I3YjhkNzk3ZTM5MTkzM2NhZWRkMzFkMDg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdZ2g6hAFqTUyNTEyNTA0OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ae81bd17997191cb7b8d797e391933caedd31d08", "author": {"user": {"login": "korthout", "name": "Nico Korthout"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/ae81bd17997191cb7b8d797e391933caedd31d08", "committedDate": "2020-11-06T10:43:07Z", "message": "chore(ci): move the IT (Java) stage to another agent\n\n(cherry picked from commit a4a7e24bc4541da4bfec9c23dd1b00a449ca0f8f)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1MTEwNDA3", "url": "https://github.com/camunda-cloud/zeebe/pull/5773#pullrequestreview-525110407", "createdAt": "2020-11-06T12:33:17Z", "commit": {"oid": "ae81bd17997191cb7b8d797e391933caedd31d08"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxMjozMzoxN1rOHusUQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNlQxMjozMzoxN1rOHusUQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODcyMjYyNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                        sh '.ci/scripts/docker/build_zeebe-hazelcast-exporter.sh'\n          \n      \n    \n    \n  \n\nThis shell script should only exist in >=0.26.0-alpha", "url": "https://github.com/camunda-cloud/zeebe/pull/5773#discussion_r518722625", "createdAt": "2020-11-06T12:33:17Z", "author": {"login": "pihme"}, "path": "Jenkinsfile", "diffHunk": "@@ -156,11 +156,35 @@ pipeline {\n                 }\n \n                 stage('IT (Java)') {\n+                    agent {\n+                        kubernetes {\n+                            cloud 'zeebe-ci'\n+                            label \"zeebe-ci-build_${buildName}_it\"\n+                            defaultContainer 'jnlp'\n+                            yamlFile '.ci/podSpecs/distribution.yml'\n+                        }\n+                    }\n+\n                     environment {\n-                      SUREFIRE_REPORT_NAME_SUFFIX = 'it'\n+                        SUREFIRE_REPORT_NAME_SUFFIX = 'it'\n+                        NEXUS = credentials(\"camunda-nexus\")\n+                        IMAGE = \"camunda/zeebe\"\n+                        VERSION = readMavenPom(file: 'parent/pom.xml').getVersion()\n+                        TAG = 'current-test'\n                     }\n \n                     steps {\n+                        container('maven') {\n+                            configFileProvider([configFile(fileId: 'maven-nexus-settings-zeebe', variable: 'MAVEN_SETTINGS_XML')]) {\n+                                sh '.ci/scripts/distribution/prepare.sh'\n+                                sh '.ci/scripts/distribution/build-java.sh'\n+                                sh 'cp dist/target/zeebe-distribution-*.tar.gz zeebe-distribution.tar.gz'\n+                            }\n+                        }\n+                        container('docker') {\n+                            sh '.ci/scripts/docker/build.sh'\n+                            sh '.ci/scripts/docker/build_zeebe-hazelcast-exporter.sh'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae81bd17997191cb7b8d797e391933caedd31d08"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23c7d507bf19d058363a1521b9300bccb07f1340", "author": {"user": {"login": "korthout", "name": "Nico Korthout"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/23c7d507bf19d058363a1521b9300bccb07f1340", "committedDate": "2020-11-06T12:52:43Z", "message": "chore(ci): remove unnecessary build hazelcast exporter\n\nCo-authored-by: Peter Ihme <pihme@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1MTI1MDQ4", "url": "https://github.com/camunda-cloud/zeebe/pull/5773#pullrequestreview-525125048", "createdAt": "2020-11-06T12:56:10Z", "commit": {"oid": "23c7d507bf19d058363a1521b9300bccb07f1340"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2353, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}