{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYxNzMzNzQz", "number": 3638, "title": "feat(clients/go): require context to send commands", "bodyText": "Description\nChanges:\n\nevery command requires a context.Context to be sent and the timeout for that command is the one present in the context, if any\nCI now posts Go test results as soon as they finish\nrenamed 'containerSuite' package to 'containersuite' (golint)\nthe long-polling timeout is now set as 90% or 10 seconds less than the context timeout, whichever is longest\n\nRelated issues\n\ncloses #3530\nPull Request Checklist\n\n All commit messages match our commit message guidelines\n The submitting code follows our code style\n If submitting code, please run mvn clean install -DskipTests locally before committing", "createdAt": "2020-01-11T14:22:21Z", "url": "https://github.com/camunda-cloud/zeebe/pull/3638", "merged": true, "mergeCommit": {"oid": "86cd812831bef5984e0a239a0dc21ce9398adf33"}, "closed": true, "closedAt": "2020-01-13T11:22:29Z", "author": {"login": "MiguelPires"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb54ud3gFqTM0MTY4NjAxMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb55rdMABqjI5NDI1ODU4Nzc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxNjg2MDEw", "url": "https://github.com/camunda-cloud/zeebe/pull/3638#pullrequestreview-341686010", "createdAt": "2020-01-13T08:28:17Z", "commit": {"oid": "f1cf5a07098fb924621a9ac45465ca3216d23376"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QwODoyODoxOFrOFcvjfA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QwOToxMjozNlrOFcwfMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTY4MzU4MA==", "bodyText": "Would that make it so now we actually get the logs properly?", "url": "https://github.com/camunda-cloud/zeebe/pull/3638#discussion_r365683580", "createdAt": "2020-01-13T08:28:18Z", "author": {"login": "npepinpe"}, "path": "Jenkinsfile", "diffHunk": "@@ -74,6 +74,13 @@ pipeline {\n                     sh '.ci/scripts/distribution/test-go.sh'\n                 }\n             }\n+\n+            post {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1cf5a07098fb924621a9ac45465ca3216d23376"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTY5NjAyOQ==", "bodyText": "Just a small thing, wouldn't it be clearer to have a type here instead of a raw function signature for the retry predicate?", "url": "https://github.com/camunda-cloud/zeebe/pull/3638#discussion_r365696029", "createdAt": "2020-01-13T09:04:40Z", "author": {"login": "npepinpe"}, "path": "clients/go/pkg/commands/activateJobs_command.go", "diffHunk": "@@ -116,16 +107,14 @@ func (cmd *ActivateJobsCommand) Send() ([]entities.Job, error) {\n \treturn activatedJobs, nil\n }\n \n-func NewActivateJobsCommand(gateway pb.GatewayClient, requestTimeout time.Duration, retryPredicate func(context.Context, error) bool) ActivateJobsCommandStep1 {\n+func NewActivateJobsCommand(gateway pb.GatewayClient, retryPredicate func(context.Context, error) bool) ActivateJobsCommandStep1 {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1cf5a07098fb924621a9ac45465ca3216d23376"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTY5ODg2Ng==", "bodyText": "Is longPollMillis also coming from activateJobs_command_test.go? In this case, shouldn't we use utils.DefaultTestTimeout instead of 5*time.Second when creating the context here as well?", "url": "https://github.com/camunda-cloud/zeebe/pull/3638#discussion_r365698866", "createdAt": "2020-01-13T09:12:36Z", "author": {"login": "npepinpe"}, "path": "clients/go/pkg/commands/createInstance_command_test.go", "diffHunk": "@@ -372,7 +373,7 @@ func TestCreateWorkflowInstanceWithResultCommand(t *testing.T) {\n \t\tRequest: &pb.CreateWorkflowInstanceRequest{\n \t\t\tWorkflowKey: 123,\n \t\t},\n-\t\tRequestTimeout: utils.DefaultTestTimeoutInMs,\n+\t\tRequestTimeout: longPollMillis,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1cf5a07098fb924621a9ac45465ca3216d23376"}, "originalPosition": 151}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f1cf5a07098fb924621a9ac45465ca3216d23376", "author": {"user": null}, "url": "https://github.com/camunda-cloud/zeebe/commit/f1cf5a07098fb924621a9ac45465ca3216d23376", "committedDate": "2020-01-10T15:46:02Z", "message": "feat(clients/go): require context to send commands\n\nBREAKING CHANGE:\nAdds a context.Context to the #Send() method of every command. The command timeout can only be set in this context\nRenamed package 'containerSuite' to 'containersuite'\nThe long-polling timeout can't be configured manually and is now set as 90% or 10s less than the context timeout."}, "afterCommit": {"oid": "c9d415c4e355928313854ea5826a14c51b592061", "author": {"user": null}, "url": "https://github.com/camunda-cloud/zeebe/commit/c9d415c4e355928313854ea5826a14c51b592061", "committedDate": "2020-01-13T09:56:23Z", "message": "feat(clients/go): require context to send commands\n\nBREAKING CHANGE:\nAdds a context.Context to the #Send() method of every command. The command timeout can only be set in this context\nRenamed package 'containerSuite' to 'containersuite'\nThe long-polling timeout can't be configured manually and is now set as 90% or 10s less than the context timeout."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86cd812831bef5984e0a239a0dc21ce9398adf33", "author": {"user": null}, "url": "https://github.com/camunda-cloud/zeebe/commit/86cd812831bef5984e0a239a0dc21ce9398adf33", "committedDate": "2020-01-13T10:20:25Z", "message": "feat(clients/go): require context to send commands\n\nBREAKING CHANGE:\nAdds a context.Context to the #Send() method of every command. The command timeout can only be set in this context\nRenamed package 'containerSuite' to 'containersuite'\nThe long-polling timeout can't be configured manually and is now set as 90% or 10s less than the context timeout."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c9d415c4e355928313854ea5826a14c51b592061", "author": {"user": null}, "url": "https://github.com/camunda-cloud/zeebe/commit/c9d415c4e355928313854ea5826a14c51b592061", "committedDate": "2020-01-13T09:56:23Z", "message": "feat(clients/go): require context to send commands\n\nBREAKING CHANGE:\nAdds a context.Context to the #Send() method of every command. The command timeout can only be set in this context\nRenamed package 'containerSuite' to 'containersuite'\nThe long-polling timeout can't be configured manually and is now set as 90% or 10s less than the context timeout."}, "afterCommit": {"oid": "86cd812831bef5984e0a239a0dc21ce9398adf33", "author": {"user": null}, "url": "https://github.com/camunda-cloud/zeebe/commit/86cd812831bef5984e0a239a0dc21ce9398adf33", "committedDate": "2020-01-13T10:20:25Z", "message": "feat(clients/go): require context to send commands\n\nBREAKING CHANGE:\nAdds a context.Context to the #Send() method of every command. The command timeout can only be set in this context\nRenamed package 'containerSuite' to 'containersuite'\nThe long-polling timeout can't be configured manually and is now set as 90% or 10s less than the context timeout."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3186, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}