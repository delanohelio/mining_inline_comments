{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2ODEwMzgx", "number": 3735, "title": "Refactor gateway version command", "bodyText": "Description\nMoves the gateway version into the topology command and removes the gateway version command.\nRelated issues\ncloses #3734\nPull Request Checklist\n\n All commit messages match our commit message guidelines\n The submitting code follows our code style\n If submitting code, please run mvn clean install -DskipTests locally before committing", "createdAt": "2020-01-24T12:16:55Z", "url": "https://github.com/camunda-cloud/zeebe/pull/3735", "merged": true, "mergeCommit": {"oid": "6fa432f818540e6b25509d85c97bf48c67323cb2"}, "closed": true, "closedAt": "2020-01-27T10:57:55Z", "author": {"login": "MiguelPires"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb9eioIgBqjI5NzcxNDQ1Njg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb-aRTgABqjI5ODEyNjQ3MDA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fabc6367b3c50a7e730584f15e769ba4a38310bc", "author": {"user": null}, "url": "https://github.com/camunda-cloud/zeebe/commit/fabc6367b3c50a7e730584f15e769ba4a38310bc", "committedDate": "2020-01-24T11:24:13Z", "message": "chore(clients/go): include gatewayVersion in topology cmd"}, "afterCommit": {"oid": "ff84d166c403724b29ddac669278a485fd2804ee", "author": {"user": null}, "url": "https://github.com/camunda-cloud/zeebe/commit/ff84d166c403724b29ddac669278a485fd2804ee", "committedDate": "2020-01-24T12:58:59Z", "message": "chore(clients/go): include gatewayVersion in topology cmd"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4MzE2NjM5", "url": "https://github.com/camunda-cloud/zeebe/pull/3735#pullrequestreview-348316639", "createdAt": "2020-01-25T08:33:43Z", "commit": {"oid": "ff84d166c403724b29ddac669278a485fd2804ee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNVQwODozMzo0M1rOFhvRjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNVQwODozMzo0M1rOFhvRjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkyMTg3MA==", "bodyText": "Can't we assert the correct version?", "url": "https://github.com/camunda-cloud/zeebe/pull/3735#discussion_r370921870", "createdAt": "2020-01-25T08:33:43Z", "author": {"login": "npepinpe"}, "path": "qa/integration-tests/src/test/java/io/zeebe/broker/it/clustering/topology/TopologyClusterTest.java", "diffHunk": "@@ -85,5 +85,6 @@ public void shouldExposeClusterSettings() {\n     assertThat(topology.getClusterSize()).isEqualTo(CLUSTERING_RULE.getClusterSize());\n     assertThat(topology.getPartitionsCount()).isEqualTo(CLUSTERING_RULE.getPartitionCount());\n     assertThat(topology.getReplicationFactor()).isEqualTo(CLUSTERING_RULE.getReplicationFactor());\n+    assertThat(topology.getGatewayVersion()).isNotBlank();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff84d166c403724b29ddac669278a485fd2804ee"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9261f4ea3746c6d401520b8a16e12fcf05fcfa2c", "author": {"user": null}, "url": "https://github.com/camunda-cloud/zeebe/commit/9261f4ea3746c6d401520b8a16e12fcf05fcfa2c", "committedDate": "2020-01-25T12:36:53Z", "message": "chore(qa): test fix"}, "afterCommit": {"oid": "ff84d166c403724b29ddac669278a485fd2804ee", "author": {"user": null}, "url": "https://github.com/camunda-cloud/zeebe/commit/ff84d166c403724b29ddac669278a485fd2804ee", "committedDate": "2020-01-24T12:58:59Z", "message": "chore(clients/go): include gatewayVersion in topology cmd"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4NTA2ODY1", "url": "https://github.com/camunda-cloud/zeebe/pull/3735#pullrequestreview-348506865", "createdAt": "2020-01-27T08:53:48Z", "commit": {"oid": "ff84d166c403724b29ddac669278a485fd2804ee"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QwODo1Mzo0OVrOFh7RrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QwOTowNjozMlrOFh7meQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTExODUwOA==", "bodyText": "Any reason why we don't test the value here?", "url": "https://github.com/camunda-cloud/zeebe/pull/3735#discussion_r371118508", "createdAt": "2020-01-27T08:53:49Z", "author": {"login": "npepinpe"}, "path": "clients/go/test/integration_test.go", "diffHunk": "@@ -72,6 +71,7 @@ func (s *integrationTestSuite) TestTopology() {\n \ts.EqualValues(1, response.GetClusterSize())\n \ts.EqualValues(1, response.GetPartitionsCount())\n \ts.EqualValues(1, response.GetReplicationFactor())\n+\ts.NotEmpty(response.GetGatewayVersion())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff84d166c403724b29ddac669278a485fd2804ee"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEyMzgzMw==", "bodyText": "just a nit pick, feel free to ignore, afaik if the version is blank is that that's what we set when we built the JAR, so not sure if it's all that important to check it here.", "url": "https://github.com/camunda-cloud/zeebe/pull/3735#discussion_r371123833", "createdAt": "2020-01-27T09:06:32Z", "author": {"login": "npepinpe"}, "path": "gateway/src/main/java/io/zeebe/gateway/EndpointManager.java", "diffHunk": "@@ -251,6 +249,11 @@ public void topology(\n           .setPartitionsCount(topology.getPartitionsCount())\n           .setReplicationFactor(topology.getReplicationFactor());\n \n+      final String gatewayVersion = getClass().getPackage().getImplementationVersion();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff84d166c403724b29ddac669278a485fd2804ee"}, "originalPosition": 13}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eb978a9e00d5c33aebb57e9cfc258a94dcf8c8ee", "author": {"user": null}, "url": "https://github.com/camunda-cloud/zeebe/commit/eb978a9e00d5c33aebb57e9cfc258a94dcf8c8ee", "committedDate": "2020-01-27T08:56:15Z", "message": "chore(qa): test improvement"}, "afterCommit": {"oid": "ff84d166c403724b29ddac669278a485fd2804ee", "author": {"user": null}, "url": "https://github.com/camunda-cloud/zeebe/commit/ff84d166c403724b29ddac669278a485fd2804ee", "committedDate": "2020-01-24T12:58:59Z", "message": "chore(clients/go): include gatewayVersion in topology cmd"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4NTQ1NjQ1", "url": "https://github.com/camunda-cloud/zeebe/pull/3735#pullrequestreview-348545645", "createdAt": "2020-01-27T10:02:01Z", "commit": {"oid": "4c28e050b0cf96febdcbf8e04a06f4179d7f8e62"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd584f26409504624e41fedd151d5c305a0bb9a4", "author": {"user": null}, "url": "https://github.com/camunda-cloud/zeebe/commit/bd584f26409504624e41fedd151d5c305a0bb9a4", "committedDate": "2020-01-27T10:34:26Z", "message": "chore(gateway): move gatewayVersion into topology RPC"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e7c77af4059fbcab883ec17b23ce1c5140cede8", "author": {"user": null}, "url": "https://github.com/camunda-cloud/zeebe/commit/9e7c77af4059fbcab883ec17b23ce1c5140cede8", "committedDate": "2020-01-27T10:34:26Z", "message": "chore(clients/java): include gatewayVersion in topology cmd"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6fa432f818540e6b25509d85c97bf48c67323cb2", "author": {"user": null}, "url": "https://github.com/camunda-cloud/zeebe/commit/6fa432f818540e6b25509d85c97bf48c67323cb2", "committedDate": "2020-01-27T10:34:26Z", "message": "chore(clients/go): include gatewayVersion in topology cmd"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4c28e050b0cf96febdcbf8e04a06f4179d7f8e62", "author": {"user": null}, "url": "https://github.com/camunda-cloud/zeebe/commit/4c28e050b0cf96febdcbf8e04a06f4179d7f8e62", "committedDate": "2020-01-27T10:01:04Z", "message": "chore(qa): improve test"}, "afterCommit": {"oid": "6fa432f818540e6b25509d85c97bf48c67323cb2", "author": {"user": null}, "url": "https://github.com/camunda-cloud/zeebe/commit/6fa432f818540e6b25509d85c97bf48c67323cb2", "committedDate": "2020-01-27T10:34:26Z", "message": "chore(clients/go): include gatewayVersion in topology cmd"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3103, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}