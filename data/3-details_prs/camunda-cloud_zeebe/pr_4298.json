{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyOTk2NTAw", "number": 4298, "title": "Remove bootstrapping raft cluster logic", "bodyText": "Description\nRemove bootstrap cluster logic, which was based on zeebe-io/atomix@8e03d0e#diff-2b7ee5642689e551130f883959f7174e\nto avoid disrubtion of cluster on bootstrap and race conditions.\nThis feature made lot of tests flaky, since the ordering was not 100% guaranteed. It happens that node become later available, but were in charge to bootstrap partition.\nThis means cluster was already formed and leader choosen, when the node which should bootstrap partition\nbecomes available it tried to become leader (it directly transition to candidate).\n\nRelated issues\n\nrelated #4260\nrelated #4258\ncloses #4147\nPull Request Checklist\n\n All commit messages match our commit message guidelines\n The submitting code follows our code style\n If submitting code, please run mvn clean install -DskipTests locally before committing", "createdAt": "2020-04-14T06:36:31Z", "url": "https://github.com/camunda-cloud/zeebe/pull/4298", "merged": true, "mergeCommit": {"oid": "f3807b90c74e9ef0a094b8368ca6bb8c962e713c"}, "closed": true, "closedAt": "2020-04-14T12:56:37Z", "author": {"login": "Zelldon"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcXdaXRgH2gAyNDAyOTk2NTAwOmM2YzEzNTk4Mzk1MGVjNjExMGQ2ZDBlOWZhODNmZjc1ZGNhMThiMWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcXizn9ABqjMyMzA5NDUzMTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c6c135983950ec6110d6d0e9fa83ff75dca18b1a", "author": {"user": {"login": "Zelldon", "name": "Christopher Zell"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/c6c135983950ec6110d6d0e9fa83ff75dca18b1a", "committedDate": "2020-04-14T06:22:23Z", "message": "chore(atomix): increase timeout of atomix tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyNzQxNjU0", "url": "https://github.com/camunda-cloud/zeebe/pull/4298#pullrequestreview-392741654", "createdAt": "2020-04-14T09:09:39Z", "commit": {"oid": "4512f2e5e25c7a51e31dbab74ebce1abe25a544e"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwOTowOTozOVrOGFFU2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwOTowOTozOVrOGFFU2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzk4MzMyMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              public void onHeartbeatTimeout(final Duration delay) {\n          \n          \n            \n              private void onHeartbeatTimeout(final Duration delay) {", "url": "https://github.com/camunda-cloud/zeebe/pull/4298#discussion_r407983320", "createdAt": "2020-04-14T09:09:39Z", "author": {"login": "deepthidevaki"}, "path": "atomix/cluster/src/main/java/io/atomix/raft/roles/FollowerRole.java", "diffHunk": "@@ -274,7 +274,7 @@ private void schedulePollRequests(final Duration delay) {\n     }\n   }\n \n-  private void onHeartbeatTimeout(final Duration delay) {\n+  public void onHeartbeatTimeout(final Duration delay) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4512f2e5e25c7a51e31dbab74ebce1abe25a544e"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f68f6f02e19f82f34aee53ad866e13f9a2aa95d1", "author": {"user": {"login": "Zelldon", "name": "Christopher Zell"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/f68f6f02e19f82f34aee53ad866e13f9a2aa95d1", "committedDate": "2020-04-14T12:39:01Z", "message": "chore(atomix): remove bootstrap logic\n\n Remove bootstrap cluster logic, which was based on https://github.com/zeebe-io/atomix/commit/8e03d0e18ed4dd71c7faab4dbd413725560ee1b5#diff-2b7ee5642689e551130f883959f7174e\n to avoid disrubtion of cluster on bootstrap and race conditions.\n\n This feature made lot of tests flaky, since the ordering was not 100% guaranteed. It happens that node become later available, but were in charge to bootstrap partition.\n This means cluster was already formed and leader choosen, when the node which should bootstrap partition\n becomes available it tried to become leader (it directly transition to candidate)."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "50bcf40c3f25ef23ea842d48c571ce2aeaeab44e", "author": {"user": {"login": "Zelldon", "name": "Christopher Zell"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/50bcf40c3f25ef23ea842d48c571ce2aeaeab44e", "committedDate": "2020-04-14T09:18:12Z", "message": "chore(atomix): Update atomix/cluster/src/main/java/io/atomix/raft/roles/FollowerRole.java\n\nCo-Authored-By: Deepthi Devaki Akkoorath <deepthidevaki@users.noreply.github.com>"}, "afterCommit": {"oid": "f68f6f02e19f82f34aee53ad866e13f9a2aa95d1", "author": {"user": {"login": "Zelldon", "name": "Christopher Zell"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/f68f6f02e19f82f34aee53ad866e13f9a2aa95d1", "committedDate": "2020-04-14T12:39:01Z", "message": "chore(atomix): remove bootstrap logic\n\n Remove bootstrap cluster logic, which was based on https://github.com/zeebe-io/atomix/commit/8e03d0e18ed4dd71c7faab4dbd413725560ee1b5#diff-2b7ee5642689e551130f883959f7174e\n to avoid disrubtion of cluster on bootstrap and race conditions.\n\n This feature made lot of tests flaky, since the ordering was not 100% guaranteed. It happens that node become later available, but were in charge to bootstrap partition.\n This means cluster was already formed and leader choosen, when the node which should bootstrap partition\n becomes available it tried to become leader (it directly transition to candidate)."}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3013, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}