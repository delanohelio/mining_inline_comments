{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczMjAwMjIw", "number": 3820, "title": "feat(clients/java): new response objects for java client API", "bodyText": "Description\nIntroduced response objects for all commands in the java API client. The response objects replace the Void response in the existing interface. The purpose of this is to have placeholder empty responses now, which we could extend with fields in the future, if needed.\nExtending the response objects with new fields will not be a breaking change. Keeping the Void response type and introducing response types later would be a breaking change.\nNote that this also led to renaming of existing response types. In particular responses of the pattern *Event were renamed to *Response and their naming was aligned with the name of the command.\nNote that there are remaining inconsistencies in the naming. It was decided that these should be dealt with in a new issue: #3819\nRelated issues\ncloses #3755\nPull Request Checklist\n\n[ X ] All commit messages match our commit message guidelines\n[ X ] The submitting code follows our code style\n[ X ] If submitting code, please run mvn clean install -DskipTests locally before committing", "createdAt": "2020-02-10T15:33:10Z", "url": "https://github.com/camunda-cloud/zeebe/pull/3820", "merged": true, "mergeCommit": {"oid": "14b3027048c76e9fc60e48c6924b8643538b708d"}, "closed": true, "closedAt": "2020-02-11T12:52:17Z", "author": {"login": "pihme"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcC_BqdABqjMwMjMyMjkyNjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDQnRhAFqTM1NjYwNTk3Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "871631d71fc31c3c22c2ac191a4e29805ab03c44", "author": {"user": {"login": "pihme", "name": "Peter Ihme"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/871631d71fc31c3c22c2ac191a4e29805ab03c44", "committedDate": "2020-02-10T14:18:05Z", "message": "feat(clients/java) new response objects for java client API\n\n+ Renaming of existing response objects for consistency"}, "afterCommit": {"oid": "614310e1fb19b59d377471b0ea6a4631330b0033", "author": {"user": {"login": "pihme", "name": "Peter Ihme"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/614310e1fb19b59d377471b0ea6a4631330b0033", "committedDate": "2020-02-10T15:36:43Z", "message": "feat(clients/java): New response objects for java client API\n\n+ Renaming of existing response objects for consistency"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2NDM1NzM3", "url": "https://github.com/camunda-cloud/zeebe/pull/3820#pullrequestreview-356435737", "createdAt": "2020-02-11T06:28:28Z", "commit": {"oid": "614310e1fb19b59d377471b0ea6a4631330b0033"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQwNjoyODoyOFrOFn-bfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQwNzowNDoyNVrOFn-4fQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQ2MTYyOQ==", "bodyText": "Why do we need to declare changes in the impl package?\nI think the compatibility checker should look only at the api package, right?", "url": "https://github.com/camunda-cloud/zeebe/pull/3820#discussion_r377461629", "createdAt": "2020-02-11T06:28:28Z", "author": {"login": "saig0"}, "path": "clients/java/ignored-changes.xml", "diffHunk": "@@ -0,0 +1,34 @@\n+<differences>\n+  <difference>\n+    <className>io/zeebe/client/api/response/DeploymentEvent</className>\n+    <differenceType>8001</differenceType>\n+  </difference>\n+  <difference>\n+    <className>io/zeebe/client/api/response/JobEvent</className>\n+    <differenceType>8001</differenceType>\n+  </difference>\n+  <difference>\n+    <className>io/zeebe/client/api/response/WorkflowInstanceEvent</className>\n+    <differenceType>8001</differenceType>\n+  </difference>\n+  <difference>\n+    <className>io/zeebe/client/api/response/WorkflowInstanceResult</className>\n+    <differenceType>8001</differenceType>\n+  </difference>\n+  <difference>\n+    <className>io/zeebe/client/impl/response/DeploymentEventImpl</className>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "614310e1fb19b59d377471b0ea6a4631330b0033"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQ2NDE2Mw==", "bodyText": "We should think about the renaming of the return types again. This change will break the Java client API for some users and they need to adjust their code.\nIMO: CreateWorkflowInstanceResponse is not a better name as WorkflowInstanceEvent because the response is the resulting event of the command. If the command is rejected then an exception will be thrown.", "url": "https://github.com/camunda-cloud/zeebe/pull/3820#discussion_r377464163", "createdAt": "2020-02-11T06:41:16Z", "author": {"login": "saig0"}, "path": "clients/java/src/main/java/io/zeebe/client/api/command/CreateWorkflowInstanceCommandStep1.java", "diffHunk": "@@ -64,7 +64,8 @@\n     CreateWorkflowInstanceCommandStep3 latestVersion();\n   }\n \n-  interface CreateWorkflowInstanceCommandStep3 extends FinalCommandStep<WorkflowInstanceEvent> {\n+  interface CreateWorkflowInstanceCommandStep3\n+      extends FinalCommandStep<CreateWorkflowInstanceResponse> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "614310e1fb19b59d377471b0ea6a4631330b0033"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQ2NTgxMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        io.zeebe.gateway.protocol.GatewayOuterClass.CreateWorkflowInstanceWithResultResponse>\n          \n          \n            \n                       GatewayOuterClass.CreateWorkflowInstanceWithResultResponse>", "url": "https://github.com/camunda-cloud/zeebe/pull/3820#discussion_r377465811", "createdAt": "2020-02-11T06:49:23Z", "author": {"login": "saig0"}, "path": "clients/java/src/main/java/io/zeebe/client/impl/command/CreateWorkflowInstanceWithResultCommandImpl.java", "diffHunk": "@@ -60,22 +59,24 @@ public CreateWorkflowInstanceWithResultCommandImpl(\n   }\n \n   @Override\n-  public FinalCommandStep<WorkflowInstanceResult> requestTimeout(final Duration requestTimeout) {\n+  public FinalCommandStep<CreateWorkflowInstanceWithResultResponse> requestTimeout(\n+      final Duration requestTimeout) {\n     this.requestTimeout = requestTimeout;\n     this.builder.setRequestTimeout(requestTimeout.toMillis());\n     return this;\n   }\n \n   @Override\n-  public ZeebeFuture<WorkflowInstanceResult> send() {\n+  public ZeebeFuture<CreateWorkflowInstanceWithResultResponse> send() {\n     final CreateWorkflowInstanceWithResultRequest request =\n         builder\n             .setRequest(createWorkflowInstanceRequestBuilder)\n             .setRequestTimeout(requestTimeout.toMillis())\n             .build();\n \n     final RetriableClientFutureImpl<\n-            WorkflowInstanceResult, CreateWorkflowInstanceWithResultResponse>\n+            CreateWorkflowInstanceWithResultResponse,\n+            io.zeebe.gateway.protocol.GatewayOuterClass.CreateWorkflowInstanceWithResultResponse>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "614310e1fb19b59d377471b0ea6a4631330b0033"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQ2NTkyNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        io.zeebe.gateway.protocol.GatewayOuterClass.DeployWorkflowResponse>\n          \n          \n            \n                       GatewayOuterClass.DeployWorkflowResponse>", "url": "https://github.com/camunda-cloud/zeebe/pull/3820#discussion_r377465924", "createdAt": "2020-02-11T06:49:55Z", "author": {"login": "saig0"}, "path": "clients/java/src/main/java/io/zeebe/client/impl/command/DeployWorkflowCommandImpl.java", "diffHunk": "@@ -147,20 +146,23 @@ public DeployWorkflowCommandBuilderStep2 addWorkflowModel(\n   }\n \n   @Override\n-  public FinalCommandStep<DeploymentEvent> requestTimeout(final Duration requestTimeout) {\n+  public FinalCommandStep<DeployWorkflowResponse> requestTimeout(final Duration requestTimeout) {\n     this.requestTimeout = requestTimeout;\n     return this;\n   }\n \n   @Override\n-  public ZeebeFuture<DeploymentEvent> send() {\n+  public ZeebeFuture<DeployWorkflowResponse> send() {\n     final DeployWorkflowRequest request = requestBuilder.build();\n \n-    final RetriableClientFutureImpl<DeploymentEvent, DeployWorkflowResponse> future =\n-        new RetriableClientFutureImpl<>(\n-            DeploymentEventImpl::new,\n-            retryPredicate,\n-            streamObserver -> send(request, streamObserver));\n+    final RetriableClientFutureImpl<\n+            DeployWorkflowResponse,\n+            io.zeebe.gateway.protocol.GatewayOuterClass.DeployWorkflowResponse>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "614310e1fb19b59d377471b0ea6a4631330b0033"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQ2NjI3Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  final io.zeebe.gateway.protocol.GatewayOuterClass.DeployWorkflowResponse response) {\n          \n          \n            \n                  final GatewayOuterClass.DeployWorkflowResponse response) {", "url": "https://github.com/camunda-cloud/zeebe/pull/3820#discussion_r377466276", "createdAt": "2020-02-11T06:51:41Z", "author": {"login": "saig0"}, "path": "clients/java/src/main/java/io/zeebe/client/impl/response/DeployWorkflowResponseImpl.java", "diffHunk": "@@ -15,18 +15,18 @@\n  */\n package io.zeebe.client.impl.response;\n \n-import io.zeebe.client.api.response.DeploymentEvent;\n+import io.zeebe.client.api.response.DeployWorkflowResponse;\n import io.zeebe.client.api.response.Workflow;\n-import io.zeebe.gateway.protocol.GatewayOuterClass.DeployWorkflowResponse;\n import java.util.List;\n import java.util.stream.Collectors;\n \n-public final class DeploymentEventImpl implements DeploymentEvent {\n+public final class DeployWorkflowResponseImpl implements DeployWorkflowResponse {\n \n   private final long key;\n   private final List<Workflow> workflows;\n \n-  public DeploymentEventImpl(final DeployWorkflowResponse response) {\n+  public DeployWorkflowResponseImpl(\n+      final io.zeebe.gateway.protocol.GatewayOuterClass.DeployWorkflowResponse response) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "614310e1fb19b59d377471b0ea6a4631330b0033"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQ2NjgyMw==", "bodyText": "You changed the import but not the class name in the code where it is used.", "url": "https://github.com/camunda-cloud/zeebe/pull/3820#discussion_r377466823", "createdAt": "2020-02-11T06:54:24Z", "author": {"login": "saig0"}, "path": "docs/src/clients/java-client/get-started.md", "diffHunk": "@@ -200,7 +200,7 @@ Add the following create command to the main class:\n ```java\n package io.zeebe;\n \n-import io.zeebe.client.api.response.WorkflowInstanceEvent;\n+import io.zeebe.client.api.response.CreateWorkflowInstanceResponse;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "614310e1fb19b59d377471b0ea6a4631330b0033"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQ2Njk3Nw==", "bodyText": "The class name is not changed in code where it is used.", "url": "https://github.com/camunda-cloud/zeebe/pull/3820#discussion_r377466977", "createdAt": "2020-02-11T06:55:07Z", "author": {"login": "saig0"}, "path": "docs/src/clients/java-client/testing.md", "diffHunk": "@@ -20,7 +20,7 @@ Use the `ZeebeTestRule` in your test case to start an embedded broker. It contai\n \n ```java\n import io.zeebe.client.ZeebeClient;\n-import io.zeebe.client.api.response.WorkflowInstanceEvent;\n+import io.zeebe.client.api.response.CreateWorkflowInstanceResponse;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "614310e1fb19b59d377471b0ea6a4631330b0033"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQ2ODE0MA==", "bodyText": "This is a long name and feels kind of clunky \ud83d\ude05", "url": "https://github.com/camunda-cloud/zeebe/pull/3820#discussion_r377468140", "createdAt": "2020-02-11T07:00:08Z", "author": {"login": "saig0"}, "path": "clients/java/src/main/java/io/zeebe/client/api/response/CreateWorkflowInstanceWithResultResponse.java", "diffHunk": "@@ -17,7 +17,7 @@\n \n import java.util.Map;\n \n-public interface WorkflowInstanceResult {\n+public interface CreateWorkflowInstanceWithResultResponse {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "614310e1fb19b59d377471b0ea6a4631330b0033"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzQ2OTA1Mw==", "bodyText": "The name DeployWorkflowResponse does not feel right for me. The deployment command can contain multiple resources and the command does not contain the term workflow.\nDeployWorkflowResponse deployWorkflowResponse =\n          client.newDeployCommand().addResourceFromClasspath(\"demoProcess.bpmn\").send().join();\n\nWhat do you think about DeploymentResponse or DeployResponse?", "url": "https://github.com/camunda-cloud/zeebe/pull/3820#discussion_r377469053", "createdAt": "2020-02-11T07:04:25Z", "author": {"login": "saig0"}, "path": "clients/java/src/main/java/io/zeebe/client/api/response/DeployWorkflowResponse.java", "diffHunk": "@@ -17,7 +17,7 @@\n \n import java.util.List;\n \n-public interface DeploymentEvent {\n+public interface DeployWorkflowResponse {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "614310e1fb19b59d377471b0ea6a4631330b0033"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "614310e1fb19b59d377471b0ea6a4631330b0033", "author": {"user": {"login": "pihme", "name": "Peter Ihme"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/614310e1fb19b59d377471b0ea6a4631330b0033", "committedDate": "2020-02-10T15:36:43Z", "message": "feat(clients/java): New response objects for java client API\n\n+ Renaming of existing response objects for consistency"}, "afterCommit": {"oid": "e4d61d01fc929cae30dd36ec6bf19c9e342e1aa5", "author": {"user": {"login": "pihme", "name": "Peter Ihme"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/e4d61d01fc929cae30dd36ec6bf19c9e342e1aa5", "committedDate": "2020-02-11T10:21:13Z", "message": "feat(clients/java): New response objects for java client API"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e4d61d01fc929cae30dd36ec6bf19c9e342e1aa5", "author": {"user": {"login": "pihme", "name": "Peter Ihme"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/e4d61d01fc929cae30dd36ec6bf19c9e342e1aa5", "committedDate": "2020-02-11T10:21:13Z", "message": "feat(clients/java): New response objects for java client API"}, "afterCommit": {"oid": "7d7449cf13fbc4fbec75d59127a7a134bf8ac203", "author": {"user": {"login": "pihme", "name": "Peter Ihme"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/7d7449cf13fbc4fbec75d59127a7a134bf8ac203", "committedDate": "2020-02-11T10:37:00Z", "message": "feat(clients/java): New response objects for java client API"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7d7449cf13fbc4fbec75d59127a7a134bf8ac203", "author": {"user": {"login": "pihme", "name": "Peter Ihme"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/7d7449cf13fbc4fbec75d59127a7a134bf8ac203", "committedDate": "2020-02-11T10:37:00Z", "message": "feat(clients/java): New response objects for java client API"}, "afterCommit": {"oid": "3fc04db95a37fb0c144f6793cd0916f0a8b45cdf", "author": {"user": {"login": "pihme", "name": "Peter Ihme"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/3fc04db95a37fb0c144f6793cd0916f0a8b45cdf", "committedDate": "2020-02-11T10:38:17Z", "message": "feat(clients/java): New response objects for java client API"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14b3027048c76e9fc60e48c6924b8643538b708d", "author": {"user": {"login": "pihme", "name": "Peter Ihme"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/14b3027048c76e9fc60e48c6924b8643538b708d", "committedDate": "2020-02-11T10:58:15Z", "message": "feat(clients/java): New response objects for java client API"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3fc04db95a37fb0c144f6793cd0916f0a8b45cdf", "author": {"user": {"login": "pihme", "name": "Peter Ihme"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/3fc04db95a37fb0c144f6793cd0916f0a8b45cdf", "committedDate": "2020-02-11T10:38:17Z", "message": "feat(clients/java): New response objects for java client API"}, "afterCommit": {"oid": "14b3027048c76e9fc60e48c6924b8643538b708d", "author": {"user": {"login": "pihme", "name": "Peter Ihme"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/14b3027048c76e9fc60e48c6924b8643538b708d", "committedDate": "2020-02-11T10:58:15Z", "message": "feat(clients/java): New response objects for java client API"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2NjA1OTc2", "url": "https://github.com/camunda-cloud/zeebe/pull/3820#pullrequestreview-356605976", "createdAt": "2020-02-11T12:09:14Z", "commit": {"oid": "14b3027048c76e9fc60e48c6924b8643538b708d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3122, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}