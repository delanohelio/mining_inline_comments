{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1MjA2NzI4", "number": 4751, "title": "fix(engine): catch error event on multi-instance activity", "bodyText": "Description\n\nbe aware of multi-instance activities when looking for an error catch event\nadd new helper method to resolve the element based on a given BPMN element type to handle multi-instance activities\n\nRelated issues\ncloses #4601\nPull Request Checklist\n\n All commit messages match our commit message guidelines\n The submitting code follows our code style\n If submitting code, please run mvn clean install -DskipTests locally before committing", "createdAt": "2020-06-16T13:16:13Z", "url": "https://github.com/camunda-cloud/zeebe/pull/4751", "merged": true, "mergeCommit": {"oid": "1a98d6f027dc82bf41a11c3454130ab2f5f9a1c8"}, "closed": true, "closedAt": "2020-06-18T14:04:11Z", "author": {"login": "saig0"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcsIBzzAFqTQzMjMwMDUwOQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcseqzJgBqjM0NTgxOTMxMTI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyMzAwNTA5", "url": "https://github.com/camunda-cloud/zeebe/pull/4751#pullrequestreview-432300509", "createdAt": "2020-06-17T11:17:15Z", "commit": {"oid": "57b08bfdac832599b2b3cc2663eaf053bfab1504"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMToxNzoxNVrOGlBMsw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxMToxODozNVrOGlBPEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQ3MDEzMQ==", "bodyText": "I understand that the getElementById now needs an elementType, but this should always be CALL_ACTIVITY for this method. I also think that the return type can be specified to ExecutableCallActivity, as other elements should not be provided by this method.", "url": "https://github.com/camunda-cloud/zeebe/pull/4751#discussion_r441470131", "createdAt": "2020-06-17T11:17:15Z", "author": {"login": "korthout"}, "path": "engine/src/main/java/io/zeebe/engine/nwe/behavior/BpmnStateTransitionBehavior.java", "diffHunk": "@@ -255,14 +254,17 @@ public void onElementTerminated(\n     containerProcessor.onChildTerminated(containerScope, containerContext, childContext);\n   }\n \n-  private ExecutableCallActivity getParentWorkflowScope(\n+  private ExecutableFlowElement getParentWorkflowScope(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "57b08bfdac832599b2b3cc2663eaf053bfab1504"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTQ3MDczNw==", "bodyText": "So I would change this to:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                final var elementType = callActivityContext.getBpmnElementType();\n          \n          \n            \n                final var elementType = BpmnElementType.CALL_ACTIVITY;", "url": "https://github.com/camunda-cloud/zeebe/pull/4751#discussion_r441470737", "createdAt": "2020-06-17T11:18:35Z", "author": {"login": "korthout"}, "path": "engine/src/main/java/io/zeebe/engine/nwe/behavior/BpmnStateTransitionBehavior.java", "diffHunk": "@@ -255,14 +254,17 @@ public void onElementTerminated(\n     containerProcessor.onChildTerminated(containerScope, containerContext, childContext);\n   }\n \n-  private ExecutableCallActivity getParentWorkflowScope(\n+  private ExecutableFlowElement getParentWorkflowScope(\n       final BpmnElementContext callActivityContext, final BpmnElementContext childContext) {\n     final var workflowKey = callActivityContext.getWorkflowKey();\n     final var elementId = callActivityContext.getElementId();\n+    final var elementType = callActivityContext.getBpmnElementType();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "57b08bfdac832599b2b3cc2663eaf053bfab1504"}, "originalPosition": 17}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d9032a4237bf6be62e0267226dcacc9a0776d35e", "author": {"user": {"login": "saig0", "name": "Philipp Ossler"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/d9032a4237bf6be62e0267226dcacc9a0776d35e", "committedDate": "2020-06-17T11:34:07Z", "message": "chore(engine): apply review suggestion\n\nCo-authored-by: Nico Korthout <korthout@users.noreply.github.com>"}, "afterCommit": {"oid": "7e2502a1d011654deb9e705e7bfc887b685fb08f", "author": {"user": {"login": "saig0", "name": "Philipp Ossler"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/7e2502a1d011654deb9e705e7bfc887b685fb08f", "committedDate": "2020-06-17T11:36:42Z", "message": "chore(engine): apply review suggestion\n\nCo-authored-by: Nico Korthout <korthout@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzMTM0OTMx", "url": "https://github.com/camunda-cloud/zeebe/pull/4751#pullrequestreview-433134931", "createdAt": "2020-06-18T10:07:53Z", "commit": {"oid": "7e2502a1d011654deb9e705e7bfc887b685fb08f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "143baa1255e142b0be496db5e7f387cb36d34de2", "author": {"user": {"login": "saig0", "name": "Philipp Ossler"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/143baa1255e142b0be496db5e7f387cb36d34de2", "committedDate": "2020-06-18T13:42:27Z", "message": "fix(engine): catch error event on multi-instance activity\n\n* be aware of multi-instance activities when looking for an error catch event\n* add new helper method to resolve the element based on a given BPMN element type to handle multi-instance activities"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7e2502a1d011654deb9e705e7bfc887b685fb08f", "author": {"user": {"login": "saig0", "name": "Philipp Ossler"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/7e2502a1d011654deb9e705e7bfc887b685fb08f", "committedDate": "2020-06-17T11:36:42Z", "message": "chore(engine): apply review suggestion\n\nCo-authored-by: Nico Korthout <korthout@users.noreply.github.com>"}, "afterCommit": {"oid": "143baa1255e142b0be496db5e7f387cb36d34de2", "author": {"user": {"login": "saig0", "name": "Philipp Ossler"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/143baa1255e142b0be496db5e7f387cb36d34de2", "committedDate": "2020-06-18T13:42:27Z", "message": "fix(engine): catch error event on multi-instance activity\n\n* be aware of multi-instance activities when looking for an error catch event\n* add new helper method to resolve the element based on a given BPMN element type to handle multi-instance activities"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2784, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}