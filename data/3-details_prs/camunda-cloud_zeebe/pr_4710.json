{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzNTY4Njgx", "number": 4710, "title": "chore(clients/go): skip license test for all mocks", "bodyText": "Description\nSkip license test for all Go mocks.\nPull Request Checklist\n\n All commit messages match our commit message guidelines\n The submitting code follows our code style\n If submitting code, please run mvn clean install -DskipTests locally before committing", "createdAt": "2020-06-12T09:25:10Z", "url": "https://github.com/camunda-cloud/zeebe/pull/4710", "merged": true, "mergeCommit": {"oid": "7414948c5f182a0a5116f9c62d352704043ef87d"}, "closed": true, "closedAt": "2020-06-12T10:30:11Z", "author": {"login": "npepinpe"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqfaZ8ABqjM0Mzc2NTU5Mjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcqfyi3AFqTQyOTYxMTU2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a4bb75f29b16b5004c0919b7d55b1f514c404445", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/a4bb75f29b16b5004c0919b7d55b1f514c404445", "committedDate": "2020-06-12T09:24:35Z", "message": "chore(clients/go): skip license test for all mocks"}, "afterCommit": {"oid": "c5c90168f9586334a5992089bd774dfceaaf5990", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/c5c90168f9586334a5992089bd774dfceaaf5990", "committedDate": "2020-06-12T09:26:40Z", "message": "chore(clients/go): skip license test for all mocks"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5NjAyNzAw", "url": "https://github.com/camunda-cloud/zeebe/pull/4710#pullrequestreview-429602700", "createdAt": "2020-06-12T09:39:13Z", "commit": {"oid": "c5c90168f9586334a5992089bd774dfceaaf5990"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwOTozOToxM1rOGi9uZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwOTozOToxM1rOGi9uZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTMxNjA3MQ==", "bodyText": "What if we turn this into a \"skipList\" with the prefixes of files/dirs to ignore? Then we wouldn't need to add a new if clause for every directory we want to ignore and we're already using this map as a list which is a bit strange. Something like:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t// These files are generated.\n          \n          \n            \n            var skipList = []string{\n          \n          \n            \n              // These files are generated.\n          \n          \n            \n              \"../pkg/pb/gateway.pb.go\",\n          \n          \n            \n              \"../internal/mock_pb/\",\n          \n          \n            \n              \"../vendor/\",\n          \n          \n            \n            }\n          \n          \n            \n            \n          \n          \n            \n            func TestLicense(t *testing.T) {\n          \n          \n            \n            \terr := filepath.Walk(\"..\", func(path string, fi os.FileInfo, err error) error {\n          \n          \n            \n                for _, skip := range skipList {\n          \n          \n            \n                  if strings.HasPrefix(path, skip) {\n          \n          \n            \n                    return nil\n          \n          \n            \n                  }\n          \n          \n            \n                }", "url": "https://github.com/camunda-cloud/zeebe/pull/4710#discussion_r439316071", "createdAt": "2020-06-12T09:39:13Z", "author": {"login": "MiguelPires"}, "path": "clients/go/test/license_test.go", "diffHunk": "@@ -40,8 +40,7 @@ const license = `// Copyright \u00a9 2018 Camunda Services GmbH (info@camunda.com)\n \n var skip = map[string]bool{\n \t// These files are generated.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c5c90168f9586334a5992089bd774dfceaaf5990"}, "originalPosition": 3}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "99c378c09679637d0d98c06601fa212f9c5c18fa", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/99c378c09679637d0d98c06601fa212f9c5c18fa", "committedDate": "2020-06-12T09:45:32Z", "message": "chore(clients/go): update skip list to list of prefixes\n\nCo-authored-by: Miguel Pires <miguel.pires@camunda.com>"}, "afterCommit": {"oid": "3b148f9a9b7b5f6d01bb7cc8e2fe3bfcf5a02bfc", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/3b148f9a9b7b5f6d01bb7cc8e2fe3bfcf5a02bfc", "committedDate": "2020-06-12T09:50:42Z", "message": "chore(clients/go): update skip list to list of prefixes\n\nCo-authored-by: Miguel Pires <miguel.pires@camunda.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4051e54073590b61f9b2081b687b5bed7bcde076", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/4051e54073590b61f9b2081b687b5bed7bcde076", "committedDate": "2020-06-12T09:52:00Z", "message": "chore(clients/go): skip license test for all mocks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b2bf0a3067f1fa08f2106b76e4a27f4fe913807", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/0b2bf0a3067f1fa08f2106b76e4a27f4fe913807", "committedDate": "2020-06-12T09:52:00Z", "message": "chore(clients/go): update skip list to list of prefixes\n\nCo-authored-by: Miguel Pires <miguel.pires@camunda.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3b148f9a9b7b5f6d01bb7cc8e2fe3bfcf5a02bfc", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/3b148f9a9b7b5f6d01bb7cc8e2fe3bfcf5a02bfc", "committedDate": "2020-06-12T09:50:42Z", "message": "chore(clients/go): update skip list to list of prefixes\n\nCo-authored-by: Miguel Pires <miguel.pires@camunda.com>"}, "afterCommit": {"oid": "0b2bf0a3067f1fa08f2106b76e4a27f4fe913807", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/0b2bf0a3067f1fa08f2106b76e4a27f4fe913807", "committedDate": "2020-06-12T09:52:00Z", "message": "chore(clients/go): update skip list to list of prefixes\n\nCo-authored-by: Miguel Pires <miguel.pires@camunda.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5NjExNTYw", "url": "https://github.com/camunda-cloud/zeebe/pull/4710#pullrequestreview-429611560", "createdAt": "2020-06-12T09:53:10Z", "commit": {"oid": "0b2bf0a3067f1fa08f2106b76e4a27f4fe913807"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2759, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}