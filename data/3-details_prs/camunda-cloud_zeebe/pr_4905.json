{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ1NTc3ODM1", "number": 4905, "title": "feat(clients/go): add client info to user-agent", "bodyText": "Description\n\nintroduces go-bindata to embed static data into go code\nsets user-agent with version obtained from generated code\nautomatically update version and generated files when releasing\n\nRelated issues\ncloses #4264\nPull Request Checklist\n\n All commit messages match our commit message guidelines\n The submitting code follows our code style\n If submitting code, please run mvn clean install -DskipTests locally before committing", "createdAt": "2020-07-07T18:22:36Z", "url": "https://github.com/camunda-cloud/zeebe/pull/4905", "merged": true, "mergeCommit": {"oid": "5d1ce1c5220a3d1111c0f1f489da827367b4afcc"}, "closed": true, "closedAt": "2020-07-10T18:45:50Z", "author": {"login": "MiguelPires"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcyqs8eAFqTQ0NDE2NzgwMw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABczlXR0ABqjM1MzQzNzA5NDM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0MTY3ODAz", "url": "https://github.com/camunda-cloud/zeebe/pull/4905#pullrequestreview-444167803", "createdAt": "2020-07-07T18:59:45Z", "commit": {"oid": "9c2a86afd9ad177aa3ceb5815496debdad37dd03"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxODo1OTo0NVrOGuLpOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QxOTowNTozOVrOGuL00g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTA3ODQ1OQ==", "bodyText": "It's still not possible to vendor tools with Go yet? \ud83d\ude1e", "url": "https://github.com/camunda-cloud/zeebe/pull/4905#discussion_r451078459", "createdAt": "2020-07-07T18:59:45Z", "author": {"login": "npepinpe"}, "path": ".ci/scripts/release/build-go.sh", "diffHunk": "@@ -3,9 +3,18 @@\n export CGO_ENABLED=0\n \n ORG_DIR=${GOPATH}/src/github.com/zeebe-io\n+GOBINDATA_VERSION=\"3.1.3\"\n \n mkdir -p ${ORG_DIR}\n ln -s ${PWD} ${ORG_DIR}/zeebe\n \n+curl -sL https://github.com/go-bindata/go-bindata/archive/v${GOBINDATA_VERSION}.tar.gz | tar xz ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c2a86afd9ad177aa3ceb5815496debdad37dd03"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTA3OTgzNQ==", "bodyText": "Nit: maybe we can copy the commit message the maven plugin use? \"Prepare next development version\" or something", "url": "https://github.com/camunda-cloud/zeebe/pull/4905#discussion_r451079835", "createdAt": "2020-07-07T19:02:26Z", "author": {"login": "npepinpe"}, "path": ".ci/scripts/release/post-github.sh", "diffHunk": "@@ -0,0 +1,9 @@\n+#!/bin/bash\n+\n+cd ${GOPATH}/src/github.com/zeebe-io/zeebe/clients/go/internal/embedded\n+\n+echo ${DEVELOPMENT_VERSION} > data/VERSION\n+go-bindata -pkg embedded -o embedded.go -prefix data/\n+\n+git commit -am \"chore(project): update version in go client\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c2a86afd9ad177aa3ceb5815496debdad37dd03"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTA4MDM1Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            0.24.0-SNAPSHOT\n          \n          \n            \n            0.25.0-SNAPSHOT\n          \n      \n    \n    \n  \n\nRelease went through in the mean time ;)", "url": "https://github.com/camunda-cloud/zeebe/pull/4905#discussion_r451080353", "createdAt": "2020-07-07T19:03:28Z", "author": {"login": "npepinpe"}, "path": "clients/go/internal/embedded/data/VERSION", "diffHunk": "@@ -0,0 +1 @@\n+0.24.0-SNAPSHOT", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c2a86afd9ad177aa3ceb5815496debdad37dd03"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTA4MDkyMA==", "bodyText": "I guess this is left over debug stuff?", "url": "https://github.com/camunda-cloud/zeebe/pull/4905#discussion_r451080920", "createdAt": "2020-07-07T19:04:41Z", "author": {"login": "npepinpe"}, "path": "clients/go/pkg/zbc/oauthCredentialsProvider_test.go", "diffHunk": "@@ -556,10 +557,13 @@ func mockAuthorizationServerWithAudience(t *testing.T, token *mutableToken, audi\n \t\t\tpanic(err)\n \t\t}\n \n+\t\tfmt.Println(request.Header)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c2a86afd9ad177aa3ceb5815496debdad37dd03"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTA4MTQyNg==", "bodyText": "Should we log errors? In Java I'd say let's log it at debug level, but is that a thing with the Go logger? \ud83d\ude05\nOn the other hand, I guess you could tell from the user agent if something goes wrong...still \ud83e\udd14", "url": "https://github.com/camunda-cloud/zeebe/pull/4905#discussion_r451081426", "createdAt": "2020-07-07T19:05:39Z", "author": {"login": "npepinpe"}, "path": "clients/go/pkg/zbc/client.go", "diffHunk": "@@ -255,3 +258,12 @@ func configureKeepAlive(config *ClientConfig) error {\n \n \treturn nil\n }\n+\n+func getVersion() string {\n+\tzbVersion := \"development\"\n+\tif readVersion, err := embedded.Asset(\"VERSION\"); err == nil {\n+\t\tzbVersion = strings.TrimSpace(string(readVersion))\n+\t}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c2a86afd9ad177aa3ceb5815496debdad37dd03"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2MjQ1NzIz", "url": "https://github.com/camunda-cloud/zeebe/pull/4905#pullrequestreview-446245723", "createdAt": "2020-07-10T09:08:57Z", "commit": {"oid": "6c92b92280df2bdceaa165e874364859c87eaed9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2e170c5eb9aec1c59576b007461261975d6a79e2", "author": {"user": null}, "url": "https://github.com/camunda-cloud/zeebe/commit/2e170c5eb9aec1c59576b007461261975d6a79e2", "committedDate": "2020-07-10T15:27:11Z", "message": "feat(clients/go): add client info to user-agent\n\n  * introduces `go-bindata` to embed static data into go code\n  * sets user-agent with version obtained from generated code\n  * automatically update version and generated files when releasing"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6c92b92280df2bdceaa165e874364859c87eaed9", "author": {"user": null}, "url": "https://github.com/camunda-cloud/zeebe/commit/6c92b92280df2bdceaa165e874364859c87eaed9", "committedDate": "2020-07-08T08:34:47Z", "message": "chore(clients/go): review feedback"}, "afterCommit": {"oid": "2e170c5eb9aec1c59576b007461261975d6a79e2", "author": {"user": null}, "url": "https://github.com/camunda-cloud/zeebe/commit/2e170c5eb9aec1c59576b007461261975d6a79e2", "committedDate": "2020-07-10T15:27:11Z", "message": "feat(clients/go): add client info to user-agent\n\n  * introduces `go-bindata` to embed static data into go code\n  * sets user-agent with version obtained from generated code\n  * automatically update version and generated files when releasing"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2673, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}