{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwNTM3NjU5", "number": 4832, "title": "feat(clients/java): add user-agent to java client requests", "bodyText": "Description\nAdd user-agent header with client and version information to gRPC and OAuth requests.\nRelated issues\ncloses #4265\nPull Request Checklist\n\n All commit messages match our commit message guidelines\n The submitting code follows our code style\n If submitting code, please run mvn clean install -DskipTests locally before committing", "createdAt": "2020-06-26T11:40:44Z", "url": "https://github.com/camunda-cloud/zeebe/pull/4832", "merged": true, "mergeCommit": {"oid": "fde9eb3508b26beefd63897f700839813ceb3284"}, "closed": true, "closedAt": "2020-07-08T10:28:04Z", "author": {"login": "MiguelPires"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcvEGwDgBqjM0ODY4Mzg3NzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcyznGtAFqTQ0NDQyMzM4NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6a714f37f02880548d7a1e206fd2ee582f19260e", "author": {"user": null}, "url": "https://github.com/camunda-cloud/zeebe/commit/6a714f37f02880548d7a1e206fd2ee582f19260e", "committedDate": "2020-06-26T11:36:35Z", "message": "feat(clients/java): add user-agent to java client requests"}, "afterCommit": {"oid": "0addfe02a3daf31dd23f75629088fa7d87bb0883", "author": {"user": null}, "url": "https://github.com/camunda-cloud/zeebe/commit/0addfe02a3daf31dd23f75629088fa7d87bb0883", "committedDate": "2020-06-26T14:27:12Z", "message": "feat(clients/java): add user-agent to java client requests"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0addfe02a3daf31dd23f75629088fa7d87bb0883", "author": {"user": null}, "url": "https://github.com/camunda-cloud/zeebe/commit/0addfe02a3daf31dd23f75629088fa7d87bb0883", "committedDate": "2020-06-26T14:27:12Z", "message": "feat(clients/java): add user-agent to java client requests"}, "afterCommit": {"oid": "92d6d5d89261f9d2fb253e4d3bd2c415e27fce2a", "author": {"user": null}, "url": "https://github.com/camunda-cloud/zeebe/commit/92d6d5d89261f9d2fb253e4d3bd2c415e27fce2a", "committedDate": "2020-06-30T09:09:33Z", "message": "feat(clients/java): set client info in requests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwNzk3Nzgx", "url": "https://github.com/camunda-cloud/zeebe/pull/4832#pullrequestreview-440797781", "createdAt": "2020-07-01T11:51:10Z", "commit": {"oid": "92d6d5d89261f9d2fb253e4d3bd2c415e27fce2a"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxMTo1MToxMFrOGripng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxMzoxMjoyM1rOGrlSAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODMwOTY2Mg==", "bodyText": "This format seems a bit uncommon for user-agent. Usually, it has the format <product>/<version> (e.g. zeebe-client-java/0.24.0).\nWhat do you think about changing it?", "url": "https://github.com/camunda-cloud/zeebe/pull/4832#discussion_r448309662", "createdAt": "2020-07-01T11:51:10Z", "author": {"login": "saig0"}, "path": "clients/java/src/main/java/io/zeebe/client/impl/oauth/OAuthCredentialsProvider.java", "diffHunk": "@@ -162,6 +163,8 @@ private ZeebeClientCredentials fetchCredentials() throws IOException {\n     connection.setRequestProperty(\"Content-Type\", \"application/x-www-form-urlencoded\");\n     connection.setRequestProperty(\"Accept\", \"application/json\");\n     connection.setDoOutput(true);\n+    connection.setRequestProperty(\n+        \"User-Agent\", \"client: java, version: \" + VersionUtil.getVersion());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92d6d5d89261f9d2fb253e4d3bd2c415e27fce2a"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODMxMzg1NQ==", "bodyText": "We should add a comment on why this is needed.\nI suggest to put it as the first item before the plugins. Otherwise, it is easy to oversee.", "url": "https://github.com/camunda-cloud/zeebe/pull/4832#discussion_r448313855", "createdAt": "2020-07-01T11:59:49Z", "author": {"login": "saig0"}, "path": "clients/java/pom.xml", "diffHunk": "@@ -158,6 +158,12 @@\n         <artifactId>clirr-maven-plugin</artifactId>\n       </plugin>\n     </plugins>\n+      <resources>\n+        <resource>\n+          <directory>src/main/resources</directory>\n+          <filtering>true</filtering>\n+        </resource>\n+      </resources>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92d6d5d89261f9d2fb253e4d3bd2c415e27fce2a"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODM1MTM2Nw==", "bodyText": "Same as for the OAuthCredentialsProvider.", "url": "https://github.com/camunda-cloud/zeebe/pull/4832#discussion_r448351367", "createdAt": "2020-07-01T13:10:09Z", "author": {"login": "saig0"}, "path": "clients/java/src/main/java/io/zeebe/client/impl/ZeebeClientImpl.java", "diffHunk": "@@ -123,6 +124,7 @@ public static ManagedChannel buildChannel(final ZeebeClientConfiguration config)\n \n     configureConnectionSecurity(config, channelBuilder);\n     channelBuilder.keepAliveTime(config.getKeepAlive().toMillis(), TimeUnit.MILLISECONDS);\n+    channelBuilder.userAgent(\"client: java, version: \" + VersionUtil.getVersion());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92d6d5d89261f9d2fb253e4d3bd2c415e27fce2a"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODM1Mjc2OA==", "bodyText": "The logger package looks a bit uncommon with .util. Maybe, we can have a logger for general or managing things io.zeebe.client.", "url": "https://github.com/camunda-cloud/zeebe/pull/4832#discussion_r448352768", "createdAt": "2020-07-01T13:12:23Z", "author": {"login": "saig0"}, "path": "clients/java/src/main/java/io/zeebe/client/impl/Loggers.java", "diffHunk": "@@ -24,4 +24,5 @@\n       LoggerFactory.getLogger(\"io.zeebe.client.job.poller\");\n   public static final Logger JOB_WORKER_LOGGER =\n       LoggerFactory.getLogger(\"io.zeebe.client.job.worker\");\n+  public static final Logger VERSION_LOGGER = LoggerFactory.getLogger(\"io.zeebe.client.util\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92d6d5d89261f9d2fb253e4d3bd2c415e27fce2a"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c3bcdfc027f45cf28c25e71cdab4f96c32ec069b", "author": {"user": null}, "url": "https://github.com/camunda-cloud/zeebe/commit/c3bcdfc027f45cf28c25e71cdab4f96c32ec069b", "committedDate": "2020-07-07T07:59:47Z", "message": "feat(clients/java): set client info in requests' user-agent"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3eda09f3229e1871078f1ffc9ce02ca7ea288291", "author": {"user": null}, "url": "https://github.com/camunda-cloud/zeebe/commit/3eda09f3229e1871078f1ffc9ce02ca7ea288291", "committedDate": "2020-07-07T07:13:41Z", "message": "chore(clients/java): change user agent format"}, "afterCommit": {"oid": "c3bcdfc027f45cf28c25e71cdab4f96c32ec069b", "author": {"user": null}, "url": "https://github.com/camunda-cloud/zeebe/commit/c3bcdfc027f45cf28c25e71cdab4f96c32ec069b", "committedDate": "2020-07-07T07:59:47Z", "message": "feat(clients/java): set client info in requests' user-agent"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0NDIzMzg1", "url": "https://github.com/camunda-cloud/zeebe/pull/4832#pullrequestreview-444423385", "createdAt": "2020-07-08T05:30:10Z", "commit": {"oid": "c3bcdfc027f45cf28c25e71cdab4f96c32ec069b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2653, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}