{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2OTU2Mzky", "number": 4771, "title": "chore(util): compare logged event nano seconds accurately", "bodyText": "Description\nThis PR fixes a flaky test which compared the nano adjustment of seconds by grabbing the nano of second before the log, and after, and checking that the logged one was within those bounds. This was wrong since, as specified, it is the nano adjustment of the second, so if the second change it will go out of bounds.\nThe PR fixes this by introducing a RecordingAppender which wraps any appender and records the given logged event, letting us use the exact generated value to accurately check the times.\nRelated issues\ncloses #4770\nPull Request Checklist\n\n All commit messages match our commit message guidelines\n The submitting code follows our code style\n If submitting code, please run mvn clean install -DskipTests locally before committing", "createdAt": "2020-06-19T08:07:07Z", "url": "https://github.com/camunda-cloud/zeebe/pull/4771", "merged": true, "mergeCommit": {"oid": "1eeae67c904da1a2d45d010fa1e391eb45382dd8"}, "closed": true, "closedAt": "2020-06-19T13:26:21Z", "author": {"login": "npepinpe"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcsumuigFqTQzMzg4NjI2OQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcsycImABqjM0NjIzMTA2NDY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzODg2MjY5", "url": "https://github.com/camunda-cloud/zeebe/pull/4771#pullrequestreview-433886269", "createdAt": "2020-06-19T08:10:46Z", "commit": {"oid": "ad1253986e65b48cf82ff74740a03a55ca5dcdf7"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwODoxMDo0NlrOGmMJ0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwODoxMDo0NlrOGmMJ0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjY5ODE5Mg==", "bodyText": "This class seems to really be a testing utility class. I'm not sure this is the best package for it. I would at least expect some documentation on this class.", "url": "https://github.com/camunda-cloud/zeebe/pull/4771#discussion_r442698192", "createdAt": "2020-06-19T08:10:46Z", "author": {"login": "korthout"}, "path": "util/src/test/java/io/zeebe/util/logging/RecordingAppender.java", "diffHunk": "@@ -0,0 +1,91 @@\n+/*\n+ * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH under\n+ * one or more contributor license agreements. See the NOTICE file distributed\n+ * with this work for additional information regarding copyright ownership.\n+ * Licensed under the Zeebe Community License 1.0. You may not use this file\n+ * except in compliance with the Zeebe Community License 1.0.\n+ */\n+package io.zeebe.util.logging;\n+\n+import java.io.Serializable;\n+import java.util.ArrayList;\n+import java.util.List;\n+import org.apache.logging.log4j.core.Appender;\n+import org.apache.logging.log4j.core.ErrorHandler;\n+import org.apache.logging.log4j.core.Layout;\n+import org.apache.logging.log4j.core.LogEvent;\n+\n+public final class RecordingAppender implements Appender {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ad1253986e65b48cf82ff74740a03a55ca5dcdf7"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM0MDQ2NTI5", "url": "https://github.com/camunda-cloud/zeebe/pull/4771#pullrequestreview-434046529", "createdAt": "2020-06-19T12:43:58Z", "commit": {"oid": "39d7f649f37b03e0640a923fad07eed162e553c8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e99f5a3abba78666996d4c4031d1c65e671bf23", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/9e99f5a3abba78666996d4c4031d1c65e671bf23", "committedDate": "2020-06-19T12:44:35Z", "message": "chore(util): compare logged event nano seconds accurately"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "39d7f649f37b03e0640a923fad07eed162e553c8", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/39d7f649f37b03e0640a923fad07eed162e553c8", "committedDate": "2020-06-19T11:39:10Z", "message": "chore(util): add minimal doc and make package private"}, "afterCommit": {"oid": "9e99f5a3abba78666996d4c4031d1c65e671bf23", "author": {"user": {"login": "npepinpe", "name": "Nicolas Pepin-Perreault"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/9e99f5a3abba78666996d4c4031d1c65e671bf23", "committedDate": "2020-06-19T12:44:35Z", "message": "chore(util): compare logged event nano seconds accurately"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2796, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}