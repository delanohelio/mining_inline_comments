{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1NDMwMjg3", "number": 3847, "title": "chore(exporter): include version in index names", "bodyText": "Description\n\nall ELS indices contain Zeebe version in names\nnew template/index name style: prefix_name_version[_date] (undescores!)\n\nRelated issues\n\ncloses #3785\nPull Request Checklist\n\n All commit messages match our commit message guidelines\n The submitting code follows our code style\n If submitting code, please run mvn clean install -DskipTests locally before committing", "createdAt": "2020-02-14T15:00:55Z", "url": "https://github.com/camunda-cloud/zeebe/pull/3847", "merged": true, "mergeCommit": {"oid": "3c4e5572659e317f9e705960b73178b5e5b0f06d"}, "closed": true, "closedAt": "2020-02-18T09:22:35Z", "author": {"login": "sdorokhova"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcEQ5zmABqjMwMzkwNDY0NjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFdpoCgFqTM2MDE0NDEyMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c126cf3546f9e7098058d12171341bd8f3787c02", "author": {"user": {"login": "sdorokhova", "name": "Svetlana Dorokhova"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/c126cf3546f9e7098058d12171341bd8f3787c02", "committedDate": "2020-02-14T14:55:45Z", "message": "impl(exporter): include version in index names\n\n- new template/index name style: prefix_name_version[_date]"}, "afterCommit": {"oid": "f3d929ea35ec1eb7c7d6ff6ce3eb87a47b77d330", "author": {"user": {"login": "sdorokhova", "name": "Svetlana Dorokhova"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/f3d929ea35ec1eb7c7d6ff6ce3eb87a47b77d330", "committedDate": "2020-02-14T15:02:55Z", "message": "chore(exporter): include version in index names\n\n- new template/index name style: prefix_name_version[_date]"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5ODM1ODQ0", "url": "https://github.com/camunda-cloud/zeebe/pull/3847#pullrequestreview-359835844", "createdAt": "2020-02-17T15:57:15Z", "commit": {"oid": "f3d929ea35ec1eb7c7d6ff6ce3eb87a47b77d330"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxNTo1NzoxNVrOFqpQ-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xN1QxNTo1NzoxNVrOFqpQ-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDI2MDYwMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                final String version = VersionUtil.getVersion().toLowerCase();\n          \n          \n            \n                final String version = VersionUtil.getVersionLowerCase();\n          \n      \n    \n    \n  \n\nLet's use the caching method you added or cache the lowercase version somewhere in the constructor.", "url": "https://github.com/camunda-cloud/zeebe/pull/3847#discussion_r380260600", "createdAt": "2020-02-17T15:57:15Z", "author": {"login": "menski"}, "path": "exporters/elasticsearch-exporter/src/main/java/io/zeebe/exporter/ElasticsearchClient.java", "diffHunk": "@@ -229,8 +232,17 @@ protected String indexPrefixForValueTypeWithDelimiter(final ValueType valueType)\n     return indexPrefixForValueType(valueType) + INDEX_DELIMITER;\n   }\n \n+  private String aliasNameForValueType(final ValueType valueType) {\n+    return configuration.index.prefix + ALIAS_DELIMITER + valueTypeToString(valueType);\n+  }\n+\n   private String indexPrefixForValueType(final ValueType valueType) {\n-    return configuration.index.prefix + \"-\" + valueTypeToString(valueType);\n+    final String version = VersionUtil.getVersion().toLowerCase();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f3d929ea35ec1eb7c7d6ff6ce3eb87a47b77d330"}, "originalPosition": 56}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c4e5572659e317f9e705960b73178b5e5b0f06d", "author": {"user": {"login": "sdorokhova", "name": "Svetlana Dorokhova"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/3c4e5572659e317f9e705960b73178b5e5b0f06d", "committedDate": "2020-02-18T08:27:39Z", "message": "chore(exporter): include version in index names\n\n- new template/index name style: prefix_name_version[_date]"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0f0b1585eb78212ca0e71edfac329a9fd7572108", "author": {"user": {"login": "sdorokhova", "name": "Svetlana Dorokhova"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/0f0b1585eb78212ca0e71edfac329a9fd7572108", "committedDate": "2020-02-17T21:11:08Z", "message": "chore(exporter): use VersionUtil to get the cached lower case version\n\nCo-Authored-By: Sebastian Menski <sebastian.menski@camunda.com>"}, "afterCommit": {"oid": "3c4e5572659e317f9e705960b73178b5e5b0f06d", "author": {"user": {"login": "sdorokhova", "name": "Svetlana Dorokhova"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/3c4e5572659e317f9e705960b73178b5e5b0f06d", "committedDate": "2020-02-18T08:27:39Z", "message": "chore(exporter): include version in index names\n\n- new template/index name style: prefix_name_version[_date]"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwMTQ0MTIw", "url": "https://github.com/camunda-cloud/zeebe/pull/3847#pullrequestreview-360144120", "createdAt": "2020-02-18T08:28:25Z", "commit": {"oid": "3c4e5572659e317f9e705960b73178b5e5b0f06d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3134, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}