{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczMjcxMTUx", "number": 3821, "title": "Use different tool to convert Go test output to XML", "bodyText": "Description\nDrops go-junit-report in favor of gotestsum. This should improve the output of failed tests in the CI (the previous tool often mangled error output and made it impossible to understand errors that sometimes can't be reproduced locally).\nThis PR also sanitizes the Docker logs since they were being printed with a message header that looked like garbage in test failures.\nRelated issues\ncloses #3807\nPull Request Checklist\n\n All commit messages match our commit message guidelines\n The submitting code follows our code style\n If submitting code, please run mvn clean install -DskipTests locally before committing", "createdAt": "2020-02-10T17:54:59Z", "url": "https://github.com/camunda-cloud/zeebe/pull/3821", "merged": true, "mergeCommit": {"oid": "b2a07571b921a356fcac5b35c6c49b20f02ddad3"}, "closed": true, "closedAt": "2020-02-11T11:23:28Z", "author": {"login": "MiguelPires"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDA4whgH2gAyMzczMjcxMTUxOjFkNDY1MDhkNWYyMGYwNTMzYmY4M2Y5ZWI1ZWRkYmZhMzdlNjVjMTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcDPoIgAFqTM1NjU2NzMwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1d46508d5f20f0533bf83f9eb5eddbfa37e65c13", "author": {"user": null}, "url": "https://github.com/camunda-cloud/zeebe/commit/1d46508d5f20f0533bf83f9eb5eddbfa37e65c13", "committedDate": "2020-02-10T17:49:51Z", "message": "chore(project): use gotestsum to convert test output to XML"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b2a07571b921a356fcac5b35c6c49b20f02ddad3", "author": {"user": null}, "url": "https://github.com/camunda-cloud/zeebe/commit/b2a07571b921a356fcac5b35c6c49b20f02ddad3", "committedDate": "2020-02-10T17:49:51Z", "message": "chore(clients/go): clean docker logs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2MjM4MDcx", "url": "https://github.com/camunda-cloud/zeebe/pull/3821#pullrequestreview-356238071", "createdAt": "2020-02-10T20:26:08Z", "commit": {"oid": "b2a07571b921a356fcac5b35c6c49b20f02ddad3"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQyMDoyNjowOFrOFn0ZXg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQwOToyNDozNlrOFoB1QQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzI5NzI0Ng==", "bodyText": "Nice catch, oops", "url": "https://github.com/camunda-cloud/zeebe/pull/3821#discussion_r377297246", "createdAt": "2020-02-10T20:26:08Z", "author": {"login": "npepinpe"}, "path": "clients/go/internal/containersuite/containerSuite.go", "diffHunk": "@@ -77,11 +78,13 @@ func (s zeebeWaitStrategy) WaitUntilReady(ctx context.Context, target wait.Strat\n \t\tif err != nil {\n \t\t\treturn fmt.Errorf(\"timed out awaiting container, and failed to obtain container logs: %w\", err)\n \t\t}\n+\n+\t\tdefer reader.Close()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2a07571b921a356fcac5b35c6c49b20f02ddad3"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzUxNzM3Nw==", "bodyText": "we split it then rejoin it? can't we just to log[8:]? we just want to remove the first 8 bytes right?", "url": "https://github.com/camunda-cloud/zeebe/pull/3821#discussion_r377517377", "createdAt": "2020-02-11T09:24:36Z", "author": {"login": "npepinpe"}, "path": "clients/go/internal/containersuite/containerSuite.go", "diffHunk": "@@ -90,6 +93,24 @@ func (s zeebeWaitStrategy) WaitUntilReady(ctx context.Context, target wait.Strat\n \t}\n }\n \n+// remove the message header (8 bytes) from the docker logs\n+// https://docs.docker.com/engine/api/v1.26/#operation/ContainerAttach\n+func sanitizeDockerLogs(log string) string {\n+\tlines := strings.Split(log, \"\\n\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2a07571b921a356fcac5b35c6c49b20f02ddad3"}, "originalPosition": 30}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2NTY3MzA5", "url": "https://github.com/camunda-cloud/zeebe/pull/3821#pullrequestreview-356567309", "createdAt": "2020-02-11T11:00:16Z", "commit": {"oid": "b2a07571b921a356fcac5b35c6c49b20f02ddad3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3125, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}