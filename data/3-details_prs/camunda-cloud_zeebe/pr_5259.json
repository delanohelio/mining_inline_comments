{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1NDM4MjQ3", "number": 5259, "title": "Increase default disk usage watermarks", "bodyText": "Description\n\nincrease disk usage replication watermark from 0.9 to 0.99\nincrease disk usage command watermark from 0.8 to 0.97\nadd section about disk space and watermarks\n\nRelated issues\ncloses #5199\nDefinition of Done\nNot all items need to be done depending on the issue and the pull request.\nCode changes:\n\n The changes are backwards compatibility with previous versions\n If it fixes a bug then PRs are created to backport the fix to the last two minor versions\n\nTesting:\n\n There are unit/integration tests that verify all acceptance criterias of the issue\n New tests are written to ensure backwards compatibility with further versions\n The behavior is tested manually\n The impact of the changes is verified by a benchmark\n\nDocumentation:\n\n The documentation is updated (e.g. BPMN reference, configuration, examples, get-started guides, etc.)\n New content is added to the release announcement", "createdAt": "2020-08-28T14:27:04Z", "url": "https://github.com/camunda-cloud/zeebe/pull/5259", "merged": true, "mergeCommit": {"oid": "bbb4beeead75c7f901de561116aeaa874379d311"}, "closed": true, "closedAt": "2020-09-01T08:32:25Z", "author": {"login": "menski"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdERqtTAFqTQ3ODU1NTE5Mw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdEi157gBqjM3MTM0NzI3NjU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4NTU1MTkz", "url": "https://github.com/camunda-cloud/zeebe/pull/5259#pullrequestreview-478555193", "createdAt": "2020-08-31T12:02:46Z", "commit": {"oid": "034b8d99db0c5c22e5df2fe2155c1476ad3b701e"}, "state": "APPROVED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxMjowMjo0NlrOHJ1_BQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQxMjowNzowNVrOHJ2Gsg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDA4MzcxNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * **zebee.broker.data.diskUsageReplicationWatermark**: the fraction of free disk space required for replication (default: 0.99)\n          \n          \n            \n            * **zeebe.broker.data.diskUsageReplicationWatermark**: the fraction of free disk space required for replication (default: 0.99)", "url": "https://github.com/camunda-cloud/zeebe/pull/5259#discussion_r480083717", "createdAt": "2020-08-31T12:02:46Z", "author": {"login": "deepthidevaki"}, "path": "docs/src/operations/disk-space.md", "diffHunk": "@@ -0,0 +1,15 @@\n+# Disk space\n+\n+Zeebe uses the local disk for storage of it's persistent data. Therefore if the Zeebe broker runs out of disk space the system is in an invalid state, as the broker cannot\n+update it's state.\n+\n+To prevent the system to end in an unrecoverable state Zeebe expects a minimum size of free disk space available, and if this limit violated the broker will reject new\n+requests, to allow the operations team to free more disk space to allow the broker to continue to update it's state.\n+\n+Zeebe can be configured with the following settings for the disk usage watermarks:\n+\n+* **zebee.broker.data.diskUsageReplicationWatermark**: the fraction of free disk space required for replication (default: 0.99)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "034b8d99db0c5c22e5df2fe2155c1476ad3b701e"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDA4MzgwOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * **zebee.broker.data.diskUsageCommandWatermark**: the fraction of free disk space required for accepting new user commands (default: 0.97), this has to be less then `diskUsageReplicationWatermark`\n          \n          \n            \n            * **zeebe.broker.data.diskUsageCommandWatermark**: the fraction of free disk space required for accepting new user commands (default: 0.97), this has to be less then `diskUsageReplicationWatermark`", "url": "https://github.com/camunda-cloud/zeebe/pull/5259#discussion_r480083809", "createdAt": "2020-08-31T12:03:01Z", "author": {"login": "deepthidevaki"}, "path": "docs/src/operations/disk-space.md", "diffHunk": "@@ -0,0 +1,15 @@\n+# Disk space\n+\n+Zeebe uses the local disk for storage of it's persistent data. Therefore if the Zeebe broker runs out of disk space the system is in an invalid state, as the broker cannot\n+update it's state.\n+\n+To prevent the system to end in an unrecoverable state Zeebe expects a minimum size of free disk space available, and if this limit violated the broker will reject new\n+requests, to allow the operations team to free more disk space to allow the broker to continue to update it's state.\n+\n+Zeebe can be configured with the following settings for the disk usage watermarks:\n+\n+* **zebee.broker.data.diskUsageReplicationWatermark**: the fraction of free disk space required for replication (default: 0.99)\n+* **zebee.broker.data.diskUsageCommandWatermark**: the fraction of free disk space required for accepting new user commands (default: 0.97), this has to be less then `diskUsageReplicationWatermark`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "034b8d99db0c5c22e5df2fe2155c1476ad3b701e"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDA4Mzk4Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            To prevent the system to end in an unrecoverable state Zeebe expects a minimum size of free disk space available, and if this limit violated the broker will reject new\n          \n          \n            \n            To prevent the system to end in an unrecoverable state Zeebe expects a minimum size of free disk space available.\n          \n          \n            \n            If this limit violated the broker will reject new", "url": "https://github.com/camunda-cloud/zeebe/pull/5259#discussion_r480083986", "createdAt": "2020-08-31T12:03:24Z", "author": {"login": "deepthidevaki"}, "path": "docs/src/operations/disk-space.md", "diffHunk": "@@ -0,0 +1,15 @@\n+# Disk space\n+\n+Zeebe uses the local disk for storage of it's persistent data. Therefore if the Zeebe broker runs out of disk space the system is in an invalid state, as the broker cannot\n+update it's state.\n+\n+To prevent the system to end in an unrecoverable state Zeebe expects a minimum size of free disk space available, and if this limit violated the broker will reject new", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "034b8d99db0c5c22e5df2fe2155c1476ad3b701e"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDA4NDQwOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            For **production** use cases we recommend to set the values f or `diskUsageReplicationWatermark` and `diskUsageCommandWatermark` to smaller values, for example `diskUsageReplicationWatermark=0.9` and `diskUsageCommandWatermark=0.8`.\n          \n          \n            \n            For **production** use cases we recommend to set the values for `diskUsageReplicationWatermark` and `diskUsageCommandWatermark` to smaller values, for example `diskUsageReplicationWatermark=0.9` and `diskUsageCommandWatermark=0.8`.", "url": "https://github.com/camunda-cloud/zeebe/pull/5259#discussion_r480084409", "createdAt": "2020-08-31T12:04:24Z", "author": {"login": "deepthidevaki"}, "path": "docs/src/operations/disk-space.md", "diffHunk": "@@ -0,0 +1,15 @@\n+# Disk space\n+\n+Zeebe uses the local disk for storage of it's persistent data. Therefore if the Zeebe broker runs out of disk space the system is in an invalid state, as the broker cannot\n+update it's state.\n+\n+To prevent the system to end in an unrecoverable state Zeebe expects a minimum size of free disk space available, and if this limit violated the broker will reject new\n+requests, to allow the operations team to free more disk space to allow the broker to continue to update it's state.\n+\n+Zeebe can be configured with the following settings for the disk usage watermarks:\n+\n+* **zebee.broker.data.diskUsageReplicationWatermark**: the fraction of free disk space required for replication (default: 0.99)\n+* **zebee.broker.data.diskUsageCommandWatermark**: the fraction of free disk space required for accepting new user commands (default: 0.97), this has to be less then `diskUsageReplicationWatermark`\n+* **zeebe.broker.data.diskUsageMonitoringInterval**: the interval in which the disk space usage is checked (default 1 second)\n+\n+For **production** use cases we recommend to set the values f or `diskUsageReplicationWatermark` and `diskUsageCommandWatermark` to smaller values, for example `diskUsageReplicationWatermark=0.9` and `diskUsageCommandWatermark=0.8`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "034b8d99db0c5c22e5df2fe2155c1476ad3b701e"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDA4NTY4Mg==", "bodyText": "The value is the fraction of disk space that can be used/filled before we stop replication.", "url": "https://github.com/camunda-cloud/zeebe/pull/5259#discussion_r480085682", "createdAt": "2020-08-31T12:07:05Z", "author": {"login": "deepthidevaki"}, "path": "docs/src/operations/disk-space.md", "diffHunk": "@@ -0,0 +1,15 @@\n+# Disk space\n+\n+Zeebe uses the local disk for storage of it's persistent data. Therefore if the Zeebe broker runs out of disk space the system is in an invalid state, as the broker cannot\n+update it's state.\n+\n+To prevent the system to end in an unrecoverable state Zeebe expects a minimum size of free disk space available, and if this limit violated the broker will reject new\n+requests, to allow the operations team to free more disk space to allow the broker to continue to update it's state.\n+\n+Zeebe can be configured with the following settings for the disk usage watermarks:\n+\n+* **zebee.broker.data.diskUsageReplicationWatermark**: the fraction of free disk space required for replication (default: 0.99)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDA4MzcxNw=="}, "originalCommit": {"oid": "034b8d99db0c5c22e5df2fe2155c1476ad3b701e"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4NTU4OTQ0", "url": "https://github.com/camunda-cloud/zeebe/pull/5259#pullrequestreview-478558944", "createdAt": "2020-08-31T12:09:20Z", "commit": {"oid": "034b8d99db0c5c22e5df2fe2155c1476ad3b701e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "034b8d99db0c5c22e5df2fe2155c1476ad3b701e", "author": {"user": {"login": "menski", "name": "Sebastian Menski"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/034b8d99db0c5c22e5df2fe2155c1476ad3b701e", "committedDate": "2020-08-28T14:24:56Z", "message": "docs(operations): add section about disk space and watermarks"}, "afterCommit": {"oid": "600ce515c0c89c3e0eab9273a389661727bb6752", "author": {"user": {"login": "menski", "name": "Sebastian Menski"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/600ce515c0c89c3e0eab9273a389661727bb6752", "committedDate": "2020-08-31T15:35:18Z", "message": "docs(operations): add section about disk space and watermarks"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5NDgxMzIz", "url": "https://github.com/camunda-cloud/zeebe/pull/5259#pullrequestreview-479481323", "createdAt": "2020-09-01T07:46:24Z", "commit": {"oid": "600ce515c0c89c3e0eab9273a389661727bb6752"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a41f5d1305b4662b799b93a9fafe14e7237f7dbc", "author": {"user": {"login": "menski", "name": "Sebastian Menski"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/a41f5d1305b4662b799b93a9fafe14e7237f7dbc", "committedDate": "2020-09-01T08:08:22Z", "message": "chore(broker): increase default disk usage watermarks\n\n- increase disk usage replication watermark from 0.9 to 0.99\n- increase disk usage command watermark from 0.8 to 0.97"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fc42bc77052cd300c67c2551cab1abff81b633e1", "author": {"user": {"login": "menski", "name": "Sebastian Menski"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/fc42bc77052cd300c67c2551cab1abff81b633e1", "committedDate": "2020-09-01T08:08:22Z", "message": "docs(operations): add section about disk space and watermarks"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "600ce515c0c89c3e0eab9273a389661727bb6752", "author": {"user": {"login": "menski", "name": "Sebastian Menski"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/600ce515c0c89c3e0eab9273a389661727bb6752", "committedDate": "2020-08-31T15:35:18Z", "message": "docs(operations): add section about disk space and watermarks"}, "afterCommit": {"oid": "fc42bc77052cd300c67c2551cab1abff81b633e1", "author": {"user": {"login": "menski", "name": "Sebastian Menski"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/fc42bc77052cd300c67c2551cab1abff81b633e1", "committedDate": "2020-09-01T08:08:22Z", "message": "docs(operations): add section about disk space and watermarks"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2581, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}