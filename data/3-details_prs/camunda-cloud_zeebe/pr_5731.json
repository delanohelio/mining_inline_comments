{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEyOTAzMTIz", "number": 5731, "title": "Remove FNI exporter", "bodyText": "Description\n\nReverts the commit which made changes on the MetricExporter, reason is that we found out that we already have metrics which we can use to calculate the FNI's per second.\nAdjust the dashboard such that it uses the element instance metrics to calculate the FNI per s.\n\n\nDefinition of Done\nNot all items need to be done depending on the issue and the pull request.\nCode changes:\n\n The changes are backwards compatibility with previous versions\n If it fixes a bug then PRs are created to backport the fix to the last two minor versions\n\nTesting:\n\n There are unit/integration tests that verify all acceptance criterias of the issue\n New tests are written to ensure backwards compatibility with further versions\n The behavior is tested manually\n The impact of the changes is verified by a benchmark\n\nDocumentation:\n\n The documentation is updated (e.g. BPMN reference, configuration, examples, get-started guides, etc.)\n New content is added to the release announcement", "createdAt": "2020-10-30T10:31:59Z", "url": "https://github.com/camunda-cloud/zeebe/pull/5731", "merged": true, "mergeCommit": {"oid": "8b3a738bc3e113746a46430acbc7c8c64d6baeeb"}, "closed": true, "closedAt": "2020-10-30T14:15:50Z", "author": {"login": "Zelldon"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdXkChlAH2gAyNTEyOTAzMTIzOmNlYjczZjgwYWYyNDUyMTdhODY1YzhhMWE4Mjg3N2I4MmViOTllYzg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXnBx0AFqTUyMDY4MTM5NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ceb73f80af245217a865c8a1a82877b82eb99ec8", "author": {"user": {"login": "Zelldon", "name": "Christopher Zell"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/ceb73f80af245217a865c8a1a82877b82eb99ec8", "committedDate": "2020-10-30T10:16:50Z", "message": "chore(broker): Revert \"chore(broker): add fni metrics\"\n\nThis reverts commit ed04e6baf964966cd409fdedde574ae2e4bf9251."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ca1d5fc17180d81b611de7881a5b594c644b01e", "author": {"user": {"login": "Zelldon", "name": "Christopher Zell"}}, "url": "https://github.com/camunda-cloud/zeebe/commit/1ca1d5fc17180d81b611de7881a5b594c644b01e", "committedDate": "2020-10-30T10:27:13Z", "message": "chore(monitor): use old element instance metrics for FNI"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwNjE3NTg0", "url": "https://github.com/camunda-cloud/zeebe/pull/5731#pullrequestreview-520617584", "createdAt": "2020-10-30T12:23:35Z", "commit": {"oid": "1ca1d5fc17180d81b611de7881a5b594c644b01e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxMjoyMzozNVrOHrMydw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQxMjoyMzo0NlrOHrMy1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTA2MDM0Mw==", "bodyText": "I just thought about something - do we also count terminated here? I just saw activated/completed, but of course it may have been because none of them were terminated. Did you verify? I'm asking because I'm not sure if action !=\"activated\" is enough.", "url": "https://github.com/camunda-cloud/zeebe/pull/5731#discussion_r515060343", "createdAt": "2020-10-30T12:23:35Z", "author": {"login": "npepinpe"}, "path": "monitor/grafana/zeebe.json", "diffHunk": "@@ -253,10 +253,10 @@\n           \"steppedLine\": false,\n           \"targets\": [\n             {\n-              \"expr\": \"sum(rate(zeebe_flow_node_instance_counter{namespace=~\\\"$namespace\\\", pod=~\\\"$pod\\\"}[1m])) by (partition, type)\",\n+              \"expr\": \"sum(rate(zeebe_element_instance_events_total{namespace=~\\\"$namespace\\\", pod=~\\\"$pod\\\", type!=\\\"PROCESS\\\", action!=\\\"activated\\\"}[1m])) by (partition, action)\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ca1d5fc17180d81b611de7881a5b594c644b01e"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTA2MDQzNg==", "bodyText": "Same as above", "url": "https://github.com/camunda-cloud/zeebe/pull/5731#discussion_r515060436", "createdAt": "2020-10-30T12:23:46Z", "author": {"login": "npepinpe"}, "path": "monitor/grafana/zeebe.json", "diffHunk": "@@ -361,12 +361,11 @@\n           \"pluginVersion\": \"6.7.1\",\n           \"targets\": [\n             {\n-              \"expr\": \"sum(rate(zeebe_flow_node_instance_counter{namespace=~\\\"$namespace\\\", pod=~\\\"$pod\\\"}[1m]))\",\n-              \"format\": \"time_series\",\n+              \"expr\": \"sum(rate(zeebe_element_instance_events_total{namespace=~\\\"$namespace\\\", pod=~\\\"$pod\\\", type!=\\\"PROCESS\\\", action!=\\\"activated\\\"}[1m]))\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ca1d5fc17180d81b611de7881a5b594c644b01e"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIwNjgxMzk0", "url": "https://github.com/camunda-cloud/zeebe/pull/5731#pullrequestreview-520681394", "createdAt": "2020-10-30T13:45:44Z", "commit": {"oid": "1ca1d5fc17180d81b611de7881a5b594c644b01e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2327, "cost": 1, "resetAt": "2021-11-01T13:07:16Z"}}}