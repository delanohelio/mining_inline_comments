{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5NTk1MzI0", "number": 4550, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwNDozNDowOFrOD-DgPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwNToyMTo0NFrOD-D-gQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2Mzk1NzExOnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/io/zeebe/engine/processor/workflow/deployment/model/transformer/StartEventTransformer.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwNDozNDowOFrOGX66kg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwNDozNDowOFrOGX66kg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzczNTY5OA==", "bodyText": "It seems that the binding for ELEMENT_TERMINATED is missing \ud83d\ude09", "url": "https://github.com/camunda-cloud/zeebe/pull/4550#discussion_r427735698", "createdAt": "2020-05-20T04:34:08Z", "author": {"login": "saig0"}, "path": "engine/src/main/java/io/zeebe/engine/processor/workflow/deployment/model/transformer/StartEventTransformer.java", "diffHunk": "@@ -58,7 +58,17 @@ public void transform(final StartEvent element, final TransformContext context)\n \n   private void bindLifecycle(final ExecutableCatchEventElement startEvent) {\n     startEvent.bindLifecycleState(\n-        WorkflowInstanceIntent.EVENT_OCCURRED, BpmnStep.START_EVENT_EVENT_OCCURRED);\n+        WorkflowInstanceIntent.EVENT_OCCURRED, BpmnStep.BPMN_ELEMENT_PROCESSOR);\n+    startEvent.bindLifecycleState(\n+        WorkflowInstanceIntent.ELEMENT_ACTIVATING, BpmnStep.BPMN_ELEMENT_PROCESSOR);\n+    startEvent.bindLifecycleState(\n+        WorkflowInstanceIntent.ELEMENT_ACTIVATED, BpmnStep.BPMN_ELEMENT_PROCESSOR);\n+    startEvent.bindLifecycleState(\n+        WorkflowInstanceIntent.ELEMENT_COMPLETING, BpmnStep.BPMN_ELEMENT_PROCESSOR);\n+    startEvent.bindLifecycleState(\n+        WorkflowInstanceIntent.ELEMENT_COMPLETED, BpmnStep.BPMN_ELEMENT_PROCESSOR);\n+    startEvent.bindLifecycleState(\n+        WorkflowInstanceIntent.ELEMENT_TERMINATING, BpmnStep.BPMN_ELEMENT_PROCESSOR);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "39f58ff1675ce3dab782195f2f43cdcdc8030357"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2NDAxNTc1OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/io/zeebe/engine/nwe/behavior/BpmnEventSubscriptionBehavior.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwNToxMTo0OVrOGX7esA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwNToxMTo0OVrOGX7esA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzc0NDk0NA==", "bodyText": "We should align the error messages with the existing ones (e.g. Expected ... but ... [context: ...].", "url": "https://github.com/camunda-cloud/zeebe/pull/4550#discussion_r427744944", "createdAt": "2020-05-20T05:11:49Z", "author": {"login": "saig0"}, "path": "engine/src/main/java/io/zeebe/engine/nwe/behavior/BpmnEventSubscriptionBehavior.java", "diffHunk": "@@ -32,7 +34,12 @@\n \n public final class BpmnEventSubscriptionBehavior {\n \n+  private static final String NO_WORKFLOW_FOUND_MESSAGE =\n+      \"Expected to create an instance of workflow with key '%d', but no such workflow was found\";\n+  private static final String NO_TRIGGERED_EVENT_MESSAGE = \"No triggered event for workflow '%d'\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "39f58ff1675ce3dab782195f2f43cdcdc8030357"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY2NDAzNDU3OnYy", "diffSide": "RIGHT", "path": "engine/src/main/java/io/zeebe/engine/nwe/event/StartEventProcessor.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwNToyMTo0NFrOGX7p6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwNToyMTo0NFrOGX7p6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzc0NzgxOA==", "bodyText": "I think input mappings on a start event doesn't make sense. A start event is activated on workflow instance creation or when it is triggered by an event. So, I see no use case of an input mapping - only for output mappings.\nLet's remove it if you agree.", "url": "https://github.com/camunda-cloud/zeebe/pull/4550#discussion_r427747818", "createdAt": "2020-05-20T05:21:44Z", "author": {"login": "saig0"}, "path": "engine/src/main/java/io/zeebe/engine/nwe/event/StartEventProcessor.java", "diffHunk": "@@ -0,0 +1,89 @@\n+/*\n+ * Copyright Camunda Services GmbH and/or licensed to Camunda Services GmbH under\n+ * one or more contributor license agreements. See the NOTICE file distributed\n+ * with this work for additional information regarding copyright ownership.\n+ * Licensed under the Zeebe Community License 1.0. You may not use this file\n+ * except in compliance with the Zeebe Community License 1.0.\n+ */\n+package io.zeebe.engine.nwe.event;\n+\n+import io.zeebe.engine.nwe.BpmnElementContext;\n+import io.zeebe.engine.nwe.BpmnElementProcessor;\n+import io.zeebe.engine.nwe.behavior.BpmnBehaviors;\n+import io.zeebe.engine.nwe.behavior.BpmnEventSubscriptionBehavior;\n+import io.zeebe.engine.nwe.behavior.BpmnIncidentBehavior;\n+import io.zeebe.engine.nwe.behavior.BpmnStateBehavior;\n+import io.zeebe.engine.nwe.behavior.BpmnStateTransitionBehavior;\n+import io.zeebe.engine.nwe.behavior.BpmnVariableMappingBehavior;\n+import io.zeebe.engine.processor.workflow.deployment.model.element.ExecutableStartEvent;\n+\n+public class StartEventProcessor implements BpmnElementProcessor<ExecutableStartEvent> {\n+\n+  private final BpmnEventSubscriptionBehavior eventSubscriptionBehavior;\n+  private final BpmnStateTransitionBehavior stateTransitionBehavior;\n+  private final BpmnVariableMappingBehavior variableMappingBehavior;\n+  private final BpmnIncidentBehavior incidentBehavior;\n+  private final BpmnStateBehavior stateBehavior;\n+\n+  public StartEventProcessor(final BpmnBehaviors bpmnBehaviors) {\n+    eventSubscriptionBehavior = bpmnBehaviors.eventSubscriptionBehavior();\n+    incidentBehavior = bpmnBehaviors.incidentBehavior();\n+    stateBehavior = bpmnBehaviors.stateBehavior();\n+    stateTransitionBehavior = bpmnBehaviors.stateTransitionBehavior();\n+    variableMappingBehavior = bpmnBehaviors.variableMappingBehavior();\n+  }\n+\n+  @Override\n+  public Class<ExecutableStartEvent> getType() {\n+    return ExecutableStartEvent.class;\n+  }\n+\n+  @Override\n+  public void onActivating(final ExecutableStartEvent element, final BpmnElementContext context) {\n+    // todo(@korthout): discuss the input mappings, there are no tests for this", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "39f58ff1675ce3dab782195f2f43cdcdc8030357"}, "originalPosition": 43}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 573, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}