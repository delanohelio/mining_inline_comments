{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0NTA4NDEy", "number": 5131, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwODo0Mjo1NFrOEWtGAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwODo0Mjo1NFrOEWtGAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyMjQyOTQ2OnYy", "diffSide": "RIGHT", "path": "benchmarks/project/src/main/java/io/zeebe/Worker.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQwODo0Mjo1NFrOG-F_PQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQxMjoyNDo0N1rOG-1ZjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc2MzAwNQ==", "bodyText": "Hm this would change our default logic right?", "url": "https://github.com/camunda-cloud/zeebe/pull/5131#discussion_r467763005", "createdAt": "2020-08-10T08:42:54Z", "author": {"login": "Zelldon"}, "path": "benchmarks/project/src/main/java/io/zeebe/Worker.java", "diffHunk": "@@ -56,7 +57,7 @@ public void run() {\n                   requestFutures.add(\n                       jobClient\n                           .newCompleteCommand(job.getKey())\n-                          .variables(job.getVariables())\n+                          .variables(variablesToCompleteJobWith)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "27804e470bac7c3e898ca77f770b6868883f9d9a"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODUxNTQ3NA==", "bodyText": "Yes, but only when there is a race condition, otherwise this doesn't change anything. Secondly, it is bad practice to complete jobs with all received variables because of this anyways.", "url": "https://github.com/camunda-cloud/zeebe/pull/5131#discussion_r468515474", "createdAt": "2020-08-11T11:39:01Z", "author": {"login": "korthout"}, "path": "benchmarks/project/src/main/java/io/zeebe/Worker.java", "diffHunk": "@@ -56,7 +57,7 @@ public void run() {\n                   requestFutures.add(\n                       jobClient\n                           .newCompleteCommand(job.getKey())\n-                          .variables(job.getVariables())\n+                          .variables(variablesToCompleteJobWith)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc2MzAwNQ=="}, "originalCommit": {"oid": "27804e470bac7c3e898ca77f770b6868883f9d9a"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODUxNjUxNw==", "bodyText": "how is this a race condition? \ud83d\ude05 You set it to empty now per default \ud83e\udd14", "url": "https://github.com/camunda-cloud/zeebe/pull/5131#discussion_r468516517", "createdAt": "2020-08-11T11:40:59Z", "author": {"login": "Zelldon"}, "path": "benchmarks/project/src/main/java/io/zeebe/Worker.java", "diffHunk": "@@ -56,7 +57,7 @@ public void run() {\n                   requestFutures.add(\n                       jobClient\n                           .newCompleteCommand(job.getKey())\n-                          .variables(job.getVariables())\n+                          .variables(variablesToCompleteJobWith)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc2MzAwNQ=="}, "originalCommit": {"oid": "27804e470bac7c3e898ca77f770b6868883f9d9a"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODUyOTYzMQ==", "bodyText": "There isn't now, but if this task is parallelised and there is some other change made to those variables in the mean time then it is. That is as well the only change in logic that is possible. Currently, all received variables are sent along with the complete job command and merged into (i.e. overwritten) in the workflow instance. So nothing really happens, because they are overwritten with the same value. We consider this bad practice because it can easily lead to race conditions when you parallelise part of the workflow.\nCompleting the job with no variables, just means that no variables will be merged into the workflow instance", "url": "https://github.com/camunda-cloud/zeebe/pull/5131#discussion_r468529631", "createdAt": "2020-08-11T12:05:49Z", "author": {"login": "korthout"}, "path": "benchmarks/project/src/main/java/io/zeebe/Worker.java", "diffHunk": "@@ -56,7 +57,7 @@ public void run() {\n                   requestFutures.add(\n                       jobClient\n                           .newCompleteCommand(job.getKey())\n-                          .variables(job.getVariables())\n+                          .variables(variablesToCompleteJobWith)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc2MzAwNQ=="}, "originalCommit": {"oid": "27804e470bac7c3e898ca77f770b6868883f9d9a"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODUzOTc4OA==", "bodyText": "Please lets discuss via zoom", "url": "https://github.com/camunda-cloud/zeebe/pull/5131#discussion_r468539788", "createdAt": "2020-08-11T12:24:47Z", "author": {"login": "Zelldon"}, "path": "benchmarks/project/src/main/java/io/zeebe/Worker.java", "diffHunk": "@@ -56,7 +57,7 @@ public void run() {\n                   requestFutures.add(\n                       jobClient\n                           .newCompleteCommand(job.getKey())\n-                          .variables(job.getVariables())\n+                          .variables(variablesToCompleteJobWith)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzc2MzAwNQ=="}, "originalCommit": {"oid": "27804e470bac7c3e898ca77f770b6868883f9d9a"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 385, "cost": 1, "resetAt": "2021-11-12T13:16:51Z"}}}