{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwMjQ0ODIx", "number": 843, "title": "Fix producer/consumer jooq configs", "bodyText": "Description of the Change\nFIXME: please add at least one sentence explaining why changes here are being made.", "createdAt": "2020-04-28T17:01:10Z", "url": "https://github.com/Netflix/titus-control-plane/pull/843", "merged": true, "mergeCommit": {"oid": "e77d200b7b968658eea219ccb4cfdc7c80ba45c8"}, "closed": true, "closedAt": "2020-04-28T23:40:20Z", "author": {"login": "amitaekbote"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABccG7YRgH2gAyNDEwMjQ0ODIxOjJmYmZmMDczMTI4Mzc0NzM4NTJjY2EyNjU1ZTdjMzc0MTgwM2NiZDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABccMFywgH2gAyNDEwMjQ0ODIxOjU2NzUwZTdjMmVmYWYyODRiZGMyZjZmMDg2YjFhM2MyMjdlNTU5MWI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2fbff07312837473852cca2655e7c3741803cbd0", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/2fbff07312837473852cca2655e7c3741803cbd0", "committedDate": "2020-04-28T17:00:15Z", "message": "Fix producer/consumer jooq configs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyMTI0Njg4", "url": "https://github.com/Netflix/titus-control-plane/pull/843#pullrequestreview-402124688", "createdAt": "2020-04-28T18:58:42Z", "commit": {"oid": "2fbff07312837473852cca2655e7c3741803cbd0"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxODo1ODo0MlrOGNig2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOFQxOTowMDozM1rOGNik6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjg1MDEzNg==", "bodyText": "We can use Archaius2 annotations and dynamic proxies with Spring. The dynamic wrapper is created by Archaius2Ext util.", "url": "https://github.com/Netflix/titus-control-plane/pull/843#discussion_r416850136", "createdAt": "2020-04-28T18:58:42Z", "author": {"login": "tbak"}, "path": "titus-ext/jooqflyway/src/main/java/com/netflix/titus/ext/jooqflyway/jobactivity/JooqConfiguration.java", "diffHunk": "@@ -16,18 +16,33 @@\n \n package com.netflix.titus.ext.jooqflyway.jobactivity;\n \n-import com.netflix.archaius.api.annotations.Configuration;\n-import com.netflix.archaius.api.annotations.DefaultValue;\n+import javax.inject.Inject;\n \n-@Configuration(prefix = \"titus.ext.jooqflyway\")\n-public interface JooqConfiguration {\n+import com.netflix.titus.common.util.SpringConfigurationUtil;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.core.env.Environment;\n \n-    @DefaultValue(\"jdbc://localhost\")\n-    String getDatabaseUrl();\n+public class JooqConfiguration {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2fbff07312837473852cca2655e7c3741803cbd0"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjg1MTE3OA==", "bodyText": "What is the difference between this database connection and the other one?", "url": "https://github.com/Netflix/titus-control-plane/pull/843#discussion_r416851178", "createdAt": "2020-04-28T19:00:33Z", "author": {"login": "tbak"}, "path": "titus-ext/jooqflyway/src/main/java/com/netflix/titus/ext/jooqflyway/jobactivity/producer/JooqJobActivityProducerConnectorComponent.java", "diffHunk": "@@ -0,0 +1,54 @@\n+package com.netflix.titus.ext.jooqflyway.jobactivity.producer;\n+\n+import javax.sql.DataSource;\n+\n+import com.netflix.titus.ext.jooqflyway.jobactivity.RDSSSLSocketFactory;\n+import com.zaxxer.hikari.HikariConfig;\n+import com.zaxxer.hikari.HikariDataSource;\n+import org.jooq.DSLContext;\n+import org.jooq.SQLDialect;\n+import org.jooq.impl.DSL;\n+import org.postgresql.PGProperty;\n+import org.springframework.beans.factory.annotation.Qualifier;\n+import org.springframework.context.annotation.Bean;\n+import org.springframework.context.annotation.Configuration;\n+import org.springframework.core.env.Environment;\n+\n+@Configuration\n+public class JooqJobActivityProducerConnectorComponent {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2fbff07312837473852cca2655e7c3741803cbd0"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fec5cd5b169b983bfc8b31baf7a2d04b5bccdae9", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/fec5cd5b169b983bfc8b31baf7a2d04b5bccdae9", "committedDate": "2020-04-28T22:35:18Z", "message": "Changing it to the recommended way"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "56750e7c2efaf284bdc2f6f086b1a3c227e5591b", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/56750e7c2efaf284bdc2f6f086b1a3c227e5591b", "committedDate": "2020-04-28T23:01:09Z", "message": "Adding @Configuration"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 507, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}