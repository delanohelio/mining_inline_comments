{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxNDQyMDc4", "number": 849, "title": "Job activity history plumb the data", "bodyText": "Use jooq+flyway instead of only jooq\nMove jooqflyway to JAH component, we can discuss as a team if this needs to be moved out later, I prefer it here till I work out the bugs that will come with it\nRead from publisher queue/write to job activity store\nUse local postgres for testing, I am not entirely sure why embedded postgres nopes out on some mac environments, I think setting up local postgres for testing this on everyones dev setups is a lot to do right now. I have a jira to move to test containers which should help solve this problem", "createdAt": "2020-05-21T16:07:35Z", "url": "https://github.com/Netflix/titus-control-plane/pull/849", "merged": true, "mergeCommit": {"oid": "e4d86c05856cf039fa2ff87d5272a5e8eeb5af2c"}, "closed": true, "closedAt": "2021-04-14T16:17:04Z", "author": {"login": "amitaekbote"}, "timelineItems": {"totalCount": 65, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABeAAU4oABqjQ0MTExOTQ4MzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABeM5ic_AH2gAyNDIxNDQyMDc4OjY2YzI2ZmJjZWIwMmJiNDhkMTA1MTk5MmJmYzg1NzE3ZTljOTY0ZDk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ea5043d1ed4efe3db0d0a51956d7d10f4640a416", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/ea5043d1ed4efe3db0d0a51956d7d10f4640a416", "committedDate": "2020-06-10T23:41:38Z", "message": "Updating dependency lock"}, "afterCommit": {"oid": "deae980b064ace33a9b9444a9dfc5304046a3583", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/deae980b064ace33a9b9444a9dfc5304046a3583", "committedDate": "2021-03-05T01:49:57Z", "message": "Move everything to jooqflyway"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34b7a5b225d118596b0f31c9b1cbffd49f4663ff", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/34b7a5b225d118596b0f31c9b1cbffd49f4663ff", "committedDate": "2021-03-15T22:19:49Z", "message": "Using a different jooq plugin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6071a128184c65e3ca9a6fcf68c7e87b7bbbca1a", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/6071a128184c65e3ca9a6fcf68c7e87b7bbbca1a", "committedDate": "2021-03-15T22:19:49Z", "message": "trying to use revolt plugin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d5e818be53b08801fa1e005882c45af36f3e209", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/3d5e818be53b08801fa1e005882c45af36f3e209", "committedDate": "2021-03-15T22:19:49Z", "message": "revolut plugin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7fc69ed41cae6ea458aa40cb2c02f7eb949b53d", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/b7fc69ed41cae6ea458aa40cb2c02f7eb949b53d", "committedDate": "2021-03-15T22:19:49Z", "message": "update everything"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a37ad4c517d4e326efa791028c646ddcfd3c6ca3", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/a37ad4c517d4e326efa791028c646ddcfd3c6ca3", "committedDate": "2021-03-15T22:19:49Z", "message": "more jooq upgrade"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ebb2ec58de37a332d52dd23495891250d7409de5", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/ebb2ec58de37a332d52dd23495891250d7409de5", "committedDate": "2021-03-15T22:19:49Z", "message": "Add producer to jooq"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4a83d457475b8d7f2b6f5a68c922d0545fef3a5", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/e4a83d457475b8d7f2b6f5a68c922d0545fef3a5", "committedDate": "2021-03-15T22:19:49Z", "message": "Updating dependency lock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ba62db6c4cd804eb3f342ed0e57f2c2bec25e5c", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/6ba62db6c4cd804eb3f342ed0e57f2c2bec25e5c", "committedDate": "2021-03-15T22:19:49Z", "message": "Update dependency lockfile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78271e512fd84690be1960d3145dfd6904106471", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/78271e512fd84690be1960d3145dfd6904106471", "committedDate": "2021-03-15T22:19:49Z", "message": "Err msgs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c006c983819b3b647a6b73f767a428d36ef0e658", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/c006c983819b3b647a6b73f767a428d36ef0e658", "committedDate": "2021-03-15T22:19:49Z", "message": "Add driver"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d8333ff1dae0bf03315a7813cbc08cb2f9fb30f8", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/d8333ff1dae0bf03315a7813cbc08cb2f9fb30f8", "committedDate": "2021-03-15T22:19:49Z", "message": "driver"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fcb805bab3db5f4454d99a1ebd90485d1622d26b", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/fcb805bab3db5f4454d99a1ebd90485d1622d26b", "committedDate": "2021-03-15T22:19:49Z", "message": "Adding data source url"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d610d5aaebcbf3a791e1a7a7a8713d252fe34d64", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/d610d5aaebcbf3a791e1a7a7a8713d252fe34d64", "committedDate": "2021-03-15T22:19:49Z", "message": "Updating dependencies"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "235d6493a47b1a56bc438c8f7b3ee8f529ba0a84", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/235d6493a47b1a56bc438c8f7b3ee8f529ba0a84", "committedDate": "2021-03-15T22:19:49Z", "message": "Testing publisher in jooqflyway"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c992404aeb82f5512833d58c153c0c0f37b71915", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/c992404aeb82f5512833d58c153c0c0f37b71915", "committedDate": "2021-03-15T22:19:49Z", "message": "Move publisher"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffab4ac6a2b678e3ea41cc08a0aa2bee36519626", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/ffab4ac6a2b678e3ea41cc08a0aa2bee36519626", "committedDate": "2021-03-15T22:19:49Z", "message": "Tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a446f28e6c5bc2d146fe729a7ed7f50cf21988a3", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/a446f28e6c5bc2d146fe729a7ed7f50cf21988a3", "committedDate": "2021-03-15T22:19:49Z", "message": "test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d26020a178a220f7d0589096088eeb05f596409", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/3d26020a178a220f7d0589096088eeb05f596409", "committedDate": "2021-03-15T22:19:49Z", "message": "Move everything to jooqflyway"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2095b032ce6ea87cae63502ab10ba32aa4fd68f9", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/2095b032ce6ea87cae63502ab10ba32aa4fd68f9", "committedDate": "2021-03-15T22:19:49Z", "message": "Add scheduler"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1ebc3271458d97891aa12d3e2fd94ec22f8c5af8", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/1ebc3271458d97891aa12d3e2fd94ec22f8c5af8", "committedDate": "2021-03-15T22:19:49Z", "message": "Add leader election"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0f704380353eb981fc0ba7bd785b48d52ad7ca83", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/0f704380353eb981fc0ba7bd785b48d52ad7ca83", "committedDate": "2021-03-15T22:19:49Z", "message": "restoring publisher"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ca0663d7830d352957b86393b9c8b9f92c34e7b8", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/ca0663d7830d352957b86393b9c8b9f92c34e7b8", "committedDate": "2021-03-15T22:19:49Z", "message": "clean up"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4348f4fc3d7760d64f868671197eb3ae7b5ac0fd", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/4348f4fc3d7760d64f868671197eb3ae7b5ac0fd", "committedDate": "2021-03-15T22:19:49Z", "message": "Updating names"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "19997a3dc35d241d84b58e93295a04944e488754", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/19997a3dc35d241d84b58e93295a04944e488754", "committedDate": "2021-03-15T22:19:49Z", "message": "Move jooqflyway to jah"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cdbc0c986c2b185a77411e24167e1b6dccb6fba5", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/cdbc0c986c2b185a77411e24167e1b6dccb6fba5", "committedDate": "2021-03-15T22:19:49Z", "message": "update dependency lock"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "584ed2dbc6a7908d25f7297be36b1d86e969857e", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/584ed2dbc6a7908d25f7297be36b1d86e969857e", "committedDate": "2021-03-15T22:19:49Z", "message": "Update springboot dependency locks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "234846487d97631378a77d7a81931f1806b753d2", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/234846487d97631378a77d7a81931f1806b753d2", "committedDate": "2021-03-15T22:19:49Z", "message": "testing"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ae8094b84cc55890a2023dbf4744bb1d720b1c92", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/ae8094b84cc55890a2023dbf4744bb1d720b1c92", "committedDate": "2021-03-15T22:19:49Z", "message": "Making changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f761a9648136bd6fc02e3383f6a3f44ee870aa7d", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/f761a9648136bd6fc02e3383f6a3f44ee870aa7d", "committedDate": "2021-03-15T22:19:49Z", "message": "Code cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1f226b244d7b77076215e281f5b75e89faea8b2f", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/1f226b244d7b77076215e281f5b75e89faea8b2f", "committedDate": "2021-03-15T22:19:49Z", "message": "Use flyway"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd82c8128fe0ed9ccd113a3e0df73717ea6b305d", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/dd82c8128fe0ed9ccd113a3e0df73717ea6b305d", "committedDate": "2021-03-15T22:19:49Z", "message": "more dependencies"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea605fc3983bae23b200d072afadbbe79f0bd0ca", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/ea605fc3983bae23b200d072afadbbe79f0bd0ca", "committedDate": "2021-03-15T22:19:50Z", "message": "work"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ea307373a4938d961a69e726da4b14b46163482", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/3ea307373a4938d961a69e726da4b14b46163482", "committedDate": "2021-03-15T22:19:50Z", "message": "Add logic"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "267aeebcf8391f7f0754def056db2482243e81d3", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/267aeebcf8391f7f0754def056db2482243e81d3", "committedDate": "2021-03-15T22:19:50Z", "message": "Build"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d01cae6e6c5b667e3f67fa60161940bf0c27237a", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/d01cae6e6c5b667e3f67fa60161940bf0c27237a", "committedDate": "2021-03-15T22:19:50Z", "message": "Dont change dependencies for everything else"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50bde7447d28141c0fdf47ca2774e8d2e919b87d", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/50bde7447d28141c0fdf47ca2774e8d2e919b87d", "committedDate": "2021-03-15T22:19:50Z", "message": "Disable local"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c749499ece5d2caead22b6d2bdc90e2e6083bfe8", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/c749499ece5d2caead22b6d2bdc90e2e6083bfe8", "committedDate": "2021-03-15T22:01:08Z", "message": "Disable local"}, "afterCommit": {"oid": "50bde7447d28141c0fdf47ca2774e8d2e919b87d", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/50bde7447d28141c0fdf47ca2774e8d2e919b87d", "committedDate": "2021-03-15T22:19:50Z", "message": "Disable local"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eece028fe554ca946012dc84647582e4b9ede049", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/eece028fe554ca946012dc84647582e4b9ede049", "committedDate": "2021-03-15T23:01:43Z", "message": "test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "badc7e27df670dcfb30345096aded40a7c0a41f2", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/badc7e27df670dcfb30345096aded40a7c0a41f2", "committedDate": "2021-03-16T05:14:07Z", "message": "trying localhost"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dd9224756b104ae4ad99a0f9470e0064d031c4b2", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/dd9224756b104ae4ad99a0f9470e0064d031c4b2", "committedDate": "2021-03-16T18:06:58Z", "message": "use machine instead of docker"}, "afterCommit": {"oid": "badc7e27df670dcfb30345096aded40a7c0a41f2", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/badc7e27df670dcfb30345096aded40a7c0a41f2", "committedDate": "2021-03-16T05:14:07Z", "message": "trying localhost"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be33123e1d257227fbbec51bfe91ed9e107f9cca", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/be33123e1d257227fbbec51bfe91ed9e107f9cca", "committedDate": "2021-03-16T21:02:58Z", "message": "Upgrade plugin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dfd6098625636272f42562d6cbfab6e0f9f06da7", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/dfd6098625636272f42562d6cbfab6e0f9f06da7", "committedDate": "2021-03-16T21:17:29Z", "message": "host override"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61969d7f6e51806cfe0cc1b3b01869d0dacdfcec", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/61969d7f6e51806cfe0cc1b3b01869d0dacdfcec", "committedDate": "2021-03-16T21:18:08Z", "message": "revolut 0.3.6"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjE0ODU3MjI2", "url": "https://github.com/Netflix/titus-control-plane/pull/849#pullrequestreview-614857226", "createdAt": "2021-03-17T23:07:47Z", "commit": {"oid": "6d051e24784f43d547deca5ba01c87ed93f4c9d7"}, "state": "APPROVED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0xN1QyMzowNzo0N1rOI4z-ow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0xN1QyMzoxNToxNFrOI40Jqg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NjQ0Mjc4Nw==", "bodyText": "We keep storage implementation in separate subproject (in titus-ext/) so we can easily swap it if needed with different implementation.", "url": "https://github.com/Netflix/titus-control-plane/pull/849#discussion_r596442787", "createdAt": "2021-03-17T23:07:47Z", "author": {"login": "tbak"}, "path": "titus-supplementary-component/job-activity-history/build.gradle", "diffHunk": "@@ -1,8 +1,71 @@\n+buildscript {\n+    dependencies {\n+        classpath 'com.opentable.components:otj-pg-embedded:0.13.+'\n+    }\n+}\n+\n+plugins {\n+    id \"com.revolut.jooq-docker\" version \"0.3.6\"\n+    id 'org.flywaydb.flyway' version '5.2.4'\n+}\n+\n+apply plugin: \"com.revolut.jooq-docker\"\n+\n+ext.flywayVersion = '6.1.+'\n+ext.jooqVersion = '3.13.2'\n+ext.psql = '42.2.8'\n+\n dependencies {\n     compile \"org.springframework:spring-web:${springVersion}\"\n     compile \"org.springframework.boot:spring-boot:${springBootVersion}\"\n \n+    compile project(':titus-common')\n+    compile project(':titus-api')\n+    compile project(':titus-server-runtime')\n+\n+    implementation(\"org.jooq:jooq:${jooqVersion}\")\n+    jdbc(\"org.postgresql:postgresql:${psql}\")\n+\n+    // DB -  Drivers\n+    compile \"org.postgresql:postgresql:${psql}\"\n+\n+    // DB - jOOQ\n+    compile \"org.jooq:jooq:${jooqVersion}\"\n+    compile \"org.jooq:jooq-meta:${jooqVersion}\"\n+    compile \"org.jooq:jooq-codegen:${jooqVersion}\"\n+    // Flyway\n+    compile \"org.flywaydb:flyway-core:${flywayVersion}\"\n+\n+    compile 'com.opentable.components:otj-pg-embedded:0.13.+'\n+    // Hikari DataSource for connection pooling to the DB\n+    compile 'com.zaxxer:HikariCP:3.2.0'\n     compile project(':titus-server-runtime')\n \n     testCompile project(':titus-testkit')\n }\n+\n+// Begin: Jooq code generation using EmbeddedPostgres database and Flyway migration", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d051e24784f43d547deca5ba01c87ed93f4c9d7"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NjQ0MzY1MQ==", "bodyText": "There are more parameters to be configured, like interval, executor, etc.", "url": "https://github.com/Netflix/titus-control-plane/pull/849#discussion_r596443651", "createdAt": "2021-03-17T23:09:54Z", "author": {"login": "tbak"}, "path": "titus-supplementary-component/job-activity-history/src/main/java/com/netflix/titus/supplementary/jobactivity/JobActivityWorker.java", "diffHunk": "@@ -0,0 +1,61 @@\n+package com.netflix.titus.supplementary.jobactivity;\n+\n+import java.time.Duration;\n+import javax.annotation.PreDestroy;\n+import javax.inject.Inject;\n+import javax.inject.Singleton;\n+\n+import com.netflix.spectator.api.Registry;\n+import com.netflix.titus.common.framework.scheduler.ScheduleReference;\n+import com.netflix.titus.common.framework.scheduler.model.ScheduleDescriptor;\n+import com.netflix.titus.common.runtime.TitusRuntime;\n+import com.netflix.titus.common.util.Evaluators;\n+import com.netflix.titus.common.util.ExecutorsExt;\n+import com.netflix.titus.common.util.guice.annotation.Activator;\n+import com.netflix.titus.common.util.guice.annotation.Deactivator;\n+import com.netflix.titus.common.util.time.Clock;\n+import com.netflix.titus.supplementary.jobactivity.store.JobActivityStore;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+@Singleton\n+public class JobActivityWorker {\n+    private ScheduleReference schedulerRef;\n+    private final Clock clock;\n+    private final TitusRuntime titusRuntime;\n+    private JobActivityStore jobActivityStore;\n+\n+    private static final Logger logger = LoggerFactory.getLogger(JobActivityWorker.class);\n+\n+    @Inject\n+    public JobActivityWorker(TitusRuntime titusRuntime,\n+                             JobActivityStore jobActivityStore) {\n+        this.clock = titusRuntime.getClock();\n+        this.titusRuntime = titusRuntime;\n+        this.jobActivityStore = jobActivityStore;\n+\n+        Registry registry = titusRuntime.getRegistry();\n+    }\n+\n+    @Activator\n+    public void enterActiveMode() {\n+        ScheduleDescriptor scheduleDescriptor = ScheduleDescriptor.newBuilder()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d051e24784f43d547deca5ba01c87ed93f4c9d7"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NjQ0NDI2Ng==", "bodyText": "This is not needed anymore. You can use Archaius2Ext.newConfiguration to create Archaius style proxy to Spring config.", "url": "https://github.com/Netflix/titus-control-plane/pull/849#discussion_r596444266", "createdAt": "2021-03-17T23:11:33Z", "author": {"login": "tbak"}, "path": "titus-supplementary-component/job-activity-history/src/main/java/com/netflix/titus/supplementary/jobactivity/store/JooqConfigurationBean.java", "diffHunk": "@@ -14,36 +14,34 @@\n  * limitations under the License.\n  */\n \n-package com.netflix.titus.ext.jooqflyway.jobactivity;\n-\n-import javax.inject.Inject;\n+package com.netflix.titus.supplementary.jobactivity.store;\n \n import com.netflix.archaius.api.annotations.Configuration;\n import com.netflix.titus.common.util.SpringConfigurationUtil;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.core.env.Environment;\n \n-@Configuration(prefix = \"titus.ext.jooqflyway\")\n-public class JooqConfiguration {\n+@Configuration(prefix = \"titus.ext.supplementary.jobactivity\")\n+public class JooqConfigurationBean implements JooqConfiguration {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d051e24784f43d547deca5ba01c87ed93f4c9d7"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NjQ0NDQ1OA==", "bodyText": "logger?", "url": "https://github.com/Netflix/titus-control-plane/pull/849#discussion_r596444458", "createdAt": "2021-03-17T23:12:05Z", "author": {"login": "tbak"}, "path": "titus-supplementary-component/job-activity-history/src/main/java/com/netflix/titus/supplementary/jobactivity/store/JooqJobActivityContextComponent.java", "diffHunk": "@@ -44,67 +41,73 @@ public SQLDialect dialect() {\n     }\n \n     @Bean\n-    public EmbeddedPostgresService getEmbeddedPostgresService(JooqConfiguration configuration) {\n-        return new EmbeddedPostgresService(configuration);\n+    public EmbeddedPostgresService getEmbeddedPostgresService(JooqConfigurationBean jooqConfiguration) {\n+        return new EmbeddedPostgresService(jooqConfiguration);\n     }\n \n     @Bean\n     @Primary\n-    public JooqContext getJooqContext(JooqConfiguration jooqConfiguration, EmbeddedPostgresService embeddedPostgresService) {\n+    @Qualifier(\"jobActivityJooqContext\")\n+    public JooqContext getJobActivityJooqContext(JooqConfigurationBean jooqConfiguration, EmbeddedPostgresService embeddedPostgresService) {\n         HikariConfig hikariConfig = new HikariConfig();\n+        System.out.println(\"CONSUMER\");\n \n         hikariConfig.setAutoCommit(true);\n \n         // Connection management\n         hikariConfig.setConnectionTimeout(10000);\n         hikariConfig.setMaximumPoolSize(10);\n         hikariConfig.setLeakDetectionThreshold(3000);\n-\n         if (jooqConfiguration.isInMemoryDb()) {\n             hikariConfig.setDataSource(embeddedPostgresService.getDataSource());\n+        } else if (jooqConfiguration.isLocalDb()) {\n+            hikariConfig.setJdbcUrl(\"jdbc:postgresql://localhost:5432/postgres\");\n         } else {\n             hikariConfig.addDataSourceProperty(PGProperty.SSL.getName(), \"true\");\n             hikariConfig.addDataSourceProperty(PGProperty.SSL_MODE.getName(), \"verify-ca\");\n             hikariConfig.addDataSourceProperty(PGProperty.SSL_FACTORY.getName(), RDSSSLSocketFactory.class.getName());\n             hikariConfig.setJdbcUrl(jooqConfiguration.getDatabaseUrl());\n         }\n-\n         return new JooqContext(jooqConfiguration, new HikariDataSource(hikariConfig), embeddedPostgresService);\n     }\n \n     @Bean\n-    public JooqContext getJooqProducerContext(JooqConfiguration jooqConfiguration, EmbeddedPostgresService embeddedPostgresService) {\n+    @Qualifier(\"producerJooqContext\")\n+    public JooqContext getJooqProducerContext(JooqConfigurationBean jooqConfiguration, EmbeddedPostgresService embeddedPostgresService) {\n         HikariConfig hikariConfig = new HikariConfig();\n-\n         hikariConfig.setAutoCommit(true);\n+        System.err.println(\"PRODUCER\");\n \n         // Connection management\n         hikariConfig.setConnectionTimeout(10000);\n         hikariConfig.setMaximumPoolSize(10);\n         hikariConfig.setLeakDetectionThreshold(3000);\n \n         if (jooqConfiguration.isInMemoryDb()) {\n+            System.out.println(\"IN memory\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d051e24784f43d547deca5ba01c87ed93f4c9d7"}, "originalPosition": 94}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NjQ0NDc3NQ==", "bodyText": "logger?", "url": "https://github.com/Netflix/titus-control-plane/pull/849#discussion_r596444775", "createdAt": "2021-03-17T23:12:56Z", "author": {"login": "tbak"}, "path": "titus-supplementary-component/job-activity-history/src/main/java/com/netflix/titus/supplementary/jobactivity/store/JooqJobActivityStore.java", "diffHunk": "@@ -0,0 +1,154 @@\n+/*\n+ * Copyright 2019 Netflix, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.netflix.titus.supplementary.jobactivity.store;\n+\n+import java.time.LocalDateTime;\n+import java.time.ZoneOffset;\n+import java.util.List;\n+import javax.inject.Inject;\n+import javax.inject.Singleton;\n+\n+import com.google.common.annotations.VisibleForTesting;\n+import com.google.protobuf.InvalidProtocolBufferException;\n+import com.netflix.titus.api.jobactivity.store.JobActivityPublisherRecord;\n+import com.netflix.titus.api.jobactivity.store.JobActivityStoreException;\n+import com.netflix.titus.api.jobmanager.model.job.Job;\n+import com.netflix.titus.api.jobmanager.model.job.Task;\n+import com.netflix.titus.common.framework.scheduler.ScheduleReference;\n+import com.netflix.titus.common.runtime.TitusRuntime;\n+import com.netflix.titus.common.util.spectator.DatabaseMetrics;\n+import com.netflix.titus.common.util.time.Clock;\n+import com.netflix.titus.runtime.jobactivity.JobActivityPublisherRecordUtils;\n+import org.flywaydb.core.Flyway;\n+import org.jooq.DSLContext;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+import reactor.core.publisher.Mono;\n+\n+import static com.netflix.titus.supplementary.jobactivity.activity.tables.ActivityQueue.ACTIVITY_QUEUE;\n+import static com.netflix.titus.supplementary.jobactivity.jobactivity.Jobactivity.JOBACTIVITY;\n+\n+\n+@Singleton\n+public class JooqJobActivityStore implements JobActivityStore {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(JobActivityStore.class);\n+    private final JooqContext jobActivityJooqContext;\n+    private final JooqContext producerJooqContext;\n+    private final TitusRuntime titusRuntime;\n+    private ScheduleReference schedulerRef;\n+    private final Clock clock;\n+\n+    private final DSLContext jobActivityDSLContext;\n+    private final DSLContext producerDSLContext;\n+    private final DatabaseMetrics producerDatabaseMetrics;\n+    private final DatabaseMetrics jobActivityDatabaseMetrics;\n+\n+    @Inject\n+    public JooqJobActivityStore(TitusRuntime titusRuntime,\n+                                JooqContext jobActivityJooqContext,\n+                                JooqContext producerJooqContext) {\n+        this(titusRuntime, jobActivityJooqContext, producerJooqContext, true);\n+    }\n+\n+    @VisibleForTesting\n+    public JooqJobActivityStore(TitusRuntime titusRuntime,\n+                                JooqContext jobActivityJooqContext,\n+                                JooqContext producerJooqContext,\n+                                boolean createIfNotExists) {\n+        this.jobActivityJooqContext = jobActivityJooqContext;\n+        this.producerJooqContext = producerJooqContext;\n+        this.titusRuntime = titusRuntime;\n+        this.clock = titusRuntime.getClock();\n+        this.jobActivityDSLContext = jobActivityJooqContext.getDslContext();\n+        this.producerDSLContext = producerJooqContext.getDslContext();\n+        this.producerDatabaseMetrics = new DatabaseMetrics(titusRuntime.getRegistry(), \"titus\", \"JobActivityPublisher\");\n+        this.jobActivityDatabaseMetrics = new DatabaseMetrics(titusRuntime.getRegistry(), \"titus\", \"JobActivityHistory\");\n+\n+        initializeSchema(createIfNotExists);\n+    }\n+\n+    public void initializeSchema(boolean createIfNotExists) {\n+        if (createIfNotExists) {\n+            logger.info(\"Creating/migrating JooqJobStore DB schema...\");\n+            Flyway flyway = Flyway.configure().dataSource(jobActivityJooqContext.getDataSource()).load();\n+            flyway.migrate();\n+        }\n+    }\n+\n+    @Override\n+    public Mono<Void> processRecords() {\n+        return readRecordFromPublisherQueue()\n+                .flatMap(this::writeRecord)\n+                .flatMap(this::deleteRecordFromPublisher);\n+    }\n+\n+    public Mono<JobActivityPublisherRecord> readRecordFromPublisherQueue() {\n+        return JooqUtils.executeAsyncMono(() -> {\n+            long startTimeMs = System.currentTimeMillis();\n+            List<JobActivityPublisherRecord> records = producerDSLContext\n+                    .selectFrom(ACTIVITY_QUEUE)\n+                    .orderBy(ACTIVITY_QUEUE.QUEUE_INDEX.asc())\n+                    .limit(1)\n+                    .fetchInto(JobActivityPublisherRecord.class);\n+            if(records.size() != 0) {\n+                System.out.println(records.get(0).getRecordType());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d051e24784f43d547deca5ba01c87ed93f4c9d7"}, "originalPosition": 109}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NjQ0NTYxMA==", "bodyText": "Ideally this should be unlimited size or very high (128KB). We might also consider gziping it to save space.", "url": "https://github.com/Netflix/titus-control-plane/pull/849#discussion_r596445610", "createdAt": "2021-03-17T23:15:14Z", "author": {"login": "tbak"}, "path": "titus-supplementary-component/job-activity-history/src/main/resources/db/migration/V1__initial_setup.sql", "diffHunk": "@@ -16,22 +16,30 @@\n \n CREATE SCHEMA IF NOT EXISTS jobactivity;\n \n-\n CREATE TABLE IF NOT EXISTS jobactivity.jobs\n (\n-  job_id          VARCHAR (64) NOT NULL,\n-  create_time     TIMESTAMP NOT NULL,\n-  record_time     TIMESTAMP NOT NULL,\n-  job_record_json jsonb,\n-  PRIMARY KEY (job_id)\n+    job_id          VARCHAR(64) NOT NULL,\n+    record_time     TIMESTAMP   NOT NULL,\n+    job_record_json varchar(64),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6d051e24784f43d547deca5ba01c87ed93f4c9d7"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "57e3956fc59b6c38c6bab84ffbd509fa15006520", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/57e3956fc59b6c38c6bab84ffbd509fa15006520", "committedDate": "2021-03-18T17:24:40Z", "message": "remove loggrs"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6d051e24784f43d547deca5ba01c87ed93f4c9d7", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/6d051e24784f43d547deca5ba01c87ed93f4c9d7", "committedDate": "2021-03-16T21:31:59Z", "message": "specify pg user"}, "afterCommit": {"oid": "57e3956fc59b6c38c6bab84ffbd509fa15006520", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/57e3956fc59b6c38c6bab84ffbd509fa15006520", "committedDate": "2021-03-18T17:24:40Z", "message": "remove loggrs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "985aa7a3275665b96c81807b3a09ab34ea2af31f", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/985aa7a3275665b96c81807b3a09ab34ea2af31f", "committedDate": "2021-03-25T04:28:19Z", "message": "use postgres image"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "66e294beddd3d764ce3190f538dd6d059e14e7a3", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/66e294beddd3d764ce3190f538dd6d059e14e7a3", "committedDate": "2021-03-25T04:32:09Z", "message": "use postgres image"}, "afterCommit": {"oid": "985aa7a3275665b96c81807b3a09ab34ea2af31f", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/985aa7a3275665b96c81807b3a09ab34ea2af31f", "committedDate": "2021-03-25T04:28:19Z", "message": "use postgres image"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7b3e36ff49d2d31250dbd7a817fe5b1052204bc", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/d7b3e36ff49d2d31250dbd7a817fe5b1052204bc", "committedDate": "2021-03-25T04:40:37Z", "message": "more options"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a06d9ea60ad42e7cf18e5606508bb9e47da0fd1a", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/a06d9ea60ad42e7cf18e5606508bb9e47da0fd1a", "committedDate": "2021-03-25T04:46:10Z", "message": "remote docker"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51d3bb514f6ca510cb8273df795d1c45e5a524d1", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/51d3bb514f6ca510cb8273df795d1c45e5a524d1", "committedDate": "2021-03-25T04:52:06Z", "message": "remote docker"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd66e4de3930ae0c63bf7c4e251e930a5654da00", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/fd66e4de3930ae0c63bf7c4e251e930a5654da00", "committedDate": "2021-04-07T23:01:02Z", "message": "Remove auth"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b204df2ced7a845cd94cb2ae0a25fe2c011e0d47", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/b204df2ced7a845cd94cb2ae0a25fe2c011e0d47", "committedDate": "2021-04-07T23:40:45Z", "message": "Wrong environment variable"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1f2a1b7fc95e462d833e8d40d0ffc5b7d86462c", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/d1f2a1b7fc95e462d833e8d40d0ffc5b7d86462c", "committedDate": "2021-04-07T23:45:03Z", "message": "Remove alpine"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "849c23a95229907d745fadbcc7f2fad55cbbf420", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/849c23a95229907d745fadbcc7f2fad55cbbf420", "committedDate": "2021-04-07T23:52:49Z", "message": "remove local host override"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fb8efd6f829e0bcc99a9ea54490d9fbdf71b76da", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/fb8efd6f829e0bcc99a9ea54490d9fbdf71b76da", "committedDate": "2021-04-07T23:55:21Z", "message": "add port"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4475bea38333e9f49edafbb397f2ad94965f5e79", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/4475bea38333e9f49edafbb397f2ad94965f5e79", "committedDate": "2021-04-13T03:30:26Z", "message": "circleci"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b496ccc493213de3a26b8a7a9ab66b341cdc97a4", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/b496ccc493213de3a26b8a7a9ab66b341cdc97a4", "committedDate": "2021-04-13T18:28:56Z", "message": "using embedded"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "212131481b59b179388a4456557ac7730a4d959d", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/212131481b59b179388a4456557ac7730a4d959d", "committedDate": "2021-04-13T19:02:24Z", "message": "Move everything to embedded"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b6437c4dba10ae6ecf5a8204fb226d0d7995ce64", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/b6437c4dba10ae6ecf5a8204fb226d0d7995ce64", "committedDate": "2021-04-14T02:46:17Z", "message": "Moving back to titus-ext"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ea0c90ad1a9b23f28bf5bf3f9568f55b3038dca", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/5ea0c90ad1a9b23f28bf5bf3f9568f55b3038dca", "committedDate": "2021-04-14T02:58:01Z", "message": "Cleaning up"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a034a28e24d9ef314ee736b7293fbc6ba880218a", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/a034a28e24d9ef314ee736b7293fbc6ba880218a", "committedDate": "2021-04-13T19:08:19Z", "message": "disable local db"}, "afterCommit": {"oid": "5ea0c90ad1a9b23f28bf5bf3f9568f55b3038dca", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/5ea0c90ad1a9b23f28bf5bf3f9568f55b3038dca", "committedDate": "2021-04-14T02:58:01Z", "message": "Cleaning up"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ab370d51492907250f6cb09ceb438d21699e40b6", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/ab370d51492907250f6cb09ceb438d21699e40b6", "committedDate": "2021-04-14T03:07:00Z", "message": "disable local by default"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66c26fbceb02bb48d1051992bfc85717e9c964d9", "author": {"user": {"login": "amitaekbote", "name": "Amita Ekbote"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/66c26fbceb02bb48d1051992bfc85717e9c964d9", "committedDate": "2021-04-14T03:17:42Z", "message": "Testing with inmemory set to true"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 520, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}