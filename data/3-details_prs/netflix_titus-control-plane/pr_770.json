{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1MDc5NTA5", "number": 770, "title": "Add grpc to reactor server support for cglib proxies", "bodyText": "Spring security annotations result in cglib proxied classes. These classes do no retain enough generic type information for the grpc to reactor method handler to work with, so we pass additional class details in these cases.", "createdAt": "2020-02-13T20:45:42Z", "url": "https://github.com/Netflix/titus-control-plane/pull/770", "merged": true, "mergeCommit": {"oid": "fa63c967c6e54369282a47f41ac96989c8cc96cd"}, "closed": true, "closedAt": "2020-02-13T22:11:50Z", "author": {"login": "andrew-leung"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcEAz0pgH2gAyMzc1MDc5NTA5OjhhMDYxNmZjNWE3OWFmN2ZiYTIwZDJjZWEzNGI1MGJmZWI3YmIyNjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcECABmgH2gAyMzc1MDc5NTA5OmU3YWNjNzQ3M2I0ODBkMmJlOGIzOWViNWNmOTA3OGY0MjRjYzc1ODE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8a0616fc5a79af7fba20d2cea34b50bfeb7bb266", "author": {"user": {"login": "andrew-leung", "name": "Andrew Leung"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/8a0616fc5a79af7fba20d2cea34b50bfeb7bb266", "committedDate": "2020-02-13T20:18:23Z", "message": "Add gprc to reactor server support for cglib proxies"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4NTQzNzQy", "url": "https://github.com/Netflix/titus-control-plane/pull/770#pullrequestreview-358543742", "createdAt": "2020-02-13T20:54:55Z", "commit": {"oid": "8a0616fc5a79af7fba20d2cea34b50bfeb7bb266"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QyMDo1NDo1NVrOFpjOVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QyMDo1NTo0OFrOFpjQIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTExMzA0Ng==", "bodyText": "Could you add a comment why we need reactorDetailedFallbackClass, and cannot just do reactService.getClass()?", "url": "https://github.com/Netflix/titus-control-plane/pull/770#discussion_r379113046", "createdAt": "2020-02-13T20:54:55Z", "author": {"login": "tbak"}, "path": "titus-common/src/main/java/com/netflix/titus/common/util/grpc/reactor/GrpcToReactorServerFactory.java", "diffHunk": "@@ -22,4 +22,6 @@\n public interface GrpcToReactorServerFactory {\n \n     <REACT_SERVICE> ServerServiceDefinition apply(ServiceDescriptor serviceDefinition, REACT_SERVICE reactService);\n+\n+    <REACT_SERVICE> ServerServiceDefinition apply(ServiceDescriptor serviceDefinition, REACT_SERVICE reactService, Class<REACT_SERVICE> reactorDetailedFallbackClass);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a0616fc5a79af7fba20d2cea34b50bfeb7bb266"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTExMzUwNg==", "bodyText": "Can we pass here reactService.getClass(), not null?", "url": "https://github.com/Netflix/titus-control-plane/pull/770#discussion_r379113506", "createdAt": "2020-02-13T20:55:48Z", "author": {"login": "tbak"}, "path": "titus-common/src/main/java/com/netflix/titus/common/util/grpc/reactor/server/DefaultGrpcToReactorServerFactory.java", "diffHunk": "@@ -34,8 +34,14 @@ public DefaultGrpcToReactorServerFactory(Class<CONTEXT> contextType, Supplier<CO\n \n     @Override\n     public <REACT_SERVICE> ServerServiceDefinition apply(ServiceDescriptor serviceDescriptor, REACT_SERVICE reactService) {\n+        return apply(serviceDescriptor, reactService, null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a0616fc5a79af7fba20d2cea34b50bfeb7bb266"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7acc7473b480d2be8b39eb5cf9078f424cc7581", "author": {"user": {"login": "andrew-leung", "name": "Andrew Leung"}}, "url": "https://github.com/Netflix/titus-control-plane/commit/e7acc7473b480d2be8b39eb5cf9078f424cc7581", "committedDate": "2020-02-13T21:41:37Z", "message": "Review comments: Pass instance's class instead of null and add interface comment"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 619, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}