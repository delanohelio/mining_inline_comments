{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA3NTYxNTMy", "number": 840, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQyMTo0MjowNVrOD0_FKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQyMTo0MjowNVrOD0_FKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU2ODg2MDU2OnYy", "diffSide": "RIGHT", "path": "titus-common-grpc-api/build.gradle", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQyMTo0MjowNVrOGKNFZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQyMTo1Nzo1OVrOGKNkrQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzM1MzMxOQ==", "bodyText": "could this be done inside the gradle JVM instead of shelling out here? Shelling out has all sorts of implications and assumptions about where it is running\nE.g.: https://docs.gradle.org/current/userguide/working_with_files.html#sec:moving_files_example or directly registering a task of type: Copy instead of type: Exec", "url": "https://github.com/Netflix/titus-control-plane/pull/840#discussion_r413353319", "createdAt": "2020-04-22T21:42:05Z", "author": {"login": "fabiokung"}, "path": "titus-common-grpc-api/build.gradle", "diffHunk": "@@ -22,13 +22,11 @@ dependencies {\n }\n \n if (project.hasProperty(\"idlLocal\")) {\n-    task extractProto {\n-        doLast {\n-            copy {\n-                from '../../titus-api-definitions/src/main/proto'\n-                into new File(buildDir, \"extracted-protos/main\")\n-            }\n-        }\n+    tasks.register('copyProtos', Exec) {\n+        commandLine \"/bin/bash\", \"-c\", \"cp -R \" + new File(buildDir, '../../../titus-api-definitions/src/main/proto/netflix')  + \" \" + new File(buildDir, \"extracted-protos/main\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "50079ff78ca45b8e9f53b98178f4a16178091073"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzM1NjY1Mw==", "bodyText": "I will try ant task. Copy does not work (gradle decides to skip the task).", "url": "https://github.com/Netflix/titus-control-plane/pull/840#discussion_r413356653", "createdAt": "2020-04-22T21:48:51Z", "author": {"login": "tbak"}, "path": "titus-common-grpc-api/build.gradle", "diffHunk": "@@ -22,13 +22,11 @@ dependencies {\n }\n \n if (project.hasProperty(\"idlLocal\")) {\n-    task extractProto {\n-        doLast {\n-            copy {\n-                from '../../titus-api-definitions/src/main/proto'\n-                into new File(buildDir, \"extracted-protos/main\")\n-            }\n-        }\n+    tasks.register('copyProtos', Exec) {\n+        commandLine \"/bin/bash\", \"-c\", \"cp -R \" + new File(buildDir, '../../../titus-api-definitions/src/main/proto/netflix')  + \" \" + new File(buildDir, \"extracted-protos/main\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzM1MzMxOQ=="}, "originalCommit": {"oid": "50079ff78ca45b8e9f53b98178f4a16178091073"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzM2MDc1OQ==", "bodyText": "I am not getting any success with ant task as well.\nAnyway this property is only set in the local builds to use local version of titus-api-definitions. It is not used in the regular build process.", "url": "https://github.com/Netflix/titus-control-plane/pull/840#discussion_r413360759", "createdAt": "2020-04-22T21:56:51Z", "author": {"login": "tbak"}, "path": "titus-common-grpc-api/build.gradle", "diffHunk": "@@ -22,13 +22,11 @@ dependencies {\n }\n \n if (project.hasProperty(\"idlLocal\")) {\n-    task extractProto {\n-        doLast {\n-            copy {\n-                from '../../titus-api-definitions/src/main/proto'\n-                into new File(buildDir, \"extracted-protos/main\")\n-            }\n-        }\n+    tasks.register('copyProtos', Exec) {\n+        commandLine \"/bin/bash\", \"-c\", \"cp -R \" + new File(buildDir, '../../../titus-api-definitions/src/main/proto/netflix')  + \" \" + new File(buildDir, \"extracted-protos/main\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzM1MzMxOQ=="}, "originalCommit": {"oid": "50079ff78ca45b8e9f53b98178f4a16178091073"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzM2MTMyNQ==", "bodyText": "Yeah, it was strange to me that you were shelling out instead of using the gradle task but I did not know the gradle task was the issue in the first place.", "url": "https://github.com/Netflix/titus-control-plane/pull/840#discussion_r413361325", "createdAt": "2020-04-22T21:57:59Z", "author": {"login": "corindwyer"}, "path": "titus-common-grpc-api/build.gradle", "diffHunk": "@@ -22,13 +22,11 @@ dependencies {\n }\n \n if (project.hasProperty(\"idlLocal\")) {\n-    task extractProto {\n-        doLast {\n-            copy {\n-                from '../../titus-api-definitions/src/main/proto'\n-                into new File(buildDir, \"extracted-protos/main\")\n-            }\n-        }\n+    tasks.register('copyProtos', Exec) {\n+        commandLine \"/bin/bash\", \"-c\", \"cp -R \" + new File(buildDir, '../../../titus-api-definitions/src/main/proto/netflix')  + \" \" + new File(buildDir, \"extracted-protos/main\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzM1MzMxOQ=="}, "originalCommit": {"oid": "50079ff78ca45b8e9f53b98178f4a16178091073"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3944, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}