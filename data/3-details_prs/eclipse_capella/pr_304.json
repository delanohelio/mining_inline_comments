{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2ODYyNTQw", "number": 304, "title": "V1.3.x richtext backports", "bodyText": "", "createdAt": "2020-07-09T13:31:08Z", "url": "https://github.com/eclipse/capella/pull/304", "merged": true, "mergeCommit": {"oid": "d8ed68fade3b31abb06b946674010f858c4f3052"}, "closed": true, "closedAt": "2020-07-20T12:56:57Z", "author": {"login": "sandupostaru"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczOH2gAH2gAyNDQ2ODYyNTQwOmE4NTc4YWUyNTk0ODIwZjlhYjMwOWNhNmZjOGU1MzJlNjcxYmU3NTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc2xMFAAFqTQ1MTU3ODk5OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a8578ae2594820f9ab309ca6fc8e532e671be759", "author": {"user": {"login": "pdulth", "name": "Philippe DUL"}}, "url": "https://github.com/eclipse/capella/commit/a8578ae2594820f9ab309ca6fc8e532e671be759", "committedDate": "2020-07-09T12:23:28Z", "message": "{561365] Richtext can save previous description into the current element\n\n- Merge capella and diagram sections, the switch between diagram\nelements and diagram blank is quicker\n- Avoid unnecessary several layouts of the view\n- Improve the switch between 'Already opened' and property view\n\nConflicts:\n\tcore/plugins/org.polarsys.capella.core.ui.properties.richtext/src/org/polarsys/capella/core/ui/properties/richtext/RichtextManager.java\n\tcore/plugins/org.polarsys.capella.core.ui.properties.richtext/src/org/polarsys/capella/core/ui/properties/richtext/sections/CapellaDescriptionPropertySection.java\n\tcore/plugins/org.polarsys.capella.core.ui.properties.richtext/src/org/polarsys/capella/core/ui/properties/richtext/sections/DescriptionPropertySection.java\n\nThe initial code was updated since descriptions in 1.3.x are persisted\nin the DRepresentation, where as in 1.4.x they are persisted in the\nDRepresentationDescriptor\n\nChange-Id: I4ac046d28e592b6298bc6d2f92168e287b925da2\nSigned-off-by: Philippe DUL <philippe.dul@thalesgroup.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f45b5353661b79ed64772dfa976406ee773dae31", "author": {"user": {"login": "pdulth", "name": "Philippe DUL"}}, "url": "https://github.com/eclipse/capella/commit/f45b5353661b79ed64772dfa976406ee773dae31", "committedDate": "2020-07-09T12:25:32Z", "message": "{561365] Improve layout of Richtext property view\n\n- Remove unnecessary Group\n- Use widgetFactory to create the 'Already Opened' label, to prevent\ngray background on Property View\n\nChange-Id: I75566c2c26f463aaab4fd54691a7f3754b7b5d7d\nSigned-off-by: Philippe DUL <philippe.dul@thalesgroup.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be1a534d1c252a5266033463edb3cd35cfbd6c14", "author": {"user": {"login": "pdulth", "name": "Philippe DUL"}}, "url": "https://github.com/eclipse/capella/commit/be1a534d1c252a5266033463edb3cd35cfbd6c14", "committedDate": "2020-07-09T13:01:04Z", "message": "[561365] Richtext can lost the last modification when switching tab\n(#194)\n\n* [561365] Richtext can lose the last modification when switching tab\n\n- Fix the Issue\n\nBug: 561365\nChange-Id: I3139f3b9add7b981cb3d8fa5a5192c6bb973ac86\nSigned-off-by: Philippe DUL <philippe.dul@thalesgroup.com>\n\nCo-authored-by: Sandu Postaru <sandu.postaru@thalesgroup.com>\n\nConflicts:\n\tcore/plugins/org.polarsys.capella.core.ui.properties.richtext/src/org/polarsys/capella/core/ui/properties/richtext/sections/CapellaDescriptionPropertySection.java\n\treleng/plugins/org.polarsys.capella.targets/full/capella.target-definition.targetplatform\n\nChange-Id: I52ce6d622a30b4645f481ea800801e634da5900b"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNDcyNjE5", "url": "https://github.com/eclipse/capella/pull/304#pullrequestreview-451472619", "createdAt": "2020-07-20T10:09:18Z", "commit": {"oid": "31710d2245795e581a363e46bf38110d1c26fad0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMDowOToxOFrOG0EMKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMDoxMDoyNFrOG0EPEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzI0Nzc4NQ==", "bodyText": "can you reformat this file, there is tab instead of spaces.", "url": "https://github.com/eclipse/capella/pull/304#discussion_r457247785", "createdAt": "2020-07-20T10:09:18Z", "author": {"login": "pdulth"}, "path": "core/plugins/org.polarsys.capella.core.model.handler/src/org/polarsys/capella/core/model/handler/helpers/CapellaAdapterHelper.java", "diffHunk": "@@ -34,191 +34,218 @@\n  */\r\n public class CapellaAdapterHelper {\r\n \r\n-  /**\r\n-   * Returns the semantic element for the given object.\r\n-   * \r\n-   * @see it is similar than resolveSemanticObject(object, false) It shall have be called resolveEObject.\r\n-   * \r\n-   * @param object\r\n-   *          must not be a list\r\n-   */\r\n-  @Deprecated\r\n-  public static EObject resolveSemanticObject(Object object) {\r\n-    return resolveEObject(object);\r\n-  }\r\n-\r\n-  /**\r\n-   * Returns the semantic element for the given object.\r\n-   * \r\n-   * @see it is similar than resolveSemanticObject(object, false)\r\n-   * \r\n-   * @param object\r\n-   *          must not be a list\r\n-   */\r\n-  public static EObject resolveEObject(Object object) {\r\n-    return resolveSemanticObject(object, false);\r\n-  }\r\n-\r\n-  /**\r\n-   * Returns the semantic element for the given object. According to onlySemantic, if the element is a Sirius\r\n-   * representation, it returns the semantic element associated.\r\n-   */\r\n-  public static EObject resolveSemanticObject(Object object, boolean onlySemantic) {\r\n-    if (object instanceof EObject) {\r\n-      return resolveEObject(object, onlySemantic);\r\n-\r\n-    } else if (object instanceof IAdaptable) {\r\n-      EObject adapter = ((IAdaptable) object).getAdapter(EObject.class);\r\n-      if (adapter == null) {\r\n-        return resolveEObject(object, onlySemantic);\r\n-      }\r\n-      return resolveEObject(adapter, onlySemantic);\r\n-    }\r\n-\r\n-    return null;\r\n-  }\r\n-\r\n-  /**\r\n-   * This method returns the list of EObject from the given objects.\r\n-   */\r\n-  public static Collection<EObject> resolveEObjects(Collection<?> objects) {\r\n-    return resolveSemanticObjects(objects, false);\r\n-  }\r\n-\r\n-  /**\r\n-   * This method returns the list of semantic objects from the given objects.\r\n-   */\r\n-  public static Collection<EObject> resolveSemanticsObjects(Collection<?> objects) {\r\n-    return resolveSemanticObjects(objects, true);\r\n-  }\r\n-\r\n-  /**\r\n-   * This method returns the list of EObject from the given objects.\r\n-   */\r\n-  public static Collection<EObject> resolveSemanticObjects(Collection<?> objects, boolean onlySemantic) {\r\n-    return objects.stream() //\r\n-        .map(x -> resolveSemanticObject(x, onlySemantic)) //\r\n-        .filter(Objects::nonNull) //\r\n-        .collect(Collectors.toList());\r\n-  }\r\n-\r\n-  /**\r\n-   * This method\r\n-   */\r\n-  private static EObject resolveEObject(Object object, boolean onlySemantic) {\r\n-    if ((object instanceof DRepresentationDescriptor) || (object instanceof DRepresentation)) {\r\n-      if (onlySemantic) {\r\n-        if (object instanceof DSemanticDecorator) {\r\n-          return ((DSemanticDecorator) object).getTarget();\r\n-        } else if (object instanceof DRepresentationDescriptor) {\r\n-          return ((DRepresentationDescriptor) object).getTarget();\r\n-        }\r\n-      } else {\r\n-        if (object instanceof DRepresentation) {\r\n-          return RepresentationHelper.getRepresentationDescriptor((DRepresentation) object);\r\n-        }\r\n-        return (EObject) object;\r\n-      }\r\n-    }\r\n-    return getBusinessObject(object);\r\n-  }\r\n-\r\n-  /**\r\n-   * Business level adaptation\r\n-   * \r\n-   * @param object\r\n-   */\r\n-  private static EObject getBusinessObject(Object object) {\r\n-    if (object != null) {\r\n-      if (CapellaResourceHelper.isSemanticElement(object)) {\r\n-        return getRelatedSemanticObject((EObject) object);\r\n-      }\r\n-      EObject obj = Adapters.adapt(object, Element.class, true);\r\n-      if (obj != null) {\r\n-        // null can happen when we try to adapt a non semantic element (notes, text, ...)\r\n-        if ((obj instanceof Project || null != obj.eContainer()) && (null != obj.eResource())) {\r\n-          // null can happen when a diagram shows a deleted element\r\n-          return getRelatedSemanticObject(obj);\r\n-        }\r\n-      }\r\n-    }\r\n-    return null;\r\n-  }\r\n-\r\n-  /**\r\n-   * @param object\r\n-   *          object to adapt\r\n-   * @return adapted object\r\n-   */\r\n-  private static EObject getRelatedSemanticObject(EObject object) {\r\n-    if (object.eClass().equals(CsPackage.eINSTANCE.getPart())) {\r\n-      boolean allowMultiplePart = TriStateBoolean.True.equals(CapellaProjectHelper.isReusableComponentsDriven(object));\r\n-      if (!allowMultiplePart) {\r\n-        AbstractType type = ((Part) object).getAbstractType();\r\n-        if ((type != null) && !(type instanceof ConfigurationItem)) {\r\n-          return type;\r\n-        }\r\n-      }\r\n-    }\r\n-    return object;\r\n-  }\r\n-  \r\n-  /**\r\n-   * This method returns the list of EObject from the given objects.\r\n-   */\r\n-  public static Collection<EObject> resolveEObjects(Collection<?> objects, boolean onlySemantic, boolean onlyBusiness) {\r\n-    return objects.stream() //\r\n-        .map(x -> resolveEObject(x, onlySemantic, onlyBusiness)) //\r\n-        .filter(Objects::nonNull) //\r\n-        .collect(Collectors.toList());\r\n-  }\r\n-  \r\n-  /**\r\n-   * Resolve EObject\r\n-   * \r\n-   * @param onlySemantic:\r\n-   *          if false, the element is a graphical element, return the related Sirius object, otherwise, return the\r\n-   *          semantic element behind it\r\n-   * @param onlyBusiness:\r\n-   *          if true, if the returned element is a semantic element, retrieve the user most convenient one behind it.\r\n-   */\r\n-  public static EObject resolveEObject(Object object, boolean onlySemantic, boolean onlyBusiness) {\r\n-    EObject result = null;\r\n-    EObject adapt = null;\r\n-    if (object instanceof DRepresentation) {\r\n-      object = RepresentationHelper.getRepresentationDescriptor((DRepresentation) object);\r\n-    }\r\n-\r\n-    adapt = Adapters.adapt(object, EObject.class, true);\r\n-    if (adapt instanceof EObject) {\r\n-      result = (EObject) adapt;\r\n-    }\r\n-    if (onlySemantic) {\r\n-      if (result instanceof DSemanticDecorator) {\r\n-        result = ((DSemanticDecorator) result).getTarget();\r\n-\r\n-      } else if (result instanceof DRepresentationDescriptor) {\r\n-        result = ((DRepresentationDescriptor) result).getTarget();\r\n-      }\r\n-\r\n-      adapt = Adapters.adapt(result, Element.class, true);\r\n-      if (adapt instanceof Element) {\r\n-        result = (Element) adapt;\r\n-      }\r\n-      if (result instanceof Element) {\r\n-        // null can happen when we try to adapt a non semantic element (notes, text, ...)\r\n-        if (!((object instanceof Project || null != ((EObject) result).eContainer())\r\n-            && (null != ((EObject) result).eResource()))) {\r\n-          // null can happen when a diagram shows a deleted element\r\n-          return null;\r\n-        }\r\n-      }\r\n-    }\r\n-    if (onlyBusiness) {\r\n-      if (result instanceof Element) {\r\n-        result = getBusinessObject((Element) result);\r\n-      }\r\n-    }\r\n-    return result;\r\n-  }\r\n+\t/**\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "31710d2245795e581a363e46bf38110d1c26fad0"}, "originalPosition": 191}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzI0ODUzMA==", "bodyText": "diagram but w/e", "url": "https://github.com/eclipse/capella/pull/304#discussion_r457248530", "createdAt": "2020-07-20T10:10:24Z", "author": {"login": "pdulth"}, "path": "core/plugins/org.polarsys.capella.core.ui.properties.richtext/src/org/polarsys/capella/core/ui/properties/richtext/sections/DescriptionPropertySection.java", "diffHunk": "@@ -77,6 +80,15 @@ public void dispose() {\n     }\n   }\n \n+  @Override\n+  protected EObject adaptElement(EObject object) {\n+    // We want to add description on descriptors, so we don't adapt it to its semantic element", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "31710d2245795e581a363e46bf38110d1c26fad0"}, "originalPosition": 61}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "31710d2245795e581a363e46bf38110d1c26fad0", "author": {"user": {"login": "sandupostaru", "name": "Sandu Postaru"}}, "url": "https://github.com/eclipse/capella/commit/31710d2245795e581a363e46bf38110d1c26fad0", "committedDate": "2020-07-20T08:41:44Z", "message": "[releng] Update TP to Kitalpha 1.3.3.202007161055\n\nChange-Id: I4fee10cec727c4846acd16ed551f757146262669\nSigned-off-by: Sandu Postaru <sandu.postaru@thalesgroup.com>"}, "afterCommit": {"oid": "5ea6e1f714cabd83355d46d31fd49ba883ad1b96", "author": {"user": {"login": "sandupostaru", "name": "Sandu Postaru"}}, "url": "https://github.com/eclipse/capella/commit/5ea6e1f714cabd83355d46d31fd49ba883ad1b96", "committedDate": "2020-07-20T10:18:46Z", "message": "[releng] Update TP to Kitalpha 1.3.3.202007161055\n\nChange-Id: I4fee10cec727c4846acd16ed551f757146262669\nSigned-off-by: Sandu Postaru <sandu.postaru@thalesgroup.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "baea0018788e61d4d1826631dee96505740219de", "author": {"user": {"login": "sandupostaru", "name": "Sandu Postaru"}}, "url": "https://github.com/eclipse/capella/commit/baea0018788e61d4d1826631dee96505740219de", "committedDate": "2020-07-20T11:28:25Z", "message": "[releng] Update TP to Kitalpha 1.3.3.202007161055\n\nChange-Id: I4fee10cec727c4846acd16ed551f757146262669\nSigned-off-by: Sandu Postaru <sandu.postaru@thalesgroup.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5ea6e1f714cabd83355d46d31fd49ba883ad1b96", "author": {"user": {"login": "sandupostaru", "name": "Sandu Postaru"}}, "url": "https://github.com/eclipse/capella/commit/5ea6e1f714cabd83355d46d31fd49ba883ad1b96", "committedDate": "2020-07-20T10:18:46Z", "message": "[releng] Update TP to Kitalpha 1.3.3.202007161055\n\nChange-Id: I4fee10cec727c4846acd16ed551f757146262669\nSigned-off-by: Sandu Postaru <sandu.postaru@thalesgroup.com>"}, "afterCommit": {"oid": "baea0018788e61d4d1826631dee96505740219de", "author": {"user": {"login": "sandupostaru", "name": "Sandu Postaru"}}, "url": "https://github.com/eclipse/capella/commit/baea0018788e61d4d1826631dee96505740219de", "committedDate": "2020-07-20T11:28:25Z", "message": "[releng] Update TP to Kitalpha 1.3.3.202007161055\n\nChange-Id: I4fee10cec727c4846acd16ed551f757146262669\nSigned-off-by: Sandu Postaru <sandu.postaru@thalesgroup.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNTc4OTk4", "url": "https://github.com/eclipse/capella/pull/304#pullrequestreview-451578998", "createdAt": "2020-07-20T12:56:32Z", "commit": {"oid": "baea0018788e61d4d1826631dee96505740219de"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1310, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}