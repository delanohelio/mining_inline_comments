{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3ODk4MDgy", "number": 259, "title": "[558030] Search and Replace", "bodyText": "Bug: 558030\nChange-Id: Ia74e5aa2540621ab5fb5a66a5627b7f31573ae6d\nSigned-off-by: Sandu Postaru sandu.postaru@thalesgroup.com", "createdAt": "2020-06-04T14:59:22Z", "url": "https://github.com/eclipse/capella/pull/259", "merged": true, "mergeCommit": {"oid": "e0cf6d7d783d01f658961f9d2828063eef9c3a47"}, "closed": true, "closedAt": "2020-06-09T07:45:23Z", "author": {"login": "sandupostaru"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcpSZFYAH2gAyNDI3ODk4MDgyOmRmYzA0ZTVkNWNmMWYxZmUxODMwNWU3M2I1MDJiMGVmYmEyZTA0OGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcpSlw5gFqTQyNjM4MzU4MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "dfc04e5d5cf1f1fe18305e73b502b0efba2e048a", "author": {"user": {"login": "sandupostaru", "name": "Sandu Postaru"}}, "url": "https://github.com/eclipse/capella/commit/dfc04e5d5cf1f1fe18305e73b502b0efba2e048a", "committedDate": "2020-06-08T15:42:40Z", "message": "[558030] Fix Search and Replace issues\n\n- Add 'remove selected matches' feature\n- Add 'remove all matches' feature\n\n- Synchronize the Tree and List display mode\n\n- Fix partial replace behavior\n- Fix the incorrect displayed statistics for both Search and Replace\n- Fix the refresh logic\n\nBug: 558030\nChange-Id: I1dac11b7a4aed7fb5935f210e47e23748410dba6\nSigned-off-by: Sandu Postaru <sandu.postaru@thalesgroup.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "14cdf754afe755b5ebd3f87ede5fca9c597e886c", "author": {"user": {"login": "sandupostaru", "name": "Sandu Postaru"}}, "url": "https://github.com/eclipse/capella/commit/14cdf754afe755b5ebd3f87ede5fca9c597e886c", "committedDate": "2020-06-08T12:08:23Z", "message": "[558030] Search and Replace\n\n- Organize internal package structure (it's a mess)\n\nChange-Id: Id350a5d30559082677eff1f136109aa5569245b0\nSigned-off-by: Sandu Postaru <sandu.postaru@thalesgroup.com>"}, "afterCommit": {"oid": "dfc04e5d5cf1f1fe18305e73b502b0efba2e048a", "author": {"user": {"login": "sandupostaru", "name": "Sandu Postaru"}}, "url": "https://github.com/eclipse/capella/commit/dfc04e5d5cf1f1fe18305e73b502b0efba2e048a", "committedDate": "2020-06-08T15:42:40Z", "message": "[558030] Fix Search and Replace issues\n\n- Add 'remove selected matches' feature\n- Add 'remove all matches' feature\n\n- Synchronize the Tree and List display mode\n\n- Fix partial replace behavior\n- Fix the incorrect displayed statistics for both Search and Replace\n- Fix the refresh logic\n\nBug: 558030\nChange-Id: I1dac11b7a4aed7fb5935f210e47e23748410dba6\nSigned-off-by: Sandu Postaru <sandu.postaru@thalesgroup.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2MzczNzk1", "url": "https://github.com/eclipse/capella/pull/259#pullrequestreview-426373795", "createdAt": "2020-06-08T15:46:06Z", "commit": {"oid": "dfc04e5d5cf1f1fe18305e73b502b0efba2e048a"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxNTo0NjowNlrOGgkpSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxNTo0OTowOFrOGgkxyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjgwODAwOQ==", "bodyText": "The SearchResultPage delegates the behavior to the appropriate ContentProvider (List or Tree).", "url": "https://github.com/eclipse/capella/pull/259#discussion_r436808009", "createdAt": "2020-06-08T15:46:06Z", "author": {"login": "sandupostaru"}, "path": "core/plugins/org.polarsys.capella.core.ui.search/src/org/polarsys/capella/core/ui/search/result/CapellaSearchResultPage.java", "diffHunk": "@@ -28,13 +33,13 @@ public CapellaSearchResultPage() {\n   }\r\n \r\n   @Override\r\n-  protected void elementsChanged(Object[] objects) {\r\n-    getViewer().refresh();\r\n+  protected void elementsChanged(Object[] elements) {\r\n+    getViewerContentProvider().elementsChanged(elements);\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dfc04e5d5cf1f1fe18305e73b502b0efba2e048a"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjgwODEwOQ==", "bodyText": "The SearchResultPage delegates the behavior to the appropriate ContentProvider (List or Tree).", "url": "https://github.com/eclipse/capella/pull/259#discussion_r436808109", "createdAt": "2020-06-08T15:46:14Z", "author": {"login": "sandupostaru"}, "path": "core/plugins/org.polarsys.capella.core.ui.search/src/org/polarsys/capella/core/ui/search/result/CapellaSearchResultPage.java", "diffHunk": "@@ -28,13 +33,13 @@ public CapellaSearchResultPage() {\n   }\r\n \r\n   @Override\r\n-  protected void elementsChanged(Object[] objects) {\r\n-    getViewer().refresh();\r\n+  protected void elementsChanged(Object[] elements) {\r\n+    getViewerContentProvider().elementsChanged(elements);\r\n   }\r\n \r\n   @Override\r\n   protected void clear() {\r\n-    getViewer().refresh();\r\n+    getViewerContentProvider().clear();\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dfc04e5d5cf1f1fe18305e73b502b0efba2e048a"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjgxMDE4NQ==", "bodyText": "This method is made public (protected in the mother class), to facilitate the coupling between CapellaSearchPage and each of its 2 ContentProviders.", "url": "https://github.com/eclipse/capella/pull/259#discussion_r436810185", "createdAt": "2020-06-08T15:49:08Z", "author": {"login": "sandupostaru"}, "path": "core/plugins/org.polarsys.capella.core.ui.search/src/org/polarsys/capella/core/ui/search/result/CapellaSearchResultPage.java", "diffHunk": "@@ -63,4 +68,17 @@ public void setSelection(ISelection selection) {\n   public ISelection getSelection() {\r\n     return getViewer().getSelection();\r\n   }\r\n+\r\n+  protected SearchResultContentProvider getViewerContentProvider() {\r\n+    return (SearchResultContentProvider) getViewer().getContentProvider();\r\n+  }\r\n+\r\n+  /**\r\n+   * Make the viewer public.\r\n+   */\r\n+  @Override\r\n+  public StructuredViewer getViewer() {\r\n+    return super.getViewer();\r\n+  }\r\n+\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dfc04e5d5cf1f1fe18305e73b502b0efba2e048a"}, "originalPosition": 63}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2MzgzNTgx", "url": "https://github.com/eclipse/capella/pull/259#pullrequestreview-426383581", "createdAt": "2020-06-08T15:56:31Z", "commit": {"oid": "dfc04e5d5cf1f1fe18305e73b502b0efba2e048a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1381, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}