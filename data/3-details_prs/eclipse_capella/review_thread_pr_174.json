{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0NjYwNTQ1", "number": 174, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNDo0MTo0M1rODsGEJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNDo1OTo1MFrODsGkow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3NTYzMzAxOnYy", "diffSide": "RIGHT", "path": "core/plugins/org.polarsys.capella.core.sirius.ui/src/org/polarsys/capella/core/sirius/ui/commandline/RefreshAirdCommandLine.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNDo0MTo0M1rOF80MuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNDo0MTo0M1rOF80MuQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTMxNDEwNQ==", "bodyText": "Wildcard new ArrayList<Job>()  -> new ArrayList<>()", "url": "https://github.com/eclipse/capella/pull/174#discussion_r399314105", "createdAt": "2020-03-27T14:41:43Z", "author": {"login": "sandupostaru"}, "path": "core/plugins/org.polarsys.capella.core.sirius.ui/src/org/polarsys/capella/core/sirius/ui/commandline/RefreshAirdCommandLine.java", "diffHunk": "@@ -33,29 +34,38 @@\n   public RefreshAirdCommandLine() {\r\n     super(true);\r\n   }\r\n-  \r\n+\r\n   protected IStatus executeWithinWorkbench() {\r\n     List<IFile> airdFiles = getAirdFilesFromInput();\r\n-    for (IFile file : airdFiles) {\r\n-      Job job = new RefreshDiagramJob(file);\r\n-      job.addJobChangeListener(new JobChangeAdapter() {\r\n-\r\n+    List<Job> listJob = new ArrayList<Job>();\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9472f33fbc42b42fb9eec27ae9a1d5a24c8ba1c"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3NTY4MTIwOnYy", "diffSide": "RIGHT", "path": "core/plugins/org.polarsys.capella.core.sirius.ui/src/org/polarsys/capella/core/sirius/ui/commandline/RefreshAirdCommandLine.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNDo1MjoxMlrOF80rNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNDo1MjoxMlrOF80rNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTMyMTkxMQ==", "bodyText": "jobs", "url": "https://github.com/eclipse/capella/pull/174#discussion_r399321911", "createdAt": "2020-03-27T14:52:12Z", "author": {"login": "sandupostaru"}, "path": "core/plugins/org.polarsys.capella.core.sirius.ui/src/org/polarsys/capella/core/sirius/ui/commandline/RefreshAirdCommandLine.java", "diffHunk": "@@ -33,29 +34,38 @@\n   public RefreshAirdCommandLine() {\r\n     super(true);\r\n   }\r\n-  \r\n+\r\n   protected IStatus executeWithinWorkbench() {\r\n     List<IFile> airdFiles = getAirdFilesFromInput();\r\n-    for (IFile file : airdFiles) {\r\n-      Job job = new RefreshDiagramJob(file);\r\n-      job.addJobChangeListener(new JobChangeAdapter() {\r\n-\r\n+    List<Job> listJob = new ArrayList<Job>();\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9472f33fbc42b42fb9eec27ae9a1d5a24c8ba1c"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3NTY4NzU4OnYy", "diffSide": "RIGHT", "path": "core/plugins/org.polarsys.capella.core.sirius.ui/src/org/polarsys/capella/core/sirius/ui/commandline/RefreshAirdCommandLine.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNDo1Mzo0MVrOF80vPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNDo1Mzo0MVrOF80vPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTMyMjk0MA==", "bodyText": "Can you do an optimized for loop?\nfor (IFile file: airdFiles) ...", "url": "https://github.com/eclipse/capella/pull/174#discussion_r399322940", "createdAt": "2020-03-27T14:53:41Z", "author": {"login": "sandupostaru"}, "path": "core/plugins/org.polarsys.capella.core.sirius.ui/src/org/polarsys/capella/core/sirius/ui/commandline/RefreshAirdCommandLine.java", "diffHunk": "@@ -33,29 +34,38 @@\n   public RefreshAirdCommandLine() {\r\n     super(true);\r\n   }\r\n-  \r\n+\r\n   protected IStatus executeWithinWorkbench() {\r\n     List<IFile> airdFiles = getAirdFilesFromInput();\r\n-    for (IFile file : airdFiles) {\r\n-      Job job = new RefreshDiagramJob(file);\r\n-      job.addJobChangeListener(new JobChangeAdapter() {\r\n-\r\n+    List<Job> listJob = new ArrayList<Job>();\r\n+    for (int i = 0; i < airdFiles.size(); i++) {\r\n+      listJob.add(new RefreshDiagramJob(airdFiles.get(i)));\r\n+    }\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9472f33fbc42b42fb9eec27ae9a1d5a24c8ba1c"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3NTY5OTEwOnYy", "diffSide": "RIGHT", "path": "core/plugins/org.polarsys.capella.core.sirius.ui/src/org/polarsys/capella/core/sirius/ui/commandline/RefreshAirdCommandLine.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNDo1NjowMlrOF802aQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNDo1NjowMlrOF802aQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTMyNDc3Nw==", "bodyText": "Job job = listJob.get(i)", "url": "https://github.com/eclipse/capella/pull/174#discussion_r399324777", "createdAt": "2020-03-27T14:56:02Z", "author": {"login": "sandupostaru"}, "path": "core/plugins/org.polarsys.capella.core.sirius.ui/src/org/polarsys/capella/core/sirius/ui/commandline/RefreshAirdCommandLine.java", "diffHunk": "@@ -33,29 +34,38 @@\n   public RefreshAirdCommandLine() {\r\n     super(true);\r\n   }\r\n-  \r\n+\r\n   protected IStatus executeWithinWorkbench() {\r\n     List<IFile> airdFiles = getAirdFilesFromInput();\r\n-    for (IFile file : airdFiles) {\r\n-      Job job = new RefreshDiagramJob(file);\r\n-      job.addJobChangeListener(new JobChangeAdapter() {\r\n-\r\n+    List<Job> listJob = new ArrayList<Job>();\r\n+    for (int i = 0; i < airdFiles.size(); i++) {\r\n+      listJob.add(new RefreshDiagramJob(airdFiles.get(i)));\r\n+    }\r\n+    for (int i = 0; i < listJob.size(); i++) {\r\n+      int index = i;\r\n+      listJob.get(i).addJobChangeListener(new JobChangeAdapter() {\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9472f33fbc42b42fb9eec27ae9a1d5a24c8ba1c"}, "originalPosition": 26}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3NTcwMDY1OnYy", "diffSide": "RIGHT", "path": "core/plugins/org.polarsys.capella.core.sirius.ui/src/org/polarsys/capella/core/sirius/ui/commandline/RefreshAirdCommandLine.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNDo1NjoyNlrOF803cg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNDo1NjoyNlrOF803cg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTMyNTA0Mg==", "bodyText": "Do we need this variable", "url": "https://github.com/eclipse/capella/pull/174#discussion_r399325042", "createdAt": "2020-03-27T14:56:26Z", "author": {"login": "sandupostaru"}, "path": "core/plugins/org.polarsys.capella.core.sirius.ui/src/org/polarsys/capella/core/sirius/ui/commandline/RefreshAirdCommandLine.java", "diffHunk": "@@ -33,29 +34,38 @@\n   public RefreshAirdCommandLine() {\r\n     super(true);\r\n   }\r\n-  \r\n+\r\n   protected IStatus executeWithinWorkbench() {\r\n     List<IFile> airdFiles = getAirdFilesFromInput();\r\n-    for (IFile file : airdFiles) {\r\n-      Job job = new RefreshDiagramJob(file);\r\n-      job.addJobChangeListener(new JobChangeAdapter() {\r\n-\r\n+    List<Job> listJob = new ArrayList<Job>();\r\n+    for (int i = 0; i < airdFiles.size(); i++) {\r\n+      listJob.add(new RefreshDiagramJob(airdFiles.get(i)));\r\n+    }\r\n+    for (int i = 0; i < listJob.size(); i++) {\r\n+      int index = i;\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9472f33fbc42b42fb9eec27ae9a1d5a24c8ba1c"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3NTcwOTQ1OnYy", "diffSide": "RIGHT", "path": "core/plugins/org.polarsys.capella.core.sirius.ui/src/org/polarsys/capella/core/sirius/ui/commandline/RefreshAirdCommandLine.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNDo1ODoyMlrOF809AQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNDo1ODoyMlrOF809AQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTMyNjQ2NQ==", "bodyText": "airdFiles.get(index)) add a getter in RefreshDiagramJob that gives the file.\nThen obtain the job from the event, and the file from the job.", "url": "https://github.com/eclipse/capella/pull/174#discussion_r399326465", "createdAt": "2020-03-27T14:58:22Z", "author": {"login": "sandupostaru"}, "path": "core/plugins/org.polarsys.capella.core.sirius.ui/src/org/polarsys/capella/core/sirius/ui/commandline/RefreshAirdCommandLine.java", "diffHunk": "@@ -33,29 +34,38 @@\n   public RefreshAirdCommandLine() {\r\n     super(true);\r\n   }\r\n-  \r\n+\r\n   protected IStatus executeWithinWorkbench() {\r\n     List<IFile> airdFiles = getAirdFilesFromInput();\r\n-    for (IFile file : airdFiles) {\r\n-      Job job = new RefreshDiagramJob(file);\r\n-      job.addJobChangeListener(new JobChangeAdapter() {\r\n-\r\n+    List<Job> listJob = new ArrayList<Job>();\r\n+    for (int i = 0; i < airdFiles.size(); i++) {\r\n+      listJob.add(new RefreshDiagramJob(airdFiles.get(i)));\r\n+    }\r\n+    for (int i = 0; i < listJob.size(); i++) {\r\n+      int index = i;\r\n+      listJob.get(i).addJobChangeListener(new JobChangeAdapter() {\r\n         @Override\r\n         public void done(IJobChangeEvent event) {\r\n-          URI selectedUri = EcoreUtil2.getURI(file);\r\n+          URI selectedUri = EcoreUtil2.getURI(airdFiles.get(index));\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9472f33fbc42b42fb9eec27ae9a1d5a24c8ba1c"}, "originalPosition": 30}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3NTcxMjk4OnYy", "diffSide": "RIGHT", "path": "core/plugins/org.polarsys.capella.core.sirius.ui/src/org/polarsys/capella/core/sirius/ui/commandline/RefreshAirdCommandLine.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNDo1OTowNlrOF80_IQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNDo1OTowNlrOF80_IQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTMyNzAwOQ==", "bodyText": "Job nextJob = listJob.get(index + 1)", "url": "https://github.com/eclipse/capella/pull/174#discussion_r399327009", "createdAt": "2020-03-27T14:59:06Z", "author": {"login": "sandupostaru"}, "path": "core/plugins/org.polarsys.capella.core.sirius.ui/src/org/polarsys/capella/core/sirius/ui/commandline/RefreshAirdCommandLine.java", "diffHunk": "@@ -33,29 +34,38 @@\n   public RefreshAirdCommandLine() {\r\n     super(true);\r\n   }\r\n-  \r\n+\r\n   protected IStatus executeWithinWorkbench() {\r\n     List<IFile> airdFiles = getAirdFilesFromInput();\r\n-    for (IFile file : airdFiles) {\r\n-      Job job = new RefreshDiagramJob(file);\r\n-      job.addJobChangeListener(new JobChangeAdapter() {\r\n-\r\n+    List<Job> listJob = new ArrayList<Job>();\r\n+    for (int i = 0; i < airdFiles.size(); i++) {\r\n+      listJob.add(new RefreshDiagramJob(airdFiles.get(i)));\r\n+    }\r\n+    for (int i = 0; i < listJob.size(); i++) {\r\n+      int index = i;\r\n+      listJob.get(i).addJobChangeListener(new JobChangeAdapter() {\r\n         @Override\r\n         public void done(IJobChangeEvent event) {\r\n-          URI selectedUri = EcoreUtil2.getURI(file);\r\n+          URI selectedUri = EcoreUtil2.getURI(airdFiles.get(index));\r\n           Session session = SessionManager.INSTANCE.getSession(selectedUri, new NullProgressMonitor());\r\n           session.save(new NullProgressMonitor());\r\n           try {\r\n             session.close(new NullProgressMonitor());\r\n           } catch (Exception e) {\r\n             e.printStackTrace();\r\n           }\r\n-          if (PlatformUI.getTestableObject() == null || PlatformUI.getTestableObject().getTestHarness() == null) {\r\n-            new CloseWorkbenchJob().schedule();\r\n+          if (index < listJob.size() - 1) {\r\n+            listJob.get(index + 1).schedule();\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9472f33fbc42b42fb9eec27ae9a1d5a24c8ba1c"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3NTcxNjE5OnYy", "diffSide": "RIGHT", "path": "core/plugins/org.polarsys.capella.core.sirius.ui/src/org/polarsys/capella/core/sirius/ui/commandline/RefreshAirdCommandLine.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNDo1OTo1MFrOF81BTg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNDo1OTo1MFrOF81BTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTMyNzU2Ng==", "bodyText": "Job firstJob = listJob.get(0)", "url": "https://github.com/eclipse/capella/pull/174#discussion_r399327566", "createdAt": "2020-03-27T14:59:50Z", "author": {"login": "sandupostaru"}, "path": "core/plugins/org.polarsys.capella.core.sirius.ui/src/org/polarsys/capella/core/sirius/ui/commandline/RefreshAirdCommandLine.java", "diffHunk": "@@ -33,29 +34,38 @@\n   public RefreshAirdCommandLine() {\r\n     super(true);\r\n   }\r\n-  \r\n+\r\n   protected IStatus executeWithinWorkbench() {\r\n     List<IFile> airdFiles = getAirdFilesFromInput();\r\n-    for (IFile file : airdFiles) {\r\n-      Job job = new RefreshDiagramJob(file);\r\n-      job.addJobChangeListener(new JobChangeAdapter() {\r\n-\r\n+    List<Job> listJob = new ArrayList<Job>();\r\n+    for (int i = 0; i < airdFiles.size(); i++) {\r\n+      listJob.add(new RefreshDiagramJob(airdFiles.get(i)));\r\n+    }\r\n+    for (int i = 0; i < listJob.size(); i++) {\r\n+      int index = i;\r\n+      listJob.get(i).addJobChangeListener(new JobChangeAdapter() {\r\n         @Override\r\n         public void done(IJobChangeEvent event) {\r\n-          URI selectedUri = EcoreUtil2.getURI(file);\r\n+          URI selectedUri = EcoreUtil2.getURI(airdFiles.get(index));\r\n           Session session = SessionManager.INSTANCE.getSession(selectedUri, new NullProgressMonitor());\r\n           session.save(new NullProgressMonitor());\r\n           try {\r\n             session.close(new NullProgressMonitor());\r\n           } catch (Exception e) {\r\n             e.printStackTrace();\r\n           }\r\n-          if (PlatformUI.getTestableObject() == null || PlatformUI.getTestableObject().getTestHarness() == null) {\r\n-            new CloseWorkbenchJob().schedule();\r\n+          if (index < listJob.size() - 1) {\r\n+            listJob.get(index + 1).schedule();\r\n+          } else {\r\n+            if (PlatformUI.getTestableObject() == null || PlatformUI.getTestableObject().getTestHarness() == null) {\r\n+              new CloseWorkbenchJob().schedule();\r\n+            }\r\n           }\r\n         }\r\n       });\r\n-      job.schedule();\r\n+    }\r\n+    if (!listJob.isEmpty()) {\r\n+      listJob.get(0).schedule();\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a9472f33fbc42b42fb9eec27ae9a1d5a24c8ba1c"}, "originalPosition": 52}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4338, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}