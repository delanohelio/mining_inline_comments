{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2ODAzOTE3", "number": 133, "title": "[560934] Always display the confirmation dialog even for protected elements", "bodyText": "Bug: 560934\nChange-Id: Ie634abb3566a456e54c71531905316d8fb9e4e69\nSigned-off-by: Jeremy Aubry jaubry@obeo.fr", "createdAt": "2020-03-11T16:46:21Z", "url": "https://github.com/eclipse/capella/pull/133", "merged": true, "mergeCommit": {"oid": "26ad84cd546c2ce5e474f9cc29b2fad9298e38e6"}, "closed": true, "closedAt": "2020-03-20T15:07:58Z", "author": {"login": "jaubry-obeo"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcM21CtgFqTM3MzMzMzY0Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPcPd9gFqTM3ODI5NzczMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczMzMzNjQy", "url": "https://github.com/eclipse/capella/pull/133#pullrequestreview-373333642", "createdAt": "2020-03-12T07:45:02Z", "commit": {"oid": "4935461a5255f487aa94e14a8634a791b16d66d3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwNzo0NTowMlrOF1T_PA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQwNzo0NTo0OVrOF1UAfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQ0NjMzMg==", "bodyText": "can you use plugin id instead of sss", "url": "https://github.com/eclipse/capella/pull/133#discussion_r391446332", "createdAt": "2020-03-12T07:45:02Z", "author": {"login": "pdulth"}, "path": "core/plugins/org.polarsys.capella.core.platform.sirius.ui.actions/src/org/polarsys/capella/core/platform/sirius/ui/commands/CapellaDeleteCommand.java", "diffHunk": "@@ -108,15 +111,23 @@ public void run() {\n   }\n \n   protected boolean confirmDeletion() {\n-    final int dialogResult[] = new int[] { 0 };\n+    Set<?> elementsToDelete = getAllElementsToDelete();\n+    ConfirmDeleteCapellaElementDialog confirmDeletionDialog = new ConfirmDeleteCapellaElementDialog(\n+        new ArrayList<Object>(elementsToDelete), true, getExpandedSelection().toArray()) {\n+          @Override\n+          protected IStatus getStatus() {\n+            if (CapellaDeleteAction.canDelete(elementsToDelete)) {\n+              return Status.OK_STATUS;\n+            }\n+            return new Status(Status.ERROR, \"ss\", \"At least one model element is protected to avoid its deletion.\\nPlease have a look to Preferences > Capella > Delete.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4935461a5255f487aa94e14a8634a791b16d66d3"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQ0NjY1Mg==", "bodyText": "does this override is useful?", "url": "https://github.com/eclipse/capella/pull/133#discussion_r391446652", "createdAt": "2020-03-12T07:45:49Z", "author": {"login": "pdulth"}, "path": "core/plugins/org.polarsys.capella.core.ui.toolkit/src/org/polarsys/capella/core/ui/toolkit/dialogs/ImpactAnalysisDialog.java", "diffHunk": "@@ -312,23 +317,34 @@ protected Object filterComputedParent(Object parent__p, Object element_p) {\n       }\n \t\treturn input;\n \t}\n-  \n \n-  /**\n-   * @see org.polarsys.capella.common.ui.toolkit.dialogs.AbstractMessageDialogWithViewer#getInitialInputData()\n-   */\n   @Override\n-  protected TreeData getInitialInputData() {\n-    return new TreeData(_referencingElements, null);\n+  protected void doCreateDialogArea(Composite dialogAreaComposite) {\n+    Composite containingComposite = new Composite(dialogAreaComposite, SWT.NONE);\n+    GridLayout layout = new GridLayout(1, true);\n+    containingComposite.setLayout(layout);\n+    containingComposite.setLayoutData(new GridData(GridData.FILL_BOTH));\n+    // Create the viewer area.\n+    createViewerArea(containingComposite);\n+  }\n+\n+  protected void createViewerArea(Composite parent) {\n+    // Create the viewer.\n+    _viewer = createViewer(parent);\n+    // Set Input data.\n+    _viewer.setInput(getInitialInputData());\n+  }\n+\n+  @Override\n+  protected Object getResult() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4935461a5255f487aa94e14a8634a791b16d66d3"}, "originalPosition": 83}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "115dc58773ec1145b550104e481b90517c851fbb", "author": {"user": {"login": "jaubry-obeo", "name": null}}, "url": "https://github.com/eclipse/capella/commit/115dc58773ec1145b550104e481b90517c851fbb", "committedDate": "2020-03-13T09:10:12Z", "message": "[560934] Deleting model element in Capability Realization Blank does\nopen \"Delete\" dialog window\n\nBug: 560934\nChange-Id: If1ef16e584a263d9bd48d309963541949aeeaa93\nSigned-off-by: Jeremy Aubry <jaubry@obeo.fr>"}, "afterCommit": {"oid": "78519d067579fee51d371c5f86c3d2ed9ca95e66", "author": {"user": {"login": "jaubry-obeo", "name": null}}, "url": "https://github.com/eclipse/capella/commit/78519d067579fee51d371c5f86c3d2ed9ca95e66", "committedDate": "2020-03-13T14:37:04Z", "message": "[560934] Deleting model element in Capability Realization Blank does\nopen \"Delete\" dialog window\n\nBug: 560934\nChange-Id: Ie634abb3566a456e54c71531905316d8fb9e4e69\nSigned-off-by: Jeremy Aubry <jaubry@obeo.fr>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc1Nzg3MDk5", "url": "https://github.com/eclipse/capella/pull/133#pullrequestreview-375787099", "createdAt": "2020-03-17T07:18:59Z", "commit": {"oid": "78519d067579fee51d371c5f86c3d2ed9ca95e66"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20118c1a9dab711f4da3ba30e4b733c5b32bf726", "author": {"user": {"login": "jaubry-obeo", "name": null}}, "url": "https://github.com/eclipse/capella/commit/20118c1a9dab711f4da3ba30e4b733c5b32bf726", "committedDate": "2020-03-17T14:06:01Z", "message": "[560934] Always display the confirmation dialog even for protected\nelements\n\n- A decorator has been added on protected elements\n\nBug: 560934\nChange-Id: Ie634abb3566a456e54c71531905316d8fb9e4e69\nSigned-off-by: Jeremy Aubry <jaubry@obeo.fr>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47a01fc62da67a427c818e3cdd19486f937df09f", "author": {"user": {"login": "pdulth", "name": "Philippe DUL"}}, "url": "https://github.com/eclipse/capella/commit/47a01fc62da67a427c818e3cdd19486f937df09f", "committedDate": "2020-03-17T14:06:13Z", "message": "[560934] Improve protected elements deletion\n\n- Error message weren't logged\n- Dialog doesn't had default height\n- Command name wasn't 'Delete' in undo, but 'Confirmation Deletion'.\n\nChange-Id: Ife46fa58e7795b1d1366a645622e468937917cdc\nSigned-off-by: Philippe DUL <philippe.dul@thalesgroup.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a3a021131e3e8067c1439d01fdd0af6ead1fff0f", "author": {"user": {"login": "pdulth", "name": "Philippe DUL"}}, "url": "https://github.com/eclipse/capella/commit/a3a021131e3e8067c1439d01fdd0af6ead1fff0f", "committedDate": "2020-03-17T14:03:16Z", "message": "[560934] Improve protected elements deletion\n\n- Error message weren't logged\n- Dialog doesn't had default height\n- Command name wasn't 'Delete' in undo, but 'Confirmation Deletion'.\n\nChange-Id: Ife46fa58e7795b1d1366a645622e468937917cdc\nSigned-off-by: Philippe DUL <philippe.dul@thalesgroup.com>"}, "afterCommit": {"oid": "47a01fc62da67a427c818e3cdd19486f937df09f", "author": {"user": {"login": "pdulth", "name": "Philippe DUL"}}, "url": "https://github.com/eclipse/capella/commit/47a01fc62da67a427c818e3cdd19486f937df09f", "committedDate": "2020-03-17T14:06:13Z", "message": "[560934] Improve protected elements deletion\n\n- Error message weren't logged\n- Dialog doesn't had default height\n- Command name wasn't 'Delete' in undo, but 'Confirmation Deletion'.\n\nChange-Id: Ife46fa58e7795b1d1366a645622e468937917cdc\nSigned-off-by: Philippe DUL <philippe.dul@thalesgroup.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "13bed67436bf29924bf1f92f3f87d8a7743c4982", "author": {"user": {"login": "pdulth", "name": "Philippe DUL"}}, "url": "https://github.com/eclipse/capella/commit/13bed67436bf29924bf1f92f3f87d8a7743c4982", "committedDate": "2020-03-19T16:04:26Z", "message": "[560934] Fix scenario deletion issue and improve decoration\n\n- It was not possible to delete Scenario anymore, as Sequence Message\nwere protected. This is no longer the case\n- The lock decorator is now available in 'Preferences > General >\nAppearance > Label and Decorators' and can be enabled in Project\nExplorer\n- Updated documentation\n\nChange-Id: I13c4718d107617d5003634f51519afd38e1e5d26\nSigned-off-by: Philippe DUL <philippe.dul@thalesgroup.com>"}, "afterCommit": {"oid": "79df0034a68e2717e0f553dfbbae2bf595c198e2", "author": {"user": {"login": "pdulth", "name": "Philippe DUL"}}, "url": "https://github.com/eclipse/capella/commit/79df0034a68e2717e0f553dfbbae2bf595c198e2", "committedDate": "2020-03-19T16:06:02Z", "message": "[560934] Fix scenario deletion issue and improve decoration\n\n- It was not possible to delete Scenario anymore, as Sequence Message\nwere protected. This is no longer the case\n- The lock decorator is now available in 'Preferences > General >\nAppearance > Label and Decorators' and can be enabled in Project\nExplorer\n- Updated documentation\n\nChange-Id: I13c4718d107617d5003634f51519afd38e1e5d26\nSigned-off-by: Philippe DUL <philippe.dul@thalesgroup.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "79df0034a68e2717e0f553dfbbae2bf595c198e2", "author": {"user": {"login": "pdulth", "name": "Philippe DUL"}}, "url": "https://github.com/eclipse/capella/commit/79df0034a68e2717e0f553dfbbae2bf595c198e2", "committedDate": "2020-03-19T16:06:02Z", "message": "[560934] Fix scenario deletion issue and improve decoration\n\n- It was not possible to delete Scenario anymore, as Sequence Message\nwere protected. This is no longer the case\n- The lock decorator is now available in 'Preferences > General >\nAppearance > Label and Decorators' and can be enabled in Project\nExplorer\n- Updated documentation\n\nChange-Id: I13c4718d107617d5003634f51519afd38e1e5d26\nSigned-off-by: Philippe DUL <philippe.dul@thalesgroup.com>"}, "afterCommit": {"oid": "f3f89f0b65b11e64a86837a88a8e755c2a933093", "author": {"user": {"login": "pdulth", "name": "Philippe DUL"}}, "url": "https://github.com/eclipse/capella/commit/f3f89f0b65b11e64a86837a88a8e755c2a933093", "committedDate": "2020-03-19T16:07:58Z", "message": "[560934] Fix scenario deletion issue and improve decoration\n\n- It was not possible to delete Scenario anymore, as Sequence Message\nwere protected. This is no longer the case\n- The lock decorator is now available in 'Preferences > General >\nAppearance > Label and Decorators' and can be enabled in Project\nExplorer\n- Updated documentation\n\nChange-Id: I13c4718d107617d5003634f51519afd38e1e5d26\nSigned-off-by: Philippe DUL <philippe.dul@thalesgroup.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3ODk2MzU0", "url": "https://github.com/eclipse/capella/pull/133#pullrequestreview-377896354", "createdAt": "2020-03-19T16:37:14Z", "commit": {"oid": "f3f89f0b65b11e64a86837a88a8e755c2a933093"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ecf832664701626c532b44b15809f7dfa7488bc8", "author": {"user": {"login": "pdulth", "name": "Philippe DUL"}}, "url": "https://github.com/eclipse/capella/commit/ecf832664701626c532b44b15809f7dfa7488bc8", "committedDate": "2020-03-20T08:27:38Z", "message": "[560934] Fix scenario deletion issue and improve decoration\n\n- It was not possible to delete Scenario anymore, as Sequence Message\nwere protected. Sequence Message can be deleted since\n001d11f4cb7a93c2988ef873604d3acc8c6d9ddc\n- The lock decorator is now available in 'Preferences > General >\nAppearance > Label and Decorators' and can be enabled in Project\nExplorer\n- Updated documentation\n\nChange-Id: I13c4718d107617d5003634f51519afd38e1e5d26\nSigned-off-by: Philippe DUL <philippe.dul@thalesgroup.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f3f89f0b65b11e64a86837a88a8e755c2a933093", "author": {"user": {"login": "pdulth", "name": "Philippe DUL"}}, "url": "https://github.com/eclipse/capella/commit/f3f89f0b65b11e64a86837a88a8e755c2a933093", "committedDate": "2020-03-19T16:07:58Z", "message": "[560934] Fix scenario deletion issue and improve decoration\n\n- It was not possible to delete Scenario anymore, as Sequence Message\nwere protected. This is no longer the case\n- The lock decorator is now available in 'Preferences > General >\nAppearance > Label and Decorators' and can be enabled in Project\nExplorer\n- Updated documentation\n\nChange-Id: I13c4718d107617d5003634f51519afd38e1e5d26\nSigned-off-by: Philippe DUL <philippe.dul@thalesgroup.com>"}, "afterCommit": {"oid": "ecf832664701626c532b44b15809f7dfa7488bc8", "author": {"user": {"login": "pdulth", "name": "Philippe DUL"}}, "url": "https://github.com/eclipse/capella/commit/ecf832664701626c532b44b15809f7dfa7488bc8", "committedDate": "2020-03-20T08:27:38Z", "message": "[560934] Fix scenario deletion issue and improve decoration\n\n- It was not possible to delete Scenario anymore, as Sequence Message\nwere protected. Sequence Message can be deleted since\n001d11f4cb7a93c2988ef873604d3acc8c6d9ddc\n- The lock decorator is now available in 'Preferences > General >\nAppearance > Label and Decorators' and can be enabled in Project\nExplorer\n- Updated documentation\n\nChange-Id: I13c4718d107617d5003634f51519afd38e1e5d26\nSigned-off-by: Philippe DUL <philippe.dul@thalesgroup.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4Mjk3NzMz", "url": "https://github.com/eclipse/capella/pull/133#pullrequestreview-378297733", "createdAt": "2020-03-20T08:29:11Z", "commit": {"oid": "ecf832664701626c532b44b15809f7dfa7488bc8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1420, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}