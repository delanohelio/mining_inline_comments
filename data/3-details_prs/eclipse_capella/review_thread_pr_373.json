{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkxNTg3MzI1", "number": 373, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwODo0NzozNlrOEqoPkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxNDo0MjoyN1rOEsqWkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzMTM0OTk0OnYy", "diffSide": "RIGHT", "path": "core/plugins/org.polarsys.capella.core.platform.sirius.ui.actions/src/org/polarsys/capella/core/platform/sirius/ui/commands/CapellaDeleteCommand.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwODo0NzozNlrOHc8PYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwODo0NzozNlrOHc8PYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDEwOTE1Mw==", "bodyText": "can you rename to \"prechecks\" or something like that", "url": "https://github.com/eclipse/capella/pull/373#discussion_r500109153", "createdAt": "2020-10-06T08:47:36Z", "author": {"login": "pdulth"}, "path": "core/plugins/org.polarsys.capella.core.platform.sirius.ui.actions/src/org/polarsys/capella/core/platform/sirius/ui/commands/CapellaDeleteCommand.java", "diffHunk": "@@ -145,11 +151,38 @@ protected IStatus preDeleteChecks() {\n       if (!CapellaDeleteAction.canDelete(elementsToDelete)) {\n         protectedElements = new Status(Status.ERROR, CapellaActionsActivator.PLUGIN_ID,\n             Messages.CapellaDeleteCommand_ProtectedElementsError);\n+      } else {\n+        long nbRepresentations = elementsToDelete.stream().filter(DRepresentationDescriptor.class::isInstance).count();\n+        long nbSemanticElements = elementsToDelete.size() - nbRepresentations;\n+        int status = Status.INFO;\n+        String messageNbSemanticElement = \"\";\n+        String messageNbRepresentation = \"\";\n+\n+        if (nbSemanticElements == 1) {\n+          messageNbSemanticElement = Messages.CapellaDeleteCommand_ConfirmDeletionWithOneSemanticElement;\n+        } else {\n+          messageNbSemanticElement = MessageFormat\n+              .format(Messages.CapellaDeleteCommand_ConfirmDeletionWithManySemanticElement, nbSemanticElements);\n+        }\n+        if (nbRepresentations > 0) {\n+          if (nbRepresentations == 1) {\n+            messageNbRepresentation = Messages.CapellaDeleteCommand_ConfirmDeletionWithOneRepresentation;\n+          } else {\n+            messageNbRepresentation = MessageFormat\n+                .format(Messages.CapellaDeleteCommand_ConfirmDeletionWithManyRepresentations, nbRepresentations);\n+          }\n+          status = Status.WARNING;\n+        }\n+        String message = MessageFormat.format(Messages.CapellaDeleteCommand_ConfirmDeletionQuestion,\n+            messageNbSemanticElement, messageNbRepresentation);\n+        protectedElements = new Status(status, CapellaActionsActivator.PLUGIN_ID, message);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ef3d2df573957be4a5e48f9755bad2fbe44d93f"}, "originalPosition": 78}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEzMTM1MDQ4OnYy", "diffSide": "RIGHT", "path": "core/plugins/org.polarsys.capella.core.platform.sirius.ui.actions/src/org/polarsys/capella/core/platform/sirius/ui/commands/CapellaDeleteCommand.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwODo0Nzo0MlrOHc8Ptg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwODo0Nzo0MlrOHc8Ptg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDEwOTIzOA==", "bodyText": "Can you move else outside the first IF", "url": "https://github.com/eclipse/capella/pull/373#discussion_r500109238", "createdAt": "2020-10-06T08:47:42Z", "author": {"login": "pdulth"}, "path": "core/plugins/org.polarsys.capella.core.platform.sirius.ui.actions/src/org/polarsys/capella/core/platform/sirius/ui/commands/CapellaDeleteCommand.java", "diffHunk": "@@ -145,11 +151,38 @@ protected IStatus preDeleteChecks() {\n       if (!CapellaDeleteAction.canDelete(elementsToDelete)) {\n         protectedElements = new Status(Status.ERROR, CapellaActionsActivator.PLUGIN_ID,\n             Messages.CapellaDeleteCommand_ProtectedElementsError);\n+      } else {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ef3d2df573957be4a5e48f9755bad2fbe44d93f"}, "originalPosition": 54}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1MjY2NzA0OnYy", "diffSide": "RIGHT", "path": "core/plugins/org.polarsys.capella.core.ui.toolkit/src/org/polarsys/capella/core/ui/toolkit/dialogs/ConfirmDeleteCapellaElementDialog.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxNDo0MjoyN1rOHgBqkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxNDo0MjoyN1rOHgBqkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzM0Mzc2Mw==", "bodyText": "I think this shall occurs only on ERROR status.\n(if you have a warning, does the OK shall be disabled?)", "url": "https://github.com/eclipse/capella/pull/373#discussion_r503343763", "createdAt": "2020-10-12T14:42:27Z", "author": {"login": "pdulth"}, "path": "core/plugins/org.polarsys.capella.core.ui.toolkit/src/org/polarsys/capella/core/ui/toolkit/dialogs/ConfirmDeleteCapellaElementDialog.java", "diffHunk": "@@ -284,12 +285,22 @@ protected Control createContents(Composite parent) {\n   private void updateMessageAndButtons() {\n     IStatus status = getStatus();\n     if (!status.isOK()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38452a40e970882d6c6a1c594d0b2729b0af2474"}, "originalPosition": 43}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4240, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}