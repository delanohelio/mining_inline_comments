{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkxNTg3MzI1", "number": 373, "title": "[567246] Add a warning message in the DeleteCapellaElement dialog box", "bodyText": "This message is displayed when a representation is about to be deleted.\nChange-Id: Ib5dd66e0e145d40a4737999c697fc778b2062a44\nSigned-off-by: Laurent Fasani laurent.fasani@obeo.fr", "createdAt": "2020-09-23T07:52:09Z", "url": "https://github.com/eclipse/capella/pull/373", "merged": true, "mergeCommit": {"oid": "85be3c77c67169fd463cee64e64cf243f97f1d7d"}, "closed": true, "closedAt": "2020-10-15T11:30:00Z", "author": {"login": "lfasani"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdNPwbBgBqjM4MTM0MjA4NDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSwEiIAFqTUwOTI3ODE5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7dad7b9fce5ddc704315bbb494727030aae50c21", "author": {"user": {"login": "lfasani", "name": null}}, "url": "https://github.com/eclipse/capella/commit/7dad7b9fce5ddc704315bbb494727030aae50c21", "committedDate": "2020-09-23T07:49:55Z", "message": "[567246] Add a warning message in the DeleteCapellaElement dialog box\n\nThis message is displayed when a representation is about to be deleted.\n\nChange-Id: Ib5dd66e0e145d40a4737999c697fc778b2062a44\nSigned-off-by: Laurent Fasani <laurent.fasani@obeo.fr>"}, "afterCommit": {"oid": "6d9c516e581efd258a85add2cd91628fbe85c8f5", "author": {"user": {"login": "lfasani", "name": null}}, "url": "https://github.com/eclipse/capella/commit/6d9c516e581efd258a85add2cd91628fbe85c8f5", "committedDate": "2020-09-28T08:57:47Z", "message": "[567246] Add a warning message in the DeleteCapellaElement dialog box\n\nThis message is displayed when a representation is about to be deleted.\n\nChange-Id: Ib5dd66e0e145d40a4737999c697fc778b2062a44\nSigned-off-by: Laurent Fasani <laurent.fasani@obeo.fr>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk4Mjk3MTc2", "url": "https://github.com/eclipse/capella/pull/373#pullrequestreview-498297176", "createdAt": "2020-09-29T09:47:40Z", "commit": {"oid": "6d9c516e581efd258a85add2cd91628fbe85c8f5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6d9c516e581efd258a85add2cd91628fbe85c8f5", "author": {"user": {"login": "lfasani", "name": null}}, "url": "https://github.com/eclipse/capella/commit/6d9c516e581efd258a85add2cd91628fbe85c8f5", "committedDate": "2020-09-28T08:57:47Z", "message": "[567246] Add a warning message in the DeleteCapellaElement dialog box\n\nThis message is displayed when a representation is about to be deleted.\n\nChange-Id: Ib5dd66e0e145d40a4737999c697fc778b2062a44\nSigned-off-by: Laurent Fasani <laurent.fasani@obeo.fr>"}, "afterCommit": {"oid": "7ef3d2df573957be4a5e48f9755bad2fbe44d93f", "author": {"user": {"login": "lfasani", "name": null}}, "url": "https://github.com/eclipse/capella/commit/7ef3d2df573957be4a5e48f9755bad2fbe44d93f", "committedDate": "2020-10-02T16:00:00Z", "message": "[567246] Add a warning message in the DeleteCapellaElement dialog box\n\nThis message is displayed when a representation is about to be deleted.\n\nChange-Id: Ib5dd66e0e145d40a4737999c697fc778b2062a44\nSigned-off-by: Laurent Fasani <laurent.fasani@obeo.fr>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAyNzE3MzA3", "url": "https://github.com/eclipse/capella/pull/373#pullrequestreview-502717307", "createdAt": "2020-10-06T08:47:36Z", "commit": {"oid": "7ef3d2df573957be4a5e48f9755bad2fbe44d93f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwODo0NzozNlrOHc8PYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wNlQwODo0Nzo0MlrOHc8Ptg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDEwOTE1Mw==", "bodyText": "can you rename to \"prechecks\" or something like that", "url": "https://github.com/eclipse/capella/pull/373#discussion_r500109153", "createdAt": "2020-10-06T08:47:36Z", "author": {"login": "pdulth"}, "path": "core/plugins/org.polarsys.capella.core.platform.sirius.ui.actions/src/org/polarsys/capella/core/platform/sirius/ui/commands/CapellaDeleteCommand.java", "diffHunk": "@@ -145,11 +151,38 @@ protected IStatus preDeleteChecks() {\n       if (!CapellaDeleteAction.canDelete(elementsToDelete)) {\n         protectedElements = new Status(Status.ERROR, CapellaActionsActivator.PLUGIN_ID,\n             Messages.CapellaDeleteCommand_ProtectedElementsError);\n+      } else {\n+        long nbRepresentations = elementsToDelete.stream().filter(DRepresentationDescriptor.class::isInstance).count();\n+        long nbSemanticElements = elementsToDelete.size() - nbRepresentations;\n+        int status = Status.INFO;\n+        String messageNbSemanticElement = \"\";\n+        String messageNbRepresentation = \"\";\n+\n+        if (nbSemanticElements == 1) {\n+          messageNbSemanticElement = Messages.CapellaDeleteCommand_ConfirmDeletionWithOneSemanticElement;\n+        } else {\n+          messageNbSemanticElement = MessageFormat\n+              .format(Messages.CapellaDeleteCommand_ConfirmDeletionWithManySemanticElement, nbSemanticElements);\n+        }\n+        if (nbRepresentations > 0) {\n+          if (nbRepresentations == 1) {\n+            messageNbRepresentation = Messages.CapellaDeleteCommand_ConfirmDeletionWithOneRepresentation;\n+          } else {\n+            messageNbRepresentation = MessageFormat\n+                .format(Messages.CapellaDeleteCommand_ConfirmDeletionWithManyRepresentations, nbRepresentations);\n+          }\n+          status = Status.WARNING;\n+        }\n+        String message = MessageFormat.format(Messages.CapellaDeleteCommand_ConfirmDeletionQuestion,\n+            messageNbSemanticElement, messageNbRepresentation);\n+        protectedElements = new Status(status, CapellaActionsActivator.PLUGIN_ID, message);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ef3d2df573957be4a5e48f9755bad2fbe44d93f"}, "originalPosition": 78}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDEwOTIzOA==", "bodyText": "Can you move else outside the first IF", "url": "https://github.com/eclipse/capella/pull/373#discussion_r500109238", "createdAt": "2020-10-06T08:47:42Z", "author": {"login": "pdulth"}, "path": "core/plugins/org.polarsys.capella.core.platform.sirius.ui.actions/src/org/polarsys/capella/core/platform/sirius/ui/commands/CapellaDeleteCommand.java", "diffHunk": "@@ -145,11 +151,38 @@ protected IStatus preDeleteChecks() {\n       if (!CapellaDeleteAction.canDelete(elementsToDelete)) {\n         protectedElements = new Status(Status.ERROR, CapellaActionsActivator.PLUGIN_ID,\n             Messages.CapellaDeleteCommand_ProtectedElementsError);\n+      } else {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ef3d2df573957be4a5e48f9755bad2fbe44d93f"}, "originalPosition": 54}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7ef3d2df573957be4a5e48f9755bad2fbe44d93f", "author": {"user": {"login": "lfasani", "name": null}}, "url": "https://github.com/eclipse/capella/commit/7ef3d2df573957be4a5e48f9755bad2fbe44d93f", "committedDate": "2020-10-02T16:00:00Z", "message": "[567246] Add a warning message in the DeleteCapellaElement dialog box\n\nThis message is displayed when a representation is about to be deleted.\n\nChange-Id: Ib5dd66e0e145d40a4737999c697fc778b2062a44\nSigned-off-by: Laurent Fasani <laurent.fasani@obeo.fr>"}, "afterCommit": {"oid": "38452a40e970882d6c6a1c594d0b2729b0af2474", "author": {"user": {"login": "lfasani", "name": null}}, "url": "https://github.com/eclipse/capella/commit/38452a40e970882d6c6a1c594d0b2729b0af2474", "committedDate": "2020-10-06T16:26:44Z", "message": "[567246] Add a warning message in the DeleteCapellaElement dialog box\n\nThis message is displayed when a representation is about to be deleted.\n\nChange-Id: Ib5dd66e0e145d40a4737999c697fc778b2062a44\nSigned-off-by: Laurent Fasani <laurent.fasani@obeo.fr>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA2NjgxOTky", "url": "https://github.com/eclipse/capella/pull/373#pullrequestreview-506681992", "createdAt": "2020-10-12T14:42:26Z", "commit": {"oid": "38452a40e970882d6c6a1c594d0b2729b0af2474"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxNDo0MjoyN1rOHgBqkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xMlQxNDo0MjoyN1rOHgBqkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzM0Mzc2Mw==", "bodyText": "I think this shall occurs only on ERROR status.\n(if you have a warning, does the OK shall be disabled?)", "url": "https://github.com/eclipse/capella/pull/373#discussion_r503343763", "createdAt": "2020-10-12T14:42:27Z", "author": {"login": "pdulth"}, "path": "core/plugins/org.polarsys.capella.core.ui.toolkit/src/org/polarsys/capella/core/ui/toolkit/dialogs/ConfirmDeleteCapellaElementDialog.java", "diffHunk": "@@ -284,12 +285,22 @@ protected Control createContents(Composite parent) {\n   private void updateMessageAndButtons() {\n     IStatus status = getStatus();\n     if (!status.isOK()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38452a40e970882d6c6a1c594d0b2729b0af2474"}, "originalPosition": 43}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "29983489717750dadd6636fec949bae401abbbeb", "author": {"user": {"login": "lfasani", "name": null}}, "url": "https://github.com/eclipse/capella/commit/29983489717750dadd6636fec949bae401abbbeb", "committedDate": "2020-10-14T13:26:08Z", "message": "[567246] Add a warning message in the DeleteCapellaElement dialog box\n\nThis message is displayed when a representation is about to be deleted.\n\nChange-Id: Ib5dd66e0e145d40a4737999c697fc778b2062a44\nSigned-off-by: Laurent Fasani <laurent.fasani@obeo.fr>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dada43a07419bd3a313229fe6bfdf1e359e625ff", "author": {"user": {"login": "pdulth", "name": "Philippe DUL"}}, "url": "https://github.com/eclipse/capella/commit/dada43a07419bd3a313229fe6bfdf1e359e625ff", "committedDate": "2020-10-14T13:27:07Z", "message": "[567246] Add a warning message in the DeleteCapellaElement dialog box\n\nChange-Id: I6627941dabc59334304d364bfdbc4b96d25230d9\nSigned-off-by: Philippe DUL <philippe.dul@thalesgroup.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "38452a40e970882d6c6a1c594d0b2729b0af2474", "author": {"user": {"login": "lfasani", "name": null}}, "url": "https://github.com/eclipse/capella/commit/38452a40e970882d6c6a1c594d0b2729b0af2474", "committedDate": "2020-10-06T16:26:44Z", "message": "[567246] Add a warning message in the DeleteCapellaElement dialog box\n\nThis message is displayed when a representation is about to be deleted.\n\nChange-Id: Ib5dd66e0e145d40a4737999c697fc778b2062a44\nSigned-off-by: Laurent Fasani <laurent.fasani@obeo.fr>"}, "afterCommit": {"oid": "dada43a07419bd3a313229fe6bfdf1e359e625ff", "author": {"user": {"login": "pdulth", "name": "Philippe DUL"}}, "url": "https://github.com/eclipse/capella/commit/dada43a07419bd3a313229fe6bfdf1e359e625ff", "committedDate": "2020-10-14T13:27:07Z", "message": "[567246] Add a warning message in the DeleteCapellaElement dialog box\n\nChange-Id: I6627941dabc59334304d364bfdbc4b96d25230d9\nSigned-off-by: Philippe DUL <philippe.dul@thalesgroup.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA4MzQ1NTcy", "url": "https://github.com/eclipse/capella/pull/373#pullrequestreview-508345572", "createdAt": "2020-10-14T13:28:36Z", "commit": {"oid": "dada43a07419bd3a313229fe6bfdf1e359e625ff"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA5Mjc4MTkz", "url": "https://github.com/eclipse/capella/pull/373#pullrequestreview-509278193", "createdAt": "2020-10-15T11:28:16Z", "commit": {"oid": "dada43a07419bd3a313229fe6bfdf1e359e625ff"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1326, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}