{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0MzkyNzAy", "number": 120, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMDowMjoxNlrODmnRwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMjozMjozN1rODmqJ3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxODE2MDAxOnYy", "diffSide": "RIGHT", "path": "core/plugins/org.polarsys.capella.core.commandline.core/src/org/polarsys/capella/core/commandline/core/DefaultCommandLine.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMDowMjoxNlrOF0IQRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMDowMjoxNlrOF0IQRg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDIwNTUxMA==", "bodyText": "This can be removed. The doc in already present in the overridden method.", "url": "https://github.com/eclipse/capella/pull/120#discussion_r390205510", "createdAt": "2020-03-10T10:02:16Z", "author": {"login": "sandupostaru"}, "path": "core/plugins/org.polarsys.capella.core.commandline.core/src/org/polarsys/capella/core/commandline/core/DefaultCommandLine.java", "diffHunk": "@@ -0,0 +1,384 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 THALES GLOBAL SERVICES.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *    Thales - initial API and implementation\n+ *******************************************************************************/\n+package org.polarsys.capella.core.commandline.core;\n+\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.IOException;\n+import java.net.URISyntaxException;\n+import java.net.URL;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Collections;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+\n+import javax.xml.XMLConstants;\n+import javax.xml.parsers.DocumentBuilder;\n+import javax.xml.parsers.DocumentBuilderFactory;\n+import javax.xml.parsers.ParserConfigurationException;\n+import javax.xml.xpath.XPath;\n+import javax.xml.xpath.XPathConstants;\n+import javax.xml.xpath.XPathExpression;\n+import javax.xml.xpath.XPathExpressionException;\n+import javax.xml.xpath.XPathFactory;\n+\n+import org.eclipse.core.resources.IFile;\n+import org.eclipse.core.resources.IFolder;\n+import org.eclipse.core.resources.IProject;\n+import org.eclipse.core.resources.IWorkspace;\n+import org.eclipse.core.resources.ResourcesPlugin;\n+import org.eclipse.core.runtime.CoreException;\n+import org.eclipse.core.runtime.FileLocator;\n+import org.eclipse.core.runtime.NullProgressMonitor;\n+import org.eclipse.core.runtime.Path;\n+import org.eclipse.emf.common.util.URI;\n+import org.eclipse.equinox.app.IApplicationContext;\n+import org.osgi.framework.Bundle;\n+import org.osgi.framework.FrameworkUtil;\n+import org.polarsys.capella.common.tools.report.config.registry.ReportManagerRegistry;\n+import org.polarsys.capella.common.tools.report.util.IReportManagerDefaultComponents;\n+import org.polarsys.capella.core.model.handler.command.CapellaResourceHelper;\n+import org.w3c.dom.Document;\n+import org.w3c.dom.Node;\n+import org.w3c.dom.NodeList;\n+import org.xml.sax.SAXException;\n+\n+public class DefaultCommandLine extends AbstractCommandLine {\n+  public static String ALL_ARGUMENT = \"/all\";\n+\n+  public DefaultCommandLine() {\n+    argHelper = CommandLineArgumentHelper.getInstance();\n+    logger = ReportManagerRegistry.getInstance().subscribe(IReportManagerDefaultComponents.DEFAULT);\n+  }\n+\n+  /**\n+   * {@inheritDoc}\n+   *\n+   * @throws CommandLineException\n+   */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0d6756abf560505d98a7d838a40ccc6ae8da372"}, "originalPosition": 70}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxODIxNTMzOnYy", "diffSide": "RIGHT", "path": "core/plugins/org.polarsys.capella.core.commandline.core/src/org/polarsys/capella/core/commandline/core/DefaultCommandLine.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMDoxODowMlrOF0IyNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMjoyNjoxNlrOF0MoUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDIxNDE5OQ==", "bodyText": "Extract a variable containing\n Arrays.stream(ResourcesPlugin.getWorkspace().getRoot().getProjects())\nbefore the for loop\nThis can be further optimized, but considering the size of the projects is small, I think it is ok for now.", "url": "https://github.com/eclipse/capella/pull/120#discussion_r390214199", "createdAt": "2020-03-10T10:18:02Z", "author": {"login": "sandupostaru"}, "path": "core/plugins/org.polarsys.capella.core.commandline.core/src/org/polarsys/capella/core/commandline/core/DefaultCommandLine.java", "diffHunk": "@@ -0,0 +1,384 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 THALES GLOBAL SERVICES.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *    Thales - initial API and implementation\n+ *******************************************************************************/\n+package org.polarsys.capella.core.commandline.core;\n+\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.IOException;\n+import java.net.URISyntaxException;\n+import java.net.URL;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Collections;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+\n+import javax.xml.XMLConstants;\n+import javax.xml.parsers.DocumentBuilder;\n+import javax.xml.parsers.DocumentBuilderFactory;\n+import javax.xml.parsers.ParserConfigurationException;\n+import javax.xml.xpath.XPath;\n+import javax.xml.xpath.XPathConstants;\n+import javax.xml.xpath.XPathExpression;\n+import javax.xml.xpath.XPathExpressionException;\n+import javax.xml.xpath.XPathFactory;\n+\n+import org.eclipse.core.resources.IFile;\n+import org.eclipse.core.resources.IFolder;\n+import org.eclipse.core.resources.IProject;\n+import org.eclipse.core.resources.IWorkspace;\n+import org.eclipse.core.resources.ResourcesPlugin;\n+import org.eclipse.core.runtime.CoreException;\n+import org.eclipse.core.runtime.FileLocator;\n+import org.eclipse.core.runtime.NullProgressMonitor;\n+import org.eclipse.core.runtime.Path;\n+import org.eclipse.emf.common.util.URI;\n+import org.eclipse.equinox.app.IApplicationContext;\n+import org.osgi.framework.Bundle;\n+import org.osgi.framework.FrameworkUtil;\n+import org.polarsys.capella.common.tools.report.config.registry.ReportManagerRegistry;\n+import org.polarsys.capella.common.tools.report.util.IReportManagerDefaultComponents;\n+import org.polarsys.capella.core.model.handler.command.CapellaResourceHelper;\n+import org.w3c.dom.Document;\n+import org.w3c.dom.Node;\n+import org.w3c.dom.NodeList;\n+import org.xml.sax.SAXException;\n+\n+public class DefaultCommandLine extends AbstractCommandLine {\n+  public static String ALL_ARGUMENT = \"/all\";\n+\n+  public DefaultCommandLine() {\n+    argHelper = CommandLineArgumentHelper.getInstance();\n+    logger = ReportManagerRegistry.getInstance().subscribe(IReportManagerDefaultComponents.DEFAULT);\n+  }\n+\n+  /**\n+   * {@inheritDoc}\n+   *\n+   * @throws CommandLineException\n+   */\n+  @Override\n+  public void prepare(IApplicationContext context) throws CommandLineException {\n+    // Import projects\n+    importProjects();\n+    // Create output folder\n+    getOrCreateOutputFolder();\n+  }\n+\n+  protected void importProjects() throws CommandLineException {\n+    String projectsToImport = argHelper.getImportProjects();\n+    if (projectsToImport != null) {\n+      try {\n+        importProjects(toList(projectsToImport));\n+      } catch (CoreException exception) {\n+        throw new CommandLineException(exception.getMessage());\n+      }\n+    }\n+  }\n+\n+  @Override\n+  public void postExecute(IApplicationContext context) throws CommandLineException {\n+    exportZips();\n+  }\n+\n+  protected void exportZips() throws CommandLineException {\n+    String projectsToExportZip = argHelper.getExportZips();\n+    if (projectsToExportZip != null) {\n+      if (projectsToExportZip.equals(ALL_ARGUMENT)) {\n+        exportProjectZips(Arrays.stream(ResourcesPlugin.getWorkspace().getRoot().getProjects())\n+            .map(iProject -> iProject.getName()).collect(Collectors.toList()));\n+      } else {\n+        exportProjectZips(toList(projectsToExportZip));\n+      }\n+    }\n+  }\n+\n+  /**\n+   * @param projectsToExportZip\n+   * @throws CoreException\n+   */\n+  protected void exportProjectZips(List<String> projectsToExportZip) throws CommandLineException {\n+    IFolder outputFolder = getOrCreateOutputFolder();\n+    if (outputFolder == null) {\n+      logger.error(Messages.export_zip_no_ouputfolder);\n+    } else {\n+      for (String project : projectsToExportZip) {\n+        Optional<IProject> anyIProject = Arrays.stream(ResourcesPlugin.getWorkspace().getRoot().getProjects())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0d6756abf560505d98a7d838a40ccc6ae8da372"}, "originalPosition": 117}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI3NzIwMg==", "bodyText": "Good catch. But the solution is not good :) since \"Consumed Stream pipelines should not be reused\".", "url": "https://github.com/eclipse/capella/pull/120#discussion_r390277202", "createdAt": "2020-03-10T12:26:16Z", "author": {"login": "minhtutonthat"}, "path": "core/plugins/org.polarsys.capella.core.commandline.core/src/org/polarsys/capella/core/commandline/core/DefaultCommandLine.java", "diffHunk": "@@ -0,0 +1,384 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 THALES GLOBAL SERVICES.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *    Thales - initial API and implementation\n+ *******************************************************************************/\n+package org.polarsys.capella.core.commandline.core;\n+\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.IOException;\n+import java.net.URISyntaxException;\n+import java.net.URL;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Collections;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+\n+import javax.xml.XMLConstants;\n+import javax.xml.parsers.DocumentBuilder;\n+import javax.xml.parsers.DocumentBuilderFactory;\n+import javax.xml.parsers.ParserConfigurationException;\n+import javax.xml.xpath.XPath;\n+import javax.xml.xpath.XPathConstants;\n+import javax.xml.xpath.XPathExpression;\n+import javax.xml.xpath.XPathExpressionException;\n+import javax.xml.xpath.XPathFactory;\n+\n+import org.eclipse.core.resources.IFile;\n+import org.eclipse.core.resources.IFolder;\n+import org.eclipse.core.resources.IProject;\n+import org.eclipse.core.resources.IWorkspace;\n+import org.eclipse.core.resources.ResourcesPlugin;\n+import org.eclipse.core.runtime.CoreException;\n+import org.eclipse.core.runtime.FileLocator;\n+import org.eclipse.core.runtime.NullProgressMonitor;\n+import org.eclipse.core.runtime.Path;\n+import org.eclipse.emf.common.util.URI;\n+import org.eclipse.equinox.app.IApplicationContext;\n+import org.osgi.framework.Bundle;\n+import org.osgi.framework.FrameworkUtil;\n+import org.polarsys.capella.common.tools.report.config.registry.ReportManagerRegistry;\n+import org.polarsys.capella.common.tools.report.util.IReportManagerDefaultComponents;\n+import org.polarsys.capella.core.model.handler.command.CapellaResourceHelper;\n+import org.w3c.dom.Document;\n+import org.w3c.dom.Node;\n+import org.w3c.dom.NodeList;\n+import org.xml.sax.SAXException;\n+\n+public class DefaultCommandLine extends AbstractCommandLine {\n+  public static String ALL_ARGUMENT = \"/all\";\n+\n+  public DefaultCommandLine() {\n+    argHelper = CommandLineArgumentHelper.getInstance();\n+    logger = ReportManagerRegistry.getInstance().subscribe(IReportManagerDefaultComponents.DEFAULT);\n+  }\n+\n+  /**\n+   * {@inheritDoc}\n+   *\n+   * @throws CommandLineException\n+   */\n+  @Override\n+  public void prepare(IApplicationContext context) throws CommandLineException {\n+    // Import projects\n+    importProjects();\n+    // Create output folder\n+    getOrCreateOutputFolder();\n+  }\n+\n+  protected void importProjects() throws CommandLineException {\n+    String projectsToImport = argHelper.getImportProjects();\n+    if (projectsToImport != null) {\n+      try {\n+        importProjects(toList(projectsToImport));\n+      } catch (CoreException exception) {\n+        throw new CommandLineException(exception.getMessage());\n+      }\n+    }\n+  }\n+\n+  @Override\n+  public void postExecute(IApplicationContext context) throws CommandLineException {\n+    exportZips();\n+  }\n+\n+  protected void exportZips() throws CommandLineException {\n+    String projectsToExportZip = argHelper.getExportZips();\n+    if (projectsToExportZip != null) {\n+      if (projectsToExportZip.equals(ALL_ARGUMENT)) {\n+        exportProjectZips(Arrays.stream(ResourcesPlugin.getWorkspace().getRoot().getProjects())\n+            .map(iProject -> iProject.getName()).collect(Collectors.toList()));\n+      } else {\n+        exportProjectZips(toList(projectsToExportZip));\n+      }\n+    }\n+  }\n+\n+  /**\n+   * @param projectsToExportZip\n+   * @throws CoreException\n+   */\n+  protected void exportProjectZips(List<String> projectsToExportZip) throws CommandLineException {\n+    IFolder outputFolder = getOrCreateOutputFolder();\n+    if (outputFolder == null) {\n+      logger.error(Messages.export_zip_no_ouputfolder);\n+    } else {\n+      for (String project : projectsToExportZip) {\n+        Optional<IProject> anyIProject = Arrays.stream(ResourcesPlugin.getWorkspace().getRoot().getProjects())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDIxNDE5OQ=="}, "originalCommit": {"oid": "a0d6756abf560505d98a7d838a40ccc6ae8da372"}, "originalPosition": 117}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxODIzODU5OnYy", "diffSide": "RIGHT", "path": "core/plugins/org.polarsys.capella.core.commandline.core/src/org/polarsys/capella/core/commandline/core/DefaultCommandLine.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMDoyNToxOVrOF0JBhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMjoxOTo0NVrOF0Mb2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDIxODExOA==", "bodyText": "Can just be:\n if (!argHelper.getInputs().equals(ALL_ARGUMENT))", "url": "https://github.com/eclipse/capella/pull/120#discussion_r390218118", "createdAt": "2020-03-10T10:25:19Z", "author": {"login": "sandupostaru"}, "path": "core/plugins/org.polarsys.capella.core.commandline.core/src/org/polarsys/capella/core/commandline/core/DefaultCommandLine.java", "diffHunk": "@@ -0,0 +1,384 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 THALES GLOBAL SERVICES.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *    Thales - initial API and implementation\n+ *******************************************************************************/\n+package org.polarsys.capella.core.commandline.core;\n+\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.IOException;\n+import java.net.URISyntaxException;\n+import java.net.URL;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Collections;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+\n+import javax.xml.XMLConstants;\n+import javax.xml.parsers.DocumentBuilder;\n+import javax.xml.parsers.DocumentBuilderFactory;\n+import javax.xml.parsers.ParserConfigurationException;\n+import javax.xml.xpath.XPath;\n+import javax.xml.xpath.XPathConstants;\n+import javax.xml.xpath.XPathExpression;\n+import javax.xml.xpath.XPathExpressionException;\n+import javax.xml.xpath.XPathFactory;\n+\n+import org.eclipse.core.resources.IFile;\n+import org.eclipse.core.resources.IFolder;\n+import org.eclipse.core.resources.IProject;\n+import org.eclipse.core.resources.IWorkspace;\n+import org.eclipse.core.resources.ResourcesPlugin;\n+import org.eclipse.core.runtime.CoreException;\n+import org.eclipse.core.runtime.FileLocator;\n+import org.eclipse.core.runtime.NullProgressMonitor;\n+import org.eclipse.core.runtime.Path;\n+import org.eclipse.emf.common.util.URI;\n+import org.eclipse.equinox.app.IApplicationContext;\n+import org.osgi.framework.Bundle;\n+import org.osgi.framework.FrameworkUtil;\n+import org.polarsys.capella.common.tools.report.config.registry.ReportManagerRegistry;\n+import org.polarsys.capella.common.tools.report.util.IReportManagerDefaultComponents;\n+import org.polarsys.capella.core.model.handler.command.CapellaResourceHelper;\n+import org.w3c.dom.Document;\n+import org.w3c.dom.Node;\n+import org.w3c.dom.NodeList;\n+import org.xml.sax.SAXException;\n+\n+public class DefaultCommandLine extends AbstractCommandLine {\n+  public static String ALL_ARGUMENT = \"/all\";\n+\n+  public DefaultCommandLine() {\n+    argHelper = CommandLineArgumentHelper.getInstance();\n+    logger = ReportManagerRegistry.getInstance().subscribe(IReportManagerDefaultComponents.DEFAULT);\n+  }\n+\n+  /**\n+   * {@inheritDoc}\n+   *\n+   * @throws CommandLineException\n+   */\n+  @Override\n+  public void prepare(IApplicationContext context) throws CommandLineException {\n+    // Import projects\n+    importProjects();\n+    // Create output folder\n+    getOrCreateOutputFolder();\n+  }\n+\n+  protected void importProjects() throws CommandLineException {\n+    String projectsToImport = argHelper.getImportProjects();\n+    if (projectsToImport != null) {\n+      try {\n+        importProjects(toList(projectsToImport));\n+      } catch (CoreException exception) {\n+        throw new CommandLineException(exception.getMessage());\n+      }\n+    }\n+  }\n+\n+  @Override\n+  public void postExecute(IApplicationContext context) throws CommandLineException {\n+    exportZips();\n+  }\n+\n+  protected void exportZips() throws CommandLineException {\n+    String projectsToExportZip = argHelper.getExportZips();\n+    if (projectsToExportZip != null) {\n+      if (projectsToExportZip.equals(ALL_ARGUMENT)) {\n+        exportProjectZips(Arrays.stream(ResourcesPlugin.getWorkspace().getRoot().getProjects())\n+            .map(iProject -> iProject.getName()).collect(Collectors.toList()));\n+      } else {\n+        exportProjectZips(toList(projectsToExportZip));\n+      }\n+    }\n+  }\n+\n+  /**\n+   * @param projectsToExportZip\n+   * @throws CoreException\n+   */\n+  protected void exportProjectZips(List<String> projectsToExportZip) throws CommandLineException {\n+    IFolder outputFolder = getOrCreateOutputFolder();\n+    if (outputFolder == null) {\n+      logger.error(Messages.export_zip_no_ouputfolder);\n+    } else {\n+      for (String project : projectsToExportZip) {\n+        Optional<IProject> anyIProject = Arrays.stream(ResourcesPlugin.getWorkspace().getRoot().getProjects())\n+            .filter(iProject -> iProject.getName().equals(project)).findAny();\n+        if (!anyIProject.isPresent()) {\n+          logger.error(Messages.export_zip_not_found + project);\n+        } else {\n+          IWorkspace workspace = ResourcesPlugin.getWorkspace();\n+          IFile file = outputFolder.getFile(project + \".zip\");\n+          IProject newProject = workspace.getRoot().getProject(project);\n+          WorkbenchHelper.exportZipFile(newProject, file);\n+        }\n+      }\n+    }\n+  }\n+\n+  protected void checkProject(IProject project) throws CommandLineException {\n+    if (!project.exists()) {\n+      logError(Messages.project + project.getName() + Messages.not_exist);\n+    } else {\n+      try {\n+        project.open(new NullProgressMonitor());\n+      } catch (CoreException exception) {\n+        logError(Messages.unable_open_project + project.getName());\n+      }\n+      List<IFile> melodymodellerFiles = getCapellamodellerFiles(project);\n+      // check that all melodymodeller files are compliant with current Capella version\n+      for (IFile modeller : melodymodellerFiles) {\n+        compliancyCheck(modeller);\n+      }\n+    }\n+  }\n+\n+  /**\n+   * Check that inputs arguments are valid\n+   * \n+   * @throws CommandLineException\n+   */\n+  protected void checkInputs() throws CommandLineException {\n+    if (argHelper.getInputs() == null) {\n+      logger.error(Messages.inputs_mandatory);\n+    } else if (argHelper.getInputs().equals(ALL_ARGUMENT)) {\n+      // /all is accepted as argument\n+    } else {\n+      List<String> inputs = toList(argHelper.getInputs());\n+      for (String input : inputs) {\n+        if (input.endsWith(CapellaResourceHelper.AIRD_FILE_EXTENSION)) {\n+          checkInputAirdFile(input);\n+        } else {\n+          checkInputProject(input);\n+        }\n+      }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0d6756abf560505d98a7d838a40ccc6ae8da372"}, "originalPosition": 166}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI3MjAzMg==", "bodyText": "I think the code's logic is clearer when \"we accept the /all argument\" than \"we check the input only it's different than /all\"", "url": "https://github.com/eclipse/capella/pull/120#discussion_r390272032", "createdAt": "2020-03-10T12:15:33Z", "author": {"login": "minhtutonthat"}, "path": "core/plugins/org.polarsys.capella.core.commandline.core/src/org/polarsys/capella/core/commandline/core/DefaultCommandLine.java", "diffHunk": "@@ -0,0 +1,384 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 THALES GLOBAL SERVICES.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *    Thales - initial API and implementation\n+ *******************************************************************************/\n+package org.polarsys.capella.core.commandline.core;\n+\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.IOException;\n+import java.net.URISyntaxException;\n+import java.net.URL;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Collections;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+\n+import javax.xml.XMLConstants;\n+import javax.xml.parsers.DocumentBuilder;\n+import javax.xml.parsers.DocumentBuilderFactory;\n+import javax.xml.parsers.ParserConfigurationException;\n+import javax.xml.xpath.XPath;\n+import javax.xml.xpath.XPathConstants;\n+import javax.xml.xpath.XPathExpression;\n+import javax.xml.xpath.XPathExpressionException;\n+import javax.xml.xpath.XPathFactory;\n+\n+import org.eclipse.core.resources.IFile;\n+import org.eclipse.core.resources.IFolder;\n+import org.eclipse.core.resources.IProject;\n+import org.eclipse.core.resources.IWorkspace;\n+import org.eclipse.core.resources.ResourcesPlugin;\n+import org.eclipse.core.runtime.CoreException;\n+import org.eclipse.core.runtime.FileLocator;\n+import org.eclipse.core.runtime.NullProgressMonitor;\n+import org.eclipse.core.runtime.Path;\n+import org.eclipse.emf.common.util.URI;\n+import org.eclipse.equinox.app.IApplicationContext;\n+import org.osgi.framework.Bundle;\n+import org.osgi.framework.FrameworkUtil;\n+import org.polarsys.capella.common.tools.report.config.registry.ReportManagerRegistry;\n+import org.polarsys.capella.common.tools.report.util.IReportManagerDefaultComponents;\n+import org.polarsys.capella.core.model.handler.command.CapellaResourceHelper;\n+import org.w3c.dom.Document;\n+import org.w3c.dom.Node;\n+import org.w3c.dom.NodeList;\n+import org.xml.sax.SAXException;\n+\n+public class DefaultCommandLine extends AbstractCommandLine {\n+  public static String ALL_ARGUMENT = \"/all\";\n+\n+  public DefaultCommandLine() {\n+    argHelper = CommandLineArgumentHelper.getInstance();\n+    logger = ReportManagerRegistry.getInstance().subscribe(IReportManagerDefaultComponents.DEFAULT);\n+  }\n+\n+  /**\n+   * {@inheritDoc}\n+   *\n+   * @throws CommandLineException\n+   */\n+  @Override\n+  public void prepare(IApplicationContext context) throws CommandLineException {\n+    // Import projects\n+    importProjects();\n+    // Create output folder\n+    getOrCreateOutputFolder();\n+  }\n+\n+  protected void importProjects() throws CommandLineException {\n+    String projectsToImport = argHelper.getImportProjects();\n+    if (projectsToImport != null) {\n+      try {\n+        importProjects(toList(projectsToImport));\n+      } catch (CoreException exception) {\n+        throw new CommandLineException(exception.getMessage());\n+      }\n+    }\n+  }\n+\n+  @Override\n+  public void postExecute(IApplicationContext context) throws CommandLineException {\n+    exportZips();\n+  }\n+\n+  protected void exportZips() throws CommandLineException {\n+    String projectsToExportZip = argHelper.getExportZips();\n+    if (projectsToExportZip != null) {\n+      if (projectsToExportZip.equals(ALL_ARGUMENT)) {\n+        exportProjectZips(Arrays.stream(ResourcesPlugin.getWorkspace().getRoot().getProjects())\n+            .map(iProject -> iProject.getName()).collect(Collectors.toList()));\n+      } else {\n+        exportProjectZips(toList(projectsToExportZip));\n+      }\n+    }\n+  }\n+\n+  /**\n+   * @param projectsToExportZip\n+   * @throws CoreException\n+   */\n+  protected void exportProjectZips(List<String> projectsToExportZip) throws CommandLineException {\n+    IFolder outputFolder = getOrCreateOutputFolder();\n+    if (outputFolder == null) {\n+      logger.error(Messages.export_zip_no_ouputfolder);\n+    } else {\n+      for (String project : projectsToExportZip) {\n+        Optional<IProject> anyIProject = Arrays.stream(ResourcesPlugin.getWorkspace().getRoot().getProjects())\n+            .filter(iProject -> iProject.getName().equals(project)).findAny();\n+        if (!anyIProject.isPresent()) {\n+          logger.error(Messages.export_zip_not_found + project);\n+        } else {\n+          IWorkspace workspace = ResourcesPlugin.getWorkspace();\n+          IFile file = outputFolder.getFile(project + \".zip\");\n+          IProject newProject = workspace.getRoot().getProject(project);\n+          WorkbenchHelper.exportZipFile(newProject, file);\n+        }\n+      }\n+    }\n+  }\n+\n+  protected void checkProject(IProject project) throws CommandLineException {\n+    if (!project.exists()) {\n+      logError(Messages.project + project.getName() + Messages.not_exist);\n+    } else {\n+      try {\n+        project.open(new NullProgressMonitor());\n+      } catch (CoreException exception) {\n+        logError(Messages.unable_open_project + project.getName());\n+      }\n+      List<IFile> melodymodellerFiles = getCapellamodellerFiles(project);\n+      // check that all melodymodeller files are compliant with current Capella version\n+      for (IFile modeller : melodymodellerFiles) {\n+        compliancyCheck(modeller);\n+      }\n+    }\n+  }\n+\n+  /**\n+   * Check that inputs arguments are valid\n+   * \n+   * @throws CommandLineException\n+   */\n+  protected void checkInputs() throws CommandLineException {\n+    if (argHelper.getInputs() == null) {\n+      logger.error(Messages.inputs_mandatory);\n+    } else if (argHelper.getInputs().equals(ALL_ARGUMENT)) {\n+      // /all is accepted as argument\n+    } else {\n+      List<String> inputs = toList(argHelper.getInputs());\n+      for (String input : inputs) {\n+        if (input.endsWith(CapellaResourceHelper.AIRD_FILE_EXTENSION)) {\n+          checkInputAirdFile(input);\n+        } else {\n+          checkInputProject(input);\n+        }\n+      }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDIxODExOA=="}, "originalCommit": {"oid": "a0d6756abf560505d98a7d838a40ccc6ae8da372"}, "originalPosition": 166}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI3NDAxMA==", "bodyText": "I think your opinion is influenced by the   // /all is accepted as argument  comment.\nI bet that if you remove that comment and another guy just looks as an empty branch - he won't understand why the branch is empty \ud83d\ude15 .\nIt's up to you if you make the change or not, either way works for me \ud83d\ude46\u200d\u2642\ufe0f", "url": "https://github.com/eclipse/capella/pull/120#discussion_r390274010", "createdAt": "2020-03-10T12:19:45Z", "author": {"login": "sandupostaru"}, "path": "core/plugins/org.polarsys.capella.core.commandline.core/src/org/polarsys/capella/core/commandline/core/DefaultCommandLine.java", "diffHunk": "@@ -0,0 +1,384 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 THALES GLOBAL SERVICES.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *    Thales - initial API and implementation\n+ *******************************************************************************/\n+package org.polarsys.capella.core.commandline.core;\n+\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.IOException;\n+import java.net.URISyntaxException;\n+import java.net.URL;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Collections;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+\n+import javax.xml.XMLConstants;\n+import javax.xml.parsers.DocumentBuilder;\n+import javax.xml.parsers.DocumentBuilderFactory;\n+import javax.xml.parsers.ParserConfigurationException;\n+import javax.xml.xpath.XPath;\n+import javax.xml.xpath.XPathConstants;\n+import javax.xml.xpath.XPathExpression;\n+import javax.xml.xpath.XPathExpressionException;\n+import javax.xml.xpath.XPathFactory;\n+\n+import org.eclipse.core.resources.IFile;\n+import org.eclipse.core.resources.IFolder;\n+import org.eclipse.core.resources.IProject;\n+import org.eclipse.core.resources.IWorkspace;\n+import org.eclipse.core.resources.ResourcesPlugin;\n+import org.eclipse.core.runtime.CoreException;\n+import org.eclipse.core.runtime.FileLocator;\n+import org.eclipse.core.runtime.NullProgressMonitor;\n+import org.eclipse.core.runtime.Path;\n+import org.eclipse.emf.common.util.URI;\n+import org.eclipse.equinox.app.IApplicationContext;\n+import org.osgi.framework.Bundle;\n+import org.osgi.framework.FrameworkUtil;\n+import org.polarsys.capella.common.tools.report.config.registry.ReportManagerRegistry;\n+import org.polarsys.capella.common.tools.report.util.IReportManagerDefaultComponents;\n+import org.polarsys.capella.core.model.handler.command.CapellaResourceHelper;\n+import org.w3c.dom.Document;\n+import org.w3c.dom.Node;\n+import org.w3c.dom.NodeList;\n+import org.xml.sax.SAXException;\n+\n+public class DefaultCommandLine extends AbstractCommandLine {\n+  public static String ALL_ARGUMENT = \"/all\";\n+\n+  public DefaultCommandLine() {\n+    argHelper = CommandLineArgumentHelper.getInstance();\n+    logger = ReportManagerRegistry.getInstance().subscribe(IReportManagerDefaultComponents.DEFAULT);\n+  }\n+\n+  /**\n+   * {@inheritDoc}\n+   *\n+   * @throws CommandLineException\n+   */\n+  @Override\n+  public void prepare(IApplicationContext context) throws CommandLineException {\n+    // Import projects\n+    importProjects();\n+    // Create output folder\n+    getOrCreateOutputFolder();\n+  }\n+\n+  protected void importProjects() throws CommandLineException {\n+    String projectsToImport = argHelper.getImportProjects();\n+    if (projectsToImport != null) {\n+      try {\n+        importProjects(toList(projectsToImport));\n+      } catch (CoreException exception) {\n+        throw new CommandLineException(exception.getMessage());\n+      }\n+    }\n+  }\n+\n+  @Override\n+  public void postExecute(IApplicationContext context) throws CommandLineException {\n+    exportZips();\n+  }\n+\n+  protected void exportZips() throws CommandLineException {\n+    String projectsToExportZip = argHelper.getExportZips();\n+    if (projectsToExportZip != null) {\n+      if (projectsToExportZip.equals(ALL_ARGUMENT)) {\n+        exportProjectZips(Arrays.stream(ResourcesPlugin.getWorkspace().getRoot().getProjects())\n+            .map(iProject -> iProject.getName()).collect(Collectors.toList()));\n+      } else {\n+        exportProjectZips(toList(projectsToExportZip));\n+      }\n+    }\n+  }\n+\n+  /**\n+   * @param projectsToExportZip\n+   * @throws CoreException\n+   */\n+  protected void exportProjectZips(List<String> projectsToExportZip) throws CommandLineException {\n+    IFolder outputFolder = getOrCreateOutputFolder();\n+    if (outputFolder == null) {\n+      logger.error(Messages.export_zip_no_ouputfolder);\n+    } else {\n+      for (String project : projectsToExportZip) {\n+        Optional<IProject> anyIProject = Arrays.stream(ResourcesPlugin.getWorkspace().getRoot().getProjects())\n+            .filter(iProject -> iProject.getName().equals(project)).findAny();\n+        if (!anyIProject.isPresent()) {\n+          logger.error(Messages.export_zip_not_found + project);\n+        } else {\n+          IWorkspace workspace = ResourcesPlugin.getWorkspace();\n+          IFile file = outputFolder.getFile(project + \".zip\");\n+          IProject newProject = workspace.getRoot().getProject(project);\n+          WorkbenchHelper.exportZipFile(newProject, file);\n+        }\n+      }\n+    }\n+  }\n+\n+  protected void checkProject(IProject project) throws CommandLineException {\n+    if (!project.exists()) {\n+      logError(Messages.project + project.getName() + Messages.not_exist);\n+    } else {\n+      try {\n+        project.open(new NullProgressMonitor());\n+      } catch (CoreException exception) {\n+        logError(Messages.unable_open_project + project.getName());\n+      }\n+      List<IFile> melodymodellerFiles = getCapellamodellerFiles(project);\n+      // check that all melodymodeller files are compliant with current Capella version\n+      for (IFile modeller : melodymodellerFiles) {\n+        compliancyCheck(modeller);\n+      }\n+    }\n+  }\n+\n+  /**\n+   * Check that inputs arguments are valid\n+   * \n+   * @throws CommandLineException\n+   */\n+  protected void checkInputs() throws CommandLineException {\n+    if (argHelper.getInputs() == null) {\n+      logger.error(Messages.inputs_mandatory);\n+    } else if (argHelper.getInputs().equals(ALL_ARGUMENT)) {\n+      // /all is accepted as argument\n+    } else {\n+      List<String> inputs = toList(argHelper.getInputs());\n+      for (String input : inputs) {\n+        if (input.endsWith(CapellaResourceHelper.AIRD_FILE_EXTENSION)) {\n+          checkInputAirdFile(input);\n+        } else {\n+          checkInputProject(input);\n+        }\n+      }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDIxODExOA=="}, "originalCommit": {"oid": "a0d6756abf560505d98a7d838a40ccc6ae8da372"}, "originalPosition": 166}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxODI1MjMxOnYy", "diffSide": "RIGHT", "path": "core/plugins/org.polarsys.capella.core.commandline.core/src/org/polarsys/capella/core/commandline/core/DefaultCommandLine.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMDoyOTowOVrOF0JKBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMjoxOTo0N1rOF0Mb5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDIyMDI5NQ==", "bodyText": "Question: Is it necessary to create the output folder as a project and not only as a folder using standard java API?", "url": "https://github.com/eclipse/capella/pull/120#discussion_r390220295", "createdAt": "2020-03-10T10:29:09Z", "author": {"login": "sandupostaru"}, "path": "core/plugins/org.polarsys.capella.core.commandline.core/src/org/polarsys/capella/core/commandline/core/DefaultCommandLine.java", "diffHunk": "@@ -0,0 +1,384 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 THALES GLOBAL SERVICES.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *    Thales - initial API and implementation\n+ *******************************************************************************/\n+package org.polarsys.capella.core.commandline.core;\n+\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.IOException;\n+import java.net.URISyntaxException;\n+import java.net.URL;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Collections;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+\n+import javax.xml.XMLConstants;\n+import javax.xml.parsers.DocumentBuilder;\n+import javax.xml.parsers.DocumentBuilderFactory;\n+import javax.xml.parsers.ParserConfigurationException;\n+import javax.xml.xpath.XPath;\n+import javax.xml.xpath.XPathConstants;\n+import javax.xml.xpath.XPathExpression;\n+import javax.xml.xpath.XPathExpressionException;\n+import javax.xml.xpath.XPathFactory;\n+\n+import org.eclipse.core.resources.IFile;\n+import org.eclipse.core.resources.IFolder;\n+import org.eclipse.core.resources.IProject;\n+import org.eclipse.core.resources.IWorkspace;\n+import org.eclipse.core.resources.ResourcesPlugin;\n+import org.eclipse.core.runtime.CoreException;\n+import org.eclipse.core.runtime.FileLocator;\n+import org.eclipse.core.runtime.NullProgressMonitor;\n+import org.eclipse.core.runtime.Path;\n+import org.eclipse.emf.common.util.URI;\n+import org.eclipse.equinox.app.IApplicationContext;\n+import org.osgi.framework.Bundle;\n+import org.osgi.framework.FrameworkUtil;\n+import org.polarsys.capella.common.tools.report.config.registry.ReportManagerRegistry;\n+import org.polarsys.capella.common.tools.report.util.IReportManagerDefaultComponents;\n+import org.polarsys.capella.core.model.handler.command.CapellaResourceHelper;\n+import org.w3c.dom.Document;\n+import org.w3c.dom.Node;\n+import org.w3c.dom.NodeList;\n+import org.xml.sax.SAXException;\n+\n+public class DefaultCommandLine extends AbstractCommandLine {\n+  public static String ALL_ARGUMENT = \"/all\";\n+\n+  public DefaultCommandLine() {\n+    argHelper = CommandLineArgumentHelper.getInstance();\n+    logger = ReportManagerRegistry.getInstance().subscribe(IReportManagerDefaultComponents.DEFAULT);\n+  }\n+\n+  /**\n+   * {@inheritDoc}\n+   *\n+   * @throws CommandLineException\n+   */\n+  @Override\n+  public void prepare(IApplicationContext context) throws CommandLineException {\n+    // Import projects\n+    importProjects();\n+    // Create output folder\n+    getOrCreateOutputFolder();\n+  }\n+\n+  protected void importProjects() throws CommandLineException {\n+    String projectsToImport = argHelper.getImportProjects();\n+    if (projectsToImport != null) {\n+      try {\n+        importProjects(toList(projectsToImport));\n+      } catch (CoreException exception) {\n+        throw new CommandLineException(exception.getMessage());\n+      }\n+    }\n+  }\n+\n+  @Override\n+  public void postExecute(IApplicationContext context) throws CommandLineException {\n+    exportZips();\n+  }\n+\n+  protected void exportZips() throws CommandLineException {\n+    String projectsToExportZip = argHelper.getExportZips();\n+    if (projectsToExportZip != null) {\n+      if (projectsToExportZip.equals(ALL_ARGUMENT)) {\n+        exportProjectZips(Arrays.stream(ResourcesPlugin.getWorkspace().getRoot().getProjects())\n+            .map(iProject -> iProject.getName()).collect(Collectors.toList()));\n+      } else {\n+        exportProjectZips(toList(projectsToExportZip));\n+      }\n+    }\n+  }\n+\n+  /**\n+   * @param projectsToExportZip\n+   * @throws CoreException\n+   */\n+  protected void exportProjectZips(List<String> projectsToExportZip) throws CommandLineException {\n+    IFolder outputFolder = getOrCreateOutputFolder();\n+    if (outputFolder == null) {\n+      logger.error(Messages.export_zip_no_ouputfolder);\n+    } else {\n+      for (String project : projectsToExportZip) {\n+        Optional<IProject> anyIProject = Arrays.stream(ResourcesPlugin.getWorkspace().getRoot().getProjects())\n+            .filter(iProject -> iProject.getName().equals(project)).findAny();\n+        if (!anyIProject.isPresent()) {\n+          logger.error(Messages.export_zip_not_found + project);\n+        } else {\n+          IWorkspace workspace = ResourcesPlugin.getWorkspace();\n+          IFile file = outputFolder.getFile(project + \".zip\");\n+          IProject newProject = workspace.getRoot().getProject(project);\n+          WorkbenchHelper.exportZipFile(newProject, file);\n+        }\n+      }\n+    }\n+  }\n+\n+  protected void checkProject(IProject project) throws CommandLineException {\n+    if (!project.exists()) {\n+      logError(Messages.project + project.getName() + Messages.not_exist);\n+    } else {\n+      try {\n+        project.open(new NullProgressMonitor());\n+      } catch (CoreException exception) {\n+        logError(Messages.unable_open_project + project.getName());\n+      }\n+      List<IFile> melodymodellerFiles = getCapellamodellerFiles(project);\n+      // check that all melodymodeller files are compliant with current Capella version\n+      for (IFile modeller : melodymodellerFiles) {\n+        compliancyCheck(modeller);\n+      }\n+    }\n+  }\n+\n+  /**\n+   * Check that inputs arguments are valid\n+   * \n+   * @throws CommandLineException\n+   */\n+  protected void checkInputs() throws CommandLineException {\n+    if (argHelper.getInputs() == null) {\n+      logger.error(Messages.inputs_mandatory);\n+    } else if (argHelper.getInputs().equals(ALL_ARGUMENT)) {\n+      // /all is accepted as argument\n+    } else {\n+      List<String> inputs = toList(argHelper.getInputs());\n+      for (String input : inputs) {\n+        if (input.endsWith(CapellaResourceHelper.AIRD_FILE_EXTENSION)) {\n+          checkInputAirdFile(input);\n+        } else {\n+          checkInputProject(input);\n+        }\n+      }\n+    }\n+  }\n+\n+  protected void checkInputProject(String projectPath) throws CommandLineException {\n+    String projectName = getProjectNameFromPath(projectPath);\n+    IProject project = ResourcesPlugin.getWorkspace().getRoot().getProject(projectName);\n+    checkProject(project);\n+  }\n+\n+  protected void checkInputAirdFile(String airdPath) throws CommandLineException {\n+    String projectName = getProjectNameFromPath(airdPath);\n+    IProject project = ResourcesPlugin.getWorkspace().getRoot().getProject(projectName);\n+    checkProject(project);\n+    IFile file = project.getFile(getRelativeFilePath(airdPath));\n+    if (!file.exists()) {\n+      String message = Messages.aird + airdPath + Messages.not_exist;\n+      logError(message);\n+      throw new CommandLineException(message);\n+    }\n+  }\n+\n+  /**\n+   * @param outputFolder\n+   * @throws CommandLineException\n+   */\n+  protected IFolder getOrCreateOutputFolder() throws CommandLineException {\n+    String outputFolder = argHelper.getOutputFolder();\n+    IFolder folder = null;\n+    if (outputFolder != null) {\n+      folder = ResourcesPlugin.getWorkspace().getRoot().getFolder(new Path(outputFolder));\n+\n+      try {\n+        IProject project = folder.getProject();\n+        if (!project.exists()) {\n+          project.create(new NullProgressMonitor());\n+        }\n+\n+        if (!project.isOpen()) {\n+          project.open(new NullProgressMonitor());\n+        }\n+        if (!folder.exists()) {\n+          folder.create(true, true, new NullProgressMonitor());\n+        } else {\n+          logInfo(outputFolder + Messages.already_exist);\n+        }\n+\n+      } catch (CoreException exception) {\n+        StringBuilder message = new StringBuilder(Messages.cannot_create_folder);\n+        logger.error(message.toString(), exception);\n+        throw new CommandLineException(message.toString());\n+      }\n+    }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0d6756abf560505d98a7d838a40ccc6ae8da372"}, "originalPosition": 218}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI3NDAyMQ==", "bodyText": "I also think it's better to use a standard path but outputfolder has always been used by user as a relative folder in an Eclipse project. I thinks it was implemented to be coherent with the HTMLCommandLine (where you choose a folder in a project as output).", "url": "https://github.com/eclipse/capella/pull/120#discussion_r390274021", "createdAt": "2020-03-10T12:19:47Z", "author": {"login": "minhtutonthat"}, "path": "core/plugins/org.polarsys.capella.core.commandline.core/src/org/polarsys/capella/core/commandline/core/DefaultCommandLine.java", "diffHunk": "@@ -0,0 +1,384 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 THALES GLOBAL SERVICES.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *    Thales - initial API and implementation\n+ *******************************************************************************/\n+package org.polarsys.capella.core.commandline.core;\n+\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.IOException;\n+import java.net.URISyntaxException;\n+import java.net.URL;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Collections;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+\n+import javax.xml.XMLConstants;\n+import javax.xml.parsers.DocumentBuilder;\n+import javax.xml.parsers.DocumentBuilderFactory;\n+import javax.xml.parsers.ParserConfigurationException;\n+import javax.xml.xpath.XPath;\n+import javax.xml.xpath.XPathConstants;\n+import javax.xml.xpath.XPathExpression;\n+import javax.xml.xpath.XPathExpressionException;\n+import javax.xml.xpath.XPathFactory;\n+\n+import org.eclipse.core.resources.IFile;\n+import org.eclipse.core.resources.IFolder;\n+import org.eclipse.core.resources.IProject;\n+import org.eclipse.core.resources.IWorkspace;\n+import org.eclipse.core.resources.ResourcesPlugin;\n+import org.eclipse.core.runtime.CoreException;\n+import org.eclipse.core.runtime.FileLocator;\n+import org.eclipse.core.runtime.NullProgressMonitor;\n+import org.eclipse.core.runtime.Path;\n+import org.eclipse.emf.common.util.URI;\n+import org.eclipse.equinox.app.IApplicationContext;\n+import org.osgi.framework.Bundle;\n+import org.osgi.framework.FrameworkUtil;\n+import org.polarsys.capella.common.tools.report.config.registry.ReportManagerRegistry;\n+import org.polarsys.capella.common.tools.report.util.IReportManagerDefaultComponents;\n+import org.polarsys.capella.core.model.handler.command.CapellaResourceHelper;\n+import org.w3c.dom.Document;\n+import org.w3c.dom.Node;\n+import org.w3c.dom.NodeList;\n+import org.xml.sax.SAXException;\n+\n+public class DefaultCommandLine extends AbstractCommandLine {\n+  public static String ALL_ARGUMENT = \"/all\";\n+\n+  public DefaultCommandLine() {\n+    argHelper = CommandLineArgumentHelper.getInstance();\n+    logger = ReportManagerRegistry.getInstance().subscribe(IReportManagerDefaultComponents.DEFAULT);\n+  }\n+\n+  /**\n+   * {@inheritDoc}\n+   *\n+   * @throws CommandLineException\n+   */\n+  @Override\n+  public void prepare(IApplicationContext context) throws CommandLineException {\n+    // Import projects\n+    importProjects();\n+    // Create output folder\n+    getOrCreateOutputFolder();\n+  }\n+\n+  protected void importProjects() throws CommandLineException {\n+    String projectsToImport = argHelper.getImportProjects();\n+    if (projectsToImport != null) {\n+      try {\n+        importProjects(toList(projectsToImport));\n+      } catch (CoreException exception) {\n+        throw new CommandLineException(exception.getMessage());\n+      }\n+    }\n+  }\n+\n+  @Override\n+  public void postExecute(IApplicationContext context) throws CommandLineException {\n+    exportZips();\n+  }\n+\n+  protected void exportZips() throws CommandLineException {\n+    String projectsToExportZip = argHelper.getExportZips();\n+    if (projectsToExportZip != null) {\n+      if (projectsToExportZip.equals(ALL_ARGUMENT)) {\n+        exportProjectZips(Arrays.stream(ResourcesPlugin.getWorkspace().getRoot().getProjects())\n+            .map(iProject -> iProject.getName()).collect(Collectors.toList()));\n+      } else {\n+        exportProjectZips(toList(projectsToExportZip));\n+      }\n+    }\n+  }\n+\n+  /**\n+   * @param projectsToExportZip\n+   * @throws CoreException\n+   */\n+  protected void exportProjectZips(List<String> projectsToExportZip) throws CommandLineException {\n+    IFolder outputFolder = getOrCreateOutputFolder();\n+    if (outputFolder == null) {\n+      logger.error(Messages.export_zip_no_ouputfolder);\n+    } else {\n+      for (String project : projectsToExportZip) {\n+        Optional<IProject> anyIProject = Arrays.stream(ResourcesPlugin.getWorkspace().getRoot().getProjects())\n+            .filter(iProject -> iProject.getName().equals(project)).findAny();\n+        if (!anyIProject.isPresent()) {\n+          logger.error(Messages.export_zip_not_found + project);\n+        } else {\n+          IWorkspace workspace = ResourcesPlugin.getWorkspace();\n+          IFile file = outputFolder.getFile(project + \".zip\");\n+          IProject newProject = workspace.getRoot().getProject(project);\n+          WorkbenchHelper.exportZipFile(newProject, file);\n+        }\n+      }\n+    }\n+  }\n+\n+  protected void checkProject(IProject project) throws CommandLineException {\n+    if (!project.exists()) {\n+      logError(Messages.project + project.getName() + Messages.not_exist);\n+    } else {\n+      try {\n+        project.open(new NullProgressMonitor());\n+      } catch (CoreException exception) {\n+        logError(Messages.unable_open_project + project.getName());\n+      }\n+      List<IFile> melodymodellerFiles = getCapellamodellerFiles(project);\n+      // check that all melodymodeller files are compliant with current Capella version\n+      for (IFile modeller : melodymodellerFiles) {\n+        compliancyCheck(modeller);\n+      }\n+    }\n+  }\n+\n+  /**\n+   * Check that inputs arguments are valid\n+   * \n+   * @throws CommandLineException\n+   */\n+  protected void checkInputs() throws CommandLineException {\n+    if (argHelper.getInputs() == null) {\n+      logger.error(Messages.inputs_mandatory);\n+    } else if (argHelper.getInputs().equals(ALL_ARGUMENT)) {\n+      // /all is accepted as argument\n+    } else {\n+      List<String> inputs = toList(argHelper.getInputs());\n+      for (String input : inputs) {\n+        if (input.endsWith(CapellaResourceHelper.AIRD_FILE_EXTENSION)) {\n+          checkInputAirdFile(input);\n+        } else {\n+          checkInputProject(input);\n+        }\n+      }\n+    }\n+  }\n+\n+  protected void checkInputProject(String projectPath) throws CommandLineException {\n+    String projectName = getProjectNameFromPath(projectPath);\n+    IProject project = ResourcesPlugin.getWorkspace().getRoot().getProject(projectName);\n+    checkProject(project);\n+  }\n+\n+  protected void checkInputAirdFile(String airdPath) throws CommandLineException {\n+    String projectName = getProjectNameFromPath(airdPath);\n+    IProject project = ResourcesPlugin.getWorkspace().getRoot().getProject(projectName);\n+    checkProject(project);\n+    IFile file = project.getFile(getRelativeFilePath(airdPath));\n+    if (!file.exists()) {\n+      String message = Messages.aird + airdPath + Messages.not_exist;\n+      logError(message);\n+      throw new CommandLineException(message);\n+    }\n+  }\n+\n+  /**\n+   * @param outputFolder\n+   * @throws CommandLineException\n+   */\n+  protected IFolder getOrCreateOutputFolder() throws CommandLineException {\n+    String outputFolder = argHelper.getOutputFolder();\n+    IFolder folder = null;\n+    if (outputFolder != null) {\n+      folder = ResourcesPlugin.getWorkspace().getRoot().getFolder(new Path(outputFolder));\n+\n+      try {\n+        IProject project = folder.getProject();\n+        if (!project.exists()) {\n+          project.create(new NullProgressMonitor());\n+        }\n+\n+        if (!project.isOpen()) {\n+          project.open(new NullProgressMonitor());\n+        }\n+        if (!folder.exists()) {\n+          folder.create(true, true, new NullProgressMonitor());\n+        } else {\n+          logInfo(outputFolder + Messages.already_exist);\n+        }\n+\n+      } catch (CoreException exception) {\n+        StringBuilder message = new StringBuilder(Messages.cannot_create_folder);\n+        logger.error(message.toString(), exception);\n+        throw new CommandLineException(message.toString());\n+      }\n+    }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDIyMDI5NQ=="}, "originalCommit": {"oid": "a0d6756abf560505d98a7d838a40ccc6ae8da372"}, "originalPosition": 218}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxODI1ODAyOnYy", "diffSide": "RIGHT", "path": "core/plugins/org.polarsys.capella.core.commandline.core/src/org/polarsys/capella/core/commandline/core/DefaultCommandLine.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMDozMDo1M1rOF0JNlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMDozMDo1M1rOF0JNlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDIyMTIwNQ==", "bodyText": "Cool \ud83d\udc4d", "url": "https://github.com/eclipse/capella/pull/120#discussion_r390221205", "createdAt": "2020-03-10T10:30:53Z", "author": {"login": "sandupostaru"}, "path": "core/plugins/org.polarsys.capella.core.commandline.core/src/org/polarsys/capella/core/commandline/core/DefaultCommandLine.java", "diffHunk": "@@ -0,0 +1,384 @@\n+/*******************************************************************************\n+ * Copyright (c) 2020 THALES GLOBAL SERVICES.\n+ * All rights reserved. This program and the accompanying materials\n+ * are made available under the terms of the Eclipse Public License v1.0\n+ * which accompanies this distribution, and is available at\n+ * http://www.eclipse.org/legal/epl-v10.html\n+ *\n+ * Contributors:\n+ *    Thales - initial API and implementation\n+ *******************************************************************************/\n+package org.polarsys.capella.core.commandline.core;\n+\n+import java.io.File;\n+import java.io.FileInputStream;\n+import java.io.IOException;\n+import java.net.URISyntaxException;\n+import java.net.URL;\n+import java.util.ArrayList;\n+import java.util.Arrays;\n+import java.util.Collections;\n+import java.util.HashSet;\n+import java.util.List;\n+import java.util.Optional;\n+import java.util.Set;\n+import java.util.stream.Collectors;\n+\n+import javax.xml.XMLConstants;\n+import javax.xml.parsers.DocumentBuilder;\n+import javax.xml.parsers.DocumentBuilderFactory;\n+import javax.xml.parsers.ParserConfigurationException;\n+import javax.xml.xpath.XPath;\n+import javax.xml.xpath.XPathConstants;\n+import javax.xml.xpath.XPathExpression;\n+import javax.xml.xpath.XPathExpressionException;\n+import javax.xml.xpath.XPathFactory;\n+\n+import org.eclipse.core.resources.IFile;\n+import org.eclipse.core.resources.IFolder;\n+import org.eclipse.core.resources.IProject;\n+import org.eclipse.core.resources.IWorkspace;\n+import org.eclipse.core.resources.ResourcesPlugin;\n+import org.eclipse.core.runtime.CoreException;\n+import org.eclipse.core.runtime.FileLocator;\n+import org.eclipse.core.runtime.NullProgressMonitor;\n+import org.eclipse.core.runtime.Path;\n+import org.eclipse.emf.common.util.URI;\n+import org.eclipse.equinox.app.IApplicationContext;\n+import org.osgi.framework.Bundle;\n+import org.osgi.framework.FrameworkUtil;\n+import org.polarsys.capella.common.tools.report.config.registry.ReportManagerRegistry;\n+import org.polarsys.capella.common.tools.report.util.IReportManagerDefaultComponents;\n+import org.polarsys.capella.core.model.handler.command.CapellaResourceHelper;\n+import org.w3c.dom.Document;\n+import org.w3c.dom.Node;\n+import org.w3c.dom.NodeList;\n+import org.xml.sax.SAXException;\n+\n+public class DefaultCommandLine extends AbstractCommandLine {\n+  public static String ALL_ARGUMENT = \"/all\";\n+\n+  public DefaultCommandLine() {\n+    argHelper = CommandLineArgumentHelper.getInstance();\n+    logger = ReportManagerRegistry.getInstance().subscribe(IReportManagerDefaultComponents.DEFAULT);\n+  }\n+\n+  /**\n+   * {@inheritDoc}\n+   *\n+   * @throws CommandLineException\n+   */\n+  @Override\n+  public void prepare(IApplicationContext context) throws CommandLineException {\n+    // Import projects\n+    importProjects();\n+    // Create output folder\n+    getOrCreateOutputFolder();\n+  }\n+\n+  protected void importProjects() throws CommandLineException {\n+    String projectsToImport = argHelper.getImportProjects();\n+    if (projectsToImport != null) {\n+      try {\n+        importProjects(toList(projectsToImport));\n+      } catch (CoreException exception) {\n+        throw new CommandLineException(exception.getMessage());\n+      }\n+    }\n+  }\n+\n+  @Override\n+  public void postExecute(IApplicationContext context) throws CommandLineException {\n+    exportZips();\n+  }\n+\n+  protected void exportZips() throws CommandLineException {\n+    String projectsToExportZip = argHelper.getExportZips();\n+    if (projectsToExportZip != null) {\n+      if (projectsToExportZip.equals(ALL_ARGUMENT)) {\n+        exportProjectZips(Arrays.stream(ResourcesPlugin.getWorkspace().getRoot().getProjects())\n+            .map(iProject -> iProject.getName()).collect(Collectors.toList()));\n+      } else {\n+        exportProjectZips(toList(projectsToExportZip));\n+      }\n+    }\n+  }\n+\n+  /**\n+   * @param projectsToExportZip\n+   * @throws CoreException\n+   */\n+  protected void exportProjectZips(List<String> projectsToExportZip) throws CommandLineException {\n+    IFolder outputFolder = getOrCreateOutputFolder();\n+    if (outputFolder == null) {\n+      logger.error(Messages.export_zip_no_ouputfolder);\n+    } else {\n+      for (String project : projectsToExportZip) {\n+        Optional<IProject> anyIProject = Arrays.stream(ResourcesPlugin.getWorkspace().getRoot().getProjects())\n+            .filter(iProject -> iProject.getName().equals(project)).findAny();\n+        if (!anyIProject.isPresent()) {\n+          logger.error(Messages.export_zip_not_found + project);\n+        } else {\n+          IWorkspace workspace = ResourcesPlugin.getWorkspace();\n+          IFile file = outputFolder.getFile(project + \".zip\");\n+          IProject newProject = workspace.getRoot().getProject(project);\n+          WorkbenchHelper.exportZipFile(newProject, file);\n+        }\n+      }\n+    }\n+  }\n+\n+  protected void checkProject(IProject project) throws CommandLineException {\n+    if (!project.exists()) {\n+      logError(Messages.project + project.getName() + Messages.not_exist);\n+    } else {\n+      try {\n+        project.open(new NullProgressMonitor());\n+      } catch (CoreException exception) {\n+        logError(Messages.unable_open_project + project.getName());\n+      }\n+      List<IFile> melodymodellerFiles = getCapellamodellerFiles(project);\n+      // check that all melodymodeller files are compliant with current Capella version\n+      for (IFile modeller : melodymodellerFiles) {\n+        compliancyCheck(modeller);\n+      }\n+    }\n+  }\n+\n+  /**\n+   * Check that inputs arguments are valid\n+   * \n+   * @throws CommandLineException\n+   */\n+  protected void checkInputs() throws CommandLineException {\n+    if (argHelper.getInputs() == null) {\n+      logger.error(Messages.inputs_mandatory);\n+    } else if (argHelper.getInputs().equals(ALL_ARGUMENT)) {\n+      // /all is accepted as argument\n+    } else {\n+      List<String> inputs = toList(argHelper.getInputs());\n+      for (String input : inputs) {\n+        if (input.endsWith(CapellaResourceHelper.AIRD_FILE_EXTENSION)) {\n+          checkInputAirdFile(input);\n+        } else {\n+          checkInputProject(input);\n+        }\n+      }\n+    }\n+  }\n+\n+  protected void checkInputProject(String projectPath) throws CommandLineException {\n+    String projectName = getProjectNameFromPath(projectPath);\n+    IProject project = ResourcesPlugin.getWorkspace().getRoot().getProject(projectName);\n+    checkProject(project);\n+  }\n+\n+  protected void checkInputAirdFile(String airdPath) throws CommandLineException {\n+    String projectName = getProjectNameFromPath(airdPath);\n+    IProject project = ResourcesPlugin.getWorkspace().getRoot().getProject(projectName);\n+    checkProject(project);\n+    IFile file = project.getFile(getRelativeFilePath(airdPath));\n+    if (!file.exists()) {\n+      String message = Messages.aird + airdPath + Messages.not_exist;\n+      logError(message);\n+      throw new CommandLineException(message);\n+    }\n+  }\n+\n+  /**\n+   * @param outputFolder\n+   * @throws CommandLineException\n+   */\n+  protected IFolder getOrCreateOutputFolder() throws CommandLineException {\n+    String outputFolder = argHelper.getOutputFolder();\n+    IFolder folder = null;\n+    if (outputFolder != null) {\n+      folder = ResourcesPlugin.getWorkspace().getRoot().getFolder(new Path(outputFolder));\n+\n+      try {\n+        IProject project = folder.getProject();\n+        if (!project.exists()) {\n+          project.create(new NullProgressMonitor());\n+        }\n+\n+        if (!project.isOpen()) {\n+          project.open(new NullProgressMonitor());\n+        }\n+        if (!folder.exists()) {\n+          folder.create(true, true, new NullProgressMonitor());\n+        } else {\n+          logInfo(outputFolder + Messages.already_exist);\n+        }\n+\n+      } catch (CoreException exception) {\n+        StringBuilder message = new StringBuilder(Messages.cannot_create_folder);\n+        logger.error(message.toString(), exception);\n+        throw new CommandLineException(message.toString());\n+      }\n+    }\n+\n+    return folder;\n+  }\n+\n+  /**\n+   * {@inheritDoc}\n+   */\n+  @Override\n+  public void printHelp() {\n+    printHelp(Collections.emptyList());\n+  }\n+  \n+  protected void printHelp(List<String> hiddenArguments) {\n+    System.out.println(\"*** Applicable arguments for command line***\"); //$NON-NLS-1$\n+    printArgumentsFromTable(\"commonParameters\", true, hiddenArguments);\n+  }\n+\n+  protected void printArgumentsFromTable(String tableId, boolean printTitle, List<String> hiddenArguments) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0d6756abf560505d98a7d838a40ccc6ae8da372"}, "originalPosition": 236}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxODI4NTc2OnYy", "diffSide": "RIGHT", "path": "core/plugins/org.polarsys.capella.core.data.migration/src/org/polarsys/capella/core/data/migration/context/MigrationContext.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMDozOTowNFrOF0Jejg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMDozOTowNFrOF0Jejg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDIyNTU1MA==", "bodyText": "\u26a0\ufe0f\n     this.backUpModel = backupModel;", "url": "https://github.com/eclipse/capella/pull/120#discussion_r390225550", "createdAt": "2020-03-10T10:39:04Z", "author": {"login": "sandupostaru"}, "path": "core/plugins/org.polarsys.capella.core.data.migration/src/org/polarsys/capella/core/data/migration/context/MigrationContext.java", "diffHunk": "@@ -66,6 +68,14 @@ public void setSkipConfirmation(boolean skipConfirmation) {\n     _skipConfirmation = skipConfirmation;\n   }\n \n+  public boolean isBackupModel() {\n+    return backUpModel;\n+  }\n+\n+  public void setBackupModel(boolean backupModel) {\n+    backUpModel = backupModel;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0d6756abf560505d98a7d838a40ccc6ae8da372"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxODUzMzY2OnYy", "diffSide": "RIGHT", "path": "doc/plugins/org.polarsys.capella.commandline.doc/html/19. Command Line Support/19.1. Core Mechanism and Applications.html", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMjowMDoyMlrOF0L33A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMjowMDoyMlrOF0L33A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI2NDc5Ng==", "bodyText": "should be eclipsec.exe instead of capella.exe for all references", "url": "https://github.com/eclipse/capella/pull/120#discussion_r390264796", "createdAt": "2020-03-10T12:00:22Z", "author": {"login": "sandupostaru"}, "path": "doc/plugins/org.polarsys.capella.commandline.doc/html/19. Command Line Support/19.1. Core Mechanism and Applications.html", "diffHunk": "@@ -144,9 +166,8 @@ <h3 id=\"Model_Validation\">Model Validation</h3>\n &lt;CapellaInstallationPath&gt;/capella.exe -nosplash", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a0d6756abf560505d98a7d838a40ccc6ae8da372"}, "originalPosition": 123}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQxODYzMTMzOnYy", "diffSide": "RIGHT", "path": "core/plugins/org.polarsys.capella.core.commandline.core/src/org/polarsys/capella/core/commandline/core/DefaultCommandLine.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMjozMjozN1rOF0Mz9g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxMjozMjozN1rOF0Mz9g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI4MDE4Mg==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/eclipse/capella/pull/120#discussion_r390280182", "createdAt": "2020-03-10T12:32:37Z", "author": {"login": "sandupostaru"}, "path": "core/plugins/org.polarsys.capella.core.commandline.core/src/org/polarsys/capella/core/commandline/core/DefaultCommandLine.java", "diffHunk": "@@ -113,9 +108,10 @@ protected void exportProjectZips(List<String> projectsToExportZip) throws Comman\n     if (outputFolder == null) {\n       logger.error(Messages.export_zip_no_ouputfolder);\n     } else {\n+      IProject[] iProjects = ResourcesPlugin.getWorkspace().getRoot().getProjects();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53f2a461dc2c855e887098fd0eb59f8998f1ca1f"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4302, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}