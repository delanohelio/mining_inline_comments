{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2MDkyNjIz", "number": 127, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMjo0MzoxOFrODnDw6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMjo0Nzo0OFrODnD2pQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMjgyNzI5OnYy", "diffSide": "RIGHT", "path": "core/plugins/org.polarsys.capella.core.sirius.analysis/src/org/polarsys/capella/core/sirius/analysis/preferences/TitleBlockPreferencePage.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMjo0MzoxOFrOF01SDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMjo0MzoxOFrOF01SDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDk0MzI0Ng==", "bodyText": "can put linesNumber += 1 in insertNewEmptyLine.", "url": "https://github.com/eclipse/capella/pull/127#discussion_r390943246", "createdAt": "2020-03-11T12:43:18Z", "author": {"login": "georgiana-ecobici"}, "path": "core/plugins/org.polarsys.capella.core.sirius.analysis/src/org/polarsys/capella/core/sirius/analysis/preferences/TitleBlockPreferencePage.java", "diffHunk": "@@ -208,40 +247,34 @@ private void refreshTableRemoveColumn(int index) {\n     v.setInput(removeSelectedColumn(index));\r\n   }\r\n \r\n-  private void refreshTableAddRows(int index) {\r\n-    rowsNumber += 1;\r\n-    v.setInput(addNewEmptyRow(index));\r\n+  private void refreshTableInsertLines(int index) {\r\n+    linesNumber += 1;\r\n+    v.setInput(insertNewEmptyLine(index));\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd1901407f5956f11b69b9dc86e30a196d1c6a7e"}, "originalPosition": 195}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMjgyODQ2OnYy", "diffSide": "RIGHT", "path": "core/plugins/org.polarsys.capella.core.sirius.analysis/src/org/polarsys/capella/core/sirius/analysis/preferences/TitleBlockPreferencePage.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMjo0MzozNFrOF01Sug==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMjo0MzozNFrOF01Sug==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDk0MzQxOA==", "bodyText": "Can be removed.", "url": "https://github.com/eclipse/capella/pull/127#discussion_r390943418", "createdAt": "2020-03-11T12:43:34Z", "author": {"login": "georgiana-ecobici"}, "path": "core/plugins/org.polarsys.capella.core.sirius.analysis/src/org/polarsys/capella/core/sirius/analysis/preferences/TitleBlockPreferencePage.java", "diffHunk": "@@ -154,38 +177,54 @@ private void createTable(Composite top) {\n     v.getTable().setLayoutData(gridData);\r\n     addMenu(v);\r\n \r\n-    Listener treeListener = new Listener() {\r\n+    Listener tableListener = new Listener() {\r\n       @Override\r\n       public void handleEvent(Event event) {\r\n         switch (event.type) {\r\n-        case SWT.MouseDoubleClick: {\r\n+        case SWT.MouseDown: {\r\n           Point coords = new Point(event.x, event.y);\r\n           ViewerCell cell = v.getCell(coords);\r\n-          int index = cell.getColumnIndex();\r\n-          List<TitleBlockCell> list = (List<TitleBlockCell>) cell.getElement();\r\n-          String name = list.get(index).name;\r\n-          String content = list.get(index).content;\r\n-          TitleBlockDialog dialog = new TitleBlockDialog(getShell());\r\n-          if (content.equals(CONTENT_LOWERCASE)) {\r\n-            dialog.setCurrentName(EMPTY_STRING);\r\n-            dialog.setCurrentContent(EMPTY_STRING);\r\n-          } else {\r\n-            dialog.setCurrentName(name);\r\n-            dialog.setCurrentContent(content);\r\n+          if (cell != null) {\r\n+            int index = cell.getColumnIndex();\r\n+            List<TitleBlockCell> list = (List<TitleBlockCell>) cell.getElement();\r\n+            String content = list.get(index).content;\r\n+            contentText.setSize(content.length() * 10, contentText.getLineHeight());\r\n+            contentText.setText(content);\r\n           }\r\n-          dialog.create();\r\n-          if (dialog.open() == Window.OK) {\r\n-            list.get(index).name = dialog.getName();\r\n-            list.get(index).content = dialog.getContent();\r\n-            cell.setText(dialog.getName());\r\n \r\n+          break;\r\n+        }\r\n+        case SWT.MouseDoubleClick: {\r\n+          Point coords = new Point(event.x, event.y);\r\n+          ViewerCell cell = v.getCell(coords);\r\n+          if (cell != null) {\r\n+            int index = cell.getColumnIndex();\r\n+            List<TitleBlockCell> list = (List<TitleBlockCell>) cell.getElement();\r\n+            String name = list.get(index).name;\r\n+            String content = list.get(index).content;\r\n+            TitleBlockDialog dialog = new TitleBlockDialog(getShell());\r\n+            if (content.equals(CONTENT_LOWERCASE)) {\r\n+              dialog.setCurrentName(EMPTY_STRING);\r\n+              dialog.setCurrentContent(EMPTY_STRING);\r\n+            } else {\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd1901407f5956f11b69b9dc86e30a196d1c6a7e"}, "originalPosition": 154}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMjgyOTk3OnYy", "diffSide": "RIGHT", "path": "core/plugins/org.polarsys.capella.core.sirius.analysis/src/org/polarsys/capella/core/sirius/analysis/preferences/TitleBlockPreferencePage.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMjo0NDowMlrOF01ToA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMjo0NDowMlrOF01ToA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDk0MzY0OA==", "bodyText": "use directely list.get(index).name/content.", "url": "https://github.com/eclipse/capella/pull/127#discussion_r390943648", "createdAt": "2020-03-11T12:44:02Z", "author": {"login": "georgiana-ecobici"}, "path": "core/plugins/org.polarsys.capella.core.sirius.analysis/src/org/polarsys/capella/core/sirius/analysis/preferences/TitleBlockPreferencePage.java", "diffHunk": "@@ -154,38 +177,54 @@ private void createTable(Composite top) {\n     v.getTable().setLayoutData(gridData);\r\n     addMenu(v);\r\n \r\n-    Listener treeListener = new Listener() {\r\n+    Listener tableListener = new Listener() {\r\n       @Override\r\n       public void handleEvent(Event event) {\r\n         switch (event.type) {\r\n-        case SWT.MouseDoubleClick: {\r\n+        case SWT.MouseDown: {\r\n           Point coords = new Point(event.x, event.y);\r\n           ViewerCell cell = v.getCell(coords);\r\n-          int index = cell.getColumnIndex();\r\n-          List<TitleBlockCell> list = (List<TitleBlockCell>) cell.getElement();\r\n-          String name = list.get(index).name;\r\n-          String content = list.get(index).content;\r\n-          TitleBlockDialog dialog = new TitleBlockDialog(getShell());\r\n-          if (content.equals(CONTENT_LOWERCASE)) {\r\n-            dialog.setCurrentName(EMPTY_STRING);\r\n-            dialog.setCurrentContent(EMPTY_STRING);\r\n-          } else {\r\n-            dialog.setCurrentName(name);\r\n-            dialog.setCurrentContent(content);\r\n+          if (cell != null) {\r\n+            int index = cell.getColumnIndex();\r\n+            List<TitleBlockCell> list = (List<TitleBlockCell>) cell.getElement();\r\n+            String content = list.get(index).content;\r\n+            contentText.setSize(content.length() * 10, contentText.getLineHeight());\r\n+            contentText.setText(content);\r\n           }\r\n-          dialog.create();\r\n-          if (dialog.open() == Window.OK) {\r\n-            list.get(index).name = dialog.getName();\r\n-            list.get(index).content = dialog.getContent();\r\n-            cell.setText(dialog.getName());\r\n \r\n+          break;\r\n+        }\r\n+        case SWT.MouseDoubleClick: {\r\n+          Point coords = new Point(event.x, event.y);\r\n+          ViewerCell cell = v.getCell(coords);\r\n+          if (cell != null) {\r\n+            int index = cell.getColumnIndex();\r\n+            List<TitleBlockCell> list = (List<TitleBlockCell>) cell.getElement();\r\n+            String name = list.get(index).name;\r\n+            String content = list.get(index).content;\r\n+            TitleBlockDialog dialog = new TitleBlockDialog(getShell());\r\n+            if (content.equals(CONTENT_LOWERCASE)) {\r\n+              dialog.setCurrentName(EMPTY_STRING);\r\n+              dialog.setCurrentContent(EMPTY_STRING);\r\n+            } else {\r\n+              dialog.setCurrentName(name);\r\n+              dialog.setCurrentContent(content);\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd1901407f5956f11b69b9dc86e30a196d1c6a7e"}, "originalPosition": 156}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQyMjg0MTk3OnYy", "diffSide": "RIGHT", "path": "core/plugins/org.polarsys.capella.core.sirius.analysis/src/org/polarsys/capella/core/sirius/analysis/preferences/TitleBlockPreferencePage.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMjo0Nzo0OFrOF01bDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxMjo0Nzo0OFrOF01bDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDk0NTU1MA==", "bodyText": "can rename it to refreshTableInsertColumns and add columnsNumber += 1 in it.", "url": "https://github.com/eclipse/capella/pull/127#discussion_r390945550", "createdAt": "2020-03-11T12:47:48Z", "author": {"login": "georgiana-ecobici"}, "path": "core/plugins/org.polarsys.capella.core.sirius.analysis/src/org/polarsys/capella/core/sirius/analysis/preferences/TitleBlockPreferencePage.java", "diffHunk": "@@ -414,71 +451,92 @@ private TableViewerColumn createTableViewerColumn(final TableViewer viewer, fina\n   private void addMenu(final TableViewer v) {\r\n     final MenuManager mgr = new MenuManager();\r\n \r\n-    final Action addRow = new Action(ADD_ROW) {\r\n+    final Action insertLine = new Action(INSERT_LINE) {\r\n       @Override\r\n       public void run() {\r\n-        int rowToAdd = v.getTable().getSelectionIndex() + 1;\r\n-        refreshTableAddRows(rowToAdd);\r\n+        int lineToInsert = v.getTable().getSelectionIndex() + 1;\r\n+        if (lineToInsert != 0) {\r\n+          refreshTableInsertLines(lineToInsert);\r\n+        }\r\n       }\r\n     };\r\n \r\n-    final Action addColumn = new Action(ADD_COLUMN) {\r\n+    final Action insertColumn = new Action(INSERT_COLUMN) {\r\n       @Override\r\n       public void run() {\r\n-        createColumn(v, EMPTY_STRING, v.getTable().getColumnCount());\r\n-        columnsNumber += 1;\r\n-        int columnToAdd = v.getColumnViewerEditor().getFocusCell().getColumnIndex() + 1;\r\n-        refreshTableColumns(columnToAdd);\r\n+        if (v.getColumnViewerEditor().getFocusCell() != null) {\r\n+          createColumn(v, EMPTY_STRING, v.getTable().getColumnCount());\r\n+          columnsNumber += 1;\r\n+          int columnToInsert = v.getColumnViewerEditor().getFocusCell().getColumnIndex() + 1;\r\n+          refreshTableColumns(columnToInsert);\r\n+        }\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bd1901407f5956f11b69b9dc86e30a196d1c6a7e"}, "originalPosition": 350}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4308, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}