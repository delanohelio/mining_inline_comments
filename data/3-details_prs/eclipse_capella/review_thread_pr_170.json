{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0MDY0Mzc1", "number": 170, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMDowNjowM1rODrkq_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMDowNjowM1rODrkq_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3MDE2MTg4OnYy", "diffSide": "RIGHT", "path": "core/plugins/org.polarsys.capella.core.ui.search/src/org/polarsys/capella/core/ui/search/CapellaSearchQuery.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMDowNjowM1rOF7_ibw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMDoxMjo0MVrOF7_yqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODQ1MTMxMQ==", "bodyText": "Is it necessary to add the eObj for every line, considering that we add it at line 182 if a match is found ?", "url": "https://github.com/eclipse/capella/pull/170#discussion_r398451311", "createdAt": "2020-03-26T10:06:03Z", "author": {"login": "sandupostaru"}, "path": "core/plugins/org.polarsys.capella.core.ui.search/src/org/polarsys/capella/core/ui/search/CapellaSearchQuery.java", "diffHunk": "@@ -147,16 +147,40 @@ private void search(Pattern pattern, Object element, IProject project) {\n     }\r\n   }\r\n \r\n+  @SuppressWarnings({ \"unchecked\", \"rawtypes\" })\r\n   protected void searchForAttribute(Pattern pattern, IProject project, EObject eObj,\r\n       SearchForAttributeItem attributeItem) {\r\n     if (attributeItem.getAttributeFor(eObj) != null) {\r\n-      String textToSearch = attributeItem.getTextToSearch(eObj);\r\n-      if (isMatchOccurrences(pattern, textToSearch)) {\r\n-        CapellaSearchMatchEntry result = new CapellaSearchMatchEntry(eObj, textToSearch, project,\r\n+      Object textToSearch = attributeItem.getTextToSearch(eObj);\r\n+      if (textToSearch instanceof String) {\r\n+        if (isMatchOccurrences(pattern, (String) textToSearch)) {\r\n+          CapellaSearchMatchEntry result = new CapellaSearchMatchEntry(eObj, (String) textToSearch, project,\r\n+              attributeItem.getAttributeFor(eObj));\r\n+          capellaSearchResult.addMatch(result);\r\n+          capellaSearchResult.getTreeData().addElement(eObj);\r\n+        }\r\n+      } else if (textToSearch instanceof List) {\r\n+        List texts = ((List) textToSearch);\r\n+        CapellaSearchMatchEntry matchEntry = new CapellaSearchMatchEntry(eObj, null, project,\r\n             attributeItem.getAttributeFor(eObj));\r\n-        capellaSearchResult.addMatch(result);\r\n-        // use tree data if we want to display the result as a tree\r\n-        capellaSearchResult.getTreeData().addElement(eObj);\r\n+        boolean matched = false;\r\n+        for (int i = 0; i < texts.size(); i++) {\r\n+          if (texts.get(i) instanceof String) {\r\n+            String text = (String) texts.get(i);\r\n+            if (isMatchOccurrences(pattern, text)) {\r\n+              CapellaSearchMatchEntryLine entryLine = new CapellaSearchMatchEntryLine(eObj, (String) text, project,\r\n+                  matchEntry, i);\r\n+              matchEntry.getEntryLines().add(entryLine);\r\n+              capellaSearchResult.addMatch(entryLine);\r\n+              capellaSearchResult.getTreeData().addElement(eObj);\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99bdb6691d78f3c3c265b26da97775d68139ed9f"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODQ1NTQ2Nw==", "bodyText": "Nice catch. I'll remove it", "url": "https://github.com/eclipse/capella/pull/170#discussion_r398455467", "createdAt": "2020-03-26T10:12:41Z", "author": {"login": "minhtutonthat"}, "path": "core/plugins/org.polarsys.capella.core.ui.search/src/org/polarsys/capella/core/ui/search/CapellaSearchQuery.java", "diffHunk": "@@ -147,16 +147,40 @@ private void search(Pattern pattern, Object element, IProject project) {\n     }\r\n   }\r\n \r\n+  @SuppressWarnings({ \"unchecked\", \"rawtypes\" })\r\n   protected void searchForAttribute(Pattern pattern, IProject project, EObject eObj,\r\n       SearchForAttributeItem attributeItem) {\r\n     if (attributeItem.getAttributeFor(eObj) != null) {\r\n-      String textToSearch = attributeItem.getTextToSearch(eObj);\r\n-      if (isMatchOccurrences(pattern, textToSearch)) {\r\n-        CapellaSearchMatchEntry result = new CapellaSearchMatchEntry(eObj, textToSearch, project,\r\n+      Object textToSearch = attributeItem.getTextToSearch(eObj);\r\n+      if (textToSearch instanceof String) {\r\n+        if (isMatchOccurrences(pattern, (String) textToSearch)) {\r\n+          CapellaSearchMatchEntry result = new CapellaSearchMatchEntry(eObj, (String) textToSearch, project,\r\n+              attributeItem.getAttributeFor(eObj));\r\n+          capellaSearchResult.addMatch(result);\r\n+          capellaSearchResult.getTreeData().addElement(eObj);\r\n+        }\r\n+      } else if (textToSearch instanceof List) {\r\n+        List texts = ((List) textToSearch);\r\n+        CapellaSearchMatchEntry matchEntry = new CapellaSearchMatchEntry(eObj, null, project,\r\n             attributeItem.getAttributeFor(eObj));\r\n-        capellaSearchResult.addMatch(result);\r\n-        // use tree data if we want to display the result as a tree\r\n-        capellaSearchResult.getTreeData().addElement(eObj);\r\n+        boolean matched = false;\r\n+        for (int i = 0; i < texts.size(); i++) {\r\n+          if (texts.get(i) instanceof String) {\r\n+            String text = (String) texts.get(i);\r\n+            if (isMatchOccurrences(pattern, text)) {\r\n+              CapellaSearchMatchEntryLine entryLine = new CapellaSearchMatchEntryLine(eObj, (String) text, project,\r\n+                  matchEntry, i);\r\n+              matchEntry.getEntryLines().add(entryLine);\r\n+              capellaSearchResult.addMatch(entryLine);\r\n+              capellaSearchResult.getTreeData().addElement(eObj);\r", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODQ1MTMxMQ=="}, "originalCommit": {"oid": "99bdb6691d78f3c3c265b26da97775d68139ed9f"}, "originalPosition": 35}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4335, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}