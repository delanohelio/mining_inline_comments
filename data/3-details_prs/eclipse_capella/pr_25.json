{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1ODk4NDcw", "number": 25, "title": "[559416] Robustify and improve user feedback for Capella project migration", "bodyText": "Bug: 559416\nChange-Id: I5c32a5f63f9744984bf79b4b63687bd1f05d673b\nSigned-off-by: Jeremy Aubry jaubry@obeo.fr", "createdAt": "2020-01-22T14:56:16Z", "url": "https://github.com/eclipse/capella/pull/25", "merged": true, "mergeCommit": {"oid": "1213c6fd2bcb7abbc0a1578b882b96e2a1fd48e1"}, "closed": true, "closedAt": "2020-01-29T10:24:52Z", "author": {"login": "jaubry-obeo"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb82-9xAH2gAyMzY1ODk4NDcwOmY3ZGYwZWYxYTAzZmM0MWY2YzE0NWRlZGZmZjJjYzZhNmMxYmIwYjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb9HKIvgFqTM0NzE2NjM3NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f7df0ef1a03fc41f6c145dedfff2cc6a6c1bb0b3", "author": {"user": {"login": "jaubry-obeo", "name": null}}, "url": "https://github.com/eclipse/capella/commit/f7df0ef1a03fc41f6c145dedfff2cc6a6c1bb0b3", "committedDate": "2020-01-22T14:54:02Z", "message": "[559416] Robustify and improve user feedback for Capella project\nmigration\n\nBug: 559416\nChange-Id: I5c32a5f63f9744984bf79b4b63687bd1f05d673b\nSigned-off-by: Jeremy Aubry <jaubry@obeo.fr>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3MTI4NDg3", "url": "https://github.com/eclipse/capella/pull/25#pullrequestreview-347128487", "createdAt": "2020-01-23T08:39:10Z", "commit": {"oid": "f7df0ef1a03fc41f6c145dedfff2cc6a6c1bb0b3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QwODozOToxMVrOFg2Oog==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QwODozOToxMVrOFg2Oog==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTk4NzIzNA==", "bodyText": "CapellaResourceHelper.CAPELLA_MODEL_FILE_EXTENSION", "url": "https://github.com/eclipse/capella/pull/25#discussion_r369987234", "createdAt": "2020-01-23T08:39:11Z", "author": {"login": "pdulth"}, "path": "core/plugins/org.polarsys.capella.core.data.migration/src/org/polarsys/capella/core/data/migration/handlers/ProjectMigrationHandler.java", "diffHunk": "@@ -55,9 +56,33 @@ public Object execute(ExecutionEvent event) throws ExecutionException {\n   }\r\n \r\n   @Override\r\n-  protected boolean isValidSelection(List<Object> selection) {\r\n+  public boolean isValidSelection(List<Object> selection) {\r\n+    // The selection is valid only if each element is an open project with a melodymodeller file inside.\r\n     for (Object select : selection) {\r\n-      if (!(select instanceof IProject)) {\r\n+      if (select instanceof IProject) {\r\n+        IProject project = (IProject) select;\r\n+        if (!project.isOpen()) {\r\n+          // One element is a closed project.\r\n+          return false;\r\n+        }\r\n+          try {\r\n+            boolean hasMelodymodellerFile = false;\r\n+            for (IResource content : project.members()) {\r\n+              if (\"melodymodeller\".equals(content.getFileExtension())) {\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f7df0ef1a03fc41f6c145dedfff2cc6a6c1bb0b3"}, "originalPosition": 26}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "710f3248023e29f156aef77f07aa14cbeb778314", "author": {"user": {"login": "jaubry-obeo", "name": null}}, "url": "https://github.com/eclipse/capella/commit/710f3248023e29f156aef77f07aa14cbeb778314", "committedDate": "2020-01-23T09:13:45Z", "message": "[559416] Robustify and improve user feedback for Capella project\nmigration\n\nBug: 559416\nChange-Id: I0f65ad23e1dec5e0f832438fa4f425d13cdc1107\nSigned-off-by: Jeremy Aubry <jaubry@obeo.fr>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ3MTY2Mzc1", "url": "https://github.com/eclipse/capella/pull/25#pullrequestreview-347166375", "createdAt": "2020-01-23T09:44:43Z", "commit": {"oid": "710f3248023e29f156aef77f07aa14cbeb778314"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1455, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}