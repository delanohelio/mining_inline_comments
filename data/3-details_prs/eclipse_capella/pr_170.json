{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0MDY0Mzc1", "number": 170, "title": "Add the ability to search in list of String", "bodyText": "Change-Id: If2630ab9af762e77519dce9d2579c6ceb59bf4b3\nSigned-off-by: Tu Ton minhtutonthat@gmail.com", "createdAt": "2020-03-26T09:53:05Z", "url": "https://github.com/eclipse/capella/pull/170", "merged": true, "mergeCommit": {"oid": "0bc64a94b0754899c72933bb07f12685cf778cf4"}, "closed": true, "closedAt": "2020-03-26T10:20:44Z", "author": {"login": "minhtutonthat"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRZBYmAH2gAyMzk0MDY0Mzc1Ojk5YmRiNjY5MWQ3OGYzYzNjMjY1YjI2ZGE5Nzc3NWQ2ODEzOWVkOWY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRZV4HgH2gAyMzk0MDY0Mzc1OmU3MjEwMDIxNzI5ZWEwN2E3MjQwODNjNGJiNTEwYzNlN2RkZTg3YTE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "99bdb6691d78f3c3c265b26da97775d68139ed9f", "author": {"user": {"login": "minhtutonthat", "name": "Minh Tu Ton That"}}, "url": "https://github.com/eclipse/capella/commit/99bdb6691d78f3c3c265b26da97775d68139ed9f", "committedDate": "2020-03-26T09:51:56Z", "message": "Add the ability to search in list of String\n\nChange-Id: If2630ab9af762e77519dce9d2579c6ceb59bf4b3\nSigned-off-by: Tu Ton <minhtutonthat@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgxODU5NjA4", "url": "https://github.com/eclipse/capella/pull/170#pullrequestreview-381859608", "createdAt": "2020-03-26T10:06:03Z", "commit": {"oid": "99bdb6691d78f3c3c265b26da97775d68139ed9f"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMDowNjowM1rOF7_ibw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxMDowNjowM1rOF7_ibw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODQ1MTMxMQ==", "bodyText": "Is it necessary to add the eObj for every line, considering that we add it at line 182 if a match is found ?", "url": "https://github.com/eclipse/capella/pull/170#discussion_r398451311", "createdAt": "2020-03-26T10:06:03Z", "author": {"login": "sandupostaru"}, "path": "core/plugins/org.polarsys.capella.core.ui.search/src/org/polarsys/capella/core/ui/search/CapellaSearchQuery.java", "diffHunk": "@@ -147,16 +147,40 @@ private void search(Pattern pattern, Object element, IProject project) {\n     }\r\n   }\r\n \r\n+  @SuppressWarnings({ \"unchecked\", \"rawtypes\" })\r\n   protected void searchForAttribute(Pattern pattern, IProject project, EObject eObj,\r\n       SearchForAttributeItem attributeItem) {\r\n     if (attributeItem.getAttributeFor(eObj) != null) {\r\n-      String textToSearch = attributeItem.getTextToSearch(eObj);\r\n-      if (isMatchOccurrences(pattern, textToSearch)) {\r\n-        CapellaSearchMatchEntry result = new CapellaSearchMatchEntry(eObj, textToSearch, project,\r\n+      Object textToSearch = attributeItem.getTextToSearch(eObj);\r\n+      if (textToSearch instanceof String) {\r\n+        if (isMatchOccurrences(pattern, (String) textToSearch)) {\r\n+          CapellaSearchMatchEntry result = new CapellaSearchMatchEntry(eObj, (String) textToSearch, project,\r\n+              attributeItem.getAttributeFor(eObj));\r\n+          capellaSearchResult.addMatch(result);\r\n+          capellaSearchResult.getTreeData().addElement(eObj);\r\n+        }\r\n+      } else if (textToSearch instanceof List) {\r\n+        List texts = ((List) textToSearch);\r\n+        CapellaSearchMatchEntry matchEntry = new CapellaSearchMatchEntry(eObj, null, project,\r\n             attributeItem.getAttributeFor(eObj));\r\n-        capellaSearchResult.addMatch(result);\r\n-        // use tree data if we want to display the result as a tree\r\n-        capellaSearchResult.getTreeData().addElement(eObj);\r\n+        boolean matched = false;\r\n+        for (int i = 0; i < texts.size(); i++) {\r\n+          if (texts.get(i) instanceof String) {\r\n+            String text = (String) texts.get(i);\r\n+            if (isMatchOccurrences(pattern, text)) {\r\n+              CapellaSearchMatchEntryLine entryLine = new CapellaSearchMatchEntryLine(eObj, (String) text, project,\r\n+                  matchEntry, i);\r\n+              matchEntry.getEntryLines().add(entryLine);\r\n+              capellaSearchResult.addMatch(entryLine);\r\n+              capellaSearchResult.getTreeData().addElement(eObj);\r", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "99bdb6691d78f3c3c265b26da97775d68139ed9f"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7210021729ea07a724083c4bb510c3e7dde87a1", "author": {"user": {"login": "minhtutonthat", "name": "Minh Tu Ton That"}}, "url": "https://github.com/eclipse/capella/commit/e7210021729ea07a724083c4bb510c3e7dde87a1", "committedDate": "2020-03-26T10:14:19Z", "message": "Add the ability to search in list of String\n- Remove useless addElement to search result\n\nChange-Id: I7af7ffb971ee4c23f2c1344488ccf7e4fe2ee347\nSigned-off-by: Tu Ton <minhtutonthat@gmail.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1444, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}