{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc3NTc2NDE5", "number": 581, "title": "Fix file upload exception", "bodyText": "\u4e34\u65f6\u89e3\u51b3\u6587\u4ef6\u4e0a\u4f20\u8fc7\u7a0b\u4e2d\uff0c\u7531\u4e8e undertow \u542f\u52a8\u65f6\u6240\u521b\u5efa\u7684\u4e34\u65f6\u6587\u4ef6\u5939\u88ab\u5220\u9664\u5bfc\u81f4\u65e0\u6cd5\u521b\u5efa\u4e34\u65f6\u6587\u4ef6\u7684\u9519\u8bef\u3002\nResolved #521", "createdAt": "2020-02-20T06:34:31Z", "url": "https://github.com/halo-dev/halo/pull/581", "merged": true, "mergeCommit": {"oid": "50af1ec1aa1f401d640a7b92c325887c04eddb87"}, "closed": true, "closedAt": "2020-02-20T06:47:58Z", "author": {"login": "JohnNiang"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcEGe2DAH2gAyMzc3NTc2NDE5OjNhODI4MGZiODlkNzgxMTY3NmMyNjc3ODY1YjZjMDQ1YTZiMGU0Yjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcGFWiNAH2gAyMzc3NTc2NDE5OmU5NTZiNjJjYmI4NzkzNWIyNjM1MTcwN2M3Y2ZmODI2ZGZkNjQ3N2M=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3a8280fb89d7811676c2677865b6c045a6b0e4b7", "author": {"user": {"login": "JohnNiang", "name": "John Niang"}}, "url": "https://github.com/halo-dev/halo/commit/3a8280fb89d7811676c2677865b6c045a6b0e4b7", "committedDate": "2020-02-14T02:54:54Z", "message": "Refactor FileHandler and related implementations"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9f870b10ba7a2ecfd953c467477506f2f0cdcf3", "author": {"user": {"login": "JohnNiang", "name": "John Niang"}}, "url": "https://github.com/halo-dev/halo/commit/e9f870b10ba7a2ecfd953c467477506f2f0cdcf3", "committedDate": "2020-02-14T03:15:07Z", "message": "Add more friendly error throw"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1356a3a4dd53c16c7942b0482b02e2116bb04a6d", "author": {"user": {"login": "JohnNiang", "name": "John Niang"}}, "url": "https://github.com/halo-dev/halo/commit/1356a3a4dd53c16c7942b0482b02e2116bb04a6d", "committedDate": "2020-02-20T06:29:48Z", "message": "Make tmp directory as default location for multipart file"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNjYwNzg3", "url": "https://github.com/halo-dev/halo/pull/581#pullrequestreview-361660787", "createdAt": "2020-02-20T06:35:53Z", "commit": {"oid": "1356a3a4dd53c16c7942b0482b02e2116bb04a6d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwNjozNTo1M1rOFsHacw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwNjozNTo1M1rOFsHacw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgwMzEyMw==", "bodyText": "\u8fd9\u91cc\u5efa\u8bae\u63d0\u793a\u4e2d\u6587\u54e6\uff0c\u80fd\u5728\u540e\u53f0\u7528 $message \u63d0\u793a\u7684\u5efa\u8bae\u90fd\u7528\u4e2d\u6587\u3002", "url": "https://github.com/halo-dev/halo/pull/581#discussion_r381803123", "createdAt": "2020-02-20T06:35:53Z", "author": {"login": "ruibaby"}, "path": "src/main/java/run/halo/app/handler/file/AliOssFileHandler.java", "diffHunk": "@@ -116,19 +116,13 @@ public UploadResult upload(MultipartFile file) {\n                 }\n             }\n \n+            log.info(\"Uploaded file: [{}] successfully\", file.getOriginalFilename());\n             return uploadResult;\n         } catch (Exception e) {\n-            e.printStackTrace();\n+            throw new FileOperationException(\"Failed to upload file to Ali OSS\", e).setErrorData(file.getOriginalFilename());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1356a3a4dd53c16c7942b0482b02e2116bb04a6d"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYxNjYxODMx", "url": "https://github.com/halo-dev/halo/pull/581#pullrequestreview-361661831", "createdAt": "2020-02-20T06:39:16Z", "commit": {"oid": "1356a3a4dd53c16c7942b0482b02e2116bb04a6d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwNjozOToxNlrOFsHhWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQwNjozOToxNlrOFsHhWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgwNDg4OA==", "bodyText": "\u5728\u6ca1\u5b9e\u73b0\u56fd\u9645\u5316\u4e4b\u524d\u3002", "url": "https://github.com/halo-dev/halo/pull/581#discussion_r381804888", "createdAt": "2020-02-20T06:39:16Z", "author": {"login": "ruibaby"}, "path": "src/main/java/run/halo/app/handler/file/AliOssFileHandler.java", "diffHunk": "@@ -116,19 +116,13 @@ public UploadResult upload(MultipartFile file) {\n                 }\n             }\n \n+            log.info(\"Uploaded file: [{}] successfully\", file.getOriginalFilename());\n             return uploadResult;\n         } catch (Exception e) {\n-            e.printStackTrace();\n+            throw new FileOperationException(\"Failed to upload file to Ali OSS\", e).setErrorData(file.getOriginalFilename());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTgwMzEyMw=="}, "originalCommit": {"oid": "1356a3a4dd53c16c7942b0482b02e2116bb04a6d"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e956b62cbb87935b26351707c7cff826dfd6477c", "author": {"user": {"login": "JohnNiang", "name": "John Niang"}}, "url": "https://github.com/halo-dev/halo/commit/e956b62cbb87935b26351707c7cff826dfd6477c", "committedDate": "2020-02-20T06:43:46Z", "message": "Change error message in Chinese"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4228, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}