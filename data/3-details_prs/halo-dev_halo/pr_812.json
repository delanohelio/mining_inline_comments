{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDExNTIzOTU5", "number": 812, "title": "\u6392\u5e8f\u4f7f\u7528Comparator\u9759\u6001\u65b9\u6cd5\u5b9e\u73b0", "bodyText": "\u6392\u5e8f\u4f7f\u7528Comparator\u9759\u6001\u65b9\u6cd5\u5b9e\u73b0", "createdAt": "2020-04-30T13:53:58Z", "url": "https://github.com/halo-dev/halo/pull/812", "merged": true, "mergeCommit": {"oid": "36b3a2d3b4f37fc6f45a02169de8d2483e91722d"}, "closed": true, "closedAt": "2020-04-30T14:25:38Z", "author": {"login": "liaozan"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcctbebAH2gAyNDExNTIzOTU5OmNhODg2MTkzYmI3NWE4NWI5Mzk4YTU1ZjM0NTUzNzAyZDA3YmU4Yjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcct5s_gFqTQwMzU3MjAxMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ca886193bb75a85b9398a55f34553702d07be8b9", "author": {"user": {"login": "liaozan", "name": null}}, "url": "https://github.com/halo-dev/halo/commit/ca886193bb75a85b9398a55f34553702d07be8b9", "committedDate": "2020-04-30T13:51:42Z", "message": "\u6392\u5e8f\u4f7f\u7528Comparator\u9759\u6001\u65b9\u6cd5\u5b9e\u73b0"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzNTUyMjY0", "url": "https://github.com/halo-dev/halo/pull/812#pullrequestreview-403552264", "createdAt": "2020-04-30T14:03:59Z", "commit": {"oid": "ca886193bb75a85b9398a55f34553702d07be8b9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxNDowMzo1OVrOGOq0xQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxNDowMzo1OVrOGOq0xQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODAzNDg4NQ==", "bodyText": "\u8fd9\u91cc\u7684\u6392\u5e8f\u53ef\u80fd\u548c\u672c\u8eab\u7684\u6392\u5e8f\u76f8\u53cd\uff0c\u4e0d\u77e5\u9053\u662f\u5426\u7b26\u5408\u9884\u671f\u3002\u5bb9\u6211\u60f3\u60f3\u3002", "url": "https://github.com/halo-dev/halo/pull/812#discussion_r418034885", "createdAt": "2020-04-30T14:03:59Z", "author": {"login": "JohnNiang"}, "path": "src/main/java/run/halo/app/service/impl/BackupServiceImpl.java", "diffHunk": "@@ -190,17 +191,10 @@ public BackupDTO backupWorkDirectory() {\n         // Build backup dto\n         try (Stream<Path> subPathStream = Files.list(backupParentPath)) {\n             return subPathStream\n-                .filter(backupPath -> StringUtils.startsWithIgnoreCase(backupPath.getFileName().toString(), HaloConst.HALO_BACKUP_PREFIX))\n-                .map(backupPath -> buildBackupDto(BACKUP_RESOURCE_BASE_URI, backupPath))\n-                .sorted((leftBackup, rightBackup) -> {\n-                    // Sort the result\n-                    if (leftBackup.getUpdateTime() < rightBackup.getUpdateTime()) {\n-                        return 1;\n-                    } else if (leftBackup.getUpdateTime() > rightBackup.getUpdateTime()) {\n-                        return -1;\n-                    }\n-                    return 0;\n-                }).collect(Collectors.toList());\n+                    .filter(backupPath -> StringUtils.startsWithIgnoreCase(backupPath.getFileName().toString(), HaloConst.HALO_BACKUP_PREFIX))\n+                    .map(backupPath -> buildBackupDto(BACKUP_RESOURCE_BASE_URI, backupPath))\n+                    .sorted(Comparator.comparingLong(BackupDTO::getUpdateTime))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ca886193bb75a85b9398a55f34553702d07be8b9"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b5c887fd637e9e86ff41ea85947435eae9db13e3", "author": {"user": {"login": "liaozan", "name": null}}, "url": "https://github.com/halo-dev/halo/commit/b5c887fd637e9e86ff41ea85947435eae9db13e3", "committedDate": "2020-04-30T14:16:57Z", "message": "\u4fee\u590d\u6392\u5e8f\u903b\u8f91\u9519\u8bef"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "657a5781f6e4399012dd6db221cd039dd39bf71a", "author": {"user": {"login": "liaozan", "name": null}}, "url": "https://github.com/halo-dev/halo/commit/657a5781f6e4399012dd6db221cd039dd39bf71a", "committedDate": "2020-04-30T14:21:27Z", "message": "fix compile error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzNTY5ODg1", "url": "https://github.com/halo-dev/halo/pull/812#pullrequestreview-403569885", "createdAt": "2020-04-30T14:22:38Z", "commit": {"oid": "b5c887fd637e9e86ff41ea85947435eae9db13e3"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxNDoyMjozOFrOGOro8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxNDoyMjozOFrOGOro8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODA0ODI0MQ==", "bodyText": "\u4f60\u53ef\u80fd\u5c06 Pattern \u63d0\u53d6\u5230\u4e86 DateTimeUtils\uff0c\u4f46\u662f\u5fd8\u8bb0\u6dfb\u52a0\u5230 Git \u4e86\u3002", "url": "https://github.com/halo-dev/halo/pull/812#discussion_r418048241", "createdAt": "2020-04-30T14:22:38Z", "author": {"login": "JohnNiang"}, "path": "src/main/java/run/halo/app/service/impl/BackupServiceImpl.java", "diffHunk": "@@ -285,8 +286,8 @@ public BackupDTO exportData() {\n \n         try {\n             String haloDataFileName = HaloConst.HALO_DATA_EXPORT_PREFIX +\n-                LocalDateTime.now().format(DateTimeFormatter.ofPattern(\"yyyy-MM-dd-HH-mm-ss-\")) +\n-                IdUtil.simpleUUID().hashCode() + \".json\";\n+                    LocalDateTime.now().format(DateTimeUtils.HORIZONTAL_LINE_DATETIME_FORMATTER) +", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b5c887fd637e9e86ff41ea85947435eae9db13e3"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzNTcyMDEy", "url": "https://github.com/halo-dev/halo/pull/812#pullrequestreview-403572012", "createdAt": "2020-04-30T14:24:43Z", "commit": {"oid": "657a5781f6e4399012dd6db221cd039dd39bf71a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4179, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}