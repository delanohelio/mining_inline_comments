{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5ODkyNzc2", "number": 538, "title": "feat: change themes assets base path", "bodyText": "\u4fee\u6539\uff1a\n\n\u4fee\u6539\u4e3b\u9898\u8d44\u6e90\u6587\u4ef6\u7684\u6839\u76ee\u5f55\uff0c\u539f\u6765\u4e3a /**\uff0c\u53d8\u66f4\u4e3a /themes/**\u3002\n\n\u65b0\u589e\uff1a\n\n\u65b0\u589e\u4e00\u4e2a\u53d8\u91cf\u4ee3\u8868\u539f\u6765\u7684 static\uff0c\u517c\u5bb9\u539f\u6765\u7684\u4e3b\u9898\uff0c\u540e\u7eed\u53ef\u80fd\u7684\u8bdd\uff0c\u53ef\u4ee5\u53bb\u6389\u539f\u6765\u7684 static \u53d8\u91cf\u3002", "createdAt": "2020-02-01T12:20:15Z", "url": "https://github.com/halo-dev/halo/pull/538", "merged": true, "mergeCommit": {"oid": "e40de371d12a0642e3ab36ec1559e43afe612b81"}, "closed": true, "closedAt": "2020-02-01T13:07:59Z", "author": {"login": "ruibaby"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcACnSIAH2gAyMzY5ODkyNzc2OjQyNzllNmExN2YwYjBmM2I4ZDU3NDMyMDIyNTgyOTg2MGNkOWFkNjE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcADcsGAFqTM1MTg4MzcwNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4279e6a17f0b0f3b8d574320225829860cd9ad61", "author": {"user": {"login": "ruibaby", "name": "Ryan Wang"}}, "url": "https://github.com/halo-dev/halo/commit/4279e6a17f0b0f3b8d574320225829860cd9ad61", "committedDate": "2020-02-01T12:08:48Z", "message": "feat: change theme resources base path."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f85a849d41695efda288ccaeb85edc4851c51935", "author": {"user": {"login": "ruibaby", "name": "Ryan Wang"}}, "url": "https://github.com/halo-dev/halo/commit/f85a849d41695efda288ccaeb85edc4851c51935", "committedDate": "2020-02-01T12:16:14Z", "message": "feat: add new variable about theme base path."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxODgyMTI3", "url": "https://github.com/halo-dev/halo/pull/538#pullrequestreview-351882127", "createdAt": "2020-02-01T12:21:10Z", "commit": {"oid": "f85a849d41695efda288ccaeb85edc4851c51935"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQxMjoyMToxMFrOFkdjMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQxMjoyMToxMFrOFkdjMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc3NzIwMA==", "bodyText": "\u8fd9\u4e2a\u53d8\u91cf\u540d\u53ef\u4ee5\u518d\u5546\u91cf\u4e0b\u3002", "url": "https://github.com/halo-dev/halo/pull/538#discussion_r373777200", "createdAt": "2020-02-01T12:21:10Z", "author": {"login": "ruibaby"}, "path": "src/main/java/run/halo/app/listener/freemarker/FreemarkerConfigAwareListener.java", "diffHunk": "@@ -103,8 +103,15 @@ private void loadThemeConfig() throws TemplateModelException {\n \n         Boolean enabledAbsolutePath = optionService.getByPropertyOrDefault(OtherProperties.GLOBAL_ABSOLUTE_PATH_ENABLED, Boolean.class, true);\n \n+        String themeBasePath = (enabledAbsolutePath ? optionService.getBlogBaseUrl() : \"\") + \"/themes/\" + activatedTheme.getFolderName();\n+\n         configuration.setSharedVariable(\"theme\", activatedTheme);\n-        configuration.setSharedVariable(\"static\", (enabledAbsolutePath ? optionService.getBlogBaseUrl() : \"\") + \"/\" + activatedTheme.getFolderName());\n+\n+        // TODO: It will be removed in future versions\n+        configuration.setSharedVariable(\"static\", themeBasePath);\n+\n+        configuration.setSharedVariable(\"theme_base\", themeBasePath);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f85a849d41695efda288ccaeb85edc4851c51935"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxODgyMzEy", "url": "https://github.com/halo-dev/halo/pull/538#pullrequestreview-351882312", "createdAt": "2020-02-01T12:26:13Z", "commit": {"oid": "f85a849d41695efda288ccaeb85edc4851c51935"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxODgyNTg3", "url": "https://github.com/halo-dev/halo/pull/538#pullrequestreview-351882587", "createdAt": "2020-02-01T12:35:15Z", "commit": {"oid": "4279e6a17f0b0f3b8d574320225829860cd9ad61"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQxMjozNToxNVrOFkdlhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQxMjozNToxNVrOFkdlhg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc3Nzc5OA==", "bodyText": "\u8fd9\u91cc\u82e5\u662f\u53bb\u6389\u4e86\uff0c\u662f\u5426\u4f1a\u9020\u6210\u4e0d\u517c\u5bb9\u5462\uff1f", "url": "https://github.com/halo-dev/halo/pull/538#discussion_r373777798", "createdAt": "2020-02-01T12:35:15Z", "author": {"login": "JohnNiang"}, "path": "src/main/java/run/halo/app/config/WebMvcAutoConfiguration.java", "diffHunk": "@@ -90,12 +90,17 @@ public void addArgumentResolvers(List<HandlerMethodArgumentResolver> resolvers)\n     @Override\n     public void addResourceHandlers(ResourceHandlerRegistry registry) {\n         String workDir = FILE_PROTOCOL + ensureSuffix(haloProperties.getWorkDir(), FILE_SEPARATOR);\n+\n+        // register /** resource handler.\n         registry.addResourceHandler(\"/**\")\n-                .addResourceLocations(workDir + \"templates/themes/\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4279e6a17f0b0f3b8d574320225829860cd9ad61"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUxODgzNzA1", "url": "https://github.com/halo-dev/halo/pull/538#pullrequestreview-351883705", "createdAt": "2020-02-01T13:07:08Z", "commit": {"oid": "f85a849d41695efda288ccaeb85edc4851c51935"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4212, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}