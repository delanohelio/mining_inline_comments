{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY5ODkyNzc2", "number": 538, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQxMjoyMToxMFrODcat0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQxMjozNToxNVrODcavsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMTI0NDMyOnYy", "diffSide": "RIGHT", "path": "src/main/java/run/halo/app/listener/freemarker/FreemarkerConfigAwareListener.java", "isResolved": true, "comments": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQxMjoyMToxMFrOFkdjMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMlQwMzo1NjoyNVrOFkf_1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc3NzIwMA==", "bodyText": "\u8fd9\u4e2a\u53d8\u91cf\u540d\u53ef\u4ee5\u518d\u5546\u91cf\u4e0b\u3002", "url": "https://github.com/halo-dev/halo/pull/538#discussion_r373777200", "createdAt": "2020-02-01T12:21:10Z", "author": {"login": "ruibaby"}, "path": "src/main/java/run/halo/app/listener/freemarker/FreemarkerConfigAwareListener.java", "diffHunk": "@@ -103,8 +103,15 @@ private void loadThemeConfig() throws TemplateModelException {\n \n         Boolean enabledAbsolutePath = optionService.getByPropertyOrDefault(OtherProperties.GLOBAL_ABSOLUTE_PATH_ENABLED, Boolean.class, true);\n \n+        String themeBasePath = (enabledAbsolutePath ? optionService.getBlogBaseUrl() : \"\") + \"/themes/\" + activatedTheme.getFolderName();\n+\n         configuration.setSharedVariable(\"theme\", activatedTheme);\n-        configuration.setSharedVariable(\"static\", (enabledAbsolutePath ? optionService.getBlogBaseUrl() : \"\") + \"/\" + activatedTheme.getFolderName());\n+\n+        // TODO: It will be removed in future versions\n+        configuration.setSharedVariable(\"static\", themeBasePath);\n+\n+        configuration.setSharedVariable(\"theme_base\", themeBasePath);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f85a849d41695efda288ccaeb85edc4851c51935"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc3NzQ1Ng==", "bodyText": "\u54ea\u4e2a\u53d8\u91cf\u540d", "url": "https://github.com/halo-dev/halo/pull/538#discussion_r373777456", "createdAt": "2020-02-01T12:27:15Z", "author": {"login": "guqing"}, "path": "src/main/java/run/halo/app/listener/freemarker/FreemarkerConfigAwareListener.java", "diffHunk": "@@ -103,8 +103,15 @@ private void loadThemeConfig() throws TemplateModelException {\n \n         Boolean enabledAbsolutePath = optionService.getByPropertyOrDefault(OtherProperties.GLOBAL_ABSOLUTE_PATH_ENABLED, Boolean.class, true);\n \n+        String themeBasePath = (enabledAbsolutePath ? optionService.getBlogBaseUrl() : \"\") + \"/themes/\" + activatedTheme.getFolderName();\n+\n         configuration.setSharedVariable(\"theme\", activatedTheme);\n-        configuration.setSharedVariable(\"static\", (enabledAbsolutePath ? optionService.getBlogBaseUrl() : \"\") + \"/\" + activatedTheme.getFolderName());\n+\n+        // TODO: It will be removed in future versions\n+        configuration.setSharedVariable(\"static\", themeBasePath);\n+\n+        configuration.setSharedVariable(\"theme_base\", themeBasePath);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc3NzIwMA=="}, "originalCommit": {"oid": "f85a849d41695efda288ccaeb85edc4851c51935"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc3NzQ4OQ==", "bodyText": "theme_base", "url": "https://github.com/halo-dev/halo/pull/538#discussion_r373777489", "createdAt": "2020-02-01T12:27:59Z", "author": {"login": "ruibaby"}, "path": "src/main/java/run/halo/app/listener/freemarker/FreemarkerConfigAwareListener.java", "diffHunk": "@@ -103,8 +103,15 @@ private void loadThemeConfig() throws TemplateModelException {\n \n         Boolean enabledAbsolutePath = optionService.getByPropertyOrDefault(OtherProperties.GLOBAL_ABSOLUTE_PATH_ENABLED, Boolean.class, true);\n \n+        String themeBasePath = (enabledAbsolutePath ? optionService.getBlogBaseUrl() : \"\") + \"/themes/\" + activatedTheme.getFolderName();\n+\n         configuration.setSharedVariable(\"theme\", activatedTheme);\n-        configuration.setSharedVariable(\"static\", (enabledAbsolutePath ? optionService.getBlogBaseUrl() : \"\") + \"/\" + activatedTheme.getFolderName());\n+\n+        // TODO: It will be removed in future versions\n+        configuration.setSharedVariable(\"static\", themeBasePath);\n+\n+        configuration.setSharedVariable(\"theme_base\", themeBasePath);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc3NzIwMA=="}, "originalCommit": {"oid": "f85a849d41695efda288ccaeb85edc4851c51935"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc3NzY4Nw==", "bodyText": "\u6211\u89c9\u5f97theme_base_path\u901a\u4fd7\u70b9", "url": "https://github.com/halo-dev/halo/pull/538#discussion_r373777687", "createdAt": "2020-02-01T12:31:48Z", "author": {"login": "guqing"}, "path": "src/main/java/run/halo/app/listener/freemarker/FreemarkerConfigAwareListener.java", "diffHunk": "@@ -103,8 +103,15 @@ private void loadThemeConfig() throws TemplateModelException {\n \n         Boolean enabledAbsolutePath = optionService.getByPropertyOrDefault(OtherProperties.GLOBAL_ABSOLUTE_PATH_ENABLED, Boolean.class, true);\n \n+        String themeBasePath = (enabledAbsolutePath ? optionService.getBlogBaseUrl() : \"\") + \"/themes/\" + activatedTheme.getFolderName();\n+\n         configuration.setSharedVariable(\"theme\", activatedTheme);\n-        configuration.setSharedVariable(\"static\", (enabledAbsolutePath ? optionService.getBlogBaseUrl() : \"\") + \"/\" + activatedTheme.getFolderName());\n+\n+        // TODO: It will be removed in future versions\n+        configuration.setSharedVariable(\"static\", themeBasePath);\n+\n+        configuration.setSharedVariable(\"theme_base\", themeBasePath);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc3NzIwMA=="}, "originalCommit": {"oid": "f85a849d41695efda288ccaeb85edc4851c51935"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc3Nzg2OQ==", "bodyText": "\u592a\u957f\u4e86\uff0c\u5bf9\u4e3b\u9898\u5f00\u53d1\u8005\u4e0d\u53cb\u597d", "url": "https://github.com/halo-dev/halo/pull/538#discussion_r373777869", "createdAt": "2020-02-01T12:36:36Z", "author": {"login": "ruibaby"}, "path": "src/main/java/run/halo/app/listener/freemarker/FreemarkerConfigAwareListener.java", "diffHunk": "@@ -103,8 +103,15 @@ private void loadThemeConfig() throws TemplateModelException {\n \n         Boolean enabledAbsolutePath = optionService.getByPropertyOrDefault(OtherProperties.GLOBAL_ABSOLUTE_PATH_ENABLED, Boolean.class, true);\n \n+        String themeBasePath = (enabledAbsolutePath ? optionService.getBlogBaseUrl() : \"\") + \"/themes/\" + activatedTheme.getFolderName();\n+\n         configuration.setSharedVariable(\"theme\", activatedTheme);\n-        configuration.setSharedVariable(\"static\", (enabledAbsolutePath ? optionService.getBlogBaseUrl() : \"\") + \"/\" + activatedTheme.getFolderName());\n+\n+        // TODO: It will be removed in future versions\n+        configuration.setSharedVariable(\"static\", themeBasePath);\n+\n+        configuration.setSharedVariable(\"theme_base\", themeBasePath);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc3NzIwMA=="}, "originalCommit": {"oid": "f85a849d41695efda288ccaeb85edc4851c51935"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc3Nzk4MA==", "bodyText": "\u4e5f\u6709\u9053\u7406\ud83d\ude02", "url": "https://github.com/halo-dev/halo/pull/538#discussion_r373777980", "createdAt": "2020-02-01T12:38:53Z", "author": {"login": "guqing"}, "path": "src/main/java/run/halo/app/listener/freemarker/FreemarkerConfigAwareListener.java", "diffHunk": "@@ -103,8 +103,15 @@ private void loadThemeConfig() throws TemplateModelException {\n \n         Boolean enabledAbsolutePath = optionService.getByPropertyOrDefault(OtherProperties.GLOBAL_ABSOLUTE_PATH_ENABLED, Boolean.class, true);\n \n+        String themeBasePath = (enabledAbsolutePath ? optionService.getBlogBaseUrl() : \"\") + \"/themes/\" + activatedTheme.getFolderName();\n+\n         configuration.setSharedVariable(\"theme\", activatedTheme);\n-        configuration.setSharedVariable(\"static\", (enabledAbsolutePath ? optionService.getBlogBaseUrl() : \"\") + \"/\" + activatedTheme.getFolderName());\n+\n+        // TODO: It will be removed in future versions\n+        configuration.setSharedVariable(\"static\", themeBasePath);\n+\n+        configuration.setSharedVariable(\"theme_base\", themeBasePath);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc3NzIwMA=="}, "originalCommit": {"oid": "f85a849d41695efda288ccaeb85edc4851c51935"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc3ODM2MQ==", "bodyText": "\u6211\u8ba4\u4e3a\u8bed\u4e49\u66f4\u52a0\u91cd\u8981\u3002", "url": "https://github.com/halo-dev/halo/pull/538#discussion_r373778361", "createdAt": "2020-02-01T12:47:07Z", "author": {"login": "JohnNiang"}, "path": "src/main/java/run/halo/app/listener/freemarker/FreemarkerConfigAwareListener.java", "diffHunk": "@@ -103,8 +103,15 @@ private void loadThemeConfig() throws TemplateModelException {\n \n         Boolean enabledAbsolutePath = optionService.getByPropertyOrDefault(OtherProperties.GLOBAL_ABSOLUTE_PATH_ENABLED, Boolean.class, true);\n \n+        String themeBasePath = (enabledAbsolutePath ? optionService.getBlogBaseUrl() : \"\") + \"/themes/\" + activatedTheme.getFolderName();\n+\n         configuration.setSharedVariable(\"theme\", activatedTheme);\n-        configuration.setSharedVariable(\"static\", (enabledAbsolutePath ? optionService.getBlogBaseUrl() : \"\") + \"/\" + activatedTheme.getFolderName());\n+\n+        // TODO: It will be removed in future versions\n+        configuration.setSharedVariable(\"static\", themeBasePath);\n+\n+        configuration.setSharedVariable(\"theme_base\", themeBasePath);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc3NzIwMA=="}, "originalCommit": {"oid": "f85a849d41695efda288ccaeb85edc4851c51935"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgxNzMwMg==", "bodyText": "\u55ef\uff0c\u73b0\u5728\u5f88\u591a\u53d8\u91cf\u540d\u5df2\u7ecf\u5f88\u6a21\u68f1\u4e24\u53ef\u4e86\u3002", "url": "https://github.com/halo-dev/halo/pull/538#discussion_r373817302", "createdAt": "2020-02-02T03:56:25Z", "author": {"login": "ruibaby"}, "path": "src/main/java/run/halo/app/listener/freemarker/FreemarkerConfigAwareListener.java", "diffHunk": "@@ -103,8 +103,15 @@ private void loadThemeConfig() throws TemplateModelException {\n \n         Boolean enabledAbsolutePath = optionService.getByPropertyOrDefault(OtherProperties.GLOBAL_ABSOLUTE_PATH_ENABLED, Boolean.class, true);\n \n+        String themeBasePath = (enabledAbsolutePath ? optionService.getBlogBaseUrl() : \"\") + \"/themes/\" + activatedTheme.getFolderName();\n+\n         configuration.setSharedVariable(\"theme\", activatedTheme);\n-        configuration.setSharedVariable(\"static\", (enabledAbsolutePath ? optionService.getBlogBaseUrl() : \"\") + \"/\" + activatedTheme.getFolderName());\n+\n+        // TODO: It will be removed in future versions\n+        configuration.setSharedVariable(\"static\", themeBasePath);\n+\n+        configuration.setSharedVariable(\"theme_base\", themeBasePath);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc3NzIwMA=="}, "originalCommit": {"oid": "f85a849d41695efda288ccaeb85edc4851c51935"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMTI0OTEyOnYy", "diffSide": "LEFT", "path": "src/main/java/run/halo/app/config/WebMvcAutoConfiguration.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQxMjozNToxNVrOFkdlhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wMVQxMjo0NzoxNFrOFkdnvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc3Nzc5OA==", "bodyText": "\u8fd9\u91cc\u82e5\u662f\u53bb\u6389\u4e86\uff0c\u662f\u5426\u4f1a\u9020\u6210\u4e0d\u517c\u5bb9\u5462\uff1f", "url": "https://github.com/halo-dev/halo/pull/538#discussion_r373777798", "createdAt": "2020-02-01T12:35:15Z", "author": {"login": "JohnNiang"}, "path": "src/main/java/run/halo/app/config/WebMvcAutoConfiguration.java", "diffHunk": "@@ -90,12 +90,17 @@ public void addArgumentResolvers(List<HandlerMethodArgumentResolver> resolvers)\n     @Override\n     public void addResourceHandlers(ResourceHandlerRegistry registry) {\n         String workDir = FILE_PROTOCOL + ensureSuffix(haloProperties.getWorkDir(), FILE_SEPARATOR);\n+\n+        // register /** resource handler.\n         registry.addResourceHandler(\"/**\")\n-                .addResourceLocations(workDir + \"templates/themes/\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4279e6a17f0b0f3b8d574320225829860cd9ad61"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc3ODM2Ng==", "bodyText": "\u4e0d\u4f1a\uff0c\u76ee\u524d\u4e3b\u9898\u5168\u662f\u7528\u7684 static \u53d8\u91cf\uff0c\u540c\u65f6\u4fee\u6539 static \u53d8\u91cf\u7684\u503c\u5c31\u884c\u4e86\u3002", "url": "https://github.com/halo-dev/halo/pull/538#discussion_r373778366", "createdAt": "2020-02-01T12:47:14Z", "author": {"login": "ruibaby"}, "path": "src/main/java/run/halo/app/config/WebMvcAutoConfiguration.java", "diffHunk": "@@ -90,12 +90,17 @@ public void addArgumentResolvers(List<HandlerMethodArgumentResolver> resolvers)\n     @Override\n     public void addResourceHandlers(ResourceHandlerRegistry registry) {\n         String workDir = FILE_PROTOCOL + ensureSuffix(haloProperties.getWorkDir(), FILE_SEPARATOR);\n+\n+        // register /** resource handler.\n         registry.addResourceHandler(\"/**\")\n-                .addResourceLocations(workDir + \"templates/themes/\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzc3Nzc5OA=="}, "originalCommit": {"oid": "4279e6a17f0b0f3b8d574320225829860cd9ad61"}, "originalPosition": 16}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2062, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}