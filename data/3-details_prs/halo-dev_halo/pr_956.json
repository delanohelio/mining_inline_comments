{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2NjMzODc2", "number": 956, "title": "\u5982\u679c\u7cfb\u7edf\u8bbe\u7f6e\u4e86http\u4ee3\u7406\u5219\u521b\u5efahttpClient\u65f6\u8bbe\u7f6e\u4ee3\u7406", "bodyText": "", "createdAt": "2020-07-09T05:50:05Z", "url": "https://github.com/halo-dev/halo/pull/956", "merged": true, "mergeCommit": {"oid": "d4b23afb55e9d0ed4da8d019db9a9758ff4aa99f"}, "closed": true, "closedAt": "2020-07-10T04:04:44Z", "author": {"login": "sheiy"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczFn96AH2gAyNDQ2NjMzODc2OjcxMTdhN2YyOWU3ZDU1OGJjNDdiZTI3MTQ1ZThhMzA2NzYzM2YyYTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABczbk57AFqTQ0NjEwODQxNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7117a7f29e7d558bc47be27145e8a3067633f2a7", "author": {"user": null}, "url": "https://github.com/halo-dev/halo/commit/7117a7f29e7d558bc47be27145e8a3067633f2a7", "committedDate": "2020-07-09T02:29:24Z", "message": "\u4fee\u6539\u7f13\u5b58\u65f6\u957f"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "869cd9a007fa8fcfff5e391f02a791fb9fcd9d90", "author": {"user": null}, "url": "https://github.com/halo-dev/halo/commit/869cd9a007fa8fcfff5e391f02a791fb9fcd9d90", "committedDate": "2020-07-09T05:25:03Z", "message": "\u5982\u679c\u7cfb\u7edf\u8bbe\u7f6e\u4e86http\u4ee3\u7406\u5219\u521b\u5efahttpClient\u65f6\u8bbe\u7f6e\u4ee3\u7406"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ea362fa20c43c4fef2d8711fb58c8b141d4c6e1", "author": {"user": null}, "url": "https://github.com/halo-dev/halo/commit/9ea362fa20c43c4fef2d8711fb58c8b141d4c6e1", "committedDate": "2020-07-09T05:26:24Z", "message": "\u5982\u679c\u7cfb\u7edf\u8bbe\u7f6e\u4e86http\u4ee3\u7406\u5219\u521b\u5efahttpClient\u65f6\u8bbe\u7f6e\u4ee3\u7406"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e162a566187eca5c843845b46aae16e155aacac1", "author": {"user": null}, "url": "https://github.com/halo-dev/halo/commit/e162a566187eca5c843845b46aae16e155aacac1", "committedDate": "2020-07-09T05:29:08Z", "message": "Merge pull request #1 from halo-dev/master\n\n\u4fee\u6539\u7f13\u5b58\u65f6\u957f (#954)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b57225001343e4e1062d9dbdadb7440f14ceab1", "author": {"user": null}, "url": "https://github.com/halo-dev/halo/commit/1b57225001343e4e1062d9dbdadb7440f14ceab1", "committedDate": "2020-07-09T05:48:31Z", "message": "\u5982\u679c\u7cfb\u7edf\u8bbe\u7f6e\u4e86http\u4ee3\u7406\u5219\u521b\u5efahttpClient\u65f6\u8bbe\u7f6e\u4ee3\u7406"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf39244dc1136156c6effbdce8135332669e4baf", "author": {"user": null}, "url": "https://github.com/halo-dev/halo/commit/cf39244dc1136156c6effbdce8135332669e4baf", "committedDate": "2020-07-09T05:49:07Z", "message": "Merge remote-tracking branch 'origin/master'"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1MzE1NDgy", "url": "https://github.com/halo-dev/halo/pull/956#pullrequestreview-445315482", "createdAt": "2020-07-09T06:14:32Z", "commit": {"oid": "cf39244dc1136156c6effbdce8135332669e4baf"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQwNjoxNDozMlrOGvDC7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQwNjoxNDozMlrOGvDC7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTk4NjE1Ng==", "bodyText": "\u662f\u5426\u9700\u8981\u8003\u8651\u4e00\u4e0b\u9700\u8981\u7528\u6237\u540d\u548c\u5bc6\u7801\u7684\u4ee3\u7406\u5462\uff1f", "url": "https://github.com/halo-dev/halo/pull/956#discussion_r451986156", "createdAt": "2020-07-09T06:14:32Z", "author": {"login": "JohnNiang"}, "path": "src/main/java/run/halo/app/utils/HttpClientUtils.java", "diffHunk": "@@ -44,7 +47,13 @@ public static CloseableHttpClient createHttpsClient(int timeout) throws KeyStore\n             .loadTrustMaterial(null, (certificate, authType) -> true)\n             .build();\n \n-        return HttpClients.custom()\n+        final HttpClientBuilder httpClientBuilder = HttpClients.custom();\n+        final String httpProxy = System.getenv(\"http_proxy\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cf39244dc1136156c6effbdce8135332669e4baf"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a380d80ef7c352788e93231dd3ec81ae2cb5113", "author": {"user": null}, "url": "https://github.com/halo-dev/halo/commit/4a380d80ef7c352788e93231dd3ec81ae2cb5113", "committedDate": "2020-07-09T07:19:50Z", "message": "\u5982\u679c\u7cfb\u7edf\u8bbe\u7f6e\u4e86http\u4ee3\u7406\u5219\u521b\u5efahttpClient\u65f6\u8bbe\u7f6e\u4ee3\u7406"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "554f4657ea49b7705e2bc8002839ae59216c4faf", "author": {"user": null}, "url": "https://github.com/halo-dev/halo/commit/554f4657ea49b7705e2bc8002839ae59216c4faf", "committedDate": "2020-07-09T07:21:54Z", "message": "\u5982\u679c\u7cfb\u7edf\u8bbe\u7f6e\u4e86http\u4ee3\u7406\u5219\u521b\u5efahttpClient\u65f6\u8bbe\u7f6e\u4ee3\u7406\n\u6dfb\u52a0\u6ce8\u91ca"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dcead705f70883ea7f4bd1d961ff44b566433a21", "author": {"user": null}, "url": "https://github.com/halo-dev/halo/commit/dcead705f70883ea7f4bd1d961ff44b566433a21", "committedDate": "2020-07-09T09:48:36Z", "message": "\u6dfb\u52a0\u5355\u5143\u6d4b\u8bd5\n\u6ca1\u6709useJUnitPlatform()\u5355\u5143\u6d4b\u8bd5\u8dd1\u4e0d\u8d77\u6765"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NTQ0ODEz", "url": "https://github.com/halo-dev/halo/pull/956#pullrequestreview-445544813", "createdAt": "2020-07-09T11:55:41Z", "commit": {"oid": "dcead705f70883ea7f4bd1d961ff44b566433a21"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMTo1NTo0MVrOGvN0xw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMTo1NjozN1rOGvN2sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE2Mjc1OQ==", "bodyText": "\u524d\u6bb5\u65f6\u95f4\u6211\u4eec\u5df2\u7ecf\u5168\u9762\u5c06 junit4 \u6a21\u5757\u66f4\u6539\u4e3a junit5\uff0c\u8fd9\u91cc\u662f\u4e0d\u9700\u8981\u8fd9\u6bb5\u914d\u7f6e\u7684\u3002", "url": "https://github.com/halo-dev/halo/pull/956#discussion_r452162759", "createdAt": "2020-07-09T11:55:41Z", "author": {"login": "JohnNiang"}, "path": "build.gradle", "diffHunk": "@@ -68,6 +68,10 @@ ext {\n     powermockApiMockito2 = \"2.0.7\"\n }\n \n+test {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcead705f70883ea7f4bd1d961ff44b566433a21"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE2MzI1MQ==", "bodyText": "\u63a8\u8350\u7528 org.junit.jupiter.api.Assertions#assertArrayEquals()\u3002", "url": "https://github.com/halo-dev/halo/pull/956#discussion_r452163251", "createdAt": "2020-07-09T11:56:37Z", "author": {"login": "JohnNiang"}, "path": "src/test/java/run/halo/app/utils/HttpClientUtilsTest.java", "diffHunk": "@@ -0,0 +1,32 @@\n+package run.halo.app.utils;\n+\n+import cn.hutool.core.lang.Tuple;\n+import org.junit.jupiter.api.Test;\n+\n+import java.lang.reflect.Method;\n+\n+public class HttpClientUtilsTest {\n+\n+\n+    @Test\n+    void resolveHttpProxyTest() throws Exception {\n+        final Method resolveHttpProxy = HttpClientUtils.class.getDeclaredMethod(\"resolveHttpProxy\", String.class);\n+        resolveHttpProxy.setAccessible(true);\n+\n+        Tuple result = (Tuple) resolveHttpProxy.invoke(null, \"http://127.0.0.1\");\n+        assert result.get(0).equals(\"http://127.0.0.1\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dcead705f70883ea7f4bd1d961ff44b566433a21"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "480a6505c62d400a1eda2d3f35a569a1a69a384c", "author": {"user": null}, "url": "https://github.com/halo-dev/halo/commit/480a6505c62d400a1eda2d3f35a569a1a69a384c", "committedDate": "2020-07-10T01:58:08Z", "message": "\u4fee\u6539\u5355\u5143\u6d4b\u8bd5\uff0c\u5220\u9664zxing\u7684\u4f9d\u8d56"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2MDc3MjIx", "url": "https://github.com/halo-dev/halo/pull/956#pullrequestreview-446077221", "createdAt": "2020-07-10T02:04:21Z", "commit": {"oid": "480a6505c62d400a1eda2d3f35a569a1a69a384c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2MDc5NjIx", "url": "https://github.com/halo-dev/halo/pull/956#pullrequestreview-446079621", "createdAt": "2020-07-10T02:13:13Z", "commit": {"oid": "480a6505c62d400a1eda2d3f35a569a1a69a384c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQwMjoxMzoxNFrOGvnnjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQwMjoxMzoxNFrOGvnnjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjU4NTM1OA==", "bodyText": "\u7a81\u7136\u53d1\u73b0\u8fd9\u91cc\u6709\u4e9b\u4e0d\u6807\u51c6\u3002\nu:p@https://127.0.0.1:123\nhttps://u:p@127.0.0.1:123\n\u5b9e\u9645\u4e0a resolveHttpProxy \u8fd9\u6bb5\u903b\u8f91\u5728 java.net.URI \u5df2\u7ecf\u5b9e\u73b0\u4e86\u3002", "url": "https://github.com/halo-dev/halo/pull/956#discussion_r452585358", "createdAt": "2020-07-10T02:13:14Z", "author": {"login": "JohnNiang"}, "path": "src/test/java/run/halo/app/utils/HttpClientUtilsTest.java", "diffHunk": "@@ -5,28 +5,27 @@\n \n import java.lang.reflect.Method;\n \n-public class HttpClientUtilsTest {\n+import static org.junit.jupiter.api.Assertions.assertArrayEquals;\n+import static org.junit.jupiter.api.Assertions.assertEquals;\n \n+public class HttpClientUtilsTest {\n \n     @Test\n     void resolveHttpProxyTest() throws Exception {\n         final Method resolveHttpProxy = HttpClientUtils.class.getDeclaredMethod(\"resolveHttpProxy\", String.class);\n         resolveHttpProxy.setAccessible(true);\n \n         Tuple result = (Tuple) resolveHttpProxy.invoke(null, \"http://127.0.0.1\");\n-        assert result.get(0).equals(\"http://127.0.0.1\");\n+        assertEquals(result.get(0), \"http://127.0.0.1\");\n \n         result = (Tuple) resolveHttpProxy.invoke(null, \"https://127.0.0.1\");\n-        assert result.get(0).equals(\"https://127.0.0.1\");\n+        assertEquals(result.get(0), \"https://127.0.0.1\");\n \n         result = (Tuple) resolveHttpProxy.invoke(null, \"https://127.0.0.1:123\");\n-        assert result.get(0).equals(\"https://127.0.0.1:123\");\n+        assertEquals(result.get(0), \"https://127.0.0.1:123\");\n \n         result = (Tuple) resolveHttpProxy.invoke(null, \"u:p@https://127.0.0.1:123\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "480a6505c62d400a1eda2d3f35a569a1a69a384c"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e6ca92268e7a1462fee6bf92a10b627416e0d00b", "author": {"user": null}, "url": "https://github.com/halo-dev/halo/commit/e6ca92268e7a1462fee6bf92a10b627416e0d00b", "committedDate": "2020-07-10T03:27:00Z", "message": "\u4fee\u6b63\u9519\u8bef\u7684http\u914d\u7f6e\u683c\u5f0f"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2MTAxNzQx", "url": "https://github.com/halo-dev/halo/pull/956#pullrequestreview-446101741", "createdAt": "2020-07-10T03:37:36Z", "commit": {"oid": "e6ca92268e7a1462fee6bf92a10b627416e0d00b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2MTA4NDE3", "url": "https://github.com/halo-dev/halo/pull/956#pullrequestreview-446108417", "createdAt": "2020-07-10T04:03:58Z", "commit": {"oid": "e6ca92268e7a1462fee6bf92a10b627416e0d00b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4124, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}