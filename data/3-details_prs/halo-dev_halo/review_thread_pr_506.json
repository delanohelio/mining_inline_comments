{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY0NDI5NTg5", "number": 506, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOFQxNDoxMDo1NVrODY_87A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOVQwOToyNzo0N1rODZCThQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NTQwMjA0OnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOFQxNDoxMDo1NVrOFfK58w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOFQxNzowMzo0OVrOFfLaLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIyODg1MQ==", "bodyText": "\u4f60\u53ef\u4ee5\u8003\u8651\u4f7f\u7528 run.halo.app.utils.JsonUtils\uff0c\u800c\u4e0d\u5fc5\u8981\u5f15\u5165 fastjson\u3002", "url": "https://github.com/halo-dev/halo/pull/506#discussion_r368228851", "createdAt": "2020-01-18T14:10:55Z", "author": {"login": "JohnNiang"}, "path": "build.gradle", "diffHunk": "@@ -104,6 +107,10 @@ dependencies {\n     implementation \"net.sf.image4j:image4j:$image4jVersion\"\n     implementation \"org.flywaydb:flyway-core:$flywayVersion\"\n \n+    implementation \"org.json:json:$jsonVersion\"\n+    implementation \"commons-io:commons-io:$commonsIOVersion\"\n+    implementation \"com.alibaba:fastjson:$fastJsonVersion\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17f68cd9f8b05f50f59651e4126260d2cfa5bf6b"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIzMDM1NQ==", "bodyText": "\u6211\u8bd5\u8bd5\u4f60\u8bf4\u7684@JsonProperty\u5982\u679c\u53ef\u4ee5\u5b9e\u73b0\u6211\u5c31\u628afastjson\u5220\u4e86\ud83d\ude02", "url": "https://github.com/halo-dev/halo/pull/506#discussion_r368230355", "createdAt": "2020-01-18T14:44:25Z", "author": {"login": "guqing"}, "path": "build.gradle", "diffHunk": "@@ -104,6 +107,10 @@ dependencies {\n     implementation \"net.sf.image4j:image4j:$image4jVersion\"\n     implementation \"org.flywaydb:flyway-core:$flywayVersion\"\n \n+    implementation \"org.json:json:$jsonVersion\"\n+    implementation \"commons-io:commons-io:$commonsIOVersion\"\n+    implementation \"com.alibaba:fastjson:$fastJsonVersion\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIyODg1MQ=="}, "originalCommit": {"oid": "17f68cd9f8b05f50f59651e4126260d2cfa5bf6b"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIzMzExOQ==", "bodyText": "\u4e0d\u5efa\u8bae\u518d\u5f15\u5165 fastjson\u3002\u53e6\u5916\uff0c\u8fd9\u4e2a commons-io \u4f3c\u4e4e\u4e5f\u6709\u3002", "url": "https://github.com/halo-dev/halo/pull/506#discussion_r368233119", "createdAt": "2020-01-18T15:41:51Z", "author": {"login": "ruibaby"}, "path": "build.gradle", "diffHunk": "@@ -104,6 +107,10 @@ dependencies {\n     implementation \"net.sf.image4j:image4j:$image4jVersion\"\n     implementation \"org.flywaydb:flyway-core:$flywayVersion\"\n \n+    implementation \"org.json:json:$jsonVersion\"\n+    implementation \"commons-io:commons-io:$commonsIOVersion\"\n+    implementation \"com.alibaba:fastjson:$fastJsonVersion\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIyODg1MQ=="}, "originalCommit": {"oid": "17f68cd9f8b05f50f59651e4126260d2cfa5bf6b"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIzNzEwMw==", "bodyText": "commonsio\u5df2\u7ecf\u6392\u9664  \u4f46\u662ffastjson\u4e0d\u884c\uff0c\u4f7f\u7528halo\u7684JsonUtils\u914d\u5408@JsonProperty\u65e0\u6cd5\u5c06json\u5c5e\u6027\u6620\u5c04\u5230\u5bf9\u8c61", "url": "https://github.com/halo-dev/halo/pull/506#discussion_r368237103", "createdAt": "2020-01-18T17:03:49Z", "author": {"login": "guqing"}, "path": "build.gradle", "diffHunk": "@@ -104,6 +107,10 @@ dependencies {\n     implementation \"net.sf.image4j:image4j:$image4jVersion\"\n     implementation \"org.flywaydb:flyway-core:$flywayVersion\"\n \n+    implementation \"org.json:json:$jsonVersion\"\n+    implementation \"commons-io:commons-io:$commonsIOVersion\"\n+    implementation \"com.alibaba:fastjson:$fastJsonVersion\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIyODg1MQ=="}, "originalCommit": {"oid": "17f68cd9f8b05f50f59651e4126260d2cfa5bf6b"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NTQwMjYxOnYy", "diffSide": "RIGHT", "path": "src/main/java/run/halo/app/handler/migrate/WordPressMigrateHandler.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOFQxNDoxMjo1NFrOFfK6Qg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOFQxNDo0MjoxN1rOFfK_Yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIyODkzMA==", "bodyText": "\u8fd9\u91cc\u7684\u53c2\u6570\u4ee5\u540e\u8003\u8651\u66f4\u6539\u4e86\uff0c\u4e0d\u80fd\u4f7f\u7528 MultipartFile file\u3002\u6216\u8005\u521b\u5efa\u4e00\u4e2a\u9002\u914d\u5668\u6765\u517c\u5bb9\u5b83\u3002", "url": "https://github.com/halo-dev/halo/pull/506#discussion_r368228930", "createdAt": "2020-01-18T14:12:54Z", "author": {"login": "JohnNiang"}, "path": "src/main/java/run/halo/app/handler/migrate/WordPressMigrateHandler.java", "diffHunk": "@@ -90,136 +84,18 @@ public WordPressMigrateHandler(AttachmentService attachmentService,\n     public void migrate(MultipartFile file) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17f68cd9f8b05f50f59651e4126260d2cfa5bf6b"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIzMDE5NA==", "bodyText": "\u8fd9\u91cc\u8001\u6c6a\u5199\u7684  \u6211\u6cbf\u7528\u4e86", "url": "https://github.com/halo-dev/halo/pull/506#discussion_r368230194", "createdAt": "2020-01-18T14:41:22Z", "author": {"login": "guqing"}, "path": "src/main/java/run/halo/app/handler/migrate/WordPressMigrateHandler.java", "diffHunk": "@@ -90,136 +84,18 @@ public WordPressMigrateHandler(AttachmentService attachmentService,\n     public void migrate(MultipartFile file) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIyODkzMA=="}, "originalCommit": {"oid": "17f68cd9f8b05f50f59651e4126260d2cfa5bf6b"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIzMDI0Mg==", "bodyText": "\u8fd9\u91cc\u8001\u6c6a\u5199\u7684 \u6211\u6cbf\u7528\u4e86\n\n\u55ef\u55ef\uff0c\u8fd9\u4e0d\u662f\u4f60\u7684\u9505\uff0c\u662f\u6211\u4eec\u5f53\u65f6\u8bbe\u8ba1\u7684\u65f6\u5019\u6ca1\u6709\u8003\u8651\u597d\u3002", "url": "https://github.com/halo-dev/halo/pull/506#discussion_r368230242", "createdAt": "2020-01-18T14:42:17Z", "author": {"login": "JohnNiang"}, "path": "src/main/java/run/halo/app/handler/migrate/WordPressMigrateHandler.java", "diffHunk": "@@ -90,136 +84,18 @@ public WordPressMigrateHandler(AttachmentService attachmentService,\n     public void migrate(MultipartFile file) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIyODkzMA=="}, "originalCommit": {"oid": "17f68cd9f8b05f50f59651e4126260d2cfa5bf6b"}, "originalPosition": 37}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NTQxMDA0OnYy", "diffSide": "RIGHT", "path": "src/main/java/run/halo/app/handler/migrate/converter/Converter.java", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOFQxNDozNDowMlrOFfK99g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOFQxNDo1MDoxMlrOFfLA8A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIyOTg3OA==", "bodyText": "\u5efa\u8bae\u6b64 Convert \u652f\u6301\u53cc\u5411\u8f6c\u6362 \uff1aP", "url": "https://github.com/halo-dev/halo/pull/506#discussion_r368229878", "createdAt": "2020-01-18T14:34:02Z", "author": {"login": "JohnNiang"}, "path": "src/main/java/run/halo/app/handler/migrate/converter/Converter.java", "diffHunk": "@@ -0,0 +1,30 @@\n+package run.halo.app.handler.migrate.converter;\n+\n+import java.util.List;\n+import java.util.function.Function;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * \u535a\u5ba2\u8fc1\u79fb\u6570\u636e\u8f6c\u6362\u5668,\u53ea\u5b9a\u4e49\u4eceT\u8f6cU\u7684\u5355\u5411\u8f6c\u6362\n+ * @author guqing\n+ * @date 2020-01-18 16:45\n+ */\n+public class Converter<T, U> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17f68cd9f8b05f50f59651e4126260d2cfa5bf6b"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIzMDI4MA==", "bodyText": "\u4e4b\u524d\u652f\u6301\u4f46\u662f\u6211\u60f3\u4e86\u4e00\u4e0b\u5e76\u4e0d\u9700\u8981\u5c06\u6570\u636e\u5e93\u7684\u6587\u7ae0\u6620\u5c04\u5230wordpress\u7684\u5b9e\u4f53  \u5982\u679c\u6dfb\u52a0\u53cc\u5411\u9700\u8981\u5728\u6784\u9020\u91cc\u5728\u5199\u4e00\u4e2aFunction\u5e76\u4e0d\u597d\u5b9e\u73b0   \u5f88\u7d2f\u8d58\u6240\u4ee5\u5c31\u5220\u9664\u4e86", "url": "https://github.com/halo-dev/halo/pull/506#discussion_r368230280", "createdAt": "2020-01-18T14:43:09Z", "author": {"login": "guqing"}, "path": "src/main/java/run/halo/app/handler/migrate/converter/Converter.java", "diffHunk": "@@ -0,0 +1,30 @@\n+package run.halo.app.handler.migrate.converter;\n+\n+import java.util.List;\n+import java.util.function.Function;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * \u535a\u5ba2\u8fc1\u79fb\u6570\u636e\u8f6c\u6362\u5668,\u53ea\u5b9a\u4e49\u4eceT\u8f6cU\u7684\u5355\u5411\u8f6c\u6362\n+ * @author guqing\n+ * @date 2020-01-18 16:45\n+ */\n+public class Converter<T, U> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIyOTg3OA=="}, "originalCommit": {"oid": "17f68cd9f8b05f50f59651e4126260d2cfa5bf6b"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIzMDMzMA==", "bodyText": "\u4e4b\u524d\u652f\u6301\u4f46\u662f\u6211\u60f3\u4e86\u4e00\u4e0b\u5e76\u4e0d\u9700\u8981\u5c06\u6570\u636e\u5e93\u7684\u6587\u7ae0\u6620\u5c04\u5230wordpress\u7684\u5b9e\u4f53 \u5982\u679c\u6dfb\u52a0\u53cc\u5411\u9700\u8981\u5728\u6784\u9020\u91cc\u5728\u5199\u4e00\u4e2aFunction\u5e76\u4e0d\u597d\u5b9e\u73b0 \u5f88\u7d2f\u8d58\u6240\u4ee5\u5c31\u5220\u9664\u4e86\n\n\u53ea\u662f\u4e00\u4e2a\u4e34\u65f6\u7684\u60f3\u6cd5\uff0c\u54c8\u54c8\u54c8\uff0c\u4e0d\u8fc7\u5efa\u8bae\u9884\u7559\u8fd9\u4e2a\u63a5\u53e3\u3002", "url": "https://github.com/halo-dev/halo/pull/506#discussion_r368230330", "createdAt": "2020-01-18T14:44:01Z", "author": {"login": "JohnNiang"}, "path": "src/main/java/run/halo/app/handler/migrate/converter/Converter.java", "diffHunk": "@@ -0,0 +1,30 @@\n+package run.halo.app.handler.migrate.converter;\n+\n+import java.util.List;\n+import java.util.function.Function;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * \u535a\u5ba2\u8fc1\u79fb\u6570\u636e\u8f6c\u6362\u5668,\u53ea\u5b9a\u4e49\u4eceT\u8f6cU\u7684\u5355\u5411\u8f6c\u6362\n+ * @author guqing\n+ * @date 2020-01-18 16:45\n+ */\n+public class Converter<T, U> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIyOTg3OA=="}, "originalCommit": {"oid": "17f68cd9f8b05f50f59651e4126260d2cfa5bf6b"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIzMDUyOA==", "bodyText": "public class Converter<T, U> {\n    \n    // \u4ece T \u8f6c\u6362\u4e3a U\n    private Function<T, U> fromDto;\n \n    // \u4ece U \u8f6c\u6362\u4e3a T\n    private Function<U, T> fromEntity;\n \n    public Converter(final Function<T, U> fromDto, final Function<U, T> fromEntity) {\n        this.fromDto = fromDto;\n        this.fromEntity = fromEntity;\n    }\n \n    public final U converterFromDto(final T dto){\n        return fromDto.apply(dto);\n    }\n \n    public final T converterFromEntity(final U entity){\n        return fromEntity.apply(entity);\n    }\n \n    public final List<U> batchConverterFromDto(final List<T> dtos){\n        return dtos.stream().map(this::converterFromDto).collect(Collectors.toList());\n    }\n \n    public final List<T> batchConverterFromEntity(final List<U> entities){\n        return entities.stream().map(this::converterFromEntity).collect(Collectors.toList());\n    }\n}\n\u4e4b\u524d\u662f\u8fd9\u4e48\u5199\u7684, \u5982\u679c\u7528\u5f97\u4e0a\u540e\u9762\u4e5f\u53ef\u4ee5,\u73b0\u5728\u6dfb\u52a0\u4e5f\u884c, \u9664\u975e\u6709\u4eba\u60f3\u628ahalo\u7684\u6570\u636e\u8fc1\u79fb\u5230wordpress,\u54c8\u54c8\u54c8", "url": "https://github.com/halo-dev/halo/pull/506#discussion_r368230528", "createdAt": "2020-01-18T14:47:50Z", "author": {"login": "guqing"}, "path": "src/main/java/run/halo/app/handler/migrate/converter/Converter.java", "diffHunk": "@@ -0,0 +1,30 @@\n+package run.halo.app.handler.migrate.converter;\n+\n+import java.util.List;\n+import java.util.function.Function;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * \u535a\u5ba2\u8fc1\u79fb\u6570\u636e\u8f6c\u6362\u5668,\u53ea\u5b9a\u4e49\u4eceT\u8f6cU\u7684\u5355\u5411\u8f6c\u6362\n+ * @author guqing\n+ * @date 2020-01-18 16:45\n+ */\n+public class Converter<T, U> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIyOTg3OA=="}, "originalCommit": {"oid": "17f68cd9f8b05f50f59651e4126260d2cfa5bf6b"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIzMDYwNQ==", "bodyText": "\u5efa\u8bae\u5c06 Converter \u58f0\u660e\u4e3a\u63a5\u53e3\uff0c\u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e9b\u9ed8\u8ba4\u7684\u5b9e\u73b0\u3002", "url": "https://github.com/halo-dev/halo/pull/506#discussion_r368230605", "createdAt": "2020-01-18T14:49:16Z", "author": {"login": "JohnNiang"}, "path": "src/main/java/run/halo/app/handler/migrate/converter/Converter.java", "diffHunk": "@@ -0,0 +1,30 @@\n+package run.halo.app.handler.migrate.converter;\n+\n+import java.util.List;\n+import java.util.function.Function;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * \u535a\u5ba2\u8fc1\u79fb\u6570\u636e\u8f6c\u6362\u5668,\u53ea\u5b9a\u4e49\u4eceT\u8f6cU\u7684\u5355\u5411\u8f6c\u6362\n+ * @author guqing\n+ * @date 2020-01-18 16:45\n+ */\n+public class Converter<T, U> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIyOTg3OA=="}, "originalCommit": {"oid": "17f68cd9f8b05f50f59651e4126260d2cfa5bf6b"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIzMDY0MA==", "bodyText": "\u597d\uff0c\u6211\u6539\u4e00\u4e0b", "url": "https://github.com/halo-dev/halo/pull/506#discussion_r368230640", "createdAt": "2020-01-18T14:50:12Z", "author": {"login": "guqing"}, "path": "src/main/java/run/halo/app/handler/migrate/converter/Converter.java", "diffHunk": "@@ -0,0 +1,30 @@\n+package run.halo.app.handler.migrate.converter;\n+\n+import java.util.List;\n+import java.util.function.Function;\n+import java.util.stream.Collectors;\n+\n+/**\n+ * \u535a\u5ba2\u8fc1\u79fb\u6570\u636e\u8f6c\u6362\u5668,\u53ea\u5b9a\u4e49\u4eceT\u8f6cU\u7684\u5355\u5411\u8f6c\u6362\n+ * @author guqing\n+ * @date 2020-01-18 16:45\n+ */\n+public class Converter<T, U> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIyOTg3OA=="}, "originalCommit": {"oid": "17f68cd9f8b05f50f59651e4126260d2cfa5bf6b"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NTQzNTYzOnYy", "diffSide": "RIGHT", "path": "src/main/java/run/halo/app/handler/migrate/support/wordpress/Channel.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOFQxNTo0MzozMFrOFfLK1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOFQxNTo0ODo1MlrOFfLLrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIzMzE3Mg==", "bodyText": "\u8fd9\u91cc\u6700\u597d\u7ed9\u6bcf\u4e2a\u5c5e\u6027\u52a0\u4e0a java doc \u6ce8\u91ca\uff0c\u540e\u9762 Wordpress \u53ef\u80fd\u4f1a\u6539\u4e00\u4e9b\u4e1c\u897f\uff0c\u514d\u5f97\u540e\u9762\u4e0d\u6e05\u695a\u3002", "url": "https://github.com/halo-dev/halo/pull/506#discussion_r368233172", "createdAt": "2020-01-18T15:43:30Z", "author": {"login": "ruibaby"}, "path": "src/main/java/run/halo/app/handler/migrate/support/wordpress/Channel.java", "diffHunk": "@@ -0,0 +1,26 @@\n+package run.halo.app.handler.migrate.support.wordpress;\n+\n+import com.alibaba.fastjson.annotation.JSONField;\n+import lombok.Data;\n+\n+import java.util.List;\n+\n+/**\n+ * <p>  </p>\n+ *\n+ * @author guqing\n+ * @date 2019-11-17 13:57\n+ */\n+@Data\n+public class Channel {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17f68cd9f8b05f50f59651e4126260d2cfa5bf6b"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIzMzM5MA==", "bodyText": "\u597d", "url": "https://github.com/halo-dev/halo/pull/506#discussion_r368233390", "createdAt": "2020-01-18T15:48:52Z", "author": {"login": "guqing"}, "path": "src/main/java/run/halo/app/handler/migrate/support/wordpress/Channel.java", "diffHunk": "@@ -0,0 +1,26 @@\n+package run.halo.app.handler.migrate.support.wordpress;\n+\n+import com.alibaba.fastjson.annotation.JSONField;\n+import lombok.Data;\n+\n+import java.util.List;\n+\n+/**\n+ * <p>  </p>\n+ *\n+ * @author guqing\n+ * @date 2019-11-17 13:57\n+ */\n+@Data\n+public class Channel {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIzMzE3Mg=="}, "originalCommit": {"oid": "17f68cd9f8b05f50f59651e4126260d2cfa5bf6b"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NTQzNTY4OnYy", "diffSide": "RIGHT", "path": "src/main/java/run/halo/app/handler/migrate/support/wordpress/Comment.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOFQxNTo0Mzo0MFrOFfLK2g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOFQxNTo0OToxOFrOFfLLxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIzMzE3OA==", "bodyText": "\u540c\u4e0a\u3002", "url": "https://github.com/halo-dev/halo/pull/506#discussion_r368233178", "createdAt": "2020-01-18T15:43:40Z", "author": {"login": "ruibaby"}, "path": "src/main/java/run/halo/app/handler/migrate/support/wordpress/Comment.java", "diffHunk": "@@ -0,0 +1,44 @@\n+package run.halo.app.handler.migrate.support.wordpress;\n+\n+import com.alibaba.fastjson.annotation.JSONField;\n+import lombok.Data;\n+\n+/**\n+ * <p>  </p>\n+ *\n+ * @author guqing\n+ * @date 2019-11-17 14:01\n+ */\n+@Data\n+public class Comment {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17f68cd9f8b05f50f59651e4126260d2cfa5bf6b"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIzMzE5NQ==", "bodyText": "\u751a\u81f3\u53ef\u4ee5\u94fe\u63a5\u6211\u4eec\u5bf9\u5e94\u7684\u7c7b\u548c\u5c5e\u6027\u3002", "url": "https://github.com/halo-dev/halo/pull/506#discussion_r368233195", "createdAt": "2020-01-18T15:44:00Z", "author": {"login": "ruibaby"}, "path": "src/main/java/run/halo/app/handler/migrate/support/wordpress/Comment.java", "diffHunk": "@@ -0,0 +1,44 @@\n+package run.halo.app.handler.migrate.support.wordpress;\n+\n+import com.alibaba.fastjson.annotation.JSONField;\n+import lombok.Data;\n+\n+/**\n+ * <p>  </p>\n+ *\n+ * @author guqing\n+ * @date 2019-11-17 14:01\n+ */\n+@Data\n+public class Comment {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIzMzE3OA=="}, "originalCommit": {"oid": "17f68cd9f8b05f50f59651e4126260d2cfa5bf6b"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIzMzQxMw==", "bodyText": "\u597d", "url": "https://github.com/halo-dev/halo/pull/506#discussion_r368233413", "createdAt": "2020-01-18T15:49:18Z", "author": {"login": "guqing"}, "path": "src/main/java/run/halo/app/handler/migrate/support/wordpress/Comment.java", "diffHunk": "@@ -0,0 +1,44 @@\n+package run.halo.app.handler.migrate.support.wordpress;\n+\n+import com.alibaba.fastjson.annotation.JSONField;\n+import lombok.Data;\n+\n+/**\n+ * <p>  </p>\n+ *\n+ * @author guqing\n+ * @date 2019-11-17 14:01\n+ */\n+@Data\n+public class Comment {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIzMzE3OA=="}, "originalCommit": {"oid": "17f68cd9f8b05f50f59651e4126260d2cfa5bf6b"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NTQzNTg1OnYy", "diffSide": "RIGHT", "path": "src/main/java/run/halo/app/handler/migrate/support/wordpress/Item.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOFQxNTo0NDoyMlrOFfLK-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOFQxNTo0NDoyMlrOFfLK-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIzMzIxMA==", "bodyText": "\u540c\u4e0a\uff0c\u52a0\u4e0a java doc\u3002", "url": "https://github.com/halo-dev/halo/pull/506#discussion_r368233210", "createdAt": "2020-01-18T15:44:22Z", "author": {"login": "ruibaby"}, "path": "src/main/java/run/halo/app/handler/migrate/support/wordpress/Item.java", "diffHunk": "@@ -0,0 +1,50 @@\n+package run.halo.app.handler.migrate.support.wordpress;\n+\n+import com.alibaba.fastjson.annotation.JSONField;\n+import lombok.Data;\n+\n+import java.util.List;\n+\n+/**\n+ * <p> wordpress\u6587\u7ae0\u9879 </p>\n+ *\n+ * @author guqing\n+ * @date 2019-11-17 13:59\n+ */\n+@Data\n+public class Item {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17f68cd9f8b05f50f59651e4126260d2cfa5bf6b"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NTQzNjA5OnYy", "diffSide": "RIGHT", "path": "src/test/resources/wordpressdemo.xml", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOFQxNTo0NToyM1rOFfLLHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOFQxNTo1MjoxM1rOFfLMSw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIzMzI0NQ==", "bodyText": "\u8fd9\u4e2a\u53ef\u80fd\u662f\u4e0d\u5b8c\u6574\u7684\uff0c\u540e\u9762\u6211\u4f1a\u518d\u5bfc\u51fa\u4e00\u4e2a\uff0c\u7528\u6765\u6d4b\u8bd5\uff0c\u6216\u8005\u53eb\u7fa4\u53cb\u63d0\u4f9b\u3002", "url": "https://github.com/halo-dev/halo/pull/506#discussion_r368233245", "createdAt": "2020-01-18T15:45:23Z", "author": {"login": "ruibaby"}, "path": "src/test/resources/wordpressdemo.xml", "diffHunk": "@@ -0,0 +1,144 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\" ?>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17f68cd9f8b05f50f59651e4126260d2cfa5bf6b"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIzMzU0Nw==", "bodyText": "\u597d  \u73b0\u5728\u53ea\u662f\u8f6c\u4e86\u7136\u540e\u8986\u76d6\u4e86\u4f60migrateHandle\u91cc\u7684\u5199\u6cd5\u8fd8\u6ca1\u6709\u5199\u5b58\u50a8\u903b\u8f91  \u4f46\u662f\u5148\u5c06xml\u8f6cjson\u4e00\u822c\u4e0d\u4f1a\u6709\u4ec0\u4e48\u95ee\u9898  \u53ef\u80fd\u51fa\u73b0\u7684\u95ee\u9898\u53ea\u662f\u6211\u81ea\u5b9a\u4e49\u7684\u6620\u5c04entity\u5b57\u6bb5\u6ca1\u5199\u5168  \u4e0d\u8fc7\u6211\u4eca\u665a\u8f6c\u6362\u6570\u636e\u5e93\u5b9e\u4f53\u7684\u65f6\u5019\u5df2\u7ecf\u6ca1\u6709\u7f3a\u5c11\u7684\u5b57\u6bb5\u4e86\u90fd\u80fd\u8865\u5168  \u540e\u9762\u5728\u5bfc\u51e0\u4e2a\u6765\u6d4b\u8bd5\u4e00\u4e0b\u6ca1\u95ee\u9898\u5728\u5199\u5165\u5e93", "url": "https://github.com/halo-dev/halo/pull/506#discussion_r368233547", "createdAt": "2020-01-18T15:52:13Z", "author": {"login": "guqing"}, "path": "src/test/resources/wordpressdemo.xml", "diffHunk": "@@ -0,0 +1,144 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\" ?>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIzMzI0NQ=="}, "originalCommit": {"oid": "17f68cd9f8b05f50f59651e4126260d2cfa5bf6b"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NTc4NTM4OnYy", "diffSide": "LEFT", "path": "src/main/java/run/halo/app/handler/migrate/converter/Converter.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOVQwOToyMjozNlrOFfN71w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOVQwOTo0Nzo0NlrOFfOCng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODI3ODQ4Nw==", "bodyText": "converterFromDto ---> convertFrom.\nThe following also needs to be rectified.", "url": "https://github.com/halo-dev/halo/pull/506#discussion_r368278487", "createdAt": "2020-01-19T09:22:36Z", "author": {"login": "JohnNiang"}, "path": "src/main/java/run/halo/app/handler/migrate/converter/Converter.java", "diffHunk": "@@ -5,26 +5,41 @@\n import java.util.stream.Collectors;\n \n /**\n- * \u535a\u5ba2\u8fc1\u79fb\u6570\u636e\u8f6c\u6362\u5668,\u53ea\u5b9a\u4e49\u4eceT\u8f6cU\u7684\u5355\u5411\u8f6c\u6362\n+ * \u535a\u5ba2\u8fc1\u79fb\u6570\u636e\u8f6c\u6362\u5668,\u53ea\u5b9a\u4e49\u4eceSOURCE\u8f6cTARGET\u7684\u5355\u5411\u8f6c\u6362\n+ *\n  * @author guqing\n  * @date 2020-01-18 16:45\n  */\n-public class Converter<T, U> {\n+public interface Converter<SOURCE, TARGET> {\n+\n     /**\n-     *  \u4ece T \u8f6c\u6362\u4e3a U\n+     * \u5c06source\u8f6c\u6362\u4e3atarget\n+     *\n+     * @param s \u9700\u8981\u8f6c\u6362\u7684\u6e90\u5bf9\u8c61\n+     * @return \u8fd4\u56de\u8f6c\u6362\u5f97\u5230\u7684\u7ed3\u679c\u5bf9\u8c61\n      */\n-    private Function<T, U> fromDto;\n-\n-    public Converter(final Function<T, U> fromDto) {\n-        this.fromDto = fromDto;\n-    }\n+    TARGET converterFromDto(SOURCE s);\n \n-    public final U converterFromDto(final T dto){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "541d79d7828e97a00a2ddb434a4477c41cc641f8"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODI4MDIyMg==", "bodyText": "\u597d\u7684\ud83d\ude02\u7684\u786e\u662f \u8fd9\u4e2a\u540d\u5b57  \u4e0d\u592a\u5408\u9002", "url": "https://github.com/halo-dev/halo/pull/506#discussion_r368280222", "createdAt": "2020-01-19T09:47:46Z", "author": {"login": "guqing"}, "path": "src/main/java/run/halo/app/handler/migrate/converter/Converter.java", "diffHunk": "@@ -5,26 +5,41 @@\n import java.util.stream.Collectors;\n \n /**\n- * \u535a\u5ba2\u8fc1\u79fb\u6570\u636e\u8f6c\u6362\u5668,\u53ea\u5b9a\u4e49\u4eceT\u8f6cU\u7684\u5355\u5411\u8f6c\u6362\n+ * \u535a\u5ba2\u8fc1\u79fb\u6570\u636e\u8f6c\u6362\u5668,\u53ea\u5b9a\u4e49\u4eceSOURCE\u8f6cTARGET\u7684\u5355\u5411\u8f6c\u6362\n+ *\n  * @author guqing\n  * @date 2020-01-18 16:45\n  */\n-public class Converter<T, U> {\n+public interface Converter<SOURCE, TARGET> {\n+\n     /**\n-     *  \u4ece T \u8f6c\u6362\u4e3a U\n+     * \u5c06source\u8f6c\u6362\u4e3atarget\n+     *\n+     * @param s \u9700\u8981\u8f6c\u6362\u7684\u6e90\u5bf9\u8c61\n+     * @return \u8fd4\u56de\u8f6c\u6362\u5f97\u5230\u7684\u7ed3\u679c\u5bf9\u8c61\n      */\n-    private Function<T, U> fromDto;\n-\n-    public Converter(final Function<T, U> fromDto) {\n-        this.fromDto = fromDto;\n-    }\n+    TARGET converterFromDto(SOURCE s);\n \n-    public final U converterFromDto(final T dto){", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODI3ODQ4Nw=="}, "originalCommit": {"oid": "541d79d7828e97a00a2ddb434a4477c41cc641f8"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI3NTc4NzU3OnYy", "diffSide": "RIGHT", "path": "src/main/java/run/halo/app/handler/migrate/converter/WordPressConverter.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOVQwOToyNzo0N1rOFfN9Ag==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xOVQwOTo0NzowOVrOFfOCVA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODI3ODc4Ng==", "bodyText": "We do not recommend the use of Assert#notNull from here. Because the items is not a parameter, and this check may throw java.lang.IllegalArgumentException.", "url": "https://github.com/halo-dev/halo/pull/506#discussion_r368278786", "createdAt": "2020-01-19T09:27:47Z", "author": {"login": "JohnNiang"}, "path": "src/main/java/run/halo/app/handler/migrate/converter/WordPressConverter.java", "diffHunk": "@@ -17,128 +18,144 @@\n import java.time.LocalDateTime;\n import java.time.ZoneId;\n import java.time.format.DateTimeFormatter;\n-import java.util.ArrayList;\n-import java.util.Date;\n-import java.util.List;\n+import java.util.*;\n import java.util.function.Function;\n \n /**\n  * WordPress\u535a\u5ba2\u6570\u636e\u8fc1\u79fb\u8f6c\u6362\u5668\n+ *\n  * @author guqing\n  * @date 2020-01-18 16:50\n  */\n-public class WordPressConverter extends Converter<Rss, List<PostVO>> {\n+public class WordPressConverter implements Converter<Rss, List<PostVO>> {\n \n-    public WordPressConverter() {\n-        super(new PostVoFunction());\n+    @Override\n+    public List<PostVO> converterFromDto(Rss rss) {\n+        return converterFromDto(rss, this::apply);\n     }\n \n     /**\n      * \u81ea\u5b9a\u4e49\u8f6c\u6362\u89c4\u5219\n      */\n-    private static class PostVoFunction implements Function<Rss, List<PostVO>> {\n-        @Override\n-        public List<PostVO> apply(Rss rss) {\n-            Channel channel = rss.getChannel();\n-            List<Item> items = channel.getItems();\n-            Assert.notNull(items, \"\u89e3\u6790\u51fa\u9519,\u6587\u7ae0item\u9879\u4e0d\u80fd\u4e3anull\");\n-\n-            return  getBasePost(items);\n+    public List<PostVO> apply(Rss rss) {\n+        if(Objects.isNull(rss) || Objects.isNull(rss.getChannel())) {\n+            return new ArrayList<>();\n         }\n \n-        private List<PostVO> getBasePost(List<Item> items) {\n-            List<PostVO> posts = new ArrayList<>();\n-            items.forEach(item -> {\n-                PostVO postVo = new PostVO();\n+        Channel channel = rss.getChannel();\n \n-                // \u8bbe\u7f6e\u6587\u7ae0\n-                BasePost post = getBasePostFromItem(item);\n-                postVo.setBasePost(post);\n+        List<Item> items = channel.getItems();\n+        Assert.notNull(items, \"\u89e3\u6790\u51fa\u9519,\u6587\u7ae0item\u9879\u4e0d\u80fd\u4e3anull\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "541d79d7828e97a00a2ddb434a4477c41cc641f8"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODI4MDE0OA==", "bodyText": "\u6328\u4e0d\u5bf9\u554a  \u8fd9\u91cc\u6211\u5df2\u7ecf\u6539\u8fc7\u4e86\u96be\u9053\u6ca1\u540c\u6b65\u8fc7\u53bb\nWordPressConvert", "url": "https://github.com/halo-dev/halo/pull/506#discussion_r368280148", "createdAt": "2020-01-19T09:47:09Z", "author": {"login": "guqing"}, "path": "src/main/java/run/halo/app/handler/migrate/converter/WordPressConverter.java", "diffHunk": "@@ -17,128 +18,144 @@\n import java.time.LocalDateTime;\n import java.time.ZoneId;\n import java.time.format.DateTimeFormatter;\n-import java.util.ArrayList;\n-import java.util.Date;\n-import java.util.List;\n+import java.util.*;\n import java.util.function.Function;\n \n /**\n  * WordPress\u535a\u5ba2\u6570\u636e\u8fc1\u79fb\u8f6c\u6362\u5668\n+ *\n  * @author guqing\n  * @date 2020-01-18 16:50\n  */\n-public class WordPressConverter extends Converter<Rss, List<PostVO>> {\n+public class WordPressConverter implements Converter<Rss, List<PostVO>> {\n \n-    public WordPressConverter() {\n-        super(new PostVoFunction());\n+    @Override\n+    public List<PostVO> converterFromDto(Rss rss) {\n+        return converterFromDto(rss, this::apply);\n     }\n \n     /**\n      * \u81ea\u5b9a\u4e49\u8f6c\u6362\u89c4\u5219\n      */\n-    private static class PostVoFunction implements Function<Rss, List<PostVO>> {\n-        @Override\n-        public List<PostVO> apply(Rss rss) {\n-            Channel channel = rss.getChannel();\n-            List<Item> items = channel.getItems();\n-            Assert.notNull(items, \"\u89e3\u6790\u51fa\u9519,\u6587\u7ae0item\u9879\u4e0d\u80fd\u4e3anull\");\n-\n-            return  getBasePost(items);\n+    public List<PostVO> apply(Rss rss) {\n+        if(Objects.isNull(rss) || Objects.isNull(rss.getChannel())) {\n+            return new ArrayList<>();\n         }\n \n-        private List<PostVO> getBasePost(List<Item> items) {\n-            List<PostVO> posts = new ArrayList<>();\n-            items.forEach(item -> {\n-                PostVO postVo = new PostVO();\n+        Channel channel = rss.getChannel();\n \n-                // \u8bbe\u7f6e\u6587\u7ae0\n-                BasePost post = getBasePostFromItem(item);\n-                postVo.setBasePost(post);\n+        List<Item> items = channel.getItems();\n+        Assert.notNull(items, \"\u89e3\u6790\u51fa\u9519,\u6587\u7ae0item\u9879\u4e0d\u80fd\u4e3anull\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODI3ODc4Ng=="}, "originalCommit": {"oid": "541d79d7828e97a00a2ddb434a4477c41cc641f8"}, "originalPosition": 60}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2056, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}