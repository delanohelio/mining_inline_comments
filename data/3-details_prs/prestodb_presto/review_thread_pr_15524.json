{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQwNzg5MDQx", "number": 15524, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxODoyNjo1MVrOFGVdxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxODoyODoyMVrOFGVgTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyMTg3NDYzOnYy", "diffSide": "RIGHT", "path": "presto-main/src/main/java/com/facebook/presto/testing/ExpectedQueryRunner.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxODoyNjo1MVrOIHTNVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxODozMjoxNVrOIHTbCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDUyNTY1Mg==", "bodyText": "nit: Maybe ControlQueryRunner?", "url": "https://github.com/prestodb/presto/pull/15524#discussion_r544525652", "createdAt": "2020-12-16T18:26:51Z", "author": {"login": "arhimondr"}, "path": "presto-main/src/main/java/com/facebook/presto/testing/ExpectedQueryRunner.java", "diffHunk": "@@ -0,0 +1,29 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.testing;\n+\n+import com.facebook.presto.Session;\n+import com.facebook.presto.common.type.Type;\n+import org.intellij.lang.annotations.Language;\n+\n+import java.io.Closeable;\n+import java.util.List;\n+\n+public interface ExpectedQueryRunner", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "550de840febaf4431b8ce23674600ef69a91b16f"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDUyOTE2MQ==", "bodyText": "expected is the term used in the assert packages.  Is control used elsewhere in Presto?", "url": "https://github.com/prestodb/presto/pull/15524#discussion_r544529161", "createdAt": "2020-12-16T18:32:15Z", "author": {"login": "jbroll"}, "path": "presto-main/src/main/java/com/facebook/presto/testing/ExpectedQueryRunner.java", "diffHunk": "@@ -0,0 +1,29 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.testing;\n+\n+import com.facebook.presto.Session;\n+import com.facebook.presto.common.type.Type;\n+import org.intellij.lang.annotations.Language;\n+\n+import java.io.Closeable;\n+import java.util.List;\n+\n+public interface ExpectedQueryRunner", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDUyNTY1Mg=="}, "originalCommit": {"oid": "550de840febaf4431b8ce23674600ef69a91b16f"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyMTg3NTQ5OnYy", "diffSide": "RIGHT", "path": "presto-main/src/main/java/com/facebook/presto/testing/ExpectedQueryRunner.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxODoyNzowNVrOIHTN3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxODoyNzowNVrOIHTN3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDUyNTc5MQ==", "bodyText": "nit: space", "url": "https://github.com/prestodb/presto/pull/15524#discussion_r544525791", "createdAt": "2020-12-16T18:27:05Z", "author": {"login": "arhimondr"}, "path": "presto-main/src/main/java/com/facebook/presto/testing/ExpectedQueryRunner.java", "diffHunk": "@@ -0,0 +1,29 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.testing;\n+\n+import com.facebook.presto.Session;\n+import com.facebook.presto.common.type.Type;\n+import org.intellij.lang.annotations.Language;\n+\n+import java.io.Closeable;\n+import java.util.List;\n+\n+public interface ExpectedQueryRunner\n+        extends Closeable\n+{\n+    @Override\n+    void close();\n+    MaterializedResult execute(Session session, @Language(\"SQL\") String sql, List<? extends Type> resultTypes);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "550de840febaf4431b8ce23674600ef69a91b16f"}, "originalPosition": 28}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyMTg3NjY1OnYy", "diffSide": "RIGHT", "path": "presto-main/src/main/java/com/facebook/presto/testing/ExpectedQueryRunner.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxODoyNzoxOFrOIHTOiQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxODoyNzoxOFrOIHTOiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDUyNTk2MQ==", "bodyText": "Does it have to be explicitly declared?", "url": "https://github.com/prestodb/presto/pull/15524#discussion_r544525961", "createdAt": "2020-12-16T18:27:18Z", "author": {"login": "arhimondr"}, "path": "presto-main/src/main/java/com/facebook/presto/testing/ExpectedQueryRunner.java", "diffHunk": "@@ -0,0 +1,29 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.testing;\n+\n+import com.facebook.presto.Session;\n+import com.facebook.presto.common.type.Type;\n+import org.intellij.lang.annotations.Language;\n+\n+import java.io.Closeable;\n+import java.util.List;\n+\n+public interface ExpectedQueryRunner\n+        extends Closeable\n+{\n+    @Override\n+    void close();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "550de840febaf4431b8ce23674600ef69a91b16f"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQyMTg4MTA5OnYy", "diffSide": "RIGHT", "path": "presto-tests/src/main/java/com/facebook/presto/tests/QueryAssertions.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxODoyODoyMVrOIHTRNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNlQxODoyODoyMVrOIHTRNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDUyNjY0Nw==", "bodyText": "nit: control: ?", "url": "https://github.com/prestodb/presto/pull/15524#discussion_r544526647", "createdAt": "2020-12-16T18:28:21Z", "author": {"login": "arhimondr"}, "path": "presto-tests/src/main/java/com/facebook/presto/tests/QueryAssertions.java", "diffHunk": "@@ -158,14 +159,14 @@ private static void assertQuery(\n         long expectedStart = System.nanoTime();\n         MaterializedResult expectedResults = null;\n         try {\n-            expectedResults = h2QueryRunner.execute(session, expected, actualResults.getTypes());\n+            expectedResults = expectedQueryRunner.execute(session, expected, actualResults.getTypes());\n         }\n         catch (RuntimeException ex) {\n             fail(\"Execution of 'expected' query failed: \" + expected, ex);\n         }\n         Duration totalTime = nanosSince(start);\n         if (totalTime.compareTo(Duration.succinctDuration(1, SECONDS)) > 0) {\n-            log.info(\"FINISHED in presto: %s, h2: %s, total: %s\", actualTime, nanosSince(expectedStart), totalTime);\n+            log.info(\"FINISHED in presto: %s, expected: %s, total: %s\", actualTime, nanosSince(expectedStart), totalTime);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "550de840febaf4431b8ce23674600ef69a91b16f"}, "originalPosition": 59}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3281, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}