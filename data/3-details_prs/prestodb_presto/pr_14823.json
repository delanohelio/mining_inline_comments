{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ3Mjk4OTcx", "number": 14823, "title": "Support customizable ways of launching Presto queries in Verifier", "bodyText": "Depended by https://github.com/facebookexternal/presto-facebook/pull/1081\n== RELEASE NOTES ==\n\nVerifier Changes\n* Fix an issue where Verifier fails to start when failure resolver is disabled.\n* Add support to implement customized way of launching Presto queries.\n* Add support to run helper queries on a separate cluster other than the control cluster.", "createdAt": "2020-07-10T08:20:09Z", "url": "https://github.com/prestodb/presto/pull/14823", "merged": true, "mergeCommit": {"oid": "52a7529cbd372cb8c654163d48f3e7f9e79e91f3"}, "closed": true, "closedAt": "2020-07-30T20:57:53Z", "author": {"login": "caithagoras"}, "timelineItems": {"totalCount": 48, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczfQNfgBqjM1MzI4NzEwMjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc5yQT1ABqjM2MDEwMzAzOTQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4e41626eee7ffcc915acbd4ebc533adf70105afc", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/4e41626eee7ffcc915acbd4ebc533adf70105afc", "committedDate": "2020-07-10T08:17:44Z", "message": "Add all QueryStats information to verification results"}, "afterCommit": {"oid": "22da654856bda783982fadd3f43bf05c4bc1a9bc", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/22da654856bda783982fadd3f43bf05c4bc1a9bc", "committedDate": "2020-07-10T08:20:52Z", "message": "Add all QueryStats information to verification results"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "22da654856bda783982fadd3f43bf05c4bc1a9bc", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/22da654856bda783982fadd3f43bf05c4bc1a9bc", "committedDate": "2020-07-10T08:20:52Z", "message": "Add all QueryStats information to verification results"}, "afterCommit": {"oid": "3f61b1d757077142690e3c0bff5a98af472cc4db", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/3f61b1d757077142690e3c0bff5a98af472cc4db", "committedDate": "2020-07-10T08:24:27Z", "message": "Add all QueryStats information to verification results"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3f61b1d757077142690e3c0bff5a98af472cc4db", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/3f61b1d757077142690e3c0bff5a98af472cc4db", "committedDate": "2020-07-10T08:24:27Z", "message": "Add all QueryStats information to verification results"}, "afterCommit": {"oid": "be26ad58d78559200d3190b29efaac151eb61948", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/be26ad58d78559200d3190b29efaac151eb61948", "committedDate": "2020-07-10T08:26:16Z", "message": "Add all QueryStats information to verification results"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "be26ad58d78559200d3190b29efaac151eb61948", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/be26ad58d78559200d3190b29efaac151eb61948", "committedDate": "2020-07-10T08:26:16Z", "message": "Add all QueryStats information to verification results"}, "afterCommit": {"oid": "4b6319ec2e0f49e773e1e036eb9cc82abb0fb035", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/4b6319ec2e0f49e773e1e036eb9cc82abb0fb035", "committedDate": "2020-07-10T08:49:10Z", "message": "Add all QueryStats information to verification results"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4b6319ec2e0f49e773e1e036eb9cc82abb0fb035", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/4b6319ec2e0f49e773e1e036eb9cc82abb0fb035", "committedDate": "2020-07-10T08:49:10Z", "message": "Add all QueryStats information to verification results"}, "afterCommit": {"oid": "d81fea21018de980a508a93abc24edf879864c46", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/d81fea21018de980a508a93abc24edf879864c46", "committedDate": "2020-07-10T08:54:35Z", "message": "Support customizable ways of launching Presto queries in Verifier\n\nThere are use cases to launch control and test Presto queries through a\ndifferent way other than JDBC. This commit provides a way to write\ncustomized QueryAction and plug it into the Verifer.\n\n- Introduce QueryAction-related interfaces.\n- Support specifying a \"helper\" cluster, a cluster to run helper\n  queries (describe, checksum, etc.). By default, help cluster is\n  the control cluster. If the control QueryAction does not support\n  data fetching, a separate helper cluster must be specified.\n- Replace RoutingPrestoAction with QueryActions.\n- Add an option to specify whether to run setup/teardown queries on\n  the control/test clusters or on the helper cluster."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d81fea21018de980a508a93abc24edf879864c46", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/d81fea21018de980a508a93abc24edf879864c46", "committedDate": "2020-07-10T08:54:35Z", "message": "Support customizable ways of launching Presto queries in Verifier\n\nThere are use cases to launch control and test Presto queries through a\ndifferent way other than JDBC. This commit provides a way to write\ncustomized QueryAction and plug it into the Verifer.\n\n- Introduce QueryAction-related interfaces.\n- Support specifying a \"helper\" cluster, a cluster to run helper\n  queries (describe, checksum, etc.). By default, help cluster is\n  the control cluster. If the control QueryAction does not support\n  data fetching, a separate helper cluster must be specified.\n- Replace RoutingPrestoAction with QueryActions.\n- Add an option to specify whether to run setup/teardown queries on\n  the control/test clusters or on the helper cluster."}, "afterCommit": {"oid": "d1ef51b4fa4c774142dcac3ae06f934f26350871", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/d1ef51b4fa4c774142dcac3ae06f934f26350871", "committedDate": "2020-07-10T08:56:22Z", "message": "Support customizable ways of launching Presto queries in Verifier\n\nThere are use cases to launch control and test Presto queries through a\ndifferent way other than JDBC. This commit provides a way to write\ncustomized QueryAction and plug it into the Verifer.\n\n- Introduce QueryAction-related interfaces.\n- Support specifying a \"helper\" cluster, a cluster to run helper\n  queries (describe, checksum, etc.). By default, help cluster is\n  the control cluster. If the control QueryAction does not support\n  data fetching, a separate helper cluster must be specified.\n- Replace RoutingPrestoAction with QueryActions.\n- Add an option to specify whether to run setup/teardown queries on\n  the control/test clusters or on the helper cluster."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c150bde2fbf4a15069d284d432648a72c361d11c", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/c150bde2fbf4a15069d284d432648a72c361d11c", "committedDate": "2020-07-10T09:46:24Z", "message": "Use a single metadata-timeout and checksum-timeout\n\nmetadata-timeout and checksum-timeout can be defined for control\ncluster and test cluster separately. Now that we have 3 different\ncluster types, this could be confusing.\n\nMove both config to QueryActionsConfig so that there is only one\ntop level config for metadata-timeout and checksum-timeout."}, "afterCommit": {"oid": "899498aba40b16e107cb88ae41ddf9fbf49c44ad", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/899498aba40b16e107cb88ae41ddf9fbf49c44ad", "committedDate": "2020-07-10T09:48:20Z", "message": "Use a single metadata-timeout and checksum-timeout\n\nmetadata-timeout and checksum-timeout can be defined for control\ncluster and test cluster separately. Now that we have 3 different\ncluster types, this could be confusing.\n\nMove both config to QueryActionsConfig so that there is only one\ntop level config for metadata-timeout and checksum-timeout."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2NjIyMzgx", "url": "https://github.com/prestodb/presto/pull/14823#pullrequestreview-446622381", "createdAt": "2020-07-10T18:37:15Z", "commit": {"oid": "899498aba40b16e107cb88ae41ddf9fbf49c44ad"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2NjI0ODg3", "url": "https://github.com/prestodb/presto/pull/14823#pullrequestreview-446624887", "createdAt": "2020-07-10T18:40:44Z", "commit": {"oid": "899498aba40b16e107cb88ae41ddf9fbf49c44ad"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2NjI1MzI0", "url": "https://github.com/prestodb/presto/pull/14823#pullrequestreview-446625324", "createdAt": "2020-07-10T18:41:31Z", "commit": {"oid": "899498aba40b16e107cb88ae41ddf9fbf49c44ad"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2NjQyMjI0", "url": "https://github.com/prestodb/presto/pull/14823#pullrequestreview-446642224", "createdAt": "2020-07-10T19:10:57Z", "commit": {"oid": "899498aba40b16e107cb88ae41ddf9fbf49c44ad"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxOToxMDo1N1rOGwCz9w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxOToxMDo1N1rOGwCz9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzAzMDkwMw==", "bodyText": "Should it be called JdbcPrestoActionConfig?", "url": "https://github.com/prestodb/presto/pull/14823#discussion_r453030903", "createdAt": "2020-07-10T19:10:57Z", "author": {"login": "arhimondr"}, "path": "presto-verifier/src/main/java/com/facebook/presto/verifier/prestoaction/PrestoActionConfig.java", "diffHunk": "@@ -26,20 +26,18 @@\n \n import java.io.IOException;\n import java.util.Map;\n+import java.util.Optional;\n \n import static java.util.concurrent.TimeUnit.MINUTES;\n \n-public class PrestoClusterConfig\n+public class PrestoActionConfig", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "899498aba40b16e107cb88ae41ddf9fbf49c44ad"}, "originalPosition": 9}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "899498aba40b16e107cb88ae41ddf9fbf49c44ad", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/899498aba40b16e107cb88ae41ddf9fbf49c44ad", "committedDate": "2020-07-10T09:48:20Z", "message": "Use a single metadata-timeout and checksum-timeout\n\nmetadata-timeout and checksum-timeout can be defined for control\ncluster and test cluster separately. Now that we have 3 different\ncluster types, this could be confusing.\n\nMove both config to QueryActionsConfig so that there is only one\ntop level config for metadata-timeout and checksum-timeout."}, "afterCommit": {"oid": "9b789a778dc9b48aacfe7515a990120ee3b6b490", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/9b789a778dc9b48aacfe7515a990120ee3b6b490", "committedDate": "2020-07-16T19:56:03Z", "message": "Use a single metadata-timeout and checksum-timeout\n\nmetadata-timeout and checksum-timeout can be defined for control\ncluster and test cluster separately. Now that we have 3 different\ncluster types, this could be confusing.\n\nMove both config to QueryActionsConfig so that there is only one\ntop level config for metadata-timeout and checksum-timeout."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9b789a778dc9b48aacfe7515a990120ee3b6b490", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/9b789a778dc9b48aacfe7515a990120ee3b6b490", "committedDate": "2020-07-16T19:56:03Z", "message": "Use a single metadata-timeout and checksum-timeout\n\nmetadata-timeout and checksum-timeout can be defined for control\ncluster and test cluster separately. Now that we have 3 different\ncluster types, this could be confusing.\n\nMove both config to QueryActionsConfig so that there is only one\ntop level config for metadata-timeout and checksum-timeout."}, "afterCommit": {"oid": "fcfd450dcab26298583aae2ec639e2e94490b105", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/fcfd450dcab26298583aae2ec639e2e94490b105", "committedDate": "2020-07-17T21:55:37Z", "message": "Use a single metadata-timeout and checksum-timeout\n\nmetadata-timeout and checksum-timeout can be defined for control\ncluster and test cluster separately. Now that we have 3 different\ncluster types, this could be confusing.\n\nMove both config to QueryActionsConfig so that there is only one\ntop level config for metadata-timeout and checksum-timeout."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fcfd450dcab26298583aae2ec639e2e94490b105", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/fcfd450dcab26298583aae2ec639e2e94490b105", "committedDate": "2020-07-17T21:55:37Z", "message": "Use a single metadata-timeout and checksum-timeout\n\nmetadata-timeout and checksum-timeout can be defined for control\ncluster and test cluster separately. Now that we have 3 different\ncluster types, this could be confusing.\n\nMove both config to QueryActionsConfig so that there is only one\ntop level config for metadata-timeout and checksum-timeout."}, "afterCommit": {"oid": "c081b59f90f6cf153db064c1dd110cd2b00c5228", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/c081b59f90f6cf153db064c1dd110cd2b00c5228", "committedDate": "2020-07-17T21:56:40Z", "message": "Use a single metadata-timeout and checksum-timeout\n\nmetadata-timeout and checksum-timeout can be defined for control\ncluster and test cluster separately. Now that we have 3 different\ncluster types, this could be confusing.\n\nMove both config to QueryActionsConfig so that there is only one\ntop level config for metadata-timeout and checksum-timeout."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c081b59f90f6cf153db064c1dd110cd2b00c5228", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/c081b59f90f6cf153db064c1dd110cd2b00c5228", "committedDate": "2020-07-17T21:56:40Z", "message": "Use a single metadata-timeout and checksum-timeout\n\nmetadata-timeout and checksum-timeout can be defined for control\ncluster and test cluster separately. Now that we have 3 different\ncluster types, this could be confusing.\n\nMove both config to QueryActionsConfig so that there is only one\ntop level config for metadata-timeout and checksum-timeout."}, "afterCommit": {"oid": "679e52f18be2b27c0fd3d9e251ba60e4ef8bccd8", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/679e52f18be2b27c0fd3d9e251ba60e4ef8bccd8", "committedDate": "2020-07-17T21:57:55Z", "message": "Use a single metadata-timeout and checksum-timeout\n\nmetadata-timeout and checksum-timeout can be defined for control\ncluster and test cluster separately. Now that we have 3 different\ncluster types, this could be confusing.\n\nMove both config to QueryActionsConfig so that there is only one\ntop level config for metadata-timeout and checksum-timeout."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "679e52f18be2b27c0fd3d9e251ba60e4ef8bccd8", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/679e52f18be2b27c0fd3d9e251ba60e4ef8bccd8", "committedDate": "2020-07-17T21:57:55Z", "message": "Use a single metadata-timeout and checksum-timeout\n\nmetadata-timeout and checksum-timeout can be defined for control\ncluster and test cluster separately. Now that we have 3 different\ncluster types, this could be confusing.\n\nMove both config to QueryActionsConfig so that there is only one\ntop level config for metadata-timeout and checksum-timeout."}, "afterCommit": {"oid": "4f8364e1ca8192f4e1d775e7132430a40b3a2247", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/4f8364e1ca8192f4e1d775e7132430a40b3a2247", "committedDate": "2020-07-17T22:02:06Z", "message": "Use a single metadata-timeout and checksum-timeout\n\nmetadata-timeout and checksum-timeout can be defined for control\ncluster and test cluster separately. Now that we have 3 different\ncluster types, this could be confusing.\n\nMove both config to QueryActionsConfig so that there is only one\ntop level config for metadata-timeout and checksum-timeout."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0a84b5887fb1efad4fa45ab60092abab9ce9d2a4", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/0a84b5887fb1efad4fa45ab60092abab9ce9d2a4", "committedDate": "2020-07-17T23:33:57Z", "message": "Move the logic of mangling session properties into a utility method"}, "afterCommit": {"oid": "dabde7b32751729a3ef19e50a41b04324a5568fb", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/dabde7b32751729a3ef19e50a41b04324a5568fb", "committedDate": "2020-07-17T23:41:29Z", "message": "Move the logic of mangling session properties into a utility method"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "51b70804ee139118363cef697df80159416cbe7a", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/51b70804ee139118363cef697df80159416cbe7a", "committedDate": "2020-07-20T19:43:02Z", "message": "Fix binding failure when failure resolver is disabled"}, "afterCommit": {"oid": "8345cf36c19c903e7495940be7a9f4d1906774da", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/8345cf36c19c903e7495940be7a9f4d1906774da", "committedDate": "2020-07-23T18:36:30Z", "message": "test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8345cf36c19c903e7495940be7a9f4d1906774da", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/8345cf36c19c903e7495940be7a9f4d1906774da", "committedDate": "2020-07-23T18:36:30Z", "message": "test"}, "afterCommit": {"oid": "55727ca59eb059db11cb02b466cfea74b1b4bfb7", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/55727ca59eb059db11cb02b466cfea74b1b4bfb7", "committedDate": "2020-07-23T18:42:38Z", "message": "test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0NDM5NDcx", "url": "https://github.com/prestodb/presto/pull/14823#pullrequestreview-454439471", "createdAt": "2020-07-23T19:38:46Z", "commit": {"oid": "eda70357dd12623b0eed56ced97705dfdc48dd92"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxOTozODo0NlrOG2Y4Jg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxOTozODo0NlrOG2Y4Jg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY4Mzg3OA==", "bodyText": "wow. why not using OptionalLong/OptionalDouble?  -- this is irrelevant to this PR though", "url": "https://github.com/prestodb/presto/pull/14823#discussion_r459683878", "createdAt": "2020-07-23T19:38:46Z", "author": {"login": "wenleix"}, "path": "presto-verifier/src/main/java/com/facebook/presto/verifier/event/QueryInfo.java", "diffHunk": "@@ -67,7 +68,8 @@ public QueryInfo(\n             Optional<Double> cpuTimeSecs,\n             Optional<Double> wallTimeSecs,\n             Optional<Long> peakTotalMemoryBytes,\n-            Optional<Long> peakTaskTotalMemoryBytes)\n+            Optional<Long> peakTaskTotalMemoryBytes,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eda70357dd12623b0eed56ced97705dfdc48dd92"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0NDQyMDIy", "url": "https://github.com/prestodb/presto/pull/14823#pullrequestreview-454442022", "createdAt": "2020-07-23T19:42:50Z", "commit": {"oid": "e9f23a78a6be458c949b797e3fdac246b532aad4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxOTo0Mjo1MVrOG2Y_7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yM1QxOTo0Mjo1MVrOG2Y_7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY4NTg3MA==", "bodyText": "what's this? ;)", "url": "https://github.com/prestodb/presto/pull/14823#discussion_r459685870", "createdAt": "2020-07-23T19:42:51Z", "author": {"login": "wenleix"}, "path": "presto-verifier/src/main/java/com/facebook/presto/verifier/event/QueryStatsEvent.java", "diffHunk": "@@ -19,17 +19,26 @@\n \n import javax.annotation.concurrent.Immutable;\n \n+import java.util.Optional;\n+\n import static java.util.Objects.requireNonNull;\n \n @Immutable\n @EventType(\"QueryStatsEvent\")\n public class QueryStatsEvent\n {\n     private final QueryStats queryStats;\n+    private final String extraData;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9f23a78a6be458c949b797e3fdac246b532aad4"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0NDQyOTcw", "url": "https://github.com/prestodb/presto/pull/14823#pullrequestreview-454442970", "createdAt": "2020-07-23T19:44:21Z", "commit": {"oid": "55727ca59eb059db11cb02b466cfea74b1b4bfb7"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0NDQzMTc0", "url": "https://github.com/prestodb/presto/pull/14823#pullrequestreview-454443174", "createdAt": "2020-07-23T19:44:40Z", "commit": {"oid": "55727ca59eb059db11cb02b466cfea74b1b4bfb7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "55727ca59eb059db11cb02b466cfea74b1b4bfb7", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/55727ca59eb059db11cb02b466cfea74b1b4bfb7", "committedDate": "2020-07-23T18:42:38Z", "message": "test"}, "afterCommit": {"oid": "27f5add31ce2cc427af0eddaf9d4014f0e5f4316", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/27f5add31ce2cc427af0eddaf9d4014f0e5f4316", "committedDate": "2020-07-23T20:24:33Z", "message": "test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "27f5add31ce2cc427af0eddaf9d4014f0e5f4316", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/27f5add31ce2cc427af0eddaf9d4014f0e5f4316", "committedDate": "2020-07-23T20:24:33Z", "message": "test"}, "afterCommit": {"oid": "e597cab650679b5a9d6cf702a31ea7bf99464386", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/e597cab650679b5a9d6cf702a31ea7bf99464386", "committedDate": "2020-07-27T21:00:57Z", "message": "test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e597cab650679b5a9d6cf702a31ea7bf99464386", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/e597cab650679b5a9d6cf702a31ea7bf99464386", "committedDate": "2020-07-27T21:00:57Z", "message": "test"}, "afterCommit": {"oid": "29e1fb2c13ce2015548e041dcc533c1e925e8435", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/29e1fb2c13ce2015548e041dcc533c1e925e8435", "committedDate": "2020-07-27T21:49:41Z", "message": "test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "29e1fb2c13ce2015548e041dcc533c1e925e8435", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/29e1fb2c13ce2015548e041dcc533c1e925e8435", "committedDate": "2020-07-27T21:49:41Z", "message": "test"}, "afterCommit": {"oid": "980c245ab84b8487cd022e278e5e20a46934fe9d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/980c245ab84b8487cd022e278e5e20a46934fe9d", "committedDate": "2020-07-27T21:51:19Z", "message": "test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "980c245ab84b8487cd022e278e5e20a46934fe9d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/980c245ab84b8487cd022e278e5e20a46934fe9d", "committedDate": "2020-07-27T21:51:19Z", "message": "test"}, "afterCommit": {"oid": "a790064deec281d5acac24484b86996b8bcfd47a", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/a790064deec281d5acac24484b86996b8bcfd47a", "committedDate": "2020-07-28T22:03:01Z", "message": "test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a790064deec281d5acac24484b86996b8bcfd47a", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/a790064deec281d5acac24484b86996b8bcfd47a", "committedDate": "2020-07-28T22:03:01Z", "message": "test"}, "afterCommit": {"oid": "5fc6527a3e693d195bd88d5188875b0bbe46d8f2", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/5fc6527a3e693d195bd88d5188875b0bbe46d8f2", "committedDate": "2020-07-28T22:03:45Z", "message": "test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5fc6527a3e693d195bd88d5188875b0bbe46d8f2", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/5fc6527a3e693d195bd88d5188875b0bbe46d8f2", "committedDate": "2020-07-28T22:03:45Z", "message": "test"}, "afterCommit": {"oid": "8fa301ce7e220874317475d7815b3f58f1ca5592", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/8fa301ce7e220874317475d7815b3f58f1ca5592", "committedDate": "2020-07-28T22:25:23Z", "message": "test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8fa301ce7e220874317475d7815b3f58f1ca5592", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/8fa301ce7e220874317475d7815b3f58f1ca5592", "committedDate": "2020-07-28T22:25:23Z", "message": "test"}, "afterCommit": {"oid": "10596aa76d9fd26ae2e2352e5ebc8a12e1c03e99", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/10596aa76d9fd26ae2e2352e5ebc8a12e1c03e99", "committedDate": "2020-07-29T19:34:11Z", "message": "test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "10596aa76d9fd26ae2e2352e5ebc8a12e1c03e99", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/10596aa76d9fd26ae2e2352e5ebc8a12e1c03e99", "committedDate": "2020-07-29T19:34:11Z", "message": "test"}, "afterCommit": {"oid": "a751ecbcc16f2479aa1249a1f7779c475b91c433", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/a751ecbcc16f2479aa1249a1f7779c475b91c433", "committedDate": "2020-07-29T20:29:22Z", "message": "test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a751ecbcc16f2479aa1249a1f7779c475b91c433", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/a751ecbcc16f2479aa1249a1f7779c475b91c433", "committedDate": "2020-07-29T20:29:22Z", "message": "test"}, "afterCommit": {"oid": "985d029e93869f1d01a166b540f7cd650d962550", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/985d029e93869f1d01a166b540f7cd650d962550", "committedDate": "2020-07-29T20:32:07Z", "message": "test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "985d029e93869f1d01a166b540f7cd650d962550", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/985d029e93869f1d01a166b540f7cd650d962550", "committedDate": "2020-07-29T20:32:07Z", "message": "test"}, "afterCommit": {"oid": "753c4f77b5060774c9eac8cb5a473893814000d0", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/753c4f77b5060774c9eac8cb5a473893814000d0", "committedDate": "2020-07-29T20:34:26Z", "message": "test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7018f4586411d3ae1b1bc46153899d15b1ef637", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/d7018f4586411d3ae1b1bc46153899d15b1ef637", "committedDate": "2020-07-29T20:38:01Z", "message": "Style improvments in DeterminismAnalyzer\n\nMake fields final and remove unused fields."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34a6906b29caedf86f551f098b9889707f80bbf4", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/34a6906b29caedf86f551f098b9889707f80bbf4", "committedDate": "2020-07-29T20:38:01Z", "message": "Make control.http-port optional\n\nhttp-port is used for fetching cluster size via /v1/node.\nWe only need it when TooManyOpenPartitionsFailureResolver\nrequires the test cluster size. Hence:\n- Make control.http-port optional\n- Make test.http-port required if the specific failure\n  resolver is enabled, else optional.\n\nChanges also needed in this commit:\n- Convert NodeResourceClient to ClusterSizeSupplier.\n- Convert HttpNodeResourceClient to ClusterSizeFetcher."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "753c4f77b5060774c9eac8cb5a473893814000d0", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/753c4f77b5060774c9eac8cb5a473893814000d0", "committedDate": "2020-07-29T20:34:26Z", "message": "test"}, "afterCommit": {"oid": "c7c9cafb414d9bf19903d67008f3cff637dd6bc3", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/c7c9cafb414d9bf19903d67008f3cff637dd6bc3", "committedDate": "2020-07-29T20:38:02Z", "message": "test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dbb17963fb6bc690e465dcb8713e3944b54ed635", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/dbb17963fb6bc690e465dcb8713e3944b54ed635", "committedDate": "2020-07-29T20:44:55Z", "message": "Make the entire JDBC QueryStats available in verification results"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93fb5c52eb109a1957deb30d971130d556748f0c", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/93fb5c52eb109a1957deb30d971130d556748f0c", "committedDate": "2020-07-29T20:44:59Z", "message": "Support customizable ways of launching Presto queries in Verifier\n\nThere are use cases to launch control and test Presto queries through a\ndifferent way other than JDBC. This commit provides a way to write\ncustomized QueryAction and plug it into the Verifer.\n\n- Introduce QueryAction-related interfaces.\n- Support specifying a \"helper\" cluster, a cluster to run helper\n  queries (describe, checksum, etc.). By default, help cluster is\n  the control cluster. If the control QueryAction does not support\n  data fetching, a separate helper cluster must be specified.\n- Replace RoutingPrestoAction with QueryActions.\n- Add an option to specify whether to run setup/teardown queries on\n  the control/test clusters or on the helper cluster."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c7c9cafb414d9bf19903d67008f3cff637dd6bc3", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/c7c9cafb414d9bf19903d67008f3cff637dd6bc3", "committedDate": "2020-07-29T20:38:02Z", "message": "test"}, "afterCommit": {"oid": "043832a988e3786835d16d226e893e03b3379e33", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/043832a988e3786835d16d226e893e03b3379e33", "committedDate": "2020-07-29T20:46:07Z", "message": "test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "043832a988e3786835d16d226e893e03b3379e33", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/043832a988e3786835d16d226e893e03b3379e33", "committedDate": "2020-07-29T20:46:07Z", "message": "test"}, "afterCommit": {"oid": "3f99da3c9e5ceaa1aafe9e82bad1030532022b99", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/3f99da3c9e5ceaa1aafe9e82bad1030532022b99", "committedDate": "2020-07-29T21:25:48Z", "message": "test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e9b86f9a0be04dfb12e89743af208127b817110", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/8e9b86f9a0be04dfb12e89743af208127b817110", "committedDate": "2020-07-29T21:46:54Z", "message": "Allow additional data to be emitted in QueryStatsEvent"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a38463c8f289f281a814c54bc17280783d540380", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/a38463c8f289f281a814c54bc17280783d540380", "committedDate": "2020-07-29T21:46:54Z", "message": "Use a single metadata-timeout and checksum-timeout\n\nmetadata-timeout and checksum-timeout can be defined for control\ncluster and test cluster separately. Now that we have 3 different\ncluster types, this could be confusing.\n\nMove both config to QueryActionsConfig so that there is only one\ntop level config for metadata-timeout and checksum-timeout."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f3754cfea4d93fcd7561fe633ee253f0f5eb1ba", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/8f3754cfea4d93fcd7561fe633ee253f0f5eb1ba", "committedDate": "2020-07-29T21:46:54Z", "message": "Move the logic of mangling session properties into a utility method"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84ad4a4bbfa88e9baa156851b6e89d5293113bb3", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/84ad4a4bbfa88e9baa156851b6e89d5293113bb3", "committedDate": "2020-07-29T21:46:54Z", "message": "Fix binding failure when failure resolver is disabled"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b31e88ab57b0733cca78b66cf7c9457382a4a751", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/b31e88ab57b0733cca78b66cf7c9457382a4a751", "committedDate": "2020-07-29T21:46:54Z", "message": "Move Query#toStatementStats to a utility class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f85b495e17ed90e8ae1371395c0cd0ec0db298c", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/2f85b495e17ed90e8ae1371395c0cd0ec0db298c", "committedDate": "2020-07-29T21:46:55Z", "message": "Introduce additional methods in SqlExceptionClassifier interface\n\nAlso, add a constructor in QueryException to take message"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3f99da3c9e5ceaa1aafe9e82bad1030532022b99", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/3f99da3c9e5ceaa1aafe9e82bad1030532022b99", "committedDate": "2020-07-29T21:25:48Z", "message": "test"}, "afterCommit": {"oid": "2f85b495e17ed90e8ae1371395c0cd0ec0db298c", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/2f85b495e17ed90e8ae1371395c0cd0ec0db298c", "committedDate": "2020-07-29T21:46:55Z", "message": "Introduce additional methods in SqlExceptionClassifier interface\n\nAlso, add a constructor in QueryException to take message"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1244, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}