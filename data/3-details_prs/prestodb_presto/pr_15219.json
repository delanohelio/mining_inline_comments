{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkyMTAzODU4", "number": 15219, "title": "Core support for enums, take #2", "bodyText": "Second attempt to merge #14728\nThis was previously reverted because of a performance regression detected in TypeSignature.parseTypeSignature\nThis regression is addressed in a newly added commit, which includes a benchmark.\nPerformance stats on BenchmarkTypeSignatureParsing are as follows on my machine:\nparseRowTypeSignature\n==================\n* with enum parsing, unoptimized parsing: 600ms/op\n* with enum parsing, optimized parsing: 2ms/op\n* without enum parsing: 2ms/op\n\nparseRowTypeSignatureWithEnums\n==========================\n* with enum parsing, optimized parsing: 2ms/op", "createdAt": "2020-09-23T23:58:00Z", "url": "https://github.com/prestodb/presto/pull/15219", "merged": true, "mergeCommit": {"oid": "cef58ff2037ed4445d7871c8dae1b75a5d14b4ef"}, "closed": true, "closedAt": "2020-09-29T17:55:23Z", "author": {"login": "daniel-ohayon"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdL1-tcAFqTQ5NTE0MTcyMw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdMXjh2gBqjM4MDgyNzI2NDM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1MTQxNzIz", "url": "https://github.com/prestodb/presto/pull/15219#pullrequestreview-495141723", "createdAt": "2020-09-24T00:23:51Z", "commit": {"oid": "54f1ae5184dc54897293d2dc7b1137f8aff862d9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQwMDoyMzo1MVrOHXFkAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQwMDoyMzo1MVrOHXFkAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzk3MDQzMg==", "bodyText": "Can we also add test case for signature with enums?", "url": "https://github.com/prestodb/presto/pull/15219#discussion_r493970432", "createdAt": "2020-09-24T00:23:51Z", "author": {"login": "rongrong"}, "path": "presto-common/src/test/java/com/facebook/presto/common/type/BenchmarkTypeSignatureParsing.java", "diffHunk": "@@ -0,0 +1,70 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.common.type;\n+\n+import org.openjdk.jmh.annotations.Benchmark;\n+import org.openjdk.jmh.annotations.BenchmarkMode;\n+import org.openjdk.jmh.annotations.Fork;\n+import org.openjdk.jmh.annotations.Measurement;\n+import org.openjdk.jmh.annotations.Mode;\n+import org.openjdk.jmh.annotations.OutputTimeUnit;\n+import org.openjdk.jmh.annotations.Scope;\n+import org.openjdk.jmh.annotations.Setup;\n+import org.openjdk.jmh.annotations.State;\n+import org.openjdk.jmh.annotations.Warmup;\n+import org.openjdk.jmh.runner.Runner;\n+import org.openjdk.jmh.runner.options.Options;\n+import org.openjdk.jmh.runner.options.OptionsBuilder;\n+import org.openjdk.jmh.runner.options.VerboseMode;\n+\n+import java.util.concurrent.TimeUnit;\n+\n+@SuppressWarnings(\"MethodMayBeStatic\")\n+@State(Scope.Thread)\n+@OutputTimeUnit(TimeUnit.MILLISECONDS)\n+@Fork(1)\n+@Warmup(iterations = 5, timeUnit = TimeUnit.MILLISECONDS)\n+@Measurement(iterations = 10, timeUnit = TimeUnit.MILLISECONDS)\n+@BenchmarkMode(Mode.AverageTime)\n+public class BenchmarkTypeSignatureParsing\n+{\n+    @Benchmark\n+    public void parseTypeSignature(BenchmarkData data)\n+    {\n+        TypeSignature.parseTypeSignature(data.signature);\n+    }\n+\n+    @State(Scope.Thread)\n+    public static class BenchmarkData\n+    {\n+        private String signature;\n+\n+        @Setup\n+        public void setup()\n+                throws Exception\n+        {\n+            signature = \"array(row(field_20 varchar, field_139 row(field_112 row(field_20 varchar, field_1 bigint, field_92 bigint, field_50 varchar, field_61 row(field_155 varchar), field_122 array(varchar), field_137 varchar, field_166 row(field_61 row(field_155 varchar), field_7 row(field_45 row(field_164 row(field_137 varchar, field_1 bigint, field_92 bigint)))), field_175 array(varchar), field_45 row(field_136 row(field_1 bigint, field_92 bigint), field_62 varchar, field_203 varchar), field_132 row(field_136 row(field_1 bigint, field_92 bigint), field_62 varchar, field_203 varchar)), field_7 row(field_20 varchar, field_1 bigint, field_92 bigint, field_50 varchar, field_234 varchar, field_85 varchar, field_244 varchar, field_72 varchar, field_228 varchar, field_222 bigint, field_21 varchar, field_248 bigint, field_172 bigint, field_205 bigint, field_267 varchar), field_243 row(field_128 boolean), field_210 row(field_1 bigint, field_92 bigint), field_47 row(field_128 boolean, field_67 boolean), field_143 boolean), field_236 row(field_235 varchar, field_249 varchar, field_218 varchar, field_83 row(field_155 varchar)), field_90 bigint, field_92 bigint, field_200 varchar, field_91 bigint, field_97 row(field_11 varchar, field_231 bigint, field_39 array(row(field_1 bigint, field_92 bigint)), field_108 array(row(field_1 bigint, field_92 bigint)), field_230 varchar, field_262 row(field_92 bigint)), field_88 row(field_20 varchar, field_1 bigint, field_92 bigint, field_50 varchar, field_246 row(field_155 varchar), field_7 row(field_234 varchar, field_85 varchar, field_244 varchar, field_72 varchar, field_248 bigint), field_122 array(varchar), field_137 varchar, field_166 row(field_246 row(field_155 varchar), field_7 row(field_234 varchar, field_85 varchar, field_244 varchar, field_72 varchar, field_248 bigint)), field_175 array(varchar)), field_40 row(field_174 varchar, field_66 array(varchar), field_217 array(varchar), field_44 array(row(field_20 varchar, field_1 bigint, field_92 bigint, field_122 array(varchar), field_145 row(field_20 varchar, field_1 bigint, field_92 bigint, field_175 array(varchar), field_166 row(field_7 row(field_234 varchar, field_85 varchar, field_244 varchar, field_72 varchar, field_21 varchar, field_248 bigint, field_172 bigint, field_205 bigint, field_222 bigint), field_61 row(field_155 varchar))), field_260 row(field_233 boolean, field_119 boolean, field_57 bigint, field_162 bigint, field_14 boolean, field_4 double, field_37 double))), field_163 array(row(field_49 varchar, field_117 array(varchar), field_92 bigint)), field_133 array(row(field_268 row(field_92 bigint, field_23 row(field_33 varchar)))), field_111 array(row(field_92 bigint, field_235 varchar)), field_73 bigint), field_137 varchar, field_63 row(field_92 bigint, field_8 varchar, field_153 varchar, field_90 bigint, field_195 bigint, field_265 row(field_68 row(field_1 bigint, field_92 bigint, field_50 varchar, field_137 varchar, field_175 array(varchar)), field_92 bigint, field_90 bigint, field_195 bigint)), field_159 row(field_92 bigint, field_206 double, field_123 double, field_235 varchar), field_259 row(field_190 varchar, field_92 bigint, field_183 boolean), field_180 varchar, field_252 boolean, field_102 row(field_36 varchar, field_184 varchar, field_92 bigint, field_179 varchar, field_9 varchar), field_176 row(field_30 varchar, field_148 bigint, field_2 varchar), field_177 array(row(field_139 row(field_112 row(field_20 varchar, field_1 bigint, field_92 bigint, field_50 varchar, field_61 row(field_155 varchar), field_122 array(varchar), field_137 varchar, field_166 row(field_61 row(field_155 varchar), field_7 row(field_45 row(field_164 row(field_137 varchar, field_1 bigint, field_92 bigint)))), field_175 array(varchar), field_45 row(field_136 row(field_1 bigint, field_92 bigint), field_62 varchar, field_203 varchar), field_132 row(field_136 row(field_1 bigint, field_92 bigint), field_62 varchar, field_203 varchar)), field_7 row(field_20 varchar, field_1 bigint, field_92 bigint, field_50 varchar, field_234 varchar, field_85 varchar, field_244 varchar, field_72 varchar, field_228 varchar, field_222 bigint, field_21 varchar, field_248 bigint, field_172 bigint, field_205 bigint), field_243 row(field_128 boolean), field_210 row(field_1 bigint, field_92 bigint), field_47 row(field_128 boolean, field_67 boolean), field_143 boolean), field_92 bigint, field_137 varchar, field_63 row(field_92 bigint, field_8 varchar, field_153 varchar, field_90 bigint, field_195 bigint, field_265 row(field_68 row(field_1 bigint, field_92 bigint, field_50 varchar, field_137 varchar, field_175 array(varchar)), field_92 bigint, field_90 bigint, field_195 bigint)), field_51 varchar, field_24 array(row(field_20 varchar, field_1 bigint, field_92 bigint, field_50 varchar, field_122 array(varchar), field_145 row(field_20 varchar, field_137 varchar, field_1 bigint, field_92 bigint, field_175 array(varchar), field_166 row(field_7 row(field_234 varchar, field_85 varchar, field_244 varchar, field_72 varchar, field_21 varchar, field_248 bigint, field_172 bigint, field_205 bigint, field_222 bigint), field_61 row(field_155 varchar))), field_260 row(field_233 boolean, field_119 boolean, field_57 bigint, field_162 bigint, field_14 boolean, field_4 double, field_37 double))), field_118 bigint, field_138 boolean, field_186 varchar, field_52 bigint, field_241 boolean, field_198 row(field_149 varchar), field_169 array(row(field_125 varchar, field_92 bigint)), field_157 row(field_92 bigint, field_206 double, field_123 double, field_235 varchar), field_164 varchar, field_31 row(field_92 bigint, field_214 bigint, field_229 row(field_92 bigint), field_167 bigint), field_93 array(row(field_40 row(field_174 varchar), field_251 row(field_92 bigint, field_268 row(field_23 row(field_33 varchar, field_92 bigint, field_235 varchar), field_92 bigint, field_9 varchar)))), field_261 row(field_140 varchar, field_79 array(row(field_92 bigint, field_235 varchar, field_131 double))), field_144 row(field_253 bigint), field_170 varchar, field_258 varchar, field_237 array(row(field_58 double, field_76 double, field_69 varchar)), field_25 row(field_235 varchar, field_9 varchar, field_219 varchar, field_105 bigint), field_141 row(field_235 varchar, field_9 varchar, field_219 varchar), field_6 array(row(field_235 varchar, field_9 varchar, field_219 varchar, field_105 bigint)))), field_22 row(field_41 row(field_20 varchar, field_139 row(field_112 row(field_20 varchar, field_1 bigint, field_92 bigint, field_122 array(varchar), field_50 varchar, field_61 row(field_155 varchar), field_137 varchar, field_166 row(field_61 row(field_155 varchar), field_7 row(field_45 row(field_164 row(field_137 varchar, field_1 bigint, field_92 bigint)))), field_175 array(varchar), field_45 row(field_136 row(field_1 bigint, field_92 bigint), field_62 varchar, field_203 varchar), field_132 row(field_136 row(field_1 bigint, field_92 bigint), field_62 varchar, field_203 varchar)), field_7 row(field_20 varchar, field_1 bigint, field_92 bigint, field_50 varchar, field_234 varchar, field_85 varchar, field_244 varchar, field_72 varchar, field_228 varchar, field_222 bigint, field_21 varchar, field_248 bigint, field_172 bigint, field_205 bigint), field_243 row(field_128 boolean), field_210 row(field_1 bigint, field_92 bigint), field_47 row(field_128 boolean, field_67 boolean), field_143 boolean), field_92 bigint, field_263 row(field_118 bigint, field_186 varchar, field_52 bigint, field_169 array(row(field_125 varchar, field_92 bigint))), field_40 row(field_174 varchar, field_66 array(varchar), field_217 array(varchar), field_163 array(row(field_49 varchar, field_117 array(varchar), field_92 bigint)), field_111 array(row(field_92 bigint, field_235 varchar)), field_73 bigint), field_202 row(field_177 array(row(field_92 bigint, field_137 varchar, field_51 varchar, field_118 bigint, field_138 boolean, field_186 varchar, field_52 bigint, field_241 boolean, field_169 array(row(field_125 varchar, field_92 bigint)))), field_192 row(field_211 boolean, field_251 row(field_35 varchar, field_92 bigint, field_110 row(field_33 varchar, field_235 varchar, field_92 bigint))), field_158 array(row(field_92 bigint, field_137 varchar, field_51 varchar, field_208 boolean, field_95 varchar, field_94 varchar, field_42 double, field_169 array(row(field_125 varchar, field_92 bigint)))), field_38 varchar), field_88 row(field_20 varchar, field_1 bigint, field_92 bigint, field_122 array(varchar), field_175 array(varchar)), field_90 bigint, field_99 array(row(field_92 bigint, field_54 varchar, field_204 row(field_113 row(field_20 varchar, field_1 bigint, field_92 bigint, field_50 varchar, field_122 array(varchar))), field_12 row(field_86 array(varchar), field_264 varchar), field_225 row(field_100 varchar), field_166 row(field_225 row(field_100 varchar), field_204 row(field_113 row(field_20 varchar, field_137 varchar, field_1 bigint, field_92 bigint, field_175 array(varchar))), field_12 row(field_26 row(field_86 array(row(field_220 varchar)), field_264 row(field_174 varchar))), field_227 row(field_254 row(field_92 bigint, field_206 double, field_123 double, field_235 varchar)), field_216 row(field_182 bigint, field_86 array(row(field_40 varchar)), field_264 varchar), field_81 row(field_176 row(field_30 varchar, field_148 bigint, field_2 varchar)), field_10 row(field_168 varchar), field_247 row(field_19 bigint), field_232 row(field_8 row(field_174 varchar)), field_250 row(field_212 varchar)), field_40 row(field_174 varchar))), field_166 row(field_263 row(field_118 bigint, field_52 bigint, field_169 array(row(field_125 varchar, field_92 bigint)), field_186 varchar), field_202 row(field_177 array(row(field_137 varchar, field_92 bigint, field_51 varchar, field_118 bigint, field_52 bigint, field_169 array(row(field_125 varchar, field_92 bigint)), field_138 boolean, field_186 varchar, field_241 boolean, field_31 row(field_229 row(field_92 bigint)))), field_192 row(field_211 boolean, field_251 row(field_92 bigint, field_268 row(field_23 row(field_33 varchar, field_92 bigint, field_235 varchar), field_9 varchar, field_92 bigint))), field_158 array(row(field_137 varchar, field_92 bigint, field_51 varchar, field_169 array(row(field_125 varchar, field_92 bigint)), field_208 boolean, field_95 varchar, field_94 varchar, field_42 double, field_31 row(field_229 row(field_92 bigint)), field_90 bigint, field_195 bigint, field_97 row(field_11 varchar, field_231 bigint, field_230 varchar, field_262 row(field_92 bigint)), field_191 varchar, field_5 bigint, field_8 varchar, field_194 row(field_213 boolean))), field_38 varchar)), field_185 row(field_92 bigint, field_113 row(field_20 varchar, field_1 bigint, field_92 bigint, field_175 array(varchar)), field_27 row(field_92 bigint)), field_200 varchar, field_175 array(varchar)), field_48 row(field_20 varchar, field_139 row(field_112 row(field_20 varchar, field_1 bigint, field_92 bigint, field_122 array(varchar), field_50 varchar, field_61 row(field_155 varchar), field_137 varchar, field_166 row(field_61 row(field_155 varchar), field_7 row(field_45 row(field_164 row(field_137 varchar, field_1 bigint, field_92 bigint)))), field_175 array(varchar), field_45 row(field_136 row(field_1 bigint, field_92 bigint), field_62 varchar, field_203 varchar), field_132 row(field_136 row(field_1 bigint, field_92 bigint), field_62 varchar, field_203 varchar)), field_7 row(field_20 varchar, field_1 bigint, field_92 bigint, field_50 varchar, field_234 varchar, field_85 varchar, field_244 varchar, field_72 varchar, field_228 varchar, field_222 bigint, field_21 varchar, field_248 bigint, field_172 bigint, field_205 bigint), field_243 row(field_128 boolean), field_210 row(field_1 bigint, field_92 bigint), field_47 row(field_128 boolean, field_67 boolean), field_143 boolean), field_92 bigint, field_263 row(field_118 bigint, field_186 varchar, field_52 bigint, field_169 array(row(field_125 varchar, field_92 bigint))), field_40 row(field_174 varchar, field_66 array(varchar), field_217 array(varchar), field_163 array(row(field_49 varchar, field_117 array(varchar), field_92 bigint)), field_111 array(row(field_92 bigint, field_235 varchar)), field_73 bigint), field_202 row(field_177 array(row(field_92 bigint, field_137 varchar, field_51 varchar, field_118 bigint, field_138 boolean, field_186 varchar, field_52 bigint, field_241 boolean, field_169 array(row(field_125 varchar, field_92 bigint)))), field_192 row(field_211 boolean, field_251 row(field_35 varchar, field_92 bigint, field_110 row(field_33 varchar, field_235 varchar, field_92 bigint))), field_158 array(row(field_92 bigint, field_137 varchar, field_51 varchar, field_208 boolean, field_95 varchar, field_94 varchar, field_42 double, field_169 array(row(field_125 varchar, field_92 bigint)))), field_38 varchar), field_88 row(field_20 varchar, field_1 bigint, field_92 bigint, field_122 array(varchar), field_175 array(varchar)), field_90 bigint, field_99 array(row(field_92 bigint, field_54 varchar, field_204 row(field_113 row(field_20 varchar, field_1 bigint, field_92 bigint, field_50 varchar, field_122 array(varchar))), field_12 row(field_86 array(varchar), field_264 varchar), field_225 row(field_100 varchar), field_166 row(field_225 row(field_100 varchar), field_204 row(field_113 row(field_20 varchar, field_137 varchar, field_1 bigint, field_92 bigint, field_175 array(varchar))), field_12 row(field_26 row(field_86 array(row(field_220 varchar)), field_264 row(field_174 varchar))), field_227 row(field_254 row(field_92 bigint, field_206 double, field_123 double, field_235 varchar)), field_216 row(field_182 bigint, field_86 array(row(field_40 varchar)), field_264 varchar), field_81 row(field_176 row(field_30 varchar, field_148 bigint, field_2 varchar)), field_10 row(field_168 varchar), field_247 row(field_19 bigint), field_232 row(field_8 row(field_174 varchar)), field_250 row(field_212 varchar)), field_40 row(field_174 varchar))), field_166 row(field_263 row(field_118 bigint, field_52 bigint, field_169 array(row(field_125 varchar, field_92 bigint)), field_186 varchar), field_202 row(field_177 array(row(field_137 varchar, field_92 bigint, field_51 varchar, field_118 bigint, field_52 bigint, field_169 array(row(field_125 varchar, field_92 bigint)), field_138 boolean, field_186 varchar, field_241 boolean, field_31 row(field_229 row(field_92 bigint)))), field_192 row(field_211 boolean, field_251 row(field_92 bigint, field_268 row(field_23 row(field_33 varchar, field_92 bigint, field_235 varchar), field_9 varchar, field_92 bigint))), field_158 array(row(field_137 varchar, field_92 bigint, field_51 varchar, field_169 array(row(field_125 varchar, field_92 bigint)), field_208 boolean, field_95 varchar, field_94 varchar, field_42 double, field_31 row(field_229 row(field_92 bigint)), field_90 bigint, field_195 bigint, field_97 row(field_11 varchar, field_231 bigint, field_230 varchar, field_262 row(field_92 bigint)), field_191 varchar, field_5 bigint, field_8 varchar, field_194 row(field_213 boolean))), field_38 varchar)), field_185 row(field_92 bigint, field_113 row(field_20 varchar, field_1 bigint, field_92 bigint, field_175 array(varchar)), field_27 row(field_92 bigint)), field_200 varchar, field_175 array(varchar)), field_124 bigint, field_150 boolean), field_192 row(field_64 boolean, field_211 boolean, field_92 bigint, field_221 varchar, field_251 row(field_106 varchar, field_35 varchar, field_90 bigint, field_23 varchar, field_70 varchar, field_92 bigint, field_8 varchar, field_7 varchar, field_110 row(field_33 varchar, field_235 varchar, field_92 bigint), field_147 array(varchar), field_114 row(field_1 bigint, field_92 bigint), field_134 row(field_92 bigint, field_188 row(field_1 bigint, field_92 bigint)), field_121 varchar, field_165 bigint, field_256 varchar, field_268 row(field_106 varchar, field_77 array(varchar), field_89 bigint, field_23 row(field_33 varchar, field_92 bigint, field_235 varchar), field_134 row(field_92 bigint, field_188 row(field_1 bigint, field_92 bigint)), field_121 varchar, field_61 row(field_1 bigint, field_92 bigint), field_154 bigint, field_8 varchar, field_9 varchar, field_92 bigint)), field_178 varchar, field_8 varchar), field_209 bigint, field_158 array(row(field_139 row(field_112 row(field_20 varchar, field_1 bigint, field_92 bigint, field_50 varchar, field_61 row(field_155 varchar), field_122 array(varchar), field_137 varchar, field_166 row(field_61 row(field_155 varchar), field_7 row(field_45 row(field_164 row(field_137 varchar, field_1 bigint, field_92 bigint)))), field_175 array(varchar)), field_7 row(field_20 varchar, field_1 bigint, field_92 bigint, field_50 varchar, field_234 varchar, field_85 varchar, field_244 varchar, field_72 varchar, field_228 varchar, field_222 bigint, field_21 varchar, field_248 bigint, field_172 bigint, field_205 bigint)), field_92 bigint, field_137 varchar, field_63 row(field_92 bigint, field_8 varchar, field_153 varchar, field_90 bigint, field_195 bigint, field_265 row(field_68 row(field_1 bigint, field_92 bigint, field_50 varchar, field_137 varchar, field_175 array(varchar)), field_92 bigint, field_90 bigint, field_195 bigint)), field_51 varchar, field_24 array(row(field_20 varchar, field_1 bigint, field_92 bigint, field_50 varchar, field_122 array(varchar), field_145 row(field_20 varchar, field_137 varchar, field_1 bigint, field_92 bigint, field_175 array(varchar), field_166 row(field_7 row(field_234 varchar, field_85 varchar, field_244 varchar, field_72 varchar, field_21 varchar, field_248 bigint, field_172 bigint, field_205 bigint, field_222 bigint), field_61 row(field_155 varchar))), field_260 row(field_233 boolean, field_119 boolean, field_57 bigint, field_162 bigint, field_14 boolean, field_4 double, field_37 double))), field_208 boolean, field_95 varchar, field_94 varchar, field_169 array(row(field_125 varchar, field_92 bigint)), field_157 row(field_92 bigint, field_206 double, field_123 double, field_235 varchar), field_164 varchar, field_80 row(field_92 bigint), field_93 array(row(field_40 row(field_174 varchar), field_251 row(field_92 bigint, field_268 row(field_23 row(field_33 varchar, field_92 bigint, field_235 varchar), field_92 bigint, field_9 varchar)))), field_31 row(field_92 bigint, field_214 bigint, field_229 row(field_92 bigint), field_167 bigint), field_90 bigint, field_195 bigint, field_97 row(field_11 varchar, field_231 bigint, field_39 array(row(field_1 bigint, field_92 bigint)), field_108 array(row(field_1 bigint, field_92 bigint)), field_230 varchar, field_262 row(field_92 bigint)), field_160 row(field_126 bigint, field_226 bigint), field_13 array(row(field_9 varchar)), field_118 bigint, field_52 bigint, field_138 boolean, field_78 bigint, field_42 double, field_194 row(field_92 bigint), field_115 row(field_32 array(row(field_82 bigint)), field_139 row(field_112 row(field_20 varchar, field_1 bigint, field_92 bigint, field_175 array(varchar), field_166 row(field_61 row(field_155 varchar, field_107 row(field_201 varchar, field_129 varchar))), field_137 varchar, field_45 row(field_136 row(field_1 bigint, field_92 bigint), field_62 varchar, field_203 varchar), field_132 row(field_136 row(field_1 bigint, field_92 bigint), field_62 varchar, field_203 varchar)), field_7 row(field_20 varchar, field_1 bigint, field_92 bigint, field_72 varchar, field_21 varchar, field_248 bigint, field_172 bigint, field_228 varchar), field_243 row(field_128 boolean), field_210 row(field_1 bigint, field_92 bigint), field_47 row(field_128 boolean, field_67 boolean), field_143 boolean), field_90 bigint, field_53 array(row(field_92 bigint)), field_92 bigint, field_245 boolean, field_16 boolean, field_121 varchar, field_199 row(field_92 bigint), field_193 row(field_171 varchar, field_71 varchar, field_15 varchar, field_92 bigint, field_3 varchar), field_236 row(field_235 varchar)), field_156 array(row(field_92 bigint)), field_191 varchar, field_84 boolean, field_5 bigint, field_239 varchar, field_8 varchar, field_261 row(field_140 varchar, field_79 array(row(field_92 bigint, field_235 varchar, field_131 double))), field_152 row(field_197 boolean, field_96 array(row(field_58 double, field_76 double, field_69 varchar, field_257 bigint))), field_144 row(field_181 bigint))), field_55 row(field_59 row(field_139 row(field_112 row(field_20 varchar, field_1 bigint, field_92 bigint, field_50 varchar, field_61 row(field_155 varchar), field_122 array(varchar), field_137 varchar, field_166 row(field_61 row(field_155 varchar), field_7 row(field_45 row(field_164 row(field_137 varchar, field_1 bigint, field_92 bigint)))), field_175 array(varchar), field_45 row(field_136 row(field_1 bigint, field_92 bigint), field_62 varchar, field_203 varchar), field_132 row(field_136 row(field_1 bigint, field_92 bigint), field_62 varchar, field_203 varchar)), field_7 row(field_20 varchar, field_1 bigint, field_92 bigint, field_50 varchar, field_234 varchar, field_85 varchar, field_244 varchar, field_72 varchar, field_228 varchar, field_222 bigint, field_21 varchar, field_248 bigint, field_172 bigint, field_205 bigint), field_243 row(field_128 boolean), field_210 row(field_1 bigint, field_92 bigint), field_47 row(field_128 boolean, field_67 boolean), field_143 boolean), field_92 bigint, field_95 varchar, field_169 array(row(field_125 varchar, field_92 bigint))), field_92 bigint, field_223 bigint), field_46 array(row(field_20 varchar, field_1 bigint, field_92 bigint, field_50 varchar, field_122 array(varchar), field_145 row(field_20 varchar, field_137 varchar, field_1 bigint, field_92 bigint, field_175 array(varchar), field_166 row(field_7 row(field_234 varchar, field_85 varchar, field_244 varchar, field_72 varchar, field_21 varchar, field_248 bigint, field_172 bigint, field_205 bigint, field_222 bigint), field_61 row(field_155 varchar))), field_260 row(field_233 boolean, field_119 boolean, field_57 bigint, field_162 bigint, field_14 boolean, field_4 double, field_37 double))), field_109 boolean, field_99 array(row(field_92 bigint, field_54 varchar, field_204 row(field_113 row(field_20 varchar, field_1 bigint, field_92 bigint, field_50 varchar, field_122 array(varchar))), field_12 row(field_86 array(varchar), field_264 varchar), field_225 row(field_100 varchar), field_166 row(field_225 row(field_100 varchar), field_204 row(field_113 row(field_20 varchar, field_137 varchar, field_1 bigint, field_92 bigint, field_175 array(varchar))), field_12 row(field_26 row(field_86 array(row(field_220 varchar)), field_264 row(field_174 varchar))), field_227 row(field_254 row(field_92 bigint, field_206 double, field_123 double, field_235 varchar)), field_216 row(field_182 bigint, field_86 array(row(field_40 varchar)), field_264 varchar), field_81 row(field_176 row(field_30 varchar, field_148 bigint, field_2 varchar)), field_10 row(field_168 varchar), field_247 row(field_19 bigint), field_232 row(field_8 row(field_174 varchar)), field_250 row(field_212 varchar)), field_40 row(field_174 varchar))), field_264 row(field_92 bigint, field_60 varchar), field_104 varchar, field_38 varchar, field_56 varchar, field_196 row(field_92 bigint), field_98 array(row(field_92 bigint, field_155 varchar)), field_120 bigint, field_27 row(field_92 bigint), field_18 row(field_161 boolean), field_130 row(field_92 bigint, field_38 varchar, field_27 row(field_92 bigint)), field_189 row(field_92 bigint, field_116 row(field_1 bigint, field_92 bigint, field_50 varchar, field_137 varchar), field_238 row(field_191 varchar, field_92 bigint, field_235 varchar, field_103 varchar)), field_113 row(field_20 varchar, field_137 varchar, field_1 bigint, field_92 bigint, field_166 row(field_246 row(field_155 varchar), field_7 row(field_234 varchar, field_85 varchar, field_244 varchar, field_72 varchar, field_248 bigint, field_21 varchar, field_172 bigint, field_205 bigint, field_222 bigint), field_146 row(field_74 bigint, field_142 bigint, field_242 bigint, field_155 varchar, field_97 row(field_9 varchar), field_89 bigint), field_61 row(field_74 bigint, field_127 boolean, field_155 varchar)), field_175 array(varchar)), field_26 array(row(field_92 bigint, field_60 varchar)), field_240 row(field_233 boolean, field_119 boolean, field_57 bigint, field_162 bigint, field_14 boolean, field_4 double, field_37 double), field_224 row(field_233 boolean, field_119 boolean, field_57 bigint, field_162 bigint, field_34 boolean, field_207 boolean, field_65 boolean, field_28 bigint), field_43 row(field_215 varchar, field_43 varchar), field_101 row(field_233 boolean, field_119 boolean, field_57 bigint, field_162 bigint, field_14 boolean, field_4 double, field_37 double), field_29 row(field_151 row(field_92 bigint, field_235 varchar), field_135 varchar, field_92 bigint), field_75 boolean))\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "54f1ae5184dc54897293d2dc7b1137f8aff862d9"}, "originalPosition": 57}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a1151e50ecf686d47f388737979e453976c4589", "author": {"user": {"login": "daniel-ohayon", "name": "Daniel Ohayon"}}, "url": "https://github.com/prestodb/presto/commit/9a1151e50ecf686d47f388737979e453976c4589", "committedDate": "2020-09-24T20:32:43Z", "message": "Add long and varchar enum types"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0a184da0c0c42f89c7f0619251e05bd2a2a6bc20", "author": {"user": {"login": "daniel-ohayon", "name": "Daniel Ohayon"}}, "url": "https://github.com/prestodb/presto/commit/0a184da0c0c42f89c7f0619251e05bd2a2a6bc20", "committedDate": "2020-09-24T20:32:47Z", "message": "Support type bound in TypeVariableConstraint\n\nAdd an is-a constraint for type variables, so we can describe generic types of a certain kind."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0fd12d02de62bc5f604487ce87f53e3204710f5", "author": {"user": {"login": "daniel-ohayon", "name": "Daniel Ohayon"}}, "url": "https://github.com/prestodb/presto/commit/f0fd12d02de62bc5f604487ce87f53e3204710f5", "committedDate": "2020-09-24T20:32:47Z", "message": "Support enum literals in queries"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "54f1ae5184dc54897293d2dc7b1137f8aff862d9", "author": {"user": {"login": "daniel-ohayon", "name": "Daniel Ohayon"}}, "url": "https://github.com/prestodb/presto/commit/54f1ae5184dc54897293d2dc7b1137f8aff862d9", "committedDate": "2020-09-23T23:54:51Z", "message": "Fix type signature parsing performance regression"}, "afterCommit": {"oid": "2f83a7d7ebcbeb6cbb8c049bcc7cf0dfd10db5d7", "author": {"user": {"login": "daniel-ohayon", "name": "Daniel Ohayon"}}, "url": "https://github.com/prestodb/presto/commit/2f83a7d7ebcbeb6cbb8c049bcc7cf0dfd10db5d7", "committedDate": "2020-09-24T20:33:20Z", "message": "Add enum operators\n\nSupport common operators like `=` on enum types"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1OTcxNDM1", "url": "https://github.com/prestodb/presto/pull/15219#pullrequestreview-495971435", "createdAt": "2020-09-24T21:42:08Z", "commit": {"oid": "2f83a7d7ebcbeb6cbb8c049bcc7cf0dfd10db5d7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQyMTo0MjowOFrOHXtpZQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQyMTo0MjowOFrOHXtpZQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDYyNzE3Mw==", "bodyText": "Static import. In general our style convention is to always do static import unless it's too ambiguous.", "url": "https://github.com/prestodb/presto/pull/15219#discussion_r494627173", "createdAt": "2020-09-24T21:42:08Z", "author": {"login": "rongrong"}, "path": "presto-common/src/test/java/com/facebook/presto/common/type/BenchmarkTypeSignatureParsing.java", "diffHunk": "@@ -0,0 +1,78 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.common.type;\n+\n+import org.openjdk.jmh.annotations.Benchmark;\n+import org.openjdk.jmh.annotations.BenchmarkMode;\n+import org.openjdk.jmh.annotations.Fork;\n+import org.openjdk.jmh.annotations.Measurement;\n+import org.openjdk.jmh.annotations.Mode;\n+import org.openjdk.jmh.annotations.OutputTimeUnit;\n+import org.openjdk.jmh.annotations.Scope;\n+import org.openjdk.jmh.annotations.Setup;\n+import org.openjdk.jmh.annotations.State;\n+import org.openjdk.jmh.annotations.Warmup;\n+import org.openjdk.jmh.runner.Runner;\n+import org.openjdk.jmh.runner.options.Options;\n+import org.openjdk.jmh.runner.options.OptionsBuilder;\n+import org.openjdk.jmh.runner.options.VerboseMode;\n+\n+import java.util.concurrent.TimeUnit;\n+\n+@SuppressWarnings(\"MethodMayBeStatic\")\n+@State(Scope.Thread)\n+@OutputTimeUnit(TimeUnit.MILLISECONDS)\n+@Fork(1)\n+@Warmup(iterations = 5, timeUnit = TimeUnit.MILLISECONDS)\n+@Measurement(iterations = 10, timeUnit = TimeUnit.MILLISECONDS)\n+@BenchmarkMode(Mode.AverageTime)\n+public class BenchmarkTypeSignatureParsing\n+{\n+    @Benchmark\n+    public void parseRowTypeSignature(BenchmarkData data)\n+    {\n+        TypeSignature.parseTypeSignature(data.signature);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2f83a7d7ebcbeb6cbb8c049bcc7cf0dfd10db5d7"}, "originalPosition": 45}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1OTcxNTc1", "url": "https://github.com/prestodb/presto/pull/15219#pullrequestreview-495971575", "createdAt": "2020-09-24T21:42:24Z", "commit": {"oid": "2f83a7d7ebcbeb6cbb8c049bcc7cf0dfd10db5d7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk1OTgxMDk1", "url": "https://github.com/prestodb/presto/pull/15219#pullrequestreview-495981095", "createdAt": "2020-09-24T22:01:14Z", "commit": {"oid": "2f83a7d7ebcbeb6cbb8c049bcc7cf0dfd10db5d7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQyMjowMToxNFrOHXuI2Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNFQyMjowMToxNFrOHXuI2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDYzNTIyNQ==", "bodyText": "Can you update the description with benchmark results of both tests? Thanks!", "url": "https://github.com/prestodb/presto/pull/15219#discussion_r494635225", "createdAt": "2020-09-24T22:01:14Z", "author": {"login": "rongrong"}, "path": "presto-common/src/test/java/com/facebook/presto/common/type/BenchmarkTypeSignatureParsing.java", "diffHunk": "@@ -0,0 +1,78 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.facebook.presto.common.type;\n+\n+import org.openjdk.jmh.annotations.Benchmark;\n+import org.openjdk.jmh.annotations.BenchmarkMode;\n+import org.openjdk.jmh.annotations.Fork;\n+import org.openjdk.jmh.annotations.Measurement;\n+import org.openjdk.jmh.annotations.Mode;\n+import org.openjdk.jmh.annotations.OutputTimeUnit;\n+import org.openjdk.jmh.annotations.Scope;\n+import org.openjdk.jmh.annotations.Setup;\n+import org.openjdk.jmh.annotations.State;\n+import org.openjdk.jmh.annotations.Warmup;\n+import org.openjdk.jmh.runner.Runner;\n+import org.openjdk.jmh.runner.options.Options;\n+import org.openjdk.jmh.runner.options.OptionsBuilder;\n+import org.openjdk.jmh.runner.options.VerboseMode;\n+\n+import java.util.concurrent.TimeUnit;\n+\n+@SuppressWarnings(\"MethodMayBeStatic\")\n+@State(Scope.Thread)\n+@OutputTimeUnit(TimeUnit.MILLISECONDS)\n+@Fork(1)\n+@Warmup(iterations = 5, timeUnit = TimeUnit.MILLISECONDS)\n+@Measurement(iterations = 10, timeUnit = TimeUnit.MILLISECONDS)\n+@BenchmarkMode(Mode.AverageTime)\n+public class BenchmarkTypeSignatureParsing\n+{\n+    @Benchmark\n+    public void parseRowTypeSignature(BenchmarkData data)\n+    {\n+        TypeSignature.parseTypeSignature(data.signature);\n+    }\n+\n+    @Benchmark", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2f83a7d7ebcbeb6cbb8c049bcc7cf0dfd10db5d7"}, "originalPosition": 48}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9fadc83ac768cdbe229bcdb9af00443d3cadc70", "author": {"user": {"login": "daniel-ohayon", "name": "Daniel Ohayon"}}, "url": "https://github.com/prestodb/presto/commit/e9fadc83ac768cdbe229bcdb9af00443d3cadc70", "committedDate": "2020-09-25T15:30:33Z", "message": "Add enum operators\n\nSupport common operators like `=` on enum types"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2f83a7d7ebcbeb6cbb8c049bcc7cf0dfd10db5d7", "author": {"user": {"login": "daniel-ohayon", "name": "Daniel Ohayon"}}, "url": "https://github.com/prestodb/presto/commit/2f83a7d7ebcbeb6cbb8c049bcc7cf0dfd10db5d7", "committedDate": "2020-09-24T20:33:20Z", "message": "Add enum operators\n\nSupport common operators like `=` on enum types"}, "afterCommit": {"oid": "e9fadc83ac768cdbe229bcdb9af00443d3cadc70", "author": {"user": {"login": "daniel-ohayon", "name": "Daniel Ohayon"}}, "url": "https://github.com/prestodb/presto/commit/e9fadc83ac768cdbe229bcdb9af00443d3cadc70", "committedDate": "2020-09-25T15:30:33Z", "message": "Add enum operators\n\nSupport common operators like `=` on enum types"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4794, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}