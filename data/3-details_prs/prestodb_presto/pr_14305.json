{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk1MTc2ODc2", "number": 14305, "title": "Add release notes for 0.234", "bodyText": "Missing Release Notes\nCem Cayiroglu\n\n #14177 A new end point to get resource group stats (Merged by: Andrii Rosa)\n\nJonas Bauer\n\n 54dd54c Minor exception message fix for ArrayBlockBuilder\n\nKe\n\n 0834046 Update connectors.rst\n 8f1c093 Update connectors.rst\n 446e7f5 Update connectors.rst\n 82f8a4b Update connectors.rst\n\nRohit Jain\n\n #14113 Add ZSTD support for writing ORC and DWRF tables (Merged by: Maria Basmanova)\n\nSreeni Viswanadha\n\n #14276 Fix bucket pruning when value is null and the predicate is 'IS NULL'. (Merged by: Rongrong Zhong)\n #14221 Add @JsonProperty tag to ignoreNulls flag so it works in distributed \u2026 (Merged by: Rongrong Zhong)\n\nExtracted Release Notes\n\n#14119 (Author: Mat\u00edas Correa): Add KHyperLogLog type and UDF\n\nAdd KHyperLogLog Type.\nAdd MAKE_KHYPERLOGLOG(K, V) -> KHYPERLOGLOG aggregate function.\nAdd KHyperLogLog related scalar functions.\n\n\n#14125 (Author: James A. Gill): Add cast bingtile to/from bigint\n\nAdd cast(tile AS bigint) and cast(bigint_value AS bingtile) to encode/decode Bing tiles to/from bigints.  This is a more efficient storage format that also reduces bucket skew in some cases.\n\n\n#14137 (Author: James A. Gill): Enable spatial join for spherical geography ST_Distance\n\nEnable spatial joins for ST_Distance(p1, p2) < r for spherical geography points p1 and p2.\n\n\n#14181 (Author: Leiqing Cai): Support determinism analysis for simple queries with top-level ORDER BY LIMIT clause\n\nSupport determinism analysis for simple queries with top-level ORDER BY LIMIT clause. (:pr:14181).\n\n\n#14193 (Author: Wenlei Xie): Improve scale writer creation based on producer buffer\n\nImprove the scale writer heuristics by considering overall producer buffer utilization. This can be enabled by using the session property optimized_scale_writer_producer_buffer and the configuration property optimized-scale-writer-producer-buffer.\n\n\n#14194 (Author: Vic Zhang): Keep queries in the queue when task count is high\n\nAdd support for stopping new query execution when total number of tasks exceeds a set limit to help with reliability. The limit can be set by the cluster property by experimental.max-total-running-task-count-to-halt-scheduling.\n\n\n#14200 (Author: Zhenxiao Luo): Limit pushdown for Druid connector\n\nAdd LIMIT evaluation pushdown to Druid connector.\n\n\n#14216 (Author: Ariel Weisberg): Allow forcing streaming exchange for Mark Distinct\n\nAllow forcing streaming exchange for Mark Distinct using 'query.use-streaming-exchange-for-mark-distinct'.\n\n\n#14224 (Author: Zhenxiao Luo): Aggregation Pushdown for Druid connector\n\nAggregation Pushdown for Druid connector.\n\n\n#14225 (Author: Andrii Rosa): Optimize socket pooling\n\nOptimize connection pooling to avoid running out of sockets in certain cases.\n\n\n#14230 (Author: Leiqing Cai): Auto resolve time limit exceeded on checksum queries\n\nAdd support to auto-resolve control check query failures due to EXCEEDED_TIME_LIMIT.\n\n\n#14248 (Author: Nikhil Collooru): Add AccessControlContext to store client information for security purposes\n\nAll the methods in SystemAccessControl now take additional parameter AccessControlContext context.\n\n\n#14264 (Author: Rebecca Schlussel): Set use-legacy-scheduler true by default\n\nChange the default for configuration property use-legacy-scheduler to true in order to mitigate a regression in the new scheduler.\n\n\n#14266 (Author: Leiqing Cai): Support verifying SELECT queries with DATE or UNKNOWN columns\n\nAdd support for verifying SELECT queries that produce DATE or UNKNOWN (null) columns.\n\n\n#14267 (Author: Rongrong Zhong): Handle coalesce partition handle when bucket count does not match but compatible\n\nFix query failures with incompatible partition handle when session property partial_merge_pushdown_strategy is set to PUSH_THROUGH_LOW_MEMORY_OPERATORS and optimize_full_outer_join_with_coalesce is set to true and query has mismatched partition and uses FULL OUTER JOIN with COALESCE.\n\n\n#14273 (Author: Leiqing Cai): Support verifying structured types containing DATE and UNKNOWN\n\nAdd support for verifying SELECT queries that produce structured types containing DATE or UNKNOWN (null).\n\n\n\nAll Commits\n\n0f2b203 Reuse buffers in BlockEncodingBuffer (Ying Su)\n5b8b26e Add byte[] support to ArrayAllocator (Ying Su)\n3c2e9ee Return arrays in reverse order of borrowing (Ying Su)\nec684fb Clean up queries in DispatchManager (Tim Meehan)\nefd979a Add AccessControlContext to store client information for security purposes (Nikhil Collooru)\n61e3c88 Move SerializedPage to SPI (Vic Zhang)\n4e5dd5f Remove guava dependency from SerializedPage (Vic Zhang)\n96409c3 Move PageCodecMarker to SPI (Vic Zhang)\n151f57b Move BlockSerdeUtil to SPI (Vic Zhang)\nacb8af4 An end point to get resource group level stats (Cem Cayiroglu)\ne9b4d1f Fix getRetainedSizeInBytes for DecodedBlockNode (Ying Su)\n410dd09 Move RemoteSplit URI construction from coordinator to worker (Shixuan Fan)\n59ddb0b Remove unused ConnectorIdentity#{equals, hashCode} (Wenlei Xie)\n7af7880 Add partitioned spherical spatial joins (James A. Gill)\n0638aa0 Extract spherical geography functions to SphericalGeoFunctions (James A. Gill)\n9bebca5 Enable spatial join for spherical geography ST_Distance (James A. Gill)\n8bc8c94 Extract some spherical geometry functions to helper class (James A. Gill)\n6028f4d Create ThriftBufferResult and ThriftSerializedPage (Vic Zhang)\n5f21344 Add PrestoSparkAuthenticatorProvider (Wenlei Xie)\n9c32d6b Introduce TokenAuthenticator (Wenlei Xie)\n68e4367 Handle coalesce partition handle with mismatched bucket count (Rongrong Zhong)\ndd38222 Change default value for colocated_join to true (Rongrong Zhong)\n6613a6a Fix bucket pruning when value is null and the predicate is 'IS NULL'. (Sreeni Viswanadha)\ne90fd6b Reuse positions, mappedPositions and offsets in BlockEncodingBuffer (Ying Su)\nacac2e4 Add isNested flag to BlockEncodingBuffer (Ying Su)\ned23d49 Reuse offsetsCopy in BlockEncodingBuffer (Ying Su)\ndf3b10a Add ArrayAllocator to BlockEncodingBuffer (Ying Su)\nd3f9cfc Reuse serializedRowSizes buffer between different PartitionBuffers (Ying Su)\n1bbd131 Support verifying structured types containing DATE and UNKNOWN (Leiqing Cai)\ned7a6ef Use Type instead of TypeSignature in QueryRewriter (Leiqing Cai)\n613e19e Remove usage of String.format in HTTP client hot path (James Petty)\n5078fd6 Support verifying SELECT queries with UNKNOWN columns (Leiqing Cai)\n65a29b3 Support verifying SELECT queries with DATE columns (Leiqing Cai)\nae3cafe Improve JdbcPrestoAction (Leiqing Cai)\n7dc0453 Optimize parquet gzip decompression (James Petty)\n075b70e Set use-legacy-scheduler true by default (Rebecca Schlussel)\na3df4d1 Avoid Exceptions when closing queryRunner (Leiqing Cai)\n0bfc8cc Add toString() to SimpleArrayAllocator (Ying Su)\nac18342 Add benchmarks for Parquet reader (Venki Korukanti)\n32011d8 Make PageReader class public (Venki Korukanti)\na99684e Removed unused method (Venki Korukanti)\n528bd5c Move ColumnIOConverter to presto-parquet package (Venki Korukanti)\n5bad5a3 Add FileParquetDataSource for testing purpose (Venki Korukanti)\nfd5a7dd Removed unused ParquetDataSource#size (Venki Korukanti)\n11ae1f2 Revert \"Update connectors.rst\" (Ke Wang)\n0491783 Fix subscript expression optimization during subfield pushdown (Bhavani Hari)\ncaff58e Disable Presto-on-Spark query stats collection (Wenlei Xie)\nad1be42 Aggregation Pushdown for Druid connector (Zhenxiao Luo)\nc61194f Do not cancel running HTTP requests (Andrii Rosa)\naa77278 Update Airlift to 0.191 (Andrii Rosa)\n7c7fa10 Remove overrides for idle connection timeout (Andrii Rosa)\n7dda502 Refactor PrestoSparkLauncher (Andrii Rosa)\n000fa29 Reduce positions array size in PartitionBuffer (Ying Su)\ndd86faa Fix memory tracking for PartitionedOutputOperator (Ying Su)\n2b43154 Add support for testing DictionaryBlock with non-zero offset (Ying Su)\n660f0a7 Fix BlockFlattener when DictionaryBlock's idsOffset is nonzero (Ying Su)\nf88d652 Refactor TestBlockFlattenner (Ying Su)\n5d1797c Add ZSTD support for writing ORC and DWRF tables (Rohit Jain)\nb081418 Fix ArrayBlockEncodingBuffer#getRetainedSizeInBytes() (Ying Su)\n39c43b6 Add @JsonProperty tag to ignoreNulls flag so it works in distributed execution as well. (Sreeni Viswanadha)\nf35c660 Keep queries in the queue when task count is high (Vic Zhang)\nf6fd9ef Refactor TestQueryTaskLimit (Vic Zhang)\nf13cee1 Add configuration property to control query queuing (Vic Zhang)\n66e94ef Rename configuration properties for task count limit (Vic Zhang)\nf9bf064 Allow forcing streaming exchange for Mark Distinct (Ariel Weisberg)\n4d5bcff Use static imports in TestAddExchangePlans (Ariel Weisberg)\n7bfc203 Add purger to ExecutingStatementResource (Tim Meehan)\n3af06bd Simplify token management in protocol Query (Tim Meehan)\n916cc6c Fix result caching in protocol Query (Tim Meehan)\n4a992da Catch errors from LocalDispatchQuery querySubmitter (Tim Meehan)\n58c0b7e Change local dispatch to finish immediately after query submission (Tim Meehan)\n87b8729 Cleanup dispatcher executor management (Tim Meehan)\nc372011 Fix handling of failures during query creation (Tim Meehan)\n42b40c7 Simplify query manager stats tracking (Tim Meehan)\n9c17fc1 Rename SqlQueryManagerStats to QueryManagerStats (Tim Meehan)\nb93f31e Simplify DispatchInfo construction (Tim Meehan)\n39d639f Remove Optional from QueryStateMachine resourceGroup (Tim Meehan)\n7999f84 Improve query event stats for immediately failed queries (Tim Meehan)\ne23009a Add LocalCoordinatorLocation (Tim Meehan)\n2240313 Add peak tasks to BasicQueryStats (Tim Meehan)\na92f161 Split out queued phase from QueryManager (Tim Meehan)\nf72d511 Add DISPATCHING query states (Tim Meehan)\n8b7c734 Remove system startup minimum worker requirement (Tim Meehan)\n153761b Add query id to NoSuchElementException (Tim Meehan)\n8d5283d Optimize initial batch size for scan (Masha Basmanova)\na902a34 Harden blockEncodingBuffers in OptimizedPartitionedOutputOperator (Ying Su)\n0834046 Update connectors.rst (Ke)\n8f1c093 Update connectors.rst (Ke)\n446e7f5 Update connectors.rst (Ke)\n82f8a4b Update connectors.rst (Ke)\n3977cbf Improve entropy for bing tile bigint encoding (James A. Gill)\ne167e46 Add BingTile cast to/from bigint (James A. Gill)\n59f137a Auto-resolve EXCEEDED_TIME_LIMIT on control checksum queries (Leiqing Cai)\na021f7f Fix reading a map column having negative integers as keys (Bhavani Hari)\n0b7ab4b Rename PinotConnectorPlanOptimizer to PinotPlanOptimizer (James Sun)\nb03e989 Rename DruidConnectorPlanOptimizer to DruidPlanOptimizer (James Sun)\ne57af67 Fix typo in NodeSelectionStats (Shixuan Fan)\nf4b7869 Create KHyperLogLog type (Mat\u00edas Correa)\n411b5c6 Add nodeSelectionStats to monitor affinity scheduler (Ke Wang)\nfd0ec6b Add test methods to BenchmarkPartitionedOutputOperator (Ying Su)\n65606a1 Fix BenchmarkPartitionedOutputOperator (Ying Su)\nf5d93fb Minor fix to BenchmarkPartitionedOutputOperator (Ying Su)\n2ab2543 Improve scale writer creation based on producer buffer (Wenlei Xie)\na4608e1 Fix candiateNodes selection for Soft Affinity (Ke Wang)\n54dd54c Minor exception message fix for ArrayBlockBuilder (Jonas Bauer)\n0e144a6 Add allocation info to Task/Stage/QueryStats (Masha Basmanova)\n76e311d Add allocation info to PipelineStats (Masha Basmanova)\nec3dd65 Add allocation into to DriverStats (Masha Basmanova)\ne10de40 Refactor TestQueryStats (Masha Basmanova)\n419d155 Add allocation info to OperatorStats (Masha Basmanova)\n5fe659f Track allocations per operator (Masha Basmanova)\na9d1d33 Propagate flags to track allocation to OperationTimer (Masha Basmanova)\na64e5d8 Add config properties to enable tracking memory allocations (Masha Basmanova)\n569be23 Split test-hive-materialized on Travis (Leiqing Cai)\n757fd25 Remove version tags for presto projects from sub-module pom files (Leiqing Cai)\nb1c5015 Move Hive filter pushdown logic out of PickTableLayout (Saksham Sachdev)\n9fa0cae Separate some modules into their own travis jobs to reduce test times (Sujay Jain)\n5dadf5d Throw OrcCorruptionException for column type mismatch (Bhavani Hari)\n05407a7 Remove unused HiveFileContext in OrcReader (James Sun)\nf8ee9fd Add LIMIT evaluation pushdown to Druid connector (Zhenxiao Luo)\nd461465 Allow column pruning in SHOW STATS (Masha Basmanova)\nd8d3939 Materialize LazyBlock in scan (Ying Su)\nb36f463 Break presto-tests Travis jobs to reduce test times (Bhavani Hari)\n6d662bd Fix finishStatisticsCollection to have correct ConnectorSession (Mayank Garg)\nb429ddb Wait for final task info on abort (Andrii Rosa)\n1f77466 Always use JSON for PlanFragment serialization (Tim Meehan)\n7aed008 Support determinism analysis for simple ORDER BY LIMIT queries (Leiqing Cai)\n1e070b2 Improve Presto results conversion (Leiqing Cai)", "createdAt": "2020-03-29T00:44:55Z", "url": "https://github.com/prestodb/presto/pull/14305", "merged": true, "mergeCommit": {"oid": "08532370e3c37513be425b80df51b84a1171c57d"}, "closed": true, "closedAt": "2020-04-16T01:44:04Z", "author": {"login": "caithagoras"}, "timelineItems": {"totalCount": 30, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcSPZGvgBqjMxNzU0NzU5NTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcX_w-NgBqjMyMzc0ODQ5OTY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3b582ad8ce0fe01b4e731c864065c81dbc7f51c2", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/3b582ad8ce0fe01b4e731c864065c81dbc7f51c2", "committedDate": "2020-03-29T00:44:48Z", "message": "Add release notes for 0.234"}, "afterCommit": {"oid": "721237d03a4795954c5d2233d5fc51437b782f08", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/721237d03a4795954c5d2233d5fc51437b782f08", "committedDate": "2020-03-29T01:12:35Z", "message": "Add release notes for 0.234"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "721237d03a4795954c5d2233d5fc51437b782f08", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/721237d03a4795954c5d2233d5fc51437b782f08", "committedDate": "2020-03-29T01:12:35Z", "message": "Add release notes for 0.234"}, "afterCommit": {"oid": "327cb4b617c7209c1ee108831ecf7da8ea349a41", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/327cb4b617c7209c1ee108831ecf7da8ea349a41", "committedDate": "2020-03-29T01:16:05Z", "message": "Add release notes for 0.234"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "327cb4b617c7209c1ee108831ecf7da8ea349a41", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/327cb4b617c7209c1ee108831ecf7da8ea349a41", "committedDate": "2020-03-29T01:16:05Z", "message": "Add release notes for 0.234"}, "afterCommit": {"oid": "e80384a8ee2794eda1a5ecbfcdc6a578989d9a29", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/e80384a8ee2794eda1a5ecbfcdc6a578989d9a29", "committedDate": "2020-03-29T01:22:43Z", "message": "Add release notes for 0.234"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMzYzNzgw", "url": "https://github.com/prestodb/presto/pull/14305#pullrequestreview-383363780", "createdAt": "2020-03-29T01:19:51Z", "commit": {"oid": "327cb4b617c7209c1ee108831ecf7da8ea349a41"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQwMToxOTo1MVrOF9NmsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQwMToyNDoxMVrOF9Nn9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTczMDM1Mg==", "bodyText": "We need to add documentation when adding new functions @mcorreaiz  @tdcmeehan  @shixuan-fan\nSee issue: #14306", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r399730352", "createdAt": "2020-03-29T01:19:51Z", "author": {"login": "caithagoras"}, "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,40 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve system reliability by preventing additional queries to execute when the total number of tasks exceeds the limit, which can be\n+  set by configuration property ``experimental.max-total-running-task-count-to-halt-scheduling``.\n+* Improve storage efficiency for Bing tiles by storing Bing tiles as ``BIGINT``. This also reduces bucket skew in certain cases.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled by using the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve connection pooling to avoid running out of sockets.\n+* Add ``KHyperLogLog`` type and related functions.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "327cb4b617c7209c1ee108831ecf7da8ea349a41"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTczMDQxOA==", "bodyText": "@aweisberg Can you rephrase this to make sure user can understand? Are there any performance improvements resulting from this change? User may not understand \"streaming exchange\" or mark distinct", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r399730418", "createdAt": "2020-03-29T01:21:00Z", "author": {"login": "caithagoras"}, "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,40 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve system reliability by preventing additional queries to execute when the total number of tasks exceeds the limit, which can be\n+  set by configuration property ``experimental.max-total-running-task-count-to-halt-scheduling``.\n+* Improve storage efficiency for Bing tiles by storing Bing tiles as ``BIGINT``. This also reduces bucket skew in certain cases.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled by using the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve connection pooling to avoid running out of sockets.\n+* Add ``KHyperLogLog`` type and related functions.\n+* Add support for forcing streaming exchange for Mark Distinct using ``query.use-streaming-exchange-for-mark-distinct``.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "327cb4b617c7209c1ee108831ecf7da8ea349a41"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTczMDUxNA==", "bodyText": "@jagill Is ST_Distance(p1, p2) < r a join condition?", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r399730514", "createdAt": "2020-03-29T01:22:34Z", "author": {"login": "caithagoras"}, "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,40 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve system reliability by preventing additional queries to execute when the total number of tasks exceeds the limit, which can be\n+  set by configuration property ``experimental.max-total-running-task-count-to-halt-scheduling``.\n+* Improve storage efficiency for Bing tiles by storing Bing tiles as ``BIGINT``. This also reduces bucket skew in certain cases.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled by using the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve connection pooling to avoid running out of sockets.\n+* Add ``KHyperLogLog`` type and related functions.\n+* Add support for forcing streaming exchange for Mark Distinct using ``query.use-streaming-exchange-for-mark-distinct``.\n+\n+Geospatial Changes\n+__________________\n+* Add support for spatial joins for ``ST_Distance(p1, p2) < r`` for spherical geography points ``p1`` and ``p2``.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "327cb4b617c7209c1ee108831ecf7da8ea349a41"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTczMDY3Nw==", "bodyText": "@zhenxiao @highker Are there any improvements (e.g. performance) resulting from those changes?", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r399730677", "createdAt": "2020-03-29T01:24:11Z", "author": {"login": "caithagoras"}, "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,40 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve system reliability by preventing additional queries to execute when the total number of tasks exceeds the limit, which can be\n+  set by configuration property ``experimental.max-total-running-task-count-to-halt-scheduling``.\n+* Improve storage efficiency for Bing tiles by storing Bing tiles as ``BIGINT``. This also reduces bucket skew in certain cases.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled by using the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve connection pooling to avoid running out of sockets.\n+* Add ``KHyperLogLog`` type and related functions.\n+* Add support for forcing streaming exchange for Mark Distinct using ``query.use-streaming-exchange-for-mark-distinct``.\n+\n+Geospatial Changes\n+__________________\n+* Add support for spatial joins for ``ST_Distance(p1, p2) < r``.\n+\n+Hive Changes\n+____________\n+* Add ``ZSTD`` support for writing ``ORC`` and ``DWRF`` files. This can be enabled by setting session property ``hive.compression_codec=ZSTD``.\n+\n+Verifier Changes\n+________________\n+* Add support for verifying ``SELECT`` queries that produce ``DATE`` or ``UNKNOWN`` (null) columns, or structured typed columns with ``DATE`` or ``UNKNOWN``.\n+* Add support for auto-resolving control check query failures due to ``EXCEEDED_TIME_LIMIT``.\n+* Add determinism analysis support for simple queries with top-level ``ORDER BY LIMIT`` clause. (:pr:`14181`).\n+\n+SPI Changes\n+___________\n+* Add parameter ``AccessControlContext context`` to all methods in ``SystemAccessControl``.\n+\n+Druid Changes\n+_____________\n+* Add support for aggregation pushdown.\n+* Add support for ``LIMIT`` evaluation pushdown.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e80384a8ee2794eda1a5ecbfcdc6a578989d9a29"}, "originalPosition": 40}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMzY0MDg0", "url": "https://github.com/prestodb/presto/pull/14305#pullrequestreview-383364084", "createdAt": "2020-03-29T01:25:52Z", "commit": {"oid": "e80384a8ee2794eda1a5ecbfcdc6a578989d9a29"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQwMToyNTo1MlrOF9NoWg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQwMToyNTo1MlrOF9NoWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTczMDc3OA==", "bodyText": "@jagill Is ST_Distance(p1, p2) < r the join condition?", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r399730778", "createdAt": "2020-03-29T01:25:52Z", "author": {"login": "caithagoras"}, "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,40 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve system reliability by preventing additional queries to execute when the total number of tasks exceeds the limit, which can be\n+  set by configuration property ``experimental.max-total-running-task-count-to-halt-scheduling``.\n+* Improve storage efficiency for Bing tiles by storing Bing tiles as ``BIGINT``. This also reduces bucket skew in certain cases.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled by using the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve connection pooling to avoid running out of sockets.\n+* Add ``KHyperLogLog`` type and related functions.\n+* Add support for forcing streaming exchange for Mark Distinct using ``query.use-streaming-exchange-for-mark-distinct``.\n+\n+Geospatial Changes\n+__________________\n+* Add support for spatial joins for ``ST_Distance(p1, p2) < r``.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e80384a8ee2794eda1a5ecbfcdc6a578989d9a29"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMzY0NjAy", "url": "https://github.com/prestodb/presto/pull/14305#pullrequestreview-383364602", "createdAt": "2020-03-29T01:36:25Z", "commit": {"oid": "e80384a8ee2794eda1a5ecbfcdc6a578989d9a29"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQwMTozNjoyNlrOF9NrEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQwMTozNjoyNlrOF9NrEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTczMTQ3Mg==", "bodyText": "Since there's a geospatial changes section, this belongs there.", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r399731472", "createdAt": "2020-03-29T01:36:26Z", "author": {"login": "jagill"}, "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,40 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve system reliability by preventing additional queries to execute when the total number of tasks exceeds the limit, which can be\n+  set by configuration property ``experimental.max-total-running-task-count-to-halt-scheduling``.\n+* Improve storage efficiency for Bing tiles by storing Bing tiles as ``BIGINT``. This also reduces bucket skew in certain cases.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e80384a8ee2794eda1a5ecbfcdc6a578989d9a29"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e80384a8ee2794eda1a5ecbfcdc6a578989d9a29", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/e80384a8ee2794eda1a5ecbfcdc6a578989d9a29", "committedDate": "2020-03-29T01:22:43Z", "message": "Add release notes for 0.234"}, "afterCommit": {"oid": "5be6c25933a70c1c3848406b6a0f451e25e22611", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/5be6c25933a70c1c3848406b6a0f451e25e22611", "committedDate": "2020-03-30T02:08:09Z", "message": "Add release notes for 0.234 test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5be6c25933a70c1c3848406b6a0f451e25e22611", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/5be6c25933a70c1c3848406b6a0f451e25e22611", "committedDate": "2020-03-30T02:08:09Z", "message": "Add release notes for 0.234 test"}, "afterCommit": {"oid": "01d7ae73a70a9a16b15f3ac99fe65cef39056157", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/01d7ae73a70a9a16b15f3ac99fe65cef39056157", "committedDate": "2020-03-30T02:12:22Z", "message": "Add release notes for 0.234"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "01d7ae73a70a9a16b15f3ac99fe65cef39056157", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/01d7ae73a70a9a16b15f3ac99fe65cef39056157", "committedDate": "2020-03-30T02:12:22Z", "message": "Add release notes for 0.234"}, "afterCommit": {"oid": "bdc4d696e6a8750f503d1d7ae1a94ad3dac0d930", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/bdc4d696e6a8750f503d1d7ae1a94ad3dac0d930", "committedDate": "2020-03-30T02:36:47Z", "message": "Add release notes for 0.234"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzOTg3NzA0", "url": "https://github.com/prestodb/presto/pull/14305#pullrequestreview-383987704", "createdAt": "2020-03-30T15:44:25Z", "commit": {"oid": "bdc4d696e6a8750f503d1d7ae1a94ad3dac0d930"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxNTo0NDoyNVrOF9wIzg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQxNTo0NDoyNVrOF9wIzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDI5NjE0Mg==", "bodyText": "The configuration name is experimental.max-total-running-task-count-to-not-execute-new-query, thank you for update.", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r400296142", "createdAt": "2020-03-30T15:44:25Z", "author": {"login": "viczhang861"}, "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,40 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve system reliability by preventing additional queries to execute when the total number of tasks exceeds the limit, which can be\n+  set by configuration property ``experimental.max-total-running-task-count-to-halt-scheduling``.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bdc4d696e6a8750f503d1d7ae1a94ad3dac0d930"}, "originalPosition": 11}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bdc4d696e6a8750f503d1d7ae1a94ad3dac0d930", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/bdc4d696e6a8750f503d1d7ae1a94ad3dac0d930", "committedDate": "2020-03-30T02:36:47Z", "message": "Add release notes for 0.234"}, "afterCommit": {"oid": "56ac980fc8a8e5dbca76fe0d5c0b58ac9f592a64", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/56ac980fc8a8e5dbca76fe0d5c0b58ac9f592a64", "committedDate": "2020-04-10T19:05:24Z", "message": "Add release notes for 0.234"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "56ac980fc8a8e5dbca76fe0d5c0b58ac9f592a64", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/56ac980fc8a8e5dbca76fe0d5c0b58ac9f592a64", "committedDate": "2020-04-10T19:05:24Z", "message": "Add release notes for 0.234"}, "afterCommit": {"oid": "8958756fe0117d272471a586030555279d90ef07", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/8958756fe0117d272471a586030555279d90ef07", "committedDate": "2020-04-10T19:12:12Z", "message": "Add release notes for 0.234"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8958756fe0117d272471a586030555279d90ef07", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/8958756fe0117d272471a586030555279d90ef07", "committedDate": "2020-04-10T19:12:12Z", "message": "Add release notes for 0.234"}, "afterCommit": {"oid": "35c132753c8893d1bdc9e7e6468f9aa022bb3229", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/35c132753c8893d1bdc9e7e6468f9aa022bb3229", "committedDate": "2020-04-10T19:16:54Z", "message": "Add release notes for 0.234"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkxNzM0NTQ3", "url": "https://github.com/prestodb/presto/pull/14305#pullrequestreview-391734547", "createdAt": "2020-04-11T04:18:56Z", "commit": {"oid": "35c132753c8893d1bdc9e7e6468f9aa022bb3229"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMVQwNDoxODo1NlrOGEKPYA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xMVQwNDoxOTo0MlrOGEKPng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAxNTI2NA==", "bodyText": "just merged another two druid commits:\n\ncount distinct pushdown for druid connector\nfix druid connector segment scan", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r407015264", "createdAt": "2020-04-11T04:18:56Z", "author": {"login": "zhenxiao"}, "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,48 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve system reliability by preventing additional queries to execute when the total number of tasks exceeds the limit, which can be\n+  set by configuration property ``experimental.max-total-running-task-count-to-not-execute-new-query``.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled by using the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve connection pooling to avoid running out of sockets.\n+* Add :ref:`khyperloglog_type` type and related functions.\n+* Add support for streaming mark distinct changes even when materialized exchange is enabled via the\n+  ``query.use-streaming-exchange-for-mark-distinct`` property. Mark distinct is enabled by default and it introduces a\n+  stage per distinct column in a query in order to redistribute the tracking of distinct values across the entire cluster.\n+  With materialized exchange the cost of these additional exchanges is higher. Enabling streaming exchange if there is\n+  sufficient memory available to perform the distincting will reduce the cost of these additional stages while still\n+  reducing the memory used by other by non-Mark Distinct stages.\n+* Add support for end point ``/v1/resourceGroupState`` to return resource groups info with more filters.\n+  It is possible to filter the dynamically generated resource groups.\n+\n+Geospatial Changes\n+__________________\n+* Add support for spatial joins for join condition ``ST_Distance(p1, p2) < r``.\n+* Improve storage efficiency for Bing tiles by storing Bing tiles as ``BIGINT``. This also reduces bucket skew in certain cases.\n+\n+Hive Changes\n+____________\n+* Add ``ZSTD`` support for writing ``ORC`` and ``DWRF`` files. This can be enabled by setting session property ``hive.compression_codec=ZSTD``.\n+\n+Verifier Changes\n+________________\n+* Add support for verifying ``SELECT`` queries that produce ``DATE`` or ``UNKNOWN`` (null) columns, or structured typed columns with ``DATE`` or ``UNKNOWN``.\n+* Add support for auto-resolving control check query failures due to ``EXCEEDED_TIME_LIMIT``.\n+* Add determinism analysis support for simple queries with top-level ``ORDER BY LIMIT`` clause. (:pr:`14181`).\n+\n+SPI Changes\n+___________\n+* Add parameter ``AccessControlContext context`` to all methods in ``SystemAccessControl``.\n+* Add ``firstDynamicSegmentPosition`` to SelectionContext.\n+\n+Druid Changes\n+_____________\n+* Add support for aggregation pushdown.\n+* Add support for ``LIMIT`` evaluation pushdown.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35c132753c8893d1bdc9e7e6468f9aa022bb3229"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAxNTMyNg==", "bodyText": "1e51f2f\n5f89b53", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r407015326", "createdAt": "2020-04-11T04:19:42Z", "author": {"login": "zhenxiao"}, "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,48 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve system reliability by preventing additional queries to execute when the total number of tasks exceeds the limit, which can be\n+  set by configuration property ``experimental.max-total-running-task-count-to-not-execute-new-query``.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled by using the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve connection pooling to avoid running out of sockets.\n+* Add :ref:`khyperloglog_type` type and related functions.\n+* Add support for streaming mark distinct changes even when materialized exchange is enabled via the\n+  ``query.use-streaming-exchange-for-mark-distinct`` property. Mark distinct is enabled by default and it introduces a\n+  stage per distinct column in a query in order to redistribute the tracking of distinct values across the entire cluster.\n+  With materialized exchange the cost of these additional exchanges is higher. Enabling streaming exchange if there is\n+  sufficient memory available to perform the distincting will reduce the cost of these additional stages while still\n+  reducing the memory used by other by non-Mark Distinct stages.\n+* Add support for end point ``/v1/resourceGroupState`` to return resource groups info with more filters.\n+  It is possible to filter the dynamically generated resource groups.\n+\n+Geospatial Changes\n+__________________\n+* Add support for spatial joins for join condition ``ST_Distance(p1, p2) < r``.\n+* Improve storage efficiency for Bing tiles by storing Bing tiles as ``BIGINT``. This also reduces bucket skew in certain cases.\n+\n+Hive Changes\n+____________\n+* Add ``ZSTD`` support for writing ``ORC`` and ``DWRF`` files. This can be enabled by setting session property ``hive.compression_codec=ZSTD``.\n+\n+Verifier Changes\n+________________\n+* Add support for verifying ``SELECT`` queries that produce ``DATE`` or ``UNKNOWN`` (null) columns, or structured typed columns with ``DATE`` or ``UNKNOWN``.\n+* Add support for auto-resolving control check query failures due to ``EXCEEDED_TIME_LIMIT``.\n+* Add determinism analysis support for simple queries with top-level ``ORDER BY LIMIT`` clause. (:pr:`14181`).\n+\n+SPI Changes\n+___________\n+* Add parameter ``AccessControlContext context`` to all methods in ``SystemAccessControl``.\n+* Add ``firstDynamicSegmentPosition`` to SelectionContext.\n+\n+Druid Changes\n+_____________\n+* Add support for aggregation pushdown.\n+* Add support for ``LIMIT`` evaluation pushdown.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAxNTI2NA=="}, "originalCommit": {"oid": "35c132753c8893d1bdc9e7e6468f9aa022bb3229"}, "originalPosition": 48}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyMzcyNjQz", "url": "https://github.com/prestodb/presto/pull/14305#pullrequestreview-392372643", "createdAt": "2020-04-13T19:21:06Z", "commit": {"oid": "35c132753c8893d1bdc9e7e6468f9aa022bb3229"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QxOToyMTowN1rOGEx9UQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QxOToyODozM1rOGEyMdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY2NjAwMQ==", "bodyText": "This is not fixing the regression. Also, scheduler is a very broad term. Can we be more specific?\nFix a regression in query scheduling by disabling the new {add some context} scheduler by default. This can be enabled by setting the property `use-legacy-scheduler` to `true`", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r407666001", "createdAt": "2020-04-13T19:21:07Z", "author": {"login": "mayankgarg1990"}, "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,48 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35c132753c8893d1bdc9e7e6468f9aa022bb3229"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY2Nzk4Nw==", "bodyText": "Lets use the format in https://github.com/prestodb/presto/wiki/Release-Notes-Guidelines#phrasing.\nImprove coordinator reliability by adding support to cap the number of total tasks running in a coordinator by pausing scheduling. This can be enabled by setting the ......", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r407667987", "createdAt": "2020-04-13T19:24:49Z", "author": {"login": "mayankgarg1990"}, "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,48 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve system reliability by preventing additional queries to execute when the total number of tasks exceeds the limit, which can be", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35c132753c8893d1bdc9e7e6468f9aa022bb3229"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY2ODQ4Nw==", "bodyText": "this is too long. lets limit to 2 sentences.", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r407668487", "createdAt": "2020-04-13T19:25:47Z", "author": {"login": "mayankgarg1990"}, "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,48 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve system reliability by preventing additional queries to execute when the total number of tasks exceeds the limit, which can be\n+  set by configuration property ``experimental.max-total-running-task-count-to-not-execute-new-query``.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled by using the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve connection pooling to avoid running out of sockets.\n+* Add :ref:`khyperloglog_type` type and related functions.\n+* Add support for streaming mark distinct changes even when materialized exchange is enabled via the\n+  ``query.use-streaming-exchange-for-mark-distinct`` property. Mark distinct is enabled by default and it introduces a\n+  stage per distinct column in a query in order to redistribute the tracking of distinct values across the entire cluster.\n+  With materialized exchange the cost of these additional exchanges is higher. Enabling streaming exchange if there is\n+  sufficient memory available to perform the distincting will reduce the cost of these additional stages while still\n+  reducing the memory used by other by non-Mark Distinct stages.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35c132753c8893d1bdc9e7e6468f9aa022bb3229"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY2OTA5Mg==", "bodyText": "Improve end point ``v1/resourceGroupState` to supporting filtering of resource groups that are dynamically generated.", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r407669092", "createdAt": "2020-04-13T19:27:02Z", "author": {"login": "mayankgarg1990"}, "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,48 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve system reliability by preventing additional queries to execute when the total number of tasks exceeds the limit, which can be\n+  set by configuration property ``experimental.max-total-running-task-count-to-not-execute-new-query``.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled by using the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve connection pooling to avoid running out of sockets.\n+* Add :ref:`khyperloglog_type` type and related functions.\n+* Add support for streaming mark distinct changes even when materialized exchange is enabled via the\n+  ``query.use-streaming-exchange-for-mark-distinct`` property. Mark distinct is enabled by default and it introduces a\n+  stage per distinct column in a query in order to redistribute the tracking of distinct values across the entire cluster.\n+  With materialized exchange the cost of these additional exchanges is higher. Enabling streaming exchange if there is\n+  sufficient memory available to perform the distincting will reduce the cost of these additional stages while still\n+  reducing the memory used by other by non-Mark Distinct stages.\n+* Add support for end point ``/v1/resourceGroupState`` to return resource groups info with more filters.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35c132753c8893d1bdc9e7e6468f9aa022bb3229"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY2OTMzNw==", "bodyText": "Improve comes before Add", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r407669337", "createdAt": "2020-04-13T19:27:31Z", "author": {"login": "mayankgarg1990"}, "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,48 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve system reliability by preventing additional queries to execute when the total number of tasks exceeds the limit, which can be\n+  set by configuration property ``experimental.max-total-running-task-count-to-not-execute-new-query``.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled by using the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve connection pooling to avoid running out of sockets.\n+* Add :ref:`khyperloglog_type` type and related functions.\n+* Add support for streaming mark distinct changes even when materialized exchange is enabled via the\n+  ``query.use-streaming-exchange-for-mark-distinct`` property. Mark distinct is enabled by default and it introduces a\n+  stage per distinct column in a query in order to redistribute the tracking of distinct values across the entire cluster.\n+  With materialized exchange the cost of these additional exchanges is higher. Enabling streaming exchange if there is\n+  sufficient memory available to perform the distincting will reduce the cost of these additional stages while still\n+  reducing the memory used by other by non-Mark Distinct stages.\n+* Add support for end point ``/v1/resourceGroupState`` to return resource groups info with more filters.\n+  It is possible to filter the dynamically generated resource groups.\n+\n+Geospatial Changes\n+__________________\n+* Add support for spatial joins for join condition ``ST_Distance(p1, p2) < r``.\n+* Improve storage efficiency for Bing tiles by storing Bing tiles as ``BIGINT``. This also reduces bucket skew in certain cases.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35c132753c8893d1bdc9e7e6468f9aa022bb3229"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY2OTg3OQ==", "bodyText": "lets say:\nsession property ``hive.compression_codec`` to ``ZSTD``", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r407669879", "createdAt": "2020-04-13T19:28:33Z", "author": {"login": "mayankgarg1990"}, "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,48 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve system reliability by preventing additional queries to execute when the total number of tasks exceeds the limit, which can be\n+  set by configuration property ``experimental.max-total-running-task-count-to-not-execute-new-query``.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled by using the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve connection pooling to avoid running out of sockets.\n+* Add :ref:`khyperloglog_type` type and related functions.\n+* Add support for streaming mark distinct changes even when materialized exchange is enabled via the\n+  ``query.use-streaming-exchange-for-mark-distinct`` property. Mark distinct is enabled by default and it introduces a\n+  stage per distinct column in a query in order to redistribute the tracking of distinct values across the entire cluster.\n+  With materialized exchange the cost of these additional exchanges is higher. Enabling streaming exchange if there is\n+  sufficient memory available to perform the distincting will reduce the cost of these additional stages while still\n+  reducing the memory used by other by non-Mark Distinct stages.\n+* Add support for end point ``/v1/resourceGroupState`` to return resource groups info with more filters.\n+  It is possible to filter the dynamically generated resource groups.\n+\n+Geospatial Changes\n+__________________\n+* Add support for spatial joins for join condition ``ST_Distance(p1, p2) < r``.\n+* Improve storage efficiency for Bing tiles by storing Bing tiles as ``BIGINT``. This also reduces bucket skew in certain cases.\n+\n+Hive Changes\n+____________\n+* Add ``ZSTD`` support for writing ``ORC`` and ``DWRF`` files. This can be enabled by setting session property ``hive.compression_codec=ZSTD``.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "35c132753c8893d1bdc9e7e6468f9aa022bb3229"}, "originalPosition": 32}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "35c132753c8893d1bdc9e7e6468f9aa022bb3229", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/35c132753c8893d1bdc9e7e6468f9aa022bb3229", "committedDate": "2020-04-10T19:16:54Z", "message": "Add release notes for 0.234"}, "afterCommit": {"oid": "1a5ec9ad9e47f49df4d469ea39738999757ccfa0", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/1a5ec9ad9e47f49df4d469ea39738999757ccfa0", "committedDate": "2020-04-14T09:15:14Z", "message": "Add release notes for 0.234"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1a5ec9ad9e47f49df4d469ea39738999757ccfa0", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/1a5ec9ad9e47f49df4d469ea39738999757ccfa0", "committedDate": "2020-04-14T09:15:14Z", "message": "Add release notes for 0.234"}, "afterCommit": {"oid": "9160b15661fe27a94f3793cf31ea26f47c008447", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/9160b15661fe27a94f3793cf31ea26f47c008447", "committedDate": "2020-04-14T09:16:23Z", "message": "Add release notes for 0.234"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9160b15661fe27a94f3793cf31ea26f47c008447", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/9160b15661fe27a94f3793cf31ea26f47c008447", "committedDate": "2020-04-14T09:16:23Z", "message": "Add release notes for 0.234"}, "afterCommit": {"oid": "c1817e2e94db1fa30bbad74b21b38bf8fc9aeec6", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/c1817e2e94db1fa30bbad74b21b38bf8fc9aeec6", "committedDate": "2020-04-14T10:17:37Z", "message": "Add release notes for 0.234"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzMjczNzQ4", "url": "https://github.com/prestodb/presto/pull/14305#pullrequestreview-393273748", "createdAt": "2020-04-14T20:33:03Z", "commit": {"oid": "c1817e2e94db1fa30bbad74b21b38bf8fc9aeec6"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMDozMzowM1rOGFf0Xg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMDozNTo1MFrOGFf6kQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQxNzM3NA==", "bodyText": "So it is not necessary to say \"This can be enabled by ...\"\n\nThe idea was that instead of saying the property we have changed, focus on the actual change that we have the old scheduler the default and at the same time, if you still want to try it out - then use this. The mechanics of how the default is changed is not useful in my opinion. But since we are communicating to the users, I feel that it is better to tell them how to override it if they really want to.", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r408417374", "createdAt": "2020-04-14T20:33:03Z", "author": {"login": "mayankgarg1990"}, "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,48 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY2NjAwMQ=="}, "originalCommit": {"oid": "35c132753c8893d1bdc9e7e6468f9aa022bb3229"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQxNzgwMA==", "bodyText": "enabled by the - there is a missing by", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r408417800", "createdAt": "2020-04-14T20:33:48Z", "author": {"login": "mayankgarg1990"}, "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,51 @@\n+=============\n+Release 0.234\n+=============\n+\n+.. warning::\n+\n+   There is a regression in the scheduler that has not been fixed in this release. It has been temporarily mitigated by setting\n+   the default value of the configuration property ``use-legacy-scheduler`` to ``true``. Please keep the legacy scheduler enabled\n+   until the issue is fully resolved.\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve coordinator reliability by adding support to cap the number of total tasks running in a coordinator by pausing scheduling.\n+  This can be enabled by the configuration property ``experimental.max-total-running-task-count-to-not-execute-new-query``.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled the session property", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1817e2e94db1fa30bbad74b21b38bf8fc9aeec6"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQxODE1MA==", "bodyText": "This line is redundant - we can remove it", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r408418150", "createdAt": "2020-04-14T20:34:22Z", "author": {"login": "mayankgarg1990"}, "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,51 @@\n+=============\n+Release 0.234\n+=============\n+\n+.. warning::\n+\n+   There is a regression in the scheduler that has not been fixed in this release. It has been temporarily mitigated by setting\n+   the default value of the configuration property ``use-legacy-scheduler`` to ``true``. Please keep the legacy scheduler enabled\n+   until the issue is fully resolved.\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve coordinator reliability by adding support to cap the number of total tasks running in a coordinator by pausing scheduling.\n+  This can be enabled by the configuration property ``experimental.max-total-running-task-count-to-not-execute-new-query``.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve end point ``v1/resourceGroupState`` to supporting filtering of resource groups that are dynamically generated.\n+  It is possible to filter the dynamically generated resource groups.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1817e2e94db1fa30bbad74b21b38bf8fc9aeec6"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQxODk2MQ==", "bodyText": "I don't think that we need to pass the name of the variable context? Just mentioning the type should be enough.", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r408418961", "createdAt": "2020-04-14T20:35:50Z", "author": {"login": "mayankgarg1990"}, "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,51 @@\n+=============\n+Release 0.234\n+=============\n+\n+.. warning::\n+\n+   There is a regression in the scheduler that has not been fixed in this release. It has been temporarily mitigated by setting\n+   the default value of the configuration property ``use-legacy-scheduler`` to ``true``. Please keep the legacy scheduler enabled\n+   until the issue is fully resolved.\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve coordinator reliability by adding support to cap the number of total tasks running in a coordinator by pausing scheduling.\n+  This can be enabled by the configuration property ``experimental.max-total-running-task-count-to-not-execute-new-query``.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve end point ``v1/resourceGroupState`` to supporting filtering of resource groups that are dynamically generated.\n+  It is possible to filter the dynamically generated resource groups.\n+* Improve connection pooling to avoid running out of sockets.\n+* Add :ref:`khyperloglog_type` type and related functions.\n+* Add support forcing streaming exchange for Mark Distinct. This can be enabled by the session property ``use_stream_exchange_for_mark_distinct``\n+  and the configuration property ``query.use-streaming-exchange-for-mark-distinct``. (:pr:`14216`).\n+\n+\n+Geospatial Changes\n+__________________\n+* Improve storage efficiency for Bing tiles by storing Bing tiles as ``BIGINT``. This also reduces bucket skew in certain cases.\n+* Add support for spatial joins for join condition ``ST_Distance(p1, p2) < r``.\n+\n+Hive Changes\n+____________\n+* Add ``ZSTD`` support for writing ``ORC`` and ``DWRF`` files. This can be enabled by setting session property ``hive.compression_codec`` to ``ZSTD``.\n+\n+Verifier Changes\n+________________\n+* Add support for verifying ``SELECT`` queries that produce ``DATE`` or ``UNKNOWN`` (null) columns, or structured typed columns with ``DATE`` or ``UNKNOWN``.\n+* Add support for auto-resolving control check query failures due to ``EXCEEDED_TIME_LIMIT``.\n+* Add determinism analysis support for simple queries with top-level ``ORDER BY LIMIT`` clause. (:pr:`14181`).\n+\n+SPI Changes\n+___________\n+* Add parameter ``AccessControlContext context`` to all methods in ``SystemAccessControl``.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c1817e2e94db1fa30bbad74b21b38bf8fc9aeec6"}, "originalPosition": 45}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c1817e2e94db1fa30bbad74b21b38bf8fc9aeec6", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/c1817e2e94db1fa30bbad74b21b38bf8fc9aeec6", "committedDate": "2020-04-14T10:17:37Z", "message": "Add release notes for 0.234"}, "afterCommit": {"oid": "d25bf896ea907882b25ee9f533cb6ad9ebef0f2d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/d25bf896ea907882b25ee9f533cb6ad9ebef0f2d", "committedDate": "2020-04-14T20:55:55Z", "message": "Add release notes for 0.234"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d25bf896ea907882b25ee9f533cb6ad9ebef0f2d", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/d25bf896ea907882b25ee9f533cb6ad9ebef0f2d", "committedDate": "2020-04-14T20:55:55Z", "message": "Add release notes for 0.234"}, "afterCommit": {"oid": "545f97fbcb1040fc1c79cdb6ab778d496387de34", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/545f97fbcb1040fc1c79cdb6ab778d496387de34", "committedDate": "2020-04-14T21:35:56Z", "message": "Add release notes for 0.234"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzMzE2ODcw", "url": "https://github.com/prestodb/presto/pull/14305#pullrequestreview-393316870", "createdAt": "2020-04-14T21:42:07Z", "commit": {"oid": "545f97fbcb1040fc1c79cdb6ab778d496387de34"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMTo0MjowN1rOGFiBSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMTo0MzowOFrOGFiDBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ1MzQ0OQ==", "bodyText": "I thought this was a wrong results issue, rather than a query failure. @kaikalur", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r408453449", "createdAt": "2020-04-14T21:42:07Z", "author": {"login": "rschlussel"}, "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,49 @@\n+=============\n+Release 0.234\n+=============\n+\n+.. warning::\n+\n+   There is a regression in the scheduler that has not been fixed in this release. It has been temporarily mitigated by setting\n+   the default value of the configuration property ``use-legacy-scheduler`` to ``true``. Please keep the legacy scheduler enabled\n+   until the issue is fully resolved.\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "545f97fbcb1040fc1c79cdb6ab778d496387de34"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ1Mzg5NA==", "bodyText": "nit: should say \"for forcing\"", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r408453894", "createdAt": "2020-04-14T21:43:08Z", "author": {"login": "rschlussel"}, "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,49 @@\n+=============\n+Release 0.234\n+=============\n+\n+.. warning::\n+\n+   There is a regression in the scheduler that has not been fixed in this release. It has been temporarily mitigated by setting\n+   the default value of the configuration property ``use-legacy-scheduler`` to ``true``. Please keep the legacy scheduler enabled\n+   until the issue is fully resolved.\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Improve coordinator reliability by adding support to cap the number of total tasks running in a coordinator by pausing scheduling.\n+  This can be enabled by the configuration property ``experimental.max-total-running-task-count-to-not-execute-new-query``.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled by the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve end point ``v1/resourceGroupState`` to supporting filtering of resource groups that are dynamically generated.\n+* Improve connection pooling to avoid running out of sockets.\n+* Add :ref:`khyperloglog_type` type and related functions.\n+* Add support forcing streaming exchange for Mark Distinct. This can be enabled by the session property ``use_stream_exchange_for_mark_distinct``", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "545f97fbcb1040fc1c79cdb6ab778d496387de34"}, "originalPosition": 22}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "545f97fbcb1040fc1c79cdb6ab778d496387de34", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/545f97fbcb1040fc1c79cdb6ab778d496387de34", "committedDate": "2020-04-14T21:35:56Z", "message": "Add release notes for 0.234"}, "afterCommit": {"oid": "7981814c3292575f48166f77aea2e96a3763a390", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/7981814c3292575f48166f77aea2e96a3763a390", "committedDate": "2020-04-14T21:58:09Z", "message": "Add release notes for 0.234"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzMzI5MjQy", "url": "https://github.com/prestodb/presto/pull/14305#pullrequestreview-393329242", "createdAt": "2020-04-14T22:05:50Z", "commit": {"oid": "7981814c3292575f48166f77aea2e96a3763a390"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzMzMyNzE5", "url": "https://github.com/prestodb/presto/pull/14305#pullrequestreview-393332719", "createdAt": "2020-04-14T22:12:55Z", "commit": {"oid": "7981814c3292575f48166f77aea2e96a3763a390"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMjoxMjo1NVrOGFi2Xg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQyMjoxMjo1NVrOGFi2Xg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ2NzAzOA==", "bodyText": "\"Add support for forcing streaming exchange for Mark Distinct\" -> \"Add support for forcing streaming exchange for Mark Distinct even if materialized exchange is enabled.\"", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r408467038", "createdAt": "2020-04-14T22:12:55Z", "author": {"login": "aweisberg"}, "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,49 @@\n+=============\n+Release 0.234\n+=============\n+\n+.. warning::\n+\n+   There is a regression in the scheduler that has not been fixed in this release. It has been temporarily mitigated by setting\n+   the default value of the configuration property ``use-legacy-scheduler`` to ``true``. Please keep the legacy scheduler enabled\n+   until the issue is fully resolved.\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix an issue where ``IGNORE NULLS`` is not respected for window functions.\n+* Improve coordinator reliability by adding support to cap the number of total tasks running in a coordinator by pausing scheduling.\n+  This can be enabled by the configuration property ``experimental.max-total-running-task-count-to-not-execute-new-query``.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled by the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve end point ``v1/resourceGroupState`` to supporting filtering of resource groups that are dynamically generated.\n+* Improve connection pooling to avoid running out of sockets.\n+* Add :ref:`khyperloglog_type` type and related functions.\n+* Add support for forcing streaming exchange for Mark Distinct. This can be enabled by the session property ``use_stream_exchange_for_mark_distinct``", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7981814c3292575f48166f77aea2e96a3763a390"}, "originalPosition": 22}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7981814c3292575f48166f77aea2e96a3763a390", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/7981814c3292575f48166f77aea2e96a3763a390", "committedDate": "2020-04-14T21:58:09Z", "message": "Add release notes for 0.234"}, "afterCommit": {"oid": "fb49fed8804a8caf11ff7b437c0996c0b74247f9", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/fb49fed8804a8caf11ff7b437c0996c0b74247f9", "committedDate": "2020-04-15T07:00:45Z", "message": "Add release notes for 0.234"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fb49fed8804a8caf11ff7b437c0996c0b74247f9", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/fb49fed8804a8caf11ff7b437c0996c0b74247f9", "committedDate": "2020-04-15T07:00:45Z", "message": "Add release notes for 0.234"}, "afterCommit": {"oid": "0a311745c26e1c9d1b8c21b969b880068775e0f9", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/0a311745c26e1c9d1b8c21b969b880068775e0f9", "committedDate": "2020-04-15T07:03:53Z", "message": "Add release notes for 0.234"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0a311745c26e1c9d1b8c21b969b880068775e0f9", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/0a311745c26e1c9d1b8c21b969b880068775e0f9", "committedDate": "2020-04-15T07:03:53Z", "message": "Add release notes for 0.234"}, "afterCommit": {"oid": "841616e31fe4085e7336b940ba05d92480960a90", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/841616e31fe4085e7336b940ba05d92480960a90", "committedDate": "2020-04-15T20:27:16Z", "message": "Add release notes for 0.234"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "efda0258519b56f7b6ffdd48f6e6b313db8836e7", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/efda0258519b56f7b6ffdd48f6e6b313db8836e7", "committedDate": "2020-04-15T22:23:44Z", "message": "Add release notes for 0.234"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "841616e31fe4085e7336b940ba05d92480960a90", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/841616e31fe4085e7336b940ba05d92480960a90", "committedDate": "2020-04-15T20:27:16Z", "message": "Add release notes for 0.234"}, "afterCommit": {"oid": "efda0258519b56f7b6ffdd48f6e6b313db8836e7", "author": {"user": {"login": "caithagoras", "name": "Leiqing Cai"}}, "url": "https://github.com/prestodb/presto/commit/efda0258519b56f7b6ffdd48f6e6b313db8836e7", "committedDate": "2020-04-15T22:23:44Z", "message": "Add release notes for 0.234"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2127, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}